var TY=Object.defineProperty;var s7=e=>{throw TypeError(e)};var OY=(e,t,r)=>t in e?TY(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var Oa=(e,t,r)=>OY(e,typeof t!="symbol"?t+"":t,r),h3=(e,t,r)=>t.has(e)||s7("Cannot "+r);var st=(e,t,r)=>(h3(e,t,"read from private field"),r?r.call(e):t.get(e)),mn=(e,t,r)=>t.has(e)?s7("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),Lr=(e,t,r,n)=>(h3(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),ea=(e,t,r)=>(h3(e,t,"access private method"),r);var N2=(e,t,r,n)=>({set _(a){Lr(e,t,a,r)},get _(){return st(e,t,n)}});function m6(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in e)){const i=Object.getOwnPropertyDescriptor(n,a);i&&Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();var _2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function zc(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function PY(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var a=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,a.get?a:{enumerable:!0,get:function(){return e[n]}})}),r}var f3={exports:{}},hg={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i7;function IY(){if(i7)return hg;i7=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(n,a,i){var o=null;if(i!==void 0&&(o=""+i),a.key!==void 0&&(o=""+a.key),"key"in a){i={};for(var l in a)l!=="key"&&(i[l]=a[l])}else i=a;return a=i.ref,{$$typeof:e,type:n,key:o,ref:a!==void 0?a:null,props:i}}return hg.Fragment=t,hg.jsx=r,hg.jsxs=r,hg}var o7;function DY(){return o7||(o7=1,f3.exports=IY()),f3.exports}var s=DY(),m3={exports:{}},Hn={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l7;function MY(){if(l7)return Hn;l7=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),u=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),b=Symbol.iterator;function g(xe){return xe===null||typeof xe!="object"?null:(xe=b&&xe[b]||xe["@@iterator"],typeof xe=="function"?xe:null)}var k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y=Object.assign,N={};function S(xe,B,re){this.props=xe,this.context=B,this.refs=N,this.updater=re||k}S.prototype.isReactComponent={},S.prototype.setState=function(xe,B){if(typeof xe!="object"&&typeof xe!="function"&&xe!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,xe,B,"setState")},S.prototype.forceUpdate=function(xe){this.updater.enqueueForceUpdate(this,xe,"forceUpdate")};function O(){}O.prototype=S.prototype;function A(xe,B,re){this.props=xe,this.context=B,this.refs=N,this.updater=re||k}var P=A.prototype=new O;P.constructor=A,y(P,S.prototype),P.isPureReactComponent=!0;var q=Array.isArray;function W(){}var R={H:null,A:null,T:null,S:null},U=Object.prototype.hasOwnProperty;function L(xe,B,re){var J=re.ref;return{$$typeof:e,type:xe,key:B,ref:J!==void 0?J:null,props:re}}function Q(xe,B){return L(xe.type,B,xe.props)}function H(xe){return typeof xe=="object"&&xe!==null&&xe.$$typeof===e}function G(xe){var B={"=":"=0",":":"=2"};return"$"+xe.replace(/[=:]/g,function(re){return B[re]})}var Z=/\/+/g;function te(xe,B){return typeof xe=="object"&&xe!==null&&xe.key!=null?G(""+xe.key):B.toString(36)}function se(xe){switch(xe.status){case"fulfilled":return xe.value;case"rejected":throw xe.reason;default:switch(typeof xe.status=="string"?xe.then(W,W):(xe.status="pending",xe.then(function(B){xe.status==="pending"&&(xe.status="fulfilled",xe.value=B)},function(B){xe.status==="pending"&&(xe.status="rejected",xe.reason=B)})),xe.status){case"fulfilled":return xe.value;case"rejected":throw xe.reason}}throw xe}function ue(xe,B,re,J,ie){var Y=typeof xe;(Y==="undefined"||Y==="boolean")&&(xe=null);var _e=!1;if(xe===null)_e=!0;else switch(Y){case"bigint":case"string":case"number":_e=!0;break;case"object":switch(xe.$$typeof){case e:case t:_e=!0;break;case u:return _e=xe._init,ue(_e(xe._payload),B,re,J,ie)}}if(_e)return ie=ie(xe),_e=J===""?"."+te(xe,0):J,q(ie)?(re="",_e!=null&&(re=_e.replace(Z,"$&/")+"/"),ue(ie,B,re,"",function(je){return je})):ie!=null&&(H(ie)&&(ie=Q(ie,re+(ie.key==null||xe&&xe.key===ie.key?"":(""+ie.key).replace(Z,"$&/")+"/")+_e)),B.push(ie)),1;_e=0;var me=J===""?".":J+":";if(q(xe))for(var ne=0;ne<xe.length;ne++)J=xe[ne],Y=me+te(J,ne),_e+=ue(J,B,re,Y,ie);else if(ne=g(xe),typeof ne=="function")for(xe=ne.call(xe),ne=0;!(J=xe.next()).done;)J=J.value,Y=me+te(J,ne++),_e+=ue(J,B,re,Y,ie);else if(Y==="object"){if(typeof xe.then=="function")return ue(se(xe),B,re,J,ie);throw B=String(xe),Error("Objects are not valid as a React child (found: "+(B==="[object Object]"?"object with keys {"+Object.keys(xe).join(", ")+"}":B)+"). If you meant to render a collection of children, use an array instead.")}return _e}function ae(xe,B,re){if(xe==null)return xe;var J=[],ie=0;return ue(xe,J,"","",function(Y){return B.call(re,Y,ie++)}),J}function pe(xe){if(xe._status===-1){var B=xe._result;B=B(),B.then(function(re){(xe._status===0||xe._status===-1)&&(xe._status=1,xe._result=re)},function(re){(xe._status===0||xe._status===-1)&&(xe._status=2,xe._result=re)}),xe._status===-1&&(xe._status=0,xe._result=B)}if(xe._status===1)return xe._result.default;throw xe._result}var ve=typeof reportError=="function"?reportError:function(xe){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var B=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof xe=="object"&&xe!==null&&typeof xe.message=="string"?String(xe.message):String(xe),error:xe});if(!window.dispatchEvent(B))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",xe);return}console.error(xe)},Pe={map:ae,forEach:function(xe,B,re){ae(xe,function(){B.apply(this,arguments)},re)},count:function(xe){var B=0;return ae(xe,function(){B++}),B},toArray:function(xe){return ae(xe,function(B){return B})||[]},only:function(xe){if(!H(xe))throw Error("React.Children.only expected to receive a single React element child.");return xe}};return Hn.Activity=x,Hn.Children=Pe,Hn.Component=S,Hn.Fragment=r,Hn.Profiler=a,Hn.PureComponent=A,Hn.StrictMode=n,Hn.Suspense=d,Hn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,Hn.__COMPILER_RUNTIME={__proto__:null,c:function(xe){return R.H.useMemoCache(xe)}},Hn.cache=function(xe){return function(){return xe.apply(null,arguments)}},Hn.cacheSignal=function(){return null},Hn.cloneElement=function(xe,B,re){if(xe==null)throw Error("The argument must be a React element, but you passed "+xe+".");var J=y({},xe.props),ie=xe.key;if(B!=null)for(Y in B.key!==void 0&&(ie=""+B.key),B)!U.call(B,Y)||Y==="key"||Y==="__self"||Y==="__source"||Y==="ref"&&B.ref===void 0||(J[Y]=B[Y]);var Y=arguments.length-2;if(Y===1)J.children=re;else if(1<Y){for(var _e=Array(Y),me=0;me<Y;me++)_e[me]=arguments[me+2];J.children=_e}return L(xe.type,ie,J)},Hn.createContext=function(xe){return xe={$$typeof:o,_currentValue:xe,_currentValue2:xe,_threadCount:0,Provider:null,Consumer:null},xe.Provider=xe,xe.Consumer={$$typeof:i,_context:xe},xe},Hn.createElement=function(xe,B,re){var J,ie={},Y=null;if(B!=null)for(J in B.key!==void 0&&(Y=""+B.key),B)U.call(B,J)&&J!=="key"&&J!=="__self"&&J!=="__source"&&(ie[J]=B[J]);var _e=arguments.length-2;if(_e===1)ie.children=re;else if(1<_e){for(var me=Array(_e),ne=0;ne<_e;ne++)me[ne]=arguments[ne+2];ie.children=me}if(xe&&xe.defaultProps)for(J in _e=xe.defaultProps,_e)ie[J]===void 0&&(ie[J]=_e[J]);return L(xe,Y,ie)},Hn.createRef=function(){return{current:null}},Hn.forwardRef=function(xe){return{$$typeof:l,render:xe}},Hn.isValidElement=H,Hn.lazy=function(xe){return{$$typeof:u,_payload:{_status:-1,_result:xe},_init:pe}},Hn.memo=function(xe,B){return{$$typeof:c,type:xe,compare:B===void 0?null:B}},Hn.startTransition=function(xe){var B=R.T,re={};R.T=re;try{var J=xe(),ie=R.S;ie!==null&&ie(re,J),typeof J=="object"&&J!==null&&typeof J.then=="function"&&J.then(W,ve)}catch(Y){ve(Y)}finally{B!==null&&re.types!==null&&(B.types=re.types),R.T=B}},Hn.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},Hn.use=function(xe){return R.H.use(xe)},Hn.useActionState=function(xe,B,re){return R.H.useActionState(xe,B,re)},Hn.useCallback=function(xe,B){return R.H.useCallback(xe,B)},Hn.useContext=function(xe){return R.H.useContext(xe)},Hn.useDebugValue=function(){},Hn.useDeferredValue=function(xe,B){return R.H.useDeferredValue(xe,B)},Hn.useEffect=function(xe,B){return R.H.useEffect(xe,B)},Hn.useEffectEvent=function(xe){return R.H.useEffectEvent(xe)},Hn.useId=function(){return R.H.useId()},Hn.useImperativeHandle=function(xe,B,re){return R.H.useImperativeHandle(xe,B,re)},Hn.useInsertionEffect=function(xe,B){return R.H.useInsertionEffect(xe,B)},Hn.useLayoutEffect=function(xe,B){return R.H.useLayoutEffect(xe,B)},Hn.useMemo=function(xe,B){return R.H.useMemo(xe,B)},Hn.useOptimistic=function(xe,B){return R.H.useOptimistic(xe,B)},Hn.useReducer=function(xe,B,re){return R.H.useReducer(xe,B,re)},Hn.useRef=function(xe){return R.H.useRef(xe)},Hn.useState=function(xe){return R.H.useState(xe)},Hn.useSyncExternalStore=function(xe,B,re){return R.H.useSyncExternalStore(xe,B,re)},Hn.useTransition=function(){return R.H.useTransition()},Hn.version="19.2.0",Hn}var c7;function cp(){return c7||(c7=1,m3.exports=MY()),m3.exports}var T=cp();const ma=zc(T),LY=m6({__proto__:null,default:ma},[T]);var x3={exports:{}},fg={},p3={exports:{}},g3={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var d7;function RY(){return d7||(d7=1,(function(e){function t(ue,ae){var pe=ue.length;ue.push(ae);e:for(;0<pe;){var ve=pe-1>>>1,Pe=ue[ve];if(0<a(Pe,ae))ue[ve]=ae,ue[pe]=Pe,pe=ve;else break e}}function r(ue){return ue.length===0?null:ue[0]}function n(ue){if(ue.length===0)return null;var ae=ue[0],pe=ue.pop();if(pe!==ae){ue[0]=pe;e:for(var ve=0,Pe=ue.length,xe=Pe>>>1;ve<xe;){var B=2*(ve+1)-1,re=ue[B],J=B+1,ie=ue[J];if(0>a(re,pe))J<Pe&&0>a(ie,re)?(ue[ve]=ie,ue[J]=pe,ve=J):(ue[ve]=re,ue[B]=pe,ve=B);else if(J<Pe&&0>a(ie,pe))ue[ve]=ie,ue[J]=pe,ve=J;else break e}}return ae}function a(ue,ae){var pe=ue.sortIndex-ae.sortIndex;return pe!==0?pe:ue.id-ae.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var d=[],c=[],u=1,x=null,b=3,g=!1,k=!1,y=!1,N=!1,S=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;function P(ue){for(var ae=r(c);ae!==null;){if(ae.callback===null)n(c);else if(ae.startTime<=ue)n(c),ae.sortIndex=ae.expirationTime,t(d,ae);else break;ae=r(c)}}function q(ue){if(y=!1,P(ue),!k)if(r(d)!==null)k=!0,W||(W=!0,G());else{var ae=r(c);ae!==null&&se(q,ae.startTime-ue)}}var W=!1,R=-1,U=5,L=-1;function Q(){return N?!0:!(e.unstable_now()-L<U)}function H(){if(N=!1,W){var ue=e.unstable_now();L=ue;var ae=!0;try{e:{k=!1,y&&(y=!1,O(R),R=-1),g=!0;var pe=b;try{t:{for(P(ue),x=r(d);x!==null&&!(x.expirationTime>ue&&Q());){var ve=x.callback;if(typeof ve=="function"){x.callback=null,b=x.priorityLevel;var Pe=ve(x.expirationTime<=ue);if(ue=e.unstable_now(),typeof Pe=="function"){x.callback=Pe,P(ue),ae=!0;break t}x===r(d)&&n(d),P(ue)}else n(d);x=r(d)}if(x!==null)ae=!0;else{var xe=r(c);xe!==null&&se(q,xe.startTime-ue),ae=!1}}break e}finally{x=null,b=pe,g=!1}ae=void 0}}finally{ae?G():W=!1}}}var G;if(typeof A=="function")G=function(){A(H)};else if(typeof MessageChannel<"u"){var Z=new MessageChannel,te=Z.port2;Z.port1.onmessage=H,G=function(){te.postMessage(null)}}else G=function(){S(H,0)};function se(ue,ae){R=S(function(){ue(e.unstable_now())},ae)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(ue){ue.callback=null},e.unstable_forceFrameRate=function(ue){0>ue||125<ue?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):U=0<ue?Math.floor(1e3/ue):5},e.unstable_getCurrentPriorityLevel=function(){return b},e.unstable_next=function(ue){switch(b){case 1:case 2:case 3:var ae=3;break;default:ae=b}var pe=b;b=ae;try{return ue()}finally{b=pe}},e.unstable_requestPaint=function(){N=!0},e.unstable_runWithPriority=function(ue,ae){switch(ue){case 1:case 2:case 3:case 4:case 5:break;default:ue=3}var pe=b;b=ue;try{return ae()}finally{b=pe}},e.unstable_scheduleCallback=function(ue,ae,pe){var ve=e.unstable_now();switch(typeof pe=="object"&&pe!==null?(pe=pe.delay,pe=typeof pe=="number"&&0<pe?ve+pe:ve):pe=ve,ue){case 1:var Pe=-1;break;case 2:Pe=250;break;case 5:Pe=1073741823;break;case 4:Pe=1e4;break;default:Pe=5e3}return Pe=pe+Pe,ue={id:u++,callback:ae,priorityLevel:ue,startTime:pe,expirationTime:Pe,sortIndex:-1},pe>ve?(ue.sortIndex=pe,t(c,ue),r(d)===null&&ue===r(c)&&(y?(O(R),R=-1):y=!0,se(q,pe-ve))):(ue.sortIndex=Pe,t(d,ue),k||g||(k=!0,W||(W=!0,G()))),ue},e.unstable_shouldYield=Q,e.unstable_wrapCallback=function(ue){var ae=b;return function(){var pe=b;b=ae;try{return ue.apply(this,arguments)}finally{b=pe}}}})(g3)),g3}var u7;function FY(){return u7||(u7=1,p3.exports=RY()),p3.exports}var b3={exports:{}},Yo={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h7;function BY(){if(h7)return Yo;h7=1;var e=cp();function t(d){var c="https://react.dev/errors/"+d;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)c+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+d+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var n={d:{f:r,r:function(){throw Error(t(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},a=Symbol.for("react.portal");function i(d,c,u){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:x==null?null:""+x,children:d,containerInfo:c,implementation:u}}var o=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(d,c){if(d==="font")return"";if(typeof c=="string")return c==="use-credentials"?c:""}return Yo.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,Yo.createPortal=function(d,c){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)throw Error(t(299));return i(d,c,null,u)},Yo.flushSync=function(d){var c=o.T,u=n.p;try{if(o.T=null,n.p=2,d)return d()}finally{o.T=c,n.p=u,n.d.f()}},Yo.preconnect=function(d,c){typeof d=="string"&&(c?(c=c.crossOrigin,c=typeof c=="string"?c==="use-credentials"?c:"":void 0):c=null,n.d.C(d,c))},Yo.prefetchDNS=function(d){typeof d=="string"&&n.d.D(d)},Yo.preinit=function(d,c){if(typeof d=="string"&&c&&typeof c.as=="string"){var u=c.as,x=l(u,c.crossOrigin),b=typeof c.integrity=="string"?c.integrity:void 0,g=typeof c.fetchPriority=="string"?c.fetchPriority:void 0;u==="style"?n.d.S(d,typeof c.precedence=="string"?c.precedence:void 0,{crossOrigin:x,integrity:b,fetchPriority:g}):u==="script"&&n.d.X(d,{crossOrigin:x,integrity:b,fetchPriority:g,nonce:typeof c.nonce=="string"?c.nonce:void 0})}},Yo.preinitModule=function(d,c){if(typeof d=="string")if(typeof c=="object"&&c!==null){if(c.as==null||c.as==="script"){var u=l(c.as,c.crossOrigin);n.d.M(d,{crossOrigin:u,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0})}}else c==null&&n.d.M(d)},Yo.preload=function(d,c){if(typeof d=="string"&&typeof c=="object"&&c!==null&&typeof c.as=="string"){var u=c.as,x=l(u,c.crossOrigin);n.d.L(d,u,{crossOrigin:x,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0,type:typeof c.type=="string"?c.type:void 0,fetchPriority:typeof c.fetchPriority=="string"?c.fetchPriority:void 0,referrerPolicy:typeof c.referrerPolicy=="string"?c.referrerPolicy:void 0,imageSrcSet:typeof c.imageSrcSet=="string"?c.imageSrcSet:void 0,imageSizes:typeof c.imageSizes=="string"?c.imageSizes:void 0,media:typeof c.media=="string"?c.media:void 0})}},Yo.preloadModule=function(d,c){if(typeof d=="string")if(c){var u=l(c.as,c.crossOrigin);n.d.m(d,{as:typeof c.as=="string"&&c.as!=="script"?c.as:void 0,crossOrigin:u,integrity:typeof c.integrity=="string"?c.integrity:void 0})}else n.d.m(d)},Yo.requestFormReset=function(d){n.d.r(d)},Yo.unstable_batchedUpdates=function(d,c){return d(c)},Yo.useFormState=function(d,c,u){return o.H.useFormState(d,c,u)},Yo.useFormStatus=function(){return o.H.useHostTransitionStatus()},Yo.version="19.2.0",Yo}var f7;function WF(){if(f7)return b3.exports;f7=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),b3.exports=BY(),b3.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var m7;function UY(){if(m7)return fg;m7=1;var e=FY(),t=cp(),r=WF();function n(h){var m="https://react.dev/errors/"+h;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var w=2;w<arguments.length;w++)m+="&args[]="+encodeURIComponent(arguments[w])}return"Minified React error #"+h+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(h){return!(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)}function i(h){var m=h,w=h;if(h.alternate)for(;m.return;)m=m.return;else{h=m;do m=h,(m.flags&4098)!==0&&(w=m.return),h=m.return;while(h)}return m.tag===3?w:null}function o(h){if(h.tag===13){var m=h.memoizedState;if(m===null&&(h=h.alternate,h!==null&&(m=h.memoizedState)),m!==null)return m.dehydrated}return null}function l(h){if(h.tag===31){var m=h.memoizedState;if(m===null&&(h=h.alternate,h!==null&&(m=h.memoizedState)),m!==null)return m.dehydrated}return null}function d(h){if(i(h)!==h)throw Error(n(188))}function c(h){var m=h.alternate;if(!m){if(m=i(h),m===null)throw Error(n(188));return m!==h?null:h}for(var w=h,C=m;;){var M=w.return;if(M===null)break;var V=M.alternate;if(V===null){if(C=M.return,C!==null){w=C;continue}break}if(M.child===V.child){for(V=M.child;V;){if(V===w)return d(M),h;if(V===C)return d(M),m;V=V.sibling}throw Error(n(188))}if(w.return!==C.return)w=M,C=V;else{for(var he=!1,Fe=M.child;Fe;){if(Fe===w){he=!0,w=M,C=V;break}if(Fe===C){he=!0,C=M,w=V;break}Fe=Fe.sibling}if(!he){for(Fe=V.child;Fe;){if(Fe===w){he=!0,w=V,C=M;break}if(Fe===C){he=!0,C=V,w=M;break}Fe=Fe.sibling}if(!he)throw Error(n(189))}}if(w.alternate!==C)throw Error(n(190))}if(w.tag!==3)throw Error(n(188));return w.stateNode.current===w?h:m}function u(h){var m=h.tag;if(m===5||m===26||m===27||m===6)return h;for(h=h.child;h!==null;){if(m=u(h),m!==null)return m;h=h.sibling}return null}var x=Object.assign,b=Symbol.for("react.element"),g=Symbol.for("react.transitional.element"),k=Symbol.for("react.portal"),y=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),O=Symbol.for("react.consumer"),A=Symbol.for("react.context"),P=Symbol.for("react.forward_ref"),q=Symbol.for("react.suspense"),W=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),U=Symbol.for("react.lazy"),L=Symbol.for("react.activity"),Q=Symbol.for("react.memo_cache_sentinel"),H=Symbol.iterator;function G(h){return h===null||typeof h!="object"?null:(h=H&&h[H]||h["@@iterator"],typeof h=="function"?h:null)}var Z=Symbol.for("react.client.reference");function te(h){if(h==null)return null;if(typeof h=="function")return h.$$typeof===Z?null:h.displayName||h.name||null;if(typeof h=="string")return h;switch(h){case y:return"Fragment";case S:return"Profiler";case N:return"StrictMode";case q:return"Suspense";case W:return"SuspenseList";case L:return"Activity"}if(typeof h=="object")switch(h.$$typeof){case k:return"Portal";case A:return h.displayName||"Context";case O:return(h._context.displayName||"Context")+".Consumer";case P:var m=h.render;return h=h.displayName,h||(h=m.displayName||m.name||"",h=h!==""?"ForwardRef("+h+")":"ForwardRef"),h;case R:return m=h.displayName||null,m!==null?m:te(h.type)||"Memo";case U:m=h._payload,h=h._init;try{return te(h(m))}catch{}}return null}var se=Array.isArray,ue=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,pe={pending:!1,data:null,method:null,action:null},ve=[],Pe=-1;function xe(h){return{current:h}}function B(h){0>Pe||(h.current=ve[Pe],ve[Pe]=null,Pe--)}function re(h,m){Pe++,ve[Pe]=h.current,h.current=m}var J=xe(null),ie=xe(null),Y=xe(null),_e=xe(null);function me(h,m){switch(re(Y,m),re(ie,h),re(J,null),m.nodeType){case 9:case 11:h=(h=m.documentElement)&&(h=h.namespaceURI)?AT(h):0;break;default:if(h=m.tagName,m=m.namespaceURI)m=AT(m),h=ET(m,h);else switch(h){case"svg":h=1;break;case"math":h=2;break;default:h=0}}B(J),re(J,h)}function ne(){B(J),B(ie),B(Y)}function je(h){h.memoizedState!==null&&re(_e,h);var m=J.current,w=ET(m,h.type);m!==w&&(re(ie,h),re(J,w))}function De(h){ie.current===h&&(B(J),B(ie)),_e.current===h&&(B(_e),lg._currentValue=pe)}var ce,Ee;function be(h){if(ce===void 0)try{throw Error()}catch(w){var m=w.stack.trim().match(/\n( *(at )?)/);ce=m&&m[1]||"",Ee=-1<w.stack.indexOf(`
    at`)?" (<anonymous>)":-1<w.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ce+h+Ee}var ge=!1;function Qe(h,m){if(!h||ge)return"";ge=!0;var w=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var C={DetermineComponentFrameRoot:function(){try{if(m){var er=function(){throw Error()};if(Object.defineProperty(er.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(er,[])}catch(Dt){var Ot=Dt}Reflect.construct(h,[],er)}else{try{er.call()}catch(Dt){Ot=Dt}h.call(er.prototype)}}else{try{throw Error()}catch(Dt){Ot=Dt}(er=h())&&typeof er.catch=="function"&&er.catch(function(){})}}catch(Dt){if(Dt&&Ot&&typeof Dt.stack=="string")return[Dt.stack,Ot.stack]}return[null,null]}};C.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var M=Object.getOwnPropertyDescriptor(C.DetermineComponentFrameRoot,"name");M&&M.configurable&&Object.defineProperty(C.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var V=C.DetermineComponentFrameRoot(),he=V[0],Fe=V[1];if(he&&Fe){var nt=he.split(`
`),_t=Fe.split(`
`);for(M=C=0;C<nt.length&&!nt[C].includes("DetermineComponentFrameRoot");)C++;for(;M<_t.length&&!_t[M].includes("DetermineComponentFrameRoot");)M++;if(C===nt.length||M===_t.length)for(C=nt.length-1,M=_t.length-1;1<=C&&0<=M&&nt[C]!==_t[M];)M--;for(;1<=C&&0<=M;C--,M--)if(nt[C]!==_t[M]){if(C!==1||M!==1)do if(C--,M--,0>M||nt[C]!==_t[M]){var Gt=`
`+nt[C].replace(" at new "," at ");return h.displayName&&Gt.includes("<anonymous>")&&(Gt=Gt.replace("<anonymous>",h.displayName)),Gt}while(1<=C&&0<=M);break}}}finally{ge=!1,Error.prepareStackTrace=w}return(w=h?h.displayName||h.name:"")?be(w):""}function Ye(h,m){switch(h.tag){case 26:case 27:case 5:return be(h.type);case 16:return be("Lazy");case 13:return h.child!==m&&m!==null?be("Suspense Fallback"):be("Suspense");case 19:return be("SuspenseList");case 0:case 15:return Qe(h.type,!1);case 11:return Qe(h.type.render,!1);case 1:return Qe(h.type,!0);case 31:return be("Activity");default:return""}}function at(h){try{var m="",w=null;do m+=Ye(h,w),w=h,h=h.return;while(h);return m}catch(C){return`
Error generating stack: `+C.message+`
`+C.stack}}var Je=Object.prototype.hasOwnProperty,ct=e.unstable_scheduleCallback,Ke=e.unstable_cancelCallback,zt=e.unstable_shouldYield,Ft=e.unstable_requestPaint,fr=e.unstable_now,hr=e.unstable_getCurrentPriorityLevel,sr=e.unstable_ImmediatePriority,Sr=e.unstable_UserBlockingPriority,tr=e.unstable_NormalPriority,Jt=e.unstable_LowPriority,Kt=e.unstable_IdlePriority,ar=e.log,vr=e.unstable_setDisableYieldValue,rr=null,ft=null;function br(h){if(typeof ar=="function"&&vr(h),ft&&typeof ft.setStrictMode=="function")try{ft.setStrictMode(rr,h)}catch{}}var yr=Math.clz32?Math.clz32:Lt,gr=Math.log,ot=Math.LN2;function Lt(h){return h>>>=0,h===0?32:31-(gr(h)/ot|0)|0}var ir=256,Mt=262144,Ge=4194304;function At(h){var m=h&42;if(m!==0)return m;switch(h&-h){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return h&261888;case 262144:case 524288:case 1048576:case 2097152:return h&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return h&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return h}}function ur(h,m,w){var C=h.pendingLanes;if(C===0)return 0;var M=0,V=h.suspendedLanes,he=h.pingedLanes;h=h.warmLanes;var Fe=C&134217727;return Fe!==0?(C=Fe&~V,C!==0?M=At(C):(he&=Fe,he!==0?M=At(he):w||(w=Fe&~h,w!==0&&(M=At(w))))):(Fe=C&~V,Fe!==0?M=At(Fe):he!==0?M=At(he):w||(w=C&~h,w!==0&&(M=At(w)))),M===0?0:m!==0&&m!==M&&(m&V)===0&&(V=M&-M,w=m&-m,V>=w||V===32&&(w&4194048)!==0)?m:M}function Dr(h,m){return(h.pendingLanes&~(h.suspendedLanes&~h.pingedLanes)&m)===0}function jr(h,m){switch(h){case 1:case 2:case 4:case 8:case 64:return m+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return m+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Xt(){var h=Ge;return Ge<<=1,(Ge&62914560)===0&&(Ge=4194304),h}function Wr(h){for(var m=[],w=0;31>w;w++)m.push(h);return m}function cr(h,m){h.pendingLanes|=m,m!==268435456&&(h.suspendedLanes=0,h.pingedLanes=0,h.warmLanes=0)}function pr(h,m,w,C,M,V){var he=h.pendingLanes;h.pendingLanes=w,h.suspendedLanes=0,h.pingedLanes=0,h.warmLanes=0,h.expiredLanes&=w,h.entangledLanes&=w,h.errorRecoveryDisabledLanes&=w,h.shellSuspendCounter=0;var Fe=h.entanglements,nt=h.expirationTimes,_t=h.hiddenUpdates;for(w=he&~w;0<w;){var Gt=31-yr(w),er=1<<Gt;Fe[Gt]=0,nt[Gt]=-1;var Ot=_t[Gt];if(Ot!==null)for(_t[Gt]=null,Gt=0;Gt<Ot.length;Gt++){var Dt=Ot[Gt];Dt!==null&&(Dt.lane&=-536870913)}w&=~er}C!==0&&Rr(h,C,0),V!==0&&M===0&&h.tag!==0&&(h.suspendedLanes|=V&~(he&~m))}function Rr(h,m,w){h.pendingLanes|=m,h.suspendedLanes&=~m;var C=31-yr(m);h.entangledLanes|=m,h.entanglements[C]=h.entanglements[C]|1073741824|w&261930}function Ir(h,m){var w=h.entangledLanes|=m;for(h=h.entanglements;w;){var C=31-yr(w),M=1<<C;M&m|h[C]&m&&(h[C]|=m),w&=~M}}function Nn(h,m){var w=m&-m;return w=(w&42)!==0?1:Mr(w),(w&(h.suspendedLanes|m))!==0?0:w}function Mr(h){switch(h){case 2:h=1;break;case 8:h=4;break;case 32:h=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:h=128;break;case 268435456:h=134217728;break;default:h=0}return h}function Gr(h){return h&=-h,2<h?8<h?(h&134217727)!==0?32:268435456:8:2}function Ne(){var h=ae.p;return h!==0?h:(h=window.event,h===void 0?32:ZT(h.type))}function Me(h,m){var w=ae.p;try{return ae.p=h,m()}finally{ae.p=w}}var Re=Math.random().toString(36).slice(2),Ce="__reactFiber$"+Re,Ue="__reactProps$"+Re,de="__reactContainer$"+Re,qe="__reactEvents$"+Re,et="__reactListeners$"+Re,tt="__reactHandles$"+Re,Ae="__reactResources$"+Re,Xe="__reactMarker$"+Re;function mt(h){delete h[Ce],delete h[Ue],delete h[qe],delete h[et],delete h[tt]}function Tt(h){var m=h[Ce];if(m)return m;for(var w=h.parentNode;w;){if(m=w[de]||w[Ce]){if(w=m.alternate,m.child!==null||w!==null&&w.child!==null)for(h=LT(h);h!==null;){if(w=h[Ce])return w;h=LT(h)}return m}h=w,w=h.parentNode}return null}function Rt(h){if(h=h[Ce]||h[de]){var m=h.tag;if(m===5||m===6||m===13||m===31||m===26||m===27||m===3)return h}return null}function Yt(h){var m=h.tag;if(m===5||m===26||m===27||m===6)return h.stateNode;throw Error(n(33))}function or(h){var m=h[Ae];return m||(m=h[Ae]={hoistableStyles:new Map,hoistableScripts:new Map}),m}function Cr(h){h[Xe]=!0}var Et=new Set,dn={};function Zr(h,m){ia(h,m),ia(h+"Capture",m)}function ia(h,m){for(dn[h]=m,h=0;h<m.length;h++)Et.add(m[h])}var ta=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Jr={},Fr={};function rn(h){return Je.call(Fr,h)?!0:Je.call(Jr,h)?!1:ta.test(h)?Fr[h]=!0:(Jr[h]=!0,!1)}function ga(h,m,w){if(rn(m))if(w===null)h.removeAttribute(m);else{switch(typeof w){case"undefined":case"function":case"symbol":h.removeAttribute(m);return;case"boolean":var C=m.toLowerCase().slice(0,5);if(C!=="data-"&&C!=="aria-"){h.removeAttribute(m);return}}h.setAttribute(m,""+w)}}function Rs(h,m,w){if(w===null)h.removeAttribute(m);else{switch(typeof w){case"undefined":case"function":case"symbol":case"boolean":h.removeAttribute(m);return}h.setAttribute(m,""+w)}}function ra(h,m,w,C){if(C===null)h.removeAttribute(w);else{switch(typeof C){case"undefined":case"function":case"symbol":case"boolean":h.removeAttribute(w);return}h.setAttributeNS(m,w,""+C)}}function Gn(h){switch(typeof h){case"bigint":case"boolean":case"number":case"string":case"undefined":return h;case"object":return h;default:return""}}function Gi(h){var m=h.type;return(h=h.nodeName)&&h.toLowerCase()==="input"&&(m==="checkbox"||m==="radio")}function ml(h,m,w){var C=Object.getOwnPropertyDescriptor(h.constructor.prototype,m);if(!h.hasOwnProperty(m)&&typeof C<"u"&&typeof C.get=="function"&&typeof C.set=="function"){var M=C.get,V=C.set;return Object.defineProperty(h,m,{configurable:!0,get:function(){return M.call(this)},set:function(he){w=""+he,V.call(this,he)}}),Object.defineProperty(h,m,{enumerable:C.enumerable}),{getValue:function(){return w},setValue:function(he){w=""+he},stopTracking:function(){h._valueTracker=null,delete h[m]}}}}function ya(h){if(!h._valueTracker){var m=Gi(h)?"checked":"value";h._valueTracker=ml(h,m,""+h[m])}}function Ns(h){if(!h)return!1;var m=h._valueTracker;if(!m)return!0;var w=m.getValue(),C="";return h&&(C=Gi(h)?h.checked?"true":"false":h.value),h=C,h!==w?(m.setValue(h),!0):!1}function na(h){if(h=h||(typeof document<"u"?document:void 0),typeof h>"u")return null;try{return h.activeElement||h.body}catch{return h.body}}var Da=/[\n"\\]/g;function Mn(h){return h.replace(Da,function(m){return"\\"+m.charCodeAt(0).toString(16)+" "})}function ps(h,m,w,C,M,V,he,Fe){h.name="",he!=null&&typeof he!="function"&&typeof he!="symbol"&&typeof he!="boolean"?h.type=he:h.removeAttribute("type"),m!=null?he==="number"?(m===0&&h.value===""||h.value!=m)&&(h.value=""+Gn(m)):h.value!==""+Gn(m)&&(h.value=""+Gn(m)):he!=="submit"&&he!=="reset"||h.removeAttribute("value"),m!=null?fe(h,he,Gn(m)):w!=null?fe(h,he,Gn(w)):C!=null&&h.removeAttribute("value"),M==null&&V!=null&&(h.defaultChecked=!!V),M!=null&&(h.checked=M&&typeof M!="function"&&typeof M!="symbol"),Fe!=null&&typeof Fe!="function"&&typeof Fe!="symbol"&&typeof Fe!="boolean"?h.name=""+Gn(Fe):h.removeAttribute("name")}function yt(h,m,w,C,M,V,he,Fe){if(V!=null&&typeof V!="function"&&typeof V!="symbol"&&typeof V!="boolean"&&(h.type=V),m!=null||w!=null){if(!(V!=="submit"&&V!=="reset"||m!=null)){ya(h);return}w=w!=null?""+Gn(w):"",m=m!=null?""+Gn(m):w,Fe||m===h.value||(h.value=m),h.defaultValue=m}C=C??M,C=typeof C!="function"&&typeof C!="symbol"&&!!C,h.checked=Fe?h.checked:!!C,h.defaultChecked=!!C,he!=null&&typeof he!="function"&&typeof he!="symbol"&&typeof he!="boolean"&&(h.name=he),ya(h)}function fe(h,m,w){m==="number"&&na(h.ownerDocument)===h||h.defaultValue===""+w||(h.defaultValue=""+w)}function vt(h,m,w,C){if(h=h.options,m){m={};for(var M=0;M<w.length;M++)m["$"+w[M]]=!0;for(w=0;w<h.length;w++)M=m.hasOwnProperty("$"+h[w].value),h[w].selected!==M&&(h[w].selected=M),M&&C&&(h[w].defaultSelected=!0)}else{for(w=""+Gn(w),m=null,M=0;M<h.length;M++){if(h[M].value===w){h[M].selected=!0,C&&(h[M].defaultSelected=!0);return}m!==null||h[M].disabled||(m=h[M])}m!==null&&(m.selected=!0)}}function wr(h,m,w){if(m!=null&&(m=""+Gn(m),m!==h.value&&(h.value=m),w==null)){h.defaultValue!==m&&(h.defaultValue=m);return}h.defaultValue=w!=null?""+Gn(w):""}function Or(h,m,w,C){if(m==null){if(C!=null){if(w!=null)throw Error(n(92));if(se(C)){if(1<C.length)throw Error(n(93));C=C[0]}w=C}w==null&&(w=""),m=w}w=Gn(m),h.defaultValue=w,C=h.textContent,C===w&&C!==""&&C!==null&&(h.value=C),ya(h)}function nn(h,m){if(m){var w=h.firstChild;if(w&&w===h.lastChild&&w.nodeType===3){w.nodeValue=m;return}}h.textContent=m}var zn=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Vn(h,m,w){var C=m.indexOf("--")===0;w==null||typeof w=="boolean"||w===""?C?h.setProperty(m,""):m==="float"?h.cssFloat="":h[m]="":C?h.setProperty(m,w):typeof w!="number"||w===0||zn.has(m)?m==="float"?h.cssFloat=w:h[m]=(""+w).trim():h[m]=w+"px"}function Tr(h,m,w){if(m!=null&&typeof m!="object")throw Error(n(62));if(h=h.style,w!=null){for(var C in w)!w.hasOwnProperty(C)||m!=null&&m.hasOwnProperty(C)||(C.indexOf("--")===0?h.setProperty(C,""):C==="float"?h.cssFloat="":h[C]="");for(var M in m)C=m[M],m.hasOwnProperty(M)&&w[M]!==C&&Vn(h,M,C)}else for(var V in m)m.hasOwnProperty(V)&&Vn(h,V,m[V])}function _n(h){if(h.indexOf("-")===-1)return!1;switch(h){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ki=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),bi=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function gs(h){return bi.test(""+h)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":h}function aa(){}var za=null;function uo(h){return h=h.target||h.srcElement||window,h.correspondingUseElement&&(h=h.correspondingUseElement),h.nodeType===3?h.parentNode:h}var Pr=null,Ho=null;function xl(h){var m=Rt(h);if(m&&(h=m.stateNode)){var w=h[Ue]||null;e:switch(h=m.stateNode,m.type){case"input":if(ps(h,w.value,w.defaultValue,w.defaultValue,w.checked,w.defaultChecked,w.type,w.name),m=w.name,w.type==="radio"&&m!=null){for(w=h;w.parentNode;)w=w.parentNode;for(w=w.querySelectorAll('input[name="'+Mn(""+m)+'"][type="radio"]'),m=0;m<w.length;m++){var C=w[m];if(C!==h&&C.form===h.form){var M=C[Ue]||null;if(!M)throw Error(n(90));ps(C,M.value,M.defaultValue,M.defaultValue,M.checked,M.defaultChecked,M.type,M.name)}}for(m=0;m<w.length;m++)C=w[m],C.form===h.form&&Ns(C)}break e;case"textarea":wr(h,w.value,w.defaultValue);break e;case"select":m=w.value,m!=null&&vt(h,!!w.multiple,m,!1)}}}var un=!1;function vh(h,m,w){if(un)return h(m,w);un=!0;try{var C=h(m);return C}finally{if(un=!1,(Pr!==null||Ho!==null)&&(t2(),Pr&&(m=Pr,h=Ho,Ho=Pr=null,xl(m),h)))for(m=0;m<h.length;m++)xl(h[m])}}function hn(h,m){var w=h.stateNode;if(w===null)return null;var C=w[Ue]||null;if(C===null)return null;w=C[m];e:switch(m){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(C=!C.disabled)||(h=h.type,C=!(h==="button"||h==="input"||h==="select"||h==="textarea")),h=!C;break e;default:h=!1}if(h)return null;if(w&&typeof w!="function")throw Error(n(231,m,typeof w));return w}var da=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),n0=!1;if(da)try{var hc={};Object.defineProperty(hc,"passive",{get:function(){n0=!0}}),window.addEventListener("test",hc,hc),window.removeEventListener("test",hc,hc)}catch{n0=!1}var ho=null,To=null,Ml=null;function pl(){if(Ml)return Ml;var h,m=To,w=m.length,C,M="value"in ho?ho.value:ho.textContent,V=M.length;for(h=0;h<w&&m[h]===M[h];h++);var he=w-h;for(C=1;C<=he&&m[w-C]===M[V-C];C++);return Ml=M.slice(h,1<C?1-C:void 0)}function Oo(h){var m=h.keyCode;return"charCode"in h?(h=h.charCode,h===0&&m===13&&(h=13)):h=m,h===10&&(h=13),32<=h||h===13?h:0}function Ll(){return!0}function Td(){return!1}function bs(h){function m(w,C,M,V,he){this._reactName=w,this._targetInst=M,this.type=C,this.nativeEvent=V,this.target=he,this.currentTarget=null;for(var Fe in h)h.hasOwnProperty(Fe)&&(w=h[Fe],this[Fe]=w?w(V):V[Fe]);return this.isDefaultPrevented=(V.defaultPrevented!=null?V.defaultPrevented:V.returnValue===!1)?Ll:Td,this.isPropagationStopped=Td,this}return x(m.prototype,{preventDefault:function(){this.defaultPrevented=!0;var w=this.nativeEvent;w&&(w.preventDefault?w.preventDefault():typeof w.returnValue!="unknown"&&(w.returnValue=!1),this.isDefaultPrevented=Ll)},stopPropagation:function(){var w=this.nativeEvent;w&&(w.stopPropagation?w.stopPropagation():typeof w.cancelBubble!="unknown"&&(w.cancelBubble=!0),this.isPropagationStopped=Ll)},persist:function(){},isPersistent:Ll}),m}var vi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(h){return h.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cs=bs(vi),Rl=x({},vi,{view:0,detail:0}),Od=bs(Rl),Vc,fc,Wc,Pd=x({},Rl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kn,button:0,buttons:0,relatedTarget:function(h){return h.relatedTarget===void 0?h.fromElement===h.srcElement?h.toElement:h.fromElement:h.relatedTarget},movementX:function(h){return"movementX"in h?h.movementX:(h!==Wc&&(Wc&&h.type==="mousemove"?(Vc=h.screenX-Wc.screenX,fc=h.screenY-Wc.screenY):fc=Vc=0,Wc=h),Vc)},movementY:function(h){return"movementY"in h?h.movementY:fc}}),Xn=bs(Pd),Fl=x({},Pd,{dataTransfer:0}),Id=bs(Fl),gl=x({},Rl,{relatedTarget:0}),mc=bs(gl),Pt=x({},vi,{animationName:0,elapsedTime:0,pseudoElement:0}),K=bs(Pt),ke=x({},vi,{clipboardData:function(h){return"clipboardData"in h?h.clipboardData:window.clipboardData}}),$e=bs(ke),it=x({},vi,{data:0}),pt=bs(it),$t={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},lr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},zr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ar(h){var m=this.nativeEvent;return m.getModifierState?m.getModifierState(h):(h=zr[h])?!!m[h]:!1}function kn(){return Ar}var qr=x({},Rl,{key:function(h){if(h.key){var m=$t[h.key]||h.key;if(m!=="Unidentified")return m}return h.type==="keypress"?(h=Oo(h),h===13?"Enter":String.fromCharCode(h)):h.type==="keydown"||h.type==="keyup"?lr[h.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kn,charCode:function(h){return h.type==="keypress"?Oo(h):0},keyCode:function(h){return h.type==="keydown"||h.type==="keyup"?h.keyCode:0},which:function(h){return h.type==="keypress"?Oo(h):h.type==="keydown"||h.type==="keyup"?h.keyCode:0}}),oa=bs(qr),Ca=x({},Pd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Cn=bs(Ca),Er=x({},Rl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kn}),Xs=bs(Er),On=x({},vi,{propertyName:0,elapsedTime:0,pseudoElement:0}),ds=bs(On),yi=x({},Pd,{deltaX:function(h){return"deltaX"in h?h.deltaX:"wheelDeltaX"in h?-h.wheelDeltaX:0},deltaY:function(h){return"deltaY"in h?h.deltaY:"wheelDeltaY"in h?-h.wheelDeltaY:"wheelDelta"in h?-h.wheelDelta:0},deltaZ:0,deltaMode:0}),fo=bs(yi),Po=x({},vi,{newState:0,oldState:0}),Gc=bs(Po),Kc=[9,13,27,32],$o=da&&"CompositionEvent"in window,Vo=null;da&&"documentMode"in document&&(Vo=document.documentMode);var Xc=da&&"TextEvent"in window&&!Vo,Yc=da&&(!$o||Vo&&8<Vo&&11>=Vo),vs=" ",Bl=!1;function Qc(h,m){switch(h){case"keyup":return Kc.indexOf(m.keyCode)!==-1;case"keydown":return m.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ul(h){return h=h.detail,typeof h=="object"&&"data"in h?h.data:null}var zl=!1;function Aa(h,m){switch(h){case"compositionend":return Ul(m);case"keypress":return m.which!==32?null:(Bl=!0,vs);case"textInput":return h=m.data,h===vs&&Bl?null:h;default:return null}}function Wo(h,m){if(zl)return h==="compositionend"||!$o&&Qc(h,m)?(h=pl(),Ml=To=ho=null,zl=!1,h):null;switch(h){case"paste":return null;case"keypress":if(!(m.ctrlKey||m.altKey||m.metaKey)||m.ctrlKey&&m.altKey){if(m.char&&1<m.char.length)return m.char;if(m.which)return String.fromCharCode(m.which)}return null;case"compositionend":return Yc&&m.locale!=="ko"?null:m.data;default:return null}}var wi={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function mu(h){var m=h&&h.nodeName&&h.nodeName.toLowerCase();return m==="input"?!!wi[h.type]:m==="textarea"}function ys(h,m,w,C){Pr?Ho?Ho.push(C):Ho=[C]:Pr=C,m=l2(m,"onChange"),0<m.length&&(w=new cs("onChange","change",null,w,C),h.push({event:w,listeners:m}))}var bl=null,vl=null;function a0(h){kT(h,0)}function Go(h){var m=Yt(h);if(Ns(m))return h}function ki(h,m){if(h==="change")return m}var mo=!1;if(da){var Ni;if(da){var xo="oninput"in document;if(!xo){var Bn=document.createElement("div");Bn.setAttribute("oninput","return;"),xo=typeof Bn.oninput=="function"}Ni=xo}else Ni=!1;mo=Ni&&(!document.documentMode||9<document.documentMode)}function Ko(){bl&&(bl.detachEvent("onpropertychange",ye),vl=bl=null)}function ye(h){if(h.propertyName==="value"&&Go(vl)){var m=[];ys(m,vl,h,uo(h)),vh(a0,m)}}function f(h,m,w){h==="focusin"?(Ko(),bl=m,vl=w,bl.attachEvent("onpropertychange",ye)):h==="focusout"&&Ko()}function p(h){if(h==="selectionchange"||h==="keyup"||h==="keydown")return Go(vl)}function v(h,m){if(h==="click")return Go(m)}function _(h,m){if(h==="input"||h==="change")return Go(m)}function j(h,m){return h===m&&(h!==0||1/h===1/m)||h!==h&&m!==m}var E=typeof Object.is=="function"?Object.is:j;function D(h,m){if(E(h,m))return!0;if(typeof h!="object"||h===null||typeof m!="object"||m===null)return!1;var w=Object.keys(h),C=Object.keys(m);if(w.length!==C.length)return!1;for(C=0;C<w.length;C++){var M=w[C];if(!Je.call(m,M)||!E(h[M],m[M]))return!1}return!0}function z(h){for(;h&&h.firstChild;)h=h.firstChild;return h}function X(h,m){var w=z(h);h=0;for(var C;w;){if(w.nodeType===3){if(C=h+w.textContent.length,h<=m&&C>=m)return{node:w,offset:m-h};h=C}e:{for(;w;){if(w.nextSibling){w=w.nextSibling;break e}w=w.parentNode}w=void 0}w=z(w)}}function oe(h,m){return h&&m?h===m?!0:h&&h.nodeType===3?!1:m&&m.nodeType===3?oe(h,m.parentNode):"contains"in h?h.contains(m):h.compareDocumentPosition?!!(h.compareDocumentPosition(m)&16):!1:!1}function we(h){h=h!=null&&h.ownerDocument!=null&&h.ownerDocument.defaultView!=null?h.ownerDocument.defaultView:window;for(var m=na(h.document);m instanceof h.HTMLIFrameElement;){try{var w=typeof m.contentWindow.location.href=="string"}catch{w=!1}if(w)h=m.contentWindow;else break;m=na(h.document)}return m}function Oe(h){var m=h&&h.nodeName&&h.nodeName.toLowerCase();return m&&(m==="input"&&(h.type==="text"||h.type==="search"||h.type==="tel"||h.type==="url"||h.type==="password")||m==="textarea"||h.contentEditable==="true")}var He=da&&"documentMode"in document&&11>=document.documentMode,rt=null,lt=null,xt=null,St=!1;function Vt(h,m,w){var C=w.window===w?w.document:w.nodeType===9?w:w.ownerDocument;St||rt==null||rt!==na(C)||(C=rt,"selectionStart"in C&&Oe(C)?C={start:C.selectionStart,end:C.selectionEnd}:(C=(C.ownerDocument&&C.ownerDocument.defaultView||window).getSelection(),C={anchorNode:C.anchorNode,anchorOffset:C.anchorOffset,focusNode:C.focusNode,focusOffset:C.focusOffset}),xt&&D(xt,C)||(xt=C,C=l2(lt,"onSelect"),0<C.length&&(m=new cs("onSelect","select",null,m,w),h.push({event:m,listeners:C}),m.target=rt)))}function Wt(h,m){var w={};return w[h.toLowerCase()]=m.toLowerCase(),w["Webkit"+h]="webkit"+m,w["Moz"+h]="moz"+m,w}var qt={animationend:Wt("Animation","AnimationEnd"),animationiteration:Wt("Animation","AnimationIteration"),animationstart:Wt("Animation","AnimationStart"),transitionrun:Wt("Transition","TransitionRun"),transitionstart:Wt("Transition","TransitionStart"),transitioncancel:Wt("Transition","TransitionCancel"),transitionend:Wt("Transition","TransitionEnd")},on={},gn={};da&&(gn=document.createElement("div").style,"AnimationEvent"in window||(delete qt.animationend.animation,delete qt.animationiteration.animation,delete qt.animationstart.animation),"TransitionEvent"in window||delete qt.transitionend.transition);function es(h){if(on[h])return on[h];if(!qt[h])return h;var m=qt[h],w;for(w in m)if(m.hasOwnProperty(w)&&w in gn)return on[h]=m[w];return h}var _i=es("animationend"),ri=es("animationiteration"),Ea=es("animationstart"),ni=es("transitionrun"),po=es("transitionstart"),Dd=es("transitioncancel"),Zc=es("transitionend"),Pf=new Map,Md="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Md.push("scrollEnd");function ql(h,m){Pf.set(h,m),Zr(m,[h])}var If=typeof reportError=="function"?reportError:function(h){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var m=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof h=="object"&&h!==null&&typeof h.message=="string"?String(h.message):String(h),error:h});if(!window.dispatchEvent(m))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",h);return}console.error(h)},yl=[],s0=0,bx=0;function Df(){for(var h=s0,m=bx=s0=0;m<h;){var w=yl[m];yl[m++]=null;var C=yl[m];yl[m++]=null;var M=yl[m];yl[m++]=null;var V=yl[m];if(yl[m++]=null,C!==null&&M!==null){var he=C.pending;he===null?M.next=M:(M.next=he.next,he.next=M),C.pending=M}V!==0&&Lf(w,M,V)}}function Mf(h,m,w,C){yl[s0++]=h,yl[s0++]=m,yl[s0++]=w,yl[s0++]=C,bx|=C,h.lanes|=C,h=h.alternate,h!==null&&(h.lanes|=C)}function vx(h,m,w,C){return Mf(h,m,w,C),go(h)}function Ld(h,m){return Mf(h,null,null,m),go(h)}function Lf(h,m,w){h.lanes|=w;var C=h.alternate;C!==null&&(C.lanes|=w);for(var M=!1,V=h.return;V!==null;)V.childLanes|=w,C=V.alternate,C!==null&&(C.childLanes|=w),V.tag===22&&(h=V.stateNode,h===null||h._visibility&1||(M=!0)),h=V,V=V.return;return h.tag===3?(V=h.stateNode,M&&m!==null&&(M=31-yr(w),h=V.hiddenUpdates,C=h[M],C===null?h[M]=[m]:C.push(m),m.lane=w|536870912),V):null}function go(h){if(50<tg)throw tg=0,L4=null,Error(n(185));for(var m=h.return;m!==null;)h=m,m=h.return;return h.tag===3?h.stateNode:null}var Xi={};function yx(h,m,w,C){this.tag=h,this.key=w,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=m,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=C,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bo(h,m,w,C){return new yx(h,m,w,C)}function wx(h){return h=h.prototype,!(!h||!h.isReactComponent)}function Hl(h,m){var w=h.alternate;return w===null?(w=bo(h.tag,m,h.key,h.mode),w.elementType=h.elementType,w.type=h.type,w.stateNode=h.stateNode,w.alternate=h,h.alternate=w):(w.pendingProps=m,w.type=h.type,w.flags=0,w.subtreeFlags=0,w.deletions=null),w.flags=h.flags&65011712,w.childLanes=h.childLanes,w.lanes=h.lanes,w.child=h.child,w.memoizedProps=h.memoizedProps,w.memoizedState=h.memoizedState,w.updateQueue=h.updateQueue,m=h.dependencies,w.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext},w.sibling=h.sibling,w.index=h.index,w.ref=h.ref,w.refCleanup=h.refCleanup,w}function Rf(h,m){h.flags&=65011714;var w=h.alternate;return w===null?(h.childLanes=0,h.lanes=m,h.child=null,h.subtreeFlags=0,h.memoizedProps=null,h.memoizedState=null,h.updateQueue=null,h.dependencies=null,h.stateNode=null):(h.childLanes=w.childLanes,h.lanes=w.lanes,h.child=w.child,h.subtreeFlags=0,h.deletions=null,h.memoizedProps=w.memoizedProps,h.memoizedState=w.memoizedState,h.updateQueue=w.updateQueue,h.type=w.type,m=w.dependencies,h.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext}),h}function yh(h,m,w,C,M,V){var he=0;if(C=h,typeof h=="function")wx(h)&&(he=1);else if(typeof h=="string")he=bY(h,w,J.current)?26:h==="html"||h==="head"||h==="body"?27:5;else e:switch(h){case L:return h=bo(31,w,m,M),h.elementType=L,h.lanes=V,h;case y:return xu(w.children,M,V,m);case N:he=8,M|=24;break;case S:return h=bo(12,w,m,M|2),h.elementType=S,h.lanes=V,h;case q:return h=bo(13,w,m,M),h.elementType=q,h.lanes=V,h;case W:return h=bo(19,w,m,M),h.elementType=W,h.lanes=V,h;default:if(typeof h=="object"&&h!==null)switch(h.$$typeof){case A:he=10;break e;case O:he=9;break e;case P:he=11;break e;case R:he=14;break e;case U:he=16,C=null;break e}he=29,w=Error(n(130,h===null?"null":typeof h,"")),C=null}return m=bo(he,w,m,M),m.elementType=h,m.type=C,m.lanes=V,m}function xu(h,m,w,C){return h=bo(7,h,C,m),h.lanes=w,h}function Ff(h,m,w){return h=bo(6,h,null,m),h.lanes=w,h}function kx(h){var m=bo(18,null,null,0);return m.stateNode=h,m}function wh(h,m,w){return m=bo(4,h.children!==null?h.children:[],h.key,m),m.lanes=w,m.stateNode={containerInfo:h.containerInfo,pendingChildren:null,implementation:h.implementation},m}var Nx=new WeakMap;function $l(h,m){if(typeof h=="object"&&h!==null){var w=Nx.get(h);return w!==void 0?w:(m={value:h,source:m,stack:at(m)},Nx.set(h,m),m)}return{value:h,source:m,stack:at(m)}}var kh=[],i0=0,_x=null,Bf=0,Vl=[],Wl=0,pu=null,Gl=1,Kl="";function wl(h,m){kh[i0++]=Bf,kh[i0++]=_x,_x=h,Bf=m}function Dv(h,m,w){Vl[Wl++]=Gl,Vl[Wl++]=Kl,Vl[Wl++]=pu,pu=h;var C=Gl;h=Kl;var M=32-yr(C)-1;C&=~(1<<M),w+=1;var V=32-yr(m)+M;if(30<V){var he=M-M%5;V=(C&(1<<he)-1).toString(32),C>>=he,M-=he,Gl=1<<32-yr(m)+M|w<<M|C,Kl=V+h}else Gl=1<<V|w<<M|C,Kl=h}function Dp(h){h.return!==null&&(wl(h,1),Dv(h,1,0))}function Sx(h){for(;h===_x;)_x=kh[--i0],kh[i0]=null,Bf=kh[--i0],kh[i0]=null;for(;h===pu;)pu=Vl[--Wl],Vl[Wl]=null,Kl=Vl[--Wl],Vl[Wl]=null,Gl=Vl[--Wl],Vl[Wl]=null}function Mv(h,m){Vl[Wl++]=Gl,Vl[Wl++]=Kl,Vl[Wl++]=pu,Gl=m.id,Kl=m.overflow,pu=h}var Yi=null,us=null,ua=!1,Io=null,Fs=!1,xc=Error(n(519));function gu(h){var m=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Nh($l(m,h)),xc}function Mp(h){var m=h.stateNode,w=h.type,C=h.memoizedProps;switch(m[Ce]=h,m[Ue]=C,w){case"dialog":fa("cancel",m),fa("close",m);break;case"iframe":case"object":case"embed":fa("load",m);break;case"video":case"audio":for(w=0;w<ng.length;w++)fa(ng[w],m);break;case"source":fa("error",m);break;case"img":case"image":case"link":fa("error",m),fa("load",m);break;case"details":fa("toggle",m);break;case"input":fa("invalid",m),yt(m,C.value,C.defaultValue,C.checked,C.defaultChecked,C.type,C.name,!0);break;case"select":fa("invalid",m);break;case"textarea":fa("invalid",m),Or(m,C.value,C.defaultValue,C.children)}w=C.children,typeof w!="string"&&typeof w!="number"&&typeof w!="bigint"||m.textContent===""+w||C.suppressHydrationWarning===!0||jT(m.textContent,w)?(C.popover!=null&&(fa("beforetoggle",m),fa("toggle",m)),C.onScroll!=null&&fa("scroll",m),C.onScrollEnd!=null&&fa("scrollend",m),C.onClick!=null&&(m.onclick=aa),m=!0):m=!1,m||gu(h,!0)}function Rd(h){for(Yi=h.return;Yi;)switch(Yi.tag){case 5:case 31:case 13:Fs=!1;return;case 27:case 3:Fs=!0;return;default:Yi=Yi.return}}function Qi(h){if(h!==Yi)return!1;if(!ua)return Rd(h),ua=!0,!1;var m=h.tag,w;if((w=m!==3&&m!==27)&&((w=m===5)&&(w=h.type,w=!(w!=="form"&&w!=="button")||Q4(h.type,h.memoizedProps)),w=!w),w&&us&&gu(h),Rd(h),m===13){if(h=h.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(n(317));us=MT(h)}else if(m===31){if(h=h.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(n(317));us=MT(h)}else m===27?(m=us,Rh(h.type)?(h=r3,r3=null,us=h):us=m):us=Yi?rd(h.stateNode.nextSibling):null;return!0}function o0(){us=Yi=null,ua=!1}function Lp(){var h=Io;return h!==null&&(ec===null?ec=h:ec.push.apply(ec,h),Io=null),h}function Nh(h){Io===null?Io=[h]:Io.push(h)}var jx=xe(null),bu=null,Jc=null;function vu(h,m,w){re(jx,m._currentValue),m._currentValue=w}function Xl(h){h._currentValue=jx.current,B(jx)}function _h(h,m,w){for(;h!==null;){var C=h.alternate;if((h.childLanes&m)!==m?(h.childLanes|=m,C!==null&&(C.childLanes|=m)):C!==null&&(C.childLanes&m)!==m&&(C.childLanes|=m),h===w)break;h=h.return}}function l0(h,m,w,C){var M=h.child;for(M!==null&&(M.return=h);M!==null;){var V=M.dependencies;if(V!==null){var he=M.child;V=V.firstContext;e:for(;V!==null;){var Fe=V;V=M;for(var nt=0;nt<m.length;nt++)if(Fe.context===m[nt]){V.lanes|=w,Fe=V.alternate,Fe!==null&&(Fe.lanes|=w),_h(V.return,w,h),C||(he=null);break e}V=Fe.next}}else if(M.tag===18){if(he=M.return,he===null)throw Error(n(341));he.lanes|=w,V=he.alternate,V!==null&&(V.lanes|=w),_h(he,w,h),he=null}else he=M.child;if(he!==null)he.return=M;else for(he=M;he!==null;){if(he===h){he=null;break}if(M=he.sibling,M!==null){M.return=he.return,he=M;break}he=he.return}M=he}}function yu(h,m,w,C){h=null;for(var M=m,V=!1;M!==null;){if(!V){if((M.flags&524288)!==0)V=!0;else if((M.flags&262144)!==0)break}if(M.tag===10){var he=M.alternate;if(he===null)throw Error(n(387));if(he=he.memoizedProps,he!==null){var Fe=M.type;E(M.pendingProps.value,he.value)||(h!==null?h.push(Fe):h=[Fe])}}else if(M===_e.current){if(he=M.alternate,he===null)throw Error(n(387));he.memoizedState.memoizedState!==M.memoizedState.memoizedState&&(h!==null?h.push(lg):h=[lg])}M=M.return}h!==null&&l0(m,h,w,C),m.flags|=262144}function Cx(h){for(h=h.firstContext;h!==null;){if(!E(h.context._currentValue,h.memoizedValue))return!0;h=h.next}return!1}function wu(h){bu=h,Jc=null,h=h.dependencies,h!==null&&(h.firstContext=null)}function Zi(h){return Lv(bu,h)}function Ax(h,m){return bu===null&&wu(h),Lv(h,m)}function Lv(h,m){var w=m._currentValue;if(m={context:m,memoizedValue:w,next:null},Jc===null){if(h===null)throw Error(n(308));Jc=m,h.dependencies={lanes:0,firstContext:m},h.flags|=524288}else Jc=Jc.next=m;return w}var t4=typeof AbortController<"u"?AbortController:function(){var h=[],m=this.signal={aborted:!1,addEventListener:function(w,C){h.push(C)}};this.abort=function(){m.aborted=!0,h.forEach(function(w){return w()})}},r4=e.unstable_scheduleCallback,n4=e.unstable_NormalPriority,Ys={$$typeof:A,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Sh(){return{controller:new t4,data:new Map,refCount:0}}function Uf(h){h.refCount--,h.refCount===0&&r4(n4,function(){h.controller.abort()})}var zf=null,Ex=0,I=0,F=null;function ee(h,m){if(zf===null){var w=zf=[];Ex=0,I=q4(),F={status:"pending",value:void 0,then:function(C){w.push(C)}}}return Ex++,m.then(le,le),m}function le(){if(--Ex===0&&zf!==null){F!==null&&(F.status="fulfilled");var h=zf;zf=null,I=0,F=null;for(var m=0;m<h.length;m++)(0,h[m])()}}function Se(h,m){var w=[],C={status:"pending",value:null,reason:null,then:function(M){w.push(M)}};return h.then(function(){C.status="fulfilled",C.value=m;for(var M=0;M<w.length;M++)(0,w[M])(m)},function(M){for(C.status="rejected",C.reason=M,M=0;M<w.length;M++)(0,w[M])(void 0)}),C}var Ie=ue.S;ue.S=function(h,m){Y8=fr(),typeof m=="object"&&m!==null&&typeof m.then=="function"&&ee(h,m),Ie!==null&&Ie(h,m)};var Le=xe(null);function Be(){var h=Le.current;return h!==null?h:fs.pooledCache}function ze(h,m){m===null?re(Le,Le.current):re(Le,m.pool)}function We(){var h=Be();return h===null?null:{parent:Ys._currentValue,pool:h}}var dt=Error(n(460)),kt=Error(n(474)),Ve=Error(n(542)),ht={then:function(){}};function bt(h){return h=h.status,h==="fulfilled"||h==="rejected"}function Ut(h,m,w){switch(w=h[w],w===void 0?h.push(m):w!==m&&(m.then(aa,aa),m=w),m.status){case"fulfilled":return m.value;case"rejected":throw h=m.reason,mr(h),h;default:if(typeof m.status=="string")m.then(aa,aa);else{if(h=fs,h!==null&&100<h.shellSuspendCounter)throw Error(n(482));h=m,h.status="pending",h.then(function(C){if(m.status==="pending"){var M=m;M.status="fulfilled",M.value=C}},function(C){if(m.status==="pending"){var M=m;M.status="rejected",M.reason=C}})}switch(m.status){case"fulfilled":return m.value;case"rejected":throw h=m.reason,mr(h),h}throw Bt=m,dt}}function wt(h){try{var m=h._init;return m(h._payload)}catch(w){throw w!==null&&typeof w=="object"&&typeof w.then=="function"?(Bt=w,dt):w}}var Bt=null;function Qt(){if(Bt===null)throw Error(n(459));var h=Bt;return Bt=null,h}function mr(h){if(h===dt||h===Ve)throw Error(n(483))}var nr=null,Xr=0;function Br(h){var m=Xr;return Xr+=1,nr===null&&(nr=[]),Ut(nr,h,m)}function Ln(h,m){m=m.props.ref,h.ref=m!==void 0?m:null}function $r(h,m){throw m.$$typeof===b?Error(n(525)):(h=Object.prototype.toString.call(m),Error(n(31,h==="[object Object]"?"object with keys {"+Object.keys(m).join(", ")+"}":h)))}function la(h){function m(gt,ut){if(h){var Nt=gt.deletions;Nt===null?(gt.deletions=[ut],gt.flags|=16):Nt.push(ut)}}function w(gt,ut){if(!h)return null;for(;ut!==null;)m(gt,ut),ut=ut.sibling;return null}function C(gt){for(var ut=new Map;gt!==null;)gt.key!==null?ut.set(gt.key,gt):ut.set(gt.index,gt),gt=gt.sibling;return ut}function M(gt,ut){return gt=Hl(gt,ut),gt.index=0,gt.sibling=null,gt}function V(gt,ut,Nt){return gt.index=Nt,h?(Nt=gt.alternate,Nt!==null?(Nt=Nt.index,Nt<ut?(gt.flags|=67108866,ut):Nt):(gt.flags|=67108866,ut)):(gt.flags|=1048576,ut)}function he(gt){return h&&gt.alternate===null&&(gt.flags|=67108866),gt}function Fe(gt,ut,Nt,Zt){return ut===null||ut.tag!==6?(ut=Ff(Nt,gt.mode,Zt),ut.return=gt,ut):(ut=M(ut,Nt),ut.return=gt,ut)}function nt(gt,ut,Nt,Zt){var vn=Nt.type;return vn===y?Gt(gt,ut,Nt.props.children,Zt,Nt.key):ut!==null&&(ut.elementType===vn||typeof vn=="object"&&vn!==null&&vn.$$typeof===U&&wt(vn)===ut.type)?(ut=M(ut,Nt.props),Ln(ut,Nt),ut.return=gt,ut):(ut=yh(Nt.type,Nt.key,Nt.props,null,gt.mode,Zt),Ln(ut,Nt),ut.return=gt,ut)}function _t(gt,ut,Nt,Zt){return ut===null||ut.tag!==4||ut.stateNode.containerInfo!==Nt.containerInfo||ut.stateNode.implementation!==Nt.implementation?(ut=wh(Nt,gt.mode,Zt),ut.return=gt,ut):(ut=M(ut,Nt.children||[]),ut.return=gt,ut)}function Gt(gt,ut,Nt,Zt,vn){return ut===null||ut.tag!==7?(ut=xu(Nt,gt.mode,Zt,vn),ut.return=gt,ut):(ut=M(ut,Nt),ut.return=gt,ut)}function er(gt,ut,Nt){if(typeof ut=="string"&&ut!==""||typeof ut=="number"||typeof ut=="bigint")return ut=Ff(""+ut,gt.mode,Nt),ut.return=gt,ut;if(typeof ut=="object"&&ut!==null){switch(ut.$$typeof){case g:return Nt=yh(ut.type,ut.key,ut.props,null,gt.mode,Nt),Ln(Nt,ut),Nt.return=gt,Nt;case k:return ut=wh(ut,gt.mode,Nt),ut.return=gt,ut;case U:return ut=wt(ut),er(gt,ut,Nt)}if(se(ut)||G(ut))return ut=xu(ut,gt.mode,Nt,null),ut.return=gt,ut;if(typeof ut.then=="function")return er(gt,Br(ut),Nt);if(ut.$$typeof===A)return er(gt,Ax(gt,ut),Nt);$r(gt,ut)}return null}function Ot(gt,ut,Nt,Zt){var vn=ut!==null?ut.key:null;if(typeof Nt=="string"&&Nt!==""||typeof Nt=="number"||typeof Nt=="bigint")return vn!==null?null:Fe(gt,ut,""+Nt,Zt);if(typeof Nt=="object"&&Nt!==null){switch(Nt.$$typeof){case g:return Nt.key===vn?nt(gt,ut,Nt,Zt):null;case k:return Nt.key===vn?_t(gt,ut,Nt,Zt):null;case U:return Nt=wt(Nt),Ot(gt,ut,Nt,Zt)}if(se(Nt)||G(Nt))return vn!==null?null:Gt(gt,ut,Nt,Zt,null);if(typeof Nt.then=="function")return Ot(gt,ut,Br(Nt),Zt);if(Nt.$$typeof===A)return Ot(gt,ut,Ax(gt,Nt),Zt);$r(gt,Nt)}return null}function Dt(gt,ut,Nt,Zt,vn){if(typeof Zt=="string"&&Zt!==""||typeof Zt=="number"||typeof Zt=="bigint")return gt=gt.get(Nt)||null,Fe(ut,gt,""+Zt,vn);if(typeof Zt=="object"&&Zt!==null){switch(Zt.$$typeof){case g:return gt=gt.get(Zt.key===null?Nt:Zt.key)||null,nt(ut,gt,Zt,vn);case k:return gt=gt.get(Zt.key===null?Nt:Zt.key)||null,_t(ut,gt,Zt,vn);case U:return Zt=wt(Zt),Dt(gt,ut,Nt,Zt,vn)}if(se(Zt)||G(Zt))return gt=gt.get(Nt)||null,Gt(ut,gt,Zt,vn,null);if(typeof Zt.then=="function")return Dt(gt,ut,Nt,Br(Zt),vn);if(Zt.$$typeof===A)return Dt(gt,ut,Nt,Ax(ut,Zt),vn);$r(ut,Zt)}return null}function Kr(gt,ut,Nt,Zt){for(var vn=null,Ma=null,an=ut,Yn=ut=0,va=null;an!==null&&Yn<Nt.length;Yn++){an.index>Yn?(va=an,an=null):va=an.sibling;var La=Ot(gt,an,Nt[Yn],Zt);if(La===null){an===null&&(an=va);break}h&&an&&La.alternate===null&&m(gt,an),ut=V(La,ut,Yn),Ma===null?vn=La:Ma.sibling=La,Ma=La,an=va}if(Yn===Nt.length)return w(gt,an),ua&&wl(gt,Yn),vn;if(an===null){for(;Yn<Nt.length;Yn++)an=er(gt,Nt[Yn],Zt),an!==null&&(ut=V(an,ut,Yn),Ma===null?vn=an:Ma.sibling=an,Ma=an);return ua&&wl(gt,Yn),vn}for(an=C(an);Yn<Nt.length;Yn++)va=Dt(an,gt,Yn,Nt[Yn],Zt),va!==null&&(h&&va.alternate!==null&&an.delete(va.key===null?Yn:va.key),ut=V(va,ut,Yn),Ma===null?vn=va:Ma.sibling=va,Ma=va);return h&&an.forEach(function(qh){return m(gt,qh)}),ua&&wl(gt,Yn),vn}function An(gt,ut,Nt,Zt){if(Nt==null)throw Error(n(151));for(var vn=null,Ma=null,an=ut,Yn=ut=0,va=null,La=Nt.next();an!==null&&!La.done;Yn++,La=Nt.next()){an.index>Yn?(va=an,an=null):va=an.sibling;var qh=Ot(gt,an,La.value,Zt);if(qh===null){an===null&&(an=va);break}h&&an&&qh.alternate===null&&m(gt,an),ut=V(qh,ut,Yn),Ma===null?vn=qh:Ma.sibling=qh,Ma=qh,an=va}if(La.done)return w(gt,an),ua&&wl(gt,Yn),vn;if(an===null){for(;!La.done;Yn++,La=Nt.next())La=er(gt,La.value,Zt),La!==null&&(ut=V(La,ut,Yn),Ma===null?vn=La:Ma.sibling=La,Ma=La);return ua&&wl(gt,Yn),vn}for(an=C(an);!La.done;Yn++,La=Nt.next())La=Dt(an,gt,Yn,La.value,Zt),La!==null&&(h&&La.alternate!==null&&an.delete(La.key===null?Yn:La.key),ut=V(La,ut,Yn),Ma===null?vn=La:Ma.sibling=La,Ma=La);return h&&an.forEach(function(EY){return m(gt,EY)}),ua&&wl(gt,Yn),vn}function as(gt,ut,Nt,Zt){if(typeof Nt=="object"&&Nt!==null&&Nt.type===y&&Nt.key===null&&(Nt=Nt.props.children),typeof Nt=="object"&&Nt!==null){switch(Nt.$$typeof){case g:e:{for(var vn=Nt.key;ut!==null;){if(ut.key===vn){if(vn=Nt.type,vn===y){if(ut.tag===7){w(gt,ut.sibling),Zt=M(ut,Nt.props.children),Zt.return=gt,gt=Zt;break e}}else if(ut.elementType===vn||typeof vn=="object"&&vn!==null&&vn.$$typeof===U&&wt(vn)===ut.type){w(gt,ut.sibling),Zt=M(ut,Nt.props),Ln(Zt,Nt),Zt.return=gt,gt=Zt;break e}w(gt,ut);break}else m(gt,ut);ut=ut.sibling}Nt.type===y?(Zt=xu(Nt.props.children,gt.mode,Zt,Nt.key),Zt.return=gt,gt=Zt):(Zt=yh(Nt.type,Nt.key,Nt.props,null,gt.mode,Zt),Ln(Zt,Nt),Zt.return=gt,gt=Zt)}return he(gt);case k:e:{for(vn=Nt.key;ut!==null;){if(ut.key===vn)if(ut.tag===4&&ut.stateNode.containerInfo===Nt.containerInfo&&ut.stateNode.implementation===Nt.implementation){w(gt,ut.sibling),Zt=M(ut,Nt.children||[]),Zt.return=gt,gt=Zt;break e}else{w(gt,ut);break}else m(gt,ut);ut=ut.sibling}Zt=wh(Nt,gt.mode,Zt),Zt.return=gt,gt=Zt}return he(gt);case U:return Nt=wt(Nt),as(gt,ut,Nt,Zt)}if(se(Nt))return Kr(gt,ut,Nt,Zt);if(G(Nt)){if(vn=G(Nt),typeof vn!="function")throw Error(n(150));return Nt=vn.call(Nt),An(gt,ut,Nt,Zt)}if(typeof Nt.then=="function")return as(gt,ut,Br(Nt),Zt);if(Nt.$$typeof===A)return as(gt,ut,Ax(gt,Nt),Zt);$r(gt,Nt)}return typeof Nt=="string"&&Nt!==""||typeof Nt=="number"||typeof Nt=="bigint"?(Nt=""+Nt,ut!==null&&ut.tag===6?(w(gt,ut.sibling),Zt=M(ut,Nt),Zt.return=gt,gt=Zt):(w(gt,ut),Zt=Ff(Nt,gt.mode,Zt),Zt.return=gt,gt=Zt),he(gt)):w(gt,ut)}return function(gt,ut,Nt,Zt){try{Xr=0;var vn=as(gt,ut,Nt,Zt);return nr=null,vn}catch(an){if(an===dt||an===Ve)throw an;var Ma=bo(29,an,null,gt.mode);return Ma.lanes=Zt,Ma.return=gt,Ma}finally{}}}var hs=la(!0),qn=la(!1),Ur=!1;function _r(h){h.updateQueue={baseState:h.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function _s(h,m){h=h.updateQueue,m.updateQueue===h&&(m.updateQueue={baseState:h.baseState,firstBaseUpdate:h.firstBaseUpdate,lastBaseUpdate:h.lastBaseUpdate,shared:h.shared,callbacks:null})}function jn(h){return{lane:h,tag:0,payload:null,callback:null,next:null}}function Wn(h,m,w){var C=h.updateQueue;if(C===null)return null;if(C=C.shared,($a&2)!==0){var M=C.pending;return M===null?m.next=m:(m.next=M.next,M.next=m),C.pending=m,m=go(h),Lf(h,null,w),m}return Mf(h,C,m,w),go(h)}function qa(h,m,w){if(m=m.updateQueue,m!==null&&(m=m.shared,(w&4194048)!==0)){var C=m.lanes;C&=h.pendingLanes,w|=C,m.lanes=w,Ir(h,w)}}function Si(h,m){var w=h.updateQueue,C=h.alternate;if(C!==null&&(C=C.updateQueue,w===C)){var M=null,V=null;if(w=w.firstBaseUpdate,w!==null){do{var he={lane:w.lane,tag:w.tag,payload:w.payload,callback:null,next:null};V===null?M=V=he:V=V.next=he,w=w.next}while(w!==null);V===null?M=V=m:V=V.next=m}else M=V=m;w={baseState:C.baseState,firstBaseUpdate:M,lastBaseUpdate:V,shared:C.shared,callbacks:C.callbacks},h.updateQueue=w;return}h=w.lastBaseUpdate,h===null?w.firstBaseUpdate=m:h.next=m,w.lastBaseUpdate=m}var Ji=!1;function ts(){if(Ji){var h=F;if(h!==null)throw h}}function ai(h,m,w,C){Ji=!1;var M=h.updateQueue;Ur=!1;var V=M.firstBaseUpdate,he=M.lastBaseUpdate,Fe=M.shared.pending;if(Fe!==null){M.shared.pending=null;var nt=Fe,_t=nt.next;nt.next=null,he===null?V=_t:he.next=_t,he=nt;var Gt=h.alternate;Gt!==null&&(Gt=Gt.updateQueue,Fe=Gt.lastBaseUpdate,Fe!==he&&(Fe===null?Gt.firstBaseUpdate=_t:Fe.next=_t,Gt.lastBaseUpdate=nt))}if(V!==null){var er=M.baseState;he=0,Gt=_t=nt=null,Fe=V;do{var Ot=Fe.lane&-536870913,Dt=Ot!==Fe.lane;if(Dt?(ba&Ot)===Ot:(C&Ot)===Ot){Ot!==0&&Ot===I&&(Ji=!0),Gt!==null&&(Gt=Gt.next={lane:0,tag:Fe.tag,payload:Fe.payload,callback:null,next:null});e:{var Kr=h,An=Fe;Ot=m;var as=w;switch(An.tag){case 1:if(Kr=An.payload,typeof Kr=="function"){er=Kr.call(as,er,Ot);break e}er=Kr;break e;case 3:Kr.flags=Kr.flags&-65537|128;case 0:if(Kr=An.payload,Ot=typeof Kr=="function"?Kr.call(as,er,Ot):Kr,Ot==null)break e;er=x({},er,Ot);break e;case 2:Ur=!0}}Ot=Fe.callback,Ot!==null&&(h.flags|=64,Dt&&(h.flags|=8192),Dt=M.callbacks,Dt===null?M.callbacks=[Ot]:Dt.push(Ot))}else Dt={lane:Ot,tag:Fe.tag,payload:Fe.payload,callback:Fe.callback,next:null},Gt===null?(_t=Gt=Dt,nt=er):Gt=Gt.next=Dt,he|=Ot;if(Fe=Fe.next,Fe===null){if(Fe=M.shared.pending,Fe===null)break;Dt=Fe,Fe=Dt.next,Dt.next=null,M.lastBaseUpdate=Dt,M.shared.pending=null}}while(!0);Gt===null&&(nt=er),M.baseState=nt,M.firstBaseUpdate=_t,M.lastBaseUpdate=Gt,V===null&&(M.shared.lanes=0),Ph|=he,h.lanes=he,h.memoizedState=er}}function vo(h,m){if(typeof h!="function")throw Error(n(191,h));h.call(m)}function si(h,m){var w=h.callbacks;if(w!==null)for(h.callbacks=null,h=0;h<w.length;h++)vo(w[h],m)}var Jn=xe(null),_a=xe(0);function Ss(h,m){h=b0,re(_a,h),re(Jn,m),b0=h|m.baseLanes}function Ta(){re(_a,b0),re(Jn,Jn.current)}function ji(){b0=_a.current,B(Jn),B(_a)}var js=xe(null),Sa=null;function Qs(h){var m=h.alternate;re(wa,wa.current&1),re(js,h),Sa===null&&(m===null||Jn.current!==null||m.memoizedState!==null)&&(Sa=h)}function Ha(h){re(wa,wa.current),re(js,h),Sa===null&&(Sa=h)}function ii(h){h.tag===22?(re(wa,wa.current),re(js,h),Sa===null&&(Sa=h)):oi()}function oi(){re(wa,wa.current),re(js,js.current)}function Wa(h){B(js),Sa===h&&(Sa=null),B(wa)}var wa=xe(0);function yo(h){for(var m=h;m!==null;){if(m.tag===13){var w=m.memoizedState;if(w!==null&&(w=w.dehydrated,w===null||e3(w)||t3(w)))return m}else if(m.tag===19&&(m.memoizedProps.revealOrder==="forwards"||m.memoizedProps.revealOrder==="backwards"||m.memoizedProps.revealOrder==="unstable_legacy-backwards"||m.memoizedProps.revealOrder==="together")){if((m.flags&128)!==0)return m}else if(m.child!==null){m.child.return=m,m=m.child;continue}if(m===h)break;for(;m.sibling===null;){if(m.return===null||m.return===h)return null;m=m.return}m.sibling.return=m.return,m=m.sibling}return null}var Bs=0,fn=null,bn=null,ja=null,Xo=!1,Yl=!1,Do=!1,li=0,ku=0,Nu=null,Tx=0;function rs(){throw Error(n(321))}function Rp(h,m){if(m===null)return!1;for(var w=0;w<m.length&&w<h.length;w++)if(!E(h[w],m[w]))return!1;return!0}function Fp(h,m,w,C,M,V){return Bs=V,fn=m,m.memoizedState=null,m.updateQueue=null,m.lanes=0,ue.H=h===null||h.memoizedState===null?o8:u4,Do=!1,V=w(C,M),Do=!1,Yl&&(V=Fd(m,w,C,M)),Ox(h),V}function Ox(h){ue.H=Wp;var m=bn!==null&&bn.next!==null;if(Bs=0,ja=bn=fn=null,Xo=!1,ku=0,Nu=null,m)throw Error(n(300));h===null||Li||(h=h.dependencies,h!==null&&Cx(h)&&(Li=!0))}function Fd(h,m,w,C){fn=h;var M=0;do{if(Yl&&(Nu=null),ku=0,Yl=!1,25<=M)throw Error(n(301));if(M+=1,ja=bn=null,h.updateQueue!=null){var V=h.updateQueue;V.lastEffect=null,V.events=null,V.stores=null,V.memoCache!=null&&(V.memoCache.index=0)}ue.H=l8,V=m(w,C)}while(Yl);return V}function a4(){var h=ue.H,m=h.useState()[0];return m=typeof m.then=="function"?_u(m):m,h=h.useState()[0],(bn!==null?bn.memoizedState:null)!==h&&(fn.flags|=1024),m}function Bp(){var h=li!==0;return li=0,h}function Up(h,m,w){m.updateQueue=h.updateQueue,m.flags&=-2053,h.lanes&=~w}function Px(h){if(Xo){for(h=h.memoizedState;h!==null;){var m=h.queue;m!==null&&(m.pending=null),h=h.next}Xo=!1}Bs=0,ja=bn=fn=null,Yl=!1,ku=li=0,Nu=null}function Mi(){var h={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ja===null?fn.memoizedState=ja=h:ja=ja.next=h,ja}function Us(){if(bn===null){var h=fn.alternate;h=h!==null?h.memoizedState:null}else h=bn.next;var m=ja===null?fn.memoizedState:ja.next;if(m!==null)ja=m,bn=h;else{if(h===null)throw fn.alternate===null?Error(n(467)):Error(n(310));bn=h,h={memoizedState:bn.memoizedState,baseState:bn.baseState,baseQueue:bn.baseQueue,queue:bn.queue,next:null},ja===null?fn.memoizedState=ja=h:ja=ja.next=h}return ja}function qf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function _u(h){var m=ku;return ku+=1,Nu===null&&(Nu=[]),h=Ut(Nu,h,m),m=fn,(ja===null?m.memoizedState:ja.next)===null&&(m=m.alternate,ue.H=m===null||m.memoizedState===null?o8:u4),h}function jh(h){if(h!==null&&typeof h=="object"){if(typeof h.then=="function")return _u(h);if(h.$$typeof===A)return Zi(h)}throw Error(n(438,String(h)))}function c0(h){var m=null,w=fn.updateQueue;if(w!==null&&(m=w.memoCache),m==null){var C=fn.alternate;C!==null&&(C=C.updateQueue,C!==null&&(C=C.memoCache,C!=null&&(m={data:C.data.map(function(M){return M.slice()}),index:0})))}if(m==null&&(m={data:[],index:0}),w===null&&(w=qf(),fn.updateQueue=w),w.memoCache=m,w=m.data[m.index],w===void 0)for(w=m.data[m.index]=Array(h),C=0;C<h;C++)w[C]=Q;return m.index++,w}function ed(h,m){return typeof m=="function"?m(h):m}function Ix(h){var m=Us();return Ch(m,bn,h)}function Ch(h,m,w){var C=h.queue;if(C===null)throw Error(n(311));C.lastRenderedReducer=w;var M=h.baseQueue,V=C.pending;if(V!==null){if(M!==null){var he=M.next;M.next=V.next,V.next=he}m.baseQueue=M=V,C.pending=null}if(V=h.baseState,M===null)h.memoizedState=V;else{m=M.next;var Fe=he=null,nt=null,_t=m,Gt=!1;do{var er=_t.lane&-536870913;if(er!==_t.lane?(ba&er)===er:(Bs&er)===er){var Ot=_t.revertLane;if(Ot===0)nt!==null&&(nt=nt.next={lane:0,revertLane:0,gesture:null,action:_t.action,hasEagerState:_t.hasEagerState,eagerState:_t.eagerState,next:null}),er===I&&(Gt=!0);else if((Bs&Ot)===Ot){_t=_t.next,Ot===I&&(Gt=!0);continue}else er={lane:0,revertLane:_t.revertLane,gesture:null,action:_t.action,hasEagerState:_t.hasEagerState,eagerState:_t.eagerState,next:null},nt===null?(Fe=nt=er,he=V):nt=nt.next=er,fn.lanes|=Ot,Ph|=Ot;er=_t.action,Do&&w(V,er),V=_t.hasEagerState?_t.eagerState:w(V,er)}else Ot={lane:er,revertLane:_t.revertLane,gesture:_t.gesture,action:_t.action,hasEagerState:_t.hasEagerState,eagerState:_t.eagerState,next:null},nt===null?(Fe=nt=Ot,he=V):nt=nt.next=Ot,fn.lanes|=er,Ph|=er;_t=_t.next}while(_t!==null&&_t!==m);if(nt===null?he=V:nt.next=Fe,!E(V,h.memoizedState)&&(Li=!0,Gt&&(w=F,w!==null)))throw w;h.memoizedState=V,h.baseState=he,h.baseQueue=nt,C.lastRenderedState=V}return M===null&&(C.lanes=0),[h.memoizedState,C.dispatch]}function Dx(h){var m=Us(),w=m.queue;if(w===null)throw Error(n(311));w.lastRenderedReducer=h;var C=w.dispatch,M=w.pending,V=m.memoizedState;if(M!==null){w.pending=null;var he=M=M.next;do V=h(V,he.action),he=he.next;while(he!==M);E(V,m.memoizedState)||(Li=!0),m.memoizedState=V,m.baseQueue===null&&(m.baseState=V),w.lastRenderedState=V}return[V,C]}function Mx(h,m,w){var C=fn,M=Us(),V=ua;if(V){if(w===void 0)throw Error(n(407));w=w()}else w=m();var he=!E((bn||M).memoizedState,w);if(he&&(M.memoizedState=w,Li=!0),M=M.queue,s4(qp.bind(null,C,M,h),[h]),M.getSnapshot!==m||he||ja!==null&&ja.memoizedState.tag&1){if(C.flags|=2048,u0(9,{destroy:void 0},zp.bind(null,C,M,w,m),null),fs===null)throw Error(n(349));V||(Bs&127)!==0||Bd(C,m,w)}return w}function Bd(h,m,w){h.flags|=16384,h={getSnapshot:m,value:w},m=fn.updateQueue,m===null?(m=qf(),fn.updateQueue=m,m.stores=[h]):(w=m.stores,w===null?m.stores=[h]:w.push(h))}function zp(h,m,w,C){m.value=w,m.getSnapshot=C,Rv(m)&&Hp(h)}function qp(h,m,w){return w(function(){Rv(m)&&Hp(h)})}function Rv(h){var m=h.getSnapshot;h=h.value;try{var w=m();return!E(h,w)}catch{return!0}}function Hp(h){var m=Ld(h,2);m!==null&&tc(m,h,2)}function Su(h){var m=Mi();if(typeof h=="function"){var w=h;if(h=w(),Do){br(!0);try{w()}finally{br(!1)}}}return m.memoizedState=m.baseState=h,m.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ed,lastRenderedState:h},m}function Fv(h,m,w,C){return h.baseState=w,Ch(h,bn,typeof C=="function"?C:ed)}function Bv(h,m,w,C,M){if(Hv(h))throw Error(n(485));if(h=m.action,h!==null){var V={payload:M,action:h,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(he){V.listeners.push(he)}};ue.T!==null?w(!0):V.isTransition=!1,C(V),w=m.pending,w===null?(V.next=m.pending=V,Uv(m,V)):(V.next=w.next,m.pending=w.next=V)}}function Uv(h,m){var w=m.action,C=m.payload,M=h.state;if(m.isTransition){var V=ue.T,he={};ue.T=he;try{var Fe=w(M,C),nt=ue.S;nt!==null&&nt(he,Fe),$p(h,m,Fe)}catch(_t){d0(h,m,_t)}finally{V!==null&&he.types!==null&&(V.types=he.types),ue.T=V}}else try{V=w(M,C),$p(h,m,V)}catch(_t){d0(h,m,_t)}}function $p(h,m,w){w!==null&&typeof w=="object"&&typeof w.then=="function"?w.then(function(C){zv(h,m,C)},function(C){return d0(h,m,C)}):zv(h,m,w)}function zv(h,m,w){m.status="fulfilled",m.value=w,Lx(m),h.state=w,m=h.pending,m!==null&&(w=m.next,w===m?h.pending=null:(w=w.next,m.next=w,Uv(h,w)))}function d0(h,m,w){var C=h.pending;if(h.pending=null,C!==null){C=C.next;do m.status="rejected",m.reason=w,Lx(m),m=m.next;while(m!==C)}h.action=null}function Lx(h){h=h.listeners;for(var m=0;m<h.length;m++)(0,h[m])()}function Hf(h,m){return m}function td(h,m){if(ua){var w=fs.formState;if(w!==null){e:{var C=fn;if(ua){if(us){t:{for(var M=us,V=Fs;M.nodeType!==8;){if(!V){M=null;break t}if(M=rd(M.nextSibling),M===null){M=null;break t}}V=M.data,M=V==="F!"||V==="F"?M:null}if(M){us=rd(M.nextSibling),C=M.data==="F!";break e}}gu(C)}C=!1}C&&(m=w[0])}}return w=Mi(),w.memoizedState=w.baseState=m,C={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hf,lastRenderedState:m},w.queue=C,w=a8.bind(null,fn,C),C.dispatch=w,C=Su(!1),V=d4.bind(null,fn,!1,C.queue),C=Mi(),M={state:m,dispatch:null,action:h,pending:null},C.queue=M,w=Bv.bind(null,fn,M,V,w),M.dispatch=w,C.memoizedState=h,[m,w,!1]}function Ud(h){var m=Us();return zd(m,bn,h)}function zd(h,m,w){if(m=Ch(h,m,Hf)[0],h=Ix(ed)[0],typeof m=="object"&&m!==null&&typeof m.then=="function")try{var C=_u(m)}catch(he){throw he===dt?Ve:he}else C=m;m=Us();var M=m.queue,V=M.dispatch;return w!==m.memoizedState&&(fn.flags|=2048,u0(9,{destroy:void 0},Rx.bind(null,M,w),null)),[C,V,h]}function Rx(h,m){h.action=m}function Fx(h){var m=Us(),w=bn;if(w!==null)return zd(m,w,h);Us(),m=m.memoizedState,w=Us();var C=w.queue.dispatch;return w.memoizedState=h,[m,C,!1]}function u0(h,m,w,C){return h={tag:h,create:w,deps:C,inst:m,next:null},m=fn.updateQueue,m===null&&(m=qf(),fn.updateQueue=m),w=m.lastEffect,w===null?m.lastEffect=h.next=h:(C=w.next,w.next=h,h.next=C,m.lastEffect=h),h}function qv(){return Us().memoizedState}function Ah(h,m,w,C){var M=Mi();fn.flags|=h,M.memoizedState=u0(1|m,{destroy:void 0},w,C===void 0?null:C)}function Eh(h,m,w,C){var M=Us();C=C===void 0?null:C;var V=M.memoizedState.inst;bn!==null&&C!==null&&Rp(C,bn.memoizedState.deps)?M.memoizedState=u0(m,V,w,C):(fn.flags|=h,M.memoizedState=u0(1|m,V,w,C))}function $E(h,m){Ah(8390656,8,h,m)}function s4(h,m){Eh(2048,8,h,m)}function NX(h){fn.flags|=4;var m=fn.updateQueue;if(m===null)m=qf(),fn.updateQueue=m,m.events=[h];else{var w=m.events;w===null?m.events=[h]:w.push(h)}}function VE(h){var m=Us().memoizedState;return NX({ref:m,nextImpl:h}),function(){if(($a&2)!==0)throw Error(n(440));return m.impl.apply(void 0,arguments)}}function WE(h,m){return Eh(4,2,h,m)}function GE(h,m){return Eh(4,4,h,m)}function KE(h,m){if(typeof m=="function"){h=h();var w=m(h);return function(){typeof w=="function"?w():m(null)}}if(m!=null)return h=h(),m.current=h,function(){m.current=null}}function XE(h,m,w){w=w!=null?w.concat([h]):null,Eh(4,4,KE.bind(null,m,h),w)}function i4(){}function YE(h,m){var w=Us();m=m===void 0?null:m;var C=w.memoizedState;return m!==null&&Rp(m,C[1])?C[0]:(w.memoizedState=[h,m],h)}function QE(h,m){var w=Us();m=m===void 0?null:m;var C=w.memoizedState;if(m!==null&&Rp(m,C[1]))return C[0];if(C=h(),Do){br(!0);try{h()}finally{br(!1)}}return w.memoizedState=[C,m],C}function o4(h,m,w){return w===void 0||(Bs&1073741824)!==0&&(ba&261930)===0?h.memoizedState=m:(h.memoizedState=w,h=Z8(),fn.lanes|=h,Ph|=h,w)}function ZE(h,m,w,C){return E(w,m)?w:Jn.current!==null?(h=o4(h,w,C),E(h,m)||(Li=!0),h):(Bs&42)===0||(Bs&1073741824)!==0&&(ba&261930)===0?(Li=!0,h.memoizedState=w):(h=Z8(),fn.lanes|=h,Ph|=h,m)}function JE(h,m,w,C,M){var V=ae.p;ae.p=V!==0&&8>V?V:8;var he=ue.T,Fe={};ue.T=Fe,d4(h,!1,m,w);try{var nt=M(),_t=ue.S;if(_t!==null&&_t(Fe,nt),nt!==null&&typeof nt=="object"&&typeof nt.then=="function"){var Gt=Se(nt,C);Vp(h,m,Gt,bc(h))}else Vp(h,m,C,bc(h))}catch(er){Vp(h,m,{then:function(){},status:"rejected",reason:er},bc())}finally{ae.p=V,he!==null&&Fe.types!==null&&(he.types=Fe.types),ue.T=he}}function _X(){}function l4(h,m,w,C){if(h.tag!==5)throw Error(n(476));var M=e8(h).queue;JE(h,M,m,pe,w===null?_X:function(){return t8(h),w(C)})}function e8(h){var m=h.memoizedState;if(m!==null)return m;m={memoizedState:pe,baseState:pe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ed,lastRenderedState:pe},next:null};var w={};return m.next={memoizedState:w,baseState:w,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ed,lastRenderedState:w},next:null},h.memoizedState=m,h=h.alternate,h!==null&&(h.memoizedState=m),m}function t8(h){var m=e8(h);m.next===null&&(m=h.alternate.memoizedState),Vp(h,m.next.queue,{},bc())}function c4(){return Zi(lg)}function r8(){return Us().memoizedState}function n8(){return Us().memoizedState}function SX(h){for(var m=h.return;m!==null;){switch(m.tag){case 24:case 3:var w=bc();h=jn(w);var C=Wn(m,h,w);C!==null&&(tc(C,m,w),qa(C,m,w)),m={cache:Sh()},h.payload=m;return}m=m.return}}function jX(h,m,w){var C=bc();w={lane:C,revertLane:0,gesture:null,action:w,hasEagerState:!1,eagerState:null,next:null},Hv(h)?s8(m,w):(w=vx(h,m,w,C),w!==null&&(tc(w,h,C),i8(w,m,C)))}function a8(h,m,w){var C=bc();Vp(h,m,w,C)}function Vp(h,m,w,C){var M={lane:C,revertLane:0,gesture:null,action:w,hasEagerState:!1,eagerState:null,next:null};if(Hv(h))s8(m,M);else{var V=h.alternate;if(h.lanes===0&&(V===null||V.lanes===0)&&(V=m.lastRenderedReducer,V!==null))try{var he=m.lastRenderedState,Fe=V(he,w);if(M.hasEagerState=!0,M.eagerState=Fe,E(Fe,he))return Mf(h,m,M,0),fs===null&&Df(),!1}catch{}finally{}if(w=vx(h,m,M,C),w!==null)return tc(w,h,C),i8(w,m,C),!0}return!1}function d4(h,m,w,C){if(C={lane:2,revertLane:q4(),gesture:null,action:C,hasEagerState:!1,eagerState:null,next:null},Hv(h)){if(m)throw Error(n(479))}else m=vx(h,w,C,2),m!==null&&tc(m,h,2)}function Hv(h){var m=h.alternate;return h===fn||m!==null&&m===fn}function s8(h,m){Yl=Xo=!0;var w=h.pending;w===null?m.next=m:(m.next=w.next,w.next=m),h.pending=m}function i8(h,m,w){if((w&4194048)!==0){var C=m.lanes;C&=h.pendingLanes,w|=C,m.lanes=w,Ir(h,w)}}var Wp={readContext:Zi,use:jh,useCallback:rs,useContext:rs,useEffect:rs,useImperativeHandle:rs,useLayoutEffect:rs,useInsertionEffect:rs,useMemo:rs,useReducer:rs,useRef:rs,useState:rs,useDebugValue:rs,useDeferredValue:rs,useTransition:rs,useSyncExternalStore:rs,useId:rs,useHostTransitionStatus:rs,useFormState:rs,useActionState:rs,useOptimistic:rs,useMemoCache:rs,useCacheRefresh:rs};Wp.useEffectEvent=rs;var o8={readContext:Zi,use:jh,useCallback:function(h,m){return Mi().memoizedState=[h,m===void 0?null:m],h},useContext:Zi,useEffect:$E,useImperativeHandle:function(h,m,w){w=w!=null?w.concat([h]):null,Ah(4194308,4,KE.bind(null,m,h),w)},useLayoutEffect:function(h,m){return Ah(4194308,4,h,m)},useInsertionEffect:function(h,m){Ah(4,2,h,m)},useMemo:function(h,m){var w=Mi();m=m===void 0?null:m;var C=h();if(Do){br(!0);try{h()}finally{br(!1)}}return w.memoizedState=[C,m],C},useReducer:function(h,m,w){var C=Mi();if(w!==void 0){var M=w(m);if(Do){br(!0);try{w(m)}finally{br(!1)}}}else M=m;return C.memoizedState=C.baseState=M,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:h,lastRenderedState:M},C.queue=h,h=h.dispatch=jX.bind(null,fn,h),[C.memoizedState,h]},useRef:function(h){var m=Mi();return h={current:h},m.memoizedState=h},useState:function(h){h=Su(h);var m=h.queue,w=a8.bind(null,fn,m);return m.dispatch=w,[h.memoizedState,w]},useDebugValue:i4,useDeferredValue:function(h,m){var w=Mi();return o4(w,h,m)},useTransition:function(){var h=Su(!1);return h=JE.bind(null,fn,h.queue,!0,!1),Mi().memoizedState=h,[!1,h]},useSyncExternalStore:function(h,m,w){var C=fn,M=Mi();if(ua){if(w===void 0)throw Error(n(407));w=w()}else{if(w=m(),fs===null)throw Error(n(349));(ba&127)!==0||Bd(C,m,w)}M.memoizedState=w;var V={value:w,getSnapshot:m};return M.queue=V,$E(qp.bind(null,C,V,h),[h]),C.flags|=2048,u0(9,{destroy:void 0},zp.bind(null,C,V,w,m),null),w},useId:function(){var h=Mi(),m=fs.identifierPrefix;if(ua){var w=Kl,C=Gl;w=(C&~(1<<32-yr(C)-1)).toString(32)+w,m="_"+m+"R_"+w,w=li++,0<w&&(m+="H"+w.toString(32)),m+="_"}else w=Tx++,m="_"+m+"r_"+w.toString(32)+"_";return h.memoizedState=m},useHostTransitionStatus:c4,useFormState:td,useActionState:td,useOptimistic:function(h){var m=Mi();m.memoizedState=m.baseState=h;var w={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return m.queue=w,m=d4.bind(null,fn,!0,w),w.dispatch=m,[h,m]},useMemoCache:c0,useCacheRefresh:function(){return Mi().memoizedState=SX.bind(null,fn)},useEffectEvent:function(h){var m=Mi(),w={impl:h};return m.memoizedState=w,function(){if(($a&2)!==0)throw Error(n(440));return w.impl.apply(void 0,arguments)}}},u4={readContext:Zi,use:jh,useCallback:YE,useContext:Zi,useEffect:s4,useImperativeHandle:XE,useInsertionEffect:WE,useLayoutEffect:GE,useMemo:QE,useReducer:Ix,useRef:qv,useState:function(){return Ix(ed)},useDebugValue:i4,useDeferredValue:function(h,m){var w=Us();return ZE(w,bn.memoizedState,h,m)},useTransition:function(){var h=Ix(ed)[0],m=Us().memoizedState;return[typeof h=="boolean"?h:_u(h),m]},useSyncExternalStore:Mx,useId:r8,useHostTransitionStatus:c4,useFormState:Ud,useActionState:Ud,useOptimistic:function(h,m){var w=Us();return Fv(w,bn,h,m)},useMemoCache:c0,useCacheRefresh:n8};u4.useEffectEvent=VE;var l8={readContext:Zi,use:jh,useCallback:YE,useContext:Zi,useEffect:s4,useImperativeHandle:XE,useInsertionEffect:WE,useLayoutEffect:GE,useMemo:QE,useReducer:Dx,useRef:qv,useState:function(){return Dx(ed)},useDebugValue:i4,useDeferredValue:function(h,m){var w=Us();return bn===null?o4(w,h,m):ZE(w,bn.memoizedState,h,m)},useTransition:function(){var h=Dx(ed)[0],m=Us().memoizedState;return[typeof h=="boolean"?h:_u(h),m]},useSyncExternalStore:Mx,useId:r8,useHostTransitionStatus:c4,useFormState:Fx,useActionState:Fx,useOptimistic:function(h,m){var w=Us();return bn!==null?Fv(w,bn,h,m):(w.baseState=h,[h,w.queue.dispatch])},useMemoCache:c0,useCacheRefresh:n8};l8.useEffectEvent=VE;function h4(h,m,w,C){m=h.memoizedState,w=w(C,m),w=w==null?m:x({},m,w),h.memoizedState=w,h.lanes===0&&(h.updateQueue.baseState=w)}var f4={enqueueSetState:function(h,m,w){h=h._reactInternals;var C=bc(),M=jn(C);M.payload=m,w!=null&&(M.callback=w),m=Wn(h,M,C),m!==null&&(tc(m,h,C),qa(m,h,C))},enqueueReplaceState:function(h,m,w){h=h._reactInternals;var C=bc(),M=jn(C);M.tag=1,M.payload=m,w!=null&&(M.callback=w),m=Wn(h,M,C),m!==null&&(tc(m,h,C),qa(m,h,C))},enqueueForceUpdate:function(h,m){h=h._reactInternals;var w=bc(),C=jn(w);C.tag=2,m!=null&&(C.callback=m),m=Wn(h,C,w),m!==null&&(tc(m,h,w),qa(m,h,w))}};function c8(h,m,w,C,M,V,he){return h=h.stateNode,typeof h.shouldComponentUpdate=="function"?h.shouldComponentUpdate(C,V,he):m.prototype&&m.prototype.isPureReactComponent?!D(w,C)||!D(M,V):!0}function d8(h,m,w,C){h=m.state,typeof m.componentWillReceiveProps=="function"&&m.componentWillReceiveProps(w,C),typeof m.UNSAFE_componentWillReceiveProps=="function"&&m.UNSAFE_componentWillReceiveProps(w,C),m.state!==h&&f4.enqueueReplaceState(m,m.state,null)}function $f(h,m){var w=m;if("ref"in m){w={};for(var C in m)C!=="ref"&&(w[C]=m[C])}if(h=h.defaultProps){w===m&&(w=x({},w));for(var M in h)w[M]===void 0&&(w[M]=h[M])}return w}function u8(h){If(h)}function h8(h){console.error(h)}function f8(h){If(h)}function $v(h,m){try{var w=h.onUncaughtError;w(m.value,{componentStack:m.stack})}catch(C){setTimeout(function(){throw C})}}function m8(h,m,w){try{var C=h.onCaughtError;C(w.value,{componentStack:w.stack,errorBoundary:m.tag===1?m.stateNode:null})}catch(M){setTimeout(function(){throw M})}}function m4(h,m,w){return w=jn(w),w.tag=3,w.payload={element:null},w.callback=function(){$v(h,m)},w}function x8(h){return h=jn(h),h.tag=3,h}function p8(h,m,w,C){var M=w.type.getDerivedStateFromError;if(typeof M=="function"){var V=C.value;h.payload=function(){return M(V)},h.callback=function(){m8(m,w,C)}}var he=w.stateNode;he!==null&&typeof he.componentDidCatch=="function"&&(h.callback=function(){m8(m,w,C),typeof M!="function"&&(Ih===null?Ih=new Set([this]):Ih.add(this));var Fe=C.stack;this.componentDidCatch(C.value,{componentStack:Fe!==null?Fe:""})})}function CX(h,m,w,C,M){if(w.flags|=32768,C!==null&&typeof C=="object"&&typeof C.then=="function"){if(m=w.alternate,m!==null&&yu(m,w,M,!0),w=js.current,w!==null){switch(w.tag){case 31:case 13:return Sa===null?r2():w.alternate===null&&ci===0&&(ci=3),w.flags&=-257,w.flags|=65536,w.lanes=M,C===ht?w.flags|=16384:(m=w.updateQueue,m===null?w.updateQueue=new Set([C]):m.add(C),B4(h,C,M)),!1;case 22:return w.flags|=65536,C===ht?w.flags|=16384:(m=w.updateQueue,m===null?(m={transitions:null,markerInstances:null,retryQueue:new Set([C])},w.updateQueue=m):(w=m.retryQueue,w===null?m.retryQueue=new Set([C]):w.add(C)),B4(h,C,M)),!1}throw Error(n(435,w.tag))}return B4(h,C,M),r2(),!1}if(ua)return m=js.current,m!==null?((m.flags&65536)===0&&(m.flags|=256),m.flags|=65536,m.lanes=M,C!==xc&&(h=Error(n(422),{cause:C}),Nh($l(h,w)))):(C!==xc&&(m=Error(n(423),{cause:C}),Nh($l(m,w))),h=h.current.alternate,h.flags|=65536,M&=-M,h.lanes|=M,C=$l(C,w),M=m4(h.stateNode,C,M),Si(h,M),ci!==4&&(ci=2)),!1;var V=Error(n(520),{cause:C});if(V=$l(V,w),eg===null?eg=[V]:eg.push(V),ci!==4&&(ci=2),m===null)return!0;C=$l(C,w),w=m;do{switch(w.tag){case 3:return w.flags|=65536,h=M&-M,w.lanes|=h,h=m4(w.stateNode,C,h),Si(w,h),!1;case 1:if(m=w.type,V=w.stateNode,(w.flags&128)===0&&(typeof m.getDerivedStateFromError=="function"||V!==null&&typeof V.componentDidCatch=="function"&&(Ih===null||!Ih.has(V))))return w.flags|=65536,M&=-M,w.lanes|=M,M=x8(M),p8(M,h,w,C),Si(w,M),!1}w=w.return}while(w!==null);return!1}var x4=Error(n(461)),Li=!1;function Mo(h,m,w,C){m.child=h===null?qn(m,null,w,C):hs(m,h.child,w,C)}function g8(h,m,w,C,M){w=w.render;var V=m.ref;if("ref"in C){var he={};for(var Fe in C)Fe!=="ref"&&(he[Fe]=C[Fe])}else he=C;return wu(m),C=Fp(h,m,w,he,V,M),Fe=Bp(),h!==null&&!Li?(Up(h,m,M),h0(h,m,M)):(ua&&Fe&&Dp(m),m.flags|=1,Mo(h,m,C,M),m.child)}function b8(h,m,w,C,M){if(h===null){var V=w.type;return typeof V=="function"&&!wx(V)&&V.defaultProps===void 0&&w.compare===null?(m.tag=15,m.type=V,v8(h,m,V,C,M)):(h=yh(w.type,null,C,m,m.mode,M),h.ref=m.ref,h.return=m,m.child=h)}if(V=h.child,!N4(h,M)){var he=V.memoizedProps;if(w=w.compare,w=w!==null?w:D,w(he,C)&&h.ref===m.ref)return h0(h,m,M)}return m.flags|=1,h=Hl(V,C),h.ref=m.ref,h.return=m,m.child=h}function v8(h,m,w,C,M){if(h!==null){var V=h.memoizedProps;if(D(V,C)&&h.ref===m.ref)if(Li=!1,m.pendingProps=C=V,N4(h,M))(h.flags&131072)!==0&&(Li=!0);else return m.lanes=h.lanes,h0(h,m,M)}return p4(h,m,w,C,M)}function y8(h,m,w,C){var M=C.children,V=h!==null?h.memoizedState:null;if(h===null&&m.stateNode===null&&(m.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),C.mode==="hidden"){if((m.flags&128)!==0){if(V=V!==null?V.baseLanes|w:w,h!==null){for(C=m.child=h.child,M=0;C!==null;)M=M|C.lanes|C.childLanes,C=C.sibling;C=M&~V}else C=0,m.child=null;return w8(h,m,V,w,C)}if((w&536870912)!==0)m.memoizedState={baseLanes:0,cachePool:null},h!==null&&ze(m,V!==null?V.cachePool:null),V!==null?Ss(m,V):Ta(),ii(m);else return C=m.lanes=536870912,w8(h,m,V!==null?V.baseLanes|w:w,w,C)}else V!==null?(ze(m,V.cachePool),Ss(m,V),oi(),m.memoizedState=null):(h!==null&&ze(m,null),Ta(),oi());return Mo(h,m,M,w),m.child}function Gp(h,m){return h!==null&&h.tag===22||m.stateNode!==null||(m.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),m.sibling}function w8(h,m,w,C,M){var V=Be();return V=V===null?null:{parent:Ys._currentValue,pool:V},m.memoizedState={baseLanes:w,cachePool:V},h!==null&&ze(m,null),Ta(),ii(m),h!==null&&yu(h,m,C,!0),m.childLanes=M,null}function Vv(h,m){return m=Gv({mode:m.mode,children:m.children},h.mode),m.ref=h.ref,h.child=m,m.return=h,m}function k8(h,m,w){return hs(m,h.child,null,w),h=Vv(m,m.pendingProps),h.flags|=2,Wa(m),m.memoizedState=null,h}function AX(h,m,w){var C=m.pendingProps,M=(m.flags&128)!==0;if(m.flags&=-129,h===null){if(ua){if(C.mode==="hidden")return h=Vv(m,C),m.lanes=536870912,Gp(null,h);if(Ha(m),(h=us)?(h=DT(h,Fs),h=h!==null&&h.data==="&"?h:null,h!==null&&(m.memoizedState={dehydrated:h,treeContext:pu!==null?{id:Gl,overflow:Kl}:null,retryLane:536870912,hydrationErrors:null},w=kx(h),w.return=m,m.child=w,Yi=m,us=null)):h=null,h===null)throw gu(m);return m.lanes=536870912,null}return Vv(m,C)}var V=h.memoizedState;if(V!==null){var he=V.dehydrated;if(Ha(m),M)if(m.flags&256)m.flags&=-257,m=k8(h,m,w);else if(m.memoizedState!==null)m.child=h.child,m.flags|=128,m=null;else throw Error(n(558));else if(Li||yu(h,m,w,!1),M=(w&h.childLanes)!==0,Li||M){if(C=fs,C!==null&&(he=Nn(C,w),he!==0&&he!==V.retryLane))throw V.retryLane=he,Ld(h,he),tc(C,h,he),x4;r2(),m=k8(h,m,w)}else h=V.treeContext,us=rd(he.nextSibling),Yi=m,ua=!0,Io=null,Fs=!1,h!==null&&Mv(m,h),m=Vv(m,C),m.flags|=4096;return m}return h=Hl(h.child,{mode:C.mode,children:C.children}),h.ref=m.ref,m.child=h,h.return=m,h}function Wv(h,m){var w=m.ref;if(w===null)h!==null&&h.ref!==null&&(m.flags|=4194816);else{if(typeof w!="function"&&typeof w!="object")throw Error(n(284));(h===null||h.ref!==w)&&(m.flags|=4194816)}}function p4(h,m,w,C,M){return wu(m),w=Fp(h,m,w,C,void 0,M),C=Bp(),h!==null&&!Li?(Up(h,m,M),h0(h,m,M)):(ua&&C&&Dp(m),m.flags|=1,Mo(h,m,w,M),m.child)}function N8(h,m,w,C,M,V){return wu(m),m.updateQueue=null,w=Fd(m,C,w,M),Ox(h),C=Bp(),h!==null&&!Li?(Up(h,m,V),h0(h,m,V)):(ua&&C&&Dp(m),m.flags|=1,Mo(h,m,w,V),m.child)}function _8(h,m,w,C,M){if(wu(m),m.stateNode===null){var V=Xi,he=w.contextType;typeof he=="object"&&he!==null&&(V=Zi(he)),V=new w(C,V),m.memoizedState=V.state!==null&&V.state!==void 0?V.state:null,V.updater=f4,m.stateNode=V,V._reactInternals=m,V=m.stateNode,V.props=C,V.state=m.memoizedState,V.refs={},_r(m),he=w.contextType,V.context=typeof he=="object"&&he!==null?Zi(he):Xi,V.state=m.memoizedState,he=w.getDerivedStateFromProps,typeof he=="function"&&(h4(m,w,he,C),V.state=m.memoizedState),typeof w.getDerivedStateFromProps=="function"||typeof V.getSnapshotBeforeUpdate=="function"||typeof V.UNSAFE_componentWillMount!="function"&&typeof V.componentWillMount!="function"||(he=V.state,typeof V.componentWillMount=="function"&&V.componentWillMount(),typeof V.UNSAFE_componentWillMount=="function"&&V.UNSAFE_componentWillMount(),he!==V.state&&f4.enqueueReplaceState(V,V.state,null),ai(m,C,V,M),ts(),V.state=m.memoizedState),typeof V.componentDidMount=="function"&&(m.flags|=4194308),C=!0}else if(h===null){V=m.stateNode;var Fe=m.memoizedProps,nt=$f(w,Fe);V.props=nt;var _t=V.context,Gt=w.contextType;he=Xi,typeof Gt=="object"&&Gt!==null&&(he=Zi(Gt));var er=w.getDerivedStateFromProps;Gt=typeof er=="function"||typeof V.getSnapshotBeforeUpdate=="function",Fe=m.pendingProps!==Fe,Gt||typeof V.UNSAFE_componentWillReceiveProps!="function"&&typeof V.componentWillReceiveProps!="function"||(Fe||_t!==he)&&d8(m,V,C,he),Ur=!1;var Ot=m.memoizedState;V.state=Ot,ai(m,C,V,M),ts(),_t=m.memoizedState,Fe||Ot!==_t||Ur?(typeof er=="function"&&(h4(m,w,er,C),_t=m.memoizedState),(nt=Ur||c8(m,w,nt,C,Ot,_t,he))?(Gt||typeof V.UNSAFE_componentWillMount!="function"&&typeof V.componentWillMount!="function"||(typeof V.componentWillMount=="function"&&V.componentWillMount(),typeof V.UNSAFE_componentWillMount=="function"&&V.UNSAFE_componentWillMount()),typeof V.componentDidMount=="function"&&(m.flags|=4194308)):(typeof V.componentDidMount=="function"&&(m.flags|=4194308),m.memoizedProps=C,m.memoizedState=_t),V.props=C,V.state=_t,V.context=he,C=nt):(typeof V.componentDidMount=="function"&&(m.flags|=4194308),C=!1)}else{V=m.stateNode,_s(h,m),he=m.memoizedProps,Gt=$f(w,he),V.props=Gt,er=m.pendingProps,Ot=V.context,_t=w.contextType,nt=Xi,typeof _t=="object"&&_t!==null&&(nt=Zi(_t)),Fe=w.getDerivedStateFromProps,(_t=typeof Fe=="function"||typeof V.getSnapshotBeforeUpdate=="function")||typeof V.UNSAFE_componentWillReceiveProps!="function"&&typeof V.componentWillReceiveProps!="function"||(he!==er||Ot!==nt)&&d8(m,V,C,nt),Ur=!1,Ot=m.memoizedState,V.state=Ot,ai(m,C,V,M),ts();var Dt=m.memoizedState;he!==er||Ot!==Dt||Ur||h!==null&&h.dependencies!==null&&Cx(h.dependencies)?(typeof Fe=="function"&&(h4(m,w,Fe,C),Dt=m.memoizedState),(Gt=Ur||c8(m,w,Gt,C,Ot,Dt,nt)||h!==null&&h.dependencies!==null&&Cx(h.dependencies))?(_t||typeof V.UNSAFE_componentWillUpdate!="function"&&typeof V.componentWillUpdate!="function"||(typeof V.componentWillUpdate=="function"&&V.componentWillUpdate(C,Dt,nt),typeof V.UNSAFE_componentWillUpdate=="function"&&V.UNSAFE_componentWillUpdate(C,Dt,nt)),typeof V.componentDidUpdate=="function"&&(m.flags|=4),typeof V.getSnapshotBeforeUpdate=="function"&&(m.flags|=1024)):(typeof V.componentDidUpdate!="function"||he===h.memoizedProps&&Ot===h.memoizedState||(m.flags|=4),typeof V.getSnapshotBeforeUpdate!="function"||he===h.memoizedProps&&Ot===h.memoizedState||(m.flags|=1024),m.memoizedProps=C,m.memoizedState=Dt),V.props=C,V.state=Dt,V.context=nt,C=Gt):(typeof V.componentDidUpdate!="function"||he===h.memoizedProps&&Ot===h.memoizedState||(m.flags|=4),typeof V.getSnapshotBeforeUpdate!="function"||he===h.memoizedProps&&Ot===h.memoizedState||(m.flags|=1024),C=!1)}return V=C,Wv(h,m),C=(m.flags&128)!==0,V||C?(V=m.stateNode,w=C&&typeof w.getDerivedStateFromError!="function"?null:V.render(),m.flags|=1,h!==null&&C?(m.child=hs(m,h.child,null,M),m.child=hs(m,null,w,M)):Mo(h,m,w,M),m.memoizedState=V.state,h=m.child):h=h0(h,m,M),h}function S8(h,m,w,C){return o0(),m.flags|=256,Mo(h,m,w,C),m.child}var g4={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function b4(h){return{baseLanes:h,cachePool:We()}}function v4(h,m,w){return h=h!==null?h.childLanes&~w:0,m&&(h|=gc),h}function j8(h,m,w){var C=m.pendingProps,M=!1,V=(m.flags&128)!==0,he;if((he=V)||(he=h!==null&&h.memoizedState===null?!1:(wa.current&2)!==0),he&&(M=!0,m.flags&=-129),he=(m.flags&32)!==0,m.flags&=-33,h===null){if(ua){if(M?Qs(m):oi(),(h=us)?(h=DT(h,Fs),h=h!==null&&h.data!=="&"?h:null,h!==null&&(m.memoizedState={dehydrated:h,treeContext:pu!==null?{id:Gl,overflow:Kl}:null,retryLane:536870912,hydrationErrors:null},w=kx(h),w.return=m,m.child=w,Yi=m,us=null)):h=null,h===null)throw gu(m);return t3(h)?m.lanes=32:m.lanes=536870912,null}var Fe=C.children;return C=C.fallback,M?(oi(),M=m.mode,Fe=Gv({mode:"hidden",children:Fe},M),C=xu(C,M,w,null),Fe.return=m,C.return=m,Fe.sibling=C,m.child=Fe,C=m.child,C.memoizedState=b4(w),C.childLanes=v4(h,he,w),m.memoizedState=g4,Gp(null,C)):(Qs(m),y4(m,Fe))}var nt=h.memoizedState;if(nt!==null&&(Fe=nt.dehydrated,Fe!==null)){if(V)m.flags&256?(Qs(m),m.flags&=-257,m=w4(h,m,w)):m.memoizedState!==null?(oi(),m.child=h.child,m.flags|=128,m=null):(oi(),Fe=C.fallback,M=m.mode,C=Gv({mode:"visible",children:C.children},M),Fe=xu(Fe,M,w,null),Fe.flags|=2,C.return=m,Fe.return=m,C.sibling=Fe,m.child=C,hs(m,h.child,null,w),C=m.child,C.memoizedState=b4(w),C.childLanes=v4(h,he,w),m.memoizedState=g4,m=Gp(null,C));else if(Qs(m),t3(Fe)){if(he=Fe.nextSibling&&Fe.nextSibling.dataset,he)var _t=he.dgst;he=_t,C=Error(n(419)),C.stack="",C.digest=he,Nh({value:C,source:null,stack:null}),m=w4(h,m,w)}else if(Li||yu(h,m,w,!1),he=(w&h.childLanes)!==0,Li||he){if(he=fs,he!==null&&(C=Nn(he,w),C!==0&&C!==nt.retryLane))throw nt.retryLane=C,Ld(h,C),tc(he,h,C),x4;e3(Fe)||r2(),m=w4(h,m,w)}else e3(Fe)?(m.flags|=192,m.child=h.child,m=null):(h=nt.treeContext,us=rd(Fe.nextSibling),Yi=m,ua=!0,Io=null,Fs=!1,h!==null&&Mv(m,h),m=y4(m,C.children),m.flags|=4096);return m}return M?(oi(),Fe=C.fallback,M=m.mode,nt=h.child,_t=nt.sibling,C=Hl(nt,{mode:"hidden",children:C.children}),C.subtreeFlags=nt.subtreeFlags&65011712,_t!==null?Fe=Hl(_t,Fe):(Fe=xu(Fe,M,w,null),Fe.flags|=2),Fe.return=m,C.return=m,C.sibling=Fe,m.child=C,Gp(null,C),C=m.child,Fe=h.child.memoizedState,Fe===null?Fe=b4(w):(M=Fe.cachePool,M!==null?(nt=Ys._currentValue,M=M.parent!==nt?{parent:nt,pool:nt}:M):M=We(),Fe={baseLanes:Fe.baseLanes|w,cachePool:M}),C.memoizedState=Fe,C.childLanes=v4(h,he,w),m.memoizedState=g4,Gp(h.child,C)):(Qs(m),w=h.child,h=w.sibling,w=Hl(w,{mode:"visible",children:C.children}),w.return=m,w.sibling=null,h!==null&&(he=m.deletions,he===null?(m.deletions=[h],m.flags|=16):he.push(h)),m.child=w,m.memoizedState=null,w)}function y4(h,m){return m=Gv({mode:"visible",children:m},h.mode),m.return=h,h.child=m}function Gv(h,m){return h=bo(22,h,null,m),h.lanes=0,h}function w4(h,m,w){return hs(m,h.child,null,w),h=y4(m,m.pendingProps.children),h.flags|=2,m.memoizedState=null,h}function C8(h,m,w){h.lanes|=m;var C=h.alternate;C!==null&&(C.lanes|=m),_h(h.return,m,w)}function k4(h,m,w,C,M,V){var he=h.memoizedState;he===null?h.memoizedState={isBackwards:m,rendering:null,renderingStartTime:0,last:C,tail:w,tailMode:M,treeForkCount:V}:(he.isBackwards=m,he.rendering=null,he.renderingStartTime=0,he.last=C,he.tail=w,he.tailMode=M,he.treeForkCount=V)}function A8(h,m,w){var C=m.pendingProps,M=C.revealOrder,V=C.tail;C=C.children;var he=wa.current,Fe=(he&2)!==0;if(Fe?(he=he&1|2,m.flags|=128):he&=1,re(wa,he),Mo(h,m,C,w),C=ua?Bf:0,!Fe&&h!==null&&(h.flags&128)!==0)e:for(h=m.child;h!==null;){if(h.tag===13)h.memoizedState!==null&&C8(h,w,m);else if(h.tag===19)C8(h,w,m);else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===m)break e;for(;h.sibling===null;){if(h.return===null||h.return===m)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}switch(M){case"forwards":for(w=m.child,M=null;w!==null;)h=w.alternate,h!==null&&yo(h)===null&&(M=w),w=w.sibling;w=M,w===null?(M=m.child,m.child=null):(M=w.sibling,w.sibling=null),k4(m,!1,M,w,V,C);break;case"backwards":case"unstable_legacy-backwards":for(w=null,M=m.child,m.child=null;M!==null;){if(h=M.alternate,h!==null&&yo(h)===null){m.child=M;break}h=M.sibling,M.sibling=w,w=M,M=h}k4(m,!0,w,null,V,C);break;case"together":k4(m,!1,null,null,void 0,C);break;default:m.memoizedState=null}return m.child}function h0(h,m,w){if(h!==null&&(m.dependencies=h.dependencies),Ph|=m.lanes,(w&m.childLanes)===0)if(h!==null){if(yu(h,m,w,!1),(w&m.childLanes)===0)return null}else return null;if(h!==null&&m.child!==h.child)throw Error(n(153));if(m.child!==null){for(h=m.child,w=Hl(h,h.pendingProps),m.child=w,w.return=m;h.sibling!==null;)h=h.sibling,w=w.sibling=Hl(h,h.pendingProps),w.return=m;w.sibling=null}return m.child}function N4(h,m){return(h.lanes&m)!==0?!0:(h=h.dependencies,!!(h!==null&&Cx(h)))}function EX(h,m,w){switch(m.tag){case 3:me(m,m.stateNode.containerInfo),vu(m,Ys,h.memoizedState.cache),o0();break;case 27:case 5:je(m);break;case 4:me(m,m.stateNode.containerInfo);break;case 10:vu(m,m.type,m.memoizedProps.value);break;case 31:if(m.memoizedState!==null)return m.flags|=128,Ha(m),null;break;case 13:var C=m.memoizedState;if(C!==null)return C.dehydrated!==null?(Qs(m),m.flags|=128,null):(w&m.child.childLanes)!==0?j8(h,m,w):(Qs(m),h=h0(h,m,w),h!==null?h.sibling:null);Qs(m);break;case 19:var M=(h.flags&128)!==0;if(C=(w&m.childLanes)!==0,C||(yu(h,m,w,!1),C=(w&m.childLanes)!==0),M){if(C)return A8(h,m,w);m.flags|=128}if(M=m.memoizedState,M!==null&&(M.rendering=null,M.tail=null,M.lastEffect=null),re(wa,wa.current),C)break;return null;case 22:return m.lanes=0,y8(h,m,w,m.pendingProps);case 24:vu(m,Ys,h.memoizedState.cache)}return h0(h,m,w)}function E8(h,m,w){if(h!==null)if(h.memoizedProps!==m.pendingProps)Li=!0;else{if(!N4(h,w)&&(m.flags&128)===0)return Li=!1,EX(h,m,w);Li=(h.flags&131072)!==0}else Li=!1,ua&&(m.flags&1048576)!==0&&Dv(m,Bf,m.index);switch(m.lanes=0,m.tag){case 16:e:{var C=m.pendingProps;if(h=wt(m.elementType),m.type=h,typeof h=="function")wx(h)?(C=$f(h,C),m.tag=1,m=_8(null,m,h,C,w)):(m.tag=0,m=p4(null,m,h,C,w));else{if(h!=null){var M=h.$$typeof;if(M===P){m.tag=11,m=g8(null,m,h,C,w);break e}else if(M===R){m.tag=14,m=b8(null,m,h,C,w);break e}}throw m=te(h)||h,Error(n(306,m,""))}}return m;case 0:return p4(h,m,m.type,m.pendingProps,w);case 1:return C=m.type,M=$f(C,m.pendingProps),_8(h,m,C,M,w);case 3:e:{if(me(m,m.stateNode.containerInfo),h===null)throw Error(n(387));C=m.pendingProps;var V=m.memoizedState;M=V.element,_s(h,m),ai(m,C,null,w);var he=m.memoizedState;if(C=he.cache,vu(m,Ys,C),C!==V.cache&&l0(m,[Ys],w,!0),ts(),C=he.element,V.isDehydrated)if(V={element:C,isDehydrated:!1,cache:he.cache},m.updateQueue.baseState=V,m.memoizedState=V,m.flags&256){m=S8(h,m,C,w);break e}else if(C!==M){M=$l(Error(n(424)),m),Nh(M),m=S8(h,m,C,w);break e}else{switch(h=m.stateNode.containerInfo,h.nodeType){case 9:h=h.body;break;default:h=h.nodeName==="HTML"?h.ownerDocument.body:h}for(us=rd(h.firstChild),Yi=m,ua=!0,Io=null,Fs=!0,w=qn(m,null,C,w),m.child=w;w;)w.flags=w.flags&-3|4096,w=w.sibling}else{if(o0(),C===M){m=h0(h,m,w);break e}Mo(h,m,C,w)}m=m.child}return m;case 26:return Wv(h,m),h===null?(w=UT(m.type,null,m.pendingProps,null))?m.memoizedState=w:ua||(w=m.type,h=m.pendingProps,C=c2(Y.current).createElement(w),C[Ce]=m,C[Ue]=h,Lo(C,w,h),Cr(C),m.stateNode=C):m.memoizedState=UT(m.type,h.memoizedProps,m.pendingProps,h.memoizedState),null;case 27:return je(m),h===null&&ua&&(C=m.stateNode=RT(m.type,m.pendingProps,Y.current),Yi=m,Fs=!0,M=us,Rh(m.type)?(r3=M,us=rd(C.firstChild)):us=M),Mo(h,m,m.pendingProps.children,w),Wv(h,m),h===null&&(m.flags|=4194304),m.child;case 5:return h===null&&ua&&((M=C=us)&&(C=sY(C,m.type,m.pendingProps,Fs),C!==null?(m.stateNode=C,Yi=m,us=rd(C.firstChild),Fs=!1,M=!0):M=!1),M||gu(m)),je(m),M=m.type,V=m.pendingProps,he=h!==null?h.memoizedProps:null,C=V.children,Q4(M,V)?C=null:he!==null&&Q4(M,he)&&(m.flags|=32),m.memoizedState!==null&&(M=Fp(h,m,a4,null,null,w),lg._currentValue=M),Wv(h,m),Mo(h,m,C,w),m.child;case 6:return h===null&&ua&&((h=w=us)&&(w=iY(w,m.pendingProps,Fs),w!==null?(m.stateNode=w,Yi=m,us=null,h=!0):h=!1),h||gu(m)),null;case 13:return j8(h,m,w);case 4:return me(m,m.stateNode.containerInfo),C=m.pendingProps,h===null?m.child=hs(m,null,C,w):Mo(h,m,C,w),m.child;case 11:return g8(h,m,m.type,m.pendingProps,w);case 7:return Mo(h,m,m.pendingProps,w),m.child;case 8:return Mo(h,m,m.pendingProps.children,w),m.child;case 12:return Mo(h,m,m.pendingProps.children,w),m.child;case 10:return C=m.pendingProps,vu(m,m.type,C.value),Mo(h,m,C.children,w),m.child;case 9:return M=m.type._context,C=m.pendingProps.children,wu(m),M=Zi(M),C=C(M),m.flags|=1,Mo(h,m,C,w),m.child;case 14:return b8(h,m,m.type,m.pendingProps,w);case 15:return v8(h,m,m.type,m.pendingProps,w);case 19:return A8(h,m,w);case 31:return AX(h,m,w);case 22:return y8(h,m,w,m.pendingProps);case 24:return wu(m),C=Zi(Ys),h===null?(M=Be(),M===null&&(M=fs,V=Sh(),M.pooledCache=V,V.refCount++,V!==null&&(M.pooledCacheLanes|=w),M=V),m.memoizedState={parent:C,cache:M},_r(m),vu(m,Ys,M)):((h.lanes&w)!==0&&(_s(h,m),ai(m,null,null,w),ts()),M=h.memoizedState,V=m.memoizedState,M.parent!==C?(M={parent:C,cache:C},m.memoizedState=M,m.lanes===0&&(m.memoizedState=m.updateQueue.baseState=M),vu(m,Ys,C)):(C=V.cache,vu(m,Ys,C),C!==M.cache&&l0(m,[Ys],w,!0))),Mo(h,m,m.pendingProps.children,w),m.child;case 29:throw m.pendingProps}throw Error(n(156,m.tag))}function f0(h){h.flags|=4}function _4(h,m,w,C,M){if((m=(h.mode&32)!==0)&&(m=!1),m){if(h.flags|=16777216,(M&335544128)===M)if(h.stateNode.complete)h.flags|=8192;else if(rT())h.flags|=8192;else throw Bt=ht,kt}else h.flags&=-16777217}function T8(h,m){if(m.type!=="stylesheet"||(m.state.loading&4)!==0)h.flags&=-16777217;else if(h.flags|=16777216,!VT(m))if(rT())h.flags|=8192;else throw Bt=ht,kt}function Kv(h,m){m!==null&&(h.flags|=4),h.flags&16384&&(m=h.tag!==22?Xt():536870912,h.lanes|=m,qx|=m)}function Kp(h,m){if(!ua)switch(h.tailMode){case"hidden":m=h.tail;for(var w=null;m!==null;)m.alternate!==null&&(w=m),m=m.sibling;w===null?h.tail=null:w.sibling=null;break;case"collapsed":w=h.tail;for(var C=null;w!==null;)w.alternate!==null&&(C=w),w=w.sibling;C===null?m||h.tail===null?h.tail=null:h.tail.sibling=null:C.sibling=null}}function Cs(h){var m=h.alternate!==null&&h.alternate.child===h.child,w=0,C=0;if(m)for(var M=h.child;M!==null;)w|=M.lanes|M.childLanes,C|=M.subtreeFlags&65011712,C|=M.flags&65011712,M.return=h,M=M.sibling;else for(M=h.child;M!==null;)w|=M.lanes|M.childLanes,C|=M.subtreeFlags,C|=M.flags,M.return=h,M=M.sibling;return h.subtreeFlags|=C,h.childLanes=w,m}function TX(h,m,w){var C=m.pendingProps;switch(Sx(m),m.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Cs(m),null;case 1:return Cs(m),null;case 3:return w=m.stateNode,C=null,h!==null&&(C=h.memoizedState.cache),m.memoizedState.cache!==C&&(m.flags|=2048),Xl(Ys),ne(),w.pendingContext&&(w.context=w.pendingContext,w.pendingContext=null),(h===null||h.child===null)&&(Qi(m)?f0(m):h===null||h.memoizedState.isDehydrated&&(m.flags&256)===0||(m.flags|=1024,Lp())),Cs(m),null;case 26:var M=m.type,V=m.memoizedState;return h===null?(f0(m),V!==null?(Cs(m),T8(m,V)):(Cs(m),_4(m,M,null,C,w))):V?V!==h.memoizedState?(f0(m),Cs(m),T8(m,V)):(Cs(m),m.flags&=-16777217):(h=h.memoizedProps,h!==C&&f0(m),Cs(m),_4(m,M,h,C,w)),null;case 27:if(De(m),w=Y.current,M=m.type,h!==null&&m.stateNode!=null)h.memoizedProps!==C&&f0(m);else{if(!C){if(m.stateNode===null)throw Error(n(166));return Cs(m),null}h=J.current,Qi(m)?Mp(m):(h=RT(M,C,w),m.stateNode=h,f0(m))}return Cs(m),null;case 5:if(De(m),M=m.type,h!==null&&m.stateNode!=null)h.memoizedProps!==C&&f0(m);else{if(!C){if(m.stateNode===null)throw Error(n(166));return Cs(m),null}if(V=J.current,Qi(m))Mp(m);else{var he=c2(Y.current);switch(V){case 1:V=he.createElementNS("http://www.w3.org/2000/svg",M);break;case 2:V=he.createElementNS("http://www.w3.org/1998/Math/MathML",M);break;default:switch(M){case"svg":V=he.createElementNS("http://www.w3.org/2000/svg",M);break;case"math":V=he.createElementNS("http://www.w3.org/1998/Math/MathML",M);break;case"script":V=he.createElement("div"),V.innerHTML="<script><\/script>",V=V.removeChild(V.firstChild);break;case"select":V=typeof C.is=="string"?he.createElement("select",{is:C.is}):he.createElement("select"),C.multiple?V.multiple=!0:C.size&&(V.size=C.size);break;default:V=typeof C.is=="string"?he.createElement(M,{is:C.is}):he.createElement(M)}}V[Ce]=m,V[Ue]=C;e:for(he=m.child;he!==null;){if(he.tag===5||he.tag===6)V.appendChild(he.stateNode);else if(he.tag!==4&&he.tag!==27&&he.child!==null){he.child.return=he,he=he.child;continue}if(he===m)break e;for(;he.sibling===null;){if(he.return===null||he.return===m)break e;he=he.return}he.sibling.return=he.return,he=he.sibling}m.stateNode=V;e:switch(Lo(V,M,C),M){case"button":case"input":case"select":case"textarea":C=!!C.autoFocus;break e;case"img":C=!0;break e;default:C=!1}C&&f0(m)}}return Cs(m),_4(m,m.type,h===null?null:h.memoizedProps,m.pendingProps,w),null;case 6:if(h&&m.stateNode!=null)h.memoizedProps!==C&&f0(m);else{if(typeof C!="string"&&m.stateNode===null)throw Error(n(166));if(h=Y.current,Qi(m)){if(h=m.stateNode,w=m.memoizedProps,C=null,M=Yi,M!==null)switch(M.tag){case 27:case 5:C=M.memoizedProps}h[Ce]=m,h=!!(h.nodeValue===w||C!==null&&C.suppressHydrationWarning===!0||jT(h.nodeValue,w)),h||gu(m,!0)}else h=c2(h).createTextNode(C),h[Ce]=m,m.stateNode=h}return Cs(m),null;case 31:if(w=m.memoizedState,h===null||h.memoizedState!==null){if(C=Qi(m),w!==null){if(h===null){if(!C)throw Error(n(318));if(h=m.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(n(557));h[Ce]=m}else o0(),(m.flags&128)===0&&(m.memoizedState=null),m.flags|=4;Cs(m),h=!1}else w=Lp(),h!==null&&h.memoizedState!==null&&(h.memoizedState.hydrationErrors=w),h=!0;if(!h)return m.flags&256?(Wa(m),m):(Wa(m),null);if((m.flags&128)!==0)throw Error(n(558))}return Cs(m),null;case 13:if(C=m.memoizedState,h===null||h.memoizedState!==null&&h.memoizedState.dehydrated!==null){if(M=Qi(m),C!==null&&C.dehydrated!==null){if(h===null){if(!M)throw Error(n(318));if(M=m.memoizedState,M=M!==null?M.dehydrated:null,!M)throw Error(n(317));M[Ce]=m}else o0(),(m.flags&128)===0&&(m.memoizedState=null),m.flags|=4;Cs(m),M=!1}else M=Lp(),h!==null&&h.memoizedState!==null&&(h.memoizedState.hydrationErrors=M),M=!0;if(!M)return m.flags&256?(Wa(m),m):(Wa(m),null)}return Wa(m),(m.flags&128)!==0?(m.lanes=w,m):(w=C!==null,h=h!==null&&h.memoizedState!==null,w&&(C=m.child,M=null,C.alternate!==null&&C.alternate.memoizedState!==null&&C.alternate.memoizedState.cachePool!==null&&(M=C.alternate.memoizedState.cachePool.pool),V=null,C.memoizedState!==null&&C.memoizedState.cachePool!==null&&(V=C.memoizedState.cachePool.pool),V!==M&&(C.flags|=2048)),w!==h&&w&&(m.child.flags|=8192),Kv(m,m.updateQueue),Cs(m),null);case 4:return ne(),h===null&&W4(m.stateNode.containerInfo),Cs(m),null;case 10:return Xl(m.type),Cs(m),null;case 19:if(B(wa),C=m.memoizedState,C===null)return Cs(m),null;if(M=(m.flags&128)!==0,V=C.rendering,V===null)if(M)Kp(C,!1);else{if(ci!==0||h!==null&&(h.flags&128)!==0)for(h=m.child;h!==null;){if(V=yo(h),V!==null){for(m.flags|=128,Kp(C,!1),h=V.updateQueue,m.updateQueue=h,Kv(m,h),m.subtreeFlags=0,h=w,w=m.child;w!==null;)Rf(w,h),w=w.sibling;return re(wa,wa.current&1|2),ua&&wl(m,C.treeForkCount),m.child}h=h.sibling}C.tail!==null&&fr()>Jv&&(m.flags|=128,M=!0,Kp(C,!1),m.lanes=4194304)}else{if(!M)if(h=yo(V),h!==null){if(m.flags|=128,M=!0,h=h.updateQueue,m.updateQueue=h,Kv(m,h),Kp(C,!0),C.tail===null&&C.tailMode==="hidden"&&!V.alternate&&!ua)return Cs(m),null}else 2*fr()-C.renderingStartTime>Jv&&w!==536870912&&(m.flags|=128,M=!0,Kp(C,!1),m.lanes=4194304);C.isBackwards?(V.sibling=m.child,m.child=V):(h=C.last,h!==null?h.sibling=V:m.child=V,C.last=V)}return C.tail!==null?(h=C.tail,C.rendering=h,C.tail=h.sibling,C.renderingStartTime=fr(),h.sibling=null,w=wa.current,re(wa,M?w&1|2:w&1),ua&&wl(m,C.treeForkCount),h):(Cs(m),null);case 22:case 23:return Wa(m),ji(),C=m.memoizedState!==null,h!==null?h.memoizedState!==null!==C&&(m.flags|=8192):C&&(m.flags|=8192),C?(w&536870912)!==0&&(m.flags&128)===0&&(Cs(m),m.subtreeFlags&6&&(m.flags|=8192)):Cs(m),w=m.updateQueue,w!==null&&Kv(m,w.retryQueue),w=null,h!==null&&h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(w=h.memoizedState.cachePool.pool),C=null,m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(C=m.memoizedState.cachePool.pool),C!==w&&(m.flags|=2048),h!==null&&B(Le),null;case 24:return w=null,h!==null&&(w=h.memoizedState.cache),m.memoizedState.cache!==w&&(m.flags|=2048),Xl(Ys),Cs(m),null;case 25:return null;case 30:return null}throw Error(n(156,m.tag))}function OX(h,m){switch(Sx(m),m.tag){case 1:return h=m.flags,h&65536?(m.flags=h&-65537|128,m):null;case 3:return Xl(Ys),ne(),h=m.flags,(h&65536)!==0&&(h&128)===0?(m.flags=h&-65537|128,m):null;case 26:case 27:case 5:return De(m),null;case 31:if(m.memoizedState!==null){if(Wa(m),m.alternate===null)throw Error(n(340));o0()}return h=m.flags,h&65536?(m.flags=h&-65537|128,m):null;case 13:if(Wa(m),h=m.memoizedState,h!==null&&h.dehydrated!==null){if(m.alternate===null)throw Error(n(340));o0()}return h=m.flags,h&65536?(m.flags=h&-65537|128,m):null;case 19:return B(wa),null;case 4:return ne(),null;case 10:return Xl(m.type),null;case 22:case 23:return Wa(m),ji(),h!==null&&B(Le),h=m.flags,h&65536?(m.flags=h&-65537|128,m):null;case 24:return Xl(Ys),null;case 25:return null;default:return null}}function O8(h,m){switch(Sx(m),m.tag){case 3:Xl(Ys),ne();break;case 26:case 27:case 5:De(m);break;case 4:ne();break;case 31:m.memoizedState!==null&&Wa(m);break;case 13:Wa(m);break;case 19:B(wa);break;case 10:Xl(m.type);break;case 22:case 23:Wa(m),ji(),h!==null&&B(Le);break;case 24:Xl(Ys)}}function Xp(h,m){try{var w=m.updateQueue,C=w!==null?w.lastEffect:null;if(C!==null){var M=C.next;w=M;do{if((w.tag&h)===h){C=void 0;var V=w.create,he=w.inst;C=V(),he.destroy=C}w=w.next}while(w!==M)}}catch(Fe){Ka(m,m.return,Fe)}}function Th(h,m,w){try{var C=m.updateQueue,M=C!==null?C.lastEffect:null;if(M!==null){var V=M.next;C=V;do{if((C.tag&h)===h){var he=C.inst,Fe=he.destroy;if(Fe!==void 0){he.destroy=void 0,M=m;var nt=w,_t=Fe;try{_t()}catch(Gt){Ka(M,nt,Gt)}}}C=C.next}while(C!==V)}}catch(Gt){Ka(m,m.return,Gt)}}function P8(h){var m=h.updateQueue;if(m!==null){var w=h.stateNode;try{si(m,w)}catch(C){Ka(h,h.return,C)}}}function I8(h,m,w){w.props=$f(h.type,h.memoizedProps),w.state=h.memoizedState;try{w.componentWillUnmount()}catch(C){Ka(h,m,C)}}function Yp(h,m){try{var w=h.ref;if(w!==null){switch(h.tag){case 26:case 27:case 5:var C=h.stateNode;break;case 30:C=h.stateNode;break;default:C=h.stateNode}typeof w=="function"?h.refCleanup=w(C):w.current=C}}catch(M){Ka(h,m,M)}}function ju(h,m){var w=h.ref,C=h.refCleanup;if(w!==null)if(typeof C=="function")try{C()}catch(M){Ka(h,m,M)}finally{h.refCleanup=null,h=h.alternate,h!=null&&(h.refCleanup=null)}else if(typeof w=="function")try{w(null)}catch(M){Ka(h,m,M)}else w.current=null}function D8(h){var m=h.type,w=h.memoizedProps,C=h.stateNode;try{e:switch(m){case"button":case"input":case"select":case"textarea":w.autoFocus&&C.focus();break e;case"img":w.src?C.src=w.src:w.srcSet&&(C.srcset=w.srcSet)}}catch(M){Ka(h,h.return,M)}}function S4(h,m,w){try{var C=h.stateNode;JX(C,h.type,w,m),C[Ue]=m}catch(M){Ka(h,h.return,M)}}function M8(h){return h.tag===5||h.tag===3||h.tag===26||h.tag===27&&Rh(h.type)||h.tag===4}function j4(h){e:for(;;){for(;h.sibling===null;){if(h.return===null||M8(h.return))return null;h=h.return}for(h.sibling.return=h.return,h=h.sibling;h.tag!==5&&h.tag!==6&&h.tag!==18;){if(h.tag===27&&Rh(h.type)||h.flags&2||h.child===null||h.tag===4)continue e;h.child.return=h,h=h.child}if(!(h.flags&2))return h.stateNode}}function C4(h,m,w){var C=h.tag;if(C===5||C===6)h=h.stateNode,m?(w.nodeType===9?w.body:w.nodeName==="HTML"?w.ownerDocument.body:w).insertBefore(h,m):(m=w.nodeType===9?w.body:w.nodeName==="HTML"?w.ownerDocument.body:w,m.appendChild(h),w=w._reactRootContainer,w!=null||m.onclick!==null||(m.onclick=aa));else if(C!==4&&(C===27&&Rh(h.type)&&(w=h.stateNode,m=null),h=h.child,h!==null))for(C4(h,m,w),h=h.sibling;h!==null;)C4(h,m,w),h=h.sibling}function Xv(h,m,w){var C=h.tag;if(C===5||C===6)h=h.stateNode,m?w.insertBefore(h,m):w.appendChild(h);else if(C!==4&&(C===27&&Rh(h.type)&&(w=h.stateNode),h=h.child,h!==null))for(Xv(h,m,w),h=h.sibling;h!==null;)Xv(h,m,w),h=h.sibling}function L8(h){var m=h.stateNode,w=h.memoizedProps;try{for(var C=h.type,M=m.attributes;M.length;)m.removeAttributeNode(M[0]);Lo(m,C,w),m[Ce]=h,m[Ue]=w}catch(V){Ka(h,h.return,V)}}var m0=!1,Ri=!1,A4=!1,R8=typeof WeakSet=="function"?WeakSet:Set,wo=null;function PX(h,m){if(h=h.containerInfo,X4=p2,h=we(h),Oe(h)){if("selectionStart"in h)var w={start:h.selectionStart,end:h.selectionEnd};else e:{w=(w=h.ownerDocument)&&w.defaultView||window;var C=w.getSelection&&w.getSelection();if(C&&C.rangeCount!==0){w=C.anchorNode;var M=C.anchorOffset,V=C.focusNode;C=C.focusOffset;try{w.nodeType,V.nodeType}catch{w=null;break e}var he=0,Fe=-1,nt=-1,_t=0,Gt=0,er=h,Ot=null;t:for(;;){for(var Dt;er!==w||M!==0&&er.nodeType!==3||(Fe=he+M),er!==V||C!==0&&er.nodeType!==3||(nt=he+C),er.nodeType===3&&(he+=er.nodeValue.length),(Dt=er.firstChild)!==null;)Ot=er,er=Dt;for(;;){if(er===h)break t;if(Ot===w&&++_t===M&&(Fe=he),Ot===V&&++Gt===C&&(nt=he),(Dt=er.nextSibling)!==null)break;er=Ot,Ot=er.parentNode}er=Dt}w=Fe===-1||nt===-1?null:{start:Fe,end:nt}}else w=null}w=w||{start:0,end:0}}else w=null;for(Y4={focusedElem:h,selectionRange:w},p2=!1,wo=m;wo!==null;)if(m=wo,h=m.child,(m.subtreeFlags&1028)!==0&&h!==null)h.return=m,wo=h;else for(;wo!==null;){switch(m=wo,V=m.alternate,h=m.flags,m.tag){case 0:if((h&4)!==0&&(h=m.updateQueue,h=h!==null?h.events:null,h!==null))for(w=0;w<h.length;w++)M=h[w],M.ref.impl=M.nextImpl;break;case 11:case 15:break;case 1:if((h&1024)!==0&&V!==null){h=void 0,w=m,M=V.memoizedProps,V=V.memoizedState,C=w.stateNode;try{var Kr=$f(w.type,M);h=C.getSnapshotBeforeUpdate(Kr,V),C.__reactInternalSnapshotBeforeUpdate=h}catch(An){Ka(w,w.return,An)}}break;case 3:if((h&1024)!==0){if(h=m.stateNode.containerInfo,w=h.nodeType,w===9)J4(h);else if(w===1)switch(h.nodeName){case"HEAD":case"HTML":case"BODY":J4(h);break;default:h.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((h&1024)!==0)throw Error(n(163))}if(h=m.sibling,h!==null){h.return=m.return,wo=h;break}wo=m.return}}function F8(h,m,w){var C=w.flags;switch(w.tag){case 0:case 11:case 15:p0(h,w),C&4&&Xp(5,w);break;case 1:if(p0(h,w),C&4)if(h=w.stateNode,m===null)try{h.componentDidMount()}catch(he){Ka(w,w.return,he)}else{var M=$f(w.type,m.memoizedProps);m=m.memoizedState;try{h.componentDidUpdate(M,m,h.__reactInternalSnapshotBeforeUpdate)}catch(he){Ka(w,w.return,he)}}C&64&&P8(w),C&512&&Yp(w,w.return);break;case 3:if(p0(h,w),C&64&&(h=w.updateQueue,h!==null)){if(m=null,w.child!==null)switch(w.child.tag){case 27:case 5:m=w.child.stateNode;break;case 1:m=w.child.stateNode}try{si(h,m)}catch(he){Ka(w,w.return,he)}}break;case 27:m===null&&C&4&&L8(w);case 26:case 5:p0(h,w),m===null&&C&4&&D8(w),C&512&&Yp(w,w.return);break;case 12:p0(h,w);break;case 31:p0(h,w),C&4&&z8(h,w);break;case 13:p0(h,w),C&4&&q8(h,w),C&64&&(h=w.memoizedState,h!==null&&(h=h.dehydrated,h!==null&&(w=zX.bind(null,w),oY(h,w))));break;case 22:if(C=w.memoizedState!==null||m0,!C){m=m!==null&&m.memoizedState!==null||Ri,M=m0;var V=Ri;m0=C,(Ri=m)&&!V?g0(h,w,(w.subtreeFlags&8772)!==0):p0(h,w),m0=M,Ri=V}break;case 30:break;default:p0(h,w)}}function B8(h){var m=h.alternate;m!==null&&(h.alternate=null,B8(m)),h.child=null,h.deletions=null,h.sibling=null,h.tag===5&&(m=h.stateNode,m!==null&&mt(m)),h.stateNode=null,h.return=null,h.dependencies=null,h.memoizedProps=null,h.memoizedState=null,h.pendingProps=null,h.stateNode=null,h.updateQueue=null}var zs=null,Ql=!1;function x0(h,m,w){for(w=w.child;w!==null;)U8(h,m,w),w=w.sibling}function U8(h,m,w){if(ft&&typeof ft.onCommitFiberUnmount=="function")try{ft.onCommitFiberUnmount(rr,w)}catch{}switch(w.tag){case 26:Ri||ju(w,m),x0(h,m,w),w.memoizedState?w.memoizedState.count--:w.stateNode&&(w=w.stateNode,w.parentNode.removeChild(w));break;case 27:Ri||ju(w,m);var C=zs,M=Ql;Rh(w.type)&&(zs=w.stateNode,Ql=!1),x0(h,m,w),sg(w.stateNode),zs=C,Ql=M;break;case 5:Ri||ju(w,m);case 6:if(C=zs,M=Ql,zs=null,x0(h,m,w),zs=C,Ql=M,zs!==null)if(Ql)try{(zs.nodeType===9?zs.body:zs.nodeName==="HTML"?zs.ownerDocument.body:zs).removeChild(w.stateNode)}catch(V){Ka(w,m,V)}else try{zs.removeChild(w.stateNode)}catch(V){Ka(w,m,V)}break;case 18:zs!==null&&(Ql?(h=zs,PT(h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h,w.stateNode),Yx(h)):PT(zs,w.stateNode));break;case 4:C=zs,M=Ql,zs=w.stateNode.containerInfo,Ql=!0,x0(h,m,w),zs=C,Ql=M;break;case 0:case 11:case 14:case 15:Th(2,w,m),Ri||Th(4,w,m),x0(h,m,w);break;case 1:Ri||(ju(w,m),C=w.stateNode,typeof C.componentWillUnmount=="function"&&I8(w,m,C)),x0(h,m,w);break;case 21:x0(h,m,w);break;case 22:Ri=(C=Ri)||w.memoizedState!==null,x0(h,m,w),Ri=C;break;default:x0(h,m,w)}}function z8(h,m){if(m.memoizedState===null&&(h=m.alternate,h!==null&&(h=h.memoizedState,h!==null))){h=h.dehydrated;try{Yx(h)}catch(w){Ka(m,m.return,w)}}}function q8(h,m){if(m.memoizedState===null&&(h=m.alternate,h!==null&&(h=h.memoizedState,h!==null&&(h=h.dehydrated,h!==null))))try{Yx(h)}catch(w){Ka(m,m.return,w)}}function IX(h){switch(h.tag){case 31:case 13:case 19:var m=h.stateNode;return m===null&&(m=h.stateNode=new R8),m;case 22:return h=h.stateNode,m=h._retryCache,m===null&&(m=h._retryCache=new R8),m;default:throw Error(n(435,h.tag))}}function Yv(h,m){var w=IX(h);m.forEach(function(C){if(!w.has(C)){w.add(C);var M=qX.bind(null,h,C);C.then(M,M)}})}function Zl(h,m){var w=m.deletions;if(w!==null)for(var C=0;C<w.length;C++){var M=w[C],V=h,he=m,Fe=he;e:for(;Fe!==null;){switch(Fe.tag){case 27:if(Rh(Fe.type)){zs=Fe.stateNode,Ql=!1;break e}break;case 5:zs=Fe.stateNode,Ql=!1;break e;case 3:case 4:zs=Fe.stateNode.containerInfo,Ql=!0;break e}Fe=Fe.return}if(zs===null)throw Error(n(160));U8(V,he,M),zs=null,Ql=!1,V=M.alternate,V!==null&&(V.return=null),M.return=null}if(m.subtreeFlags&13886)for(m=m.child;m!==null;)H8(m,h),m=m.sibling}var qd=null;function H8(h,m){var w=h.alternate,C=h.flags;switch(h.tag){case 0:case 11:case 14:case 15:Zl(m,h),Jl(h),C&4&&(Th(3,h,h.return),Xp(3,h),Th(5,h,h.return));break;case 1:Zl(m,h),Jl(h),C&512&&(Ri||w===null||ju(w,w.return)),C&64&&m0&&(h=h.updateQueue,h!==null&&(C=h.callbacks,C!==null&&(w=h.shared.hiddenCallbacks,h.shared.hiddenCallbacks=w===null?C:w.concat(C))));break;case 26:var M=qd;if(Zl(m,h),Jl(h),C&512&&(Ri||w===null||ju(w,w.return)),C&4){var V=w!==null?w.memoizedState:null;if(C=h.memoizedState,w===null)if(C===null)if(h.stateNode===null){e:{C=h.type,w=h.memoizedProps,M=M.ownerDocument||M;t:switch(C){case"title":V=M.getElementsByTagName("title")[0],(!V||V[Xe]||V[Ce]||V.namespaceURI==="http://www.w3.org/2000/svg"||V.hasAttribute("itemprop"))&&(V=M.createElement(C),M.head.insertBefore(V,M.querySelector("head > title"))),Lo(V,C,w),V[Ce]=h,Cr(V),C=V;break e;case"link":var he=HT("link","href",M).get(C+(w.href||""));if(he){for(var Fe=0;Fe<he.length;Fe++)if(V=he[Fe],V.getAttribute("href")===(w.href==null||w.href===""?null:w.href)&&V.getAttribute("rel")===(w.rel==null?null:w.rel)&&V.getAttribute("title")===(w.title==null?null:w.title)&&V.getAttribute("crossorigin")===(w.crossOrigin==null?null:w.crossOrigin)){he.splice(Fe,1);break t}}V=M.createElement(C),Lo(V,C,w),M.head.appendChild(V);break;case"meta":if(he=HT("meta","content",M).get(C+(w.content||""))){for(Fe=0;Fe<he.length;Fe++)if(V=he[Fe],V.getAttribute("content")===(w.content==null?null:""+w.content)&&V.getAttribute("name")===(w.name==null?null:w.name)&&V.getAttribute("property")===(w.property==null?null:w.property)&&V.getAttribute("http-equiv")===(w.httpEquiv==null?null:w.httpEquiv)&&V.getAttribute("charset")===(w.charSet==null?null:w.charSet)){he.splice(Fe,1);break t}}V=M.createElement(C),Lo(V,C,w),M.head.appendChild(V);break;default:throw Error(n(468,C))}V[Ce]=h,Cr(V),C=V}h.stateNode=C}else $T(M,h.type,h.stateNode);else h.stateNode=qT(M,C,h.memoizedProps);else V!==C?(V===null?w.stateNode!==null&&(w=w.stateNode,w.parentNode.removeChild(w)):V.count--,C===null?$T(M,h.type,h.stateNode):qT(M,C,h.memoizedProps)):C===null&&h.stateNode!==null&&S4(h,h.memoizedProps,w.memoizedProps)}break;case 27:Zl(m,h),Jl(h),C&512&&(Ri||w===null||ju(w,w.return)),w!==null&&C&4&&S4(h,h.memoizedProps,w.memoizedProps);break;case 5:if(Zl(m,h),Jl(h),C&512&&(Ri||w===null||ju(w,w.return)),h.flags&32){M=h.stateNode;try{nn(M,"")}catch(Kr){Ka(h,h.return,Kr)}}C&4&&h.stateNode!=null&&(M=h.memoizedProps,S4(h,M,w!==null?w.memoizedProps:M)),C&1024&&(A4=!0);break;case 6:if(Zl(m,h),Jl(h),C&4){if(h.stateNode===null)throw Error(n(162));C=h.memoizedProps,w=h.stateNode;try{w.nodeValue=C}catch(Kr){Ka(h,h.return,Kr)}}break;case 3:if(h2=null,M=qd,qd=d2(m.containerInfo),Zl(m,h),qd=M,Jl(h),C&4&&w!==null&&w.memoizedState.isDehydrated)try{Yx(m.containerInfo)}catch(Kr){Ka(h,h.return,Kr)}A4&&(A4=!1,$8(h));break;case 4:C=qd,qd=d2(h.stateNode.containerInfo),Zl(m,h),Jl(h),qd=C;break;case 12:Zl(m,h),Jl(h);break;case 31:Zl(m,h),Jl(h),C&4&&(C=h.updateQueue,C!==null&&(h.updateQueue=null,Yv(h,C)));break;case 13:Zl(m,h),Jl(h),h.child.flags&8192&&h.memoizedState!==null!=(w!==null&&w.memoizedState!==null)&&(Zv=fr()),C&4&&(C=h.updateQueue,C!==null&&(h.updateQueue=null,Yv(h,C)));break;case 22:M=h.memoizedState!==null;var nt=w!==null&&w.memoizedState!==null,_t=m0,Gt=Ri;if(m0=_t||M,Ri=Gt||nt,Zl(m,h),Ri=Gt,m0=_t,Jl(h),C&8192)e:for(m=h.stateNode,m._visibility=M?m._visibility&-2:m._visibility|1,M&&(w===null||nt||m0||Ri||Vf(h)),w=null,m=h;;){if(m.tag===5||m.tag===26){if(w===null){nt=w=m;try{if(V=nt.stateNode,M)he=V.style,typeof he.setProperty=="function"?he.setProperty("display","none","important"):he.display="none";else{Fe=nt.stateNode;var er=nt.memoizedProps.style,Ot=er!=null&&er.hasOwnProperty("display")?er.display:null;Fe.style.display=Ot==null||typeof Ot=="boolean"?"":(""+Ot).trim()}}catch(Kr){Ka(nt,nt.return,Kr)}}}else if(m.tag===6){if(w===null){nt=m;try{nt.stateNode.nodeValue=M?"":nt.memoizedProps}catch(Kr){Ka(nt,nt.return,Kr)}}}else if(m.tag===18){if(w===null){nt=m;try{var Dt=nt.stateNode;M?IT(Dt,!0):IT(nt.stateNode,!1)}catch(Kr){Ka(nt,nt.return,Kr)}}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===h)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===h)break e;for(;m.sibling===null;){if(m.return===null||m.return===h)break e;w===m&&(w=null),m=m.return}w===m&&(w=null),m.sibling.return=m.return,m=m.sibling}C&4&&(C=h.updateQueue,C!==null&&(w=C.retryQueue,w!==null&&(C.retryQueue=null,Yv(h,w))));break;case 19:Zl(m,h),Jl(h),C&4&&(C=h.updateQueue,C!==null&&(h.updateQueue=null,Yv(h,C)));break;case 30:break;case 21:break;default:Zl(m,h),Jl(h)}}function Jl(h){var m=h.flags;if(m&2){try{for(var w,C=h.return;C!==null;){if(M8(C)){w=C;break}C=C.return}if(w==null)throw Error(n(160));switch(w.tag){case 27:var M=w.stateNode,V=j4(h);Xv(h,V,M);break;case 5:var he=w.stateNode;w.flags&32&&(nn(he,""),w.flags&=-33);var Fe=j4(h);Xv(h,Fe,he);break;case 3:case 4:var nt=w.stateNode.containerInfo,_t=j4(h);C4(h,_t,nt);break;default:throw Error(n(161))}}catch(Gt){Ka(h,h.return,Gt)}h.flags&=-3}m&4096&&(h.flags&=-4097)}function $8(h){if(h.subtreeFlags&1024)for(h=h.child;h!==null;){var m=h;$8(m),m.tag===5&&m.flags&1024&&m.stateNode.reset(),h=h.sibling}}function p0(h,m){if(m.subtreeFlags&8772)for(m=m.child;m!==null;)F8(h,m.alternate,m),m=m.sibling}function Vf(h){for(h=h.child;h!==null;){var m=h;switch(m.tag){case 0:case 11:case 14:case 15:Th(4,m,m.return),Vf(m);break;case 1:ju(m,m.return);var w=m.stateNode;typeof w.componentWillUnmount=="function"&&I8(m,m.return,w),Vf(m);break;case 27:sg(m.stateNode);case 26:case 5:ju(m,m.return),Vf(m);break;case 22:m.memoizedState===null&&Vf(m);break;case 30:Vf(m);break;default:Vf(m)}h=h.sibling}}function g0(h,m,w){for(w=w&&(m.subtreeFlags&8772)!==0,m=m.child;m!==null;){var C=m.alternate,M=h,V=m,he=V.flags;switch(V.tag){case 0:case 11:case 15:g0(M,V,w),Xp(4,V);break;case 1:if(g0(M,V,w),C=V,M=C.stateNode,typeof M.componentDidMount=="function")try{M.componentDidMount()}catch(_t){Ka(C,C.return,_t)}if(C=V,M=C.updateQueue,M!==null){var Fe=C.stateNode;try{var nt=M.shared.hiddenCallbacks;if(nt!==null)for(M.shared.hiddenCallbacks=null,M=0;M<nt.length;M++)vo(nt[M],Fe)}catch(_t){Ka(C,C.return,_t)}}w&&he&64&&P8(V),Yp(V,V.return);break;case 27:L8(V);case 26:case 5:g0(M,V,w),w&&C===null&&he&4&&D8(V),Yp(V,V.return);break;case 12:g0(M,V,w);break;case 31:g0(M,V,w),w&&he&4&&z8(M,V);break;case 13:g0(M,V,w),w&&he&4&&q8(M,V);break;case 22:V.memoizedState===null&&g0(M,V,w),Yp(V,V.return);break;case 30:break;default:g0(M,V,w)}m=m.sibling}}function E4(h,m){var w=null;h!==null&&h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(w=h.memoizedState.cachePool.pool),h=null,m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(h=m.memoizedState.cachePool.pool),h!==w&&(h!=null&&h.refCount++,w!=null&&Uf(w))}function T4(h,m){h=null,m.alternate!==null&&(h=m.alternate.memoizedState.cache),m=m.memoizedState.cache,m!==h&&(m.refCount++,h!=null&&Uf(h))}function Hd(h,m,w,C){if(m.subtreeFlags&10256)for(m=m.child;m!==null;)V8(h,m,w,C),m=m.sibling}function V8(h,m,w,C){var M=m.flags;switch(m.tag){case 0:case 11:case 15:Hd(h,m,w,C),M&2048&&Xp(9,m);break;case 1:Hd(h,m,w,C);break;case 3:Hd(h,m,w,C),M&2048&&(h=null,m.alternate!==null&&(h=m.alternate.memoizedState.cache),m=m.memoizedState.cache,m!==h&&(m.refCount++,h!=null&&Uf(h)));break;case 12:if(M&2048){Hd(h,m,w,C),h=m.stateNode;try{var V=m.memoizedProps,he=V.id,Fe=V.onPostCommit;typeof Fe=="function"&&Fe(he,m.alternate===null?"mount":"update",h.passiveEffectDuration,-0)}catch(nt){Ka(m,m.return,nt)}}else Hd(h,m,w,C);break;case 31:Hd(h,m,w,C);break;case 13:Hd(h,m,w,C);break;case 23:break;case 22:V=m.stateNode,he=m.alternate,m.memoizedState!==null?V._visibility&2?Hd(h,m,w,C):Qp(h,m):V._visibility&2?Hd(h,m,w,C):(V._visibility|=2,Bx(h,m,w,C,(m.subtreeFlags&10256)!==0||!1)),M&2048&&E4(he,m);break;case 24:Hd(h,m,w,C),M&2048&&T4(m.alternate,m);break;default:Hd(h,m,w,C)}}function Bx(h,m,w,C,M){for(M=M&&((m.subtreeFlags&10256)!==0||!1),m=m.child;m!==null;){var V=h,he=m,Fe=w,nt=C,_t=he.flags;switch(he.tag){case 0:case 11:case 15:Bx(V,he,Fe,nt,M),Xp(8,he);break;case 23:break;case 22:var Gt=he.stateNode;he.memoizedState!==null?Gt._visibility&2?Bx(V,he,Fe,nt,M):Qp(V,he):(Gt._visibility|=2,Bx(V,he,Fe,nt,M)),M&&_t&2048&&E4(he.alternate,he);break;case 24:Bx(V,he,Fe,nt,M),M&&_t&2048&&T4(he.alternate,he);break;default:Bx(V,he,Fe,nt,M)}m=m.sibling}}function Qp(h,m){if(m.subtreeFlags&10256)for(m=m.child;m!==null;){var w=h,C=m,M=C.flags;switch(C.tag){case 22:Qp(w,C),M&2048&&E4(C.alternate,C);break;case 24:Qp(w,C),M&2048&&T4(C.alternate,C);break;default:Qp(w,C)}m=m.sibling}}var Zp=8192;function Ux(h,m,w){if(h.subtreeFlags&Zp)for(h=h.child;h!==null;)W8(h,m,w),h=h.sibling}function W8(h,m,w){switch(h.tag){case 26:Ux(h,m,w),h.flags&Zp&&h.memoizedState!==null&&vY(w,qd,h.memoizedState,h.memoizedProps);break;case 5:Ux(h,m,w);break;case 3:case 4:var C=qd;qd=d2(h.stateNode.containerInfo),Ux(h,m,w),qd=C;break;case 22:h.memoizedState===null&&(C=h.alternate,C!==null&&C.memoizedState!==null?(C=Zp,Zp=16777216,Ux(h,m,w),Zp=C):Ux(h,m,w));break;default:Ux(h,m,w)}}function G8(h){var m=h.alternate;if(m!==null&&(h=m.child,h!==null)){m.child=null;do m=h.sibling,h.sibling=null,h=m;while(h!==null)}}function Jp(h){var m=h.deletions;if((h.flags&16)!==0){if(m!==null)for(var w=0;w<m.length;w++){var C=m[w];wo=C,X8(C,h)}G8(h)}if(h.subtreeFlags&10256)for(h=h.child;h!==null;)K8(h),h=h.sibling}function K8(h){switch(h.tag){case 0:case 11:case 15:Jp(h),h.flags&2048&&Th(9,h,h.return);break;case 3:Jp(h);break;case 12:Jp(h);break;case 22:var m=h.stateNode;h.memoizedState!==null&&m._visibility&2&&(h.return===null||h.return.tag!==13)?(m._visibility&=-3,Qv(h)):Jp(h);break;default:Jp(h)}}function Qv(h){var m=h.deletions;if((h.flags&16)!==0){if(m!==null)for(var w=0;w<m.length;w++){var C=m[w];wo=C,X8(C,h)}G8(h)}for(h=h.child;h!==null;){switch(m=h,m.tag){case 0:case 11:case 15:Th(8,m,m.return),Qv(m);break;case 22:w=m.stateNode,w._visibility&2&&(w._visibility&=-3,Qv(m));break;default:Qv(m)}h=h.sibling}}function X8(h,m){for(;wo!==null;){var w=wo;switch(w.tag){case 0:case 11:case 15:Th(8,w,m);break;case 23:case 22:if(w.memoizedState!==null&&w.memoizedState.cachePool!==null){var C=w.memoizedState.cachePool.pool;C!=null&&C.refCount++}break;case 24:Uf(w.memoizedState.cache)}if(C=w.child,C!==null)C.return=w,wo=C;else e:for(w=h;wo!==null;){C=wo;var M=C.sibling,V=C.return;if(B8(C),C===w){wo=null;break e}if(M!==null){M.return=V,wo=M;break e}wo=V}}}var DX={getCacheForType:function(h){var m=Zi(Ys),w=m.data.get(h);return w===void 0&&(w=h(),m.data.set(h,w)),w},cacheSignal:function(){return Zi(Ys).controller.signal}},MX=typeof WeakMap=="function"?WeakMap:Map,$a=0,fs=null,ha=null,ba=0,Ga=0,pc=null,Oh=!1,zx=!1,O4=!1,b0=0,ci=0,Ph=0,Wf=0,P4=0,gc=0,qx=0,eg=null,ec=null,I4=!1,Zv=0,Y8=0,Jv=1/0,e2=null,Ih=null,eo=0,Dh=null,Hx=null,v0=0,D4=0,M4=null,Q8=null,tg=0,L4=null;function bc(){return($a&2)!==0&&ba!==0?ba&-ba:ue.T!==null?q4():Ne()}function Z8(){if(gc===0)if((ba&536870912)===0||ua){var h=Mt;Mt<<=1,(Mt&3932160)===0&&(Mt=262144),gc=h}else gc=536870912;return h=js.current,h!==null&&(h.flags|=32),gc}function tc(h,m,w){(h===fs&&(Ga===2||Ga===9)||h.cancelPendingCommit!==null)&&($x(h,0),Mh(h,ba,gc,!1)),cr(h,w),(($a&2)===0||h!==fs)&&(h===fs&&(($a&2)===0&&(Wf|=w),ci===4&&Mh(h,ba,gc,!1)),Cu(h))}function J8(h,m,w){if(($a&6)!==0)throw Error(n(327));var C=!w&&(m&127)===0&&(m&h.expiredLanes)===0||Dr(h,m),M=C?FX(h,m):F4(h,m,!0),V=C;do{if(M===0){zx&&!C&&Mh(h,m,0,!1);break}else{if(w=h.current.alternate,V&&!LX(w)){M=F4(h,m,!1),V=!1;continue}if(M===2){if(V=m,h.errorRecoveryDisabledLanes&V)var he=0;else he=h.pendingLanes&-536870913,he=he!==0?he:he&536870912?536870912:0;if(he!==0){m=he;e:{var Fe=h;M=eg;var nt=Fe.current.memoizedState.isDehydrated;if(nt&&($x(Fe,he).flags|=256),he=F4(Fe,he,!1),he!==2){if(O4&&!nt){Fe.errorRecoveryDisabledLanes|=V,Wf|=V,M=4;break e}V=ec,ec=M,V!==null&&(ec===null?ec=V:ec.push.apply(ec,V))}M=he}if(V=!1,M!==2)continue}}if(M===1){$x(h,0),Mh(h,m,0,!0);break}e:{switch(C=h,V=M,V){case 0:case 1:throw Error(n(345));case 4:if((m&4194048)!==m)break;case 6:Mh(C,m,gc,!Oh);break e;case 2:ec=null;break;case 3:case 5:break;default:throw Error(n(329))}if((m&62914560)===m&&(M=Zv+300-fr(),10<M)){if(Mh(C,m,gc,!Oh),ur(C,0,!0)!==0)break e;v0=m,C.timeoutHandle=TT(eT.bind(null,C,w,ec,e2,I4,m,gc,Wf,qx,Oh,V,"Throttled",-0,0),M);break e}eT(C,w,ec,e2,I4,m,gc,Wf,qx,Oh,V,null,-0,0)}}break}while(!0);Cu(h)}function eT(h,m,w,C,M,V,he,Fe,nt,_t,Gt,er,Ot,Dt){if(h.timeoutHandle=-1,er=m.subtreeFlags,er&8192||(er&16785408)===16785408){er={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:aa},W8(m,V,er);var Kr=(V&62914560)===V?Zv-fr():(V&4194048)===V?Y8-fr():0;if(Kr=yY(er,Kr),Kr!==null){v0=V,h.cancelPendingCommit=Kr(lT.bind(null,h,m,V,w,C,M,he,Fe,nt,Gt,er,null,Ot,Dt)),Mh(h,V,he,!_t);return}}lT(h,m,V,w,C,M,he,Fe,nt)}function LX(h){for(var m=h;;){var w=m.tag;if((w===0||w===11||w===15)&&m.flags&16384&&(w=m.updateQueue,w!==null&&(w=w.stores,w!==null)))for(var C=0;C<w.length;C++){var M=w[C],V=M.getSnapshot;M=M.value;try{if(!E(V(),M))return!1}catch{return!1}}if(w=m.child,m.subtreeFlags&16384&&w!==null)w.return=m,m=w;else{if(m===h)break;for(;m.sibling===null;){if(m.return===null||m.return===h)return!0;m=m.return}m.sibling.return=m.return,m=m.sibling}}return!0}function Mh(h,m,w,C){m&=~P4,m&=~Wf,h.suspendedLanes|=m,h.pingedLanes&=~m,C&&(h.warmLanes|=m),C=h.expirationTimes;for(var M=m;0<M;){var V=31-yr(M),he=1<<V;C[V]=-1,M&=~he}w!==0&&Rr(h,w,m)}function t2(){return($a&6)===0?(rg(0),!1):!0}function R4(){if(ha!==null){if(Ga===0)var h=ha.return;else h=ha,Jc=bu=null,Px(h),nr=null,Xr=0,h=ha;for(;h!==null;)O8(h.alternate,h),h=h.return;ha=null}}function $x(h,m){var w=h.timeoutHandle;w!==-1&&(h.timeoutHandle=-1,rY(w)),w=h.cancelPendingCommit,w!==null&&(h.cancelPendingCommit=null,w()),v0=0,R4(),fs=h,ha=w=Hl(h.current,null),ba=m,Ga=0,pc=null,Oh=!1,zx=Dr(h,m),O4=!1,qx=gc=P4=Wf=Ph=ci=0,ec=eg=null,I4=!1,(m&8)!==0&&(m|=m&32);var C=h.entangledLanes;if(C!==0)for(h=h.entanglements,C&=m;0<C;){var M=31-yr(C),V=1<<M;m|=h[M],C&=~V}return b0=m,Df(),w}function tT(h,m){fn=null,ue.H=Wp,m===dt||m===Ve?(m=Qt(),Ga=3):m===kt?(m=Qt(),Ga=4):Ga=m===x4?8:m!==null&&typeof m=="object"&&typeof m.then=="function"?6:1,pc=m,ha===null&&(ci=1,$v(h,$l(m,h.current)))}function rT(){var h=js.current;return h===null?!0:(ba&4194048)===ba?Sa===null:(ba&62914560)===ba||(ba&536870912)!==0?h===Sa:!1}function nT(){var h=ue.H;return ue.H=Wp,h===null?Wp:h}function aT(){var h=ue.A;return ue.A=DX,h}function r2(){ci=4,Oh||(ba&4194048)!==ba&&js.current!==null||(zx=!0),(Ph&134217727)===0&&(Wf&134217727)===0||fs===null||Mh(fs,ba,gc,!1)}function F4(h,m,w){var C=$a;$a|=2;var M=nT(),V=aT();(fs!==h||ba!==m)&&(e2=null,$x(h,m)),m=!1;var he=ci;e:do try{if(Ga!==0&&ha!==null){var Fe=ha,nt=pc;switch(Ga){case 8:R4(),he=6;break e;case 3:case 2:case 9:case 6:js.current===null&&(m=!0);var _t=Ga;if(Ga=0,pc=null,Vx(h,Fe,nt,_t),w&&zx){he=0;break e}break;default:_t=Ga,Ga=0,pc=null,Vx(h,Fe,nt,_t)}}RX(),he=ci;break}catch(Gt){tT(h,Gt)}while(!0);return m&&h.shellSuspendCounter++,Jc=bu=null,$a=C,ue.H=M,ue.A=V,ha===null&&(fs=null,ba=0,Df()),he}function RX(){for(;ha!==null;)sT(ha)}function FX(h,m){var w=$a;$a|=2;var C=nT(),M=aT();fs!==h||ba!==m?(e2=null,Jv=fr()+500,$x(h,m)):zx=Dr(h,m);e:do try{if(Ga!==0&&ha!==null){m=ha;var V=pc;t:switch(Ga){case 1:Ga=0,pc=null,Vx(h,m,V,1);break;case 2:case 9:if(bt(V)){Ga=0,pc=null,iT(m);break}m=function(){Ga!==2&&Ga!==9||fs!==h||(Ga=7),Cu(h)},V.then(m,m);break e;case 3:Ga=7;break e;case 4:Ga=5;break e;case 7:bt(V)?(Ga=0,pc=null,iT(m)):(Ga=0,pc=null,Vx(h,m,V,7));break;case 5:var he=null;switch(ha.tag){case 26:he=ha.memoizedState;case 5:case 27:var Fe=ha;if(he?VT(he):Fe.stateNode.complete){Ga=0,pc=null;var nt=Fe.sibling;if(nt!==null)ha=nt;else{var _t=Fe.return;_t!==null?(ha=_t,n2(_t)):ha=null}break t}}Ga=0,pc=null,Vx(h,m,V,5);break;case 6:Ga=0,pc=null,Vx(h,m,V,6);break;case 8:R4(),ci=6;break e;default:throw Error(n(462))}}BX();break}catch(Gt){tT(h,Gt)}while(!0);return Jc=bu=null,ue.H=C,ue.A=M,$a=w,ha!==null?0:(fs=null,ba=0,Df(),ci)}function BX(){for(;ha!==null&&!zt();)sT(ha)}function sT(h){var m=E8(h.alternate,h,b0);h.memoizedProps=h.pendingProps,m===null?n2(h):ha=m}function iT(h){var m=h,w=m.alternate;switch(m.tag){case 15:case 0:m=N8(w,m,m.pendingProps,m.type,void 0,ba);break;case 11:m=N8(w,m,m.pendingProps,m.type.render,m.ref,ba);break;case 5:Px(m);default:O8(w,m),m=ha=Rf(m,b0),m=E8(w,m,b0)}h.memoizedProps=h.pendingProps,m===null?n2(h):ha=m}function Vx(h,m,w,C){Jc=bu=null,Px(m),nr=null,Xr=0;var M=m.return;try{if(CX(h,M,m,w,ba)){ci=1,$v(h,$l(w,h.current)),ha=null;return}}catch(V){if(M!==null)throw ha=M,V;ci=1,$v(h,$l(w,h.current)),ha=null;return}m.flags&32768?(ua||C===1?h=!0:zx||(ba&536870912)!==0?h=!1:(Oh=h=!0,(C===2||C===9||C===3||C===6)&&(C=js.current,C!==null&&C.tag===13&&(C.flags|=16384))),oT(m,h)):n2(m)}function n2(h){var m=h;do{if((m.flags&32768)!==0){oT(m,Oh);return}h=m.return;var w=TX(m.alternate,m,b0);if(w!==null){ha=w;return}if(m=m.sibling,m!==null){ha=m;return}ha=m=h}while(m!==null);ci===0&&(ci=5)}function oT(h,m){do{var w=OX(h.alternate,h);if(w!==null){w.flags&=32767,ha=w;return}if(w=h.return,w!==null&&(w.flags|=32768,w.subtreeFlags=0,w.deletions=null),!m&&(h=h.sibling,h!==null)){ha=h;return}ha=h=w}while(h!==null);ci=6,ha=null}function lT(h,m,w,C,M,V,he,Fe,nt){h.cancelPendingCommit=null;do a2();while(eo!==0);if(($a&6)!==0)throw Error(n(327));if(m!==null){if(m===h.current)throw Error(n(177));if(V=m.lanes|m.childLanes,V|=bx,pr(h,w,V,he,Fe,nt),h===fs&&(ha=fs=null,ba=0),Hx=m,Dh=h,v0=w,D4=V,M4=M,Q8=C,(m.subtreeFlags&10256)!==0||(m.flags&10256)!==0?(h.callbackNode=null,h.callbackPriority=0,HX(tr,function(){return fT(),null})):(h.callbackNode=null,h.callbackPriority=0),C=(m.flags&13878)!==0,(m.subtreeFlags&13878)!==0||C){C=ue.T,ue.T=null,M=ae.p,ae.p=2,he=$a,$a|=4;try{PX(h,m,w)}finally{$a=he,ae.p=M,ue.T=C}}eo=1,cT(),dT(),uT()}}function cT(){if(eo===1){eo=0;var h=Dh,m=Hx,w=(m.flags&13878)!==0;if((m.subtreeFlags&13878)!==0||w){w=ue.T,ue.T=null;var C=ae.p;ae.p=2;var M=$a;$a|=4;try{H8(m,h);var V=Y4,he=we(h.containerInfo),Fe=V.focusedElem,nt=V.selectionRange;if(he!==Fe&&Fe&&Fe.ownerDocument&&oe(Fe.ownerDocument.documentElement,Fe)){if(nt!==null&&Oe(Fe)){var _t=nt.start,Gt=nt.end;if(Gt===void 0&&(Gt=_t),"selectionStart"in Fe)Fe.selectionStart=_t,Fe.selectionEnd=Math.min(Gt,Fe.value.length);else{var er=Fe.ownerDocument||document,Ot=er&&er.defaultView||window;if(Ot.getSelection){var Dt=Ot.getSelection(),Kr=Fe.textContent.length,An=Math.min(nt.start,Kr),as=nt.end===void 0?An:Math.min(nt.end,Kr);!Dt.extend&&An>as&&(he=as,as=An,An=he);var gt=X(Fe,An),ut=X(Fe,as);if(gt&&ut&&(Dt.rangeCount!==1||Dt.anchorNode!==gt.node||Dt.anchorOffset!==gt.offset||Dt.focusNode!==ut.node||Dt.focusOffset!==ut.offset)){var Nt=er.createRange();Nt.setStart(gt.node,gt.offset),Dt.removeAllRanges(),An>as?(Dt.addRange(Nt),Dt.extend(ut.node,ut.offset)):(Nt.setEnd(ut.node,ut.offset),Dt.addRange(Nt))}}}}for(er=[],Dt=Fe;Dt=Dt.parentNode;)Dt.nodeType===1&&er.push({element:Dt,left:Dt.scrollLeft,top:Dt.scrollTop});for(typeof Fe.focus=="function"&&Fe.focus(),Fe=0;Fe<er.length;Fe++){var Zt=er[Fe];Zt.element.scrollLeft=Zt.left,Zt.element.scrollTop=Zt.top}}p2=!!X4,Y4=X4=null}finally{$a=M,ae.p=C,ue.T=w}}h.current=m,eo=2}}function dT(){if(eo===2){eo=0;var h=Dh,m=Hx,w=(m.flags&8772)!==0;if((m.subtreeFlags&8772)!==0||w){w=ue.T,ue.T=null;var C=ae.p;ae.p=2;var M=$a;$a|=4;try{F8(h,m.alternate,m)}finally{$a=M,ae.p=C,ue.T=w}}eo=3}}function uT(){if(eo===4||eo===3){eo=0,Ft();var h=Dh,m=Hx,w=v0,C=Q8;(m.subtreeFlags&10256)!==0||(m.flags&10256)!==0?eo=5:(eo=0,Hx=Dh=null,hT(h,h.pendingLanes));var M=h.pendingLanes;if(M===0&&(Ih=null),Gr(w),m=m.stateNode,ft&&typeof ft.onCommitFiberRoot=="function")try{ft.onCommitFiberRoot(rr,m,void 0,(m.current.flags&128)===128)}catch{}if(C!==null){m=ue.T,M=ae.p,ae.p=2,ue.T=null;try{for(var V=h.onRecoverableError,he=0;he<C.length;he++){var Fe=C[he];V(Fe.value,{componentStack:Fe.stack})}}finally{ue.T=m,ae.p=M}}(v0&3)!==0&&a2(),Cu(h),M=h.pendingLanes,(w&261930)!==0&&(M&42)!==0?h===L4?tg++:(tg=0,L4=h):tg=0,rg(0)}}function hT(h,m){(h.pooledCacheLanes&=m)===0&&(m=h.pooledCache,m!=null&&(h.pooledCache=null,Uf(m)))}function a2(){return cT(),dT(),uT(),fT()}function fT(){if(eo!==5)return!1;var h=Dh,m=D4;D4=0;var w=Gr(v0),C=ue.T,M=ae.p;try{ae.p=32>w?32:w,ue.T=null,w=M4,M4=null;var V=Dh,he=v0;if(eo=0,Hx=Dh=null,v0=0,($a&6)!==0)throw Error(n(331));var Fe=$a;if($a|=4,K8(V.current),V8(V,V.current,he,w),$a=Fe,rg(0,!1),ft&&typeof ft.onPostCommitFiberRoot=="function")try{ft.onPostCommitFiberRoot(rr,V)}catch{}return!0}finally{ae.p=M,ue.T=C,hT(h,m)}}function mT(h,m,w){m=$l(w,m),m=m4(h.stateNode,m,2),h=Wn(h,m,2),h!==null&&(cr(h,2),Cu(h))}function Ka(h,m,w){if(h.tag===3)mT(h,h,w);else for(;m!==null;){if(m.tag===3){mT(m,h,w);break}else if(m.tag===1){var C=m.stateNode;if(typeof m.type.getDerivedStateFromError=="function"||typeof C.componentDidCatch=="function"&&(Ih===null||!Ih.has(C))){h=$l(w,h),w=x8(2),C=Wn(m,w,2),C!==null&&(p8(w,C,m,h),cr(C,2),Cu(C));break}}m=m.return}}function B4(h,m,w){var C=h.pingCache;if(C===null){C=h.pingCache=new MX;var M=new Set;C.set(m,M)}else M=C.get(m),M===void 0&&(M=new Set,C.set(m,M));M.has(w)||(O4=!0,M.add(w),h=UX.bind(null,h,m,w),m.then(h,h))}function UX(h,m,w){var C=h.pingCache;C!==null&&C.delete(m),h.pingedLanes|=h.suspendedLanes&w,h.warmLanes&=~w,fs===h&&(ba&w)===w&&(ci===4||ci===3&&(ba&62914560)===ba&&300>fr()-Zv?($a&2)===0&&$x(h,0):P4|=w,qx===ba&&(qx=0)),Cu(h)}function xT(h,m){m===0&&(m=Xt()),h=Ld(h,m),h!==null&&(cr(h,m),Cu(h))}function zX(h){var m=h.memoizedState,w=0;m!==null&&(w=m.retryLane),xT(h,w)}function qX(h,m){var w=0;switch(h.tag){case 31:case 13:var C=h.stateNode,M=h.memoizedState;M!==null&&(w=M.retryLane);break;case 19:C=h.stateNode;break;case 22:C=h.stateNode._retryCache;break;default:throw Error(n(314))}C!==null&&C.delete(m),xT(h,w)}function HX(h,m){return ct(h,m)}var s2=null,Wx=null,U4=!1,i2=!1,z4=!1,Lh=0;function Cu(h){h!==Wx&&h.next===null&&(Wx===null?s2=Wx=h:Wx=Wx.next=h),i2=!0,U4||(U4=!0,VX())}function rg(h,m){if(!z4&&i2){z4=!0;do for(var w=!1,C=s2;C!==null;){if(h!==0){var M=C.pendingLanes;if(M===0)var V=0;else{var he=C.suspendedLanes,Fe=C.pingedLanes;V=(1<<31-yr(42|h)+1)-1,V&=M&~(he&~Fe),V=V&201326741?V&201326741|1:V?V|2:0}V!==0&&(w=!0,vT(C,V))}else V=ba,V=ur(C,C===fs?V:0,C.cancelPendingCommit!==null||C.timeoutHandle!==-1),(V&3)===0||Dr(C,V)||(w=!0,vT(C,V));C=C.next}while(w);z4=!1}}function $X(){pT()}function pT(){i2=U4=!1;var h=0;Lh!==0&&tY()&&(h=Lh);for(var m=fr(),w=null,C=s2;C!==null;){var M=C.next,V=gT(C,m);V===0?(C.next=null,w===null?s2=M:w.next=M,M===null&&(Wx=w)):(w=C,(h!==0||(V&3)!==0)&&(i2=!0)),C=M}eo!==0&&eo!==5||rg(h),Lh!==0&&(Lh=0)}function gT(h,m){for(var w=h.suspendedLanes,C=h.pingedLanes,M=h.expirationTimes,V=h.pendingLanes&-62914561;0<V;){var he=31-yr(V),Fe=1<<he,nt=M[he];nt===-1?((Fe&w)===0||(Fe&C)!==0)&&(M[he]=jr(Fe,m)):nt<=m&&(h.expiredLanes|=Fe),V&=~Fe}if(m=fs,w=ba,w=ur(h,h===m?w:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),C=h.callbackNode,w===0||h===m&&(Ga===2||Ga===9)||h.cancelPendingCommit!==null)return C!==null&&C!==null&&Ke(C),h.callbackNode=null,h.callbackPriority=0;if((w&3)===0||Dr(h,w)){if(m=w&-w,m===h.callbackPriority)return m;switch(C!==null&&Ke(C),Gr(w)){case 2:case 8:w=Sr;break;case 32:w=tr;break;case 268435456:w=Kt;break;default:w=tr}return C=bT.bind(null,h),w=ct(w,C),h.callbackPriority=m,h.callbackNode=w,m}return C!==null&&C!==null&&Ke(C),h.callbackPriority=2,h.callbackNode=null,2}function bT(h,m){if(eo!==0&&eo!==5)return h.callbackNode=null,h.callbackPriority=0,null;var w=h.callbackNode;if(a2()&&h.callbackNode!==w)return null;var C=ba;return C=ur(h,h===fs?C:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),C===0?null:(J8(h,C,m),gT(h,fr()),h.callbackNode!=null&&h.callbackNode===w?bT.bind(null,h):null)}function vT(h,m){if(a2())return null;J8(h,m,!0)}function VX(){nY(function(){($a&6)!==0?ct(sr,$X):pT()})}function q4(){if(Lh===0){var h=I;h===0&&(h=ir,ir<<=1,(ir&261888)===0&&(ir=256)),Lh=h}return Lh}function yT(h){return h==null||typeof h=="symbol"||typeof h=="boolean"?null:typeof h=="function"?h:gs(""+h)}function wT(h,m){var w=m.ownerDocument.createElement("input");return w.name=m.name,w.value=m.value,h.id&&w.setAttribute("form",h.id),m.parentNode.insertBefore(w,m),h=new FormData(h),w.parentNode.removeChild(w),h}function WX(h,m,w,C,M){if(m==="submit"&&w&&w.stateNode===M){var V=yT((M[Ue]||null).action),he=C.submitter;he&&(m=(m=he[Ue]||null)?yT(m.formAction):he.getAttribute("formAction"),m!==null&&(V=m,he=null));var Fe=new cs("action","action",null,C,M);h.push({event:Fe,listeners:[{instance:null,listener:function(){if(C.defaultPrevented){if(Lh!==0){var nt=he?wT(M,he):new FormData(M);l4(w,{pending:!0,data:nt,method:M.method,action:V},null,nt)}}else typeof V=="function"&&(Fe.preventDefault(),nt=he?wT(M,he):new FormData(M),l4(w,{pending:!0,data:nt,method:M.method,action:V},V,nt))},currentTarget:M}]})}}for(var H4=0;H4<Md.length;H4++){var $4=Md[H4],GX=$4.toLowerCase(),KX=$4[0].toUpperCase()+$4.slice(1);ql(GX,"on"+KX)}ql(_i,"onAnimationEnd"),ql(ri,"onAnimationIteration"),ql(Ea,"onAnimationStart"),ql("dblclick","onDoubleClick"),ql("focusin","onFocus"),ql("focusout","onBlur"),ql(ni,"onTransitionRun"),ql(po,"onTransitionStart"),ql(Dd,"onTransitionCancel"),ql(Zc,"onTransitionEnd"),ia("onMouseEnter",["mouseout","mouseover"]),ia("onMouseLeave",["mouseout","mouseover"]),ia("onPointerEnter",["pointerout","pointerover"]),ia("onPointerLeave",["pointerout","pointerover"]),Zr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Zr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Zr("onBeforeInput",["compositionend","keypress","textInput","paste"]),Zr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Zr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Zr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ng="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),XX=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ng));function kT(h,m){m=(m&4)!==0;for(var w=0;w<h.length;w++){var C=h[w],M=C.event;C=C.listeners;e:{var V=void 0;if(m)for(var he=C.length-1;0<=he;he--){var Fe=C[he],nt=Fe.instance,_t=Fe.currentTarget;if(Fe=Fe.listener,nt!==V&&M.isPropagationStopped())break e;V=Fe,M.currentTarget=_t;try{V(M)}catch(Gt){If(Gt)}M.currentTarget=null,V=nt}else for(he=0;he<C.length;he++){if(Fe=C[he],nt=Fe.instance,_t=Fe.currentTarget,Fe=Fe.listener,nt!==V&&M.isPropagationStopped())break e;V=Fe,M.currentTarget=_t;try{V(M)}catch(Gt){If(Gt)}M.currentTarget=null,V=nt}}}}function fa(h,m){var w=m[qe];w===void 0&&(w=m[qe]=new Set);var C=h+"__bubble";w.has(C)||(NT(m,h,2,!1),w.add(C))}function V4(h,m,w){var C=0;m&&(C|=4),NT(w,h,C,m)}var o2="_reactListening"+Math.random().toString(36).slice(2);function W4(h){if(!h[o2]){h[o2]=!0,Et.forEach(function(w){w!=="selectionchange"&&(XX.has(w)||V4(w,!1,h),V4(w,!0,h))});var m=h.nodeType===9?h:h.ownerDocument;m===null||m[o2]||(m[o2]=!0,V4("selectionchange",!1,m))}}function NT(h,m,w,C){switch(ZT(m)){case 2:var M=NY;break;case 8:M=_Y;break;default:M=o3}w=M.bind(null,m,w,h),M=void 0,!n0||m!=="touchstart"&&m!=="touchmove"&&m!=="wheel"||(M=!0),C?M!==void 0?h.addEventListener(m,w,{capture:!0,passive:M}):h.addEventListener(m,w,!0):M!==void 0?h.addEventListener(m,w,{passive:M}):h.addEventListener(m,w,!1)}function G4(h,m,w,C,M){var V=C;if((m&1)===0&&(m&2)===0&&C!==null)e:for(;;){if(C===null)return;var he=C.tag;if(he===3||he===4){var Fe=C.stateNode.containerInfo;if(Fe===M)break;if(he===4)for(he=C.return;he!==null;){var nt=he.tag;if((nt===3||nt===4)&&he.stateNode.containerInfo===M)return;he=he.return}for(;Fe!==null;){if(he=Tt(Fe),he===null)return;if(nt=he.tag,nt===5||nt===6||nt===26||nt===27){C=V=he;continue e}Fe=Fe.parentNode}}C=C.return}vh(function(){var _t=V,Gt=uo(w),er=[];e:{var Ot=Pf.get(h);if(Ot!==void 0){var Dt=cs,Kr=h;switch(h){case"keypress":if(Oo(w)===0)break e;case"keydown":case"keyup":Dt=oa;break;case"focusin":Kr="focus",Dt=mc;break;case"focusout":Kr="blur",Dt=mc;break;case"beforeblur":case"afterblur":Dt=mc;break;case"click":if(w.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Dt=Xn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Dt=Id;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Dt=Xs;break;case _i:case ri:case Ea:Dt=K;break;case Zc:Dt=ds;break;case"scroll":case"scrollend":Dt=Od;break;case"wheel":Dt=fo;break;case"copy":case"cut":case"paste":Dt=$e;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Dt=Cn;break;case"toggle":case"beforetoggle":Dt=Gc}var An=(m&4)!==0,as=!An&&(h==="scroll"||h==="scrollend"),gt=An?Ot!==null?Ot+"Capture":null:Ot;An=[];for(var ut=_t,Nt;ut!==null;){var Zt=ut;if(Nt=Zt.stateNode,Zt=Zt.tag,Zt!==5&&Zt!==26&&Zt!==27||Nt===null||gt===null||(Zt=hn(ut,gt),Zt!=null&&An.push(ag(ut,Zt,Nt))),as)break;ut=ut.return}0<An.length&&(Ot=new Dt(Ot,Kr,null,w,Gt),er.push({event:Ot,listeners:An}))}}if((m&7)===0){e:{if(Ot=h==="mouseover"||h==="pointerover",Dt=h==="mouseout"||h==="pointerout",Ot&&w!==za&&(Kr=w.relatedTarget||w.fromElement)&&(Tt(Kr)||Kr[de]))break e;if((Dt||Ot)&&(Ot=Gt.window===Gt?Gt:(Ot=Gt.ownerDocument)?Ot.defaultView||Ot.parentWindow:window,Dt?(Kr=w.relatedTarget||w.toElement,Dt=_t,Kr=Kr?Tt(Kr):null,Kr!==null&&(as=i(Kr),An=Kr.tag,Kr!==as||An!==5&&An!==27&&An!==6)&&(Kr=null)):(Dt=null,Kr=_t),Dt!==Kr)){if(An=Xn,Zt="onMouseLeave",gt="onMouseEnter",ut="mouse",(h==="pointerout"||h==="pointerover")&&(An=Cn,Zt="onPointerLeave",gt="onPointerEnter",ut="pointer"),as=Dt==null?Ot:Yt(Dt),Nt=Kr==null?Ot:Yt(Kr),Ot=new An(Zt,ut+"leave",Dt,w,Gt),Ot.target=as,Ot.relatedTarget=Nt,Zt=null,Tt(Gt)===_t&&(An=new An(gt,ut+"enter",Kr,w,Gt),An.target=Nt,An.relatedTarget=as,Zt=An),as=Zt,Dt&&Kr)t:{for(An=YX,gt=Dt,ut=Kr,Nt=0,Zt=gt;Zt;Zt=An(Zt))Nt++;Zt=0;for(var vn=ut;vn;vn=An(vn))Zt++;for(;0<Nt-Zt;)gt=An(gt),Nt--;for(;0<Zt-Nt;)ut=An(ut),Zt--;for(;Nt--;){if(gt===ut||ut!==null&&gt===ut.alternate){An=gt;break t}gt=An(gt),ut=An(ut)}An=null}else An=null;Dt!==null&&_T(er,Ot,Dt,An,!1),Kr!==null&&as!==null&&_T(er,as,Kr,An,!0)}}e:{if(Ot=_t?Yt(_t):window,Dt=Ot.nodeName&&Ot.nodeName.toLowerCase(),Dt==="select"||Dt==="input"&&Ot.type==="file")var Ma=ki;else if(mu(Ot))if(mo)Ma=_;else{Ma=p;var an=f}else Dt=Ot.nodeName,!Dt||Dt.toLowerCase()!=="input"||Ot.type!=="checkbox"&&Ot.type!=="radio"?_t&&_n(_t.elementType)&&(Ma=ki):Ma=v;if(Ma&&(Ma=Ma(h,_t))){ys(er,Ma,w,Gt);break e}an&&an(h,Ot,_t),h==="focusout"&&_t&&Ot.type==="number"&&_t.memoizedProps.value!=null&&fe(Ot,"number",Ot.value)}switch(an=_t?Yt(_t):window,h){case"focusin":(mu(an)||an.contentEditable==="true")&&(rt=an,lt=_t,xt=null);break;case"focusout":xt=lt=rt=null;break;case"mousedown":St=!0;break;case"contextmenu":case"mouseup":case"dragend":St=!1,Vt(er,w,Gt);break;case"selectionchange":if(He)break;case"keydown":case"keyup":Vt(er,w,Gt)}var Yn;if($o)e:{switch(h){case"compositionstart":var va="onCompositionStart";break e;case"compositionend":va="onCompositionEnd";break e;case"compositionupdate":va="onCompositionUpdate";break e}va=void 0}else zl?Qc(h,w)&&(va="onCompositionEnd"):h==="keydown"&&w.keyCode===229&&(va="onCompositionStart");va&&(Yc&&w.locale!=="ko"&&(zl||va!=="onCompositionStart"?va==="onCompositionEnd"&&zl&&(Yn=pl()):(ho=Gt,To="value"in ho?ho.value:ho.textContent,zl=!0)),an=l2(_t,va),0<an.length&&(va=new pt(va,h,null,w,Gt),er.push({event:va,listeners:an}),Yn?va.data=Yn:(Yn=Ul(w),Yn!==null&&(va.data=Yn)))),(Yn=Xc?Aa(h,w):Wo(h,w))&&(va=l2(_t,"onBeforeInput"),0<va.length&&(an=new pt("onBeforeInput","beforeinput",null,w,Gt),er.push({event:an,listeners:va}),an.data=Yn)),WX(er,h,_t,w,Gt)}kT(er,m)})}function ag(h,m,w){return{instance:h,listener:m,currentTarget:w}}function l2(h,m){for(var w=m+"Capture",C=[];h!==null;){var M=h,V=M.stateNode;if(M=M.tag,M!==5&&M!==26&&M!==27||V===null||(M=hn(h,w),M!=null&&C.unshift(ag(h,M,V)),M=hn(h,m),M!=null&&C.push(ag(h,M,V))),h.tag===3)return C;h=h.return}return[]}function YX(h){if(h===null)return null;do h=h.return;while(h&&h.tag!==5&&h.tag!==27);return h||null}function _T(h,m,w,C,M){for(var V=m._reactName,he=[];w!==null&&w!==C;){var Fe=w,nt=Fe.alternate,_t=Fe.stateNode;if(Fe=Fe.tag,nt!==null&&nt===C)break;Fe!==5&&Fe!==26&&Fe!==27||_t===null||(nt=_t,M?(_t=hn(w,V),_t!=null&&he.unshift(ag(w,_t,nt))):M||(_t=hn(w,V),_t!=null&&he.push(ag(w,_t,nt)))),w=w.return}he.length!==0&&h.push({event:m,listeners:he})}var QX=/\r\n?/g,ZX=/\u0000|\uFFFD/g;function ST(h){return(typeof h=="string"?h:""+h).replace(QX,`
`).replace(ZX,"")}function jT(h,m){return m=ST(m),ST(h)===m}function ns(h,m,w,C,M,V){switch(w){case"children":typeof C=="string"?m==="body"||m==="textarea"&&C===""||nn(h,C):(typeof C=="number"||typeof C=="bigint")&&m!=="body"&&nn(h,""+C);break;case"className":Rs(h,"class",C);break;case"tabIndex":Rs(h,"tabindex",C);break;case"dir":case"role":case"viewBox":case"width":case"height":Rs(h,w,C);break;case"style":Tr(h,C,V);break;case"data":if(m!=="object"){Rs(h,"data",C);break}case"src":case"href":if(C===""&&(m!=="a"||w!=="href")){h.removeAttribute(w);break}if(C==null||typeof C=="function"||typeof C=="symbol"||typeof C=="boolean"){h.removeAttribute(w);break}C=gs(""+C),h.setAttribute(w,C);break;case"action":case"formAction":if(typeof C=="function"){h.setAttribute(w,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof V=="function"&&(w==="formAction"?(m!=="input"&&ns(h,m,"name",M.name,M,null),ns(h,m,"formEncType",M.formEncType,M,null),ns(h,m,"formMethod",M.formMethod,M,null),ns(h,m,"formTarget",M.formTarget,M,null)):(ns(h,m,"encType",M.encType,M,null),ns(h,m,"method",M.method,M,null),ns(h,m,"target",M.target,M,null)));if(C==null||typeof C=="symbol"||typeof C=="boolean"){h.removeAttribute(w);break}C=gs(""+C),h.setAttribute(w,C);break;case"onClick":C!=null&&(h.onclick=aa);break;case"onScroll":C!=null&&fa("scroll",h);break;case"onScrollEnd":C!=null&&fa("scrollend",h);break;case"dangerouslySetInnerHTML":if(C!=null){if(typeof C!="object"||!("__html"in C))throw Error(n(61));if(w=C.__html,w!=null){if(M.children!=null)throw Error(n(60));h.innerHTML=w}}break;case"multiple":h.multiple=C&&typeof C!="function"&&typeof C!="symbol";break;case"muted":h.muted=C&&typeof C!="function"&&typeof C!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(C==null||typeof C=="function"||typeof C=="boolean"||typeof C=="symbol"){h.removeAttribute("xlink:href");break}w=gs(""+C),h.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",w);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":C!=null&&typeof C!="function"&&typeof C!="symbol"?h.setAttribute(w,""+C):h.removeAttribute(w);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":C&&typeof C!="function"&&typeof C!="symbol"?h.setAttribute(w,""):h.removeAttribute(w);break;case"capture":case"download":C===!0?h.setAttribute(w,""):C!==!1&&C!=null&&typeof C!="function"&&typeof C!="symbol"?h.setAttribute(w,C):h.removeAttribute(w);break;case"cols":case"rows":case"size":case"span":C!=null&&typeof C!="function"&&typeof C!="symbol"&&!isNaN(C)&&1<=C?h.setAttribute(w,C):h.removeAttribute(w);break;case"rowSpan":case"start":C==null||typeof C=="function"||typeof C=="symbol"||isNaN(C)?h.removeAttribute(w):h.setAttribute(w,C);break;case"popover":fa("beforetoggle",h),fa("toggle",h),ga(h,"popover",C);break;case"xlinkActuate":ra(h,"http://www.w3.org/1999/xlink","xlink:actuate",C);break;case"xlinkArcrole":ra(h,"http://www.w3.org/1999/xlink","xlink:arcrole",C);break;case"xlinkRole":ra(h,"http://www.w3.org/1999/xlink","xlink:role",C);break;case"xlinkShow":ra(h,"http://www.w3.org/1999/xlink","xlink:show",C);break;case"xlinkTitle":ra(h,"http://www.w3.org/1999/xlink","xlink:title",C);break;case"xlinkType":ra(h,"http://www.w3.org/1999/xlink","xlink:type",C);break;case"xmlBase":ra(h,"http://www.w3.org/XML/1998/namespace","xml:base",C);break;case"xmlLang":ra(h,"http://www.w3.org/XML/1998/namespace","xml:lang",C);break;case"xmlSpace":ra(h,"http://www.w3.org/XML/1998/namespace","xml:space",C);break;case"is":ga(h,"is",C);break;case"innerText":case"textContent":break;default:(!(2<w.length)||w[0]!=="o"&&w[0]!=="O"||w[1]!=="n"&&w[1]!=="N")&&(w=Ki.get(w)||w,ga(h,w,C))}}function K4(h,m,w,C,M,V){switch(w){case"style":Tr(h,C,V);break;case"dangerouslySetInnerHTML":if(C!=null){if(typeof C!="object"||!("__html"in C))throw Error(n(61));if(w=C.__html,w!=null){if(M.children!=null)throw Error(n(60));h.innerHTML=w}}break;case"children":typeof C=="string"?nn(h,C):(typeof C=="number"||typeof C=="bigint")&&nn(h,""+C);break;case"onScroll":C!=null&&fa("scroll",h);break;case"onScrollEnd":C!=null&&fa("scrollend",h);break;case"onClick":C!=null&&(h.onclick=aa);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!dn.hasOwnProperty(w))e:{if(w[0]==="o"&&w[1]==="n"&&(M=w.endsWith("Capture"),m=w.slice(2,M?w.length-7:void 0),V=h[Ue]||null,V=V!=null?V[w]:null,typeof V=="function"&&h.removeEventListener(m,V,M),typeof C=="function")){typeof V!="function"&&V!==null&&(w in h?h[w]=null:h.hasAttribute(w)&&h.removeAttribute(w)),h.addEventListener(m,C,M);break e}w in h?h[w]=C:C===!0?h.setAttribute(w,""):ga(h,w,C)}}}function Lo(h,m,w){switch(m){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":fa("error",h),fa("load",h);var C=!1,M=!1,V;for(V in w)if(w.hasOwnProperty(V)){var he=w[V];if(he!=null)switch(V){case"src":C=!0;break;case"srcSet":M=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,m));default:ns(h,m,V,he,w,null)}}M&&ns(h,m,"srcSet",w.srcSet,w,null),C&&ns(h,m,"src",w.src,w,null);return;case"input":fa("invalid",h);var Fe=V=he=M=null,nt=null,_t=null;for(C in w)if(w.hasOwnProperty(C)){var Gt=w[C];if(Gt!=null)switch(C){case"name":M=Gt;break;case"type":he=Gt;break;case"checked":nt=Gt;break;case"defaultChecked":_t=Gt;break;case"value":V=Gt;break;case"defaultValue":Fe=Gt;break;case"children":case"dangerouslySetInnerHTML":if(Gt!=null)throw Error(n(137,m));break;default:ns(h,m,C,Gt,w,null)}}yt(h,V,Fe,nt,_t,he,M,!1);return;case"select":fa("invalid",h),C=he=V=null;for(M in w)if(w.hasOwnProperty(M)&&(Fe=w[M],Fe!=null))switch(M){case"value":V=Fe;break;case"defaultValue":he=Fe;break;case"multiple":C=Fe;default:ns(h,m,M,Fe,w,null)}m=V,w=he,h.multiple=!!C,m!=null?vt(h,!!C,m,!1):w!=null&&vt(h,!!C,w,!0);return;case"textarea":fa("invalid",h),V=M=C=null;for(he in w)if(w.hasOwnProperty(he)&&(Fe=w[he],Fe!=null))switch(he){case"value":C=Fe;break;case"defaultValue":M=Fe;break;case"children":V=Fe;break;case"dangerouslySetInnerHTML":if(Fe!=null)throw Error(n(91));break;default:ns(h,m,he,Fe,w,null)}Or(h,C,M,V);return;case"option":for(nt in w)if(w.hasOwnProperty(nt)&&(C=w[nt],C!=null))switch(nt){case"selected":h.selected=C&&typeof C!="function"&&typeof C!="symbol";break;default:ns(h,m,nt,C,w,null)}return;case"dialog":fa("beforetoggle",h),fa("toggle",h),fa("cancel",h),fa("close",h);break;case"iframe":case"object":fa("load",h);break;case"video":case"audio":for(C=0;C<ng.length;C++)fa(ng[C],h);break;case"image":fa("error",h),fa("load",h);break;case"details":fa("toggle",h);break;case"embed":case"source":case"link":fa("error",h),fa("load",h);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(_t in w)if(w.hasOwnProperty(_t)&&(C=w[_t],C!=null))switch(_t){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,m));default:ns(h,m,_t,C,w,null)}return;default:if(_n(m)){for(Gt in w)w.hasOwnProperty(Gt)&&(C=w[Gt],C!==void 0&&K4(h,m,Gt,C,w,void 0));return}}for(Fe in w)w.hasOwnProperty(Fe)&&(C=w[Fe],C!=null&&ns(h,m,Fe,C,w,null))}function JX(h,m,w,C){switch(m){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var M=null,V=null,he=null,Fe=null,nt=null,_t=null,Gt=null;for(Dt in w){var er=w[Dt];if(w.hasOwnProperty(Dt)&&er!=null)switch(Dt){case"checked":break;case"value":break;case"defaultValue":nt=er;default:C.hasOwnProperty(Dt)||ns(h,m,Dt,null,C,er)}}for(var Ot in C){var Dt=C[Ot];if(er=w[Ot],C.hasOwnProperty(Ot)&&(Dt!=null||er!=null))switch(Ot){case"type":V=Dt;break;case"name":M=Dt;break;case"checked":_t=Dt;break;case"defaultChecked":Gt=Dt;break;case"value":he=Dt;break;case"defaultValue":Fe=Dt;break;case"children":case"dangerouslySetInnerHTML":if(Dt!=null)throw Error(n(137,m));break;default:Dt!==er&&ns(h,m,Ot,Dt,C,er)}}ps(h,he,Fe,nt,_t,Gt,V,M);return;case"select":Dt=he=Fe=Ot=null;for(V in w)if(nt=w[V],w.hasOwnProperty(V)&&nt!=null)switch(V){case"value":break;case"multiple":Dt=nt;default:C.hasOwnProperty(V)||ns(h,m,V,null,C,nt)}for(M in C)if(V=C[M],nt=w[M],C.hasOwnProperty(M)&&(V!=null||nt!=null))switch(M){case"value":Ot=V;break;case"defaultValue":Fe=V;break;case"multiple":he=V;default:V!==nt&&ns(h,m,M,V,C,nt)}m=Fe,w=he,C=Dt,Ot!=null?vt(h,!!w,Ot,!1):!!C!=!!w&&(m!=null?vt(h,!!w,m,!0):vt(h,!!w,w?[]:"",!1));return;case"textarea":Dt=Ot=null;for(Fe in w)if(M=w[Fe],w.hasOwnProperty(Fe)&&M!=null&&!C.hasOwnProperty(Fe))switch(Fe){case"value":break;case"children":break;default:ns(h,m,Fe,null,C,M)}for(he in C)if(M=C[he],V=w[he],C.hasOwnProperty(he)&&(M!=null||V!=null))switch(he){case"value":Ot=M;break;case"defaultValue":Dt=M;break;case"children":break;case"dangerouslySetInnerHTML":if(M!=null)throw Error(n(91));break;default:M!==V&&ns(h,m,he,M,C,V)}wr(h,Ot,Dt);return;case"option":for(var Kr in w)if(Ot=w[Kr],w.hasOwnProperty(Kr)&&Ot!=null&&!C.hasOwnProperty(Kr))switch(Kr){case"selected":h.selected=!1;break;default:ns(h,m,Kr,null,C,Ot)}for(nt in C)if(Ot=C[nt],Dt=w[nt],C.hasOwnProperty(nt)&&Ot!==Dt&&(Ot!=null||Dt!=null))switch(nt){case"selected":h.selected=Ot&&typeof Ot!="function"&&typeof Ot!="symbol";break;default:ns(h,m,nt,Ot,C,Dt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var An in w)Ot=w[An],w.hasOwnProperty(An)&&Ot!=null&&!C.hasOwnProperty(An)&&ns(h,m,An,null,C,Ot);for(_t in C)if(Ot=C[_t],Dt=w[_t],C.hasOwnProperty(_t)&&Ot!==Dt&&(Ot!=null||Dt!=null))switch(_t){case"children":case"dangerouslySetInnerHTML":if(Ot!=null)throw Error(n(137,m));break;default:ns(h,m,_t,Ot,C,Dt)}return;default:if(_n(m)){for(var as in w)Ot=w[as],w.hasOwnProperty(as)&&Ot!==void 0&&!C.hasOwnProperty(as)&&K4(h,m,as,void 0,C,Ot);for(Gt in C)Ot=C[Gt],Dt=w[Gt],!C.hasOwnProperty(Gt)||Ot===Dt||Ot===void 0&&Dt===void 0||K4(h,m,Gt,Ot,C,Dt);return}}for(var gt in w)Ot=w[gt],w.hasOwnProperty(gt)&&Ot!=null&&!C.hasOwnProperty(gt)&&ns(h,m,gt,null,C,Ot);for(er in C)Ot=C[er],Dt=w[er],!C.hasOwnProperty(er)||Ot===Dt||Ot==null&&Dt==null||ns(h,m,er,Ot,C,Dt)}function CT(h){switch(h){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function eY(){if(typeof performance.getEntriesByType=="function"){for(var h=0,m=0,w=performance.getEntriesByType("resource"),C=0;C<w.length;C++){var M=w[C],V=M.transferSize,he=M.initiatorType,Fe=M.duration;if(V&&Fe&&CT(he)){for(he=0,Fe=M.responseEnd,C+=1;C<w.length;C++){var nt=w[C],_t=nt.startTime;if(_t>Fe)break;var Gt=nt.transferSize,er=nt.initiatorType;Gt&&CT(er)&&(nt=nt.responseEnd,he+=Gt*(nt<Fe?1:(Fe-_t)/(nt-_t)))}if(--C,m+=8*(V+he)/(M.duration/1e3),h++,10<h)break}}if(0<h)return m/h/1e6}return navigator.connection&&(h=navigator.connection.downlink,typeof h=="number")?h:5}var X4=null,Y4=null;function c2(h){return h.nodeType===9?h:h.ownerDocument}function AT(h){switch(h){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ET(h,m){if(h===0)switch(m){case"svg":return 1;case"math":return 2;default:return 0}return h===1&&m==="foreignObject"?0:h}function Q4(h,m){return h==="textarea"||h==="noscript"||typeof m.children=="string"||typeof m.children=="number"||typeof m.children=="bigint"||typeof m.dangerouslySetInnerHTML=="object"&&m.dangerouslySetInnerHTML!==null&&m.dangerouslySetInnerHTML.__html!=null}var Z4=null;function tY(){var h=window.event;return h&&h.type==="popstate"?h===Z4?!1:(Z4=h,!0):(Z4=null,!1)}var TT=typeof setTimeout=="function"?setTimeout:void 0,rY=typeof clearTimeout=="function"?clearTimeout:void 0,OT=typeof Promise=="function"?Promise:void 0,nY=typeof queueMicrotask=="function"?queueMicrotask:typeof OT<"u"?function(h){return OT.resolve(null).then(h).catch(aY)}:TT;function aY(h){setTimeout(function(){throw h})}function Rh(h){return h==="head"}function PT(h,m){var w=m,C=0;do{var M=w.nextSibling;if(h.removeChild(w),M&&M.nodeType===8)if(w=M.data,w==="/$"||w==="/&"){if(C===0){h.removeChild(M),Yx(m);return}C--}else if(w==="$"||w==="$?"||w==="$~"||w==="$!"||w==="&")C++;else if(w==="html")sg(h.ownerDocument.documentElement);else if(w==="head"){w=h.ownerDocument.head,sg(w);for(var V=w.firstChild;V;){var he=V.nextSibling,Fe=V.nodeName;V[Xe]||Fe==="SCRIPT"||Fe==="STYLE"||Fe==="LINK"&&V.rel.toLowerCase()==="stylesheet"||w.removeChild(V),V=he}}else w==="body"&&sg(h.ownerDocument.body);w=M}while(w);Yx(m)}function IT(h,m){var w=h;h=0;do{var C=w.nextSibling;if(w.nodeType===1?m?(w._stashedDisplay=w.style.display,w.style.display="none"):(w.style.display=w._stashedDisplay||"",w.getAttribute("style")===""&&w.removeAttribute("style")):w.nodeType===3&&(m?(w._stashedText=w.nodeValue,w.nodeValue=""):w.nodeValue=w._stashedText||""),C&&C.nodeType===8)if(w=C.data,w==="/$"){if(h===0)break;h--}else w!=="$"&&w!=="$?"&&w!=="$~"&&w!=="$!"||h++;w=C}while(w)}function J4(h){var m=h.firstChild;for(m&&m.nodeType===10&&(m=m.nextSibling);m;){var w=m;switch(m=m.nextSibling,w.nodeName){case"HTML":case"HEAD":case"BODY":J4(w),mt(w);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(w.rel.toLowerCase()==="stylesheet")continue}h.removeChild(w)}}function sY(h,m,w,C){for(;h.nodeType===1;){var M=w;if(h.nodeName.toLowerCase()!==m.toLowerCase()){if(!C&&(h.nodeName!=="INPUT"||h.type!=="hidden"))break}else if(C){if(!h[Xe])switch(m){case"meta":if(!h.hasAttribute("itemprop"))break;return h;case"link":if(V=h.getAttribute("rel"),V==="stylesheet"&&h.hasAttribute("data-precedence"))break;if(V!==M.rel||h.getAttribute("href")!==(M.href==null||M.href===""?null:M.href)||h.getAttribute("crossorigin")!==(M.crossOrigin==null?null:M.crossOrigin)||h.getAttribute("title")!==(M.title==null?null:M.title))break;return h;case"style":if(h.hasAttribute("data-precedence"))break;return h;case"script":if(V=h.getAttribute("src"),(V!==(M.src==null?null:M.src)||h.getAttribute("type")!==(M.type==null?null:M.type)||h.getAttribute("crossorigin")!==(M.crossOrigin==null?null:M.crossOrigin))&&V&&h.hasAttribute("async")&&!h.hasAttribute("itemprop"))break;return h;default:return h}}else if(m==="input"&&h.type==="hidden"){var V=M.name==null?null:""+M.name;if(M.type==="hidden"&&h.getAttribute("name")===V)return h}else return h;if(h=rd(h.nextSibling),h===null)break}return null}function iY(h,m,w){if(m==="")return null;for(;h.nodeType!==3;)if((h.nodeType!==1||h.nodeName!=="INPUT"||h.type!=="hidden")&&!w||(h=rd(h.nextSibling),h===null))return null;return h}function DT(h,m){for(;h.nodeType!==8;)if((h.nodeType!==1||h.nodeName!=="INPUT"||h.type!=="hidden")&&!m||(h=rd(h.nextSibling),h===null))return null;return h}function e3(h){return h.data==="$?"||h.data==="$~"}function t3(h){return h.data==="$!"||h.data==="$?"&&h.ownerDocument.readyState!=="loading"}function oY(h,m){var w=h.ownerDocument;if(h.data==="$~")h._reactRetry=m;else if(h.data!=="$?"||w.readyState!=="loading")m();else{var C=function(){m(),w.removeEventListener("DOMContentLoaded",C)};w.addEventListener("DOMContentLoaded",C),h._reactRetry=C}}function rd(h){for(;h!=null;h=h.nextSibling){var m=h.nodeType;if(m===1||m===3)break;if(m===8){if(m=h.data,m==="$"||m==="$!"||m==="$?"||m==="$~"||m==="&"||m==="F!"||m==="F")break;if(m==="/$"||m==="/&")return null}}return h}var r3=null;function MT(h){h=h.nextSibling;for(var m=0;h;){if(h.nodeType===8){var w=h.data;if(w==="/$"||w==="/&"){if(m===0)return rd(h.nextSibling);m--}else w!=="$"&&w!=="$!"&&w!=="$?"&&w!=="$~"&&w!=="&"||m++}h=h.nextSibling}return null}function LT(h){h=h.previousSibling;for(var m=0;h;){if(h.nodeType===8){var w=h.data;if(w==="$"||w==="$!"||w==="$?"||w==="$~"||w==="&"){if(m===0)return h;m--}else w!=="/$"&&w!=="/&"||m++}h=h.previousSibling}return null}function RT(h,m,w){switch(m=c2(w),h){case"html":if(h=m.documentElement,!h)throw Error(n(452));return h;case"head":if(h=m.head,!h)throw Error(n(453));return h;case"body":if(h=m.body,!h)throw Error(n(454));return h;default:throw Error(n(451))}}function sg(h){for(var m=h.attributes;m.length;)h.removeAttributeNode(m[0]);mt(h)}var nd=new Map,FT=new Set;function d2(h){return typeof h.getRootNode=="function"?h.getRootNode():h.nodeType===9?h:h.ownerDocument}var y0=ae.d;ae.d={f:lY,r:cY,D:dY,C:uY,L:hY,m:fY,X:xY,S:mY,M:pY};function lY(){var h=y0.f(),m=t2();return h||m}function cY(h){var m=Rt(h);m!==null&&m.tag===5&&m.type==="form"?t8(m):y0.r(h)}var Gx=typeof document>"u"?null:document;function BT(h,m,w){var C=Gx;if(C&&typeof m=="string"&&m){var M=Mn(m);M='link[rel="'+h+'"][href="'+M+'"]',typeof w=="string"&&(M+='[crossorigin="'+w+'"]'),FT.has(M)||(FT.add(M),h={rel:h,crossOrigin:w,href:m},C.querySelector(M)===null&&(m=C.createElement("link"),Lo(m,"link",h),Cr(m),C.head.appendChild(m)))}}function dY(h){y0.D(h),BT("dns-prefetch",h,null)}function uY(h,m){y0.C(h,m),BT("preconnect",h,m)}function hY(h,m,w){y0.L(h,m,w);var C=Gx;if(C&&h&&m){var M='link[rel="preload"][as="'+Mn(m)+'"]';m==="image"&&w&&w.imageSrcSet?(M+='[imagesrcset="'+Mn(w.imageSrcSet)+'"]',typeof w.imageSizes=="string"&&(M+='[imagesizes="'+Mn(w.imageSizes)+'"]')):M+='[href="'+Mn(h)+'"]';var V=M;switch(m){case"style":V=Kx(h);break;case"script":V=Xx(h)}nd.has(V)||(h=x({rel:"preload",href:m==="image"&&w&&w.imageSrcSet?void 0:h,as:m},w),nd.set(V,h),C.querySelector(M)!==null||m==="style"&&C.querySelector(ig(V))||m==="script"&&C.querySelector(og(V))||(m=C.createElement("link"),Lo(m,"link",h),Cr(m),C.head.appendChild(m)))}}function fY(h,m){y0.m(h,m);var w=Gx;if(w&&h){var C=m&&typeof m.as=="string"?m.as:"script",M='link[rel="modulepreload"][as="'+Mn(C)+'"][href="'+Mn(h)+'"]',V=M;switch(C){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":V=Xx(h)}if(!nd.has(V)&&(h=x({rel:"modulepreload",href:h},m),nd.set(V,h),w.querySelector(M)===null)){switch(C){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(w.querySelector(og(V)))return}C=w.createElement("link"),Lo(C,"link",h),Cr(C),w.head.appendChild(C)}}}function mY(h,m,w){y0.S(h,m,w);var C=Gx;if(C&&h){var M=or(C).hoistableStyles,V=Kx(h);m=m||"default";var he=M.get(V);if(!he){var Fe={loading:0,preload:null};if(he=C.querySelector(ig(V)))Fe.loading=5;else{h=x({rel:"stylesheet",href:h,"data-precedence":m},w),(w=nd.get(V))&&n3(h,w);var nt=he=C.createElement("link");Cr(nt),Lo(nt,"link",h),nt._p=new Promise(function(_t,Gt){nt.onload=_t,nt.onerror=Gt}),nt.addEventListener("load",function(){Fe.loading|=1}),nt.addEventListener("error",function(){Fe.loading|=2}),Fe.loading|=4,u2(he,m,C)}he={type:"stylesheet",instance:he,count:1,state:Fe},M.set(V,he)}}}function xY(h,m){y0.X(h,m);var w=Gx;if(w&&h){var C=or(w).hoistableScripts,M=Xx(h),V=C.get(M);V||(V=w.querySelector(og(M)),V||(h=x({src:h,async:!0},m),(m=nd.get(M))&&a3(h,m),V=w.createElement("script"),Cr(V),Lo(V,"link",h),w.head.appendChild(V)),V={type:"script",instance:V,count:1,state:null},C.set(M,V))}}function pY(h,m){y0.M(h,m);var w=Gx;if(w&&h){var C=or(w).hoistableScripts,M=Xx(h),V=C.get(M);V||(V=w.querySelector(og(M)),V||(h=x({src:h,async:!0,type:"module"},m),(m=nd.get(M))&&a3(h,m),V=w.createElement("script"),Cr(V),Lo(V,"link",h),w.head.appendChild(V)),V={type:"script",instance:V,count:1,state:null},C.set(M,V))}}function UT(h,m,w,C){var M=(M=Y.current)?d2(M):null;if(!M)throw Error(n(446));switch(h){case"meta":case"title":return null;case"style":return typeof w.precedence=="string"&&typeof w.href=="string"?(m=Kx(w.href),w=or(M).hoistableStyles,C=w.get(m),C||(C={type:"style",instance:null,count:0,state:null},w.set(m,C)),C):{type:"void",instance:null,count:0,state:null};case"link":if(w.rel==="stylesheet"&&typeof w.href=="string"&&typeof w.precedence=="string"){h=Kx(w.href);var V=or(M).hoistableStyles,he=V.get(h);if(he||(M=M.ownerDocument||M,he={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},V.set(h,he),(V=M.querySelector(ig(h)))&&!V._p&&(he.instance=V,he.state.loading=5),nd.has(h)||(w={rel:"preload",as:"style",href:w.href,crossOrigin:w.crossOrigin,integrity:w.integrity,media:w.media,hrefLang:w.hrefLang,referrerPolicy:w.referrerPolicy},nd.set(h,w),V||gY(M,h,w,he.state))),m&&C===null)throw Error(n(528,""));return he}if(m&&C!==null)throw Error(n(529,""));return null;case"script":return m=w.async,w=w.src,typeof w=="string"&&m&&typeof m!="function"&&typeof m!="symbol"?(m=Xx(w),w=or(M).hoistableScripts,C=w.get(m),C||(C={type:"script",instance:null,count:0,state:null},w.set(m,C)),C):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,h))}}function Kx(h){return'href="'+Mn(h)+'"'}function ig(h){return'link[rel="stylesheet"]['+h+"]"}function zT(h){return x({},h,{"data-precedence":h.precedence,precedence:null})}function gY(h,m,w,C){h.querySelector('link[rel="preload"][as="style"]['+m+"]")?C.loading=1:(m=h.createElement("link"),C.preload=m,m.addEventListener("load",function(){return C.loading|=1}),m.addEventListener("error",function(){return C.loading|=2}),Lo(m,"link",w),Cr(m),h.head.appendChild(m))}function Xx(h){return'[src="'+Mn(h)+'"]'}function og(h){return"script[async]"+h}function qT(h,m,w){if(m.count++,m.instance===null)switch(m.type){case"style":var C=h.querySelector('style[data-href~="'+Mn(w.href)+'"]');if(C)return m.instance=C,Cr(C),C;var M=x({},w,{"data-href":w.href,"data-precedence":w.precedence,href:null,precedence:null});return C=(h.ownerDocument||h).createElement("style"),Cr(C),Lo(C,"style",M),u2(C,w.precedence,h),m.instance=C;case"stylesheet":M=Kx(w.href);var V=h.querySelector(ig(M));if(V)return m.state.loading|=4,m.instance=V,Cr(V),V;C=zT(w),(M=nd.get(M))&&n3(C,M),V=(h.ownerDocument||h).createElement("link"),Cr(V);var he=V;return he._p=new Promise(function(Fe,nt){he.onload=Fe,he.onerror=nt}),Lo(V,"link",C),m.state.loading|=4,u2(V,w.precedence,h),m.instance=V;case"script":return V=Xx(w.src),(M=h.querySelector(og(V)))?(m.instance=M,Cr(M),M):(C=w,(M=nd.get(V))&&(C=x({},w),a3(C,M)),h=h.ownerDocument||h,M=h.createElement("script"),Cr(M),Lo(M,"link",C),h.head.appendChild(M),m.instance=M);case"void":return null;default:throw Error(n(443,m.type))}else m.type==="stylesheet"&&(m.state.loading&4)===0&&(C=m.instance,m.state.loading|=4,u2(C,w.precedence,h));return m.instance}function u2(h,m,w){for(var C=w.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),M=C.length?C[C.length-1]:null,V=M,he=0;he<C.length;he++){var Fe=C[he];if(Fe.dataset.precedence===m)V=Fe;else if(V!==M)break}V?V.parentNode.insertBefore(h,V.nextSibling):(m=w.nodeType===9?w.head:w,m.insertBefore(h,m.firstChild))}function n3(h,m){h.crossOrigin==null&&(h.crossOrigin=m.crossOrigin),h.referrerPolicy==null&&(h.referrerPolicy=m.referrerPolicy),h.title==null&&(h.title=m.title)}function a3(h,m){h.crossOrigin==null&&(h.crossOrigin=m.crossOrigin),h.referrerPolicy==null&&(h.referrerPolicy=m.referrerPolicy),h.integrity==null&&(h.integrity=m.integrity)}var h2=null;function HT(h,m,w){if(h2===null){var C=new Map,M=h2=new Map;M.set(w,C)}else M=h2,C=M.get(w),C||(C=new Map,M.set(w,C));if(C.has(h))return C;for(C.set(h,null),w=w.getElementsByTagName(h),M=0;M<w.length;M++){var V=w[M];if(!(V[Xe]||V[Ce]||h==="link"&&V.getAttribute("rel")==="stylesheet")&&V.namespaceURI!=="http://www.w3.org/2000/svg"){var he=V.getAttribute(m)||"";he=h+he;var Fe=C.get(he);Fe?Fe.push(V):C.set(he,[V])}}return C}function $T(h,m,w){h=h.ownerDocument||h,h.head.insertBefore(w,m==="title"?h.querySelector("head > title"):null)}function bY(h,m,w){if(w===1||m.itemProp!=null)return!1;switch(h){case"meta":case"title":return!0;case"style":if(typeof m.precedence!="string"||typeof m.href!="string"||m.href==="")break;return!0;case"link":if(typeof m.rel!="string"||typeof m.href!="string"||m.href===""||m.onLoad||m.onError)break;switch(m.rel){case"stylesheet":return h=m.disabled,typeof m.precedence=="string"&&h==null;default:return!0}case"script":if(m.async&&typeof m.async!="function"&&typeof m.async!="symbol"&&!m.onLoad&&!m.onError&&m.src&&typeof m.src=="string")return!0}return!1}function VT(h){return!(h.type==="stylesheet"&&(h.state.loading&3)===0)}function vY(h,m,w,C){if(w.type==="stylesheet"&&(typeof C.media!="string"||matchMedia(C.media).matches!==!1)&&(w.state.loading&4)===0){if(w.instance===null){var M=Kx(C.href),V=m.querySelector(ig(M));if(V){m=V._p,m!==null&&typeof m=="object"&&typeof m.then=="function"&&(h.count++,h=f2.bind(h),m.then(h,h)),w.state.loading|=4,w.instance=V,Cr(V);return}V=m.ownerDocument||m,C=zT(C),(M=nd.get(M))&&n3(C,M),V=V.createElement("link"),Cr(V);var he=V;he._p=new Promise(function(Fe,nt){he.onload=Fe,he.onerror=nt}),Lo(V,"link",C),w.instance=V}h.stylesheets===null&&(h.stylesheets=new Map),h.stylesheets.set(w,m),(m=w.state.preload)&&(w.state.loading&3)===0&&(h.count++,w=f2.bind(h),m.addEventListener("load",w),m.addEventListener("error",w))}}var s3=0;function yY(h,m){return h.stylesheets&&h.count===0&&x2(h,h.stylesheets),0<h.count||0<h.imgCount?function(w){var C=setTimeout(function(){if(h.stylesheets&&x2(h,h.stylesheets),h.unsuspend){var V=h.unsuspend;h.unsuspend=null,V()}},6e4+m);0<h.imgBytes&&s3===0&&(s3=62500*eY());var M=setTimeout(function(){if(h.waitingForImages=!1,h.count===0&&(h.stylesheets&&x2(h,h.stylesheets),h.unsuspend)){var V=h.unsuspend;h.unsuspend=null,V()}},(h.imgBytes>s3?50:800)+m);return h.unsuspend=w,function(){h.unsuspend=null,clearTimeout(C),clearTimeout(M)}}:null}function f2(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)x2(this,this.stylesheets);else if(this.unsuspend){var h=this.unsuspend;this.unsuspend=null,h()}}}var m2=null;function x2(h,m){h.stylesheets=null,h.unsuspend!==null&&(h.count++,m2=new Map,m.forEach(wY,h),m2=null,f2.call(h))}function wY(h,m){if(!(m.state.loading&4)){var w=m2.get(h);if(w)var C=w.get(null);else{w=new Map,m2.set(h,w);for(var M=h.querySelectorAll("link[data-precedence],style[data-precedence]"),V=0;V<M.length;V++){var he=M[V];(he.nodeName==="LINK"||he.getAttribute("media")!=="not all")&&(w.set(he.dataset.precedence,he),C=he)}C&&w.set(null,C)}M=m.instance,he=M.getAttribute("data-precedence"),V=w.get(he)||C,V===C&&w.set(null,M),w.set(he,M),this.count++,C=f2.bind(this),M.addEventListener("load",C),M.addEventListener("error",C),V?V.parentNode.insertBefore(M,V.nextSibling):(h=h.nodeType===9?h.head:h,h.insertBefore(M,h.firstChild)),m.state.loading|=4}}var lg={$$typeof:A,Provider:null,Consumer:null,_currentValue:pe,_currentValue2:pe,_threadCount:0};function kY(h,m,w,C,M,V,he,Fe,nt){this.tag=1,this.containerInfo=h,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Wr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Wr(0),this.hiddenUpdates=Wr(null),this.identifierPrefix=C,this.onUncaughtError=M,this.onCaughtError=V,this.onRecoverableError=he,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=nt,this.incompleteTransitions=new Map}function WT(h,m,w,C,M,V,he,Fe,nt,_t,Gt,er){return h=new kY(h,m,w,he,nt,_t,Gt,er,Fe),m=1,V===!0&&(m|=24),V=bo(3,null,null,m),h.current=V,V.stateNode=h,m=Sh(),m.refCount++,h.pooledCache=m,m.refCount++,V.memoizedState={element:C,isDehydrated:w,cache:m},_r(V),h}function GT(h){return h?(h=Xi,h):Xi}function KT(h,m,w,C,M,V){M=GT(M),C.context===null?C.context=M:C.pendingContext=M,C=jn(m),C.payload={element:w},V=V===void 0?null:V,V!==null&&(C.callback=V),w=Wn(h,C,m),w!==null&&(tc(w,h,m),qa(w,h,m))}function XT(h,m){if(h=h.memoizedState,h!==null&&h.dehydrated!==null){var w=h.retryLane;h.retryLane=w!==0&&w<m?w:m}}function i3(h,m){XT(h,m),(h=h.alternate)&&XT(h,m)}function YT(h){if(h.tag===13||h.tag===31){var m=Ld(h,67108864);m!==null&&tc(m,h,67108864),i3(h,67108864)}}function QT(h){if(h.tag===13||h.tag===31){var m=bc();m=Mr(m);var w=Ld(h,m);w!==null&&tc(w,h,m),i3(h,m)}}var p2=!0;function NY(h,m,w,C){var M=ue.T;ue.T=null;var V=ae.p;try{ae.p=2,o3(h,m,w,C)}finally{ae.p=V,ue.T=M}}function _Y(h,m,w,C){var M=ue.T;ue.T=null;var V=ae.p;try{ae.p=8,o3(h,m,w,C)}finally{ae.p=V,ue.T=M}}function o3(h,m,w,C){if(p2){var M=l3(C);if(M===null)G4(h,m,C,g2,w),JT(h,C);else if(jY(M,h,m,w,C))C.stopPropagation();else if(JT(h,C),m&4&&-1<SY.indexOf(h)){for(;M!==null;){var V=Rt(M);if(V!==null)switch(V.tag){case 3:if(V=V.stateNode,V.current.memoizedState.isDehydrated){var he=At(V.pendingLanes);if(he!==0){var Fe=V;for(Fe.pendingLanes|=2,Fe.entangledLanes|=2;he;){var nt=1<<31-yr(he);Fe.entanglements[1]|=nt,he&=~nt}Cu(V),($a&6)===0&&(Jv=fr()+500,rg(0))}}break;case 31:case 13:Fe=Ld(V,2),Fe!==null&&tc(Fe,V,2),t2(),i3(V,2)}if(V=l3(C),V===null&&G4(h,m,C,g2,w),V===M)break;M=V}M!==null&&C.stopPropagation()}else G4(h,m,C,null,w)}}function l3(h){return h=uo(h),c3(h)}var g2=null;function c3(h){if(g2=null,h=Tt(h),h!==null){var m=i(h);if(m===null)h=null;else{var w=m.tag;if(w===13){if(h=o(m),h!==null)return h;h=null}else if(w===31){if(h=l(m),h!==null)return h;h=null}else if(w===3){if(m.stateNode.current.memoizedState.isDehydrated)return m.tag===3?m.stateNode.containerInfo:null;h=null}else m!==h&&(h=null)}}return g2=h,null}function ZT(h){switch(h){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(hr()){case sr:return 2;case Sr:return 8;case tr:case Jt:return 32;case Kt:return 268435456;default:return 32}default:return 32}}var d3=!1,Fh=null,Bh=null,Uh=null,cg=new Map,dg=new Map,zh=[],SY="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function JT(h,m){switch(h){case"focusin":case"focusout":Fh=null;break;case"dragenter":case"dragleave":Bh=null;break;case"mouseover":case"mouseout":Uh=null;break;case"pointerover":case"pointerout":cg.delete(m.pointerId);break;case"gotpointercapture":case"lostpointercapture":dg.delete(m.pointerId)}}function ug(h,m,w,C,M,V){return h===null||h.nativeEvent!==V?(h={blockedOn:m,domEventName:w,eventSystemFlags:C,nativeEvent:V,targetContainers:[M]},m!==null&&(m=Rt(m),m!==null&&YT(m)),h):(h.eventSystemFlags|=C,m=h.targetContainers,M!==null&&m.indexOf(M)===-1&&m.push(M),h)}function jY(h,m,w,C,M){switch(m){case"focusin":return Fh=ug(Fh,h,m,w,C,M),!0;case"dragenter":return Bh=ug(Bh,h,m,w,C,M),!0;case"mouseover":return Uh=ug(Uh,h,m,w,C,M),!0;case"pointerover":var V=M.pointerId;return cg.set(V,ug(cg.get(V)||null,h,m,w,C,M)),!0;case"gotpointercapture":return V=M.pointerId,dg.set(V,ug(dg.get(V)||null,h,m,w,C,M)),!0}return!1}function e7(h){var m=Tt(h.target);if(m!==null){var w=i(m);if(w!==null){if(m=w.tag,m===13){if(m=o(w),m!==null){h.blockedOn=m,Me(h.priority,function(){QT(w)});return}}else if(m===31){if(m=l(w),m!==null){h.blockedOn=m,Me(h.priority,function(){QT(w)});return}}else if(m===3&&w.stateNode.current.memoizedState.isDehydrated){h.blockedOn=w.tag===3?w.stateNode.containerInfo:null;return}}}h.blockedOn=null}function b2(h){if(h.blockedOn!==null)return!1;for(var m=h.targetContainers;0<m.length;){var w=l3(h.nativeEvent);if(w===null){w=h.nativeEvent;var C=new w.constructor(w.type,w);za=C,w.target.dispatchEvent(C),za=null}else return m=Rt(w),m!==null&&YT(m),h.blockedOn=w,!1;m.shift()}return!0}function t7(h,m,w){b2(h)&&w.delete(m)}function CY(){d3=!1,Fh!==null&&b2(Fh)&&(Fh=null),Bh!==null&&b2(Bh)&&(Bh=null),Uh!==null&&b2(Uh)&&(Uh=null),cg.forEach(t7),dg.forEach(t7)}function v2(h,m){h.blockedOn===m&&(h.blockedOn=null,d3||(d3=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,CY)))}var y2=null;function r7(h){y2!==h&&(y2=h,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){y2===h&&(y2=null);for(var m=0;m<h.length;m+=3){var w=h[m],C=h[m+1],M=h[m+2];if(typeof C!="function"){if(c3(C||w)===null)continue;break}var V=Rt(w);V!==null&&(h.splice(m,3),m-=3,l4(V,{pending:!0,data:M,method:w.method,action:C},C,M))}}))}function Yx(h){function m(nt){return v2(nt,h)}Fh!==null&&v2(Fh,h),Bh!==null&&v2(Bh,h),Uh!==null&&v2(Uh,h),cg.forEach(m),dg.forEach(m);for(var w=0;w<zh.length;w++){var C=zh[w];C.blockedOn===h&&(C.blockedOn=null)}for(;0<zh.length&&(w=zh[0],w.blockedOn===null);)e7(w),w.blockedOn===null&&zh.shift();if(w=(h.ownerDocument||h).$$reactFormReplay,w!=null)for(C=0;C<w.length;C+=3){var M=w[C],V=w[C+1],he=M[Ue]||null;if(typeof V=="function")he||r7(w);else if(he){var Fe=null;if(V&&V.hasAttribute("formAction")){if(M=V,he=V[Ue]||null)Fe=he.formAction;else if(c3(M)!==null)continue}else Fe=he.action;typeof Fe=="function"?w[C+1]=Fe:(w.splice(C,3),C-=3),r7(w)}}}function n7(){function h(V){V.canIntercept&&V.info==="react-transition"&&V.intercept({handler:function(){return new Promise(function(he){return M=he})},focusReset:"manual",scroll:"manual"})}function m(){M!==null&&(M(),M=null),C||setTimeout(w,20)}function w(){if(!C&&!navigation.transition){var V=navigation.currentEntry;V&&V.url!=null&&navigation.navigate(V.url,{state:V.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var C=!1,M=null;return navigation.addEventListener("navigate",h),navigation.addEventListener("navigatesuccess",m),navigation.addEventListener("navigateerror",m),setTimeout(w,100),function(){C=!0,navigation.removeEventListener("navigate",h),navigation.removeEventListener("navigatesuccess",m),navigation.removeEventListener("navigateerror",m),M!==null&&(M(),M=null)}}}function u3(h){this._internalRoot=h}w2.prototype.render=u3.prototype.render=function(h){var m=this._internalRoot;if(m===null)throw Error(n(409));var w=m.current,C=bc();KT(w,C,h,m,null,null)},w2.prototype.unmount=u3.prototype.unmount=function(){var h=this._internalRoot;if(h!==null){this._internalRoot=null;var m=h.containerInfo;KT(h.current,2,null,h,null,null),t2(),m[de]=null}};function w2(h){this._internalRoot=h}w2.prototype.unstable_scheduleHydration=function(h){if(h){var m=Ne();h={blockedOn:null,target:h,priority:m};for(var w=0;w<zh.length&&m!==0&&m<zh[w].priority;w++);zh.splice(w,0,h),w===0&&e7(h)}};var a7=t.version;if(a7!=="19.2.0")throw Error(n(527,a7,"19.2.0"));ae.findDOMNode=function(h){var m=h._reactInternals;if(m===void 0)throw typeof h.render=="function"?Error(n(188)):(h=Object.keys(h).join(","),Error(n(268,h)));return h=c(m),h=h!==null?u(h):null,h=h===null?null:h.stateNode,h};var AY={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:ue,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var k2=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!k2.isDisabled&&k2.supportsFiber)try{rr=k2.inject(AY),ft=k2}catch{}}return fg.createRoot=function(h,m){if(!a(h))throw Error(n(299));var w=!1,C="",M=u8,V=h8,he=f8;return m!=null&&(m.unstable_strictMode===!0&&(w=!0),m.identifierPrefix!==void 0&&(C=m.identifierPrefix),m.onUncaughtError!==void 0&&(M=m.onUncaughtError),m.onCaughtError!==void 0&&(V=m.onCaughtError),m.onRecoverableError!==void 0&&(he=m.onRecoverableError)),m=WT(h,1,!1,null,null,w,C,null,M,V,he,n7),h[de]=m.current,W4(h),new u3(m)},fg.hydrateRoot=function(h,m,w){if(!a(h))throw Error(n(299));var C=!1,M="",V=u8,he=h8,Fe=f8,nt=null;return w!=null&&(w.unstable_strictMode===!0&&(C=!0),w.identifierPrefix!==void 0&&(M=w.identifierPrefix),w.onUncaughtError!==void 0&&(V=w.onUncaughtError),w.onCaughtError!==void 0&&(he=w.onCaughtError),w.onRecoverableError!==void 0&&(Fe=w.onRecoverableError),w.formState!==void 0&&(nt=w.formState)),m=WT(h,1,!0,m,w??null,C,M,nt,V,he,Fe,n7),m.context=GT(null),w=m.current,C=bc(),C=Mr(C),M=jn(C),M.callback=null,Wn(w,M,C),w=C,m.current.lanes=w,cr(m,w),Cu(m),h[de]=m.current,W4(h),new w2(m)},fg.version="19.2.0",fg}var x7;function zY(){if(x7)return x3.exports;x7=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),x3.exports=UY(),x3.exports}var qY=zY();const HY=zc(qY);/**
 * react-router v7.9.5
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var p7="popstate";function $Y(e={}){function t(a,i){let{pathname:o="/",search:l="",hash:d=""}=ix(a.location.hash.substring(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),Z_("",{pathname:o,search:l,hash:d},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(a,i){let o=a.document.querySelector("base"),l="";if(o&&o.getAttribute("href")){let d=a.location.href,c=d.indexOf("#");l=c===-1?d:d.slice(0,c)}return l+"#"+(typeof i=="string"?i:ab(i))}function n(a,i){wd(a.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(i)})`)}return WY(t,r,n,e)}function Vs(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function wd(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function VY(){return Math.random().toString(36).substring(2,10)}function g7(e,t){return{usr:e.state,key:e.key,idx:t}}function Z_(e,t,r=null,n){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?ix(t):t,state:r,key:t&&t.key||n||VY()}}function ab({pathname:e="/",search:t="",hash:r=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function ix(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substring(n),e=e.substring(0,n)),e&&(t.pathname=e)}return t}function WY(e,t,r,n={}){let{window:a=document.defaultView,v5Compat:i=!1}=n,o=a.history,l="POP",d=null,c=u();c==null&&(c=0,o.replaceState({...o.state,idx:c},""));function u(){return(o.state||{idx:null}).idx}function x(){l="POP";let N=u(),S=N==null?null:N-c;c=N,d&&d({action:l,location:y.location,delta:S})}function b(N,S){l="PUSH";let O=Z_(y.location,N,S);r&&r(O,N),c=u()+1;let A=g7(O,c),P=y.createHref(O);try{o.pushState(A,"",P)}catch(q){if(q instanceof DOMException&&q.name==="DataCloneError")throw q;a.location.assign(P)}i&&d&&d({action:l,location:y.location,delta:1})}function g(N,S){l="REPLACE";let O=Z_(y.location,N,S);r&&r(O,N),c=u();let A=g7(O,c),P=y.createHref(O);o.replaceState(A,"",P),i&&d&&d({action:l,location:y.location,delta:0})}function k(N){return GY(N)}let y={get action(){return l},get location(){return e(a,o)},listen(N){if(d)throw new Error("A history only accepts one active listener");return a.addEventListener(p7,x),d=N,()=>{a.removeEventListener(p7,x),d=null}},createHref(N){return t(a,N)},createURL:k,encodeLocation(N){let S=k(N);return{pathname:S.pathname,search:S.search,hash:S.hash}},push:b,replace:g,go(N){return o.go(N)}};return y}function GY(e,t=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),Vs(r,"No window.location.(origin|href) available to create URL");let n=typeof e=="string"?e:ab(e);return n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=r+n),new URL(n,r)}function GF(e,t,r="/"){return KY(e,t,r,!1)}function KY(e,t,r,n){let a=typeof t=="string"?ix(t):t,i=J0(a.pathname||"/",r);if(i==null)return null;let o=KF(e);XY(o);let l=null;for(let d=0;l==null&&d<o.length;++d){let c=iQ(i);l=aQ(o[d],c,n)}return l}function KF(e,t=[],r=[],n="",a=!1){let i=(o,l,d=a,c)=>{let u={relativePath:c===void 0?o.path||"":c,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};if(u.relativePath.startsWith("/")){if(!u.relativePath.startsWith(n)&&d)return;Vs(u.relativePath.startsWith(n),`Absolute route path "${u.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),u.relativePath=u.relativePath.slice(n.length)}let x=z0([n,u.relativePath]),b=r.concat(u);o.children&&o.children.length>0&&(Vs(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${x}".`),KF(o.children,t,b,x,d)),!(o.path==null&&!o.index)&&t.push({path:x,score:rQ(x,o.index),routesMeta:b})};return e.forEach((o,l)=>{var d;if(o.path===""||!((d=o.path)!=null&&d.includes("?")))i(o,l);else for(let c of XF(o.path))i(o,l,!0,c)}),t}function XF(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,a=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return a?[i,""]:[i];let o=XF(n.join("/")),l=[];return l.push(...o.map(d=>d===""?i:[i,d].join("/"))),a&&l.push(...o),l.map(d=>e.startsWith("/")&&d===""?"/":d)}function XY(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:nQ(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var YY=/^:[\w-]+$/,QY=3,ZY=2,JY=1,eQ=10,tQ=-2,b7=e=>e==="*";function rQ(e,t){let r=e.split("/"),n=r.length;return r.some(b7)&&(n+=tQ),t&&(n+=ZY),r.filter(a=>!b7(a)).reduce((a,i)=>a+(YY.test(i)?QY:i===""?JY:eQ),n)}function nQ(e,t){return e.length===t.length&&e.slice(0,-1).every((n,a)=>n===t[a])?e[e.length-1]-t[t.length-1]:0}function aQ(e,t,r=!1){let{routesMeta:n}=e,a={},i="/",o=[];for(let l=0;l<n.length;++l){let d=n[l],c=l===n.length-1,u=i==="/"?t:t.slice(i.length)||"/",x=fw({path:d.relativePath,caseSensitive:d.caseSensitive,end:c},u),b=d.route;if(!x&&c&&r&&!n[n.length-1].route.index&&(x=fw({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},u)),!x)return null;Object.assign(a,x.params),o.push({params:a,pathname:z0([i,x.pathname]),pathnameBase:dQ(z0([i,x.pathnameBase])),route:b}),x.pathnameBase!=="/"&&(i=z0([i,x.pathnameBase]))}return o}function fw(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=sQ(e.path,e.caseSensitive,e.end),a=t.match(r);if(!a)return null;let i=a[0],o=i.replace(/(.)\/+$/,"$1"),l=a.slice(1);return{params:n.reduce((c,{paramName:u,isOptional:x},b)=>{if(u==="*"){let k=l[b]||"";o=i.slice(0,i.length-k.length).replace(/(.)\/+$/,"$1")}const g=l[b];return x&&!g?c[u]=void 0:c[u]=(g||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:o,pattern:e}}function sQ(e,t=!1,r=!0){wd(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let n=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,d)=>(n.push({paramName:l,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(n.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),n]}function iQ(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return wd(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function J0(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function oQ(e,t="/"){let{pathname:r,search:n="",hash:a=""}=typeof e=="string"?ix(e):e;return{pathname:r?r.startsWith("/")?r:lQ(r,t):t,search:uQ(n),hash:hQ(a)}}function lQ(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function v3(e,t,r,n){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function cQ(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function x6(e){let t=cQ(e);return t.map((r,n)=>n===t.length-1?r.pathname:r.pathnameBase)}function p6(e,t,r,n=!1){let a;typeof e=="string"?a=ix(e):(a={...e},Vs(!a.pathname||!a.pathname.includes("?"),v3("?","pathname","search",a)),Vs(!a.pathname||!a.pathname.includes("#"),v3("#","pathname","hash",a)),Vs(!a.search||!a.search.includes("#"),v3("#","search","hash",a)));let i=e===""||a.pathname==="",o=i?"/":a.pathname,l;if(o==null)l=r;else{let x=t.length-1;if(!n&&o.startsWith("..")){let b=o.split("/");for(;b[0]==="..";)b.shift(),x-=1;a.pathname=b.join("/")}l=x>=0?t[x]:"/"}let d=oQ(a,l),c=o&&o!=="/"&&o.endsWith("/"),u=(i||o===".")&&r.endsWith("/");return!d.pathname.endsWith("/")&&(c||u)&&(d.pathname+="/"),d}var z0=e=>e.join("/").replace(/\/\/+/g,"/"),dQ=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),uQ=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,hQ=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function fQ(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var YF=["POST","PUT","PATCH","DELETE"];new Set(YF);var mQ=["GET",...YF];new Set(mQ);var dp=T.createContext(null);dp.displayName="DataRouter";var Lk=T.createContext(null);Lk.displayName="DataRouterState";T.createContext(!1);var QF=T.createContext({isTransitioning:!1});QF.displayName="ViewTransition";var xQ=T.createContext(new Map);xQ.displayName="Fetchers";var pQ=T.createContext(null);pQ.displayName="Await";var du=T.createContext(null);du.displayName="Navigation";var Kb=T.createContext(null);Kb.displayName="Location";var Qu=T.createContext({outlet:null,matches:[],isDataRoute:!1});Qu.displayName="Route";var g6=T.createContext(null);g6.displayName="RouteError";function gQ(e,{relative:t}={}){Vs(up(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=T.useContext(du),{hash:a,pathname:i,search:o}=Xb(e,{relative:t}),l=i;return r!=="/"&&(l=i==="/"?r:z0([r,i])),n.createHref({pathname:l,search:o,hash:a})}function up(){return T.useContext(Kb)!=null}function Cd(){return Vs(up(),"useLocation() may be used only in the context of a <Router> component."),T.useContext(Kb).location}var ZF="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function JF(e){T.useContext(du).static||T.useLayoutEffect(e)}function Rk(){let{isDataRoute:e}=T.useContext(Qu);return e?TQ():bQ()}function bQ(){Vs(up(),"useNavigate() may be used only in the context of a <Router> component.");let e=T.useContext(dp),{basename:t,navigator:r}=T.useContext(du),{matches:n}=T.useContext(Qu),{pathname:a}=Cd(),i=JSON.stringify(x6(n)),o=T.useRef(!1);return JF(()=>{o.current=!0}),T.useCallback((d,c={})=>{if(wd(o.current,ZF),!o.current)return;if(typeof d=="number"){r.go(d);return}let u=p6(d,JSON.parse(i),a,c.relative==="path");e==null&&t!=="/"&&(u.pathname=u.pathname==="/"?t:z0([t,u.pathname])),(c.replace?r.replace:r.push)(u,c.state,c)},[t,r,i,a,e])}T.createContext(null);function Xb(e,{relative:t}={}){let{matches:r}=T.useContext(Qu),{pathname:n}=Cd(),a=JSON.stringify(x6(r));return T.useMemo(()=>p6(e,JSON.parse(a),n,t==="path"),[e,a,n,t])}function vQ(e,t){return eB(e,t)}function eB(e,t,r,n,a){var O;Vs(up(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=T.useContext(du),{matches:o}=T.useContext(Qu),l=o[o.length-1],d=l?l.params:{},c=l?l.pathname:"/",u=l?l.pathnameBase:"/",x=l&&l.route;{let A=x&&x.path||"";tB(c,!x||A.endsWith("*")||A.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${A}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${A}"> to <Route path="${A==="/"?"*":`${A}/*`}">.`)}let b=Cd(),g;if(t){let A=typeof t=="string"?ix(t):t;Vs(u==="/"||((O=A.pathname)==null?void 0:O.startsWith(u)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${u}" but pathname "${A.pathname}" was given in the \`location\` prop.`),g=A}else g=b;let k=g.pathname||"/",y=k;if(u!=="/"){let A=u.replace(/^\//,"").split("/");y="/"+k.replace(/^\//,"").split("/").slice(A.length).join("/")}let N=GF(e,{pathname:y});wd(x||N!=null,`No routes matched location "${g.pathname}${g.search}${g.hash}" `),wd(N==null||N[N.length-1].route.element!==void 0||N[N.length-1].route.Component!==void 0||N[N.length-1].route.lazy!==void 0,`Matched leaf route at location "${g.pathname}${g.search}${g.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let S=_Q(N&&N.map(A=>Object.assign({},A,{params:Object.assign({},d,A.params),pathname:z0([u,i.encodeLocation?i.encodeLocation(A.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:A.pathname]),pathnameBase:A.pathnameBase==="/"?u:z0([u,i.encodeLocation?i.encodeLocation(A.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:A.pathnameBase])})),o,r,n,a);return t&&S?T.createElement(Kb.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...g},navigationType:"POP"}},S):S}function yQ(){let e=EQ(),t=fQ(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:n},i={padding:"2px 4px",backgroundColor:n},o=null;return console.error("Error handled by React Router default ErrorBoundary:",e),o=T.createElement(T.Fragment,null,T.createElement("p",null," Hey developer "),T.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",T.createElement("code",{style:i},"ErrorBoundary")," or"," ",T.createElement("code",{style:i},"errorElement")," prop on your route.")),T.createElement(T.Fragment,null,T.createElement("h2",null,"Unexpected Application Error!"),T.createElement("h3",{style:{fontStyle:"italic"}},t),r?T.createElement("pre",{style:a},r):null,o)}var wQ=T.createElement(yQ,null),kQ=class extends T.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.unstable_onError?this.props.unstable_onError(e,t):console.error("React Router caught the following error during render",e)}render(){return this.state.error!==void 0?T.createElement(Qu.Provider,{value:this.props.routeContext},T.createElement(g6.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function NQ({routeContext:e,match:t,children:r}){let n=T.useContext(dp);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),T.createElement(Qu.Provider,{value:e},r)}function _Q(e,t=[],r=null,n=null,a=null){if(e==null){if(!r)return null;if(r.errors)e=r.matches;else if(t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let i=e,o=r==null?void 0:r.errors;if(o!=null){let c=i.findIndex(u=>u.route.id&&(o==null?void 0:o[u.route.id])!==void 0);Vs(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),i=i.slice(0,Math.min(i.length,c+1))}let l=!1,d=-1;if(r)for(let c=0;c<i.length;c++){let u=i[c];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(d=c),u.route.id){let{loaderData:x,errors:b}=r,g=u.route.loader&&!x.hasOwnProperty(u.route.id)&&(!b||b[u.route.id]===void 0);if(u.route.lazy||g){l=!0,d>=0?i=i.slice(0,d+1):i=[i[0]];break}}}return i.reduceRight((c,u,x)=>{let b,g=!1,k=null,y=null;r&&(b=o&&u.route.id?o[u.route.id]:void 0,k=u.route.errorElement||wQ,l&&(d<0&&x===0?(tB("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),g=!0,y=null):d===x&&(g=!0,y=u.route.hydrateFallbackElement||null)));let N=t.concat(i.slice(0,x+1)),S=()=>{let O;return b?O=k:g?O=y:u.route.Component?O=T.createElement(u.route.Component,null):u.route.element?O=u.route.element:O=c,T.createElement(NQ,{match:u,routeContext:{outlet:c,matches:N,isDataRoute:r!=null},children:O})};return r&&(u.route.ErrorBoundary||u.route.errorElement||x===0)?T.createElement(kQ,{location:r.location,revalidation:r.revalidation,component:k,error:b,children:S(),routeContext:{outlet:null,matches:N,isDataRoute:!0},unstable_onError:n}):S()},null)}function b6(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function SQ(e){let t=T.useContext(dp);return Vs(t,b6(e)),t}function jQ(e){let t=T.useContext(Lk);return Vs(t,b6(e)),t}function CQ(e){let t=T.useContext(Qu);return Vs(t,b6(e)),t}function v6(e){let t=CQ(e),r=t.matches[t.matches.length-1];return Vs(r.route.id,`${e} can only be used on routes that contain a unique "id"`),r.route.id}function AQ(){return v6("useRouteId")}function EQ(){var n;let e=T.useContext(g6),t=jQ("useRouteError"),r=v6("useRouteError");return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function TQ(){let{router:e}=SQ("useNavigate"),t=v6("useNavigate"),r=T.useRef(!1);return JF(()=>{r.current=!0}),T.useCallback(async(a,i={})=>{wd(r.current,ZF),r.current&&(typeof a=="number"?e.navigate(a):await e.navigate(a,{fromRouteId:t,...i}))},[e,t])}var v7={};function tB(e,t,r){!t&&!v7[e]&&(v7[e]=!0,wd(!1,r))}T.memo(OQ);function OQ({routes:e,future:t,state:r,unstable_onError:n}){return eB(e,void 0,r,n,t)}function rB({to:e,replace:t,state:r,relative:n}){Vs(up(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=T.useContext(du);wd(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=T.useContext(Qu),{pathname:o}=Cd(),l=Rk(),d=p6(e,x6(i),o,n==="path"),c=JSON.stringify(d);return T.useEffect(()=>{l(JSON.parse(c),{replace:t,state:r,relative:n})},[l,c,n,t,r]),null}function ui(e){Vs(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function PQ({basename:e="/",children:t=null,location:r,navigationType:n="POP",navigator:a,static:i=!1}){Vs(!up(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=e.replace(/^\/*/,"/"),l=T.useMemo(()=>({basename:o,navigator:a,static:i,future:{}}),[o,a,i]);typeof r=="string"&&(r=ix(r));let{pathname:d="/",search:c="",hash:u="",state:x=null,key:b="default"}=r,g=T.useMemo(()=>{let k=J0(d,o);return k==null?null:{location:{pathname:k,search:c,hash:u,state:x,key:b},navigationType:n}},[o,d,c,u,x,b,n]);return wd(g!=null,`<Router basename="${o}"> is not able to match the URL "${d}${c}${u}" because it does not start with the basename, so the <Router> won't render anything.`),g==null?null:T.createElement(du.Provider,{value:l},T.createElement(Kb.Provider,{children:t,value:g}))}function nB({children:e,location:t}){return vQ(J_(e),t)}function J_(e,t=[]){let r=[];return T.Children.forEach(e,(n,a)=>{if(!T.isValidElement(n))return;let i=[...t,a];if(n.type===T.Fragment){r.push.apply(r,J_(n.props.children,i));return}Vs(n.type===ui,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Vs(!n.props.index||!n.props.children,"An index route cannot have child routes.");let o={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=J_(n.props.children,i)),r.push(o)}),r}var tw="get",rw="application/x-www-form-urlencoded";function Fk(e){return e!=null&&typeof e.tagName=="string"}function IQ(e){return Fk(e)&&e.tagName.toLowerCase()==="button"}function DQ(e){return Fk(e)&&e.tagName.toLowerCase()==="form"}function MQ(e){return Fk(e)&&e.tagName.toLowerCase()==="input"}function LQ(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function RQ(e,t){return e.button===0&&(!t||t==="_self")&&!LQ(e)}var S2=null;function FQ(){if(S2===null)try{new FormData(document.createElement("form"),0),S2=!1}catch{S2=!0}return S2}var BQ=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function y3(e){return e!=null&&!BQ.has(e)?(wd(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${rw}"`),null):e}function UQ(e,t){let r,n,a,i,o;if(DQ(e)){let l=e.getAttribute("action");n=l?J0(l,t):null,r=e.getAttribute("method")||tw,a=y3(e.getAttribute("enctype"))||rw,i=new FormData(e)}else if(IQ(e)||MQ(e)&&(e.type==="submit"||e.type==="image")){let l=e.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=e.getAttribute("formaction")||l.getAttribute("action");if(n=d?J0(d,t):null,r=e.getAttribute("formmethod")||l.getAttribute("method")||tw,a=y3(e.getAttribute("formenctype"))||y3(l.getAttribute("enctype"))||rw,i=new FormData(l,e),!FQ()){let{name:c,type:u,value:x}=e;if(u==="image"){let b=c?`${c}.`:"";i.append(`${b}x`,"0"),i.append(`${b}y`,"0")}else c&&i.append(c,x)}}else{if(Fk(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=tw,n=null,a=rw,o=e}return i&&a==="text/plain"&&(o=i,i=void 0),{action:n,method:r.toLowerCase(),encType:a,formData:i,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function y6(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function zQ(e,t,r){let n=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return n.pathname==="/"?n.pathname=`_root.${r}`:t&&J0(n.pathname,t)==="/"?n.pathname=`${t.replace(/\/$/,"")}/_root.${r}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${r}`,n}async function qQ(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(r){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function HQ(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function $Q(e,t,r){let n=await Promise.all(e.map(async a=>{let i=t.routes[a.route.id];if(i){let o=await qQ(i,r);return o.links?o.links():[]}return[]}));return KQ(n.flat(1).filter(HQ).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function y7(e,t,r,n,a,i){let o=(d,c)=>r[c]?d.route.id!==r[c].route.id:!0,l=(d,c)=>{var u;return r[c].pathname!==d.pathname||((u=r[c].route.path)==null?void 0:u.endsWith("*"))&&r[c].params["*"]!==d.params["*"]};return i==="assets"?t.filter((d,c)=>o(d,c)||l(d,c)):i==="data"?t.filter((d,c)=>{var x;let u=n.routes[d.route.id];if(!u||!u.hasLoader)return!1;if(o(d,c)||l(d,c))return!0;if(d.route.shouldRevalidate){let b=d.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((x=r[0])==null?void 0:x.params)||{},nextUrl:new URL(e,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof b=="boolean")return b}return!0}):[]}function VQ(e,t,{includeHydrateFallback:r}={}){return WQ(e.map(n=>{let a=t.routes[n.route.id];if(!a)return[];let i=[a.module];return a.clientActionModule&&(i=i.concat(a.clientActionModule)),a.clientLoaderModule&&(i=i.concat(a.clientLoaderModule)),r&&a.hydrateFallbackModule&&(i=i.concat(a.hydrateFallbackModule)),a.imports&&(i=i.concat(a.imports)),i}).flat(1))}function WQ(e){return[...new Set(e)]}function GQ(e){let t={},r=Object.keys(e).sort();for(let n of r)t[n]=e[n];return t}function KQ(e,t){let r=new Set;return new Set(t),e.reduce((n,a)=>{let i=JSON.stringify(GQ(a));return r.has(i)||(r.add(i),n.push({key:i,link:a})),n},[])}function aB(){let e=T.useContext(dp);return y6(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function XQ(){let e=T.useContext(Lk);return y6(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var w6=T.createContext(void 0);w6.displayName="FrameworkContext";function sB(){let e=T.useContext(w6);return y6(e,"You must render this element inside a <HydratedRouter> element"),e}function YQ(e,t){let r=T.useContext(w6),[n,a]=T.useState(!1),[i,o]=T.useState(!1),{onFocus:l,onBlur:d,onMouseEnter:c,onMouseLeave:u,onTouchStart:x}=t,b=T.useRef(null);T.useEffect(()=>{if(e==="render"&&o(!0),e==="viewport"){let y=S=>{S.forEach(O=>{o(O.isIntersecting)})},N=new IntersectionObserver(y,{threshold:.5});return b.current&&N.observe(b.current),()=>{N.disconnect()}}},[e]),T.useEffect(()=>{if(n){let y=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(y)}}},[n]);let g=()=>{a(!0)},k=()=>{a(!1),o(!1)};return r?e!=="intent"?[i,b,{}]:[i,b,{onFocus:mg(l,g),onBlur:mg(d,k),onMouseEnter:mg(c,g),onMouseLeave:mg(u,k),onTouchStart:mg(x,g)}]:[!1,b,{}]}function mg(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function QQ({page:e,...t}){let{router:r}=aB(),n=T.useMemo(()=>GF(r.routes,e,r.basename),[r.routes,e,r.basename]);return n?T.createElement(JQ,{page:e,matches:n,...t}):null}function ZQ(e){let{manifest:t,routeModules:r}=sB(),[n,a]=T.useState([]);return T.useEffect(()=>{let i=!1;return $Q(e,t,r).then(o=>{i||a(o)}),()=>{i=!0}},[e,t,r]),n}function JQ({page:e,matches:t,...r}){let n=Cd(),{manifest:a,routeModules:i}=sB(),{basename:o}=aB(),{loaderData:l,matches:d}=XQ(),c=T.useMemo(()=>y7(e,t,d,a,n,"data"),[e,t,d,a,n]),u=T.useMemo(()=>y7(e,t,d,a,n,"assets"),[e,t,d,a,n]),x=T.useMemo(()=>{if(e===n.pathname+n.search+n.hash)return[];let k=new Set,y=!1;if(t.forEach(S=>{var A;let O=a.routes[S.route.id];!O||!O.hasLoader||(!c.some(P=>P.route.id===S.route.id)&&S.route.id in l&&((A=i[S.route.id])!=null&&A.shouldRevalidate)||O.hasClientLoader?y=!0:k.add(S.route.id))}),k.size===0)return[];let N=zQ(e,o,"data");return y&&k.size>0&&N.searchParams.set("_routes",t.filter(S=>k.has(S.route.id)).map(S=>S.route.id).join(",")),[N.pathname+N.search]},[o,l,n,a,c,t,e,i]),b=T.useMemo(()=>VQ(u,a),[u,a]),g=ZQ(u);return T.createElement(T.Fragment,null,x.map(k=>T.createElement("link",{key:k,rel:"prefetch",as:"fetch",href:k,...r})),b.map(k=>T.createElement("link",{key:k,rel:"modulepreload",href:k,...r})),g.map(({key:k,link:y})=>T.createElement("link",{key:k,nonce:r.nonce,...y})))}function eZ(...e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var iB=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{iB&&(window.__reactRouterVersion="7.9.5")}catch{}function tZ({basename:e,children:t,window:r}){let n=T.useRef();n.current==null&&(n.current=$Y({window:r,v5Compat:!0}));let a=n.current,[i,o]=T.useState({action:a.action,location:a.location}),l=T.useCallback(d=>{T.startTransition(()=>o(d))},[o]);return T.useLayoutEffect(()=>a.listen(l),[a,l]),T.createElement(PQ,{basename:e,children:t,location:i.location,navigationType:i.action,navigator:a})}var oB=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,kd=T.forwardRef(function({onClick:t,discover:r="render",prefetch:n="none",relative:a,reloadDocument:i,replace:o,state:l,target:d,to:c,preventScrollReset:u,viewTransition:x,...b},g){let{basename:k}=T.useContext(du),y=typeof c=="string"&&oB.test(c),N,S=!1;if(typeof c=="string"&&y&&(N=c,iB))try{let L=new URL(window.location.href),Q=c.startsWith("//")?new URL(L.protocol+c):new URL(c),H=J0(Q.pathname,k);Q.origin===L.origin&&H!=null?c=H+Q.search+Q.hash:S=!0}catch{wd(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let O=gQ(c,{relative:a}),[A,P,q]=YQ(n,b),W=sZ(c,{replace:o,state:l,target:d,preventScrollReset:u,relative:a,viewTransition:x});function R(L){t&&t(L),L.defaultPrevented||W(L)}let U=T.createElement("a",{...b,...q,href:N||O,onClick:S||i?t:R,ref:eZ(g,P),target:d,"data-discover":!y&&r==="render"?"true":void 0});return A&&!y?T.createElement(T.Fragment,null,U,T.createElement(QQ,{page:O})):U});kd.displayName="Link";var rZ=T.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:n="",end:a=!1,style:i,to:o,viewTransition:l,children:d,...c},u){let x=Xb(o,{relative:c.relative}),b=Cd(),g=T.useContext(Lk),{navigator:k,basename:y}=T.useContext(du),N=g!=null&&dZ(x)&&l===!0,S=k.encodeLocation?k.encodeLocation(x).pathname:x.pathname,O=b.pathname,A=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;r||(O=O.toLowerCase(),A=A?A.toLowerCase():null,S=S.toLowerCase()),A&&y&&(A=J0(A,y)||A);const P=S!=="/"&&S.endsWith("/")?S.length-1:S.length;let q=O===S||!a&&O.startsWith(S)&&O.charAt(P)==="/",W=A!=null&&(A===S||!a&&A.startsWith(S)&&A.charAt(S.length)==="/"),R={isActive:q,isPending:W,isTransitioning:N},U=q?t:void 0,L;typeof n=="function"?L=n(R):L=[n,q?"active":null,W?"pending":null,N?"transitioning":null].filter(Boolean).join(" ");let Q=typeof i=="function"?i(R):i;return T.createElement(kd,{...c,"aria-current":U,className:L,ref:u,style:Q,to:o,viewTransition:l},typeof d=="function"?d(R):d)});rZ.displayName="NavLink";var nZ=T.forwardRef(({discover:e="render",fetcherKey:t,navigate:r,reloadDocument:n,replace:a,state:i,method:o=tw,action:l,onSubmit:d,relative:c,preventScrollReset:u,viewTransition:x,...b},g)=>{let k=lZ(),y=cZ(l,{relative:c}),N=o.toLowerCase()==="get"?"get":"post",S=typeof l=="string"&&oB.test(l),O=A=>{if(d&&d(A),A.defaultPrevented)return;A.preventDefault();let P=A.nativeEvent.submitter,q=(P==null?void 0:P.getAttribute("formmethod"))||o;k(P||A.currentTarget,{fetcherKey:t,method:q,navigate:r,replace:a,state:i,relative:c,preventScrollReset:u,viewTransition:x})};return T.createElement("form",{ref:g,method:N,action:y,onSubmit:n?d:O,...b,"data-discover":!S&&e==="render"?"true":void 0})});nZ.displayName="Form";function aZ(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function lB(e){let t=T.useContext(dp);return Vs(t,aZ(e)),t}function sZ(e,{target:t,replace:r,state:n,preventScrollReset:a,relative:i,viewTransition:o}={}){let l=Rk(),d=Cd(),c=Xb(e,{relative:i});return T.useCallback(u=>{if(RQ(u,t)){u.preventDefault();let x=r!==void 0?r:ab(d)===ab(c);l(e,{replace:x,state:n,preventScrollReset:a,relative:i,viewTransition:o})}},[d,l,c,r,n,t,e,a,i,o])}var iZ=0,oZ=()=>`__${String(++iZ)}__`;function lZ(){let{router:e}=lB("useSubmit"),{basename:t}=T.useContext(du),r=AQ();return T.useCallback(async(n,a={})=>{let{action:i,method:o,encType:l,formData:d,body:c}=UQ(n,t);if(a.navigate===!1){let u=a.fetcherKey||oZ();await e.fetch(u,r,a.action||i,{preventScrollReset:a.preventScrollReset,formData:d,body:c,formMethod:a.method||o,formEncType:a.encType||l,flushSync:a.flushSync})}else await e.navigate(a.action||i,{preventScrollReset:a.preventScrollReset,formData:d,body:c,formMethod:a.method||o,formEncType:a.encType||l,replace:a.replace,state:a.state,fromRouteId:r,flushSync:a.flushSync,viewTransition:a.viewTransition})},[e,t,r])}function cZ(e,{relative:t}={}){let{basename:r}=T.useContext(du),n=T.useContext(Qu);Vs(n,"useFormAction must be used inside a RouteContext");let[a]=n.matches.slice(-1),i={...Xb(e||".",{relative:t})},o=Cd();if(e==null){i.search=o.search;let l=new URLSearchParams(i.search),d=l.getAll("index");if(d.some(u=>u==="")){l.delete("index"),d.filter(x=>x).forEach(x=>l.append("index",x));let u=l.toString();i.search=u?`?${u}`:""}}return(!e||e===".")&&a.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(i.pathname=i.pathname==="/"?r:z0([r,i.pathname])),ab(i)}function dZ(e,{relative:t}={}){let r=T.useContext(QF);Vs(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=lB("useViewTransitionState"),a=Xb(e,{relative:t});if(!r.isTransitioning)return!1;let i=J0(r.currentLocation.pathname,n)||r.currentLocation.pathname,o=J0(r.nextLocation.pathname,n)||r.nextLocation.pathname;return fw(a.pathname,o)!=null||fw(a.pathname,i)!=null}var cB=WF(),hp=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},uZ={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},Jh,f6,MF,hZ=(MF=class{constructor(){mn(this,Jh,uZ);mn(this,f6,!1)}setTimeoutProvider(e){Lr(this,Jh,e)}setTimeout(e,t){return st(this,Jh).setTimeout(e,t)}clearTimeout(e){st(this,Jh).clearTimeout(e)}setInterval(e,t){return st(this,Jh).setInterval(e,t)}clearInterval(e){st(this,Jh).clearInterval(e)}},Jh=new WeakMap,f6=new WeakMap,MF),im=new hZ;function fZ(e){setTimeout(e,0)}var Dm=typeof window>"u"||"Deno"in globalThis;function Sl(){}function mZ(e,t){return typeof e=="function"?e(t):e}function eS(e){return typeof e=="number"&&e>=0&&e!==1/0}function dB(e,t){return Math.max(e+(t||0)-Date.now(),0)}function hf(e,t){return typeof e=="function"?e(t):e}function pd(e,t){return typeof e=="function"?e(t):e}function w7(e,t){const{type:r="all",exact:n,fetchStatus:a,predicate:i,queryKey:o,stale:l}=e;if(o){if(n){if(t.queryHash!==k6(o,t.options))return!1}else if(!sb(t.queryKey,o))return!1}if(r!=="all"){const d=t.isActive();if(r==="active"&&!d||r==="inactive"&&d)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||a&&a!==t.state.fetchStatus||i&&!i(t))}function k7(e,t){const{exact:r,status:n,predicate:a,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(r){if(Mm(t.options.mutationKey)!==Mm(i))return!1}else if(!sb(t.options.mutationKey,i))return!1}return!(n&&t.state.status!==n||a&&!a(t))}function k6(e,t){return((t==null?void 0:t.queryKeyHashFn)||Mm)(e)}function Mm(e){return JSON.stringify(e,(t,r)=>tS(r)?Object.keys(r).sort().reduce((n,a)=>(n[a]=r[a],n),{}):r)}function sb(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(r=>sb(e[r],t[r])):!1}var xZ=Object.prototype.hasOwnProperty;function N6(e,t){if(e===t)return e;const r=N7(e)&&N7(t);if(!r&&!(tS(e)&&tS(t)))return t;const a=(r?e:Object.keys(e)).length,i=r?t:Object.keys(t),o=i.length,l=r?new Array(o):{};let d=0;for(let c=0;c<o;c++){const u=r?c:i[c],x=e[u],b=t[u];if(x===b){l[u]=x,(r?c<a:xZ.call(e,u))&&d++;continue}if(x===null||b===null||typeof x!="object"||typeof b!="object"){l[u]=b;continue}const g=N6(x,b);l[u]=g,g===x&&d++}return a===o&&d===a?e:l}function mw(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}function N7(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function tS(e){if(!_7(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!_7(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function _7(e){return Object.prototype.toString.call(e)==="[object Object]"}function pZ(e){return new Promise(t=>{im.setTimeout(t,e)})}function rS(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?N6(e,t):t}function gZ(e,t,r=0){const n=[...e,t];return r&&n.length>r?n.slice(1):n}function bZ(e,t,r=0){const n=[t,...e];return r&&n.length>r?n.slice(0,-1):n}var _6=Symbol();function uB(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===_6?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function hB(e,t){return typeof e=="function"?e(...t):!!e}var fm,ef,F1,LF,vZ=(LF=class extends hp{constructor(){super();mn(this,fm);mn(this,ef);mn(this,F1);Lr(this,F1,t=>{if(!Dm&&window.addEventListener){const r=()=>t();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){st(this,ef)||this.setEventListener(st(this,F1))}onUnsubscribe(){var t;this.hasListeners()||((t=st(this,ef))==null||t.call(this),Lr(this,ef,void 0))}setEventListener(t){var r;Lr(this,F1,t),(r=st(this,ef))==null||r.call(this),Lr(this,ef,t(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(t){st(this,fm)!==t&&(Lr(this,fm,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(r=>{r(t)})}isFocused(){var t;return typeof st(this,fm)=="boolean"?st(this,fm):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},fm=new WeakMap,ef=new WeakMap,F1=new WeakMap,LF),S6=new vZ;function nS(){let e,t;const r=new Promise((a,i)=>{e=a,t=i});r.status="pending",r.catch(()=>{});function n(a){Object.assign(r,a),delete r.resolve,delete r.reject}return r.resolve=a=>{n({status:"fulfilled",value:a}),e(a)},r.reject=a=>{n({status:"rejected",reason:a}),t(a)},r}var yZ=fZ;function wZ(){let e=[],t=0,r=l=>{l()},n=l=>{l()},a=yZ;const i=l=>{t?e.push(l):a(()=>{r(l)})},o=()=>{const l=e;e=[],l.length&&a(()=>{n(()=>{l.forEach(d=>{r(d)})})})};return{batch:l=>{let d;t++;try{d=l()}finally{t--,t||o()}return d},batchCalls:l=>(...d)=>{i(()=>{l(...d)})},schedule:i,setNotifyFunction:l=>{r=l},setBatchNotifyFunction:l=>{n=l},setScheduler:l=>{a=l}}}var Ei=wZ(),B1,tf,U1,RF,kZ=(RF=class extends hp{constructor(){super();mn(this,B1,!0);mn(this,tf);mn(this,U1);Lr(this,U1,t=>{if(!Dm&&window.addEventListener){const r=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){st(this,tf)||this.setEventListener(st(this,U1))}onUnsubscribe(){var t;this.hasListeners()||((t=st(this,tf))==null||t.call(this),Lr(this,tf,void 0))}setEventListener(t){var r;Lr(this,U1,t),(r=st(this,tf))==null||r.call(this),Lr(this,tf,t(this.setOnline.bind(this)))}setOnline(t){st(this,B1)!==t&&(Lr(this,B1,t),this.listeners.forEach(n=>{n(t)}))}isOnline(){return st(this,B1)}},B1=new WeakMap,tf=new WeakMap,U1=new WeakMap,RF),xw=new kZ;function NZ(e){return Math.min(1e3*2**e,3e4)}function fB(e){return(e??"online")==="online"?xw.isOnline():!0}var aS=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function mB(e){let t=!1,r=0,n;const a=nS(),i=()=>a.status!=="pending",o=y=>{var N;if(!i()){const S=new aS(y);b(S),(N=e.onCancel)==null||N.call(e,S)}},l=()=>{t=!0},d=()=>{t=!1},c=()=>S6.isFocused()&&(e.networkMode==="always"||xw.isOnline())&&e.canRun(),u=()=>fB(e.networkMode)&&e.canRun(),x=y=>{i()||(n==null||n(),a.resolve(y))},b=y=>{i()||(n==null||n(),a.reject(y))},g=()=>new Promise(y=>{var N;n=S=>{(i()||c())&&y(S)},(N=e.onPause)==null||N.call(e)}).then(()=>{var y;n=void 0,i()||(y=e.onContinue)==null||y.call(e)}),k=()=>{if(i())return;let y;const N=r===0?e.initialPromise:void 0;try{y=N??e.fn()}catch(S){y=Promise.reject(S)}Promise.resolve(y).then(x).catch(S=>{var W;if(i())return;const O=e.retry??(Dm?0:3),A=e.retryDelay??NZ,P=typeof A=="function"?A(r,S):A,q=O===!0||typeof O=="number"&&r<O||typeof O=="function"&&O(r,S);if(t||!q){b(S);return}r++,(W=e.onFail)==null||W.call(e,r,S),pZ(P).then(()=>c()?void 0:g()).then(()=>{t?b(S):k()})})};return{promise:a,status:()=>a.status,cancel:o,continue:()=>(n==null||n(),a),cancelRetry:l,continueRetry:d,canStart:u,start:()=>(u()?k():g().then(k),a)}}var mm,FF,xB=(FF=class{constructor(){mn(this,mm)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),eS(this.gcTime)&&Lr(this,mm,im.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Dm?1/0:300*1e3))}clearGcTimeout(){st(this,mm)&&(im.clearTimeout(st(this,mm)),Lr(this,mm,void 0))}},mm=new WeakMap,FF),xm,z1,md,pm,ko,Hb,gm,Yd,_0,BF,_Z=(BF=class extends xB{constructor(t){super();mn(this,Yd);mn(this,xm);mn(this,z1);mn(this,md);mn(this,pm);mn(this,ko);mn(this,Hb);mn(this,gm);Lr(this,gm,!1),Lr(this,Hb,t.defaultOptions),this.setOptions(t.options),this.observers=[],Lr(this,pm,t.client),Lr(this,md,st(this,pm).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,Lr(this,xm,j7(this.options)),this.state=t.state??st(this,xm),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=st(this,ko))==null?void 0:t.promise}setOptions(t){if(this.options={...st(this,Hb),...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const r=j7(this.options);r.data!==void 0&&(this.setState(S7(r.data,r.dataUpdatedAt)),Lr(this,xm,r))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&st(this,md).remove(this)}setData(t,r){const n=rS(this.state.data,t,this.options);return ea(this,Yd,_0).call(this,{data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(t,r){ea(this,Yd,_0).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var n,a;const r=(n=st(this,ko))==null?void 0:n.promise;return(a=st(this,ko))==null||a.cancel(t),r?r.then(Sl).catch(Sl):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(st(this,xm))}isActive(){return this.observers.some(t=>pd(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===_6||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>hf(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!dB(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(n=>n.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=st(this,ko))==null||r.continue()}onOnline(){var r;const t=this.observers.find(n=>n.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=st(this,ko))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),st(this,md).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(st(this,ko)&&(st(this,gm)?st(this,ko).cancel({revert:!0}):st(this,ko).cancelRetry()),this.scheduleGc()),st(this,md).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||ea(this,Yd,_0).call(this,{type:"invalidate"})}async fetch(t,r){var d,c,u,x,b,g,k,y,N,S,O,A;if(this.state.fetchStatus!=="idle"&&((d=st(this,ko))==null?void 0:d.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(st(this,ko))return st(this,ko).continueRetry(),st(this,ko).promise}if(t&&this.setOptions(t),!this.options.queryFn){const P=this.observers.find(q=>q.options.queryFn);P&&this.setOptions(P.options)}const n=new AbortController,a=P=>{Object.defineProperty(P,"signal",{enumerable:!0,get:()=>(Lr(this,gm,!0),n.signal)})},i=()=>{const P=uB(this.options,r),W=(()=>{const R={client:st(this,pm),queryKey:this.queryKey,meta:this.meta};return a(R),R})();return Lr(this,gm,!1),this.options.persister?this.options.persister(P,W,this):P(W)},l=(()=>{const P={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:st(this,pm),state:this.state,fetchFn:i};return a(P),P})();(c=this.options.behavior)==null||c.onFetch(l,this),Lr(this,z1,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=l.fetchOptions)==null?void 0:u.meta))&&ea(this,Yd,_0).call(this,{type:"fetch",meta:(x=l.fetchOptions)==null?void 0:x.meta}),Lr(this,ko,mB({initialPromise:r==null?void 0:r.initialPromise,fn:l.fetchFn,onCancel:P=>{P instanceof aS&&P.revert&&this.setState({...st(this,z1),fetchStatus:"idle"}),n.abort()},onFail:(P,q)=>{ea(this,Yd,_0).call(this,{type:"failed",failureCount:P,error:q})},onPause:()=>{ea(this,Yd,_0).call(this,{type:"pause"})},onContinue:()=>{ea(this,Yd,_0).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0}));try{const P=await st(this,ko).start();if(P===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(P),(g=(b=st(this,md).config).onSuccess)==null||g.call(b,P,this),(y=(k=st(this,md).config).onSettled)==null||y.call(k,P,this.state.error,this),P}catch(P){if(P instanceof aS){if(P.silent)return st(this,ko).promise;if(P.revert){if(this.state.data===void 0)throw P;return this.state.data}}throw ea(this,Yd,_0).call(this,{type:"error",error:P}),(S=(N=st(this,md).config).onError)==null||S.call(N,P,this),(A=(O=st(this,md).config).onSettled)==null||A.call(O,this.state.data,P,this),P}finally{this.scheduleGc()}}},xm=new WeakMap,z1=new WeakMap,md=new WeakMap,pm=new WeakMap,ko=new WeakMap,Hb=new WeakMap,gm=new WeakMap,Yd=new WeakSet,_0=function(t){const r=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...pB(n.data,this.options),fetchMeta:t.meta??null};case"success":const a={...n,...S7(t.data,t.dataUpdatedAt),dataUpdateCount:n.dataUpdateCount+1,...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return Lr(this,z1,t.manual?a:void 0),a;case"error":const i=t.error;return{...n,error:i,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=r(this.state),Ei.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),st(this,md).notify({query:this,type:"updated",action:t})})},BF);function pB(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:fB(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function S7(e,t){return{data:e,dataUpdatedAt:t??Date.now(),error:null,isInvalidated:!1,status:"success"}}function j7(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,n=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var rc,ka,$b,Nl,bm,q1,A0,rf,Vb,H1,$1,vm,ym,nf,V1,Va,Dg,sS,iS,oS,lS,cS,dS,uS,gB,UF,SZ=(UF=class extends hp{constructor(t,r){super();mn(this,Va);mn(this,rc);mn(this,ka);mn(this,$b);mn(this,Nl);mn(this,bm);mn(this,q1);mn(this,A0);mn(this,rf);mn(this,Vb);mn(this,H1);mn(this,$1);mn(this,vm);mn(this,ym);mn(this,nf);mn(this,V1,new Set);this.options=r,Lr(this,rc,t),Lr(this,rf,null),Lr(this,A0,nS()),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(st(this,ka).addObserver(this),C7(st(this,ka),this.options)?ea(this,Va,Dg).call(this):this.updateResult(),ea(this,Va,lS).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return hS(st(this,ka),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return hS(st(this,ka),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,ea(this,Va,cS).call(this),ea(this,Va,dS).call(this),st(this,ka).removeObserver(this)}setOptions(t){const r=this.options,n=st(this,ka);if(this.options=st(this,rc).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof pd(this.options.enabled,st(this,ka))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");ea(this,Va,uS).call(this),st(this,ka).setOptions(this.options),r._defaulted&&!mw(this.options,r)&&st(this,rc).getQueryCache().notify({type:"observerOptionsUpdated",query:st(this,ka),observer:this});const a=this.hasListeners();a&&A7(st(this,ka),n,this.options,r)&&ea(this,Va,Dg).call(this),this.updateResult(),a&&(st(this,ka)!==n||pd(this.options.enabled,st(this,ka))!==pd(r.enabled,st(this,ka))||hf(this.options.staleTime,st(this,ka))!==hf(r.staleTime,st(this,ka)))&&ea(this,Va,sS).call(this);const i=ea(this,Va,iS).call(this);a&&(st(this,ka)!==n||pd(this.options.enabled,st(this,ka))!==pd(r.enabled,st(this,ka))||i!==st(this,nf))&&ea(this,Va,oS).call(this,i)}getOptimisticResult(t){const r=st(this,rc).getQueryCache().build(st(this,rc),t),n=this.createResult(r,t);return CZ(this,n)&&(Lr(this,Nl,n),Lr(this,q1,this.options),Lr(this,bm,st(this,ka).state)),n}getCurrentResult(){return st(this,Nl)}trackResult(t,r){return new Proxy(t,{get:(n,a)=>(this.trackProp(a),r==null||r(a),a==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&st(this,A0).status==="pending"&&st(this,A0).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(n,a))})}trackProp(t){st(this,V1).add(t)}getCurrentQuery(){return st(this,ka)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const r=st(this,rc).defaultQueryOptions(t),n=st(this,rc).getQueryCache().build(st(this,rc),r);return n.fetch().then(()=>this.createResult(n,r))}fetch(t){return ea(this,Va,Dg).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),st(this,Nl)))}createResult(t,r){var L;const n=st(this,ka),a=this.options,i=st(this,Nl),o=st(this,bm),l=st(this,q1),c=t!==n?t.state:st(this,$b),{state:u}=t;let x={...u},b=!1,g;if(r._optimisticResults){const Q=this.hasListeners(),H=!Q&&C7(t,r),G=Q&&A7(t,n,r,a);(H||G)&&(x={...x,...pB(u.data,t.options)}),r._optimisticResults==="isRestoring"&&(x.fetchStatus="idle")}let{error:k,errorUpdatedAt:y,status:N}=x;g=x.data;let S=!1;if(r.placeholderData!==void 0&&g===void 0&&N==="pending"){let Q;i!=null&&i.isPlaceholderData&&r.placeholderData===(l==null?void 0:l.placeholderData)?(Q=i.data,S=!0):Q=typeof r.placeholderData=="function"?r.placeholderData((L=st(this,$1))==null?void 0:L.state.data,st(this,$1)):r.placeholderData,Q!==void 0&&(N="success",g=rS(i==null?void 0:i.data,Q,r),b=!0)}if(r.select&&g!==void 0&&!S)if(i&&g===(o==null?void 0:o.data)&&r.select===st(this,Vb))g=st(this,H1);else try{Lr(this,Vb,r.select),g=r.select(g),g=rS(i==null?void 0:i.data,g,r),Lr(this,H1,g),Lr(this,rf,null)}catch(Q){Lr(this,rf,Q)}st(this,rf)&&(k=st(this,rf),g=st(this,H1),y=Date.now(),N="error");const O=x.fetchStatus==="fetching",A=N==="pending",P=N==="error",q=A&&O,W=g!==void 0,U={status:N,fetchStatus:x.fetchStatus,isPending:A,isSuccess:N==="success",isError:P,isInitialLoading:q,isLoading:q,data:g,dataUpdatedAt:x.dataUpdatedAt,error:k,errorUpdatedAt:y,failureCount:x.fetchFailureCount,failureReason:x.fetchFailureReason,errorUpdateCount:x.errorUpdateCount,isFetched:x.dataUpdateCount>0||x.errorUpdateCount>0,isFetchedAfterMount:x.dataUpdateCount>c.dataUpdateCount||x.errorUpdateCount>c.errorUpdateCount,isFetching:O,isRefetching:O&&!A,isLoadingError:P&&!W,isPaused:x.fetchStatus==="paused",isPlaceholderData:b,isRefetchError:P&&W,isStale:j6(t,r),refetch:this.refetch,promise:st(this,A0),isEnabled:pd(r.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const Q=Z=>{U.status==="error"?Z.reject(U.error):U.data!==void 0&&Z.resolve(U.data)},H=()=>{const Z=Lr(this,A0,U.promise=nS());Q(Z)},G=st(this,A0);switch(G.status){case"pending":t.queryHash===n.queryHash&&Q(G);break;case"fulfilled":(U.status==="error"||U.data!==G.value)&&H();break;case"rejected":(U.status!=="error"||U.error!==G.reason)&&H();break}}return U}updateResult(){const t=st(this,Nl),r=this.createResult(st(this,ka),this.options);if(Lr(this,bm,st(this,ka).state),Lr(this,q1,this.options),st(this,bm).data!==void 0&&Lr(this,$1,st(this,ka)),mw(r,t))return;Lr(this,Nl,r);const n=()=>{if(!t)return!0;const{notifyOnChangeProps:a}=this.options,i=typeof a=="function"?a():a;if(i==="all"||!i&&!st(this,V1).size)return!0;const o=new Set(i??st(this,V1));return this.options.throwOnError&&o.add("error"),Object.keys(st(this,Nl)).some(l=>{const d=l;return st(this,Nl)[d]!==t[d]&&o.has(d)})};ea(this,Va,gB).call(this,{listeners:n()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&ea(this,Va,lS).call(this)}},rc=new WeakMap,ka=new WeakMap,$b=new WeakMap,Nl=new WeakMap,bm=new WeakMap,q1=new WeakMap,A0=new WeakMap,rf=new WeakMap,Vb=new WeakMap,H1=new WeakMap,$1=new WeakMap,vm=new WeakMap,ym=new WeakMap,nf=new WeakMap,V1=new WeakMap,Va=new WeakSet,Dg=function(t){ea(this,Va,uS).call(this);let r=st(this,ka).fetch(this.options,t);return t!=null&&t.throwOnError||(r=r.catch(Sl)),r},sS=function(){ea(this,Va,cS).call(this);const t=hf(this.options.staleTime,st(this,ka));if(Dm||st(this,Nl).isStale||!eS(t))return;const n=dB(st(this,Nl).dataUpdatedAt,t)+1;Lr(this,vm,im.setTimeout(()=>{st(this,Nl).isStale||this.updateResult()},n))},iS=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(st(this,ka)):this.options.refetchInterval)??!1},oS=function(t){ea(this,Va,dS).call(this),Lr(this,nf,t),!(Dm||pd(this.options.enabled,st(this,ka))===!1||!eS(st(this,nf))||st(this,nf)===0)&&Lr(this,ym,im.setInterval(()=>{(this.options.refetchIntervalInBackground||S6.isFocused())&&ea(this,Va,Dg).call(this)},st(this,nf)))},lS=function(){ea(this,Va,sS).call(this),ea(this,Va,oS).call(this,ea(this,Va,iS).call(this))},cS=function(){st(this,vm)&&(im.clearTimeout(st(this,vm)),Lr(this,vm,void 0))},dS=function(){st(this,ym)&&(im.clearInterval(st(this,ym)),Lr(this,ym,void 0))},uS=function(){const t=st(this,rc).getQueryCache().build(st(this,rc),this.options);if(t===st(this,ka))return;const r=st(this,ka);Lr(this,ka,t),Lr(this,$b,t.state),this.hasListeners()&&(r==null||r.removeObserver(this),t.addObserver(this))},gB=function(t){Ei.batch(()=>{t.listeners&&this.listeners.forEach(r=>{r(st(this,Nl))}),st(this,rc).getQueryCache().notify({query:st(this,ka),type:"observerResultsUpdated"})})},UF);function jZ(e,t){return pd(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function C7(e,t){return jZ(e,t)||e.state.data!==void 0&&hS(e,t,t.refetchOnMount)}function hS(e,t,r){if(pd(t.enabled,e)!==!1&&hf(t.staleTime,e)!=="static"){const n=typeof r=="function"?r(e):r;return n==="always"||n!==!1&&j6(e,t)}return!1}function A7(e,t,r,n){return(e!==t||pd(n.enabled,e)===!1)&&(!r.suspense||e.state.status!=="error")&&j6(e,r)}function j6(e,t){return pd(t.enabled,e)!==!1&&e.isStaleByTime(hf(t.staleTime,e))}function CZ(e,t){return!mw(e.getCurrentResult(),t)}function E7(e){return{onFetch:(t,r)=>{var u,x,b,g,k;const n=t.options,a=(b=(x=(u=t.fetchOptions)==null?void 0:u.meta)==null?void 0:x.fetchMore)==null?void 0:b.direction,i=((g=t.state.data)==null?void 0:g.pages)||[],o=((k=t.state.data)==null?void 0:k.pageParams)||[];let l={pages:[],pageParams:[]},d=0;const c=async()=>{let y=!1;const N=A=>{Object.defineProperty(A,"signal",{enumerable:!0,get:()=>(t.signal.aborted?y=!0:t.signal.addEventListener("abort",()=>{y=!0}),t.signal)})},S=uB(t.options,t.fetchOptions),O=async(A,P,q)=>{if(y)return Promise.reject();if(P==null&&A.pages.length)return Promise.resolve(A);const R=(()=>{const H={client:t.client,queryKey:t.queryKey,pageParam:P,direction:q?"backward":"forward",meta:t.options.meta};return N(H),H})(),U=await S(R),{maxPages:L}=t.options,Q=q?bZ:gZ;return{pages:Q(A.pages,U,L),pageParams:Q(A.pageParams,P,L)}};if(a&&i.length){const A=a==="backward",P=A?AZ:T7,q={pages:i,pageParams:o},W=P(n,q);l=await O(q,W,A)}else{const A=e??i.length;do{const P=d===0?o[0]??n.initialPageParam:T7(n,l);if(d>0&&P==null)break;l=await O(l,P),d++}while(d<A)}return l};t.options.persister?t.fetchFn=()=>{var y,N;return(N=(y=t.options).persister)==null?void 0:N.call(y,c,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r)}:t.fetchFn=c}}}function T7(e,{pages:t,pageParams:r}){const n=t.length-1;return t.length>0?e.getNextPageParam(t[n],t,r[n],r):void 0}function AZ(e,{pages:t,pageParams:r}){var n;return t.length>0?(n=e.getPreviousPageParam)==null?void 0:n.call(e,t[0],t,r[0],r):void 0}var Wb,Lu,_l,wm,Ru,Kh,zF,EZ=(zF=class extends xB{constructor(t){super();mn(this,Ru);mn(this,Wb);mn(this,Lu);mn(this,_l);mn(this,wm);Lr(this,Wb,t.client),this.mutationId=t.mutationId,Lr(this,_l,t.mutationCache),Lr(this,Lu,[]),this.state=t.state||bB(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){st(this,Lu).includes(t)||(st(this,Lu).push(t),this.clearGcTimeout(),st(this,_l).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){Lr(this,Lu,st(this,Lu).filter(r=>r!==t)),this.scheduleGc(),st(this,_l).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){st(this,Lu).length||(this.state.status==="pending"?this.scheduleGc():st(this,_l).remove(this))}continue(){var t;return((t=st(this,wm))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var o,l,d,c,u,x,b,g,k,y,N,S,O,A,P,q,W,R,U,L;const r=()=>{ea(this,Ru,Kh).call(this,{type:"continue"})},n={client:st(this,Wb),meta:this.options.meta,mutationKey:this.options.mutationKey};Lr(this,wm,mB({fn:()=>this.options.mutationFn?this.options.mutationFn(t,n):Promise.reject(new Error("No mutationFn found")),onFail:(Q,H)=>{ea(this,Ru,Kh).call(this,{type:"failed",failureCount:Q,error:H})},onPause:()=>{ea(this,Ru,Kh).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>st(this,_l).canRun(this)}));const a=this.state.status==="pending",i=!st(this,wm).canStart();try{if(a)r();else{ea(this,Ru,Kh).call(this,{type:"pending",variables:t,isPaused:i}),await((l=(o=st(this,_l).config).onMutate)==null?void 0:l.call(o,t,this,n));const H=await((c=(d=this.options).onMutate)==null?void 0:c.call(d,t,n));H!==this.state.context&&ea(this,Ru,Kh).call(this,{type:"pending",context:H,variables:t,isPaused:i})}const Q=await st(this,wm).start();return await((x=(u=st(this,_l).config).onSuccess)==null?void 0:x.call(u,Q,t,this.state.context,this,n)),await((g=(b=this.options).onSuccess)==null?void 0:g.call(b,Q,t,this.state.context,n)),await((y=(k=st(this,_l).config).onSettled)==null?void 0:y.call(k,Q,null,this.state.variables,this.state.context,this,n)),await((S=(N=this.options).onSettled)==null?void 0:S.call(N,Q,null,t,this.state.context,n)),ea(this,Ru,Kh).call(this,{type:"success",data:Q}),Q}catch(Q){try{throw await((A=(O=st(this,_l).config).onError)==null?void 0:A.call(O,Q,t,this.state.context,this,n)),await((q=(P=this.options).onError)==null?void 0:q.call(P,Q,t,this.state.context,n)),await((R=(W=st(this,_l).config).onSettled)==null?void 0:R.call(W,void 0,Q,this.state.variables,this.state.context,this,n)),await((L=(U=this.options).onSettled)==null?void 0:L.call(U,void 0,Q,t,this.state.context,n)),Q}finally{ea(this,Ru,Kh).call(this,{type:"error",error:Q})}}finally{st(this,_l).runNext(this)}}},Wb=new WeakMap,Lu=new WeakMap,_l=new WeakMap,wm=new WeakMap,Ru=new WeakSet,Kh=function(t){const r=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),Ei.batch(()=>{st(this,Lu).forEach(n=>{n.onMutationUpdate(t)}),st(this,_l).notify({mutation:this,type:"updated",action:t})})},zF);function bB(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var E0,Qd,Gb,qF,TZ=(qF=class extends hp{constructor(t={}){super();mn(this,E0);mn(this,Qd);mn(this,Gb);this.config=t,Lr(this,E0,new Set),Lr(this,Qd,new Map),Lr(this,Gb,0)}build(t,r,n){const a=new EZ({client:t,mutationCache:this,mutationId:++N2(this,Gb)._,options:t.defaultMutationOptions(r),state:n});return this.add(a),a}add(t){st(this,E0).add(t);const r=j2(t);if(typeof r=="string"){const n=st(this,Qd).get(r);n?n.push(t):st(this,Qd).set(r,[t])}this.notify({type:"added",mutation:t})}remove(t){if(st(this,E0).delete(t)){const r=j2(t);if(typeof r=="string"){const n=st(this,Qd).get(r);if(n)if(n.length>1){const a=n.indexOf(t);a!==-1&&n.splice(a,1)}else n[0]===t&&st(this,Qd).delete(r)}}this.notify({type:"removed",mutation:t})}canRun(t){const r=j2(t);if(typeof r=="string"){const n=st(this,Qd).get(r),a=n==null?void 0:n.find(i=>i.state.status==="pending");return!a||a===t}else return!0}runNext(t){var n;const r=j2(t);if(typeof r=="string"){const a=(n=st(this,Qd).get(r))==null?void 0:n.find(i=>i!==t&&i.state.isPaused);return(a==null?void 0:a.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Ei.batch(()=>{st(this,E0).forEach(t=>{this.notify({type:"removed",mutation:t})}),st(this,E0).clear(),st(this,Qd).clear()})}getAll(){return Array.from(st(this,E0))}find(t){const r={exact:!0,...t};return this.getAll().find(n=>k7(r,n))}findAll(t={}){return this.getAll().filter(r=>k7(t,r))}notify(t){Ei.batch(()=>{this.listeners.forEach(r=>{r(t)})})}resumePausedMutations(){const t=this.getAll().filter(r=>r.state.isPaused);return Ei.batch(()=>Promise.all(t.map(r=>r.continue().catch(Sl))))}},E0=new WeakMap,Qd=new WeakMap,Gb=new WeakMap,qF);function j2(e){var t;return(t=e.options.scope)==null?void 0:t.id}var T0,af,nc,O0,Z0,nw,fS,HF,OZ=(HF=class extends hp{constructor(r,n){super();mn(this,Z0);mn(this,T0);mn(this,af);mn(this,nc);mn(this,O0);Lr(this,T0,r),this.setOptions(n),this.bindMethods(),ea(this,Z0,nw).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(r){var a;const n=this.options;this.options=st(this,T0).defaultMutationOptions(r),mw(this.options,n)||st(this,T0).getMutationCache().notify({type:"observerOptionsUpdated",mutation:st(this,nc),observer:this}),n!=null&&n.mutationKey&&this.options.mutationKey&&Mm(n.mutationKey)!==Mm(this.options.mutationKey)?this.reset():((a=st(this,nc))==null?void 0:a.state.status)==="pending"&&st(this,nc).setOptions(this.options)}onUnsubscribe(){var r;this.hasListeners()||(r=st(this,nc))==null||r.removeObserver(this)}onMutationUpdate(r){ea(this,Z0,nw).call(this),ea(this,Z0,fS).call(this,r)}getCurrentResult(){return st(this,af)}reset(){var r;(r=st(this,nc))==null||r.removeObserver(this),Lr(this,nc,void 0),ea(this,Z0,nw).call(this),ea(this,Z0,fS).call(this)}mutate(r,n){var a;return Lr(this,O0,n),(a=st(this,nc))==null||a.removeObserver(this),Lr(this,nc,st(this,T0).getMutationCache().build(st(this,T0),this.options)),st(this,nc).addObserver(this),st(this,nc).execute(r)}},T0=new WeakMap,af=new WeakMap,nc=new WeakMap,O0=new WeakMap,Z0=new WeakSet,nw=function(){var n;const r=((n=st(this,nc))==null?void 0:n.state)??bB();Lr(this,af,{...r,isPending:r.status==="pending",isSuccess:r.status==="success",isError:r.status==="error",isIdle:r.status==="idle",mutate:this.mutate,reset:this.reset})},fS=function(r){Ei.batch(()=>{var n,a,i,o,l,d,c,u;if(st(this,O0)&&this.hasListeners()){const x=st(this,af).variables,b=st(this,af).context,g={client:st(this,T0),meta:this.options.meta,mutationKey:this.options.mutationKey};(r==null?void 0:r.type)==="success"?((a=(n=st(this,O0)).onSuccess)==null||a.call(n,r.data,x,b,g),(o=(i=st(this,O0)).onSettled)==null||o.call(i,r.data,null,x,b,g)):(r==null?void 0:r.type)==="error"&&((d=(l=st(this,O0)).onError)==null||d.call(l,r.error,x,b,g),(u=(c=st(this,O0)).onSettled)==null||u.call(c,void 0,r.error,x,b,g))}this.listeners.forEach(x=>{x(st(this,af))})})},HF),Fu,$F,PZ=($F=class extends hp{constructor(t={}){super();mn(this,Fu);this.config=t,Lr(this,Fu,new Map)}build(t,r,n){const a=r.queryKey,i=r.queryHash??k6(a,r);let o=this.get(i);return o||(o=new _Z({client:t,queryKey:a,queryHash:i,options:t.defaultQueryOptions(r),state:n,defaultOptions:t.getQueryDefaults(a)}),this.add(o)),o}add(t){st(this,Fu).has(t.queryHash)||(st(this,Fu).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const r=st(this,Fu).get(t.queryHash);r&&(t.destroy(),r===t&&st(this,Fu).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Ei.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return st(this,Fu).get(t)}getAll(){return[...st(this,Fu).values()]}find(t){const r={exact:!0,...t};return this.getAll().find(n=>w7(r,n))}findAll(t={}){const r=this.getAll();return Object.keys(t).length>0?r.filter(n=>w7(t,n)):r}notify(t){Ei.batch(()=>{this.listeners.forEach(r=>{r(t)})})}onFocus(){Ei.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Ei.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Fu=new WeakMap,$F),hi,sf,of,W1,G1,lf,K1,X1,VF,IZ=(VF=class{constructor(e={}){mn(this,hi);mn(this,sf);mn(this,of);mn(this,W1);mn(this,G1);mn(this,lf);mn(this,K1);mn(this,X1);Lr(this,hi,e.queryCache||new PZ),Lr(this,sf,e.mutationCache||new TZ),Lr(this,of,e.defaultOptions||{}),Lr(this,W1,new Map),Lr(this,G1,new Map),Lr(this,lf,0)}mount(){N2(this,lf)._++,st(this,lf)===1&&(Lr(this,K1,S6.subscribe(async e=>{e&&(await this.resumePausedMutations(),st(this,hi).onFocus())})),Lr(this,X1,xw.subscribe(async e=>{e&&(await this.resumePausedMutations(),st(this,hi).onOnline())})))}unmount(){var e,t;N2(this,lf)._--,st(this,lf)===0&&((e=st(this,K1))==null||e.call(this),Lr(this,K1,void 0),(t=st(this,X1))==null||t.call(this),Lr(this,X1,void 0))}isFetching(e){return st(this,hi).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return st(this,sf).findAll({...e,status:"pending"}).length}getQueryData(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=st(this,hi).get(t.queryHash))==null?void 0:r.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),r=st(this,hi).build(this,t),n=r.state.data;return n===void 0?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(hf(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(n))}getQueriesData(e){return st(this,hi).findAll(e).map(({queryKey:t,state:r})=>{const n=r.data;return[t,n]})}setQueryData(e,t,r){const n=this.defaultQueryOptions({queryKey:e}),a=st(this,hi).get(n.queryHash),i=a==null?void 0:a.state.data,o=mZ(t,i);if(o!==void 0)return st(this,hi).build(this,n).setData(o,{...r,manual:!0})}setQueriesData(e,t,r){return Ei.batch(()=>st(this,hi).findAll(e).map(({queryKey:n})=>[n,this.setQueryData(n,t,r)]))}getQueryState(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=st(this,hi).get(t.queryHash))==null?void 0:r.state}removeQueries(e){const t=st(this,hi);Ei.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=st(this,hi);return Ei.batch(()=>(r.findAll(e).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const r={revert:!0,...t},n=Ei.batch(()=>st(this,hi).findAll(e).map(a=>a.cancel(r)));return Promise.all(n).then(Sl).catch(Sl)}invalidateQueries(e,t={}){return Ei.batch(()=>(st(this,hi).findAll(e).forEach(r=>{r.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},n=Ei.batch(()=>st(this,hi).findAll(e).filter(a=>!a.isDisabled()&&!a.isStatic()).map(a=>{let i=a.fetch(void 0,r);return r.throwOnError||(i=i.catch(Sl)),a.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(n).then(Sl)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=st(this,hi).build(this,t);return r.isStaleByTime(hf(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Sl).catch(Sl)}fetchInfiniteQuery(e){return e.behavior=E7(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Sl).catch(Sl)}ensureInfiniteQueryData(e){return e.behavior=E7(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return xw.isOnline()?st(this,sf).resumePausedMutations():Promise.resolve()}getQueryCache(){return st(this,hi)}getMutationCache(){return st(this,sf)}getDefaultOptions(){return st(this,of)}setDefaultOptions(e){Lr(this,of,e)}setQueryDefaults(e,t){st(this,W1).set(Mm(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...st(this,W1).values()],r={};return t.forEach(n=>{sb(e,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(e,t){st(this,G1).set(Mm(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...st(this,G1).values()],r={};return t.forEach(n=>{sb(e,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...st(this,of).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=k6(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===_6&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...st(this,of).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){st(this,hi).clear(),st(this,sf).clear()}},hi=new WeakMap,sf=new WeakMap,of=new WeakMap,W1=new WeakMap,G1=new WeakMap,lf=new WeakMap,K1=new WeakMap,X1=new WeakMap,VF),vB=T.createContext(void 0),Un=e=>{const t=T.useContext(vB);if(e)return e;if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},DZ=({client:e,children:t})=>(T.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),s.jsx(vB.Provider,{value:e,children:t})),yB=T.createContext(!1),MZ=()=>T.useContext(yB);yB.Provider;function LZ(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var RZ=T.createContext(LZ()),FZ=()=>T.useContext(RZ),BZ=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},UZ=e=>{T.useEffect(()=>{e.clearReset()},[e])},zZ=({result:e,errorResetBoundary:t,throwOnError:r,query:n,suspense:a})=>e.isError&&!t.isReset()&&!e.isFetching&&n&&(a&&e.data===void 0||hB(r,[e.error,n])),qZ=e=>{if(e.suspense){const r=a=>a==="static"?a:Math.max(a??1e3,1e3),n=e.staleTime;e.staleTime=typeof n=="function"?(...a)=>r(n(...a)):r(n),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},HZ=(e,t)=>e.isLoading&&e.isFetching&&!t,$Z=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,O7=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()});function VZ(e,t,r){var x,b,g,k,y;const n=MZ(),a=FZ(),i=Un(r),o=i.defaultQueryOptions(e);(b=(x=i.getDefaultOptions().queries)==null?void 0:x._experimental_beforeQuery)==null||b.call(x,o),o._optimisticResults=n?"isRestoring":"optimistic",qZ(o),BZ(o,a),UZ(a);const l=!i.getQueryCache().get(o.queryHash),[d]=T.useState(()=>new t(i,o)),c=d.getOptimisticResult(o),u=!n&&e.subscribed!==!1;if(T.useSyncExternalStore(T.useCallback(N=>{const S=u?d.subscribe(Ei.batchCalls(N)):Sl;return d.updateResult(),S},[d,u]),()=>d.getCurrentResult(),()=>d.getCurrentResult()),T.useEffect(()=>{d.setOptions(o)},[o,d]),$Z(o,c))throw O7(o,d,a);if(zZ({result:c,errorResetBoundary:a,throwOnError:o.throwOnError,query:i.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw c.error;if((k=(g=i.getDefaultOptions().queries)==null?void 0:g._experimental_afterQuery)==null||k.call(g,o,c),o.experimental_prefetchInRender&&!Dm&&HZ(c,n)){const N=l?O7(o,d,a):(y=i.getQueryCache().get(o.queryHash))==null?void 0:y.promise;N==null||N.catch(Sl).finally(()=>{d.updateResult()})}return o.notifyOnChangeProps?c:d.trackResult(c)}function Ls(e,t){return VZ(e,SZ,t)}function WZ(e,t){const r=Un(t),n=r.getQueryCache();return T.useSyncExternalStore(T.useCallback(a=>n.subscribe(Ei.batchCalls(a)),[n]),()=>r.isFetching(e),()=>r.isFetching(e))}function GZ(e,t){const r=Un(t);return KZ({filters:{...e,status:"pending"}},r).length}function P7(e,t){return e.findAll(t.filters).map(r=>t.select?t.select(r):r.state)}function KZ(e={},t){const r=Un(t).getMutationCache(),n=T.useRef(e),a=T.useRef(null);return a.current===null&&(a.current=P7(r,e)),T.useEffect(()=>{n.current=e}),T.useSyncExternalStore(T.useCallback(i=>r.subscribe(()=>{const o=N6(a.current,P7(r,n.current));a.current!==o&&(a.current=o,Ei.schedule(i))}),[r]),()=>a.current,()=>a.current)}function xa(e,t){const r=Un(t),[n]=T.useState(()=>new OZ(r,e));T.useEffect(()=>{n.setOptions(e)},[n,e]);const a=T.useSyncExternalStore(T.useCallback(o=>n.subscribe(Ei.batchCalls(o)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),i=T.useCallback((o,l)=>{n.mutate(o,l).catch(Sl)},[n]);if(a.error&&hB(n.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:i,mutateAsync:a.mutate}}function wB(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=wB(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function Zn(){for(var e,t,r=0,n="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=wB(e))&&(n&&(n+=" "),n+=t);return n}function XZ(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",t.firstChild?t.insertBefore(r,t.firstChild):t.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}XZ(`:root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
`);var Yb=e=>typeof e=="number"&&!isNaN(e),Lm=e=>typeof e=="string",eh=e=>typeof e=="function",YZ=e=>Lm(e)||Yb(e),mS=e=>Lm(e)||eh(e)?e:null,QZ=(e,t)=>e===!1||Yb(e)&&e>0?e:t,xS=e=>T.isValidElement(e)||Lm(e)||eh(e)||Yb(e);function ZZ(e,t,r=300){let{scrollHeight:n,style:a}=e;requestAnimationFrame(()=>{a.minHeight="initial",a.height=n+"px",a.transition=`all ${r}ms`,requestAnimationFrame(()=>{a.height="0",a.padding="0",a.margin="0",setTimeout(t,r)})})}function JZ({enter:e,exit:t,appendPosition:r=!1,collapse:n=!0,collapseDuration:a=300}){return function({children:i,position:o,preventExitTransition:l,done:d,nodeRef:c,isIn:u,playToast:x}){let b=r?`${e}--${o}`:e,g=r?`${t}--${o}`:t,k=T.useRef(0);return T.useLayoutEffect(()=>{let y=c.current,N=b.split(" "),S=O=>{O.target===c.current&&(x(),y.removeEventListener("animationend",S),y.removeEventListener("animationcancel",S),k.current===0&&O.type!=="animationcancel"&&y.classList.remove(...N))};y.classList.add(...N),y.addEventListener("animationend",S),y.addEventListener("animationcancel",S)},[]),T.useEffect(()=>{let y=c.current,N=()=>{y.removeEventListener("animationend",N),n?ZZ(y,d,a):d()};u||(l?N():(k.current=1,y.className+=` ${g}`,y.addEventListener("animationend",N)))},[u]),ma.createElement(ma.Fragment,null,i)}}function I7(e,t){return{content:kB(e.content,e.props),containerId:e.props.containerId,id:e.props.toastId,theme:e.props.theme,type:e.props.type,data:e.props.data||{},isLoading:e.props.isLoading,icon:e.props.icon,reason:e.removalReason,status:t}}function kB(e,t,r=!1){return T.isValidElement(e)&&!Lm(e.type)?T.cloneElement(e,{closeToast:t.closeToast,toastProps:t,data:t.data,isPaused:r}):eh(e)?e({closeToast:t.closeToast,toastProps:t,data:t.data,isPaused:r}):e}function eJ({closeToast:e,theme:t,ariaLabel:r="close"}){return ma.createElement("button",{className:`Toastify__close-button Toastify__close-button--${t}`,type:"button",onClick:n=>{n.stopPropagation(),e(!0)},"aria-label":r},ma.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},ma.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function tJ({delay:e,isRunning:t,closeToast:r,type:n="default",hide:a,className:i,controlledProgress:o,progress:l,rtl:d,isIn:c,theme:u}){let x=a||o&&l===0,b={animationDuration:`${e}ms`,animationPlayState:t?"running":"paused"};o&&(b.transform=`scaleX(${l})`);let g=Zn("Toastify__progress-bar",o?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${u}`,`Toastify__progress-bar--${n}`,{"Toastify__progress-bar--rtl":d}),k=eh(i)?i({rtl:d,type:n,defaultClassName:g}):Zn(g,i),y={[o&&l>=1?"onTransitionEnd":"onAnimationEnd"]:o&&l<1?null:()=>{c&&r()}};return ma.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":x},ma.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${u} Toastify__progress-bar--${n}`}),ma.createElement("div",{role:"progressbar","aria-hidden":x?"true":"false","aria-label":"notification timer",className:k,style:b,...y}))}var rJ=1,NB=()=>`${rJ++}`;function nJ(e,t,r){let n=1,a=0,i=[],o=[],l=t,d=new Map,c=new Set,u=O=>(c.add(O),()=>c.delete(O)),x=()=>{o=Array.from(d.values()),c.forEach(O=>O())},b=({containerId:O,toastId:A,updateId:P})=>{let q=O?O!==e:e!==1,W=d.has(A)&&P==null;return q||W},g=(O,A)=>{d.forEach(P=>{var q;(A==null||A===P.props.toastId)&&((q=P.toggle)==null||q.call(P,O))})},k=O=>{var A,P;(P=(A=O.props)==null?void 0:A.onClose)==null||P.call(A,O.removalReason),O.isActive=!1},y=O=>{if(O==null)d.forEach(k);else{let A=d.get(O);A&&k(A)}x()},N=()=>{a-=i.length,i=[]},S=O=>{var A,P;let{toastId:q,updateId:W}=O.props,R=W==null;O.staleId&&d.delete(O.staleId),O.isActive=!0,d.set(q,O),x(),r(I7(O,R?"added":"updated")),R&&((P=(A=O.props).onOpen)==null||P.call(A))};return{id:e,props:l,observe:u,toggle:g,removeToast:y,toasts:d,clearQueue:N,buildToast:(O,A)=>{if(b(A))return;let{toastId:P,updateId:q,data:W,staleId:R,delay:U}=A,L=q==null;L&&a++;let Q={...l,style:l.toastStyle,key:n++,...Object.fromEntries(Object.entries(A).filter(([G,Z])=>Z!=null)),toastId:P,updateId:q,data:W,isIn:!1,className:mS(A.className||l.toastClassName),progressClassName:mS(A.progressClassName||l.progressClassName),autoClose:A.isLoading?!1:QZ(A.autoClose,l.autoClose),closeToast(G){d.get(P).removalReason=G,y(P)},deleteToast(){let G=d.get(P);if(G!=null){if(r(I7(G,"removed")),d.delete(P),a--,a<0&&(a=0),i.length>0){S(i.shift());return}x()}}};Q.closeButton=l.closeButton,A.closeButton===!1||xS(A.closeButton)?Q.closeButton=A.closeButton:A.closeButton===!0&&(Q.closeButton=xS(l.closeButton)?l.closeButton:!0);let H={content:O,props:Q,staleId:R};l.limit&&l.limit>0&&a>l.limit&&L?i.push(H):Yb(U)?setTimeout(()=>{S(H)},U):S(H)},setProps(O){l=O},setToggle:(O,A)=>{let P=d.get(O);P&&(P.toggle=A)},isToastActive:O=>{var A;return(A=d.get(O))==null?void 0:A.isActive},getSnapshot:()=>o}}var Tl=new Map,ib=[],pS=new Set,aJ=e=>pS.forEach(t=>t(e)),_B=()=>Tl.size>0;function sJ(){ib.forEach(e=>jB(e.content,e.options)),ib=[]}var iJ=(e,{containerId:t})=>{var r;return(r=Tl.get(t||1))==null?void 0:r.toasts.get(e)};function SB(e,t){var r;if(t)return!!((r=Tl.get(t))!=null&&r.isToastActive(e));let n=!1;return Tl.forEach(a=>{a.isToastActive(e)&&(n=!0)}),n}function oJ(e){if(!_B()){ib=ib.filter(t=>e!=null&&t.options.toastId!==e);return}if(e==null||YZ(e))Tl.forEach(t=>{t.removeToast(e)});else if(e&&("containerId"in e||"id"in e)){let t=Tl.get(e.containerId);t?t.removeToast(e.id):Tl.forEach(r=>{r.removeToast(e.id)})}}var lJ=(e={})=>{Tl.forEach(t=>{t.props.limit&&(!e.containerId||t.id===e.containerId)&&t.clearQueue()})};function jB(e,t){xS(e)&&(_B()||ib.push({content:e,options:t}),Tl.forEach(r=>{r.buildToast(e,t)}))}function cJ(e){var t;(t=Tl.get(e.containerId||1))==null||t.setToggle(e.id,e.fn)}function CB(e,t){Tl.forEach(r=>{(t==null||!(t!=null&&t.containerId)||(t==null?void 0:t.containerId)===r.id)&&r.toggle(e,t==null?void 0:t.id)})}function dJ(e){let t=e.containerId||1;return{subscribe(r){let n=nJ(t,e,aJ);Tl.set(t,n);let a=n.observe(r);return sJ(),()=>{a(),Tl.delete(t)}},setProps(r){var n;(n=Tl.get(t))==null||n.setProps(r)},getSnapshot(){var r;return(r=Tl.get(t))==null?void 0:r.getSnapshot()}}}function uJ(e){return pS.add(e),()=>{pS.delete(e)}}function hJ(e){return e&&(Lm(e.toastId)||Yb(e.toastId))?e.toastId:NB()}function Qb(e,t){return jB(e,t),t.toastId}function Bk(e,t){return{...t,type:t&&t.type||e,toastId:hJ(t)}}function Uk(e){return(t,r)=>Qb(t,Bk(e,r))}function Fa(e,t){return Qb(e,Bk("default",t))}Fa.loading=(e,t)=>Qb(e,Bk("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...t}));function fJ(e,{pending:t,error:r,success:n},a){let i;t&&(i=Lm(t)?Fa.loading(t,a):Fa.loading(t.render,{...a,...t}));let o={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},l=(c,u,x)=>{if(u==null){Fa.dismiss(i);return}let b={type:c,...o,...a,data:x},g=Lm(u)?{render:u}:u;return i?Fa.update(i,{...b,...g}):Fa(g.render,{...b,...g}),x},d=eh(e)?e():e;return d.then(c=>l("success",n,c)).catch(c=>l("error",r,c)),d}Fa.promise=fJ;Fa.success=Uk("success");Fa.info=Uk("info");Fa.error=Uk("error");Fa.warning=Uk("warning");Fa.warn=Fa.warning;Fa.dark=(e,t)=>Qb(e,Bk("default",{theme:"dark",...t}));function mJ(e){oJ(e)}Fa.dismiss=mJ;Fa.clearWaitingQueue=lJ;Fa.isActive=SB;Fa.update=(e,t={})=>{let r=iJ(e,t);if(r){let{props:n,content:a}=r,i={delay:100,...n,...t,toastId:t.toastId||e,updateId:NB()};i.toastId!==e&&(i.staleId=e);let o=i.render||a;delete i.render,Qb(o,i)}};Fa.done=e=>{Fa.update(e,{progress:1})};Fa.onChange=uJ;Fa.play=e=>CB(!0,e);Fa.pause=e=>CB(!1,e);function xJ(e){var t;let{subscribe:r,getSnapshot:n,setProps:a}=T.useRef(dJ(e)).current;a(e);let i=(t=T.useSyncExternalStore(r,n,n))==null?void 0:t.slice();function o(l){if(!i)return[];let d=new Map;return e.newestOnTop&&i.reverse(),i.forEach(c=>{let{position:u}=c.props;d.has(u)||d.set(u,[]),d.get(u).push(c)}),Array.from(d,c=>l(c[0],c[1]))}return{getToastToRender:o,isToastActive:SB,count:i==null?void 0:i.length}}function pJ(e){let[t,r]=T.useState(!1),[n,a]=T.useState(!1),i=T.useRef(null),o=T.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:l,pauseOnHover:d,closeToast:c,onClick:u,closeOnClick:x}=e;cJ({id:e.toastId,containerId:e.containerId,fn:r}),T.useEffect(()=>{if(e.pauseOnFocusLoss)return b(),()=>{g()}},[e.pauseOnFocusLoss]);function b(){document.hasFocus()||S(),window.addEventListener("focus",N),window.addEventListener("blur",S)}function g(){window.removeEventListener("focus",N),window.removeEventListener("blur",S)}function k(R){if(e.draggable===!0||e.draggable===R.pointerType){O();let U=i.current;o.canCloseOnClick=!0,o.canDrag=!0,U.style.transition="none",e.draggableDirection==="x"?(o.start=R.clientX,o.removalDistance=U.offsetWidth*(e.draggablePercent/100)):(o.start=R.clientY,o.removalDistance=U.offsetHeight*(e.draggablePercent===80?e.draggablePercent*1.5:e.draggablePercent)/100)}}function y(R){let{top:U,bottom:L,left:Q,right:H}=i.current.getBoundingClientRect();R.nativeEvent.type!=="touchend"&&e.pauseOnHover&&R.clientX>=Q&&R.clientX<=H&&R.clientY>=U&&R.clientY<=L?S():N()}function N(){r(!0)}function S(){r(!1)}function O(){o.didMove=!1,document.addEventListener("pointermove",P),document.addEventListener("pointerup",q)}function A(){document.removeEventListener("pointermove",P),document.removeEventListener("pointerup",q)}function P(R){let U=i.current;if(o.canDrag&&U){o.didMove=!0,t&&S(),e.draggableDirection==="x"?o.delta=R.clientX-o.start:o.delta=R.clientY-o.start,o.start!==R.clientX&&(o.canCloseOnClick=!1);let L=e.draggableDirection==="x"?`${o.delta}px, var(--y)`:`0, calc(${o.delta}px + var(--y))`;U.style.transform=`translate3d(${L},0)`,U.style.opacity=`${1-Math.abs(o.delta/o.removalDistance)}`}}function q(){A();let R=i.current;if(o.canDrag&&o.didMove&&R){if(o.canDrag=!1,Math.abs(o.delta)>o.removalDistance){a(!0),e.closeToast(!0),e.collapseAll();return}R.style.transition="transform 0.2s, opacity 0.2s",R.style.removeProperty("transform"),R.style.removeProperty("opacity")}}let W={onPointerDown:k,onPointerUp:y};return l&&d&&(W.onMouseEnter=S,e.stacked||(W.onMouseLeave=N)),x&&(W.onClick=R=>{u&&u(R),o.canCloseOnClick&&c(!0)}),{playToast:N,pauseToast:S,isRunning:t,preventExitTransition:n,toastRef:i,eventHandlers:W}}var gJ=typeof window<"u"?T.useLayoutEffect:T.useEffect,zk=({theme:e,type:t,isLoading:r,...n})=>ma.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:e==="colored"?"currentColor":`var(--toastify-icon-color-${t})`,...n});function bJ(e){return ma.createElement(zk,{...e},ma.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))}function vJ(e){return ma.createElement(zk,{...e},ma.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))}function yJ(e){return ma.createElement(zk,{...e},ma.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))}function wJ(e){return ma.createElement(zk,{...e},ma.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))}function kJ(){return ma.createElement("div",{className:"Toastify__spinner"})}var gS={info:vJ,warning:bJ,success:yJ,error:wJ,spinner:kJ},NJ=e=>e in gS;function _J({theme:e,type:t,isLoading:r,icon:n}){let a=null,i={theme:e,type:t};return n===!1||(eh(n)?a=n({...i,isLoading:r}):T.isValidElement(n)?a=T.cloneElement(n,i):r?a=gS.spinner():NJ(t)&&(a=gS[t](i))),a}var SJ=e=>{let{isRunning:t,preventExitTransition:r,toastRef:n,eventHandlers:a,playToast:i}=pJ(e),{closeButton:o,children:l,autoClose:d,onClick:c,type:u,hideProgressBar:x,closeToast:b,transition:g,position:k,className:y,style:N,progressClassName:S,updateId:O,role:A,progress:P,rtl:q,toastId:W,deleteToast:R,isIn:U,isLoading:L,closeOnClick:Q,theme:H,ariaLabel:G}=e,Z=Zn("Toastify__toast",`Toastify__toast-theme--${H}`,`Toastify__toast--${u}`,{"Toastify__toast--rtl":q},{"Toastify__toast--close-on-click":Q}),te=eh(y)?y({rtl:q,position:k,type:u,defaultClassName:Z}):Zn(Z,y),se=_J(e),ue=!!P||!d,ae={closeToast:b,type:u,theme:H},pe=null;return o===!1||(eh(o)?pe=o(ae):T.isValidElement(o)?pe=T.cloneElement(o,ae):pe=eJ(ae)),ma.createElement(g,{isIn:U,done:R,position:k,preventExitTransition:r,nodeRef:n,playToast:i},ma.createElement("div",{id:W,tabIndex:0,onClick:c,"data-in":U,className:te,...a,style:N,ref:n,...U&&{role:A,"aria-label":G}},se!=null&&ma.createElement("div",{className:Zn("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!L})},se),kB(l,e,!t),pe,!e.customProgressBar&&ma.createElement(tJ,{...O&&!ue?{key:`p-${O}`}:{},rtl:q,theme:H,delay:d,isRunning:t,isIn:U,closeToast:b,hide:x,type:u,className:S,controlledProgress:ue,progress:P||0})))},jJ=(e,t=!1)=>({enter:`Toastify--animate Toastify__${e}-enter`,exit:`Toastify--animate Toastify__${e}-exit`,appendPosition:t}),CJ=JZ(jJ("bounce",!0)),AJ={position:"top-right",transition:CJ,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light","aria-label":"Notifications Alt+T",hotKeys:e=>e.altKey&&e.code==="KeyT"};function EJ(e){let t={...AJ,...e},r=e.stacked,[n,a]=T.useState(!0),i=T.useRef(null),{getToastToRender:o,isToastActive:l,count:d}=xJ(t),{className:c,style:u,rtl:x,containerId:b,hotKeys:g}=t;function k(N){let S=Zn("Toastify__toast-container",`Toastify__toast-container--${N}`,{"Toastify__toast-container--rtl":x});return eh(c)?c({position:N,rtl:x,defaultClassName:S}):Zn(S,mS(c))}function y(){r&&(a(!0),Fa.play())}return gJ(()=>{var N;if(r){let S=i.current.querySelectorAll('[data-in="true"]'),O=12,A=(N=t.position)==null?void 0:N.includes("top"),P=0,q=0;Array.from(S).reverse().forEach((W,R)=>{let U=W;U.classList.add("Toastify__toast--stacked"),R>0&&(U.dataset.collapsed=`${n}`),U.dataset.pos||(U.dataset.pos=A?"top":"bot");let L=P*(n?.2:1)+(n?0:O*R);U.style.setProperty("--y",`${A?L:L*-1}px`),U.style.setProperty("--g",`${O}`),U.style.setProperty("--s",`${1-(n?q:0)}`),P+=U.offsetHeight,q+=.025})}},[n,d,r]),T.useEffect(()=>{function N(S){var O;let A=i.current;g(S)&&((O=A.querySelector('[tabIndex="0"]'))==null||O.focus(),a(!1),Fa.pause()),S.key==="Escape"&&(document.activeElement===A||A!=null&&A.contains(document.activeElement))&&(a(!0),Fa.play())}return document.addEventListener("keydown",N),()=>{document.removeEventListener("keydown",N)}},[g]),ma.createElement("section",{ref:i,className:"Toastify",id:b,onMouseEnter:()=>{r&&(a(!1),Fa.pause())},onMouseLeave:y,"aria-live":"polite","aria-atomic":"false","aria-relevant":"additions text","aria-label":t["aria-label"]},o((N,S)=>{let O=S.length?{...u}:{...u,pointerEvents:"none"};return ma.createElement("div",{tabIndex:-1,className:k(N),"data-stacked":r,style:O,key:`c-${N}`},S.map(({content:A,props:P})=>ma.createElement(SJ,{...P,stacked:r,collapseAll:y,isIn:l(P.toastId,P.containerId),key:`t-${P.key}`},A)))}))}const xg={position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0},Ze={success:(e,t)=>{Fa.success(e,{...xg,...t})},error:(e,t)=>{Fa.error(e,{...xg,...t})},warning:(e,t)=>{Fa.warning(e,{...xg,...t})},info:(e,t)=>{Fa.info(e,{...xg,...t})},promise:(e,t,r)=>Fa.promise(e,{pending:t.pending,success:t.success,error:t.error},{...xg,...r})};class TJ extends ma.Component{constructor(){super(...arguments);Oa(this,"state",{hasError:!1});Oa(this,"handleReload",()=>{this.setState({hasError:!1,error:void 0}),window.location.reload()})}static getDerivedStateFromError(r){return{hasError:!0,error:r}}componentDidCatch(r,n){console.error("Unhandled UI error:",r,n),Ze.error(" xy ra li khng mong mun. Vui lng th li.")}render(){return this.state.hasError?this.props.fallback||s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-50 dark:bg-slate-900",children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-xl text-center max-w-md",children:[s.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-white mb-2",children:"C li xy ra"}),s.jsx("p",{className:"text-slate-600 dark:text-slate-400 mb-4",children:"Vui lng ti li trang hoc quay li sau."}),s.jsx("button",{onClick:this.handleReload,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg",children:"Ti li trang"})]})}):this.props.children}}const OJ=()=>{const e=WZ(),t=GZ(),r=e+t>0,[n,a]=T.useState(!1);return T.useEffect(()=>{if(r)a(!0);else{const i=setTimeout(()=>a(!1),300);return()=>clearTimeout(i)}},[r]),s.jsxs("div",{"aria-hidden":!n,className:"fixed top-0 left-0 right-0 z-[60] pointer-events-none",style:{opacity:n?1:0,transition:"opacity 0.2s ease"},children:[s.jsx("div",{className:"h-1 bg-gradient-to-r from-emerald-500 via-blue-500 to-fuchsia-500 animate-[progress_1.2s_linear_infinite]"}),s.jsx("style",{children:`
        @keyframes progress {
          0% { transform: translateX(-100%); }
          100% { transform: translateX(100%); }
        }
        .animate-[progress_1.2s_linear_infinite] {
          background-size: 200% 100%;
        }
      `})]})};/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PJ=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),AB=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim();/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var IJ={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DJ=T.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:a="",children:i,iconNode:o,...l},d)=>T.createElement("svg",{ref:d,...IJ,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:AB("lucide",a),...l},[...o.map(([c,u])=>T.createElement(c,u)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xr=(e,t)=>{const r=T.forwardRef(({className:n,...a},i)=>T.createElement(DJ,{ref:i,iconNode:t,className:AB(`lucide-${PJ(e)}`,n),...a}));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EB=xr("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D7=xr("BadgePercent",[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"M9 9h.01",key:"1q5me6"}],["path",{d:"M15 15h.01",key:"lqbp3k"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TB=xr("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C6=xr("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MJ=xr("Battery",[["rect",{width:"16",height:"10",x:"2",y:"7",rx:"2",ry:"2",key:"1w10f2"}],["line",{x1:"22",x2:"22",y1:"11",y2:"13",key:"4dh1rd"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bS=xr("Bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A6=xr("Bike",[["circle",{cx:"18.5",cy:"17.5",r:"3.5",key:"15x4ox"}],["circle",{cx:"5.5",cy:"17.5",r:"3.5",key:"1noe27"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["path",{d:"M12 17.5V14l-3-3 4-3 2 3h2",key:"1npguv"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LJ=xr("Bolt",[["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}],["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hi=xr("Boxes",[["path",{d:"M2.97 12.92A2 2 0 0 0 2 14.63v3.24a2 2 0 0 0 .97 1.71l3 1.8a2 2 0 0 0 2.06 0L12 19v-5.5l-5-3-4.03 2.42Z",key:"lc1i9w"}],["path",{d:"m7 16.5-4.74-2.85",key:"1o9zyk"}],["path",{d:"m7 16.5 5-3",key:"va8pkn"}],["path",{d:"M7 16.5v5.17",key:"jnp8gn"}],["path",{d:"M12 13.5V19l3.97 2.38a2 2 0 0 0 2.06 0l3-1.8a2 2 0 0 0 .97-1.71v-3.24a2 2 0 0 0-.97-1.71L17 10.5l-5 3Z",key:"8zsnat"}],["path",{d:"m17 16.5-5-3",key:"8arw3v"}],["path",{d:"m17 16.5 4.74-2.85",key:"8rfmw"}],["path",{d:"M17 16.5v5.17",key:"k6z78m"}],["path",{d:"M7.97 4.42A2 2 0 0 0 7 6.13v4.37l5 3 5-3V6.13a2 2 0 0 0-.97-1.71l-3-1.8a2 2 0 0 0-2.06 0l-3 1.8Z",key:"1xygjf"}],["path",{d:"M12 8 7.26 5.15",key:"1vbdud"}],["path",{d:"m12 8 4.74-2.85",key:"3rx089"}],["path",{d:"M12 13.5V8",key:"1io7kd"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rm=xr("BriefcaseBusiness",[["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M16 6V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v2",key:"1ksdt3"}],["path",{d:"M22 13a18.15 18.15 0 0 1-20 0",key:"12hx5q"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RJ=xr("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FJ=xr("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w3=xr("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BJ=xr("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UJ=xr("Car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pw=xr("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zJ=xr("ChartLine",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ob=xr("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vS=xr("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qJ=xr("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HJ=xr("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $J=xr("CircleDollarSign",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 18V6",key:"zqpxq5"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VJ=xr("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E6=xr("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yS=xr("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WJ=xr("CloudDownload",[["path",{d:"M12 13v8l-4-4",key:"1f5nwf"}],["path",{d:"m12 21 4-4",key:"1lfcce"}],["path",{d:"M4.393 15.269A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.436 8.284",key:"ui1hmy"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GJ=xr("CloudUpload",[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KJ=xr("Cog",[["path",{d:"M12 20a8 8 0 1 0 0-16 8 8 0 0 0 0 16Z",key:"sobvz5"}],["path",{d:"M12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z",key:"11i496"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 22v-2",key:"1osdcq"}],["path",{d:"m17 20.66-1-1.73",key:"eq3orb"}],["path",{d:"M11 10.27 7 3.34",key:"16pf9h"}],["path",{d:"m20.66 17-1.73-1",key:"sg0v6f"}],["path",{d:"m3.34 7 1.73 1",key:"1ulond"}],["path",{d:"M14 12h8",key:"4f43i9"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"m20.66 7-1.73 1",key:"1ow05n"}],["path",{d:"m3.34 17 1.73-1",key:"nuk764"}],["path",{d:"m17 3.34-1 1.73",key:"2wel8s"}],["path",{d:"m11 13.73-4 6.93",key:"794ttg"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OB=xr("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M7=xr("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XJ=xr("Disc",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D0=xr("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L7=xr("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R7=xr("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YJ=xr("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F7=xr("FileSpreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vd=xr("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QJ=xr("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZJ=xr("FlashlightOff",[["path",{d:"M16 16v4a2 2 0 0 1-2 2h-4a2 2 0 0 1-2-2V10c0-2-2-2-2-4",key:"1r120k"}],["path",{d:"M7 2h11v4c0 2-2 2-2 4v1",key:"dz1920"}],["line",{x1:"11",x2:"18",y1:"6",y2:"6",key:"bi1vpe"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JJ=xr("Flashlight",[["path",{d:"M18 6c0 2-2 2-2 4v10a2 2 0 0 1-2 2h-4a2 2 0 0 1-2-2V10c0-2-2-2-2-4V2h12z",key:"1orkel"}],["line",{x1:"6",x2:"18",y1:"6",y2:"6",key:"1z11jq"}],["line",{x1:"12",x2:"12",y1:"12",y2:"12",key:"1f4yc1"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eee=xr("Hammer",[["path",{d:"m15 12-8.373 8.373a1 1 0 1 1-3-3L12 9",key:"eefl8a"}],["path",{d:"m18 15 4-4",key:"16gjal"}],["path",{d:"m21.5 11.5-1.914-1.914A2 2 0 0 1 19 8.172V7l-2.26-2.26a6 6 0 0 0-4.202-1.756L9 2.96l.92.82A6.18 6.18 0 0 1 12 8.4V10l2 2h1.172a2 2 0 0 1 1.414.586L18.5 14.5",key:"b7pghm"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fm=xr("HandCoins",[["path",{d:"M11 15h2a2 2 0 1 0 0-4h-3c-.6 0-1.1.2-1.4.6L3 17",key:"geh8rc"}],["path",{d:"m7 21 1.6-1.4c.3-.4.8-.6 1.4-.6h4c1.1 0 2.1-.4 2.8-1.2l4.6-4.4a2 2 0 0 0-2.75-2.91l-4.2 3.9",key:"1fto5m"}],["path",{d:"m2 16 6 6",key:"1pfhp9"}],["circle",{cx:"16",cy:"9",r:"2.9",key:"1n0dlu"}],["circle",{cx:"6",cy:"5",r:"3",key:"151irh"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gw=xr("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tee=xr("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B7=xr("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U7=xr("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lb=xr("Landmark",[["line",{x1:"3",x2:"21",y1:"22",y2:"22",key:"j8o0r"}],["line",{x1:"6",x2:"6",y1:"18",y2:"11",key:"10tf0k"}],["line",{x1:"10",x2:"10",y1:"18",y2:"11",key:"54lgf6"}],["line",{x1:"14",x2:"14",y1:"18",y2:"11",key:"380y"}],["line",{x1:"18",x2:"18",y1:"18",y2:"11",key:"1kevvc"}],["polygon",{points:"12 2 20 7 4 7",key:"jkujk7"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wS=xr("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ree=xr("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nee=xr("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PB=xr("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aee=xr("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const see=xr("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z7=xr("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iee=xr("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oee=xr("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lee=xr("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IB=xr("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q7=xr("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ru=xr("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DB=xr("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MB=xr("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H7=xr("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LB=xr("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cee=xr("PiggyBank",[["path",{d:"M19 5c-1.5 0-2.8 1.4-3 2-3.5-1.5-11-.3-11 5 0 1.8 0 3 2 4.5V20h4v-2h3v2h4v-4c1-.5 1.7-1 2-2h2v-4h-2c0-1-.5-1.5-1-2V5z",key:"1ivx2i"}],["path",{d:"M2 9v1c0 1.1.9 2 2 2h1",key:"nm575m"}],["path",{d:"M16 11h.01",key:"xkw8gn"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oc=xr("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iu=xr("Printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dee=xr("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uee=xr("RefreshCcw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $7=xr("Repeat",[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kS=xr("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hee=xr("ScanLine",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M7 12h10",key:"b7w52i"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nu=xr("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cb=xr("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fee=xr("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mee=xr("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const om=xr("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V7=xr("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W7=xr("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xee=xr("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12a2 2 0 0 1-2-2V7",key:"6c3vgh"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G7=xr("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pee=xr("SwitchCamera",[["path",{d:"M11 19H4a2 2 0 0 1-2-2V7a2 2 0 0 1 2-2h5",key:"mtk2lu"}],["path",{d:"M13 5h7a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-5",key:"120jsl"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["path",{d:"m18 22-3-3 3-3",key:"kgdoj7"}],["path",{d:"m6 2 3 3-3 3",key:"1fnbkv"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K7=xr("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const db=xr("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y1=xr("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bw=xr("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gee=xr("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bee=xr("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vee=xr("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X7=xr("UserCog",[["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m21.7 16.4-.9-.3",key:"12j9ji"}],["path",{d:"m15.2 13.9-.9-.3",key:"1fdjdi"}],["path",{d:"m16.6 18.7.3-.9",key:"heedtr"}],["path",{d:"m19.1 12.2.3-.9",key:"1af3ki"}],["path",{d:"m19.6 18.7-.4-1",key:"1x9vze"}],["path",{d:"m16.8 12.3-.4-1",key:"vqeiwj"}],["path",{d:"m14.3 16.6 1-.4",key:"1qlj63"}],["path",{d:"m20.7 13.8 1-.4",key:"1v5t8k"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y7=xr("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ff=xr("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q0=xr("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bm=xr("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ic=xr("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var NS=function(e,t){return NS=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])},NS(e,t)};function RB(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");NS(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var vw=function(){return vw=Object.assign||function(t){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},vw.apply(this,arguments)};function fp(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r}function FB(e,t,r,n){var a=arguments.length,i=a<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(e,t,r,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,r,i):o(t,r))||i);return a>3&&i&&Object.defineProperty(t,r,i),i}function BB(e,t){return function(r,n){t(r,n,e)}}function UB(e,t,r,n,a,i){function o(S){if(S!==void 0&&typeof S!="function")throw new TypeError("Function expected");return S}for(var l=n.kind,d=l==="getter"?"get":l==="setter"?"set":"value",c=!t&&e?n.static?e:e.prototype:null,u=t||(c?Object.getOwnPropertyDescriptor(c,n.name):{}),x,b=!1,g=r.length-1;g>=0;g--){var k={};for(var y in n)k[y]=y==="access"?{}:n[y];for(var y in n.access)k.access[y]=n.access[y];k.addInitializer=function(S){if(b)throw new TypeError("Cannot add initializers after decoration has completed");i.push(o(S||null))};var N=(0,r[g])(l==="accessor"?{get:u.get,set:u.set}:u[d],k);if(l==="accessor"){if(N===void 0)continue;if(N===null||typeof N!="object")throw new TypeError("Object expected");(x=o(N.get))&&(u.get=x),(x=o(N.set))&&(u.set=x),(x=o(N.init))&&a.unshift(x)}else(x=o(N))&&(l==="field"?a.unshift(x):u[d]=x)}c&&Object.defineProperty(c,n.name,u),b=!0}function zB(e,t,r){for(var n=arguments.length>2,a=0;a<t.length;a++)r=n?t[a].call(e,r):t[a].call(e);return n?r:void 0}function qB(e){return typeof e=="symbol"?e:"".concat(e)}function HB(e,t,r){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:r?"".concat(r," ",t):t})}function $B(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function cn(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{c(n.next(u))}catch(x){o(x)}}function d(u){try{c(n.throw(u))}catch(x){o(x)}}function c(u){u.done?i(u.value):a(u.value).then(l,d)}c((n=n.apply(e,t||[])).next())})}function VB(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,a,i,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=l(0),o.throw=l(1),o.return=l(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(c){return function(u){return d([c,u])}}function d(c){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(r=0)),r;)try{if(n=1,a&&(i=c[0]&2?a.return:c[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,c[1])).done)return i;switch(a=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,a=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){r.label=c[1];break}if(c[0]===6&&r.label<i[1]){r.label=i[1],i=c;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(c);break}i[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(u){c=[6,u],a=0}finally{n=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}var qk=Object.create?(function(e,t,r,n){n===void 0&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}):(function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]});function WB(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&qk(t,e,r)}function yw(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function T6(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),a,i=[],o;try{for(;(t===void 0||t-- >0)&&!(a=n.next()).done;)i.push(a.value)}catch(l){o={error:l}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return i}function GB(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(T6(arguments[t]));return e}function KB(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),a=0,t=0;t<r;t++)for(var i=arguments[t],o=0,l=i.length;o<l;o++,a++)n[a]=i[o];return n}function XB(e,t,r){if(r||arguments.length===2)for(var n=0,a=t.length,i;n<a;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))}function Q1(e){return this instanceof Q1?(this.v=e,this):new Q1(e)}function YB(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),a,i=[];return a=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",o),a[Symbol.asyncIterator]=function(){return this},a;function o(g){return function(k){return Promise.resolve(k).then(g,x)}}function l(g,k){n[g]&&(a[g]=function(y){return new Promise(function(N,S){i.push([g,y,N,S])>1||d(g,y)})},k&&(a[g]=k(a[g])))}function d(g,k){try{c(n[g](k))}catch(y){b(i[0][3],y)}}function c(g){g.value instanceof Q1?Promise.resolve(g.value.v).then(u,x):b(i[0][2],g)}function u(g){d("next",g)}function x(g){d("throw",g)}function b(g,k){g(k),i.shift(),i.length&&d(i[0][0],i[0][1])}}function QB(e){var t,r;return t={},n("next"),n("throw",function(a){throw a}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(a,i){t[a]=e[a]?function(o){return(r=!r)?{value:Q1(e[a](o)),done:!1}:i?i(o):o}:i}}function ZB(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof yw=="function"?yw(e):e[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(i){r[i]=e[i]&&function(o){return new Promise(function(l,d){o=e[i](o),a(l,d,o.done,o.value)})}}function a(i,o,l,d){Promise.resolve(d).then(function(c){i({value:c,done:l})},o)}}function JB(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var yee=Object.create?(function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}):function(e,t){e.default=t},_S=function(e){return _S=Object.getOwnPropertyNames||function(t){var r=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[r.length]=n);return r},_S(e)};function eU(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r=_S(e),n=0;n<r.length;n++)r[n]!=="default"&&qk(t,e,r[n]);return yee(t,e),t}function tU(e){return e&&e.__esModule?e:{default:e}}function rU(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)}function nU(e,t,r,n,a){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!a)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?a.call(e,r):a?a.value=r:t.set(e,r),r}function aU(e,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e=="function"?t===e:e.has(t)}function sU(e,t,r){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var n,a;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=t[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=t[Symbol.dispose],r&&(a=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");a&&(n=function(){try{a.call(this)}catch(i){return Promise.reject(i)}}),e.stack.push({value:t,dispose:n,async:r})}else r&&e.stack.push({async:!0});return t}var wee=typeof SuppressedError=="function"?SuppressedError:function(e,t,r){var n=new Error(r);return n.name="SuppressedError",n.error=e,n.suppressed=t,n};function iU(e){function t(i){e.error=e.hasError?new wee(i,e.error,"An error was suppressed during disposal."):i,e.hasError=!0}var r,n=0;function a(){for(;r=e.stack.pop();)try{if(!r.async&&n===1)return n=0,e.stack.push(r),Promise.resolve().then(a);if(r.dispose){var i=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(i).then(a,function(o){return t(o),a()})}else n|=1}catch(o){t(o)}if(n===1)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}return a()}function oU(e,t){return typeof e=="string"&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(r,n,a,i,o){return n?t?".jsx":".js":a&&(!i||!o)?r:a+i+"."+o.toLowerCase()+"js"}):e}const kee={__extends:RB,__assign:vw,__rest:fp,__decorate:FB,__param:BB,__esDecorate:UB,__runInitializers:zB,__propKey:qB,__setFunctionName:HB,__metadata:$B,__awaiter:cn,__generator:VB,__createBinding:qk,__exportStar:WB,__values:yw,__read:T6,__spread:GB,__spreadArrays:KB,__spreadArray:XB,__await:Q1,__asyncGenerator:YB,__asyncDelegator:QB,__asyncValues:ZB,__makeTemplateObject:JB,__importStar:eU,__importDefault:tU,__classPrivateFieldGet:rU,__classPrivateFieldSet:nU,__classPrivateFieldIn:aU,__addDisposableResource:sU,__disposeResources:iU,__rewriteRelativeImportExtension:oU},Nee=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:sU,get __assign(){return vw},__asyncDelegator:QB,__asyncGenerator:YB,__asyncValues:ZB,__await:Q1,__awaiter:cn,__classPrivateFieldGet:rU,__classPrivateFieldIn:aU,__classPrivateFieldSet:nU,__createBinding:qk,__decorate:FB,__disposeResources:iU,__esDecorate:UB,__exportStar:WB,__extends:RB,__generator:VB,__importDefault:tU,__importStar:eU,__makeTemplateObject:JB,__metadata:$B,__param:BB,__propKey:qB,__read:T6,__rest:fp,__rewriteRelativeImportExtension:oU,__runInitializers:zB,__setFunctionName:HB,__spread:GB,__spreadArray:XB,__spreadArrays:KB,__values:yw,default:kee},Symbol.toStringTag,{value:"Module"})),_ee=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);class O6 extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class Q7 extends O6{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Z7 extends O6{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class J7 extends O6{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var SS;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(SS||(SS={}));class See{constructor(t,{headers:r={},customFetch:n,region:a=SS.Any}={}){this.url=t,this.headers=r,this.region=a,this.fetch=_ee(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return cn(this,arguments,void 0,function*(r,n={}){var a;try{const{headers:i,method:o,body:l,signal:d}=n;let c={},{region:u}=n;u||(u=this.region);const x=new URL(`${this.url}/${r}`);u&&u!=="any"&&(c["x-region"]=u,x.searchParams.set("forceFunctionRegion",u));let b;l&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)?typeof Blob<"u"&&l instanceof Blob||l instanceof ArrayBuffer?(c["Content-Type"]="application/octet-stream",b=l):typeof l=="string"?(c["Content-Type"]="text/plain",b=l):typeof FormData<"u"&&l instanceof FormData?b=l:(c["Content-Type"]="application/json",b=JSON.stringify(l)):b=l;const g=yield this.fetch(x.toString(),{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},c),this.headers),i),body:b,signal:d}).catch(S=>{throw S.name==="AbortError"?S:new Q7(S)}),k=g.headers.get("x-relay-error");if(k&&k==="true")throw new Z7(g);if(!g.ok)throw new J7(g);let y=((a=g.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),N;return y==="application/json"?N=yield g.json():y==="application/octet-stream"||y==="application/pdf"?N=yield g.blob():y==="text/event-stream"?N=g:y==="multipart/form-data"?N=yield g.formData():N=yield g.text(),{data:N,error:null,response:g}}catch(i){return i instanceof Error&&i.name==="AbortError"?{data:null,error:new Q7(i)}:{data:null,error:i,response:i instanceof J7||i instanceof Z7?i.context:void 0}}})}}var Qo={};const mp=PY(Nee);var C2={},A2={},E2={},T2={},O2={},P2={},eO;function lU(){if(eO)return P2;eO=1,Object.defineProperty(P2,"__esModule",{value:!0});class e extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return P2.default=e,P2}var tO;function cU(){if(tO)return O2;tO=1,Object.defineProperty(O2,"__esModule",{value:!0});const t=mp.__importDefault(lU());class r{constructor(a){var i,o;this.shouldThrowOnError=!1,this.method=a.method,this.url=a.url,this.headers=new Headers(a.headers),this.schema=a.schema,this.body=a.body,this.shouldThrowOnError=(i=a.shouldThrowOnError)!==null&&i!==void 0?i:!1,this.signal=a.signal,this.isMaybeSingle=(o=a.isMaybeSingle)!==null&&o!==void 0?o:!1,a.fetch?this.fetch=a.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(a,i){return this.headers=new Headers(this.headers),this.headers.set(a,i),this}then(a,i){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const o=this.fetch;let l=o(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async d=>{var c,u,x,b;let g=null,k=null,y=null,N=d.status,S=d.statusText;if(d.ok){if(this.method!=="HEAD"){const q=await d.text();q===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((c=this.headers.get("Accept"))===null||c===void 0)&&c.includes("application/vnd.pgrst.plan+text"))?k=q:k=JSON.parse(q))}const A=(u=this.headers.get("Prefer"))===null||u===void 0?void 0:u.match(/count=(exact|planned|estimated)/),P=(x=d.headers.get("content-range"))===null||x===void 0?void 0:x.split("/");A&&P&&P.length>1&&(y=parseInt(P[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(k)&&(k.length>1?(g={code:"PGRST116",details:`Results contain ${k.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},k=null,y=null,N=406,S="Not Acceptable"):k.length===1?k=k[0]:k=null)}else{const A=await d.text();try{g=JSON.parse(A),Array.isArray(g)&&d.status===404&&(k=[],g=null,N=200,S="OK")}catch{d.status===404&&A===""?(N=204,S="No Content"):g={message:A}}if(g&&this.isMaybeSingle&&(!((b=g==null?void 0:g.details)===null||b===void 0)&&b.includes("0 rows"))&&(g=null,N=200,S="OK"),g&&this.shouldThrowOnError)throw new t.default(g)}return{error:g,data:k,count:y,status:N,statusText:S}});return this.shouldThrowOnError||(l=l.catch(d=>{var c,u,x;return{error:{message:`${(c=d==null?void 0:d.name)!==null&&c!==void 0?c:"FetchError"}: ${d==null?void 0:d.message}`,details:`${(u=d==null?void 0:d.stack)!==null&&u!==void 0?u:""}`,hint:"",code:`${(x=d==null?void 0:d.code)!==null&&x!==void 0?x:""}`},data:null,count:null,status:0,statusText:""}})),l.then(a,i)}returns(){return this}overrideTypes(){return this}}return O2.default=r,O2}var rO;function dU(){if(rO)return T2;rO=1,Object.defineProperty(T2,"__esModule",{value:!0});const t=mp.__importDefault(cU());class r extends t.default{select(a){let i=!1;const o=(a??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",o),this.headers.append("Prefer","return=representation"),this}order(a,{ascending:i=!0,nullsFirst:o,foreignTable:l,referencedTable:d=l}={}){const c=d?`${d}.order`:"order",u=this.url.searchParams.get(c);return this.url.searchParams.set(c,`${u?`${u},`:""}${a}.${i?"asc":"desc"}${o===void 0?"":o?".nullsfirst":".nullslast"}`),this}limit(a,{foreignTable:i,referencedTable:o=i}={}){const l=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(l,`${a}`),this}range(a,i,{foreignTable:o,referencedTable:l=o}={}){const d=typeof l>"u"?"offset":`${l}.offset`,c=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(d,`${a}`),this.url.searchParams.set(c,`${i-a+1}`),this}abortSignal(a){return this.signal=a,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:a=!1,verbose:i=!1,settings:o=!1,buffers:l=!1,wal:d=!1,format:c="text"}={}){var u;const x=[a?"analyze":null,i?"verbose":null,o?"settings":null,l?"buffers":null,d?"wal":null].filter(Boolean).join("|"),b=(u=this.headers.get("Accept"))!==null&&u!==void 0?u:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${c}; for="${b}"; options=${x};`),c==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(a){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${a}`),this}}return T2.default=r,T2}var nO;function P6(){if(nO)return E2;nO=1,Object.defineProperty(E2,"__esModule",{value:!0});const t=mp.__importDefault(dU()),r=new RegExp("[,()]");class n extends t.default{eq(i,o){return this.url.searchParams.append(i,`eq.${o}`),this}neq(i,o){return this.url.searchParams.append(i,`neq.${o}`),this}gt(i,o){return this.url.searchParams.append(i,`gt.${o}`),this}gte(i,o){return this.url.searchParams.append(i,`gte.${o}`),this}lt(i,o){return this.url.searchParams.append(i,`lt.${o}`),this}lte(i,o){return this.url.searchParams.append(i,`lte.${o}`),this}like(i,o){return this.url.searchParams.append(i,`like.${o}`),this}likeAllOf(i,o){return this.url.searchParams.append(i,`like(all).{${o.join(",")}}`),this}likeAnyOf(i,o){return this.url.searchParams.append(i,`like(any).{${o.join(",")}}`),this}ilike(i,o){return this.url.searchParams.append(i,`ilike.${o}`),this}ilikeAllOf(i,o){return this.url.searchParams.append(i,`ilike(all).{${o.join(",")}}`),this}ilikeAnyOf(i,o){return this.url.searchParams.append(i,`ilike(any).{${o.join(",")}}`),this}is(i,o){return this.url.searchParams.append(i,`is.${o}`),this}in(i,o){const l=Array.from(new Set(o)).map(d=>typeof d=="string"&&r.test(d)?`"${d}"`:`${d}`).join(",");return this.url.searchParams.append(i,`in.(${l})`),this}contains(i,o){return typeof o=="string"?this.url.searchParams.append(i,`cs.${o}`):Array.isArray(o)?this.url.searchParams.append(i,`cs.{${o.join(",")}}`):this.url.searchParams.append(i,`cs.${JSON.stringify(o)}`),this}containedBy(i,o){return typeof o=="string"?this.url.searchParams.append(i,`cd.${o}`):Array.isArray(o)?this.url.searchParams.append(i,`cd.{${o.join(",")}}`):this.url.searchParams.append(i,`cd.${JSON.stringify(o)}`),this}rangeGt(i,o){return this.url.searchParams.append(i,`sr.${o}`),this}rangeGte(i,o){return this.url.searchParams.append(i,`nxl.${o}`),this}rangeLt(i,o){return this.url.searchParams.append(i,`sl.${o}`),this}rangeLte(i,o){return this.url.searchParams.append(i,`nxr.${o}`),this}rangeAdjacent(i,o){return this.url.searchParams.append(i,`adj.${o}`),this}overlaps(i,o){return typeof o=="string"?this.url.searchParams.append(i,`ov.${o}`):this.url.searchParams.append(i,`ov.{${o.join(",")}}`),this}textSearch(i,o,{config:l,type:d}={}){let c="";d==="plain"?c="pl":d==="phrase"?c="ph":d==="websearch"&&(c="w");const u=l===void 0?"":`(${l})`;return this.url.searchParams.append(i,`${c}fts${u}.${o}`),this}match(i){return Object.entries(i).forEach(([o,l])=>{this.url.searchParams.append(o,`eq.${l}`)}),this}not(i,o,l){return this.url.searchParams.append(i,`not.${o}.${l}`),this}or(i,{foreignTable:o,referencedTable:l=o}={}){const d=l?`${l}.or`:"or";return this.url.searchParams.append(d,`(${i})`),this}filter(i,o,l){return this.url.searchParams.append(i,`${o}.${l}`),this}}return E2.default=n,E2}var aO;function uU(){if(aO)return A2;aO=1,Object.defineProperty(A2,"__esModule",{value:!0});const t=mp.__importDefault(P6());class r{constructor(a,{headers:i={},schema:o,fetch:l}){this.url=a,this.headers=new Headers(i),this.schema=o,this.fetch=l}select(a,i){const{head:o=!1,count:l}=i??{},d=o?"HEAD":"GET";let c=!1;const u=(a??"*").split("").map(x=>/\s/.test(x)&&!c?"":(x==='"'&&(c=!c),x)).join("");return this.url.searchParams.set("select",u),l&&this.headers.append("Prefer",`count=${l}`),new t.default({method:d,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(a,{count:i,defaultToNull:o=!0}={}){var l;const d="POST";if(i&&this.headers.append("Prefer",`count=${i}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const c=a.reduce((u,x)=>u.concat(Object.keys(x)),[]);if(c.length>0){const u=[...new Set(c)].map(x=>`"${x}"`);this.url.searchParams.set("columns",u.join(","))}}return new t.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}upsert(a,{onConflict:i,ignoreDuplicates:o=!1,count:l,defaultToNull:d=!0}={}){var c;const u="POST";if(this.headers.append("Prefer",`resolution=${o?"ignore":"merge"}-duplicates`),i!==void 0&&this.url.searchParams.set("on_conflict",i),l&&this.headers.append("Prefer",`count=${l}`),d||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const x=a.reduce((b,g)=>b.concat(Object.keys(g)),[]);if(x.length>0){const b=[...new Set(x)].map(g=>`"${g}"`);this.url.searchParams.set("columns",b.join(","))}}return new t.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}update(a,{count:i}={}){var o;const l="PATCH";return i&&this.headers.append("Prefer",`count=${i}`),new t.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}delete({count:a}={}){var i;const o="DELETE";return a&&this.headers.append("Prefer",`count=${a}`),new t.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}}return A2.default=r,A2}var sO;function jee(){if(sO)return C2;sO=1,Object.defineProperty(C2,"__esModule",{value:!0});const e=mp,t=e.__importDefault(uU()),r=e.__importDefault(P6());class n{constructor(i,{headers:o={},schema:l,fetch:d}={}){this.url=i,this.headers=new Headers(o),this.schemaName=l,this.fetch=d}from(i){const o=new URL(`${this.url}/${i}`);return new t.default(o,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(i){return new n(this.url,{headers:this.headers,schema:i,fetch:this.fetch})}rpc(i,o={},{head:l=!1,get:d=!1,count:c}={}){var u;let x;const b=new URL(`${this.url}/rpc/${i}`);let g;l||d?(x=l?"HEAD":"GET",Object.entries(o).filter(([y,N])=>N!==void 0).map(([y,N])=>[y,Array.isArray(N)?`{${N.join(",")}}`:`${N}`]).forEach(([y,N])=>{b.searchParams.append(y,N)})):(x="POST",g=o);const k=new Headers(this.headers);return c&&k.set("Prefer",`count=${c}`),new r.default({method:x,url:b,headers:k,schema:this.schemaName,body:g,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}}return C2.default=n,C2}var iO;function Cee(){if(iO)return Qo;iO=1,Object.defineProperty(Qo,"__esModule",{value:!0}),Qo.PostgrestError=Qo.PostgrestBuilder=Qo.PostgrestTransformBuilder=Qo.PostgrestFilterBuilder=Qo.PostgrestQueryBuilder=Qo.PostgrestClient=void 0;const e=mp,t=e.__importDefault(jee());Qo.PostgrestClient=t.default;const r=e.__importDefault(uU());Qo.PostgrestQueryBuilder=r.default;const n=e.__importDefault(P6());Qo.PostgrestFilterBuilder=n.default;const a=e.__importDefault(dU());Qo.PostgrestTransformBuilder=a.default;const i=e.__importDefault(cU());Qo.PostgrestBuilder=i.default;const o=e.__importDefault(lU());return Qo.PostgrestError=o.default,Qo.default={PostgrestClient:t.default,PostgrestQueryBuilder:r.default,PostgrestFilterBuilder:n.default,PostgrestTransformBuilder:a.default,PostgrestBuilder:i.default,PostgrestError:o.default},Qo}var hU=Cee();const fU=zc(hU),Aee=m6({__proto__:null,default:fU},[hU]),{PostgrestClient:Eee,PostgrestQueryBuilder:R9e,PostgrestFilterBuilder:F9e,PostgrestTransformBuilder:B9e,PostgrestBuilder:U9e,PostgrestError:z9e}=fU||Aee;class Tee{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const n=r.node,a=parseInt(n.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const n=this.getWebSocketConstructor();return new n(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const Oee="2.80.0",Pee=`realtime-js/${Oee}`,Iee="1.0.0",jS=1e4,Dee=1e3,Mee=100;var qg;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(qg||(qg={}));var to;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(to||(to={}));var Zd;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Zd||(Zd={}));var CS;(function(e){e.websocket="websocket"})(CS||(CS={}));var rm;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(rm||(rm={}));class Lee{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),n=new TextDecoder;return this._decodeBroadcast(t,r,n)}_decodeBroadcast(t,r,n){const a=r.getUint8(1),i=r.getUint8(2);let o=this.HEADER_LENGTH+2;const l=n.decode(t.slice(o,o+a));o=o+a;const d=n.decode(t.slice(o,o+i));o=o+i;const c=JSON.parse(n.decode(t.slice(o,t.byteLength)));return{ref:null,topic:l,event:d,payload:c}}}class mU{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var ws;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(ws||(ws={}));const oO=(e,t,r={})=>{var n;const a=(n=r.skipTypes)!==null&&n!==void 0?n:[];return t?Object.keys(t).reduce((i,o)=>(i[o]=Ree(o,e,t,a),i),{}):{}},Ree=(e,t,r,n)=>{const a=t.find(l=>l.name===e),i=a==null?void 0:a.type,o=r[e];return i&&!n.includes(i)?xU(i,o):AS(o)},xU=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return zee(t,r)}switch(e){case ws.bool:return Fee(t);case ws.float4:case ws.float8:case ws.int2:case ws.int4:case ws.int8:case ws.numeric:case ws.oid:return Bee(t);case ws.json:case ws.jsonb:return Uee(t);case ws.timestamp:return qee(t);case ws.abstime:case ws.date:case ws.daterange:case ws.int4range:case ws.int8range:case ws.money:case ws.reltime:case ws.text:case ws.time:case ws.timestamptz:case ws.timetz:case ws.tsrange:case ws.tstzrange:return AS(t);default:return AS(t)}},AS=e=>e,Fee=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},Bee=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},Uee=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},zee=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let i;const o=e.slice(1,r);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>xU(t,l))}return e},qee=e=>typeof e=="string"?e.replace(" ","T"):e,pU=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class k3{constructor(t,r,n={},a=jS){this.channel=t,this.event=r,this.payload=n,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var lO;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(lO||(lO={}));class Hg{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},a=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Hg.syncState(this.state,a,i,o),this.pendingDiffs.forEach(d=>{this.state=Hg.syncDiff(this.state,d,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},a=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=Hg.syncDiff(this.state,a,i,o),l())}),this.onJoin((a,i,o)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:i,newPresences:o})}),this.onLeave((a,i,o)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,a){const i=this.cloneDeep(t),o=this.transformState(r),l={},d={};return this.map(i,(c,u)=>{o[c]||(d[c]=u)}),this.map(o,(c,u)=>{const x=i[c];if(x){const b=u.map(N=>N.presence_ref),g=x.map(N=>N.presence_ref),k=u.filter(N=>g.indexOf(N.presence_ref)<0),y=x.filter(N=>b.indexOf(N.presence_ref)<0);k.length>0&&(l[c]=k),y.length>0&&(d[c]=y)}else l[c]=u}),this.syncDiff(i,{joins:l,leaves:d},n,a)}static syncDiff(t,r,n,a){const{joins:i,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),a||(a=()=>{}),this.map(i,(l,d)=>{var c;const u=(c=t[l])!==null&&c!==void 0?c:[];if(t[l]=this.cloneDeep(d),u.length>0){const x=t[l].map(g=>g.presence_ref),b=u.filter(g=>x.indexOf(g.presence_ref)<0);t[l].unshift(...b)}n(l,u,d)}),this.map(o,(l,d)=>{let c=t[l];if(!c)return;const u=d.map(x=>x.presence_ref);c=c.filter(x=>u.indexOf(x.presence_ref)<0),t[l]=c,a(l,c,d),c.length===0&&delete t[l]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const a=t[n];return"metas"in a?r[n]=a.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=a,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var cO;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(cO||(cO={}));var $g;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})($g||($g={}));var j0;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(j0||(j0={}));class I6{constructor(t,r={config:{}},n){var a,i;if(this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=to.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new k3(this,Zd.join,this.params,this.timeout),this.rejoinTimer=new mU(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=to.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=to.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=to.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=to.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=to.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Zd.reply,{},(o,l)=>{this._trigger(this._replyEventName(l),o)}),this.presence=new Hg(this),this.broadcastEndpointURL=pU(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(a=this.params.config)===null||a===void 0?void 0:a.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,r=this.timeout){var n,a,i;if(this.socket.isConnected()||this.socket.connect(),this.state==to.closed){const{config:{broadcast:o,presence:l,private:d}}=this.params,c=(a=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(g=>g.filter))!==null&&a!==void 0?a:[],u=!!this.bindings[$g.PRESENCE]&&this.bindings[$g.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,x={},b={broadcast:o,presence:Object.assign(Object.assign({},l),{enabled:u}),postgres_changes:c,private:d};this.socket.accessTokenValue&&(x.access_token=this.socket.accessTokenValue),this._onError(g=>t==null?void 0:t(j0.CHANNEL_ERROR,g)),this._onClose(()=>t==null?void 0:t(j0.CLOSED)),this.updateJoinPayload(Object.assign({config:b},x)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:g})=>{var k;if(this.socket.setAuth(),g===void 0){t==null||t(j0.SUBSCRIBED);return}else{const y=this.bindings.postgres_changes,N=(k=y==null?void 0:y.length)!==null&&k!==void 0?k:0,S=[];for(let O=0;O<N;O++){const A=y[O],{filter:{event:P,schema:q,table:W,filter:R}}=A,U=g&&g[O];if(U&&U.event===P&&U.schema===q&&U.table===W&&U.filter===R)S.push(Object.assign(Object.assign({},A),{id:U.id}));else{this.unsubscribe(),this.state=to.errored,t==null||t(j0.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=S,t&&t(j0.SUBSCRIBED);return}}).receive("error",g=>{this.state=to.errored,t==null||t(j0.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(g).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(j0.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this.state===to.joined&&t===$g.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,r,n)}async httpSend(t,r,n={}){var a;const i=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(r==null)return Promise.reject("Payload is required for httpSend()");const o={method:"POST",headers:{Authorization:i,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:r,private:this.private}]})},l=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(a=n.timeout)!==null&&a!==void 0?a:this.timeout);if(l.status===202)return{success:!0};let d=l.statusText;try{const c=await l.json();d=c.error||c.message||d}catch{}return Promise.reject(new Error(d))}async send(t,r={}){var n,a;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:o}=t,d={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,d,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((a=c.body)===null||a===void 0?void 0:a.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,d;const c=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((d=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||d===void 0)&&d.ack)&&i("ok"),c.receive("ok",()=>i("ok")),c.receive("error",()=>i("error")),c.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=to.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Zd.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(a=>{n=new k3(this,Zd.leave,{},t),n.receive("ok",()=>{r(),a("ok")}).receive("timeout",()=>{r(),a("timed out")}).receive("error",()=>{a("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=to.closed,this.bindings={}}async _fetchWithTimeout(t,r,n){const a=new AbortController,i=setTimeout(()=>a.abort(),n),o=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:a.signal}));return clearTimeout(i),o}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new k3(this,t,r,n);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>Mee){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var a,i;const o=t.toLocaleLowerCase(),{close:l,error:d,leave:c,join:u}=Zd;if(n&&[l,d,c,u].indexOf(o)>=0&&n!==this._joinRef())return;let b=this._onMessage(o,r,n);if(r&&!b)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(g=>{var k,y,N;return((k=g.filter)===null||k===void 0?void 0:k.event)==="*"||((N=(y=g.filter)===null||y===void 0?void 0:y.event)===null||N===void 0?void 0:N.toLocaleLowerCase())===o}).map(g=>g.callback(b,n)):(i=this.bindings[o])===null||i===void 0||i.filter(g=>{var k,y,N,S,O,A;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in g){const P=g.id,q=(k=g.filter)===null||k===void 0?void 0:k.event;return P&&((y=r.ids)===null||y===void 0?void 0:y.includes(P))&&(q==="*"||(q==null?void 0:q.toLocaleLowerCase())===((N=r.data)===null||N===void 0?void 0:N.type.toLocaleLowerCase()))}else{const P=(O=(S=g==null?void 0:g.filter)===null||S===void 0?void 0:S.event)===null||O===void 0?void 0:O.toLocaleLowerCase();return P==="*"||P===((A=r==null?void 0:r.event)===null||A===void 0?void 0:A.toLocaleLowerCase())}else return g.type.toLocaleLowerCase()===o}).map(g=>{if(typeof b=="object"&&"ids"in b){const k=b.data,{schema:y,table:N,commit_timestamp:S,type:O,errors:A}=k;b=Object.assign(Object.assign({},{schema:y,table:N,commit_timestamp:S,eventType:O,new:{},old:{},errors:A}),this._getPayloadRecords(k))}g.callback(b,n)})}_isClosed(){return this.state===to.closed}_isJoined(){return this.state===to.joined}_isJoining(){return this.state===to.joining}_isLeaving(){return this.state===to.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const a=t.toLocaleLowerCase(),i={type:a,filter:r,callback:n};return this.bindings[a]?this.bindings[a].push(i):this.bindings[a]=[i],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(a=>{var i;return!(((i=a.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&I6.isEqual(a.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Zd.close,{},t)}_onError(t){this._on(Zd.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=to.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=oO(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=oO(t.columns,t.old_record)),r}}const N3=()=>{},I2={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Hee=[1e3,2e3,5e3,1e4],$ee=1e4,Vee=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Wee{constructor(t,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=jS,this.transport=null,this.heartbeatIntervalMs=I2.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=N3,this.ref=0,this.reconnectTimer=null,this.logger=N3,this.conn=null,this.sendBuffer=[],this.serializer=new Lee,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>a?(...i)=>a(...i):(...i)=>fetch(...i),!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${CS.websocket}`,this.httpEndpoint=pU(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Tee.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Iee}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},t?this.conn.close(t,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case qg.connecting:return rm.Connecting;case qg.open:return rm.Open;case qg.closing:return rm.Closing;default:return rm.Closed}}isConnected(){return this.connectionState()===rm.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const n=`realtime:${t}`,a=this.getChannels().find(i=>i.topic===n);if(a)return a;{const i=new I6(`realtime:${t}`,r,this);return this.channels.push(i),i}}push(t){const{topic:r,event:n,payload:a,ref:i}=t,o=()=>{this.encode(t,l=>{var d;(d=this.conn)===null||d===void 0||d.send(l)})};this.log("push",`${r} ${n} (${i})`,a),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(Dee,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},I2.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(c){this.log("error","error in heartbeat callback",c)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:a,payload:i,ref:o}=r,l=o?`(${o})`:"",d=i.status||"";this.log("receive",`${d} ${n} ${a} ${l}`.trim(),i),this.channels.filter(c=>c._isMember(n)).forEach(c=>c._trigger(a,i,o)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(Zd.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",a=new URLSearchParams(r);return`${t}${n}${a}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([Vee],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r;t?r=t:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const a={access_token:r,version:Pee};r&&n.updateJoinPayload(a),n.joinedOnce&&n._isJoined()&&n._push(Zd.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(r)}catch(a){this.log("error",`error in ${t} callback`,a)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new mU(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},I2.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,n,a,i,o,l,d,c,u;if(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(n=t==null?void 0:t.timeout)!==null&&n!==void 0?n:jS,this.heartbeatIntervalMs=(a=t==null?void 0:t.heartbeatIntervalMs)!==null&&a!==void 0?a:I2.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=t==null?void 0:t.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(l=t==null?void 0:t.heartbeatCallback)!==null&&l!==void 0?l:N3,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(d=t==null?void 0:t.reconnectAfterMs)!==null&&d!==void 0?d:(x=>Hee[x-1]||$ee),this.encode=(c=t==null?void 0:t.encode)!==null&&c!==void 0?c:((x,b)=>b(JSON.stringify(x))),this.decode=(u=t==null?void 0:t.decode)!==null&&u!==void 0?u:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class D6 extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Zs(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class Gee extends D6{constructor(t,r,n){super(t),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class ES extends D6{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}const M6=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),Kee=()=>Response,TS=e=>{if(Array.isArray(e))return e.map(r=>TS(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const a=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[a]=TS(n)}),t},Xee=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},_3=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},Yee=(e,t,r)=>cn(void 0,void 0,void 0,function*(){const n=yield Kee();e instanceof n&&!(r!=null&&r.noResolveJson)?e.json().then(a=>{const i=e.status||500,o=(a==null?void 0:a.statusCode)||i+"";t(new Gee(_3(a),i,o))}).catch(a=>{t(new ES(_3(a),a))}):t(new ES(_3(e),e))}),Qee=(e,t,r,n)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!n?a:(Xee(n)?(a.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),a.body=JSON.stringify(n)):a.body=n,t!=null&&t.duplex&&(a.duplex=t.duplex),Object.assign(Object.assign({},a),r))};function Zb(e,t,r,n,a,i){return cn(this,void 0,void 0,function*(){return new Promise((o,l)=>{e(r,Qee(t,n,a,i)).then(d=>{if(!d.ok)throw d;return n!=null&&n.noResolveJson?d:d.json()}).then(d=>o(d)).catch(d=>Yee(d,l,n))})})}function ub(e,t,r,n){return cn(this,void 0,void 0,function*(){return Zb(e,"GET",t,r,n)})}function Xd(e,t,r,n,a){return cn(this,void 0,void 0,function*(){return Zb(e,"POST",t,n,a,r)})}function OS(e,t,r,n,a){return cn(this,void 0,void 0,function*(){return Zb(e,"PUT",t,n,a,r)})}function Zee(e,t,r,n){return cn(this,void 0,void 0,function*(){return Zb(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function L6(e,t,r,n,a){return cn(this,void 0,void 0,function*(){return Zb(e,"DELETE",t,n,a,r)})}class Jee{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r}then(t,r){return this.execute().then(t,r)}execute(){return cn(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Zs(t))return{data:null,error:t};throw t}})}}var gU;class ete{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r,this[gU]="BlobDownloadBuilder",this.promise=null}asStream(){return new Jee(this.downloadFn,this.shouldThrowOnError)}then(t,r){return this.getPromise().then(t,r)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return cn(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Zs(t))return{data:null,error:t};throw t}})}}gU=Symbol.toStringTag;const tte={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},dO={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class rte{constructor(t,r={},n,a){this.shouldThrowOnError=!1,this.url=t,this.headers=r,this.bucketId=n,this.fetch=M6(a)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,r,n,a){return cn(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},dO),a);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const d=o.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),d&&i.append("metadata",this.encodeMetadata(d)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.has("cacheControl")||i.append("cacheControl",o.cacheControl),d&&!i.has("metadata")&&i.append("metadata",this.encodeMetadata(d))):(i=n,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,d&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(d))),(typeof ReadableStream<"u"&&i instanceof ReadableStream||i&&typeof i=="object"&&"pipe"in i&&typeof i.pipe=="function")&&!o.duplex&&(o.duplex="half")),a!=null&&a.headers&&(l=Object.assign(Object.assign({},l),a.headers));const c=this._removeEmptyFolders(r),u=this._getFinalPath(c),x=yield(t=="PUT"?OS:Xd)(this.fetch,`${this.url}/object/${u}`,i,Object.assign({headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:c,id:x.Id,fullPath:x.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Zs(i))return{data:null,error:i};throw i}})}upload(t,r,n){return cn(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,a){return cn(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),o=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",r);try{let d;const c=Object.assign({upsert:dO.upsert},a),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&n instanceof Blob?(d=new FormData,d.append("cacheControl",c.cacheControl),d.append("",n)):typeof FormData<"u"&&n instanceof FormData?(d=n,d.append("cacheControl",c.cacheControl)):(d=n,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType);const x=yield OS(this.fetch,l.toString(),d,{headers:u});return{data:{path:i,fullPath:x.Key},error:null}}catch(d){if(this.shouldThrowOnError)throw d;if(Zs(d))return{data:null,error:d};throw d}})}createSignedUploadUrl(t,r){return cn(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const a=Object.assign({},this.headers);r!=null&&r.upsert&&(a["x-upsert"]="true");const i=yield Xd(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:a}),o=new URL(this.url+i.url),l=o.searchParams.get("token");if(!l)throw new D6("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:l},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Zs(n))return{data:null,error:n};throw n}})}update(t,r,n){return cn(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return cn(this,void 0,void 0,function*(){try{return{data:yield Xd(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Zs(a))return{data:null,error:a};throw a}})}copy(t,r,n){return cn(this,void 0,void 0,function*(){try{return{data:{path:(yield Xd(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Zs(a))return{data:null,error:a};throw a}})}createSignedUrl(t,r,n){return cn(this,void 0,void 0,function*(){try{let a=this._getFinalPath(t),i=yield Xd(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Zs(a))return{data:null,error:a};throw a}})}createSignedUrls(t,r,n){return cn(this,void 0,void 0,function*(){try{const a=yield Xd(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:a.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Zs(a))return{data:null,error:a};throw a}})}download(t,r){const a=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),o=i?`?${i}`:"",l=this._getFinalPath(t),d=()=>ub(this.fetch,`${this.url}/${a}/${l}${o}`,{headers:this.headers,noResolveJson:!0});return new ete(d,this.shouldThrowOnError)}info(t){return cn(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield ub(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:TS(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Zs(n))return{data:null,error:n};throw n}})}exists(t){return cn(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield Zee(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Zs(n)&&n instanceof ES){const a=n.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),a=[],i=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&a.push(i);const l=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",d=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});d!==""&&a.push(d);let c=a.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${c}`)}}}remove(t){return cn(this,void 0,void 0,function*(){try{return{data:yield L6(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Zs(r))return{data:null,error:r};throw r}})}list(t,r,n){return cn(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},tte),r),{prefix:t||""});return{data:yield Xd(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},n),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Zs(a))return{data:null,error:a};throw a}})}listV2(t,r){return cn(this,void 0,void 0,function*(){try{const n=Object.assign({},t);return{data:yield Xd(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Zs(n))return{data:null,error:n};throw n}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const bU="2.80.0",vU={"X-Client-Info":`storage-js/${bU}`};class nte{constructor(t,r={},n,a){this.shouldThrowOnError=!1;const i=new URL(t);a!=null&&a.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},vU),r),this.fetch=M6(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(t){return cn(this,void 0,void 0,function*(){try{const r=this.listBucketOptionsToQueryString(t);return{data:yield ub(this.fetch,`${this.url}/bucket${r}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Zs(r))return{data:null,error:r};throw r}})}getBucket(t){return cn(this,void 0,void 0,function*(){try{return{data:yield ub(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Zs(r))return{data:null,error:r};throw r}})}createBucket(t){return cn(this,arguments,void 0,function*(r,n={public:!1}){try{return{data:yield Xd(this.fetch,`${this.url}/bucket`,{id:r,name:r,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Zs(a))return{data:null,error:a};throw a}})}updateBucket(t,r){return cn(this,void 0,void 0,function*(){try{return{data:yield OS(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Zs(n))return{data:null,error:n};throw n}})}emptyBucket(t){return cn(this,void 0,void 0,function*(){try{return{data:yield Xd(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Zs(r))return{data:null,error:r};throw r}})}deleteBucket(t){return cn(this,void 0,void 0,function*(){try{return{data:yield L6(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Zs(r))return{data:null,error:r};throw r}})}listBucketOptionsToQueryString(t){const r={};return t&&("limit"in t&&(r.limit=String(t.limit)),"offset"in t&&(r.offset=String(t.offset)),t.search&&(r.search=t.search),t.sortColumn&&(r.sortColumn=t.sortColumn),t.sortOrder&&(r.sortOrder=t.sortOrder)),Object.keys(r).length>0?"?"+new URLSearchParams(r).toString():""}}class ate{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},vU),r),this.fetch=M6(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return cn(this,void 0,void 0,function*(){try{return{data:yield Xd(this.fetch,`${this.url}/bucket`,{name:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Zs(r))return{data:null,error:r};throw r}})}listBuckets(t){return cn(this,void 0,void 0,function*(){try{const r=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&r.set("limit",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&r.set("offset",t.offset.toString()),t!=null&&t.sortColumn&&r.set("sortColumn",t.sortColumn),t!=null&&t.sortOrder&&r.set("sortOrder",t.sortOrder),t!=null&&t.search&&r.set("search",t.search);const n=r.toString(),a=n?`${this.url}/bucket?${n}`:`${this.url}/bucket`;return{data:yield ub(this.fetch,a,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Zs(r))return{data:null,error:r};throw r}})}deleteBucket(t){return cn(this,void 0,void 0,function*(){try{return{data:yield L6(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Zs(r))return{data:null,error:r};throw r}})}}const R6={"X-Client-Info":`storage-js/${bU}`,"Content-Type":"application/json"};class yU extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function Tc(e){return typeof e=="object"&&e!==null&&"__isStorageVectorsError"in e}class S3 extends yU{constructor(t,r,n){super(t),this.name="StorageVectorsApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class ste extends yU{constructor(t,r){super(t),this.name="StorageVectorsUnknownError",this.originalError=r}}var uO;(function(e){e.InternalError="InternalError",e.S3VectorConflictException="S3VectorConflictException",e.S3VectorNotFoundException="S3VectorNotFoundException",e.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",e.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",e.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(uO||(uO={}));const F6=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),ite=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},hO=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),ote=(e,t,r)=>cn(void 0,void 0,void 0,function*(){if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(r!=null&&r.noResolveJson)){const a=e.status||500,i=e;if(typeof i.json=="function")i.json().then(o=>{const l=(o==null?void 0:o.statusCode)||(o==null?void 0:o.code)||a+"";t(new S3(hO(o),a,l))}).catch(()=>{const o=a+"",l=i.statusText||`HTTP ${a} error`;t(new S3(l,a,o))});else{const o=a+"",l=i.statusText||`HTTP ${a} error`;t(new S3(l,a,o))}}else t(new ste(hO(e),e))}),lte=(e,t,r,n)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return n?(ite(n)?(a.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),a.body=JSON.stringify(n)):a.body=n,Object.assign(Object.assign({},a),r)):a};function cte(e,t,r,n,a,i){return cn(this,void 0,void 0,function*(){return new Promise((o,l)=>{e(r,lte(t,n,a,i)).then(d=>{if(!d.ok)throw d;if(n!=null&&n.noResolveJson)return d;const c=d.headers.get("content-type");return!c||!c.includes("application/json")?{}:d.json()}).then(d=>o(d)).catch(d=>ote(d,l,n))})})}function Oc(e,t,r,n,a){return cn(this,void 0,void 0,function*(){return cte(e,"POST",t,n,a,r)})}class dte{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},R6),r),this.fetch=F6(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(t){return cn(this,void 0,void 0,function*(){try{return{data:(yield Oc(this.fetch,`${this.url}/CreateIndex`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Tc(r))return{data:null,error:r};throw r}})}getIndex(t,r){return cn(this,void 0,void 0,function*(){try{return{data:yield Oc(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:t,indexName:r},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Tc(n))return{data:null,error:n};throw n}})}listIndexes(t){return cn(this,void 0,void 0,function*(){try{return{data:yield Oc(this.fetch,`${this.url}/ListIndexes`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Tc(r))return{data:null,error:r};throw r}})}deleteIndex(t,r){return cn(this,void 0,void 0,function*(){try{return{data:(yield Oc(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:t,indexName:r},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Tc(n))return{data:null,error:n};throw n}})}}class ute{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},R6),r),this.fetch=F6(n)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(t){return cn(this,void 0,void 0,function*(){try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Oc(this.fetch,`${this.url}/PutVectors`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Tc(r))return{data:null,error:r};throw r}})}getVectors(t){return cn(this,void 0,void 0,function*(){try{return{data:yield Oc(this.fetch,`${this.url}/GetVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Tc(r))return{data:null,error:r};throw r}})}listVectors(t){return cn(this,void 0,void 0,function*(){try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:yield Oc(this.fetch,`${this.url}/ListVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Tc(r))return{data:null,error:r};throw r}})}queryVectors(t){return cn(this,void 0,void 0,function*(){try{return{data:yield Oc(this.fetch,`${this.url}/QueryVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Tc(r))return{data:null,error:r};throw r}})}deleteVectors(t){return cn(this,void 0,void 0,function*(){try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Oc(this.fetch,`${this.url}/DeleteVectors`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Tc(r))return{data:null,error:r};throw r}})}}class hte{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},R6),r),this.fetch=F6(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return cn(this,void 0,void 0,function*(){try{return{data:(yield Oc(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Tc(r))return{data:null,error:r};throw r}})}getBucket(t){return cn(this,void 0,void 0,function*(){try{return{data:yield Oc(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Tc(r))return{data:null,error:r};throw r}})}listBuckets(){return cn(this,arguments,void 0,function*(t={}){try{return{data:yield Oc(this.fetch,`${this.url}/ListVectorBuckets`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Tc(r))return{data:null,error:r};throw r}})}deleteBucket(t){return cn(this,void 0,void 0,function*(){try{return{data:(yield Oc(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Tc(r))return{data:null,error:r};throw r}})}}class fte extends hte{constructor(t,r={}){super(t,r.headers||{},r.fetch)}from(t){return new mte(this.url,this.headers,t,this.fetch)}}class mte extends dte{constructor(t,r,n,a){super(t,r,a),this.vectorBucketName=n}createIndex(t){const r=Object.create(null,{createIndex:{get:()=>super.createIndex}});return cn(this,void 0,void 0,function*(){return r.createIndex.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const t=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return cn(this,arguments,void 0,function*(r={}){return t.listIndexes.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName}))})}getIndex(t){const r=Object.create(null,{getIndex:{get:()=>super.getIndex}});return cn(this,void 0,void 0,function*(){return r.getIndex.call(this,this.vectorBucketName,t)})}deleteIndex(t){const r=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return cn(this,void 0,void 0,function*(){return r.deleteIndex.call(this,this.vectorBucketName,t)})}index(t){return new xte(this.url,this.headers,this.vectorBucketName,t,this.fetch)}}class xte extends ute{constructor(t,r,n,a,i){super(t,r,i),this.vectorBucketName=n,this.indexName=a}putVectors(t){const r=Object.create(null,{putVectors:{get:()=>super.putVectors}});return cn(this,void 0,void 0,function*(){return r.putVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(t){const r=Object.create(null,{getVectors:{get:()=>super.getVectors}});return cn(this,void 0,void 0,function*(){return r.getVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const t=Object.create(null,{listVectors:{get:()=>super.listVectors}});return cn(this,arguments,void 0,function*(r={}){return t.listVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(t){const r=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return cn(this,void 0,void 0,function*(){return r.queryVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(t){const r=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return cn(this,void 0,void 0,function*(){return r.deleteVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class pte extends nte{constructor(t,r={},n,a){super(t,r,n,a)}from(t){return new rte(this.url,this.headers,t,this.fetch)}get vectors(){return new fte(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new ate(this.url+"/iceberg",this.headers,this.fetch)}}const gte="2.80.0";let Mg="";typeof Deno<"u"?Mg="deno":typeof document<"u"?Mg="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Mg="react-native":Mg="node";const bte={"X-Client-Info":`supabase-js-${Mg}/${gte}`},vte={headers:bte},yte={schema:"public"},wte={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},kte={},Nte=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),_te=()=>Headers,Ste=(e,t,r)=>{const n=Nte(r),a=_te();return async(i,o)=>{var l;const d=(l=await t())!==null&&l!==void 0?l:e;let c=new a(o==null?void 0:o.headers);return c.has("apikey")||c.set("apikey",e),c.has("Authorization")||c.set("Authorization",`Bearer ${d}`),n(i,Object.assign(Object.assign({},o),{headers:c}))}};function jte(e){return e.endsWith("/")?e:e+"/"}function Cte(e,t){var r,n;const{db:a,auth:i,realtime:o,global:l}=e,{db:d,auth:c,realtime:u,global:x}=t,b={db:Object.assign(Object.assign({},d),a),auth:Object.assign(Object.assign({},c),i),realtime:Object.assign(Object.assign({},u),o),storage:{},global:Object.assign(Object.assign(Object.assign({},x),l),{headers:Object.assign(Object.assign({},(r=x==null?void 0:x.headers)!==null&&r!==void 0?r:{}),(n=l==null?void 0:l.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return e.accessToken?b.accessToken=e.accessToken:delete b.accessToken,b}function Ate(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(jte(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const wU="2.80.0",x1=30*1e3,PS=3,j3=PS*x1,Ete="http://localhost:9999",Tte="supabase.auth.token",Ote={"X-Client-Info":`gotrue-js/${wU}`},IS="X-Supabase-Api-Version",kU={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Pte=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Ite=600*1e3;class hb extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function pn(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class Dte extends hb{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function Mte(e){return pn(e)&&e.name==="AuthApiError"}class nm extends hb{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class _f extends hb{constructor(t,r,n,a){super(t,n,a),this.name=r,this.status=n}}class Gd extends _f{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Lte(e){return pn(e)&&e.name==="AuthSessionMissingError"}class Qx extends _f{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class D2 extends _f{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class M2 extends _f{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Rte(e){return pn(e)&&e.name==="AuthImplicitGrantRedirectError"}class fO extends _f{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class DS extends _f{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function C3(e){return pn(e)&&e.name==="AuthRetryableFetchError"}class mO extends _f{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class MS extends _f{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const ww="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),xO=` 	
\r=`.split(""),Fte=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<xO.length;t+=1)e[xO[t].charCodeAt(0)]=-2;for(let t=0;t<ww.length;t+=1)e[ww[t].charCodeAt(0)]=t;return e})();function pO(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(ww[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(ww[n]),t.queuedBits-=6}}function NU(e,t,r){const n=Fte[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function gO(e){const t=[],r=o=>{t.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},i=o=>{zte(o,n,r)};for(let o=0;o<e.length;o+=1)NU(e.charCodeAt(o),a,i);return t.join("")}function Bte(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function Ute(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const a=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|a)+65536,r+=1}Bte(n,t)}}function zte(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if((e>>7-n&1)===0){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function _1(e){const t=[],r={queue:0,queuedBits:0},n=a=>{t.push(a)};for(let a=0;a<e.length;a+=1)NU(e.charCodeAt(a),r,n);return new Uint8Array(t)}function qte(e){const t=[];return Ute(e,r=>t.push(r)),new Uint8Array(t)}function lm(e){const t=[],r={queue:0,queuedBits:0},n=a=>{t.push(a)};return e.forEach(a=>pO(a,r,n)),pO(null,r,n),t.join("")}function Hte(e){return Math.round(Date.now()/1e3)+e}function $te(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const nl=()=>typeof window<"u"&&typeof document<"u",Gf={tested:!1,writable:!1},_U=()=>{if(!nl())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Gf.tested)return Gf.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Gf.tested=!0,Gf.writable=!0}catch{Gf.tested=!0,Gf.writable=!1}return Gf.writable};function Vte(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((a,i)=>{t[i]=a})}catch{}return r.searchParams.forEach((n,a)=>{t[a]=n}),t}const SU=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),Wte=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",p1=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},Kf=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Hh=async(e,t)=>{await e.removeItem(t)};class Hk{constructor(){this.promise=new Hk.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}Hk.promiseConstructor=Promise;function A3(e){const t=e.split(".");if(t.length!==3)throw new MS("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!Pte.test(t[n]))throw new MS("JWT not in base64url format");return{header:JSON.parse(gO(t[0])),payload:JSON.parse(gO(t[1])),signature:_1(t[2]),raw:{header:t[0],payload:t[1]}}}async function Gte(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function Kte(e,t){return new Promise((n,a)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await e(i);if(!t(i,null,o)){n(o);return}}catch(o){if(!t(i,o)){a(o);return}}})()})}function Xte(e){return("0"+e.toString(16)).substr(-2)}function Yte(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let a="";for(let i=0;i<56;i++)a+=r.charAt(Math.floor(Math.random()*n));return a}return crypto.getRandomValues(t),Array.from(t,Xte).join("")}async function Qte(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),a=new Uint8Array(n);return Array.from(a).map(i=>String.fromCharCode(i)).join("")}async function Zte(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await Qte(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Zx(e,t,r=!1){const n=Yte();let a=n;r&&(a+="/PASSWORD_RECOVERY"),await p1(e,`${t}-code-verifier`,a);const i=await Zte(n);return[i,n===i?"plain":"s256"]}const Jte=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function ere(e){const t=e.headers.get(IS);if(!t||!t.match(Jte))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function tre(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function rre(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const nre=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Jx(e){if(!nre.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function E3(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function are(e,t){return new Proxy(e,{get:(r,n,a)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const i=n.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,n,a)}return!t.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(r,n,a)}})}function bO(e){return JSON.parse(JSON.stringify(e))}const Qf=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),sre=[502,503,504];async function vO(e){var t;if(!Wte(e))throw new DS(Qf(e),0);if(sre.includes(e.status))throw new DS(Qf(e),e.status);let r;try{r=await e.json()}catch(i){throw new nm(Qf(i),i)}let n;const a=ere(e);if(a&&a.getTime()>=kU["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new mO(Qf(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new Gd}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new mO(Qf(r),e.status,r.weak_password.reasons);throw new Dte(Qf(r),e.status||500,n)}const ire=(e,t,r,n)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),a.body=JSON.stringify(n),Object.assign(Object.assign({},a),r))};async function Pn(e,t,r,n){var a;const i=Object.assign({},n==null?void 0:n.headers);i[IS]||(i[IS]=kU["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const o=(a=n==null?void 0:n.query)!==null&&a!==void 0?a:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",d=await ore(e,t,r+l,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(d):{data:Object.assign({},d),error:null}}async function ore(e,t,r,n,a,i){const o=ire(t,n,a,i);let l;try{l=await e(r,Object.assign({},o))}catch(d){throw console.error(d),new DS(Qf(d),0)}if(l.ok||await vO(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(d){await vO(d)}}function Kd(e){var t;let r=null;dre(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=Hte(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function yO(e){const t=Kd(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Qh(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function lre(e){return{data:e,error:null}}function cre(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:a,verification_type:i}=e,o=fp(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:r,hashed_token:n,redirect_to:a,verification_type:i},d=Object.assign({},o);return{data:{properties:l,user:d},error:null}}function wO(e){return e}function dre(e){return e.access_token&&e.refresh_token&&e.expires_in}const T3=["global","local","others"];class ure{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=SU(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,r=T3[0]){if(T3.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${T3.join(", ")}`);try{return await Pn(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(pn(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await Pn(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Qh})}catch(n){if(pn(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=fp(t,["options"]),a=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(a.new_email=n==null?void 0:n.newEmail,delete a.newEmail),await Pn(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:cre,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(pn(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await Pn(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Qh})}catch(r){if(pn(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,a,i,o,l,d;try{const c={nextPage:null,lastPage:0,total:0},u=await Pn(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:wO});if(u.error)throw u.error;const x=await u.json(),b=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,g=(d=(l=u.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&d!==void 0?d:[];return g.length>0&&(g.forEach(k=>{const y=parseInt(k.split(";")[0].split("=")[1].substring(0,1)),N=JSON.parse(k.split(";")[1].split("=")[1]);c[`${N}Page`]=y}),c.total=parseInt(b)),{data:Object.assign(Object.assign({},x),c),error:null}}catch(c){if(pn(c))return{data:{users:[]},error:c};throw c}}async getUserById(t){Jx(t);try{return await Pn(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Qh})}catch(r){if(pn(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){Jx(t);try{return await Pn(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:Qh})}catch(n){if(pn(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){Jx(t);try{return await Pn(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:Qh})}catch(n){if(pn(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){Jx(t.userId);try{const{data:r,error:n}=await Pn(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:r,error:n}}catch(r){if(pn(r))return{data:null,error:r};throw r}}async _deleteFactor(t){Jx(t.userId),Jx(t.id);try{return{data:await Pn(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(pn(r))return{data:null,error:r};throw r}}async _listOAuthClients(t){var r,n,a,i,o,l,d;try{const c={nextPage:null,lastPage:0,total:0},u=await Pn(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:wO});if(u.error)throw u.error;const x=await u.json(),b=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,g=(d=(l=u.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&d!==void 0?d:[];return g.length>0&&(g.forEach(k=>{const y=parseInt(k.split(";")[0].split("=")[1].substring(0,1)),N=JSON.parse(k.split(";")[1].split("=")[1]);c[`${N}Page`]=y}),c.total=parseInt(b)),{data:Object.assign(Object.assign({},x),c),error:null}}catch(c){if(pn(c))return{data:{clients:[]},error:c};throw c}}async _createOAuthClient(t){try{return await Pn(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(pn(r))return{data:null,error:r};throw r}}async _getOAuthClient(t){try{return await Pn(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(pn(r))return{data:null,error:r};throw r}}async _updateOAuthClient(t,r){try{return await Pn(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(pn(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(t){try{return await Pn(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(pn(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(t){try{return await Pn(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(pn(r))return{data:null,error:r};throw r}}}function kO(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const e1={debug:!!(globalThis&&_U()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class jU extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class hre extends jU{}async function fre(e,t,r){e1.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),e1.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async a=>{if(a){e1.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,a.name);try{return await r()}finally{e1.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,a.name)}}else{if(t===0)throw e1.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new hre(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(e1.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function mre(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function CU(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function xre(e){return parseInt(e,16)}function pre(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,n=>n.toString(16).padStart(2,"0")).join("")}function gre(e){var t;const{chainId:r,domain:n,expirationTime:a,issuedAt:i=new Date,nonce:o,notBefore:l,requestId:d,resources:c,scheme:u,uri:x,version:b}=e;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!x)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(b!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${b}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const g=CU(e.address),k=u?`${u}://${n}`:n,y=e.statement?`${e.statement}
`:"",N=`${k} wants you to sign in with your Ethereum account:
${g}

${y}`;let S=`URI: ${x}
Version: ${b}
Chain ID: ${r}${o?`
Nonce: ${o}`:""}
Issued At: ${i.toISOString()}`;if(a&&(S+=`
Expiration Time: ${a.toISOString()}`),l&&(S+=`
Not Before: ${l.toISOString()}`),d&&(S+=`
Request ID: ${d}`),c){let O=`
Resources:`;for(const A of c){if(!A||typeof A!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${A}`);O+=`
- ${A}`}S+=O}return`${N}
${S}`}class zi extends Error{constructor({message:t,code:r,cause:n,name:a}){var i;super(t,{cause:n}),this.__isWebAuthnError=!0,this.name=(i=a??(n instanceof Error?n.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=r}}class kw extends zi{constructor(t,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:t}),this.name="WebAuthnUnknownError",this.originalError=r}}function bre({error:e,options:t}){var r,n,a;const{publicKey:i}=t;if(!i)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new zi({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((r=i.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new zi({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((n=i.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new zi({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((a=i.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new zi({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new zi({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new zi({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return i.pubKeyCredParams.filter(l=>l.type==="public-key").length===0?new zi({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new zi({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const o=window.location.hostname;if(AU(o)){if(i.rp.id!==o)return new zi({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new zi({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new zi({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new zi({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new zi({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function vre({error:e,options:t}){const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new zi({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new zi({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const n=window.location.hostname;if(AU(n)){if(r.rpId!==n)return new zi({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new zi({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new zi({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new zi({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class yre{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const wre=new yre;function kre(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:r,excludeCredentials:n}=e,a=fp(e,["challenge","user","excludeCredentials"]),i=_1(t).buffer,o=Object.assign(Object.assign({},r),{id:_1(r.id).buffer}),l=Object.assign(Object.assign({},a),{challenge:i,user:o});if(n&&n.length>0){l.excludeCredentials=new Array(n.length);for(let d=0;d<n.length;d++){const c=n[d];l.excludeCredentials[d]=Object.assign(Object.assign({},c),{id:_1(c.id).buffer,type:c.type||"public-key",transports:c.transports})}}return l}function Nre(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:r}=e,n=fp(e,["challenge","allowCredentials"]),a=_1(t).buffer,i=Object.assign(Object.assign({},n),{challenge:a});if(r&&r.length>0){i.allowCredentials=new Array(r.length);for(let o=0;o<r.length;o++){const l=r[o];i.allowCredentials[o]=Object.assign(Object.assign({},l),{id:_1(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return i}function _re(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e;return{id:e.id,rawId:e.id,response:{attestationObject:lm(new Uint8Array(e.response.attestationObject)),clientDataJSON:lm(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function Sre(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e,n=e.getClientExtensionResults(),a=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:lm(new Uint8Array(a.authenticatorData)),clientDataJSON:lm(new Uint8Array(a.clientDataJSON)),signature:lm(new Uint8Array(a.signature)),userHandle:a.userHandle?lm(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function AU(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function NO(){var e,t;return!!(nl()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function jre(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new kw("Browser returned unexpected credential type",t)}:{data:null,error:new kw("Empty credential response",t)}}catch(t){return{data:null,error:bre({error:t,options:e})}}}async function Cre(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new kw("Browser returned unexpected credential type",t)}:{data:null,error:new kw("Empty credential response",t)}}catch(t){return{data:null,error:vre({error:t,options:e})}}}const Are={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},Ere={userVerification:"preferred",hints:["security-key"]};function Nw(...e){const t=a=>a!==null&&typeof a=="object"&&!Array.isArray(a),r=a=>a instanceof ArrayBuffer||ArrayBuffer.isView(a),n={};for(const a of e)if(a)for(const i in a){const o=a[i];if(o!==void 0)if(Array.isArray(o))n[i]=o;else if(r(o))n[i]=o;else if(t(o)){const l=n[i];t(l)?n[i]=Nw(l,o):n[i]=Nw(o)}else n[i]=o}return n}function Tre(e,t){return Nw(Are,e,t||{})}function Ore(e,t){return Nw(Ere,e,t||{})}class Pre{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:r,friendlyName:n,signal:a},i){try{const{data:o,error:l}=await this.client.mfa.challenge({factorId:t,webauthn:r});if(!o)return{data:null,error:l};const d=a??wre.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:c}=o.webauthn.credential_options.publicKey;c.name||(c.name=`${c.id}:${n}`),c.displayName||(c.displayName=c.name)}switch(o.webauthn.type){case"create":{const c=Tre(o.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:u,error:x}=await jre({publicKey:c,signal:d});return u?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:u}},error:null}:{data:null,error:x}}case"request":{const c=Ore(o.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:u,error:x}=await Cre(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:c,signal:d}));return u?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:u}},error:null}:{data:null,error:x}}}}catch(o){return pn(o)?{data:null,error:o}:{data:null,error:new nm("Unexpected error in challenge",o)}}}async _verify({challengeId:t,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:t,webauthn:n})}async _authenticate({factorId:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:a}},i){if(!r)return{data:null,error:new hb("rpId is required for WebAuthn authentication")};try{if(!NO())return{data:null,error:new nm("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this.challenge({factorId:t,webauthn:{rpId:r,rpOrigins:n},signal:a},{request:i});if(!o)return{data:null,error:l};const{webauthn:d}=o;return this._verify({factorId:t,challengeId:o.challengeId,webauthn:{type:d.type,rpId:r,rpOrigins:n,credential_response:d.credential_response}})}catch(o){return pn(o)?{data:null,error:o}:{data:null,error:new nm("Unexpected error in authenticate",o)}}}async _register({friendlyName:t,rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:a},i){if(!r)return{data:null,error:new hb("rpId is required for WebAuthn registration")};try{if(!NO())return{data:null,error:new nm("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this._enroll({friendlyName:t});if(!o)return await this.client.mfa.listFactors().then(u=>{var x;return(x=u.data)===null||x===void 0?void 0:x.all.find(b=>b.factor_type==="webauthn"&&b.friendly_name===t&&b.status!=="unverified")}).then(u=>u?this.client.mfa.unenroll({factorId:u==null?void 0:u.id}):void 0),{data:null,error:l};const{data:d,error:c}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:a},{create:i});return d?this._verify({factorId:o.id,challengeId:d.challengeId,webauthn:{rpId:r,rpOrigins:n,type:d.webauthn.type,credential_response:d.webauthn.credential_response}}):{data:null,error:c}}catch(o){return pn(o)?{data:null,error:o}:{data:null,error:new nm("Unexpected error in register",o)}}}}mre();const Ire={url:Ete,storageKey:Tte,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Ote,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function _O(e,t,r){return await r()}const t1={};class fb{get jwks(){var t,r;return(r=(t=t1[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){t1[this.storageKey]=Object.assign(Object.assign({},t1[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=t1[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){t1[this.storageKey]=Object.assign(Object.assign({},t1[this.storageKey]),{cachedAt:t})}constructor(t){var r,n,a;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const i=Object.assign(Object.assign({},Ire),t);if(this.storageKey=i.storageKey,this.instanceID=(r=fb.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,fb.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.instanceID>0&&nl()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=i.persistSession,this.autoRefreshToken=i.autoRefreshToken,this.admin=new ure({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=SU(i.fetch),this.lock=i.lock||_O,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,i.lock?this.lock=i.lock:nl()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=fre:this.lock=_O,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Pre(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:_U()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=kO(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=kO(this.memoryStorage)),nl()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${wU}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let r={},n="none";if(nl()&&(r=Vte(window.location.href),this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce")),nl()&&this.detectSessionInUrl&&n!=="none"){const{data:a,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),Rte(i)){const d=(t=i.details)===null||t===void 0?void 0:t.code;if(d==="identity_already_exists"||d==="identity_not_found"||d==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:l}=a;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return pn(r)?this._returnResult({error:r}):this._returnResult({error:new nm("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,a;try{const i=await Pn(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(a=t==null?void 0:t.options)===null||a===void 0?void 0:a.captchaToken}},xform:Kd}),{data:o,error:l}=i;if(l||!o)return this._returnResult({data:{user:null,session:null},error:l});const d=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",d)),this._returnResult({data:{user:c,session:d},error:null})}catch(i){if(pn(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signUp(t){var r,n,a;try{let i;if("email"in t){const{email:u,password:x,options:b}=t;let g=null,k=null;this.flowType==="pkce"&&([g,k]=await Zx(this.storage,this.storageKey)),i=await Pn(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:b==null?void 0:b.emailRedirectTo,body:{email:u,password:x,data:(r=b==null?void 0:b.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:b==null?void 0:b.captchaToken},code_challenge:g,code_challenge_method:k},xform:Kd})}else if("phone"in t){const{phone:u,password:x,options:b}=t;i=await Pn(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:x,data:(n=b==null?void 0:b.data)!==null&&n!==void 0?n:{},channel:(a=b==null?void 0:b.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:b==null?void 0:b.captchaToken}},xform:Kd})}else throw new D2("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return this._returnResult({data:{user:null,session:null},error:l});const d=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",d)),this._returnResult({data:{user:c,session:d},error:null})}catch(i){if(pn(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithPassword(t){try{let r;if("email"in t){const{email:i,password:o,options:l}=t;r=await Pn(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:yO})}else if("phone"in t){const{phone:i,password:o,options:l}=t;r=await Pn(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:yO})}else throw new D2("You must provide either an email or phone number and a password");const{data:n,error:a}=r;if(a)return this._returnResult({data:{user:null,session:null},error:a});if(!n||!n.session||!n.user){const i=new Qx;return this._returnResult({data:{user:null,session:null},error:i})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:a})}catch(r){if(pn(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(t){var r,n,a,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(a=t.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;switch(r){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(t){var r,n,a,i,o,l,d,c,u,x,b;let g,k;if("message"in t)g=t.message,k=t.signature;else{const{chain:y,wallet:N,statement:S,options:O}=t;let A;if(nl())if(typeof N=="object")A=N;else{const L=window;if("ethereum"in L&&typeof L.ethereum=="object"&&"request"in L.ethereum&&typeof L.ethereum.request=="function")A=L.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof N!="object"||!(O!=null&&O.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");A=N}const P=new URL((r=O==null?void 0:O.url)!==null&&r!==void 0?r:window.location.href),q=await A.request({method:"eth_requestAccounts"}).then(L=>L).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!q||q.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const W=CU(q[0]);let R=(n=O==null?void 0:O.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!R){const L=await A.request({method:"eth_chainId"});R=xre(L)}const U={domain:P.host,address:W,statement:S,uri:P.href,version:"1",chainId:R,nonce:(a=O==null?void 0:O.signInWithEthereum)===null||a===void 0?void 0:a.nonce,issuedAt:(o=(i=O==null?void 0:O.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(l=O==null?void 0:O.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(d=O==null?void 0:O.signInWithEthereum)===null||d===void 0?void 0:d.notBefore,requestId:(c=O==null?void 0:O.signInWithEthereum)===null||c===void 0?void 0:c.requestId,resources:(u=O==null?void 0:O.signInWithEthereum)===null||u===void 0?void 0:u.resources};g=gre(U),k=await A.request({method:"personal_sign",params:[pre(g),W]})}try{const{data:y,error:N}=await Pn(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:g,signature:k},!((x=t.options)===null||x===void 0)&&x.captchaToken?{gotrue_meta_security:{captcha_token:(b=t.options)===null||b===void 0?void 0:b.captchaToken}}:null),xform:Kd});if(N)throw N;if(!y||!y.session||!y.user){const S=new Qx;return this._returnResult({data:{user:null,session:null},error:S})}return y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",y.session)),this._returnResult({data:Object.assign({},y),error:N})}catch(y){if(pn(y))return this._returnResult({data:{user:null,session:null},error:y});throw y}}async signInWithSolana(t){var r,n,a,i,o,l,d,c,u,x,b,g;let k,y;if("message"in t)k=t.message,y=t.signature;else{const{chain:N,wallet:S,statement:O,options:A}=t;let P;if(nl())if(typeof S=="object")P=S;else{const W=window;if("solana"in W&&typeof W.solana=="object"&&("signIn"in W.solana&&typeof W.solana.signIn=="function"||"signMessage"in W.solana&&typeof W.solana.signMessage=="function"))P=W.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof S!="object"||!(A!=null&&A.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");P=S}const q=new URL((r=A==null?void 0:A.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in P&&P.signIn){const W=await P.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},A==null?void 0:A.signInWithSolana),{version:"1",domain:q.host,uri:q.href}),O?{statement:O}:null));let R;if(Array.isArray(W)&&W[0]&&typeof W[0]=="object")R=W[0];else if(W&&typeof W=="object"&&"signedMessage"in W&&"signature"in W)R=W;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in R&&"signature"in R&&(typeof R.signedMessage=="string"||R.signedMessage instanceof Uint8Array)&&R.signature instanceof Uint8Array)k=typeof R.signedMessage=="string"?R.signedMessage:new TextDecoder().decode(R.signedMessage),y=R.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in P)||typeof P.signMessage!="function"||!("publicKey"in P)||typeof P!="object"||!P.publicKey||!("toBase58"in P.publicKey)||typeof P.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");k=[`${q.host} wants you to sign in with your Solana account:`,P.publicKey.toBase58(),...O?["",O,""]:[""],"Version: 1",`URI: ${q.href}`,`Issued At: ${(a=(n=A==null?void 0:A.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((i=A==null?void 0:A.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${A.signInWithSolana.notBefore}`]:[],...!((o=A==null?void 0:A.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${A.signInWithSolana.expirationTime}`]:[],...!((l=A==null?void 0:A.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${A.signInWithSolana.chainId}`]:[],...!((d=A==null?void 0:A.signInWithSolana)===null||d===void 0)&&d.nonce?[`Nonce: ${A.signInWithSolana.nonce}`]:[],...!((c=A==null?void 0:A.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${A.signInWithSolana.requestId}`]:[],...!((x=(u=A==null?void 0:A.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||x===void 0)&&x.length?["Resources",...A.signInWithSolana.resources.map(R=>`- ${R}`)]:[]].join(`
`);const W=await P.signMessage(new TextEncoder().encode(k),"utf8");if(!W||!(W instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");y=W}}try{const{data:N,error:S}=await Pn(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:k,signature:lm(y)},!((b=t.options)===null||b===void 0)&&b.captchaToken?{gotrue_meta_security:{captcha_token:(g=t.options)===null||g===void 0?void 0:g.captchaToken}}:null),xform:Kd});if(S)throw S;if(!N||!N.session||!N.user){const O=new Qx;return this._returnResult({data:{user:null,session:null},error:O})}return N.session&&(await this._saveSession(N.session),await this._notifyAllSubscribers("SIGNED_IN",N.session)),this._returnResult({data:Object.assign({},N),error:S})}catch(N){if(pn(N))return this._returnResult({data:{user:null,session:null},error:N});throw N}}async _exchangeCodeForSession(t){const r=await Kf(this.storage,`${this.storageKey}-code-verifier`),[n,a]=(r??"").split("/");try{const{data:i,error:o}=await Pn(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:Kd});if(await Hh(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!i||!i.session||!i.user){const l=new Qx;return this._returnResult({data:{user:null,session:null,redirectType:null},error:l})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign(Object.assign({},i),{redirectType:a??null}),error:o})}catch(i){if(pn(i))return this._returnResult({data:{user:null,session:null,redirectType:null},error:i});throw i}}async signInWithIdToken(t){try{const{options:r,provider:n,token:a,access_token:i,nonce:o}=t,l=await Pn(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:a,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Kd}),{data:d,error:c}=l;if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!d||!d.session||!d.user){const u=new Qx;return this._returnResult({data:{user:null,session:null},error:u})}return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),this._returnResult({data:d,error:c})}catch(r){if(pn(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(t){var r,n,a,i,o;try{if("email"in t){const{email:l,options:d}=t;let c=null,u=null;this.flowType==="pkce"&&([c,u]=await Zx(this.storage,this.storageKey));const{error:x}=await Pn(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=d==null?void 0:d.data)!==null&&r!==void 0?r:{},create_user:(n=d==null?void 0:d.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},code_challenge:c,code_challenge_method:u},redirectTo:d==null?void 0:d.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:x})}if("phone"in t){const{phone:l,options:d}=t,{data:c,error:u}=await Pn(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(a=d==null?void 0:d.data)!==null&&a!==void 0?a:{},create_user:(i=d==null?void 0:d.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},channel:(o=d==null?void 0:d.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:u})}throw new D2("You must provide either an email or phone number.")}catch(l){if(pn(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async verifyOtp(t){var r,n;try{let a,i;"options"in t&&(a=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:l}=await Pn(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:a,xform:Kd});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const d=o.session,c=o.user;return d!=null&&d.access_token&&(await this._saveSession(d),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",d)),this._returnResult({data:{user:c,session:d},error:null})}catch(a){if(pn(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithSSO(t){var r,n,a;try{let i=null,o=null;this.flowType==="pkce"&&([i,o]=await Zx(this.storage,this.storageKey));const l=await Pn(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((a=t==null?void 0:t.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:lre});return this._returnResult(l)}catch(i){if(pn(i))return this._returnResult({data:null,error:i});throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new Gd;const{error:a}=await Pn(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:a})})}catch(t){if(pn(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:a,options:i}=t,{error:o}=await Pn(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in t){const{phone:n,type:a,options:i}=t,{data:o,error:l}=await Pn(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l})}throw new D2("You must provide either an email or phone number and a type")}catch(r){if(pn(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await Kf(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<j3:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const o=await Kf(this.userStorage,this.storageKey+"-user");o!=null&&o.user?t.user=o.user:t.user=E3()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};t.user=are(t.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{session:null},error:i}):this._returnResult({data:{session:a},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await Pn(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Qh}):await this._useSession(async r=>{var n,a,i;const{data:o,error:l}=r;if(l)throw l;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Gd}:await Pn(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(a=o.session)===null||a===void 0?void 0:a.access_token)!==null&&i!==void 0?i:void 0,xform:Qh})})}catch(r){if(pn(r))return Lte(r)&&(await this._removeSession(),await Hh(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:a,error:i}=n;if(i)throw i;if(!a.session)throw new Gd;const o=a.session;let l=null,d=null;this.flowType==="pkce"&&t.email!=null&&([l,d]=await Zx(this.storage,this.storageKey));const{data:c,error:u}=await Pn(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:d}),jwt:o.access_token,xform:Qh});if(u)throw u;return o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(n){if(pn(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Gd;const r=Date.now()/1e3;let n=r,a=!0,i=null;const{payload:o}=A3(t.access_token);if(o.exp&&(n=o.exp,a=n<=r),a){const{data:l,error:d}=await this._callRefreshToken(t.refresh_token);if(d)return this._returnResult({data:{user:null,session:null},error:d});if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:d}=await this._getUser(t.access_token);if(d)throw d;i={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(r){if(pn(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:o,error:l}=r;if(l)throw l;t=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new Gd;const{data:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{user:null,session:null},error:i}):a?this._returnResult({data:{user:a.user,session:a},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(pn(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(t,r){try{if(!nl())throw new M2("No browser detected.");if(t.error||t.error_description||t.error_code)throw new M2(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new fO("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new M2("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new fO("No code detected.");const{data:O,error:A}=await this._exchangeCodeForSession(t.code);if(A)throw A;const P=new URL(window.location.href);return P.searchParams.delete("code"),window.history.replaceState(window.history.state,"",P.toString()),{data:{session:O.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:a,access_token:i,refresh_token:o,expires_in:l,expires_at:d,token_type:c}=t;if(!i||!l||!o||!c)throw new M2("No session defined in URL");const u=Math.round(Date.now()/1e3),x=parseInt(l);let b=u+x;d&&(b=parseInt(d));const g=b-u;g*1e3<=x1&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${g}s, should have been closer to ${x}s`);const k=b-x;u-k>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",k,b,u):u-k<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",k,b,u);const{data:y,error:N}=await this._getUser(i);if(N)throw N;const S={provider_token:n,provider_refresh_token:a,access_token:i,expires_in:x,expires_at:b,refresh_token:o,token_type:c,user:y.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:S,redirectType:t.type},error:null})}catch(n){if(pn(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await Kf(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:a,error:i}=r;if(i)return this._returnResult({error:i});const o=(n=a.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:l}=await this.admin.signOut(o,t);if(l&&!(Mte(l)&&(l.status===404||l.status===401||l.status===403)))return this._returnResult({error:l})}return t!=="others"&&(await this._removeSession(),await Hh(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const r=$te(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,a;try{const{data:{session:i},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let n=null,a=null;this.flowType==="pkce"&&([n,a]=await Zx(this.storage,this.storageKey,!0));try{return await Pn(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:a,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(pn(i))return this._returnResult({data:null,error:i});throw i}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(r){if(pn(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var r;try{const{data:n,error:a}=await this._useSession(async i=>{var o,l,d,c,u;const{data:x,error:b}=i;if(b)throw b;const g=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(d=t.options)===null||d===void 0?void 0:d.queryParams,skipBrowserRedirect:!0});return await Pn(this.fetch,"GET",g,{headers:this.headers,jwt:(u=(c=x.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0})});if(a)throw a;return nl()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),this._returnResult({data:{provider:t.provider,url:n==null?void 0:n.url},error:null})}catch(n){if(pn(n))return this._returnResult({data:{provider:t.provider,url:null},error:n});throw n}}async linkIdentityIdToken(t){return await this._useSession(async r=>{var n;try{const{error:a,data:{session:i}}=r;if(a)throw a;const{options:o,provider:l,token:d,access_token:c,nonce:u}=t,x=await Pn(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=i==null?void 0:i.access_token)!==null&&n!==void 0?n:void 0,body:{provider:l,id_token:d,access_token:c,nonce:u,link_identity:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Kd}),{data:b,error:g}=x;return g?this._returnResult({data:{user:null,session:null},error:g}):!b||!b.session||!b.user?this._returnResult({data:{user:null,session:null},error:new Qx}):(b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("USER_UPDATED",b.session)),this._returnResult({data:b,error:g}))}catch(a){if(pn(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}})}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,a;const{data:i,error:o}=r;if(o)throw o;return await Pn(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(a=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&a!==void 0?a:void 0})})}catch(r){if(pn(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await Kte(async a=>(a>0&&await Gte(200*Math.pow(2,a-1)),this._debug(r,"refreshing attempt",a),await Pn(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Kd})),(a,i)=>{const o=200*Math.pow(2,a);return i&&C3(i)&&Date.now()+o-n<x1})}catch(n){if(this._debug(r,"error",n),pn(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),nl()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const a=await Kf(this.storage,this.storageKey);if(a&&this.userStorage){let o=await Kf(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:a.user},await p1(this.userStorage,this.storageKey+"-user",o)),a.user=(t=o==null?void 0:o.user)!==null&&t!==void 0?t:E3()}else if(a&&!a.user&&!a.user){const o=await Kf(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(a.user=o.user,await Hh(this.storage,this.storageKey+"-user"),await p1(this.storage,this.storageKey,a)):a.user=E3()}if(this._debug(n,"session from storage",a),!this._isValidSession(a)){this._debug(n,"session is not valid"),a!==null&&await this._removeSession();return}const i=((r=a.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<j3;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${j3}s`),i){if(this.autoRefreshToken&&a.refresh_token){const{error:o}=await this._callRefreshToken(a.refresh_token);o&&(console.error(o),C3(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(a.access_token);!l&&(o!=null&&o.user)?(a.user=o.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(n,"error",a),console.error(a);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new Gd;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new Hk;const{data:i,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!i.session)throw new Gd;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={data:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(a,"error",i),pn(i)){const o={data:null,error:i};return C3(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(t,r,n=!0){const a=`#_notifyAllSubscribers(${t})`;this._debug(a,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,r)}catch(d){i.push(d)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(a,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await p1(this.userStorage,this.storageKey+"-user",{user:r.user});const a=Object.assign({},r);delete a.user;const i=bO(a);await p1(this.storage,this.storageKey,i)}else{const a=bO(r);await p1(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),await Hh(this.storage,this.storageKey),await Hh(this.storage,this.storageKey+"-code-verifier"),await Hh(this.storage,this.storageKey+"-user"),this.userStorage&&await Hh(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&nl()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),x1);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((n.expires_at*1e3-t)/x1);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${x1}ms, refresh threshold is ${PS} ticks`),a<=PS&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof jU)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!nl()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const a=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&a.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&a.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,o]=await Zx(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});a.push(l.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);a.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&a.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${a.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;return i?this._returnResult({data:null,error:i}):await Pn(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(pn(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,a;const{data:i,error:o}=r;if(o)return this._returnResult({data:null,error:o});const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:d,error:c}=await Pn(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return c?this._returnResult({data:null,error:c}):(t.factorType==="totp"&&d.type==="totp"&&(!((a=d==null?void 0:d.totp)===null||a===void 0)&&a.qr_code)&&(d.totp.qr_code=`data:image/svg+xml;utf-8,${d.totp.qr_code}`),this._returnResult({data:d,error:null}))})}catch(r){if(pn(r))return this._returnResult({data:null,error:r});throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;if(i)return this._returnResult({data:null,error:i});const o=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?_re(t.webauthn.credential_response):Sre(t.webauthn.credential_response)})}:{code:t.code}),{data:l,error:d}=await Pn(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:o,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return d?this._returnResult({data:null,error:d}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),this._returnResult({data:l,error:d}))})}catch(r){if(pn(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;if(i)return this._returnResult({data:null,error:i});const o=await Pn(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});if(o.error)return o;const{data:l}=o;if(l.type!=="webauthn")return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:kre(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:Nre(l.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(pn(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){var t;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const a={all:[],phone:[],totp:[],webauthn:[]};for(const i of(t=r==null?void 0:r.factors)!==null&&t!==void 0?t:[])a.all.push(i),i.status==="verified"&&a[i.factor_type].push(i);return{data:a,error:null}}async _getAuthenticatorAssuranceLevel(){var t,r;const{data:{session:n},error:a}=await this.getSession();if(a)return this._returnResult({data:null,error:a});if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=A3(n.access_token);let o=null;i.aal&&(o=i.aal);let l=o;((r=(t=n.user.factors)===null||t===void 0?void 0:t.filter(u=>u.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const c=i.amr||[];return{data:{currentLevel:o,nextLevel:l,currentAuthenticationMethods:c},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async r=>{const{data:{session:n},error:a}=r;return a?this._returnResult({data:null,error:a}):n?await Pn(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:n.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new Gd})})}catch(r){if(pn(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:a},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!a)return this._returnResult({data:null,error:new Gd});const o=await Pn(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"approve"},xform:l=>({data:l,error:null})});return o.data&&o.data.redirect_url&&nl()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(n){if(pn(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:a},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!a)return this._returnResult({data:null,error:new Gd});const o=await Pn(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"deny"},xform:l=>({data:l,error:null})});return o.data&&o.data.redirect_url&&nl()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(n){if(pn(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(l=>l.kid===t);if(n)return n;const a=Date.now();if(n=this.jwks.keys.find(l=>l.kid===t),n&&this.jwks_cached_at+Ite>a)return n;const{data:i,error:o}=await Pn(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=a,n=i.keys.find(l=>l.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:g,error:k}=await this.getSession();if(k||!g.session)return this._returnResult({data:null,error:k});n=g.session.access_token}const{header:a,payload:i,signature:o,raw:{header:l,payload:d}}=A3(n);r!=null&&r.allowExpired||tre(i.exp);const c=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!c){const{error:g}=await this.getUser(n);if(g)throw g;return{data:{claims:i,header:a,signature:o},error:null}}const u=rre(a.alg),x=await crypto.subtle.importKey("jwk",c,u,!0,["verify"]);if(!await crypto.subtle.verify(u,x,o,qte(`${l}.${d}`)))throw new MS("Invalid JWT signature");return{data:{claims:i,header:a,signature:o},error:null}}catch(n){if(pn(n))return this._returnResult({data:null,error:n});throw n}}}fb.nextInstanceID={};const Dre=fb;class Mre extends Dre{constructor(t){super(t)}}class Lre{constructor(t,r,n){var a,i,o;this.supabaseUrl=t,this.supabaseKey=r;const l=Ate(t);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const d=`sb-${l.hostname.split(".")[0]}-auth-token`,c={db:yte,realtime:kte,auth:Object.assign(Object.assign({},wte),{storageKey:d}),global:vte},u=Cte(n??{},c);this.storageKey=(a=u.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(i=u.global.headers)!==null&&i!==void 0?i:{},u.accessToken?(this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(x,b)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(b)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=u.auth)!==null&&o!==void 0?o:{},this.headers,u.global.fetch),this.fetch=Ste(r,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.rest=new Eee(new URL("rest/v1",l).href,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),this.storage=new pte(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),u.accessToken||this._listenForAuthEvents()}get functions(){return new See(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t,r;if(this.accessToken)return await this.accessToken();const{data:n}=await this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:a,userStorage:i,storageKey:o,flowType:l,lock:d,debug:c,throwOnError:u},x,b){const g={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Mre({url:this.authUrl.href,headers:Object.assign(Object.assign({},g),x),storageKey:o,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:a,userStorage:i,flowType:l,lock:d,debug:c,throwOnError:u,fetch:b,hasCustomAuthorizationHeader:Object.keys(this.headers).some(k=>k.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new Wee(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Rre=(e,t,r)=>new Lre(e,t,r);function Fre(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}Fre()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const EU="https://uvaxkefgehiokxkvaqge.supabase.co",Bre="replace_with_real_anon_key_for_production",TU=EU.includes("placeholder");if(TU)throw new Error("PRODUCTION BUILD ERROR: Missing Supabase env. Set VITE_SUPABASE_URL and VITE_SUPABASE_ANON_KEY.");const It=Rre(EU,Bre,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0}}),Ure=Object.freeze(Object.defineProperty({__proto__:null,IS_OFFLINE:TU,supabase:It},Symbol.toStringTag,{value:"Module"})),Sn=(e,t)=>({ok:!0,data:e,meta:t}),Ct=e=>{var t,r;try{typeof window<"u"&&((r=(t=import.meta)==null?void 0:t.env)!=null&&r.DEV)&&(window.__repoErrors=window.__repoErrors||[],window.__repoErrors.push(e),window.dispatchEvent(new CustomEvent("repo-error",{detail:e})))}catch{}return{ok:!1,error:e}};typeof window<"u"&&(window.__repoErrors=window.__repoErrors||[]);const zre="audit_logs";let Vg=[],S1=null,qre=10,Hre=2e3,SO=!1;function $re({userId:e,input:t}){return{user_id:e,action:t.action,table_name:t.tableName??null,record_id:t.recordId??null,old_data:t.oldData?JSON.stringify(t.oldData):null,new_data:t.newData?JSON.stringify(t.newData):null,ip_address:t.ipAddress??null,user_agent:t.userAgent||(typeof navigator<"u"?navigator.userAgent:null)}}async function B6(){var t,r;if(Vg.length===0)return;const e=Vg;Vg=[];try{const n=e.map($re);await It.from(zre).insert(n)}catch(n){(r=(t=import.meta)==null?void 0:t.env)!=null&&r.DEV&&console.warn("auditQueue flush failed",n)}}function Vre(){S1||(S1=setTimeout(async()=>{S1=null,await B6()},Hre))}function Wre(){if(SO||typeof window>"u")return;SO=!0;const e=()=>{B6()};window.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&e()}),window.addEventListener("beforeunload",e)}function Gre(e,t){if(Wre(),Vg.push({userId:e,input:t}),Vg.length>=qre){B6(),S1&&(clearTimeout(S1),S1=null);return}Vre()}const Kre="audit_logs";async function Ws(e,t){var r,n;try{Gre(e,t)}catch(a){(n=(r=import.meta)==null?void 0:r.env)!=null&&n.DEV&&console.warn("Audit log exception",a)}}async function Xre(e){try{const t=(e==null?void 0:e.pageSize)||(e==null?void 0:e.limit)||50,r=e!=null&&e.page&&e.page>0?e.page:1,n=(r-1)*t,a=n+t-1,i=e!=null&&e.includeUser?"audit_logs_with_user":Kre;let o=It.from(i).select("*",{count:"exact"}).order("created_at",{ascending:!1}).range(n,a);e!=null&&e.action&&(o=o.eq("action",e.action)),e!=null&&e.startDate&&(o=o.gte("created_at",e.startDate)),e!=null&&e.endDate&&(o=o.lte("created_at",e.endDate));const{data:l,error:d,count:c}=await o;return d?Ct({code:"supabase",message:"Khng th ti audit logs",cause:d}):Sn(l||[],{total:c,page:r,pageSize:t})}catch(t){return Ct({code:"network",message:"Li mng khi ti audit logs",cause:t})}}function OU(){const e="ABCDEFGHJKLMNPQRSTUVWXYZ23456789";let t="";for(let r=0;r<8;r++){const n=Math.floor(Math.random()*e.length);t+=e[n]}return t}function Yre(e){return/^[A-Z0-9]{8}$/.test(e)}const Vu="parts";async function Qre(){try{const{data:e,error:t}=await It.from(Vu).select("*").order("name");return t?Ct({code:"supabase",message:"Khng th ti danh sch ph tng",cause:t}):Sn(e||[])}catch(e){return Ct({code:"network",message:"Li kt ni ti my ch",cause:e})}}async function Zre(e){try{const t=e!=null&&e.pageSize&&e.pageSize>0?e.pageSize:50,r=e!=null&&e.page&&e.page>0?e.page:1,n=(r-1)*t,a=n+t-1;let i=It.from(Vu).select("*",{count:"exact"}).order("name").range(n,a);if(e!=null&&e.category&&e.category!=="all"&&(i=i.eq("category",e.category)),e!=null&&e.search&&e.search.trim()){const c=e.search.trim();i=i.or(`name.ilike.%${c}%,sku.ilike.%${c}%`)}const{data:o,error:l,count:d}=await i;return l?Ct({code:"supabase",message:"Khng th ti danh sch ph tng (phn trang)",cause:l}):Sn(o||[],{total:d,page:r,pageSize:t})}catch(t){return Ct({code:"network",message:"Li kt ni ti my ch khi ti ph tng (phn trang)",cause:t})}}async function Jre(e){var t;try{if(!e.name)return Ct({code:"validation",message:"Thiu tn ph tng"});const r=e.sku||OU(),n={id:typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():`${Math.random().toString(36).slice(2)}-${Date.now()}`,name:e.name,sku:r,stock:e.stock||{CN1:0},retailPrice:e.retailPrice||{CN1:0},wholesalePrice:e.wholesalePrice||{CN1:0},category:e.category,description:e.description,warrantyPeriod:e.warrantyPeriod},{data:a,error:i}=await It.from(Vu).insert([n]).select().single();if(i||!a){const l=(i==null?void 0:i.message)||(i==null?void 0:i.details)||"To ph tng tht bi";return Ct({code:"supabase",message:l,cause:i})}let o=null;try{const{data:l}=await It.auth.getUser();o=((t=l==null?void 0:l.user)==null?void 0:t.id)||null}catch{}return await Ws(o,{action:"part.create",tableName:Vu,recordId:a.id,oldData:null,newData:a}),Sn(a)}catch(r){return Ct({code:"network",message:"Li kt ni khi to ph tng",cause:r})}}async function ene(e,t){var r;try{const{data:n,error:a}=await It.from(Vu).select("*").eq("id",e).single();if(a||!n)return Ct({code:"supabase",message:"Khng tm thy ph tng  cp nht",cause:a});const{data:i,error:o}=await It.from(Vu).update(t).eq("id",e).select().single();if(o||!i)return Ct({code:"supabase",message:"Cp nht ph tng tht bi",cause:o});let l=null;try{const{data:d}=await It.auth.getUser();l=((r=d==null?void 0:d.user)==null?void 0:r.id)||null}catch{}return await Ws(l,{action:"part.update",tableName:Vu,recordId:e,oldData:n,newData:i}),Sn(i)}catch(n){return Ct({code:"network",message:"Li kt ni khi cp nht ph tng",cause:n})}}async function tne(e){var t;try{const{data:r,error:n}=await It.from(Vu).select("*").eq("id",e).single();if(n||!r)return Ct({code:"supabase",message:"Khng tm thy ph tng  xa",cause:n});const{error:a}=await It.from(Vu).delete().eq("id",e);if(a)return Ct({code:"supabase",message:"Xa ph tng tht bi",cause:a});let i=null;try{const{data:o}=await It.auth.getUser();i=((t=o==null?void 0:o.user)==null?void 0:t.id)||null}catch{}return await Ws(i,{action:"part.delete",tableName:Vu,recordId:e,oldData:r,newData:null}),Sn({id:e})}catch(r){return Ct({code:"network",message:"Li kt ni khi xa ph tng",cause:r})}}function Na(e){switch(e.code){case"network":return"Mt kt ni my ch. Vui lng kim tra mng.";case"validation":return e.message;case"not_found":return"Khng tm thy bn ghi.";case"supabase":return"C li d liu. Th li hoc lin h qun tr.";default:return"Li khng xc nh."}}const lh=()=>Ls({queryKey:["partsRepo"],queryFn:async()=>{const e=await Qre();if(!e.ok)throw e.error;return e.data}}),U6=e=>Ls({queryKey:["partsRepoPaged",e.page,e.pageSize,e.search||"",e.category||"all"],queryFn:async()=>{const t=await Zre(e);if(!t.ok)throw t.error;return t},staleTime:3e4}),z6=()=>{const e=Un();return xa({mutationFn:Jre,onSuccess:()=>{e.invalidateQueries({queryKey:["partsRepo"]}),e.invalidateQueries({queryKey:["partsRepoPaged"]})},onError:t=>Ze.error(Na(t))})},rne=()=>{const e=Un();return xa({mutationFn:({id:t,updates:r})=>ene(t,r),onSuccess:()=>{e.invalidateQueries({queryKey:["partsRepo"]}),e.invalidateQueries({queryKey:["partsRepoPaged"]})},onError:t=>Ze.error(Na(t))})},nne=()=>{const e=Un();return xa({mutationFn:({id:t})=>tne(t),onSuccess:()=>{e.invalidateQueries({queryKey:["partsRepo"]}),e.invalidateQueries({queryKey:["partsRepoPaged"]})},onError:t=>Ze.error(Na(t))})};async function ane(){try{const{data:e,error:t}=await It.from("loans").select("*").order("created_at",{ascending:!1});if(t)return Ct({code:"supabase",message:"Khng th ti danh sch khon vay",cause:t});const r=(e||[]).map(n=>({id:n.id,lenderName:n.lender_name,loanType:n.loan_type,principal:n.principal,interestRate:n.interest_rate,term:n.term,startDate:n.start_date,endDate:n.end_date,remainingAmount:n.remaining_amount,monthlyPayment:n.monthly_payment,status:n.status,purpose:n.purpose,collateral:n.collateral,notes:n.notes,branchId:n.branch_id,created_at:n.created_at}));return Sn(r)}catch(e){return Ct({code:"network",message:"Li kt ni ti my ch",cause:e})}}async function sne(e){try{const t={id:`LOAN-${Date.now()}`,lender_name:e.lenderName,loan_type:e.loanType,principal:e.principal,interest_rate:e.interestRate,term:e.term,start_date:e.startDate,end_date:e.endDate,remaining_amount:e.remainingAmount||e.principal,monthly_payment:e.monthlyPayment,status:e.status||"active",purpose:e.purpose,collateral:e.collateral,notes:e.notes,branch_id:e.branchId||"CN1"},{data:r,error:n}=await It.from("loans").insert(t).select().single();return n||!r?Ct({code:"supabase",message:(n==null?void 0:n.message)||"Khng th thm khon vay",cause:n||new Error("No data returned")}):Sn({id:r.id,lenderName:r.lender_name,loanType:r.loan_type,principal:r.principal,interestRate:r.interest_rate,term:r.term,startDate:r.start_date,endDate:r.end_date,remainingAmount:r.remaining_amount,monthlyPayment:r.monthly_payment,status:r.status,purpose:r.purpose,collateral:r.collateral,notes:r.notes,branchId:r.branch_id,created_at:r.created_at})}catch(t){return Ct({code:"network",message:"Li kt ni khi thm khon vay",cause:t})}}async function ine(e,t){try{const r={};t.lenderName!==void 0&&(r.lender_name=t.lenderName),t.loanType!==void 0&&(r.loan_type=t.loanType),t.principal!==void 0&&(r.principal=t.principal),t.interestRate!==void 0&&(r.interest_rate=t.interestRate),t.term!==void 0&&(r.term=t.term),t.startDate!==void 0&&(r.start_date=t.startDate),t.endDate!==void 0&&(r.end_date=t.endDate),t.remainingAmount!==void 0&&(r.remaining_amount=t.remainingAmount),t.monthlyPayment!==void 0&&(r.monthly_payment=t.monthlyPayment),t.status!==void 0&&(r.status=t.status),t.purpose!==void 0&&(r.purpose=t.purpose),t.collateral!==void 0&&(r.collateral=t.collateral),t.notes!==void 0&&(r.notes=t.notes),r.updated_at=new Date().toISOString();const{data:n,error:a}=await It.from("loans").update(r).eq("id",e).select().single();return a||!n?Ct({code:"supabase",message:"Khng th cp nht khon vay",cause:a}):Sn({id:n.id,lenderName:n.lender_name,loanType:n.loan_type,principal:n.principal,interestRate:n.interest_rate,term:n.term,startDate:n.start_date,endDate:n.end_date,remainingAmount:n.remaining_amount,monthlyPayment:n.monthly_payment,status:n.status,purpose:n.purpose,collateral:n.collateral,notes:n.notes,branchId:n.branch_id,created_at:n.created_at})}catch(r){return Ct({code:"network",message:"Li kt ni khi cp nht khon vay",cause:r})}}async function one(e){try{const{error:t}=await It.from("loans").delete().eq("id",e);return t?Ct({code:"supabase",message:"Khng th xa khon vay",cause:t}):Sn(void 0)}catch(t){return Ct({code:"network",message:"Li kt ni khi xa khon vay",cause:t})}}async function lne(e){try{let t=It.from("loan_payments").select("*").order("payment_date",{ascending:!1});const{data:r,error:n}=await t;if(n)return Ct({code:"supabase",message:"Khng th ti lch s tr n",cause:n});const a=(r||[]).map(i=>({id:i.id,loanId:i.loan_id,paymentDate:i.payment_date,principalAmount:i.principal_amount,interestAmount:i.interest_amount,totalAmount:i.total_amount,remainingAmount:i.remaining_amount,paymentMethod:i.payment_method,notes:i.notes,branchId:i.branch_id,cashTransactionId:i.cash_transaction_id}));return Sn(a)}catch(t){return Ct({code:"network",message:"Li kt ni ti my ch",cause:t})}}async function cne(e){try{const t={id:`LPAY-${Date.now()}`,loan_id:e.loanId,payment_date:e.paymentDate,principal_amount:e.principalAmount,interest_amount:e.interestAmount,total_amount:e.totalAmount,remaining_amount:e.remainingAmount,payment_method:e.paymentMethod,notes:e.notes,branch_id:e.branchId||"CN1",cash_transaction_id:e.cashTransactionId},{data:r,error:n}=await It.from("loan_payments").insert(t).select().single();return n||!r?Ct({code:"supabase",message:(n==null?void 0:n.message)||"Khng th thm thanh ton",cause:n||new Error("No data returned")}):Sn({id:r.id,loanId:r.loan_id,paymentDate:r.payment_date,principalAmount:r.principal_amount,interestAmount:r.interest_amount,totalAmount:r.total_amount,remainingAmount:r.remaining_amount,paymentMethod:r.payment_method,notes:r.notes,branchId:r.branch_id,cashTransactionId:r.cash_transaction_id})}catch(t){return Ct({code:"network",message:"Li kt ni khi thm thanh ton",cause:t})}}function q6(){return Ls({queryKey:["loans"],queryFn:ane,select:e=>{if(!e.ok)throw new Error(Na(e.error));return e.data}})}function dne(){const e=Un();return xa({mutationFn:t=>sne(t),onSuccess:t=>{if(t.ok)e.invalidateQueries({queryKey:["loans"]});else throw new Error(Na(t.error))}})}function une(){const e=Un();return xa({mutationFn:({id:t,updates:r})=>ine(t,r),onSuccess:t=>{if(t.ok)e.invalidateQueries({queryKey:["loans"]});else throw new Error(Na(t.error))}})}function hne(){const e=Un();return xa({mutationFn:t=>one(t),onSuccess:t=>{if(t.ok)e.invalidateQueries({queryKey:["loans"]});else throw new Error(Na(t.error))}})}function fne(e){return Ls({queryKey:["loanPayments",e],queryFn:()=>lne(e),select:t=>{if(!t.ok)throw new Error(Na(t.error));return t.data}})}function mne(){const e=Un();return xa({mutationFn:t=>cne(t),onSuccess:t=>{if(t.ok)e.invalidateQueries({queryKey:["loanPayments"]}),e.invalidateQueries({queryKey:["loans"]});else throw new Error(Na(t.error))}})}const ox={async getCustomers(){const{data:e,error:t}=await It.from("customers").select("*").order("created_at",{ascending:!1});if(t)throw t;return e},async createCustomer(e){const{data:t,error:r}=await It.from("customers").insert([e]).select().single();if(r||r)throw r;return t},async createCustomersBulk(e){const{data:t,error:r}=await It.from("customers").insert(e).select();if(r)throw r;return t},async updateCustomer(e,t){const{data:r,error:n}=await It.from("customers").update(t).eq("id",e).select().single();if(n)throw n;return r},async getSuppliers(){const{data:e,error:t}=await It.from("suppliers").select("*").order("created_at",{ascending:!1});if(t)throw t;return e},async createSupplier(e){const{data:t,error:r}=await It.from("suppliers").insert([e]).select().single();if(r)throw r;return t},async createSuppliersBulk(e){const{data:t,error:r}=await It.from("suppliers").insert(e).select();if(r)throw r;return t},async updateSupplier(e,t){const{data:r,error:n}=await It.from("suppliers").update(t).eq("id",e).select().single();if(n)throw n;return r},async getParts(){const{data:e,error:t}=await It.from("parts").select("*").order("name");if(t)throw t;return e},async createPart(e){const{data:t,error:r}=await It.from("parts").insert([e]).select().single();if(r)throw r;return t},async updatePart(e,t){const{data:r,error:n}=await It.from("parts").update(t).eq("id",e).select().single();if(n)throw n;return r},async getWorkOrders(){const{data:e,error:t}=await It.from("work_orders").select("*").order("created_at",{ascending:!1});if(t)throw t;return e},async createWorkOrder(e){const{data:t,error:r}=await It.from("work_orders").insert([e]).select().single();if(r)throw r;return t},async updateWorkOrder(e,t){const{data:r,error:n}=await It.from("work_orders").update(t).eq("id",e).select().single();if(n)throw n;return r},async getSales(){const{data:e,error:t}=await It.from("sales").select("*").order("date",{ascending:!1});if(t)throw t;return e},async createSale(e){const{data:t,error:r}=await It.from("sales").insert([e]).select().single();if(r)throw r;return t},async getCashTransactions(){const{data:e,error:t}=await It.from("cash_transactions").select("*").order("date",{ascending:!1});if(t)throw t;return e},async createCashTransaction(e){const{data:t,error:r}=await It.from("cash_transactions").insert([e]).select().single();if(r)throw r;return t},async getPaymentSources(){const{data:e,error:t}=await It.from("payment_sources").select("*");if(t)throw t;return e},async updatePaymentSource(e,t){const{data:r,error:n}=await It.from("payment_sources").update(t).eq("id",e).select().single();if(n)throw n;return r},async getInventoryTransactions(){const{data:e,error:t}=await It.from("inventory_transactions").select("*").order("date",{ascending:!1});if(t)throw t;return e},async createInventoryTransaction(e){const{data:t,error:r}=await It.from("inventory_transactions").insert([e]).select().single();if(r)throw r;return t}},H6=()=>Ls({queryKey:["customers"],queryFn:ox.getCustomers,staleTime:300*1e3,gcTime:600*1e3}),PU=()=>{const e=Un();return xa({mutationFn:ox.createCustomer,onSuccess:()=>{e.invalidateQueries({queryKey:["customers"]})}})},xne=()=>{const e=Un();return xa({mutationFn:ox.createCustomersBulk,onSuccess:()=>{e.invalidateQueries({queryKey:["customers"]})}})},pne=()=>{const e=Un();return xa({mutationFn:({id:t,updates:r})=>ox.updateCustomer(t,r),onSuccess:()=>{e.invalidateQueries({queryKey:["customers"]})}})},gne=()=>Ls({queryKey:["parts"],queryFn:ox.getParts,staleTime:300*1e3,gcTime:600*1e3}),IU=()=>Ls({queryKey:["workOrders"],queryFn:ox.getWorkOrders,staleTime:120*1e3,gcTime:300*1e3}),DU=()=>Ls({queryKey:["paymentSources"],queryFn:ox.getPaymentSources}),LS="cash_transactions";async function bne(e){try{let t=It.from(LS).select("*").order("date",{ascending:!1});e!=null&&e.branchId&&(t=t.eq("branchId",e.branchId)),e!=null&&e.startDate&&(t=t.gte("date",e.startDate)),e!=null&&e.endDate&&(t=t.lte("date",e.endDate)),e!=null&&e.limit&&(t=t.limit(e.limit)),e!=null&&e.type&&(t=t.eq("type",e.type));const{data:r,error:n}=await t;return n?Ct({code:"supabase",message:"Khng th ti s qu",cause:n}):Sn(r||[])}catch(t){return Ct({code:"network",message:"Li kt ni khi ti s qu",cause:t})}}async function RS(e){var t;try{if(!e.amount||e.amount<=0)return Ct({code:"validation",message:"S tin phi > 0"});if(!e.branchId)return Ct({code:"validation",message:"Thiu chi nhnh"});if(!e.paymentSourceId)return Ct({code:"validation",message:"Thiu ngun tin"});if(!e.type)return Ct({code:"validation",message:"Thiu loi thu/chi"});const r={amount:e.amount,branchId:e.branchId,paymentSource:e.paymentSourceId,paymentSourceId:e.paymentSourceId,category:e.category||(e.type==="income"?"general_income":"general_expense"),date:e.date||new Date().toISOString(),notes:e.notes,description:e.notes,type:e.type,saleId:e.saleId,workOrderId:e.workOrderId,payrollRecordId:e.payrollRecordId,loanPaymentId:e.loanPaymentId,supplierId:e.supplierId,customerId:e.customerId,recipient:e.recipient},{data:n,error:a}=await It.from(LS).insert([r]).select().single();if(a||!n)return Ct({code:"supabase",message:"Ghi s qu tht bi",cause:a});const i=n;try{if(!r.saleId&&!r.workOrderId&&!r.payrollRecordId&&!r.loanPaymentId){const{data:l}=await It.auth.getUser(),d=((t=l==null?void 0:l.user)==null?void 0:t.id)||null;Ws(d,{action:"cash.manual",tableName:LS,recordId:i.id,oldData:null,newData:i})}}catch{}return Sn(i)}catch(r){return Ct({code:"network",message:"Li kt ni khi ghi s qu",cause:r})}}const O3="payment_sources";async function FS(e,t,r){var n;try{const{data:a,error:i}=await It.from(O3).select("*").eq("id",e).single();if(i||!a)return Ct({code:"supabase",message:"Khng tm thy ngun tin",cause:i});const o=a.balance||{},l={...o,[t]:(o[t]||0)+r},{data:d,error:c}=await It.from(O3).update({balance:l}).eq("id",e).select().single();if(c||!d)return Ct({code:"supabase",message:"Cp nht s d tht bi",cause:c});let u=null;try{const{data:x}=await It.auth.getUser();u=((n=x==null?void 0:x.user)==null?void 0:n.id)||null}catch{}return await Ws(u,{action:"payment_source.balance_adjust",tableName:O3,recordId:e,oldData:{balance:o},newData:{balance:l,delta:r,branchId:t}}),Sn(d)}catch(a){return Ct({code:"network",message:"Li kt ni khi cp nht s d",cause:a})}}const MU=T.createContext(void 0),vne=({children:e})=>{const[t]=T.useState("CN1"),n=(()=>{try{const Ee=localStorage.getItem("motocare-data");if(Ee)return JSON.parse(Ee)}catch(Ee){console.error("Error loading from localStorage:",Ee)}return{}})(),[a,i]=T.useState(()=>(n==null?void 0:n.parts)||[]),[o,l]=T.useState(()=>(n==null?void 0:n.customers)||[]),[d,c]=T.useState(()=>(n==null?void 0:n.suppliers)||[]),[u,x]=T.useState(()=>(n==null?void 0:n.sales)||[]),[b,g]=T.useState(()=>(n==null?void 0:n.workOrders)||[]),[k,y]=T.useState(()=>(n==null?void 0:n.cartItems)||[]),[N,S]=T.useState(()=>(n==null?void 0:n.paymentSources)||[{id:"cash",name:"Tin mt",balance:{CN1:0},isDefault:!0},{id:"bank",name:"Ti khon ngn hng",balance:{CN1:0}}]),[O,A]=T.useState(()=>(n==null?void 0:n.cashTransactions)||[]),[P,q]=T.useState(()=>(n==null?void 0:n.inventoryTransactions)||[]),[W,R]=T.useState(()=>(n==null?void 0:n.employees)||[]),[U,L]=T.useState(()=>(n==null?void 0:n.payrollRecords)||[]),[Q,H]=T.useState(()=>(n==null?void 0:n.loans)||[]),[G,Z]=T.useState(()=>(n==null?void 0:n.loanPayments)||[]),[te,se]=T.useState(()=>(n==null?void 0:n.customerDebts)||[]),[ue,ae]=T.useState(()=>(n==null?void 0:n.supplierDebts)||[]);T.useEffect(()=>{const Ee={parts:a,customers:o,suppliers:d,sales:u,workOrders:b,cartItems:k,paymentSources:N,cashTransactions:O,inventoryTransactions:P,employees:W,payrollRecords:U,loans:Q,loanPayments:G,customerDebts:te,supplierDebts:ue};localStorage.setItem("motocare-data",JSON.stringify(Ee))},[a,o,d,u,b,k,N,O,P,W,U,Q,G,te,ue]);const pe=T.useCallback(Ee=>{i(be=>{if(Ee.id)return be.map(Ye=>Ye.id===Ee.id?{...Ye,...Ee}:Ye);const ge=`PART-${Date.now()}-${Math.random().toString(16).slice(2)}`;return[{id:ge,name:Ee.name||"Tn ph tng",sku:Ee.sku||ge,stock:Ee.stock||{[t]:0},retailPrice:Ee.retailPrice||{[t]:0},wholesalePrice:Ee.wholesalePrice||{[t]:0},category:Ee.category,description:Ee.description,warrantyPeriod:Ee.warrantyPeriod,created_at:new Date().toISOString()},...be]})},[t]),ve=T.useCallback(Ee=>{i(be=>be.filter(ge=>ge.id!==Ee))},[]),Pe=T.useCallback(Ee=>{l(be=>Ee.id?be.findIndex(Je=>Je.id===Ee.id)>=0?be.map(Je=>Je.id===Ee.id?{...Je,...Ee}:Je):[{id:Ee.id,name:Ee.name||"Khch hng",phone:Ee.phone,created_at:new Date().toISOString(),...Ee},...be]:[{id:`CUS-${Date.now()}-${Math.random().toString(16).slice(2)}`,name:Ee.name||"Khch hng",phone:Ee.phone,created_at:new Date().toISOString(),...Ee},...be])},[]),xe=T.useCallback(Ee=>{c(be=>Ee.id?be.map(Ye=>Ye.id===Ee.id?{...Ye,...Ee}:Ye):[{id:`SUP-${Date.now()}-${Math.random().toString(16).slice(2)}`,name:Ee.name||"Nh cung cp",phone:Ee.phone,email:Ee.email,address:Ee.address,created_at:new Date().toISOString()},...be])},[]),B=T.useCallback(Ee=>{g(be=>be.find(Qe=>Qe.id===Ee.id)?be.map(Qe=>Qe.id===Ee.id?Ee:Qe):[Ee,...be])},[]),re=T.useCallback(()=>y([]),[]),J=T.useCallback(Ee=>{if(!Ee.items.length)return;const be=Ee.items.reduce((Ke,zt)=>Ke+zt.sellingPrice*zt.quantity,0),ge=Ee.items.reduce((Ke,zt)=>Ke+(zt.discount||0),0),Qe=be-ge-Ee.discount,Ye=`SALE-${Date.now()}`,at={id:Ye,date:new Date().toISOString(),items:Ee.items,subtotal:be,discount:Ee.discount+ge,total:Qe,customer:Ee.customer,paymentMethod:Ee.paymentMethod,userId:"local-user",userName:"Local User",branchId:t,cashTransactionId:void 0};x(Ke=>[at,...Ke]),i(Ke=>Ke.map(zt=>{const Ft=Ee.items.filter(fr=>fr.partId===zt.id).reduce((fr,hr)=>fr+hr.quantity,0);return Ft?{...zt,stock:{...zt.stock,[t]:(zt.stock[t]||0)-Ft}}:zt}));const ct={id:`CT-${Date.now()}`,type:"income",date:new Date().toISOString(),amount:Qe,notes:Ee.note||"Thu tin bn hng",paymentSourceId:Ee.paymentMethod,branchId:t,category:"sale_income",saleId:Ye};A(Ke=>[ct,...Ke]),S(Ke=>Ke.map(zt=>zt.id===Ee.paymentMethod?{...zt,balance:{...zt.balance,[t]:(zt.balance[t]||0)+Qe}}:zt)),re()},[re,t]),ie=T.useCallback(Ee=>{const be=u.find(ge=>ge.id===Ee);be&&(x(ge=>ge.filter(Qe=>Qe.id!==Ee)),i(ge=>ge.map(Qe=>{const Ye=be.items.filter(at=>at.partId===Qe.id).reduce((at,Je)=>at+Je.quantity,0);return Ye?{...Qe,stock:{...Qe.stock,[t]:(Qe.stock[t]||0)+Ye}}:Qe})),A(ge=>ge.filter(Qe=>Qe.saleId!==Ee)),S(ge=>ge.map(Qe=>Qe.id===be.paymentMethod?{...Qe,balance:{...Qe.balance,[t]:(Qe.balance[t]||0)-be.total}}:Qe)))},[u,t]),Y=T.useCallback(Ee=>{const ge={id:`INV-${Date.now()}-${Math.random().toString(16).slice(2)}`,...Ee};q(Qe=>[ge,...Qe])},[]),_e=T.useCallback(Ee=>{R(be=>Ee.id?be.map(Ye=>Ye.id===Ee.id?{...Ye,...Ee}:Ye):[{id:`EMP-${Date.now()}-${Math.random().toString(16).slice(2)}`,name:Ee.name||"Nhn vin",phone:Ee.phone,position:Ee.position||"",baseSalary:Ee.baseSalary||0,startDate:Ee.startDate||new Date().toISOString(),status:Ee.status||"active",created_at:new Date().toISOString()},...be])},[]),me=T.useCallback(Ee=>{L(be=>be.find(Qe=>Qe.id===Ee.id)?be.map(Qe=>Qe.id===Ee.id?Ee:Qe):[Ee,...be])},[]),ne=T.useCallback(Ee=>{H(be=>Ee.id?be.map(Ye=>Ye.id===Ee.id?{...Ye,...Ee}:Ye):[{id:`LOAN-${Date.now()}-${Math.random().toString(16).slice(2)}`,lenderName:Ee.lenderName||"",loanType:Ee.loanType||"bank",principal:Ee.principal||0,interestRate:Ee.interestRate||0,term:Ee.term||0,startDate:Ee.startDate||new Date().toISOString(),endDate:Ee.endDate||new Date().toISOString(),monthlyPayment:Ee.monthlyPayment||0,remainingAmount:Ee.remainingAmount||Ee.principal||0,status:Ee.status||"active",purpose:Ee.purpose,collateral:Ee.collateral,branchId:t,created_at:new Date().toISOString()},...be])},[t]),je=T.useCallback(Ee=>{Z(be=>be.find(Qe=>Qe.id===Ee.id)?be.map(Qe=>Qe.id===Ee.id?Ee:Qe):[Ee,...be])},[]),De=T.useCallback((Ee,be,ge)=>{let Qe=0;se(Ye=>Ye.map(at=>{if(Ee.includes(at.customerId)&&at.branchId===t){const Je=at.remainingAmount;return Qe+=Je,{...at,paidAmount:at.totalAmount,remainingAmount:0,status:"paid"}}return at}).filter(at=>at.remainingAmount>0)),Qe>0&&(async()=>{var Ke;const{data:Ye}=await It.auth.getUser(),at=((Ke=Ye==null?void 0:Ye.user)==null?void 0:Ke.id)||null,Je=await RS({type:"income",amount:Qe,branchId:t,paymentSourceId:be,date:ge,category:"debt_collection",notes:`Thu ht n cho ${Ee.length} khch hng`,recipient:`Thu n ${Ee.length} khch hng`});if(!Je.ok){Ze.error(Na(Je.error));return}const ct=await FS(be,t,Qe);ct.ok||Ze.error(Na(ct.error)),Ws(at,{action:"debt.customer_pay",tableName:"customer_debts",oldData:null,newData:{customerIds:Ee,totalPaid:Qe,paymentMethod:be,timestamp:ge}})})()},[t]),ce=T.useCallback((Ee,be,ge)=>{let Qe=0;ae(Ye=>Ye.map(at=>{if(Ee.includes(at.supplierId)&&at.branchId===t){const Je=at.remainingAmount;return Qe+=Je,{...at,paidAmount:at.totalAmount,remainingAmount:0,status:"paid"}}return at}).filter(at=>at.remainingAmount>0)),Qe>0&&(async()=>{var Ke;const{data:Ye}=await It.auth.getUser(),at=((Ke=Ye==null?void 0:Ye.user)==null?void 0:Ke.id)||null,Je=await RS({type:"expense",amount:Qe,branchId:t,paymentSourceId:be,date:ge,category:"debt_payment",notes:`Tr ht n cho ${Ee.length} nh cung cp`,recipient:`Tr n ${Ee.length} nh cung cp`});if(!Je.ok){Ze.error(Na(Je.error));return}const ct=await FS(be,t,-Qe);ct.ok||Ze.error(Na(ct.error)),Ws(at,{action:"debt.supplier_pay",tableName:"supplier_debts",oldData:null,newData:{supplierIds:Ee,totalPaid:Qe,paymentMethod:be,timestamp:ge}})})()},[t]);return s.jsx(MU.Provider,{value:{parts:a,customers:o,suppliers:d,sales:u,workOrders:b,cartItems:k,paymentSources:N,cashTransactions:O,inventoryTransactions:P,employees:W,payrollRecords:U,loans:Q,loanPayments:G,customerDebts:te,supplierDebts:ue,currentBranchId:t,setParts:i,upsertPart:pe,deletePart:ve,setCustomers:l,upsertCustomer:Pe,setSuppliers:c,upsertSupplier:xe,setWorkOrders:g,upsertWorkOrder:B,setCartItems:y,clearCart:re,deleteSale:ie,finalizeSale:J,setPaymentSources:S,setCashTransactions:A,recordInventoryTransaction:Y,setEmployees:R,upsertEmployee:_e,setPayrollRecords:L,upsertPayrollRecord:me,setLoans:H,upsertLoan:ne,setLoanPayments:Z,upsertLoanPayment:je,setCustomerDebts:se,setSupplierDebts:ae,payCustomerDebts:De,paySupplierDebts:ce},children:e})},Ua=()=>{const e=T.useContext(MU);if(!e)throw new Error("useAppContext phi dng bn trong AppProvider");return e},Te=e=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(e),Fn=(e,t=!0)=>{if(!e)return"--";const r=typeof e=="string"?new Date(e):e;if(Number.isNaN(r.getTime()))return"--";const n=String(r.getDate()).padStart(2,"0"),a=String(r.getMonth()+1).padStart(2,"0"),i=r.getFullYear();if(t)return`${n}/${a}/${i}`;const o=String(r.getHours()).padStart(2,"0"),l=String(r.getMinutes()).padStart(2,"0");return`${n}/${a}/${i} ${o}:${l}`},qi=(e,t)=>{if(!e)return"";const r=t||"SC";let n=e.match(new RegExp(`^${r}-(\\d{10,})`,"i"));if(n||(n=e.match(/WO-(\d+)/i)||e.match(/(\d{10,})/)),n&&n[1]){const a=n[1],i=Number(a);if(!Number.isNaN(i)){const o=new Date(i);if(!Number.isNaN(o.getTime())){const l=`${o.getFullYear()}${String(o.getMonth()+1).padStart(2,"0")}${String(o.getDate()).padStart(2,"0")}`,d=String(a).slice(-6).padStart(6,"0");return`${r}-${l}-${d}`}}}return e},Z1=(e,t)=>{if(!e)return"";const r=e.match(/^([A-Z0-9_-]+)-(\d{10,})$/i);if(r){const a=r[1],i=r[2],o=Number(i);if(!Number.isNaN(o)){const l=new Date(o);if(!Number.isNaN(l.getTime())){const d=`${l.getFullYear()}${String(l.getMonth()+1).padStart(2,"0")}${String(l.getDate()).padStart(2,"0")}`,c=String(i).slice(-6).padStart(6,"0");return`${a}-${d}-${c}`}}}const n=e.match(/(\d{10,})/);if(n){const a=n[1],i=Number(a);if(!Number.isNaN(i)){const o=new Date(i);if(!Number.isNaN(o.getTime())){const l=`${o.getFullYear()}${String(o.getMonth()+1).padStart(2,"0")}${String(o.getDate()).padStart(2,"0")}`,d=String(a).slice(-6).padStart(6,"0");return`SC-${l}-${d}`}}}return e},yne=()=>{var S,O;const[e,t]=T.useState(!1),r=T.useRef(null),{currentBranchId:n}=Ua(),{data:a=[]}=lh(),{data:i=[]}=q6(),{data:o=[]}=DU(),{data:l=[]}=IU(),d=[],c=a.filter(A=>(A.stock[n]||0)<10&&(A.stock[n]||0)>0),u=a.filter(A=>(A.stock[n]||0)===0);u.length>0&&d.push({id:"out-of-stock",type:"low-stock",title:"Ht hng",message:`${u.length} sn phm  ht hng`,link:"/inventory",icon:s.jsx(ru,{className:"w-5 h-5"}),color:"text-red-500 bg-red-50 dark:bg-red-900/20"}),c.length>0&&d.push({id:"low-stock",type:"low-stock",title:"Sp ht hng",message:`${c.length} sn phm cn nhp thm`,link:"/inventory",icon:s.jsx(ru,{className:"w-5 h-5"}),color:"text-orange-500 bg-orange-50 dark:bg-orange-900/20"});const x=i.filter(A=>{const P=Math.ceil((new Date(A.endDate).getTime()-Date.now())/864e5);return P<=30&&P>0&&A.status==="active"});x.length>0&&d.push({id:"loan-due",type:"loan-due",title:"N sp n hn",message:`${x.length} khon vay trong 30 ngy ti`,link:"/finance",icon:s.jsx(Fm,{className:"w-5 h-5"}),color:"text-red-500 bg-red-50 dark:bg-red-900/20"});const b=((S=o.find(A=>A.id==="cash"))==null?void 0:S.balance[n])||0,g=((O=o.find(A=>A.id==="bank"))==null?void 0:O.balance[n])||0,k=b+g;k<1e7&&d.push({id:"low-balance",type:"low-balance",title:"S d thp",message:`Tng s d: ${Te(k)}`,link:"/cashbook",icon:s.jsx(q0,{className:"w-5 h-5"}),color:"text-amber-500 bg-amber-50 dark:bg-amber-900/20"});const y=(l||[]).filter(A=>A.status==="Tip nhn"||A.status==="ang sa");y.length>0&&d.push({id:"work-orders",type:"work-order",title:"Phiu ch x l",message:`${y.length} xe ang ch sa cha`,link:"/service",icon:s.jsx(Bm,{className:"w-5 h-5"}),color:"text-blue-500 bg-blue-50 dark:bg-blue-900/20"});const N=d.length;return T.useEffect(()=>{const A=P=>{r.current&&!r.current.contains(P.target)&&t(!1)};return document.addEventListener("mousedown",A),()=>document.removeEventListener("mousedown",A)},[]),s.jsxs("div",{className:"relative",ref:r,children:[s.jsxs("button",{onClick:()=>t(!e),className:"relative p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors","aria-label":"Thng bo",children:[s.jsx(bS,{className:"w-5 h-5 text-slate-600 dark:text-slate-300"}),N>0&&s.jsx("span",{className:"absolute -top-0.5 -right-0.5 min-w-[18px] h-[18px] px-1 flex items-center justify-center text-[10px] font-bold text-white bg-red-500 rounded-full animate-pulse",children:N>9?"9+":N})]}),e&&s.jsxs("div",{className:"absolute right-0 mt-2 w-80 bg-white dark:bg-slate-800 rounded-xl shadow-xl border border-slate-200 dark:border-slate-700 overflow-hidden z-50",children:[s.jsxs("div",{className:"px-4 py-3 border-b border-slate-200 dark:border-slate-700 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(bw,{className:"w-4 h-4 text-amber-500"}),s.jsx("h3",{className:"font-semibold text-slate-900 dark:text-white text-sm",children:"Thng bo"}),N>0&&s.jsx("span",{className:"px-1.5 py-0.5 text-[10px] font-bold bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400 rounded-full",children:N})]}),s.jsx("button",{onClick:()=>t(!1),className:"p-1 hover:bg-slate-100 dark:hover:bg-slate-700 rounded transition",children:s.jsx(ic,{className:"w-4 h-4 text-slate-400"})})]}),s.jsx("div",{className:"max-h-80 overflow-y-auto",children:d.length===0?s.jsxs("div",{className:"px-4 py-8 text-center",children:[s.jsx("div",{className:"w-12 h-12 mx-auto mb-3 rounded-full bg-green-100 dark:bg-green-900/20 flex items-center justify-center",children:s.jsx(bS,{className:"w-6 h-6 text-green-500"})}),s.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Khng c thng bo mi"}),s.jsx("p",{className:"text-xs text-slate-400 dark:text-slate-500 mt-1",children:"Mi th ang n! "})]}):s.jsx("div",{className:"divide-y divide-slate-100 dark:divide-slate-700",children:d.map(A=>s.jsxs(kd,{to:A.link,onClick:()=>t(!1),className:"flex items-start gap-3 px-4 py-3 hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors group",children:[s.jsx("div",{className:`flex-shrink-0 w-10 h-10 rounded-lg flex items-center justify-center ${A.color}`,children:A.icon}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-medium text-slate-900 dark:text-white",children:A.title}),s.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-0.5 truncate",children:A.message})]}),s.jsx(qJ,{className:"w-4 h-4 text-slate-400 group-hover:text-slate-600 dark:group-hover:text-slate-300 transition flex-shrink-0 mt-1"})]},A.id))})}),d.length>0&&s.jsx("div",{className:"px-4 py-2 border-t border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900/50",children:s.jsx("p",{className:"text-[10px] text-slate-400 dark:text-slate-500 text-center",children:"Click vo thng bo  xem chi tit"})})]})]})},wne="modulepreload",kne=function(e){return"/"+e},jO={},km=function(t,r,n){let a=Promise.resolve();if(r&&r.length>0){let o=function(c){return Promise.all(c.map(u=>Promise.resolve(u).then(x=>({status:"fulfilled",value:x}),x=>({status:"rejected",reason:x}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),d=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));a=o(r.map(c=>{if(c=kne(c),c in jO)return;jO[c]=!0;const u=c.endsWith(".css"),x=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${x}`))return;const b=document.createElement("link");if(b.rel=u?"stylesheet":wne,u||(b.as="script"),b.crossOrigin="",b.href=c,d&&b.setAttribute("nonce",d),document.head.appendChild(b),u)return new Promise((g,k)=>{b.addEventListener("load",g),b.addEventListener("error",()=>k(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return a.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})};var Nne=function(){return null};const LU=T.createContext(void 0),_ne=({children:e})=>{const[t,r]=T.useState(()=>{const a=localStorage.getItem("theme");return a==="light"||a==="dark"?a:"light"});T.useEffect(()=>{localStorage.setItem("theme",t),t==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[t]);const n=()=>{r(a=>a==="light"?"dark":"light")};return s.jsx(LU.Provider,{value:{theme:t,toggleTheme:n},children:e})},Sne=()=>{const e=T.useContext(LU);if(!e)throw new Error("useTheme must be used within ThemeProvider");return e},RU=T.createContext(void 0),qc=()=>{const e=T.useContext(RU);if(!e)throw new Error("useAuth must be used within AuthProvider");return e},FU=({children:e})=>{const[t,r]=T.useState(null),[n,a]=T.useState(null),[i,o]=T.useState(null),[l,d]=T.useState(!0),[c,u]=T.useState(null);T.useEffect(()=>{It.auth.getSession().then(({data:{session:O}})=>{o(O),r((O==null?void 0:O.user)??null),O!=null&&O.user?x(O.user.id):d(!1)});const N=async(O,A)=>{o(A),r((A==null?void 0:A.user)??null),A!=null&&A.user?x(A.user.id):(a(null),d(!1))},{data:{subscription:S}}=It.auth.onAuthStateChange(N);return()=>S.unsubscribe()},[]);const x=async N=>{try{let{data:S,error:O}=await It.from("profiles").select("*").eq("id",N).maybeSingle();if(O&&O.code!=="PGRST116")throw O;if(!S){const A=await It.from("user_profiles").select("*").eq("id",N).maybeSingle();if(S=A.data,O=A.error,O&&O.code!=="PGRST116")throw O}if(O)throw O;a(S||null)}catch(S){console.error("Error loading user profile:",S),a(null),u("Khng th ti h s ngi dng")}finally{d(!1)}},y={user:t,profile:n,session:i,loading:l,error:c,signIn:async(N,S)=>{var q;const{error:O,data:A}=await It.auth.signInWithPassword({email:N,password:S});if(O)throw O;u(null);const P=((q=A==null?void 0:A.user)==null?void 0:q.id)||null;Ws(P,{action:"auth.login"})},signOut:async()=>{const N=(t==null?void 0:t.id)||null,{error:S}=await It.auth.signOut();if(S)throw S;u(null),Ws(N,{action:"auth.logout"})},hasRole:N=>n?N.includes(n.role):!1};return s.jsx(RU.Provider,{value:y,children:e})},jne=Object.freeze(Object.defineProperty({__proto__:null,AuthProvider:FU,useAuth:qc},Symbol.toStringTag,{value:"Module"})),Cne=()=>{const e=Rk(),{signIn:t}=qc(),[r,n]=T.useState(""),[a,i]=T.useState(""),[o,l]=T.useState(!1),[d,c]=T.useState(""),u=async x=>{x.preventDefault(),c(""),l(!0);try{await t(r,a),Ze.success("ng nhp thnh cng!"),e("/dashboard")}catch(b){console.error("Login error:",b);const g=b.message||"ng nhp tht bi";c(g),Ze.error(g)}finally{l(!1)}};return s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-900 dark:to-slate-800 flex items-center justify-center p-4",children:s.jsxs("div",{className:"w-full max-w-md",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-white dark:bg-slate-800 rounded-2xl mb-4 shadow-lg ring-1 ring-slate-200 dark:ring-slate-700 overflow-hidden",children:s.jsx("img",{src:"/logo-smartcare.png",alt:"Nhn-Lm SmartCare",className:"w-full h-full object-contain p-1.5",onError:x=>{const b=x.currentTarget;b.style.display="none";const g=b.parentElement;if(g){g.innerHTML="";const k=document.createElement("span");k.className="text-blue-600 dark:text-blue-400",g.appendChild(k)}}})}),s.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-white mb-2",children:"MotoCare"}),s.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"H thng qun l ca hng xe my"})]}),s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-xl border border-slate-200 dark:border-slate-700 p-8",children:[s.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white mb-6",children:"ng nhp"}),d&&s.jsx("div",{className:"mb-4 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:s.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:d})}),s.jsxs("form",{onSubmit:u,className:"space-y-5",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Email"}),s.jsx("input",{type:"email",value:r,onChange:x=>n(x.target.value),placeholder:"your@email.com",required:!0,className:"w-full px-4 py-3 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white placeholder-slate-400 dark:placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Mt khu"}),s.jsx("input",{type:"password",value:a,onChange:x=>i(x.target.value),placeholder:"",required:!0,className:"w-full px-4 py-3 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white placeholder-slate-400 dark:placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"})]}),s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[s.jsx("input",{type:"checkbox",className:"w-4 h-4 text-blue-600 border-slate-300 dark:border-slate-600 rounded focus:ring-2 focus:ring-blue-500"}),s.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Ghi nh ng nhp"})]}),s.jsx("a",{href:"#",className:"text-blue-600 dark:text-blue-400 hover:underline",children:"Qun mt khu?"})]}),s.jsx("button",{type:"submit",disabled:o,className:"w-full py-3 bg-blue-600 hover:bg-blue-700 disabled:bg-slate-400 text-white font-semibold rounded-lg transition-colors shadow-lg hover:shadow-xl disabled:cursor-not-allowed",children:o?s.jsxs("span",{className:"flex items-center justify-center gap-2",children:[s.jsxs("svg",{className:"animate-spin h-5 w-5",viewBox:"0 0 24 24",fill:"none",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"ang ng nhp..."]}):"ng nhp"})]})]}),s.jsx("div",{className:"text-center mt-6",children:s.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:" 2025 MotoCare. Phin bn 1.0.0"})})]})})},BU=({size:e="md",color:t="blue",text:r})=>{const n={sm:"w-4 h-4 border-2",md:"w-8 h-8 border-3",lg:"w-12 h-12 border-4"},a={blue:"border-blue-200 dark:border-blue-900 border-t-blue-600 dark:border-t-blue-400",white:"border-white/30 border-t-white",slate:"border-slate-200 dark:border-slate-700 border-t-slate-600 dark:border-t-slate-400"};return s.jsxs("div",{className:"flex flex-col items-center justify-center gap-3",children:[s.jsx("div",{className:`${n[e]} ${a[t]} rounded-full animate-spin`}),r&&s.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 animate-pulse",children:r})]})},Ou=({children:e,requiredRoles:t})=>{const{user:r,profile:n,loading:a,error:i}=qc();return i&&Ze.error(i),a||r&&!n?s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-50 dark:bg-slate-900",children:s.jsx(BU,{})}):r?t&&n&&!t.includes(n.role)?s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-50 dark:bg-slate-900",children:s.jsxs("div",{className:"text-center",children:[s.jsxs("h1",{className:"text-4xl font-bold text-slate-900 dark:text-white mb-4 flex items-center justify-center gap-3",children:[s.jsx(TB,{className:"w-8 h-8 text-red-600 dark:text-red-400"}),"Khng c quyn truy cp"]}),s.jsx("p",{className:"text-slate-600 dark:text-slate-400 mb-6",children:"Bn khng c quyn truy cp trang ny."}),s.jsx("button",{onClick:()=>window.history.back(),className:"px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-semibold",children:"Quay li"})]})}):s.jsx(s.Fragment,{children:e}):s.jsx(rB,{to:"/login",replace:!0})},BS="inventory_transactions";async function Ane(e){try{let t=It.from(BS).select("id,type,partId,partName,quantity,date,unitPrice,totalPrice,branchId,notes,saleId,workOrderId,created_at").order("created_at",{ascending:!1});e!=null&&e.branchId&&(t=t.eq("branchId",e.branchId)),e!=null&&e.startDate&&(t=t.gte("date",e.startDate)),e!=null&&e.endDate&&(t=t.lte("date",e.endDate)),e!=null&&e.limit&&(t=t.limit(e.limit));const{data:r,error:n}=await t;return n?Ct({code:"supabase",message:(n==null?void 0:n.message)||(n==null?void 0:n.details)||"Khng th ti lch s kho",cause:n}):Sn(r||[])}catch(t){return Ct({code:"network",message:"Li kt ni khi ti lch s kho",cause:t})}}async function Ene(e){var t;try{if(!e.partId||!e.partName)return Ct({code:"validation",message:"Thiu thng tin ph tng"});if(!e.quantity||e.quantity<=0)return Ct({code:"validation",message:"S lng phi > 0"});if(!e.branchId)return Ct({code:"validation",message:"Thiu chi nhnh"});if(!e.type)return Ct({code:"validation",message:"Thiu loi giao dch kho"});const r=e.unitPrice??0,n=e.totalPrice??r*e.quantity,a={id:typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():`${Math.random().toString(36).slice(2)}-${Date.now()}`,type:e.type,partId:e.partId,partName:e.partName,quantity:e.quantity,date:e.date||new Date().toISOString(),unitPrice:r||null,totalPrice:n,branchId:e.branchId,notes:e.notes,saleId:e.saleId,workOrderId:e.workOrderId},{data:i,error:o}=await It.from(BS).insert([a]).select().single();if(o||!i)return Ct({code:"supabase",message:(o==null?void 0:o.message)||(o==null?void 0:o.details)||"Ghi lch s kho tht bi",cause:o});let l=null;try{const{data:d}=await It.auth.getUser();l=((t=d==null?void 0:d.user)==null?void 0:t.id)||null}catch{}return await Ws(l,{action:e.type==="Nhp kho"?"inventory.receipt":"inventory.adjust",tableName:BS,recordId:i.id,oldData:null,newData:i}),Sn(i)}catch(r){return Ct({code:"network",message:"Li kt ni khi ghi lch s kho",cause:r})}}async function Tne(e,t,r,n,a){try{const{data:i,error:o}=await It.rpc("receipt_create_atomic",{p_items:e,p_supplier_id:t,p_branch_id:r,p_user_id:n,p_notes:a});return o?Ct({code:"supabase",message:o.message,cause:o}):i&&!i.success?Ct({code:"validation",message:i.message}):Sn(i)}catch(i){return Ct({code:"network",message:"Li kt ni khi to phiu nhp",cause:i})}}function One(){const e=Un();return xa({mutationFn:async t=>{const r=await Tne(t.items,t.supplierId,t.branchId,t.userId,t.notes);if(!r.ok)throw r.error;return r.data},onSuccess:()=>{e.invalidateQueries({queryKey:["inventoryTransactions"]}),e.invalidateQueries({queryKey:["inventoryTxRepo"]}),e.invalidateQueries({queryKey:["partsRepo"]}),e.invalidateQueries({queryKey:["partsRepoPaged"]})}})}const $k="sales";async function UU(){try{const{data:e,error:t}=await It.from($k).select("*").order("date",{ascending:!1});if(t)return Ct({code:"supabase",message:"Khng th ti danh sch ha n",cause:t});const r=(e||[]).map(n=>({...n,userName:n.username||"N/A",paymentMethod:n.paymentmethod||n.paymentMethod||"cash",userId:n.userid||n.userId,branchId:n.branchid||n.branchId}));return Sn(r)}catch(e){return Ct({code:"network",message:"Li kt ni ti my ch",cause:e})}}async function zU(e){const{branchId:t,fromDate:r,toDate:n,page:a=1,pageSize:i=20,search:o,status:l,paymentMethod:d,mode:c="offset",afterDate:u,afterId:x}=e||{};try{let b=It.from($k).select("*",{count:"exact"}).order("date",{ascending:!1});if(t&&(b=b.eq("branchid",t)),r&&(b=b.gte("date",r)),n&&(b=b.lte("date",n)),o){const k=o.replace(/[%_]/g,"");b=b.or(`id.ilike.%${k}%,customer->>name.ilike.%${k}%,sale_code.ilike.%${k}%`)}d&&(b=b.eq("paymentmethod",d)),l&&(l==="cancelled"||l==="refunded"?b=b.eq("refunded",!0):l==="completed"&&(b=b.or("refunded.is.null,refunded.eq.false")));let g={};if(c==="keyset"){u&&(x?b=b.or(`date.lt.${u},and(date.eq.${u},id.lt.${x})`):b=b.lt("date",u)),b=b.limit(i);const{data:k,error:y}=await b;if(y)return Ct({code:"supabase",message:"Khng th ti danh sch ha n (keyset)",cause:y});const S=(k||[]).map(O=>({...O,userName:O.username||"N/A",paymentMethod:O.paymentmethod||O.paymentMethod||"cash",userId:O.userid||O.userId,branchId:O.branchid||O.branchId}));return g={mode:"keyset",pageSize:i,hasMore:S.length===i,nextAfterDate:S.length?S[S.length-1].date:void 0,nextAfterId:S.length?S[S.length-1].id:void 0},Sn(S,g)}else{const k=(a-1)*i,y=k+i-1;b=b.range(k,y);const{data:N,error:S,count:O}=await b;if(S)return Ct({code:"supabase",message:"Khng th ti danh sch ha n (phn trang)",cause:S});const A=(N||[]).map(W=>({...W,userName:W.username||"N/A",paymentMethod:W.paymentmethod||W.paymentMethod||"cash",userId:W.userid||W.userId,branchId:W.branchid||W.branchId})),P=O||0,q=Math.max(1,Math.ceil(P/i));return g={mode:"offset",page:a,pageSize:i,total:P,totalPages:q,hasMore:a<q},Sn(A,g)}}catch(b){return Ct({code:"network",message:"Li kt ni khi ti ha n (phn trang)",cause:b})}}async function qU(e){var t;try{if(!e.items||!e.items.length)return Ct({code:"validation",message:"Thiu danh sch hng ha"});if(!e.paymentMethod)return Ct({code:"validation",message:"Thiu phng thc thanh ton"});if(!e.id)return Ct({code:"validation",message:"Thiu ID ha n"});const r={p_sale_id:e.id,p_items:e.items,p_discount:e.discount??0,p_customer:e.customer??{name:"Khch l"},p_payment_method:e.paymentMethod,p_user_id:e.userId||"unknown",p_user_name:e.userName||"Unknown",p_branch_id:e.branchId||"CN1"},{data:n,error:a}=await It.rpc("sale_create_atomic",r);if(a||!n){const c=(a==null?void 0:a.details)||(a==null?void 0:a.message)||"",u=c.toUpperCase();if(u.includes("INSUFFICIENT_STOCK")){let x=[];const b=c.indexOf(":");if(b!==-1){const k=c.slice(b+1).trim();try{x=JSON.parse(k)}catch{}}const g=Array.isArray(x)?x.map(k=>`${k.partName||k.partId||"?"} (cn ${k.available}, cn ${k.requested})`).join(", "):"";return Ct({code:"validation",message:g?`Thiu tn kho: ${g}`:"Tn kho khng  cho mt hoc nhiu sn phm",cause:a})}return u.includes("PART_NOT_FOUND")?Ct({code:"validation",message:"Khng tm thy ph tng trong kho",cause:a}):u.includes("INVALID_ITEM")?Ct({code:"validation",message:"D liu sn phm khng hp l",cause:a}):u.includes("EMPTY_ITEMS")?Ct({code:"validation",message:"Danh sch hng ha trng",cause:a}):u.includes("INVALID_PAYMENT_METHOD")?Ct({code:"validation",message:"Phng thc thanh ton khng hp l",cause:a}):u.includes("UNAUTHORIZED")?Ct({code:"supabase",message:"Bn khng c quyn to ha n",cause:a}):u.includes("BRANCH_MISMATCH")?Ct({code:"validation",message:"Chi nhnh khng khp vi quyn hin ti",cause:a}):Ct({code:"supabase",message:"To ha n (atomic) tht bi",cause:a})}const i=n.sale,o=n.cashTransactionId,l=n.inventoryTxCount;if(!i)return Ct({code:"unknown",message:"Kt qu RPC khng hp l"});let d=null;try{const{data:c}=await It.auth.getUser();d=((t=c==null?void 0:c.user)==null?void 0:t.id)||null}catch{}return await Ws(d,{action:"sale.create",tableName:$k,recordId:i.id,oldData:null,newData:i}),Sn({...i,cashTransactionId:o,inventoryTxCount:l})}catch(r){return Ct({code:"network",message:"Li kt ni khi to ha n (atomic)",cause:r})}}async function Pne(e){var t;try{const{data:r,error:n}=await It.rpc("sale_delete_atomic",{p_sale_id:e});if(n)return(n.message||"").includes("SALE_NOT_FOUND")?Ct({code:"not_found",message:"Khng tm thy ha n",cause:n}):Ct({code:"supabase",message:"Xa ha n tht bi",cause:n});let a=null;try{const{data:i}=await It.auth.getUser();a=((t=i==null?void 0:i.user)==null?void 0:t.id)||null}catch{}return await Ws(a,{action:"sale.delete",tableName:$k,recordId:e,oldData:null,newData:r}),Sn({id:e})}catch(r){return Ct({code:"network",message:"Li kt ni khi xa ha n",cause:r})}}const Ine=Object.freeze(Object.defineProperty({__proto__:null,createSaleAtomic:qU,deleteSaleById:Pne,fetchSales:UU,fetchSalesPaged:zU},Symbol.toStringTag,{value:"Module"})),Jb=()=>Ls({queryKey:["salesRepo"],queryFn:async()=>{const e=await UU();if(!e.ok)throw e.error;return e.data}}),Dne=e=>Ls({queryKey:["salesRepoPaged",e],queryFn:async()=>{const{status:t,...r}=e||{},n={...r,status:t==="all"?void 0:t},a=await zU(n);if(!a.ok)throw a.error;return{data:a.data,meta:a.meta}},placeholderData:t=>t}),Mne=()=>{const e=Un();return xa({mutationFn:t=>qU(t),onSuccess:t=>{var r;e.invalidateQueries({queryKey:["salesRepo"]}),e.invalidateQueries({queryKey:["salesRepoPaged"]}),e.invalidateQueries({queryKey:["salesRepoKeyset"]}),e.invalidateQueries({queryKey:["partsRepo"]}),e.invalidateQueries({queryKey:["partsRepoPaged"]}),e.invalidateQueries({queryKey:["inventoryTxRepo"]}),Ze.success(" to ha n (atomic)"),(r=t==null?void 0:t.data)!=null&&r.inventoryTxCount&&Ze.info(`Xut kho: ${t.data.inventoryTxCount} dng`)},onError:t=>Ze.error(Na(t))})},HU=e=>Ls({queryKey:["cashTxRepo",e],queryFn:async()=>{const t=await bne(e);if(!t.ok)throw t.error;return t.data}}),$U=()=>{const e=Un();return xa({mutationFn:t=>RS(t),onSuccess:()=>{e.invalidateQueries({queryKey:["cashTxRepo"]}),Ze.success(" ghi thu/chi")},onError:t=>Ze.error(Na(t))})},Vk="employees";async function Lne(){try{const{data:e,error:t}=await It.from(Vk).select("*").order("created_at",{ascending:!1});if(t)return Ct({code:"supabase",message:"Khng th ti danh sch nhn vin",cause:t});const r=(e||[]).map(n=>({id:n.id,name:n.name,phone:n.phone,email:n.email,position:n.position,department:n.department,baseSalary:n.base_salary,allowances:n.allowances,startDate:n.start_date,status:n.status,bankAccount:n.bank_account,bankName:n.bank_name,taxCode:n.tax_code,branchId:n.branch_id,created_at:n.created_at,updated_at:n.updated_at}));return Sn(r)}catch(e){return Ct({code:"network",message:"Li kt ni ti my ch",cause:e})}}async function Rne(e){try{console.log("Creating employee with data:",e);const{data:t,error:r}=await It.rpc("mc_current_branch");console.log("Branch data:",t,"Branch error:",r);const n=t||"CN1",a={id:`EMP-${Date.now()}`,name:e.name,phone:e.phone,email:e.email,position:e.position,department:e.department,base_salary:e.baseSalary,allowances:e.allowances||0,start_date:e.startDate,status:e.status||"active",bank_account:e.bankAccount,bank_name:e.bankName,tax_code:e.taxCode,branch_id:n};console.log("Inserting employee:",a);const{data:i,error:o}=await It.from(Vk).insert(a).select().single();if(console.log("Insert result - data:",i,"error:",o),o||!i)return console.error("Insert failed - error:",o,"data:",i),Ct({code:"supabase",message:(o==null?void 0:o.message)||"Khng th thm nhn vin",cause:o||new Error("No data returned from insert")});const l={id:i.id,name:i.name,phone:i.phone,email:i.email,position:i.position,department:i.department,baseSalary:i.base_salary,allowances:i.allowances,startDate:i.start_date,status:i.status,bankAccount:i.bank_account,bankName:i.bank_name,taxCode:i.tax_code,branchId:i.branch_id,created_at:i.created_at,updated_at:i.updated_at};return Sn(l)}catch(t){return Ct({code:"network",message:"Li kt ni khi thm nhn vin",cause:t})}}async function Fne(e,t){try{const r={};t.name!==void 0&&(r.name=t.name),t.phone!==void 0&&(r.phone=t.phone),t.email!==void 0&&(r.email=t.email),t.position!==void 0&&(r.position=t.position),t.department!==void 0&&(r.department=t.department),t.baseSalary!==void 0&&(r.base_salary=t.baseSalary),t.allowances!==void 0&&(r.allowances=t.allowances),t.startDate!==void 0&&(r.start_date=t.startDate),t.status!==void 0&&(r.status=t.status),t.bankAccount!==void 0&&(r.bank_account=t.bankAccount),t.bankName!==void 0&&(r.bank_name=t.bankName),t.taxCode!==void 0&&(r.tax_code=t.taxCode),r.updated_at=new Date().toISOString();const{data:n,error:a}=await It.from(Vk).update(r).eq("id",e).select().single();if(a||!n)return Ct({code:"supabase",message:"Khng th cp nht nhn vin",cause:a});const i={id:n.id,name:n.name,phone:n.phone,email:n.email,position:n.position,department:n.department,baseSalary:n.base_salary,allowances:n.allowances,startDate:n.start_date,status:n.status,bankAccount:n.bank_account,bankName:n.bank_name,taxCode:n.tax_code,branchId:n.branch_id,created_at:n.created_at,updated_at:n.updated_at};return Sn(i)}catch(r){return Ct({code:"network",message:"Li kt ni khi cp nht nhn vin",cause:r})}}async function Bne(e){try{const{error:t}=await It.from(Vk).delete().eq("id",e);return t?Ct({code:"supabase",message:"Khng th xa nhn vin",cause:t}):Sn(void 0)}catch(t){return Ct({code:"network",message:"Li kt ni khi xa nhn vin",cause:t})}}function $6(){return Ls({queryKey:["employees"],queryFn:async()=>{const e=await Lne();if(!e.ok)throw new Error(Na(e.error));return e.data}})}function Une(){const e=Un();return xa({mutationFn:async t=>{console.log("Mutation called with employee:",t);const r=await Rne(t);if(console.log("Repository result:",r),!r.ok){console.error("Repository failed:",r.error);const n=r.error?Na(r.error):"Khng th thm nhn vin. Vui lng th li.";throw new Error(n)}return r.data},onSuccess:()=>{e.invalidateQueries({queryKey:["employees"]}),Ze.success("Thm nhn vin thnh cng!")},onError:t=>{const r=(t==null?void 0:t.message)||"C li xy ra khi thm nhn vin";Ze.error(r),console.error("Create employee error:",t)}})}function zne(){const e=Un();return xa({mutationFn:async({id:t,updates:r})=>{const n=await Fne(t,r);if(!n.ok)throw new Error(Na(n.error));return n.data},onSuccess:()=>{e.invalidateQueries({queryKey:["employees"]}),Ze.success("Cp nht nhn vin thnh cng!")},onError:t=>{Ze.error(`Li: ${t.message}`)}})}function qne(){const e=Un();return xa({mutationFn:async t=>{const r=await Bne(t);if(!r.ok)throw new Error(Na(r.error));return r.data},onSuccess:()=>{e.invalidateQueries({queryKey:["employees"]}),Ze.success("Xa nhn vin thnh cng!")},onError:t=>{Ze.error(`Li: ${t.message}`)}})}const Dn=()=>Math.random().toString(36).substr(2,9),Jd=new Date,en=e=>{const t=new Date(Jd);return t.setDate(t.getDate()-e),t.toISOString()},ln=[{id:Dn(),name:"Nguyn Vn An",phone:"0901234567",email:"annv@gmail.com",vehicleModel:"Honda SH 2023",licensePlate:"30A-12345",status:"active",segment:"VIP",loyaltyPoints:5800,totalSpent:29e6,visitCount:32,lastVisit:en(3),created_at:en(180)},{id:Dn(),name:"Trn Th Bnh",phone:"0912345678",email:"binhtt@gmail.com",vehicleModel:"Yamaha Exciter 150",licensePlate:"30B-67890",status:"active",segment:"Loyal",loyaltyPoints:2500,totalSpent:125e5,visitCount:15,lastVisit:en(7),created_at:en(150)},{id:Dn(),name:"L Minh Cng",phone:"0923456789",email:"cuonglm@gmail.com",vehicleModel:"Honda Vision 2022",licensePlate:"30C-11111",status:"active",segment:"Potential",loyaltyPoints:680,totalSpent:34e5,visitCount:5,lastVisit:en(15),created_at:en(90)},{id:Dn(),name:"Phm Thu H",phone:"0934567890",email:"hapt@gmail.com",vehicleModel:"Suzuki Raider 150",licensePlate:"30D-22222",status:"active",segment:"New",loyaltyPoints:150,totalSpent:75e4,visitCount:2,lastVisit:en(5),created_at:en(30)},{id:Dn(),name:"V Thanh Tng",phone:"0945678901",email:"tungvt@gmail.com",vehicleModel:"Honda Air Blade",licensePlate:"30E-33333",status:"active",segment:"VIP",loyaltyPoints:4200,totalSpent:21e6,visitCount:28,lastVisit:en(2),created_at:en(200)}],xn=[{id:Dn(),name:"Nht Motul 7100 10W40",sku:"MOTUL-7100",retailPrice:{CN1:18e4},wholesalePrice:{CN1:15e4},stock:{CN1:50},category:"Nht ng c",description:"Nht cao cp cho xe cn tay",created_at:en(365)},{id:Dn(),name:"Lp Michelin Pilot Street",sku:"MICH-PS",retailPrice:{CN1:45e4},wholesalePrice:{CN1:38e4},stock:{CN1:30},category:"Lp xe",description:"Lp cht lng cao",created_at:en(300)},{id:Dn(),name:"Phanh ABS Honda SH",sku:"PHANH-SH",retailPrice:{CN1:35e4},wholesalePrice:{CN1:28e4},stock:{CN1:8},category:"Ph tng phanh",description:"M phanh chnh hng",created_at:en(250)},{id:Dn(),name:"c quy GS GTZ5S",sku:"ACQUY-GS",retailPrice:{CN1:38e4},wholesalePrice:{CN1:32e4},stock:{CN1:25},category:"c quy",description:"c quy kh, bo hnh 6 thng",created_at:en(200)},{id:Dn(),name:"Nht Shell Advance AX7",sku:"SHELL-AX7",retailPrice:{CN1:12e4},wholesalePrice:{CN1:95e3},stock:{CN1:80},category:"Nht ng c",description:"Nht bn tng hp",created_at:en(180)},{id:Dn(),name:"Lc gi K&N",sku:"KN-FILTER",retailPrice:{CN1:25e4},wholesalePrice:{CN1:2e5},stock:{CN1:15},category:"Lc",description:"Lc gi cao cp, c th ra",created_at:en(150)},{id:Dn(),name:"Xch MTKRACING 428",sku:"XICH-MTK",retailPrice:{CN1:28e4},wholesalePrice:{CN1:23e4},stock:{CN1:5},category:"Xch nhng",description:"Xch cht lng cao",created_at:en(120)}],Sc=[{id:Dn(),name:"Nguyn Vn c",phone:"0987654321",email:"duc.nv@motocare.vn",position:"K thut vin chnh",department:"K thut",baseSalary:12e6,allowances:5e5,startDate:en(730),status:"active",branchId:"CN1",created_at:en(730)},{id:Dn(),name:"Trn Minh Hong",phone:"0976543210",email:"hoang.tm@motocare.vn",position:"Nhn vin bn hng",department:"Kinh doanh",baseSalary:8e6,allowances:3e5,startDate:en(365),status:"active",branchId:"CN1",created_at:en(365)},{id:Dn(),name:"L Th Mai",phone:"0965432109",email:"mai.lt@motocare.vn",position:"K ton",department:"Ti chnh",baseSalary:1e7,allowances:4e5,startDate:en(500),status:"active",branchId:"CN1",created_at:en(500)},{id:Dn(),name:"Phm Vn Sn",phone:"0954321098",email:"son.pv@motocare.vn",position:"K thut vin",department:"K thut",baseSalary:9e6,allowances:3e5,startDate:en(200),status:"active",branchId:"CN1",created_at:en(200)}],US=[...Array.from({length:5},(e,t)=>{const r=[{partId:xn[0].id,partName:xn[0].name,sku:xn[0].sku,quantity:2,sellingPrice:xn[0].retailPrice.CN1,stockSnapshot:xn[0].stock.CN1},{partId:xn[1].id,partName:xn[1].name,sku:xn[1].sku,quantity:1,sellingPrice:xn[1].retailPrice.CN1,stockSnapshot:xn[1].stock.CN1}],n=r.reduce((a,i)=>a+i.sellingPrice*i.quantity,0);return{id:Dn(),date:en(t),customer:{id:ln[t%ln.length].id,name:ln[t%ln.length].name,phone:ln[t%ln.length].phone},items:r,subtotal:n,discount:0,total:n,paymentMethod:"cash",userId:"demo-user",userName:"Demo User",branchId:"CN1"}}),...Array.from({length:10},(e,t)=>{const r=xn[(t+1)%xn.length],n=[{partId:r.id,partName:r.name,sku:r.sku,quantity:1,sellingPrice:r.retailPrice.CN1,stockSnapshot:r.stock.CN1}],a=n.reduce((i,o)=>i+o.sellingPrice*o.quantity,0);return{id:Dn(),date:en(t+6),customer:{id:ln[(t+2)%ln.length].id,name:ln[(t+2)%ln.length].name,phone:ln[(t+2)%ln.length].phone},items:n,subtotal:a,discount:0,total:a,paymentMethod:Math.random()>.5?"cash":"bank",userId:"demo-user",userName:"Demo User",branchId:"CN1"}}),...Array.from({length:15},(e,t)=>{const r=xn[t%xn.length],n=Math.floor(Math.random()*3)+1,a=[{partId:r.id,partName:r.name,sku:r.sku,quantity:n,sellingPrice:r.retailPrice.CN1,stockSnapshot:r.stock.CN1}],i=a.reduce((o,l)=>o+l.sellingPrice*l.quantity,0);return{id:Dn(),date:en(t+16),customer:{id:ln[(t+3)%ln.length].id,name:ln[(t+3)%ln.length].name,phone:ln[(t+3)%ln.length].phone},items:a,subtotal:i,discount:0,total:i,paymentMethod:Math.random()>.5?"cash":"bank",userId:"demo-user",userName:"Demo User",branchId:"CN1"}})],CO=Sc.flatMap(e=>[{id:Dn(),employeeId:e.id,employeeName:e.name,month:Jd.toISOString().slice(0,7),baseSalary:e.baseSalary,allowances:e.allowances||0,bonus:1e6,deduction:0,workDays:26,standardWorkDays:26,socialInsurance:0,healthInsurance:0,unemploymentInsurance:0,personalIncomeTax:0,netSalary:e.baseSalary+(e.allowances||0)+1e6,paymentStatus:"pending",branchId:"CN1",created_at:Jd.toISOString()},{id:Dn(),employeeId:e.id,employeeName:e.name,month:new Date(Jd.getFullYear(),Jd.getMonth()-1,1).toISOString().slice(0,7),baseSalary:e.baseSalary,allowances:e.allowances||0,bonus:8e5,deduction:0,workDays:26,standardWorkDays:26,socialInsurance:0,healthInsurance:0,unemploymentInsurance:0,personalIncomeTax:0,netSalary:e.baseSalary+(e.allowances||0)+8e5,paymentStatus:"paid",paymentDate:en(5),paymentMethod:"bank",branchId:"CN1",created_at:en(35)}]),AO=[{id:Dn(),lenderName:"Ngn hng Vietcombank",loanType:"bank",principal:1e8,interestRate:12,term:12,startDate:en(180),endDate:new Date(Jd.getFullYear()+1,Jd.getMonth(),Jd.getDate()).toISOString(),purpose:"M rng ca hng",remainingAmount:75e6,monthlyPayment:1e7,status:"active",branchId:"CN1",created_at:en(180)},{id:Dn(),lenderName:"Ngn hng Techcombank",loanType:"bank",principal:5e7,interestRate:10,term:6,startDate:en(90),endDate:new Date(Jd.getFullYear(),Jd.getMonth()+6,Jd.getDate()).toISOString(),purpose:"Nhp hng",remainingAmount:4e7,monthlyPayment:9e6,status:"active",branchId:"CN1",created_at:en(90)}],EO=[...US.slice(0,10).map(e=>({id:Dn(),type:"income",category:"sale_income",amount:e.total,date:e.date,notes:`Bn hng cho ${e.customer.name}`,paymentSourceId:e.paymentMethod==="cash"?"cash":"bank",recipient:e.customer.name,branchId:"CN1"})),{id:Dn(),type:"expense",category:"salary",amount:125e5,date:en(5),notes:`Tr lng thng trc - ${Sc[0].name}`,paymentSourceId:"bank",recipient:Sc[0].name,branchId:"CN1"},{id:Dn(),type:"expense",category:"loan_payment",amount:1e7,date:en(10),notes:"Tr n vay - Vietcombank (Gc: 8000000, Li: 2000000)",paymentSourceId:"bank",recipient:"Ngn hng Vietcombank",branchId:"CN1"},{id:Dn(),type:"expense",category:"inventory_purchase",amount:15e6,date:en(15),notes:"Nhp ph tng",paymentSourceId:"cash",branchId:"CN1"},{id:Dn(),type:"expense",category:"other_expense",amount:3e6,date:en(7),notes:"Tin in, nc, internet thng ny",paymentSourceId:"cash",branchId:"CN1"}],Mu=[{id:Dn(),name:"Cng ty TNHH Ph tng Minh Anh",phone:"0281234567",email:"minhanh@parts.vn",address:"123 Nguyn Vn Linh, Q.7, TP.HCM",created_at:en(365)},{id:Dn(),name:"Nh phn phi Honda chnh hng",phone:"0282345678",email:"honda@distributor.vn",address:"456 Xa l H Ni, Q.9, TP.HCM",created_at:en(300)},{id:Dn(),name:"Yamaha Parts Vietnam",phone:"0283456789",email:"yamaha@parts.vn",address:"789 L Vn Vit, Q.9, TP.HCM",created_at:en(250)}],TO=[{id:Dn(),customerId:ln[0].id,customerName:ln[0].name,phone:ln[0].phone,licensePlate:ln[0].licensePlate,description:"Thay nht + lc gi + bugi (n hng #DH001)",totalAmount:85e4,paidAmount:5e5,remainingAmount:35e4,createdDate:en(10),branchId:"CN1"},{id:Dn(),customerId:ln[1].id,customerName:ln[1].name,phone:ln[1].phone,licensePlate:ln[1].licensePlate,description:"Thay lp Michelin Pilot Street (n hng #DH002)",totalAmount:125e4,paidAmount:0,remainingAmount:125e4,createdDate:en(7),branchId:"CN1"},{id:Dn(),customerId:ln[2].id,customerName:ln[2].name,phone:ln[2].phone,licensePlate:ln[2].licensePlate,description:"Thay m phanh trc/sau + du phanh (n hng #DH003)",totalAmount:98e4,paidAmount:3e5,remainingAmount:68e4,createdDate:en(5),branchId:"CN1"},{id:Dn(),customerId:ln[3].id,customerName:ln[3].name,phone:ln[3].phone,licensePlate:ln[3].licensePlate,description:"Thay c quy GS 12V-7Ah (n hng #DH004)",totalAmount:55e4,paidAmount:0,remainingAmount:55e4,createdDate:en(3),branchId:"CN1"},{id:Dn(),customerId:ln[4].id,customerName:ln[4].name,phone:ln[4].phone,licensePlate:ln[4].licensePlate,description:"Bo dng nh k 5000km (n hng #DH005)",totalAmount:185e4,paidAmount:1e6,remainingAmount:85e4,createdDate:en(2),branchId:"CN1"}],OO=[{id:Dn(),supplierId:Mu[0].id,supplierName:Mu[0].name,description:"Nhp 50 chai du nht Shell 10W40 (n nhp #PN001)",totalAmount:6e6,paidAmount:3e6,remainingAmount:3e6,createdDate:en(15),branchId:"CN1"},{id:Dn(),supplierId:Mu[1].id,supplierName:Mu[1].name,description:"Nhp l ph tng chnh hng Honda (n nhp #PN002)",totalAmount:25e6,paidAmount:15e6,remainingAmount:1e7,createdDate:en(12),branchId:"CN1"},{id:Dn(),supplierId:Mu[2].id,supplierName:Mu[2].name,description:"Nhp 20 b m phanh Yamaha Exciter (n nhp #PN003)",totalAmount:45e5,paidAmount:0,remainingAmount:45e5,createdDate:en(8),branchId:"CN1"},{id:Dn(),supplierId:Mu[0].id,supplierName:Mu[0].name,description:"Nhp 30 lc lc du + lc gi (n nhp #PN004)",totalAmount:32e5,paidAmount:32e5,remainingAmount:0,createdDate:en(5),branchId:"CN1"}],PO=[{id:Dn(),creationDate:en(1),customerName:ln[0].name,customerPhone:ln[0].phone,vehicleModel:ln[0].vehicleModel,licensePlate:ln[0].licensePlate,issueDescription:"Thay nht nh k, kim tra phanh",technicianName:Sc[0].name,status:"ang sa",laborCost:15e4,partsUsed:[{partId:xn[0].id,partName:xn[0].name,sku:xn[0].sku,quantity:1,price:xn[0].retailPrice.CN1}],discount:0,total:15e4+xn[0].retailPrice.CN1,branchId:"CN1",depositAmount:2e5,depositDate:en(1),paymentStatus:"partial",totalPaid:2e5,remainingAmount:15e4+xn[0].retailPrice.CN1-2e5},{id:Dn(),creationDate:en(0),customerName:ln[1].name,customerPhone:ln[1].phone,vehicleModel:ln[1].vehicleModel,licensePlate:ln[1].licensePlate,issueDescription:"Xe kh n, kim tra h thng in",technicianName:Sc[3].name,status:"Tip nhn",laborCost:3e5,partsUsed:[],discount:0,total:3e5,branchId:"CN1",paymentStatus:"unpaid"},{id:Dn(),creationDate:en(3),customerName:ln[2].name,customerPhone:ln[2].phone,vehicleModel:ln[2].vehicleModel,licensePlate:ln[2].licensePlate,issueDescription:"Thay lp trc, cn chnh bnh xe",technicianName:Sc[0].name,status:" sa xong",laborCost:1e5,partsUsed:[{partId:xn[1].id,partName:xn[1].name,sku:xn[1].sku,quantity:1,price:xn[1].retailPrice.CN1}],discount:2e4,total:1e5+xn[1].retailPrice.CN1-2e4,branchId:"CN1",paymentStatus:"unpaid"},{id:Dn(),creationDate:en(5),customerName:ln[3].name,customerPhone:ln[3].phone,vehicleModel:ln[3].vehicleModel,licensePlate:ln[3].licensePlate,issueDescription:"Thay c quy, kim tra h thng sc",technicianName:Sc[3].name,status:"Tr my",laborCost:5e4,partsUsed:[{partId:xn[3].id,partName:xn[3].name,sku:xn[3].sku,quantity:1,price:xn[3].retailPrice.CN1}],discount:0,total:5e4+xn[3].retailPrice.CN1,branchId:"CN1",depositAmount:1e5,depositDate:en(5),paymentStatus:"paid",paymentMethod:"cash",totalPaid:5e4+xn[3].retailPrice.CN1,remainingAmount:0,paymentDate:en(5)},{id:Dn(),creationDate:en(2),customerName:ln[4].name,customerPhone:ln[4].phone,vehicleModel:ln[4].vehicleModel,licensePlate:ln[4].licensePlate,issueDescription:"Thay dy xch, nhng, kim tra phanh sau",technicianName:Sc[0].name,status:"ang sa",laborCost:2e5,partsUsed:[{partId:xn[6].id,partName:xn[6].name,sku:xn[6].sku,quantity:1,price:xn[6].retailPrice.CN1},{partId:xn[2].id,partName:xn[2].name,sku:xn[2].sku,quantity:2,price:xn[2].retailPrice.CN1}],discount:3e4,total:2e5+xn[6].retailPrice.CN1+xn[2].retailPrice.CN1*2-3e4,branchId:"CN1",depositAmount:3e5,depositDate:en(2),paymentStatus:"partial",totalPaid:3e5,remainingAmount:2e5+xn[6].retailPrice.CN1+xn[2].retailPrice.CN1*2-3e4-3e5},{id:Dn(),creationDate:en(0),customerName:"Phm Vn c",customerPhone:"0967890123",vehicleModel:"Honda Wave RSX",licensePlate:"30F-44444",issueDescription:"Bo dng nh k 5000km",technicianName:Sc[3].name,status:"Tip nhn",laborCost:1e5,partsUsed:[],discount:0,total:1e5,branchId:"CN1",paymentStatus:"unpaid"},{id:Dn(),creationDate:en(4),customerName:"L Th Hng",customerPhone:"0978901234",vehicleModel:"Yamaha Sirius",licensePlate:"30G-55555",issueDescription:"Thay lc gi, kim tra bugi",technicianName:Sc[0].name,status:" sa xong",laborCost:8e4,partsUsed:[{partId:xn[5].id,partName:xn[5].name,sku:xn[5].sku,quantity:1,price:xn[5].retailPrice.CN1}],discount:1e4,total:8e4+xn[5].retailPrice.CN1-1e4,branchId:"CN1",paymentStatus:"unpaid"},{id:Dn(),creationDate:en(7),customerName:"Nguyn Thanh Tng",customerPhone:"0989012345",vehicleModel:"Honda Future",licensePlate:"30H-66666",issueDescription:"Sa h thng phanh a, thay du phanh",technicianName:Sc[3].name,status:"Tr my",laborCost:15e4,partsUsed:[{partId:xn[2].id,partName:xn[2].name,sku:xn[2].sku,quantity:2,price:xn[2].retailPrice.CN1}],discount:0,total:15e4+xn[2].retailPrice.CN1*2,branchId:"CN1",paymentStatus:"paid",paymentMethod:"bank",totalPaid:15e4+xn[2].retailPrice.CN1*2,remainingAmount:0,paymentDate:en(7)}],Hne=()=>{const e=localStorage.getItem("motocare-data");if(e){const t=JSON.parse(e);t.customers=[...t.customers||[],...ln],t.parts=[...t.parts||[],...xn],t.sales=[...t.sales||[],...US],t.employees=[...t.employees||[],...Sc],t.payrollRecords=[...t.payrollRecords||[],...CO],t.loans=[...t.loans||[],...AO],t.cashTransactions=[...t.cashTransactions||[],...EO],t.suppliers=[...t.suppliers||[],...Mu],t.workOrders=[...t.workOrders||[],...PO],t.customerDebts=[...t.customerDebts||[],...TO],t.supplierDebts=[...t.supplierDebts||[],...OO],localStorage.setItem("motocare-data",JSON.stringify(t))}else{const t={customers:ln,parts:xn,sales:US,employees:Sc,payrollRecords:CO,loans:AO,cashTransactions:EO,suppliers:Mu,workOrders:PO,customerDebts:TO,supplierDebts:OO,cartItems:[],loanPayments:[],inventoryTransactions:[],paymentSources:[{id:"cash",name:"Tin mt",balance:{CN1:5e7}},{id:"bank",name:"Ngn hng",balance:{CN1:15e7}}]};localStorage.setItem("motocare-data",JSON.stringify(t))}return console.log("Demo data loaded successfully."),!0},$ne=()=>{localStorage.removeItem("motocare-data"),console.log("Demo data cleared.")};var Vne=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function V6(e){if(typeof e!="string")return!1;var t=Vne;return t.includes(e)}var Wne=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function VU(e){if(typeof e!="string")return!1;var t=Wne;return t.includes(e)}function WU(e){return typeof e=="string"&&e.startsWith("data-")}function Il(e){var t=Object.entries(e).filter(r=>{var[n]=r;return VU(n)||WU(n)});return Object.fromEntries(t)}function Um(e){if(e==null)return null;if(T.isValidElement(e)&&typeof e.props=="object"&&e.props!==null){var t=e.props;return Il(t)}return typeof e=="object"&&!Array.isArray(e)?Il(e):null}function Dl(e){var t=Object.entries(e).filter(r=>{var[n]=r;return VU(n)||WU(n)||V6(n)});return Object.fromEntries(t)}function GU(e){return e==null?null:T.isValidElement(e)?Dl(e.props):typeof e=="object"&&!Array.isArray(e)?Dl(e):null}var Gne=["children","width","height","viewBox","className","style","title","desc"];function zS(){return zS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},zS.apply(null,arguments)}function Kne(e,t){if(e==null)return{};var r,n,a=Xne(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Xne(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var W6=T.forwardRef((e,t)=>{var{children:r,width:n,height:a,viewBox:i,className:o,style:l,title:d,desc:c}=e,u=Kne(e,Gne),x=i||{width:n,height:a,x:0,y:0},b=Zn("recharts-surface",o);return T.createElement("svg",zS({},Dl(u),{className:b,width:n,height:a,style:l,viewBox:"".concat(x.x," ").concat(x.y," ").concat(x.width," ").concat(x.height),ref:t}),T.createElement("title",null,d),T.createElement("desc",null,c),r)}),Yne=["children","className"];function qS(){return qS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},qS.apply(null,arguments)}function Qne(e,t){if(e==null)return{};var r,n,a=Zne(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Zne(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var pi=T.forwardRef((e,t)=>{var{children:r,className:n}=e,a=Qne(e,Yne),i=Zn("recharts-layer",n);return T.createElement("g",qS({className:i},Dl(a),{ref:t}),r)}),KU=T.createContext(null),Jne=()=>T.useContext(KU);function ks(e){return function(){return e}}const XU=Math.cos,_w=Math.sin,uu=Math.sqrt,Sw=Math.PI,Wk=2*Sw,HS=Math.PI,$S=2*HS,Zf=1e-6,eae=$S-Zf;function YU(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function tae(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return YU;const r=10**t;return function(n){this._+=n[0];for(let a=1,i=n.length;a<i;++a)this._+=Math.round(arguments[a]*r)/r+n[a]}}class rae{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?YU:tae(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,a){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+a}`}bezierCurveTo(t,r,n,a,i,o){this._append`C${+t},${+r},${+n},${+a},${this._x1=+i},${this._y1=+o}`}arcTo(t,r,n,a,i){if(t=+t,r=+r,n=+n,a=+a,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,l=this._y1,d=n-t,c=a-r,u=o-t,x=l-r,b=u*u+x*x;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(b>Zf)if(!(Math.abs(x*d-c*u)>Zf)||!i)this._append`L${this._x1=t},${this._y1=r}`;else{let g=n-o,k=a-l,y=d*d+c*c,N=g*g+k*k,S=Math.sqrt(y),O=Math.sqrt(b),A=i*Math.tan((HS-Math.acos((y+b-N)/(2*S*O)))/2),P=A/O,q=A/S;Math.abs(P-1)>Zf&&this._append`L${t+P*u},${r+P*x}`,this._append`A${i},${i},0,0,${+(x*g>u*k)},${this._x1=t+q*d},${this._y1=r+q*c}`}}arc(t,r,n,a,i,o){if(t=+t,r=+r,n=+n,o=!!o,n<0)throw new Error(`negative radius: ${n}`);let l=n*Math.cos(a),d=n*Math.sin(a),c=t+l,u=r+d,x=1^o,b=o?a-i:i-a;this._x1===null?this._append`M${c},${u}`:(Math.abs(this._x1-c)>Zf||Math.abs(this._y1-u)>Zf)&&this._append`L${c},${u}`,n&&(b<0&&(b=b%$S+$S),b>eae?this._append`A${n},${n},0,1,${x},${t-l},${r-d}A${n},${n},0,1,${x},${this._x1=c},${this._y1=u}`:b>Zf&&this._append`A${n},${n},0,${+(b>=HS)},${x},${this._x1=t+n*Math.cos(i)},${this._y1=r+n*Math.sin(i)}`)}rect(t,r,n,a){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+a}h${-n}Z`}toString(){return this._}}function G6(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new rae(t)}function K6(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function QU(e){this._context=e}QU.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Gk(e){return new QU(e)}function ZU(e){return e[0]}function JU(e){return e[1]}function ez(e,t){var r=ks(!0),n=null,a=Gk,i=null,o=G6(l);e=typeof e=="function"?e:e===void 0?ZU:ks(e),t=typeof t=="function"?t:t===void 0?JU:ks(t);function l(d){var c,u=(d=K6(d)).length,x,b=!1,g;for(n==null&&(i=a(g=o())),c=0;c<=u;++c)!(c<u&&r(x=d[c],c,d))===b&&((b=!b)?i.lineStart():i.lineEnd()),b&&i.point(+e(x,c,d),+t(x,c,d));if(g)return i=null,g+""||null}return l.x=function(d){return arguments.length?(e=typeof d=="function"?d:ks(+d),l):e},l.y=function(d){return arguments.length?(t=typeof d=="function"?d:ks(+d),l):t},l.defined=function(d){return arguments.length?(r=typeof d=="function"?d:ks(!!d),l):r},l.curve=function(d){return arguments.length?(a=d,n!=null&&(i=a(n)),l):a},l.context=function(d){return arguments.length?(d==null?n=i=null:i=a(n=d),l):n},l}function L2(e,t,r){var n=null,a=ks(!0),i=null,o=Gk,l=null,d=G6(c);e=typeof e=="function"?e:e===void 0?ZU:ks(+e),t=typeof t=="function"?t:ks(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?JU:ks(+r);function c(x){var b,g,k,y=(x=K6(x)).length,N,S=!1,O,A=new Array(y),P=new Array(y);for(i==null&&(l=o(O=d())),b=0;b<=y;++b){if(!(b<y&&a(N=x[b],b,x))===S)if(S=!S)g=b,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),k=b-1;k>=g;--k)l.point(A[k],P[k]);l.lineEnd(),l.areaEnd()}S&&(A[b]=+e(N,b,x),P[b]=+t(N,b,x),l.point(n?+n(N,b,x):A[b],r?+r(N,b,x):P[b]))}if(O)return l=null,O+""||null}function u(){return ez().defined(a).curve(o).context(i)}return c.x=function(x){return arguments.length?(e=typeof x=="function"?x:ks(+x),n=null,c):e},c.x0=function(x){return arguments.length?(e=typeof x=="function"?x:ks(+x),c):e},c.x1=function(x){return arguments.length?(n=x==null?null:typeof x=="function"?x:ks(+x),c):n},c.y=function(x){return arguments.length?(t=typeof x=="function"?x:ks(+x),r=null,c):t},c.y0=function(x){return arguments.length?(t=typeof x=="function"?x:ks(+x),c):t},c.y1=function(x){return arguments.length?(r=x==null?null:typeof x=="function"?x:ks(+x),c):r},c.lineX0=c.lineY0=function(){return u().x(e).y(t)},c.lineY1=function(){return u().x(e).y(r)},c.lineX1=function(){return u().x(n).y(t)},c.defined=function(x){return arguments.length?(a=typeof x=="function"?x:ks(!!x),c):a},c.curve=function(x){return arguments.length?(o=x,i!=null&&(l=o(i)),c):o},c.context=function(x){return arguments.length?(x==null?i=l=null:l=o(i=x),c):i},c}class tz{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function nae(e){return new tz(e,!0)}function aae(e){return new tz(e,!1)}const X6={draw(e,t){const r=uu(t/Sw);e.moveTo(r,0),e.arc(0,0,r,0,Wk)}},sae={draw(e,t){const r=uu(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},rz=uu(1/3),iae=rz*2,oae={draw(e,t){const r=uu(t/iae),n=r*rz;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},lae={draw(e,t){const r=uu(t),n=-r/2;e.rect(n,n,r,r)}},cae=.8908130915292852,nz=_w(Sw/10)/_w(7*Sw/10),dae=_w(Wk/10)*nz,uae=-XU(Wk/10)*nz,hae={draw(e,t){const r=uu(t*cae),n=dae*r,a=uae*r;e.moveTo(0,-r),e.lineTo(n,a);for(let i=1;i<5;++i){const o=Wk*i/5,l=XU(o),d=_w(o);e.lineTo(d*r,-l*r),e.lineTo(l*n-d*a,d*n+l*a)}e.closePath()}},P3=uu(3),fae={draw(e,t){const r=-uu(t/(P3*3));e.moveTo(0,r*2),e.lineTo(-P3*r,-r),e.lineTo(P3*r,-r),e.closePath()}},ad=-.5,sd=uu(3)/2,VS=1/uu(12),mae=(VS/2+1)*3,xae={draw(e,t){const r=uu(t/mae),n=r/2,a=r*VS,i=n,o=r*VS+r,l=-i,d=o;e.moveTo(n,a),e.lineTo(i,o),e.lineTo(l,d),e.lineTo(ad*n-sd*a,sd*n+ad*a),e.lineTo(ad*i-sd*o,sd*i+ad*o),e.lineTo(ad*l-sd*d,sd*l+ad*d),e.lineTo(ad*n+sd*a,ad*a-sd*n),e.lineTo(ad*i+sd*o,ad*o-sd*i),e.lineTo(ad*l+sd*d,ad*d-sd*l),e.closePath()}};function pae(e,t){let r=null,n=G6(a);e=typeof e=="function"?e:ks(e||X6),t=typeof t=="function"?t:ks(t===void 0?64:+t);function a(){let i;if(r||(r=i=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),i)return r=null,i+""||null}return a.type=function(i){return arguments.length?(e=typeof i=="function"?i:ks(i),a):e},a.size=function(i){return arguments.length?(t=typeof i=="function"?i:ks(+i),a):t},a.context=function(i){return arguments.length?(r=i??null,a):r},a}function jw(){}function Cw(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function az(e){this._context=e}az.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Cw(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Cw(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function gae(e){return new az(e)}function sz(e){this._context=e}sz.prototype={areaStart:jw,areaEnd:jw,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Cw(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function bae(e){return new sz(e)}function iz(e){this._context=e}iz.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:Cw(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function vae(e){return new iz(e)}function oz(e){this._context=e}oz.prototype={areaStart:jw,areaEnd:jw,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function yae(e){return new oz(e)}function IO(e){return e<0?-1:1}function DO(e,t,r){var n=e._x1-e._x0,a=t-e._x1,i=(e._y1-e._y0)/(n||a<0&&-0),o=(r-e._y1)/(a||n<0&&-0),l=(i*a+o*n)/(n+a);return(IO(i)+IO(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(l))||0}function MO(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function I3(e,t,r){var n=e._x0,a=e._y0,i=e._x1,o=e._y1,l=(i-n)/3;e._context.bezierCurveTo(n+l,a+l*t,i-l,o-l*r,i,o)}function Aw(e){this._context=e}Aw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:I3(this,this._t0,MO(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,I3(this,MO(this,r=DO(this,e,t)),r);break;default:I3(this,this._t0,r=DO(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function lz(e){this._context=new cz(e)}(lz.prototype=Object.create(Aw.prototype)).point=function(e,t){Aw.prototype.point.call(this,t,e)};function cz(e){this._context=e}cz.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,a,i){this._context.bezierCurveTo(t,e,n,r,i,a)}};function wae(e){return new Aw(e)}function kae(e){return new lz(e)}function dz(e){this._context=e}dz.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=LO(e),a=LO(t),i=0,o=1;o<r;++i,++o)this._context.bezierCurveTo(n[0][i],a[0][i],n[1][i],a[1][i],e[o],t[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function LO(e){var t,r=e.length-1,n,a=new Array(r),i=new Array(r),o=new Array(r);for(a[0]=0,i[0]=2,o[0]=e[0]+2*e[1],t=1;t<r-1;++t)a[t]=1,i[t]=4,o[t]=4*e[t]+2*e[t+1];for(a[r-1]=2,i[r-1]=7,o[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=a[t]/i[t-1],i[t]-=n,o[t]-=n*o[t-1];for(a[r-1]=o[r-1]/i[r-1],t=r-2;t>=0;--t)a[t]=(o[t]-a[t+1])/i[t];for(i[r-1]=(e[r]+a[r-1])/2,t=0;t<r-1;++t)i[t]=2*e[t+1]-a[t+1];return[a,i]}function Nae(e){return new dz(e)}function Kk(e,t){this._context=e,this._t=t}Kk.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function _ae(e){return new Kk(e,.5)}function Sae(e){return new Kk(e,0)}function jae(e){return new Kk(e,1)}function J1(e,t){if((o=e.length)>1)for(var r=1,n,a,i=e[t[0]],o,l=i.length;r<o;++r)for(a=i,i=e[t[r]],n=0;n<l;++n)i[n][1]+=i[n][0]=isNaN(a[n][1])?a[n][0]:a[n][1]}function WS(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function Cae(e,t){return e[t]}function Aae(e){const t=[];return t.key=e,t}function Eae(){var e=ks([]),t=WS,r=J1,n=Cae;function a(i){var o=Array.from(e.apply(this,arguments),Aae),l,d=o.length,c=-1,u;for(const x of i)for(l=0,++c;l<d;++l)(o[l][c]=[0,+n(x,o[l].key,c,i)]).data=x;for(l=0,u=K6(t(o));l<d;++l)o[u[l]].index=l;return r(o,u),o}return a.keys=function(i){return arguments.length?(e=typeof i=="function"?i:ks(Array.from(i)),a):e},a.value=function(i){return arguments.length?(n=typeof i=="function"?i:ks(+i),a):n},a.order=function(i){return arguments.length?(t=i==null?WS:typeof i=="function"?i:ks(Array.from(i)),a):t},a.offset=function(i){return arguments.length?(r=i??J1,a):r},a}function Tae(e,t){if((n=e.length)>0){for(var r,n,a=0,i=e[0].length,o;a<i;++a){for(o=r=0;r<n;++r)o+=e[r][a][1]||0;if(o)for(r=0;r<n;++r)e[r][a][1]/=o}J1(e,t)}}function Oae(e,t){if((a=e.length)>0){for(var r=0,n=e[t[0]],a,i=n.length;r<i;++r){for(var o=0,l=0;o<a;++o)l+=e[o][r][1]||0;n[r][1]+=n[r][0]=-l/2}J1(e,t)}}function Pae(e,t){if(!(!((o=e.length)>0)||!((i=(a=e[t[0]]).length)>0))){for(var r=0,n=1,a,i,o;n<i;++n){for(var l=0,d=0,c=0;l<o;++l){for(var u=e[t[l]],x=u[n][1]||0,b=u[n-1][1]||0,g=(x-b)/2,k=0;k<l;++k){var y=e[t[k]],N=y[n][1]||0,S=y[n-1][1]||0;g+=N-S}d+=x,c+=g*x}a[n-1][1]+=a[n-1][0]=r,d&&(r-=c/d)}a[n-1][1]+=a[n-1][0]=r,J1(e,t)}}var D3={},M3={},RO;function Iae(){return RO||(RO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==="__proto__"}e.isUnsafeProperty=t})(M3)),M3}var L3={},FO;function uz(){return FO||(FO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}e.isDeepKey=t})(L3)),L3}var R3={},BO;function Y6(){return BO||(BO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var n;return typeof r=="string"||typeof r=="symbol"?r:Object.is((n=r==null?void 0:r.valueOf)==null?void 0:n.call(r),-0)?"-0":String(r)}e.toKey=t})(R3)),R3}var F3={},B3={},UO;function Dae(){return UO||(UO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){if(r==null)return"";if(typeof r=="string")return r;if(Array.isArray(r))return r.map(t).join(",");const n=String(r);return n==="0"&&Object.is(Number(r),-0)?"-0":n}e.toString=t})(B3)),B3}var zO;function Q6(){return zO||(zO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Dae(),r=Y6();function n(a){if(Array.isArray(a))return a.map(r.toKey);if(typeof a=="symbol")return[a];a=t.toString(a);const i=[],o=a.length;if(o===0)return i;let l=0,d="",c="",u=!1;for(a.charCodeAt(0)===46&&(i.push(""),l++);l<o;){const x=a[l];c?x==="\\"&&l+1<o?(l++,d+=a[l]):x===c?c="":d+=x:u?x==='"'||x==="'"?c=x:x==="]"?(u=!1,i.push(d),d=""):d+=x:x==="["?(u=!0,d&&(i.push(d),d="")):x==="."?d&&(i.push(d),d=""):d+=x,l++}return d&&i.push(d),i}e.toPath=n})(F3)),F3}var qO;function Z6(){return qO||(qO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Iae(),r=uz(),n=Y6(),a=Q6();function i(l,d,c){if(l==null)return c;switch(typeof d){case"string":{if(t.isUnsafeProperty(d))return c;const u=l[d];return u===void 0?r.isDeepKey(d)?i(l,a.toPath(d),c):c:u}case"number":case"symbol":{typeof d=="number"&&(d=n.toKey(d));const u=l[d];return u===void 0?c:u}default:{if(Array.isArray(d))return o(l,d,c);if(Object.is(d==null?void 0:d.valueOf(),-0)?d="-0":d=String(d),t.isUnsafeProperty(d))return c;const u=l[d];return u===void 0?c:u}}}function o(l,d,c){if(d.length===0)return c;let u=l;for(let x=0;x<d.length;x++){if(u==null||t.isUnsafeProperty(d[x]))return c;u=u[d[x]]}return u===void 0?c:u}e.get=i})(D3)),D3}var U3,HO;function Mae(){return HO||(HO=1,U3=Z6().get),U3}var Lae=Mae();const zm=zc(Lae);var Co=e=>e===0?0:e>0?1:-1,Fc=e=>typeof e=="number"&&e!=+e,th=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,Qr=e=>(typeof e=="number"||e instanceof Number)&&!Fc(e),Gu=e=>Qr(e)||typeof e=="string",Rae=0,mb=e=>{var t=++Rae;return"".concat(e||"").concat(t)},dl=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Qr(t)&&typeof t!="string")return n;var i;if(th(t)){if(r==null)return n;var o=t.indexOf("%");i=r*parseFloat(t.slice(0,o))/100}else i=+t;return Fc(i)&&(i=n),a&&r!=null&&i>r&&(i=r),i},hz=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,r={},n=0;n<t;n++)if(!r[e[n]])r[e[n]]=!0;else return!0;return!1};function is(e,t,r){return Qr(e)&&Qr(t)?e+r*(t-e):t}function fz(e,t,r){if(!(!e||!e.length))return e.find(n=>n&&(typeof t=="function"?t(n):zm(n,t))===r)}var Is=e=>e===null||typeof e>"u",ev=e=>Is(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1)),Fae=["type","size","sizeType"];function GS(){return GS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},GS.apply(null,arguments)}function $O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function VO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$O(Object(r),!0).forEach(function(n){Bae(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$O(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Bae(e,t,r){return(t=Uae(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Uae(e){var t=zae(e,"string");return typeof t=="symbol"?t:t+""}function zae(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function qae(e,t){if(e==null)return{};var r,n,a=Hae(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Hae(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var mz={symbolCircle:X6,symbolCross:sae,symbolDiamond:oae,symbolSquare:lae,symbolStar:hae,symbolTriangle:fae,symbolWye:xae},$ae=Math.PI/180,Vae=e=>{var t="symbol".concat(ev(e));return mz[t]||X6},Wae=(e,t,r)=>{if(t==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var n=18*$ae;return 1.25*e*e*(Math.tan(n)-Math.tan(n*2)*Math.tan(n)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},Gae=(e,t)=>{mz["symbol".concat(ev(e))]=t},J6=e=>{var{type:t="circle",size:r=64,sizeType:n="area"}=e,a=qae(e,Fae),i=VO(VO({},a),{},{type:t,size:r,sizeType:n}),o="circle";typeof t=="string"&&(o=t);var l=()=>{var b=Vae(o),g=pae().type(b).size(Wae(r,n,o)),k=g();if(k!==null)return k},{className:d,cx:c,cy:u}=i,x=Dl(i);return c===+c&&u===+u&&r===+r?T.createElement("path",GS({},x,{className:Zn("recharts-symbols",d),transform:"translate(".concat(c,", ").concat(u,")"),d:l()})):null};J6.registerSymbol=Gae;var eC=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(T.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var n={};return Object.keys(r).forEach(a=>{V6(a)&&(n[a]=(i=>r[a](r,i)))}),n},Kae=(e,t,r)=>n=>(e(t,r,n),null),tv=(e,t,r)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var n=null;return Object.keys(e).forEach(a=>{var i=e[a];V6(a)&&typeof i=="function"&&(n||(n={}),n[a]=Kae(i,t,r))}),n};function KS(){return KS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},KS.apply(null,arguments)}function WO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Xae(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?WO(Object(r),!0).forEach(function(n){tC(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):WO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function tC(e,t,r){return(t=Yae(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Yae(e){var t=Qae(e,"string");return typeof t=="symbol"?t:t+""}function Qae(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var id=32;class rC extends T.PureComponent{renderIcon(t,r){var{inactiveColor:n}=this.props,a=id/2,i=id/6,o=id/3,l=t.inactive?n:t.color,d=r??t.type;if(d==="none")return null;if(d==="plainline")return T.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:t.payload.strokeDasharray,x1:0,y1:a,x2:id,y2:a,className:"recharts-legend-icon"});if(d==="line")return T.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(a,"h").concat(o,`
            A`).concat(i,",").concat(i,",0,1,1,").concat(2*o,",").concat(a,`
            H`).concat(id,"M").concat(2*o,",").concat(a,`
            A`).concat(i,",").concat(i,",0,1,1,").concat(o,",").concat(a),className:"recharts-legend-icon"});if(d==="rect")return T.createElement("path",{stroke:"none",fill:l,d:"M0,".concat(id/8,"h").concat(id,"v").concat(id*3/4,"h").concat(-id,"z"),className:"recharts-legend-icon"});if(T.isValidElement(t.legendIcon)){var c=Xae({},t);return delete c.legendIcon,T.cloneElement(t.legendIcon,c)}return T.createElement(J6,{fill:l,cx:a,cy:a,size:id,sizeType:"diameter",type:d})}renderItems(){var{payload:t,iconSize:r,layout:n,formatter:a,inactiveColor:i,iconType:o}=this.props,l={x:0,y:0,width:id,height:id},d={display:n==="horizontal"?"inline-block":"block",marginRight:10},c={display:"inline-block",verticalAlign:"middle",marginRight:4};return t.map((u,x)=>{var b=u.formatter||a,g=Zn({"recharts-legend-item":!0,["legend-item-".concat(x)]:!0,inactive:u.inactive});if(u.type==="none")return null;var k=u.inactive?i:u.color,y=b?b(u.value,u,x):u.value;return T.createElement("li",KS({className:g,style:d,key:"legend-item-".concat(x)},tv(this.props,u,x)),T.createElement(W6,{width:r,height:r,viewBox:l,style:c,"aria-label":"".concat(y," legend icon")},this.renderIcon(u,o)),T.createElement("span",{className:"recharts-legend-item-text",style:{color:k}},y))})}render(){var{payload:t,layout:r,align:n}=this.props;if(!t||!t.length)return null;var a={padding:0,margin:0,textAlign:r==="horizontal"?n:"left"};return T.createElement("ul",{className:"recharts-default-legend",style:a},this.renderItems())}}tC(rC,"displayName","Legend");tC(rC,"defaultProps",{align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"});var z3={},q3={},GO;function Zae(){return GO||(GO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){const a=new Map;for(let i=0;i<r.length;i++){const o=r[i],l=n(o);a.has(l)||a.set(l,o)}return Array.from(a.values())}e.uniqBy=t})(q3)),q3}var H3={},KO;function xz(){return KO||(KO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r}e.identity=t})(H3)),H3}var $3={},V3={},W3={},XO;function Jae(){return XO||(XO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Number.isSafeInteger(r)&&r>=0}e.isLength=t})(W3)),W3}var YO;function nC(){return YO||(YO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Jae();function r(n){return n!=null&&typeof n!="function"&&t.isLength(n.length)}e.isArrayLike=r})(V3)),V3}var G3={},QO;function ese(){return QO||(QO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="object"&&r!==null}e.isObjectLike=t})(G3)),G3}var ZO;function tse(){return ZO||(ZO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=nC(),r=ese();function n(a){return r.isObjectLike(a)&&t.isArrayLike(a)}e.isArrayLikeObject=n})($3)),$3}var K3={},X3={},JO;function rse(){return JO||(JO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Z6();function r(n){return function(a){return t.get(a,n)}}e.property=r})(X3)),X3}var Y3={},Q3={},Z3={},J3={},e9;function pz(){return e9||(e9=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r!==null&&(typeof r=="object"||typeof r=="function")}e.isObject=t})(J3)),J3}var eN={},t9;function gz(){return t9||(t9=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null||typeof r!="object"&&typeof r!="function"}e.isPrimitive=t})(eN)),eN}var tN={},r9;function bz(){return r9||(r9=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){return r===n||Number.isNaN(r)&&Number.isNaN(n)}e.eq=t})(tN)),tN}var n9;function nse(){return n9||(n9=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=pz(),r=gz(),n=bz();function a(u,x,b){return typeof b!="function"?a(u,x,()=>{}):i(u,x,function g(k,y,N,S,O,A){const P=b(k,y,N,S,O,A);return P!==void 0?!!P:i(k,y,g,A)},new Map)}function i(u,x,b,g){if(x===u)return!0;switch(typeof x){case"object":return o(u,x,b,g);case"function":return Object.keys(x).length>0?i(u,{...x},b,g):n.eq(u,x);default:return t.isObject(u)?typeof x=="string"?x==="":!0:n.eq(u,x)}}function o(u,x,b,g){if(x==null)return!0;if(Array.isArray(x))return d(u,x,b,g);if(x instanceof Map)return l(u,x,b,g);if(x instanceof Set)return c(u,x,b,g);const k=Object.keys(x);if(u==null)return k.length===0;if(k.length===0)return!0;if(g!=null&&g.has(x))return g.get(x)===u;g==null||g.set(x,u);try{for(let y=0;y<k.length;y++){const N=k[y];if(!r.isPrimitive(u)&&!(N in u)||x[N]===void 0&&u[N]!==void 0||x[N]===null&&u[N]!==null||!b(u[N],x[N],N,u,x,g))return!1}return!0}finally{g==null||g.delete(x)}}function l(u,x,b,g){if(x.size===0)return!0;if(!(u instanceof Map))return!1;for(const[k,y]of x.entries()){const N=u.get(k);if(b(N,y,k,u,x,g)===!1)return!1}return!0}function d(u,x,b,g){if(x.length===0)return!0;if(!Array.isArray(u))return!1;const k=new Set;for(let y=0;y<x.length;y++){const N=x[y];let S=!1;for(let O=0;O<u.length;O++){if(k.has(O))continue;const A=u[O];let P=!1;if(b(A,N,y,u,x,g)&&(P=!0),P){k.add(O),S=!0;break}}if(!S)return!1}return!0}function c(u,x,b,g){return x.size===0?!0:u instanceof Set?d([...u],[...x],b,g):!1}e.isMatchWith=a,e.isSetMatch=c})(Z3)),Z3}var a9;function vz(){return a9||(a9=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=nse();function r(n,a){return t.isMatchWith(n,a,()=>{})}e.isMatch=r})(Q3)),Q3}var rN={},nN={},aN={},s9;function ase(){return s9||(s9=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Object.getOwnPropertySymbols(r).filter(n=>Object.prototype.propertyIsEnumerable.call(r,n))}e.getSymbols=t})(aN)),aN}var sN={},i9;function yz(){return i9||(i9=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}e.getTag=t})(sN)),sN}var iN={},o9;function wz(){return o9||(o9=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",r="[object String]",n="[object Number]",a="[object Boolean]",i="[object Arguments]",o="[object Symbol]",l="[object Date]",d="[object Map]",c="[object Set]",u="[object Array]",x="[object Function]",b="[object ArrayBuffer]",g="[object Object]",k="[object Error]",y="[object DataView]",N="[object Uint8Array]",S="[object Uint8ClampedArray]",O="[object Uint16Array]",A="[object Uint32Array]",P="[object BigUint64Array]",q="[object Int8Array]",W="[object Int16Array]",R="[object Int32Array]",U="[object BigInt64Array]",L="[object Float32Array]",Q="[object Float64Array]";e.argumentsTag=i,e.arrayBufferTag=b,e.arrayTag=u,e.bigInt64ArrayTag=U,e.bigUint64ArrayTag=P,e.booleanTag=a,e.dataViewTag=y,e.dateTag=l,e.errorTag=k,e.float32ArrayTag=L,e.float64ArrayTag=Q,e.functionTag=x,e.int16ArrayTag=W,e.int32ArrayTag=R,e.int8ArrayTag=q,e.mapTag=d,e.numberTag=n,e.objectTag=g,e.regexpTag=t,e.setTag=c,e.stringTag=r,e.symbolTag=o,e.uint16ArrayTag=O,e.uint32ArrayTag=A,e.uint8ArrayTag=N,e.uint8ClampedArrayTag=S})(iN)),iN}var oN={},l9;function sse(){return l9||(l9=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}e.isTypedArray=t})(oN)),oN}var c9;function kz(){return c9||(c9=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ase(),r=yz(),n=wz(),a=gz(),i=sse();function o(u,x){return l(u,void 0,u,new Map,x)}function l(u,x,b,g=new Map,k=void 0){const y=k==null?void 0:k(u,x,b,g);if(y!==void 0)return y;if(a.isPrimitive(u))return u;if(g.has(u))return g.get(u);if(Array.isArray(u)){const N=new Array(u.length);g.set(u,N);for(let S=0;S<u.length;S++)N[S]=l(u[S],S,b,g,k);return Object.hasOwn(u,"index")&&(N.index=u.index),Object.hasOwn(u,"input")&&(N.input=u.input),N}if(u instanceof Date)return new Date(u.getTime());if(u instanceof RegExp){const N=new RegExp(u.source,u.flags);return N.lastIndex=u.lastIndex,N}if(u instanceof Map){const N=new Map;g.set(u,N);for(const[S,O]of u)N.set(S,l(O,S,b,g,k));return N}if(u instanceof Set){const N=new Set;g.set(u,N);for(const S of u)N.add(l(S,void 0,b,g,k));return N}if(typeof Buffer<"u"&&Buffer.isBuffer(u))return u.subarray();if(i.isTypedArray(u)){const N=new(Object.getPrototypeOf(u)).constructor(u.length);g.set(u,N);for(let S=0;S<u.length;S++)N[S]=l(u[S],S,b,g,k);return N}if(u instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&u instanceof SharedArrayBuffer)return u.slice(0);if(u instanceof DataView){const N=new DataView(u.buffer.slice(0),u.byteOffset,u.byteLength);return g.set(u,N),d(N,u,b,g,k),N}if(typeof File<"u"&&u instanceof File){const N=new File([u],u.name,{type:u.type});return g.set(u,N),d(N,u,b,g,k),N}if(typeof Blob<"u"&&u instanceof Blob){const N=new Blob([u],{type:u.type});return g.set(u,N),d(N,u,b,g,k),N}if(u instanceof Error){const N=new u.constructor;return g.set(u,N),N.message=u.message,N.name=u.name,N.stack=u.stack,N.cause=u.cause,d(N,u,b,g,k),N}if(u instanceof Boolean){const N=new Boolean(u.valueOf());return g.set(u,N),d(N,u,b,g,k),N}if(u instanceof Number){const N=new Number(u.valueOf());return g.set(u,N),d(N,u,b,g,k),N}if(u instanceof String){const N=new String(u.valueOf());return g.set(u,N),d(N,u,b,g,k),N}if(typeof u=="object"&&c(u)){const N=Object.create(Object.getPrototypeOf(u));return g.set(u,N),d(N,u,b,g,k),N}return u}function d(u,x,b=u,g,k){const y=[...Object.keys(x),...t.getSymbols(x)];for(let N=0;N<y.length;N++){const S=y[N],O=Object.getOwnPropertyDescriptor(u,S);(O==null||O.writable)&&(u[S]=l(x[S],S,b,g,k))}}function c(u){switch(r.getTag(u)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=o,e.cloneDeepWithImpl=l,e.copyProperties=d})(nN)),nN}var d9;function ise(){return d9||(d9=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=kz();function r(n){return t.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}e.cloneDeep=r})(rN)),rN}var u9;function ose(){return u9||(u9=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=vz(),r=ise();function n(a){return a=r.cloneDeep(a),i=>t.isMatch(i,a)}e.matches=n})(Y3)),Y3}var lN={},cN={},dN={},h9;function lse(){return h9||(h9=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=kz(),r=wz();function n(a,i){return t.cloneDeepWith(a,(o,l,d,c)=>{const u=i==null?void 0:i(o,l,d,c);if(u!==void 0)return u;if(typeof a=="object")switch(Object.prototype.toString.call(a)){case r.numberTag:case r.stringTag:case r.booleanTag:{const x=new a.constructor(a==null?void 0:a.valueOf());return t.copyProperties(x,a),x}case r.argumentsTag:{const x={};return t.copyProperties(x,a),x.length=a.length,x[Symbol.iterator]=a[Symbol.iterator],x}default:return}})}e.cloneDeepWith=n})(dN)),dN}var f9;function cse(){return f9||(f9=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=lse();function r(n){return t.cloneDeepWith(n)}e.cloneDeep=r})(cN)),cN}var uN={},hN={},m9;function Nz(){return m9||(m9=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function r(n,a=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<a;case"symbol":return!1;case"string":return t.test(n)}}e.isIndex=r})(hN)),hN}var fN={},x9;function dse(){return x9||(x9=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=yz();function r(n){return n!==null&&typeof n=="object"&&t.getTag(n)==="[object Arguments]"}e.isArguments=r})(fN)),fN}var p9;function use(){return p9||(p9=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=uz(),r=Nz(),n=dse(),a=Q6();function i(o,l){let d;if(Array.isArray(l)?d=l:typeof l=="string"&&t.isDeepKey(l)&&(o==null?void 0:o[l])==null?d=a.toPath(l):d=[l],d.length===0)return!1;let c=o;for(let u=0;u<d.length;u++){const x=d[u];if((c==null||!Object.hasOwn(c,x))&&!((Array.isArray(c)||n.isArguments(c))&&r.isIndex(x)&&x<c.length))return!1;c=c[x]}return!0}e.has=i})(uN)),uN}var g9;function hse(){return g9||(g9=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=vz(),r=Y6(),n=cse(),a=Z6(),i=use();function o(l,d){switch(typeof l){case"object":{Object.is(l==null?void 0:l.valueOf(),-0)&&(l="-0");break}case"number":{l=r.toKey(l);break}}return d=n.cloneDeep(d),function(c){const u=a.get(c,l);return u===void 0?i.has(c,l):d===void 0?u===void 0:t.isMatch(u,d)}}e.matchesProperty=o})(lN)),lN}var b9;function fse(){return b9||(b9=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=xz(),r=rse(),n=ose(),a=hse();function i(o){if(o==null)return t.identity;switch(typeof o){case"function":return o;case"object":return Array.isArray(o)&&o.length===2?a.matchesProperty(o[0],o[1]):n.matches(o);case"string":case"symbol":case"number":return r.property(o)}}e.iteratee=i})(K3)),K3}var v9;function mse(){return v9||(v9=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Zae(),r=xz(),n=tse(),a=fse();function i(o,l=r.identity){return n.isArrayLikeObject(o)?t.uniqBy(Array.from(o),a.iteratee(l)):[]}e.uniqBy=i})(z3)),z3}var mN,y9;function xse(){return y9||(y9=1,mN=mse().uniqBy),mN}var pse=xse();const w9=zc(pse);function _z(e,t,r){return t===!0?w9(e,r):typeof t=="function"?w9(e,t):e}var xN={exports:{}},pN={},gN={exports:{}},bN={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var k9;function gse(){if(k9)return bN;k9=1;var e=cp();function t(x,b){return x===b&&(x!==0||1/x===1/b)||x!==x&&b!==b}var r=typeof Object.is=="function"?Object.is:t,n=e.useState,a=e.useEffect,i=e.useLayoutEffect,o=e.useDebugValue;function l(x,b){var g=b(),k=n({inst:{value:g,getSnapshot:b}}),y=k[0].inst,N=k[1];return i(function(){y.value=g,y.getSnapshot=b,d(y)&&N({inst:y})},[x,g,b]),a(function(){return d(y)&&N({inst:y}),x(function(){d(y)&&N({inst:y})})},[x]),o(g),g}function d(x){var b=x.getSnapshot;x=x.value;try{var g=b();return!r(x,g)}catch{return!0}}function c(x,b){return b()}var u=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?c:l;return bN.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:u,bN}var N9;function bse(){return N9||(N9=1,gN.exports=gse()),gN.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _9;function vse(){if(_9)return pN;_9=1;var e=cp(),t=bse();function r(c,u){return c===u&&(c!==0||1/c===1/u)||c!==c&&u!==u}var n=typeof Object.is=="function"?Object.is:r,a=t.useSyncExternalStore,i=e.useRef,o=e.useEffect,l=e.useMemo,d=e.useDebugValue;return pN.useSyncExternalStoreWithSelector=function(c,u,x,b,g){var k=i(null);if(k.current===null){var y={hasValue:!1,value:null};k.current=y}else y=k.current;k=l(function(){function S(W){if(!O){if(O=!0,A=W,W=b(W),g!==void 0&&y.hasValue){var R=y.value;if(g(R,W))return P=R}return P=W}if(R=P,n(A,W))return R;var U=b(W);return g!==void 0&&g(R,U)?(A=W,R):(A=W,P=U)}var O=!1,A,P,q=x===void 0?null:x;return[function(){return S(u())},q===null?void 0:function(){return S(q())}]},[u,x,b,g]);var N=a(c,k[0],k[1]);return o(function(){y.hasValue=!0,y.value=N},[N]),d(N),N},pN}var S9;function yse(){return S9||(S9=1,xN.exports=vse()),xN.exports}var wse=yse(),aC=T.createContext(null),kse=e=>e,Gs=()=>{var e=T.useContext(aC);return e?e.store.dispatch:kse},aw=()=>{},Nse=()=>aw,_se=(e,t)=>e===t;function tn(e){var t=T.useContext(aC);return wse.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:Nse,t?t.store.getState:aw,t?t.store.getState:aw,t?e:aw,_se)}function Sse(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function jse(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function Cse(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(r=>typeof r=="function")){const r=e.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${t}[${r}]`)}}var j9=e=>Array.isArray(e)?e:[e];function Ase(e){const t=Array.isArray(e[0])?e[0]:e;return Cse(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function Ese(e,t){const r=[],{length:n}=e;for(let a=0;a<n;a++)r.push(e[a].apply(null,t));return r}var Tse=class{constructor(e){this.value=e}deref(){return this.value}},Ose=typeof WeakRef<"u"?WeakRef:Tse,Pse=0,C9=1;function R2(){return{s:Pse,v:void 0,o:null,p:null}}function Sz(e,t={}){let r=R2();const{resultEqualityCheck:n}=t;let a,i=0;function o(){var x;let l=r;const{length:d}=arguments;for(let b=0,g=d;b<g;b++){const k=arguments[b];if(typeof k=="function"||typeof k=="object"&&k!==null){let y=l.o;y===null&&(l.o=y=new WeakMap);const N=y.get(k);N===void 0?(l=R2(),y.set(k,l)):l=N}else{let y=l.p;y===null&&(l.p=y=new Map);const N=y.get(k);N===void 0?(l=R2(),y.set(k,l)):l=N}}const c=l;let u;if(l.s===C9)u=l.v;else if(u=e.apply(null,arguments),i++,n){const b=((x=a==null?void 0:a.deref)==null?void 0:x.call(a))??a;b!=null&&n(b,u)&&(u=b,i!==0&&i--),a=typeof u=="object"&&u!==null||typeof u=="function"?new Ose(u):u}return c.s=C9,c.v=u,u}return o.clearCache=()=>{r=R2(),o.resetResultsCount()},o.resultsCount=()=>i,o.resetResultsCount=()=>{i=0},o}function Ise(e,...t){const r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,n=(...a)=>{let i=0,o=0,l,d={},c=a.pop();typeof c=="object"&&(d=c,c=a.pop()),Sse(c,`createSelector expects an output function after the inputs, but received: [${typeof c}]`);const u={...r,...d},{memoize:x,memoizeOptions:b=[],argsMemoize:g=Sz,argsMemoizeOptions:k=[]}=u,y=j9(b),N=j9(k),S=Ase(a),O=x(function(){return i++,c.apply(null,arguments)},...y),A=g(function(){o++;const q=Ese(S,arguments);return l=O.apply(null,q),l},...N);return Object.assign(A,{resultFunc:c,memoizedResultFunc:O,dependencies:S,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>l,recomputations:()=>i,resetRecomputations:()=>{i=0},memoize:x,argsMemoize:g})};return Object.assign(n,{withTypes:()=>n}),n}var jt=Ise(Sz),Dse=Object.assign((e,t=jt)=>{jse(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const r=Object.keys(e),n=r.map(i=>e[i]);return t(n,(...i)=>i.reduce((o,l,d)=>(o[r[d]]=l,o),{}))},{withTypes:()=>Dse}),vN={},yN={},wN={},A9;function Mse(){return A9||(A9=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const r=(n,a,i)=>{if(n!==a){const o=t(n),l=t(a);if(o===l&&o===0){if(n<a)return i==="desc"?1:-1;if(n>a)return i==="desc"?-1:1}return i==="desc"?l-o:o-l}return 0};e.compareValues=r})(wN)),wN}var kN={},NN={},E9;function jz(){return E9||(E9=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"||r instanceof Symbol}e.isSymbol=t})(NN)),NN}var T9;function Lse(){return T9||(T9=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=jz(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function a(i,o){return Array.isArray(i)?!1:typeof i=="number"||typeof i=="boolean"||i==null||t.isSymbol(i)?!0:typeof i=="string"&&(n.test(i)||!r.test(i))||o!=null&&Object.hasOwn(o,i)}e.isKey=a})(kN)),kN}var O9;function Rse(){return O9||(O9=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Mse(),r=Lse(),n=Q6();function a(i,o,l,d){if(i==null)return[];l=d?void 0:l,Array.isArray(i)||(i=Object.values(i)),Array.isArray(o)||(o=o==null?[null]:[o]),o.length===0&&(o=[null]),Array.isArray(l)||(l=l==null?[]:[l]),l=l.map(g=>String(g));const c=(g,k)=>{let y=g;for(let N=0;N<k.length&&y!=null;++N)y=y[k[N]];return y},u=(g,k)=>k==null||g==null?k:typeof g=="object"&&"key"in g?Object.hasOwn(k,g.key)?k[g.key]:c(k,g.path):typeof g=="function"?g(k):Array.isArray(g)?c(k,g):typeof k=="object"?k[g]:k,x=o.map(g=>(Array.isArray(g)&&g.length===1&&(g=g[0]),g==null||typeof g=="function"||Array.isArray(g)||r.isKey(g)?g:{key:g,path:n.toPath(g)}));return i.map(g=>({original:g,criteria:x.map(k=>u(k,g))})).slice().sort((g,k)=>{for(let y=0;y<x.length;y++){const N=t.compareValues(g.criteria[y],k.criteria[y],l[y]);if(N!==0)return N}return 0}).map(g=>g.original)}e.orderBy=a})(yN)),yN}var _N={},P9;function Fse(){return P9||(P9=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n=1){const a=[],i=Math.floor(n),o=(l,d)=>{for(let c=0;c<l.length;c++){const u=l[c];Array.isArray(u)&&d<i?o(u,d+1):a.push(u)}};return o(r,0),a}e.flatten=t})(_N)),_N}var SN={},I9;function Cz(){return I9||(I9=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Nz(),r=nC(),n=pz(),a=bz();function i(o,l,d){return n.isObject(d)&&(typeof l=="number"&&r.isArrayLike(d)&&t.isIndex(l)&&l<d.length||typeof l=="string"&&l in d)?a.eq(d[l],o):!1}e.isIterateeCall=i})(SN)),SN}var D9;function Bse(){return D9||(D9=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Rse(),r=Fse(),n=Cz();function a(i,...o){const l=o.length;return l>1&&n.isIterateeCall(i,o[0],o[1])?o=[]:l>2&&n.isIterateeCall(o[0],o[1],o[2])&&(o=[o[0]]),t.orderBy(i,r.flatten(o),["asc"])}e.sortBy=a})(vN)),vN}var jN,M9;function Use(){return M9||(M9=1,jN=Bse().sortBy),jN}var zse=Use();const Xk=zc(zse);var Az=e=>e.legend.settings,qse=e=>e.legend.size,Hse=e=>e.legend.payload,$se=jt([Hse,Az],(e,t)=>{var{itemSorter:r}=t,n=e.flat(1);return r?Xk(n,r):n});function Vse(){return tn($se)}var F2=1;function Ez(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,r]=T.useState({height:0,left:0,top:0,width:0}),n=T.useCallback(a=>{if(a!=null){var i=a.getBoundingClientRect(),o={height:i.height,left:i.left,top:i.top,width:i.width};(Math.abs(o.height-t.height)>F2||Math.abs(o.left-t.left)>F2||Math.abs(o.top-t.top)>F2||Math.abs(o.width-t.width)>F2)&&r({height:o.height,left:o.left,top:o.top,width:o.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,n]}function Fo(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var Wse=typeof Symbol=="function"&&Symbol.observable||"@@observable",L9=Wse,CN=()=>Math.random().toString(36).substring(7).split("").join("."),Gse={INIT:`@@redux/INIT${CN()}`,REPLACE:`@@redux/REPLACE${CN()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${CN()}`},Ew=Gse;function sC(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function Tz(e,t,r){if(typeof e!="function")throw new Error(Fo(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Fo(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Fo(1));return r(Tz)(e,t)}let n=e,a=t,i=new Map,o=i,l=0,d=!1;function c(){o===i&&(o=new Map,i.forEach((N,S)=>{o.set(S,N)}))}function u(){if(d)throw new Error(Fo(3));return a}function x(N){if(typeof N!="function")throw new Error(Fo(4));if(d)throw new Error(Fo(5));let S=!0;c();const O=l++;return o.set(O,N),function(){if(S){if(d)throw new Error(Fo(6));S=!1,c(),o.delete(O),i=null}}}function b(N){if(!sC(N))throw new Error(Fo(7));if(typeof N.type>"u")throw new Error(Fo(8));if(typeof N.type!="string")throw new Error(Fo(17));if(d)throw new Error(Fo(9));try{d=!0,a=n(a,N)}finally{d=!1}return(i=o).forEach(O=>{O()}),N}function g(N){if(typeof N!="function")throw new Error(Fo(10));n=N,b({type:Ew.REPLACE})}function k(){const N=x;return{subscribe(S){if(typeof S!="object"||S===null)throw new Error(Fo(11));function O(){const P=S;P.next&&P.next(u())}return O(),{unsubscribe:N(O)}},[L9](){return this}}}return b({type:Ew.INIT}),{dispatch:b,subscribe:x,getState:u,replaceReducer:g,[L9]:k}}function Kse(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:Ew.INIT})>"u")throw new Error(Fo(12));if(typeof r(void 0,{type:Ew.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Fo(13))})}function Oz(e){const t=Object.keys(e),r={};for(let i=0;i<t.length;i++){const o=t[i];typeof e[o]=="function"&&(r[o]=e[o])}const n=Object.keys(r);let a;try{Kse(r)}catch(i){a=i}return function(o={},l){if(a)throw a;let d=!1;const c={};for(let u=0;u<n.length;u++){const x=n[u],b=r[x],g=o[x],k=b(g,l);if(typeof k>"u")throw l&&l.type,new Error(Fo(14));c[x]=k,d=d||k!==g}return d=d||n.length!==Object.keys(o).length,d?c:o}}function Tw(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function Xse(...e){return t=>(r,n)=>{const a=t(r,n);let i=()=>{throw new Error(Fo(15))};const o={getState:a.getState,dispatch:(d,...c)=>i(d,...c)},l=e.map(d=>d(o));return i=Tw(...l)(a.dispatch),{...a,dispatch:i}}}function Pz(e){return sC(e)&&"type"in e&&typeof e.type=="string"}var Iz=Symbol.for("immer-nothing"),R9=Symbol.for("immer-draftable"),Bc=Symbol.for("immer-state");function eu(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var xb=Object.getPrototypeOf;function qm(e){return!!e&&!!e[Bc]}function rh(e){var t;return e?Dz(e)||Array.isArray(e)||!!e[R9]||!!((t=e.constructor)!=null&&t[R9])||rv(e)||Qk(e):!1}var Yse=Object.prototype.constructor.toString(),F9=new WeakMap;function Dz(e){if(!e||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);if(t===null||t===Object.prototype)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;if(r===Object)return!0;if(typeof r!="function")return!1;let n=F9.get(r);return n===void 0&&(n=Function.toString.call(r),F9.set(r,n)),n===Yse}function Ow(e,t,r=!0){Yk(e)===0?(r?Reflect.ownKeys(e):Object.keys(e)).forEach(a=>{t(a,e[a],e)}):e.forEach((n,a)=>t(a,n,e))}function Yk(e){const t=e[Bc];return t?t.type_:Array.isArray(e)?1:rv(e)?2:Qk(e)?3:0}function XS(e,t){return Yk(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Mz(e,t,r){const n=Yk(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function Qse(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function rv(e){return e instanceof Map}function Qk(e){return e instanceof Set}function Jf(e){return e.copy_||e.base_}function YS(e,t){if(rv(e))return new Map(e);if(Qk(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=Dz(e);if(t===!0||t==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(e);delete n[Bc];let a=Reflect.ownKeys(n);for(let i=0;i<a.length;i++){const o=a[i],l=n[o];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(n[o]={configurable:!0,writable:!0,enumerable:l.enumerable,value:e[o]})}return Object.create(xb(e),n)}else{const n=xb(e);if(n!==null&&r)return{...e};const a=Object.create(n);return Object.assign(a,e)}}function iC(e,t=!1){return Zk(e)||qm(e)||!rh(e)||(Yk(e)>1&&Object.defineProperties(e,{set:B2,add:B2,clear:B2,delete:B2}),Object.freeze(e),t&&Object.values(e).forEach(r=>iC(r,!0))),e}function Zse(){eu(2)}var B2={value:Zse};function Zk(e){return e===null||typeof e!="object"?!0:Object.isFrozen(e)}var Jse={};function Hm(e){const t=Jse[e];return t||eu(0,e),t}var pb;function Lz(){return pb}function eie(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function B9(e,t){t&&(Hm("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function QS(e){ZS(e),e.drafts_.forEach(tie),e.drafts_=null}function ZS(e){e===pb&&(pb=e.parent_)}function U9(e){return pb=eie(pb,e)}function tie(e){const t=e[Bc];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function z9(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[Bc].modified_&&(QS(t),eu(4)),rh(e)&&(e=Pw(t,e),t.parent_||Iw(t,e)),t.patches_&&Hm("Patches").generateReplacementPatches_(r[Bc].base_,e,t.patches_,t.inversePatches_)):e=Pw(t,r,[]),QS(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==Iz?e:void 0}function Pw(e,t,r){if(Zk(t))return t;const n=e.immer_.shouldUseStrictIteration(),a=t[Bc];if(!a)return Ow(t,(i,o)=>q9(e,a,t,i,o,r),n),t;if(a.scope_!==e)return t;if(!a.modified_)return Iw(e,a.base_,!0),a.base_;if(!a.finalized_){a.finalized_=!0,a.scope_.unfinalizedDrafts_--;const i=a.copy_;let o=i,l=!1;a.type_===3&&(o=new Set(i),i.clear(),l=!0),Ow(o,(d,c)=>q9(e,a,i,d,c,r,l),n),Iw(e,i,!1),r&&e.patches_&&Hm("Patches").generatePatches_(a,r,e.patches_,e.inversePatches_)}return a.copy_}function q9(e,t,r,n,a,i,o){if(a==null||typeof a!="object"&&!o)return;const l=Zk(a);if(!(l&&!o)){if(qm(a)){const d=i&&t&&t.type_!==3&&!XS(t.assigned_,n)?i.concat(n):void 0,c=Pw(e,a,d);if(Mz(r,n,c),qm(c))e.canAutoFreeze_=!1;else return}else o&&r.add(a);if(rh(a)&&!l){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1||t&&t.base_&&t.base_[n]===a&&l)return;Pw(e,a),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&(rv(r)?r.has(n):Object.prototype.propertyIsEnumerable.call(r,n))&&Iw(e,a)}}}function Iw(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&iC(t,r)}function rie(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:Lz(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=n,i=oC;r&&(a=[n],i=gb);const{revoke:o,proxy:l}=Proxy.revocable(a,i);return n.draft_=l,n.revoke_=o,l}var oC={get(e,t){if(t===Bc)return e;const r=Jf(e);if(!XS(r,t))return nie(e,r,t);const n=r[t];return e.finalized_||!rh(n)?n:n===AN(e.base_,t)?(EN(e),e.copy_[t]=ej(n,e)):n},has(e,t){return t in Jf(e)},ownKeys(e){return Reflect.ownKeys(Jf(e))},set(e,t,r){const n=Rz(Jf(e),t);if(n!=null&&n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const a=AN(Jf(e),t),i=a==null?void 0:a[Bc];if(i&&i.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(Qse(r,a)&&(r!==void 0||XS(e.base_,t)))return!0;EN(e),JS(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return AN(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,EN(e),JS(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=Jf(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){eu(11)},getPrototypeOf(e){return xb(e.base_)},setPrototypeOf(){eu(12)}},gb={};Ow(oC,(e,t)=>{gb[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});gb.deleteProperty=function(e,t){return gb.set.call(this,e,t,void 0)};gb.set=function(e,t,r){return oC.set.call(this,e[0],t,r,e[0])};function AN(e,t){const r=e[Bc];return(r?Jf(r):e)[t]}function nie(e,t,r){var a;const n=Rz(t,r);return n?"value"in n?n.value:(a=n.get)==null?void 0:a.call(e.draft_):void 0}function Rz(e,t){if(!(t in e))return;let r=xb(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=xb(r)}}function JS(e){e.modified_||(e.modified_=!0,e.parent_&&JS(e.parent_))}function EN(e){e.copy_||(e.copy_=YS(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var aie=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){const i=r;r=t;const o=this;return function(d=i,...c){return o.produce(d,u=>r.call(this,u,...c))}}typeof r!="function"&&eu(6),n!==void 0&&typeof n!="function"&&eu(7);let a;if(rh(t)){const i=U9(this),o=ej(t,void 0);let l=!0;try{a=r(o),l=!1}finally{l?QS(i):ZS(i)}return B9(i,n),z9(a,i)}else if(!t||typeof t!="object"){if(a=r(t),a===void 0&&(a=t),a===Iz&&(a=void 0),this.autoFreeze_&&iC(a,!0),n){const i=[],o=[];Hm("Patches").generateReplacementPatches_(t,a,i,o),n(i,o)}return a}else eu(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(o,...l)=>this.produceWithPatches(o,d=>t(d,...l));let n,a;return[this.produce(t,r,(o,l)=>{n=o,a=l}),n,a]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),typeof(e==null?void 0:e.useStrictIteration)=="boolean"&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){rh(e)||eu(8),qm(e)&&(e=H0(e));const t=U9(this),r=ej(e,void 0);return r[Bc].isManual_=!0,ZS(t),r}finishDraft(e,t){const r=e&&e[Bc];(!r||!r.isManual_)&&eu(9);const{scope_:n}=r;return B9(n,t),z9(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const a=t[r];if(a.path.length===0&&a.op==="replace"){e=a.value;break}}r>-1&&(t=t.slice(r+1));const n=Hm("Patches").applyPatches_;return qm(e)?n(e,t):this.produce(e,a=>n(a,t))}};function ej(e,t){const r=rv(e)?Hm("MapSet").proxyMap_(e,t):Qk(e)?Hm("MapSet").proxySet_(e,t):rie(e,t);return(t?t.scope_:Lz()).drafts_.push(r),r}function H0(e){return qm(e)||eu(10,e),Fz(e)}function Fz(e){if(!rh(e)||Zk(e))return e;const t=e[Bc];let r,n=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=YS(e,t.scope_.immer_.useStrictShallowCopy_),n=t.scope_.immer_.shouldUseStrictIteration()}else r=YS(e,!0);return Ow(r,(a,i)=>{Mz(r,a,Fz(i))},n),t&&(t.finalized_=!1),r}var tj=new aie,Bz=tj.produce,sie=tj.setUseStrictIteration.bind(tj);function Uz(e){return({dispatch:r,getState:n})=>a=>i=>typeof i=="function"?i(r,n,e):a(i)}var iie=Uz(),oie=Uz,lie=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Tw:Tw.apply(null,arguments)};function Nd(e,t){function r(...n){if(t){let a=t(...n);if(!a)throw new Error(Rc(0));return{type:e,payload:a.payload,..."meta"in a&&{meta:a.meta},..."error"in a&&{error:a.error}}}return{type:e,payload:n[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=n=>Pz(n)&&n.type===e,r}var zz=class Lg extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,Lg.prototype)}static get[Symbol.species](){return Lg}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new Lg(...t[0].concat(this)):new Lg(...t.concat(this))}};function H9(e){return rh(e)?Bz(e,()=>{}):e}function U2(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function cie(e){return typeof e=="boolean"}var die=()=>function(t){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:a=!0,actionCreatorCheck:i=!0}=t??{};let o=new zz;return r&&(cie(r)?o.push(iie):o.push(oie(r.extraArgument))),o},qz="RTK_autoBatch",Al=()=>e=>({payload:e,meta:{[qz]:!0}}),$9=e=>t=>{setTimeout(t,e)},Hz=(e={type:"raf"})=>t=>(...r)=>{const n=t(...r);let a=!0,i=!1,o=!1;const l=new Set,d=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:$9(10):e.type==="callback"?e.queueNotification:$9(e.timeout),c=()=>{o=!1,i&&(i=!1,l.forEach(u=>u()))};return Object.assign({},n,{subscribe(u){const x=()=>a&&u(),b=n.subscribe(x);return l.add(u),()=>{b(),l.delete(u)}},dispatch(u){var x;try{return a=!((x=u==null?void 0:u.meta)!=null&&x[qz]),i=!a,i&&(o||(o=!0,d(c))),n.dispatch(u)}finally{a=!0}}})},uie=e=>function(r){const{autoBatch:n=!0}=r??{};let a=new zz(e);return n&&a.push(Hz(typeof n=="object"?n:void 0)),a};function hie(e){const t=die(),{reducer:r=void 0,middleware:n,devTools:a=!0,preloadedState:i=void 0,enhancers:o=void 0}=e||{};let l;if(typeof r=="function")l=r;else if(sC(r))l=Oz(r);else throw new Error(Rc(1));let d;typeof n=="function"?d=n(t):d=t();let c=Tw;a&&(c=lie({trace:!1,...typeof a=="object"&&a}));const u=Xse(...d),x=uie(u);let b=typeof o=="function"?o(x):x();const g=c(...b);return Tz(l,i,g)}function $z(e){const t={},r=[];let n;const a={addCase(i,o){const l=typeof i=="string"?i:i.type;if(!l)throw new Error(Rc(28));if(l in t)throw new Error(Rc(29));return t[l]=o,a},addAsyncThunk(i,o){return o.pending&&(t[i.pending.type]=o.pending),o.rejected&&(t[i.rejected.type]=o.rejected),o.fulfilled&&(t[i.fulfilled.type]=o.fulfilled),o.settled&&r.push({matcher:i.settled,reducer:o.settled}),a},addMatcher(i,o){return r.push({matcher:i,reducer:o}),a},addDefaultCase(i){return n=i,a}};return e(a),[t,r,n]}sie(!1);function fie(e){return typeof e=="function"}function mie(e,t){let[r,n,a]=$z(t),i;if(fie(e))i=()=>H9(e());else{const l=H9(e);i=()=>l}function o(l=i(),d){let c=[r[d.type],...n.filter(({matcher:u})=>u(d)).map(({reducer:u})=>u)];return c.filter(u=>!!u).length===0&&(c=[a]),c.reduce((u,x)=>{if(x)if(qm(u)){const g=x(u,d);return g===void 0?u:g}else{if(rh(u))return Bz(u,b=>x(b,d));{const b=x(u,d);if(b===void 0){if(u===null)return u;throw Error("A case reducer on a non-draftable value must not return undefined")}return b}}return u},l)}return o.getInitialState=i,o}var xie="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",pie=(e=21)=>{let t="",r=e;for(;r--;)t+=xie[Math.random()*64|0];return t},gie=Symbol.for("rtk-slice-createasyncthunk");function bie(e,t){return`${e}/${t}`}function vie({creators:e}={}){var r;const t=(r=e==null?void 0:e.asyncThunk)==null?void 0:r[gie];return function(a){const{name:i,reducerPath:o=i}=a;if(!i)throw new Error(Rc(11));const l=(typeof a.reducers=="function"?a.reducers(wie()):a.reducers)||{},d=Object.keys(l),c={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},u={addCase(P,q){const W=typeof P=="string"?P:P.type;if(!W)throw new Error(Rc(12));if(W in c.sliceCaseReducersByType)throw new Error(Rc(13));return c.sliceCaseReducersByType[W]=q,u},addMatcher(P,q){return c.sliceMatchers.push({matcher:P,reducer:q}),u},exposeAction(P,q){return c.actionCreators[P]=q,u},exposeCaseReducer(P,q){return c.sliceCaseReducersByName[P]=q,u}};d.forEach(P=>{const q=l[P],W={reducerName:P,type:bie(i,P),createNotation:typeof a.reducers=="function"};Nie(q)?Sie(W,q,u,t):kie(W,q,u)});function x(){const[P={},q=[],W=void 0]=typeof a.extraReducers=="function"?$z(a.extraReducers):[a.extraReducers],R={...P,...c.sliceCaseReducersByType};return mie(a.initialState,U=>{for(let L in R)U.addCase(L,R[L]);for(let L of c.sliceMatchers)U.addMatcher(L.matcher,L.reducer);for(let L of q)U.addMatcher(L.matcher,L.reducer);W&&U.addDefaultCase(W)})}const b=P=>P,g=new Map,k=new WeakMap;let y;function N(P,q){return y||(y=x()),y(P,q)}function S(){return y||(y=x()),y.getInitialState()}function O(P,q=!1){function W(U){let L=U[P];return typeof L>"u"&&q&&(L=U2(k,W,S)),L}function R(U=b){const L=U2(g,q,()=>new WeakMap);return U2(L,U,()=>{const Q={};for(const[H,G]of Object.entries(a.selectors??{}))Q[H]=yie(G,U,()=>U2(k,U,S),q);return Q})}return{reducerPath:P,getSelectors:R,get selectors(){return R(W)},selectSlice:W}}const A={name:i,reducer:N,actions:c.actionCreators,caseReducers:c.sliceCaseReducersByName,getInitialState:S,...O(o),injectInto(P,{reducerPath:q,...W}={}){const R=q??o;return P.inject({reducerPath:R,reducer:N},W),{...A,...O(R,!0)}}};return A}}function yie(e,t,r,n){function a(i,...o){let l=t(i);return typeof l>"u"&&n&&(l=r()),e(l,...o)}return a.unwrapped=e,a}var Hc=vie();function wie(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function kie({type:e,reducerName:t,createNotation:r},n,a){let i,o;if("reducer"in n){if(r&&!_ie(n))throw new Error(Rc(17));i=n.reducer,o=n.prepare}else i=n;a.addCase(e,i).exposeCaseReducer(t,i).exposeAction(t,o?Nd(e,o):Nd(e))}function Nie(e){return e._reducerDefinitionType==="asyncThunk"}function _ie(e){return e._reducerDefinitionType==="reducerWithPrepare"}function Sie({type:e,reducerName:t},r,n,a){if(!a)throw new Error(Rc(18));const{payloadCreator:i,fulfilled:o,pending:l,rejected:d,settled:c,options:u}=r,x=a(e,i,u);n.exposeAction(t,x),o&&n.addCase(x.fulfilled,o),l&&n.addCase(x.pending,l),d&&n.addCase(x.rejected,d),c&&n.addMatcher(x.settled,c),n.exposeCaseReducer(t,{fulfilled:o||z2,pending:l||z2,rejected:d||z2,settled:c||z2})}function z2(){}var jie="task",Vz="listener",Wz="completed",lC="cancelled",Cie=`task-${lC}`,Aie=`task-${Wz}`,rj=`${Vz}-${lC}`,Eie=`${Vz}-${Wz}`,Jk=class{constructor(e){Oa(this,"name","TaskAbortError");Oa(this,"message");this.code=e,this.message=`${jie} ${lC} (reason: ${e})`}},cC=(e,t)=>{if(typeof e!="function")throw new TypeError(Rc(32))},Dw=()=>{},Gz=(e,t=Dw)=>(e.catch(t),e),Kz=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),Nm=(e,t)=>{const r=e.signal;r.aborted||("reason"in r||Object.defineProperty(r,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},_m=e=>{if(e.aborted){const{reason:t}=e;throw new Jk(t)}};function Xz(e,t){let r=Dw;return new Promise((n,a)=>{const i=()=>a(new Jk(e.reason));if(e.aborted){i();return}r=Kz(e,i),t.finally(()=>r()).then(n,a)}).finally(()=>{r=Dw})}var Tie=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(r){return{status:r instanceof Jk?"cancelled":"rejected",error:r}}finally{t==null||t()}},Mw=e=>t=>Gz(Xz(e,t).then(r=>(_m(e),r))),Yz=e=>{const t=Mw(e);return r=>t(new Promise(n=>setTimeout(n,r)))},{assign:j1}=Object,V9={},e5="listenerMiddleware",Oie=(e,t)=>{const r=n=>Kz(e,()=>Nm(n,e.reason));return(n,a)=>{cC(n);const i=new AbortController;r(i);const o=Tie(async()=>{_m(e),_m(i.signal);const l=await n({pause:Mw(i.signal),delay:Yz(i.signal),signal:i.signal});return _m(i.signal),l},()=>Nm(i,Aie));return a!=null&&a.autoJoin&&t.push(o.catch(Dw)),{result:Mw(e)(o),cancel(){Nm(i,Cie)}}}},Pie=(e,t)=>{const r=async(n,a)=>{_m(t);let i=()=>{};const l=[new Promise((d,c)=>{let u=e({predicate:n,effect:(x,b)=>{b.unsubscribe(),d([x,b.getState(),b.getOriginalState()])}});i=()=>{u(),c()}})];a!=null&&l.push(new Promise(d=>setTimeout(d,a,null)));try{const d=await Xz(t,Promise.race(l));return _m(t),d}finally{i()}};return(n,a)=>Gz(r(n,a))},Qz=e=>{let{type:t,actionCreator:r,matcher:n,predicate:a,effect:i}=e;if(t)a=Nd(t).match;else if(r)t=r.type,a=r.match;else if(n)a=n;else if(!a)throw new Error(Rc(21));return cC(i),{predicate:a,type:t,effect:i}},Zz=j1(e=>{const{type:t,predicate:r,effect:n}=Qz(e);return{id:pie(),effect:n,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(Rc(22))}}},{withTypes:()=>Zz}),W9=(e,t)=>{const{type:r,effect:n,predicate:a}=Qz(t);return Array.from(e.values()).find(i=>(typeof r=="string"?i.type===r:i.predicate===a)&&i.effect===n)},nj=e=>{e.pending.forEach(t=>{Nm(t,rj)})},Iie=(e,t)=>()=>{for(const r of t.keys())nj(r);e.clear()},G9=(e,t,r)=>{try{e(t,r)}catch(n){setTimeout(()=>{throw n},0)}},Jz=j1(Nd(`${e5}/add`),{withTypes:()=>Jz}),Die=Nd(`${e5}/removeAll`),eq=j1(Nd(`${e5}/remove`),{withTypes:()=>eq}),Mie=(...e)=>{console.error(`${e5}/error`,...e)},nv=(e={})=>{const t=new Map,r=new Map,n=g=>{const k=r.get(g)??0;r.set(g,k+1)},a=g=>{const k=r.get(g)??1;k===1?r.delete(g):r.set(g,k-1)},{extra:i,onError:o=Mie}=e;cC(o);const l=g=>(g.unsubscribe=()=>t.delete(g.id),t.set(g.id,g),k=>{g.unsubscribe(),k!=null&&k.cancelActive&&nj(g)}),d=g=>{const k=W9(t,g)??Zz(g);return l(k)};j1(d,{withTypes:()=>d});const c=g=>{const k=W9(t,g);return k&&(k.unsubscribe(),g.cancelActive&&nj(k)),!!k};j1(c,{withTypes:()=>c});const u=async(g,k,y,N)=>{const S=new AbortController,O=Pie(d,S.signal),A=[];try{g.pending.add(S),n(g),await Promise.resolve(g.effect(k,j1({},y,{getOriginalState:N,condition:(P,q)=>O(P,q).then(Boolean),take:O,delay:Yz(S.signal),pause:Mw(S.signal),extra:i,signal:S.signal,fork:Oie(S.signal,A),unsubscribe:g.unsubscribe,subscribe:()=>{t.set(g.id,g)},cancelActiveListeners:()=>{g.pending.forEach((P,q,W)=>{P!==S&&(Nm(P,rj),W.delete(P))})},cancel:()=>{Nm(S,rj),g.pending.delete(S)},throwIfCancelled:()=>{_m(S.signal)}})))}catch(P){P instanceof Jk||G9(o,P,{raisedBy:"effect"})}finally{await Promise.all(A),Nm(S,Eie),a(g),g.pending.delete(S)}},x=Iie(t,r);return{middleware:g=>k=>y=>{if(!Pz(y))return k(y);if(Jz.match(y))return d(y.payload);if(Die.match(y)){x();return}if(eq.match(y))return c(y.payload);let N=g.getState();const S=()=>{if(N===V9)throw new Error(Rc(23));return N};let O;try{if(O=k(y),t.size>0){const A=g.getState(),P=Array.from(t.values());for(const q of P){let W=!1;try{W=q.predicate(y,A,N)}catch(R){W=!1,G9(o,R,{raisedBy:"predicate"})}W&&u(q,y,g,S)}}}finally{N=V9}return O},startListening:d,stopListening:c,clearListeners:x}};function Rc(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var Lie={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},tq=Hc({name:"chartLayout",initialState:Lie,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var r,n,a,i;e.margin.top=(r=t.payload.top)!==null&&r!==void 0?r:0,e.margin.right=(n=t.payload.right)!==null&&n!==void 0?n:0,e.margin.bottom=(a=t.payload.bottom)!==null&&a!==void 0?a:0,e.margin.left=(i=t.payload.left)!==null&&i!==void 0?i:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:Rie,setLayout:Fie,setChartSize:Bie,setScale:Uie}=tq.actions,zie=tq.reducer;function K9(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function X9(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?K9(Object(r),!0).forEach(function(n){qie(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):K9(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function qie(e,t,r){return(t=Hie(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Hie(e){var t=$ie(e,"string");return typeof t=="symbol"?t:t+""}function $ie(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Lw=Math.PI/180,Vie=e=>e*180/Math.PI,$i=(e,t,r,n)=>({x:e+Math.cos(-Lw*n)*r,y:t+Math.sin(-Lw*n)*r}),rq=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},Wie=(e,t)=>{var{x:r,y:n}=e,{x:a,y:i}=t;return Math.sqrt((r-a)**2+(n-i)**2)},Gie=(e,t)=>{var{x:r,y:n}=e,{cx:a,cy:i}=t,o=Wie({x:r,y:n},{x:a,y:i});if(o<=0)return{radius:o,angle:0};var l=(r-a)/o,d=Math.acos(l);return n>i&&(d=2*Math.PI-d),{radius:o,angle:Vie(d),angleInRadian:d}},Kie=e=>{var{startAngle:t,endAngle:r}=e,n=Math.floor(t/360),a=Math.floor(r/360),i=Math.min(n,a);return{startAngle:t-i*360,endAngle:r-i*360}},Xie=(e,t)=>{var{startAngle:r,endAngle:n}=t,a=Math.floor(r/360),i=Math.floor(n/360),o=Math.min(a,i);return e+o*360},Yie=(e,t)=>{var{x:r,y:n}=e,{radius:a,angle:i}=Gie({x:r,y:n},t),{innerRadius:o,outerRadius:l}=t;if(a<o||a>l||a===0)return null;var{startAngle:d,endAngle:c}=Kie(t),u=i,x;if(d<=c){for(;u>c;)u-=360;for(;u<d;)u+=360;x=u>=d&&u<=c}else{for(;u>d;)u-=360;for(;u<c;)u+=360;x=u>=c&&u<=d}return x?X9(X9({},t),{},{radius:a,angle:Xie(u,t)}):null};function nq(e,t,r){return Array.isArray(e)&&e&&t+r!==0?e.slice(t,r+1):e}function Y9(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function gd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Y9(Object(r),!0).forEach(function(n){Qie(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Y9(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Qie(e,t,r){return(t=Zie(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Zie(e){var t=Jie(e,"string");return typeof t=="symbol"?t:t+""}function Jie(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function os(e,t,r){return Is(e)||Is(t)?r:Gu(t)?zm(e,t,r):typeof t=="function"?t(e):r}var eoe=(e,t,r,n,a)=>{var i,o=-1,l=(i=t==null?void 0:t.length)!==null&&i!==void 0?i:0;if(l<=1||e==null)return 0;if(n==="angleAxis"&&a!=null&&Math.abs(Math.abs(a[1]-a[0])-360)<=1e-6)for(var d=0;d<l;d++){var c=d>0?r[d-1].coordinate:r[l-1].coordinate,u=r[d].coordinate,x=d>=l-1?r[0].coordinate:r[d+1].coordinate,b=void 0;if(Co(u-c)!==Co(x-u)){var g=[];if(Co(x-u)===Co(a[1]-a[0])){b=x;var k=u+a[1]-a[0];g[0]=Math.min(k,(k+c)/2),g[1]=Math.max(k,(k+c)/2)}else{b=c;var y=x+a[1]-a[0];g[0]=Math.min(u,(y+u)/2),g[1]=Math.max(u,(y+u)/2)}var N=[Math.min(u,(b+u)/2),Math.max(u,(b+u)/2)];if(e>N[0]&&e<=N[1]||e>=g[0]&&e<=g[1]){({index:o}=r[d]);break}}else{var S=Math.min(c,x),O=Math.max(c,x);if(e>(S+u)/2&&e<=(O+u)/2){({index:o}=r[d]);break}}}else if(t){for(var A=0;A<l;A++)if(A===0&&e<=(t[A].coordinate+t[A+1].coordinate)/2||A>0&&A<l-1&&e>(t[A].coordinate+t[A-1].coordinate)/2&&e<=(t[A].coordinate+t[A+1].coordinate)/2||A===l-1&&e>(t[A].coordinate+t[A-1].coordinate)/2){({index:o}=t[A]);break}}return o},toe=(e,t,r)=>{if(t&&r){var{width:n,height:a}=r,{align:i,verticalAlign:o,layout:l}=t;if((l==="vertical"||l==="horizontal"&&o==="middle")&&i!=="center"&&Qr(e[i]))return gd(gd({},e),{},{[i]:e[i]+(n||0)});if((l==="horizontal"||l==="vertical"&&i==="center")&&o!=="middle"&&Qr(e[o]))return gd(gd({},e),{},{[o]:e[o]+(a||0)})}return e},Zu=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",aq=(e,t,r,n)=>{if(n)return e.map(l=>l.coordinate);var a,i,o=e.map(l=>(l.coordinate===t&&(a=!0),l.coordinate===r&&(i=!0),l.coordinate));return a||o.push(t),i||o.push(r),o},sq=(e,t,r)=>{if(!e)return null;var{duplicateDomain:n,type:a,range:i,scale:o,realScaleType:l,isCategorical:d,categoricalDomain:c,tickCount:u,ticks:x,niceTicks:b,axisType:g}=e;if(!o)return null;var k=l==="scaleBand"&&o.bandwidth?o.bandwidth()/2:2,y=a==="category"&&o.bandwidth?o.bandwidth()/k:0;if(y=g==="angleAxis"&&i&&i.length>=2?Co(i[0]-i[1])*2*y:y,x||b){var N=(x||b||[]).map((S,O)=>{var A=n?n.indexOf(S):S;return{coordinate:o(A)+y,value:S,offset:y,index:O}});return N.filter(S=>!Fc(S.coordinate))}return d&&c?c.map((S,O)=>({coordinate:o(S)+y,value:S,index:O,offset:y})):o.ticks&&u!=null?o.ticks(u).map((S,O)=>({coordinate:o(S)+y,value:S,offset:y,index:O})):o.domain().map((S,O)=>({coordinate:o(S)+y,value:n?n[S]:S,index:O,offset:y}))},Q9=1e-4,roe=e=>{var t=e.domain();if(!(!t||t.length<=2)){var r=t.length,n=e.range(),a=Math.min(n[0],n[1])-Q9,i=Math.max(n[0],n[1])+Q9,o=e(t[0]),l=e(t[r-1]);(o<a||o>i||l<a||l>i)&&e.domain([t[0],t[r-1]])}},noe=(e,t)=>{if(!t||t.length!==2||!Qr(t[0])||!Qr(t[1]))return e;var r=Math.min(t[0],t[1]),n=Math.max(t[0],t[1]),a=[e[0],e[1]];return(!Qr(e[0])||e[0]<r)&&(a[0]=r),(!Qr(e[1])||e[1]>n)&&(a[1]=n),a[0]>n&&(a[0]=n),a[1]<r&&(a[1]=r),a},aoe=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var a=0,i=0,o=0;o<t;++o){var l=Fc(e[o][r][1])?e[o][r][0]:e[o][r][1];l>=0?(e[o][r][0]=a,e[o][r][1]=a+l,a=e[o][r][1]):(e[o][r][0]=i,e[o][r][1]=i+l,i=e[o][r][1])}},soe=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var a=0,i=0;i<t;++i){var o=Fc(e[i][r][1])?e[i][r][0]:e[i][r][1];o>=0?(e[i][r][0]=a,e[i][r][1]=a+o,a=e[i][r][1]):(e[i][r][0]=0,e[i][r][1]=0)}},ioe={sign:aoe,expand:Tae,none:J1,silhouette:Oae,wiggle:Pae,positive:soe},ooe=(e,t,r)=>{var n=ioe[r],a=Eae().keys(t).value((i,o)=>+os(i,o,0)).order(WS).offset(n);return a(e)};function iq(e){return e==null?void 0:String(e)}function Rw(e){var{axis:t,ticks:r,bandSize:n,entry:a,index:i,dataKey:o}=e;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!Is(a[t.dataKey])){var l=fz(r,"value",a[t.dataKey]);if(l)return l.coordinate+n/2}return r[i]?r[i].coordinate+n/2:null}var d=os(a,Is(o)?t.dataKey:o);return Is(d)?null:t.scale(d)}var Z9=e=>{var{axis:t,ticks:r,offset:n,bandSize:a,entry:i,index:o}=e;if(t.type==="category")return r[o]?r[o].coordinate+n:null;var l=os(i,t.dataKey,t.scale.domain()[o]);return Is(l)?null:t.scale(l)-a/2+n},loe=e=>{var{numericAxis:t}=e,r=t.scale.domain();if(t.type==="number"){var n=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]);return n<=0&&a>=0?0:a<0?a:n}return r[0]},coe=e=>{var t=e.flat(2).filter(Qr);return[Math.min(...t),Math.max(...t)]},doe=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],uoe=(e,t,r)=>{if(e!=null)return doe(Object.keys(e).reduce((n,a)=>{var i=e[a],{stackedData:o}=i,l=o.reduce((d,c)=>{var u=nq(c,t,r),x=coe(u);return[Math.min(d[0],x[0]),Math.max(d[1],x[1])]},[1/0,-1/0]);return[Math.min(l[0],n[0]),Math.max(l[1],n[1])]},[1/0,-1/0]))},J9=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,eP=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,$m=(e,t,r)=>{if(e&&e.scale&&e.scale.bandwidth){var n=e.scale.bandwidth();if(!r||n>0)return n}if(e&&t&&t.length>=2){for(var a=Xk(t,u=>u.coordinate),i=1/0,o=1,l=a.length;o<l;o++){var d=a[o],c=a[o-1];i=Math.min((d.coordinate||0)-(c.coordinate||0),i)}return i===1/0?0:i}return r?void 0:0};function tP(e){var{tooltipEntrySettings:t,dataKey:r,payload:n,value:a,name:i}=e;return gd(gd({},t),{},{dataKey:r,payload:n,value:a,name:i})}function Sf(e,t){if(e)return String(e);if(typeof t=="string")return t}function hoe(e,t,r,n,a){if(r==="horizontal"||r==="vertical"){var i=e>=a.left&&e<=a.left+a.width&&t>=a.top&&t<=a.top+a.height;return i?{x:e,y:t}:null}return n?Yie({x:e,y:t},n):null}var foe=(e,t,r,n)=>{var a=t.find(c=>c&&c.index===r);if(a){if(e==="horizontal")return{x:a.coordinate,y:n.y};if(e==="vertical")return{x:n.x,y:a.coordinate};if(e==="centric"){var i=a.coordinate,{radius:o}=n;return gd(gd(gd({},n),$i(n.cx,n.cy,o,i)),{},{angle:i,radius:o})}var l=a.coordinate,{angle:d}=n;return gd(gd(gd({},n),$i(n.cx,n.cy,l,d)),{},{angle:d,radius:l})}return{x:0,y:0}},moe=(e,t)=>t==="horizontal"?e.x:t==="vertical"?e.y:t==="centric"?e.angle:e.radius,ch=e=>e.layout.width,dh=e=>e.layout.height,xoe=e=>e.layout.scale,oq=e=>e.layout.margin,t5=jt(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),r5=jt(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),lq="data-recharts-item-index",cq="data-recharts-item-data-key",av=60;function rP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function q2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?rP(Object(r),!0).forEach(function(n){poe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function poe(e,t,r){return(t=goe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function goe(e){var t=boe(e,"string");return typeof t=="symbol"?t:t+""}function boe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var voe=e=>e.brush.height;function yoe(e){var t=r5(e);return t.reduce((r,n)=>{if(n.orientation==="left"&&!n.mirror&&!n.hide){var a=typeof n.width=="number"?n.width:av;return r+a}return r},0)}function woe(e){var t=r5(e);return t.reduce((r,n)=>{if(n.orientation==="right"&&!n.mirror&&!n.hide){var a=typeof n.width=="number"?n.width:av;return r+a}return r},0)}function koe(e){var t=t5(e);return t.reduce((r,n)=>n.orientation==="top"&&!n.mirror&&!n.hide?r+n.height:r,0)}function Noe(e){var t=t5(e);return t.reduce((r,n)=>n.orientation==="bottom"&&!n.mirror&&!n.hide?r+n.height:r,0)}var so=jt([ch,dh,oq,voe,yoe,woe,koe,Noe,Az,qse],(e,t,r,n,a,i,o,l,d,c)=>{var u={left:(r.left||0)+a,right:(r.right||0)+i},x={top:(r.top||0)+o,bottom:(r.bottom||0)+l},b=q2(q2({},x),u),g=b.bottom;b.bottom+=n,b=toe(b,d,c);var k=e-b.left-b.right,y=t-b.top-b.bottom;return q2(q2({brushBottom:g},b),{},{width:Math.max(k,0),height:Math.max(y,0)})}),_oe=jt(so,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),dC=jt(ch,dh,(e,t)=>({x:0,y:0,width:e,height:t})),Soe=T.createContext(null),qo=()=>T.useContext(Soe)!=null,n5=e=>e.brush,a5=jt([n5,so,oq],(e,t,r)=>({height:e.height,x:Qr(e.x)?e.x:t.left,y:Qr(e.y)?e.y:t.top+t.height+t.brushBottom-((r==null?void 0:r.bottom)||0),width:Qr(e.width)?e.width:t.width})),TN={},ON={},PN={},nP;function joe(){return nP||(nP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n,{signal:a,edges:i}={}){let o,l=null;const d=i!=null&&i.includes("leading"),c=i==null||i.includes("trailing"),u=()=>{l!==null&&(r.apply(o,l),o=void 0,l=null)},x=()=>{c&&u(),y()};let b=null;const g=()=>{b!=null&&clearTimeout(b),b=setTimeout(()=>{b=null,x()},n)},k=()=>{b!==null&&(clearTimeout(b),b=null)},y=()=>{k(),o=void 0,l=null},N=()=>{u()},S=function(...O){if(a!=null&&a.aborted)return;o=this,l=O;const A=b==null;g(),d&&A&&u()};return S.schedule=g,S.cancel=y,S.flush=N,a==null||a.addEventListener("abort",y,{once:!0}),S}e.debounce=t})(PN)),PN}var aP;function Coe(){return aP||(aP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=joe();function r(n,a=0,i={}){typeof i!="object"&&(i={});const{leading:o=!1,trailing:l=!0,maxWait:d}=i,c=Array(2);o&&(c[0]="leading"),l&&(c[1]="trailing");let u,x=null;const b=t.debounce(function(...y){u=n.apply(this,y),x=null},a,{edges:c}),g=function(...y){return d!=null&&(x===null&&(x=Date.now()),Date.now()-x>=d)?(u=n.apply(this,y),x=Date.now(),b.cancel(),b.schedule(),u):(b.apply(this,y),u)},k=()=>(b.flush(),u);return g.cancel=b.cancel,g.flush=k,g}e.debounce=r})(ON)),ON}var sP;function Aoe(){return sP||(sP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Coe();function r(n,a=0,i={}){const{leading:o=!0,trailing:l=!0}=i;return t.debounce(n,a,{leading:o,maxWait:a,trailing:l})}e.throttle=r})(TN)),TN}var IN,iP;function Eoe(){return iP||(iP=1,IN=Aoe().throttle),IN}var Toe=Eoe();const Ooe=zc(Toe);var Fw=function(t,r){for(var n=arguments.length,a=new Array(n>2?n-2:0),i=2;i<n;i++)a[i-2]=arguments[i]},dq=(e,t,r)=>{var{width:n="100%",height:a="100%",aspect:i,maxHeight:o}=r,l=th(n)?e:Number(n),d=th(a)?t:Number(a);return i&&i>0&&(l?d=l/i:d&&(l=d*i),o&&d>o&&(d=o)),{calculatedWidth:l,calculatedHeight:d}},Poe={width:0,height:0,overflow:"visible"},Ioe={width:0,overflowX:"visible"},Doe={height:0,overflowY:"visible"},Moe={},Loe=e=>{var{width:t,height:r}=e,n=th(t),a=th(r);return n&&a?Poe:n?Ioe:a?Doe:Moe};function Roe(e){var{width:t,height:r,aspect:n}=e,a=t,i=r;return a===void 0&&i===void 0?(a="100%",i="100%"):a===void 0?a=n&&n>0?void 0:"100%":i===void 0&&(i=n&&n>0?void 0:"100%"),{width:a,height:i}}function Wi(e){return Number.isFinite(e)}function ep(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function aj(){return aj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},aj.apply(null,arguments)}function oP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function lP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?oP(Object(r),!0).forEach(function(n){Foe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Foe(e,t,r){return(t=Boe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Boe(e){var t=Uoe(e,"string");return typeof t=="symbol"?t:t+""}function Uoe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var uq=T.createContext({width:-1,height:-1});function hq(e){var{children:t,width:r,height:n}=e,a=T.useMemo(()=>({width:r,height:n}),[r,n]);return r<=0||n<=0?null:T.createElement(uq.Provider,{value:a},t)}var uC=()=>T.useContext(uq),zoe=T.forwardRef((e,t)=>{var{aspect:r,initialDimension:n={width:-1,height:-1},width:a,height:i,minWidth:o=0,minHeight:l,maxHeight:d,children:c,debounce:u=0,id:x,className:b,onResize:g,style:k={}}=e,y=T.useRef(null),N=T.useRef();N.current=g,T.useImperativeHandle(t,()=>y.current);var[S,O]=T.useState({containerWidth:n.width,containerHeight:n.height}),A=T.useCallback((U,L)=>{O(Q=>{var H=Math.round(U),G=Math.round(L);return Q.containerWidth===H&&Q.containerHeight===G?Q:{containerWidth:H,containerHeight:G}})},[]);T.useEffect(()=>{var U=G=>{var Z,{width:te,height:se}=G[0].contentRect;A(te,se),(Z=N.current)===null||Z===void 0||Z.call(N,te,se)};u>0&&(U=Ooe(U,u,{trailing:!0,leading:!1}));var L=new ResizeObserver(U),{width:Q,height:H}=y.current.getBoundingClientRect();return A(Q,H),L.observe(y.current),()=>{L.disconnect()}},[A,u]);var{containerWidth:P,containerHeight:q}=S;Fw(!r||r>0,"The aspect(%s) must be greater than zero.",r);var{calculatedWidth:W,calculatedHeight:R}=dq(P,q,{width:a,height:i,aspect:r,maxHeight:d});return Fw(W>0||R>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,W,R,a,i,o,l,r),T.createElement("div",{id:x?"".concat(x):void 0,className:Zn("recharts-responsive-container",b),style:lP(lP({},k),{},{width:a,height:i,minWidth:o,minHeight:l,maxHeight:d}),ref:y},T.createElement("div",{style:Loe({width:a,height:i})},T.createElement(hq,{width:W,height:R},c)))}),Bu=T.forwardRef((e,t)=>{var r=uC();if(ep(r.width)&&ep(r.height))return e.children;var{width:n,height:a}=Roe({width:e.width,height:e.height,aspect:e.aspect}),{calculatedWidth:i,calculatedHeight:o}=dq(void 0,void 0,{width:n,height:a,aspect:e.aspect,maxHeight:e.maxHeight});return Qr(i)&&Qr(o)?T.createElement(hq,{width:i,height:o},e.children):T.createElement(zoe,aj({},e,{width:n,height:a,ref:t}))}),s5=()=>{var e,t=qo(),r=tn(_oe),n=tn(a5),a=(e=tn(n5))===null||e===void 0?void 0:e.padding;return!t||!n||!a?r:{width:n.width-a.left-a.right,height:n.height-a.top-a.bottom,x:a.left,y:a.top}},qoe={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},fq=()=>{var e;return(e=tn(so))!==null&&e!==void 0?e:qoe},hC=()=>tn(ch),fC=()=>tn(dh),Hoe=()=>tn(e=>e.layout.margin),pa=e=>e.layout.layoutType,sv=()=>tn(pa),i5=e=>{var t=Gs(),r=qo(),{width:n,height:a}=e,i=uC(),o=n,l=a;return i&&(o=i.width>0?i.width:n,l=i.height>0?i.height:a),T.useEffect(()=>{!r&&ep(o)&&ep(l)&&t(Bie({width:o,height:l}))},[t,r,o,l]),null},$oe={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},mq=Hc({name:"legend",initialState:$oe,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload:{reducer(e,t){e.payload.push(t.payload)},prepare:Al()},removeLegendPayload:{reducer(e,t){var r=H0(e).payload.indexOf(t.payload);r>-1&&e.payload.splice(r,1)},prepare:Al()}}}),{setLegendSize:cP,setLegendSettings:Voe,addLegendPayload:xq,removeLegendPayload:pq}=mq.actions,Woe=mq.reducer,Goe=["contextPayload"];function sj(){return sj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},sj.apply(null,arguments)}function dP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function tp(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?dP(Object(r),!0).forEach(function(n){mC(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function mC(e,t,r){return(t=Koe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Koe(e){var t=Xoe(e,"string");return typeof t=="symbol"?t:t+""}function Xoe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Yoe(e,t){if(e==null)return{};var r,n,a=Qoe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Qoe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Zoe(e){return e.value}function Joe(e){var{contextPayload:t}=e,r=Yoe(e,Goe),n=_z(t,e.payloadUniqBy,Zoe),a=tp(tp({},r),{},{payload:n});return T.isValidElement(e.content)?T.cloneElement(e.content,a):typeof e.content=="function"?T.createElement(e.content,a):T.createElement(rC,a)}function ele(e,t,r,n,a,i){var{layout:o,align:l,verticalAlign:d}=t,c,u;return(!e||(e.left===void 0||e.left===null)&&(e.right===void 0||e.right===null))&&(l==="center"&&o==="vertical"?c={left:((n||0)-i.width)/2}:c=l==="right"?{right:r&&r.right||0}:{left:r&&r.left||0}),(!e||(e.top===void 0||e.top===null)&&(e.bottom===void 0||e.bottom===null))&&(d==="middle"?u={top:((a||0)-i.height)/2}:u=d==="bottom"?{bottom:r&&r.bottom||0}:{top:r&&r.top||0}),tp(tp({},c),u)}function tle(e){var t=Gs();return T.useEffect(()=>{t(Voe(e))},[t,e]),null}function rle(e){var t=Gs();return T.useEffect(()=>(t(cP(e)),()=>{t(cP({width:0,height:0}))}),[t,e]),null}function nle(e){var t=Vse(),r=Jne(),n=Hoe(),{width:a,height:i,wrapperStyle:o,portal:l}=e,[d,c]=Ez([t]),u=hC(),x=fC();if(u==null||x==null)return null;var b=u-(n.left||0)-(n.right||0),g=Vm.getWidthOrHeight(e.layout,i,a,b),k=l?o:tp(tp({position:"absolute",width:(g==null?void 0:g.width)||a||"auto",height:(g==null?void 0:g.height)||i||"auto"},ele(o,e,n,u,x,d)),o),y=l??r;if(y==null)return null;var N=T.createElement("div",{className:"recharts-legend-wrapper",style:k,ref:c},T.createElement(tle,{layout:e.layout,align:e.align,verticalAlign:e.verticalAlign,itemSorter:e.itemSorter}),T.createElement(rle,{width:d.width,height:d.height}),T.createElement(Joe,sj({},e,g,{margin:n,chartWidth:u,chartHeight:x,contextPayload:t})));return cB.createPortal(N,y)}class Vm extends T.PureComponent{static getWidthOrHeight(t,r,n,a){return t==="vertical"&&Qr(r)?{height:r}:t==="horizontal"?{width:n||a}:null}render(){return T.createElement(nle,this.props)}}mC(Vm,"displayName","Legend");mC(Vm,"defaultProps",{align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"});function ij(){return ij=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ij.apply(null,arguments)}function uP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function DN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?uP(Object(r),!0).forEach(function(n){ale(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ale(e,t,r){return(t=sle(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sle(e){var t=ile(e,"string");return typeof t=="symbol"?t:t+""}function ile(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ole(e){return Array.isArray(e)&&Gu(e[0])&&Gu(e[1])?e.join(" ~ "):e}var lle=e=>{var{separator:t=" : ",contentStyle:r={},itemStyle:n={},labelStyle:a={},payload:i,formatter:o,itemSorter:l,wrapperClassName:d,labelClassName:c,label:u,labelFormatter:x,accessibilityLayer:b=!1}=e,g=()=>{if(i&&i.length){var q={padding:0,margin:0},W=(l?Xk(i,l):i).map((R,U)=>{if(R.type==="none")return null;var L=R.formatter||o||ole,{value:Q,name:H}=R,G=Q,Z=H;if(L){var te=L(Q,H,R,U,i);if(Array.isArray(te))[G,Z]=te;else if(te!=null)G=te;else return null}var se=DN({display:"block",paddingTop:4,paddingBottom:4,color:R.color||"#000"},n);return T.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(U),style:se},Gu(Z)?T.createElement("span",{className:"recharts-tooltip-item-name"},Z):null,Gu(Z)?T.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,T.createElement("span",{className:"recharts-tooltip-item-value"},G),T.createElement("span",{className:"recharts-tooltip-item-unit"},R.unit||""))});return T.createElement("ul",{className:"recharts-tooltip-item-list",style:q},W)}return null},k=DN({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),y=DN({margin:0},a),N=!Is(u),S=N?u:"",O=Zn("recharts-default-tooltip",d),A=Zn("recharts-tooltip-label",c);N&&x&&i!==void 0&&i!==null&&(S=x(u,i));var P=b?{role:"status","aria-live":"assertive"}:{};return T.createElement("div",ij({className:O,style:k},P),T.createElement("p",{className:A,style:y},T.isValidElement(S)?S:"".concat(S)),g())},pg="recharts-tooltip-wrapper",cle={visibility:"hidden"};function dle(e){var{coordinate:t,translateX:r,translateY:n}=e;return Zn(pg,{["".concat(pg,"-right")]:Qr(r)&&t&&Qr(t.x)&&r>=t.x,["".concat(pg,"-left")]:Qr(r)&&t&&Qr(t.x)&&r<t.x,["".concat(pg,"-bottom")]:Qr(n)&&t&&Qr(t.y)&&n>=t.y,["".concat(pg,"-top")]:Qr(n)&&t&&Qr(t.y)&&n<t.y})}function hP(e){var{allowEscapeViewBox:t,coordinate:r,key:n,offsetTopLeft:a,position:i,reverseDirection:o,tooltipDimension:l,viewBox:d,viewBoxDimension:c}=e;if(i&&Qr(i[n]))return i[n];var u=r[n]-l-(a>0?a:0),x=r[n]+a;if(t[n])return o[n]?u:x;var b=d[n];if(b==null)return 0;if(o[n]){var g=u,k=b;return g<k?Math.max(x,b):Math.max(u,b)}if(c==null)return 0;var y=x+l,N=b+c;return y>N?Math.max(u,b):Math.max(x,b)}function ule(e){var{translateX:t,translateY:r,useTranslate3d:n}=e;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function hle(e){var{allowEscapeViewBox:t,coordinate:r,offsetTopLeft:n,position:a,reverseDirection:i,tooltipBox:o,useTranslate3d:l,viewBox:d}=e,c,u,x;return o.height>0&&o.width>0&&r?(u=hP({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:a,reverseDirection:i,tooltipDimension:o.width,viewBox:d,viewBoxDimension:d.width}),x=hP({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:a,reverseDirection:i,tooltipDimension:o.height,viewBox:d,viewBoxDimension:d.height}),c=ule({translateX:u,translateY:x,useTranslate3d:l})):c=cle,{cssProperties:c,cssClasses:dle({translateX:u,translateY:x,coordinate:r})}}function fP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function H2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?fP(Object(r),!0).forEach(function(n){oj(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function oj(e,t,r){return(t=fle(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fle(e){var t=mle(e,"string");return typeof t=="symbol"?t:t+""}function mle(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class xle extends T.PureComponent{constructor(){super(...arguments),oj(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),oj(this,"handleKeyDown",t=>{if(t.key==="Escape"){var r,n,a,i;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&r!==void 0?r:0,y:(a=(i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==null&&a!==void 0?a:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,r;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:r,animationDuration:n,animationEasing:a,children:i,coordinate:o,hasPayload:l,isAnimationActive:d,offset:c,position:u,reverseDirection:x,useTranslate3d:b,viewBox:g,wrapperStyle:k,lastBoundingBox:y,innerRef:N,hasPortalFromProps:S}=this.props,{cssClasses:O,cssProperties:A}=hle({allowEscapeViewBox:r,coordinate:o,offsetTopLeft:c,position:u,reverseDirection:x,tooltipBox:{height:y.height,width:y.width},useTranslate3d:b,viewBox:g}),P=S?{}:H2(H2({transition:d&&t?"transform ".concat(n,"ms ").concat(a):void 0},A),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&l?"visible":"hidden",position:"absolute",top:0,left:0}),q=H2(H2({},P),{},{visibility:!this.state.dismissed&&t&&l?"visible":"hidden"},k);return T.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:O,style:q,ref:N},i)}}var ple=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),uh={devToolsEnabled:!1,isSsr:ple()},gq=()=>tn(e=>e.rootProps.accessibilityLayer);function lj(){return lj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},lj.apply(null,arguments)}function mP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function xP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?mP(Object(r),!0).forEach(function(n){gle(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function gle(e,t,r){return(t=ble(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ble(e){var t=vle(e,"string");return typeof t=="symbol"?t:t+""}function vle(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var pP={curveBasisClosed:bae,curveBasisOpen:vae,curveBasis:gae,curveBumpX:nae,curveBumpY:aae,curveLinearClosed:yae,curveLinear:Gk,curveMonotoneX:wae,curveMonotoneY:kae,curveNatural:Nae,curveStep:_ae,curveStepAfter:jae,curveStepBefore:Sae},$2=e=>Wi(e.x)&&Wi(e.y),gg=e=>e.x,bg=e=>e.y,yle=(e,t)=>{if(typeof e=="function")return e;var r="curve".concat(ev(e));return(r==="curveMonotone"||r==="curveBump")&&t?pP["".concat(r).concat(t==="vertical"?"Y":"X")]:pP[r]||Gk},wle=e=>{var{type:t="linear",points:r=[],baseLine:n,layout:a,connectNulls:i=!1}=e,o=yle(t,a),l=i?r.filter($2):r,d;if(Array.isArray(n)){var c=i?n.filter(x=>$2(x)):n,u=l.map((x,b)=>xP(xP({},x),{},{base:c[b]}));return a==="vertical"?d=L2().y(bg).x1(gg).x0(x=>x.base.x):d=L2().x(gg).y1(bg).y0(x=>x.base.y),d.defined($2).curve(o),d(u)}return a==="vertical"&&Qr(n)?d=L2().y(bg).x1(gg).x0(n):Qr(n)?d=L2().x(gg).y1(bg).y0(n):d=ez().x(gg).y(bg),d.defined($2).curve(o),d(l)},C1=e=>{var{className:t,points:r,path:n,pathRef:a}=e;if((!r||!r.length)&&!n)return null;var i=r&&r.length?wle(e):n;return T.createElement("path",lj({},Il(e),eC(e),{className:Zn("recharts-curve",t),d:i===null?void 0:i,ref:a}))},kle=["x","y","top","left","width","height","className"];function cj(){return cj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},cj.apply(null,arguments)}function gP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Nle(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?gP(Object(r),!0).forEach(function(n){_le(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function _le(e,t,r){return(t=Sle(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Sle(e){var t=jle(e,"string");return typeof t=="symbol"?t:t+""}function jle(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Cle(e,t){if(e==null)return{};var r,n,a=Ale(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Ale(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Ele=(e,t,r,n,a,i)=>"M".concat(e,",").concat(a,"v").concat(n,"M").concat(i,",").concat(t,"h").concat(r),Tle=e=>{var{x:t=0,y:r=0,top:n=0,left:a=0,width:i=0,height:o=0,className:l}=e,d=Cle(e,kle),c=Nle({x:t,y:r,top:n,left:a,width:i,height:o},d);return!Qr(t)||!Qr(r)||!Qr(i)||!Qr(o)||!Qr(n)||!Qr(a)?null:T.createElement("path",cj({},Dl(c),{className:Zn("recharts-cross",l),d:Ele(t,r,i,o,n,a)}))};function Ole(e,t,r,n){var a=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-a:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-a,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function bP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ple(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?bP(Object(r),!0).forEach(function(n){Ile(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ile(e,t,r){return(t=Dle(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Dle(e){var t=Mle(e,"string");return typeof t=="symbol"?t:t+""}function Mle(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function io(e,t){var r=Ple({},e),n=t,a=Object.keys(t),i=a.reduce((o,l)=>(o[l]===void 0&&n[l]!==void 0&&(o[l]=n[l]),o),r);return i}function Lle(){}function Rle(e){return e!=null}function vP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function yP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?vP(Object(r),!0).forEach(function(n){Fle(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Fle(e,t,r){return(t=Ble(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ble(e){var t=Ule(e,"string");return typeof t=="symbol"?t:t+""}function Ule(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var zle=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),bq=(e,t,r)=>e.map(n=>"".concat(zle(n)," ").concat(t,"ms ").concat(r)).join(","),qle=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((r,n)=>r.filter(a=>n.includes(a))),bb=(e,t)=>Object.keys(t).reduce((r,n)=>yP(yP({},r),{},{[n]:e(n,t[n])}),{});function wP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Bo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?wP(Object(r),!0).forEach(function(n){Hle(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Hle(e,t,r){return(t=$le(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $le(e){var t=Vle(e,"string");return typeof t=="symbol"?t:t+""}function Vle(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Bw=(e,t,r)=>e+(t-e)*r,dj=e=>{var{from:t,to:r}=e;return t!==r},vq=(e,t,r)=>{var n=bb((a,i)=>{if(dj(i)){var[o,l]=e(i.from,i.to,i.velocity);return Bo(Bo({},i),{},{from:o,velocity:l})}return i},t);return r<1?bb((a,i)=>dj(i)?Bo(Bo({},i),{},{velocity:Bw(i.velocity,n[a].velocity,r),from:Bw(i.from,n[a].from,r)}):i,t):vq(e,n,r-1)};function Wle(e,t,r,n,a,i){var o,l=n.reduce((b,g)=>Bo(Bo({},b),{},{[g]:{from:e[g],velocity:0,to:t[g]}}),{}),d=()=>bb((b,g)=>g.from,l),c=()=>!Object.values(l).filter(dj).length,u=null,x=b=>{o||(o=b);var g=b-o,k=g/r.dt;l=vq(r,l,k),a(Bo(Bo(Bo({},e),t),d())),o=b,c()||(u=i.setTimeout(x))};return()=>(u=i.setTimeout(x),()=>{u()})}function Gle(e,t,r,n,a,i,o){var l=null,d=a.reduce((x,b)=>Bo(Bo({},x),{},{[b]:[e[b],t[b]]}),{}),c,u=x=>{c||(c=x);var b=(x-c)/n,g=bb((y,N)=>Bw(...N,r(b)),d);if(i(Bo(Bo(Bo({},e),t),g)),b<1)l=o.setTimeout(u);else{var k=bb((y,N)=>Bw(...N,r(1)),d);i(Bo(Bo(Bo({},e),t),k))}};return()=>(l=o.setTimeout(u),()=>{l()})}const Kle=(e,t,r,n,a,i)=>{var o=qle(e,t);return r.isStepper===!0?Wle(e,t,r,o,a,i):Gle(e,t,r,n,o,a,i)};var Uw=1e-4,yq=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],wq=(e,t)=>e.map((r,n)=>r*t**n).reduce((r,n)=>r+n),kP=(e,t)=>r=>{var n=yq(e,t);return wq(n,r)},Xle=(e,t)=>r=>{var n=yq(e,t),a=[...n.map((i,o)=>i*o).slice(1),0];return wq(a,r)},NP=function(){for(var t,r,n,a,i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];if(o.length===1)switch(o[0]){case"linear":[t,n,r,a]=[0,0,1,1];break;case"ease":[t,n,r,a]=[.25,.1,.25,1];break;case"ease-in":[t,n,r,a]=[.42,0,1,1];break;case"ease-out":[t,n,r,a]=[.42,0,.58,1];break;case"ease-in-out":[t,n,r,a]=[0,0,.58,1];break;default:{var d=o[0].split("(");d[0]==="cubic-bezier"&&d[1].split(")")[0].split(",").length===4&&([t,n,r,a]=d[1].split(")")[0].split(",").map(k=>parseFloat(k)))}}else o.length===4&&([t,n,r,a]=o);var c=kP(t,r),u=kP(n,a),x=Xle(t,r),b=k=>k>1?1:k<0?0:k,g=k=>{for(var y=k>1?1:k,N=y,S=0;S<8;++S){var O=c(N)-y,A=x(N);if(Math.abs(O-y)<Uw||A<Uw)return u(N);N=b(N-O/A)}return u(N)};return g.isStepper=!1,g},Yle=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:n=8,dt:a=17}=t,i=(o,l,d)=>{var c=-(o-l)*r,u=d*n,x=d+(c-u)*a/1e3,b=d*a/1e3+o;return Math.abs(b-l)<Uw&&Math.abs(x)<Uw?[l,0]:[b,x]};return i.isStepper=!0,i.dt=a,i},Qle=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return NP(e);case"spring":return Yle();default:if(e.split("(")[0]==="cubic-bezier")return NP(e)}return typeof e=="function"?e:null};function Zle(e){var t,r=()=>null,n=!1,a=null,i=o=>{if(!n){if(Array.isArray(o)){if(!o.length)return;var l=o,[d,...c]=l;if(typeof d=="number"){a=e.setTimeout(i.bind(null,c),d);return}i(d),a=e.setTimeout(i.bind(null,c));return}typeof o=="string"&&(t=o,r(t)),typeof o=="object"&&(t=o,r(t)),typeof o=="function"&&o()}};return{stop:()=>{n=!0},start:o=>{n=!1,a&&(a(),a=null),i(o)},subscribe:o=>(r=o,()=>{r=()=>null}),getTimeoutController:()=>e}}class Jle{setTimeout(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),a=null,i=o=>{o-n>=r?t(o):typeof requestAnimationFrame=="function"&&(a=requestAnimationFrame(i))};return a=requestAnimationFrame(i),()=>{cancelAnimationFrame(a)}}}function ece(){return Zle(new Jle)}var tce=T.createContext(ece);function rce(e,t){var r=T.useContext(tce);return T.useMemo(()=>t??r(e),[e,t,r])}var nce={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},_P={t:0},MN={t:1};function xp(e){var t=io(e,nce),{isActive:r,canBegin:n,duration:a,easing:i,begin:o,onAnimationEnd:l,onAnimationStart:d,children:c}=t,u=rce(t.animationId,t.animationManager),[x,b]=T.useState(r?_P:MN),g=T.useRef(null);return T.useEffect(()=>{r||b(MN)},[r]),T.useEffect(()=>{if(!r||!n)return Lle;var k=Kle(_P,MN,Qle(i),a,b,u.getTimeoutController()),y=()=>{g.current=k()};return u.start([d,o,y,a,l]),()=>{u.stop(),g.current&&g.current(),l()}},[r,n,a,i,o,d,l,u]),c(x.t)}function pp(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=T.useRef(mb(t)),n=T.useRef(e);return n.current!==e&&(r.current=mb(t),n.current=e),r.current}var ace=["radius"],sce=["radius"];function SP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function jP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?SP(Object(r),!0).forEach(function(n){ice(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):SP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ice(e,t,r){return(t=oce(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oce(e){var t=lce(e,"string");return typeof t=="symbol"?t:t+""}function lce(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function zw(){return zw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},zw.apply(null,arguments)}function CP(e,t){if(e==null)return{};var r,n,a=cce(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function cce(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var AP=(e,t,r,n,a)=>{var i=Math.min(Math.abs(r)/2,Math.abs(n)/2),o=n>=0?1:-1,l=r>=0?1:-1,d=n>=0&&r>=0||n<0&&r<0?1:0,c;if(i>0&&a instanceof Array){for(var u=[0,0,0,0],x=0,b=4;x<b;x++)u[x]=a[x]>i?i:a[x];c="M".concat(e,",").concat(t+o*u[0]),u[0]>0&&(c+="A ".concat(u[0],",").concat(u[0],",0,0,").concat(d,",").concat(e+l*u[0],",").concat(t)),c+="L ".concat(e+r-l*u[1],",").concat(t),u[1]>0&&(c+="A ".concat(u[1],",").concat(u[1],",0,0,").concat(d,`,
        `).concat(e+r,",").concat(t+o*u[1])),c+="L ".concat(e+r,",").concat(t+n-o*u[2]),u[2]>0&&(c+="A ".concat(u[2],",").concat(u[2],",0,0,").concat(d,`,
        `).concat(e+r-l*u[2],",").concat(t+n)),c+="L ".concat(e+l*u[3],",").concat(t+n),u[3]>0&&(c+="A ".concat(u[3],",").concat(u[3],",0,0,").concat(d,`,
        `).concat(e,",").concat(t+n-o*u[3])),c+="Z"}else if(i>0&&a===+a&&a>0){var g=Math.min(i,a);c="M ".concat(e,",").concat(t+o*g,`
            A `).concat(g,",").concat(g,",0,0,").concat(d,",").concat(e+l*g,",").concat(t,`
            L `).concat(e+r-l*g,",").concat(t,`
            A `).concat(g,",").concat(g,",0,0,").concat(d,",").concat(e+r,",").concat(t+o*g,`
            L `).concat(e+r,",").concat(t+n-o*g,`
            A `).concat(g,",").concat(g,",0,0,").concat(d,",").concat(e+r-l*g,",").concat(t+n,`
            L `).concat(e+l*g,",").concat(t+n,`
            A `).concat(g,",").concat(g,",0,0,").concat(d,",").concat(e,",").concat(t+n-o*g," Z")}else c="M ".concat(e,",").concat(t," h ").concat(r," v ").concat(n," h ").concat(-r," Z");return c},dce={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},kq=e=>{var t=io(e,dce),r=T.useRef(null),[n,a]=T.useState(-1);T.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var ae=r.current.getTotalLength();ae&&a(ae)}catch{}},[]);var{x:i,y:o,width:l,height:d,radius:c,className:u}=t,{animationEasing:x,animationDuration:b,animationBegin:g,isAnimationActive:k,isUpdateAnimationActive:y}=t,N=T.useRef(l),S=T.useRef(d),O=T.useRef(i),A=T.useRef(o),P=T.useMemo(()=>({x:i,y:o,width:l,height:d,radius:c}),[i,o,l,d,c]),q=pp(P,"rectangle-");if(i!==+i||o!==+o||l!==+l||d!==+d||l===0||d===0)return null;var W=Zn("recharts-rectangle",u);if(!y){var R=Dl(t),{radius:U}=R,L=CP(R,ace);return T.createElement("path",zw({},L,{radius:typeof c=="number"?c:void 0,className:W,d:AP(i,o,l,d,c)}))}var Q=N.current,H=S.current,G=O.current,Z=A.current,te="0px ".concat(n===-1?1:n,"px"),se="".concat(n,"px 0px"),ue=bq(["strokeDasharray"],b,typeof x=="string"?x:void 0);return T.createElement(xp,{animationId:q,key:q,canBegin:n>0,duration:b,easing:x,isActive:y,begin:g},ae=>{var pe=is(Q,l,ae),ve=is(H,d,ae),Pe=is(G,i,ae),xe=is(Z,o,ae);r.current&&(N.current=pe,S.current=ve,O.current=Pe,A.current=xe);var B;k?ae>0?B={transition:ue,strokeDasharray:se}:B={strokeDasharray:te}:B={strokeDasharray:se};var re=Dl(t),{radius:J}=re,ie=CP(re,sce);return T.createElement("path",zw({},ie,{radius:typeof c=="number"?c:void 0,className:W,d:AP(Pe,xe,pe,ve,c),ref:r,style:jP(jP({},B),t.style)}))})};function Nq(e){var{cx:t,cy:r,radius:n,startAngle:a,endAngle:i}=e,o=$i(t,r,n,a),l=$i(t,r,n,i);return{points:[o,l],cx:t,cy:r,radius:n,startAngle:a,endAngle:i}}function uj(){return uj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},uj.apply(null,arguments)}var uce=(e,t)=>{var r=Co(t-e),n=Math.min(Math.abs(t-e),359.999);return r*n},V2=e=>{var{cx:t,cy:r,radius:n,angle:a,sign:i,isExternal:o,cornerRadius:l,cornerIsExternal:d}=e,c=l*(o?1:-1)+n,u=Math.asin(l/c)/Lw,x=d?a:a+i*u,b=$i(t,r,c,x),g=$i(t,r,n,x),k=d?a-i*u:a,y=$i(t,r,c*Math.cos(u*Lw),k);return{center:b,circleTangency:g,lineTangency:y,theta:u}},_q=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:a,startAngle:i,endAngle:o}=e,l=uce(i,o),d=i+l,c=$i(t,r,a,i),u=$i(t,r,a,d),x="M ".concat(c.x,",").concat(c.y,`
    A `).concat(a,",").concat(a,`,0,
    `).concat(+(Math.abs(l)>180),",").concat(+(i>d),`,
    `).concat(u.x,",").concat(u.y,`
  `);if(n>0){var b=$i(t,r,n,i),g=$i(t,r,n,d);x+="L ".concat(g.x,",").concat(g.y,`
            A `).concat(n,",").concat(n,`,0,
            `).concat(+(Math.abs(l)>180),",").concat(+(i<=d),`,
            `).concat(b.x,",").concat(b.y," Z")}else x+="L ".concat(t,",").concat(r," Z");return x},hce=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:a,cornerRadius:i,forceCornerRadius:o,cornerIsExternal:l,startAngle:d,endAngle:c}=e,u=Co(c-d),{circleTangency:x,lineTangency:b,theta:g}=V2({cx:t,cy:r,radius:a,angle:d,sign:u,cornerRadius:i,cornerIsExternal:l}),{circleTangency:k,lineTangency:y,theta:N}=V2({cx:t,cy:r,radius:a,angle:c,sign:-u,cornerRadius:i,cornerIsExternal:l}),S=l?Math.abs(d-c):Math.abs(d-c)-g-N;if(S<0)return o?"M ".concat(b.x,",").concat(b.y,`
        a`).concat(i,",").concat(i,",0,0,1,").concat(i*2,`,0
        a`).concat(i,",").concat(i,",0,0,1,").concat(-i*2,`,0
      `):_q({cx:t,cy:r,innerRadius:n,outerRadius:a,startAngle:d,endAngle:c});var O="M ".concat(b.x,",").concat(b.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(u<0),",").concat(x.x,",").concat(x.y,`
    A`).concat(a,",").concat(a,",0,").concat(+(S>180),",").concat(+(u<0),",").concat(k.x,",").concat(k.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(u<0),",").concat(y.x,",").concat(y.y,`
  `);if(n>0){var{circleTangency:A,lineTangency:P,theta:q}=V2({cx:t,cy:r,radius:n,angle:d,sign:u,isExternal:!0,cornerRadius:i,cornerIsExternal:l}),{circleTangency:W,lineTangency:R,theta:U}=V2({cx:t,cy:r,radius:n,angle:c,sign:-u,isExternal:!0,cornerRadius:i,cornerIsExternal:l}),L=l?Math.abs(d-c):Math.abs(d-c)-q-U;if(L<0&&i===0)return"".concat(O,"L").concat(t,",").concat(r,"Z");O+="L".concat(R.x,",").concat(R.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(u<0),",").concat(W.x,",").concat(W.y,`
      A`).concat(n,",").concat(n,",0,").concat(+(L>180),",").concat(+(u>0),",").concat(A.x,",").concat(A.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(u<0),",").concat(P.x,",").concat(P.y,"Z")}else O+="L".concat(t,",").concat(r,"Z");return O},fce={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},Sq=e=>{var t=io(e,fce),{cx:r,cy:n,innerRadius:a,outerRadius:i,cornerRadius:o,forceCornerRadius:l,cornerIsExternal:d,startAngle:c,endAngle:u,className:x}=t;if(i<a||c===u)return null;var b=Zn("recharts-sector",x),g=i-a,k=dl(o,g,0,!0),y;return k>0&&Math.abs(c-u)<360?y=hce({cx:r,cy:n,innerRadius:a,outerRadius:i,cornerRadius:Math.min(k,g/2),forceCornerRadius:l,cornerIsExternal:d,startAngle:c,endAngle:u}):y=_q({cx:r,cy:n,innerRadius:a,outerRadius:i,startAngle:c,endAngle:u}),T.createElement("path",uj({},Dl(t),{className:b,d:y}))};function mce(e,t,r){var n,a,i,o;if(e==="horizontal")n=t.x,i=n,a=r.top,o=r.top+r.height;else if(e==="vertical")a=t.y,o=a,n=r.left,i=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var{cx:l,cy:d,innerRadius:c,outerRadius:u,angle:x}=t,b=$i(l,d,c,x),g=$i(l,d,u,x);n=b.x,a=b.y,i=g.x,o=g.y}else return Nq(t);return[{x:n,y:a},{x:i,y:o}]}var LN={},RN={},FN={},EP;function xce(){return EP||(EP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=jz();function r(n){return t.isSymbol(n)?NaN:Number(n)}e.toNumber=r})(FN)),FN}var TP;function pce(){return TP||(TP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=xce();function r(n){return n?(n=t.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}e.toFinite=r})(RN)),RN}var OP;function gce(){return OP||(OP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Cz(),r=pce();function n(a,i,o){o&&typeof o!="number"&&t.isIterateeCall(a,i,o)&&(i=o=void 0),a=r.toFinite(a),i===void 0?(i=a,a=0):i=r.toFinite(i),o=o===void 0?a<i?1:-1:r.toFinite(o);const l=Math.max(Math.ceil((i-a)/(o||1)),0),d=new Array(l);for(let c=0;c<l;c++)d[c]=a,a+=o;return d}e.range=n})(LN)),LN}var BN,PP;function bce(){return PP||(PP=1,BN=gce().range),BN}var vce=bce();const jq=zc(vce);function mf(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function yce(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function xC(e){let t,r,n;e.length!==2?(t=mf,r=(l,d)=>mf(e(l),d),n=(l,d)=>e(l)-d):(t=e===mf||e===yce?e:wce,r=e,n=e);function a(l,d,c=0,u=l.length){if(c<u){if(t(d,d)!==0)return u;do{const x=c+u>>>1;r(l[x],d)<0?c=x+1:u=x}while(c<u)}return c}function i(l,d,c=0,u=l.length){if(c<u){if(t(d,d)!==0)return u;do{const x=c+u>>>1;r(l[x],d)<=0?c=x+1:u=x}while(c<u)}return c}function o(l,d,c=0,u=l.length){const x=a(l,d,c,u-1);return x>c&&n(l[x-1],d)>-n(l[x],d)?x-1:x}return{left:a,center:o,right:i}}function wce(){return 0}function Cq(e){return e===null?NaN:+e}function*kce(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const Nce=xC(mf),iv=Nce.right;xC(Cq).center;class IP extends Map{constructor(t,r=jce){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,a]of t)this.set(n,a)}get(t){return super.get(DP(this,t))}has(t){return super.has(DP(this,t))}set(t,r){return super.set(_ce(this,t),r)}delete(t){return super.delete(Sce(this,t))}}function DP({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function _ce({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function Sce({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function jce(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Cce(e=mf){if(e===mf)return Aq;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function Aq(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const Ace=Math.sqrt(50),Ece=Math.sqrt(10),Tce=Math.sqrt(2);function qw(e,t,r){const n=(t-e)/Math.max(0,r),a=Math.floor(Math.log10(n)),i=n/Math.pow(10,a),o=i>=Ace?10:i>=Ece?5:i>=Tce?2:1;let l,d,c;return a<0?(c=Math.pow(10,-a)/o,l=Math.round(e*c),d=Math.round(t*c),l/c<e&&++l,d/c>t&&--d,c=-c):(c=Math.pow(10,a)*o,l=Math.round(e/c),d=Math.round(t/c),l*c<e&&++l,d*c>t&&--d),d<l&&.5<=r&&r<2?qw(e,t,r*2):[l,d,c]}function hj(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[a,i,o]=n?qw(t,e,r):qw(e,t,r);if(!(i>=a))return[];const l=i-a+1,d=new Array(l);if(n)if(o<0)for(let c=0;c<l;++c)d[c]=(i-c)/-o;else for(let c=0;c<l;++c)d[c]=(i-c)*o;else if(o<0)for(let c=0;c<l;++c)d[c]=(a+c)/-o;else for(let c=0;c<l;++c)d[c]=(a+c)*o;return d}function fj(e,t,r){return t=+t,e=+e,r=+r,qw(e,t,r)[2]}function mj(e,t,r){t=+t,e=+e,r=+r;const n=t<e,a=n?fj(t,e,r):fj(e,t,r);return(n?-1:1)*(a<0?1/-a:a)}function MP(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function LP(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function Eq(e,t,r=0,n=1/0,a){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(a=a===void 0?Aq:Cce(a);n>r;){if(n-r>600){const d=n-r+1,c=t-r+1,u=Math.log(d),x=.5*Math.exp(2*u/3),b=.5*Math.sqrt(u*x*(d-x)/d)*(c-d/2<0?-1:1),g=Math.max(r,Math.floor(t-c*x/d+b)),k=Math.min(n,Math.floor(t+(d-c)*x/d+b));Eq(e,t,g,k,a)}const i=e[t];let o=r,l=n;for(vg(e,r,t),a(e[n],i)>0&&vg(e,r,n);o<l;){for(vg(e,o,l),++o,--l;a(e[o],i)<0;)++o;for(;a(e[l],i)>0;)--l}a(e[r],i)===0?vg(e,r,l):(++l,vg(e,l,n)),l<=t&&(r=l+1),t<=l&&(n=l-1)}return e}function vg(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function Oce(e,t,r){if(e=Float64Array.from(kce(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return LP(e);if(t>=1)return MP(e);var n,a=(n-1)*t,i=Math.floor(a),o=MP(Eq(e,i).subarray(0,i+1)),l=LP(e.subarray(i+1));return o+(l-o)*(a-i)}}function Pce(e,t,r=Cq){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,a=(n-1)*t,i=Math.floor(a),o=+r(e[i],i,e),l=+r(e[i+1],i+1,e);return o+(l-o)*(a-i)}}function Ice(e,t,r){e=+e,t=+t,r=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+r;for(var n=-1,a=Math.max(0,Math.ceil((t-e)/r))|0,i=new Array(a);++n<a;)i[n]=e+n*r;return i}function Ad(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function hh(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const xj=Symbol("implicit");function pC(){var e=new IP,t=[],r=[],n=xj;function a(i){let o=e.get(i);if(o===void 0){if(n!==xj)return n;e.set(i,o=t.push(i)-1)}return r[o%r.length]}return a.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new IP;for(const o of i)e.has(o)||e.set(o,t.push(o)-1);return a},a.range=function(i){return arguments.length?(r=Array.from(i),a):r.slice()},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return pC(t,r).unknown(n)},Ad.apply(a,arguments),a}function gC(){var e=pC().unknown(void 0),t=e.domain,r=e.range,n=0,a=1,i,o,l=!1,d=0,c=0,u=.5;delete e.unknown;function x(){var b=t().length,g=a<n,k=g?a:n,y=g?n:a;i=(y-k)/Math.max(1,b-d+c*2),l&&(i=Math.floor(i)),k+=(y-k-i*(b-d))*u,o=i*(1-d),l&&(k=Math.round(k),o=Math.round(o));var N=Ice(b).map(function(S){return k+i*S});return r(g?N.reverse():N)}return e.domain=function(b){return arguments.length?(t(b),x()):t()},e.range=function(b){return arguments.length?([n,a]=b,n=+n,a=+a,x()):[n,a]},e.rangeRound=function(b){return[n,a]=b,n=+n,a=+a,l=!0,x()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(b){return arguments.length?(l=!!b,x()):l},e.padding=function(b){return arguments.length?(d=Math.min(1,c=+b),x()):d},e.paddingInner=function(b){return arguments.length?(d=Math.min(1,b),x()):d},e.paddingOuter=function(b){return arguments.length?(c=+b,x()):c},e.align=function(b){return arguments.length?(u=Math.max(0,Math.min(1,b)),x()):u},e.copy=function(){return gC(t(),[n,a]).round(l).paddingInner(d).paddingOuter(c).align(u)},Ad.apply(x(),arguments)}function Tq(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return Tq(t())},e}function Dce(){return Tq(gC.apply(null,arguments).paddingInner(1))}function bC(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function Oq(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function ov(){}var vb=.7,Hw=1/vb,A1="\\s*([+-]?\\d+)\\s*",yb="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Wu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Mce=/^#([0-9a-f]{3,8})$/,Lce=new RegExp(`^rgb\\(${A1},${A1},${A1}\\)$`),Rce=new RegExp(`^rgb\\(${Wu},${Wu},${Wu}\\)$`),Fce=new RegExp(`^rgba\\(${A1},${A1},${A1},${yb}\\)$`),Bce=new RegExp(`^rgba\\(${Wu},${Wu},${Wu},${yb}\\)$`),Uce=new RegExp(`^hsl\\(${yb},${Wu},${Wu}\\)$`),zce=new RegExp(`^hsla\\(${yb},${Wu},${Wu},${yb}\\)$`),RP={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};bC(ov,wb,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:FP,formatHex:FP,formatHex8:qce,formatHsl:Hce,formatRgb:BP,toString:BP});function FP(){return this.rgb().formatHex()}function qce(){return this.rgb().formatHex8()}function Hce(){return Pq(this).formatHsl()}function BP(){return this.rgb().formatRgb()}function wb(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=Mce.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?UP(t):r===3?new lc(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?W2(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?W2(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Lce.exec(e))?new lc(t[1],t[2],t[3],1):(t=Rce.exec(e))?new lc(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Fce.exec(e))?W2(t[1],t[2],t[3],t[4]):(t=Bce.exec(e))?W2(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Uce.exec(e))?HP(t[1],t[2]/100,t[3]/100,1):(t=zce.exec(e))?HP(t[1],t[2]/100,t[3]/100,t[4]):RP.hasOwnProperty(e)?UP(RP[e]):e==="transparent"?new lc(NaN,NaN,NaN,0):null}function UP(e){return new lc(e>>16&255,e>>8&255,e&255,1)}function W2(e,t,r,n){return n<=0&&(e=t=r=NaN),new lc(e,t,r,n)}function $ce(e){return e instanceof ov||(e=wb(e)),e?(e=e.rgb(),new lc(e.r,e.g,e.b,e.opacity)):new lc}function pj(e,t,r,n){return arguments.length===1?$ce(e):new lc(e,t,r,n??1)}function lc(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}bC(lc,pj,Oq(ov,{brighter(e){return e=e==null?Hw:Math.pow(Hw,e),new lc(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?vb:Math.pow(vb,e),new lc(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new lc(Sm(this.r),Sm(this.g),Sm(this.b),$w(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:zP,formatHex:zP,formatHex8:Vce,formatRgb:qP,toString:qP}));function zP(){return`#${cm(this.r)}${cm(this.g)}${cm(this.b)}`}function Vce(){return`#${cm(this.r)}${cm(this.g)}${cm(this.b)}${cm((isNaN(this.opacity)?1:this.opacity)*255)}`}function qP(){const e=$w(this.opacity);return`${e===1?"rgb(":"rgba("}${Sm(this.r)}, ${Sm(this.g)}, ${Sm(this.b)}${e===1?")":`, ${e})`}`}function $w(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Sm(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function cm(e){return e=Sm(e),(e<16?"0":"")+e.toString(16)}function HP(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new tu(e,t,r,n)}function Pq(e){if(e instanceof tu)return new tu(e.h,e.s,e.l,e.opacity);if(e instanceof ov||(e=wb(e)),!e)return new tu;if(e instanceof tu)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,a=Math.min(t,r,n),i=Math.max(t,r,n),o=NaN,l=i-a,d=(i+a)/2;return l?(t===i?o=(r-n)/l+(r<n)*6:r===i?o=(n-t)/l+2:o=(t-r)/l+4,l/=d<.5?i+a:2-i-a,o*=60):l=d>0&&d<1?0:o,new tu(o,l,d,e.opacity)}function Wce(e,t,r,n){return arguments.length===1?Pq(e):new tu(e,t,r,n??1)}function tu(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}bC(tu,Wce,Oq(ov,{brighter(e){return e=e==null?Hw:Math.pow(Hw,e),new tu(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?vb:Math.pow(vb,e),new tu(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,a=2*r-n;return new lc(UN(e>=240?e-240:e+120,a,n),UN(e,a,n),UN(e<120?e+240:e-120,a,n),this.opacity)},clamp(){return new tu($P(this.h),G2(this.s),G2(this.l),$w(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=$w(this.opacity);return`${e===1?"hsl(":"hsla("}${$P(this.h)}, ${G2(this.s)*100}%, ${G2(this.l)*100}%${e===1?")":`, ${e})`}`}}));function $P(e){return e=(e||0)%360,e<0?e+360:e}function G2(e){return Math.max(0,Math.min(1,e||0))}function UN(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const vC=e=>()=>e;function Gce(e,t){return function(r){return e+r*t}}function Kce(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function Xce(e){return(e=+e)==1?Iq:function(t,r){return r-t?Kce(t,r,e):vC(isNaN(t)?r:t)}}function Iq(e,t){var r=t-e;return r?Gce(e,r):vC(isNaN(e)?t:e)}const VP=(function e(t){var r=Xce(t);function n(a,i){var o=r((a=pj(a)).r,(i=pj(i)).r),l=r(a.g,i.g),d=r(a.b,i.b),c=Iq(a.opacity,i.opacity);return function(u){return a.r=o(u),a.g=l(u),a.b=d(u),a.opacity=c(u),a+""}}return n.gamma=e,n})(1);function Yce(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),a;return function(i){for(a=0;a<r;++a)n[a]=e[a]*(1-i)+t[a]*i;return n}}function Qce(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Zce(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,a=new Array(n),i=new Array(r),o;for(o=0;o<n;++o)a[o]=gp(e[o],t[o]);for(;o<r;++o)i[o]=t[o];return function(l){for(o=0;o<n;++o)i[o]=a[o](l);return i}}function Jce(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function Vw(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function ede(e,t){var r={},n={},a;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in e?r[a]=gp(e[a],t[a]):n[a]=t[a];return function(i){for(a in r)n[a]=r[a](i);return n}}var gj=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,zN=new RegExp(gj.source,"g");function tde(e){return function(){return e}}function rde(e){return function(t){return e(t)+""}}function nde(e,t){var r=gj.lastIndex=zN.lastIndex=0,n,a,i,o=-1,l=[],d=[];for(e=e+"",t=t+"";(n=gj.exec(e))&&(a=zN.exec(t));)(i=a.index)>r&&(i=t.slice(r,i),l[o]?l[o]+=i:l[++o]=i),(n=n[0])===(a=a[0])?l[o]?l[o]+=a:l[++o]=a:(l[++o]=null,d.push({i:o,x:Vw(n,a)})),r=zN.lastIndex;return r<t.length&&(i=t.slice(r),l[o]?l[o]+=i:l[++o]=i),l.length<2?d[0]?rde(d[0].x):tde(t):(t=d.length,function(c){for(var u=0,x;u<t;++u)l[(x=d[u]).i]=x.x(c);return l.join("")})}function gp(e,t){var r=typeof t,n;return t==null||r==="boolean"?vC(t):(r==="number"?Vw:r==="string"?(n=wb(t))?(t=n,VP):nde:t instanceof wb?VP:t instanceof Date?Jce:Qce(t)?Yce:Array.isArray(t)?Zce:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?ede:Vw)(e,t)}function yC(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function ade(e,t){t===void 0&&(t=e,e=gp);for(var r=0,n=t.length-1,a=t[0],i=new Array(n<0?0:n);r<n;)i[r]=e(a,a=t[++r]);return function(o){var l=Math.max(0,Math.min(n-1,Math.floor(o*=n)));return i[l](o-l)}}function sde(e){return function(){return e}}function Ww(e){return+e}var WP=[0,1];function Ol(e){return e}function bj(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:sde(isNaN(t)?NaN:.5)}function ide(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function ode(e,t,r){var n=e[0],a=e[1],i=t[0],o=t[1];return a<n?(n=bj(a,n),i=r(o,i)):(n=bj(n,a),i=r(i,o)),function(l){return i(n(l))}}function lde(e,t,r){var n=Math.min(e.length,t.length)-1,a=new Array(n),i=new Array(n),o=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<n;)a[o]=bj(e[o],e[o+1]),i[o]=r(t[o],t[o+1]);return function(l){var d=iv(e,l,1,n)-1;return i[d](a[d](l))}}function lv(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function o5(){var e=WP,t=WP,r=gp,n,a,i,o=Ol,l,d,c;function u(){var b=Math.min(e.length,t.length);return o!==Ol&&(o=ide(e[0],e[b-1])),l=b>2?lde:ode,d=c=null,x}function x(b){return b==null||isNaN(b=+b)?i:(d||(d=l(e.map(n),t,r)))(n(o(b)))}return x.invert=function(b){return o(a((c||(c=l(t,e.map(n),Vw)))(b)))},x.domain=function(b){return arguments.length?(e=Array.from(b,Ww),u()):e.slice()},x.range=function(b){return arguments.length?(t=Array.from(b),u()):t.slice()},x.rangeRound=function(b){return t=Array.from(b),r=yC,u()},x.clamp=function(b){return arguments.length?(o=b?!0:Ol,u()):o!==Ol},x.interpolate=function(b){return arguments.length?(r=b,u()):r},x.unknown=function(b){return arguments.length?(i=b,x):i},function(b,g){return n=b,a=g,u()}}function wC(){return o5()(Ol,Ol)}function cde(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Gw(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function rp(e){return e=Gw(Math.abs(e)),e?e[1]:NaN}function dde(e,t){return function(r,n){for(var a=r.length,i=[],o=0,l=e[0],d=0;a>0&&l>0&&(d+l+1>n&&(l=Math.max(1,n-d)),i.push(r.substring(a-=l,a+l)),!((d+=l+1)>n));)l=e[o=(o+1)%e.length];return i.reverse().join(t)}}function ude(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var hde=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function kb(e){if(!(t=hde.exec(e)))throw new Error("invalid format: "+e);var t;return new kC({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}kb.prototype=kC.prototype;function kC(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}kC.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function fde(e){e:for(var t=e.length,r=1,n=-1,a;r<t;++r)switch(e[r]){case".":n=a=r;break;case"0":n===0&&(n=r),a=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(a+1):e}var Dq;function mde(e,t){var r=Gw(e,t);if(!r)return e+"";var n=r[0],a=r[1],i=a-(Dq=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,o=n.length;return i===o?n:i>o?n+new Array(i-o+1).join("0"):i>0?n.slice(0,i)+"."+n.slice(i):"0."+new Array(1-i).join("0")+Gw(e,Math.max(0,t+i-1))[0]}function GP(e,t){var r=Gw(e,t);if(!r)return e+"";var n=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")}const KP={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:cde,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>GP(e*100,t),r:GP,s:mde,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function XP(e){return e}var YP=Array.prototype.map,QP=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function xde(e){var t=e.grouping===void 0||e.thousands===void 0?XP:dde(YP.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",a=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?XP:ude(YP.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"":e.minus+"",d=e.nan===void 0?"NaN":e.nan+"";function c(x){x=kb(x);var b=x.fill,g=x.align,k=x.sign,y=x.symbol,N=x.zero,S=x.width,O=x.comma,A=x.precision,P=x.trim,q=x.type;q==="n"?(O=!0,q="g"):KP[q]||(A===void 0&&(A=12),P=!0,q="g"),(N||b==="0"&&g==="=")&&(N=!0,b="0",g="=");var W=y==="$"?r:y==="#"&&/[boxX]/.test(q)?"0"+q.toLowerCase():"",R=y==="$"?n:/[%p]/.test(q)?o:"",U=KP[q],L=/[defgprs%]/.test(q);A=A===void 0?6:/[gprs]/.test(q)?Math.max(1,Math.min(21,A)):Math.max(0,Math.min(20,A));function Q(H){var G=W,Z=R,te,se,ue;if(q==="c")Z=U(H)+Z,H="";else{H=+H;var ae=H<0||1/H<0;if(H=isNaN(H)?d:U(Math.abs(H),A),P&&(H=fde(H)),ae&&+H==0&&k!=="+"&&(ae=!1),G=(ae?k==="("?k:l:k==="-"||k==="("?"":k)+G,Z=(q==="s"?QP[8+Dq/3]:"")+Z+(ae&&k==="("?")":""),L){for(te=-1,se=H.length;++te<se;)if(ue=H.charCodeAt(te),48>ue||ue>57){Z=(ue===46?a+H.slice(te+1):H.slice(te))+Z,H=H.slice(0,te);break}}}O&&!N&&(H=t(H,1/0));var pe=G.length+H.length+Z.length,ve=pe<S?new Array(S-pe+1).join(b):"";switch(O&&N&&(H=t(ve+H,ve.length?S-Z.length:1/0),ve=""),g){case"<":H=G+H+Z+ve;break;case"=":H=G+ve+H+Z;break;case"^":H=ve.slice(0,pe=ve.length>>1)+G+H+Z+ve.slice(pe);break;default:H=ve+G+H+Z;break}return i(H)}return Q.toString=function(){return x+""},Q}function u(x,b){var g=c((x=kb(x),x.type="f",x)),k=Math.max(-8,Math.min(8,Math.floor(rp(b)/3)))*3,y=Math.pow(10,-k),N=QP[8+k/3];return function(S){return g(y*S)+N}}return{format:c,formatPrefix:u}}var K2,NC,Mq;pde({thousands:",",grouping:[3],currency:["$",""]});function pde(e){return K2=xde(e),NC=K2.format,Mq=K2.formatPrefix,K2}function gde(e){return Math.max(0,-rp(Math.abs(e)))}function bde(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(rp(t)/3)))*3-rp(Math.abs(e)))}function vde(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,rp(t)-rp(e))+1}function Lq(e,t,r,n){var a=mj(e,t,r),i;switch(n=kb(n??",f"),n.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(i=bde(a,o))&&(n.precision=i),Mq(n,o)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(i=vde(a,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=i-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(i=gde(a))&&(n.precision=i-(n.type==="%")*2);break}}return NC(n)}function jf(e){var t=e.domain;return e.ticks=function(r){var n=t();return hj(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var a=t();return Lq(a[0],a[a.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),a=0,i=n.length-1,o=n[a],l=n[i],d,c,u=10;for(l<o&&(c=o,o=l,l=c,c=a,a=i,i=c);u-- >0;){if(c=fj(o,l,r),c===d)return n[a]=o,n[i]=l,t(n);if(c>0)o=Math.floor(o/c)*c,l=Math.ceil(l/c)*c;else if(c<0)o=Math.ceil(o*c)/c,l=Math.floor(l*c)/c;else break;d=c}return e},e}function Rq(){var e=wC();return e.copy=function(){return lv(e,Rq())},Ad.apply(e,arguments),jf(e)}function Fq(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,Ww),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return Fq(e).unknown(t)},e=arguments.length?Array.from(e,Ww):[0,1],jf(r)}function Bq(e,t){e=e.slice();var r=0,n=e.length-1,a=e[r],i=e[n],o;return i<a&&(o=r,r=n,n=o,o=a,a=i,i=o),e[r]=t.floor(a),e[n]=t.ceil(i),e}function ZP(e){return Math.log(e)}function JP(e){return Math.exp(e)}function yde(e){return-Math.log(-e)}function wde(e){return-Math.exp(-e)}function kde(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Nde(e){return e===10?kde:e===Math.E?Math.exp:t=>Math.pow(e,t)}function _de(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function eI(e){return(t,r)=>-e(-t,r)}function _C(e){const t=e(ZP,JP),r=t.domain;let n=10,a,i;function o(){return a=_de(n),i=Nde(n),r()[0]<0?(a=eI(a),i=eI(i),e(yde,wde)):e(ZP,JP),t}return t.base=function(l){return arguments.length?(n=+l,o()):n},t.domain=function(l){return arguments.length?(r(l),o()):r()},t.ticks=l=>{const d=r();let c=d[0],u=d[d.length-1];const x=u<c;x&&([c,u]=[u,c]);let b=a(c),g=a(u),k,y;const N=l==null?10:+l;let S=[];if(!(n%1)&&g-b<N){if(b=Math.floor(b),g=Math.ceil(g),c>0){for(;b<=g;++b)for(k=1;k<n;++k)if(y=b<0?k/i(-b):k*i(b),!(y<c)){if(y>u)break;S.push(y)}}else for(;b<=g;++b)for(k=n-1;k>=1;--k)if(y=b>0?k/i(-b):k*i(b),!(y<c)){if(y>u)break;S.push(y)}S.length*2<N&&(S=hj(c,u,N))}else S=hj(b,g,Math.min(g-b,N)).map(i);return x?S.reverse():S},t.tickFormat=(l,d)=>{if(l==null&&(l=10),d==null&&(d=n===10?"s":","),typeof d!="function"&&(!(n%1)&&(d=kb(d)).precision==null&&(d.trim=!0),d=NC(d)),l===1/0)return d;const c=Math.max(1,n*l/t.ticks().length);return u=>{let x=u/i(Math.round(a(u)));return x*n<n-.5&&(x*=n),x<=c?d(u):""}},t.nice=()=>r(Bq(r(),{floor:l=>i(Math.floor(a(l))),ceil:l=>i(Math.ceil(a(l)))})),t}function Uq(){const e=_C(o5()).domain([1,10]);return e.copy=()=>lv(e,Uq()).base(e.base()),Ad.apply(e,arguments),e}function tI(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function rI(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function SC(e){var t=1,r=e(tI(t),rI(t));return r.constant=function(n){return arguments.length?e(tI(t=+n),rI(t)):t},jf(r)}function zq(){var e=SC(o5());return e.copy=function(){return lv(e,zq()).constant(e.constant())},Ad.apply(e,arguments)}function nI(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Sde(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function jde(e){return e<0?-e*e:e*e}function jC(e){var t=e(Ol,Ol),r=1;function n(){return r===1?e(Ol,Ol):r===.5?e(Sde,jde):e(nI(r),nI(1/r))}return t.exponent=function(a){return arguments.length?(r=+a,n()):r},jf(t)}function CC(){var e=jC(o5());return e.copy=function(){return lv(e,CC()).exponent(e.exponent())},Ad.apply(e,arguments),e}function Cde(){return CC.apply(null,arguments).exponent(.5)}function aI(e){return Math.sign(e)*e*e}function Ade(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function qq(){var e=wC(),t=[0,1],r=!1,n;function a(i){var o=Ade(e(i));return isNaN(o)?n:r?Math.round(o):o}return a.invert=function(i){return e.invert(aI(i))},a.domain=function(i){return arguments.length?(e.domain(i),a):e.domain()},a.range=function(i){return arguments.length?(e.range((t=Array.from(i,Ww)).map(aI)),a):t.slice()},a.rangeRound=function(i){return a.range(i).round(!0)},a.round=function(i){return arguments.length?(r=!!i,a):r},a.clamp=function(i){return arguments.length?(e.clamp(i),a):e.clamp()},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return qq(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},Ad.apply(a,arguments),jf(a)}function Hq(){var e=[],t=[],r=[],n;function a(){var o=0,l=Math.max(1,t.length);for(r=new Array(l-1);++o<l;)r[o-1]=Pce(e,o/l);return i}function i(o){return o==null||isNaN(o=+o)?n:t[iv(r,o)]}return i.invertExtent=function(o){var l=t.indexOf(o);return l<0?[NaN,NaN]:[l>0?r[l-1]:e[0],l<r.length?r[l]:e[e.length-1]]},i.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let l of o)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(mf),a()},i.range=function(o){return arguments.length?(t=Array.from(o),a()):t.slice()},i.unknown=function(o){return arguments.length?(n=o,i):n},i.quantiles=function(){return r.slice()},i.copy=function(){return Hq().domain(e).range(t).unknown(n)},Ad.apply(i,arguments)}function $q(){var e=0,t=1,r=1,n=[.5],a=[0,1],i;function o(d){return d!=null&&d<=d?a[iv(n,d,0,r)]:i}function l(){var d=-1;for(n=new Array(r);++d<r;)n[d]=((d+1)*t-(d-r)*e)/(r+1);return o}return o.domain=function(d){return arguments.length?([e,t]=d,e=+e,t=+t,l()):[e,t]},o.range=function(d){return arguments.length?(r=(a=Array.from(d)).length-1,l()):a.slice()},o.invertExtent=function(d){var c=a.indexOf(d);return c<0?[NaN,NaN]:c<1?[e,n[0]]:c>=r?[n[r-1],t]:[n[c-1],n[c]]},o.unknown=function(d){return arguments.length&&(i=d),o},o.thresholds=function(){return n.slice()},o.copy=function(){return $q().domain([e,t]).range(a).unknown(i)},Ad.apply(jf(o),arguments)}function Vq(){var e=[.5],t=[0,1],r,n=1;function a(i){return i!=null&&i<=i?t[iv(e,i,0,n)]:r}return a.domain=function(i){return arguments.length?(e=Array.from(i),n=Math.min(e.length,t.length-1),a):e.slice()},a.range=function(i){return arguments.length?(t=Array.from(i),n=Math.min(e.length,t.length-1),a):t.slice()},a.invertExtent=function(i){var o=t.indexOf(i);return[e[o-1],e[o]]},a.unknown=function(i){return arguments.length?(r=i,a):r},a.copy=function(){return Vq().domain(e).range(t).unknown(r)},Ad.apply(a,arguments)}const qN=new Date,HN=new Date;function oo(e,t,r,n){function a(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return a.floor=i=>(e(i=new Date(+i)),i),a.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),a.round=i=>{const o=a(i),l=a.ceil(i);return i-o<l-i?o:l},a.offset=(i,o)=>(t(i=new Date(+i),o==null?1:Math.floor(o)),i),a.range=(i,o,l)=>{const d=[];if(i=a.ceil(i),l=l==null?1:Math.floor(l),!(i<o)||!(l>0))return d;let c;do d.push(c=new Date(+i)),t(i,l),e(i);while(c<i&&i<o);return d},a.filter=i=>oo(o=>{if(o>=o)for(;e(o),!i(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;t(o,-1),!i(o););else for(;--l>=0;)for(;t(o,1),!i(o););}),r&&(a.count=(i,o)=>(qN.setTime(+i),HN.setTime(+o),e(qN),e(HN),Math.floor(r(qN,HN))),a.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?a.filter(n?o=>n(o)%i===0:o=>a.count(0,o)%i===0):a)),a}const Kw=oo(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Kw.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?oo(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):Kw);Kw.range;const M0=1e3,bd=M0*60,L0=bd*60,nh=L0*24,AC=nh*7,sI=nh*30,$N=nh*365,dm=oo(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*M0)},(e,t)=>(t-e)/M0,e=>e.getUTCSeconds());dm.range;const EC=oo(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*M0)},(e,t)=>{e.setTime(+e+t*bd)},(e,t)=>(t-e)/bd,e=>e.getMinutes());EC.range;const TC=oo(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*bd)},(e,t)=>(t-e)/bd,e=>e.getUTCMinutes());TC.range;const OC=oo(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*M0-e.getMinutes()*bd)},(e,t)=>{e.setTime(+e+t*L0)},(e,t)=>(t-e)/L0,e=>e.getHours());OC.range;const PC=oo(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*L0)},(e,t)=>(t-e)/L0,e=>e.getUTCHours());PC.range;const cv=oo(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*bd)/nh,e=>e.getDate()-1);cv.range;const l5=oo(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/nh,e=>e.getUTCDate()-1);l5.range;const Wq=oo(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/nh,e=>Math.floor(e/nh));Wq.range;function lx(e){return oo(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*bd)/AC)}const c5=lx(0),Xw=lx(1),Ede=lx(2),Tde=lx(3),np=lx(4),Ode=lx(5),Pde=lx(6);c5.range;Xw.range;Ede.range;Tde.range;np.range;Ode.range;Pde.range;function cx(e){return oo(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/AC)}const d5=cx(0),Yw=cx(1),Ide=cx(2),Dde=cx(3),ap=cx(4),Mde=cx(5),Lde=cx(6);d5.range;Yw.range;Ide.range;Dde.range;ap.range;Mde.range;Lde.range;const IC=oo(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());IC.range;const DC=oo(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());DC.range;const ah=oo(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());ah.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:oo(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});ah.range;const sh=oo(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());sh.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:oo(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});sh.range;function Gq(e,t,r,n,a,i){const o=[[dm,1,M0],[dm,5,5*M0],[dm,15,15*M0],[dm,30,30*M0],[i,1,bd],[i,5,5*bd],[i,15,15*bd],[i,30,30*bd],[a,1,L0],[a,3,3*L0],[a,6,6*L0],[a,12,12*L0],[n,1,nh],[n,2,2*nh],[r,1,AC],[t,1,sI],[t,3,3*sI],[e,1,$N]];function l(c,u,x){const b=u<c;b&&([c,u]=[u,c]);const g=x&&typeof x.range=="function"?x:d(c,u,x),k=g?g.range(c,+u+1):[];return b?k.reverse():k}function d(c,u,x){const b=Math.abs(u-c)/x,g=xC(([,,N])=>N).right(o,b);if(g===o.length)return e.every(mj(c/$N,u/$N,x));if(g===0)return Kw.every(Math.max(mj(c,u,x),1));const[k,y]=o[b/o[g-1][2]<o[g][2]/b?g-1:g];return k.every(y)}return[l,d]}const[Rde,Fde]=Gq(sh,DC,d5,Wq,PC,TC),[Bde,Ude]=Gq(ah,IC,c5,cv,OC,EC);function VN(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function WN(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function yg(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function zde(e){var t=e.dateTime,r=e.date,n=e.time,a=e.periods,i=e.days,o=e.shortDays,l=e.months,d=e.shortMonths,c=wg(a),u=kg(a),x=wg(i),b=kg(i),g=wg(o),k=kg(o),y=wg(l),N=kg(l),S=wg(d),O=kg(d),A={a:ae,A:pe,b:ve,B:Pe,c:null,d:uI,e:uI,f:due,g:yue,G:kue,H:oue,I:lue,j:cue,L:Kq,m:uue,M:hue,p:xe,q:B,Q:mI,s:xI,S:fue,u:mue,U:xue,V:pue,w:gue,W:bue,x:null,X:null,y:vue,Y:wue,Z:Nue,"%":fI},P={a:re,A:J,b:ie,B:Y,c:null,d:hI,e:hI,f:Cue,g:Rue,G:Bue,H:_ue,I:Sue,j:jue,L:Yq,m:Aue,M:Eue,p:_e,q:me,Q:mI,s:xI,S:Tue,u:Oue,U:Pue,V:Iue,w:Due,W:Mue,x:null,X:null,y:Lue,Y:Fue,Z:Uue,"%":fI},q={a:Q,A:H,b:G,B:Z,c:te,d:cI,e:cI,f:nue,g:lI,G:oI,H:dI,I:dI,j:Jde,L:rue,m:Zde,M:eue,p:L,q:Qde,Q:sue,s:iue,S:tue,u:Wde,U:Gde,V:Kde,w:Vde,W:Xde,x:se,X:ue,y:lI,Y:oI,Z:Yde,"%":aue};A.x=W(r,A),A.X=W(n,A),A.c=W(t,A),P.x=W(r,P),P.X=W(n,P),P.c=W(t,P);function W(ne,je){return function(De){var ce=[],Ee=-1,be=0,ge=ne.length,Qe,Ye,at;for(De instanceof Date||(De=new Date(+De));++Ee<ge;)ne.charCodeAt(Ee)===37&&(ce.push(ne.slice(be,Ee)),(Ye=iI[Qe=ne.charAt(++Ee)])!=null?Qe=ne.charAt(++Ee):Ye=Qe==="e"?" ":"0",(at=je[Qe])&&(Qe=at(De,Ye)),ce.push(Qe),be=Ee+1);return ce.push(ne.slice(be,Ee)),ce.join("")}}function R(ne,je){return function(De){var ce=yg(1900,void 0,1),Ee=U(ce,ne,De+="",0),be,ge;if(Ee!=De.length)return null;if("Q"in ce)return new Date(ce.Q);if("s"in ce)return new Date(ce.s*1e3+("L"in ce?ce.L:0));if(je&&!("Z"in ce)&&(ce.Z=0),"p"in ce&&(ce.H=ce.H%12+ce.p*12),ce.m===void 0&&(ce.m="q"in ce?ce.q:0),"V"in ce){if(ce.V<1||ce.V>53)return null;"w"in ce||(ce.w=1),"Z"in ce?(be=WN(yg(ce.y,0,1)),ge=be.getUTCDay(),be=ge>4||ge===0?Yw.ceil(be):Yw(be),be=l5.offset(be,(ce.V-1)*7),ce.y=be.getUTCFullYear(),ce.m=be.getUTCMonth(),ce.d=be.getUTCDate()+(ce.w+6)%7):(be=VN(yg(ce.y,0,1)),ge=be.getDay(),be=ge>4||ge===0?Xw.ceil(be):Xw(be),be=cv.offset(be,(ce.V-1)*7),ce.y=be.getFullYear(),ce.m=be.getMonth(),ce.d=be.getDate()+(ce.w+6)%7)}else("W"in ce||"U"in ce)&&("w"in ce||(ce.w="u"in ce?ce.u%7:"W"in ce?1:0),ge="Z"in ce?WN(yg(ce.y,0,1)).getUTCDay():VN(yg(ce.y,0,1)).getDay(),ce.m=0,ce.d="W"in ce?(ce.w+6)%7+ce.W*7-(ge+5)%7:ce.w+ce.U*7-(ge+6)%7);return"Z"in ce?(ce.H+=ce.Z/100|0,ce.M+=ce.Z%100,WN(ce)):VN(ce)}}function U(ne,je,De,ce){for(var Ee=0,be=je.length,ge=De.length,Qe,Ye;Ee<be;){if(ce>=ge)return-1;if(Qe=je.charCodeAt(Ee++),Qe===37){if(Qe=je.charAt(Ee++),Ye=q[Qe in iI?je.charAt(Ee++):Qe],!Ye||(ce=Ye(ne,De,ce))<0)return-1}else if(Qe!=De.charCodeAt(ce++))return-1}return ce}function L(ne,je,De){var ce=c.exec(je.slice(De));return ce?(ne.p=u.get(ce[0].toLowerCase()),De+ce[0].length):-1}function Q(ne,je,De){var ce=g.exec(je.slice(De));return ce?(ne.w=k.get(ce[0].toLowerCase()),De+ce[0].length):-1}function H(ne,je,De){var ce=x.exec(je.slice(De));return ce?(ne.w=b.get(ce[0].toLowerCase()),De+ce[0].length):-1}function G(ne,je,De){var ce=S.exec(je.slice(De));return ce?(ne.m=O.get(ce[0].toLowerCase()),De+ce[0].length):-1}function Z(ne,je,De){var ce=y.exec(je.slice(De));return ce?(ne.m=N.get(ce[0].toLowerCase()),De+ce[0].length):-1}function te(ne,je,De){return U(ne,t,je,De)}function se(ne,je,De){return U(ne,r,je,De)}function ue(ne,je,De){return U(ne,n,je,De)}function ae(ne){return o[ne.getDay()]}function pe(ne){return i[ne.getDay()]}function ve(ne){return d[ne.getMonth()]}function Pe(ne){return l[ne.getMonth()]}function xe(ne){return a[+(ne.getHours()>=12)]}function B(ne){return 1+~~(ne.getMonth()/3)}function re(ne){return o[ne.getUTCDay()]}function J(ne){return i[ne.getUTCDay()]}function ie(ne){return d[ne.getUTCMonth()]}function Y(ne){return l[ne.getUTCMonth()]}function _e(ne){return a[+(ne.getUTCHours()>=12)]}function me(ne){return 1+~~(ne.getUTCMonth()/3)}return{format:function(ne){var je=W(ne+="",A);return je.toString=function(){return ne},je},parse:function(ne){var je=R(ne+="",!1);return je.toString=function(){return ne},je},utcFormat:function(ne){var je=W(ne+="",P);return je.toString=function(){return ne},je},utcParse:function(ne){var je=R(ne+="",!0);return je.toString=function(){return ne},je}}}var iI={"-":"",_:" ",0:"0"},Eo=/^\s*\d+/,qde=/^%/,Hde=/[\\^$*+?|[\]().{}]/g;function Ba(e,t,r){var n=e<0?"-":"",a=(n?-e:e)+"",i=a.length;return n+(i<r?new Array(r-i+1).join(t)+a:a)}function $de(e){return e.replace(Hde,"\\$&")}function wg(e){return new RegExp("^(?:"+e.map($de).join("|")+")","i")}function kg(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function Vde(e,t,r){var n=Eo.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function Wde(e,t,r){var n=Eo.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function Gde(e,t,r){var n=Eo.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function Kde(e,t,r){var n=Eo.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function Xde(e,t,r){var n=Eo.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function oI(e,t,r){var n=Eo.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function lI(e,t,r){var n=Eo.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function Yde(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function Qde(e,t,r){var n=Eo.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function Zde(e,t,r){var n=Eo.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function cI(e,t,r){var n=Eo.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function Jde(e,t,r){var n=Eo.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function dI(e,t,r){var n=Eo.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function eue(e,t,r){var n=Eo.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function tue(e,t,r){var n=Eo.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function rue(e,t,r){var n=Eo.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function nue(e,t,r){var n=Eo.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function aue(e,t,r){var n=qde.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function sue(e,t,r){var n=Eo.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function iue(e,t,r){var n=Eo.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function uI(e,t){return Ba(e.getDate(),t,2)}function oue(e,t){return Ba(e.getHours(),t,2)}function lue(e,t){return Ba(e.getHours()%12||12,t,2)}function cue(e,t){return Ba(1+cv.count(ah(e),e),t,3)}function Kq(e,t){return Ba(e.getMilliseconds(),t,3)}function due(e,t){return Kq(e,t)+"000"}function uue(e,t){return Ba(e.getMonth()+1,t,2)}function hue(e,t){return Ba(e.getMinutes(),t,2)}function fue(e,t){return Ba(e.getSeconds(),t,2)}function mue(e){var t=e.getDay();return t===0?7:t}function xue(e,t){return Ba(c5.count(ah(e)-1,e),t,2)}function Xq(e){var t=e.getDay();return t>=4||t===0?np(e):np.ceil(e)}function pue(e,t){return e=Xq(e),Ba(np.count(ah(e),e)+(ah(e).getDay()===4),t,2)}function gue(e){return e.getDay()}function bue(e,t){return Ba(Xw.count(ah(e)-1,e),t,2)}function vue(e,t){return Ba(e.getFullYear()%100,t,2)}function yue(e,t){return e=Xq(e),Ba(e.getFullYear()%100,t,2)}function wue(e,t){return Ba(e.getFullYear()%1e4,t,4)}function kue(e,t){var r=e.getDay();return e=r>=4||r===0?np(e):np.ceil(e),Ba(e.getFullYear()%1e4,t,4)}function Nue(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Ba(t/60|0,"0",2)+Ba(t%60,"0",2)}function hI(e,t){return Ba(e.getUTCDate(),t,2)}function _ue(e,t){return Ba(e.getUTCHours(),t,2)}function Sue(e,t){return Ba(e.getUTCHours()%12||12,t,2)}function jue(e,t){return Ba(1+l5.count(sh(e),e),t,3)}function Yq(e,t){return Ba(e.getUTCMilliseconds(),t,3)}function Cue(e,t){return Yq(e,t)+"000"}function Aue(e,t){return Ba(e.getUTCMonth()+1,t,2)}function Eue(e,t){return Ba(e.getUTCMinutes(),t,2)}function Tue(e,t){return Ba(e.getUTCSeconds(),t,2)}function Oue(e){var t=e.getUTCDay();return t===0?7:t}function Pue(e,t){return Ba(d5.count(sh(e)-1,e),t,2)}function Qq(e){var t=e.getUTCDay();return t>=4||t===0?ap(e):ap.ceil(e)}function Iue(e,t){return e=Qq(e),Ba(ap.count(sh(e),e)+(sh(e).getUTCDay()===4),t,2)}function Due(e){return e.getUTCDay()}function Mue(e,t){return Ba(Yw.count(sh(e)-1,e),t,2)}function Lue(e,t){return Ba(e.getUTCFullYear()%100,t,2)}function Rue(e,t){return e=Qq(e),Ba(e.getUTCFullYear()%100,t,2)}function Fue(e,t){return Ba(e.getUTCFullYear()%1e4,t,4)}function Bue(e,t){var r=e.getUTCDay();return e=r>=4||r===0?ap(e):ap.ceil(e),Ba(e.getUTCFullYear()%1e4,t,4)}function Uue(){return"+0000"}function fI(){return"%"}function mI(e){return+e}function xI(e){return Math.floor(+e/1e3)}var r1,Zq,Jq;zue({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function zue(e){return r1=zde(e),Zq=r1.format,r1.parse,Jq=r1.utcFormat,r1.utcParse,r1}function que(e){return new Date(e)}function Hue(e){return e instanceof Date?+e:+new Date(+e)}function MC(e,t,r,n,a,i,o,l,d,c){var u=wC(),x=u.invert,b=u.domain,g=c(".%L"),k=c(":%S"),y=c("%I:%M"),N=c("%I %p"),S=c("%a %d"),O=c("%b %d"),A=c("%B"),P=c("%Y");function q(W){return(d(W)<W?g:l(W)<W?k:o(W)<W?y:i(W)<W?N:n(W)<W?a(W)<W?S:O:r(W)<W?A:P)(W)}return u.invert=function(W){return new Date(x(W))},u.domain=function(W){return arguments.length?b(Array.from(W,Hue)):b().map(que)},u.ticks=function(W){var R=b();return e(R[0],R[R.length-1],W??10)},u.tickFormat=function(W,R){return R==null?q:c(R)},u.nice=function(W){var R=b();return(!W||typeof W.range!="function")&&(W=t(R[0],R[R.length-1],W??10)),W?b(Bq(R,W)):u},u.copy=function(){return lv(u,MC(e,t,r,n,a,i,o,l,d,c))},u}function $ue(){return Ad.apply(MC(Bde,Ude,ah,IC,c5,cv,OC,EC,dm,Zq).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Vue(){return Ad.apply(MC(Rde,Fde,sh,DC,d5,l5,PC,TC,dm,Jq).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function u5(){var e=0,t=1,r,n,a,i,o=Ol,l=!1,d;function c(x){return x==null||isNaN(x=+x)?d:o(a===0?.5:(x=(i(x)-r)*a,l?Math.max(0,Math.min(1,x)):x))}c.domain=function(x){return arguments.length?([e,t]=x,r=i(e=+e),n=i(t=+t),a=r===n?0:1/(n-r),c):[e,t]},c.clamp=function(x){return arguments.length?(l=!!x,c):l},c.interpolator=function(x){return arguments.length?(o=x,c):o};function u(x){return function(b){var g,k;return arguments.length?([g,k]=b,o=x(g,k),c):[o(0),o(1)]}}return c.range=u(gp),c.rangeRound=u(yC),c.unknown=function(x){return arguments.length?(d=x,c):d},function(x){return i=x,r=x(e),n=x(t),a=r===n?0:1/(n-r),c}}function Cf(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function eH(){var e=jf(u5()(Ol));return e.copy=function(){return Cf(e,eH())},hh.apply(e,arguments)}function tH(){var e=_C(u5()).domain([1,10]);return e.copy=function(){return Cf(e,tH()).base(e.base())},hh.apply(e,arguments)}function rH(){var e=SC(u5());return e.copy=function(){return Cf(e,rH()).constant(e.constant())},hh.apply(e,arguments)}function LC(){var e=jC(u5());return e.copy=function(){return Cf(e,LC()).exponent(e.exponent())},hh.apply(e,arguments)}function Wue(){return LC.apply(null,arguments).exponent(.5)}function nH(){var e=[],t=Ol;function r(n){if(n!=null&&!isNaN(n=+n))return t((iv(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let a of n)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(mf),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,a)=>t(a/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(a,i)=>Oce(e,i/n))},r.copy=function(){return nH(t).domain(e)},hh.apply(r,arguments)}function h5(){var e=0,t=.5,r=1,n=1,a,i,o,l,d,c=Ol,u,x=!1,b;function g(y){return isNaN(y=+y)?b:(y=.5+((y=+u(y))-i)*(n*y<n*i?l:d),c(x?Math.max(0,Math.min(1,y)):y))}g.domain=function(y){return arguments.length?([e,t,r]=y,a=u(e=+e),i=u(t=+t),o=u(r=+r),l=a===i?0:.5/(i-a),d=i===o?0:.5/(o-i),n=i<a?-1:1,g):[e,t,r]},g.clamp=function(y){return arguments.length?(x=!!y,g):x},g.interpolator=function(y){return arguments.length?(c=y,g):c};function k(y){return function(N){var S,O,A;return arguments.length?([S,O,A]=N,c=ade(y,[S,O,A]),g):[c(0),c(.5),c(1)]}}return g.range=k(gp),g.rangeRound=k(yC),g.unknown=function(y){return arguments.length?(b=y,g):b},function(y){return u=y,a=y(e),i=y(t),o=y(r),l=a===i?0:.5/(i-a),d=i===o?0:.5/(o-i),n=i<a?-1:1,g}}function aH(){var e=jf(h5()(Ol));return e.copy=function(){return Cf(e,aH())},hh.apply(e,arguments)}function sH(){var e=_C(h5()).domain([.1,1,10]);return e.copy=function(){return Cf(e,sH()).base(e.base())},hh.apply(e,arguments)}function iH(){var e=SC(h5());return e.copy=function(){return Cf(e,iH()).constant(e.constant())},hh.apply(e,arguments)}function RC(){var e=jC(h5());return e.copy=function(){return Cf(e,RC()).exponent(e.exponent())},hh.apply(e,arguments)}function Gue(){return RC.apply(null,arguments).exponent(.5)}const Rg=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:gC,scaleDiverging:aH,scaleDivergingLog:sH,scaleDivergingPow:RC,scaleDivergingSqrt:Gue,scaleDivergingSymlog:iH,scaleIdentity:Fq,scaleImplicit:xj,scaleLinear:Rq,scaleLog:Uq,scaleOrdinal:pC,scalePoint:Dce,scalePow:CC,scaleQuantile:Hq,scaleQuantize:$q,scaleRadial:qq,scaleSequential:eH,scaleSequentialLog:tH,scaleSequentialPow:LC,scaleSequentialQuantile:nH,scaleSequentialSqrt:Wue,scaleSequentialSymlog:rH,scaleSqrt:Cde,scaleSymlog:zq,scaleThreshold:Vq,scaleTime:$ue,scaleUtc:Vue,tickFormat:Lq},Symbol.toStringTag,{value:"Module"}));var Af=e=>e.chartData,FC=jt([Af],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),dv=(e,t,r,n)=>n?FC(e):Af(e);function Wm(e){if(Array.isArray(e)&&e.length===2){var[t,r]=e;if(Wi(t)&&Wi(r))return!0}return!1}function pI(e,t,r){return r?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function oH(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[r,n]=e,a,i;if(Wi(r))a=r;else if(typeof r=="function")return;if(Wi(n))i=n;else if(typeof n=="function")return;var o=[a,i];if(Wm(o))return o}}function Kue(e,t,r){if(!(!r&&t==null)){if(typeof e=="function"&&t!=null)try{var n=e(t,r);if(Wm(n))return pI(n,t,r)}catch{}if(Array.isArray(e)&&e.length===2){var[a,i]=e,o,l;if(a==="auto")t!=null&&(o=Math.min(...t));else if(Qr(a))o=a;else if(typeof a=="function")try{t!=null&&(o=a(t==null?void 0:t[0]))}catch{}else if(typeof a=="string"&&J9.test(a)){var d=J9.exec(a);if(d==null||t==null)o=void 0;else{var c=+d[1];o=t[0]-c}}else o=t==null?void 0:t[0];if(i==="auto")t!=null&&(l=Math.max(...t));else if(Qr(i))l=i;else if(typeof i=="function")try{t!=null&&(l=i(t==null?void 0:t[1]))}catch{}else if(typeof i=="string"&&eP.test(i)){var u=eP.exec(i);if(u==null||t==null)l=void 0;else{var x=+u[1];l=t[1]+x}}else l=t==null?void 0:t[1];var b=[o,l];if(Wm(b))return t==null?b:pI(b,t,r)}}}var bp=1e9,Xue={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},UC,$s=!0,_d="[DecimalError] ",jm=_d+"Invalid argument: ",BC=_d+"Exponent out of range: ",vp=Math.floor,em=Math.pow,Yue=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Pc,No=1e7,Ts=7,lH=9007199254740991,Qw=vp(lH/Ts),Vr={};Vr.absoluteValue=Vr.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Vr.comparedTo=Vr.cmp=function(e){var t,r,n,a,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(n=i.d.length,a=e.d.length,t=0,r=n<a?n:a;t<r;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return n===a?0:n>a^i.s<0?1:-1};Vr.decimalPlaces=Vr.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*Ts;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};Vr.dividedBy=Vr.div=function(e){return $0(this,new this.constructor(e))};Vr.dividedToIntegerBy=Vr.idiv=function(e){var t=this,r=t.constructor;return xs($0(t,new r(e),0,1),r.precision)};Vr.equals=Vr.eq=function(e){return!this.cmp(e)};Vr.exponent=function(){return Vi(this)};Vr.greaterThan=Vr.gt=function(e){return this.cmp(e)>0};Vr.greaterThanOrEqualTo=Vr.gte=function(e){return this.cmp(e)>=0};Vr.isInteger=Vr.isint=function(){return this.e>this.d.length-2};Vr.isNegative=Vr.isneg=function(){return this.s<0};Vr.isPositive=Vr.ispos=function(){return this.s>0};Vr.isZero=function(){return this.s===0};Vr.lessThan=Vr.lt=function(e){return this.cmp(e)<0};Vr.lessThanOrEqualTo=Vr.lte=function(e){return this.cmp(e)<1};Vr.logarithm=Vr.log=function(e){var t,r=this,n=r.constructor,a=n.precision,i=a+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(Pc))throw Error(_d+"NaN");if(r.s<1)throw Error(_d+(r.s?"NaN":"-Infinity"));return r.eq(Pc)?new n(0):($s=!1,t=$0(Nb(r,i),Nb(e,i),i),$s=!0,xs(t,a))};Vr.minus=Vr.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?uH(t,e):cH(t,(e.s=-e.s,e))};Vr.modulo=Vr.mod=function(e){var t,r=this,n=r.constructor,a=n.precision;if(e=new n(e),!e.s)throw Error(_d+"NaN");return r.s?($s=!1,t=$0(r,e,0,1).times(e),$s=!0,r.minus(t)):xs(new n(r),a)};Vr.naturalExponential=Vr.exp=function(){return dH(this)};Vr.naturalLogarithm=Vr.ln=function(){return Nb(this)};Vr.negated=Vr.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Vr.plus=Vr.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?cH(t,e):uH(t,(e.s=-e.s,e))};Vr.precision=Vr.sd=function(e){var t,r,n,a=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(jm+e);if(t=Vi(a)+1,n=a.d.length-1,r=n*Ts+1,n=a.d[n],n){for(;n%10==0;n/=10)r--;for(n=a.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};Vr.squareRoot=Vr.sqrt=function(){var e,t,r,n,a,i,o,l=this,d=l.constructor;if(l.s<1){if(!l.s)return new d(0);throw Error(_d+"NaN")}for(e=Vi(l),$s=!1,a=Math.sqrt(+l),a==0||a==1/0?(t=Uu(l.d),(t.length+e)%2==0&&(t+="0"),a=Math.sqrt(t),e=vp((e+1)/2)-(e<0||e%2),a==1/0?t="5e"+e:(t=a.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new d(t)):n=new d(a.toString()),r=d.precision,a=o=r+3;;)if(i=n,n=i.plus($0(l,i,o+2)).times(.5),Uu(i.d).slice(0,o)===(t=Uu(n.d)).slice(0,o)){if(t=t.slice(o-3,o+1),a==o&&t=="4999"){if(xs(i,r+1,0),i.times(i).eq(l)){n=i;break}}else if(t!="9999")break;o+=4}return $s=!0,xs(n,r)};Vr.times=Vr.mul=function(e){var t,r,n,a,i,o,l,d,c,u=this,x=u.constructor,b=u.d,g=(e=new x(e)).d;if(!u.s||!e.s)return new x(0);for(e.s*=u.s,r=u.e+e.e,d=b.length,c=g.length,d<c&&(i=b,b=g,g=i,o=d,d=c,c=o),i=[],o=d+c,n=o;n--;)i.push(0);for(n=c;--n>=0;){for(t=0,a=d+n;a>n;)l=i[a]+g[n]*b[a-n-1]+t,i[a--]=l%No|0,t=l/No|0;i[a]=(i[a]+t)%No|0}for(;!i[--o];)i.pop();return t?++r:i.shift(),e.d=i,e.e=r,$s?xs(e,x.precision):e};Vr.toDecimalPlaces=Vr.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(Ku(e,0,bp),t===void 0?t=n.rounding:Ku(t,0,8),xs(r,e+Vi(r)+1,t))};Vr.toExponential=function(e,t){var r,n=this,a=n.constructor;return e===void 0?r=Gm(n,!0):(Ku(e,0,bp),t===void 0?t=a.rounding:Ku(t,0,8),n=xs(new a(n),e+1,t),r=Gm(n,!0,e+1)),r};Vr.toFixed=function(e,t){var r,n,a=this,i=a.constructor;return e===void 0?Gm(a):(Ku(e,0,bp),t===void 0?t=i.rounding:Ku(t,0,8),n=xs(new i(a),e+Vi(a)+1,t),r=Gm(n.abs(),!1,e+Vi(n)+1),a.isneg()&&!a.isZero()?"-"+r:r)};Vr.toInteger=Vr.toint=function(){var e=this,t=e.constructor;return xs(new t(e),Vi(e)+1,t.rounding)};Vr.toNumber=function(){return+this};Vr.toPower=Vr.pow=function(e){var t,r,n,a,i,o,l=this,d=l.constructor,c=12,u=+(e=new d(e));if(!e.s)return new d(Pc);if(l=new d(l),!l.s){if(e.s<1)throw Error(_d+"Infinity");return l}if(l.eq(Pc))return l;if(n=d.precision,e.eq(Pc))return xs(l,n);if(t=e.e,r=e.d.length-1,o=t>=r,i=l.s,o){if((r=u<0?-u:u)<=lH){for(a=new d(Pc),t=Math.ceil(n/Ts+4),$s=!1;r%2&&(a=a.times(l),bI(a.d,t)),r=vp(r/2),r!==0;)l=l.times(l),bI(l.d,t);return $s=!0,e.s<0?new d(Pc).div(a):xs(a,n)}}else if(i<0)throw Error(_d+"NaN");return i=i<0&&e.d[Math.max(t,r)]&1?-1:1,l.s=1,$s=!1,a=e.times(Nb(l,n+c)),$s=!0,a=dH(a),a.s=i,a};Vr.toPrecision=function(e,t){var r,n,a=this,i=a.constructor;return e===void 0?(r=Vi(a),n=Gm(a,r<=i.toExpNeg||r>=i.toExpPos)):(Ku(e,1,bp),t===void 0?t=i.rounding:Ku(t,0,8),a=xs(new i(a),e,t),r=Vi(a),n=Gm(a,e<=r||r<=i.toExpNeg,e)),n};Vr.toSignificantDigits=Vr.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(Ku(e,1,bp),t===void 0?t=n.rounding:Ku(t,0,8)),xs(new n(r),e,t)};Vr.toString=Vr.valueOf=Vr.val=Vr.toJSON=Vr[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Vi(e),r=e.constructor;return Gm(e,t<=r.toExpNeg||t>=r.toExpPos)};function cH(e,t){var r,n,a,i,o,l,d,c,u=e.constructor,x=u.precision;if(!e.s||!t.s)return t.s||(t=new u(e)),$s?xs(t,x):t;if(d=e.d,c=t.d,o=e.e,a=t.e,d=d.slice(),i=o-a,i){for(i<0?(n=d,i=-i,l=c.length):(n=c,a=o,l=d.length),o=Math.ceil(x/Ts),l=o>l?o+1:l+1,i>l&&(i=l,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(l=d.length,i=c.length,l-i<0&&(i=l,n=c,c=d,d=n),r=0;i;)r=(d[--i]=d[i]+c[i]+r)/No|0,d[i]%=No;for(r&&(d.unshift(r),++a),l=d.length;d[--l]==0;)d.pop();return t.d=d,t.e=a,$s?xs(t,x):t}function Ku(e,t,r){if(e!==~~e||e<t||e>r)throw Error(jm+e)}function Uu(e){var t,r,n,a=e.length-1,i="",o=e[0];if(a>0){for(i+=o,t=1;t<a;t++)n=e[t]+"",r=Ts-n.length,r&&(i+=Xh(r)),i+=n;o=e[t],n=o+"",r=Ts-n.length,r&&(i+=Xh(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return i+o}var $0=(function(){function e(n,a){var i,o=0,l=n.length;for(n=n.slice();l--;)i=n[l]*a+o,n[l]=i%No|0,o=i/No|0;return o&&n.unshift(o),n}function t(n,a,i,o){var l,d;if(i!=o)d=i>o?1:-1;else for(l=d=0;l<i;l++)if(n[l]!=a[l]){d=n[l]>a[l]?1:-1;break}return d}function r(n,a,i){for(var o=0;i--;)n[i]-=o,o=n[i]<a[i]?1:0,n[i]=o*No+n[i]-a[i];for(;!n[0]&&n.length>1;)n.shift()}return function(n,a,i,o){var l,d,c,u,x,b,g,k,y,N,S,O,A,P,q,W,R,U,L=n.constructor,Q=n.s==a.s?1:-1,H=n.d,G=a.d;if(!n.s)return new L(n);if(!a.s)throw Error(_d+"Division by zero");for(d=n.e-a.e,R=G.length,q=H.length,g=new L(Q),k=g.d=[],c=0;G[c]==(H[c]||0);)++c;if(G[c]>(H[c]||0)&&--d,i==null?O=i=L.precision:o?O=i+(Vi(n)-Vi(a))+1:O=i,O<0)return new L(0);if(O=O/Ts+2|0,c=0,R==1)for(u=0,G=G[0],O++;(c<q||u)&&O--;c++)A=u*No+(H[c]||0),k[c]=A/G|0,u=A%G|0;else{for(u=No/(G[0]+1)|0,u>1&&(G=e(G,u),H=e(H,u),R=G.length,q=H.length),P=R,y=H.slice(0,R),N=y.length;N<R;)y[N++]=0;U=G.slice(),U.unshift(0),W=G[0],G[1]>=No/2&&++W;do u=0,l=t(G,y,R,N),l<0?(S=y[0],R!=N&&(S=S*No+(y[1]||0)),u=S/W|0,u>1?(u>=No&&(u=No-1),x=e(G,u),b=x.length,N=y.length,l=t(x,y,b,N),l==1&&(u--,r(x,R<b?U:G,b))):(u==0&&(l=u=1),x=G.slice()),b=x.length,b<N&&x.unshift(0),r(y,x,N),l==-1&&(N=y.length,l=t(G,y,R,N),l<1&&(u++,r(y,R<N?U:G,N))),N=y.length):l===0&&(u++,y=[0]),k[c++]=u,l&&y[0]?y[N++]=H[P]||0:(y=[H[P]],N=1);while((P++<q||y[0]!==void 0)&&O--)}return k[0]||k.shift(),g.e=d,xs(g,o?i+Vi(g)+1:i)}})();function dH(e,t){var r,n,a,i,o,l,d=0,c=0,u=e.constructor,x=u.precision;if(Vi(e)>16)throw Error(BC+Vi(e));if(!e.s)return new u(Pc);for($s=!1,l=x,o=new u(.03125);e.abs().gte(.1);)e=e.times(o),c+=5;for(n=Math.log(em(2,c))/Math.LN10*2+5|0,l+=n,r=a=i=new u(Pc),u.precision=l;;){if(a=xs(a.times(e),l),r=r.times(++d),o=i.plus($0(a,r,l)),Uu(o.d).slice(0,l)===Uu(i.d).slice(0,l)){for(;c--;)i=xs(i.times(i),l);return u.precision=x,t==null?($s=!0,xs(i,x)):i}i=o}}function Vi(e){for(var t=e.e*Ts,r=e.d[0];r>=10;r/=10)t++;return t}function GN(e,t,r){if(t>e.LN10.sd())throw $s=!0,r&&(e.precision=r),Error(_d+"LN10 precision limit exceeded");return xs(new e(e.LN10),t)}function Xh(e){for(var t="";e--;)t+="0";return t}function Nb(e,t){var r,n,a,i,o,l,d,c,u,x=1,b=10,g=e,k=g.d,y=g.constructor,N=y.precision;if(g.s<1)throw Error(_d+(g.s?"NaN":"-Infinity"));if(g.eq(Pc))return new y(0);if(t==null?($s=!1,c=N):c=t,g.eq(10))return t==null&&($s=!0),GN(y,c);if(c+=b,y.precision=c,r=Uu(k),n=r.charAt(0),i=Vi(g),Math.abs(i)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)g=g.times(e),r=Uu(g.d),n=r.charAt(0),x++;i=Vi(g),n>1?(g=new y("0."+r),i++):g=new y(n+"."+r.slice(1))}else return d=GN(y,c+2,N).times(i+""),g=Nb(new y(n+"."+r.slice(1)),c-b).plus(d),y.precision=N,t==null?($s=!0,xs(g,N)):g;for(l=o=g=$0(g.minus(Pc),g.plus(Pc),c),u=xs(g.times(g),c),a=3;;){if(o=xs(o.times(u),c),d=l.plus($0(o,new y(a),c)),Uu(d.d).slice(0,c)===Uu(l.d).slice(0,c))return l=l.times(2),i!==0&&(l=l.plus(GN(y,c+2,N).times(i+""))),l=$0(l,new y(x),c),y.precision=N,t==null?($s=!0,xs(l,N)):l;l=d,a+=2}}function gI(e,t){var r,n,a;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(a=t.length;t.charCodeAt(a-1)===48;)--a;if(t=t.slice(n,a),t){if(a-=n,r=r-n-1,e.e=vp(r/Ts),e.d=[],n=(r+1)%Ts,r<0&&(n+=Ts),n<a){for(n&&e.d.push(+t.slice(0,n)),a-=Ts;n<a;)e.d.push(+t.slice(n,n+=Ts));t=t.slice(n),n=Ts-t.length}else n-=a;for(;n--;)t+="0";if(e.d.push(+t),$s&&(e.e>Qw||e.e<-Qw))throw Error(BC+r)}else e.s=0,e.e=0,e.d=[0];return e}function xs(e,t,r){var n,a,i,o,l,d,c,u,x=e.d;for(o=1,i=x[0];i>=10;i/=10)o++;if(n=t-o,n<0)n+=Ts,a=t,c=x[u=0];else{if(u=Math.ceil((n+1)/Ts),i=x.length,u>=i)return e;for(c=i=x[u],o=1;i>=10;i/=10)o++;n%=Ts,a=n-Ts+o}if(r!==void 0&&(i=em(10,o-a-1),l=c/i%10|0,d=t<0||x[u+1]!==void 0||c%i,d=r<4?(l||d)&&(r==0||r==(e.s<0?3:2)):l>5||l==5&&(r==4||d||r==6&&(n>0?a>0?c/em(10,o-a):0:x[u-1])%10&1||r==(e.s<0?8:7))),t<1||!x[0])return d?(i=Vi(e),x.length=1,t=t-i-1,x[0]=em(10,(Ts-t%Ts)%Ts),e.e=vp(-t/Ts)||0):(x.length=1,x[0]=e.e=e.s=0),e;if(n==0?(x.length=u,i=1,u--):(x.length=u+1,i=em(10,Ts-n),x[u]=a>0?(c/em(10,o-a)%em(10,a)|0)*i:0),d)for(;;)if(u==0){(x[0]+=i)==No&&(x[0]=1,++e.e);break}else{if(x[u]+=i,x[u]!=No)break;x[u--]=0,i=1}for(n=x.length;x[--n]===0;)x.pop();if($s&&(e.e>Qw||e.e<-Qw))throw Error(BC+Vi(e));return e}function uH(e,t){var r,n,a,i,o,l,d,c,u,x,b=e.constructor,g=b.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new b(e),$s?xs(t,g):t;if(d=e.d,x=t.d,n=t.e,c=e.e,d=d.slice(),o=c-n,o){for(u=o<0,u?(r=d,o=-o,l=x.length):(r=x,n=c,l=d.length),a=Math.max(Math.ceil(g/Ts),l)+2,o>a&&(o=a,r.length=1),r.reverse(),a=o;a--;)r.push(0);r.reverse()}else{for(a=d.length,l=x.length,u=a<l,u&&(l=a),a=0;a<l;a++)if(d[a]!=x[a]){u=d[a]<x[a];break}o=0}for(u&&(r=d,d=x,x=r,t.s=-t.s),l=d.length,a=x.length-l;a>0;--a)d[l++]=0;for(a=x.length;a>o;){if(d[--a]<x[a]){for(i=a;i&&d[--i]===0;)d[i]=No-1;--d[i],d[a]+=No}d[a]-=x[a]}for(;d[--l]===0;)d.pop();for(;d[0]===0;d.shift())--n;return d[0]?(t.d=d,t.e=n,$s?xs(t,g):t):new b(0)}function Gm(e,t,r){var n,a=Vi(e),i=Uu(e.d),o=i.length;return t?(r&&(n=r-o)>0?i=i.charAt(0)+"."+i.slice(1)+Xh(n):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(a<0?"e":"e+")+a):a<0?(i="0."+Xh(-a-1)+i,r&&(n=r-o)>0&&(i+=Xh(n))):a>=o?(i+=Xh(a+1-o),r&&(n=r-a-1)>0&&(i=i+"."+Xh(n))):((n=a+1)<o&&(i=i.slice(0,n)+"."+i.slice(n)),r&&(n=r-o)>0&&(a+1===o&&(i+="."),i+=Xh(n))),e.s<0?"-"+i:i}function bI(e,t){if(e.length>t)return e.length=t,!0}function hH(e){var t,r,n;function a(i){var o=this;if(!(o instanceof a))return new a(i);if(o.constructor=a,i instanceof a){o.s=i.s,o.e=i.e,o.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(jm+i);if(i>0)o.s=1;else if(i<0)i=-i,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(i===~~i&&i<1e7){o.e=0,o.d=[i];return}return gI(o,i.toString())}else if(typeof i!="string")throw Error(jm+i);if(i.charCodeAt(0)===45?(i=i.slice(1),o.s=-1):o.s=1,Yue.test(i))gI(o,i);else throw Error(jm+i)}if(a.prototype=Vr,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=hH,a.config=a.set=Que,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return a.config(e),a}function Que(e){if(!e||typeof e!="object")throw Error(_d+"Object expected");var t,r,n,a=["precision",1,bp,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<a.length;t+=3)if((n=e[r=a[t]])!==void 0)if(vp(n)===n&&n>=a[t+1]&&n<=a[t+2])this[r]=n;else throw Error(jm+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(jm+r+": "+n);return this}var UC=hH(Xue);Pc=new UC(1);const Qa=UC;var Zue=e=>e,fH={},mH=e=>e===fH,vI=e=>function t(){return arguments.length===0||arguments.length===1&&mH(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},xH=(e,t)=>e===1?t:vI(function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];var i=n.filter(o=>o!==fH).length;return i>=e?t(...n):xH(e-i,vI(function(){for(var o=arguments.length,l=new Array(o),d=0;d<o;d++)l[d]=arguments[d];var c=n.map(u=>mH(u)?l.shift():u);return t(...c,...l)}))}),f5=e=>xH(e.length,e),vj=(e,t)=>{for(var r=[],n=e;n<t;++n)r[n-e]=n;return r},Jue=f5((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(r=>t[r]).map(e)),e0e=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return Zue;var a=r.reverse(),i=a[0],o=a.slice(1);return function(){return o.reduce((l,d)=>d(l),i(...arguments))}},yj=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join(""),pH=e=>{var t=null,r=null;return function(){for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return t&&a.every((o,l)=>{var d;return o===((d=t)===null||d===void 0?void 0:d[l])})||(t=a,r=e(...a)),r}};function gH(e){var t;return e===0?t=1:t=Math.floor(new Qa(e).abs().log(10).toNumber())+1,t}function bH(e,t,r){for(var n=new Qa(e),a=0,i=[];n.lt(t)&&a<1e5;)i.push(n.toNumber()),n=n.add(r),a++;return i}f5((e,t,r)=>{var n=+e,a=+t;return n+r*(a-n)});f5((e,t,r)=>{var n=t-+e;return n=n||1/0,(r-e)/n});f5((e,t,r)=>{var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});var vH=e=>{var[t,r]=e,[n,a]=[t,r];return t>r&&([n,a]=[r,t]),[n,a]},yH=(e,t,r)=>{if(e.lte(0))return new Qa(0);var n=gH(e.toNumber()),a=new Qa(10).pow(n),i=e.div(a),o=n!==1?.05:.1,l=new Qa(Math.ceil(i.div(o).toNumber())).add(r).mul(o),d=l.mul(a);return t?new Qa(d.toNumber()):new Qa(Math.ceil(d.toNumber()))},t0e=(e,t,r)=>{var n=new Qa(1),a=new Qa(e);if(!a.isint()&&r){var i=Math.abs(e);i<1?(n=new Qa(10).pow(gH(e)-1),a=new Qa(Math.floor(a.div(n).toNumber())).mul(n)):i>1&&(a=new Qa(Math.floor(e)))}else e===0?a=new Qa(Math.floor((t-1)/2)):r||(a=new Qa(Math.floor(e)));var o=Math.floor((t-1)/2),l=e0e(Jue(d=>a.add(new Qa(d-o).mul(n)).toNumber()),vj);return l(0,t)},wH=function(t,r,n,a){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-t)/(n-1)))return{step:new Qa(0),tickMin:new Qa(0),tickMax:new Qa(0)};var o=yH(new Qa(r).sub(t).div(n-1),a,i),l;t<=0&&r>=0?l=new Qa(0):(l=new Qa(t).add(r).div(2),l=l.sub(new Qa(l).mod(o)));var d=Math.ceil(l.sub(t).div(o).toNumber()),c=Math.ceil(new Qa(r).sub(l).div(o).toNumber()),u=d+c+1;return u>n?wH(t,r,n,a,i+1):(u<n&&(c=r>0?c+(n-u):c,d=r>0?d:d+(n-u)),{step:o,tickMin:l.sub(new Qa(d).mul(o)),tickMax:l.add(new Qa(c).mul(o))})};function r0e(e){var[t,r]=e,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=Math.max(n,2),[o,l]=vH([t,r]);if(o===-1/0||l===1/0){var d=l===1/0?[o,...vj(0,n-1).map(()=>1/0)]:[...vj(0,n-1).map(()=>-1/0),l];return t>r?yj(d):d}if(o===l)return t0e(o,n,a);var{step:c,tickMin:u,tickMax:x}=wH(o,l,i,a,0),b=bH(u,x.add(new Qa(.1).mul(c)),c);return t>r?yj(b):b}function n0e(e,t){var[r,n]=e,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[i,o]=vH([r,n]);if(i===-1/0||o===1/0)return[r,n];if(i===o)return[i];var l=Math.max(t,2),d=yH(new Qa(o).sub(i).div(l-1),a,0),c=[...bH(new Qa(i),new Qa(o),d),o];return a===!1&&(c=c.map(u=>Math.round(u))),r>n?yj(c):c}var a0e=pH(r0e),s0e=pH(n0e),kH=e=>e.rootProps.maxBarSize,i0e=e=>e.rootProps.barGap,NH=e=>e.rootProps.barCategoryGap,o0e=e=>e.rootProps.barSize,uv=e=>e.rootProps.stackOffset,zC=e=>e.options.chartName,qC=e=>e.rootProps.syncId,_H=e=>e.rootProps.syncMethod,HC=e=>e.options.eventEmitter,P0={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},jc={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},m5=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},l0e={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:P0.angleAxisId,includeHidden:!1,name:void 0,reversed:P0.reversed,scale:P0.scale,tick:P0.tick,tickCount:void 0,ticks:void 0,type:P0.type,unit:void 0},c0e={allowDataOverflow:jc.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:jc.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:jc.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:jc.scale,tick:jc.tick,tickCount:jc.tickCount,ticks:void 0,type:jc.type,unit:void 0},d0e={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:P0.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:P0.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:P0.scale,tick:P0.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},u0e={allowDataOverflow:jc.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:jc.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:jc.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:jc.scale,tick:jc.tick,tickCount:jc.tickCount,ticks:void 0,type:"category",unit:void 0},$C=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?d0e:l0e,VC=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?u0e:c0e,x5=e=>e.polarOptions,WC=jt([ch,dh,so],rq),SH=jt([x5,WC],(e,t)=>{if(e!=null)return dl(e.innerRadius,t,0)}),jH=jt([x5,WC],(e,t)=>{if(e!=null)return dl(e.outerRadius,t,t*.8)}),h0e=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:r}=e;return[t,r]},CH=jt([x5],h0e);jt([$C,CH],m5);var AH=jt([WC,SH,jH],(e,t,r)=>{if(!(e==null||t==null||r==null))return[t,r]});jt([VC,AH],m5);var EH=jt([pa,x5,SH,jH,ch,dh],(e,t,r,n,a,i)=>{if(!(e!=="centric"&&e!=="radial"||t==null||r==null||n==null)){var{cx:o,cy:l,startAngle:d,endAngle:c}=t;return{cx:dl(o,a,a/2),cy:dl(l,i,i/2),innerRadius:r,outerRadius:n,startAngle:d,endAngle:c,clockWise:!1}}}),Ks=(e,t)=>t,hv=(e,t,r)=>r;function p5(e){return e==null?void 0:e.id}var lo=e=>{var t=pa(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},yp=e=>e.tooltip.settings.axisId,co=e=>{var t=lo(e),r=yp(e);return fv(e,t,r)},TH=jt([co],e=>e==null?void 0:e.dataKey);function OH(e,t,r){var{chartData:n=[]}=t,{allowDuplicatedCategory:a,dataKey:i}=r,o=new Map;return e.forEach(l=>{var d,c=(d=l.data)!==null&&d!==void 0?d:n;if(!(c==null||c.length===0)){var u=p5(l);c.forEach((x,b)=>{var g=i==null||a?b:String(os(x,i,null)),k=os(x,l.dataKey,0),y;o.has(g)?y=o.get(g):y={},Object.assign(y,{[u]:k}),o.set(g,y)})}}),Array.from(o.values())}function g5(e){return e.stackId!=null&&e.dataKey!=null}var b5=(e,t)=>e===t?!0:e==null||t==null?!1:e[0]===t[0]&&e[1]===t[1];function v5(e,t){return Array.isArray(e)&&Array.isArray(t)&&e.length===0&&t.length===0?!0:e===t}function yI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Zw(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?yI(Object(r),!0).forEach(function(n){f0e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function f0e(e,t,r){return(t=m0e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function m0e(e){var t=x0e(e,"string");return typeof t=="symbol"?t:t+""}function x0e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var wj=[0,"auto"],kc={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},PH=(e,t)=>e.cartesianAxis.xAxis[t],fh=(e,t)=>{var r=PH(e,t);return r??kc},Nc={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:wj,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:av},IH=(e,t)=>e.cartesianAxis.yAxis[t],mh=(e,t)=>{var r=IH(e,t);return r??Nc},p0e={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},GC=(e,t)=>{var r=e.cartesianAxis.zAxis[t];return r??p0e},ti=(e,t,r)=>{switch(t){case"xAxis":return fh(e,r);case"yAxis":return mh(e,r);case"zAxis":return GC(e,r);case"angleAxis":return $C(e,r);case"radiusAxis":return VC(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},g0e=(e,t,r)=>{switch(t){case"xAxis":return fh(e,r);case"yAxis":return mh(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},fv=(e,t,r)=>{switch(t){case"xAxis":return fh(e,r);case"yAxis":return mh(e,r);case"angleAxis":return $C(e,r);case"radiusAxis":return VC(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},DH=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function KC(e,t){return r=>{switch(e){case"xAxis":return"xAxisId"in r&&r.xAxisId===t;case"yAxis":return"yAxisId"in r&&r.yAxisId===t;case"zAxis":return"zAxisId"in r&&r.zAxisId===t;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===t;default:return!1}}}var mv=e=>e.graphicalItems.cartesianItems,b0e=jt([Ks,hv],KC),XC=(e,t,r)=>e.filter(r).filter(n=>(t==null?void 0:t.includeHidden)===!0?!0:!n.hide),xv=jt([mv,ti,b0e],XC,{memoizeOptions:{resultEqualityCheck:v5}}),MH=jt([xv],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(g5)),LH=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),v0e=jt([xv],LH),YC=e=>e.map(t=>t.data).filter(Boolean).flat(1),y0e=jt([xv],YC,{memoizeOptions:{resultEqualityCheck:v5}}),QC=(e,t)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:a}=t;return e.length>0?e:r.slice(n,a+1)},ZC=jt([y0e,dv],QC),JC=(e,t,r)=>(t==null?void 0:t.dataKey)!=null?e.map(n=>({value:os(n,t.dataKey)})):r.length>0?r.map(n=>n.dataKey).flatMap(n=>e.map(a=>({value:os(a,n)}))):e.map(n=>({value:n})),y5=jt([ZC,ti,xv],JC);function RH(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function sw(e){if(Gu(e)||e instanceof Date){var t=Number(e);if(Wi(t))return t}}function wI(e){if(Array.isArray(e)){var t=[sw(e[0]),sw(e[1])];return Wm(t)?t:void 0}var r=sw(e);if(r!=null)return[r,r]}function wp(e){return e.map(sw).filter(Rle)}function w0e(e,t,r){return!r||typeof t!="number"||Fc(t)?[]:r.length?wp(r.flatMap(n=>{var a=os(e,n.dataKey),i,o;if(Array.isArray(a)?[i,o]=a:i=o=a,!(!Wi(i)||!Wi(o)))return[t-i,t+o]})):[]}var k0e=jt([MH,dv,co],OH),FH=(e,t,r)=>{var n={},a=t.reduce((i,o)=>(o.stackId==null||(i[o.stackId]==null&&(i[o.stackId]=[]),i[o.stackId].push(o)),i),n);return Object.fromEntries(Object.entries(a).map(i=>{var[o,l]=i,d=l.map(p5);return[o,{stackedData:ooe(e,d,r),graphicalItems:l}]}))},_b=jt([k0e,MH,uv],FH),BH=(e,t,r,n)=>{var{dataStartIndex:a,dataEndIndex:i}=t;if(n==null&&r!=="zAxis"){var o=uoe(e,a,i);if(!(o!=null&&o[0]===0&&o[1]===0))return o}},N0e=jt([ti],e=>e.allowDataOverflow),eA=e=>{var t;if(e==null||!("domain"in e))return wj;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var r=wp(e.ticks);return[Math.min(...r),Math.max(...r)]}if(e.type==="category")return e.ticks.map(String)}return(t=e==null?void 0:e.domain)!==null&&t!==void 0?t:wj},tA=jt([ti],eA),rA=jt([tA,N0e],oH),_0e=jt([_b,Af,Ks,rA],BH,{memoizeOptions:{resultEqualityCheck:b5}}),w5=e=>e.errorBars,S0e=(e,t,r)=>e.flatMap(n=>t[n.id]).filter(Boolean).filter(n=>RH(r,n)),Jw=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var a=r.filter(Boolean);if(a.length!==0){var i=a.flat(),o=Math.min(...i),l=Math.max(...i);return[o,l]}},nA=(e,t,r,n,a)=>{var i,o;if(r.length>0&&e.forEach(l=>{r.forEach(d=>{var c,u,x=(c=n[d.id])===null||c===void 0?void 0:c.filter(S=>RH(a,S)),b=os(l,(u=t.dataKey)!==null&&u!==void 0?u:d.dataKey),g=w0e(l,b,x);if(g.length>=2){var k=Math.min(...g),y=Math.max(...g);(i==null||k<i)&&(i=k),(o==null||y>o)&&(o=y)}var N=wI(b);N!=null&&(i=i==null?N[0]:Math.min(i,N[0]),o=o==null?N[1]:Math.max(o,N[1]))})}),(t==null?void 0:t.dataKey)!=null&&e.forEach(l=>{var d=wI(os(l,t.dataKey));d!=null&&(i=i==null?d[0]:Math.min(i,d[0]),o=o==null?d[1]:Math.max(o,d[1]))}),Wi(i)&&Wi(o))return[i,o]},j0e=jt([ZC,ti,v0e,w5,Ks],nA,{memoizeOptions:{resultEqualityCheck:b5}});function C0e(e){var{value:t}=e;if(Gu(t)||t instanceof Date)return t}var A0e=(e,t,r)=>{var n=e.map(C0e).filter(a=>a!=null);return r&&(t.dataKey==null||t.allowDuplicatedCategory&&hz(n))?jq(0,e.length):t.allowDuplicatedCategory?n:Array.from(new Set(n))},UH=e=>e.referenceElements.dots,kp=(e,t,r)=>e.filter(n=>n.ifOverflow==="extendDomain").filter(n=>t==="xAxis"?n.xAxisId===r:n.yAxisId===r),E0e=jt([UH,Ks,hv],kp),zH=e=>e.referenceElements.areas,T0e=jt([zH,Ks,hv],kp),qH=e=>e.referenceElements.lines,O0e=jt([qH,Ks,hv],kp),HH=(e,t)=>{var r=wp(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},P0e=jt(E0e,Ks,HH),$H=(e,t)=>{var r=wp(e.flatMap(n=>[t==="xAxis"?n.x1:n.y1,t==="xAxis"?n.x2:n.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},I0e=jt([T0e,Ks],$H),VH=(e,t)=>{var r=wp(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},D0e=jt(O0e,Ks,VH),M0e=jt(P0e,D0e,I0e,(e,t,r)=>Jw(e,r,t)),aA=(e,t,r,n,a,i,o,l)=>{if(r!=null)return r;var d=o==="vertical"&&l==="xAxis"||o==="horizontal"&&l==="yAxis",c=d?Jw(n,i,a):Jw(i,a);return Kue(t,c,e.allowDataOverflow)},L0e=jt([ti,tA,rA,_0e,j0e,M0e,pa,Ks],aA,{memoizeOptions:{resultEqualityCheck:b5}}),R0e=[0,1],sA=(e,t,r,n,a,i,o)=>{if(!((e==null||r==null||r.length===0)&&o===void 0)){var{dataKey:l,type:d}=e,c=Zu(t,i);return c&&l==null?jq(0,r.length):d==="category"?A0e(n,e,c):a==="expand"?R0e:o}},iA=jt([ti,pa,ZC,y5,uv,Ks,L0e],sA),WH=(e,t,r,n,a)=>{if(e!=null){var{scale:i,type:o}=e;if(i==="auto")return t==="radial"&&a==="radiusAxis"?"band":t==="radial"&&a==="angleAxis"?"linear":o==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?"point":o==="category"?"band":"linear";if(typeof i=="string"){var l="scale".concat(ev(i));return l in Rg?l:"point"}}},Np=jt([ti,pa,DH,zC,Ks],WH);function F0e(e){if(e!=null){if(e in Rg)return Rg[e]();var t="scale".concat(ev(e));if(t in Rg)return Rg[t]()}}function oA(e,t,r,n){if(!(r==null||n==null)){if(typeof e.scale=="function")return e.scale.copy().domain(r).range(n);var a=F0e(t);if(a!=null){var i=a.domain(r).range(n);return roe(i),i}}}var lA=(e,t,r)=>{var n=eA(t);if(!(r!=="auto"&&r!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&Wm(e))return a0e(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&Wm(e))return s0e(e,t.tickCount,t.allowDecimals)}},cA=jt([iA,fv,Np],lA),dA=(e,t,r,n)=>{if(n!=="angleAxis"&&(e==null?void 0:e.type)==="number"&&Wm(t)&&Array.isArray(r)&&r.length>0){var a=t[0],i=r[0],o=t[1],l=r[r.length-1];return[Math.min(a,i),Math.max(o,l)]}return t},B0e=jt([ti,iA,cA,Ks],dA),U0e=jt(y5,ti,(e,t)=>{if(!(!t||t.type!=="number")){var r=1/0,n=Array.from(wp(e.map(l=>l.value))).sort((l,d)=>l-d);if(n.length<2)return 1/0;var a=n[n.length-1]-n[0];if(a===0)return 1/0;for(var i=0;i<n.length-1;i++){var o=n[i+1]-n[i];r=Math.min(r,o)}return r/a}}),GH=jt(U0e,pa,NH,so,(e,t,r,n)=>n,(e,t,r,n,a)=>{if(!Wi(e))return 0;var i=t==="vertical"?n.height:n.width;if(a==="gap")return e*i/2;if(a==="no-gap"){var o=dl(r,e*i),l=e*i/2;return l-o-(l-o)/i*o}return 0}),z0e=(e,t)=>{var r=fh(e,t);return r==null||typeof r.padding!="string"?0:GH(e,"xAxis",t,r.padding)},q0e=(e,t)=>{var r=mh(e,t);return r==null||typeof r.padding!="string"?0:GH(e,"yAxis",t,r.padding)},H0e=jt(fh,z0e,(e,t)=>{var r,n;if(e==null)return{left:0,right:0};var{padding:a}=e;return typeof a=="string"?{left:t,right:t}:{left:((r=a.left)!==null&&r!==void 0?r:0)+t,right:((n=a.right)!==null&&n!==void 0?n:0)+t}}),$0e=jt(mh,q0e,(e,t)=>{var r,n;if(e==null)return{top:0,bottom:0};var{padding:a}=e;return typeof a=="string"?{top:t,bottom:t}:{top:((r=a.top)!==null&&r!==void 0?r:0)+t,bottom:((n=a.bottom)!==null&&n!==void 0?n:0)+t}}),V0e=jt([so,H0e,a5,n5,(e,t,r)=>r],(e,t,r,n,a)=>{var{padding:i}=n;return a?[i.left,r.width-i.right]:[e.left+t.left,e.left+e.width-t.right]}),W0e=jt([so,pa,$0e,a5,n5,(e,t,r)=>r],(e,t,r,n,a,i)=>{var{padding:o}=a;return i?[n.height-o.bottom,o.top]:t==="horizontal"?[e.top+e.height-r.bottom,e.top+r.top]:[e.top+r.top,e.top+e.height-r.bottom]}),pv=(e,t,r,n)=>{var a;switch(t){case"xAxis":return V0e(e,r,n);case"yAxis":return W0e(e,r,n);case"zAxis":return(a=GC(e,r))===null||a===void 0?void 0:a.range;case"angleAxis":return CH(e);case"radiusAxis":return AH(e,r);default:return}},KH=jt([ti,pv],m5),_p=jt([ti,Np,B0e,KH],oA);jt([xv,w5,Ks],S0e);function XH(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var k5=(e,t)=>t,N5=(e,t,r)=>r,G0e=jt(t5,k5,N5,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(XH)),K0e=jt(r5,k5,N5,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(XH)),YH=(e,t)=>({width:e.width,height:t.height}),X0e=(e,t)=>{var r=typeof t.width=="number"?t.width:av;return{width:r,height:e.height}},QH=jt(so,fh,YH),Y0e=(e,t,r)=>{switch(t){case"top":return e.top;case"bottom":return r-e.bottom;default:return 0}},Q0e=(e,t,r)=>{switch(t){case"left":return e.left;case"right":return r-e.right;default:return 0}},Z0e=jt(dh,so,G0e,k5,N5,(e,t,r,n,a)=>{var i={},o;return r.forEach(l=>{var d=YH(t,l);o==null&&(o=Y0e(t,n,e));var c=n==="top"&&!a||n==="bottom"&&a;i[l.id]=o-Number(c)*d.height,o+=(c?-1:1)*d.height}),i}),J0e=jt(ch,so,K0e,k5,N5,(e,t,r,n,a)=>{var i={},o;return r.forEach(l=>{var d=X0e(t,l);o==null&&(o=Q0e(t,n,e));var c=n==="left"&&!a||n==="right"&&a;i[l.id]=o-Number(c)*d.width,o+=(c?-1:1)*d.width}),i}),ehe=(e,t)=>{var r=fh(e,t);if(r!=null)return Z0e(e,r.orientation,r.mirror)},the=jt([so,fh,ehe,(e,t)=>t],(e,t,r,n)=>{if(t!=null){var a=r==null?void 0:r[n];return a==null?{x:e.left,y:0}:{x:e.left,y:a}}}),rhe=(e,t)=>{var r=mh(e,t);if(r!=null)return J0e(e,r.orientation,r.mirror)},nhe=jt([so,mh,rhe,(e,t)=>t],(e,t,r,n)=>{if(t!=null){var a=r==null?void 0:r[n];return a==null?{x:0,y:e.top}:{x:a,y:e.top}}}),ZH=jt(so,mh,(e,t)=>{var r=typeof t.width=="number"?t.width:av;return{width:r,height:e.height}}),kI=(e,t,r)=>{switch(t){case"xAxis":return QH(e,r).width;case"yAxis":return ZH(e,r).height;default:return}},JH=(e,t,r,n)=>{if(r!=null){var{allowDuplicatedCategory:a,type:i,dataKey:o}=r,l=Zu(e,n),d=t.map(c=>c.value);if(o&&l&&i==="category"&&a&&hz(d))return d}},uA=jt([pa,y5,ti,Ks],JH),e$=(e,t,r,n)=>{if(!(r==null||r.dataKey==null)){var{type:a,scale:i}=r,o=Zu(e,n);if(o&&(a==="number"||i!=="auto"))return t.map(l=>l.value)}},hA=jt([pa,y5,fv,Ks],e$),NI=jt([pa,g0e,Np,_p,uA,hA,pv,cA,Ks],(e,t,r,n,a,i,o,l,d)=>{if(t==null)return null;var c=Zu(e,d);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:d,categoricalDomain:i,duplicateDomain:a,isCategorical:c,niceTicks:l,range:o,realScaleType:r,scale:n}}),ahe=(e,t,r,n,a,i,o,l,d)=>{if(!(t==null||n==null)){var c=Zu(e,d),{type:u,ticks:x,tickCount:b}=t,g=r==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,k=u==="category"&&n.bandwidth?n.bandwidth()/g:0;k=d==="angleAxis"&&i!=null&&i.length>=2?Co(i[0]-i[1])*2*k:k;var y=x||a;if(y){var N=y.map((S,O)=>{var A=o?o.indexOf(S):S;return{index:O,coordinate:n(A)+k,value:S,offset:k}});return N.filter(S=>!Fc(S.coordinate))}return c&&l?l.map((S,O)=>({coordinate:n(S)+k,value:S,index:O,offset:k})):n.ticks?n.ticks(b).map(S=>({coordinate:n(S)+k,value:S,offset:k})):n.domain().map((S,O)=>({coordinate:n(S)+k,value:o?o[S]:S,index:O,offset:k}))}},t$=jt([pa,fv,Np,_p,cA,pv,uA,hA,Ks],ahe),she=(e,t,r,n,a,i,o)=>{if(!(t==null||r==null||n==null||n[0]===n[1])){var l=Zu(e,o),{tickCount:d}=t,c=0;return c=o==="angleAxis"&&(n==null?void 0:n.length)>=2?Co(n[0]-n[1])*2*c:c,l&&i?i.map((u,x)=>({coordinate:r(u)+c,value:u,index:x,offset:c})):r.ticks?r.ticks(d).map(u=>({coordinate:r(u)+c,value:u,offset:c})):r.domain().map((u,x)=>({coordinate:r(u)+c,value:a?a[u]:u,index:x,offset:c}))}},Xu=jt([pa,fv,_p,pv,uA,hA,Ks],she),Yu=jt(ti,_p,(e,t)=>{if(!(e==null||t==null))return Zw(Zw({},e),{},{scale:t})}),ihe=jt([ti,Np,iA,KH],oA);jt((e,t,r)=>GC(e,r),ihe,(e,t)=>{if(!(e==null||t==null))return Zw(Zw({},e),{},{scale:t})});var ohe=jt([pa,t5,r5],(e,t,r)=>{switch(e){case"horizontal":return t.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),r$=e=>e.options.defaultTooltipEventType,n$=e=>e.options.validateTooltipEventTypes;function a$(e,t,r){if(e==null)return t;var n=e?"axis":"item";return r==null?t:r.includes(n)?n:t}function fA(e,t){var r=r$(e),n=n$(e);return a$(t,r,n)}function lhe(e){return tn(t=>fA(t,e))}var s$=(e,t)=>{var r,n=Number(t);if(!(Fc(n)||t==null))return n>=0?e==null||(r=e[n])===null||r===void 0?void 0:r.value:void 0},che=e=>e.tooltip.settings,Zh={active:!1,index:null,dataKey:void 0,coordinate:void 0},dhe={itemInteraction:{click:Zh,hover:Zh},axisInteraction:{click:Zh,hover:Zh},keyboardInteraction:Zh,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},i$=Hc({name:"tooltip",initialState:dhe,reducers:{addTooltipEntrySettings:{reducer(e,t){e.tooltipItemPayloads.push(t.payload)},prepare:Al()},removeTooltipEntrySettings:{reducer(e,t){var r=H0(e).tooltipItemPayloads.indexOf(t.payload);r>-1&&e.tooltipItemPayloads.splice(r,1)},prepare:Al()},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:uhe,removeTooltipEntrySettings:hhe,setTooltipSettingsState:fhe,setActiveMouseOverItemIndex:o$,mouseLeaveItem:mhe,mouseLeaveChart:l$,setActiveClickItemIndex:xhe,setMouseOverAxisIndex:c$,setMouseClickAxisIndex:phe,setSyncInteraction:kj,setKeyboardInteraction:Nj}=i$.actions,ghe=i$.reducer;function _I(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function X2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_I(Object(r),!0).forEach(function(n){bhe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_I(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function bhe(e,t,r){return(t=vhe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vhe(e){var t=yhe(e,"string");return typeof t=="symbol"?t:t+""}function yhe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function whe(e,t,r){return t==="axis"?r==="click"?e.axisInteraction.click:e.axisInteraction.hover:r==="click"?e.itemInteraction.click:e.itemInteraction.hover}function khe(e){return e.index!=null}var d$=(e,t,r,n)=>{if(t==null)return Zh;var a=whe(e,t,r);if(a==null)return Zh;if(a.active)return a;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var i=e.settings.active===!0;if(khe(a)){if(i)return X2(X2({},a),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n};return X2(X2({},Zh),{},{coordinate:a.coordinate})},mA=(e,t)=>{var r=e==null?void 0:e.index;if(r==null)return null;var n=Number(r);if(!Wi(n))return r;var a=0,i=1/0;return t.length>0&&(i=t.length-1),String(Math.max(a,Math.min(n,i)))},u$=(e,t,r,n,a,i,o,l)=>{if(!(i==null||l==null)){var d=o[0],c=d==null?void 0:l(d.positions,i);if(c!=null)return c;var u=a==null?void 0:a[Number(i)];if(u)switch(r){case"horizontal":return{x:u.coordinate,y:(n.top+t)/2};default:return{x:(n.left+e)/2,y:u.coordinate}}}},h$=(e,t,r,n)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var a;return r==="hover"?a=e.itemInteraction.hover.dataKey:a=e.itemInteraction.click.dataKey,a==null&&n!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(i=>{var o;return((o=i.settings)===null||o===void 0?void 0:o.dataKey)===a})},gv=e=>e.options.tooltipPayloadSearcher,Sp=e=>e.tooltip;function SI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function jI(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?SI(Object(r),!0).forEach(function(n){Nhe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):SI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Nhe(e,t,r){return(t=_he(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _he(e){var t=She(e,"string");return typeof t=="symbol"?t:t+""}function She(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function jhe(e,t){return e??t}var f$=(e,t,r,n,a,i,o)=>{if(!(t==null||i==null)){var{chartData:l,computedData:d,dataStartIndex:c,dataEndIndex:u}=r,x=[];return e.reduce((b,g)=>{var k,{dataDefinedOnItem:y,settings:N}=g,S=jhe(y,l),O=Array.isArray(S)?nq(S,c,u):S,A=(k=N==null?void 0:N.dataKey)!==null&&k!==void 0?k:n,P=N==null?void 0:N.nameKey,q;if(n&&Array.isArray(O)&&!Array.isArray(O[0])&&o==="axis"?q=fz(O,n,a):q=i(O,t,d,P),Array.isArray(q))q.forEach(R=>{var U=jI(jI({},N),{},{name:R.name,unit:R.unit,color:void 0,fill:void 0});b.push(tP({tooltipEntrySettings:U,dataKey:R.dataKey,payload:R.payload,value:os(R.payload,R.dataKey),name:R.name}))});else{var W;b.push(tP({tooltipEntrySettings:N,dataKey:A,payload:q,value:os(q,A),name:(W=os(q,P))!==null&&W!==void 0?W:N==null?void 0:N.name}))}return b},x)}},xA=jt([co,pa,DH,zC,lo],WH),Che=jt([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),Ahe=jt([lo,yp],KC),bv=jt([Che,co,Ahe],XC,{memoizeOptions:{resultEqualityCheck:v5}}),Ehe=jt([bv],e=>e.filter(g5)),The=jt([bv],YC,{memoizeOptions:{resultEqualityCheck:v5}}),jp=jt([The,Af],QC),Ohe=jt([Ehe,Af,co],OH),pA=jt([jp,co,bv],JC),m$=jt([co],eA),Phe=jt([co],e=>e.allowDataOverflow),x$=jt([m$,Phe],oH),Ihe=jt([bv],e=>e.filter(g5)),Dhe=jt([Ohe,Ihe,uv],FH),Mhe=jt([Dhe,Af,lo,x$],BH),Lhe=jt([bv],LH),Rhe=jt([jp,co,Lhe,w5,lo],nA,{memoizeOptions:{resultEqualityCheck:b5}}),Fhe=jt([UH,lo,yp],kp),Bhe=jt([Fhe,lo],HH),Uhe=jt([zH,lo,yp],kp),zhe=jt([Uhe,lo],$H),qhe=jt([qH,lo,yp],kp),Hhe=jt([qhe,lo],VH),$he=jt([Bhe,Hhe,zhe],Jw),Vhe=jt([co,m$,x$,Mhe,Rhe,$he,pa,lo],aA),p$=jt([co,pa,jp,pA,uv,lo,Vhe],sA),Whe=jt([p$,co,xA],lA),Ghe=jt([co,p$,Whe,lo],dA),g$=e=>{var t=lo(e),r=yp(e),n=!1;return pv(e,t,r,n)},b$=jt([co,g$],m5),v$=jt([co,xA,Ghe,b$],oA),Khe=jt([pa,pA,co,lo],JH),Xhe=jt([pa,pA,co,lo],e$),Yhe=(e,t,r,n,a,i,o,l)=>{if(t){var{type:d}=t,c=Zu(e,l);if(n){var u=r==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,x=d==="category"&&n.bandwidth?n.bandwidth()/u:0;return x=l==="angleAxis"&&a!=null&&(a==null?void 0:a.length)>=2?Co(a[0]-a[1])*2*x:x,c&&o?o.map((b,g)=>({coordinate:n(b)+x,value:b,index:g,offset:x})):n.domain().map((b,g)=>({coordinate:n(b)+x,value:i?i[b]:b,index:g,offset:x}))}}},xh=jt([pa,co,xA,v$,g$,Khe,Xhe,lo],Yhe),gA=jt([r$,n$,che],(e,t,r)=>a$(r.shared,e,t)),y$=e=>e.tooltip.settings.trigger,bA=e=>e.tooltip.settings.defaultIndex,_5=jt([Sp,gA,y$,bA],d$),pf=jt([_5,jp],mA),w$=jt([xh,pf],s$),k$=jt([_5],e=>{if(e)return e.dataKey}),N$=jt([Sp,gA,y$,bA],h$),Qhe=jt([ch,dh,pa,so,xh,bA,N$,gv],u$),Zhe=jt([_5,Qhe],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),Jhe=jt([_5],e=>e.active),efe=jt([N$,pf,Af,TH,w$,gv,gA],f$),tfe=jt([efe],e=>{if(e!=null){var t=e.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(t))}});function CI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function AI(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?CI(Object(r),!0).forEach(function(n){rfe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):CI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function rfe(e,t,r){return(t=nfe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nfe(e){var t=afe(e,"string");return typeof t=="symbol"?t:t+""}function afe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var sfe=()=>tn(co),ife=()=>{var e=sfe(),t=tn(xh),r=tn(v$);return $m(AI(AI({},e),{},{scale:r}),t)},_$=()=>tn(zC),vA=(e,t)=>t,S$=(e,t,r)=>r,yA=(e,t,r,n)=>n,ofe=jt(xh,e=>Xk(e,t=>t.coordinate)),wA=jt([Sp,vA,S$,yA],d$),j$=jt([wA,jp],mA),lfe=(e,t,r)=>{if(t!=null){var n=Sp(e);return t==="axis"?r==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:r==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},C$=jt([Sp,vA,S$,yA],h$),ek=jt([ch,dh,pa,so,xh,yA,C$,gv],u$),cfe=jt([wA,ek],(e,t)=>{var r;return(r=e.coordinate)!==null&&r!==void 0?r:t}),A$=jt(xh,j$,s$),dfe=jt([C$,j$,Af,TH,A$,gv,vA],f$),ufe=jt([wA],e=>({isActive:e.active,activeIndex:e.index})),hfe=(e,t,r,n,a,i,o,l)=>{if(!(!e||!t||!n||!a||!i)){var d=hoe(e.chartX,e.chartY,t,r,l);if(d){var c=moe(d,t),u=eoe(c,o,i,n,a),x=foe(t,i,u,d);return{activeIndex:String(u),activeCoordinate:x}}}};function _j(){return _j=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_j.apply(null,arguments)}function EI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Y2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?EI(Object(r),!0).forEach(function(n){ffe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):EI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ffe(e,t,r){return(t=mfe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mfe(e){var t=xfe(e,"string");return typeof t=="symbol"?t:t+""}function xfe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function pfe(e){var{coordinate:t,payload:r,index:n,offset:a,tooltipAxisBandSize:i,layout:o,cursor:l,tooltipEventType:d,chartName:c}=e,u=t,x=r,b=n;if(!l||!u||c!=="ScatterChart"&&d!=="axis")return null;var g,k;if(c==="ScatterChart")g=u,k=Tle;else if(c==="BarChart")g=Ole(o,u,a,i),k=kq;else if(o==="radial"){var{cx:y,cy:N,radius:S,startAngle:O,endAngle:A}=Nq(u);g={cx:y,cy:N,startAngle:O,endAngle:A,innerRadius:S,outerRadius:S},k=Sq}else g={points:mce(o,u,a)},k=C1;var P=typeof l=="object"&&"className"in l?l.className:void 0,q=Y2(Y2(Y2(Y2({stroke:"#ccc",pointerEvents:"none"},a),g),Um(l)),{},{payload:x,payloadIndex:b,className:Zn("recharts-tooltip-cursor",P)});return T.isValidElement(l)?T.cloneElement(l,q):T.createElement(k,q)}function gfe(e){var t=ife(),r=fq(),n=sv(),a=_$();return T.createElement(pfe,_j({},e,{coordinate:e.coordinate,index:e.index,payload:e.payload,offset:r,layout:n,tooltipAxisBandSize:t,chartName:a}))}var E$=T.createContext(null),bfe=()=>T.useContext(E$),KN={exports:{}},TI;function vfe(){return TI||(TI=1,(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function a(d,c,u){this.fn=d,this.context=c,this.once=u||!1}function i(d,c,u,x,b){if(typeof u!="function")throw new TypeError("The listener must be a function");var g=new a(u,x||d,b),k=r?r+c:c;return d._events[k]?d._events[k].fn?d._events[k]=[d._events[k],g]:d._events[k].push(g):(d._events[k]=g,d._eventsCount++),d}function o(d,c){--d._eventsCount===0?d._events=new n:delete d._events[c]}function l(){this._events=new n,this._eventsCount=0}l.prototype.eventNames=function(){var c=[],u,x;if(this._eventsCount===0)return c;for(x in u=this._events)t.call(u,x)&&c.push(r?x.slice(1):x);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(u)):c},l.prototype.listeners=function(c){var u=r?r+c:c,x=this._events[u];if(!x)return[];if(x.fn)return[x.fn];for(var b=0,g=x.length,k=new Array(g);b<g;b++)k[b]=x[b].fn;return k},l.prototype.listenerCount=function(c){var u=r?r+c:c,x=this._events[u];return x?x.fn?1:x.length:0},l.prototype.emit=function(c,u,x,b,g,k){var y=r?r+c:c;if(!this._events[y])return!1;var N=this._events[y],S=arguments.length,O,A;if(N.fn){switch(N.once&&this.removeListener(c,N.fn,void 0,!0),S){case 1:return N.fn.call(N.context),!0;case 2:return N.fn.call(N.context,u),!0;case 3:return N.fn.call(N.context,u,x),!0;case 4:return N.fn.call(N.context,u,x,b),!0;case 5:return N.fn.call(N.context,u,x,b,g),!0;case 6:return N.fn.call(N.context,u,x,b,g,k),!0}for(A=1,O=new Array(S-1);A<S;A++)O[A-1]=arguments[A];N.fn.apply(N.context,O)}else{var P=N.length,q;for(A=0;A<P;A++)switch(N[A].once&&this.removeListener(c,N[A].fn,void 0,!0),S){case 1:N[A].fn.call(N[A].context);break;case 2:N[A].fn.call(N[A].context,u);break;case 3:N[A].fn.call(N[A].context,u,x);break;case 4:N[A].fn.call(N[A].context,u,x,b);break;default:if(!O)for(q=1,O=new Array(S-1);q<S;q++)O[q-1]=arguments[q];N[A].fn.apply(N[A].context,O)}}return!0},l.prototype.on=function(c,u,x){return i(this,c,u,x,!1)},l.prototype.once=function(c,u,x){return i(this,c,u,x,!0)},l.prototype.removeListener=function(c,u,x,b){var g=r?r+c:c;if(!this._events[g])return this;if(!u)return o(this,g),this;var k=this._events[g];if(k.fn)k.fn===u&&(!b||k.once)&&(!x||k.context===x)&&o(this,g);else{for(var y=0,N=[],S=k.length;y<S;y++)(k[y].fn!==u||b&&!k[y].once||x&&k[y].context!==x)&&N.push(k[y]);N.length?this._events[g]=N.length===1?N[0]:N:o(this,g)}return this},l.prototype.removeAllListeners=function(c){var u;return c?(u=r?r+c:c,this._events[u]&&o(this,u)):(this._events=new n,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,e.exports=l})(KN)),KN.exports}var yfe=vfe();const wfe=zc(yfe);var Sb=new wfe,Sj="recharts.syncEvent.tooltip",OI="recharts.syncEvent.brush";function vv(e,t){if(t){var r=Number.parseInt(t,10);if(!Fc(r))return e==null?void 0:e[r]}}var kfe={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},T$=Hc({name:"options",initialState:kfe,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),Nfe=T$.reducer,{createEventEmitter:_fe}=T$.actions;function Sfe(e){return e.tooltip.syncInteraction}var jfe={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},O$=Hc({name:"chartData",initialState:jfe,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:r,endIndex:n}=t.payload;r!=null&&(e.dataStartIndex=r),n!=null&&(e.dataEndIndex=n)}}}),{setChartData:PI,setDataStartEndIndexes:Cfe,setComputedData:q9e}=O$.actions,Afe=O$.reducer,Efe=["x","y"];function II(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function n1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?II(Object(r),!0).forEach(function(n){Tfe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):II(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Tfe(e,t,r){return(t=Ofe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ofe(e){var t=Pfe(e,"string");return typeof t=="symbol"?t:t+""}function Pfe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ife(e,t){if(e==null)return{};var r,n,a=Dfe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Dfe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var P$=()=>{};function Mfe(){var e=tn(qC),t=tn(HC),r=Gs(),n=tn(_H),a=tn(xh),i=sv(),o=s5(),l=tn(d=>d.rootProps.className);T.useEffect(()=>{if(e==null)return P$;var d=(c,u,x)=>{if(t!==x&&e===c){if(n==="index"){var b;if(o&&u!==null&&u!==void 0&&(b=u.payload)!==null&&b!==void 0&&b.coordinate&&u.payload.sourceViewBox){var g=u.payload.coordinate,{x:k,y}=g,N=Ife(g,Efe),{x:S,y:O,width:A,height:P}=u.payload.sourceViewBox,q=n1(n1({},N),{},{x:o.x+(A?(k-S)/A:0)*o.width,y:o.y+(P?(y-O)/P:0)*o.height});r(n1(n1({},u),{},{payload:n1(n1({},u.payload),{},{coordinate:q})}))}else r(u);return}if(a!=null){var W;if(typeof n=="function"){var R={activeTooltipIndex:u.payload.index==null?void 0:Number(u.payload.index),isTooltipActive:u.payload.active,activeIndex:u.payload.index==null?void 0:Number(u.payload.index),activeLabel:u.payload.label,activeDataKey:u.payload.dataKey,activeCoordinate:u.payload.coordinate},U=n(a,R);W=a[U]}else n==="value"&&(W=a.find(ue=>String(ue.value)===u.payload.label));var{coordinate:L}=u.payload;if(W==null||u.payload.active===!1||L==null||o==null){r(kj({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0}));return}var{x:Q,y:H}=L,G=Math.min(Q,o.x+o.width),Z=Math.min(H,o.y+o.height),te={x:i==="horizontal"?W.coordinate:G,y:i==="horizontal"?Z:W.coordinate},se=kj({active:u.payload.active,coordinate:te,dataKey:u.payload.dataKey,index:String(W.index),label:u.payload.label,sourceViewBox:u.payload.sourceViewBox});r(se)}}};return Sb.on(Sj,d),()=>{Sb.off(Sj,d)}},[l,r,t,e,n,a,i,o])}function Lfe(){var e=tn(qC),t=tn(HC),r=Gs();T.useEffect(()=>{if(e==null)return P$;var n=(a,i,o)=>{t!==o&&e===a&&r(Cfe(i))};return Sb.on(OI,n),()=>{Sb.off(OI,n)}},[r,t,e])}function Rfe(){var e=Gs();T.useEffect(()=>{e(_fe())},[e]),Mfe(),Lfe()}function Ffe(e,t,r,n,a,i){var o=tn(g=>lfe(g,e,t)),l=tn(HC),d=tn(qC),c=tn(_H),u=tn(Sfe),x=u==null?void 0:u.active,b=s5();T.useEffect(()=>{if(!x&&d!=null&&l!=null){var g=kj({active:i,coordinate:r,dataKey:o,index:a,label:typeof n=="number"?String(n):n,sourceViewBox:b});Sb.emit(Sj,d,g,l)}},[x,r,o,a,n,l,d,c,i,b])}function DI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function MI(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?DI(Object(r),!0).forEach(function(n){Bfe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):DI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Bfe(e,t,r){return(t=Ufe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ufe(e){var t=zfe(e,"string");return typeof t=="symbol"?t:t+""}function zfe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function qfe(e){return e.dataKey}function Hfe(e,t){return T.isValidElement(e)?T.cloneElement(e,t):typeof e=="function"?T.createElement(e,t):T.createElement(lle,t)}var LI=[],$fe={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!uh.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function zu(e){var t=io(e,$fe),{active:r,allowEscapeViewBox:n,animationDuration:a,animationEasing:i,content:o,filterNull:l,isAnimationActive:d,offset:c,payloadUniqBy:u,position:x,reverseDirection:b,useTranslate3d:g,wrapperStyle:k,cursor:y,shared:N,trigger:S,defaultIndex:O,portal:A,axisId:P}=t,q=Gs(),W=typeof O=="number"?String(O):O;T.useEffect(()=>{q(fhe({shared:N,trigger:S,axisId:P,active:r,defaultIndex:W}))},[q,N,S,P,r,W]);var R=s5(),U=gq(),L=lhe(N),{activeIndex:Q,isActive:H}=tn(ie=>ufe(ie,L,S,W)),G=tn(ie=>dfe(ie,L,S,W)),Z=tn(ie=>A$(ie,L,S,W)),te=tn(ie=>cfe(ie,L,S,W)),se=G,ue=bfe(),ae=r??H,[pe,ve]=Ez([se,ae]),Pe=L==="axis"?Z:void 0;Ffe(L,S,te,Pe,Q,ae);var xe=A??ue;if(xe==null)return null;var B=se??LI;ae||(B=LI),l&&B.length&&(B=_z(se.filter(ie=>ie.value!=null&&(ie.hide!==!0||t.includeHidden)),u,qfe));var re=B.length>0,J=T.createElement(xle,{allowEscapeViewBox:n,animationDuration:a,animationEasing:i,isAnimationActive:d,active:ae,coordinate:te,hasPayload:re,offset:c,position:x,reverseDirection:b,useTranslate3d:g,viewBox:R,wrapperStyle:k,lastBoundingBox:pe,innerRef:ve,hasPortalFromProps:!!A},Hfe(o,MI(MI({},t),{},{payload:B,label:Pe,active:ae,coordinate:te,accessibilityLayer:U})));return T.createElement(T.Fragment,null,cB.createPortal(J,xe),ae&&T.createElement(gfe,{cursor:y,tooltipEventType:L,coordinate:te,payload:se,index:Q}))}var Cp=e=>null;Cp.displayName="Cell";function Vfe(e,t,r){return(t=Wfe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Wfe(e){var t=Gfe(e,"string");return typeof t=="symbol"?t:t+""}function Gfe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class Kfe{constructor(t){Vfe(this,"cache",new Map),this.maxSize=t}get(t){var r=this.cache.get(t);return r!==void 0&&(this.cache.delete(t),this.cache.set(t,r)),r}set(t,r){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var n=this.cache.keys().next().value;this.cache.delete(n)}this.cache.set(t,r)}clear(){this.cache.clear()}size(){return this.cache.size}}function RI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Xfe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?RI(Object(r),!0).forEach(function(n){Yfe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):RI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Yfe(e,t,r){return(t=Qfe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Qfe(e){var t=Zfe(e,"string");return typeof t=="symbol"?t:t+""}function Zfe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Jfe={cacheSize:2e3,enableCache:!0},I$=Xfe({},Jfe),FI=new Kfe(I$.cacheSize),eme={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},BI="recharts_measurement_span";function tme(e,t){var r=t.fontSize||"",n=t.fontFamily||"",a=t.fontWeight||"",i=t.fontStyle||"",o=t.letterSpacing||"",l=t.textTransform||"";return"".concat(e,"|").concat(r,"|").concat(n,"|").concat(a,"|").concat(i,"|").concat(o,"|").concat(l)}var UI=(e,t)=>{try{var r=document.getElementById(BI);r||(r=document.createElement("span"),r.setAttribute("id",BI),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,eme,t),r.textContent="".concat(e);var n=r.getBoundingClientRect();return{width:n.width,height:n.height}}catch{return{width:0,height:0}}},Wg=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||uh.isSsr)return{width:0,height:0};if(!I$.enableCache)return UI(t,r);var n=tme(t,r),a=FI.get(n);if(a)return a;var i=UI(t,r);return FI.set(n,i),i},zI=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,qI=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,rme=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,nme=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,D$={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},ame=Object.keys(D$),y1="NaN";function sme(e,t){return e*D$[t]}class ac{static parse(t){var r,[,n,a]=(r=nme.exec(t))!==null&&r!==void 0?r:[];return new ac(parseFloat(n),a??"")}constructor(t,r){this.num=t,this.unit=r,this.num=t,this.unit=r,Fc(t)&&(this.unit=""),r!==""&&!rme.test(r)&&(this.num=NaN,this.unit=""),ame.includes(r)&&(this.num=sme(t,r),this.unit="px")}add(t){return this.unit!==t.unit?new ac(NaN,""):new ac(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new ac(NaN,""):new ac(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new ac(NaN,""):new ac(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new ac(NaN,""):new ac(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Fc(this.num)}}function M$(e){if(e.includes(y1))return y1;for(var t=e;t.includes("*")||t.includes("/");){var r,[,n,a,i]=(r=zI.exec(t))!==null&&r!==void 0?r:[],o=ac.parse(n??""),l=ac.parse(i??""),d=a==="*"?o.multiply(l):o.divide(l);if(d.isNaN())return y1;t=t.replace(zI,d.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var c,[,u,x,b]=(c=qI.exec(t))!==null&&c!==void 0?c:[],g=ac.parse(u??""),k=ac.parse(b??""),y=x==="+"?g.add(k):g.subtract(k);if(y.isNaN())return y1;t=t.replace(qI,y.toString())}return t}var HI=/\(([^()]*)\)/;function ime(e){for(var t=e,r;(r=HI.exec(t))!=null;){var[,n]=r;t=t.replace(HI,M$(n))}return t}function ome(e){var t=e.replace(/\s+/g,"");return t=ime(t),t=M$(t),t}function lme(e){try{return ome(e)}catch{return y1}}function XN(e){var t=lme(e.slice(5,-1));return t===y1?"":t}var cme=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],dme=["dx","dy","angle","className","breakAll"];function jj(){return jj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},jj.apply(null,arguments)}function $I(e,t){if(e==null)return{};var r,n,a=ume(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function ume(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var L$=/[ \f\n\r\t\v\u2028\u2029]+/,R$=e=>{var{children:t,breakAll:r,style:n}=e;try{var a=[];Is(t)||(r?a=t.toString().split(""):a=t.toString().split(L$));var i=a.map(l=>({word:l,width:Wg(l,n).width})),o=r?0:Wg("",n).width;return{wordsWithComputedWidth:i,spaceWidth:o}}catch{return null}},hme=(e,t,r,n,a)=>{var{maxLines:i,children:o,style:l,breakAll:d}=e,c=Qr(i),u=o,x=function(){var H=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return H.reduce((G,Z)=>{var{word:te,width:se}=Z,ue=G[G.length-1];if(ue&&(n==null||a||ue.width+se+r<Number(n)))ue.words.push(te),ue.width+=se+r;else{var ae={words:[te],width:se};G.push(ae)}return G},[])},b=x(t),g=Q=>Q.reduce((H,G)=>H.width>G.width?H:G);if(!c||a)return b;var k=b.length>i||g(b).width>Number(n);if(!k)return b;for(var y="",N=Q=>{var H=u.slice(0,Q),G=R$({breakAll:d,style:l,children:H+y}).wordsWithComputedWidth,Z=x(G),te=Z.length>i||g(Z).width>Number(n);return[te,Z]},S=0,O=u.length-1,A=0,P;S<=O&&A<=u.length-1;){var q=Math.floor((S+O)/2),W=q-1,[R,U]=N(W),[L]=N(q);if(!R&&!L&&(S=q+1),R&&L&&(O=q-1),!R&&L){P=U;break}A++}return P||b},VI=e=>{var t=Is(e)?[]:e.toString().split(L$);return[{words:t}]},fme=e=>{var{width:t,scaleToFit:r,children:n,style:a,breakAll:i,maxLines:o}=e;if((t||r)&&!uh.isSsr){var l,d,c=R$({breakAll:i,children:n,style:a});if(c){var{wordsWithComputedWidth:u,spaceWidth:x}=c;l=u,d=x}else return VI(n);return hme({breakAll:i,children:n,maxLines:o,style:a},l,d,t,r)}return VI(n)},WI="#808080",S5=T.forwardRef((e,t)=>{var{x:r=0,y:n=0,lineHeight:a="1em",capHeight:i="0.71em",scaleToFit:o=!1,textAnchor:l="start",verticalAnchor:d="end",fill:c=WI}=e,u=$I(e,cme),x=T.useMemo(()=>fme({breakAll:u.breakAll,children:u.children,maxLines:u.maxLines,scaleToFit:o,style:u.style,width:u.width}),[u.breakAll,u.children,u.maxLines,o,u.style,u.width]),{dx:b,dy:g,angle:k,className:y,breakAll:N}=u,S=$I(u,dme);if(!Gu(r)||!Gu(n)||x.length===0)return null;var O=r+(Qr(b)?b:0),A=n+(Qr(g)?g:0),P;switch(d){case"start":P=XN("calc(".concat(i,")"));break;case"middle":P=XN("calc(".concat((x.length-1)/2," * -").concat(a," + (").concat(i," / 2))"));break;default:P=XN("calc(".concat(x.length-1," * -").concat(a,")"));break}var q=[];if(o){var W=x[0].width,{width:R}=u;q.push("scale(".concat(Qr(R)?R/W:1,")"))}return k&&q.push("rotate(".concat(k,", ").concat(O,", ").concat(A,")")),q.length&&(S.transform=q.join(" ")),T.createElement("text",jj({},Dl(S),{ref:t,x:O,y:A,className:Zn("recharts-text",y),textAnchor:l,fill:c.includes("url")?WI:c}),x.map((U,L)=>{var Q=U.words.join(N?"":" ");return T.createElement("tspan",{x:O,dy:L===0?P:a,key:"".concat(Q,"-").concat(L)},Q)}))});S5.displayName="Text";var mme=["labelRef"];function xme(e,t){if(e==null)return{};var r,n,a=pme(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function pme(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function GI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ai(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?GI(Object(r),!0).forEach(function(n){gme(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):GI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function gme(e,t,r){return(t=bme(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bme(e){var t=vme(e,"string");return typeof t=="symbol"?t:t+""}function vme(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function I0(){return I0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},I0.apply(null,arguments)}var F$=T.createContext(null),yme=e=>{var{x:t,y:r,width:n,height:a,children:i}=e,o=T.useMemo(()=>({x:t,y:r,width:n,height:a}),[t,r,n,a]);return T.createElement(F$.Provider,{value:o},i)},B$=()=>{var e=T.useContext(F$),t=s5();return e||t},wme=T.createContext(null),kme=()=>{var e=T.useContext(wme),t=tn(EH);return e||t},Nme=e=>{var{value:t,formatter:r}=e,n=Is(e.children)?t:e.children;return typeof r=="function"?r(n):n},kA=e=>e!=null&&typeof e=="function",_me=(e,t)=>{var r=Co(t-e),n=Math.min(Math.abs(t-e),360);return r*n},Sme=(e,t,r,n,a)=>{var{offset:i,className:o}=e,{cx:l,cy:d,innerRadius:c,outerRadius:u,startAngle:x,endAngle:b,clockWise:g}=a,k=(c+u)/2,y=_me(x,b),N=y>=0?1:-1,S,O;switch(t){case"insideStart":S=x+N*i,O=g;break;case"insideEnd":S=b-N*i,O=!g;break;case"end":S=b+N*i,O=g;break;default:throw new Error("Unsupported position ".concat(t))}O=y<=0?O:!O;var A=$i(l,d,k,S),P=$i(l,d,k,S+(O?1:-1)*359),q="M".concat(A.x,",").concat(A.y,`
    A`).concat(k,",").concat(k,",0,1,").concat(O?0:1,`,
    `).concat(P.x,",").concat(P.y),W=Is(e.id)?mb("recharts-radial-line-"):e.id;return T.createElement("text",I0({},n,{dominantBaseline:"central",className:Zn("recharts-radial-bar-label",o)}),T.createElement("defs",null,T.createElement("path",{id:W,d:q})),T.createElement("textPath",{xlinkHref:"#".concat(W)},r))},jme=(e,t,r)=>{var{cx:n,cy:a,innerRadius:i,outerRadius:o,startAngle:l,endAngle:d}=e,c=(l+d)/2;if(r==="outside"){var{x:u,y:x}=$i(n,a,o+t,c);return{x:u,y:x,textAnchor:u>=n?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"end"};var b=(i+o)/2,{x:g,y:k}=$i(n,a,b,c);return{x:g,y:k,textAnchor:"middle",verticalAnchor:"middle"}},U$=e=>"cx"in e&&Qr(e.cx),Cme=(e,t)=>{var{parentViewBox:r,offset:n,position:a}=e,i;r!=null&&!U$(r)&&(i=r);var{x:o,y:l,width:d,height:c}=t,u=c>=0?1:-1,x=u*n,b=u>0?"end":"start",g=u>0?"start":"end",k=d>=0?1:-1,y=k*n,N=k>0?"end":"start",S=k>0?"start":"end";if(a==="top"){var O={x:o+d/2,y:l-u*n,textAnchor:"middle",verticalAnchor:b};return Ai(Ai({},O),i?{height:Math.max(l-i.y,0),width:d}:{})}if(a==="bottom"){var A={x:o+d/2,y:l+c+x,textAnchor:"middle",verticalAnchor:g};return Ai(Ai({},A),i?{height:Math.max(i.y+i.height-(l+c),0),width:d}:{})}if(a==="left"){var P={x:o-y,y:l+c/2,textAnchor:N,verticalAnchor:"middle"};return Ai(Ai({},P),i?{width:Math.max(P.x-i.x,0),height:c}:{})}if(a==="right"){var q={x:o+d+y,y:l+c/2,textAnchor:S,verticalAnchor:"middle"};return Ai(Ai({},q),i?{width:Math.max(i.x+i.width-q.x,0),height:c}:{})}var W=i?{width:d,height:c}:{};return a==="insideLeft"?Ai({x:o+y,y:l+c/2,textAnchor:S,verticalAnchor:"middle"},W):a==="insideRight"?Ai({x:o+d-y,y:l+c/2,textAnchor:N,verticalAnchor:"middle"},W):a==="insideTop"?Ai({x:o+d/2,y:l+x,textAnchor:"middle",verticalAnchor:g},W):a==="insideBottom"?Ai({x:o+d/2,y:l+c-x,textAnchor:"middle",verticalAnchor:b},W):a==="insideTopLeft"?Ai({x:o+y,y:l+x,textAnchor:S,verticalAnchor:g},W):a==="insideTopRight"?Ai({x:o+d-y,y:l+x,textAnchor:N,verticalAnchor:g},W):a==="insideBottomLeft"?Ai({x:o+y,y:l+c-x,textAnchor:S,verticalAnchor:b},W):a==="insideBottomRight"?Ai({x:o+d-y,y:l+c-x,textAnchor:N,verticalAnchor:b},W):a&&typeof a=="object"&&(Qr(a.x)||th(a.x))&&(Qr(a.y)||th(a.y))?Ai({x:o+dl(a.x,d),y:l+dl(a.y,c),textAnchor:"end",verticalAnchor:"end"},W):Ai({x:o+d/2,y:l+c/2,textAnchor:"middle",verticalAnchor:"middle"},W)},Ame={offset:5};function Yh(e){var t=io(e,Ame),{viewBox:r,position:n,value:a,children:i,content:o,className:l="",textBreakAll:d,labelRef:c}=t,u=kme(),x=B$(),b=n==="center"?x:u??x,g=r||b;if(!g||Is(a)&&Is(i)&&!T.isValidElement(o)&&typeof o!="function")return null;var k=Ai(Ai({},t),{},{viewBox:g});if(T.isValidElement(o)){var{labelRef:y}=k,N=xme(k,mme);return T.cloneElement(o,N)}var S;if(typeof o=="function"){if(S=T.createElement(o,k),T.isValidElement(S))return S}else S=Nme(t);var O=U$(g),A=Dl(t);if(O&&(n==="insideStart"||n==="insideEnd"||n==="end"))return Sme(t,n,S,A,g);var P=O?jme(g,t.offset,t.position):Cme(t,g);return T.createElement(S5,I0({ref:c,className:Zn("recharts-label",l)},A,P,{breakAll:d}),S)}Yh.displayName="Label";var Eme=(e,t,r)=>{if(!e)return null;var n={viewBox:t,labelRef:r};return e===!0?T.createElement(Yh,I0({key:"label-implicit"},n)):Gu(e)?T.createElement(Yh,I0({key:"label-implicit",value:e},n)):T.isValidElement(e)?e.type===Yh?T.cloneElement(e,Ai({key:"label-implicit"},n)):T.createElement(Yh,I0({key:"label-implicit",content:e},n)):kA(e)?T.createElement(Yh,I0({key:"label-implicit",content:e},n)):e&&typeof e=="object"?T.createElement(Yh,I0({},e,{key:"label-implicit"},n)):null};function Tme(e){var{label:t,labelRef:r}=e,n=B$();return Eme(t,n,r)||null}var YN={},QN={},KI;function Ome(){return KI||(KI=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r[r.length-1]}e.last=t})(QN)),QN}var ZN={},XI;function Pme(){return XI||(XI=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Array.isArray(r)?r:Array.from(r)}e.toArray=t})(ZN)),ZN}var YI;function Ime(){return YI||(YI=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Ome(),r=Pme(),n=nC();function a(i){if(n.isArrayLike(i))return t.last(r.toArray(i))}e.last=a})(YN)),YN}var JN,QI;function Dme(){return QI||(QI=1,JN=Ime().last),JN}var Mme=Dme();const Lme=zc(Mme);var Rme=["valueAccessor"],Fme=["dataKey","clockWise","id","textBreakAll"];function tk(){return tk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},tk.apply(null,arguments)}function ZI(e,t){if(e==null)return{};var r,n,a=Bme(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Bme(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Ume=e=>Array.isArray(e.value)?Lme(e.value):e.value,z$=T.createContext(void 0),NA=z$.Provider,q$=T.createContext(void 0),zme=q$.Provider;function qme(){return T.useContext(z$)}function Hme(){return T.useContext(q$)}function iw(e){var{valueAccessor:t=Ume}=e,r=ZI(e,Rme),{dataKey:n,clockWise:a,id:i,textBreakAll:o}=r,l=ZI(r,Fme),d=qme(),c=Hme(),u=d||c;return!u||!u.length?null:T.createElement(pi,{className:"recharts-label-list"},u.map((x,b)=>{var g,k=Is(n)?t(x,b):os(x&&x.payload,n),y=Is(i)?{}:{id:"".concat(i,"-").concat(b)};return T.createElement(Yh,tk({key:"label-".concat(b)},Dl(x),l,y,{fill:(g=r.fill)!==null&&g!==void 0?g:x.fill,parentViewBox:x.parentViewBox,value:k,textBreakAll:o,viewBox:x.viewBox,index:b}))}))}iw.displayName="LabelList";function j5(e){var{label:t}=e;return t?t===!0?T.createElement(iw,{key:"labelList-implicit"}):T.isValidElement(t)||kA(t)?T.createElement(iw,{key:"labelList-implicit",content:t}):typeof t=="object"?T.createElement(iw,tk({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}function Cj(){return Cj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Cj.apply(null,arguments)}var _A=e=>{var{cx:t,cy:r,r:n,className:a}=e,i=Zn("recharts-dot",a);return t===+t&&r===+r&&n===+n?T.createElement("circle",Cj({},Il(e),eC(e),{className:i,cx:t,cy:r,r:n})):null},H$=e=>e.graphicalItems.polarItems,$me=jt([Ks,hv],KC),C5=jt([H$,ti,$me],XC),Vme=jt([C5],YC),A5=jt([Vme,FC],QC),Wme=jt([A5,ti,C5],JC);jt([A5,ti,C5],(e,t,r)=>r.length>0?e.flatMap(n=>r.flatMap(a=>{var i,o=os(n,(i=t.dataKey)!==null&&i!==void 0?i:a.dataKey);return{value:o,errorDomain:[]}})).filter(Boolean):(t==null?void 0:t.dataKey)!=null?e.map(n=>({value:os(n,t.dataKey),errorDomain:[]})):e.map(n=>({value:n,errorDomain:[]})));var JI=()=>{},Gme=jt([A5,ti,C5,w5,Ks],nA),Kme=jt([ti,tA,rA,JI,Gme,JI,pa,Ks],aA),$$=jt([ti,pa,A5,Wme,uv,Ks,Kme],sA),Xme=jt([$$,ti,Np],lA);jt([ti,$$,Xme,Ks],dA);var Yme={radiusAxis:{},angleAxis:{}},V$=Hc({name:"polarAxis",initialState:Yme,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:H9e,removeRadiusAxis:$9e,addAngleAxis:V9e,removeAngleAxis:W9e}=V$.actions,Qme=V$.reducer;function eD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function tD(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?eD(Object(r),!0).forEach(function(n){Zme(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eD(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Zme(e,t,r){return(t=Jme(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Jme(e){var t=exe(e,"string");return typeof t=="symbol"?t:t+""}function exe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var txe=(e,t)=>t,SA=jt([H$,txe],(e,t)=>e.filter(r=>r.type==="pie").find(r=>r.id===t)),rxe=[],jA=(e,t,r)=>(r==null?void 0:r.length)===0?rxe:r,W$=jt([FC,SA,jA],(e,t,r)=>{var{chartData:n}=e;if(t!=null){var a;if((t==null?void 0:t.data)!=null&&t.data.length>0?a=t.data:a=n,(!a||!a.length)&&r!=null&&(a=r.map(i=>tD(tD({},t.presentationProps),i.props))),a!=null)return a}}),nxe=jt([W$,SA,jA],(e,t,r)=>{if(!(e==null||t==null))return e.map((n,a)=>{var i,o=os(n,t.nameKey,t.name),l;return r!=null&&(i=r[a])!==null&&i!==void 0&&(i=i.props)!==null&&i!==void 0&&i.fill?l=r[a].props.fill:typeof n=="object"&&n!=null&&"fill"in n?l=n.fill:l=t.fill,{value:Sf(o,t.dataKey),color:l,payload:n,type:t.legendType}})}),axe=jt([W$,SA,jA,so],(e,t,r,n)=>{if(!(t==null||e==null))return a1e({offset:n,pieSettings:t,displayedData:e,cells:r})}),e_={exports:{}},ss={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rD;function sxe(){if(rD)return ss;rD=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),c=Symbol.for("react.suspense_list"),u=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),b=Symbol.for("react.view_transition"),g=Symbol.for("react.client.reference");function k(y){if(typeof y=="object"&&y!==null){var N=y.$$typeof;switch(N){case e:switch(y=y.type,y){case r:case a:case n:case d:case c:case b:return y;default:switch(y=y&&y.$$typeof,y){case o:case l:case x:case u:return y;case i:return y;default:return N}}case t:return N}}}return ss.ContextConsumer=i,ss.ContextProvider=o,ss.Element=e,ss.ForwardRef=l,ss.Fragment=r,ss.Lazy=x,ss.Memo=u,ss.Portal=t,ss.Profiler=a,ss.StrictMode=n,ss.Suspense=d,ss.SuspenseList=c,ss.isContextConsumer=function(y){return k(y)===i},ss.isContextProvider=function(y){return k(y)===o},ss.isElement=function(y){return typeof y=="object"&&y!==null&&y.$$typeof===e},ss.isForwardRef=function(y){return k(y)===l},ss.isFragment=function(y){return k(y)===r},ss.isLazy=function(y){return k(y)===x},ss.isMemo=function(y){return k(y)===u},ss.isPortal=function(y){return k(y)===t},ss.isProfiler=function(y){return k(y)===a},ss.isStrictMode=function(y){return k(y)===n},ss.isSuspense=function(y){return k(y)===d},ss.isSuspenseList=function(y){return k(y)===c},ss.isValidElementType=function(y){return typeof y=="string"||typeof y=="function"||y===r||y===a||y===n||y===d||y===c||typeof y=="object"&&y!==null&&(y.$$typeof===x||y.$$typeof===u||y.$$typeof===o||y.$$typeof===i||y.$$typeof===l||y.$$typeof===g||y.getModuleId!==void 0)},ss.typeOf=k,ss}var nD;function ixe(){return nD||(nD=1,e_.exports=sxe()),e_.exports}var oxe=ixe(),aD=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",sD=null,t_=null,G$=e=>{if(e===sD&&Array.isArray(t_))return t_;var t=[];return T.Children.forEach(e,r=>{Is(r)||(oxe.isFragment(r)?t=t.concat(G$(r.props.children)):t.push(r))}),t_=t,sD=e,t};function CA(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(a=>aD(a)):n=[aD(t)],G$(e).forEach(a=>{var i=zm(a,"type.displayName")||zm(a,"type.name");n.indexOf(i)!==-1&&r.push(a)}),r}var E5=e=>e&&typeof e=="object"&&"clipDot"in e?!!e.clipDot:!0,r_={},iD;function lxe(){return iD||(iD=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var a;if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){const i=r[Symbol.toStringTag];return i==null||!((a=Object.getOwnPropertyDescriptor(r,Symbol.toStringTag))!=null&&a.writable)?!1:r.toString()===`[object ${i}]`}let n=r;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(r)===n}e.isPlainObject=t})(r_)),r_}var n_,oD;function cxe(){return oD||(oD=1,n_=lxe().isPlainObject),n_}var dxe=cxe();const uxe=zc(dxe);function lD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function cD(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?lD(Object(r),!0).forEach(function(n){hxe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lD(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function hxe(e,t,r){return(t=fxe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fxe(e){var t=mxe(e,"string");return typeof t=="symbol"?t:t+""}function mxe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function rk(){return rk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},rk.apply(null,arguments)}var dD=(e,t,r,n,a)=>{var i=r-n,o;return o="M ".concat(e,",").concat(t),o+="L ".concat(e+r,",").concat(t),o+="L ".concat(e+r-i/2,",").concat(t+a),o+="L ".concat(e+r-i/2-n,",").concat(t+a),o+="L ".concat(e,",").concat(t," Z"),o},xxe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},pxe=e=>{var t=io(e,xxe),{x:r,y:n,upperWidth:a,lowerWidth:i,height:o,className:l}=t,{animationEasing:d,animationDuration:c,animationBegin:u,isUpdateAnimationActive:x}=t,b=T.useRef(null),[g,k]=T.useState(-1),y=T.useRef(a),N=T.useRef(i),S=T.useRef(o),O=T.useRef(r),A=T.useRef(n),P=pp(e,"trapezoid-");if(T.useEffect(()=>{if(b.current&&b.current.getTotalLength)try{var te=b.current.getTotalLength();te&&k(te)}catch{}},[]),r!==+r||n!==+n||a!==+a||i!==+i||o!==+o||a===0&&i===0||o===0)return null;var q=Zn("recharts-trapezoid",l);if(!x)return T.createElement("g",null,T.createElement("path",rk({},Dl(t),{className:q,d:dD(r,n,a,i,o)})));var W=y.current,R=N.current,U=S.current,L=O.current,Q=A.current,H="0px ".concat(g===-1?1:g,"px"),G="".concat(g,"px 0px"),Z=bq(["strokeDasharray"],c,d);return T.createElement(xp,{animationId:P,key:P,canBegin:g>0,duration:c,easing:d,isActive:x,begin:u},te=>{var se=is(W,a,te),ue=is(R,i,te),ae=is(U,o,te),pe=is(L,r,te),ve=is(Q,n,te);b.current&&(y.current=se,N.current=ue,S.current=ae,O.current=pe,A.current=ve);var Pe=te>0?{transition:Z,strokeDasharray:G}:{strokeDasharray:H};return T.createElement("path",rk({},Dl(t),{className:q,d:dD(pe,ve,se,ue,ae),ref:b,style:cD(cD({},Pe),t.style)}))})},gxe=["option","shapeType","propTransformer","activeClassName","isActive"];function bxe(e,t){if(e==null)return{};var r,n,a=vxe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function vxe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function uD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function nk(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?uD(Object(r),!0).forEach(function(n){yxe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uD(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function yxe(e,t,r){return(t=wxe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wxe(e){var t=kxe(e,"string");return typeof t=="symbol"?t:t+""}function kxe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Nxe(e,t){return nk(nk({},t),e)}function _xe(e,t){return e==="symbols"}function hD(e){var{shapeType:t,elementProps:r}=e;switch(t){case"rectangle":return T.createElement(kq,r);case"trapezoid":return T.createElement(pxe,r);case"sector":return T.createElement(Sq,r);case"symbols":if(_xe(t))return T.createElement(J6,r);break;default:return null}}function Sxe(e){return T.isValidElement(e)?e.props:e}function K$(e){var{option:t,shapeType:r,propTransformer:n=Nxe,activeClassName:a="recharts-active-shape",isActive:i}=e,o=bxe(e,gxe),l;if(T.isValidElement(t))l=T.cloneElement(t,nk(nk({},o),Sxe(t)));else if(typeof t=="function")l=t(o);else if(uxe(t)&&typeof t!="boolean"){var d=n(t,o);l=T.createElement(hD,{shapeType:r,elementProps:d})}else{var c=o;l=T.createElement(hD,{shapeType:r,elementProps:c})}return i?T.createElement(pi,{className:a},l):l}var AA=(e,t)=>{var r=Gs();return(n,a)=>i=>{e==null||e(n,a,i),r(o$({activeIndex:String(a),activeDataKey:t,activeCoordinate:n.tooltipPosition}))}},EA=e=>{var t=Gs();return(r,n)=>a=>{e==null||e(r,n,a),t(mhe())}},TA=(e,t)=>{var r=Gs();return(n,a)=>i=>{e==null||e(n,a,i),r(xhe({activeIndex:String(a),activeDataKey:t,activeCoordinate:n.tooltipPosition}))}};function T5(e){var{fn:t,args:r}=e,n=Gs(),a=qo();return T.useLayoutEffect(()=>{if(!a){var i=t(r);return n(uhe(i)),()=>{n(hhe(i))}}},[t,r,n,a]),null}var X$=()=>{};function OA(e){var{legendPayload:t}=e,r=Gs(),n=qo();return T.useLayoutEffect(()=>n?X$:(r(xq(t)),()=>{r(pq(t))}),[r,n,t]),null}function jxe(e){var{legendPayload:t}=e,r=Gs(),n=tn(pa);return T.useLayoutEffect(()=>n!=="centric"&&n!=="radial"?X$:(r(xq(t)),()=>{r(pq(t))}),[r,n,t]),null}var a_,Cxe=()=>{var[e]=T.useState(()=>mb("uid-"));return e},Axe=(a_=LY.useId)!==null&&a_!==void 0?a_:Cxe;function Exe(e,t){var r=Axe();return t||(e?"".concat(e,"-").concat(r):r)}var Txe=T.createContext(void 0),O5=e=>{var{id:t,type:r,children:n}=e,a=Exe("recharts-".concat(r),t);return T.createElement(Txe.Provider,{value:a},n(a))},Oxe={cartesianItems:[],polarItems:[]},Y$=Hc({name:"graphicalItems",initialState:Oxe,reducers:{addCartesianGraphicalItem:{reducer(e,t){e.cartesianItems.push(t.payload)},prepare:Al()},replaceCartesianGraphicalItem:{reducer(e,t){var{prev:r,next:n}=t.payload,a=H0(e).cartesianItems.indexOf(r);a>-1&&(e.cartesianItems[a]=n)},prepare:Al()},removeCartesianGraphicalItem:{reducer(e,t){var r=H0(e).cartesianItems.indexOf(t.payload);r>-1&&e.cartesianItems.splice(r,1)},prepare:Al()},addPolarGraphicalItem:{reducer(e,t){e.polarItems.push(t.payload)},prepare:Al()},removePolarGraphicalItem:{reducer(e,t){var r=H0(e).polarItems.indexOf(t.payload);r>-1&&e.polarItems.splice(r,1)},prepare:Al()}}}),{addCartesianGraphicalItem:Pxe,replaceCartesianGraphicalItem:Ixe,removeCartesianGraphicalItem:Dxe,addPolarGraphicalItem:Mxe,removePolarGraphicalItem:Lxe}=Y$.actions,Rxe=Y$.reducer;function PA(e){var t=Gs(),r=T.useRef(null);return T.useLayoutEffect(()=>{r.current===null?t(Pxe(e)):r.current!==e&&t(Ixe({prev:r.current,next:e})),r.current=e},[t,e]),T.useLayoutEffect(()=>()=>{r.current&&(t(Dxe(r.current)),r.current=null)},[t]),null}function Fxe(e){var t=Gs();return T.useLayoutEffect(()=>(t(Mxe(e)),()=>{t(Lxe(e))}),[t,e]),null}var Bxe=["onMouseEnter","onClick","onMouseLeave"],Uxe=["id"],zxe=["id"];function IA(e,t){if(e==null)return{};var r,n,a=qxe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function qxe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function fD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Hs(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?fD(Object(r),!0).forEach(function(n){Hxe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fD(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Hxe(e,t,r){return(t=$xe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $xe(e){var t=Vxe(e,"string");return typeof t=="symbol"?t:t+""}function Vxe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function gf(){return gf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},gf.apply(null,arguments)}function Wxe(e){var t=T.useMemo(()=>CA(e.children,Cp),[e.children]),r=tn(n=>nxe(n,e.id,t));return r==null?null:T.createElement(jxe,{legendPayload:r})}function Gxe(e){var{dataKey:t,nameKey:r,sectors:n,stroke:a,strokeWidth:i,fill:o,name:l,hide:d,tooltipType:c}=e;return{dataDefinedOnItem:n.map(u=>u.tooltipPayload),positions:n.map(u=>u.tooltipPosition),settings:{stroke:a,strokeWidth:i,fill:o,dataKey:t,nameKey:r,name:Sf(l,t),hide:d,type:c,color:o,unit:""}}}var Kxe=(e,t)=>e>t?"start":e<t?"end":"middle",Xxe=(e,t,r)=>dl(typeof t=="function"?t(e):t,r,r*.8),Yxe=(e,t,r)=>{var{top:n,left:a,width:i,height:o}=t,l=rq(i,o),d=a+dl(e.cx,i,i/2),c=n+dl(e.cy,o,o/2),u=dl(e.innerRadius,l,0),x=Xxe(r,e.outerRadius,l),b=e.maxRadius||Math.sqrt(i*i+o*o)/2;return{cx:d,cy:c,innerRadius:u,outerRadius:x,maxRadius:b}},Qxe=(e,t)=>{var r=Co(t-e),n=Math.min(Math.abs(t-e),360);return r*n};function Zxe(e){return e&&typeof e=="object"&&"className"in e&&typeof e.className=="string"?e.className:""}var Jxe=(e,t)=>{if(T.isValidElement(e))return T.cloneElement(e,t);if(typeof e=="function")return e(t);var r=Zn("recharts-pie-label-line",typeof e!="boolean"?e.className:"");return T.createElement(C1,gf({},t,{type:"linear",className:r}))},e1e=(e,t,r)=>{if(T.isValidElement(e))return T.cloneElement(e,t);var n=r;if(typeof e=="function"&&(n=e(t),T.isValidElement(n)))return n;var a=Zn("recharts-pie-label-text",Zxe(e));return T.createElement(S5,gf({},t,{alignmentBaseline:"middle",className:a}),n)};function t1e(e){var{sectors:t,props:r,showLabels:n}=e,{label:a,labelLine:i,dataKey:o}=r;if(!n||!a||!t)return null;var l=Il(r),d=Um(a),c=Um(i),u=typeof a=="object"&&"offsetRadius"in a&&typeof a.offsetRadius=="number"&&a.offsetRadius||20,x=t.map((b,g)=>{var k=(b.startAngle+b.endAngle)/2,y=$i(b.cx,b.cy,b.outerRadius+u,k),N=Hs(Hs(Hs(Hs({},l),b),{},{stroke:"none"},d),{},{index:g,textAnchor:Kxe(y.x,b.cx)},y),S=Hs(Hs(Hs(Hs({},l),b),{},{fill:"none",stroke:b.fill},c),{},{index:g,points:[$i(b.cx,b.cy,b.outerRadius,k),y],key:"line"});return T.createElement(pi,{key:"label-".concat(b.startAngle,"-").concat(b.endAngle,"-").concat(b.midAngle,"-").concat(g)},i&&Jxe(i,S),e1e(a,N,os(b,o)))});return T.createElement(pi,{className:"recharts-pie-labels"},x)}function r1e(e){var{sectors:t,props:r,showLabels:n}=e,{label:a}=r;return typeof a=="object"&&a!=null&&"position"in a?T.createElement(j5,{label:a}):T.createElement(t1e,{sectors:t,props:r,showLabels:n})}function n1e(e){var{sectors:t,activeShape:r,inactiveShape:n,allOtherPieProps:a}=e,i=tn(pf),{onMouseEnter:o,onClick:l,onMouseLeave:d}=a,c=IA(a,Bxe),u=AA(o,a.dataKey),x=EA(d),b=TA(l,a.dataKey);return t==null||t.length===0?null:T.createElement(T.Fragment,null,t.map((g,k)=>{if((g==null?void 0:g.startAngle)===0&&(g==null?void 0:g.endAngle)===0&&t.length!==1)return null;var y=r&&String(k)===i,N=i?n:null,S=y?r:N,O=Hs(Hs({},g),{},{stroke:g.stroke,tabIndex:-1,[lq]:k,[cq]:a.dataKey});return T.createElement(pi,gf({key:"sector-".concat(g==null?void 0:g.startAngle,"-").concat(g==null?void 0:g.endAngle,"-").concat(g.midAngle,"-").concat(k),tabIndex:-1,className:"recharts-pie-sector"},tv(c,g,k),{onMouseEnter:u(g,k),onMouseLeave:x(g,k),onClick:b(g,k)}),T.createElement(K$,gf({option:S,isActive:y,shapeType:"sector"},O)))}))}function a1e(e){var t,{pieSettings:r,displayedData:n,cells:a,offset:i}=e,{cornerRadius:o,startAngle:l,endAngle:d,dataKey:c,nameKey:u,tooltipType:x}=r,b=Math.abs(r.minAngle),g=Qxe(l,d),k=Math.abs(g),y=n.length<=1?0:(t=r.paddingAngle)!==null&&t!==void 0?t:0,N=n.filter(W=>os(W,c,0)!==0).length,S=(k>=360?N:N-1)*y,O=k-N*b-S,A=n.reduce((W,R)=>{var U=os(R,c,0);return W+(Qr(U)?U:0)},0),P;if(A>0){var q;P=n.map((W,R)=>{var U=os(W,c,0),L=os(W,u,R),Q=Yxe(r,i,W),H=(Qr(U)?U:0)/A,G,Z=Hs(Hs({},W),a&&a[R]&&a[R].props);R?G=q.endAngle+Co(g)*y*(U!==0?1:0):G=l;var te=G+Co(g)*((U!==0?b:0)+H*O),se=(G+te)/2,ue=(Q.innerRadius+Q.outerRadius)/2,ae=[{name:L,value:U,payload:Z,dataKey:c,type:x}],pe=$i(Q.cx,Q.cy,ue,se);return q=Hs(Hs(Hs(Hs({},r.presentationProps),{},{percent:H,cornerRadius:o,name:L,tooltipPayload:ae,midAngle:se,middleRadius:ue,tooltipPosition:pe},Z),Q),{},{value:U,startAngle:G,endAngle:te,payload:Z,paddingAngle:Co(g)*y}),q})}return P}function s1e(e){var{showLabels:t,sectors:r,children:n}=e,a=T.useMemo(()=>!t||!r?[]:r.map(i=>({value:i.value,payload:i.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:i.cx,cy:i.cy,innerRadius:i.innerRadius,outerRadius:i.outerRadius,startAngle:i.startAngle,endAngle:i.endAngle,clockWise:!1},fill:i.fill})),[r,t]);return T.createElement(zme,{value:t?a:void 0},n)}function i1e(e){var{props:t,previousSectorsRef:r}=e,{sectors:n,isAnimationActive:a,animationBegin:i,animationDuration:o,animationEasing:l,activeShape:d,inactiveShape:c,onAnimationStart:u,onAnimationEnd:x}=t,b=pp(t,"recharts-pie-"),g=r.current,[k,y]=T.useState(!1),N=T.useCallback(()=>{typeof x=="function"&&x(),y(!1)},[x]),S=T.useCallback(()=>{typeof u=="function"&&u(),y(!0)},[u]);return T.createElement(s1e,{showLabels:!k,sectors:n},T.createElement(xp,{animationId:b,begin:i,duration:o,isActive:a,easing:l,onAnimationStart:S,onAnimationEnd:N,key:b},O=>{var A=[],P=n&&n[0],q=P==null?void 0:P.startAngle;return n==null||n.forEach((W,R)=>{var U=g&&g[R],L=R>0?zm(W,"paddingAngle",0):0;if(U){var Q=is(U.endAngle-U.startAngle,W.endAngle-W.startAngle,O),H=Hs(Hs({},W),{},{startAngle:q+L,endAngle:q+Q+L});A.push(H),q=H.endAngle}else{var{endAngle:G,startAngle:Z}=W,te=is(0,G-Z,O),se=Hs(Hs({},W),{},{startAngle:q+L,endAngle:q+te+L});A.push(se),q=se.endAngle}}),r.current=A,T.createElement(pi,null,T.createElement(n1e,{sectors:A,activeShape:d,inactiveShape:c,allOtherPieProps:t}))}),T.createElement(r1e,{showLabels:!k,sectors:n,props:t}),t.children)}var o1e={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:!uh.isSsr,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff"};function l1e(e){var{id:t}=e,r=IA(e,Uxe),{hide:n,className:a,rootTabIndex:i}=e,o=T.useMemo(()=>CA(e.children,Cp),[e.children]),l=tn(u=>axe(u,t,o)),d=T.useRef(null),c=Zn("recharts-pie",a);return n||l==null?(d.current=null,T.createElement(pi,{tabIndex:i,className:c})):T.createElement(T.Fragment,null,T.createElement(T5,{fn:Gxe,args:Hs(Hs({},e),{},{sectors:l})}),T.createElement(pi,{tabIndex:i,className:c},T.createElement(i1e,{props:Hs(Hs({},r),{},{sectors:l}),previousSectorsRef:d})))}function DA(e){var t=io(e,o1e),{id:r}=t,n=IA(t,zxe),a=Il(n);return T.createElement(O5,{id:r,type:"pie"},i=>T.createElement(T.Fragment,null,T.createElement(Fxe,{type:"pie",id:i,data:n.data,dataKey:n.dataKey,hide:n.hide,angleAxisId:0,radiusAxisId:0,name:n.name,nameKey:n.nameKey,tooltipType:n.tooltipType,legendType:n.legendType,fill:n.fill,cx:n.cx,cy:n.cy,startAngle:n.startAngle,endAngle:n.endAngle,paddingAngle:n.paddingAngle,minAngle:n.minAngle,innerRadius:n.innerRadius,outerRadius:n.outerRadius,cornerRadius:n.cornerRadius,presentationProps:a,maxRadius:t.maxRadius}),T.createElement(Wxe,gf({},n,{id:i})),T.createElement(l1e,gf({},n,{id:i}))))}DA.displayName="Pie";function mD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function xD(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?mD(Object(r),!0).forEach(function(n){c1e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mD(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function c1e(e,t,r){return(t=d1e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d1e(e){var t=u1e(e,"string");return typeof t=="symbol"?t:t+""}function u1e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var h1e={xAxis:{},yAxis:{},zAxis:{}},Q$=Hc({name:"cartesianAxis",initialState:h1e,reducers:{addXAxis:{reducer(e,t){e.xAxis[t.payload.id]=t.payload},prepare:Al()},removeXAxis:{reducer(e,t){delete e.xAxis[t.payload.id]},prepare:Al()},addYAxis:{reducer(e,t){e.yAxis[t.payload.id]=t.payload},prepare:Al()},removeYAxis:{reducer(e,t){delete e.yAxis[t.payload.id]},prepare:Al()},addZAxis:{reducer(e,t){e.zAxis[t.payload.id]=t.payload},prepare:Al()},removeZAxis:{reducer(e,t){delete e.zAxis[t.payload.id]},prepare:Al()},updateYAxisWidth(e,t){var{id:r,width:n}=t.payload,a=e.yAxis[r];if(a){var i=a.widthHistory||[];if(i.length===3&&i[0]===i[2]&&n===i[1]&&n!==a.width&&Math.abs(n-i[0])<=1)return;var o=[...i,n].slice(-3);e.yAxis[r]=xD(xD({},e.yAxis[r]),{},{width:n,widthHistory:o})}}}}),{addXAxis:f1e,removeXAxis:m1e,addYAxis:x1e,removeYAxis:p1e,addZAxis:G9e,removeZAxis:K9e,updateYAxisWidth:g1e}=Q$.actions,b1e=Q$.reducer,v1e=jt([so],e=>{if(e)return{top:e.top,bottom:e.bottom,left:e.left,right:e.right}}),y1e=jt([v1e,ch,dh],(e,t,r)=>{if(!(!e||t==null||r==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,r-e.top-e.bottom)}}),P5=()=>tn(y1e),w1e=()=>tn(tfe);function pD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function gD(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?pD(Object(r),!0).forEach(function(n){k1e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pD(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function k1e(e,t,r){return(t=N1e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function N1e(e){var t=_1e(e,"string");return typeof t=="symbol"?t:t+""}function _1e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var S1e=e=>{var{point:t,childIndex:r,mainColor:n,activeDot:a,dataKey:i}=e;if(a===!1||t.x==null||t.y==null)return null;var o=gD(gD({index:r,dataKey:i,cx:t.x,cy:t.y,r:4,fill:n??"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},Um(a)),eC(a)),l;return T.isValidElement(a)?l=T.cloneElement(a,o):typeof a=="function"?l=a(o):l=T.createElement(_A,o),T.createElement(pi,{className:"recharts-active-dot"},l)};function Aj(e){var{points:t,mainColor:r,activeDot:n,itemDataKey:a}=e,i=tn(pf),o=w1e();if(t==null||o==null)return null;var l=t.find(d=>o.includes(d.payload));return Is(l)?null:S1e({point:l,childIndex:Number(i),mainColor:r,dataKey:a,activeDot:n})}var j1e="Invariant failed";function C1e(e,t){throw new Error(j1e)}var A1e=["x","y"];function Ej(){return Ej=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ej.apply(null,arguments)}function bD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ng(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?bD(Object(r),!0).forEach(function(n){E1e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bD(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function E1e(e,t,r){return(t=T1e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function T1e(e){var t=O1e(e,"string");return typeof t=="symbol"?t:t+""}function O1e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function P1e(e,t){if(e==null)return{};var r,n,a=I1e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function I1e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function D1e(e,t){var{x:r,y:n}=e,a=P1e(e,A1e),i="".concat(r),o=parseInt(i,10),l="".concat(n),d=parseInt(l,10),c="".concat(t.height||a.height),u=parseInt(c,10),x="".concat(t.width||a.width),b=parseInt(x,10);return Ng(Ng(Ng(Ng(Ng({},t),a),o?{x:o}:{}),d?{y:d}:{}),{},{height:u,width:b,name:t.name,radius:t.radius})}function MA(e){return T.createElement(K$,Ej({shapeType:"rectangle",propTransformer:D1e,activeClassName:"recharts-active-bar"},e))}var M1e=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(n,a)=>{if(Qr(t))return t;var i=Qr(n)||Is(n);return i?t(n,a):(i||C1e(),r)}},L1e={},Z$=Hc({name:"errorBars",initialState:L1e,reducers:{addErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]||(e[r]=[]),e[r].push(n)},replaceErrorBar:(e,t)=>{var{itemId:r,prev:n,next:a}=t.payload;e[r]&&(e[r]=e[r].map(i=>i.dataKey===n.dataKey&&i.direction===n.direction?a:i))},removeErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]&&(e[r]=e[r].filter(a=>a.dataKey!==n.dataKey||a.direction!==n.direction))}}}),{addErrorBar:X9e,replaceErrorBar:Y9e,removeErrorBar:Q9e}=Z$.actions,R1e=Z$.reducer,F1e=["children"];function B1e(e,t){if(e==null)return{};var r,n,a=U1e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function U1e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var z1e={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},q1e=T.createContext(z1e);function J$(e){var{children:t}=e,r=B1e(e,F1e);return T.createElement(q1e.Provider,{value:r},t)}function I5(e,t){var r,n,a=tn(c=>fh(c,e)),i=tn(c=>mh(c,t)),o=(r=a==null?void 0:a.allowDataOverflow)!==null&&r!==void 0?r:kc.allowDataOverflow,l=(n=i==null?void 0:i.allowDataOverflow)!==null&&n!==void 0?n:Nc.allowDataOverflow,d=o||l;return{needClip:d,needClipX:o,needClipY:l}}function LA(e){var{xAxisId:t,yAxisId:r,clipPathId:n}=e,a=P5(),{needClipX:i,needClipY:o,needClip:l}=I5(t,r);if(!l)return null;var{x:d,y:c,width:u,height:x}=a;return T.createElement("clipPath",{id:"clipPath-".concat(n)},T.createElement("rect",{x:i?d:d-u/2,y:o?c:c-x/2,width:i?u:u*2,height:o?x:x*2}))}var H1e=["onMouseEnter","onMouseLeave","onClick"],$1e=["value","background","tooltipPosition"],V1e=["id"],W1e=["onMouseEnter","onClick","onMouseLeave"];function bf(){return bf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},bf.apply(null,arguments)}function vD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function El(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?vD(Object(r),!0).forEach(function(n){G1e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vD(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function G1e(e,t,r){return(t=K1e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function K1e(e){var t=X1e(e,"string");return typeof t=="symbol"?t:t+""}function X1e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ak(e,t){if(e==null)return{};var r,n,a=Y1e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Y1e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Q1e=e=>{var{dataKey:t,name:r,fill:n,legendType:a,hide:i}=e;return[{inactive:i,dataKey:t,type:a,color:n,value:Sf(r,t),payload:e}]};function Z1e(e){var{dataKey:t,stroke:r,strokeWidth:n,fill:a,name:i,hide:o,unit:l}=e;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:n,fill:a,dataKey:t,nameKey:void 0,name:Sf(i,t),hide:o,type:e.tooltipType,color:e.fill,unit:l}}}function J1e(e){var t=tn(pf),{data:r,dataKey:n,background:a,allOtherBarProps:i}=e,{onMouseEnter:o,onMouseLeave:l,onClick:d}=i,c=ak(i,H1e),u=AA(o,n),x=EA(l),b=TA(d,n);if(!a||r==null)return null;var g=Um(a);return T.createElement(T.Fragment,null,r.map((k,y)=>{var{value:N,background:S,tooltipPosition:O}=k,A=ak(k,$1e);if(!S)return null;var P=u(k,y),q=x(k,y),W=b(k,y),R=El(El(El(El(El({option:a,isActive:String(y)===t},A),{},{fill:"#eee"},S),g),tv(c,k,y)),{},{onMouseEnter:P,onMouseLeave:q,onClick:W,dataKey:n,index:y,className:"recharts-bar-background-rectangle"});return T.createElement(MA,bf({key:"background-bar-".concat(y)},R))}))}function epe(e){var{showLabels:t,children:r,rects:n}=e,a=n==null?void 0:n.map(i=>{var o={x:i.x,y:i.y,width:i.width,height:i.height};return El(El({},o),{},{value:i.value,payload:i.payload,parentViewBox:i.parentViewBox,viewBox:o,fill:i.fill})});return T.createElement(NA,{value:t?a:void 0},r)}function tpe(e){var{shape:t,activeBar:r,baseProps:n,entry:a,index:i,dataKey:o}=e,l=tn(pf),d=tn(k$),c=r&&String(i)===l&&(d==null||o===d),u=c?r:t;return T.createElement(MA,bf({},n,{name:String(n.name)},a,{isActive:c,option:u,index:i,dataKey:o}))}function rpe(e){var{shape:t,baseProps:r,entry:n,index:a,dataKey:i}=e;return T.createElement(MA,bf({},r,{name:String(r.name)},n,{isActive:!1,option:t,index:a,dataKey:i}))}function npe(e){var{data:t,props:r}=e,n=Il(r),{id:a}=n,i=ak(n,V1e),{shape:o,dataKey:l,activeBar:d}=r,{onMouseEnter:c,onClick:u,onMouseLeave:x}=r,b=ak(r,W1e),g=AA(c,l),k=EA(x),y=TA(u,l);return t?T.createElement(T.Fragment,null,t.map((N,S)=>T.createElement(pi,bf({key:"rectangle-".concat(N==null?void 0:N.x,"-").concat(N==null?void 0:N.y,"-").concat(N==null?void 0:N.value,"-").concat(S),className:"recharts-bar-rectangle"},tv(b,N,S),{onMouseEnter:g(N,S),onMouseLeave:k(N,S),onClick:y(N,S)}),d?T.createElement(tpe,{shape:o,activeBar:d,baseProps:i,entry:N,index:S,dataKey:l}):T.createElement(rpe,{shape:o,baseProps:i,entry:N,index:S,dataKey:l})))):null}function ape(e){var{props:t,previousRectanglesRef:r}=e,{data:n,layout:a,isAnimationActive:i,animationBegin:o,animationDuration:l,animationEasing:d,onAnimationEnd:c,onAnimationStart:u}=t,x=r.current,b=pp(t,"recharts-bar-"),[g,k]=T.useState(!1),y=!g,N=T.useCallback(()=>{typeof c=="function"&&c(),k(!1)},[c]),S=T.useCallback(()=>{typeof u=="function"&&u(),k(!0)},[u]);return T.createElement(epe,{showLabels:y,rects:n},T.createElement(xp,{animationId:b,begin:o,duration:l,isActive:i,easing:d,onAnimationEnd:N,onAnimationStart:S,key:b},O=>{var A=O===1?n:n==null?void 0:n.map((P,q)=>{var W=x&&x[q];if(W)return El(El({},P),{},{x:is(W.x,P.x,O),y:is(W.y,P.y,O),width:is(W.width,P.width,O),height:is(W.height,P.height,O)});if(a==="horizontal"){var R=is(0,P.height,O);return El(El({},P),{},{y:P.y+P.height-R,height:R})}var U=is(0,P.width,O);return El(El({},P),{},{width:U})});return O>0&&(r.current=A??null),A==null?null:T.createElement(pi,null,T.createElement(npe,{props:t,data:A}))}),T.createElement(j5,{label:t.label}),t.children)}function spe(e){var t=T.useRef(null);return T.createElement(ape,{previousRectanglesRef:t,props:e})}var eV=0,ipe=(e,t)=>{var r=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:r,errorVal:os(e,t)}};class ope extends T.PureComponent{render(){var{hide:t,data:r,dataKey:n,className:a,xAxisId:i,yAxisId:o,needClip:l,background:d,id:c}=this.props;if(t||r==null)return null;var u=Zn("recharts-bar",a),x=c;return T.createElement(pi,{className:u,id:c},l&&T.createElement("defs",null,T.createElement(LA,{clipPathId:x,xAxisId:i,yAxisId:o})),T.createElement(pi,{className:"recharts-bar-rectangles",clipPath:l?"url(#clipPath-".concat(x,")"):void 0},T.createElement(J1e,{data:r,dataKey:n,background:d,allOtherBarProps:this.props}),T.createElement(spe,this.props)))}}var lpe={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!uh.isSsr,legendType:"rect",minPointSize:eV,xAxisId:0,yAxisId:0};function cpe(e){var{xAxisId:t,yAxisId:r,hide:n,legendType:a,minPointSize:i,activeBar:o,animationBegin:l,animationDuration:d,animationEasing:c,isAnimationActive:u}=e,{needClip:x}=I5(t,r),b=sv(),g=qo(),k=CA(e.children,Cp),y=tn(O=>Rpe(O,t,r,g,e.id,k));if(b!=="vertical"&&b!=="horizontal")return null;var N,S=y==null?void 0:y[0];return S==null||S.height==null||S.width==null?N=0:N=b==="vertical"?S.height/2:S.width/2,T.createElement(J$,{xAxisId:t,yAxisId:r,data:y,dataPointFormatter:ipe,errorBarOffset:N},T.createElement(ope,bf({},e,{layout:b,needClip:x,data:y,xAxisId:t,yAxisId:r,hide:n,legendType:a,minPointSize:i,activeBar:o,animationBegin:l,animationDuration:d,animationEasing:c,isAnimationActive:u})))}function dpe(e){var{layout:t,barSettings:{dataKey:r,minPointSize:n},pos:a,bandSize:i,xAxis:o,yAxis:l,xAxisTicks:d,yAxisTicks:c,stackedData:u,displayedData:x,offset:b,cells:g,parentViewBox:k}=e,y=t==="horizontal"?l:o,N=u?y.scale.domain():null,S=loe({numericAxis:y});return x.map((O,A)=>{var P,q,W,R,U,L;u?P=noe(u[A],N):(P=os(O,r),Array.isArray(P)||(P=[S,P]));var Q=M1e(n,eV)(P[1],A);if(t==="horizontal"){var H,[G,Z]=[l.scale(P[0]),l.scale(P[1])];q=Z9({axis:o,ticks:d,bandSize:i,offset:a.offset,entry:O,index:A}),W=(H=Z??G)!==null&&H!==void 0?H:void 0,R=a.size;var te=G-Z;if(U=Fc(te)?0:te,L={x:q,y:b.top,width:R,height:b.height},Math.abs(Q)>0&&Math.abs(U)<Math.abs(Q)){var se=Co(U||Q)*(Math.abs(Q)-Math.abs(U));W-=se,U+=se}}else{var[ue,ae]=[o.scale(P[0]),o.scale(P[1])];if(q=ue,W=Z9({axis:l,ticks:c,bandSize:i,offset:a.offset,entry:O,index:A}),R=ae-ue,U=a.size,L={x:b.left,y:W,width:b.width,height:U},Math.abs(Q)>0&&Math.abs(R)<Math.abs(Q)){var pe=Co(R||Q)*(Math.abs(Q)-Math.abs(R));R+=pe}}if(q==null||W==null||R==null||U==null)return null;var ve=El(El({},O),{},{x:q,y:W,width:R,height:U,value:u?P:P[1],payload:O,background:L,tooltipPosition:{x:q+R/2,y:W+U/2},parentViewBox:k},g&&g[A]&&g[A].props);return ve}).filter(Boolean)}function upe(e){var t=io(e,lpe),r=qo();return T.createElement(O5,{id:t.id,type:"bar"},n=>T.createElement(T.Fragment,null,T.createElement(OA,{legendPayload:Q1e(t)}),T.createElement(T5,{fn:Z1e,args:t}),T.createElement(PA,{type:"bar",id:n,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:iq(t.stackId),hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:r}),T.createElement(cpe,bf({},t,{id:n}))))}var Cm=T.memo(upe);Cm.displayName="Bar";function yD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Q2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?yD(Object(r),!0).forEach(function(n){hpe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yD(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function hpe(e,t,r){return(t=fpe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fpe(e){var t=mpe(e,"string");return typeof t=="symbol"?t:t+""}function mpe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var xpe=(e,t)=>t,ppe=(e,t,r)=>r,gpe=(e,t,r,n)=>n,bpe=(e,t,r,n,a)=>a,yv=jt([mv,bpe],(e,t)=>e.filter(r=>r.type==="bar").find(r=>r.id===t)),vpe=jt([yv],e=>e==null?void 0:e.maxBarSize),ype=(e,t,r,n,a,i)=>i,wD=(e,t,r)=>{var n=r??e;if(!Is(n))return dl(n,t,0)},wpe=jt([pa,mv,xpe,ppe,gpe],(e,t,r,n,a)=>t.filter(i=>e==="horizontal"?i.xAxisId===r:i.yAxisId===n).filter(i=>i.isPanorama===a).filter(i=>i.hide===!1).filter(i=>i.type==="bar")),kpe=(e,t,r,n)=>{var a=pa(e);return a==="horizontal"?_b(e,"yAxis",r,n):_b(e,"xAxis",t,n)},Npe=(e,t,r)=>{var n=pa(e);return n==="horizontal"?kI(e,"xAxis",t):kI(e,"yAxis",r)},_pe=(e,t,r)=>{var n={},a=e.filter(g5),i=e.filter(c=>c.stackId==null),o=a.reduce((c,u)=>(c[u.stackId]||(c[u.stackId]=[]),c[u.stackId].push(u),c),n),l=Object.entries(o).map(c=>{var[u,x]=c,b=x.map(k=>k.dataKey),g=wD(t,r,x[0].barSize);return{stackId:u,dataKeys:b,barSize:g}}),d=i.map(c=>{var u=[c.dataKey].filter(b=>b!=null),x=wD(t,r,c.barSize);return{stackId:void 0,dataKeys:u,barSize:x}});return[...l,...d]},Spe=jt([wpe,o0e,Npe],_pe),jpe=(e,t,r,n,a)=>{var i,o,l=yv(e,t,r,n,a);if(l!=null){var d=pa(e),c=kH(e),{maxBarSize:u}=l,x=Is(u)?c:u,b,g;return d==="horizontal"?(b=Yu(e,"xAxis",t,n),g=Xu(e,"xAxis",t,n)):(b=Yu(e,"yAxis",r,n),g=Xu(e,"yAxis",r,n)),(i=(o=$m(b,g,!0))!==null&&o!==void 0?o:x)!==null&&i!==void 0?i:0}},tV=(e,t,r,n)=>{var a=pa(e),i,o;return a==="horizontal"?(i=Yu(e,"xAxis",t,n),o=Xu(e,"xAxis",t,n)):(i=Yu(e,"yAxis",r,n),o=Xu(e,"yAxis",r,n)),$m(i,o)};function Cpe(e,t,r,n,a){var i=n.length;if(!(i<1)){var o=dl(e,r,0,!0),l,d=[];if(Wi(n[0].barSize)){var c=!1,u=r/i,x=n.reduce((S,O)=>S+(O.barSize||0),0);x+=(i-1)*o,x>=r&&(x-=(i-1)*o,o=0),x>=r&&u>0&&(c=!0,u*=.9,x=i*u);var b=(r-x)/2>>0,g={offset:b-o,size:0};l=n.reduce((S,O)=>{var A,P={stackId:O.stackId,dataKeys:O.dataKeys,position:{offset:g.offset+g.size+o,size:c?u:(A=O.barSize)!==null&&A!==void 0?A:0}},q=[...S,P];return g=q[q.length-1].position,q},d)}else{var k=dl(t,r,0,!0);r-2*k-(i-1)*o<=0&&(o=0);var y=(r-2*k-(i-1)*o)/i;y>1&&(y>>=0);var N=Wi(a)?Math.min(y,a):y;l=n.reduce((S,O,A)=>[...S,{stackId:O.stackId,dataKeys:O.dataKeys,position:{offset:k+(y+o)*A+(y-N)/2,size:N}}],d)}return l}}var Ape=(e,t,r,n,a,i,o)=>{var l=Is(o)?t:o,d=Cpe(r,n,a!==i?a:i,e,l);return a!==i&&d!=null&&(d=d.map(c=>Q2(Q2({},c),{},{position:Q2(Q2({},c.position),{},{offset:c.position.offset-a/2})}))),d},Epe=jt([Spe,kH,i0e,NH,jpe,tV,vpe],Ape),Tpe=(e,t,r,n)=>Yu(e,"xAxis",t,n),Ope=(e,t,r,n)=>Yu(e,"yAxis",r,n),Ppe=(e,t,r,n)=>Xu(e,"xAxis",t,n),Ipe=(e,t,r,n)=>Xu(e,"yAxis",r,n),Dpe=jt([Epe,yv],(e,t)=>{if(!(e==null||t==null)){var r=e.find(n=>n.stackId===t.stackId&&t.dataKey!=null&&n.dataKeys.includes(t.dataKey));if(r!=null)return r.position}}),Mpe=(e,t)=>{var r=p5(t);if(!(!e||r==null||t==null)){var{stackId:n}=t;if(n!=null){var a=e[n];if(a){var{stackedData:i}=a;if(i)return i.find(o=>o.key===r)}}}},Lpe=jt([kpe,yv],Mpe),Rpe=jt([so,dC,Tpe,Ope,Ppe,Ipe,Dpe,pa,dv,tV,Lpe,yv,ype],(e,t,r,n,a,i,o,l,d,c,u,x,b)=>{var{chartData:g,dataStartIndex:k,dataEndIndex:y}=d;if(!(x==null||o==null||t==null||l!=="horizontal"&&l!=="vertical"||r==null||n==null||a==null||i==null||c==null)){var{data:N}=x,S;if(N!=null&&N.length>0?S=N:S=g==null?void 0:g.slice(k,y+1),S!=null)return dpe({layout:l,barSettings:x,pos:o,parentViewBox:t,bandSize:c,xAxis:r,yAxis:n,xAxisTicks:a,yAxisTicks:i,stackedData:u,displayedData:S,offset:e,cells:b})}}),rV=e=>{var{chartData:t}=e,r=Gs(),n=qo();return T.useEffect(()=>n?()=>{}:(r(PI(t)),()=>{r(PI(void 0))}),[t,r,n]),null},kD={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},nV=Hc({name:"brush",initialState:kD,reducers:{setBrushSettings(e,t){return t.payload==null?kD:t.payload}}}),{setBrushSettings:Z9e}=nV.actions,Fpe=nV.reducer;function Bpe(e,t,r){return(t=Upe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Upe(e){var t=zpe(e,"string");return typeof t=="symbol"?t:t+""}function zpe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class RA{static create(t){return new RA(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:r,position:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(n)switch(n){case"start":return this.scale(t);case"middle":{var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+a}case"end":{var i=this.bandwidth?this.bandwidth():0;return this.scale(t)+i}default:return this.scale(t)}if(r){var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+o}return this.scale(t)}}isInRange(t){var r=this.range(),n=r[0],a=r[r.length-1];return n<=a?t>=n&&t<=a:t>=a&&t<=n}}Bpe(RA,"EPS",1e-4);function qpe(e){return(e%180+180)%180}var Hpe=function(t){var{width:r,height:n}=t,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=qpe(a),o=i*Math.PI/180,l=Math.atan(n/r),d=o>l&&o<Math.PI-l?n/Math.sin(o):r/Math.cos(o);return Math.abs(d)},$pe={dots:[],areas:[],lines:[]},aV=Hc({name:"referenceElements",initialState:$pe,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var r=H0(e).dots.findIndex(n=>n===t.payload);r!==-1&&e.dots.splice(r,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var r=H0(e).areas.findIndex(n=>n===t.payload);r!==-1&&e.areas.splice(r,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var r=H0(e).lines.findIndex(n=>n===t.payload);r!==-1&&e.lines.splice(r,1)}}}),{addDot:J9e,removeDot:ePe,addArea:tPe,removeArea:rPe,addLine:nPe,removeLine:aPe}=aV.actions,Vpe=aV.reducer,Wpe=T.createContext(void 0),Gpe=e=>{var{children:t}=e,[r]=T.useState("".concat(mb("recharts"),"-clip")),n=P5();if(n==null)return null;var{x:a,y:i,width:o,height:l}=n;return T.createElement(Wpe.Provider,{value:r},T.createElement("defs",null,T.createElement("clipPath",{id:r},T.createElement("rect",{x:a,y:i,height:l,width:o}))),t)};function sp(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function sV(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var n=[],a=0;a<e.length;a+=t)n.push(e[a]);return n}function Kpe(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return Hpe(n,r)}function Xpe(e,t,r){var n=r==="width",{x:a,y:i,width:o,height:l}=e;return t===1?{start:n?a:i,end:n?a+o:i+l}:{start:n?a+o:i+l,end:n?a:i}}function sk(e,t,r,n,a){if(e*t<e*n||e*t>e*a)return!1;var i=r();return e*(t-e*i/2-n)>=0&&e*(t+e*i/2-a)<=0}function Ype(e,t){return sV(e,t+1)}function Qpe(e,t,r,n,a){for(var i=(n||[]).slice(),{start:o,end:l}=t,d=0,c=1,u=o,x=function(){var k=n==null?void 0:n[d];if(k===void 0)return{v:sV(n,c)};var y=d,N,S=()=>(N===void 0&&(N=r(k,y)),N),O=k.coordinate,A=d===0||sk(e,O,S,u,l);A||(d=0,u=o,c+=1),A&&(u=O+e*(S()/2+a),d+=c)},b;c<=i.length;)if(b=x(),b)return b.v;return[]}function ND(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function al(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ND(Object(r),!0).forEach(function(n){Zpe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ND(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Zpe(e,t,r){return(t=Jpe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Jpe(e){var t=ege(e,"string");return typeof t=="symbol"?t:t+""}function ege(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function tge(e,t,r,n,a){for(var i=(n||[]).slice(),o=i.length,{start:l}=t,{end:d}=t,c=function(b){var g=i[b],k,y=()=>(k===void 0&&(k=r(g,b)),k);if(b===o-1){var N=e*(g.coordinate+e*y()/2-d);i[b]=g=al(al({},g),{},{tickCoord:N>0?g.coordinate-N*e:g.coordinate})}else i[b]=g=al(al({},g),{},{tickCoord:g.coordinate});var S=sk(e,g.tickCoord,y,l,d);S&&(d=g.tickCoord-e*(y()/2+a),i[b]=al(al({},g),{},{isShow:!0}))},u=o-1;u>=0;u--)c(u);return i}function rge(e,t,r,n,a,i){var o=(n||[]).slice(),l=o.length,{start:d,end:c}=t;if(i){var u=n[l-1],x=r(u,l-1),b=e*(u.coordinate+e*x/2-c);o[l-1]=u=al(al({},u),{},{tickCoord:b>0?u.coordinate-b*e:u.coordinate});var g=sk(e,u.tickCoord,()=>x,d,c);g&&(c=u.tickCoord-e*(x/2+a),o[l-1]=al(al({},u),{},{isShow:!0}))}for(var k=i?l-1:l,y=function(O){var A=o[O],P,q=()=>(P===void 0&&(P=r(A,O)),P);if(O===0){var W=e*(A.coordinate-e*q()/2-d);o[O]=A=al(al({},A),{},{tickCoord:W<0?A.coordinate-W*e:A.coordinate})}else o[O]=A=al(al({},A),{},{tickCoord:A.coordinate});var R=sk(e,A.tickCoord,q,d,c);R&&(d=A.tickCoord+e*(q()/2+a),o[O]=al(al({},A),{},{isShow:!0}))},N=0;N<k;N++)y(N);return o}function FA(e,t,r){var{tick:n,ticks:a,viewBox:i,minTickGap:o,orientation:l,interval:d,tickFormatter:c,unit:u,angle:x}=e;if(!a||!a.length||!n)return[];if(Qr(d)||uh.isSsr){var b;return(b=Ype(a,Qr(d)?d:0))!==null&&b!==void 0?b:[]}var g=[],k=l==="top"||l==="bottom"?"width":"height",y=u&&k==="width"?Wg(u,{fontSize:t,letterSpacing:r}):{width:0,height:0},N=(A,P)=>{var q=typeof c=="function"?c(A.value,P):A.value;return k==="width"?Kpe(Wg(q,{fontSize:t,letterSpacing:r}),y,x):Wg(q,{fontSize:t,letterSpacing:r})[k]},S=a.length>=2?Co(a[1].coordinate-a[0].coordinate):1,O=Xpe(i,S,k);return d==="equidistantPreserveStart"?Qpe(S,O,N,a,o):(d==="preserveStart"||d==="preserveStartEnd"?g=rge(S,O,N,a,o,d==="preserveStartEnd"):g=tge(S,O,N,a,o),g.filter(A=>A.isShow))}var nge=e=>{var{ticks:t,label:r,labelGapWithTick:n=5,tickSize:a=0,tickMargin:i=0}=e,o=0;if(t){Array.from(t).forEach(u=>{if(u){var x=u.getBoundingClientRect();x.width>o&&(o=x.width)}});var l=r?r.getBoundingClientRect().width:0,d=a+i,c=o+d+l+(r?n:0);return Math.round(c)}return 0},age=["axisLine","width","height","className","hide","ticks"],sge=["viewBox"],ige=["viewBox"];function Tj(e,t){if(e==null)return{};var r,n,a=oge(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function oge(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Km(){return Km=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Km.apply(null,arguments)}function _D(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ro(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_D(Object(r),!0).forEach(function(n){lge(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_D(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function lge(e,t,r){return(t=cge(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cge(e){var t=dge(e,"string");return typeof t=="symbol"?t:t+""}function dge(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var BA={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"};function uge(e){var{x:t,y:r,width:n,height:a,orientation:i,mirror:o,axisLine:l,otherSvgProps:d}=e;if(!l)return null;var c=ro(ro(ro({},d),Il(l)),{},{fill:"none"});if(i==="top"||i==="bottom"){var u=+(i==="top"&&!o||i==="bottom"&&o);c=ro(ro({},c),{},{x1:t,y1:r+u*a,x2:t+n,y2:r+u*a})}else{var x=+(i==="left"&&!o||i==="right"&&o);c=ro(ro({},c),{},{x1:t+x*n,y1:r,x2:t+x*n,y2:r+a})}return T.createElement("line",Km({},c,{className:Zn("recharts-cartesian-axis-line",zm(l,"className"))}))}function hge(e,t,r,n,a,i,o,l,d){var c,u,x,b,g,k,y=l?-1:1,N=e.tickSize||o,S=Qr(e.tickCoord)?e.tickCoord:e.coordinate;switch(i){case"top":c=u=e.coordinate,b=r+ +!l*a,x=b-y*N,k=x-y*d,g=S;break;case"left":x=b=e.coordinate,u=t+ +!l*n,c=u-y*N,g=c-y*d,k=S;break;case"right":x=b=e.coordinate,u=t+ +l*n,c=u+y*N,g=c+y*d,k=S;break;default:c=u=e.coordinate,b=r+ +l*a,x=b+y*N,k=x+y*d,g=S;break}return{line:{x1:c,y1:x,x2:u,y2:b},tick:{x:g,y:k}}}function fge(e,t){switch(e){case"left":return t?"start":"end";case"right":return t?"end":"start";default:return"middle"}}function mge(e,t){switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}function xge(e){var{option:t,tickProps:r,value:n}=e,a,i=Zn(r.className,"recharts-cartesian-axis-tick-value");if(T.isValidElement(t))a=T.cloneElement(t,ro(ro({},r),{},{className:i}));else if(typeof t=="function")a=t(ro(ro({},r),{},{className:i}));else{var o="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(o=Zn(o,t==null?void 0:t.className)),a=T.createElement(S5,Km({},r,{className:o}),n)}return a}function pge(e){var{ticks:t=[],tick:r,tickLine:n,stroke:a,tickFormatter:i,unit:o,padding:l,tickTextProps:d,orientation:c,mirror:u,x,y:b,width:g,height:k,tickSize:y,tickMargin:N,fontSize:S,letterSpacing:O,getTicksConfig:A,events:P}=e,q=FA(ro(ro({},A),{},{ticks:t}),S,O),W=fge(c,u),R=mge(c,u),U=Il(A),L=Um(r),Q={};typeof n=="object"&&(Q=n);var H=ro(ro({},U),{},{fill:"none"},Q),G=q.map((Z,te)=>{var{line:se,tick:ue}=hge(Z,x,b,g,k,c,y,u,N),ae=ro(ro(ro(ro({textAnchor:W,verticalAnchor:R},U),{},{stroke:"none",fill:a},L),ue),{},{index:te,payload:Z,visibleTicksCount:q.length,tickFormatter:i,padding:l},d);return T.createElement(pi,Km({className:"recharts-cartesian-axis-tick",key:"tick-".concat(Z.value,"-").concat(Z.coordinate,"-").concat(Z.tickCoord)},tv(P,Z,te)),n&&T.createElement("line",Km({},H,se,{className:Zn("recharts-cartesian-axis-tick-line",zm(n,"className"))})),r&&T.createElement(xge,{option:r,tickProps:ae,value:"".concat(typeof i=="function"?i(Z.value,te):Z.value).concat(o||"")}))});return G.length>0?T.createElement("g",{className:"recharts-cartesian-axis-ticks"},G):null}var gge=T.forwardRef((e,t)=>{var{axisLine:r,width:n,height:a,className:i,hide:o,ticks:l}=e,d=Tj(e,age),[c,u]=T.useState(""),[x,b]=T.useState(""),g=T.useRef(null);T.useImperativeHandle(t,()=>({getCalculatedWidth:()=>{var y;return nge({ticks:g.current,label:(y=e.labelRef)===null||y===void 0?void 0:y.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var k=T.useCallback(y=>{if(y){var N=y.getElementsByClassName("recharts-cartesian-axis-tick-value");g.current=N;var S=N[0];if(S){var O=window.getComputedStyle(S),A=O.fontSize,P=O.letterSpacing;(A!==c||P!==x)&&(u(A),b(P))}}},[c,x]);return o||n!=null&&n<=0||a!=null&&a<=0?null:T.createElement(pi,{className:Zn("recharts-cartesian-axis",i),ref:k},T.createElement(uge,{x:e.x,y:e.y,width:n,height:a,orientation:e.orientation,mirror:e.mirror,axisLine:r,otherSvgProps:Il(e)}),T.createElement(pge,{ticks:l,tick:e.tick,tickLine:e.tickLine,stroke:e.stroke,tickFormatter:e.tickFormatter,unit:e.unit,padding:e.padding,tickTextProps:e.tickTextProps,orientation:e.orientation,mirror:e.mirror,x:e.x,y:e.y,width:e.width,height:e.height,tickSize:e.tickSize,tickMargin:e.tickMargin,fontSize:c,letterSpacing:x,getTicksConfig:e,events:d}),T.createElement(yme,{x:e.x,y:e.y,width:e.width,height:e.height},T.createElement(Tme,{label:e.label,labelRef:e.labelRef}),e.children))}),bge=T.memo(gge,(e,t)=>{var{viewBox:r}=e,n=Tj(e,sge),{viewBox:a}=t,i=Tj(t,ige);return sp(r,a)&&sp(n,i)}),UA=T.forwardRef((e,t)=>{var r=io(e,BA);return T.createElement(bge,Km({},r,{ref:t}))});UA.displayName="CartesianAxis";var vge=["x1","y1","x2","y2","key"],yge=["offset"],wge=["xAxisId","yAxisId"],kge=["xAxisId","yAxisId"];function SD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ol(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?SD(Object(r),!0).forEach(function(n){Nge(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):SD(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Nge(e,t,r){return(t=_ge(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _ge(e){var t=Sge(e,"string");return typeof t=="symbol"?t:t+""}function Sge(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function um(){return um=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},um.apply(null,arguments)}function ik(e,t){if(e==null)return{};var r,n,a=jge(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function jge(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Cge=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:r,x:n,y:a,width:i,height:o,ry:l}=e;return T.createElement("rect",{x:n,y:a,ry:l,width:i,height:o,stroke:"none",fill:t,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function iV(e,t){var r;if(T.isValidElement(e))r=T.cloneElement(e,t);else if(typeof e=="function")r=e(t);else{var{x1:n,y1:a,x2:i,y2:o,key:l}=t,d=ik(t,vge),c=Il(d),{offset:u}=c,x=ik(c,yge);r=T.createElement("line",um({},x,{x1:n,y1:a,x2:i,y2:o,fill:"none",key:l}))}return r}function Age(e){var{x:t,width:r,horizontal:n=!0,horizontalPoints:a}=e;if(!n||!a||!a.length)return null;var{xAxisId:i,yAxisId:o}=e,l=ik(e,wge),d=a.map((c,u)=>{var x=ol(ol({},l),{},{x1:t,y1:c,x2:t+r,y2:c,key:"line-".concat(u),index:u});return iV(n,x)});return T.createElement("g",{className:"recharts-cartesian-grid-horizontal"},d)}function Ege(e){var{y:t,height:r,vertical:n=!0,verticalPoints:a}=e;if(!n||!a||!a.length)return null;var{xAxisId:i,yAxisId:o}=e,l=ik(e,kge),d=a.map((c,u)=>{var x=ol(ol({},l),{},{x1:c,y1:t,x2:c,y2:t+r,key:"line-".concat(u),index:u});return iV(n,x)});return T.createElement("g",{className:"recharts-cartesian-grid-vertical"},d)}function Tge(e){var{horizontalFill:t,fillOpacity:r,x:n,y:a,width:i,height:o,horizontalPoints:l,horizontal:d=!0}=e;if(!d||!t||!t.length)return null;var c=l.map(x=>Math.round(x+a-a)).sort((x,b)=>x-b);a!==c[0]&&c.unshift(0);var u=c.map((x,b)=>{var g=!c[b+1],k=g?a+o-x:c[b+1]-x;if(k<=0)return null;var y=b%t.length;return T.createElement("rect",{key:"react-".concat(b),y:x,x:n,height:k,width:i,stroke:"none",fill:t[y],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return T.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},u)}function Oge(e){var{vertical:t=!0,verticalFill:r,fillOpacity:n,x:a,y:i,width:o,height:l,verticalPoints:d}=e;if(!t||!r||!r.length)return null;var c=d.map(x=>Math.round(x+a-a)).sort((x,b)=>x-b);a!==c[0]&&c.unshift(0);var u=c.map((x,b)=>{var g=!c[b+1],k=g?a+o-x:c[b+1]-x;if(k<=0)return null;var y=b%r.length;return T.createElement("rect",{key:"react-".concat(b),x,y:i,width:k,height:l,stroke:"none",fill:r[y],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return T.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},u)}var Pge=(e,t)=>{var{xAxis:r,width:n,height:a,offset:i}=e;return aq(FA(ol(ol(ol({},BA),r),{},{ticks:sq(r),viewBox:{x:0,y:0,width:n,height:a}})),i.left,i.left+i.width,t)},Ige=(e,t)=>{var{yAxis:r,width:n,height:a,offset:i}=e;return aq(FA(ol(ol(ol({},BA),r),{},{ticks:sq(r),viewBox:{x:0,y:0,width:n,height:a}})),i.top,i.top+i.height,t)},Dge={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0};function V0(e){var t=hC(),r=fC(),n=fq(),a=ol(ol({},io(e,Dge)),{},{x:Qr(e.x)?e.x:n.left,y:Qr(e.y)?e.y:n.top,width:Qr(e.width)?e.width:n.width,height:Qr(e.height)?e.height:n.height}),{xAxisId:i,yAxisId:o,x:l,y:d,width:c,height:u,syncWithTicks:x,horizontalValues:b,verticalValues:g}=a,k=qo(),y=tn(L=>NI(L,"xAxis",i,k)),N=tn(L=>NI(L,"yAxis",o,k));if(!Qr(c)||c<=0||!Qr(u)||u<=0||!Qr(l)||l!==+l||!Qr(d)||d!==+d)return null;var S=a.verticalCoordinatesGenerator||Pge,O=a.horizontalCoordinatesGenerator||Ige,{horizontalPoints:A,verticalPoints:P}=a;if((!A||!A.length)&&typeof O=="function"){var q=b&&b.length,W=O({yAxis:N?ol(ol({},N),{},{ticks:q?b:N.ticks}):void 0,width:t,height:r,offset:n},q?!0:x);Fw(Array.isArray(W),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof W,"]")),Array.isArray(W)&&(A=W)}if((!P||!P.length)&&typeof S=="function"){var R=g&&g.length,U=S({xAxis:y?ol(ol({},y),{},{ticks:R?g:y.ticks}):void 0,width:t,height:r,offset:n},R?!0:x);Fw(Array.isArray(U),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof U,"]")),Array.isArray(U)&&(P=U)}return T.createElement("g",{className:"recharts-cartesian-grid"},T.createElement(Cge,{fill:a.fill,fillOpacity:a.fillOpacity,x:a.x,y:a.y,width:a.width,height:a.height,ry:a.ry}),T.createElement(Tge,um({},a,{horizontalPoints:A})),T.createElement(Oge,um({},a,{verticalPoints:P})),T.createElement(Age,um({},a,{offset:n,horizontalPoints:A,xAxis:y,yAxis:N})),T.createElement(Ege,um({},a,{offset:n,verticalPoints:P,xAxis:y,yAxis:N})))}V0.displayName="CartesianGrid";var oV=(e,t,r,n)=>Yu(e,"xAxis",t,n),lV=(e,t,r,n)=>Xu(e,"xAxis",t,n),cV=(e,t,r,n)=>Yu(e,"yAxis",r,n),dV=(e,t,r,n)=>Xu(e,"yAxis",r,n),Mge=jt([pa,oV,cV,lV,dV],(e,t,r,n,a)=>Zu(e,"xAxis")?$m(t,n,!1):$m(r,a,!1)),Lge=(e,t,r,n,a)=>a;function Rge(e){return e.type==="line"}var Fge=jt([mv,Lge],(e,t)=>e.filter(Rge).find(r=>r.id===t)),Bge=jt([pa,oV,cV,lV,dV,Fge,Mge,dv],(e,t,r,n,a,i,o,l)=>{var{chartData:d,dataStartIndex:c,dataEndIndex:u}=l;if(!(i==null||t==null||r==null||n==null||a==null||n.length===0||a.length===0||o==null)){var{dataKey:x,data:b}=i,g;if(b!=null&&b.length>0?g=b:g=d==null?void 0:d.slice(c,u+1),g!=null)return obe({layout:e,xAxis:t,yAxis:r,xAxisTicks:n,yAxisTicks:a,dataKey:x,bandSize:o,displayedData:g})}});function uV(e){var t=Um(e),r=3,n=2;if(t!=null){var{r:a,strokeWidth:i}=t,o=Number(a),l=Number(i);return(Number.isNaN(o)||o<0)&&(o=r),(Number.isNaN(l)||l<0)&&(l=n),{r:o,strokeWidth:l}}return{r,strokeWidth:n}}var Uge=["id"],zge=["type","layout","connectNulls","needClip"],qge=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function jD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Cc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?jD(Object(r),!0).forEach(function(n){Hge(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jD(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Hge(e,t,r){return(t=$ge(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $ge(e){var t=Vge(e,"string");return typeof t=="symbol"?t:t+""}function Vge(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function zA(e,t){if(e==null)return{};var r,n,a=Wge(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Wge(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Xm(){return Xm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Xm.apply(null,arguments)}var Gge=e=>{var{dataKey:t,name:r,stroke:n,legendType:a,hide:i}=e;return[{inactive:i,dataKey:t,type:a,color:n,value:Sf(r,t),payload:e}]};function Kge(e){var{dataKey:t,data:r,stroke:n,strokeWidth:a,fill:i,name:o,hide:l,unit:d}=e;return{dataDefinedOnItem:r,positions:void 0,settings:{stroke:n,strokeWidth:a,fill:i,dataKey:t,nameKey:void 0,name:Sf(o,t),hide:l,type:e.tooltipType,color:e.stroke,unit:d}}}var hV=(e,t)=>"".concat(t,"px ").concat(e-t,"px");function Xge(e,t){for(var r=e.length%2!==0?[...e,0]:e,n=[],a=0;a<t;++a)n=[...n,...r];return n}var Yge=(e,t,r)=>{var n=r.reduce((x,b)=>x+b);if(!n)return hV(t,e);for(var a=Math.floor(e/n),i=e%n,o=t-e,l=[],d=0,c=0;d<r.length;c+=r[d],++d)if(c+r[d]>i){l=[...r.slice(0,d),i-c];break}var u=l.length%2===0?[0,o]:[o];return[...Xge(r,a),...l,...u].map(x=>"".concat(x,"px")).join(", ")};function Qge(e,t){var r;if(T.isValidElement(e))r=T.cloneElement(e,t);else if(typeof e=="function")r=e(t);else{var n=Zn("recharts-line-dot",typeof e!="boolean"?e.className:"");r=T.createElement(_A,Xm({},t,{className:n}))}return r}function Zge(e,t){return e==null?!1:t?!0:e.length===1}function Jge(e){var{clipPathId:t,points:r,props:n}=e,{dot:a,dataKey:i,needClip:o}=n;if(!Zge(r,a))return null;var{id:l}=n,d=zA(n,Uge),c=E5(a),u=Il(d),x=GU(a),b=r.map((k,y)=>{var N=Cc(Cc(Cc({key:"dot-".concat(y),r:3},u),x),{},{index:y,cx:k.x,cy:k.y,dataKey:i,value:k.value,payload:k.payload,points:r});return Qge(a,N)}),g={clipPath:o?"url(#clipPath-".concat(c?"":"dots-").concat(t,")"):void 0};return T.createElement(pi,Xm({className:"recharts-line-dots",key:"dots"},g),b)}function ebe(e){var{showLabels:t,children:r,points:n}=e,a=T.useMemo(()=>n==null?void 0:n.map(i=>{var o={x:i.x,y:i.y,width:0,height:0};return Cc(Cc({},o),{},{value:i.value,payload:i.payload,viewBox:o,parentViewBox:void 0,fill:void 0})}),[n]);return T.createElement(NA,{value:t?a:null},r)}function CD(e){var{clipPathId:t,pathRef:r,points:n,strokeDasharray:a,props:i}=e,{type:o,layout:l,connectNulls:d,needClip:c}=i,u=zA(i,zge),x=Cc(Cc({},Dl(u)),{},{fill:"none",className:"recharts-line-curve",clipPath:c?"url(#clipPath-".concat(t,")"):void 0,points:n,type:o,layout:l,connectNulls:d,strokeDasharray:a??i.strokeDasharray});return T.createElement(T.Fragment,null,(n==null?void 0:n.length)>1&&T.createElement(C1,Xm({},x,{pathRef:r})),T.createElement(Jge,{points:n,clipPathId:t,props:i}))}function tbe(e){try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch{return 0}}function rbe(e){var{clipPathId:t,props:r,pathRef:n,previousPointsRef:a,longestAnimatedLengthRef:i}=e,{points:o,strokeDasharray:l,isAnimationActive:d,animationBegin:c,animationDuration:u,animationEasing:x,animateNewValues:b,width:g,height:k,onAnimationEnd:y,onAnimationStart:N}=r,S=a.current,O=pp(r,"recharts-line-"),[A,P]=T.useState(!1),q=!A,W=T.useCallback(()=>{typeof y=="function"&&y(),P(!1)},[y]),R=T.useCallback(()=>{typeof N=="function"&&N(),P(!0)},[N]),U=tbe(n.current),L=i.current;return T.createElement(ebe,{points:o,showLabels:q},r.children,T.createElement(xp,{animationId:O,begin:c,duration:u,isActive:d,easing:x,onAnimationEnd:W,onAnimationStart:R,key:O},Q=>{var H=is(L,U+L,Q),G=Math.min(H,U),Z;if(d)if(l){var te="".concat(l).split(/[,\s]+/gim).map(ae=>parseFloat(ae));Z=Yge(G,U,te)}else Z=hV(U,G);else Z=l==null?void 0:String(l);if(S){var se=S.length/o.length,ue=Q===1?o:o.map((ae,pe)=>{var ve=Math.floor(pe*se);if(S[ve]){var Pe=S[ve];return Cc(Cc({},ae),{},{x:is(Pe.x,ae.x,Q),y:is(Pe.y,ae.y,Q)})}return b?Cc(Cc({},ae),{},{x:is(g*2,ae.x,Q),y:is(k/2,ae.y,Q)}):Cc(Cc({},ae),{},{x:ae.x,y:ae.y})});return a.current=ue,T.createElement(CD,{props:r,points:ue,clipPathId:t,pathRef:n,strokeDasharray:Z})}return Q>0&&U>0&&(a.current=o,i.current=G),T.createElement(CD,{props:r,points:o,clipPathId:t,pathRef:n,strokeDasharray:Z})}),T.createElement(j5,{label:r.label}))}function nbe(e){var{clipPathId:t,props:r}=e,n=T.useRef(null),a=T.useRef(0),i=T.useRef(null);return T.createElement(rbe,{props:r,clipPathId:t,previousPointsRef:n,longestAnimatedLengthRef:a,pathRef:i})}var abe=(e,t)=>({x:e.x,y:e.y,value:e.value,errorVal:os(e.payload,t)});class sbe extends T.Component{render(){var{hide:t,dot:r,points:n,className:a,xAxisId:i,yAxisId:o,top:l,left:d,width:c,height:u,id:x,needClip:b}=this.props;if(t)return null;var g=Zn("recharts-line",a),k=x,{r:y,strokeWidth:N}=uV(r),S=E5(r),O=y*2+N;return T.createElement(T.Fragment,null,T.createElement(pi,{className:g},b&&T.createElement("defs",null,T.createElement(LA,{clipPathId:k,xAxisId:i,yAxisId:o}),!S&&T.createElement("clipPath",{id:"clipPath-dots-".concat(k)},T.createElement("rect",{x:d-O/2,y:l-O/2,width:c+O,height:u+O}))),T.createElement(J$,{xAxisId:i,yAxisId:o,data:n,dataPointFormatter:abe,errorBarOffset:0},T.createElement(nbe,{props:this.props,clipPathId:k}))),T.createElement(Aj,{activeDot:this.props.activeDot,points:n,mainColor:this.props.stroke,itemDataKey:this.props.dataKey}))}}var fV={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:!uh.isSsr,label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0};function ibe(e){var t=io(e,fV),{activeDot:r,animateNewValues:n,animationBegin:a,animationDuration:i,animationEasing:o,connectNulls:l,dot:d,hide:c,isAnimationActive:u,label:x,legendType:b,xAxisId:g,yAxisId:k,id:y}=t,N=zA(t,qge),{needClip:S}=I5(g,k),O=P5(),A=sv(),P=qo(),q=tn(Q=>Bge(Q,g,k,P,y));if(A!=="horizontal"&&A!=="vertical"||q==null||O==null)return null;var{height:W,width:R,x:U,y:L}=O;return T.createElement(sbe,Xm({},N,{id:y,connectNulls:l,dot:d,activeDot:r,animateNewValues:n,animationBegin:a,animationDuration:i,animationEasing:o,isAnimationActive:u,hide:c,label:x,legendType:b,xAxisId:g,yAxisId:k,points:q,layout:A,height:W,width:R,left:U,top:L,needClip:S}))}function obe(e){var{layout:t,xAxis:r,yAxis:n,xAxisTicks:a,yAxisTicks:i,dataKey:o,bandSize:l,displayedData:d}=e;return d.map((c,u)=>{var x=os(c,o);if(t==="horizontal"){var b=Rw({axis:r,ticks:a,bandSize:l,entry:c,index:u}),g=Is(x)?null:n.scale(x);return{x:b,y:g,value:x,payload:c}}var k=Is(x)?null:r.scale(x),y=Rw({axis:n,ticks:i,bandSize:l,entry:c,index:u});return k==null||y==null?null:{x:k,y,value:x,payload:c}}).filter(Boolean)}function lbe(e){var t=io(e,fV),r=qo();return T.createElement(O5,{id:t.id,type:"line"},n=>T.createElement(T.Fragment,null,T.createElement(OA,{legendPayload:Gge(t)}),T.createElement(T5,{fn:Kge,args:t}),T.createElement(PA,{type:"line",id:n,data:t.data,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,hide:t.hide,isPanorama:r}),T.createElement(ibe,Xm({},t,{id:n}))))}var xf=T.memo(lbe);xf.displayName="Line";var mV=(e,t,r,n)=>Yu(e,"xAxis",t,n),xV=(e,t,r,n)=>Xu(e,"xAxis",t,n),pV=(e,t,r,n)=>Yu(e,"yAxis",r,n),gV=(e,t,r,n)=>Xu(e,"yAxis",r,n),cbe=jt([pa,mV,pV,xV,gV],(e,t,r,n,a)=>Zu(e,"xAxis")?$m(t,n,!1):$m(r,a,!1)),dbe=(e,t,r,n,a)=>a,bV=jt([mv,dbe],(e,t)=>e.filter(r=>r.type==="area").find(r=>r.id===t)),ube=(e,t,r,n,a)=>{var i,o=bV(e,t,r,n,a);if(o!=null){var l=pa(e),d=Zu(l,"xAxis"),c;if(d?c=_b(e,"yAxis",r,n):c=_b(e,"xAxis",t,n),c!=null){var{stackId:u}=o,x=p5(o);if(!(u==null||x==null)){var b=(i=c[u])===null||i===void 0?void 0:i.stackedData;return b==null?void 0:b.find(g=>g.key===x)}}}},hbe=jt([pa,mV,pV,xV,gV,ube,dv,cbe,bV],(e,t,r,n,a,i,o,l,d)=>{var{chartData:c,dataStartIndex:u,dataEndIndex:x}=o;if(!(d==null||e!=="horizontal"&&e!=="vertical"||t==null||r==null||n==null||a==null||n.length===0||a.length===0||l==null)){var{data:b}=d,g;if(b&&b.length>0?g=b:g=c==null?void 0:c.slice(u,x+1),g!=null){var k=void 0;return Ibe({layout:e,xAxis:t,yAxis:r,xAxisTicks:n,yAxisTicks:a,dataStartIndex:u,areaSettings:d,stackedData:i,displayedData:g,chartBaseValue:k,bandSize:l})}}}),fbe=["id"],mbe=["activeDot","animationBegin","animationDuration","animationEasing","connectNulls","dot","fill","fillOpacity","hide","isAnimationActive","legendType","stroke","xAxisId","yAxisId"];function vV(e,t){if(e==null)return{};var r,n,a=xbe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function xbe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function AD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function R0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?AD(Object(r),!0).forEach(function(n){pbe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):AD(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function pbe(e,t,r){return(t=gbe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gbe(e){var t=bbe(e,"string");return typeof t=="symbol"?t:t+""}function bbe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function W0(){return W0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},W0.apply(null,arguments)}function ok(e,t){return e&&e!=="none"?e:t}var vbe=e=>{var{dataKey:t,name:r,stroke:n,fill:a,legendType:i,hide:o}=e;return[{inactive:o,dataKey:t,type:i,color:ok(n,a),value:Sf(r,t),payload:e}]};function ybe(e){var{dataKey:t,data:r,stroke:n,strokeWidth:a,fill:i,name:o,hide:l,unit:d}=e;return{dataDefinedOnItem:r,positions:void 0,settings:{stroke:n,strokeWidth:a,fill:i,dataKey:t,nameKey:void 0,name:Sf(o,t),hide:l,type:e.tooltipType,color:ok(n,i),unit:d}}}var wbe=(e,t)=>{var r;if(T.isValidElement(e))r=T.cloneElement(e,t);else if(typeof e=="function")r=e(t);else{var n=Zn("recharts-area-dot",typeof e!="boolean"?e.className:"");r=T.createElement(_A,W0({},t,{className:n}))}return r};function kbe(e,t){return e==null?!1:t?!0:e.length===1}function Nbe(e){var{clipPathId:t,points:r,props:n}=e,{needClip:a,dot:i,dataKey:o}=n;if(!kbe(r,i))return null;var l=E5(i),d=Il(n),c=GU(i),u=r.map((b,g)=>{var k=R0(R0(R0({key:"dot-".concat(g),r:3},d),c),{},{index:g,cx:b.x,cy:b.y,dataKey:o,value:b.value,payload:b.payload,points:r});return wbe(i,k)}),x={clipPath:a?"url(#clipPath-".concat(l?"":"dots-").concat(t,")"):void 0};return T.createElement(pi,W0({className:"recharts-area-dots"},x),u)}function _be(e){var{showLabels:t,children:r,points:n}=e,a=n.map(i=>{var o={x:i.x,y:i.y,width:0,height:0};return R0(R0({},o),{},{value:i.value,payload:i.payload,parentViewBox:void 0,viewBox:o,fill:void 0})});return T.createElement(NA,{value:t?a:null},r)}function ED(e){var{points:t,baseLine:r,needClip:n,clipPathId:a,props:i}=e,{layout:o,type:l,stroke:d,connectNulls:c,isRange:u}=i,{id:x}=i,b=vV(i,fbe),g=Il(b);return T.createElement(T.Fragment,null,(t==null?void 0:t.length)>1&&T.createElement(pi,{clipPath:n?"url(#clipPath-".concat(a,")"):void 0},T.createElement(C1,W0({},g,{id:x,points:t,connectNulls:c,type:l,baseLine:r,layout:o,stroke:"none",className:"recharts-area-area"})),d!=="none"&&T.createElement(C1,W0({},g,{className:"recharts-area-curve",layout:o,type:l,connectNulls:c,fill:"none",points:t})),d!=="none"&&u&&T.createElement(C1,W0({},g,{className:"recharts-area-curve",layout:o,type:l,connectNulls:c,fill:"none",points:r}))),T.createElement(Nbe,{points:t,props:b,clipPathId:a}))}function Sbe(e){var{alpha:t,baseLine:r,points:n,strokeWidth:a}=e,i=n[0].y,o=n[n.length-1].y;if(!Wi(i)||!Wi(o))return null;var l=t*Math.abs(i-o),d=Math.max(...n.map(c=>c.x||0));return Qr(r)?d=Math.max(r,d):r&&Array.isArray(r)&&r.length&&(d=Math.max(...r.map(c=>c.x||0),d)),Qr(d)?T.createElement("rect",{x:0,y:i<o?i:i-l,width:d+(a?parseInt("".concat(a),10):1),height:Math.floor(l)}):null}function jbe(e){var{alpha:t,baseLine:r,points:n,strokeWidth:a}=e,i=n[0].x,o=n[n.length-1].x;if(!Wi(i)||!Wi(o))return null;var l=t*Math.abs(i-o),d=Math.max(...n.map(c=>c.y||0));return Qr(r)?d=Math.max(r,d):r&&Array.isArray(r)&&r.length&&(d=Math.max(...r.map(c=>c.y||0),d)),Qr(d)?T.createElement("rect",{x:i<o?i:i-l,y:0,width:l,height:Math.floor(d+(a?parseInt("".concat(a),10):1))}):null}function Cbe(e){var{alpha:t,layout:r,points:n,baseLine:a,strokeWidth:i}=e;return r==="vertical"?T.createElement(Sbe,{alpha:t,points:n,baseLine:a,strokeWidth:i}):T.createElement(jbe,{alpha:t,points:n,baseLine:a,strokeWidth:i})}function Abe(e){var{needClip:t,clipPathId:r,props:n,previousPointsRef:a,previousBaselineRef:i}=e,{points:o,baseLine:l,isAnimationActive:d,animationBegin:c,animationDuration:u,animationEasing:x,onAnimationStart:b,onAnimationEnd:g}=n,k=pp(n,"recharts-area-"),[y,N]=T.useState(!1),S=!y,O=T.useCallback(()=>{typeof g=="function"&&g(),N(!1)},[g]),A=T.useCallback(()=>{typeof b=="function"&&b(),N(!0)},[b]),P=a.current,q=i.current;return T.createElement(_be,{showLabels:S,points:o},n.children,T.createElement(xp,{animationId:k,begin:c,duration:u,isActive:d,easing:x,onAnimationEnd:O,onAnimationStart:A,key:k},W=>{if(P){var R=P.length/o.length,U=W===1?o:o.map((Q,H)=>{var G=Math.floor(H*R);if(P[G]){var Z=P[G];return R0(R0({},Q),{},{x:is(Z.x,Q.x,W),y:is(Z.y,Q.y,W)})}return Q}),L;return Qr(l)?L=is(q,l,W):Is(l)||Fc(l)?L=is(q,0,W):L=l.map((Q,H)=>{var G=Math.floor(H*R);if(Array.isArray(q)&&q[G]){var Z=q[G];return R0(R0({},Q),{},{x:is(Z.x,Q.x,W),y:is(Z.y,Q.y,W)})}return Q}),W>0&&(a.current=U,i.current=L),T.createElement(ED,{points:U,baseLine:L,needClip:t,clipPathId:r,props:n})}return W>0&&(a.current=o,i.current=l),T.createElement(pi,null,d&&T.createElement("defs",null,T.createElement("clipPath",{id:"animationClipPath-".concat(r)},T.createElement(Cbe,{alpha:W,points:o,baseLine:l,layout:n.layout,strokeWidth:n.strokeWidth}))),T.createElement(pi,{clipPath:"url(#animationClipPath-".concat(r,")")},T.createElement(ED,{points:o,baseLine:l,needClip:t,clipPathId:r,props:n})))}),T.createElement(j5,{label:n.label}))}function Ebe(e){var{needClip:t,clipPathId:r,props:n}=e,a=T.useRef(null),i=T.useRef();return T.createElement(Abe,{needClip:t,clipPathId:r,props:n,previousPointsRef:a,previousBaselineRef:i})}class Tbe extends T.PureComponent{render(){var{hide:t,dot:r,points:n,className:a,top:i,left:o,needClip:l,xAxisId:d,yAxisId:c,width:u,height:x,id:b,baseLine:g}=this.props;if(t)return null;var k=Zn("recharts-area",a),y=b,{r:N,strokeWidth:S}=uV(r),O=E5(r),A=N*2+S;return T.createElement(T.Fragment,null,T.createElement(pi,{className:k},l&&T.createElement("defs",null,T.createElement(LA,{clipPathId:y,xAxisId:d,yAxisId:c}),!O&&T.createElement("clipPath",{id:"clipPath-dots-".concat(y)},T.createElement("rect",{x:o-A/2,y:i-A/2,width:u+A,height:x+A}))),T.createElement(Ebe,{needClip:l,clipPathId:y,props:this.props})),T.createElement(Aj,{points:n,mainColor:ok(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot}),this.props.isRange&&Array.isArray(g)&&T.createElement(Aj,{points:g,mainColor:ok(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot}))}}var yV={activeDot:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!1,fill:"#3182bd",fillOpacity:.6,hide:!1,isAnimationActive:!uh.isSsr,legendType:"line",stroke:"#3182bd",xAxisId:0,yAxisId:0};function Obe(e){var t,r=io(e,yV),{activeDot:n,animationBegin:a,animationDuration:i,animationEasing:o,connectNulls:l,dot:d,fill:c,fillOpacity:u,hide:x,isAnimationActive:b,legendType:g,stroke:k,xAxisId:y,yAxisId:N}=r,S=vV(r,mbe),O=sv(),A=_$(),{needClip:P}=I5(y,N),q=qo(),{points:W,isRange:R,baseLine:U}=(t=tn(te=>hbe(te,y,N,q,e.id)))!==null&&t!==void 0?t:{},L=P5();if(O!=="horizontal"&&O!=="vertical"||L==null||A!=="AreaChart"&&A!=="ComposedChart")return null;var{height:Q,width:H,x:G,y:Z}=L;return!W||!W.length?null:T.createElement(Tbe,W0({},S,{activeDot:n,animationBegin:a,animationDuration:i,animationEasing:o,baseLine:U,connectNulls:l,dot:d,fill:c,fillOpacity:u,height:Q,hide:x,layout:O,isAnimationActive:b,isRange:R,legendType:g,needClip:P,points:W,stroke:k,width:H,left:G,top:Z,xAxisId:y,yAxisId:N}))}var Pbe=(e,t,r,n,a)=>{var i=r??t;if(Qr(i))return i;var o=e==="horizontal"?a:n,l=o.scale.domain();if(o.type==="number"){var d=Math.max(l[0],l[1]),c=Math.min(l[0],l[1]);return i==="dataMin"?c:i==="dataMax"||d<0?d:Math.max(Math.min(l[0],l[1]),0)}return i==="dataMin"?l[0]:i==="dataMax"?l[1]:l[0]};function Ibe(e){var{areaSettings:{connectNulls:t,baseValue:r,dataKey:n},stackedData:a,layout:i,chartBaseValue:o,xAxis:l,yAxis:d,displayedData:c,dataStartIndex:u,xAxisTicks:x,yAxisTicks:b,bandSize:g}=e,k=a&&a.length,y=Pbe(i,o,r,l,d),N=i==="horizontal",S=!1,O=c.map((P,q)=>{var W;k?W=a[u+q]:(W=os(P,n),Array.isArray(W)?S=!0:W=[y,W]);var R=W[1]==null||k&&!t&&os(P,n)==null;return N?{x:Rw({axis:l,ticks:x,bandSize:g,entry:P,index:q}),y:R?null:d.scale(W[1]),value:W,payload:P}:{x:R?null:l.scale(W[1]),y:Rw({axis:d,ticks:b,bandSize:g,entry:P,index:q}),value:W,payload:P}}),A;return k||S?A=O.map(P=>{var q=Array.isArray(P.value)?P.value[0]:null;return N?{x:P.x,y:q!=null&&P.y!=null?d.scale(q):null,payload:P.payload}:{x:q!=null?l.scale(q):null,y:P.y,payload:P.payload}}):A=N?d.scale(y):l.scale(y),{points:O,baseLine:A,isRange:S}}function Dbe(e){var t=io(e,yV),r=qo();return T.createElement(O5,{id:t.id,type:"area"},n=>T.createElement(T.Fragment,null,T.createElement(OA,{legendPayload:vbe(t)}),T.createElement(T5,{fn:ybe,args:t}),T.createElement(PA,{type:"area",id:n,data:t.data,dataKey:t.dataKey,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,stackId:iq(t.stackId),hide:t.hide,barSize:void 0,baseValue:t.baseValue,isPanorama:r,connectNulls:t.connectNulls}),T.createElement(Obe,W0({},t,{id:n}))))}var wV=T.memo(Dbe);wV.displayName="Area";var Mbe=["dangerouslySetInnerHTML","ticks"],Lbe=["id"],Rbe=["domain"],Fbe=["domain"];function Oj(){return Oj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Oj.apply(null,arguments)}function lk(e,t){if(e==null)return{};var r,n,a=Bbe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Bbe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Ube(e){var t=Gs();return T.useLayoutEffect(()=>(t(f1e(e)),()=>{t(m1e(e))}),[e,t]),null}var zbe=e=>{var{xAxisId:t,className:r}=e,n=tn(dC),a=qo(),i="xAxis",o=tn(N=>_p(N,i,t,a)),l=tn(N=>t$(N,i,t,a)),d=tn(N=>QH(N,t)),c=tn(N=>the(N,t)),u=tn(N=>PH(N,t));if(d==null||c==null||u==null)return null;var{dangerouslySetInnerHTML:x,ticks:b}=e,g=lk(e,Mbe),{id:k}=u,y=lk(u,Lbe);return T.createElement(UA,Oj({},g,y,{scale:o,x:c.x,y:c.y,width:d.width,height:d.height,className:Zn("recharts-".concat(i," ").concat(i),r),viewBox:n,ticks:l}))},qbe={allowDataOverflow:kc.allowDataOverflow,allowDecimals:kc.allowDecimals,allowDuplicatedCategory:kc.allowDuplicatedCategory,height:kc.height,hide:!1,mirror:kc.mirror,orientation:kc.orientation,padding:kc.padding,reversed:kc.reversed,scale:kc.scale,tickCount:kc.tickCount,type:kc.type,xAxisId:0},Hbe=e=>{var t,r,n,a,i,o=io(e,qbe);return T.createElement(T.Fragment,null,T.createElement(Ube,{interval:(t=o.interval)!==null&&t!==void 0?t:"preserveEnd",id:o.xAxisId,scale:o.scale,type:o.type,padding:o.padding,allowDataOverflow:o.allowDataOverflow,domain:o.domain,dataKey:o.dataKey,allowDuplicatedCategory:o.allowDuplicatedCategory,allowDecimals:o.allowDecimals,tickCount:o.tickCount,includeHidden:(r=o.includeHidden)!==null&&r!==void 0?r:!1,reversed:o.reversed,ticks:o.ticks,height:o.height,orientation:o.orientation,mirror:o.mirror,hide:o.hide,unit:o.unit,name:o.name,angle:(n=o.angle)!==null&&n!==void 0?n:0,minTickGap:(a=o.minTickGap)!==null&&a!==void 0?a:5,tick:(i=o.tick)!==null&&i!==void 0?i:!0,tickFormatter:o.tickFormatter}),T.createElement(zbe,o))},$be=(e,t)=>{var{domain:r}=e,n=lk(e,Rbe),{domain:a}=t,i=lk(t,Fbe);return sp(n,i)?Array.isArray(r)&&r.length===2&&Array.isArray(a)&&a.length===2?r[0]===a[0]&&r[1]===a[1]:sp({domain:r},{domain:a}):!1},G0=T.memo(Hbe,$be);G0.displayName="XAxis";var Vbe=["dangerouslySetInnerHTML","ticks"],Wbe=["id"],Gbe=["domain"],Kbe=["domain"];function Pj(){return Pj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Pj.apply(null,arguments)}function ck(e,t){if(e==null)return{};var r,n,a=Xbe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Xbe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Ybe(e){var t=Gs();return T.useLayoutEffect(()=>(t(x1e(e)),()=>{t(p1e(e))}),[e,t]),null}var Qbe=e=>{var{yAxisId:t,className:r,width:n,label:a}=e,i=T.useRef(null),o=T.useRef(null),l=tn(dC),d=qo(),c=Gs(),u="yAxis",x=tn(q=>_p(q,u,t,d)),b=tn(q=>ZH(q,t)),g=tn(q=>nhe(q,t)),k=tn(q=>t$(q,u,t,d)),y=tn(q=>IH(q,t));if(T.useLayoutEffect(()=>{if(!(n!=="auto"||!b||kA(a)||T.isValidElement(a)||y==null)){var q=i.current;if(q){var W=q.getCalculatedWidth();Math.round(b.width)!==Math.round(W)&&c(g1e({id:t,width:W}))}}},[k,b,c,a,t,n,y]),b==null||g==null||y==null)return null;var{dangerouslySetInnerHTML:N,ticks:S}=e,O=ck(e,Vbe),{id:A}=y,P=ck(y,Wbe);return T.createElement(UA,Pj({},O,P,{ref:i,labelRef:o,scale:x,x:g.x,y:g.y,tickTextProps:n==="auto"?{width:void 0}:{width:n},width:b.width,height:b.height,className:Zn("recharts-".concat(u," ").concat(u),r),viewBox:l,ticks:k}))},Zbe={allowDataOverflow:Nc.allowDataOverflow,allowDecimals:Nc.allowDecimals,allowDuplicatedCategory:Nc.allowDuplicatedCategory,hide:!1,mirror:Nc.mirror,orientation:Nc.orientation,padding:Nc.padding,reversed:Nc.reversed,scale:Nc.scale,tickCount:Nc.tickCount,type:Nc.type,width:Nc.width,yAxisId:0},Jbe=e=>{var t,r,n,a,i,o=io(e,Zbe);return T.createElement(T.Fragment,null,T.createElement(Ybe,{interval:(t=o.interval)!==null&&t!==void 0?t:"preserveEnd",id:o.yAxisId,scale:o.scale,type:o.type,domain:o.domain,allowDataOverflow:o.allowDataOverflow,dataKey:o.dataKey,allowDuplicatedCategory:o.allowDuplicatedCategory,allowDecimals:o.allowDecimals,tickCount:o.tickCount,padding:o.padding,includeHidden:(r=o.includeHidden)!==null&&r!==void 0?r:!1,reversed:o.reversed,ticks:o.ticks,width:o.width,orientation:o.orientation,mirror:o.mirror,hide:o.hide,unit:o.unit,name:o.name,angle:(n=o.angle)!==null&&n!==void 0?n:0,minTickGap:(a=o.minTickGap)!==null&&a!==void 0?a:5,tick:(i=o.tick)!==null&&i!==void 0?i:!0,tickFormatter:o.tickFormatter}),T.createElement(Qbe,o))},eve=(e,t)=>{var{domain:r}=e,n=ck(e,Gbe),{domain:a}=t,i=ck(t,Kbe);return sp(n,i)?Array.isArray(r)&&r.length===2&&Array.isArray(a)&&a.length===2?r[0]===a[0]&&r[1]===a[1]:sp({domain:r},{domain:a}):!1},qu=T.memo(Jbe,eve);qu.displayName="YAxis";var s_={exports:{}},i_={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TD;function tve(){if(TD)return i_;TD=1;var e=cp();function t(d,c){return d===c&&(d!==0||1/d===1/c)||d!==d&&c!==c}var r=typeof Object.is=="function"?Object.is:t,n=e.useSyncExternalStore,a=e.useRef,i=e.useEffect,o=e.useMemo,l=e.useDebugValue;return i_.useSyncExternalStoreWithSelector=function(d,c,u,x,b){var g=a(null);if(g.current===null){var k={hasValue:!1,value:null};g.current=k}else k=g.current;g=o(function(){function N(q){if(!S){if(S=!0,O=q,q=x(q),b!==void 0&&k.hasValue){var W=k.value;if(b(W,q))return A=W}return A=q}if(W=A,r(O,q))return W;var R=x(q);return b!==void 0&&b(W,R)?(O=q,W):(O=q,A=R)}var S=!1,O,A,P=u===void 0?null:u;return[function(){return N(c())},P===null?void 0:function(){return N(P())}]},[c,u,x,b]);var y=n(d,g[0],g[1]);return i(function(){k.hasValue=!0,k.value=y},[y]),l(y),y},i_}var OD;function rve(){return OD||(OD=1,s_.exports=tve()),s_.exports}rve();function nve(e){e()}function ave(){let e=null,t=null;return{clear(){e=null,t=null},notify(){nve(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=e;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const a=t={callback:r,next:null,prev:t};return a.prev?a.prev.next=a:e=a,function(){!n||e===null||(n=!1,a.next?a.next.prev=a.prev:t=a.prev,a.prev?a.prev.next=a.next:e=a.next)}}}}var PD={notify(){},get:()=>[]};function sve(e,t){let r,n=PD,a=0,i=!1;function o(y){u();const N=n.subscribe(y);let S=!1;return()=>{S||(S=!0,N(),x())}}function l(){n.notify()}function d(){k.onStateChange&&k.onStateChange()}function c(){return i}function u(){a++,r||(r=e.subscribe(d),n=ave())}function x(){a--,r&&a===0&&(r(),r=void 0,n.clear(),n=PD)}function b(){i||(i=!0,u())}function g(){i&&(i=!1,x())}const k={addNestedSub:o,notifyNestedSubs:l,handleChangeWrapper:d,isSubscribed:c,trySubscribe:b,tryUnsubscribe:g,getListeners:()=>n};return k}var ive=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ove=ive(),lve=()=>typeof navigator<"u"&&navigator.product==="ReactNative",cve=lve(),dve=()=>ove||cve?T.useLayoutEffect:T.useEffect,uve=dve(),o_=Symbol.for("react-redux-context"),l_=typeof globalThis<"u"?globalThis:{};function hve(){if(!T.createContext)return{};const e=l_[o_]??(l_[o_]=new Map);let t=e.get(T.createContext);return t||(t=T.createContext(null),e.set(T.createContext,t)),t}var fve=hve();function mve(e){const{children:t,context:r,serverState:n,store:a}=e,i=T.useMemo(()=>{const d=sve(a);return{store:a,subscription:d,getServerState:n?()=>n:void 0}},[a,n]),o=T.useMemo(()=>a.getState(),[a]);uve(()=>{const{subscription:d}=i;return d.onStateChange=d.notifyNestedSubs,d.trySubscribe(),o!==a.getState()&&d.notifyNestedSubs(),()=>{d.tryUnsubscribe(),d.onStateChange=void 0}},[i,o]);const l=r||fve;return T.createElement(l.Provider,{value:i},t)}var xve=mve,pve=(e,t)=>t,qA=jt([pve,pa,EH,lo,b$,xh,ofe,so],hfe),HA=e=>{var t=e.currentTarget.getBoundingClientRect(),r=t.width/e.currentTarget.offsetWidth,n=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/r),chartY:Math.round((e.clientY-t.top)/n)}},kV=Nd("mouseClick"),NV=nv();NV.startListening({actionCreator:kV,effect:(e,t)=>{var r=e.payload,n=qA(t.getState(),HA(r));(n==null?void 0:n.activeIndex)!=null&&t.dispatch(phe({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var Ij=Nd("mouseMove"),_V=nv();_V.startListening({actionCreator:Ij,effect:(e,t)=>{var r=e.payload,n=t.getState(),a=fA(n,n.tooltip.settings.shared),i=qA(n,HA(r));a==="axis"&&((i==null?void 0:i.activeIndex)!=null?t.dispatch(c$({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate})):t.dispatch(l$()))}});var ID={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},SV=Hc({name:"rootProps",initialState:ID,reducers:{updateOptions:(e,t)=>{var r;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(r=t.payload.barGap)!==null&&r!==void 0?r:ID.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className}}}),gve=SV.reducer,{updateOptions:bve}=SV.actions,jV=Hc({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:vve}=jV.actions,yve=jV.reducer,CV=Nd("keyDown"),AV=Nd("focus"),$A=nv();$A.startListening({actionCreator:CV,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:a}=r.tooltip,i=e.payload;if(!(i!=="ArrowRight"&&i!=="ArrowLeft"&&i!=="Enter")){var o=Number(mA(a,jp(r))),l=xh(r);if(i==="Enter"){var d=ek(r,"axis","hover",String(a.index));t.dispatch(Nj({active:!a.active,activeIndex:a.index,activeDataKey:a.dataKey,activeCoordinate:d}));return}var c=ohe(r),u=c==="left-to-right"?1:-1,x=i==="ArrowRight"?1:-1,b=o+x*u;if(!(l==null||b>=l.length||b<0)){var g=ek(r,"axis","hover",String(b));t.dispatch(Nj({active:!0,activeIndex:b.toString(),activeDataKey:void 0,activeCoordinate:g}))}}}}});$A.startListening({actionCreator:AV,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:a}=r.tooltip;if(!a.active&&a.index==null){var i="0",o=ek(r,"axis","hover",String(i));t.dispatch(Nj({activeDataKey:void 0,active:!0,activeIndex:i,activeCoordinate:o}))}}}});var cd=Nd("externalEvent"),EV=nv();EV.startListening({actionCreator:cd,effect:(e,t)=>{if(e.payload.handler!=null){var r=t.getState(),n={activeCoordinate:Zhe(r),activeDataKey:k$(r),activeIndex:pf(r),activeLabel:w$(r),activeTooltipIndex:pf(r),isTooltipActive:Jhe(r)};e.payload.handler(n,e.payload.reactEvent)}}});var wve=jt([Sp],e=>e.tooltipItemPayloads),kve=jt([wve,gv,(e,t,r)=>t,(e,t,r)=>r],(e,t,r,n)=>{var a=e.find(l=>l.settings.dataKey===n);if(a!=null){var{positions:i}=a;if(i!=null){var o=t(i,r);return o}}}),TV=Nd("touchMove"),OV=nv();OV.startListening({actionCreator:TV,effect:(e,t)=>{var r=e.payload,n=t.getState(),a=fA(n,n.tooltip.settings.shared);if(a==="axis"){var i=qA(n,HA({clientX:r.touches[0].clientX,clientY:r.touches[0].clientY,currentTarget:r.currentTarget}));(i==null?void 0:i.activeIndex)!=null&&t.dispatch(c$({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate}))}else if(a==="item"){var o,l=r.touches[0],d=document.elementFromPoint(l.clientX,l.clientY);if(!d||!d.getAttribute)return;var c=d.getAttribute(lq),u=(o=d.getAttribute(cq))!==null&&o!==void 0?o:void 0,x=kve(t.getState(),c,u);t.dispatch(o$({activeDataKey:u,activeIndex:c,activeCoordinate:x}))}}});var Nve=Oz({brush:Fpe,cartesianAxis:b1e,chartData:Afe,errorBars:R1e,graphicalItems:Rxe,layout:zie,legend:Woe,options:Nfe,polarAxis:Qme,polarOptions:yve,referenceElements:Vpe,rootProps:gve,tooltip:ghe}),_ve=function(t){return hie({reducer:Nve,preloadedState:t,middleware:r=>r({serializableCheck:!1}).concat([NV.middleware,_V.middleware,$A.middleware,EV.middleware,OV.middleware]),enhancers:r=>{var n=r;return typeof r=="function"&&(n=r()),n.concat(Hz({type:"raf"}))},devTools:uh.devToolsEnabled})};function PV(e){var{preloadedState:t,children:r,reduxStoreName:n}=e,a=qo(),i=T.useRef(null);if(a)return r;i.current==null&&(i.current=_ve(t));var o=aC;return T.createElement(xve,{context:o,store:i.current},r)}function IV(e){var{layout:t,margin:r}=e,n=Gs(),a=qo();return T.useEffect(()=>{a||(n(Fie(t)),n(Rie(r)))},[n,a,t,r]),null}function DV(e){var t=Gs();return T.useEffect(()=>{t(bve(e))},[t,e]),null}var Sve=["children"];function jve(e,t){if(e==null)return{};var r,n,a=Cve(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Cve(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function dk(){return dk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},dk.apply(null,arguments)}var Ave={width:"100%",height:"100%",display:"block"},Eve=T.forwardRef((e,t)=>{var r=hC(),n=fC(),a=gq();if(!ep(r)||!ep(n))return null;var{children:i,otherAttributes:o,title:l,desc:d}=e,c,u;return typeof o.tabIndex=="number"?c=o.tabIndex:c=a?0:void 0,typeof o.role=="string"?u=o.role:u=a?"application":void 0,T.createElement(W6,dk({},o,{title:l,desc:d,role:u,tabIndex:c,width:r,height:n,style:Ave,ref:t}),i)}),Tve=e=>{var{children:t}=e,r=tn(a5);if(!r)return null;var{width:n,height:a,y:i,x:o}=r;return T.createElement(W6,{width:n,height:a,x:o,y:i},t)},DD=T.forwardRef((e,t)=>{var{children:r}=e,n=jve(e,Sve),a=qo();return a?T.createElement(Tve,null,r):T.createElement(Eve,dk({ref:t},n),r)});function Ove(){var e=Gs(),[t,r]=T.useState(null),n=tn(xoe);return T.useEffect(()=>{if(t!=null){var a=t.getBoundingClientRect(),i=a.width/t.offsetWidth;Wi(i)&&i!==n&&e(Uie(i))}},[t,e,n]),r}function MD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Pve(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?MD(Object(r),!0).forEach(function(n){Ive(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):MD(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ive(e,t,r){return(t=Dve(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Dve(e){var t=Mve(e,"string");return typeof t=="symbol"?t:t+""}function Mve(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ym(){return Ym=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ym.apply(null,arguments)}var Lve=()=>(Rfe(),null);function uk(e){if(typeof e=="number")return e;if(typeof e=="string"){var t=parseFloat(e);if(!Number.isNaN(t))return t}return 0}var Rve=T.forwardRef((e,t)=>{var r,n,a=T.useRef(null),[i,o]=T.useState({containerWidth:uk((r=e.style)===null||r===void 0?void 0:r.width),containerHeight:uk((n=e.style)===null||n===void 0?void 0:n.height)}),l=T.useCallback((c,u)=>{o(x=>{var b=Math.round(c),g=Math.round(u);return x.containerWidth===b&&x.containerHeight===g?x:{containerWidth:b,containerHeight:g}})},[]),d=T.useCallback(c=>{if(typeof t=="function"&&t(c),c!=null){var{width:u,height:x}=c.getBoundingClientRect();l(u,x);var b=k=>{var{width:y,height:N}=k[0].contentRect;l(y,N)},g=new ResizeObserver(b);g.observe(c),a.current=g}},[t,l]);return T.useEffect(()=>()=>{var c=a.current;c!=null&&c.disconnect()},[l]),T.createElement(T.Fragment,null,T.createElement(i5,{width:i.containerWidth,height:i.containerHeight}),T.createElement("div",Ym({ref:d},e)))}),Fve=T.forwardRef((e,t)=>{var{width:r,height:n}=e,[a,i]=T.useState({containerWidth:uk(r),containerHeight:uk(n)}),o=T.useCallback((d,c)=>{i(u=>{var x=Math.round(d),b=Math.round(c);return u.containerWidth===x&&u.containerHeight===b?u:{containerWidth:x,containerHeight:b}})},[]),l=T.useCallback(d=>{if(typeof t=="function"&&t(d),d!=null){var{width:c,height:u}=d.getBoundingClientRect();o(c,u)}},[t,o]);return T.createElement(T.Fragment,null,T.createElement(i5,{width:a.containerWidth,height:a.containerHeight}),T.createElement("div",Ym({ref:l},e)))}),Bve=T.forwardRef((e,t)=>{var{width:r,height:n}=e;return T.createElement(T.Fragment,null,T.createElement(i5,{width:r,height:n}),T.createElement("div",Ym({ref:t},e)))}),Uve=T.forwardRef((e,t)=>{var{width:r,height:n}=e;return th(r)||th(n)?T.createElement(Fve,Ym({},e,{ref:t})):T.createElement(Bve,Ym({},e,{ref:t}))});function zve(e){return e===!0?Rve:Uve}var qve=T.forwardRef((e,t)=>{var{children:r,className:n,height:a,onClick:i,onContextMenu:o,onDoubleClick:l,onMouseDown:d,onMouseEnter:c,onMouseLeave:u,onMouseMove:x,onMouseUp:b,onTouchEnd:g,onTouchMove:k,onTouchStart:y,style:N,width:S,responsive:O,dispatchTouchEvents:A=!0}=e,P=T.useRef(null),q=Gs(),[W,R]=T.useState(null),[U,L]=T.useState(null),Q=Ove(),H=uC(),G=(H==null?void 0:H.width)>0?H.width:S,Z=(H==null?void 0:H.height)>0?H.height:a,te=T.useCallback(ne=>{Q(ne),typeof t=="function"&&t(ne),R(ne),L(ne),ne!=null&&(P.current=ne)},[Q,t,R,L]),se=T.useCallback(ne=>{q(kV(ne)),q(cd({handler:i,reactEvent:ne}))},[q,i]),ue=T.useCallback(ne=>{q(Ij(ne)),q(cd({handler:c,reactEvent:ne}))},[q,c]),ae=T.useCallback(ne=>{q(l$()),q(cd({handler:u,reactEvent:ne}))},[q,u]),pe=T.useCallback(ne=>{q(Ij(ne)),q(cd({handler:x,reactEvent:ne}))},[q,x]),ve=T.useCallback(()=>{q(AV())},[q]),Pe=T.useCallback(ne=>{q(CV(ne.key))},[q]),xe=T.useCallback(ne=>{q(cd({handler:o,reactEvent:ne}))},[q,o]),B=T.useCallback(ne=>{q(cd({handler:l,reactEvent:ne}))},[q,l]),re=T.useCallback(ne=>{q(cd({handler:d,reactEvent:ne}))},[q,d]),J=T.useCallback(ne=>{q(cd({handler:b,reactEvent:ne}))},[q,b]),ie=T.useCallback(ne=>{q(cd({handler:y,reactEvent:ne}))},[q,y]),Y=T.useCallback(ne=>{A&&q(TV(ne)),q(cd({handler:k,reactEvent:ne}))},[q,A,k]),_e=T.useCallback(ne=>{q(cd({handler:g,reactEvent:ne}))},[q,g]),me=zve(O);return T.createElement(E$.Provider,{value:W},T.createElement(KU.Provider,{value:U},T.createElement(me,{width:G??(N==null?void 0:N.width),height:Z??(N==null?void 0:N.height),className:Zn("recharts-wrapper",n),style:Pve({position:"relative",cursor:"default",width:G,height:Z},N),onClick:se,onContextMenu:xe,onDoubleClick:B,onFocus:ve,onKeyDown:Pe,onMouseDown:re,onMouseEnter:ue,onMouseLeave:ae,onMouseMove:pe,onMouseUp:J,onTouchEnd:_e,onTouchMove:Y,onTouchStart:ie,ref:te},T.createElement(Lve,null),r)))}),Hve=["width","height","responsive","children","className","style","compact","title","desc"];function $ve(e,t){if(e==null)return{};var r,n,a=Vve(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Vve(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var MV=T.forwardRef((e,t)=>{var{width:r,height:n,responsive:a,children:i,className:o,style:l,compact:d,title:c,desc:u}=e,x=$ve(e,Hve),b=Il(x);return d?T.createElement(T.Fragment,null,T.createElement(i5,{width:r,height:n}),T.createElement(DD,{otherAttributes:b,title:c,desc:u},i)):T.createElement(qve,{className:o,style:l,width:r,height:n,responsive:a,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},T.createElement(DD,{otherAttributes:b,title:c,desc:u,ref:t},T.createElement(Gpe,null,i)))});function Dj(){return Dj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Dj.apply(null,arguments)}var Wve={top:5,right:5,bottom:5,left:5},Gve={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:Wve,reverseStackOrder:!1,syncMethod:"index",responsive:!1},D5=T.forwardRef(function(t,r){var n,a=io(t.categoricalChartProps,Gve),{chartName:i,defaultTooltipEventType:o,validateTooltipEventTypes:l,tooltipPayloadSearcher:d,categoricalChartProps:c}=t,u={chartName:i,defaultTooltipEventType:o,validateTooltipEventTypes:l,tooltipPayloadSearcher:d,eventEmitter:void 0};return T.createElement(PV,{preloadedState:{options:u},reduxStoreName:(n=c.id)!==null&&n!==void 0?n:i},T.createElement(rV,{chartData:c.data}),T.createElement(IV,{layout:a.layout,margin:a.margin}),T.createElement(DV,{accessibilityLayer:a.accessibilityLayer,barCategoryGap:a.barCategoryGap,maxBarSize:a.maxBarSize,stackOffset:a.stackOffset,barGap:a.barGap,barSize:a.barSize,syncId:a.syncId,syncMethod:a.syncMethod,className:a.className}),T.createElement(MV,Dj({},a,{ref:r})))}),Kve=["axis"],VA=T.forwardRef((e,t)=>T.createElement(D5,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Kve,tooltipPayloadSearcher:vv,categoricalChartProps:e,ref:t})),Xve=["axis","item"],Mj=T.forwardRef((e,t)=>T.createElement(D5,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Xve,tooltipPayloadSearcher:vv,categoricalChartProps:e,ref:t}));function Yve(e){var t=Gs();return T.useEffect(()=>{t(vve(e))},[t,e]),null}var Qve=["layout"];function Lj(){return Lj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Lj.apply(null,arguments)}function Zve(e,t){if(e==null)return{};var r,n,a=Jve(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Jve(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var e2e={top:5,right:5,bottom:5,left:5},t2e={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:e2e,reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1},r2e=T.forwardRef(function(t,r){var n,a=io(t.categoricalChartProps,t2e),{layout:i}=a,o=Zve(a,Qve),{chartName:l,defaultTooltipEventType:d,validateTooltipEventTypes:c,tooltipPayloadSearcher:u}=t,x={chartName:l,defaultTooltipEventType:d,validateTooltipEventTypes:c,tooltipPayloadSearcher:u,eventEmitter:void 0};return T.createElement(PV,{preloadedState:{options:x},reduxStoreName:(n=a.id)!==null&&n!==void 0?n:l},T.createElement(rV,{chartData:a.data}),T.createElement(IV,{layout:i,margin:a.margin}),T.createElement(DV,{accessibilityLayer:a.accessibilityLayer,barCategoryGap:a.barCategoryGap,maxBarSize:a.maxBarSize,stackOffset:a.stackOffset,barGap:a.barGap,barSize:a.barSize,syncId:a.syncId,syncMethod:a.syncMethod,className:a.className}),T.createElement(Yve,{cx:a.cx,cy:a.cy,startAngle:a.startAngle,endAngle:a.endAngle,innerRadius:a.innerRadius,outerRadius:a.outerRadius}),T.createElement(MV,Lj({},o,{ref:r})))}),n2e=["item"],a2e={layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},LV=T.forwardRef((e,t)=>{var r=io(e,a2e);return T.createElement(r2e,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:n2e,tooltipPayloadSearcher:vv,categoricalChartProps:r,ref:t})}),s2e=["axis"],i2e=T.forwardRef((e,t)=>T.createElement(D5,{chartName:"AreaChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:s2e,tooltipPayloadSearcher:vv,categoricalChartProps:e,ref:t})),o2e=["axis"],l2e=T.forwardRef((e,t)=>T.createElement(D5,{chartName:"ComposedChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:o2e,tooltipPayloadSearcher:vv,categoricalChartProps:e,ref:t}));const c2e={blue:{card:"bg-white dark:bg-slate-800 border border-blue-100 dark:border-blue-900/40",icon:"bg-blue-500/15 text-blue-600 dark:text-blue-400",accent:"text-blue-600 dark:text-blue-400"},emerald:{card:"bg-white dark:bg-slate-800 border border-emerald-100 dark:border-emerald-900/40",icon:"bg-emerald-500/15 text-emerald-600 dark:text-emerald-400",accent:"text-emerald-600 dark:text-emerald-400"},amber:{card:"bg-white dark:bg-slate-800 border border-amber-100 dark:border-amber-900/40",icon:"bg-amber-500/15 text-amber-600 dark:text-amber-400",accent:"text-amber-600 dark:text-amber-400"},violet:{card:"bg-white dark:bg-slate-800 border border-violet-100 dark:border-violet-900/40",icon:"bg-violet-500/15 text-violet-600 dark:text-violet-400",accent:"text-violet-600 dark:text-violet-400"}},a1=({title:e,value:t,subtitle:r,colorKey:n,icon:a})=>{const i=c2e[n];return s.jsxs("div",{className:`${i.card} rounded-xl p-5 shadow-sm hover:shadow-md transition-shadow`,children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm font-medium mb-1",children:e}),s.jsx("h3",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:t})]}),s.jsx("div",{className:`w-10 h-10 rounded-lg ${i.icon} flex items-center justify-center`,children:a})]}),s.jsx("p",{className:`text-sm ${i.accent}`,children:r})]})},_g=({icon:e,label:t,count:r,color:n})=>{const a={blue:"text-blue-600 dark:text-blue-400",green:"text-green-600 dark:text-green-400",amber:"text-amber-600 dark:text-amber-400",slate:"text-slate-600 dark:text-slate-400",red:"text-red-600 dark:text-red-400"};return s.jsxs(kd,{to:"/service",className:"flex items-center justify-between p-3 bg-slate-50 dark:bg-slate-700/50 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 transition group",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:a[n],children:e}),s.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:t})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-lg font-bold text-slate-900 dark:text-white",children:r}),s.jsx(EB,{className:"w-4 h-4 text-slate-400 group-hover:text-blue-500 transition"})]})]})},LD={purple:{text:"text-purple-600 dark:text-purple-400",bg:"bg-purple-50 dark:bg-purple-900/20"},orange:{text:"text-orange-600 dark:text-orange-400",bg:"bg-orange-50 dark:bg-orange-900/20"},emerald:{text:"text-emerald-600 dark:text-emerald-400",bg:"bg-emerald-50 dark:bg-emerald-900/20"},cyan:{text:"text-cyan-600 dark:text-cyan-400",bg:"bg-cyan-50 dark:bg-cyan-900/20"},blue:{text:"text-blue-600 dark:text-blue-400",bg:"bg-blue-50 dark:bg-blue-900/20"},amber:{text:"text-amber-600 dark:text-amber-400",bg:"bg-amber-50 dark:bg-amber-900/20"},rose:{text:"text-rose-600 dark:text-rose-400",bg:"bg-rose-50 dark:bg-rose-900/20"},violet:{text:"text-violet-600 dark:text-violet-400",bg:"bg-violet-50 dark:bg-violet-900/20"},slate:{text:"text-slate-600 dark:text-slate-400",bg:"bg-slate-50 dark:bg-slate-800"}},od=({to:e,icon:t,label:r,color:n,labelClassName:a})=>{const i=LD[n]||LD.purple;return s.jsxs(kd,{to:e,className:"flex flex-col items-center justify-center gap-2 p-2 rounded-xl hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-all duration-200 group",children:[s.jsx("div",{className:`w-12 h-12 rounded-2xl ${i.bg} ${i.text} flex items-center justify-center shadow-sm group-hover:scale-110 transition-transform duration-200`,children:t}),s.jsx("span",{className:`text-[11px] font-medium text-center leading-tight text-slate-700 dark:text-slate-300 ${a||""}`,children:r})]})},d2e=()=>{var re,J,ie;const{profile:e}=qc(),{data:t=[],isLoading:r}=Jb(),{data:n=[],isLoading:a}=lh(),{data:i=[],isLoading:o}=HU(),{data:l=[],isLoading:d}=H6(),{data:c=[],isLoading:u}=DU(),{data:x=[],isLoading:b}=$6(),{data:g=[],isLoading:k}=q6(),{data:y=[],isLoading:N}=IU(),{currentBranchId:S}=Ua(),O=r||a||o||d||u||b||k||N,[A,P]=T.useState(!1),[q,W]=T.useState("month"),R=T.useMemo(()=>new Date().toISOString().slice(0,10),[]),U=T.useMemo(()=>n.reduce((Y,_e)=>{var ne;const me=((ne=_e.stock)==null?void 0:ne[S])||0;return Y+me},0),[n,S]),L=T.useMemo(()=>n.reduce((Y,_e)=>{var je,De;const me=((je=_e.stock)==null?void 0:je[S])||0,ne=((De=_e.retailPrice)==null?void 0:De[S])||0;return Y+me*ne},0),[n,S]),Q=()=>{Hne(),window.location.reload()},H=()=>{confirm("Bn c chc mun xa ton b d liu demo khng?")&&($ne(),window.location.reload())},G=T.useMemo(()=>{const Y=t.filter(je=>je.date.slice(0,10)===R),_e=Y.reduce((je,De)=>je+De.total,0),me=Y.reduce((je,De)=>{const ce=De.items.reduce((Ee,be)=>Ee+(be.costPrice||0)*be.quantity,0);return je+(De.total-ce)},0),ne=new Set(Y.map(je=>je.customer.phone||je.customer.name)).size;return{revenue:_e,profit:me,customerCount:ne,orderCount:Y.length}},[t,R]),Z=T.useMemo(()=>{const Y=new Date;let _e;switch(q){case"today":_e=new Date(Y.getFullYear(),Y.getMonth(),Y.getDate());break;case"week":const Ee=Y.getDay(),be=Ee===0?6:Ee-1;_e=new Date(Y.getFullYear(),Y.getMonth(),Y.getDate()-be);break;case"month":_e=new Date(Y.getFullYear(),Y.getMonth(),1);break;case"year":_e=new Date(Y.getFullYear(),0,1);break;default:_e=new Date(Y.getFullYear(),Y.getMonth(),1)}const me=_e.toISOString().slice(0,10),ne=t.filter(Ee=>Ee.date.slice(0,10)>=me),je=ne.reduce((Ee,be)=>Ee+be.total,0),De=ne.reduce((Ee,be)=>{const ge=be.items.reduce((Qe,Ye)=>Qe+(Ye.costPrice||0)*Ye.quantity,0);return Ee+(be.total-ge)},0),ce=new Set(ne.map(Ee=>Ee.customer.phone||Ee.customer.name)).size;return{revenue:je,profit:De,customerCount:ce,orderCount:ne.length}},[t,q]),te=T.useMemo(()=>{const Y=[];for(let _e=6;_e>=0;_e--){const me=new Date;me.setDate(me.getDate()-_e);const ne=me.toISOString().slice(0,10),De=t.filter(Ee=>Ee.date.slice(0,10)===ne).reduce((Ee,be)=>Ee+be.total,0),ce=i.filter(Ee=>Ee.type==="expense"&&Ee.date.slice(0,10)===ne).reduce((Ee,be)=>Ee+be.amount,0);Y.push({date:me.toLocaleDateString("vi-VN",{day:"2-digit",month:"2-digit"}),revenue:De,expense:ce,profit:De-ce})}return Y},[t,i]),se=T.useMemo(()=>{const Y=i.filter(me=>me.type==="income").reduce((me,ne)=>me+ne.amount,0),_e=i.filter(me=>me.type==="expense").reduce((me,ne)=>me+ne.amount,0);return[{name:"Thu",value:Y,color:"#10b981"},{name:"Chi",value:_e,color:"#ef4444"}]},[i]),ue=T.useMemo(()=>{const Y={};return t.forEach(_e=>{_e.items.forEach(me=>{Y[me.partId]||(Y[me.partId]={name:me.partName,quantity:0}),Y[me.partId].quantity+=me.quantity})}),Object.values(Y).sort((_e,me)=>me.quantity-_e.quantity).slice(0,5)},[t]),ae=((re=c.find(Y=>Y.id==="cash"))==null?void 0:re.balance[S])||0,pe=((J=c.find(Y=>Y.id==="bank"))==null?void 0:J.balance[S])||0,ve=T.useMemo(()=>{const Y=(y||[]).filter(De=>De.status==="Tip nhn").length,_e=(y||[]).filter(De=>De.status==="ang sa").length,me=(y||[]).filter(De=>De.status===" sa xong").length,ne=(y||[]).filter(De=>De.status==="Tr my").length,je=(y||[]).filter(De=>De.status===" hy").length;return{newOrders:Y,inProgress:_e,completed:me,cancelled:ne,notRepairable:je}},[y]),Pe=T.useMemo(()=>{const Y=[],_e=n.filter(ne=>(ne.stock[S]||0)<10);_e.length>0&&Y.push({type:"Tn kho thp",message:`${_e.length} sn phm sp ht hng`,color:"text-orange-600 dark:text-orange-400"});const me=g.filter(ne=>{const je=Math.ceil((new Date(ne.endDate).getTime()-Date.now())/864e5);return je<=30&&je>0&&ne.status==="active"});return me.length>0&&Y.push({type:"N n hn",message:`${me.length} khon vay sp n hn`,color:"text-red-600 dark:text-red-400"}),ae+pe<1e7&&Y.push({type:"S d thp",message:"S d ti khon di 10 triu",color:"text-amber-600 dark:text-amber-400"}),Y},[n,g,ae,pe,S]),xe=T.useMemo(()=>{const Y={};return t.forEach(_e=>{const me=_e.customer.phone||_e.customer.name;Y[me]||(Y[me]={name:_e.customer.name,phone:_e.customer.phone,total:0}),Y[me].total+=_e.total}),Object.values(Y).sort((_e,me)=>me.total-_e.total).slice(0,10)},[t]),B=T.useMemo(()=>{const Y=[],_e=new Date;for(let me=2;me>=0;me--){const ne=new Date(_e.getFullYear(),_e.getMonth()-me,1),je=ne.toISOString().slice(0,7),De=ne.toLocaleDateString("vi-VN",{month:"short",year:"numeric"}),ce=t.filter(ge=>ge.date.startsWith(je)),Ee=ce.reduce((ge,Qe)=>ge+Qe.total,0),be=ce.length;Y.push({month:De,revenue:Ee,orders:be})}return Y},[t]);return O?s.jsx("div",{className:"flex items-center justify-center h-96",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):s.jsxs("div",{className:"space-y-4 md:space-y-6",children:[s.jsx("div",{className:"md:hidden bg-gradient-to-r from-blue-600 to-violet-600 dark:from-blue-700 dark:to-violet-800 rounded-2xl p-4 md:p-6 text-white shadow-lg",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("h1",{className:"text-lg md:text-xl font-semibold mb-1",children:["Xin cho,"," ",(e==null?void 0:e.full_name)||((ie=e==null?void 0:e.email)==null?void 0:ie.split("@")[0])||"Ngi dng"," ",""]}),s.jsx("p",{className:"text-sm md:text-base text-blue-100 dark:text-violet-100",children:new Date().toLocaleDateString("vi-VN",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),s.jsxs("div",{className:"mt-4 flex flex-wrap gap-3",children:[s.jsxs("div",{className:"bg-white/20 backdrop-blur-sm rounded-lg px-3 py-2 flex items-center gap-2",children:[s.jsx(YJ,{className:"w-4 h-4"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs opacity-90",children:"Tin mt"}),s.jsx("p",{className:"text-sm font-semibold",children:Te(ae)})]})]}),s.jsxs("div",{className:"bg-white/20 backdrop-blur-sm rounded-lg px-3 py-2 flex items-center gap-2",children:[s.jsx(ff,{className:"w-4 h-4"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs opacity-90",children:"Qun l"}),s.jsx("p",{className:"text-sm font-semibold",children:x.filter(Y=>Y.status==="active").length})]})]})]})]}),s.jsx(bS,{className:"w-6 h-6 md:w-7 md:h-7 opacity-80 hover:opacity-100 cursor-pointer transition"})]})}),s.jsxs("div",{className:"md:hidden bg-white dark:bg-slate-800 rounded-xl p-4 md:p-5 shadow-sm border border-slate-200 dark:border-slate-700",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h2",{className:"text-base md:text-lg font-bold text-slate-900 dark:text-white",children:"Bo co"}),s.jsxs("select",{value:q,onChange:Y=>W(Y.target.value),className:"text-sm bg-slate-50 dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg px-3 py-1.5 text-slate-700 dark:text-slate-200 focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"month",children:"Thng ny"}),s.jsx("option",{value:"today",children:"Hm nay"}),s.jsx("option",{value:"week",children:"Tun ny"}),s.jsx("option",{value:"year",children:"Nm nay"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3 md:gap-4",children:[s.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 rounded-lg p-3 md:p-4",children:[s.jsx("p",{className:"text-xs md:text-sm text-slate-600 dark:text-slate-400 mb-1",children:"Doanh thu"}),s.jsx("p",{className:"text-lg md:text-2xl font-bold text-blue-600 dark:text-blue-400",children:Te(Z.revenue)})]}),s.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 rounded-lg p-3 md:p-4",children:[s.jsx("p",{className:"text-xs md:text-sm text-slate-600 dark:text-slate-400 mb-1",children:"Li nhun"}),s.jsx("p",{className:`text-lg md:text-2xl font-bold ${Z.profit>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:Te(Z.profit)})]})]})]}),s.jsxs("div",{className:"md:hidden bg-white dark:bg-slate-800 rounded-xl p-4 md:p-5 shadow-sm border border-slate-200 dark:border-slate-700",children:[s.jsx("h3",{className:"text-sm md:text-base font-semibold text-slate-900 dark:text-white mb-3",children:"Trng thi phiu sa cha"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(_g,{icon:s.jsx(ru,{className:"w-5 h-5"}),label:"Bin nhn mi",count:ve.newOrders,color:"blue"}),s.jsx(_g,{icon:s.jsx(HJ,{className:"w-5 h-5"}),label:" sa xong",count:ve.completed,color:"green"}),s.jsx(_g,{icon:s.jsx(yS,{className:"w-5 h-5"}),label:"ang sa",count:ve.inProgress,color:"amber"}),s.jsx(_g,{icon:s.jsx(VJ,{className:"w-5 h-5"}),label:" hy",count:ve.cancelled,color:"slate"}),s.jsx(_g,{icon:s.jsx(TB,{className:"w-5 h-5"}),label:"Khng sa c",count:ve.notRepairable,color:"red"})]})]}),s.jsxs("div",{className:"md:hidden bg-white dark:bg-slate-800 rounded-xl p-4 md:p-5 shadow-sm border border-slate-200 dark:border-slate-700",children:[s.jsx("h3",{className:"text-sm md:text-base font-semibold text-slate-900 dark:text-white mb-4",children:"Truy cp nhanh"}),s.jsxs("div",{className:"grid grid-cols-4 gap-3 md:gap-4",children:[s.jsx(od,{to:"/sales",icon:s.jsx(om,{className:"w-6 h-6 md:w-7 md:h-7"}),label:"Bn hng",color:"emerald"}),s.jsx(od,{to:"/service",icon:s.jsx(Bm,{className:"w-6 h-6 md:w-7 md:h-7"}),label:"Sa cha",color:"blue"}),s.jsx(od,{to:"/inventory",icon:s.jsx(Hi,{className:"w-6 h-6 md:w-7 md:h-7"}),label:"Kho hng",color:"orange"}),s.jsx(od,{to:"/customers",icon:s.jsx(ff,{className:"w-6 h-6 md:w-7 md:h-7"}),label:"Khch hng",color:"cyan"}),s.jsx(od,{to:"/finance",icon:s.jsx(lb,{className:"w-6 h-6 md:w-7 md:h-7"}),label:"Ti chnh",color:"violet"}),s.jsx(od,{to:"/debt",icon:s.jsx(Fm,{className:"w-6 h-6 md:w-7 md:h-7"}),label:"Cng n",color:"rose"}),s.jsx(od,{to:"/cashbook",icon:s.jsx(q0,{className:"w-6 h-6 md:w-7 md:h-7"}),label:"S qu",color:"amber"}),s.jsx(od,{to:"/reports",icon:s.jsx(vd,{className:"w-6 h-6 md:w-7 md:h-7"}),label:"Bo co",color:"slate"}),s.jsx(od,{to:"/employees",icon:s.jsx(Rm,{className:"w-6 h-6 md:w-7 md:h-7"}),label:"Nhn vin",color:"purple"}),s.jsx(od,{to:"/categories",icon:s.jsx(PB,{className:"w-6 h-6 md:w-7 md:h-7"}),label:"Danh mc",color:"slate"}),s.jsx(od,{to:"/lookup",icon:s.jsx(nu,{className:"w-6 h-6 md:w-7 md:h-7"}),label:"Tra cu",color:"slate"}),s.jsx(od,{to:"/settings",icon:s.jsx(cb,{className:"w-6 h-6 md:w-7 md:h-7"}),label:"Ci t",color:"slate"})]})]}),Pe.length>0&&s.jsxs("div",{className:"md:hidden bg-white dark:bg-slate-800 rounded-xl p-4 shadow-sm border border-slate-200 dark:border-slate-700",children:[s.jsxs("h3",{className:"text-sm font-semibold text-slate-900 dark:text-white mb-3 flex items-center gap-2",children:[s.jsx(bw,{className:"w-4 h-4 text-amber-500"}),"Cnh bo"]}),s.jsx("div",{className:"space-y-2",children:Pe.map((Y,_e)=>s.jsxs("div",{className:"flex items-center gap-3 p-3 bg-amber-50 dark:bg-amber-900/20 rounded-lg border border-amber-200 dark:border-amber-800",children:[s.jsxs("div",{className:"flex-shrink-0",children:[Y.type==="Tn kho thp"&&s.jsx(ru,{className:"w-5 h-5 text-orange-500"}),Y.type==="N n hn"&&s.jsx(Fm,{className:"w-5 h-5 text-red-500"}),Y.type==="S d thp"&&s.jsx(q0,{className:"w-5 h-5 text-amber-500"})]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-xs font-semibold text-slate-700 dark:text-slate-200",children:Y.type}),s.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-400 truncate",children:Y.message})]}),s.jsx(EB,{className:"w-4 h-4 text-slate-400 flex-shrink-0"})]},_e))})]}),s.jsx("div",{className:"md:hidden bg-white dark:bg-slate-800 rounded-xl p-4 shadow-sm border border-slate-200 dark:border-slate-700",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-400",children:"Tng SL tn kho"}),s.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:U.toLocaleString()}),s.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:"Gp tt c chi nhnh"})]}),s.jsx(kd,{to:"/inventory",className:"p-3 bg-amber-50 dark:bg-amber-900/20 rounded-xl text-amber-600 dark:text-amber-400 hover:bg-amber-100 dark:hover:bg-amber-900/40 transition",children:s.jsx(Hi,{className:"w-6 h-6"})})]})}),s.jsxs("div",{className:"hidden",children:[A&&s.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-slate-800 dark:to-slate-700 border-2 border-blue-200 dark:border-blue-800 rounded-xl p-6 shadow-lg",children:s.jsxs("div",{className:"flex items-start justify-between gap-4",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-xl font-bold text-blue-900 dark:text-blue-100 mb-2",children:" Cha c d liu"}),s.jsx("p",{className:"text-slate-600 dark:text-slate-300 mb-4",children:"H thng cha c d liu. Bn c th ti d liu mu  khm ph cc tnh nng hoc bt u nhp d liu thc t."}),s.jsxs("div",{className:"flex gap-3",children:[s.jsxs("button",{onClick:Q,className:"px-6 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg font-medium shadow-md hover:shadow-xl hover:from-blue-700 hover:to-indigo-700 transition-all duration-200 flex items-center gap-2",children:[s.jsx(ru,{className:"w-5 h-5"})," Ti d liu mu"]}),s.jsx("button",{onClick:()=>P(!1),className:"px-6 py-3 bg-white dark:bg-slate-700 text-slate-700 dark:text-slate-200 border-2 border-slate-300 dark:border-slate-600 rounded-lg font-medium hover:bg-slate-50 dark:hover:bg-slate-600 transition-all duration-200",children:"B qua"})]})]}),s.jsx("div",{className:"hidden md:block text-6xl",children:s.jsx(pw,{className:"w-16 h-16 text-blue-600 dark:text-blue-400"})})]})}),t.length>0&&s.jsx("div",{className:"flex justify-end",children:s.jsxs("button",{onClick:H,className:"px-4 py-2 text-sm bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300 border border-red-300 dark:border-red-700 rounded-lg hover:bg-red-200 dark:hover:bg-red-900/50 transition-colors inline-flex items-center gap-2",children:[s.jsx(db,{className:"w-4 h-4"})," Xa tt c d liu"]})})]}),s.jsxs("div",{className:"hidden lg:grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsx(a1,{title:"Doanh thu hm nay",value:Te(G.revenue),subtitle:`${G.orderCount} n hng`,colorKey:"blue",icon:s.jsx(D0,{className:"w-5 h-5"})}),s.jsx(a1,{title:"Li nhun hm nay",value:Te(G.profit),subtitle:`${G.customerCount} khch hng`,colorKey:"emerald",icon:s.jsx(Y1,{className:"w-5 h-5"})}),s.jsx(a1,{title:"Tin mt",value:Te(ae),subtitle:"Qu tin mt",colorKey:"amber",icon:s.jsx(q0,{className:"w-5 h-5"})}),s.jsx(a1,{title:"Ngn hng",value:Te(pe),subtitle:"Ti khon ngn hng",colorKey:"violet",icon:s.jsx(lb,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsx(a1,{title:"Tng SL tn kho",value:O?"...":`${U}`,subtitle:"Gp tt c chi nhnh",colorKey:"blue",icon:s.jsx(Hi,{className:"w-5 h-5"})}),s.jsx(a1,{title:"Tng gi tr tn kho",value:O?"...":Te(L),subtitle:"Theo gi bn l hin ti",colorKey:"violet",icon:s.jsx(ru,{className:"w-5 h-5"})})]}),Pe.length>0&&s.jsxs("div",{className:"hidden md:block bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-4",children:[s.jsxs("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-3 flex items-center gap-2",children:[s.jsx(bw,{className:"w-5 h-5 text-amber-500"})," Cnh bo"]}),s.jsx("div",{className:"space-y-2",children:Pe.map((Y,_e)=>s.jsxs("div",{className:"flex items-center justify-between py-2 px-3 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:[s.jsxs("div",{children:[s.jsxs("span",{className:"font-medium text-slate-900 dark:text-white",children:[Y.type,":"]})," ",s.jsx("span",{className:Y.color,children:Y.message})]}),s.jsx("button",{className:"text-blue-600 hover:text-blue-700 dark:text-blue-400 text-sm font-medium",children:"Xem chi tit "})]},_e))})]}),s.jsxs("div",{className:"hidden md:grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"Doanh thu & Chi ph 7 ngy gn y"}),s.jsx(Bu,{width:"100%",height:250,children:s.jsxs(VA,{data:te,children:[s.jsx(V0,{strokeDasharray:"3 3",stroke:"#334155"}),s.jsx(G0,{dataKey:"date",stroke:"#94a3b8"}),s.jsx(qu,{stroke:"#94a3b8"}),s.jsx(zu,{contentStyle:{backgroundColor:"#1e293b",border:"1px solid #334155",borderRadius:"8px"},formatter:Y=>Te(Y)}),s.jsx(Vm,{}),s.jsx(xf,{type:"monotone",dataKey:"revenue",stroke:"#10b981",strokeWidth:2,name:"Doanh thu"}),s.jsx(xf,{type:"monotone",dataKey:"expense",stroke:"#ef4444",strokeWidth:2,name:"Chi ph"}),s.jsx(xf,{type:"monotone",dataKey:"profit",stroke:"#3b82f6",strokeWidth:2,name:"Li nhun"})]})})]}),s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"T l Thu/Chi"}),s.jsx(Bu,{width:"100%",height:250,children:s.jsxs(LV,{children:[s.jsx(DA,{data:se,cx:"50%",cy:"50%",labelLine:!1,label:({name:Y,percent:_e})=>`${Y}: ${(_e*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:se.map((Y,_e)=>s.jsx(Cp,{fill:Y.color},`cell-${_e}`))}),s.jsx(zu,{formatter:Y=>Te(Y)})]})}),s.jsx("div",{className:"mt-4 flex justify-center gap-6"})]}),s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"Top 5 sn phm bn chy"}),s.jsx(Bu,{width:"100%",height:250,children:s.jsxs(Mj,{data:ue,children:[s.jsx(V0,{strokeDasharray:"3 3",stroke:"#334155"}),s.jsx(G0,{dataKey:"name",stroke:"#94a3b8"}),s.jsx(qu,{stroke:"#94a3b8"}),s.jsx(zu,{contentStyle:{backgroundColor:"#1e293b",border:"1px solid #334155",borderRadius:"8px"}}),s.jsx(Cm,{dataKey:"quantity",fill:"#3b82f6",name:"S lng bn"})]})})]})]}),s.jsxs("div",{className:"hidden md:grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-6",children:[s.jsxs("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4 flex items-center gap-2",children:[s.jsx(gee,{className:"w-5 h-5 text-yellow-500"}),"Top 10 Khch hng VIP"]}),s.jsx("div",{className:"space-y-3",children:xe.map((Y,_e)=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 dark:bg-slate-700/50 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-gradient-to-br from-blue-500 to-blue-600 text-white font-bold text-sm",children:_e+1}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-slate-900 dark:text-white",children:Y.name}),Y.phone&&s.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:Y.phone})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"font-semibold text-green-600 dark:text-green-400",children:Te(Y.total)}),s.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Tng chi tiu"})]})]},_e))})]}),s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-6",children:[s.jsxs("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4 flex items-center gap-2",children:[s.jsx(pw,{className:"w-5 h-5 text-blue-500"}),"So snh 3 thng gn y"]}),s.jsx(Bu,{width:"100%",height:300,children:s.jsxs(Mj,{data:B,children:[s.jsx(V0,{strokeDasharray:"3 3",stroke:"#334155"}),s.jsx(G0,{dataKey:"month",stroke:"#94a3b8"}),s.jsx(qu,{yAxisId:"left",stroke:"#3b82f6"}),s.jsx(qu,{yAxisId:"right",orientation:"right",stroke:"#10b981"}),s.jsx(zu,{contentStyle:{backgroundColor:"#1e293b",border:"1px solid #334155",borderRadius:"8px"},formatter:(Y,_e)=>_e==="revenue"?Te(Y):Y}),s.jsx(Vm,{}),s.jsx(Cm,{yAxisId:"left",dataKey:"revenue",fill:"#3b82f6",name:"Doanh thu"}),s.jsx(Cm,{yAxisId:"right",dataKey:"orders",fill:"#10b981",name:"S n"})]})})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h3",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:"Tng khch hng"}),s.jsx(ff,{className:"w-5 h-5 text-slate-500"})]}),s.jsx("div",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:l.length}),s.jsxs("div",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:[l.filter(Y=>Y.segment==="VIP").length," VIP"]})]}),s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h3",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:"Tng nhn vin"}),s.jsx(Rm,{className:"w-5 h-5 text-slate-500"})]}),s.jsx("div",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:x.filter(Y=>Y.status==="active").length}),s.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:"ang lm vic"})]}),s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h3",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:"Tng sn phm"}),s.jsx(Hi,{className:"w-5 h-5 text-slate-500"})]}),s.jsx("div",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:n.reduce((Y,_e)=>Y+(_e.stock[S]||0),0)}),s.jsxs("div",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:[n.length," loi sn phm"]})]})]})]})},u2e={"sale.delete":["owner","manager"],"part.update_price":["owner","manager"],"settings.update":["owner","manager"],"finance.view":["owner","manager"],"payroll.view":["owner","manager"],"analytics.view":["owner","manager"],"reports.view":["owner","manager","staff"],"employees.view":["owner","manager"],"debt.view":["owner","manager"]};function RV(e,t){return e?u2e[t].includes(e):!1}function h2e(e,t,r=5){return T.useMemo(()=>{const n=Array.isArray(e)?e:[],a=t||"",i=n.filter(l=>{var d;return(((d=l.stock)==null?void 0:d[a])??0)<=0}),o=n.filter(l=>{var c;const d=((c=l.stock)==null?void 0:c[a])??0;return d>0&&d<=r});return{lowStock:o,outOfStock:i,lowStockCount:o.length,outOfStockCount:i.length}},[e,t,r])}function hk(e){const t=document.getElementById(e);if(!t)return;const r=window.open("","_blank","width=800,height=600");r&&(r.document.write(`<!doctype html><html><head><title>Print</title>
  <style>
    body{font-family: Arial, Helvetica, sans-serif;}
    @media print{ .no-print{ display:none } }
  </style>
  </head><body>${t.outerHTML}</body></html>`),r.document.close(),r.focus(),r.print(),r.close())}const f2e=e=>s.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.5,...e,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19.128a9.38 9.38 0 002.625.372 9.337 9.337 0 004.121-.952 4.125 4.125 0 00-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 018.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0111.964-4.663M12 6.375a3.375 3.375 0 11-6.75 0 3.375 3.375 0 016.75 0z"})}),Mc=e=>s.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.5,...e,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})}),FV=e=>s.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.5,...e,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"})}),Ap=e=>s.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.5,...e,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})});async function m2e(){try{const{data:e,error:t}=await It.from("customer_debts").select("*").order("created_at",{ascending:!1});if(t)return Ct({code:"supabase",message:"Khng th ti danh sch cng n khch hng",cause:t});const r=(e||[]).filter(i=>i.sale_id).map(i=>i.sale_id);let n=new Map;if(r.length>0){const{data:i}=await It.from("sales").select("id, sale_code").in("id",r);i&&i.forEach(o=>{o.sale_code&&n.set(o.id,o.sale_code)})}const a=(e||[]).map(i=>{let o=i.description;if(i.sale_id&&n.has(i.sale_id)){const l=n.get(i.sale_id);o=o.replace(/Ha n SALE-\d+/g,`Ha n ${l}`).replace(/Ha n #\d+/g,`Ha n ${l}`)}return{id:i.id,customerId:i.customer_id,customerName:i.customer_name,phone:i.phone,licensePlate:i.license_plate,description:o,totalAmount:i.total_amount,paidAmount:i.paid_amount,remainingAmount:i.remaining_amount,createdDate:i.created_date,branchId:i.branch_id}});return Sn(a)}catch(e){return Ct({code:"network",message:"Li kt ni ti my ch",cause:e})}}async function x2e(e){try{const r={id:e.workOrderId?`CDEBT-WO-${e.workOrderId}`:e.saleId?`CDEBT-SALE-${e.saleId}`:`CDEBT-${Date.now()}`,customer_id:e.customerId,customer_name:e.customerName,phone:e.phone,license_plate:e.licensePlate,description:e.description,total_amount:e.totalAmount,paid_amount:e.paidAmount||0,remaining_amount:e.totalAmount-(e.paidAmount||0),created_date:e.createdDate,branch_id:e.branchId||"CN1",work_order_id:e.workOrderId||null,sale_id:e.saleId||null};console.log("[debtsRepository] Upserting debt:",r);let n;if(e.saleId){const{data:o,error:l}=await It.from("customer_debts").select("id").eq("sale_id",e.saleId).eq("branch_id",r.branch_id).maybeSingle();o&&!l?(console.log("[debtsRepository] Updating existing sale debt:",o.id),n=await It.from("customer_debts").update(r).eq("id",o.id).select().single()):(console.log("[debtsRepository] Inserting new sale debt"),n=await It.from("customer_debts").insert(r).select().single())}else if(e.workOrderId){const{data:o,error:l}=await It.from("customer_debts").select("id").eq("work_order_id",e.workOrderId).eq("branch_id",r.branch_id).maybeSingle();o&&!l?(console.log("[debtsRepository] Updating existing work order debt:",o.id),n=await It.from("customer_debts").update(r).eq("id",o.id).select().single()):(console.log("[debtsRepository] Inserting new work order debt"),n=await It.from("customer_debts").insert(r).select().single())}else console.log("[debtsRepository] Inserting generic debt"),n=await It.from("customer_debts").insert(r).select().single();const{data:a,error:i}=n;return i||!a?Ct({code:"supabase",message:(i==null?void 0:i.message)||"Khng th thm/cp nht cng n",cause:i||new Error("No data returned")}):Sn({id:a.id,customerId:a.customer_id,customerName:a.customer_name,phone:a.phone,licensePlate:a.license_plate,description:a.description,totalAmount:a.total_amount,paidAmount:a.paid_amount,remainingAmount:a.remaining_amount,createdDate:a.created_date,branchId:a.branch_id})}catch(t){return Ct({code:"network",message:"Li kt ni khi thm/cp nht cng n",cause:t})}}async function p2e(e,t){try{const r={};t.customerName!==void 0&&(r.customer_name=t.customerName),t.phone!==void 0&&(r.phone=t.phone),t.licensePlate!==void 0&&(r.license_plate=t.licensePlate),t.description!==void 0&&(r.description=t.description),t.totalAmount!==void 0&&(r.total_amount=t.totalAmount),t.paidAmount!==void 0&&(r.paid_amount=t.paidAmount,r.remaining_amount=(t.totalAmount||0)-t.paidAmount),r.updated_at=new Date().toISOString();const{data:n,error:a}=await It.from("customer_debts").update(r).eq("id",e).select().single();return a||!n?Ct({code:"supabase",message:"Khng th cp nht cng n",cause:a}):Sn({id:n.id,customerId:n.customer_id,customerName:n.customer_name,phone:n.phone,licensePlate:n.license_plate,description:n.description,totalAmount:n.total_amount,paidAmount:n.paid_amount,remainingAmount:n.remaining_amount,createdDate:n.created_date,branchId:n.branch_id})}catch(r){return Ct({code:"network",message:"Li kt ni khi cp nht cng n",cause:r})}}async function g2e(e){try{const{error:t}=await It.from("customer_debts").delete().eq("id",e);return t?Ct({code:"supabase",message:"Khng th xa cng n",cause:t}):Sn(void 0)}catch(t){return Ct({code:"network",message:"Li kt ni khi xa cng n",cause:t})}}async function b2e(){try{const{data:e,error:t}=await It.from("supplier_debts").select("*").order("created_at",{ascending:!1});if(t)return Ct({code:"supabase",message:"Khng th ti danh sch cng n nh cung cp",cause:t});const r=(e||[]).map(n=>({id:n.id,supplierId:n.supplier_id,supplierName:n.supplier_name,description:n.description,totalAmount:n.total_amount,paidAmount:n.paid_amount,remainingAmount:n.remaining_amount,createdDate:n.created_date,branchId:n.branch_id}));return Sn(r)}catch(e){return Ct({code:"network",message:"Li kt ni ti my ch",cause:e})}}async function v2e(e){try{const t={id:`SDEBT-${Date.now()}`,supplier_id:e.supplierId,supplier_name:e.supplierName,description:e.description,total_amount:e.totalAmount,paid_amount:e.paidAmount||0,remaining_amount:e.totalAmount-(e.paidAmount||0),created_date:e.createdDate,branch_id:e.branchId||"CN1"},{data:r,error:n}=await It.from("supplier_debts").insert(t).select().single();return n||!r?Ct({code:"supabase",message:(n==null?void 0:n.message)||"Khng th thm cng n",cause:n||new Error("No data returned")}):Sn({id:r.id,supplierId:r.supplier_id,supplierName:r.supplier_name,description:r.description,totalAmount:r.total_amount,paidAmount:r.paid_amount,remainingAmount:r.remaining_amount,createdDate:r.created_date,branchId:r.branch_id})}catch(t){return Ct({code:"network",message:"Li kt ni khi thm cng n",cause:t})}}async function y2e(e,t){try{const r={};t.supplierName!==void 0&&(r.supplier_name=t.supplierName),t.description!==void 0&&(r.description=t.description),t.totalAmount!==void 0&&(r.total_amount=t.totalAmount),t.paidAmount!==void 0&&(r.paid_amount=t.paidAmount,r.remaining_amount=(t.totalAmount||0)-t.paidAmount),r.updated_at=new Date().toISOString();const{data:n,error:a}=await It.from("supplier_debts").update(r).eq("id",e).select().single();return a||!n?Ct({code:"supabase",message:"Khng th cp nht cng n",cause:a}):Sn({id:n.id,supplierId:n.supplier_id,supplierName:n.supplier_name,description:n.description,totalAmount:n.total_amount,paidAmount:n.paid_amount,remainingAmount:n.remaining_amount,createdDate:n.created_date,branchId:n.branch_id})}catch(r){return Ct({code:"network",message:"Li kt ni khi cp nht cng n",cause:r})}}async function w2e(e){try{const{error:t}=await It.from("supplier_debts").delete().eq("id",e);return t?Ct({code:"supabase",message:"Khng th xa cng n",cause:t}):Sn(void 0)}catch(t){return Ct({code:"network",message:"Li kt ni khi xa cng n",cause:t})}}function WA(){return Ls({queryKey:["customer_debts"],queryFn:async()=>{const e=await m2e();if(!e.ok)throw new Error(Na(e.error));return e.data}})}function M5(){const e=Un();return xa({mutationFn:async t=>{const r=await x2e(t);if(!r.ok){const n=r.error?Na(r.error):"Khng th thm cng n";throw new Error(n)}return r.data},onSuccess:(t,r)=>{e.invalidateQueries({queryKey:["customer_debts"]}),r.saleId||Ze.success("Thm cng n thnh cng!")},onError:(t,r)=>{r.saleId||Ze.error((t==null?void 0:t.message)||"C li xy ra")}})}function BV(){const e=Un();return xa({mutationFn:async({id:t,updates:r})=>{const n=await p2e(t,r);if(!n.ok)throw new Error(Na(n.error));return n.data},onSuccess:()=>{e.invalidateQueries({queryKey:["customer_debts"]}),Ze.success("Cp nht cng n thnh cng!")},onError:t=>{Ze.error((t==null?void 0:t.message)||"C li xy ra")}})}function k2e(){const e=Un();return xa({mutationFn:async t=>{const r=await g2e(t);if(!r.ok)throw new Error(Na(r.error));return r.data},onSuccess:()=>{e.invalidateQueries({queryKey:["customer_debts"]}),Ze.success("Xa cng n thnh cng!")},onError:t=>{Ze.error((t==null?void 0:t.message)||"C li xy ra")}})}function L5(){return Ls({queryKey:["supplier_debts"],queryFn:async()=>{const e=await b2e();if(!e.ok)throw new Error(Na(e.error));return e.data}})}function N2e(){const e=Un();return xa({mutationFn:async t=>{const r=await v2e(t);if(!r.ok){const n=r.error?Na(r.error):"Khng th thm cng n";throw new Error(n)}return r.data},onSuccess:()=>{e.invalidateQueries({queryKey:["supplier_debts"]}),Ze.success("Thm cng n thnh cng!")},onError:t=>{Ze.error((t==null?void 0:t.message)||"C li xy ra")}})}function _2e(){const e=Un();return xa({mutationFn:async({id:t,updates:r})=>{const n=await y2e(t,r);if(!n.ok)throw new Error(Na(n.error));return n.data},onSuccess:()=>{e.invalidateQueries({queryKey:["supplier_debts"]}),Ze.success("Cp nht cng n thnh cng!")},onError:t=>{Ze.error((t==null?void 0:t.message)||"C li xy ra")}})}function S2e(){const e=Un();return xa({mutationFn:async t=>{const r=await w2e(t);if(!r.ok)throw new Error(Na(r.error));return r.data},onSuccess:()=>{e.invalidateQueries({queryKey:["supplier_debts"]}),Ze.success("Xa cng n thnh cng!")},onError:t=>{Ze.error((t==null?void 0:t.message)||"C li xy ra")}})}var Hr;(function(e){e[e.QR_CODE=0]="QR_CODE",e[e.AZTEC=1]="AZTEC",e[e.CODABAR=2]="CODABAR",e[e.CODE_39=3]="CODE_39",e[e.CODE_93=4]="CODE_93",e[e.CODE_128=5]="CODE_128",e[e.DATA_MATRIX=6]="DATA_MATRIX",e[e.MAXICODE=7]="MAXICODE",e[e.ITF=8]="ITF",e[e.EAN_13=9]="EAN_13",e[e.EAN_8=10]="EAN_8",e[e.PDF_417=11]="PDF_417",e[e.RSS_14=12]="RSS_14",e[e.RSS_EXPANDED=13]="RSS_EXPANDED",e[e.UPC_A=14]="UPC_A",e[e.UPC_E=15]="UPC_E",e[e.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Hr||(Hr={}));var RD=new Map([[Hr.QR_CODE,"QR_CODE"],[Hr.AZTEC,"AZTEC"],[Hr.CODABAR,"CODABAR"],[Hr.CODE_39,"CODE_39"],[Hr.CODE_93,"CODE_93"],[Hr.CODE_128,"CODE_128"],[Hr.DATA_MATRIX,"DATA_MATRIX"],[Hr.MAXICODE,"MAXICODE"],[Hr.ITF,"ITF"],[Hr.EAN_13,"EAN_13"],[Hr.EAN_8,"EAN_8"],[Hr.PDF_417,"PDF_417"],[Hr.RSS_14,"RSS_14"],[Hr.RSS_EXPANDED,"RSS_EXPANDED"],[Hr.UPC_A,"UPC_A"],[Hr.UPC_E,"UPC_E"],[Hr.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),FD;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.URL=1]="URL"})(FD||(FD={}));function j2e(e){return Object.values(Hr).includes(e)}var fk;(function(e){e[e.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",e[e.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(fk||(fk={}));var C2e=(function(){function e(){}return e.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",e.SCAN_DEFAULT_FPS=2,e.DEFAULT_DISABLE_FLIP=!1,e.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,e.DEFAULT_SUPPORTED_SCAN_TYPE=[fk.SCAN_TYPE_CAMERA,fk.SCAN_TYPE_FILE],e})(),UV=(function(){function e(t,r){this.format=t,this.formatName=r}return e.prototype.toString=function(){return this.formatName},e.create=function(t){if(!RD.has(t))throw"".concat(t," not in html5QrcodeSupportedFormatsTextMap");return new e(t,RD.get(t))},e})(),BD=(function(){function e(){}return e.createFromText=function(t){var r={text:t};return{decodedText:t,result:r}},e.createFromQrcodeResult=function(t){return{decodedText:t.text,result:t}},e})(),Rj;(function(e){e[e.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",e[e.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",e[e.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(Rj||(Rj={}));var A2e=(function(){function e(){}return e.createFrom=function(t){return{errorMessage:t,type:Rj.UNKWOWN_ERROR}},e})(),E2e=(function(){function e(t){this.verbose=t}return e.prototype.log=function(t){this.verbose&&console.log(t)},e.prototype.warn=function(t){this.verbose&&console.warn(t)},e.prototype.logError=function(t,r){(this.verbose||r===!0)&&console.error(t)},e.prototype.logErrors=function(t){if(t.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(t)},e})();function S0(e){return typeof e>"u"||e===null}var w1=(function(){function e(){}return e.codeParseError=function(t){return"QR code parse error, error = ".concat(t)},e.errorGettingUserMedia=function(t){return"Error getting userMedia, error = ".concat(t)},e.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},e.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},e.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},e.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},e.scannerPaused=function(){return"Scanner paused"},e})(),zV=(function(){function e(){}return e.isMediaStreamConstraintsValid=function(t,r){if(typeof t!="object"){var n=typeof t;return r.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(n,"."),!0),!1}for(var a=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],i=new Set(a),o=Object.keys(t),l=0,d=o;l<d.length;l++){var c=d[l];if(i.has(c))return r.logError("".concat(c," is not supported videoConstaints."),!0),!1}return!0},e})(),Fg={exports:{}},T2e=Fg.exports,UD;function O2e(){return UD||(UD=1,(function(e,t){(function(r,n){n(t)})(T2e,(function(r){function n(ye){return ye==null}var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ye,f){ye.__proto__=f}||function(ye,f){for(var p in f)f.hasOwnProperty(p)&&(ye[p]=f[p])};function i(ye,f){a(ye,f);function p(){this.constructor=ye}ye.prototype=f===null?Object.create(f):(p.prototype=f.prototype,new p)}function o(ye,f){var p=Object.setPrototypeOf;p?p(ye,f):ye.__proto__=f}function l(ye,f){f===void 0&&(f=ye.constructor);var p=Error.captureStackTrace;p&&p(ye,f)}var d=(function(ye){i(f,ye);function f(p){var v=this.constructor,_=ye.call(this,p)||this;return Object.defineProperty(_,"name",{value:v.name,enumerable:!1}),o(_,v.prototype),l(_),_}return f})(Error);class c extends d{constructor(f=void 0){super(f),this.message=f}getKind(){return this.constructor.kind}}c.kind="Exception";class u extends c{}u.kind="ArgumentException";class x extends c{}x.kind="IllegalArgumentException";class b{constructor(f){if(this.binarizer=f,f===null)throw new x("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(f,p){return this.binarizer.getBlackRow(f,p)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(f,p,v,_){const j=this.binarizer.getLuminanceSource().crop(f,p,v,_);return new b(this.binarizer.createBinarizer(j))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const f=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new b(this.binarizer.createBinarizer(f))}rotateCounterClockwise45(){const f=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new b(this.binarizer.createBinarizer(f))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class g extends c{static getChecksumInstance(){return new g}}g.kind="ChecksumException";class k{constructor(f){this.source=f}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class y{static arraycopy(f,p,v,_,j){for(;j--;)v[_++]=f[p++]}static currentTimeMillis(){return Date.now()}}class N extends c{}N.kind="IndexOutOfBoundsException";class S extends N{constructor(f=void 0,p=void 0){super(p),this.index=f,this.message=p}}S.kind="ArrayIndexOutOfBoundsException";class O{static fill(f,p){for(let v=0,_=f.length;v<_;v++)f[v]=p}static fillWithin(f,p,v,_){O.rangeCheck(f.length,p,v);for(let j=p;j<v;j++)f[j]=_}static rangeCheck(f,p,v){if(p>v)throw new x("fromIndex("+p+") > toIndex("+v+")");if(p<0)throw new S(p);if(v>f)throw new S(v)}static asList(...f){return f}static create(f,p,v){return Array.from({length:f}).map(j=>Array.from({length:p}).fill(v))}static createInt32Array(f,p,v){return Array.from({length:f}).map(j=>Int32Array.from({length:p}).fill(v))}static equals(f,p){if(!f||!p||!f.length||!p.length||f.length!==p.length)return!1;for(let v=0,_=f.length;v<_;v++)if(f[v]!==p[v])return!1;return!0}static hashCode(f){if(f===null)return 0;let p=1;for(const v of f)p=31*p+v;return p}static fillUint8Array(f,p){for(let v=0;v!==f.length;v++)f[v]=p}static copyOf(f,p){return f.slice(0,p)}static copyOfUint8Array(f,p){if(f.length<=p){const v=new Uint8Array(p);return v.set(f),v}return f.slice(0,p)}static copyOfRange(f,p,v){const _=v-p,j=new Int32Array(_);return y.arraycopy(f,p,j,0,_),j}static binarySearch(f,p,v){v===void 0&&(v=O.numberComparator);let _=0,j=f.length-1;for(;_<=j;){const E=j+_>>1,D=v(p,f[E]);if(D>0)_=E+1;else if(D<0)j=E-1;else return E}return-_-1}static numberComparator(f,p){return f-p}}class A{static numberOfTrailingZeros(f){let p;if(f===0)return 32;let v=31;return p=f<<16,p!==0&&(v-=16,f=p),p=f<<8,p!==0&&(v-=8,f=p),p=f<<4,p!==0&&(v-=4,f=p),p=f<<2,p!==0&&(v-=2,f=p),v-(f<<1>>>31)}static numberOfLeadingZeros(f){if(f===0)return 32;let p=1;return f>>>16||(p+=16,f<<=16),f>>>24||(p+=8,f<<=8),f>>>28||(p+=4,f<<=4),f>>>30||(p+=2,f<<=2),p-=f>>>31,p}static toHexString(f){return f.toString(16)}static toBinaryString(f){return String(parseInt(String(f),2))}static bitCount(f){return f=f-(f>>>1&1431655765),f=(f&858993459)+(f>>>2&858993459),f=f+(f>>>4)&252645135,f=f+(f>>>8),f=f+(f>>>16),f&63}static truncDivision(f,p){return Math.trunc(f/p)}static parseInt(f,p=void 0){return parseInt(f,p)}}A.MIN_VALUE_32_BITS=-2147483648,A.MAX_VALUE=Number.MAX_SAFE_INTEGER;class P{constructor(f,p){f===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=f,p==null?this.bits=P.makeArray(f):this.bits=p)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(f){if(f>this.bits.length*32){const p=P.makeArray(f);y.arraycopy(this.bits,0,p,0,this.bits.length),this.bits=p}}get(f){return(this.bits[Math.floor(f/32)]&1<<(f&31))!==0}set(f){this.bits[Math.floor(f/32)]|=1<<(f&31)}flip(f){this.bits[Math.floor(f/32)]^=1<<(f&31)}getNextSet(f){const p=this.size;if(f>=p)return p;const v=this.bits;let _=Math.floor(f/32),j=v[_];j&=~((1<<(f&31))-1);const E=v.length;for(;j===0;){if(++_===E)return p;j=v[_]}const D=_*32+A.numberOfTrailingZeros(j);return D>p?p:D}getNextUnset(f){const p=this.size;if(f>=p)return p;const v=this.bits;let _=Math.floor(f/32),j=~v[_];j&=~((1<<(f&31))-1);const E=v.length;for(;j===0;){if(++_===E)return p;j=~v[_]}const D=_*32+A.numberOfTrailingZeros(j);return D>p?p:D}setBulk(f,p){this.bits[Math.floor(f/32)]=p}setRange(f,p){if(p<f||f<0||p>this.size)throw new x;if(p===f)return;p--;const v=Math.floor(f/32),_=Math.floor(p/32),j=this.bits;for(let E=v;E<=_;E++){const D=E>v?0:f&31,X=(2<<(E<_?31:p&31))-(1<<D);j[E]|=X}}clear(){const f=this.bits.length,p=this.bits;for(let v=0;v<f;v++)p[v]=0}isRange(f,p,v){if(p<f||f<0||p>this.size)throw new x;if(p===f)return!0;p--;const _=Math.floor(f/32),j=Math.floor(p/32),E=this.bits;for(let D=_;D<=j;D++){const z=D>_?0:f&31,oe=(2<<(D<j?31:p&31))-(1<<z)&4294967295;if((E[D]&oe)!==(v?oe:0))return!1}return!0}appendBit(f){this.ensureCapacity(this.size+1),f&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(f,p){if(p<0||p>32)throw new x("Num bits must be between 0 and 32");this.ensureCapacity(this.size+p);for(let v=p;v>0;v--)this.appendBit((f>>v-1&1)===1)}appendBitArray(f){const p=f.size;this.ensureCapacity(this.size+p);for(let v=0;v<p;v++)this.appendBit(f.get(v))}xor(f){if(this.size!==f.size)throw new x("Sizes don't match");const p=this.bits;for(let v=0,_=p.length;v<_;v++)p[v]^=f.bits[v]}toBytes(f,p,v,_){for(let j=0;j<_;j++){let E=0;for(let D=0;D<8;D++)this.get(f)&&(E|=1<<7-D),f++;p[v+j]=E}}getBitArray(){return this.bits}reverse(){const f=new Int32Array(this.bits.length),p=Math.floor((this.size-1)/32),v=p+1,_=this.bits;for(let j=0;j<v;j++){let E=_[j];E=E>>1&1431655765|(E&1431655765)<<1,E=E>>2&858993459|(E&858993459)<<2,E=E>>4&252645135|(E&252645135)<<4,E=E>>8&16711935|(E&16711935)<<8,E=E>>16&65535|(E&65535)<<16,f[p-j]=E}if(this.size!==v*32){const j=v*32-this.size;let E=f[0]>>>j;for(let D=1;D<v;D++){const z=f[D];E|=z<<32-j,f[D-1]=E,E=z>>>j}f[v-1]=E}this.bits=f}static makeArray(f){return new Int32Array(Math.floor((f+31)/32))}equals(f){if(!(f instanceof P))return!1;const p=f;return this.size===p.size&&O.equals(this.bits,p.bits)}hashCode(){return 31*this.size+O.hashCode(this.bits)}toString(){let f="";for(let p=0,v=this.size;p<v;p++)(p&7)===0&&(f+=" "),f+=this.get(p)?"X":".";return f}clone(){return new P(this.size,this.bits.slice())}}var q;(function(ye){ye[ye.OTHER=0]="OTHER",ye[ye.PURE_BARCODE=1]="PURE_BARCODE",ye[ye.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",ye[ye.TRY_HARDER=3]="TRY_HARDER",ye[ye.CHARACTER_SET=4]="CHARACTER_SET",ye[ye.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",ye[ye.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",ye[ye.ASSUME_GS1=7]="ASSUME_GS1",ye[ye.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",ye[ye.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",ye[ye.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(q||(q={}));var W=q;class R extends c{static getFormatInstance(){return new R}}R.kind="FormatException";var U;(function(ye){ye[ye.Cp437=0]="Cp437",ye[ye.ISO8859_1=1]="ISO8859_1",ye[ye.ISO8859_2=2]="ISO8859_2",ye[ye.ISO8859_3=3]="ISO8859_3",ye[ye.ISO8859_4=4]="ISO8859_4",ye[ye.ISO8859_5=5]="ISO8859_5",ye[ye.ISO8859_6=6]="ISO8859_6",ye[ye.ISO8859_7=7]="ISO8859_7",ye[ye.ISO8859_8=8]="ISO8859_8",ye[ye.ISO8859_9=9]="ISO8859_9",ye[ye.ISO8859_10=10]="ISO8859_10",ye[ye.ISO8859_11=11]="ISO8859_11",ye[ye.ISO8859_13=12]="ISO8859_13",ye[ye.ISO8859_14=13]="ISO8859_14",ye[ye.ISO8859_15=14]="ISO8859_15",ye[ye.ISO8859_16=15]="ISO8859_16",ye[ye.SJIS=16]="SJIS",ye[ye.Cp1250=17]="Cp1250",ye[ye.Cp1251=18]="Cp1251",ye[ye.Cp1252=19]="Cp1252",ye[ye.Cp1256=20]="Cp1256",ye[ye.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",ye[ye.UTF8=22]="UTF8",ye[ye.ASCII=23]="ASCII",ye[ye.Big5=24]="Big5",ye[ye.GB18030=25]="GB18030",ye[ye.EUC_KR=26]="EUC_KR"})(U||(U={}));class L{constructor(f,p,v,..._){this.valueIdentifier=f,this.name=v,typeof p=="number"?this.values=Int32Array.from([p]):this.values=p,this.otherEncodingNames=_,L.VALUE_IDENTIFIER_TO_ECI.set(f,this),L.NAME_TO_ECI.set(v,this);const j=this.values;for(let E=0,D=j.length;E!==D;E++){const z=j[E];L.VALUES_TO_ECI.set(z,this)}for(const E of _)L.NAME_TO_ECI.set(E,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(f){if(f<0||f>=900)throw new R("incorect value");const p=L.VALUES_TO_ECI.get(f);if(p===void 0)throw new R("incorect value");return p}static getCharacterSetECIByName(f){const p=L.NAME_TO_ECI.get(f);if(p===void 0)throw new R("incorect value");return p}equals(f){if(!(f instanceof L))return!1;const p=f;return this.getName()===p.getName()}}L.VALUE_IDENTIFIER_TO_ECI=new Map,L.VALUES_TO_ECI=new Map,L.NAME_TO_ECI=new Map,L.Cp437=new L(U.Cp437,Int32Array.from([0,2]),"Cp437"),L.ISO8859_1=new L(U.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),L.ISO8859_2=new L(U.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),L.ISO8859_3=new L(U.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),L.ISO8859_4=new L(U.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),L.ISO8859_5=new L(U.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),L.ISO8859_6=new L(U.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),L.ISO8859_7=new L(U.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),L.ISO8859_8=new L(U.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),L.ISO8859_9=new L(U.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),L.ISO8859_10=new L(U.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),L.ISO8859_11=new L(U.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),L.ISO8859_13=new L(U.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),L.ISO8859_14=new L(U.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),L.ISO8859_15=new L(U.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),L.ISO8859_16=new L(U.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),L.SJIS=new L(U.SJIS,20,"SJIS","Shift_JIS"),L.Cp1250=new L(U.Cp1250,21,"Cp1250","windows-1250"),L.Cp1251=new L(U.Cp1251,22,"Cp1251","windows-1251"),L.Cp1252=new L(U.Cp1252,23,"Cp1252","windows-1252"),L.Cp1256=new L(U.Cp1256,24,"Cp1256","windows-1256"),L.UnicodeBigUnmarked=new L(U.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),L.UTF8=new L(U.UTF8,26,"UTF8","UTF-8"),L.ASCII=new L(U.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),L.Big5=new L(U.Big5,28,"Big5"),L.GB18030=new L(U.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),L.EUC_KR=new L(U.EUC_KR,30,"EUC_KR","EUC-KR");class Q extends c{}Q.kind="UnsupportedOperationException";class H{static decode(f,p){const v=this.encodingName(p);return this.customDecoder?this.customDecoder(f,v):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(v)?this.decodeFallback(f,v):new TextDecoder(v).decode(f)}static shouldDecodeOnFallback(f){return!H.isBrowser()&&f==="ISO-8859-1"}static encode(f,p){const v=this.encodingName(p);return this.customEncoder?this.customEncoder(f,v):typeof TextEncoder>"u"?this.encodeFallback(f):new TextEncoder().encode(f)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(f){return typeof f=="string"?f:f.getName()}static encodingCharacterSet(f){return f instanceof L?f:L.getCharacterSetECIByName(f)}static decodeFallback(f,p){const v=this.encodingCharacterSet(p);if(H.isDecodeFallbackSupported(v)){let _="";for(let j=0,E=f.length;j<E;j++){let D=f[j].toString(16);D.length<2&&(D="0"+D),_+="%"+D}return decodeURIComponent(_)}if(v.equals(L.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(f.buffer));throw new Q(`Encoding ${this.encodingName(p)} not supported by fallback.`)}static isDecodeFallbackSupported(f){return f.equals(L.UTF8)||f.equals(L.ISO8859_1)||f.equals(L.ASCII)}static encodeFallback(f){const v=btoa(unescape(encodeURIComponent(f))).split(""),_=[];for(let j=0;j<v.length;j++)_.push(v[j].charCodeAt(0));return new Uint8Array(_)}}class G{static castAsNonUtf8Char(f,p=null){const v=p?p.getName():this.ISO88591;return H.decode(new Uint8Array([f]),v)}static guessEncoding(f,p){if(p!=null&&p.get(W.CHARACTER_SET)!==void 0)return p.get(W.CHARACTER_SET).toString();const v=f.length;let _=!0,j=!0,E=!0,D=0,z=0,X=0,oe=0,we=0,Oe=0,He=0,rt=0,lt=0,xt=0,St=0;const Vt=f.length>3&&f[0]===239&&f[1]===187&&f[2]===191;for(let Wt=0;Wt<v&&(_||j||E);Wt++){const qt=f[Wt]&255;E&&(D>0?(qt&128)===0?E=!1:D--:(qt&128)!==0&&((qt&64)===0?E=!1:(D++,(qt&32)===0?z++:(D++,(qt&16)===0?X++:(D++,(qt&8)===0?oe++:E=!1))))),_&&(qt>127&&qt<160?_=!1:qt>159&&(qt<192||qt===215||qt===247)&&St++),j&&(we>0?qt<64||qt===127||qt>252?j=!1:we--:qt===128||qt===160||qt>239?j=!1:qt>160&&qt<224?(Oe++,rt=0,He++,He>lt&&(lt=He)):qt>127?(we++,He=0,rt++,rt>xt&&(xt=rt)):(He=0,rt=0))}return E&&D>0&&(E=!1),j&&we>0&&(j=!1),E&&(Vt||z+X+oe>0)?G.UTF8:j&&(G.ASSUME_SHIFT_JIS||lt>=3||xt>=3)?G.SHIFT_JIS:_&&j?lt===2&&Oe===2||St*10>=v?G.SHIFT_JIS:G.ISO88591:_?G.ISO88591:j?G.SHIFT_JIS:E?G.UTF8:G.PLATFORM_DEFAULT_ENCODING}static format(f,...p){let v=-1;function _(E,D,z,X,oe,we){if(E==="%%")return"%";if(p[++v]===void 0)return;E=X?parseInt(X.substr(1)):void 0;let Oe=oe?parseInt(oe.substr(1)):void 0,He;switch(we){case"s":He=p[v];break;case"c":He=p[v][0];break;case"f":He=parseFloat(p[v]).toFixed(E);break;case"p":He=parseFloat(p[v]).toPrecision(E);break;case"e":He=parseFloat(p[v]).toExponential(E);break;case"x":He=parseInt(p[v]).toString(Oe||16);break;case"d":He=parseFloat(parseInt(p[v],Oe||10).toPrecision(E)).toFixed(0);break}He=typeof He=="object"?JSON.stringify(He):(+He).toString(Oe);let rt=parseInt(z),lt=z&&z[0]+""=="0"?"0":" ";for(;He.length<rt;)He=D!==void 0?He+lt:lt+He;return He}let j=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return f.replace(j,_)}static getBytes(f,p){return H.encode(f,p)}static getCharCode(f,p=0){return f.charCodeAt(p)}static getCharAt(f){return String.fromCharCode(f)}}G.SHIFT_JIS=L.SJIS.getName(),G.GB2312="GB2312",G.ISO88591=L.ISO8859_1.getName(),G.EUC_JP="EUC_JP",G.UTF8=L.UTF8.getName(),G.PLATFORM_DEFAULT_ENCODING=G.UTF8,G.ASSUME_SHIFT_JIS=!1;class Z{constructor(f=""){this.value=f}enableDecoding(f){return this.encoding=f,this}append(f){return typeof f=="string"?this.value+=f.toString():this.encoding?this.value+=G.castAsNonUtf8Char(f,this.encoding):this.value+=String.fromCharCode(f),this}appendChars(f,p,v){for(let _=p;p<p+v;_++)this.append(f[_]);return this}length(){return this.value.length}charAt(f){return this.value.charAt(f)}deleteCharAt(f){this.value=this.value.substr(0,f)+this.value.substring(f+1)}setCharAt(f,p){this.value=this.value.substr(0,f)+p+this.value.substr(f+1)}substring(f,p){return this.value.substring(f,p)}setLengthToZero(){this.value=""}toString(){return this.value}insert(f,p){this.value=this.value.substr(0,f)+p+this.value.substr(f+p.length)}}class te{constructor(f,p,v,_){if(this.width=f,this.height=p,this.rowSize=v,this.bits=_,p==null&&(p=f),this.height=p,f<1||p<1)throw new x("Both dimensions must be greater than 0");v==null&&(v=Math.floor((f+31)/32)),this.rowSize=v,_==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(f){const p=f.length,v=f[0].length,_=new te(v,p);for(let j=0;j<p;j++){const E=f[j];for(let D=0;D<v;D++)E[D]&&_.set(D,j)}return _}static parseFromString(f,p,v){if(f===null)throw new x("stringRepresentation cannot be null");const _=new Array(f.length);let j=0,E=0,D=-1,z=0,X=0;for(;X<f.length;)if(f.charAt(X)===`
`||f.charAt(X)==="\r"){if(j>E){if(D===-1)D=j-E;else if(j-E!==D)throw new x("row lengths do not match");E=j,z++}X++}else if(f.substring(X,X+p.length)===p)X+=p.length,_[j]=!0,j++;else if(f.substring(X,X+v.length)===v)X+=v.length,_[j]=!1,j++;else throw new x("illegal character encountered: "+f.substring(X));if(j>E){if(D===-1)D=j-E;else if(j-E!==D)throw new x("row lengths do not match");z++}const oe=new te(D,z);for(let we=0;we<j;we++)_[we]&&oe.set(Math.floor(we%D),Math.floor(we/D));return oe}get(f,p){const v=p*this.rowSize+Math.floor(f/32);return(this.bits[v]>>>(f&31)&1)!==0}set(f,p){const v=p*this.rowSize+Math.floor(f/32);this.bits[v]|=1<<(f&31)&4294967295}unset(f,p){const v=p*this.rowSize+Math.floor(f/32);this.bits[v]&=~(1<<(f&31)&4294967295)}flip(f,p){const v=p*this.rowSize+Math.floor(f/32);this.bits[v]^=1<<(f&31)&4294967295}xor(f){if(this.width!==f.getWidth()||this.height!==f.getHeight()||this.rowSize!==f.getRowSize())throw new x("input matrix dimensions do not match");const p=new P(Math.floor(this.width/32)+1),v=this.rowSize,_=this.bits;for(let j=0,E=this.height;j<E;j++){const D=j*v,z=f.getRow(j,p).getBitArray();for(let X=0;X<v;X++)_[D+X]^=z[X]}}clear(){const f=this.bits,p=f.length;for(let v=0;v<p;v++)f[v]=0}setRegion(f,p,v,_){if(p<0||f<0)throw new x("Left and top must be nonnegative");if(_<1||v<1)throw new x("Height and width must be at least 1");const j=f+v,E=p+_;if(E>this.height||j>this.width)throw new x("The region must fit inside the matrix");const D=this.rowSize,z=this.bits;for(let X=p;X<E;X++){const oe=X*D;for(let we=f;we<j;we++)z[oe+Math.floor(we/32)]|=1<<(we&31)&4294967295}}getRow(f,p){p==null||p.getSize()<this.width?p=new P(this.width):p.clear();const v=this.rowSize,_=this.bits,j=f*v;for(let E=0;E<v;E++)p.setBulk(E*32,_[j+E]);return p}setRow(f,p){y.arraycopy(p.getBitArray(),0,this.bits,f*this.rowSize,this.rowSize)}rotate180(){const f=this.getWidth(),p=this.getHeight();let v=new P(f),_=new P(f);for(let j=0,E=Math.floor((p+1)/2);j<E;j++)v=this.getRow(j,v),_=this.getRow(p-1-j,_),v.reverse(),_.reverse(),this.setRow(j,_),this.setRow(p-1-j,v)}getEnclosingRectangle(){const f=this.width,p=this.height,v=this.rowSize,_=this.bits;let j=f,E=p,D=-1,z=-1;for(let X=0;X<p;X++)for(let oe=0;oe<v;oe++){const we=_[X*v+oe];if(we!==0){if(X<E&&(E=X),X>z&&(z=X),oe*32<j){let Oe=0;for(;(we<<31-Oe&4294967295)===0;)Oe++;oe*32+Oe<j&&(j=oe*32+Oe)}if(oe*32+31>D){let Oe=31;for(;!(we>>>Oe);)Oe--;oe*32+Oe>D&&(D=oe*32+Oe)}}}return D<j||z<E?null:Int32Array.from([j,E,D-j+1,z-E+1])}getTopLeftOnBit(){const f=this.rowSize,p=this.bits;let v=0;for(;v<p.length&&p[v]===0;)v++;if(v===p.length)return null;const _=v/f;let j=v%f*32;const E=p[v];let D=0;for(;(E<<31-D&4294967295)===0;)D++;return j+=D,Int32Array.from([j,_])}getBottomRightOnBit(){const f=this.rowSize,p=this.bits;let v=p.length-1;for(;v>=0&&p[v]===0;)v--;if(v<0)return null;const _=Math.floor(v/f);let j=Math.floor(v%f)*32;const E=p[v];let D=31;for(;!(E>>>D);)D--;return j+=D,Int32Array.from([j,_])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(f){if(!(f instanceof te))return!1;const p=f;return this.width===p.width&&this.height===p.height&&this.rowSize===p.rowSize&&O.equals(this.bits,p.bits)}hashCode(){let f=this.width;return f=31*f+this.width,f=31*f+this.height,f=31*f+this.rowSize,f=31*f+O.hashCode(this.bits),f}toString(f="X ",p="  ",v=`
`){return this.buildToString(f,p,v)}buildToString(f,p,v){let _=new Z;for(let j=0,E=this.height;j<E;j++){for(let D=0,z=this.width;D<z;D++)_.append(this.get(D,j)?f:p);_.append(v)}return _.toString()}clone(){return new te(this.width,this.height,this.rowSize,this.bits.slice())}}class se extends c{static getNotFoundInstance(){return new se}}se.kind="NotFoundException";class ue extends k{constructor(f){super(f),this.luminances=ue.EMPTY,this.buckets=new Int32Array(ue.LUMINANCE_BUCKETS)}getBlackRow(f,p){const v=this.getLuminanceSource(),_=v.getWidth();p==null||p.getSize()<_?p=new P(_):p.clear(),this.initArrays(_);const j=v.getRow(f,this.luminances),E=this.buckets;for(let z=0;z<_;z++)E[(j[z]&255)>>ue.LUMINANCE_SHIFT]++;const D=ue.estimateBlackPoint(E);if(_<3)for(let z=0;z<_;z++)(j[z]&255)<D&&p.set(z);else{let z=j[0]&255,X=j[1]&255;for(let oe=1;oe<_-1;oe++){const we=j[oe+1]&255;(X*4-z-we)/2<D&&p.set(oe),z=X,X=we}}return p}getBlackMatrix(){const f=this.getLuminanceSource(),p=f.getWidth(),v=f.getHeight(),_=new te(p,v);this.initArrays(p);const j=this.buckets;for(let z=1;z<5;z++){const X=Math.floor(v*z/5),oe=f.getRow(X,this.luminances),we=Math.floor(p*4/5);for(let Oe=Math.floor(p/5);Oe<we;Oe++){const He=oe[Oe]&255;j[He>>ue.LUMINANCE_SHIFT]++}}const E=ue.estimateBlackPoint(j),D=f.getMatrix();for(let z=0;z<v;z++){const X=z*p;for(let oe=0;oe<p;oe++)(D[X+oe]&255)<E&&_.set(oe,z)}return _}createBinarizer(f){return new ue(f)}initArrays(f){this.luminances.length<f&&(this.luminances=new Uint8ClampedArray(f));const p=this.buckets;for(let v=0;v<ue.LUMINANCE_BUCKETS;v++)p[v]=0}static estimateBlackPoint(f){const p=f.length;let v=0,_=0,j=0;for(let oe=0;oe<p;oe++)f[oe]>j&&(_=oe,j=f[oe]),f[oe]>v&&(v=f[oe]);let E=0,D=0;for(let oe=0;oe<p;oe++){const we=oe-_,Oe=f[oe]*we*we;Oe>D&&(E=oe,D=Oe)}if(_>E){const oe=_;_=E,E=oe}if(E-_<=p/16)throw new se;let z=E-1,X=-1;for(let oe=E-1;oe>_;oe--){const we=oe-_,Oe=we*we*(E-oe)*(v-f[oe]);Oe>X&&(z=oe,X=Oe)}return z<<ue.LUMINANCE_SHIFT}}ue.LUMINANCE_BITS=5,ue.LUMINANCE_SHIFT=8-ue.LUMINANCE_BITS,ue.LUMINANCE_BUCKETS=1<<ue.LUMINANCE_BITS,ue.EMPTY=Uint8ClampedArray.from([0]);class ae extends ue{constructor(f){super(f),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const f=this.getLuminanceSource(),p=f.getWidth(),v=f.getHeight();if(p>=ae.MINIMUM_DIMENSION&&v>=ae.MINIMUM_DIMENSION){const _=f.getMatrix();let j=p>>ae.BLOCK_SIZE_POWER;(p&ae.BLOCK_SIZE_MASK)!==0&&j++;let E=v>>ae.BLOCK_SIZE_POWER;(v&ae.BLOCK_SIZE_MASK)!==0&&E++;const D=ae.calculateBlackPoints(_,j,E,p,v),z=new te(p,v);ae.calculateThresholdForBlock(_,j,E,p,v,D,z),this.matrix=z}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(f){return new ae(f)}static calculateThresholdForBlock(f,p,v,_,j,E,D){const z=j-ae.BLOCK_SIZE,X=_-ae.BLOCK_SIZE;for(let oe=0;oe<v;oe++){let we=oe<<ae.BLOCK_SIZE_POWER;we>z&&(we=z);const Oe=ae.cap(oe,2,v-3);for(let He=0;He<p;He++){let rt=He<<ae.BLOCK_SIZE_POWER;rt>X&&(rt=X);const lt=ae.cap(He,2,p-3);let xt=0;for(let Vt=-2;Vt<=2;Vt++){const Wt=E[Oe+Vt];xt+=Wt[lt-2]+Wt[lt-1]+Wt[lt]+Wt[lt+1]+Wt[lt+2]}const St=xt/25;ae.thresholdBlock(f,rt,we,St,_,D)}}}static cap(f,p,v){return f<p?p:f>v?v:f}static thresholdBlock(f,p,v,_,j,E){for(let D=0,z=v*j+p;D<ae.BLOCK_SIZE;D++,z+=j)for(let X=0;X<ae.BLOCK_SIZE;X++)(f[z+X]&255)<=_&&E.set(p+X,v+D)}static calculateBlackPoints(f,p,v,_,j){const E=j-ae.BLOCK_SIZE,D=_-ae.BLOCK_SIZE,z=new Array(v);for(let X=0;X<v;X++){z[X]=new Int32Array(p);let oe=X<<ae.BLOCK_SIZE_POWER;oe>E&&(oe=E);for(let we=0;we<p;we++){let Oe=we<<ae.BLOCK_SIZE_POWER;Oe>D&&(Oe=D);let He=0,rt=255,lt=0;for(let St=0,Vt=oe*_+Oe;St<ae.BLOCK_SIZE;St++,Vt+=_){for(let Wt=0;Wt<ae.BLOCK_SIZE;Wt++){const qt=f[Vt+Wt]&255;He+=qt,qt<rt&&(rt=qt),qt>lt&&(lt=qt)}if(lt-rt>ae.MIN_DYNAMIC_RANGE)for(St++,Vt+=_;St<ae.BLOCK_SIZE;St++,Vt+=_)for(let Wt=0;Wt<ae.BLOCK_SIZE;Wt++)He+=f[Vt+Wt]&255}let xt=He>>ae.BLOCK_SIZE_POWER*2;if(lt-rt<=ae.MIN_DYNAMIC_RANGE&&(xt=rt/2,X>0&&we>0)){const St=(z[X-1][we]+2*z[X][we-1]+z[X-1][we-1])/4;rt<St&&(xt=St)}z[X][we]=xt}}return z}}ae.BLOCK_SIZE_POWER=3,ae.BLOCK_SIZE=1<<ae.BLOCK_SIZE_POWER,ae.BLOCK_SIZE_MASK=ae.BLOCK_SIZE-1,ae.MINIMUM_DIMENSION=ae.BLOCK_SIZE*5,ae.MIN_DYNAMIC_RANGE=24;class pe{constructor(f,p){this.width=f,this.height=p}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(f,p,v,_){throw new Q("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new Q("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new Q("This luminance source does not support rotation by 45 degrees.")}toString(){const f=new Uint8ClampedArray(this.width);let p=new Z;for(let v=0;v<this.height;v++){const _=this.getRow(v,f);for(let j=0;j<this.width;j++){const E=_[j]&255;let D;E<64?D="#":E<128?D="+":E<192?D=".":D=" ",p.append(D)}p.append(`
`)}return p.toString()}}class ve extends pe{constructor(f){super(f.getWidth(),f.getHeight()),this.delegate=f}getRow(f,p){const v=this.delegate.getRow(f,p),_=this.getWidth();for(let j=0;j<_;j++)v[j]=255-(v[j]&255);return v}getMatrix(){const f=this.delegate.getMatrix(),p=this.getWidth()*this.getHeight(),v=new Uint8ClampedArray(p);for(let _=0;_<p;_++)v[_]=255-(f[_]&255);return v}isCropSupported(){return this.delegate.isCropSupported()}crop(f,p,v,_){return new ve(this.delegate.crop(f,p,v,_))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new ve(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new ve(this.delegate.rotateCounterClockwise45())}}class Pe extends pe{constructor(f){super(f.width,f.height),this.canvas=f,this.tempCanvasElement=null,this.buffer=Pe.makeBufferFromCanvasImageData(f)}static makeBufferFromCanvasImageData(f){const p=f.getContext("2d").getImageData(0,0,f.width,f.height);return Pe.toGrayscaleBuffer(p.data,f.width,f.height)}static toGrayscaleBuffer(f,p,v){const _=new Uint8ClampedArray(p*v);for(let j=0,E=0,D=f.length;j<D;j+=4,E++){let z;if(f[j+3]===0)z=255;else{const oe=f[j],we=f[j+1],Oe=f[j+2];z=306*oe+601*we+117*Oe+512>>10}_[E]=z}return _}getRow(f,p){if(f<0||f>=this.getHeight())throw new x("Requested row is outside the image: "+f);const v=this.getWidth(),_=f*v;return p===null?p=this.buffer.slice(_,_+v):(p.length<v&&(p=new Uint8ClampedArray(v)),p.set(this.buffer.slice(_,_+v))),p}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(f,p,v,_){return super.crop(f,p,v,_),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const f=this.canvas.ownerDocument.createElement("canvas");f.width=this.canvas.width,f.height=this.canvas.height,this.tempCanvasElement=f}return this.tempCanvasElement}rotate(f){const p=this.getTempCanvasElement(),v=p.getContext("2d"),_=f*Pe.DEGREE_TO_RADIANS,j=this.canvas.width,E=this.canvas.height,D=Math.ceil(Math.abs(Math.cos(_))*j+Math.abs(Math.sin(_))*E),z=Math.ceil(Math.abs(Math.sin(_))*j+Math.abs(Math.cos(_))*E);return p.width=D,p.height=z,v.translate(D/2,z/2),v.rotate(_),v.drawImage(this.canvas,j/-2,E/-2),this.buffer=Pe.makeBufferFromCanvasImageData(p),this}invert(){return new ve(this)}}Pe.DEGREE_TO_RADIANS=Math.PI/180;class xe{constructor(f,p,v){this.deviceId=f,this.label=p,this.kind="videoinput",this.groupId=v||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var B=(globalThis||_2||self||window||void 0)&&(globalThis||_2||self||window||void 0).__awaiter||function(ye,f,p,v){function _(j){return j instanceof p?j:new p(function(E){E(j)})}return new(p||(p=Promise))(function(j,E){function D(oe){try{X(v.next(oe))}catch(we){E(we)}}function z(oe){try{X(v.throw(oe))}catch(we){E(we)}}function X(oe){oe.done?j(oe.value):_(oe.value).then(D,z)}X((v=v.apply(ye,f||[])).next())})};class re{constructor(f,p=500,v){this.reader=f,this.timeBetweenScansMillis=p,this._hints=v,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(f){this._timeBetweenDecodingAttempts=f<0?0:f}set hints(f){this._hints=f||null}get hints(){return this._hints}listVideoInputDevices(){return B(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const f=yield navigator.mediaDevices.enumerateDevices(),p=[];for(const v of f){const _=v.kind==="video"?"videoinput":v.kind;if(_!=="videoinput")continue;const j=v.deviceId||v.id,E=v.label||`Video device ${p.length+1}`,D=v.groupId,z={deviceId:j,label:E,kind:_,groupId:D};p.push(z)}return p})}getVideoInputDevices(){return B(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(p=>new xe(p.deviceId,p.label))})}findDeviceById(f){return B(this,void 0,void 0,function*(){const p=yield this.listVideoInputDevices();return p?p.find(v=>v.deviceId===f):null})}decodeFromInputVideoDevice(f,p){return B(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(f,p)})}decodeOnceFromVideoDevice(f,p){return B(this,void 0,void 0,function*(){this.reset();let v;f?v={deviceId:{exact:f}}:v={facingMode:"environment"};const _={video:v};return yield this.decodeOnceFromConstraints(_,p)})}decodeOnceFromConstraints(f,p){return B(this,void 0,void 0,function*(){const v=yield navigator.mediaDevices.getUserMedia(f);return yield this.decodeOnceFromStream(v,p)})}decodeOnceFromStream(f,p){return B(this,void 0,void 0,function*(){this.reset();const v=yield this.attachStreamToVideo(f,p);return yield this.decodeOnce(v)})}decodeFromInputVideoDeviceContinuously(f,p,v){return B(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(f,p,v)})}decodeFromVideoDevice(f,p,v){return B(this,void 0,void 0,function*(){let _;f?_={deviceId:{exact:f}}:_={facingMode:"environment"};const j={video:_};return yield this.decodeFromConstraints(j,p,v)})}decodeFromConstraints(f,p,v){return B(this,void 0,void 0,function*(){const _=yield navigator.mediaDevices.getUserMedia(f);return yield this.decodeFromStream(_,p,v)})}decodeFromStream(f,p,v){return B(this,void 0,void 0,function*(){this.reset();const _=yield this.attachStreamToVideo(f,p);return yield this.decodeContinuously(_,v)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(f,p){return B(this,void 0,void 0,function*(){const v=this.prepareVideoElement(p);return this.addVideoSource(v,f),this.videoElement=v,this.stream=f,yield this.playVideoOnLoadAsync(v),v})}playVideoOnLoadAsync(f){return new Promise((p,v)=>this.playVideoOnLoad(f,()=>p()))}playVideoOnLoad(f,p){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(f),f.addEventListener("ended",this.videoEndedListener),f.addEventListener("canplay",this.videoCanPlayListener),f.addEventListener("playing",p),this.tryPlayVideo(f)}isVideoPlaying(f){return f.currentTime>0&&!f.paused&&!f.ended&&f.readyState>2}tryPlayVideo(f){return B(this,void 0,void 0,function*(){if(this.isVideoPlaying(f)){console.warn("Trying to play video that is already playing.");return}try{yield f.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(f,p){const v=document.getElementById(f);if(!v)throw new u(`element with id '${f}' not found`);if(v.nodeName.toLowerCase()!==p.toLowerCase())throw new u(`element with id '${f}' must be an ${p} element`);return v}decodeFromImage(f,p){if(!f&&!p)throw new u("either imageElement with a src set or an url must be provided");return p&&!f?this.decodeFromImageUrl(p):this.decodeFromImageElement(f)}decodeFromVideo(f,p){if(!f&&!p)throw new u("Either an element with a src set or an URL must be provided");return p&&!f?this.decodeFromVideoUrl(p):this.decodeFromVideoElement(f)}decodeFromVideoContinuously(f,p,v){if(f===void 0&&p===void 0)throw new u("Either an element with a src set or an URL must be provided");return p&&!f?this.decodeFromVideoUrlContinuously(p,v):this.decodeFromVideoElementContinuously(f,v)}decodeFromImageElement(f){if(!f)throw new u("An image element must be provided.");this.reset();const p=this.prepareImageElement(f);this.imageElement=p;let v;return this.isImageLoaded(p)?v=this.decodeOnce(p,!1,!0):v=this._decodeOnLoadImage(p),v}decodeFromVideoElement(f){const p=this._decodeFromVideoElementSetup(f);return this._decodeOnLoadVideo(p)}decodeFromVideoElementContinuously(f,p){const v=this._decodeFromVideoElementSetup(f);return this._decodeOnLoadVideoContinuously(v,p)}_decodeFromVideoElementSetup(f){if(!f)throw new u("A video element must be provided.");this.reset();const p=this.prepareVideoElement(f);return this.videoElement=p,p}decodeFromImageUrl(f){if(!f)throw new u("An URL must be provided.");this.reset();const p=this.prepareImageElement();this.imageElement=p;const v=this._decodeOnLoadImage(p);return p.src=f,v}decodeFromVideoUrl(f){if(!f)throw new u("An URL must be provided.");this.reset();const p=this.prepareVideoElement(),v=this.decodeFromVideoElement(p);return p.src=f,v}decodeFromVideoUrlContinuously(f,p){if(!f)throw new u("An URL must be provided.");this.reset();const v=this.prepareVideoElement(),_=this.decodeFromVideoElementContinuously(v,p);return v.src=f,_}_decodeOnLoadImage(f){return new Promise((p,v)=>{this.imageLoadedListener=()=>this.decodeOnce(f,!1,!0).then(p,v),f.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(f){return B(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(f),yield this.decodeOnce(f)})}_decodeOnLoadVideoContinuously(f,p){return B(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(f),this.decodeContinuously(f,p)})}isImageLoaded(f){return!(!f.complete||f.naturalWidth===0)}prepareImageElement(f){let p;return typeof f>"u"&&(p=document.createElement("img"),p.width=200,p.height=200),typeof f=="string"&&(p=this.getMediaElement(f,"img")),f instanceof HTMLImageElement&&(p=f),p}prepareVideoElement(f){let p;return!f&&typeof document<"u"&&(p=document.createElement("video"),p.width=200,p.height=200),typeof f=="string"&&(p=this.getMediaElement(f,"video")),f instanceof HTMLVideoElement&&(p=f),p.setAttribute("autoplay","true"),p.setAttribute("muted","true"),p.setAttribute("playsinline","true"),p}decodeOnce(f,p=!0,v=!0){this._stopAsyncDecode=!1;const _=(j,E)=>{if(this._stopAsyncDecode){E(new se("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const D=this.decode(f);j(D)}catch(D){const z=p&&D instanceof se,oe=(D instanceof g||D instanceof R)&&v;if(z||oe)return setTimeout(_,this._timeBetweenDecodingAttempts,j,E);E(D)}};return new Promise((j,E)=>_(j,E))}decodeContinuously(f,p){this._stopContinuousDecode=!1;const v=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const _=this.decode(f);p(_,null),setTimeout(v,this.timeBetweenScansMillis)}catch(_){p(null,_);const j=_ instanceof g||_ instanceof R,E=_ instanceof se;(j||E)&&setTimeout(v,this._timeBetweenDecodingAttempts)}};v()}decode(f){const p=this.createBinaryBitmap(f);return this.decodeBitmap(p)}_isHTMLVideoElement(f){return f.videoWidth!==0}drawFrameOnCanvas(f,p,v){p||(p={sx:0,sy:0,sWidth:f.videoWidth,sHeight:f.videoHeight,dx:0,dy:0,dWidth:f.videoWidth,dHeight:f.videoHeight}),v||(v=this.captureCanvasContext),v.drawImage(f,p.sx,p.sy,p.sWidth,p.sHeight,p.dx,p.dy,p.dWidth,p.dHeight)}drawImageOnCanvas(f,p,v=this.captureCanvasContext){p||(p={sx:0,sy:0,sWidth:f.naturalWidth,sHeight:f.naturalHeight,dx:0,dy:0,dWidth:f.naturalWidth,dHeight:f.naturalHeight}),v||(v=this.captureCanvasContext),v.drawImage(f,p.sx,p.sy,p.sWidth,p.sHeight,p.dx,p.dy,p.dWidth,p.dHeight)}createBinaryBitmap(f){this.getCaptureCanvasContext(f),this._isHTMLVideoElement(f)?this.drawFrameOnCanvas(f):this.drawImageOnCanvas(f);const p=this.getCaptureCanvas(f),v=new Pe(p),_=new ae(v);return new b(_)}getCaptureCanvasContext(f){if(!this.captureCanvasContext){const v=this.getCaptureCanvas(f).getContext("2d");this.captureCanvasContext=v}return this.captureCanvasContext}getCaptureCanvas(f){if(!this.captureCanvas){const p=this.createCaptureCanvas(f);this.captureCanvas=p}return this.captureCanvas}decodeBitmap(f){return this.reader.decode(f,this._hints)}createCaptureCanvas(f){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const p=document.createElement("canvas");let v,_;return typeof f<"u"&&(f instanceof HTMLVideoElement?(v=f.videoWidth,_=f.videoHeight):f instanceof HTMLImageElement&&(v=f.naturalWidth||f.width,_=f.naturalHeight||f.height)),p.style.width=v+"px",p.style.height=_+"px",p.width=v,p.height=_,p}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(f=>f.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(f,p){try{f.srcObject=p}catch{f.src=URL.createObjectURL(p)}}cleanVideoSource(f){try{f.srcObject=null}catch{f.src=""}this.videoElement.removeAttribute("src")}}class J{constructor(f,p,v=p==null?0:8*p.length,_,j,E=y.currentTimeMillis()){this.text=f,this.rawBytes=p,this.numBits=v,this.resultPoints=_,this.format=j,this.timestamp=E,this.text=f,this.rawBytes=p,v==null?this.numBits=p==null?0:8*p.length:this.numBits=v,this.resultPoints=_,this.format=j,this.resultMetadata=null,E==null?this.timestamp=y.currentTimeMillis():this.timestamp=E}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(f,p){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(f,p)}putAllMetadata(f){f!==null&&(this.resultMetadata===null?this.resultMetadata=f:this.resultMetadata=new Map(f))}addResultPoints(f){const p=this.resultPoints;if(p===null)this.resultPoints=f;else if(f!==null&&f.length>0){const v=new Array(p.length+f.length);y.arraycopy(p,0,v,0,p.length),y.arraycopy(f,0,v,p.length,f.length),this.resultPoints=v}}getTimestamp(){return this.timestamp}toString(){return this.text}}var ie;(function(ye){ye[ye.AZTEC=0]="AZTEC",ye[ye.CODABAR=1]="CODABAR",ye[ye.CODE_39=2]="CODE_39",ye[ye.CODE_93=3]="CODE_93",ye[ye.CODE_128=4]="CODE_128",ye[ye.DATA_MATRIX=5]="DATA_MATRIX",ye[ye.EAN_8=6]="EAN_8",ye[ye.EAN_13=7]="EAN_13",ye[ye.ITF=8]="ITF",ye[ye.MAXICODE=9]="MAXICODE",ye[ye.PDF_417=10]="PDF_417",ye[ye.QR_CODE=11]="QR_CODE",ye[ye.RSS_14=12]="RSS_14",ye[ye.RSS_EXPANDED=13]="RSS_EXPANDED",ye[ye.UPC_A=14]="UPC_A",ye[ye.UPC_E=15]="UPC_E",ye[ye.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(ie||(ie={}));var Y=ie,_e;(function(ye){ye[ye.OTHER=0]="OTHER",ye[ye.ORIENTATION=1]="ORIENTATION",ye[ye.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",ye[ye.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",ye[ye.ISSUE_NUMBER=4]="ISSUE_NUMBER",ye[ye.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",ye[ye.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",ye[ye.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",ye[ye.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",ye[ye.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",ye[ye.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(_e||(_e={}));var me=_e;class ne{constructor(f,p,v,_,j=-1,E=-1){this.rawBytes=f,this.text=p,this.byteSegments=v,this.ecLevel=_,this.structuredAppendSequenceNumber=j,this.structuredAppendParity=E,this.numBits=f==null?0:8*f.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(f){this.numBits=f}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(f){this.errorsCorrected=f}getErasures(){return this.erasures}setErasures(f){this.erasures=f}getOther(){return this.other}setOther(f){this.other=f}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class je{exp(f){return this.expTable[f]}log(f){if(f===0)throw new x;return this.logTable[f]}static addOrSubtract(f,p){return f^p}}class De{constructor(f,p){if(p.length===0)throw new x;this.field=f;const v=p.length;if(v>1&&p[0]===0){let _=1;for(;_<v&&p[_]===0;)_++;_===v?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(v-_),y.arraycopy(p,_,this.coefficients,0,this.coefficients.length))}else this.coefficients=p}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(f){return this.coefficients[this.coefficients.length-1-f]}evaluateAt(f){if(f===0)return this.getCoefficient(0);const p=this.coefficients;let v;if(f===1){v=0;for(let E=0,D=p.length;E!==D;E++){const z=p[E];v=je.addOrSubtract(v,z)}return v}v=p[0];const _=p.length,j=this.field;for(let E=1;E<_;E++)v=je.addOrSubtract(j.multiply(f,v),p[E]);return v}addOrSubtract(f){if(!this.field.equals(f.field))throw new x("GenericGFPolys do not have same GenericGF field");if(this.isZero())return f;if(f.isZero())return this;let p=this.coefficients,v=f.coefficients;if(p.length>v.length){const E=p;p=v,v=E}let _=new Int32Array(v.length);const j=v.length-p.length;y.arraycopy(v,0,_,0,j);for(let E=j;E<v.length;E++)_[E]=je.addOrSubtract(p[E-j],v[E]);return new De(this.field,_)}multiply(f){if(!this.field.equals(f.field))throw new x("GenericGFPolys do not have same GenericGF field");if(this.isZero()||f.isZero())return this.field.getZero();const p=this.coefficients,v=p.length,_=f.coefficients,j=_.length,E=new Int32Array(v+j-1),D=this.field;for(let z=0;z<v;z++){const X=p[z];for(let oe=0;oe<j;oe++)E[z+oe]=je.addOrSubtract(E[z+oe],D.multiply(X,_[oe]))}return new De(D,E)}multiplyScalar(f){if(f===0)return this.field.getZero();if(f===1)return this;const p=this.coefficients.length,v=this.field,_=new Int32Array(p),j=this.coefficients;for(let E=0;E<p;E++)_[E]=v.multiply(j[E],f);return new De(v,_)}multiplyByMonomial(f,p){if(f<0)throw new x;if(p===0)return this.field.getZero();const v=this.coefficients,_=v.length,j=new Int32Array(_+f),E=this.field;for(let D=0;D<_;D++)j[D]=E.multiply(v[D],p);return new De(E,j)}divide(f){if(!this.field.equals(f.field))throw new x("GenericGFPolys do not have same GenericGF field");if(f.isZero())throw new x("Divide by 0");const p=this.field;let v=p.getZero(),_=this;const j=f.getCoefficient(f.getDegree()),E=p.inverse(j);for(;_.getDegree()>=f.getDegree()&&!_.isZero();){const D=_.getDegree()-f.getDegree(),z=p.multiply(_.getCoefficient(_.getDegree()),E),X=f.multiplyByMonomial(D,z),oe=p.buildMonomial(D,z);v=v.addOrSubtract(oe),_=_.addOrSubtract(X)}return[v,_]}toString(){let f="";for(let p=this.getDegree();p>=0;p--){let v=this.getCoefficient(p);if(v!==0){if(v<0?(f+=" - ",v=-v):f.length>0&&(f+=" + "),p===0||v!==1){const _=this.field.log(v);_===0?f+="1":_===1?f+="a":(f+="a^",f+=_)}p!==0&&(p===1?f+="x":(f+="x^",f+=p))}}return f}}class ce extends c{}ce.kind="ArithmeticException";class Ee extends je{constructor(f,p,v){super(),this.primitive=f,this.size=p,this.generatorBase=v;const _=new Int32Array(p);let j=1;for(let D=0;D<p;D++)_[D]=j,j*=2,j>=p&&(j^=f,j&=p-1);this.expTable=_;const E=new Int32Array(p);for(let D=0;D<p-1;D++)E[_[D]]=D;this.logTable=E,this.zero=new De(this,Int32Array.from([0])),this.one=new De(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(f,p){if(f<0)throw new x;if(p===0)return this.zero;const v=new Int32Array(f+1);return v[0]=p,new De(this,v)}inverse(f){if(f===0)throw new ce;return this.expTable[this.size-this.logTable[f]-1]}multiply(f,p){return f===0||p===0?0:this.expTable[(this.logTable[f]+this.logTable[p])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+A.toHexString(this.primitive)+","+this.size+")"}equals(f){return f===this}}Ee.AZTEC_DATA_12=new Ee(4201,4096,1),Ee.AZTEC_DATA_10=new Ee(1033,1024,1),Ee.AZTEC_DATA_6=new Ee(67,64,1),Ee.AZTEC_PARAM=new Ee(19,16,1),Ee.QR_CODE_FIELD_256=new Ee(285,256,0),Ee.DATA_MATRIX_FIELD_256=new Ee(301,256,1),Ee.AZTEC_DATA_8=Ee.DATA_MATRIX_FIELD_256,Ee.MAXICODE_FIELD_64=Ee.AZTEC_DATA_6;class be extends c{}be.kind="ReedSolomonException";class ge extends c{}ge.kind="IllegalStateException";class Qe{constructor(f){this.field=f}decode(f,p){const v=this.field,_=new De(v,f),j=new Int32Array(p);let E=!0;for(let He=0;He<p;He++){const rt=_.evaluateAt(v.exp(He+v.getGeneratorBase()));j[j.length-1-He]=rt,rt!==0&&(E=!1)}if(E)return;const D=new De(v,j),z=this.runEuclideanAlgorithm(v.buildMonomial(p,1),D,p),X=z[0],oe=z[1],we=this.findErrorLocations(X),Oe=this.findErrorMagnitudes(oe,we);for(let He=0;He<we.length;He++){const rt=f.length-1-v.log(we[He]);if(rt<0)throw new be("Bad error location");f[rt]=Ee.addOrSubtract(f[rt],Oe[He])}}runEuclideanAlgorithm(f,p,v){if(f.getDegree()<p.getDegree()){const He=f;f=p,p=He}const _=this.field;let j=f,E=p,D=_.getZero(),z=_.getOne();for(;E.getDegree()>=(v/2|0);){let He=j,rt=D;if(j=E,D=z,j.isZero())throw new be("r_{i-1} was zero");E=He;let lt=_.getZero();const xt=j.getCoefficient(j.getDegree()),St=_.inverse(xt);for(;E.getDegree()>=j.getDegree()&&!E.isZero();){const Vt=E.getDegree()-j.getDegree(),Wt=_.multiply(E.getCoefficient(E.getDegree()),St);lt=lt.addOrSubtract(_.buildMonomial(Vt,Wt)),E=E.addOrSubtract(j.multiplyByMonomial(Vt,Wt))}if(z=lt.multiply(D).addOrSubtract(rt),E.getDegree()>=j.getDegree())throw new ge("Division algorithm failed to reduce polynomial?")}const X=z.getCoefficient(0);if(X===0)throw new be("sigmaTilde(0) was zero");const oe=_.inverse(X),we=z.multiplyScalar(oe),Oe=E.multiplyScalar(oe);return[we,Oe]}findErrorLocations(f){const p=f.getDegree();if(p===1)return Int32Array.from([f.getCoefficient(1)]);const v=new Int32Array(p);let _=0;const j=this.field;for(let E=1;E<j.getSize()&&_<p;E++)f.evaluateAt(E)===0&&(v[_]=j.inverse(E),_++);if(_!==p)throw new be("Error locator degree does not match number of roots");return v}findErrorMagnitudes(f,p){const v=p.length,_=new Int32Array(v),j=this.field;for(let E=0;E<v;E++){const D=j.inverse(p[E]);let z=1;for(let X=0;X<v;X++)if(E!==X){const oe=j.multiply(p[X],D),we=(oe&1)===0?oe|1:oe&-2;z=j.multiply(z,we)}_[E]=j.multiply(f.evaluateAt(D),j.inverse(z)),j.getGeneratorBase()!==0&&(_[E]=j.multiply(_[E],D))}return _}}var Ye;(function(ye){ye[ye.UPPER=0]="UPPER",ye[ye.LOWER=1]="LOWER",ye[ye.MIXED=2]="MIXED",ye[ye.DIGIT=3]="DIGIT",ye[ye.PUNCT=4]="PUNCT",ye[ye.BINARY=5]="BINARY"})(Ye||(Ye={}));class at{decode(f){this.ddata=f;let p=f.getBits(),v=this.extractBits(p),_=this.correctBits(v),j=at.convertBoolArrayToByteArray(_),E=at.getEncodedData(_),D=new ne(j,E,null,null);return D.setNumBits(_.length),D}static highLevelDecode(f){return this.getEncodedData(f)}static getEncodedData(f){let p=f.length,v=Ye.UPPER,_=Ye.UPPER,j="",E=0;for(;E<p;)if(_===Ye.BINARY){if(p-E<5)break;let D=at.readCode(f,E,5);if(E+=5,D===0){if(p-E<11)break;D=at.readCode(f,E,11)+31,E+=11}for(let z=0;z<D;z++){if(p-E<8){E=p;break}const X=at.readCode(f,E,8);j+=G.castAsNonUtf8Char(X),E+=8}_=v}else{let D=_===Ye.DIGIT?4:5;if(p-E<D)break;let z=at.readCode(f,E,D);E+=D;let X=at.getCharacter(_,z);X.startsWith("CTRL_")?(v=_,_=at.getTable(X.charAt(5)),X.charAt(6)==="L"&&(v=_)):(j+=X,_=v)}return j}static getTable(f){switch(f){case"L":return Ye.LOWER;case"P":return Ye.PUNCT;case"M":return Ye.MIXED;case"D":return Ye.DIGIT;case"B":return Ye.BINARY;case"U":default:return Ye.UPPER}}static getCharacter(f,p){switch(f){case Ye.UPPER:return at.UPPER_TABLE[p];case Ye.LOWER:return at.LOWER_TABLE[p];case Ye.MIXED:return at.MIXED_TABLE[p];case Ye.PUNCT:return at.PUNCT_TABLE[p];case Ye.DIGIT:return at.DIGIT_TABLE[p];default:throw new ge("Bad table")}}correctBits(f){let p,v;this.ddata.getNbLayers()<=2?(v=6,p=Ee.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(v=8,p=Ee.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(v=10,p=Ee.AZTEC_DATA_10):(v=12,p=Ee.AZTEC_DATA_12);let _=this.ddata.getNbDatablocks(),j=f.length/v;if(j<_)throw new R;let E=f.length%v,D=new Int32Array(j);for(let Oe=0;Oe<j;Oe++,E+=v)D[Oe]=at.readCode(f,E,v);try{new Qe(p).decode(D,j-_)}catch(Oe){throw new R(Oe)}let z=(1<<v)-1,X=0;for(let Oe=0;Oe<_;Oe++){let He=D[Oe];if(He===0||He===z)throw new R;(He===1||He===z-1)&&X++}let oe=new Array(_*v-X),we=0;for(let Oe=0;Oe<_;Oe++){let He=D[Oe];if(He===1||He===z-1)oe.fill(He>1,we,we+v-1),we+=v-1;else for(let rt=v-1;rt>=0;--rt)oe[we++]=(He&1<<rt)!==0}return oe}extractBits(f){let p=this.ddata.isCompact(),v=this.ddata.getNbLayers(),_=(p?11:14)+v*4,j=new Int32Array(_),E=new Array(this.totalBitsInLayer(v,p));if(p)for(let D=0;D<j.length;D++)j[D]=D;else{let D=_+1+2*A.truncDivision(A.truncDivision(_,2)-1,15),z=_/2,X=A.truncDivision(D,2);for(let oe=0;oe<z;oe++){let we=oe+A.truncDivision(oe,15);j[z-oe-1]=X-we-1,j[z+oe]=X+we+1}}for(let D=0,z=0;D<v;D++){let X=(v-D)*4+(p?9:12),oe=D*2,we=_-1-oe;for(let Oe=0;Oe<X;Oe++){let He=Oe*2;for(let rt=0;rt<2;rt++)E[z+He+rt]=f.get(j[oe+rt],j[oe+Oe]),E[z+2*X+He+rt]=f.get(j[oe+Oe],j[we-rt]),E[z+4*X+He+rt]=f.get(j[we-rt],j[we-Oe]),E[z+6*X+He+rt]=f.get(j[we-Oe],j[oe+rt])}z+=X*8}return E}static readCode(f,p,v){let _=0;for(let j=p;j<p+v;j++)_<<=1,f[j]&&(_|=1);return _}static readByte(f,p){let v=f.length-p;return v>=8?at.readCode(f,p,8):at.readCode(f,p,v)<<8-v}static convertBoolArrayToByteArray(f){let p=new Uint8Array((f.length+7)/8);for(let v=0;v<p.length;v++)p[v]=at.readByte(f,8*v);return p}totalBitsInLayer(f,p){return((p?88:112)+16*f)*f}}at.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],at.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],at.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],at.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],at.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class Je{constructor(){}static round(f){return f===NaN?0:f<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:f>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:f+(f<0?-.5:.5)|0}static distance(f,p,v,_){const j=f-v,E=p-_;return Math.sqrt(j*j+E*E)}static sum(f){let p=0;for(let v=0,_=f.length;v!==_;v++){const j=f[v];p+=j}return p}}class ct{static floatToIntBits(f){return f}}ct.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Ke{constructor(f,p){this.x=f,this.y=p}getX(){return this.x}getY(){return this.y}equals(f){if(f instanceof Ke){const p=f;return this.x===p.x&&this.y===p.y}return!1}hashCode(){return 31*ct.floatToIntBits(this.x)+ct.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(f){const p=this.distance(f[0],f[1]),v=this.distance(f[1],f[2]),_=this.distance(f[0],f[2]);let j,E,D;if(v>=p&&v>=_?(E=f[0],j=f[1],D=f[2]):_>=v&&_>=p?(E=f[1],j=f[0],D=f[2]):(E=f[2],j=f[0],D=f[1]),this.crossProductZ(j,E,D)<0){const z=j;j=D,D=z}f[0]=j,f[1]=E,f[2]=D}static distance(f,p){return Je.distance(f.x,f.y,p.x,p.y)}static crossProductZ(f,p,v){const _=p.x,j=p.y;return(v.x-_)*(f.y-j)-(v.y-j)*(f.x-_)}}class zt{constructor(f,p){this.bits=f,this.points=p}getBits(){return this.bits}getPoints(){return this.points}}class Ft extends zt{constructor(f,p,v,_,j){super(f,p),this.compact=v,this.nbDatablocks=_,this.nbLayers=j}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class fr{constructor(f,p,v,_){this.image=f,this.height=f.getHeight(),this.width=f.getWidth(),p==null&&(p=fr.INIT_SIZE),v==null&&(v=f.getWidth()/2|0),_==null&&(_=f.getHeight()/2|0);const j=p/2|0;if(this.leftInit=v-j,this.rightInit=v+j,this.upInit=_-j,this.downInit=_+j,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new se}detect(){let f=this.leftInit,p=this.rightInit,v=this.upInit,_=this.downInit,j=!1,E=!0,D=!1,z=!1,X=!1,oe=!1,we=!1;const Oe=this.width,He=this.height;for(;E;){E=!1;let rt=!0;for(;(rt||!z)&&p<Oe;)rt=this.containsBlackPoint(v,_,p,!1),rt?(p++,E=!0,z=!0):z||p++;if(p>=Oe){j=!0;break}let lt=!0;for(;(lt||!X)&&_<He;)lt=this.containsBlackPoint(f,p,_,!0),lt?(_++,E=!0,X=!0):X||_++;if(_>=He){j=!0;break}let xt=!0;for(;(xt||!oe)&&f>=0;)xt=this.containsBlackPoint(v,_,f,!1),xt?(f--,E=!0,oe=!0):oe||f--;if(f<0){j=!0;break}let St=!0;for(;(St||!we)&&v>=0;)St=this.containsBlackPoint(f,p,v,!0),St?(v--,E=!0,we=!0):we||v--;if(v<0){j=!0;break}E&&(D=!0)}if(!j&&D){const rt=p-f;let lt=null;for(let Wt=1;lt===null&&Wt<rt;Wt++)lt=this.getBlackPointOnSegment(f,_-Wt,f+Wt,_);if(lt==null)throw new se;let xt=null;for(let Wt=1;xt===null&&Wt<rt;Wt++)xt=this.getBlackPointOnSegment(f,v+Wt,f+Wt,v);if(xt==null)throw new se;let St=null;for(let Wt=1;St===null&&Wt<rt;Wt++)St=this.getBlackPointOnSegment(p,v+Wt,p-Wt,v);if(St==null)throw new se;let Vt=null;for(let Wt=1;Vt===null&&Wt<rt;Wt++)Vt=this.getBlackPointOnSegment(p,_-Wt,p-Wt,_);if(Vt==null)throw new se;return this.centerEdges(Vt,lt,St,xt)}else throw new se}getBlackPointOnSegment(f,p,v,_){const j=Je.round(Je.distance(f,p,v,_)),E=(v-f)/j,D=(_-p)/j,z=this.image;for(let X=0;X<j;X++){const oe=Je.round(f+X*E),we=Je.round(p+X*D);if(z.get(oe,we))return new Ke(oe,we)}return null}centerEdges(f,p,v,_){const j=f.getX(),E=f.getY(),D=p.getX(),z=p.getY(),X=v.getX(),oe=v.getY(),we=_.getX(),Oe=_.getY(),He=fr.CORR;return j<this.width/2?[new Ke(we-He,Oe+He),new Ke(D+He,z+He),new Ke(X-He,oe-He),new Ke(j+He,E-He)]:[new Ke(we+He,Oe+He),new Ke(D+He,z-He),new Ke(X-He,oe+He),new Ke(j-He,E-He)]}containsBlackPoint(f,p,v,_){const j=this.image;if(_){for(let E=f;E<=p;E++)if(j.get(E,v))return!0}else for(let E=f;E<=p;E++)if(j.get(v,E))return!0;return!1}}fr.INIT_SIZE=10,fr.CORR=1;class hr{static checkAndNudgePoints(f,p){const v=f.getWidth(),_=f.getHeight();let j=!0;for(let E=0;E<p.length&&j;E+=2){const D=Math.floor(p[E]),z=Math.floor(p[E+1]);if(D<-1||D>v||z<-1||z>_)throw new se;j=!1,D===-1?(p[E]=0,j=!0):D===v&&(p[E]=v-1,j=!0),z===-1?(p[E+1]=0,j=!0):z===_&&(p[E+1]=_-1,j=!0)}j=!0;for(let E=p.length-2;E>=0&&j;E-=2){const D=Math.floor(p[E]),z=Math.floor(p[E+1]);if(D<-1||D>v||z<-1||z>_)throw new se;j=!1,D===-1?(p[E]=0,j=!0):D===v&&(p[E]=v-1,j=!0),z===-1?(p[E+1]=0,j=!0):z===_&&(p[E+1]=_-1,j=!0)}}}class sr{constructor(f,p,v,_,j,E,D,z,X){this.a11=f,this.a21=p,this.a31=v,this.a12=_,this.a22=j,this.a32=E,this.a13=D,this.a23=z,this.a33=X}static quadrilateralToQuadrilateral(f,p,v,_,j,E,D,z,X,oe,we,Oe,He,rt,lt,xt){const St=sr.quadrilateralToSquare(f,p,v,_,j,E,D,z);return sr.squareToQuadrilateral(X,oe,we,Oe,He,rt,lt,xt).times(St)}transformPoints(f){const p=f.length,v=this.a11,_=this.a12,j=this.a13,E=this.a21,D=this.a22,z=this.a23,X=this.a31,oe=this.a32,we=this.a33;for(let Oe=0;Oe<p;Oe+=2){const He=f[Oe],rt=f[Oe+1],lt=j*He+z*rt+we;f[Oe]=(v*He+E*rt+X)/lt,f[Oe+1]=(_*He+D*rt+oe)/lt}}transformPointsWithValues(f,p){const v=this.a11,_=this.a12,j=this.a13,E=this.a21,D=this.a22,z=this.a23,X=this.a31,oe=this.a32,we=this.a33,Oe=f.length;for(let He=0;He<Oe;He++){const rt=f[He],lt=p[He],xt=j*rt+z*lt+we;f[He]=(v*rt+E*lt+X)/xt,p[He]=(_*rt+D*lt+oe)/xt}}static squareToQuadrilateral(f,p,v,_,j,E,D,z){const X=f-v+j-D,oe=p-_+E-z;if(X===0&&oe===0)return new sr(v-f,j-v,f,_-p,E-_,p,0,0,1);{const we=v-j,Oe=D-j,He=_-E,rt=z-E,lt=we*rt-Oe*He,xt=(X*rt-Oe*oe)/lt,St=(we*oe-X*He)/lt;return new sr(v-f+xt*v,D-f+St*D,f,_-p+xt*_,z-p+St*z,p,xt,St,1)}}static quadrilateralToSquare(f,p,v,_,j,E,D,z){return sr.squareToQuadrilateral(f,p,v,_,j,E,D,z).buildAdjoint()}buildAdjoint(){return new sr(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(f){return new sr(this.a11*f.a11+this.a21*f.a12+this.a31*f.a13,this.a11*f.a21+this.a21*f.a22+this.a31*f.a23,this.a11*f.a31+this.a21*f.a32+this.a31*f.a33,this.a12*f.a11+this.a22*f.a12+this.a32*f.a13,this.a12*f.a21+this.a22*f.a22+this.a32*f.a23,this.a12*f.a31+this.a22*f.a32+this.a32*f.a33,this.a13*f.a11+this.a23*f.a12+this.a33*f.a13,this.a13*f.a21+this.a23*f.a22+this.a33*f.a23,this.a13*f.a31+this.a23*f.a32+this.a33*f.a33)}}class Sr extends hr{sampleGrid(f,p,v,_,j,E,D,z,X,oe,we,Oe,He,rt,lt,xt,St,Vt,Wt){const qt=sr.quadrilateralToQuadrilateral(_,j,E,D,z,X,oe,we,Oe,He,rt,lt,xt,St,Vt,Wt);return this.sampleGridWithTransform(f,p,v,qt)}sampleGridWithTransform(f,p,v,_){if(p<=0||v<=0)throw new se;const j=new te(p,v),E=new Float32Array(2*p);for(let D=0;D<v;D++){const z=E.length,X=D+.5;for(let oe=0;oe<z;oe+=2)E[oe]=oe/2+.5,E[oe+1]=X;_.transformPoints(E),hr.checkAndNudgePoints(f,E);try{for(let oe=0;oe<z;oe+=2)f.get(Math.floor(E[oe]),Math.floor(E[oe+1]))&&j.set(oe/2,D)}catch{throw new se}}return j}}class tr{static setGridSampler(f){tr.gridSampler=f}static getInstance(){return tr.gridSampler}}tr.gridSampler=new Sr;class Jt{constructor(f,p){this.x=f,this.y=p}toResultPoint(){return new Ke(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class Kt{constructor(f){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=f}detect(){return this.detectMirror(!1)}detectMirror(f){let p=this.getMatrixCenter(),v=this.getBullsEyeCorners(p);if(f){let E=v[0];v[0]=v[2],v[2]=E}this.extractParameters(v);let _=this.sampleGrid(this.image,v[this.shift%4],v[(this.shift+1)%4],v[(this.shift+2)%4],v[(this.shift+3)%4]),j=this.getMatrixCornerPoints(v);return new Ft(_,j,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(f){if(!this.isValidPoint(f[0])||!this.isValidPoint(f[1])||!this.isValidPoint(f[2])||!this.isValidPoint(f[3]))throw new se;let p=2*this.nbCenterLayers,v=new Int32Array([this.sampleLine(f[0],f[1],p),this.sampleLine(f[1],f[2],p),this.sampleLine(f[2],f[3],p),this.sampleLine(f[3],f[0],p)]);this.shift=this.getRotation(v,p);let _=0;for(let E=0;E<4;E++){let D=v[(this.shift+E)%4];this.compact?(_<<=7,_+=D>>1&127):(_<<=10,_+=(D>>2&992)+(D>>1&31))}let j=this.getCorrectedParameterData(_,this.compact);this.compact?(this.nbLayers=(j>>6)+1,this.nbDataBlocks=(j&63)+1):(this.nbLayers=(j>>11)+1,this.nbDataBlocks=(j&2047)+1)}getRotation(f,p){let v=0;f.forEach((_,j,E)=>{let D=(_>>p-2<<1)+(_&1);v=(v<<3)+D}),v=((v&1)<<11)+(v>>1);for(let _=0;_<4;_++)if(A.bitCount(v^this.EXPECTED_CORNER_BITS[_])<=2)return _;throw new se}getCorrectedParameterData(f,p){let v,_;p?(v=7,_=2):(v=10,_=4);let j=v-_,E=new Int32Array(v);for(let z=v-1;z>=0;--z)E[z]=f&15,f>>=4;try{new Qe(Ee.AZTEC_PARAM).decode(E,j)}catch{throw new se}let D=0;for(let z=0;z<_;z++)D=(D<<4)+E[z];return D}getBullsEyeCorners(f){let p=f,v=f,_=f,j=f,E=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let we=this.getFirstDifferent(p,E,1,-1),Oe=this.getFirstDifferent(v,E,1,1),He=this.getFirstDifferent(_,E,-1,1),rt=this.getFirstDifferent(j,E,-1,-1);if(this.nbCenterLayers>2){let lt=this.distancePoint(rt,we)*this.nbCenterLayers/(this.distancePoint(j,p)*(this.nbCenterLayers+2));if(lt<.75||lt>1.25||!this.isWhiteOrBlackRectangle(we,Oe,He,rt))break}p=we,v=Oe,_=He,j=rt,E=!E}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new se;this.compact=this.nbCenterLayers===5;let D=new Ke(p.getX()+.5,p.getY()-.5),z=new Ke(v.getX()+.5,v.getY()+.5),X=new Ke(_.getX()-.5,_.getY()+.5),oe=new Ke(j.getX()-.5,j.getY()-.5);return this.expandSquare([D,z,X,oe],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let f,p,v,_;try{let D=new fr(this.image).detect();f=D[0],p=D[1],v=D[2],_=D[3]}catch{let z=this.image.getWidth()/2,X=this.image.getHeight()/2;f=this.getFirstDifferent(new Jt(z+7,X-7),!1,1,-1).toResultPoint(),p=this.getFirstDifferent(new Jt(z+7,X+7),!1,1,1).toResultPoint(),v=this.getFirstDifferent(new Jt(z-7,X+7),!1,-1,1).toResultPoint(),_=this.getFirstDifferent(new Jt(z-7,X-7),!1,-1,-1).toResultPoint()}let j=Je.round((f.getX()+_.getX()+p.getX()+v.getX())/4),E=Je.round((f.getY()+_.getY()+p.getY()+v.getY())/4);try{let D=new fr(this.image,15,j,E).detect();f=D[0],p=D[1],v=D[2],_=D[3]}catch{f=this.getFirstDifferent(new Jt(j+7,E-7),!1,1,-1).toResultPoint(),p=this.getFirstDifferent(new Jt(j+7,E+7),!1,1,1).toResultPoint(),v=this.getFirstDifferent(new Jt(j-7,E+7),!1,-1,1).toResultPoint(),_=this.getFirstDifferent(new Jt(j-7,E-7),!1,-1,-1).toResultPoint()}return j=Je.round((f.getX()+_.getX()+p.getX()+v.getX())/4),E=Je.round((f.getY()+_.getY()+p.getY()+v.getY())/4),new Jt(j,E)}getMatrixCornerPoints(f){return this.expandSquare(f,2*this.nbCenterLayers,this.getDimension())}sampleGrid(f,p,v,_,j){let E=tr.getInstance(),D=this.getDimension(),z=D/2-this.nbCenterLayers,X=D/2+this.nbCenterLayers;return E.sampleGrid(f,D,D,z,z,X,z,X,X,z,X,p.getX(),p.getY(),v.getX(),v.getY(),_.getX(),_.getY(),j.getX(),j.getY())}sampleLine(f,p,v){let _=0,j=this.distanceResultPoint(f,p),E=j/v,D=f.getX(),z=f.getY(),X=E*(p.getX()-f.getX())/j,oe=E*(p.getY()-f.getY())/j;for(let we=0;we<v;we++)this.image.get(Je.round(D+we*X),Je.round(z+we*oe))&&(_|=1<<v-we-1);return _}isWhiteOrBlackRectangle(f,p,v,_){let j=3;f=new Jt(f.getX()-j,f.getY()+j),p=new Jt(p.getX()-j,p.getY()-j),v=new Jt(v.getX()+j,v.getY()-j),_=new Jt(_.getX()+j,_.getY()+j);let E=this.getColor(_,f);if(E===0)return!1;let D=this.getColor(f,p);return D!==E||(D=this.getColor(p,v),D!==E)?!1:(D=this.getColor(v,_),D===E)}getColor(f,p){let v=this.distancePoint(f,p),_=(p.getX()-f.getX())/v,j=(p.getY()-f.getY())/v,E=0,D=f.getX(),z=f.getY(),X=this.image.get(f.getX(),f.getY()),oe=Math.ceil(v);for(let Oe=0;Oe<oe;Oe++)D+=_,z+=j,this.image.get(Je.round(D),Je.round(z))!==X&&E++;let we=E/v;return we>.1&&we<.9?0:we<=.1===X?1:-1}getFirstDifferent(f,p,v,_){let j=f.getX()+v,E=f.getY()+_;for(;this.isValid(j,E)&&this.image.get(j,E)===p;)j+=v,E+=_;for(j-=v,E-=_;this.isValid(j,E)&&this.image.get(j,E)===p;)j+=v;for(j-=v;this.isValid(j,E)&&this.image.get(j,E)===p;)E+=_;return E-=_,new Jt(j,E)}expandSquare(f,p,v){let _=v/(2*p),j=f[0].getX()-f[2].getX(),E=f[0].getY()-f[2].getY(),D=(f[0].getX()+f[2].getX())/2,z=(f[0].getY()+f[2].getY())/2,X=new Ke(D+_*j,z+_*E),oe=new Ke(D-_*j,z-_*E);j=f[1].getX()-f[3].getX(),E=f[1].getY()-f[3].getY(),D=(f[1].getX()+f[3].getX())/2,z=(f[1].getY()+f[3].getY())/2;let we=new Ke(D+_*j,z+_*E),Oe=new Ke(D-_*j,z-_*E);return[X,we,oe,Oe]}isValid(f,p){return f>=0&&f<this.image.getWidth()&&p>0&&p<this.image.getHeight()}isValidPoint(f){let p=Je.round(f.getX()),v=Je.round(f.getY());return this.isValid(p,v)}distancePoint(f,p){return Je.distance(f.getX(),f.getY(),p.getX(),p.getY())}distanceResultPoint(f,p){return Je.distance(f.getX(),f.getY(),p.getX(),p.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(A.truncDivision(this.nbLayers-4,8)+1)+15}}class ar{decode(f,p=null){let v=null,_=new Kt(f.getBlackMatrix()),j=null,E=null;try{let oe=_.detectMirror(!1);j=oe.getPoints(),this.reportFoundResultPoints(p,j),E=new at().decode(oe)}catch(oe){v=oe}if(E==null)try{let oe=_.detectMirror(!0);j=oe.getPoints(),this.reportFoundResultPoints(p,j),E=new at().decode(oe)}catch(oe){throw v??oe}let D=new J(E.getText(),E.getRawBytes(),E.getNumBits(),j,Y.AZTEC,y.currentTimeMillis()),z=E.getByteSegments();z!=null&&D.putMetadata(me.BYTE_SEGMENTS,z);let X=E.getECLevel();return X!=null&&D.putMetadata(me.ERROR_CORRECTION_LEVEL,X),D}reportFoundResultPoints(f,p){if(f!=null){let v=f.get(W.NEED_RESULT_POINT_CALLBACK);v!=null&&p.forEach((_,j,E)=>{v.foundPossibleResultPoint(_)})}}reset(){}}class vr extends re{constructor(f=500){super(new ar,f)}}class rr{decode(f,p){try{return this.doDecode(f,p)}catch{if(p&&p.get(W.TRY_HARDER)===!0&&f.isRotateSupported()){const j=f.rotateCounterClockwise(),E=this.doDecode(j,p),D=E.getResultMetadata();let z=270;D!==null&&D.get(me.ORIENTATION)===!0&&(z=z+D.get(me.ORIENTATION)%360),E.putMetadata(me.ORIENTATION,z);const X=E.getResultPoints();if(X!==null){const oe=j.getHeight();for(let we=0;we<X.length;we++)X[we]=new Ke(oe-X[we].getY()-1,X[we].getX())}return E}else throw new se}}reset(){}doDecode(f,p){const v=f.getWidth(),_=f.getHeight();let j=new P(v);const E=p&&p.get(W.TRY_HARDER)===!0,D=Math.max(1,_>>(E?8:5));let z;E?z=_:z=15;const X=Math.trunc(_/2);for(let oe=0;oe<z;oe++){const we=Math.trunc((oe+1)/2),Oe=(oe&1)===0,He=X+D*(Oe?we:-we);if(He<0||He>=_)break;try{j=f.getBlackRow(He,j)}catch{continue}for(let rt=0;rt<2;rt++){if(rt===1&&(j.reverse(),p&&p.get(W.NEED_RESULT_POINT_CALLBACK)===!0)){const lt=new Map;p.forEach((xt,St)=>lt.set(St,xt)),lt.delete(W.NEED_RESULT_POINT_CALLBACK),p=lt}try{const lt=this.decodeRow(He,j,p);if(rt===1){lt.putMetadata(me.ORIENTATION,180);const xt=lt.getResultPoints();xt!==null&&(xt[0]=new Ke(v-xt[0].getX()-1,xt[0].getY()),xt[1]=new Ke(v-xt[1].getX()-1,xt[1].getY()))}return lt}catch{}}}throw new se}static recordPattern(f,p,v){const _=v.length;for(let X=0;X<_;X++)v[X]=0;const j=f.getSize();if(p>=j)throw new se;let E=!f.get(p),D=0,z=p;for(;z<j;){if(f.get(z)!==E)v[D]++;else{if(++D===_)break;v[D]=1,E=!E}z++}if(!(D===_||D===_-1&&z===j))throw new se}static recordPatternInReverse(f,p,v){let _=v.length,j=f.get(p);for(;p>0&&_>=0;)f.get(--p)!==j&&(_--,j=!j);if(_>=0)throw new se;rr.recordPattern(f,p+1,v)}static patternMatchVariance(f,p,v){const _=f.length;let j=0,E=0;for(let X=0;X<_;X++)j+=f[X],E+=p[X];if(j<E)return Number.POSITIVE_INFINITY;const D=j/E;v*=D;let z=0;for(let X=0;X<_;X++){const oe=f[X],we=p[X]*D,Oe=oe>we?oe-we:we-oe;if(Oe>v)return Number.POSITIVE_INFINITY;z+=Oe}return z/j}}class ft extends rr{static findStartPattern(f){const p=f.getSize(),v=f.getNextSet(0);let _=0,j=Int32Array.from([0,0,0,0,0,0]),E=v,D=!1;const z=6;for(let X=v;X<p;X++)if(f.get(X)!==D)j[_]++;else{if(_===z-1){let oe=ft.MAX_AVG_VARIANCE,we=-1;for(let Oe=ft.CODE_START_A;Oe<=ft.CODE_START_C;Oe++){const He=rr.patternMatchVariance(j,ft.CODE_PATTERNS[Oe],ft.MAX_INDIVIDUAL_VARIANCE);He<oe&&(oe=He,we=Oe)}if(we>=0&&f.isRange(Math.max(0,E-(X-E)/2),E,!1))return Int32Array.from([E,X,we]);E+=j[0]+j[1],j=j.slice(2,j.length-1),j[_-1]=0,j[_]=0,_--}else _++;j[_]=1,D=!D}throw new se}static decodeCode(f,p,v){rr.recordPattern(f,v,p);let _=ft.MAX_AVG_VARIANCE,j=-1;for(let E=0;E<ft.CODE_PATTERNS.length;E++){const D=ft.CODE_PATTERNS[E],z=this.patternMatchVariance(p,D,ft.MAX_INDIVIDUAL_VARIANCE);z<_&&(_=z,j=E)}if(j>=0)return j;throw new se}decodeRow(f,p,v){const _=v&&v.get(W.ASSUME_GS1)===!0,j=ft.findStartPattern(p),E=j[2];let D=0;const z=new Uint8Array(20);z[D++]=E;let X;switch(E){case ft.CODE_START_A:X=ft.CODE_CODE_A;break;case ft.CODE_START_B:X=ft.CODE_CODE_B;break;case ft.CODE_START_C:X=ft.CODE_CODE_C;break;default:throw new R}let oe=!1,we=!1,Oe="",He=j[0],rt=j[1];const lt=Int32Array.from([0,0,0,0,0,0]);let xt=0,St=0,Vt=E,Wt=0,qt=!0,on=!1,gn=!1;for(;!oe;){const Zc=we;switch(we=!1,xt=St,St=ft.decodeCode(p,lt,rt),z[D++]=St,St!==ft.CODE_STOP&&(qt=!0),St!==ft.CODE_STOP&&(Wt++,Vt+=Wt*St),He=rt,rt+=lt.reduce((Pf,Md)=>Pf+Md,0),St){case ft.CODE_START_A:case ft.CODE_START_B:case ft.CODE_START_C:throw new R}switch(X){case ft.CODE_CODE_A:if(St<64)gn===on?Oe+=String.fromCharCode(32+St):Oe+=String.fromCharCode(32+St+128),gn=!1;else if(St<96)gn===on?Oe+=String.fromCharCode(St-64):Oe+=String.fromCharCode(St+64),gn=!1;else switch(St!==ft.CODE_STOP&&(qt=!1),St){case ft.CODE_FNC_1:_&&(Oe.length===0?Oe+="]C1":Oe+="");break;case ft.CODE_FNC_2:case ft.CODE_FNC_3:break;case ft.CODE_FNC_4_A:!on&&gn?(on=!0,gn=!1):on&&gn?(on=!1,gn=!1):gn=!0;break;case ft.CODE_SHIFT:we=!0,X=ft.CODE_CODE_B;break;case ft.CODE_CODE_B:X=ft.CODE_CODE_B;break;case ft.CODE_CODE_C:X=ft.CODE_CODE_C;break;case ft.CODE_STOP:oe=!0;break}break;case ft.CODE_CODE_B:if(St<96)gn===on?Oe+=String.fromCharCode(32+St):Oe+=String.fromCharCode(32+St+128),gn=!1;else switch(St!==ft.CODE_STOP&&(qt=!1),St){case ft.CODE_FNC_1:_&&(Oe.length===0?Oe+="]C1":Oe+="");break;case ft.CODE_FNC_2:case ft.CODE_FNC_3:break;case ft.CODE_FNC_4_B:!on&&gn?(on=!0,gn=!1):on&&gn?(on=!1,gn=!1):gn=!0;break;case ft.CODE_SHIFT:we=!0,X=ft.CODE_CODE_A;break;case ft.CODE_CODE_A:X=ft.CODE_CODE_A;break;case ft.CODE_CODE_C:X=ft.CODE_CODE_C;break;case ft.CODE_STOP:oe=!0;break}break;case ft.CODE_CODE_C:if(St<100)St<10&&(Oe+="0"),Oe+=St;else switch(St!==ft.CODE_STOP&&(qt=!1),St){case ft.CODE_FNC_1:_&&(Oe.length===0?Oe+="]C1":Oe+="");break;case ft.CODE_CODE_A:X=ft.CODE_CODE_A;break;case ft.CODE_CODE_B:X=ft.CODE_CODE_B;break;case ft.CODE_STOP:oe=!0;break}break}Zc&&(X=X===ft.CODE_CODE_A?ft.CODE_CODE_B:ft.CODE_CODE_A)}const es=rt-He;if(rt=p.getNextUnset(rt),!p.isRange(rt,Math.min(p.getSize(),rt+(rt-He)/2),!1))throw new se;if(Vt-=Wt*xt,Vt%103!==xt)throw new g;const _i=Oe.length;if(_i===0)throw new se;_i>0&&qt&&(X===ft.CODE_CODE_C?Oe=Oe.substring(0,_i-2):Oe=Oe.substring(0,_i-1));const ri=(j[1]+j[0])/2,Ea=He+es/2,ni=z.length,po=new Uint8Array(ni);for(let Zc=0;Zc<ni;Zc++)po[Zc]=z[Zc];const Dd=[new Ke(ri,f),new Ke(Ea,f)];return new J(Oe,po,0,Dd,Y.CODE_128,new Date().getTime())}}ft.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],ft.MAX_AVG_VARIANCE=.25,ft.MAX_INDIVIDUAL_VARIANCE=.7,ft.CODE_SHIFT=98,ft.CODE_CODE_C=99,ft.CODE_CODE_B=100,ft.CODE_CODE_A=101,ft.CODE_FNC_1=102,ft.CODE_FNC_2=97,ft.CODE_FNC_3=96,ft.CODE_FNC_4_A=101,ft.CODE_FNC_4_B=100,ft.CODE_START_A=103,ft.CODE_START_B=104,ft.CODE_START_C=105,ft.CODE_STOP=106;class br extends rr{constructor(f=!1,p=!1){super(),this.usingCheckDigit=f,this.extendedMode=p,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(f,p,v){let _=this.counters;_.fill(0),this.decodeRowResult="";let j=br.findAsteriskPattern(p,_),E=p.getNextSet(j[1]),D=p.getSize(),z,X;do{br.recordPattern(p,E,_);let lt=br.toNarrowWidePattern(_);if(lt<0)throw new se;z=br.patternToChar(lt),this.decodeRowResult+=z,X=E;for(let xt of _)E+=xt;E=p.getNextSet(E)}while(z!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let oe=0;for(let lt of _)oe+=lt;let we=E-X-oe;if(E!==D&&we*2<oe)throw new se;if(this.usingCheckDigit){let lt=this.decodeRowResult.length-1,xt=0;for(let St=0;St<lt;St++)xt+=br.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(St));if(this.decodeRowResult.charAt(lt)!==br.ALPHABET_STRING.charAt(xt%43))throw new g;this.decodeRowResult=this.decodeRowResult.substring(0,lt)}if(this.decodeRowResult.length===0)throw new se;let Oe;this.extendedMode?Oe=br.decodeExtended(this.decodeRowResult):Oe=this.decodeRowResult;let He=(j[1]+j[0])/2,rt=X+oe/2;return new J(Oe,null,0,[new Ke(He,f),new Ke(rt,f)],Y.CODE_39,new Date().getTime())}static findAsteriskPattern(f,p){let v=f.getSize(),_=f.getNextSet(0),j=0,E=_,D=!1,z=p.length;for(let X=_;X<v;X++)if(f.get(X)!==D)p[j]++;else{if(j===z-1){if(this.toNarrowWidePattern(p)===br.ASTERISK_ENCODING&&f.isRange(Math.max(0,E-Math.floor((X-E)/2)),E,!1))return[E,X];E+=p[0]+p[1],p.copyWithin(0,2,2+j-1),p[j-1]=0,p[j]=0,j--}else j++;p[j]=1,D=!D}throw new se}static toNarrowWidePattern(f){let p=f.length,v=0,_;do{let j=2147483647;for(let z of f)z<j&&z>v&&(j=z);v=j,_=0;let E=0,D=0;for(let z=0;z<p;z++){let X=f[z];X>v&&(D|=1<<p-1-z,_++,E+=X)}if(_===3){for(let z=0;z<p&&_>0;z++){let X=f[z];if(X>v&&(_--,X*2>=E))return-1}return D}}while(_>3);return-1}static patternToChar(f){for(let p=0;p<br.CHARACTER_ENCODINGS.length;p++)if(br.CHARACTER_ENCODINGS[p]===f)return br.ALPHABET_STRING.charAt(p);if(f===br.ASTERISK_ENCODING)return"*";throw new se}static decodeExtended(f){let p=f.length,v="";for(let _=0;_<p;_++){let j=f.charAt(_);if(j==="+"||j==="$"||j==="%"||j==="/"){let E=f.charAt(_+1),D="\0";switch(j){case"+":if(E>="A"&&E<="Z")D=String.fromCharCode(E.charCodeAt(0)+32);else throw new R;break;case"$":if(E>="A"&&E<="Z")D=String.fromCharCode(E.charCodeAt(0)-64);else throw new R;break;case"%":if(E>="A"&&E<="E")D=String.fromCharCode(E.charCodeAt(0)-38);else if(E>="F"&&E<="J")D=String.fromCharCode(E.charCodeAt(0)-11);else if(E>="K"&&E<="O")D=String.fromCharCode(E.charCodeAt(0)+16);else if(E>="P"&&E<="T")D=String.fromCharCode(E.charCodeAt(0)+43);else if(E==="U")D="\0";else if(E==="V")D="@";else if(E==="W")D="`";else if(E==="X"||E==="Y"||E==="Z")D="";else throw new R;break;case"/":if(E>="A"&&E<="O")D=String.fromCharCode(E.charCodeAt(0)-32);else if(E==="Z")D=":";else throw new R;break}v+=D,_++}else v+=j}return v}}br.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",br.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],br.ASTERISK_ENCODING=148;class yr extends rr{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(f,p,v){let _=this.decodeStart(p),j=this.decodeEnd(p),E=new Z;yr.decodeMiddle(p,_[1],j[0],E);let D=E.toString(),z=null;v!=null&&(z=v.get(W.ALLOWED_LENGTHS)),z==null&&(z=yr.DEFAULT_ALLOWED_LENGTHS);let X=D.length,oe=!1,we=0;for(let rt of z){if(X===rt){oe=!0;break}rt>we&&(we=rt)}if(!oe&&X>we&&(oe=!0),!oe)throw new R;const Oe=[new Ke(_[1],f),new Ke(j[0],f)];return new J(D,null,0,Oe,Y.ITF,new Date().getTime())}static decodeMiddle(f,p,v,_){let j=new Int32Array(10),E=new Int32Array(5),D=new Int32Array(5);for(j.fill(0),E.fill(0),D.fill(0);p<v;){rr.recordPattern(f,p,j);for(let X=0;X<5;X++){let oe=2*X;E[X]=j[oe],D[X]=j[oe+1]}let z=yr.decodeDigit(E);_.append(z.toString()),z=this.decodeDigit(D),_.append(z.toString()),j.forEach(function(X){p+=X})}}decodeStart(f){let p=yr.skipWhiteSpace(f),v=yr.findGuardPattern(f,p,yr.START_PATTERN);return this.narrowLineWidth=(v[1]-v[0])/4,this.validateQuietZone(f,v[0]),v}validateQuietZone(f,p){let v=this.narrowLineWidth*10;v=v<p?v:p;for(let _=p-1;v>0&&_>=0&&!f.get(_);_--)v--;if(v!==0)throw new se}static skipWhiteSpace(f){const p=f.getSize(),v=f.getNextSet(0);if(v===p)throw new se;return v}decodeEnd(f){f.reverse();try{let p=yr.skipWhiteSpace(f),v;try{v=yr.findGuardPattern(f,p,yr.END_PATTERN_REVERSED[0])}catch(j){j instanceof se&&(v=yr.findGuardPattern(f,p,yr.END_PATTERN_REVERSED[1]))}this.validateQuietZone(f,v[0]);let _=v[0];return v[0]=f.getSize()-v[1],v[1]=f.getSize()-_,v}finally{f.reverse()}}static findGuardPattern(f,p,v){let _=v.length,j=new Int32Array(_),E=f.getSize(),D=!1,z=0,X=p;j.fill(0);for(let oe=p;oe<E;oe++)if(f.get(oe)!==D)j[z]++;else{if(z===_-1){if(rr.patternMatchVariance(j,v,yr.MAX_INDIVIDUAL_VARIANCE)<yr.MAX_AVG_VARIANCE)return[X,oe];X+=j[0]+j[1],y.arraycopy(j,2,j,0,z-1),j[z-1]=0,j[z]=0,z--}else z++;j[z]=1,D=!D}throw new se}static decodeDigit(f){let p=yr.MAX_AVG_VARIANCE,v=-1,_=yr.PATTERNS.length;for(let j=0;j<_;j++){let E=yr.PATTERNS[j],D=rr.patternMatchVariance(f,E,yr.MAX_INDIVIDUAL_VARIANCE);D<p?(p=D,v=j):D===p&&(v=-1)}if(v>=0)return v%10;throw new se}}yr.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],yr.MAX_AVG_VARIANCE=.38,yr.MAX_INDIVIDUAL_VARIANCE=.5,yr.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],yr.START_PATTERN=Int32Array.from([1,1,1,1]),yr.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class gr extends rr{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(f){let p=!1,v,_=0,j=Int32Array.from([0,0,0]);for(;!p;){j=Int32Array.from([0,0,0]),v=gr.findGuardPattern(f,_,!1,this.START_END_PATTERN,j);let E=v[0];_=v[1];let D=E-(_-E);D>=0&&(p=f.isRange(D,E,!1))}return v}static checkChecksum(f){return gr.checkStandardUPCEANChecksum(f)}static checkStandardUPCEANChecksum(f){let p=f.length;if(p===0)return!1;let v=parseInt(f.charAt(p-1),10);return gr.getStandardUPCEANChecksum(f.substring(0,p-1))===v}static getStandardUPCEANChecksum(f){let p=f.length,v=0;for(let _=p-1;_>=0;_-=2){let j=f.charAt(_).charCodeAt(0)-48;if(j<0||j>9)throw new R;v+=j}v*=3;for(let _=p-2;_>=0;_-=2){let j=f.charAt(_).charCodeAt(0)-48;if(j<0||j>9)throw new R;v+=j}return(1e3-v)%10}static decodeEnd(f,p){return gr.findGuardPattern(f,p,!1,gr.START_END_PATTERN,new Int32Array(gr.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(f,p,v,_){return this.findGuardPattern(f,p,v,_,new Int32Array(_.length))}static findGuardPattern(f,p,v,_,j){let E=f.getSize();p=v?f.getNextUnset(p):f.getNextSet(p);let D=0,z=p,X=_.length,oe=v;for(let we=p;we<E;we++)if(f.get(we)!==oe)j[D]++;else{if(D===X-1){if(rr.patternMatchVariance(j,_,gr.MAX_INDIVIDUAL_VARIANCE)<gr.MAX_AVG_VARIANCE)return Int32Array.from([z,we]);z+=j[0]+j[1];let Oe=j.slice(2,j.length-1);for(let He=0;He<D-1;He++)j[He]=Oe[He];j[D-1]=0,j[D]=0,D--}else D++;j[D]=1,oe=!oe}throw new se}static decodeDigit(f,p,v,_){this.recordPattern(f,v,p);let j=this.MAX_AVG_VARIANCE,E=-1,D=_.length;for(let z=0;z<D;z++){let X=_[z],oe=rr.patternMatchVariance(p,X,gr.MAX_INDIVIDUAL_VARIANCE);oe<j&&(j=oe,E=z)}if(E>=0)return E;throw new se}}gr.MAX_AVG_VARIANCE=.48,gr.MAX_INDIVIDUAL_VARIANCE=.7,gr.START_END_PATTERN=Int32Array.from([1,1,1]),gr.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),gr.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),gr.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class ot{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(f,p,v){let _=this.decodeRowStringBuffer,j=this.decodeMiddle(p,v,_),E=_.toString(),D=ot.parseExtensionString(E),z=[new Ke((v[0]+v[1])/2,f),new Ke(j,f)],X=new J(E,null,0,z,Y.UPC_EAN_EXTENSION,new Date().getTime());return D!=null&&X.putAllMetadata(D),X}decodeMiddle(f,p,v){let _=this.decodeMiddleCounters;_[0]=0,_[1]=0,_[2]=0,_[3]=0;let j=f.getSize(),E=p[1],D=0;for(let X=0;X<5&&E<j;X++){let oe=gr.decodeDigit(f,_,E,gr.L_AND_G_PATTERNS);v+=String.fromCharCode(48+oe%10);for(let we of _)E+=we;oe>=10&&(D|=1<<4-X),X!==4&&(E=f.getNextSet(E),E=f.getNextUnset(E))}if(v.length!==5)throw new se;let z=this.determineCheckDigit(D);if(ot.extensionChecksum(v.toString())!==z)throw new se;return E}static extensionChecksum(f){let p=f.length,v=0;for(let _=p-2;_>=0;_-=2)v+=f.charAt(_).charCodeAt(0)-48;v*=3;for(let _=p-1;_>=0;_-=2)v+=f.charAt(_).charCodeAt(0)-48;return v*=3,v%10}determineCheckDigit(f){for(let p=0;p<10;p++)if(f===this.CHECK_DIGIT_ENCODINGS[p])return p;throw new se}static parseExtensionString(f){if(f.length!==5)return null;let p=ot.parseExtension5String(f);return p==null?null:new Map([[me.SUGGESTED_PRICE,p]])}static parseExtension5String(f){let p;switch(f.charAt(0)){case"0":p="";break;case"5":p="$";break;case"9":switch(f){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}p="";break;default:p="";break}let v=parseInt(f.substring(1)),_=(v/100).toString(),j=v%100,E=j<10?"0"+j:j.toString();return p+_+"."+E}}class Lt{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(f,p,v){let _=this.decodeRowStringBuffer,j=this.decodeMiddle(p,v,_),E=_.toString(),D=Lt.parseExtensionString(E),z=[new Ke((v[0]+v[1])/2,f),new Ke(j,f)],X=new J(E,null,0,z,Y.UPC_EAN_EXTENSION,new Date().getTime());return D!=null&&X.putAllMetadata(D),X}decodeMiddle(f,p,v){let _=this.decodeMiddleCounters;_[0]=0,_[1]=0,_[2]=0,_[3]=0;let j=f.getSize(),E=p[1],D=0;for(let z=0;z<2&&E<j;z++){let X=gr.decodeDigit(f,_,E,gr.L_AND_G_PATTERNS);v+=String.fromCharCode(48+X%10);for(let oe of _)E+=oe;X>=10&&(D|=1<<1-z),z!==1&&(E=f.getNextSet(E),E=f.getNextUnset(E))}if(v.length!==2)throw new se;if(parseInt(v.toString())%4!==D)throw new se;return E}static parseExtensionString(f){return f.length!==2?null:new Map([[me.ISSUE_NUMBER,parseInt(f)]])}}class ir{static decodeRow(f,p,v){let _=gr.findGuardPattern(p,v,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new ot().decodeRow(f,p,_)}catch{return new Lt().decodeRow(f,p,_)}}}ir.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class Mt extends gr{constructor(){super(),this.decodeRowStringBuffer="",Mt.L_AND_G_PATTERNS=Mt.L_PATTERNS.map(f=>Int32Array.from(f));for(let f=10;f<20;f++){let p=Mt.L_PATTERNS[f-10],v=new Int32Array(p.length);for(let _=0;_<p.length;_++)v[_]=p[p.length-_-1];Mt.L_AND_G_PATTERNS[f]=v}}decodeRow(f,p,v){let _=Mt.findStartGuardPattern(p),j=v==null?null:v.get(W.NEED_RESULT_POINT_CALLBACK);if(j!=null){const qt=new Ke((_[0]+_[1])/2,f);j.foundPossibleResultPoint(qt)}let E=this.decodeMiddle(p,_,this.decodeRowStringBuffer),D=E.rowOffset,z=E.resultString;if(j!=null){const qt=new Ke(D,f);j.foundPossibleResultPoint(qt)}let X=this.decodeEnd(p,D);if(j!=null){const qt=new Ke((X[0]+X[1])/2,f);j.foundPossibleResultPoint(qt)}let oe=X[1],we=oe+(oe-X[0]);if(we>=p.getSize()||!p.isRange(oe,we,!1))throw new se;let Oe=z.toString();if(Oe.length<8)throw new R;if(!Mt.checkChecksum(Oe))throw new g;let He=(_[1]+_[0])/2,rt=(X[1]+X[0])/2,lt=this.getBarcodeFormat(),xt=[new Ke(He,f),new Ke(rt,f)],St=new J(Oe,null,0,xt,lt,new Date().getTime()),Vt=0;try{let qt=ir.decodeRow(f,p,X[1]);St.putMetadata(me.UPC_EAN_EXTENSION,qt.getText()),St.putAllMetadata(qt.getResultMetadata()),St.addResultPoints(qt.getResultPoints()),Vt=qt.getText().length}catch{}let Wt=v==null?null:v.get(W.ALLOWED_EAN_EXTENSIONS);if(Wt!=null){let qt=!1;for(let on in Wt)if(Vt.toString()===on){qt=!0;break}if(!qt)throw new se}return St}decodeEnd(f,p){return Mt.findGuardPattern(f,p,!1,Mt.START_END_PATTERN,new Int32Array(Mt.START_END_PATTERN.length).fill(0))}static checkChecksum(f){return Mt.checkStandardUPCEANChecksum(f)}static checkStandardUPCEANChecksum(f){let p=f.length;if(p===0)return!1;let v=parseInt(f.charAt(p-1),10);return Mt.getStandardUPCEANChecksum(f.substring(0,p-1))===v}static getStandardUPCEANChecksum(f){let p=f.length,v=0;for(let _=p-1;_>=0;_-=2){let j=f.charAt(_).charCodeAt(0)-48;if(j<0||j>9)throw new R;v+=j}v*=3;for(let _=p-2;_>=0;_-=2){let j=f.charAt(_).charCodeAt(0)-48;if(j<0||j>9)throw new R;v+=j}return(1e3-v)%10}}class Ge extends Mt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(f,p,v){let _=this.decodeMiddleCounters;_[0]=0,_[1]=0,_[2]=0,_[3]=0;let j=f.getSize(),E=p[1],D=0;for(let X=0;X<6&&E<j;X++){let oe=Mt.decodeDigit(f,_,E,Mt.L_AND_G_PATTERNS);v+=String.fromCharCode(48+oe%10);for(let we of _)E+=we;oe>=10&&(D|=1<<5-X)}v=Ge.determineFirstDigit(v,D),E=Mt.findGuardPattern(f,E,!0,Mt.MIDDLE_PATTERN,new Int32Array(Mt.MIDDLE_PATTERN.length).fill(0))[1];for(let X=0;X<6&&E<j;X++){let oe=Mt.decodeDigit(f,_,E,Mt.L_PATTERNS);v+=String.fromCharCode(48+oe);for(let we of _)E+=we}return{rowOffset:E,resultString:v}}getBarcodeFormat(){return Y.EAN_13}static determineFirstDigit(f,p){for(let v=0;v<10;v++)if(p===this.FIRST_DIGIT_ENCODINGS[v])return f=String.fromCharCode(48+v)+f,f;throw new se}}Ge.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class At extends Mt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(f,p,v){const _=this.decodeMiddleCounters;_[0]=0,_[1]=0,_[2]=0,_[3]=0;let j=f.getSize(),E=p[1];for(let z=0;z<4&&E<j;z++){let X=Mt.decodeDigit(f,_,E,Mt.L_PATTERNS);v+=String.fromCharCode(48+X);for(let oe of _)E+=oe}E=Mt.findGuardPattern(f,E,!0,Mt.MIDDLE_PATTERN,new Int32Array(Mt.MIDDLE_PATTERN.length).fill(0))[1];for(let z=0;z<4&&E<j;z++){let X=Mt.decodeDigit(f,_,E,Mt.L_PATTERNS);v+=String.fromCharCode(48+X);for(let oe of _)E+=oe}return{rowOffset:E,resultString:v}}getBarcodeFormat(){return Y.EAN_8}}class ur extends Mt{constructor(){super(...arguments),this.ean13Reader=new Ge}getBarcodeFormat(){return Y.UPC_A}decode(f,p){return this.maybeReturnResult(this.ean13Reader.decode(f))}decodeRow(f,p,v){return this.maybeReturnResult(this.ean13Reader.decodeRow(f,p,v))}decodeMiddle(f,p,v){return this.ean13Reader.decodeMiddle(f,p,v)}maybeReturnResult(f){let p=f.getText();if(p.charAt(0)==="0"){let v=new J(p.substring(1),null,null,f.getResultPoints(),Y.UPC_A);return f.getResultMetadata()!=null&&v.putAllMetadata(f.getResultMetadata()),v}else throw new se}reset(){this.ean13Reader.reset()}}class Dr extends Mt{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(f,p,v){const _=this.decodeMiddleCounters.map(X=>X);_[0]=0,_[1]=0,_[2]=0,_[3]=0;const j=f.getSize();let E=p[1],D=0;for(let X=0;X<6&&E<j;X++){const oe=Dr.decodeDigit(f,_,E,Dr.L_AND_G_PATTERNS);v+=String.fromCharCode(48+oe%10);for(let we of _)E+=we;oe>=10&&(D|=1<<5-X)}let z=Dr.determineNumSysAndCheckDigit(v,D);return{rowOffset:E,resultString:z}}decodeEnd(f,p){return Dr.findGuardPatternWithoutCounters(f,p,!0,Dr.MIDDLE_END_PATTERN)}checkChecksum(f){return Mt.checkChecksum(Dr.convertUPCEtoUPCA(f))}static determineNumSysAndCheckDigit(f,p){for(let v=0;v<=1;v++)for(let _=0;_<10;_++)if(p===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[v][_]){let j=String.fromCharCode(48+v),E=String.fromCharCode(48+_);return j+f+E}throw se.getNotFoundInstance()}getBarcodeFormat(){return Y.UPC_E}static convertUPCEtoUPCA(f){const p=f.slice(1,7).split("").map(j=>j.charCodeAt(0)),v=new Z;v.append(f.charAt(0));let _=p[5];switch(_){case 0:case 1:case 2:v.appendChars(p,0,2),v.append(_),v.append("0000"),v.appendChars(p,2,3);break;case 3:v.appendChars(p,0,3),v.append("00000"),v.appendChars(p,3,2);break;case 4:v.appendChars(p,0,4),v.append("00000"),v.append(p[4]);break;default:v.appendChars(p,0,5),v.append("0000"),v.append(_);break}return f.length>=8&&v.append(f.charAt(7)),v.toString()}}Dr.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Dr.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class jr extends rr{constructor(f){super();let p=f==null?null:f.get(W.POSSIBLE_FORMATS),v=[];n(p)?(v.push(new Ge),v.push(new ur),v.push(new At),v.push(new Dr)):(p.indexOf(Y.EAN_13)>-1&&v.push(new Ge),p.indexOf(Y.UPC_A)>-1&&v.push(new ur),p.indexOf(Y.EAN_8)>-1&&v.push(new At),p.indexOf(Y.UPC_E)>-1&&v.push(new Dr)),this.readers=v}decodeRow(f,p,v){for(let _ of this.readers)try{const j=_.decodeRow(f,p,v),E=j.getBarcodeFormat()===Y.EAN_13&&j.getText().charAt(0)==="0",D=v==null?null:v.get(W.POSSIBLE_FORMATS),z=D==null||D.includes(Y.UPC_A);if(E&&z){const X=j.getRawBytes(),oe=new J(j.getText().substring(1),X,X?X.length:null,j.getResultPoints(),Y.UPC_A);return oe.putAllMetadata(j.getResultMetadata()),oe}return j}catch{}throw new se}reset(){for(let f of this.readers)f.reset()}}class Xt extends rr{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(f,p){for(let v=0;v<p.length;v++)if(rr.patternMatchVariance(f,p[v],Xt.MAX_INDIVIDUAL_VARIANCE)<Xt.MAX_AVG_VARIANCE)return v;throw new se}static count(f){return Je.sum(new Int32Array(f))}static increment(f,p){let v=0,_=p[0];for(let j=1;j<f.length;j++)p[j]>_&&(_=p[j],v=j);f[v]++}static decrement(f,p){let v=0,_=p[0];for(let j=1;j<f.length;j++)p[j]<_&&(_=p[j],v=j);f[v]--}static isFinderPattern(f){let p=f[0]+f[1],v=p+f[2]+f[3],_=p/v;if(_>=Xt.MIN_FINDER_PATTERN_RATIO&&_<=Xt.MAX_FINDER_PATTERN_RATIO){let j=Number.MAX_SAFE_INTEGER,E=Number.MIN_SAFE_INTEGER;for(let D of f)D>E&&(E=D),D<j&&(j=D);return E<10*j}return!1}}Xt.MAX_AVG_VARIANCE=.2,Xt.MAX_INDIVIDUAL_VARIANCE=.45,Xt.MIN_FINDER_PATTERN_RATIO=9.5/12,Xt.MAX_FINDER_PATTERN_RATIO=12.5/14;class Wr{constructor(f,p){this.value=f,this.checksumPortion=p}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(f){if(!(f instanceof Wr))return!1;const p=f;return this.value===p.value&&this.checksumPortion===p.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class cr{constructor(f,p,v,_,j){this.value=f,this.startEnd=p,this.value=f,this.startEnd=p,this.resultPoints=new Array,this.resultPoints.push(new Ke(v,j)),this.resultPoints.push(new Ke(_,j))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(f){if(!(f instanceof cr))return!1;const p=f;return this.value===p.value}hashCode(){return this.value}}class pr{constructor(){}static getRSSvalue(f,p,v){let _=0;for(let z of f)_+=z;let j=0,E=0,D=f.length;for(let z=0;z<D-1;z++){let X;for(X=1,E|=1<<z;X<f[z];X++,E&=~(1<<z)){let oe=pr.combins(_-X-1,D-z-2);if(v&&E===0&&_-X-(D-z-1)>=D-z-1&&(oe-=pr.combins(_-X-(D-z),D-z-2)),D-z-1>1){let we=0;for(let Oe=_-X-(D-z-2);Oe>p;Oe--)we+=pr.combins(_-X-Oe-1,D-z-3);oe-=we*(D-1-z)}else _-X>p&&oe--;j+=oe}_-=X}return j}static combins(f,p){let v,_;f-p>p?(_=p,v=f-p):(_=f-p,v=p);let j=1,E=1;for(let D=f;D>v;D--)j*=D,E<=_&&(j/=E,E++);for(;E<=_;)j/=E,E++;return j}}class Rr{static buildBitArray(f){let p=f.length*2-1;f[f.length-1].getRightChar()==null&&(p-=1);let v=12*p,_=new P(v),j=0,D=f[0].getRightChar().getValue();for(let z=11;z>=0;--z)(D&1<<z)!=0&&_.set(j),j++;for(let z=1;z<f.length;++z){let X=f[z],oe=X.getLeftChar().getValue();for(let we=11;we>=0;--we)(oe&1<<we)!=0&&_.set(j),j++;if(X.getRightChar()!=null){let we=X.getRightChar().getValue();for(let Oe=11;Oe>=0;--Oe)(we&1<<Oe)!=0&&_.set(j),j++}}return _}}class Ir{constructor(f,p){p?this.decodedInformation=null:(this.finished=f,this.decodedInformation=p)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class Nn{constructor(f){this.newPosition=f}getNewPosition(){return this.newPosition}}class Mr extends Nn{constructor(f,p){super(f),this.value=p}getValue(){return this.value}isFNC1(){return this.value===Mr.FNC1}}Mr.FNC1="$";class Gr extends Nn{constructor(f,p,v){super(f),v?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=p}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class Ne extends Nn{constructor(f,p,v){if(super(f),p<0||p>10||v<0||v>10)throw new R;this.firstDigit=p,this.secondDigit=v}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===Ne.FNC1}isSecondDigitFNC1(){return this.secondDigit===Ne.FNC1}isAnyFNC1(){return this.firstDigit===Ne.FNC1||this.secondDigit===Ne.FNC1}}Ne.FNC1=10;class Me{constructor(){}static parseFieldsInGeneralPurpose(f){if(!f)return null;if(f.length<2)throw new se;let p=f.substring(0,2);for(let j of Me.TWO_DIGIT_DATA_LENGTH)if(j[0]===p)return j[1]===Me.VARIABLE_LENGTH?Me.processVariableAI(2,j[2],f):Me.processFixedAI(2,j[1],f);if(f.length<3)throw new se;let v=f.substring(0,3);for(let j of Me.THREE_DIGIT_DATA_LENGTH)if(j[0]===v)return j[1]===Me.VARIABLE_LENGTH?Me.processVariableAI(3,j[2],f):Me.processFixedAI(3,j[1],f);for(let j of Me.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(j[0]===v)return j[1]===Me.VARIABLE_LENGTH?Me.processVariableAI(4,j[2],f):Me.processFixedAI(4,j[1],f);if(f.length<4)throw new se;let _=f.substring(0,4);for(let j of Me.FOUR_DIGIT_DATA_LENGTH)if(j[0]===_)return j[1]===Me.VARIABLE_LENGTH?Me.processVariableAI(4,j[2],f):Me.processFixedAI(4,j[1],f);throw new se}static processFixedAI(f,p,v){if(v.length<f)throw new se;let _=v.substring(0,f);if(v.length<f+p)throw new se;let j=v.substring(f,f+p),E=v.substring(f+p),D="("+_+")"+j,z=Me.parseFieldsInGeneralPurpose(E);return z==null?D:D+z}static processVariableAI(f,p,v){let _=v.substring(0,f),j;v.length<f+p?j=v.length:j=f+p;let E=v.substring(f,j),D=v.substring(j),z="("+_+")"+E,X=Me.parseFieldsInGeneralPurpose(D);return X==null?z:z+X}}Me.VARIABLE_LENGTH=[],Me.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",Me.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",Me.VARIABLE_LENGTH,20],["22",Me.VARIABLE_LENGTH,29],["30",Me.VARIABLE_LENGTH,8],["37",Me.VARIABLE_LENGTH,8],["90",Me.VARIABLE_LENGTH,30],["91",Me.VARIABLE_LENGTH,30],["92",Me.VARIABLE_LENGTH,30],["93",Me.VARIABLE_LENGTH,30],["94",Me.VARIABLE_LENGTH,30],["95",Me.VARIABLE_LENGTH,30],["96",Me.VARIABLE_LENGTH,30],["97",Me.VARIABLE_LENGTH,3],["98",Me.VARIABLE_LENGTH,30],["99",Me.VARIABLE_LENGTH,30]],Me.THREE_DIGIT_DATA_LENGTH=[["240",Me.VARIABLE_LENGTH,30],["241",Me.VARIABLE_LENGTH,30],["242",Me.VARIABLE_LENGTH,6],["250",Me.VARIABLE_LENGTH,30],["251",Me.VARIABLE_LENGTH,30],["253",Me.VARIABLE_LENGTH,17],["254",Me.VARIABLE_LENGTH,20],["400",Me.VARIABLE_LENGTH,30],["401",Me.VARIABLE_LENGTH,30],["402",17],["403",Me.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",Me.VARIABLE_LENGTH,20],["421",Me.VARIABLE_LENGTH,15],["422",3],["423",Me.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],Me.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",Me.VARIABLE_LENGTH,15],["391",Me.VARIABLE_LENGTH,18],["392",Me.VARIABLE_LENGTH,15],["393",Me.VARIABLE_LENGTH,18],["703",Me.VARIABLE_LENGTH,30]],Me.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",Me.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",Me.VARIABLE_LENGTH,20],["8003",Me.VARIABLE_LENGTH,30],["8004",Me.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",Me.VARIABLE_LENGTH,30],["8008",Me.VARIABLE_LENGTH,12],["8018",18],["8020",Me.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",Me.VARIABLE_LENGTH,70],["8200",Me.VARIABLE_LENGTH,70]];class Re{constructor(f){this.buffer=new Z,this.information=f}decodeAllCodes(f,p){let v=p,_=null;do{let j=this.decodeGeneralPurposeField(v,_),E=Me.parseFieldsInGeneralPurpose(j.getNewString());if(E!=null&&f.append(E),j.isRemaining()?_=""+j.getRemainingValue():_=null,v===j.getNewPosition())break;v=j.getNewPosition()}while(!0);return f.toString()}isStillNumeric(f){if(f+7>this.information.getSize())return f+4<=this.information.getSize();for(let p=f;p<f+3;++p)if(this.information.get(p))return!0;return this.information.get(f+3)}decodeNumeric(f){if(f+7>this.information.getSize()){let j=this.extractNumericValueFromBitArray(f,4);return j===0?new Ne(this.information.getSize(),Ne.FNC1,Ne.FNC1):new Ne(this.information.getSize(),j-1,Ne.FNC1)}let p=this.extractNumericValueFromBitArray(f,7),v=(p-8)/11,_=(p-8)%11;return new Ne(f+7,v,_)}extractNumericValueFromBitArray(f,p){return Re.extractNumericValueFromBitArray(this.information,f,p)}static extractNumericValueFromBitArray(f,p,v){let _=0;for(let j=0;j<v;++j)f.get(p+j)&&(_|=1<<v-j-1);return _}decodeGeneralPurposeField(f,p){this.buffer.setLengthToZero(),p!=null&&this.buffer.append(p),this.current.setPosition(f);let v=this.parseBlocks();return v!=null&&v.isRemaining()?new Gr(this.current.getPosition(),this.buffer.toString(),v.getRemainingValue()):new Gr(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let f,p;do{let v=this.current.getPosition();if(this.current.isAlpha()?(p=this.parseAlphaBlock(),f=p.isFinished()):this.current.isIsoIec646()?(p=this.parseIsoIec646Block(),f=p.isFinished()):(p=this.parseNumericBlock(),f=p.isFinished()),!(v!==this.current.getPosition())&&!f)break}while(!f);return p.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let f=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(f.getNewPosition()),f.isFirstDigitFNC1()){let p;return f.isSecondDigitFNC1()?p=new Gr(this.current.getPosition(),this.buffer.toString()):p=new Gr(this.current.getPosition(),this.buffer.toString(),f.getSecondDigit()),new Ir(!0,p)}if(this.buffer.append(f.getFirstDigit()),f.isSecondDigitFNC1()){let p=new Gr(this.current.getPosition(),this.buffer.toString());return new Ir(!0,p)}this.buffer.append(f.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Ir(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let f=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(f.getNewPosition()),f.isFNC1()){let p=new Gr(this.current.getPosition(),this.buffer.toString());return new Ir(!0,p)}this.buffer.append(f.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Ir(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let f=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(f.getNewPosition()),f.isFNC1()){let p=new Gr(this.current.getPosition(),this.buffer.toString());return new Ir(!0,p)}this.buffer.append(f.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Ir(!1)}isStillIsoIec646(f){if(f+5>this.information.getSize())return!1;let p=this.extractNumericValueFromBitArray(f,5);if(p>=5&&p<16)return!0;if(f+7>this.information.getSize())return!1;let v=this.extractNumericValueFromBitArray(f,7);if(v>=64&&v<116)return!0;if(f+8>this.information.getSize())return!1;let _=this.extractNumericValueFromBitArray(f,8);return _>=232&&_<253}decodeIsoIec646(f){let p=this.extractNumericValueFromBitArray(f,5);if(p===15)return new Mr(f+5,Mr.FNC1);if(p>=5&&p<15)return new Mr(f+5,"0"+(p-5));let v=this.extractNumericValueFromBitArray(f,7);if(v>=64&&v<90)return new Mr(f+7,""+(v+1));if(v>=90&&v<116)return new Mr(f+7,""+(v+7));let _=this.extractNumericValueFromBitArray(f,8),j;switch(_){case 232:j="!";break;case 233:j='"';break;case 234:j="%";break;case 235:j="&";break;case 236:j="'";break;case 237:j="(";break;case 238:j=")";break;case 239:j="*";break;case 240:j="+";break;case 241:j=",";break;case 242:j="-";break;case 243:j=".";break;case 244:j="/";break;case 245:j=":";break;case 246:j=";";break;case 247:j="<";break;case 248:j="=";break;case 249:j=">";break;case 250:j="?";break;case 251:j="_";break;case 252:j=" ";break;default:throw new R}return new Mr(f+8,j)}isStillAlpha(f){if(f+5>this.information.getSize())return!1;let p=this.extractNumericValueFromBitArray(f,5);if(p>=5&&p<16)return!0;if(f+6>this.information.getSize())return!1;let v=this.extractNumericValueFromBitArray(f,6);return v>=16&&v<63}decodeAlphanumeric(f){let p=this.extractNumericValueFromBitArray(f,5);if(p===15)return new Mr(f+5,Mr.FNC1);if(p>=5&&p<15)return new Mr(f+5,"0"+(p-5));let v=this.extractNumericValueFromBitArray(f,6);if(v>=32&&v<58)return new Mr(f+6,""+(v+33));let _;switch(v){case 58:_="*";break;case 59:_=",";break;case 60:_="-";break;case 61:_=".";break;case 62:_="/";break;default:throw new ge("Decoding invalid alphanumeric value: "+v)}return new Mr(f+6,_)}isAlphaTo646ToAlphaLatch(f){if(f+1>this.information.getSize())return!1;for(let p=0;p<5&&p+f<this.information.getSize();++p)if(p===2){if(!this.information.get(f+2))return!1}else if(this.information.get(f+p))return!1;return!0}isAlphaOr646ToNumericLatch(f){if(f+3>this.information.getSize())return!1;for(let p=f;p<f+3;++p)if(this.information.get(p))return!1;return!0}isNumericToAlphaNumericLatch(f){if(f+1>this.information.getSize())return!1;for(let p=0;p<4&&p+f<this.information.getSize();++p)if(this.information.get(f+p))return!1;return!0}}class Ce{constructor(f){this.information=f,this.generalDecoder=new Re(f)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class Ue extends Ce{constructor(f){super(f)}encodeCompressedGtin(f,p){f.append("(01)");let v=f.length();f.append("9"),this.encodeCompressedGtinWithoutAI(f,p,v)}encodeCompressedGtinWithoutAI(f,p,v){for(let _=0;_<4;++_){let j=this.getGeneralDecoder().extractNumericValueFromBitArray(p+10*_,10);j/100===0&&f.append("0"),j/10===0&&f.append("0"),f.append(j)}Ue.appendCheckDigit(f,v)}static appendCheckDigit(f,p){let v=0;for(let _=0;_<13;_++){let j=f.charAt(_+p).charCodeAt(0)-48;v+=(_&1)===0?3*j:j}v=10-v%10,v===10&&(v=0),f.append(v)}}Ue.GTIN_SIZE=40;class de extends Ue{constructor(f){super(f)}parseInformation(){let f=new Z;f.append("(01)");let p=f.length(),v=this.getGeneralDecoder().extractNumericValueFromBitArray(de.HEADER_SIZE,4);return f.append(v),this.encodeCompressedGtinWithoutAI(f,de.HEADER_SIZE+4,p),this.getGeneralDecoder().decodeAllCodes(f,de.HEADER_SIZE+44)}}de.HEADER_SIZE=4;class qe extends Ce{constructor(f){super(f)}parseInformation(){let f=new Z;return this.getGeneralDecoder().decodeAllCodes(f,qe.HEADER_SIZE)}}qe.HEADER_SIZE=5;class et extends Ue{constructor(f){super(f)}encodeCompressedWeight(f,p,v){let _=this.getGeneralDecoder().extractNumericValueFromBitArray(p,v);this.addWeightCode(f,_);let j=this.checkWeight(_),E=1e5;for(let D=0;D<5;++D)j/E===0&&f.append("0"),E/=10;f.append(j)}}class tt extends et{constructor(f){super(f)}parseInformation(){if(this.getInformation().getSize()!=tt.HEADER_SIZE+et.GTIN_SIZE+tt.WEIGHT_SIZE)throw new se;let f=new Z;return this.encodeCompressedGtin(f,tt.HEADER_SIZE),this.encodeCompressedWeight(f,tt.HEADER_SIZE+et.GTIN_SIZE,tt.WEIGHT_SIZE),f.toString()}}tt.HEADER_SIZE=5,tt.WEIGHT_SIZE=15;class Ae extends tt{constructor(f){super(f)}addWeightCode(f,p){f.append("(3103)")}checkWeight(f){return f}}class Xe extends tt{constructor(f){super(f)}addWeightCode(f,p){p<1e4?f.append("(3202)"):f.append("(3203)")}checkWeight(f){return f<1e4?f:f-1e4}}class mt extends Ue{constructor(f){super(f)}parseInformation(){if(this.getInformation().getSize()<mt.HEADER_SIZE+Ue.GTIN_SIZE)throw new se;let f=new Z;this.encodeCompressedGtin(f,mt.HEADER_SIZE);let p=this.getGeneralDecoder().extractNumericValueFromBitArray(mt.HEADER_SIZE+Ue.GTIN_SIZE,mt.LAST_DIGIT_SIZE);f.append("(392"),f.append(p),f.append(")");let v=this.getGeneralDecoder().decodeGeneralPurposeField(mt.HEADER_SIZE+Ue.GTIN_SIZE+mt.LAST_DIGIT_SIZE,null);return f.append(v.getNewString()),f.toString()}}mt.HEADER_SIZE=8,mt.LAST_DIGIT_SIZE=2;class Tt extends Ue{constructor(f){super(f)}parseInformation(){if(this.getInformation().getSize()<Tt.HEADER_SIZE+Ue.GTIN_SIZE)throw new se;let f=new Z;this.encodeCompressedGtin(f,Tt.HEADER_SIZE);let p=this.getGeneralDecoder().extractNumericValueFromBitArray(Tt.HEADER_SIZE+Ue.GTIN_SIZE,Tt.LAST_DIGIT_SIZE);f.append("(393"),f.append(p),f.append(")");let v=this.getGeneralDecoder().extractNumericValueFromBitArray(Tt.HEADER_SIZE+Ue.GTIN_SIZE+Tt.LAST_DIGIT_SIZE,Tt.FIRST_THREE_DIGITS_SIZE);v/100==0&&f.append("0"),v/10==0&&f.append("0"),f.append(v);let _=this.getGeneralDecoder().decodeGeneralPurposeField(Tt.HEADER_SIZE+Ue.GTIN_SIZE+Tt.LAST_DIGIT_SIZE+Tt.FIRST_THREE_DIGITS_SIZE,null);return f.append(_.getNewString()),f.toString()}}Tt.HEADER_SIZE=8,Tt.LAST_DIGIT_SIZE=2,Tt.FIRST_THREE_DIGITS_SIZE=10;class Rt extends et{constructor(f,p,v){super(f),this.dateCode=v,this.firstAIdigits=p}parseInformation(){if(this.getInformation().getSize()!=Rt.HEADER_SIZE+Rt.GTIN_SIZE+Rt.WEIGHT_SIZE+Rt.DATE_SIZE)throw new se;let f=new Z;return this.encodeCompressedGtin(f,Rt.HEADER_SIZE),this.encodeCompressedWeight(f,Rt.HEADER_SIZE+Rt.GTIN_SIZE,Rt.WEIGHT_SIZE),this.encodeCompressedDate(f,Rt.HEADER_SIZE+Rt.GTIN_SIZE+Rt.WEIGHT_SIZE),f.toString()}encodeCompressedDate(f,p){let v=this.getGeneralDecoder().extractNumericValueFromBitArray(p,Rt.DATE_SIZE);if(v==38400)return;f.append("("),f.append(this.dateCode),f.append(")");let _=v%32;v/=32;let j=v%12+1;v/=12;let E=v;E/10==0&&f.append("0"),f.append(E),j/10==0&&f.append("0"),f.append(j),_/10==0&&f.append("0"),f.append(_)}addWeightCode(f,p){f.append("("),f.append(this.firstAIdigits),f.append(p/1e5),f.append(")")}checkWeight(f){return f%1e5}}Rt.HEADER_SIZE=8,Rt.WEIGHT_SIZE=20,Rt.DATE_SIZE=16;function Yt(ye){try{if(ye.get(1))return new de(ye);if(!ye.get(2))return new qe(ye);switch(Re.extractNumericValueFromBitArray(ye,1,4)){case 4:return new Ae(ye);case 5:return new Xe(ye)}switch(Re.extractNumericValueFromBitArray(ye,1,5)){case 12:return new mt(ye);case 13:return new Tt(ye)}switch(Re.extractNumericValueFromBitArray(ye,1,7)){case 56:return new Rt(ye,"310","11");case 57:return new Rt(ye,"320","11");case 58:return new Rt(ye,"310","13");case 59:return new Rt(ye,"320","13");case 60:return new Rt(ye,"310","15");case 61:return new Rt(ye,"320","15");case 62:return new Rt(ye,"310","17");case 63:return new Rt(ye,"320","17")}}catch(f){throw console.log(f),new ge("unknown decoder: "+ye)}}class or{constructor(f,p,v,_){this.leftchar=f,this.rightchar=p,this.finderpattern=v,this.maybeLast=_}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(f,p){return f instanceof or?or.equalsOrNull(f.leftchar,p.leftchar)&&or.equalsOrNull(f.rightchar,p.rightchar)&&or.equalsOrNull(f.finderpattern,p.finderpattern):!1}static equalsOrNull(f,p){return f===null?p===null:or.equals(f,p)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class Cr{constructor(f,p,v){this.pairs=f,this.rowNumber=p,this.wasReversed=v}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(f){return this.checkEqualitity(this,f)}toString(){return"{ "+this.pairs+" }"}equals(f,p){return f instanceof Cr?this.checkEqualitity(f,p)&&f.wasReversed===p.wasReversed:!1}checkEqualitity(f,p){if(!f||!p)return;let v;return f.forEach((_,j)=>{p.forEach(E=>{_.getLeftChar().getValue()===E.getLeftChar().getValue()&&_.getRightChar().getValue()===E.getRightChar().getValue()&&_.getFinderPatter().getValue()===E.getFinderPatter().getValue()&&(v=!0)})}),v}}class Et extends Xt{constructor(f){super(...arguments),this.pairs=new Array(Et.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=f===!0}decodeRow(f,p,v){this.pairs.length=0,this.startFromEven=!1;try{return Et.constructResult(this.decodeRow2pairs(f,p))}catch(_){this.verbose&&console.log(_)}return this.pairs.length=0,this.startFromEven=!0,Et.constructResult(this.decodeRow2pairs(f,p))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(f,p){let v=!1;for(;!v;)try{this.pairs.push(this.retrieveNextPair(p,this.pairs,f))}catch(j){if(j instanceof se){if(!this.pairs.length)throw new se;v=!0}}if(this.checkChecksum())return this.pairs;let _;if(this.rows.length?_=!0:_=!1,this.storeRow(f,!1),_){let j=this.checkRowsBoolean(!1);if(j!=null||(j=this.checkRowsBoolean(!0),j!=null))return j}throw new se}checkRowsBoolean(f){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,f&&(this.rows=this.rows.reverse());let p=null;try{p=this.checkRows(new Array,0)}catch(v){this.verbose&&console.log(v)}return f&&(this.rows=this.rows.reverse()),p}checkRows(f,p){for(let v=p;v<this.rows.length;v++){let _=this.rows[v];this.pairs.length=0;for(let E of f)this.pairs.push(E.getPairs());if(this.pairs.push(_.getPairs()),!Et.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let j=new Array(f);j.push(_);try{return this.checkRows(j,v+1)}catch(E){this.verbose&&console.log(E)}}throw new se}static isValidSequence(f){for(let p of Et.FINDER_PATTERN_SEQUENCES){if(f.length>p.length)continue;let v=!0;for(let _=0;_<f.length;_++)if(f[_].getFinderPattern().getValue()!=p[_]){v=!1;break}if(v)return!0}return!1}storeRow(f,p){let v=0,_=!1,j=!1;for(;v<this.rows.length;){let E=this.rows[v];if(E.getRowNumber()>f){j=E.isEquivalent(this.pairs);break}_=E.isEquivalent(this.pairs),v++}j||_||Et.isPartialRow(this.pairs,this.rows)||(this.rows.push(v,new Cr(this.pairs,f,p)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(f,p){for(let v of p)if(v.getPairs().length!==f.length){for(let _ of v.getPairs())for(let j of f)if(or.equals(_,j))break}}static isPartialRow(f,p){for(let v of p){let _=!0;for(let j of f){let E=!1;for(let D of v.getPairs())if(j.equals(D)){E=!0;break}if(!E){_=!1;break}}if(_)return!0}return!1}getRows(){return this.rows}static constructResult(f){let p=Rr.buildBitArray(f),_=Yt(p).parseInformation(),j=f[0].getFinderPattern().getResultPoints(),E=f[f.length-1].getFinderPattern().getResultPoints(),D=[j[0],j[1],E[0],E[1]];return new J(_,null,null,D,Y.RSS_EXPANDED,null)}checkChecksum(){let f=this.pairs.get(0),p=f.getLeftChar(),v=f.getRightChar();if(v==null)return!1;let _=v.getChecksumPortion(),j=2;for(let D=1;D<this.pairs.size();++D){let z=this.pairs.get(D);_+=z.getLeftChar().getChecksumPortion(),j++;let X=z.getRightChar();X!=null&&(_+=X.getChecksumPortion(),j++)}return _%=211,211*(j-4)+_==p.getValue()}static getNextSecondBar(f,p){let v;return f.get(p)?(v=f.getNextUnset(p),v=f.getNextSet(v)):(v=f.getNextSet(p),v=f.getNextUnset(v)),v}retrieveNextPair(f,p,v){let _=p.length%2==0;this.startFromEven&&(_=!_);let j,E=!0,D=-1;do this.findNextPair(f,p,D),j=this.parseFoundFinderPattern(f,v,_),j==null?D=Et.getNextSecondBar(f,this.startEnd[0]):E=!1;while(E);let z=this.decodeDataCharacter(f,j,_,!0);if(!this.isEmptyPair(p)&&p[p.length-1].mustBeLast())throw new se;let X;try{X=this.decodeDataCharacter(f,j,_,!1)}catch(oe){X=null,this.verbose&&console.log(oe)}return new or(z,X,j,!0)}isEmptyPair(f){return f.length===0}findNextPair(f,p,v){let _=this.getDecodeFinderCounters();_[0]=0,_[1]=0,_[2]=0,_[3]=0;let j=f.getSize(),E;v>=0?E=v:this.isEmptyPair(p)?E=0:E=p[p.length-1].getFinderPattern().getStartEnd()[1];let D=p.length%2!=0;this.startFromEven&&(D=!D);let z=!1;for(;E<j&&(z=!f.get(E),!!z);)E++;let X=0,oe=E;for(let we=E;we<j;we++)if(f.get(we)!=z)_[X]++;else{if(X==3){if(D&&Et.reverseCounters(_),Et.isFinderPattern(_)){this.startEnd[0]=oe,this.startEnd[1]=we;return}D&&Et.reverseCounters(_),oe+=_[0]+_[1],_[0]=_[2],_[1]=_[3],_[2]=0,_[3]=0,X--}else X++;_[X]=1,z=!z}throw new se}static reverseCounters(f){let p=f.length;for(let v=0;v<p/2;++v){let _=f[v];f[v]=f[p-v-1],f[p-v-1]=_}}parseFoundFinderPattern(f,p,v){let _,j,E;if(v){let X=this.startEnd[0]-1;for(;X>=0&&!f.get(X);)X--;X++,_=this.startEnd[0]-X,j=X,E=this.startEnd[1]}else j=this.startEnd[0],E=f.getNextUnset(this.startEnd[1]+1),_=E-this.startEnd[1];let D=this.getDecodeFinderCounters();y.arraycopy(D,0,D,1,D.length-1),D[0]=_;let z;try{z=this.parseFinderValue(D,Et.FINDER_PATTERNS)}catch{return null}return new cr(z,[j,E],j,E,p)}decodeDataCharacter(f,p,v,_){let j=this.getDataCharacterCounters();for(let Ea=0;Ea<j.length;Ea++)j[Ea]=0;if(_)Et.recordPatternInReverse(f,p.getStartEnd()[0],j);else{Et.recordPattern(f,p.getStartEnd()[1],j);for(let Ea=0,ni=j.length-1;Ea<ni;Ea++,ni--){let po=j[Ea];j[Ea]=j[ni],j[ni]=po}}let E=17,D=Je.sum(new Int32Array(j))/E,z=(p.getStartEnd()[1]-p.getStartEnd()[0])/15;if(Math.abs(D-z)/z>.3)throw new se;let X=this.getOddCounts(),oe=this.getEvenCounts(),we=this.getOddRoundingErrors(),Oe=this.getEvenRoundingErrors();for(let Ea=0;Ea<j.length;Ea++){let ni=1*j[Ea]/D,po=ni+.5;if(po<1){if(ni<.3)throw new se;po=1}else if(po>8){if(ni>8.7)throw new se;po=8}let Dd=Ea/2;(Ea&1)==0?(X[Dd]=po,we[Dd]=ni-po):(oe[Dd]=po,Oe[Dd]=ni-po)}this.adjustOddEvenCounts(E);let He=4*p.getValue()+(v?0:2)+(_?0:1)-1,rt=0,lt=0;for(let Ea=X.length-1;Ea>=0;Ea--){if(Et.isNotA1left(p,v,_)){let ni=Et.WEIGHTS[He][2*Ea];lt+=X[Ea]*ni}rt+=X[Ea]}let xt=0;for(let Ea=oe.length-1;Ea>=0;Ea--)if(Et.isNotA1left(p,v,_)){let ni=Et.WEIGHTS[He][2*Ea+1];xt+=oe[Ea]*ni}let St=lt+xt;if((rt&1)!=0||rt>13||rt<4)throw new se;let Vt=(13-rt)/2,Wt=Et.SYMBOL_WIDEST[Vt],qt=9-Wt,on=pr.getRSSvalue(X,Wt,!0),gn=pr.getRSSvalue(oe,qt,!1),es=Et.EVEN_TOTAL_SUBSET[Vt],_i=Et.GSUM[Vt],ri=on*es+gn+_i;return new Wr(ri,St)}static isNotA1left(f,p,v){return!(f.getValue()==0&&p&&v)}adjustOddEvenCounts(f){let p=Je.sum(new Int32Array(this.getOddCounts())),v=Je.sum(new Int32Array(this.getEvenCounts())),_=!1,j=!1;p>13?j=!0:p<4&&(_=!0);let E=!1,D=!1;v>13?D=!0:v<4&&(E=!0);let z=p+v-f,X=(p&1)==1,oe=(v&1)==0;if(z==1)if(X){if(oe)throw new se;j=!0}else{if(!oe)throw new se;D=!0}else if(z==-1)if(X){if(oe)throw new se;_=!0}else{if(!oe)throw new se;E=!0}else if(z==0){if(X){if(!oe)throw new se;p<v?(_=!0,D=!0):(j=!0,E=!0)}else if(oe)throw new se}else throw new se;if(_){if(j)throw new se;Et.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(j&&Et.decrement(this.getOddCounts(),this.getOddRoundingErrors()),E){if(D)throw new se;Et.increment(this.getEvenCounts(),this.getOddRoundingErrors())}D&&Et.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Et.SYMBOL_WIDEST=[7,5,4,3,1],Et.EVEN_TOTAL_SUBSET=[4,20,52,104,204],Et.GSUM=[0,348,1388,2948,3988],Et.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],Et.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],Et.FINDER_PAT_A=0,Et.FINDER_PAT_B=1,Et.FINDER_PAT_C=2,Et.FINDER_PAT_D=3,Et.FINDER_PAT_E=4,Et.FINDER_PAT_F=5,Et.FINDER_PATTERN_SEQUENCES=[[Et.FINDER_PAT_A,Et.FINDER_PAT_A],[Et.FINDER_PAT_A,Et.FINDER_PAT_B,Et.FINDER_PAT_B],[Et.FINDER_PAT_A,Et.FINDER_PAT_C,Et.FINDER_PAT_B,Et.FINDER_PAT_D],[Et.FINDER_PAT_A,Et.FINDER_PAT_E,Et.FINDER_PAT_B,Et.FINDER_PAT_D,Et.FINDER_PAT_C],[Et.FINDER_PAT_A,Et.FINDER_PAT_E,Et.FINDER_PAT_B,Et.FINDER_PAT_D,Et.FINDER_PAT_D,Et.FINDER_PAT_F],[Et.FINDER_PAT_A,Et.FINDER_PAT_E,Et.FINDER_PAT_B,Et.FINDER_PAT_D,Et.FINDER_PAT_E,Et.FINDER_PAT_F,Et.FINDER_PAT_F],[Et.FINDER_PAT_A,Et.FINDER_PAT_A,Et.FINDER_PAT_B,Et.FINDER_PAT_B,Et.FINDER_PAT_C,Et.FINDER_PAT_C,Et.FINDER_PAT_D,Et.FINDER_PAT_D],[Et.FINDER_PAT_A,Et.FINDER_PAT_A,Et.FINDER_PAT_B,Et.FINDER_PAT_B,Et.FINDER_PAT_C,Et.FINDER_PAT_C,Et.FINDER_PAT_D,Et.FINDER_PAT_E,Et.FINDER_PAT_E],[Et.FINDER_PAT_A,Et.FINDER_PAT_A,Et.FINDER_PAT_B,Et.FINDER_PAT_B,Et.FINDER_PAT_C,Et.FINDER_PAT_C,Et.FINDER_PAT_D,Et.FINDER_PAT_E,Et.FINDER_PAT_F,Et.FINDER_PAT_F],[Et.FINDER_PAT_A,Et.FINDER_PAT_A,Et.FINDER_PAT_B,Et.FINDER_PAT_B,Et.FINDER_PAT_C,Et.FINDER_PAT_D,Et.FINDER_PAT_D,Et.FINDER_PAT_E,Et.FINDER_PAT_E,Et.FINDER_PAT_F,Et.FINDER_PAT_F]],Et.MAX_PAIRS=11;class dn extends Wr{constructor(f,p,v){super(f,p),this.count=0,this.finderPattern=v}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Zr extends Xt{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(f,p,v){const _=this.decodePair(p,!1,f,v);Zr.addOrTally(this.possibleLeftPairs,_),p.reverse();let j=this.decodePair(p,!0,f,v);Zr.addOrTally(this.possibleRightPairs,j),p.reverse();for(let E of this.possibleLeftPairs)if(E.getCount()>1){for(let D of this.possibleRightPairs)if(D.getCount()>1&&Zr.checkChecksum(E,D))return Zr.constructResult(E,D)}throw new se}static addOrTally(f,p){if(p==null)return;let v=!1;for(let _ of f)if(_.getValue()===p.getValue()){_.incrementCount(),v=!0;break}v||f.push(p)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(f,p){let v=4537077*f.getValue()+p.getValue(),_=new String(v).toString(),j=new Z;for(let X=13-_.length;X>0;X--)j.append("0");j.append(_);let E=0;for(let X=0;X<13;X++){let oe=j.charAt(X).charCodeAt(0)-48;E+=(X&1)===0?3*oe:oe}E=10-E%10,E===10&&(E=0),j.append(E.toString());let D=f.getFinderPattern().getResultPoints(),z=p.getFinderPattern().getResultPoints();return new J(j.toString(),null,0,[D[0],D[1],z[0],z[1]],Y.RSS_14,new Date().getTime())}static checkChecksum(f,p){let v=(f.getChecksumPortion()+16*p.getChecksumPortion())%79,_=9*f.getFinderPattern().getValue()+p.getFinderPattern().getValue();return _>72&&_--,_>8&&_--,v===_}decodePair(f,p,v,_){try{let j=this.findFinderPattern(f,p),E=this.parseFoundFinderPattern(f,v,p,j),D=_==null?null:_.get(W.NEED_RESULT_POINT_CALLBACK);if(D!=null){let oe=(j[0]+j[1])/2;p&&(oe=f.getSize()-1-oe),D.foundPossibleResultPoint(new Ke(oe,v))}let z=this.decodeDataCharacter(f,E,!0),X=this.decodeDataCharacter(f,E,!1);return new dn(1597*z.getValue()+X.getValue(),z.getChecksumPortion()+4*X.getChecksumPortion(),E)}catch{return null}}decodeDataCharacter(f,p,v){let _=this.getDataCharacterCounters();for(let xt=0;xt<_.length;xt++)_[xt]=0;if(v)rr.recordPatternInReverse(f,p.getStartEnd()[0],_);else{rr.recordPattern(f,p.getStartEnd()[1]+1,_);for(let xt=0,St=_.length-1;xt<St;xt++,St--){let Vt=_[xt];_[xt]=_[St],_[St]=Vt}}let j=v?16:15,E=Je.sum(new Int32Array(_))/j,D=this.getOddCounts(),z=this.getEvenCounts(),X=this.getOddRoundingErrors(),oe=this.getEvenRoundingErrors();for(let xt=0;xt<_.length;xt++){let St=_[xt]/E,Vt=Math.floor(St+.5);Vt<1?Vt=1:Vt>8&&(Vt=8);let Wt=Math.floor(xt/2);(xt&1)===0?(D[Wt]=Vt,X[Wt]=St-Vt):(z[Wt]=Vt,oe[Wt]=St-Vt)}this.adjustOddEvenCounts(v,j);let we=0,Oe=0;for(let xt=D.length-1;xt>=0;xt--)Oe*=9,Oe+=D[xt],we+=D[xt];let He=0,rt=0;for(let xt=z.length-1;xt>=0;xt--)He*=9,He+=z[xt],rt+=z[xt];let lt=Oe+3*He;if(v){if((we&1)!==0||we>12||we<4)throw new se;let xt=(12-we)/2,St=Zr.OUTSIDE_ODD_WIDEST[xt],Vt=9-St,Wt=pr.getRSSvalue(D,St,!1),qt=pr.getRSSvalue(z,Vt,!0),on=Zr.OUTSIDE_EVEN_TOTAL_SUBSET[xt],gn=Zr.OUTSIDE_GSUM[xt];return new Wr(Wt*on+qt+gn,lt)}else{if((rt&1)!==0||rt>10||rt<4)throw new se;let xt=(10-rt)/2,St=Zr.INSIDE_ODD_WIDEST[xt],Vt=9-St,Wt=pr.getRSSvalue(D,St,!0),qt=pr.getRSSvalue(z,Vt,!1),on=Zr.INSIDE_ODD_TOTAL_SUBSET[xt],gn=Zr.INSIDE_GSUM[xt];return new Wr(qt*on+Wt+gn,lt)}}findFinderPattern(f,p){let v=this.getDecodeFinderCounters();v[0]=0,v[1]=0,v[2]=0,v[3]=0;let _=f.getSize(),j=!1,E=0;for(;E<_&&(j=!f.get(E),p!==j);)E++;let D=0,z=E;for(let X=E;X<_;X++)if(f.get(X)!==j)v[D]++;else{if(D===3){if(Xt.isFinderPattern(v))return[z,X];z+=v[0]+v[1],v[0]=v[2],v[1]=v[3],v[2]=0,v[3]=0,D--}else D++;v[D]=1,j=!j}throw new se}parseFoundFinderPattern(f,p,v,_){let j=f.get(_[0]),E=_[0]-1;for(;E>=0&&j!==f.get(E);)E--;E++;const D=_[0]-E,z=this.getDecodeFinderCounters(),X=new Int32Array(z.length);y.arraycopy(z,0,X,1,z.length-1),X[0]=D;const oe=this.parseFinderValue(X,Zr.FINDER_PATTERNS);let we=E,Oe=_[1];return v&&(we=f.getSize()-1-we,Oe=f.getSize()-1-Oe),new cr(oe,[E,_[1]],we,Oe,p)}adjustOddEvenCounts(f,p){let v=Je.sum(new Int32Array(this.getOddCounts())),_=Je.sum(new Int32Array(this.getEvenCounts())),j=!1,E=!1,D=!1,z=!1;f?(v>12?E=!0:v<4&&(j=!0),_>12?z=!0:_<4&&(D=!0)):(v>11?E=!0:v<5&&(j=!0),_>10?z=!0:_<4&&(D=!0));let X=v+_-p,oe=(v&1)===(f?1:0),we=(_&1)===1;if(X===1)if(oe){if(we)throw new se;E=!0}else{if(!we)throw new se;z=!0}else if(X===-1)if(oe){if(we)throw new se;j=!0}else{if(!we)throw new se;D=!0}else if(X===0){if(oe){if(!we)throw new se;v<_?(j=!0,z=!0):(E=!0,D=!0)}else if(we)throw new se}else throw new se;if(j){if(E)throw new se;Xt.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(E&&Xt.decrement(this.getOddCounts(),this.getOddRoundingErrors()),D){if(z)throw new se;Xt.increment(this.getEvenCounts(),this.getOddRoundingErrors())}z&&Xt.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Zr.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Zr.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Zr.OUTSIDE_GSUM=[0,161,961,2015,2715],Zr.INSIDE_GSUM=[0,336,1036,1516],Zr.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Zr.INSIDE_ODD_WIDEST=[2,4,6,8],Zr.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class ia extends rr{constructor(f,p){super(),this.readers=[],this.verbose=p===!0;const v=f?f.get(W.POSSIBLE_FORMATS):null,_=f&&f.get(W.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;v?((v.includes(Y.EAN_13)||v.includes(Y.UPC_A)||v.includes(Y.EAN_8)||v.includes(Y.UPC_E))&&this.readers.push(new jr(f)),v.includes(Y.CODE_39)&&this.readers.push(new br(_)),v.includes(Y.CODE_128)&&this.readers.push(new ft),v.includes(Y.ITF)&&this.readers.push(new yr),v.includes(Y.RSS_14)&&this.readers.push(new Zr),v.includes(Y.RSS_EXPANDED)&&this.readers.push(new Et(this.verbose))):(this.readers.push(new jr(f)),this.readers.push(new br),this.readers.push(new jr(f)),this.readers.push(new ft),this.readers.push(new yr),this.readers.push(new Zr),this.readers.push(new Et(this.verbose)))}decodeRow(f,p,v){for(let _=0;_<this.readers.length;_++)try{return this.readers[_].decodeRow(f,p,v)}catch{}throw new se}reset(){this.readers.forEach(f=>f.reset())}}class ta extends re{constructor(f=500,p){super(new ia(p),f,p)}}class Jr{constructor(f,p,v){this.ecCodewords=f,this.ecBlocks=[p],v&&this.ecBlocks.push(v)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class Fr{constructor(f,p){this.count=f,this.dataCodewords=p}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class rn{constructor(f,p,v,_,j,E){this.versionNumber=f,this.symbolSizeRows=p,this.symbolSizeColumns=v,this.dataRegionSizeRows=_,this.dataRegionSizeColumns=j,this.ecBlocks=E;let D=0;const z=E.getECCodewords(),X=E.getECBlocks();for(let oe of X)D+=oe.getCount()*(oe.getDataCodewords()+z);this.totalCodewords=D}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(f,p){if((f&1)!==0||(p&1)!==0)throw new R;for(let v of rn.VERSIONS)if(v.symbolSizeRows===f&&v.symbolSizeColumns===p)return v;throw new R}toString(){return""+this.versionNumber}static buildVersions(){return[new rn(1,10,10,8,8,new Jr(5,new Fr(1,3))),new rn(2,12,12,10,10,new Jr(7,new Fr(1,5))),new rn(3,14,14,12,12,new Jr(10,new Fr(1,8))),new rn(4,16,16,14,14,new Jr(12,new Fr(1,12))),new rn(5,18,18,16,16,new Jr(14,new Fr(1,18))),new rn(6,20,20,18,18,new Jr(18,new Fr(1,22))),new rn(7,22,22,20,20,new Jr(20,new Fr(1,30))),new rn(8,24,24,22,22,new Jr(24,new Fr(1,36))),new rn(9,26,26,24,24,new Jr(28,new Fr(1,44))),new rn(10,32,32,14,14,new Jr(36,new Fr(1,62))),new rn(11,36,36,16,16,new Jr(42,new Fr(1,86))),new rn(12,40,40,18,18,new Jr(48,new Fr(1,114))),new rn(13,44,44,20,20,new Jr(56,new Fr(1,144))),new rn(14,48,48,22,22,new Jr(68,new Fr(1,174))),new rn(15,52,52,24,24,new Jr(42,new Fr(2,102))),new rn(16,64,64,14,14,new Jr(56,new Fr(2,140))),new rn(17,72,72,16,16,new Jr(36,new Fr(4,92))),new rn(18,80,80,18,18,new Jr(48,new Fr(4,114))),new rn(19,88,88,20,20,new Jr(56,new Fr(4,144))),new rn(20,96,96,22,22,new Jr(68,new Fr(4,174))),new rn(21,104,104,24,24,new Jr(56,new Fr(6,136))),new rn(22,120,120,18,18,new Jr(68,new Fr(6,175))),new rn(23,132,132,20,20,new Jr(62,new Fr(8,163))),new rn(24,144,144,22,22,new Jr(62,new Fr(8,156),new Fr(2,155))),new rn(25,8,18,6,16,new Jr(7,new Fr(1,5))),new rn(26,8,32,6,14,new Jr(11,new Fr(1,10))),new rn(27,12,26,10,24,new Jr(14,new Fr(1,16))),new rn(28,12,36,10,16,new Jr(18,new Fr(1,22))),new rn(29,16,36,14,16,new Jr(24,new Fr(1,32))),new rn(30,16,48,14,22,new Jr(28,new Fr(1,49)))]}}rn.VERSIONS=rn.buildVersions();class ga{constructor(f){const p=f.getHeight();if(p<8||p>144||(p&1)!==0)throw new R;this.version=ga.readVersion(f),this.mappingBitMatrix=this.extractDataRegion(f),this.readMappingMatrix=new te(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(f){const p=f.getHeight(),v=f.getWidth();return rn.getVersionForDimensions(p,v)}readCodewords(){const f=new Int8Array(this.version.getTotalCodewords());let p=0,v=4,_=0;const j=this.mappingBitMatrix.getHeight(),E=this.mappingBitMatrix.getWidth();let D=!1,z=!1,X=!1,oe=!1;do if(v===j&&_===0&&!D)f[p++]=this.readCorner1(j,E)&255,v-=2,_+=2,D=!0;else if(v===j-2&&_===0&&(E&3)!==0&&!z)f[p++]=this.readCorner2(j,E)&255,v-=2,_+=2,z=!0;else if(v===j+4&&_===2&&(E&7)===0&&!X)f[p++]=this.readCorner3(j,E)&255,v-=2,_+=2,X=!0;else if(v===j-2&&_===0&&(E&7)===4&&!oe)f[p++]=this.readCorner4(j,E)&255,v-=2,_+=2,oe=!0;else{do v<j&&_>=0&&!this.readMappingMatrix.get(_,v)&&(f[p++]=this.readUtah(v,_,j,E)&255),v-=2,_+=2;while(v>=0&&_<E);v+=1,_+=3;do v>=0&&_<E&&!this.readMappingMatrix.get(_,v)&&(f[p++]=this.readUtah(v,_,j,E)&255),v+=2,_-=2;while(v<j&&_>=0);v+=3,_+=1}while(v<j||_<E);if(p!==this.version.getTotalCodewords())throw new R;return f}readModule(f,p,v,_){return f<0&&(f+=v,p+=4-(v+4&7)),p<0&&(p+=_,f+=4-(_+4&7)),this.readMappingMatrix.set(p,f),this.mappingBitMatrix.get(p,f)}readUtah(f,p,v,_){let j=0;return this.readModule(f-2,p-2,v,_)&&(j|=1),j<<=1,this.readModule(f-2,p-1,v,_)&&(j|=1),j<<=1,this.readModule(f-1,p-2,v,_)&&(j|=1),j<<=1,this.readModule(f-1,p-1,v,_)&&(j|=1),j<<=1,this.readModule(f-1,p,v,_)&&(j|=1),j<<=1,this.readModule(f,p-2,v,_)&&(j|=1),j<<=1,this.readModule(f,p-1,v,_)&&(j|=1),j<<=1,this.readModule(f,p,v,_)&&(j|=1),j}readCorner1(f,p){let v=0;return this.readModule(f-1,0,f,p)&&(v|=1),v<<=1,this.readModule(f-1,1,f,p)&&(v|=1),v<<=1,this.readModule(f-1,2,f,p)&&(v|=1),v<<=1,this.readModule(0,p-2,f,p)&&(v|=1),v<<=1,this.readModule(0,p-1,f,p)&&(v|=1),v<<=1,this.readModule(1,p-1,f,p)&&(v|=1),v<<=1,this.readModule(2,p-1,f,p)&&(v|=1),v<<=1,this.readModule(3,p-1,f,p)&&(v|=1),v}readCorner2(f,p){let v=0;return this.readModule(f-3,0,f,p)&&(v|=1),v<<=1,this.readModule(f-2,0,f,p)&&(v|=1),v<<=1,this.readModule(f-1,0,f,p)&&(v|=1),v<<=1,this.readModule(0,p-4,f,p)&&(v|=1),v<<=1,this.readModule(0,p-3,f,p)&&(v|=1),v<<=1,this.readModule(0,p-2,f,p)&&(v|=1),v<<=1,this.readModule(0,p-1,f,p)&&(v|=1),v<<=1,this.readModule(1,p-1,f,p)&&(v|=1),v}readCorner3(f,p){let v=0;return this.readModule(f-1,0,f,p)&&(v|=1),v<<=1,this.readModule(f-1,p-1,f,p)&&(v|=1),v<<=1,this.readModule(0,p-3,f,p)&&(v|=1),v<<=1,this.readModule(0,p-2,f,p)&&(v|=1),v<<=1,this.readModule(0,p-1,f,p)&&(v|=1),v<<=1,this.readModule(1,p-3,f,p)&&(v|=1),v<<=1,this.readModule(1,p-2,f,p)&&(v|=1),v<<=1,this.readModule(1,p-1,f,p)&&(v|=1),v}readCorner4(f,p){let v=0;return this.readModule(f-3,0,f,p)&&(v|=1),v<<=1,this.readModule(f-2,0,f,p)&&(v|=1),v<<=1,this.readModule(f-1,0,f,p)&&(v|=1),v<<=1,this.readModule(0,p-2,f,p)&&(v|=1),v<<=1,this.readModule(0,p-1,f,p)&&(v|=1),v<<=1,this.readModule(1,p-1,f,p)&&(v|=1),v<<=1,this.readModule(2,p-1,f,p)&&(v|=1),v<<=1,this.readModule(3,p-1,f,p)&&(v|=1),v}extractDataRegion(f){const p=this.version.getSymbolSizeRows(),v=this.version.getSymbolSizeColumns();if(f.getHeight()!==p)throw new x("Dimension of bitMatrix must match the version size");const _=this.version.getDataRegionSizeRows(),j=this.version.getDataRegionSizeColumns(),E=p/_|0,D=v/j|0,z=E*_,X=D*j,oe=new te(X,z);for(let we=0;we<E;++we){const Oe=we*_;for(let He=0;He<D;++He){const rt=He*j;for(let lt=0;lt<_;++lt){const xt=we*(_+2)+1+lt,St=Oe+lt;for(let Vt=0;Vt<j;++Vt){const Wt=He*(j+2)+1+Vt;if(f.get(Wt,xt)){const qt=rt+Vt;oe.set(qt,St)}}}}}return oe}}class Rs{constructor(f,p){this.numDataCodewords=f,this.codewords=p}static getDataBlocks(f,p){const v=p.getECBlocks();let _=0;const j=v.getECBlocks();for(let lt of j)_+=lt.getCount();const E=new Array(_);let D=0;for(let lt of j)for(let xt=0;xt<lt.getCount();xt++){const St=lt.getDataCodewords(),Vt=v.getECCodewords()+St;E[D++]=new Rs(St,new Uint8Array(Vt))}const X=E[0].codewords.length-v.getECCodewords(),oe=X-1;let we=0;for(let lt=0;lt<oe;lt++)for(let xt=0;xt<D;xt++)E[xt].codewords[lt]=f[we++];const Oe=p.getVersionNumber()===24,He=Oe?8:D;for(let lt=0;lt<He;lt++)E[lt].codewords[X-1]=f[we++];const rt=E[0].codewords.length;for(let lt=X;lt<rt;lt++)for(let xt=0;xt<D;xt++){const St=Oe?(xt+8)%D:xt,Vt=Oe&&St>7?lt-1:lt;E[St].codewords[Vt]=f[we++]}if(we!==f.length)throw new x;return E}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class ra{constructor(f){this.bytes=f,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(f){if(f<1||f>32||f>this.available())throw new x(""+f);let p=0,v=this.bitOffset,_=this.byteOffset;const j=this.bytes;if(v>0){const E=8-v,D=f<E?f:E,z=E-D,X=255>>8-D<<z;p=(j[_]&X)>>z,f-=D,v+=D,v===8&&(v=0,_++)}if(f>0){for(;f>=8;)p=p<<8|j[_]&255,_++,f-=8;if(f>0){const E=8-f,D=255>>E<<E;p=p<<f|(j[_]&D)>>E,v+=f}}return this.bitOffset=v,this.byteOffset=_,p}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var Gn;(function(ye){ye[ye.PAD_ENCODE=0]="PAD_ENCODE",ye[ye.ASCII_ENCODE=1]="ASCII_ENCODE",ye[ye.C40_ENCODE=2]="C40_ENCODE",ye[ye.TEXT_ENCODE=3]="TEXT_ENCODE",ye[ye.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",ye[ye.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",ye[ye.BASE256_ENCODE=6]="BASE256_ENCODE"})(Gn||(Gn={}));class Gi{static decode(f){const p=new ra(f),v=new Z,_=new Z,j=new Array;let E=Gn.ASCII_ENCODE;do if(E===Gn.ASCII_ENCODE)E=this.decodeAsciiSegment(p,v,_);else{switch(E){case Gn.C40_ENCODE:this.decodeC40Segment(p,v);break;case Gn.TEXT_ENCODE:this.decodeTextSegment(p,v);break;case Gn.ANSIX12_ENCODE:this.decodeAnsiX12Segment(p,v);break;case Gn.EDIFACT_ENCODE:this.decodeEdifactSegment(p,v);break;case Gn.BASE256_ENCODE:this.decodeBase256Segment(p,v,j);break;default:throw new R}E=Gn.ASCII_ENCODE}while(E!==Gn.PAD_ENCODE&&p.available()>0);return _.length()>0&&v.append(_.toString()),new ne(f,v.toString(),j.length===0?null:j,null)}static decodeAsciiSegment(f,p,v){let _=!1;do{let j=f.readBits(8);if(j===0)throw new R;if(j<=128)return _&&(j+=128),p.append(String.fromCharCode(j-1)),Gn.ASCII_ENCODE;if(j===129)return Gn.PAD_ENCODE;if(j<=229){const E=j-130;E<10&&p.append("0"),p.append(""+E)}else switch(j){case 230:return Gn.C40_ENCODE;case 231:return Gn.BASE256_ENCODE;case 232:p.append("");break;case 233:case 234:break;case 235:_=!0;break;case 236:p.append("[)>05"),v.insert(0,"");break;case 237:p.append("[)>06"),v.insert(0,"");break;case 238:return Gn.ANSIX12_ENCODE;case 239:return Gn.TEXT_ENCODE;case 240:return Gn.EDIFACT_ENCODE;case 241:break;default:if(j!==254||f.available()!==0)throw new R;break}}while(f.available()>0);return Gn.ASCII_ENCODE}static decodeC40Segment(f,p){let v=!1;const _=[];let j=0;do{if(f.available()===8)return;const E=f.readBits(8);if(E===254)return;this.parseTwoBytes(E,f.readBits(8),_);for(let D=0;D<3;D++){const z=_[D];switch(j){case 0:if(z<3)j=z+1;else if(z<this.C40_BASIC_SET_CHARS.length){const X=this.C40_BASIC_SET_CHARS[z];v?(p.append(String.fromCharCode(X.charCodeAt(0)+128)),v=!1):p.append(X)}else throw new R;break;case 1:v?(p.append(String.fromCharCode(z+128)),v=!1):p.append(String.fromCharCode(z)),j=0;break;case 2:if(z<this.C40_SHIFT2_SET_CHARS.length){const X=this.C40_SHIFT2_SET_CHARS[z];v?(p.append(String.fromCharCode(X.charCodeAt(0)+128)),v=!1):p.append(X)}else switch(z){case 27:p.append("");break;case 30:v=!0;break;default:throw new R}j=0;break;case 3:v?(p.append(String.fromCharCode(z+224)),v=!1):p.append(String.fromCharCode(z+96)),j=0;break;default:throw new R}}}while(f.available()>0)}static decodeTextSegment(f,p){let v=!1,_=[],j=0;do{if(f.available()===8)return;const E=f.readBits(8);if(E===254)return;this.parseTwoBytes(E,f.readBits(8),_);for(let D=0;D<3;D++){const z=_[D];switch(j){case 0:if(z<3)j=z+1;else if(z<this.TEXT_BASIC_SET_CHARS.length){const X=this.TEXT_BASIC_SET_CHARS[z];v?(p.append(String.fromCharCode(X.charCodeAt(0)+128)),v=!1):p.append(X)}else throw new R;break;case 1:v?(p.append(String.fromCharCode(z+128)),v=!1):p.append(String.fromCharCode(z)),j=0;break;case 2:if(z<this.TEXT_SHIFT2_SET_CHARS.length){const X=this.TEXT_SHIFT2_SET_CHARS[z];v?(p.append(String.fromCharCode(X.charCodeAt(0)+128)),v=!1):p.append(X)}else switch(z){case 27:p.append("");break;case 30:v=!0;break;default:throw new R}j=0;break;case 3:if(z<this.TEXT_SHIFT3_SET_CHARS.length){const X=this.TEXT_SHIFT3_SET_CHARS[z];v?(p.append(String.fromCharCode(X.charCodeAt(0)+128)),v=!1):p.append(X),j=0}else throw new R;break;default:throw new R}}}while(f.available()>0)}static decodeAnsiX12Segment(f,p){const v=[];do{if(f.available()===8)return;const _=f.readBits(8);if(_===254)return;this.parseTwoBytes(_,f.readBits(8),v);for(let j=0;j<3;j++){const E=v[j];switch(E){case 0:p.append("\r");break;case 1:p.append("*");break;case 2:p.append(">");break;case 3:p.append(" ");break;default:if(E<14)p.append(String.fromCharCode(E+44));else if(E<40)p.append(String.fromCharCode(E+51));else throw new R;break}}}while(f.available()>0)}static parseTwoBytes(f,p,v){let _=(f<<8)+p-1,j=Math.floor(_/1600);v[0]=j,_-=j*1600,j=Math.floor(_/40),v[1]=j,v[2]=_-j*40}static decodeEdifactSegment(f,p){do{if(f.available()<=16)return;for(let v=0;v<4;v++){let _=f.readBits(6);if(_===31){const j=8-f.getBitOffset();j!==8&&f.readBits(j);return}(_&32)===0&&(_|=64),p.append(String.fromCharCode(_))}}while(f.available()>0)}static decodeBase256Segment(f,p,v){let _=1+f.getByteOffset();const j=this.unrandomize255State(f.readBits(8),_++);let E;if(j===0?E=f.available()/8|0:j<250?E=j:E=250*(j-249)+this.unrandomize255State(f.readBits(8),_++),E<0)throw new R;const D=new Uint8Array(E);for(let z=0;z<E;z++){if(f.available()<8)throw new R;D[z]=this.unrandomize255State(f.readBits(8),_++)}v.push(D);try{p.append(H.decode(D,G.ISO88591))}catch(z){throw new ge("Platform does not support required encoding: "+z.message)}}static unrandomize255State(f,p){const v=149*p%255+1,_=f-v;return _>=0?_:_+256}}Gi.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],Gi.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],Gi.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],Gi.TEXT_SHIFT2_SET_CHARS=Gi.C40_SHIFT2_SET_CHARS,Gi.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class ml{constructor(){this.rsDecoder=new Qe(Ee.DATA_MATRIX_FIELD_256)}decode(f){const p=new ga(f),v=p.getVersion(),_=p.readCodewords(),j=Rs.getDataBlocks(_,v);let E=0;for(let X of j)E+=X.getNumDataCodewords();const D=new Uint8Array(E),z=j.length;for(let X=0;X<z;X++){const oe=j[X],we=oe.getCodewords(),Oe=oe.getNumDataCodewords();this.correctErrors(we,Oe);for(let He=0;He<Oe;He++)D[He*z+X]=we[He]}return Gi.decode(D)}correctErrors(f,p){const v=new Int32Array(f);try{this.rsDecoder.decode(v,f.length-p)}catch{throw new g}for(let _=0;_<p;_++)f[_]=v[_]}}class ya{constructor(f){this.image=f,this.rectangleDetector=new fr(this.image)}detect(){const f=this.rectangleDetector.detect();let p=this.detectSolid1(f);if(p=this.detectSolid2(p),p[3]=this.correctTopRight(p),!p[3])throw new se;p=this.shiftToModuleCenter(p);const v=p[0],_=p[1],j=p[2],E=p[3];let D=this.transitionsBetween(v,E)+1,z=this.transitionsBetween(j,E)+1;(D&1)===1&&(D+=1),(z&1)===1&&(z+=1),4*D<7*z&&4*z<7*D&&(D=z=Math.max(D,z));let X=ya.sampleGrid(this.image,v,_,j,E,D,z);return new zt(X,[v,_,j,E])}static shiftPoint(f,p,v){let _=(p.getX()-f.getX())/(v+1),j=(p.getY()-f.getY())/(v+1);return new Ke(f.getX()+_,f.getY()+j)}static moveAway(f,p,v){let _=f.getX(),j=f.getY();return _<p?_-=1:_+=1,j<v?j-=1:j+=1,new Ke(_,j)}detectSolid1(f){let p=f[0],v=f[1],_=f[3],j=f[2],E=this.transitionsBetween(p,v),D=this.transitionsBetween(v,_),z=this.transitionsBetween(_,j),X=this.transitionsBetween(j,p),oe=E,we=[j,p,v,_];return oe>D&&(oe=D,we[0]=p,we[1]=v,we[2]=_,we[3]=j),oe>z&&(oe=z,we[0]=v,we[1]=_,we[2]=j,we[3]=p),oe>X&&(we[0]=_,we[1]=j,we[2]=p,we[3]=v),we}detectSolid2(f){let p=f[0],v=f[1],_=f[2],j=f[3],E=this.transitionsBetween(p,j),D=ya.shiftPoint(v,_,(E+1)*4),z=ya.shiftPoint(_,v,(E+1)*4),X=this.transitionsBetween(D,p),oe=this.transitionsBetween(z,j);return X<oe?(f[0]=p,f[1]=v,f[2]=_,f[3]=j):(f[0]=v,f[1]=_,f[2]=j,f[3]=p),f}correctTopRight(f){let p=f[0],v=f[1],_=f[2],j=f[3],E=this.transitionsBetween(p,j),D=this.transitionsBetween(v,j),z=ya.shiftPoint(p,v,(D+1)*4),X=ya.shiftPoint(_,v,(E+1)*4);E=this.transitionsBetween(z,j),D=this.transitionsBetween(X,j);let oe=new Ke(j.getX()+(_.getX()-v.getX())/(E+1),j.getY()+(_.getY()-v.getY())/(E+1)),we=new Ke(j.getX()+(p.getX()-v.getX())/(D+1),j.getY()+(p.getY()-v.getY())/(D+1));if(!this.isValid(oe))return this.isValid(we)?we:null;if(!this.isValid(we))return oe;let Oe=this.transitionsBetween(z,oe)+this.transitionsBetween(X,oe),He=this.transitionsBetween(z,we)+this.transitionsBetween(X,we);return Oe>He?oe:we}shiftToModuleCenter(f){let p=f[0],v=f[1],_=f[2],j=f[3],E=this.transitionsBetween(p,j)+1,D=this.transitionsBetween(_,j)+1,z=ya.shiftPoint(p,v,D*4),X=ya.shiftPoint(_,v,E*4);E=this.transitionsBetween(z,j)+1,D=this.transitionsBetween(X,j)+1,(E&1)===1&&(E+=1),(D&1)===1&&(D+=1);let oe=(p.getX()+v.getX()+_.getX()+j.getX())/4,we=(p.getY()+v.getY()+_.getY()+j.getY())/4;p=ya.moveAway(p,oe,we),v=ya.moveAway(v,oe,we),_=ya.moveAway(_,oe,we),j=ya.moveAway(j,oe,we);let Oe,He;return z=ya.shiftPoint(p,v,D*4),z=ya.shiftPoint(z,j,E*4),Oe=ya.shiftPoint(v,p,D*4),Oe=ya.shiftPoint(Oe,_,E*4),X=ya.shiftPoint(_,j,D*4),X=ya.shiftPoint(X,v,E*4),He=ya.shiftPoint(j,_,D*4),He=ya.shiftPoint(He,p,E*4),[z,Oe,X,He]}isValid(f){return f.getX()>=0&&f.getX()<this.image.getWidth()&&f.getY()>0&&f.getY()<this.image.getHeight()}static sampleGrid(f,p,v,_,j,E,D){return tr.getInstance().sampleGrid(f,E,D,.5,.5,E-.5,.5,E-.5,D-.5,.5,D-.5,p.getX(),p.getY(),j.getX(),j.getY(),_.getX(),_.getY(),v.getX(),v.getY())}transitionsBetween(f,p){let v=Math.trunc(f.getX()),_=Math.trunc(f.getY()),j=Math.trunc(p.getX()),E=Math.trunc(p.getY()),D=Math.abs(E-_)>Math.abs(j-v);if(D){let lt=v;v=_,_=lt,lt=j,j=E,E=lt}let z=Math.abs(j-v),X=Math.abs(E-_),oe=-z/2,we=_<E?1:-1,Oe=v<j?1:-1,He=0,rt=this.image.get(D?_:v,D?v:_);for(let lt=v,xt=_;lt!==j;lt+=Oe){let St=this.image.get(D?xt:lt,D?lt:xt);if(St!==rt&&(He++,rt=St),oe+=X,oe>0){if(xt===E)break;xt+=we,oe-=z}}return He}}class Ns{constructor(){this.decoder=new ml}decode(f,p=null){let v,_;if(p!=null&&p.has(W.PURE_BARCODE)){const X=Ns.extractPureBits(f.getBlackMatrix());v=this.decoder.decode(X),_=Ns.NO_POINTS}else{const X=new ya(f.getBlackMatrix()).detect();v=this.decoder.decode(X.getBits()),_=X.getPoints()}const j=v.getRawBytes(),E=new J(v.getText(),j,8*j.length,_,Y.DATA_MATRIX,y.currentTimeMillis()),D=v.getByteSegments();D!=null&&E.putMetadata(me.BYTE_SEGMENTS,D);const z=v.getECLevel();return z!=null&&E.putMetadata(me.ERROR_CORRECTION_LEVEL,z),E}reset(){}static extractPureBits(f){const p=f.getTopLeftOnBit(),v=f.getBottomRightOnBit();if(p==null||v==null)throw new se;const _=this.moduleSize(p,f);let j=p[1];const E=v[1];let D=p[0];const X=(v[0]-D+1)/_,oe=(E-j+1)/_;if(X<=0||oe<=0)throw new se;const we=_/2;j+=we,D+=we;const Oe=new te(X,oe);for(let He=0;He<oe;He++){const rt=j+He*_;for(let lt=0;lt<X;lt++)f.get(D+lt*_,rt)&&Oe.set(lt,He)}return Oe}static moduleSize(f,p){const v=p.getWidth();let _=f[0];const j=f[1];for(;_<v&&p.get(_,j);)_++;if(_===v)throw new se;const E=_-f[0];if(E===0)throw new se;return E}}Ns.NO_POINTS=[];class na extends re{constructor(f=500){super(new Ns,f)}}var Da;(function(ye){ye[ye.L=0]="L",ye[ye.M=1]="M",ye[ye.Q=2]="Q",ye[ye.H=3]="H"})(Da||(Da={}));class Mn{constructor(f,p,v){this.value=f,this.stringValue=p,this.bits=v,Mn.FOR_BITS.set(v,this),Mn.FOR_VALUE.set(f,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(f){switch(f){case"L":return Mn.L;case"M":return Mn.M;case"Q":return Mn.Q;case"H":return Mn.H;default:throw new u(f+"not available")}}toString(){return this.stringValue}equals(f){if(!(f instanceof Mn))return!1;const p=f;return this.value===p.value}static forBits(f){if(f<0||f>=Mn.FOR_BITS.size)throw new x;return Mn.FOR_BITS.get(f)}}Mn.FOR_BITS=new Map,Mn.FOR_VALUE=new Map,Mn.L=new Mn(Da.L,"L",1),Mn.M=new Mn(Da.M,"M",0),Mn.Q=new Mn(Da.Q,"Q",3),Mn.H=new Mn(Da.H,"H",2);class ps{constructor(f){this.errorCorrectionLevel=Mn.forBits(f>>3&3),this.dataMask=f&7}static numBitsDiffering(f,p){return A.bitCount(f^p)}static decodeFormatInformation(f,p){const v=ps.doDecodeFormatInformation(f,p);return v!==null?v:ps.doDecodeFormatInformation(f^ps.FORMAT_INFO_MASK_QR,p^ps.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(f,p){let v=Number.MAX_SAFE_INTEGER,_=0;for(const j of ps.FORMAT_INFO_DECODE_LOOKUP){const E=j[0];if(E===f||E===p)return new ps(j[1]);let D=ps.numBitsDiffering(f,E);D<v&&(_=j[1],v=D),f!==p&&(D=ps.numBitsDiffering(p,E),D<v&&(_=j[1],v=D))}return v<=3?new ps(_):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(f){if(!(f instanceof ps))return!1;const p=f;return this.errorCorrectionLevel===p.errorCorrectionLevel&&this.dataMask===p.dataMask}}ps.FORMAT_INFO_MASK_QR=21522,ps.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class yt{constructor(f,...p){this.ecCodewordsPerBlock=f,this.ecBlocks=p}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let f=0;const p=this.ecBlocks;for(const v of p)f+=v.getCount();return f}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class fe{constructor(f,p){this.count=f,this.dataCodewords=p}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class vt{constructor(f,p,...v){this.versionNumber=f,this.alignmentPatternCenters=p,this.ecBlocks=v;let _=0;const j=v[0].getECCodewordsPerBlock(),E=v[0].getECBlocks();for(const D of E)_+=D.getCount()*(D.getDataCodewords()+j);this.totalCodewords=_}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(f){return this.ecBlocks[f.getValue()]}static getProvisionalVersionForDimension(f){if(f%4!==1)throw new R;try{return this.getVersionForNumber((f-17)/4)}catch{throw new R}}static getVersionForNumber(f){if(f<1||f>40)throw new x;return vt.VERSIONS[f-1]}static decodeVersionInformation(f){let p=Number.MAX_SAFE_INTEGER,v=0;for(let _=0;_<vt.VERSION_DECODE_INFO.length;_++){const j=vt.VERSION_DECODE_INFO[_];if(j===f)return vt.getVersionForNumber(_+7);const E=ps.numBitsDiffering(f,j);E<p&&(v=_+7,p=E)}return p<=3?vt.getVersionForNumber(v):null}buildFunctionPattern(){const f=this.getDimensionForVersion(),p=new te(f);p.setRegion(0,0,9,9),p.setRegion(f-8,0,8,9),p.setRegion(0,f-8,9,8);const v=this.alignmentPatternCenters.length;for(let _=0;_<v;_++){const j=this.alignmentPatternCenters[_]-2;for(let E=0;E<v;E++)_===0&&(E===0||E===v-1)||_===v-1&&E===0||p.setRegion(this.alignmentPatternCenters[E]-2,j,5,5)}return p.setRegion(6,9,1,f-17),p.setRegion(9,6,f-17,1),this.versionNumber>6&&(p.setRegion(f-11,0,3,6),p.setRegion(0,f-11,6,3)),p}toString(){return""+this.versionNumber}}vt.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),vt.VERSIONS=[new vt(1,new Int32Array(0),new yt(7,new fe(1,19)),new yt(10,new fe(1,16)),new yt(13,new fe(1,13)),new yt(17,new fe(1,9))),new vt(2,Int32Array.from([6,18]),new yt(10,new fe(1,34)),new yt(16,new fe(1,28)),new yt(22,new fe(1,22)),new yt(28,new fe(1,16))),new vt(3,Int32Array.from([6,22]),new yt(15,new fe(1,55)),new yt(26,new fe(1,44)),new yt(18,new fe(2,17)),new yt(22,new fe(2,13))),new vt(4,Int32Array.from([6,26]),new yt(20,new fe(1,80)),new yt(18,new fe(2,32)),new yt(26,new fe(2,24)),new yt(16,new fe(4,9))),new vt(5,Int32Array.from([6,30]),new yt(26,new fe(1,108)),new yt(24,new fe(2,43)),new yt(18,new fe(2,15),new fe(2,16)),new yt(22,new fe(2,11),new fe(2,12))),new vt(6,Int32Array.from([6,34]),new yt(18,new fe(2,68)),new yt(16,new fe(4,27)),new yt(24,new fe(4,19)),new yt(28,new fe(4,15))),new vt(7,Int32Array.from([6,22,38]),new yt(20,new fe(2,78)),new yt(18,new fe(4,31)),new yt(18,new fe(2,14),new fe(4,15)),new yt(26,new fe(4,13),new fe(1,14))),new vt(8,Int32Array.from([6,24,42]),new yt(24,new fe(2,97)),new yt(22,new fe(2,38),new fe(2,39)),new yt(22,new fe(4,18),new fe(2,19)),new yt(26,new fe(4,14),new fe(2,15))),new vt(9,Int32Array.from([6,26,46]),new yt(30,new fe(2,116)),new yt(22,new fe(3,36),new fe(2,37)),new yt(20,new fe(4,16),new fe(4,17)),new yt(24,new fe(4,12),new fe(4,13))),new vt(10,Int32Array.from([6,28,50]),new yt(18,new fe(2,68),new fe(2,69)),new yt(26,new fe(4,43),new fe(1,44)),new yt(24,new fe(6,19),new fe(2,20)),new yt(28,new fe(6,15),new fe(2,16))),new vt(11,Int32Array.from([6,30,54]),new yt(20,new fe(4,81)),new yt(30,new fe(1,50),new fe(4,51)),new yt(28,new fe(4,22),new fe(4,23)),new yt(24,new fe(3,12),new fe(8,13))),new vt(12,Int32Array.from([6,32,58]),new yt(24,new fe(2,92),new fe(2,93)),new yt(22,new fe(6,36),new fe(2,37)),new yt(26,new fe(4,20),new fe(6,21)),new yt(28,new fe(7,14),new fe(4,15))),new vt(13,Int32Array.from([6,34,62]),new yt(26,new fe(4,107)),new yt(22,new fe(8,37),new fe(1,38)),new yt(24,new fe(8,20),new fe(4,21)),new yt(22,new fe(12,11),new fe(4,12))),new vt(14,Int32Array.from([6,26,46,66]),new yt(30,new fe(3,115),new fe(1,116)),new yt(24,new fe(4,40),new fe(5,41)),new yt(20,new fe(11,16),new fe(5,17)),new yt(24,new fe(11,12),new fe(5,13))),new vt(15,Int32Array.from([6,26,48,70]),new yt(22,new fe(5,87),new fe(1,88)),new yt(24,new fe(5,41),new fe(5,42)),new yt(30,new fe(5,24),new fe(7,25)),new yt(24,new fe(11,12),new fe(7,13))),new vt(16,Int32Array.from([6,26,50,74]),new yt(24,new fe(5,98),new fe(1,99)),new yt(28,new fe(7,45),new fe(3,46)),new yt(24,new fe(15,19),new fe(2,20)),new yt(30,new fe(3,15),new fe(13,16))),new vt(17,Int32Array.from([6,30,54,78]),new yt(28,new fe(1,107),new fe(5,108)),new yt(28,new fe(10,46),new fe(1,47)),new yt(28,new fe(1,22),new fe(15,23)),new yt(28,new fe(2,14),new fe(17,15))),new vt(18,Int32Array.from([6,30,56,82]),new yt(30,new fe(5,120),new fe(1,121)),new yt(26,new fe(9,43),new fe(4,44)),new yt(28,new fe(17,22),new fe(1,23)),new yt(28,new fe(2,14),new fe(19,15))),new vt(19,Int32Array.from([6,30,58,86]),new yt(28,new fe(3,113),new fe(4,114)),new yt(26,new fe(3,44),new fe(11,45)),new yt(26,new fe(17,21),new fe(4,22)),new yt(26,new fe(9,13),new fe(16,14))),new vt(20,Int32Array.from([6,34,62,90]),new yt(28,new fe(3,107),new fe(5,108)),new yt(26,new fe(3,41),new fe(13,42)),new yt(30,new fe(15,24),new fe(5,25)),new yt(28,new fe(15,15),new fe(10,16))),new vt(21,Int32Array.from([6,28,50,72,94]),new yt(28,new fe(4,116),new fe(4,117)),new yt(26,new fe(17,42)),new yt(28,new fe(17,22),new fe(6,23)),new yt(30,new fe(19,16),new fe(6,17))),new vt(22,Int32Array.from([6,26,50,74,98]),new yt(28,new fe(2,111),new fe(7,112)),new yt(28,new fe(17,46)),new yt(30,new fe(7,24),new fe(16,25)),new yt(24,new fe(34,13))),new vt(23,Int32Array.from([6,30,54,78,102]),new yt(30,new fe(4,121),new fe(5,122)),new yt(28,new fe(4,47),new fe(14,48)),new yt(30,new fe(11,24),new fe(14,25)),new yt(30,new fe(16,15),new fe(14,16))),new vt(24,Int32Array.from([6,28,54,80,106]),new yt(30,new fe(6,117),new fe(4,118)),new yt(28,new fe(6,45),new fe(14,46)),new yt(30,new fe(11,24),new fe(16,25)),new yt(30,new fe(30,16),new fe(2,17))),new vt(25,Int32Array.from([6,32,58,84,110]),new yt(26,new fe(8,106),new fe(4,107)),new yt(28,new fe(8,47),new fe(13,48)),new yt(30,new fe(7,24),new fe(22,25)),new yt(30,new fe(22,15),new fe(13,16))),new vt(26,Int32Array.from([6,30,58,86,114]),new yt(28,new fe(10,114),new fe(2,115)),new yt(28,new fe(19,46),new fe(4,47)),new yt(28,new fe(28,22),new fe(6,23)),new yt(30,new fe(33,16),new fe(4,17))),new vt(27,Int32Array.from([6,34,62,90,118]),new yt(30,new fe(8,122),new fe(4,123)),new yt(28,new fe(22,45),new fe(3,46)),new yt(30,new fe(8,23),new fe(26,24)),new yt(30,new fe(12,15),new fe(28,16))),new vt(28,Int32Array.from([6,26,50,74,98,122]),new yt(30,new fe(3,117),new fe(10,118)),new yt(28,new fe(3,45),new fe(23,46)),new yt(30,new fe(4,24),new fe(31,25)),new yt(30,new fe(11,15),new fe(31,16))),new vt(29,Int32Array.from([6,30,54,78,102,126]),new yt(30,new fe(7,116),new fe(7,117)),new yt(28,new fe(21,45),new fe(7,46)),new yt(30,new fe(1,23),new fe(37,24)),new yt(30,new fe(19,15),new fe(26,16))),new vt(30,Int32Array.from([6,26,52,78,104,130]),new yt(30,new fe(5,115),new fe(10,116)),new yt(28,new fe(19,47),new fe(10,48)),new yt(30,new fe(15,24),new fe(25,25)),new yt(30,new fe(23,15),new fe(25,16))),new vt(31,Int32Array.from([6,30,56,82,108,134]),new yt(30,new fe(13,115),new fe(3,116)),new yt(28,new fe(2,46),new fe(29,47)),new yt(30,new fe(42,24),new fe(1,25)),new yt(30,new fe(23,15),new fe(28,16))),new vt(32,Int32Array.from([6,34,60,86,112,138]),new yt(30,new fe(17,115)),new yt(28,new fe(10,46),new fe(23,47)),new yt(30,new fe(10,24),new fe(35,25)),new yt(30,new fe(19,15),new fe(35,16))),new vt(33,Int32Array.from([6,30,58,86,114,142]),new yt(30,new fe(17,115),new fe(1,116)),new yt(28,new fe(14,46),new fe(21,47)),new yt(30,new fe(29,24),new fe(19,25)),new yt(30,new fe(11,15),new fe(46,16))),new vt(34,Int32Array.from([6,34,62,90,118,146]),new yt(30,new fe(13,115),new fe(6,116)),new yt(28,new fe(14,46),new fe(23,47)),new yt(30,new fe(44,24),new fe(7,25)),new yt(30,new fe(59,16),new fe(1,17))),new vt(35,Int32Array.from([6,30,54,78,102,126,150]),new yt(30,new fe(12,121),new fe(7,122)),new yt(28,new fe(12,47),new fe(26,48)),new yt(30,new fe(39,24),new fe(14,25)),new yt(30,new fe(22,15),new fe(41,16))),new vt(36,Int32Array.from([6,24,50,76,102,128,154]),new yt(30,new fe(6,121),new fe(14,122)),new yt(28,new fe(6,47),new fe(34,48)),new yt(30,new fe(46,24),new fe(10,25)),new yt(30,new fe(2,15),new fe(64,16))),new vt(37,Int32Array.from([6,28,54,80,106,132,158]),new yt(30,new fe(17,122),new fe(4,123)),new yt(28,new fe(29,46),new fe(14,47)),new yt(30,new fe(49,24),new fe(10,25)),new yt(30,new fe(24,15),new fe(46,16))),new vt(38,Int32Array.from([6,32,58,84,110,136,162]),new yt(30,new fe(4,122),new fe(18,123)),new yt(28,new fe(13,46),new fe(32,47)),new yt(30,new fe(48,24),new fe(14,25)),new yt(30,new fe(42,15),new fe(32,16))),new vt(39,Int32Array.from([6,26,54,82,110,138,166]),new yt(30,new fe(20,117),new fe(4,118)),new yt(28,new fe(40,47),new fe(7,48)),new yt(30,new fe(43,24),new fe(22,25)),new yt(30,new fe(10,15),new fe(67,16))),new vt(40,Int32Array.from([6,30,58,86,114,142,170]),new yt(30,new fe(19,118),new fe(6,119)),new yt(28,new fe(18,47),new fe(31,48)),new yt(30,new fe(34,24),new fe(34,25)),new yt(30,new fe(20,15),new fe(61,16)))];var wr;(function(ye){ye[ye.DATA_MASK_000=0]="DATA_MASK_000",ye[ye.DATA_MASK_001=1]="DATA_MASK_001",ye[ye.DATA_MASK_010=2]="DATA_MASK_010",ye[ye.DATA_MASK_011=3]="DATA_MASK_011",ye[ye.DATA_MASK_100=4]="DATA_MASK_100",ye[ye.DATA_MASK_101=5]="DATA_MASK_101",ye[ye.DATA_MASK_110=6]="DATA_MASK_110",ye[ye.DATA_MASK_111=7]="DATA_MASK_111"})(wr||(wr={}));class Or{constructor(f,p){this.value=f,this.isMasked=p}unmaskBitMatrix(f,p){for(let v=0;v<p;v++)for(let _=0;_<p;_++)this.isMasked(v,_)&&f.flip(_,v)}}Or.values=new Map([[wr.DATA_MASK_000,new Or(wr.DATA_MASK_000,(ye,f)=>(ye+f&1)===0)],[wr.DATA_MASK_001,new Or(wr.DATA_MASK_001,(ye,f)=>(ye&1)===0)],[wr.DATA_MASK_010,new Or(wr.DATA_MASK_010,(ye,f)=>f%3===0)],[wr.DATA_MASK_011,new Or(wr.DATA_MASK_011,(ye,f)=>(ye+f)%3===0)],[wr.DATA_MASK_100,new Or(wr.DATA_MASK_100,(ye,f)=>(Math.floor(ye/2)+Math.floor(f/3)&1)===0)],[wr.DATA_MASK_101,new Or(wr.DATA_MASK_101,(ye,f)=>ye*f%6===0)],[wr.DATA_MASK_110,new Or(wr.DATA_MASK_110,(ye,f)=>ye*f%6<3)],[wr.DATA_MASK_111,new Or(wr.DATA_MASK_111,(ye,f)=>(ye+f+ye*f%3&1)===0)]]);class nn{constructor(f){const p=f.getHeight();if(p<21||(p&3)!==1)throw new R;this.bitMatrix=f}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let f=0;for(let j=0;j<6;j++)f=this.copyBit(j,8,f);f=this.copyBit(7,8,f),f=this.copyBit(8,8,f),f=this.copyBit(8,7,f);for(let j=5;j>=0;j--)f=this.copyBit(8,j,f);const p=this.bitMatrix.getHeight();let v=0;const _=p-7;for(let j=p-1;j>=_;j--)v=this.copyBit(8,j,v);for(let j=p-8;j<p;j++)v=this.copyBit(j,8,v);if(this.parsedFormatInfo=ps.decodeFormatInformation(f,v),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new R}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const f=this.bitMatrix.getHeight(),p=Math.floor((f-17)/4);if(p<=6)return vt.getVersionForNumber(p);let v=0;const _=f-11;for(let E=5;E>=0;E--)for(let D=f-9;D>=_;D--)v=this.copyBit(D,E,v);let j=vt.decodeVersionInformation(v);if(j!==null&&j.getDimensionForVersion()===f)return this.parsedVersion=j,j;v=0;for(let E=5;E>=0;E--)for(let D=f-9;D>=_;D--)v=this.copyBit(E,D,v);if(j=vt.decodeVersionInformation(v),j!==null&&j.getDimensionForVersion()===f)return this.parsedVersion=j,j;throw new R}copyBit(f,p,v){return(this.isMirror?this.bitMatrix.get(p,f):this.bitMatrix.get(f,p))?v<<1|1:v<<1}readCodewords(){const f=this.readFormatInformation(),p=this.readVersion(),v=Or.values.get(f.getDataMask()),_=this.bitMatrix.getHeight();v.unmaskBitMatrix(this.bitMatrix,_);const j=p.buildFunctionPattern();let E=!0;const D=new Uint8Array(p.getTotalCodewords());let z=0,X=0,oe=0;for(let we=_-1;we>0;we-=2){we===6&&we--;for(let Oe=0;Oe<_;Oe++){const He=E?_-1-Oe:Oe;for(let rt=0;rt<2;rt++)j.get(we-rt,He)||(oe++,X<<=1,this.bitMatrix.get(we-rt,He)&&(X|=1),oe===8&&(D[z++]=X,oe=0,X=0))}E=!E}if(z!==p.getTotalCodewords())throw new R;return D}remask(){if(this.parsedFormatInfo===null)return;const f=Or.values[this.parsedFormatInfo.getDataMask()],p=this.bitMatrix.getHeight();f.unmaskBitMatrix(this.bitMatrix,p)}setMirror(f){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=f}mirror(){const f=this.bitMatrix;for(let p=0,v=f.getWidth();p<v;p++)for(let _=p+1,j=f.getHeight();_<j;_++)f.get(p,_)!==f.get(_,p)&&(f.flip(_,p),f.flip(p,_))}}class zn{constructor(f,p){this.numDataCodewords=f,this.codewords=p}static getDataBlocks(f,p,v){if(f.length!==p.getTotalCodewords())throw new x;const _=p.getECBlocksForLevel(v);let j=0;const E=_.getECBlocks();for(const rt of E)j+=rt.getCount();const D=new Array(j);let z=0;for(const rt of E)for(let lt=0;lt<rt.getCount();lt++){const xt=rt.getDataCodewords(),St=_.getECCodewordsPerBlock()+xt;D[z++]=new zn(xt,new Uint8Array(St))}const X=D[0].codewords.length;let oe=D.length-1;for(;oe>=0&&D[oe].codewords.length!==X;)oe--;oe++;const we=X-_.getECCodewordsPerBlock();let Oe=0;for(let rt=0;rt<we;rt++)for(let lt=0;lt<z;lt++)D[lt].codewords[rt]=f[Oe++];for(let rt=oe;rt<z;rt++)D[rt].codewords[we]=f[Oe++];const He=D[0].codewords.length;for(let rt=we;rt<He;rt++)for(let lt=0;lt<z;lt++){const xt=lt<oe?rt:rt+1;D[lt].codewords[xt]=f[Oe++]}return D}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var Vn;(function(ye){ye[ye.TERMINATOR=0]="TERMINATOR",ye[ye.NUMERIC=1]="NUMERIC",ye[ye.ALPHANUMERIC=2]="ALPHANUMERIC",ye[ye.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",ye[ye.BYTE=4]="BYTE",ye[ye.ECI=5]="ECI",ye[ye.KANJI=6]="KANJI",ye[ye.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",ye[ye.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",ye[ye.HANZI=9]="HANZI"})(Vn||(Vn={}));class Tr{constructor(f,p,v,_){this.value=f,this.stringValue=p,this.characterCountBitsForVersions=v,this.bits=_,Tr.FOR_BITS.set(_,this),Tr.FOR_VALUE.set(f,this)}static forBits(f){const p=Tr.FOR_BITS.get(f);if(p===void 0)throw new x;return p}getCharacterCountBits(f){const p=f.getVersionNumber();let v;return p<=9?v=0:p<=26?v=1:v=2,this.characterCountBitsForVersions[v]}getValue(){return this.value}getBits(){return this.bits}equals(f){if(!(f instanceof Tr))return!1;const p=f;return this.value===p.value}toString(){return this.stringValue}}Tr.FOR_BITS=new Map,Tr.FOR_VALUE=new Map,Tr.TERMINATOR=new Tr(Vn.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),Tr.NUMERIC=new Tr(Vn.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),Tr.ALPHANUMERIC=new Tr(Vn.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),Tr.STRUCTURED_APPEND=new Tr(Vn.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),Tr.BYTE=new Tr(Vn.BYTE,"BYTE",Int32Array.from([8,16,16]),4),Tr.ECI=new Tr(Vn.ECI,"ECI",Int32Array.from([0,0,0]),7),Tr.KANJI=new Tr(Vn.KANJI,"KANJI",Int32Array.from([8,10,12]),8),Tr.FNC1_FIRST_POSITION=new Tr(Vn.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),Tr.FNC1_SECOND_POSITION=new Tr(Vn.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),Tr.HANZI=new Tr(Vn.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class _n{static decode(f,p,v,_){const j=new ra(f);let E=new Z;const D=new Array;let z=-1,X=-1;try{let oe=null,we=!1,Oe;do{if(j.available()<4)Oe=Tr.TERMINATOR;else{const He=j.readBits(4);Oe=Tr.forBits(He)}switch(Oe){case Tr.TERMINATOR:break;case Tr.FNC1_FIRST_POSITION:case Tr.FNC1_SECOND_POSITION:we=!0;break;case Tr.STRUCTURED_APPEND:if(j.available()<16)throw new R;z=j.readBits(8),X=j.readBits(8);break;case Tr.ECI:const He=_n.parseECIValue(j);if(oe=L.getCharacterSetECIByValue(He),oe===null)throw new R;break;case Tr.HANZI:const rt=j.readBits(4),lt=j.readBits(Oe.getCharacterCountBits(p));rt===_n.GB2312_SUBSET&&_n.decodeHanziSegment(j,E,lt);break;default:const xt=j.readBits(Oe.getCharacterCountBits(p));switch(Oe){case Tr.NUMERIC:_n.decodeNumericSegment(j,E,xt);break;case Tr.ALPHANUMERIC:_n.decodeAlphanumericSegment(j,E,xt,we);break;case Tr.BYTE:_n.decodeByteSegment(j,E,xt,oe,D,_);break;case Tr.KANJI:_n.decodeKanjiSegment(j,E,xt);break;default:throw new R}break}}while(Oe!==Tr.TERMINATOR)}catch{throw new R}return new ne(f,E.toString(),D.length===0?null:D,v===null?null:v.toString(),z,X)}static decodeHanziSegment(f,p,v){if(v*13>f.available())throw new R;const _=new Uint8Array(2*v);let j=0;for(;v>0;){const E=f.readBits(13);let D=E/96<<8&4294967295|E%96;D<959?D+=41377:D+=42657,_[j]=D>>8&255,_[j+1]=D&255,j+=2,v--}try{p.append(H.decode(_,G.GB2312))}catch(E){throw new R(E)}}static decodeKanjiSegment(f,p,v){if(v*13>f.available())throw new R;const _=new Uint8Array(2*v);let j=0;for(;v>0;){const E=f.readBits(13);let D=E/192<<8&4294967295|E%192;D<7936?D+=33088:D+=49472,_[j]=D>>8,_[j+1]=D,j+=2,v--}try{p.append(H.decode(_,G.SHIFT_JIS))}catch(E){throw new R(E)}}static decodeByteSegment(f,p,v,_,j,E){if(8*v>f.available())throw new R;const D=new Uint8Array(v);for(let X=0;X<v;X++)D[X]=f.readBits(8);let z;_===null?z=G.guessEncoding(D,E):z=_.getName();try{p.append(H.decode(D,z))}catch(X){throw new R(X)}j.push(D)}static toAlphaNumericChar(f){if(f>=_n.ALPHANUMERIC_CHARS.length)throw new R;return _n.ALPHANUMERIC_CHARS[f]}static decodeAlphanumericSegment(f,p,v,_){const j=p.length();for(;v>1;){if(f.available()<11)throw new R;const E=f.readBits(11);p.append(_n.toAlphaNumericChar(Math.floor(E/45))),p.append(_n.toAlphaNumericChar(E%45)),v-=2}if(v===1){if(f.available()<6)throw new R;p.append(_n.toAlphaNumericChar(f.readBits(6)))}if(_)for(let E=j;E<p.length();E++)p.charAt(E)==="%"&&(E<p.length()-1&&p.charAt(E+1)==="%"?p.deleteCharAt(E+1):p.setCharAt(E,""))}static decodeNumericSegment(f,p,v){for(;v>=3;){if(f.available()<10)throw new R;const _=f.readBits(10);if(_>=1e3)throw new R;p.append(_n.toAlphaNumericChar(Math.floor(_/100))),p.append(_n.toAlphaNumericChar(Math.floor(_/10)%10)),p.append(_n.toAlphaNumericChar(_%10)),v-=3}if(v===2){if(f.available()<7)throw new R;const _=f.readBits(7);if(_>=100)throw new R;p.append(_n.toAlphaNumericChar(Math.floor(_/10))),p.append(_n.toAlphaNumericChar(_%10))}else if(v===1){if(f.available()<4)throw new R;const _=f.readBits(4);if(_>=10)throw new R;p.append(_n.toAlphaNumericChar(_))}}static parseECIValue(f){const p=f.readBits(8);if((p&128)===0)return p&127;if((p&192)===128){const v=f.readBits(8);return(p&63)<<8&4294967295|v}if((p&224)===192){const v=f.readBits(16);return(p&31)<<16&4294967295|v}throw new R}}_n.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",_n.GB2312_SUBSET=1;class Ki{constructor(f){this.mirrored=f}isMirrored(){return this.mirrored}applyMirroredCorrection(f){if(!this.mirrored||f===null||f.length<3)return;const p=f[0];f[0]=f[2],f[2]=p}}class bi{constructor(){this.rsDecoder=new Qe(Ee.QR_CODE_FIELD_256)}decodeBooleanArray(f,p){return this.decodeBitMatrix(te.parseFromBooleanArray(f),p)}decodeBitMatrix(f,p){const v=new nn(f);let _=null;try{return this.decodeBitMatrixParser(v,p)}catch(j){_=j}try{v.remask(),v.setMirror(!0),v.readVersion(),v.readFormatInformation(),v.mirror();const j=this.decodeBitMatrixParser(v,p);return j.setOther(new Ki(!0)),j}catch(j){throw _!==null?_:j}}decodeBitMatrixParser(f,p){const v=f.readVersion(),_=f.readFormatInformation().getErrorCorrectionLevel(),j=f.readCodewords(),E=zn.getDataBlocks(j,v,_);let D=0;for(const oe of E)D+=oe.getNumDataCodewords();const z=new Uint8Array(D);let X=0;for(const oe of E){const we=oe.getCodewords(),Oe=oe.getNumDataCodewords();this.correctErrors(we,Oe);for(let He=0;He<Oe;He++)z[X++]=we[He]}return _n.decode(z,v,_,p)}correctErrors(f,p){const v=new Int32Array(f);try{this.rsDecoder.decode(v,f.length-p)}catch{throw new g}for(let _=0;_<p;_++)f[_]=v[_]}}class gs extends Ke{constructor(f,p,v){super(f,p),this.estimatedModuleSize=v}aboutEquals(f,p,v){if(Math.abs(p-this.getY())<=f&&Math.abs(v-this.getX())<=f){const _=Math.abs(f-this.estimatedModuleSize);return _<=1||_<=this.estimatedModuleSize}return!1}combineEstimate(f,p,v){const _=(this.getX()+p)/2,j=(this.getY()+f)/2,E=(this.estimatedModuleSize+v)/2;return new gs(_,j,E)}}class aa{constructor(f,p,v,_,j,E,D){this.image=f,this.startX=p,this.startY=v,this.width=_,this.height=j,this.moduleSize=E,this.resultPointCallback=D,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const f=this.startX,p=this.height,v=this.width,_=f+v,j=this.startY+p/2,E=new Int32Array(3),D=this.image;for(let z=0;z<p;z++){const X=j+((z&1)===0?Math.floor((z+1)/2):-Math.floor((z+1)/2));E[0]=0,E[1]=0,E[2]=0;let oe=f;for(;oe<_&&!D.get(oe,X);)oe++;let we=0;for(;oe<_;){if(D.get(oe,X))if(we===1)E[1]++;else if(we===2){if(this.foundPatternCross(E)){const Oe=this.handlePossibleCenter(E,X,oe);if(Oe!==null)return Oe}E[0]=E[2],E[1]=1,E[2]=0,we=1}else E[++we]++;else we===1&&we++,E[we]++;oe++}if(this.foundPatternCross(E)){const Oe=this.handlePossibleCenter(E,X,_);if(Oe!==null)return Oe}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new se}static centerFromEnd(f,p){return p-f[2]-f[1]/2}foundPatternCross(f){const p=this.moduleSize,v=p/2;for(let _=0;_<3;_++)if(Math.abs(p-f[_])>=v)return!1;return!0}crossCheckVertical(f,p,v,_){const j=this.image,E=j.getHeight(),D=this.crossCheckStateCount;D[0]=0,D[1]=0,D[2]=0;let z=f;for(;z>=0&&j.get(p,z)&&D[1]<=v;)D[1]++,z--;if(z<0||D[1]>v)return NaN;for(;z>=0&&!j.get(p,z)&&D[0]<=v;)D[0]++,z--;if(D[0]>v)return NaN;for(z=f+1;z<E&&j.get(p,z)&&D[1]<=v;)D[1]++,z++;if(z===E||D[1]>v)return NaN;for(;z<E&&!j.get(p,z)&&D[2]<=v;)D[2]++,z++;if(D[2]>v)return NaN;const X=D[0]+D[1]+D[2];return 5*Math.abs(X-_)>=2*_?NaN:this.foundPatternCross(D)?aa.centerFromEnd(D,z):NaN}handlePossibleCenter(f,p,v){const _=f[0]+f[1]+f[2],j=aa.centerFromEnd(f,v),E=this.crossCheckVertical(p,j,2*f[1],_);if(!isNaN(E)){const D=(f[0]+f[1]+f[2])/3;for(const X of this.possibleCenters)if(X.aboutEquals(D,E,j))return X.combineEstimate(E,j,D);const z=new gs(j,E,D);this.possibleCenters.push(z),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(z)}return null}}class za extends Ke{constructor(f,p,v,_){super(f,p),this.estimatedModuleSize=v,this.count=_,_===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(f,p,v){if(Math.abs(p-this.getY())<=f&&Math.abs(v-this.getX())<=f){const _=Math.abs(f-this.estimatedModuleSize);return _<=1||_<=this.estimatedModuleSize}return!1}combineEstimate(f,p,v){const _=this.count+1,j=(this.count*this.getX()+p)/_,E=(this.count*this.getY()+f)/_,D=(this.count*this.estimatedModuleSize+v)/_;return new za(j,E,D,_)}}class uo{constructor(f){this.bottomLeft=f[0],this.topLeft=f[1],this.topRight=f[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class Pr{constructor(f,p){this.image=f,this.resultPointCallback=p,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=p}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(f){const p=f!=null&&f.get(W.TRY_HARDER)!==void 0,v=f!=null&&f.get(W.PURE_BARCODE)!==void 0,_=this.image,j=_.getHeight(),E=_.getWidth();let D=Math.floor(3*j/(4*Pr.MAX_MODULES));(D<Pr.MIN_SKIP||p)&&(D=Pr.MIN_SKIP);let z=!1;const X=new Int32Array(5);for(let we=D-1;we<j&&!z;we+=D){X[0]=0,X[1]=0,X[2]=0,X[3]=0,X[4]=0;let Oe=0;for(let He=0;He<E;He++)if(_.get(He,we))(Oe&1)===1&&Oe++,X[Oe]++;else if((Oe&1)===0)if(Oe===4)if(Pr.foundPatternCross(X)){if(this.handlePossibleCenter(X,we,He,v)===!0)if(D=2,this.hasSkipped===!0)z=this.haveMultiplyConfirmedCenters();else{const lt=this.findRowSkip();lt>X[2]&&(we+=lt-X[2]-D,He=E-1)}else{X[0]=X[2],X[1]=X[3],X[2]=X[4],X[3]=1,X[4]=0,Oe=3;continue}Oe=0,X[0]=0,X[1]=0,X[2]=0,X[3]=0,X[4]=0}else X[0]=X[2],X[1]=X[3],X[2]=X[4],X[3]=1,X[4]=0,Oe=3;else X[++Oe]++;else X[Oe]++;Pr.foundPatternCross(X)&&this.handlePossibleCenter(X,we,E,v)===!0&&(D=X[0],this.hasSkipped&&(z=this.haveMultiplyConfirmedCenters()))}const oe=this.selectBestPatterns();return Ke.orderBestPatterns(oe),new uo(oe)}static centerFromEnd(f,p){return p-f[4]-f[3]-f[2]/2}static foundPatternCross(f){let p=0;for(let j=0;j<5;j++){const E=f[j];if(E===0)return!1;p+=E}if(p<7)return!1;const v=p/7,_=v/2;return Math.abs(v-f[0])<_&&Math.abs(v-f[1])<_&&Math.abs(3*v-f[2])<3*_&&Math.abs(v-f[3])<_&&Math.abs(v-f[4])<_}getCrossCheckStateCount(){const f=this.crossCheckStateCount;return f[0]=0,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f}crossCheckDiagonal(f,p,v,_){const j=this.getCrossCheckStateCount();let E=0;const D=this.image;for(;f>=E&&p>=E&&D.get(p-E,f-E);)j[2]++,E++;if(f<E||p<E)return!1;for(;f>=E&&p>=E&&!D.get(p-E,f-E)&&j[1]<=v;)j[1]++,E++;if(f<E||p<E||j[1]>v)return!1;for(;f>=E&&p>=E&&D.get(p-E,f-E)&&j[0]<=v;)j[0]++,E++;if(j[0]>v)return!1;const z=D.getHeight(),X=D.getWidth();for(E=1;f+E<z&&p+E<X&&D.get(p+E,f+E);)j[2]++,E++;if(f+E>=z||p+E>=X)return!1;for(;f+E<z&&p+E<X&&!D.get(p+E,f+E)&&j[3]<v;)j[3]++,E++;if(f+E>=z||p+E>=X||j[3]>=v)return!1;for(;f+E<z&&p+E<X&&D.get(p+E,f+E)&&j[4]<v;)j[4]++,E++;if(j[4]>=v)return!1;const oe=j[0]+j[1]+j[2]+j[3]+j[4];return Math.abs(oe-_)<2*_&&Pr.foundPatternCross(j)}crossCheckVertical(f,p,v,_){const j=this.image,E=j.getHeight(),D=this.getCrossCheckStateCount();let z=f;for(;z>=0&&j.get(p,z);)D[2]++,z--;if(z<0)return NaN;for(;z>=0&&!j.get(p,z)&&D[1]<=v;)D[1]++,z--;if(z<0||D[1]>v)return NaN;for(;z>=0&&j.get(p,z)&&D[0]<=v;)D[0]++,z--;if(D[0]>v)return NaN;for(z=f+1;z<E&&j.get(p,z);)D[2]++,z++;if(z===E)return NaN;for(;z<E&&!j.get(p,z)&&D[3]<v;)D[3]++,z++;if(z===E||D[3]>=v)return NaN;for(;z<E&&j.get(p,z)&&D[4]<v;)D[4]++,z++;if(D[4]>=v)return NaN;const X=D[0]+D[1]+D[2]+D[3]+D[4];return 5*Math.abs(X-_)>=2*_?NaN:Pr.foundPatternCross(D)?Pr.centerFromEnd(D,z):NaN}crossCheckHorizontal(f,p,v,_){const j=this.image,E=j.getWidth(),D=this.getCrossCheckStateCount();let z=f;for(;z>=0&&j.get(z,p);)D[2]++,z--;if(z<0)return NaN;for(;z>=0&&!j.get(z,p)&&D[1]<=v;)D[1]++,z--;if(z<0||D[1]>v)return NaN;for(;z>=0&&j.get(z,p)&&D[0]<=v;)D[0]++,z--;if(D[0]>v)return NaN;for(z=f+1;z<E&&j.get(z,p);)D[2]++,z++;if(z===E)return NaN;for(;z<E&&!j.get(z,p)&&D[3]<v;)D[3]++,z++;if(z===E||D[3]>=v)return NaN;for(;z<E&&j.get(z,p)&&D[4]<v;)D[4]++,z++;if(D[4]>=v)return NaN;const X=D[0]+D[1]+D[2]+D[3]+D[4];return 5*Math.abs(X-_)>=_?NaN:Pr.foundPatternCross(D)?Pr.centerFromEnd(D,z):NaN}handlePossibleCenter(f,p,v,_){const j=f[0]+f[1]+f[2]+f[3]+f[4];let E=Pr.centerFromEnd(f,v),D=this.crossCheckVertical(p,Math.floor(E),f[2],j);if(!isNaN(D)&&(E=this.crossCheckHorizontal(Math.floor(E),Math.floor(D),f[2],j),!isNaN(E)&&(!_||this.crossCheckDiagonal(Math.floor(D),Math.floor(E),f[2],j)))){const z=j/7;let X=!1;const oe=this.possibleCenters;for(let we=0,Oe=oe.length;we<Oe;we++){const He=oe[we];if(He.aboutEquals(z,D,E)){oe[we]=He.combineEstimate(D,E,z),X=!0;break}}if(!X){const we=new za(E,D,z);oe.push(we),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(we)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let p=null;for(const v of this.possibleCenters)if(v.getCount()>=Pr.CENTER_QUORUM)if(p==null)p=v;else return this.hasSkipped=!0,Math.floor((Math.abs(p.getX()-v.getX())-Math.abs(p.getY()-v.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let f=0,p=0;const v=this.possibleCenters.length;for(const E of this.possibleCenters)E.getCount()>=Pr.CENTER_QUORUM&&(f++,p+=E.getEstimatedModuleSize());if(f<3)return!1;const _=p/v;let j=0;for(const E of this.possibleCenters)j+=Math.abs(E.getEstimatedModuleSize()-_);return j<=.05*p}selectBestPatterns(){const f=this.possibleCenters.length;if(f<3)throw new se;const p=this.possibleCenters;let v;if(f>3){let _=0,j=0;for(const z of this.possibleCenters){const X=z.getEstimatedModuleSize();_+=X,j+=X*X}v=_/f;let E=Math.sqrt(j/f-v*v);p.sort((z,X)=>{const oe=Math.abs(X.getEstimatedModuleSize()-v),we=Math.abs(z.getEstimatedModuleSize()-v);return oe<we?-1:oe>we?1:0});const D=Math.max(.2*v,E);for(let z=0;z<p.length&&p.length>3;z++){const X=p[z];Math.abs(X.getEstimatedModuleSize()-v)>D&&(p.splice(z,1),z--)}}if(p.length>3){let _=0;for(const j of p)_+=j.getEstimatedModuleSize();v=_/p.length,p.sort((j,E)=>{if(E.getCount()===j.getCount()){const D=Math.abs(E.getEstimatedModuleSize()-v),z=Math.abs(j.getEstimatedModuleSize()-v);return D<z?1:D>z?-1:0}else return E.getCount()-j.getCount()}),p.splice(3)}return[p[0],p[1],p[2]]}}Pr.CENTER_QUORUM=2,Pr.MIN_SKIP=3,Pr.MAX_MODULES=57;class Ho{constructor(f){this.image=f}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(f){this.resultPointCallback=f==null?null:f.get(W.NEED_RESULT_POINT_CALLBACK);const v=new Pr(this.image,this.resultPointCallback).find(f);return this.processFinderPatternInfo(v)}processFinderPatternInfo(f){const p=f.getTopLeft(),v=f.getTopRight(),_=f.getBottomLeft(),j=this.calculateModuleSize(p,v,_);if(j<1)throw new se("No pattern found in proccess finder.");const E=Ho.computeDimension(p,v,_,j),D=vt.getProvisionalVersionForDimension(E),z=D.getDimensionForVersion()-7;let X=null;if(D.getAlignmentPatternCenters().length>0){const He=v.getX()-p.getX()+_.getX(),rt=v.getY()-p.getY()+_.getY(),lt=1-3/z,xt=Math.floor(p.getX()+lt*(He-p.getX())),St=Math.floor(p.getY()+lt*(rt-p.getY()));for(let Vt=4;Vt<=16;Vt<<=1)try{X=this.findAlignmentInRegion(j,xt,St,Vt);break}catch(Wt){if(!(Wt instanceof se))throw Wt}}const oe=Ho.createTransform(p,v,_,X,E),we=Ho.sampleGrid(this.image,oe,E);let Oe;return X===null?Oe=[_,p,v]:Oe=[_,p,v,X],new zt(we,Oe)}static createTransform(f,p,v,_,j){const E=j-3.5;let D,z,X,oe;return _!==null?(D=_.getX(),z=_.getY(),X=E-3,oe=X):(D=p.getX()-f.getX()+v.getX(),z=p.getY()-f.getY()+v.getY(),X=E,oe=E),sr.quadrilateralToQuadrilateral(3.5,3.5,E,3.5,X,oe,3.5,E,f.getX(),f.getY(),p.getX(),p.getY(),D,z,v.getX(),v.getY())}static sampleGrid(f,p,v){return tr.getInstance().sampleGridWithTransform(f,v,v,p)}static computeDimension(f,p,v,_){const j=Je.round(Ke.distance(f,p)/_),E=Je.round(Ke.distance(f,v)/_);let D=Math.floor((j+E)/2)+7;switch(D&3){case 0:D++;break;case 2:D--;break;case 3:throw new se("Dimensions could be not found.")}return D}calculateModuleSize(f,p,v){return(this.calculateModuleSizeOneWay(f,p)+this.calculateModuleSizeOneWay(f,v))/2}calculateModuleSizeOneWay(f,p){const v=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(f.getX()),Math.floor(f.getY()),Math.floor(p.getX()),Math.floor(p.getY())),_=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(p.getX()),Math.floor(p.getY()),Math.floor(f.getX()),Math.floor(f.getY()));return isNaN(v)?_/7:isNaN(_)?v/7:(v+_)/14}sizeOfBlackWhiteBlackRunBothWays(f,p,v,_){let j=this.sizeOfBlackWhiteBlackRun(f,p,v,_),E=1,D=f-(v-f);D<0?(E=f/(f-D),D=0):D>=this.image.getWidth()&&(E=(this.image.getWidth()-1-f)/(D-f),D=this.image.getWidth()-1);let z=Math.floor(p-(_-p)*E);return E=1,z<0?(E=p/(p-z),z=0):z>=this.image.getHeight()&&(E=(this.image.getHeight()-1-p)/(z-p),z=this.image.getHeight()-1),D=Math.floor(f+(D-f)*E),j+=this.sizeOfBlackWhiteBlackRun(f,p,D,z),j-1}sizeOfBlackWhiteBlackRun(f,p,v,_){const j=Math.abs(_-p)>Math.abs(v-f);if(j){let He=f;f=p,p=He,He=v,v=_,_=He}const E=Math.abs(v-f),D=Math.abs(_-p);let z=-E/2;const X=f<v?1:-1,oe=p<_?1:-1;let we=0;const Oe=v+X;for(let He=f,rt=p;He!==Oe;He+=X){const lt=j?rt:He,xt=j?He:rt;if(we===1===this.image.get(lt,xt)){if(we===2)return Je.distance(He,rt,f,p);we++}if(z+=D,z>0){if(rt===_)break;rt+=oe,z-=E}}return we===2?Je.distance(v+X,_,f,p):NaN}findAlignmentInRegion(f,p,v,_){const j=Math.floor(_*f),E=Math.max(0,p-j),D=Math.min(this.image.getWidth()-1,p+j);if(D-E<f*3)throw new se("Alignment top exceeds estimated module size.");const z=Math.max(0,v-j),X=Math.min(this.image.getHeight()-1,v+j);if(X-z<f*3)throw new se("Alignment bottom exceeds estimated module size.");return new aa(this.image,E,z,D-E,X-z,f,this.resultPointCallback).find()}}class xl{constructor(){this.decoder=new bi}getDecoder(){return this.decoder}decode(f,p){let v,_;if(p!=null&&p.get(W.PURE_BARCODE)!==void 0){const z=xl.extractPureBits(f.getBlackMatrix());v=this.decoder.decodeBitMatrix(z,p),_=xl.NO_POINTS}else{const z=new Ho(f.getBlackMatrix()).detect(p);v=this.decoder.decodeBitMatrix(z.getBits(),p),_=z.getPoints()}v.getOther()instanceof Ki&&v.getOther().applyMirroredCorrection(_);const j=new J(v.getText(),v.getRawBytes(),void 0,_,Y.QR_CODE,void 0),E=v.getByteSegments();E!==null&&j.putMetadata(me.BYTE_SEGMENTS,E);const D=v.getECLevel();return D!==null&&j.putMetadata(me.ERROR_CORRECTION_LEVEL,D),v.hasStructuredAppend()&&(j.putMetadata(me.STRUCTURED_APPEND_SEQUENCE,v.getStructuredAppendSequenceNumber()),j.putMetadata(me.STRUCTURED_APPEND_PARITY,v.getStructuredAppendParity())),j}reset(){}static extractPureBits(f){const p=f.getTopLeftOnBit(),v=f.getBottomRightOnBit();if(p===null||v===null)throw new se;const _=this.moduleSize(p,f);let j=p[1],E=v[1],D=p[0],z=v[0];if(D>=z||j>=E)throw new se;if(E-j!==z-D&&(z=D+(E-j),z>=f.getWidth()))throw new se;const X=Math.round((z-D+1)/_),oe=Math.round((E-j+1)/_);if(X<=0||oe<=0)throw new se;if(oe!==X)throw new se;const we=Math.floor(_/2);j+=we,D+=we;const Oe=D+Math.floor((X-1)*_)-z;if(Oe>0){if(Oe>we)throw new se;D-=Oe}const He=j+Math.floor((oe-1)*_)-E;if(He>0){if(He>we)throw new se;j-=He}const rt=new te(X,oe);for(let lt=0;lt<oe;lt++){const xt=j+Math.floor(lt*_);for(let St=0;St<X;St++)f.get(D+Math.floor(St*_),xt)&&rt.set(St,lt)}return rt}static moduleSize(f,p){const v=p.getHeight(),_=p.getWidth();let j=f[0],E=f[1],D=!0,z=0;for(;j<_&&E<v;){if(D!==p.get(j,E)){if(++z===5)break;D=!D}j++,E++}if(j===_||E===v)throw new se;return(j-f[0])/7}}xl.NO_POINTS=new Array;class un{PDF417Common(){}static getBitCountSum(f){return Je.sum(f)}static toIntArray(f){if(f==null||!f.length)return un.EMPTY_INT_ARRAY;const p=new Int32Array(f.length);let v=0;for(const _ of f)p[v++]=_;return p}static getCodeword(f){const p=O.binarySearch(un.SYMBOL_TABLE,f&262143);return p<0?-1:(un.CODEWORD_TABLE[p]-1)%un.NUMBER_OF_CODEWORDS}}un.NUMBER_OF_CODEWORDS=929,un.MAX_CODEWORDS_IN_BARCODE=un.NUMBER_OF_CODEWORDS-1,un.MIN_ROWS_IN_BARCODE=3,un.MAX_ROWS_IN_BARCODE=90,un.MODULES_IN_CODEWORD=17,un.MODULES_IN_STOP_PATTERN=18,un.BARS_IN_MODULE=8,un.EMPTY_INT_ARRAY=new Int32Array([]),un.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),un.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class vh{constructor(f,p){this.bits=f,this.points=p}getBits(){return this.bits}getPoints(){return this.points}}class hn{static detectMultiple(f,p,v){let _=f.getBlackMatrix(),j=hn.detect(v,_);return j.length||(_=_.clone(),_.rotate180(),j=hn.detect(v,_)),new vh(_,j)}static detect(f,p){const v=new Array;let _=0,j=0,E=!1;for(;_<p.getHeight();){const D=hn.findVertices(p,_,j);if(D[0]==null&&D[3]==null){if(!E)break;E=!1,j=0;for(const z of v)z[1]!=null&&(_=Math.trunc(Math.max(_,z[1].getY()))),z[3]!=null&&(_=Math.max(_,Math.trunc(z[3].getY())));_+=hn.ROW_STEP;continue}if(E=!0,v.push(D),!f)break;D[2]!=null?(j=Math.trunc(D[2].getX()),_=Math.trunc(D[2].getY())):(j=Math.trunc(D[4].getX()),_=Math.trunc(D[4].getY()))}return v}static findVertices(f,p,v){const _=f.getHeight(),j=f.getWidth(),E=new Array(8);return hn.copyToResult(E,hn.findRowsWithPattern(f,_,j,p,v,hn.START_PATTERN),hn.INDEXES_START_PATTERN),E[4]!=null&&(v=Math.trunc(E[4].getX()),p=Math.trunc(E[4].getY())),hn.copyToResult(E,hn.findRowsWithPattern(f,_,j,p,v,hn.STOP_PATTERN),hn.INDEXES_STOP_PATTERN),E}static copyToResult(f,p,v){for(let _=0;_<v.length;_++)f[v[_]]=p[_]}static findRowsWithPattern(f,p,v,_,j,E){const D=new Array(4);let z=!1;const X=new Int32Array(E.length);for(;_<p;_+=hn.ROW_STEP){let we=hn.findGuardPattern(f,j,_,v,!1,E,X);if(we!=null){for(;_>0;){const Oe=hn.findGuardPattern(f,j,--_,v,!1,E,X);if(Oe!=null)we=Oe;else{_++;break}}D[0]=new Ke(we[0],_),D[1]=new Ke(we[1],_),z=!0;break}}let oe=_+1;if(z){let we=0,Oe=Int32Array.from([Math.trunc(D[0].getX()),Math.trunc(D[1].getX())]);for(;oe<p;oe++){const He=hn.findGuardPattern(f,Oe[0],oe,v,!1,E,X);if(He!=null&&Math.abs(Oe[0]-He[0])<hn.MAX_PATTERN_DRIFT&&Math.abs(Oe[1]-He[1])<hn.MAX_PATTERN_DRIFT)Oe=He,we=0;else{if(we>hn.SKIPPED_ROW_COUNT_MAX)break;we++}}oe-=we+1,D[2]=new Ke(Oe[0],oe),D[3]=new Ke(Oe[1],oe)}return oe-_<hn.BARCODE_MIN_HEIGHT&&O.fill(D,null),D}static findGuardPattern(f,p,v,_,j,E,D){O.fillWithin(D,0,D.length,0);let z=p,X=0;for(;f.get(z,v)&&z>0&&X++<hn.MAX_PIXEL_DRIFT;)z--;let oe=z,we=0,Oe=E.length;for(let He=j;oe<_;oe++)if(f.get(oe,v)!==He)D[we]++;else{if(we===Oe-1){if(hn.patternMatchVariance(D,E,hn.MAX_INDIVIDUAL_VARIANCE)<hn.MAX_AVG_VARIANCE)return new Int32Array([z,oe]);z+=D[0]+D[1],y.arraycopy(D,2,D,0,we-1),D[we-1]=0,D[we]=0,we--}else we++;D[we]=1,He=!He}return we===Oe-1&&hn.patternMatchVariance(D,E,hn.MAX_INDIVIDUAL_VARIANCE)<hn.MAX_AVG_VARIANCE?new Int32Array([z,oe-1]):null}static patternMatchVariance(f,p,v){let _=f.length,j=0,E=0;for(let X=0;X<_;X++)j+=f[X],E+=p[X];if(j<E)return 1/0;let D=j/E;v*=D;let z=0;for(let X=0;X<_;X++){let oe=f[X],we=p[X]*D,Oe=oe>we?oe-we:we-oe;if(Oe>v)return 1/0;z+=Oe}return z/j}}hn.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),hn.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),hn.MAX_AVG_VARIANCE=.42,hn.MAX_INDIVIDUAL_VARIANCE=.8,hn.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),hn.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),hn.MAX_PIXEL_DRIFT=3,hn.MAX_PATTERN_DRIFT=5,hn.SKIPPED_ROW_COUNT_MAX=25,hn.ROW_STEP=5,hn.BARCODE_MIN_HEIGHT=10;class da{constructor(f,p){if(p.length===0)throw new x;this.field=f;let v=p.length;if(v>1&&p[0]===0){let _=1;for(;_<v&&p[_]===0;)_++;_===v?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(v-_),y.arraycopy(p,_,this.coefficients,0,this.coefficients.length))}else this.coefficients=p}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(f){return this.coefficients[this.coefficients.length-1-f]}evaluateAt(f){if(f===0)return this.getCoefficient(0);if(f===1){let _=0;for(let j of this.coefficients)_=this.field.add(_,j);return _}let p=this.coefficients[0],v=this.coefficients.length;for(let _=1;_<v;_++)p=this.field.add(this.field.multiply(f,p),this.coefficients[_]);return p}add(f){if(!this.field.equals(f.field))throw new x("ModulusPolys do not have same ModulusGF field");if(this.isZero())return f;if(f.isZero())return this;let p=this.coefficients,v=f.coefficients;if(p.length>v.length){let E=p;p=v,v=E}let _=new Int32Array(v.length),j=v.length-p.length;y.arraycopy(v,0,_,0,j);for(let E=j;E<v.length;E++)_[E]=this.field.add(p[E-j],v[E]);return new da(this.field,_)}subtract(f){if(!this.field.equals(f.field))throw new x("ModulusPolys do not have same ModulusGF field");return f.isZero()?this:this.add(f.negative())}multiply(f){return f instanceof da?this.multiplyOther(f):this.multiplyScalar(f)}multiplyOther(f){if(!this.field.equals(f.field))throw new x("ModulusPolys do not have same ModulusGF field");if(this.isZero()||f.isZero())return new da(this.field,new Int32Array([0]));let p=this.coefficients,v=p.length,_=f.coefficients,j=_.length,E=new Int32Array(v+j-1);for(let D=0;D<v;D++){let z=p[D];for(let X=0;X<j;X++)E[D+X]=this.field.add(E[D+X],this.field.multiply(z,_[X]))}return new da(this.field,E)}negative(){let f=this.coefficients.length,p=new Int32Array(f);for(let v=0;v<f;v++)p[v]=this.field.subtract(0,this.coefficients[v]);return new da(this.field,p)}multiplyScalar(f){if(f===0)return new da(this.field,new Int32Array([0]));if(f===1)return this;let p=this.coefficients.length,v=new Int32Array(p);for(let _=0;_<p;_++)v[_]=this.field.multiply(this.coefficients[_],f);return new da(this.field,v)}multiplyByMonomial(f,p){if(f<0)throw new x;if(p===0)return new da(this.field,new Int32Array([0]));let v=this.coefficients.length,_=new Int32Array(v+f);for(let j=0;j<v;j++)_[j]=this.field.multiply(this.coefficients[j],p);return new da(this.field,_)}toString(){let f=new Z;for(let p=this.getDegree();p>=0;p--){let v=this.getCoefficient(p);v!==0&&(v<0?(f.append(" - "),v=-v):f.length()>0&&f.append(" + "),(p===0||v!==1)&&f.append(v),p!==0&&(p===1?f.append("x"):(f.append("x^"),f.append(p))))}return f.toString()}}class n0{add(f,p){return(f+p)%this.modulus}subtract(f,p){return(this.modulus+f-p)%this.modulus}exp(f){return this.expTable[f]}log(f){if(f===0)throw new x;return this.logTable[f]}inverse(f){if(f===0)throw new ce;return this.expTable[this.modulus-this.logTable[f]-1]}multiply(f,p){return f===0||p===0?0:this.expTable[(this.logTable[f]+this.logTable[p])%(this.modulus-1)]}getSize(){return this.modulus}equals(f){return f===this}}class hc extends n0{constructor(f,p){super(),this.modulus=f,this.expTable=new Int32Array(f),this.logTable=new Int32Array(f);let v=1;for(let _=0;_<f;_++)this.expTable[_]=v,v=v*p%f;for(let _=0;_<f-1;_++)this.logTable[this.expTable[_]]=_;this.zero=new da(this,new Int32Array([0])),this.one=new da(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(f,p){if(f<0)throw new x;if(p===0)return this.zero;let v=new Int32Array(f+1);return v[0]=p,new da(this,v)}}hc.PDF417_GF=new hc(un.NUMBER_OF_CODEWORDS,3);class ho{constructor(){this.field=hc.PDF417_GF}decode(f,p,v){let _=new da(this.field,f),j=new Int32Array(p),E=!1;for(let rt=p;rt>0;rt--){let lt=_.evaluateAt(this.field.exp(rt));j[p-rt]=lt,lt!==0&&(E=!0)}if(!E)return 0;let D=this.field.getOne();if(v!=null)for(const rt of v){let lt=this.field.exp(f.length-1-rt),xt=new da(this.field,new Int32Array([this.field.subtract(0,lt),1]));D=D.multiply(xt)}let z=new da(this.field,j),X=this.runEuclideanAlgorithm(this.field.buildMonomial(p,1),z,p),oe=X[0],we=X[1],Oe=this.findErrorLocations(oe),He=this.findErrorMagnitudes(we,oe,Oe);for(let rt=0;rt<Oe.length;rt++){let lt=f.length-1-this.field.log(Oe[rt]);if(lt<0)throw g.getChecksumInstance();f[lt]=this.field.subtract(f[lt],He[rt])}return Oe.length}runEuclideanAlgorithm(f,p,v){if(f.getDegree()<p.getDegree()){let Oe=f;f=p,p=Oe}let _=f,j=p,E=this.field.getZero(),D=this.field.getOne();for(;j.getDegree()>=Math.round(v/2);){let Oe=_,He=E;if(_=j,E=D,_.isZero())throw g.getChecksumInstance();j=Oe;let rt=this.field.getZero(),lt=_.getCoefficient(_.getDegree()),xt=this.field.inverse(lt);for(;j.getDegree()>=_.getDegree()&&!j.isZero();){let St=j.getDegree()-_.getDegree(),Vt=this.field.multiply(j.getCoefficient(j.getDegree()),xt);rt=rt.add(this.field.buildMonomial(St,Vt)),j=j.subtract(_.multiplyByMonomial(St,Vt))}D=rt.multiply(E).subtract(He).negative()}let z=D.getCoefficient(0);if(z===0)throw g.getChecksumInstance();let X=this.field.inverse(z),oe=D.multiply(X),we=j.multiply(X);return[oe,we]}findErrorLocations(f){let p=f.getDegree(),v=new Int32Array(p),_=0;for(let j=1;j<this.field.getSize()&&_<p;j++)f.evaluateAt(j)===0&&(v[_]=this.field.inverse(j),_++);if(_!==p)throw g.getChecksumInstance();return v}findErrorMagnitudes(f,p,v){let _=p.getDegree(),j=new Int32Array(_);for(let X=1;X<=_;X++)j[_-X]=this.field.multiply(X,p.getCoefficient(X));let E=new da(this.field,j),D=v.length,z=new Int32Array(D);for(let X=0;X<D;X++){let oe=this.field.inverse(v[X]),we=this.field.subtract(0,f.evaluateAt(oe)),Oe=this.field.inverse(E.evaluateAt(oe));z[X]=this.field.multiply(we,Oe)}return z}}class To{constructor(f,p,v,_,j){f instanceof To?this.constructor_2(f):this.constructor_1(f,p,v,_,j)}constructor_1(f,p,v,_,j){const E=p==null||v==null,D=_==null||j==null;if(E&&D)throw new se;E?(p=new Ke(0,_.getY()),v=new Ke(0,j.getY())):D&&(_=new Ke(f.getWidth()-1,p.getY()),j=new Ke(f.getWidth()-1,v.getY())),this.image=f,this.topLeft=p,this.bottomLeft=v,this.topRight=_,this.bottomRight=j,this.minX=Math.trunc(Math.min(p.getX(),v.getX())),this.maxX=Math.trunc(Math.max(_.getX(),j.getX())),this.minY=Math.trunc(Math.min(p.getY(),_.getY())),this.maxY=Math.trunc(Math.max(v.getY(),j.getY()))}constructor_2(f){this.image=f.image,this.topLeft=f.getTopLeft(),this.bottomLeft=f.getBottomLeft(),this.topRight=f.getTopRight(),this.bottomRight=f.getBottomRight(),this.minX=f.getMinX(),this.maxX=f.getMaxX(),this.minY=f.getMinY(),this.maxY=f.getMaxY()}static merge(f,p){return f==null?p:p==null?f:new To(f.image,f.topLeft,f.bottomLeft,p.topRight,p.bottomRight)}addMissingRows(f,p,v){let _=this.topLeft,j=this.bottomLeft,E=this.topRight,D=this.bottomRight;if(f>0){let z=v?this.topLeft:this.topRight,X=Math.trunc(z.getY()-f);X<0&&(X=0);let oe=new Ke(z.getX(),X);v?_=oe:E=oe}if(p>0){let z=v?this.bottomLeft:this.bottomRight,X=Math.trunc(z.getY()+p);X>=this.image.getHeight()&&(X=this.image.getHeight()-1);let oe=new Ke(z.getX(),X);v?j=oe:D=oe}return new To(this.image,_,j,E,D)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class Ml{constructor(f,p,v,_){this.columnCount=f,this.errorCorrectionLevel=_,this.rowCountUpperPart=p,this.rowCountLowerPart=v,this.rowCount=p+v}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class pl{constructor(){this.buffer=""}static form(f,p){let v=-1;function _(E,D,z,X,oe,we){if(E==="%%")return"%";if(p[++v]===void 0)return;E=X?parseInt(X.substr(1)):void 0;let Oe=oe?parseInt(oe.substr(1)):void 0,He;switch(we){case"s":He=p[v];break;case"c":He=p[v][0];break;case"f":He=parseFloat(p[v]).toFixed(E);break;case"p":He=parseFloat(p[v]).toPrecision(E);break;case"e":He=parseFloat(p[v]).toExponential(E);break;case"x":He=parseInt(p[v]).toString(Oe||16);break;case"d":He=parseFloat(parseInt(p[v],Oe||10).toPrecision(E)).toFixed(0);break}He=typeof He=="object"?JSON.stringify(He):(+He).toString(Oe);let rt=parseInt(z),lt=z&&z[0]+""=="0"?"0":" ";for(;He.length<rt;)He=D!==void 0?He+lt:lt+He;return He}let j=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return f.replace(j,_)}format(f,...p){this.buffer+=pl.form(f,p)}toString(){return this.buffer}}class Oo{constructor(f){this.boundingBox=new To(f),this.codewords=new Array(f.getMaxY()-f.getMinY()+1)}getCodewordNearby(f){let p=this.getCodeword(f);if(p!=null)return p;for(let v=1;v<Oo.MAX_NEARBY_DISTANCE;v++){let _=this.imageRowToCodewordIndex(f)-v;if(_>=0&&(p=this.codewords[_],p!=null)||(_=this.imageRowToCodewordIndex(f)+v,_<this.codewords.length&&(p=this.codewords[_],p!=null)))return p}return null}imageRowToCodewordIndex(f){return f-this.boundingBox.getMinY()}setCodeword(f,p){this.codewords[this.imageRowToCodewordIndex(f)]=p}getCodeword(f){return this.codewords[this.imageRowToCodewordIndex(f)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const f=new pl;let p=0;for(const v of this.codewords){if(v==null){f.format("%3d:    |   %n",p++);continue}f.format("%3d: %3d|%3d%n",p++,v.getRowNumber(),v.getValue())}return f.toString()}}Oo.MAX_NEARBY_DISTANCE=5;class Ll{constructor(){this.values=new Map}setValue(f){f=Math.trunc(f);let p=this.values.get(f);p==null&&(p=0),p++,this.values.set(f,p)}getValue(){let f=-1,p=new Array;for(const[v,_]of this.values.entries()){const j={getKey:()=>v,getValue:()=>_};j.getValue()>f?(f=j.getValue(),p=[],p.push(j.getKey())):j.getValue()===f&&p.push(j.getKey())}return un.toIntArray(p)}getConfidence(f){return this.values.get(f)}}class Td extends Oo{constructor(f,p){super(f),this._isLeft=p}setRowNumbers(){for(let f of this.getCodewords())f!=null&&f.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(f){let p=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(p,f);let v=this.getBoundingBox(),_=this._isLeft?v.getTopLeft():v.getTopRight(),j=this._isLeft?v.getBottomLeft():v.getBottomRight(),E=this.imageRowToCodewordIndex(Math.trunc(_.getY())),D=this.imageRowToCodewordIndex(Math.trunc(j.getY())),z=-1,X=1,oe=0;for(let we=E;we<D;we++){if(p[we]==null)continue;let Oe=p[we],He=Oe.getRowNumber()-z;if(He===0)oe++;else if(He===1)X=Math.max(X,oe),oe=1,z=Oe.getRowNumber();else if(He<0||Oe.getRowNumber()>=f.getRowCount()||He>we)p[we]=null;else{let rt;X>2?rt=(X-2)*He:rt=He;let lt=rt>=we;for(let xt=1;xt<=rt&&!lt;xt++)lt=p[we-xt]!=null;lt?p[we]=null:(z=Oe.getRowNumber(),oe=1)}}}getRowHeights(){let f=this.getBarcodeMetadata();if(f==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(f);let p=new Int32Array(f.getRowCount());for(let v of this.getCodewords())if(v!=null){let _=v.getRowNumber();if(_>=p.length)continue;p[_]++}return p}adjustIncompleteIndicatorColumnRowNumbers(f){let p=this.getBoundingBox(),v=this._isLeft?p.getTopLeft():p.getTopRight(),_=this._isLeft?p.getBottomLeft():p.getBottomRight(),j=this.imageRowToCodewordIndex(Math.trunc(v.getY())),E=this.imageRowToCodewordIndex(Math.trunc(_.getY())),D=this.getCodewords(),z=-1;for(let X=j;X<E;X++){if(D[X]==null)continue;let oe=D[X];oe.setRowNumberAsRowIndicatorColumn();let we=oe.getRowNumber()-z;we===0||(we===1?z=oe.getRowNumber():oe.getRowNumber()>=f.getRowCount()?D[X]=null:z=oe.getRowNumber())}}getBarcodeMetadata(){let f=this.getCodewords(),p=new Ll,v=new Ll,_=new Ll,j=new Ll;for(let D of f){if(D==null)continue;D.setRowNumberAsRowIndicatorColumn();let z=D.getValue()%30,X=D.getRowNumber();switch(this._isLeft||(X+=2),X%3){case 0:v.setValue(z*3+1);break;case 1:j.setValue(z/3),_.setValue(z%3);break;case 2:p.setValue(z+1);break}}if(p.getValue().length===0||v.getValue().length===0||_.getValue().length===0||j.getValue().length===0||p.getValue()[0]<1||v.getValue()[0]+_.getValue()[0]<un.MIN_ROWS_IN_BARCODE||v.getValue()[0]+_.getValue()[0]>un.MAX_ROWS_IN_BARCODE)return null;let E=new Ml(p.getValue()[0],v.getValue()[0],_.getValue()[0],j.getValue()[0]);return this.removeIncorrectCodewords(f,E),E}removeIncorrectCodewords(f,p){for(let v=0;v<f.length;v++){let _=f[v];if(f[v]==null)continue;let j=_.getValue()%30,E=_.getRowNumber();if(E>p.getRowCount()){f[v]=null;continue}switch(this._isLeft||(E+=2),E%3){case 0:j*3+1!==p.getRowCountUpperPart()&&(f[v]=null);break;case 1:(Math.trunc(j/3)!==p.getErrorCorrectionLevel()||j%3!==p.getRowCountLowerPart())&&(f[v]=null);break;case 2:j+1!==p.getColumnCount()&&(f[v]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class bs{constructor(f,p){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=f,this.barcodeColumnCount=f.getColumnCount(),this.boundingBox=p,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let f=un.MAX_CODEWORDS_IN_BARCODE,p;do p=f,f=this.adjustRowNumbersAndGetCount();while(f>0&&f<p);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(f){f!=null&&f.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let f=this.adjustRowNumbersByRow();if(f===0)return 0;for(let p=1;p<this.barcodeColumnCount+1;p++){let v=this.detectionResultColumns[p].getCodewords();for(let _=0;_<v.length;_++)v[_]!=null&&(v[_].hasValidRowNumber()||this.adjustRowNumbers(p,_,v))}return f}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let f=this.detectionResultColumns[0].getCodewords(),p=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let v=0;v<f.length;v++)if(f[v]!=null&&p[v]!=null&&f[v].getRowNumber()===p[v].getRowNumber())for(let _=1;_<=this.barcodeColumnCount;_++){let j=this.detectionResultColumns[_].getCodewords()[v];j!=null&&(j.setRowNumber(f[v].getRowNumber()),j.hasValidRowNumber()||(this.detectionResultColumns[_].getCodewords()[v]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let f=0,p=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let v=0;v<p.length;v++){if(p[v]==null)continue;let _=p[v].getRowNumber(),j=0;for(let E=this.barcodeColumnCount+1;E>0&&j<this.ADJUST_ROW_NUMBER_SKIP;E--){let D=this.detectionResultColumns[E].getCodewords()[v];D!=null&&(j=bs.adjustRowNumberIfValid(_,j,D),D.hasValidRowNumber()||f++)}}return f}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let f=0,p=this.detectionResultColumns[0].getCodewords();for(let v=0;v<p.length;v++){if(p[v]==null)continue;let _=p[v].getRowNumber(),j=0;for(let E=1;E<this.barcodeColumnCount+1&&j<this.ADJUST_ROW_NUMBER_SKIP;E++){let D=this.detectionResultColumns[E].getCodewords()[v];D!=null&&(j=bs.adjustRowNumberIfValid(_,j,D),D.hasValidRowNumber()||f++)}}return f}static adjustRowNumberIfValid(f,p,v){return v==null||v.hasValidRowNumber()||(v.isValidRowNumber(f)?(v.setRowNumber(f),p=0):++p),p}adjustRowNumbers(f,p,v){if(!this.detectionResultColumns[f-1])return;let _=v[p],j=this.detectionResultColumns[f-1].getCodewords(),E=j;this.detectionResultColumns[f+1]!=null&&(E=this.detectionResultColumns[f+1].getCodewords());let D=new Array(14);D[2]=j[p],D[3]=E[p],p>0&&(D[0]=v[p-1],D[4]=j[p-1],D[5]=E[p-1]),p>1&&(D[8]=v[p-2],D[10]=j[p-2],D[11]=E[p-2]),p<v.length-1&&(D[1]=v[p+1],D[6]=j[p+1],D[7]=E[p+1]),p<v.length-2&&(D[9]=v[p+2],D[12]=j[p+2],D[13]=E[p+2]);for(let z of D)if(bs.adjustRowNumber(_,z))return}static adjustRowNumber(f,p){return p==null?!1:p.hasValidRowNumber()&&p.getBucket()===f.getBucket()?(f.setRowNumber(p.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(f){this.boundingBox=f}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(f,p){this.detectionResultColumns[f]=p}getDetectionResultColumn(f){return this.detectionResultColumns[f]}toString(){let f=this.detectionResultColumns[0];f==null&&(f=this.detectionResultColumns[this.barcodeColumnCount+1]);let p=new pl;for(let v=0;v<f.getCodewords().length;v++){p.format("CW %3d:",v);for(let _=0;_<this.barcodeColumnCount+2;_++){if(this.detectionResultColumns[_]==null){p.format("    |   ");continue}let j=this.detectionResultColumns[_].getCodewords()[v];if(j==null){p.format("    |   ");continue}p.format(" %3d|%3d",j.getRowNumber(),j.getValue())}p.format("%n")}return p.toString()}}class vi{constructor(f,p,v,_){this.rowNumber=vi.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(f),this.endX=Math.trunc(p),this.bucket=Math.trunc(v),this.value=Math.trunc(_)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(f){return f!==vi.BARCODE_ROW_UNKNOWN&&this.bucket===f%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(f){this.rowNumber=f}toString(){return this.rowNumber+"|"+this.value}}vi.BARCODE_ROW_UNKNOWN=-1;class cs{static initialize(){for(let f=0;f<un.SYMBOL_TABLE.length;f++){let p=un.SYMBOL_TABLE[f],v=p&1;for(let _=0;_<un.BARS_IN_MODULE;_++){let j=0;for(;(p&1)===v;)j+=1,p>>=1;v=p&1,cs.RATIOS_TABLE[f]||(cs.RATIOS_TABLE[f]=new Array(un.BARS_IN_MODULE)),cs.RATIOS_TABLE[f][un.BARS_IN_MODULE-_-1]=Math.fround(j/un.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(f){let p=cs.getDecodedCodewordValue(cs.sampleBitCounts(f));return p!==-1?p:cs.getClosestDecodedValue(f)}static sampleBitCounts(f){let p=Je.sum(f),v=new Int32Array(un.BARS_IN_MODULE),_=0,j=0;for(let E=0;E<un.MODULES_IN_CODEWORD;E++){let D=p/(2*un.MODULES_IN_CODEWORD)+E*p/un.MODULES_IN_CODEWORD;j+f[_]<=D&&(j+=f[_],_++),v[_]++}return v}static getDecodedCodewordValue(f){let p=cs.getBitValue(f);return un.getCodeword(p)===-1?-1:p}static getBitValue(f){let p=0;for(let v=0;v<f.length;v++)for(let _=0;_<f[v];_++)p=p<<1|(v%2===0?1:0);return Math.trunc(p)}static getClosestDecodedValue(f){let p=Je.sum(f),v=new Array(un.BARS_IN_MODULE);if(p>1)for(let E=0;E<v.length;E++)v[E]=Math.fround(f[E]/p);let _=ct.MAX_VALUE,j=-1;this.bSymbolTableReady||cs.initialize();for(let E=0;E<cs.RATIOS_TABLE.length;E++){let D=0,z=cs.RATIOS_TABLE[E];for(let X=0;X<un.BARS_IN_MODULE;X++){let oe=Math.fround(z[X]-v[X]);if(D+=Math.fround(oe*oe),D>=_)break}D<_&&(_=D,j=un.SYMBOL_TABLE[E])}return j}}cs.bSymbolTableReady=!1,cs.RATIOS_TABLE=new Array(un.SYMBOL_TABLE.length).map(ye=>new Array(un.BARS_IN_MODULE));class Rl{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(f){this.segmentIndex=f}getFileId(){return this.fileId}setFileId(f){this.fileId=f}getOptionalData(){return this.optionalData}setOptionalData(f){this.optionalData=f}isLastSegment(){return this.lastSegment}setLastSegment(f){this.lastSegment=f}getSegmentCount(){return this.segmentCount}setSegmentCount(f){this.segmentCount=f}getSender(){return this.sender||null}setSender(f){this.sender=f}getAddressee(){return this.addressee||null}setAddressee(f){this.addressee=f}getFileName(){return this.fileName}setFileName(f){this.fileName=f}getFileSize(){return this.fileSize}setFileSize(f){this.fileSize=f}getChecksum(){return this.checksum}setChecksum(f){this.checksum=f}getTimestamp(){return this.timestamp}setTimestamp(f){this.timestamp=f}}class Od{static parseLong(f,p=void 0){return parseInt(f,p)}}class Vc extends c{}Vc.kind="NullPointerException";class fc{writeBytes(f){this.writeBytesOffset(f,0,f.length)}writeBytesOffset(f,p,v){if(f==null)throw new Vc;if(p<0||p>f.length||v<0||p+v>f.length||p+v<0)throw new N;if(v===0)return;for(let _=0;_<v;_++)this.write(f[p+_])}flush(){}close(){}}class Wc extends c{}class Pd extends fc{constructor(f=32){if(super(),this.count=0,f<0)throw new x("Negative initial size: "+f);this.buf=new Uint8Array(f)}ensureCapacity(f){f-this.buf.length>0&&this.grow(f)}grow(f){let v=this.buf.length<<1;if(v-f<0&&(v=f),v<0){if(f<0)throw new Wc;v=A.MAX_VALUE}this.buf=O.copyOfUint8Array(this.buf,v)}write(f){this.ensureCapacity(this.count+1),this.buf[this.count]=f,this.count+=1}writeBytesOffset(f,p,v){if(p<0||p>f.length||v<0||p+v-f.length>0)throw new N;this.ensureCapacity(this.count+v),y.arraycopy(f,p,this.buf,this.count,v),this.count+=v}writeTo(f){f.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return O.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(f){return f?typeof f=="string"?this.toString_string(f):this.toString_number(f):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(f){return new String(this.buf).toString()}toString_number(f){return new String(this.buf).toString()}close(){}}var Xn;(function(ye){ye[ye.ALPHA=0]="ALPHA",ye[ye.LOWER=1]="LOWER",ye[ye.MIXED=2]="MIXED",ye[ye.PUNCT=3]="PUNCT",ye[ye.ALPHA_SHIFT=4]="ALPHA_SHIFT",ye[ye.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Xn||(Xn={}));function Fl(){if(typeof window<"u")return window.BigInt||null;if(typeof _2<"u")return _2.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let Id;function gl(ye){if(typeof Id>"u"&&(Id=Fl()),Id===null)throw new Error("BigInt is not supported!");return Id(ye)}function mc(){let ye=[];ye[0]=gl(1);let f=gl(900);ye[1]=f;for(let p=2;p<16;p++)ye[p]=ye[p-1]*f;return ye}class Pt{static decode(f,p){let v=new Z(""),_=L.ISO8859_1;v.enableDecoding(_);let j=1,E=f[j++],D=new Rl;for(;j<f[0];){switch(E){case Pt.TEXT_COMPACTION_MODE_LATCH:j=Pt.textCompaction(f,j,v);break;case Pt.BYTE_COMPACTION_MODE_LATCH:case Pt.BYTE_COMPACTION_MODE_LATCH_6:j=Pt.byteCompaction(E,f,_,j,v);break;case Pt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:v.append(f[j++]);break;case Pt.NUMERIC_COMPACTION_MODE_LATCH:j=Pt.numericCompaction(f,j,v);break;case Pt.ECI_CHARSET:L.getCharacterSetECIByValue(f[j++]);break;case Pt.ECI_GENERAL_PURPOSE:j+=2;break;case Pt.ECI_USER_DEFINED:j++;break;case Pt.BEGIN_MACRO_PDF417_CONTROL_BLOCK:j=Pt.decodeMacroBlock(f,j,D);break;case Pt.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Pt.MACRO_PDF417_TERMINATOR:throw new R;default:j--,j=Pt.textCompaction(f,j,v);break}if(j<f.length)E=f[j++];else throw R.getFormatInstance()}if(v.length()===0)throw R.getFormatInstance();let z=new ne(null,v.toString(),null,p);return z.setOther(D),z}static decodeMacroBlock(f,p,v){if(p+Pt.NUMBER_OF_SEQUENCE_CODEWORDS>f[0])throw R.getFormatInstance();let _=new Int32Array(Pt.NUMBER_OF_SEQUENCE_CODEWORDS);for(let D=0;D<Pt.NUMBER_OF_SEQUENCE_CODEWORDS;D++,p++)_[D]=f[p];v.setSegmentIndex(A.parseInt(Pt.decodeBase900toBase10(_,Pt.NUMBER_OF_SEQUENCE_CODEWORDS)));let j=new Z;p=Pt.textCompaction(f,p,j),v.setFileId(j.toString());let E=-1;for(f[p]===Pt.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(E=p+1);p<f[0];)switch(f[p]){case Pt.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(p++,f[p]){case Pt.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let D=new Z;p=Pt.textCompaction(f,p+1,D),v.setFileName(D.toString());break;case Pt.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let z=new Z;p=Pt.textCompaction(f,p+1,z),v.setSender(z.toString());break;case Pt.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let X=new Z;p=Pt.textCompaction(f,p+1,X),v.setAddressee(X.toString());break;case Pt.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let oe=new Z;p=Pt.numericCompaction(f,p+1,oe),v.setSegmentCount(A.parseInt(oe.toString()));break;case Pt.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let we=new Z;p=Pt.numericCompaction(f,p+1,we),v.setTimestamp(Od.parseLong(we.toString()));break;case Pt.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let Oe=new Z;p=Pt.numericCompaction(f,p+1,Oe),v.setChecksum(A.parseInt(Oe.toString()));break;case Pt.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let He=new Z;p=Pt.numericCompaction(f,p+1,He),v.setFileSize(Od.parseLong(He.toString()));break;default:throw R.getFormatInstance()}break;case Pt.MACRO_PDF417_TERMINATOR:p++,v.setLastSegment(!0);break;default:throw R.getFormatInstance()}if(E!==-1){let D=p-E;v.isLastSegment()&&D--,v.setOptionalData(O.copyOfRange(f,E,E+D))}return p}static textCompaction(f,p,v){let _=new Int32Array((f[0]-p)*2),j=new Int32Array((f[0]-p)*2),E=0,D=!1;for(;p<f[0]&&!D;){let z=f[p++];if(z<Pt.TEXT_COMPACTION_MODE_LATCH)_[E]=z/30,_[E+1]=z%30,E+=2;else switch(z){case Pt.TEXT_COMPACTION_MODE_LATCH:_[E++]=Pt.TEXT_COMPACTION_MODE_LATCH;break;case Pt.BYTE_COMPACTION_MODE_LATCH:case Pt.BYTE_COMPACTION_MODE_LATCH_6:case Pt.NUMERIC_COMPACTION_MODE_LATCH:case Pt.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Pt.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Pt.MACRO_PDF417_TERMINATOR:p--,D=!0;break;case Pt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:_[E]=Pt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,z=f[p++],j[E]=z,E++;break}}return Pt.decodeTextCompaction(_,j,E,v),p}static decodeTextCompaction(f,p,v,_){let j=Xn.ALPHA,E=Xn.ALPHA,D=0;for(;D<v;){let z=f[D],X="";switch(j){case Xn.ALPHA:if(z<26)X=String.fromCharCode(65+z);else switch(z){case 26:X=" ";break;case Pt.LL:j=Xn.LOWER;break;case Pt.ML:j=Xn.MIXED;break;case Pt.PS:E=j,j=Xn.PUNCT_SHIFT;break;case Pt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:_.append(p[D]);break;case Pt.TEXT_COMPACTION_MODE_LATCH:j=Xn.ALPHA;break}break;case Xn.LOWER:if(z<26)X=String.fromCharCode(97+z);else switch(z){case 26:X=" ";break;case Pt.AS:E=j,j=Xn.ALPHA_SHIFT;break;case Pt.ML:j=Xn.MIXED;break;case Pt.PS:E=j,j=Xn.PUNCT_SHIFT;break;case Pt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:_.append(p[D]);break;case Pt.TEXT_COMPACTION_MODE_LATCH:j=Xn.ALPHA;break}break;case Xn.MIXED:if(z<Pt.PL)X=Pt.MIXED_CHARS[z];else switch(z){case Pt.PL:j=Xn.PUNCT;break;case 26:X=" ";break;case Pt.LL:j=Xn.LOWER;break;case Pt.AL:j=Xn.ALPHA;break;case Pt.PS:E=j,j=Xn.PUNCT_SHIFT;break;case Pt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:_.append(p[D]);break;case Pt.TEXT_COMPACTION_MODE_LATCH:j=Xn.ALPHA;break}break;case Xn.PUNCT:if(z<Pt.PAL)X=Pt.PUNCT_CHARS[z];else switch(z){case Pt.PAL:j=Xn.ALPHA;break;case Pt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:_.append(p[D]);break;case Pt.TEXT_COMPACTION_MODE_LATCH:j=Xn.ALPHA;break}break;case Xn.ALPHA_SHIFT:if(j=E,z<26)X=String.fromCharCode(65+z);else switch(z){case 26:X=" ";break;case Pt.TEXT_COMPACTION_MODE_LATCH:j=Xn.ALPHA;break}break;case Xn.PUNCT_SHIFT:if(j=E,z<Pt.PAL)X=Pt.PUNCT_CHARS[z];else switch(z){case Pt.PAL:j=Xn.ALPHA;break;case Pt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:_.append(p[D]);break;case Pt.TEXT_COMPACTION_MODE_LATCH:j=Xn.ALPHA;break}break}X!==""&&_.append(X),D++}}static byteCompaction(f,p,v,_,j){let E=new Pd,D=0,z=0,X=!1;switch(f){case Pt.BYTE_COMPACTION_MODE_LATCH:let oe=new Int32Array(6),we=p[_++];for(;_<p[0]&&!X;)switch(oe[D++]=we,z=900*z+we,we=p[_++],we){case Pt.TEXT_COMPACTION_MODE_LATCH:case Pt.BYTE_COMPACTION_MODE_LATCH:case Pt.NUMERIC_COMPACTION_MODE_LATCH:case Pt.BYTE_COMPACTION_MODE_LATCH_6:case Pt.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Pt.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Pt.MACRO_PDF417_TERMINATOR:_--,X=!0;break;default:if(D%5===0&&D>0){for(let Oe=0;Oe<6;++Oe)E.write(Number(gl(z)>>gl(8*(5-Oe))));z=0,D=0}break}_===p[0]&&we<Pt.TEXT_COMPACTION_MODE_LATCH&&(oe[D++]=we);for(let Oe=0;Oe<D;Oe++)E.write(oe[Oe]);break;case Pt.BYTE_COMPACTION_MODE_LATCH_6:for(;_<p[0]&&!X;){let Oe=p[_++];if(Oe<Pt.TEXT_COMPACTION_MODE_LATCH)D++,z=900*z+Oe;else switch(Oe){case Pt.TEXT_COMPACTION_MODE_LATCH:case Pt.BYTE_COMPACTION_MODE_LATCH:case Pt.NUMERIC_COMPACTION_MODE_LATCH:case Pt.BYTE_COMPACTION_MODE_LATCH_6:case Pt.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Pt.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Pt.MACRO_PDF417_TERMINATOR:_--,X=!0;break}if(D%5===0&&D>0){for(let He=0;He<6;++He)E.write(Number(gl(z)>>gl(8*(5-He))));z=0,D=0}}break}return j.append(H.decode(E.toByteArray(),v)),_}static numericCompaction(f,p,v){let _=0,j=!1,E=new Int32Array(Pt.MAX_NUMERIC_CODEWORDS);for(;p<f[0]&&!j;){let D=f[p++];if(p===f[0]&&(j=!0),D<Pt.TEXT_COMPACTION_MODE_LATCH)E[_]=D,_++;else switch(D){case Pt.TEXT_COMPACTION_MODE_LATCH:case Pt.BYTE_COMPACTION_MODE_LATCH:case Pt.BYTE_COMPACTION_MODE_LATCH_6:case Pt.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Pt.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Pt.MACRO_PDF417_TERMINATOR:p--,j=!0;break}(_%Pt.MAX_NUMERIC_CODEWORDS===0||D===Pt.NUMERIC_COMPACTION_MODE_LATCH||j)&&_>0&&(v.append(Pt.decodeBase900toBase10(E,_)),_=0)}return p}static decodeBase900toBase10(f,p){let v=gl(0);for(let j=0;j<p;j++)v+=Pt.EXP900[p-j-1]*gl(f[j]);let _=v.toString();if(_.charAt(0)!=="1")throw new R;return _.substring(1)}}Pt.TEXT_COMPACTION_MODE_LATCH=900,Pt.BYTE_COMPACTION_MODE_LATCH=901,Pt.NUMERIC_COMPACTION_MODE_LATCH=902,Pt.BYTE_COMPACTION_MODE_LATCH_6=924,Pt.ECI_USER_DEFINED=925,Pt.ECI_GENERAL_PURPOSE=926,Pt.ECI_CHARSET=927,Pt.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,Pt.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,Pt.MACRO_PDF417_TERMINATOR=922,Pt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,Pt.MAX_NUMERIC_CODEWORDS=15,Pt.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,Pt.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,Pt.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,Pt.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,Pt.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,Pt.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,Pt.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,Pt.PL=25,Pt.LL=27,Pt.AS=27,Pt.ML=28,Pt.AL=28,Pt.PS=29,Pt.PAL=29,Pt.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,Pt.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",Pt.EXP900=Fl()?mc():[],Pt.NUMBER_OF_SEQUENCE_CODEWORDS=2;class K{constructor(){}static decode(f,p,v,_,j,E,D){let z=new To(f,p,v,_,j),X=null,oe=null,we;for(let rt=!0;;rt=!1){if(p!=null&&(X=K.getRowIndicatorColumn(f,z,p,!0,E,D)),_!=null&&(oe=K.getRowIndicatorColumn(f,z,_,!1,E,D)),we=K.merge(X,oe),we==null)throw se.getNotFoundInstance();let lt=we.getBoundingBox();if(rt&&lt!=null&&(lt.getMinY()<z.getMinY()||lt.getMaxY()>z.getMaxY()))z=lt;else break}we.setBoundingBox(z);let Oe=we.getBarcodeColumnCount()+1;we.setDetectionResultColumn(0,X),we.setDetectionResultColumn(Oe,oe);let He=X!=null;for(let rt=1;rt<=Oe;rt++){let lt=He?rt:Oe-rt;if(we.getDetectionResultColumn(lt)!==void 0)continue;let xt;lt===0||lt===Oe?xt=new Td(z,lt===0):xt=new Oo(z),we.setDetectionResultColumn(lt,xt);let St=-1,Vt=St;for(let Wt=z.getMinY();Wt<=z.getMaxY();Wt++){if(St=K.getStartColumn(we,lt,Wt,He),St<0||St>z.getMaxX()){if(Vt===-1)continue;St=Vt}let qt=K.detectCodeword(f,z.getMinX(),z.getMaxX(),He,St,Wt,E,D);qt!=null&&(xt.setCodeword(Wt,qt),Vt=St,E=Math.min(E,qt.getWidth()),D=Math.max(D,qt.getWidth()))}}return K.createDecoderResult(we)}static merge(f,p){if(f==null&&p==null)return null;let v=K.getBarcodeMetadata(f,p);if(v==null)return null;let _=To.merge(K.adjustBoundingBox(f),K.adjustBoundingBox(p));return new bs(v,_)}static adjustBoundingBox(f){if(f==null)return null;let p=f.getRowHeights();if(p==null)return null;let v=K.getMax(p),_=0;for(let D of p)if(_+=v-D,D>0)break;let j=f.getCodewords();for(let D=0;_>0&&j[D]==null;D++)_--;let E=0;for(let D=p.length-1;D>=0&&(E+=v-p[D],!(p[D]>0));D--);for(let D=j.length-1;E>0&&j[D]==null;D--)E--;return f.getBoundingBox().addMissingRows(_,E,f.isLeft())}static getMax(f){let p=-1;for(let v of f)p=Math.max(p,v);return p}static getBarcodeMetadata(f,p){let v;if(f==null||(v=f.getBarcodeMetadata())==null)return p==null?null:p.getBarcodeMetadata();let _;return p==null||(_=p.getBarcodeMetadata())==null?v:v.getColumnCount()!==_.getColumnCount()&&v.getErrorCorrectionLevel()!==_.getErrorCorrectionLevel()&&v.getRowCount()!==_.getRowCount()?null:v}static getRowIndicatorColumn(f,p,v,_,j,E){let D=new Td(p,_);for(let z=0;z<2;z++){let X=z===0?1:-1,oe=Math.trunc(Math.trunc(v.getX()));for(let we=Math.trunc(Math.trunc(v.getY()));we<=p.getMaxY()&&we>=p.getMinY();we+=X){let Oe=K.detectCodeword(f,0,f.getWidth(),_,oe,we,j,E);Oe!=null&&(D.setCodeword(we,Oe),_?oe=Oe.getStartX():oe=Oe.getEndX())}}return D}static adjustCodewordCount(f,p){let v=p[0][1],_=v.getValue(),j=f.getBarcodeColumnCount()*f.getBarcodeRowCount()-K.getNumberOfECCodeWords(f.getBarcodeECLevel());if(_.length===0){if(j<1||j>un.MAX_CODEWORDS_IN_BARCODE)throw se.getNotFoundInstance();v.setValue(j)}else _[0]!==j&&v.setValue(j)}static createDecoderResult(f){let p=K.createBarcodeMatrix(f);K.adjustCodewordCount(f,p);let v=new Array,_=new Int32Array(f.getBarcodeRowCount()*f.getBarcodeColumnCount()),j=[],E=new Array;for(let z=0;z<f.getBarcodeRowCount();z++)for(let X=0;X<f.getBarcodeColumnCount();X++){let oe=p[z][X+1].getValue(),we=z*f.getBarcodeColumnCount()+X;oe.length===0?v.push(we):oe.length===1?_[we]=oe[0]:(E.push(we),j.push(oe))}let D=new Array(j.length);for(let z=0;z<D.length;z++)D[z]=j[z];return K.createDecoderResultFromAmbiguousValues(f.getBarcodeECLevel(),_,un.toIntArray(v),un.toIntArray(E),D)}static createDecoderResultFromAmbiguousValues(f,p,v,_,j){let E=new Int32Array(_.length),D=100;for(;D-- >0;){for(let z=0;z<E.length;z++)p[_[z]]=j[z][E[z]];try{return K.decodeCodewords(p,f,v)}catch(z){if(!(z instanceof g))throw z}if(E.length===0)throw g.getChecksumInstance();for(let z=0;z<E.length;z++)if(E[z]<j[z].length-1){E[z]++;break}else if(E[z]=0,z===E.length-1)throw g.getChecksumInstance()}throw g.getChecksumInstance()}static createBarcodeMatrix(f){let p=Array.from({length:f.getBarcodeRowCount()},()=>new Array(f.getBarcodeColumnCount()+2));for(let _=0;_<p.length;_++)for(let j=0;j<p[_].length;j++)p[_][j]=new Ll;let v=0;for(let _ of f.getDetectionResultColumns()){if(_!=null){for(let j of _.getCodewords())if(j!=null){let E=j.getRowNumber();if(E>=0){if(E>=p.length)continue;p[E][v].setValue(j.getValue())}}}v++}return p}static isValidBarcodeColumn(f,p){return p>=0&&p<=f.getBarcodeColumnCount()+1}static getStartColumn(f,p,v,_){let j=_?1:-1,E=null;if(K.isValidBarcodeColumn(f,p-j)&&(E=f.getDetectionResultColumn(p-j).getCodeword(v)),E!=null)return _?E.getEndX():E.getStartX();if(E=f.getDetectionResultColumn(p).getCodewordNearby(v),E!=null)return _?E.getStartX():E.getEndX();if(K.isValidBarcodeColumn(f,p-j)&&(E=f.getDetectionResultColumn(p-j).getCodewordNearby(v)),E!=null)return _?E.getEndX():E.getStartX();let D=0;for(;K.isValidBarcodeColumn(f,p-j);){p-=j;for(let z of f.getDetectionResultColumn(p).getCodewords())if(z!=null)return(_?z.getEndX():z.getStartX())+j*D*(z.getEndX()-z.getStartX());D++}return _?f.getBoundingBox().getMinX():f.getBoundingBox().getMaxX()}static detectCodeword(f,p,v,_,j,E,D,z){j=K.adjustCodewordStartColumn(f,p,v,_,j,E);let X=K.getModuleBitCount(f,p,v,_,j,E);if(X==null)return null;let oe,we=Je.sum(X);if(_)oe=j+we;else{for(let rt=0;rt<X.length/2;rt++){let lt=X[rt];X[rt]=X[X.length-1-rt],X[X.length-1-rt]=lt}oe=j,j=oe-we}if(!K.checkCodewordSkew(we,D,z))return null;let Oe=cs.getDecodedValue(X),He=un.getCodeword(Oe);return He===-1?null:new vi(j,oe,K.getCodewordBucketNumber(Oe),He)}static getModuleBitCount(f,p,v,_,j,E){let D=j,z=new Int32Array(8),X=0,oe=_?1:-1,we=_;for(;(_?D<v:D>=p)&&X<z.length;)f.get(D,E)===we?(z[X]++,D+=oe):(X++,we=!we);return X===z.length||D===(_?v:p)&&X===z.length-1?z:null}static getNumberOfECCodeWords(f){return 2<<f}static adjustCodewordStartColumn(f,p,v,_,j,E){let D=j,z=_?-1:1;for(let X=0;X<2;X++){for(;(_?D>=p:D<v)&&_===f.get(D,E);){if(Math.abs(j-D)>K.CODEWORD_SKEW_SIZE)return j;D+=z}z=-z,_=!_}return D}static checkCodewordSkew(f,p,v){return p-K.CODEWORD_SKEW_SIZE<=f&&f<=v+K.CODEWORD_SKEW_SIZE}static decodeCodewords(f,p,v){if(f.length===0)throw R.getFormatInstance();let _=1<<p+1,j=K.correctErrors(f,v,_);K.verifyCodewordCount(f,_);let E=Pt.decode(f,""+p);return E.setErrorsCorrected(j),E.setErasures(v.length),E}static correctErrors(f,p,v){if(p!=null&&p.length>v/2+K.MAX_ERRORS||v<0||v>K.MAX_EC_CODEWORDS)throw g.getChecksumInstance();return K.errorCorrection.decode(f,v,p)}static verifyCodewordCount(f,p){if(f.length<4)throw R.getFormatInstance();let v=f[0];if(v>f.length)throw R.getFormatInstance();if(v===0)if(p<f.length)f[0]=f.length-p;else throw R.getFormatInstance()}static getBitCountForCodeword(f){let p=new Int32Array(8),v=0,_=p.length-1;for(;!((f&1)!==v&&(v=f&1,_--,_<0));)p[_]++,f>>=1;return p}static getCodewordBucketNumber(f){return f instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(f):this.getCodewordBucketNumber_number(f)}static getCodewordBucketNumber_number(f){return K.getCodewordBucketNumber(K.getBitCountForCodeword(f))}static getCodewordBucketNumber_Int32Array(f){return(f[0]-f[2]+f[4]-f[6]+9)%9}static toString(f){let p=new pl;for(let v=0;v<f.length;v++){p.format("Row %2d: ",v);for(let _=0;_<f[v].length;_++){let j=f[v][_];j.getValue().length===0?p.format("        ",null):p.format("%4d(%2d)",j.getValue()[0],j.getConfidence(j.getValue()[0]))}p.format("%n")}return p.toString()}}K.CODEWORD_SKEW_SIZE=2,K.MAX_ERRORS=3,K.MAX_EC_CODEWORDS=512,K.errorCorrection=new ho;class ke{decode(f,p=null){let v=ke.decode(f,p,!1);if(v==null||v.length===0||v[0]==null)throw se.getNotFoundInstance();return v[0]}decodeMultiple(f,p=null){try{return ke.decode(f,p,!0)}catch(v){throw v instanceof R||v instanceof g?se.getNotFoundInstance():v}}static decode(f,p,v){const _=new Array,j=hn.detectMultiple(f,p,v);for(const E of j.getPoints()){const D=K.decode(j.getBits(),E[4],E[5],E[6],E[7],ke.getMinCodewordWidth(E),ke.getMaxCodewordWidth(E)),z=new J(D.getText(),D.getRawBytes(),void 0,E,Y.PDF_417);z.putMetadata(me.ERROR_CORRECTION_LEVEL,D.getECLevel());const X=D.getOther();X!=null&&z.putMetadata(me.PDF417_EXTRA_METADATA,X),_.push(z)}return _.map(E=>E)}static getMaxWidth(f,p){return f==null||p==null?0:Math.trunc(Math.abs(f.getX()-p.getX()))}static getMinWidth(f,p){return f==null||p==null?A.MAX_VALUE:Math.trunc(Math.abs(f.getX()-p.getX()))}static getMaxCodewordWidth(f){return Math.floor(Math.max(Math.max(ke.getMaxWidth(f[0],f[4]),ke.getMaxWidth(f[6],f[2])*un.MODULES_IN_CODEWORD/un.MODULES_IN_STOP_PATTERN),Math.max(ke.getMaxWidth(f[1],f[5]),ke.getMaxWidth(f[7],f[3])*un.MODULES_IN_CODEWORD/un.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(f){return Math.floor(Math.min(Math.min(ke.getMinWidth(f[0],f[4]),ke.getMinWidth(f[6],f[2])*un.MODULES_IN_CODEWORD/un.MODULES_IN_STOP_PATTERN),Math.min(ke.getMinWidth(f[1],f[5]),ke.getMinWidth(f[7],f[3])*un.MODULES_IN_CODEWORD/un.MODULES_IN_STOP_PATTERN)))}reset(){}}class $e extends c{}$e.kind="ReaderException";class it{constructor(f,p){this.verbose=f===!0,p&&this.setHints(p)}decode(f,p){return p&&this.setHints(p),this.decodeInternal(f)}decodeWithState(f){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(f)}setHints(f){this.hints=f;const p=!n(f)&&f.get(W.TRY_HARDER)===!0,v=n(f)?null:f.get(W.POSSIBLE_FORMATS),_=new Array;if(!n(v)){const j=v.some(E=>E===Y.UPC_A||E===Y.UPC_E||E===Y.EAN_13||E===Y.EAN_8||E===Y.CODABAR||E===Y.CODE_39||E===Y.CODE_93||E===Y.CODE_128||E===Y.ITF||E===Y.RSS_14||E===Y.RSS_EXPANDED);j&&!p&&_.push(new ia(f,this.verbose)),v.includes(Y.QR_CODE)&&_.push(new xl),v.includes(Y.DATA_MATRIX)&&_.push(new Ns),v.includes(Y.AZTEC)&&_.push(new ar),v.includes(Y.PDF_417)&&_.push(new ke),j&&p&&_.push(new ia(f,this.verbose))}_.length===0&&(p||_.push(new ia(f,this.verbose)),_.push(new xl),_.push(new Ns),_.push(new ar),_.push(new ke),p&&_.push(new ia(f,this.verbose))),this.readers=_}reset(){if(this.readers!==null)for(const f of this.readers)f.reset()}decodeInternal(f){if(this.readers===null)throw new $e("No readers where selected, nothing can be read.");for(const p of this.readers)try{return p.decode(f,this.hints)}catch(v){if(v instanceof $e)continue}throw new se("No MultiFormat Readers were able to detect the code.")}}class pt extends re{constructor(f=null,p=500){const v=new it;v.setHints(f),super(v,p)}decodeBitmap(f){return this.reader.decodeWithState(f)}}class $t extends re{constructor(f=500){super(new ke,f)}}class lr extends re{constructor(f=500){super(new xl,f)}}var zr;(function(ye){ye[ye.ERROR_CORRECTION=0]="ERROR_CORRECTION",ye[ye.CHARACTER_SET=1]="CHARACTER_SET",ye[ye.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",ye[ye.MIN_SIZE=3]="MIN_SIZE",ye[ye.MAX_SIZE=4]="MAX_SIZE",ye[ye.MARGIN=5]="MARGIN",ye[ye.PDF417_COMPACT=6]="PDF417_COMPACT",ye[ye.PDF417_COMPACTION=7]="PDF417_COMPACTION",ye[ye.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",ye[ye.AZTEC_LAYERS=9]="AZTEC_LAYERS",ye[ye.QR_VERSION=10]="QR_VERSION"})(zr||(zr={}));var Ar=zr;class kn{constructor(f){this.field=f,this.cachedGenerators=[],this.cachedGenerators.push(new De(f,Int32Array.from([1])))}buildGenerator(f){const p=this.cachedGenerators;if(f>=p.length){let v=p[p.length-1];const _=this.field;for(let j=p.length;j<=f;j++){const E=v.multiply(new De(_,Int32Array.from([1,_.exp(j-1+_.getGeneratorBase())])));p.push(E),v=E}}return p[f]}encode(f,p){if(p===0)throw new x("No error correction bytes");const v=f.length-p;if(v<=0)throw new x("No data bytes provided");const _=this.buildGenerator(p),j=new Int32Array(v);y.arraycopy(f,0,j,0,v);let E=new De(this.field,j);E=E.multiplyByMonomial(p,1);const z=E.divide(_)[1].getCoefficients(),X=p-z.length;for(let oe=0;oe<X;oe++)f[v+oe]=0;y.arraycopy(z,0,f,v+X,z.length)}}class qr{constructor(){}static applyMaskPenaltyRule1(f){return qr.applyMaskPenaltyRule1Internal(f,!0)+qr.applyMaskPenaltyRule1Internal(f,!1)}static applyMaskPenaltyRule2(f){let p=0;const v=f.getArray(),_=f.getWidth(),j=f.getHeight();for(let E=0;E<j-1;E++){const D=v[E];for(let z=0;z<_-1;z++){const X=D[z];X===D[z+1]&&X===v[E+1][z]&&X===v[E+1][z+1]&&p++}}return qr.N2*p}static applyMaskPenaltyRule3(f){let p=0;const v=f.getArray(),_=f.getWidth(),j=f.getHeight();for(let E=0;E<j;E++)for(let D=0;D<_;D++){const z=v[E];D+6<_&&z[D]===1&&z[D+1]===0&&z[D+2]===1&&z[D+3]===1&&z[D+4]===1&&z[D+5]===0&&z[D+6]===1&&(qr.isWhiteHorizontal(z,D-4,D)||qr.isWhiteHorizontal(z,D+7,D+11))&&p++,E+6<j&&v[E][D]===1&&v[E+1][D]===0&&v[E+2][D]===1&&v[E+3][D]===1&&v[E+4][D]===1&&v[E+5][D]===0&&v[E+6][D]===1&&(qr.isWhiteVertical(v,D,E-4,E)||qr.isWhiteVertical(v,D,E+7,E+11))&&p++}return p*qr.N3}static isWhiteHorizontal(f,p,v){p=Math.max(p,0),v=Math.min(v,f.length);for(let _=p;_<v;_++)if(f[_]===1)return!1;return!0}static isWhiteVertical(f,p,v,_){v=Math.max(v,0),_=Math.min(_,f.length);for(let j=v;j<_;j++)if(f[j][p]===1)return!1;return!0}static applyMaskPenaltyRule4(f){let p=0;const v=f.getArray(),_=f.getWidth(),j=f.getHeight();for(let z=0;z<j;z++){const X=v[z];for(let oe=0;oe<_;oe++)X[oe]===1&&p++}const E=f.getHeight()*f.getWidth();return Math.floor(Math.abs(p*2-E)*10/E)*qr.N4}static getDataMaskBit(f,p,v){let _,j;switch(f){case 0:_=v+p&1;break;case 1:_=v&1;break;case 2:_=p%3;break;case 3:_=(v+p)%3;break;case 4:_=Math.floor(v/2)+Math.floor(p/3)&1;break;case 5:j=v*p,_=(j&1)+j%3;break;case 6:j=v*p,_=(j&1)+j%3&1;break;case 7:j=v*p,_=j%3+(v+p&1)&1;break;default:throw new x("Invalid mask pattern: "+f)}return _===0}static applyMaskPenaltyRule1Internal(f,p){let v=0;const _=p?f.getHeight():f.getWidth(),j=p?f.getWidth():f.getHeight(),E=f.getArray();for(let D=0;D<_;D++){let z=0,X=-1;for(let oe=0;oe<j;oe++){const we=p?E[D][oe]:E[oe][D];we===X?z++:(z>=5&&(v+=qr.N1+(z-5)),z=1,X=we)}z>=5&&(v+=qr.N1+(z-5))}return v}}qr.N1=3,qr.N2=3,qr.N3=40,qr.N4=10;class oa{constructor(f,p){this.width=f,this.height=p;const v=new Array(p);for(let _=0;_!==p;_++)v[_]=new Uint8Array(f);this.bytes=v}getHeight(){return this.height}getWidth(){return this.width}get(f,p){return this.bytes[p][f]}getArray(){return this.bytes}setNumber(f,p,v){this.bytes[p][f]=v}setBoolean(f,p,v){this.bytes[p][f]=v?1:0}clear(f){for(const p of this.bytes)O.fill(p,f)}equals(f){if(!(f instanceof oa))return!1;const p=f;if(this.width!==p.width||this.height!==p.height)return!1;for(let v=0,_=this.height;v<_;++v){const j=this.bytes[v],E=p.bytes[v];for(let D=0,z=this.width;D<z;++D)if(j[D]!==E[D])return!1}return!0}toString(){const f=new Z;for(let p=0,v=this.height;p<v;++p){const _=this.bytes[p];for(let j=0,E=this.width;j<E;++j)switch(_[j]){case 0:f.append(" 0");break;case 1:f.append(" 1");break;default:f.append("  ");break}f.append(`
`)}return f.toString()}}class Ca{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const f=new Z;return f.append(`<<
`),f.append(" mode: "),f.append(this.mode?this.mode.toString():"null"),f.append(`
 ecLevel: `),f.append(this.ecLevel?this.ecLevel.toString():"null"),f.append(`
 version: `),f.append(this.version?this.version.toString():"null"),f.append(`
 maskPattern: `),f.append(this.maskPattern.toString()),this.matrix?(f.append(`
 matrix:
`),f.append(this.matrix.toString())):f.append(`
 matrix: null
`),f.append(`>>
`),f.toString()}setMode(f){this.mode=f}setECLevel(f){this.ecLevel=f}setVersion(f){this.version=f}setMaskPattern(f){this.maskPattern=f}setMatrix(f){this.matrix=f}static isValidMaskPattern(f){return f>=0&&f<Ca.NUM_MASK_PATTERNS}}Ca.NUM_MASK_PATTERNS=8;class Cn extends c{}Cn.kind="WriterException";class Er{constructor(){}static clearMatrix(f){f.clear(255)}static buildMatrix(f,p,v,_,j){Er.clearMatrix(j),Er.embedBasicPatterns(v,j),Er.embedTypeInfo(p,_,j),Er.maybeEmbedVersionInfo(v,j),Er.embedDataBits(f,_,j)}static embedBasicPatterns(f,p){Er.embedPositionDetectionPatternsAndSeparators(p),Er.embedDarkDotAtLeftBottomCorner(p),Er.maybeEmbedPositionAdjustmentPatterns(f,p),Er.embedTimingPatterns(p)}static embedTypeInfo(f,p,v){const _=new P;Er.makeTypeInfoBits(f,p,_);for(let j=0,E=_.getSize();j<E;++j){const D=_.get(_.getSize()-1-j),z=Er.TYPE_INFO_COORDINATES[j],X=z[0],oe=z[1];if(v.setBoolean(X,oe,D),j<8){const we=v.getWidth()-j-1;v.setBoolean(we,8,D)}else{const Oe=v.getHeight()-7+(j-8);v.setBoolean(8,Oe,D)}}}static maybeEmbedVersionInfo(f,p){if(f.getVersionNumber()<7)return;const v=new P;Er.makeVersionInfoBits(f,v);let _=17;for(let j=0;j<6;++j)for(let E=0;E<3;++E){const D=v.get(_);_--,p.setBoolean(j,p.getHeight()-11+E,D),p.setBoolean(p.getHeight()-11+E,j,D)}}static embedDataBits(f,p,v){let _=0,j=-1,E=v.getWidth()-1,D=v.getHeight()-1;for(;E>0;){for(E===6&&(E-=1);D>=0&&D<v.getHeight();){for(let z=0;z<2;++z){const X=E-z;if(!Er.isEmpty(v.get(X,D)))continue;let oe;_<f.getSize()?(oe=f.get(_),++_):oe=!1,p!==255&&qr.getDataMaskBit(p,X,D)&&(oe=!oe),v.setBoolean(X,D,oe)}D+=j}j=-j,D+=j,E-=2}if(_!==f.getSize())throw new Cn("Not all bits consumed: "+_+"/"+f.getSize())}static findMSBSet(f){return 32-A.numberOfLeadingZeros(f)}static calculateBCHCode(f,p){if(p===0)throw new x("0 polynomial");const v=Er.findMSBSet(p);for(f<<=v-1;Er.findMSBSet(f)>=v;)f^=p<<Er.findMSBSet(f)-v;return f}static makeTypeInfoBits(f,p,v){if(!Ca.isValidMaskPattern(p))throw new Cn("Invalid mask pattern");const _=f.getBits()<<3|p;v.appendBits(_,5);const j=Er.calculateBCHCode(_,Er.TYPE_INFO_POLY);v.appendBits(j,10);const E=new P;if(E.appendBits(Er.TYPE_INFO_MASK_PATTERN,15),v.xor(E),v.getSize()!==15)throw new Cn("should not happen but we got: "+v.getSize())}static makeVersionInfoBits(f,p){p.appendBits(f.getVersionNumber(),6);const v=Er.calculateBCHCode(f.getVersionNumber(),Er.VERSION_INFO_POLY);if(p.appendBits(v,12),p.getSize()!==18)throw new Cn("should not happen but we got: "+p.getSize())}static isEmpty(f){return f===255}static embedTimingPatterns(f){for(let p=8;p<f.getWidth()-8;++p){const v=(p+1)%2;Er.isEmpty(f.get(p,6))&&f.setNumber(p,6,v),Er.isEmpty(f.get(6,p))&&f.setNumber(6,p,v)}}static embedDarkDotAtLeftBottomCorner(f){if(f.get(8,f.getHeight()-8)===0)throw new Cn;f.setNumber(8,f.getHeight()-8,1)}static embedHorizontalSeparationPattern(f,p,v){for(let _=0;_<8;++_){if(!Er.isEmpty(v.get(f+_,p)))throw new Cn;v.setNumber(f+_,p,0)}}static embedVerticalSeparationPattern(f,p,v){for(let _=0;_<7;++_){if(!Er.isEmpty(v.get(f,p+_)))throw new Cn;v.setNumber(f,p+_,0)}}static embedPositionAdjustmentPattern(f,p,v){for(let _=0;_<5;++_){const j=Er.POSITION_ADJUSTMENT_PATTERN[_];for(let E=0;E<5;++E)v.setNumber(f+E,p+_,j[E])}}static embedPositionDetectionPattern(f,p,v){for(let _=0;_<7;++_){const j=Er.POSITION_DETECTION_PATTERN[_];for(let E=0;E<7;++E)v.setNumber(f+E,p+_,j[E])}}static embedPositionDetectionPatternsAndSeparators(f){const p=Er.POSITION_DETECTION_PATTERN[0].length;Er.embedPositionDetectionPattern(0,0,f),Er.embedPositionDetectionPattern(f.getWidth()-p,0,f),Er.embedPositionDetectionPattern(0,f.getWidth()-p,f);const v=8;Er.embedHorizontalSeparationPattern(0,v-1,f),Er.embedHorizontalSeparationPattern(f.getWidth()-v,v-1,f),Er.embedHorizontalSeparationPattern(0,f.getWidth()-v,f);const _=7;Er.embedVerticalSeparationPattern(_,0,f),Er.embedVerticalSeparationPattern(f.getHeight()-_-1,0,f),Er.embedVerticalSeparationPattern(_,f.getHeight()-_,f)}static maybeEmbedPositionAdjustmentPatterns(f,p){if(f.getVersionNumber()<2)return;const v=f.getVersionNumber()-1,_=Er.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[v];for(let j=0,E=_.length;j!==E;j++){const D=_[j];if(D>=0)for(let z=0;z!==E;z++){const X=_[z];X>=0&&Er.isEmpty(p.get(X,D))&&Er.embedPositionAdjustmentPattern(X-2,D-2,p)}}}}Er.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),Er.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),Er.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),Er.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),Er.VERSION_INFO_POLY=7973,Er.TYPE_INFO_POLY=1335,Er.TYPE_INFO_MASK_PATTERN=21522;class Xs{constructor(f,p){this.dataBytes=f,this.errorCorrectionBytes=p}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class On{constructor(){}static calculateMaskPenalty(f){return qr.applyMaskPenaltyRule1(f)+qr.applyMaskPenaltyRule2(f)+qr.applyMaskPenaltyRule3(f)+qr.applyMaskPenaltyRule4(f)}static encode(f,p,v=null){let _=On.DEFAULT_BYTE_MODE_ENCODING;const j=v!==null&&v.get(Ar.CHARACTER_SET)!==void 0;j&&(_=v.get(Ar.CHARACTER_SET).toString());const E=this.chooseMode(f,_),D=new P;if(E===Tr.BYTE&&(j||On.DEFAULT_BYTE_MODE_ENCODING!==_)){const Wt=L.getCharacterSetECIByName(_);Wt!==void 0&&this.appendECI(Wt,D)}this.appendModeInfo(E,D);const z=new P;this.appendBytes(f,E,z,_);let X;if(v!==null&&v.get(Ar.QR_VERSION)!==void 0){const Wt=Number.parseInt(v.get(Ar.QR_VERSION).toString(),10);X=vt.getVersionForNumber(Wt);const qt=this.calculateBitsNeeded(E,D,z,X);if(!this.willFit(qt,X,p))throw new Cn("Data too big for requested version")}else X=this.recommendVersion(p,E,D,z);const oe=new P;oe.appendBitArray(D);const we=E===Tr.BYTE?z.getSizeInBytes():f.length;this.appendLengthInfo(we,X,E,oe),oe.appendBitArray(z);const Oe=X.getECBlocksForLevel(p),He=X.getTotalCodewords()-Oe.getTotalECCodewords();this.terminateBits(He,oe);const rt=this.interleaveWithECBytes(oe,X.getTotalCodewords(),He,Oe.getNumBlocks()),lt=new Ca;lt.setECLevel(p),lt.setMode(E),lt.setVersion(X);const xt=X.getDimensionForVersion(),St=new oa(xt,xt),Vt=this.chooseMaskPattern(rt,p,X,St);return lt.setMaskPattern(Vt),Er.buildMatrix(rt,p,X,Vt,St),lt.setMatrix(St),lt}static recommendVersion(f,p,v,_){const j=this.calculateBitsNeeded(p,v,_,vt.getVersionForNumber(1)),E=this.chooseVersion(j,f),D=this.calculateBitsNeeded(p,v,_,E);return this.chooseVersion(D,f)}static calculateBitsNeeded(f,p,v,_){return p.getSize()+f.getCharacterCountBits(_)+v.getSize()}static getAlphanumericCode(f){return f<On.ALPHANUMERIC_TABLE.length?On.ALPHANUMERIC_TABLE[f]:-1}static chooseMode(f,p=null){if(L.SJIS.getName()===p&&this.isOnlyDoubleByteKanji(f))return Tr.KANJI;let v=!1,_=!1;for(let j=0,E=f.length;j<E;++j){const D=f.charAt(j);if(On.isDigit(D))v=!0;else if(this.getAlphanumericCode(D.charCodeAt(0))!==-1)_=!0;else return Tr.BYTE}return _?Tr.ALPHANUMERIC:v?Tr.NUMERIC:Tr.BYTE}static isOnlyDoubleByteKanji(f){let p;try{p=H.encode(f,L.SJIS)}catch{return!1}const v=p.length;if(v%2!==0)return!1;for(let _=0;_<v;_+=2){const j=p[_]&255;if((j<129||j>159)&&(j<224||j>235))return!1}return!0}static chooseMaskPattern(f,p,v,_){let j=Number.MAX_SAFE_INTEGER,E=-1;for(let D=0;D<Ca.NUM_MASK_PATTERNS;D++){Er.buildMatrix(f,p,v,D,_);let z=this.calculateMaskPenalty(_);z<j&&(j=z,E=D)}return E}static chooseVersion(f,p){for(let v=1;v<=40;v++){const _=vt.getVersionForNumber(v);if(On.willFit(f,_,p))return _}throw new Cn("Data too big")}static willFit(f,p,v){const _=p.getTotalCodewords(),E=p.getECBlocksForLevel(v).getTotalECCodewords(),D=_-E,z=(f+7)/8;return D>=z}static terminateBits(f,p){const v=f*8;if(p.getSize()>v)throw new Cn("data bits cannot fit in the QR Code"+p.getSize()+" > "+v);for(let E=0;E<4&&p.getSize()<v;++E)p.appendBit(!1);const _=p.getSize()&7;if(_>0)for(let E=_;E<8;E++)p.appendBit(!1);const j=f-p.getSizeInBytes();for(let E=0;E<j;++E)p.appendBits((E&1)===0?236:17,8);if(p.getSize()!==v)throw new Cn("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(f,p,v,_,j,E){if(_>=v)throw new Cn("Block ID too large");const D=f%v,z=v-D,X=Math.floor(f/v),oe=X+1,we=Math.floor(p/v),Oe=we+1,He=X-we,rt=oe-Oe;if(He!==rt)throw new Cn("EC bytes mismatch");if(v!==z+D)throw new Cn("RS blocks mismatch");if(f!==(we+He)*z+(Oe+rt)*D)throw new Cn("Total bytes mismatch");_<z?(j[0]=we,E[0]=He):(j[0]=Oe,E[0]=rt)}static interleaveWithECBytes(f,p,v,_){if(f.getSizeInBytes()!==v)throw new Cn("Number of bits and data bytes does not match");let j=0,E=0,D=0;const z=new Array;for(let oe=0;oe<_;++oe){const we=new Int32Array(1),Oe=new Int32Array(1);On.getNumDataBytesAndNumECBytesForBlockID(p,v,_,oe,we,Oe);const He=we[0],rt=new Uint8Array(He);f.toBytes(8*j,rt,0,He);const lt=On.generateECBytes(rt,Oe[0]);z.push(new Xs(rt,lt)),E=Math.max(E,He),D=Math.max(D,lt.length),j+=we[0]}if(v!==j)throw new Cn("Data bytes does not match offset");const X=new P;for(let oe=0;oe<E;++oe)for(const we of z){const Oe=we.getDataBytes();oe<Oe.length&&X.appendBits(Oe[oe],8)}for(let oe=0;oe<D;++oe)for(const we of z){const Oe=we.getErrorCorrectionBytes();oe<Oe.length&&X.appendBits(Oe[oe],8)}if(p!==X.getSizeInBytes())throw new Cn("Interleaving error: "+p+" and "+X.getSizeInBytes()+" differ.");return X}static generateECBytes(f,p){const v=f.length,_=new Int32Array(v+p);for(let E=0;E<v;E++)_[E]=f[E]&255;new kn(Ee.QR_CODE_FIELD_256).encode(_,p);const j=new Uint8Array(p);for(let E=0;E<p;E++)j[E]=_[v+E];return j}static appendModeInfo(f,p){p.appendBits(f.getBits(),4)}static appendLengthInfo(f,p,v,_){const j=v.getCharacterCountBits(p);if(f>=1<<j)throw new Cn(f+" is bigger than "+((1<<j)-1));_.appendBits(f,j)}static appendBytes(f,p,v,_){switch(p){case Tr.NUMERIC:On.appendNumericBytes(f,v);break;case Tr.ALPHANUMERIC:On.appendAlphanumericBytes(f,v);break;case Tr.BYTE:On.append8BitBytes(f,v,_);break;case Tr.KANJI:On.appendKanjiBytes(f,v);break;default:throw new Cn("Invalid mode: "+p)}}static getDigit(f){return f.charCodeAt(0)-48}static isDigit(f){const p=On.getDigit(f);return p>=0&&p<=9}static appendNumericBytes(f,p){const v=f.length;let _=0;for(;_<v;){const j=On.getDigit(f.charAt(_));if(_+2<v){const E=On.getDigit(f.charAt(_+1)),D=On.getDigit(f.charAt(_+2));p.appendBits(j*100+E*10+D,10),_+=3}else if(_+1<v){const E=On.getDigit(f.charAt(_+1));p.appendBits(j*10+E,7),_+=2}else p.appendBits(j,4),_++}}static appendAlphanumericBytes(f,p){const v=f.length;let _=0;for(;_<v;){const j=On.getAlphanumericCode(f.charCodeAt(_));if(j===-1)throw new Cn;if(_+1<v){const E=On.getAlphanumericCode(f.charCodeAt(_+1));if(E===-1)throw new Cn;p.appendBits(j*45+E,11),_+=2}else p.appendBits(j,6),_++}}static append8BitBytes(f,p,v){let _;try{_=H.encode(f,v)}catch(j){throw new Cn(j)}for(let j=0,E=_.length;j!==E;j++){const D=_[j];p.appendBits(D,8)}}static appendKanjiBytes(f,p){let v;try{v=H.encode(f,L.SJIS)}catch(j){throw new Cn(j)}const _=v.length;for(let j=0;j<_;j+=2){const E=v[j]&255,D=v[j+1]&255,z=E<<8&4294967295|D;let X=-1;if(z>=33088&&z<=40956?X=z-33088:z>=57408&&z<=60351&&(X=z-49472),X===-1)throw new Cn("Invalid byte sequence");const oe=(X>>8)*192+(X&255);p.appendBits(oe,13)}}static appendECI(f,p){p.appendBits(Tr.ECI.getBits(),4),p.appendBits(f.getValue(),8)}}On.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),On.DEFAULT_BYTE_MODE_ENCODING=L.UTF8.getName();class ds{write(f,p,v,_=null){if(f.length===0)throw new x("Found empty contents");if(p<0||v<0)throw new x("Requested dimensions are too small: "+p+"x"+v);let j=Mn.L,E=ds.QUIET_ZONE_SIZE;_!==null&&(_.get(Ar.ERROR_CORRECTION)!==void 0&&(j=Mn.fromString(_.get(Ar.ERROR_CORRECTION).toString())),_.get(Ar.MARGIN)!==void 0&&(E=Number.parseInt(_.get(Ar.MARGIN).toString(),10)));const D=On.encode(f,j,_);return this.renderResult(D,p,v,E)}writeToDom(f,p,v,_,j=null){typeof f=="string"&&(f=document.querySelector(f));const E=this.write(p,v,_,j);f&&f.appendChild(E)}renderResult(f,p,v,_){const j=f.getMatrix();if(j===null)throw new ge;const E=j.getWidth(),D=j.getHeight(),z=E+_*2,X=D+_*2,oe=Math.max(p,z),we=Math.max(v,X),Oe=Math.min(Math.floor(oe/z),Math.floor(we/X)),He=Math.floor((oe-E*Oe)/2),rt=Math.floor((we-D*Oe)/2),lt=this.createSVGElement(oe,we);for(let xt=0,St=rt;xt<D;xt++,St+=Oe)for(let Vt=0,Wt=He;Vt<E;Vt++,Wt+=Oe)if(j.get(Vt,xt)===1){const qt=this.createSvgRectElement(Wt,St,Oe,Oe);lt.appendChild(qt)}return lt}createSVGElement(f,p){const v=document.createElementNS(ds.SVG_NS,"svg");return v.setAttributeNS(null,"height",f.toString()),v.setAttributeNS(null,"width",p.toString()),v}createSvgRectElement(f,p,v,_){const j=document.createElementNS(ds.SVG_NS,"rect");return j.setAttributeNS(null,"x",f.toString()),j.setAttributeNS(null,"y",p.toString()),j.setAttributeNS(null,"height",v.toString()),j.setAttributeNS(null,"width",_.toString()),j.setAttributeNS(null,"fill","#000000"),j}}ds.QUIET_ZONE_SIZE=4,ds.SVG_NS="http://www.w3.org/2000/svg";class yi{encode(f,p,v,_,j){if(f.length===0)throw new x("Found empty contents");if(p!==Y.QR_CODE)throw new x("Can only encode QR_CODE, but got "+p);if(v<0||_<0)throw new x(`Requested dimensions are too small: ${v}x${_}`);let E=Mn.L,D=yi.QUIET_ZONE_SIZE;j!==null&&(j.get(Ar.ERROR_CORRECTION)!==void 0&&(E=Mn.fromString(j.get(Ar.ERROR_CORRECTION).toString())),j.get(Ar.MARGIN)!==void 0&&(D=Number.parseInt(j.get(Ar.MARGIN).toString(),10)));const z=On.encode(f,E,j);return yi.renderResult(z,v,_,D)}static renderResult(f,p,v,_){const j=f.getMatrix();if(j===null)throw new ge;const E=j.getWidth(),D=j.getHeight(),z=E+_*2,X=D+_*2,oe=Math.max(p,z),we=Math.max(v,X),Oe=Math.min(Math.floor(oe/z),Math.floor(we/X)),He=Math.floor((oe-E*Oe)/2),rt=Math.floor((we-D*Oe)/2),lt=new te(oe,we);for(let xt=0,St=rt;xt<D;xt++,St+=Oe)for(let Vt=0,Wt=He;Vt<E;Vt++,Wt+=Oe)j.get(Vt,xt)===1&&lt.setRegion(Wt,St,Oe,Oe);return lt}}yi.QUIET_ZONE_SIZE=4;class fo{encode(f,p,v,_,j){let E;switch(p){case Y.QR_CODE:E=new yi;break;default:throw new x("No encoder available for format "+p)}return E.encode(f,p,v,_,j)}}class Po extends pe{constructor(f,p,v,_,j,E,D,z){if(super(E,D),this.yuvData=f,this.dataWidth=p,this.dataHeight=v,this.left=_,this.top=j,_+E>p||j+D>v)throw new x("Crop rectangle does not fit within image data.");z&&this.reverseHorizontal(E,D)}getRow(f,p){if(f<0||f>=this.getHeight())throw new x("Requested row is outside the image: "+f);const v=this.getWidth();(p==null||p.length<v)&&(p=new Uint8ClampedArray(v));const _=(f+this.top)*this.dataWidth+this.left;return y.arraycopy(this.yuvData,_,p,0,v),p}getMatrix(){const f=this.getWidth(),p=this.getHeight();if(f===this.dataWidth&&p===this.dataHeight)return this.yuvData;const v=f*p,_=new Uint8ClampedArray(v);let j=this.top*this.dataWidth+this.left;if(f===this.dataWidth)return y.arraycopy(this.yuvData,j,_,0,v),_;for(let E=0;E<p;E++){const D=E*f;y.arraycopy(this.yuvData,j,_,D,f),j+=this.dataWidth}return _}isCropSupported(){return!0}crop(f,p,v,_){return new Po(this.yuvData,this.dataWidth,this.dataHeight,this.left+f,this.top+p,v,_,!1)}renderThumbnail(){const f=this.getWidth()/Po.THUMBNAIL_SCALE_FACTOR,p=this.getHeight()/Po.THUMBNAIL_SCALE_FACTOR,v=new Int32Array(f*p),_=this.yuvData;let j=this.top*this.dataWidth+this.left;for(let E=0;E<p;E++){const D=E*f;for(let z=0;z<f;z++){const X=_[j+z*Po.THUMBNAIL_SCALE_FACTOR]&255;v[D+z]=4278190080|X*65793}j+=this.dataWidth*Po.THUMBNAIL_SCALE_FACTOR}return v}getThumbnailWidth(){return this.getWidth()/Po.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/Po.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(f,p){const v=this.yuvData;for(let _=0,j=this.top*this.dataWidth+this.left;_<p;_++,j+=this.dataWidth){const E=j+f/2;for(let D=j,z=j+f-1;D<E;D++,z--){const X=v[D];v[D]=v[z],v[z]=X}}}invert(){return new ve(this)}}Po.THUMBNAIL_SCALE_FACTOR=2;class Gc extends pe{constructor(f,p,v,_,j,E,D){if(super(p,v),this.dataWidth=_,this.dataHeight=j,this.left=E,this.top=D,f.BYTES_PER_ELEMENT===4){const z=p*v,X=new Uint8ClampedArray(z);for(let oe=0;oe<z;oe++){const we=f[oe],Oe=we>>16&255,He=we>>7&510,rt=we&255;X[oe]=(Oe+He+rt)/4&255}this.luminances=X}else this.luminances=f;if(_===void 0&&(this.dataWidth=p),j===void 0&&(this.dataHeight=v),E===void 0&&(this.left=0),D===void 0&&(this.top=0),this.left+p>this.dataWidth||this.top+v>this.dataHeight)throw new x("Crop rectangle does not fit within image data.")}getRow(f,p){if(f<0||f>=this.getHeight())throw new x("Requested row is outside the image: "+f);const v=this.getWidth();(p==null||p.length<v)&&(p=new Uint8ClampedArray(v));const _=(f+this.top)*this.dataWidth+this.left;return y.arraycopy(this.luminances,_,p,0,v),p}getMatrix(){const f=this.getWidth(),p=this.getHeight();if(f===this.dataWidth&&p===this.dataHeight)return this.luminances;const v=f*p,_=new Uint8ClampedArray(v);let j=this.top*this.dataWidth+this.left;if(f===this.dataWidth)return y.arraycopy(this.luminances,j,_,0,v),_;for(let E=0;E<p;E++){const D=E*f;y.arraycopy(this.luminances,j,_,D,f),j+=this.dataWidth}return _}isCropSupported(){return!0}crop(f,p,v,_){return new Gc(this.luminances,v,_,this.dataWidth,this.dataHeight,this.left+f,this.top+p)}invert(){return new ve(this)}}class Kc extends L{static forName(f){return this.getCharacterSetECIByName(f)}}class $o{}$o.ISO_8859_1=L.ISO8859_1;class Vo{isCompact(){return this.compact}setCompact(f){this.compact=f}getSize(){return this.size}setSize(f){this.size=f}getLayers(){return this.layers}setLayers(f){this.layers=f}getCodeWords(){return this.codeWords}setCodeWords(f){this.codeWords=f}getMatrix(){return this.matrix}setMatrix(f){this.matrix=f}}class Xc{static singletonList(f){return[f]}static min(f,p){return f.sort(p)[0]}}class Yc{constructor(f){this.previous=f}getPrevious(){return this.previous}}class vs extends Yc{constructor(f,p,v){super(f),this.value=p,this.bitCount=v}appendTo(f,p){f.appendBits(this.value,this.bitCount)}add(f,p){return new vs(this,f,p)}addBinaryShift(f,p){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new vs(this,f,p)}toString(){let f=this.value&(1<<this.bitCount)-1;return f|=1<<this.bitCount,"<"+A.toBinaryString(f|1<<this.bitCount).substring(1)+">"}}class Bl extends vs{constructor(f,p,v){super(f,0,0),this.binaryShiftStart=p,this.binaryShiftByteCount=v}appendTo(f,p){for(let v=0;v<this.binaryShiftByteCount;v++)(v===0||v===31&&this.binaryShiftByteCount<=62)&&(f.appendBits(31,5),this.binaryShiftByteCount>62?f.appendBits(this.binaryShiftByteCount-31,16):v===0?f.appendBits(Math.min(this.binaryShiftByteCount,31),5):f.appendBits(this.binaryShiftByteCount-31,5)),f.appendBits(p[this.binaryShiftStart+v],8)}addBinaryShift(f,p){return new Bl(this,f,p)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function Qc(ye,f,p){return new Bl(ye,f,p)}function Ul(ye,f,p){return new vs(ye,f,p)}const zl=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Aa=0,Wo=1,wi=2,mu=3,ys=4,bl=new vs(null,0,0),vl=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function a0(ye){for(let f of ye)O.fill(f,-1);return ye[Aa][ys]=0,ye[Wo][ys]=0,ye[Wo][Aa]=28,ye[mu][ys]=0,ye[wi][ys]=0,ye[wi][Aa]=15,ye}const Go=a0(O.createInt32Array(6,6));class ki{constructor(f,p,v,_){this.token=f,this.mode=p,this.binaryShiftByteCount=v,this.bitCount=_}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(f,p){let v=this.bitCount,_=this.token;if(f!==this.mode){let E=vl[this.mode][f];_=Ul(_,E&65535,E>>16),v+=E>>16}let j=f===wi?4:5;return _=Ul(_,p,j),new ki(_,f,0,v+j)}shiftAndAppend(f,p){let v=this.token,_=this.mode===wi?4:5;return v=Ul(v,Go[this.mode][f],_),v=Ul(v,p,5),new ki(v,this.mode,0,this.bitCount+_+5)}addBinaryShiftChar(f){let p=this.token,v=this.mode,_=this.bitCount;if(this.mode===ys||this.mode===wi){let D=vl[v][Aa];p=Ul(p,D&65535,D>>16),_+=D>>16,v=Aa}let j=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,E=new ki(p,v,this.binaryShiftByteCount+1,_+j);return E.binaryShiftByteCount===2078&&(E=E.endBinaryShift(f+1)),E}endBinaryShift(f){if(this.binaryShiftByteCount===0)return this;let p=this.token;return p=Qc(p,f-this.binaryShiftByteCount,this.binaryShiftByteCount),new ki(p,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(f){let p=this.bitCount+(vl[this.mode][f.mode]>>16);return this.binaryShiftByteCount<f.binaryShiftByteCount?p+=ki.calculateBinaryShiftCost(f)-ki.calculateBinaryShiftCost(this):this.binaryShiftByteCount>f.binaryShiftByteCount&&f.binaryShiftByteCount>0&&(p+=10),p<=f.bitCount}toBitArray(f){let p=[];for(let _=this.endBinaryShift(f.length).token;_!==null;_=_.getPrevious())p.unshift(_);let v=new P;for(const _ of p)_.appendTo(v,f);return v}toString(){return G.format("%s bits=%d bytes=%d",zl[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(f){return f.binaryShiftByteCount>62?21:f.binaryShiftByteCount>31?20:f.binaryShiftByteCount>0?10:0}}ki.INITIAL_STATE=new ki(bl,Aa,0,0);function mo(ye){const f=G.getCharCode(" "),p=G.getCharCode("."),v=G.getCharCode(",");ye[Aa][f]=1;const _=G.getCharCode("Z"),j=G.getCharCode("A");for(let Oe=j;Oe<=_;Oe++)ye[Aa][Oe]=Oe-j+2;ye[Wo][f]=1;const E=G.getCharCode("z"),D=G.getCharCode("a");for(let Oe=D;Oe<=E;Oe++)ye[Wo][Oe]=Oe-D+2;ye[wi][f]=1;const z=G.getCharCode("9"),X=G.getCharCode("0");for(let Oe=X;Oe<=z;Oe++)ye[wi][Oe]=Oe-X+2;ye[wi][v]=12,ye[wi][p]=13;const oe=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let Oe=0;Oe<oe.length;Oe++)ye[mu][G.getCharCode(oe[Oe])]=Oe;const we=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let Oe=0;Oe<we.length;Oe++)G.getCharCode(we[Oe])>0&&(ye[ys][G.getCharCode(we[Oe])]=Oe);return ye}const Ni=mo(O.createInt32Array(5,256));class xo{constructor(f){this.text=f}encode(){const f=G.getCharCode(" "),p=G.getCharCode(`
`);let v=Xc.singletonList(ki.INITIAL_STATE);for(let j=0;j<this.text.length;j++){let E,D=j+1<this.text.length?this.text[j+1]:0;switch(this.text[j]){case G.getCharCode("\r"):E=D===p?2:0;break;case G.getCharCode("."):E=D===f?3:0;break;case G.getCharCode(","):E=D===f?4:0;break;case G.getCharCode(":"):E=D===f?5:0;break;default:E=0}E>0?(v=xo.updateStateListForPair(v,j,E),j++):v=this.updateStateListForChar(v,j)}return Xc.min(v,(j,E)=>j.getBitCount()-E.getBitCount()).toBitArray(this.text)}updateStateListForChar(f,p){const v=[];for(let _ of f)this.updateStateForChar(_,p,v);return xo.simplifyStates(v)}updateStateForChar(f,p,v){let _=this.text[p]&255,j=Ni[f.getMode()][_]>0,E=null;for(let D=0;D<=ys;D++){let z=Ni[D][_];if(z>0){if(E==null&&(E=f.endBinaryShift(p)),!j||D===f.getMode()||D===wi){const X=E.latchAndAppend(D,z);v.push(X)}if(!j&&Go[f.getMode()][D]>=0){const X=E.shiftAndAppend(D,z);v.push(X)}}}if(f.getBinaryShiftByteCount()>0||Ni[f.getMode()][_]===0){let D=f.addBinaryShiftChar(p);v.push(D)}}static updateStateListForPair(f,p,v){const _=[];for(let j of f)this.updateStateForPair(j,p,v,_);return this.simplifyStates(_)}static updateStateForPair(f,p,v,_){let j=f.endBinaryShift(p);if(_.push(j.latchAndAppend(ys,v)),f.getMode()!==ys&&_.push(j.shiftAndAppend(ys,v)),v===3||v===4){let E=j.latchAndAppend(wi,16-v).latchAndAppend(wi,1);_.push(E)}if(f.getBinaryShiftByteCount()>0){let E=f.addBinaryShiftChar(p).addBinaryShiftChar(p+1);_.push(E)}}static simplifyStates(f){let p=[];for(const v of f){let _=!0;for(const j of p){if(j.isBetterThanOrEqualTo(v)){_=!1;break}v.isBetterThanOrEqualTo(j)&&(p=p.filter(E=>E!==j))}_&&p.push(v)}return p}}class Bn{constructor(){}static encodeBytes(f){return Bn.encode(f,Bn.DEFAULT_EC_PERCENT,Bn.DEFAULT_AZTEC_LAYERS)}static encode(f,p,v){let _=new xo(f).encode(),j=A.truncDivision(_.getSize()*p,100)+11,E=_.getSize()+j,D,z,X,oe,we;if(v!==Bn.DEFAULT_AZTEC_LAYERS){if(D=v<0,z=Math.abs(v),z>(D?Bn.MAX_NB_BITS_COMPACT:Bn.MAX_NB_BITS))throw new x(G.format("Illegal value %s for layers",v));X=Bn.totalBitsInLayer(z,D),oe=Bn.WORD_SIZE[z];let qt=X-X%oe;if(we=Bn.stuffBits(_,oe),we.getSize()+j>qt)throw new x("Data to large for user specified layer");if(D&&we.getSize()>oe*64)throw new x("Data to large for user specified layer")}else{oe=0,we=null;for(let qt=0;;qt++){if(qt>Bn.MAX_NB_BITS)throw new x("Data too large for an Aztec code");if(D=qt<=3,z=D?qt+1:qt,X=Bn.totalBitsInLayer(z,D),E>X)continue;(we==null||oe!==Bn.WORD_SIZE[z])&&(oe=Bn.WORD_SIZE[z],we=Bn.stuffBits(_,oe));let on=X-X%oe;if(!(D&&we.getSize()>oe*64)&&we.getSize()+j<=on)break}}let Oe=Bn.generateCheckWords(we,X,oe),He=we.getSize()/oe,rt=Bn.generateModeMessage(D,z,He),lt=(D?11:14)+z*4,xt=new Int32Array(lt),St;if(D){St=lt;for(let qt=0;qt<xt.length;qt++)xt[qt]=qt}else{St=lt+1+2*A.truncDivision(A.truncDivision(lt,2)-1,15);let qt=A.truncDivision(lt,2),on=A.truncDivision(St,2);for(let gn=0;gn<qt;gn++){let es=gn+A.truncDivision(gn,15);xt[qt-gn-1]=on-es-1,xt[qt+gn]=on+es+1}}let Vt=new te(St);for(let qt=0,on=0;qt<z;qt++){let gn=(z-qt)*4+(D?9:12);for(let es=0;es<gn;es++){let _i=es*2;for(let ri=0;ri<2;ri++)Oe.get(on+_i+ri)&&Vt.set(xt[qt*2+ri],xt[qt*2+es]),Oe.get(on+gn*2+_i+ri)&&Vt.set(xt[qt*2+es],xt[lt-1-qt*2-ri]),Oe.get(on+gn*4+_i+ri)&&Vt.set(xt[lt-1-qt*2-ri],xt[lt-1-qt*2-es]),Oe.get(on+gn*6+_i+ri)&&Vt.set(xt[lt-1-qt*2-es],xt[qt*2+ri])}on+=gn*8}if(Bn.drawModeMessage(Vt,D,St,rt),D)Bn.drawBullsEye(Vt,A.truncDivision(St,2),5);else{Bn.drawBullsEye(Vt,A.truncDivision(St,2),7);for(let qt=0,on=0;qt<A.truncDivision(lt,2)-1;qt+=15,on+=16)for(let gn=A.truncDivision(St,2)&1;gn<St;gn+=2)Vt.set(A.truncDivision(St,2)-on,gn),Vt.set(A.truncDivision(St,2)+on,gn),Vt.set(gn,A.truncDivision(St,2)-on),Vt.set(gn,A.truncDivision(St,2)+on)}let Wt=new Vo;return Wt.setCompact(D),Wt.setSize(St),Wt.setLayers(z),Wt.setCodeWords(He),Wt.setMatrix(Vt),Wt}static drawBullsEye(f,p,v){for(let _=0;_<v;_+=2)for(let j=p-_;j<=p+_;j++)f.set(j,p-_),f.set(j,p+_),f.set(p-_,j),f.set(p+_,j);f.set(p-v,p-v),f.set(p-v+1,p-v),f.set(p-v,p-v+1),f.set(p+v,p-v),f.set(p+v,p-v+1),f.set(p+v,p+v-1)}static generateModeMessage(f,p,v){let _=new P;return f?(_.appendBits(p-1,2),_.appendBits(v-1,6),_=Bn.generateCheckWords(_,28,4)):(_.appendBits(p-1,5),_.appendBits(v-1,11),_=Bn.generateCheckWords(_,40,4)),_}static drawModeMessage(f,p,v,_){let j=A.truncDivision(v,2);if(p)for(let E=0;E<7;E++){let D=j-3+E;_.get(E)&&f.set(D,j-5),_.get(E+7)&&f.set(j+5,D),_.get(20-E)&&f.set(D,j+5),_.get(27-E)&&f.set(j-5,D)}else for(let E=0;E<10;E++){let D=j-5+E+A.truncDivision(E,5);_.get(E)&&f.set(D,j-7),_.get(E+10)&&f.set(j+7,D),_.get(29-E)&&f.set(D,j+7),_.get(39-E)&&f.set(j-7,D)}}static generateCheckWords(f,p,v){let _=f.getSize()/v,j=new kn(Bn.getGF(v)),E=A.truncDivision(p,v),D=Bn.bitsToWords(f,v,E);j.encode(D,E-_);let z=p%v,X=new P;X.appendBits(0,z);for(const oe of Array.from(D))X.appendBits(oe,v);return X}static bitsToWords(f,p,v){let _=new Int32Array(v),j,E;for(j=0,E=f.getSize()/p;j<E;j++){let D=0;for(let z=0;z<p;z++)D|=f.get(j*p+z)?1<<p-z-1:0;_[j]=D}return _}static getGF(f){switch(f){case 4:return Ee.AZTEC_PARAM;case 6:return Ee.AZTEC_DATA_6;case 8:return Ee.AZTEC_DATA_8;case 10:return Ee.AZTEC_DATA_10;case 12:return Ee.AZTEC_DATA_12;default:throw new x("Unsupported word size "+f)}}static stuffBits(f,p){let v=new P,_=f.getSize(),j=(1<<p)-2;for(let E=0;E<_;E+=p){let D=0;for(let z=0;z<p;z++)(E+z>=_||f.get(E+z))&&(D|=1<<p-1-z);(D&j)===j?(v.appendBits(D&j,p),E--):(D&j)===0?(v.appendBits(D|1,p),E--):v.appendBits(D,p)}return v}static totalBitsInLayer(f,p){return((p?88:112)+16*f)*f}}Bn.DEFAULT_EC_PERCENT=33,Bn.DEFAULT_AZTEC_LAYERS=0,Bn.MAX_NB_BITS=32,Bn.MAX_NB_BITS_COMPACT=4,Bn.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Ko{encode(f,p,v,_){return this.encodeWithHints(f,p,v,_,null)}encodeWithHints(f,p,v,_,j){let E=$o.ISO_8859_1,D=Bn.DEFAULT_EC_PERCENT,z=Bn.DEFAULT_AZTEC_LAYERS;return j!=null&&(j.has(Ar.CHARACTER_SET)&&(E=Kc.forName(j.get(Ar.CHARACTER_SET).toString())),j.has(Ar.ERROR_CORRECTION)&&(D=A.parseInt(j.get(Ar.ERROR_CORRECTION).toString())),j.has(Ar.AZTEC_LAYERS)&&(z=A.parseInt(j.get(Ar.AZTEC_LAYERS).toString()))),Ko.encodeLayers(f,p,v,_,E,D,z)}static encodeLayers(f,p,v,_,j,E,D){if(p!==Y.AZTEC)throw new x("Can only encode AZTEC, but got "+p);let z=Bn.encode(G.getBytes(f,j),E,D);return Ko.renderResult(z,v,_)}static renderResult(f,p,v){let _=f.getMatrix();if(_==null)throw new ge;let j=_.getWidth(),E=_.getHeight(),D=Math.max(p,j),z=Math.max(v,E),X=Math.min(D/j,z/E),oe=(D-j*X)/2,we=(z-E*X)/2,Oe=new te(D,z);for(let He=0,rt=we;He<E;He++,rt+=X)for(let lt=0,xt=oe;lt<j;lt++,xt+=X)_.get(lt,He)&&Oe.setRegion(xt,rt,X,X);return Oe}}r.AbstractExpandedDecoder=Ce,r.ArgumentException=u,r.ArithmeticException=ce,r.AztecCode=Vo,r.AztecCodeReader=ar,r.AztecCodeWriter=Ko,r.AztecDecoder=at,r.AztecDetector=Kt,r.AztecDetectorResult=Ft,r.AztecEncoder=Bn,r.AztecHighLevelEncoder=xo,r.AztecPoint=Jt,r.BarcodeFormat=Y,r.Binarizer=k,r.BinaryBitmap=b,r.BitArray=P,r.BitMatrix=te,r.BitSource=ra,r.BrowserAztecCodeReader=vr,r.BrowserBarcodeReader=ta,r.BrowserCodeReader=re,r.BrowserDatamatrixCodeReader=na,r.BrowserMultiFormatReader=pt,r.BrowserPDF417Reader=$t,r.BrowserQRCodeReader=lr,r.BrowserQRCodeSvgWriter=ds,r.CharacterSetECI=L,r.ChecksumException=g,r.Code128Reader=ft,r.Code39Reader=br,r.DataMatrixDecodedBitStreamParser=Gi,r.DataMatrixReader=Ns,r.DecodeHintType=W,r.DecoderResult=ne,r.DefaultGridSampler=Sr,r.DetectorResult=zt,r.EAN13Reader=Ge,r.EncodeHintType=Ar,r.Exception=c,r.FormatException=R,r.GenericGF=Ee,r.GenericGFPoly=De,r.GlobalHistogramBinarizer=ue,r.GridSampler=hr,r.GridSamplerInstance=tr,r.HTMLCanvasElementLuminanceSource=Pe,r.HybridBinarizer=ae,r.ITFReader=yr,r.IllegalArgumentException=x,r.IllegalStateException=ge,r.InvertedLuminanceSource=ve,r.LuminanceSource=pe,r.MathUtils=Je,r.MultiFormatOneDReader=ia,r.MultiFormatReader=it,r.MultiFormatWriter=fo,r.NotFoundException=se,r.OneDReader=rr,r.PDF417DecodedBitStreamParser=Pt,r.PDF417DecoderErrorCorrection=ho,r.PDF417Reader=ke,r.PDF417ResultMetadata=Rl,r.PerspectiveTransform=sr,r.PlanarYUVLuminanceSource=Po,r.QRCodeByteMatrix=oa,r.QRCodeDataMask=Or,r.QRCodeDecodedBitStreamParser=_n,r.QRCodeDecoderErrorCorrectionLevel=Mn,r.QRCodeDecoderFormatInformation=ps,r.QRCodeEncoder=On,r.QRCodeEncoderQRCode=Ca,r.QRCodeMaskUtil=qr,r.QRCodeMatrixUtil=Er,r.QRCodeMode=Tr,r.QRCodeReader=xl,r.QRCodeVersion=vt,r.QRCodeWriter=yi,r.RGBLuminanceSource=Gc,r.RSS14Reader=Zr,r.RSSExpandedReader=Et,r.ReaderException=$e,r.ReedSolomonDecoder=Qe,r.ReedSolomonEncoder=kn,r.ReedSolomonException=be,r.Result=J,r.ResultMetadataType=me,r.ResultPoint=Ke,r.StringUtils=G,r.UnsupportedOperationException=Q,r.VideoInputDevice=xe,r.WhiteRectangleDetector=fr,r.WriterException=Cn,r.ZXingArrays=O,r.ZXingCharset=Kc,r.ZXingInteger=A,r.ZXingStandardCharsets=$o,r.ZXingStringBuilder=Z,r.ZXingStringEncoding=H,r.ZXingSystem=y,r.createAbstractExpandedDecoder=Yt,Object.defineProperty(r,"__esModule",{value:!0})}))})(Fg,Fg.exports)),Fg.exports}var As=O2e();const P2e=zc(As),I2e=m6({__proto__:null,default:P2e},[As]);var zD=(function(){function e(t,r,n){if(this.formatMap=new Map([[Hr.QR_CODE,As.BarcodeFormat.QR_CODE],[Hr.AZTEC,As.BarcodeFormat.AZTEC],[Hr.CODABAR,As.BarcodeFormat.CODABAR],[Hr.CODE_39,As.BarcodeFormat.CODE_39],[Hr.CODE_93,As.BarcodeFormat.CODE_93],[Hr.CODE_128,As.BarcodeFormat.CODE_128],[Hr.DATA_MATRIX,As.BarcodeFormat.DATA_MATRIX],[Hr.MAXICODE,As.BarcodeFormat.MAXICODE],[Hr.ITF,As.BarcodeFormat.ITF],[Hr.EAN_13,As.BarcodeFormat.EAN_13],[Hr.EAN_8,As.BarcodeFormat.EAN_8],[Hr.PDF_417,As.BarcodeFormat.PDF_417],[Hr.RSS_14,As.BarcodeFormat.RSS_14],[Hr.RSS_EXPANDED,As.BarcodeFormat.RSS_EXPANDED],[Hr.UPC_A,As.BarcodeFormat.UPC_A],[Hr.UPC_E,As.BarcodeFormat.UPC_E],[Hr.UPC_EAN_EXTENSION,As.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!I2e)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=r,this.logger=n;var a=this.createZXingFormats(t),i=new Map;i.set(As.DecodeHintType.POSSIBLE_FORMATS,a),i.set(As.DecodeHintType.TRY_HARDER,!1),this.hints=i}return e.prototype.decodeAsync=function(t){var r=this;return new Promise(function(n,a){try{n(r.decode(t))}catch(i){a(i)}})},e.prototype.decode=function(t){var r=new As.MultiFormatReader(this.verbose,this.hints),n=new As.HTMLCanvasElementLuminanceSource(t),a=new As.BinaryBitmap(new As.HybridBinarizer(n)),i=r.decode(a);return{text:i.text,format:UV.create(this.toHtml5QrcodeSupportedFormats(i.format)),debugData:this.createDebugData()}},e.prototype.createReverseFormatMap=function(){var t=new Map;return this.formatMap.forEach(function(r,n,a){t.set(r,n)}),t},e.prototype.toHtml5QrcodeSupportedFormats=function(t){if(!this.reverseFormatMap.has(t))throw"reverseFormatMap doesn't have ".concat(t);return this.reverseFormatMap.get(t)},e.prototype.createZXingFormats=function(t){for(var r=[],n=0,a=t;n<a.length;n++){var i=a[n];this.formatMap.has(i)?r.push(this.formatMap.get(i)):this.logger.logError("".concat(i," is not supported by")+"ZXingHtml5QrcodeShim")}return r},e.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},e})(),D2e=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{c(n.next(u))}catch(x){o(x)}}function d(u){try{c(n.throw(u))}catch(x){o(x)}}function c(u){u.done?i(u.value):a(u.value).then(l,d)}c((n=n.apply(e,t||[])).next())})},M2e=function(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,a,i,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(c){return function(u){return d([c,u])}}function d(c){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(r=0)),r;)try{if(n=1,a&&(i=c[0]&2?a.return:c[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,c[1])).done)return i;switch(a=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,a=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){r.label=c[1];break}if(c[0]===6&&r.label<i[1]){r.label=i[1],i=c;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(c);break}i[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(u){c=[6,u],a=0}finally{n=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},qD=(function(){function e(t,r,n){if(this.formatMap=new Map([[Hr.QR_CODE,"qr_code"],[Hr.AZTEC,"aztec"],[Hr.CODABAR,"codabar"],[Hr.CODE_39,"code_39"],[Hr.CODE_93,"code_93"],[Hr.CODE_128,"code_128"],[Hr.DATA_MATRIX,"data_matrix"],[Hr.ITF,"itf"],[Hr.EAN_13,"ean_13"],[Hr.EAN_8,"ean_8"],[Hr.PDF_417,"pdf417"],[Hr.UPC_A,"upc_a"],[Hr.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!e.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=r,this.logger=n;var a=this.createBarcodeDetectorFormats(t);if(this.detector=new BarcodeDetector(a),!this.detector)throw"BarcodeDetector detector not supported"}return e.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var t=new BarcodeDetector({formats:["qr_code"]});return typeof t<"u"},e.prototype.decodeAsync=function(t){return D2e(this,void 0,void 0,function(){var r,n;return M2e(this,function(a){switch(a.label){case 0:return[4,this.detector.detect(t)];case 1:if(r=a.sent(),!r||r.length===0)throw"No barcode or QR code detected.";return n=this.selectLargestBarcode(r),[2,{text:n.rawValue,format:UV.create(this.toHtml5QrcodeSupportedFormats(n.format)),debugData:this.createDebugData()}]}})})},e.prototype.selectLargestBarcode=function(t){for(var r=null,n=0,a=0,i=t;a<i.length;a++){var o=i[a],l=o.boundingBox.width*o.boundingBox.height;l>n&&(n=l,r=o)}if(!r)throw"No largest barcode found";return r},e.prototype.createBarcodeDetectorFormats=function(t){for(var r=[],n=0,a=t;n<a.length;n++){var i=a[n];this.formatMap.has(i)?r.push(this.formatMap.get(i)):this.logger.warn("".concat(i," is not supported by")+"BarcodeDetectorDelegate")}return{formats:r}},e.prototype.toHtml5QrcodeSupportedFormats=function(t){if(!this.reverseFormatMap.has(t))throw"reverseFormatMap doesn't have ".concat(t);return this.reverseFormatMap.get(t)},e.prototype.createReverseFormatMap=function(){var t=new Map;return this.formatMap.forEach(function(r,n,a){t.set(r,n)}),t},e.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},e})(),HD=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{c(n.next(u))}catch(x){o(x)}}function d(u){try{c(n.throw(u))}catch(x){o(x)}}function c(u){u.done?i(u.value):a(u.value).then(l,d)}c((n=n.apply(e,t||[])).next())})},$D=function(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,a,i,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(c){return function(u){return d([c,u])}}function d(c){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(r=0)),r;)try{if(n=1,a&&(i=c[0]&2?a.return:c[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,c[1])).done)return i;switch(a=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,a=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){r.label=c[1];break}if(c[0]===6&&r.label<i[1]){r.label=i[1],i=c;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(c);break}i[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(u){c=[6,u],a=0}finally{n=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},L2e=(function(){function e(t,r,n,a){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=n,r&&qD.isSupported()?(this.primaryDecoder=new qD(t,n,a),this.secondaryDecoder=new zD(t,n,a)):this.primaryDecoder=new zD(t,n,a)}return e.prototype.decodeAsync=function(t){return HD(this,void 0,void 0,function(){var r;return $D(this,function(n){switch(n.label){case 0:r=performance.now(),n.label=1;case 1:return n.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(t)];case 2:return[2,n.sent()];case 3:return this.possiblyLogPerformance(r),[7];case 4:return[2]}})})},e.prototype.decodeRobustlyAsync=function(t){return HD(this,void 0,void 0,function(){var r,n;return $D(this,function(a){switch(a.label){case 0:r=performance.now(),a.label=1;case 1:return a.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(t)];case 2:return[2,a.sent()];case 3:if(n=a.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(t)];throw n;case 4:return this.possiblyLogPerformance(r),[7];case 5:return[2]}})})},e.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},e.prototype.possiblyLogPerformance=function(t){if(this.verbose){var r=performance.now()-t;this.executionResults.push(r),this.executions++,this.possiblyFlushPerformanceReport()}},e.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var t=0,r=0,n=this.executionResults;r<n.length;r++){var a=n[r];t+=a}var i=t/this.executionResults.length;console.log("".concat(i," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},e})(),GA=(function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),mk=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{c(n.next(u))}catch(x){o(x)}}function d(u){try{c(n.throw(u))}catch(x){o(x)}}function c(u){u.done?i(u.value):a(u.value).then(l,d)}c((n=n.apply(e,t||[])).next())})},xk=function(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,a,i,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(c){return function(u){return d([c,u])}}function d(c){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(r=0)),r;)try{if(n=1,a&&(i=c[0]&2?a.return:c[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,c[1])).done)return i;switch(a=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,a=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){r.label=c[1];break}if(c[0]===6&&r.label<i[1]){r.label=i[1],i=c;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(c);break}i[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(u){c=[6,u],a=0}finally{n=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},qV=(function(){function e(t,r){this.name=t,this.track=r}return e.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},e.prototype.apply=function(t){var r={};r[this.name]=t;var n={advanced:[r]};return this.track.applyConstraints(n)},e.prototype.value=function(){var t=this.track.getSettings();if(this.name in t){var r=t[this.name];return r}return null},e})(),R2e=(function(e){GA(t,e);function t(r,n){return e.call(this,r,n)||this}return t.prototype.min=function(){return this.getCapabilities().min},t.prototype.max=function(){return this.getCapabilities().max},t.prototype.step=function(){return this.getCapabilities().step},t.prototype.apply=function(r){var n={};n[this.name]=r;var a={advanced:[n]};return this.track.applyConstraints(a)},t.prototype.getCapabilities=function(){this.failIfNotSupported();var r=this.track.getCapabilities(),n=r[this.name];return{min:n.min,max:n.max,step:n.step}},t.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},t})(qV),F2e=(function(e){GA(t,e);function t(r){return e.call(this,"zoom",r)||this}return t})(R2e),B2e=(function(e){GA(t,e);function t(r){return e.call(this,"torch",r)||this}return t})(qV),U2e=(function(){function e(t){this.track=t}return e.prototype.zoomFeature=function(){return new F2e(this.track)},e.prototype.torchFeature=function(){return new B2e(this.track)},e})(),z2e=(function(){function e(t,r,n){this.isClosed=!1,this.parentElement=t,this.mediaStream=r,this.callbacks=n,this.surface=this.createVideoElement(this.parentElement.clientWidth),t.append(this.surface)}return e.prototype.createVideoElement=function(t){var r=document.createElement("video");return r.style.width="".concat(t,"px"),r.style.display="block",r.muted=!0,r.setAttribute("muted","true"),r.playsInline=!0,r},e.prototype.setupSurface=function(){var t=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var r=function(){var n=t.surface.clientWidth,a=t.surface.clientHeight;t.callbacks.onRenderSurfaceReady(n,a),t.surface.removeEventListener("playing",r)};this.surface.addEventListener("playing",r),this.surface.srcObject=this.mediaStream,this.surface.play()},e.create=function(t,r,n,a){return mk(this,void 0,void 0,function(){var i,o;return xk(this,function(l){switch(l.label){case 0:return i=new e(t,r,a),n.aspectRatio?(o={aspectRatio:n.aspectRatio},[4,i.getFirstTrackOrFail().applyConstraints(o)]):[3,2];case 1:l.sent(),l.label=2;case 2:return i.setupSurface(),[2,i]}})})},e.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},e.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},e.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},e.prototype.resume=function(t){this.failIfClosed();var r=this,n=function(){setTimeout(t,200),r.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.play()},e.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},e.prototype.getSurface=function(){return this.failIfClosed(),this.surface},e.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},e.prototype.applyVideoConstraints=function(t){return mk(this,void 0,void 0,function(){return xk(this,function(r){if("aspectRatio"in t)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(t)]})})},e.prototype.close=function(){if(this.isClosed)return Promise.resolve();var t=this;return new Promise(function(r,n){var a=t.mediaStream.getVideoTracks(),i=a.length,o=0;t.mediaStream.getVideoTracks().forEach(function(l){t.mediaStream.removeTrack(l),l.stop(),++o,o>=i&&(t.isClosed=!0,t.parentElement.removeChild(t.surface),r())})})},e.prototype.getCapabilities=function(){return new U2e(this.getFirstTrackOrFail())},e})(),q2e=(function(){function e(t){this.mediaStream=t}return e.prototype.render=function(t,r,n){return mk(this,void 0,void 0,function(){return xk(this,function(a){return[2,z2e.create(t,this.mediaStream,r,n)]})})},e.create=function(t){return mk(this,void 0,void 0,function(){var r,n;return xk(this,function(a){switch(a.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return r={audio:!1,video:t},[4,navigator.mediaDevices.getUserMedia(r)];case 1:return n=a.sent(),[2,new e(n)]}})})},e})(),VD=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{c(n.next(u))}catch(x){o(x)}}function d(u){try{c(n.throw(u))}catch(x){o(x)}}function c(u){u.done?i(u.value):a(u.value).then(l,d)}c((n=n.apply(e,t||[])).next())})},WD=function(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,a,i,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(c){return function(u){return d([c,u])}}function d(c){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(r=0)),r;)try{if(n=1,a&&(i=c[0]&2?a.return:c[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,c[1])).done)return i;switch(a=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,a=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){r.label=c[1];break}if(c[0]===6&&r.label<i[1]){r.label=i[1],i=c;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(c);break}i[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(u){c=[6,u],a=0}finally{n=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},H2e=(function(){function e(){}return e.failIfNotSupported=function(){return VD(this,void 0,void 0,function(){return WD(this,function(t){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new e]})})},e.prototype.create=function(t){return VD(this,void 0,void 0,function(){return WD(this,function(r){return[2,q2e.create(t)]})})},e})(),$2e=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{c(n.next(u))}catch(x){o(x)}}function d(u){try{c(n.throw(u))}catch(x){o(x)}}function c(u){u.done?i(u.value):a(u.value).then(l,d)}c((n=n.apply(e,t||[])).next())})},V2e=function(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,a,i,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(c){return function(u){return d([c,u])}}function d(c){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(r=0)),r;)try{if(n=1,a&&(i=c[0]&2?a.return:c[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,c[1])).done)return i;switch(a=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,a=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){r.label=c[1];break}if(c[0]===6&&r.label<i[1]){r.label=i[1],i=c;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(c);break}i[2]&&r.ops.pop(),r.trys.pop();continue}c=t.call(e,r)}catch(u){c=[6,u],a=0}finally{n=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},W2e=(function(){function e(){}return e.retrieve=function(){if(navigator.mediaDevices)return e.getCamerasFromMediaDevices();var t=MediaStreamTrack;return MediaStreamTrack&&t.getSources?e.getCamerasFromMediaStreamTrack():e.rejectWithError()},e.rejectWithError=function(){var t=w1.unableToQuerySupportedDevices();return e.isHttpsOrLocalhost()||(t=w1.insecureContextCameraQueryError()),Promise.reject(t)},e.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var t=location.host.split(":")[0];return t==="127.0.0.1"||t==="localhost"},e.getCamerasFromMediaDevices=function(){return $2e(this,void 0,void 0,function(){var t,r,n,a,i,o,l;return V2e(this,function(d){switch(d.label){case 0:return t=function(c){for(var u=c.getVideoTracks(),x=0,b=u;x<b.length;x++){var g=b[x];g.enabled=!1,g.stop(),c.removeTrack(g)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return r=d.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(n=d.sent(),a=[],i=0,o=n;i<o.length;i++)l=o[i],l.kind==="videoinput"&&a.push({id:l.deviceId,label:l.label});return t(r),[2,a]}})})},e.getCamerasFromMediaStreamTrack=function(){return new Promise(function(t,r){var n=function(i){for(var o=[],l=0,d=i;l<d.length;l++){var c=d[l];c.kind==="video"&&o.push({id:c.id,label:c.label})}t(o)},a=MediaStreamTrack;a.getSources(n)})},e})(),Es;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.NOT_STARTED=1]="NOT_STARTED",e[e.SCANNING=2]="SCANNING",e[e.PAUSED=3]="PAUSED"})(Es||(Es={}));var G2e=(function(){function e(){this.state=Es.NOT_STARTED,this.onGoingTransactionNewState=Es.UNKNOWN}return e.prototype.directTransition=function(t){this.failIfTransitionOngoing(),this.validateTransition(t),this.state=t},e.prototype.startTransition=function(t){return this.failIfTransitionOngoing(),this.validateTransition(t),this.onGoingTransactionNewState=t,this},e.prototype.execute=function(){if(this.onGoingTransactionNewState===Es.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var t=this.onGoingTransactionNewState;this.onGoingTransactionNewState=Es.UNKNOWN,this.directTransition(t)},e.prototype.cancel=function(){if(this.onGoingTransactionNewState===Es.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=Es.UNKNOWN},e.prototype.getState=function(){return this.state},e.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==Es.UNKNOWN)throw"Cannot transition to a new state, already under transition"},e.prototype.validateTransition=function(t){switch(this.state){case Es.UNKNOWN:throw"Transition from unknown is not allowed";case Es.NOT_STARTED:this.failIfNewStateIs(t,[Es.PAUSED]);break;case Es.SCANNING:break;case Es.PAUSED:break}},e.prototype.failIfNewStateIs=function(t,r){for(var n=0,a=r;n<a.length;n++){var i=a[n];if(t===i)throw"Cannot transition from ".concat(this.state," to ").concat(t)}},e})(),K2e=(function(){function e(t){this.stateManager=t}return e.prototype.startTransition=function(t){return this.stateManager.startTransition(t)},e.prototype.directTransition=function(t){this.stateManager.directTransition(t)},e.prototype.getState=function(){return this.stateManager.getState()},e.prototype.canScanFile=function(){return this.stateManager.getState()===Es.NOT_STARTED},e.prototype.isScanning=function(){return this.stateManager.getState()!==Es.NOT_STARTED},e.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===Es.SCANNING},e.prototype.isPaused=function(){return this.stateManager.getState()===Es.PAUSED},e})(),X2e=(function(){function e(){}return e.create=function(){return new K2e(new G2e)},e})(),Y2e=(function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),_c=(function(e){Y2e(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.DEFAULT_WIDTH=300,t.DEFAULT_WIDTH_OFFSET=2,t.FILE_SCAN_MIN_HEIGHT=300,t.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,t.MIN_QR_BOX_SIZE=50,t.SHADED_LEFT=1,t.SHADED_RIGHT=2,t.SHADED_TOP=3,t.SHADED_BOTTOM=4,t.SHADED_REGION_ELEMENT_ID="qr-shaded-region",t.VERBOSE=!1,t.BORDER_SHADER_DEFAULT_COLOR="#ffffff",t.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",t})(C2e),Q2e=(function(){function e(t,r){this.logger=r,this.fps=_c.SCAN_DEFAULT_FPS,t?(t.fps&&(this.fps=t.fps),this.disableFlip=t.disableFlip===!0,this.qrbox=t.qrbox,this.aspectRatio=t.aspectRatio,this.videoConstraints=t.videoConstraints):this.disableFlip=_c.DEFAULT_DISABLE_FLIP}return e.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?zV.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},e.prototype.isShadedBoxEnabled=function(){return!S0(this.qrbox)},e.create=function(t,r){return new e(t,r)},e})(),Z2e=(function(){function e(t,r){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(t))throw"HTML Element with id=".concat(t," not found");this.elementId=t,this.verbose=!1;var n;typeof r=="boolean"?this.verbose=r===!0:r&&(n=r,this.verbose=n.verbose===!0,n.experimentalFeatures),this.logger=new E2e(this.verbose),this.qrcode=new L2e(this.getSupportedFormats(r),this.getUseBarCodeDetectorIfSupported(n),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=X2e.create()}return e.prototype.start=function(t,r,n,a){var i=this;if(!t)throw"cameraIdOrConfig is required";if(!n||typeof n!="function")throw"qrCodeSuccessCallback is required and should be a function.";var o;a?o=a:o=this.verbose?this.logger.log:function(){};var l=Q2e.create(r,this.logger);this.clearElement();var d=!1;l.videoConstraints&&(l.isMediaStreamConstraintsValid()?d=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var c=d,u=document.getElementById(this.elementId);u.clientWidth?u.clientWidth:_c.DEFAULT_WIDTH,u.style.position="relative",this.shouldScan=!0,this.element=u;var x=this,b=this.stateManagerProxy.startTransition(Es.SCANNING);return new Promise(function(g,k){var y=c?l.videoConstraints:x.createVideoConstraints(t);if(!y){b.cancel(),k("videoConstraints should be defined");return}var N={};(!c||l.aspectRatio)&&(N.aspectRatio=l.aspectRatio);var S={onRenderSurfaceReady:function(O,A){x.setupUi(O,A,l),x.isScanning=!0,x.foreverScan(l,n,o)}};H2e.failIfNotSupported().then(function(O){O.create(y).then(function(A){return A.render(i.element,N,S).then(function(P){x.renderedCamera=P,b.execute(),g(null)}).catch(function(P){b.cancel(),k(P)})}).catch(function(A){b.cancel(),k(w1.errorGettingUserMedia(A))})}).catch(function(O){b.cancel(),k(w1.cameraStreamingNotSupported())})})},e.prototype.pause=function(t){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(Es.PAUSED),this.showPausedState(),(S0(t)||t!==!0)&&(t=!1),t&&this.renderedCamera&&this.renderedCamera.pause()},e.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var t=this,r=function(){t.stateManagerProxy.directTransition(Es.SCANNING),t.hidePausedState()};if(!this.renderedCamera.isPaused()){r();return}this.renderedCamera.resume(function(){r()})},e.prototype.getState=function(){return this.stateManagerProxy.getState()},e.prototype.stop=function(){var t=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var r=this.stateManagerProxy.startTransition(Es.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var n=function(){if(t.element){var i=document.getElementById(_c.SHADED_REGION_ELEMENT_ID);i&&t.element.removeChild(i)}},a=this;return this.renderedCamera.close().then(function(){return a.renderedCamera=null,a.element&&(a.element.removeChild(a.canvasElement),a.canvasElement=null),n(),a.qrRegion&&(a.qrRegion=null),a.context&&(a.context=null),r.execute(),a.hidePausedState(),a.isScanning=!1,Promise.resolve()})},e.prototype.scanFile=function(t,r){return this.scanFileV2(t,r).then(function(n){return n.decodedText})},e.prototype.scanFileV2=function(t,r){var n=this;if(!t||!(t instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(S0(r)&&(r=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(a,i){n.possiblyCloseLastScanImageFile(),n.clearElement(),n.lastScanImageFile=URL.createObjectURL(t);var o=new Image;o.onload=function(){var l=o.width,d=o.height,c=document.getElementById(n.elementId),u=c.clientWidth?c.clientWidth:_c.DEFAULT_WIDTH,x=Math.max(c.clientHeight?c.clientHeight:d,_c.FILE_SCAN_MIN_HEIGHT),b=n.computeCanvasDrawConfig(l,d,u,x);if(r){var g=n.createCanvasElement(u,x,"qr-canvas-visible");g.style.display="inline-block",c.appendChild(g);var k=g.getContext("2d");if(!k)throw"Unable to get 2d context from canvas";k.canvas.width=u,k.canvas.height=x,k.drawImage(o,0,0,l,d,b.x,b.y,b.width,b.height)}var y=_c.FILE_SCAN_HIDDEN_CANVAS_PADDING,N=Math.max(o.width,b.width),S=Math.max(o.height,b.height),O=N+2*y,A=S+2*y,P=n.createCanvasElement(O,A);c.appendChild(P);var q=P.getContext("2d");if(!q)throw"Unable to get 2d context from canvas";q.canvas.width=O,q.canvas.height=A,q.drawImage(o,0,0,l,d,y,y,N,S);try{n.qrcode.decodeRobustlyAsync(P).then(function(W){a(BD.createFromQrcodeResult(W))}).catch(i)}catch(W){i("QR code parse error, error = ".concat(W))}},o.onerror=i,o.onabort=i,o.onstalled=i,o.onsuspend=i,o.src=URL.createObjectURL(t)})},e.prototype.clear=function(){this.clearElement()},e.getCameras=function(){return W2e.retrieve()},e.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},e.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},e.prototype.applyVideoConstraints=function(t){if(t){if(!zV.isMediaStreamConstraintsValid(t,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(t)},e.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},e.prototype.getSupportedFormats=function(t){var r=[Hr.QR_CODE,Hr.AZTEC,Hr.CODABAR,Hr.CODE_39,Hr.CODE_93,Hr.CODE_128,Hr.DATA_MATRIX,Hr.MAXICODE,Hr.ITF,Hr.EAN_13,Hr.EAN_8,Hr.PDF_417,Hr.RSS_14,Hr.RSS_EXPANDED,Hr.UPC_A,Hr.UPC_E,Hr.UPC_EAN_EXTENSION];if(!t||typeof t=="boolean"||!t.formatsToSupport)return r;if(!Array.isArray(t.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(t.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var n=[],a=0,i=t.formatsToSupport;a<i.length;a++){var o=i[a];j2e(o)?n.push(o):this.logger.warn("Invalid format: ".concat(o," passed in config, ignoring."))}if(n.length===0)throw"None of formatsToSupport match supported values.";return n},e.prototype.getUseBarCodeDetectorIfSupported=function(t){if(S0(t))return!0;if(!S0(t.useBarCodeDetectorIfSupported))return t.useBarCodeDetectorIfSupported!==!1;if(S0(t.experimentalFeatures))return!0;var r=t.experimentalFeatures;return S0(r.useBarCodeDetectorIfSupported)?!0:r.useBarCodeDetectorIfSupported!==!1},e.prototype.validateQrboxSize=function(t,r,n){var a=this,i=n.qrbox;this.validateQrboxConfig(i);var o=this.toQrdimensions(t,r,i),l=function(c){if(c<_c.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(_c.MIN_QR_BOX_SIZE,"px.")},d=function(c){return c>t&&(a.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),c=t),c};l(o.width),l(o.height),o.width=d(o.width)},e.prototype.validateQrboxConfig=function(t){if(typeof t!="number"&&typeof t!="function"&&(t.width===void 0||t.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},e.prototype.toQrdimensions=function(t,r,n){if(typeof n=="number")return{width:n,height:n};if(typeof n=="function")try{return n(t,r)}catch(a){throw new Error("qrbox config was passed as a function but it failed with unknown error"+a)}return n},e.prototype.setupUi=function(t,r,n){n.isShadedBoxEnabled()&&this.validateQrboxSize(t,r,n);var a=S0(n.qrbox)?{width:t,height:r}:n.qrbox;this.validateQrboxConfig(a);var i=this.toQrdimensions(t,r,a);i.height>r&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var o=n.isShadedBoxEnabled()&&i.height<=r,l={x:0,y:0,width:t,height:r},d=o?this.getShadedRegionBounds(t,r,i):l,c=this.createCanvasElement(d.width,d.height),u={willReadFrequently:!0},x=c.getContext("2d",u);x.canvas.width=d.width,x.canvas.height=d.height,this.element.append(c),o&&this.possiblyInsertShadingElement(this.element,t,r,i),this.createScannerPausedUiElement(this.element),this.qrRegion=d,this.context=x,this.canvasElement=c},e.prototype.createScannerPausedUiElement=function(t){var r=document.createElement("div");r.innerText=w1.scannerPaused(),r.style.display="none",r.style.position="absolute",r.style.top="0px",r.style.zIndex="1",r.style.background="rgba(9, 9, 9, 0.46)",r.style.color="#FFECEC",r.style.textAlign="center",r.style.width="100%",t.appendChild(r),this.scannerPausedUiElement=r},e.prototype.scanContext=function(t,r){var n=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(a){return t(a.text,BD.createFromQrcodeResult(a)),n.possiblyUpdateShaders(!0),!0}).catch(function(a){n.possiblyUpdateShaders(!1);var i=w1.codeParseError(a);return r(i,A2e.createFrom(i)),!1})},e.prototype.foreverScan=function(t,r,n){var a=this;if(this.shouldScan&&this.renderedCamera){var i=this.renderedCamera.getSurface(),o=i.videoWidth/i.clientWidth,l=i.videoHeight/i.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var d=this.qrRegion.width*o,c=this.qrRegion.height*l,u=this.qrRegion.x*o,x=this.qrRegion.y*l;this.context.drawImage(i,u,x,d,c,0,0,this.qrRegion.width,this.qrRegion.height);var b=function(){a.foreverScanTimeout=setTimeout(function(){a.foreverScan(t,r,n)},a.getTimeoutFps(t.fps))};this.scanContext(r,n).then(function(g){!g&&t.disableFlip!==!0?(a.context.translate(a.context.canvas.width,0),a.context.scale(-1,1),a.scanContext(r,n).finally(function(){b()})):b()}).catch(function(g){a.logger.logError("Error happend while scanning context",g),b()})}},e.prototype.createVideoConstraints=function(t){if(typeof t=="string")return{deviceId:{exact:t}};if(typeof t=="object"){var r="facingMode",n="deviceId",a={user:!0,environment:!0},i="exact",o=function(k){if(k in a)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(k,"'")},l=Object.keys(t);if(l.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(l.length," keys");var d=Object.keys(t)[0];if(d!==r&&d!==n)throw"Only '".concat(r,"' and '").concat(n,"' ")+" are supported for 'cameraIdOrConfig'";if(d===r){var c=t.facingMode;if(typeof c=="string"){if(o(c))return{facingMode:c}}else if(typeof c=="object")if(i in c){if(o(c["".concat(i)]))return{facingMode:{exact:c["".concat(i)]}}}else throw"'facingMode' should be string or object with"+" ".concat(i," as key.");else{var u=typeof c;throw"Invalid type of 'facingMode' = ".concat(u)}}else{var x=t.deviceId;if(typeof x=="string")return{deviceId:x};if(typeof x=="object"){if(i in x)return{deviceId:{exact:x["".concat(i)]}};throw"'deviceId' should be string or object with"+" ".concat(i," as key.")}else{var b=typeof x;throw"Invalid type of 'deviceId' = ".concat(b)}}}var g=typeof t;throw"Invalid type of 'cameraIdOrConfig' = ".concat(g)},e.prototype.computeCanvasDrawConfig=function(t,r,n,a){if(t<=n&&r<=a){var i=(n-t)/2,o=(a-r)/2;return{x:i,y:o,width:t,height:r}}else{var l=t,d=r;return t>n&&(r=n/t*r,t=n),r>a&&(t=a/r*t,r=a),this.logger.log("Image downsampled from "+"".concat(l,"X").concat(d)+" to ".concat(t,"X").concat(r,".")),this.computeCanvasDrawConfig(t,r,n,a)}},e.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var t=document.getElementById(this.elementId);t&&(t.innerHTML="")},e.prototype.possiblyUpdateShaders=function(t){this.qrMatch!==t&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(r){r.style.backgroundColor=t?_c.BORDER_SHADER_MATCH_COLOR:_c.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=t)},e.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},e.prototype.createCanvasElement=function(t,r,n){var a=t,i=r,o=document.createElement("canvas");return o.style.width="".concat(a,"px"),o.style.height="".concat(i,"px"),o.style.display="none",o.id=S0(n)?"qr-canvas":n,o},e.prototype.getShadedRegionBounds=function(t,r,n){if(n.width>t||n.height>r)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(t-n.width)/2,y:(r-n.height)/2,width:n.width,height:n.height}},e.prototype.possiblyInsertShadingElement=function(t,r,n,a){if(!(r-a.width<1||n-a.height<1)){var i=document.createElement("div");i.style.position="absolute";var o=(r-a.width)/2,l=(n-a.height)/2;if(i.style.borderLeft="".concat(o,"px solid rgba(0, 0, 0, 0.48)"),i.style.borderRight="".concat(o,"px solid rgba(0, 0, 0, 0.48)"),i.style.borderTop="".concat(l,"px solid rgba(0, 0, 0, 0.48)"),i.style.borderBottom="".concat(l,"px solid rgba(0, 0, 0, 0.48)"),i.style.boxSizing="border-box",i.style.top="0px",i.style.bottom="0px",i.style.left="0px",i.style.right="0px",i.id="".concat(_c.SHADED_REGION_ELEMENT_ID),r-a.width<11||n-a.height<11)this.hasBorderShaders=!1;else{var d=5,c=40;this.insertShaderBorders(i,c,d,-d,null,0,!0),this.insertShaderBorders(i,c,d,-d,null,0,!1),this.insertShaderBorders(i,c,d,null,-d,0,!0),this.insertShaderBorders(i,c,d,null,-d,0,!1),this.insertShaderBorders(i,d,c+d,-d,null,-d,!0),this.insertShaderBorders(i,d,c+d,null,-d,-d,!0),this.insertShaderBorders(i,d,c+d,-d,null,-d,!1),this.insertShaderBorders(i,d,c+d,null,-d,-d,!1),this.hasBorderShaders=!0}t.append(i)}},e.prototype.insertShaderBorders=function(t,r,n,a,i,o,l){var d=document.createElement("div");d.style.position="absolute",d.style.backgroundColor=_c.BORDER_SHADER_DEFAULT_COLOR,d.style.width="".concat(r,"px"),d.style.height="".concat(n,"px"),a!==null&&(d.style.top="".concat(a,"px")),i!==null&&(d.style.bottom="".concat(i,"px")),l?d.style.left="".concat(o,"px"):d.style.right="".concat(o,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(d),t.appendChild(d)},e.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},e.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},e.prototype.getTimeoutFps=function(t){return 1e3/t},e})(),GD;(function(e){e[e.STATUS_DEFAULT=0]="STATUS_DEFAULT",e[e.STATUS_SUCCESS=1]="STATUS_SUCCESS",e[e.STATUS_WARNING=2]="STATUS_WARNING",e[e.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(GD||(GD={}));const KA=({isOpen:e,onClose:t,onScan:r,title:n="Qut m vch"})=>{const a=T.useRef(null),[i,o]=T.useState(!1),[l,d]=T.useState(null),[c,u]=T.useState(!1),[x,b]=T.useState("environment"),[g,k]=T.useState(""),y=T.useRef(!1),N=T.useRef(!0),S=T.useCallback(async R=>{if(!y.current){if(y.current=!0,console.log(" Barcode scanned:",R),navigator.vibrate&&navigator.vibrate(100),k(R),a.current)try{a.current.getState()===Es.SCANNING&&await a.current.stop()}catch{}o(!1),setTimeout(()=>{N.current&&(r(R),t())},300)}},[r,t]);T.useEffect(()=>(N.current=!0,()=>{N.current=!1}),[]),T.useEffect(()=>(e?(y.current=!1,k(""),O()):A(),()=>{A()}),[e,x]);const O=async()=>{try{if(d(null),a.current)try{a.current.getState()===Es.SCANNING&&await a.current.stop(),a.current.clear()}catch{}const R=new Z2e("barcode-scanner-container");a.current=R;const U={fps:10,qrbox:{width:280,height:150},aspectRatio:1.5,disableFlip:!1};await R.start({facingMode:x},U,S,()=>{}),o(!0)}catch(R){console.error("Scanner error:",R),R.toString().includes("NotAllowedError")?d("Vui lng cp quyn camera  qut m vch"):R.toString().includes("NotFoundError")?d("Khng tm thy camera trn thit b"):d("Khng th khi ng camera: "+(R.message||R)),o(!1)}},A=async()=>{if(a.current){try{a.current.getState()===Es.SCANNING&&await a.current.stop(),a.current.clear()}catch{}a.current=null}o(!1)},P=async()=>{var R,U,L;try{const Q=(U=(R=a.current)==null?void 0:R.getRunningTrackCameraCapabilities)==null?void 0:U.call(R);(L=Q==null?void 0:Q.torchFeature)!=null&&L.isSupported()&&(await Q.torchFeature.apply(!c),u(!c))}catch{console.log("Torch not supported")}},q=()=>{b(R=>R==="environment"?"user":"environment")},W=()=>{A(),t()};return e?s.jsxs("div",{className:"fixed inset-0 bg-black/90 flex flex-col z-[200]",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 bg-black/50",children:[s.jsxs("h2",{className:"text-white font-semibold flex items-center gap-2",children:[s.jsx(BJ,{className:"w-5 h-5"}),n]}),s.jsx("button",{onClick:W,className:"p-2 rounded-full bg-white/20 text-white hover:bg-white/30",children:s.jsx(ic,{className:"w-5 h-5"})})]}),s.jsx("div",{className:"flex-1 flex flex-col items-center justify-center p-4",children:l?s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-red-400 mb-4 px-4",children:l}),s.jsx("button",{onClick:O,className:"px-6 py-3 bg-blue-600 text-white rounded-lg font-medium",children:"Th li"})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"relative w-full max-w-sm",children:[s.jsx("div",{id:"barcode-scanner-container",className:"w-full rounded-xl overflow-hidden bg-black",style:{minHeight:300}}),i&&s.jsx("div",{className:"absolute inset-0 pointer-events-none flex items-center justify-center",children:s.jsxs("div",{className:"w-[280px] h-[150px] relative",children:[s.jsx("div",{className:"absolute top-0 left-0 w-8 h-8 border-t-4 border-l-4 border-green-400 rounded-tl"}),s.jsx("div",{className:"absolute top-0 right-0 w-8 h-8 border-t-4 border-r-4 border-green-400 rounded-tr"}),s.jsx("div",{className:"absolute bottom-0 left-0 w-8 h-8 border-b-4 border-l-4 border-green-400 rounded-bl"}),s.jsx("div",{className:"absolute bottom-0 right-0 w-8 h-8 border-b-4 border-r-4 border-green-400 rounded-br"}),s.jsx("div",{className:"absolute inset-x-0 h-0.5 bg-green-400 animate-scan"})]})})]}),g&&s.jsx("div",{className:"mt-4 px-4 py-2 bg-green-600/20 border border-green-500 rounded-lg",children:s.jsxs("p",{className:"text-green-400 text-sm text-center font-mono",children:["  qut: ",g]})}),s.jsx("p",{className:"text-white/70 text-sm mt-4 text-center px-4",children:"a m vch vo khung hnh  qut"})]})}),i&&s.jsxs("div",{className:"flex items-center justify-center gap-6 p-6 bg-black/50",children:[s.jsx("button",{onClick:P,className:`p-4 rounded-full ${c?"bg-yellow-500 text-black":"bg-white/20 text-white"}`,title:"n flash",children:c?s.jsx(JJ,{className:"w-6 h-6"}):s.jsx(ZJ,{className:"w-6 h-6"})}),s.jsx("button",{onClick:q,className:"p-4 rounded-full bg-white/20 text-white",title:"i camera",children:s.jsx(pee,{className:"w-6 h-6"})})]}),s.jsx("style",{children:`
        @keyframes scan {
          0%, 100% { top: 0; }
          50% { top: calc(100% - 2px); }
        }
        .animate-scan {
          animation: scan 2s ease-in-out infinite;
        }
      `})]}):null},Z2=5,J2e=({isOpen:e,onClose:t,sale:r,onPrint:n})=>{if(!e||!r)return null;const a=r.items.reduce((o,l)=>o+l.quantity*l.sellingPrice,0),i=a-r.total;return s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[60] p-4",children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg w-full max-w-2xl max-h-[90vh] overflow-hidden flex flex-col",children:[s.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-slate-200 dark:border-slate-700",children:[s.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:"Chi tit n hng"}),s.jsx("button",{onClick:t,className:"text-slate-500 hover:text-slate-700 dark:hover:text-slate-300 text-2xl",children:""})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-500 dark:text-slate-400",children:"M n hng"}),s.jsx("div",{className:"text-base font-semibold text-slate-900 dark:text-slate-100",children:r.sale_code||Z1(r.id)||r.id})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Ngy to"}),s.jsxs("div",{className:"text-base font-semibold text-slate-900 dark:text-slate-100",children:[Fn(new Date(r.date),!1)," ",new Date(r.date).toLocaleTimeString("vi-VN",{hour:"2-digit",minute:"2-digit"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Khch hng"}),s.jsx("div",{className:"text-base font-semibold text-slate-900 dark:text-slate-100",children:r.customer.name}),r.customer.phone&&s.jsx("div",{className:"text-sm text-slate-500",children:r.customer.phone})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Nhn vin bn hng"}),s.jsx("div",{className:"text-base font-semibold text-slate-900 dark:text-slate-100",children:r.username||r.userName||"N/A"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Phng thc thanh ton"}),s.jsx("div",{className:"text-base font-semibold text-slate-900 dark:text-slate-100",children:r.paymentMethod==="cash"?"Tin mt":"Chuyn khon"})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-3",children:"Sn phm"}),s.jsx("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg overflow-hidden",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:s.jsxs("tr",{children:[s.jsx("th",{className:"text-left px-4 py-3 text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Tn sn phm"}),s.jsx("th",{className:"text-right px-4 py-3 text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"SL"}),s.jsx("th",{className:"text-right px-4 py-3 text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"n gi"}),s.jsx("th",{className:"text-right px-4 py-3 text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Thnh tin"})]})}),s.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:r.items.map((o,l)=>s.jsxs("tr",{children:[s.jsxs("td",{className:"px-4 py-3 text-sm text-slate-900 dark:text-slate-100",children:[o.partName,o.sku&&s.jsxs("div",{className:"text-xs text-slate-500",children:["SKU: ",o.sku]})]}),s.jsx("td",{className:"px-4 py-3 text-sm text-right text-slate-900 dark:text-slate-100",children:o.quantity}),s.jsx("td",{className:"px-4 py-3 text-sm text-right text-slate-900 dark:text-slate-100",children:Te(o.sellingPrice)}),s.jsx("td",{className:"px-4 py-3 text-sm text-right font-semibold text-slate-900 dark:text-slate-100",children:Te(o.quantity*o.sellingPrice)})]},l))})]})})]}),s.jsx("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-4",children:s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Tm tnh:"}),s.jsx("span",{className:"font-semibold text-slate-900 dark:text-slate-100",children:Te(a)})]}),i>0&&s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Gim gi:"}),s.jsxs("span",{className:"font-semibold text-red-600 dark:text-red-400",children:["-",Te(i)]})]}),s.jsxs("div",{className:"flex justify-between text-lg font-bold border-t border-slate-200 dark:border-slate-700 pt-2",children:[s.jsx("span",{className:"text-slate-900 dark:text-slate-100",children:"Tng cng:"}),s.jsx("span",{className:"text-green-600 dark:text-green-400",children:Te(r.total)})]})]})})]}),s.jsxs("div",{className:"flex justify-end gap-3 p-6 border-t border-slate-200 dark:border-slate-700",children:[s.jsx("button",{onClick:t,className:"px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-700 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:"ng"}),s.jsxs("button",{onClick:()=>{n(r),t()},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})}),"In ha n"]})]})]})})},eye=({isOpen:e,onClose:t,sale:r,onSave:n})=>{const{customers:a,upsertCustomer:i}=Ua(),{data:o=[]}=lh(),l=Un(),{profile:d}=qc(),[c,u]=T.useState([]),[x,b]=T.useState({id:"",name:"",phone:""}),[g,k]=T.useState("cash"),[y,N]=T.useState(0),[S,O]=T.useState(""),[A,P]=T.useState(!1),[q,W]=T.useState(!1),[R,U]=T.useState(""),[L,Q]=T.useState(""),[H,G]=T.useState(""),[Z,te]=T.useState(!1);if(T.useEffect(()=>{r&&(u([...r.items]),b({id:r.customer.id||"",name:r.customer.name,phone:r.customer.phone||""}),G(r.customer.name),k(r.paymentMethod),N(r.discount||0))},[r]),!e||!r)return null;const se=c.reduce((Y,_e)=>Y+_e.quantity*_e.sellingPrice,0),ue=se-y,ae=o.filter(Y=>Y.name.toLowerCase().includes(S.toLowerCase())||Y.sku.toLowerCase().includes(S.toLowerCase())),pe=a.filter(Y=>Y.name.toLowerCase().includes(H.toLowerCase())),ve=Y=>{const _e=typeof Y.stock=="object"?Y.stock[r.branchId]||0:Y.stock,me=typeof Y.retailPrice=="object"?Y.retailPrice[r.branchId]||0:Y.retailPrice||0,ne=c.find(je=>je.partId===Y.id);u(ne?c.map(je=>je.partId===Y.id?{...je,quantity:je.quantity+1}:je):[...c,{partId:Y.id,partName:Y.name,sku:Y.sku,quantity:1,sellingPrice:me,stockSnapshot:typeof _e=="number"?_e:0}]),O(""),P(!1)},Pe=Y=>{b({id:Y.id,name:Y.name,phone:Y.phone||""}),G(Y.name),te(!1)},xe=async()=>{if(!R.trim()){Ze.error("Vui lng nhp tn khch hng");return}try{const Y={id:crypto.randomUUID(),name:R,phone:L||void 0,email:"",created_at:new Date().toISOString()};await i(Y),b({id:Y.id,name:Y.name,phone:Y.phone||""}),G(Y.name),W(!1),U(""),Q(""),Ze.success("Thm khch hng thnh cng")}catch(Y){console.error("Error adding customer:",Y),Ze.error("Li khi thm khch hng")}},B=(Y,_e)=>{_e<=0?u(c.filter(me=>me.partId!==Y)):u(c.map(me=>me.partId===Y?{...me,quantity:_e}:me))},re=(Y,_e)=>{u(c.map(me=>me.partId===Y?{...me,sellingPrice:_e}:me))},J=Y=>{u(c.filter(_e=>_e.partId!==Y))},ie=async()=>{if(c.length===0){Ze.error("Vui lng c t nht mt sn phm");return}if(!x.name){Ze.error("Vui lng nhp tn khch hng");return}try{await n({id:r.id,items:c,customer:x,paymentMethod:g,discount:y}),l.invalidateQueries({queryKey:["salesRepoPaged"]}),t()}catch(Y){console.error("Error saving sale:",Y)}};return s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[60] p-4",children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg w-full max-w-2xl max-h-[95vh] overflow-hidden flex flex-col",children:[s.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-slate-200 dark:border-slate-700",children:[s.jsxs("h2",{className:"text-lg font-bold text-slate-900 dark:text-slate-100",children:[" [Chnh sa] n Xut Bn ",r.sale_code||Z1(r.id)]}),s.jsx("button",{onClick:t,className:"text-slate-500 hover:text-slate-700 dark:hover:text-slate-300 text-2xl leading-none",children:""})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Thi gian bn hng:"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"text",value:Fn(new Date(r.date),!1),disabled:!0,className:"flex-1 px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-slate-50 dark:bg-slate-700 text-slate-900 dark:text-slate-100"}),s.jsx("input",{type:"text",value:new Date(r.date).toLocaleTimeString("vi-VN",{hour:"2-digit",minute:"2-digit"}),disabled:!0,className:"w-24 px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-slate-50 dark:bg-slate-700 text-slate-900 dark:text-slate-100 text-center"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Khch hng: "}),q?s.jsxs("div",{className:"border border-slate-300 dark:border-slate-600 rounded-lg p-3 space-y-2",children:[s.jsx("input",{type:"text",value:R,onChange:Y=>U(Y.target.value),placeholder:"Tn khch hng",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"}),s.jsx("input",{type:"tel",value:L,onChange:Y=>Q(Y.target.value),placeholder:"S in thoi (ty chn)",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:xe,className:"flex-1 px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Lu"}),s.jsx("button",{onClick:()=>{W(!1),U(""),Q("")},className:"px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-700 dark:text-slate-300",children:"Hy"})]})]}):s.jsx(s.Fragment,{children:s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx("input",{type:"text",value:H,onChange:Y=>{G(Y.target.value),te(!0)},onFocus:()=>te(!0),placeholder:"Tm kim v chn mt khch hng",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"}),Z&&pe.length>0&&s.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg shadow-lg max-h-48 overflow-y-auto z-10",children:pe.slice(0,10).map(Y=>s.jsxs("button",{onClick:()=>Pe(Y),className:"w-full px-3 py-2 text-left hover:bg-slate-100 dark:hover:bg-slate-600 text-sm",children:[s.jsx("div",{className:"font-medium text-slate-900 dark:text-slate-100",children:Y.name}),Y.phone&&s.jsx("div",{className:"text-xs text-slate-500",children:Y.phone})]},Y.id))})]}),s.jsxs("button",{onClick:()=>W(!0),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2",children:[s.jsx(Mc,{className:"w-4 h-4"}),"Thm mi"]})]})})]}),s.jsxs("div",{children:[s.jsx("div",{className:"flex items-center justify-between mb-2",children:s.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Chi tit sn phm:"})}),s.jsxs("div",{className:"relative mb-3",children:[s.jsx("input",{type:"text",value:S,onChange:Y=>{O(Y.target.value),P(!0)},onFocus:()=>P(!0),placeholder:"Tm kim v thm sn phm...",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"}),A&&S&&ae.length>0&&s.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg shadow-lg max-h-60 overflow-y-auto z-10",children:ae.slice(0,10).map(Y=>s.jsxs("button",{onClick:()=>ve(Y),className:"w-full px-3 py-2 text-left hover:bg-slate-100 dark:hover:bg-slate-600 text-sm",children:[s.jsx("div",{className:"font-medium text-slate-900 dark:text-slate-100",children:Y.name}),s.jsxs("div",{className:"text-xs text-slate-500",children:["SKU: ",Y.sku]})]},Y.id))})]}),s.jsx("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg overflow-hidden",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:s.jsxs("tr",{children:[s.jsx("th",{className:"text-center px-2 py-2 text-xs font-medium text-slate-500 dark:text-slate-400 w-8",children:"-"}),s.jsx("th",{className:"text-left px-3 py-2 text-xs font-medium text-slate-500 dark:text-slate-400",children:"Tn"}),s.jsx("th",{className:"text-center px-3 py-2 text-xs font-medium text-slate-500 dark:text-slate-400 w-20",children:"SL"}),s.jsx("th",{className:"text-right px-3 py-2 text-xs font-medium text-slate-500 dark:text-slate-400 w-24",children:"n gi"}),s.jsx("th",{className:"text-right px-3 py-2 text-xs font-medium text-slate-500 dark:text-slate-400 w-28",children:"Thnh tin"}),s.jsx("th",{className:"w-10"})]})}),s.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:c.map((Y,_e)=>s.jsxs("tr",{children:[s.jsx("td",{className:"px-2 py-2 text-center text-sm text-slate-900 dark:text-slate-100",children:_e+1}),s.jsxs("td",{className:"px-3 py-2 text-sm",children:[s.jsx("div",{className:"font-medium text-slate-900 dark:text-slate-100",children:Y.partName}),s.jsx("div",{className:"text-xs text-slate-500",children:Y.sku})]}),s.jsx("td",{className:"px-3 py-2",children:s.jsx("input",{type:"number",value:Y.quantity,onChange:me=>B(Y.partId,parseInt(me.target.value)||0),min:"1",className:"w-full px-2 py-1 border border-slate-300 dark:border-slate-600 rounded text-center text-sm bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})}),s.jsx("td",{className:"px-3 py-2",children:s.jsx("input",{type:"number",value:Y.sellingPrice,onChange:me=>re(Y.partId,parseFloat(me.target.value)||0),min:"0",step:"1000",className:"w-full px-2 py-1 border border-slate-300 dark:border-slate-600 rounded text-right text-sm bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})}),s.jsx("td",{className:"px-3 py-2 text-right text-sm font-semibold text-slate-900 dark:text-slate-100",children:Te(Y.quantity*Y.sellingPrice)}),s.jsx("td",{className:"px-2 py-2 text-center",children:s.jsx("button",{onClick:()=>J(Y.partId),className:"text-slate-400 hover:text-red-600 transition-colors",children:s.jsx(Ap,{className:"w-5 h-5"})})})]},Y.partId))})]})}),c.length===0&&s.jsx("div",{className:"text-center py-8 text-slate-400 text-sm",children:"Cha c sn phm no"}),c.length>0&&s.jsxs("div",{className:"mt-2 text-right",children:[s.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:"TNG:"}),s.jsx("div",{className:"text-lg font-bold text-slate-900 dark:text-slate-100",children:Te(se)})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Chn nhn vin bn hng"}),s.jsx("select",{disabled:!0,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-slate-50 dark:bg-slate-700 text-slate-900 dark:text-slate-100",children:s.jsx("option",{children:r.username||r.userName})})]}),s.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-4",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Cng n:"}),s.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 mb-3",children:"Khch hng phi thanh ton"}),s.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-3 mb-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm font-medium text-green-700 dark:text-green-400",children:"TNG PHI THU:"}),s.jsx("span",{className:"text-lg font-bold text-green-700 dark:text-green-400",children:Te(ue)})]}),s.jsxs("div",{className:"mt-2 flex items-center gap-2 text-xs text-green-600 dark:text-green-400",children:[s.jsx("input",{type:"checkbox",checked:!0,readOnly:!0}),s.jsx("span",{children:" thanh ton "})]})]}),s.jsxs("div",{className:"mb-3",children:[s.jsx("label",{className:"block text-xs text-slate-500 dark:text-slate-400 mb-2",children:"- Thi gian Ngi thu - Ghi ch"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>k("cash"),className:`flex-1 py-2 rounded-lg border transition-colors text-sm font-medium ${g==="cash"?"bg-green-600 text-white border-green-600":"border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:"Tin mt"}),s.jsx("button",{onClick:()=>k("bank"),className:`flex-1 py-2 rounded-lg border transition-colors text-sm font-medium ${g==="bank"?"bg-blue-600 text-white border-blue-600":"border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:"Chuyn khon"})]})]}),s.jsx("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg overflow-hidden",children:s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:s.jsxs("tr",{children:[s.jsx("th",{className:"text-center px-2 py-2 text-xs font-medium text-slate-500 dark:text-slate-400",children:"-"}),s.jsx("th",{className:"text-left px-3 py-2 text-xs font-medium text-slate-500 dark:text-slate-400",children:"Thi gian"}),s.jsx("th",{className:"text-left px-3 py-2 text-xs font-medium text-slate-500 dark:text-slate-400",children:"Ngi thu - Ghi ch"}),s.jsx("th",{className:"text-right px-3 py-2 text-xs font-medium text-slate-500 dark:text-slate-400",children:"S tin"}),s.jsx("th",{className:"w-10"})]})}),s.jsx("tbody",{className:"bg-white dark:bg-slate-800",children:s.jsxs("tr",{children:[s.jsx("td",{className:"px-2 py-2 text-center text-slate-900 dark:text-slate-100",children:"1"}),s.jsxs("td",{className:"px-3 py-2",children:[s.jsxs("div",{className:"text-slate-900 dark:text-slate-100",children:[new Date(r.date).toLocaleTimeString("vi-VN",{hour:"2-digit",minute:"2-digit"})," ",Fn(new Date(r.date),!1)]}),s.jsx("div",{className:"text-xs text-slate-500",children:"(Tin mt)"})]}),s.jsx("td",{className:"px-3 py-2 text-slate-900 dark:text-slate-100",children:r.username||r.userName}),s.jsx("td",{className:"px-3 py-2 text-right text-slate-900 dark:text-slate-100",children:Te(ue)}),s.jsx("td",{})]})})]})}),s.jsxs("div",{className:"mt-2 text-right",children:[s.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Tng  thu"}),s.jsx("div",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:Te(ue)})]})]})]}),s.jsxs("div",{className:"flex items-center justify-end gap-3 p-4 border-t border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-700",children:[s.jsx("button",{onClick:t,className:"px-6 py-2 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-600 transition-colors font-medium",children:"NG"}),s.jsx("button",{onClick:ie,disabled:c.length===0,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed font-semibold",children:"LU"})]})]})})},tye=({isOpen:e,onClose:t,sales:r,currentBranchId:n,onPrintReceipt:a,onEditSale:i,onDeleteSale:o,page:l,totalPages:d,total:c,hasMore:u,pageSize:x,onPrevPage:b,onNextPage:g,onPageSizeChange:k,search:y,onSearchChange:N,fromDate:S,toDate:O,onDateRangeChange:A,status:P="all",onStatusChange:q,paymentMethodFilter:W="all",onPaymentMethodFilterChange:R,keysetMode:U=!1,onToggleKeyset:L,customerDebts:Q=[]})=>{const[H,G]=T.useState("7days"),[Z,te]=T.useState(""),[se,ue]=T.useState(""),[ae,pe]=T.useState(""),[ve,Pe]=T.useState(null),[xe,B]=T.useState(!1),[re,J]=T.useState(!1),[ie,Y]=T.useState(null);T.useEffect(()=>{const ne=new Date,je=new Date(ne.getFullYear(),ne.getMonth(),ne.getDate()),De=new Date(ne.getFullYear(),ne.getMonth(),ne.getDate(),23,59,59,999);let ce,Ee;switch(H){case"today":ce=je,Ee=De;break;case"week":{const be=ne.getDay(),ge=be===0?-6:1-be,Qe=new Date(ne);Qe.setDate(ne.getDate()+ge),ce=new Date(Qe.getFullYear(),Qe.getMonth(),Qe.getDate()),Ee=De;break}case"month":{ce=new Date(ne.getFullYear(),ne.getMonth(),1),Ee=De;break}case"7days":{const be=new Date(ne);be.setDate(be.getDate()-6),ce=new Date(be.getFullYear(),be.getMonth(),be.getDate()),Ee=De;break}case"30days":{const be=new Date(ne);be.setDate(be.getDate()-29),ce=new Date(be.getFullYear(),be.getMonth(),be.getDate()),Ee=De;break}case"custom":{se&&ae&&(ce=new Date(se),Ee=new Date(ae+"T23:59:59"));break}case"all":ce=void 0,Ee=void 0;break}A(ce?ce.toISOString():void 0,Ee?Ee.toISOString():void 0)},[H,se,ae,A]);const _e=T.useMemo(()=>{let ne=r.filter(je=>je.branchId===n||je.branchid===n);return Z&&(ne=ne.filter(je=>je.id.toLowerCase().includes(Z.toLowerCase())||(je.sale_code||"").toLowerCase().includes(Z.toLowerCase())||je.customer.name.toLowerCase().includes(Z.toLowerCase())||(je.username||je.userName||"").toLowerCase().includes(Z.toLowerCase()))),ne.sort((je,De)=>new Date(De.date).getTime()-new Date(je.date).getTime()),ne},[r,n,Z]),me=T.useMemo(()=>_e.reduce((ne,je)=>ne+je.total,0),[_e]);return T.useEffect(()=>{const ne=je=>{je.target.closest(".dropdown-menu-container")||Y(null)};if(ie)return document.addEventListener("mousedown",ne),()=>document.removeEventListener("mousedown",ne)},[ie]),e?s.jsxs(ma.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex md:items-center md:justify-center items-end justify-center p-0 md:p-4",children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 w-full md:max-w-7xl max-h-[95vh] md:rounded-2xl rounded-t-3xl shadow-2xl overflow-hidden flex flex-col animate-slide-up-bottom",children:[s.jsxs("div",{className:"p-4 border-b border-slate-200 dark:border-slate-700 bg-white/95 dark:bg-slate-900/70 backdrop-blur",children:[s.jsxs("div",{className:"flex items-start justify-between gap-3 mb-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-400 dark:text-slate-500",children:"Lch s bn hng"}),s.jsx("p",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:"Theo di giao dch gn y"})]}),s.jsx("button",{onClick:t,className:"text-slate-500 hover:text-slate-900 dark:hover:text-white text-2xl leading-none px-2","aria-label":"ng lch s bn hng",children:""})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"flex gap-2 overflow-x-auto pb-1 -mx-4 px-4 md:mx-0 md:px-0 scrollbar-thin",children:[{key:"7days",label:"7 ngy qua"},{key:"week",label:"Tun"},{key:"month",label:"Thng"},{key:"30days",label:"30 ngy qua"},{key:"custom",label:"Ty chn"},{key:"all",label:"Tt c"}].map(ne=>s.jsx("button",{onClick:()=>G(ne.key),className:`px-4 py-2 rounded-2xl text-sm font-medium whitespace-nowrap border transition-all min-w-[96px] ${H===ne.key?"bg-blue-600 text-white border-blue-600 shadow-lg shadow-blue-500/30":"bg-slate-100 dark:bg-slate-800/80 text-slate-700 dark:text-slate-200 border-transparent"}`,children:ne.label},ne.key))}),s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-3",children:[s.jsxs("div",{className:"w-full md:flex-1 relative",children:[s.jsx("input",{type:"text",value:Z,onChange:ne=>te(ne.target.value),placeholder:"Tm ha n, khch hng hoc m phiu",className:"w-full pl-10 pr-4 py-2.5 rounded-xl border border-slate-200 dark:border-slate-600 bg-slate-50 dark:bg-slate-800 text-sm text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500"}),s.jsxs("svg",{className:"w-5 h-5 text-slate-400 absolute left-3 top-1/2 -translate-y-1/2",fill:"none",stroke:"currentColor",strokeWidth:"1.5",viewBox:"0 0 24 24",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11 19a8 8 0 100-16 8 8 0 000 16z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-4.3-4.3"})]})]}),s.jsx("div",{className:"flex items-center justify-between md:justify-end gap-4 w-full md:w-auto",children:s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Tng doanh thu"}),s.jsx("div",{className:"text-xl font-bold text-green-600 dark:text-green-400",children:Te(me)})]})})]}),H==="custom"&&s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-3",children:[s.jsxs("label",{className:"text-sm text-slate-600 dark:text-slate-400 flex items-center gap-2",children:["T",s.jsx("input",{type:"date",value:se,onChange:ne=>ue(ne.target.value),className:"px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100 text-sm"})]}),s.jsxs("label",{className:"text-sm text-slate-600 dark:text-slate-400 flex items-center gap-2",children:["n",s.jsx("input",{type:"date",value:ae,onChange:ne=>pe(ne.target.value),className:"px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100 text-sm"})]})]})]})]}),s.jsx("div",{className:"flex-1 overflow-y-auto",children:_e.length===0?s.jsx("div",{className:"text-center py-12 text-slate-400",children:"Khng c ha n no"}):s.jsxs("div",{children:[s.jsxs("div",{className:"hidden md:grid grid-cols-12 gap-4 px-4 py-3 bg-slate-100 dark:bg-slate-700 border-b border-slate-200 dark:border-slate-600 sticky top-0 z-10",children:[s.jsx("div",{className:"col-span-1 text-xs font-semibold text-slate-600 dark:text-slate-300"}),s.jsx("div",{className:"col-span-2 text-xs font-semibold text-slate-600 dark:text-slate-300",children:"M phiu"}),s.jsx("div",{className:"col-span-2 text-xs font-semibold text-slate-600 dark:text-slate-300",children:"Khch hng"}),s.jsx("div",{className:"col-span-4 text-xs font-semibold text-slate-600 dark:text-slate-300",children:"Chi tit"}),s.jsx("div",{className:"col-span-2 text-xs font-semibold text-slate-600 dark:text-slate-300",children:"Thanh ton"}),s.jsx("div",{className:"col-span-1 text-xs font-semibold text-slate-600 dark:text-slate-300",children:"Thao tc"})]}),s.jsx("div",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:_e.map(ne=>{var zt,Ft,fr,hr,sr,Sr;const je=new Date(ne.date);ne.items.reduce((tr,Jt)=>tr+Jt.quantity*Jt.sellingPrice,0);const De=(Q||[]).find(tr=>{var Jt;return(Jt=tr.description)==null?void 0:Jt.includes(ne.sale_code||ne.id)}),ce=De?De.totalAmount-De.remainingAmount:ne.total,Ee=(De==null?void 0:De.remainingAmount)||0,be=Ee>0,Qe=ne.items.slice(0,3),Ye=ne.items.length-Qe.length,at=je.toLocaleDateString("vi-VN",{day:"2-digit",month:"2-digit",year:"numeric"}),Je=je.toLocaleTimeString("vi-VN",{hour:"2-digit",minute:"2-digit"}),ct=(((Ft=(zt=ne.customer)==null?void 0:zt.name)==null?void 0:Ft.charAt(0))||"K").toUpperCase(),Ke=ne.paymentMethod==="cash"?"Tin mt":"Chuyn khon";return s.jsxs("div",{className:"p-4 hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors",children:[s.jsxs("div",{className:"md:hidden flex flex-col gap-3 bg-white dark:bg-slate-800/60 rounded-2xl border border-slate-200 dark:border-slate-700 p-4 shadow-sm",children:[s.jsxs("div",{className:"flex items-start justify-between gap-3",children:[s.jsxs("div",{children:[ne.sale_code&&s.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-blue-600 dark:text-blue-300",children:[s.jsx(dee,{className:"w-4 h-4"}),ne.sale_code]}),s.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400 flex items-center gap-1 mt-1",children:[s.jsx(FJ,{className:"w-3.5 h-3.5"}),s.jsxs("span",{children:[at,"  ",Je]})]}),s.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400 flex items-center gap-1 mt-1",children:[s.jsx("span",{className:"font-medium text-slate-600 dark:text-slate-300",children:"NV"}),s.jsx("span",{children:ne.userName||ne.username||"N/A"})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Tng tin"}),s.jsx("div",{className:"text-lg font-bold text-slate-900 dark:text-white",children:Te(ne.total)}),s.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400 flex items-center gap-1 justify-end mt-1",children:[ne.paymentMethod==="cash"?s.jsx(C6,{className:"w-4 h-4"}):s.jsx(OB,{className:"w-4 h-4"}),s.jsx("span",{children:Ke})]})]})]}),s.jsxs("div",{className:"flex items-center gap-3 bg-slate-50 dark:bg-slate-900/30 rounded-2xl p-3",children:[s.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center text-blue-600 dark:text-blue-200 font-semibold",children:ct}),s.jsxs("div",{children:[s.jsx("div",{className:"text-base font-semibold text-slate-900 dark:text-white",children:((fr=ne.customer)==null?void 0:fr.name)||"Khch vng lai"}),((hr=ne.customer)==null?void 0:hr.phone)&&s.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400 flex items-center gap-1",children:[s.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",strokeWidth:"1.5",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2 5.5C2 4.119 3.12 3 4.5 3h1.76c.636 0 1.197.4 1.39 1.005l.8 2.47a1.5 1.5 0 01-.35 1.46L7.11 8.94a12.044 12.044 0 005.95 5.95l1.006-1.002a1.5 1.5 0 011.46-.349l2.469.8c.606.193 1.005.754 1.005 1.39V19.5c0 1.38-1.119 2.5-2.5 2.5h-.25C8.268 22 2 15.732 2 7.75v-.25z"})}),ne.customer.phone]})]})]}),s.jsxs("div",{className:"space-y-2",children:[Qe.map((tr,Jt)=>s.jsxs("div",{className:"flex items-start justify-between text-sm text-slate-700 dark:text-slate-200",children:[s.jsxs("div",{children:[s.jsxs("span",{className:"font-semibold",children:[tr.quantity," x ",tr.partName]}),s.jsxs("div",{className:"text-xs text-slate-400",children:[Te(tr.sellingPrice||0)," ","/ sn phm"]})]}),s.jsx("span",{className:"font-bold text-slate-900 dark:text-white",children:Te(tr.quantity*(tr.sellingPrice||0))})]},Jt)),Ye>0&&s.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:["+",Ye," sn phm khc"]})]}),s.jsxs("div",{className:"flex flex-wrap gap-2",children:[be?s.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-semibold bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-200",children:[" Cn n ",Te(Ee)]}):s.jsx("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-semibold bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-200",children:"  thanh ton"}),s.jsx("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-medium bg-slate-100 text-slate-700 dark:bg-slate-800 dark:text-slate-200",children:Ke})]}),s.jsxs("div",{className:"flex flex-wrap gap-2 pt-3 border-t border-dashed border-slate-200 dark:border-slate-700",children:[s.jsx("button",{onClick:()=>a(ne),className:"flex-1 min-w-[120px] px-3 py-2 rounded-xl bg-slate-100 dark:bg-slate-800 text-slate-700 dark:text-slate-200 text-sm font-medium",children:"In ho n"}),s.jsx("button",{onClick:()=>{Pe(ne),B(!0)},className:"flex-1 min-w-[120px] px-3 py-2 rounded-xl bg-slate-100 dark:bg-slate-800 text-slate-700 dark:text-slate-200 text-sm font-medium",children:"Xem chi tit"}),s.jsx("button",{onClick:()=>{Pe(ne),J(!0)},className:"flex-1 min-w-[120px] px-3 py-2 rounded-xl bg-slate-100 dark:bg-slate-800 text-slate-700 dark:text-slate-200 text-sm font-medium",children:"Chnh sa"}),s.jsx("button",{onClick:()=>o(ne.id),className:"flex-1 min-w-[120px] px-3 py-2 rounded-xl bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-300 text-sm font-medium",children:"Xa n"})]})]}),s.jsxs("div",{className:"hidden md:grid grid-cols-12 gap-4 items-start",children:[s.jsx("div",{className:"col-span-1 flex items-start pt-1",children:s.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded border-slate-300"})}),s.jsx("div",{className:"col-span-2",children:s.jsxs("div",{className:"space-y-1",children:[ne.sale_code&&s.jsx("div",{className:"text-sm font-bold text-blue-600 dark:text-blue-400",children:ne.sale_code}),s.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:[je.getDate(),"/",je.getMonth()+1,"/",je.getFullYear()," ",String(je.getHours()).padStart(2,"0"),":",String(je.getMinutes()).padStart(2,"0")]}),s.jsxs("div",{className:"text-xs text-slate-600 dark:text-slate-300",children:[s.jsx("span",{className:"font-medium",children:"NV:"})," ",ne.userName||ne.username||"N/A"]})]})}),s.jsx("div",{className:"col-span-2",children:s.jsxs("div",{className:"space-y-1",children:[s.jsx("div",{className:"text-sm font-semibold text-slate-900 dark:text-slate-100",children:((sr=ne.customer)==null?void 0:sr.name)||"Khch vng lai"}),((Sr=ne.customer)==null?void 0:Sr.phone)&&s.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:[" ",ne.customer.phone]})]})}),s.jsx("div",{className:"col-span-4",children:s.jsx("div",{className:"space-y-1",children:ne.items.map((tr,Jt)=>s.jsxs("div",{className:"text-xs text-slate-700 dark:text-slate-300",children:[s.jsxs("span",{className:"font-medium",children:[tr.quantity," x"]})," ",tr.partName,s.jsxs("span",{className:"text-slate-400 ml-1",children:["(",Te(tr.sellingPrice||0),")"]})," = ",s.jsx("span",{className:"font-semibold text-slate-900 dark:text-slate-100",children:Te(tr.quantity*(tr.sellingPrice||0))})]},Jt))})}),s.jsx("div",{className:"col-span-2",children:s.jsxs("div",{className:"space-y-1",children:[s.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:"Tng tin:"}),s.jsx("div",{className:"text-base font-bold text-slate-900 dark:text-slate-100",children:Te(ne.total)}),be?s.jsxs("div",{className:"mt-2 space-y-1",children:[s.jsxs("div",{className:"text-xs text-green-600 dark:text-green-400",children:[" tr: ",Te(ce)]}),s.jsxs("div",{className:"text-xs font-semibold text-red-600 dark:text-red-400",children:["Cn n: ",Te(Ee)]}),s.jsx("div",{className:"inline-flex items-center gap-1 px-2 py-1 rounded text-xs font-medium bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-300",children:" Cn n"})]}):s.jsx("div",{className:"mt-2",children:s.jsx("div",{className:"inline-flex items-center gap-1 px-2 py-1 rounded text-xs font-medium bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-300",children:"  thanh ton"})}),s.jsx("div",{className:"text-xs text-slate-500 mt-1",children:ne.paymentMethod==="cash"?" Tin mt":" Chuyn khon"})]})}),s.jsxs("div",{className:"col-span-1 flex items-start justify-end gap-2 pt-1",children:[s.jsx("button",{onClick:()=>{Pe(ne),J(!0)},className:"p-1.5 text-slate-400 hover:text-amber-600 dark:hover:text-amber-400 transition-colors",title:"Chnh sa",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),s.jsxs("div",{className:"relative dropdown-menu-container",children:[s.jsx("button",{onClick:()=>Y(ie===ne.id?null:ne.id),className:"p-1.5 text-slate-400 hover:text-slate-600 dark:hover:text-slate-300 transition-colors",title:"Ty chn",children:s.jsxs("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:[s.jsx("circle",{cx:"12",cy:"5",r:"2"}),s.jsx("circle",{cx:"12",cy:"12",r:"2"}),s.jsx("circle",{cx:"12",cy:"19",r:"2"})]})}),ie===ne.id&&s.jsxs("div",{className:"absolute right-0 mt-1 w-48 bg-white dark:bg-slate-800 rounded-lg shadow-lg border border-slate-200 dark:border-slate-700 z-50",children:[s.jsxs("button",{onClick:()=>{a(ne),Y(null)},className:"w-full text-left px-4 py-2 text-sm text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700 flex items-center gap-2 rounded-t-lg",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})}),"In li ha n"]}),s.jsxs("button",{onClick:()=>{Pe(ne),B(!0),Y(null)},className:"w-full text-left px-4 py-2 text-sm text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700 flex items-center gap-2",children:[s.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),"Xem chi tit"]}),s.jsxs("button",{onClick:()=>{o&&o(ne.id),Y(null)},className:"w-full text-left px-4 py-2 text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 flex items-center gap-2 rounded-b-lg",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Xa ha n"]})]})]})]})]})]},ne.id)})})]})}),s.jsx("div",{className:"p-4 border-t border-slate-200 dark:border-slate-700 flex items-center justify-between",children:s.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:["Hin th ",_e.length," n hng"]})})]})}),s.jsx(J2e,{isOpen:xe,onClose:()=>{B(!1),Pe(null)},sale:ve,onPrint:a}),s.jsx(eye,{isOpen:re,onClose:()=>{J(!1),Pe(null)},sale:ve,onSave:async ne=>{try{const{supabase:je}=await km(async()=>{const{supabase:ge}=await Promise.resolve().then(()=>Ure);return{supabase:ge}},[]),{profile:De}=await km(async()=>{const{profile:ge}=await Promise.resolve().then(()=>jne);return{profile:ge}},void 0).then(ge=>({profile:null})),Ee=ne.items.reduce((ge,Qe)=>ge+Qe.quantity*Qe.sellingPrice,0)-ne.discount,{error:be}=await je.from("sales").update({items:ne.items,customer:ne.customer,paymentmethod:ne.paymentMethod,discount:ne.discount,total:Ee}).eq("id",ne.id);if(be)throw be;await Ws(null,{action:"sale_update",tableName:"sales",recordId:ne.id,newData:{items:ne.items,customer:ne.customer,paymentMethod:ne.paymentMethod,discount:ne.discount,total:Ee}}),Ze.success(" cp nht n hng thnh cng"),J(!1),Pe(null)}catch(je){console.error("Error updating sale:",je),Ze.error("Li khi cp nht n hng: "+je.message)}}})]}):null},rye=()=>{const{upsertCustomer:e,cartItems:t,setCartItems:r,clearCart:n,deleteSale:a,currentBranchId:i,finalizeSale:o,setCashTransactions:l,setPaymentSources:d}=Ua(),c=Un(),{data:u=[],isLoading:x}=H6(),b=PU(),{data:g=[],isLoading:k,error:y}=lh(),{data:N=[]}=WA(),[S,O]=T.useState(1),[A,P]=T.useState(20),[q,W]=T.useState(""),[R,U]=T.useState(""),[L,Q]=T.useState(),[H,G]=T.useState(),[Z,te]=T.useState("all"),[se,ue]=T.useState("all"),[ae,pe]=T.useState(!1),[ve,Pe]=T.useState(null),xe={branchId:i,page:ae?void 0:S,pageSize:A,search:R||void 0,fromDate:L,toDate:H,mode:ae?"keyset":"offset",afterDate:ae?ve==null?void 0:ve.afterDate:void 0,afterId:ae?ve==null?void 0:ve.afterId:void 0,status:Z==="all"?void 0:Z==="cancelled"?"refunded":Z==="completed"?"completed":Z,paymentMethod:se==="all"?void 0:se},{data:B,isLoading:re,error:J}=Dne(xe),ie=(B==null?void 0:B.data)||[],Y=(B==null?void 0:B.meta)||{page:1,totalPages:1,total:ie.length,hasMore:!1};T.useEffect(()=>{var fe;ae&&((fe=B==null?void 0:B.meta)==null?void 0:fe.mode)==="keyset"&&Pe({afterDate:B.meta.nextAfterDate,afterId:B.meta.nextAfterId})},[ae,B]);const{mutateAsync:_e}=Mne(),me=M5(),ne=T.useCallback(()=>O(fe=>Math.max(1,fe-1)),[]),je=T.useCallback(()=>O(fe=>fe+1),[]),De=T.useCallback(fe=>{P(fe),O(1),ae&&Pe(null)},[]);T.useEffect(()=>{const fe=setTimeout(()=>{U(q),O(1)},300);return()=>clearTimeout(fe)},[q]);const[ce,Ee]=T.useState(""),[be,ge]=T.useState("all"),[Qe,Ye]=T.useState(""),[at,Je]=T.useState(!1),[ct,Ke]=T.useState(!1),zt=T.useRef(null),[Ft,fr]=T.useState(""),[hr,sr]=T.useState("products"),[Sr,tr]=T.useState(null),[Jt,Kt]=T.useState(!1),[ar,vr]=T.useState(0),[rr,ft]=T.useState("amount"),[br,yr]=T.useState(0),[gr,ot]=T.useState(!1),[Lt,ir]=T.useState(!1),[Mt,Ge]=T.useState({name:"",phone:"",vehicleModel:"",licensePlate:""}),[At,ur]=T.useState(""),[Dr,jr]=T.useState(""),[Xt,Wr]=T.useState(""),[cr,pr]=T.useState([]),[Rr,Ir]=T.useState(0),[Nn,Mr]=T.useState(null),[Gr,Ne]=T.useState(null),[Me,Re]=T.useState(0),[Ce,Ue]=T.useState(!1);T.useEffect(()=>{var fe;at&&((fe=zt.current)==null||fe.focus())},[at]);const[de,qe]=T.useState(!1),[et,tt]=T.useState(null),[Ae,Xe]=T.useState(null);T.useEffect(()=>{(async()=>{try{const{data:vt,error:wr}=await It.from("store_settings").select("store_name, address, phone, email, logo_url, bank_qr_url, bank_name, bank_account_number, bank_account_holder, bank_branch").order("created_at",{ascending:!1}).limit(1).single();if(wr){console.error("Error fetching store settings:",wr);return}Xe(vt)}catch(vt){console.error("Failed to fetch store settings:",vt)}})()},[]);const mt=T.useCallback(fe=>{var nn,zn;const vt=((nn=fe.retailPrice)==null?void 0:nn[i])??0,wr=((zn=fe.stock)==null?void 0:zn[i])??0,Or=t.find(Vn=>Vn.partId===fe.id);if(Or){const Vn=Or.quantity+1;if(Vn>wr){Ze.error(`Khng  hng! Tn kho: ${wr}`);return}r(Tr=>Tr.map(_n=>_n.partId===fe.id?{..._n,quantity:Vn}:_n))}else{if(wr<1){Ze.error("Sn phm  ht hng!");return}const Vn={partId:fe.id,partName:fe.name,sku:fe.sku,quantity:1,sellingPrice:vt,stockSnapshot:wr,discount:0};r(Tr=>[...Tr,Vn])}},[t,r,i]),Tt=T.useCallback(fe=>{r(vt=>vt.filter(wr=>wr.partId!==fe))},[r]),Rt=T.useCallback((fe,vt)=>{if(vt<=0){Tt(fe);return}const wr=t.find(Or=>Or.partId===fe);if(wr&&vt>wr.stockSnapshot){Ze.error(`Khng  hng! Tn kho: ${wr.stockSnapshot}`);return}r(Or=>Or.map(nn=>nn.partId===fe?{...nn,quantity:vt}:nn))},[t,r,Tt]),Yt=T.useMemo(()=>t.reduce((fe,vt)=>fe+vt.sellingPrice*vt.quantity,0),[t]),or=T.useMemo(()=>Math.max(0,Yt-ar),[Yt,ar]),Cr=T.useMemo(()=>{const fe=new Map;return t.forEach(vt=>fe.set(vt.partId,vt)),fe},[t]),Et=T.useMemo(()=>cr.reduce((fe,vt)=>fe+vt.sellingPrice*vt.quantity,0),[cr]),dn=T.useMemo(()=>Math.max(0,Et-Rr),[Et,Rr]),Zr=T.useMemo(()=>cr.reduce((fe,vt)=>fe+vt.quantity,0),[cr]),ia=T.useMemo(()=>{if(k||y)return[];let fe=g;return ce&&(fe=fe.filter(vt=>vt.name.toLowerCase().includes(ce.toLowerCase())||vt.sku.toLowerCase().includes(ce.toLowerCase()))),fe},[g,ce,k,y]),ta=T.useMemo(()=>{if(!ia.length)return[];const fe=ia.filter(wr=>{var nn;const Or=Number(((nn=wr.stock)==null?void 0:nn[i])??0);return be==="low"?Or>0&&Or<=Z2:be==="out"?Or<=0:!0}),vt=wr=>wr<=0?2:wr<=Z2?1:0;return fe.slice().sort((wr,Or)=>{var Tr,_n;const nn=Number(((Tr=wr.stock)==null?void 0:Tr[i])??0),zn=Number(((_n=Or.stock)==null?void 0:_n[i])??0),Vn=vt(nn)-vt(zn);return Vn!==0?Vn:wr.name.localeCompare(Or.name)}).slice(0,36)},[ia,be,i]),Jr=fe=>fe.toLowerCase().replace(/[-\s./\\]/g,""),Fr=fe=>{if(fe.preventDefault(),!Qe.trim())return;const vt=Qe.trim(),wr=Jr(vt),Or=ia.find(nn=>{var zn,Vn,Tr;return Jr(nn.barcode||"")===wr||((zn=nn.barcode)==null?void 0:zn.toLowerCase())===vt.toLowerCase()||Jr(nn.sku||"")===wr||((Vn=nn.sku)==null?void 0:Vn.toLowerCase())===vt.toLowerCase()||((Tr=nn.name)==null?void 0:Tr.toLowerCase().includes(vt.toLowerCase()))});Or?(mt(Or),Ze.success(` thm ${Or.name} vo gi hng`),Ye(""),setTimeout(()=>{var nn;return(nn=zt.current)==null?void 0:nn.focus()},100)):(Ze.error(`Khng tm thy sn phm c m: ${vt}`),Ye(""))},rn=fe=>{console.log(" Camera scanned:",fe);const vt=Jr(fe),wr=ia.find(Or=>{var nn,zn;return Jr(Or.barcode||"")===vt||((nn=Or.barcode)==null?void 0:nn.toLowerCase())===fe.toLowerCase()||Jr(Or.sku||"")===vt||((zn=Or.sku)==null?void 0:zn.toLowerCase())===fe.toLowerCase()});if(wr){const Or=cart.find(nn=>nn.partId===wr.id);Or?updateCartQty(wr.id,Or.quantity+1):(mt(wr),Ze.success(` thm ${wr.name}`))}else Ze.error(`Khng tm thy: ${fe}`)},{lowStockCount:ga,outOfStockCount:Rs}=h2e(g,i,Z2),ra=[{key:"all",label:"Tt c",count:ia.length,activeClass:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white border-transparent shadow-blue-500/30",inactiveClass:"bg-white/80 dark:bg-slate-900/50 text-slate-700 dark:text-slate-200 border border-slate-200 dark:border-slate-700"},{key:"low",label:"Tn thp",count:ga,activeClass:"bg-gradient-to-r from-amber-500 to-orange-500 text-white border-transparent shadow-amber-500/30",inactiveClass:"bg-white/80 dark:bg-slate-900/50 text-amber-700 dark:text-amber-200 border border-amber-200/70 dark:border-amber-800/60"},{key:"out",label:"Ht hng",count:Rs,activeClass:"bg-gradient-to-r from-rose-500 to-red-500 text-white border-transparent shadow-rose-500/30",inactiveClass:"bg-white/80 dark:bg-slate-900/50 text-rose-700 dark:text-rose-200 border border-rose-200/70 dark:border-rose-800/60"}],Gn=T.useRef(!1);T.useEffect(()=>{if(!Gn.current&&(ga>0||Rs>0)){const fe=[];Rs>0&&fe.push(`Ht hng: ${Rs}`),ga>0&&fe.push(`Tn thp: ${ga}`),Ze.info(fe.join("  ")),Gn.current=!0}},[ga,Rs]);const Gi=T.useMemo(()=>Ft?u.filter(fe=>{var vt;return fe.name.toLowerCase().includes(Ft.toLowerCase())||((vt=fe.phone)==null?void 0:vt.includes(Ft))||!1}).slice(0,10):u.slice(0,10),[u,Ft]),ml=()=>{if(!Mt.name||!Mt.phone){alert("Vui lng nhp tn v s in thoi");return}if(u.find(wr=>wr.phone===Mt.phone)){alert("S in thoi ny  tn ti!");return}const vt={id:`CUST-${Date.now()}`,name:Mt.name,phone:Mt.phone,vehicleModel:Mt.vehicleModel,licensePlate:Mt.licensePlate,status:"active",segment:"New",loyaltyPoints:0,totalSpent:0,visitCount:1,lastVisit:new Date().toISOString(),created_at:new Date().toISOString()};b.mutate(vt,{onSuccess:()=>{tr(vt),fr(vt.name),Ge({name:"",phone:"",vehicleModel:"",licensePlate:""}),ir(!1),Ze.success(" thm khch hng mi!")},onError:wr=>{console.error("Error creating customer:",wr),Ze.error("Khng th thm khch hng. Vui lng th li.")}})},ya=fe=>{tt(fe),qe(!0)},Ns=()=>{if(!et)return;ur(et.sale_code||Z1(et.id)||et.id),jr(et.customer.name),Wr(et.customer.phone||"");const fe=et.items.map(vt=>({partId:vt.partId||vt.partid||"",partName:vt.partName||vt.partname||"",sku:vt.sku||"",quantity:vt.quantity||0,sellingPrice:vt.sellingPrice||vt.sellingprice||vt.price||0,stockSnapshot:vt.stockSnapshot||0,discount:vt.discount||0}));pr(fe),Ir(et.discount||0),setTimeout(()=>{hk("last-receipt"),qe(!1),tt(null)},100)},{profile:na}=qc(),Da=async fe=>{var vt;if(!RV(na==null?void 0:na.role,"sale.delete")){Ze.error("Bn khng c quyn xa ha n");return}if(confirm("Xc nhn xa ha n ny? Hnh ng ny khng th hon tc."))try{const{deleteSaleById:wr}=await km(async()=>{const{deleteSaleById:nn}=await Promise.resolve().then(()=>Ine);return{deleteSaleById:nn}},void 0),Or=await wr(fe);if(!Or.ok){Ze.error(((vt=Or.error)==null?void 0:vt.message)||"Xa ha n tht bi!");return}c.invalidateQueries({queryKey:["sales"]}),Ze.success(" xa ha n thnh cng!"),Ws((na==null?void 0:na.id)||null,{action:"sale.delete",tableName:"sales",recordId:fe,oldData:null,newData:null})}catch(wr){Ze.error("Xa ha n tht bi!"),console.error("Delete sale error:",wr)}},Mn=fe=>{if(confirm("M li ha n ny  chnh sa? Gi hng hin ti s b xa.")){if(n(),fe.items.forEach(vt=>{const wr=g.find(Or=>Or.id===vt.partId);if(wr)for(let Or=0;Or<vt.quantity;Or++)mt(wr)}),fe.customer.id){const vt=u.find(wr=>wr.id===fe.customer.id);vt&&(tr(vt),fr(vt.name))}else jr(fe.customer.name),Wr(fe.customer.phone||"");vr(fe.discount||0),ot(!1),alert("Ha n  c ti vo gi hng  chnh sa")}},ps=async(fe,vt,wr,Or)=>{var nn;if(!(vt<=0)){console.log("[createCustomerDebtIfNeeded] CALLED with:",{saleId:fe.id,totalAmount:wr,paidAmount:Or,remainingAmount:vt,customerName:fe.customer.name,timestamp:new Date().toISOString()});try{const zn=fe.customer.id||fe.customer.phone||`CUST-ANON-${Date.now()}`,Vn=((nn=fe.customer.name)==null?void 0:nn.trim())||fe.customer.phone||"Khch l";let _n=`Bn hng - Ha n ${fe.sale_code||fe.id}`;fe.items&&fe.items.length>0&&(_n+=`

Sn phm  mua:`,fe.items.forEach(aa=>{const za=aa.quantity*aa.sellingPrice,uo=aa.discount||0;_n+=`
   ${aa.quantity} x ${aa.partName} - ${Te(za)}`,uo>0&&(_n+=` (Gim: ${Te(uo)})`)})),fe.discount&&fe.discount>0&&(_n+=`

Gim gi n hng: -${Te(fe.discount)}`);const Ki=fe.paymentMethod==="cash"?"Tin mt":"Chuyn khon";_n+=`

Phng thc: ${Ki}`,_n+=`

NV: ${fe.userName||"N/A"}`;const bi={customerId:zn,customerName:Vn,phone:fe.customer.phone||null,licensePlate:null,description:_n,totalAmount:wr,paidAmount:Or,remainingAmount:vt,createdDate:new Date().toISOString().split("T")[0],branchId:i,saleId:fe.id};console.log("[SalesManager] createCustomerDebt payload:",bi);const gs=await me.mutateAsync(bi);console.log("[SalesManager] createCustomerDebt result:",gs),Ze.success(` to cng n ${Te(vt)} cho ${Vn}`)}catch(zn){console.error("Error creating customer debt:",zn),console.error("Error details:",{message:zn==null?void 0:zn.message,cause:zn==null?void 0:zn.cause,stack:zn==null?void 0:zn.stack}),Ze.error(`Khng th to cng n t ng: ${(zn==null?void 0:zn.message)||"Li khng xc nh"}`)}}},yt=async()=>{var fe,vt,wr,Or;if(t.length===0){alert("Vui lng thm sn phm vo gi hng");return}if(!Sr&&!Dr&&!Xt){alert("Vui lng nhp thng tin khch hng trc khi bn hng");return}if(!Nn){alert("Vui lng chn phng thc thanh ton");return}if(!Gr){alert("Vui lng chn hnh thc thanh ton");return}if(Gr==="partial"&&Me<=0){alert("Vui lng nhp s tin khch tr");return}try{for(const aa of t){const za=g.find(Pr=>Pr.id===aa.partId);if(!za){Ze.error(`Khng tm thy sn phm: ${aa.partName}`);return}const uo=((fe=za.stock)==null?void 0:fe[i])??0;if(aa.quantity>uo){Ze.error(`Khng  hng cho ${za.name}. Tn kho: ${uo}`);return}}const nn=`SALE-${Date.now()}`,zn=t.reduce((aa,za)=>aa+za.sellingPrice*za.quantity,0),Vn=t.reduce((aa,za)=>aa+(za.discount||0),0),Tr=Math.max(0,zn-Vn-ar),_n={id:Sr==null?void 0:Sr.id,name:(Sr==null?void 0:Sr.name)||Dr||"Khch l",phone:(Sr==null?void 0:Sr.phone)||Xt};ur(nn),jr(_n.name),Wr(_n.phone||""),pr([...t]),Ir(ar+Vn),!Sr&&Xt&&Dr&&(u.find(za=>za.phone===Xt)||e({id:`CUST-${Date.now()}`,name:Dr,phone:Xt,status:"active",segment:"New",loyaltyPoints:0,totalSpent:0,visitCount:1,lastVisit:new Date().toISOString(),created_at:new Date().toISOString()}));const Ki=await _e({id:nn,items:t,discount:ar+Vn,customer:_n,paymentMethod:Nn,userId:(na==null?void 0:na.id)||"local-user",userName:(na==null?void 0:na.email)||(na==null?void 0:na.full_name)||"Local User",branchId:i});if(Ki!=null&&Ki.error)throw Ki.error;const bi=Gr==="full"?Tr:Gr==="partial"?Me:0,gs=Tr-bi;if(console.log("[SalesManager] Payment details:",{paymentType:Gr,total:Tr,paidAmount:bi,partialAmount:Me,remainingAmount:gs,hasCustomer:!!(Sr||Dr||Xt)}),gs>0){console.log("[SalesManager] Creating debt because remaining > 0");const{data:aa,error:za}=await It.from("sales").select(`
            *,
            user:userid(
              full_name,
              display_name,
              email
            )
          `).eq("id",nn).single();za&&console.error("[SalesManager] Error fetching sale:",za);const Pr=(aa?{...aa,userName:((vt=aa.user)==null?void 0:vt.full_name)||((wr=aa.user)==null?void 0:wr.display_name)||((Or=aa.user)==null?void 0:Or.email)||"N/A"}:null)||{id:nn,sale_code:void 0,date:new Date().toISOString(),items:t,subtotal:Yt,discount:ar+Vn,total:Tr,customer:_n,paymentMethod:Nn,userName:(na==null?void 0:na.email)||(na==null?void 0:na.full_name)||"Local User",userId:(na==null?void 0:na.id)||"",branchId:i||""};console.log("[SalesManager] Sale data for debt:",Pr),await ps(Pr,gs,Tr,bi)}else console.log("[SalesManager] No debt needed, paid in full");tr(null),fr(""),vr(0),yr(0),ft("amount"),Mr(null),Ne(null),Re(0),n(),Ce&&setTimeout(()=>{hk("last-receipt")},100)}catch(nn){console.error("Error finalizing sale (atomic):",nn),Ze.error((nn==null?void 0:nn.message)||"C li khi to ha n (atomic)")}};return T.useEffect(()=>{const fe=vt=>{vt.target.closest(".customer-dropdown-container")||Kt(!1)};return document.addEventListener("mousedown",fe),()=>document.removeEventListener("mousedown",fe)},[]),s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50/20 to-indigo-50/30 dark:from-slate-900 dark:via-slate-900 dark:to-slate-800",children:[s.jsx("div",{className:"md:hidden sticky top-0 z-10 bg-white/95 dark:bg-slate-800/95 backdrop-blur-sm border-b border-slate-200/50 dark:border-slate-700/50 shadow-sm",children:s.jsxs("div",{className:"grid grid-cols-2",children:[s.jsxs("button",{onClick:()=>sr("products"),className:`py-3.5 px-4 font-bold transition-all relative ${hr==="products"?"text-blue-600 dark:text-blue-400 bg-blue-50/50 dark:bg-blue-900/20":"text-slate-600 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-700/50"}`,children:[s.jsxs("div",{className:"flex items-center justify-center gap-2",children:[s.jsx(Hi,{className:"w-5 h-5"}),s.jsx("span",{className:"text-sm",children:"Sn phm"})]}),hr==="products"&&s.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-gradient-to-r from-blue-500 to-indigo-500 rounded-t-full"})]}),s.jsxs("button",{onClick:()=>sr("cart"),className:`py-3.5 px-4 font-bold transition-all relative ${hr==="cart"?"text-blue-600 dark:text-blue-400 bg-blue-50/50 dark:bg-blue-900/20":"text-slate-600 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-700/50"}`,children:[s.jsxs("div",{className:"flex items-center justify-center gap-2",children:[s.jsx(om,{className:"w-5 h-5"}),s.jsx("span",{className:"text-sm",children:"Gi hng"}),t.length>0&&s.jsx("span",{className:"ml-1 px-2 py-0.5 text-xs font-bold rounded-full bg-gradient-to-r from-orange-500 to-red-500 text-white shadow-lg",children:t.length})]}),hr==="cart"&&s.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-gradient-to-r from-blue-500 to-indigo-500 rounded-t-full"})]})]})}),s.jsxs("div",{className:"flex h-[calc(100vh-57px)] md:h-screen",children:[s.jsxs("div",{className:`flex-1 flex flex-col transition-all duration-300 ${hr==="cart"?"hidden md:flex":"animate-fade-in"}`,children:[s.jsx("div",{className:"bg-white/80 dark:bg-slate-800/80 backdrop-blur-sm border-b border-slate-200/50 dark:border-slate-700/50 p-3 md:p-4 shadow-sm",children:s.jsxs("div",{className:"flex flex-col md:flex-row items-stretch md:items-center gap-3",children:[s.jsxs("div",{className:"flex-1 space-y-2",children:[s.jsxs("div",{className:"flex items-stretch gap-2",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),s.jsx("input",{type:"text",placeholder:"Tm kim sn phm...",value:ce,onChange:fe=>Ee(fe.target.value),className:"w-full pl-10 pr-4 py-2.5 border-2 border-slate-300/50 dark:border-slate-600/50 rounded-xl bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm md:text-base transition-all placeholder:text-slate-400"})]}),s.jsxs("button",{type:"button",onClick:()=>Je(fe=>!fe),className:`px-4 py-2 rounded-xl border-2 font-semibold text-sm flex items-center gap-2 transition-all ${at?"border-blue-500 text-blue-600 bg-blue-50 dark:bg-blue-900/20":"border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-200 bg-white dark:bg-slate-800"}`,children:[s.jsx(hee,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden md:inline",children:at?"ng qut":"Qut m"})]}),s.jsx("button",{type:"button",onClick:()=>Ke(!0),className:"md:hidden px-3 py-2 rounded-xl border-2 border-green-500 text-green-600 bg-green-50 dark:bg-green-900/20 font-semibold text-sm flex items-center gap-1.5 transition-all hover:bg-green-100",title:"Qut bng camera",children:s.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]})})]}),at&&s.jsxs("form",{onSubmit:Fr,className:"relative",children:[s.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-blue-500",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"})})}),s.jsx("input",{ref:zt,type:"text",placeholder:"Nhp hoc qut m vch...",value:Qe,onChange:fe=>Ye(fe.target.value),className:"w-full pl-10 pr-10 py-2.5 border-2 border-blue-400 dark:border-blue-600 rounded-xl bg-blue-50/50 dark:bg-blue-900/20 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm md:text-base transition-all placeholder:text-blue-500/70 font-mono"}),Qe&&s.jsx("button",{type:"button",onClick:()=>Ye(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600 dark:hover:text-slate-300",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),s.jsx("div",{className:"flex items-center gap-2",children:s.jsxs("button",{onClick:()=>ot(!0),className:"px-4 py-2.5 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white rounded-xl whitespace-nowrap transition-all inline-flex items-center gap-2 text-sm font-bold shadow-lg hover:shadow-xl hover:scale-105 active:scale-95",title:"Lch s bn hng",children:[s.jsx(gw,{className:"w-5 h-5"}),s.jsx("span",{children:"Lch s"})]})})]})}),s.jsxs("div",{className:"bg-white/80 dark:bg-slate-800/80 border-b border-slate-200/60 dark:border-slate-700/60 px-3 md:px-6 py-3 flex flex-col md:flex-row md:items-center md:justify-between gap-2",children:[s.jsxs("div",{className:"text-xs md:text-sm text-slate-600 dark:text-slate-400 font-medium",children:["Hin th ",ta.length," / ",ia.length||0," sn phm",ce&&" theo t kha"]}),s.jsx("div",{className:"flex items-center gap-2 overflow-x-auto pb-1",children:ra.map(fe=>{const vt=be===fe.key;return s.jsxs("button",{type:"button","aria-pressed":vt,onClick:()=>ge(fe.key),className:`flex items-center gap-1.5 px-3 py-1.5 rounded-full text-xs font-semibold transition-all whitespace-nowrap ${vt?fe.activeClass:fe.inactiveClass}`,children:[s.jsx("span",{children:fe.label}),s.jsx("span",{className:`px-1.5 py-0.5 rounded-full text-[10px] font-black ${vt?"bg-white/30":"bg-slate-100 dark:bg-slate-800"}`,children:fe.count})]},fe.key)})})]}),s.jsx("div",{className:"flex-1 p-0 md:p-6 overflow-y-auto bg-slate-50 dark:bg-slate-900 pb-24 md:pb-6",children:ta.length===0?s.jsxs("div",{className:"text-center text-slate-400 mt-20",children:[s.jsx("div",{className:"mb-4 flex items-center justify-center",children:s.jsx(Hi,{className:"w-16 h-16 text-slate-300"})}),s.jsx("div",{className:"text-xl font-medium mb-2",children:ia.length===0?ce?"Khng tm thy sn phm no":"Cha c sn phm":be==="low"?"Khng c sn phm tn thp":"Khng c sn phm ht hng"}),s.jsx("div",{className:"text-sm",children:ia.length===0?ce?"Hy th mt t kha tm kim khc":"Vui lng thm sn phm vo h thng":"Hy chn b lc khc  xem thm sn phm"})]}):s.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-2.5 md:gap-3",children:ta.map(fe=>{var bi,gs;const vt=Number(((bi=fe.retailPrice)==null?void 0:bi[i])??0),wr=Number(((gs=fe.stock)==null?void 0:gs[i])??0),Or=wr<=0,nn=wr>0&&wr<=Z2,zn=Cr.get(fe.id),Vn=!!zn,Tr=Or?"Ht hng":nn?"Tn thp":"Sn hng",_n=Or?"bg-rose-50 text-rose-600 dark:bg-rose-900/20 dark:text-rose-200":nn?"bg-amber-50 text-amber-600 dark:bg-amber-900/20 dark:text-amber-200":"bg-emerald-50 text-emerald-600 dark:bg-emerald-900/20 dark:text-emerald-200",Ki=Or?"bg-gradient-to-r from-rose-500 to-red-500 text-white":nn?"bg-gradient-to-r from-amber-500 to-orange-500 text-white":"bg-gradient-to-r from-emerald-500 to-green-500 text-white";return s.jsx("button",{type:"button",onClick:()=>!Or&&mt(fe),disabled:Or,className:`group relative text-left p-3 md:p-4 rounded-2xl border transition-all duration-200 h-full ${Or?"bg-slate-50/70 dark:bg-slate-900/30 border-slate-200 dark:border-slate-800 cursor-not-allowed":"bg-white dark:bg-slate-800/70 border-slate-200/70 dark:border-slate-700 hover:border-blue-400 dark:hover:border-blue-500 hover:shadow-xl"} ${Vn?"ring-2 ring-blue-200 dark:ring-blue-500/40":""}`,children:s.jsxs("div",{className:"flex flex-col h-full",children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center ${Or?"bg-slate-100 dark:bg-slate-700":"bg-slate-100 text-orange-500 dark:bg-slate-700/70"}`,children:s.jsx(Hi,{className:`w-6 h-6 ${Or?"text-slate-400":"text-orange-500 dark:text-orange-300"}`})}),s.jsx("span",{className:`px-2 py-0.5 rounded-full text-[11px] font-semibold ${_n}`,children:Tr})]}),Vn&&s.jsxs("span",{className:"text-[10px] font-semibold px-2 py-0.5 rounded-full bg-blue-50 text-blue-700 dark:bg-blue-900/30 dark:text-blue-200",children:[" chn ",zn==null?void 0:zn.quantity]})]}),s.jsxs("div",{className:"space-y-1 mb-4",children:[s.jsx("h3",{className:"font-semibold text-xs md:text-sm text-slate-900 dark:text-slate-100 line-clamp-2",title:fe.name,children:fe.name}),s.jsx("div",{className:"text-[11px] text-slate-500 dark:text-slate-400 font-mono truncate",children:fe.sku})]}),s.jsxs("div",{className:"flex items-center justify-between mt-auto pt-3 border-t border-slate-100 dark:border-slate-700",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-[11px] uppercase tracking-wide text-slate-400 dark:text-slate-500 font-semibold",children:"Gi bn"}),s.jsx("p",{className:`text-sm md:text-base font-bold ${Or?"text-slate-400 dark:text-slate-500":"text-blue-600 dark:text-blue-300"}`,children:Te(vt)})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"text-[11px] uppercase tracking-wide text-slate-400 dark:text-slate-500 font-semibold",children:"Tn kho"}),s.jsx("span",{className:`inline-flex items-center justify-center min-w-[2.75rem] px-2.5 py-1 text-[11px] font-black rounded-lg ${Ki}`,children:Math.max(0,Math.floor(wr))})]})]})]})},fe.id)})})})]}),s.jsxs("div",{className:`w-full md:w-[40%] bg-white dark:bg-slate-800 md:border-l border-slate-200 dark:border-slate-700 flex flex-col transition-all duration-300 overflow-y-auto ${hr==="products"?"hidden md:flex":"animate-fade-in"}`,children:[s.jsx("div",{className:"p-3 md:p-4 border-b border-slate-200 md:border-slate-200/50 dark:border-slate-700/50 bg-white dark:bg-slate-800 md:bg-gradient-to-r md:from-emerald-50/30 md:via-teal-50/20 md:to-cyan-50/30 dark:md:from-slate-800/50 dark:md:via-slate-800/30 dark:md:to-slate-800/50",children:s.jsxs("div",{className:"customer-dropdown-container",children:[s.jsxs("label",{className:"flex items-center gap-2 text-sm font-semibold md:font-bold text-slate-900 dark:text-slate-100 mb-2 md:mb-3",children:[s.jsx("div",{className:"w-7 h-7 md:w-8 md:h-8 bg-emerald-500 md:bg-gradient-to-br md:from-emerald-500 md:to-teal-500 rounded-lg flex items-center justify-center md:shadow-lg",children:s.jsx("svg",{className:"w-4 h-4 md:w-5 md:h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),s.jsx("span",{children:"Khch hng"})]}),s.jsxs("div",{className:"relative flex flex-col md:flex-row gap-2",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),s.jsx("input",{type:"text",placeholder:"Tm tn, s in thoi...",value:Ft,onChange:fe=>{fr(fe.target.value),Kt(!0)},onFocus:()=>Kt(!0),onBlur:()=>{setTimeout(()=>Kt(!1),200)},className:"w-full pl-10 pr-4 py-2 md:py-2.5 border md:border-2 border-slate-300 md:border-slate-300/50 dark:border-slate-600/50 rounded-lg md:rounded-xl bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 text-sm focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 transition-all placeholder:text-slate-400"}),Jt&&s.jsx("div",{className:"absolute top-full left-0 right-0 z-50 mt-1 max-h-48 overflow-y-auto bg-white dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg shadow-lg",children:Gi.length>0?Gi.map(fe=>s.jsxs("button",{onClick:()=>{tr(fe),fr(fe.name),Kt(!1)},className:"w-full text-left px-3 py-2.5 hover:bg-slate-50 dark:hover:bg-slate-600 border-b border-slate-100 dark:border-slate-600 last:border-b-0",children:[s.jsx("div",{className:"font-medium text-slate-900 dark:text-slate-100 text-sm",children:fe.name}),fe.phone&&s.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:[" ",fe.phone]})]},fe.id)):s.jsx("div",{className:"px-3 py-3 text-center text-slate-500 dark:text-slate-400 text-sm",children:Ft?s.jsxs(s.Fragment,{children:[s.jsx("div",{children:"Khng tm thy khch hng"}),s.jsx("button",{onClick:()=>ir(!0),className:"mt-2 text-emerald-500 hover:text-emerald-600 font-medium",children:"+ Thm khch hng mi"})]}):u.length===0?s.jsx("div",{children:"Cha c khch hng no"}):s.jsx("div",{children:"Nhp tn hoc ST  tm..."})})})]}),s.jsxs("button",{onClick:()=>ir(!0),className:"px-3 py-2 md:px-4 md:py-2.5 bg-emerald-500 md:bg-gradient-to-r md:from-emerald-500 md:to-teal-500 hover:bg-emerald-600 md:hover:from-emerald-600 md:hover:to-teal-600 text-white rounded-lg md:rounded-xl flex items-center justify-center gap-2 transition-all md:shadow-lg md:hover:shadow-xl md:hover:scale-105 md:active:scale-95 font-semibold md:font-bold",title:"Thm khch hng mi",children:[s.jsx(Mc,{className:"w-4 h-4 md:w-5 md:h-5"}),s.jsx("span",{className:"hidden sm:inline text-sm",children:"Thm"})]})]}),Sr&&s.jsx("div",{className:"mt-2 md:mt-3 p-2 md:p-3.5 bg-emerald-50 dark:bg-emerald-900/20 md:bg-gradient-to-r md:from-emerald-50 md:to-teal-50 dark:md:from-emerald-900/20 dark:md:to-teal-900/20 rounded-lg md:rounded-xl border md:border-2 border-emerald-200 dark:border-emerald-800 md:shadow-sm",children:s.jsxs("div",{className:"flex items-start justify-between gap-2",children:[s.jsxs("div",{className:"flex items-center gap-2 md:gap-2.5 flex-1 min-w-0",children:[s.jsx("div",{className:"hidden md:flex w-10 h-10 bg-gradient-to-br from-emerald-500 to-teal-500 rounded-lg items-center justify-center shadow-lg flex-shrink-0",children:s.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"font-medium md:font-bold text-emerald-900 dark:text-emerald-100 truncate text-sm md:text-base",children:Sr.name}),Sr.phone&&s.jsxs("div",{className:"text-xs text-emerald-700 dark:text-emerald-300 flex items-center gap-1 mt-0.5",children:[s.jsx("svg",{className:"w-3 h-3 flex-shrink-0 hidden md:inline",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),s.jsx("span",{className:"truncate",children:Sr.phone})]})]})]}),s.jsx("button",{onClick:()=>{tr(null),fr("")},className:"w-7 h-7 md:w-8 md:h-8 bg-red-100 dark:bg-red-900/30 hover:bg-red-200 dark:hover:bg-red-900/50 text-red-600 dark:text-red-400 rounded-md md:rounded-lg flex items-center justify-center transition-all flex-shrink-0 md:shadow-sm md:hover:shadow-md text-lg",title:"Xa",children:""})]})})]})}),s.jsxs("div",{className:"p-3 md:p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3 md:mb-4 pb-2 md:pb-3 border-b md:border-b-2 border-slate-200 md:border-slate-200/50 dark:border-slate-700/50",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"hidden md:flex w-8 h-8 bg-gradient-to-br from-blue-500 to-indigo-500 rounded-lg items-center justify-center shadow-lg",children:s.jsx(om,{className:"w-4 h-4 text-white"})}),s.jsx("h3",{className:"text-base md:text-lg font-semibold md:font-black text-slate-900 dark:text-slate-100",children:"Gi hng"})]}),s.jsx("span",{className:"px-2 py-0.5 md:px-3 md:py-1 bg-blue-100 md:bg-gradient-to-r md:from-blue-100 md:to-indigo-100 dark:from-blue-900/30 dark:to-indigo-900/30 text-blue-700 dark:text-blue-300 rounded-full text-xs font-semibold md:font-bold md:shadow-sm",children:t.length})]}),t.length===0?s.jsxs("div",{className:"text-center py-12 md:py-16 mb-3",children:[s.jsx("div",{className:"mb-3 md:mb-4 flex items-center justify-center",children:s.jsx("div",{className:"w-16 h-16 md:w-20 md:h-20 bg-slate-100 md:bg-gradient-to-br md:from-slate-100 md:to-slate-200 dark:from-slate-800 dark:to-slate-700 rounded-2xl md:rounded-3xl flex items-center justify-center md:shadow-lg",children:s.jsx(om,{className:"w-8 h-8 md:w-10 md:h-10 text-slate-400 dark:text-slate-500"})})}),s.jsx("div",{className:"text-sm md:text-base font-semibold md:font-bold text-slate-600 dark:text-slate-400 mb-1",children:"Gi hng trng"}),s.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-500",children:"Chn sn phm  thm vo gi"})]}):s.jsx("div",{className:"space-y-2 md:space-y-2.5",children:t.map(fe=>s.jsxs("div",{className:"group p-2.5 md:p-3 border md:border-2 border-slate-200 md:border-slate-200/50 dark:border-slate-700/50 rounded-xl md:rounded-xl bg-white dark:bg-slate-800 md:hover:border-blue-400 dark:hover:border-blue-600 transition-all duration-200 md:hover:shadow-lg md:hover:shadow-blue-500/10",children:[s.jsxs("div",{className:"md:hidden",children:[s.jsxs("div",{className:"flex items-start gap-2.5 mb-2",children:[s.jsx("div",{className:"w-10 h-10 bg-orange-50 dark:bg-orange-900/30 rounded-lg flex items-center justify-center flex-shrink-0",children:s.jsx(Hi,{className:"w-5 h-5 text-orange-500 dark:text-orange-400"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"font-semibold text-sm text-slate-900 dark:text-slate-100 leading-tight mb-1",title:fe.partName,children:fe.partName}),s.jsx("div",{className:"inline-flex items-center gap-1 px-1.5 py-0.5 bg-slate-100 dark:bg-slate-700 rounded-md",children:s.jsx("span",{className:"text-[10px] text-slate-500 dark:text-slate-400 font-medium",children:fe.sku})})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{className:"text-sm font-bold text-blue-600 dark:text-blue-400",children:Te(fe.sellingPrice)}),s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx("button",{onClick:()=>Rt(fe.partId,Math.max(1,fe.quantity-1)),className:"w-8 h-8 flex items-center justify-center bg-slate-100 dark:bg-slate-700 rounded-lg text-slate-700 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-600 transition-all font-bold text-lg",children:"-"}),s.jsx("span",{className:"w-8 text-center font-bold text-sm text-slate-900 dark:text-slate-100 px-1 py-1 bg-slate-50 dark:bg-slate-700 rounded-lg",children:fe.quantity}),s.jsx("button",{onClick:()=>Rt(fe.partId,fe.quantity+1),className:"w-8 h-8 flex items-center justify-center bg-blue-500 dark:bg-blue-600 rounded-lg text-white hover:bg-blue-600 dark:hover:bg-blue-700 transition-all font-bold text-lg",children:"+"}),s.jsx("button",{onClick:()=>Tt(fe.partId),className:"w-8 h-8 flex items-center justify-center bg-red-500 hover:bg-red-600 rounded-lg text-white transition-all ml-1 font-bold text-lg",children:""})]})]})]}),s.jsxs("div",{className:"hidden md:flex items-center gap-3",children:[s.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-orange-100 to-amber-100 dark:from-orange-900/30 dark:to-amber-900/30 rounded-xl flex items-center justify-center flex-shrink-0 shadow-sm group-hover:scale-110 transition-transform",children:s.jsx(Hi,{className:"w-6 h-6 text-orange-500 dark:text-orange-400"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"font-bold text-sm text-slate-900 dark:text-slate-100 line-clamp-1 mb-1",title:fe.partName,children:fe.partName}),s.jsx("div",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-slate-100 dark:bg-slate-700 rounded-md mb-1",children:s.jsx("span",{className:"text-[10px] text-slate-500 dark:text-slate-400 font-semibold",children:fe.sku})}),s.jsx("div",{className:"text-sm font-black bg-gradient-to-r from-blue-600 to-indigo-600 dark:from-blue-400 dark:to-indigo-400 bg-clip-text text-transparent",children:Te(fe.sellingPrice)})]}),s.jsxs("div",{className:"flex items-center gap-1.5 flex-shrink-0",children:[s.jsx("button",{onClick:()=>Rt(fe.partId,Math.max(1,fe.quantity-1)),className:"w-8 h-8 flex items-center justify-center bg-gradient-to-r from-slate-100 to-slate-200 dark:from-slate-700 dark:to-slate-600 rounded-lg text-slate-700 dark:text-slate-300 hover:from-slate-200 hover:to-slate-300 dark:hover:from-slate-600 dark:hover:to-slate-500 transition-all shadow-sm hover:shadow-md font-bold",children:"-"}),s.jsx("span",{className:"w-10 text-center font-black text-sm text-slate-900 dark:text-slate-100 px-2 py-1 bg-slate-50 dark:bg-slate-700 rounded-lg",children:fe.quantity}),s.jsx("button",{onClick:()=>Rt(fe.partId,fe.quantity+1),className:"w-8 h-8 flex items-center justify-center bg-gradient-to-r from-blue-500 to-indigo-500 dark:from-blue-600 dark:to-indigo-600 rounded-lg text-white hover:from-blue-600 hover:to-indigo-600 dark:hover:from-blue-700 dark:hover:to-indigo-700 transition-all shadow-md hover:shadow-lg font-bold",children:"+"}),s.jsx("button",{onClick:()=>Tt(fe.partId),className:"w-8 h-8 flex items-center justify-center bg-gradient-to-r from-red-500 to-pink-500 hover:from-red-600 hover:to-pink-600 rounded-lg text-white transition-all ml-1 shadow-md hover:shadow-lg font-bold text-lg",children:""})]})]})]},fe.partId))})]}),t.length>0&&s.jsxs("div",{className:"border-t md:border-t-2 border-slate-200 md:border-slate-200/50 dark:border-slate-700/50 bg-slate-50 dark:bg-slate-800 md:bg-gradient-to-br md:from-slate-50 md:to-blue-50/30 dark:md:from-slate-800 dark:md:to-slate-800/50",children:[s.jsxs("div",{className:"p-3 md:p-4 space-y-2 md:space-y-3 pb-20 md:pb-3",children:[s.jsxs("div",{className:"flex justify-between text-xs md:text-sm",children:[s.jsx("span",{className:"text-slate-600 dark:text-slate-400 font-medium",children:"Tng tin hng"}),s.jsx("span",{className:"font-semibold md:font-bold text-slate-900 dark:text-slate-100",children:Te(Yt)})]}),s.jsxs("div",{className:"space-y-2 md:space-y-2.5",children:[s.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between text-xs md:text-sm gap-1.5 md:gap-2",children:[s.jsx("span",{className:"text-slate-600 dark:text-slate-400 font-medium",children:"Gim gi:"}),s.jsxs("div",{className:"flex items-center gap-1.5 md:gap-2 w-full md:w-auto",children:[s.jsx("input",{type:"number",value:rr==="amount"?ar:br,onChange:fe=>{const vt=Number(fe.target.value)||0;if(rr==="amount")vr(Math.min(vt,Yt));else{const wr=Math.min(vt,100);yr(wr),vr(Math.round(Yt*wr/100))}},className:"flex-1 md:w-24 px-2 md:px-3 py-1.5 md:py-2 text-right text-xs md:text-sm border md:border-2 border-slate-300 md:border-slate-300 dark:border-slate-600 rounded-lg md:rounded-xl bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all font-medium md:font-semibold",placeholder:"0",min:"0",max:rr==="amount"?Yt:100}),s.jsxs("select",{value:rr,onChange:fe=>{const vt=fe.target.value;ft(vt),vr(0),yr(0)},className:"px-2 md:px-3 py-1.5 md:py-2 border md:border-2 border-slate-300 md:border-slate-300 dark:border-slate-600 rounded-lg md:rounded-xl bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 text-xs md:text-sm font-semibold md:font-bold focus:ring-2 focus:ring-purple-500 transition-all",children:[s.jsx("option",{value:"amount",children:""}),s.jsx("option",{value:"percent",children:"%"})]})]})]}),rr==="percent"&&s.jsx("div",{className:"flex gap-1.5 md:gap-2 justify-end flex-wrap",children:[5,10,15,20].map(fe=>s.jsxs("button",{onClick:()=>{yr(fe),vr(Math.round(Yt*fe/100))},className:"px-2 md:px-3 py-1 md:py-1.5 text-[10px] md:text-xs font-semibold md:font-bold bg-purple-100 md:bg-gradient-to-r md:from-purple-100 md:to-pink-100 dark:from-purple-900/30 dark:to-pink-900/30 hover:bg-purple-200 md:hover:from-purple-200 md:hover:to-pink-200 dark:hover:from-purple-900/50 dark:hover:to-pink-900/50 text-purple-700 dark:text-purple-300 rounded-md md:rounded-lg transition-all md:shadow-sm md:hover:shadow-md",children:[fe,"%"]},fe))}),rr==="percent"&&br>0&&s.jsxs("div",{className:"text-[10px] md:text-xs text-slate-500 dark:text-slate-400 text-right",children:["= ",Te(ar)]})]}),s.jsxs("div",{className:"flex justify-between items-center pt-2 md:pt-3 mt-2 md:mt-3 border-t md:border-t-2 border-slate-200 dark:border-slate-700 p-2 md:p-3 -mx-3 md:-mx-4 bg-blue-600 md:bg-gradient-to-r md:from-blue-600 md:to-indigo-600 dark:from-blue-700 dark:to-indigo-700 rounded-b-lg md:rounded-b-xl md:shadow-lg",children:[s.jsx("span",{className:"font-semibold md:font-bold text-white text-xs md:text-sm",children:"Khch phi tr"}),s.jsx("span",{className:"font-black text-lg md:text-2xl text-white",children:Te(Math.max(0,or-ar))})]})]}),s.jsxs("div",{className:"px-3 md:px-4 pb-3 md:pb-4",children:[s.jsxs("label",{className:"flex items-center gap-2 text-xs md:text-sm font-semibold md:font-bold text-slate-900 dark:text-slate-100 mb-2 md:mb-3",children:[s.jsx("span",{children:"Phng thc thanh ton"}),s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-2 md:gap-3",children:[s.jsxs("button",{onClick:()=>Mr("cash"),className:`flex items-center justify-center gap-1.5 md:gap-2 px-3 md:px-4 py-2 md:py-3 rounded-lg md:rounded-xl border md:border-2 transition-all font-semibold md:font-bold md:shadow-sm md:hover:shadow-md ${Nn==="cash"?"border-emerald-500 bg-emerald-50 md:bg-gradient-to-r md:from-emerald-50 md:to-green-50 dark:from-emerald-900/30 dark:to-green-900/30 text-emerald-700 dark:text-emerald-400 md:shadow-lg":"border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-700 dark:text-slate-300 hover:border-emerald-400"}`,children:[s.jsx(C6,{className:"w-4 h-4 md:w-5 md:h-5"}),s.jsx("span",{className:"text-xs md:text-sm",children:"Tin mt"})]}),s.jsxs("button",{onClick:()=>Mr("bank"),className:`flex items-center justify-center gap-1.5 md:gap-2 px-3 md:px-4 py-2 md:py-3 rounded-lg md:rounded-xl border md:border-2 transition-all font-semibold md:font-bold md:shadow-sm md:hover:shadow-md ${Nn==="bank"?"border-blue-500 bg-blue-50 md:bg-gradient-to-r md:from-blue-50 md:to-cyan-50 dark:from-blue-900/30 dark:to-cyan-900/30 text-blue-700 dark:text-blue-400 md:shadow-lg":"border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-700 dark:text-slate-300 hover:border-blue-400"}`,children:[s.jsx(OB,{className:"w-4 h-4 md:w-5 md:h-5"}),s.jsx("span",{className:"text-xs md:text-sm",children:"Chuyn khon"})]})]})]}),Nn&&s.jsxs("div",{className:"px-3 md:px-4 pb-3 md:pb-4",children:[s.jsx("label",{className:"block text-xs md:text-sm font-semibold md:font-bold text-slate-900 dark:text-slate-100 mb-2 md:mb-3",children:"Hnh thc"}),s.jsxs("div",{className:"grid grid-cols-3 gap-1.5 md:gap-2",children:[s.jsx("button",{onClick:()=>{Ne("full"),Re(0)},className:`px-2 md:px-3 py-2 md:py-2.5 text-xs md:text-sm rounded-lg md:rounded-xl border md:border-2 transition-all font-bold md:shadow-sm ${Gr==="full"?"border-orange-500 bg-orange-50 md:bg-gradient-to-r md:from-orange-50 md:to-amber-50 dark:from-orange-900/30 dark:to-amber-900/30 text-orange-700 dark:text-orange-400 md:shadow-lg":"border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-600 dark:text-slate-400 hover:border-orange-400"}`,children:""}),s.jsx("button",{onClick:()=>Ne("partial"),className:`px-2 md:px-3 py-2 md:py-2.5 text-xs md:text-sm rounded-lg md:rounded-xl border md:border-2 transition-all font-bold md:shadow-sm ${Gr==="partial"?"border-orange-500 bg-orange-50 md:bg-gradient-to-r md:from-orange-50 md:to-amber-50 dark:from-orange-900/30 dark:to-amber-900/30 text-orange-700 dark:text-orange-400 md:shadow-lg":"border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-600 dark:text-slate-400 hover:border-orange-400"}`,children:"1 phn"}),s.jsx("button",{onClick:()=>{Ne("note"),Re(0)},className:`px-2 md:px-3 py-2 md:py-2.5 text-xs md:text-sm rounded-lg md:rounded-xl border md:border-2 transition-all font-bold md:shadow-sm ${Gr==="note"?"border-orange-500 bg-orange-50 md:bg-gradient-to-r md:from-orange-50 md:to-amber-50 dark:from-orange-900/30 dark:to-amber-900/30 text-orange-700 dark:text-orange-400 md:shadow-lg":"border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-600 dark:text-slate-400 hover:border-orange-400"}`,children:"Ghi n"})]})]}),Gr==="partial"&&s.jsxs("div",{className:"px-4 pb-3",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-900 dark:text-slate-100 mb-2",children:"S tin khch tr"}),s.jsx("input",{type:"number",value:Me,onChange:fe=>Re(Number(fe.target.value)||0),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",placeholder:"0"}),s.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:["Cn li:"," ",Te(Math.max(0,or-ar-Me))," ",""]})]}),s.jsxs("div",{className:"px-3 md:px-4 pb-2 md:pb-3 space-y-1.5 md:space-y-2",children:[s.jsx("div",{className:"text-xs md:text-sm font-semibold md:font-medium text-slate-900 dark:text-slate-100 mb-1.5 md:mb-2",children:"Thi gian bn hng"}),s.jsxs("label",{className:"flex items-center gap-1.5 md:gap-2 cursor-pointer",children:[s.jsx("input",{type:"radio",name:"salesTime",defaultChecked:!0,className:"w-1.5 h-1.5 md:w-3.5 md:h-3.5 text-pink-600 focus:ring-pink-500"}),s.jsx("span",{className:"text-xs md:text-sm text-slate-700 dark:text-slate-300",children:"Thi gian hin ti"})]}),s.jsxs("label",{className:"flex items-center gap-1.5 md:gap-2 cursor-pointer",children:[s.jsx("input",{type:"radio",name:"salesTime",className:"w-1.5 h-1.5 md:w-3.5 md:h-3.5 text-blue-600 focus:ring-blue-500"}),s.jsx("span",{className:"text-xs md:text-sm text-slate-700 dark:text-slate-300",children:"Ty chnh"})]}),s.jsxs("label",{className:"flex items-center gap-1.5 cursor-pointer",children:[s.jsx("input",{type:"checkbox",className:"w-1.5 h-1.5 md:w-3.5 md:h-3.5 rounded border-slate-300 text-blue-600 focus:ring-blue-500"}),s.jsx("span",{className:"text-sm md:text-sm text-slate-700 dark:text-slate-300",children:"Ghi ch ring cho n hng"})]}),s.jsxs("label",{className:"flex items-center gap-1.5 md:gap-2 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:Ce,onChange:fe=>Ue(fe.target.checked),className:"w-1.5 h-1.5 md:w-3.5 md:h-3.5 rounded border-slate-300 text-blue-600 focus:ring-blue-500"}),s.jsx("span",{className:"text-xs md:text-sm text-slate-700 dark:text-slate-300",children:"ng thi in ho n"})]})]}),s.jsxs("div",{className:"p-3 md:p-4 pt-0 flex flex-col md:flex-row gap-2 md:gap-3",children:[s.jsx("button",{onClick:n,className:"flex-1 px-3 md:px-4 py-2 md:py-3 bg-white dark:bg-slate-700 border md:border-2 border-slate-300 dark:border-slate-600 hover:border-slate-400 dark:hover:border-slate-500 hover:bg-slate-50 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-300 font-semibold md:font-bold rounded-lg md:rounded-xl transition-all md:shadow-sm md:hover:shadow-md text-sm md:text-base",children:"LU NHP"}),s.jsx("button",{onClick:yt,disabled:!Nn||!Gr,className:`flex-1 px-3 md:px-4 py-2 md:py-3 font-bold md:font-black rounded-lg md:rounded-xl transition-all md:shadow-lg text-sm md:text-base ${Nn&&Gr?"bg-orange-500 md:bg-gradient-to-r md:from-orange-500 md:to-red-500 hover:bg-orange-600 md:hover:from-orange-600 md:hover:to-red-600 text-white md:shadow-orange-500/30 md:hover:shadow-xl md:hover:shadow-orange-500/40 md:hover:scale-105 md:active:scale-95":"bg-slate-300 dark:bg-slate-700 text-slate-500 dark:text-slate-500 cursor-not-allowed opacity-60"}`,children:"XUT BN"})]})]})]})]}),s.jsx(tye,{isOpen:gr,onClose:()=>ot(!1),sales:ie,currentBranchId:i,onPrintReceipt:ya,onEditSale:Mn,onDeleteSale:Da,page:Y.page,totalPages:Y.totalPages,total:Y.total,hasMore:Y.hasMore,pageSize:A,onPrevPage:ne,onNextPage:()=>{var fe,vt;if(ae){const wr=(fe=B==null?void 0:B.meta)==null?void 0:fe.nextAfterDate,Or=(vt=B==null?void 0:B.meta)==null?void 0:vt.nextAfterId;(wr||Or)&&Pe({afterDate:wr,afterId:Or})}else je()},onPageSizeChange:De,search:q,onSearchChange:fe=>{W(fe),fe||O(1)},fromDate:L,toDate:H,onDateRangeChange:(fe,vt)=>{Q(fe),G(vt),O(1),ae&&Pe(null)},status:Z,onStatusChange:fe=>{te(fe),O(1),ae&&Pe(null)},paymentMethodFilter:se,onPaymentMethodFilterChange:fe=>{ue(fe),O(1),ae&&Pe(null)},keysetMode:ae,onToggleKeyset:fe=>{pe(fe),O(1),Pe(null)},customerDebts:N}),At&&s.jsx("div",{id:"last-receipt",className:"hidden print:block",children:s.jsxs("div",{style:{width:"148mm",minHeight:"210mm",margin:"0 auto",padding:"15mm",fontFamily:"Arial, sans-serif",fontSize:"12px",backgroundColor:"white",color:"#000",boxSizing:"border-box"},children:[s.jsxs("div",{style:{textAlign:"center",marginBottom:"20px",borderBottom:"2px solid #333",paddingBottom:"15px"},children:[s.jsx("img",{src:"https://raw.githubusercontent.com/Nhan-Lam-SmartCare/Motocare/main/public/logo.png",alt:"Nhn-Lm SmartCare",style:{width:"120px",height:"120px",margin:"0 auto 10px",display:"block"},onError:fe=>{fe.currentTarget.style.display="none"}}),s.jsx("h1",{style:{fontSize:"24px",fontWeight:"bold",margin:"0 0 8px 0",color:"#c92a2a"},children:"Nhn-Lm SmartCare"}),s.jsxs("div",{style:{fontSize:"11px",lineHeight:"1.6"},children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(oee,{className:"w-4 h-4","aria-hidden":"true"}),s.jsx("span",{children:"a ch: 4p Ph Li B, Ph Thun B, Hng Ng, ng Thp"})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"w-4 h-4",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 6.75c0 8.284 6.716 15 15 15 .828 0 1.5-.672 1.5-1.5v-2.25a1.5 1.5 0 00-1.5-1.5h-1.158a1.5 1.5 0 00-1.092.468l-.936.996a1.5 1.5 0 01-1.392.444 12.035 12.035 0 01-7.29-7.29 1.5 1.5 0 01.444-1.392l.996-.936a1.5 1.5 0 00.468-1.092V6.75A1.5 1.5 0 006.75 5.25H4.5c-.828 0-1.5.672-1.5 1.5z"})}),s.jsx("span",{children:"in thoi: 0947747907"})]})]})]}),s.jsxs("div",{style:{backgroundColor:"#f8f9fa",border:"1px solid #dee2e6",borderRadius:"6px",padding:"10px 12px",marginBottom:"20px",fontSize:"11px"},children:[s.jsx("div",{style:{fontWeight:"bold",marginBottom:"6px"},children:" Thng tin chuyn khon:"}),s.jsxs("div",{style:{lineHeight:"1.6"},children:[s.jsxs("div",{children:[" Ngn hng: ",s.jsx("strong",{children:"NH Lin Vit (LPBank)"})]}),s.jsxs("div",{children:[" S ti khon: ",s.jsx("strong",{children:"LAMVOT"})]}),s.jsxs("div",{children:[" Ch ti khon: ",s.jsx("strong",{children:"VO THANH LAM"})]})]})]}),s.jsxs("div",{style:{textAlign:"center",marginBottom:"15px"},children:[s.jsx("h2",{style:{fontSize:"18px",fontWeight:"bold",margin:"0 0 8px 0",textTransform:"uppercase",letterSpacing:"1px"},children:"HA N BN HNG"}),s.jsxs("div",{style:{fontSize:"11px",color:"#666"},children:["S: ",s.jsx("strong",{style:{color:"#000"},children:At})," - Ngy:"," ",s.jsx("strong",{style:{color:"#000"},children:Fn(new Date,!0)})]})]}),s.jsx("div",{style:{marginBottom:"15px",padding:"10px",backgroundColor:"#f8f9fa",borderRadius:"4px"},children:s.jsxs("div",{style:{fontSize:"12px",lineHeight:"1.8"},children:[s.jsxs("div",{children:[s.jsx("strong",{children:"Khch hng:"})," ",Dr||"Khch l"]}),Xt&&s.jsxs("div",{children:[s.jsx("strong",{children:"in thoi:"})," ",Xt]})]})}),s.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",marginBottom:"15px",fontSize:"11px"},children:[s.jsx("thead",{children:s.jsxs("tr",{style:{backgroundColor:"#f1f3f5",borderTop:"2px solid #333",borderBottom:"2px solid #333"},children:[s.jsx("th",{style:{textAlign:"center",padding:"8px 4px",width:"8%",fontWeight:"bold"},children:"STT"}),s.jsx("th",{style:{textAlign:"left",padding:"8px 6px",width:"37%",fontWeight:"bold"},children:"Tn sn phm"}),s.jsx("th",{style:{textAlign:"center",padding:"8px 4px",width:"10%",fontWeight:"bold"},children:"SL"}),s.jsx("th",{style:{textAlign:"right",padding:"8px 6px",width:"20%",fontWeight:"bold"},children:"n gi"}),s.jsx("th",{style:{textAlign:"right",padding:"8px 6px",width:"25%",fontWeight:"bold"},children:"Thnh tin"})]})}),s.jsx("tbody",{children:cr.map((fe,vt)=>s.jsx(ma.Fragment,{children:s.jsxs("tr",{style:{borderBottom:"1px solid #e9ecef"},children:[s.jsx("td",{style:{textAlign:"center",padding:"10px 4px",verticalAlign:"top"},children:vt+1}),s.jsxs("td",{style:{padding:"10px 6px",verticalAlign:"top"},children:[s.jsx("div",{style:{fontWeight:"600",marginBottom:"3px"},children:fe.partName}),fe.sku&&s.jsxs("div",{style:{fontSize:"9px",color:"#868e96"},children:["SKU: ",fe.sku]})]}),s.jsx("td",{style:{textAlign:"center",padding:"10px 4px",verticalAlign:"top",fontWeight:"600"},children:fe.quantity}),s.jsx("td",{style:{textAlign:"right",padding:"10px 6px",verticalAlign:"top"},children:Te(fe.sellingPrice)}),s.jsx("td",{style:{textAlign:"right",padding:"10px 6px",verticalAlign:"top",fontWeight:"600"},children:Te(fe.sellingPrice*fe.quantity)})]})},fe.partId))})]}),s.jsx("div",{style:{borderTop:"2px solid #333",paddingTop:"12px",marginBottom:"15px"},children:s.jsx("table",{style:{width:"100%",fontSize:"12px"},children:s.jsxs("tbody",{children:[s.jsxs("tr",{children:[s.jsxs("td",{style:{padding:"6px 0",textAlign:"right"},children:["Tng cng (",Zr," sn phm):"]}),s.jsx("td",{style:{padding:"6px 0 6px 20px",textAlign:"right",width:"30%",fontWeight:"600"},children:Te(Et)})]}),Rr>0&&s.jsxs("tr",{children:[s.jsx("td",{style:{padding:"6px 0",textAlign:"right",color:"#c92a2a"},children:"Gim gi:"}),s.jsxs("td",{style:{padding:"6px 0 6px 20px",textAlign:"right",fontWeight:"600",color:"#c92a2a"},children:["-",Te(Rr)]})]}),s.jsxs("tr",{style:{borderTop:"1px solid #dee2e6",fontSize:"14px"},children:[s.jsx("td",{style:{padding:"10px 0",textAlign:"right",fontWeight:"bold"},children:"TNG THANH TON:"}),s.jsx("td",{style:{padding:"10px 0 10px 20px",textAlign:"right",fontWeight:"bold",fontSize:"16px",color:"#2f9e44"},children:Te(dn)})]})]})})}),s.jsxs("div",{style:{marginBottom:"20px",padding:"10px 12px",backgroundColor:"#f8f9fa",borderRadius:"4px",fontSize:"11px"},children:[s.jsxs("div",{style:{marginBottom:"4px"},children:[s.jsx("strong",{children:"Hnh thc thanh ton:"})," ",Nn==="cash"?"Tin mt":"Chuyn khon"]}),s.jsx("div",{style:{fontStyle:"italic",color:"#495057"},children:Gr==="full"?"  thanh ton ":Gr==="partial"?`Thanh ton mt phn: ${Te(Me)}`:"Ghi n"})]}),s.jsx("div",{style:{marginTop:"30px",borderTop:"1px solid #dee2e6",paddingTop:"20px"},children:s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"11px"},children:[s.jsxs("div",{style:{textAlign:"center",width:"40%"},children:[s.jsx("div",{style:{fontWeight:"bold",marginBottom:"50px",fontSize:"12px"},children:"Khch hng"}),s.jsx("div",{style:{fontStyle:"italic",color:"#868e96"},children:"(K v ghi r h tn)"})]}),s.jsxs("div",{style:{textAlign:"center",width:"40%"},children:[s.jsx("div",{style:{fontWeight:"bold",marginBottom:"50px",fontSize:"12px"},children:"Ngi bn hng"}),s.jsx("div",{style:{fontStyle:"italic",color:"#868e96"},children:"(K v ghi r h tn)"})]})]})}),s.jsxs("div",{style:{textAlign:"center",marginTop:"25px",paddingTop:"15px",borderTop:"1px dashed #adb5bd",fontSize:"11px",fontStyle:"italic",color:"#495057"},children:[s.jsxs("div",{style:{marginBottom:"5px",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},children:[s.jsx("span",{style:{display:"inline-flex"},children:"*"}),"Cm n qu khch  s dng dch v",s.jsx("span",{style:{display:"inline-flex"},children:"*"})]}),s.jsx("div",{children:"Hn gp li qu khch!"})]})]})}),Lt&&s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl w-full max-w-md mx-4",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-slate-200 dark:border-slate-700",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Thm khch hng mi"}),s.jsx("button",{onClick:()=>{ir(!1),Ge({name:"",phone:"",vehicleModel:"",licensePlate:""})},className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-200",children:s.jsx(Ap,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"p-4 space-y-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:["Tn khch hng ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",value:Mt.name,onChange:fe=>Ge({...Mt,name:fe.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500",placeholder:"Nhp tn khch hng"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:["S in thoi ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"tel",value:Mt.phone,onChange:fe=>Ge({...Mt,phone:fe.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500",placeholder:"Nhp s in thoi"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Dng xe"}),s.jsx("input",{type:"text",value:Mt.vehicleModel,onChange:fe=>Ge({...Mt,vehicleModel:fe.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500",placeholder:"VD: Honda SH 2023"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Bin s xe"}),s.jsx("input",{type:"text",value:Mt.licensePlate,onChange:fe=>Ge({...Mt,licensePlate:fe.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500",placeholder:"VD: 30A-12345"})]})]}),s.jsxs("div",{className:"flex gap-2 p-4 border-t border-slate-200 dark:border-slate-700",children:[s.jsx("button",{onClick:()=>{ir(!1),Ge({name:"",phone:"",vehicleModel:"",licensePlate:""})},className:"flex-1 px-4 py-2 bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-200 dark:hover:bg-slate-600",children:"Hy"}),s.jsx("button",{onClick:ml,className:"flex-1 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600",children:"Lu"})]})]})}),de&&et&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl w-full max-w-4xl max-h-[90vh] flex flex-col",children:[s.jsxs("div",{className:"bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 px-6 py-4 flex items-center justify-between rounded-t-xl flex-shrink-0",children:[s.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:"Xem trc ha n"}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("button",{onClick:Ns,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg flex items-center gap-2 transition",children:[s.jsx(iu,{className:"w-4 h-4"}),"In ha n"]}),s.jsx("button",{onClick:()=>{qe(!1),tt(null)},className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-300","aria-label":"ng",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"w-5 h-5",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]})]}),s.jsx("div",{className:"flex-1 overflow-y-auto p-6 bg-slate-100 dark:bg-slate-900",children:s.jsx("div",{className:"bg-white shadow-lg mx-auto",style:{width:"80mm",minHeight:"100mm",color:"#000"},children:s.jsxs("div",{style:{padding:"5mm"},children:[s.jsx("div",{style:{borderBottom:"2px solid #3b82f6",paddingBottom:"2mm",marginBottom:"3mm"},children:s.jsxs("div",{style:{textAlign:"center"},children:[(Ae==null?void 0:Ae.logo_url)&&s.jsx("img",{src:Ae.logo_url,alt:"Logo",style:{height:"12mm",width:"auto",objectFit:"contain",margin:"0 auto 2mm"}}),s.jsx("div",{style:{fontWeight:"bold",fontSize:"11pt",color:"#1e40af"},children:(Ae==null?void 0:Ae.store_name)||"Nhn Lm SmartCare"}),s.jsx("div",{style:{fontSize:"8pt",color:"#000",marginTop:"1mm"},children:(Ae==null?void 0:Ae.address)&&` ${Ae.address}`}),s.jsx("div",{style:{fontSize:"8pt",color:"#000"},children:(Ae==null?void 0:Ae.phone)&&` ${Ae.phone}`})]})}),s.jsxs("div",{style:{textAlign:"center",marginBottom:"3mm"},children:[s.jsx("h1",{style:{fontSize:"14pt",fontWeight:"bold",margin:"0",color:"#1e40af"},children:"HA N BN HNG"}),s.jsx("div",{style:{fontSize:"8pt",color:"#666",marginTop:"1mm"},children:new Date(et.date).toLocaleString("vi-VN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}),s.jsxs("div",{style:{fontSize:"8pt",fontWeight:"bold",marginTop:"0.5mm"},children:["M: ",Z1(et.id)||et.id]})]}),s.jsxs("div",{style:{border:"1px solid #ddd",padding:"2mm",marginBottom:"3mm",borderRadius:"2mm",backgroundColor:"#f8fafc",fontSize:"8.5pt"},children:[s.jsxs("div",{style:{marginBottom:"1mm"},children:[s.jsx("span",{style:{fontWeight:"bold"},children:"KH:"})," ",et.customer.name]}),et.customer.phone&&s.jsxs("div",{children:[s.jsx("span",{style:{fontWeight:"bold"},children:"ST:"})," ",et.customer.phone]})]}),s.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",marginBottom:"3mm",fontSize:"8.5pt"},children:[s.jsx("thead",{children:s.jsxs("tr",{style:{borderBottom:"1px solid #ddd"},children:[s.jsx("th",{style:{textAlign:"left",padding:"1mm",fontSize:"8pt"},children:"Sn phm"}),s.jsx("th",{style:{textAlign:"center",padding:"1mm",width:"15%",fontSize:"8pt"},children:"SL"}),s.jsx("th",{style:{textAlign:"right",padding:"1mm",width:"28%",fontSize:"8pt"},children:"Thnh tin"})]})}),s.jsx("tbody",{children:et.items.map((fe,vt)=>{const wr=fe.sellingPrice||fe.sellingprice||fe.price||0,Or=fe.quantity||0;return s.jsxs("tr",{style:{borderBottom:"1px dashed #ddd"},children:[s.jsx("td",{style:{padding:"1.5mm 1mm",fontSize:"8.5pt"},children:fe.partName||fe.partname}),s.jsx("td",{style:{textAlign:"center",padding:"1.5mm 1mm",fontSize:"8.5pt"},children:Or}),s.jsx("td",{style:{textAlign:"right",padding:"1.5mm 1mm",fontSize:"8.5pt",fontWeight:"bold"},children:Te(wr*Or)})]},vt)})})]}),s.jsxs("div",{style:{borderTop:"2px solid #333",paddingTop:"2mm",marginBottom:"3mm",fontSize:"9pt"},children:[et.discount>0&&s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"1mm",color:"#e74c3c"},children:[s.jsx("span",{children:"Gim gi:"}),s.jsxs("span",{children:["-",Te(et.discount)]})]}),s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontWeight:"bold",fontSize:"11pt"},children:[s.jsx("span",{children:"TNG CNG:"}),s.jsxs("span",{style:{color:"#2563eb"},children:[Te(et.total)," "]})]})]}),(Ae==null?void 0:Ae.bank_name)&&s.jsxs("div",{style:{borderTop:"1px dashed #999",paddingTop:"2mm",marginBottom:"3mm",fontSize:"7.5pt",textAlign:"center"},children:[s.jsxs("div",{style:{fontWeight:"bold",marginBottom:"1mm"},children:["Chuyn khon: ",Ae.bank_name]}),Ae.bank_account_number&&s.jsxs("div",{children:["STK: ",Ae.bank_account_number]}),Ae.bank_account_holder&&s.jsx("div",{style:{fontSize:"7pt"},children:Ae.bank_account_holder}),Ae.bank_qr_url&&s.jsx("div",{style:{marginTop:"2mm"},children:s.jsx("img",{src:Ae.bank_qr_url,alt:"QR Banking",style:{height:"20mm",width:"20mm",objectFit:"contain",margin:"0 auto"}})})]}),s.jsxs("div",{style:{textAlign:"center",fontSize:"7.5pt",color:"#666",borderTop:"1px dashed #999",paddingTop:"2mm"},children:[s.jsx("div",{children:"Cm n qu khch!"}),s.jsx("div",{children:"Hn gp li"})]})]})})})]})}),hr==="products"&&t.length>0&&s.jsxs("button",{onClick:()=>sr("cart"),className:"md:hidden fixed bottom-24 right-4 z-50 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white rounded-full shadow-2xl p-3 transition-all duration-200 hover:scale-105 active:scale-95","aria-label":"M gi hng",children:[s.jsxs("div",{className:"relative",children:[s.jsx(om,{className:"w-5 h-5"}),t.length>0&&s.jsx("span",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-[11px] font-bold rounded-full w-5 h-5 flex items-center justify-center animate-pulse",children:t.length})]}),s.jsx("div",{className:"absolute -top-1 -right-1 w-2.5 h-2.5 bg-red-500 rounded-full animate-ping"})]}),s.jsx(KA,{isOpen:ct,onClose:()=>Ke(!1),onScan:rn,title:"Qut m vch sn phm"})]})};/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var pk={};pk.version="0.18.5";var HV=1252,nye=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],XA={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},YA=function(e){nye.indexOf(e)!=-1&&(HV=XA[0]=e)};function aye(){YA(1252)}var au=function(e){YA(e)};function QA(){au(1200),aye()}function KD(e){for(var t=[],r=0,n=e.length;r<n;++r)t[r]=e.charCodeAt(r);return t}function sye(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r)+(e.charCodeAt(2*r+1)<<8));return t.join("")}function $V(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r+1)+(e.charCodeAt(2*r)<<8));return t.join("")}var Bg=function(e){var t=e.charCodeAt(0),r=e.charCodeAt(1);return t==255&&r==254?sye(e.slice(2)):t==254&&r==255?$V(e.slice(2)):t==65279?e.slice(1):e},J2=function(t){return String.fromCharCode(t)},XD=function(t){return String.fromCharCode(t)},jb,cf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function Cb(e){for(var t="",r=0,n=0,a=0,i=0,o=0,l=0,d=0,c=0;c<e.length;)r=e.charCodeAt(c++),i=r>>2,n=e.charCodeAt(c++),o=(r&3)<<4|n>>4,a=e.charCodeAt(c++),l=(n&15)<<2|a>>6,d=a&63,isNaN(n)?l=d=64:isNaN(a)&&(d=64),t+=cf.charAt(i)+cf.charAt(o)+cf.charAt(l)+cf.charAt(d);return t}function Uc(e){var t="",r=0,n=0,a=0,i=0,o=0,l=0,d=0;e=e.replace(/[^\w\+\/\=]/g,"");for(var c=0;c<e.length;)i=cf.indexOf(e.charAt(c++)),o=cf.indexOf(e.charAt(c++)),r=i<<2|o>>4,t+=String.fromCharCode(r),l=cf.indexOf(e.charAt(c++)),n=(o&15)<<4|l>>2,l!==64&&(t+=String.fromCharCode(n)),d=cf.indexOf(e.charAt(c++)),a=(l&3)<<6|d,d!==64&&(t+=String.fromCharCode(a));return t}var sa=(function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node})(),ph=(function(){if(typeof Buffer<"u"){var e=!Buffer.from;if(!e)try{Buffer.from("foo","utf8")}catch{e=!0}return e?function(t,r){return r?new Buffer(t,r):new Buffer(t)}:Buffer.from.bind(Buffer)}return function(){}})();function vf(e){return sa?Buffer.alloc?Buffer.alloc(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}function YD(e){return sa?Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}var Ic=function(t){return sa?ph(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)&255})};function R5(e){if(typeof ArrayBuffer>"u")return Ic(e);for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),n=0;n!=e.length;++n)r[n]=e.charCodeAt(n)&255;return t}function Ef(e){if(Array.isArray(e))return e.map(function(n){return String.fromCharCode(n)}).join("");for(var t=[],r=0;r<e.length;++r)t[r]=String.fromCharCode(e[r]);return t.join("")}function iye(e){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(e)}function ZA(e){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(e instanceof ArrayBuffer)return ZA(new Uint8Array(e));for(var t=new Array(e.length),r=0;r<e.length;++r)t[r]=e[r];return t}var jo=sa?function(e){return Buffer.concat(e.map(function(t){return Buffer.isBuffer(t)?t:ph(t)}))}:function(e){if(typeof Uint8Array<"u"){var t=0,r=0;for(t=0;t<e.length;++t)r+=e[t].length;var n=new Uint8Array(r),a=0;for(t=0,r=0;t<e.length;r+=a,++t)if(a=e[t].length,e[t]instanceof Uint8Array)n.set(e[t],r);else{if(typeof e[t]=="string")throw"wtf";n.set(new Uint8Array(e[t]),r)}return n}return[].concat.apply([],e.map(function(i){return Array.isArray(i)?i:[].slice.call(i)}))};function oye(e){for(var t=[],r=0,n=e.length+250,a=vf(e.length+255),i=0;i<e.length;++i){var o=e.charCodeAt(i);if(o<128)a[r++]=o;else if(o<2048)a[r++]=192|o>>6&31,a[r++]=128|o&63;else if(o>=55296&&o<57344){o=(o&1023)+64;var l=e.charCodeAt(++i)&1023;a[r++]=240|o>>8&7,a[r++]=128|o>>2&63,a[r++]=128|l>>6&15|(o&3)<<4,a[r++]=128|l&63}else a[r++]=224|o>>12&15,a[r++]=128|o>>6&63,a[r++]=128|o&63;r>n&&(t.push(a.slice(0,r)),r=0,a=vf(65535),n=65530)}return t.push(a.slice(0,r)),jo(t)}var Pl=/\u0000/g,Ug=/[\u0001-\u0006]/g;function E1(e){for(var t="",r=e.length-1;r>=0;)t+=e.charAt(r--);return t}function su(e,t){var r=""+e;return r.length>=t?r:mi("0",t-r.length)+r}function JA(e,t){var r=""+e;return r.length>=t?r:mi(" ",t-r.length)+r}function gk(e,t){var r=""+e;return r.length>=t?r:r+mi(" ",t-r.length)}function lye(e,t){var r=""+Math.round(e);return r.length>=t?r:mi("0",t-r.length)+r}function cye(e,t){var r=""+e;return r.length>=t?r:mi("0",t-r.length)+r}var QD=Math.pow(2,32);function s1(e,t){if(e>QD||e<-QD)return lye(e,t);var r=Math.round(e);return cye(r,t)}function bk(e,t){return t=t||0,e.length>=7+t&&(e.charCodeAt(t)|32)===103&&(e.charCodeAt(t+1)|32)===101&&(e.charCodeAt(t+2)|32)===110&&(e.charCodeAt(t+3)|32)===101&&(e.charCodeAt(t+4)|32)===114&&(e.charCodeAt(t+5)|32)===97&&(e.charCodeAt(t+6)|32)===108}var ZD=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],c_=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function dye(e){return e||(e={}),e[0]="General",e[1]="0",e[2]="0.00",e[3]="#,##0",e[4]="#,##0.00",e[9]="0%",e[10]="0.00%",e[11]="0.00E+00",e[12]="# ?/?",e[13]="# ??/??",e[14]="m/d/yy",e[15]="d-mmm-yy",e[16]="d-mmm",e[17]="mmm-yy",e[18]="h:mm AM/PM",e[19]="h:mm:ss AM/PM",e[20]="h:mm",e[21]="h:mm:ss",e[22]="m/d/yy h:mm",e[37]="#,##0 ;(#,##0)",e[38]="#,##0 ;[Red](#,##0)",e[39]="#,##0.00;(#,##0.00)",e[40]="#,##0.00;[Red](#,##0.00)",e[45]="mm:ss",e[46]="[h]:mm:ss",e[47]="mmss.0",e[48]="##0.0E+0",e[49]="@",e[56]='"/ "hh""mm""ss" "',e}var En={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},JD={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},uye={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function vk(e,t,r){for(var n=e<0?-1:1,a=e*n,i=0,o=1,l=0,d=1,c=0,u=0,x=Math.floor(a);c<t&&(x=Math.floor(a),l=x*o+i,u=x*c+d,!(a-x<5e-8));)a=1/(a-x),i=o,o=l,d=c,c=u;if(u>t&&(c>t?(u=d,l=i):(u=c,l=o)),!r)return[0,n*l,u];var b=Math.floor(n*l/u);return[b,n*l-b*u,u]}function hm(e,t,r){if(e>2958465||e<0)return null;var n=e|0,a=Math.floor(86400*(e-n)),i=0,o=[],l={D:n,T:a,u:86400*(e-n)-a,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(l.u)<1e-6&&(l.u=0),t&&t.date1904&&(n+=1462),l.u>.9999&&(l.u=0,++a==86400&&(l.T=a=0,++n,++l.D)),n===60)o=r?[1317,10,29]:[1900,2,29],i=3;else if(n===0)o=r?[1317,8,29]:[1900,1,0],i=6;else{n>60&&--n;var d=new Date(1900,0,1);d.setDate(d.getDate()+n-1),o=[d.getFullYear(),d.getMonth()+1,d.getDate()],i=d.getDay(),n<60&&(i=(i+6)%7),r&&(i=gye(d,o))}return l.y=o[0],l.m=o[1],l.d=o[2],l.S=a%60,a=Math.floor(a/60),l.M=a%60,a=Math.floor(a/60),l.H=a,l.q=i,l}var VV=new Date(1899,11,31,0,0,0),hye=VV.getTime(),fye=new Date(1900,2,1,0,0,0);function WV(e,t){var r=e.getTime();return t?r-=1461*24*60*60*1e3:e>=fye&&(r+=1440*60*1e3),(r-(hye+(e.getTimezoneOffset()-VV.getTimezoneOffset())*6e4))/(1440*60*1e3)}function eE(e){return e.indexOf(".")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function mye(e){return e.indexOf("E")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function xye(e){var t=e<0?12:11,r=eE(e.toFixed(12));return r.length<=t||(r=e.toPrecision(10),r.length<=t)?r:e.toExponential(5)}function pye(e){var t=eE(e.toFixed(11));return t.length>(e<0?12:11)||t==="0"||t==="-0"?e.toPrecision(6):t}function Ab(e){var t=Math.floor(Math.log(Math.abs(e))*Math.LOG10E),r;return t>=-4&&t<=-1?r=e.toPrecision(10+t):Math.abs(t)<=9?r=xye(e):t===10?r=e.toFixed(10).substr(0,12):r=pye(e),eE(mye(r.toUpperCase()))}function Qm(e,t){switch(typeof e){case"string":return e;case"boolean":return e?"TRUE":"FALSE";case"number":return(e|0)===e?e.toString(10):Ab(e);case"undefined":return"";case"object":if(e==null)return"";if(e instanceof Date)return Sd(14,WV(e,t&&t.date1904),t)}throw new Error("unsupported value in General format: "+e)}function gye(e,t){t[0]-=581;var r=e.getDay();return e<60&&(r=(r+6)%7),r}function bye(e,t,r,n){var a="",i=0,o=0,l=r.y,d,c=0;switch(e){case 98:l=r.y+543;case 121:switch(t.length){case 1:case 2:d=l%100,c=2;break;default:d=l%1e4,c=4;break}break;case 109:switch(t.length){case 1:case 2:d=r.m,c=t.length;break;case 3:return c_[r.m-1][1];case 5:return c_[r.m-1][0];default:return c_[r.m-1][2]}break;case 100:switch(t.length){case 1:case 2:d=r.d,c=t.length;break;case 3:return ZD[r.q][0];default:return ZD[r.q][1]}break;case 104:switch(t.length){case 1:case 2:d=1+(r.H+11)%12,c=t.length;break;default:throw"bad hour format: "+t}break;case 72:switch(t.length){case 1:case 2:d=r.H,c=t.length;break;default:throw"bad hour format: "+t}break;case 77:switch(t.length){case 1:case 2:d=r.M,c=t.length;break;default:throw"bad minute format: "+t}break;case 115:if(t!="s"&&t!="ss"&&t!=".0"&&t!=".00"&&t!=".000")throw"bad second format: "+t;return r.u===0&&(t=="s"||t=="ss")?su(r.S,t.length):(n>=2?o=n===3?1e3:100:o=n===1?10:1,i=Math.round(o*(r.S+r.u)),i>=60*o&&(i=0),t==="s"?i===0?"0":""+i/o:(a=su(i,2+n),t==="ss"?a.substr(0,2):"."+a.substr(2,t.length-1)));case 90:switch(t){case"[h]":case"[hh]":d=r.D*24+r.H;break;case"[m]":case"[mm]":d=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":d=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+t}c=t.length===3?1:2;break;case 101:d=l,c=1;break}var u=c>0?su(d,c):"";return u}function df(e){var t=3;if(e.length<=t)return e;for(var r=e.length%t,n=e.substr(0,r);r!=e.length;r+=t)n+=(n.length>0?",":"")+e.substr(r,t);return n}var GV=/%/g;function vye(e,t,r){var n=t.replace(GV,""),a=t.length-n.length;return K0(e,n,r*Math.pow(10,2*a))+mi("%",a)}function yye(e,t,r){for(var n=t.length-1;t.charCodeAt(n-1)===44;)--n;return K0(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}function KV(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+KV(e,-t);var a=e.indexOf(".");a===-1&&(a=e.indexOf("E"));var i=Math.floor(Math.log(t)*Math.LOG10E)%a;if(i<0&&(i+=a),r=(t/Math.pow(10,i)).toPrecision(n+1+(a+i)%a),r.indexOf("e")===-1){var o=Math.floor(Math.log(t)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(o-r.length+i):r+="E+"+(o-i);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,a)+"."+r.substr(2+a),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(l,d,c,u){return d+c+u.substr(0,(a+i)%a)+"."+u.substr(i)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var XV=/# (\?+)( ?)\/( ?)(\d+)/;function wye(e,t,r){var n=parseInt(e[4],10),a=Math.round(t*n),i=Math.floor(a/n),o=a-i*n,l=n;return r+(i===0?"":""+i)+" "+(o===0?mi(" ",e[1].length+1+e[4].length):JA(o,e[1].length)+e[2]+"/"+e[3]+su(l,e[4].length))}function kye(e,t,r){return r+(t===0?"":""+t)+mi(" ",e[1].length+2+e[4].length)}var YV=/^#*0*\.([0#]+)/,QV=/\).*[0#]/,ZV=/\(###\) ###\\?-####/;function jl(e){for(var t="",r,n=0;n!=e.length;++n)switch(r=e.charCodeAt(n)){case 35:break;case 63:t+=" ";break;case 48:t+="0";break;default:t+=String.fromCharCode(r)}return t}function eM(e,t){var r=Math.pow(10,t);return""+Math.round(e*r)/r}function tM(e,t){var r=e-Math.floor(e),n=Math.pow(10,t);return t<(""+Math.round(r*n)).length?0:Math.round(r*n)}function Nye(e,t){return t<(""+Math.round((e-Math.floor(e))*Math.pow(10,t))).length?1:0}function _ye(e){return e<2147483647&&e>-2147483648?""+(e>=0?e|0:e-1|0):""+Math.floor(e)}function dd(e,t,r){if(e.charCodeAt(0)===40&&!t.match(QV)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?dd("n",n,r):"("+dd("n",n,-r)+")"}if(t.charCodeAt(t.length-1)===44)return yye(e,t,r);if(t.indexOf("%")!==-1)return vye(e,t,r);if(t.indexOf("E")!==-1)return KV(t,r);if(t.charCodeAt(0)===36)return"$"+dd(e,t.substr(t.charAt(1)==" "?2:1),r);var a,i,o,l,d=Math.abs(r),c=r<0?"-":"";if(t.match(/^00+$/))return c+s1(d,t.length);if(t.match(/^[#?]+$/))return a=s1(r,0),a==="0"&&(a=""),a.length>t.length?a:jl(t.substr(0,t.length-a.length))+a;if(i=t.match(XV))return wye(i,d,c);if(t.match(/^#+0+$/))return c+s1(d,t.length-t.indexOf("0"));if(i=t.match(YV))return a=eM(r,i[1].length).replace(/^([^\.]+)$/,"$1."+jl(i[1])).replace(/\.$/,"."+jl(i[1])).replace(/\.(\d*)$/,function(k,y){return"."+y+mi("0",jl(i[1]).length-y.length)}),t.indexOf("0.")!==-1?a:a.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),i=t.match(/^(0*)\.(#*)$/))return c+eM(d,i[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=t.match(/^#{1,3},##0(\.?)$/))return c+df(s1(d,0));if(i=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+dd(e,t,-r):df(""+(Math.floor(r)+Nye(r,i[1].length)))+"."+su(tM(r,i[1].length),i[1].length);if(i=t.match(/^#,#*,#0/))return dd(e,t.replace(/^#,#*,/,""),r);if(i=t.match(/^([0#]+)(\\?-([0#]+))+$/))return a=E1(dd(e,t.replace(/[\\-]/g,""),r)),o=0,E1(E1(t.replace(/\\/g,"")).replace(/[0#]/g,function(k){return o<a.length?a.charAt(o++):k==="0"?"0":""}));if(t.match(ZV))return a=dd(e,"##########",r),"("+a.substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var u="";if(i=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(i[4].length,7),l=vk(d,Math.pow(10,o)-1,!1),a=""+c,u=K0("n",i[1],l[1]),u.charAt(u.length-1)==" "&&(u=u.substr(0,u.length-1)+"0"),a+=u+i[2]+"/"+i[3],u=gk(l[2],o),u.length<i[4].length&&(u=jl(i[4].substr(i[4].length-u.length))+u),a+=u,a;if(i=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(i[1].length,i[4].length),7),l=vk(d,Math.pow(10,o)-1,!0),c+(l[0]||(l[1]?"":"0"))+" "+(l[1]?JA(l[1],o)+i[2]+"/"+i[3]+gk(l[2],o):mi(" ",2*o+1+i[2].length+i[3].length));if(i=t.match(/^[#0?]+$/))return a=s1(r,0),t.length<=a.length?a:jl(t.substr(0,t.length-a.length))+a;if(i=t.match(/^([#0?]+)\.([#0]+)$/)){a=""+r.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),o=a.indexOf(".");var x=t.indexOf(".")-o,b=t.length-a.length-x;return jl(t.substr(0,x)+a+t.substr(t.length-b))}if(i=t.match(/^00,000\.([#0]*0)$/))return o=tM(r,i[1].length),r<0?"-"+dd(e,t,-r):df(_ye(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(k){return"00,"+(k.length<3?su(0,3-k.length):"")+k})+"."+su(o,i[1].length);switch(t){case"###,##0.00":return dd(e,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var g=df(s1(d,0));return g!=="0"?c+g:"";case"###,###.00":return dd(e,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return dd(e,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+t+"|")}function Sye(e,t,r){for(var n=t.length-1;t.charCodeAt(n-1)===44;)--n;return K0(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}function jye(e,t,r){var n=t.replace(GV,""),a=t.length-n.length;return K0(e,n,r*Math.pow(10,2*a))+mi("%",a)}function JV(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+JV(e,-t);var a=e.indexOf(".");a===-1&&(a=e.indexOf("E"));var i=Math.floor(Math.log(t)*Math.LOG10E)%a;if(i<0&&(i+=a),r=(t/Math.pow(10,i)).toPrecision(n+1+(a+i)%a),!r.match(/[Ee]/)){var o=Math.floor(Math.log(t)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(o-r.length+i):r+="E+"+(o-i),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(l,d,c,u){return d+c+u.substr(0,(a+i)%a)+"."+u.substr(i)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function Pu(e,t,r){if(e.charCodeAt(0)===40&&!t.match(QV)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?Pu("n",n,r):"("+Pu("n",n,-r)+")"}if(t.charCodeAt(t.length-1)===44)return Sye(e,t,r);if(t.indexOf("%")!==-1)return jye(e,t,r);if(t.indexOf("E")!==-1)return JV(t,r);if(t.charCodeAt(0)===36)return"$"+Pu(e,t.substr(t.charAt(1)==" "?2:1),r);var a,i,o,l,d=Math.abs(r),c=r<0?"-":"";if(t.match(/^00+$/))return c+su(d,t.length);if(t.match(/^[#?]+$/))return a=""+r,r===0&&(a=""),a.length>t.length?a:jl(t.substr(0,t.length-a.length))+a;if(i=t.match(XV))return kye(i,d,c);if(t.match(/^#+0+$/))return c+su(d,t.length-t.indexOf("0"));if(i=t.match(YV))return a=(""+r).replace(/^([^\.]+)$/,"$1."+jl(i[1])).replace(/\.$/,"."+jl(i[1])),a=a.replace(/\.(\d*)$/,function(k,y){return"."+y+mi("0",jl(i[1]).length-y.length)}),t.indexOf("0.")!==-1?a:a.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),i=t.match(/^(0*)\.(#*)$/))return c+(""+d).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=t.match(/^#{1,3},##0(\.?)$/))return c+df(""+d);if(i=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+Pu(e,t,-r):df(""+r)+"."+mi("0",i[1].length);if(i=t.match(/^#,#*,#0/))return Pu(e,t.replace(/^#,#*,/,""),r);if(i=t.match(/^([0#]+)(\\?-([0#]+))+$/))return a=E1(Pu(e,t.replace(/[\\-]/g,""),r)),o=0,E1(E1(t.replace(/\\/g,"")).replace(/[0#]/g,function(k){return o<a.length?a.charAt(o++):k==="0"?"0":""}));if(t.match(ZV))return a=Pu(e,"##########",r),"("+a.substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var u="";if(i=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(i[4].length,7),l=vk(d,Math.pow(10,o)-1,!1),a=""+c,u=K0("n",i[1],l[1]),u.charAt(u.length-1)==" "&&(u=u.substr(0,u.length-1)+"0"),a+=u+i[2]+"/"+i[3],u=gk(l[2],o),u.length<i[4].length&&(u=jl(i[4].substr(i[4].length-u.length))+u),a+=u,a;if(i=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(i[1].length,i[4].length),7),l=vk(d,Math.pow(10,o)-1,!0),c+(l[0]||(l[1]?"":"0"))+" "+(l[1]?JA(l[1],o)+i[2]+"/"+i[3]+gk(l[2],o):mi(" ",2*o+1+i[2].length+i[3].length));if(i=t.match(/^[#0?]+$/))return a=""+r,t.length<=a.length?a:jl(t.substr(0,t.length-a.length))+a;if(i=t.match(/^([#0]+)\.([#0]+)$/)){a=""+r.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),o=a.indexOf(".");var x=t.indexOf(".")-o,b=t.length-a.length-x;return jl(t.substr(0,x)+a+t.substr(t.length-b))}if(i=t.match(/^00,000\.([#0]*0)$/))return r<0?"-"+Pu(e,t,-r):df(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(k){return"00,"+(k.length<3?su(0,3-k.length):"")+k})+"."+su(0,i[1].length);switch(t){case"###,###":case"##,###":case"#,###":var g=df(""+d);return g!=="0"?c+g:"";default:if(t.match(/\.[0#?]*$/))return Pu(e,t.slice(0,t.lastIndexOf(".")),r)+jl(t.slice(t.lastIndexOf(".")))}throw new Error("unsupported format |"+t+"|")}function K0(e,t,r){return(r|0)===r?Pu(e,t,r):dd(e,t,r)}function Cye(e){for(var t=[],r=!1,n=0,a=0;n<e.length;++n)switch(e.charCodeAt(n)){case 34:r=!r;break;case 95:case 42:case 92:++n;break;case 59:t[t.length]=e.substr(a,n-a),a=n+1}if(t[t.length]=e.substr(a),r===!0)throw new Error("Format |"+e+"| unterminated string ");return t}var eW=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function Ep(e){for(var t=0,r="",n="";t<e.length;)switch(r=e.charAt(t)){case"G":bk(e,t)&&(t+=6),t++;break;case'"':for(;e.charCodeAt(++t)!==34&&t<e.length;);++t;break;case"\\":t+=2;break;case"_":t+=2;break;case"@":++t;break;case"B":case"b":if(e.charAt(t+1)==="1"||e.charAt(t+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(e.substr(t,3).toUpperCase()==="A/P"||e.substr(t,5).toUpperCase()==="AM/PM"||e.substr(t,5).toUpperCase()==="/")return!0;++t;break;case"[":for(n=r;e.charAt(t++)!=="]"&&t<e.length;)n+=e.charAt(t);if(n.match(eW))return!0;break;case".":case"0":case"#":for(;t<e.length&&("0#?.,E+-%".indexOf(r=e.charAt(++t))>-1||r=="\\"&&e.charAt(t+1)=="-"&&"0#".indexOf(e.charAt(t+2))>-1););break;case"?":for(;e.charAt(++t)===r;);break;case"*":++t,(e.charAt(t)==" "||e.charAt(t)=="*")&&++t;break;case"(":case")":++t;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;t<e.length&&"0123456789".indexOf(e.charAt(++t))>-1;);break;case" ":++t;break;default:++t;break}return!1}function Aye(e,t,r,n){for(var a=[],i="",o=0,l="",d="t",c,u,x,b="H";o<e.length;)switch(l=e.charAt(o)){case"G":if(!bk(e,o))throw new Error("unrecognized character "+l+" in "+e);a[a.length]={t:"G",v:"General"},o+=7;break;case'"':for(i="";(x=e.charCodeAt(++o))!==34&&o<e.length;)i+=String.fromCharCode(x);a[a.length]={t:"t",v:i},++o;break;case"\\":var g=e.charAt(++o),k=g==="("||g===")"?g:"t";a[a.length]={t:k,v:g},++o;break;case"_":a[a.length]={t:"t",v:" "},o+=2;break;case"@":a[a.length]={t:"T",v:t},++o;break;case"B":case"b":if(e.charAt(o+1)==="1"||e.charAt(o+1)==="2"){if(c==null&&(c=hm(t,r,e.charAt(o+1)==="2"),c==null))return"";a[a.length]={t:"X",v:e.substr(o,2)},d=l,o+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":l=l.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(t<0||c==null&&(c=hm(t,r),c==null))return"";for(i=l;++o<e.length&&e.charAt(o).toLowerCase()===l;)i+=l;l==="m"&&d.toLowerCase()==="h"&&(l="M"),l==="h"&&(l=b),a[a.length]={t:l,v:i},d=l;break;case"A":case"a":case"":var y={t:l,v:l};if(c==null&&(c=hm(t,r)),e.substr(o,3).toUpperCase()==="A/P"?(c!=null&&(y.v=c.H>=12?"P":"A"),y.t="T",b="h",o+=3):e.substr(o,5).toUpperCase()==="AM/PM"?(c!=null&&(y.v=c.H>=12?"PM":"AM"),y.t="T",o+=5,b="h"):e.substr(o,5).toUpperCase()==="/"?(c!=null&&(y.v=c.H>=12?"":""),y.t="T",o+=5,b="h"):(y.t="t",++o),c==null&&y.t==="T")return"";a[a.length]=y,d=l;break;case"[":for(i=l;e.charAt(o++)!=="]"&&o<e.length;)i+=e.charAt(o);if(i.slice(-1)!=="]")throw'unterminated "[" block: |'+i+"|";if(i.match(eW)){if(c==null&&(c=hm(t,r),c==null))return"";a[a.length]={t:"Z",v:i.toLowerCase()},d=i.charAt(1)}else i.indexOf("$")>-1&&(i=(i.match(/\$([^-\[\]]*)/)||[])[1]||"$",Ep(e)||(a[a.length]={t:"t",v:i}));break;case".":if(c!=null){for(i=l;++o<e.length&&(l=e.charAt(o))==="0";)i+=l;a[a.length]={t:"s",v:i};break}case"0":case"#":for(i=l;++o<e.length&&"0#?.,E+-%".indexOf(l=e.charAt(o))>-1;)i+=l;a[a.length]={t:"n",v:i};break;case"?":for(i=l;e.charAt(++o)===l;)i+=l;a[a.length]={t:l,v:i},d=l;break;case"*":++o,(e.charAt(o)==" "||e.charAt(o)=="*")&&++o;break;case"(":case")":a[a.length]={t:n===1?"t":l,v:l},++o;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(i=l;o<e.length&&"0123456789".indexOf(e.charAt(++o))>-1;)i+=e.charAt(o);a[a.length]={t:"D",v:i};break;case" ":a[a.length]={t:l,v:l},++o;break;case"$":a[a.length]={t:"t",v:"$"},++o;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(l)===-1)throw new Error("unrecognized character "+l+" in "+e);a[a.length]={t:"t",v:l},++o;break}var N=0,S=0,O;for(o=a.length-1,d="t";o>=0;--o)switch(a[o].t){case"h":case"H":a[o].t=b,d="h",N<1&&(N=1);break;case"s":(O=a[o].v.match(/\.0+$/))&&(S=Math.max(S,O[0].length-1)),N<3&&(N=3);case"d":case"y":case"M":case"e":d=a[o].t;break;case"m":d==="s"&&(a[o].t="M",N<2&&(N=2));break;case"X":break;case"Z":N<1&&a[o].v.match(/[Hh]/)&&(N=1),N<2&&a[o].v.match(/[Mm]/)&&(N=2),N<3&&a[o].v.match(/[Ss]/)&&(N=3)}switch(N){case 0:break;case 1:c.u>=.5&&(c.u=0,++c.S),c.S>=60&&(c.S=0,++c.M),c.M>=60&&(c.M=0,++c.H);break;case 2:c.u>=.5&&(c.u=0,++c.S),c.S>=60&&(c.S=0,++c.M);break}var A="",P;for(o=0;o<a.length;++o)switch(a[o].t){case"t":case"T":case" ":case"D":break;case"X":a[o].v="",a[o].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":a[o].v=bye(a[o].t.charCodeAt(0),a[o].v,c,S),a[o].t="t";break;case"n":case"?":for(P=o+1;a[P]!=null&&((l=a[P].t)==="?"||l==="D"||(l===" "||l==="t")&&a[P+1]!=null&&(a[P+1].t==="?"||a[P+1].t==="t"&&a[P+1].v==="/")||a[o].t==="("&&(l===" "||l==="n"||l===")")||l==="t"&&(a[P].v==="/"||a[P].v===" "&&a[P+1]!=null&&a[P+1].t=="?"));)a[o].v+=a[P].v,a[P]={v:"",t:";"},++P;A+=a[o].v,o=P-1;break;case"G":a[o].t="t",a[o].v=Qm(t,r);break}var q="",W,R;if(A.length>0){A.charCodeAt(0)==40?(W=t<0&&A.charCodeAt(0)===45?-t:t,R=K0("n",A,W)):(W=t<0&&n>1?-t:t,R=K0("n",A,W),W<0&&a[0]&&a[0].t=="t"&&(R=R.substr(1),a[0].v="-"+a[0].v)),P=R.length-1;var U=a.length;for(o=0;o<a.length;++o)if(a[o]!=null&&a[o].t!="t"&&a[o].v.indexOf(".")>-1){U=o;break}var L=a.length;if(U===a.length&&R.indexOf("E")===-1){for(o=a.length-1;o>=0;--o)a[o]==null||"n?".indexOf(a[o].t)===-1||(P>=a[o].v.length-1?(P-=a[o].v.length,a[o].v=R.substr(P+1,a[o].v.length)):P<0?a[o].v="":(a[o].v=R.substr(0,P+1),P=-1),a[o].t="t",L=o);P>=0&&L<a.length&&(a[L].v=R.substr(0,P+1)+a[L].v)}else if(U!==a.length&&R.indexOf("E")===-1){for(P=R.indexOf(".")-1,o=U;o>=0;--o)if(!(a[o]==null||"n?".indexOf(a[o].t)===-1)){for(u=a[o].v.indexOf(".")>-1&&o===U?a[o].v.indexOf(".")-1:a[o].v.length-1,q=a[o].v.substr(u+1);u>=0;--u)P>=0&&(a[o].v.charAt(u)==="0"||a[o].v.charAt(u)==="#")&&(q=R.charAt(P--)+q);a[o].v=q,a[o].t="t",L=o}for(P>=0&&L<a.length&&(a[L].v=R.substr(0,P+1)+a[L].v),P=R.indexOf(".")+1,o=U;o<a.length;++o)if(!(a[o]==null||"n?(".indexOf(a[o].t)===-1&&o!==U)){for(u=a[o].v.indexOf(".")>-1&&o===U?a[o].v.indexOf(".")+1:0,q=a[o].v.substr(0,u);u<a[o].v.length;++u)P<R.length&&(q+=R.charAt(P++));a[o].v=q,a[o].t="t",L=o}}}for(o=0;o<a.length;++o)a[o]!=null&&"n?".indexOf(a[o].t)>-1&&(W=n>1&&t<0&&o>0&&a[o-1].v==="-"?-t:t,a[o].v=K0(a[o].t,a[o].v,W),a[o].t="t");var Q="";for(o=0;o!==a.length;++o)a[o]!=null&&(Q+=a[o].v);return Q}var rM=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function nM(e,t){if(t==null)return!1;var r=parseFloat(t[2]);switch(t[1]){case"=":if(e==r)return!0;break;case">":if(e>r)return!0;break;case"<":if(e<r)return!0;break;case"<>":if(e!=r)return!0;break;case">=":if(e>=r)return!0;break;case"<=":if(e<=r)return!0;break}return!1}function Eye(e,t){var r=Cye(e),n=r.length,a=r[n-1].indexOf("@");if(n<4&&a>-1&&--n,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof t!="number")return[4,r.length===4||a>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=a>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=a>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=a>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var i=t>0?r[0]:t<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[n,i];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var o=r[0].match(rM),l=r[1].match(rM);return nM(t,o)?[n,r[0]]:nM(t,l)?[n,r[1]]:[n,r[o!=null&&l!=null?2:1]]}return[n,i]}function Sd(e,t,r){r==null&&(r={});var n="";switch(typeof e){case"string":e=="m/d/yy"&&r.dateNF?n=r.dateNF:n=e;break;case"number":e==14&&r.dateNF?n=r.dateNF:n=(r.table!=null?r.table:En)[e],n==null&&(n=r.table&&r.table[JD[e]]||En[JD[e]]),n==null&&(n=uye[e]||"General");break}if(bk(n,0))return Qm(t,r);t instanceof Date&&(t=WV(t,r.date1904));var a=Eye(n,t);if(bk(a[1]))return Qm(t,r);if(t===!0)t="TRUE";else if(t===!1)t="FALSE";else if(t===""||t==null)return"";return Aye(a[1],t,r,a[0])}function X0(e,t){if(typeof t!="number"){t=+t||-1;for(var r=0;r<392;++r){if(En[r]==null){t<0&&(t=r);continue}if(En[r]==e){t=r;break}}t<0&&(t=391)}return En[t]=e,t}function F5(e){for(var t=0;t!=392;++t)e[t]!==void 0&&X0(e[t],t)}function Tp(){En=dye()}var Tye={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},tW=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function Oye(e){var t=typeof e=="number"?En[e]:e;return t=t.replace(tW,"(\\d+)"),new RegExp("^"+t+"$")}function Pye(e,t,r){var n=-1,a=-1,i=-1,o=-1,l=-1,d=-1;(t.match(tW)||[]).forEach(function(x,b){var g=parseInt(r[b+1],10);switch(x.toLowerCase().charAt(0)){case"y":n=g;break;case"d":i=g;break;case"h":o=g;break;case"s":d=g;break;case"m":o>=0?l=g:a=g;break}}),d>=0&&l==-1&&a>=0&&(l=a,a=-1);var c=(""+(n>=0?n:new Date().getFullYear())).slice(-4)+"-"+("00"+(a>=1?a:1)).slice(-2)+"-"+("00"+(i>=1?i:1)).slice(-2);c.length==7&&(c="0"+c),c.length==8&&(c="20"+c);var u=("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2)+":"+("00"+(d>=0?d:0)).slice(-2);return o==-1&&l==-1&&d==-1?c:n==-1&&a==-1&&i==-1?u:c+"T"+u}var Iye=(function(){var e={};e.version="1.2.0";function t(){for(var R=0,U=new Array(256),L=0;L!=256;++L)R=L,R=R&1?-306674912^R>>>1:R>>>1,R=R&1?-306674912^R>>>1:R>>>1,R=R&1?-306674912^R>>>1:R>>>1,R=R&1?-306674912^R>>>1:R>>>1,R=R&1?-306674912^R>>>1:R>>>1,R=R&1?-306674912^R>>>1:R>>>1,R=R&1?-306674912^R>>>1:R>>>1,R=R&1?-306674912^R>>>1:R>>>1,U[L]=R;return typeof Int32Array<"u"?new Int32Array(U):U}var r=t();function n(R){var U=0,L=0,Q=0,H=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(Q=0;Q!=256;++Q)H[Q]=R[Q];for(Q=0;Q!=256;++Q)for(L=R[Q],U=256+Q;U<4096;U+=256)L=H[U]=L>>>8^R[L&255];var G=[];for(Q=1;Q!=16;++Q)G[Q-1]=typeof Int32Array<"u"?H.subarray(Q*256,Q*256+256):H.slice(Q*256,Q*256+256);return G}var a=n(r),i=a[0],o=a[1],l=a[2],d=a[3],c=a[4],u=a[5],x=a[6],b=a[7],g=a[8],k=a[9],y=a[10],N=a[11],S=a[12],O=a[13],A=a[14];function P(R,U){for(var L=U^-1,Q=0,H=R.length;Q<H;)L=L>>>8^r[(L^R.charCodeAt(Q++))&255];return~L}function q(R,U){for(var L=U^-1,Q=R.length-15,H=0;H<Q;)L=A[R[H++]^L&255]^O[R[H++]^L>>8&255]^S[R[H++]^L>>16&255]^N[R[H++]^L>>>24]^y[R[H++]]^k[R[H++]]^g[R[H++]]^b[R[H++]]^x[R[H++]]^u[R[H++]]^c[R[H++]]^d[R[H++]]^l[R[H++]]^o[R[H++]]^i[R[H++]]^r[R[H++]];for(Q+=15;H<Q;)L=L>>>8^r[(L^R[H++])&255];return~L}function W(R,U){for(var L=U^-1,Q=0,H=R.length,G=0,Z=0;Q<H;)G=R.charCodeAt(Q++),G<128?L=L>>>8^r[(L^G)&255]:G<2048?(L=L>>>8^r[(L^(192|G>>6&31))&255],L=L>>>8^r[(L^(128|G&63))&255]):G>=55296&&G<57344?(G=(G&1023)+64,Z=R.charCodeAt(Q++)&1023,L=L>>>8^r[(L^(240|G>>8&7))&255],L=L>>>8^r[(L^(128|G>>2&63))&255],L=L>>>8^r[(L^(128|Z>>6&15|(G&3)<<4))&255],L=L>>>8^r[(L^(128|Z&63))&255]):(L=L>>>8^r[(L^(224|G>>12&15))&255],L=L>>>8^r[(L^(128|G>>6&63))&255],L=L>>>8^r[(L^(128|G&63))&255]);return~L}return e.table=r,e.bstr=P,e.buf=q,e.str=W,e})(),yn=(function(){var t={};t.version="1.2.1";function r(Ne,Me){for(var Re=Ne.split("/"),Ce=Me.split("/"),Ue=0,de=0,qe=Math.min(Re.length,Ce.length);Ue<qe;++Ue){if(de=Re[Ue].length-Ce[Ue].length)return de;if(Re[Ue]!=Ce[Ue])return Re[Ue]<Ce[Ue]?-1:1}return Re.length-Ce.length}function n(Ne){if(Ne.charAt(Ne.length-1)=="/")return Ne.slice(0,-1).indexOf("/")===-1?Ne:n(Ne.slice(0,-1));var Me=Ne.lastIndexOf("/");return Me===-1?Ne:Ne.slice(0,Me+1)}function a(Ne){if(Ne.charAt(Ne.length-1)=="/")return a(Ne.slice(0,-1));var Me=Ne.lastIndexOf("/");return Me===-1?Ne:Ne.slice(Me+1)}function i(Ne,Me){typeof Me=="string"&&(Me=new Date(Me));var Re=Me.getHours();Re=Re<<6|Me.getMinutes(),Re=Re<<5|Me.getSeconds()>>>1,Ne.write_shift(2,Re);var Ce=Me.getFullYear()-1980;Ce=Ce<<4|Me.getMonth()+1,Ce=Ce<<5|Me.getDate(),Ne.write_shift(2,Ce)}function o(Ne){var Me=Ne.read_shift(2)&65535,Re=Ne.read_shift(2)&65535,Ce=new Date,Ue=Re&31;Re>>>=5;var de=Re&15;Re>>>=4,Ce.setMilliseconds(0),Ce.setFullYear(Re+1980),Ce.setMonth(de-1),Ce.setDate(Ue);var qe=Me&31;Me>>>=5;var et=Me&63;return Me>>>=6,Ce.setHours(Me),Ce.setMinutes(et),Ce.setSeconds(qe<<1),Ce}function l(Ne){Uo(Ne,0);for(var Me={},Re=0;Ne.l<=Ne.length-4;){var Ce=Ne.read_shift(2),Ue=Ne.read_shift(2),de=Ne.l+Ue,qe={};switch(Ce){case 21589:Re=Ne.read_shift(1),Re&1&&(qe.mtime=Ne.read_shift(4)),Ue>5&&(Re&2&&(qe.atime=Ne.read_shift(4)),Re&4&&(qe.ctime=Ne.read_shift(4))),qe.mtime&&(qe.mt=new Date(qe.mtime*1e3));break}Ne.l=de,Me[Ce]=qe}return Me}var d;function c(){return d||(d={})}function u(Ne,Me){if(Ne[0]==80&&Ne[1]==75)return ir(Ne,Me);if((Ne[0]|32)==109&&(Ne[1]|32)==105)return cr(Ne,Me);if(Ne.length<512)throw new Error("CFB file size "+Ne.length+" < 512");var Re=3,Ce=512,Ue=0,de=0,qe=0,et=0,tt=0,Ae=[],Xe=Ne.slice(0,512);Uo(Xe,0);var mt=x(Xe);switch(Re=mt[0],Re){case 3:Ce=512;break;case 4:Ce=4096;break;case 0:if(mt[1]==0)return ir(Ne,Me);default:throw new Error("Major Version: Expected 3 or 4 saw "+Re)}Ce!==512&&(Xe=Ne.slice(0,Ce),Uo(Xe,28));var Tt=Ne.slice(0,Ce);b(Xe,Re);var Rt=Xe.read_shift(4,"i");if(Re===3&&Rt!==0)throw new Error("# Directory Sectors: Expected 0 saw "+Rt);Xe.l+=4,qe=Xe.read_shift(4,"i"),Xe.l+=4,Xe.chk("00100000","Mini Stream Cutoff Size: "),et=Xe.read_shift(4,"i"),Ue=Xe.read_shift(4,"i"),tt=Xe.read_shift(4,"i"),de=Xe.read_shift(4,"i");for(var Yt=-1,or=0;or<109&&(Yt=Xe.read_shift(4,"i"),!(Yt<0));++or)Ae[or]=Yt;var Cr=g(Ne,Ce);N(tt,de,Cr,Ce,Ae);var Et=O(Cr,qe,Ae,Ce);Et[qe].name="!Directory",Ue>0&&et!==Z&&(Et[et].name="!MiniFAT"),Et[Ae[0]].name="!FAT",Et.fat_addrs=Ae,Et.ssz=Ce;var dn={},Zr=[],ia=[],ta=[];A(qe,Et,Cr,Zr,Ue,dn,ia,et),k(ia,ta,Zr),Zr.shift();var Jr={FileIndex:ia,FullPaths:ta};return Me&&Me.raw&&(Jr.raw={header:Tt,sectors:Cr}),Jr}function x(Ne){if(Ne[Ne.l]==80&&Ne[Ne.l+1]==75)return[0,0];Ne.chk(te,"Header Signature: "),Ne.l+=16;var Me=Ne.read_shift(2,"u");return[Ne.read_shift(2,"u"),Me]}function b(Ne,Me){var Re=9;switch(Ne.l+=2,Re=Ne.read_shift(2)){case 9:if(Me!=3)throw new Error("Sector Shift: Expected 9 saw "+Re);break;case 12:if(Me!=4)throw new Error("Sector Shift: Expected 12 saw "+Re);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+Re)}Ne.chk("0600","Mini Sector Shift: "),Ne.chk("000000000000","Reserved: ")}function g(Ne,Me){for(var Re=Math.ceil(Ne.length/Me)-1,Ce=[],Ue=1;Ue<Re;++Ue)Ce[Ue-1]=Ne.slice(Ue*Me,(Ue+1)*Me);return Ce[Re-1]=Ne.slice(Re*Me),Ce}function k(Ne,Me,Re){for(var Ce=0,Ue=0,de=0,qe=0,et=0,tt=Re.length,Ae=[],Xe=[];Ce<tt;++Ce)Ae[Ce]=Xe[Ce]=Ce,Me[Ce]=Re[Ce];for(;et<Xe.length;++et)Ce=Xe[et],Ue=Ne[Ce].L,de=Ne[Ce].R,qe=Ne[Ce].C,Ae[Ce]===Ce&&(Ue!==-1&&Ae[Ue]!==Ue&&(Ae[Ce]=Ae[Ue]),de!==-1&&Ae[de]!==de&&(Ae[Ce]=Ae[de])),qe!==-1&&(Ae[qe]=Ce),Ue!==-1&&Ce!=Ae[Ce]&&(Ae[Ue]=Ae[Ce],Xe.lastIndexOf(Ue)<et&&Xe.push(Ue)),de!==-1&&Ce!=Ae[Ce]&&(Ae[de]=Ae[Ce],Xe.lastIndexOf(de)<et&&Xe.push(de));for(Ce=1;Ce<tt;++Ce)Ae[Ce]===Ce&&(de!==-1&&Ae[de]!==de?Ae[Ce]=Ae[de]:Ue!==-1&&Ae[Ue]!==Ue&&(Ae[Ce]=Ae[Ue]));for(Ce=1;Ce<tt;++Ce)if(Ne[Ce].type!==0){if(et=Ce,et!=Ae[et])do et=Ae[et],Me[Ce]=Me[et]+"/"+Me[Ce];while(et!==0&&Ae[et]!==-1&&et!=Ae[et]);Ae[Ce]=-1}for(Me[0]+="/",Ce=1;Ce<tt;++Ce)Ne[Ce].type!==2&&(Me[Ce]+="/")}function y(Ne,Me,Re){for(var Ce=Ne.start,Ue=Ne.size,de=[],qe=Ce;Re&&Ue>0&&qe>=0;)de.push(Me.slice(qe*G,qe*G+G)),Ue-=G,qe=am(Re,qe*4);return de.length===0?Ht(0):jo(de).slice(0,Ne.size)}function N(Ne,Me,Re,Ce,Ue){var de=Z;if(Ne===Z){if(Me!==0)throw new Error("DIFAT chain shorter than expected")}else if(Ne!==-1){var qe=Re[Ne],et=(Ce>>>2)-1;if(!qe)return;for(var tt=0;tt<et&&(de=am(qe,tt*4))!==Z;++tt)Ue.push(de);N(am(qe,Ce-4),Me-1,Re,Ce,Ue)}}function S(Ne,Me,Re,Ce,Ue){var de=[],qe=[];Ue||(Ue=[]);var et=Ce-1,tt=0,Ae=0;for(tt=Me;tt>=0;){Ue[tt]=!0,de[de.length]=tt,qe.push(Ne[tt]);var Xe=Re[Math.floor(tt*4/Ce)];if(Ae=tt*4&et,Ce<4+Ae)throw new Error("FAT boundary crossed: "+tt+" 4 "+Ce);if(!Ne[Xe])break;tt=am(Ne[Xe],Ae)}return{nodes:de,data:xM([qe])}}function O(Ne,Me,Re,Ce){var Ue=Ne.length,de=[],qe=[],et=[],tt=[],Ae=Ce-1,Xe=0,mt=0,Tt=0,Rt=0;for(Xe=0;Xe<Ue;++Xe)if(et=[],Tt=Xe+Me,Tt>=Ue&&(Tt-=Ue),!qe[Tt]){tt=[];var Yt=[];for(mt=Tt;mt>=0;){Yt[mt]=!0,qe[mt]=!0,et[et.length]=mt,tt.push(Ne[mt]);var or=Re[Math.floor(mt*4/Ce)];if(Rt=mt*4&Ae,Ce<4+Rt)throw new Error("FAT boundary crossed: "+mt+" 4 "+Ce);if(!Ne[or]||(mt=am(Ne[or],Rt),Yt[mt]))break}de[Tt]={nodes:et,data:xM([tt])}}return de}function A(Ne,Me,Re,Ce,Ue,de,qe,et){for(var tt=0,Ae=Ce.length?2:0,Xe=Me[Ne].data,mt=0,Tt=0,Rt;mt<Xe.length;mt+=128){var Yt=Xe.slice(mt,mt+128);Uo(Yt,64),Tt=Yt.read_shift(2),Rt=oE(Yt,0,Tt-Ae),Ce.push(Rt);var or={name:Rt,type:Yt.read_shift(1),color:Yt.read_shift(1),L:Yt.read_shift(4,"i"),R:Yt.read_shift(4,"i"),C:Yt.read_shift(4,"i"),clsid:Yt.read_shift(16),state:Yt.read_shift(4,"i"),start:0,size:0},Cr=Yt.read_shift(2)+Yt.read_shift(2)+Yt.read_shift(2)+Yt.read_shift(2);Cr!==0&&(or.ct=P(Yt,Yt.l-8));var Et=Yt.read_shift(2)+Yt.read_shift(2)+Yt.read_shift(2)+Yt.read_shift(2);Et!==0&&(or.mt=P(Yt,Yt.l-8)),or.start=Yt.read_shift(4,"i"),or.size=Yt.read_shift(4,"i"),or.size<0&&or.start<0&&(or.size=or.type=0,or.start=Z,or.name=""),or.type===5?(tt=or.start,Ue>0&&tt!==Z&&(Me[tt].name="!StreamData")):or.size>=4096?(or.storage="fat",Me[or.start]===void 0&&(Me[or.start]=S(Re,or.start,Me.fat_addrs,Me.ssz)),Me[or.start].name=or.name,or.content=Me[or.start].data.slice(0,or.size)):(or.storage="minifat",or.size<0?or.size=0:tt!==Z&&or.start!==Z&&Me[tt]&&(or.content=y(or,Me[tt].data,(Me[et]||{}).data))),or.content&&Uo(or.content,0),de[Rt]=or,qe.push(or)}}function P(Ne,Me){return new Date((Ec(Ne,Me+4)/1e7*Math.pow(2,32)+Ec(Ne,Me)/1e7-11644473600)*1e3)}function q(Ne,Me){return c(),u(d.readFileSync(Ne),Me)}function W(Ne,Me){var Re=Me&&Me.type;switch(Re||sa&&Buffer.isBuffer(Ne)&&(Re="buffer"),Re||"base64"){case"file":return q(Ne,Me);case"base64":return u(Ic(Uc(Ne)),Me);case"binary":return u(Ic(Ne),Me)}return u(Ne,Me)}function R(Ne,Me){var Re=Me||{},Ce=Re.root||"Root Entry";if(Ne.FullPaths||(Ne.FullPaths=[]),Ne.FileIndex||(Ne.FileIndex=[]),Ne.FullPaths.length!==Ne.FileIndex.length)throw new Error("inconsistent CFB structure");Ne.FullPaths.length===0&&(Ne.FullPaths[0]=Ce+"/",Ne.FileIndex[0]={name:Ce,type:5}),Re.CLSID&&(Ne.FileIndex[0].clsid=Re.CLSID),U(Ne)}function U(Ne){var Me="Sh33tJ5";if(!yn.find(Ne,"/"+Me)){var Re=Ht(4);Re[0]=55,Re[1]=Re[3]=50,Re[2]=54,Ne.FileIndex.push({name:Me,type:2,content:Re,size:4,L:69,R:69,C:69}),Ne.FullPaths.push(Ne.FullPaths[0]+Me),L(Ne)}}function L(Ne,Me){R(Ne);for(var Re=!1,Ce=!1,Ue=Ne.FullPaths.length-1;Ue>=0;--Ue){var de=Ne.FileIndex[Ue];switch(de.type){case 0:Ce?Re=!0:(Ne.FileIndex.pop(),Ne.FullPaths.pop());break;case 1:case 2:case 5:Ce=!0,isNaN(de.R*de.L*de.C)&&(Re=!0),de.R>-1&&de.L>-1&&de.R==de.L&&(Re=!0);break;default:Re=!0;break}}if(!(!Re&&!Me)){var qe=new Date(1987,1,19),et=0,tt=Object.create?Object.create(null):{},Ae=[];for(Ue=0;Ue<Ne.FullPaths.length;++Ue)tt[Ne.FullPaths[Ue]]=!0,Ne.FileIndex[Ue].type!==0&&Ae.push([Ne.FullPaths[Ue],Ne.FileIndex[Ue]]);for(Ue=0;Ue<Ae.length;++Ue){var Xe=n(Ae[Ue][0]);Ce=tt[Xe],Ce||(Ae.push([Xe,{name:a(Xe).replace("/",""),type:1,clsid:ue,ct:qe,mt:qe,content:null}]),tt[Xe]=!0)}for(Ae.sort(function(Rt,Yt){return r(Rt[0],Yt[0])}),Ne.FullPaths=[],Ne.FileIndex=[],Ue=0;Ue<Ae.length;++Ue)Ne.FullPaths[Ue]=Ae[Ue][0],Ne.FileIndex[Ue]=Ae[Ue][1];for(Ue=0;Ue<Ae.length;++Ue){var mt=Ne.FileIndex[Ue],Tt=Ne.FullPaths[Ue];if(mt.name=a(Tt).replace("/",""),mt.L=mt.R=mt.C=-(mt.color=1),mt.size=mt.content?mt.content.length:0,mt.start=0,mt.clsid=mt.clsid||ue,Ue===0)mt.C=Ae.length>1?1:-1,mt.size=0,mt.type=5;else if(Tt.slice(-1)=="/"){for(et=Ue+1;et<Ae.length&&n(Ne.FullPaths[et])!=Tt;++et);for(mt.C=et>=Ae.length?-1:et,et=Ue+1;et<Ae.length&&n(Ne.FullPaths[et])!=n(Tt);++et);mt.R=et>=Ae.length?-1:et,mt.type=1}else n(Ne.FullPaths[Ue+1]||"")==n(Tt)&&(mt.R=Ue+1),mt.type=2}}}function Q(Ne,Me){var Re=Me||{};if(Re.fileType=="mad")return pr(Ne,Re);switch(L(Ne),Re.fileType){case"zip":return Ge(Ne,Re)}var Ce=(function(Rt){for(var Yt=0,or=0,Cr=0;Cr<Rt.FileIndex.length;++Cr){var Et=Rt.FileIndex[Cr];if(Et.content){var dn=Et.content.length;dn>0&&(dn<4096?Yt+=dn+63>>6:or+=dn+511>>9)}}for(var Zr=Rt.FullPaths.length+3>>2,ia=Yt+7>>3,ta=Yt+127>>7,Jr=ia+or+Zr+ta,Fr=Jr+127>>7,rn=Fr<=109?0:Math.ceil((Fr-109)/127);Jr+Fr+rn+127>>7>Fr;)rn=++Fr<=109?0:Math.ceil((Fr-109)/127);var ga=[1,rn,Fr,ta,Zr,or,Yt,0];return Rt.FileIndex[0].size=Yt<<6,ga[7]=(Rt.FileIndex[0].start=ga[0]+ga[1]+ga[2]+ga[3]+ga[4]+ga[5])+(ga[6]+7>>3),ga})(Ne),Ue=Ht(Ce[7]<<9),de=0,qe=0;{for(de=0;de<8;++de)Ue.write_shift(1,se[de]);for(de=0;de<8;++de)Ue.write_shift(2,0);for(Ue.write_shift(2,62),Ue.write_shift(2,3),Ue.write_shift(2,65534),Ue.write_shift(2,9),Ue.write_shift(2,6),de=0;de<3;++de)Ue.write_shift(2,0);for(Ue.write_shift(4,0),Ue.write_shift(4,Ce[2]),Ue.write_shift(4,Ce[0]+Ce[1]+Ce[2]+Ce[3]-1),Ue.write_shift(4,0),Ue.write_shift(4,4096),Ue.write_shift(4,Ce[3]?Ce[0]+Ce[1]+Ce[2]-1:Z),Ue.write_shift(4,Ce[3]),Ue.write_shift(-4,Ce[1]?Ce[0]-1:Z),Ue.write_shift(4,Ce[1]),de=0;de<109;++de)Ue.write_shift(-4,de<Ce[2]?Ce[1]+de:-1)}if(Ce[1])for(qe=0;qe<Ce[1];++qe){for(;de<236+qe*127;++de)Ue.write_shift(-4,de<Ce[2]?Ce[1]+de:-1);Ue.write_shift(-4,qe===Ce[1]-1?Z:qe+1)}var et=function(Rt){for(qe+=Rt;de<qe-1;++de)Ue.write_shift(-4,de+1);Rt&&(++de,Ue.write_shift(-4,Z))};for(qe=de=0,qe+=Ce[1];de<qe;++de)Ue.write_shift(-4,ae.DIFSECT);for(qe+=Ce[2];de<qe;++de)Ue.write_shift(-4,ae.FATSECT);et(Ce[3]),et(Ce[4]);for(var tt=0,Ae=0,Xe=Ne.FileIndex[0];tt<Ne.FileIndex.length;++tt)Xe=Ne.FileIndex[tt],Xe.content&&(Ae=Xe.content.length,!(Ae<4096)&&(Xe.start=qe,et(Ae+511>>9)));for(et(Ce[6]+7>>3);Ue.l&511;)Ue.write_shift(-4,ae.ENDOFCHAIN);for(qe=de=0,tt=0;tt<Ne.FileIndex.length;++tt)Xe=Ne.FileIndex[tt],Xe.content&&(Ae=Xe.content.length,!(!Ae||Ae>=4096)&&(Xe.start=qe,et(Ae+63>>6)));for(;Ue.l&511;)Ue.write_shift(-4,ae.ENDOFCHAIN);for(de=0;de<Ce[4]<<2;++de){var mt=Ne.FullPaths[de];if(!mt||mt.length===0){for(tt=0;tt<17;++tt)Ue.write_shift(4,0);for(tt=0;tt<3;++tt)Ue.write_shift(4,-1);for(tt=0;tt<12;++tt)Ue.write_shift(4,0);continue}Xe=Ne.FileIndex[de],de===0&&(Xe.start=Xe.size?Xe.start-1:Z);var Tt=de===0&&Re.root||Xe.name;if(Ae=2*(Tt.length+1),Ue.write_shift(64,Tt,"utf16le"),Ue.write_shift(2,Ae),Ue.write_shift(1,Xe.type),Ue.write_shift(1,Xe.color),Ue.write_shift(-4,Xe.L),Ue.write_shift(-4,Xe.R),Ue.write_shift(-4,Xe.C),Xe.clsid)Ue.write_shift(16,Xe.clsid,"hex");else for(tt=0;tt<4;++tt)Ue.write_shift(4,0);Ue.write_shift(4,Xe.state||0),Ue.write_shift(4,0),Ue.write_shift(4,0),Ue.write_shift(4,0),Ue.write_shift(4,0),Ue.write_shift(4,Xe.start),Ue.write_shift(4,Xe.size),Ue.write_shift(4,0)}for(de=1;de<Ne.FileIndex.length;++de)if(Xe=Ne.FileIndex[de],Xe.size>=4096)if(Ue.l=Xe.start+1<<9,sa&&Buffer.isBuffer(Xe.content))Xe.content.copy(Ue,Ue.l,0,Xe.size),Ue.l+=Xe.size+511&-512;else{for(tt=0;tt<Xe.size;++tt)Ue.write_shift(1,Xe.content[tt]);for(;tt&511;++tt)Ue.write_shift(1,0)}for(de=1;de<Ne.FileIndex.length;++de)if(Xe=Ne.FileIndex[de],Xe.size>0&&Xe.size<4096)if(sa&&Buffer.isBuffer(Xe.content))Xe.content.copy(Ue,Ue.l,0,Xe.size),Ue.l+=Xe.size+63&-64;else{for(tt=0;tt<Xe.size;++tt)Ue.write_shift(1,Xe.content[tt]);for(;tt&63;++tt)Ue.write_shift(1,0)}if(sa)Ue.l=Ue.length;else for(;Ue.l<Ue.length;)Ue.write_shift(1,0);return Ue}function H(Ne,Me){var Re=Ne.FullPaths.map(function(tt){return tt.toUpperCase()}),Ce=Re.map(function(tt){var Ae=tt.split("/");return Ae[Ae.length-(tt.slice(-1)=="/"?2:1)]}),Ue=!1;Me.charCodeAt(0)===47?(Ue=!0,Me=Re[0].slice(0,-1)+Me):Ue=Me.indexOf("/")!==-1;var de=Me.toUpperCase(),qe=Ue===!0?Re.indexOf(de):Ce.indexOf(de);if(qe!==-1)return Ne.FileIndex[qe];var et=!de.match(Ug);for(de=de.replace(Pl,""),et&&(de=de.replace(Ug,"!")),qe=0;qe<Re.length;++qe)if((et?Re[qe].replace(Ug,"!"):Re[qe]).replace(Pl,"")==de||(et?Ce[qe].replace(Ug,"!"):Ce[qe]).replace(Pl,"")==de)return Ne.FileIndex[qe];return null}var G=64,Z=-2,te="d0cf11e0a1b11ae1",se=[208,207,17,224,161,177,26,225],ue="00000000000000000000000000000000",ae={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:Z,FREESECT:-1,HEADER_SIGNATURE:te,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:ue,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function pe(Ne,Me,Re){c();var Ce=Q(Ne,Re);d.writeFileSync(Me,Ce)}function ve(Ne){for(var Me=new Array(Ne.length),Re=0;Re<Ne.length;++Re)Me[Re]=String.fromCharCode(Ne[Re]);return Me.join("")}function Pe(Ne,Me){var Re=Q(Ne,Me);switch(Me&&Me.type||"buffer"){case"file":return c(),d.writeFileSync(Me.filename,Re),Re;case"binary":return typeof Re=="string"?Re:ve(Re);case"base64":return Cb(typeof Re=="string"?Re:ve(Re));case"buffer":if(sa)return Buffer.isBuffer(Re)?Re:ph(Re);case"array":return typeof Re=="string"?Ic(Re):Re}return Re}var xe;function B(Ne){try{var Me=Ne.InflateRaw,Re=new Me;if(Re._processChunk(new Uint8Array([3,0]),Re._finishFlushFlag),Re.bytesRead)xe=Ne;else throw new Error("zlib does not expose bytesRead")}catch(Ce){console.error("cannot use native zlib: "+(Ce.message||Ce))}}function re(Ne,Me){if(!xe)return ot(Ne,Me);var Re=xe.InflateRaw,Ce=new Re,Ue=Ce._processChunk(Ne.slice(Ne.l),Ce._finishFlushFlag);return Ne.l+=Ce.bytesRead,Ue}function J(Ne){return xe?xe.deflateRawSync(Ne):Kt(Ne)}var ie=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Y=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],_e=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function me(Ne){var Me=(Ne<<1|Ne<<11)&139536|(Ne<<5|Ne<<15)&558144;return(Me>>16|Me>>8|Me)&255}for(var ne=typeof Uint8Array<"u",je=ne?new Uint8Array(256):[],De=0;De<256;++De)je[De]=me(De);function ce(Ne,Me){var Re=je[Ne&255];return Me<=8?Re>>>8-Me:(Re=Re<<8|je[Ne>>8&255],Me<=16?Re>>>16-Me:(Re=Re<<8|je[Ne>>16&255],Re>>>24-Me))}function Ee(Ne,Me){var Re=Me&7,Ce=Me>>>3;return(Ne[Ce]|(Re<=6?0:Ne[Ce+1]<<8))>>>Re&3}function be(Ne,Me){var Re=Me&7,Ce=Me>>>3;return(Ne[Ce]|(Re<=5?0:Ne[Ce+1]<<8))>>>Re&7}function ge(Ne,Me){var Re=Me&7,Ce=Me>>>3;return(Ne[Ce]|(Re<=4?0:Ne[Ce+1]<<8))>>>Re&15}function Qe(Ne,Me){var Re=Me&7,Ce=Me>>>3;return(Ne[Ce]|(Re<=3?0:Ne[Ce+1]<<8))>>>Re&31}function Ye(Ne,Me){var Re=Me&7,Ce=Me>>>3;return(Ne[Ce]|(Re<=1?0:Ne[Ce+1]<<8))>>>Re&127}function at(Ne,Me,Re){var Ce=Me&7,Ue=Me>>>3,de=(1<<Re)-1,qe=Ne[Ue]>>>Ce;return Re<8-Ce||(qe|=Ne[Ue+1]<<8-Ce,Re<16-Ce)||(qe|=Ne[Ue+2]<<16-Ce,Re<24-Ce)||(qe|=Ne[Ue+3]<<24-Ce),qe&de}function Je(Ne,Me,Re){var Ce=Me&7,Ue=Me>>>3;return Ce<=5?Ne[Ue]|=(Re&7)<<Ce:(Ne[Ue]|=Re<<Ce&255,Ne[Ue+1]=(Re&7)>>8-Ce),Me+3}function ct(Ne,Me,Re){var Ce=Me&7,Ue=Me>>>3;return Re=(Re&1)<<Ce,Ne[Ue]|=Re,Me+1}function Ke(Ne,Me,Re){var Ce=Me&7,Ue=Me>>>3;return Re<<=Ce,Ne[Ue]|=Re&255,Re>>>=8,Ne[Ue+1]=Re,Me+8}function zt(Ne,Me,Re){var Ce=Me&7,Ue=Me>>>3;return Re<<=Ce,Ne[Ue]|=Re&255,Re>>>=8,Ne[Ue+1]=Re&255,Ne[Ue+2]=Re>>>8,Me+16}function Ft(Ne,Me){var Re=Ne.length,Ce=2*Re>Me?2*Re:Me+5,Ue=0;if(Re>=Me)return Ne;if(sa){var de=YD(Ce);if(Ne.copy)Ne.copy(de);else for(;Ue<Ne.length;++Ue)de[Ue]=Ne[Ue];return de}else if(ne){var qe=new Uint8Array(Ce);if(qe.set)qe.set(Ne);else for(;Ue<Re;++Ue)qe[Ue]=Ne[Ue];return qe}return Ne.length=Ce,Ne}function fr(Ne){for(var Me=new Array(Ne),Re=0;Re<Ne;++Re)Me[Re]=0;return Me}function hr(Ne,Me,Re){var Ce=1,Ue=0,de=0,qe=0,et=0,tt=Ne.length,Ae=ne?new Uint16Array(32):fr(32);for(de=0;de<32;++de)Ae[de]=0;for(de=tt;de<Re;++de)Ne[de]=0;tt=Ne.length;var Xe=ne?new Uint16Array(tt):fr(tt);for(de=0;de<tt;++de)Ae[Ue=Ne[de]]++,Ce<Ue&&(Ce=Ue),Xe[de]=0;for(Ae[0]=0,de=1;de<=Ce;++de)Ae[de+16]=et=et+Ae[de-1]<<1;for(de=0;de<tt;++de)et=Ne[de],et!=0&&(Xe[de]=Ae[et+16]++);var mt=0;for(de=0;de<tt;++de)if(mt=Ne[de],mt!=0)for(et=ce(Xe[de],Ce)>>Ce-mt,qe=(1<<Ce+4-mt)-1;qe>=0;--qe)Me[et|qe<<mt]=mt&15|de<<4;return Ce}var sr=ne?new Uint16Array(512):fr(512),Sr=ne?new Uint16Array(32):fr(32);if(!ne){for(var tr=0;tr<512;++tr)sr[tr]=0;for(tr=0;tr<32;++tr)Sr[tr]=0}(function(){for(var Ne=[],Me=0;Me<32;Me++)Ne.push(5);hr(Ne,Sr,32);var Re=[];for(Me=0;Me<=143;Me++)Re.push(8);for(;Me<=255;Me++)Re.push(9);for(;Me<=279;Me++)Re.push(7);for(;Me<=287;Me++)Re.push(8);hr(Re,sr,288)})();var Jt=(function(){for(var Me=ne?new Uint8Array(32768):[],Re=0,Ce=0;Re<_e.length-1;++Re)for(;Ce<_e[Re+1];++Ce)Me[Ce]=Re;for(;Ce<32768;++Ce)Me[Ce]=29;var Ue=ne?new Uint8Array(259):[];for(Re=0,Ce=0;Re<Y.length-1;++Re)for(;Ce<Y[Re+1];++Ce)Ue[Ce]=Re;function de(et,tt){for(var Ae=0;Ae<et.length;){var Xe=Math.min(65535,et.length-Ae),mt=Ae+Xe==et.length;for(tt.write_shift(1,+mt),tt.write_shift(2,Xe),tt.write_shift(2,~Xe&65535);Xe-- >0;)tt[tt.l++]=et[Ae++]}return tt.l}function qe(et,tt){for(var Ae=0,Xe=0,mt=ne?new Uint16Array(32768):[];Xe<et.length;){var Tt=Math.min(65535,et.length-Xe);if(Tt<10){for(Ae=Je(tt,Ae,+(Xe+Tt==et.length)),Ae&7&&(Ae+=8-(Ae&7)),tt.l=Ae/8|0,tt.write_shift(2,Tt),tt.write_shift(2,~Tt&65535);Tt-- >0;)tt[tt.l++]=et[Xe++];Ae=tt.l*8;continue}Ae=Je(tt,Ae,+(Xe+Tt==et.length)+2);for(var Rt=0;Tt-- >0;){var Yt=et[Xe];Rt=(Rt<<5^Yt)&32767;var or=-1,Cr=0;if((or=mt[Rt])&&(or|=Xe&-32768,or>Xe&&(or-=32768),or<Xe))for(;et[or+Cr]==et[Xe+Cr]&&Cr<250;)++Cr;if(Cr>2){Yt=Ue[Cr],Yt<=22?Ae=Ke(tt,Ae,je[Yt+1]>>1)-1:(Ke(tt,Ae,3),Ae+=5,Ke(tt,Ae,je[Yt-23]>>5),Ae+=3);var Et=Yt<8?0:Yt-4>>2;Et>0&&(zt(tt,Ae,Cr-Y[Yt]),Ae+=Et),Yt=Me[Xe-or],Ae=Ke(tt,Ae,je[Yt]>>3),Ae-=3;var dn=Yt<4?0:Yt-2>>1;dn>0&&(zt(tt,Ae,Xe-or-_e[Yt]),Ae+=dn);for(var Zr=0;Zr<Cr;++Zr)mt[Rt]=Xe&32767,Rt=(Rt<<5^et[Xe])&32767,++Xe;Tt-=Cr-1}else Yt<=143?Yt=Yt+48:Ae=ct(tt,Ae,1),Ae=Ke(tt,Ae,je[Yt]),mt[Rt]=Xe&32767,++Xe}Ae=Ke(tt,Ae,0)-1}return tt.l=(Ae+7)/8|0,tt.l}return function(tt,Ae){return tt.length<8?de(tt,Ae):qe(tt,Ae)}})();function Kt(Ne){var Me=Ht(50+Math.floor(Ne.length*1.1)),Re=Jt(Ne,Me);return Me.slice(0,Re)}var ar=ne?new Uint16Array(32768):fr(32768),vr=ne?new Uint16Array(32768):fr(32768),rr=ne?new Uint16Array(128):fr(128),ft=1,br=1;function yr(Ne,Me){var Re=Qe(Ne,Me)+257;Me+=5;var Ce=Qe(Ne,Me)+1;Me+=5;var Ue=ge(Ne,Me)+4;Me+=4;for(var de=0,qe=ne?new Uint8Array(19):fr(19),et=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],tt=1,Ae=ne?new Uint8Array(8):fr(8),Xe=ne?new Uint8Array(8):fr(8),mt=qe.length,Tt=0;Tt<Ue;++Tt)qe[ie[Tt]]=de=be(Ne,Me),tt<de&&(tt=de),Ae[de]++,Me+=3;var Rt=0;for(Ae[0]=0,Tt=1;Tt<=tt;++Tt)Xe[Tt]=Rt=Rt+Ae[Tt-1]<<1;for(Tt=0;Tt<mt;++Tt)(Rt=qe[Tt])!=0&&(et[Tt]=Xe[Rt]++);var Yt=0;for(Tt=0;Tt<mt;++Tt)if(Yt=qe[Tt],Yt!=0){Rt=je[et[Tt]]>>8-Yt;for(var or=(1<<7-Yt)-1;or>=0;--or)rr[Rt|or<<Yt]=Yt&7|Tt<<3}var Cr=[];for(tt=1;Cr.length<Re+Ce;)switch(Rt=rr[Ye(Ne,Me)],Me+=Rt&7,Rt>>>=3){case 16:for(de=3+Ee(Ne,Me),Me+=2,Rt=Cr[Cr.length-1];de-- >0;)Cr.push(Rt);break;case 17:for(de=3+be(Ne,Me),Me+=3;de-- >0;)Cr.push(0);break;case 18:for(de=11+Ye(Ne,Me),Me+=7;de-- >0;)Cr.push(0);break;default:Cr.push(Rt),tt<Rt&&(tt=Rt);break}var Et=Cr.slice(0,Re),dn=Cr.slice(Re);for(Tt=Re;Tt<286;++Tt)Et[Tt]=0;for(Tt=Ce;Tt<30;++Tt)dn[Tt]=0;return ft=hr(Et,ar,286),br=hr(dn,vr,30),Me}function gr(Ne,Me){if(Ne[0]==3&&!(Ne[1]&3))return[vf(Me),2];for(var Re=0,Ce=0,Ue=YD(Me||1<<18),de=0,qe=Ue.length>>>0,et=0,tt=0;(Ce&1)==0;){if(Ce=be(Ne,Re),Re+=3,Ce>>>1)Ce>>1==1?(et=9,tt=5):(Re=yr(Ne,Re),et=ft,tt=br);else{Re&7&&(Re+=8-(Re&7));var Ae=Ne[Re>>>3]|Ne[(Re>>>3)+1]<<8;if(Re+=32,Ae>0)for(!Me&&qe<de+Ae&&(Ue=Ft(Ue,de+Ae),qe=Ue.length);Ae-- >0;)Ue[de++]=Ne[Re>>>3],Re+=8;continue}for(;;){!Me&&qe<de+32767&&(Ue=Ft(Ue,de+32767),qe=Ue.length);var Xe=at(Ne,Re,et),mt=Ce>>>1==1?sr[Xe]:ar[Xe];if(Re+=mt&15,mt>>>=4,(mt>>>8&255)===0)Ue[de++]=mt;else{if(mt==256)break;mt-=257;var Tt=mt<8?0:mt-4>>2;Tt>5&&(Tt=0);var Rt=de+Y[mt];Tt>0&&(Rt+=at(Ne,Re,Tt),Re+=Tt),Xe=at(Ne,Re,tt),mt=Ce>>>1==1?Sr[Xe]:vr[Xe],Re+=mt&15,mt>>>=4;var Yt=mt<4?0:mt-2>>1,or=_e[mt];for(Yt>0&&(or+=at(Ne,Re,Yt),Re+=Yt),!Me&&qe<Rt&&(Ue=Ft(Ue,Rt+100),qe=Ue.length);de<Rt;)Ue[de]=Ue[de-or],++de}}}return Me?[Ue,Re+7>>>3]:[Ue.slice(0,de),Re+7>>>3]}function ot(Ne,Me){var Re=Ne.slice(Ne.l||0),Ce=gr(Re,Me);return Ne.l+=Ce[1],Ce[0]}function Lt(Ne,Me){if(Ne)typeof console<"u"&&console.error(Me);else throw new Error(Me)}function ir(Ne,Me){var Re=Ne;Uo(Re,0);var Ce=[],Ue=[],de={FileIndex:Ce,FullPaths:Ue};R(de,{root:Me.root});for(var qe=Re.length-4;(Re[qe]!=80||Re[qe+1]!=75||Re[qe+2]!=5||Re[qe+3]!=6)&&qe>=0;)--qe;Re.l=qe+4,Re.l+=4;var et=Re.read_shift(2);Re.l+=6;var tt=Re.read_shift(4);for(Re.l=tt,qe=0;qe<et;++qe){Re.l+=20;var Ae=Re.read_shift(4),Xe=Re.read_shift(4),mt=Re.read_shift(2),Tt=Re.read_shift(2),Rt=Re.read_shift(2);Re.l+=8;var Yt=Re.read_shift(4),or=l(Re.slice(Re.l+mt,Re.l+mt+Tt));Re.l+=mt+Tt+Rt;var Cr=Re.l;Re.l=Yt+4,Mt(Re,Ae,Xe,de,or),Re.l=Cr}return de}function Mt(Ne,Me,Re,Ce,Ue){Ne.l+=2;var de=Ne.read_shift(2),qe=Ne.read_shift(2),et=o(Ne);if(de&8257)throw new Error("Unsupported ZIP encryption");for(var tt=Ne.read_shift(4),Ae=Ne.read_shift(4),Xe=Ne.read_shift(4),mt=Ne.read_shift(2),Tt=Ne.read_shift(2),Rt="",Yt=0;Yt<mt;++Yt)Rt+=String.fromCharCode(Ne[Ne.l++]);if(Tt){var or=l(Ne.slice(Ne.l,Ne.l+Tt));(or[21589]||{}).mt&&(et=or[21589].mt),((Ue||{})[21589]||{}).mt&&(et=Ue[21589].mt)}Ne.l+=Tt;var Cr=Ne.slice(Ne.l,Ne.l+Ae);switch(qe){case 8:Cr=re(Ne,Xe);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+qe)}var Et=!1;de&8&&(tt=Ne.read_shift(4),tt==134695760&&(tt=Ne.read_shift(4),Et=!0),Ae=Ne.read_shift(4),Xe=Ne.read_shift(4)),Ae!=Me&&Lt(Et,"Bad compressed size: "+Me+" != "+Ae),Xe!=Re&&Lt(Et,"Bad uncompressed size: "+Re+" != "+Xe),Ir(Ce,Rt,Cr,{unsafe:!0,mt:et})}function Ge(Ne,Me){var Re=Me||{},Ce=[],Ue=[],de=Ht(1),qe=Re.compression?8:0,et=0,tt=0,Ae=0,Xe=0,mt=0,Tt=Ne.FullPaths[0],Rt=Tt,Yt=Ne.FileIndex[0],or=[],Cr=0;for(tt=1;tt<Ne.FullPaths.length;++tt)if(Rt=Ne.FullPaths[tt].slice(Tt.length),Yt=Ne.FileIndex[tt],!(!Yt.size||!Yt.content||Rt=="Sh33tJ5")){var Et=Xe,dn=Ht(Rt.length);for(Ae=0;Ae<Rt.length;++Ae)dn.write_shift(1,Rt.charCodeAt(Ae)&127);dn=dn.slice(0,dn.l),or[mt]=Iye.buf(Yt.content,0);var Zr=Yt.content;qe==8&&(Zr=J(Zr)),de=Ht(30),de.write_shift(4,67324752),de.write_shift(2,20),de.write_shift(2,et),de.write_shift(2,qe),Yt.mt?i(de,Yt.mt):de.write_shift(4,0),de.write_shift(-4,or[mt]),de.write_shift(4,Zr.length),de.write_shift(4,Yt.content.length),de.write_shift(2,dn.length),de.write_shift(2,0),Xe+=de.length,Ce.push(de),Xe+=dn.length,Ce.push(dn),Xe+=Zr.length,Ce.push(Zr),de=Ht(46),de.write_shift(4,33639248),de.write_shift(2,0),de.write_shift(2,20),de.write_shift(2,et),de.write_shift(2,qe),de.write_shift(4,0),de.write_shift(-4,or[mt]),de.write_shift(4,Zr.length),de.write_shift(4,Yt.content.length),de.write_shift(2,dn.length),de.write_shift(2,0),de.write_shift(2,0),de.write_shift(2,0),de.write_shift(2,0),de.write_shift(4,0),de.write_shift(4,Et),Cr+=de.l,Ue.push(de),Cr+=dn.length,Ue.push(dn),++mt}return de=Ht(22),de.write_shift(4,101010256),de.write_shift(2,0),de.write_shift(2,0),de.write_shift(2,mt),de.write_shift(2,mt),de.write_shift(4,Cr),de.write_shift(4,Xe),de.write_shift(2,0),jo([jo(Ce),jo(Ue),de])}var At={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function ur(Ne,Me){if(Ne.ctype)return Ne.ctype;var Re=Ne.name||"",Ce=Re.match(/\.([^\.]+)$/);return Ce&&At[Ce[1]]||Me&&(Ce=(Re=Me).match(/[\.\\]([^\.\\])+$/),Ce&&At[Ce[1]])?At[Ce[1]]:"application/octet-stream"}function Dr(Ne){for(var Me=Cb(Ne),Re=[],Ce=0;Ce<Me.length;Ce+=76)Re.push(Me.slice(Ce,Ce+76));return Re.join(`\r
`)+`\r
`}function jr(Ne){var Me=Ne.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(Ae){var Xe=Ae.charCodeAt(0).toString(16).toUpperCase();return"="+(Xe.length==1?"0"+Xe:Xe)});Me=Me.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),Me.charAt(0)==`
`&&(Me="=0D"+Me.slice(1)),Me=Me.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var Re=[],Ce=Me.split(`\r
`),Ue=0;Ue<Ce.length;++Ue){var de=Ce[Ue];if(de.length==0){Re.push("");continue}for(var qe=0;qe<de.length;){var et=76,tt=de.slice(qe,qe+et);tt.charAt(et-1)=="="?et--:tt.charAt(et-2)=="="?et-=2:tt.charAt(et-3)=="="&&(et-=3),tt=de.slice(qe,qe+et),qe+=et,qe<de.length&&(tt+="="),Re.push(tt)}}return Re.join(`\r
`)}function Xt(Ne){for(var Me=[],Re=0;Re<Ne.length;++Re){for(var Ce=Ne[Re];Re<=Ne.length&&Ce.charAt(Ce.length-1)=="=";)Ce=Ce.slice(0,Ce.length-1)+Ne[++Re];Me.push(Ce)}for(var Ue=0;Ue<Me.length;++Ue)Me[Ue]=Me[Ue].replace(/[=][0-9A-Fa-f]{2}/g,function(de){return String.fromCharCode(parseInt(de.slice(1),16))});return Ic(Me.join(`\r
`))}function Wr(Ne,Me,Re){for(var Ce="",Ue="",de="",qe,et=0;et<10;++et){var tt=Me[et];if(!tt||tt.match(/^\s*$/))break;var Ae=tt.match(/^(.*?):\s*([^\s].*)$/);if(Ae)switch(Ae[1].toLowerCase()){case"content-location":Ce=Ae[2].trim();break;case"content-type":de=Ae[2].trim();break;case"content-transfer-encoding":Ue=Ae[2].trim();break}}switch(++et,Ue.toLowerCase()){case"base64":qe=Ic(Uc(Me.slice(et).join("")));break;case"quoted-printable":qe=Xt(Me.slice(et));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+Ue)}var Xe=Ir(Ne,Ce.slice(Re.length),qe,{unsafe:!0});de&&(Xe.ctype=de)}function cr(Ne,Me){if(ve(Ne.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var Re=Me&&Me.root||"",Ce=(sa&&Buffer.isBuffer(Ne)?Ne.toString("binary"):ve(Ne)).split(`\r
`),Ue=0,de="";for(Ue=0;Ue<Ce.length;++Ue)if(de=Ce[Ue],!!/^Content-Location:/i.test(de)&&(de=de.slice(de.indexOf("file")),Re||(Re=de.slice(0,de.lastIndexOf("/")+1)),de.slice(0,Re.length)!=Re))for(;Re.length>0&&(Re=Re.slice(0,Re.length-1),Re=Re.slice(0,Re.lastIndexOf("/")+1),de.slice(0,Re.length)!=Re););var qe=(Ce[1]||"").match(/boundary="(.*?)"/);if(!qe)throw new Error("MAD cannot find boundary");var et="--"+(qe[1]||""),tt=[],Ae=[],Xe={FileIndex:tt,FullPaths:Ae};R(Xe);var mt,Tt=0;for(Ue=0;Ue<Ce.length;++Ue){var Rt=Ce[Ue];Rt!==et&&Rt!==et+"--"||(Tt++&&Wr(Xe,Ce.slice(mt,Ue),Re),mt=Ue)}return Xe}function pr(Ne,Me){var Re=Me||{},Ce=Re.boundary||"SheetJS";Ce="------="+Ce;for(var Ue=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+Ce.slice(2)+'"',"","",""],de=Ne.FullPaths[0],qe=de,et=Ne.FileIndex[0],tt=1;tt<Ne.FullPaths.length;++tt)if(qe=Ne.FullPaths[tt].slice(de.length),et=Ne.FileIndex[tt],!(!et.size||!et.content||qe=="Sh33tJ5")){qe=qe.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(Cr){return"_x"+Cr.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(Cr){return"_u"+Cr.charCodeAt(0).toString(16)+"_"});for(var Ae=et.content,Xe=sa&&Buffer.isBuffer(Ae)?Ae.toString("binary"):ve(Ae),mt=0,Tt=Math.min(1024,Xe.length),Rt=0,Yt=0;Yt<=Tt;++Yt)(Rt=Xe.charCodeAt(Yt))>=32&&Rt<128&&++mt;var or=mt>=Tt*4/5;Ue.push(Ce),Ue.push("Content-Location: "+(Re.root||"file:///C:/SheetJS/")+qe),Ue.push("Content-Transfer-Encoding: "+(or?"quoted-printable":"base64")),Ue.push("Content-Type: "+ur(et,qe)),Ue.push(""),Ue.push(or?jr(Xe):Dr(Xe))}return Ue.push(Ce+`--\r
`),Ue.join(`\r
`)}function Rr(Ne){var Me={};return R(Me,Ne),Me}function Ir(Ne,Me,Re,Ce){var Ue=Ce&&Ce.unsafe;Ue||R(Ne);var de=!Ue&&yn.find(Ne,Me);if(!de){var qe=Ne.FullPaths[0];Me.slice(0,qe.length)==qe?qe=Me:(qe.slice(-1)!="/"&&(qe+="/"),qe=(qe+Me).replace("//","/")),de={name:a(Me),type:2},Ne.FileIndex.push(de),Ne.FullPaths.push(qe),Ue||yn.utils.cfb_gc(Ne)}return de.content=Re,de.size=Re?Re.length:0,Ce&&(Ce.CLSID&&(de.clsid=Ce.CLSID),Ce.mt&&(de.mt=Ce.mt),Ce.ct&&(de.ct=Ce.ct)),de}function Nn(Ne,Me){R(Ne);var Re=yn.find(Ne,Me);if(Re){for(var Ce=0;Ce<Ne.FileIndex.length;++Ce)if(Ne.FileIndex[Ce]==Re)return Ne.FileIndex.splice(Ce,1),Ne.FullPaths.splice(Ce,1),!0}return!1}function Mr(Ne,Me,Re){R(Ne);var Ce=yn.find(Ne,Me);if(Ce){for(var Ue=0;Ue<Ne.FileIndex.length;++Ue)if(Ne.FileIndex[Ue]==Ce)return Ne.FileIndex[Ue].name=a(Re),Ne.FullPaths[Ue]=Re,!0}return!1}function Gr(Ne){L(Ne,!0)}return t.find=H,t.read=W,t.parse=u,t.write=Pe,t.writeFile=pe,t.utils={cfb_new:Rr,cfb_add:Ir,cfb_del:Nn,cfb_mov:Mr,cfb_gc:Gr,ReadShift:Gg,CheckField:NW,prep_blob:Uo,bconcat:jo,use_zlib:B,_deflateRaw:Kt,_inflateRaw:ot,consts:ae},t})();function Dye(e){return typeof e=="string"?R5(e):Array.isArray(e)?iye(e):e}function wv(e,t,r){if(typeof Deno<"u"){if(r&&typeof t=="string")switch(r){case"utf8":t=new TextEncoder(r).encode(t);break;case"binary":t=R5(t);break;default:throw new Error("Unsupported encoding "+r)}return Deno.writeFileSync(e,t)}var n=r=="utf8"?Hu(t):t;if(typeof IE_SaveFile<"u")return IE_SaveFile(n,e);if(typeof Blob<"u"){var a=new Blob([Dye(n)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(a,e);if(typeof saveAs<"u")return saveAs(a,e);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var i=URL.createObjectURL(a);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(i)},6e4),chrome.downloads.download({url:i,filename:e,saveAs:!0});var o=document.createElement("a");if(o.download!=null)return o.download=e,o.href=i,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(i)},6e4),i}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var l=File(e);return l.open("w"),l.encoding="binary",Array.isArray(t)&&(t=Ef(t)),l.write(t),l.close(),t}catch(d){if(!d.message||!d.message.match(/onstruct/))throw d}throw new Error("cannot save file "+e)}function Mye(e){if(typeof Deno<"u")return Deno.readFileSync(e);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var t=File(e);t.open("r"),t.encoding="binary";var r=t.read();return t.close(),r}catch(n){if(!n.message||!n.message.match(/onstruct/))throw n}throw new Error("Cannot access file "+e)}function gi(e){for(var t=Object.keys(e),r=[],n=0;n<t.length;++n)Object.prototype.hasOwnProperty.call(e,t[n])&&r.push(t[n]);return r}function aM(e,t){for(var r=[],n=gi(e),a=0;a!==n.length;++a)r[e[n[a]][t]]==null&&(r[e[n[a]][t]]=n[a]);return r}function B5(e){for(var t=[],r=gi(e),n=0;n!==r.length;++n)t[e[r[n]]]=r[n];return t}function U5(e){for(var t=[],r=gi(e),n=0;n!==r.length;++n)t[e[r[n]]]=parseInt(r[n],10);return t}function Lye(e){for(var t=[],r=gi(e),n=0;n!==r.length;++n)t[e[r[n]]]==null&&(t[e[r[n]]]=[]),t[e[r[n]]].push(r[n]);return t}var yk=new Date(1899,11,30,0,0,0);function ao(e,t){var r=e.getTime(),n=yk.getTime()+(e.getTimezoneOffset()-yk.getTimezoneOffset())*6e4;return(r-n)/(1440*60*1e3)}var rW=new Date,Rye=yk.getTime()+(rW.getTimezoneOffset()-yk.getTimezoneOffset())*6e4,sM=rW.getTimezoneOffset();function z5(e){var t=new Date;return t.setTime(e*24*60*60*1e3+Rye),t.getTimezoneOffset()!==sM&&t.setTime(t.getTime()+(t.getTimezoneOffset()-sM)*6e4),t}function Fye(e){var t=0,r=0,n=!1,a=e.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!a)throw new Error("|"+e+"| is not an ISO8601 Duration");for(var i=1;i!=a.length;++i)if(a[i]){switch(r=1,i>3&&(n=!0),a[i].slice(a[i].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+a[i].slice(a[i].length-1));case"D":r*=24;case"H":r*=60;case"M":if(n)r*=60;else throw new Error("Unsupported ISO Duration Field: M")}t+=r*parseInt(a[i],10)}return t}var iM=new Date("2017-02-19T19:06:09.000Z"),nW=isNaN(iM.getFullYear())?new Date("2/19/17"):iM,Bye=nW.getFullYear()==2017;function Ds(e,t){var r=new Date(e);if(Bye)return t>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):t<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(e instanceof Date)return e;if(nW.getFullYear()==1917&&!isNaN(r.getFullYear())){var n=r.getFullYear();return e.indexOf(""+n)>-1||r.setFullYear(r.getFullYear()+100),r}var a=e.match(/\d+/g)||["2017","2","19","0","0","0"],i=new Date(+a[0],+a[1]-1,+a[2],+a[3]||0,+a[4]||0,+a[5]||0);return e.indexOf("Z")>-1&&(i=new Date(i.getTime()-i.getTimezoneOffset()*60*1e3)),i}function Zm(e,t){if(sa&&Buffer.isBuffer(e)){if(t){if(e[0]==255&&e[1]==254)return Hu(e.slice(2).toString("utf16le"));if(e[1]==254&&e[2]==255)return Hu($V(e.slice(2).toString("binary")))}return e.toString("binary")}if(typeof TextDecoder<"u")try{if(t){if(e[0]==255&&e[1]==254)return Hu(new TextDecoder("utf-16le").decode(e.slice(2)));if(e[0]==254&&e[1]==255)return Hu(new TextDecoder("utf-16be").decode(e.slice(2)))}var r={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(e)&&(e=new Uint8Array(e)),new TextDecoder("latin1").decode(e).replace(/[]/g,function(i){return r[i]||i})}catch{}for(var n=[],a=0;a!=e.length;++a)n.push(String.fromCharCode(e[a]));return n.join("")}function Ms(e){if(typeof JSON<"u"&&!Array.isArray(e))return JSON.parse(JSON.stringify(e));if(typeof e!="object"||e==null)return e;if(e instanceof Date)return new Date(e.getTime());var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=Ms(e[r]));return t}function mi(e,t){for(var r="";r.length<t;)r+=e;return r}function ou(e){var t=Number(e);if(!isNaN(t))return isFinite(t)?t:NaN;if(!/\d/.test(e))return t;var r=1,n=e.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(t=Number(n))||(n=n.replace(/[(](.*)[)]/,function(a,i){return r=-r,i}),!isNaN(t=Number(n)))?t/r:t}var Uye=["january","february","march","april","may","june","july","august","september","october","november","december"];function ip(e){var t=new Date(e),r=new Date(NaN),n=t.getYear(),a=t.getMonth(),i=t.getDate();if(isNaN(i))return r;var o=e.toLowerCase();if(o.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(o=o.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),o.length>3&&Uye.indexOf(o)==-1)return r}else if(o.match(/[a-z]/))return r;return n<0||n>8099?r:(a>0||i>1)&&n!=101?t:e.match(/[^-0-9:,\/\\]/)?r:t}var zye=(function(){var e="abacaba".split(/(:?b)/i).length==5;return function(r,n,a){if(e||typeof n=="string")return r.split(n);for(var i=r.split(n),o=[i[0]],l=1;l<i.length;++l)o.push(a),o.push(i[l]);return o}})();function aW(e){return e?e.content&&e.type?Zm(e.content,!0):e.data?Bg(e.data):e.asNodeBuffer&&sa?Bg(e.asNodeBuffer().toString("binary")):e.asBinary?Bg(e.asBinary()):e._data&&e._data.getContent?Bg(Zm(Array.prototype.slice.call(e._data.getContent(),0))):null:null}function sW(e){if(!e)return null;if(e.data)return KD(e.data);if(e.asNodeBuffer&&sa)return e.asNodeBuffer();if(e._data&&e._data.getContent){var t=e._data.getContent();return typeof t=="string"?KD(t):Array.prototype.slice.call(t)}return e.content&&e.type?e.content:null}function qye(e){return e&&e.name.slice(-4)===".bin"?sW(e):aW(e)}function fd(e,t){for(var r=e.FullPaths||gi(e.files),n=t.toLowerCase().replace(/[\/]/g,"\\"),a=n.replace(/\\/g,"/"),i=0;i<r.length;++i){var o=r[i].replace(/^Root Entry[\/]/,"").toLowerCase();if(n==o||a==o)return e.files?e.files[r[i]]:e.FileIndex[i]}return null}function tE(e,t){var r=fd(e,t);if(r==null)throw new Error("Cannot find file "+t+" in zip");return r}function Bi(e,t,r){if(!r)return qye(tE(e,t));if(!t)return null;try{return Bi(e,t)}catch{return null}}function Dc(e,t,r){if(!r)return aW(tE(e,t));if(!t)return null;try{return Dc(e,t)}catch{return null}}function Hye(e,t,r){return sW(tE(e,t))}function oM(e){for(var t=e.FullPaths||gi(e.files),r=[],n=0;n<t.length;++n)t[n].slice(-1)!="/"&&r.push(t[n].replace(/^Root Entry[\/]/,""));return r.sort()}function Qn(e,t,r){if(e.FullPaths){if(typeof r=="string"){var n;return sa?n=ph(r):n=oye(r),yn.utils.cfb_add(e,t,n)}yn.utils.cfb_add(e,t,r)}else e.file(t,r)}function rE(){return yn.utils.cfb_new()}function iW(e,t){switch(t.type){case"base64":return yn.read(e,{type:"base64"});case"binary":return yn.read(e,{type:"binary"});case"buffer":case"array":return yn.read(e,{type:"buffer"})}throw new Error("Unrecognized type "+t.type)}function zg(e,t){if(e.charAt(0)=="/")return e.slice(1);var r=t.split("/");t.slice(-1)!="/"&&r.pop();for(var n=e.split("/");n.length!==0;){var a=n.shift();a===".."?r.pop():a!=="."&&r.push(a)}return r.join("/")}var Di=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,$ye=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,lM=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,Vye=/<[^>]*>/g,fl=Di.match(lM)?lM:Vye,Wye=/<\w*:/,Gye=/<(\/?)\w+:/;function In(e,t,r){for(var n={},a=0,i=0;a!==e.length&&!((i=e.charCodeAt(a))===32||i===10||i===13);++a);if(t||(n[0]=e.slice(0,a)),a===e.length)return n;var o=e.match($ye),l=0,d="",c=0,u="",x="",b=1;if(o)for(c=0;c!=o.length;++c){for(x=o[c],i=0;i!=x.length&&x.charCodeAt(i)!==61;++i);for(u=x.slice(0,i).trim();x.charCodeAt(i+1)==32;)++i;for(b=(a=x.charCodeAt(i+1))==34||a==39?1:0,d=x.slice(i+1+b,x.length-b),l=0;l!=u.length&&u.charCodeAt(l)!==58;++l);if(l===u.length)u.indexOf("_")>0&&(u=u.slice(0,u.indexOf("_"))),n[u]=d,n[u.toLowerCase()]=d;else{var g=(l===5&&u.slice(0,5)==="xmlns"?"xmlns":"")+u.slice(l+1);if(n[g]&&u.slice(l-3,l)=="ext")continue;n[g]=d,n[g.toLowerCase()]=d}}return n}function Ju(e){return e.replace(Gye,"<$1")}var oW={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},nE=B5(oW),Pa=(function(){var e=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,t=/_x([\da-fA-F]{4})_/ig;return function r(n){var a=n+"",i=a.indexOf("<![CDATA[");if(i==-1)return a.replace(e,function(l,d){return oW[l]||String.fromCharCode(parseInt(d,l.indexOf("x")>-1?16:10))||l}).replace(t,function(l,d){return String.fromCharCode(parseInt(d,16))});var o=a.indexOf("]]>");return r(a.slice(0,i))+a.slice(i+9,o)+r(a.slice(o+3))}})(),aE=/[&<>'"]/g,Kye=/[\u0000-\u0008\u000b-\u001f]/g;function Ja(e){var t=e+"";return t.replace(aE,function(r){return nE[r]}).replace(Kye,function(r){return"_x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+"_"})}function cM(e){return Ja(e).replace(/ /g,"_x0020_")}var lW=/[\u0000-\u001f]/g;function sE(e){var t=e+"";return t.replace(aE,function(r){return nE[r]}).replace(/\n/g,"<br/>").replace(lW,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}function Xye(e){var t=e+"";return t.replace(aE,function(r){return nE[r]}).replace(lW,function(r){return"&#x"+r.charCodeAt(0).toString(16).toUpperCase()+";"})}var dM=(function(){var e=/&#(\d+);/g;function t(r,n){return String.fromCharCode(parseInt(n,10))}return function(n){return n.replace(e,t)}})();function Yye(e){return e.replace(/(\r\n|[\r\n])/g,"&#10;")}function Os(e){switch(e){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function d_(e){for(var t="",r=0,n=0,a=0,i=0,o=0,l=0;r<e.length;){if(n=e.charCodeAt(r++),n<128){t+=String.fromCharCode(n);continue}if(a=e.charCodeAt(r++),n>191&&n<224){o=(n&31)<<6,o|=a&63,t+=String.fromCharCode(o);continue}if(i=e.charCodeAt(r++),n<240){t+=String.fromCharCode((n&15)<<12|(a&63)<<6|i&63);continue}o=e.charCodeAt(r++),l=((n&7)<<18|(a&63)<<12|(i&63)<<6|o&63)-65536,t+=String.fromCharCode(55296+(l>>>10&1023)),t+=String.fromCharCode(56320+(l&1023))}return t}function uM(e){var t=vf(2*e.length),r,n,a=1,i=0,o=0,l;for(n=0;n<e.length;n+=a)a=1,(l=e.charCodeAt(n))<128?r=l:l<224?(r=(l&31)*64+(e.charCodeAt(n+1)&63),a=2):l<240?(r=(l&15)*4096+(e.charCodeAt(n+1)&63)*64+(e.charCodeAt(n+2)&63),a=3):(a=4,r=(l&7)*262144+(e.charCodeAt(n+1)&63)*4096+(e.charCodeAt(n+2)&63)*64+(e.charCodeAt(n+3)&63),r-=65536,o=55296+(r>>>10&1023),r=56320+(r&1023)),o!==0&&(t[i++]=o&255,t[i++]=o>>>8,o=0),t[i++]=r%256,t[i++]=r>>>8;return t.slice(0,i).toString("ucs2")}function hM(e){return ph(e,"binary").toString("utf8")}var ey="foo bar baz",ls=sa&&(hM(ey)==d_(ey)&&hM||uM(ey)==d_(ey)&&uM)||d_,Hu=sa?function(e){return ph(e,"utf8").toString("binary")}:function(e){for(var t=[],r=0,n=0,a=0;r<e.length;)switch(n=e.charCodeAt(r++),!0){case n<128:t.push(String.fromCharCode(n));break;case n<2048:t.push(String.fromCharCode(192+(n>>6))),t.push(String.fromCharCode(128+(n&63)));break;case(n>=55296&&n<57344):n-=55296,a=e.charCodeAt(r++)-56320+(n<<10),t.push(String.fromCharCode(240+(a>>18&7))),t.push(String.fromCharCode(144+(a>>12&63))),t.push(String.fromCharCode(128+(a>>6&63))),t.push(String.fromCharCode(128+(a&63)));break;default:t.push(String.fromCharCode(224+(n>>12))),t.push(String.fromCharCode(128+(n>>6&63))),t.push(String.fromCharCode(128+(n&63)))}return t.join("")},Eb=(function(){var e={};return function(r,n){var a=r+"|"+(n||"");return e[a]?e[a]:e[a]=new RegExp("<(?:\\w+:)?"+r+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+r+">",n||"")}})(),cW=(function(){var e=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(t){return[new RegExp("&"+t[0]+";","ig"),t[1]]});return function(r){for(var n=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),a=0;a<e.length;++a)n=n.replace(e[a][0],e[a][1]);return n}})(),Qye=(function(){var e={};return function(r){return e[r]!==void 0?e[r]:e[r]=new RegExp("<(?:vt:)?"+r+">([\\s\\S]*?)</(?:vt:)?"+r+">","g")}})(),Zye=/<\/?(?:vt:)?variant>/g,Jye=/<(?:vt:)([^>]*)>([\s\S]*)</;function fM(e,t){var r=In(e),n=e.match(Qye(r.baseType))||[],a=[];if(n.length!=r.size){if(t.WTF)throw new Error("unexpected vector length "+n.length+" != "+r.size);return a}return n.forEach(function(i){var o=i.replace(Zye,"").match(Jye);o&&a.push({v:ls(o[2]),t:o[1]})}),a}var dW=/(^\s|\s$|\n)/;function zo(e,t){return"<"+e+(t.match(dW)?' xml:space="preserve"':"")+">"+t+"</"+e+">"}function Tb(e){return gi(e).map(function(t){return" "+t+'="'+e[t]+'"'}).join("")}function kr(e,t,r){return"<"+e+(r!=null?Tb(r):"")+(t!=null?(t.match(dW)?' xml:space="preserve"':"")+">"+t+"</"+e:"/")+">"}function Fj(e,t){try{return e.toISOString().replace(/\.\d*/,"")}catch(r){if(t)throw r}return""}function ewe(e,t){switch(typeof e){case"string":var r=kr("vt:lpwstr",Ja(e));return r=r.replace(/&quot;/g,"_x0022_"),r;case"number":return kr((e|0)==e?"vt:i4":"vt:r8",Ja(String(e)));case"boolean":return kr("vt:bool",e?"true":"false")}if(e instanceof Date)return kr("vt:filetime",Fj(e));throw new Error("Unable to serialize "+e)}function iE(e){if(sa&&Buffer.isBuffer(e))return e.toString("utf8");if(typeof e=="string")return e;if(typeof Uint8Array<"u"&&e instanceof Uint8Array)return ls(Ef(ZA(e)));throw new Error("Bad input format: expected Buffer or string")}var Ob=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,no={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},dx=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],Ac={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function twe(e,t){for(var r=1-2*(e[t+7]>>>7),n=((e[t+7]&127)<<4)+(e[t+6]>>>4&15),a=e[t+6]&15,i=5;i>=0;--i)a=a*256+e[t+i];return n==2047?a==0?r*(1/0):NaN:(n==0?n=-1022:(n-=1023,a+=Math.pow(2,52)),r*Math.pow(2,n-52)*a)}function rwe(e,t,r){var n=(t<0||1/t==-1/0?1:0)<<7,a=0,i=0,o=n?-t:t;isFinite(o)?o==0?a=i=0:(a=Math.floor(Math.log(o)/Math.LN2),i=o*Math.pow(2,52-a),a<=-1023&&(!isFinite(i)||i<Math.pow(2,52))?a=-1022:(i-=Math.pow(2,52),a+=1023)):(a=2047,i=isNaN(t)?26985:0);for(var l=0;l<=5;++l,i/=256)e[r+l]=i&255;e[r+6]=(a&15)<<4|i&15,e[r+7]=a>>4|n}var mM=function(e){for(var t=[],r=10240,n=0;n<e[0].length;++n)if(e[0][n])for(var a=0,i=e[0][n].length;a<i;a+=r)t.push.apply(t,e[0][n].slice(a,a+r));return t},xM=sa?function(e){return e[0].length>0&&Buffer.isBuffer(e[0][0])?Buffer.concat(e[0].map(function(t){return Buffer.isBuffer(t)?t:ph(t)})):mM(e)}:mM,pM=function(e,t,r){for(var n=[],a=t;a<r;a+=2)n.push(String.fromCharCode(F0(e,a)));return n.join("").replace(Pl,"")},oE=sa?function(e,t,r){return Buffer.isBuffer(e)?e.toString("utf16le",t,r).replace(Pl,""):pM(e,t,r)}:pM,gM=function(e,t,r){for(var n=[],a=t;a<t+r;++a)n.push(("0"+e[a].toString(16)).slice(-2));return n.join("")},uW=sa?function(e,t,r){return Buffer.isBuffer(e)?e.toString("hex",t,t+r):gM(e,t,r)}:gM,bM=function(e,t,r){for(var n=[],a=t;a<r;a++)n.push(String.fromCharCode(g1(e,a)));return n.join("")},kv=sa?function(t,r,n){return Buffer.isBuffer(t)?t.toString("utf8",r,n):bM(t,r,n)}:bM,hW=function(e,t){var r=Ec(e,t);return r>0?kv(e,t+4,t+4+r-1):""},fW=hW,mW=function(e,t){var r=Ec(e,t);return r>0?kv(e,t+4,t+4+r-1):""},xW=mW,pW=function(e,t){var r=2*Ec(e,t);return r>0?kv(e,t+4,t+4+r-1):""},gW=pW,bW=function(t,r){var n=Ec(t,r);return n>0?oE(t,r+4,r+4+n):""},vW=bW,yW=function(e,t){var r=Ec(e,t);return r>0?kv(e,t+4,t+4+r):""},wW=yW,kW=function(e,t){return twe(e,t)},wk=kW,lE=function(t){return Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array};sa&&(fW=function(t,r){if(!Buffer.isBuffer(t))return hW(t,r);var n=t.readUInt32LE(r);return n>0?t.toString("utf8",r+4,r+4+n-1):""},xW=function(t,r){if(!Buffer.isBuffer(t))return mW(t,r);var n=t.readUInt32LE(r);return n>0?t.toString("utf8",r+4,r+4+n-1):""},gW=function(t,r){if(!Buffer.isBuffer(t))return pW(t,r);var n=2*t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+n-1)},vW=function(t,r){if(!Buffer.isBuffer(t))return bW(t,r);var n=t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+n)},wW=function(t,r){if(!Buffer.isBuffer(t))return yW(t,r);var n=t.readUInt32LE(r);return t.toString("utf8",r+4,r+4+n)},wk=function(t,r){return Buffer.isBuffer(t)?t.readDoubleLE(r):kW(t,r)},lE=function(t){return Buffer.isBuffer(t)||Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array});var g1=function(e,t){return e[t]},F0=function(e,t){return e[t+1]*256+e[t]},nwe=function(e,t){var r=e[t+1]*256+e[t];return r<32768?r:(65535-r+1)*-1},Ec=function(e,t){return e[t+3]*(1<<24)+(e[t+2]<<16)+(e[t+1]<<8)+e[t]},am=function(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]},awe=function(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]};function Gg(e,t){var r="",n,a,i=[],o,l,d,c;switch(t){case"dbcs":if(c=this.l,sa&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*e).toString("utf16le");else for(d=0;d<e;++d)r+=String.fromCharCode(F0(this,c)),c+=2;e*=2;break;case"utf8":r=kv(this,this.l,this.l+e);break;case"utf16le":e*=2,r=oE(this,this.l,this.l+e);break;case"wstr":return Gg.call(this,e,"dbcs");case"lpstr-ansi":r=fW(this,this.l),e=4+Ec(this,this.l);break;case"lpstr-cp":r=xW(this,this.l),e=4+Ec(this,this.l);break;case"lpwstr":r=gW(this,this.l),e=4+2*Ec(this,this.l);break;case"lpp4":e=4+Ec(this,this.l),r=vW(this,this.l),e&2&&(e+=2);break;case"8lpp4":e=4+Ec(this,this.l),r=wW(this,this.l),e&3&&(e+=4-(e&3));break;case"cstr":for(e=0,r="";(o=g1(this,this.l+e++))!==0;)i.push(J2(o));r=i.join("");break;case"_wstr":for(e=0,r="";(o=F0(this,this.l+e))!==0;)i.push(J2(o)),e+=2;e+=2,r=i.join("");break;case"dbcs-cont":for(r="",c=this.l,d=0;d<e;++d){if(this.lens&&this.lens.indexOf(c)!==-1)return o=g1(this,c),this.l=c+1,l=Gg.call(this,e-d,o?"dbcs-cont":"sbcs-cont"),i.join("")+l;i.push(J2(F0(this,c))),c+=2}r=i.join(""),e*=2;break;case"cpstr":case"sbcs-cont":for(r="",c=this.l,d=0;d!=e;++d){if(this.lens&&this.lens.indexOf(c)!==-1)return o=g1(this,c),this.l=c+1,l=Gg.call(this,e-d,o?"dbcs-cont":"sbcs-cont"),i.join("")+l;i.push(J2(g1(this,c))),c+=1}r=i.join("");break;default:switch(e){case 1:return n=g1(this,this.l),this.l++,n;case 2:return n=(t==="i"?nwe:F0)(this,this.l),this.l+=2,n;case 4:case-4:return t==="i"||(this[this.l+3]&128)===0?(n=(e>0?am:awe)(this,this.l),this.l+=4,n):(a=Ec(this,this.l),this.l+=4,a);case 8:case-8:if(t==="f")return e==8?a=wk(this,this.l):a=wk([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,a;e=8;case 16:r=uW(this,this.l,e);break}}return this.l+=e,r}var swe=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24&255},iwe=function(e,t,r){e[r]=t&255,e[r+1]=t>>8&255,e[r+2]=t>>16&255,e[r+3]=t>>24&255},owe=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255};function lwe(e,t,r){var n=0,a=0;if(r==="dbcs"){for(a=0;a!=t.length;++a)owe(this,t.charCodeAt(a),this.l+2*a);n=2*t.length}else if(r==="sbcs"){for(t=t.replace(/[^\x00-\x7F]/g,"_"),a=0;a!=t.length;++a)this[this.l+a]=t.charCodeAt(a)&255;n=t.length}else if(r==="hex"){for(;a<e;++a)this[this.l++]=parseInt(t.slice(2*a,2*a+2),16)||0;return this}else if(r==="utf16le"){var i=Math.min(this.l+e,this.length);for(a=0;a<Math.min(t.length,e);++a){var o=t.charCodeAt(a);this[this.l++]=o&255,this[this.l++]=o>>8}for(;this.l<i;)this[this.l++]=0;return this}else switch(e){case 1:n=1,this[this.l]=t&255;break;case 2:n=2,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255;break;case 3:n=3,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255,t>>>=8,this[this.l+2]=t&255;break;case 4:n=4,swe(this,t,this.l);break;case 8:if(n=8,r==="f"){rwe(this,t,this.l);break}case 16:break;case-4:n=4,iwe(this,t,this.l);break}return this.l+=n,this}function NW(e,t){var r=uW(this,this.l,e.length>>1);if(r!==e)throw new Error(t+"Expected "+e+" saw "+r);this.l+=e.length>>1}function Uo(e,t){e.l=t,e.read_shift=Gg,e.chk=NW,e.write_shift=lwe}function hl(e,t){e.l+=t}function Ht(e){var t=vf(e);return Uo(t,0),t}function gh(e,t,r){if(e){var n,a,i;Uo(e,e.l||0);for(var o=e.length,l=0,d=0;e.l<o;){l=e.read_shift(1),l&128&&(l=(l&127)+((e.read_shift(1)&127)<<7));var c=Rb[l]||Rb[65535];for(n=e.read_shift(1),i=n&127,a=1;a<4&&n&128;++a)i+=((n=e.read_shift(1))&127)<<7*a;d=e.l+i;var u=c.f&&c.f(e,i,r);if(e.l=d,t(u,c,l))return}}}function cc(){var e=[],t=sa?256:2048,r=function(c){var u=Ht(c);return Uo(u,0),u},n=r(t),a=function(){n&&(n.length>n.l&&(n=n.slice(0,n.l),n.l=n.length),n.length>0&&e.push(n),n=null)},i=function(c){return n&&c<n.length-n.l?n:(a(),n=r(Math.max(c+1,t)))},o=function(){return a(),jo(e)},l=function(c){a(),n=c,n.l==null&&(n.l=n.length),i(t)};return{next:i,push:l,end:o,_bufs:e}}function dr(e,t,r,n){var a=+t,i;if(!isNaN(a)){n||(n=Rb[a].p||(r||[]).length||0),i=1+(a>=128?1:0)+1,n>=128&&++i,n>=16384&&++i,n>=2097152&&++i;var o=e.next(i);a<=127?o.write_shift(1,a):(o.write_shift(1,(a&127)+128),o.write_shift(1,a>>7));for(var l=0;l!=4;++l)if(n>=128)o.write_shift(1,(n&127)+128),n>>=7;else{o.write_shift(1,n);break}n>0&&lE(r)&&e.push(r)}}function Kg(e,t,r){var n=Ms(e);if(t.s?(n.cRel&&(n.c+=t.s.c),n.rRel&&(n.r+=t.s.r)):(n.cRel&&(n.c+=t.c),n.rRel&&(n.r+=t.r)),!r||r.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function vM(e,t,r){var n=Ms(e);return n.s=Kg(n.s,t.s,r),n.e=Kg(n.e,t.s,r),n}function Xg(e,t){if(e.cRel&&e.c<0)for(e=Ms(e);e.c<0;)e.c+=t>8?16384:256;if(e.rRel&&e.r<0)for(e=Ms(e);e.r<0;)e.r+=t>8?1048576:t>5?65536:16384;var r=Tn(e);return!e.cRel&&e.cRel!=null&&(r=uwe(r)),!e.rRel&&e.rRel!=null&&(r=cwe(r)),r}function u_(e,t){return e.s.r==0&&!e.s.rRel&&e.e.r==(t.biff>=12?1048575:t.biff>=8?65536:16384)&&!e.e.rRel?(e.s.cRel?"":"$")+Js(e.s.c)+":"+(e.e.cRel?"":"$")+Js(e.e.c):e.s.c==0&&!e.s.cRel&&e.e.c==(t.biff>=12?16383:255)&&!e.e.cRel?(e.s.rRel?"":"$")+Ii(e.s.r)+":"+(e.e.rRel?"":"$")+Ii(e.e.r):Xg(e.s,t.biff)+":"+Xg(e.e,t.biff)}function cE(e){return parseInt(dwe(e),10)-1}function Ii(e){return""+(e+1)}function cwe(e){return e.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function dwe(e){return e.replace(/\$(\d+)$/,"$1")}function dE(e){for(var t=hwe(e),r=0,n=0;n!==t.length;++n)r=26*r+t.charCodeAt(n)-64;return r-1}function Js(e){if(e<0)throw new Error("invalid column "+e);var t="";for(++e;e;e=Math.floor((e-1)/26))t=String.fromCharCode((e-1)%26+65)+t;return t}function uwe(e){return e.replace(/^([A-Z])/,"$$$1")}function hwe(e){return e.replace(/^\$([A-Z])/,"$1")}function fwe(e){return e.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function ei(e){for(var t=0,r=0,n=0;n<e.length;++n){var a=e.charCodeAt(n);a>=48&&a<=57?t=10*t+(a-48):a>=65&&a<=90&&(r=26*r+(a-64))}return{c:r-1,r:t-1}}function Tn(e){for(var t=e.c+1,r="";t;t=(t-1)/26|0)r=String.fromCharCode((t-1)%26+65)+r;return r+(e.r+1)}function dc(e){var t=e.indexOf(":");return t==-1?{s:ei(e),e:ei(e)}:{s:ei(e.slice(0,t)),e:ei(e.slice(t+1))}}function Kn(e,t){return typeof t>"u"||typeof t=="number"?Kn(e.s,e.e):(typeof e!="string"&&(e=Tn(e)),typeof t!="string"&&(t=Tn(t)),e==t?e:e+":"+t)}function Ia(e){var t={s:{c:0,r:0},e:{c:0,r:0}},r=0,n=0,a=0,i=e.length;for(r=0;n<i&&!((a=e.charCodeAt(n)-64)<1||a>26);++n)r=26*r+a;for(t.s.c=--r,r=0;n<i&&!((a=e.charCodeAt(n)-48)<0||a>9);++n)r=10*r+a;if(t.s.r=--r,n===i||a!=10)return t.e.c=t.s.c,t.e.r=t.s.r,t;for(++n,r=0;n!=i&&!((a=e.charCodeAt(n)-64)<1||a>26);++n)r=26*r+a;for(t.e.c=--r,r=0;n!=i&&!((a=e.charCodeAt(n)-48)<0||a>9);++n)r=10*r+a;return t.e.r=--r,t}function yM(e,t){var r=e.t=="d"&&t instanceof Date;if(e.z!=null)try{return e.w=Sd(e.z,r?ao(t):t)}catch{}try{return e.w=Sd((e.XF||{}).numFmtId||(r?14:0),r?ao(t):t)}catch{return""+t}}function ih(e,t,r){return e==null||e.t==null||e.t=="z"?"":e.w!==void 0?e.w:(e.t=="d"&&!e.z&&r&&r.dateNF&&(e.z=r.dateNF),e.t=="e"?bh[e.v]||e.v:t==null?yM(e,e.v):yM(e,t))}function Tf(e,t){var r=t&&t.sheet?t.sheet:"Sheet1",n={};return n[r]=e,{SheetNames:[r],Sheets:n}}function _W(e,t,r){var n=r||{},a=e?Array.isArray(e):n.dense,i=e||(a?[]:{}),o=0,l=0;if(i&&n.origin!=null){if(typeof n.origin=="number")o=n.origin;else{var d=typeof n.origin=="string"?ei(n.origin):n.origin;o=d.r,l=d.c}i["!ref"]||(i["!ref"]="A1:A1")}var c={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(i["!ref"]){var u=Ia(i["!ref"]);c.s.c=u.s.c,c.s.r=u.s.r,c.e.c=Math.max(c.e.c,u.e.c),c.e.r=Math.max(c.e.r,u.e.r),o==-1&&(c.e.r=o=u.e.r+1)}for(var x=0;x!=t.length;++x)if(t[x]){if(!Array.isArray(t[x]))throw new Error("aoa_to_sheet expects an array of arrays");for(var b=0;b!=t[x].length;++b)if(!(typeof t[x][b]>"u")){var g={v:t[x][b]},k=o+x,y=l+b;if(c.s.r>k&&(c.s.r=k),c.s.c>y&&(c.s.c=y),c.e.r<k&&(c.e.r=k),c.e.c<y&&(c.e.c=y),t[x][b]&&typeof t[x][b]=="object"&&!Array.isArray(t[x][b])&&!(t[x][b]instanceof Date))g=t[x][b];else if(Array.isArray(g.v)&&(g.f=t[x][b][1],g.v=g.v[0]),g.v===null)if(g.f)g.t="n";else if(n.nullError)g.t="e",g.v=0;else if(n.sheetStubs)g.t="z";else continue;else typeof g.v=="number"?g.t="n":typeof g.v=="boolean"?g.t="b":g.v instanceof Date?(g.z=n.dateNF||En[14],n.cellDates?(g.t="d",g.w=Sd(g.z,ao(g.v))):(g.t="n",g.v=ao(g.v),g.w=Sd(g.z,g.v))):g.t="s";if(a)i[k]||(i[k]=[]),i[k][y]&&i[k][y].z&&(g.z=i[k][y].z),i[k][y]=g;else{var N=Tn({c:y,r:k});i[N]&&i[N].z&&(g.z=i[N].z),i[N]=g}}}return c.s.c<1e7&&(i["!ref"]=Kn(c)),i}function Op(e,t){return _W(null,e,t)}function mwe(e){return e.read_shift(4,"i")}function lu(e,t){return t||(t=Ht(4)),t.write_shift(4,e),t}function ul(e){var t=e.read_shift(4);return t===0?"":e.read_shift(t,"dbcs")}function Ao(e,t){var r=!1;return t==null&&(r=!0,t=Ht(4+2*e.length)),t.write_shift(4,e.length),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}function xwe(e){return{ich:e.read_shift(2),ifnt:e.read_shift(2)}}function pwe(e,t){return t||(t=Ht(4)),t.write_shift(2,0),t.write_shift(2,0),t}function uE(e,t){var r=e.l,n=e.read_shift(1),a=ul(e),i=[],o={t:a,h:a};if((n&1)!==0){for(var l=e.read_shift(4),d=0;d!=l;++d)i.push(xwe(e));o.r=i}else o.r=[{ich:0,ifnt:0}];return e.l=r+t,o}function gwe(e,t){var r=!1;return t==null&&(r=!0,t=Ht(15+4*e.t.length)),t.write_shift(1,0),Ao(e.t,t),r?t.slice(0,t.l):t}var bwe=uE;function vwe(e,t){var r=!1;return t==null&&(r=!0,t=Ht(23+4*e.t.length)),t.write_shift(1,1),Ao(e.t,t),t.write_shift(4,1),pwe({},t),r?t.slice(0,t.l):t}function Ed(e){var t=e.read_shift(4),r=e.read_shift(2);return r+=e.read_shift(1)<<16,e.l++,{c:t,iStyleRef:r}}function ux(e,t){return t==null&&(t=Ht(8)),t.write_shift(-4,e.c),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}function hx(e){var t=e.read_shift(2);return t+=e.read_shift(1)<<16,e.l++,{c:-1,iStyleRef:t}}function fx(e,t){return t==null&&(t=Ht(4)),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}var ywe=ul,SW=Ao;function hE(e){var t=e.read_shift(4);return t===0||t===4294967295?"":e.read_shift(t,"dbcs")}function kk(e,t){var r=!1;return t==null&&(r=!0,t=Ht(127)),t.write_shift(4,e.length>0?e.length:4294967295),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}var wwe=ul,Bj=hE,fE=kk;function mE(e){var t=e.slice(e.l,e.l+4),r=t[0]&1,n=t[0]&2;e.l+=4;var a=n===0?wk([0,0,0,0,t[0]&252,t[1],t[2],t[3]],0):am(t,0)>>2;return r?a/100:a}function jW(e,t){t==null&&(t=Ht(4));var r=0,n=0,a=e*100;if(e==(e|0)&&e>=-536870912&&e<1<<29?n=1:a==(a|0)&&a>=-536870912&&a<1<<29&&(n=1,r=1),n)t.write_shift(-4,((r?a:e)<<2)+(r+2));else throw new Error("unsupported RkNumber "+e)}function CW(e){var t={s:{},e:{}};return t.s.r=e.read_shift(4),t.e.r=e.read_shift(4),t.s.c=e.read_shift(4),t.e.c=e.read_shift(4),t}function kwe(e,t){return t||(t=Ht(16)),t.write_shift(4,e.s.r),t.write_shift(4,e.e.r),t.write_shift(4,e.s.c),t.write_shift(4,e.e.c),t}var mx=CW,Pp=kwe;function cl(e){if(e.length-e.l<8)throw"XLS Xnum Buffer underflow";return e.read_shift(8,"f")}function Jm(e,t){return(t||Ht(8)).write_shift(8,e,"f")}function Nwe(e){var t={},r=e.read_shift(1),n=r>>>1,a=e.read_shift(1),i=e.read_shift(2,"i"),o=e.read_shift(1),l=e.read_shift(1),d=e.read_shift(1);switch(e.l++,n){case 0:t.auto=1;break;case 1:t.index=a;var c=Am[a];c&&(t.rgb=Ib(c));break;case 2:t.rgb=Ib([o,l,d]);break;case 3:t.theme=a;break}return i!=0&&(t.tint=i>0?i/32767:i/32768),t}function Nk(e,t){if(t||(t=Ht(8)),!e||e.auto)return t.write_shift(4,0),t.write_shift(4,0),t;e.index!=null?(t.write_shift(1,2),t.write_shift(1,e.index)):e.theme!=null?(t.write_shift(1,6),t.write_shift(1,e.theme)):(t.write_shift(1,5),t.write_shift(1,0));var r=e.tint||0;if(r>0?r*=32767:r<0&&(r*=32768),t.write_shift(2,r),!e.rgb||e.theme!=null)t.write_shift(2,0),t.write_shift(1,0),t.write_shift(1,0);else{var n=e.rgb||"FFFFFF";typeof n=="number"&&(n=("000000"+n.toString(16)).slice(-6)),t.write_shift(1,parseInt(n.slice(0,2),16)),t.write_shift(1,parseInt(n.slice(2,4),16)),t.write_shift(1,parseInt(n.slice(4,6),16)),t.write_shift(1,255)}return t}function _we(e){var t=e.read_shift(1);e.l++;var r={fBold:t&1,fItalic:t&2,fUnderline:t&4,fStrikeout:t&8,fOutline:t&16,fShadow:t&32,fCondense:t&64,fExtend:t&128};return r}function Swe(e,t){t||(t=Ht(2));var r=(e.italic?2:0)|(e.strike?8:0)|(e.outline?16:0)|(e.shadow?32:0)|(e.condense?64:0)|(e.extend?128:0);return t.write_shift(1,r),t.write_shift(1,0),t}function AW(e,t){var r={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},n=e.read_shift(4);switch(n){case 0:return"";case 4294967295:case 4294967294:return r[e.read_shift(4)]||""}if(n>400)throw new Error("Unsupported Clipboard: "+n.toString(16));return e.l-=4,e.read_shift(0,t==1?"lpstr":"lpwstr")}function jwe(e){return AW(e,1)}function Cwe(e){return AW(e,2)}var xE=2,sc=3,ty=11,wM=12,_k=19,ry=64,Awe=65,Ewe=71,Twe=4108,Owe=4126,_o=80,EW=81,Pwe=[_o,EW],Uj={1:{n:"CodePage",t:xE},2:{n:"Category",t:_o},3:{n:"PresentationFormat",t:_o},4:{n:"ByteCount",t:sc},5:{n:"LineCount",t:sc},6:{n:"ParagraphCount",t:sc},7:{n:"SlideCount",t:sc},8:{n:"NoteCount",t:sc},9:{n:"HiddenCount",t:sc},10:{n:"MultimediaClipCount",t:sc},11:{n:"ScaleCrop",t:ty},12:{n:"HeadingPairs",t:Twe},13:{n:"TitlesOfParts",t:Owe},14:{n:"Manager",t:_o},15:{n:"Company",t:_o},16:{n:"LinksUpToDate",t:ty},17:{n:"CharacterCount",t:sc},19:{n:"SharedDoc",t:ty},22:{n:"HyperlinksChanged",t:ty},23:{n:"AppVersion",t:sc,p:"version"},24:{n:"DigSig",t:Awe},26:{n:"ContentType",t:_o},27:{n:"ContentStatus",t:_o},28:{n:"Language",t:_o},29:{n:"Version",t:_o},255:{},2147483648:{n:"Locale",t:_k},2147483651:{n:"Behavior",t:_k},1919054434:{}},zj={1:{n:"CodePage",t:xE},2:{n:"Title",t:_o},3:{n:"Subject",t:_o},4:{n:"Author",t:_o},5:{n:"Keywords",t:_o},6:{n:"Comments",t:_o},7:{n:"Template",t:_o},8:{n:"LastAuthor",t:_o},9:{n:"RevNumber",t:_o},10:{n:"EditTime",t:ry},11:{n:"LastPrinted",t:ry},12:{n:"CreatedDate",t:ry},13:{n:"ModifiedDate",t:ry},14:{n:"PageCount",t:sc},15:{n:"WordCount",t:sc},16:{n:"CharCount",t:sc},17:{n:"Thumbnail",t:Ewe},18:{n:"Application",t:_o},19:{n:"DocSecurity",t:sc},255:{},2147483648:{n:"Locale",t:_k},2147483651:{n:"Behavior",t:_k},1919054434:{}},kM={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},Iwe=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function Dwe(e){return e.map(function(t){return[t>>16&255,t>>8&255,t&255]})}var Mwe=Dwe([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Am=Ms(Mwe),bh={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},TW={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},qj={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},ny={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function pE(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function Lwe(e){var t=pE();if(!e||!e.match)return t;var r={};if((e.match(fl)||[]).forEach(function(n){var a=In(n);switch(a[0].replace(Wye,"<")){case"<?xml":break;case"<Types":t.xmlns=a["xmlns"+(a[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":r[a.Extension]=a.ContentType;break;case"<Override":t[qj[a.ContentType]]!==void 0&&t[qj[a.ContentType]].push(a.PartName);break}}),t.xmlns!==no.CT)throw new Error("Unknown Namespace: "+t.xmlns);return t.calcchain=t.calcchains.length>0?t.calcchains[0]:"",t.sst=t.strs.length>0?t.strs[0]:"",t.style=t.styles.length>0?t.styles[0]:"",t.defaults=r,delete t.calcchains,t}function OW(e,t){var r=Lye(qj),n=[],a;n[n.length]=Di,n[n.length]=kr("Types",null,{xmlns:no.CT,"xmlns:xsd":no.xsd,"xmlns:xsi":no.xsi}),n=n.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(d){return kr("Default",null,{Extension:d[0],ContentType:d[1]})}));var i=function(d){e[d]&&e[d].length>0&&(a=e[d][0],n[n.length]=kr("Override",null,{PartName:(a[0]=="/"?"":"/")+a,ContentType:ny[d][t.bookType]||ny[d].xlsx}))},o=function(d){(e[d]||[]).forEach(function(c){n[n.length]=kr("Override",null,{PartName:(c[0]=="/"?"":"/")+c,ContentType:ny[d][t.bookType]||ny[d].xlsx})})},l=function(d){(e[d]||[]).forEach(function(c){n[n.length]=kr("Override",null,{PartName:(c[0]=="/"?"":"/")+c,ContentType:r[d][0]})})};return i("workbooks"),o("sheets"),o("charts"),l("themes"),["strs","styles"].forEach(i),["coreprops","extprops","custprops"].forEach(l),l("vba"),l("comments"),l("threadedcomments"),l("drawings"),o("metadata"),l("people"),n.length>2&&(n[n.length]="</Types>",n[1]=n[1].replace("/>",">")),n.join("")}var ca={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function Pb(e){var t=e.lastIndexOf("/");return e.slice(0,t+1)+"_rels/"+e.slice(t+1)+".rels"}function Yg(e,t){var r={"!id":{}};if(!e)return r;t.charAt(0)!=="/"&&(t="/"+t);var n={};return(e.match(fl)||[]).forEach(function(a){var i=In(a);if(i[0]==="<Relationship"){var o={};o.Type=i.Type,o.Target=i.Target,o.Id=i.Id,i.TargetMode&&(o.TargetMode=i.TargetMode);var l=i.TargetMode==="External"?i.Target:zg(i.Target,t);r[l]=o,n[i.Id]=o}}),r["!id"]=n,r}function T1(e){var t=[Di,kr("Relationships",null,{xmlns:no.RELS})];return gi(e["!id"]).forEach(function(r){t[t.length]=kr("Relationship",null,e["!id"][r])}),t.length>2&&(t[t.length]="</Relationships>",t[1]=t[1].replace("/>",">")),t.join("")}function Ya(e,t,r,n,a,i){if(a||(a={}),e["!id"]||(e["!id"]={}),e["!idx"]||(e["!idx"]=1),t<0)for(t=e["!idx"];e["!id"]["rId"+t];++t);if(e["!idx"]=t+1,a.Id="rId"+t,a.Type=n,a.Target=r,[ca.HLINK,ca.XPATH,ca.XMISS].indexOf(a.Type)>-1&&(a.TargetMode="External"),e["!id"][a.Id])throw new Error("Cannot rewrite rId "+t);return e["!id"][a.Id]=a,e[("/"+a.Target).replace("//","/")]=a,t}var Rwe="application/vnd.oasis.opendocument.spreadsheet";function Fwe(e,t){for(var r=iE(e),n,a;n=Ob.exec(r);)switch(n[3]){case"manifest":break;case"file-entry":if(a=In(n[0],!1),a.path=="/"&&a.type!==Rwe)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(t&&t.WTF)throw n}}function Bwe(e){var t=[Di];t.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),t.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var r=0;r<e.length;++r)t.push('  <manifest:file-entry manifest:full-path="'+e[r][0]+'" manifest:media-type="'+e[r][1]+`"/>
`);return t.push("</manifest:manifest>"),t.join("")}function NM(e,t,r){return['  <rdf:Description rdf:about="'+e+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(r||"odf")+"#"+t+`"/>
`,`  </rdf:Description>
`].join("")}function Uwe(e,t){return['  <rdf:Description rdf:about="'+e+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+t+`"/>
`,`  </rdf:Description>
`].join("")}function zwe(e){var t=[Di];t.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var r=0;r!=e.length;++r)t.push(NM(e[r][0],e[r][1])),t.push(Uwe("",e[r][0]));return t.push(NM("","Document","pkg")),t.push("</rdf:RDF>"),t.join("")}function PW(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+pk.version+"</meta:generator></office:meta></office:document-meta>"}var yd=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],qwe=(function(){for(var e=new Array(yd.length),t=0;t<yd.length;++t){var r=yd[t],n="(?:"+r[0].slice(0,r[0].indexOf(":"))+":)"+r[0].slice(r[0].indexOf(":")+1);e[t]=new RegExp("<"+n+"[^>]*>([\\s\\S]*?)</"+n+">")}return e})();function IW(e){var t={};e=ls(e);for(var r=0;r<yd.length;++r){var n=yd[r],a=e.match(qwe[r]);a!=null&&a.length>0&&(t[n[1]]=Pa(a[1])),n[2]==="date"&&t[n[1]]&&(t[n[1]]=Ds(t[n[1]]))}return t}function h_(e,t,r,n,a){a[e]!=null||t==null||t===""||(a[e]=t,t=Ja(t),n[n.length]=r?kr(e,t,r):zo(e,t))}function DW(e,t){var r=t||{},n=[Di,kr("cp:coreProperties",null,{"xmlns:cp":no.CORE_PROPS,"xmlns:dc":no.dc,"xmlns:dcterms":no.dcterms,"xmlns:dcmitype":no.dcmitype,"xmlns:xsi":no.xsi})],a={};if(!e&&!r.Props)return n.join("");e&&(e.CreatedDate!=null&&h_("dcterms:created",typeof e.CreatedDate=="string"?e.CreatedDate:Fj(e.CreatedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,a),e.ModifiedDate!=null&&h_("dcterms:modified",typeof e.ModifiedDate=="string"?e.ModifiedDate:Fj(e.ModifiedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,a));for(var i=0;i!=yd.length;++i){var o=yd[i],l=r.Props&&r.Props[o[1]]!=null?r.Props[o[1]]:e?e[o[1]]:null;l===!0?l="1":l===!1?l="0":typeof l=="number"&&(l=String(l)),l!=null&&h_(o[0],l,null,n,a)}return n.length>2&&(n[n.length]="</cp:coreProperties>",n[1]=n[1].replace("/>",">")),n.join("")}var Em=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],MW=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function LW(e,t,r,n){var a=[];if(typeof e=="string")a=fM(e,n);else for(var i=0;i<e.length;++i)a=a.concat(e[i].map(function(u){return{v:u}}));var o=typeof t=="string"?fM(t,n).map(function(u){return u.v}):t,l=0,d=0;if(o.length>0)for(var c=0;c!==a.length;c+=2){switch(d=+a[c+1].v,a[c].v){case"Worksheets":case"":case"":case" ":case"":case" ":case"Arbeitsbltter":case"alma Sayfalar":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de clculo":case"Planilhas":case"Regneark":case"Hojas de clculo":case"Werkbladen":r.Worksheets=d,r.SheetNames=o.slice(l,l+d);break;case"Named Ranges":case"Rangos con nombre":case"":case"Benannte Bereiche":case"Navngivne omrder":r.NamedRanges=d,r.DefinedNames=o.slice(l,l+d);break;case"Charts":case"Diagramme":r.Chartsheets=d,r.ChartNames=o.slice(l,l+d);break}l+=d}}function Hwe(e,t,r){var n={};return t||(t={}),e=ls(e),Em.forEach(function(a){var i=(e.match(Eb(a[0]))||[])[1];switch(a[2]){case"string":i&&(t[a[1]]=Pa(i));break;case"bool":t[a[1]]=i==="true";break;case"raw":var o=e.match(new RegExp("<"+a[0]+"[^>]*>([\\s\\S]*?)</"+a[0]+">"));o&&o.length>0&&(n[a[1]]=o[1]);break}}),n.HeadingPairs&&n.TitlesOfParts&&LW(n.HeadingPairs,n.TitlesOfParts,t,r),t}function RW(e){var t=[],r=kr;return e||(e={}),e.Application="SheetJS",t[t.length]=Di,t[t.length]=kr("Properties",null,{xmlns:no.EXT_PROPS,"xmlns:vt":no.vt}),Em.forEach(function(n){if(e[n[1]]!==void 0){var a;switch(n[2]){case"string":a=Ja(String(e[n[1]]));break;case"bool":a=e[n[1]]?"true":"false";break}a!==void 0&&(t[t.length]=r(n[0],a))}}),t[t.length]=r("HeadingPairs",r("vt:vector",r("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+r("vt:variant",r("vt:i4",String(e.Worksheets))),{size:2,baseType:"variant"})),t[t.length]=r("TitlesOfParts",r("vt:vector",e.SheetNames.map(function(n){return"<vt:lpstr>"+Ja(n)+"</vt:lpstr>"}).join(""),{size:e.Worksheets,baseType:"lpstr"})),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var $we=/<[^>]+>[^<]*/g;function Vwe(e,t){var r={},n="",a=e.match($we);if(a)for(var i=0;i!=a.length;++i){var o=a[i],l=In(o);switch(l[0]){case"<?xml":break;case"<Properties":break;case"<property":n=Pa(l.name);break;case"</property>":n=null;break;default:if(o.indexOf("<vt:")===0){var d=o.split(">"),c=d[0].slice(4),u=d[1];switch(c){case"lpstr":case"bstr":case"lpwstr":r[n]=Pa(u);break;case"bool":r[n]=Os(u);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":r[n]=parseInt(u,10);break;case"r4":case"r8":case"decimal":r[n]=parseFloat(u);break;case"filetime":case"date":r[n]=Ds(u);break;case"cy":case"error":r[n]=Pa(u);break;default:if(c.slice(-1)=="/")break;t.WTF&&typeof console<"u"&&console.warn("Unexpected",o,c,d)}}else if(o.slice(0,2)!=="</"){if(t.WTF)throw new Error(o)}}}return r}function FW(e){var t=[Di,kr("Properties",null,{xmlns:no.CUST_PROPS,"xmlns:vt":no.vt})];if(!e)return t.join("");var r=1;return gi(e).forEach(function(a){++r,t[t.length]=kr("property",ewe(e[a]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:r,name:Ja(a)})}),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var Hj={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},f_;function Wwe(e,t,r){f_||(f_=B5(Hj)),t=f_[t]||t,e[t]=r}function Gwe(e,t){var r=[];return gi(Hj).map(function(n){for(var a=0;a<yd.length;++a)if(yd[a][1]==n)return yd[a];for(a=0;a<Em.length;++a)if(Em[a][1]==n)return Em[a];throw n}).forEach(function(n){if(e[n[1]]!=null){var a=t&&t.Props&&t.Props[n[1]]!=null?t.Props[n[1]]:e[n[1]];switch(n[2]){case"date":a=new Date(a).toISOString().replace(/\.\d*Z/,"Z");break}typeof a=="number"?a=String(a):a===!0||a===!1?a=a?"1":"0":a instanceof Date&&(a=new Date(a).toISOString().replace(/\.\d*Z/,"")),r.push(zo(Hj[n[1]]||n[1],a))}}),kr("DocumentProperties",r.join(""),{xmlns:Ac.o})}function Kwe(e,t){var r=["Worksheets","SheetNames"],n="CustomDocumentProperties",a=[];return e&&gi(e).forEach(function(i){if(Object.prototype.hasOwnProperty.call(e,i)){for(var o=0;o<yd.length;++o)if(i==yd[o][1])return;for(o=0;o<Em.length;++o)if(i==Em[o][1])return;for(o=0;o<r.length;++o)if(i==r[o])return;var l=e[i],d="string";typeof l=="number"?(d="float",l=String(l)):l===!0||l===!1?(d="boolean",l=l?"1":"0"):l=String(l),a.push(kr(cM(i),l,{"dt:dt":d}))}}),t&&gi(t).forEach(function(i){if(Object.prototype.hasOwnProperty.call(t,i)&&!(e&&Object.prototype.hasOwnProperty.call(e,i))){var o=t[i],l="string";typeof o=="number"?(l="float",o=String(o)):o===!0||o===!1?(l="boolean",o=o?"1":"0"):o instanceof Date?(l="dateTime.tz",o=o.toISOString()):o=String(o),a.push(kr(cM(i),o,{"dt:dt":l}))}}),"<"+n+' xmlns="'+Ac.o+'">'+a.join("")+"</"+n+">"}function gE(e){var t=e.read_shift(4),r=e.read_shift(4);return new Date((r/1e7*Math.pow(2,32)+t/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function Xwe(e){var t=typeof e=="string"?new Date(Date.parse(e)):e,r=t.getTime()/1e3+11644473600,n=r%Math.pow(2,32),a=(r-n)/Math.pow(2,32);n*=1e7,a*=1e7;var i=n/Math.pow(2,32)|0;i>0&&(n=n%Math.pow(2,32),a+=i);var o=Ht(8);return o.write_shift(4,n),o.write_shift(4,a),o}function BW(e,t,r){var n=e.l,a=e.read_shift(0,"lpstr-cp");if(r)for(;e.l-n&3;)++e.l;return a}function UW(e,t,r){var n=e.read_shift(0,"lpwstr");return n}function zW(e,t,r){return t===31?UW(e):BW(e,t,r)}function $j(e,t,r){return zW(e,t,r===!1?0:4)}function Ywe(e,t){if(!t)throw new Error("VtUnalignedString must have positive length");return zW(e,t,0)}function Qwe(e){for(var t=e.read_shift(4),r=[],n=0;n!=t;++n){var a=e.l;r[n]=e.read_shift(0,"lpwstr").replace(Pl,""),e.l-a&2&&(e.l+=2)}return r}function Zwe(e){for(var t=e.read_shift(4),r=[],n=0;n!=t;++n)r[n]=e.read_shift(0,"lpstr-cp").replace(Pl,"");return r}function Jwe(e){var t=e.l,r=Sk(e,EW);e[e.l]==0&&e[e.l+1]==0&&e.l-t&2&&(e.l+=2);var n=Sk(e,sc);return[r,n]}function eke(e){for(var t=e.read_shift(4),r=[],n=0;n<t/2;++n)r.push(Jwe(e));return r}function _M(e,t){for(var r=e.read_shift(4),n={},a=0;a!=r;++a){var i=e.read_shift(4),o=e.read_shift(4);n[i]=e.read_shift(o,t===1200?"utf16le":"utf8").replace(Pl,"").replace(Ug,"!"),t===1200&&o%2&&(e.l+=2)}return e.l&3&&(e.l=e.l>>3<<2),n}function qW(e){var t=e.read_shift(4),r=e.slice(e.l,e.l+t);return e.l+=t,(t&3)>0&&(e.l+=4-(t&3)&3),r}function tke(e){var t={};return t.Size=e.read_shift(4),e.l+=t.Size+3-(t.Size-1)%4,t}function Sk(e,t,r){var n=e.read_shift(2),a,i=r||{};if(e.l+=2,t!==wM&&n!==t&&Pwe.indexOf(t)===-1&&!((t&65534)==4126&&(n&65534)==4126))throw new Error("Expected type "+t+" saw "+n);switch(t===wM?n:t){case 2:return a=e.read_shift(2,"i"),i.raw||(e.l+=2),a;case 3:return a=e.read_shift(4,"i"),a;case 11:return e.read_shift(4)!==0;case 19:return a=e.read_shift(4),a;case 30:return BW(e,n,4).replace(Pl,"");case 31:return UW(e);case 64:return gE(e);case 65:return qW(e);case 71:return tke(e);case 80:return $j(e,n,!i.raw).replace(Pl,"");case 81:return Ywe(e,n).replace(Pl,"");case 4108:return eke(e);case 4126:case 4127:return n==4127?Qwe(e):Zwe(e);default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+n)}}function SM(e,t){var r=Ht(4),n=Ht(4);switch(r.write_shift(4,e==80?31:e),e){case 3:n.write_shift(-4,t);break;case 5:n=Ht(8),n.write_shift(8,t,"f");break;case 11:n.write_shift(4,t?1:0);break;case 64:n=Xwe(t);break;case 31:case 80:for(n=Ht(4+2*(t.length+1)+(t.length%2?0:2)),n.write_shift(4,t.length+1),n.write_shift(0,t,"dbcs");n.l!=n.length;)n.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+t)}return jo([r,n])}function jM(e,t){var r=e.l,n=e.read_shift(4),a=e.read_shift(4),i=[],o=0,l=0,d=-1,c={};for(o=0;o!=a;++o){var u=e.read_shift(4),x=e.read_shift(4);i[o]=[u,x+r]}i.sort(function(O,A){return O[1]-A[1]});var b={};for(o=0;o!=a;++o){if(e.l!==i[o][1]){var g=!0;if(o>0&&t)switch(t[i[o-1][0]].t){case 2:e.l+2===i[o][1]&&(e.l+=2,g=!1);break;case 80:e.l<=i[o][1]&&(e.l=i[o][1],g=!1);break;case 4108:e.l<=i[o][1]&&(e.l=i[o][1],g=!1);break}if((!t||o==0)&&e.l<=i[o][1]&&(g=!1,e.l=i[o][1]),g)throw new Error("Read Error: Expected address "+i[o][1]+" at "+e.l+" :"+o)}if(t){var k=t[i[o][0]];if(b[k.n]=Sk(e,k.t,{raw:!0}),k.p==="version"&&(b[k.n]=String(b[k.n]>>16)+"."+("0000"+String(b[k.n]&65535)).slice(-4)),k.n=="CodePage")switch(b[k.n]){case 0:b[k.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:au(l=b[k.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+b[k.n])}}else if(i[o][0]===1){if(l=b.CodePage=Sk(e,xE),au(l),d!==-1){var y=e.l;e.l=i[d][1],c=_M(e,l),e.l=y}}else if(i[o][0]===0){if(l===0){d=o,e.l=i[o+1][1];continue}c=_M(e,l)}else{var N=c[i[o][0]],S;switch(e[e.l]){case 65:e.l+=4,S=qW(e);break;case 30:e.l+=4,S=$j(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 31:e.l+=4,S=$j(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 3:e.l+=4,S=e.read_shift(4,"i");break;case 19:e.l+=4,S=e.read_shift(4);break;case 5:e.l+=4,S=e.read_shift(8,"f");break;case 11:e.l+=4,S=Ci(e,4);break;case 64:e.l+=4,S=Ds(gE(e));break;default:throw new Error("unparsed value: "+e[e.l])}b[N]=S}}return e.l=r+n,b}var HW=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function rke(e){switch(typeof e){case"boolean":return 11;case"number":return(e|0)==e?3:5;case"string":return 31;case"object":if(e instanceof Date)return 64;break}return-1}function CM(e,t,r){var n=Ht(8),a=[],i=[],o=8,l=0,d=Ht(8),c=Ht(8);if(d.write_shift(4,2),d.write_shift(4,1200),c.write_shift(4,1),i.push(d),a.push(c),o+=8+d.length,!t){c=Ht(8),c.write_shift(4,0),a.unshift(c);var u=[Ht(4)];for(u[0].write_shift(4,e.length),l=0;l<e.length;++l){var x=e[l][0];for(d=Ht(8+2*(x.length+1)+(x.length%2?0:2)),d.write_shift(4,l+2),d.write_shift(4,x.length+1),d.write_shift(0,x,"dbcs");d.l!=d.length;)d.write_shift(1,0);u.push(d)}d=jo(u),i.unshift(d),o+=8+d.length}for(l=0;l<e.length;++l)if(!(t&&!t[e[l][0]])&&!(HW.indexOf(e[l][0])>-1||MW.indexOf(e[l][0])>-1)&&e[l][1]!=null){var b=e[l][1],g=0;if(t){g=+t[e[l][0]];var k=r[g];if(k.p=="version"&&typeof b=="string"){var y=b.split(".");b=(+y[0]<<16)+(+y[1]||0)}d=SM(k.t,b)}else{var N=rke(b);N==-1&&(N=31,b=String(b)),d=SM(N,b)}i.push(d),c=Ht(8),c.write_shift(4,t?g:2+l),a.push(c),o+=8+d.length}var S=8*(i.length+1);for(l=0;l<i.length;++l)a[l].write_shift(4,S),S+=i[l].length;return n.write_shift(4,o),n.write_shift(4,i.length),jo([n].concat(a).concat(i))}function AM(e,t,r){var n=e.content;if(!n)return{};Uo(n,0);var a,i,o,l,d=0;n.chk("feff","Byte Order: "),n.read_shift(2);var c=n.read_shift(4),u=n.read_shift(16);if(u!==yn.utils.consts.HEADER_CLSID&&u!==r)throw new Error("Bad PropertySet CLSID "+u);if(a=n.read_shift(4),a!==1&&a!==2)throw new Error("Unrecognized #Sets: "+a);if(i=n.read_shift(16),l=n.read_shift(4),a===1&&l!==n.l)throw new Error("Length mismatch: "+l+" !== "+n.l);a===2&&(o=n.read_shift(16),d=n.read_shift(4));var x=jM(n,t),b={SystemIdentifier:c};for(var g in x)b[g]=x[g];if(b.FMTID=i,a===1)return b;if(d-n.l==2&&(n.l+=2),n.l!==d)throw new Error("Length mismatch 2: "+n.l+" !== "+d);var k;try{k=jM(n,null)}catch{}for(g in k)b[g]=k[g];return b.FMTID=[i,o],b}function EM(e,t,r,n,a,i){var o=Ht(a?68:48),l=[o];o.write_shift(2,65534),o.write_shift(2,0),o.write_shift(4,842412599),o.write_shift(16,yn.utils.consts.HEADER_CLSID,"hex"),o.write_shift(4,a?2:1),o.write_shift(16,t,"hex"),o.write_shift(4,a?68:48);var d=CM(e,r,n);if(l.push(d),a){var c=CM(a,null,null);o.write_shift(16,i,"hex"),o.write_shift(4,68+d.length),l.push(c)}return jo(l)}function $h(e,t){return e.read_shift(t),null}function nke(e,t){t||(t=Ht(e));for(var r=0;r<e;++r)t.write_shift(1,0);return t}function ake(e,t,r){for(var n=[],a=e.l+t;e.l<a;)n.push(r(e,a-e.l));if(a!==e.l)throw new Error("Slurp error");return n}function Ci(e,t){return e.read_shift(t)===1}function Cl(e,t){return t||(t=Ht(2)),t.write_shift(2,+!!e),t}function Ui(e){return e.read_shift(2,"u")}function xd(e,t){return t||(t=Ht(2)),t.write_shift(2,e),t}function $W(e,t){return ake(e,t,Ui)}function ske(e){var t=e.read_shift(1),r=e.read_shift(1);return r===1?t:t===1}function VW(e,t,r){return r||(r=Ht(2)),r.write_shift(1,t=="e"?+e:+!!e),r.write_shift(1,t=="e"?1:0),r}function Nv(e,t,r){var n=e.read_shift(r&&r.biff>=12?2:1),a="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var i=e.read_shift(1);i&&(a="dbcs-cont")}else r.biff==12&&(a="wstr");r.biff>=2&&r.biff<=5&&(a="cpstr");var o=n?e.read_shift(n,a):"";return o}function ike(e){var t=e.read_shift(2),r=e.read_shift(1),n=r&4,a=r&8,i=1+(r&1),o=0,l,d={};a&&(o=e.read_shift(2)),n&&(l=e.read_shift(4));var c=i==2?"dbcs-cont":"sbcs-cont",u=t===0?"":e.read_shift(t,c);return a&&(e.l+=4*o),n&&(e.l+=l),d.t=u,a||(d.raw="<t>"+d.t+"</t>",d.r=d.t),d}function oke(e){var t=e.t||"",r=Ht(3);r.write_shift(2,t.length),r.write_shift(1,1);var n=Ht(2*t.length);n.write_shift(2*t.length,t,"utf16le");var a=[r,n];return jo(a)}function ex(e,t,r){var n;if(r){if(r.biff>=2&&r.biff<=5)return e.read_shift(t,"cpstr");if(r.biff>=12)return e.read_shift(t,"dbcs-cont")}var a=e.read_shift(1);return a===0?n=e.read_shift(t,"sbcs-cont"):n=e.read_shift(t,"dbcs-cont"),n}function _v(e,t,r){var n=e.read_shift(r&&r.biff==2?1:2);return n===0?(e.l++,""):ex(e,n,r)}function xx(e,t,r){if(r.biff>5)return _v(e,t,r);var n=e.read_shift(1);return n===0?(e.l++,""):e.read_shift(n,r.biff<=4||!e.lens?"cpstr":"sbcs-cont")}function WW(e,t,r){return r||(r=Ht(3+2*e.length)),r.write_shift(2,e.length),r.write_shift(1,1),r.write_shift(31,e,"utf16le"),r}function lke(e){var t=e.read_shift(1);e.l++;var r=e.read_shift(2);return e.l+=2,[t,r]}function cke(e){var t=e.read_shift(4),r=e.l,n=!1;t>24&&(e.l+=t-24,e.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(n=!0),e.l=r);var a=e.read_shift((n?t-24:t)>>1,"utf16le").replace(Pl,"");return n&&(e.l+=24),a}function dke(e){for(var t=e.read_shift(2),r="";t-- >0;)r+="../";var n=e.read_shift(0,"lpstr-ansi");if(e.l+=2,e.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var a=e.read_shift(4);if(a===0)return r+n.replace(/\\/g,"/");var i=e.read_shift(4);if(e.read_shift(2)!=3)throw new Error("Bad FileMoniker");var o=e.read_shift(i>>1,"utf16le").replace(Pl,"");return r+o}function uke(e,t){var r=e.read_shift(16);switch(r){case"e0c9ea79f9bace118c8200aa004ba90b":return cke(e);case"0303000000000000c000000000000046":return dke(e);default:throw new Error("Unsupported Moniker "+r)}}function ay(e){var t=e.read_shift(4),r=t>0?e.read_shift(t,"utf16le").replace(Pl,""):"";return r}function TM(e,t){t||(t=Ht(6+e.length*2)),t.write_shift(4,1+e.length);for(var r=0;r<e.length;++r)t.write_shift(2,e.charCodeAt(r));return t.write_shift(2,0),t}function hke(e,t){var r=e.l+t,n=e.read_shift(4);if(n!==2)throw new Error("Unrecognized streamVersion: "+n);var a=e.read_shift(2);e.l+=2;var i,o,l,d,c="",u,x;a&16&&(i=ay(e,r-e.l)),a&128&&(o=ay(e,r-e.l)),(a&257)===257&&(l=ay(e,r-e.l)),(a&257)===1&&(d=uke(e,r-e.l)),a&8&&(c=ay(e,r-e.l)),a&32&&(u=e.read_shift(16)),a&64&&(x=gE(e)),e.l=r;var b=o||l||d||"";b&&c&&(b+="#"+c),b||(b="#"+c),a&2&&b.charAt(0)=="/"&&b.charAt(1)!="/"&&(b="file://"+b);var g={Target:b};return u&&(g.guid=u),x&&(g.time=x),i&&(g.Tooltip=i),g}function fke(e){var t=Ht(512),r=0,n=e.Target;n.slice(0,7)=="file://"&&(n=n.slice(7));var a=n.indexOf("#"),i=a>-1?31:23;switch(n.charAt(0)){case"#":i=28;break;case".":i&=-3;break}t.write_shift(4,2),t.write_shift(4,i);var o=[8,6815827,6619237,4849780,83];for(r=0;r<o.length;++r)t.write_shift(4,o[r]);if(i==28)n=n.slice(1),TM(n,t);else if(i&2){for(o="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),r=0;r<o.length;++r)t.write_shift(1,parseInt(o[r],16));var l=a>-1?n.slice(0,a):n;for(t.write_shift(4,2*(l.length+1)),r=0;r<l.length;++r)t.write_shift(2,l.charCodeAt(r));t.write_shift(2,0),i&8&&TM(a>-1?n.slice(a+1):"",t)}else{for(o="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),r=0;r<o.length;++r)t.write_shift(1,parseInt(o[r],16));for(var d=0;n.slice(d*3,d*3+3)=="../"||n.slice(d*3,d*3+3)=="..\\";)++d;for(t.write_shift(2,d),t.write_shift(4,n.length-3*d+1),r=0;r<n.length-3*d;++r)t.write_shift(1,n.charCodeAt(r+3*d)&255);for(t.write_shift(1,0),t.write_shift(2,65535),t.write_shift(2,57005),r=0;r<6;++r)t.write_shift(4,0)}return t.slice(0,t.l)}function GW(e){var t=e.read_shift(1),r=e.read_shift(1),n=e.read_shift(1),a=e.read_shift(1);return[t,r,n,a]}function KW(e,t){var r=GW(e);return r[3]=0,r}function e0(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2);return{r:t,c:r,ixfe:n}}function tx(e,t,r,n){return n||(n=Ht(6)),n.write_shift(2,e),n.write_shift(2,t),n.write_shift(2,r||0),n}function mke(e){var t=e.read_shift(2),r=e.read_shift(2);return e.l+=8,{type:t,flags:r}}function xke(e,t,r){return t===0?"":xx(e,t,r)}function pke(e,t,r){var n=r.biff>8?4:2,a=e.read_shift(n),i=e.read_shift(n,"i"),o=e.read_shift(n,"i");return[a,i,o]}function XW(e){var t=e.read_shift(2),r=mE(e);return[t,r]}function gke(e,t,r){e.l+=4,t-=4;var n=e.l+t,a=Nv(e,t,r),i=e.read_shift(2);if(n-=e.l,i!==n)throw new Error("Malformed AddinUdf: padding = "+n+" != "+i);return e.l+=i,a}function q5(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2),a=e.read_shift(2);return{s:{c:n,r:t},e:{c:a,r}}}function YW(e,t){return t||(t=Ht(8)),t.write_shift(2,e.s.r),t.write_shift(2,e.e.r),t.write_shift(2,e.s.c),t.write_shift(2,e.e.c),t}function QW(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(1),a=e.read_shift(1);return{s:{c:n,r:t},e:{c:a,r}}}var bke=QW;function ZW(e){e.l+=4;var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2);return e.l+=12,[r,t,n]}function vke(e){var t={};return e.l+=4,e.l+=16,t.fSharedNote=e.read_shift(2),e.l+=4,t}function yke(e){var t={};return e.l+=4,e.cf=e.read_shift(2),t}function Zo(e){e.l+=2,e.l+=e.read_shift(2)}var wke={0:Zo,4:Zo,5:Zo,6:Zo,7:yke,8:Zo,9:Zo,10:Zo,11:Zo,12:Zo,13:vke,14:Zo,15:Zo,16:Zo,17:Zo,18:Zo,19:Zo,20:Zo,21:ZW};function kke(e,t){for(var r=e.l+t,n=[];e.l<r;){var a=e.read_shift(2);e.l-=2;try{n.push(wke[a](e,r-e.l))}catch{return e.l=r,n}}return e.l!=r&&(e.l=r),n}function sy(e,t){var r={BIFFVer:0,dt:0};switch(r.BIFFVer=e.read_shift(2),t-=2,t>=2&&(r.dt=e.read_shift(2),e.l-=2),r.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(t>6)throw new Error("Unexpected BIFF Ver "+r.BIFFVer)}return e.read_shift(t),r}function bE(e,t,r){var n=1536,a=16;switch(r.bookType){case"biff8":break;case"biff5":n=1280,a=8;break;case"biff4":n=4,a=6;break;case"biff3":n=3,a=6;break;case"biff2":n=2,a=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var i=Ht(a);return i.write_shift(2,n),i.write_shift(2,t),a>4&&i.write_shift(2,29282),a>6&&i.write_shift(2,1997),a>8&&(i.write_shift(2,49161),i.write_shift(2,1),i.write_shift(2,1798),i.write_shift(2,0)),i}function Nke(e,t){return t===0||e.read_shift(2),1200}function _ke(e,t,r){if(r.enc)return e.l+=t,"";var n=e.l,a=xx(e,0,r);return e.read_shift(t+n-e.l),a}function Ske(e,t){var r=!t||t.biff==8,n=Ht(r?112:54);for(n.write_shift(t.biff==8?2:1,7),r&&n.write_shift(1,0),n.write_shift(4,859007059),n.write_shift(4,5458548|(r?0:536870912));n.l<n.length;)n.write_shift(1,r?0:32);return n}function jke(e,t,r){var n=r&&r.biff==8||t==2?e.read_shift(2):(e.l+=t,0);return{fDialog:n&16,fBelow:n&64,fRight:n&128}}function Cke(e,t,r){var n=e.read_shift(4),a=e.read_shift(1)&3,i=e.read_shift(1);switch(i){case 0:i="Worksheet";break;case 1:i="Macrosheet";break;case 2:i="Chartsheet";break;case 6:i="VBAModule";break}var o=Nv(e,0,r);return o.length===0&&(o="Sheet1"),{pos:n,hs:a,dt:i,name:o}}function Ake(e,t){var r=!t||t.biff>=8?2:1,n=Ht(8+r*e.name.length);n.write_shift(4,e.pos),n.write_shift(1,e.hs||0),n.write_shift(1,e.dt),n.write_shift(1,e.name.length),t.biff>=8&&n.write_shift(1,1),n.write_shift(r*e.name.length,e.name,t.biff<8?"sbcs":"utf16le");var a=n.slice(0,n.l);return a.l=n.l,a}function Eke(e,t){for(var r=e.l+t,n=e.read_shift(4),a=e.read_shift(4),i=[],o=0;o!=a&&e.l<r;++o)i.push(ike(e));return i.Count=n,i.Unique=a,i}function Tke(e,t){var r=Ht(8);r.write_shift(4,e.Count),r.write_shift(4,e.Unique);for(var n=[],a=0;a<e.length;++a)n[a]=oke(e[a]);var i=jo([r].concat(n));return i.parts=[r.length].concat(n.map(function(o){return o.length})),i}function Oke(e,t){var r={};return r.dsst=e.read_shift(2),e.l+=t-2,r}function Pke(e){var t={};t.r=e.read_shift(2),t.c=e.read_shift(2),t.cnt=e.read_shift(2)-t.c;var r=e.read_shift(2);e.l+=4;var n=e.read_shift(1);return e.l+=3,n&7&&(t.level=n&7),n&32&&(t.hidden=!0),n&64&&(t.hpt=r/20),t}function Ike(e){var t=mke(e);if(t.type!=2211)throw new Error("Invalid Future Record "+t.type);var r=e.read_shift(4);return r!==0}function Dke(e){return e.read_shift(2),e.read_shift(4)}function OM(e,t,r){var n=0;r&&r.biff==2||(n=e.read_shift(2));var a=e.read_shift(2);r&&r.biff==2&&(n=1-(a>>15),a&=32767);var i={Unsynced:n&1,DyZero:(n&2)>>1,ExAsc:(n&4)>>2,ExDsc:(n&8)>>3};return[i,a]}function Mke(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2),a=e.read_shift(2),i=e.read_shift(2),o=e.read_shift(2),l=e.read_shift(2),d=e.read_shift(2),c=e.read_shift(2);return{Pos:[t,r],Dim:[n,a],Flags:i,CurTab:o,FirstTab:l,Selected:d,TabRatio:c}}function Lke(){var e=Ht(18);return e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,29280),e.write_shift(2,17600),e.write_shift(2,56),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,1),e.write_shift(2,500),e}function Rke(e,t,r){if(r&&r.biff>=2&&r.biff<5)return{};var n=e.read_shift(2);return{RTL:n&64}}function Fke(e){var t=Ht(18),r=1718;return e&&e.RTL&&(r|=64),t.write_shift(2,r),t.write_shift(4,0),t.write_shift(4,64),t.write_shift(4,0),t.write_shift(4,0),t}function Bke(){}function Uke(e,t,r){var n={dyHeight:e.read_shift(2),fl:e.read_shift(2)};switch(r&&r.biff||8){case 2:break;case 3:case 4:e.l+=2;break;default:e.l+=10;break}return n.name=Nv(e,0,r),n}function zke(e,t){var r=e.name||"Arial",n=t&&t.biff==5,a=n?15+r.length:16+2*r.length,i=Ht(a);return i.write_shift(2,e.sz*20),i.write_shift(4,0),i.write_shift(2,400),i.write_shift(4,0),i.write_shift(2,0),i.write_shift(1,r.length),n||i.write_shift(1,1),i.write_shift((n?1:2)*r.length,r,n?"sbcs":"utf16le"),i}function qke(e){var t=e0(e);return t.isst=e.read_shift(4),t}function Hke(e,t,r,n){var a=Ht(10);return tx(e,t,n,a),a.write_shift(4,r),a}function $ke(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=e.l+t,a=e0(e);r.biff==2&&e.l++;var i=_v(e,n-e.l,r);return a.val=i,a}function Vke(e,t,r,n,a){var i=!a||a.biff==8,o=Ht(8+ +i+(1+i)*r.length);return tx(e,t,n,o),o.write_shift(2,r.length),i&&o.write_shift(1,1),o.write_shift((1+i)*r.length,r,i?"utf16le":"sbcs"),o}function Wke(e,t,r){var n=e.read_shift(2),a=xx(e,0,r);return[n,a]}function Gke(e,t,r,n){var a=r&&r.biff==5;n||(n=Ht(a?3+t.length:5+2*t.length)),n.write_shift(2,e),n.write_shift(a?1:2,t.length),a||n.write_shift(1,1),n.write_shift((a?1:2)*t.length,t,a?"sbcs":"utf16le");var i=n.length>n.l?n.slice(0,n.l):n;return i.l==null&&(i.l=i.length),i}var Kke=xx;function PM(e,t,r){var n=e.l+t,a=r.biff==8||!r.biff?4:2,i=e.read_shift(a),o=e.read_shift(a),l=e.read_shift(2),d=e.read_shift(2);return e.l=n,{s:{r:i,c:l},e:{r:o,c:d}}}function Xke(e,t){var r=t.biff==8||!t.biff?4:2,n=Ht(2*r+6);return n.write_shift(r,e.s.r),n.write_shift(r,e.e.r+1),n.write_shift(2,e.s.c),n.write_shift(2,e.e.c+1),n.write_shift(2,0),n}function Yke(e){var t=e.read_shift(2),r=e.read_shift(2),n=XW(e);return{r:t,c:r,ixfe:n[0],rknum:n[1]}}function Qke(e,t){for(var r=e.l+t-2,n=e.read_shift(2),a=e.read_shift(2),i=[];e.l<r;)i.push(XW(e));if(e.l!==r)throw new Error("MulRK read error");var o=e.read_shift(2);if(i.length!=o-a+1)throw new Error("MulRK length mismatch");return{r:n,c:a,C:o,rkrec:i}}function Zke(e,t){for(var r=e.l+t-2,n=e.read_shift(2),a=e.read_shift(2),i=[];e.l<r;)i.push(e.read_shift(2));if(e.l!==r)throw new Error("MulBlank read error");var o=e.read_shift(2);if(i.length!=o-a+1)throw new Error("MulBlank length mismatch");return{r:n,c:a,C:o,ixfe:i}}function Jke(e,t,r,n){var a={},i=e.read_shift(4),o=e.read_shift(4),l=e.read_shift(4),d=e.read_shift(2);return a.patternType=Iwe[l>>26],n.cellStyles&&(a.alc=i&7,a.fWrap=i>>3&1,a.alcV=i>>4&7,a.fJustLast=i>>7&1,a.trot=i>>8&255,a.cIndent=i>>16&15,a.fShrinkToFit=i>>20&1,a.iReadOrder=i>>22&2,a.fAtrNum=i>>26&1,a.fAtrFnt=i>>27&1,a.fAtrAlc=i>>28&1,a.fAtrBdr=i>>29&1,a.fAtrPat=i>>30&1,a.fAtrProt=i>>31&1,a.dgLeft=o&15,a.dgRight=o>>4&15,a.dgTop=o>>8&15,a.dgBottom=o>>12&15,a.icvLeft=o>>16&127,a.icvRight=o>>23&127,a.grbitDiag=o>>30&3,a.icvTop=l&127,a.icvBottom=l>>7&127,a.icvDiag=l>>14&127,a.dgDiag=l>>21&15,a.icvFore=d&127,a.icvBack=d>>7&127,a.fsxButton=d>>14&1),a}function e5e(e,t,r){var n={};return n.ifnt=e.read_shift(2),n.numFmtId=e.read_shift(2),n.flags=e.read_shift(2),n.fStyle=n.flags>>2&1,t-=6,n.data=Jke(e,t,n.fStyle,r),n}function IM(e,t,r,n){var a=r&&r.biff==5;n||(n=Ht(a?16:20)),n.write_shift(2,0),e.style?(n.write_shift(2,e.numFmtId||0),n.write_shift(2,65524)):(n.write_shift(2,e.numFmtId||0),n.write_shift(2,t<<4));var i=0;return e.numFmtId>0&&a&&(i|=1024),n.write_shift(4,i),n.write_shift(4,0),a||n.write_shift(4,0),n.write_shift(2,0),n}function t5e(e){e.l+=4;var t=[e.read_shift(2),e.read_shift(2)];if(t[0]!==0&&t[0]--,t[1]!==0&&t[1]--,t[0]>7||t[1]>7)throw new Error("Bad Gutters: "+t.join("|"));return t}function r5e(e){var t=Ht(8);return t.write_shift(4,0),t.write_shift(2,0),t.write_shift(2,0),t}function DM(e,t,r){var n=e0(e);(r.biff==2||t==9)&&++e.l;var a=ske(e);return n.val=a,n.t=a===!0||a===!1?"b":"e",n}function n5e(e,t,r,n,a,i){var o=Ht(8);return tx(e,t,n,o),VW(r,i,o),o}function a5e(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=e0(e),a=cl(e);return n.val=a,n}function s5e(e,t,r,n){var a=Ht(14);return tx(e,t,n,a),Jm(r,a),a}var MM=xke;function i5e(e,t,r){var n=e.l+t,a=e.read_shift(2),i=e.read_shift(2);if(r.sbcch=i,i==1025||i==14849)return[i,a];if(i<1||i>255)throw new Error("Unexpected SupBook type: "+i);for(var o=ex(e,i),l=[];n>e.l;)l.push(_v(e));return[i,a,o,l]}function LM(e,t,r){var n=e.read_shift(2),a,i={fBuiltIn:n&1,fWantAdvise:n>>>1&1,fWantPict:n>>>2&1,fOle:n>>>3&1,fOleLink:n>>>4&1,cf:n>>>5&1023,fIcon:n>>>15&1};return r.sbcch===14849&&(a=gke(e,t-2,r)),i.body=a||e.read_shift(t-2),typeof a=="string"&&(i.Name=a),i}var o5e=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function RM(e,t,r){var n=e.l+t,a=e.read_shift(2),i=e.read_shift(1),o=e.read_shift(1),l=e.read_shift(r&&r.biff==2?1:2),d=0;(!r||r.biff>=5)&&(r.biff!=5&&(e.l+=2),d=e.read_shift(2),r.biff==5&&(e.l+=2),e.l+=4);var c=ex(e,o,r);a&32&&(c=o5e[c.charCodeAt(0)]);var u=n-e.l;r&&r.biff==2&&--u;var x=n==e.l||l===0||!(u>0)?[]:k_e(e,u,r,l);return{chKey:i,Name:c,itab:d,rgce:x}}function JW(e,t,r){if(r.biff<8)return l5e(e,t,r);for(var n=[],a=e.l+t,i=e.read_shift(r.biff>8?4:2);i--!==0;)n.push(pke(e,r.biff>8?12:6,r));if(e.l!=a)throw new Error("Bad ExternSheet: "+e.l+" != "+a);return n}function l5e(e,t,r){e[e.l+1]==3&&e[e.l]++;var n=Nv(e,t,r);return n.charCodeAt(0)==3?n.slice(1):n}function c5e(e,t,r){if(r.biff<8){e.l+=t;return}var n=e.read_shift(2),a=e.read_shift(2),i=ex(e,n,r),o=ex(e,a,r);return[i,o]}function d5e(e,t,r){var n=QW(e);e.l++;var a=e.read_shift(1);return t-=8,[N_e(e,t,r),a,n]}function FM(e,t,r){var n=bke(e);switch(r.biff){case 2:e.l++,t-=7;break;case 3:case 4:e.l+=2,t-=8;break;default:e.l+=6,t-=12}return[n,y_e(e,t,r)]}function u5e(e){var t=e.read_shift(4)!==0,r=e.read_shift(4)!==0,n=e.read_shift(4);return[t,r,n]}function h5e(e,t,r){if(!(r.biff<8)){var n=e.read_shift(2),a=e.read_shift(2),i=e.read_shift(2),o=e.read_shift(2),l=xx(e,0,r);return r.biff<8&&e.read_shift(1),[{r:n,c:a},l,o,i]}}function f5e(e,t,r){return h5e(e,t,r)}function m5e(e,t){for(var r=[],n=e.read_shift(2);n--;)r.push(q5(e));return r}function x5e(e){var t=Ht(2+e.length*8);t.write_shift(2,e.length);for(var r=0;r<e.length;++r)YW(e[r],t);return t}function p5e(e,t,r){if(r&&r.biff<8)return b5e(e,t,r);var n=ZW(e),a=kke(e,t-22,n[1]);return{cmo:n,ft:a}}var g5e={8:function(e,t){var r=e.l+t;e.l+=10;var n=e.read_shift(2);e.l+=4,e.l+=2,e.l+=2,e.l+=2,e.l+=4;var a=e.read_shift(1);return e.l+=a,e.l=r,{fmt:n}}};function b5e(e,t,r){e.l+=4;var n=e.read_shift(2),a=e.read_shift(2),i=e.read_shift(2);e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=6,t-=36;var o=[];return o.push((g5e[n]||hl)(e,t,r)),{cmo:[a,n,i],ft:o}}function v5e(e,t,r){var n=e.l,a="";try{e.l+=4;var i=(r.lastobj||{cmo:[0,0]}).cmo[1],o;[0,5,7,11,12,14].indexOf(i)==-1?e.l+=6:o=lke(e,6,r);var l=e.read_shift(2);e.read_shift(2),Ui(e,2);var d=e.read_shift(2);e.l+=d;for(var c=1;c<e.lens.length-1;++c){if(e.l-n!=e.lens[c])throw new Error("TxO: bad continue record");var u=e[e.l],x=ex(e,e.lens[c+1]-e.lens[c]-1);if(a+=x,a.length>=(u?l:2*l))break}if(a.length!==l&&a.length!==l*2)throw new Error("cchText: "+l+" != "+a.length);return e.l=n+t,{t:a}}catch{return e.l=n+t,{t:a}}}function y5e(e,t){var r=q5(e);e.l+=16;var n=hke(e,t-24);return[r,n]}function w5e(e){var t=Ht(24),r=ei(e[0]);t.write_shift(2,r.r),t.write_shift(2,r.r),t.write_shift(2,r.c),t.write_shift(2,r.c);for(var n="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),a=0;a<16;++a)t.write_shift(1,parseInt(n[a],16));return jo([t,fke(e[1])])}function k5e(e,t){e.read_shift(2);var r=q5(e),n=e.read_shift((t-10)/2,"dbcs-cont");return n=n.replace(Pl,""),[r,n]}function N5e(e){var t=e[1].Tooltip,r=Ht(10+2*(t.length+1));r.write_shift(2,2048);var n=ei(e[0]);r.write_shift(2,n.r),r.write_shift(2,n.r),r.write_shift(2,n.c),r.write_shift(2,n.c);for(var a=0;a<t.length;++a)r.write_shift(2,t.charCodeAt(a));return r.write_shift(2,0),r}function _5e(e){var t=[0,0],r;return r=e.read_shift(2),t[0]=kM[r]||r,r=e.read_shift(2),t[1]=kM[r]||r,t}function S5e(e){return e||(e=Ht(4)),e.write_shift(2,1),e.write_shift(2,1),e}function j5e(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(KW(e));return r}function C5e(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(KW(e));return r}function A5e(e){e.l+=2;var t={cxfs:0,crc:0};return t.cxfs=e.read_shift(2),t.crc=e.read_shift(4),t}function eG(e,t,r){if(!r.cellStyles)return hl(e,t);var n=r&&r.biff>=12?4:2,a=e.read_shift(n),i=e.read_shift(n),o=e.read_shift(n),l=e.read_shift(n),d=e.read_shift(2);n==2&&(e.l+=2);var c={s:a,e:i,w:o,ixfe:l,flags:d};return(r.biff>=5||!r.biff)&&(c.level=d>>8&7),c}function E5e(e,t){var r=Ht(12);r.write_shift(2,t),r.write_shift(2,t),r.write_shift(2,e.width*256),r.write_shift(2,0);var n=0;return e.hidden&&(n|=1),r.write_shift(1,n),n=e.level||0,r.write_shift(1,n),r.write_shift(2,0),r}function T5e(e,t){var r={};return t<32||(e.l+=16,r.header=cl(e),r.footer=cl(e),e.l+=2),r}function O5e(e,t,r){var n={area:!1};if(r.biff!=5)return e.l+=t,n;var a=e.read_shift(1);return e.l+=3,a&16&&(n.area=!0),n}function P5e(e){for(var t=Ht(2*e),r=0;r<e;++r)t.write_shift(2,r+1);return t}var I5e=e0,D5e=$W,M5e=_v;function L5e(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(4),a={fmt:t,env:r,len:n,data:e.slice(e.l,e.l+n)};return e.l+=n,a}function R5e(e,t,r){r.biffguess&&r.biff==5&&(r.biff=2);var n=e0(e);++e.l;var a=xx(e,t-7,r);return n.t="str",n.val=a,n}function F5e(e){var t=e0(e);++e.l;var r=cl(e);return t.t="n",t.val=r,t}function B5e(e,t,r){var n=Ht(15);return Av(n,e,t),n.write_shift(8,r,"f"),n}function U5e(e){var t=e0(e);++e.l;var r=e.read_shift(2);return t.t="n",t.val=r,t}function z5e(e,t,r){var n=Ht(9);return Av(n,e,t),n.write_shift(2,r),n}function q5e(e){var t=e.read_shift(1);return t===0?(e.l++,""):e.read_shift(t,"sbcs-cont")}function H5e(e,t){e.l+=6,e.l+=2,e.l+=1,e.l+=3,e.l+=1,e.l+=t-13}function $5e(e,t,r){var n=e.l+t,a=e0(e),i=e.read_shift(2),o=ex(e,i,r);return e.l=n,a.t="str",a.val=o,a}var V5e=[2,3,48,49,131,139,140,245],Vj=(function(){var e={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},t=B5({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(l,d){var c=[],u=vf(1);switch(d.type){case"base64":u=Ic(Uc(l));break;case"binary":u=Ic(l);break;case"buffer":case"array":u=l;break}Uo(u,0);var x=u.read_shift(1),b=!!(x&136),g=!1,k=!1;switch(x){case 2:break;case 3:break;case 48:g=!0,b=!0;break;case 49:g=!0,b=!0;break;case 131:break;case 139:break;case 140:k=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+x.toString(16))}var y=0,N=521;x==2&&(y=u.read_shift(2)),u.l+=3,x!=2&&(y=u.read_shift(4)),y>1048576&&(y=1e6),x!=2&&(N=u.read_shift(2));var S=u.read_shift(2),O=d.codepage||1252;x!=2&&(u.l+=16,u.read_shift(1),u[u.l]!==0&&(O=e[u[u.l]]),u.l+=1,u.l+=2),k&&(u.l+=36);for(var A=[],P={},q=Math.min(u.length,x==2?521:N-10-(g?264:0)),W=k?32:11;u.l<q&&u[u.l]!=13;)switch(P={},P.name=jb.utils.decode(O,u.slice(u.l,u.l+W)).replace(/[\u0000\r\n].*$/g,""),u.l+=W,P.type=String.fromCharCode(u.read_shift(1)),x!=2&&!k&&(P.offset=u.read_shift(4)),P.len=u.read_shift(1),x==2&&(P.offset=u.read_shift(2)),P.dec=u.read_shift(1),P.name.length&&A.push(P),x!=2&&(u.l+=k?13:14),P.type){case"B":(!g||P.len!=8)&&d.WTF&&console.log("Skipping "+P.name+":"+P.type);break;case"G":case"P":d.WTF&&console.log("Skipping "+P.name+":"+P.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+P.type)}if(u[u.l]!==13&&(u.l=N-1),u.read_shift(1)!==13)throw new Error("DBF Terminator not found "+u.l+" "+u[u.l]);u.l=N;var R=0,U=0;for(c[0]=[],U=0;U!=A.length;++U)c[0][U]=A[U].name;for(;y-- >0;){if(u[u.l]===42){u.l+=S;continue}for(++u.l,c[++R]=[],U=0,U=0;U!=A.length;++U){var L=u.slice(u.l,u.l+A[U].len);u.l+=A[U].len,Uo(L,0);var Q=jb.utils.decode(O,L);switch(A[U].type){case"C":Q.trim().length&&(c[R][U]=Q.replace(/\s+$/,""));break;case"D":Q.length===8?c[R][U]=new Date(+Q.slice(0,4),+Q.slice(4,6)-1,+Q.slice(6,8)):c[R][U]=Q;break;case"F":c[R][U]=parseFloat(Q.trim());break;case"+":case"I":c[R][U]=k?L.read_shift(-4,"i")^2147483648:L.read_shift(4,"i");break;case"L":switch(Q.trim().toUpperCase()){case"Y":case"T":c[R][U]=!0;break;case"N":case"F":c[R][U]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+Q+"|")}break;case"M":if(!b)throw new Error("DBF Unexpected MEMO for type "+x.toString(16));c[R][U]="##MEMO##"+(k?parseInt(Q.trim(),10):L.read_shift(4));break;case"N":Q=Q.replace(/\u0000/g,"").trim(),Q&&Q!="."&&(c[R][U]=+Q||0);break;case"@":c[R][U]=new Date(L.read_shift(-8,"f")-621356832e5);break;case"T":c[R][U]=new Date((L.read_shift(4)-2440588)*864e5+L.read_shift(4));break;case"Y":c[R][U]=L.read_shift(4,"i")/1e4+L.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":c[R][U]=-L.read_shift(-8,"f");break;case"B":if(g&&A[U].len==8){c[R][U]=L.read_shift(8,"f");break}case"G":case"P":L.l+=A[U].len;break;case"0":if(A[U].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+A[U].type)}}}if(x!=2&&u.l<u.length&&u[u.l++]!=26)throw new Error("DBF EOF Marker missing "+(u.l-1)+" of "+u.length+" "+u[u.l-1].toString(16));return d&&d.sheetRows&&(c=c.slice(0,d.sheetRows)),d.DBF=A,c}function n(l,d){var c=d||{};c.dateNF||(c.dateNF="yyyymmdd");var u=Op(r(l,c),c);return u["!cols"]=c.DBF.map(function(x){return{wch:x.len,DBF:x}}),delete c.DBF,u}function a(l,d){try{return Tf(n(l,d),d)}catch(c){if(d&&d.WTF)throw c}return{SheetNames:[],Sheets:{}}}var i={B:8,C:250,L:1,D:8,"?":0,"":0};function o(l,d){var c=d||{};if(+c.codepage>=0&&au(+c.codepage),c.type=="string")throw new Error("Cannot write DBF to JS string");var u=cc(),x=Ak(l,{header:1,raw:!0,cellDates:!0}),b=x[0],g=x.slice(1),k=l["!cols"]||[],y=0,N=0,S=0,O=1;for(y=0;y<b.length;++y){if(((k[y]||{}).DBF||{}).name){b[y]=k[y].DBF.name,++S;continue}if(b[y]!=null){if(++S,typeof b[y]=="number"&&(b[y]=b[y].toString(10)),typeof b[y]!="string")throw new Error("DBF Invalid column name "+b[y]+" |"+typeof b[y]+"|");if(b.indexOf(b[y])!==y){for(N=0;N<1024;++N)if(b.indexOf(b[y]+"_"+N)==-1){b[y]+="_"+N;break}}}}var A=Ia(l["!ref"]),P=[],q=[],W=[];for(y=0;y<=A.e.c-A.s.c;++y){var R="",U="",L=0,Q=[];for(N=0;N<g.length;++N)g[N][y]!=null&&Q.push(g[N][y]);if(Q.length==0||b[y]==null){P[y]="?";continue}for(N=0;N<Q.length;++N){switch(typeof Q[N]){case"number":U="B";break;case"string":U="C";break;case"boolean":U="L";break;case"object":U=Q[N]instanceof Date?"D":"C";break;default:U="C"}L=Math.max(L,String(Q[N]).length),R=R&&R!=U?"C":U}L>250&&(L=250),U=((k[y]||{}).DBF||{}).type,U=="C"&&k[y].DBF.len>L&&(L=k[y].DBF.len),R=="B"&&U=="N"&&(R="N",W[y]=k[y].DBF.dec,L=k[y].DBF.len),q[y]=R=="C"||U=="N"?L:i[R]||0,O+=q[y],P[y]=R}var H=u.next(32);for(H.write_shift(4,318902576),H.write_shift(4,g.length),H.write_shift(2,296+32*S),H.write_shift(2,O),y=0;y<4;++y)H.write_shift(4,0);for(H.write_shift(4,0|(+t[HV]||3)<<8),y=0,N=0;y<b.length;++y)if(b[y]!=null){var G=u.next(32),Z=(b[y].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);G.write_shift(1,Z,"sbcs"),G.write_shift(1,P[y]=="?"?"C":P[y],"sbcs"),G.write_shift(4,N),G.write_shift(1,q[y]||i[P[y]]||0),G.write_shift(1,W[y]||0),G.write_shift(1,2),G.write_shift(4,0),G.write_shift(1,0),G.write_shift(4,0),G.write_shift(4,0),N+=q[y]||i[P[y]]||0}var te=u.next(264);for(te.write_shift(4,13),y=0;y<65;++y)te.write_shift(4,0);for(y=0;y<g.length;++y){var se=u.next(O);for(se.write_shift(1,0),N=0;N<b.length;++N)if(b[N]!=null)switch(P[N]){case"L":se.write_shift(1,g[y][N]==null?63:g[y][N]?84:70);break;case"B":se.write_shift(8,g[y][N]||0,"f");break;case"N":var ue="0";for(typeof g[y][N]=="number"&&(ue=g[y][N].toFixed(W[N]||0)),S=0;S<q[N]-ue.length;++S)se.write_shift(1,32);se.write_shift(1,ue,"sbcs");break;case"D":g[y][N]?(se.write_shift(4,("0000"+g[y][N].getFullYear()).slice(-4),"sbcs"),se.write_shift(2,("00"+(g[y][N].getMonth()+1)).slice(-2),"sbcs"),se.write_shift(2,("00"+g[y][N].getDate()).slice(-2),"sbcs")):se.write_shift(8,"00000000","sbcs");break;case"C":var ae=String(g[y][N]!=null?g[y][N]:"").slice(0,q[N]);for(se.write_shift(1,ae,"sbcs"),S=0;S<q[N]-ae.length;++S)se.write_shift(1,32);break}}return u.next(1).write_shift(1,26),u.end()}return{to_workbook:a,to_sheet:n,from_sheet:o}})(),tG=(function(){var e={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},t=new RegExp("\x1BN("+gi(e).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(b,g){var k=e[g];return typeof k=="number"?XD(k):k},n=function(b,g,k){var y=g.charCodeAt(0)-32<<4|k.charCodeAt(0)-48;return y==59?b:XD(y)};e["|"]=254;function a(b,g){switch(g.type){case"base64":return i(Uc(b),g);case"binary":return i(b,g);case"buffer":return i(sa&&Buffer.isBuffer(b)?b.toString("binary"):Ef(b),g);case"array":return i(Zm(b),g)}throw new Error("Unrecognized type "+g.type)}function i(b,g){var k=b.split(/[\n\r]+/),y=-1,N=-1,S=0,O=0,A=[],P=[],q=null,W={},R=[],U=[],L=[],Q=0,H;for(+g.codepage>=0&&au(+g.codepage);S!==k.length;++S){Q=0;var G=k[S].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(t,r),Z=G.replace(/;;/g,"\0").split(";").map(function(ie){return ie.replace(/\u0000/g,";")}),te=Z[0],se;if(G.length>0)switch(te){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":Z[1].charAt(0)=="P"&&P.push(G.slice(3).replace(/;;/g,";"));break;case"C":var ue=!1,ae=!1,pe=!1,ve=!1,Pe=-1,xe=-1;for(O=1;O<Z.length;++O)switch(Z[O].charAt(0)){case"A":break;case"X":N=parseInt(Z[O].slice(1))-1,ae=!0;break;case"Y":for(y=parseInt(Z[O].slice(1))-1,ae||(N=0),H=A.length;H<=y;++H)A[H]=[];break;case"K":se=Z[O].slice(1),se.charAt(0)==='"'?se=se.slice(1,se.length-1):se==="TRUE"?se=!0:se==="FALSE"?se=!1:isNaN(ou(se))?isNaN(ip(se).getDate())||(se=Ds(se)):(se=ou(se),q!==null&&Ep(q)&&(se=z5(se))),ue=!0;break;case"E":ve=!0;var B=O1(Z[O].slice(1),{r:y,c:N});A[y][N]=[A[y][N],B];break;case"S":pe=!0,A[y][N]=[A[y][N],"S5S"];break;case"G":break;case"R":Pe=parseInt(Z[O].slice(1))-1;break;case"C":xe=parseInt(Z[O].slice(1))-1;break;default:if(g&&g.WTF)throw new Error("SYLK bad record "+G)}if(ue&&(A[y][N]&&A[y][N].length==2?A[y][N][0]=se:A[y][N]=se,q=null),pe){if(ve)throw new Error("SYLK shared formula cannot have own formula");var re=Pe>-1&&A[Pe][xe];if(!re||!re[1])throw new Error("SYLK shared formula cannot find base");A[y][N][1]=vG(re[1],{r:y-Pe,c:N-xe})}break;case"F":var J=0;for(O=1;O<Z.length;++O)switch(Z[O].charAt(0)){case"X":N=parseInt(Z[O].slice(1))-1,++J;break;case"Y":for(y=parseInt(Z[O].slice(1))-1,H=A.length;H<=y;++H)A[H]=[];break;case"M":Q=parseInt(Z[O].slice(1))/20;break;case"F":break;case"G":break;case"P":q=P[parseInt(Z[O].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(L=Z[O].slice(1).split(" "),H=parseInt(L[0],10);H<=parseInt(L[1],10);++H)Q=parseInt(L[2],10),U[H-1]=Q===0?{hidden:!0}:{wch:Q},yf(U[H-1]);break;case"C":N=parseInt(Z[O].slice(1))-1,U[N]||(U[N]={});break;case"R":y=parseInt(Z[O].slice(1))-1,R[y]||(R[y]={}),Q>0?(R[y].hpt=Q,R[y].hpx=lp(Q)):Q===0&&(R[y].hidden=!0);break;default:if(g&&g.WTF)throw new Error("SYLK bad record "+G)}J<1&&(q=null);break;default:if(g&&g.WTF)throw new Error("SYLK bad record "+G)}}return R.length>0&&(W["!rows"]=R),U.length>0&&(W["!cols"]=U),g&&g.sheetRows&&(A=A.slice(0,g.sheetRows)),[A,W]}function o(b,g){var k=a(b,g),y=k[0],N=k[1],S=Op(y,g);return gi(N).forEach(function(O){S[O]=N[O]}),S}function l(b,g){return Tf(o(b,g),g)}function d(b,g,k,y){var N="C;Y"+(k+1)+";X"+(y+1)+";K";switch(b.t){case"n":N+=b.v||0,b.f&&!b.F&&(N+=";E"+_E(b.f,{r:k,c:y}));break;case"b":N+=b.v?"TRUE":"FALSE";break;case"e":N+=b.w||b.v;break;case"d":N+='"'+(b.w||b.v)+'"';break;case"s":N+='"'+b.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return N}function c(b,g){g.forEach(function(k,y){var N="F;W"+(y+1)+" "+(y+1)+" ";k.hidden?N+="0":(typeof k.width=="number"&&!k.wpx&&(k.wpx=Db(k.width)),typeof k.wpx=="number"&&!k.wch&&(k.wch=Mb(k.wpx)),typeof k.wch=="number"&&(N+=Math.round(k.wch))),N.charAt(N.length-1)!=" "&&b.push(N)})}function u(b,g){g.forEach(function(k,y){var N="F;";k.hidden?N+="M0;":k.hpt?N+="M"+20*k.hpt+";":k.hpx&&(N+="M"+20*Lb(k.hpx)+";"),N.length>2&&b.push(N+"R"+(y+1))})}function x(b,g){var k=["ID;PWXL;N;E"],y=[],N=Ia(b["!ref"]),S,O=Array.isArray(b),A=`\r
`;k.push("P;PGeneral"),k.push("F;P0;DG0G8;M255"),b["!cols"]&&c(k,b["!cols"]),b["!rows"]&&u(k,b["!rows"]),k.push("B;Y"+(N.e.r-N.s.r+1)+";X"+(N.e.c-N.s.c+1)+";D"+[N.s.c,N.s.r,N.e.c,N.e.r].join(" "));for(var P=N.s.r;P<=N.e.r;++P)for(var q=N.s.c;q<=N.e.c;++q){var W=Tn({r:P,c:q});S=O?(b[P]||[])[q]:b[W],!(!S||S.v==null&&(!S.f||S.F))&&y.push(d(S,b,P,q))}return k.join(A)+A+y.join(A)+A+"E"+A}return{to_workbook:l,to_sheet:o,from_sheet:x}})(),rG=(function(){function e(i,o){switch(o.type){case"base64":return t(Uc(i),o);case"binary":return t(i,o);case"buffer":return t(sa&&Buffer.isBuffer(i)?i.toString("binary"):Ef(i),o);case"array":return t(Zm(i),o)}throw new Error("Unrecognized type "+o.type)}function t(i,o){for(var l=i.split(`
`),d=-1,c=-1,u=0,x=[];u!==l.length;++u){if(l[u].trim()==="BOT"){x[++d]=[],c=0;continue}if(!(d<0)){var b=l[u].trim().split(","),g=b[0],k=b[1];++u;for(var y=l[u]||"";(y.match(/["]/g)||[]).length&1&&u<l.length-1;)y+=`
`+l[++u];switch(y=y.trim(),+g){case-1:if(y==="BOT"){x[++d]=[],c=0;continue}else if(y!=="EOD")throw new Error("Unrecognized DIF special command "+y);break;case 0:y==="TRUE"?x[d][c]=!0:y==="FALSE"?x[d][c]=!1:isNaN(ou(k))?isNaN(ip(k).getDate())?x[d][c]=k:x[d][c]=Ds(k):x[d][c]=ou(k),++c;break;case 1:y=y.slice(1,y.length-1),y=y.replace(/""/g,'"'),y&&y.match(/^=".*"$/)&&(y=y.slice(2,-1)),x[d][c++]=y!==""?y:null;break}if(y==="EOD")break}}return o&&o.sheetRows&&(x=x.slice(0,o.sheetRows)),x}function r(i,o){return Op(e(i,o),o)}function n(i,o){return Tf(r(i,o),o)}var a=(function(){var i=function(d,c,u,x,b){d.push(c),d.push(u+","+x),d.push('"'+b.replace(/"/g,'""')+'"')},o=function(d,c,u,x){d.push(c+","+u),d.push(c==1?'"'+x.replace(/"/g,'""')+'"':x)};return function(d){var c=[],u=Ia(d["!ref"]),x,b=Array.isArray(d);i(c,"TABLE",0,1,"sheetjs"),i(c,"VECTORS",0,u.e.r-u.s.r+1,""),i(c,"TUPLES",0,u.e.c-u.s.c+1,""),i(c,"DATA",0,0,"");for(var g=u.s.r;g<=u.e.r;++g){o(c,-1,0,"BOT");for(var k=u.s.c;k<=u.e.c;++k){var y=Tn({r:g,c:k});if(x=b?(d[g]||[])[k]:d[y],!x){o(c,1,0,"");continue}switch(x.t){case"n":var N=x.w;!N&&x.v!=null&&(N=x.v),N==null?x.f&&!x.F?o(c,1,0,"="+x.f):o(c,1,0,""):o(c,0,N,"V");break;case"b":o(c,0,x.v?1:0,x.v?"TRUE":"FALSE");break;case"s":o(c,1,0,isNaN(x.v)?x.v:'="'+x.v+'"');break;case"d":x.w||(x.w=Sd(x.z||En[14],ao(Ds(x.v)))),o(c,0,x.w,"V");break;default:o(c,1,0,"")}}}o(c,-1,0,"EOD");var S=`\r
`,O=c.join(S);return O}})();return{to_workbook:n,to_sheet:r,from_sheet:a}})(),nG=(function(){function e(x){return x.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function t(x){return x.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(x,b){for(var g=x.split(`
`),k=-1,y=-1,N=0,S=[];N!==g.length;++N){var O=g[N].trim().split(":");if(O[0]==="cell"){var A=ei(O[1]);if(S.length<=A.r)for(k=S.length;k<=A.r;++k)S[k]||(S[k]=[]);switch(k=A.r,y=A.c,O[2]){case"t":S[k][y]=e(O[3]);break;case"v":S[k][y]=+O[3];break;case"vtf":var P=O[O.length-1];case"vtc":switch(O[3]){case"nl":S[k][y]=!!+O[4];break;default:S[k][y]=+O[4];break}O[2]=="vtf"&&(S[k][y]=[S[k][y],P])}}}return b&&b.sheetRows&&(S=S.slice(0,b.sheetRows)),S}function n(x,b){return Op(r(x,b),b)}function a(x,b){return Tf(n(x,b),b)}var i=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),o=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,l=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),d="--SocialCalcSpreadsheetControlSave--";function c(x){if(!x||!x["!ref"])return"";for(var b=[],g=[],k,y="",N=dc(x["!ref"]),S=Array.isArray(x),O=N.s.r;O<=N.e.r;++O)for(var A=N.s.c;A<=N.e.c;++A)if(y=Tn({r:O,c:A}),k=S?(x[O]||[])[A]:x[y],!(!k||k.v==null||k.t==="z")){switch(g=["cell",y,"t"],k.t){case"s":case"str":g.push(t(k.v));break;case"n":k.f?(g[2]="vtf",g[3]="n",g[4]=k.v,g[5]=t(k.f)):(g[2]="v",g[3]=k.v);break;case"b":g[2]="vt"+(k.f?"f":"c"),g[3]="nl",g[4]=k.v?"1":"0",g[5]=t(k.f||(k.v?"TRUE":"FALSE"));break;case"d":var P=ao(Ds(k.v));g[2]="vtc",g[3]="nd",g[4]=""+P,g[5]=k.w||Sd(k.z||En[14],P);break;case"e":continue}b.push(g.join(":"))}return b.push("sheet:c:"+(N.e.c-N.s.c+1)+":r:"+(N.e.r-N.s.r+1)+":tvf:1"),b.push("valueformat:1:text-wiki"),b.join(`
`)}function u(x){return[i,o,l,o,c(x),d].join(`
`)}return{to_workbook:a,to_sheet:n,from_sheet:u}})(),op=(function(){function e(u,x,b,g,k){k.raw?x[b][g]=u:u===""||(u==="TRUE"?x[b][g]=!0:u==="FALSE"?x[b][g]=!1:isNaN(ou(u))?isNaN(ip(u).getDate())?x[b][g]=u:x[b][g]=Ds(u):x[b][g]=ou(u))}function t(u,x){var b=x||{},g=[];if(!u||u.length===0)return g;for(var k=u.split(/[\r\n]/),y=k.length-1;y>=0&&k[y].length===0;)--y;for(var N=10,S=0,O=0;O<=y;++O)S=k[O].indexOf(" "),S==-1?S=k[O].length:S++,N=Math.max(N,S);for(O=0;O<=y;++O){g[O]=[];var A=0;for(e(k[O].slice(0,N).trim(),g,O,A,b),A=1;A<=(k[O].length-N)/10+1;++A)e(k[O].slice(N+(A-1)*10,N+A*10).trim(),g,O,A,b)}return b.sheetRows&&(g=g.slice(0,b.sheetRows)),g}var r={44:",",9:"	",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function a(u){for(var x={},b=!1,g=0,k=0;g<u.length;++g)(k=u.charCodeAt(g))==34?b=!b:!b&&k in r&&(x[k]=(x[k]||0)+1);k=[];for(g in x)Object.prototype.hasOwnProperty.call(x,g)&&k.push([x[g],g]);if(!k.length){x=n;for(g in x)Object.prototype.hasOwnProperty.call(x,g)&&k.push([x[g],g])}return k.sort(function(y,N){return y[0]-N[0]||n[y[1]]-n[N[1]]}),r[k.pop()[1]]||44}function i(u,x){var b=x||{},g="",k=b.dense?[]:{},y={s:{c:0,r:0},e:{c:0,r:0}};u.slice(0,4)=="sep="?u.charCodeAt(5)==13&&u.charCodeAt(6)==10?(g=u.charAt(4),u=u.slice(7)):u.charCodeAt(5)==13||u.charCodeAt(5)==10?(g=u.charAt(4),u=u.slice(6)):g=a(u.slice(0,1024)):b&&b.FS?g=b.FS:g=a(u.slice(0,1024));var N=0,S=0,O=0,A=0,P=0,q=g.charCodeAt(0),W=!1,R=0,U=u.charCodeAt(0);u=u.replace(/\r\n/mg,`
`);var L=b.dateNF!=null?Oye(b.dateNF):null;function Q(){var H=u.slice(A,P),G={};if(H.charAt(0)=='"'&&H.charAt(H.length-1)=='"'&&(H=H.slice(1,-1).replace(/""/g,'"')),H.length===0)G.t="z";else if(b.raw)G.t="s",G.v=H;else if(H.trim().length===0)G.t="s",G.v=H;else if(H.charCodeAt(0)==61)H.charCodeAt(1)==34&&H.charCodeAt(H.length-1)==34?(G.t="s",G.v=H.slice(2,-1).replace(/""/g,'"')):iNe(H)?(G.t="n",G.f=H.slice(1)):(G.t="s",G.v=H);else if(H=="TRUE")G.t="b",G.v=!0;else if(H=="FALSE")G.t="b",G.v=!1;else if(!isNaN(O=ou(H)))G.t="n",b.cellText!==!1&&(G.w=H),G.v=O;else if(!isNaN(ip(H).getDate())||L&&H.match(L)){G.z=b.dateNF||En[14];var Z=0;L&&H.match(L)&&(H=Pye(H,b.dateNF,H.match(L)||[]),Z=1),b.cellDates?(G.t="d",G.v=Ds(H,Z)):(G.t="n",G.v=ao(Ds(H,Z))),b.cellText!==!1&&(G.w=Sd(G.z,G.v instanceof Date?ao(G.v):G.v)),b.cellNF||delete G.z}else G.t="s",G.v=H;if(G.t=="z"||(b.dense?(k[N]||(k[N]=[]),k[N][S]=G):k[Tn({c:S,r:N})]=G),A=P+1,U=u.charCodeAt(A),y.e.c<S&&(y.e.c=S),y.e.r<N&&(y.e.r=N),R==q)++S;else if(S=0,++N,b.sheetRows&&b.sheetRows<=N)return!0}e:for(;P<u.length;++P)switch(R=u.charCodeAt(P)){case 34:U===34&&(W=!W);break;case q:case 10:case 13:if(!W&&Q())break e;break}return P-A>0&&Q(),k["!ref"]=Kn(y),k}function o(u,x){return!(x&&x.PRN)||x.FS||u.slice(0,4)=="sep="||u.indexOf("	")>=0||u.indexOf(",")>=0||u.indexOf(";")>=0?i(u,x):Op(t(u,x),x)}function l(u,x){var b="",g=x.type=="string"?[0,0,0,0]:PE(u,x);switch(x.type){case"base64":b=Uc(u);break;case"binary":b=u;break;case"buffer":x.codepage==65001?b=u.toString("utf8"):x.codepage&&typeof jb<"u"||(b=sa&&Buffer.isBuffer(u)?u.toString("binary"):Ef(u));break;case"array":b=Zm(u);break;case"string":b=u;break;default:throw new Error("Unrecognized type "+x.type)}return g[0]==239&&g[1]==187&&g[2]==191?b=ls(b.slice(3)):x.type!="string"&&x.type!="buffer"&&x.codepage==65001?b=ls(b):x.type=="binary"&&typeof jb<"u",b.slice(0,19)=="socialcalc:version:"?nG.to_sheet(x.type=="string"?b:ls(b),x):o(b,x)}function d(u,x){return Tf(l(u,x),x)}function c(u){for(var x=[],b=Ia(u["!ref"]),g,k=Array.isArray(u),y=b.s.r;y<=b.e.r;++y){for(var N=[],S=b.s.c;S<=b.e.c;++S){var O=Tn({r:y,c:S});if(g=k?(u[y]||[])[S]:u[O],!g||g.v==null){N.push("          ");continue}for(var A=(g.w||(ih(g),g.w)||"").slice(0,10);A.length<10;)A+=" ";N.push(A+(S===0?" ":""))}x.push(N.join(""))}return x.join(`
`)}return{to_workbook:d,to_sheet:l,from_sheet:c}})();function W5e(e,t){var r=t||{},n=!!r.WTF;r.WTF=!0;try{var a=tG.to_workbook(e,r);return r.WTF=n,a}catch(i){if(r.WTF=n,!i.message.match(/SYLK bad record ID/)&&n)throw i;return op.to_workbook(e,t)}}var Tm=(function(){function e(B,re,J){if(B){Uo(B,B.l||0);for(var ie=J.Enum||Pe;B.l<B.length;){var Y=B.read_shift(2),_e=ie[Y]||ie[65535],me=B.read_shift(2),ne=B.l+me,je=_e.f&&_e.f(B,me,J);if(B.l=ne,re(je,_e,Y))return}}}function t(B,re){switch(re.type){case"base64":return r(Ic(Uc(B)),re);case"binary":return r(Ic(B),re);case"buffer":case"array":return r(B,re)}throw"Unsupported type "+re.type}function r(B,re){if(!B)return B;var J=re||{},ie=J.dense?[]:{},Y="Sheet1",_e="",me=0,ne={},je=[],De=[],ce={s:{r:0,c:0},e:{r:0,c:0}},Ee=J.sheetRows||0;if(B[2]==0&&(B[3]==8||B[3]==9)&&B.length>=16&&B[14]==5&&B[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(B[2]==2)J.Enum=Pe,e(B,function(Ye,at,Je){switch(Je){case 0:J.vers=Ye,Ye>=4096&&(J.qpro=!0);break;case 6:ce=Ye;break;case 204:Ye&&(_e=Ye);break;case 222:_e=Ye;break;case 15:case 51:J.qpro||(Ye[1].v=Ye[1].v.slice(1));case 13:case 14:case 16:Je==14&&(Ye[2]&112)==112&&(Ye[2]&15)>1&&(Ye[2]&15)<15&&(Ye[1].z=J.dateNF||En[14],J.cellDates&&(Ye[1].t="d",Ye[1].v=z5(Ye[1].v))),J.qpro&&Ye[3]>me&&(ie["!ref"]=Kn(ce),ne[Y]=ie,je.push(Y),ie=J.dense?[]:{},ce={s:{r:0,c:0},e:{r:0,c:0}},me=Ye[3],Y=_e||"Sheet"+(me+1),_e="");var ct=J.dense?(ie[Ye[0].r]||[])[Ye[0].c]:ie[Tn(Ye[0])];if(ct){ct.t=Ye[1].t,ct.v=Ye[1].v,Ye[1].z!=null&&(ct.z=Ye[1].z),Ye[1].f!=null&&(ct.f=Ye[1].f);break}J.dense?(ie[Ye[0].r]||(ie[Ye[0].r]=[]),ie[Ye[0].r][Ye[0].c]=Ye[1]):ie[Tn(Ye[0])]=Ye[1];break}},J);else if(B[2]==26||B[2]==14)J.Enum=xe,B[2]==14&&(J.qpro=!0,B.l=0),e(B,function(Ye,at,Je){switch(Je){case 204:Y=Ye;break;case 22:Ye[1].v=Ye[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(Ye[3]>me&&(ie["!ref"]=Kn(ce),ne[Y]=ie,je.push(Y),ie=J.dense?[]:{},ce={s:{r:0,c:0},e:{r:0,c:0}},me=Ye[3],Y="Sheet"+(me+1)),Ee>0&&Ye[0].r>=Ee)break;J.dense?(ie[Ye[0].r]||(ie[Ye[0].r]=[]),ie[Ye[0].r][Ye[0].c]=Ye[1]):ie[Tn(Ye[0])]=Ye[1],ce.e.c<Ye[0].c&&(ce.e.c=Ye[0].c),ce.e.r<Ye[0].r&&(ce.e.r=Ye[0].r);break;case 27:Ye[14e3]&&(De[Ye[14e3][0]]=Ye[14e3][1]);break;case 1537:De[Ye[0]]=Ye[1],Ye[0]==me&&(Y=Ye[1]);break}},J);else throw new Error("Unrecognized LOTUS BOF "+B[2]);if(ie["!ref"]=Kn(ce),ne[_e||Y]=ie,je.push(_e||Y),!De.length)return{SheetNames:je,Sheets:ne};for(var be={},ge=[],Qe=0;Qe<De.length;++Qe)ne[je[Qe]]?(ge.push(De[Qe]||je[Qe]),be[De[Qe]]=ne[De[Qe]]||ne[je[Qe]]):(ge.push(De[Qe]),be[De[Qe]]={"!ref":"A1"});return{SheetNames:ge,Sheets:be}}function n(B,re){var J=re||{};if(+J.codepage>=0&&au(+J.codepage),J.type=="string")throw new Error("Cannot write WK1 to JS string");var ie=cc(),Y=Ia(B["!ref"]),_e=Array.isArray(B),me=[];Nr(ie,0,i(1030)),Nr(ie,6,d(Y));for(var ne=Math.min(Y.e.r,8191),je=Y.s.r;je<=ne;++je)for(var De=Ii(je),ce=Y.s.c;ce<=Y.e.c;++ce){je===Y.s.r&&(me[ce]=Js(ce));var Ee=me[ce]+De,be=_e?(B[je]||[])[ce]:B[Ee];if(!(!be||be.t=="z"))if(be.t=="n")(be.v|0)==be.v&&be.v>=-32768&&be.v<=32767?Nr(ie,13,g(je,ce,be.v)):Nr(ie,14,y(je,ce,be.v));else{var ge=ih(be);Nr(ie,15,x(je,ce,ge.slice(0,239)))}}return Nr(ie,1),ie.end()}function a(B,re){var J=re||{};if(+J.codepage>=0&&au(+J.codepage),J.type=="string")throw new Error("Cannot write WK3 to JS string");var ie=cc();Nr(ie,0,o(B));for(var Y=0,_e=0;Y<B.SheetNames.length;++Y)(B.Sheets[B.SheetNames[Y]]||{})["!ref"]&&Nr(ie,27,ve(B.SheetNames[Y],_e++));var me=0;for(Y=0;Y<B.SheetNames.length;++Y){var ne=B.Sheets[B.SheetNames[Y]];if(!(!ne||!ne["!ref"])){for(var je=Ia(ne["!ref"]),De=Array.isArray(ne),ce=[],Ee=Math.min(je.e.r,8191),be=je.s.r;be<=Ee;++be)for(var ge=Ii(be),Qe=je.s.c;Qe<=je.e.c;++Qe){be===je.s.r&&(ce[Qe]=Js(Qe));var Ye=ce[Qe]+ge,at=De?(ne[be]||[])[Qe]:ne[Ye];if(!(!at||at.t=="z"))if(at.t=="n")Nr(ie,23,Q(be,Qe,me,at.v));else{var Je=ih(at);Nr(ie,22,R(be,Qe,me,Je.slice(0,239)))}}++me}}return Nr(ie,1),ie.end()}function i(B){var re=Ht(2);return re.write_shift(2,B),re}function o(B){var re=Ht(26);re.write_shift(2,4096),re.write_shift(2,4),re.write_shift(4,0);for(var J=0,ie=0,Y=0,_e=0;_e<B.SheetNames.length;++_e){var me=B.SheetNames[_e],ne=B.Sheets[me];if(!(!ne||!ne["!ref"])){++Y;var je=dc(ne["!ref"]);J<je.e.r&&(J=je.e.r),ie<je.e.c&&(ie=je.e.c)}}return J>8191&&(J=8191),re.write_shift(2,J),re.write_shift(1,Y),re.write_shift(1,ie),re.write_shift(2,0),re.write_shift(2,0),re.write_shift(1,1),re.write_shift(1,2),re.write_shift(4,0),re.write_shift(4,0),re}function l(B,re,J){var ie={s:{c:0,r:0},e:{c:0,r:0}};return re==8&&J.qpro?(ie.s.c=B.read_shift(1),B.l++,ie.s.r=B.read_shift(2),ie.e.c=B.read_shift(1),B.l++,ie.e.r=B.read_shift(2),ie):(ie.s.c=B.read_shift(2),ie.s.r=B.read_shift(2),re==12&&J.qpro&&(B.l+=2),ie.e.c=B.read_shift(2),ie.e.r=B.read_shift(2),re==12&&J.qpro&&(B.l+=2),ie.s.c==65535&&(ie.s.c=ie.e.c=ie.s.r=ie.e.r=0),ie)}function d(B){var re=Ht(8);return re.write_shift(2,B.s.c),re.write_shift(2,B.s.r),re.write_shift(2,B.e.c),re.write_shift(2,B.e.r),re}function c(B,re,J){var ie=[{c:0,r:0},{t:"n",v:0},0,0];return J.qpro&&J.vers!=20768?(ie[0].c=B.read_shift(1),ie[3]=B.read_shift(1),ie[0].r=B.read_shift(2),B.l+=2):(ie[2]=B.read_shift(1),ie[0].c=B.read_shift(2),ie[0].r=B.read_shift(2)),ie}function u(B,re,J){var ie=B.l+re,Y=c(B,re,J);if(Y[1].t="s",J.vers==20768){B.l++;var _e=B.read_shift(1);return Y[1].v=B.read_shift(_e,"utf8"),Y}return J.qpro&&B.l++,Y[1].v=B.read_shift(ie-B.l,"cstr"),Y}function x(B,re,J){var ie=Ht(7+J.length);ie.write_shift(1,255),ie.write_shift(2,re),ie.write_shift(2,B),ie.write_shift(1,39);for(var Y=0;Y<ie.length;++Y){var _e=J.charCodeAt(Y);ie.write_shift(1,_e>=128?95:_e)}return ie.write_shift(1,0),ie}function b(B,re,J){var ie=c(B,re,J);return ie[1].v=B.read_shift(2,"i"),ie}function g(B,re,J){var ie=Ht(7);return ie.write_shift(1,255),ie.write_shift(2,re),ie.write_shift(2,B),ie.write_shift(2,J,"i"),ie}function k(B,re,J){var ie=c(B,re,J);return ie[1].v=B.read_shift(8,"f"),ie}function y(B,re,J){var ie=Ht(13);return ie.write_shift(1,255),ie.write_shift(2,re),ie.write_shift(2,B),ie.write_shift(8,J,"f"),ie}function N(B,re,J){var ie=B.l+re,Y=c(B,re,J);if(Y[1].v=B.read_shift(8,"f"),J.qpro)B.l=ie;else{var _e=B.read_shift(2);P(B.slice(B.l,B.l+_e),Y),B.l+=_e}return Y}function S(B,re,J){var ie=re&32768;return re&=-32769,re=(ie?B:0)+(re>=8192?re-16384:re),(ie?"":"$")+(J?Js(re):Ii(re))}var O={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},A=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function P(B,re){Uo(B,0);for(var J=[],ie=0,Y="",_e="",me="",ne="";B.l<B.length;){var je=B[B.l++];switch(je){case 0:J.push(B.read_shift(8,"f"));break;case 1:_e=S(re[0].c,B.read_shift(2),!0),Y=S(re[0].r,B.read_shift(2),!1),J.push(_e+Y);break;case 2:{var De=S(re[0].c,B.read_shift(2),!0),ce=S(re[0].r,B.read_shift(2),!1);_e=S(re[0].c,B.read_shift(2),!0),Y=S(re[0].r,B.read_shift(2),!1),J.push(De+ce+":"+_e+Y)}break;case 3:if(B.l<B.length){console.error("WK1 premature formula end");return}break;case 4:J.push("("+J.pop()+")");break;case 5:J.push(B.read_shift(2));break;case 6:{for(var Ee="";je=B[B.l++];)Ee+=String.fromCharCode(je);J.push('"'+Ee.replace(/"/g,'""')+'"')}break;case 8:J.push("-"+J.pop());break;case 23:J.push("+"+J.pop());break;case 22:J.push("NOT("+J.pop()+")");break;case 20:case 21:ne=J.pop(),me=J.pop(),J.push(["AND","OR"][je-20]+"("+me+","+ne+")");break;default:if(je<32&&A[je])ne=J.pop(),me=J.pop(),J.push(me+A[je]+ne);else if(O[je]){if(ie=O[je][1],ie==69&&(ie=B[B.l++]),ie>J.length){console.error("WK1 bad formula parse 0x"+je.toString(16)+":|"+J.join("|")+"|");return}var be=J.slice(-ie);J.length-=ie,J.push(O[je][0]+"("+be.join(",")+")")}else return je<=7?console.error("WK1 invalid opcode "+je.toString(16)):je<=24?console.error("WK1 unsupported op "+je.toString(16)):je<=30?console.error("WK1 invalid opcode "+je.toString(16)):je<=115?console.error("WK1 unsupported function opcode "+je.toString(16)):console.error("WK1 unrecognized opcode "+je.toString(16))}}J.length==1?re[1].f=""+J[0]:console.error("WK1 bad formula parse |"+J.join("|")+"|")}function q(B){var re=[{c:0,r:0},{t:"n",v:0},0];return re[0].r=B.read_shift(2),re[3]=B[B.l++],re[0].c=B[B.l++],re}function W(B,re){var J=q(B);return J[1].t="s",J[1].v=B.read_shift(re-4,"cstr"),J}function R(B,re,J,ie){var Y=Ht(6+ie.length);Y.write_shift(2,B),Y.write_shift(1,J),Y.write_shift(1,re),Y.write_shift(1,39);for(var _e=0;_e<ie.length;++_e){var me=ie.charCodeAt(_e);Y.write_shift(1,me>=128?95:me)}return Y.write_shift(1,0),Y}function U(B,re){var J=q(B);J[1].v=B.read_shift(2);var ie=J[1].v>>1;if(J[1].v&1)switch(ie&7){case 0:ie=(ie>>3)*5e3;break;case 1:ie=(ie>>3)*500;break;case 2:ie=(ie>>3)/20;break;case 3:ie=(ie>>3)/200;break;case 4:ie=(ie>>3)/2e3;break;case 5:ie=(ie>>3)/2e4;break;case 6:ie=(ie>>3)/16;break;case 7:ie=(ie>>3)/64;break}return J[1].v=ie,J}function L(B,re){var J=q(B),ie=B.read_shift(4),Y=B.read_shift(4),_e=B.read_shift(2);if(_e==65535)return ie===0&&Y===3221225472?(J[1].t="e",J[1].v=15):ie===0&&Y===3489660928?(J[1].t="e",J[1].v=42):J[1].v=0,J;var me=_e&32768;return _e=(_e&32767)-16446,J[1].v=(1-me*2)*(Y*Math.pow(2,_e+32)+ie*Math.pow(2,_e)),J}function Q(B,re,J,ie){var Y=Ht(14);if(Y.write_shift(2,B),Y.write_shift(1,J),Y.write_shift(1,re),ie==0)return Y.write_shift(4,0),Y.write_shift(4,0),Y.write_shift(2,65535),Y;var _e=0,me=0,ne=0,je=0;return ie<0&&(_e=1,ie=-ie),me=Math.log2(ie)|0,ie/=Math.pow(2,me-31),je=ie>>>0,(je&2147483648)==0&&(ie/=2,++me,je=ie>>>0),ie-=je,je|=2147483648,je>>>=0,ie*=Math.pow(2,32),ne=ie>>>0,Y.write_shift(4,ne),Y.write_shift(4,je),me+=16383+(_e?32768:0),Y.write_shift(2,me),Y}function H(B,re){var J=L(B);return B.l+=re-14,J}function G(B,re){var J=q(B),ie=B.read_shift(4);return J[1].v=ie>>6,J}function Z(B,re){var J=q(B),ie=B.read_shift(8,"f");return J[1].v=ie,J}function te(B,re){var J=Z(B);return B.l+=re-10,J}function se(B,re){return B[B.l+re-1]==0?B.read_shift(re,"cstr"):""}function ue(B,re){var J=B[B.l++];J>re-1&&(J=re-1);for(var ie="";ie.length<J;)ie+=String.fromCharCode(B[B.l++]);return ie}function ae(B,re,J){if(!(!J.qpro||re<21)){var ie=B.read_shift(1);B.l+=17,B.l+=1,B.l+=2;var Y=B.read_shift(re-21,"cstr");return[ie,Y]}}function pe(B,re){for(var J={},ie=B.l+re;B.l<ie;){var Y=B.read_shift(2);if(Y==14e3){for(J[Y]=[0,""],J[Y][0]=B.read_shift(2);B[B.l];)J[Y][1]+=String.fromCharCode(B[B.l]),B.l++;B.l++}}return J}function ve(B,re){var J=Ht(5+B.length);J.write_shift(2,14e3),J.write_shift(2,re);for(var ie=0;ie<B.length;++ie){var Y=B.charCodeAt(ie);J[J.l++]=Y>127?95:Y}return J[J.l++]=0,J}var Pe={0:{n:"BOF",f:Ui},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:l},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:b},14:{n:"NUMBER",f:k},15:{n:"LABEL",f:u},16:{n:"FORMULA",f:N},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:u},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:se},222:{n:"SHEETNAMELP",f:ue},65535:{n:""}},xe={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:W},23:{n:"NUMBER17",f:L},24:{n:"NUMBER18",f:U},25:{n:"FORMULA19",f:H},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:pe},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:G},38:{n:"??"},39:{n:"NUMBER27",f:Z},40:{n:"FORMULA28",f:te},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:se},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:ae},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:n,book_to_wk3:a,to_workbook:t}})();function G5e(e){var t={},r=e.match(fl),n=0,a=!1;if(r)for(;n!=r.length;++n){var i=In(r[n]);switch(i[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!i.val)break;case"<shadow>":case"<shadow/>":t.shadow=1;break;case"</shadow>":break;case"<charset":if(i.val=="1")break;t.cp=XA[parseInt(i.val,10)];break;case"<outline":if(!i.val)break;case"<outline>":case"<outline/>":t.outline=1;break;case"</outline>":break;case"<rFont":t.name=i.val;break;case"<sz":t.sz=i.val;break;case"<strike":if(!i.val)break;case"<strike>":case"<strike/>":t.strike=1;break;case"</strike>":break;case"<u":if(!i.val)break;switch(i.val){case"double":t.uval="double";break;case"singleAccounting":t.uval="single-accounting";break;case"doubleAccounting":t.uval="double-accounting";break}case"<u>":case"<u/>":t.u=1;break;case"</u>":break;case"<b":if(i.val=="0")break;case"<b>":case"<b/>":t.b=1;break;case"</b>":break;case"<i":if(i.val=="0")break;case"<i>":case"<i/>":t.i=1;break;case"</i>":break;case"<color":i.rgb&&(t.color=i.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":t.family=i.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":t.valign=i.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(i[0].charCodeAt(1)!==47&&!a)throw new Error("Unrecognized rich format "+i[0])}}return t}var K5e=(function(){var e=Eb("t"),t=Eb("rPr");function r(i){var o=i.match(e);if(!o)return{t:"s",v:""};var l={t:"s",v:Pa(o[1])},d=i.match(t);return d&&(l.s=G5e(d[1])),l}var n=/<(?:\w+:)?r>/g,a=/<\/(?:\w+:)?r>/;return function(o){return o.replace(n,"").split(a).map(r).filter(function(l){return l.v})}})(),X5e=(function(){var t=/(\r\n|\n)/g;function r(a,i,o){var l=[];a.u&&l.push("text-decoration: underline;"),a.uval&&l.push("text-underline-style:"+a.uval+";"),a.sz&&l.push("font-size:"+a.sz+"pt;"),a.outline&&l.push("text-effect: outline;"),a.shadow&&l.push("text-shadow: auto;"),i.push('<span style="'+l.join("")+'">'),a.b&&(i.push("<b>"),o.push("</b>")),a.i&&(i.push("<i>"),o.push("</i>")),a.strike&&(i.push("<s>"),o.push("</s>"));var d=a.valign||"";return d=="superscript"||d=="super"?d="sup":d=="subscript"&&(d="sub"),d!=""&&(i.push("<"+d+">"),o.push("</"+d+">")),o.push("</span>"),a}function n(a){var i=[[],a.v,[]];return a.v?(a.s&&r(a.s,i[0],i[2]),i[0].join("")+i[1].replace(t,"<br/>")+i[2].join("")):""}return function(i){return i.map(n).join("")}})(),Y5e=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,Q5e=/<(?:\w+:)?r>/,Z5e=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function vE(e,t){var r=t?t.cellHTML:!0,n={};return e?(e.match(/^\s*<(?:\w+:)?t[^>]*>/)?(n.t=Pa(ls(e.slice(e.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),n.r=ls(e),r&&(n.h=sE(n.t))):e.match(Q5e)&&(n.r=ls(e),n.t=Pa(ls((e.replace(Z5e,"").match(Y5e)||[]).join("").replace(fl,""))),r&&(n.h=X5e(K5e(n.r)))),n):{t:""}}var J5e=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,e4e=/<(?:\w+:)?(?:si|sstItem)>/g,t4e=/<\/(?:\w+:)?(?:si|sstItem)>/;function r4e(e,t){var r=[],n="";if(!e)return r;var a=e.match(J5e);if(a){n=a[2].replace(e4e,"").split(t4e);for(var i=0;i!=n.length;++i){var o=vE(n[i].trim(),t);o!=null&&(r[r.length]=o)}a=In(a[1]),r.Count=a.count,r.Unique=a.uniqueCount}return r}var n4e=/^\s|\s$|[\t\n\r]/;function aG(e,t){if(!t.bookSST)return"";var r=[Di];r[r.length]=kr("sst",null,{xmlns:dx[0],count:e.Count,uniqueCount:e.Unique});for(var n=0;n!=e.length;++n)if(e[n]!=null){var a=e[n],i="<si>";a.r?i+=a.r:(i+="<t",a.t||(a.t=""),a.t.match(n4e)&&(i+=' xml:space="preserve"'),i+=">"+Ja(a.t)+"</t>"),i+="</si>",r[r.length]=i}return r.length>2&&(r[r.length]="</sst>",r[1]=r[1].replace("/>",">")),r.join("")}function a4e(e){return[e.read_shift(4),e.read_shift(4)]}function s4e(e,t){var r=[],n=!1;return gh(e,function(i,o,l){switch(l){case 159:r.Count=i[0],r.Unique=i[1];break;case 19:r.push(i);break;case 160:return!0;case 35:n=!0;break;case 36:n=!1;break;default:if(o.T,!n||t.WTF)throw new Error("Unexpected record 0x"+l.toString(16))}}),r}function i4e(e,t){return t||(t=Ht(8)),t.write_shift(4,e.Count),t.write_shift(4,e.Unique),t}var o4e=gwe;function l4e(e){var t=cc();dr(t,159,i4e(e));for(var r=0;r<e.length;++r)dr(t,19,o4e(e[r]));return dr(t,160),t.end()}function sG(e){for(var t=[],r=e.split(""),n=0;n<r.length;++n)t[n]=r[n].charCodeAt(0);return t}function Y0(e,t){var r={};return r.Major=e.read_shift(2),r.Minor=e.read_shift(2),t>=4&&(e.l+=t-4),r}function c4e(e){var t={};return t.id=e.read_shift(0,"lpp4"),t.R=Y0(e,4),t.U=Y0(e,4),t.W=Y0(e,4),t}function d4e(e){for(var t=e.read_shift(4),r=e.l+t-4,n={},a=e.read_shift(4),i=[];a-- >0;)i.push({t:e.read_shift(4),v:e.read_shift(0,"lpp4")});if(n.name=e.read_shift(0,"lpp4"),n.comps=i,e.l!=r)throw new Error("Bad DataSpaceMapEntry: "+e.l+" != "+r);return n}function u4e(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(d4e(e));return t}function h4e(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(e.read_shift(0,"lpp4"));return t}function f4e(e){var t={};return e.read_shift(4),e.l+=4,t.id=e.read_shift(0,"lpp4"),t.name=e.read_shift(0,"lpp4"),t.R=Y0(e,4),t.U=Y0(e,4),t.W=Y0(e,4),t}function m4e(e){var t=f4e(e);if(t.ename=e.read_shift(0,"8lpp4"),t.blksz=e.read_shift(4),t.cmode=e.read_shift(4),e.read_shift(4)!=4)throw new Error("Bad !Primary record");return t}function iG(e,t){var r=e.l+t,n={};n.Flags=e.read_shift(4)&63,e.l+=4,n.AlgID=e.read_shift(4);var a=!1;switch(n.AlgID){case 26126:case 26127:case 26128:a=n.Flags==36;break;case 26625:a=n.Flags==4;break;case 0:a=n.Flags==16||n.Flags==4||n.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+n.AlgID}if(!a)throw new Error("Encryption Flags/AlgID mismatch");return n.AlgIDHash=e.read_shift(4),n.KeySize=e.read_shift(4),n.ProviderType=e.read_shift(4),e.l+=8,n.CSPName=e.read_shift(r-e.l>>1,"utf16le"),e.l=r,n}function oG(e,t){var r={},n=e.l+t;return e.l+=4,r.Salt=e.slice(e.l,e.l+16),e.l+=16,r.Verifier=e.slice(e.l,e.l+16),e.l+=16,e.read_shift(4),r.VerifierHash=e.slice(e.l,n),e.l=n,r}function x4e(e){var t=Y0(e);switch(t.Minor){case 2:return[t.Minor,p4e(e)];case 3:return[t.Minor,g4e()];case 4:return[t.Minor,b4e(e)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+t.Minor)}function p4e(e){var t=e.read_shift(4);if((t&63)!=36)throw new Error("EncryptionInfo mismatch");var r=e.read_shift(4),n=iG(e,r),a=oG(e,e.length-e.l);return{t:"Std",h:n,v:a}}function g4e(){throw new Error("File is password-protected: ECMA-376 Extensible")}function b4e(e){var t=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];e.l+=4;var r=e.read_shift(e.length-e.l,"utf8"),n={};return r.replace(fl,function(i){var o=In(i);switch(Ju(o[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":t.forEach(function(l){n[l]=o[l]});break;case"<dataIntegrity":n.encryptedHmacKey=o.encryptedHmacKey,n.encryptedHmacValue=o.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":n.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":n.uri=o.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":n.encs.push(o);break;default:throw o[0]}}),n}function v4e(e,t){var r={},n=r.EncryptionVersionInfo=Y0(e,4);if(t-=4,n.Minor!=2)throw new Error("unrecognized minor version code: "+n.Minor);if(n.Major>4||n.Major<2)throw new Error("unrecognized major version code: "+n.Major);r.Flags=e.read_shift(4),t-=4;var a=e.read_shift(4);return t-=4,r.EncryptionHeader=iG(e,a),t-=a,r.EncryptionVerifier=oG(e,t),r}function y4e(e){var t={},r=t.EncryptionVersionInfo=Y0(e,4);if(r.Major!=1||r.Minor!=1)throw"unrecognized version code "+r.Major+" : "+r.Minor;return t.Salt=e.read_shift(16),t.EncryptedVerifier=e.read_shift(16),t.EncryptedVerifierHash=e.read_shift(16),t}function yE(e){var t=0,r,n=sG(e),a=n.length+1,i,o,l,d,c;for(r=vf(a),r[0]=n.length,i=1;i!=a;++i)r[i]=n[i-1];for(i=a-1;i>=0;--i)o=r[i],l=(t&16384)===0?0:1,d=t<<1&32767,c=l|d,t=c^o;return t^52811}var lG=(function(){var e=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],t=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],r=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],n=function(o){return(o/2|o*128)&255},a=function(o,l){return n(o^l)},i=function(o){for(var l=t[o.length-1],d=104,c=o.length-1;c>=0;--c)for(var u=o[c],x=0;x!=7;++x)u&64&&(l^=r[d]),u*=2,--d;return l};return function(o){for(var l=sG(o),d=i(l),c=l.length,u=vf(16),x=0;x!=16;++x)u[x]=0;var b,g,k;for((c&1)===1&&(b=d>>8,u[c]=a(e[0],b),--c,b=d&255,g=l[l.length-1],u[c]=a(g,b));c>0;)--c,b=d>>8,u[c]=a(l[c],b),--c,b=d&255,u[c]=a(l[c],b);for(c=15,k=15-l.length;k>0;)b=d>>8,u[c]=a(e[k],b),--c,--k,b=d&255,u[c]=a(l[c],b),--c,--k;return u}})(),w4e=function(e,t,r,n,a){a||(a=t),n||(n=lG(e));var i,o;for(i=0;i!=t.length;++i)o=t[i],o^=n[r],o=(o>>5|o<<3)&255,a[i]=o,++r;return[a,r,n]},k4e=function(e){var t=0,r=lG(e);return function(n){var a=w4e("",n,t,r);return t=a[1],a[0]}};function N4e(e,t,r,n){var a={key:Ui(e),verificationBytes:Ui(e)};return r.password&&(a.verifier=yE(r.password)),n.valid=a.verificationBytes===a.verifier,n.valid&&(n.insitu=k4e(r.password)),a}function _4e(e,t,r){var n=r||{};return n.Info=e.read_shift(2),e.l-=2,n.Info===1?n.Data=y4e(e):n.Data=v4e(e,t),n}function S4e(e,t,r){var n={Type:r.biff>=8?e.read_shift(2):0};return n.Type?_4e(e,t-2,n):N4e(e,r.biff>=8?t:t-2,r,n),n}var cG=(function(){function e(a,i){switch(i.type){case"base64":return t(Uc(a),i);case"binary":return t(a,i);case"buffer":return t(sa&&Buffer.isBuffer(a)?a.toString("binary"):Ef(a),i);case"array":return t(Zm(a),i)}throw new Error("Unrecognized type "+i.type)}function t(a,i){var o=i||{},l=o.dense?[]:{},d=a.match(/\\trowd.*?\\row\b/g);if(!d.length)throw new Error("RTF missing table");var c={s:{c:0,r:0},e:{c:0,r:d.length-1}};return d.forEach(function(u,x){Array.isArray(l)&&(l[x]=[]);for(var b=/\\\w+\b/g,g=0,k,y=-1;k=b.exec(u);){switch(k[0]){case"\\cell":var N=u.slice(g,b.lastIndex-k[0].length);if(N[0]==" "&&(N=N.slice(1)),++y,N.length){var S={v:N,t:"s"};Array.isArray(l)?l[x][y]=S:l[Tn({r:x,c:y})]=S}break}g=b.lastIndex}y>c.e.c&&(c.e.c=y)}),l["!ref"]=Kn(c),l}function r(a,i){return Tf(e(a,i),i)}function n(a){for(var i=["{\\rtf1\\ansi"],o=Ia(a["!ref"]),l,d=Array.isArray(a),c=o.s.r;c<=o.e.r;++c){i.push("\\trowd\\trautofit1");for(var u=o.s.c;u<=o.e.c;++u)i.push("\\cellx"+(u+1));for(i.push("\\pard\\intbl"),u=o.s.c;u<=o.e.c;++u){var x=Tn({r:c,c:u});l=d?(a[c]||[])[u]:a[x],!(!l||l.v==null&&(!l.f||l.F))&&(i.push(" "+(l.w||(ih(l),l.w))),i.push("\\cell"))}i.push("\\pard\\intbl\\row")}return i.join("")+"}"}return{to_workbook:r,to_sheet:e,from_sheet:n}})();function j4e(e){var t=e.slice(e[0]==="#"?1:0).slice(0,6);return[parseInt(t.slice(0,2),16),parseInt(t.slice(2,4),16),parseInt(t.slice(4,6),16)]}function Ib(e){for(var t=0,r=1;t!=3;++t)r=r*256+(e[t]>255?255:e[t]<0?0:e[t]);return r.toString(16).toUpperCase().slice(1)}function C4e(e){var t=e[0]/255,r=e[1]/255,n=e[2]/255,a=Math.max(t,r,n),i=Math.min(t,r,n),o=a-i;if(o===0)return[0,0,t];var l=0,d=0,c=a+i;switch(d=o/(c>1?2-c:c),a){case t:l=((r-n)/o+6)%6;break;case r:l=(n-t)/o+2;break;case n:l=(t-r)/o+4;break}return[l/6,d,c/2]}function A4e(e){var t=e[0],r=e[1],n=e[2],a=r*2*(n<.5?n:1-n),i=n-a/2,o=[i,i,i],l=6*t,d;if(r!==0)switch(l|0){case 0:case 6:d=a*l,o[0]+=a,o[1]+=d;break;case 1:d=a*(2-l),o[0]+=d,o[1]+=a;break;case 2:d=a*(l-2),o[1]+=a,o[2]+=d;break;case 3:d=a*(4-l),o[1]+=d,o[2]+=a;break;case 4:d=a*(l-4),o[2]+=a,o[0]+=d;break;case 5:d=a*(6-l),o[2]+=d,o[0]+=a;break}for(var c=0;c!=3;++c)o[c]=Math.round(o[c]*255);return o}function jk(e,t){if(t===0)return e;var r=C4e(j4e(e));return t<0?r[2]=r[2]*(1+t):r[2]=1-(1-r[2])*(1-t),Ib(A4e(r))}var dG=6,E4e=15,T4e=1,ll=dG;function Db(e){return Math.floor((e+Math.round(128/ll)/256)*ll)}function Mb(e){return Math.floor((e-5)/ll*100+.5)/100}function Ck(e){return Math.round((e*ll+5)/ll*256)/256}function m_(e){return Ck(Mb(Db(e)))}function wE(e){var t=Math.abs(e-m_(e)),r=ll;if(t>.005)for(ll=T4e;ll<E4e;++ll)Math.abs(e-m_(e))<=t&&(t=Math.abs(e-m_(e)),r=ll);ll=r}function yf(e){e.width?(e.wpx=Db(e.width),e.wch=Mb(e.wpx),e.MDW=ll):e.wpx?(e.wch=Mb(e.wpx),e.width=Ck(e.wch),e.MDW=ll):typeof e.wch=="number"&&(e.width=Ck(e.wch),e.wpx=Db(e.width),e.MDW=ll),e.customWidth&&delete e.customWidth}var O4e=96,uG=O4e;function Lb(e){return e*96/uG}function lp(e){return e*uG/96}var P4e={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function I4e(e,t,r,n){t.Borders=[];var a={},i=!1;(e[0].match(fl)||[]).forEach(function(o){var l=In(o);switch(Ju(l[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":a={},l.diagonalUp&&(a.diagonalUp=Os(l.diagonalUp)),l.diagonalDown&&(a.diagonalDown=Os(l.diagonalDown)),t.Borders.push(a);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(n&&n.WTF&&!i)throw new Error("unrecognized "+l[0]+" in borders")}})}function D4e(e,t,r,n){t.Fills=[];var a={},i=!1;(e[0].match(fl)||[]).forEach(function(o){var l=In(o);switch(Ju(l[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":a={},t.Fills.push(a);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":t.Fills.push(a),a={};break;case"<patternFill":case"<patternFill>":l.patternType&&(a.patternType=l.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":a.bgColor||(a.bgColor={}),l.indexed&&(a.bgColor.indexed=parseInt(l.indexed,10)),l.theme&&(a.bgColor.theme=parseInt(l.theme,10)),l.tint&&(a.bgColor.tint=parseFloat(l.tint)),l.rgb&&(a.bgColor.rgb=l.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":a.fgColor||(a.fgColor={}),l.theme&&(a.fgColor.theme=parseInt(l.theme,10)),l.tint&&(a.fgColor.tint=parseFloat(l.tint)),l.rgb!=null&&(a.fgColor.rgb=l.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(n&&n.WTF&&!i)throw new Error("unrecognized "+l[0]+" in fills")}})}function M4e(e,t,r,n){t.Fonts=[];var a={},i=!1;(e[0].match(fl)||[]).forEach(function(o){var l=In(o);switch(Ju(l[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":t.Fonts.push(a),a={};break;case"<name":l.val&&(a.name=ls(l.val));break;case"<name/>":case"</name>":break;case"<b":a.bold=l.val?Os(l.val):1;break;case"<b/>":a.bold=1;break;case"<i":a.italic=l.val?Os(l.val):1;break;case"<i/>":a.italic=1;break;case"<u":switch(l.val){case"none":a.underline=0;break;case"single":a.underline=1;break;case"double":a.underline=2;break;case"singleAccounting":a.underline=33;break;case"doubleAccounting":a.underline=34;break}break;case"<u/>":a.underline=1;break;case"<strike":a.strike=l.val?Os(l.val):1;break;case"<strike/>":a.strike=1;break;case"<outline":a.outline=l.val?Os(l.val):1;break;case"<outline/>":a.outline=1;break;case"<shadow":a.shadow=l.val?Os(l.val):1;break;case"<shadow/>":a.shadow=1;break;case"<condense":a.condense=l.val?Os(l.val):1;break;case"<condense/>":a.condense=1;break;case"<extend":a.extend=l.val?Os(l.val):1;break;case"<extend/>":a.extend=1;break;case"<sz":l.val&&(a.sz=+l.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":l.val&&(a.vertAlign=l.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":l.val&&(a.family=parseInt(l.val,10));break;case"<family/>":case"</family>":break;case"<scheme":l.val&&(a.scheme=l.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(l.val=="1")break;l.codepage=XA[parseInt(l.val,10)];break;case"<color":if(a.color||(a.color={}),l.auto&&(a.color.auto=Os(l.auto)),l.rgb)a.color.rgb=l.rgb.slice(-6);else if(l.indexed){a.color.index=parseInt(l.indexed,10);var d=Am[a.color.index];a.color.index==81&&(d=Am[1]),d||(d=Am[1]),a.color.rgb=d[0].toString(16)+d[1].toString(16)+d[2].toString(16)}else l.theme&&(a.color.theme=parseInt(l.theme,10),l.tint&&(a.color.tint=parseFloat(l.tint)),l.theme&&r.themeElements&&r.themeElements.clrScheme&&(a.color.rgb=jk(r.themeElements.clrScheme[a.color.theme].rgb,a.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":i=!0;break;case"</AlternateContent>":i=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(n&&n.WTF&&!i)throw new Error("unrecognized "+l[0]+" in fonts")}})}function L4e(e,t,r){t.NumberFmt=[];for(var n=gi(En),a=0;a<n.length;++a)t.NumberFmt[n[a]]=En[n[a]];var i=e[0].match(fl);if(i)for(a=0;a<i.length;++a){var o=In(i[a]);switch(Ju(o[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var l=Pa(ls(o.formatCode)),d=parseInt(o.numFmtId,10);if(t.NumberFmt[d]=l,d>0){if(d>392){for(d=392;d>60&&t.NumberFmt[d]!=null;--d);t.NumberFmt[d]=l}X0(l,d)}}break;case"</numFmt>":break;default:if(r.WTF)throw new Error("unrecognized "+o[0]+" in numFmts")}}}function R4e(e){var t=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var n=r[0];n<=r[1];++n)e[n]!=null&&(t[t.length]=kr("numFmt",null,{numFmtId:n,formatCode:Ja(e[n])}))}),t.length===1?"":(t[t.length]="</numFmts>",t[0]=kr("numFmts",null,{count:t.length-2}).replace("/>",">"),t.join(""))}var iy=["numFmtId","fillId","fontId","borderId","xfId"],oy=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function F4e(e,t,r){t.CellXf=[];var n,a=!1;(e[0].match(fl)||[]).forEach(function(i){var o=In(i),l=0;switch(Ju(o[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(n=o,delete n[0],l=0;l<iy.length;++l)n[iy[l]]&&(n[iy[l]]=parseInt(n[iy[l]],10));for(l=0;l<oy.length;++l)n[oy[l]]&&(n[oy[l]]=Os(n[oy[l]]));if(t.NumberFmt&&n.numFmtId>392){for(l=392;l>60;--l)if(t.NumberFmt[n.numFmtId]==t.NumberFmt[l]){n.numFmtId=l;break}}t.CellXf.push(n);break;case"</xf>":break;case"<alignment":case"<alignment/>":var d={};o.vertical&&(d.vertical=o.vertical),o.horizontal&&(d.horizontal=o.horizontal),o.textRotation!=null&&(d.textRotation=o.textRotation),o.indent&&(d.indent=o.indent),o.wrapText&&(d.wrapText=Os(o.wrapText)),n.alignment=d;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":a=!0;break;case"</AlternateContent>":a=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(r&&r.WTF&&!a)throw new Error("unrecognized "+o[0]+" in cellXfs")}})}function B4e(e){var t=[];return t[t.length]=kr("cellXfs",null),e.forEach(function(r){t[t.length]=kr("xf",null,r)}),t[t.length]="</cellXfs>",t.length===2?"":(t[0]=kr("cellXfs",null,{count:t.length-2}).replace("/>",">"),t.join(""))}var U4e=(function(){var t=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,r=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,n=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,a=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,i=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(l,d,c){var u={};if(!l)return u;l=l.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var x;return(x=l.match(t))&&L4e(x,u,c),(x=l.match(a))&&M4e(x,u,d,c),(x=l.match(n))&&D4e(x,u,d,c),(x=l.match(i))&&I4e(x,u,d,c),(x=l.match(r))&&F4e(x,u,c),u}})();function hG(e,t){var r=[Di,kr("styleSheet",null,{xmlns:dx[0],"xmlns:vt":no.vt})],n;return e.SSF&&(n=R4e(e.SSF))!=null&&(r[r.length]=n),r[r.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',r[r.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',r[r.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',r[r.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(n=B4e(t.cellXfs))&&(r[r.length]=n),r[r.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',r[r.length]='<dxfs count="0"/>',r[r.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',r.length>2&&(r[r.length]="</styleSheet>",r[1]=r[1].replace("/>",">")),r.join("")}function z4e(e,t){var r=e.read_shift(2),n=ul(e);return[r,n]}function q4e(e,t,r){r||(r=Ht(6+4*t.length)),r.write_shift(2,e),Ao(t,r);var n=r.length>r.l?r.slice(0,r.l):r;return r.l==null&&(r.l=r.length),n}function H4e(e,t,r){var n={};n.sz=e.read_shift(2)/20;var a=_we(e);a.fItalic&&(n.italic=1),a.fCondense&&(n.condense=1),a.fExtend&&(n.extend=1),a.fShadow&&(n.shadow=1),a.fOutline&&(n.outline=1),a.fStrikeout&&(n.strike=1);var i=e.read_shift(2);switch(i===700&&(n.bold=1),e.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript";break}var o=e.read_shift(1);o!=0&&(n.underline=o);var l=e.read_shift(1);l>0&&(n.family=l);var d=e.read_shift(1);switch(d>0&&(n.charset=d),e.l++,n.color=Nwe(e),e.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor";break}return n.name=ul(e),n}function $4e(e,t){t||(t=Ht(153)),t.write_shift(2,e.sz*20),Swe(e,t),t.write_shift(2,e.bold?700:400);var r=0;e.vertAlign=="superscript"?r=1:e.vertAlign=="subscript"&&(r=2),t.write_shift(2,r),t.write_shift(1,e.underline||0),t.write_shift(1,e.family||0),t.write_shift(1,e.charset||0),t.write_shift(1,0),Nk(e.color,t);var n=0;return n=2,t.write_shift(1,n),Ao(e.name,t),t.length>t.l?t.slice(0,t.l):t}var V4e=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],x_,W4e=hl;function BM(e,t){t||(t=Ht(84)),x_||(x_=B5(V4e));var r=x_[e.patternType];r==null&&(r=40),t.write_shift(4,r);var n=0;if(r!=40)for(Nk({auto:1},t),Nk({auto:1},t);n<12;++n)t.write_shift(4,0);else{for(;n<4;++n)t.write_shift(4,0);for(;n<12;++n)t.write_shift(4,0)}return t.length>t.l?t.slice(0,t.l):t}function G4e(e,t){var r=e.l+t,n=e.read_shift(2),a=e.read_shift(2);return e.l=r,{ixfe:n,numFmtId:a}}function fG(e,t,r){r||(r=Ht(16)),r.write_shift(2,t||0),r.write_shift(2,e.numFmtId||0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(1,0),r.write_shift(1,0);var n=0;return r.write_shift(1,n),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r}function Sg(e,t){return t||(t=Ht(10)),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(4,0),t.write_shift(4,0),t}var K4e=hl;function X4e(e,t){return t||(t=Ht(51)),t.write_shift(1,0),Sg(null,t),Sg(null,t),Sg(null,t),Sg(null,t),Sg(null,t),t.length>t.l?t.slice(0,t.l):t}function Y4e(e,t){return t||(t=Ht(52)),t.write_shift(4,e.xfId),t.write_shift(2,1),t.write_shift(1,0),t.write_shift(1,0),kk(e.name||"",t),t.length>t.l?t.slice(0,t.l):t}function Q4e(e,t,r){var n=Ht(2052);return n.write_shift(4,e),kk(t,n),kk(r,n),n.length>n.l?n.slice(0,n.l):n}function Z4e(e,t,r){var n={};n.NumberFmt=[];for(var a in En)n.NumberFmt[a]=En[a];n.CellXf=[],n.Fonts=[];var i=[],o=!1;return gh(e,function(d,c,u){switch(u){case 44:n.NumberFmt[d[0]]=d[1],X0(d[1],d[0]);break;case 43:n.Fonts.push(d),d.color.theme!=null&&t&&t.themeElements&&t.themeElements.clrScheme&&(d.color.rgb=jk(t.themeElements.clrScheme[d.color.theme].rgb,d.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:i[i.length-1]==617&&n.CellXf.push(d);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:o=!0;break;case 36:o=!1;break;case 37:i.push(u),o=!0;break;case 38:i.pop(),o=!1;break;default:if(c.T>0)i.push(u);else if(c.T<0)i.pop();else if(!o||r.WTF&&i[i.length-1]!=37)throw new Error("Unexpected record 0x"+u.toString(16))}}),n}function J4e(e,t){if(t){var r=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)t[a]!=null&&++r}),r!=0&&(dr(e,615,lu(r)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)t[a]!=null&&dr(e,44,q4e(a,t[a]))}),dr(e,616))}}function e3e(e){var t=1;dr(e,611,lu(t)),dr(e,43,$4e({sz:12,color:{theme:1},name:"Calibri",family:2})),dr(e,612)}function t3e(e){var t=2;dr(e,603,lu(t)),dr(e,45,BM({patternType:"none"})),dr(e,45,BM({patternType:"gray125"})),dr(e,604)}function r3e(e){var t=1;dr(e,613,lu(t)),dr(e,46,X4e()),dr(e,614)}function n3e(e){var t=1;dr(e,626,lu(t)),dr(e,47,fG({numFmtId:0},65535)),dr(e,627)}function a3e(e,t){dr(e,617,lu(t.length)),t.forEach(function(r){dr(e,47,fG(r,0))}),dr(e,618)}function s3e(e){var t=1;dr(e,619,lu(t)),dr(e,48,Y4e({xfId:0,name:"Normal"})),dr(e,620)}function i3e(e){var t=0;dr(e,505,lu(t)),dr(e,506)}function o3e(e){var t=0;dr(e,508,Q4e(t,"TableStyleMedium9","PivotStyleMedium4")),dr(e,509)}function l3e(e,t){var r=cc();return dr(r,278),J4e(r,e.SSF),e3e(r),t3e(r),r3e(r),n3e(r),a3e(r,t.cellXfs),s3e(r),i3e(r),o3e(r),dr(r,279),r.end()}var c3e=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function d3e(e,t,r){t.themeElements.clrScheme=[];var n={};(e[0].match(fl)||[]).forEach(function(a){var i=In(a);switch(i[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":n.rgb=i.val;break;case"<a:sysClr":n.rgb=i.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":i[0].charAt(1)==="/"?(t.themeElements.clrScheme[c3e.indexOf(i[0])]=n,n={}):n.name=i[0].slice(3,i[0].length-1);break;default:if(r&&r.WTF)throw new Error("Unrecognized "+i[0]+" in clrScheme")}})}function u3e(){}function h3e(){}var f3e=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,m3e=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,x3e=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function p3e(e,t,r){t.themeElements={};var n;[["clrScheme",f3e,d3e],["fontScheme",m3e,u3e],["fmtScheme",x3e,h3e]].forEach(function(a){if(!(n=e.match(a[1])))throw new Error(a[0]+" not found in themeElements");a[2](n,t,r)})}var g3e=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function mG(e,t){(!e||e.length===0)&&(e=kE());var r,n={};if(!(r=e.match(g3e)))throw new Error("themeElements not found in theme");return p3e(r[0],n,t),n.raw=e,n}function kE(e,t){if(t&&t.themeXLSX)return t.themeXLSX;if(e&&typeof e.raw=="string")return e.raw;var r=[Di];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function b3e(e,t,r){var n=e.l+t,a=e.read_shift(4);if(a!==124226){if(!r.cellStyles){e.l=n;return}var i=e.slice(e.l);e.l=n;var o;try{o=iW(i,{type:"array"})}catch{return}var l=Dc(o,"theme/theme/theme1.xml",!0);if(l)return mG(l,r)}}function v3e(e){return e.read_shift(4)}function y3e(e){var t={};switch(t.xclrType=e.read_shift(2),t.nTintShade=e.read_shift(2),t.xclrType){case 0:e.l+=4;break;case 1:t.xclrValue=w3e(e,4);break;case 2:t.xclrValue=GW(e);break;case 3:t.xclrValue=v3e(e);break;case 4:e.l+=4;break}return e.l+=8,t}function w3e(e,t){return hl(e,t)}function k3e(e,t){return hl(e,t)}function N3e(e){var t=e.read_shift(2),r=e.read_shift(2)-4,n=[t];switch(t){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:n[1]=y3e(e);break;case 6:n[1]=k3e(e,r);break;case 14:case 15:n[1]=e.read_shift(r===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+t+" "+r)}return n}function _3e(e,t){var r=e.l+t;e.l+=2;var n=e.read_shift(2);e.l+=2;for(var a=e.read_shift(2),i=[];a-- >0;)i.push(N3e(e,r-e.l));return{ixfe:n,ext:i}}function S3e(e,t){t.forEach(function(r){r[0]})}function j3e(e,t){return{flags:e.read_shift(4),version:e.read_shift(4),name:ul(e)}}function C3e(e){var t=Ht(12+2*e.name.length);return t.write_shift(4,e.flags),t.write_shift(4,e.version),Ao(e.name,t),t.slice(0,t.l)}function A3e(e){for(var t=[],r=e.read_shift(4);r-- >0;)t.push([e.read_shift(4),e.read_shift(4)]);return t}function E3e(e){var t=Ht(4+8*e.length);t.write_shift(4,e.length);for(var r=0;r<e.length;++r)t.write_shift(4,e[r][0]),t.write_shift(4,e[r][1]);return t}function T3e(e,t){var r=Ht(8+2*t.length);return r.write_shift(4,e),Ao(t,r),r.slice(0,r.l)}function O3e(e){return e.l+=4,e.read_shift(4)!=0}function P3e(e,t){var r=Ht(8);return r.write_shift(4,e),r.write_shift(4,1),r}function I3e(e,t,r){var n={Types:[],Cell:[],Value:[]},a=r||{},i=[],o=!1,l=2;return gh(e,function(d,c,u){switch(u){case 335:n.Types.push({name:d.name});break;case 51:d.forEach(function(x){l==1?n.Cell.push({type:n.Types[x[0]-1].name,index:x[1]}):l==0&&n.Value.push({type:n.Types[x[0]-1].name,index:x[1]})});break;case 337:l=d?1:0;break;case 338:l=2;break;case 35:i.push(u),o=!0;break;case 36:i.pop(),o=!1;break;default:if(!c.T){if(!o||a.WTF&&i[i.length-1]!=35)throw new Error("Unexpected record 0x"+u.toString(16))}}}),n}function D3e(){var e=cc();return dr(e,332),dr(e,334,lu(1)),dr(e,335,C3e({name:"XLDAPR",version:12e4,flags:3496657072})),dr(e,336),dr(e,339,T3e(1,"XLDAPR")),dr(e,52),dr(e,35,lu(514)),dr(e,4096,lu(0)),dr(e,4097,xd(1)),dr(e,36),dr(e,53),dr(e,340),dr(e,337,P3e(1)),dr(e,51,E3e([[1,0]])),dr(e,338),dr(e,333),e.end()}function M3e(e,t,r){var n={Types:[],Cell:[],Value:[]};if(!e)return n;var a=!1,i=2,o;return e.replace(fl,function(l){var d=In(l);switch(Ju(d[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":n.Types.push({name:d.name});break;case"</metadataType>":break;case"<futureMetadata":for(var c=0;c<n.Types.length;++c)n.Types[c].name==d.name&&(o=n.Types[c]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":i==1?n.Cell.push({type:n.Types[d.t-1].name,index:+d.v}):i==0&&n.Value.push({type:n.Types[d.t-1].name,index:+d.v});break;case"</rc>":break;case"<cellMetadata":i=1;break;case"</cellMetadata>":i=2;break;case"<valueMetadata":i=0;break;case"</valueMetadata>":i=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;case"<rvb":if(!o)break;o.offsets||(o.offsets=[]),o.offsets.push(+d.i);break;default:if(!a&&r.WTF)throw new Error("unrecognized "+d[0]+" in metadata")}return l}),n}function xG(){var e=[Di];return e.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),e.join("")}function L3e(e){var t=[];if(!e)return t;var r=1;return(e.match(fl)||[]).forEach(function(n){var a=In(n);switch(a[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete a[0],a.i?r=a.i:a.i=r,t.push(a);break}}),t}function R3e(e){var t={};t.i=e.read_shift(4);var r={};r.r=e.read_shift(4),r.c=e.read_shift(4),t.r=Tn(r);var n=e.read_shift(1);return n&2&&(t.l="1"),n&8&&(t.a="1"),t}function F3e(e,t,r){var n=[];return gh(e,function(i,o,l){switch(l){case 63:n.push(i);break;default:if(!o.T)throw new Error("Unexpected record 0x"+l.toString(16))}}),n}function B3e(e,t,r,n){if(!e)return e;var a=n||{},i=!1;gh(e,function(l,d,c){switch(c){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:i=!0;break;case 36:i=!1;break;default:if(!d.T){if(!i||a.WTF)throw new Error("Unexpected record 0x"+c.toString(16))}}},a)}function U3e(e,t){if(!e)return"??";var r=(e.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return t["!id"][r].Target}var k1=1024;function pG(e,t){for(var r=[21600,21600],n=["m0,0l0",r[1],r[0],r[1],r[0],"0xe"].join(","),a=[kr("xml",null,{"xmlns:v":Ac.v,"xmlns:o":Ac.o,"xmlns:x":Ac.x,"xmlns:mv":Ac.mv}).replace(/\/>/,">"),kr("o:shapelayout",kr("o:idmap",null,{"v:ext":"edit",data:e}),{"v:ext":"edit"}),kr("v:shapetype",[kr("v:stroke",null,{joinstyle:"miter"}),kr("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:r.join(","),path:n})];k1<e*1e3;)k1+=1e3;return t.forEach(function(i){var o=ei(i[0]),l={color2:"#BEFF82",type:"gradient"};l.type=="gradient"&&(l.angle="-180");var d=l.type=="gradient"?kr("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,c=kr("v:fill",d,l),u={on:"t",obscured:"t"};++k1,a=a.concat(["<v:shape"+Tb({id:"_x0000_s"+k1,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(i[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",c,kr("v:shadow",null,u),kr("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",zo("x:Anchor",[o.c+1,0,o.r+1,0,o.c+3,20,o.r+5,20].join(",")),zo("x:AutoFill","False"),zo("x:Row",String(o.r)),zo("x:Column",String(o.c)),i[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),a.push("</xml>"),a.join("")}function UM(e,t,r,n){var a=Array.isArray(e),i;t.forEach(function(o){var l=ei(o.ref);if(a?(e[l.r]||(e[l.r]=[]),i=e[l.r][l.c]):i=e[o.ref],!i){i={t:"z"},a?e[l.r][l.c]=i:e[o.ref]=i;var d=Ia(e["!ref"]||"BDWGO1000001:A1");d.s.r>l.r&&(d.s.r=l.r),d.e.r<l.r&&(d.e.r=l.r),d.s.c>l.c&&(d.s.c=l.c),d.e.c<l.c&&(d.e.c=l.c);var c=Kn(d);c!==e["!ref"]&&(e["!ref"]=c)}i.c||(i.c=[]);var u={a:o.author,t:o.t,r:o.r,T:r};o.h&&(u.h=o.h);for(var x=i.c.length-1;x>=0;--x){if(!r&&i.c[x].T)return;r&&!i.c[x].T&&i.c.splice(x,1)}if(r&&n){for(x=0;x<n.length;++x)if(u.a==n[x].id){u.a=n[x].name||u.a;break}}i.c.push(u)})}function z3e(e,t){if(e.match(/<(?:\w+:)?comments *\/>/))return[];var r=[],n=[],a=e.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);a&&a[1]&&a[1].split(/<\/\w*:?author>/).forEach(function(o){if(!(o===""||o.trim()==="")){var l=o.match(/<(?:\w+:)?author[^>]*>(.*)/);l&&r.push(l[1])}});var i=e.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return i&&i[1]&&i[1].split(/<\/\w*:?comment>/).forEach(function(o){if(!(o===""||o.trim()==="")){var l=o.match(/<(?:\w+:)?comment[^>]*>/);if(l){var d=In(l[0]),c={author:d.authorId&&r[d.authorId]||"sheetjsghost",ref:d.ref,guid:d.guid},u=ei(d.ref);if(!(t.sheetRows&&t.sheetRows<=u.r)){var x=o.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),b=!!x&&!!x[1]&&vE(x[1])||{r:"",t:"",h:""};c.r=b.r,b.r=="<t></t>"&&(b.t=b.h=""),c.t=(b.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.cellHTML&&(c.h=b.h),n.push(c)}}}}),n}function gG(e){var t=[Di,kr("comments",null,{xmlns:dx[0]})],r=[];return t.push("<authors>"),e.forEach(function(n){n[1].forEach(function(a){var i=Ja(a.a);r.indexOf(i)==-1&&(r.push(i),t.push("<author>"+i+"</author>")),a.T&&a.ID&&r.indexOf("tc="+a.ID)==-1&&(r.push("tc="+a.ID),t.push("<author>tc="+a.ID+"</author>"))})}),r.length==0&&(r.push("SheetJ5"),t.push("<author>SheetJ5</author>")),t.push("</authors>"),t.push("<commentList>"),e.forEach(function(n){var a=0,i=[];if(n[1][0]&&n[1][0].T&&n[1][0].ID?a=r.indexOf("tc="+n[1][0].ID):n[1].forEach(function(d){d.a&&(a=r.indexOf(Ja(d.a))),i.push(d.t||"")}),t.push('<comment ref="'+n[0]+'" authorId="'+a+'"><text>'),i.length<=1)t.push(zo("t",Ja(i[0]||"")));else{for(var o=`Comment:
    `+i[0]+`
`,l=1;l<i.length;++l)o+=`Reply:
    `+i[l]+`
`;t.push(zo("t",Ja(o)))}t.push("</text></comment>")}),t.push("</commentList>"),t.length>2&&(t[t.length]="</comments>",t[1]=t[1].replace("/>",">")),t.join("")}function q3e(e,t){var r=[],n=!1,a={},i=0;return e.replace(fl,function(l,d){var c=In(l);switch(Ju(c[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":a={author:c.personId,guid:c.id,ref:c.ref,T:1};break;case"</threadedComment>":a.t!=null&&r.push(a);break;case"<text>":case"<text":i=d+l.length;break;case"</text>":a.t=e.slice(i,d).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":n=!0;break;case"</mentions>":n=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&t.WTF)throw new Error("unrecognized "+c[0]+" in threaded comments")}return l}),r}function H3e(e,t,r){var n=[Di,kr("ThreadedComments",null,{xmlns:no.TCMNT}).replace(/[\/]>/,">")];return e.forEach(function(a){var i="";(a[1]||[]).forEach(function(o,l){if(!o.T){delete o.ID;return}o.a&&t.indexOf(o.a)==-1&&t.push(o.a);var d={ref:a[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+r.tcid++).slice(-12)+"}"};l==0?i=d.id:d.parentId=i,o.ID=d.id,o.a&&(d.personId="{54EE7950-7262-4200-6969-"+("000000000000"+t.indexOf(o.a)).slice(-12)+"}"),n.push(kr("threadedComment",zo("text",o.t||""),d))})}),n.push("</ThreadedComments>"),n.join("")}function $3e(e,t){var r=[],n=!1;return e.replace(fl,function(i){var o=In(i);switch(Ju(o[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":r.push({name:o.displayname,id:o.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&t.WTF)throw new Error("unrecognized "+o[0]+" in threaded comments")}return i}),r}function V3e(e){var t=[Di,kr("personList",null,{xmlns:no.TCMNT,"xmlns:x":dx[0]}).replace(/[\/]>/,">")];return e.forEach(function(r,n){t.push(kr("person",null,{displayName:r,id:"{54EE7950-7262-4200-6969-"+("000000000000"+n).slice(-12)+"}",userId:r,providerId:"None"}))}),t.push("</personList>"),t.join("")}function W3e(e){var t={};t.iauthor=e.read_shift(4);var r=mx(e);return t.rfx=r.s,t.ref=Tn(r.s),e.l+=16,t}function G3e(e,t){return t==null&&(t=Ht(36)),t.write_shift(4,e[1].iauthor),Pp(e[0],t),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t}var K3e=ul;function X3e(e){return Ao(e.slice(0,54))}function Y3e(e,t){var r=[],n=[],a={},i=!1;return gh(e,function(l,d,c){switch(c){case 632:n.push(l);break;case 635:a=l;break;case 637:a.t=l.t,a.h=l.h,a.r=l.r;break;case 636:if(a.author=n[a.iauthor],delete a.iauthor,t.sheetRows&&a.rfx&&t.sheetRows<=a.rfx.r)break;a.t||(a.t=""),delete a.rfx,r.push(a);break;case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:break;case 38:break;default:if(!d.T){if(!i||t.WTF)throw new Error("Unexpected record 0x"+c.toString(16))}}}),r}function Q3e(e){var t=cc(),r=[];return dr(t,628),dr(t,630),e.forEach(function(n){n[1].forEach(function(a){r.indexOf(a.a)>-1||(r.push(a.a.slice(0,54)),dr(t,632,X3e(a.a)))})}),dr(t,631),dr(t,633),e.forEach(function(n){n[1].forEach(function(a){a.iauthor=r.indexOf(a.a);var i={s:ei(n[0]),e:ei(n[0])};dr(t,635,G3e([i,a])),a.t&&a.t.length>0&&dr(t,637,vwe(a)),dr(t,636),delete a.iauthor})}),dr(t,634),dr(t,629),t.end()}var Z3e="application/vnd.ms-office.vbaProject";function J3e(e){var t=yn.utils.cfb_new({root:"R"});return e.FullPaths.forEach(function(r,n){if(!(r.slice(-1)==="/"||!r.match(/_VBA_PROJECT_CUR/))){var a=r.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");yn.utils.cfb_add(t,a,e.FileIndex[n].content)}}),yn.write(t)}function eNe(e,t){t.FullPaths.forEach(function(r,n){if(n!=0){var a=r.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");a.slice(-1)!=="/"&&yn.utils.cfb_add(e,a,t.FileIndex[n].content)}})}var bG=["xlsb","xlsm","xlam","biff8","xla"];function tNe(){return{"!type":"dialog"}}function rNe(){return{"!type":"dialog"}}function nNe(){return{"!type":"macro"}}function aNe(){return{"!type":"macro"}}var O1=(function(){var e=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,t={r:0,c:0};function r(n,a,i,o){var l=!1,d=!1;i.length==0?d=!0:i.charAt(0)=="["&&(d=!0,i=i.slice(1,-1)),o.length==0?l=!0:o.charAt(0)=="["&&(l=!0,o=o.slice(1,-1));var c=i.length>0?parseInt(i,10)|0:0,u=o.length>0?parseInt(o,10)|0:0;return l?u+=t.c:--u,d?c+=t.r:--c,a+(l?"":"$")+Js(u)+(d?"":"$")+Ii(c)}return function(a,i){return t=i,a.replace(e,r)}})(),NE=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,_E=(function(){return function(t,r){return t.replace(NE,function(n,a,i,o,l,d){var c=dE(o)-(i?0:r.c),u=cE(d)-(l?0:r.r),x=u==0?"":l?u+1:"["+u+"]",b=c==0?"":i?c+1:"["+c+"]";return a+"R"+x+"C"+b})}})();function vG(e,t){return e.replace(NE,function(r,n,a,i,o,l){return n+(a=="$"?a+i:Js(dE(i)+t.c))+(o=="$"?o+l:Ii(cE(l)+t.r))})}function sNe(e,t,r){var n=dc(t),a=n.s,i=ei(r),o={r:i.r-a.r,c:i.c-a.c};return vG(e,o)}function iNe(e){return e.length!=1}function zM(e){return e.replace(/_xlfn\./g,"")}function Fi(e){e.l+=1}function wf(e,t){var r=e.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function yG(e,t,r){var n=2;if(r){if(r.biff>=2&&r.biff<=5)return wG(e);r.biff==12&&(n=4)}var a=e.read_shift(n),i=e.read_shift(n),o=wf(e),l=wf(e);return{s:{r:a,c:o[0],cRel:o[1],rRel:o[2]},e:{r:i,c:l[0],cRel:l[1],rRel:l[2]}}}function wG(e){var t=wf(e),r=wf(e),n=e.read_shift(1),a=e.read_shift(1);return{s:{r:t[0],c:n,cRel:t[1],rRel:t[2]},e:{r:r[0],c:a,cRel:r[1],rRel:r[2]}}}function oNe(e,t,r){if(r.biff<8)return wG(e);var n=e.read_shift(r.biff==12?4:2),a=e.read_shift(r.biff==12?4:2),i=wf(e),o=wf(e);return{s:{r:n,c:i[0],cRel:i[1],rRel:i[2]},e:{r:a,c:o[0],cRel:o[1],rRel:o[2]}}}function kG(e,t,r){if(r&&r.biff>=2&&r.biff<=5)return lNe(e);var n=e.read_shift(r&&r.biff==12?4:2),a=wf(e);return{r:n,c:a[0],cRel:a[1],rRel:a[2]}}function lNe(e){var t=wf(e),r=e.read_shift(1);return{r:t[0],c:r,cRel:t[1],rRel:t[2]}}function cNe(e){var t=e.read_shift(2),r=e.read_shift(2);return{r:t,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function dNe(e,t,r){var n=r&&r.biff?r.biff:8;if(n>=2&&n<=5)return uNe(e);var a=e.read_shift(n>=12?4:2),i=e.read_shift(2),o=(i&16384)>>14,l=(i&32768)>>15;if(i&=16383,l==1)for(;a>524287;)a-=1048576;if(o==1)for(;i>8191;)i=i-16384;return{r:a,c:i,cRel:o,rRel:l}}function uNe(e){var t=e.read_shift(2),r=e.read_shift(1),n=(t&32768)>>15,a=(t&16384)>>14;return t&=16383,n==1&&t>=8192&&(t=t-16384),a==1&&r>=128&&(r=r-256),{r:t,c:r,cRel:a,rRel:n}}function hNe(e,t,r){var n=(e[e.l++]&96)>>5,a=yG(e,r.biff>=2&&r.biff<=5?6:8,r);return[n,a]}function fNe(e,t,r){var n=(e[e.l++]&96)>>5,a=e.read_shift(2,"i"),i=8;if(r)switch(r.biff){case 5:e.l+=12,i=6;break;case 12:i=12;break}var o=yG(e,i,r);return[n,a,o]}function mNe(e,t,r){var n=(e[e.l++]&96)>>5;return e.l+=r&&r.biff>8?12:r.biff<8?6:8,[n]}function xNe(e,t,r){var n=(e[e.l++]&96)>>5,a=e.read_shift(2),i=8;if(r)switch(r.biff){case 5:e.l+=12,i=6;break;case 12:i=12;break}return e.l+=i,[n,a]}function pNe(e,t,r){var n=(e[e.l++]&96)>>5,a=oNe(e,t-1,r);return[n,a]}function gNe(e,t,r){var n=(e[e.l++]&96)>>5;return e.l+=r.biff==2?6:r.biff==12?14:7,[n]}function qM(e){var t=e[e.l+1]&1,r=1;return e.l+=4,[t,r]}function bNe(e,t,r){e.l+=2;for(var n=e.read_shift(r&&r.biff==2?1:2),a=[],i=0;i<=n;++i)a.push(e.read_shift(r&&r.biff==2?1:2));return a}function vNe(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=2,[n,e.read_shift(r&&r.biff==2?1:2)]}function yNe(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=2,[n,e.read_shift(r&&r.biff==2?1:2)]}function wNe(e){var t=e[e.l+1]&255?1:0;return e.l+=2,[t,e.read_shift(2)]}function kNe(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=r&&r.biff==2?3:4,[n]}function NG(e){var t=e.read_shift(1),r=e.read_shift(1);return[t,r]}function NNe(e){return e.read_shift(2),NG(e)}function _Ne(e){return e.read_shift(2),NG(e)}function SNe(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=kG(e,0,r);return[n,a]}function jNe(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=dNe(e,0,r);return[n,a]}function CNe(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=e.read_shift(2);r&&r.biff==5&&(e.l+=12);var i=kG(e,0,r);return[n,a,i]}function ANe(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=e.read_shift(r&&r.biff<=3?1:2);return[O_e[a],jG[a],n]}function ENe(e,t,r){var n=e[e.l++],a=e.read_shift(1),i=r&&r.biff<=3?[n==88?-1:0,e.read_shift(1)]:TNe(e);return[a,(i[0]===0?jG:T_e)[i[1]]]}function TNe(e){return[e[e.l+1]>>7,e.read_shift(2)&32767]}function ONe(e,t,r){e.l+=r&&r.biff==2?3:4}function PNe(e,t,r){if(e.l++,r&&r.biff==12)return[e.read_shift(4,"i"),0];var n=e.read_shift(2),a=e.read_shift(r&&r.biff==2?1:2);return[n,a]}function INe(e){return e.l++,bh[e.read_shift(1)]}function DNe(e){return e.l++,e.read_shift(2)}function MNe(e){return e.l++,e.read_shift(1)!==0}function LNe(e){return e.l++,cl(e)}function RNe(e,t,r){return e.l++,Nv(e,t-1,r)}function FNe(e,t){var r=[e.read_shift(1)];if(t==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=Ci(e,1)?"TRUE":"FALSE",t!=12&&(e.l+=7);break;case 37:case 16:r[1]=bh[e[e.l]],e.l+=t==12?4:8;break;case 0:e.l+=8;break;case 1:r[1]=cl(e);break;case 2:r[1]=xx(e,0,{biff:t>0&&t<8?2:t});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function BNe(e,t,r){for(var n=e.read_shift(r.biff==12?4:2),a=[],i=0;i!=n;++i)a.push((r.biff==12?mx:q5)(e));return a}function UNe(e,t,r){var n=0,a=0;r.biff==12?(n=e.read_shift(4),a=e.read_shift(4)):(a=1+e.read_shift(1),n=1+e.read_shift(2)),r.biff>=2&&r.biff<8&&(--n,--a==0&&(a=256));for(var i=0,o=[];i!=n&&(o[i]=[]);++i)for(var l=0;l!=a;++l)o[i][l]=FNe(e,r.biff);return o}function zNe(e,t,r){var n=e.read_shift(1)>>>5&3,a=!r||r.biff>=8?4:2,i=e.read_shift(a);switch(r.biff){case 2:e.l+=5;break;case 3:case 4:e.l+=8;break;case 5:e.l+=12;break}return[n,0,i]}function qNe(e,t,r){if(r.biff==5)return HNe(e);var n=e.read_shift(1)>>>5&3,a=e.read_shift(2),i=e.read_shift(4);return[n,a,i]}function HNe(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2,"i");e.l+=8;var n=e.read_shift(2);return e.l+=12,[t,r,n]}function $Ne(e,t,r){var n=e.read_shift(1)>>>5&3;e.l+=r&&r.biff==2?3:4;var a=e.read_shift(r&&r.biff==2?1:2);return[n,a]}function VNe(e,t,r){var n=e.read_shift(1)>>>5&3,a=e.read_shift(r&&r.biff==2?1:2);return[n,a]}function WNe(e,t,r){var n=e.read_shift(1)>>>5&3;return e.l+=4,r.biff<8&&e.l--,r.biff==12&&(e.l+=2),[n]}function GNe(e,t,r){var n=(e[e.l++]&96)>>5,a=e.read_shift(2),i=4;if(r)switch(r.biff){case 5:i=15;break;case 12:i=6;break}return e.l+=i,[n,a]}var KNe=hl,XNe=hl,YNe=hl;function Sv(e,t,r){return e.l+=2,[cNe(e)]}function SE(e){return e.l+=6,[]}var QNe=Sv,ZNe=SE,JNe=SE,e_e=Sv;function _G(e){return e.l+=2,[Ui(e),e.read_shift(2)&1]}var t_e=Sv,r_e=_G,n_e=SE,a_e=Sv,s_e=Sv,i_e=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function o_e(e){e.l+=2;var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(4),a=e.read_shift(2),i=e.read_shift(2),o=i_e[r>>2&31];return{ixti:t,coltype:r&3,rt:o,idx:n,c:a,C:i}}function l_e(e){return e.l+=2,[e.read_shift(4)]}function c_e(e,t,r){return e.l+=5,e.l+=2,e.l+=r.biff==2?1:4,["PTGSHEET"]}function d_e(e,t,r){return e.l+=r.biff==2?4:5,["PTGENDSHEET"]}function u_e(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function h_e(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function f_e(e){return e.l+=4,[0,0]}var HM={1:{n:"PtgExp",f:PNe},2:{n:"PtgTbl",f:YNe},3:{n:"PtgAdd",f:Fi},4:{n:"PtgSub",f:Fi},5:{n:"PtgMul",f:Fi},6:{n:"PtgDiv",f:Fi},7:{n:"PtgPower",f:Fi},8:{n:"PtgConcat",f:Fi},9:{n:"PtgLt",f:Fi},10:{n:"PtgLe",f:Fi},11:{n:"PtgEq",f:Fi},12:{n:"PtgGe",f:Fi},13:{n:"PtgGt",f:Fi},14:{n:"PtgNe",f:Fi},15:{n:"PtgIsect",f:Fi},16:{n:"PtgUnion",f:Fi},17:{n:"PtgRange",f:Fi},18:{n:"PtgUplus",f:Fi},19:{n:"PtgUminus",f:Fi},20:{n:"PtgPercent",f:Fi},21:{n:"PtgParen",f:Fi},22:{n:"PtgMissArg",f:Fi},23:{n:"PtgStr",f:RNe},26:{n:"PtgSheet",f:c_e},27:{n:"PtgEndSheet",f:d_e},28:{n:"PtgErr",f:INe},29:{n:"PtgBool",f:MNe},30:{n:"PtgInt",f:DNe},31:{n:"PtgNum",f:LNe},32:{n:"PtgArray",f:gNe},33:{n:"PtgFunc",f:ANe},34:{n:"PtgFuncVar",f:ENe},35:{n:"PtgName",f:zNe},36:{n:"PtgRef",f:SNe},37:{n:"PtgArea",f:hNe},38:{n:"PtgMemArea",f:$Ne},39:{n:"PtgMemErr",f:KNe},40:{n:"PtgMemNoMem",f:XNe},41:{n:"PtgMemFunc",f:VNe},42:{n:"PtgRefErr",f:WNe},43:{n:"PtgAreaErr",f:mNe},44:{n:"PtgRefN",f:jNe},45:{n:"PtgAreaN",f:pNe},46:{n:"PtgMemAreaN",f:u_e},47:{n:"PtgMemNoMemN",f:h_e},57:{n:"PtgNameX",f:qNe},58:{n:"PtgRef3d",f:CNe},59:{n:"PtgArea3d",f:fNe},60:{n:"PtgRefErr3d",f:GNe},61:{n:"PtgAreaErr3d",f:xNe},255:{}},m_e={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},x_e={1:{n:"PtgElfLel",f:_G},2:{n:"PtgElfRw",f:a_e},3:{n:"PtgElfCol",f:QNe},6:{n:"PtgElfRwV",f:s_e},7:{n:"PtgElfColV",f:e_e},10:{n:"PtgElfRadical",f:t_e},11:{n:"PtgElfRadicalS",f:n_e},13:{n:"PtgElfColS",f:ZNe},15:{n:"PtgElfColSV",f:JNe},16:{n:"PtgElfRadicalLel",f:r_e},25:{n:"PtgList",f:o_e},29:{n:"PtgSxName",f:l_e},255:{}},p_e={0:{n:"PtgAttrNoop",f:f_e},1:{n:"PtgAttrSemi",f:kNe},2:{n:"PtgAttrIf",f:yNe},4:{n:"PtgAttrChoose",f:bNe},8:{n:"PtgAttrGoto",f:vNe},16:{n:"PtgAttrSum",f:ONe},32:{n:"PtgAttrBaxcel",f:qM},33:{n:"PtgAttrBaxcel",f:qM},64:{n:"PtgAttrSpace",f:NNe},65:{n:"PtgAttrSpaceSemi",f:_Ne},128:{n:"PtgAttrIfError",f:wNe},255:{}};function jv(e,t,r,n){if(n.biff<8)return hl(e,t);for(var a=e.l+t,i=[],o=0;o!==r.length;++o)switch(r[o][0]){case"PtgArray":r[o][1]=UNe(e,0,n),i.push(r[o][1]);break;case"PtgMemArea":r[o][2]=BNe(e,r[o][1],n),i.push(r[o][2]);break;case"PtgExp":n&&n.biff==12&&(r[o][1][1]=e.read_shift(4),i.push(r[o][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[o][0]}return t=a-e.l,t!==0&&i.push(hl(e,t)),i}function Cv(e,t,r){for(var n=e.l+t,a,i,o=[];n!=e.l;)t=n-e.l,i=e[e.l],a=HM[i]||HM[m_e[i]],(i===24||i===25)&&(a=(i===24?x_e:p_e)[e[e.l+1]]),!a||!a.f?hl(e,t):o.push([a.n,a.f(e,t,r)]);return o}function g_e(e){for(var t=[],r=0;r<e.length;++r){for(var n=e[r],a=[],i=0;i<n.length;++i){var o=n[i];if(o)switch(o[0]){case 2:a.push('"'+o[1].replace(/"/g,'""')+'"');break;default:a.push(o[1])}else a.push("")}t.push(a.join(","))}return t.join(";")}var b_e={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function v_e(e,t){if(!e&&!(t&&t.biff<=5&&t.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(e)?"'"+e+"'":e}function SG(e,t,r){if(!e)return"SH33TJSERR0";if(r.biff>8&&(!e.XTI||!e.XTI[t]))return e.SheetNames[t];if(!e.XTI)return"SH33TJSERR6";var n=e.XTI[t];if(r.biff<8)return t>1e4&&(t-=65536),t<0&&(t=-t),t==0?"":e.XTI[t-1];if(!n)return"SH33TJSERR1";var a="";if(r.biff>8)switch(e[n[0]][0]){case 357:return a=n[1]==-1?"#REF":e.SheetNames[n[1]],n[1]==n[2]?a:a+":"+e.SheetNames[n[2]];case 358:return r.SID!=null?e.SheetNames[r.SID]:"SH33TJSSAME"+e[n[0]][0];case 355:default:return"SH33TJSSRC"+e[n[0]][0]}switch(e[n[0]][0][0]){case 1025:return a=n[1]==-1?"#REF":e.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?a:a+":"+e.SheetNames[n[2]];case 14849:return e[n[0]].slice(1).map(function(i){return i.Name}).join(";;");default:return e[n[0]][0][3]?(a=n[1]==-1?"#REF":e[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?a:a+":"+e[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function $M(e,t,r){var n=SG(e,t,r);return n=="#REF"?n:v_e(n,r)}function il(e,t,r,n,a){var i=a&&a.biff||8,o={s:{c:0,r:0}},l=[],d,c,u,x=0,b=0,g,k="";if(!e[0]||!e[0][0])return"";for(var y=-1,N="",S=0,O=e[0].length;S<O;++S){var A=e[0][S];switch(A[0]){case"PtgUminus":l.push("-"+l.pop());break;case"PtgUplus":l.push("+"+l.pop());break;case"PtgPercent":l.push(l.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(d=l.pop(),c=l.pop(),y>=0){switch(e[0][y][1][0]){case 0:N=mi(" ",e[0][y][1][1]);break;case 1:N=mi("\r",e[0][y][1][1]);break;default:if(N="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][y][1][0])}c=c+N,y=-1}l.push(c+b_e[A[0]]+d);break;case"PtgIsect":d=l.pop(),c=l.pop(),l.push(c+" "+d);break;case"PtgUnion":d=l.pop(),c=l.pop(),l.push(c+","+d);break;case"PtgRange":d=l.pop(),c=l.pop(),l.push(c+":"+d);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":u=Kg(A[1][1],o,a),l.push(Xg(u,i));break;case"PtgRefN":u=r?Kg(A[1][1],r,a):A[1][1],l.push(Xg(u,i));break;case"PtgRef3d":x=A[1][1],u=Kg(A[1][2],o,a),k=$M(n,x,a),l.push(k+"!"+Xg(u,i));break;case"PtgFunc":case"PtgFuncVar":var P=A[1][0],q=A[1][1];P||(P=0),P&=127;var W=P==0?[]:l.slice(-P);l.length-=P,q==="User"&&(q=W.shift()),l.push(q+"("+W.join(",")+")");break;case"PtgBool":l.push(A[1]?"TRUE":"FALSE");break;case"PtgInt":l.push(A[1]);break;case"PtgNum":l.push(String(A[1]));break;case"PtgStr":l.push('"'+A[1].replace(/"/g,'""')+'"');break;case"PtgErr":l.push(A[1]);break;case"PtgAreaN":g=vM(A[1][1],r?{s:r}:o,a),l.push(u_(g,a));break;case"PtgArea":g=vM(A[1][1],o,a),l.push(u_(g,a));break;case"PtgArea3d":x=A[1][1],g=A[1][2],k=$M(n,x,a),l.push(k+"!"+u_(g,a));break;case"PtgAttrSum":l.push("SUM("+l.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":b=A[1][2];var R=(n.names||[])[b-1]||(n[0]||[])[b],U=R?R.Name:"SH33TJSNAME"+String(b);U&&U.slice(0,6)=="_xlfn."&&!a.xlfn&&(U=U.slice(6)),l.push(U);break;case"PtgNameX":var L=A[1][1];b=A[1][2];var Q;if(a.biff<=5)L<0&&(L=-L),n[L]&&(Q=n[L][b]);else{var H="";if(((n[L]||[])[0]||[])[0]==14849||(((n[L]||[])[0]||[])[0]==1025?n[L][b]&&n[L][b].itab>0&&(H=n.SheetNames[n[L][b].itab-1]+"!"):H=n.SheetNames[b-1]+"!"),n[L]&&n[L][b])H+=n[L][b].Name;else if(n[0]&&n[0][b])H+=n[0][b].Name;else{var G=(SG(n,L,a)||"").split(";;");G[b-1]?H=G[b-1]:H+="SH33TJSERRX"}l.push(H);break}Q||(Q={Name:"SH33TJSERRY"}),l.push(Q.Name);break;case"PtgParen":var Z="(",te=")";if(y>=0){switch(N="",e[0][y][1][0]){case 2:Z=mi(" ",e[0][y][1][1])+Z;break;case 3:Z=mi("\r",e[0][y][1][1])+Z;break;case 4:te=mi(" ",e[0][y][1][1])+te;break;case 5:te=mi("\r",e[0][y][1][1])+te;break;default:if(a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][y][1][0])}y=-1}l.push(Z+l.pop()+te);break;case"PtgRefErr":l.push("#REF!");break;case"PtgRefErr3d":l.push("#REF!");break;case"PtgExp":u={c:A[1][1],r:A[1][0]};var se={c:r.c,r:r.r};if(n.sharedf[Tn(u)]){var ue=n.sharedf[Tn(u)];l.push(il(ue,o,se,n,a))}else{var ae=!1;for(d=0;d!=n.arrayf.length;++d)if(c=n.arrayf[d],!(u.c<c[0].s.c||u.c>c[0].e.c)&&!(u.r<c[0].s.r||u.r>c[0].e.r)){l.push(il(c[1],o,se,n,a)),ae=!0;break}ae||l.push(A[1])}break;case"PtgArray":l.push("{"+g_e(A[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":y=S;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":l.push("");break;case"PtgAreaErr":l.push("#REF!");break;case"PtgAreaErr3d":l.push("#REF!");break;case"PtgList":l.push("Table"+A[1].idx+"[#"+A[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(A));default:throw new Error("Unrecognized Formula Token: "+String(A))}var pe=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(a.biff!=3&&y>=0&&pe.indexOf(e[0][S][0])==-1){A=e[0][y];var ve=!0;switch(A[1][0]){case 4:ve=!1;case 0:N=mi(" ",A[1][1]);break;case 5:ve=!1;case 1:N=mi("\r",A[1][1]);break;default:if(N="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+A[1][0])}l.push((ve?N:"")+l.pop()+(ve?"":N)),y=-1}}if(l.length>1&&a.WTF)throw new Error("bad formula stack");return l[0]}function y_e(e,t,r){var n=e.l+t,a=r.biff==2?1:2,i,o=e.read_shift(a);if(o==65535)return[[],hl(e,t-2)];var l=Cv(e,o,r);return t!==o+a&&(i=jv(e,t-o-a,l,r)),e.l=n,[l,i]}function w_e(e,t,r){var n=e.l+t,a=r.biff==2?1:2,i,o=e.read_shift(a);if(o==65535)return[[],hl(e,t-2)];var l=Cv(e,o,r);return t!==o+a&&(i=jv(e,t-o-a,l,r)),e.l=n,[l,i]}function k_e(e,t,r,n){var a=e.l+t,i=Cv(e,n,r),o;return a!==e.l&&(o=jv(e,a-e.l,i,r)),[i,o]}function N_e(e,t,r){var n=e.l+t,a,i=e.read_shift(2),o=Cv(e,i,r);return i==65535?[[],hl(e,t-2)]:(t!==i+2&&(a=jv(e,n-i-2,o,r)),[o,a])}function __e(e){var t;if(F0(e,e.l+6)!==65535)return[cl(e),"n"];switch(e[e.l]){case 0:return e.l+=8,["String","s"];case 1:return t=e[e.l+2]===1,e.l+=8,[t,"b"];case 2:return t=e[e.l+2],e.l+=8,[t,"e"];case 3:return e.l+=8,["","s"]}return[]}function S_e(e){if(e==null){var t=Ht(8);return t.write_shift(1,3),t.write_shift(1,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,65535),t}else if(typeof e=="number")return Jm(e);return Jm(0)}function p_(e,t,r){var n=e.l+t,a=e0(e);r.biff==2&&++e.l;var i=__e(e),o=e.read_shift(1);r.biff!=2&&(e.read_shift(1),r.biff>=5&&e.read_shift(4));var l=w_e(e,n-e.l,r);return{cell:a,val:i[0],formula:l,shared:o>>3&1,tt:i[1]}}function j_e(e,t,r,n,a){var i=tx(t,r,a),o=S_e(e.v),l=Ht(6),d=33;l.write_shift(2,d),l.write_shift(4,0);for(var c=Ht(e.bf.length),u=0;u<e.bf.length;++u)c[u]=e.bf[u];var x=jo([i,o,l,c]);return x}function H5(e,t,r){var n=e.read_shift(4),a=Cv(e,n,r),i=e.read_shift(4),o=i>0?jv(e,i,a,r):null;return[a,o]}var C_e=H5,$5=H5,A_e=H5,E_e=H5,T_e={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},jG={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},O_e={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function VM(e){return e.slice(0,3)=="of:"&&(e=e.slice(3)),e.charCodeAt(0)==61&&(e=e.slice(1),e.charCodeAt(0)==61&&(e=e.slice(1))),e=e.replace(/COM\.MICROSOFT\./g,""),e=e.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(t,r){return r.replace(/\./g,"")}),e=e.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),e.replace(/[;~]/g,",").replace(/\|/g,";")}function P_e(e){var t="of:="+e.replace(NE,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return t.replace(/;/g,"|").replace(/,/g,";")}function g_(e){var t=e.split(":"),r=t[0].split(".")[0];return[r,t[0].split(".")[1]+(t.length>1?":"+(t[1].split(".")[1]||t[1].split(".")[0]):"")]}function I_e(e){return e.replace(/\./,"!")}var Qg={},P1={},Zg=typeof Map<"u";function jE(e,t,r){var n=0,a=e.length;if(r){if(Zg?r.has(t):Object.prototype.hasOwnProperty.call(r,t)){for(var i=Zg?r.get(t):r[t];n<i.length;++n)if(e[i[n]].t===t)return e.Count++,i[n]}}else for(;n<a;++n)if(e[n].t===t)return e.Count++,n;return e[a]={t},e.Count++,e.Unique++,r&&(Zg?(r.has(t)||r.set(t,[]),r.get(t).push(a)):(Object.prototype.hasOwnProperty.call(r,t)||(r[t]=[]),r[t].push(a))),a}function V5(e,t){var r={min:e+1,max:e+1},n=-1;return t.MDW&&(ll=t.MDW),t.width!=null?r.customWidth=1:t.wpx!=null?n=Mb(t.wpx):t.wch!=null&&(n=t.wch),n>-1?(r.width=Ck(n),r.customWidth=1):t.width!=null&&(r.width=t.width),t.hidden&&(r.hidden=!0),t.level!=null&&(r.outlineLevel=r.level=t.level),r}function Om(e,t){if(e){var r=[.7,.7,.75,.75,.3,.3];t=="xlml"&&(r=[1,1,1,1,.5,.5]),e.left==null&&(e.left=r[0]),e.right==null&&(e.right=r[1]),e.top==null&&(e.top=r[2]),e.bottom==null&&(e.bottom=r[3]),e.header==null&&(e.header=r[4]),e.footer==null&&(e.footer=r[5])}}function Of(e,t,r){var n=r.revssf[t.z!=null?t.z:"General"],a=60,i=e.length;if(n==null&&r.ssf){for(;a<392;++a)if(r.ssf[a]==null){X0(t.z,a),r.ssf[a]=t.z,r.revssf[t.z]=n=a;break}}for(a=0;a!=i;++a)if(e[a].numFmtId===n)return a;return e[i]={numFmtId:n,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},i}function CG(e,t,r,n,a,i){try{n.cellNF&&(e.z=En[t])}catch(l){if(n.WTF)throw l}if(!(e.t==="z"&&!n.cellStyles)){if(e.t==="d"&&typeof e.v=="string"&&(e.v=Ds(e.v)),(!n||n.cellText!==!1)&&e.t!=="z")try{if(En[t]==null&&X0(Tye[t]||"General",t),e.t==="e")e.w=e.w||bh[e.v];else if(t===0)if(e.t==="n")(e.v|0)===e.v?e.w=e.v.toString(10):e.w=Ab(e.v);else if(e.t==="d"){var o=ao(e.v);(o|0)===o?e.w=o.toString(10):e.w=Ab(o)}else{if(e.v===void 0)return"";e.w=Qm(e.v,P1)}else e.t==="d"?e.w=Sd(t,ao(e.v),P1):e.w=Sd(t,e.v,P1)}catch(l){if(n.WTF)throw l}if(n.cellStyles&&r!=null)try{e.s=i.Fills[r],e.s.fgColor&&e.s.fgColor.theme&&!e.s.fgColor.rgb&&(e.s.fgColor.rgb=jk(a.themeElements.clrScheme[e.s.fgColor.theme].rgb,e.s.fgColor.tint||0),n.WTF&&(e.s.fgColor.raw_rgb=a.themeElements.clrScheme[e.s.fgColor.theme].rgb)),e.s.bgColor&&e.s.bgColor.theme&&(e.s.bgColor.rgb=jk(a.themeElements.clrScheme[e.s.bgColor.theme].rgb,e.s.bgColor.tint||0),n.WTF&&(e.s.bgColor.raw_rgb=a.themeElements.clrScheme[e.s.bgColor.theme].rgb))}catch(l){if(n.WTF&&i.Fills)throw l}}}function D_e(e,t,r){if(e&&e["!ref"]){var n=Ia(e["!ref"]);if(n.e.c<n.s.c||n.e.r<n.s.r)throw new Error("Bad range ("+r+"): "+e["!ref"])}}function M_e(e,t){var r=Ia(t);r.s.r<=r.e.r&&r.s.c<=r.e.c&&r.s.r>=0&&r.s.c>=0&&(e["!ref"]=Kn(r))}var L_e=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,R_e=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,F_e=/<(?:\w:)?hyperlink [^>]*>/mg,B_e=/"(\w*:\w*)"/,U_e=/<(?:\w:)?col\b[^>]*[\/]?>/g,z_e=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,q_e=/<(?:\w:)?pageMargins[^>]*\/>/g,AG=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,H_e=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,$_e=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function V_e(e,t,r,n,a,i,o){if(!e)return e;n||(n={"!id":{}});var l=t.dense?[]:{},d={s:{r:2e6,c:2e6},e:{r:0,c:0}},c="",u="",x=e.match(R_e);x?(c=e.slice(0,x.index),u=e.slice(x.index+x[0].length)):c=u=e;var b=c.match(AG);b?CE(b[0],l,a,r):(b=c.match(H_e))&&G_e(b[0],b[1]||"",l,a,r);var g=(c.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(g>0){var k=c.slice(g,g+50).match(B_e);k&&M_e(l,k[1])}var y=c.match($_e);y&&y[1]&&iSe(y[1],a);var N=[];if(t.cellStyles){var S=c.match(U_e);S&&tSe(N,S)}x&&cSe(x[1],l,t,d,i,o);var O=u.match(z_e);O&&(l["!autofilter"]=nSe(O[0]));var A=[],P=u.match(L_e);if(P)for(g=0;g!=P.length;++g)A[g]=Ia(P[g].slice(P[g].indexOf('"')+1));var q=u.match(F_e);q&&Z_e(l,q,n);var W=u.match(q_e);if(W&&(l["!margins"]=J_e(In(W[0]))),!l["!ref"]&&d.e.c>=d.s.c&&d.e.r>=d.s.r&&(l["!ref"]=Kn(d)),t.sheetRows>0&&l["!ref"]){var R=Ia(l["!ref"]);t.sheetRows<=+R.e.r&&(R.e.r=t.sheetRows-1,R.e.r>d.e.r&&(R.e.r=d.e.r),R.e.r<R.s.r&&(R.s.r=R.e.r),R.e.c>d.e.c&&(R.e.c=d.e.c),R.e.c<R.s.c&&(R.s.c=R.e.c),l["!fullref"]=l["!ref"],l["!ref"]=Kn(R))}return N.length>0&&(l["!cols"]=N),A.length>0&&(l["!merges"]=A),l}function W_e(e){if(e.length===0)return"";for(var t='<mergeCells count="'+e.length+'">',r=0;r!=e.length;++r)t+='<mergeCell ref="'+Kn(e[r])+'"/>';return t+"</mergeCells>"}function CE(e,t,r,n){var a=In(e);r.Sheets[n]||(r.Sheets[n]={}),a.codeName&&(r.Sheets[n].CodeName=Pa(ls(a.codeName)))}function G_e(e,t,r,n,a){CE(e.slice(0,e.indexOf(">")),r,n,a)}function K_e(e,t,r,n,a){var i=!1,o={},l=null;if(n.bookType!=="xlsx"&&t.vbaraw){var d=t.SheetNames[r];try{t.Workbook&&(d=t.Workbook.Sheets[r].CodeName||d)}catch{}i=!0,o.codeName=Hu(Ja(d))}if(e&&e["!outline"]){var c={summaryBelow:1,summaryRight:1};e["!outline"].above&&(c.summaryBelow=0),e["!outline"].left&&(c.summaryRight=0),l=(l||"")+kr("outlinePr",null,c)}!i&&!l||(a[a.length]=kr("sheetPr",l,o))}var X_e=["objects","scenarios","selectLockedCells","selectUnlockedCells"],Y_e=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function Q_e(e){var t={sheet:1};return X_e.forEach(function(r){e[r]!=null&&e[r]&&(t[r]="1")}),Y_e.forEach(function(r){e[r]!=null&&!e[r]&&(t[r]="0")}),e.password&&(t.password=yE(e.password).toString(16).toUpperCase()),kr("sheetProtection",null,t)}function Z_e(e,t,r){for(var n=Array.isArray(e),a=0;a!=t.length;++a){var i=In(ls(t[a]),!0);if(!i.ref)return;var o=((r||{})["!id"]||[])[i.id];o?(i.Target=o.Target,i.location&&(i.Target+="#"+Pa(i.location))):(i.Target="#"+Pa(i.location),o={Target:i.Target,TargetMode:"Internal"}),i.Rel=o,i.tooltip&&(i.Tooltip=i.tooltip,delete i.tooltip);for(var l=Ia(i.ref),d=l.s.r;d<=l.e.r;++d)for(var c=l.s.c;c<=l.e.c;++c){var u=Tn({c,r:d});n?(e[d]||(e[d]=[]),e[d][c]||(e[d][c]={t:"z",v:void 0}),e[d][c].l=i):(e[u]||(e[u]={t:"z",v:void 0}),e[u].l=i)}}}function J_e(e){var t={};return["left","right","top","bottom","header","footer"].forEach(function(r){e[r]&&(t[r]=parseFloat(e[r]))}),t}function eSe(e){return Om(e),kr("pageMargins",null,e)}function tSe(e,t){for(var r=!1,n=0;n!=t.length;++n){var a=In(t[n],!0);a.hidden&&(a.hidden=Os(a.hidden));var i=parseInt(a.min,10)-1,o=parseInt(a.max,10)-1;for(a.outlineLevel&&(a.level=+a.outlineLevel||0),delete a.min,delete a.max,a.width=+a.width,!r&&a.width&&(r=!0,wE(a.width)),yf(a);i<=o;)e[i++]=Ms(a)}}function rSe(e,t){for(var r=["<cols>"],n,a=0;a!=t.length;++a)(n=t[a])&&(r[r.length]=kr("col",null,V5(a,n)));return r[r.length]="</cols>",r.join("")}function nSe(e){var t={ref:(e.match(/ref="([^"]*)"/)||[])[1]};return t}function aSe(e,t,r,n){var a=typeof e.ref=="string"?e.ref:Kn(e.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var i=r.Workbook.Names,o=dc(a);o.s.r==o.e.r&&(o.e.r=dc(t["!ref"]).e.r,a=Kn(o));for(var l=0;l<i.length;++l){var d=i[l];if(d.Name=="_xlnm._FilterDatabase"&&d.Sheet==n){d.Ref="'"+r.SheetNames[n]+"'!"+a;break}}return l==i.length&&i.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+a}),kr("autoFilter",null,{ref:a})}var sSe=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function iSe(e,t){t.Views||(t.Views=[{}]),(e.match(sSe)||[]).forEach(function(r,n){var a=In(r);t.Views[n]||(t.Views[n]={}),+a.zoomScale&&(t.Views[n].zoom=+a.zoomScale),Os(a.rightToLeft)&&(t.Views[n].RTL=!0)})}function oSe(e,t,r,n){var a={workbookViewId:"0"};return(((n||{}).Workbook||{}).Views||[])[0]&&(a.rightToLeft=n.Workbook.Views[0].RTL?"1":"0"),kr("sheetViews",kr("sheetView",null,a),{})}function lSe(e,t,r,n){if(e.c&&r["!comments"].push([t,e.c]),e.v===void 0&&typeof e.f!="string"||e.t==="z"&&!e.f)return"";var a="",i=e.t,o=e.v;if(e.t!=="z")switch(e.t){case"b":a=e.v?"1":"0";break;case"n":a=""+e.v;break;case"e":a=bh[e.v];break;case"d":n&&n.cellDates?a=Ds(e.v,-1).toISOString():(e=Ms(e),e.t="n",a=""+(e.v=ao(Ds(e.v)))),typeof e.z>"u"&&(e.z=En[14]);break;default:a=e.v;break}var l=zo("v",Ja(a)),d={r:t},c=Of(n.cellXfs,e,n);switch(c!==0&&(d.s=c),e.t){case"n":break;case"d":d.t="d";break;case"b":d.t="b";break;case"e":d.t="e";break;case"z":break;default:if(e.v==null){delete e.t;break}if(e.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(n&&n.bookSST){l=zo("v",""+jE(n.Strings,e.v,n.revStrings)),d.t="s";break}d.t="str";break}if(e.t!=i&&(e.t=i,e.v=o),typeof e.f=="string"&&e.f){var u=e.F&&e.F.slice(0,t.length)==t?{t:"array",ref:e.F}:null;l=kr("f",Ja(e.f),u)+(e.v!=null?l:"")}return e.l&&r["!links"].push([t,e.l]),e.D&&(d.cm=1),kr("c",l,d)}var cSe=(function(){var e=/<(?:\w+:)?c[ \/>]/,t=/<\/(?:\w+:)?row>/,r=/r=["']([^"']*)["']/,n=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,a=/ref=["']([^"']*)["']/,i=Eb("v"),o=Eb("f");return function(d,c,u,x,b,g){for(var k=0,y="",N=[],S=[],O=0,A=0,P=0,q="",W,R,U=0,L=0,Q,H,G=0,Z=0,te=Array.isArray(g.CellXf),se,ue=[],ae=[],pe=Array.isArray(c),ve=[],Pe={},xe=!1,B=!!u.sheetStubs,re=d.split(t),J=0,ie=re.length;J!=ie;++J){y=re[J].trim();var Y=y.length;if(Y!==0){var _e=0;e:for(k=0;k<Y;++k)switch(y[k]){case">":if(y[k-1]!="/"){++k;break e}if(u&&u.cellStyles){if(R=In(y.slice(_e,k),!0),U=R.r!=null?parseInt(R.r,10):U+1,L=-1,u.sheetRows&&u.sheetRows<U)continue;Pe={},xe=!1,R.ht&&(xe=!0,Pe.hpt=parseFloat(R.ht),Pe.hpx=lp(Pe.hpt)),R.hidden=="1"&&(xe=!0,Pe.hidden=!0),R.outlineLevel!=null&&(xe=!0,Pe.level=+R.outlineLevel),xe&&(ve[U-1]=Pe)}break;case"<":_e=k;break}if(_e>=k)break;if(R=In(y.slice(_e,k),!0),U=R.r!=null?parseInt(R.r,10):U+1,L=-1,!(u.sheetRows&&u.sheetRows<U)){x.s.r>U-1&&(x.s.r=U-1),x.e.r<U-1&&(x.e.r=U-1),u&&u.cellStyles&&(Pe={},xe=!1,R.ht&&(xe=!0,Pe.hpt=parseFloat(R.ht),Pe.hpx=lp(Pe.hpt)),R.hidden=="1"&&(xe=!0,Pe.hidden=!0),R.outlineLevel!=null&&(xe=!0,Pe.level=+R.outlineLevel),xe&&(ve[U-1]=Pe)),N=y.slice(k).split(e);for(var me=0;me!=N.length&&N[me].trim().charAt(0)=="<";++me);for(N=N.slice(me),k=0;k!=N.length;++k)if(y=N[k].trim(),y.length!==0){if(S=y.match(r),O=k,A=0,P=0,y="<c "+(y.slice(0,1)=="<"?">":"")+y,S!=null&&S.length===2){for(O=0,q=S[1],A=0;A!=q.length&&!((P=q.charCodeAt(A)-64)<1||P>26);++A)O=26*O+P;--O,L=O}else++L;for(A=0;A!=y.length&&y.charCodeAt(A)!==62;++A);if(++A,R=In(y.slice(0,A),!0),R.r||(R.r=Tn({r:U-1,c:L})),q=y.slice(A),W={t:""},(S=q.match(i))!=null&&S[1]!==""&&(W.v=Pa(S[1])),u.cellFormula){if((S=q.match(o))!=null&&S[1]!==""){if(W.f=Pa(ls(S[1])).replace(/\r\n/g,`
`),u.xlfn||(W.f=zM(W.f)),S[0].indexOf('t="array"')>-1)W.F=(q.match(a)||[])[1],W.F.indexOf(":")>-1&&ue.push([Ia(W.F),W.F]);else if(S[0].indexOf('t="shared"')>-1){H=In(S[0]);var ne=Pa(ls(S[1]));u.xlfn||(ne=zM(ne)),ae[parseInt(H.si,10)]=[H,ne,R.r]}}else(S=q.match(/<f[^>]*\/>/))&&(H=In(S[0]),ae[H.si]&&(W.f=sNe(ae[H.si][1],ae[H.si][2],R.r)));var je=ei(R.r);for(A=0;A<ue.length;++A)je.r>=ue[A][0].s.r&&je.r<=ue[A][0].e.r&&je.c>=ue[A][0].s.c&&je.c<=ue[A][0].e.c&&(W.F=ue[A][1])}if(R.t==null&&W.v===void 0)if(W.f||W.F)W.v=0,W.t="n";else if(B)W.t="z";else continue;else W.t=R.t||"n";switch(x.s.c>L&&(x.s.c=L),x.e.c<L&&(x.e.c=L),W.t){case"n":if(W.v==""||W.v==null){if(!B)continue;W.t="z"}else W.v=parseFloat(W.v);break;case"s":if(typeof W.v>"u"){if(!B)continue;W.t="z"}else Q=Qg[parseInt(W.v,10)],W.v=Q.t,W.r=Q.r,u.cellHTML&&(W.h=Q.h);break;case"str":W.t="s",W.v=W.v!=null?ls(W.v):"",u.cellHTML&&(W.h=sE(W.v));break;case"inlineStr":S=q.match(n),W.t="s",S!=null&&(Q=vE(S[1]))?(W.v=Q.t,u.cellHTML&&(W.h=Q.h)):W.v="";break;case"b":W.v=Os(W.v);break;case"d":u.cellDates?W.v=Ds(W.v,1):(W.v=ao(Ds(W.v,1)),W.t="n");break;case"e":(!u||u.cellText!==!1)&&(W.w=W.v),W.v=TW[W.v];break}if(G=Z=0,se=null,te&&R.s!==void 0&&(se=g.CellXf[R.s],se!=null&&(se.numFmtId!=null&&(G=se.numFmtId),u.cellStyles&&se.fillId!=null&&(Z=se.fillId))),CG(W,G,Z,u,b,g),u.cellDates&&te&&W.t=="n"&&Ep(En[G])&&(W.t="d",W.v=z5(W.v)),R.cm&&u.xlmeta){var De=(u.xlmeta.Cell||[])[+R.cm-1];De&&De.type=="XLDAPR"&&(W.D=!0)}if(pe){var ce=ei(R.r);c[ce.r]||(c[ce.r]=[]),c[ce.r][ce.c]=W}else c[R.r]=W}}}}ve.length>0&&(c["!rows"]=ve)}})();function dSe(e,t,r,n){var a=[],i=[],o=Ia(e["!ref"]),l="",d,c="",u=[],x=0,b=0,g=e["!rows"],k=Array.isArray(e),y={r:c},N,S=-1;for(b=o.s.c;b<=o.e.c;++b)u[b]=Js(b);for(x=o.s.r;x<=o.e.r;++x){for(i=[],c=Ii(x),b=o.s.c;b<=o.e.c;++b){d=u[b]+c;var O=k?(e[x]||[])[b]:e[d];O!==void 0&&(l=lSe(O,d,e,t))!=null&&i.push(l)}(i.length>0||g&&g[x])&&(y={r:c},g&&g[x]&&(N=g[x],N.hidden&&(y.hidden=1),S=-1,N.hpx?S=Lb(N.hpx):N.hpt&&(S=N.hpt),S>-1&&(y.ht=S,y.customHeight=1),N.level&&(y.outlineLevel=N.level)),a[a.length]=kr("row",i.join(""),y))}if(g)for(;x<g.length;++x)g&&g[x]&&(y={r:x+1},N=g[x],N.hidden&&(y.hidden=1),S=-1,N.hpx?S=Lb(N.hpx):N.hpt&&(S=N.hpt),S>-1&&(y.ht=S,y.customHeight=1),N.level&&(y.outlineLevel=N.level),a[a.length]=kr("row","",y));return a.join("")}function EG(e,t,r,n){var a=[Di,kr("worksheet",null,{xmlns:dx[0],"xmlns:r":no.r})],i=r.SheetNames[e],o=0,l="",d=r.Sheets[i];d==null&&(d={});var c=d["!ref"]||"A1",u=Ia(c);if(u.e.c>16383||u.e.r>1048575){if(t.WTF)throw new Error("Range "+c+" exceeds format limit A1:XFD1048576");u.e.c=Math.min(u.e.c,16383),u.e.r=Math.min(u.e.c,1048575),c=Kn(u)}n||(n={}),d["!comments"]=[];var x=[];K_e(d,r,e,t,a),a[a.length]=kr("dimension",null,{ref:c}),a[a.length]=oSe(d,t,e,r),t.sheetFormat&&(a[a.length]=kr("sheetFormatPr",null,{defaultRowHeight:t.sheetFormat.defaultRowHeight||"16",baseColWidth:t.sheetFormat.baseColWidth||"10",outlineLevelRow:t.sheetFormat.outlineLevelRow||"7"})),d["!cols"]!=null&&d["!cols"].length>0&&(a[a.length]=rSe(d,d["!cols"])),a[o=a.length]="<sheetData/>",d["!links"]=[],d["!ref"]!=null&&(l=dSe(d,t),l.length>0&&(a[a.length]=l)),a.length>o+1&&(a[a.length]="</sheetData>",a[o]=a[o].replace("/>",">")),d["!protect"]&&(a[a.length]=Q_e(d["!protect"])),d["!autofilter"]!=null&&(a[a.length]=aSe(d["!autofilter"],d,r,e)),d["!merges"]!=null&&d["!merges"].length>0&&(a[a.length]=W_e(d["!merges"]));var b=-1,g,k=-1;return d["!links"].length>0&&(a[a.length]="<hyperlinks>",d["!links"].forEach(function(y){y[1].Target&&(g={ref:y[0]},y[1].Target.charAt(0)!="#"&&(k=Ya(n,-1,Ja(y[1].Target).replace(/#.*$/,""),ca.HLINK),g["r:id"]="rId"+k),(b=y[1].Target.indexOf("#"))>-1&&(g.location=Ja(y[1].Target.slice(b+1))),y[1].Tooltip&&(g.tooltip=Ja(y[1].Tooltip)),a[a.length]=kr("hyperlink",null,g))}),a[a.length]="</hyperlinks>"),delete d["!links"],d["!margins"]!=null&&(a[a.length]=eSe(d["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&(a[a.length]=zo("ignoredErrors",kr("ignoredError",null,{numberStoredAsText:1,sqref:c}))),x.length>0&&(k=Ya(n,-1,"../drawings/drawing"+(e+1)+".xml",ca.DRAW),a[a.length]=kr("drawing",null,{"r:id":"rId"+k}),d["!drawing"]=x),d["!comments"].length>0&&(k=Ya(n,-1,"../drawings/vmlDrawing"+(e+1)+".vml",ca.VML),a[a.length]=kr("legacyDrawing",null,{"r:id":"rId"+k}),d["!legacy"]=k),a.length>1&&(a[a.length]="</worksheet>",a[1]=a[1].replace("/>",">")),a.join("")}function uSe(e,t){var r={},n=e.l+t;r.r=e.read_shift(4),e.l+=4;var a=e.read_shift(2);e.l+=1;var i=e.read_shift(1);return e.l=n,i&7&&(r.level=i&7),i&16&&(r.hidden=!0),i&32&&(r.hpt=a/20),r}function hSe(e,t,r){var n=Ht(145),a=(r["!rows"]||[])[e]||{};n.write_shift(4,e),n.write_shift(4,0);var i=320;a.hpx?i=Lb(a.hpx)*20:a.hpt&&(i=a.hpt*20),n.write_shift(2,i),n.write_shift(1,0);var o=0;a.level&&(o|=a.level),a.hidden&&(o|=16),(a.hpx||a.hpt)&&(o|=32),n.write_shift(1,o),n.write_shift(1,0);var l=0,d=n.l;n.l+=4;for(var c={r:e,c:0},u=0;u<16;++u)if(!(t.s.c>u+1<<10||t.e.c<u<<10)){for(var x=-1,b=-1,g=u<<10;g<u+1<<10;++g){c.c=g;var k=Array.isArray(r)?(r[c.r]||[])[c.c]:r[Tn(c)];k&&(x<0&&(x=g),b=g)}x<0||(++l,n.write_shift(4,x),n.write_shift(4,b))}var y=n.l;return n.l=d,n.write_shift(4,l),n.l=y,n.length>n.l?n.slice(0,n.l):n}function fSe(e,t,r,n){var a=hSe(n,r,t);(a.length>17||(t["!rows"]||[])[n])&&dr(e,0,a)}var mSe=mx,xSe=Pp;function pSe(){}function gSe(e,t){var r={},n=e[e.l];return++e.l,r.above=!(n&64),r.left=!(n&128),e.l+=18,r.name=ywe(e),r}function bSe(e,t,r){r==null&&(r=Ht(84+4*e.length));var n=192;t&&(t.above&&(n&=-65),t.left&&(n&=-129)),r.write_shift(1,n);for(var a=1;a<3;++a)r.write_shift(1,0);return Nk({auto:1},r),r.write_shift(-4,-1),r.write_shift(-4,-1),SW(e,r),r.slice(0,r.l)}function vSe(e){var t=Ed(e);return[t]}function ySe(e,t,r){return r==null&&(r=Ht(8)),ux(t,r)}function wSe(e){var t=hx(e);return[t]}function kSe(e,t,r){return r==null&&(r=Ht(4)),fx(t,r)}function NSe(e){var t=Ed(e),r=e.read_shift(1);return[t,r,"b"]}function _Se(e,t,r){return r==null&&(r=Ht(9)),ux(t,r),r.write_shift(1,e.v?1:0),r}function SSe(e){var t=hx(e),r=e.read_shift(1);return[t,r,"b"]}function jSe(e,t,r){return r==null&&(r=Ht(5)),fx(t,r),r.write_shift(1,e.v?1:0),r}function CSe(e){var t=Ed(e),r=e.read_shift(1);return[t,r,"e"]}function ASe(e,t,r){return r==null&&(r=Ht(9)),ux(t,r),r.write_shift(1,e.v),r}function ESe(e){var t=hx(e),r=e.read_shift(1);return[t,r,"e"]}function TSe(e,t,r){return r==null&&(r=Ht(8)),fx(t,r),r.write_shift(1,e.v),r.write_shift(2,0),r.write_shift(1,0),r}function OSe(e){var t=Ed(e),r=e.read_shift(4);return[t,r,"s"]}function PSe(e,t,r){return r==null&&(r=Ht(12)),ux(t,r),r.write_shift(4,t.v),r}function ISe(e){var t=hx(e),r=e.read_shift(4);return[t,r,"s"]}function DSe(e,t,r){return r==null&&(r=Ht(8)),fx(t,r),r.write_shift(4,t.v),r}function MSe(e){var t=Ed(e),r=cl(e);return[t,r,"n"]}function LSe(e,t,r){return r==null&&(r=Ht(16)),ux(t,r),Jm(e.v,r),r}function TG(e){var t=hx(e),r=cl(e);return[t,r,"n"]}function RSe(e,t,r){return r==null&&(r=Ht(12)),fx(t,r),Jm(e.v,r),r}function FSe(e){var t=Ed(e),r=mE(e);return[t,r,"n"]}function BSe(e,t,r){return r==null&&(r=Ht(12)),ux(t,r),jW(e.v,r),r}function USe(e){var t=hx(e),r=mE(e);return[t,r,"n"]}function zSe(e,t,r){return r==null&&(r=Ht(8)),fx(t,r),jW(e.v,r),r}function qSe(e){var t=Ed(e),r=uE(e);return[t,r,"is"]}function HSe(e){var t=Ed(e),r=ul(e);return[t,r,"str"]}function $Se(e,t,r){return r==null&&(r=Ht(12+4*e.v.length)),ux(t,r),Ao(e.v,r),r.length>r.l?r.slice(0,r.l):r}function VSe(e){var t=hx(e),r=ul(e);return[t,r,"str"]}function WSe(e,t,r){return r==null&&(r=Ht(8+4*e.v.length)),fx(t,r),Ao(e.v,r),r.length>r.l?r.slice(0,r.l):r}function GSe(e,t,r){var n=e.l+t,a=Ed(e);a.r=r["!row"];var i=e.read_shift(1),o=[a,i,"b"];if(r.cellFormula){e.l+=2;var l=$5(e,n-e.l,r);o[3]=il(l,null,a,r.supbooks,r)}else e.l=n;return o}function KSe(e,t,r){var n=e.l+t,a=Ed(e);a.r=r["!row"];var i=e.read_shift(1),o=[a,i,"e"];if(r.cellFormula){e.l+=2;var l=$5(e,n-e.l,r);o[3]=il(l,null,a,r.supbooks,r)}else e.l=n;return o}function XSe(e,t,r){var n=e.l+t,a=Ed(e);a.r=r["!row"];var i=cl(e),o=[a,i,"n"];if(r.cellFormula){e.l+=2;var l=$5(e,n-e.l,r);o[3]=il(l,null,a,r.supbooks,r)}else e.l=n;return o}function YSe(e,t,r){var n=e.l+t,a=Ed(e);a.r=r["!row"];var i=ul(e),o=[a,i,"str"];if(r.cellFormula){e.l+=2;var l=$5(e,n-e.l,r);o[3]=il(l,null,a,r.supbooks,r)}else e.l=n;return o}var QSe=mx,ZSe=Pp;function JSe(e,t){return t==null&&(t=Ht(4)),t.write_shift(4,e),t}function eje(e,t){var r=e.l+t,n=mx(e),a=hE(e),i=ul(e),o=ul(e),l=ul(e);e.l=r;var d={rfx:n,relId:a,loc:i,display:l};return o&&(d.Tooltip=o),d}function tje(e,t){var r=Ht(50+4*(e[1].Target.length+(e[1].Tooltip||"").length));Pp({s:ei(e[0]),e:ei(e[0])},r),fE("rId"+t,r);var n=e[1].Target.indexOf("#"),a=n==-1?"":e[1].Target.slice(n+1);return Ao(a||"",r),Ao(e[1].Tooltip||"",r),Ao("",r),r.slice(0,r.l)}function rje(){}function nje(e,t,r){var n=e.l+t,a=CW(e),i=e.read_shift(1),o=[a];if(o[2]=i,r.cellFormula){var l=C_e(e,n-e.l,r);o[1]=l}else e.l=n;return o}function aje(e,t,r){var n=e.l+t,a=mx(e),i=[a];if(r.cellFormula){var o=E_e(e,n-e.l,r);i[1]=o,e.l=n}else e.l=n;return i}function sje(e,t,r){r==null&&(r=Ht(18));var n=V5(e,t);r.write_shift(-4,e),r.write_shift(-4,e),r.write_shift(4,(n.width||10)*256),r.write_shift(4,0);var a=0;return t.hidden&&(a|=1),typeof n.width=="number"&&(a|=2),t.level&&(a|=t.level<<8),r.write_shift(2,a),r}var OG=["left","right","top","bottom","header","footer"];function ije(e){var t={};return OG.forEach(function(r){t[r]=cl(e)}),t}function oje(e,t){return t==null&&(t=Ht(48)),Om(e),OG.forEach(function(r){Jm(e[r],t)}),t}function lje(e){var t=e.read_shift(2);return e.l+=28,{RTL:t&32}}function cje(e,t,r){r==null&&(r=Ht(30));var n=924;return(((t||{}).Views||[])[0]||{}).RTL&&(n|=32),r.write_shift(2,n),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(2,0),r.write_shift(2,100),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(4,0),r}function dje(e){var t=Ht(24);return t.write_shift(4,4),t.write_shift(4,1),Pp(e,t),t}function uje(e,t){return t==null&&(t=Ht(66)),t.write_shift(2,e.password?yE(e.password):0),t.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(r){r[1]?t.write_shift(4,e[r[0]]!=null&&!e[r[0]]?1:0):t.write_shift(4,e[r[0]]!=null&&e[r[0]]?0:1)}),t}function hje(){}function fje(){}function mje(e,t,r,n,a,i,o){if(!e)return e;var l=t||{};n||(n={"!id":{}});var d=l.dense?[]:{},c,u={s:{r:2e6,c:2e6},e:{r:0,c:0}},x=!1,b=!1,g,k,y,N,S,O,A,P,q,W=[];l.biff=12,l["!row"]=0;var R=0,U=!1,L=[],Q={},H=l.supbooks||a.supbooks||[[]];if(H.sharedf=Q,H.arrayf=L,H.SheetNames=a.SheetNames||a.Sheets.map(function(pe){return pe.name}),!l.supbooks&&(l.supbooks=H,a.Names))for(var G=0;G<a.Names.length;++G)H[0][G+1]=a.Names[G];var Z=[],te=[],se=!1;Rb[16]={n:"BrtShortReal",f:TG};var ue;if(gh(e,function(ve,Pe,xe){if(!b)switch(xe){case 148:c=ve;break;case 0:g=ve,l.sheetRows&&l.sheetRows<=g.r&&(b=!0),P=Ii(N=g.r),l["!row"]=g.r,(ve.hidden||ve.hpt||ve.level!=null)&&(ve.hpt&&(ve.hpx=lp(ve.hpt)),te[ve.r]=ve);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(k={t:ve[2]},ve[2]){case"n":k.v=ve[1];break;case"s":A=Qg[ve[1]],k.v=A.t,k.r=A.r;break;case"b":k.v=!!ve[1];break;case"e":k.v=ve[1],l.cellText!==!1&&(k.w=bh[k.v]);break;case"str":k.t="s",k.v=ve[1];break;case"is":k.t="s",k.v=ve[1].t;break}if((y=o.CellXf[ve[0].iStyleRef])&&CG(k,y.numFmtId,null,l,i,o),S=ve[0].c==-1?S+1:ve[0].c,l.dense?(d[N]||(d[N]=[]),d[N][S]=k):d[Js(S)+P]=k,l.cellFormula){for(U=!1,R=0;R<L.length;++R){var B=L[R];g.r>=B[0].s.r&&g.r<=B[0].e.r&&S>=B[0].s.c&&S<=B[0].e.c&&(k.F=Kn(B[0]),U=!0)}!U&&ve.length>3&&(k.f=ve[3])}if(u.s.r>g.r&&(u.s.r=g.r),u.s.c>S&&(u.s.c=S),u.e.r<g.r&&(u.e.r=g.r),u.e.c<S&&(u.e.c=S),l.cellDates&&y&&k.t=="n"&&Ep(En[y.numFmtId])){var re=hm(k.v);re&&(k.t="d",k.v=new Date(re.y,re.m-1,re.d,re.H,re.M,re.S,re.u))}ue&&(ue.type=="XLDAPR"&&(k.D=!0),ue=void 0);break;case 1:case 12:if(!l.sheetStubs||x)break;k={t:"z",v:void 0},S=ve[0].c==-1?S+1:ve[0].c,l.dense?(d[N]||(d[N]=[]),d[N][S]=k):d[Js(S)+P]=k,u.s.r>g.r&&(u.s.r=g.r),u.s.c>S&&(u.s.c=S),u.e.r<g.r&&(u.e.r=g.r),u.e.c<S&&(u.e.c=S),ue&&(ue.type=="XLDAPR"&&(k.D=!0),ue=void 0);break;case 176:W.push(ve);break;case 49:ue=((l.xlmeta||{}).Cell||[])[ve-1];break;case 494:var J=n["!id"][ve.relId];for(J?(ve.Target=J.Target,ve.loc&&(ve.Target+="#"+ve.loc),ve.Rel=J):ve.relId==""&&(ve.Target="#"+ve.loc),N=ve.rfx.s.r;N<=ve.rfx.e.r;++N)for(S=ve.rfx.s.c;S<=ve.rfx.e.c;++S)l.dense?(d[N]||(d[N]=[]),d[N][S]||(d[N][S]={t:"z",v:void 0}),d[N][S].l=ve):(O=Tn({c:S,r:N}),d[O]||(d[O]={t:"z",v:void 0}),d[O].l=ve);break;case 426:if(!l.cellFormula)break;L.push(ve),q=l.dense?d[N][S]:d[Js(S)+P],q.f=il(ve[1],u,{r:g.r,c:S},H,l),q.F=Kn(ve[0]);break;case 427:if(!l.cellFormula)break;Q[Tn(ve[0].s)]=ve[1],q=l.dense?d[N][S]:d[Js(S)+P],q.f=il(ve[1],u,{r:g.r,c:S},H,l);break;case 60:if(!l.cellStyles)break;for(;ve.e>=ve.s;)Z[ve.e--]={width:ve.w/256,hidden:!!(ve.flags&1),level:ve.level},se||(se=!0,wE(ve.w/256)),yf(Z[ve.e+1]);break;case 161:d["!autofilter"]={ref:Kn(ve)};break;case 476:d["!margins"]=ve;break;case 147:a.Sheets[r]||(a.Sheets[r]={}),ve.name&&(a.Sheets[r].CodeName=ve.name),(ve.above||ve.left)&&(d["!outline"]={above:ve.above,left:ve.left});break;case 137:a.Views||(a.Views=[{}]),a.Views[0]||(a.Views[0]={}),ve.RTL&&(a.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:x=!0;break;case 36:x=!1;break;case 37:x=!0;break;case 38:x=!1;break;default:if(!Pe.T){if(!x||l.WTF)throw new Error("Unexpected record 0x"+xe.toString(16))}}},l),delete l.supbooks,delete l["!row"],!d["!ref"]&&(u.s.r<2e6||c&&(c.e.r>0||c.e.c>0||c.s.r>0||c.s.c>0))&&(d["!ref"]=Kn(c||u)),l.sheetRows&&d["!ref"]){var ae=Ia(d["!ref"]);l.sheetRows<=+ae.e.r&&(ae.e.r=l.sheetRows-1,ae.e.r>u.e.r&&(ae.e.r=u.e.r),ae.e.r<ae.s.r&&(ae.s.r=ae.e.r),ae.e.c>u.e.c&&(ae.e.c=u.e.c),ae.e.c<ae.s.c&&(ae.s.c=ae.e.c),d["!fullref"]=d["!ref"],d["!ref"]=Kn(ae))}return W.length>0&&(d["!merges"]=W),Z.length>0&&(d["!cols"]=Z),te.length>0&&(d["!rows"]=te),d}function xje(e,t,r,n,a,i,o){if(t.v===void 0)return!1;var l="";switch(t.t){case"b":l=t.v?"1":"0";break;case"d":t=Ms(t),t.z=t.z||En[14],t.v=ao(Ds(t.v)),t.t="n";break;case"n":case"e":l=""+t.v;break;default:l=t.v;break}var d={r,c:n};switch(d.s=Of(a.cellXfs,t,a),t.l&&i["!links"].push([Tn(d),t.l]),t.c&&i["!comments"].push([Tn(d),t.c]),t.t){case"s":case"str":return a.bookSST?(l=jE(a.Strings,t.v,a.revStrings),d.t="s",d.v=l,o?dr(e,18,DSe(t,d)):dr(e,7,PSe(t,d))):(d.t="str",o?dr(e,17,WSe(t,d)):dr(e,6,$Se(t,d))),!0;case"n":return t.v==(t.v|0)&&t.v>-1e3&&t.v<1e3?o?dr(e,13,zSe(t,d)):dr(e,2,BSe(t,d)):o?dr(e,16,RSe(t,d)):dr(e,5,LSe(t,d)),!0;case"b":return d.t="b",o?dr(e,15,jSe(t,d)):dr(e,4,_Se(t,d)),!0;case"e":return d.t="e",o?dr(e,14,TSe(t,d)):dr(e,3,ASe(t,d)),!0}return o?dr(e,12,kSe(t,d)):dr(e,1,ySe(t,d)),!0}function pje(e,t,r,n){var a=Ia(t["!ref"]||"A1"),i,o="",l=[];dr(e,145);var d=Array.isArray(t),c=a.e.r;t["!rows"]&&(c=Math.max(a.e.r,t["!rows"].length-1));for(var u=a.s.r;u<=c;++u){o=Ii(u),fSe(e,t,a,u);var x=!1;if(u<=a.e.r)for(var b=a.s.c;b<=a.e.c;++b){u===a.s.r&&(l[b]=Js(b)),i=l[b]+o;var g=d?(t[u]||[])[b]:t[i];if(!g){x=!1;continue}x=xje(e,g,u,b,n,t,x)}}dr(e,146)}function gje(e,t){!t||!t["!merges"]||(dr(e,177,JSe(t["!merges"].length)),t["!merges"].forEach(function(r){dr(e,176,ZSe(r))}),dr(e,178))}function bje(e,t){!t||!t["!cols"]||(dr(e,390),t["!cols"].forEach(function(r,n){r&&dr(e,60,sje(n,r))}),dr(e,391))}function vje(e,t){!t||!t["!ref"]||(dr(e,648),dr(e,649,dje(Ia(t["!ref"]))),dr(e,650))}function yje(e,t,r){t["!links"].forEach(function(n){if(n[1].Target){var a=Ya(r,-1,n[1].Target.replace(/#.*$/,""),ca.HLINK);dr(e,494,tje(n,a))}}),delete t["!links"]}function wje(e,t,r,n){if(t["!comments"].length>0){var a=Ya(n,-1,"../drawings/vmlDrawing"+(r+1)+".vml",ca.VML);dr(e,551,fE("rId"+a)),t["!legacy"]=a}}function kje(e,t,r,n){if(t["!autofilter"]){var a=t["!autofilter"],i=typeof a.ref=="string"?a.ref:Kn(a.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var o=r.Workbook.Names,l=dc(i);l.s.r==l.e.r&&(l.e.r=dc(t["!ref"]).e.r,i=Kn(l));for(var d=0;d<o.length;++d){var c=o[d];if(c.Name=="_xlnm._FilterDatabase"&&c.Sheet==n){c.Ref="'"+r.SheetNames[n]+"'!"+i;break}}d==o.length&&o.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+i}),dr(e,161,Pp(Ia(i))),dr(e,162)}}function Nje(e,t,r){dr(e,133),dr(e,137,cje(t,r)),dr(e,138),dr(e,134)}function _je(e,t){t["!protect"]&&dr(e,535,uje(t["!protect"]))}function Sje(e,t,r,n){var a=cc(),i=r.SheetNames[e],o=r.Sheets[i]||{},l=i;try{r&&r.Workbook&&(l=r.Workbook.Sheets[e].CodeName||l)}catch{}var d=Ia(o["!ref"]||"A1");if(d.e.c>16383||d.e.r>1048575){if(t.WTF)throw new Error("Range "+(o["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");d.e.c=Math.min(d.e.c,16383),d.e.r=Math.min(d.e.c,1048575)}return o["!links"]=[],o["!comments"]=[],dr(a,129),(r.vbaraw||o["!outline"])&&dr(a,147,bSe(l,o["!outline"])),dr(a,148,xSe(d)),Nje(a,o,r.Workbook),bje(a,o),pje(a,o,e,t),_je(a,o),kje(a,o,r,e),gje(a,o),yje(a,o,n),o["!margins"]&&dr(a,476,oje(o["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&vje(a,o),wje(a,o,e,n),dr(a,130),a.end()}function jje(e){var t=[],r=e.match(/^<c:numCache>/),n;(e.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(i){var o=i.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);o&&(t[+o[1]]=r?+o[2]:o[2])});var a=Pa((e.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(e.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(i){n=i.replace(/<.*?>/g,"")}),[t,a,n]}function Cje(e,t,r,n,a,i){var o=i||{"!type":"chart"};if(!e)return i;var l=0,d=0,c="A",u={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(e.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(x){var b=jje(x);u.s.r=u.s.c=0,u.e.c=l,c=Js(l),b[0].forEach(function(g,k){o[c+Ii(k)]={t:"n",v:g,z:b[1]},d=k}),u.e.r<d&&(u.e.r=d),++l}),l>0&&(o["!ref"]=Kn(u)),o}function Aje(e,t,r,n,a){if(!e)return e;n||(n={"!id":{}});var i={"!type":"chart","!drawel":null,"!rel":""},o,l=e.match(AG);return l&&CE(l[0],i,a,r),(o=e.match(/drawing r:id="(.*?)"/))&&(i["!rel"]=o[1]),n["!id"][i["!rel"]]&&(i["!drawel"]=n["!id"][i["!rel"]]),i}function Eje(e,t){e.l+=10;var r=ul(e);return{name:r}}function Tje(e,t,r,n,a){if(!e)return e;n||(n={"!id":{}});var i={"!type":"chart","!drawel":null,"!rel":""},o=!1;return gh(e,function(d,c,u){switch(u){case 550:i["!rel"]=d;break;case 651:a.Sheets[r]||(a.Sheets[r]={}),d.name&&(a.Sheets[r].CodeName=d.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:o=!0;break;case 36:o=!1;break;case 37:break;case 38:break;default:if(!(c.T>0)){if(!(c.T<0)){if(!o||t.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}}},t),n["!id"][i["!rel"]]&&(i["!drawel"]=n["!id"][i["!rel"]]),i}var AE=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],Oje=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],Pje=[],Ije=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function WM(e,t){for(var r=0;r!=e.length;++r)for(var n=e[r],a=0;a!=t.length;++a){var i=t[a];if(n[i[0]]==null)n[i[0]]=i[1];else switch(i[2]){case"bool":typeof n[i[0]]=="string"&&(n[i[0]]=Os(n[i[0]]));break;case"int":typeof n[i[0]]=="string"&&(n[i[0]]=parseInt(n[i[0]],10));break}}}function GM(e,t){for(var r=0;r!=t.length;++r){var n=t[r];if(e[n[0]]==null)e[n[0]]=n[1];else switch(n[2]){case"bool":typeof e[n[0]]=="string"&&(e[n[0]]=Os(e[n[0]]));break;case"int":typeof e[n[0]]=="string"&&(e[n[0]]=parseInt(e[n[0]],10));break}}}function PG(e){GM(e.WBProps,AE),GM(e.CalcPr,Ije),WM(e.WBView,Oje),WM(e.Sheets,Pje),P1.date1904=Os(e.WBProps.date1904)}function Dje(e){return!e.Workbook||!e.Workbook.WBProps?"false":Os(e.Workbook.WBProps.date1904)?"true":"false"}var Mje="][*?/\\".split("");function IG(e,t){if(e.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return Mje.forEach(function(n){if(e.indexOf(n)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}function Lje(e,t,r){e.forEach(function(n,a){IG(n);for(var i=0;i<a;++i)if(n==e[i])throw new Error("Duplicate Sheet Name: "+n);if(r){var o=t&&t[a]&&t[a].CodeName||n;if(o.charCodeAt(0)==95&&o.length>22)throw new Error("Bad Code Name: Worksheet"+o)}})}function Rje(e){if(!e||!e.SheetNames||!e.Sheets)throw new Error("Invalid Workbook");if(!e.SheetNames.length)throw new Error("Workbook is empty");var t=e.Workbook&&e.Workbook.Sheets||[];Lje(e.SheetNames,t,!!e.vbaraw);for(var r=0;r<e.SheetNames.length;++r)D_e(e.Sheets[e.SheetNames[r]],e.SheetNames[r],r)}var Fje=/<\w+:workbook/;function Bje(e,t){if(!e)throw new Error("Could not find file");var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},n=!1,a="xmlns",i={},o=0;if(e.replace(fl,function(d,c){var u=In(d);switch(Ju(u[0])){case"<?xml":break;case"<workbook":d.match(Fje)&&(a="xmlns"+d.match(/<(\w+):/)[1]),r.xmlns=u[a];break;case"</workbook>":break;case"<fileVersion":delete u[0],r.AppVersion=u;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":AE.forEach(function(x){if(u[x[0]]!=null)switch(x[2]){case"bool":r.WBProps[x[0]]=Os(u[x[0]]);break;case"int":r.WBProps[x[0]]=parseInt(u[x[0]],10);break;default:r.WBProps[x[0]]=u[x[0]]}}),u.codeName&&(r.WBProps.CodeName=ls(u.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete u[0],r.WBView.push(u);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(u.state){case"hidden":u.Hidden=1;break;case"veryHidden":u.Hidden=2;break;default:u.Hidden=0}delete u.state,u.name=Pa(ls(u.name)),delete u[0],r.Sheets.push(u);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":n=!0;break;case"</definedNames>":n=!1;break;case"<definedName":i={},i.Name=ls(u.name),u.comment&&(i.Comment=u.comment),u.localSheetId&&(i.Sheet=+u.localSheetId),Os(u.hidden||"0")&&(i.Hidden=!0),o=c+d.length;break;case"</definedName>":i.Ref=Pa(ls(e.slice(o,c))),r.Names.push(i);break;case"<definedName/>":break;case"<calcPr":delete u[0],r.CalcPr=u;break;case"<calcPr/>":delete u[0],r.CalcPr=u;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":n=!0;break;case"</AlternateContent>":n=!1;break;case"<revisionPtr":break;default:if(!n&&t.WTF)throw new Error("unrecognized "+u[0]+" in workbook")}return d}),dx.indexOf(r.xmlns)===-1)throw new Error("Unknown Namespace: "+r.xmlns);return PG(r),r}function DG(e){var t=[Di];t[t.length]=kr("workbook",null,{xmlns:dx[0],"xmlns:r":no.r});var r=e.Workbook&&(e.Workbook.Names||[]).length>0,n={codeName:"ThisWorkbook"};e.Workbook&&e.Workbook.WBProps&&(AE.forEach(function(l){e.Workbook.WBProps[l[0]]!=null&&e.Workbook.WBProps[l[0]]!=l[1]&&(n[l[0]]=e.Workbook.WBProps[l[0]])}),e.Workbook.WBProps.CodeName&&(n.codeName=e.Workbook.WBProps.CodeName,delete n.CodeName)),t[t.length]=kr("workbookPr",null,n);var a=e.Workbook&&e.Workbook.Sheets||[],i=0;if(a&&a[0]&&a[0].Hidden){for(t[t.length]="<bookViews>",i=0;i!=e.SheetNames.length&&!(!a[i]||!a[i].Hidden);++i);i==e.SheetNames.length&&(i=0),t[t.length]='<workbookView firstSheet="'+i+'" activeTab="'+i+'"/>',t[t.length]="</bookViews>"}for(t[t.length]="<sheets>",i=0;i!=e.SheetNames.length;++i){var o={name:Ja(e.SheetNames[i].slice(0,31))};if(o.sheetId=""+(i+1),o["r:id"]="rId"+(i+1),a[i])switch(a[i].Hidden){case 1:o.state="hidden";break;case 2:o.state="veryHidden";break}t[t.length]=kr("sheet",null,o)}return t[t.length]="</sheets>",r&&(t[t.length]="<definedNames>",e.Workbook&&e.Workbook.Names&&e.Workbook.Names.forEach(function(l){var d={name:l.Name};l.Comment&&(d.comment=l.Comment),l.Sheet!=null&&(d.localSheetId=""+l.Sheet),l.Hidden&&(d.hidden="1"),l.Ref&&(t[t.length]=kr("definedName",Ja(l.Ref),d))}),t[t.length]="</definedNames>"),t.length>2&&(t[t.length]="</workbook>",t[1]=t[1].replace("/>",">")),t.join("")}function Uje(e,t){var r={};return r.Hidden=e.read_shift(4),r.iTabID=e.read_shift(4),r.strRelID=Bj(e),r.name=ul(e),r}function zje(e,t){return t||(t=Ht(127)),t.write_shift(4,e.Hidden),t.write_shift(4,e.iTabID),fE(e.strRelID,t),Ao(e.name.slice(0,31),t),t.length>t.l?t.slice(0,t.l):t}function qje(e,t){var r={},n=e.read_shift(4);r.defaultThemeVersion=e.read_shift(4);var a=t>8?ul(e):"";return a.length>0&&(r.CodeName=a),r.autoCompressPictures=!!(n&65536),r.backupFile=!!(n&64),r.checkCompatibility=!!(n&4096),r.date1904=!!(n&1),r.filterPrivacy=!!(n&8),r.hidePivotFieldList=!!(n&1024),r.promptedSolutions=!!(n&16),r.publishItems=!!(n&2048),r.refreshAllConnections=!!(n&262144),r.saveExternalLinkValues=!!(n&128),r.showBorderUnselectedTables=!!(n&4),r.showInkAnnotation=!!(n&32),r.showObjects=["all","placeholders","none"][n>>13&3],r.showPivotChartFilter=!!(n&32768),r.updateLinks=["userSet","never","always"][n>>8&3],r}function Hje(e,t){t||(t=Ht(72));var r=0;return e&&e.filterPrivacy&&(r|=8),t.write_shift(4,r),t.write_shift(4,0),SW(e&&e.CodeName||"ThisWorkbook",t),t.slice(0,t.l)}function $je(e,t){var r={};return e.read_shift(4),r.ArchID=e.read_shift(4),e.l+=t-8,r}function Vje(e,t,r){var n=e.l+t;e.l+=4,e.l+=1;var a=e.read_shift(4),i=wwe(e),o=A_e(e,0,r),l=hE(e);e.l=n;var d={Name:i,Ptg:o};return a<268435455&&(d.Sheet=a),l&&(d.Comment=l),d}function Wje(e,t){var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},n=[],a=!1;t||(t={}),t.biff=12;var i=[],o=[[]];return o.SheetNames=[],o.XTI=[],Rb[16]={n:"BrtFRTArchID$",f:$je},gh(e,function(d,c,u){switch(u){case 156:o.SheetNames.push(d.name),r.Sheets.push(d);break;case 153:r.WBProps=d;break;case 39:d.Sheet!=null&&(t.SID=d.Sheet),d.Ref=il(d.Ptg,null,null,o,t),delete t.SID,delete d.Ptg,i.push(d);break;case 1036:break;case 357:case 358:case 355:case 667:o[0].length?o.push([u,d]):o[0]=[u,d],o[o.length-1].XTI=[];break;case 362:o.length===0&&(o[0]=[],o[0].XTI=[]),o[o.length-1].XTI=o[o.length-1].XTI.concat(d),o.XTI=o.XTI.concat(d);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:n.push(u),a=!0;break;case 36:n.pop(),a=!1;break;case 37:n.push(u),a=!0;break;case 38:n.pop(),a=!1;break;case 16:break;default:if(!c.T){if(!a||t.WTF&&n[n.length-1]!=37&&n[n.length-1]!=35)throw new Error("Unexpected record 0x"+u.toString(16))}}},t),PG(r),r.Names=i,r.supbooks=o,r}function Gje(e,t){dr(e,143);for(var r=0;r!=t.SheetNames.length;++r){var n=t.Workbook&&t.Workbook.Sheets&&t.Workbook.Sheets[r]&&t.Workbook.Sheets[r].Hidden||0,a={Hidden:n,iTabID:r+1,strRelID:"rId"+(r+1),name:t.SheetNames[r]};dr(e,156,zje(a))}dr(e,144)}function Kje(e,t){t||(t=Ht(127));for(var r=0;r!=4;++r)t.write_shift(4,0);return Ao("SheetJS",t),Ao(pk.version,t),Ao(pk.version,t),Ao("7262",t),t.length>t.l?t.slice(0,t.l):t}function Xje(e,t){t||(t=Ht(29)),t.write_shift(-4,0),t.write_shift(-4,460),t.write_shift(4,28800),t.write_shift(4,17600),t.write_shift(4,500),t.write_shift(4,e),t.write_shift(4,e);var r=120;return t.write_shift(1,r),t.length>t.l?t.slice(0,t.l):t}function Yje(e,t){if(!(!t.Workbook||!t.Workbook.Sheets)){for(var r=t.Workbook.Sheets,n=0,a=-1,i=-1;n<r.length;++n)!r[n]||!r[n].Hidden&&a==-1?a=n:r[n].Hidden==1&&i==-1&&(i=n);i>a||(dr(e,135),dr(e,158,Xje(a)),dr(e,136))}}function Qje(e,t){var r=cc();return dr(r,131),dr(r,128,Kje()),dr(r,153,Hje(e.Workbook&&e.Workbook.WBProps||null)),Yje(r,e),Gje(r,e),dr(r,132),r.end()}function Zje(e,t,r){return t.slice(-4)===".bin"?Wje(e,r):Bje(e,r)}function Jje(e,t,r,n,a,i,o,l){return t.slice(-4)===".bin"?mje(e,n,r,a,i,o,l):V_e(e,n,r,a,i,o,l)}function e6e(e,t,r,n,a,i,o,l){return t.slice(-4)===".bin"?Tje(e,n,r,a,i):Aje(e,n,r,a,i)}function t6e(e,t,r,n,a,i,o,l){return t.slice(-4)===".bin"?nNe():aNe()}function r6e(e,t,r,n,a,i,o,l){return t.slice(-4)===".bin"?tNe():rNe()}function n6e(e,t,r,n){return t.slice(-4)===".bin"?Z4e(e,r,n):U4e(e,r,n)}function a6e(e,t,r){return mG(e,r)}function s6e(e,t,r){return t.slice(-4)===".bin"?s4e(e,r):r4e(e,r)}function i6e(e,t,r){return t.slice(-4)===".bin"?Y3e(e,r):z3e(e,r)}function o6e(e,t,r){return t.slice(-4)===".bin"?F3e(e):L3e(e)}function l6e(e,t,r,n){return r.slice(-4)===".bin"?B3e(e,t,r,n):void 0}function c6e(e,t,r){return t.slice(-4)===".bin"?I3e(e,t,r):M3e(e,t,r)}function d6e(e,t,r){return(t.slice(-4)===".bin"?Qje:DG)(e)}function u6e(e,t,r,n,a){return(t.slice(-4)===".bin"?Sje:EG)(e,r,n,a)}function h6e(e,t,r){return(t.slice(-4)===".bin"?l3e:hG)(e,r)}function f6e(e,t,r){return(t.slice(-4)===".bin"?l4e:aG)(e,r)}function m6e(e,t,r){return(t.slice(-4)===".bin"?Q3e:gG)(e)}function x6e(e){return(e.slice(-4)===".bin"?D3e:xG)()}var MG=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,LG=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function $d(e,t){var r=e.split(/\s+/),n=[];if(n[0]=r[0],r.length===1)return n;var a=e.match(MG),i,o,l,d;if(a)for(d=0;d!=a.length;++d)i=a[d].match(LG),(o=i[1].indexOf(":"))===-1?n[i[1]]=i[2].slice(1,i[2].length-1):(i[1].slice(0,6)==="xmlns:"?l="xmlns"+i[1].slice(6):l=i[1].slice(o+1),n[l]=i[2].slice(1,i[2].length-1));return n}function p6e(e){var t=e.split(/\s+/),r={};if(t.length===1)return r;var n=e.match(MG),a,i,o,l;if(n)for(l=0;l!=n.length;++l)a=n[l].match(LG),(i=a[1].indexOf(":"))===-1?r[a[1]]=a[2].slice(1,a[2].length-1):(a[1].slice(0,6)==="xmlns:"?o="xmlns"+a[1].slice(6):o=a[1].slice(i+1),r[o]=a[2].slice(1,a[2].length-1));return r}var Jg;function g6e(e,t){var r=Jg[e]||Pa(e);return r==="General"?Qm(t):Sd(r,t)}function b6e(e,t,r,n){var a=n;switch((r[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":a=Os(n);break;case"i2":case"int":a=parseInt(n,10);break;case"r4":case"float":a=parseFloat(n);break;case"date":case"dateTime.tz":a=Ds(n);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+r[0])}e[Pa(t)]=a}function v6e(e,t,r){if(e.t!=="z"){if(!r||r.cellText!==!1)try{e.t==="e"?e.w=e.w||bh[e.v]:t==="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=Ab(e.v):e.w=Qm(e.v):e.w=g6e(t||"General",e.v)}catch(i){if(r.WTF)throw i}try{var n=Jg[t]||t||"General";if(r.cellNF&&(e.z=n),r.cellDates&&e.t=="n"&&Ep(n)){var a=hm(e.v);a&&(e.t="d",e.v=new Date(a.y,a.m-1,a.d,a.H,a.M,a.S,a.u))}}catch(i){if(r.WTF)throw i}}}function y6e(e,t,r){if(r.cellStyles&&t.Interior){var n=t.Interior;n.Pattern&&(n.patternType=P4e[n.Pattern]||n.Pattern)}e[t.ID]=t}function w6e(e,t,r,n,a,i,o,l,d,c){var u="General",x=n.StyleID,b={};c=c||{};var g=[],k=0;for(x===void 0&&l&&(x=l.StyleID),x===void 0&&o&&(x=o.StyleID);i[x]!==void 0&&(i[x].nf&&(u=i[x].nf),i[x].Interior&&g.push(i[x].Interior),!!i[x].Parent);)x=i[x].Parent;switch(r.Type){case"Boolean":n.t="b",n.v=Os(e);break;case"String":n.t="s",n.r=dM(Pa(e)),n.v=e.indexOf("<")>-1?Pa(t||e).replace(/<.*?>/g,""):n.r;break;case"DateTime":e.slice(-1)!="Z"&&(e+="Z"),n.v=(Ds(e)-new Date(Date.UTC(1899,11,30)))/(1440*60*1e3),n.v!==n.v?n.v=Pa(e):n.v<60&&(n.v=n.v-1),(!u||u=="General")&&(u="yyyy-mm-dd");case"Number":n.v===void 0&&(n.v=+e),n.t||(n.t="n");break;case"Error":n.t="e",n.v=TW[e],c.cellText!==!1&&(n.w=e);break;default:e==""&&t==""?n.t="z":(n.t="s",n.v=dM(t||e));break}if(v6e(n,u,c),c.cellFormula!==!1)if(n.Formula){var y=Pa(n.Formula);y.charCodeAt(0)==61&&(y=y.slice(1)),n.f=O1(y,a),delete n.Formula,n.ArrayRange=="RC"?n.F=O1("RC:RC",a):n.ArrayRange&&(n.F=O1(n.ArrayRange,a),d.push([Ia(n.F),n.F]))}else for(k=0;k<d.length;++k)a.r>=d[k][0].s.r&&a.r<=d[k][0].e.r&&a.c>=d[k][0].s.c&&a.c<=d[k][0].e.c&&(n.F=d[k][1]);c.cellStyles&&(g.forEach(function(N){!b.patternType&&N.patternType&&(b.patternType=N.patternType)}),n.s=b),n.StyleID!==void 0&&(n.ixfe=n.StyleID)}function k6e(e){e.t=e.v||"",e.t=e.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.v=e.w=e.ixfe=void 0}function b_(e,t){var r=t||{};Tp();var n=Bg(iE(e));(r.type=="binary"||r.type=="array"||r.type=="base64")&&(n=ls(n));var a=n.slice(0,1024).toLowerCase(),i=!1;if(a=a.replace(/".*?"/g,""),(a.indexOf(">")&1023)>Math.min(a.indexOf(",")&1023,a.indexOf(";")&1023)){var o=Ms(r);return o.type="string",op.to_workbook(n,o)}if(a.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(at){a.indexOf("<"+at)>=0&&(i=!0)}),i)return oCe(n,r);Jg={"General Number":"General","General Date":En[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":En[15],"Short Date":En[14],"Long Time":En[19],"Medium Time":En[18],"Short Time":En[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:En[2],Standard:En[4],Percent:En[10],Scientific:En[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var l,d=[],c,u={},x=[],b=r.dense?[]:{},g="",k={},y={},N=$d('<Data ss:Type="String">'),S=0,O=0,A=0,P={s:{r:2e6,c:2e6},e:{r:0,c:0}},q={},W={},R="",U=0,L=[],Q={},H={},G=0,Z=[],te=[],se={},ue=[],ae,pe=!1,ve=[],Pe=[],xe={},B=0,re=0,J={Sheets:[],WBProps:{date1904:!1}},ie={};Ob.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"");for(var Y="";l=Ob.exec(n);)switch(l[3]=(Y=l[3]).toLowerCase()){case"data":if(Y=="data"){if(l[1]==="/"){if((c=d.pop())[0]!==l[3])throw new Error("Bad state: "+c.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&d.push([l[3],!0]);break}if(d[d.length-1][1])break;l[1]==="/"?w6e(n.slice(S,l.index),R,N,d[d.length-1][0]=="comment"?se:k,{c:O,r:A},q,ue[O],y,ve,r):(R="",N=$d(l[0]),S=l.index+l[0].length);break;case"cell":if(l[1]==="/")if(te.length>0&&(k.c=te),(!r.sheetRows||r.sheetRows>A)&&k.v!==void 0&&(r.dense?(b[A]||(b[A]=[]),b[A][O]=k):b[Js(O)+Ii(A)]=k),k.HRef&&(k.l={Target:Pa(k.HRef)},k.HRefScreenTip&&(k.l.Tooltip=k.HRefScreenTip),delete k.HRef,delete k.HRefScreenTip),(k.MergeAcross||k.MergeDown)&&(B=O+(parseInt(k.MergeAcross,10)|0),re=A+(parseInt(k.MergeDown,10)|0),L.push({s:{c:O,r:A},e:{c:B,r:re}})),!r.sheetStubs)k.MergeAcross?O=B+1:++O;else if(k.MergeAcross||k.MergeDown){for(var _e=O;_e<=B;++_e)for(var me=A;me<=re;++me)(_e>O||me>A)&&(r.dense?(b[me]||(b[me]=[]),b[me][_e]={t:"z"}):b[Js(_e)+Ii(me)]={t:"z"});O=B+1}else++O;else k=p6e(l[0]),k.Index&&(O=+k.Index-1),O<P.s.c&&(P.s.c=O),O>P.e.c&&(P.e.c=O),l[0].slice(-2)==="/>"&&++O,te=[];break;case"row":l[1]==="/"||l[0].slice(-2)==="/>"?(A<P.s.r&&(P.s.r=A),A>P.e.r&&(P.e.r=A),l[0].slice(-2)==="/>"&&(y=$d(l[0]),y.Index&&(A=+y.Index-1)),O=0,++A):(y=$d(l[0]),y.Index&&(A=+y.Index-1),xe={},(y.AutoFitHeight=="0"||y.Height)&&(xe.hpx=parseInt(y.Height,10),xe.hpt=Lb(xe.hpx),Pe[A]=xe),y.Hidden=="1"&&(xe.hidden=!0,Pe[A]=xe));break;case"worksheet":if(l[1]==="/"){if((c=d.pop())[0]!==l[3])throw new Error("Bad state: "+c.join("|"));x.push(g),P.s.r<=P.e.r&&P.s.c<=P.e.c&&(b["!ref"]=Kn(P),r.sheetRows&&r.sheetRows<=P.e.r&&(b["!fullref"]=b["!ref"],P.e.r=r.sheetRows-1,b["!ref"]=Kn(P))),L.length&&(b["!merges"]=L),ue.length>0&&(b["!cols"]=ue),Pe.length>0&&(b["!rows"]=Pe),u[g]=b}else P={s:{r:2e6,c:2e6},e:{r:0,c:0}},A=O=0,d.push([l[3],!1]),c=$d(l[0]),g=Pa(c.Name),b=r.dense?[]:{},L=[],ve=[],Pe=[],ie={name:g,Hidden:0},J.Sheets.push(ie);break;case"table":if(l[1]==="/"){if((c=d.pop())[0]!==l[3])throw new Error("Bad state: "+c.join("|"))}else{if(l[0].slice(-2)=="/>")break;d.push([l[3],!1]),ue=[],pe=!1}break;case"style":l[1]==="/"?y6e(q,W,r):W=$d(l[0]);break;case"numberformat":W.nf=Pa($d(l[0]).Format||"General"),Jg[W.nf]&&(W.nf=Jg[W.nf]);for(var ne=0;ne!=392&&En[ne]!=W.nf;++ne);if(ne==392){for(ne=57;ne!=392;++ne)if(En[ne]==null){X0(W.nf,ne);break}}break;case"column":if(d[d.length-1][0]!=="table")break;if(ae=$d(l[0]),ae.Hidden&&(ae.hidden=!0,delete ae.Hidden),ae.Width&&(ae.wpx=parseInt(ae.Width,10)),!pe&&ae.wpx>10){pe=!0,ll=dG;for(var je=0;je<ue.length;++je)ue[je]&&yf(ue[je])}pe&&yf(ae),ue[ae.Index-1||ue.length]=ae;for(var De=0;De<+ae.Span;++De)ue[ue.length]=Ms(ae);break;case"namedrange":if(l[1]==="/")break;J.Names||(J.Names=[]);var ce=In(l[0]),Ee={Name:ce.Name,Ref:O1(ce.RefersTo.slice(1),{r:0,c:0})};J.Sheets.length>0&&(Ee.Sheet=J.Sheets.length-1),J.Names.push(Ee);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(l[0].slice(-2)==="/>")break;l[1]==="/"?R+=n.slice(U,l.index):U=l.index+l[0].length;break;case"interior":if(!r.cellStyles)break;W.Interior=$d(l[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(l[0].slice(-2)==="/>")break;l[1]==="/"?Wwe(Q,Y,n.slice(G,l.index)):G=l.index+l[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(l[1]==="/"){if((c=d.pop())[0]!==l[3])throw new Error("Bad state: "+c.join("|"))}else d.push([l[3],!1]);break;case"comment":if(l[1]==="/"){if((c=d.pop())[0]!==l[3])throw new Error("Bad state: "+c.join("|"));k6e(se),te.push(se)}else d.push([l[3],!1]),c=$d(l[0]),se={a:c.Author};break;case"autofilter":if(l[1]==="/"){if((c=d.pop())[0]!==l[3])throw new Error("Bad state: "+c.join("|"))}else if(l[0].charAt(l[0].length-2)!=="/"){var be=$d(l[0]);b["!autofilter"]={ref:O1(be.Range).replace(/\$/g,"")},d.push([l[3],!0])}break;case"name":break;case"datavalidation":if(l[1]==="/"){if((c=d.pop())[0]!==l[3])throw new Error("Bad state: "+c.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&d.push([l[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(l[1]==="/"){if((c=d.pop())[0]!==l[3])throw new Error("Bad state: "+c.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&d.push([l[3],!0]);break;case"null":break;default:if(d.length==0&&l[3]=="document"||d.length==0&&l[3]=="uof")return ZM(n,r);var ge=!0;switch(d[d.length-1][0]){case"officedocumentsettings":switch(l[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:ge=!1}break;case"componentoptions":switch(l[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:ge=!1}break;case"excelworkbook":switch(l[3]){case"date1904":J.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:ge=!1}break;case"workbookoptions":switch(l[3]){case"owcversion":break;case"height":break;case"width":break;default:ge=!1}break;case"worksheetoptions":switch(l[3]){case"visible":if(l[0].slice(-2)!=="/>")if(l[1]==="/")switch(n.slice(G,l.index)){case"SheetHidden":ie.Hidden=1;break;case"SheetVeryHidden":ie.Hidden=2;break}else G=l.index+l[0].length;break;case"header":b["!margins"]||Om(b["!margins"]={},"xlml"),isNaN(+In(l[0]).Margin)||(b["!margins"].header=+In(l[0]).Margin);break;case"footer":b["!margins"]||Om(b["!margins"]={},"xlml"),isNaN(+In(l[0]).Margin)||(b["!margins"].footer=+In(l[0]).Margin);break;case"pagemargins":var Qe=In(l[0]);b["!margins"]||Om(b["!margins"]={},"xlml"),isNaN(+Qe.Top)||(b["!margins"].top=+Qe.Top),isNaN(+Qe.Left)||(b["!margins"].left=+Qe.Left),isNaN(+Qe.Right)||(b["!margins"].right=+Qe.Right),isNaN(+Qe.Bottom)||(b["!margins"].bottom=+Qe.Bottom);break;case"displayrighttoleft":J.Views||(J.Views=[]),J.Views[0]||(J.Views[0]={}),J.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":b["!outline"]||(b["!outline"]={}),b["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":b["!outline"]||(b["!outline"]={}),b["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:ge=!1}break;case"pivottable":case"pivotcache":switch(l[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:ge=!1}break;case"pagebreaks":switch(l[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:ge=!1}break;case"autofilter":switch(l[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:ge=!1}break;case"querytable":switch(l[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:ge=!1}break;case"datavalidation":switch(l[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:ge=!1}break;case"sorting":case"conditionalformatting":switch(l[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:ge=!1}break;case"mapinfo":case"schema":case"data":switch(l[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:ge=!1}break;case"smarttags":break;default:ge=!1;break}if(ge||l[3].match(/!\[CDATA/))break;if(!d[d.length-1][1])throw"Unrecognized tag: "+l[3]+"|"+d.join("|");if(d[d.length-1][0]==="customdocumentproperties"){if(l[0].slice(-2)==="/>")break;l[1]==="/"?b6e(H,Y,Z,n.slice(G,l.index)):(Z=l,G=l.index+l[0].length);break}if(r.WTF)throw"Unrecognized tag: "+l[3]+"|"+d.join("|")}var Ye={};return!r.bookSheets&&!r.bookProps&&(Ye.Sheets=u),Ye.SheetNames=x,Ye.Workbook=J,Ye.SSF=Ms(En),Ye.Props=Q,Ye.Custprops=H,Ye}function Wj(e,t){switch(TE(t=t||{}),t.type||"base64"){case"base64":return b_(Uc(e),t);case"binary":case"buffer":case"file":return b_(e,t);case"array":return b_(Ef(e),t)}}function N6e(e,t){var r=[];return e.Props&&r.push(Gwe(e.Props,t)),e.Custprops&&r.push(Kwe(e.Props,e.Custprops)),r.join("")}function _6e(){return""}function S6e(e,t){var r=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return t.cellXfs.forEach(function(n,a){var i=[];i.push(kr("NumberFormat",null,{"ss:Format":Ja(En[n.numFmtId])}));var o={"ss:ID":"s"+(21+a)};r.push(kr("Style",i.join(""),o))}),kr("Styles",r.join(""))}function RG(e){return kr("NamedRange",null,{"ss:Name":e.Name,"ss:RefersTo":"="+_E(e.Ref,{r:0,c:0})})}function j6e(e){if(!((e||{}).Workbook||{}).Names)return"";for(var t=e.Workbook.Names,r=[],n=0;n<t.length;++n){var a=t[n];a.Sheet==null&&(a.Name.match(/^_xlfn\./)||r.push(RG(a)))}return kr("Names",r.join(""))}function C6e(e,t,r,n){if(!e||!((n||{}).Workbook||{}).Names)return"";for(var a=n.Workbook.Names,i=[],o=0;o<a.length;++o){var l=a[o];l.Sheet==r&&(l.Name.match(/^_xlfn\./)||i.push(RG(l)))}return i.join("")}function A6e(e,t,r,n){if(!e)return"";var a=[];if(e["!margins"]&&(a.push("<PageSetup>"),e["!margins"].header&&a.push(kr("Header",null,{"x:Margin":e["!margins"].header})),e["!margins"].footer&&a.push(kr("Footer",null,{"x:Margin":e["!margins"].footer})),a.push(kr("PageMargins",null,{"x:Bottom":e["!margins"].bottom||"0.75","x:Left":e["!margins"].left||"0.7","x:Right":e["!margins"].right||"0.7","x:Top":e["!margins"].top||"0.75"})),a.push("</PageSetup>")),n&&n.Workbook&&n.Workbook.Sheets&&n.Workbook.Sheets[r])if(n.Workbook.Sheets[r].Hidden)a.push(kr("Visible",n.Workbook.Sheets[r].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var i=0;i<r&&!(n.Workbook.Sheets[i]&&!n.Workbook.Sheets[i].Hidden);++i);i==r&&a.push("<Selected/>")}return((((n||{}).Workbook||{}).Views||[])[0]||{}).RTL&&a.push("<DisplayRightToLeft/>"),e["!protect"]&&(a.push(zo("ProtectContents","True")),e["!protect"].objects&&a.push(zo("ProtectObjects","True")),e["!protect"].scenarios&&a.push(zo("ProtectScenarios","True")),e["!protect"].selectLockedCells!=null&&!e["!protect"].selectLockedCells?a.push(zo("EnableSelection","NoSelection")):e["!protect"].selectUnlockedCells!=null&&!e["!protect"].selectUnlockedCells&&a.push(zo("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(o){e["!protect"][o[0]]&&a.push("<"+o[1]+"/>")})),a.length==0?"":kr("WorksheetOptions",a.join(""),{xmlns:Ac.x})}function E6e(e){return e.map(function(t){var r=Yye(t.t||""),n=kr("ss:Data",r,{xmlns:"http://www.w3.org/TR/REC-html40"});return kr("Comment",n,{"ss:Author":t.a})}).join("")}function T6e(e,t,r,n,a,i,o){if(!e||e.v==null&&e.f==null)return"";var l={};if(e.f&&(l["ss:Formula"]="="+Ja(_E(e.f,o))),e.F&&e.F.slice(0,t.length)==t){var d=ei(e.F.slice(t.length+1));l["ss:ArrayRange"]="RC:R"+(d.r==o.r?"":"["+(d.r-o.r)+"]")+"C"+(d.c==o.c?"":"["+(d.c-o.c)+"]")}if(e.l&&e.l.Target&&(l["ss:HRef"]=Ja(e.l.Target),e.l.Tooltip&&(l["x:HRefScreenTip"]=Ja(e.l.Tooltip))),r["!merges"])for(var c=r["!merges"],u=0;u!=c.length;++u)c[u].s.c!=o.c||c[u].s.r!=o.r||(c[u].e.c>c[u].s.c&&(l["ss:MergeAcross"]=c[u].e.c-c[u].s.c),c[u].e.r>c[u].s.r&&(l["ss:MergeDown"]=c[u].e.r-c[u].s.r));var x="",b="";switch(e.t){case"z":if(!n.sheetStubs)return"";break;case"n":x="Number",b=String(e.v);break;case"b":x="Boolean",b=e.v?"1":"0";break;case"e":x="Error",b=bh[e.v];break;case"d":x="DateTime",b=new Date(e.v).toISOString(),e.z==null&&(e.z=e.z||En[14]);break;case"s":x="String",b=Xye(e.v||"");break}var g=Of(n.cellXfs,e,n);l["ss:StyleID"]="s"+(21+g),l["ss:Index"]=o.c+1;var k=e.v!=null?b:"",y=e.t=="z"?"":'<Data ss:Type="'+x+'">'+k+"</Data>";return(e.c||[]).length>0&&(y+=E6e(e.c)),kr("Cell",y,l)}function O6e(e,t){var r='<Row ss:Index="'+(e+1)+'"';return t&&(t.hpt&&!t.hpx&&(t.hpx=lp(t.hpt)),t.hpx&&(r+=' ss:AutoFitHeight="0" ss:Height="'+t.hpx+'"'),t.hidden&&(r+=' ss:Hidden="1"')),r+">"}function P6e(e,t,r,n){if(!e["!ref"])return"";var a=Ia(e["!ref"]),i=e["!merges"]||[],o=0,l=[];e["!cols"]&&e["!cols"].forEach(function(N,S){yf(N);var O=!!N.width,A=V5(S,N),P={"ss:Index":S+1};O&&(P["ss:Width"]=Db(A.width)),N.hidden&&(P["ss:Hidden"]="1"),l.push(kr("Column",null,P))});for(var d=Array.isArray(e),c=a.s.r;c<=a.e.r;++c){for(var u=[O6e(c,(e["!rows"]||[])[c])],x=a.s.c;x<=a.e.c;++x){var b=!1;for(o=0;o!=i.length;++o)if(!(i[o].s.c>x)&&!(i[o].s.r>c)&&!(i[o].e.c<x)&&!(i[o].e.r<c)){(i[o].s.c!=x||i[o].s.r!=c)&&(b=!0);break}if(!b){var g={r:c,c:x},k=Tn(g),y=d?(e[c]||[])[x]:e[k];u.push(T6e(y,k,e,t,r,n,g))}}u.push("</Row>"),u.length>2&&l.push(u.join(""))}return l.join("")}function I6e(e,t,r){var n=[],a=r.SheetNames[e],i=r.Sheets[a],o=i?C6e(i,t,e,r):"";return o.length>0&&n.push("<Names>"+o+"</Names>"),o=i?P6e(i,t,e,r):"",o.length>0&&n.push("<Table>"+o+"</Table>"),n.push(A6e(i,t,e,r)),n.join("")}function D6e(e,t){t||(t={}),e.SSF||(e.SSF=Ms(En)),e.SSF&&(Tp(),F5(e.SSF),t.revssf=U5(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF,t.cellXfs=[],Of(t.cellXfs,{},{revssf:{General:0}}));var r=[];r.push(N6e(e,t)),r.push(_6e()),r.push(""),r.push("");for(var n=0;n<e.SheetNames.length;++n)r.push(kr("Worksheet",I6e(n,t,e),{"ss:Name":Ja(e.SheetNames[n])}));return r[2]=S6e(e,t),r[3]=j6e(e),Di+kr("Workbook",r.join(""),{xmlns:Ac.ss,"xmlns:o":Ac.o,"xmlns:x":Ac.x,"xmlns:ss":Ac.ss,"xmlns:dt":Ac.dt,"xmlns:html":Ac.html})}function M6e(e){var t={},r=e.content;if(r.l=28,t.AnsiUserType=r.read_shift(0,"lpstr-ansi"),t.AnsiClipboardFormat=jwe(r),r.length-r.l<=4)return t;var n=r.read_shift(4);if(n==0||n>40||(r.l-=4,t.Reserved1=r.read_shift(0,"lpstr-ansi"),r.length-r.l<=4)||(n=r.read_shift(4),n!==1907505652)||(t.UnicodeClipboardFormat=Cwe(r),n=r.read_shift(4),n==0||n>40))return t;r.l-=4,t.Reserved2=r.read_shift(0,"lpwstr")}var L6e=[60,1084,2066,2165,2175];function R6e(e,t,r,n,a){var i=n,o=[],l=r.slice(r.l,r.l+i);if(a&&a.enc&&a.enc.insitu&&l.length>0)switch(e){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:a.enc.insitu(l)}o.push(l),r.l+=i;for(var d=F0(r,r.l),c=Gj[d],u=0;c!=null&&L6e.indexOf(d)>-1;)i=F0(r,r.l+2),u=r.l+4,d==2066?u+=4:(d==2165||d==2175)&&(u+=12),l=r.slice(u,r.l+4+i),o.push(l),r.l+=4+i,c=Gj[d=F0(r,r.l)];var x=jo(o);Uo(x,0);var b=0;x.lens=[];for(var g=0;g<o.length;++g)x.lens.push(b),b+=o[g].length;if(x.length<n)throw"XLS Record 0x"+e.toString(16)+" Truncated: "+x.length+" < "+n;return t.f(x,x.length,a)}function Au(e,t,r){if(e.t!=="z"&&e.XF){var n=0;try{n=e.z||e.XF.numFmtId||0,t.cellNF&&(e.z=En[n])}catch(i){if(t.WTF)throw i}if(!t||t.cellText!==!1)try{e.t==="e"?e.w=e.w||bh[e.v]:n===0||n=="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=Ab(e.v):e.w=Qm(e.v):e.w=Sd(n,e.v,{date1904:!!r,dateNF:t&&t.dateNF})}catch(i){if(t.WTF)throw i}if(t.cellDates&&n&&e.t=="n"&&Ep(En[n]||String(n))){var a=hm(e.v);a&&(e.t="d",e.v=new Date(a.y,a.m-1,a.d,a.H,a.M,a.S,a.u))}}}function ly(e,t,r){return{v:e,ixfe:t,t:r}}function F6e(e,t){var r={opts:{}},n={},a=t.dense?[]:{},i={},o={},l=null,d=[],c="",u={},x,b="",g,k,y,N,S={},O=[],A,P,q=[],W=[],R={Sheets:[],WBProps:{date1904:!1},Views:[{}]},U={},L=function(Kt){return Kt<8?Am[Kt]:Kt<64&&W[Kt-8]||Am[Kt]},Q=function(Kt,ar,vr){var rr=ar.XF.data;if(!(!rr||!rr.patternType||!vr||!vr.cellStyles)){ar.s={},ar.s.patternType=rr.patternType;var ft;(ft=Ib(L(rr.icvFore)))&&(ar.s.fgColor={rgb:ft}),(ft=Ib(L(rr.icvBack)))&&(ar.s.bgColor={rgb:ft})}},H=function(Kt,ar,vr){if(!(xe>1)&&!(vr.sheetRows&&Kt.r>=vr.sheetRows)){if(vr.cellStyles&&ar.XF&&ar.XF.data&&Q(Kt,ar,vr),delete ar.ixfe,delete ar.XF,x=Kt,b=Tn(Kt),(!o||!o.s||!o.e)&&(o={s:{r:0,c:0},e:{r:0,c:0}}),Kt.r<o.s.r&&(o.s.r=Kt.r),Kt.c<o.s.c&&(o.s.c=Kt.c),Kt.r+1>o.e.r&&(o.e.r=Kt.r+1),Kt.c+1>o.e.c&&(o.e.c=Kt.c+1),vr.cellFormula&&ar.f){for(var rr=0;rr<O.length;++rr)if(!(O[rr][0].s.c>Kt.c||O[rr][0].s.r>Kt.r)&&!(O[rr][0].e.c<Kt.c||O[rr][0].e.r<Kt.r)){ar.F=Kn(O[rr][0]),(O[rr][0].s.c!=Kt.c||O[rr][0].s.r!=Kt.r)&&delete ar.f,ar.f&&(ar.f=""+il(O[rr][1],o,Kt,ve,G));break}}vr.dense?(a[Kt.r]||(a[Kt.r]=[]),a[Kt.r][Kt.c]=ar):a[b]=ar}},G={enc:!1,sbcch:0,snames:[],sharedf:S,arrayf:O,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!t&&!!t.cellStyles,WTF:!!t&&!!t.wtf};t.password&&(G.password=t.password);var Z,te=[],se=[],ue=[],ae=[],pe=!1,ve=[];ve.SheetNames=G.snames,ve.sharedf=G.sharedf,ve.arrayf=G.arrayf,ve.names=[],ve.XTI=[];var Pe=0,xe=0,B=0,re=[],J=[],ie;G.codepage=1200,au(1200);for(var Y=!1;e.l<e.length-1;){var _e=e.l,me=e.read_shift(2);if(me===0&&Pe===10)break;var ne=e.l===e.length?0:e.read_shift(2),je=Gj[me];if(je&&je.f){if(t.bookSheets&&Pe===133&&me!==133)break;if(Pe=me,je.r===2||je.r==12){var De=e.read_shift(2);if(ne-=2,!G.enc&&De!==me&&((De&255)<<8|De>>8)!==me)throw new Error("rt mismatch: "+De+"!="+me);je.r==12&&(e.l+=10,ne-=10)}var ce={};if(me===10?ce=je.f(e,ne,G):ce=R6e(me,je,e,ne,G),xe==0&&[9,521,1033,2057].indexOf(Pe)===-1)continue;switch(me){case 34:r.opts.Date1904=R.WBProps.date1904=ce;break;case 134:r.opts.WriteProtect=!0;break;case 47:if(G.enc||(e.l=0),G.enc=ce,!t.password)throw new Error("File is password-protected");if(ce.valid==null)throw new Error("Encryption scheme unsupported");if(!ce.valid)throw new Error("Password is incorrect");break;case 92:G.lastuser=ce;break;case 66:var Ee=Number(ce);switch(Ee){case 21010:Ee=1200;break;case 32768:Ee=1e4;break;case 32769:Ee=1252;break}au(G.codepage=Ee),Y=!0;break;case 317:G.rrtabid=ce;break;case 25:G.winlocked=ce;break;case 439:r.opts.RefreshAll=ce;break;case 12:r.opts.CalcCount=ce;break;case 16:r.opts.CalcDelta=ce;break;case 17:r.opts.CalcIter=ce;break;case 13:r.opts.CalcMode=ce;break;case 14:r.opts.CalcPrecision=ce;break;case 95:r.opts.CalcSaveRecalc=ce;break;case 15:G.CalcRefMode=ce;break;case 2211:r.opts.FullCalc=ce;break;case 129:ce.fDialog&&(a["!type"]="dialog"),ce.fBelow||((a["!outline"]||(a["!outline"]={})).above=!0),ce.fRight||((a["!outline"]||(a["!outline"]={})).left=!0);break;case 224:q.push(ce);break;case 430:ve.push([ce]),ve[ve.length-1].XTI=[];break;case 35:case 547:ve[ve.length-1].push(ce);break;case 24:case 536:ie={Name:ce.Name,Ref:il(ce.rgce,o,null,ve,G)},ce.itab>0&&(ie.Sheet=ce.itab-1),ve.names.push(ie),ve[0]||(ve[0]=[],ve[0].XTI=[]),ve[ve.length-1].push(ce),ce.Name=="_xlnm._FilterDatabase"&&ce.itab>0&&ce.rgce&&ce.rgce[0]&&ce.rgce[0][0]&&ce.rgce[0][0][0]=="PtgArea3d"&&(J[ce.itab-1]={ref:Kn(ce.rgce[0][0][1][2])});break;case 22:G.ExternCount=ce;break;case 23:ve.length==0&&(ve[0]=[],ve[0].XTI=[]),ve[ve.length-1].XTI=ve[ve.length-1].XTI.concat(ce),ve.XTI=ve.XTI.concat(ce);break;case 2196:if(G.biff<8)break;ie!=null&&(ie.Comment=ce[1]);break;case 18:a["!protect"]=ce;break;case 19:ce!==0&&G.WTF&&console.error("Password verifier: "+ce);break;case 133:i[ce.pos]=ce,G.snames.push(ce.name);break;case 10:{if(--xe)break;if(o.e){if(o.e.r>0&&o.e.c>0){if(o.e.r--,o.e.c--,a["!ref"]=Kn(o),t.sheetRows&&t.sheetRows<=o.e.r){var be=o.e.r;o.e.r=t.sheetRows-1,a["!fullref"]=a["!ref"],a["!ref"]=Kn(o),o.e.r=be}o.e.r++,o.e.c++}te.length>0&&(a["!merges"]=te),se.length>0&&(a["!objects"]=se),ue.length>0&&(a["!cols"]=ue),ae.length>0&&(a["!rows"]=ae),R.Sheets.push(U)}c===""?u=a:n[c]=a,a=t.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(G.biff===8&&(G.biff={9:2,521:3,1033:4}[me]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[ce.BIFFVer]||8),G.biffguess=ce.BIFFVer==0,ce.BIFFVer==0&&ce.dt==4096&&(G.biff=5,Y=!0,au(G.codepage=28591)),G.biff==8&&ce.BIFFVer==0&&ce.dt==16&&(G.biff=2),xe++)break;if(a=t.dense?[]:{},G.biff<8&&!Y&&(Y=!0,au(G.codepage=t.codepage||1252)),G.biff<5||ce.BIFFVer==0&&ce.dt==4096){c===""&&(c="Sheet1"),o={s:{r:0,c:0},e:{r:0,c:0}};var ge={pos:e.l-ne,name:c};i[ge.pos]=ge,G.snames.push(c)}else c=(i[_e]||{name:""}).name;ce.dt==32&&(a["!type"]="chart"),ce.dt==64&&(a["!type"]="macro"),te=[],se=[],G.arrayf=O=[],ue=[],ae=[],pe=!1,U={Hidden:(i[_e]||{hs:0}).hs,name:c}}break;case 515:case 3:case 2:a["!type"]=="chart"&&(t.dense?(a[ce.r]||[])[ce.c]:a[Tn({c:ce.c,r:ce.r})])&&++ce.c,A={ixfe:ce.ixfe,XF:q[ce.ixfe]||{},v:ce.val,t:"n"},B>0&&(A.z=re[A.ixfe>>8&63]),Au(A,t,r.opts.Date1904),H({c:ce.c,r:ce.r},A,t);break;case 5:case 517:A={ixfe:ce.ixfe,XF:q[ce.ixfe],v:ce.val,t:ce.t},B>0&&(A.z=re[A.ixfe>>8&63]),Au(A,t,r.opts.Date1904),H({c:ce.c,r:ce.r},A,t);break;case 638:A={ixfe:ce.ixfe,XF:q[ce.ixfe],v:ce.rknum,t:"n"},B>0&&(A.z=re[A.ixfe>>8&63]),Au(A,t,r.opts.Date1904),H({c:ce.c,r:ce.r},A,t);break;case 189:for(var Qe=ce.c;Qe<=ce.C;++Qe){var Ye=ce.rkrec[Qe-ce.c][0];A={ixfe:Ye,XF:q[Ye],v:ce.rkrec[Qe-ce.c][1],t:"n"},B>0&&(A.z=re[A.ixfe>>8&63]),Au(A,t,r.opts.Date1904),H({c:Qe,r:ce.r},A,t)}break;case 6:case 518:case 1030:{if(ce.val=="String"){l=ce;break}if(A=ly(ce.val,ce.cell.ixfe,ce.tt),A.XF=q[A.ixfe],t.cellFormula){var at=ce.formula;if(at&&at[0]&&at[0][0]&&at[0][0][0]=="PtgExp"){var Je=at[0][0][1][0],ct=at[0][0][1][1],Ke=Tn({r:Je,c:ct});S[Ke]?A.f=""+il(ce.formula,o,ce.cell,ve,G):A.F=((t.dense?(a[Je]||[])[ct]:a[Ke])||{}).F}else A.f=""+il(ce.formula,o,ce.cell,ve,G)}B>0&&(A.z=re[A.ixfe>>8&63]),Au(A,t,r.opts.Date1904),H(ce.cell,A,t),l=ce}break;case 7:case 519:if(l)l.val=ce,A=ly(ce,l.cell.ixfe,"s"),A.XF=q[A.ixfe],t.cellFormula&&(A.f=""+il(l.formula,o,l.cell,ve,G)),B>0&&(A.z=re[A.ixfe>>8&63]),Au(A,t,r.opts.Date1904),H(l.cell,A,t),l=null;else throw new Error("String record expects Formula");break;case 33:case 545:{O.push(ce);var zt=Tn(ce[0].s);if(g=t.dense?(a[ce[0].s.r]||[])[ce[0].s.c]:a[zt],t.cellFormula&&g){if(!l||!zt||!g)break;g.f=""+il(ce[1],o,ce[0],ve,G),g.F=Kn(ce[0])}}break;case 1212:{if(!t.cellFormula)break;if(b){if(!l)break;S[Tn(l.cell)]=ce[0],g=t.dense?(a[l.cell.r]||[])[l.cell.c]:a[Tn(l.cell)],(g||{}).f=""+il(ce[0],o,x,ve,G)}}break;case 253:A=ly(d[ce.isst].t,ce.ixfe,"s"),d[ce.isst].h&&(A.h=d[ce.isst].h),A.XF=q[A.ixfe],B>0&&(A.z=re[A.ixfe>>8&63]),Au(A,t,r.opts.Date1904),H({c:ce.c,r:ce.r},A,t);break;case 513:t.sheetStubs&&(A={ixfe:ce.ixfe,XF:q[ce.ixfe],t:"z"},B>0&&(A.z=re[A.ixfe>>8&63]),Au(A,t,r.opts.Date1904),H({c:ce.c,r:ce.r},A,t));break;case 190:if(t.sheetStubs)for(var Ft=ce.c;Ft<=ce.C;++Ft){var fr=ce.ixfe[Ft-ce.c];A={ixfe:fr,XF:q[fr],t:"z"},B>0&&(A.z=re[A.ixfe>>8&63]),Au(A,t,r.opts.Date1904),H({c:Ft,r:ce.r},A,t)}break;case 214:case 516:case 4:A=ly(ce.val,ce.ixfe,"s"),A.XF=q[A.ixfe],B>0&&(A.z=re[A.ixfe>>8&63]),Au(A,t,r.opts.Date1904),H({c:ce.c,r:ce.r},A,t);break;case 0:case 512:xe===1&&(o=ce);break;case 252:d=ce;break;case 1054:if(G.biff==4){re[B++]=ce[1];for(var hr=0;hr<B+163&&En[hr]!=ce[1];++hr);hr>=163&&X0(ce[1],B+163)}else X0(ce[1],ce[0]);break;case 30:{re[B++]=ce;for(var sr=0;sr<B+163&&En[sr]!=ce;++sr);sr>=163&&X0(ce,B+163)}break;case 229:te=te.concat(ce);break;case 93:se[ce.cmo[0]]=G.lastobj=ce;break;case 438:G.lastobj.TxO=ce;break;case 127:G.lastobj.ImData=ce;break;case 440:for(N=ce[0].s.r;N<=ce[0].e.r;++N)for(y=ce[0].s.c;y<=ce[0].e.c;++y)g=t.dense?(a[N]||[])[y]:a[Tn({c:y,r:N})],g&&(g.l=ce[1]);break;case 2048:for(N=ce[0].s.r;N<=ce[0].e.r;++N)for(y=ce[0].s.c;y<=ce[0].e.c;++y)g=t.dense?(a[N]||[])[y]:a[Tn({c:y,r:N})],g&&g.l&&(g.l.Tooltip=ce[1]);break;case 28:{if(G.biff<=5&&G.biff>=2)break;g=t.dense?(a[ce[0].r]||[])[ce[0].c]:a[Tn(ce[0])];var Sr=se[ce[2]];g||(t.dense?(a[ce[0].r]||(a[ce[0].r]=[]),g=a[ce[0].r][ce[0].c]={t:"z"}):g=a[Tn(ce[0])]={t:"z"},o.e.r=Math.max(o.e.r,ce[0].r),o.s.r=Math.min(o.s.r,ce[0].r),o.e.c=Math.max(o.e.c,ce[0].c),o.s.c=Math.min(o.s.c,ce[0].c)),g.c||(g.c=[]),k={a:ce[1],t:Sr.TxO.t},g.c.push(k)}break;case 2173:S3e(q[ce.ixfe],ce.ext);break;case 125:{if(!G.cellStyles)break;for(;ce.e>=ce.s;)ue[ce.e--]={width:ce.w/256,level:ce.level||0,hidden:!!(ce.flags&1)},pe||(pe=!0,wE(ce.w/256)),yf(ue[ce.e+1])}break;case 520:{var tr={};ce.level!=null&&(ae[ce.r]=tr,tr.level=ce.level),ce.hidden&&(ae[ce.r]=tr,tr.hidden=!0),ce.hpt&&(ae[ce.r]=tr,tr.hpt=ce.hpt,tr.hpx=lp(ce.hpt))}break;case 38:case 39:case 40:case 41:a["!margins"]||Om(a["!margins"]={}),a["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[me]]=ce;break;case 161:a["!margins"]||Om(a["!margins"]={}),a["!margins"].header=ce.header,a["!margins"].footer=ce.footer;break;case 574:ce.RTL&&(R.Views[0].RTL=!0);break;case 146:W=ce;break;case 2198:Z=ce;break;case 140:P=ce;break;case 442:c?U.CodeName=ce||U.name:R.WBProps.CodeName=ce||"ThisWorkbook";break}}else je||console.error("Missing Info for XLS Record 0x"+me.toString(16)),e.l+=ne}return r.SheetNames=gi(i).sort(function(Jt,Kt){return Number(Jt)-Number(Kt)}).map(function(Jt){return i[Jt].name}),t.bookSheets||(r.Sheets=n),!r.SheetNames.length&&u["!ref"]?(r.SheetNames.push("Sheet1"),r.Sheets&&(r.Sheets.Sheet1=u)):r.Preamble=u,r.Sheets&&J.forEach(function(Jt,Kt){r.Sheets[r.SheetNames[Kt]]["!autofilter"]=Jt}),r.Strings=d,r.SSF=Ms(En),G.enc&&(r.Encryption=G.enc),Z&&(r.Themes=Z),r.Metadata={},P!==void 0&&(r.Metadata.Country=P),ve.names.length>0&&(R.Names=ve.names),r.Workbook=R,r}var eb={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function B6e(e,t,r){var n=yn.find(e,"/!DocumentSummaryInformation");if(n&&n.size>0)try{var a=AM(n,Uj,eb.DSI);for(var i in a)t[i]=a[i]}catch(c){if(r.WTF)throw c}var o=yn.find(e,"/!SummaryInformation");if(o&&o.size>0)try{var l=AM(o,zj,eb.SI);for(var d in l)t[d]==null&&(t[d]=l[d])}catch(c){if(r.WTF)throw c}t.HeadingPairs&&t.TitlesOfParts&&(LW(t.HeadingPairs,t.TitlesOfParts,t,r),delete t.HeadingPairs,delete t.TitlesOfParts)}function U6e(e,t){var r=[],n=[],a=[],i=0,o,l=aM(Uj,"n"),d=aM(zj,"n");if(e.Props)for(o=gi(e.Props),i=0;i<o.length;++i)(Object.prototype.hasOwnProperty.call(l,o[i])?r:Object.prototype.hasOwnProperty.call(d,o[i])?n:a).push([o[i],e.Props[o[i]]]);if(e.Custprops)for(o=gi(e.Custprops),i=0;i<o.length;++i)Object.prototype.hasOwnProperty.call(e.Props||{},o[i])||(Object.prototype.hasOwnProperty.call(l,o[i])?r:Object.prototype.hasOwnProperty.call(d,o[i])?n:a).push([o[i],e.Custprops[o[i]]]);var c=[];for(i=0;i<a.length;++i)HW.indexOf(a[i][0])>-1||MW.indexOf(a[i][0])>-1||a[i][1]!=null&&c.push(a[i]);n.length&&yn.utils.cfb_add(t,"/SummaryInformation",EM(n,eb.SI,d,zj)),(r.length||c.length)&&yn.utils.cfb_add(t,"/DocumentSummaryInformation",EM(r,eb.DSI,l,Uj,c.length?c:null,eb.UDI))}function FG(e,t){t||(t={}),TE(t),QA(),t.codepage&&YA(t.codepage);var r,n;if(e.FullPaths){if(yn.find(e,"/encryption"))throw new Error("File is password-protected");r=yn.find(e,"!CompObj"),n=yn.find(e,"/Workbook")||yn.find(e,"/Book")}else{switch(t.type){case"base64":e=Ic(Uc(e));break;case"binary":e=Ic(e);break;case"buffer":break;case"array":Array.isArray(e)||(e=Array.prototype.slice.call(e));break}Uo(e,0),n={content:e}}var a,i;if(r&&M6e(r),t.bookProps&&!t.bookSheets)a={};else{var o=sa?"buffer":"array";if(n&&n.content)a=F6e(n.content,t);else if((i=yn.find(e,"PerfectOffice_MAIN"))&&i.content)a=Tm.to_workbook(i.content,(t.type=o,t));else if((i=yn.find(e,"NativeContent_MAIN"))&&i.content)a=Tm.to_workbook(i.content,(t.type=o,t));else throw(i=yn.find(e,"MN0"))&&i.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");t.bookVBA&&e.FullPaths&&yn.find(e,"/_VBA_PROJECT_CUR/VBA/dir")&&(a.vbaraw=J3e(e))}var l={};return e.FullPaths&&B6e(e,l,t),a.Props=a.Custprops=l,t.bookFiles&&(a.cfb=e),a}function z6e(e,t){var r=t||{},n=yn.utils.cfb_new({root:"R"}),a="/Workbook";switch(r.bookType||"xls"){case"xls":r.bookType="biff8";case"xla":r.bookType||(r.bookType="xla");case"biff8":a="/Workbook",r.biff=8;break;case"biff5":a="/Book",r.biff=5;break;default:throw new Error("invalid type "+r.bookType+" for XLS CFB")}return yn.utils.cfb_add(n,a,BG(e,r)),r.biff==8&&(e.Props||e.Custprops)&&U6e(e,n),r.biff==8&&e.vbaraw&&eNe(n,yn.read(e.vbaraw,{type:typeof e.vbaraw=="string"?"binary":"buffer"})),n}var Rb={0:{f:uSe},1:{f:vSe},2:{f:FSe},3:{f:CSe},4:{f:NSe},5:{f:MSe},6:{f:HSe},7:{f:OSe},8:{f:YSe},9:{f:XSe},10:{f:GSe},11:{f:KSe},12:{f:wSe},13:{f:USe},14:{f:ESe},15:{f:SSe},16:{f:TG},17:{f:VSe},18:{f:ISe},19:{f:uE},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:Vje},40:{},42:{},43:{f:H4e},44:{f:z4e},45:{f:W4e},46:{f:K4e},47:{f:G4e},48:{},49:{f:mwe},50:{},51:{f:A3e},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:eG},62:{f:qSe},63:{f:R3e},64:{f:hje},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:hl,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:lje},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:gSe},148:{f:mSe,p:16},151:{f:rje},152:{},153:{f:qje},154:{},155:{},156:{f:Uje},157:{},158:{},159:{T:1,f:a4e},160:{T:-1},161:{T:1,f:mx},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:QSe},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:j3e},336:{T:-1},337:{f:O3e,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:Bj},357:{},358:{},359:{},360:{T:1},361:{},362:{f:JW},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:nje},427:{f:aje},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:ije},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:pSe},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:eje},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:Bj},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:K3e},633:{T:1},634:{T:-1},635:{T:1,f:W3e},636:{T:-1},637:{f:bwe},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:Eje},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:fje},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},Gj={6:{f:p_},10:{f:$h},12:{f:Ui},13:{f:Ui},14:{f:Ci},15:{f:Ci},16:{f:cl},17:{f:Ci},18:{f:Ci},19:{f:Ui},20:{f:MM},21:{f:MM},23:{f:JW},24:{f:RM},25:{f:Ci},26:{},27:{},28:{f:f5e},29:{},34:{f:Ci},35:{f:LM},38:{f:cl},39:{f:cl},40:{f:cl},41:{f:cl},42:{f:Ci},43:{f:Ci},47:{f:S4e},49:{f:Uke},51:{f:Ui},60:{},61:{f:Mke},64:{f:Ci},65:{f:Bke},66:{f:Ui},77:{},80:{},81:{},82:{},85:{f:Ui},89:{},90:{},91:{},92:{f:_ke},93:{f:p5e},94:{},95:{f:Ci},96:{},97:{},99:{f:Ci},125:{f:eG},128:{f:t5e},129:{f:jke},130:{f:Ui},131:{f:Ci},132:{f:Ci},133:{f:Cke},134:{},140:{f:_5e},141:{f:Ui},144:{},146:{f:C5e},151:{},152:{},153:{},154:{},155:{},156:{f:Ui},157:{},158:{},160:{f:D5e},161:{f:T5e},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:Qke},190:{f:Zke},193:{f:$h},197:{},198:{},199:{},200:{},201:{},202:{f:Ci},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:Ui},220:{},221:{f:Ci},222:{},224:{f:e5e},225:{f:Nke},226:{f:$h},227:{},229:{f:m5e},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:Eke},253:{f:qke},255:{f:Oke},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:$W},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:Ci},353:{f:$h},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:i5e},431:{f:Ci},432:{},433:{},434:{},437:{},438:{f:v5e},439:{f:Ci},440:{f:y5e},441:{},442:{f:_v},443:{},444:{f:Ui},445:{},446:{},448:{f:$h},449:{f:Dke,r:2},450:{f:$h},512:{f:PM},513:{f:I5e},515:{f:a5e},516:{f:$ke},517:{f:DM},519:{f:M5e},520:{f:Pke},523:{},545:{f:FM},549:{f:OM},566:{},574:{f:Rke},638:{f:Yke},659:{},1048:{},1054:{f:Wke},1084:{},1212:{f:d5e},2048:{f:k5e},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:sy},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:$h},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:A5e,r:12},2173:{f:_3e,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:Ci,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:c5e,r:12},2197:{},2198:{f:b3e,r:12},2199:{},2200:{},2201:{},2202:{f:u5e,r:12},2203:{f:$h},2204:{},2205:{},2206:{},2207:{},2211:{f:Ike},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:Ui},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:O5e},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:j5e},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:PM},1:{},2:{f:U5e},3:{f:F5e},4:{f:R5e},5:{f:DM},7:{f:q5e},8:{},9:{f:sy},11:{},22:{f:Ui},30:{f:Kke},31:{},32:{},33:{f:FM},36:{},37:{f:OM},50:{f:H5e},62:{},52:{},67:{},68:{f:Ui},69:{},86:{},126:{},127:{f:L5e},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:$5e},223:{},234:{},354:{},421:{},518:{f:p_},521:{f:sy},536:{f:RM},547:{f:LM},561:{},579:{},1030:{f:p_},1033:{f:sy},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function Nr(e,t,r,n){var a=t;if(!isNaN(a)){var i=n||(r||[]).length||0,o=e.next(4);o.write_shift(2,a),o.write_shift(2,i),i>0&&lE(r)&&e.push(r)}}function q6e(e,t,r,n){var a=(r||[]).length||0;if(a<=8224)return Nr(e,t,r,a);var i=t;if(!isNaN(i)){for(var o=r.parts||[],l=0,d=0,c=0;c+(o[l]||8224)<=8224;)c+=o[l]||8224,l++;var u=e.next(4);for(u.write_shift(2,i),u.write_shift(2,c),e.push(r.slice(d,d+c)),d+=c;d<a;){for(u=e.next(4),u.write_shift(2,60),c=0;c+(o[l]||8224)<=8224;)c+=o[l]||8224,l++;u.write_shift(2,c),e.push(r.slice(d,d+c)),d+=c}}}function Av(e,t,r){return e||(e=Ht(7)),e.write_shift(2,t),e.write_shift(2,r),e.write_shift(2,0),e.write_shift(1,0),e}function H6e(e,t,r,n){var a=Ht(9);return Av(a,e,t),VW(r,n||"b",a),a}function $6e(e,t,r){var n=Ht(8+2*r.length);return Av(n,e,t),n.write_shift(1,r.length),n.write_shift(r.length,r,"sbcs"),n.l<n.length?n.slice(0,n.l):n}function V6e(e,t,r,n){if(t.v!=null)switch(t.t){case"d":case"n":var a=t.t=="d"?ao(Ds(t.v)):t.v;a==(a|0)&&a>=0&&a<65536?Nr(e,2,z5e(r,n,a)):Nr(e,3,B5e(r,n,a));return;case"b":case"e":Nr(e,5,H6e(r,n,t.v,t.t));return;case"s":case"str":Nr(e,4,$6e(r,n,(t.v||"").slice(0,255)));return}Nr(e,1,Av(null,r,n))}function W6e(e,t,r,n){var a=Array.isArray(t),i=Ia(t["!ref"]||"A1"),o,l="",d=[];if(i.e.c>255||i.e.r>16383){if(n.WTF)throw new Error("Range "+(t["!ref"]||"A1")+" exceeds format limit A1:IV16384");i.e.c=Math.min(i.e.c,255),i.e.r=Math.min(i.e.c,16383),o=Kn(i)}for(var c=i.s.r;c<=i.e.r;++c){l=Ii(c);for(var u=i.s.c;u<=i.e.c;++u){c===i.s.r&&(d[u]=Js(u)),o=d[u]+l;var x=a?(t[c]||[])[u]:t[o];x&&V6e(e,x,c,u)}}}function G6e(e,t){for(var r=t||{},n=cc(),a=0,i=0;i<e.SheetNames.length;++i)e.SheetNames[i]==r.sheet&&(a=i);if(a==0&&r.sheet&&e.SheetNames[0]!=r.sheet)throw new Error("Sheet not found: "+r.sheet);return Nr(n,r.biff==4?1033:r.biff==3?521:9,bE(e,16,r)),W6e(n,e.Sheets[e.SheetNames[a]],a,r),Nr(n,10),n.end()}function K6e(e,t,r){Nr(e,49,zke({sz:12,name:"Arial"},r))}function X6e(e,t,r){t&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)t[a]!=null&&Nr(e,1054,Gke(a,t[a],r))})}function Y6e(e,t){var r=Ht(19);r.write_shift(4,2151),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,1),r.write_shift(4,0),Nr(e,2151,r),r=Ht(39),r.write_shift(4,2152),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,0),r.write_shift(4,0),r.write_shift(2,1),r.write_shift(4,4),r.write_shift(2,0),YW(Ia(t["!ref"]||"A1"),r),r.write_shift(4,4),Nr(e,2152,r)}function Q6e(e,t){for(var r=0;r<16;++r)Nr(e,224,IM({numFmtId:0,style:!0},0,t));t.cellXfs.forEach(function(n){Nr(e,224,IM(n,0,t))})}function Z6e(e,t){for(var r=0;r<t["!links"].length;++r){var n=t["!links"][r];Nr(e,440,w5e(n)),n[1].Tooltip&&Nr(e,2048,N5e(n))}delete t["!links"]}function J6e(e,t){if(t){var r=0;t.forEach(function(n,a){++r<=256&&n&&Nr(e,125,E5e(V5(a,n),a))})}}function eCe(e,t,r,n,a){var i=16+Of(a.cellXfs,t,a);if(t.v==null&&!t.bf){Nr(e,513,tx(r,n,i));return}if(t.bf)Nr(e,6,j_e(t,r,n,a,i));else switch(t.t){case"d":case"n":var o=t.t=="d"?ao(Ds(t.v)):t.v;Nr(e,515,s5e(r,n,o,i));break;case"b":case"e":Nr(e,517,n5e(r,n,t.v,i,a,t.t));break;case"s":case"str":if(a.bookSST){var l=jE(a.Strings,t.v,a.revStrings);Nr(e,253,Hke(r,n,l,i))}else Nr(e,516,Vke(r,n,(t.v||"").slice(0,255),i,a));break;default:Nr(e,513,tx(r,n,i))}}function tCe(e,t,r){var n=cc(),a=r.SheetNames[e],i=r.Sheets[a]||{},o=(r||{}).Workbook||{},l=(o.Sheets||[])[e]||{},d=Array.isArray(i),c=t.biff==8,u,x="",b=[],g=Ia(i["!ref"]||"A1"),k=c?65536:16384;if(g.e.c>255||g.e.r>=k){if(t.WTF)throw new Error("Range "+(i["!ref"]||"A1")+" exceeds format limit A1:IV16384");g.e.c=Math.min(g.e.c,255),g.e.r=Math.min(g.e.c,k-1)}Nr(n,2057,bE(r,16,t)),Nr(n,13,xd(1)),Nr(n,12,xd(100)),Nr(n,15,Cl(!0)),Nr(n,17,Cl(!1)),Nr(n,16,Jm(.001)),Nr(n,95,Cl(!0)),Nr(n,42,Cl(!1)),Nr(n,43,Cl(!1)),Nr(n,130,xd(1)),Nr(n,128,r5e()),Nr(n,131,Cl(!1)),Nr(n,132,Cl(!1)),c&&J6e(n,i["!cols"]),Nr(n,512,Xke(g,t)),c&&(i["!links"]=[]);for(var y=g.s.r;y<=g.e.r;++y){x=Ii(y);for(var N=g.s.c;N<=g.e.c;++N){y===g.s.r&&(b[N]=Js(N)),u=b[N]+x;var S=d?(i[y]||[])[N]:i[u];S&&(eCe(n,S,y,N,t),c&&S.l&&i["!links"].push([u,S.l]))}}var O=l.CodeName||l.name||a;return c&&Nr(n,574,Fke((o.Views||[])[0])),c&&(i["!merges"]||[]).length&&Nr(n,229,x5e(i["!merges"])),c&&Z6e(n,i),Nr(n,442,WW(O)),c&&Y6e(n,i),Nr(n,10),n.end()}function rCe(e,t,r){var n=cc(),a=(e||{}).Workbook||{},i=a.Sheets||[],o=a.WBProps||{},l=r.biff==8,d=r.biff==5;if(Nr(n,2057,bE(e,5,r)),r.bookType=="xla"&&Nr(n,135),Nr(n,225,l?xd(1200):null),Nr(n,193,nke(2)),d&&Nr(n,191),d&&Nr(n,192),Nr(n,226),Nr(n,92,Ske("SheetJS",r)),Nr(n,66,xd(l?1200:1252)),l&&Nr(n,353,xd(0)),l&&Nr(n,448),Nr(n,317,P5e(e.SheetNames.length)),l&&e.vbaraw&&Nr(n,211),l&&e.vbaraw){var c=o.CodeName||"ThisWorkbook";Nr(n,442,WW(c))}Nr(n,156,xd(17)),Nr(n,25,Cl(!1)),Nr(n,18,Cl(!1)),Nr(n,19,xd(0)),l&&Nr(n,431,Cl(!1)),l&&Nr(n,444,xd(0)),Nr(n,61,Lke()),Nr(n,64,Cl(!1)),Nr(n,141,xd(0)),Nr(n,34,Cl(Dje(e)=="true")),Nr(n,14,Cl(!0)),l&&Nr(n,439,Cl(!1)),Nr(n,218,xd(0)),K6e(n,e,r),X6e(n,e.SSF,r),Q6e(n,r),l&&Nr(n,352,Cl(!1));var u=n.end(),x=cc();l&&Nr(x,140,S5e()),l&&r.Strings&&q6e(x,252,Tke(r.Strings)),Nr(x,10);var b=x.end(),g=cc(),k=0,y=0;for(y=0;y<e.SheetNames.length;++y)k+=(l?12:11)+(l?2:1)*e.SheetNames[y].length;var N=u.length+k+b.length;for(y=0;y<e.SheetNames.length;++y){var S=i[y]||{};Nr(g,133,Ake({pos:N,hs:S.Hidden||0,dt:0,name:e.SheetNames[y]},r)),N+=t[y].length}var O=g.end();if(k!=O.length)throw new Error("BS8 "+k+" != "+O.length);var A=[];return u.length&&A.push(u),O.length&&A.push(O),b.length&&A.push(b),jo(A)}function nCe(e,t){var r=t||{},n=[];e&&!e.SSF&&(e.SSF=Ms(En)),e&&e.SSF&&(Tp(),F5(e.SSF),r.revssf=U5(e.SSF),r.revssf[e.SSF[65535]]=0,r.ssf=e.SSF),r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,OE(r),r.cellXfs=[],Of(r.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={});for(var a=0;a<e.SheetNames.length;++a)n[n.length]=tCe(a,r,e);return n.unshift(rCe(e,n,r)),jo(n)}function BG(e,t){for(var r=0;r<=e.SheetNames.length;++r){var n=e.Sheets[e.SheetNames[r]];if(!(!n||!n["!ref"])){var a=dc(n["!ref"]);a.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+e.SheetNames[r]+"' extends beyond column IV (255).  Data may be lost.")}}var i=t||{};switch(i.biff||2){case 8:case 5:return nCe(e,t);case 4:case 3:case 2:return G6e(e,t)}throw new Error("invalid type "+i.bookType+" for BIFF")}function KM(e,t){var r=t||{},n=r.dense?[]:{};e=e.replace(/<!--.*?-->/g,"");var a=e.match(/<table/i);if(!a)throw new Error("Invalid HTML: could not find <table>");var i=e.match(/<\/table/i),o=a.index,l=i&&i.index||e.length,d=zye(e.slice(o,l),/(:?<tr[^>]*>)/i,"<tr>"),c=-1,u=0,x=0,b=0,g={s:{r:1e7,c:1e7},e:{r:0,c:0}},k=[];for(o=0;o<d.length;++o){var y=d[o].trim(),N=y.slice(0,3).toLowerCase();if(N=="<tr"){if(++c,r.sheetRows&&r.sheetRows<=c){--c;break}u=0;continue}if(!(N!="<td"&&N!="<th")){var S=y.split(/<\/t[dh]>/i);for(l=0;l<S.length;++l){var O=S[l].trim();if(O.match(/<t[dh]/i)){for(var A=O,P=0;A.charAt(0)=="<"&&(P=A.indexOf(">"))>-1;)A=A.slice(P+1);for(var q=0;q<k.length;++q){var W=k[q];W.s.c==u&&W.s.r<c&&c<=W.e.r&&(u=W.e.c+1,q=-1)}var R=In(O.slice(0,O.indexOf(">")));b=R.colspan?+R.colspan:1,((x=+R.rowspan)>1||b>1)&&k.push({s:{r:c,c:u},e:{r:c+(x||1)-1,c:u+b-1}});var U=R.t||R["data-t"]||"";if(!A.length){u+=b;continue}if(A=cW(A),g.s.r>c&&(g.s.r=c),g.e.r<c&&(g.e.r=c),g.s.c>u&&(g.s.c=u),g.e.c<u&&(g.e.c=u),!A.length){u+=b;continue}var L={t:"s",v:A};r.raw||!A.trim().length||U=="s"||(A==="TRUE"?L={t:"b",v:!0}:A==="FALSE"?L={t:"b",v:!1}:isNaN(ou(A))?isNaN(ip(A).getDate())||(L={t:"d",v:Ds(A)},r.cellDates||(L={t:"n",v:ao(L.v)}),L.z=r.dateNF||En[14]):L={t:"n",v:ou(A)}),r.dense?(n[c]||(n[c]=[]),n[c][u]=L):n[Tn({r:c,c:u})]=L,u+=b}}}}return n["!ref"]=Kn(g),k.length&&(n["!merges"]=k),n}function aCe(e,t,r,n){for(var a=e["!merges"]||[],i=[],o=t.s.c;o<=t.e.c;++o){for(var l=0,d=0,c=0;c<a.length;++c)if(!(a[c].s.r>r||a[c].s.c>o)&&!(a[c].e.r<r||a[c].e.c<o)){if(a[c].s.r<r||a[c].s.c<o){l=-1;break}l=a[c].e.r-a[c].s.r+1,d=a[c].e.c-a[c].s.c+1;break}if(!(l<0)){var u=Tn({r,c:o}),x=n.dense?(e[r]||[])[o]:e[u],b=x&&x.v!=null&&(x.h||sE(x.w||(ih(x),x.w)||""))||"",g={};l>1&&(g.rowspan=l),d>1&&(g.colspan=d),n.editable?b='<span contenteditable="true">'+b+"</span>":x&&(g["data-t"]=x&&x.t||"z",x.v!=null&&(g["data-v"]=x.v),x.z!=null&&(g["data-z"]=x.z),x.l&&(x.l.Target||"#").charAt(0)!="#"&&(b='<a href="'+x.l.Target+'">'+b+"</a>")),g.id=(n.id||"sjs")+"-"+u,i.push(kr("td",b,g))}}var k="<tr>";return k+i.join("")+"</tr>"}var sCe='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',iCe="</body></html>";function oCe(e,t){var r=e.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!r||r.length==0)throw new Error("Invalid HTML: could not find <table>");if(r.length==1)return Tf(KM(r[0],t),t);var n=DE();return r.forEach(function(a,i){ME(n,KM(a,t),"Sheet"+(i+1))}),n}function lCe(e,t,r){var n=[];return n.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function UG(e,t){var r=t||{},n=r.header!=null?r.header:sCe,a=r.footer!=null?r.footer:iCe,i=[n],o=dc(e["!ref"]);r.dense=Array.isArray(e),i.push(lCe(e,o,r));for(var l=o.s.r;l<=o.e.r;++l)i.push(aCe(e,o,l,r));return i.push("</table>"+a),i.join("")}function zG(e,t,r){var n=r||{},a=0,i=0;if(n.origin!=null)if(typeof n.origin=="number")a=n.origin;else{var o=typeof n.origin=="string"?ei(n.origin):n.origin;a=o.r,i=o.c}var l=t.getElementsByTagName("tr"),d=Math.min(n.sheetRows||1e7,l.length),c={s:{r:0,c:0},e:{r:a,c:i}};if(e["!ref"]){var u=dc(e["!ref"]);c.s.r=Math.min(c.s.r,u.s.r),c.s.c=Math.min(c.s.c,u.s.c),c.e.r=Math.max(c.e.r,u.e.r),c.e.c=Math.max(c.e.c,u.e.c),a==-1&&(c.e.r=a=u.e.r+1)}var x=[],b=0,g=e["!rows"]||(e["!rows"]=[]),k=0,y=0,N=0,S=0,O=0,A=0;for(e["!cols"]||(e["!cols"]=[]);k<l.length&&y<d;++k){var P=l[k];if(XM(P)){if(n.display)continue;g[y]={hidden:!0}}var q=P.children;for(N=S=0;N<q.length;++N){var W=q[N];if(!(n.display&&XM(W))){var R=W.hasAttribute("data-v")?W.getAttribute("data-v"):W.hasAttribute("v")?W.getAttribute("v"):cW(W.innerHTML),U=W.getAttribute("data-z")||W.getAttribute("z");for(b=0;b<x.length;++b){var L=x[b];L.s.c==S+i&&L.s.r<y+a&&y+a<=L.e.r&&(S=L.e.c+1-i,b=-1)}A=+W.getAttribute("colspan")||1,((O=+W.getAttribute("rowspan")||1)>1||A>1)&&x.push({s:{r:y+a,c:S+i},e:{r:y+a+(O||1)-1,c:S+i+(A||1)-1}});var Q={t:"s",v:R},H=W.getAttribute("data-t")||W.getAttribute("t")||"";R!=null&&(R.length==0?Q.t=H||"z":n.raw||R.trim().length==0||H=="s"||(R==="TRUE"?Q={t:"b",v:!0}:R==="FALSE"?Q={t:"b",v:!1}:isNaN(ou(R))?isNaN(ip(R).getDate())||(Q={t:"d",v:Ds(R)},n.cellDates||(Q={t:"n",v:ao(Q.v)}),Q.z=n.dateNF||En[14]):Q={t:"n",v:ou(R)})),Q.z===void 0&&U!=null&&(Q.z=U);var G="",Z=W.getElementsByTagName("A");if(Z&&Z.length)for(var te=0;te<Z.length&&!(Z[te].hasAttribute("href")&&(G=Z[te].getAttribute("href"),G.charAt(0)!="#"));++te);G&&G.charAt(0)!="#"&&(Q.l={Target:G}),n.dense?(e[y+a]||(e[y+a]=[]),e[y+a][S+i]=Q):e[Tn({c:S+i,r:y+a})]=Q,c.e.c<S+i&&(c.e.c=S+i),S+=A}}++y}return x.length&&(e["!merges"]=(e["!merges"]||[]).concat(x)),c.e.r=Math.max(c.e.r,y-1+a),e["!ref"]=Kn(c),y>=d&&(e["!fullref"]=Kn((c.e.r=l.length-k+y-1+a,c))),e}function qG(e,t){var r=t||{},n=r.dense?[]:{};return zG(n,e,t)}function cCe(e,t){return Tf(qG(e,t),t)}function XM(e){var t="",r=dCe(e);return r&&(t=r(e).getPropertyValue("display")),t||(t=e.style&&e.style.display),t==="none"}function dCe(e){return e.ownerDocument.defaultView&&typeof e.ownerDocument.defaultView.getComputedStyle=="function"?e.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function uCe(e){var t=e.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(n,a){return Array(parseInt(a,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),r=Pa(t.replace(/<[^>]*>/g,""));return[r]}var YM={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function HG(e,t){var r=t||{},n=iE(e),a=[],i,o,l={name:""},d="",c=0,u,x,b={},g=[],k=r.dense?[]:{},y,N,S={value:""},O="",A=0,P=[],q=-1,W=-1,R={s:{r:1e6,c:1e7},e:{r:0,c:0}},U=0,L={},Q=[],H={},G=0,Z=0,te=[],se=1,ue=1,ae=[],pe={Names:[]},ve={},Pe=["",""],xe=[],B={},re="",J=0,ie=!1,Y=!1,_e=0;for(Ob.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");y=Ob.exec(n);)switch(y[3]=y[3].replace(/_.*$/,"")){case"table":case"":y[1]==="/"?(R.e.c>=R.s.c&&R.e.r>=R.s.r?k["!ref"]=Kn(R):k["!ref"]="A1:A1",r.sheetRows>0&&r.sheetRows<=R.e.r&&(k["!fullref"]=k["!ref"],R.e.r=r.sheetRows-1,k["!ref"]=Kn(R)),Q.length&&(k["!merges"]=Q),te.length&&(k["!rows"]=te),u.name=u.||u.name,typeof JSON<"u"&&JSON.stringify(u),g.push(u.name),b[u.name]=k,Y=!1):y[0].charAt(y[0].length-2)!=="/"&&(u=In(y[0],!1),q=W=-1,R.s.r=R.s.c=1e7,R.e.r=R.e.c=0,k=r.dense?[]:{},Q=[],te=[],Y=!0);break;case"table-row-group":y[1]==="/"?--U:++U;break;case"table-row":case"":if(y[1]==="/"){q+=se,se=1;break}if(x=In(y[0],!1),x.?q=x.-1:q==-1&&(q=0),se=+x["number-rows-repeated"]||1,se<10)for(_e=0;_e<se;++_e)U>0&&(te[q+_e]={level:U});W=-1;break;case"covered-table-cell":y[1]!=="/"&&++W,r.sheetStubs&&(r.dense?(k[q]||(k[q]=[]),k[q][W]={t:"z"}):k[Tn({r:q,c:W})]={t:"z"}),O="",P=[];break;case"table-cell":case"":if(y[0].charAt(y[0].length-2)==="/")++W,S=In(y[0],!1),ue=parseInt(S["number-columns-repeated"]||"1",10),N={t:"z",v:null},S.formula&&r.cellFormula!=!1&&(N.f=VM(Pa(S.formula))),(S.||S["value-type"])=="string"&&(N.t="s",N.v=Pa(S["string-value"]||""),r.dense?(k[q]||(k[q]=[]),k[q][W]=N):k[Tn({r:q,c:W})]=N),W+=ue-1;else if(y[1]!=="/"){++W,O="",A=0,P=[],ue=1;var me=se?q+se-1:q;if(W>R.e.c&&(R.e.c=W),W<R.s.c&&(R.s.c=W),q<R.s.r&&(R.s.r=q),me>R.e.r&&(R.e.r=me),S=In(y[0],!1),xe=[],B={},N={t:S.||S["value-type"],v:null},r.cellFormula)if(S.formula&&(S.formula=Pa(S.formula)),S["number-matrix-columns-spanned"]&&S["number-matrix-rows-spanned"]&&(G=parseInt(S["number-matrix-rows-spanned"],10)||0,Z=parseInt(S["number-matrix-columns-spanned"],10)||0,H={s:{r:q,c:W},e:{r:q+G-1,c:W+Z-1}},N.F=Kn(H),ae.push([H,N.F])),S.formula)N.f=VM(S.formula);else for(_e=0;_e<ae.length;++_e)q>=ae[_e][0].s.r&&q<=ae[_e][0].e.r&&W>=ae[_e][0].s.c&&W<=ae[_e][0].e.c&&(N.F=ae[_e][1]);switch((S["number-columns-spanned"]||S["number-rows-spanned"])&&(G=parseInt(S["number-rows-spanned"],10)||0,Z=parseInt(S["number-columns-spanned"],10)||0,H={s:{r:q,c:W},e:{r:q+G-1,c:W+Z-1}},Q.push(H)),S["number-columns-repeated"]&&(ue=parseInt(S["number-columns-repeated"],10)),N.t){case"boolean":N.t="b",N.v=Os(S["boolean-value"]);break;case"float":N.t="n",N.v=parseFloat(S.value);break;case"percentage":N.t="n",N.v=parseFloat(S.value);break;case"currency":N.t="n",N.v=parseFloat(S.value);break;case"date":N.t="d",N.v=Ds(S["date-value"]),r.cellDates||(N.t="n",N.v=ao(N.v)),N.z="m/d/yy";break;case"time":N.t="n",N.v=Fye(S["time-value"])/86400,r.cellDates&&(N.t="d",N.v=z5(N.v)),N.z="HH:MM:SS";break;case"number":N.t="n",N.v=parseFloat(S.);break;default:if(N.t==="string"||N.t==="text"||!N.t)N.t="s",S["string-value"]!=null&&(O=Pa(S["string-value"]),P=[]);else throw new Error("Unsupported value type "+N.t)}}else{if(ie=!1,N.t==="s"&&(N.v=O||"",P.length&&(N.R=P),ie=A==0),ve.Target&&(N.l=ve),xe.length>0&&(N.c=xe,xe=[]),O&&r.cellText!==!1&&(N.w=O),ie&&(N.t="z",delete N.v),(!ie||r.sheetStubs)&&!(r.sheetRows&&r.sheetRows<=q))for(var ne=0;ne<se;++ne){if(ue=parseInt(S["number-columns-repeated"]||"1",10),r.dense)for(k[q+ne]||(k[q+ne]=[]),k[q+ne][W]=ne==0?N:Ms(N);--ue>0;)k[q+ne][W+ue]=Ms(N);else for(k[Tn({r:q+ne,c:W})]=N;--ue>0;)k[Tn({r:q+ne,c:W+ue})]=Ms(N);R.e.c<=W&&(R.e.c=W)}ue=parseInt(S["number-columns-repeated"]||"1",10),W+=ue-1,ue=0,N={},O="",P=[]}ve={};break;case"document":case"document-content":case"":case"spreadsheet":case"":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(y[1]==="/"){if((i=a.pop())[0]!==y[3])throw"Bad state: "+i}else y[0].charAt(y[0].length-2)!=="/"&&a.push([y[3],!0]);break;case"annotation":if(y[1]==="/"){if((i=a.pop())[0]!==y[3])throw"Bad state: "+i;B.t=O,P.length&&(B.R=P),B.a=re,xe.push(B)}else y[0].charAt(y[0].length-2)!=="/"&&a.push([y[3],!1]);re="",J=0,O="",A=0,P=[];break;case"creator":y[1]==="/"?re=n.slice(J,y.index):J=y.index+y[0].length;break;case"meta":case"":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(y[1]==="/"){if((i=a.pop())[0]!==y[3])throw"Bad state: "+i}else y[0].charAt(y[0].length-2)!=="/"&&a.push([y[3],!1]);O="",A=0,P=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(y[1]==="/"){if(L[l.name]=d,(i=a.pop())[0]!==y[3])throw"Bad state: "+i}else y[0].charAt(y[0].length-2)!=="/"&&(d="",l=In(y[0],!1),a.push([y[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(a[a.length-1][0]){case"time-style":case"date-style":o=In(y[0],!1),d+=YM[y[3]][o.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(a[a.length-1][0]){case"time-style":case"date-style":o=In(y[0],!1),d+=YM[y[3]][o.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(y[0].slice(-2)==="/>")break;if(y[1]==="/")switch(a[a.length-1][0]){case"number-style":case"date-style":case"time-style":d+=n.slice(c,y.index);break}else c=y.index+y[0].length;break;case"named-range":o=In(y[0],!1),Pe=g_(o["cell-range-address"]);var je={Name:o.name,Ref:Pe[0]+"!"+Pe[1]};Y&&(je.Sheet=g.length),pe.Names.push(je);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"":if(["master-styles"].indexOf(a[a.length-1][0])>-1)break;if(y[1]==="/"&&(!S||!S["string-value"])){var De=uCe(n.slice(A,y.index));O=(O.length>0?O+`
`:"")+De[0]}else In(y[0],!1),A=y.index+y[0].length;break;case"s":break;case"database-range":if(y[1]==="/")break;try{Pe=g_(In(y[0])["target-range-address"]),b[Pe[0]]["!autofilter"]={ref:Pe[1]}}catch{}break;case"date":break;case"object":break;case"title":case"":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(y[1]!=="/"){if(ve=In(y[0],!1),!ve.href)break;ve.Target=Pa(ve.href),delete ve.href,ve.Target.charAt(0)=="#"&&ve.Target.indexOf(".")>-1?(Pe=g_(ve.Target.slice(1)),ve.Target="#"+Pe[0]+"!"+Pe[1]):ve.Target.match(/^\.\.[\\\/]/)&&(ve.Target=ve.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(y[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case":":case":":break;default:if(r.WTF)throw new Error(y)}}var ce={Sheets:b,SheetNames:g,Workbook:pe};return r.bookSheets&&delete ce.Sheets,ce}function QM(e,t){t=t||{},fd(e,"META-INF/manifest.xml")&&Fwe(Bi(e,"META-INF/manifest.xml"),t);var r=Dc(e,"content.xml");if(!r)throw new Error("Missing content.xml in ODS / UOF file");var n=HG(ls(r),t);return fd(e,"meta.xml")&&(n.Props=IW(Bi(e,"meta.xml"))),n}function ZM(e,t){return HG(e,t)}var hCe=(function(){var e=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),t="<office:document-styles "+Tb({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+e+"</office:document-styles>";return function(){return Di+t}})(),JM=(function(){var e=function(i){return Ja(i).replace(/  +/g,function(o){return'<text:s text:c="'+o.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},t=`          <table:table-cell />
`,r=`          <table:covered-table-cell/>
`,n=function(i,o,l){var d=[];d.push('      <table:table table:name="'+Ja(o.SheetNames[l])+`" table:style-name="ta1">
`);var c=0,u=0,x=dc(i["!ref"]||"A1"),b=i["!merges"]||[],g=0,k=Array.isArray(i);if(i["!cols"])for(u=0;u<=x.e.c;++u)d.push("        <table:table-column"+(i["!cols"][u]?' table:style-name="co'+i["!cols"][u].ods+'"':"")+`></table:table-column>
`);var y="",N=i["!rows"]||[];for(c=0;c<x.s.r;++c)y=N[c]?' table:style-name="ro'+N[c].ods+'"':"",d.push("        <table:table-row"+y+`></table:table-row>
`);for(;c<=x.e.r;++c){for(y=N[c]?' table:style-name="ro'+N[c].ods+'"':"",d.push("        <table:table-row"+y+`>
`),u=0;u<x.s.c;++u)d.push(t);for(;u<=x.e.c;++u){var S=!1,O={},A="";for(g=0;g!=b.length;++g)if(!(b[g].s.c>u)&&!(b[g].s.r>c)&&!(b[g].e.c<u)&&!(b[g].e.r<c)){(b[g].s.c!=u||b[g].s.r!=c)&&(S=!0),O["table:number-columns-spanned"]=b[g].e.c-b[g].s.c+1,O["table:number-rows-spanned"]=b[g].e.r-b[g].s.r+1;break}if(S){d.push(r);continue}var P=Tn({r:c,c:u}),q=k?(i[c]||[])[u]:i[P];if(q&&q.f&&(O["table:formula"]=Ja(P_e(q.f)),q.F&&q.F.slice(0,P.length)==P)){var W=dc(q.F);O["table:number-matrix-columns-spanned"]=W.e.c-W.s.c+1,O["table:number-matrix-rows-spanned"]=W.e.r-W.s.r+1}if(!q){d.push(t);continue}switch(q.t){case"b":A=q.v?"TRUE":"FALSE",O["office:value-type"]="boolean",O["office:boolean-value"]=q.v?"true":"false";break;case"n":A=q.w||String(q.v||0),O["office:value-type"]="float",O["office:value"]=q.v||0;break;case"s":case"str":A=q.v==null?"":q.v,O["office:value-type"]="string";break;case"d":A=q.w||Ds(q.v).toISOString(),O["office:value-type"]="date",O["office:date-value"]=Ds(q.v).toISOString(),O["table:style-name"]="ce1";break;default:d.push(t);continue}var R=e(A);if(q.l&&q.l.Target){var U=q.l.Target;U=U.charAt(0)=="#"?"#"+I_e(U.slice(1)):U,U.charAt(0)!="#"&&!U.match(/^\w+:/)&&(U="../"+U),R=kr("text:a",R,{"xlink:href":U.replace(/&/g,"&amp;")})}d.push("          "+kr("table:table-cell",kr("text:p",R,{}),O)+`
`)}d.push(`        </table:table-row>
`)}return d.push(`      </table:table>
`),d.join("")},a=function(i,o){i.push(` <office:automatic-styles>
`),i.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),i.push(`   <number:month number:style="long"/>
`),i.push(`   <number:text>/</number:text>
`),i.push(`   <number:day number:style="long"/>
`),i.push(`   <number:text>/</number:text>
`),i.push(`   <number:year/>
`),i.push(`  </number:date-style>
`);var l=0;o.SheetNames.map(function(c){return o.Sheets[c]}).forEach(function(c){if(c&&c["!cols"]){for(var u=0;u<c["!cols"].length;++u)if(c["!cols"][u]){var x=c["!cols"][u];if(x.width==null&&x.wpx==null&&x.wch==null)continue;yf(x),x.ods=l;var b=c["!cols"][u].wpx+"px";i.push('  <style:style style:name="co'+l+`" style:family="table-column">
`),i.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+b+`"/>
`),i.push(`  </style:style>
`),++l}}});var d=0;o.SheetNames.map(function(c){return o.Sheets[c]}).forEach(function(c){if(c&&c["!rows"]){for(var u=0;u<c["!rows"].length;++u)if(c["!rows"][u]){c["!rows"][u].ods=d;var x=c["!rows"][u].hpx+"px";i.push('  <style:style style:name="ro'+d+`" style:family="table-row">
`),i.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+x+`"/>
`),i.push(`  </style:style>
`),++d}}}),i.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),i.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),i.push(`  </style:style>
`),i.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),i.push(` </office:automatic-styles>
`)};return function(o,l){var d=[Di],c=Tb({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),u=Tb({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});l.bookType=="fods"?(d.push("<office:document"+c+u+`>
`),d.push(PW().replace(/office:document-meta/g,"office:meta"))):d.push("<office:document-content"+c+`>
`),a(d,o),d.push(`  <office:body>
`),d.push(`    <office:spreadsheet>
`);for(var x=0;x!=o.SheetNames.length;++x)d.push(n(o.Sheets[o.SheetNames[x]],o,x));return d.push(`    </office:spreadsheet>
`),d.push(`  </office:body>
`),l.bookType=="fods"?d.push("</office:document>"):d.push("</office:document-content>"),d.join("")}})();function $G(e,t){if(t.bookType=="fods")return JM(e,t);var r=rE(),n="",a=[],i=[];return n="mimetype",Qn(r,n,"application/vnd.oasis.opendocument.spreadsheet"),n="content.xml",Qn(r,n,JM(e,t)),a.push([n,"text/xml"]),i.push([n,"ContentFile"]),n="styles.xml",Qn(r,n,hCe(e,t)),a.push([n,"text/xml"]),i.push([n,"StylesFile"]),n="meta.xml",Qn(r,n,Di+PW()),a.push([n,"text/xml"]),i.push([n,"MetadataFile"]),n="manifest.rdf",Qn(r,n,zwe(i)),a.push([n,"application/rdf+xml"]),n="META-INF/manifest.xml",Qn(r,n,Bwe(a)),r}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function rx(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function Kj(e){return typeof TextDecoder<"u"?new TextDecoder().decode(e):ls(Ef(e))}function fCe(e){return typeof TextEncoder<"u"?new TextEncoder().encode(e):Ic(Hu(e))}function mCe(e,t){e:for(var r=0;r<=e.length-t.length;++r){for(var n=0;n<t.length;++n)if(e[r+n]!=t[n])continue e;return!0}return!1}function kf(e){var t=e.reduce(function(a,i){return a+i.length},0),r=new Uint8Array(t),n=0;return e.forEach(function(a){r.set(a,n),n+=a.length}),r}function eL(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),(e+(e>>4)&252645135)*16843009>>>24}function xCe(e,t){for(var r=(e[t+15]&127)<<7|e[t+14]>>1,n=e[t+14]&1,a=t+13;a>=t;--a)n=n*256+e[a];return(e[t+15]&128?-n:n)*Math.pow(10,r-6176)}function pCe(e,t,r){var n=Math.floor(r==0?0:Math.LOG10E*Math.log(Math.abs(r)))+6176-20,a=r/Math.pow(10,n-6176);e[t+15]|=n>>7,e[t+14]|=(n&127)<<1;for(var i=0;a>=1;++i,a/=256)e[t+i]=a&255;e[t+15]|=r>=0?0:128}function Fb(e,t){var r=t?t[0]:0,n=e[r]&127;e:if(e[r++]>=128&&(n|=(e[r]&127)<<7,e[r++]<128||(n|=(e[r]&127)<<14,e[r++]<128)||(n|=(e[r]&127)<<21,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,28),++r,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,35),++r,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,42),++r,e[r++]<128)))break e;return t&&(t[0]=r),n}function Xa(e){var t=new Uint8Array(7);t[0]=e&127;var r=1;e:if(e>127){if(t[r-1]|=128,t[r]=e>>7&127,++r,e<=16383||(t[r-1]|=128,t[r]=e>>14&127,++r,e<=2097151)||(t[r-1]|=128,t[r]=e>>21&127,++r,e<=268435455)||(t[r-1]|=128,t[r]=e/256>>>21&127,++r,e<=34359738367)||(t[r-1]|=128,t[r]=e/65536>>>21&127,++r,e<=4398046511103))break e;t[r-1]|=128,t[r]=e/16777216>>>21&127,++r}return t.slice(0,r)}function xi(e){var t=0,r=e[t]&127;e:if(e[t++]>=128){if(r|=(e[t]&127)<<7,e[t++]<128||(r|=(e[t]&127)<<14,e[t++]<128)||(r|=(e[t]&127)<<21,e[t++]<128))break e;r|=(e[t]&127)<<28}return r}function Ra(e){for(var t=[],r=[0];r[0]<e.length;){var n=r[0],a=Fb(e,r),i=a&7;a=Math.floor(a/8);var o=0,l;if(a==0)break;switch(i){case 0:{for(var d=r[0];e[r[0]++]>=128;);l=e.slice(d,r[0])}break;case 5:o=4,l=e.slice(r[0],r[0]+o),r[0]+=o;break;case 1:o=8,l=e.slice(r[0],r[0]+o),r[0]+=o;break;case 2:o=Fb(e,r),l=e.slice(r[0],r[0]+o),r[0]+=o;break;case 3:case 4:default:throw new Error("PB Type ".concat(i," for Field ").concat(a," at offset ").concat(n))}var c={data:l,type:i};t[a]==null?t[a]=[c]:t[a].push(c)}return t}function Ro(e){var t=[];return e.forEach(function(r,n){r.forEach(function(a){a.data&&(t.push(Xa(n*8+a.type)),a.type==2&&t.push(Xa(a.data.length)),t.push(a.data))})}),kf(t)}function EE(e,t){return(e==null?void 0:e.map(function(r){return t(r.data)}))||[]}function ud(e){for(var t,r=[],n=[0];n[0]<e.length;){var a=Fb(e,n),i=Ra(e.slice(n[0],n[0]+a));n[0]+=a;var o={id:xi(i[1][0].data),messages:[]};i[2].forEach(function(l){var d=Ra(l.data),c=xi(d[3][0].data);o.messages.push({meta:d,data:e.slice(n[0],n[0]+c)}),n[0]+=c}),(t=i[3])!=null&&t[0]&&(o.merge=xi(i[3][0].data)>>>0>0),r.push(o)}return r}function i1(e){var t=[];return e.forEach(function(r){var n=[];n[1]=[{data:Xa(r.id),type:0}],n[2]=[],r.merge!=null&&(n[3]=[{data:Xa(+!!r.merge),type:0}]);var a=[];r.messages.forEach(function(o){a.push(o.data),o.meta[3]=[{type:0,data:Xa(o.data.length)}],n[2].push({data:Ro(o.meta),type:2})});var i=Ro(n);t.push(Xa(i.length)),t.push(i),a.forEach(function(o){return t.push(o)})}),kf(t)}function gCe(e,t){if(e!=0)throw new Error("Unexpected Snappy chunk type ".concat(e));for(var r=[0],n=Fb(t,r),a=[];r[0]<t.length;){var i=t[r[0]]&3;if(i==0){var o=t[r[0]++]>>2;if(o<60)++o;else{var l=o-59;o=t[r[0]],l>1&&(o|=t[r[0]+1]<<8),l>2&&(o|=t[r[0]+2]<<16),l>3&&(o|=t[r[0]+3]<<24),o>>>=0,o++,r[0]+=l}a.push(t.slice(r[0],r[0]+o)),r[0]+=o;continue}else{var d=0,c=0;if(i==1?(c=(t[r[0]]>>2&7)+4,d=(t[r[0]++]&224)<<3,d|=t[r[0]++]):(c=(t[r[0]++]>>2)+1,i==2?(d=t[r[0]]|t[r[0]+1]<<8,r[0]+=2):(d=(t[r[0]]|t[r[0]+1]<<8|t[r[0]+2]<<16|t[r[0]+3]<<24)>>>0,r[0]+=4)),a=[kf(a)],d==0)throw new Error("Invalid offset 0");if(d>a[0].length)throw new Error("Invalid offset beyond length");if(c>=d)for(a.push(a[0].slice(-d)),c-=d;c>=a[a.length-1].length;)a.push(a[a.length-1]),c-=a[a.length-1].length;a.push(a[0].slice(-d,-d+c))}}var u=kf(a);if(u.length!=n)throw new Error("Unexpected length: ".concat(u.length," != ").concat(n));return u}function hd(e){for(var t=[],r=0;r<e.length;){var n=e[r++],a=e[r]|e[r+1]<<8|e[r+2]<<16;r+=3,t.push(gCe(n,e.slice(r,r+a))),r+=a}if(r!==e.length)throw new Error("data is not a valid framed stream!");return kf(t)}function o1(e){for(var t=[],r=0;r<e.length;){var n=Math.min(e.length-r,268435455),a=new Uint8Array(4);t.push(a);var i=Xa(n),o=i.length;t.push(i),n<=60?(o++,t.push(new Uint8Array([n-1<<2]))):n<=256?(o+=2,t.push(new Uint8Array([240,n-1&255]))):n<=65536?(o+=3,t.push(new Uint8Array([244,n-1&255,n-1>>8&255]))):n<=16777216?(o+=4,t.push(new Uint8Array([248,n-1&255,n-1>>8&255,n-1>>16&255]))):n<=4294967296&&(o+=5,t.push(new Uint8Array([252,n-1&255,n-1>>8&255,n-1>>16&255,n-1>>>24&255]))),t.push(e.slice(r,r+n)),o+=n,a[0]=0,a[1]=o&255,a[2]=o>>8&255,a[3]=o>>16&255,r+=n}return kf(t)}function bCe(e,t,r,n){var a=rx(e),i=a.getUint32(4,!0),o=(n>1?12:8)+eL(i&(n>1?3470:398))*4,l=-1,d=-1,c=NaN,u=new Date(2001,0,1);i&512&&(l=a.getUint32(o,!0),o+=4),o+=eL(i&(n>1?12288:4096))*4,i&16&&(d=a.getUint32(o,!0),o+=4),i&32&&(c=a.getFloat64(o,!0),o+=8),i&64&&(u.setTime(u.getTime()+a.getFloat64(o,!0)*1e3),o+=8);var x;switch(e[2]){case 0:break;case 2:x={t:"n",v:c};break;case 3:x={t:"s",v:t[d]};break;case 5:x={t:"d",v:u};break;case 6:x={t:"b",v:c>0};break;case 7:x={t:"n",v:c/86400};break;case 8:x={t:"e",v:0};break;case 9:if(l>-1)x={t:"s",v:r[l]};else if(d>-1)x={t:"s",v:t[d]};else if(!isNaN(c))x={t:"n",v:c};else throw new Error("Unsupported cell type ".concat(e.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(e.slice(0,4)))}return x}function vCe(e,t,r){var n=rx(e),a=n.getUint32(8,!0),i=12,o=-1,l=-1,d=NaN,c=NaN,u=new Date(2001,0,1);a&1&&(d=xCe(e,i),i+=16),a&2&&(c=n.getFloat64(i,!0),i+=8),a&4&&(u.setTime(u.getTime()+n.getFloat64(i,!0)*1e3),i+=8),a&8&&(l=n.getUint32(i,!0),i+=4),a&16&&(o=n.getUint32(i,!0),i+=4);var x;switch(e[1]){case 0:break;case 2:x={t:"n",v:d};break;case 3:x={t:"s",v:t[l]};break;case 5:x={t:"d",v:u};break;case 6:x={t:"b",v:c>0};break;case 7:x={t:"n",v:c/86400};break;case 8:x={t:"e",v:0};break;case 9:if(o>-1)x={t:"s",v:r[o]};else throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(a&31," : ").concat(e.slice(0,4)));break;case 10:x={t:"n",v:d};break;default:throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(a&31," : ").concat(e.slice(0,4)))}return x}function v_(e,t){var r=new Uint8Array(32),n=rx(r),a=12,i=0;switch(r[0]=5,e.t){case"n":r[1]=2,pCe(r,a,e.v),i|=1,a+=16;break;case"b":r[1]=6,n.setFloat64(a,e.v?1:0,!0),i|=2,a+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[1]=3,n.setUint32(a,t.indexOf(e.v),!0),i|=8,a+=4;break;default:throw"unsupported cell type "+e.t}return n.setUint32(8,i,!0),r.slice(0,a)}function y_(e,t){var r=new Uint8Array(32),n=rx(r),a=12,i=0;switch(r[0]=3,e.t){case"n":r[2]=2,n.setFloat64(a,e.v,!0),i|=32,a+=8;break;case"b":r[2]=6,n.setFloat64(a,e.v?1:0,!0),i|=32,a+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[2]=3,n.setUint32(a,t.indexOf(e.v),!0),i|=16,a+=4;break;default:throw"unsupported cell type "+e.t}return n.setUint32(4,i,!0),r.slice(0,a)}function yCe(e,t,r){switch(e[0]){case 0:case 1:case 2:case 3:return bCe(e,t,r,e[0]);case 5:return vCe(e,t,r);default:throw new Error("Unsupported payload version ".concat(e[0]))}}function sl(e){var t=Ra(e);return Fb(t[1][0].data)}function tL(e,t){var r=Ra(t.data),n=xi(r[1][0].data),a=r[3],i=[];return(a||[]).forEach(function(o){var l=Ra(o.data),d=xi(l[1][0].data)>>>0;switch(n){case 1:i[d]=Kj(l[3][0].data);break;case 8:{var c=e[sl(l[9][0].data)][0],u=Ra(c.data),x=e[sl(u[1][0].data)][0],b=xi(x.meta[1][0].data);if(b!=2001)throw new Error("2000 unexpected reference to ".concat(b));var g=Ra(x.data);i[d]=g[3].map(function(k){return Kj(k.data)}).join("")}break}}),i}function wCe(e,t){var r,n,a,i,o,l,d,c,u,x,b,g,k,y,N=Ra(e),S=xi(N[1][0].data)>>>0,O=xi(N[2][0].data)>>>0,A=((n=(r=N[8])==null?void 0:r[0])==null?void 0:n.data)&&xi(N[8][0].data)>0||!1,P,q;if((i=(a=N[7])==null?void 0:a[0])!=null&&i.data&&t!=0)P=(l=(o=N[7])==null?void 0:o[0])==null?void 0:l.data,q=(c=(d=N[6])==null?void 0:d[0])==null?void 0:c.data;else if((x=(u=N[4])==null?void 0:u[0])!=null&&x.data&&t!=1)P=(g=(b=N[4])==null?void 0:b[0])==null?void 0:g.data,q=(y=(k=N[3])==null?void 0:k[0])==null?void 0:y.data;else throw"NUMBERS Tile missing ".concat(t," cell storage");for(var W=A?4:1,R=rx(P),U=[],L=0;L<P.length/2;++L){var Q=R.getUint16(L*2,!0);Q<65535&&U.push([L,Q])}if(U.length!=O)throw"Expected ".concat(O," cells, found ").concat(U.length);var H=[];for(L=0;L<U.length-1;++L)H[U[L][0]]=q.subarray(U[L][1]*W,U[L+1][1]*W);return U.length>=1&&(H[U[U.length-1][0]]=q.subarray(U[U.length-1][1]*W)),{R:S,cells:H}}function kCe(e,t){var r,n=Ra(t.data),a=(r=n==null?void 0:n[7])!=null&&r[0]?xi(n[7][0].data)>>>0>0?1:0:-1,i=EE(n[5],function(o){return wCe(o,a)});return{nrows:xi(n[4][0].data)>>>0,data:i.reduce(function(o,l){return o[l.R]||(o[l.R]=[]),l.cells.forEach(function(d,c){if(o[l.R][c])throw new Error("Duplicate cell r=".concat(l.R," c=").concat(c));o[l.R][c]=d}),o},[])}}function NCe(e,t,r){var n,a=Ra(t.data),i={s:{r:0,c:0},e:{r:0,c:0}};if(i.e.r=(xi(a[6][0].data)>>>0)-1,i.e.r<0)throw new Error("Invalid row varint ".concat(a[6][0].data));if(i.e.c=(xi(a[7][0].data)>>>0)-1,i.e.c<0)throw new Error("Invalid col varint ".concat(a[7][0].data));r["!ref"]=Kn(i);var o=Ra(a[4][0].data),l=tL(e,e[sl(o[4][0].data)][0]),d=(n=o[17])!=null&&n[0]?tL(e,e[sl(o[17][0].data)][0]):[],c=Ra(o[3][0].data),u=0;c[1].forEach(function(x){var b=Ra(x.data),g=e[sl(b[2][0].data)][0],k=xi(g.meta[1][0].data);if(k!=6002)throw new Error("6001 unexpected reference to ".concat(k));var y=kCe(e,g);y.data.forEach(function(N,S){N.forEach(function(O,A){var P=Tn({r:u+S,c:A}),q=yCe(O,l,d);q&&(r[P]=q)})}),u+=y.nrows})}function _Ce(e,t){var r=Ra(t.data),n={"!ref":"A1"},a=e[sl(r[2][0].data)],i=xi(a[0].meta[1][0].data);if(i!=6001)throw new Error("6000 unexpected reference to ".concat(i));return NCe(e,a[0],n),n}function SCe(e,t){var r,n=Ra(t.data),a={name:(r=n[1])!=null&&r[0]?Kj(n[1][0].data):"",sheets:[]},i=EE(n[2],sl);return i.forEach(function(o){e[o].forEach(function(l){var d=xi(l.meta[1][0].data);d==6e3&&a.sheets.push(_Ce(e,l))})}),a}function jCe(e,t){var r=DE(),n=Ra(t.data),a=EE(n[1],sl);if(a.forEach(function(i){e[i].forEach(function(o){var l=xi(o.meta[1][0].data);if(l==2){var d=SCe(e,o);d.sheets.forEach(function(c,u){ME(r,c,u==0?d.name:d.name+"_"+u,!0)})}})}),r.SheetNames.length==0)throw new Error("Empty NUMBERS file");return r}function w_(e){var t,r,n,a,i={},o=[];if(e.FullPaths.forEach(function(d){if(d.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),e.FileIndex.forEach(function(d){if(d.name.match(/\.iwa$/)){var c;try{c=hd(d.content)}catch(x){return console.log("?? "+d.content.length+" "+(x.message||x))}var u;try{u=ud(c)}catch(x){return console.log("## "+(x.message||x))}u.forEach(function(x){i[x.id]=x.messages,o.push(x.id)})}}),!o.length)throw new Error("File has no messages");var l=((a=(n=(r=(t=i==null?void 0:i[1])==null?void 0:t[0])==null?void 0:r.meta)==null?void 0:n[1])==null?void 0:a[0].data)&&xi(i[1][0].meta[1][0].data)==1&&i[1][0];if(l||o.forEach(function(d){i[d].forEach(function(c){var u=xi(c.meta[1][0].data)>>>0;if(u==1)if(!l)l=c;else throw new Error("Document has multiple roots")})}),!l)throw new Error("Cannot find Document root");return jCe(i,l)}function CCe(e,t,r){var n,a,i,o;if(!((n=e[6])!=null&&n[0])||!((a=e[7])!=null&&a[0]))throw"Mutation only works on post-BNC storages!";var l=((o=(i=e[8])==null?void 0:i[0])==null?void 0:o.data)&&xi(e[8][0].data)>0||!1;if(l)throw"Math only works with normal offsets";for(var d=0,c=rx(e[7][0].data),u=0,x=[],b=rx(e[4][0].data),g=0,k=[],y=0;y<t.length;++y){if(t[y]==null){c.setUint16(y*2,65535,!0),b.setUint16(y*2,65535);continue}c.setUint16(y*2,u,!0),b.setUint16(y*2,g,!0);var N,S;switch(typeof t[y]){case"string":N=v_({t:"s",v:t[y]},r),S=y_({t:"s",v:t[y]},r);break;case"number":N=v_({t:"n",v:t[y]},r),S=y_({t:"n",v:t[y]},r);break;case"boolean":N=v_({t:"b",v:t[y]},r),S=y_({t:"b",v:t[y]},r);break;default:throw new Error("Unsupported value "+t[y])}x.push(N),u+=N.length,k.push(S),g+=S.length,++d}for(e[2][0].data=Xa(d);y<e[7][0].data.length/2;++y)c.setUint16(y*2,65535,!0),b.setUint16(y*2,65535,!0);return e[6][0].data=kf(x),e[3][0].data=kf(k),d}function ACe(e,t){if(!t||!t.numbers)throw new Error("Must pass a `numbers` option -- check the README");var r=e.Sheets[e.SheetNames[0]];e.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var n=dc(r["!ref"]);n.s.r=n.s.c=0;var a=!1;n.e.c>9&&(a=!0,n.e.c=9),n.e.r>49&&(a=!0,n.e.r=49),a&&console.error("The Numbers writer is currently limited to ".concat(Kn(n)));var i=Ak(r,{range:n,header:1}),o=["~Sh33tJ5~"];i.forEach(function(re){return re.forEach(function(J){typeof J=="string"&&o.push(J)})});var l={},d=[],c=yn.read(t.numbers,{type:"base64"});c.FileIndex.map(function(re,J){return[re,c.FullPaths[J]]}).forEach(function(re){var J=re[0],ie=re[1];if(J.type==2&&J.name.match(/\.iwa/)){var Y=J.content,_e=hd(Y),me=ud(_e);me.forEach(function(ne){d.push(ne.id),l[ne.id]={deps:[],location:ie,type:xi(ne.messages[0].meta[1][0].data)}})}}),d.sort(function(re,J){return re-J});var u=d.filter(function(re){return re>1}).map(function(re){return[re,Xa(re)]});c.FileIndex.map(function(re,J){return[re,c.FullPaths[J]]}).forEach(function(re){var J=re[0];if(re[1],!!J.name.match(/\.iwa/)){var ie=ud(hd(J.content));ie.forEach(function(Y){Y.messages.forEach(function(_e){u.forEach(function(me){Y.messages.some(function(ne){return xi(ne.meta[1][0].data)!=11006&&mCe(ne.data,me[1])})&&l[me[0]].deps.push(Y.id)})})})}});for(var x=yn.find(c,l[1].location),b=ud(hd(x.content)),g,k=0;k<b.length;++k){var y=b[k];y.id==1&&(g=y)}var N=sl(Ra(g.messages[0].data)[1][0].data);for(x=yn.find(c,l[N].location),b=ud(hd(x.content)),k=0;k<b.length;++k)y=b[k],y.id==N&&(g=y);for(N=sl(Ra(g.messages[0].data)[2][0].data),x=yn.find(c,l[N].location),b=ud(hd(x.content)),k=0;k<b.length;++k)y=b[k],y.id==N&&(g=y);for(N=sl(Ra(g.messages[0].data)[2][0].data),x=yn.find(c,l[N].location),b=ud(hd(x.content)),k=0;k<b.length;++k)y=b[k],y.id==N&&(g=y);var S=Ra(g.messages[0].data);{S[6][0].data=Xa(n.e.r+1),S[7][0].data=Xa(n.e.c+1);var O=sl(S[46][0].data),A=yn.find(c,l[O].location),P=ud(hd(A.content));{for(var q=0;q<P.length&&P[q].id!=O;++q);if(P[q].id!=O)throw"Bad ColumnRowUIDMapArchive";var W=Ra(P[q].messages[0].data);W[1]=[],W[2]=[],W[3]=[];for(var R=0;R<=n.e.c;++R){var U=[];U[1]=U[2]=[{type:0,data:Xa(R+420690)}],W[1].push({type:2,data:Ro(U)}),W[2].push({type:0,data:Xa(R)}),W[3].push({type:0,data:Xa(R)})}W[4]=[],W[5]=[],W[6]=[];for(var L=0;L<=n.e.r;++L)U=[],U[1]=U[2]=[{type:0,data:Xa(L+726270)}],W[4].push({type:2,data:Ro(U)}),W[5].push({type:0,data:Xa(L)}),W[6].push({type:0,data:Xa(L)});P[q].messages[0].data=Ro(W)}A.content=o1(i1(P)),A.size=A.content.length,delete S[46];var Q=Ra(S[4][0].data);{Q[7][0].data=Xa(n.e.r+1);var H=Ra(Q[1][0].data),G=sl(H[2][0].data);A=yn.find(c,l[G].location),P=ud(hd(A.content));{if(P[0].id!=G)throw"Bad HeaderStorageBucket";var Z=Ra(P[0].messages[0].data);for(L=0;L<i.length;++L){var te=Ra(Z[2][0].data);te[1][0].data=Xa(L),te[4][0].data=Xa(i[L].length),Z[2][L]={type:Z[2][0].type,data:Ro(te)}}P[0].messages[0].data=Ro(Z)}A.content=o1(i1(P)),A.size=A.content.length;var se=sl(Q[2][0].data);A=yn.find(c,l[se].location),P=ud(hd(A.content));{if(P[0].id!=se)throw"Bad HeaderStorageBucket";for(Z=Ra(P[0].messages[0].data),R=0;R<=n.e.c;++R)te=Ra(Z[2][0].data),te[1][0].data=Xa(R),te[4][0].data=Xa(n.e.r+1),Z[2][R]={type:Z[2][0].type,data:Ro(te)};P[0].messages[0].data=Ro(Z)}A.content=o1(i1(P)),A.size=A.content.length;var ue=sl(Q[4][0].data);(function(){for(var re=yn.find(c,l[ue].location),J=ud(hd(re.content)),ie,Y=0;Y<J.length;++Y){var _e=J[Y];_e.id==ue&&(ie=_e)}var me=Ra(ie.messages[0].data);{me[3]=[];var ne=[];o.forEach(function(ce,Ee){ne[1]=[{type:0,data:Xa(Ee)}],ne[2]=[{type:0,data:Xa(1)}],ne[3]=[{type:2,data:fCe(ce)}],me[3].push({type:2,data:Ro(ne)})})}ie.messages[0].data=Ro(me);var je=i1(J),De=o1(je);re.content=De,re.size=re.content.length})();var ae=Ra(Q[3][0].data);{var pe=ae[1][0];delete ae[2];var ve=Ra(pe.data);{var Pe=sl(ve[2][0].data);(function(){for(var re=yn.find(c,l[Pe].location),J=ud(hd(re.content)),ie,Y=0;Y<J.length;++Y){var _e=J[Y];_e.id==Pe&&(ie=_e)}var me=Ra(ie.messages[0].data);{delete me[6],delete ae[7];var ne=new Uint8Array(me[5][0].data);me[5]=[];for(var je=0,De=0;De<=n.e.r;++De){var ce=Ra(ne);je+=CCe(ce,i[De],o),ce[1][0].data=Xa(De),me[5].push({data:Ro(ce),type:2})}me[1]=[{type:0,data:Xa(n.e.c+1)}],me[2]=[{type:0,data:Xa(n.e.r+1)}],me[3]=[{type:0,data:Xa(je)}],me[4]=[{type:0,data:Xa(n.e.r+1)}]}ie.messages[0].data=Ro(me);var Ee=i1(J),be=o1(Ee);re.content=be,re.size=re.content.length})()}pe.data=Ro(ve)}Q[3][0].data=Ro(ae)}S[4][0].data=Ro(Q)}g.messages[0].data=Ro(S);var xe=i1(b),B=o1(xe);return x.content=B,x.size=x.content.length,c}function VG(e){return function(r){for(var n=0;n!=e.length;++n){var a=e[n];r[a[0]]===void 0&&(r[a[0]]=a[1]),a[2]==="n"&&(r[a[0]]=Number(r[a[0]]))}}}function TE(e){VG([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(e)}function OE(e){VG([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(e)}function ECe(e){return ca.WS.indexOf(e)>-1?"sheet":e==ca.CS?"chart":e==ca.DS?"dialog":e==ca.MS?"macro":e&&e.length?e:"sheet"}function TCe(e,t){if(!e)return 0;try{e=t.map(function(n){return n.id||(n.id=n.strRelID),[n.name,e["!id"][n.id].Target,ECe(e["!id"][n.id].Type)]})}catch{return null}return!e||e.length===0?null:e}function OCe(e,t,r,n,a,i,o,l,d,c,u,x){try{i[n]=Yg(Dc(e,r,!0),t);var b=Bi(e,t),g;switch(l){case"sheet":g=Jje(b,t,a,d,i[n],c,u,x);break;case"chart":if(g=e6e(b,t,a,d,i[n],c,u,x),!g||!g["!drawel"])break;var k=zg(g["!drawel"].Target,t),y=Pb(k),N=U3e(Dc(e,k,!0),Yg(Dc(e,y,!0),k)),S=zg(N,k),O=Pb(S);g=Cje(Dc(e,S,!0),S,d,Yg(Dc(e,O,!0),S),c,g);break;case"macro":g=t6e(b,t,a,d,i[n],c,u,x);break;case"dialog":g=r6e(b,t,a,d,i[n],c,u,x);break;default:throw new Error("Unrecognized sheet type "+l)}o[n]=g;var A=[];i&&i[n]&&gi(i[n]).forEach(function(P){var q="";if(i[n][P].Type==ca.CMNT){q=zg(i[n][P].Target,t);var W=i6e(Bi(e,q,!0),q,d);if(!W||!W.length)return;UM(g,W,!1)}i[n][P].Type==ca.TCMNT&&(q=zg(i[n][P].Target,t),A=A.concat(q3e(Bi(e,q,!0),d)))}),A&&A.length&&UM(g,A,!0,d.people||[])}catch(P){if(d.WTF)throw P}}function ld(e){return e.charAt(0)=="/"?e.slice(1):e}function PCe(e,t){if(Tp(),t=t||{},TE(t),fd(e,"META-INF/manifest.xml")||fd(e,"objectdata.xml"))return QM(e,t);if(fd(e,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof w_<"u"){if(e.FileIndex)return w_(e);var r=yn.utils.cfb_new();return oM(e).forEach(function(te){Qn(r,te,Hye(e,te))}),w_(r)}throw new Error("Unsupported NUMBERS file")}if(!fd(e,"[Content_Types].xml"))throw fd(e,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):fd(e,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var n=oM(e),a=Lwe(Dc(e,"[Content_Types].xml")),i=!1,o,l;if(a.workbooks.length===0&&(l="xl/workbook.xml",Bi(e,l,!0)&&a.workbooks.push(l)),a.workbooks.length===0){if(l="xl/workbook.bin",!Bi(e,l,!0))throw new Error("Could not find workbook");a.workbooks.push(l),i=!0}a.workbooks[0].slice(-3)=="bin"&&(i=!0);var d={},c={};if(!t.bookSheets&&!t.bookProps){if(Qg=[],a.sst)try{Qg=s6e(Bi(e,ld(a.sst)),a.sst,t)}catch(te){if(t.WTF)throw te}t.cellStyles&&a.themes.length&&(d=a6e(Dc(e,a.themes[0].replace(/^\//,""),!0)||"",a.themes[0],t)),a.style&&(c=n6e(Bi(e,ld(a.style)),a.style,d,t))}a.links.map(function(te){try{var se=Yg(Dc(e,Pb(ld(te))),te);return l6e(Bi(e,ld(te)),se,te,t)}catch{}});var u=Zje(Bi(e,ld(a.workbooks[0])),a.workbooks[0],t),x={},b="";a.coreprops.length&&(b=Bi(e,ld(a.coreprops[0]),!0),b&&(x=IW(b)),a.extprops.length!==0&&(b=Bi(e,ld(a.extprops[0]),!0),b&&Hwe(b,x,t)));var g={};(!t.bookSheets||t.bookProps)&&a.custprops.length!==0&&(b=Dc(e,ld(a.custprops[0]),!0),b&&(g=Vwe(b,t)));var k={};if((t.bookSheets||t.bookProps)&&(u.Sheets?o=u.Sheets.map(function(se){return se.name}):x.Worksheets&&x.SheetNames.length>0&&(o=x.SheetNames),t.bookProps&&(k.Props=x,k.Custprops=g),t.bookSheets&&typeof o<"u"&&(k.SheetNames=o),t.bookSheets?k.SheetNames:t.bookProps))return k;o={};var y={};t.bookDeps&&a.calcchain&&(y=o6e(Bi(e,ld(a.calcchain)),a.calcchain));var N=0,S={},O,A;{var P=u.Sheets;x.Worksheets=P.length,x.SheetNames=[];for(var q=0;q!=P.length;++q)x.SheetNames[q]=P[q].name}var W=i?"bin":"xml",R=a.workbooks[0].lastIndexOf("/"),U=(a.workbooks[0].slice(0,R+1)+"_rels/"+a.workbooks[0].slice(R+1)+".rels").replace(/^\//,"");fd(e,U)||(U="xl/_rels/workbook."+W+".rels");var L=Yg(Dc(e,U,!0),U.replace(/_rels.*/,"s5s"));(a.metadata||[]).length>=1&&(t.xlmeta=c6e(Bi(e,ld(a.metadata[0])),a.metadata[0],t)),(a.people||[]).length>=1&&(t.people=$3e(Bi(e,ld(a.people[0])),t)),L&&(L=TCe(L,u.Sheets));var Q=Bi(e,"xl/worksheets/sheet.xml",!0)?1:0;e:for(N=0;N!=x.Worksheets;++N){var H="sheet";if(L&&L[N]?(O="xl/"+L[N][1].replace(/[\/]?xl\//,""),fd(e,O)||(O=L[N][1]),fd(e,O)||(O=U.replace(/_rels\/.*$/,"")+L[N][1]),H=L[N][2]):(O="xl/worksheets/sheet"+(N+1-Q)+"."+W,O=O.replace(/sheet0\./,"sheet.")),A=O.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),t&&t.sheets!=null)switch(typeof t.sheets){case"number":if(N!=t.sheets)continue e;break;case"string":if(x.SheetNames[N].toLowerCase()!=t.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(t.sheets)){for(var G=!1,Z=0;Z!=t.sheets.length;++Z)typeof t.sheets[Z]=="number"&&t.sheets[Z]==N&&(G=1),typeof t.sheets[Z]=="string"&&t.sheets[Z].toLowerCase()==x.SheetNames[N].toLowerCase()&&(G=1);if(!G)continue e}}OCe(e,O,A,x.SheetNames[N],N,S,o,H,t,u,d,c)}return k={Directory:a,Workbook:u,Props:x,Custprops:g,Deps:y,Sheets:o,SheetNames:x.SheetNames,Strings:Qg,Styles:c,Themes:d,SSF:Ms(En)},t&&t.bookFiles&&(e.files?(k.keys=n,k.files=e.files):(k.keys=[],k.files={},e.FullPaths.forEach(function(te,se){te=te.replace(/^Root Entry[\/]/,""),k.keys.push(te),k.files[te]=e.FileIndex[se]}))),t&&t.bookVBA&&(a.vba.length>0?k.vbaraw=Bi(e,ld(a.vba[0]),!0):a.defaults&&a.defaults.bin===Z3e&&(k.vbaraw=Bi(e,"xl/vbaProject.bin",!0))),k}function ICe(e,t){var r=t||{},n="Workbook",a=yn.find(e,n);try{if(n="/!DataSpaces/Version",a=yn.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(c4e(a.content),n="/!DataSpaces/DataSpaceMap",a=yn.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var i=u4e(a.content);if(i.length!==1||i[0].comps.length!==1||i[0].comps[0].t!==0||i[0].name!=="StrongEncryptionDataSpace"||i[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",a=yn.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var o=h4e(a.content);if(o.length!=1||o[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",a=yn.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);m4e(a.content)}catch{}if(n="/EncryptionInfo",a=yn.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var l=x4e(a.content);if(n="/EncryptedPackage",a=yn.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(l[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(l[1],a.content,r.password||"",r);if(l[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(l[1],a.content,r.password||"",r);throw new Error("File is password-protected")}function DCe(e,t){return t.bookType=="ods"?$G(e,t):t.bookType=="numbers"?ACe(e,t):t.bookType=="xlsb"?MCe(e,t):LCe(e,t)}function MCe(e,t){k1=1024,e&&!e.SSF&&(e.SSF=Ms(En)),e&&e.SSF&&(Tp(),F5(e.SSF),t.revssf=U5(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,Zg?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r=t.bookType=="xlsb"?"bin":"xml",n=bG.indexOf(t.bookType)>-1,a=pE();OE(t=t||{});var i=rE(),o="",l=0;if(t.cellXfs=[],Of(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),o="docProps/core.xml",Qn(i,o,DW(e.Props,t)),a.coreprops.push(o),Ya(t.rels,2,o,ca.CORE_PROPS),o="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var d=[],c=0;c<e.SheetNames.length;++c)(e.Workbook.Sheets[c]||{}).Hidden!=2&&d.push(e.SheetNames[c]);e.Props.SheetNames=d}for(e.Props.Worksheets=e.Props.SheetNames.length,Qn(i,o,RW(e.Props)),a.extprops.push(o),Ya(t.rels,3,o,ca.EXT_PROPS),e.Custprops!==e.Props&&gi(e.Custprops||{}).length>0&&(o="docProps/custom.xml",Qn(i,o,FW(e.Custprops)),a.custprops.push(o),Ya(t.rels,4,o,ca.CUST_PROPS)),l=1;l<=e.SheetNames.length;++l){var u={"!id":{}},x=e.Sheets[e.SheetNames[l-1]],b=(x||{})["!type"]||"sheet";switch(b){case"chart":default:o="xl/worksheets/sheet"+l+"."+r,Qn(i,o,u6e(l-1,o,t,e,u)),a.sheets.push(o),Ya(t.wbrels,-1,"worksheets/sheet"+l+"."+r,ca.WS[0])}if(x){var g=x["!comments"],k=!1,y="";g&&g.length>0&&(y="xl/comments"+l+"."+r,Qn(i,y,m6e(g,y)),a.comments.push(y),Ya(u,-1,"../comments"+l+"."+r,ca.CMNT),k=!0),x["!legacy"]&&k&&Qn(i,"xl/drawings/vmlDrawing"+l+".vml",pG(l,x["!comments"])),delete x["!comments"],delete x["!legacy"]}u["!id"].rId1&&Qn(i,Pb(o),T1(u))}return t.Strings!=null&&t.Strings.length>0&&(o="xl/sharedStrings."+r,Qn(i,o,f6e(t.Strings,o,t)),a.strs.push(o),Ya(t.wbrels,-1,"sharedStrings."+r,ca.SST)),o="xl/workbook."+r,Qn(i,o,d6e(e,o)),a.workbooks.push(o),Ya(t.rels,1,o,ca.WB),o="xl/theme/theme1.xml",Qn(i,o,kE(e.Themes,t)),a.themes.push(o),Ya(t.wbrels,-1,"theme/theme1.xml",ca.THEME),o="xl/styles."+r,Qn(i,o,h6e(e,o,t)),a.styles.push(o),Ya(t.wbrels,-1,"styles."+r,ca.STY),e.vbaraw&&n&&(o="xl/vbaProject.bin",Qn(i,o,e.vbaraw),a.vba.push(o),Ya(t.wbrels,-1,"vbaProject.bin",ca.VBA)),o="xl/metadata."+r,Qn(i,o,x6e(o)),a.metadata.push(o),Ya(t.wbrels,-1,"metadata."+r,ca.XLMETA),Qn(i,"[Content_Types].xml",OW(a,t)),Qn(i,"_rels/.rels",T1(t.rels)),Qn(i,"xl/_rels/workbook."+r+".rels",T1(t.wbrels)),delete t.revssf,delete t.ssf,i}function LCe(e,t){k1=1024,e&&!e.SSF&&(e.SSF=Ms(En)),e&&e.SSF&&(Tp(),F5(e.SSF),t.revssf=U5(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,Zg?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r="xml",n=bG.indexOf(t.bookType)>-1,a=pE();OE(t=t||{});var i=rE(),o="",l=0;if(t.cellXfs=[],Of(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),o="docProps/core.xml",Qn(i,o,DW(e.Props,t)),a.coreprops.push(o),Ya(t.rels,2,o,ca.CORE_PROPS),o="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var d=[],c=0;c<e.SheetNames.length;++c)(e.Workbook.Sheets[c]||{}).Hidden!=2&&d.push(e.SheetNames[c]);e.Props.SheetNames=d}e.Props.Worksheets=e.Props.SheetNames.length,Qn(i,o,RW(e.Props)),a.extprops.push(o),Ya(t.rels,3,o,ca.EXT_PROPS),e.Custprops!==e.Props&&gi(e.Custprops||{}).length>0&&(o="docProps/custom.xml",Qn(i,o,FW(e.Custprops)),a.custprops.push(o),Ya(t.rels,4,o,ca.CUST_PROPS));var u=["SheetJ5"];for(t.tcid=0,l=1;l<=e.SheetNames.length;++l){var x={"!id":{}},b=e.Sheets[e.SheetNames[l-1]],g=(b||{})["!type"]||"sheet";switch(g){case"chart":default:o="xl/worksheets/sheet"+l+"."+r,Qn(i,o,EG(l-1,t,e,x)),a.sheets.push(o),Ya(t.wbrels,-1,"worksheets/sheet"+l+"."+r,ca.WS[0])}if(b){var k=b["!comments"],y=!1,N="";if(k&&k.length>0){var S=!1;k.forEach(function(O){O[1].forEach(function(A){A.T==!0&&(S=!0)})}),S&&(N="xl/threadedComments/threadedComment"+l+"."+r,Qn(i,N,H3e(k,u,t)),a.threadedcomments.push(N),Ya(x,-1,"../threadedComments/threadedComment"+l+"."+r,ca.TCMNT)),N="xl/comments"+l+"."+r,Qn(i,N,gG(k)),a.comments.push(N),Ya(x,-1,"../comments"+l+"."+r,ca.CMNT),y=!0}b["!legacy"]&&y&&Qn(i,"xl/drawings/vmlDrawing"+l+".vml",pG(l,b["!comments"])),delete b["!comments"],delete b["!legacy"]}x["!id"].rId1&&Qn(i,Pb(o),T1(x))}return t.Strings!=null&&t.Strings.length>0&&(o="xl/sharedStrings."+r,Qn(i,o,aG(t.Strings,t)),a.strs.push(o),Ya(t.wbrels,-1,"sharedStrings."+r,ca.SST)),o="xl/workbook."+r,Qn(i,o,DG(e)),a.workbooks.push(o),Ya(t.rels,1,o,ca.WB),o="xl/theme/theme1.xml",Qn(i,o,kE(e.Themes,t)),a.themes.push(o),Ya(t.wbrels,-1,"theme/theme1.xml",ca.THEME),o="xl/styles."+r,Qn(i,o,hG(e,t)),a.styles.push(o),Ya(t.wbrels,-1,"styles."+r,ca.STY),e.vbaraw&&n&&(o="xl/vbaProject.bin",Qn(i,o,e.vbaraw),a.vba.push(o),Ya(t.wbrels,-1,"vbaProject.bin",ca.VBA)),o="xl/metadata."+r,Qn(i,o,xG()),a.metadata.push(o),Ya(t.wbrels,-1,"metadata."+r,ca.XLMETA),u.length>1&&(o="xl/persons/person.xml",Qn(i,o,V3e(u)),a.people.push(o),Ya(t.wbrels,-1,"persons/person.xml",ca.PEOPLE)),Qn(i,"[Content_Types].xml",OW(a,t)),Qn(i,"_rels/.rels",T1(t.rels)),Qn(i,"xl/_rels/workbook."+r+".rels",T1(t.wbrels)),delete t.revssf,delete t.ssf,i}function PE(e,t){var r="";switch((t||{}).type||"base64"){case"buffer":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];case"base64":r=Uc(e.slice(0,12));break;case"binary":r=e;break;case"array":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];default:throw new Error("Unrecognized type "+(t&&t.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function RCe(e,t){return yn.find(e,"EncryptedPackage")?ICe(e,t):FG(e,t)}function FCe(e,t){var r,n=e,a=t||{};return a.type||(a.type=sa&&Buffer.isBuffer(e)?"buffer":"base64"),r=iW(n,a),PCe(r,a)}function WG(e,t){var r=0;e:for(;r<e.length;)switch(e.charCodeAt(r)){case 10:case 13:case 32:++r;break;case 60:return Wj(e.slice(r),t);default:break e}return op.to_workbook(e,t)}function BCe(e,t){var r="",n=PE(e,t);switch(t.type){case"base64":r=Uc(e);break;case"binary":r=e;break;case"buffer":r=e.toString("binary");break;case"array":r=Zm(e);break;default:throw new Error("Unrecognized type "+t.type)}return n[0]==239&&n[1]==187&&n[2]==191&&(r=ls(r)),t.type="binary",WG(r,t)}function UCe(e,t){var r=e;return t.type=="base64"&&(r=Uc(r)),r=jb.utils.decode(1200,r.slice(2),"str"),t.type="binary",WG(r,t)}function zCe(e){return e.match(/[^\x00-\x7F]/)?Hu(e):e}function k_(e,t,r,n){return n?(r.type="string",op.to_workbook(e,r)):op.to_workbook(t,r)}function Xj(e,t){QA();var r=t||{};if(typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer)return Xj(new Uint8Array(e),(r=Ms(r),r.type="array",r));typeof Uint8Array<"u"&&e instanceof Uint8Array&&!r.type&&(r.type=typeof Deno<"u"?"buffer":"array");var n=e,a=[0,0,0,0],i=!1;if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),P1={},r.dateNF&&(P1.dateNF=r.dateNF),r.type||(r.type=sa&&Buffer.isBuffer(e)?"buffer":"base64"),r.type=="file"&&(r.type=sa?"buffer":"binary",n=Mye(e),typeof Uint8Array<"u"&&!sa&&(r.type="array")),r.type=="string"&&(i=!0,r.type="binary",r.codepage=65001,n=zCe(e)),r.type=="array"&&typeof Uint8Array<"u"&&e instanceof Uint8Array&&typeof ArrayBuffer<"u"){var o=new ArrayBuffer(3),l=new Uint8Array(o);if(l.foo="bar",!l.foo)return r=Ms(r),r.type="array",Xj(ZA(n),r)}switch((a=PE(n,r))[0]){case 208:if(a[1]===207&&a[2]===17&&a[3]===224&&a[4]===161&&a[5]===177&&a[6]===26&&a[7]===225)return RCe(yn.read(n,r),r);break;case 9:if(a[1]<=8)return FG(n,r);break;case 60:return Wj(n,r);case 73:if(a[1]===73&&a[2]===42&&a[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(a[1]===68)return W5e(n,r);break;case 84:if(a[1]===65&&a[2]===66&&a[3]===76)return rG.to_workbook(n,r);break;case 80:return a[1]===75&&a[2]<9&&a[3]<9?FCe(n,r):k_(e,n,r,i);case 239:return a[3]===60?Wj(n,r):k_(e,n,r,i);case 255:if(a[1]===254)return UCe(n,r);if(a[1]===0&&a[2]===2&&a[3]===0)return Tm.to_workbook(n,r);break;case 0:if(a[1]===0&&(a[2]>=2&&a[3]===0||a[2]===0&&(a[3]===8||a[3]===9)))return Tm.to_workbook(n,r);break;case 3:case 131:case 139:case 140:return Vj.to_workbook(n,r);case 123:if(a[1]===92&&a[2]===114&&a[3]===116)return cG.to_workbook(n,r);break;case 10:case 13:case 32:return BCe(n,r);case 137:if(a[1]===80&&a[2]===78&&a[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return V5e.indexOf(a[0])>-1&&a[2]<=12&&a[3]<=31?Vj.to_workbook(n,r):k_(e,n,r,i)}function GG(e,t){switch(t.type){case"base64":case"binary":break;case"buffer":case"array":t.type="";break;case"file":return wv(t.file,yn.write(e,{type:sa?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");default:throw new Error("Unrecognized type "+t.type)}return yn.write(e,t)}function qCe(e,t){var r=Ms(t||{}),n=DCe(e,r);return HCe(n,r)}function HCe(e,t){var r={},n=sa?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(t.compression&&(r.compression="DEFLATE"),t.password)r.type=n;else switch(t.type){case"base64":r.type="base64";break;case"binary":r.type="string";break;case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");case"buffer":case"file":r.type=n;break;default:throw new Error("Unrecognized type "+t.type)}var a=e.FullPaths?yn.write(e,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[r.type]||r.type,compression:!!t.compression}):e.generate(r);if(typeof Deno<"u"&&typeof a=="string"){if(t.type=="binary"||t.type=="base64")return a;a=new Uint8Array(R5(a))}return t.password&&typeof encrypt_agile<"u"?GG(encrypt_agile(a,t.password),t):t.type==="file"?wv(t.file,a):t.type=="string"?ls(a):a}function $Ce(e,t){var r=t||{},n=z6e(e,r);return GG(n,r)}function Iu(e,t,r){r||(r="");var n=r+e;switch(t.type){case"base64":return Cb(Hu(n));case"binary":return Hu(n);case"string":return e;case"file":return wv(t.file,n,"utf8");case"buffer":return sa?ph(n,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(n):Iu(n,{type:"binary"}).split("").map(function(a){return a.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function VCe(e,t){switch(t.type){case"base64":return Cb(e);case"binary":return e;case"string":return e;case"file":return wv(t.file,e,"binary");case"buffer":return sa?ph(e,"binary"):e.split("").map(function(r){return r.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function cy(e,t){switch(t.type){case"string":case"base64":case"binary":for(var r="",n=0;n<e.length;++n)r+=String.fromCharCode(e[n]);return t.type=="base64"?Cb(r):t.type=="string"?ls(r):r;case"file":return wv(t.file,e);case"buffer":return e;default:throw new Error("Unrecognized type "+t.type)}}function KG(e,t){QA(),Rje(e);var r=Ms(t||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),r.type=="array"){r.type="binary";var n=KG(e,r);return r.type="array",R5(n)}var a=0;if(r.sheet&&(typeof r.sheet=="number"?a=r.sheet:a=e.SheetNames.indexOf(r.sheet),!e.SheetNames[a]))throw new Error("Sheet not found: "+r.sheet+" : "+typeof r.sheet);switch(r.bookType||"xlsb"){case"xml":case"xlml":return Iu(D6e(e,r),r);case"slk":case"sylk":return Iu(tG.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"htm":case"html":return Iu(UG(e.Sheets[e.SheetNames[a]],r),r);case"txt":return VCe(XG(e.Sheets[e.SheetNames[a]],r),r);case"csv":return Iu(IE(e.Sheets[e.SheetNames[a]],r),r,"\uFEFF");case"dif":return Iu(rG.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"dbf":return cy(Vj.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"prn":return Iu(op.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"rtf":return Iu(cG.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"eth":return Iu(nG.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"fods":return Iu($G(e,r),r);case"wk1":return cy(Tm.sheet_to_wk1(e.Sheets[e.SheetNames[a]],r),r);case"wk3":return cy(Tm.book_to_wk3(e,r),r);case"biff2":r.biff||(r.biff=2);case"biff3":r.biff||(r.biff=3);case"biff4":return r.biff||(r.biff=4),cy(BG(e,r),r);case"biff5":r.biff||(r.biff=5);case"biff8":case"xla":case"xls":return r.biff||(r.biff=8),$Ce(e,r);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return qCe(e,r);default:throw new Error("Unrecognized bookType |"+r.bookType+"|")}}function WCe(e){if(!e.bookType){var t={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},r=e.file.slice(e.file.lastIndexOf(".")).toLowerCase();r.match(/^\.[a-z]+$/)&&(e.bookType=r.slice(1)),e.bookType=t[e.bookType]||e.bookType}}function t0(e,t,r){var n={};return n.type="file",n.file=t,WCe(n),KG(e,n)}function GCe(e,t,r,n,a,i,o,l){var d=Ii(r),c=l.defval,u=l.raw||!Object.prototype.hasOwnProperty.call(l,"raw"),x=!0,b=a===1?[]:{};if(a!==1)if(Object.defineProperty)try{Object.defineProperty(b,"__rowNum__",{value:r,enumerable:!1})}catch{b.__rowNum__=r}else b.__rowNum__=r;if(!o||e[r])for(var g=t.s.c;g<=t.e.c;++g){var k=o?e[r][g]:e[n[g]+d];if(k===void 0||k.t===void 0){if(c===void 0)continue;i[g]!=null&&(b[i[g]]=c);continue}var y=k.v;switch(k.t){case"z":if(y==null)break;continue;case"e":y=y==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+k.t)}if(i[g]!=null){if(y==null)if(k.t=="e"&&y===null)b[i[g]]=null;else if(c!==void 0)b[i[g]]=c;else if(u&&y===null)b[i[g]]=null;else continue;else b[i[g]]=u&&(k.t!=="n"||k.t==="n"&&l.rawNumbers!==!1)?y:ih(k,y,l);y!=null&&(x=!1)}}return{row:b,isempty:x}}function Ak(e,t){if(e==null||e["!ref"]==null)return[];var r={t:"n",v:0},n=0,a=1,i=[],o=0,l="",d={s:{r:0,c:0},e:{r:0,c:0}},c=t||{},u=c.range!=null?c.range:e["!ref"];switch(c.header===1?n=1:c.header==="A"?n=2:Array.isArray(c.header)?n=3:c.header==null&&(n=0),typeof u){case"string":d=Ia(u);break;case"number":d=Ia(e["!ref"]),d.s.r=u;break;default:d=u}n>0&&(a=0);var x=Ii(d.s.r),b=[],g=[],k=0,y=0,N=Array.isArray(e),S=d.s.r,O=0,A={};N&&!e[S]&&(e[S]=[]);var P=c.skipHidden&&e["!cols"]||[],q=c.skipHidden&&e["!rows"]||[];for(O=d.s.c;O<=d.e.c;++O)if(!(P[O]||{}).hidden)switch(b[O]=Js(O),r=N?e[S][O]:e[b[O]+x],n){case 1:i[O]=O-d.s.c;break;case 2:i[O]=b[O];break;case 3:i[O]=c.header[O-d.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),l=o=ih(r,null,c),y=A[o]||0,!y)A[o]=1;else{do l=o+"_"+y++;while(A[l]);A[o]=y,A[l]=1}i[O]=l}for(S=d.s.r+a;S<=d.e.r;++S)if(!(q[S]||{}).hidden){var W=GCe(e,d,S,b,n,i,N,c);(W.isempty===!1||(n===1?c.blankrows!==!1:c.blankrows))&&(g[k++]=W.row)}return g.length=k,g}var rL=/"/g;function KCe(e,t,r,n,a,i,o,l){for(var d=!0,c=[],u="",x=Ii(r),b=t.s.c;b<=t.e.c;++b)if(n[b]){var g=l.dense?(e[r]||[])[b]:e[n[b]+x];if(g==null)u="";else if(g.v!=null){d=!1,u=""+(l.rawNumbers&&g.t=="n"?g.v:ih(g,null,l));for(var k=0,y=0;k!==u.length;++k)if((y=u.charCodeAt(k))===a||y===i||y===34||l.forceQuotes){u='"'+u.replace(rL,'""')+'"';break}u=="ID"&&(u='"ID"')}else g.f!=null&&!g.F?(d=!1,u="="+g.f,u.indexOf(",")>=0&&(u='"'+u.replace(rL,'""')+'"')):u="";c.push(u)}return l.blankrows===!1&&d?null:c.join(o)}function IE(e,t){var r=[],n=t??{};if(e==null||e["!ref"]==null)return"";var a=Ia(e["!ref"]),i=n.FS!==void 0?n.FS:",",o=i.charCodeAt(0),l=n.RS!==void 0?n.RS:`
`,d=l.charCodeAt(0),c=new RegExp((i=="|"?"\\|":i)+"+$"),u="",x=[];n.dense=Array.isArray(e);for(var b=n.skipHidden&&e["!cols"]||[],g=n.skipHidden&&e["!rows"]||[],k=a.s.c;k<=a.e.c;++k)(b[k]||{}).hidden||(x[k]=Js(k));for(var y=0,N=a.s.r;N<=a.e.r;++N)(g[N]||{}).hidden||(u=KCe(e,a,N,x,o,d,i,n),u!=null&&(n.strip&&(u=u.replace(c,"")),(u||n.blankrows!==!1)&&r.push((y++?l:"")+u)));return delete n.dense,r.join("")}function XG(e,t){t||(t={}),t.FS="	",t.RS=`
`;var r=IE(e,t);return r}function XCe(e){var t="",r,n="";if(e==null||e["!ref"]==null)return[];var a=Ia(e["!ref"]),i="",o=[],l,d=[],c=Array.isArray(e);for(l=a.s.c;l<=a.e.c;++l)o[l]=Js(l);for(var u=a.s.r;u<=a.e.r;++u)for(i=Ii(u),l=a.s.c;l<=a.e.c;++l)if(t=o[l]+i,r=c?(e[u]||[])[l]:e[t],n="",r!==void 0){if(r.F!=null){if(t=r.F,!r.f)continue;n=r.f,t.indexOf(":")==-1&&(t=t+":"+t)}if(r.f!=null)n=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)n=""+r.v;else if(r.t=="b")n=r.v?"TRUE":"FALSE";else if(r.w!==void 0)n="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?n="'"+r.v:n=""+r.v}}d[d.length]=t+"="+n}return d}function YG(e,t,r){var n=r||{},a=+!n.skipHeader,i=e||{},o=0,l=0;if(i&&n.origin!=null)if(typeof n.origin=="number")o=n.origin;else{var d=typeof n.origin=="string"?ei(n.origin):n.origin;o=d.r,l=d.c}var c,u={s:{c:0,r:0},e:{c:l,r:o+t.length-1+a}};if(i["!ref"]){var x=Ia(i["!ref"]);u.e.c=Math.max(u.e.c,x.e.c),u.e.r=Math.max(u.e.r,x.e.r),o==-1&&(o=x.e.r+1,u.e.r=o+t.length-1+a)}else o==-1&&(o=0,u.e.r=t.length-1+a);var b=n.header||[],g=0;t.forEach(function(y,N){gi(y).forEach(function(S){(g=b.indexOf(S))==-1&&(b[g=b.length]=S);var O=y[S],A="z",P="",q=Tn({c:l+g,r:o+N+a});c=Bb(i,q),O&&typeof O=="object"&&!(O instanceof Date)?i[q]=O:(typeof O=="number"?A="n":typeof O=="boolean"?A="b":typeof O=="string"?A="s":O instanceof Date?(A="d",n.cellDates||(A="n",O=ao(O)),P=n.dateNF||En[14]):O===null&&n.nullError&&(A="e",O=0),c?(c.t=A,c.v=O,delete c.w,delete c.R,P&&(c.z=P)):i[q]=c={t:A,v:O},P&&(c.z=P))})}),u.e.c=Math.max(u.e.c,l+b.length-1);var k=Ii(o);if(a)for(g=0;g<b.length;++g)i[Js(g+l)+k]={t:"s",v:b[g]};return i["!ref"]=Kn(u),i}function YCe(e,t){return YG(null,e,t)}function Bb(e,t,r){if(typeof t=="string"){if(Array.isArray(e)){var n=ei(t);return e[n.r]||(e[n.r]=[]),e[n.r][n.c]||(e[n.r][n.c]={t:"z"})}return e[t]||(e[t]={t:"z"})}return typeof t!="number"?Bb(e,Tn(t)):Bb(e,Tn({r:t,c:r||0}))}function QCe(e,t){if(typeof t=="number"){if(t>=0&&e.SheetNames.length>t)return t;throw new Error("Cannot find sheet # "+t)}else if(typeof t=="string"){var r=e.SheetNames.indexOf(t);if(r>-1)return r;throw new Error("Cannot find sheet name |"+t+"|")}else throw new Error("Cannot find sheet |"+t+"|")}function DE(){return{SheetNames:[],Sheets:{}}}function ME(e,t,r,n){var a=1;if(!r)for(;a<=65535&&e.SheetNames.indexOf(r="Sheet"+a)!=-1;++a,r=void 0);if(!r||e.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&e.SheetNames.indexOf(r)>=0){var i=r.match(/(^.*?)(\d+)$/);a=i&&+i[2]||0;var o=i&&i[1]||r;for(++a;a<=65535&&e.SheetNames.indexOf(r=o+a)!=-1;++a);}if(IG(r),e.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return e.SheetNames.push(r),e.Sheets[r]=t,r}function ZCe(e,t,r){e.Workbook||(e.Workbook={}),e.Workbook.Sheets||(e.Workbook.Sheets=[]);var n=QCe(e,t);switch(e.Workbook.Sheets[n]||(e.Workbook.Sheets[n]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}e.Workbook.Sheets[n].Hidden=r}function JCe(e,t){return e.z=t,e}function QG(e,t,r){return t?(e.l={Target:t},r&&(e.l.Tooltip=r)):delete e.l,e}function eAe(e,t,r){return QG(e,"#"+t,r)}function tAe(e,t,r){e.c||(e.c=[]),e.c.push({t,a:r||"SheetJS"})}function rAe(e,t,r,n){for(var a=typeof t!="string"?t:Ia(t),i=typeof t=="string"?t:Kn(t),o=a.s.r;o<=a.e.r;++o)for(var l=a.s.c;l<=a.e.c;++l){var d=Bb(e,o,l);d.t="n",d.F=i,delete d.v,o==a.s.r&&l==a.s.c&&(d.f=r,n&&(d.D=!0))}return e}var wn={encode_col:Js,encode_row:Ii,encode_cell:Tn,encode_range:Kn,decode_col:dE,decode_row:cE,split_cell:fwe,decode_cell:ei,decode_range:dc,format_cell:ih,sheet_add_aoa:_W,sheet_add_json:YG,sheet_add_dom:zG,aoa_to_sheet:Op,json_to_sheet:YCe,table_to_sheet:qG,table_to_book:cCe,sheet_to_csv:IE,sheet_to_txt:XG,sheet_to_json:Ak,sheet_to_html:UG,sheet_to_formulae:XCe,sheet_to_row_object_array:Ak,sheet_get_cell:Bb,book_new:DE,book_append_sheet:ME,book_set_sheet_visibility:ZCe,cell_set_number_format:JCe,cell_set_hyperlink:QG,cell_set_internal_link:eAe,cell_add_comment:tAe,sheet_set_array_formula:rAe,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const nAe=(e,t,r="inventory-export.xlsx")=>{const n=e.map((o,l)=>{var d;return{STT:l+1,"Tn sn phm":o.name,SKU:o.sku,"Danh mc":o.category||"","Tn kho":o.stock[t]||0,"Gi bn l":o.retailPrice[t]||0,"Gi bn s":((d=o.wholesalePrice)==null?void 0:d[t])||0,"Gi tr tn":(o.stock[t]||0)*(o.retailPrice[t]||0),"M t":o.description||""}}),a=wn.json_to_sheet(n);a["!cols"]=[{wch:5},{wch:30},{wch:15},{wch:20},{wch:10},{wch:15},{wch:15},{wch:15},{wch:40}];const i=wn.book_new();wn.book_append_sheet(i,a,"Tn kho"),t0(i,r)},aAe=(e="inventory-template.xlsx")=>{const t=[{"Tn sn phm":"VD: Nht Motul 7100 10W40",SKU:"A3B7K9M2 (hoc  trng - h thng t to)","Danh mc":"Nht ng c","S lng nhp":50,"Gi bn l":18e4,"Gi bn s":15e4,"M t":"Nht cao cp cho xe cn tay"}],r=wn.json_to_sheet(t);r["!cols"]=[{wch:30},{wch:15},{wch:20},{wch:15},{wch:15},{wch:15},{wch:40}];const n=wn.book_new();wn.book_append_sheet(n,r,"Template"),t0(n,e)},sAe=(e,t)=>new Promise((r,n)=>{const a=new FileReader;a.onload=i=>{var o;try{const l=(o=i.target)==null?void 0:o.result,d=/\.csv$/i.test(e.name),c=Xj(l,{type:d?"string":"binary"}),u=c.SheetNames[0],x=c.Sheets[u],b=wn.sheet_to_json(x,{defval:"",blankrows:!1}),g=A=>A.normalize("NFD").replace(new RegExp("\\p{Diacritic}","gu"),"").replace(//gi,P=>P===""?"d":"D"),k=A=>g(String(A).toLowerCase().trim()).replace(/[^a-z0-9]+/g,""),y=A=>{if(A==null||A==="")return 0;if(typeof A=="number")return A;let P=String(A).trim();P=P.replace(/\s+/g,""),P.includes(".")&&P.includes(",")?P=P.replace(/\./g,"").replace(/,/g,"."):P.includes(",")&&!P.includes(".")?P=P.replace(/,/g,"."):P=P.replace(/,/g,"");const q=parseFloat(P);return isNaN(q)?0:q},N={name:["tensanpham","ten","productname","name","tenhang","tenmh"],sku:["sku","mahang","mah","code","ma","masp","mavt"],category:["danhmuc","nhom","loai","category"],quantity:["soluongnhap","soluong","ton","tonkho","sl","qty"],costPrice:["dongianhap","gianhap","costprice","giavon"],retailPrice:["giabanle","giale","giaban","gia","retailprice","giabanra","dongiabanle"],wholesalePrice:["giabansi","giasi","wholesaleprice","giabuon","dongiabansi"],description:["mota","ghichu","note","description"]},S=[],O=b.map((A,P)=>{const q=A||{},W={};Object.keys(q).forEach(ue=>{W[k(ue)]=q[ue]});const R=(ue,ae)=>{for(const pe of N[ue]){const ve=W[pe];if(ve!=null&&ve!=="")return ve}return ae},U=String(R("name","")).trim();let L=String(R("sku","")).trim().toUpperCase();(!L||!Yre(L))&&(L=OU(),console.log(` Generated SKU for "${U}": ${L}`));const Q=R("category"),H=y(R("quantity",0)),G=y(R("costPrice",0)),Z=y(R("retailPrice",0)),te=y(R("wholesalePrice",0)),se=R("description");if(!U&&Object.values(q).some(ue=>ue!=="")){const ue=Object.values(q).map(ae=>String(ae).trim()).filter(ae=>ae!=="");if(ue.length>0&&ue[0].length>0)return S.push(`Hng ${P+2}: Thiu tn sn phm, to SKU: ${L}`),null}return U?{name:U,sku:L,category:Q,quantity:H,costPrice:G,retailPrice:Z,wholesalePrice:te,description:se}:null}).filter(Boolean);r({items:O,errors:S})}catch(l){const d=l instanceof Error?l.message:"Khng c c d liu";n(new Error(d))}},a.onerror=()=>{n(new Error("Li c file"))},/\.csv$/i.test(e.name)?a.readAsText(e,"utf-8"):a.readAsBinaryString(e)}),ZG=()=>{const[e,t]=T.useState({isOpen:!1,title:"",message:"",confirmText:"Xc nhn",cancelText:"Hy",confirmColor:"blue",resolve:null}),r=T.useCallback(i=>new Promise(o=>{t({isOpen:!0,...i,resolve:o})}),[]),n=T.useCallback(()=>{var i;(i=e.resolve)==null||i.call(e,!0),t(o=>({...o,isOpen:!1,resolve:null}))},[e.resolve]),a=T.useCallback(()=>{var i;(i=e.resolve)==null||i.call(e,!1),t(o=>({...o,isOpen:!1,resolve:null}))},[e.resolve]);return{confirm:r,confirmState:e,handleConfirm:n,handleCancel:a}},JG=({isOpen:e,title:t,message:r,confirmText:n="Xc nhn",cancelText:a="Hy",confirmColor:i="blue",onConfirm:o,onCancel:l})=>{if(!e)return null;const d={red:"bg-red-600 hover:bg-red-700",blue:"bg-blue-600 hover:bg-blue-700",green:"bg-emerald-600 hover:bg-emerald-700"};return s.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-[100] p-4 animate-fadeIn",children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-2xl max-w-md w-full animate-scaleIn",children:[s.jsx("div",{className:"p-6 border-b border-slate-200 dark:border-slate-700",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${i==="red"?"bg-red-100 dark:bg-red-900/30":i==="green"?"bg-emerald-100 dark:bg-emerald-900/30":"bg-blue-100 dark:bg-blue-900/30"}`,children:i==="red"?s.jsx("svg",{className:"w-6 h-6 text-red-600 dark:text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}):i==="green"?s.jsx("svg",{className:"w-6 h-6 text-emerald-600 dark:text-emerald-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}):s.jsx("svg",{className:"w-6 h-6 text-blue-600 dark:text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),s.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100",children:t})]})}),s.jsx("div",{className:"p-6",children:s.jsx("p",{className:"text-slate-700 dark:text-slate-300 leading-relaxed",children:r})}),s.jsxs("div",{className:"flex justify-end gap-3 p-6 bg-slate-50 dark:bg-slate-900/50 rounded-b-lg",children:[s.jsx("button",{onClick:l,className:"px-4 py-2.5 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors font-medium",children:a}),s.jsx("button",{onClick:o,className:`px-4 py-2.5 text-white rounded-lg transition-colors font-medium ${d[i]}`,children:n})]})]})})},Q0="categories";async function iAe(){try{const{data:e,error:t}=await It.from(Q0).select("*").order("name");return t?Ct({code:"supabase",message:"Khng th ti danh mc",cause:t}):Sn(e||[])}catch(e){return Ct({code:"network",message:"Li kt ni ti my ch",cause:e})}}async function oAe(e){var t;try{if(!e.name)return Ct({code:"validation",message:"Thiu tn danh mc"});const r={id:typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():`${Math.random().toString(36).slice(2)}-${Date.now()}`,name:e.name,icon:e.icon,color:e.color,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{data:n,error:a}=await It.from(Q0).insert([r]).select().single();if(a||!n)return Ct({code:"supabase",message:"To danh mc tht bi",cause:a});let i=null;try{const{data:o}=await It.auth.getUser();i=((t=o==null?void 0:o.user)==null?void 0:t.id)||null}catch{}return await Ws(i,{action:"category.create",tableName:Q0,recordId:n.id,oldData:null,newData:n}),Sn(n)}catch(r){return Ct({code:"network",message:"Li kt ni khi to danh mc",cause:r})}}async function lAe(e,t){var r;try{let n=null;try{const d=await It.from(Q0).select("*").eq("id",e).single();n=(d==null?void 0:d.data)??null}catch{}const{data:a,error:i}=await It.from(Q0).update({...t,updated_at:new Date().toISOString()}).eq("id",e).select().single();let o=a;if((!a||i)&&!i&&(o={id:e,...n||{},...t}),i&&a==null)return Ct({code:"supabase",message:"Cp nht danh mc tht bi",cause:i});let l=null;try{const{data:d}=await It.auth.getUser();l=((r=d==null?void 0:d.user)==null?void 0:r.id)||null}catch{}return await Ws(l,{action:"category.update",tableName:Q0,recordId:e,oldData:n,newData:a}),Sn(o)}catch(n){return Ct({code:"network",message:"Li kt ni khi cp nht danh mc",cause:n})}}async function cAe(e){var t;try{let r=null;try{const i=await It.from(Q0).select("*").eq("id",e).single();r=(i==null?void 0:i.data)??null}catch{}const{error:n}=await It.from(Q0).delete().eq("id",e);if(n)return Ct({code:"supabase",message:"Xa danh mc tht bi",cause:n});let a=null;try{const{data:i}=await It.auth.getUser();a=((t=i==null?void 0:i.user)==null?void 0:t.id)||null}catch{}return await Ws(a,{action:"category.delete",tableName:Q0,recordId:e,oldData:r,newData:null}),Sn({id:e})}catch(r){return Ct({code:"network",message:"Li kt ni khi xa danh mc",cause:r})}}const W5=()=>Ls({queryKey:["categories"],queryFn:async()=>{const e=await iAe();if(!e.ok)throw e.error;return e.data}}),LE=()=>{const e=Un();return xa({mutationFn:async t=>{const r=await oAe(t);if(!r.ok)throw r.error;return r.data},onSuccess:()=>{e.invalidateQueries({queryKey:["categories"]}),Ze.success(" to danh mc")},onError:t=>Ze.error((t==null?void 0:t.message)||"Li to danh mc")})},dAe=()=>{const e=Un();return xa({mutationFn:async({id:t,updates:r})=>{const n=await lAe(t,r);if(!n.ok)throw n.error;return n.data},onSuccess:()=>{e.invalidateQueries({queryKey:["categories"]}),Ze.success(" cp nht danh mc")},onError:t=>Ze.error((t==null?void 0:t.message)||"Li cp nht danh mc")})},uAe=()=>{const e=Un();return xa({mutationFn:async({id:t})=>{const r=await cAe(t);if(!r.ok)throw r.error;return r.data},onSuccess:()=>{e.invalidateQueries({queryKey:["categories"]}),Ze.success(" xa danh mc")},onError:t=>Ze.error((t==null?void 0:t.message)||"Li xa danh mc")})},eK=()=>{const{data:e=[]}=gne(),{data:t=[],isLoading:r,isError:n,refetch:a}=W5(),i=LE(),o=dAe(),l=uAe(),[d,c]=T.useState(!1),[u,x]=T.useState(null),[b,g]=T.useState(""),[k,y]=T.useState("#3b82f6"),[N,S]=T.useState("package"),{confirm:O,confirmState:A,handleConfirm:P,handleCancel:q}=ZG(),W=T.useMemo(()=>t.map(Z=>({id:Z.id,name:Z.name,icon:Z.icon||"package",color:Z.color||"#3b82f6",count:e.filter(te=>te.category===Z.name).length})),[t,e]),R=async()=>{if(!b.trim()){Ze.warning("Vui lng nhp tn danh mc");return}if(W.some(te=>te.name.toLowerCase()===b.toLowerCase())){Ze.warning("Danh mc ny  tn ti");return}try{await i.mutateAsync({name:b,icon:N,color:k}),g(""),c(!1)}catch(te){Ze.error(Na(te))}},U=async(Z,te)=>{if(!te.trim()){Ze.warning("Vui lng nhp tn danh mc mi");return}const se=t.find(ue=>ue.name===Z);if(!se){Ze.error("Khng tm thy danh mc  i tn");return}try{await o.mutateAsync({id:se.id,updates:{name:te}}),x(null)}catch(ue){Ze.error(Na(ue))}},L=async Z=>{const te=e.filter(ae=>ae.category===Z).length;if(!await O({title:"Xc nhn xa danh mc",message:`Bn c chc chn mun xa danh mc "${Z}"? ${te} sn phm trong danh mc ny s khng cn danh mc.`,confirmText:"Xa",cancelText:"Hy",confirmColor:"red"}))return;const ue=t.find(ae=>ae.name===Z);if(!ue){Ze.error("Khng tm thy danh mc");return}try{await l.mutateAsync({id:ue.id})}catch(ae){Ze.error(Na(ae))}},Q=[{value:"#3b82f6",label:"Xanh dng"},{value:"#10b981",label:"Xanh l"},{value:"#f59e0b",label:"Vng"},{value:"#ef4444",label:""},{value:"#8b5cf6",label:"Tm"},{value:"#ec4899",label:"Hng"},{value:"#06b6d4",label:"Cyan"},{value:"#f97316",label:"Cam"}],H={package:s.jsx(Hi,{className:"w-5 h-5"}),wrench:s.jsx(Bm,{className:"w-5 h-5"}),settings:s.jsx(cb,{className:"w-5 h-5"}),hammer:s.jsx(eee,{className:"w-5 h-5"}),cog:s.jsx(KJ,{className:"w-5 h-5"}),bolt:s.jsx(LJ,{className:"w-5 h-5"}),bike:s.jsx(A6,{className:"w-5 h-5"}),car:s.jsx(UJ,{className:"w-5 h-5"}),disc:s.jsx(XJ,{className:"w-5 h-5"}),battery:s.jsx(MJ,{className:"w-5 h-5"}),lightbulb:s.jsx(nee,{className:"w-5 h-5"}),palette:s.jsx(DB,{className:"w-5 h-5"})},G=Object.keys(H);return s.jsxs("div",{className:"h-full flex flex-col bg-slate-50 dark:bg-[#0f172a]",children:[s.jsx("div",{className:"bg-white dark:bg-[#1e293b] shadow-sm border-b border-slate-200 dark:border-slate-700 px-6 py-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-slate-100",children:"Danh mc sn phm"}),s.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Qun l cc danh mc phn loi sn phm"})]}),s.jsxs("button",{onClick:()=>c(!0),className:"flex items-center gap-2 px-4 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors font-medium",children:[s.jsx(Mc,{className:"w-5 h-5"}),"Thm danh mc"]})]})}),r&&s.jsx("div",{className:"p-6 text-sm text-slate-500 dark:text-slate-400",children:"ang ti danh mc..."}),n&&s.jsxs("div",{className:"p-6 text-sm text-red-500",children:["Li ti d liu."," ",s.jsx("button",{onClick:()=>a(),className:"underline",children:"Th li"})]}),s.jsx("div",{className:"px-6 py-4 bg-white dark:bg-[#1e293b] border-b border-slate-200 dark:border-slate-700",children:s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 p-4 rounded-lg border border-blue-200 dark:border-blue-700",children:[s.jsx("div",{className:"text-sm font-medium text-blue-600 dark:text-blue-400",children:"Tng danh mc"}),s.jsx("div",{className:"text-2xl font-bold text-blue-900 dark:text-blue-100 mt-1",children:W.length})]}),s.jsxs("div",{className:"bg-gradient-to-br from-emerald-50 to-emerald-100 dark:from-emerald-900/20 dark:to-emerald-800/20 p-4 rounded-lg border border-emerald-200 dark:border-emerald-700",children:[s.jsx("div",{className:"text-sm font-medium text-emerald-600 dark:text-emerald-400",children:"Tng sn phm"}),s.jsx("div",{className:"text-2xl font-bold text-emerald-900 dark:text-emerald-100 mt-1",children:e.length})]}),s.jsxs("div",{className:"bg-gradient-to-br from-amber-50 to-amber-100 dark:from-amber-900/20 dark:to-amber-800/20 p-4 rounded-lg border border-amber-200 dark:border-amber-700",children:[s.jsx("div",{className:"text-sm font-medium text-amber-600 dark:text-amber-400",children:"Cha phn loi"}),s.jsx("div",{className:"text-2xl font-bold text-amber-900 dark:text-amber-100 mt-1",children:e.filter(Z=>!Z.category).length})]})]})}),s.jsx("div",{className:"flex-1 overflow-auto p-6",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:[W.map(Z=>s.jsxs("div",{className:"bg-white dark:bg-[#1e293b] rounded-lg shadow-sm border border-slate-200 dark:border-slate-700 p-5 hover:shadow-md transition-shadow",children:[s.jsx("div",{className:"flex items-start justify-between mb-3",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"text-3xl",children:Z.icon}),s.jsxs("div",{children:[u===Z.name?s.jsx("input",{type:"text",defaultValue:Z.name,onKeyDown:te=>{te.key==="Enter"?U(Z.name,te.currentTarget.value):te.key==="Escape"&&x(null)},onBlur:te=>U(Z.name,te.target.value),autoFocus:!0,className:"px-2 py-1 border border-blue-500 rounded text-sm font-semibold text-slate-900 dark:text-slate-100 dark:bg-[#0f172a]"}):s.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:Z.name}),s.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400 mt-0.5",children:[Z.count," sn phm"]})]})]})}),s.jsxs("div",{className:"flex gap-2 mt-4",children:[s.jsx("button",{onClick:()=>x(Z.name),className:"flex-1 px-3 py-1.5 text-sm border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:"i tn"}),s.jsx("button",{onClick:()=>L(Z.name),className:"flex-1 px-3 py-1.5 text-sm border border-red-300 dark:border-red-700 text-red-600 dark:text-red-400 rounded hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",children:"Xa"})]})]},Z.name)),W.length===0&&s.jsxs("div",{className:"col-span-full flex flex-col items-center justify-center py-16 text-center",children:[s.jsx("div",{className:"mb-4 text-slate-400 dark:text-slate-500",children:s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"w-16 h-16",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 7.5l9-4.5 9 4.5v9l-9 4.5-9-4.5v-9z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 7.5l9 4.5 9-4.5"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 12v9"})]})}),s.jsx("h3",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100 mb-2",children:"Cha c danh mc no"}),s.jsx("p",{className:"text-slate-600 dark:text-slate-400 mb-4",children:"Thm danh mc u tin  phn loi sn phm"}),s.jsx("button",{onClick:()=>c(!0),className:"px-6 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors font-medium",children:"Thm danh mc"})]})]})}),d&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl max-w-md w-full",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200 dark:border-slate-700",children:[s.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100",children:"Thm danh mc mi"}),s.jsx("button",{onClick:()=>c(!1),className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-200",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsxs("div",{className:"p-6 space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Tn danh mc"}),s.jsx("input",{type:"text",value:b,onChange:Z=>g(Z.target.value),placeholder:"VD: Ph tng xe my",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg dark:bg-slate-700 dark:text-slate-100",autoFocus:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Biu tng"}),s.jsx("div",{className:"grid grid-cols-6 gap-2",children:G.map(Z=>s.jsx("button",{onClick:()=>S(Z),className:`p-3 border rounded-lg transition-colors flex items-center justify-center ${N===Z?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-slate-300 dark:border-slate-600 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:H[Z]},Z))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Mu sc"}),s.jsx("div",{className:"grid grid-cols-4 gap-2",children:Q.map(Z=>s.jsx("button",{onClick:()=>y(Z.value),className:`p-3 rounded-lg border-2 transition-all ${k===Z.value?"border-slate-900 dark:border-slate-100 scale-110":"border-transparent"}`,style:{backgroundColor:Z.value},title:Z.label,children:s.jsx("div",{className:"w-full h-6"})},Z.value))})]})]}),s.jsxs("div",{className:"flex justify-end gap-3 p-6 border-t border-slate-200 dark:border-slate-700",children:[s.jsx("button",{onClick:()=>c(!1),className:"px-4 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:"Hy"}),s.jsx("button",{onClick:R,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:"Thm danh mc"})]})]})}),s.jsx(JG,{isOpen:A.isOpen,title:A.title,message:A.message,confirmText:A.confirmText,cancelText:A.cancelText,confirmColor:A.confirmColor,onConfirm:P,onCancel:q})]})},tK=()=>{var L;const{sales:e,workOrders:t,currentBranchId:r}=Ua(),[n,a]=T.useState(1),[i]=T.useState(20),{data:o,isLoading:l}=U6({page:n,pageSize:i}),d=(o==null?void 0:o.data)||[],c=((L=o==null?void 0:o.meta)==null?void 0:L.total)||0,u=Math.max(1,Math.ceil(c/i)),[x,b]=T.useState(""),[g,k]=T.useState("all"),[y,N]=T.useState(null),[S,O]=T.useState("all"),[A,P]=T.useState(null),q=T.useMemo(()=>{const Q=new Set;return d.forEach(H=>{H.category&&Q.add(H.category)}),Array.from(Q).sort()},[d]),W=T.useMemo(()=>d.filter(Q=>{var G,Z;if(x){const te=x.toLowerCase(),se=Q.name.toLowerCase().includes(te),ue=(G=Q.sku)==null?void 0:G.toLowerCase().includes(te),ae=(Z=Q.description)==null?void 0:Z.toLowerCase().includes(te);if(!se&&!ue&&!ae)return!1}if(g!=="all"&&Q.category!==g)return!1;if(y){const te=Q.retailPrice[r]||0;if(te<y.min||te>y.max)return!1}const H=Q.stock[r]||0;return!(S==="in-stock"&&H<=0||S==="low-stock"&&H>10||S==="out-of-stock"&&H>0)}),[d,x,g,y,S,r]),U=A?(Q=>{const H=d.find(ue=>ue.id===Q);if(!H)return null;const G=e.filter(ue=>ue.items.some(ae=>ae.partId===Q)),Z=t.filter(ue=>{var ae;return(ae=ue.partsUsed)==null?void 0:ae.some(pe=>pe.partId===Q)}),te=G.reduce((ue,ae)=>{const pe=ae.items.find(ve=>ve.partId===Q);return ue+((pe==null?void 0:pe.quantity)||0)},0),se=G.reduce((ue,ae)=>{const pe=ae.items.find(ve=>ve.partId===Q);return ue+((pe==null?void 0:pe.sellingPrice)||0)*((pe==null?void 0:pe.quantity)||0)},0);return{part:H,salesCount:G.length,totalSold:te,revenue:se,lastSold:G.length>0?G.sort((ue,ae)=>new Date(ae.date).getTime()-new Date(ue.date).getTime())[0].date:null,workOrdersCount:Z.length}})(A):null;return s.jsxs("div",{className:"h-full flex bg-slate-50 dark:bg-[#0f172a]",children:[s.jsxs("div",{className:"w-96 bg-white dark:bg-[#1e293b] border-r border-slate-200 dark:border-slate-700 flex flex-col",children:[s.jsxs("div",{className:"p-6 border-b border-slate-200 dark:border-slate-700",children:[s.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-slate-100 mb-2",children:"Tra cu sn phm"}),s.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Tm kim v xem chi tit sn phm"})]}),s.jsx("div",{className:"p-4 border-b border-slate-200 dark:border-slate-700",children:s.jsx("input",{type:"text",value:x,onChange:Q=>b(Q.target.value),placeholder:"Tm theo tn, SKU, m t...",className:"w-full px-4 py-2.5 border border-slate-300 dark:border-slate-600 rounded-lg dark:bg-slate-700 dark:text-slate-100 placeholder-slate-400"})}),s.jsxs("div",{className:"flex-1 overflow-auto p-4 space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Danh mc"}),s.jsxs("select",{value:g,onChange:Q=>k(Q.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg dark:bg-slate-700 dark:text-slate-100",children:[s.jsx("option",{value:"all",children:"Tt c danh mc"}),q.map(Q=>s.jsx("option",{value:Q,children:Q},Q))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Tn kho"}),s.jsx("div",{className:"space-y-2",children:[{value:"all",label:"Tt c"},{value:"in-stock",label:"Cn hng"},{value:"low-stock",label:"Sp ht (10)"},{value:"out-of-stock",label:"Ht hng"}].map(Q=>s.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[s.jsx("input",{type:"radio",name:"stock",value:Q.value,checked:S===Q.value,onChange:H=>O(H.target.value),className:"w-4 h-4 text-blue-600"}),s.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:Q.label})]},Q.value))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Khong gi"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"number",placeholder:"T",onChange:Q=>N(H=>({min:Number(Q.target.value)||0,max:(H==null?void 0:H.max)||999999999})),className:"flex-1 px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg dark:bg-slate-700 dark:text-slate-100 text-sm"}),s.jsx("input",{type:"number",placeholder:"n",onChange:Q=>N(H=>({min:(H==null?void 0:H.min)||0,max:Number(Q.target.value)||999999999})),className:"flex-1 px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg dark:bg-slate-700 dark:text-slate-100 text-sm"})]}),y&&s.jsx("button",{onClick:()=>N(null),className:"text-xs text-blue-600 dark:text-blue-400 hover:underline",children:"Xa b lc gi"})]})]}),s.jsx("div",{className:"pt-4 border-t border-slate-200 dark:border-slate-700",children:s.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:["Tm thy"," ",s.jsx("span",{className:"font-semibold text-slate-900 dark:text-slate-100",children:W.length})," ","sn phm"]})})]})]}),s.jsxs("div",{className:"flex-1 flex flex-col",children:[s.jsxs("div",{className:"flex-1 overflow-auto p-6",children:[s.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-4",children:W.map(Q=>{const H=Q.stock[r]||0,G=Q.retailPrice[r]||0;return s.jsx("div",{onClick:()=>P(Q.id),className:`bg-white dark:bg-[#1e293b] rounded-lg shadow-sm border-2 transition-all cursor-pointer ${A===Q.id?"border-blue-500 shadow-md":"border-slate-200 dark:border-slate-700 hover:shadow-md"}`,children:s.jsxs("div",{className:"p-4",children:[s.jsxs("div",{className:"flex items-start justify-between mb-2",children:[s.jsx("h3",{className:"font-semibold text-slate-900 dark:text-slate-100",children:Q.name}),H<=0?s.jsx("span",{className:"px-2 py-0.5 bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400 text-xs rounded",children:"Ht hng"}):H<=10?s.jsx("span",{className:"px-2 py-0.5 bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-400 text-xs rounded",children:"Sp ht"}):s.jsx("span",{className:"px-2 py-0.5 bg-emerald-100 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-400 text-xs rounded",children:"Cn hng"})]}),s.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-400 mb-3",children:["SKU: ",Q.sku]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Tn kho"}),s.jsx("div",{className:"text-lg font-bold text-slate-900 dark:text-slate-100",children:H})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Gi bn"}),s.jsx("div",{className:"text-lg font-bold text-blue-600 dark:text-blue-400",children:Te(G)})]})]}),Q.category&&s.jsx("div",{className:"mt-3 pt-3 border-t border-slate-200 dark:border-slate-700",children:s.jsxs("span",{className:"text-xs text-slate-600 dark:text-slate-400 flex items-center gap-1",children:[s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"w-3.5 h-3.5",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 7.5l9-4.5 9 4.5v9l-9 4.5-9-4.5v-9z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 7.5l9 4.5 9-4.5"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 12v9"})]}),Q.category]})})]})},Q.id)})}),W.length===0&&s.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[s.jsx("div",{className:"mb-4 text-slate-400 dark:text-slate-500",children:s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"w-16 h-16",children:[s.jsx("circle",{cx:"11",cy:"11",r:"7"}),s.jsx("path",{d:"m21 21-4.35-4.35"})]})}),s.jsx("h3",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100 mb-2",children:"Khng tm thy sn phm"}),s.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Th thay i b lc hoc t kha tm kim"})]})]}),s.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-t border-slate-200 dark:border-slate-700 bg-white dark:bg-[#1e293b]",children:[s.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:["Trang ",n,"/",u,"  Tng ",c," sn phm"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{disabled:n===1||l,onClick:()=>a(Q=>Math.max(1,Q-1)),className:"px-3 py-1.5 border border-slate-300 dark:border-slate-600 rounded disabled:opacity-40 hover:bg-slate-50 dark:hover:bg-slate-700",children:" Trc"}),s.jsx("button",{disabled:n>=u||l,onClick:()=>a(Q=>Math.min(u,Q+1)),className:"px-3 py-1.5 border border-slate-300 dark:border-slate-600 rounded disabled:opacity-40 hover:bg-slate-50 dark:hover:bg-slate-700",children:"Sau "})]})]})]}),U&&s.jsxs("div",{className:"w-96 bg-white dark:bg-[#1e293b] border-l border-slate-200 dark:border-slate-700 flex flex-col",children:[s.jsxs("div",{className:"p-6 border-b border-slate-200 dark:border-slate-700",children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:"Chi tit sn phm"}),s.jsx("button",{onClick:()=>P(null),className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-200",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:U.part.name}),s.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:["SKU: ",U.part.sku]})]}),U.part.description&&s.jsxs("div",{children:[s.jsx("div",{className:"text-xs font-medium text-slate-500 dark:text-slate-400 mb-1",children:"M t"}),s.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300",children:U.part.description})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-xs font-medium text-slate-500 dark:text-slate-400 mb-1",children:"Tn kho"}),s.jsx("div",{className:"text-2xl font-bold text-slate-900 dark:text-slate-100",children:U.part.stock[r]||0})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs font-medium text-slate-500 dark:text-slate-400 mb-1",children:"Gi bn l"}),s.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:Te(U.part.retailPrice[r]||0)})]})]})]})]}),s.jsxs("div",{className:"flex-1 overflow-auto p-6",children:[s.jsx("h3",{className:"font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Thng k bn hng"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 p-4 rounded-lg",children:[s.jsx("div",{className:"text-sm text-blue-600 dark:text-blue-400 mb-1",children:"Tng  bn"}),s.jsx("div",{className:"text-3xl font-bold text-blue-900 dark:text-blue-100",children:U.totalSold})]}),s.jsxs("div",{className:"bg-gradient-to-br from-emerald-50 to-emerald-100 dark:from-emerald-900/20 dark:to-emerald-800/20 p-4 rounded-lg",children:[s.jsx("div",{className:"text-sm text-emerald-600 dark:text-emerald-400 mb-1",children:"Doanh thu"}),s.jsx("div",{className:"text-2xl font-bold text-emerald-900 dark:text-emerald-100",children:Te(U.revenue)})]}),s.jsxs("div",{className:"bg-gradient-to-br from-amber-50 to-amber-100 dark:from-amber-900/20 dark:to-amber-800/20 p-4 rounded-lg",children:[s.jsx("div",{className:"text-sm text-amber-600 dark:text-amber-400 mb-1",children:"S n hng"}),s.jsx("div",{className:"text-3xl font-bold text-amber-900 dark:text-amber-100",children:U.salesCount})]}),U.lastSold&&s.jsxs("div",{children:[s.jsx("div",{className:"text-xs font-medium text-slate-500 dark:text-slate-400 mb-1",children:"Bn gn nht"}),s.jsx("div",{className:"text-sm text-slate-700 dark:text-slate-300",children:Fn(U.lastSold)})]}),U.workOrdersCount>0&&s.jsxs("div",{children:[s.jsx("div",{className:"text-xs font-medium text-slate-500 dark:text-slate-400 mb-1",children:"Lnh sa cha"}),s.jsx("div",{className:"text-2xl font-bold text-slate-900 dark:text-slate-100",children:U.workOrdersCount})]})]})]})]})]})},hAe=()=>{const{sales:e,workOrders:t,currentBranchId:r}=Ua(),{data:n,isLoading:a}=U6({page:1,pageSize:20}),i=(n==null?void 0:n.data)||[],[o,l]=T.useState(""),[d,c]=T.useState("all"),[u,x]=T.useState(null),[b,g]=T.useState("all"),[k,y]=T.useState(null),[N,S]=T.useState(!1),[O,A]=T.useState(!1),P=T.useMemo(()=>{const U=new Set;return i.forEach(L=>{L.category&&U.add(L.category)}),Array.from(U).sort()},[i]),q=T.useMemo(()=>i.filter(U=>{var Q,H;if(o){const G=o.toLowerCase(),Z=U.name.toLowerCase().includes(G),te=(Q=U.sku)==null?void 0:Q.toLowerCase().includes(G),se=(H=U.description)==null?void 0:H.toLowerCase().includes(G);if(!Z&&!te&&!se)return!1}if(d!=="all"&&U.category!==d)return!1;if(u){const G=U.retailPrice[r]||0;if(G<u.min||G>u.max)return!1}const L=U.stock[r]||0;return!(b==="in-stock"&&L<=0||b==="low-stock"&&L>10||b==="out-of-stock"&&L>0)}),[i,o,d,u,b,r]),R=k?(U=>{const L=i.find(te=>te.id===U);if(!L)return null;const Q=e.filter(te=>te.items.some(se=>se.partId===U)),H=t.filter(te=>{var se;return(se=te.partsUsed)==null?void 0:se.some(ue=>ue.partId===U)}),G=Q.reduce((te,se)=>{const ue=se.items.find(ae=>ae.partId===U);return te+((ue==null?void 0:ue.quantity)||0)},0),Z=Q.reduce((te,se)=>{const ue=se.items.find(ae=>ae.partId===U);return te+((ue==null?void 0:ue.sellingPrice)||0)*((ue==null?void 0:ue.quantity)||0)},0);return{part:L,salesCount:Q.length,totalSold:G,revenue:Z,lastSold:Q.length>0?Q.sort((te,se)=>new Date(se.date).getTime()-new Date(te.date).getTime())[0].date:null,workOrdersCount:H.length}})(k):null;return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex flex-col h-full bg-slate-50 dark:bg-[#0f172a]",children:[s.jsxs("div",{className:"sticky top-0 z-10 bg-white dark:bg-[#1e293b] border-b border-slate-200 dark:border-slate-700 p-3 space-y-2",children:[s.jsx("input",{type:"text",value:o,onChange:U=>l(U.target.value),placeholder:"Tm sn phm...",className:"w-full px-4 py-2.5 border border-slate-300 dark:border-slate-600 rounded-lg dark:bg-slate-700 dark:text-slate-100 placeholder-slate-400 text-sm"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("button",{onClick:()=>S(!0),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg text-sm font-medium",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})}),"B lc"]}),s.jsxs("div",{className:"px-4 py-2 bg-slate-100 dark:bg-slate-700 rounded-lg text-sm font-medium text-slate-700 dark:text-slate-300",children:[q.length," sp"]})]})]}),s.jsx("div",{className:"flex-1 overflow-auto",children:q.length===0?s.jsxs("div",{className:"flex flex-col items-center justify-center h-full p-8 text-center",children:[s.jsxs("svg",{className:"w-16 h-16 text-slate-300 dark:text-slate-600 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[s.jsx("circle",{cx:"11",cy:"11",r:"7"}),s.jsx("path",{d:"m21 21-4.35-4.35"})]}),s.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-2",children:"Khng tm thy sn phm"}),s.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Th thay i b lc hoc t kha tm kim"})]}):s.jsx("div",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:q.map(U=>{const L=U.stock[r]||0,Q=U.retailPrice[r]||0;return s.jsxs("button",{onClick:()=>{y(U.id),A(!0)},className:"w-full p-4 flex items-center gap-3 bg-white dark:bg-[#1e293b] hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors text-left",children:[s.jsx("div",{className:"w-12 h-12 rounded-lg bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center flex-shrink-0",children:s.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h3",{className:"font-semibold text-slate-900 dark:text-slate-100 truncate",children:U.name}),s.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:["SKU: ",U.sku]}),U.category&&s.jsx("p",{className:"text-xs text-slate-400 dark:text-slate-500 mt-0.5",children:U.category})]}),s.jsxs("div",{className:"text-right flex-shrink-0",children:[s.jsx("div",{className:"text-base font-bold text-blue-600 dark:text-blue-400",children:Te(Q)}),s.jsx("div",{className:"flex items-center gap-1 justify-end mt-1",children:L<=0?s.jsx("span",{className:"px-2 py-0.5 bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400 text-xs rounded",children:"Ht"}):L<=10?s.jsx("span",{className:"px-2 py-0.5 bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-400 text-xs rounded",children:L}):s.jsx("span",{className:"px-2 py-0.5 bg-emerald-100 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-400 text-xs rounded",children:L})})]})]},U.id)})})})]}),N&&s.jsxs("div",{className:"fixed inset-0 z-50 flex items-end",children:[s.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>S(!1)}),s.jsxs("div",{className:"relative bg-white dark:bg-[#1e293b] rounded-t-2xl w-full max-h-[80vh] overflow-hidden flex flex-col",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-slate-200 dark:border-slate-700",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"B lc tm kim"}),s.jsx("button",{onClick:()=>S(!1),className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsxs("div",{className:"flex-1 overflow-auto p-4 space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Danh mc"}),s.jsxs("select",{value:d,onChange:U=>c(U.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg dark:bg-slate-700 dark:text-slate-100",children:[s.jsx("option",{value:"all",children:"Tt c danh mc"}),P.map(U=>s.jsx("option",{value:U,children:U},U))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Tn kho"}),s.jsx("div",{className:"space-y-2",children:[{value:"all",label:"Tt c"},{value:"in-stock",label:"Cn hng"},{value:"low-stock",label:"Sp ht (10)"},{value:"out-of-stock",label:"Ht hng"}].map(U=>s.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[s.jsx("input",{type:"radio",name:"stock",value:U.value,checked:b===U.value,onChange:L=>g(L.target.value),className:"w-4 h-4 text-blue-600"}),s.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:U.label})]},U.value))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Khong gi"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"number",placeholder:"T",onChange:U=>x(L=>({min:Number(U.target.value)||0,max:(L==null?void 0:L.max)||999999999})),className:"flex-1 px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg dark:bg-slate-700 dark:text-slate-100 text-sm"}),s.jsx("input",{type:"number",placeholder:"n",onChange:U=>x(L=>({min:(L==null?void 0:L.min)||0,max:Number(U.target.value)||999999999})),className:"flex-1 px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg dark:bg-slate-700 dark:text-slate-100 text-sm"})]}),u&&s.jsx("button",{onClick:()=>x(null),className:"text-xs text-blue-600 dark:text-blue-400 hover:underline",children:"Xa b lc gi"})]})]})]}),s.jsxs("div",{className:"p-4 border-t border-slate-200 dark:border-slate-700 flex gap-2",children:[s.jsx("button",{onClick:()=>{c("all"),g("all"),x(null)},className:"flex-1 px-4 py-2.5 border border-slate-300 dark:border-slate-600 rounded-lg text-sm font-medium text-slate-700 dark:text-slate-300",children:"t li"}),s.jsx("button",{onClick:()=>S(!1),className:"flex-1 px-4 py-2.5 bg-blue-600 text-white rounded-lg text-sm font-medium",children:"p dng"})]})]})]}),O&&R&&s.jsxs("div",{className:"fixed inset-0 z-50 flex items-end",children:[s.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>A(!1)}),s.jsxs("div",{className:"relative bg-white dark:bg-[#1e293b] rounded-t-2xl w-full max-h-[85vh] overflow-hidden flex flex-col",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-slate-200 dark:border-slate-700",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Chi tit sn phm"}),s.jsx("button",{onClick:()=>A(!1),className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsxs("div",{className:"flex-1 overflow-auto p-4 space-y-4",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-100 mb-1",children:R.part.name}),s.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:["SKU: ",R.part.sku]}),R.part.category&&s.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:["Danh mc: ",R.part.category]})]}),R.part.description&&s.jsxs("div",{children:[s.jsx("div",{className:"text-xs font-medium text-slate-500 dark:text-slate-400 mb-1",children:"M t"}),s.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300",children:R.part.description})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-800 rounded-lg",children:[s.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"Tn kho"}),s.jsx("div",{className:"text-2xl font-bold text-slate-900 dark:text-slate-100",children:R.part.stock[r]||0})]}),s.jsxs("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[s.jsx("div",{className:"text-xs text-blue-600 dark:text-blue-400 mb-1",children:"Gi bn l"}),s.jsx("div",{className:"text-xl font-bold text-blue-600 dark:text-blue-400",children:Te(R.part.retailPrice[r]||0)})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-slate-900 dark:text-slate-100 mb-3",children:"Thng k bn hng"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 p-3 rounded-lg",children:[s.jsx("div",{className:"text-sm text-blue-600 dark:text-blue-400 mb-1",children:"Tng  bn"}),s.jsx("div",{className:"text-2xl font-bold text-blue-900 dark:text-blue-100",children:R.totalSold})]}),s.jsxs("div",{className:"bg-gradient-to-br from-emerald-50 to-emerald-100 dark:from-emerald-900/20 dark:to-emerald-800/20 p-3 rounded-lg",children:[s.jsx("div",{className:"text-sm text-emerald-600 dark:text-emerald-400 mb-1",children:"Doanh thu"}),s.jsx("div",{className:"text-xl font-bold text-emerald-900 dark:text-emerald-100",children:Te(R.revenue)})]}),s.jsxs("div",{className:"bg-gradient-to-br from-amber-50 to-amber-100 dark:from-amber-900/20 dark:to-amber-800/20 p-3 rounded-lg",children:[s.jsx("div",{className:"text-sm text-amber-600 dark:text-amber-400 mb-1",children:"S n hng"}),s.jsx("div",{className:"text-2xl font-bold text-amber-900 dark:text-amber-100",children:R.salesCount})]}),R.lastSold&&s.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-800 rounded-lg",children:[s.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"Bn gn nht"}),s.jsx("div",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:Fn(R.lastSold)})]})]})]})]})]})]})]})},RE=e=>Ls({queryKey:["inventoryTxRepo",e],queryFn:async()=>{const t=await Ane(e);if(!t.ok)throw t.error;return t.data}}),fAe=()=>{const e=Un();return xa({mutationFn:async t=>{console.log(" ang gi createInventoryTransaction vi input:",t);const r=await Ene(t);if(console.log(" Kt qu createInventoryTransaction:",r),!r.ok)throw r.error||new Error("Li khng xc nh");return r.data},onSuccess:()=>{console.log(" Lu lch s thnh cng!"),e.invalidateQueries({queryKey:["inventoryTxRepo"]}),Ze.success(" ghi lch s kho")},onError:t=>{console.error(" Li lu lch s:",t),Ze.error(Na(t))}})},Yj="suppliers";async function mAe(){try{const{data:e,error:t}=await It.from(Yj).select("*").order("name");return t?Ct({code:"supabase",message:"Khng th ti nh cung cp",cause:t}):Sn(e||[])}catch(e){return Ct({code:"network",message:"Li kt ni",cause:e})}}async function xAe(e){var t;try{if(!e.name)return Ct({code:"validation",message:"Thiu tn nh cung cp"});const r={id:typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():`${Math.random().toString(36).slice(2)}-${Date.now()}`,name:e.name,phone:e.phone,address:e.address,created_at:new Date().toISOString()},{data:n,error:a}=await It.from(Yj).insert([r]).select().single();if(a||!n){const o=(a==null?void 0:a.message)||(a==null?void 0:a.details)||"To nh cung cp tht bi";return Ct({code:"supabase",message:o,cause:a})}let i=null;try{const{data:o}=await It.auth.getUser();i=((t=o==null?void 0:o.user)==null?void 0:t.id)||null}catch{}return await Ws(i,{action:"supplier.create",tableName:Yj,recordId:n.id,oldData:null,newData:n}),Sn(n)}catch(r){return Ct({code:"network",message:"Li kt ni khi to nh cung cp",cause:r})}}const FE=()=>Ls({queryKey:["suppliers"],queryFn:async()=>{const e=await mAe();if(!e.ok)throw e.error;return e.data}}),rK=()=>{const e=Un();return xa({mutationFn:async t=>{const r=await xAe(t);if(!r.ok)throw r.error;return r.data},onSuccess:()=>{e.invalidateQueries({queryKey:["suppliers"]}),Ze.success(" thm nh cung cp")},onError:t=>Ze.error((t==null?void 0:t.message)||"Li thm nh cung cp")})},N_=new Intl.NumberFormat("vi-VN",{minimumFractionDigits:0,maximumFractionDigits:2});function pAe(e){let t=e.replace(/[^0-9.,-]/g,"");const r=t.includes("."),n=t.includes(",");r&&n?t=t.replace(/\./g,"").replace(",","."):n&&!r&&(t=t.replace(",","."));const a=Number(t);return Number.isFinite(a)?a:0}const B0=({value:e,onValue:t,placeholder:r,className:n,min:a,max:i,disabled:o,ariaLabel:l})=>{const[d,c]=ma.useState(e?N_.format(e):""),[u,x]=ma.useState(!1);ma.useEffect(()=>{u||c(e?N_.format(e):"")},[e,u]);const b=k=>{const y=k.target.value;c(y);const N=pAe(y);if(a!==void 0&&N<a){t(a);return}if(i!==void 0&&N>i){t(i);return}t(N)},g=()=>{x(!1),c(e?N_.format(e):"")};return s.jsx("input",{type:"text",inputMode:"decimal",value:d,onChange:b,onFocus:()=>x(!0),onBlur:g,placeholder:r,className:n,disabled:o,"aria-label":l})},nL=5e7,aL=1e4;function Qj(e,t){const r=[];let n=Math.max(0,Math.round(e)),a=Math.max(0,Math.round(t));return n>nL&&(r.push("Gi nhp qu ln (>50 triu)  c gii hn."),n=nL),a>aL&&(r.push("S lng qu ln (>10,000)  c gii hn."),a=aL),{ok:!0,warnings:r,clean:{importPrice:n,quantity:a}}}function gAe(e){if(!e||!e.trim())return{ok:!1,error:"S in thoi khng c  trng"};const t=e.trim().replace(/\s+/g,"");return/^(0|\+84)[0-9]{9,10}$/.test(t)?{ok:!0}:{ok:!1,error:"S in thoi khng hp l. Vui lng nhp 10-11 s (VD: 0912345678)"}}const bAe=({isOpen:e,onClose:t,selectedSupplierId:r,onSelectSupplier:n})=>{const[a,i]=T.useState(""),[o,l]=T.useState(!1),{data:d=[]}=FE(),c=rK(),[u,x]=T.useState({name:"",phone:"",address:"",note:""}),b=d.filter(k=>{var N,S;const y=a.toLowerCase();return((N=k.name)==null?void 0:N.toLowerCase().includes(y))||((S=k.phone)==null?void 0:S.toLowerCase().includes(y))}),g=async()=>{if(!u.name.trim()){Ze.error("Vui lng nhp tn nh cung cp");return}try{const k=await c.mutateAsync(u);Ze.success(" thm nh cung cp"),n(k.id),x({name:"",phone:"",address:"",note:""}),l(!1),t()}catch(k){Ze.error((k==null?void 0:k.message)||"Li thm nh cung cp")}};return e?s.jsx("div",{className:"fixed inset-0 bg-black/50 z-[110] flex items-end sm:items-center justify-center",onClick:t,children:s.jsxs("div",{onClick:k=>k.stopPropagation(),className:"bg-white dark:bg-slate-800 w-full sm:max-w-md h-[85vh] sm:h-auto sm:max-h-[80vh] rounded-t-3xl sm:rounded-xl overflow-hidden flex flex-col",children:[s.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 p-4 flex items-center justify-between flex-shrink-0",children:[s.jsx("h3",{className:"text-lg font-bold text-white",children:o?"Thm NCC mi":"Chn nh cung cp"}),s.jsx("button",{onClick:t,className:"text-white text-2xl leading-none",children:""})]}),o?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["Tn nh cung cp ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",value:u.name,onChange:k=>x({...u,name:k.target.value}),placeholder:"Nhp tn NCC",className:"w-full px-4 py-3 border border-slate-300 dark:border-slate-600 rounded-xl bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"S in thoi"}),s.jsx("input",{type:"tel",inputMode:"numeric",value:u.phone,onChange:k=>x({...u,phone:k.target.value}),placeholder:"Nhp ST",className:"w-full px-4 py-3 border border-slate-300 dark:border-slate-600 rounded-xl bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"a ch"}),s.jsx("textarea",{value:u.address,onChange:k=>x({...u,address:k.target.value}),placeholder:"Nhp a ch",rows:3,className:"w-full px-4 py-3 border border-slate-300 dark:border-slate-600 rounded-xl bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 resize-none"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Ghi ch"}),s.jsx("textarea",{value:u.note,onChange:k=>x({...u,note:k.target.value}),placeholder:"Ghi ch thm",rows:2,className:"w-full px-4 py-3 border border-slate-300 dark:border-slate-600 rounded-xl bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 resize-none"})]})]}),s.jsxs("div",{className:"p-3 border-t border-slate-200 dark:border-slate-700 flex gap-2 flex-shrink-0",children:[s.jsx("button",{onClick:()=>{l(!1),x({name:"",phone:"",address:"",note:""})},className:"flex-1 py-3 border-2 border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-xl font-medium active:scale-98 transition-transform",children:"Hy"}),s.jsx("button",{onClick:g,disabled:!u.name.trim()||c.isPending,className:"flex-1 py-3 bg-blue-600 hover:bg-blue-700 disabled:bg-slate-300 dark:disabled:bg-slate-600 text-white rounded-xl font-bold active:scale-98 transition-transform disabled:cursor-not-allowed",children:c.isPending?"ang thm...":"Thm NCC"})]})]}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"p-3 border-b border-slate-200 dark:border-slate-700 flex-shrink-0",children:s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"text",placeholder:"Tm theo tn, ST...",value:a,onChange:k=>i(k.target.value),className:"w-full px-4 py-3 pl-10 border border-slate-300 dark:border-slate-600 rounded-xl bg-slate-50 dark:bg-slate-900 text-slate-900 dark:text-slate-100"}),s.jsx("svg",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})}),s.jsx("div",{className:"flex-1 overflow-y-auto p-3 space-y-2",children:b.length===0?s.jsxs("div",{className:"text-center text-slate-500 py-12",children:[s.jsx("div",{className:"text-5xl mb-3",children:""}),s.jsx("div",{children:"Khng tm thy nh cung cp"})]}):b.map(k=>s.jsxs("div",{onClick:()=>{n(k.id),t()},className:`p-4 rounded-xl border-2 cursor-pointer transition-all ${r===k.id?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 active:scale-98"}`,children:[s.jsx("div",{className:"font-bold text-slate-900 dark:text-slate-100",children:k.name}),k.phone&&s.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:[" ",k.phone]}),k.address&&s.jsxs("div",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:[" ",k.address]})]},k.id))}),s.jsx("div",{className:"p-3 border-t border-slate-200 dark:border-slate-700 flex-shrink-0",children:s.jsxs("button",{onClick:()=>l(!0),className:"w-full py-4 bg-green-600 hover:bg-green-700 active:scale-98 text-white rounded-xl font-bold flex items-center justify-center gap-2 transition-transform",children:[s.jsx("span",{className:"text-xl",children:"+"}),s.jsx("span",{children:"Thm nh cung cp mi"})]})})]})]})}):null},vAe=({isOpen:e,onClose:t,parts:r,receiptItems:n,setReceiptItems:a,selectedSupplier:i,setSelectedSupplier:o,searchTerm:l,setSearchTerm:d,onSave:c,discount:u,setDiscount:x,discountType:b,setDiscountType:g,paymentMethod:k,setPaymentMethod:y,paymentType:N,setPaymentType:S,partialAmount:O,setPartialAmount:A,showAddProductModal:P,setShowAddProductModal:q,onAddNewProduct:W,currentBranchId:R})=>{var me,ne,je;const[U,L]=T.useState(1),[Q,H]=T.useState(!1),[G,Z]=T.useState(""),te=T.useRef(null),[se,ue]=T.useState(!1),{data:ae=[]}=FE();console.log(" GoodsReceiptMobileModal - parts:",(r==null?void 0:r.length)||0,r==null?void 0:r.slice(0,2)),console.log(" searchTerm:",l);const pe=(r==null?void 0:r.filter(De=>{var Ee,be;if(!l||l.trim()==="")return!0;const ce=l.toLowerCase().trim();return((Ee=De.name)==null?void 0:Ee.toLowerCase().includes(ce))||((be=De.sku)==null?void 0:be.toLowerCase().includes(ce))}))||[];console.log(" filteredParts:",(pe==null?void 0:pe.length)||0);const ve=De=>{n.find(Ee=>Ee.partId===De.id)?(a(Ee=>Ee.map(be=>be.partId===De.id?{...be,quantity:be.quantity+1}:be)),Ze.success(` tng s lng ${De.name}`)):(a(Ee=>{var be,ge,Qe;return[...Ee,{partId:De.id,partName:De.name,sku:De.sku,quantity:1,importPrice:((be=De.costPrice)==null?void 0:be[R])||0,sellingPrice:((ge=De.retailPrice)==null?void 0:ge[R])||0,wholesalePrice:((Qe=De.wholesalePrice)==null?void 0:Qe[R])||0}]}),Ze.success(` thm ${De.name} vo phiu nhp`)),d(""),setTimeout(()=>{var Ee;return(Ee=te.current)==null?void 0:Ee.focus()},100)},Pe=De=>{if(De.preventDefault(),!G.trim())return;const ce=G.trim(),Ee=r.find(be=>{var ge,Qe;return((ge=be.sku)==null?void 0:ge.toLowerCase())===ce.toLowerCase()||((Qe=be.name)==null?void 0:Qe.toLowerCase().includes(ce.toLowerCase()))});Ee?(ve(Ee),Z("")):(Ze.info(`Sn phm m ${ce} cha c. Vui lng thm thng tin sn phm mi.`,{autoClose:3e3}),setTimeout(()=>{q(!0)},500))},xe=De=>{console.log(" Camera scanned:",De);const ce=ge=>ge.toLowerCase().replace(/[-\s./\\]/g,""),Ee=ce(De),be=r.find(ge=>{var Qe,Ye;return ce(ge.barcode||"")===Ee||((Qe=ge.barcode)==null?void 0:Qe.toLowerCase())===De.toLowerCase()||ce(ge.sku||"")===Ee||((Ye=ge.sku)==null?void 0:Ye.toLowerCase())===De.toLowerCase()});be?(n.find(Qe=>Qe.partId===be.id)?a(Qe=>Qe.map(Ye=>Ye.partId===be.id?{...Ye,quantity:Ye.quantity+1}:Ye)):(a(Qe=>{var Ye,at,Je;return[...Qe,{partId:be.id,partName:be.name,sku:be.sku,quantity:1,importPrice:((Ye=be.costPrice)==null?void 0:Ye[R])||0,sellingPrice:((at=be.retailPrice)==null?void 0:at[R])||0,wholesalePrice:((Je=be.wholesalePrice)==null?void 0:Je[R])||0}]}),Ze.success(` thm ${be.name}`)),d("")):(Ze.info(`Sn phm m ${De} cha c.`),Z(De),setTimeout(()=>{q(!0)},500))};T.useEffect(()=>{e&&U===1&&setTimeout(()=>{var De;return(De=te.current)==null?void 0:De.focus()},300)},[e,U]);const B=De=>{a(ce=>ce.filter((Ee,be)=>be!==De))},re=n.reduce((De,ce)=>De+ce.quantity*ce.importPrice,0),J=b==="percent"?Math.round(re*u/100):u,ie=Math.max(0,re-J),Y=()=>{if(!i){alert("Vui lng chn nh cung cp");return}L(2)},_e=()=>{alert("Chc nng lu nhp ang pht trin")};return e?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 bg-black/50 z-[100] flex items-end justify-center sm:hidden",children:s.jsx("div",{className:"bg-white dark:bg-slate-800 w-full h-[95vh] rounded-t-3xl overflow-hidden flex flex-col",children:U===1?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 p-4 flex items-center justify-between flex-shrink-0",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("button",{onClick:t,className:"text-white text-2xl leading-none",children:""}),s.jsx("h2",{className:"text-lg font-bold text-white",children:"To phiu nhp kho"})]})}),s.jsx("div",{className:"p-3 bg-slate-50 dark:bg-slate-900 border-b border-slate-200 dark:border-slate-700 flex-shrink-0",children:s.jsx("div",{onClick:()=>H(!0),className:`p-4 rounded-xl border-2 cursor-pointer active:scale-98 transition-transform ${i?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-dashed border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800"}`,children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{className:"flex-1",children:i?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"NH CUNG CP"}),s.jsx("div",{className:"font-bold text-slate-900 dark:text-slate-100",children:((me=ae.find(De=>De.id===i))==null?void 0:me.name)||""}),((ne=ae.find(De=>De.id===i))==null?void 0:ne.phone)&&s.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:(je=ae.find(De=>De.id===i))==null?void 0:je.phone})]}):s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-2xl",children:""}),s.jsx("span",{className:"text-slate-500 dark:text-slate-400",children:"Chn nh cung cp"})]})}),s.jsx("svg",{className:"w-5 h-5 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})})}),s.jsxs("div",{className:"p-3 bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 sticky top-0 z-10 flex-shrink-0 space-y-2",children:[s.jsxs("form",{onSubmit:Pe,className:"flex gap-2",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx("svg",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"})}),s.jsx("input",{ref:te,type:"text",placeholder:"Nhp SKU hoc qut...",value:G,onChange:De=>Z(De.target.value),className:"w-full px-4 py-3 pl-11 border-2 border-blue-400 dark:border-blue-600 rounded-xl bg-blue-50 dark:bg-blue-900/20 text-slate-900 dark:text-slate-100 text-base font-mono placeholder:text-blue-500/70"}),G&&s.jsx("button",{type:"button",onClick:()=>Z(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600 dark:hover:text-slate-300",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsx("button",{type:"button",onClick:()=>ue(!0),className:"w-14 h-[50px] flex items-center justify-center bg-gradient-to-br from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white rounded-xl shadow-lg transition-all active:scale-95",children:s.jsxs("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]})})]}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"text",placeholder:"Hoc tm kim th cng...",value:l,onChange:De=>d(De.target.value),className:"w-full px-4 py-3 pl-10 border border-slate-300 dark:border-slate-600 rounded-xl bg-slate-50 dark:bg-slate-900 text-slate-900 dark:text-slate-100"}),s.jsx("svg",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-3 bg-slate-50 dark:bg-slate-900",children:[!r||r.length===0?s.jsxs("div",{className:"text-center text-slate-500 py-12",children:[s.jsx("div",{className:"text-5xl mb-3",children:""}),s.jsx("div",{children:"ang ti danh sch sn phm..."})]}):pe.length===0?s.jsxs("div",{className:"text-center text-slate-500 py-12",children:[s.jsx("div",{className:"text-5xl mb-3",children:""}),s.jsx("div",{children:"Khng tm thy sn phm"}),l&&s.jsxs("div",{className:"text-sm mt-2",children:['Tm kim: "',l,'"']})]}):s.jsx("div",{className:"space-y-2",children:pe.map(De=>{var Ee,be;const ce=n.find(ge=>ge.partId===De.id);return s.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl p-4 border border-slate-200 dark:border-slate-700",children:s.jsxs("div",{className:"flex items-start justify-between gap-3",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"font-bold text-slate-900 dark:text-slate-100 text-base leading-tight mb-1",children:De.name}),s.jsxs("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:["SKU: ",De.sku]}),s.jsxs("div",{className:"mt-2 flex gap-3 text-xs",children:[s.jsxs("div",{children:[s.jsxs("span",{className:"text-slate-500 dark:text-slate-400",children:["Nhp:"," "]}),s.jsx("span",{className:"font-medium text-orange-600 dark:text-orange-400",children:Te(((Ee=De.costPrice)==null?void 0:Ee[R])||0)})]}),s.jsxs("div",{children:[s.jsxs("span",{className:"text-slate-500 dark:text-slate-400",children:["Bn:"," "]}),s.jsx("span",{className:"font-medium text-green-600 dark:text-green-400",children:Te(((be=De.retailPrice)==null?void 0:be[R])||0)})]})]}),ce&&s.jsx("div",{className:"mt-2 text-sm",children:s.jsxs("span",{className:"text-blue-600 dark:text-blue-400 font-medium",children:[" thm: ",ce.quantity," "," ",Te(ce.importPrice)]})})]}),s.jsx("button",{onClick:()=>ve(De),className:"flex-shrink-0 w-10 h-10 rounded-full bg-blue-600 text-white flex items-center justify-center text-2xl leading-none active:scale-95 transition-transform",children:"+"})]})},De.id)})}),s.jsxs("button",{onClick:()=>q(!0),className:"w-full mt-3 py-4 border-2 border-dashed border-slate-300 dark:border-slate-600 rounded-xl text-slate-500 dark:text-slate-400 hover:border-blue-400 hover:text-blue-600 transition-colors flex items-center justify-center gap-2",children:[s.jsx("span",{className:"text-2xl",children:"+"}),s.jsx("span",{className:"font-medium",children:"To sn phm mi"})]})]}),n.length>0&&s.jsx("div",{className:"flex-shrink-0 bg-gradient-to-t from-white via-white dark:from-slate-800 dark:via-slate-800 to-transparent pt-6 pb-safe pb-4 px-3",children:s.jsxs("button",{onClick:Y,className:"w-full bg-blue-600 hover:bg-blue-700 active:scale-98 text-white py-4 rounded-xl font-bold text-lg flex items-center justify-between px-6 shadow-lg transition-transform",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"bg-white/20 rounded-full w-8 h-8 flex items-center justify-center font-bold",children:n.reduce((De,ce)=>De+ce.quantity,0)}),s.jsx("span",{children:"Tip tc"})]}),s.jsx("span",{className:"font-bold",children:Te(re)})]})})]}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 p-4 flex items-center justify-between flex-shrink-0",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("button",{onClick:()=>L(1),className:"text-white text-xl leading-none",children:""}),s.jsx("h2",{className:"text-lg font-bold text-white",children:"Xc nhn nhp kho"})]})}),s.jsxs("div",{className:"flex-1 overflow-y-auto bg-slate-50 dark:bg-slate-900",children:[s.jsx("div",{className:"p-3 space-y-2",children:n.map((De,ce)=>s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl p-4 border border-slate-200 dark:border-slate-700",children:[s.jsxs("div",{className:"flex items-start justify-between gap-3 mb-3",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-bold text-slate-900 dark:text-slate-100 leading-tight",children:De.partName}),s.jsxs("div",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:["SKU: ",De.sku]})]}),s.jsx("button",{onClick:()=>B(ce),className:"text-red-500 hover:text-red-600 text-xl",children:""})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>{if(De.quantity>1){const Ee=[...n];Ee[ce].quantity-=1,a(Ee)}},className:"w-8 h-8 rounded-lg border-2 border-slate-300 dark:border-slate-600 flex items-center justify-center text-slate-600 dark:text-slate-400 font-bold active:scale-95 transition-transform",children:""}),s.jsx("div",{className:"w-12 text-center font-bold text-lg text-slate-900 dark:text-slate-100",children:De.quantity}),s.jsx("button",{onClick:()=>{const Ee=[...n];Ee[ce].quantity+=1,a(Ee)},className:"w-8 h-8 rounded-lg border-2 border-blue-500 flex items-center justify-center text-blue-600 font-bold active:scale-95 transition-transform",children:"+"})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:[Te(De.importPrice)," / ci"]}),s.jsx("div",{className:"font-bold text-orange-600 dark:text-orange-400",children:Te(De.quantity*De.importPrice)})]})]})]},ce))}),s.jsx("div",{className:"p-3",children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl p-4 border border-slate-200 dark:border-slate-700 space-y-3",children:[s.jsxs("div",{className:"flex justify-between text-slate-700 dark:text-slate-300",children:[s.jsx("span",{children:"Tng tin hng"}),s.jsx("span",{className:"font-medium",children:Te(re)})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:"Gim gi"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"number",inputMode:"numeric",value:u,onChange:De=>x(Number(De.target.value)),placeholder:"0",className:"w-24 px-3 py-1.5 border border-slate-300 dark:border-slate-600 rounded-lg text-right bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"}),s.jsxs("select",{value:b,onChange:De=>g(De.target.value),className:"px-2 py-1.5 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 text-sm",children:[s.jsx("option",{value:"amount",children:""}),s.jsx("option",{value:"percent",children:"%"})]})]})]}),s.jsxs("div",{className:"flex justify-between items-center pt-3 border-t-2 border-slate-200 dark:border-slate-700",children:[s.jsx("span",{className:"text-lg font-bold text-slate-900 dark:text-slate-100",children:"CN THANH TON"}),s.jsx("span",{className:"text-xl font-bold text-red-600 dark:text-red-400",children:Te(ie)})]})]})}),s.jsxs("div",{className:"p-3",children:[s.jsx("div",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Phng thc thanh ton"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>y("cash"),className:`flex-1 py-3 rounded-xl font-medium transition-all ${k==="cash"?"bg-green-600 text-white shadow-lg":"bg-white dark:bg-slate-800 text-slate-700 dark:text-slate-300 border border-slate-300 dark:border-slate-600"}`,children:" Tin mt"}),s.jsx("button",{onClick:()=>y("bank"),className:`flex-1 py-3 rounded-xl font-medium transition-all ${k==="bank"?"bg-blue-600 text-white shadow-lg":"bg-white dark:bg-slate-800 text-slate-700 dark:text-slate-300 border border-slate-300 dark:border-slate-600"}`,children:" Chuyn khon"})]})]}),s.jsx("div",{className:"p-3",children:s.jsxs("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-xl p-1 flex gap-1",children:[s.jsx("button",{onClick:()=>{S("full"),A(0)},className:`flex-1 py-2.5 rounded-lg font-medium transition-all ${N==="full"?"bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100 shadow":"text-slate-600 dark:text-slate-400"}`,children:""}),s.jsx("button",{onClick:()=>S("partial"),className:`flex-1 py-2.5 rounded-lg font-medium transition-all ${N==="partial"?"bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100 shadow":"text-slate-600 dark:text-slate-400"}`,children:"1 Phn"}),s.jsx("button",{onClick:()=>{S("note"),A(0)},className:`flex-1 py-2.5 rounded-lg font-medium transition-all ${N==="note"?"bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100 shadow":"text-slate-600 dark:text-slate-400"}`,children:"N"})]})}),N==="partial"&&s.jsx("div",{className:"p-3",children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl p-4 border border-slate-300 dark:border-slate-600",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Tin tr NCC"}),s.jsx("input",{type:"number",inputMode:"numeric",value:O,onChange:De=>{const ce=Number(De.target.value);ce<=ie?A(ce):alert("S tin tr khng c vt qu tng tin")},placeholder:"Nhp s tin",className:"w-full px-4 py-3 border border-slate-300 dark:border-slate-600 rounded-lg text-right text-lg font-bold bg-slate-50 dark:bg-slate-900 text-slate-900 dark:text-slate-100"}),s.jsxs("div",{className:"mt-2 text-sm text-red-600 dark:text-red-400",children:["Cn n: ",Te(ie-O)]})]})}),N==="note"&&s.jsx("div",{className:"p-3",children:s.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl p-4",children:[s.jsx("div",{className:"text-sm text-red-700 dark:text-red-400 mb-1",children:"S tin n"}),s.jsx("div",{className:"text-2xl font-bold text-red-600 dark:text-red-400",children:Te(ie)})]})})]}),s.jsx("div",{className:"p-3 bg-white dark:bg-slate-800 border-t border-slate-200 dark:border-slate-700 space-y-2 flex-shrink-0",children:s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:_e,className:"flex-1 py-3 border-2 border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-xl font-medium active:scale-98 transition-transform",children:" Lu Nhp"}),s.jsx("button",{onClick:c,disabled:!i||n.length===0,className:"flex-1 py-3 bg-blue-600 hover:bg-blue-700 disabled:bg-slate-300 dark:disabled:bg-slate-600 text-white rounded-xl font-bold active:scale-98 transition-transform disabled:cursor-not-allowed",children:" NHP KHO"})]})})]})})}),s.jsx(bAe,{isOpen:Q,onClose:()=>H(!1),selectedSupplierId:i,onSelectSupplier:o}),s.jsx(KA,{isOpen:se,onClose:()=>ue(!1),onScan:xe,title:"Qut m vch sn phm"})]}):null},yAe=({transactions:e})=>{const{currentBranchId:t}=Ua(),{data:r=[]}=L5(),[n,a]=T.useState("7days"),[i,o]=T.useState(Fn(new Date,!0)),[l,d]=T.useState(Fn(new Date,!0)),[c,u]=T.useState(""),[x,b]=T.useState(!1),[g,k]=T.useState(null),y=T.useMemo(()=>{let O=e.filter(P=>P.type==="Nhp kho");const A=new Date;switch(n){case"7days":const P=new Date(A.getTime()-6048e5);O=O.filter(R=>new Date(R.date)>=P);break;case"30days":const q=new Date(A.getTime()-720*60*60*1e3);O=O.filter(R=>new Date(R.date)>=q);break;case"thisMonth":const W=new Date(A.getFullYear(),A.getMonth(),1);O=O.filter(R=>new Date(R.date)>=W);break;case"custom":O=O.filter(R=>{const U=new Date(R.date);return U>=new Date(i)&&U<=new Date(l)});break}if(c){const P=c.toLowerCase();O=O.filter(q=>q.partName.toLowerCase().includes(P)||q.notes&&q.notes.toLowerCase().includes(P))}return O.sort((P,q)=>new Date(q.date).getTime()-new Date(P.date).getTime())},[e,n,i,l,c]),N=T.useMemo(()=>y.reduce((O,A)=>O+A.totalPrice,0),[y]),S=T.useMemo(()=>{const O=new Map;return y.forEach(A=>{var U,L;const P=new Date(A.date),q=`${P.getFullYear()}-${String(P.getMonth()+1).padStart(2,"0")}-${String(P.getDate()).padStart(2,"0")}`,W=(U=A.notes)!=null&&U.includes("NCC:")?(L=A.notes.split("NCC:")[1])==null?void 0:L.trim():"Khng xc nh",R=`${q}_${W}_${P.getHours()}_${P.getMinutes()}`;O.has(R)||O.set(R,[]),O.get(R).push(A)}),Array.from(O.entries()).map(([A,P],q)=>{var L,Q,H;const W=P[0],R=new Date(W.date);let U="";if(W.notes){const G=W.notes.match(/NH-\d{8}-\d{3}/);G&&(U=G[0])}return U||(U=`NH-${`${R.getFullYear()}${String(R.getMonth()+1).padStart(2,"0")}${String(R.getDate()).padStart(2,"0")}`}-${String(O.size-q).padStart(3,"0")}`),{receiptCode:U,date:W.date,supplier:(L=W.notes)!=null&&L.includes("NCC:")?(H=(Q=W.notes.split("NCC:")[1])==null?void 0:Q.split("|")[0])==null?void 0:H.trim():"Khng xc nh",items:P,total:P.reduce((G,Z)=>G+Z.totalPrice,0)}}).sort((A,P)=>new Date(P.date).getTime()-new Date(A.date).getTime())},[y]);return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex flex-col h-full bg-slate-50 dark:bg-[#0f172a]",children:[s.jsxs("div",{className:"sticky top-0 z-10 bg-white dark:bg-[#1e293b] border-b border-slate-200 dark:border-slate-700 p-3 space-y-2",children:[s.jsx("input",{type:"text",value:c,onChange:O=>u(O.target.value),placeholder:"Tm NCC, ph tng...",className:"w-full px-4 py-2.5 border border-slate-300 dark:border-slate-600 rounded-lg dark:bg-slate-700 dark:text-slate-100 placeholder-slate-400 text-sm"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("button",{onClick:()=>b(!0),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg text-sm font-medium",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})}),"B lc"]}),s.jsx("div",{className:"px-4 py-2 bg-slate-100 dark:bg-slate-700 rounded-lg text-sm font-medium text-slate-700 dark:text-slate-300",children:S.length})]})]}),s.jsx("div",{className:"px-3 py-3 bg-blue-50 dark:bg-blue-900/20 border-b border-blue-100 dark:border-blue-800",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("div",{className:"text-xs text-blue-600 dark:text-blue-400",children:"Tng gi tr nhp"}),s.jsx("div",{className:"text-xl font-bold text-blue-600 dark:text-blue-400",children:Te(N)})]})}),s.jsx("div",{className:"flex-1 overflow-auto",children:S.length===0?s.jsxs("div",{className:"flex flex-col items-center justify-center h-full p-8 text-center",children:[s.jsx("div",{className:"text-6xl mb-4",children:""}),s.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-2",children:"Khng c d liu"}),s.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Th thay i b lc hoc thi gian"})]}):s.jsx("div",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:S.map(O=>{const A=new Date(O.date),P=A.toLocaleDateString("vi-VN",{day:"2-digit",month:"2-digit",year:"numeric"}),q=A.toLocaleTimeString("vi-VN",{hour:"2-digit",minute:"2-digit"}),W=r.find(L=>{var Q;return(Q=L.description)==null?void 0:Q.includes(O.receiptCode)}),R=(W==null?void 0:W.remainingAmount)||0,U=R>0;return s.jsxs("button",{onClick:()=>k({...O,date:new Date(O.date)}),className:"w-full p-4 bg-white dark:bg-[#1e293b] hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors text-left",children:[s.jsxs("div",{className:"flex items-start justify-between gap-3 mb-3",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-bold text-cyan-600 dark:text-cyan-400",children:O.receiptCode}),s.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400 mt-0.5",children:[P,"  ",q]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Tng tin"}),s.jsx("div",{className:"text-base font-bold text-slate-900 dark:text-white",children:Te(O.total)})]})]}),s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("div",{className:"w-8 h-8 rounded-full bg-orange-100 dark:bg-orange-900/30 flex items-center justify-center text-lg",children:""}),s.jsx("div",{className:"text-sm font-medium text-slate-900 dark:text-white",children:O.supplier})]}),s.jsxs("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:[O.items.length," sn phm"]}),U&&s.jsx("div",{className:"mt-2",children:s.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-200",children:[" Cn n ",Te(R)]})})]},O.receiptCode)})})})]}),x&&s.jsxs("div",{className:"fixed inset-0 z-50 flex items-end",children:[s.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>b(!1)}),s.jsxs("div",{className:"relative bg-white dark:bg-[#1e293b] rounded-t-2xl w-full max-h-[80vh] overflow-hidden flex flex-col",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-slate-200 dark:border-slate-700",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"B lc thi gian"}),s.jsx("button",{onClick:()=>b(!1),className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsxs("div",{className:"flex-1 overflow-auto p-4 space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Thi gian"}),s.jsx("div",{className:"grid grid-cols-2 gap-2",children:[{key:"7days",label:"7 ngy qua"},{key:"30days",label:"30 ngy qua"},{key:"thisMonth",label:"Thng ny"},{key:"custom",label:"Ty chn"}].map(O=>s.jsx("button",{onClick:()=>a(O.key),className:`px-4 py-2.5 rounded-lg text-sm font-medium transition-colors ${n===O.key?"bg-blue-600 text-white":"bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300"}`,children:O.label},O.key))})]}),n==="custom"&&s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"T ngy"}),s.jsx("input",{type:"date",value:i,onChange:O=>o(O.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg dark:bg-slate-700 dark:text-slate-100"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"n ngy"}),s.jsx("input",{type:"date",value:l,onChange:O=>d(O.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg dark:bg-slate-700 dark:text-slate-100"})]})]})]}),s.jsx("div",{className:"p-4 border-t border-slate-200 dark:border-slate-700",children:s.jsx("button",{onClick:()=>b(!1),className:"w-full px-4 py-2.5 bg-blue-600 text-white rounded-lg text-sm font-medium",children:"p dng"})})]})]}),g&&s.jsxs("div",{className:"fixed inset-0 z-50 flex items-end",children:[s.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>k(null)}),s.jsxs("div",{className:"relative bg-white dark:bg-[#1e293b] rounded-t-2xl w-full max-h-[85vh] overflow-hidden flex flex-col",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-slate-200 dark:border-slate-700",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Chi tit phiu nhp"}),s.jsx("button",{onClick:()=>k(null),className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsxs("div",{className:"flex-1 overflow-auto p-4 space-y-4",children:[s.jsxs("div",{className:"bg-cyan-50 dark:bg-cyan-900/20 rounded-lg p-3",children:[s.jsx("div",{className:"text-xs text-cyan-600 dark:text-cyan-400 mb-1",children:"M phiu"}),s.jsx("div",{className:"text-lg font-bold text-cyan-600 dark:text-cyan-400",children:g.receiptCode})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 rounded-lg p-3",children:[s.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"Ngy nhp"}),s.jsx("div",{className:"text-sm font-medium text-slate-900 dark:text-white",children:Fn(new Date(g.date))})]}),s.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-3",children:[s.jsx("div",{className:"text-xs text-blue-600 dark:text-blue-400 mb-1",children:"Tng tin"}),s.jsx("div",{className:"text-lg font-bold text-blue-600 dark:text-blue-400",children:Te(g.total)})]})]}),s.jsxs("div",{className:"bg-orange-50 dark:bg-orange-900/20 rounded-lg p-3",children:[s.jsx("div",{className:"text-xs text-orange-600 dark:text-orange-400 mb-1",children:"Nh cung cp"}),s.jsx("div",{className:"text-base font-semibold text-orange-900 dark:text-orange-100",children:g.supplier})]}),s.jsxs("div",{children:[s.jsxs("h4",{className:"text-sm font-semibold text-slate-900 dark:text-slate-100 mb-2",children:["Danh sch sn phm (",g.items.length,")"]}),s.jsx("div",{className:"space-y-2",children:g.items.map(O=>s.jsxs("div",{className:"flex items-start justify-between p-3 bg-slate-50 dark:bg-slate-800 rounded-lg",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"text-sm font-medium text-slate-900 dark:text-white",children:[O.quantity," x ",O.partName]}),s.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400 mt-0.5",children:[Te(O.unitPrice||0)," / SP"]})]}),s.jsx("div",{className:"text-sm font-bold text-slate-900 dark:text-white",children:Te(O.quantity*(O.unitPrice||0))})]},O.id))})]})]})]})]})]})};var dy={},jg={},uy={},sL;function $c(){if(sL)return uy;sL=1,Object.defineProperty(uy,"__esModule",{value:!0});function e(r,n){if(!(r instanceof n))throw new TypeError("Cannot call a class as a function")}var t=function r(n,a){e(this,r),this.data=n,this.text=a.text||n,this.options=a};return uy.default=t,uy}var iL;function wAe(){if(iL)return jg;iL=1,Object.defineProperty(jg,"__esModule",{value:!0}),jg.CODE39=void 0;var e=(function(){function y(N,S){for(var O=0;O<S.length;O++){var A=S[O];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(N,A.key,A)}}return function(N,S,O){return S&&y(N.prototype,S),O&&y(N,O),N}})(),t=$c(),r=n(t);function n(y){return y&&y.__esModule?y:{default:y}}function a(y,N){if(!(y instanceof N))throw new TypeError("Cannot call a class as a function")}function i(y,N){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return N&&(typeof N=="object"||typeof N=="function")?N:y}function o(y,N){if(typeof N!="function"&&N!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof N);y.prototype=Object.create(N&&N.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),N&&(Object.setPrototypeOf?Object.setPrototypeOf(y,N):y.__proto__=N)}var l=(function(y){o(N,y);function N(S,O){return a(this,N),S=S.toUpperCase(),O.mod43&&(S+=b(k(S))),i(this,(N.__proto__||Object.getPrototypeOf(N)).call(this,S,O))}return e(N,[{key:"encode",value:function(){for(var O=u("*"),A=0;A<this.data.length;A++)O+=u(this.data[A])+"0";return O+=u("*"),{data:O,text:this.text}}},{key:"valid",value:function(){return this.data.search(/^[0-9A-Z\-\.\ \$\/\+\%]+$/)!==-1}}]),N})(r.default),d=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","-","."," ","$","/","+","%","*"],c=[20957,29783,23639,30485,20951,29813,23669,20855,29789,23645,29975,23831,30533,22295,30149,24005,21623,29981,23837,22301,30023,23879,30545,22343,30161,24017,21959,30065,23921,22385,29015,18263,29141,17879,29045,18293,17783,29021,18269,17477,17489,17681,20753,35770];function u(y){return x(g(y))}function x(y){return c[y].toString(2)}function b(y){return d[y]}function g(y){return d.indexOf(y)}function k(y){for(var N=0,S=0;S<y.length;S++)N+=g(y[S]);return N=N%43,N}return jg.CODE39=l,jg}var Vd={},hy={},fy={},di={},oL;function Ev(){if(oL)return di;oL=1,Object.defineProperty(di,"__esModule",{value:!0});var e;function t(d,c,u){return c in d?Object.defineProperty(d,c,{value:u,enumerable:!0,configurable:!0,writable:!0}):d[c]=u,d}var r=di.SET_A=0,n=di.SET_B=1,a=di.SET_C=2;di.SHIFT=98;var i=di.START_A=103,o=di.START_B=104,l=di.START_C=105;return di.MODULO=103,di.STOP=106,di.FNC1=207,di.SET_BY_CODE=(e={},t(e,i,r),t(e,o,n),t(e,l,a),e),di.SWAP={101:r,100:n,99:a},di.A_START_CHAR="",di.B_START_CHAR="",di.C_START_CHAR="",di.A_CHARS="[\0-_-]",di.B_CHARS="[ --]",di.C_CHARS="(*[0-9]{2}*)",di.BARS=[11011001100,11001101100,11001100110,10010011e3,10010001100,10001001100,10011001e3,10011000100,10001100100,11001001e3,11001000100,11000100100,10110011100,10011011100,10011001110,10111001100,10011101100,10011100110,11001110010,11001011100,11001001110,11011100100,11001110100,11101101110,11101001100,11100101100,11100100110,11101100100,11100110100,11100110010,11011011e3,11011000110,11000110110,10100011e3,10001011e3,10001000110,10110001e3,10001101e3,10001100010,11010001e3,11000101e3,11000100010,10110111e3,10110001110,10001101110,10111011e3,10111000110,10001110110,11101110110,11010001110,11000101110,11011101e3,11011100010,11011101110,11101011e3,11101000110,11100010110,11101101e3,11101100010,11100011010,11101111010,11001000010,11110001010,1010011e4,10100001100,1001011e4,10010000110,10000101100,10000100110,1011001e4,10110000100,1001101e4,10011000010,10000110100,10000110010,11000010010,1100101e4,11110111010,11000010100,10001111010,10100111100,10010111100,10010011110,10111100100,10011110100,10011110010,11110100100,11110010100,11110010010,11011011110,11011110110,11110110110,10101111e3,10100011110,10001011110,10111101e3,10111100010,11110101e3,11110100010,10111011110,10111101110,11101011110,11110101110,11010000100,1101001e4,11010011100,1100011101011],di}var lL;function G5(){if(lL)return fy;lL=1,Object.defineProperty(fy,"__esModule",{value:!0});var e=(function(){function c(u,x){for(var b=0;b<x.length;b++){var g=x[b];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(u,g.key,g)}}return function(u,x,b){return x&&c(u.prototype,x),b&&c(u,b),u}})(),t=$c(),r=a(t),n=Ev();function a(c){return c&&c.__esModule?c:{default:c}}function i(c,u){if(!(c instanceof u))throw new TypeError("Cannot call a class as a function")}function o(c,u){if(!c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u&&(typeof u=="object"||typeof u=="function")?u:c}function l(c,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof u);c.prototype=Object.create(u&&u.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),u&&(Object.setPrototypeOf?Object.setPrototypeOf(c,u):c.__proto__=u)}var d=(function(c){l(u,c);function u(x,b){i(this,u);var g=o(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,x.substring(1),b));return g.bytes=x.split("").map(function(k){return k.charCodeAt(0)}),g}return e(u,[{key:"valid",value:function(){return/^[\x00-\x7F\xC8-\xD3]+$/.test(this.data)}},{key:"encode",value:function(){var b=this.bytes,g=b.shift()-105,k=n.SET_BY_CODE[g];if(k===void 0)throw new RangeError("The encoding does not start with a start character.");this.shouldEncodeAsEan128()===!0&&b.unshift(n.FNC1);var y=u.next(b,1,k);return{text:this.text===this.data?this.text.replace(/[^\x20-\x7E]/g,""):this.text,data:u.getBar(g)+y.result+u.getBar((y.checksum+g)%n.MODULO)+u.getBar(n.STOP)}}},{key:"shouldEncodeAsEan128",value:function(){var b=this.options.ean128||!1;return typeof b=="string"&&(b=b.toLowerCase()==="true"),b}}],[{key:"getBar",value:function(b){return n.BARS[b]?n.BARS[b].toString():""}},{key:"correctIndex",value:function(b,g){if(g===n.SET_A){var k=b.shift();return k<32?k+64:k-32}else return g===n.SET_B?b.shift()-32:(b.shift()-48)*10+b.shift()-48}},{key:"next",value:function(b,g,k){if(!b.length)return{result:"",checksum:0};var y=void 0,N=void 0;if(b[0]>=200){N=b.shift()-105;var S=n.SWAP[N];S!==void 0?y=u.next(b,g+1,S):((k===n.SET_A||k===n.SET_B)&&N===n.SHIFT&&(b[0]=k===n.SET_A?b[0]>95?b[0]-96:b[0]:b[0]<32?b[0]+96:b[0]),y=u.next(b,g+1,k))}else N=u.correctIndex(b,k),y=u.next(b,g+1,k);var O=u.getBar(N),A=N*g;return{result:O+y.result,checksum:A+y.checksum}}}]),u})(r.default);return fy.default=d,fy}var my={},cL;function kAe(){if(cL)return my;cL=1,Object.defineProperty(my,"__esModule",{value:!0});var e=Ev(),t=function(l){return l.match(new RegExp("^"+e.A_CHARS+"*"))[0].length},r=function(l){return l.match(new RegExp("^"+e.B_CHARS+"*"))[0].length},n=function(l){return l.match(new RegExp("^"+e.C_CHARS+"*"))[0]};function a(o,l){var d=l?e.A_CHARS:e.B_CHARS,c=o.match(new RegExp("^("+d+"+?)(([0-9]{2}){2,})([^0-9]|$)"));if(c)return c[1]+""+i(o.substring(c[1].length));var u=o.match(new RegExp("^"+d+"+"))[0];return u.length===o.length?o:u+String.fromCharCode(l?205:206)+a(o.substring(u.length),!l)}function i(o){var l=n(o),d=l.length;if(d===o.length)return o;o=o.substring(d);var c=t(o)>=r(o);return l+String.fromCharCode(c?206:205)+a(o,c)}return my.default=function(o){var l=void 0,d=n(o).length;if(d>=2)l=e.C_START_CHAR+i(o);else{var c=t(o)>r(o);l=(c?e.A_START_CHAR:e.B_START_CHAR)+a(o,c)}return l.replace(/[\xCD\xCE]([^])[\xCD\xCE]/,function(u,x){return""+x})},my}var dL;function NAe(){if(dL)return hy;dL=1,Object.defineProperty(hy,"__esModule",{value:!0});var e=G5(),t=a(e),r=kAe(),n=a(r);function a(c){return c&&c.__esModule?c:{default:c}}function i(c,u){if(!(c instanceof u))throw new TypeError("Cannot call a class as a function")}function o(c,u){if(!c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u&&(typeof u=="object"||typeof u=="function")?u:c}function l(c,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof u);c.prototype=Object.create(u&&u.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),u&&(Object.setPrototypeOf?Object.setPrototypeOf(c,u):c.__proto__=u)}var d=(function(c){l(u,c);function u(x,b){if(i(this,u),/^[\x00-\x7F\xC8-\xD3]+$/.test(x))var g=o(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,(0,n.default)(x),b));else var g=o(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,x,b));return o(g)}return u})(t.default);return hy.default=d,hy}var xy={},uL;function _Ae(){if(uL)return xy;uL=1,Object.defineProperty(xy,"__esModule",{value:!0});var e=(function(){function c(u,x){for(var b=0;b<x.length;b++){var g=x[b];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(u,g.key,g)}}return function(u,x,b){return x&&c(u.prototype,x),b&&c(u,b),u}})(),t=G5(),r=a(t),n=Ev();function a(c){return c&&c.__esModule?c:{default:c}}function i(c,u){if(!(c instanceof u))throw new TypeError("Cannot call a class as a function")}function o(c,u){if(!c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u&&(typeof u=="object"||typeof u=="function")?u:c}function l(c,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof u);c.prototype=Object.create(u&&u.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),u&&(Object.setPrototypeOf?Object.setPrototypeOf(c,u):c.__proto__=u)}var d=(function(c){l(u,c);function u(x,b){return i(this,u),o(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,n.A_START_CHAR+x,b))}return e(u,[{key:"valid",value:function(){return new RegExp("^"+n.A_CHARS+"+$").test(this.data)}}]),u})(r.default);return xy.default=d,xy}var py={},hL;function SAe(){if(hL)return py;hL=1,Object.defineProperty(py,"__esModule",{value:!0});var e=(function(){function c(u,x){for(var b=0;b<x.length;b++){var g=x[b];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(u,g.key,g)}}return function(u,x,b){return x&&c(u.prototype,x),b&&c(u,b),u}})(),t=G5(),r=a(t),n=Ev();function a(c){return c&&c.__esModule?c:{default:c}}function i(c,u){if(!(c instanceof u))throw new TypeError("Cannot call a class as a function")}function o(c,u){if(!c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u&&(typeof u=="object"||typeof u=="function")?u:c}function l(c,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof u);c.prototype=Object.create(u&&u.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),u&&(Object.setPrototypeOf?Object.setPrototypeOf(c,u):c.__proto__=u)}var d=(function(c){l(u,c);function u(x,b){return i(this,u),o(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,n.B_START_CHAR+x,b))}return e(u,[{key:"valid",value:function(){return new RegExp("^"+n.B_CHARS+"+$").test(this.data)}}]),u})(r.default);return py.default=d,py}var gy={},fL;function jAe(){if(fL)return gy;fL=1,Object.defineProperty(gy,"__esModule",{value:!0});var e=(function(){function c(u,x){for(var b=0;b<x.length;b++){var g=x[b];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(u,g.key,g)}}return function(u,x,b){return x&&c(u.prototype,x),b&&c(u,b),u}})(),t=G5(),r=a(t),n=Ev();function a(c){return c&&c.__esModule?c:{default:c}}function i(c,u){if(!(c instanceof u))throw new TypeError("Cannot call a class as a function")}function o(c,u){if(!c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u&&(typeof u=="object"||typeof u=="function")?u:c}function l(c,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof u);c.prototype=Object.create(u&&u.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),u&&(Object.setPrototypeOf?Object.setPrototypeOf(c,u):c.__proto__=u)}var d=(function(c){l(u,c);function u(x,b){return i(this,u),o(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,n.C_START_CHAR+x,b))}return e(u,[{key:"valid",value:function(){return new RegExp("^"+n.C_CHARS+"+$").test(this.data)}}]),u})(r.default);return gy.default=d,gy}var mL;function CAe(){if(mL)return Vd;mL=1,Object.defineProperty(Vd,"__esModule",{value:!0}),Vd.CODE128C=Vd.CODE128B=Vd.CODE128A=Vd.CODE128=void 0;var e=NAe(),t=d(e),r=_Ae(),n=d(r),a=SAe(),i=d(a),o=jAe(),l=d(o);function d(c){return c&&c.__esModule?c:{default:c}}return Vd.CODE128=t.default,Vd.CODE128A=n.default,Vd.CODE128B=i.default,Vd.CODE128C=l.default,Vd}var kl={},by={},w0={},xL;function Tv(){return xL||(xL=1,Object.defineProperty(w0,"__esModule",{value:!0}),w0.SIDE_BIN="101",w0.MIDDLE_BIN="01010",w0.BINARIES={L:["0001101","0011001","0010011","0111101","0100011","0110001","0101111","0111011","0110111","0001011"],G:["0100111","0110011","0011011","0100001","0011101","0111001","0000101","0010001","0001001","0010111"],R:["1110010","1100110","1101100","1000010","1011100","1001110","1010000","1000100","1001000","1110100"],O:["0001101","0011001","0010011","0111101","0100011","0110001","0101111","0111011","0110111","0001011"],E:["0100111","0110011","0011011","0100001","0011101","0111001","0000101","0010001","0001001","0010111"]},w0.EAN2_STRUCTURE=["LL","LG","GL","GG"],w0.EAN5_STRUCTURE=["GGLLL","GLGLL","GLLGL","GLLLG","LGGLL","LLGGL","LLLGG","LGLGL","LGLLG","LLGLG"],w0.EAN13_STRUCTURE=["LLLLLL","LLGLGG","LLGGLG","LLGGGL","LGLLGG","LGGLLG","LGGGLL","LGLGLG","LGLGGL","LGGLGL"]),w0}var vy={},yy={},pL;function Ov(){if(pL)return yy;pL=1,Object.defineProperty(yy,"__esModule",{value:!0});var e=Tv(),t=function(n,a,i){var o=n.split("").map(function(d,c){return e.BINARIES[a[c]]}).map(function(d,c){return d?d[n[c]]:""});if(i){var l=n.length-1;o=o.map(function(d,c){return c<l?d+i:d})}return o.join("")};return yy.default=t,yy}var gL;function nK(){if(gL)return vy;gL=1,Object.defineProperty(vy,"__esModule",{value:!0});var e=(function(){function x(b,g){for(var k=0;k<g.length;k++){var y=g[k];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(b,y.key,y)}}return function(b,g,k){return g&&x(b.prototype,g),k&&x(b,k),b}})(),t=Tv(),r=Ov(),n=o(r),a=$c(),i=o(a);function o(x){return x&&x.__esModule?x:{default:x}}function l(x,b){if(!(x instanceof b))throw new TypeError("Cannot call a class as a function")}function d(x,b){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:x}function c(x,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);x.prototype=Object.create(b&&b.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(x,b):x.__proto__=b)}var u=(function(x){c(b,x);function b(g,k){l(this,b);var y=d(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,g,k));return y.fontSize=!k.flat&&k.fontSize>k.width*10?k.width*10:k.fontSize,y.guardHeight=k.height+y.fontSize/2+k.textMargin,y}return e(b,[{key:"encode",value:function(){return this.options.flat?this.encodeFlat():this.encodeGuarded()}},{key:"leftText",value:function(k,y){return this.text.substr(k,y)}},{key:"leftEncode",value:function(k,y){return(0,n.default)(k,y)}},{key:"rightText",value:function(k,y){return this.text.substr(k,y)}},{key:"rightEncode",value:function(k,y){return(0,n.default)(k,y)}},{key:"encodeGuarded",value:function(){var k={fontSize:this.fontSize},y={height:this.guardHeight};return[{data:t.SIDE_BIN,options:y},{data:this.leftEncode(),text:this.leftText(),options:k},{data:t.MIDDLE_BIN,options:y},{data:this.rightEncode(),text:this.rightText(),options:k},{data:t.SIDE_BIN,options:y}]}},{key:"encodeFlat",value:function(){var k=[t.SIDE_BIN,this.leftEncode(),t.MIDDLE_BIN,this.rightEncode(),t.SIDE_BIN];return{data:k.join(""),text:this.text}}}]),b})(i.default);return vy.default=u,vy}var bL;function AAe(){if(bL)return by;bL=1,Object.defineProperty(by,"__esModule",{value:!0});var e=(function(){function x(b,g){for(var k=0;k<g.length;k++){var y=g[k];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(b,y.key,y)}}return function(b,g,k){return g&&x(b.prototype,g),k&&x(b,k),b}})(),t=function x(b,g,k){b===null&&(b=Function.prototype);var y=Object.getOwnPropertyDescriptor(b,g);if(y===void 0){var N=Object.getPrototypeOf(b);return N===null?void 0:x(N,g,k)}else{if("value"in y)return y.value;var S=y.get;return S===void 0?void 0:S.call(k)}},r=Tv(),n=nK(),a=i(n);function i(x){return x&&x.__esModule?x:{default:x}}function o(x,b){if(!(x instanceof b))throw new TypeError("Cannot call a class as a function")}function l(x,b){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:x}function d(x,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);x.prototype=Object.create(b&&b.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(x,b):x.__proto__=b)}var c=function(b){var g=b.substr(0,12).split("").map(function(k){return+k}).reduce(function(k,y,N){return N%2?k+y*3:k+y},0);return(10-g%10)%10},u=(function(x){d(b,x);function b(g,k){o(this,b),g.search(/^[0-9]{12}$/)!==-1&&(g+=c(g));var y=l(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,g,k));return y.lastChar=k.lastChar,y}return e(b,[{key:"valid",value:function(){return this.data.search(/^[0-9]{13}$/)!==-1&&+this.data[12]===c(this.data)}},{key:"leftText",value:function(){return t(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"leftText",this).call(this,1,6)}},{key:"leftEncode",value:function(){var k=this.data.substr(1,6),y=r.EAN13_STRUCTURE[this.data[0]];return t(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"leftEncode",this).call(this,k,y)}},{key:"rightText",value:function(){return t(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"rightText",this).call(this,7,6)}},{key:"rightEncode",value:function(){var k=this.data.substr(7,6);return t(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"rightEncode",this).call(this,k,"RRRRRR")}},{key:"encodeGuarded",value:function(){var k=t(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"encodeGuarded",this).call(this);return this.options.displayValue&&(k.unshift({data:"000000000000",text:this.text.substr(0,1),options:{textAlign:"left",fontSize:this.fontSize}}),this.options.lastChar&&(k.push({data:"00"}),k.push({data:"00000",text:this.options.lastChar,options:{fontSize:this.fontSize}}))),k}}]),b})(a.default);return by.default=u,by}var wy={},vL;function EAe(){if(vL)return wy;vL=1,Object.defineProperty(wy,"__esModule",{value:!0});var e=(function(){function u(x,b){for(var g=0;g<b.length;g++){var k=b[g];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(x,k.key,k)}}return function(x,b,g){return b&&u(x.prototype,b),g&&u(x,g),x}})(),t=function u(x,b,g){x===null&&(x=Function.prototype);var k=Object.getOwnPropertyDescriptor(x,b);if(k===void 0){var y=Object.getPrototypeOf(x);return y===null?void 0:u(y,b,g)}else{if("value"in k)return k.value;var N=k.get;return N===void 0?void 0:N.call(g)}},r=nK(),n=a(r);function a(u){return u&&u.__esModule?u:{default:u}}function i(u,x){if(!(u instanceof x))throw new TypeError("Cannot call a class as a function")}function o(u,x){if(!u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:u}function l(u,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);u.prototype=Object.create(x&&x.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(u,x):u.__proto__=x)}var d=function(x){var b=x.substr(0,7).split("").map(function(g){return+g}).reduce(function(g,k,y){return y%2?g+k:g+k*3},0);return(10-b%10)%10},c=(function(u){l(x,u);function x(b,g){return i(this,x),b.search(/^[0-9]{7}$/)!==-1&&(b+=d(b)),o(this,(x.__proto__||Object.getPrototypeOf(x)).call(this,b,g))}return e(x,[{key:"valid",value:function(){return this.data.search(/^[0-9]{8}$/)!==-1&&+this.data[7]===d(this.data)}},{key:"leftText",value:function(){return t(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"leftText",this).call(this,0,4)}},{key:"leftEncode",value:function(){var g=this.data.substr(0,4);return t(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"leftEncode",this).call(this,g,"LLLL")}},{key:"rightText",value:function(){return t(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"rightText",this).call(this,4,4)}},{key:"rightEncode",value:function(){var g=this.data.substr(4,4);return t(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"rightEncode",this).call(this,g,"RRRR")}}]),x})(n.default);return wy.default=c,wy}var ky={},yL;function TAe(){if(yL)return ky;yL=1,Object.defineProperty(ky,"__esModule",{value:!0});var e=(function(){function b(g,k){for(var y=0;y<k.length;y++){var N=k[y];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(g,N.key,N)}}return function(g,k,y){return k&&b(g.prototype,k),y&&b(g,y),g}})(),t=Tv(),r=Ov(),n=o(r),a=$c(),i=o(a);function o(b){return b&&b.__esModule?b:{default:b}}function l(b,g){if(!(b instanceof g))throw new TypeError("Cannot call a class as a function")}function d(b,g){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:b}function c(b,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);b.prototype=Object.create(g&&g.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(b,g):b.__proto__=g)}var u=function(g){var k=g.split("").map(function(y){return+y}).reduce(function(y,N,S){return S%2?y+N*9:y+N*3},0);return k%10},x=(function(b){c(g,b);function g(k,y){return l(this,g),d(this,(g.__proto__||Object.getPrototypeOf(g)).call(this,k,y))}return e(g,[{key:"valid",value:function(){return this.data.search(/^[0-9]{5}$/)!==-1}},{key:"encode",value:function(){var y=t.EAN5_STRUCTURE[u(this.data)];return{data:"1011"+(0,n.default)(this.data,y,"01"),text:this.text}}}]),g})(i.default);return ky.default=x,ky}var Ny={},wL;function OAe(){if(wL)return Ny;wL=1,Object.defineProperty(Ny,"__esModule",{value:!0});var e=(function(){function x(b,g){for(var k=0;k<g.length;k++){var y=g[k];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(b,y.key,y)}}return function(b,g,k){return g&&x(b.prototype,g),k&&x(b,k),b}})(),t=Tv(),r=Ov(),n=o(r),a=$c(),i=o(a);function o(x){return x&&x.__esModule?x:{default:x}}function l(x,b){if(!(x instanceof b))throw new TypeError("Cannot call a class as a function")}function d(x,b){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:x}function c(x,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);x.prototype=Object.create(b&&b.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(x,b):x.__proto__=b)}var u=(function(x){c(b,x);function b(g,k){return l(this,b),d(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,g,k))}return e(b,[{key:"valid",value:function(){return this.data.search(/^[0-9]{2}$/)!==-1}},{key:"encode",value:function(){var k=t.EAN2_STRUCTURE[parseInt(this.data)%4];return{data:"1011"+(0,n.default)(this.data,k,"01"),text:this.text}}}]),b})(i.default);return Ny.default=u,Ny}var Cg={},kL;function aK(){if(kL)return Cg;kL=1,Object.defineProperty(Cg,"__esModule",{value:!0});var e=(function(){function x(b,g){for(var k=0;k<g.length;k++){var y=g[k];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(b,y.key,y)}}return function(b,g,k){return g&&x(b.prototype,g),k&&x(b,k),b}})();Cg.checksum=u;var t=Ov(),r=i(t),n=$c(),a=i(n);function i(x){return x&&x.__esModule?x:{default:x}}function o(x,b){if(!(x instanceof b))throw new TypeError("Cannot call a class as a function")}function l(x,b){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:x}function d(x,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);x.prototype=Object.create(b&&b.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(x,b):x.__proto__=b)}var c=(function(x){d(b,x);function b(g,k){o(this,b),g.search(/^[0-9]{11}$/)!==-1&&(g+=u(g));var y=l(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,g,k));return y.displayValue=k.displayValue,k.fontSize>k.width*10?y.fontSize=k.width*10:y.fontSize=k.fontSize,y.guardHeight=k.height+y.fontSize/2+k.textMargin,y}return e(b,[{key:"valid",value:function(){return this.data.search(/^[0-9]{12}$/)!==-1&&this.data[11]==u(this.data)}},{key:"encode",value:function(){return this.options.flat?this.flatEncoding():this.guardedEncoding()}},{key:"flatEncoding",value:function(){var k="";return k+="101",k+=(0,r.default)(this.data.substr(0,6),"LLLLLL"),k+="01010",k+=(0,r.default)(this.data.substr(6,6),"RRRRRR"),k+="101",{data:k,text:this.text}}},{key:"guardedEncoding",value:function(){var k=[];return this.displayValue&&k.push({data:"00000000",text:this.text.substr(0,1),options:{textAlign:"left",fontSize:this.fontSize}}),k.push({data:"101"+(0,r.default)(this.data[0],"L"),options:{height:this.guardHeight}}),k.push({data:(0,r.default)(this.data.substr(1,5),"LLLLL"),text:this.text.substr(1,5),options:{fontSize:this.fontSize}}),k.push({data:"01010",options:{height:this.guardHeight}}),k.push({data:(0,r.default)(this.data.substr(6,5),"RRRRR"),text:this.text.substr(6,5),options:{fontSize:this.fontSize}}),k.push({data:(0,r.default)(this.data[11],"R")+"101",options:{height:this.guardHeight}}),this.displayValue&&k.push({data:"00000000",text:this.text.substr(11,1),options:{textAlign:"right",fontSize:this.fontSize}}),k}}]),b})(a.default);function u(x){var b=0,g;for(g=1;g<11;g+=2)b+=parseInt(x[g]);for(g=0;g<11;g+=2)b+=parseInt(x[g])*3;return(10-b%10)%10}return Cg.default=c,Cg}var _y={},NL;function PAe(){if(NL)return _y;NL=1,Object.defineProperty(_y,"__esModule",{value:!0});var e=(function(){function k(y,N){for(var S=0;S<N.length;S++){var O=N[S];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(y,O.key,O)}}return function(y,N,S){return N&&k(y.prototype,N),S&&k(y,S),y}})(),t=Ov(),r=o(t),n=$c(),a=o(n),i=aK();function o(k){return k&&k.__esModule?k:{default:k}}function l(k,y){if(!(k instanceof y))throw new TypeError("Cannot call a class as a function")}function d(k,y){if(!k)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:k}function c(k,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);k.prototype=Object.create(y&&y.prototype,{constructor:{value:k,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(k,y):k.__proto__=y)}var u=["XX00000XXX","XX10000XXX","XX20000XXX","XXX00000XX","XXXX00000X","XXXXX00005","XXXXX00006","XXXXX00007","XXXXX00008","XXXXX00009"],x=[["EEEOOO","OOOEEE"],["EEOEOO","OOEOEE"],["EEOOEO","OOEEOE"],["EEOOOE","OOEEEO"],["EOEEOO","OEOOEE"],["EOOEEO","OEEOOE"],["EOOOEE","OEEEOO"],["EOEOEO","OEOEOE"],["EOEOOE","OEOEEO"],["EOOEOE","OEEOEO"]],b=(function(k){c(y,k);function y(N,S){l(this,y);var O=d(this,(y.__proto__||Object.getPrototypeOf(y)).call(this,N,S));if(O.isValid=!1,N.search(/^[0-9]{6}$/)!==-1)O.middleDigits=N,O.upcA=g(N,"0"),O.text=S.text||""+O.upcA[0]+N+O.upcA[O.upcA.length-1],O.isValid=!0;else if(N.search(/^[01][0-9]{7}$/)!==-1)if(O.middleDigits=N.substring(1,N.length-1),O.upcA=g(O.middleDigits,N[0]),O.upcA[O.upcA.length-1]===N[N.length-1])O.isValid=!0;else return d(O);else return d(O);return O.displayValue=S.displayValue,S.fontSize>S.width*10?O.fontSize=S.width*10:O.fontSize=S.fontSize,O.guardHeight=S.height+O.fontSize/2+S.textMargin,O}return e(y,[{key:"valid",value:function(){return this.isValid}},{key:"encode",value:function(){return this.options.flat?this.flatEncoding():this.guardedEncoding()}},{key:"flatEncoding",value:function(){var S="";return S+="101",S+=this.encodeMiddleDigits(),S+="010101",{data:S,text:this.text}}},{key:"guardedEncoding",value:function(){var S=[];return this.displayValue&&S.push({data:"00000000",text:this.text[0],options:{textAlign:"left",fontSize:this.fontSize}}),S.push({data:"101",options:{height:this.guardHeight}}),S.push({data:this.encodeMiddleDigits(),text:this.text.substring(1,7),options:{fontSize:this.fontSize}}),S.push({data:"010101",options:{height:this.guardHeight}}),this.displayValue&&S.push({data:"00000000",text:this.text[7],options:{textAlign:"right",fontSize:this.fontSize}}),S}},{key:"encodeMiddleDigits",value:function(){var S=this.upcA[0],O=this.upcA[this.upcA.length-1],A=x[parseInt(O)][parseInt(S)];return(0,r.default)(this.middleDigits,A)}}]),y})(a.default);function g(k,y){for(var N=parseInt(k[k.length-1]),S=u[N],O="",A=0,P=0;P<S.length;P++){var q=S[P];q==="X"?O+=k[A++]:O+=q}return O=""+y+O,""+O+(0,i.checksum)(O)}return _y.default=b,_y}var _L;function IAe(){if(_L)return kl;_L=1,Object.defineProperty(kl,"__esModule",{value:!0}),kl.UPCE=kl.UPC=kl.EAN2=kl.EAN5=kl.EAN8=kl.EAN13=void 0;var e=AAe(),t=b(e),r=EAe(),n=b(r),a=TAe(),i=b(a),o=OAe(),l=b(o),d=aK(),c=b(d),u=PAe(),x=b(u);function b(g){return g&&g.__esModule?g:{default:g}}return kl.EAN13=t.default,kl.EAN8=n.default,kl.EAN5=i.default,kl.EAN2=l.default,kl.UPC=c.default,kl.UPCE=x.default,kl}var Xf={},Sy={},l1={},SL;function DAe(){return SL||(SL=1,Object.defineProperty(l1,"__esModule",{value:!0}),l1.START_BIN="1010",l1.END_BIN="11101",l1.BINARIES=["00110","10001","01001","11000","00101","10100","01100","00011","10010","01010"]),l1}var jL;function sK(){if(jL)return Sy;jL=1,Object.defineProperty(Sy,"__esModule",{value:!0});var e=(function(){function c(u,x){for(var b=0;b<x.length;b++){var g=x[b];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(u,g.key,g)}}return function(u,x,b){return x&&c(u.prototype,x),b&&c(u,b),u}})(),t=DAe(),r=$c(),n=a(r);function a(c){return c&&c.__esModule?c:{default:c}}function i(c,u){if(!(c instanceof u))throw new TypeError("Cannot call a class as a function")}function o(c,u){if(!c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u&&(typeof u=="object"||typeof u=="function")?u:c}function l(c,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof u);c.prototype=Object.create(u&&u.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),u&&(Object.setPrototypeOf?Object.setPrototypeOf(c,u):c.__proto__=u)}var d=(function(c){l(u,c);function u(){return i(this,u),o(this,(u.__proto__||Object.getPrototypeOf(u)).apply(this,arguments))}return e(u,[{key:"valid",value:function(){return this.data.search(/^([0-9]{2})+$/)!==-1}},{key:"encode",value:function(){var b=this,g=this.data.match(/.{2}/g).map(function(k){return b.encodePair(k)}).join("");return{data:t.START_BIN+g+t.END_BIN,text:this.text}}},{key:"encodePair",value:function(b){var g=t.BINARIES[b[1]];return t.BINARIES[b[0]].split("").map(function(k,y){return(k==="1"?"111":"1")+(g[y]==="1"?"000":"0")}).join("")}}]),u})(n.default);return Sy.default=d,Sy}var jy={},CL;function MAe(){if(CL)return jy;CL=1,Object.defineProperty(jy,"__esModule",{value:!0});var e=(function(){function c(u,x){for(var b=0;b<x.length;b++){var g=x[b];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(u,g.key,g)}}return function(u,x,b){return x&&c(u.prototype,x),b&&c(u,b),u}})(),t=sK(),r=n(t);function n(c){return c&&c.__esModule?c:{default:c}}function a(c,u){if(!(c instanceof u))throw new TypeError("Cannot call a class as a function")}function i(c,u){if(!c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u&&(typeof u=="object"||typeof u=="function")?u:c}function o(c,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof u);c.prototype=Object.create(u&&u.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),u&&(Object.setPrototypeOf?Object.setPrototypeOf(c,u):c.__proto__=u)}var l=function(u){var x=u.substr(0,13).split("").map(function(b){return parseInt(b,10)}).reduce(function(b,g,k){return b+g*(3-k%2*2)},0);return Math.ceil(x/10)*10-x},d=(function(c){o(u,c);function u(x,b){return a(this,u),x.search(/^[0-9]{13}$/)!==-1&&(x+=l(x)),i(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,x,b))}return e(u,[{key:"valid",value:function(){return this.data.search(/^[0-9]{14}$/)!==-1&&+this.data[13]===l(this.data)}}]),u})(r.default);return jy.default=d,jy}var AL;function LAe(){if(AL)return Xf;AL=1,Object.defineProperty(Xf,"__esModule",{value:!0}),Xf.ITF14=Xf.ITF=void 0;var e=sK(),t=a(e),r=MAe(),n=a(r);function a(i){return i&&i.__esModule?i:{default:i}}return Xf.ITF=t.default,Xf.ITF14=n.default,Xf}var vc={},Cy={},EL;function Pv(){if(EL)return Cy;EL=1,Object.defineProperty(Cy,"__esModule",{value:!0});var e=(function(){function c(u,x){for(var b=0;b<x.length;b++){var g=x[b];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(u,g.key,g)}}return function(u,x,b){return x&&c(u.prototype,x),b&&c(u,b),u}})(),t=$c(),r=n(t);function n(c){return c&&c.__esModule?c:{default:c}}function a(c,u){if(!(c instanceof u))throw new TypeError("Cannot call a class as a function")}function i(c,u){if(!c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u&&(typeof u=="object"||typeof u=="function")?u:c}function o(c,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof u);c.prototype=Object.create(u&&u.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),u&&(Object.setPrototypeOf?Object.setPrototypeOf(c,u):c.__proto__=u)}var l=(function(c){o(u,c);function u(x,b){return a(this,u),i(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,x,b))}return e(u,[{key:"encode",value:function(){for(var b="110",g=0;g<this.data.length;g++){var k=parseInt(this.data[g]),y=k.toString(2);y=d(y,4-y.length);for(var N=0;N<y.length;N++)b+=y[N]=="0"?"100":"110"}return b+="1001",{data:b,text:this.text}}},{key:"valid",value:function(){return this.data.search(/^[0-9]+$/)!==-1}}]),u})(r.default);function d(c,u){for(var x=0;x<u;x++)c="0"+c;return c}return Cy.default=l,Cy}var Ay={},Ag={},TL;function K5(){if(TL)return Ag;TL=1,Object.defineProperty(Ag,"__esModule",{value:!0}),Ag.mod10=e,Ag.mod11=t;function e(r){for(var n=0,a=0;a<r.length;a++){var i=parseInt(r[a]);(a+r.length)%2===0?n+=i:n+=i*2%10+Math.floor(i*2/10)}return(10-n%10)%10}function t(r){for(var n=0,a=[2,3,4,5,6,7],i=0;i<r.length;i++){var o=parseInt(r[r.length-1-i]);n+=a[i%a.length]*o}return(11-n%11)%11}return Ag}var OL;function RAe(){if(OL)return Ay;OL=1,Object.defineProperty(Ay,"__esModule",{value:!0});var e=Pv(),t=n(e),r=K5();function n(d){return d&&d.__esModule?d:{default:d}}function a(d,c){if(!(d instanceof c))throw new TypeError("Cannot call a class as a function")}function i(d,c){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c&&(typeof c=="object"||typeof c=="function")?c:d}function o(d,c){if(typeof c!="function"&&c!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof c);d.prototype=Object.create(c&&c.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),c&&(Object.setPrototypeOf?Object.setPrototypeOf(d,c):d.__proto__=c)}var l=(function(d){o(c,d);function c(u,x){return a(this,c),i(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,u+(0,r.mod10)(u),x))}return c})(t.default);return Ay.default=l,Ay}var Ey={},PL;function FAe(){if(PL)return Ey;PL=1,Object.defineProperty(Ey,"__esModule",{value:!0});var e=Pv(),t=n(e),r=K5();function n(d){return d&&d.__esModule?d:{default:d}}function a(d,c){if(!(d instanceof c))throw new TypeError("Cannot call a class as a function")}function i(d,c){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c&&(typeof c=="object"||typeof c=="function")?c:d}function o(d,c){if(typeof c!="function"&&c!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof c);d.prototype=Object.create(c&&c.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),c&&(Object.setPrototypeOf?Object.setPrototypeOf(d,c):d.__proto__=c)}var l=(function(d){o(c,d);function c(u,x){return a(this,c),i(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,u+(0,r.mod11)(u),x))}return c})(t.default);return Ey.default=l,Ey}var Ty={},IL;function BAe(){if(IL)return Ty;IL=1,Object.defineProperty(Ty,"__esModule",{value:!0});var e=Pv(),t=n(e),r=K5();function n(d){return d&&d.__esModule?d:{default:d}}function a(d,c){if(!(d instanceof c))throw new TypeError("Cannot call a class as a function")}function i(d,c){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c&&(typeof c=="object"||typeof c=="function")?c:d}function o(d,c){if(typeof c!="function"&&c!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof c);d.prototype=Object.create(c&&c.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),c&&(Object.setPrototypeOf?Object.setPrototypeOf(d,c):d.__proto__=c)}var l=(function(d){o(c,d);function c(u,x){return a(this,c),u+=(0,r.mod10)(u),u+=(0,r.mod10)(u),i(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,u,x))}return c})(t.default);return Ty.default=l,Ty}var Oy={},DL;function UAe(){if(DL)return Oy;DL=1,Object.defineProperty(Oy,"__esModule",{value:!0});var e=Pv(),t=n(e),r=K5();function n(d){return d&&d.__esModule?d:{default:d}}function a(d,c){if(!(d instanceof c))throw new TypeError("Cannot call a class as a function")}function i(d,c){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c&&(typeof c=="object"||typeof c=="function")?c:d}function o(d,c){if(typeof c!="function"&&c!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof c);d.prototype=Object.create(c&&c.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),c&&(Object.setPrototypeOf?Object.setPrototypeOf(d,c):d.__proto__=c)}var l=(function(d){o(c,d);function c(u,x){return a(this,c),u+=(0,r.mod11)(u),u+=(0,r.mod10)(u),i(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,u,x))}return c})(t.default);return Oy.default=l,Oy}var ML;function zAe(){if(ML)return vc;ML=1,Object.defineProperty(vc,"__esModule",{value:!0}),vc.MSI1110=vc.MSI1010=vc.MSI11=vc.MSI10=vc.MSI=void 0;var e=Pv(),t=u(e),r=RAe(),n=u(r),a=FAe(),i=u(a),o=BAe(),l=u(o),d=UAe(),c=u(d);function u(x){return x&&x.__esModule?x:{default:x}}return vc.MSI=t.default,vc.MSI10=n.default,vc.MSI11=i.default,vc.MSI1010=l.default,vc.MSI1110=c.default,vc}var Eg={},LL;function qAe(){if(LL)return Eg;LL=1,Object.defineProperty(Eg,"__esModule",{value:!0}),Eg.pharmacode=void 0;var e=(function(){function d(c,u){for(var x=0;x<u.length;x++){var b=u[x];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(c,b.key,b)}}return function(c,u,x){return u&&d(c.prototype,u),x&&d(c,x),c}})(),t=$c(),r=n(t);function n(d){return d&&d.__esModule?d:{default:d}}function a(d,c){if(!(d instanceof c))throw new TypeError("Cannot call a class as a function")}function i(d,c){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c&&(typeof c=="object"||typeof c=="function")?c:d}function o(d,c){if(typeof c!="function"&&c!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof c);d.prototype=Object.create(c&&c.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),c&&(Object.setPrototypeOf?Object.setPrototypeOf(d,c):d.__proto__=c)}var l=(function(d){o(c,d);function c(u,x){a(this,c);var b=i(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,u,x));return b.number=parseInt(u,10),b}return e(c,[{key:"encode",value:function(){for(var x=this.number,b="";!isNaN(x)&&x!=0;)x%2===0?(b="11100"+b,x=(x-2)/2):(b="100"+b,x=(x-1)/2);return b=b.slice(0,-2),{data:b,text:this.text}}},{key:"valid",value:function(){return this.number>=3&&this.number<=131070}}]),c})(r.default);return Eg.pharmacode=l,Eg}var Tg={},RL;function HAe(){if(RL)return Tg;RL=1,Object.defineProperty(Tg,"__esModule",{value:!0}),Tg.codabar=void 0;var e=(function(){function d(c,u){for(var x=0;x<u.length;x++){var b=u[x];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(c,b.key,b)}}return function(c,u,x){return u&&d(c.prototype,u),x&&d(c,x),c}})(),t=$c(),r=n(t);function n(d){return d&&d.__esModule?d:{default:d}}function a(d,c){if(!(d instanceof c))throw new TypeError("Cannot call a class as a function")}function i(d,c){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c&&(typeof c=="object"||typeof c=="function")?c:d}function o(d,c){if(typeof c!="function"&&c!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof c);d.prototype=Object.create(c&&c.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),c&&(Object.setPrototypeOf?Object.setPrototypeOf(d,c):d.__proto__=c)}var l=(function(d){o(c,d);function c(u,x){a(this,c),u.search(/^[0-9\-\$\:\.\+\/]+$/)===0&&(u="A"+u+"A");var b=i(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,u.toUpperCase(),x));return b.text=b.options.text||b.text.replace(/[A-D]/g,""),b}return e(c,[{key:"valid",value:function(){return this.data.search(/^[A-D][0-9\-\$\:\.\+\/]+[A-D]$/)!==-1}},{key:"encode",value:function(){for(var x=[],b=this.getEncodings(),g=0;g<this.data.length;g++)x.push(b[this.data.charAt(g)]),g!==this.data.length-1&&x.push("0");return{text:this.text,data:x.join("")}}},{key:"getEncodings",value:function(){return{0:"101010011",1:"101011001",2:"101001011",3:"110010101",4:"101101001",5:"110101001",6:"100101011",7:"100101101",8:"100110101",9:"110100101","-":"101001101",$:"101100101",":":"1101011011","/":"1101101011",".":"1101101101","+":"1011011011",A:"1011001001",B:"1001001011",C:"1010010011",D:"1010011001"}}}]),c})(r.default);return Tg.codabar=l,Tg}var Yf={},Py={},c1={},FL;function $Ae(){return FL||(FL=1,Object.defineProperty(c1,"__esModule",{value:!0}),c1.SYMBOLS=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","-","."," ","$","/","+","%","($)","(%)","(/)","(+)",""],c1.BINARIES=["100010100","101001000","101000100","101000010","100101000","100100100","100100010","101010000","100010010","100001010","110101000","110100100","110100010","110010100","110010010","110001010","101101000","101100100","101100010","100110100","100011010","101011000","101001100","101000110","100101100","100010110","110110100","110110010","110101100","110100110","110010110","110011010","101101100","101100110","100110110","100111010","100101110","111010100","111010010","111001010","101101110","101110110","110101110","100100110","111011010","111010110","100110010","101011110"],c1.MULTI_SYMBOLS={"\0":["(%)","U"],"":["($)","A"],"":["($)","B"],"":["($)","C"],"":["($)","D"],"":["($)","E"],"":["($)","F"],"\x07":["($)","G"],"\b":["($)","H"],"	":["($)","I"],"\n":["($)","J"],"\v":["($)","K"],"\f":["($)","L"],"\r":["($)","M"],"":["($)","N"],"":["($)","O"],"":["($)","P"],"":["($)","Q"],"":["($)","R"],"":["($)","S"],"":["($)","T"],"":["($)","U"],"":["($)","V"],"":["($)","W"],"":["($)","X"],"":["($)","Y"],"":["($)","Z"],"\x1B":["(%)","A"],"":["(%)","B"],"":["(%)","C"],"":["(%)","D"],"":["(%)","E"],"!":["(/)","A"],'"':["(/)","B"],"#":["(/)","C"],"&":["(/)","F"],"'":["(/)","G"],"(":["(/)","H"],")":["(/)","I"],"*":["(/)","J"],",":["(/)","L"],":":["(/)","Z"],";":["(%)","F"],"<":["(%)","G"],"=":["(%)","H"],">":["(%)","I"],"?":["(%)","J"],"@":["(%)","V"],"[":["(%)","K"],"\\":["(%)","L"],"]":["(%)","M"],"^":["(%)","N"],_:["(%)","O"],"`":["(%)","W"],a:["(+)","A"],b:["(+)","B"],c:["(+)","C"],d:["(+)","D"],e:["(+)","E"],f:["(+)","F"],g:["(+)","G"],h:["(+)","H"],i:["(+)","I"],j:["(+)","J"],k:["(+)","K"],l:["(+)","L"],m:["(+)","M"],n:["(+)","N"],o:["(+)","O"],p:["(+)","P"],q:["(+)","Q"],r:["(+)","R"],s:["(+)","S"],t:["(+)","T"],u:["(+)","U"],v:["(+)","V"],w:["(+)","W"],x:["(+)","X"],y:["(+)","Y"],z:["(+)","Z"],"{":["(%)","P"],"|":["(%)","Q"],"}":["(%)","R"],"~":["(%)","S"],"":["(%)","T"]}),c1}var BL;function iK(){if(BL)return Py;BL=1,Object.defineProperty(Py,"__esModule",{value:!0});var e=(function(){function c(u,x){for(var b=0;b<x.length;b++){var g=x[b];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(u,g.key,g)}}return function(u,x,b){return x&&c(u.prototype,x),b&&c(u,b),u}})(),t=$Ae(),r=$c(),n=a(r);function a(c){return c&&c.__esModule?c:{default:c}}function i(c,u){if(!(c instanceof u))throw new TypeError("Cannot call a class as a function")}function o(c,u){if(!c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u&&(typeof u=="object"||typeof u=="function")?u:c}function l(c,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof u);c.prototype=Object.create(u&&u.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),u&&(Object.setPrototypeOf?Object.setPrototypeOf(c,u):c.__proto__=u)}var d=(function(c){l(u,c);function u(x,b){return i(this,u),o(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,x,b))}return e(u,[{key:"valid",value:function(){return/^[0-9A-Z\-. $/+%]+$/.test(this.data)}},{key:"encode",value:function(){var b=this.data.split("").flatMap(function(N){return t.MULTI_SYMBOLS[N]||N}),g=b.map(function(N){return u.getEncoding(N)}).join(""),k=u.checksum(b,20),y=u.checksum(b.concat(k),15);return{text:this.text,data:u.getEncoding("")+g+u.getEncoding(k)+u.getEncoding(y)+u.getEncoding("")+"1"}}}],[{key:"getEncoding",value:function(b){return t.BINARIES[u.symbolValue(b)]}},{key:"getSymbol",value:function(b){return t.SYMBOLS[b]}},{key:"symbolValue",value:function(b){return t.SYMBOLS.indexOf(b)}},{key:"checksum",value:function(b,g){var k=b.slice().reverse().reduce(function(y,N,S){var O=S%g+1;return y+u.symbolValue(N)*O},0);return u.getSymbol(k%47)}}]),u})(n.default);return Py.default=d,Py}var Iy={},UL;function VAe(){if(UL)return Iy;UL=1,Object.defineProperty(Iy,"__esModule",{value:!0});var e=(function(){function d(c,u){for(var x=0;x<u.length;x++){var b=u[x];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(c,b.key,b)}}return function(c,u,x){return u&&d(c.prototype,u),x&&d(c,x),c}})(),t=iK(),r=n(t);function n(d){return d&&d.__esModule?d:{default:d}}function a(d,c){if(!(d instanceof c))throw new TypeError("Cannot call a class as a function")}function i(d,c){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c&&(typeof c=="object"||typeof c=="function")?c:d}function o(d,c){if(typeof c!="function"&&c!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof c);d.prototype=Object.create(c&&c.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),c&&(Object.setPrototypeOf?Object.setPrototypeOf(d,c):d.__proto__=c)}var l=(function(d){o(c,d);function c(u,x){return a(this,c),i(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,u,x))}return e(c,[{key:"valid",value:function(){return/^[\x00-\x7f]+$/.test(this.data)}}]),c})(r.default);return Iy.default=l,Iy}var zL;function WAe(){if(zL)return Yf;zL=1,Object.defineProperty(Yf,"__esModule",{value:!0}),Yf.CODE93FullASCII=Yf.CODE93=void 0;var e=iK(),t=a(e),r=VAe(),n=a(r);function a(i){return i&&i.__esModule?i:{default:i}}return Yf.CODE93=t.default,Yf.CODE93FullASCII=n.default,Yf}var Og={},qL;function GAe(){if(qL)return Og;qL=1,Object.defineProperty(Og,"__esModule",{value:!0}),Og.GenericBarcode=void 0;var e=(function(){function d(c,u){for(var x=0;x<u.length;x++){var b=u[x];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(c,b.key,b)}}return function(c,u,x){return u&&d(c.prototype,u),x&&d(c,x),c}})(),t=$c(),r=n(t);function n(d){return d&&d.__esModule?d:{default:d}}function a(d,c){if(!(d instanceof c))throw new TypeError("Cannot call a class as a function")}function i(d,c){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c&&(typeof c=="object"||typeof c=="function")?c:d}function o(d,c){if(typeof c!="function"&&c!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof c);d.prototype=Object.create(c&&c.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),c&&(Object.setPrototypeOf?Object.setPrototypeOf(d,c):d.__proto__=c)}var l=(function(d){o(c,d);function c(u,x){return a(this,c),i(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,u,x))}return e(c,[{key:"encode",value:function(){return{data:"10101010101010101010101010101010101010101",text:this.text}}},{key:"valid",value:function(){return!0}}]),c})(r.default);return Og.GenericBarcode=l,Og}var HL;function KAe(){if(HL)return dy;HL=1,Object.defineProperty(dy,"__esModule",{value:!0});var e=wAe(),t=CAe(),r=IAe(),n=LAe(),a=zAe(),i=qAe(),o=HAe(),l=WAe(),d=GAe();return dy.default={CODE39:e.CODE39,CODE128:t.CODE128,CODE128A:t.CODE128A,CODE128B:t.CODE128B,CODE128C:t.CODE128C,EAN13:r.EAN13,EAN8:r.EAN8,EAN5:r.EAN5,EAN2:r.EAN2,UPC:r.UPC,UPCE:r.UPCE,ITF14:n.ITF14,ITF:n.ITF,MSI:a.MSI,MSI10:a.MSI10,MSI11:a.MSI11,MSI1010:a.MSI1010,MSI1110:a.MSI1110,pharmacode:i.pharmacode,codabar:o.codabar,CODE93:l.CODE93,CODE93FullASCII:l.CODE93FullASCII,GenericBarcode:d.GenericBarcode},dy}var Dy={},$L;function X5(){if($L)return Dy;$L=1,Object.defineProperty(Dy,"__esModule",{value:!0});var e=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t};return Dy.default=function(t,r){return e({},t,r)},Dy}var My={},VL;function XAe(){if(VL)return My;VL=1,Object.defineProperty(My,"__esModule",{value:!0}),My.default=e;function e(t){var r=[];function n(a){if(Array.isArray(a))for(var i=0;i<a.length;i++)n(a[i]);else a.text=a.text||"",a.data=a.data||"",r.push(a)}return n(t),r}return My}var Ly={},WL;function YAe(){if(WL)return Ly;WL=1,Object.defineProperty(Ly,"__esModule",{value:!0}),Ly.default=e;function e(t){return t.marginTop=t.marginTop||t.margin,t.marginBottom=t.marginBottom||t.margin,t.marginRight=t.marginRight||t.margin,t.marginLeft=t.marginLeft||t.margin,t}return Ly}var Ry={},Fy={},By={},GL;function oK(){if(GL)return By;GL=1,Object.defineProperty(By,"__esModule",{value:!0}),By.default=e;function e(t){var r=["width","height","textMargin","fontSize","margin","marginTop","marginBottom","marginLeft","marginRight"];for(var n in r)r.hasOwnProperty(n)&&(n=r[n],typeof t[n]=="string"&&(t[n]=parseInt(t[n],10)));return typeof t.displayValue=="string"&&(t.displayValue=t.displayValue!="false"),t}return By}var Uy={},KL;function lK(){if(KL)return Uy;KL=1,Object.defineProperty(Uy,"__esModule",{value:!0});var e={width:2,height:100,format:"auto",displayValue:!0,fontOptions:"",font:"monospace",text:void 0,textAlign:"center",textPosition:"bottom",textMargin:2,fontSize:20,background:"#ffffff",lineColor:"#000000",margin:10,marginTop:void 0,marginBottom:void 0,marginLeft:void 0,marginRight:void 0,valid:function(){}};return Uy.default=e,Uy}var XL;function QAe(){if(XL)return Fy;XL=1,Object.defineProperty(Fy,"__esModule",{value:!0});var e=oK(),t=a(e),r=lK(),n=a(r);function a(o){return o&&o.__esModule?o:{default:o}}function i(o){var l={};for(var d in n.default)n.default.hasOwnProperty(d)&&(o.hasAttribute("jsbarcode-"+d.toLowerCase())&&(l[d]=o.getAttribute("jsbarcode-"+d.toLowerCase())),o.hasAttribute("data-"+d.toLowerCase())&&(l[d]=o.getAttribute("data-"+d.toLowerCase())));return l.value=o.getAttribute("jsbarcode-value")||o.getAttribute("data-value"),l=(0,t.default)(l),l}return Fy.default=i,Fy}var zy={},qy={},yc={},YL;function cK(){if(YL)return yc;YL=1,Object.defineProperty(yc,"__esModule",{value:!0}),yc.getTotalWidthOfEncodings=yc.calculateEncodingAttributes=yc.getBarcodePadding=yc.getEncodingHeight=yc.getMaximumHeightOfEncodings=void 0;var e=X5(),t=r(e);function r(c){return c&&c.__esModule?c:{default:c}}function n(c,u){return u.height+(u.displayValue&&c.text.length>0?u.fontSize+u.textMargin:0)+u.marginTop+u.marginBottom}function a(c,u,x){if(x.displayValue&&u<c){if(x.textAlign=="center")return Math.floor((c-u)/2);if(x.textAlign=="left")return 0;if(x.textAlign=="right")return Math.floor(c-u)}return 0}function i(c,u,x){for(var b=0;b<c.length;b++){var g=c[b],k=(0,t.default)(u,g.options),y;k.displayValue?y=d(g.text,k,x):y=0;var N=g.data.length*k.width;g.width=Math.ceil(Math.max(y,N)),g.height=n(g,k),g.barcodePadding=a(y,N,k)}}function o(c){for(var u=0,x=0;x<c.length;x++)u+=c[x].width;return u}function l(c){for(var u=0,x=0;x<c.length;x++)c[x].height>u&&(u=c[x].height);return u}function d(c,u,x){var b;if(x)b=x;else if(typeof document<"u")b=document.createElement("canvas").getContext("2d");else return 0;b.font=u.fontOptions+" "+u.fontSize+"px "+u.font;var g=b.measureText(c);if(!g)return 0;var k=g.width;return k}return yc.getMaximumHeightOfEncodings=l,yc.getEncodingHeight=n,yc.getBarcodePadding=a,yc.calculateEncodingAttributes=i,yc.getTotalWidthOfEncodings=o,yc}var QL;function ZAe(){if(QL)return qy;QL=1,Object.defineProperty(qy,"__esModule",{value:!0});var e=(function(){function l(d,c){for(var u=0;u<c.length;u++){var x=c[u];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(d,x.key,x)}}return function(d,c,u){return c&&l(d.prototype,c),u&&l(d,u),d}})(),t=X5(),r=a(t),n=cK();function a(l){return l&&l.__esModule?l:{default:l}}function i(l,d){if(!(l instanceof d))throw new TypeError("Cannot call a class as a function")}var o=(function(){function l(d,c,u){i(this,l),this.canvas=d,this.encodings=c,this.options=u}return e(l,[{key:"render",value:function(){if(!this.canvas.getContext)throw new Error("The browser does not support canvas.");this.prepareCanvas();for(var c=0;c<this.encodings.length;c++){var u=(0,r.default)(this.options,this.encodings[c].options);this.drawCanvasBarcode(u,this.encodings[c]),this.drawCanvasText(u,this.encodings[c]),this.moveCanvasDrawing(this.encodings[c])}this.restoreCanvas()}},{key:"prepareCanvas",value:function(){var c=this.canvas.getContext("2d");c.save(),(0,n.calculateEncodingAttributes)(this.encodings,this.options,c);var u=(0,n.getTotalWidthOfEncodings)(this.encodings),x=(0,n.getMaximumHeightOfEncodings)(this.encodings);this.canvas.width=u+this.options.marginLeft+this.options.marginRight,this.canvas.height=x,c.clearRect(0,0,this.canvas.width,this.canvas.height),this.options.background&&(c.fillStyle=this.options.background,c.fillRect(0,0,this.canvas.width,this.canvas.height)),c.translate(this.options.marginLeft,0)}},{key:"drawCanvasBarcode",value:function(c,u){var x=this.canvas.getContext("2d"),b=u.data,g;c.textPosition=="top"?g=c.marginTop+c.fontSize+c.textMargin:g=c.marginTop,x.fillStyle=c.lineColor;for(var k=0;k<b.length;k++){var y=k*c.width+u.barcodePadding;b[k]==="1"?x.fillRect(y,g,c.width,c.height):b[k]&&x.fillRect(y,g,c.width,c.height*b[k])}}},{key:"drawCanvasText",value:function(c,u){var x=this.canvas.getContext("2d"),b=c.fontOptions+" "+c.fontSize+"px "+c.font;if(c.displayValue){var g,k;c.textPosition=="top"?k=c.marginTop+c.fontSize-c.textMargin:k=c.height+c.textMargin+c.marginTop+c.fontSize,x.font=b,c.textAlign=="left"||u.barcodePadding>0?(g=0,x.textAlign="left"):c.textAlign=="right"?(g=u.width-1,x.textAlign="right"):(g=u.width/2,x.textAlign="center"),x.fillText(u.text,g,k)}}},{key:"moveCanvasDrawing",value:function(c){var u=this.canvas.getContext("2d");u.translate(c.width,0)}},{key:"restoreCanvas",value:function(){var c=this.canvas.getContext("2d");c.restore()}}]),l})();return qy.default=o,qy}var Hy={},ZL;function JAe(){if(ZL)return Hy;ZL=1,Object.defineProperty(Hy,"__esModule",{value:!0});var e=(function(){function d(c,u){for(var x=0;x<u.length;x++){var b=u[x];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(c,b.key,b)}}return function(c,u,x){return u&&d(c.prototype,u),x&&d(c,x),c}})(),t=X5(),r=a(t),n=cK();function a(d){return d&&d.__esModule?d:{default:d}}function i(d,c){if(!(d instanceof c))throw new TypeError("Cannot call a class as a function")}var o="http://www.w3.org/2000/svg",l=(function(){function d(c,u,x){i(this,d),this.svg=c,this.encodings=u,this.options=x,this.document=x.xmlDocument||document}return e(d,[{key:"render",value:function(){var u=this.options.marginLeft;this.prepareSVG();for(var x=0;x<this.encodings.length;x++){var b=this.encodings[x],g=(0,r.default)(this.options,b.options),k=this.createGroup(u,g.marginTop,this.svg);this.setGroupOptions(k,g),this.drawSvgBarcode(k,g,b),this.drawSVGText(k,g,b),u+=b.width}}},{key:"prepareSVG",value:function(){for(;this.svg.firstChild;)this.svg.removeChild(this.svg.firstChild);(0,n.calculateEncodingAttributes)(this.encodings,this.options);var u=(0,n.getTotalWidthOfEncodings)(this.encodings),x=(0,n.getMaximumHeightOfEncodings)(this.encodings),b=u+this.options.marginLeft+this.options.marginRight;this.setSvgAttributes(b,x),this.options.background&&this.drawRect(0,0,b,x,this.svg).setAttribute("style","fill:"+this.options.background+";")}},{key:"drawSvgBarcode",value:function(u,x,b){var g=b.data,k;x.textPosition=="top"?k=x.fontSize+x.textMargin:k=0;for(var y=0,N=0,S=0;S<g.length;S++)N=S*x.width+b.barcodePadding,g[S]==="1"?y++:y>0&&(this.drawRect(N-x.width*y,k,x.width*y,x.height,u),y=0);y>0&&this.drawRect(N-x.width*(y-1),k,x.width*y,x.height,u)}},{key:"drawSVGText",value:function(u,x,b){var g=this.document.createElementNS(o,"text");if(x.displayValue){var k,y;g.setAttribute("style","font:"+x.fontOptions+" "+x.fontSize+"px "+x.font),x.textPosition=="top"?y=x.fontSize-x.textMargin:y=x.height+x.textMargin+x.fontSize,x.textAlign=="left"||b.barcodePadding>0?(k=0,g.setAttribute("text-anchor","start")):x.textAlign=="right"?(k=b.width-1,g.setAttribute("text-anchor","end")):(k=b.width/2,g.setAttribute("text-anchor","middle")),g.setAttribute("x",k),g.setAttribute("y",y),g.appendChild(this.document.createTextNode(b.text)),u.appendChild(g)}}},{key:"setSvgAttributes",value:function(u,x){var b=this.svg;b.setAttribute("width",u+"px"),b.setAttribute("height",x+"px"),b.setAttribute("x","0px"),b.setAttribute("y","0px"),b.setAttribute("viewBox","0 0 "+u+" "+x),b.setAttribute("xmlns",o),b.setAttribute("version","1.1"),b.setAttribute("style","transform: translate(0,0)")}},{key:"createGroup",value:function(u,x,b){var g=this.document.createElementNS(o,"g");return g.setAttribute("transform","translate("+u+", "+x+")"),b.appendChild(g),g}},{key:"setGroupOptions",value:function(u,x){u.setAttribute("style","fill:"+x.lineColor+";")}},{key:"drawRect",value:function(u,x,b,g,k){var y=this.document.createElementNS(o,"rect");return y.setAttribute("x",u),y.setAttribute("y",x),y.setAttribute("width",b),y.setAttribute("height",g),k.appendChild(y),y}}]),d})();return Hy.default=l,Hy}var $y={},JL;function eEe(){if(JL)return $y;JL=1,Object.defineProperty($y,"__esModule",{value:!0});var e=(function(){function n(a,i){for(var o=0;o<i.length;o++){var l=i[o];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(a,l.key,l)}}return function(a,i,o){return i&&n(a.prototype,i),o&&n(a,o),a}})();function t(n,a){if(!(n instanceof a))throw new TypeError("Cannot call a class as a function")}var r=(function(){function n(a,i,o){t(this,n),this.object=a,this.encodings=i,this.options=o}return e(n,[{key:"render",value:function(){this.object.encodings=this.encodings}}]),n})();return $y.default=r,$y}var eR;function tEe(){if(eR)return zy;eR=1,Object.defineProperty(zy,"__esModule",{value:!0});var e=ZAe(),t=o(e),r=JAe(),n=o(r),a=eEe(),i=o(a);function o(l){return l&&l.__esModule?l:{default:l}}return zy.default={CanvasRenderer:t.default,SVGRenderer:n.default,ObjectRenderer:i.default},zy}var d1={},tR;function dK(){if(tR)return d1;tR=1,Object.defineProperty(d1,"__esModule",{value:!0});function e(o,l){if(!(o instanceof l))throw new TypeError("Cannot call a class as a function")}function t(o,l){if(!o)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l&&(typeof l=="object"||typeof l=="function")?l:o}function r(o,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof l);o.prototype=Object.create(l&&l.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),l&&(Object.setPrototypeOf?Object.setPrototypeOf(o,l):o.__proto__=l)}var n=(function(o){r(l,o);function l(d,c){e(this,l);var u=t(this,(l.__proto__||Object.getPrototypeOf(l)).call(this));return u.name="InvalidInputException",u.symbology=d,u.input=c,u.message='"'+u.input+'" is not a valid input for '+u.symbology,u}return l})(Error),a=(function(o){r(l,o);function l(){e(this,l);var d=t(this,(l.__proto__||Object.getPrototypeOf(l)).call(this));return d.name="InvalidElementException",d.message="Not supported type to render on",d}return l})(Error),i=(function(o){r(l,o);function l(){e(this,l);var d=t(this,(l.__proto__||Object.getPrototypeOf(l)).call(this));return d.name="NoElementException",d.message="No element to render on.",d}return l})(Error);return d1.InvalidInputException=n,d1.InvalidElementException=a,d1.NoElementException=i,d1}var rR;function rEe(){if(rR)return Ry;rR=1,Object.defineProperty(Ry,"__esModule",{value:!0});var e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},t=QAe(),r=o(t),n=tEe(),a=o(n),i=dK();function o(u){return u&&u.__esModule?u:{default:u}}function l(u){if(typeof u=="string")return d(u);if(Array.isArray(u)){for(var x=[],b=0;b<u.length;b++)x.push(l(u[b]));return x}else{if(typeof HTMLCanvasElement<"u"&&u instanceof HTMLImageElement)return c(u);if(u&&u.nodeName&&u.nodeName.toLowerCase()==="svg"||typeof SVGElement<"u"&&u instanceof SVGElement)return{element:u,options:(0,r.default)(u),renderer:a.default.SVGRenderer};if(typeof HTMLCanvasElement<"u"&&u instanceof HTMLCanvasElement)return{element:u,options:(0,r.default)(u),renderer:a.default.CanvasRenderer};if(u&&u.getContext)return{element:u,renderer:a.default.CanvasRenderer};if(u&&(typeof u>"u"?"undefined":e(u))==="object"&&!u.nodeName)return{element:u,renderer:a.default.ObjectRenderer};throw new i.InvalidElementException}}function d(u){var x=document.querySelectorAll(u);if(x.length!==0){for(var b=[],g=0;g<x.length;g++)b.push(l(x[g]));return b}}function c(u){var x=document.createElement("canvas");return{element:x,options:(0,r.default)(u),renderer:a.default.CanvasRenderer,afterRender:function(){u.setAttribute("src",x.toDataURL())}}}return Ry.default=l,Ry}var Vy={},nR;function nEe(){if(nR)return Vy;nR=1,Object.defineProperty(Vy,"__esModule",{value:!0});var e=(function(){function n(a,i){for(var o=0;o<i.length;o++){var l=i[o];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(a,l.key,l)}}return function(a,i,o){return i&&n(a.prototype,i),o&&n(a,o),a}})();function t(n,a){if(!(n instanceof a))throw new TypeError("Cannot call a class as a function")}var r=(function(){function n(a){t(this,n),this.api=a}return e(n,[{key:"handleCatch",value:function(i){if(i.name==="InvalidInputException")if(this.api._options.valid!==this.api._defaults.valid)this.api._options.valid(!1);else throw i.message;else throw i;this.api.render=function(){}}},{key:"wrapBarcodeCall",value:function(i){try{var o=i.apply(void 0,arguments);return this.api._options.valid(!0),o}catch(l){return this.handleCatch(l),this.api}}}]),n})();return Vy.default=r,Vy}var __,aR;function aEe(){if(aR)return __;aR=1;var e=KAe(),t=S(e),r=X5(),n=S(r),a=XAe(),i=S(a),o=YAe(),l=S(o),d=rEe(),c=S(d),u=oK(),x=S(u),b=nEe(),g=S(b),k=dK(),y=lK(),N=S(y);function S(L){return L&&L.__esModule?L:{default:L}}var O=function(){},A=function(Q,H,G){var Z=new O;if(typeof Q>"u")throw Error("No element to render on was provided.");return Z._renderProperties=(0,c.default)(Q),Z._encodings=[],Z._options=N.default,Z._errorHandler=new g.default(Z),typeof H<"u"&&(G=G||{},G.format||(G.format=R()),Z.options(G)[G.format](H,G).render()),Z};A.getModule=function(L){return t.default[L]};for(var P in t.default)t.default.hasOwnProperty(P)&&q(t.default,P);function q(L,Q){O.prototype[Q]=O.prototype[Q.toUpperCase()]=O.prototype[Q.toLowerCase()]=function(H,G){var Z=this;return Z._errorHandler.wrapBarcodeCall(function(){G.text=typeof G.text>"u"?void 0:""+G.text;var te=(0,n.default)(Z._options,G);te=(0,x.default)(te);var se=L[Q],ue=W(H,se,te);return Z._encodings.push(ue),Z})}}function W(L,Q,H){L=""+L;var G=new Q(L,H);if(!G.valid())throw new k.InvalidInputException(G.constructor.name,L);var Z=G.encode();Z=(0,i.default)(Z);for(var te=0;te<Z.length;te++)Z[te].options=(0,n.default)(H,Z[te].options);return Z}function R(){return t.default.CODE128?"CODE128":Object.keys(t.default)[0]}O.prototype.options=function(L){return this._options=(0,n.default)(this._options,L),this},O.prototype.blank=function(L){var Q=new Array(L+1).join("0");return this._encodings.push({data:Q}),this},O.prototype.init=function(){if(this._renderProperties){Array.isArray(this._renderProperties)||(this._renderProperties=[this._renderProperties]);var L;for(var Q in this._renderProperties){L=this._renderProperties[Q];var H=(0,n.default)(this._options,L.options);H.format=="auto"&&(H.format=R()),this._errorHandler.wrapBarcodeCall(function(){var G=H.value,Z=t.default[H.format.toUpperCase()],te=W(G,Z,H);U(L,te,H)})}}},O.prototype.render=function(){if(!this._renderProperties)throw new k.NoElementException;if(Array.isArray(this._renderProperties))for(var L=0;L<this._renderProperties.length;L++)U(this._renderProperties[L],this._encodings,this._options);else U(this._renderProperties,this._encodings,this._options);return this},O.prototype._defaults=N.default;function U(L,Q,H){Q=(0,i.default)(Q);for(var G=0;G<Q.length;G++)Q[G].options=(0,n.default)(H,Q[G].options),(0,l.default)(Q[G].options);(0,l.default)(H);var Z=L.renderer,te=new Z(L.element,Q,H);te.render(),L.afterRender&&L.afterRender()}return typeof window<"u"&&(window.JsBarcode=A),typeof jQuery<"u"&&(jQuery.fn.JsBarcode=function(L,Q){var H=[];return jQuery(this).each(function(){H.push(this)}),A(H,L,Q)}),__=A,__}var sEe=aEe();const Ek=zc(sEe),S_={"30x20":{width:30,height:20,name:"3020mm (nh)",barcodeHeight:25,fontSize:7},"40x30":{width:40,height:30,name:"4030mm (ph bin)",barcodeHeight:35,fontSize:8},"50x30":{width:50,height:30,name:"5030mm (va)",barcodeHeight:40,fontSize:9},"60x40":{width:60,height:40,name:"6040mm (ln)",barcodeHeight:45,fontSize:10},"80x50":{width:80,height:50,name:"8050mm (max)",barcodeHeight:55,fontSize:12}},iEe=({part:e,currentBranchId:t,onClose:r})=>{const n=T.useRef(null),a=T.useRef(null),[i,o]=T.useState(1),[l,d]=T.useState(!0),[c,u]=T.useState(!0),[x,b]=T.useState("40x30"),[g,k]=T.useState("CODE128"),[y,N]=T.useState(1),S=e.barcode||e.sku||e.id.slice(0,12),O=S_[x];T.useEffect(()=>{if(n.current)try{const P=Math.max(1,(O.width-10)/50);Ek(n.current,S,{format:g,width:P,height:O.barcodeHeight,displayValue:!0,fontSize:O.fontSize,margin:2,textMargin:1,font:"monospace"})}catch(P){console.error("Barcode generation error:",P),Ek(n.current,S,{format:"CODE128",width:1.2,height:35,displayValue:!0,fontSize:8,margin:2})}},[S,g,x,O]);const A=()=>{if(!a.current)return;const q=window.open("","_blank");if(!q){alert("Vui lng cho php popup  in");return}const W=Math.floor(O.width/3),R=e.name.length>W?e.name.slice(0,W)+"...":e.name,U=Array(i).fill(null).map(()=>{var L;return`
        <div class="label" style="
          width: ${O.width}mm;
          height: ${O.height}mm;
          padding: 1mm;
          display: inline-flex;
          flex-direction: column;
          align-items: center;
          justify-content: center;
          page-break-inside: avoid;
          box-sizing: border-box;
          overflow: hidden;
        ">
          ${c?`<div style="font-size: ${O.fontSize-1}px; font-weight: bold; text-align: center; line-height: 1.1; max-width: 100%; overflow: hidden; white-space: nowrap;">${R}</div>`:""}
          ${((L=n.current)==null?void 0:L.outerHTML)||""}
          ${l?`<div style="font-size: ${O.fontSize}px; font-weight: bold; line-height: 1;">${Te(e.retailPrice[t]||0)}</div>`:""}
        </div>
      `}).join("");q.document.write(`
      <!DOCTYPE html>
      <html>
        <head>
          <title>In m vch - ${e.name}</title>
          <style>
            @page {
              size: ${O.width}mm ${O.height}mm;
              margin: 0;
            }
            * {
              margin: 0;
              padding: 0;
              box-sizing: border-box;
            }
            body {
              font-family: Arial, sans-serif;
              margin: 0;
              padding: 0;
              width: ${O.width*y}mm;
            }
            .labels-container {
              display: flex;
              flex-wrap: wrap;
              width: 100%;
            }
            .label {
              border: none;
            }
            svg {
              max-width: ${O.width-4}mm !important;
              height: auto !important;
            }
            @media print {
              body { 
                margin: 0; 
                padding: 0;
                -webkit-print-color-adjust: exact;
                print-color-adjust: exact;
              }
              .label { 
                page-break-after: always;
              }
              .label:last-child {
                page-break-after: avoid;
              }
            }
          </style>
        </head>
        <body>
          <div class="labels-container">
            ${U}
          </div>
          <script>
            window.onload = function() {
              setTimeout(function() {
                window.print();
                window.onafterprint = function() { window.close(); };
              }, 200);
            };
          <\/script>
        </body>
      </html>
    `),q.document.close()};return s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[60] p-4",children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl max-w-lg w-full max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-slate-200 dark:border-slate-700",children:[s.jsxs("div",{children:[s.jsxs("h2",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 flex items-center gap-2",children:[s.jsx(iu,{className:"w-5 h-5 text-blue-600"}),"In m vch ni b"]}),s.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-0.5",children:"Xprinter XP-360B (20-82mm)"})]}),s.jsx("button",{onClick:r,className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-200",children:s.jsx(ic,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"p-4 space-y-4",children:[s.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900/50 rounded-lg p-3",children:[s.jsx("p",{className:"font-medium text-slate-900 dark:text-slate-100 text-sm",children:e.name}),s.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 font-mono mt-1",children:["M: ",S]}),s.jsx("p",{className:"text-xs text-green-600 dark:text-green-400 font-semibold mt-1",children:Te(e.retailPrice[t]||0)})]}),s.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg p-4 flex flex-col items-center bg-white",children:[s.jsxs("p",{className:"text-xs text-slate-500 mb-2",children:["Xem trc nhn (",O.name,")"]}),s.jsxs("div",{ref:a,className:"border-2 border-dashed border-slate-300 rounded flex flex-col items-center justify-center bg-white",style:{width:`${O.width}mm`,height:`${O.height}mm`,padding:"1mm"},children:[c&&s.jsx("p",{className:"font-bold text-center text-slate-900 truncate max-w-full leading-tight",style:{fontSize:`${O.fontSize-1}px`},children:e.name.length>Math.floor(O.width/3)?e.name.slice(0,Math.floor(O.width/3))+"...":e.name}),s.jsx("svg",{ref:n,className:"max-w-full"}),l&&s.jsx("p",{className:"font-bold text-slate-900 leading-tight",style:{fontSize:`${O.fontSize}px`},children:Te(e.retailPrice[t]||0)})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Kch thc nhn (ph hp XP-360B)"}),s.jsx("div",{className:"grid grid-cols-2 gap-2",children:Object.keys(S_).map(P=>s.jsx("button",{onClick:()=>b(P),className:`px-3 py-2 text-xs rounded-lg transition-colors text-left ${x===P?"bg-blue-600 text-white":"bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-600"}`,children:S_[P].name},P))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"S lng nhn"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>o(Math.max(1,i-1)),className:"p-1.5 rounded-lg bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 dark:hover:bg-slate-600",children:s.jsx(IB,{className:"w-4 h-4"})}),s.jsx("input",{type:"number",value:i,onChange:P=>o(Math.max(1,parseInt(P.target.value)||1)),className:"w-16 text-center px-2 py-1 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",min:"1",max:"100"}),s.jsx("button",{onClick:()=>o(Math.min(100,i+1)),className:"p-1.5 rounded-lg bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 dark:hover:bg-slate-600",children:s.jsx(oc,{className:"w-4 h-4"})})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Loi m vch"}),s.jsxs("select",{value:g,onChange:P=>k(P.target.value),className:"px-3 py-1.5 text-sm border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",children:[s.jsx("option",{value:"CODE128",children:"CODE128 (ph bin)"}),s.jsx("option",{value:"CODE39",children:"CODE39"})]})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:c,onChange:P=>u(P.target.checked),className:"w-4 h-4 rounded border-slate-300 text-blue-600 focus:ring-blue-500"}),s.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:"Hin tn"})]}),s.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:l,onChange:P=>d(P.target.checked),className:"w-4 h-4 rounded border-slate-300 text-blue-600 focus:ring-blue-500"}),s.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:"Hin gi"})]})]}),s.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg p-3",children:s.jsxs("p",{className:"text-xs text-amber-800 dark:text-amber-300",children:[s.jsx("strong",{children:" Mo:"})," Ci t kh giy trong driver my in trng vi kch thc nhn  chn  in chnh xc."]})})]})]}),s.jsxs("div",{className:"flex justify-end gap-3 p-4 border-t border-slate-200 dark:border-slate-700",children:[s.jsx("button",{onClick:r,className:"px-4 py-2 text-sm font-medium text-slate-700 dark:text-slate-300 bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 dark:hover:bg-slate-600 rounded-lg transition-colors",children:"ng"}),s.jsxs("button",{onClick:A,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-lg transition-colors flex items-center gap-2",children:[s.jsx(iu,{className:"w-4 h-4"}),"In ",i," nhn"]})]})]})})},sR={"30x20":{width:30,height:20,name:"3020mm",barcodeHeight:25,fontSize:7},"40x30":{width:40,height:30,name:"4030mm",barcodeHeight:35,fontSize:8},"50x30":{width:50,height:30,name:"5030mm",barcodeHeight:40,fontSize:9},"60x40":{width:60,height:40,name:"6040mm",barcodeHeight:45,fontSize:10},"80x50":{width:80,height:50,name:"8050mm",barcodeHeight:55,fontSize:12}},oEe=({parts:e,currentBranchId:t,onClose:r})=>{const[n,a]=T.useState(new Map),[i,o]=T.useState(""),[l,d]=T.useState("all"),[c,u]=T.useState("40x30"),[x,b]=T.useState("CODE128"),[g,k]=T.useState(!0),[y,N]=T.useState(!0),[S,O]=T.useState("stock"),[A,P]=T.useState(1),q=T.useMemo(()=>{const ae=new Set;return e.forEach(pe=>{pe.category&&ae.add(pe.category)}),Array.from(ae).sort()},[e]),W=T.useMemo(()=>e.filter(ae=>{var Pe,xe;const pe=!i||ae.name.toLowerCase().includes(i.toLowerCase())||((Pe=ae.sku)==null?void 0:Pe.toLowerCase().includes(i.toLowerCase()))||((xe=ae.barcode)==null?void 0:xe.toLowerCase().includes(i.toLowerCase())),ve=l==="all"||ae.category===l;return pe&&ve}),[e,i,l]),R=ae=>ae.stock[t]||0,U=ae=>{const pe=new Map(n);if(pe.has(ae.id))pe.delete(ae.id);else{const ve=S==="stock"?Math.max(1,R(ae)):S==="fixed"?A:1;pe.set(ae.id,{part:ae,quantity:ve})}a(pe)},L=()=>{const ae=new Map(n);W.forEach(pe=>{if(!ae.has(pe.id)){const ve=S==="stock"?Math.max(1,R(pe)):S==="fixed"?A:1;ae.set(pe.id,{part:pe,quantity:ve})}}),a(ae)},Q=()=>{a(new Map)},H=(ae,pe)=>{const ve=new Map(n),Pe=ve.get(ae);Pe&&(ve.set(ae,{...Pe,quantity:Math.max(1,pe)}),a(ve))},G=()=>{const ae=new Map;n.forEach((pe,ve)=>{const Pe=S==="stock"?Math.max(1,R(pe.part)):S==="fixed"?A:pe.quantity;ae.set(ve,{...pe,quantity:Pe})}),a(ae)},Z=T.useMemo(()=>{let ae=0;return n.forEach(pe=>{ae+=pe.quantity}),ae},[n]),te=sR[c],se=ae=>{const pe=document.createElementNS("http://www.w3.org/2000/svg","svg");try{Ek(pe,ae,{format:x,width:Math.max(1,(te.width-10)/50),height:te.barcodeHeight,displayValue:!0,fontSize:te.fontSize,margin:2,textMargin:1,font:"monospace"})}catch{Ek(pe,ae,{format:"CODE128",width:1.2,height:35,displayValue:!0,fontSize:8,margin:2})}return pe.outerHTML},ue=()=>{if(n.size===0){alert("Vui lng chn t nht 1 sn phm");return}const ae=window.open("","_blank");if(!ae){alert("Vui lng cho php popup  in");return}const pe=Math.floor(te.width/3);let ve="";n.forEach(({part:Pe,quantity:xe})=>{const B=Pe.barcode||Pe.sku||Pe.id.slice(0,12),re=Pe.name.length>pe?Pe.name.slice(0,pe)+"...":Pe.name,J=se(B);for(let ie=0;ie<xe;ie++)ve+=`
          <div class="label" style="
            width: ${te.width}mm;
            height: ${te.height}mm;
            padding: 1mm;
            display: inline-flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            page-break-inside: avoid;
            box-sizing: border-box;
            overflow: hidden;
          ">
            ${y?`<div style="font-size: ${te.fontSize-1}px; font-weight: bold; text-align: center; line-height: 1.1; max-width: 100%; overflow: hidden; white-space: nowrap;">${re}</div>`:""}
            ${J}
            ${g?`<div style="font-size: ${te.fontSize}px; font-weight: bold; line-height: 1;">${Te(Pe.retailPrice[t]||0)}</div>`:""}
          </div>
        `}),ae.document.write(`
      <!DOCTYPE html>
      <html>
        <head>
          <title>In m vch hng lot - ${n.size} sn phm</title>
          <style>
            @page {
              size: ${te.width}mm ${te.height}mm;
              margin: 0;
            }
            * { margin: 0; padding: 0; box-sizing: border-box; }
            body {
              font-family: Arial, sans-serif;
              margin: 0;
              padding: 0;
            }
            .labels-container {
              display: flex;
              flex-wrap: wrap;
              width: 100%;
            }
            .label { border: none; }
            svg { max-width: ${te.width-4}mm !important; height: auto !important; }
            @media print {
              body { margin: 0; padding: 0; -webkit-print-color-adjust: exact; print-color-adjust: exact; }
              .label { page-break-after: always; }
              .label:last-child { page-break-after: avoid; }
            }
          </style>
        </head>
        <body>
          <div class="labels-container">${ve}</div>
          <script>
            window.onload = function() {
              setTimeout(function() {
                window.print();
                window.onafterprint = function() { window.close(); };
              }, 300);
            };
          <\/script>
        </body>
      </html>
    `),ae.document.close()};return s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-2 md:p-4",children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-4xl max-h-[95vh] flex flex-col",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-slate-200 dark:border-slate-700 shrink-0",children:[s.jsxs("div",{children:[s.jsxs("h2",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 flex items-center gap-2",children:[s.jsx(iu,{className:"w-5 h-5 text-blue-600"}),"In m vch hng lot"]}),s.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-0.5",children:"Chn nhiu sn phm  S lng t ng theo tn kho"})]}),s.jsx("button",{onClick:r,className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-200",children:s.jsx(ic,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"flex-1 flex flex-col md:flex-row overflow-hidden",children:[s.jsxs("div",{className:"flex-1 flex flex-col border-r border-slate-200 dark:border-slate-700 overflow-hidden",children:[s.jsxs("div",{className:"p-3 border-b border-slate-200 dark:border-slate-700 space-y-2 shrink-0",children:[s.jsxs("div",{className:"relative",children:[s.jsx(nu,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),s.jsx("input",{type:"text",value:i,onChange:ae=>o(ae.target.value),placeholder:"Tm sn phm, SKU, m vch...",className:"w-full pl-9 pr-3 py-2 text-sm border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("select",{value:l,onChange:ae=>d(ae.target.value),className:"flex-1 px-3 py-1.5 text-sm border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",children:[s.jsx("option",{value:"all",children:"Tt c danh mc"}),q.map(ae=>s.jsx("option",{value:ae,children:ae},ae))]}),s.jsx("button",{onClick:L,className:"px-3 py-1.5 text-xs bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 rounded-lg hover:bg-blue-200 dark:hover:bg-blue-900/50",children:"Chn tt c"}),s.jsx("button",{onClick:Q,className:"px-3 py-1.5 text-xs bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-200 dark:hover:bg-slate-600",children:"B chn"})]})]}),s.jsx("div",{className:"flex-1 overflow-y-auto p-2",children:W.length===0?s.jsx("div",{className:"text-center py-8 text-slate-500",children:"Khng tm thy sn phm"}):s.jsx("div",{className:"space-y-1",children:W.map(ae=>{const pe=n.has(ae.id),ve=R(ae);return s.jsxs("div",{onClick:()=>U(ae),className:`flex items-center gap-3 p-2 rounded-lg cursor-pointer transition-colors ${pe?"bg-blue-50 dark:bg-blue-900/30 border border-blue-300 dark:border-blue-700":"bg-slate-50 dark:bg-slate-900/50 border border-transparent hover:bg-slate-100 dark:hover:bg-slate-700"}`,children:[s.jsx("div",{className:`w-5 h-5 rounded flex items-center justify-center shrink-0 ${pe?"bg-blue-600 text-white":"border-2 border-slate-300 dark:border-slate-600"}`,children:pe&&s.jsx(ob,{className:"w-3 h-3"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-medium text-slate-900 dark:text-slate-100 truncate",children:ae.name}),s.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 font-mono",children:ae.barcode||ae.sku})]}),s.jsxs("div",{className:"text-right shrink-0",children:[s.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Tn kho"}),s.jsx("p",{className:`text-sm font-bold ${ve>0?"text-green-600":"text-red-500"}`,children:ve})]})]},ae.id)})})})]}),s.jsxs("div",{className:"w-full md:w-80 flex flex-col overflow-hidden",children:[s.jsxs("div",{className:"p-3 border-b border-slate-200 dark:border-slate-700 space-y-3 shrink-0",children:[s.jsx("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300",children:"Ci t in"}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-slate-600 dark:text-slate-400 mb-1",children:"S lng nhn"}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx("button",{onClick:()=>{O("stock")},className:`flex-1 px-2 py-1.5 text-xs rounded-lg ${S==="stock"?"bg-blue-600 text-white":"bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300"}`,children:"= Tn kho"}),s.jsx("button",{onClick:()=>{O("fixed")},className:`flex-1 px-2 py-1.5 text-xs rounded-lg ${S==="fixed"?"bg-blue-600 text-white":"bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300"}`,children:"C nh"}),s.jsx("button",{onClick:()=>{O("custom")},className:`flex-1 px-2 py-1.5 text-xs rounded-lg ${S==="custom"?"bg-blue-600 text-white":"bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300"}`,children:"Ty chnh"})]}),S==="fixed"&&s.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[s.jsx("span",{className:"text-xs text-slate-500",children:"Mi SP in:"}),s.jsx("input",{type:"number",value:A,onChange:ae=>P(Math.max(1,parseInt(ae.target.value)||1)),className:"w-16 px-2 py-1 text-sm text-center border border-slate-300 dark:border-slate-600 rounded bg-white dark:bg-slate-700",min:"1"}),s.jsx("span",{className:"text-xs text-slate-500",children:"nhn"})]}),n.size>0&&S!=="custom"&&s.jsxs("button",{onClick:G,className:"mt-2 w-full px-2 py-1 text-xs bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-300 rounded hover:bg-amber-200",children:["p dng cho ",n.size," SP  chn"]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-slate-600 dark:text-slate-400 mb-1",children:"Kch thc nhn"}),s.jsx("select",{value:c,onChange:ae=>u(ae.target.value),className:"w-full px-2 py-1.5 text-sm border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700",children:Object.entries(sR).map(([ae,pe])=>s.jsx("option",{value:ae,children:pe.name},ae))})]}),s.jsxs("div",{className:"flex gap-4",children:[s.jsxs("label",{className:"flex items-center gap-1.5 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:y,onChange:ae=>N(ae.target.checked),className:"w-3.5 h-3.5 rounded"}),s.jsx("span",{className:"text-xs text-slate-700 dark:text-slate-300",children:"Tn"})]}),s.jsxs("label",{className:"flex items-center gap-1.5 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:g,onChange:ae=>k(ae.target.checked),className:"w-3.5 h-3.5 rounded"}),s.jsx("span",{className:"text-xs text-slate-700 dark:text-slate-300",children:"Gi"})]})]})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-2",children:[s.jsxs("h3",{className:"text-xs font-semibold text-slate-500 dark:text-slate-400 mb-2 px-1",children:[" chn: ",n.size," SP  ",Z," nhn"]}),n.size===0?s.jsxs("div",{className:"text-center py-4 text-slate-400 text-xs",children:[s.jsx(ru,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),"Cha chn sn phm no"]}):s.jsx("div",{className:"space-y-1",children:Array.from(n.values()).map(({part:ae,quantity:pe})=>s.jsxs("div",{className:"flex items-center gap-2 p-2 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[s.jsx("div",{className:"flex-1 min-w-0",children:s.jsx("p",{className:"text-xs font-medium text-slate-900 dark:text-slate-100 truncate",children:ae.name})}),S==="custom"?s.jsx("input",{type:"number",value:pe,onChange:ve=>H(ae.id,parseInt(ve.target.value)||1),onClick:ve=>ve.stopPropagation(),className:"w-14 px-1 py-0.5 text-xs text-center border border-slate-300 dark:border-slate-600 rounded bg-white dark:bg-slate-700",min:"1"}):s.jsxs("span",{className:"text-xs font-bold text-blue-600 dark:text-blue-400",children:["",pe]}),s.jsx("button",{onClick:ve=>{ve.stopPropagation(),U(ae)},className:"text-red-500 hover:text-red-700",children:s.jsx(ic,{className:"w-4 h-4"})})]},ae.id))})]})]})]}),s.jsxs("div",{className:"flex items-center justify-between p-4 border-t border-slate-200 dark:border-slate-700 shrink-0",children:[s.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:[s.jsx("span",{className:"font-semibold text-blue-600",children:n.size})," sn phm ",s.jsx("span",{className:"font-semibold text-green-600 ml-1",children:Z})," nhn"]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:r,className:"px-4 py-2 text-sm font-medium text-slate-700 dark:text-slate-300 bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 dark:hover:bg-slate-600 rounded-lg",children:"ng"}),s.jsxs("button",{onClick:ue,disabled:n.size===0,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 disabled:bg-slate-400 disabled:cursor-not-allowed rounded-lg flex items-center gap-2",children:[s.jsx(iu,{className:"w-4 h-4"}),"In ",Z," nhn"]})]})]})]})})},Vh=5,iR={neutral:{buttonActive:"border-blue-500 bg-blue-500/10 shadow-[0_5px_25px_rgba(59,130,246,0.15)] text-primary-text",buttonInactive:"border-primary-border bg-primary-bg hover:border-blue-300/70",badgeActive:"border-blue-500 text-blue-600 bg-white/60 dark:bg-slate-900/40 dark:text-blue-400",badgeInactive:"border-secondary-border text-secondary-text"},success:{buttonActive:"border-emerald-500 bg-emerald-50 shadow-[0_5px_25px_rgba(16,185,129,0.2)] text-emerald-900 dark:bg-emerald-950/50 dark:text-emerald-200",buttonInactive:"border-emerald-200 bg-emerald-50/40 hover:border-emerald-400/70 dark:border-emerald-800 dark:bg-emerald-950/20",badgeActive:"border-emerald-500 text-emerald-700 bg-emerald-50 dark:bg-emerald-950/50 dark:text-emerald-300 dark:border-emerald-600",badgeInactive:"border-emerald-200 text-emerald-600 dark:border-emerald-700 dark:text-emerald-400"},warning:{buttonActive:"border-amber-500 bg-amber-50 shadow-[0_5px_25px_rgba(245,158,11,0.25)] text-amber-900 dark:bg-amber-950/50 dark:text-amber-200",buttonInactive:"border-amber-200 bg-amber-50/40 hover:border-amber-400/70 dark:border-amber-800 dark:bg-amber-950/20",badgeActive:"border-amber-500 text-amber-700 bg-amber-50 dark:bg-amber-950/50 dark:text-amber-300 dark:border-amber-600",badgeInactive:"border-amber-200 text-amber-600 dark:border-amber-700 dark:text-amber-400"},danger:{buttonActive:"border-red-500 bg-red-50 shadow-[0_5px_25px_rgba(239,68,68,0.25)] text-red-900 dark:bg-red-950/50 dark:text-red-200",buttonInactive:"border-red-200 bg-red-50/40 hover:border-red-400/70 dark:border-red-800 dark:bg-red-950/20",badgeActive:"border-red-500 text-red-700 bg-red-50 dark:bg-red-950/50 dark:text-red-300 dark:border-red-700",badgeInactive:"border-red-200 text-red-600 dark:border-red-700 dark:text-red-400"}},uK=({isOpen:e,onClose:t,onSave:r})=>{const[n,a]=T.useState(""),[i,o]=T.useState(""),[l,d]=T.useState(""),[c,u]=T.useState(1),[x,b]=T.useState(0),[g,k]=T.useState(0),[y,N]=T.useState(1),[S,O]=T.useState("thng"),[A,P]=T.useState(!1),{data:q=[]}=W5(),W=LE(),[R,U]=T.useState(!1),[L,Q]=T.useState(""),H=()=>{if(!n.trim()){Ze.warning("Vui lng nhp tn sn phm");return}r({name:n.trim(),description:i.trim(),category:l||"Cha phn loi",quantity:Number(c)||1,importPrice:Number(x)||0,retailPrice:Number(g)||0,warranty:Number(y)||0,warrantyUnit:S}),a(""),o(""),d(""),u(1),b(0),k(0),N(1),P(!1),O("thng")};return e?s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[60] p-4",children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg w-full max-w-2xl max-h-[90vh] overflow-hidden flex flex-col",children:[s.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-slate-200 dark:border-slate-700",children:[s.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:"Thm sn phm mi"}),s.jsx("button",{onClick:t,className:"text-slate-500 hover:text-slate-700 dark:hover:text-slate-300 text-2xl",children:""})]}),s.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:["Tn sn phm ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",value:n,onChange:G=>a(G.target.value),className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",placeholder:"Nhp tn sn phm"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"M t"}),s.jsx("textarea",{value:i,onChange:G=>o(G.target.value),rows:3,className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",placeholder:"M t sn phm"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Danh mc sn phm"}),s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("select",{value:l,onChange:G=>d(G.target.value),className:"flex-1 px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",children:[s.jsx("option",{value:"",children:"-- Chn hoc to mi --"}),q.map(G=>s.jsx("option",{value:G.name,children:G.name},G.id))]}),s.jsx("button",{type:"button",onClick:()=>U(!0),className:"w-10 h-10 flex items-center justify-center bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-600","aria-label":"Thm danh mc mi",children:s.jsx("span",{className:"text-xl text-slate-600 dark:text-slate-300",children:"+"})})]}),R&&s.jsxs("form",{onSubmit:async G=>{G.preventDefault();const Z=L.trim();if(!Z){Ze.warning("Vui lng nhp tn danh mc");return}if(Z.length<2){Ze.warning("Tn qu ngn");return}try{const te=await W.mutateAsync({name:Z});d(te.name),Q(""),U(!1)}catch(te){Ze.error((te==null?void 0:te.message)||"Li to danh mc")}},className:"flex gap-2",children:[s.jsx("input",{autoFocus:!0,type:"text",value:L,onChange:G=>Q(G.target.value),placeholder:"Nhp tn danh mc mi",className:"flex-1 px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-sm text-slate-900 dark:text-slate-100"}),s.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm font-medium",children:"Lu"}),s.jsx("button",{type:"button",onClick:()=>{U(!1),Q("")},className:"px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg text-sm bg-white dark:bg-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-600",children:"Hy"})]})]})]}),s.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-4",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-3",children:"Thng tin nhp kho:"}),s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-slate-600 dark:text-slate-400 mb-1",children:"S lng:"}),s.jsx(B0,{value:c,onValue:G=>{const Z=Qj(x,G);Z.warnings.length&&Z.warnings.forEach(te=>Ze.warning(te)),u(Math.max(1,Z.clean.quantity))},className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 text-right"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-slate-600 dark:text-slate-400 mb-1",children:"Gi nhp:"}),s.jsx(B0,{value:x,onValue:G=>{const Z=Qj(G,c);Z.warnings.length&&Z.warnings.forEach(te=>Ze.warning(te)),b(Z.clean.importPrice),A||k(Math.round(Z.clean.importPrice*1.5))},className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 text-right"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-slate-600 dark:text-slate-400 mb-1",children:"Gi bn l:"}),s.jsx(B0,{value:g,onValue:G=>{k(Math.max(0,Math.round(G))),P(!0)},className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 text-right"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Bo hnh"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(B0,{value:y,onValue:G=>N(Math.max(0,Math.floor(G))),className:"w-24 px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 text-right"}),s.jsxs("select",{value:S,onChange:G=>O(G.target.value),className:"px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",children:[s.jsx("option",{value:"thng",children:"thng"}),s.jsx("option",{value:"nm",children:"nm"}),s.jsx("option",{value:"ngy",children:"ngy"})]})]})]})]})}),s.jsx("div",{className:"p-6 border-t border-slate-200 dark:border-slate-700",children:s.jsx("button",{onClick:H,className:"w-full bg-orange-500 hover:bg-orange-600 text-white px-4 py-3 rounded-lg font-medium",children:"Lu v Thm vo gi hng"})})]})}):null},lEe=({isOpen:e,onClose:t,parts:r,currentBranchId:n,onSave:a})=>{const[i,o]=T.useState([]),[l,d]=T.useState(""),[c,u]=T.useState(""),[x,b]=T.useState(0),[g,k]=T.useState("amount"),[y,N]=T.useState("cash"),[S,O]=T.useState("full"),[A,P]=T.useState(0),[q,W]=T.useState(!1),R=z6();console.log(" GoodsReceiptMobileWrapper - parts received:",(r==null?void 0:r.length)||0,r==null?void 0:r.slice(0,2)),console.log(" currentBranchId:",n),T.useEffect(()=>{e||(o([]),d(""),u(""),b(0),k("amount"),N("cash"),O("full"),P(0))},[e]);const U=Q=>{(async()=>{var H;try{const G=await R.mutateAsync({name:Q.name,sku:Q.sku||`SKU-${Date.now()}`,category:Q.category,stock:{[n]:Q.quantity},costPrice:{[n]:Q.importPrice},retailPrice:{[n]:Q.retailPrice},wholesalePrice:{[n]:Q.wholesalePrice||0}});if(!G.ok)throw new Error(((H=G.error)==null?void 0:H.message)||"Failed to create part");o(Z=>[...Z,{partId:G.data.id,partName:Q.name,sku:Q.sku||`SKU-${Date.now()}`,quantity:Q.quantity,importPrice:Q.importPrice,sellingPrice:Q.retailPrice,wholesalePrice:Q.wholesalePrice||0}]),Ze.success(" to ph tng mi v thm vo phiu nhp")}catch(G){Ze.error((G==null?void 0:G.message)||"Li to ph tng mi")}finally{W(!1)}})()},L=()=>{if(!l){Ze.error("Vui lng chn nh cung cp");return}if(i.length===0){Ze.error("Vui lng thm sn phm");return}const Q=i.reduce((te,se)=>te+se.quantity*se.importPrice,0),H=g==="percent"?Math.round(Q*x/100):x,G=Math.max(0,Q-H);let Z=0;S==="full"?Z=G:S==="partial"&&(Z=A),a(i,l,G,"",{paymentMethod:y,paymentType:S,paidAmount:Z,discount:H}),t()};return s.jsxs(s.Fragment,{children:[s.jsx(vAe,{isOpen:e,onClose:t,parts:r,receiptItems:i,setReceiptItems:o,selectedSupplier:l,setSelectedSupplier:d,searchTerm:c,setSearchTerm:u,onSave:L,discount:x,setDiscount:b,discountType:g,setDiscountType:k,paymentMethod:y,setPaymentMethod:N,paymentType:S,setPaymentType:O,partialAmount:A,setPartialAmount:P,showAddProductModal:q,setShowAddProductModal:W,onAddNewProduct:U,currentBranchId:n}),s.jsx(uK,{isOpen:q,onClose:()=>W(!1),onSave:U})]})},cEe=({isOpen:e,onClose:t,parts:r,currentBranchId:n,onSave:a})=>{const[i,o]=T.useState(""),[l,d]=T.useState(""),c=T.useRef(null),[u,x]=T.useState(!1),[b,g]=T.useState(""),[k,y]=T.useState(1),{data:N=[]}=FE(),S=rK(),[O,A]=T.useState(!1),[P,q]=T.useState({name:"",phone:"",address:"",note:""}),W=z6(),[R,U]=T.useState(!1),[L,Q]=T.useState([]),[H,G]=T.useState(null),[Z,te]=T.useState(null),[se,ue]=T.useState(0),[ae,pe]=T.useState(0),[ve,Pe]=T.useState("amount"),[xe,B]=T.useState(0),re=T.useMemo(()=>{if(console.log(" Desktop Modal - parts:",(r==null?void 0:r.length)||0,r==null?void 0:r.slice(0,2)),console.log(" Desktop Modal - searchTerm:",i),!r||r.length===0)return console.log(" parts is empty or undefined"),[];if(!i||i.trim()==="")return console.log(" Showing all parts:",r.length),r;const be=i.toLowerCase().trim(),ge=r.filter(Qe=>{var Ye,at;return((Ye=Qe.name)==null?void 0:Ye.toLowerCase().includes(be))||((at=Qe.sku)==null?void 0:at.toLowerCase().includes(be))});return console.log(" Filtered results:",ge.length),ge},[r,i]),J=be=>{var Qe,Ye;L.find(at=>at.partId===be.id)?Q(at=>at.map(Je=>Je.partId===be.id?{...Je,quantity:Je.quantity+1}:Je)):(Q([...L,{partId:be.id,partName:be.name,sku:be.sku,quantity:1,importPrice:((Qe=be.costPrice)==null?void 0:Qe[n])||0,sellingPrice:be.retailPrice[n]||0,wholesalePrice:((Ye=be.wholesalePrice)==null?void 0:Ye[n])||0}]),Ze.success(` thm ${be.name} vo phiu nhp`)),o(""),setTimeout(()=>{var at;return(at=c.current)==null?void 0:at.focus()},100)},ie=be=>{if(be.preventDefault(),!l.trim())return;const ge=l.trim(),Qe=Je=>Je.toLowerCase().replace(/[-\s./\\]/g,""),Ye=Qe(ge),at=r.find(Je=>{var ct,Ke,zt;return Qe(Je.barcode||"")===Ye||((ct=Je.barcode)==null?void 0:ct.toLowerCase())===ge.toLowerCase()||Qe(Je.sku||"")===Ye||((Ke=Je.sku)==null?void 0:Ke.toLowerCase())===ge.toLowerCase()||((zt=Je.name)==null?void 0:zt.toLowerCase().includes(ge.toLowerCase()))});at?(J(at),d("")):(Ze.error(`Khng tm thy sn phm c m: ${ge}`),d(""))},Y=be=>{console.log(" Camera scanned:",be);const ge=at=>at.toLowerCase().replace(/[-\s./\\]/g,""),Qe=ge(be),Ye=r.find(at=>{var Je,ct;return ge(at.barcode||"")===Qe||((Je=at.barcode)==null?void 0:Je.toLowerCase())===be.toLowerCase()||ge(at.sku||"")===Qe||((ct=at.sku)==null?void 0:ct.toLowerCase())===be.toLowerCase()});Ye?(L.find(Je=>Je.partId===Ye.id)?Q(Je=>Je.map(ct=>ct.partId===Ye.id?{...ct,quantity:ct.quantity+1}:ct)):(Q(Je=>{var ct,Ke;return[...Je,{partId:Ye.id,partName:Ye.name,sku:Ye.sku,quantity:1,importPrice:((ct=Ye.costPrice)==null?void 0:ct[n])||0,sellingPrice:Ye.retailPrice[n]||0,wholesalePrice:((Ke=Ye.wholesalePrice)==null?void 0:Ke[n])||0}]}),Ze.success(` thm ${Ye.name}`)),o("")):Ze.error(`Khng tm thy: ${be}`)};T.useEffect(()=>{e&&setTimeout(()=>{var be;return(be=c.current)==null?void 0:be.focus()},300)},[e]);const _e=(be,ge,Qe)=>{Q(Ye=>Ye.map(at=>at.partId===be?{...at,[ge]:Qe}:at))},me=be=>{Q(ge=>ge.filter(Qe=>Qe.partId!==be))},ne=T.useMemo(()=>L.reduce((be,ge)=>be+ge.importPrice*ge.quantity,0),[L]),je=T.useMemo(()=>Math.max(0,ne-ae),[ne,ae]),{profile:De}=qc(),ce=()=>{var ge;if(!RV(De==null?void 0:De.role,"part.update_price")){Ze.error("Bn khng c quyn cp nht gi");return}if(L.length===0){Ze.warning("Vui lng chn sn phm nhp kho");return}(ge=N.find(Qe=>Qe.id===b))!=null&&ge.name,a(L,b,je,"",{paymentMethod:H||"cash",paymentType:Z||"full",paidAmount:Z==="full"?je:Z==="partial"?se:0,discount:ae}),Q([]),g(""),o(""),pe(0),B(0),Pe("amount")},Ee=be=>{(async()=>{try{const ge=await W.mutateAsync({name:be.name,sku:`SKU-${Date.now()}`,category:be.category,description:be.description,stock:{[n]:be.quantity},retailPrice:{[n]:be.retailPrice},wholesalePrice:{[n]:Math.round(be.retailPrice*.9)}});Q(Qe=>[...Qe,{partId:ge.id,partName:be.name,sku:ge.sku,quantity:be.quantity,importPrice:be.importPrice,sellingPrice:be.retailPrice,wholesalePrice:be.wholesalePrice||0}]),Ze.success(" to ph tng mi v thm vo phiu nhp")}catch(ge){Ze.error((ge==null?void 0:ge.message)||"Li to ph tng mi")}finally{U(!1)}})()};return e?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-900 dark:to-slate-800 w-full max-w-7xl h-[92vh] rounded-2xl shadow-2xl overflow-hidden flex",children:[s.jsxs("div",{className:"w-1/2 flex flex-col bg-white/80 dark:bg-slate-900/80 backdrop-blur-sm border-r border-slate-200/50 dark:border-slate-700/50",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-slate-200/50 dark:border-slate-700/50 bg-gradient-to-r from-blue-50/50 to-indigo-50/50 dark:from-slate-800/50 dark:to-slate-800/50",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("button",{onClick:t,className:"w-9 h-9 flex items-center justify-center hover:bg-white/80 dark:hover:bg-slate-700/80 rounded-lg text-slate-600 dark:text-slate-400 transition-all hover:scale-105",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-base font-bold text-slate-900 dark:text-slate-100",children:"Danh mc sn phm"}),s.jsx("p",{className:"text-[10px] text-slate-500 dark:text-slate-400",children:"Chn  thm vo gi"})]})]}),s.jsxs("button",{onClick:()=>U(!0),className:"flex items-center gap-2 bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white px-3 py-2 rounded-lg text-xs font-semibold shadow-lg shadow-blue-500/30 transition-all hover:scale-105",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),s.jsx("span",{children:"Thm mi"})]})]}),s.jsxs("div",{className:"p-3 bg-white/50 dark:bg-slate-800/50 space-y-2",children:[s.jsx("form",{onSubmit:ie,children:s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx("svg",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"})}),s.jsx("input",{ref:c,type:"text",placeholder:"Qut m vch hoc nhp SKU...",value:l,onChange:be=>d(be.target.value),className:"w-full pl-10 pr-8 py-2.5 border-2 border-blue-300 dark:border-blue-600 rounded-xl bg-blue-50/50 dark:bg-blue-900/20 text-slate-900 dark:text-slate-100 text-sm placeholder:text-blue-500/60 dark:placeholder:text-blue-400/60 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all font-mono"}),l&&s.jsx("button",{type:"button",onClick:()=>d(""),className:"absolute right-2 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600 dark:hover:text-slate-300",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsx("button",{type:"button",onClick:()=>x(!0),className:"px-3 py-2.5 rounded-xl border-2 border-green-500 text-green-600 bg-green-50 dark:bg-green-900/20 font-semibold text-sm flex items-center gap-1.5 transition-all hover:bg-green-100",title:"Qut bng camera",children:s.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]})})]})}),s.jsxs("div",{className:"relative",children:[s.jsx("svg",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),s.jsx("input",{type:"text",placeholder:"Hoc tm kim th cng...",value:i,onChange:be=>o(be.target.value),className:"w-full pl-10 pr-4 py-2.5 border border-slate-300 dark:border-slate-600 rounded-xl bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 text-sm placeholder:text-slate-400 focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500 transition-all"})]})]}),s.jsx("div",{className:"flex-1 overflow-y-auto p-3",children:re.length===0?s.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-slate-400",children:[s.jsx("svg",{className:"w-16 h-16 mb-3 opacity-30",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})}),s.jsx("p",{className:"text-sm font-medium",children:"Khng tm thy sn phm"}),s.jsx("p",{className:"text-xs mt-1",children:"Th tm kim vi t kha khc"})]}):s.jsx("div",{className:"space-y-2",children:re.map(be=>s.jsx("div",{onClick:()=>J(be),className:"group p-3 bg-white dark:bg-slate-800 rounded-xl hover:shadow-lg hover:shadow-blue-500/10 cursor-pointer border border-slate-200 dark:border-slate-700 hover:border-blue-400 dark:hover:border-blue-600 transition-all duration-200 hover:scale-[1.02]",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-100 to-indigo-100 dark:from-blue-900/30 dark:to-indigo-900/30 rounded-lg flex items-center justify-center flex-shrink-0 group-hover:scale-110 transition-transform",children:s.jsx("svg",{className:"w-5 h-5 text-blue-600 dark:text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"font-semibold text-sm text-slate-900 dark:text-slate-100 line-clamp-1 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors",children:be.name}),s.jsxs("div",{className:"text-[10px] text-slate-500 dark:text-slate-400 mt-0.5",children:["SKU: ",s.jsx("span",{className:"font-mono",children:be.sku})]})]}),s.jsx("svg",{className:"w-5 h-5 text-slate-300 dark:text-slate-600 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})},be.id))})})]}),s.jsxs("div",{className:"w-1/2 bg-white dark:bg-slate-800 flex flex-col",children:[s.jsxs("div",{className:"p-4 border-b border-slate-200 dark:border-slate-700 bg-gradient-to-r from-emerald-50/30 to-teal-50/30 dark:from-slate-800/50 dark:to-slate-800/50",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("svg",{className:"w-4 h-4 text-emerald-600 dark:text-emerald-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),s.jsx("label",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300",children:"Nh cung cp"}),s.jsxs("button",{onClick:()=>{q({name:"",phone:"",address:"",note:""}),A(!0)},className:"ml-auto flex items-center gap-1 text-xs px-2 py-1 rounded-lg bg-emerald-100 text-emerald-700 hover:bg-emerald-200 dark:bg-emerald-900/30 dark:text-emerald-400 dark:hover:bg-emerald-900/50 font-medium transition-all",children:[s.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Thm NCC"]})]}),s.jsxs("select",{value:b,onChange:be=>g(be.target.value),className:"w-full px-4 py-2.5 border border-slate-300 dark:border-slate-600 rounded-xl bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 text-sm font-medium focus:ring-2 focus:ring-emerald-500/50 focus:border-emerald-500 transition-all",children:[s.jsx("option",{value:"",children:"Chn nh cung cp..."}),N.map(be=>s.jsxs("option",{value:be.id,children:[be.name," ",be.phone?` ${be.phone}`:""]},be.id))]})]}),O&&s.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/50",children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl w-full max-w-md p-6 space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-800 dark:text-slate-100",children:"Thm nh cung cp"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium mb-1 text-slate-600 dark:text-slate-400",children:"Tn *"}),s.jsx("input",{autoFocus:!0,value:P.name,onChange:be=>q(ge=>({...ge,name:be.target.value})),className:"w-full px-3 py-2 rounded border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-sm",placeholder:"Tn nh cung cp"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium mb-1 text-slate-600 dark:text-slate-400",children:"in thoi"}),s.jsx("input",{value:P.phone,onChange:be=>q(ge=>({...ge,phone:be.target.value})),className:"w-full px-3 py-2 rounded border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-sm",placeholder:"ST"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium mb-1 text-slate-600 dark:text-slate-400",children:"a ch"}),s.jsx("textarea",{rows:2,value:P.address,onChange:be=>q(ge=>({...ge,address:be.target.value})),className:"w-full px-3 py-2 rounded border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-sm resize-none",placeholder:"a ch nh cung cp"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium mb-1 text-slate-600 dark:text-slate-400",children:"Ghi ch"}),s.jsx("textarea",{rows:2,value:P.note,onChange:be=>q(ge=>({...ge,note:be.target.value})),className:"w-full px-3 py-2 rounded border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-sm resize-none",placeholder:"Thng tin thm (ty chn)"})]})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[s.jsx("button",{onClick:()=>A(!1),className:"px-4 py-2 text-sm rounded border border-slate-300 dark:border-slate-600 hover:bg-slate-100 dark:hover:bg-slate-700",children:"Hy"}),s.jsx("button",{onClick:async()=>{var be,ge;if(!P.name.trim()){Ze.warning("Nhp tn nh cung cp");return}try{const Qe=await S.mutateAsync({name:P.name.trim(),phone:((be=P.phone)==null?void 0:be.trim())||void 0,address:((ge=P.address)==null?void 0:ge.trim())||void 0});g(Qe.id),A(!1)}catch{}},className:"px-4 py-2 text-sm rounded bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-60",disabled:S.isPending,children:S.isPending?"ang lu...":"Lu"})]})]})}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("svg",{className:"w-5 h-5 text-blue-600 dark:text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})}),s.jsx("h3",{className:"text-base font-bold text-slate-900 dark:text-slate-100",children:"Gi hng nhp"})]}),s.jsxs("span",{className:"text-xs text-white bg-gradient-to-r from-blue-600 to-indigo-600 px-3 py-1 rounded-full font-semibold shadow-lg",children:[L.length," sn phm"]})]}),L.length===0?s.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-slate-400",children:[s.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-slate-100 to-slate-200 dark:from-slate-800 dark:to-slate-700 rounded-2xl flex items-center justify-center mb-4",children:s.jsx("svg",{className:"w-12 h-12 text-slate-300 dark:text-slate-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})})}),s.jsx("p",{className:"text-sm font-semibold text-slate-500 dark:text-slate-400",children:"Gi hng trng"}),s.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Chn sn phm bn tri  thm vo"})]}):s.jsx("div",{className:"space-y-3",children:L.map((be,ge)=>s.jsxs("div",{className:"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg p-2.5 hover:shadow-md transition-shadow",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("div",{className:"w-6 h-6 bg-blue-600 rounded flex items-center justify-center flex-shrink-0",children:s.jsxs("span",{className:"text-xs font-bold text-white",children:["#",ge+1]})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"font-medium text-xs text-slate-900 dark:text-slate-100 truncate",children:be.partName}),s.jsxs("div",{className:"text-[9px] text-slate-500 dark:text-slate-400",children:["SKU: ",be.sku]})]}),s.jsx("button",{onClick:()=>me(be.partId),className:"w-6 h-6 flex items-center justify-center bg-red-100 dark:bg-red-900/30 rounded text-red-600 dark:text-red-400 hover:bg-red-200 flex-shrink-0",title:"Xa",children:""})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("button",{onClick:()=>_e(be.partId,"quantity",Math.max(1,be.quantity-1)),className:"w-6 h-6 flex items-center justify-center bg-slate-100 dark:bg-slate-700 rounded text-slate-600 dark:text-slate-300 hover:bg-blue-50 text-sm",children:"-"}),s.jsx("input",{type:"number",value:be.quantity,onChange:Qe=>{const Ye=parseInt(Qe.target.value)||1;_e(be.partId,"quantity",Math.max(1,Ye))},className:"w-10 px-1 py-1 text-center border border-blue-300 dark:border-blue-700 rounded bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 text-xs font-semibold",min:"1"}),s.jsx("button",{onClick:()=>_e(be.partId,"quantity",be.quantity+1),className:"w-6 h-6 flex items-center justify-center bg-slate-100 dark:bg-slate-700 rounded text-slate-600 dark:text-slate-300 hover:bg-blue-50 text-sm",children:"+"})]}),s.jsx(B0,{value:be.importPrice,onValue:Qe=>{const{clean:Ye}=Qj(Qe,be.quantity),at=Ye.importPrice,Je=Math.round(at*1.5);Q(ct=>ct.map(Ke=>Ke.partId===be.partId?{...Ke,importPrice:at,sellingPrice:Ke.sellingPrice===0||Ke.sellingPrice===Math.round((Ke.importPrice||0)*1.5)?Je:Ke.sellingPrice}:Ke))},className:"flex-1 px-2 py-1 border border-slate-300 dark:border-slate-600 rounded bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 text-right text-xs font-medium focus:border-blue-500",placeholder:"Gi nhp"}),s.jsx(B0,{value:be.sellingPrice,onValue:Qe=>_e(be.partId,"sellingPrice",Math.max(0,Math.round(Qe))),className:"flex-1 px-2 py-1 border border-slate-300 dark:border-slate-600 rounded bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 text-right text-xs font-medium focus:border-emerald-500",placeholder:"Gi bn"}),s.jsx("div",{className:"w-20 text-right",children:s.jsx("div",{className:"text-xs font-bold text-blue-600 dark:text-blue-400",children:Te(be.importPrice*be.quantity)})})]})]},be.partId))})]}),s.jsxs("div",{className:"p-3 border-t-2 border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800",children:[s.jsx("div",{className:"mb-3 p-3 bg-gradient-to-r from-blue-600 to-indigo-600 rounded-lg shadow",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-xs font-semibold text-white uppercase",children:"Tng thanh ton"}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-xl font-black text-white",children:Te(je)}),s.jsxs("div",{className:"text-[10px] text-white/70",children:[L.length," SP"]})]})]})}),s.jsxs("div",{className:"mb-3",children:[s.jsxs("label",{className:"block text-[10px] font-bold text-slate-700 dark:text-slate-300 mb-1.5",children:["Phng thc thanh ton ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsx("button",{onClick:()=>G("cash"),className:`flex items-center justify-center gap-1.5 px-3 py-2 border-2 rounded-lg text-xs font-bold transition-all ${H==="cash"?"border-emerald-500 bg-emerald-50 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-400":"border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300"}`,children:" Tin mt"}),s.jsx("button",{onClick:()=>G("bank"),className:`flex items-center justify-center gap-1.5 px-3 py-2 border-2 rounded-lg text-xs font-bold transition-all ${H==="bank"?"border-blue-500 bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400":"border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300"}`,children:" Chuyn khon"})]})]}),H&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"mb-3",children:[s.jsx("label",{className:"block text-[10px] font-bold text-slate-700 dark:text-slate-300 mb-1.5",children:"Hnh thc thanh ton"}),s.jsxs("div",{className:"grid grid-cols-3 gap-1.5",children:[s.jsx("button",{onClick:()=>{te("full"),ue(0)},className:`px-2 py-1.5 border-2 rounded-lg text-[10px] font-bold transition-all ${Z==="full"?"border-blue-500 bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400":"border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300"}`,children:""}),s.jsx("button",{onClick:()=>te("partial"),className:`px-2 py-1.5 border-2 rounded-lg text-[10px] font-bold transition-all ${Z==="partial"?"border-orange-500 bg-orange-50 dark:bg-orange-900/30 text-orange-700 dark:text-orange-400":"border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300"}`,children:"1 phn"}),s.jsx("button",{onClick:()=>{te("note"),ue(0)},className:`px-2 py-1.5 border-2 rounded-lg text-[10px] font-bold transition-all ${Z==="note"?"border-purple-500 bg-purple-50 dark:bg-purple-900/30 text-purple-700 dark:text-purple-400":"border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300"}`,children:"Cng n"})]})]}),Z==="partial"&&s.jsxs("div",{className:"mb-3",children:[s.jsx("label",{className:"block text-[10px] font-bold text-slate-700 dark:text-slate-300 mb-1.5",children:"S tin khch tr"}),s.jsx(B0,{value:se,onValue:be=>ue(Math.max(0,Math.round(be))),className:"w-full px-3 py-2 border-2 border-orange-300 dark:border-orange-700 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 text-right text-sm font-bold focus:border-orange-500",placeholder:"Nhp s tin..."}),s.jsxs("div",{className:"mt-1.5 flex items-center justify-between text-[10px]",children:[s.jsx("span",{className:"text-slate-500",children:"Cn li:"}),s.jsx("span",{className:"font-bold text-red-600 dark:text-red-400",children:Te(Math.max(0,je-se))})]})]}),Z&&s.jsxs("div",{className:"mb-3",children:[s.jsx("label",{className:"block text-[10px] font-bold text-slate-700 dark:text-slate-300 mb-1.5",children:"Loi hch ton"}),s.jsxs("select",{className:"w-full px-3 py-2 border-2 border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 text-xs font-semibold focus:border-blue-500",children:[s.jsx("option",{children:"Mua hng/nhp kho"}),s.jsx("option",{children:"Nhp tr hng"}),s.jsx("option",{children:"Khc"})]})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:t,className:"flex-1 bg-slate-200 hover:bg-slate-300 dark:bg-slate-700 dark:hover:bg-slate-600 text-slate-900 dark:text-slate-100 px-3 py-2.5 rounded-lg font-bold text-xs transition-all",children:s.jsxs("div",{className:"flex items-center justify-center gap-2",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})}),"LU NHP"]})}),s.jsx("button",{onClick:()=>{if(!H){Ze.warning("Vui lng chn phng thc thanh ton");return}if(!Z){Ze.warning("Vui lng chn hnh thc thanh ton");return}if(Z==="partial"&&se<=0){Ze.warning("Vui lng nhp s tin khch tr");return}ce()},disabled:!H||!Z||Z==="partial"&&se<=0,className:"flex-1 bg-orange-500 hover:bg-orange-600 text-white px-3 py-2.5 rounded-lg font-bold text-xs transition-all disabled:bg-slate-300 disabled:text-slate-500 disabled:cursor-not-allowed dark:disabled:bg-slate-600 dark:disabled:text-slate-400",children:s.jsxs("div",{className:"flex items-center justify-center gap-2",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"})}),"NHP KHO"]})})]})]})]})]})}),s.jsx(KA,{isOpen:u,onClose:()=>x(!1),onScan:Y}),s.jsx(uK,{isOpen:R,onClose:()=>U(!1),onSave:Ee})]}):null},dEe=({isOpen:e,onClose:t,onSave:r,initialData:n,mode:a})=>{const[i,o]=T.useState((n==null?void 0:n.name)||""),[l,d]=T.useState((n==null?void 0:n.phone)||""),[c,u]=T.useState((n==null?void 0:n.address)||""),[x,b]=T.useState((n==null?void 0:n.email)||"");T.useEffect(()=>{n&&(o(n.name),d(n.phone),u(n.address),b(n.email))},[n]);const g=k=>{if(k.preventDefault(),!i.trim()){Ze.error("Vui lng nhp tn nh cung cp");return}r({name:i.trim(),phone:l.trim(),address:c.trim(),email:x.trim()})};return e?s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[60] p-4",children:s.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg w-full max-w-md",children:s.jsxs("form",{onSubmit:g,children:[s.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-slate-200 dark:border-slate-700",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:a==="add"?"Thm nh cung cp mi":"Chnh sa nh cung cp"}),s.jsx("button",{type:"button",onClick:t,className:"text-slate-500 hover:text-slate-700 dark:hover:text-slate-300 text-2xl",children:""})]}),s.jsxs("div",{className:"p-4 space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Tn nh cung cp *"}),s.jsx("input",{type:"text",value:i,onChange:k=>o(k.target.value),placeholder:"Nhp tn nh cung cp",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",required:!0,autoFocus:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"S in thoi"}),s.jsx("input",{type:"tel",value:l,onChange:k=>d(k.target.value),placeholder:"Nhp s in thoi",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Email"}),s.jsx("input",{type:"email",value:x,onChange:k=>b(k.target.value),placeholder:"Nhp email",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"a ch"}),s.jsx("textarea",{value:c,onChange:k=>u(k.target.value),placeholder:"Nhp a ch",rows:3,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]})]}),s.jsxs("div",{className:"flex justify-end gap-3 p-4 border-t border-slate-200 dark:border-slate-700",children:[s.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700",children:"Hy"}),s.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium",children:a==="add"?"Thm":"Lu"})]})]})})}):null},uEe=({isOpen:e,onClose:t,onAdd:r,currentBranchId:n})=>{const[a,i]=T.useState(""),[o,l]=T.useState(null),[d,c]=T.useState(1),[u,x]=T.useState(0),{data:b=[]}=Ls({queryKey:["allPartsForReceipt"],queryFn:async()=>{const{data:N,error:S}=await It.from("parts").select("*").order("name");if(S)throw S;return N||[]}}),g=T.useMemo(()=>{if(!a)return[];const N=a.toLowerCase();return b.filter(S=>{var O,A;return S.name.toLowerCase().includes(N)||((O=S.sku)==null?void 0:O.toLowerCase().includes(N))||((A=S.description)==null?void 0:A.toLowerCase().includes(N))})},[b,a]),k=N=>{var S;l(N),x(((S=N.costPrice)==null?void 0:S[n])||0),i(N.name)},y=N=>{if(N.preventDefault(),!o){Ze.error("Vui lng chn sn phm");return}if(d<=0){Ze.error("S lng phi ln hn 0");return}if(u<0){Ze.error("n gi khng c m");return}r({partId:o.id,partName:o.name,sku:o.sku||"",quantity:d,unitPrice:u}),i(""),l(null),c(1),x(0)};return e?s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[60] p-4",children:s.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg w-full max-w-lg",children:s.jsxs("form",{onSubmit:y,children:[s.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-slate-200 dark:border-slate-700",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Thm sn phm vo phiu"}),s.jsx("button",{type:"button",onClick:t,className:"text-slate-500 hover:text-slate-700 dark:hover:text-slate-300 text-2xl",children:""})]}),s.jsxs("div",{className:"p-4 space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Tm kim sn phm *"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"text",value:a,onChange:N=>{i(N.target.value),l(null)},placeholder:"Nhp tn hoc SKU sn phm...",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",autoFocus:!0}),a&&!o&&g.length>0&&s.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:g.map(N=>{var S;return s.jsxs("button",{type:"button",onClick:()=>k(N),className:"w-full px-3 py-2 text-left hover:bg-slate-100 dark:hover:bg-slate-700 border-b border-slate-200 dark:border-slate-700 last:border-0",children:[s.jsx("div",{className:"text-sm font-medium text-slate-900 dark:text-slate-100",children:N.name}),s.jsxs("div",{className:"text-xs text-slate-500",children:["SKU: ",N.sku||"N/A"," | Gi nhp:"," ",Te(((S=N.costPrice)==null?void 0:S[n])||0)]})]},N.id)})})]}),o&&s.jsxs("div",{className:"mt-2 p-2 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded text-sm text-green-800 dark:text-green-200",children:["  chn: ",o.name," (",o.sku,")"]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"S lng *"}),s.jsx("input",{type:"number",value:d,onChange:N=>c(Number(N.target.value)),min:"1",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"n gi nhp *"}),s.jsx(B0,{value:u,onValue:x,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",placeholder:"0"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Thnh tin"}),s.jsx("input",{type:"text",value:Te(d*u),readOnly:!0,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-slate-100 font-bold"})]})]}),s.jsxs("div",{className:"flex justify-end gap-3 p-4 border-t border-slate-200 dark:border-slate-700",children:[s.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700",children:"Hy"}),s.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium",children:"Thm sn phm"})]})]})})}):null},hEe=({receipt:e,onClose:t,onSave:r,currentBranchId:n})=>{const[a,i]=T.useState(e.supplier),[o,l]=T.useState(""),[d,c]=T.useState(e.supplier),[u,x]=T.useState(!1),[b,g]=T.useState(!1),[k,y]=T.useState("add"),[N,S]=T.useState(!1),[O,A]=T.useState(null),{data:P=[]}=Ls({queryKey:["suppliers"],queryFn:async()=>{const{data:J,error:ie}=await It.from("suppliers").select("*").order("name");if(ie)throw ie;return J||[]}}),q=T.useMemo(()=>{if(!d)return P;const J=d.toLowerCase();return P.filter(ie=>ie.name.toLowerCase().includes(J))},[P,d]),[W,R]=T.useState(e.items.map(J=>({id:J.id,partName:J.partName,quantity:J.quantity,unitPrice:J.unitPrice||0,totalPrice:J.quantity*(J.unitPrice||0),notes:J.notes||""}))),[U,L]=T.useState([{time:"15:31",date:e.date,payer:"Xun Nhan",cashier:"(Tin mt)",amount:e.total}]),[Q,H]=T.useState(!0);ma.useEffect(()=>{var ie,Y,_e;const J=e.items[0];if((ie=J==null?void 0:J.notes)!=null&&ie.includes("Phone:")){const me=(_e=(Y=J.notes.split("Phone:")[1])==null?void 0:Y.split("NV:")[0])==null?void 0:_e.trim();me&&l(me)}},[e.items]),ma.useEffect(()=>{const J=ie=>{ie.target.closest(".supplier-dropdown-container")||x(!1)};return document.addEventListener("mousedown",J),()=>document.removeEventListener("mousedown",J)},[]);const G=W.reduce((J,ie)=>J+ie.totalPrice,0),Z=U.reduce((J,ie)=>J+ie.amount,0),te=(J,ie)=>{const Y=[...W];Y[J].quantity=ie,Y[J].totalPrice=ie*Y[J].unitPrice,R(Y)},se=(J,ie)=>{const Y=[...W];Y[J].unitPrice=ie,Y[J].totalPrice=Y[J].quantity*ie,R(Y)},ue=J=>{if(W.length===1){Ze.error("Phi c t nht 1 sn phm");return}const ie=W.filter((Y,_e)=>_e!==J);R(ie),Ze.success(" xa sn phm")},ae=J=>{const ie={id:`new-${Date.now()}`,partId:J.partId,partName:J.partName,quantity:J.quantity,unitPrice:J.unitPrice,totalPrice:J.quantity*J.unitPrice,notes:"",sku:J.sku};R([...W,ie]),S(!1),Ze.success(` thm ${J.partName} (s lu khi bm LU)`)},pe=J=>{i(J.name),l(J.phone),g(!1),Ze.success(k==="add"?" thm nh cung cp":" cp nht nh cung cp")},ve=()=>{y("edit"),g(!0)},Pe=()=>{y("add"),g(!0)},xe=J=>{A(J),Ze.info("Click vo  s lng hoc n gi  chnh sa")},B=J=>{confirm("Bn c mun xa sn phm ny?")&&ue(J)},re=J=>{if(J.preventDefault(),!a){Ze.error("Vui lng chn nh cung cp");return}if(W.some(ie=>ie.quantity<=0)){Ze.error("S lng phi ln hn 0");return}r({supplier:a,supplierPhone:o,items:W,payments:U,isPaid:Q})};return s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg w-full max-w-3xl max-h-[90vh] overflow-y-auto",children:[s.jsxs("form",{onSubmit:re,children:[s.jsxs("div",{className:"sticky top-0 bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 p-4 flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),s.jsxs("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:["[Chnh sa] Phiu Nhp Kho ",e.receiptCode]})]}),s.jsxs("div",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:[new Date(e.date).toLocaleDateString("vi-VN",{day:"2-digit",month:"2-digit",year:"numeric"})," ",new Date(e.date).toLocaleTimeString("vi-VN",{hour:"2-digit",minute:"2-digit"})]})]}),s.jsx("button",{type:"button",onClick:t,className:"text-slate-500 hover:text-slate-700 dark:hover:text-slate-300 text-2xl w-8 h-8 flex items-center justify-center rounded hover:bg-slate-100 dark:hover:bg-slate-700",children:""})]}),s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-base font-medium text-teal-600 dark:text-teal-400 mb-2",children:"Nh cung cp:"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("div",{className:"flex-1 relative supplier-dropdown-container",children:[s.jsx("input",{type:"text",value:d,onChange:J=>{c(J.target.value),x(!0)},onFocus:()=>x(!0),placeholder:"Tm kim v chn mt nh cung cp",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"}),d&&s.jsx("button",{type:"button",onClick:()=>{c(""),i(""),l("")},className:"absolute right-2 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600",children:""}),u&&q.length>0&&s.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:q.map(J=>s.jsxs("button",{type:"button",onClick:()=>{i(J.name),c(J.name),l(J.phone||""),x(!1)},className:"w-full px-3 py-2 text-left hover:bg-slate-100 dark:hover:bg-slate-700 border-b border-slate-200 dark:border-slate-700 last:border-0",children:[s.jsx("div",{className:"text-sm font-medium text-slate-900 dark:text-slate-100",children:J.name}),J.phone&&s.jsxs("div",{className:"text-xs text-slate-500",children:["Phone: ",J.phone]})]},J.id))})]}),s.jsxs("button",{type:"button",onClick:ve,className:"px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700 flex items-center gap-2",children:[s.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Chnh sa"]}),s.jsxs("button",{type:"button",onClick:Pe,className:"px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg flex items-center gap-2",children:[s.jsx("span",{className:"text-xl",children:"+"}),"Thm mi"]})]})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsx("label",{className:"block text-base font-medium text-teal-600 dark:text-teal-400",children:"Chi tit sn phm nhp kho:"}),s.jsxs("button",{type:"button",onClick:()=>S(!0),className:"text-sm text-teal-600 hover:text-teal-700 dark:text-teal-400 flex items-center gap-1",children:[s.jsx("span",{className:"text-lg",children:"+"}),"Thm sn phm"]})]}),s.jsx("div",{className:"border border-slate-300 dark:border-slate-600 rounded-lg overflow-hidden",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-slate-700 dark:text-slate-300",children:"-"}),s.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-slate-700 dark:text-slate-300",children:"Tn"}),s.jsx("th",{className:"px-3 py-2 text-center text-sm font-medium text-slate-700 dark:text-slate-300",children:"SL"}),s.jsx("th",{className:"px-3 py-2 text-right text-sm font-medium text-slate-700 dark:text-slate-300",children:"n gi nhp"}),s.jsx("th",{className:"px-3 py-2 text-right text-sm font-medium text-slate-700 dark:text-slate-300",children:"Thnh tin"}),s.jsx("th",{className:"px-3 py-2 text-center text-sm font-medium text-slate-700 dark:text-slate-300 w-20"})]})}),s.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:W.map((J,ie)=>s.jsxs("tr",{className:`hover:bg-slate-50 dark:hover:bg-slate-700/30 transition-colors ${O===ie?"bg-blue-50 dark:bg-blue-900/20":""}`,children:[s.jsx("td",{className:"px-3 py-3 text-sm text-slate-900 dark:text-slate-100",children:ie+1}),s.jsxs("td",{className:"px-3 py-3",children:[s.jsx("div",{className:"text-sm text-slate-900 dark:text-slate-100",children:J.partName}),s.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"[Khc]"}),s.jsxs("div",{className:"text-xs text-slate-500",children:["- G Bn l: ",Te(7e4)]}),s.jsxs("div",{className:"text-xs text-slate-500",children:["- G Bn s: ",Te(0)]}),s.jsx("div",{className:"text-xs text-red-500",children:"( xut kho)"})]}),s.jsx("td",{className:"px-3 py-3 text-center",children:s.jsx("input",{type:"number",value:J.quantity,onChange:Y=>te(ie,Number(Y.target.value)),onFocus:()=>A(ie),onBlur:()=>A(null),min:"1",className:"w-16 px-2 py-1 border border-slate-300 dark:border-slate-600 rounded text-center bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:border-blue-500 focus:ring-1 focus:ring-blue-500"})}),s.jsx("td",{className:"px-3 py-3 text-right",children:s.jsx(B0,{value:J.unitPrice,onValue:Y=>se(ie,Y),className:"w-28 px-2 py-1 border border-slate-300 dark:border-slate-600 rounded text-right bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:border-blue-500 focus:ring-1 focus:ring-blue-500"})}),s.jsx("td",{className:"px-3 py-3 text-right text-sm font-medium text-slate-900 dark:text-slate-100",children:Te(J.totalPrice)}),s.jsx("td",{className:"px-3 py-3 text-center",children:s.jsxs("div",{className:"flex justify-center gap-1",children:[s.jsx("button",{type:"button",onClick:()=>xe(ie),className:"p-1 text-blue-400 hover:bg-blue-500/20 rounded",title:"Chnh sa",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),s.jsx("button",{type:"button",onClick:()=>B(ie),className:"p-1 text-slate-400 hover:bg-slate-500/20 rounded",title:"Xa sn phm",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"})})})]})})]},J.id))}),s.jsx("tfoot",{className:"bg-slate-50 dark:bg-slate-700",children:s.jsxs("tr",{children:[s.jsx("td",{colSpan:4,className:"px-3 py-2 text-right font-bold text-slate-900 dark:text-slate-100",children:"TNG:"}),s.jsx("td",{className:"px-3 py-2 text-right font-bold text-slate-900 dark:text-slate-100",children:Te(G)}),s.jsx("td",{})]})})]})})]}),s.jsxs("div",{className:"border border-slate-300 dark:border-slate-600 rounded-lg p-4",children:[s.jsx("label",{className:"block text-base font-medium text-teal-600 dark:text-teal-400 mb-3",children:"Cng n:"}),s.jsxs("div",{className:"flex items-center justify-between mb-3 p-3 bg-red-50 dark:bg-red-900/20 rounded-lg",children:[s.jsxs("span",{className:"text-lg font-bold text-red-600 dark:text-red-400",children:["TNG PHI CHI: ",Te(G)]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("span",{className:"text-sm text-green-600 dark:text-green-400 flex items-center gap-1",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})," thanh ton "]}),s.jsxs("button",{type:"button",className:"px-3 py-1 bg-red-600 hover:bg-red-700 text-white rounded text-sm flex items-center gap-1",children:[s.jsx("span",{className:"text-lg",children:"+"}),"To phiu chi"]})]})]}),s.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400 mb-3 flex items-start gap-1",children:[s.jsx("svg",{className:"w-4 h-4 mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Tng phi chi l ph cha phi tr cho i tc sa cha"]}),s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{className:"border-b border-slate-200 dark:border-slate-700",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-2 py-2 text-left text-slate-700 dark:text-slate-300",children:"-"}),s.jsx("th",{className:"px-2 py-2 text-left text-slate-700 dark:text-slate-300",children:"Thi gian"}),s.jsx("th",{className:"px-2 py-2 text-left text-slate-700 dark:text-slate-300",children:"Ngi chi - Ghi ch"}),s.jsx("th",{className:"px-2 py-2 text-right text-slate-700 dark:text-slate-300",children:"S tin"})]})}),s.jsx("tbody",{children:U.map((J,ie)=>s.jsxs("tr",{className:"border-b border-slate-200 dark:border-slate-700",children:[s.jsx("td",{className:"px-2 py-2 text-slate-900 dark:text-slate-100",children:ie+1}),s.jsxs("td",{className:"px-2 py-2 text-slate-900 dark:text-slate-100",children:[J.time," ",new Date(J.date).toLocaleDateString("vi-VN",{day:"2-digit",month:"2-digit",year:"numeric"})]}),s.jsxs("td",{className:"px-2 py-2",children:[s.jsx("div",{className:"text-slate-900 dark:text-slate-100",children:J.payer}),s.jsx("div",{className:"text-xs text-slate-500",children:J.cashier})]}),s.jsx("td",{className:"px-2 py-2 text-right text-slate-900 dark:text-slate-100",children:Te(J.amount)})]},ie))}),s.jsx("tfoot",{className:"bg-slate-50 dark:bg-slate-700",children:s.jsxs("tr",{children:[s.jsx("td",{colSpan:3,className:"px-2 py-2 text-right font-bold text-slate-900 dark:text-slate-100",children:"Tng  chi"}),s.jsx("td",{className:"px-2 py-2 text-right font-bold text-slate-900 dark:text-slate-100",children:Te(Z)})]})})]})]})]}),s.jsxs("div",{className:"sticky bottom-0 bg-white dark:bg-slate-800 border-t border-slate-200 dark:border-slate-700 p-4 flex justify-end gap-3",children:[s.jsx("button",{type:"button",onClick:t,className:"px-6 py-2 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700",children:"NG"}),s.jsx("button",{type:"submit",className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium",children:"LU"})]})]}),s.jsx(dEe,{isOpen:b,onClose:()=>g(!1),onSave:pe,initialData:k==="edit"?{name:a,phone:o,address:"",email:""}:void 0,mode:k}),s.jsx(uEe,{isOpen:N,onClose:()=>S(!1),onAdd:ae,currentBranchId:n})]})})},fEe=({transactions:e})=>{const t=Un(),{data:r=[]}=L5(),[n,a]=T.useState("7days"),[i,o]=T.useState(Fn(new Date,!0)),[l,d]=T.useState(Fn(new Date,!0)),[c,u]=T.useState(""),[x,b]=T.useState(null),{currentBranchId:g}=Ua(),k=T.useMemo(()=>{console.log(" [InventoryHistorySection] Tng s giao dch:",e.length);let A=e.filter(q=>q.type==="Nhp kho");console.log(" [InventoryHistorySection] Giao dch 'Nhp kho':",A.length);const P=new Date;switch(n){case"7days":const q=new Date(P.getTime()-6048e5);A=A.filter(U=>new Date(U.date)>=q);break;case"30days":const W=new Date(P.getTime()-720*60*60*1e3);A=A.filter(U=>new Date(U.date)>=W);break;case"thisMonth":const R=new Date(P.getFullYear(),P.getMonth(),1);A=A.filter(U=>new Date(U.date)>=R);break;case"custom":A=A.filter(U=>{const L=new Date(U.date);return L>=new Date(i)&&L<=new Date(l)});break}if(c){const q=c.toLowerCase();A=A.filter(W=>W.partName.toLowerCase().includes(q)||W.notes&&W.notes.toLowerCase().includes(q))}return A.sort((q,W)=>new Date(W.date).getTime()-new Date(q.date).getTime())},[e,n,i,l,c]),y=T.useMemo(()=>k.reduce((A,P)=>A+P.totalPrice,0),[k]),N=T.useMemo(()=>{const A=new Map;return k.forEach(P=>{var L,Q;const q=new Date(P.date),W=`${q.getFullYear()}-${String(q.getMonth()+1).padStart(2,"0")}-${String(q.getDate()).padStart(2,"0")}`,R=(L=P.notes)!=null&&L.includes("NCC:")?(Q=P.notes.split("NCC:")[1])==null?void 0:Q.trim():"Khng xc nh",U=`${W}_${R}_${q.getHours()}_${q.getMinutes()}`;A.has(U)||A.set(U,[]),A.get(U).push(P)}),Array.from(A.entries()).map(([P,q],W)=>{var Q,H,G;const R=q[0],U=new Date(R.date);let L="";if(R.notes){const Z=R.notes.match(/NH-\d{8}-\d{3}/);Z&&(L=Z[0])}return L||(L=`NH-${`${U.getFullYear()}${String(U.getMonth()+1).padStart(2,"0")}${String(U.getDate()).padStart(2,"0")}`}-${String(A.size-W).padStart(3,"0")}`),{receiptCode:L,date:R.date,supplier:(Q=R.notes)!=null&&Q.includes("NCC:")?(G=(H=R.notes.split("NCC:")[1])==null?void 0:H.split("|")[0])==null?void 0:G.trim():"Khng xc nh",items:q,total:q.reduce((Z,te)=>Z+te.totalPrice,0)}}).sort((P,q)=>new Date(q.date).getTime()-new Date(P.date).getTime())},[k]),[S,O]=T.useState(new Set);return s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-sm border border-slate-200 dark:border-slate-700",children:[s.jsxs("div",{className:"p-3 sm:p-6 border-b border-slate-200 dark:border-slate-700",children:[s.jsx("h2",{className:"text-lg sm:text-xl font-bold text-slate-900 dark:text-slate-100 mb-3 sm:mb-4",children:"Lch s nhp kho"}),s.jsx("div",{className:"flex flex-wrap gap-2 mb-3 sm:mb-4",children:[{key:"7days",label:"7 ngy qua"},{key:"30days",label:"30 ngy qua"},{key:"thisMonth",label:"Thng ny"},{key:"custom",label:"Ty chn"}].map(A=>s.jsx("button",{onClick:()=>a(A.key),className:`px-3 py-1.5 sm:px-4 sm:py-2 rounded-lg text-sm sm:text-base font-medium transition-colors ${n===A.key?"bg-blue-600 text-white":"bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-600"}`,children:A.label},A.key))}),n==="custom"&&s.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 mb-3 sm:mb-4",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("label",{className:"block text-xs sm:text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"T ngy"}),s.jsx("input",{type:"date",value:i,onChange:A=>o(A.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 text-sm sm:text-base"})]}),s.jsxs("div",{className:"flex-1",children:[s.jsx("label",{className:"block text-xs sm:text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"n ngy"}),s.jsx("input",{type:"date",value:l,onChange:A=>d(A.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 text-sm sm:text-base"})]})]}),s.jsx("input",{type:"text",placeholder:"Nh cung cp, SKU, tn ph tng...",value:c,onChange:A=>u(A.target.value),className:"w-full px-3 py-2 sm:px-4 sm:py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 text-sm sm:text-base"})]}),s.jsx("div",{className:"px-3 py-3 sm:px-6 sm:py-4 bg-slate-50 dark:bg-slate-900 border-b border-slate-200 dark:border-slate-700",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{className:"text-xs sm:text-sm text-slate-600 dark:text-slate-400",children:["Tng s tin:"," ",s.jsx("span",{className:"text-base sm:text-lg font-bold text-slate-900 dark:text-slate-100",children:N.length})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-xs sm:text-sm text-slate-600 dark:text-slate-400",children:"Tng gi tr"}),s.jsx("div",{className:"text-base sm:text-lg font-bold text-blue-600",children:Te(y)})]})]})}),s.jsxs("div",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:[N.length>0&&s.jsxs("div",{className:"hidden md:grid grid-cols-12 gap-4 px-4 py-3 bg-slate-100 dark:bg-slate-700 border-b border-slate-200 dark:border-slate-600 sticky top-0 z-10",children:[s.jsx("div",{className:"col-span-1 text-xs font-semibold text-slate-600 dark:text-slate-300"}),s.jsx("div",{className:"col-span-2 text-xs font-semibold text-slate-600 dark:text-slate-300",children:"M phiu"}),s.jsx("div",{className:"col-span-2 text-xs font-semibold text-slate-600 dark:text-slate-300",children:"Nh cung cp"}),s.jsx("div",{className:"col-span-4 text-xs font-semibold text-slate-600 dark:text-slate-300",children:"Chi tit"}),s.jsx("div",{className:"col-span-2 text-xs font-semibold text-slate-600 dark:text-slate-300",children:"Thanh ton"}),s.jsx("div",{className:"col-span-1 text-xs font-semibold text-slate-600 dark:text-slate-300",children:"Thao tc"})]}),N.length===0?s.jsxs("div",{className:"px-3 py-8 sm:px-6 sm:py-12 text-center text-slate-500",children:[s.jsx("div",{className:"text-4xl sm:text-6xl mb-4",children:""}),s.jsx("div",{className:"text-sm sm:text-base",children:"Khng c d liu"})]}):N.map(A=>{var H,G,Z,te,se,ue,ae;const P=new Date(A.date),q=P.toLocaleDateString("vi-VN",{day:"2-digit",month:"2-digit",year:"numeric"}),W=P.toLocaleTimeString("vi-VN",{hour:"2-digit",minute:"2-digit"}),R=r.find(pe=>{var ve;return(ve=pe.description)==null?void 0:ve.includes(A.receiptCode)}),U=R?R.totalAmount-R.remainingAmount:A.total,L=(R==null?void 0:R.remainingAmount)||0,Q=L>0;return s.jsxs("div",{className:"p-4 hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors",children:[s.jsxs("div",{className:"md:hidden flex flex-col gap-3 bg-white dark:bg-slate-800/60 rounded-2xl border border-slate-200 dark:border-slate-700 p-4 shadow-sm",children:[s.jsxs("div",{className:"flex items-start justify-between gap-3",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-cyan-600 dark:text-cyan-300",children:[" ",A.receiptCode]}),s.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400 flex items-center gap-1 mt-1",children:[""," ",s.jsxs("span",{children:[q,"  ",W]})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Tng tin"}),s.jsx("div",{className:"text-lg font-bold text-slate-900 dark:text-white",children:Te(A.total)})]})]}),s.jsxs("div",{className:"flex items-center gap-3 bg-slate-50 dark:bg-slate-900/30 rounded-2xl p-3",children:[s.jsx("div",{className:"w-12 h-12 rounded-full bg-orange-100 dark:bg-orange-900/30 flex items-center justify-center text-orange-600 dark:text-orange-200 font-semibold text-lg",children:""}),s.jsxs("div",{children:[s.jsx("div",{className:"text-base font-semibold text-slate-900 dark:text-white",children:A.supplier}),((H=A.items[0].notes)==null?void 0:H.includes("Phone:"))&&s.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:[" ",(G=A.items[0].notes.split("Phone:")[1])==null?void 0:G.trim()]})]})]}),s.jsx("div",{className:"space-y-2",children:A.items.map((pe,ve)=>s.jsxs("div",{className:"flex items-start justify-between text-sm text-slate-700 dark:text-slate-200",children:[s.jsxs("div",{children:[s.jsxs("span",{className:"font-semibold",children:[pe.quantity," x ",pe.partName]}),s.jsxs("div",{className:"text-xs text-slate-400",children:[Te(pe.unitPrice||0)," / sn phm"]})]}),s.jsx("span",{className:"font-bold text-slate-900 dark:text-white",children:Te(pe.quantity*(pe.unitPrice||0))})]},pe.id))}),s.jsx("div",{className:"flex flex-wrap gap-2",children:Q?s.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-semibold bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-200",children:[" Cn n ",Te(L)]}):s.jsx("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-semibold bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-200",children:"  thanh ton"})}),s.jsx("div",{className:"flex flex-wrap gap-2 pt-3 border-t border-dashed border-slate-200 dark:border-slate-700",children:s.jsx("button",{onClick:()=>b({...A,date:new Date(A.date)}),className:"flex-1 min-w-[120px] px-3 py-2 rounded-xl bg-slate-100 dark:bg-slate-800 text-slate-700 dark:text-slate-200 text-sm font-medium",children:"Chnh sa"})})]}),s.jsxs("div",{className:"hidden md:grid grid-cols-12 gap-4 items-start",children:[s.jsx("div",{className:"col-span-1 flex items-start pt-1",children:s.jsx("input",{type:"checkbox",checked:S.has(A.receiptCode),onChange:pe=>{const ve=new Set(S);pe.target.checked?ve.add(A.receiptCode):ve.delete(A.receiptCode),O(ve)},className:"w-4 h-4 rounded border-slate-300"})}),s.jsx("div",{className:"col-span-2",children:s.jsxs("div",{className:"space-y-1",children:[s.jsx("div",{className:"text-sm font-bold text-cyan-600 dark:text-cyan-400",children:A.receiptCode}),s.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:[q," ",W]}),s.jsxs("div",{className:"text-xs text-slate-600 dark:text-slate-300",children:[s.jsx("span",{className:"font-medium",children:"NV:"})," ",((se=(te=(Z=A.items[0].notes)==null?void 0:Z.split("NV:")[1])==null?void 0:te.split("NCC:")[0])==null?void 0:se.trim())||"Xun Nhan"]})]})}),s.jsx("div",{className:"col-span-2",children:s.jsxs("div",{className:"space-y-1",children:[s.jsx("div",{className:"text-sm font-semibold text-slate-900 dark:text-slate-100",children:A.supplier}),((ue=A.items[0].notes)==null?void 0:ue.includes("Phone:"))&&s.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:[" ",(ae=A.items[0].notes.split("Phone:")[1])==null?void 0:ae.trim()]})]})}),s.jsx("div",{className:"col-span-4",children:s.jsx("div",{className:"space-y-1",children:A.items.map((pe,ve)=>s.jsxs("div",{className:"text-xs text-slate-700 dark:text-slate-300",children:[s.jsxs("span",{className:"font-medium",children:[pe.quantity," x"]})," ",pe.partName,s.jsxs("span",{className:"text-slate-400 ml-1",children:["(",Te(pe.unitPrice||0),")"]})]},pe.id))})}),s.jsx("div",{className:"col-span-2",children:s.jsxs("div",{className:"space-y-1",children:[s.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:"Tng tin:"}),s.jsx("div",{className:"text-base font-bold text-slate-900 dark:text-white",children:Te(A.total)}),Q?s.jsxs("div",{className:"mt-2 space-y-1",children:[s.jsxs("div",{className:"text-xs text-green-600 dark:text-green-400",children:[" tr: ",Te(U)]}),s.jsxs("div",{className:"text-xs font-semibold text-red-600 dark:text-red-400",children:["Cn n: ",Te(L)]}),s.jsx("div",{className:"inline-flex items-center gap-1 px-2 py-1 rounded text-xs font-medium bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-300",children:" Cn n"})]}):s.jsx("div",{className:"mt-2",children:s.jsx("div",{className:"inline-flex items-center gap-1 px-2 py-1 rounded text-xs font-medium bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-300",children:"  thanh ton"})})]})}),s.jsx("div",{className:"col-span-1",children:s.jsx("button",{onClick:()=>b({...A,date:new Date(A.date)}),className:"p-1.5 text-blue-400 hover:bg-blue-500/20 rounded transition-colors",title:"Chnh sa",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})})})]})]},A.receiptCode)})]}),s.jsx("div",{className:"px-6 py-4 border-t border-slate-200 dark:border-slate-700",children:s.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:["Hin th ",N.length," phiu nhp"]})}),x&&s.jsx(hEe,{receipt:x,onClose:()=>b(null),onSave:async A=>{var P,q,W,R,U,L,Q,H,G;try{const Z=new Set(x.items.map(ae=>ae.id)),te=new Set(A.items.filter(ae=>!ae.id.startsWith("new-")).map(ae=>ae.id)),se=Array.from(Z).filter(ae=>!te.has(ae));for(const ae of se){const pe=x.items.find(B=>B.id===ae);if(!pe)continue;const{data:ve,error:Pe}=await It.from("parts").select("stock").eq("id",pe.partId).single();if(Pe)throw new Error(`Khng th ly thng tin ph tng: ${Pe.message}`);if(ve){const re=(((P=ve.stock)==null?void 0:P[g])||0)-pe.quantity;if(re<0)throw new Error(`Khng th xa sn phm "${pe.partName}" v s lm tn kho m`);const{error:J}=await It.from("parts").update({stock:{...ve.stock,[g]:re}}).eq("id",pe.partId);if(J)throw new Error(`Khng th cp nht tn kho: ${J.message}`)}const{error:xe}=await It.from("inventory_transactions").delete().eq("id",ae);if(xe)throw new Error(`Khng th xa giao dch: ${xe.message}`)}for(const ae of A.items){if(ae.id.startsWith("new-"))continue;const pe=x.items.find(Pe=>Pe.id===ae.id),{error:ve}=await It.from("inventory_transactions").update({quantity:ae.quantity,unitPrice:ae.unitPrice,totalPrice:ae.totalPrice,notes:`NV:${((R=(W=(q=A.items[0].notes)==null?void 0:q.split("NV:")[1])==null?void 0:W.split("NCC:")[0])==null?void 0:R.trim())||"Xun Nhan"} NCC:${A.supplier}${A.supplierPhone?` Phone:${A.supplierPhone}`:""}`}).eq("id",ae.id);if(ve)throw ve;if(pe&&pe.quantity!==ae.quantity){const Pe=ae.quantity-pe.quantity,{data:xe,error:B}=await It.from("parts").select("stock, id").eq("id",pe.partId).single();if(B)throw new Error(`Khng th ly thng tin ph tng: ${B.message}`);if(xe){const re=((U=xe.stock)==null?void 0:U[g])||0,J=re+Pe;if(J<0)throw new Error(`Khng th gim s lng v s lm tn kho m (hin c: ${re})`);const{error:ie}=await It.from("parts").update({stock:{...xe.stock,[g]:J}}).eq("id",xe.id);if(ie)throw new Error(`Khng th cp nht tn kho: ${ie.message}`)}}}const ue=A.items.filter(ae=>ae.id.startsWith("new-"));for(const ae of ue){const{data:pe,error:ve}=await It.from("parts").select("stock, id").eq("id",ae.partId).single();if(ve)throw new Error(`Khng th ly thng tin ph tng: ${ve.message}`);if(pe){const B=(((L=pe.stock)==null?void 0:L[g])||0)+ae.quantity,{error:re}=await It.from("parts").update({stock:{...pe.stock,[g]:B}}).eq("id",pe.id);if(re)throw new Error(`Khng th cp nht tn kho: ${re.message}`)}const{error:Pe}=await It.from("inventory_transactions").insert({type:"Nhp kho",partId:ae.partId,partName:ae.partName,quantity:ae.quantity,date:x.date.toISOString(),unitPrice:ae.unitPrice,totalPrice:ae.totalPrice,branchId:g,notes:`NV:${((G=(H=(Q=A.items[0].notes)==null?void 0:Q.split("NV:")[1])==null?void 0:H.split("NCC:")[0])==null?void 0:G.trim())||"Xun Nhan"} NCC:${A.supplier}${A.supplierPhone?` Phone:${A.supplierPhone}`:""}`});if(Pe)throw new Error(`Khng th to giao dch mi: ${Pe.message}`)}Ze.success(` cp nht phiu nhp kho (${A.items.length} sn phm)`),t.invalidateQueries({queryKey:["inventoryTransactions"]}),t.invalidateQueries({queryKey:["partsRepo"]}),t.invalidateQueries({queryKey:["partsRepoPaged"]}),b(null)}catch(Z){Ze.error(`Li cp nht: ${Z.message||"Khng r"}`)}},currentBranchId:g})]})},mEe=()=>{var gr;const{currentBranchId:e}=Ua(),{mutateAsync:t}=fAe(),r=One(),{data:n=[]}=RE({branchId:e}),[a,i]=T.useState("stock"),[o,l]=T.useState(!1),[d,c]=T.useState(""),[u,x]=T.useState("all"),[b,g]=T.useState("all"),[k,y]=T.useState(!1),[N,S]=T.useState(1),[O,A]=T.useState(20),[P,q]=T.useState([]),[W,R]=T.useState(null),[U,L]=T.useState(!1),[Q,H]=T.useState(!1),[G,Z]=T.useState(null),[te,se]=T.useState(!1),[ue,ae]=T.useState(null),pe=ot=>{if(!ot)return"#94a3b8";let Lt=0;for(let Mt=0;Mt<ot.length;Mt++)Lt=ot.charCodeAt(Mt)+((Lt<<5)-Lt);const ir=(Lt&16777215).toString(16).toUpperCase();return`#${"00000".substring(0,6-ir.length)+ir}`},{confirm:ve,confirmState:Pe,handleConfirm:xe,handleCancel:B}=ZG(),{data:re,isLoading:J,isError:ie}=U6({page:N,pageSize:O,search:d,category:u==="all"?void 0:u}),Y=(re==null?void 0:re.data)||[],_e=((gr=re==null?void 0:re.meta)==null?void 0:gr.total)||0,me=Math.max(1,Math.ceil(_e/O)),{data:ne,refetch:je}=Ls({queryKey:["allPartsForTotals",e,d,u],queryFn:async()=>{console.log(" Fetching allPartsForTotals...");let ot=It.from("parts").select("id, name, sku, stock, costPrice, retailPrice").order("name");if(u&&u!=="all"&&(ot=ot.eq("category",u)),d&&d.trim()){const Mt=d.trim();ot=ot.or(`name.ilike.%${Mt}%,sku.ilike.%${Mt}%`)}const{data:Lt,error:ir}=await ot;if(ir)throw ir;return console.log(` Fetched ${(Lt==null?void 0:Lt.length)||0} parts`),Lt||[]},staleTime:5e3}),De=T.useMemo(()=>{if(!ne)return{totalProducts:0,inStock:0,lowStock:0,outOfStock:0};const ot={totalProducts:ne.length,inStock:0,lowStock:0,outOfStock:0},Lt=e||"";return ne.forEach(ir=>{var Ge;const Mt=((Ge=ir.stock)==null?void 0:Ge[Lt])||0;Mt>0&&(ot.inStock+=1),Mt===0&&(ot.outOfStock+=1),Mt>0&&Mt<=Vh&&(ot.lowStock+=1)}),ot},[ne,e]),ce=T.useMemo(()=>[{id:"all",label:"Tt c",description:"Ton b kho",count:De.totalProducts,variant:"neutral"},{id:"in-stock",label:"Cn hng",description:"> 0",count:De.inStock,variant:"success"},{id:"low-stock",label:"Sp ht",description:`<= ${Vh}`,count:De.lowStock,variant:"warning"},{id:"out-of-stock",label:"Ht hng",description:"= 0",count:De.outOfStock,variant:"danger"}],[De]),Ee=T.useMemo(()=>{if(!ne)return new Set;const ot=new Map;ne.forEach(ir=>{const Mt=ot.get(ir.name)||0;ot.set(ir.name,Mt+1)});const Lt=new Set(Array.from(ot.entries()).filter(([ir,Mt])=>Mt>1).map(([ir,Mt])=>ir));return console.log(` Detected ${Lt.size} duplicate product names from ${ne.length} parts`),Lt.size>0&&console.log("Duplicate names:",Array.from(Lt).slice(0,5)),Lt},[ne]),be=T.useCallback(ot=>Ee.has(ot),[Ee]),{data:ge}=Ls({queryKey:["duplicateParts",e,Array.from(Ee)],queryFn:async()=>{if(Ee.size===0)return[];console.log(` Fetching all duplicate parts for ${Ee.size} names...`);const{data:ot,error:Lt}=await It.from("parts").select("*").in("name",Array.from(Ee)).order("name");if(Lt)throw Lt;return console.log(` Found ${(ot==null?void 0:ot.length)||0} parts with duplicate names`),ot||[]},enabled:k&&Ee.size>0,staleTime:5e3}),Qe=T.useMemo(()=>{const ot=k&&Ee.size>0?ge||[]:Y;if(b==="all")return ot;const Lt=e||"";return ot.filter(ir=>{var Ge;const Mt=((Ge=ir.stock)==null?void 0:Ge[Lt])||0;return b==="in-stock"?Mt>0:b==="low-stock"?Mt>0&&Mt<=Vh:b==="out-of-stock"?Mt===0:!0})},[Y,k,Ee,ge,b,e]);T.useEffect(()=>{k&&Ee.size===0&&y(!1)},[k,Ee.size]);const Ye=T.useMemo(()=>ne?ne.reduce((ot,Lt)=>{var ir;return ot+(((ir=Lt.stock)==null?void 0:ir[e])||0)},0):0,[ne,e]),at=T.useMemo(()=>ne?ne.reduce((ot,Lt)=>{var Ge,At;const ir=((Ge=Lt.stock)==null?void 0:Ge[e])||0,Mt=((At=Lt.costPrice)==null?void 0:At[e])||0;return ot+ir*Mt},0):0,[ne,e]),Je=Un(),ct=rne();z6();const Ke=nne(),{data:zt=[]}=W5(),{profile:Ft}=qc(),fr=T.useCallback(async(ot,Lt,ir,Mt,Ge)=>{const At=new Date,ur=At.toISOString().split("T")[0].replace(/-/g,""),Dr=`NH-${ur}-${Math.floor(Math.random()*1e3).toString().padStart(3,"0")}`;console.log(" Saving goods receipt:",{receiptCode:Dr,supplierId:Lt,totalAmount:ir,paymentInfo:Ge,itemCount:ot.length});const{data:jr}=await It.from("suppliers").select("name").eq("id",Lt).single(),Xt=(jr==null?void 0:jr.name)||"Khng xc nh",Wr=(Ge==null?void 0:Ge.paidAmount)||0,cr=ir-Wr;try{if(await r.mutateAsync({items:ot.map(pr=>({partId:pr.partId,partName:pr.partName,quantity:pr.quantity,importPrice:pr.importPrice,sellingPrice:pr.sellingPrice,wholesalePrice:pr.wholesalePrice||0})),supplierId:Lt,branchId:e,userId:(Ft==null?void 0:Ft.id)||"unknown",notes:`${Dr} | NCC: ${Xt}${Mt?" | "+Mt:""}`}),cr>0&&Ge){const pr=`DEBT-${ur}-${Math.random().toString(36).substring(2,5).toUpperCase()}`,{error:Rr}=await It.from("supplier_debts").insert({id:pr,supplier_id:Lt,supplier_name:Xt,branch_id:e,total_amount:cr,paid_amount:0,remaining_amount:cr,description:`Nhp kho ${Dr} - Thanh ton ${Wr.toLocaleString()}/${ir.toLocaleString()} `,created_date:At.toISOString().split("T")[0],created_at:At.toISOString()});Rr?(console.error(" Error creating debt:",Rr),Ze.error("Li to cng n: "+Rr.message)):console.log(` Created supplier debt: ${cr.toLocaleString()} `)}l(!1),Ze.success(`Nhp kho thnh cng! M phiu: ${Dr}`),Ws((Ft==null?void 0:Ft.id)||null,{action:"inventory.receipt",tableName:"inventory_transactions",oldData:null,newData:{receiptCode:Dr,supplierId:Lt,supplierName:Xt,items:ot.map(pr=>({partId:pr.partId,quantity:pr.quantity,importPrice:pr.importPrice,sellingPrice:pr.sellingPrice})),totalAmount:ir,paidAmount:Wr,debtAmount:cr,paymentInfo:Ge}})}catch(pr){console.error(" Li lu phiu nhp kho:",pr),Ze.error(`Li: ${pr.message||"Khng r"}`)}},[ne,e,ct,t,Ft==null?void 0:Ft.id]),hr=ot=>{q(ot?Qe.map(Lt=>Lt.id):[])},sr=(ot,Lt)=>{q(Lt?[...P,ot]:P.filter(ir=>ir!==ot))},Sr=async ot=>{const Lt=Y.find(Mt=>Mt.id===ot);!Lt||!await ve({title:"Xc nhn xa",message:`Bn c chc chn mun xa sn phm "${Lt.name}"?`,confirmText:"Xa",cancelText:"Hy",confirmColor:"red"})||Ke.mutate({id:ot},{onSuccess:async()=>{q(Mt=>Mt.filter(Ge=>Ge!==ot)),await je(),console.log(" Refetched allPartsForTotals after delete"),Ze.success(` xa ph tng "${Lt.name}"`)},onError:Mt=>{console.error("Delete error:",Mt),Ze.error(`Khng th xa: ${Mt.message}`)}})},tr=async()=>{if(P.length===0){Ze.warning("Vui lng chn t nht mt sn phm");return}if(!await ve({title:"Xc nhn xa",message:`Bn c chc chn mun xa ${P.length} sn phm  chn? Hnh ng ny khng th hon tc.`,confirmText:"Xa",cancelText:"Hy",confirmColor:"red"}))return;let Lt=0,ir=0;const Mt=P.length;P.forEach((Ge,At)=>{Ke.mutate({id:Ge},{onSuccess:async()=>{Lt++,Lt+ir===Mt&&(await je(),console.log(" Refetched allPartsForTotals after bulk delete"),ir===0?Ze.success(` xa ${Lt} ph tng`):Ze.warning(` xa ${Lt}/${Mt} ph tng (${ir} li)`))},onError:ur=>{console.error(`Delete error for item ${Ge}:`,ur),ir++,Lt+ir===Mt&&(Lt===0?Ze.error(`Khng th xa ${Mt} ph tng`):Ze.warning(` xa ${Lt}/${Mt} ph tng (${ir} li)`))}})}),q([])},Jt=ot=>{S(1),g(ot)},Kt=ot=>{S(1),x(ot)},ar=()=>{g("all"),x("all"),y(!1),S(1),se(!1)},vr=b!=="all"||u!=="all"||k,rr=De.lowStock>0&&b!=="low-stock",ft=De.totalProducts>0?Math.round(De.lowStock/De.totalProducts*100):0,br=()=>{try{const ot=new Date,Lt=`ton-kho-${ot.getDate()}-${ot.getMonth()+1}-${ot.getFullYear()}.xlsx`;nAe(Y,e,Lt),Ze.success("Xut file Excel thnh cng!")}catch(ot){console.error("Export error:",ot),Ze.error("C li khi xut file Excel")}},yr=()=>{try{aAe(),Ze.success("Ti template thnh cng! Vui lng in thng tin v import li.")}catch(ot){console.error("Template download error:",ot),Ze.error("C li khi ti template")}};return T.useEffect(()=>{if(typeof document>"u")return;const ot=()=>ae(null);return document.addEventListener("click",ot),()=>document.removeEventListener("click",ot)},[]),s.jsxs("div",{className:"h-full flex flex-col bg-slate-50 dark:bg-slate-900 sm:bg-[#1e293b]",children:[s.jsx("div",{className:"hidden sm:block bg-primary-bg border-b border-primary-border px-4 py-3",children:s.jsxs("div",{className:"flex items-center justify-between gap-4",children:[s.jsx("div",{className:"flex gap-2",children:[{key:"stock",label:"Tn kho",icon:s.jsx(Hi,{className:"w-4 h-4"})},{key:"categories",label:"Danh mc",icon:s.jsx(ru,{className:"w-4 h-4"})},{key:"lookup",label:"Tra cu",icon:s.jsx(nu,{className:"w-4 h-4"})},{key:"history",label:"Lch s",icon:s.jsx(vd,{className:"w-4 h-4"})}].map(ot=>s.jsx("button",{onClick:()=>i(ot.key),className:`px-4 py-2 rounded-lg font-medium transition-colors ${a===ot.key?"bg-blue-600 text-white":"text-secondary-text hover:bg-tertiary-bg"}`,children:s.jsxs("span",{className:"inline-flex items-center gap-1",children:[ot.icon,ot.label]})},ot.key))}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("button",{onClick:()=>H(!0),className:"flex items-center gap-2 px-4 py-2.5 rounded-xl bg-gradient-to-r from-emerald-600 to-emerald-500 text-white font-semibold shadow-lg shadow-emerald-500/30 hover:brightness-110 transition",title:"In m vch hng lot",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"})}),"In m vch"]}),s.jsxs("button",{onClick:()=>l(!0),className:"flex items-center gap-2 px-5 py-2.5 rounded-xl bg-gradient-to-r from-blue-600 to-blue-500 text-white font-semibold shadow-lg shadow-blue-500/30 hover:brightness-110 transition",children:[s.jsx(oc,{className:"w-4 h-4"}),"To phiu nhp"]}),s.jsxs("div",{className:"flex items-center gap-1 rounded-2xl border border-primary-border bg-tertiary-bg px-1.5 py-1",children:[s.jsxs("button",{onClick:()=>{Ze.info("Tnh nng chuyn kho ang pht trin")},className:"p-2 rounded-xl text-secondary-text hover:text-blue-600 hover:bg-primary-bg transition",title:"Chuyn kho",children:[s.jsx($7,{className:"w-4 h-4"}),s.jsx("span",{className:"sr-only",children:"Chuyn kho"})]}),s.jsxs("button",{onClick:br,className:"p-2 rounded-xl text-secondary-text hover:text-emerald-600 hover:bg-primary-bg transition",title:"Xut Excel",children:[s.jsx(GJ,{className:"w-4 h-4"}),s.jsx("span",{className:"sr-only",children:"Xut Excel"})]}),s.jsxs("button",{onClick:()=>L(!0),className:"p-2 rounded-xl text-secondary-text hover:text-blue-600 hover:bg-primary-bg transition",title:"Nhp CSV",children:[s.jsx(WJ,{className:"w-4 h-4"}),s.jsx("span",{className:"sr-only",children:"Nhp CSV"})]}),s.jsxs("button",{onClick:yr,className:"p-2 rounded-xl text-secondary-text hover:text-amber-600 hover:bg-primary-bg transition",title:"Ti mu import",children:[s.jsx(vd,{className:"w-4 h-4"}),s.jsx("span",{className:"sr-only",children:"Ti template"})]})]})]})]})}),s.jsxs("div",{className:"sm:hidden bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 px-3 py-3",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(nu,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),s.jsx("input",{type:"text",placeholder:"Tm kim theo tn hoc SKU...",value:d,onChange:ot=>{S(1),c(ot.target.value)},className:"w-full pl-10 pr-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("button",{onClick:()=>l(!0),className:"flex items-center gap-1.5 px-3 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg text-sm font-medium transition whitespace-nowrap",children:[s.jsx(oc,{className:"w-4 h-4"}),"To phiu"]})]}),s.jsx("div",{className:"flex items-center justify-between text-xs",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Tng:"}),s.jsxs("span",{className:"font-semibold text-blue-600 dark:text-blue-400",children:[Ye.toLocaleString()," sp"]})]}),s.jsx("div",{className:"h-3 w-px bg-slate-300 dark:bg-slate-600"}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Gi tr:"}),s.jsx("span",{className:"font-semibold text-green-600 dark:text-green-400",children:Te(at)})]})]})})]}),a==="stock"&&s.jsx("div",{className:"hidden sm:block bg-primary-bg border-b border-primary-border px-5 py-5",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid gap-4 lg:grid-cols-[minmax(0,1fr)_320px]",children:[s.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[s.jsx("div",{className:"rounded-2xl border border-blue-500/20 bg-gradient-to-r from-blue-500/15 via-blue-500/5 to-transparent p-4 shadow-inner",children:s.jsxs("div",{className:"flex items-center justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs font-semibold uppercase tracking-wider text-blue-600 dark:text-blue-300",children:"Tng s lng tn"}),s.jsxs("p",{className:"mt-2 text-3xl font-bold text-primary-text",children:[Ye.toLocaleString()," sp"]}),s.jsxs("p",{className:"text-xs text-secondary-text mt-1",children:[De.inStock," sn phm cn hng "," ",De.outOfStock," ht hng"]})]}),s.jsx("div",{className:"p-3 rounded-2xl bg-white/70 dark:bg-slate-900/40 text-blue-600",children:s.jsx(Hi,{className:"w-6 h-6"})})]})}),s.jsx("div",{className:"rounded-2xl border border-emerald-500/20 bg-gradient-to-r from-emerald-500/15 via-emerald-500/5 to-transparent p-4 shadow-inner",children:s.jsxs("div",{className:"flex items-center justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs font-semibold uppercase tracking-wider text-emerald-600 dark:text-emerald-300",children:"Tng gi tr tn"}),s.jsx("p",{className:"mt-2 text-3xl font-bold text-primary-text",children:Te(at)}),s.jsxs("p",{className:"text-xs text-secondary-text mt-1",children:["Trung bnh"," ",Te(Ye>0?at/Ye:0)," ","/ sn phm"]})]}),s.jsx("div",{className:"p-3 rounded-2xl bg-white/70 dark:bg-slate-900/40 text-emerald-600",children:s.jsx(ru,{className:"w-6 h-6"})})]})})]}),s.jsxs("div",{className:"flex flex-col gap-3",children:[s.jsxs("div",{className:"relative",children:[s.jsx(nu,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),s.jsx("input",{type:"text",placeholder:"Tm kim theo tn hoc SKU...",value:d,onChange:ot=>{S(1),c(ot.target.value)},className:"w-full pl-10 pr-12 py-2.5 border border-primary-border rounded-xl bg-primary-bg text-primary-text focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),s.jsxs("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-xs text-secondary-text",children:[Qe.length,"/",_e]})]}),s.jsxs("div",{className:"flex items-center justify-end gap-2",children:[s.jsxs("button",{onClick:()=>se(ot=>!ot),className:`flex items-center gap-2 px-3 py-2 text-sm font-medium rounded-xl border transition ${te?"border-blue-500 text-blue-600 bg-blue-50 dark:bg-blue-900/20":"border-primary-border text-secondary-text hover:text-primary-text"}`,children:[s.jsx(QJ,{className:"w-4 h-4"}),"B lc nng cao",vr&&s.jsx("span",{className:"h-2 w-2 rounded-full bg-blue-500 animate-pulse"})]}),vr&&s.jsx("button",{onClick:ar,className:"px-3 py-2 text-sm font-medium text-red-500 hover:text-red-600",children:"Xa b lc"})]})]})]}),rr&&s.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3 rounded-2xl border border-amber-200 bg-amber-50 px-4 py-3 text-amber-900 dark:border-amber-800 dark:bg-amber-950/50 dark:text-amber-200",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"text-xl",children:""}),s.jsxs("div",{children:[s.jsxs("p",{className:"font-semibold",children:[De.lowStock," sn phm sp ht hng"]}),s.jsxs("p",{className:"text-xs text-amber-700 dark:text-amber-400",children:["Chim ",ft,"% danh mc hin ti"]})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>Jt("low-stock"),className:"px-3 py-1.5 rounded-lg bg-amber-600 text-white text-sm font-semibold hover:bg-amber-700 transition dark:bg-amber-700 dark:hover:bg-amber-600",children:"Lc nhanh"}),s.jsx("button",{onClick:()=>l(!0),className:"px-3 py-1.5 rounded-lg border border-amber-400 text-sm font-medium text-amber-800 hover:bg-amber-100 transition dark:border-amber-600 dark:text-amber-300 dark:hover:bg-amber-950/30",children:"To phiu nhp"})]})]}),s.jsx("div",{className:"grid gap-3 md:grid-cols-2 lg:grid-cols-4",children:ce.map(ot=>{const Lt=b===ot.id,ir=iR[ot.variant??"neutral"]||iR.neutral,Mt=`text-left rounded-2xl border px-4 py-3 transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 ${Lt?ir.buttonActive:ir.buttonInactive}`,Ge=`inline-flex items-center justify-center rounded-xl border px-3 py-1 text-xs font-semibold ${Lt?ir.badgeActive:ir.badgeInactive}`;return s.jsxs("button",{onClick:()=>Jt(ot.id),className:Mt,children:[s.jsxs("div",{className:"flex items-center justify-between gap-3",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs font-semibold uppercase tracking-wider text-secondary-text",children:ot.label}),s.jsx("p",{className:"mt-1 text-2xl font-bold text-primary-text",children:(ot.count||0).toLocaleString()})]}),s.jsx("span",{className:Ge,children:ot.description})]}),s.jsx("p",{className:"mt-2 text-xs text-tertiary-text",children:"Trng thi kho tng ng"})]},ot.id)})}),te&&s.jsxs("div",{className:"rounded-2xl border border-primary-border bg-white/70 dark:bg-slate-900/40 p-4 grid gap-4 md:grid-cols-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-semibold uppercase tracking-wide text-secondary-text",children:"Trng thi tn kho"}),s.jsxs("select",{value:b,onChange:ot=>Jt(ot.target.value),className:"mt-2 w-full rounded-xl border border-secondary-border bg-primary-bg px-4 py-2.5 text-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500/40",children:[s.jsx("option",{value:"all",children:"Tt c tn kho"}),s.jsx("option",{value:"in-stock",children:"Cn hng"}),s.jsx("option",{value:"low-stock",children:"Sp ht"}),s.jsx("option",{value:"out-of-stock",children:"Ht hng"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-semibold uppercase tracking-wide text-secondary-text",children:"Danh mc"}),s.jsxs("select",{value:u,onChange:ot=>Kt(ot.target.value),className:"mt-2 w-full rounded-xl border border-secondary-border bg-primary-bg px-4 py-2.5 text-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500/40",children:[s.jsx("option",{value:"all",children:"Tt c danh mc"}),zt.map(ot=>s.jsx("option",{value:ot.id,children:ot.name},ot.id))]})]}),s.jsxs("div",{className:"flex flex-col justify-end",children:[s.jsx("label",{className:"text-xs font-semibold uppercase tracking-wide text-secondary-text",children:"Pht hin trng tn"}),s.jsx("button",{onClick:()=>y(ot=>!ot),className:`mt-2 rounded-xl border px-4 py-2.5 text-sm font-medium transition ${k?"border-orange-500 text-orange-600 bg-orange-50 dark:bg-orange-900/20":"border-secondary-border text-secondary-text hover:text-primary-text"}`,children:k?"ang hin th sn phm trng tn":"Lc sn phm trng tn"})]})]})]})}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-3 sm:p-4",children:[a==="stock"&&s.jsxs("div",{className:"space-y-3",children:[Ee.size>0&&s.jsx("div",{className:"bg-orange-50 dark:bg-orange-900/20 border-l-4 border-orange-500 p-3 rounded-lg",children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"text-lg",children:""}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("h3",{className:"text-xs font-semibold text-orange-800 dark:text-orange-300 mb-1",children:["Pht hin ",Ee.size," sn phm trng tn"]}),s.jsx("button",{onClick:()=>y(!k),className:`mt-1 px-2 py-1 rounded text-xs font-medium transition ${k?"bg-orange-600 text-white":"bg-orange-100 dark:bg-orange-900/40 text-orange-800 dark:text-orange-300"}`,children:k?" ang lc":" Lc"})]})]})}),s.jsxs("div",{className:"rounded-lg overflow-hidden border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800",children:[P.length>0&&s.jsxs("div",{className:"px-6 py-3 bg-blue-100 dark:bg-blue-900/30 border-b border-primary-border flex items-center justify-between",children:[s.jsxs("div",{className:"text-sm font-medium text-blue-900 dark:text-blue-100",children:[" chn ",P.length," sn phm"]}),s.jsxs("button",{onClick:tr,className:"flex items-center gap-2 px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg text-sm font-medium transition-colors",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Xa  chn"]})]}),s.jsx("div",{className:"block sm:hidden",children:s.jsx("div",{className:"space-y-3 p-3",children:Qe.map((ot,Lt)=>{const ir=ot.stock[e]||0,Mt=ot.retailPrice[e]||0,Ge=ir*Mt,At=be(ot.name),ur=ot.name.split(/[-\s]/).slice(0,2).map(Dr=>Dr.charAt(0).toUpperCase()).join("");return s.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-xl bg-[#2d3748] border border-slate-600 transition ${At?"border-l-4 border-l-orange-500":""}`,role:"listitem",children:[s.jsx("div",{className:"w-14 h-14 bg-slate-600 rounded-lg overflow-hidden flex items-center justify-center flex-shrink-0",children:ot.imageUrl?s.jsx("img",{src:ot.imageUrl,alt:ot.name,className:"w-full h-full object-cover"}):s.jsx("div",{className:"w-full h-full flex items-center justify-center",style:{backgroundColor:pe(ot.category)},children:s.jsx("span",{className:"text-lg font-bold text-white/90",children:ur||s.jsx(ru,{className:"w-6 h-6 text-white opacity-90"})})})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-start justify-between gap-2",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"text-[15px] font-medium text-white line-clamp-2 leading-tight",children:ot.name}),s.jsxs("div",{className:"text-[12px] text-slate-400 mt-1 truncate",children:["SKU: ",ot.sku,"  ",ot.category]})]}),s.jsx("div",{className:"text-right flex-shrink-0",children:s.jsx("div",{className:"text-[13px] text-slate-300 font-medium",children:Te(Ge)})})]}),s.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[s.jsxs("span",{className:`inline-flex items-center gap-1 px-2.5 py-1 text-sm font-bold rounded-lg ${ir===0?"text-red-300 bg-red-900/40 border border-red-700/50":ir<Vh?"text-yellow-300 bg-yellow-900/40 border border-yellow-700/50":"text-emerald-300 bg-emerald-900/40 border border-emerald-700/50"}`,children:[s.jsx("span",{className:"text-xs opacity-80",children:"SL:"}),ir]}),s.jsxs("div",{className:"relative",children:[s.jsx("button",{onClick:()=>Z(G===Lt?null:Lt),"aria-haspopup":"true","aria-expanded":G===Lt,"aria-label":"Thm hnh ng",className:"p-2.5 -m-1 text-slate-400 hover:bg-slate-600 rounded-lg transition active:bg-slate-500",children:s.jsx(R7,{className:"w-5 h-5"})}),G===Lt&&s.jsxs("div",{className:"absolute right-0 mt-2 w-40 bg-slate-800 border border-slate-700 rounded-lg shadow-xl z-50",children:[s.jsxs("button",{onClick:()=>{R(ot),Z(null)},className:"w-full text-left px-3 py-2 text-sm hover:bg-slate-700 flex items-center gap-2 text-white","aria-label":`Chnh sa ${ot.name}`,children:[s.jsx(W7,{className:"w-4 h-4 text-blue-400"}),s.jsx("span",{children:"Chnh sa"})]}),s.jsxs("button",{onClick:()=>{Sr(ot.id),Z(null)},className:"w-full text-left px-3 py-2 text-sm hover:bg-slate-700 flex items-center gap-2 text-red-400","aria-label":`Xa ${ot.name}`,children:[s.jsx(db,{className:"w-4 h-4"}),s.jsx("span",{children:"Xa"})]})]})]})]})]})]},ot.id)})})}),s.jsx("div",{className:"hidden sm:block overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-tertiary-bg",children:s.jsxs("tr",{className:"border-b border-primary-border text-xs font-semibold uppercase tracking-wider text-secondary-text",children:[s.jsx("th",{className:"px-6 py-4 text-center w-12",children:s.jsx("input",{type:"checkbox",checked:P.length===Qe.length&&Qe.length>0,onChange:ot=>hr(ot.target.checked),className:"w-4 h-4 text-blue-600 rounded border-secondary-border focus:ring-blue-500"})}),s.jsx("th",{className:"px-6 py-4 text-left",children:"Sn phm"}),s.jsx("th",{className:"px-6 py-4 text-center",children:"Tn kho"}),s.jsx("th",{className:"px-6 py-4 text-right",children:"Gi nhp"}),s.jsx("th",{className:"px-6 py-4 text-right",children:"Gi bn l"}),s.jsx("th",{className:"px-6 py-4 text-right",children:"Gi bn s"}),s.jsx("th",{className:"px-6 py-4 text-right",children:"Gi tr tn"}),s.jsx("th",{className:"px-6 py-4 text-center w-16",children:"Hnh ng"})]})}),s.jsx("tbody",{className:"bg-primary-bg divide-y divide-primary-border",children:Qe.length===0?s.jsx("tr",{children:s.jsxs("td",{colSpan:8,className:"px-6 py-8 text-center text-tertiary-text",children:[s.jsx("div",{className:"text-6xl mb-4",children:""}),s.jsx("div",{className:"text-lg",children:"Khng c sn phm no"}),s.jsx("div",{className:"text-sm",children:"Hy th mt b lc khc hoc thm sn phm mi"})]})}):Qe.map(ot=>{var Ir,Nn,Mr,Gr,Ne,Me;const Lt=e||"",ir=((Ir=ot.stock)==null?void 0:Ir[Lt])||0,Mt=((Nn=ot.retailPrice)==null?void 0:Nn[Lt])||0,Ge=((Mr=ot.wholesalePrice)==null?void 0:Mr[Lt])||0,At=((Gr=ot.costPrice)==null?void 0:Gr[Lt])||0,ur=ir*Mt,Dr=P.includes(ot.id),jr=be(ot.name),Xt=ir===0?"border-red-300 bg-red-50 text-red-700 dark:border-red-700 dark:bg-red-950/50 dark:text-red-300":ir<=Vh?"border-amber-300 bg-amber-50 text-amber-700 dark:border-amber-600 dark:bg-amber-950/50 dark:text-amber-300":"border-emerald-300 bg-emerald-50 text-emerald-700 dark:border-emerald-600 dark:bg-emerald-950/50 dark:text-emerald-300",Wr=ir===0?"Ht hng":ir<=Vh?"Sp ht":"n nh",cr=ir===0?"text-red-600 dark:text-red-400":ir<=Vh?"text-amber-600 dark:text-amber-400":"text-emerald-700 dark:text-emerald-400",pr=((Me=(Ne=ot.name)==null?void 0:Ne.charAt(0))==null?void 0:Me.toUpperCase())||"?",Rr=Dr?"bg-blue-900/20 dark:bg-blue-900/20":jr?"bg-orange-500/10 border-l-4 border-l-orange-500":"";return s.jsxs("tr",{className:`border-b border-primary-border hover:bg-tertiary-bg transition-colors ${Rr}`,children:[s.jsx("td",{className:"px-6 py-4 text-center",children:s.jsx("input",{type:"checkbox",checked:Dr,onChange:Re=>sr(ot.id,Re.target.checked),className:"w-4 h-4 text-blue-600 rounded border-secondary-border focus:ring-blue-500"})}),s.jsx("td",{className:"px-6 py-4 min-w-[220px]",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"h-12 w-12 rounded-xl overflow-hidden flex items-center justify-center text-base font-semibold text-white",style:ot.imageUrl?void 0:{backgroundColor:pe(ot.category)},children:ot.imageUrl?s.jsx("img",{src:ot.imageUrl,alt:ot.name,className:"h-full w-full object-cover"}):s.jsx("span",{children:pr})}),s.jsxs("div",{className:"flex flex-col gap-1",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-primary-text",children:[ot.name,jr&&s.jsx("span",{className:"inline-flex items-center gap-1 rounded-full border border-orange-300 bg-orange-50 px-2 py-0.5 text-[11px] font-semibold text-orange-700 dark:bg-orange-900/30",title:"Sn phm c tn trng lp",children:" Trng"})]}),s.jsxs("div",{className:"text-xs text-tertiary-text",children:["SKU: ",ot.sku||"N/A"]}),s.jsx("div",{className:"text-xs text-tertiary-text",children:ot.category||"Cha phn loi"})]})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:s.jsxs("div",{className:"flex flex-col items-center gap-1",children:[s.jsx("span",{className:`text-lg font-semibold ${cr}`,children:ir.toLocaleString()}),s.jsxs("span",{className:`inline-flex items-center gap-1 rounded-full border px-2 py-0.5 text-xs font-semibold ${Xt}`,children:[s.jsx("span",{className:`h-1.5 w-1.5 rounded-full ${ir===0?"bg-red-500":ir<=Vh?"bg-amber-500":"bg-emerald-500"}`}),Wr]})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm text-secondary-text",children:Te(At)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium text-primary-text",children:Te(Mt)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm text-secondary-text",children:Te(Ge)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-semibold text-primary-text",children:Te(ur)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:s.jsxs("div",{className:"relative flex justify-end",children:[s.jsx("button",{onClick:Re=>{Re.stopPropagation(),ae(Ce=>Ce===ot.id?null:ot.id)},className:"rounded-full border border-transparent p-2 text-secondary-text hover:border-secondary-border hover:text-primary-text transition","aria-haspopup":"menu","aria-expanded":ue===ot.id,title:"Thao tc nhanh",children:s.jsx(R7,{className:"w-5 h-5"})}),ue===ot.id&&s.jsxs("div",{className:"absolute right-0 top-full z-10 mt-2 w-44 overflow-hidden rounded-xl border border-primary-border bg-white shadow-xl dark:bg-slate-800",onClick:Re=>Re.stopPropagation(),children:[s.jsxs("button",{onClick:Re=>{Re.stopPropagation(),R(ot),ae(null)},className:"flex w-full items-center gap-2 px-4 py-2 text-left text-sm hover:bg-blue-50 dark:hover:bg-slate-700",children:[s.jsx(W7,{className:"h-4 w-4 text-blue-500"}),"Chnh sa"]}),s.jsxs("button",{onClick:Re=>{Re.stopPropagation(),ae(null),Sr(ot.id)},className:"flex w-full items-center gap-2 px-4 py-2 text-left text-sm text-red-500 hover:bg-red-50 dark:hover:bg-slate-700/70",children:[s.jsx(db,{className:"h-4 w-4"}),"Xa"]})]})]})})]},ot.id)})})]})}),s.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-t border-primary-border bg-primary-bg",children:[s.jsxs("div",{className:"text-sm text-secondary-text",children:["Trang ",N,"/",me,"  Tng ",_e," ph tng"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{disabled:N===1||J,onClick:()=>S(ot=>Math.max(1,ot-1)),className:"px-3 py-1.5 border border-secondary-border rounded disabled:opacity-40",children:" Trc"}),s.jsx("button",{disabled:N>=me||J,onClick:()=>S(ot=>Math.min(me,ot+1)),className:"px-3 py-1.5 border border-secondary-border rounded disabled:opacity-40",children:"Sau "}),s.jsx("select",{value:O,onChange:ot=>{const Lt=Number(ot.target.value)||20;A(Lt),S(1)},className:"px-2 py-1.5 border border-secondary-border rounded",children:[10,20,50,100].map(ot=>s.jsxs("option",{value:ot,children:[ot,"/trang"]},ot))})]})]})]})]}),a==="history"&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"hidden sm:block",children:s.jsx(fEe,{transactions:n})}),s.jsx("div",{className:"sm:hidden",children:s.jsx(yAe,{transactions:n})})]}),a==="categories"&&s.jsx("div",{className:"bg-[#0f172a] -m-3 sm:-m-6",children:s.jsx(eK,{})}),a==="lookup"&&s.jsxs("div",{className:"bg-[#0f172a] -m-3 sm:-m-6",children:[s.jsx("div",{className:"hidden sm:block",children:s.jsx(tK,{})}),s.jsx("div",{className:"sm:hidden",children:s.jsx(hAe,{})})]})]}),s.jsx("div",{className:"hidden sm:block",children:s.jsx(cEe,{isOpen:o,onClose:()=>l(!1),parts:ne||[],currentBranchId:e,onSave:fr})}),s.jsx(lEe,{isOpen:o,onClose:()=>l(!1),parts:ne||[],currentBranchId:e,onSave:fr}),Q&&s.jsx(oEe,{parts:ne||[],currentBranchId:e,onClose:()=>H(!1)}),W&&s.jsx(pEe,{part:W,onClose:()=>R(null),onSave:ot=>{console.log(" Saving part updates:",ot);const Lt={name:ot.name,barcode:ot.barcode,category:ot.category,stock:ot.stock,retailPrice:ot.retailPrice,wholesalePrice:ot.wholesalePrice};ot.costPrice&&(Lt.costPrice=ot.costPrice),console.log(" Sending updates:",Lt),ct.mutate({id:ot.id,updates:Lt}),R(null)},currentBranchId:e}),U&&s.jsx(xEe,{onClose:()=>L(!1),onDownloadTemplate:yr,onImport:async ot=>{var Lt,ir;try{const{items:Mt,errors:Ge}=await sAe(ot,e);if(Mt.length===0){const Ce=Ge.length?`Khng import c: ${Ge.slice(0,3).join("; ")}`:"File khng c d liu hp l";throw new Error(Ce)}const At=Mt.map(Ce=>Ce.sku);console.log(` Checking ${At.length} SKUs...`);const ur=new Map;At.forEach(Ce=>{ur.set(Ce,(ur.get(Ce)||0)+1)});const Dr=Array.from(ur.entries()).filter(([Ce,Ue])=>Ue>1).map(([Ce,Ue])=>`${Ce}(${Ue}x)`);Dr.length>0&&console.warn(` Duplicate SKUs in file: ${Dr.slice(0,5).join(", ")}`);const jr=Array.from(new Set(At)),Xt=100,Wr=[];for(let Ce=0;Ce<jr.length;Ce+=Xt){const Ue=jr.slice(Ce,Ce+Xt),{data:de,error:qe}=await It.from("parts").select("*").in("sku",Ue);if(qe)throw console.error(` Fetch chunk ${Ce/Xt+1} error:`,qe),new Error(`Li kim tra ph tng: ${qe.message}`);de&&Wr.push(...de)}console.log(` Found ${Wr.length} existing parts`);const cr=new Map(Wr.map(Ce=>[Ce.sku,Ce])),pr=[],Rr=[],Ir=[],Nn=new Set;let Mr=0,Gr=0,Ne=0;const Me=new Date().toISOString();for(const Ce of Mt){if(Nn.has(Ce.sku)){console.warn(` Skipping duplicate SKU in file: ${Ce.sku}`),Ne++;continue}Nn.add(Ce.sku);const Ue=cr.get(Ce.sku);if(Ue)Gr+=1,Rr.push({id:Ue.id,stock:{...Ue.stock,[e]:(Ue.stock[e]||0)+Ce.quantity},costPrice:{...Ue.costPrice,[e]:Ce.costPrice},retailPrice:{...Ue.retailPrice,[e]:Ce.retailPrice},wholesalePrice:{...Ue.wholesalePrice,[e]:Ce.wholesalePrice}}),Ir.push({type:"Nhp kho",date:Me,branchId:e,partId:Ue.id,partName:Ce.name,quantity:Ce.quantity,unitPrice:Ce.retailPrice,totalPrice:Ce.quantity*Ce.retailPrice,notes:"Nhp kho t file Excel"});else{Mr+=1;const de=((Lt=crypto==null?void 0:crypto.randomUUID)==null?void 0:Lt.call(crypto))||`${Math.random().toString(36).slice(2)}-${Date.now()}`;pr.push({id:de,name:Ce.name,sku:Ce.sku,category:Ce.category,description:Ce.description,stock:{[e]:Ce.quantity},costPrice:{[e]:Ce.costPrice},retailPrice:{[e]:Ce.retailPrice},wholesalePrice:{[e]:Ce.wholesalePrice}}),Ir.push({type:"Nhp kho",date:Me,branchId:e,partId:de,partName:Ce.name,quantity:Ce.quantity,unitPrice:Ce.retailPrice,totalPrice:Ce.quantity*Ce.retailPrice,notes:"Nhp kho t file Excel"})}}if(pr.length>0){const{data:Ce,error:Ue}=await It.from("parts").insert(pr).select();if(Ue)throw console.error(" Batch create error:",Ue),new Error(`Li to ph tng: ${Ue.message}`);console.log(` Created ${(Ce==null?void 0:Ce.length)||0} parts`)}if(Rr.length>0){let Ce=0,Ue=0;for(const de of Rr){const{error:qe}=await It.from("parts").update({stock:de.stock,costPrice:de.costPrice,retailPrice:de.retailPrice,wholesalePrice:de.wholesalePrice}).eq("id",de.id);qe?(console.error(` Update error for part ${de.id}:`,qe),Ue++):Ce++}console.log(` Updated ${Ce}/${Rr.length} parts`)}if(Ir.length>0){const{error:Ce}=await It.from("inventory_transactions").insert(Ir);Ce&&console.warn(" Inventory transactions error:",Ce)}Je.invalidateQueries({queryKey:["partsRepo"]}),Je.invalidateQueries({queryKey:["partsRepoPaged"]});try{const{data:Ce}=await It.auth.getUser();await Ws(((ir=Ce==null?void 0:Ce.user)==null?void 0:ir.id)||null,{action:"inventory.import",tableName:"inventory_transactions",oldData:null,newData:{totalRows:Mt.length+Ge.length,created:Mr,updated:Gr,skipped:Ge.length,sampleErrors:Ge.slice(0,10),branchId:e,at:Me}})}catch{}L(!1);let Re=`Import: to mi ${Mr}, cp nht ${Gr}`;Ne>0&&(Re+=`, b qua ${Ne} SKU trng`),Ge.length>0&&(Re+=`, ${Ge.length} dng li`),Ze.success(Re)}catch(Mt){console.error(" Import error:",Mt),Ze.error(`Li import: ${Mt}`)}}}),s.jsx(JG,{isOpen:Pe.isOpen,title:Pe.title,message:Pe.message,confirmText:Pe.confirmText,cancelText:Pe.cancelText,confirmColor:Pe.confirmColor,onConfirm:xe,onCancel:B}),s.jsxs("div",{className:"sm:hidden fixed bottom-20 right-4 z-40 flex flex-col gap-3",children:[s.jsx("button",{onClick:()=>l(!0),className:"w-14 h-14 bg-gradient-to-br from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white rounded-full shadow-lg shadow-green-500/30 flex items-center justify-center transition-all transform hover:scale-110 active:scale-95","aria-label":"To phiu nhp",children:s.jsx(oc,{className:"w-5 h-5"})}),s.jsx("button",{onClick:br,className:"w-14 h-14 bg-gradient-to-br from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700 text-white rounded-full shadow-lg shadow-orange-500/30 flex items-center justify-center transition-all transform hover:scale-110 active:scale-95","aria-label":"Xut Excel",children:s.jsx($7,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"sm:hidden fixed bottom-0 left-0 right-0 bg-white dark:bg-slate-800 border-t border-slate-200 dark:border-slate-700 z-50 safe-area-bottom",children:[s.jsx("div",{className:"absolute inset-0 bg-white/80 dark:bg-slate-800/80 backdrop-blur-lg -z-10"}),s.jsxs("div",{className:"grid grid-cols-4 gap-1 px-2 py-2",children:[s.jsxs("button",{onClick:()=>i("stock"),className:`flex flex-col items-center gap-1 px-2 py-2 rounded-xl transition-all duration-200 ${a==="stock"?"bg-amber-100 dark:bg-amber-900/40 text-amber-600 dark:text-amber-400 scale-105":"text-slate-500 dark:text-slate-400 active:scale-95"}`,children:[s.jsx(Hi,{className:`w-5 h-5 ${a==="stock"?"scale-110":""} transition-transform`}),s.jsx("span",{className:`text-[10px] font-medium ${a==="stock"?"font-semibold":""}`,children:"Tn kho"})]}),s.jsxs("button",{onClick:()=>i("categories"),className:`flex flex-col items-center gap-1 px-2 py-2 rounded-xl transition-all duration-200 ${a==="categories"?"bg-purple-100 dark:bg-purple-900/40 text-purple-600 dark:text-purple-400 scale-105":"text-slate-500 dark:text-slate-400 active:scale-95"}`,children:[s.jsx(ru,{className:`w-5 h-5 ${a==="categories"?"scale-110":""} transition-transform`}),s.jsx("span",{className:`text-[10px] font-medium ${a==="categories"?"font-semibold":""}`,children:"Danh mc"})]}),s.jsxs("button",{onClick:()=>i("lookup"),className:`flex flex-col items-center gap-1 px-2 py-2 rounded-xl transition-all duration-200 ${a==="lookup"?"bg-blue-100 dark:bg-blue-900/40 text-blue-600 dark:text-blue-400 scale-105":"text-slate-500 dark:text-slate-400 active:scale-95"}`,children:[s.jsx(nu,{className:`w-5 h-5 ${a==="lookup"?"scale-110":""} transition-transform`}),s.jsx("span",{className:`text-[10px] font-medium ${a==="lookup"?"font-semibold":""}`,children:"Tra cu"})]}),s.jsxs("button",{onClick:()=>i("history"),className:`flex flex-col items-center gap-1 px-2 py-2 rounded-xl transition-all duration-200 ${a==="history"?"bg-green-100 dark:bg-green-900/40 text-green-600 dark:text-green-400 scale-105":"text-slate-500 dark:text-slate-400 active:scale-95"}`,children:[s.jsx(vd,{className:`w-5 h-5 ${a==="history"?"scale-110":""} transition-transform`}),s.jsx("span",{className:`text-[10px] font-medium ${a==="history"?"font-semibold":""}`,children:"Lch s"})]})]})]})]})},xEe=({onClose:e,onDownloadTemplate:t,onImport:r})=>{const[n,a]=T.useState(null),[i,o]=T.useState(!1),l=c=>{var x,b;const u=(x=c.target.files)==null?void 0:x[0];if(u){const g=(b=u.name.split(".").pop())==null?void 0:b.toLowerCase();g==="xlsx"||g==="xls"||g==="csv"?a(u):Ze.warning("Vui lng chn file Excel (.xlsx, .xls) hoc CSV (.csv)")}},d=async()=>{if(!n){Ze.warning("Vui lng chn file  import");return}o(!0);try{await r(n)}finally{o(!1)}};return s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl max-w-2xl w-full",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200 dark:border-slate-700",children:[s.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100",children:"Nhp tn kho t Excel/CSV"}),s.jsx("button",{onClick:e,disabled:i,className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-200 disabled:opacity-50",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("svg",{className:"w-6 h-6 text-blue-600 dark:text-blue-400 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-medium text-blue-900 dark:text-blue-100 mb-2",children:"Hng dn s dng"}),s.jsxs("ol",{className:"text-sm text-blue-800 dark:text-blue-200 space-y-1 list-decimal list-inside",children:[s.jsx("li",{children:"Ti file template mu"}),s.jsx("li",{children:"in thng tin sn phm vo file"}),s.jsx("li",{children:"Lu file v chn  import"})]}),s.jsx("button",{onClick:t,className:"mt-3 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm font-medium transition-colors",children:" Ti Template Excel"})]})]})}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Chn file  import"}),s.jsxs("div",{className:"border-2 border-dashed border-slate-300 dark:border-slate-600 rounded-lg p-6 text-center",children:[s.jsx("input",{type:"file",accept:".xlsx,.xls,.csv",onChange:l,disabled:i,className:"hidden",id:"file-upload"}),s.jsxs("label",{htmlFor:"file-upload",className:"cursor-pointer inline-flex flex-col items-center",children:[s.jsx("svg",{className:"w-12 h-12 text-slate-400 mb-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),s.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Click  chn file Excel hoc CSV"}),n&&s.jsxs("span",{className:"mt-2 text-sm font-medium text-blue-600 dark:text-blue-400",children:[" ",n.name]})]})]})]}),s.jsxs("div",{className:"flex justify-end gap-3",children:[s.jsx("button",{type:"button",onClick:e,disabled:i,className:"px-4 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors disabled:opacity-50",children:"Hy"}),s.jsx("button",{onClick:d,disabled:!n||i,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:i?"ang x l...":"Import"})]})]})]})})},pEe=({part:e,onClose:t,onSave:r,currentBranchId:n})=>{var y,N;const[a,i]=T.useState({name:e.name,barcode:e.barcode||"",category:e.category||"",retailPrice:e.retailPrice[n]||0,wholesalePrice:((y=e.wholesalePrice)==null?void 0:y[n])||0,costPrice:((N=e.costPrice)==null?void 0:N[n])||0,stock:e.stock[n]||0}),[o,l]=T.useState(!1),{data:d=[]}=W5(),c=LE(),[u,x]=T.useState(!1),[b,g]=T.useState(""),k=S=>{if(S.preventDefault(),!a.name.trim()){Ze.warning("Vui lng nhp tn sn phm");return}r({id:e.id,name:a.name.trim(),barcode:a.barcode.trim()||void 0,category:a.category.trim()||void 0,stock:{...e.stock,[n]:a.stock},costPrice:{...e.costPrice,[n]:a.costPrice},retailPrice:{...e.retailPrice,[n]:a.retailPrice},wholesalePrice:{...e.wholesalePrice,[n]:a.wholesalePrice}})};return s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200 dark:border-slate-700",children:[s.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100",children:"Chnh sa sn phm"}),s.jsx("button",{onClick:t,className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-200",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsxs("form",{onSubmit:k,className:"p-6 space-y-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:["Tn sn phm ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",value:a.name,onChange:S=>i({...a,name:S.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"M vch (Barcode)"}),s.jsx("input",{type:"text",value:a.barcode,onChange:S=>i({...a,barcode:S.target.value}),placeholder:"V d: 06455-KYJ-841 (Honda), 5S9-F2101-00 (Yamaha)",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 font-mono"}),s.jsx("p",{className:"mt-1 text-xs text-slate-500 dark:text-slate-400",children:"Nhp m vch t bao b gc ca hng  qut nhanh khi bn hng"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Danh mc"}),s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("select",{value:a.category,onChange:S=>i({...a,category:S.target.value}),className:"flex-1 px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",children:[s.jsx("option",{value:"",children:"-- Chn hoc to mi --"}),d.map(S=>s.jsx("option",{value:S.name,children:S.name},S.id))]}),s.jsx("button",{type:"button",onClick:()=>x(!0),className:"px-3 py-2 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-600",title:"Thm danh mc mi",children:"+"})]}),u&&s.jsxs("form",{onSubmit:async S=>{S.preventDefault();const O=b.trim();if(!O)return Ze.warning("Vui lng nhp tn danh mc");try{const A=await c.mutateAsync({name:O});i({...a,category:A.name}),g(""),x(!1)}catch(A){Ze.error((A==null?void 0:A.message)||"Li to danh mc")}},className:"flex gap-2",children:[s.jsx("input",{autoFocus:!0,type:"text",value:b,onChange:S=>g(S.target.value),placeholder:"Nhp tn danh mc mi",className:"flex-1 px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-sm text-slate-900 dark:text-slate-100"}),s.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm font-medium",children:"Lu"}),s.jsx("button",{type:"button",onClick:()=>{x(!1),g("")},className:"px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg text-sm bg-white dark:bg-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-600",children:"Hy"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Gi nhp"}),s.jsx("input",{type:"number",value:a.costPrice||0,onChange:S=>i({...a,costPrice:Number(S.target.value)}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",min:"0"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Gi bn l"}),s.jsx("input",{type:"number",value:a.retailPrice,onChange:S=>i({...a,retailPrice:Number(S.target.value)}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",min:"0"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Gi bn s"}),s.jsx("input",{type:"number",value:a.wholesalePrice,onChange:S=>i({...a,wholesalePrice:Number(S.target.value)}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",min:"0"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Tn kho hin ti"}),s.jsx("input",{type:"number",value:a.stock,onChange:S=>i({...a,stock:Number(S.target.value)}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",min:"0"}),s.jsx("p",{className:"mt-1 text-xs text-slate-500 dark:text-slate-400",children:"S lng tn kho ti chi nhnh hin ti"})]}),s.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:s.jsxs("div",{className:"text-sm text-blue-800 dark:text-blue-300",children:[s.jsx("div",{className:"font-medium mb-1",children:"Lu :"}),s.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[s.jsx("li",{children:"Bn c th chnh sa trc tip gi nhp, gi bn v tn kho"}),s.jsx("li",{children:'Hoc s dng "To phiu nhp"  ghi nhn lch s nhp kho chi tit'})]})]})}),s.jsxs("div",{className:"flex justify-between gap-3 pt-4",children:[s.jsxs("button",{type:"button",onClick:()=>l(!0),className:"px-4 py-2 border border-blue-300 dark:border-blue-600 text-blue-700 dark:text-blue-300 rounded-lg hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-colors flex items-center gap-2",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"})}),"In m vch"]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:"Hy"}),s.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:"Lu thay i"})]})]})]}),o&&s.jsx(iEe,{part:e,currentBranchId:n,onClose:()=>l(!1)})]})})},Ub="work_orders";function Zj(e){return{id:e.id,creationDate:e.creationdate||e.creationDate,customerName:e.customername||e.customerName,customerPhone:e.customerphone||e.customerPhone,vehicleModel:e.vehiclemodel||e.vehicleModel,licensePlate:e.licenseplate||e.licensePlate,issueDescription:e.issuedescript||e.issueDescription,technicianName:e.technicianname||e.technicianName,status:e.status,laborCost:e.laborcost||e.laborCost||0,discount:e.discount,partsUsed:e.partsused||e.partsUsed,additionalServices:e.additionalservices||e.additionalServices,notes:e.notes,total:e.total,branchId:e.branchid||e.branchId,depositAmount:e.depositamount||e.depositAmount,depositDate:e.depositdate||e.depositDate,depositTransactionId:e.deposittransactionid||e.depositTransactionId,paymentStatus:e.paymentstatus||e.paymentStatus,paymentMethod:e.paymentmethod||e.paymentMethod,additionalPayment:e.additionalpayment||e.additionalPayment,totalPaid:e.totalpaid||e.totalPaid,remainingAmount:e.remainingamount||e.remainingAmount,paymentDate:e.paymentdate||e.paymentDate,cashTransactionId:e.cashtransactionid||e.cashTransactionId,refunded:e.refunded,refunded_at:e.refunded_at||e.refundedAt,refund_transaction_id:e.refund_transaction_id||e.refundTransactionId,refund_reason:e.refund_reason||e.refundReason}}async function gEe(){try{const{data:e,error:t}=await It.from(Ub).select("*").order("creationdate",{ascending:!1});return console.log("[fetchWorkOrders] Raw data from DB:",e),console.log("[fetchWorkOrders] Status values:",e==null?void 0:e.map(r=>({id:r.id,status:r.status}))),t?Ct({code:"supabase",message:"Khng th ti danh sch phiu sa cha",cause:t}):Sn((e||[]).map(Zj))}catch(e){return Ct({code:"network",message:"Li kt ni ti my ch",cause:e})}}async function bEe(e){var t;try{if(!e.id)return Ct({code:"validation",message:"Thiu ID phiu sa cha"});const r={p_order_id:e.id,p_customer_name:e.customerName||"",p_customer_phone:e.customerPhone||"",p_vehicle_model:e.vehicleModel||"",p_license_plate:e.licensePlate||"",p_issue_description:e.issueDescription||"",p_technician_name:e.technicianName||"",p_status:e.status||"Tip nhn",p_labor_cost:e.laborCost||0,p_discount:e.discount||0,p_parts_used:e.partsUsed||[],p_additional_services:e.additionalServices||null,p_total:e.total||0,p_branch_id:e.branchId||"CN1",p_payment_status:e.paymentStatus||"unpaid",p_payment_method:e.paymentMethod||null,p_deposit_amount:e.depositAmount||0,p_additional_payment:e.additionalPayment||0,p_user_id:null};console.log("[DEBUG] Creating work order with payload:",JSON.stringify(r,null,2));const{data:n,error:a}=await It.rpc("work_order_create_atomic",r);if(console.log("[DEBUG] RPC Response - data:",n,"error:",a),a&&console.error("[DEBUG] RPC Error Details:",{code:a.code,message:a.message,details:a.details,hint:a.hint,fullError:JSON.stringify(a,null,2)}),a||!n){const b=(a==null?void 0:a.details)||(a==null?void 0:a.message)||"",g=b.toUpperCase();if(g.includes("INSUFFICIENT_STOCK")){let k=[];const y=b.indexOf(":");if(y!==-1){const S=b.slice(y+1).trim();try{k=JSON.parse(S)}catch{}}const N=Array.isArray(k)?k.map(S=>`${S.partName||S.partId||"?"} (cn ${S.available}, cn ${S.requested})`).join(", "):"";return Ct({code:"validation",message:N?`Thiu tn kho: ${N}`:"Tn kho khng  cho mt hoc nhiu ph tng",cause:a})}return g.includes("PART_NOT_FOUND")?Ct({code:"validation",message:"Khng tm thy ph tng trong kho",cause:a}):g.includes("INVALID_PART")?Ct({code:"validation",message:"D liu ph tng khng hp l",cause:a}):g.includes("INVALID_STATUS")?Ct({code:"validation",message:"Trng thi khng hp l",cause:a}):g.includes("INVALID_PAYMENT_STATUS")?Ct({code:"validation",message:"Trng thi thanh ton khng hp l",cause:a}):g.includes("UNAUTHORIZED")?Ct({code:"supabase",message:"Bn khng c quyn to phiu sa cha",cause:a}):g.includes("BRANCH_MISMATCH")?Ct({code:"validation",message:"Chi nhnh khng khp vi quyn hin ti",cause:a}):Ct({code:"supabase",message:"To phiu sa cha (atomic) tht bi",cause:a})}const i=n.workOrder,o=n.orderId,l=n.depositTransactionId,d=n.paymentTransactionId,c=n.inventoryTxCount;if(!i&&!o)return Ct({code:"unknown",message:"Kt qu RPC khng hp l"});let u=null;if(i)u=Zj(i);else if(o){const{data:b,error:g}=await It.from(Ub).select("*").eq("id",o).single();g?console.error("[createWorkOrderAtomic] Cannot fetch order by ID",{orderId:o,fetchError:g}):b&&(u=Zj(b))}if(!u)return Ct({code:"supabase",message:"Khng th ti d liu phiu sa cha va to"});let x=null;try{const{data:b}=await It.auth.getUser();x=((t=b==null?void 0:b.user)==null?void 0:t.id)||null}catch{}return await Ws(x,{action:"work_order.create",tableName:Ub,recordId:u.id,oldData:null,newData:u}),Sn({...u,depositTransactionId:l,paymentTransactionId:d,inventoryTxCount:c})}catch(r){return Ct({code:"network",message:"Li kt ni khi to phiu sa cha (atomic)",cause:r})}}async function vEe(e){var t;try{if(!e.id)return Ct({code:"validation",message:"Thiu ID phiu sa cha"});const r={p_order_id:e.id,p_customer_name:e.customerName||"",p_customer_phone:e.customerPhone||"",p_vehicle_model:e.vehicleModel||"",p_license_plate:e.licensePlate||"",p_issue_description:e.issueDescription||"",p_technician_name:e.technicianName||"",p_status:e.status||"Tip nhn",p_labor_cost:e.laborCost||0,p_discount:e.discount||0,p_parts_used:e.partsUsed||[],p_additional_services:e.additionalServices||null,p_total:e.total||0,p_payment_status:e.paymentStatus||"unpaid",p_payment_method:e.paymentMethod||null,p_deposit_amount:e.depositAmount||0,p_additional_payment:e.additionalPayment||0,p_user_id:null},{data:n,error:a}=await It.rpc("work_order_update_atomic",r);if(a||!n){const c=(a==null?void 0:a.details)||(a==null?void 0:a.message)||"",u=c.toUpperCase();if(u.includes("INSUFFICIENT_STOCK")){let x=[];const b=c.indexOf(":");if(b!==-1){const k=c.slice(b+1).trim();try{x=JSON.parse(k)}catch{}}const g=Array.isArray(x)?x.map(k=>`${k.partName||k.partId||"?"} (cn ${k.available}, cn ${k.requested})`).join(", "):"";return Ct({code:"validation",message:g?`Thiu tn kho: ${g}`:"Tn kho khng  cho mt hoc nhiu ph tng",cause:a})}return u.includes("ORDER_NOT_FOUND")?Ct({code:"validation",message:"Khng tm thy phiu sa cha",cause:a}):u.includes("PART_NOT_FOUND")?Ct({code:"validation",message:"Khng tm thy ph tng trong kho",cause:a}):u.includes("INVALID_PART")?Ct({code:"validation",message:"D liu ph tng khng hp l",cause:a}):u.includes("UNAUTHORIZED")?Ct({code:"supabase",message:"Bn khng c quyn cp nht phiu sa cha",cause:a}):u.includes("BRANCH_MISMATCH")?Ct({code:"validation",message:"Chi nhnh khng khp vi quyn hin ti",cause:a}):Ct({code:"supabase",message:"Cp nht phiu sa cha (atomic) tht bi",cause:a})}const i=n.workOrder,o=n.depositTransactionId,l=n.paymentTransactionId;if(!i)return Ct({code:"unknown",message:"Kt qu RPC khng hp l"});let d=null;try{const{data:c}=await It.auth.getUser();d=((t=c==null?void 0:c.user)==null?void 0:t.id)||null}catch{}return await Ws(d,{action:"work_order.update",tableName:Ub,recordId:i.id,oldData:null,newData:i}),Sn({...i,depositTransactionId:o,paymentTransactionId:l})}catch(r){return Ct({code:"network",message:"Li kt ni khi cp nht phiu sa cha (atomic)",cause:r})}}async function yEe(e,t){var r;try{let n=null;try{const{data:c}=await It.auth.getUser();n=((r=c==null?void 0:c.user)==null?void 0:r.id)||null}catch{}const{data:a,error:i}=await It.rpc("work_order_refund_atomic",{p_order_id:e,p_refund_reason:t,p_user_id:n||"unknown"});if(i||!a){console.error("[refundWorkOrder] RPC error:",i),console.error("[refundWorkOrder] Error code:",i==null?void 0:i.code),console.error("[refundWorkOrder] Error message:",i==null?void 0:i.message),console.error("[refundWorkOrder] Error details:",i==null?void 0:i.details);const u=((i==null?void 0:i.details)||(i==null?void 0:i.message)||"").toUpperCase();return u.includes("ORDER_NOT_FOUND")?Ct({code:"validation",message:"Khng tm thy phiu sa cha",cause:i}):u.includes("ALREADY_REFUNDED")?Ct({code:"validation",message:"Phiu ny  c hon tin ri",cause:i}):u.includes("UNAUTHORIZED")?Ct({code:"supabase",message:"Bn khng c quyn hon tin",cause:i}):u.includes("BRANCH_MISMATCH")?Ct({code:"validation",message:"Chi nhnh khng khp vi quyn hin ti",cause:i}):Ct({code:"supabase",message:`Hon tin tht bi: ${(i==null?void 0:i.message)||"Unknown error"}`,cause:i})}const o=a.workOrder,l=a.refund_transaction_id,d=a.refundAmount;return o?(await Ws(n,{action:"work_order.refund",tableName:Ub,recordId:e,oldData:null,newData:o}),Sn({...o,refund_transaction_id:l,refundAmount:d})):Ct({code:"unknown",message:"Kt qu RPC khng hp l"})}catch(n){return Ct({code:"network",message:"Li kt ni khi hon tin",cause:n})}}const hK=()=>Ls({queryKey:["workOrdersRepo"],queryFn:async()=>{const e=await gEe();if(!e.ok)throw e.error;return e.data}}),wEe=()=>{const e=Un();return xa({mutationFn:async t=>{const r=await bEe(t);if(!r.ok)throw r.error;return r.data},onSuccess:t=>{e.invalidateQueries({queryKey:["workOrdersRepo"]}),e.invalidateQueries({queryKey:["partsRepo"]}),e.invalidateQueries({queryKey:["partsRepoPaged"]}),e.invalidateQueries({queryKey:["inventoryTxRepo"]}),Ze.success(" to phiu sa cha (atomic)"),t!=null&&t.inventoryTxCount&&Ze.info(`Xut kho: ${t.inventoryTxCount} ph tng`)},onError:t=>Ze.error(Na(t))})},kEe=()=>{const e=Un();return xa({mutationFn:async t=>{const r=await vEe(t);if(!r.ok)throw r.error;return r.data},onSuccess:()=>{e.invalidateQueries({queryKey:["workOrdersRepo"]}),e.invalidateQueries({queryKey:["partsRepo"]}),e.invalidateQueries({queryKey:["partsRepoPaged"]}),e.invalidateQueries({queryKey:["inventoryTxRepo"]}),Ze.success(" cp nht lnh sa cha")},onError:t=>Ze.error(Na(t))})},NEe=()=>{const e=Un();return xa({mutationFn:({orderId:t,refundReason:r})=>yEe(t,r),onSuccess:t=>{e.invalidateQueries({queryKey:["workOrdersRepo"]}),e.invalidateQueries({queryKey:["partsRepo"]}),e.invalidateQueries({queryKey:["partsRepoPaged"]}),e.invalidateQueries({queryKey:["inventoryTxRepo"]}),Ze.success(" hon tin phiu sa cha"),t.ok&&t.data.refundAmount&&Ze.info(`Hon tin: ${new Intl.NumberFormat("vi-VN").format(t.data.refundAmount)}`)},onError:t=>Ze.error(Na(t))})},oR=({isOpen:e,onClose:t,onSave:r,workOrder:n,customers:a,parts:i,employees:o,currentBranchId:l,upsertCustomer:d})=>{var qe,et,tt;const c=T.useMemo(()=>{var Xe;if(!n)return null;const Ae=a.find(mt=>mt.phone===n.customerPhone||mt.name===n.customerName);return!Ae&&n.customerName?{id:`temp-${Date.now()}`,name:n.customerName,phone:n.customerPhone||"",vehicles:n.licensePlate?[{id:`temp-veh-${Date.now()}`,licensePlate:n.licensePlate,model:n.vehicleModel||""}]:[]}:Ae&&n.licensePlate&&!((Xe=Ae.vehicles)==null?void 0:Xe.some(Tt=>Tt.licensePlate===n.licensePlate))?{...Ae,vehicles:[...Ae.vehicles||[],{id:`temp-veh-${Date.now()}`,licensePlate:n.licensePlate,model:n.vehicleModel||""}]}:Ae||null},[n,a]),u=T.useMemo(()=>c!=null&&c.vehicles?c.vehicles:[],[c]),x=T.useMemo(()=>{if(!n||!u.length)return null;let Ae=u.find(Xe=>Xe.licensePlate===n.licensePlate);return!Ae&&n.vehicleModel&&(Ae=u.find(Xe=>Xe.model===n.vehicleModel)),Ae||(n.licensePlate||n.vehicleModel?{id:`temp-veh-${Date.now()}`,licensePlate:n.licensePlate||"",model:n.vehicleModel||"",customerId:(c==null?void 0:c.id)||""}:u[0]||null)},[n,u,c]),[b,g]=T.useState((n==null?void 0:n.status)||"Tip nhn"),[k,y]=T.useState(((qe=o.find(Ae=>Ae.name===(n==null?void 0:n.technicianName)))==null?void 0:qe.id)||""),[N,S]=T.useState(null),[O,A]=T.useState(null);T.useEffect(()=>{console.log("[WorkOrderMobileModal] workOrder:",n),console.log("[WorkOrderMobileModal] initialCustomer:",c),console.log("[WorkOrderMobileModal] initialVehicle:",x),n?(S(c),A(x),ne(!c)):(S(null),A(null),ne(!0))},[n,c,x]);const[P,q]=T.useState(""),[W,R]=T.useState((n==null?void 0:n.issueDescription)||""),[U,L]=T.useState(((et=n==null?void 0:n.partsUsed)==null?void 0:et.map(Ae=>({partId:Ae.partId||"",partName:Ae.partName,quantity:Ae.quantity,sellingPrice:Ae.price||0})))||[]),[Q,H]=T.useState(((tt=n==null?void 0:n.additionalServices)==null?void 0:tt.map(Ae=>({id:Ae.id||`srv-${Date.now()}-${Math.random()}`,name:Ae.description||"",costPrice:Ae.costPrice||0,sellingPrice:Ae.price||0})))||[]),[G,Z]=T.useState((n==null?void 0:n.laborCost)||0),[te,se]=T.useState((n==null?void 0:n.discount)||0),[ue,ae]=T.useState("amount"),[pe,ve]=T.useState(!1),[Pe,xe]=T.useState(0),[B,re]=T.useState("cash"),[J,ie]=T.useState(!1),[Y,_e]=T.useState(0),[me,ne]=T.useState(!c),[je,De]=T.useState(""),[ce,Ee]=T.useState(!1),[be,ge]=T.useState(""),[Qe,Ye]=T.useState(!1),[at,Je]=T.useState(""),[ct,Ke]=T.useState(0),[zt,Ft]=T.useState(0),[fr,hr]=T.useState(1),[sr,Sr]=T.useState(!1),[tr,Jt]=T.useState(""),[Kt,ar]=T.useState(""),[vr,rr]=T.useState(!1),[ft,br]=T.useState(""),[yr,gr]=T.useState(""),[ot,Lt]=T.useState(""),[ir,Mt]=T.useState(""),Ge=Ae=>{if(Ae===0||Ae==="0")return"0";if(!Ae)return"";const Xe=Ae.toString().replace(/\D/g,"");return Xe?Xe.replace(/\B(?=(\d{3})+(?!\d))/g,"."):""},At=Ae=>{const Xe=Ae.replace(/\./g,"");return Xe?Number(Xe):0},ur=T.useMemo(()=>{if(console.log("[WorkOrderMobileModal] Total customers:",a==null?void 0:a.length,a),!je)return a;const Ae=je.toLowerCase(),Xe=a.filter(mt=>{var Tt;return mt.name.toLowerCase().includes(Ae)||((Tt=mt.phone)==null?void 0:Tt.toLowerCase().includes(Ae))});return console.log("[WorkOrderMobileModal] Filtered customers:",Xe.length,"Search term:",je),Xe},[a,je]),Dr=T.useMemo(()=>{if(!be)return i;const Ae=be.toLowerCase();return i.filter(Xe=>{var mt;return Xe.name.toLowerCase().includes(Ae)||((mt=Xe.sku)==null?void 0:mt.toLowerCase().includes(Ae))})},[i,be]),jr=T.useMemo(()=>{if(!N)return[];const Ae=N.vehicles||[];return O&&!Ae.find(Xe=>Xe.id===O.id)?[...Ae,O]:Ae},[N,O]);ma.useEffect(()=>{jr.length===1&&!O&&A(jr[0])},[jr,O]);const Xt=T.useMemo(()=>U.reduce((Ae,Xe)=>Ae+Xe.quantity*Xe.sellingPrice,0),[U]),Wr=T.useMemo(()=>Q.reduce((Ae,Xe)=>Ae+Xe.sellingPrice,0),[Q]),cr=Xt+Wr+G,pr=T.useMemo(()=>ue==="percent"?cr*te/100:te,[cr,te,ue]),Rr=Math.max(0,cr-pr),Ir=Ae=>{S(Ae),ne(!1),De(""),A(null)},Nn=Ae=>{A(Ae)},Mr=Ae=>{var mt;const Xe=U.find(Tt=>Tt.partId===Ae.id);L(Xe?U.map(Tt=>Tt.partId===Ae.id?{...Tt,quantity:Tt.quantity+1}:Tt):[...U,{partId:Ae.id,partName:Ae.name,quantity:1,sellingPrice:((mt=Ae.retailPrice)==null?void 0:mt[l])||0}]),Ee(!1),ge("")},Gr=(Ae,Xe)=>{L(mt=>mt.map(Tt=>Tt.partId===Ae?{...Tt,quantity:Tt.quantity+Xe}:Tt).filter(Tt=>Tt.quantity>0))},Ne=()=>{!at||zt<=0||(H([...Q,{id:`srv-${Date.now()}`,name:at,costPrice:ct,sellingPrice:zt}]),Je(""),Ke(0),Ft(0),Ye(!1))},Me=Ae=>{H(Q.filter(Xe=>Xe.id!==Ae))},Re=()=>{if(!tr||!Kt)return;const Ae={id:`veh-${Date.now()}`,licensePlate:tr,model:Kt};N&&(N.vehicles=[...N.vehicles||[],Ae],A(Ae)),Jt(""),ar(""),Sr(!1)},Ce=()=>{if(!ft||!yr)return;const Ae=`CUST-${Date.now()}`,Xe=`VEH-${Date.now()}`,mt=[];(ot||ir)&&mt.push({id:Xe,model:ot||"",licensePlate:ir||"",isPrimary:!0});const Tt={id:Ae,name:ft,phone:yr,vehicles:mt,vehicleModel:ot,licensePlate:ir,status:"active",segment:"New",loyaltyPoints:0,totalSpent:0,visitCount:1,lastVisit:new Date().toISOString(),created_at:new Date().toISOString()};d&&d(Tt),S(Tt),mt.length>0&&A(mt[0]),ne(!1),rr(!1),br(""),gr(""),Lt(""),Mt(""),De("")},Ue=()=>{if(!N||!O){alert("Vui lng chn khch hng v xe");return}const Ae=pe?Pe:0,mt=Ae+(J?Y:0),Tt=Rr-mt,Rt={status:b,technicianId:k,customer:N,vehicle:O,currentKm:parseInt(P)||0,issueDescription:W,parts:U,additionalServices:Q,laborCost:G,discount:pr,total:Rr,depositAmount:Ae,paymentMethod:B,totalPaid:b==="Tr my"?mt:void 0,remainingAmount:b==="Tr my"?Tt:void 0};r(Rt)},de=Ae=>{switch(Ae){case"Tip nhn":return"bg-blue-500";case"ang sa":return"bg-yellow-500";case" sa xong":return"bg-green-500";case"Tr my":return"bg-green-500";default:return"bg-gray-500"}};return T.useEffect(()=>(e?document.body.classList.add("hide-bottom-nav"):document.body.classList.remove("hide-bottom-nav"),()=>{document.body.classList.remove("hide-bottom-nav")}),[e]),e?s.jsxs("div",{className:"fixed inset-0 bg-black/50 z-[100] flex items-end md:items-center justify-center",children:[s.jsxs("div",{className:"md:hidden w-full h-full bg-[#151521] flex flex-col",children:[s.jsxs("div",{className:"flex-shrink-0 bg-[#1e1e2d] px-3 py-2.5 flex items-center justify-between border-b border-slate-700",children:[s.jsx("button",{onClick:t,className:"text-slate-400",children:s.jsx(ic,{className:"w-4 h-4"})}),s.jsx("h2",{className:"text-sm font-semibold text-white",children:n?`Phiu #${qi(n.id)}`:"To phiu sa cha"}),s.jsx("div",{className:"w-8"})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto pb-32",children:[s.jsx("div",{className:"p-3 space-y-2",children:s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsxs("div",{className:"relative",children:[s.jsxs("select",{value:b,onChange:Ae=>g(Ae.target.value),className:`w-full px-2.5 py-2 rounded-lg text-white text-xs font-medium appearance-none pr-7 ${de(b)}`,children:[s.jsx("option",{value:"Tip nhn",children:" Tip nhn"}),s.jsx("option",{value:"ang sa",children:" ang sa"}),s.jsx("option",{value:" sa xong",children:"  sa xong"}),s.jsx("option",{value:"Tr my",children:" Tr xe"})]}),s.jsx(vS,{className:"absolute right-2 top-1/2 -translate-y-1/2 w-3.5 h-3.5 text-white pointer-events-none"})]}),s.jsxs("div",{className:"relative",children:[s.jsxs("select",{value:k,onChange:Ae=>y(Ae.target.value),className:"w-full px-2.5 py-2 bg-[#2b2b40] rounded-lg text-white text-xs appearance-none pr-7",children:[s.jsx("option",{value:"",children:" Chn KTV"}),o.map(Ae=>s.jsx("option",{value:Ae.id,children:Ae.name},Ae.id))]}),s.jsx(vS,{className:"absolute right-2 top-1/2 -translate-y-1/2 w-3.5 h-3.5 text-slate-400 pointer-events-none"})]})]})}),s.jsxs("div",{className:"px-3 pb-3 space-y-2",children:[s.jsx("h3",{className:"text-xs font-semibold text-white uppercase tracking-wide",children:"Khch hng"}),me?s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"relative",children:[s.jsx(nu,{className:"absolute left-2.5 top-1/2 -translate-y-1/2 w-3.5 h-3.5 text-slate-400"}),s.jsx("input",{type:"text",value:je,onChange:Ae=>De(Ae.target.value),placeholder:" Tm tn hoc ST khch...",className:"w-full pl-9 pr-3 py-2 bg-[#2b2b40] rounded-lg text-white text-xs placeholder-slate-500",autoFocus:!0})]}),s.jsxs("div",{className:"max-h-48 overflow-y-auto space-y-2",children:[ur.slice(0,5).map(Ae=>s.jsxs("div",{onClick:()=>Ir(Ae),className:"p-3 bg-[#1e1e2d] rounded-lg cursor-pointer hover:bg-[#2b2b40] transition-colors",children:[s.jsx("div",{className:"text-white font-medium",children:Ae.name}),s.jsx("div",{className:"text-xs text-slate-400",children:Ae.phone})]},Ae.id)),je&&ur.length===0&&s.jsx("div",{className:"text-center py-3 text-slate-400 text-xs",children:"Khng tm thy khch hng"}),s.jsxs("button",{type:"button",onClick:()=>{rr(!0),/^[0-9]+$/.test(je)?(gr(je),br("")):(br(je),gr(""))},className:"w-full p-3 bg-green-500/20 border-2 border-dashed border-green-500/50 rounded-lg text-green-400 font-medium flex items-center justify-center gap-2 hover:bg-green-500/30 transition-colors",children:[s.jsx(oc,{className:"w-4 h-4"}),"Thm khch hng mi"]})]})]}):N?s.jsxs("div",{className:"p-2.5 bg-[#1e1e2d] rounded-lg flex items-start justify-between",children:[s.jsxs("div",{className:"flex items-start gap-2.5",children:[s.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-500/20 flex items-center justify-center text-blue-400 font-semibold text-xs",children:N.name.charAt(0)}),s.jsxs("div",{children:[s.jsx("div",{className:"text-white font-medium text-xs",children:N.name}),s.jsxs("div",{className:"text-xs text-slate-400",children:[" ",N.phone]})]})]}),s.jsx("button",{onClick:()=>{S(null),A(null),ne(!0)},className:"p-1 text-slate-400 hover:text-white",children:s.jsx(ic,{className:"w-4 h-4"})})]}):null,N&&s.jsxs(s.Fragment,{children:[s.jsx("h3",{className:"text-xs font-semibold text-white mt-3 uppercase tracking-wide",children:"XE CA KHCH (Chn 1):"}),s.jsxs("div",{className:"space-y-2",children:[jr.map(Ae=>{const Xe=(O==null?void 0:O.id)===Ae.id;return s.jsx("div",{onClick:()=>Nn(Ae),className:`p-3 rounded-lg cursor-pointer transition-all ${Xe?"bg-blue-500/20 border-2 border-blue-500":"bg-[#1e1e2d] border-2 border-transparent"}`,children:s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{className:"flex items-center gap-2.5",children:[s.jsx("div",{className:"text-2xl",children:Xe?s.jsx(ob,{className:"w-4 h-4 text-blue-400"}):""}),s.jsxs("div",{children:[s.jsxs("div",{className:`font-semibold ${Xe?"text-blue-400":"text-white"}`,children:[Ae.model,Xe&&" (ANG CHN)"]}),s.jsxs("div",{className:"text-xs text-slate-400",children:["BKS: ",Ae.licensePlate]})]})]})})},Ae.id)}),s.jsxs("button",{onClick:()=>Sr(!0),className:"w-full py-1.5 border border-dashed border-slate-600 rounded-lg text-slate-400 hover:border-blue-500 hover:text-blue-400 transition-colors flex items-center justify-center gap-1.5 text-xs",children:[s.jsx(oc,{className:"w-3.5 h-3.5"}),"Thm xe mi"]})]})]}),O&&s.jsxs("div",{className:"space-y-2 mt-2.5",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:"S KM hin ti"}),s.jsx("input",{type:"number",value:P,onChange:Ae=>q(Ae.target.value),placeholder:"Nhp s KM",className:"w-full px-2.5 py-1.5 bg-[#2b2b40] rounded-lg text-white text-xs"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:"M t s c"}),s.jsx("textarea",{value:W,onChange:Ae=>R(Ae.target.value),placeholder:"Thay nht, ku c...",rows:3,className:"w-full px-2.5 py-1.5 bg-[#2b2b40] rounded-lg text-white text-xs resize-none"})]})]})]}),N&&O&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"px-3 pb-3 space-y-2.5",children:[s.jsx("h3",{className:"text-xs font-semibold text-white uppercase tracking-wide",children:"PH TNG S DNG"}),U.length>0&&s.jsx("div",{className:"space-y-2",children:U.map((Ae,Xe)=>s.jsxs("div",{className:"p-3 bg-[#1e1e2d] rounded-lg",children:[s.jsxs("div",{className:"flex items-start justify-between mb-2",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"text-white text-xs font-medium",children:[Xe+1,". ",Ae.partName]}),s.jsxs("div",{className:"text-xs text-slate-400",children:[Te(Ae.sellingPrice)," / ci"]})]}),s.jsx("div",{className:"text-[#50cd89] font-bold",children:Te(Ae.quantity*Ae.sellingPrice)})]}),s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>Gr(Ae.partId,-1),className:"w-8 h-8 bg-[#2b2b40] rounded-lg flex items-center justify-center text-white hover:bg-red-500/20 hover:text-red-400",children:s.jsx(IB,{className:"w-4 h-4"})}),s.jsx("span",{className:"w-8 text-center text-white font-semibold",children:Ae.quantity}),s.jsx("button",{onClick:()=>Gr(Ae.partId,1),className:"w-8 h-8 bg-[#2b2b40] rounded-lg flex items-center justify-center text-white hover:bg-blue-500/20 hover:text-blue-400",children:s.jsx(oc,{className:"w-4 h-4"})})]})})]},Ae.partId))}),s.jsxs("button",{onClick:()=>Ee(!0),className:"w-full py-2 bg-blue-600 hover:bg-blue-700 rounded-lg text-white font-medium flex items-center justify-center gap-1.5 transition-colors text-xs",children:[s.jsx(oc,{className:"w-4 h-4"}),"+ THM PH TNG"]})]}),s.jsxs("div",{className:"px-3 pb-3 space-y-2.5",children:[s.jsx("h3",{className:"text-xs font-semibold text-white uppercase tracking-wide",children:"BO GI (GIA CNG, T NGOI)"}),Q.length>0&&s.jsx("div",{className:"space-y-2",children:Q.map((Ae,Xe)=>s.jsxs("div",{className:"p-3 bg-[#1e1e2d] rounded-lg border border-slate-700/50",children:[s.jsxs("div",{className:"flex items-start gap-2 mb-2",children:[s.jsx("span",{className:"text-lg",children:""}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"text-white text-sm font-medium",children:Ae.name}),s.jsxs("div",{className:"text-xs text-slate-400 mt-0.5",children:["1 x ",Te(Ae.sellingPrice)]})]})]}),s.jsxs("div",{className:"border-t border-slate-700 pt-2 mt-2 flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-slate-500",children:"Thnh tin:"}),s.jsxs("div",{className:"text-[#50cd89] font-bold text-sm",children:[" ",Te(Ae.sellingPrice)]}),Ae.costPrice>0&&s.jsxs("div",{className:"text-[10px] text-slate-600 mt-0.5",children:["(Vn: ",Te(Ae.costPrice),")"]})]}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx("button",{onClick:()=>{Ye(!0)},className:"p-1.5 text-blue-400 hover:bg-blue-500/20 rounded-lg",children:""}),s.jsx("button",{onClick:()=>Me(Ae.id),className:"p-1.5 text-red-400 hover:bg-red-500/20 rounded-lg",children:""})]})]})]},Ae.id))}),s.jsxs("button",{onClick:()=>Ye(!0),className:"w-full py-3 border border-dashed border-[#009ef7] rounded-lg text-[#009ef7] font-medium flex items-center justify-center gap-2 transition-all hover:bg-[#009ef7]/10 text-xs",children:[s.jsx(oc,{className:"w-4 h-4"}),"THM CNG VIC KHC (GIA CNG)"]})]}),s.jsxs("div",{className:"px-3 pb-3 space-y-2.5",children:[s.jsx("h3",{className:"text-xs font-semibold text-white uppercase tracking-wide",children:"THANH TON"}),s.jsxs("div",{className:"p-4 bg-[#1e1e2d] rounded-lg space-y-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:"Tin cng"}),s.jsx("input",{type:"text",value:Ge(G),onChange:Ae=>Z(At(Ae.target.value)),placeholder:"0",className:"w-full px-2.5 py-1.5 bg-[#2b2b40] rounded-lg text-white text-xs"})]}),s.jsxs("div",{className:"pt-2",children:[s.jsxs("div",{className:"flex items-center justify-between p-3 bg-[#2b2b40] rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-8 h-8 rounded-lg bg-blue-500/20 flex items-center justify-center",children:s.jsx("span",{className:"text-lg",children:""})}),s.jsx("span",{className:"text-white font-medium text-sm",children:"t cc trc"})]}),s.jsx("button",{onClick:()=>ve(!pe),className:`relative w-12 h-6 rounded-full transition-colors ${pe?"bg-[#009ef7]":"bg-slate-600"}`,children:s.jsx("div",{className:`absolute top-0.5 w-5 h-5 bg-white rounded-full shadow-md transition-transform ${pe?"right-0.5":"left-0.5"}`,children:pe&&s.jsx("span",{className:"absolute inset-0 flex items-center justify-center text-[#009ef7] text-[10px] font-bold",children:"ON"})})})]}),pe&&s.jsxs("div",{className:"mt-3 p-3 bg-[#151521] border-2 border-[#009ef7] rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("span",{className:"text-lg",children:""}),s.jsx("span",{className:"text-slate-400 text-xs",children:"Nhp s tin cc..."})]}),s.jsx("input",{type:"text",value:Ge(Pe),onChange:Ae=>xe(At(Ae.target.value)),placeholder:"0",className:"w-full px-3 py-2.5 bg-[#2b2b40] border border-slate-600 rounded-lg text-white text-sm focus:border-[#009ef7] focus:outline-none transition-colors"})]})]}),s.jsxs("div",{className:"pt-2",children:[s.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-2",children:"Phng thc thanh ton"}),s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsxs("button",{onClick:()=>re("cash"),className:`relative p-3 rounded-lg transition-all border-2 ${B==="cash"?"bg-emerald-500/10 border-emerald-500 shadow-lg shadow-emerald-500/20":"bg-[#2b2b40] border-transparent hover:border-slate-600"}`,children:[s.jsxs("div",{className:"flex flex-col items-center gap-1",children:[s.jsx("div",{className:`text-xl ${B==="cash"?"scale-110":""} transition-transform`,children:""}),s.jsx("span",{className:`text-xs font-medium ${B==="cash"?"text-emerald-400":"text-slate-400"}`,children:"Tin mt"})]}),B==="cash"&&s.jsx("div",{className:"absolute top-1 right-1 w-4 h-4 bg-emerald-500 rounded-full flex items-center justify-center",children:s.jsx("svg",{className:"w-2.5 h-2.5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})})]}),s.jsxs("button",{onClick:()=>re("bank"),className:`relative p-3 rounded-lg transition-all border-2 ${B==="bank"?"bg-blue-500/10 border-blue-500 shadow-lg shadow-blue-500/20":"bg-[#2b2b40] border-transparent hover:border-slate-600"}`,children:[s.jsxs("div",{className:"flex flex-col items-center gap-1",children:[s.jsx("div",{className:`text-xl ${B==="bank"?"scale-110":""} transition-transform`,children:""}),s.jsx("span",{className:`text-xs font-medium ${B==="bank"?"text-blue-400":"text-slate-400"}`,children:"Chuyn khon"})]}),B==="bank"&&s.jsx("div",{className:"absolute top-1 right-1 w-4 h-4 bg-blue-500 rounded-full flex items-center justify-center",children:s.jsx("svg",{className:"w-2.5 h-2.5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})})]})]}),b==="Tr my"&&s.jsxs("div",{className:"mt-3",children:[s.jsxs("div",{className:"flex items-center justify-between p-3 bg-[#2b2b40] rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-8 h-8 rounded-lg bg-emerald-500/20 flex items-center justify-center",children:s.jsx("span",{className:"text-lg",children:""})}),s.jsx("span",{className:"text-white font-medium text-sm",children:"Thanh ton khi tr xe"})]}),s.jsx("button",{onClick:()=>{const Ae=!J;ie(Ae),Ae||_e(0)},className:`relative w-12 h-6 rounded-full transition-colors ${J?"bg-emerald-500":"bg-slate-600"}`,children:s.jsx("div",{className:`absolute top-0.5 w-5 h-5 bg-white rounded-full shadow-md transition-transform ${J?"right-0.5":"left-0.5"}`,children:J&&s.jsx("span",{className:"absolute inset-0 flex items-center justify-center text-emerald-500 text-[10px] font-bold",children:"ON"})})})]}),J&&s.jsxs("div",{className:"mt-3 p-3 bg-[#151521] border-2 border-emerald-500 rounded-lg",children:[s.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-2",children:"S tin thanh ton thm:"}),s.jsx("input",{type:"text",value:Ge(Y),onChange:Ae=>_e(At(Ae.target.value)),placeholder:"0",className:"w-full px-3 py-2.5 bg-[#2b2b40] border border-slate-600 rounded-lg text-white text-sm focus:border-emerald-500 focus:outline-none transition-colors mb-2"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>_e(0),className:"flex-1 px-3 py-2 bg-slate-600 hover:bg-slate-500 text-white rounded-lg text-xs font-medium transition-colors",children:"0%"}),s.jsx("button",{onClick:()=>{const Ae=Rr-(pe?Pe:0);_e(Math.round(Ae*.5))},className:"flex-1 px-3 py-2 bg-slate-600 hover:bg-slate-500 text-white rounded-lg text-xs font-medium transition-colors",children:"50%"}),s.jsx("button",{onClick:()=>{const Ae=Rr-(pe?Pe:0);_e(Ae)},className:"flex-1 px-3 py-2 bg-emerald-600 hover:bg-emerald-500 text-white rounded-lg text-xs font-medium transition-colors",children:"100%"})]})]})]}),s.jsxs("div",{className:"mt-3 p-3 bg-blue-500/10 border border-blue-500/30 rounded-lg flex items-start gap-2",children:[s.jsx("div",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-blue-500/20 flex items-center justify-center mt-0.5",children:s.jsx("span",{className:"text-blue-400 text-xs",children:""})}),s.jsxs("p",{className:"text-blue-300 text-xs leading-relaxed",children:[s.jsx("span",{className:"font-semibold",children:"Lu :"}),' Ch thanh ton khi tr xe, ch kh dng khi trng thi "Tr my"']})]})]}),s.jsxs("div",{className:"pt-2 border-t border-slate-700 space-y-2",children:[s.jsx("h3",{className:"text-xs font-semibold text-slate-300 mb-2",children:"Tng kt"}),s.jsxs("div",{className:"flex justify-between text-xs",children:[s.jsx("span",{className:"text-slate-400",children:"Ph dch v:"}),s.jsx("span",{className:"text-white font-medium",children:Te(G)})]}),s.jsxs("div",{className:"flex justify-between text-xs",children:[s.jsx("span",{className:"text-slate-400",children:"Tin ph tng:"}),s.jsx("span",{className:"text-white font-medium",children:Te(Xt)})]}),s.jsxs("div",{className:"flex justify-between text-xs",children:[s.jsx("span",{className:"text-slate-400",children:"Gia cng/t hng:"}),s.jsx("span",{className:"text-white font-medium",children:Te(Wr)})]}),s.jsxs("div",{className:"pt-2 border-t border-slate-700",children:[s.jsxs("div",{className:"flex gap-2 items-center justify-between mb-2",children:[s.jsx("label",{className:"text-red-400 text-xs font-medium",children:"Gim gi:"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"text",value:Ge(te),onChange:Ae=>se(At(Ae.target.value)),placeholder:"0",className:"w-20 px-2 py-1.5 bg-[#2b2b40] border border-slate-600 rounded text-white text-xs text-right focus:border-red-500 focus:outline-none"}),s.jsxs("select",{value:ue,onChange:Ae=>ae(Ae.target.value),className:"px-2 py-1.5 bg-[#2b2b40] border border-slate-600 rounded text-white text-xs focus:border-red-500 focus:outline-none",children:[s.jsx("option",{value:"amount",children:""}),s.jsx("option",{value:"percent",children:"%"})]})]})]}),ue==="percent"&&s.jsx("div",{className:"flex gap-1.5 justify-end",children:[5,10,15,20].map(Ae=>s.jsxs("button",{onClick:()=>se(Ae),className:"px-2.5 py-1 text-xs bg-slate-700 hover:bg-slate-600 text-slate-300 rounded transition-colors",children:[Ae,"%"]},Ae))}),ue==="percent"&&te>0&&s.jsxs("div",{className:"text-xs text-slate-400 text-right mt-1",children:["= ",Te(pr)]})]}),s.jsxs("div",{className:"pt-2 border-t-2 border-slate-600",children:[s.jsxs("div",{className:"flex justify-between text-sm font-bold mb-2",children:[s.jsx("span",{className:"text-white",children:"Tng cng:"}),s.jsx("span",{className:"text-blue-400 text-base",children:Te(Rr)})]}),(pe&&Pe>0||J&&Y>0)&&s.jsxs("div",{className:"space-y-1 pt-2 border-t border-slate-700",children:[pe&&Pe>0&&s.jsxs("div",{className:"flex justify-between text-xs",children:[s.jsx("span",{className:"text-green-400",children:" t cc:"}),s.jsxs("span",{className:"font-medium text-green-400",children:["-",Te(Pe)]})]}),J&&Y>0&&s.jsxs("div",{className:"flex justify-between text-xs",children:[s.jsx("span",{className:"text-green-400",children:"Thanh ton thm:"}),s.jsxs("span",{className:"font-medium text-green-400",children:["-",Te(Y)]})]}),s.jsxs("div",{className:"flex justify-between items-center pt-2 border-t border-slate-700",children:[s.jsx("span",{className:"text-sm font-bold text-white",children:Rr-(pe?Pe:0)-(J?Y:0)>0?"Cn phi thu:":" thanh ton "}),s.jsx("span",{className:`text-base font-bold ${Rr-(pe?Pe:0)-(J?Y:0)>0?"text-red-400":"text-green-400"}`,children:Te(Rr-(pe?Pe:0)-(J?Y:0))})]})]})]})]})]})]})]})]}),s.jsx("div",{className:"flex-shrink-0 bg-[#1e1e2d] border-t border-slate-700 p-3",children:s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:t,className:"px-4 py-2 bg-[#2b2b40] text-slate-300 rounded-lg font-medium hover:bg-slate-700 transition-colors text-xs",children:"Hy"}),s.jsx("button",{onClick:Ue,className:`flex-1 py-2 rounded-lg font-medium text-white transition-colors text-xs ${b==="Tr my"?"bg-green-600 hover:bg-green-700":pe?"bg-purple-600 hover:bg-purple-700":"bg-blue-600 hover:bg-blue-700"}`,children:b==="Tr my"?" THANH TON & TR XE":pe?" LU & T CC":" LU PHIU"})]})})]}),s.jsx("div",{className:"hidden md:block"}),ce&&s.jsx("div",{className:"fixed inset-0 bg-black/70 z-[110] flex items-end",children:s.jsxs("div",{className:"w-full bg-[#151521] rounded-t-2xl max-h-[80vh] flex flex-col",children:[s.jsxs("div",{className:"flex-shrink-0 p-3 border-b border-slate-700 flex items-center justify-between",children:[s.jsx("h3",{className:"text-white font-semibold text-sm",children:"Chn ph tng"}),s.jsx("button",{onClick:()=>{Ee(!1),ge("")},className:"p-1.5 text-slate-400",children:s.jsx(ic,{className:"w-4 h-4"})})]}),s.jsx("div",{className:"p-3",children:s.jsxs("div",{className:"relative",children:[s.jsx(nu,{className:"absolute left-2.5 top-1/2 -translate-y-1/2 w-3.5 h-3.5 text-slate-400"}),s.jsx("input",{type:"text",value:be,onChange:Ae=>ge(Ae.target.value),placeholder:"Tm tn hoc SKU...",className:"w-full pl-9 pr-3 py-2 bg-[#2b2b40] rounded-lg text-white text-xs",autoFocus:!0})]})}),s.jsx("div",{className:"flex-1 overflow-y-auto px-3 pb-3",children:s.jsx("div",{className:"space-y-2",children:Dr.slice(0,20).map(Ae=>{var Tt,Rt;const Xe=((Tt=Ae.stock)==null?void 0:Tt[l])||0,mt=((Rt=Ae.retailPrice)==null?void 0:Rt[l])||0;return s.jsx("div",{onClick:()=>Mr(Ae),className:"p-2.5 bg-[#1e1e2d] rounded-lg cursor-pointer hover:bg-[#2b2b40] transition-colors",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"text-white font-medium text-xs",children:Ae.name}),s.jsxs("div",{className:"text-xs text-slate-400",children:["SKU: ",Ae.sku,"  Tn: ",Xe]})]}),s.jsx("div",{className:"text-[#50cd89] font-bold text-xs",children:Te(mt)})]})},Ae.id)})})})]})}),Qe&&s.jsx("div",{className:"fixed inset-0 bg-black/70 z-[110] flex items-end md:items-center md:justify-center",children:s.jsxs("div",{className:"w-full md:max-w-md bg-[#1e1e2d] rounded-t-2xl md:rounded-xl overflow-hidden",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-slate-700",children:[s.jsx("h3",{className:"text-white font-semibold text-base",children:"THM DCH V GIA CNG"}),s.jsx("button",{onClick:()=>{Ye(!1),Je(""),Ke(0),Ft(0),hr(1)},className:"p-1.5 text-slate-400 hover:text-white",children:s.jsx(ic,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"p-4 space-y-4 max-h-[70vh] overflow-y-auto",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Tn cng vic / M t:"}),s.jsx("input",{type:"text",value:at,onChange:Ae=>Je(Ae.target.value),placeholder:"Nhp tn (VD: Hn ym, Sn...)",className:"w-full px-4 py-3 bg-[#151521] border border-slate-700 rounded-lg text-white placeholder-slate-500 focus:border-[#009ef7] focus:outline-none transition-colors",autoFocus:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"S lng:"}),s.jsxs("div",{className:"flex items-center justify-center gap-4",children:[s.jsx("button",{onClick:()=>hr(Math.max(1,fr-1)),className:"w-12 h-12 bg-[#2b2b40] hover:bg-slate-700 rounded-lg flex items-center justify-center text-white text-2xl font-bold transition-colors",children:""}),s.jsx("div",{className:"w-20 h-12 bg-[#151521] border border-slate-700 rounded-lg flex items-center justify-center",children:s.jsx("span",{className:"text-white text-xl font-bold",children:fr})}),s.jsx("button",{onClick:()=>hr(fr+1),className:"w-12 h-12 bg-[#2b2b40] hover:bg-slate-700 rounded-lg flex items-center justify-center text-white text-2xl font-bold transition-colors",children:"+"})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-semibold text-slate-300 mb-3 uppercase tracking-wide",children:"CHI PH & GI BN"}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-slate-500 mb-1.5",children:"Gi nhp (Vn):"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"text",value:Ge(ct),onChange:Ae=>Ke(At(Ae.target.value)),placeholder:"0",className:"w-full px-3 py-3 pr-8 bg-[#151521] border border-slate-700 rounded-lg text-slate-400 text-sm focus:border-slate-600 focus:outline-none transition-colors"}),s.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-500 text-xs",children:""})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-[#ffc700] mb-1.5 font-medium",children:"n gi (Bo khch):"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"text",value:Ge(zt),onChange:Ae=>Ft(At(Ae.target.value)),placeholder:"0",className:"w-full px-3 py-3 pr-8 bg-gradient-to-br from-[#009ef7]/10 to-purple-600/10 border-2 border-[#009ef7] rounded-lg text-white text-sm font-semibold focus:border-[#0077c7] focus:outline-none transition-colors"}),s.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-[#009ef7] text-xs font-bold",children:""})]})]})]})]}),s.jsx("div",{className:"p-4 bg-[#151521] border border-slate-700 rounded-lg",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-slate-400 text-sm",children:"Thnh tin (T tnh):"}),s.jsx("span",{className:"text-[#50cd89] text-xl font-bold",children:Te(zt*fr)})]})})]}),s.jsx("div",{className:"p-4 border-t border-slate-700",children:s.jsx("button",{onClick:Ne,disabled:!at.trim()||zt<=0,className:"w-full py-4 bg-gradient-to-r from-[#009ef7] to-purple-600 hover:from-[#0077c7] hover:to-purple-700 disabled:from-slate-700 disabled:to-slate-700 disabled:cursor-not-allowed text-white font-bold text-sm rounded-lg transition-all shadow-lg",children:"LU VO PHIU"})})]})}),sr&&s.jsx("div",{className:"fixed inset-0 bg-black/70 z-[110] flex items-center justify-center p-4",children:s.jsxs("div",{className:"w-full max-w-md bg-[#1e1e2d] rounded-xl p-3",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("h3",{className:"text-white font-semibold text-sm",children:"Thm xe mi"}),s.jsx("button",{onClick:()=>Sr(!1),className:"p-1.5 text-slate-400",children:s.jsx(ic,{className:"w-4 h-4"})})]}),s.jsxs("div",{className:"space-y-2.5",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:"Bin s xe"}),s.jsx("input",{type:"text",value:tr,onChange:Ae=>Jt(Ae.target.value),placeholder:"59G1-123.45",className:"w-full px-2.5 py-1.5 bg-[#2b2b40] rounded-lg text-white text-xs"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:"Tn xe"}),s.jsx("input",{type:"text",value:Kt,onChange:Ae=>ar(Ae.target.value),placeholder:"Honda Wave RSX",className:"w-full px-2.5 py-1.5 bg-[#2b2b40] rounded-lg text-white text-xs"})]}),s.jsxs("div",{className:"flex gap-2 pt-1.5",children:[s.jsx("button",{onClick:()=>Sr(!1),className:"flex-1 py-2 bg-[#2b2b40] text-slate-300 rounded-lg font-medium text-xs",children:"Hy"}),s.jsx("button",{onClick:Re,className:"flex-1 py-2 bg-blue-600 text-white rounded-lg font-medium text-xs",children:"Thm xe"})]})]})]})}),vr&&s.jsx("div",{className:"fixed inset-0 bg-black/70 z-[110] flex items-center justify-center p-4",children:s.jsxs("div",{className:"w-full max-w-md bg-[#1e1e2d] rounded-xl p-4 max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-white font-semibold",children:"Thm khch hng mi"}),s.jsx("button",{onClick:()=>{rr(!1),br(""),gr(""),Lt(""),Mt("")},className:"p-1.5 text-slate-400",children:s.jsx(ic,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"bg-[#2b2b40]/50 rounded-lg p-3 space-y-3",children:[s.jsx("h4",{className:"text-xs font-semibold text-blue-400 uppercase tracking-wide",children:"Thng tin khch hng"}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:["Tn khch hng ",s.jsx("span",{className:"text-red-400",children:"*"})]}),s.jsx("input",{type:"text",value:ft,onChange:Ae=>br(Ae.target.value),placeholder:"Nguyn Vn A",className:"w-full px-3 py-2.5 bg-[#2b2b40] rounded-lg text-white text-sm",autoFocus:!0})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:["S in thoi ",s.jsx("span",{className:"text-red-400",children:"*"})]}),s.jsx("input",{type:"tel",value:yr,onChange:Ae=>gr(Ae.target.value),placeholder:"0901234567",className:"w-full px-3 py-2.5 bg-[#2b2b40] rounded-lg text-white text-sm"})]})]}),s.jsxs("div",{className:"bg-[#2b2b40]/50 rounded-lg p-3 space-y-3",children:[s.jsx("h4",{className:"text-xs font-semibold text-green-400 uppercase tracking-wide",children:" Thng tin xe"}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:"Loi xe"}),s.jsx("input",{type:"text",value:ot,onChange:Ae=>Lt(Ae.target.value),placeholder:"Wave, Exciter, Vision...",className:"w-full px-3 py-2.5 bg-[#2b2b40] rounded-lg text-white text-sm"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:"Bin s xe"}),s.jsx("input",{type:"text",value:ir,onChange:Ae=>Mt(Ae.target.value.toUpperCase()),placeholder:"59G1-12345",className:"w-full px-3 py-2.5 bg-[#2b2b40] rounded-lg text-white text-sm uppercase"})]})]}),s.jsxs("div",{className:"flex gap-2 pt-2",children:[s.jsx("button",{onClick:()=>{rr(!1),br(""),gr(""),Lt(""),Mt("")},className:"flex-1 py-2.5 bg-[#2b2b40] text-slate-300 rounded-lg font-medium text-sm",children:"Hy"}),s.jsx("button",{onClick:Ce,disabled:!ft||!yr,className:"flex-1 py-2.5 bg-green-600 text-white rounded-lg font-medium text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:" Lu khch hng"})]})]})]})})]}):null};function _Ee({workOrders:e,onCreateWorkOrder:t,onEditWorkOrder:r,onDeleteWorkOrder:n,onCallCustomer:a,onPrintWorkOrder:i,currentBranchId:o}){const[l,d]=T.useState(""),[c,u]=T.useState("all"),[x,b]=T.useState(!1),g=T.useMemo(()=>{const S=e.filter(U=>U.status==="Tip nhn").length,O=e.filter(U=>U.status==="ang sa").length,A=e.filter(U=>U.status===" sa xong").length,P=e.filter(U=>U.status==="Tr my").length,q=e.filter(U=>U.status===" sa xong"||U.status==="Tr my"),W=q.reduce((U,L)=>U+(L.total||0),0),R=q.reduce((U,L)=>U+(L.total||0),0);return{tiepNhan:S,dangSua:O,daHoanThanh:A,traMay:P,doanhThu:W,loiNhuan:R}},[e]),k=T.useMemo(()=>{let S=e;if(c!=="all"&&(S=S.filter(O=>O.status===c)),l.trim()){const O=l.toLowerCase();S=S.filter(A=>{var P,q,W,R;return((P=A.customerName)==null?void 0:P.toLowerCase().includes(O))||((q=A.customerPhone)==null?void 0:q.toLowerCase().includes(O))||((W=A.licensePlate)==null?void 0:W.toLowerCase().includes(O))||((R=A.id)==null?void 0:R.toLowerCase().includes(O))})}return S.sort((O,A)=>{const P=new Date(O.creationDate||0).getTime();return new Date(A.creationDate||0).getTime()-P})},[e,c,l]),y=S=>{switch(S){case"Tip nhn":return"bg-[#009ef7]/10 text-[#009ef7] border-[#009ef7]/30";case"ang sa":return"bg-[#f1416c]/10 text-[#f1416c] border-[#f1416c]/30";case" sa xong":return"bg-[#50cd89]/10 text-[#50cd89] border-[#50cd89]/30";case"Tr my":return"bg-purple-500/10 text-purple-500 border-purple-500/30";default:return"bg-gray-500/10 text-gray-500 border-gray-500/30"}},N=S=>{switch(S){case"Tip nhn":return s.jsx(vd,{className:"w-4 h-4"});case"ang sa":return s.jsx(Bm,{className:"w-4 h-4"});case" sa xong":return s.jsx(ob,{className:"w-4 h-4"});case"Tr my":return s.jsx(U7,{className:"w-4 h-4"});default:return s.jsx(vd,{className:"w-4 h-4"})}};return s.jsxs("div",{className:"md:hidden flex flex-col h-screen bg-[#151521]",children:[s.jsxs("div",{className:"bg-[#1e1e2d] border-b border-gray-800 p-3",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsxs("button",{onClick:()=>u(c==="Tip nhn"?"all":"Tip nhn"),className:`p-3 rounded-xl text-left transition-all ${c==="Tip nhn"?"bg-gradient-to-br from-[#009ef7]/20 to-[#009ef7]/10 border-2 border-[#009ef7] shadow-lg shadow-[#009ef7]/20":"bg-[#2b2b40] border border-gray-700 hover:border-[#009ef7]/50"}`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("span",{className:"text-[10px] text-gray-400 font-medium",children:"Tip nhn"}),s.jsx(vd,{className:"w-4 h-4 text-[#009ef7]"})]}),s.jsx("div",{className:"text-2xl font-black text-white",children:g.tiepNhan})]}),s.jsxs("button",{onClick:()=>u(c==="ang sa"?"all":"ang sa"),className:`p-3 rounded-xl text-left transition-all ${c==="ang sa"?"bg-gradient-to-br from-[#f1416c]/20 to-[#f1416c]/10 border-2 border-[#f1416c] shadow-lg shadow-[#f1416c]/20":"bg-[#2b2b40] border border-gray-700 hover:border-[#f1416c]/50"}`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("span",{className:"text-[10px] text-gray-400 font-medium",children:"ang sa"}),s.jsx(Bm,{className:"w-4 h-4 text-[#f1416c]"})]}),s.jsx("div",{className:"text-2xl font-black text-white",children:g.dangSua})]}),s.jsxs("button",{onClick:()=>u(c===" sa xong"?"all":" sa xong"),className:`p-3 rounded-xl text-left transition-all ${c===" sa xong"?"bg-gradient-to-br from-[#50cd89]/20 to-[#50cd89]/10 border-2 border-[#50cd89] shadow-lg shadow-[#50cd89]/20":"bg-[#2b2b40] border border-gray-700 hover:border-[#50cd89]/50"}`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("span",{className:"text-[10px] text-gray-400 font-medium",children:" sa xong"}),s.jsx(ob,{className:"w-4 h-4 text-[#50cd89]"})]}),s.jsx("div",{className:"text-2xl font-black text-white",children:g.daHoanThanh})]}),s.jsxs("button",{onClick:()=>u(c==="Tr my"?"all":"Tr my"),className:`p-3 rounded-xl text-left transition-all ${c==="Tr my"?"bg-gradient-to-br from-purple-500/20 to-purple-500/10 border-2 border-purple-500 shadow-lg shadow-purple-500/20":"bg-[#2b2b40] border border-gray-700 hover:border-purple-500/50"}`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("span",{className:"text-[10px] text-gray-400 font-medium",children:"Tr my"}),s.jsx(U7,{className:"w-4 h-4 text-purple-500"})]}),s.jsx("div",{className:"text-2xl font-black text-white",children:g.traMay})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-2",children:[s.jsxs("div",{className:"p-3 rounded-xl bg-gradient-to-br from-emerald-900/30 to-emerald-800/20 border border-emerald-700",children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("span",{className:"text-[10px] text-emerald-400 font-medium",children:"Doanh thu hm nay"}),s.jsx(D0,{className:"w-4 h-4 text-emerald-400"})]}),s.jsx("div",{className:"text-base font-black text-emerald-300",children:Te(g.doanhThu)})]}),s.jsxs("div",{className:"p-3 rounded-xl bg-gradient-to-br from-blue-900/30 to-blue-800/20 border border-blue-700",children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("span",{className:"text-[10px] text-blue-400 font-medium",children:"Li nhun hm nay"}),s.jsx(Y1,{className:"w-4 h-4 text-blue-400"})]}),s.jsx("div",{className:"text-base font-black text-blue-300",children:Te(g.loiNhuan)})]})]})]}),s.jsx("div",{className:"bg-[#1e1e2d] border-b border-gray-800 px-3 py-2",children:s.jsxs("div",{className:"relative",children:[s.jsx(nu,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500"}),s.jsx("input",{type:"text",placeholder:"Tm tn, ST, bin s...",value:l,onChange:S=>d(S.target.value),className:"w-full pl-10 pr-3 py-2.5 bg-[#2b2b40] border border-gray-700 rounded-xl text-white placeholder-gray-500 text-sm focus:outline-none focus:border-[#009ef7]"})]})}),s.jsx("div",{className:"flex-1 overflow-y-auto py-2 space-y-2 pb-20 scrollbar-hide",children:k.length===0?s.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center px-6",children:[s.jsx("div",{className:"w-32 h-32 mb-6 flex items-center justify-center",children:s.jsx("svg",{className:"w-full h-full text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),s.jsx("h3",{className:"text-xl font-semibold text-gray-300 mb-2",children:"Cha c phiu sa cha no!"}),s.jsx("p",{className:"text-gray-500 mb-6",children:"Hy to phiu u tin  qun l dch v sa cha"}),s.jsx("button",{onClick:t,className:"px-6 py-3 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-xl font-medium hover:from-blue-600 hover:to-blue-700 transition-all shadow-lg shadow-blue-500/30",children:"+ To phiu mi"})]}):k.map(S=>s.jsxs("div",{onClick:()=>r(S),className:"bg-[#1e1e2d] rounded-xl border border-gray-800 overflow-hidden active:scale-[0.99] transition-transform",children:[s.jsxs("div",{className:"p-3",children:[s.jsxs("div",{className:"flex items-start justify-between mb-2",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"text-[#009ef7] font-mono text-sm font-semibold mb-0.5",children:qi(S.id)}),s.jsx("div",{className:"text-xs text-gray-500",children:Fn(S.creationDate)})]}),s.jsxs("div",{className:`inline-flex items-center gap-1.5 px-3 py-1 rounded-lg border text-xs font-semibold ${y(S.status)}`,children:[N(S.status),S.status]})]}),s.jsxs("div",{className:"space-y-2 mb-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-lg",children:""}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"text-white font-medium text-sm truncate",children:S.customerName}),s.jsx("div",{className:"text-gray-400 text-xs",children:S.customerPhone})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-lg",children:""}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"text-gray-300 text-sm truncate",children:S.vehicleModel}),s.jsx("div",{className:"text-[#009ef7] text-xs font-mono",children:S.licensePlate})]})]})]}),s.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-gray-800",children:[s.jsxs("div",{className:"text-xs text-gray-400",children:["KTV:"," ",s.jsx("span",{className:"text-gray-300",children:S.technicianName||"Cha phn"})]}),s.jsx("div",{className:"text-white font-bold text-base",children:Te(S.total||0)})]})]}),s.jsxs("div",{className:"grid grid-cols-4 border-t border-gray-800",children:[s.jsxs("button",{onClick:O=>{O.stopPropagation(),a(S.customerPhone||"")},className:"flex items-center justify-center gap-1 py-3 bg-green-500/10 hover:bg-green-500/20 transition-colors border-r border-gray-800",children:[s.jsx(LB,{className:"w-4 h-4 text-green-500"}),s.jsx("span",{className:"text-[11px] font-semibold text-green-500",children:"Gi"})]}),s.jsxs("button",{onClick:O=>{O.stopPropagation(),i(S)},className:"flex items-center justify-center gap-1 py-3 bg-purple-500/10 hover:bg-purple-500/20 transition-colors border-r border-gray-800",children:[s.jsx(iu,{className:"w-4 h-4 text-purple-500"}),s.jsx("span",{className:"text-[11px] font-semibold text-purple-500",children:"In"})]}),s.jsxs("button",{onClick:O=>{O.stopPropagation(),r(S)},className:"flex items-center justify-center gap-1 py-3 bg-[#009ef7]/10 hover:bg-[#009ef7]/20 transition-colors border-r border-gray-800",children:[s.jsx(MB,{className:"w-4 h-4 text-[#009ef7]"}),s.jsx("span",{className:"text-[11px] font-semibold text-[#009ef7]",children:"Sa"})]}),s.jsxs("button",{onClick:O=>{O.stopPropagation(),n(S)},className:"flex items-center justify-center gap-1 py-3 bg-[#f1416c]/10 hover:bg-[#f1416c]/20 transition-colors",children:[s.jsx(db,{className:"w-4 h-4 text-[#f1416c]"}),s.jsx("span",{className:"text-[11px] font-semibold text-[#f1416c]",children:"Xa"})]})]})]},S.id))}),s.jsx("button",{onClick:t,className:"fixed bottom-20 right-4 w-12 h-12 bg-gradient-to-br from-[#009ef7] to-[#0077b6] rounded-full shadow-xl shadow-[#009ef7]/50 flex items-center justify-center hover:from-[#0077b6] hover:to-[#005a8a] transition-all z-[60] active:scale-95","aria-label":"To phiu mi",children:s.jsx(oc,{className:"w-5 h-5 text-white"})}),x&&s.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-end md:items-center md:justify-center",children:s.jsxs("div",{className:"bg-[#1e1e2d] rounded-t-3xl md:rounded-2xl w-full md:max-w-md p-6 space-y-4 animate-slide-up",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-white",children:"B lc nng cao"}),s.jsx("button",{onClick:()=>b(!1),className:"text-gray-500 hover:text-gray-300",children:""})]}),s.jsx("div",{className:"text-gray-400 text-sm text-center py-8",children:"Cc ty chn lc s c b sung..."})]})}),s.jsx("style",{children:`
        .scrollbar-hide::-webkit-scrollbar {
          display: none;
        }
        .scrollbar-hide {
          -ms-overflow-style: none;
          scrollbar-width: none;
        }
        @keyframes slide-up {
          from {
            transform: translateY(100%);
          }
          to {
            transform: translateY(0);
          }
        }
        .animate-slide-up {
          animation: slide-up 0.3s ease-out;
        }
      `})]})}function SEe(){var Gr,Ne,Me,Re,Ce,Ue;const{parts:e,customers:t,employees:r,upsertCustomer:n,setCashTransactions:a,setPaymentSources:i,paymentSources:o,currentBranchId:l,workOrders:d,setWorkOrders:c}=Ua(),{data:u,isLoading:x}=lh(),{data:b,isLoading:g}=$6(),{data:k,isLoading:y}=hK(),[N,S]=T.useState([]);T.useEffect(()=>{(async()=>{const{data:qe,error:et}=await It.from("customers").select("*").order("created_at",{ascending:!1});!et&&qe&&S(qe)})()},[]);const O=u||e,A=N.length>0?N:t,P=b||r,q=k||d;T.useEffect(()=>{console.log("[ServiceManager] fetchedWorkOrders:",k==null?void 0:k.length,k),console.log("[ServiceManager] workOrders from context:",d==null?void 0:d.length,d),k&&c(k)},[k,c]);const[W,R]=T.useState(!1),[U,L]=T.useState(!1),[Q,H]=T.useState(!1),[G,Z]=T.useState(void 0),[te,se]=T.useState(""),[ue,ae]=T.useState("all"),[pe,ve]=T.useState("all"),[Pe,xe]=T.useState(null),[B,re]=T.useState(null),[J,ie]=T.useState(!1),[Y,_e]=T.useState(null),[me,ne]=T.useState(null),[je,De]=T.useState(!1),[ce,Ee]=T.useState(""),[be,ge]=T.useState(null),[Qe,Ye]=T.useState(!1),[at,Je]=T.useState({id:"",name:"",description:"",duration:30,laborCost:0,parts:[]}),[ct,Ke]=T.useState(null),[zt,Ft]=T.useState("");T.useEffect(()=>{if(!Pe)return;const de=qe=>{qe.target.closest(".service-row-menu")||xe(null)};return document.addEventListener("mousedown",de),()=>document.removeEventListener("mousedown",de)},[Pe]);const fr=[{id:"oil-change",name:"Thay du ng c",description:"Thay du v lc du ng c",duration:30,laborCost:3e5,parts:[{name:"Du ng c 10W40",quantity:1,price:12e4,unit:"chai"},{name:"Lc du",quantity:1,price:3e4,unit:"ci"}]},{id:"brake-service",name:"Sa phanh",description:"Thay m phanh v bo dng h thng phanh",duration:45,laborCost:505e3,parts:[{name:"M phanh trc",quantity:2,price:16e4,unit:"ci"},{name:"M phanh sau",quantity:2,price:12e4,unit:"ci"},{name:"Du phanh",quantity:1,price:25e3,unit:"chai"}]},{id:"cleaning",name:"V sinh kim phun",description:"V sinh v hiu chnh kim phun xng",duration:60,laborCost:15e4,parts:[{name:"Dung dch v sinh kim phun",quantity:1,price:5e4,unit:"chai"}]},{id:"oil-box",name:"Thay nht hp s",description:"Thay du hp s v kim tra",duration:25,laborCost:14e4,parts:[{name:"Du hp s",quantity:1,price:6e4,unit:"chai"}]},{id:"bug-check",name:"Thay bugi",description:"Thay bugi v kim tra h thng nh la",duration:20,laborCost:85e3,parts:[{name:"Bugi",quantity:1,price:35e3,unit:"ci"}]},{id:"full-maintenance",name:"Bo dng tng qut",description:"Bo dng nh k y ",duration:90,laborCost:57e4,parts:[{name:"Du ng c 10W40",quantity:1,price:12e4,unit:"chai"},{name:"Lc du",quantity:1,price:3e4,unit:"ci"},{name:"Lc khng kh",quantity:1,price:25e3,unit:"ci"},{name:"Bugi",quantity:1,price:35e3,unit:"ci"},{name:"Du hp s",quantity:1,price:6e4,unit:"chai"}]}],hr=T.useMemo(()=>{let de=q.filter(qe=>!qe.refunded);return console.log("[ServiceManager] Total displayWorkOrders:",q.length),console.log("[ServiceManager] Work orders status:",q.map(qe=>({id:qe.id,status:qe.status}))),pe==="delivered"?de=de.filter(qe=>qe.status==="Tr my"):(de=de.filter(qe=>qe.status!=="Tr my"),pe==="pending"?de=de.filter(qe=>qe.status==="Tip nhn"):pe==="inProgress"?de=de.filter(qe=>qe.status==="ang sa"):pe==="done"&&(de=de.filter(qe=>qe.status===" sa xong"))),console.log("[ServiceManager] After tab filter:",pe,de.length),te&&(de=de.filter(qe=>{var et,tt;return qe.customerName.toLowerCase().includes(te.toLowerCase())||((et=qe.vehicleModel)==null?void 0:et.toLowerCase().includes(te.toLowerCase()))||((tt=qe.licensePlate)==null?void 0:tt.toLowerCase().includes(te.toLowerCase()))})),de.sort((qe,et)=>{const tt=qe.creationDate||qe.creationdate,Ae=et.creationDate||et.creationdate;return!tt||!Ae?0:new Date(Ae).getTime()-new Date(tt).getTime()})},[q,pe,te]),sr=T.useMemo(()=>{const de=q.filter(mt=>mt.status==="Tip nhn").length,qe=q.filter(mt=>mt.status==="ang sa").length,et=q.filter(mt=>mt.status===" sa xong").length,tt=q.filter(mt=>mt.status==="Tr my").length,Ae=q.filter(mt=>mt.paymentStatus==="paid"&&new Date(mt.creationDate).toDateString()===new Date().toDateString()).reduce((mt,Tt)=>mt+Tt.total,0),Xe=q.filter(mt=>mt.paymentStatus==="paid"&&new Date(mt.creationDate).toDateString()===new Date().toDateString()).reduce((mt,Tt)=>{var Rt;return mt+(Tt.total-(((Rt=Tt.partsUsed)==null?void 0:Rt.reduce((Yt,or)=>Yt+or.price*or.quantity,0))||0))},0);return{pending:de,inProgress:qe,done:et,delivered:tt,todayRevenue:Ae,todayProfit:Xe}},[q]),Sr=sr.pending+sr.inProgress+sr.done,tr=sr.pending+sr.inProgress,Jt=Sr?Math.round(tr/Sr*100):0,Kt=Sr?Math.round(sr.done/Sr*100):0,ar=sr.todayRevenue?Math.round(sr.todayProfit/sr.todayRevenue*100):0,vr={slate:"bg-slate-100 text-slate-600 dark:bg-slate-900/30 dark:text-slate-200",blue:"bg-blue-100 text-blue-600 dark:bg-blue-900/30 dark:text-blue-300",orange:"bg-orange-100 text-orange-600 dark:bg-orange-900/30 dark:text-orange-300",green:"bg-emerald-100 text-emerald-600 dark:bg-emerald-900/30 dark:text-emerald-300",purple:"bg-purple-100 text-purple-600 dark:bg-purple-900/30 dark:text-purple-300"},rr="px-4 py-2 bg-slate-50 dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-sm text-slate-700 dark:text-slate-200",ft=T.useMemo(()=>[{key:"all",label:"Tt c",color:"slate",count:q.filter(de=>de.status!=="Tr my"&&!de.refunded).length},{key:"pending",label:"Tip nhn",color:"blue",count:sr.pending},{key:"inProgress",label:"ang sa",color:"orange",count:sr.inProgress},{key:"done",label:" sa xong",color:"green",count:sr.done},{key:"delivered",label:" tr my",color:"purple",count:sr.delivered}],[q,sr.delivered,sr.done,sr.inProgress,sr.pending]),br=[{key:"pending",label:"Tip nhn",value:sr.pending,subtitle:"Ch phn cng",accent:"from-sky-50 via-sky-50 to-white dark:from-sky-900/30 dark:via-sky-900/10",dot:"bg-sky-500"},{key:"inProgress",label:"ang sa",value:sr.inProgress,subtitle:"ang thi cng",accent:"from-amber-50 via-amber-50 to-white dark:from-amber-900/30 dark:via-amber-900/10",dot:"bg-amber-500"},{key:"done",label:" sa xong",value:sr.done,subtitle:"Ch giao khch",accent:"from-emerald-50 via-emerald-50 to-white dark:from-emerald-900/30 dark:via-emerald-900/10",dot:"bg-emerald-500"},{key:"delivered",label:"Tr my",value:sr.delivered,subtitle:"Hon tt",accent:"from-purple-50 via-purple-50 to-white dark:from-purple-900/30 dark:via-purple-900/10",dot:"bg-purple-500"}],yr=de=>{Z(de||{id:"",customerName:"",customerPhone:"",vehicleModel:"",licensePlate:"",issueDescription:"",technicianName:"",status:"Tip nhn",laborCost:0,discount:0,partsUsed:[],total:0,branchId:l,paymentStatus:"unpaid",creationDate:new Date().toISOString()}),R(!0)},gr=de=>{const qe={id:"",customerName:"",customerPhone:"",vehicleModel:"",licensePlate:"",issueDescription:de.description,laborCost:de.laborCost,partsUsed:de.parts.map((et,tt)=>({partId:`TEMPLATE-${tt}`,partName:et.name,sku:"",quantity:et.quantity,price:et.price})),status:"Tip nhn",paymentStatus:"unpaid",discount:0,total:0,creationDate:new Date().toISOString(),branchId:l,technicianName:""};Z(qe),H(!1),R(!0)},ot=()=>{ge(null),Je({id:"",name:"",description:"",duration:30,laborCost:0,parts:[]}),Ye(!0)},Lt=de=>{ge(de),Je({id:de.id,name:de.name,description:de.description,duration:de.duration,laborCost:de.laborCost,parts:[...de.parts]}),Ye(!0)},ir=()=>{if(!at.name.trim()){Ze.error("Vui lng nhp tn mu");return}if(at.laborCost<=0){Ze.error("Vui lng nhp chi ph cng");return}be?Ze.success(` cp nht mu "${at.name}"`):Ze.success(` to mu "${at.name}"`),Ye(!1),ge(null)},Mt=()=>{Je({...at,parts:[...at.parts,{name:"",quantity:1,price:0,unit:"ci"}]})},Ge=de=>{Je({...at,parts:at.parts.filter((qe,et)=>et!==de)})},At=(de,qe,et)=>{const tt=[...at.parts];tt[de]={...tt[de],[qe]:et},Je({...at,parts:tt}),qe==="name"&&(Ke(de),Ft(et))},ur=(de,qe)=>{var tt;const et=[...at.parts];et[de]={...et[de],name:qe.name,price:((tt=qe.retailPrice)==null?void 0:tt[l||""])||0,unit:"ci"},Je({...at,parts:et}),Ke(null),Ft("")},Dr=T.useMemo(()=>{if(ct===null)return[];const de=u||[];console.log("[DEBUG] fetchedParts available:",de.length);const qe=zt.toLowerCase();if(!qe){const tt=de.slice(0,5);return console.log("[DEBUG] No search term, showing first 5 parts:",tt.map(Ae=>{var Xe,mt;return{name:Ae.name,stock:(Xe=Ae.stock)==null?void 0:Xe[l||""],price:(mt=Ae.retailPrice)==null?void 0:mt[l||""]}})),tt}const et=de.filter(tt=>tt.name.toLowerCase().includes(qe));return console.log("[DEBUG] Search term:",qe,"Found:",et.length,"Sample:",et.slice(0,2).map(tt=>{var Ae,Xe;return{name:tt.name,stock:(Ae=tt.stock)==null?void 0:Ae[l||""],price:(Xe=tt.retailPrice)==null?void 0:Xe[l||""]}})),et.slice(0,5)},[u,zt,ct]),jr=async de=>{re(de);try{const{data:qe,error:et}=await It.from("store_settings").select("*").limit(1).single();!et&&qe&&_e(qe)}catch(qe){console.error("Error loading store settings:",qe)}ie(!0)},Xt=()=>{setTimeout(()=>{hk("work-order-receipt")},100)},{mutateAsync:Wr}=NEe();M5(),BV();const cr=async de=>{var qe,et;try{if(console.log("[handleMobileSave] Mobile Work Order Data:",de),!((qe=de.customer)!=null&&qe.name)){Ze.error("Vui lng nhp tn khch hng");return}if(!((et=de.customer)!=null&&et.phone)){Ze.error("Vui lng nhp s in thoi");return}const{status:tt,customer:Ae,vehicle:Xe,issueDescription:mt,technicianId:Tt,parts:Rt=[],additionalServices:Yt=[],laborCost:or=0,discount:Cr=0,total:Et=0,depositAmount:dn=0,paymentMethod:Zr,paymentType:ia,totalPaid:ta=0,remainingAmount:Jr=0}=de;let Fr="unpaid";ta>=Et?Fr="paid":ta>0&&(Fr="partial");const rn=P.find(Rs=>Rs.id===Tt),ga=(rn==null?void 0:rn.name)||"";if(G!=null&&G.id){const Rs=await updateWorkOrderAtomicAsync({id:G.id,customerName:Ae.name,customerPhone:Ae.phone,vehicleModel:(Xe==null?void 0:Xe.model)||"",licensePlate:(Xe==null?void 0:Xe.licensePlate)||"",issueDescription:mt||"",technicianName:ga,status:tt,laborCost:or,discount:Cr,partsUsed:Rt,additionalServices:Yt.length>0?Yt:void 0,total:Et,branchId:l,paymentStatus:Fr,paymentMethod:Zr,depositAmount:dn>0?dn:void 0,additionalPayment:ta>dn?ta-dn:void 0,totalPaid:ta>0?ta:void 0,remainingAmount:Jr}),ra={...G,customerName:Ae.name,customerPhone:Ae.phone,vehicleModel:(Xe==null?void 0:Xe.model)||"",licensePlate:(Xe==null?void 0:Xe.licensePlate)||"",issueDescription:mt||"",technicianName:ga,status:tt,laborCost:or,discount:Cr,partsUsed:Rt,additionalServices:Yt.length>0?Yt:void 0,total:Et,paymentStatus:Fr,paymentMethod:Zr,totalPaid:ta>0?ta:void 0,remainingAmount:Jr};tt==="Tr my"&&Jr>0&&await createCustomerDebtIfNeeded(ra,Jr,Et,ta),Ze.success("Cp nht phiu sa cha thnh cng!")}else{const Rs=`${(Y==null?void 0:Y.work_order_prefix)||"SC"}-${Date.now()}`,ra=await createWorkOrderAtomicAsync({id:Rs,customerName:Ae.name,customerPhone:Ae.phone,vehicleModel:(Xe==null?void 0:Xe.model)||"",licensePlate:(Xe==null?void 0:Xe.licensePlate)||"",issueDescription:mt||"",technicianName:ga,status:tt,laborCost:or,discount:Cr,partsUsed:Rt,additionalServices:Yt.length>0?Yt:void 0,total:Et,branchId:l,paymentStatus:Fr,paymentMethod:Zr,depositAmount:dn>0?dn:void 0,additionalPayment:ta>dn?ta-dn:void 0,totalPaid:ta>0?ta:void 0,remainingAmount:Jr,creationDate:new Date().toISOString()}),Gn={id:Rs,customerName:Ae.name,customerPhone:Ae.phone,vehicleModel:(Xe==null?void 0:Xe.model)||"",licensePlate:(Xe==null?void 0:Xe.licensePlate)||"",issueDescription:mt||"",technicianName:ga,status:tt,laborCost:or,discount:Cr,partsUsed:Rt,additionalServices:Yt.length>0?Yt:void 0,total:Et,branchId:l,depositAmount:dn>0?dn:void 0,paymentStatus:Fr,paymentMethod:Zr,totalPaid:ta>0?ta:void 0,remainingAmount:Jr,creationDate:new Date().toISOString()};tt==="Tr my"&&Jr>0&&await createCustomerDebtIfNeeded(Gn,Jr,Et,ta),Ze.success("To phiu sa cha thnh cng!")}L(!1),Z(void 0)}catch(tt){console.error("[handleMobileSave] Error:",tt),Ze.error(`Li: ${tt.message||"Khng th lu phiu sa cha"}`)}},pr=de=>{ne(de),Ee(""),De(!0)},Rr=async()=>{if(me){if(!ce.trim()){Ze.error("Vui lng nhp l do hy");return}try{console.log("[handleConfirmRefund] Starting refund for order:",me.id),console.log("[handleConfirmRefund] Refund reason:",ce);const de=await Wr({orderId:me.id,refundReason:ce});if(console.log("[handleConfirmRefund] Refund result:",de),!de||de.error){console.error("[handleConfirmRefund] Refund failed:",de),Ze.error("Khng th hy n sa cha");return}if(de&&"refund_transaction_id"in de&&"refundAmount"in de&&de.refund_transaction_id&&de.refundAmount){const qe=de.refundAmount;a(et=>[...et,{id:de.refund_transaction_id,type:"refund",category:"refund",amount:-qe,date:new Date().toISOString(),description:`Hon tin hy phiu #${(qi(me.id,Y==null?void 0:Y.work_order_prefix)||"").split("-").pop()} - ${ce}`,branchId:l,paymentSource:me.paymentMethod,reference:me.id}]),me.paymentMethod&&i(et=>et.map(tt=>tt.id===me.paymentMethod?{...tt,balance:{...tt.balance,[l]:(tt.balance[l]||0)-qe}}:tt))}c(qe=>qe.map(et=>et.id===me.id?{...et,refunded:!0,status:" hy"}:et)),Ze.success(" hy n sa cha thnh cng"),De(!1),ne(null),Ee("")}catch(de){console.error("Error refunding work order:",de),Ze.error("Li khi hy n sa cha")}}},Ir=de=>{de&&(window.location.href=`tel:${de}`)},Nn=async de=>{if(confirm(`Xc nhn xa phiu ${qi(de.id)}?`))try{const{error:qe}=await It.from("work_orders").delete().eq("id",de.id);if(qe)throw qe;c(et=>et.filter(tt=>tt.id!==de.id)),Ze.success(" xa phiu sa cha")}catch(qe){console.error("Error deleting work order:",qe),Ze.error("Li khi xa phiu sa cha")}};return window.innerWidth<768?s.jsxs(s.Fragment,{children:[s.jsx(_Ee,{workOrders:q||[],onCreateWorkOrder:()=>{Z(void 0),L(!0)},onEditWorkOrder:de=>{Z(de),L(!0)},onDeleteWorkOrder:Nn,onCallCustomer:Ir,onPrintWorkOrder:jr,currentBranchId:l}),U&&s.jsx(oR,{isOpen:U,onClose:()=>{L(!1),Z(void 0)},onSave:cr,workOrder:G,customers:A,parts:u||[],employees:P,currentBranchId:l,upsertCustomer:n}),J&&B&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[200] p-2",children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl w-full max-w-full max-h-[95vh] flex flex-col",children:[s.jsxs("div",{className:"bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 px-4 py-3 flex items-center justify-between rounded-t-xl flex-shrink-0",children:[s.jsx("h2",{className:"text-base font-bold text-slate-900 dark:text-slate-100",children:"Xem trc phiu"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("button",{onClick:async()=>{try{Ze.info("ang to hnh nh...");const de=(await km(async()=>{const{default:Xe}=await import("./html2canvas.esm-QH1iLAAe.js");return{default:Xe}},[])).default,qe=document.getElementById("mobile-print-preview-content");if(!qe){Ze.error("Khng tm thy ni dung phiu!");return}const et=await de(qe,{scale:2,backgroundColor:"#ffffff",useCORS:!0,logging:!1}),tt=await new Promise(Xe=>{et.toBlob(mt=>Xe(mt),"image/png",1)}),Ae=`Phieu_${qi(B.id,Y==null?void 0:Y.work_order_prefix)}.png`;if(navigator.share&&navigator.canShare){const mt={files:[new File([tt],Ae,{type:"image/png"})],title:`Phiu sa cha - ${qi(B.id,Y==null?void 0:Y.work_order_prefix)}`};if(navigator.canShare(mt))await navigator.share(mt),Ze.success("Chia s thnh cng!");else{const Tt=URL.createObjectURL(tt),Rt=document.createElement("a");Rt.href=Tt,Rt.download=Ae,Rt.click(),URL.revokeObjectURL(Tt),Ze.success(" ti hnh nh!")}}else{const Xe=URL.createObjectURL(tt),mt=document.createElement("a");mt.href=Xe,mt.download=Ae,mt.click(),URL.revokeObjectURL(Xe),Ze.success(" ti hnh nh!")}}catch(de){console.error("Share failed:",de),Ze.error("Khng th chia s. Vui lng th li!")}},className:"px-3 py-1.5 bg-green-600 hover:bg-green-700 text-white rounded-lg flex items-center gap-1.5 transition text-sm",children:[s.jsx(fee,{className:"w-4 h-4"}),"Chia s"]}),s.jsxs("button",{onClick:Xt,className:"px-3 py-1.5 bg-blue-600 hover:bg-blue-700 text-white rounded-lg flex items-center gap-1.5 transition text-sm",children:[s.jsx(iu,{className:"w-4 h-4"}),"In"]}),s.jsx("button",{onClick:()=>{ie(!1),re(null)},className:"p-1.5 text-slate-400 hover:text-slate-600 dark:hover:text-slate-300 bg-slate-100 dark:bg-slate-700 rounded-lg","aria-label":"ng",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"w-5 h-5",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]})]}),s.jsx("div",{className:"flex-1 overflow-y-auto p-3 bg-slate-100 dark:bg-slate-900",children:s.jsxs("div",{id:"mobile-print-preview-content",className:"bg-white shadow-lg mx-auto",style:{maxWidth:"100%",color:"#000",padding:"4mm"},children:[s.jsxs("div",{style:{display:"flex",gap:"3mm",marginBottom:"3mm",borderBottom:"2px solid #3b82f6",paddingBottom:"2mm",alignItems:"flex-start"},children:[(Y==null?void 0:Y.logo_url)&&s.jsx("div",{style:{flexShrink:0},children:s.jsx("img",{src:Y.logo_url,alt:"Logo",style:{height:"15mm",width:"auto",objectFit:"contain"},crossOrigin:"anonymous"})}),s.jsxs("div",{style:{flex:1,fontSize:"9pt"},children:[s.jsx("div",{style:{fontWeight:"bold",fontSize:"12pt",color:"#1e40af",marginBottom:"1mm"},children:(Y==null?void 0:Y.store_name)||"Nhn Lm SmartCare"}),s.jsxs("div",{style:{color:"#000"},children:[""," ",(Y==null?void 0:Y.address)||"p Ph Li B, X Long Ph Thun, ng Thp"]}),s.jsxs("div",{style:{color:"#000"},children:[" ",(Y==null?void 0:Y.phone)||"0947.747.907"]})]})]}),s.jsxs("div",{style:{textAlign:"center",marginBottom:"3mm"},children:[s.jsx("h1",{style:{fontSize:"14pt",fontWeight:"bold",margin:"0",color:"#1e40af"},children:"PHIU DCH V SA CHA"}),s.jsxs("div",{style:{fontSize:"9pt",color:"#666",marginTop:"1mm"},children:["M:"," ",qi(B.id,Y==null?void 0:Y.work_order_prefix)]}),s.jsx("div",{style:{fontSize:"8pt",color:"#666"},children:new Date(B.creationDate).toLocaleString("vi-VN")})]}),s.jsxs("div",{style:{border:"1px solid #ddd",padding:"2mm",marginBottom:"2mm",borderRadius:"2mm",backgroundColor:"#f8fafc",fontSize:"9pt"},children:[s.jsxs("div",{children:[s.jsx("strong",{children:"Khch hng:"})," ",B.customerName," -"," ",B.customerPhone]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Xe:"})," ",B.vehicleModel," -"," ",s.jsx("span",{style:{color:"#3b82f6"},children:B.licensePlate})]})]}),B.issueDescription&&s.jsxs("div",{style:{border:"1px solid #ddd",padding:"2mm",marginBottom:"2mm",borderRadius:"2mm",fontSize:"9pt"},children:[s.jsx("strong",{children:"M t s c:"})," ",B.issueDescription]}),B.partsUsed&&B.partsUsed.length>0&&s.jsxs("div",{style:{marginBottom:"2mm"},children:[s.jsx("p",{style:{fontWeight:"bold",margin:"0 0 1mm 0",fontSize:"10pt"},children:"Ph tng:"}),s.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",border:"1px solid #ddd",fontSize:"9pt"},children:[s.jsx("thead",{children:s.jsxs("tr",{style:{backgroundColor:"#f5f5f5"},children:[s.jsx("th",{style:{border:"1px solid #ddd",padding:"1.5mm",textAlign:"left"},children:"Tn"}),s.jsx("th",{style:{border:"1px solid #ddd",padding:"1.5mm",textAlign:"center",width:"12%"},children:"SL"}),s.jsx("th",{style:{border:"1px solid #ddd",padding:"1.5mm",textAlign:"right",width:"28%"},children:"Thnh tin"})]})}),s.jsx("tbody",{children:B.partsUsed.map((de,qe)=>s.jsxs("tr",{children:[s.jsx("td",{style:{border:"1px solid #ddd",padding:"1.5mm"},children:de.partName}),s.jsx("td",{style:{border:"1px solid #ddd",padding:"1.5mm",textAlign:"center"},children:de.quantity}),s.jsx("td",{style:{border:"1px solid #ddd",padding:"1.5mm",textAlign:"right",fontWeight:"bold"},children:Te(de.price*de.quantity)})]},qe))})]})]}),B.additionalServices&&B.additionalServices.length>0&&s.jsxs("div",{style:{marginBottom:"2mm",fontSize:"9pt"},children:[s.jsx("p",{style:{fontWeight:"bold",margin:"0 0 1mm 0",fontSize:"10pt"},children:"Dch v b sung:"}),B.additionalServices.map((de,qe)=>s.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[s.jsx("span",{children:de.description}),s.jsx("span",{style:{fontWeight:"bold"},children:Te(de.price*(de.quantity||1))})]},qe))]}),s.jsxs("div",{style:{border:"1px solid #ddd",padding:"2mm",borderRadius:"2mm",backgroundColor:"#f9f9f9",fontSize:"9pt"},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"1mm"},children:[s.jsx("span",{children:"Tin ph tng:"}),s.jsx("span",{children:Te(((Gr=B.partsUsed)==null?void 0:Gr.reduce((de,qe)=>de+qe.price*qe.quantity,0))||0)})]}),s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"1mm"},children:[s.jsx("span",{children:"Ph dch v:"}),s.jsx("span",{children:Te(B.laborCost||0)})]}),B.additionalServices&&B.additionalServices.length>0&&s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"1mm"},children:[s.jsx("span",{children:"Gi cng/t hng:"}),s.jsx("span",{children:Te(B.additionalServices.reduce((de,qe)=>de+(qe.price||0)*(qe.quantity||1),0))})]}),B.discount!=null&&B.discount>0&&s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"1mm",color:"#e74c3c"},children:[s.jsx("span",{children:"Gim gi:"}),s.jsxs("span",{children:["-",Te(B.discount)]})]}),s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",paddingTop:"2mm",borderTop:"2px solid #3b82f6",fontSize:"12pt",fontWeight:"bold",color:"#1e40af"},children:[s.jsx("span",{children:"TNG CNG:"}),s.jsx("span",{children:Te(B.total||0)})]}),B.depositAmount!=null&&B.depositAmount>0&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"1mm",color:"#16a34a"},children:[s.jsx("span",{children:" t cc:"}),s.jsx("span",{children:Te(B.depositAmount)})]}),s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontWeight:"bold",color:"#dc2626"},children:[s.jsx("span",{children:"Cn li:"}),s.jsx("span",{children:Te(B.remainingAmount||B.total-B.depositAmount)})]})]})]}),(Y==null?void 0:Y.bank_name)&&s.jsx("div",{style:{marginTop:"3mm",border:"1px solid #ddd",padding:"2mm",borderRadius:"2mm",backgroundColor:"#f0f9ff",fontSize:"9pt"},children:s.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"3mm"},children:[s.jsxs("div",{style:{flex:1},children:[s.jsx("div",{style:{fontWeight:"bold",marginBottom:"1mm",color:"#1e40af"},children:" Thng tin thanh ton"}),s.jsxs("div",{style:{color:"#000"},children:["Ngn hng: ",Y.bank_name]}),Y.bank_account_number&&s.jsxs("div",{style:{color:"#000"},children:["STK:"," ",s.jsx("strong",{children:Y.bank_account_number})]}),Y.bank_account_holder&&s.jsxs("div",{style:{color:"#000"},children:["Ch TK: ",Y.bank_account_holder]}),Y.bank_branch&&s.jsxs("div",{style:{color:"#666",fontSize:"8pt"},children:["Chi nhnh: ",Y.bank_branch]})]}),Y.bank_qr_url&&s.jsx("div",{style:{flexShrink:0},children:s.jsx("img",{src:Y.bank_qr_url,alt:"QR Banking",style:{height:"20mm",width:"20mm",objectFit:"contain"},crossOrigin:"anonymous"})})]})}),s.jsxs("div",{style:{marginTop:"3mm",padding:"2mm",backgroundColor:"#fff9e6",border:"1px solid #ffd700",borderRadius:"2mm",fontSize:"8pt",textAlign:"center"},children:[s.jsx("p",{style:{margin:"0",fontStyle:"italic"},children:"Cm n qu khch  s dng dch v!"}),s.jsx("p",{style:{margin:"1mm 0 0 0",fontStyle:"italic"},children:"Vui lng gi phiu ny  i chiu khi nhn xe"})]}),s.jsxs("div",{style:{marginTop:"2mm",fontSize:"9pt",textAlign:"right",color:"#666"},children:["KTV: ",B.technicianName||"Cha phn cng"]})]})})]})})]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid gap-4 xl:grid-cols-[2fr,1fr]",children:[s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl border border-slate-200 dark:border-slate-700 p-6",children:[s.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-400",children:"Phiu cn x l"}),s.jsx("p",{className:"text-3xl font-bold text-slate-900 dark:text-slate-100",children:tr}),s.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Chim ",Jt,"% ca ",Sr||0," phiu ang m"]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-400",children:"Hon thnh"}),s.jsxs("p",{className:"text-2xl font-semibold text-emerald-600 dark:text-emerald-400",children:[Kt,"%"]}),s.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:[sr.done," phiu ch giao"]})]})]}),s.jsx("div",{className:"mt-6 grid gap-3 sm:grid-cols-2 lg:grid-cols-4",children:br.map(de=>s.jsx("button",{onClick:()=>ve(pe===de.key?"all":de.key),className:`text-left rounded-xl border p-4 transition focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500/50 ${pe===de.key?"border-blue-500 bg-blue-50/60 dark:bg-blue-900/20":"border-slate-200 dark:border-slate-700"}`,children:s.jsxs("div",{className:`rounded-lg bg-gradient-to-br ${de.accent} p-3`,children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500 dark:text-slate-400",children:de.label}),s.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-slate-100",children:de.value})]}),s.jsx("span",{className:`h-2.5 w-2.5 rounded-full ${de.dot}`})]}),s.jsx("p",{className:"mt-2 text-xs text-slate-500 dark:text-slate-400",children:de.subtitle})]})},de.key))})]}),s.jsxs("div",{className:"grid gap-4",children:[s.jsxs("div",{className:"rounded-2xl bg-gradient-to-br from-blue-500 via-blue-600 to-indigo-600 p-6 text-white shadow-lg",children:[s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-white/80",children:"Doanh thu hm nay"}),s.jsx("p",{className:"mt-3 text-3xl font-semibold",children:Te(sr.todayRevenue)})]}),s.jsx(Fm,{className:"w-10 h-10 text-white/80"})]}),s.jsx("p",{className:"mt-4 text-sm text-white/80",children:"Bao gm cc phiu  thanh ton trong ngy"})]}),s.jsxs("div",{className:"rounded-2xl bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 p-6",children:[s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-400",children:"Li nhun hm nay"}),s.jsx("p",{className:"mt-3 text-3xl font-semibold text-slate-900 dark:text-slate-100",children:Te(sr.todayProfit)})]}),s.jsx(Y1,{className:"w-10 h-10 text-blue-500"})]}),s.jsxs("div",{className:"mt-4 flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-slate-500 dark:text-slate-400",children:"Bin li nhun"}),s.jsxs("span",{className:"font-semibold text-emerald-600 dark:text-emerald-400",children:[ar,"%"]})]})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-2xl p-4 flex flex-wrap items-center gap-3",children:[s.jsx("span",{className:"text-xs font-semibold uppercase tracking-wide text-slate-400",children:"Trng thi nhanh"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:ft.map(de=>s.jsxs("button",{onClick:()=>ve(pe===de.key?"all":de.key),className:`inline-flex items-center gap-2 rounded-full border px-3 py-1.5 text-sm transition ${pe===de.key?"border-blue-500 bg-blue-50 text-blue-600 dark:bg-blue-900/20":"border-slate-200 text-slate-600 hover:border-slate-300 dark:border-slate-700 dark:text-slate-300"}`,children:[s.jsx("span",{children:de.label}),s.jsx("span",{className:`text-xs font-semibold px-2 py-0.5 rounded-full ${vr[de.color]}`,children:de.count})]},de.key))})]}),s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl p-5 border border-slate-200 dark:border-slate-700 space-y-4",children:[s.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[s.jsxs("div",{className:"flex-1 min-w-[260px]",children:[s.jsx("label",{className:"text-xs font-semibold uppercase tracking-wide text-slate-400",children:"Tm kim nhanh"}),s.jsxs("div",{className:"relative mt-1",children:[s.jsx("input",{type:"text",placeholder:"M phiu, tn khch, ST, xe, bin s...",value:te,onChange:de=>se(de.target.value),className:"w-full pl-10 pr-4 py-2 bg-slate-50 dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-sm text-slate-900 dark:text-slate-100 placeholder-slate-400"}),s.jsx(nu,{className:"absolute left-3 top-2.5 w-4 h-4 text-slate-400","aria-hidden":"true"})]})]}),s.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[s.jsxs("button",{className:"px-4 py-2 bg-white text-slate-600 dark:bg-slate-900/40 dark:text-slate-100 border border-slate-200 dark:border-slate-700 rounded-lg text-sm font-medium flex items-center gap-2","aria-label":"Xem bo co",children:[s.jsx(Y1,{className:"w-4 h-4"})," Bo co"]}),s.jsxs("button",{onClick:()=>H(!0),className:"px-4 py-2 bg-purple-500 hover:bg-purple-600 text-white rounded-lg text-sm font-medium flex items-center gap-2","aria-label":"M danh sch mu sa cha",children:[s.jsx(vd,{className:"w-4 h-4"})," Mu SC"]}),s.jsxs(kd,{to:"/service-history",className:"px-4 py-2 bg-cyan-500 hover:bg-cyan-600 text-white rounded-lg text-sm font-medium flex items-center gap-2 transition-colors",children:[s.jsx(gw,{className:"w-4 h-4"})," Lch s SC"]}),s.jsxs("button",{onClick:()=>{window.innerWidth<768?L(!0):yr()},className:"px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg text-sm font-medium flex items-center gap-2","aria-label":"To phiu sa cha mi",children:[s.jsx(oc,{className:"w-4 h-4"})," Thm Phiu"]}),s.jsxs("button",{className:"px-4 py-2 bg-orange-500 hover:bg-orange-600 text-white rounded-lg text-sm font-medium flex items-center gap-2","aria-label":"Gi SMS nhc khch hng",children:[s.jsx(V7,{className:"w-4 h-4"})," SMS QH"]})]})]}),s.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[s.jsx("span",{className:"text-xs font-semibold uppercase tracking-wide text-slate-400",children:"B lc nng cao"}),s.jsxs("div",{className:"flex flex-wrap gap-2 flex-1 min-w-[240px]",children:[s.jsx("div",{className:"min-w-[160px]",children:s.jsxs("select",{className:rr,children:[s.jsx("option",{children:"Tt c ngy"}),s.jsx("option",{children:"Hm nay"}),s.jsx("option",{children:"7 ngy qua"}),s.jsx("option",{children:"30 ngy qua"})]})}),s.jsx("div",{className:"min-w-[160px]",children:s.jsxs("select",{className:rr,children:[s.jsx("option",{children:"Tt c KTV"}),s.jsx("option",{children:"KTV 1"}),s.jsx("option",{children:"KTV 2"})]})}),s.jsx("div",{className:"min-w-[160px]",children:s.jsxs("select",{className:rr,children:[s.jsx("option",{children:"Tt c thanh ton"}),s.jsx("option",{children:" thanh ton"}),s.jsx("option",{children:"Cha thanh ton"})]})})]})]})]}),s.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700/50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-2 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 w-12",children:s.jsx("input",{type:"checkbox",className:"rounded"})}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300",children:"M phiu"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300",children:"Khch hng"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300",children:"Chi tit"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300",children:"Thanh ton & trng thi"}),s.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-600 dark:text-slate-300",children:"Thao tc"})]})}),s.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700 bg-white dark:bg-slate-800",children:hr.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:6,className:"px-4 py-12 text-center text-slate-400",children:"Khng c phiu sa cha no."})}):hr.map(de=>{var Et,dn,Zr,ia,ta,Jr;const qe=((Et=de.partsUsed)==null?void 0:Et.reduce((Fr,rn)=>Fr+rn.quantity*rn.price,0))||0,et=((dn=de.additionalServices)==null?void 0:dn.reduce((Fr,rn)=>Fr+(rn.price||0)*(rn.quantity||1),0))||0,tt=de.laborCost||0,Ae=de.total||0,Xe=Ae-(de.remainingAmount||0),mt=Ae?Math.min(100,Math.round(Xe/Ae*100)):0,Tt=de.paymentStatus==="paid"?"bg-emerald-50 text-emerald-600 dark:bg-emerald-900/30 dark:text-emerald-300":"bg-amber-50 text-amber-600 dark:bg-amber-900/30 dark:text-amber-300",Rt=((Zr=de.partsUsed)==null?void 0:Zr.slice(0,2))||[],Yt=(((ia=de.partsUsed)==null?void 0:ia.length)||0)-Rt.length,or=((ta=de.additionalServices)==null?void 0:ta.slice(0,2))||[],Cr=(((Jr=de.additionalServices)==null?void 0:Jr.length)||0)-or.length;return s.jsxs("tr",{onClick:()=>yr(de),className:"bg-white dark:bg-slate-800 hover:bg-slate-50 dark:hover:bg-slate-700/30 cursor-pointer transition-colors",children:[s.jsx("td",{className:"px-2 py-4 align-top",onClick:Fr=>Fr.stopPropagation(),children:s.jsx("input",{type:"checkbox",className:"rounded"})}),s.jsx("td",{className:"px-4 py-4 align-top",children:s.jsxs("div",{className:"space-y-0.5",children:[s.jsx("div",{className:"font-mono font-bold text-blue-600 dark:text-blue-400 text-sm",children:qi(de.id,Y==null?void 0:Y.work_order_prefix)}),s.jsxs("div",{className:"text-xs text-slate-500",children:[s.jsx("span",{children:"Ngy: "}),s.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:Fn(de.creationDate,!0)})]}),s.jsxs("div",{className:"text-xs text-cyan-600 dark:text-cyan-400",children:["NV: ",de.technicianName||"Cha phn cng"]})]})}),s.jsx("td",{className:"px-4 py-4 align-top",children:s.jsxs("div",{className:"space-y-0.5",children:[s.jsx("div",{className:"font-semibold text-base text-slate-900 dark:text-slate-100",children:de.customerName}),s.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:de.customerPhone}),s.jsxs("div",{className:"text-xs text-slate-500",children:[s.jsx("span",{className:"font-medium",children:"Xe: "}),s.jsx("span",{children:de.vehicleModel||"N/A"}),de.licensePlate&&s.jsxs("span",{className:"ml-1",children:["- ",de.licensePlate]})]}),s.jsx("div",{className:"text-xs text-slate-500 italic mt-1",children:de.issueDescription||"Khng c m t"})]})}),s.jsx("td",{className:"px-4 py-4 align-top",children:s.jsxs("div",{className:"space-y-2",children:[Rt.length>0&&s.jsxs("div",{children:[s.jsx("div",{className:"text-xs font-medium text-slate-600 dark:text-slate-400 mb-0.5",children:"Ph tng"}),s.jsxs("div",{className:"space-y-0.5",children:[Rt.map((Fr,rn)=>s.jsxs("div",{className:"text-xs text-slate-700 dark:text-slate-300",children:[" ",Fr.partName," x",Fr.quantity]},rn)),Yt>0&&s.jsxs("div",{className:"text-xs text-slate-400",children:["+",Yt," hng mc khc"]})]})]}),or.length>0&&s.jsxs("div",{children:[s.jsx("div",{className:"text-xs font-medium text-slate-600 dark:text-slate-400 mb-0.5",children:"Gia cng/t hng"}),s.jsxs("div",{className:"space-y-0.5",children:[or.map((Fr,rn)=>s.jsxs("div",{className:"text-xs text-slate-700 dark:text-slate-300",children:[" ",Fr.description," x",Fr.quantity||1]},rn)),Cr>0&&s.jsxs("div",{className:"text-xs text-slate-400",children:["+",Cr," dch v khc"]})]})]}),Rt.length===0&&or.length===0&&s.jsx("div",{className:"text-xs text-slate-500 italic",children:"Cha c chi tit"})]})}),s.jsx("td",{className:"px-4 py-4 align-top",children:s.jsxs("div",{className:"space-y-3 min-w-[220px]",children:[s.jsxs("div",{className:"flex flex-wrap gap-2 text-xs",children:[tt>0&&s.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-slate-100 dark:bg-slate-700 px-2 py-0.5 text-slate-600 dark:text-slate-200",children:["DV ",Te(tt)]}),qe>0&&s.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-slate-100 dark:bg-slate-700 px-2 py-0.5 text-slate-600 dark:text-slate-200",children:["P/tng ",Te(qe)]}),et>0&&s.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-slate-100 dark:bg-slate-700 px-2 py-0.5 text-slate-600 dark:text-slate-200",children:["Cng ",Te(et)]}),de.discount&&de.discount>0&&s.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-red-50 dark:bg-red-900/30 px-2 py-0.5 text-red-600 dark:text-red-400",children:["Gim ",Te(de.discount)]})]}),Ae>0&&s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex items-center justify-between text-xs text-slate-500 dark:text-slate-400",children:[s.jsx("span",{children:" thu"}),s.jsxs("span",{className:"font-semibold text-slate-700 dark:text-slate-200",children:[Te(Math.max(0,Xe))," /"," ",Te(Ae)]})]}),s.jsx("div",{className:"h-2 w-full rounded-full bg-slate-100 dark:bg-slate-700",children:s.jsx("div",{className:`h-full rounded-full ${mt>=100?"bg-emerald-500":"bg-blue-500"}`,style:{width:`${mt}%`}})})]}),s.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-xs font-medium",children:[s.jsx(CEe,{status:de.status}),s.jsx("span",{className:`px-2 py-0.5 rounded-full ${Tt}`,children:de.paymentStatus==="paid"?" thanh ton":"Cha thanh ton"}),de.remainingAmount!==void 0&&de.remainingAmount>0&&s.jsxs("span",{className:"text-red-500",children:["Cn ",Te(de.remainingAmount)]})]})]})}),s.jsx("td",{className:"px-4 py-4 align-top",onClick:Fr=>Fr.stopPropagation(),children:s.jsx("div",{className:"flex items-center justify-end gap-2",children:s.jsxs("div",{className:"relative service-row-menu",children:[s.jsx("button",{onClick:()=>xe(Pe===de.id?null:de.id),"aria-haspopup":"menu","aria-expanded":Pe===de.id,className:"px-3 py-2 border border-slate-200 dark:border-slate-600 rounded-lg text-slate-500 hover:text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700",children:s.jsx(vS,{className:"w-4 h-4"})}),Pe===de.id&&s.jsxs("div",{className:"absolute right-0 mt-2 w-48 rounded-lg border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-800 shadow-xl z-10",children:[s.jsxs("button",{onClick:()=>{jr(de),xe(null)},className:"w-full flex items-center gap-2 px-4 py-2 text-sm text-slate-600 dark:text-slate-200 hover:bg-blue-50 dark:hover:bg-slate-700",children:[s.jsx(iu,{className:"w-4 h-4"})," In phiu"]}),s.jsxs("button",{onClick:()=>{Ir(de.customerPhone||""),xe(null)},className:"w-full flex items-center gap-2 px-4 py-2 text-sm text-slate-600 dark:text-slate-200 hover:bg-blue-50 dark:hover:bg-slate-700",children:[s.jsx(V7,{className:"w-4 h-4"})," Gi khch"]}),!de.refunded&&s.jsx("button",{onClick:()=>{pr(de),xe(null)},className:"w-full flex items-center gap-2 px-4 py-2 text-sm text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20",children:"Hy/Hon tin"})]})]})})})]},de.id)})})]})})}),Q&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"sticky top-0 bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 px-6 py-4 flex items-center justify-between",children:[s.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:"Mu sa cha thng dng"}),s.jsx("button",{onClick:()=>H(!1),className:"text-slate-400 hover:text-slate-600","aria-label":"ng",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"w-5 h-5",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsxs("div",{className:"p-6",children:[s.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-4",children:"Chn mu sa cha  t ng in thng tin vo phiu sa cha"}),s.jsx("div",{className:"grid gap-4 sm:grid-cols-2",children:fr.map(de=>s.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg p-4 hover:shadow-md transition",children:[s.jsxs("div",{className:"flex items-start justify-between mb-2",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-slate-900 dark:text-slate-100",children:de.name}),s.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:de.description}),s.jsxs("p",{className:"text-xs text-slate-400 mt-1",children:[de.duration," pht"]})]}),s.jsx("div",{className:"text-right",children:s.jsx("p",{className:"text-lg font-bold text-blue-600 dark:text-blue-400",children:Te(de.laborCost+de.parts.reduce((qe,et)=>qe+et.price*et.quantity,0))})})]}),s.jsxs("div",{className:"mt-3 pt-3 border-t border-slate-200 dark:border-slate-700",children:[s.jsx("p",{className:"text-xs font-medium text-slate-600 dark:text-slate-300 mb-2",children:"Ph tng cn thit:"}),de.parts.map((qe,et)=>s.jsxs("div",{className:"flex justify-between text-xs text-slate-500 dark:text-slate-400",children:[s.jsxs("span",{children:[qe.name," x",qe.quantity," ",qe.unit]}),s.jsx("span",{children:Te(qe.price*qe.quantity)})]},et)),s.jsxs("div",{className:"flex gap-2 mt-3",children:[s.jsx("button",{onClick:()=>gr(de),className:"flex-1 px-3 py-1.5 bg-blue-500 hover:bg-blue-600 text-white rounded text-sm",children:"p dng mu"}),s.jsx("button",{onClick:ot,className:"px-3 py-1.5 bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-200 rounded text-sm",children:"To mi"}),s.jsx("button",{onClick:()=>Lt(de),className:"px-3 py-1.5 bg-purple-50 dark:bg-purple-900/20 hover:bg-purple-100 dark:hover:bg-purple-900/30 text-purple-600 dark:text-purple-400 rounded text-sm",children:"Sa mu"})]})]})]},de.id))})]})]})}),W&&G&&s.jsx(jEe,{order:G,onClose:()=>{R(!1),Z(void 0)},onSave:de=>{if(de.id&&(G!=null&&G.id))c(qe=>qe.map(et=>et.id===de.id?de:et));else{const qe={...de,id:`${(Y==null?void 0:Y.work_order_prefix)||"SC"}-${Date.now()}`};c(et=>[...et,qe])}R(!1),Z(void 0)},parts:O,partsLoading:x,customers:A,employees:P,upsertCustomer:n,setCashTransactions:a,setPaymentSources:i,paymentSources:o,currentBranchId:l,storeSettings:Y}),s.jsx(oR,{isOpen:U,onClose:()=>{L(!1),Z(void 0)},onSave:de=>{console.log("Mobile Work Order Data:",de),L(!1),Z(void 0)},workOrder:G,customers:A,parts:u||[],employees:P||[],currentBranchId:l}),J&&B&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl w-full max-w-4xl max-h-[90vh] flex flex-col",children:[s.jsxs("div",{className:"bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 px-6 py-4 flex items-center justify-between rounded-t-xl flex-shrink-0",children:[s.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:"Xem trc phiu in"}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("button",{onClick:Xt,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg flex items-center gap-2 transition",children:[s.jsx(iu,{className:"w-4 h-4"}),"In phiu"]}),s.jsx("button",{onClick:()=>{ie(!1),re(null)},className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-300","aria-label":"ng",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"w-5 h-5",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]})]}),s.jsx("div",{className:"flex-1 overflow-y-auto p-6 bg-slate-100 dark:bg-slate-900",children:s.jsx("div",{className:"bg-white shadow-lg mx-auto",style:{width:"148mm",minHeight:"210mm",color:"#000"},children:s.jsxs("div",{style:{padding:"10mm"},children:[s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr auto 1fr",gap:"3mm",marginBottom:"4mm",alignItems:"start",borderBottom:"2px solid #3b82f6",paddingBottom:"3mm"},children:[(Y==null?void 0:Y.logo_url)&&s.jsx("div",{style:{marginRight:"4mm"},children:s.jsx("img",{src:Y.logo_url,alt:"Logo",style:{height:"18mm",width:"auto",objectFit:"contain"}})}),s.jsxs("div",{style:{fontSize:"8.5pt",lineHeight:"1.4",flex:1},children:[s.jsx("div",{style:{fontWeight:"bold",fontSize:"11pt",marginBottom:"1mm",color:"#1e40af"},children:(Y==null?void 0:Y.store_name)||"Nhn Lm SmartCare"}),s.jsxs("div",{style:{color:"#000"},children:[""," ",(Y==null?void 0:Y.address)||"p Ph Li B, X Long Ph Thun, ng Thp"]}),s.jsxs("div",{style:{color:"#000"},children:[" ",(Y==null?void 0:Y.phone)||"0947.747.907"]}),(Y==null?void 0:Y.email)&&s.jsxs("div",{style:{color:"#000"},children:[" ",Y.email]})]}),s.jsx("div",{style:{fontSize:"8pt",lineHeight:"1.4",textAlign:"right"},children:(Y==null?void 0:Y.bank_name)&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{style:{fontWeight:"bold",marginBottom:"1mm",color:"#000"},children:[" ",Y.bank_name]}),Y.bank_account_number&&s.jsxs("div",{style:{color:"#000"},children:["STK: ",Y.bank_account_number]}),Y.bank_account_holder&&s.jsx("div",{style:{color:"#000",fontSize:"7.5pt"},children:Y.bank_account_holder}),Y.bank_qr_url&&s.jsx("div",{style:{marginTop:"2mm",display:"inline-block"},children:s.jsx("img",{src:Y.bank_qr_url,alt:"QR Banking",style:{height:"15mm",width:"15mm",objectFit:"contain"}})})]})})]}),s.jsxs("div",{style:{marginBottom:"4mm"},children:[s.jsx("div",{style:{textAlign:"center",marginBottom:"2mm"},children:s.jsx("h1",{style:{fontSize:"16pt",fontWeight:"bold",margin:"0",textTransform:"uppercase",color:"#1e40af"},children:"PHIU DCH V SA CHA"})}),s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"9pt",color:"#666"},children:[s.jsx("div",{children:new Date(B.creationDate).toLocaleString("vi-VN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}),s.jsxs("div",{style:{fontWeight:"bold"},children:["M:"," ",qi(B.id,Y==null?void 0:Y.work_order_prefix)]})]})]}),s.jsxs("div",{style:{border:"1px solid #ddd",padding:"3mm",marginBottom:"3mm",borderRadius:"2mm",backgroundColor:"#f8fafc",color:"#000",fontSize:"9pt"},children:[s.jsxs("div",{style:{display:"flex",gap:"4mm",marginBottom:"1.5mm"},children:[s.jsxs("div",{style:{flex:1},children:[s.jsx("span",{style:{fontWeight:"bold"},children:"Khch hng:"})," ",B.customerName]}),s.jsxs("div",{style:{flex:"0 0 auto"},children:[s.jsx("span",{style:{fontWeight:"bold"},children:"ST:"})," ",B.customerPhone]})]}),s.jsxs("div",{style:{display:"flex",gap:"4mm"},children:[s.jsxs("div",{style:{flex:1},children:[s.jsx("span",{style:{fontWeight:"bold"},children:"Loi xe:"})," ",B.vehicleModel]}),s.jsxs("div",{style:{flex:"0 0 auto"},children:[s.jsx("span",{style:{fontWeight:"bold"},children:"Bin s:"})," ",B.licensePlate]})]})]}),s.jsx("div",{style:{border:"1px solid #ddd",padding:"4mm",marginBottom:"4mm",borderRadius:"2mm",color:"#000"},children:s.jsxs("div",{style:{display:"flex",gap:"3mm"},children:[s.jsx("div",{style:{fontWeight:"bold",minWidth:"20%",flexShrink:0},children:"M t s c:"}),s.jsx("div",{style:{flex:1,whiteSpace:"pre-wrap"},children:B.issueDescription||"Khng c m t"})]})}),B.partsUsed&&B.partsUsed.length>0&&s.jsxs("div",{style:{marginBottom:"4mm",color:"#000"},children:[s.jsx("p",{style:{fontWeight:"bold",margin:"0 0 2mm 0",fontSize:"11pt"},children:"Ph tng s dng:"}),s.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",border:"1px solid #ddd"},children:[s.jsx("thead",{children:s.jsxs("tr",{style:{backgroundColor:"#f5f5f5"},children:[s.jsx("th",{style:{border:"1px solid #ddd",padding:"2mm",textAlign:"left",fontSize:"10pt"},children:"Tn ph tng"}),s.jsx("th",{style:{border:"1px solid #ddd",padding:"2mm",textAlign:"center",fontSize:"10pt",width:"15%"},children:"SL"}),s.jsx("th",{style:{border:"1px solid #ddd",padding:"2mm",textAlign:"right",fontSize:"10pt",width:"25%"},children:"n gi"}),s.jsx("th",{style:{border:"1px solid #ddd",padding:"2mm",textAlign:"right",fontSize:"10pt",width:"25%"},children:"Thnh tin"})]})}),s.jsx("tbody",{children:B.partsUsed.map((de,qe)=>s.jsxs("tr",{children:[s.jsx("td",{style:{border:"1px solid #ddd",padding:"2mm",fontSize:"10pt"},children:de.partName}),s.jsx("td",{style:{border:"1px solid #ddd",padding:"2mm",textAlign:"center",fontSize:"10pt"},children:de.quantity}),s.jsx("td",{style:{border:"1px solid #ddd",padding:"2mm",textAlign:"right",fontSize:"10pt"},children:Te(de.price)}),s.jsx("td",{style:{border:"1px solid #ddd",padding:"2mm",textAlign:"right",fontSize:"10pt",fontWeight:"bold"},children:Te(de.price*de.quantity)})]},qe))})]})]}),B.additionalServices&&B.additionalServices.length>0&&s.jsxs("div",{style:{marginBottom:"4mm",color:"#000"},children:[s.jsx("p",{style:{fontWeight:"bold",margin:"0 0 2mm 0",fontSize:"11pt",color:"#000"},children:"Dch v b sung:"}),s.jsx("ul",{style:{margin:"0",paddingLeft:"5mm",color:"#000"},children:B.additionalServices.map((de,qe)=>s.jsxs("li",{style:{marginBottom:"1mm"},children:[de.description," -"," ",Te(de.price)," x"," ",de.quantity]},qe))})]}),s.jsx("div",{style:{border:"1px solid #ddd",padding:"4mm",marginBottom:"4mm",borderRadius:"2mm",backgroundColor:"#f9f9f9",color:"#000"},children:s.jsx("table",{style:{width:"100%",borderSpacing:"0",color:"#000"},children:s.jsxs("tbody",{children:[s.jsxs("tr",{children:[s.jsx("td",{style:{fontWeight:"bold",paddingBottom:"2mm",fontSize:"10pt"},children:"Tin ph tng:"}),s.jsx("td",{style:{textAlign:"right",paddingBottom:"2mm",fontSize:"10pt"},children:Te(((Ne=B.partsUsed)==null?void 0:Ne.reduce((de,qe)=>de+qe.price*qe.quantity,0))||0)})]}),s.jsxs("tr",{children:[s.jsx("td",{style:{fontWeight:"bold",paddingBottom:"2mm",fontSize:"10pt"},children:"Ph dch v:"}),s.jsx("td",{style:{textAlign:"right",paddingBottom:"2mm",fontSize:"10pt"},children:Te(B.laborCost||0)})]}),s.jsxs("tr",{children:[s.jsx("td",{style:{fontWeight:"bold",paddingBottom:"2mm",fontSize:"10pt"},children:"Gi cng/t hng:"}),s.jsx("td",{style:{textAlign:"right",paddingBottom:"2mm",fontSize:"10pt"},children:Te(((Me=B.additionalServices)==null?void 0:Me.reduce((de,qe)=>de+(qe.price||0)*(qe.quantity||1),0))||0)})]}),B.discount!=null&&B.discount>0&&s.jsxs("tr",{children:[s.jsx("td",{style:{fontWeight:"bold",paddingBottom:"2mm",fontSize:"10pt",color:"#e74c3c"},children:"Gim gi:"}),s.jsxs("td",{style:{textAlign:"right",paddingBottom:"2mm",fontSize:"10pt",color:"#e74c3c"},children:["-",Te(B.discount)]})]}),s.jsxs("tr",{style:{borderTop:"2px solid #333"},children:[s.jsx("td",{style:{fontWeight:"bold",paddingTop:"2mm",fontSize:"12pt"},children:"TNG CNG:"}),s.jsxs("td",{style:{textAlign:"right",paddingTop:"2mm",fontSize:"12pt",fontWeight:"bold",color:"#2563eb"},children:[Te(B.total)," "]})]}),B.totalPaid!=null&&B.totalPaid>0&&s.jsxs("tr",{children:[s.jsx("td",{style:{fontWeight:"bold",paddingTop:"2mm",fontSize:"10pt",color:"#16a34a"},children:" thanh ton:"}),s.jsx("td",{style:{textAlign:"right",paddingTop:"2mm",fontSize:"10pt",color:"#16a34a"},children:Te(B.totalPaid)})]}),B.remainingAmount!=null&&B.remainingAmount>0&&s.jsxs("tr",{children:[s.jsx("td",{style:{fontWeight:"bold",fontSize:"11pt",color:"#dc2626"},children:"Cn li:"}),s.jsx("td",{style:{textAlign:"right",fontSize:"11pt",fontWeight:"bold",color:"#dc2626"},children:Te(B.remainingAmount)})]}),B.paymentMethod&&s.jsxs("tr",{children:[s.jsx("td",{style:{paddingTop:"2mm",fontSize:"9pt",color:"#666"},children:"Hnh thc thanh ton:"}),s.jsx("td",{style:{textAlign:"right",paddingTop:"2mm",fontSize:"9pt",color:"#666"},children:B.paymentMethod==="cash"?"Tin mt":B.paymentMethod==="bank"?"Chuyn khon":B.paymentMethod})]})]})})}),s.jsx("div",{style:{marginTop:"8mm",paddingTop:"4mm",borderTop:"1px dashed #999",color:"#000"},children:s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"10pt"},children:[s.jsxs("div",{style:{textAlign:"center",width:"45%"},children:[s.jsx("p",{style:{fontWeight:"bold",margin:"0 0 10mm 0",color:"#000"},children:"Khch hng"}),s.jsx("p",{style:{margin:"0",fontSize:"9pt",color:"#666"},children:"(K v ghi r h tn)"})]}),s.jsxs("div",{style:{textAlign:"center",width:"45%"},children:[s.jsx("p",{style:{fontWeight:"bold",margin:"0 0 10mm 0",color:"#000"},children:"Nhn vin"}),s.jsx("p",{style:{margin:"0",fontSize:"9pt",color:"#666"},children:B.technicianName||"(K v ghi r h tn)"})]})]})}),s.jsxs("div",{style:{marginTop:"4mm",padding:"3mm",backgroundColor:"#fff9e6",border:"1px solid #ffd700",borderRadius:"2mm",fontSize:"9pt",textAlign:"center",color:"#000"},children:[s.jsx("p",{style:{margin:"0",fontStyle:"italic",color:"#000"},children:"Cm n qu khch  s dng dch v!"}),s.jsx("p",{style:{margin:"1mm 0 0 0",fontStyle:"italic",color:"#000"},children:"Vui lng gi phiu ny  i chiu khi nhn xe"})]}),s.jsxs("div",{style:{marginTop:"3mm",padding:"2mm",fontSize:"8pt",color:"#666",borderTop:"1px solid #e5e7eb",lineHeight:"1.4"},children:[s.jsx("p",{style:{margin:"0 0 1mm 0",fontWeight:"bold"},children:"Chnh sch bo hnh:"}),s.jsxs("ul",{style:{margin:"0",paddingLeft:"5mm",listStyleType:"disc"},children:[s.jsx("li",{children:"Bo hnh p dng cho ph tng chnh hng v li k thut do th"}),s.jsx("li",{children:"Khng bo hnh i vi va chm, ng xe, ngp nc sau khi nhn xe"}),s.jsx("li",{children:"Mang theo phiu ny khi n bo hnh. Lin h hotline nu c thc mc"})]})]})]})})})]})}),B&&s.jsxs("div",{id:"work-order-receipt",className:"hidden print:block",style:{width:"148mm",margin:"0 auto",padding:"10mm",fontFamily:"Arial, sans-serif",fontSize:"11pt",color:"#000",backgroundColor:"#fff"},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start",borderBottom:"2px solid #3b82f6",paddingBottom:"3mm",marginBottom:"4mm"},children:[(Y==null?void 0:Y.logo_url)&&s.jsx("div",{style:{marginRight:"4mm"},children:s.jsx("img",{src:Y.logo_url,alt:"Logo",style:{height:"18mm",width:"auto",objectFit:"contain"}})}),s.jsxs("div",{style:{fontSize:"8.5pt",lineHeight:"1.4",flex:1},children:[s.jsx("div",{style:{fontWeight:"bold",fontSize:"11pt",marginBottom:"1mm",color:"#1e40af"},children:(Y==null?void 0:Y.store_name)||"Nhn Lm SmartCare"}),s.jsxs("div",{style:{color:"#000"},children:[""," ",(Y==null?void 0:Y.address)||"p Ph Li B, X Long Ph Thun, ng Thp"]}),s.jsxs("div",{style:{color:"#000"},children:[" ",(Y==null?void 0:Y.phone)||"0947.747.907"]}),(Y==null?void 0:Y.email)&&s.jsxs("div",{style:{color:"#000"},children:[" ",Y.email]})]}),s.jsx("div",{style:{fontSize:"8pt",lineHeight:"1.4",textAlign:"right"},children:(Y==null?void 0:Y.bank_name)&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{style:{fontWeight:"bold",marginBottom:"1mm",color:"#000"},children:[" ",Y.bank_name]}),Y.bank_account_number&&s.jsxs("div",{style:{color:"#000"},children:["STK: ",Y.bank_account_number]}),Y.bank_account_holder&&s.jsx("div",{style:{color:"#000",fontSize:"7.5pt"},children:Y.bank_account_holder}),Y.bank_qr_url&&s.jsx("div",{style:{marginTop:"2mm",display:"inline-block"},children:s.jsx("img",{src:Y.bank_qr_url,alt:"QR Banking",style:{height:"15mm",width:"15mm",objectFit:"contain"}})})]})})]}),s.jsxs("div",{style:{marginBottom:"4mm"},children:[s.jsx("div",{style:{textAlign:"center",marginBottom:"2mm"},children:s.jsx("h1",{style:{fontSize:"16pt",fontWeight:"bold",margin:"0",textTransform:"uppercase",color:"#1e40af"},children:"PHIU DCH V SA CHA"})}),s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"9pt",color:"#666"},children:[s.jsx("div",{children:new Date(B.creationDate).toLocaleString("vi-VN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}),s.jsxs("div",{style:{fontWeight:"bold"},children:["M:"," ",qi(B.id,Y==null?void 0:Y.work_order_prefix)]})]})]}),s.jsx("div",{style:{border:"1px solid #ddd",padding:"4mm",marginBottom:"4mm",borderRadius:"2mm"},children:s.jsx("table",{style:{width:"100%",borderSpacing:"0"},children:s.jsxs("tbody",{children:[s.jsxs("tr",{children:[s.jsx("td",{style:{fontWeight:"bold",width:"20%",paddingBottom:"2mm"},children:"Khch hng:"}),s.jsx("td",{style:{paddingBottom:"2mm",width:"30%"},children:B.customerName}),s.jsx("td",{style:{fontWeight:"bold",width:"15%",paddingBottom:"2mm",paddingLeft:"3mm"},children:"Thanh Lc"}),s.jsx("td",{style:{paddingBottom:"2mm"},children:B.customerPhone})]}),s.jsxs("tr",{children:[s.jsx("td",{style:{fontWeight:"bold",paddingBottom:"2mm"},children:"Loi xe:"}),s.jsx("td",{style:{paddingBottom:"2mm"},colSpan:3,children:B.vehicleModel})]}),s.jsxs("tr",{children:[s.jsx("td",{style:{fontWeight:"bold"},children:"Bin s:"}),s.jsx("td",{colSpan:3,children:B.licensePlate})]})]})})}),s.jsx("div",{style:{border:"1px solid #ddd",padding:"4mm",marginBottom:"4mm",borderRadius:"2mm"},children:s.jsxs("div",{style:{display:"flex",gap:"3mm"},children:[s.jsx("div",{style:{fontWeight:"bold",minWidth:"20%",flexShrink:0},children:"M t s c:"}),s.jsx("div",{style:{flex:1,whiteSpace:"pre-wrap"},children:B.issueDescription||"Khng c m t"})]})}),B.partsUsed&&B.partsUsed.length>0&&s.jsxs("div",{style:{marginBottom:"4mm"},children:[s.jsx("p",{style:{fontWeight:"bold",margin:"0 0 2mm 0",fontSize:"11pt"},children:"Ph tng s dng:"}),s.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",border:"1px solid #ddd"},children:[s.jsx("thead",{children:s.jsxs("tr",{style:{backgroundColor:"#f5f5f5"},children:[s.jsx("th",{style:{border:"1px solid #ddd",padding:"2mm",textAlign:"left",fontSize:"10pt"},children:"Tn ph tng"}),s.jsx("th",{style:{border:"1px solid #ddd",padding:"2mm",textAlign:"center",fontSize:"10pt",width:"15%"},children:"SL"}),s.jsx("th",{style:{border:"1px solid #ddd",padding:"2mm",textAlign:"right",fontSize:"10pt",width:"25%"},children:"n gi"}),s.jsx("th",{style:{border:"1px solid #ddd",padding:"2mm",textAlign:"right",fontSize:"10pt",width:"25%"},children:"Thnh tin"})]})}),s.jsx("tbody",{children:B.partsUsed.map((de,qe)=>s.jsxs("tr",{children:[s.jsx("td",{style:{border:"1px solid #ddd",padding:"2mm",fontSize:"10pt"},children:de.partName}),s.jsx("td",{style:{border:"1px solid #ddd",padding:"2mm",textAlign:"center",fontSize:"10pt"},children:de.quantity}),s.jsx("td",{style:{border:"1px solid #ddd",padding:"2mm",textAlign:"right",fontSize:"10pt"},children:Te(de.price)}),s.jsx("td",{style:{border:"1px solid #ddd",padding:"2mm",textAlign:"right",fontSize:"10pt",fontWeight:"bold"},children:Te(de.price*de.quantity)})]},qe))})]})]}),B.additionalServices&&B.additionalServices.length>0&&s.jsxs("div",{style:{marginBottom:"4mm"},children:[s.jsx("p",{style:{fontWeight:"bold",margin:"0 0 2mm 0",fontSize:"11pt"},children:"Dch v b sung:"}),s.jsx("ul",{style:{margin:"0",paddingLeft:"5mm"},children:B.additionalServices.map((de,qe)=>s.jsxs("li",{style:{marginBottom:"1mm"},children:[de.description," - ",Te(de.price)," x"," ",de.quantity]},qe))})]}),s.jsx("div",{style:{border:"1px solid #ddd",padding:"4mm",marginBottom:"4mm",borderRadius:"2mm",backgroundColor:"#f9f9f9"},children:s.jsx("table",{style:{width:"100%",borderSpacing:"0"},children:s.jsxs("tbody",{children:[s.jsxs("tr",{children:[s.jsx("td",{style:{fontWeight:"bold",paddingBottom:"2mm",fontSize:"10pt"},children:"Tin ph tng:"}),s.jsx("td",{style:{textAlign:"right",paddingBottom:"2mm",fontSize:"10pt"},children:Te(((Re=B.partsUsed)==null?void 0:Re.reduce((de,qe)=>de+qe.price*qe.quantity,0))||0)})]}),s.jsxs("tr",{children:[s.jsx("td",{style:{fontWeight:"bold",paddingBottom:"2mm",fontSize:"10pt"},children:"Gi cng/t hng:"}),s.jsx("td",{style:{textAlign:"right",paddingBottom:"2mm",fontSize:"10pt"},children:Te(((Ce=B.additionalServices)==null?void 0:Ce.reduce((de,qe)=>de+(qe.price||0)*(qe.quantity||1),0))||0)})]}),B.discount!=null&&B.discount>0&&s.jsxs("tr",{children:[s.jsx("td",{style:{fontWeight:"bold",paddingBottom:"2mm",fontSize:"10pt",color:"#e74c3c"},children:"Gim gi:"}),s.jsxs("td",{style:{textAlign:"right",paddingBottom:"2mm",fontSize:"10pt",color:"#e74c3c"},children:["-",Te(B.discount)]})]}),s.jsxs("tr",{style:{borderTop:"2px solid #333"},children:[s.jsx("td",{style:{fontWeight:"bold",paddingTop:"2mm",fontSize:"12pt"},children:"TNG CNG:"}),s.jsxs("td",{style:{textAlign:"right",paddingTop:"2mm",fontSize:"12pt",fontWeight:"bold",color:"#2563eb"},children:[Te(B.total)," "]})]}),B.totalPaid!=null&&B.totalPaid>0&&s.jsxs("tr",{children:[s.jsx("td",{style:{fontWeight:"bold",paddingTop:"2mm",fontSize:"10pt",color:"#16a34a"},children:" thanh ton:"}),s.jsx("td",{style:{textAlign:"right",paddingTop:"2mm",fontSize:"10pt",color:"#16a34a"},children:Te(B.totalPaid)})]}),B.remainingAmount!=null&&B.remainingAmount>0&&s.jsxs("tr",{children:[s.jsx("td",{style:{fontWeight:"bold",fontSize:"11pt",color:"#dc2626"},children:"Cn li:"}),s.jsx("td",{style:{textAlign:"right",fontSize:"11pt",fontWeight:"bold",color:"#dc2626"},children:Te(B.remainingAmount)})]}),B.paymentMethod&&s.jsxs("tr",{children:[s.jsx("td",{style:{paddingTop:"2mm",fontSize:"9pt",color:"#666"},children:"Hnh thc thanh ton:"}),s.jsx("td",{style:{textAlign:"right",paddingTop:"2mm",fontSize:"9pt",color:"#666"},children:B.paymentMethod==="cash"?"Tin mt":B.paymentMethod==="bank"?"Chuyn khon":B.paymentMethod})]})]})})}),s.jsx("div",{style:{marginTop:"8mm",paddingTop:"4mm",borderTop:"1px dashed #999"},children:s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"10pt"},children:[s.jsxs("div",{style:{textAlign:"center",width:"45%"},children:[s.jsx("p",{style:{fontWeight:"bold",margin:"0 0 10mm 0"},children:"Khch hng"}),s.jsx("p",{style:{margin:"0",fontSize:"9pt",color:"#666"},children:"(K v ghi r h tn)"})]}),s.jsxs("div",{style:{textAlign:"center",width:"45%"},children:[s.jsx("p",{style:{fontWeight:"bold",margin:"0 0 10mm 0"},children:"Nhn vin"}),s.jsx("p",{style:{margin:"0",fontSize:"9pt",color:"#666"},children:B.technicianName||"(K v ghi r h tn)"})]})]})}),s.jsxs("div",{style:{marginTop:"4mm",padding:"3mm",backgroundColor:"#fff9e6",border:"1px solid #ffd700",borderRadius:"2mm",fontSize:"9pt",textAlign:"center"},children:[s.jsx("p",{style:{margin:"0",fontStyle:"italic"},children:"Cm n qu khch  s dng dch v!"}),s.jsx("p",{style:{margin:"1mm 0 0 0",fontStyle:"italic"},children:"Vui lng gi phiu ny  i chiu khi nhn xe"})]}),s.jsxs("div",{style:{marginTop:"3mm",padding:"2mm",fontSize:"8pt",color:"#666",borderTop:"1px solid #e5e7eb",lineHeight:"1.4"},children:[s.jsx("p",{style:{margin:"0 0 1mm 0",fontWeight:"bold"},children:"Chnh sch bo hnh:"}),s.jsxs("ul",{style:{margin:"0",paddingLeft:"5mm",listStyleType:"disc"},children:[s.jsx("li",{children:"Bo hnh p dng cho ph tng chnh hng v li k thut do th"}),s.jsx("li",{children:"Khng bo hnh i vi va chm, ng xe, ngp nc sau khi nhn xe"}),s.jsx("li",{children:"Mang theo phiu ny khi n bo hnh. Lin h hotline nu c thc mc"})]})]})]}),je&&me&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl w-full max-w-md",children:[s.jsxs("div",{className:"bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 px-6 py-4 flex items-center justify-between rounded-t-xl",children:[s.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:"Xc nhn hy phiu"}),s.jsx("button",{onClick:()=>{De(!1),ne(null)},className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-300","aria-label":"ng",children:""})]}),s.jsxs("div",{className:"p-6 space-y-4",children:[s.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4",children:[s.jsxs("p",{className:"text-sm text-yellow-800 dark:text-yellow-200",children:[" ",s.jsx("strong",{children:"Cnh bo:"})," Hnh ng ny s:"]}),s.jsxs("ul",{className:"mt-2 text-sm text-yellow-700 dark:text-yellow-300 list-disc list-inside space-y-1",children:[s.jsx("li",{children:"Hon tr tn kho cc ph tng  s dng"}),s.jsxs("li",{children:["Hon tin ",Te(me.totalPaid||0)," ","cho khch"]}),s.jsx("li",{children:'nh du phiu l " hy"'})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["L do hy phiu ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("textarea",{value:ce,onChange:de=>Ee(de.target.value),placeholder:"Vd: Khch hng khng ng  chi ph, sa nhm xe...",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 resize-none",rows:3})]}),s.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 rounded-lg p-3 space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Phiu:"}),s.jsxs("span",{className:"font-medium text-slate-900 dark:text-slate-100",children:["#",qi(me.id,Y==null?void 0:Y.work_order_prefix).split("-").pop()]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Khch hng:"}),s.jsx("span",{className:"font-medium text-slate-900 dark:text-slate-100",children:me.customerName})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Ph tng:"}),s.jsxs("span",{className:"font-medium text-slate-900 dark:text-slate-100",children:[((Ue=me.partsUsed)==null?void 0:Ue.length)||0," mn"]})]}),s.jsxs("div",{className:"flex justify-between border-t border-slate-200 dark:border-slate-600 pt-2",children:[s.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"S tin hon:"}),s.jsx("span",{className:"font-bold text-red-600 dark:text-red-400",children:Te(me.totalPaid||0)})]})]})]}),s.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 flex justify-end gap-3 rounded-b-xl",children:[s.jsx("button",{onClick:()=>{De(!1),ne(null)},className:"px-4 py-2 text-slate-700 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-600 rounded-lg font-medium",children:"Hy b"}),s.jsx("button",{onClick:Rr,disabled:!ce.trim(),className:"px-4 py-2 bg-red-600 hover:bg-red-700 disabled:bg-red-300 dark:disabled:bg-red-900 text-white rounded-lg font-medium disabled:cursor-not-allowed",children:"Xc nhn hy phiu"})]})]})}),Qe&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl w-full max-w-3xl max-h-[90vh] overflow-hidden flex flex-col",children:[s.jsxs("div",{className:"px-6 py-4 border-b border-slate-200 dark:border-slate-700 flex items-center justify-between",children:[s.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:be?"Sa mu sa cha":"To mu sa cha mi"}),s.jsx("button",{onClick:()=>{Ye(!1),ge(null)},className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-300",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsx("div",{className:"flex-1 overflow-y-auto px-6 py-4",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:["Tn mu ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",placeholder:"VD: Thay du ng c",value:at.name,onChange:de=>Je({...at,name:de.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"M t"}),s.jsx("textarea",{rows:2,placeholder:"M t chi tit dch v...",value:at.description,onChange:de=>Je({...at,description:de.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 resize-none"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Thi gian (pht)"}),s.jsx("input",{type:"number",min:"5",step:"5",value:at.duration,onChange:de=>Je({...at,duration:Number(de.target.value)}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:["Chi ph cng ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"number",min:"0",step:"10000",placeholder:"0",value:at.laborCost||"",onChange:de=>Je({...at,laborCost:Number(de.target.value)}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Ph tng cn thit"}),s.jsxs("button",{onClick:Mt,className:"px-3 py-1 bg-blue-500 hover:bg-blue-600 text-white rounded text-sm flex items-center gap-1",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Thm ph tng"]})]}),at.parts.length===0?s.jsx("div",{className:"text-center py-8 text-slate-500 dark:text-slate-400 text-sm",children:'Cha c ph tng no. Nhn "Thm ph tng"  thm.'}):s.jsx("div",{className:"space-y-2",children:at.parts.map((de,qe)=>s.jsxs("div",{className:"flex gap-2 items-start p-3 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:[s.jsxs("div",{className:"flex-1 grid grid-cols-4 gap-2",children:[s.jsxs("div",{className:"col-span-2 relative template-part-input",children:[s.jsx("input",{type:"text",placeholder:"Tn ph tng",value:de.name,onChange:et=>At(qe,"name",et.target.value),onFocus:()=>{Ke(qe),Ft(de.name)},className:"w-full px-2 py-1.5 border border-slate-300 dark:border-slate-600 rounded bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 text-sm"}),ct===qe&&s.jsx("div",{className:"absolute z-[60] top-full left-0 right-0 mt-1 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded-lg shadow-lg max-h-[200px] overflow-y-auto",children:Dr.length>0?Dr.map(et=>{var tt,Ae;return s.jsx("button",{type:"button",onClick:()=>ur(qe,et),className:"w-full px-3 py-2 text-left hover:bg-slate-100 dark:hover:bg-slate-700 border-b border-slate-200 dark:border-slate-700 last:border-b-0",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-medium text-slate-900 dark:text-slate-100 text-sm",children:et.name}),s.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:["Tn kho:"," ",((tt=et.stock)==null?void 0:tt[l||""])||0," ","ci"]})]}),s.jsx("div",{className:"text-sm font-medium text-blue-600 dark:text-blue-400",children:Te(((Ae=et.retailPrice)==null?void 0:Ae[l||""])||0)})]})},et.id)}):s.jsx("div",{className:"px-3 py-4 text-center text-sm text-slate-500 dark:text-slate-400",children:!u||u.length===0?"Khng c ph tng trong kho. Vui lng thm ph tng trc.":"Khng tm thy ph tng ph hp"})})]}),s.jsx("input",{type:"number",min:"1",placeholder:"SL",value:de.quantity,onChange:et=>At(qe,"quantity",Number(et.target.value)),className:"px-2 py-1.5 border border-slate-300 dark:border-slate-600 rounded bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 text-sm"}),s.jsx("input",{type:"number",min:"0",step:"1000",placeholder:"n gi",value:de.price||"",onChange:et=>At(qe,"price",Number(et.target.value)),className:"px-2 py-1.5 border border-slate-300 dark:border-slate-600 rounded bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 text-sm"})]}),s.jsx("button",{onClick:()=>Ge(qe),className:"p-1.5 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded",title:"Xa",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},qe))})]}),(at.laborCost>0||at.parts.length>0)&&s.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:s.jsxs("div",{className:"text-sm space-y-1",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Chi ph cng:"}),s.jsx("span",{className:"font-medium text-slate-900 dark:text-slate-100",children:Te(at.laborCost)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Ph tng:"}),s.jsx("span",{className:"font-medium text-slate-900 dark:text-slate-100",children:Te(at.parts.reduce((de,qe)=>de+qe.price*qe.quantity,0))})]}),s.jsxs("div",{className:"flex justify-between pt-2 border-t border-blue-200 dark:border-blue-700",children:[s.jsx("span",{className:"font-medium text-slate-900 dark:text-slate-100",children:"Tng c tnh:"}),s.jsx("span",{className:"font-bold text-blue-600 dark:text-blue-400",children:Te(at.laborCost+at.parts.reduce((de,qe)=>de+qe.price*qe.quantity,0))})]})]})})]})}),s.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-700 px-6 py-4 flex justify-end gap-3 bg-slate-50 dark:bg-slate-800/50",children:[s.jsx("button",{onClick:()=>{Ye(!1),ge(null)},className:"px-4 py-2 bg-slate-200 dark:bg-slate-700 hover:bg-slate-300 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-200 rounded-lg",children:"Hy"}),s.jsx("button",{onClick:ir,className:"px-6 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg font-medium",children:be?"Cp nht":"To mu"})]})]})})]})}const jEe=({order:e,onClose:t,onSave:r,parts:n,partsLoading:a,customers:i,employees:o,upsertCustomer:l,setCashTransactions:d,setPaymentSources:c,paymentSources:u,currentBranchId:x,storeSettings:b})=>{const g=["Honda Wave RSX","Honda Wave Alpha","Honda Blade","Honda Future","Honda Winner X","Honda Vision","Honda Air Blade","Honda SH Mode","Honda SH 125i","Honda SH 150i","Honda SH 160i","Honda SH 350i","Honda Vario","Honda Lead","Honda PCX","Honda ADV","Yamaha Exciter","Yamaha Sirius","Yamaha Jupiter","Yamaha Grande","Yamaha Janus","Yamaha FreeGo","Yamaha Latte","Yamaha NVX","Yamaha XSR","Suzuki Raider","Suzuki Axelo","Suzuki Satria","Suzuki GD110","Suzuki Impulse","Suzuki Address","Suzuki Revo","SYM Elite","SYM Galaxy","SYM Star","SYM Attila","SYM Angela","SYM Passing","Piaggio Liberty","Piaggio Medley","Vespa Sprint","Vespa Primavera","Vespa GTS","VinFast Klara","VinFast Evo200","VinFast Ludo","VinFast Impes","VinFast Theon","Khc"],{profile:k}=qc(),{mutateAsync:y}=wEe(),{mutateAsync:N}=kEe(),[S,O]=T.useState(()=>e!=null&&e.id?e:{id:(e==null?void 0:e.id)||"",customerName:(e==null?void 0:e.customerName)||"",customerPhone:(e==null?void 0:e.customerPhone)||"",vehicleModel:(e==null?void 0:e.vehicleModel)||"",licensePlate:(e==null?void 0:e.licensePlate)||"",vehicleId:(e==null?void 0:e.vehicleId)||"",issueDescription:(e==null?void 0:e.issueDescription)||"",technicianName:(e==null?void 0:e.technicianName)||"",status:(e==null?void 0:e.status)||"Tip nhn",laborCost:(e==null?void 0:e.laborCost)||0,discount:(e==null?void 0:e.discount)||0,partsUsed:(e==null?void 0:e.partsUsed)||[],total:(e==null?void 0:e.total)||0,branchId:(e==null?void 0:e.branchId)||x,paymentStatus:(e==null?void 0:e.paymentStatus)||"unpaid",creationDate:(e==null?void 0:e.creationDate)||new Date().toISOString()}),[A,P]=T.useState(""),[q,W]=T.useState([]),[R,U]=T.useState(!1),[L,Q]=T.useState(0),[H,G]=T.useState(!1),[Z,te]=T.useState(!1),[se,ue]=T.useState(0),[ae,pe]=T.useState(!1),[ve,Pe]=T.useState(!1),[xe,B]=T.useState({name:"",phone:"",vehicleModel:"",licensePlate:""}),[re,J]=T.useState(""),[ie,Y]=T.useState(!1),[_e,me]=T.useState(!1),[ne,je]=T.useState({model:"",licensePlate:""}),De=i.find(Ge=>Ge.phone===S.customerPhone),ce=(De==null?void 0:De.vehicles)||[];ce.length>1;const[Ee,be]=T.useState("amount"),[ge,Qe]=T.useState(0),[Ye,at]=T.useState(!1),[Je,ct]=T.useState([]),[Ke,zt]=T.useState({description:"",quantity:1,price:0,costPrice:0});T.useEffect(()=>{e!=null&&e.partsUsed?W(e.partsUsed):W([]),e!=null&&e.customerName?J(e.customerName):J(""),e!=null&&e.additionalServices?ct(e.additionalServices):ct([]),e!=null&&e.depositAmount?(ue(e.depositAmount),pe(!0)):(ue(0),pe(!1)),e!=null&&e.additionalPayment?(Q(e.additionalPayment),G(!0)):(Q(0),G(!1)),be("amount"),Qe(0)},[e]);const Ft=T.useMemo(()=>re.trim()?i.filter(Ge=>{var At;return Ge.name.toLowerCase().includes(re.toLowerCase())||((At=Ge.phone)==null?void 0:At.toLowerCase().includes(re.toLowerCase()))}):i.slice(0,10),[i,re]);T.useEffect(()=>{const Ge=At=>{const ur=At.target;ur.closest(".customer-search-container")||Y(!1),ur.closest(".vehicle-search-container")||te(!1)};return document.addEventListener("mousedown",Ge),()=>document.removeEventListener("mousedown",Ge)},[]);const fr=Ge=>{O({...S,vehicleId:Ge.id,vehicleModel:Ge.model,licensePlate:Ge.licensePlate}),te(!1)},hr=()=>{if(!De)return;if(!ne.model.trim()||!ne.licensePlate.trim()){Ze.error("Vui lng nhp y  loi xe v bin s");return}const Ge=`VEH-${Date.now()}`,At=De.vehicles||[],ur=[...At,{id:Ge,model:ne.model.trim(),licensePlate:ne.licensePlate.trim(),isPrimary:At.length===0}];l({...De,vehicles:ur}),O({...S,vehicleId:Ge,vehicleModel:ne.model.trim(),licensePlate:ne.licensePlate.trim()}),je({model:"",licensePlate:""}),me(!1),Ze.success(" thm xe mi")},sr=q.reduce((Ge,At)=>Ge+(At.price||0)*(At.quantity||0),0),Sr=Je.reduce((Ge,At)=>Ge+(At.price||0)*(At.quantity||0),0),tr=(S.laborCost||0)+sr+Sr,Jt=S.discount||0,Kt=Math.max(0,tr-Jt);console.log("Tinh toan:",{laborCost:S.laborCost,partsTotal:sr,servicesTotal:Sr,subtotal:tr,discount:Jt,total:Kt});const ar=se||0,vr=H?L:0,rr=ar+vr,ft=Math.max(0,Kt-rr),br=M5(),yr=async(Ge,At,ur,Dr)=>{var jr;if(!(At<=0)){console.log("[createCustomerDebtIfNeeded] CALLED with:",{workOrderId:Ge.id,totalAmount:ur,paidAmount:Dr,remainingAmount:At,customerName:Ge.customerName,timestamp:new Date().toISOString()});try{const Xt=Ge.customerPhone||Ge.id||`CUST-ANON-${Date.now()}`,Wr=((jr=Ge.customerName)==null?void 0:jr.trim())||Ge.customerPhone||"Khch vng lai",cr=qi(Ge.id,b==null?void 0:b.work_order_prefix).split("-").pop()||"";let pr=`${Ge.vehicleModel||"Xe"} (Phiu sa cha #${cr})`;Ge.issueDescription&&(pr+=`
Vn : ${Ge.issueDescription}`),Ge.partsUsed&&Ge.partsUsed.length>0&&(pr+=`

Ph tng  thay:`,Ge.partsUsed.forEach(Mr=>{pr+=`
   ${Mr.quantity} x ${Mr.partName} - ${Te(Mr.price*Mr.quantity)}`})),Ge.additionalServices&&Ge.additionalServices.length>0&&(pr+=`

Dch v:`,Ge.additionalServices.forEach(Mr=>{pr+=`
   ${Mr.quantity} x ${Mr.description} - ${Te(Mr.price*Mr.quantity)}`})),Ge.laborCost&&Ge.laborCost>0&&(pr+=`

Cng lao ng: ${Te(Ge.laborCost)}`),Ge.discount&&Ge.discount>0&&(pr+=`
Gim gi: -${Te(Ge.discount)}`);const Rr=(k==null?void 0:k.full_name)||"N/A";pr+=`

NV: ${Rr}`,Ge.technicianName&&(pr+=`
NVK thut: ${Ge.technicianName}`);const Ir={customerId:Xt,customerName:Wr,phone:Ge.customerPhone||null,licensePlate:Ge.licensePlate||null,description:pr,totalAmount:ur,paidAmount:Dr,remainingAmount:At,createdDate:new Date().toISOString().split("T")[0],branchId:x,workOrderId:Ge.id};console.log("[ServiceManager] createCustomerDebt payload:",Ir);const Nn=await br.mutateAsync(Ir);console.log("[ServiceManager] createCustomerDebt result:",Nn),Ze.success(` to/cp nht cng n ${At.toLocaleString()} (M: ${(Nn==null?void 0:Nn.id)||"N/A"})`)}catch(Xt){console.error("Error creating/updating customer debt:",Xt),Ze.error("Khng th to/cp nht cng n t ng")}}},gr=async()=>{var Dr,jr;if(!((Dr=S.customerName)!=null&&Dr.trim())){Ze.error("Vui lng nhp tn khch hng");return}if(!((jr=S.customerPhone)!=null&&jr.trim())){Ze.error("Vui lng nhp s in thoi");return}if(!/^[0-9]{10,11}$/.test(S.customerPhone.trim())){Ze.error("S in thoi khng hp l (cn 10-11 ch s)");return}if(S.customerName&&S.customerPhone&&!i.find(Wr=>Wr.phone===S.customerPhone)){const Wr=i.find(Rr=>Rr.phone===S.customerPhone&&S.customerName&&Rr.name.toLowerCase()!==S.customerName.toLowerCase());Wr&&Ze.warning(`ST  tn ti cho khch "${Wr.name}". C th trng lp?`);const cr=`VEH-${Date.now()}`,pr=[];(S.vehicleModel||S.licensePlate)&&pr.push({id:cr,model:S.vehicleModel||"",licensePlate:S.licensePlate||"",isPrimary:!0}),l({id:`CUST-${Date.now()}`,name:S.customerName,phone:S.customerPhone,vehicles:pr.length>0?pr:void 0,vehicleModel:S.vehicleModel,licensePlate:S.licensePlate,status:"active",segment:"New",loyaltyPoints:0,totalSpent:0,visitCount:1,lastVisit:new Date().toISOString(),created_at:new Date().toISOString()})}let At="unpaid";const ur=((e==null?void 0:e.depositAmount)||0)+((e==null?void 0:e.additionalPayment)||0);ur>=Kt?At="paid":ur>0&&(At="partial");try{const Wr={id:(e==null?void 0:e.id)||`${(b==null?void 0:b.work_order_prefix)||"SC"}-${Date.now()}`,customername:S.customerName||"",customerphone:S.customerPhone||"",vehicleid:S.vehicleId,vehiclemodel:S.vehicleModel||"",licenseplate:S.licensePlate||"",issuedescription:S.issueDescription||"",technicianname:S.technicianName||"",status:S.status||"Tip nhn",laborcost:S.laborCost||0,discount:Jt,partsused:q,additionalservices:Je.length>0?Je:void 0,total:Kt,branchid:x,paymentstatus:At,paymentmethod:S.paymentMethod||null,depositamount:(e==null?void 0:e.depositAmount)||null,totalpaid:ur>0?ur:null,remainingamount:Kt-ur,creationdate:(e==null?void 0:e.creationDate)||new Date().toISOString()};if(e!=null&&e.id){const{data:cr,error:pr}=await It.from("work_orders").update(Wr).eq("id",e.id).select();if(pr)throw console.error("[UPDATE ERROR]",pr),pr;console.log("[UPDATE SUCCESS]",cr)}else{console.log("[INSERT] Attempting to insert:",Wr);const{data:cr,error:pr}=await It.from("work_orders").insert(Wr).select();if(pr)throw console.error("[INSERT ERROR]",pr),console.error("[INSERT ERROR DETAILS]",JSON.stringify(pr,null,2)),pr;console.log("[INSERT SUCCESS]",cr)}r(Wr),Ze.success(e!=null&&e.id?" cp nht phiu":" lu phiu thnh cng"),t()}catch(Xt){console.error("Error saving work order:",Xt),Ze.error("Li khi lu phiu: "+(Xt.message||Xt.hint||"Khng xc nh"))}},ot=async()=>{var Ge,At;if(Ye){console.log("[handleSave] Already submitting, skipping...");return}at(!0);try{if(!((Ge=S.customerName)!=null&&Ge.trim())){Ze.error("Vui lng nhp tn khch hng");return}if(!((At=S.customerPhone)!=null&&At.trim())){Ze.error("Vui lng nhp s in thoi");return}if(!/^[0-9]{10,11}$/.test(S.customerPhone.trim())){Ze.error("S in thoi khng hp l (cn 10-11 ch s)");return}if(Kt<=0){Ze.error("Tng tin phi ln hn 0");return}if(S.customerName&&S.customerPhone&&!i.find(Xt=>Xt.phone===S.customerPhone)){const Xt=i.find(pr=>pr.phone===S.customerPhone&&S.customerName&&pr.name.toLowerCase()!==S.customerName.toLowerCase());Xt&&Ze.warning(`ST  tn ti cho khch "${Xt.name}". C th trng lp?`);const Wr=`VEH-${Date.now()}`,cr=[];(S.vehicleModel||S.licensePlate)&&cr.push({id:Wr,model:S.vehicleModel||"",licensePlate:S.licensePlate||"",isPrimary:!0}),l({id:`CUST-${Date.now()}`,name:S.customerName,phone:S.customerPhone,vehicles:cr.length>0?cr:void 0,vehicleModel:S.vehicleModel,licensePlate:S.licensePlate,status:"active",segment:"New",loyaltyPoints:0,totalSpent:0,visitCount:1,lastVisit:new Date().toISOString(),created_at:new Date().toISOString()})}let Dr="unpaid";if(rr>=Kt?Dr="paid":rr>0&&(Dr="partial"),!(e!=null&&e.id)&&(q.length>0||Je.length>0||se>0)){try{const jr=`${(b==null?void 0:b.work_order_prefix)||"SC"}-${Date.now()}`,Xt=await y({id:jr,customerName:S.customerName||"",customerPhone:S.customerPhone||"",vehicleModel:S.vehicleModel||"",licensePlate:S.licensePlate||"",issueDescription:S.issueDescription||"",technicianName:S.technicianName||"",status:S.status||"Tip nhn",laborCost:S.laborCost||0,discount:Jt,partsUsed:q,additionalServices:Je.length>0?Je:void 0,total:Kt,branchId:x,paymentStatus:Dr,paymentMethod:S.paymentMethod,depositAmount:se>0?se:void 0,additionalPayment:vr>0?vr:void 0,totalPaid:rr>0?rr:void 0,remainingAmount:ft,creationDate:new Date().toISOString()}),Wr=Xt==null?void 0:Xt.depositTransactionId,cr=Xt==null?void 0:Xt.paymentTransactionId,pr={id:jr,customerName:S.customerName||"",customerPhone:S.customerPhone||"",vehicleModel:S.vehicleModel||"",licensePlate:S.licensePlate||"",issueDescription:S.issueDescription||"",technicianName:S.technicianName||"",status:S.status||"Tip nhn",laborCost:S.laborCost||0,discount:Jt,partsUsed:q,additionalServices:Je.length>0?Je:void 0,total:Kt,branchId:x,depositAmount:se>0?se:void 0,depositDate:se>0?new Date().toISOString():void 0,depositTransactionId:Wr,paymentStatus:Dr,paymentMethod:S.paymentMethod,additionalPayment:vr>0?vr:void 0,totalPaid:rr>0?rr:void 0,remainingAmount:ft,cashTransactionId:cr,paymentDate:cr?new Date().toISOString():void 0,creationDate:new Date().toISOString()};if(Wr&&se>0&&(d(Rr=>[...Rr,{id:Wr,type:"deposit",category:"service_deposit",amount:se,date:new Date().toISOString(),description:`t cc sa cha #${(qi(jr,b==null?void 0:b.work_order_prefix)||"").split("-").pop()} - ${S.customerName}`,branchId:x,paymentSource:S.paymentMethod,reference:jr}]),c(Rr=>Rr.map(Ir=>Ir.id===S.paymentMethod?{...Ir,balance:{...Ir.balance,[x]:(Ir.balance[x]||0)+se}}:Ir))),cr&&vr>0&&(d(Rr=>[...Rr,{id:cr,type:"income",category:"service_income",amount:vr,date:new Date().toISOString(),description:`Thu tin sa cha #${(qi(jr,b==null?void 0:b.work_order_prefix)||"").split("-").pop()} - ${S.customerName}`,branchId:x,paymentSource:S.paymentMethod,reference:jr}]),c(Rr=>Rr.map(Ir=>Ir.id===S.paymentMethod?{...Ir,balance:{...Ir.balance,[x]:(Ir.balance[x]||0)+vr}}:Ir))),Je.length>0){const Rr=Je.reduce((Ir,Nn)=>Ir+(Nn.costPrice||0)*Nn.quantity,0);if(Rr>0){const Ir=`EXPENSE-${Date.now()}`;try{const{error:Nn}=await It.from("cash_transactions").insert({id:Ir,type:"expense",category:"outsourcing",amount:-Rr,date:new Date().toISOString(),description:`Chi ph gia cng bn ngoi - Phiu #${jr.split("-").pop()} - ${Je.map(Mr=>Mr.description).join(", ")}`,branchid:x,paymentsource:"cash",reference:jr});Nn||(d(Mr=>[...Mr,{id:Ir,type:"expense",category:"outsourcing",amount:-Rr,date:new Date().toISOString(),description:`Chi ph gia cng bn ngoi - Phiu #${jr.split("-").pop()}`,branchId:x,paymentSource:"cash",reference:jr}]),c(Mr=>Mr.map(Gr=>Gr.id==="cash"?{...Gr,balance:{...Gr.balance,[x]:(Gr.balance[x]||0)-Rr}}:Gr)),Ze.info(` to phiu chi ${Te(Rr)} cho gia cng bn ngoi`))}catch(Nn){console.error("Error creating outsourcing expense:",Nn)}}}r(pr),S.status==="Tr my"&&ft>0&&(console.log("[handleSave] Creating debt with finalOrder:",{id:pr.id,customerName:pr.customerName,customerPhone:pr.customerPhone,licensePlate:pr.licensePlate,vehicleModel:pr.vehicleModel}),await yr(pr,ft,Kt,rr)),t()}catch(jr){console.error("Error creating work order (atomic):",jr)}return}if(e!=null&&e.id){console.log("[handleSave] UPDATE block - Order ID:",e.id,"Status:",S.status);try{console.log("[handleSave] Calling updateWorkOrderAtomicAsync...");const jr=await N({id:e.id,customerName:S.customerName||"",customerPhone:S.customerPhone||"",vehicleModel:S.vehicleModel||"",licensePlate:S.licensePlate||"",issueDescription:S.issueDescription||"",technicianName:S.technicianName||"",status:S.status||"Tip nhn",laborCost:S.laborCost||0,discount:Jt,partsUsed:q,additionalServices:Je.length>0?Je:void 0,total:Kt,branchId:x,paymentStatus:Dr,paymentMethod:S.paymentMethod,depositAmount:se>0?se:void 0,additionalPayment:vr>0?vr:void 0,totalPaid:rr>0?rr:void 0,remainingAmount:ft}),Xt=jr.workOrder,Wr=jr==null?void 0:jr.depositTransactionId,cr=jr==null?void 0:jr.paymentTransactionId,pr=Xt?{id:Xt.id||e.id,customerName:Xt.customername||Xt.customerName||e.customerName,customerPhone:Xt.customerphone||Xt.customerPhone||e.customerPhone,vehicleModel:Xt.vehiclemodel||Xt.vehicleModel||e.vehicleModel,licensePlate:Xt.licenseplate||Xt.licensePlate||e.licensePlate,issueDescription:Xt.issuedescription||Xt.issueDescription||e.issueDescription||"",technicianName:Xt.technicianname||Xt.technicianName||e.technicianName||"",status:Xt.status||e.status,laborCost:Xt.laborcost||Xt.laborCost||e.laborCost||0,discount:Xt.discount||e.discount||0,partsUsed:Xt.partsused||Xt.partsUsed||e.partsUsed||[],additionalServices:Xt.additionalservices||Xt.additionalServices||e.additionalServices,total:Xt.total||e.total,branchId:Xt.branchid||Xt.branchId||e.branchId,depositAmount:Xt.depositamount||Xt.depositAmount||e.depositAmount,depositDate:Xt.depositdate||Xt.depositDate||e.depositDate,depositTransactionId:Wr||e.depositTransactionId,paymentStatus:Xt.paymentstatus||Xt.paymentStatus||e.paymentStatus,paymentMethod:Xt.paymentmethod||Xt.paymentMethod||e.paymentMethod,additionalPayment:Xt.additionalpayment||Xt.additionalPayment||e.additionalPayment,totalPaid:Xt.totalpaid||Xt.totalPaid||e.totalPaid,remainingAmount:Xt.remainingamount||Xt.remainingAmount||e.remainingAmount,cashTransactionId:cr||e.cashTransactionId,paymentDate:Xt.paymentdate||Xt.paymentDate||e.paymentDate,creationDate:Xt.creationdate||Xt.creationDate||e.creationDate}:{...e,customerName:S.customerName||e.customerName,customerPhone:S.customerPhone||e.customerPhone,vehicleModel:S.vehicleModel||e.vehicleModel,licensePlate:S.licensePlate||e.licensePlate,issueDescription:S.issueDescription||e.issueDescription,technicianName:S.technicianName||e.technicianName,status:S.status||e.status,laborCost:S.laborCost||e.laborCost,discount:Jt,partsUsed:q,additionalServices:Je.length>0?Je:e.additionalServices,total:Kt,depositAmount:se,depositTransactionId:Wr||e.depositTransactionId,paymentStatus:Dr,paymentMethod:S.paymentMethod||e.paymentMethod,additionalPayment:vr,totalPaid:rr,remainingAmount:ft,cashTransactionId:cr||e.cashTransactionId,paymentDate:cr?new Date().toISOString():e.paymentDate};Wr&&se>e.depositAmount&&(d(Rr=>[...Rr,{id:Wr,type:"deposit",category:"service_deposit",amount:se-(e.depositAmount||0),date:new Date().toISOString(),description:`t cc b sung #${(qi(e.id,b==null?void 0:b.work_order_prefix)||"").split("-").pop()} - ${S.customerName}`,branchId:x,paymentSource:S.paymentMethod,reference:e.id}]),c(Rr=>Rr.map(Ir=>Ir.id===S.paymentMethod?{...Ir,balance:{...Ir.balance,[x]:(Ir.balance[x]||0)+(se-(e.depositAmount||0))}}:Ir))),cr&&vr>(e.additionalPayment||0)&&(d(Rr=>[...Rr,{id:cr,type:"income",category:"service_income",amount:vr-(e.additionalPayment||0),date:new Date().toISOString(),description:`Thu tin b sung #${(qi(e.id,b==null?void 0:b.work_order_prefix)||"").split("-").pop()} - ${S.customerName}`,branchId:x,paymentSource:S.paymentMethod,reference:e.id}]),c(Rr=>Rr.map(Ir=>Ir.id===S.paymentMethod?{...Ir,balance:{...Ir.balance,[x]:(Ir.balance[x]||0)+(vr-(e.additionalPayment||0))}}:Ir))),console.log("[handleSave] updateWorkOrderAtomicAsync SUCCESS - Response:",jr),r(pr),S.status==="Tr my"&&ft>0&&await yr(pr,ft,Kt,rr),t()}catch(jr){console.error("[handleSave] Error updating work order (atomic):",jr)}return}console.warn("[handleSave] Unexpected code path - no atomic create/update was called")}finally{at(!1)}},Lt=Ge=>{const At=q.find(ur=>ur.partId===Ge.id);W(At?q.map(ur=>ur.partId===Ge.id?{...ur,quantity:ur.quantity+1}:ur):[...q,{partId:Ge.id,partName:Ge.name,sku:Ge.sku||"",quantity:1,price:Ge.retailPrice[x]||0}]),U(!1),P("")},ir=T.useMemo(()=>n.filter(Ge=>{var ur;return(((ur=Ge.stock)==null?void 0:ur[x])||0)>0}),[n,x]),Mt=T.useMemo(()=>A.trim()?ir.filter(Ge=>{var At;return Ge.name.toLowerCase().includes(A.toLowerCase())||((At=Ge.sku)==null?void 0:At.toLowerCase().includes(A.toLowerCase()))}):ir,[ir,A]);return s.jsxs("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-end md:items-center justify-center p-0 md:p-4",children:[s.jsxs("div",{className:"bg-white dark:bg-slate-800 w-full h-full md:h-auto md:max-h-[90vh] md:max-w-5xl rounded-t-3xl md:rounded-xl shadow-2xl md:shadow-lg flex flex-col overflow-hidden",children:[s.jsxs("div",{className:"bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 px-4 py-3 md:px-6 md:py-4 flex items-center justify-between rounded-t-3xl md:rounded-t-xl flex-shrink-0",children:[s.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:S.id?`Chi tit phiu sa cha - ${qi(S.id,b==null?void 0:b.work_order_prefix)}`:"To phiu sa cha mi"}),s.jsx("button",{onClick:t,className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-300","aria-label":"ng",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"w-5 h-5",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsxs("div",{className:"px-4 py-5 md:px-6 md:py-6 space-y-6 overflow-y-auto flex-1 pb-24 md:pb-6",children:[s.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300",children:"Thng tin Khch hng & S c"}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:["Khch hng ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("div",{className:"flex-1 relative customer-search-container",children:[s.jsx("input",{type:"text",placeholder:"Tm khch hng...",value:re,onChange:Ge=>{J(Ge.target.value),Y(!0),O({...S,customerName:Ge.target.value})},onFocus:()=>Y(!0),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"}),ie&&s.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:Ft.length>0?Ft.map(Ge=>s.jsx("button",{type:"button",onClick:()=>{var ur,Dr;const At=((ur=Ge.vehicles)==null?void 0:ur.find(jr=>jr.isPrimary))||((Dr=Ge.vehicles)==null?void 0:Dr[0]);O({...S,customerName:Ge.name,customerPhone:Ge.phone,vehicleId:At==null?void 0:At.id,vehicleModel:(At==null?void 0:At.model)||Ge.vehicleModel||"",licensePlate:(At==null?void 0:At.licensePlate)||Ge.licensePlate||""}),J(Ge.name),Y(!1)},className:"w-full text-left px-3 py-2 hover:bg-slate-100 dark:hover:bg-slate-600 border-b border-slate-200 dark:border-slate-600 last:border-0",children:s.jsx("div",{className:"flex items-start justify-between gap-2",children:s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"font-medium text-slate-900 dark:text-slate-100 text-sm truncate",children:Ge.name}),s.jsxs("div",{className:"text-xs text-slate-600 dark:text-slate-400 mt-0.5",children:[" ",Ge.phone]}),(Ge.vehicleModel||Ge.licensePlate)&&s.jsxs("div",{className:"text-xs text-blue-600 dark:text-blue-400 mt-0.5 flex items-center gap-1",children:[s.jsxs("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[s.jsx("circle",{cx:"6",cy:"17",r:"2"}),s.jsx("circle",{cx:"18",cy:"17",r:"2"}),s.jsx("path",{d:"M4 17h2l4-6h2l2 3h4"})]}),Ge.vehicleModel&&s.jsx("span",{children:Ge.vehicleModel}),Ge.licensePlate&&s.jsxs("span",{className:"font-mono font-medium",children:[Ge.vehicleModel&&""," ",Ge.licensePlate]})]})]})})},Ge.id)):s.jsx("div",{className:"px-3 py-4 text-center text-sm text-slate-500 dark:text-slate-400",children:i.length===0?"Cha c khch hng no. Nhn '+'  thm khch hng mi.":"Khng tm thy khch hng ph hp"})})]}),s.jsx("button",{type:"button",onClick:()=>Pe(!0),className:"px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg font-medium text-xl",title:"Thm khch hng mi",children:"+"})]}),S.customerName&&S.customerPhone&&s.jsx("div",{className:"mt-2 p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx("div",{className:"text-sm font-medium text-slate-900 dark:text-slate-100",children:S.customerName}),s.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:s.jsxs("span",{className:"inline-flex items-center gap-1",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"w-3.5 h-3.5",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 6.75c0 8.284 6.716 15 15 15 .828 0 1.5-.672 1.5-1.5v-2.25a1.5 1.5 0 00-1.5-1.5h-1.158a1.5 1.5 0 00-1.092.468l-.936.996a1.5 1.5 0 01-1.392.444 12.035 12.035 0 01-7.29-7.29 1.5 1.5 0 01.444-1.392l.996-.936a1.5 1.5 0 00.468-1.092V6.75A1.5 1.5 0 006.75 5.25H4.5c-.828 0-1.5.672-1.5 1.5z"})}),S.customerPhone]})}),(S.vehicleModel||S.licensePlate)&&s.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:s.jsxs("span",{className:"inline-flex items-center gap-1",children:[s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"w-3.5 h-3.5",children:[s.jsx("circle",{cx:"6",cy:"17",r:"2"}),s.jsx("circle",{cx:"18",cy:"17",r:"2"}),s.jsx("path",{d:"M4 17h2l4-6h2l2 3h4"})]}),S.vehicleModel," ",S.licensePlate&&`- ${S.licensePlate}`]})})]}),s.jsx("button",{type:"button",onClick:()=>{J(""),O({...S,customerName:"",customerPhone:"",vehicleId:void 0,vehicleModel:"",licensePlate:""})},className:"text-slate-400 hover:text-red-500 text-sm flex items-center",title:"Xa khch hng",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"w-4 h-4","aria-hidden":"true",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]})}),De&&s.jsxs("div",{className:"mt-3 space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:[ce.length>0?"Chn xe":"Xe ca khch hng",ce.length>0&&s.jsxs("span",{className:"text-xs text-slate-500 ml-1",children:["(",ce.length," xe)"]})]}),s.jsx("button",{type:"button",onClick:()=>me(!0),className:"px-3 py-1 bg-blue-500 hover:bg-blue-600 text-white rounded text-sm font-medium",title:"Thm xe mi",children:"+ Thm xe"})]}),ce.length>0?s.jsx("div",{className:"space-y-2",children:ce.map(Ge=>{const At=S.vehicleId===Ge.id,ur=Ge.isPrimary;return s.jsx("button",{type:"button",onClick:()=>fr(Ge),className:`w-full text-left px-3 py-2.5 rounded-lg border-2 transition-all ${At?"border-blue-500 bg-blue-50 dark:bg-blue-900/30":"border-slate-200 dark:border-slate-600 hover:border-blue-300 dark:hover:border-blue-700 bg-white dark:bg-slate-700"}`,children:s.jsxs("div",{className:"flex items-center gap-2",children:[ur&&s.jsx("span",{className:"text-yellow-500",title:"Xe chnh",children:""}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-medium text-sm text-slate-900 dark:text-slate-100",children:Ge.model}),s.jsx("div",{className:"text-xs font-mono text-slate-600 dark:text-slate-400 mt-0.5",children:Ge.licensePlate})]}),At&&s.jsx("svg",{className:"w-5 h-5 text-blue-500",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})]})},Ge.id)})}):s.jsx("div",{className:"text-center py-4 px-3 bg-slate-50 dark:bg-slate-700/50 rounded-lg border border-dashed border-slate-300 dark:border-slate-600",children:s.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:'Cha c xe no. Click "+ Thm xe"  thm.'})})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"S KM hin ti"}),s.jsx("input",{type:"number",placeholder:"15000",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"M t s c"}),s.jsx("textarea",{rows:4,placeholder:"Bo dng nh k, thay nht...",value:S.issueDescription||"",onChange:Ge=>O({...S,issueDescription:Ge.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 resize-none"})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300",children:"Chi tit Dch v"}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Trng thi"}),s.jsxs("select",{value:S.status||"Tip nhn",onChange:Ge=>O({...S,status:Ge.target.value}),className:`w-full px-3 py-2 border rounded-lg font-medium ${S.status==="Tip nhn"?"bg-blue-100 dark:bg-blue-900/30 border-blue-300 dark:border-blue-700 text-blue-700 dark:text-blue-300":S.status==="ang sa"?"bg-orange-100 dark:bg-orange-900/30 border-orange-300 dark:border-orange-700 text-orange-700 dark:text-orange-300":S.status===" sa xong"?"bg-purple-100 dark:bg-purple-900/30 border-purple-300 dark:border-purple-700 text-purple-700 dark:text-purple-300":"bg-green-100 dark:bg-green-900/30 border-green-300 dark:border-green-700 text-green-700 dark:text-green-300"}`,children:[s.jsx("option",{value:"Tip nhn",className:"bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100",children:"Tip nhn"}),s.jsx("option",{value:"ang sa",className:"bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100",children:"ang sa"}),s.jsx("option",{value:" sa xong",className:"bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100",children:" sa xong"}),s.jsx("option",{value:"Tr my",className:"bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100",children:"Tr my"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"K thut vin"}),s.jsxs("select",{value:S.technicianName||"",onChange:Ge=>O({...S,technicianName:Ge.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",children:[s.jsx("option",{value:"",children:"-- Chn k thut vin --"}),o.filter(Ge=>{var At,ur;return Ge.status==="active"&&(((At=Ge.department)==null?void 0:At.toLowerCase().includes("k thut"))||((ur=Ge.position)==null?void 0:ur.toLowerCase().includes("k thut")))}).map(Ge=>s.jsx("option",{value:Ge.name,children:Ge.name},Ge.id))]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Ph dch v (Cng th)"}),s.jsx("input",{type:"number",placeholder:"100.000",value:S.laborCost||"",onChange:Ge=>O({...S,laborCost:Number(Ge.target.value)}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Ghi ch ni b"}),s.jsx("textarea",{rows:4,placeholder:"VD: Khch yu cu kim tra thm h thng in",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 resize-none"})]})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300",children:"Ph tng s dng"}),s.jsx("button",{onClick:()=>U(!R),className:"px-3 py-1.5 bg-blue-500 hover:bg-blue-600 text-white rounded text-sm flex items-center gap-1",children:" Thm ph tng"})]}),R&&s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"text",placeholder:"Tm kim ph tng theo tn hoc SKU...",value:A,onChange:Ge=>P(Ge.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",autoFocus:!0}),s.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg shadow-lg max-h-60 overflow-y-auto z-10",children:a?s.jsx("div",{className:"px-4 py-3 text-sm text-slate-500",children:"ang ti ph tng..."}):Mt.length===0?s.jsx("div",{className:"px-4 py-3 text-sm text-slate-500",children:"Khng tm thy ph tng"}):Mt.slice(0,10).map(Ge=>s.jsxs("button",{onClick:()=>Lt(Ge),className:"w-full px-4 py-2 text-left hover:bg-slate-100 dark:hover:bg-slate-600 flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-slate-900 dark:text-slate-100",children:Ge.name}),s.jsx("div",{className:"text-xs text-slate-500",children:Ge.sku})]}),s.jsx("div",{className:"text-sm font-semibold text-slate-900 dark:text-slate-100",children:Te(Ge.retailPrice[x]||0)})]},Ge.id))})]}),s.jsx("div",{className:"border border-slate-300 dark:border-slate-600 rounded-lg overflow-hidden",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-600 dark:text-slate-300",children:"Tn"}),s.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-slate-600 dark:text-slate-300",children:"SL"}),s.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-slate-600 dark:text-slate-300",children:".Gi"}),s.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-slate-600 dark:text-slate-300",children:"T.Tin"}),s.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-slate-600 dark:text-slate-300"})]})}),s.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-600",children:q.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:5,className:"px-4 py-6 text-center text-sm text-slate-400",children:"Cha c ph tng no"})}):q.map((Ge,At)=>s.jsxs("tr",{className:"bg-white dark:bg-slate-800",children:[s.jsx("td",{className:"px-4 py-2 text-sm text-slate-900 dark:text-slate-100",children:Ge.partName}),s.jsx("td",{className:"px-4 py-2 text-center",children:s.jsx("input",{type:"number",min:"1",value:Ge.quantity,onChange:ur=>{const Dr=Number(ur.target.value);W(q.map((jr,Xt)=>Xt===At?{...jr,quantity:Dr}:jr))},className:"w-16 px-2 py-1 border border-slate-300 dark:border-slate-600 rounded text-center bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})}),s.jsx("td",{className:"px-4 py-2 text-right text-sm text-slate-900 dark:text-slate-100",children:Te(Ge.price)}),s.jsx("td",{className:"px-4 py-2 text-right text-sm font-semibold text-slate-900 dark:text-slate-100",children:Te(Ge.price*Ge.quantity)}),s.jsx("td",{className:"px-4 py-2 text-center",children:s.jsx("button",{onClick:()=>W(q.filter((ur,Dr)=>Dr!==At)),className:"text-red-500 hover:text-red-700","aria-label":"Xa ph tng",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"w-4 h-4",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 6h18M9 6V4h6v2m-7 4v8m4-8v8m4-8v8"})})})})]},At))})]})})]}),s.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-4",children:[s.jsx("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-3",children:"Bo gi (Gia cng, t hng)"}),s.jsx("div",{className:"border border-slate-300 dark:border-slate-600 rounded-lg overflow-hidden",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-600 dark:text-slate-300",children:"M t"}),s.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-slate-600 dark:text-slate-300",children:"SL"}),s.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-slate-600 dark:text-slate-300",children:"Gi nhp"}),s.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-slate-600 dark:text-slate-300",children:"n gi"}),s.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-slate-600 dark:text-slate-300",children:"Thnh tin"}),s.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-slate-600 dark:text-slate-300",children:s.jsx("button",{onClick:()=>{Ke.description&&Ke.price>0&&(ct([...Je,{...Ke,id:`SRV-${Date.now()}`}]),zt({description:"",quantity:1,price:0,costPrice:0}))},className:"px-2 py-1 bg-blue-500 hover:bg-blue-600 text-white rounded text-xs",children:"Thm"})})]})}),s.jsxs("tbody",{children:[Je.map(Ge=>s.jsxs("tr",{className:"border-b border-slate-200 dark:border-slate-700",children:[s.jsx("td",{className:"px-4 py-2 text-sm text-slate-900 dark:text-slate-100",children:Ge.description}),s.jsx("td",{className:"px-4 py-2 text-center text-sm text-slate-900 dark:text-slate-100",children:Ge.quantity}),s.jsx("td",{className:"px-4 py-2 text-right text-sm text-orange-600 dark:text-orange-400",children:Ge.costPrice?Te(Ge.costPrice):"-"}),s.jsx("td",{className:"px-4 py-2 text-right text-sm text-slate-900 dark:text-slate-100",children:Te(Ge.price)}),s.jsx("td",{className:"px-4 py-2 text-right text-sm font-semibold text-slate-900 dark:text-slate-100",children:Te(Ge.price*Ge.quantity)}),s.jsx("td",{className:"px-4 py-2 text-center",children:s.jsx("button",{onClick:()=>ct(Je.filter(At=>At.id!==Ge.id)),className:"text-red-500 hover:text-red-700 text-sm","aria-label":"Xa dch v",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"w-4 h-4",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 6h18M9 6V4h6v2m-7 4v8m4-8v8m4-8v8"})})})})]},Ge.id)),s.jsxs("tr",{className:"bg-white dark:bg-slate-800",children:[s.jsx("td",{className:"px-4 py-2",children:s.jsx("input",{type:"text",placeholder:"M t...",value:Ke.description,onChange:Ge=>zt({...Ke,description:Ge.target.value}),className:"w-full px-2 py-1 border border-slate-300 dark:border-slate-600 rounded bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 text-sm"})}),s.jsx("td",{className:"px-4 py-2",children:s.jsx("input",{type:"number",value:Ke.quantity,onChange:Ge=>zt({...Ke,quantity:Number(Ge.target.value)}),className:"w-16 px-2 py-1 border border-slate-300 dark:border-slate-600 rounded text-center bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 text-sm"})}),s.jsx("td",{className:"px-4 py-2",children:s.jsx("input",{type:"number",placeholder:"Gi nhp",value:Ke.costPrice||"",onChange:Ge=>zt({...Ke,costPrice:Number(Ge.target.value)}),className:"w-full px-2 py-1 border border-orange-300 dark:border-orange-600 rounded text-right bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 text-sm"})}),s.jsx("td",{className:"px-4 py-2",children:s.jsx("input",{type:"number",placeholder:"n gi",value:Ke.price||"",onChange:Ge=>zt({...Ke,price:Number(Ge.target.value)}),className:"w-full px-2 py-1 border border-slate-300 dark:border-slate-600 rounded text-right bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 text-sm"})}),s.jsx("td",{className:"px-4 py-2 text-right text-sm text-slate-400",children:Ke.price>0?Te(Ke.price*Ke.quantity):"Thnh tin"}),s.jsx("td",{className:"px-4 py-2 text-center"})]})]})]})})]}),s.jsx("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-4 mt-4",children:s.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[s.jsxs("div",{className:"space-y-4 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg p-4",children:[s.jsx("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300",children:"Thanh ton"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("label",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",checked:ae,onChange:Ge=>{pe(Ge.target.checked),Ge.target.checked||ue(0)},disabled:!!(e!=null&&e.depositAmount),className:"w-4 h-4"}),s.jsxs("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:["t cc"," ",e!=null&&e.depositAmount?`( cc: ${Te(e.depositAmount)})`:""]})]}),ae&&!(e!=null&&e.depositAmount)&&s.jsx("div",{className:"pl-6",children:s.jsx("input",{type:"number",placeholder:"S tin t cc",value:se||"",onChange:Ge=>ue(Number(Ge.target.value)),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})}),s.jsx("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-3"}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 mb-2 block",children:"Phng thc thanh ton:"}),s.jsxs("div",{className:"flex items-center gap-4 pl-2",children:[s.jsxs("label",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"radio",name:"paymentMethod",value:"cash",checked:S.paymentMethod==="cash",onChange:Ge=>O({...S,paymentMethod:"cash"}),className:"w-4 h-4"}),s.jsxs("span",{className:"inline-flex items-center gap-1 text-sm text-slate-700 dark:text-slate-300",children:[s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"w-4 h-4",children:[s.jsx("rect",{x:"2",y:"6",width:"20",height:"12",rx:"2",ry:"2"}),s.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),"Tin mt"]})]}),s.jsxs("label",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"radio",name:"paymentMethod",value:"bank",checked:S.paymentMethod==="bank",onChange:Ge=>O({...S,paymentMethod:"bank"}),className:"w-4 h-4"}),s.jsxs("span",{className:"inline-flex items-center gap-1 text-sm text-slate-700 dark:text-slate-300",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"w-4 h-4",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 21h18M3 10h18M7 6h10l2 4H5l2-4Zm2 4v11m6-11v11"})}),"Chuyn khon"]})]})]})]}),s.jsx("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-3"}),S.status==="Tr my"&&s.jsxs(s.Fragment,{children:[s.jsxs("label",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",checked:H,onChange:Ge=>{G(Ge.target.checked),Ge.target.checked||Q(0)},className:"w-4 h-4"}),s.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:"Thanh ton khi tr xe"})]}),H&&s.jsxs("div",{className:"pl-6 space-y-2",children:[s.jsx("label",{className:"text-xs text-slate-600 dark:text-slate-400",children:"S tin thanh ton thm:"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"number",placeholder:"0",value:L||"",onChange:Ge=>Q(Number(Ge.target.value)),className:"flex-1 px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"}),s.jsx("button",{onClick:()=>Q(0),className:"px-3 py-1.5 bg-slate-200 dark:bg-slate-600 hover:bg-slate-300 dark:hover:bg-slate-500 text-slate-700 dark:text-slate-200 rounded text-xs font-medium",children:"0%"}),s.jsx("button",{onClick:()=>Q(Math.round(ft*.5)),className:"px-3 py-1.5 bg-slate-200 dark:bg-slate-600 hover:bg-slate-300 dark:hover:bg-slate-500 text-slate-700 dark:text-slate-200 rounded text-xs font-medium",children:"50%"}),s.jsx("button",{onClick:()=>Q(ft),className:"px-3 py-1.5 bg-slate-200 dark:bg-slate-600 hover:bg-slate-300 dark:hover:bg-slate-500 text-slate-700 dark:text-slate-200 rounded text-xs font-medium",children:"100%"})]})]})]})]}),S.status!=="Tr my"&&s.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 italic",children:'* Thanh ton khi tr xe ch kh dng khi trng thi l "Tr my"'})]}),s.jsxs("div",{className:"space-y-3 bg-slate-50 dark:bg-slate-700/30 border border-slate-200 dark:border-slate-700 rounded-lg p-4",children:[s.jsx("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Tng kt"}),s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Ph dch v:"}),s.jsx("span",{className:"font-medium text-slate-900 dark:text-slate-100",children:Te(S.laborCost||0)})]}),s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Tin ph tng:"}),s.jsx("span",{className:"font-medium text-slate-900 dark:text-slate-100",children:Te(sr)})]}),s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Gia cng/t hng:"}),s.jsx("span",{className:"font-medium text-slate-900 dark:text-slate-100",children:Te(Sr)})]}),s.jsxs("div",{className:"pt-2 border-t border-slate-300 dark:border-slate-600",children:[s.jsxs("div",{className:"flex justify-between items-center text-sm",children:[s.jsx("span",{className:"text-red-600 font-medium",children:"Gim gi:"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"number",placeholder:"0",value:Ee==="amount"?S.discount||"":ge,onChange:Ge=>{const At=Number(Ge.target.value)||0;if(Ee==="amount")O({...S,discount:Math.min(At,tr)});else{const ur=Math.min(At,100);Qe(ur),O({...S,discount:Math.round(tr*ur/100)})}},className:"w-20 px-2 py-1 border border-slate-300 dark:border-slate-600 rounded text-right bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 text-sm",min:"0",max:Ee==="amount"?tr:100}),s.jsxs("select",{value:Ee,onChange:Ge=>{const At=Ge.target.value;be(At),O({...S,discount:0}),Qe(0)},className:"px-2 py-1 border border-slate-300 dark:border-slate-600 rounded bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 text-sm",children:[s.jsx("option",{value:"amount",children:""}),s.jsx("option",{value:"percent",children:"%"})]})]})]}),Ee==="percent"&&s.jsx("div",{className:"flex gap-1 justify-end mt-2",children:[5,10,15,20].map(Ge=>s.jsxs("button",{onClick:()=>{Qe(Ge),O({...S,discount:Math.round(tr*Ge/100)})},className:"px-2 py-1 text-xs bg-slate-100 dark:bg-slate-700 hover:bg-blue-100 dark:hover:bg-blue-900/30 text-slate-700 dark:text-slate-300 rounded transition-colors",children:[Ge,"%"]},Ge))}),Ee==="percent"&&ge>0&&s.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400 text-right mt-1",children:["= ",Te(S.discount||0)]})]}),s.jsxs("div",{className:"pt-2 border-t-2 border-slate-400 dark:border-slate-500",children:[s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsx("span",{className:"text-base font-bold text-slate-900 dark:text-slate-100",children:"Tng cng:"}),s.jsx("span",{className:"text-lg font-bold text-blue-600 dark:text-blue-400",children:Te(Kt)})]}),(ar>0||vr>0)&&s.jsxs("div",{className:"space-y-1 pt-2 border-t border-slate-300 dark:border-slate-600",children:[ar>0&&s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-green-600 dark:text-green-400",children:" t cc:"}),s.jsxs("span",{className:"font-medium text-green-600 dark:text-green-400",children:["-",Te(ar)]})]}),vr>0&&s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-green-600 dark:text-green-400",children:"Thanh ton thm:"}),s.jsxs("span",{className:"font-medium text-green-600 dark:text-green-400",children:["-",Te(vr)]})]}),s.jsxs("div",{className:"flex justify-between items-center pt-2 border-t border-slate-300 dark:border-slate-600",children:[s.jsx("span",{className:"text-base font-bold text-slate-900 dark:text-slate-100",children:ft>0?"Cn phi thu:":" thanh ton "}),s.jsx("span",{className:`text-lg font-bold ${ft>0?"text-red-600 dark:text-red-400":"text-green-600 dark:text-green-400"}`,children:Te(ft)})]})]})]})]})]})})]}),s.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-700 px-4 py-4 md:px-6 flex items-center justify-end gap-3 bg-white md:bg-slate-50 dark:bg-slate-800/70 md:dark:bg-slate-800/50 rounded-b-3xl md:rounded-b-xl flex-shrink-0",children:[s.jsx("button",{onClick:t,className:"px-4 py-2 bg-slate-200 dark:bg-slate-700 hover:bg-slate-300 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-200 rounded-lg",children:"Hy"}),s.jsx("button",{onClick:gr,className:"px-6 py-2 bg-slate-500 hover:bg-slate-600 text-white rounded-lg font-medium",children:"Lu Phiu"}),S.status!=="Tr my"&&ae&&s.jsxs("button",{onClick:ot,className:"px-6 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg font-medium flex items-center gap-2",children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"t cc"]}),S.status==="Tr my"&&s.jsxs("button",{onClick:ot,className:"px-6 py-2 bg-green-500 hover:bg-green-600 text-white rounded-lg font-medium flex items-center gap-2",children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"})}),"Thanh ton"]})]})]}),ve&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[60]",children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl w-full max-w-md p-6 m-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-slate-100",children:"Thm khch hng"}),s.jsx("button",{onClick:()=>{Pe(!1),B({name:"",phone:"",vehicleModel:"",licensePlate:""})},className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-300","aria-label":"ng",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"w-5 h-5",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Tn khch"}),s.jsx("input",{type:"text",placeholder:"Nhp tn khch",value:xe.name,onChange:Ge=>B({...xe,name:Ge.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"S in thoi"}),s.jsx("input",{type:"tel",placeholder:"VD: 09xxxx",value:xe.phone,onChange:Ge=>B({...xe,phone:Ge.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{className:"relative vehicle-search-container",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Dng xe"}),s.jsx("input",{type:"text",placeholder:"Chn hoc nhp dng xe",value:xe.vehicleModel,onChange:Ge=>{B({...xe,vehicleModel:Ge.target.value}),te(!0)},onFocus:()=>te(!0),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"}),Z&&s.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg shadow-lg max-h-[200px] overflow-y-auto",children:g.filter(Ge=>Ge.toLowerCase().includes(xe.vehicleModel.toLowerCase())).map(Ge=>s.jsx("button",{type:"button",onClick:()=>{B({...xe,vehicleModel:Ge}),te(!1)},className:"w-full text-left px-3 py-2 hover:bg-slate-100 dark:hover:bg-slate-600 text-sm border-b border-slate-200 dark:border-slate-600 last:border-0 text-slate-900 dark:text-slate-100",children:Ge},Ge))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Bin s"}),s.jsx("input",{type:"text",placeholder:"VD: 59A1-123.45",value:xe.licensePlate,onChange:Ge=>B({...xe,licensePlate:Ge.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]})]})]}),s.jsxs("div",{className:"flex items-center justify-end gap-3 mt-6",children:[s.jsx("button",{onClick:()=>{Pe(!1),B({name:"",phone:"",vehicleModel:"",licensePlate:""})},className:"px-4 py-2 text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg",children:"Hy"}),s.jsx("button",{onClick:()=>{if(xe.name&&xe.phone){const Ge=`CUST-${Date.now()}`,At=`VEH-${Date.now()}`,ur=[];(xe.vehicleModel||xe.licensePlate)&&ur.push({id:At,model:xe.vehicleModel||"",licensePlate:xe.licensePlate||"",isPrimary:!0}),l({id:Ge,name:xe.name,phone:xe.phone,vehicles:ur.length>0?ur:void 0,vehicleModel:xe.vehicleModel,licensePlate:xe.licensePlate,status:"active",segment:"New",loyaltyPoints:0,totalSpent:0,visitCount:1,lastVisit:new Date().toISOString(),created_at:new Date().toISOString()}),O({...S,customerName:xe.name,customerPhone:xe.phone,vehicleId:ur.length>0?At:void 0,vehicleModel:xe.vehicleModel,licensePlate:xe.licensePlate}),J(xe.name),Pe(!1),B({name:"",phone:"",vehicleModel:"",licensePlate:""})}},className:"px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg font-medium",disabled:!xe.name||!xe.phone,children:"Lu"})]})]})}),_e&&De&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl max-w-md w-full p-6",children:[s.jsxs("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-4",children:["Thm xe cho ",De.name]}),s.jsxs("div",{className:"space-y-4 mb-6",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:["Loi xe ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",placeholder:"VD: Exciter, Vision, Wave...",value:ne.model,onChange:Ge=>je({...ne,model:Ge.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",autoFocus:!0})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:["Bin s ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",placeholder:"VD: 29A 12345",value:ne.licensePlate,onChange:Ge=>je({...ne,licensePlate:Ge.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]}),s.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 bg-blue-50 dark:bg-blue-900/20 p-3 rounded",children:" Xe mi s t ng c chn sau khi thm"})]}),s.jsxs("div",{className:"flex gap-3 justify-end",children:[s.jsx("button",{onClick:()=>{me(!1),je({model:"",licensePlate:""})},className:"px-4 py-2 text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg",children:"Hy"}),s.jsx("button",{onClick:hr,className:"px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg font-medium",disabled:!ne.model.trim()||!ne.licensePlate.trim(),children:"Thm xe"})]})]})})]})},CEe=({status:e})=>{const t={"Tip nhn":"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400","ang sa":"bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-400"," sa xong":"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400","Tr my":"bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-400"};return s.jsx("span",{className:`inline-flex px-2 py-1 rounded-full text-xs font-medium ${t[e]}`,children:e})},AEe=({currentBranchId:e})=>{var Y,_e;const{workOrders:t}=Ua(),r=Rk(),[n,a]=T.useState(""),[i,o]=T.useState("all"),[l,d]=T.useState("all"),[c,u]=T.useState("all"),[x,b]=T.useState("quick"),[g,k]=T.useState("7days"),[y,N]=T.useState(()=>{const me=new Date,ne=String(me.getMonth()+1).padStart(2,"0");return`${me.getFullYear()}-${ne}`}),[S,O]=T.useState(""),[A,P]=T.useState(""),[q,W]=T.useState(!1),R=()=>{const me=new Date,ne=String(me.getMonth()+1).padStart(2,"0"),je=me.getFullYear();return`Thng ${ne}/${je}`},[U,L]=T.useState(R()),[Q,H]=T.useState(null),[G,Z]=T.useState(!1),[te,se]=T.useState(null);T.useEffect(()=>{(async()=>{try{const{data:ne,error:je}=await It.from("store_settings").select("store_name, address, phone, email, logo_url, bank_qr_url, bank_name, bank_account_number, bank_account_holder, bank_branch").order("created_at",{ascending:!1}).limit(1).single();if(je){console.error("Error fetching store settings:",je);return}se(ne)}catch(ne){console.error("Failed to fetch store settings:",ne)}})()},[]);const ue=()=>{const me=new Date,ne=new Date(me.getFullYear(),me.getMonth(),me.getDate());if(x==="quick")switch(g){case"today":return{start:ne,end:new Date(ne.getFullYear(),ne.getMonth(),ne.getDate(),23,59,59)};case"yesterday":const je=new Date(ne);return je.setDate(je.getDate()-1),{start:je,end:new Date(je.getFullYear(),je.getMonth(),je.getDate(),23,59,59)};case"3days":const De=new Date(ne);return De.setDate(De.getDate()-2),{start:De,end:new Date(me.getFullYear(),me.getMonth(),me.getDate(),23,59,59)};case"7days":const ce=new Date(ne);return ce.setDate(ce.getDate()-6),{start:ce,end:new Date(me.getFullYear(),me.getMonth(),me.getDate(),23,59,59)};case"thisWeek":const Ee=new Date(ne),be=Ee.getDay(),ge=Ee.getDate()-be+(be===0?-6:1);return Ee.setDate(ge),{start:Ee,end:new Date(me.getFullYear(),me.getMonth(),me.getDate(),23,59,59)};case"lastWeek":const Qe=new Date(ne),Ye=Qe.getDay(),at=Qe.getDate()-Ye-6;Qe.setDate(at);const Je=new Date(Qe);return Je.setDate(Je.getDate()+6),Je.setHours(23,59,59),{start:Qe,end:Je};default:return{start:ne,end:new Date(me.getFullYear(),me.getMonth(),me.getDate(),23,59,59)}}else if(x==="month"){const[je,De]=y.split("-").map(Number),ce=new Date(je,De-1,1),Ee=new Date(je,De,0,23,59,59);return{start:ce,end:Ee}}else if(x==="custom"&&S&&A){const je=new Date(S),De=new Date(A);return De.setHours(23,59,59),{start:je,end:De}}return{start:new Date(me.getFullYear(),me.getMonth(),1),end:new Date(me.getFullYear(),me.getMonth()+1,0,23,59,59)}},ae=()=>{if(x==="quick")switch(g){case"today":return"Hm nay";case"yesterday":return"Hm qua";case"3days":return"3 ngy qua";case"7days":return"7 ngy qua";case"thisWeek":return"Tun ny";case"lastWeek":return"Tun trc";default:return"Chn thi gian"}else if(x==="month"){const[me,ne]=y.split("-");return`Thng ${ne}/${me}`}else if(x==="custom"){if(S&&A){const me=new Date(S).toLocaleDateString("vi-VN"),ne=new Date(A).toLocaleDateString("vi-VN");return`${me} - ${ne}`}return"Ty chnh"}return"Chn thi gian"},pe=T.useMemo(()=>{const{start:me,end:ne}=ue();return t.filter(je=>{var De,ce,Ee,be,ge;if(je.status!=="Tr my"||je.branchId!==e)return!1;if(n){const Qe=n.toLowerCase();if(![(De=je.id)==null?void 0:De.toLowerCase(),(ce=je.customerName)==null?void 0:ce.toLowerCase(),(Ee=je.customerPhone)==null?void 0:Ee.toLowerCase(),(be=je.vehicleModel)==null?void 0:be.toLowerCase(),(ge=je.licensePlate)==null?void 0:ge.toLowerCase()].some(at=>at==null?void 0:at.includes(Qe)))return!1}if(i!=="all"&&je.status!==i||l!=="all"&&je.technicianName!==l||c!=="all"&&(c==="paid"&&je.paymentStatus!=="paid"||c==="unpaid"&&je.paymentStatus!=="unpaid"))return!1;if(je.creationDate){const Qe=new Date(je.creationDate);if(Qe<me||Qe>ne)return!1}return!0}).sort((je,De)=>new Date(De.creationDate||0).getTime()-new Date(je.creationDate||0).getTime())},[t,n,i,x,g,y,S,A,l,c,e]),ve=pe.reduce((me,ne)=>me+(ne.total||0),0),Pe=()=>{const ne=[["M Phiu","Ngy to","Khch hng","Xe","Bin s","Trng thi","Tng chi ph"].join(","),...pe.map(ce=>{var Ee;return[qi(ce.id,te==null?void 0:te.work_order_prefix)||"",Fn(ce.creationDate,!0),ce.customerName||"",ce.vehicleModel||"",ce.licensePlate||"",ce.status||"",((Ee=ce.total)==null?void 0:Ee.toString())||"0"].join(",")})].join(`
`),je=new Blob([ne],{type:"text/csv;charset=utf-8;"}),De=document.createElement("a");if(De.download!==void 0){const ce=URL.createObjectURL(je);De.setAttribute("href",ce),De.setAttribute("download",`lich-su-sua-chua-${new Date().toISOString().split("T")[0]}.csv`),De.style.visibility="hidden",document.body.appendChild(De),De.click(),document.body.removeChild(De)}},xe=me=>{H(me),Z(!0)},B=me=>{r("/service",{state:{editOrder:me}})},re=()=>{setTimeout(()=>{hk("work-order-receipt")},100)},J=({status:me})=>{const ne={"Tip nhn":{icon:"",color:"text-blue-600 dark:text-blue-400"},"ang sa":{icon:"",color:"text-orange-600 dark:text-orange-400"}," sa xong":{icon:"",color:"text-purple-600 dark:text-purple-400"},"Tr my":{icon:"",color:"text-green-600 dark:text-green-400"}},je=ne[me]||ne["Tip nhn"];return s.jsxs("span",{className:`flex items-center gap-1 text-sm ${je.color}`,children:[s.jsx("span",{children:je.icon}),s.jsx("span",{children:me})]})},ie=({status:me})=>me==="paid"?s.jsx("span",{className:"text-xs text-green-600 dark:text-green-400",children:"  thanh ton"}):s.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:" Cha thanh ton"});return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:[s.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl p-4 border border-slate-200 dark:border-slate-700",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Tng phiu"}),s.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-slate-100",children:pe.length})]}),s.jsx("div",{className:"p-3 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:s.jsx(w3,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})})]})}),s.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl p-4 border border-slate-200 dark:border-slate-700",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Tng doanh thu"}),s.jsx("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:Te(ve)})]}),s.jsx("div",{className:"p-3 bg-green-100 dark:bg-green-900/30 rounded-lg",children:s.jsx(L7,{className:"w-6 h-6 text-green-600 dark:text-green-400"})})]})}),s.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl p-4 border border-slate-200 dark:border-slate-700",children:s.jsxs("button",{onClick:Pe,className:"w-full px-4 py-2 bg-cyan-500 hover:bg-cyan-600 text-white rounded-lg text-sm font-medium flex items-center justify-center gap-2 transition-colors",children:[s.jsx(L7,{className:"w-4 h-4"}),"Xut Excel"]})})]}),s.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl p-4 border border-slate-200 dark:border-slate-700",children:s.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[s.jsx("div",{className:"flex-1 min-w-[200px]",children:s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"text",placeholder:"Tm theo m, tn, ST, xe, bin s...",value:n,onChange:me=>a(me.target.value),className:"w-full pl-10 pr-4 py-2 bg-slate-50 dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-sm text-slate-900 dark:text-slate-100 placeholder-slate-400"}),s.jsx(nu,{className:"absolute left-3 top-2.5 w-4 h-4 text-slate-400","aria-hidden":"true"})]})}),s.jsxs("button",{onClick:()=>W(!0),className:"px-4 py-2 bg-slate-50 dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-sm text-slate-700 dark:text-slate-200 hover:bg-slate-100 dark:hover:bg-slate-600 transition-colors flex items-center gap-2",children:[s.jsx(w3,{className:"w-4 h-4"}),ae()]}),s.jsxs("select",{value:l,onChange:me=>d(me.target.value),className:"px-4 py-2 bg-slate-50 dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-sm text-slate-700 dark:text-slate-200",children:[s.jsx("option",{value:"all",children:"Tt c KTV"}),s.jsx("option",{value:"KTV 1",children:"KTV 1"}),s.jsx("option",{value:"KTV 2",children:"KTV 2"})]}),s.jsxs("select",{value:c,onChange:me=>u(me.target.value),className:"px-4 py-2 bg-slate-50 dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-sm text-slate-700 dark:text-slate-200",children:[s.jsx("option",{value:"all",children:"Tt c thanh ton"}),s.jsx("option",{value:"paid",children:" thanh ton"}),s.jsx("option",{value:"unpaid",children:"Cha thanh ton"})]})]})}),q&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl w-full max-w-lg shadow-2xl",children:[s.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700 px-6 py-4",children:s.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-slate-100",children:"Chn thi gian:"})}),s.jsxs("div",{className:"p-6 space-y-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 mb-3",children:"Theo ngy:"}),s.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[s.jsx("button",{onClick:()=>{b("quick"),k("today")},className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${x==="quick"&&g==="today"?"bg-blue-500 text-white":"bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-600"}`,children:"Hm nay"}),s.jsx("button",{onClick:()=>{b("quick"),k("yesterday")},className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${x==="quick"&&g==="yesterday"?"bg-blue-500 text-white":"bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-600"}`,children:"Hm qua"}),s.jsx("button",{onClick:()=>{b("quick"),k("3days")},className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${x==="quick"&&g==="3days"?"bg-blue-500 text-white":"bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-600"}`,children:"3 ngy qua"}),s.jsx("button",{onClick:()=>{b("quick"),k("thisWeek")},className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${x==="quick"&&g==="thisWeek"?"bg-blue-500 text-white":"bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-600"}`,children:"Tun ny"}),s.jsx("button",{onClick:()=>{b("quick"),k("lastWeek")},className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${x==="quick"&&g==="lastWeek"?"bg-blue-500 text-white":"bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-600"}`,children:"Tun trc"}),s.jsx("button",{onClick:()=>{b("quick"),k("7days")},className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${x==="quick"&&g==="7days"?"bg-blue-500 text-white":"bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-600"}`,children:" 7 ngy qua"})]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 mb-3",children:"Theo thng:"}),s.jsx("div",{className:"grid grid-cols-3 gap-2",children:[0,1,2,3,4,5].map(me=>{const ne=new Date;ne.setMonth(ne.getMonth()-me);const je=ne.getFullYear(),De=String(ne.getMonth()+1).padStart(2,"0"),ce=`${je}-${De}`,Ee=`Thng ${De}/${je}`;return s.jsx("button",{onClick:()=>{b("month"),N(ce)},className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${x==="month"&&y===ce?"bg-slate-600 text-white":"bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-600"}`,children:Ee},ce)})})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 mb-3",children:"Ty chnh:"}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("input",{type:"date",value:S,onChange:me=>{O(me.target.value),me.target.value&&A&&b("custom")},className:"flex-1 px-3 py-2 bg-slate-50 dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-sm text-slate-900 dark:text-slate-100"}),s.jsx("span",{className:"text-slate-500",children:"-"}),s.jsx("input",{type:"date",value:A,onChange:me=>{P(me.target.value),S&&me.target.value&&b("custom")},className:"flex-1 px-3 py-2 bg-slate-50 dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-sm text-slate-900 dark:text-slate-100"})]})]})]}),s.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-700 px-6 py-4 flex justify-end gap-3",children:[s.jsx("button",{onClick:()=>W(!1),className:"px-4 py-2 bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-300 rounded-lg text-sm font-medium transition-colors",children:"Hy"}),s.jsx("button",{onClick:()=>W(!1),className:"px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg text-sm font-medium transition-colors",children:"p dng"})]})]})}),s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700",children:[s.jsx("div",{className:"px-4 py-3 bg-slate-50 dark:bg-slate-700/50 border-b border-slate-200 dark:border-slate-600",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-16 text-center",children:s.jsx("input",{type:"checkbox",className:"rounded border-slate-400"})}),s.jsx("div",{className:"flex-1 min-w-[180px]",children:s.jsx("span",{className:"text-xs font-semibold text-slate-600 dark:text-slate-300 uppercase",children:"M phiu"})}),s.jsx("div",{className:"flex-1 min-w-[180px]",children:s.jsx("span",{className:"text-xs font-semibold text-slate-600 dark:text-slate-300 uppercase",children:"Khch hng"})}),s.jsx("div",{className:"flex-1 min-w-[200px]",children:s.jsx("span",{className:"text-xs font-semibold text-slate-600 dark:text-slate-300 uppercase",children:"Chi tit"})}),s.jsx("div",{className:"w-56",children:s.jsx("span",{className:"text-xs font-semibold text-slate-600 dark:text-slate-300 uppercase",children:"Hn tr"})}),s.jsx("div",{className:"w-24 text-center",children:s.jsx("span",{className:"text-xs font-semibold text-slate-600 dark:text-slate-300 uppercase",children:"Thao tc"})})]})}),pe.length===0?s.jsx("div",{className:"px-4 py-12 text-center text-slate-400",children:"Khng c phiu sa cha no."}):s.jsx("div",{className:"divide-y divide-slate-700",children:pe.map(me=>{var ce,Ee;const ne=((ce=me.partsUsed)==null?void 0:ce.reduce((be,ge)=>be+ge.quantity*ge.price,0))||0,je=((Ee=me.additionalServices)==null?void 0:Ee.reduce((be,ge)=>be+(ge.price||0)*(ge.quantity||1),0))||0,De=me.laborCost||0;return s.jsx("div",{className:"px-4 py-4 bg-slate-900 dark:bg-slate-950 hover:bg-slate-800 dark:hover:bg-slate-900 transition-colors",children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsxs("div",{className:"w-16 flex flex-col items-center gap-2 pt-1",children:[s.jsx("input",{type:"checkbox",className:"rounded border-slate-600"}),s.jsx("div",{className:"w-10 h-10 bg-slate-800 dark:bg-slate-700 rounded flex items-center justify-center flex-shrink-0",children:s.jsx(w3,{className:"w-5 h-5 text-slate-400"})})]}),s.jsxs("div",{className:"flex-1 min-w-[180px]",children:[s.jsx("div",{className:"font-mono font-bold text-blue-400 text-sm mb-1",children:qi(me.id,te==null?void 0:te.work_order_prefix)}),s.jsxs("div",{className:"text-xs text-slate-400",children:[s.jsx("span",{children:"Ngy: "}),s.jsx("span",{className:"text-slate-300",children:Fn(me.creationDate,!0)})]}),s.jsxs("div",{className:"text-xs text-cyan-400",children:["NV: ",me.technicianName||"Cha phn cng"]})]}),s.jsxs("div",{className:"flex-1 min-w-[180px]",children:[s.jsx("div",{className:"font-semibold text-base text-white mb-1",children:me.customerName}),s.jsx("div",{className:"text-xs text-slate-400",children:me.customerPhone}),s.jsxs("div",{className:"text-xs text-slate-400",children:[s.jsx("span",{className:"font-medium",children:"Xe: "}),s.jsx("span",{children:me.vehicleModel||"N/A"}),me.licensePlate&&s.jsxs("span",{className:"ml-1",children:["- ",me.licensePlate]})]}),s.jsx("div",{className:"text-xs text-slate-500 italic mt-1",children:me.issueDescription||"Khng c m t"})]}),s.jsx("div",{className:"flex-1 min-w-[200px]",children:s.jsxs("div",{className:"space-y-1",children:[me.partsUsed&&me.partsUsed.length>0&&s.jsxs("div",{className:"mb-2",children:[s.jsx("div",{className:"text-xs font-medium text-slate-400 mb-0.5",children:"Ph tng:"}),s.jsx("div",{className:"space-y-0.5",children:me.partsUsed.map((be,ge)=>s.jsxs("div",{className:"text-xs text-slate-300",children:[" ",be.partName," x",be.quantity]},ge))})]}),me.additionalServices&&me.additionalServices.length>0&&s.jsxs("div",{className:"mb-2",children:[s.jsx("div",{className:"text-xs font-medium text-slate-400 mb-0.5",children:"Gia cng/t hng:"}),s.jsx("div",{className:"space-y-0.5",children:me.additionalServices.map((be,ge)=>s.jsxs("div",{className:"text-xs text-slate-300",children:[" ",be.description," x",be.quantity||1]},ge))})]}),s.jsx("div",{className:"mt-2",children:s.jsx(J,{status:me.status||"Tip nhn"})}),(!me.partsUsed||me.partsUsed.length===0)&&(!me.additionalServices||me.additionalServices.length===0)&&s.jsx("div",{className:"text-xs text-slate-500 italic mb-2",children:"Cha c chi tit"})]})}),s.jsxs("div",{className:"w-56",children:[s.jsxs("div",{className:"space-y-1 text-xs text-right mb-3",children:[De>0&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-500",children:"Tin cng:"}),s.jsx("span",{className:"text-slate-300",children:Te(De)})]}),ne>0&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-500",children:"Tin ph tng:"}),s.jsx("span",{className:"text-blue-400 font-medium",children:Te(ne)})]}),je>0&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-500",children:"Gi cng/t hng:"}),s.jsx("span",{className:"text-slate-300",children:Te(je)})]}),me.total>0&&s.jsxs("div",{className:"flex justify-between pt-2 border-t border-slate-700 text-sm",children:[s.jsx("span",{className:"text-slate-300 font-bold",children:"Tng cng:"}),s.jsx("span",{className:"text-blue-400 font-bold text-sm",children:Te(me.total)})]}),me.discount&&me.discount>0&&s.jsxs("div",{className:"flex justify-between text-right text-xs",children:[s.jsx("span",{className:"text-red-500",children:"Gim gi:"}),s.jsx("span",{className:"text-red-500",children:Te(me.discount)})]}),me.additionalPayment&&me.additionalPayment>0&&s.jsxs("div",{className:"flex justify-between text-right text-xs text-green-500",children:[s.jsx("span",{children:"Thanh ton trc:"}),s.jsxs("span",{children:["-",Te(me.additionalPayment)]})]}),me.remainingAmount!==void 0&&me.remainingAmount>0&&s.jsxs("div",{className:"flex justify-between text-right text-xs mt-1",children:[s.jsx("span",{children:"Cn phi thu:"}),s.jsx("span",{className:`font-bold ${me.remainingAmount>0?"text-red-500":"text-green-500"}`,children:Te(me.remainingAmount)})]})]}),s.jsx("div",{className:"mt-2",children:s.jsx(ie,{status:me.paymentStatus})})]}),s.jsxs("div",{className:"w-24 flex flex-col items-center gap-2",children:[s.jsxs("button",{onClick:()=>B(me),className:"px-4 py-1.5 bg-cyan-500 hover:bg-cyan-600 text-white text-sm rounded-md transition-colors min-w-[70px] flex items-center justify-center gap-1",title:"Chnh sa phiu",children:[s.jsx(MB,{className:"w-3.5 h-3.5"}),s.jsx("span",{children:"Sa"})]}),s.jsxs("button",{onClick:()=>xe(me),className:"px-4 py-1.5 bg-blue-500 hover:bg-blue-600 text-white text-sm rounded-md transition-colors min-w-[70px] flex items-center justify-center gap-1",children:[s.jsx("span",{children:""}),s.jsx("span",{children:"Xem"})]}),s.jsx("button",{onClick:()=>xe(me),className:"p-2 text-slate-400 hover:text-blue-500 hover:bg-blue-50 dark:hover:bg-blue-900/20 dark:hover:text-blue-400 rounded transition-colors",title:"In phiu dch v",children:s.jsx(iu,{className:"w-4 h-4"})})]})]})},me.id)})})]}),G&&Q&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl w-full max-w-4xl max-h-[90vh] flex flex-col",children:[s.jsxs("div",{className:"bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 px-6 py-4 flex items-center justify-between rounded-t-xl flex-shrink-0",children:[s.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:"Xem trc phiu in"}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("button",{onClick:re,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg flex items-center gap-2 transition",children:[s.jsx(iu,{className:"w-4 h-4"}),"In phiu"]}),s.jsx("button",{onClick:()=>{Z(!1),H(null)},className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-300","aria-label":"ng",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"w-5 h-5",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]})]}),s.jsx("div",{className:"flex-1 overflow-y-auto p-6 bg-slate-100 dark:bg-slate-900",children:s.jsx("div",{className:"bg-white shadow-lg mx-auto",style:{width:"148mm",minHeight:"210mm",color:"#000"},children:s.jsxs("div",{style:{padding:"10mm"},children:[s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr auto 1fr",gap:"3mm",marginBottom:"4mm",alignItems:"start",borderBottom:"2px solid #3b82f6",paddingBottom:"3mm"},children:[s.jsxs("div",{style:{fontSize:"8.5pt",lineHeight:"1.4"},children:[s.jsx("div",{style:{fontWeight:"bold",fontSize:"11pt",marginBottom:"1mm",color:"#1e40af"},children:(te==null?void 0:te.store_name)||"Nhn Lm SmartCare"}),s.jsxs("div",{style:{color:"#000"},children:[""," ",(te==null?void 0:te.address)||"p Ph Li B, X Long Ph Thun, ng Thp"]}),s.jsxs("div",{style:{color:"#000"},children:[" ",(te==null?void 0:te.phone)||"0947.747.907"]}),(te==null?void 0:te.email)&&s.jsxs("div",{style:{color:"#000"},children:[" ",te.email]})]}),(te==null?void 0:te.logo_url)&&s.jsx("div",{style:{textAlign:"center"},children:s.jsx("img",{src:te.logo_url,alt:"Logo",style:{height:"15mm",width:"auto",objectFit:"contain"}})}),s.jsx("div",{style:{fontSize:"8pt",lineHeight:"1.4",textAlign:"right"},children:(te==null?void 0:te.bank_name)&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{style:{fontWeight:"bold",marginBottom:"1mm",color:"#000"},children:[" ",te.bank_name]}),te.bank_account_number&&s.jsxs("div",{style:{color:"#000"},children:["STK: ",te.bank_account_number]}),te.bank_account_holder&&s.jsx("div",{style:{color:"#000",fontSize:"7.5pt"},children:te.bank_account_holder}),te.bank_qr_url&&s.jsx("div",{style:{marginTop:"2mm",display:"inline-block"},children:s.jsx("img",{src:te.bank_qr_url,alt:"QR Banking",style:{height:"15mm",width:"15mm",objectFit:"contain"}})})]})})]}),s.jsxs("div",{style:{marginBottom:"4mm"},children:[s.jsx("div",{style:{textAlign:"center",marginBottom:"2mm"},children:s.jsx("h1",{style:{fontSize:"16pt",fontWeight:"bold",margin:"0",textTransform:"uppercase",color:"#1e40af"},children:"PHIU DCH V SA CHA"})}),s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"9pt",color:"#666"},children:[s.jsx("div",{children:new Date(Q.creationDate).toLocaleString("vi-VN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}),s.jsxs("div",{style:{fontWeight:"bold"},children:["M:"," ",qi(Q.id,te==null?void 0:te.work_order_prefix)]})]})]}),s.jsxs("div",{style:{border:"1px solid #ddd",padding:"3mm",marginBottom:"3mm",borderRadius:"2mm",backgroundColor:"#f8fafc",color:"#000",fontSize:"9pt"},children:[s.jsxs("div",{style:{display:"flex",gap:"4mm",marginBottom:"1.5mm"},children:[s.jsxs("div",{style:{flex:1},children:[s.jsx("span",{style:{fontWeight:"bold"},children:"Khch hng:"})," ",Q.customerName]}),s.jsxs("div",{style:{flex:"0 0 auto"},children:[s.jsx("span",{style:{fontWeight:"bold"},children:"ST:"})," ",Q.customerPhone]})]}),s.jsxs("div",{style:{display:"flex",gap:"4mm"},children:[s.jsxs("div",{style:{flex:1},children:[s.jsx("span",{style:{fontWeight:"bold"},children:"Loi xe:"})," ",Q.vehicleModel]}),s.jsxs("div",{style:{flex:"0 0 auto"},children:[s.jsx("span",{style:{fontWeight:"bold"},children:"Bin s:"})," ",Q.licensePlate]})]})]}),s.jsx("div",{style:{border:"1px solid #ddd",padding:"4mm",marginBottom:"4mm",borderRadius:"2mm",color:"#000"},children:s.jsxs("div",{style:{display:"flex",gap:"3mm"},children:[s.jsx("div",{style:{fontWeight:"bold",minWidth:"20%",flexShrink:0},children:"M t s c:"}),s.jsx("div",{style:{flex:1,whiteSpace:"pre-wrap"},children:Q.issueDescription||"Khng c m t"})]})}),Q.partsUsed&&Q.partsUsed.length>0&&s.jsxs("div",{style:{marginBottom:"4mm",color:"#000"},children:[s.jsx("p",{style:{fontWeight:"bold",margin:"0 0 2mm 0",fontSize:"11pt"},children:"Ph tng s dng:"}),s.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",border:"1px solid #ddd"},children:[s.jsx("thead",{children:s.jsxs("tr",{style:{backgroundColor:"#f5f5f5"},children:[s.jsx("th",{style:{border:"1px solid #ddd",padding:"2mm",textAlign:"left",fontSize:"10pt"},children:"Tn ph tng"}),s.jsx("th",{style:{border:"1px solid #ddd",padding:"2mm",textAlign:"center",fontSize:"10pt",width:"15%"},children:"SL"}),s.jsx("th",{style:{border:"1px solid #ddd",padding:"2mm",textAlign:"right",fontSize:"10pt",width:"25%"},children:"n gi"}),s.jsx("th",{style:{border:"1px solid #ddd",padding:"2mm",textAlign:"right",fontSize:"10pt",width:"25%"},children:"Thnh tin"})]})}),s.jsx("tbody",{children:Q.partsUsed.map((me,ne)=>s.jsxs("tr",{children:[s.jsx("td",{style:{border:"1px solid #ddd",padding:"2mm",fontSize:"10pt"},children:me.partName}),s.jsx("td",{style:{border:"1px solid #ddd",padding:"2mm",textAlign:"center",fontSize:"10pt"},children:me.quantity}),s.jsx("td",{style:{border:"1px solid #ddd",padding:"2mm",textAlign:"right",fontSize:"10pt"},children:Te(me.price)}),s.jsx("td",{style:{border:"1px solid #ddd",padding:"2mm",textAlign:"right",fontSize:"10pt",fontWeight:"bold"},children:Te(me.price*me.quantity)})]},ne))})]})]}),s.jsx("div",{style:{border:"1px solid #ddd",padding:"4mm",marginBottom:"4mm",borderRadius:"2mm",backgroundColor:"#f9f9f9",color:"#000"},children:s.jsx("table",{style:{width:"100%",borderSpacing:"0",color:"#000"},children:s.jsxs("tbody",{children:[s.jsxs("tr",{children:[s.jsx("td",{style:{fontWeight:"bold",paddingBottom:"2mm",fontSize:"10pt"},children:"Tin ph tng:"}),s.jsx("td",{style:{textAlign:"right",paddingBottom:"2mm",fontSize:"10pt"},children:Te(((Y=Q.partsUsed)==null?void 0:Y.reduce((me,ne)=>me+ne.price*ne.quantity,0))||0)})]}),s.jsxs("tr",{children:[s.jsx("td",{style:{fontWeight:"bold",paddingBottom:"2mm",fontSize:"10pt"},children:"Ph dch v:"}),s.jsx("td",{style:{textAlign:"right",paddingBottom:"2mm",fontSize:"10pt"},children:Te(Q.laborCost||0)})]}),s.jsxs("tr",{children:[s.jsx("td",{style:{fontWeight:"bold",paddingBottom:"2mm",fontSize:"10pt"},children:"Gi cng/t hng:"}),s.jsx("td",{style:{textAlign:"right",paddingBottom:"2mm",fontSize:"10pt"},children:Te(((_e=Q.additionalServices)==null?void 0:_e.reduce((me,ne)=>me+(ne.price||0)*(ne.quantity||1),0))||0)})]}),s.jsxs("tr",{style:{borderTop:"2px solid #333"},children:[s.jsx("td",{style:{fontWeight:"bold",paddingTop:"2mm",fontSize:"12pt"},children:"TNG CNG:"}),s.jsxs("td",{style:{textAlign:"right",paddingTop:"2mm",fontSize:"12pt",fontWeight:"bold",color:"#2563eb"},children:[Te(Q.total)," "]})]})]})})}),s.jsx("div",{style:{marginTop:"8mm",paddingTop:"4mm",borderTop:"1px dashed #999",color:"#000"},children:s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"10pt"},children:[s.jsxs("div",{style:{textAlign:"center",width:"45%"},children:[s.jsx("p",{style:{fontWeight:"bold",margin:"0 0 10mm 0",color:"#000"},children:"Khch hng"}),s.jsx("p",{style:{margin:"0",fontSize:"9pt",color:"#666"},children:"(K v ghi r h tn)"})]}),s.jsxs("div",{style:{textAlign:"center",width:"45%"},children:[s.jsx("p",{style:{fontWeight:"bold",margin:"0 0 10mm 0",color:"#000"},children:"Nhn vin"}),s.jsx("p",{style:{margin:"0",fontSize:"9pt",color:"#666"},children:"(K v ghi r h tn)"})]})]})}),s.jsxs("div",{style:{marginTop:"4mm",padding:"3mm",backgroundColor:"#fff9e6",border:"1px solid #ffd700",borderRadius:"2mm",fontSize:"9pt",textAlign:"center",color:"#000"},children:[s.jsx("p",{style:{margin:"0",fontStyle:"italic",color:"#000"},children:"Cm n qu khch  s dng dch v!"}),s.jsx("p",{style:{margin:"1mm 0 0 0",fontStyle:"italic",color:"#000"},children:"Vui lng gi phiu ny  i chiu khi nhn xe"})]})]})})})]})}),s.jsx("div",{id:"work-order-receipt",className:"hidden"})]})},EEe=({isOpen:e,onClose:t,customer:r,sales:n,workOrders:a})=>{const[i,o]=T.useState("sales");if(!e||!r)return null;const l=n.filter(N=>{var S,O;return((S=N.customer)==null?void 0:S.id)===r.id||((O=N.customer)==null?void 0:O.phone)===r.phone}),d=a.filter(N=>N.customerPhone===r.phone),c=l.reduce((N,S)=>N+(S.total||0),0),u=d.reduce((N,S)=>N+(S.total||0),0),x=c+u,b=[...l.map(N=>new Date(N.date).toDateString()),...d.map(N=>new Date(N.creationDate||N.id).toDateString())],k=new Set(b).size,y=Math.floor(x/1e4);return s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[70] p-0 backdrop-blur-sm",children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg w-full max-h-[90vh] overflow-hidden flex flex-col shadow-2xl",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200 dark:border-slate-700",children:[s.jsxs("div",{children:[s.jsxs("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:["Lch s: ",r.name]}),s.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[" ",r.phone]})]}),s.jsx("button",{onClick:t,className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg transition-colors",children:s.jsx(Ap,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 p-6 bg-slate-50 dark:bg-slate-900/50 border-b border-slate-200 dark:border-slate-700",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:l.length}),s.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:"Ha n"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:d.length}),s.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:"Phiu SC"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:Te(x)}),s.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:"Tng chi"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-orange-600 dark:text-orange-400",children:k}),s.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:"Ln n"})]}),s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400",children:[" ",y.toLocaleString()]}),s.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:"im TL"})]})]}),s.jsxs("div",{className:"flex gap-4 px-6 pt-4 border-b border-slate-200 dark:border-slate-700 overflow-x-auto no-scrollbar",children:[s.jsxs("button",{onClick:()=>o("sales"),className:`px-4 py-2 font-medium transition-colors ${i==="sales"?"text-blue-600 dark:text-blue-400 border-b-2 border-blue-600":"text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-slate-100"}`,children:[" Ha n (",l.length,")"]}),s.jsxs("button",{onClick:()=>o("workorders"),className:`px-4 py-2 font-medium transition-colors ${i==="workorders"?"text-blue-600 dark:text-blue-400 border-b-2 border-blue-600":"text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-slate-100"}`,children:[" Phiu sa cha (",d.length,")"]})]}),s.jsx("div",{className:"flex-1 overflow-auto p-6 custom-scrollbar",children:i==="sales"?s.jsx("div",{className:"space-y-3",children:l.length===0?s.jsx("div",{className:"text-center py-12 text-slate-500",children:"Cha c ha n no"}):l.map(N=>s.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg p-4 hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors",children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-bold text-blue-600 dark:text-blue-400",children:N.sale_code||N.id}),s.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:Fn(N.date)})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-lg font-bold text-slate-900 dark:text-slate-100",children:Te(N.total)}),s.jsx("div",{className:"text-xs text-slate-500",children:N.paymentMethod==="cash"?" Tin mt":" CK"})]})]}),s.jsx("div",{className:"space-y-1",children:N.items.map((S,O)=>s.jsxs("div",{className:"text-sm text-slate-700 dark:text-slate-300 flex justify-between",children:[s.jsxs("span",{children:[S.quantity," x ",S.partName]}),s.jsx("span",{className:"font-medium",children:Te(S.quantity*S.sellingPrice)})]},O))})]},N.id))}):s.jsx("div",{className:"space-y-3",children:d.length===0?s.jsx("div",{className:"text-center py-12 text-slate-500",children:"Cha c phiu sa cha no"}):d.map(N=>{const S=N.status==="Tr my"||N.status===" sa xong",O=N.status==="ang sa",A=S?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-300":O?"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300":"bg-slate-100 text-slate-700 dark:bg-slate-700 dark:text-slate-300",P=S?"Hon thnh":O?"ang SC":"Ch x l";return s.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg p-4 hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors",children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-bold text-green-600 dark:text-green-400",children:Z1(N.id)}),s.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:[N.vehicleModel," - ",N.licensePlate]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-lg font-bold text-slate-900 dark:text-slate-100",children:Te(N.total)}),s.jsx("div",{className:`text-xs px-2 py-1 rounded inline-block ${A}`,children:P})]})]}),s.jsxs("div",{className:"text-sm text-slate-700 dark:text-slate-300",children:[s.jsxs("div",{className:"mb-2",children:[s.jsx("span",{className:"font-medium",children:"Vn :"})," ",N.issueDescription]}),N.partsUsed&&N.partsUsed.length>0&&s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Ph tng:"}),s.jsx("div",{className:"ml-4 space-y-1 mt-1",children:N.partsUsed.map((q,W)=>s.jsxs("div",{className:"text-xs flex justify-between",children:[s.jsxs("span",{children:[q.quantity," x ",q.name]}),s.jsx("span",{children:Te(q.price*q.quantity)})]},W))})]})]})]},N.id)})})}),s.jsx("div",{className:"p-4 border-t border-slate-200 dark:border-slate-700 flex justify-end",children:s.jsx("button",{onClick:t,className:"px-4 py-2 bg-slate-600 hover:bg-slate-700 text-white rounded-lg transition-colors",children:"ng"})})]})})},TEe=e=>{const t=e.loyaltyPoints||0,r=e.totalSpent||0,n=e.visitCount||0,a=e.lastVisit?new Date(e.lastVisit):new Date,i=Math.floor((Date.now()-a.getTime())/(1e3*60*60*24));return t>=5e3||r>=2e7||n>=20?"VIP":t>=2e3||r>=1e7||n>=10?"Loyal":i>180&&n>0?"Lost":i>90&&n>0?"At Risk":n>=2&&n<10?"Potential":"New"},OEe=()=>{const{data:e=[],isLoading:t,refetch:r}=H6(),n=PU(),a=pne(),[i,o]=T.useState(20),l=async Pe=>{if(Pe.id)await a.mutateAsync({id:Pe.id,updates:Pe});else{const xe={...Pe,id:`CUS-${Date.now()}-${Math.random().toString(16).slice(2)}`};await n.mutateAsync(xe)}r(),x(null)},[d,c]=T.useState(""),[u,x]=T.useState(null),[b,g]=T.useState(!1),[k,y]=T.useState(!1),[N,S]=T.useState("customers"),[O,A]=T.useState("all"),[P,q]=T.useState(null),[W,R]=T.useState("grid"),[U,L]=T.useState(!1),{data:Q=[]}=Jb(),{data:H=[]}=hK();T.useEffect(()=>{o(20)},[d,O]);const G=Pe=>{const xe=Q.filter(Y=>{var _e,me;return((_e=Y.customer)==null?void 0:_e.id)===Pe.id||((me=Y.customer)==null?void 0:me.phone)===Pe.phone}),B=H.filter(Y=>Y.customerPhone===Pe.phone),re=xe.reduce((Y,_e)=>Y+(_e.total||0),0),J=B.reduce((Y,_e)=>Y+(_e.total||0),0),ie=re+J;return Math.floor(ie/1e4)};T.useEffect(()=>{e.forEach(Pe=>{if(!Pe.segment){const xe=TEe(Pe);a.mutate({id:Pe.id,updates:{segment:xe}})}})},[e.length]);const Z=T.useMemo(()=>{const Pe=d.toLowerCase();let xe=e.filter(B=>B.name.toLowerCase().includes(Pe)||B.phone&&B.phone.includes(Pe));if(O!=="all"){const re={vip:"VIP",loyal:"Loyal",potential:"Potential","at-risk":"At Risk",lost:"Lost",new:"New"}[O];xe=xe.filter(J=>J.segment===re)}return xe},[e,d,O]),te=T.useMemo(()=>Z.slice(0,i),[Z,i]),se=async Pe=>{confirm("Xc nhn xo khch hng ny?")&&(await a.mutateAsync({id:Pe,updates:{status:"inactive"}}),r())},ue=T.useMemo(()=>{const Pe=e.length,xe=e.filter(B=>B.status==="active").length;return{total:Pe,active:xe,newThisMonth:e.filter(B=>{if(!B.created_at)return!1;const re=new Date(B.created_at),J=new Date;return re.getMonth()===J.getMonth()&&re.getFullYear()===J.getFullYear()}).length,revenue:0,vip:e.filter(B=>B.segment==="VIP").length,loyal:e.filter(B=>B.segment==="Loyal").length,potential:e.filter(B=>B.segment==="Potential").length,atRisk:e.filter(B=>B.segment==="At Risk").length,lost:e.filter(B=>B.segment==="Lost").length,new:e.filter(B=>B.segment==="New").length}},[e]),ae=T.useMemo(()=>[{id:"all",label:"Tt c",hint:"Ton b danh sch",count:ue.total,icon:"",activeClasses:"border-slate-300 bg-slate-100/80 text-slate-900 shadow-sm"},{id:"vip",label:"VIP",hint:" 5.000 im",count:ue.vip,icon:"",activeClasses:"border-purple-200 bg-purple-50 text-purple-700 shadow-sm"},{id:"loyal",label:"Trung thnh",hint:"10+ lt",count:ue.loyal,icon:"",activeClasses:"border-blue-200 bg-blue-50 text-blue-700 shadow-sm"},{id:"potential",label:"Tim nng",hint:"2-9 lt",count:ue.potential,icon:"",activeClasses:"border-green-200 bg-green-50 text-green-700 shadow-sm"},{id:"at-risk",label:"Cn chm sc",hint:">90 ngy cha n",count:ue.atRisk,icon:"",activeClasses:"border-orange-200 bg-orange-50 text-orange-700 shadow-sm"},{id:"lost",label:" mt",hint:"Khng quay li",count:ue.lost,icon:"",activeClasses:"border-red-200 bg-red-50 text-red-700 shadow-sm"},{id:"new",label:"Khch mi",hint:"Thng ny",count:ue.new,icon:"",activeClasses:"border-cyan-200 bg-cyan-50 text-cyan-700 shadow-sm"}],[ue]),pe=T.useMemo(()=>[{id:"total",title:"Tng KH",value:ue.total.toLocaleString(),subLabel:`${ue.active} hot ng`,gradient:"from-blue-50 to-blue-100 dark:from-blue-900/30 dark:to-blue-800/20",border:"border-blue-200 dark:border-blue-800",labelClass:"text-blue-700 dark:text-blue-300",valueClass:"text-blue-900 dark:text-blue-100"},{id:"new",title:"Khch mi",value:ue.newThisMonth.toLocaleString(),subLabel:" 0% thng ny",gradient:"from-green-50 to-emerald-100 dark:from-green-900/30 dark:to-emerald-800/20",border:"border-green-200 dark:border-green-800",labelClass:"text-green-700 dark:text-green-300",valueClass:"text-green-900 dark:text-green-100"},{id:"avg",title:"DT TB",value:"0 ",subLabel:"/ khch hng",gradient:"from-purple-50 to-violet-100 dark:from-purple-900/30 dark:to-violet-800/20",border:"border-purple-200 dark:border-purple-800",labelClass:"text-purple-700 dark:text-purple-300",valueClass:"text-purple-900 dark:text-purple-100"},{id:"atRisk",title:"Cn CS",value:ue.atRisk.toLocaleString(),subLabel:"0 tim nng",gradient:"from-orange-50 to-amber-100 dark:from-orange-900/30 dark:to-amber-800/20",border:"border-orange-200 dark:border-orange-800",labelClass:"text-orange-700 dark:text-orange-300",valueClass:"text-orange-900 dark:text-orange-100"}],[ue]),ve={VIP:{label:"VIP",badgeClass:"bg-purple-100 text-purple-700 border border-purple-200 dark:bg-purple-900/30 dark:text-purple-200 dark:border-purple-700",avatarClass:"bg-purple-50 text-purple-700 dark:bg-purple-900/40",icon:""},Loyal:{label:"Trung thnh",badgeClass:"bg-blue-100 text-blue-700 border border-blue-200 dark:bg-blue-900/30 dark:text-blue-200 dark:border-blue-700",avatarClass:"bg-blue-50 text-blue-700 dark:bg-blue-900/40",icon:""},Potential:{label:"Tim nng",badgeClass:"bg-green-100 text-green-700 border border-green-200 dark:bg-green-900/30 dark:text-green-200 dark:border-green-700",avatarClass:"bg-green-50 text-green-700 dark:bg-green-900/40",icon:""},"At Risk":{label:"Cn chm sc",badgeClass:"bg-orange-100 text-orange-700 border border-orange-200 dark:bg-orange-900/30 dark:text-orange-200 dark:border-orange-700",avatarClass:"bg-orange-50 text-orange-700 dark:bg-orange-900/40",icon:""},Lost:{label:" mt",badgeClass:"bg-red-100 text-red-600 border border-red-200 dark:bg-red-900/30 dark:text-red-200 dark:border-red-700",avatarClass:"bg-red-50 text-red-600 dark:bg-red-900/40",icon:""},New:{label:"Khch mi",badgeClass:"bg-cyan-100 text-cyan-700 border border-cyan-200 dark:bg-cyan-900/30 dark:text-cyan-200 dark:border-cyan-700",avatarClass:"bg-cyan-50 text-cyan-700 dark:bg-cyan-900/40",icon:""},default:{label:"Khch hng",badgeClass:"bg-slate-100 text-slate-700 border border-slate-200 dark:bg-slate-800 dark:text-slate-200 dark:border-slate-600",avatarClass:"bg-slate-100 text-slate-600 dark:bg-slate-800",icon:""}};return s.jsxs("div",{className:"h-full flex flex-col bg-slate-50 dark:bg-slate-900 overflow-hidden",children:[s.jsx("div",{className:"bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 flex-none z-20 shadow-sm",children:s.jsxs("div",{className:"flex items-center px-6 overflow-x-auto no-scrollbar",children:[s.jsxs("button",{onClick:()=>S("customers"),className:`flex items-center gap-2 px-4 py-3 md:py-4 border-b-2 font-medium text-sm transition-colors whitespace-nowrap ${N==="customers"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-slate-200"}`,children:[s.jsx(f2e,{className:"w-5 h-5"}),s.jsxs("span",{children:["Khch hng (",ue.total,")"]})]}),s.jsxs("button",{onClick:()=>S("suppliers"),className:`flex items-center gap-2 px-4 py-3 md:py-4 border-b-2 font-medium text-sm transition-colors whitespace-nowrap ${N==="suppliers"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-slate-200"}`,children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),s.jsx("span",{children:"Nh cung cp (0)"})]})]})}),N==="customers"?s.jsxs("div",{className:"flex-1 overflow-y-auto p-6 custom-scrollbar relative",children:[s.jsxs("div",{className:"sticky top-0 z-10 pb-4 -mt-2 pt-2 bg-slate-50/95 dark:bg-slate-900/95 backdrop-blur-sm transition-all",children:[s.jsxs("div",{className:"flex flex-col md:flex-row gap-3 mb-4",children:[s.jsxs("div",{className:"flex-1 relative w-full",children:[s.jsx("svg",{className:"w-5 h-5 absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),s.jsx("input",{type:"text",placeholder:"Tm theo tn, ST, bin s xe...",value:d,onChange:Pe=>c(Pe.target.value),className:"w-full pl-10 pr-14 md:pr-4 py-2.5 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 shadow-sm"}),s.jsxs("button",{onClick:()=>L(!0),className:"md:hidden absolute right-2 top-1/2 -translate-y-1/2 inline-flex items-center gap-1 rounded-full border border-slate-200 bg-white px-3 py-1.5 text-[11px] font-semibold text-slate-600 shadow-sm transition-colors hover:text-slate-900 dark:border-slate-700 dark:bg-slate-800 dark:text-slate-300",children:[s.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.75a.75.75 0 100-1.5.75.75 0 000 1.5zm0 6a.75.75 0 100-1.5.75.75 0 000 1.5zm0 6a.75.75 0 100-1.5.75.75 0 000 1.5z"})}),s.jsx("span",{children:"Tc v"})]})]}),s.jsxs("div",{className:"hidden md:flex gap-2 overflow-x-auto pb-2 md:pb-0 no-scrollbar",children:[s.jsxs("button",{onClick:()=>y(!0),className:"flex items-center gap-2 px-4 py-2.5 bg-green-600 hover:bg-green-700 text-white rounded-lg font-medium transition-colors whitespace-nowrap shadow-sm",children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),s.jsx("span",{children:"Upload DS"})]}),s.jsxs("button",{className:"flex items-center gap-2 px-4 py-2.5 bg-orange-500 hover:bg-orange-600 text-white rounded-lg font-medium transition-colors whitespace-nowrap shadow-sm",onClick:()=>alert("Tnh nng ang pht trin"),children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),s.jsx("span",{children:"Nhc BD"})]}),s.jsxs("button",{onClick:()=>x({}),className:"flex items-center gap-2 px-4 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors whitespace-nowrap shadow-sm",children:[s.jsx(Mc,{className:"w-5 h-5"}),s.jsx("span",{children:"Thm KH"})]})]})]}),s.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white/80 p-4 shadow-sm dark:border-slate-700 dark:bg-slate-800/60 md:border-none md:bg-transparent md:p-0 md:shadow-none",children:[s.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-[11px] font-semibold uppercase tracking-wide text-slate-500",children:"Phn khc khch hng"}),s.jsx("p",{className:"text-xs text-slate-400",children:"Chm  lc nhanh"})]}),s.jsxs("div",{className:"hidden sm:inline-flex rounded-2xl border border-slate-200 bg-white p-1 text-xs font-semibold dark:border-slate-600 dark:bg-slate-900/40",children:[s.jsxs("button",{onClick:()=>R("grid"),className:`flex flex-1 items-center justify-center gap-1 rounded-xl px-3 py-2 transition-colors sm:flex-none ${W==="grid"?"bg-slate-900 text-white dark:bg-slate-100 dark:text-slate-900":"text-slate-500 hover:text-slate-900 dark:text-slate-400 dark:hover:text-white"}`,children:[s.jsx(ree,{className:"h-4 w-4"}),s.jsx("span",{children:"Th"})]}),s.jsxs("button",{onClick:()=>R("list"),className:`flex flex-1 items-center justify-center gap-1 rounded-xl px-3 py-2 transition-colors sm:flex-none ${W==="list"?"bg-slate-900 text-white dark:bg-slate-100 dark:text-slate-900":"text-slate-500 hover:text-slate-900 dark:text-slate-400 dark:hover:text-white"}`,children:[s.jsx(PB,{className:"h-4 w-4"}),s.jsx("span",{children:"Danh sch"})]})]})]}),s.jsx("div",{className:"mt-3 flex gap-3 overflow-x-auto pb-1 no-scrollbar snap-x snap-mandatory md:mt-4 md:snap-none",children:ae.map(Pe=>s.jsx("button",{onClick:()=>A(Pe.id),className:`min-w-[190px] snap-start rounded-2xl border px-4 py-3 text-left transition-all md:min-w-0 ${O===Pe.id?`${Pe.activeClasses} dark:bg-slate-800/80 dark:border-slate-600 dark:text-white`:"bg-white dark:bg-slate-800 text-slate-600 dark:text-slate-300 border-slate-200 dark:border-slate-700 hover:border-slate-300"}`,children:s.jsxs("div",{className:"flex items-center justify-between gap-3",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"text-lg",children:Pe.icon}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-semibold",children:Pe.label}),s.jsx("p",{className:"text-[11px] text-slate-500",children:Pe.hint})]})]}),s.jsx("div",{className:"text-lg font-black text-slate-900 dark:text-slate-100",children:Pe.count})]})},Pe.id))})]})]}),s.jsxs("div",{className:"mb-6 mt-2",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx("svg",{className:"w-5 h-5 text-slate-600 dark:text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),s.jsx("h2",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Thng k tng quan"})]}),s.jsx("div",{className:"flex gap-3 overflow-x-auto pb-2 snap-x snap-mandatory md:grid md:grid-cols-4 md:gap-4 md:overflow-visible md:snap-none",children:pe.map(Pe=>s.jsxs("div",{className:`snap-start min-w-[170px] rounded-lg border bg-gradient-to-br p-3 md:p-4 ${Pe.gradient} ${Pe.border}`,children:[s.jsx("div",{className:`text-[10px] md:text-sm font-semibold mb-1 uppercase ${Pe.labelClass}`,children:Pe.title}),s.jsx("div",{className:`text-2xl md:text-3xl font-black ${Pe.valueClass}`,children:Pe.value}),s.jsx("div",{className:"text-[10px] md:text-xs mt-0.5 text-slate-600 dark:text-slate-300",children:Pe.subLabel})]},Pe.id))})]}),Z.length===0?s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-12 text-center",children:[s.jsx("div",{className:"flex justify-center mb-4",children:s.jsx("svg",{className:"w-16 h-16 text-slate-300 dark:text-slate-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})})}),s.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg",children:"Khng tm thy khch hng no."})]}):s.jsxs(s.Fragment,{children:[W==="grid"?s.jsx("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3",children:te.map(Pe=>{const xe=Pe.segment&&ve[Pe.segment]||ve.default,B=G(Pe),re=Math.min(B/1e4*100,100),J=Pe.totalSpent||0,ie=Pe.visitCount||0,Y=Pe.vehicles||[];Y.find(me=>me.isPrimary)||Y[0];const _e=Y.length>2;return s.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-5 shadow-sm transition-shadow hover:shadow-lg dark:border-slate-700 dark:bg-slate-800",children:[s.jsxs("div",{className:"flex items-start justify-between gap-3",children:[s.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[s.jsx("div",{className:`flex h-12 w-12 items-center justify-center rounded-2xl text-2xl ${xe.avatarClass}`,children:xe.icon}),s.jsxs("div",{className:"min-w-0",children:[s.jsx("p",{className:"text-base font-semibold text-slate-900 dark:text-slate-100 truncate",children:Pe.name||"Cha t tn"}),s.jsxs("p",{className:"mt-0.5 flex flex-wrap items-center gap-2 text-xs text-slate-500 dark:text-slate-400",children:[s.jsx("span",{children:Pe.phone||"Cha c s"}),Pe.lastVisit&&s.jsxs("span",{className:"text-slate-400",children:[" Ln cui ",Fn(Pe.lastVisit)]})]})]})]}),s.jsx("span",{className:`text-[10px] font-semibold uppercase px-3 py-1 rounded-full ${xe.badgeClass}`,children:xe.label})]}),Y.length>0?s.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[Y.slice(0,2).map(me=>s.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full border border-slate-200 bg-slate-50 px-3 py-1 text-xs font-medium text-slate-600 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-200",children:[me.isPrimary&&s.jsx("span",{className:"text-amber-500",children:""}),s.jsx("span",{children:me.model||"Khng r"}),me.licensePlate&&s.jsxs("span",{className:"text-[10px] text-slate-400",children:[" ",me.licensePlate]})]},me.id)),_e&&s.jsxs("span",{className:"rounded-full bg-slate-100 px-3 py-1 text-xs text-slate-500 dark:bg-slate-700 dark:text-slate-300",children:["+",Y.length-2," xe na"]})]}):Pe.vehicleModel?s.jsxs("div",{className:"mt-4 inline-flex items-center gap-2 rounded-full border border-slate-200 bg-slate-50 px-3 py-1 text-xs text-slate-600 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-200",children:[s.jsx(A6,{className:"h-3.5 w-3.5"}),s.jsxs("span",{children:[Pe.vehicleModel,Pe.licensePlate?`  ${Pe.licensePlate}`:""]})]}):null,s.jsxs("div",{className:"mt-4 grid grid-cols-3 gap-3 text-sm",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-[11px] uppercase text-slate-500",children:"Tng chi"}),s.jsx("p",{className:"text-base font-semibold text-slate-900 dark:text-slate-100",children:Te(J)})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-[11px] uppercase text-slate-500",children:"Ln n"}),s.jsx("p",{className:"text-base font-semibold text-slate-900 dark:text-slate-100",children:ie})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-[11px] uppercase text-slate-500",children:"Cui cng"}),s.jsx("p",{className:"text-base font-semibold text-slate-900 dark:text-slate-100",children:Pe.lastVisit?Fn(Pe.lastVisit):""})]})]}),s.jsxs("div",{className:"mt-3",children:[s.jsxs("div",{className:"flex items-center justify-between text-[11px] font-semibold text-amber-700 dark:text-amber-300",children:[s.jsx("span",{children:"im tch lu"}),s.jsx("span",{children:B.toLocaleString()})]}),s.jsx("div",{className:"mt-1 h-1.5 rounded-full bg-amber-100 dark:bg-amber-900/50",children:s.jsx("div",{className:"h-full rounded-full bg-gradient-to-r from-amber-500 via-yellow-400 to-orange-500",style:{width:`${re}%`}})})]}),"Chm  lc nhanh",s.jsxs("div",{className:"mt-4 flex flex-wrap items-center gap-2 border-t border-dashed border-slate-200 pt-3 dark:border-slate-700",children:[s.jsx("button",{onClick:()=>q(Pe),className:"rounded-full bg-blue-50 px-3 py-1.5 text-xs font-semibold text-blue-600 transition-colors hover:bg-blue-100 dark:bg-blue-900/30 dark:text-blue-300",children:"Xem lch s"}),s.jsx("button",{onClick:()=>x(Pe),className:"rounded-full bg-slate-100 px-3 py-1.5 text-xs font-semibold text-slate-700 transition-colors hover:bg-slate-200 dark:bg-slate-700 dark:text-slate-200",children:"Chnh sa"}),s.jsx("button",{onClick:()=>se(Pe.id),className:"rounded-full bg-red-50 px-3 py-1.5 text-xs font-semibold text-red-600 transition-colors hover:bg-red-100 dark:bg-red-900/30 dark:text-red-300",children:"Xa"})]})]},Pe.id)})}):s.jsx("div",{className:"overflow-x-auto rounded-2xl border border-slate-200 bg-white shadow-sm dark:border-slate-700 dark:bg-slate-800",children:s.jsxs("table",{className:"min-w-full text-sm",children:[s.jsx("thead",{className:"bg-slate-50 text-left text-[11px] font-semibold uppercase tracking-wide text-slate-500 dark:bg-slate-900/40 dark:text-slate-300",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3",children:"Khch hng"}),s.jsx("th",{className:"px-4 py-3",children:"Lin h"}),s.jsx("th",{className:"px-4 py-3",children:"Xe"}),s.jsx("th",{className:"px-4 py-3",children:"Tng chi"}),s.jsx("th",{className:"px-4 py-3",children:"Ln n"}),s.jsx("th",{className:"px-4 py-3",children:"Ln cui"}),s.jsx("th",{className:"px-4 py-3 text-right",children:"Tc v"})]})}),s.jsx("tbody",{children:te.map(Pe=>{const xe=Pe.segment&&ve[Pe.segment]||ve.default,B=Pe.vehicles||[],re=B.find(ie=>ie.isPrimary)||B[0],J=re?`${re.model||"Khng r"}${re.licensePlate?`  ${re.licensePlate}`:""}`:Pe.vehicleModel?`${Pe.vehicleModel}${Pe.licensePlate?`  ${Pe.licensePlate}`:""}`:"";return s.jsxs("tr",{className:"border-t border-slate-100 text-slate-600 dark:border-slate-700/60 dark:text-slate-300",children:[s.jsxs("td",{className:"px-4 py-3 align-top",children:[s.jsx("div",{className:"font-semibold text-slate-900 dark:text-slate-100",children:Pe.name||"Cha t tn"}),s.jsxs("span",{className:`mt-1 inline-flex items-center gap-1 rounded-full px-2 py-0.5 text-[10px] font-semibold ${xe.badgeClass}`,children:[xe.icon," ",xe.label]})]}),s.jsxs("td",{className:"px-4 py-3 align-top",children:[s.jsx("div",{className:"font-medium text-slate-900 dark:text-slate-100",children:Pe.phone||""}),s.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:["im:"," ",G(Pe).toLocaleString()]})]}),s.jsx("td",{className:"px-4 py-3 align-top text-slate-900 dark:text-slate-100",children:J}),s.jsx("td",{className:"px-4 py-3 align-top font-semibold text-slate-900 dark:text-slate-100",children:Te(Pe.totalSpent||0)}),s.jsx("td",{className:"px-4 py-3 align-top text-slate-900 dark:text-slate-100",children:Pe.visitCount||0}),s.jsx("td",{className:"px-4 py-3 align-top text-slate-900 dark:text-slate-100",children:Pe.lastVisit?Fn(Pe.lastVisit):""}),s.jsx("td",{className:"px-4 py-3 align-top",children:s.jsxs("div",{className:"flex items-center justify-end gap-2",children:[s.jsx("button",{onClick:()=>q(Pe),className:"rounded-lg border border-slate-200 p-2 text-slate-500 transition-colors hover:border-blue-500 hover:text-blue-600 dark:border-slate-600 dark:text-slate-400 dark:hover:border-blue-500",title:"Xem lch s",children:s.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),s.jsx("button",{onClick:()=>x(Pe),className:"rounded-lg border border-slate-200 p-2 text-slate-500 transition-colors hover:border-blue-500 hover:text-blue-600 dark:border-slate-600 dark:text-slate-400 dark:hover:border-blue-500",title:"Chnh sa",children:s.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),s.jsx("button",{onClick:()=>se(Pe.id),className:"rounded-lg border border-red-200 p-2 text-red-500 transition-colors hover:bg-red-50 dark:border-red-900/60 dark:text-red-300 dark:hover:bg-red-900/40",title:"Xa",children:s.jsx(FV,{className:"h-4 w-4"})})]})})]},Pe.id)})})]})}),i<Z.length&&s.jsx("div",{className:"flex justify-center pb-4 pt-8",children:s.jsxs("button",{onClick:()=>o(Pe=>Pe+20),className:"group flex items-center gap-2 rounded-full border border-slate-200 bg-white px-6 py-3 text-sm font-semibold text-slate-600 shadow-sm transition hover:border-blue-500 hover:text-blue-600 hover:shadow-md dark:border-slate-600 dark:bg-slate-800 dark:text-slate-200",children:[s.jsxs("span",{children:["Hin th thm"," ",Math.min(20,Z.length-i)," khch hng"]}),s.jsx("svg",{className:"h-4 w-4 transition-transform group-hover:translate-y-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})})]}),s.jsxs("button",{onClick:()=>x({}),className:"md:hidden fixed bottom-28 right-5 z-40 inline-flex items-center justify-center rounded-full bg-blue-600 p-4 text-white shadow-lg transition hover:bg-blue-700",children:[s.jsx(Mc,{className:"h-6 w-6"}),s.jsx("span",{className:"sr-only",children:"Thm khch hng"})]}),U&&s.jsxs("div",{className:"md:hidden fixed inset-0 z-30",children:[s.jsx("button",{onClick:()=>L(!1),className:"absolute inset-0 bg-black/40","aria-label":"ng"}),s.jsxs("div",{className:"absolute inset-x-0 bottom-0 rounded-t-3xl bg-white p-5 shadow-2xl dark:bg-slate-800",children:[s.jsx("div",{className:"mx-auto mb-4 h-1.5 w-12 rounded-full bg-slate-200 dark:bg-slate-600"}),s.jsx("h3",{className:"mb-4 text-sm font-semibold text-slate-600 dark:text-slate-300",children:"Tc v nhanh"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("button",{onClick:()=>{L(!1),y(!0)},className:"flex w-full items-center gap-3 rounded-2xl border border-slate-200 bg-slate-50 px-4 py-3 text-left text-sm font-semibold text-slate-700 transition hover:border-blue-500 dark:border-slate-700 dark:bg-slate-700/40 dark:text-slate-200",children:[s.jsx("svg",{className:"h-5 w-5 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),"Upload danh sch"]}),s.jsxs("button",{onClick:()=>{L(!1),alert("Tnh nng ang pht trin")},className:"flex w-full items-center gap-3 rounded-2xl border border-slate-200 bg-slate-50 px-4 py-3 text-left text-sm font-semibold text-slate-700 transition hover:border-blue-500 dark:border-slate-700 dark:bg-slate-700/40 dark:text-slate-200",children:[s.jsx("svg",{className:"h-5 w-5 text-orange-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),"Nhc bo dng"]}),s.jsxs("button",{onClick:()=>{L(!1),x({})},className:"flex w-full items-center gap-3 rounded-2xl bg-blue-600 px-4 py-3 text-left text-sm font-semibold text-white shadow-lg transition hover:bg-blue-700",children:[s.jsx(Mc,{className:"h-5 w-5"})," Thm khch hng"]})]})]})]})]}):s.jsxs("div",{className:"flex-1 overflow-auto p-6 custom-scrollbar",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx("svg",{className:"w-5 h-5 absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),s.jsx("input",{type:"text",placeholder:"Tm theo tn hoc s in thoi...",className:"w-full pl-10 pr-4 py-2.5 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{className:"text-slate-600 dark:text-slate-400 text-sm font-medium",children:["Tng: ",s.jsx("span",{className:"font-bold",children:"0"})," nh cung cp"]}),s.jsxs("button",{onClick:()=>y(!0),className:"flex items-center gap-2 px-4 py-2.5 bg-green-600 hover:bg-green-700 text-white rounded-lg font-medium transition-colors",children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),s.jsx("span",{children:"Upload CSV"})]}),s.jsxs("button",{onClick:()=>g(!0),className:"flex items-center gap-2 px-4 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors",children:[s.jsx(Mc,{className:"w-5 h-5"}),s.jsx("span",{children:"Thm mi"})]})]}),s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-12 text-center",children:[s.jsx("div",{className:"flex justify-center mb-4",children:s.jsx("svg",{className:"w-16 h-16 text-slate-300 dark:text-slate-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),s.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg",children:"Cha c nh cung cp."})]})]}),s.jsx(EEe,{isOpen:!!P,onClose:()=>q(null),customer:P,sales:Q,workOrders:H}),u&&s.jsx(PEe,{customer:u,onSave:l,onClose:()=>x(null)}),b&&s.jsx(IEe,{onClose:()=>g(!1)}),k&&s.jsx(DEe,{onClose:()=>y(!1),type:N})]})},PEe=({customer:e,onSave:t,onClose:r})=>{const[n,a]=T.useState(e.name||""),[i,o]=T.useState(e.phone||""),l=()=>e.vehicles&&e.vehicles.length>0?e.vehicles:e.vehicleModel||e.licensePlate?[{id:`VEH-${Date.now()}`,model:e.vehicleModel||"",licensePlate:e.licensePlate||"",isPrimary:!0}]:[],[d,c]=T.useState(l()),[u,x]=T.useState({model:"",licensePlate:""}),b=()=>{if(!u.model.trim()&&!u.licensePlate.trim())return;const N={id:`VEH-${Date.now()}`,model:u.model.trim(),licensePlate:u.licensePlate.trim(),isPrimary:d.length===0};c([...d,N]),x({model:"",licensePlate:""})},g=N=>{c(d.filter(S=>S.id!==N))},k=N=>{c(d.map(S=>({...S,isPrimary:S.id===N})))},y=N=>{if(N.preventDefault(),!n.trim()){Ze.error("Vui lng nhp tn khch hng");return}if(i.trim()){const O=gAe(i.trim());if(!O.ok){Ze.error(O.error||"S in thoi khng hp l");return}}const S=d.find(O=>O.isPrimary)||d[0];t({id:e.id,name:n.trim(),phone:i.trim(),vehicles:d,vehicleModel:(S==null?void 0:S.model)||"",licensePlate:(S==null?void 0:S.licensePlate)||""}),r()};return s.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:s.jsxs("div",{className:"bg-slate-800 rounded-xl shadow-2xl max-w-md w-full p-6 border border-slate-700",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-white",children:e.id?"Sa khch hng":"Thm khch hng"}),s.jsx("button",{onClick:r,className:"text-slate-400 hover:text-white transition-colors",children:s.jsx(Ap,{className:"w-6 h-6"})})]}),s.jsxs("form",{onSubmit:y,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Tn khch"}),s.jsx("input",{type:"text",placeholder:"Nhp tn khch",required:!0,value:n,onChange:N=>a(N.target.value),className:"w-full px-4 py-3 bg-slate-900 border border-slate-600 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"S in thoi"}),s.jsx("input",{type:"text",placeholder:"VD: 09xxxx",value:i,onChange:N=>o(N.target.value),className:"w-full px-4 py-3 bg-slate-900 border border-slate-600 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Danh sch xe"}),d.length>0&&s.jsx("div",{className:"space-y-2 mb-3",children:d.map(N=>s.jsxs("div",{className:"flex items-center gap-2 p-2 bg-slate-700 rounded-lg",children:[s.jsx("button",{type:"button",onClick:()=>k(N.id),className:`flex-shrink-0 ${N.isPrimary?"text-yellow-400":"text-slate-500 hover:text-yellow-400"}`,title:N.isPrimary?"Xe chnh":"t lm xe chnh",children:s.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})})}),s.jsx(A6,{className:"w-4 h-4 text-blue-400 flex-shrink-0"}),s.jsxs("div",{className:"flex-1 text-sm text-white",children:[s.jsx("span",{className:"font-medium",children:N.model||""}),N.licensePlate&&s.jsxs("span",{className:"text-slate-400 ml-2",children:[" ",N.licensePlate]})]}),s.jsx("button",{type:"button",onClick:()=>g(N.id),className:"flex-shrink-0 text-red-400 hover:text-red-300",title:"Xa xe",children:s.jsx(FV,{className:"w-4 h-4"})})]},N.id))}),s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsx("input",{type:"text",placeholder:"Dng xe",value:u.model,onChange:N=>x({...u,model:N.target.value}),className:"px-3 py-2 bg-slate-900 border border-slate-600 rounded-lg text-white placeholder-slate-500 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"}),s.jsx("input",{type:"text",placeholder:"Bin s",value:u.licensePlate,onChange:N=>x({...u,licensePlate:N.target.value}),className:"px-3 py-2 bg-slate-900 border border-slate-600 rounded-lg text-white placeholder-slate-500 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("button",{type:"button",onClick:b,className:"mt-2 w-full px-3 py-2 bg-green-600 hover:bg-green-700 text-white text-sm rounded-lg font-medium transition-colors flex items-center justify-center gap-2",children:[s.jsx(Mc,{className:"w-4 h-4"}),"Thm xe"]})]}),s.jsxs("div",{className:"flex gap-3 justify-end pt-2",children:[s.jsx("button",{type:"button",onClick:r,className:"px-6 py-2.5 bg-slate-700 hover:bg-slate-600 text-white border border-slate-600 rounded-lg font-medium transition-colors",children:"Hy"}),s.jsx("button",{type:"submit",className:"px-6 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors",children:"Lu"})]})]})]})})},IEe=({onClose:e})=>{const[t,r]=T.useState(""),[n,a]=T.useState(""),[i,o]=T.useState(""),[l,d]=T.useState(""),c=u=>{u.preventDefault(),t.trim()&&(alert(`[M phng]  lu nh cung cp: ${t}`),e())};return s.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:s.jsxs("div",{className:"bg-slate-800 rounded-xl shadow-2xl max-w-md w-full p-6 border border-slate-700",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-white",children:"Thm nh cung cp"}),s.jsx("button",{onClick:e,className:"text-slate-400 hover:text-white transition-colors",children:s.jsx(Ap,{className:"w-6 h-6"})})]}),s.jsxs("form",{onSubmit:c,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:["Tn nh cung cp ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",placeholder:"Nhp tn NCC",required:!0,value:t,onChange:u=>r(u.target.value),className:"w-full px-4 py-3 bg-slate-900 border border-slate-600 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"S in thoi"}),s.jsx("input",{type:"text",placeholder:"VD: 09xxxx",value:n,onChange:u=>a(u.target.value),className:"w-full px-4 py-3 bg-slate-900 border border-slate-600 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"a ch"}),s.jsx("input",{type:"text",placeholder:"a ch lin h",value:i,onChange:u=>o(u.target.value),className:"w-full px-4 py-3 bg-slate-900 border border-slate-600 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Ghi ch"}),s.jsx("textarea",{rows:3,placeholder:"Ghi ch thm...",value:l,onChange:u=>d(u.target.value),className:"w-full px-4 py-3 bg-slate-900 border border-slate-600 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all resize-none"})]}),s.jsxs("div",{className:"flex gap-3 justify-end pt-2",children:[s.jsx("button",{type:"button",onClick:e,className:"px-6 py-2.5 bg-slate-700 hover:bg-slate-600 text-white border border-slate-600 rounded-lg font-medium transition-colors",children:"Hy"}),s.jsx("button",{type:"submit",className:"px-6 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors",children:"Lu"})]})]})]})})},DEe=({onClose:e,type:t})=>{const r=xne(),n=T.useRef(null),[a,i]=T.useState([]),[o,l]=T.useState(""),[d,c]=T.useState(!1),u=g=>{var N;const k=(N=g.target.files)==null?void 0:N[0];if(!k)return;l("");const y=new FileReader;y.onload=S=>{var U;const O=(U=S.target)==null?void 0:U.result;if(!O)return;const A=O.split(`
`).map(L=>L.trim()).filter(Boolean);if(A.length===0){l("File CSV trng.");return}const P=A[0].toLowerCase(),W=P.includes("name")||P.includes("phone")||P.includes("tn")||P.includes("st")?A.slice(1):A,R=[];for(const L of W){const Q=L.split(",").map(H=>H.trim());Q.length===0||!Q[0]||R.push({name:Q[0],phone:Q[1]||void 0})}if(R.length===0){l("Khng tm thy d liu hp l trong CSV.");return}i(R)},y.readAsText(k)},x=async()=>{if(a.length!==0){c(!0);try{if(t==="customers"){const g=a.map(k=>({id:typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():`CUS-${Date.now()}-${Math.random().toString(16).slice(2)}`,name:k.name,phone:k.phone||"",created_at:new Date().toISOString()}));await r.mutateAsync(g),alert(` import thnh cng ${g.length} khch hng!`)}else alert("Chc nng import Nh cung cp ang c pht trin. Vui lng thm hook useCreateSuppliersBulk  kch hot.");e()}catch(g){console.error("Import error:",g),l("C li xy ra khi import. Vui lng th li.")}finally{c(!1)}}},b=t==="customers";return s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl w-full max-h-[90vh] overflow-y-auto p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("h2",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:["Import ",b?"khch hng":"nh cung cp"," t CSV"]}),s.jsx("button",{onClick:e,className:"text-slate-500 hover:text-slate-700",children:s.jsx(Ap,{className:"w-6 h-6"})})]}),s.jsxs("div",{className:"space-y-3 text-sm",children:[s.jsxs("p",{className:"text-slate-600 dark:text-slate-300",children:["Chn file CSV vi ct u tin l"," ",s.jsxs("strong",{children:["tn ",b?"khch hng":"nh cung cp"]}),", ct th hai l ",s.jsx("strong",{children:"s in thoi"})," (ty chn)."]}),s.jsx("input",{ref:n,type:"file",accept:".csv",onChange:u,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"}),o&&s.jsx("div",{className:"text-red-600 text-xs",children:o}),a.length>0&&s.jsxs("div",{className:"border rounded p-3 bg-slate-50 dark:bg-slate-900 max-h-64 overflow-y-auto custom-scrollbar",children:[s.jsxs("div",{className:"font-semibold mb-2 text-slate-900 dark:text-slate-100",children:["Xem trc (",a.length," mc):"]}),s.jsxs("table",{className:"w-full text-xs text-slate-700 dark:text-slate-300",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"text-left border-b dark:border-slate-700",children:[s.jsx("th",{className:"p-1",children:"Tn"}),s.jsx("th",{className:"p-1",children:"ST"})]})}),s.jsx("tbody",{children:a.slice(0,20).map((g,k)=>s.jsxs("tr",{className:"border-b dark:border-slate-700",children:[s.jsx("td",{className:"p-1",children:g.name}),s.jsx("td",{className:"p-1",children:g.phone||"--"})]},k))})]})]}),s.jsxs("div",{className:"flex gap-2 justify-end pt-2",children:[s.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 border rounded hover:bg-slate-50 dark:border-slate-600 dark:hover:bg-slate-700 dark:text-slate-300",children:"Hu"}),s.jsx("button",{disabled:a.length===0||d,onClick:x,className:"px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded disabled:opacity-50 disabled:cursor-not-allowed",children:d?"ang import...":`Import ${a.length>0?`(${a.length})`:""}`})]})]})]})})},MEe=()=>{const{customers:e,suppliers:t,currentBranchId:r,setCashTransactions:n,cashTransactions:a,setPaymentSources:i,paymentSources:o}=Ua(),{data:l=[],isLoading:d}=WA(),{data:c=[],isLoading:u}=L5(),x=M5(),b=BV(),g=k2e(),k=N2e(),y=_2e(),N=S2e(),[S,O]=T.useState(null);T.useEffect(()=>{(async()=>{const{data:Ke}=await It.from("store_settings").select("*").single();Ke&&O(Ke)})()},[]);const[A,P]=T.useState("customer"),[q,W]=T.useState(""),[R,U]=T.useState(!1),[L,Q]=T.useState(!1),[H,G]=T.useState([]),[Z,te]=T.useState([]),[se,ue]=T.useState(!1),[ae,pe]=T.useState(null),[ve,Pe]=T.useState(!1),[xe,B]=T.useState(!1),[re,J]=T.useState(!1),[ie,Y]=T.useState(!1),[_e,me]=T.useState(null),ne=T.useMemo(()=>l.filter(ct=>ct.branchId===r),[l,r]),je=T.useMemo(()=>c.filter(ct=>ct.branchId===r),[c,r]),De=T.useMemo(()=>{if(!q)return ne;const ct=q.toLowerCase();return ne.filter(Ke=>{var zt,Ft;return Ke.customerName.toLowerCase().includes(ct)||((zt=Ke.phone)==null?void 0:zt.includes(ct))||((Ft=Ke.licensePlate)==null?void 0:Ft.toLowerCase().includes(ct))})},[ne,q]);T.useEffect(()=>{console.log("[DebtManager] branchCustomerDebts count:",ne.length,"branchId:",r)},[ne,r]),T.useEffect(()=>{const ct=Ke=>{Ke.target.closest(".debt-menu-dropdown")||pe(null)};return document.addEventListener("mousedown",ct),()=>document.removeEventListener("mousedown",ct)},[]);const ce=T.useMemo(()=>{if(!q)return je;const ct=q.toLowerCase();return je.filter(Ke=>Ke.supplierName.toLowerCase().includes(ct))},[je,q]),Ee=T.useMemo(()=>ne.reduce((ct,Ke)=>ct+Ke.remainingAmount,0),[ne]),be=T.useMemo(()=>je.reduce((ct,Ke)=>ct+Ke.remainingAmount,0),[je]),ge=T.useMemo(()=>H.reduce((ct,Ke)=>{const zt=ne.find(Ft=>Ft.customerId===Ke);return ct+((zt==null?void 0:zt.remainingAmount)||0)},0),[H,ne]),Qe=T.useMemo(()=>Z.reduce((ct,Ke)=>{const zt=je.find(Ft=>Ft.supplierId===Ke);return ct+((zt==null?void 0:zt.remainingAmount)||0)},0),[Z,je]),Ye=(ct,Ke)=>{G(Ke?[...H,ct]:H.filter(zt=>zt!==ct))},at=(ct,Ke)=>{te(Ke?[...Z,ct]:Z.filter(zt=>zt!==ct))},Je=()=>{ue(!0)};return s.jsxs("div",{className:"h-full flex flex-col bg-secondary-bg",children:[s.jsx("div",{className:"bg-primary-bg border-b border-primary-border",children:s.jsx("div",{className:"flex items-center justify-between px-6",children:s.jsxs("div",{className:"flex items-center w-full md:w-auto",children:[s.jsx("button",{onClick:()=>P("customer"),className:`flex-1 md:flex-none px-6 py-4 font-medium text-sm transition-all text-center ${A==="customer"?"text-cyan-600 dark:text-cyan-400 border-b-2 border-cyan-600 dark:border-cyan-400":"text-secondary-text hover:text-primary-text"}`,children:"Cng n khch hng"}),s.jsx("button",{onClick:()=>P("supplier"),className:`flex-1 md:flex-none px-6 py-4 font-medium text-sm transition-all text-center ${A==="supplier"?"text-cyan-600 dark:text-cyan-400 border-b-2 border-cyan-600 dark:border-cyan-400":"text-secondary-text hover:text-primary-text"}`,children:"Cng n nh cung cp"})]})})}),s.jsx("div",{className:"bg-primary-bg px-6 py-4 border-b border-primary-border",children:d||u?s.jsxs("div",{className:"flex items-center justify-center py-8",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-cyan-600"}),s.jsx("span",{className:"ml-3 text-secondary-text",children:"ang ti d liu..."})]}):s.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center gap-4",children:[s.jsxs("div",{className:"w-full md:flex-1 relative",children:[s.jsx("svg",{className:"w-5 h-5 absolute left-3 top-1/2 -translate-y-1/2 text-tertiary-text",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),s.jsx("input",{type:"text",placeholder:A==="customer"?"Tm ST / Tn KH / Tn sn phm / IMEI":"Tm tn / ST nh cung cp",value:q,onChange:ct=>W(ct.target.value),className:"w-full pl-10 pr-4 py-2.5 bg-primary-bg border border-secondary-border rounded-lg text-primary-text placeholder-tertiary-text focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:border-transparent"})]}),s.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-4 w-full md:w-auto",children:[s.jsxs("div",{className:"text-secondary-text text-sm whitespace-nowrap",children:["Tng cng n:"," ",s.jsx("span",{className:"font-bold text-red-600 dark:text-red-400",children:Te(A==="customer"?Ee:be)})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3 w-full md:w-auto",children:[s.jsxs("button",{onClick:()=>Pe(!0),className:"flex items-center justify-center gap-2 px-4 py-2.5 bg-green-600 hover:bg-green-700 text-white rounded-lg font-medium transition-colors whitespace-nowrap",children:[s.jsx(Mc,{className:"w-5 h-5"}),s.jsx("span",{children:"Thm cng n"})]}),s.jsxs("button",{onClick:()=>A==="customer"?U(!0):Q(!0),className:"flex items-center justify-center gap-2 px-4 py-2.5 bg-cyan-600 hover:bg-cyan-700 text-white rounded-lg font-medium transition-colors whitespace-nowrap",children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),s.jsx("span",{children:A==="customer"?"Thu n":"Chi tr n"})]})]}),s.jsx("button",{className:"hidden md:block p-2.5 text-secondary-text hover:text-primary-text transition-colors",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"})})})]})]})}),s.jsx("div",{className:"flex-1 overflow-auto",children:A==="customer"?s.jsx("div",{className:"p-6",children:De.length===0?s.jsx("div",{className:"text-center py-12 text-tertiary-text",children:"Khng c cng n."}):s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"hidden md:grid grid-cols-12 gap-4 px-4 py-2 bg-slate-100 dark:bg-slate-700 rounded-lg text-sm font-semibold text-slate-700 dark:text-slate-300",children:[s.jsx("div",{className:"col-span-4",children:"Khch hng n"}),s.jsx("div",{className:"col-span-3",children:"Ni dung"}),s.jsx("div",{className:"col-span-1 text-right",children:"S tin"}),s.jsx("div",{className:"col-span-1 text-right",children:" tr"}),s.jsx("div",{className:"col-span-2 text-right",children:"Cn n"}),s.jsx("div",{className:"col-span-1"})]}),De.map(ct=>{var Ke,zt,Ft,fr;return s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-4 items-start bg-primary-bg border border-primary-border rounded-lg p-4 hover:border-cyan-500 hover:shadow-md transition-all cursor-pointer group",onClick:()=>{me(ct),J(!0)},children:[s.jsxs("div",{className:"col-span-1 md:col-span-4 flex items-start gap-3",children:[s.jsx("input",{type:"checkbox",checked:H.includes(ct.customerId),onChange:hr=>{hr.stopPropagation(),Ye(ct.customerId,hr.target.checked)},onClick:hr=>hr.stopPropagation(),className:"mt-1 w-4 h-4 rounded border-secondary-border text-cyan-600 focus:ring-cyan-500"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h3",{className:"text-primary-text font-semibold text-base mb-1 truncate",children:ct.customerName}),s.jsxs("div",{className:"space-y-0.5 text-xs text-secondary-text",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),s.jsx("span",{children:ct.phone||"--"})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsxs("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2V9z M9 22V12h6v10"}),s.jsx("rect",{x:"7",y:"5",width:"10",height:"4",rx:"1",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2})]}),s.jsx("span",{className:"font-mono text-xs font-semibold",children:ct.licensePlate||"--"})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),s.jsx("span",{children:Fn(new Date(ct.createdDate))})]}),s.jsxs("div",{className:"flex items-center gap-1 text-cyan-600 dark:text-cyan-400",children:[s.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),s.jsxs("span",{children:["NV:"," ",((zt=(Ke=ct.description.match(/NVK thut:([^\n]+)/))==null?void 0:Ke[1])==null?void 0:zt.trim())||((fr=(Ft=ct.description.match(/NV:([^\n]+)/))==null?void 0:Ft[1])==null?void 0:fr.trim())||"N/A"]})]})]})]})]}),s.jsx("div",{className:"col-span-1 md:col-span-3",children:s.jsx("div",{className:"text-sm text-primary-text space-y-1",children:(()=>{const hr=ct.description.split(`
`),sr=hr[0],Sr=hr.find(vr=>vr.includes("Ph tng  thay:")),tr=Sr?hr.slice(hr.indexOf(Sr)+1,hr.findIndex((vr,rr)=>rr>hr.indexOf(Sr)&&(vr.includes("Dch v:")||vr.includes("Cng lao ng:")))||hr.length).filter(vr=>vr.trim().startsWith("")):[],Jt=hr.find(vr=>vr.includes("Dch v:")),Kt=Jt?hr.slice(hr.indexOf(Jt)+1,hr.findIndex((vr,rr)=>rr>hr.indexOf(Jt)&&vr.includes("Cng lao ng:"))||hr.length).filter(vr=>vr.trim().startsWith("")):[],ar=hr.find(vr=>vr.includes("Cng lao ng:"));return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"font-medium",children:sr}),tr.length>0&&s.jsxs("div",{className:"text-xs text-secondary-text",children:[s.jsx("span",{className:"font-semibold",children:"Ph tng:"})," ",tr.length," mn"]}),Kt.length>0&&s.jsxs("div",{className:"text-xs text-secondary-text",children:[s.jsx("span",{className:"font-semibold",children:"Dch v:"})," ",Kt.length," mn"]}),ar&&s.jsx("div",{className:"text-xs text-cyan-600 dark:text-cyan-400",children:ar})]})})()})}),s.jsxs("div",{className:"col-span-1 text-right md:text-right flex justify-between md:block",children:[s.jsx("span",{className:"md:hidden text-sm text-secondary-text",children:"S tin:"}),s.jsx("div",{className:"text-sm font-semibold text-primary-text",children:Te(ct.totalAmount)})]}),s.jsxs("div",{className:"col-span-1 text-right md:text-right flex justify-between md:block",children:[s.jsx("span",{className:"md:hidden text-sm text-secondary-text",children:" tr:"}),s.jsx("div",{className:"text-sm font-semibold text-green-600 dark:text-green-400",children:Te(ct.paidAmount)})]}),s.jsxs("div",{className:"col-span-1 md:col-span-2 text-right md:text-right flex justify-between md:block",children:[s.jsx("span",{className:"md:hidden text-sm font-bold text-secondary-text",children:"Cn n:"}),s.jsx("div",{className:"text-lg font-bold text-red-600 dark:text-red-400",children:Te(ct.remainingAmount)})]}),s.jsx("div",{className:"col-span-1 flex justify-end hidden md:flex",children:s.jsxs("div",{className:"relative debt-menu-dropdown",children:[s.jsx("button",{onClick:()=>pe(ae===ct.id?null:ct.id),className:"p-2 text-secondary-text hover:text-primary-text transition-colors",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"})})}),ae===ct.id&&s.jsxs("div",{className:"absolute right-0 mt-1 w-48 bg-white dark:bg-slate-800 rounded-lg shadow-lg border border-slate-200 dark:border-slate-700 py-1 z-10",children:[s.jsxs("button",{onClick:()=>{me(ct),J(!0),pe(null)},className:"w-full px-4 py-2 text-left text-sm text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700 flex items-center gap-2",children:[s.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),"Xem chi tit"]}),s.jsxs("button",{onClick:()=>{me(ct),B(!0),pe(null)},className:"w-full px-4 py-2 text-left text-sm text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700 flex items-center gap-2",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Sa"]}),s.jsxs("button",{onClick:()=>{me(ct),Y(!0),pe(null)},className:"w-full px-4 py-2 text-left text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 flex items-center gap-2",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Xa"]})]})]})})]},ct.id)})]})}):s.jsx("div",{className:"p-6",children:ce.length===0?s.jsx("div",{className:"text-center py-12 text-tertiary-text",children:"Khng c cng n."}):s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"hidden md:grid grid-cols-12 gap-4 px-4 py-2 bg-slate-100 dark:bg-slate-700 rounded-lg text-sm font-semibold text-slate-700 dark:text-slate-300",children:[s.jsx("div",{className:"col-span-4",children:"Nh cung cp"}),s.jsx("div",{className:"col-span-3",children:"Ni dung"}),s.jsx("div",{className:"col-span-1 text-right",children:"S tin"}),s.jsx("div",{className:"col-span-1 text-right",children:" tr"}),s.jsx("div",{className:"col-span-2 text-right",children:"Cn n"}),s.jsx("div",{className:"col-span-1"})]}),ce.map(ct=>s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-4 items-start bg-primary-bg border border-primary-border rounded-lg p-4 hover:border-cyan-500 hover:shadow-md transition-all cursor-pointer group",onClick:()=>{me(ct),J(!0)},children:[s.jsxs("div",{className:"col-span-1 md:col-span-4 flex items-start gap-3",children:[s.jsx("input",{type:"checkbox",checked:Z.includes(ct.supplierId),onChange:Ke=>{Ke.stopPropagation(),at(ct.supplierId,Ke.target.checked)},onClick:Ke=>Ke.stopPropagation(),className:"mt-1 w-4 h-4 rounded border-secondary-border text-cyan-600 focus:ring-cyan-500"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h3",{className:"text-primary-text font-semibold text-base mb-1 truncate",children:ct.supplierName}),s.jsx("div",{className:"space-y-0.5 text-xs text-secondary-text",children:s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),s.jsx("span",{children:Fn(new Date(ct.createdDate))})]})})]})]}),s.jsx("div",{className:"col-span-1 md:col-span-3",children:s.jsx("div",{className:"text-sm text-primary-text",children:ct.description})}),s.jsxs("div",{className:"col-span-1 text-right md:text-right flex justify-between md:block",children:[s.jsx("span",{className:"md:hidden text-sm text-secondary-text",children:"S tin:"}),s.jsx("div",{className:"text-sm text-primary-text font-semibold",children:Te(ct.totalAmount)})]}),s.jsxs("div",{className:"col-span-1 text-right md:text-right flex justify-between md:block",children:[s.jsx("span",{className:"md:hidden text-sm text-secondary-text",children:" tr:"}),s.jsx("div",{className:"text-sm text-green-600 dark:text-green-400 font-semibold",children:Te(ct.paidAmount)})]}),s.jsxs("div",{className:"col-span-1 md:col-span-2 text-right md:text-right flex justify-between md:block",children:[s.jsx("span",{className:"md:hidden text-sm font-bold text-secondary-text",children:"Cn n:"}),s.jsx("div",{className:"text-base text-red-600 dark:text-red-400 font-bold",children:Te(ct.remainingAmount)})]}),s.jsxs("div",{className:"col-span-1 flex justify-end relative debt-menu-dropdown hidden md:flex",children:[s.jsx("button",{onClick:Ke=>{Ke.stopPropagation(),pe(ae===ct.id?null:ct.id)},className:"p-1 text-secondary-text hover:text-primary-text transition-colors opacity-0 group-hover:opacity-100",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"})})}),ae===ct.id&&s.jsxs("div",{className:"absolute right-0 top-8 w-48 bg-white dark:bg-slate-800 rounded-lg shadow-lg border border-slate-200 dark:border-slate-700 py-1 z-10",children:[s.jsxs("button",{onClick:Ke=>{Ke.stopPropagation(),me(ct),J(!0),pe(null)},className:"w-full px-4 py-2 text-left text-sm text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700 flex items-center gap-2",children:[s.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),"Xem chi tit"]}),s.jsxs("button",{onClick:Ke=>{Ke.stopPropagation(),me(ct),B(!0),pe(null)},className:"w-full px-4 py-2 text-left text-sm text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700 flex items-center gap-2",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Sa"]}),s.jsxs("button",{onClick:Ke=>{Ke.stopPropagation(),me(ct),Y(!0),pe(null)},className:"w-full px-4 py-2 text-left text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 flex items-center gap-2",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Xa"]})]})]})]},ct.id))]})})}),(A==="customer"&&H.length>0||A==="supplier"&&Z.length>0)&&s.jsx("div",{className:"fixed bottom-6 left-1/2 transform -translate-x-1/2 z-50",children:s.jsxs("button",{onClick:Je,className:"flex items-center gap-3 px-6 py-3 bg-red-600 hover:bg-red-700 text-white rounded-lg font-semibold shadow-2xl transition-all hover:scale-105",children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),s.jsxs("span",{children:[" chn"," ",A==="customer"?H.length:Z.length," ","n"]}),s.jsx("span",{className:"mx-2",children:"|"}),s.jsxs("span",{className:"text-xl font-bold",children:["Tr ht n (",Te(A==="customer"?ge:Qe),")"]})]})}),R&&s.jsx(LEe,{customers:e,customerDebts:l,onClose:()=>U(!1),onCollect:ct=>{const zt={id:`CT-${Date.now()}`,type:"income",date:ct.timestamp,amount:ct.amount,recipient:ct.customerName,notes:`Thu n khch hng - ${ct.customerName}`,paymentSourceId:ct.paymentMethod,branchId:r,category:"debt_collection"};n([zt,...a]),i(o.map(Ft=>Ft.id===ct.paymentMethod?{...Ft,balance:{...Ft.balance,[r]:(Ft.balance[r]||0)+ct.amount}}:Ft)),U(!1)}}),se&&s.jsx(FEe,{isOpen:se,onClose:()=>{ue(!1)},selectedDebts:A==="customer"?ne.filter(ct=>H.includes(ct.customerId)):je.filter(ct=>Z.includes(ct.supplierId)),totalAmount:A==="customer"?ge:Qe,debtType:A,onConfirm:async(ct,Ke)=>{try{if(A==="customer"){for(const zt of H){const Ft=ne.find(fr=>fr.customerId===zt);Ft&&await b.mutateAsync({id:Ft.id,updates:{paidAmount:Ft.totalAmount,remainingAmount:0}})}G([])}else{for(const zt of Z){const Ft=je.find(fr=>fr.supplierId===zt);Ft&&await y.mutateAsync({id:Ft.id,updates:{paidAmount:Ft.totalAmount,remainingAmount:0}})}te([])}ue(!1),Ze.success(` thanh ton thnh cng ${Te(A==="customer"?ge:Qe)} qua ${ct==="cash"?"Tin mt":"Chuyn khon"}`)}catch(zt){Ze.error(zt.message||"Khng th thanh ton")}}}),L&&s.jsx(REe,{suppliers:t,supplierDebts:c,onClose:()=>Q(!1),onPay:ct=>{const zt={id:`CT-${Date.now()}`,type:"expense",date:ct.timestamp,amount:ct.amount,recipient:ct.supplierName,notes:`Tr n nh cung cp - ${ct.supplierName}`,paymentSourceId:ct.paymentMethod,branchId:r,category:"debt_payment"};n([zt,...a]),i(o.map(Ft=>Ft.id===ct.paymentMethod?{...Ft,balance:{...Ft.balance,[r]:(Ft.balance[r]||0)-ct.amount}}:Ft)),Q(!1)}}),ve&&s.jsx(BEe,{activeTab:A,customers:e,suppliers:t,currentBranchId:r,onClose:()=>Pe(!1),onSave:async ct=>{A==="customer"?await x.mutateAsync(ct):await k.mutateAsync(ct),Pe(!1)}}),xe&&_e&&s.jsx(UEe,{debt:_e,activeTab:A,customers:e,suppliers:t,onClose:()=>{B(!1),me(null)},onSave:async ct=>{A==="customer"?await b.mutateAsync({id:_e.id,updates:ct}):await y.mutateAsync({id:_e.id,updates:ct}),B(!1),me(null)}}),re&&_e&&s.jsx(zEe,{debt:_e,activeTab:A,storeSettings:S,onClose:()=>{J(!1),me(null)}}),ie&&_e&&s.jsx(qEe,{debt:_e,activeTab:A,onClose:()=>{Y(!1),me(null)},onConfirm:async()=>{A==="customer"?await g.mutateAsync(_e.id):await N.mutateAsync(_e.id),Y(!1),me(null)}})]})},LEe=({customers:e,customerDebts:t,onClose:r,onCollect:n})=>{const[a,i]=T.useState(""),[o,l]=T.useState("0"),[d,c]=T.useState("cash"),[u,x]=T.useState(new Date().toLocaleString("sv-SE",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).replace(" "," ")),b=T.useMemo(()=>t.find(y=>y.customerId===a),[a,t]),g=(b==null?void 0:b.remainingAmount)||0,k=y=>{y.preventDefault();const N=parseFloat(o);if(N<=0){Ze.error("S tin thanh ton phi ln hn 0");return}if(N>g){Ze.error(`S tin thanh ton khng c vt qu s n cn li (${Te(g)})`);return}const S=e.find(O=>O.id===a);S&&n&&n({customerName:S.name,amount:N,paymentMethod:d,timestamp:u}),r()};return s.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:s.jsxs("div",{className:"bg-secondary-bg rounded-xl shadow-2xl max-w-lg w-full border border-primary-border",children:[s.jsx("div",{className:"px-6 py-4 border-b border-primary-border",children:s.jsx("h2",{className:"text-xl font-semibold text-primary-text",children:"Thu n khch hng"})}),s.jsxs("form",{onSubmit:k,className:"p-6 space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-secondary-text mb-2",children:"Tm kim v chn mt khch hng ang n"}),s.jsxs("select",{value:a,onChange:y=>i(y.target.value),className:"w-full px-4 py-3 bg-primary-bg border border-secondary-border rounded-lg text-primary-text focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:border-transparent",children:[s.jsx("option",{value:"",children:"Chn khch hng..."}),t.map(y=>s.jsxs("option",{value:y.customerId,children:[y.customerName," - ",Te(y.remainingAmount)]},y.customerId))]})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("label",{className:"block text-sm font-medium text-secondary-text",children:"Nhp s tin thanh ton"}),s.jsx("span",{className:"text-cyan-600 dark:text-cyan-400 text-sm",children:Te(parseFloat(o)||0)})]}),s.jsx("input",{type:"number",value:o,onChange:y=>l(y.target.value),className:"w-full px-4 py-3 bg-primary-bg border border-secondary-border rounded-lg text-primary-text focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-tertiary-text",children:"Cn n:"}),s.jsx("span",{className:"text-red-600 dark:text-red-400 font-bold text-base",children:Te(g)})]}),s.jsx("button",{type:"button",onClick:()=>l(g.toString()),className:"text-cyan-600 dark:text-cyan-400 hover:text-cyan-700 dark:hover:text-cyan-300 text-sm mt-1",children:"in s cn n"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-secondary-text mb-3",children:"Hnh thc thanh ton:"}),s.jsxs("div",{className:"flex gap-6",children:[s.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[s.jsx("input",{type:"radio",name:"paymentMethod",value:"cash",checked:d==="cash",onChange:y=>c(y.target.value),className:"w-4 h-4 text-cyan-600 bg-primary-bg border-secondary-border focus:ring-cyan-500"}),s.jsx("span",{className:"text-primary-text",children:"Tin mt"})]}),s.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[s.jsx("input",{type:"radio",name:"paymentMethod",value:"bank",checked:d==="bank",onChange:y=>c(y.target.value),className:"w-4 h-4 text-cyan-600 bg-primary-bg border-secondary-border focus:ring-cyan-500"}),s.jsx("span",{className:"text-primary-text",children:"Chuyn khon"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-secondary-text mb-2",children:"Thi gian to phiu thu"}),s.jsx("input",{type:"text",value:u,onChange:y=>x(y.target.value),className:"w-full px-4 py-3 bg-primary-bg border border-secondary-border rounded-lg text-primary-text focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:border-transparent"})]}),s.jsx("button",{type:"submit",disabled:!a||parseFloat(o)<=0,className:"w-full py-3 bg-primary-bg hover:bg-tertiary-bg text-primary-text rounded-lg font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"To phiu thu"})]}),s.jsx("div",{className:"px-6 py-4 border-t border-primary-border flex justify-end",children:s.jsx("button",{onClick:r,className:"px-6 py-2 text-secondary-text hover:text-primary-text transition-colors",children:"ng"})})]})})},REe=({suppliers:e,supplierDebts:t,onClose:r,onPay:n})=>{const[a,i]=T.useState(""),[o,l]=T.useState("0"),[d,c]=T.useState("cash"),[u,x]=T.useState(new Date().toLocaleString("sv-SE",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).replace(" "," ")),b=T.useMemo(()=>t.find(y=>y.supplierId===a),[a,t]),g=(b==null?void 0:b.remainingAmount)||0,k=y=>{y.preventDefault();const N=parseFloat(o);if(N<=0){Ze.error("S tin thanh ton phi ln hn 0");return}if(N>g){Ze.error(`S tin thanh ton khng c vt qu s n cn li (${Te(g)})`);return}const S=e.find(O=>O.id===a);S&&n&&n({supplierName:S.name,amount:N,paymentMethod:d,timestamp:u}),r()};return s.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:s.jsxs("div",{className:"bg-secondary-bg rounded-xl shadow-2xl max-w-lg w-full border border-primary-border",children:[s.jsx("div",{className:"px-6 py-4 border-b border-primary-border",children:s.jsx("h2",{className:"text-xl font-semibold text-primary-text",children:"Chi tr n nh cung cp"})}),s.jsxs("form",{onSubmit:k,className:"p-6 space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-secondary-text mb-2",children:"Tm kim v chn mt nh cung cp ang n"}),s.jsxs("select",{value:a,onChange:y=>i(y.target.value),className:"w-full px-4 py-3 bg-primary-bg border border-secondary-border rounded-lg text-primary-text focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:border-transparent",children:[s.jsx("option",{value:"",children:"Chn nh cung cp..."}),t.map(y=>s.jsxs("option",{value:y.supplierId,children:[y.supplierName," - ",Te(y.remainingAmount)]},y.supplierId))]})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("label",{className:"block text-sm font-medium text-secondary-text",children:"Nhp s tin thanh ton"}),s.jsx("span",{className:"text-cyan-600 dark:text-cyan-400 text-sm",children:Te(parseFloat(o)||0)})]}),s.jsx("input",{type:"number",value:o,onChange:y=>l(y.target.value),className:"w-full px-4 py-3 bg-primary-bg border border-secondary-border rounded-lg text-primary-text focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-tertiary-text",children:"Cn n:"}),s.jsx("span",{className:"text-red-600 dark:text-red-400 font-bold text-base",children:Te(g)})]}),s.jsx("button",{type:"button",onClick:()=>l(g.toString()),className:"text-cyan-600 dark:text-cyan-400 hover:text-cyan-700 dark:hover:text-cyan-300 text-sm mt-1",children:"in s cn n"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-secondary-text mb-3",children:"Hnh thc thanh ton:"}),s.jsxs("div",{className:"flex gap-6",children:[s.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[s.jsx("input",{type:"radio",name:"paymentMethod",value:"cash",checked:d==="cash",onChange:y=>c(y.target.value),className:"w-4 h-4 text-cyan-600 bg-primary-bg border-secondary-border focus:ring-cyan-500"}),s.jsx("span",{className:"text-primary-text",children:"Tin mt"})]}),s.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[s.jsx("input",{type:"radio",name:"paymentMethod",value:"bank",checked:d==="bank",onChange:y=>c(y.target.value),className:"w-4 h-4 text-cyan-600 bg-primary-bg border-secondary-border focus:ring-cyan-500"}),s.jsx("span",{className:"text-primary-text",children:"Chuyn khon"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-secondary-text mb-2",children:"Thi gian to phiu chi"}),s.jsx("input",{type:"text",value:u,onChange:y=>x(y.target.value),className:"w-full px-4 py-3 bg-primary-bg border border-secondary-border rounded-lg text-primary-text focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:border-transparent"})]}),s.jsx("button",{type:"submit",disabled:!a||parseFloat(o)<=0,className:"w-full py-3 bg-primary-bg hover:bg-tertiary-bg text-primary-text rounded-lg font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"To phiu chi"})]}),s.jsx("div",{className:"px-6 py-4 border-t border-primary-border flex justify-end",children:s.jsx("button",{onClick:r,className:"px-6 py-2 text-secondary-text hover:text-primary-text transition-colors",children:"ng"})})]})})},FEe=({isOpen:e,onClose:t,selectedDebts:r,totalAmount:n,debtType:a,onConfirm:i})=>{const[o,l]=T.useState(null),[d,c]=T.useState(()=>{const x=new Date,b=String(x.getDate()).padStart(2,"0"),g=String(x.getMonth()+1).padStart(2,"0"),k=x.getFullYear(),y=String(x.getHours()).padStart(2,"0"),N=String(x.getMinutes()).padStart(2,"0");return`${b}-${g}-${k} ${y}:${N}`});if(!e)return null;const u=x=>{if(x.preventDefault(),!o){Ze.warning("Vui lng chn hnh thc thanh ton");return}const[b,g]=d.split(" "),[k,y,N]=b.split("-"),[S,O]=g.split(":"),A=new Date(parseInt(N),parseInt(y)-1,parseInt(k),parseInt(S),parseInt(O)).toISOString();i(o,A)};return s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-secondary-bg rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-primary-border",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("svg",{className:"w-6 h-6 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),s.jsxs("h2",{className:"text-xl font-semibold text-primary-text",children:["Tr ht n (",a==="customer"?"nhiu n hng":"nhiu nh cung cp",")"]})]}),s.jsx("button",{onClick:t,className:"text-secondary-text hover:text-primary-text transition-colors",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsxs("form",{onSubmit:u,className:"p-6",children:[s.jsxs("div",{className:"mb-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("span",{className:"text-sm font-medium text-secondary-text",children:"-"}),s.jsx("span",{className:"text-sm font-medium text-secondary-text",children:"Chi tit"}),s.jsx("span",{className:"text-sm font-medium text-secondary-text",children:"S tin"})]}),s.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:r.map((x,b)=>{const g="customerName"in x,k=g?x.customerName:x.supplierName,y=x.description;return s.jsxs("div",{className:"flex items-center justify-between py-2 px-3 bg-tertiary-bg rounded",children:[s.jsx("span",{className:"text-sm text-tertiary-text",children:b+1}),s.jsxs("div",{className:"flex-1 mx-3",children:[s.jsx("div",{className:"text-sm font-medium text-primary-text",children:y}),s.jsx("div",{className:"text-xs text-tertiary-text",children:k})]}),s.jsx("span",{className:"text-sm font-semibold text-primary-text",children:Te(x.remainingAmount)})]},b)})}),s.jsxs("div",{className:"flex items-center justify-between mt-3 pt-3 border-t border-primary-border",children:[s.jsx("span",{className:"font-semibold text-primary-text",children:"TNG"}),s.jsx("span",{className:"text-lg font-bold text-red-500",children:Te(n)})]})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("label",{className:"block text-sm font-medium text-secondary-text mb-3",children:"Hnh thc thanh ton:"}),s.jsxs("div",{className:"flex gap-6",children:[s.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[s.jsx("input",{type:"radio",name:"paymentMethod",value:"cash",checked:o==="cash",onChange:x=>l(x.target.value),className:"w-4 h-4 text-blue-600 focus:ring-blue-500"}),s.jsx("span",{className:"text-primary-text",children:"Tin mt"})]}),s.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[s.jsx("input",{type:"radio",name:"paymentMethod",value:"bank",checked:o==="bank",onChange:x=>l(x.target.value),className:"w-4 h-4 text-blue-600 focus:ring-blue-500"}),s.jsx("span",{className:"text-primary-text",children:"Chuyn khon"})]})]})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("label",{className:"block text-sm font-medium text-secondary-text mb-2",children:"Thi gian to phiu thu"}),s.jsxs("div",{className:"flex items-center gap-2 px-4 py-3 bg-primary-bg border border-secondary-border rounded-lg",children:[s.jsx("input",{type:"text",value:d,onChange:x=>c(x.target.value),className:"flex-1 bg-transparent text-primary-text outline-none"}),s.jsx("svg",{className:"w-5 h-5 text-tertiary-text",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),s.jsx("svg",{className:"w-5 h-5 text-tertiary-text",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})]})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{type:"button",onClick:t,className:"flex-1 px-4 py-3 border border-secondary-border text-secondary-text rounded-lg hover:bg-primary-bg transition-colors font-medium",children:"NG"}),s.jsx("button",{type:"submit",disabled:!o,className:"flex-1 px-4 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-blue-600",children:"TO PHIU THU"})]})]})]})})},BEe=({activeTab:e,customers:t,suppliers:r,currentBranchId:n,onClose:a,onSave:i})=>{const[o,l]=T.useState({customerId:"",supplierId:"",description:"",totalAmount:0,phone:"",licensePlate:""}),d=c=>{if(c.preventDefault(),e==="customer"){const u=t.find(x=>x.id===o.customerId);if(!u){Ze.error("Vui lng chn khch hng");return}i({customerId:o.customerId,customerName:u.name,phone:o.phone||u.phone,licensePlate:o.licensePlate||u.licensePlate,description:o.description,totalAmount:o.totalAmount,paidAmount:0,remainingAmount:o.totalAmount,createdDate:new Date().toISOString(),branchId:n})}else{const u=r.find(x=>x.id===o.supplierId);if(!u){Ze.error("Vui lng chn nh cung cp");return}i({supplierId:o.supplierId,supplierName:u.name,description:o.description,totalAmount:o.totalAmount,paidAmount:0,remainingAmount:o.totalAmount,createdDate:new Date().toISOString(),branchId:n})}};return s.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl max-w-lg w-full border border-slate-200 dark:border-slate-700",children:[s.jsx("div",{className:"px-6 py-4 border-b border-slate-200 dark:border-slate-700",children:s.jsxs("h2",{className:"text-xl font-semibold text-slate-900 dark:text-white",children:["Thm cng n"," ",e==="customer"?"khch hng":"nh cung cp"]})}),s.jsxs("form",{onSubmit:d,className:"p-6 space-y-4",children:[e==="customer"?s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["Khch hng ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("select",{value:o.customerId,onChange:c=>l({...o,customerId:c.target.value}),required:!0,className:"w-full px-4 py-3 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white",children:[s.jsx("option",{value:"",children:"Chn khch hng..."}),t.map(c=>s.jsxs("option",{value:c.id,children:[c.name," - ",c.phone]},c.id))]})]}):s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["Nh cung cp ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("select",{value:o.supplierId,onChange:c=>l({...o,supplierId:c.target.value}),required:!0,className:"w-full px-4 py-3 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white",children:[s.jsx("option",{value:"",children:"Chn nh cung cp..."}),r.map(c=>s.jsx("option",{value:c.id,children:c.name},c.id))]})]}),e==="customer"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"S in thoi"}),s.jsx("input",{type:"text",value:o.phone,onChange:c=>l({...o,phone:c.target.value}),className:"w-full px-4 py-3 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Bin s xe"}),s.jsx("input",{type:"text",value:o.licensePlate,onChange:c=>l({...o,licensePlate:c.target.value}),className:"w-full px-4 py-3 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white"})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["Ni dung cng n ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("textarea",{value:o.description,onChange:c=>l({...o,description:c.target.value}),required:!0,rows:3,className:"w-full px-4 py-3 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white",placeholder:"M t chi tit cng n..."})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["S tin ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"number",value:o.totalAmount||"",onChange:c=>l({...o,totalAmount:Number(c.target.value)}),required:!0,min:"0",className:"w-full px-4 py-3 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white",placeholder:"0"}),s.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:Te(o.totalAmount||0)})]}),s.jsxs("div",{className:"flex gap-3 pt-4",children:[s.jsx("button",{type:"button",onClick:a,className:"flex-1 px-4 py-3 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors font-medium",children:"Hy"}),s.jsx("button",{type:"submit",className:"flex-1 px-4 py-3 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors font-medium",children:"Thm cng n"})]})]})]})})},UEe=({debt:e,activeTab:t,customers:r,suppliers:n,onClose:a,onSave:i})=>{const o="customerName"in e,[l,d]=T.useState({description:e.description,totalAmount:e.totalAmount,paidAmount:e.paidAmount,phone:o?e.phone:"",licensePlate:o?e.licensePlate:""}),c=u=>{u.preventDefault();const x=l.totalAmount-l.paidAmount;if(l.paidAmount>l.totalAmount){Ze.error("S tin  tr khng c ln hn tng tin!");return}i({description:l.description,totalAmount:l.totalAmount,paidAmount:l.paidAmount,remainingAmount:x,...o&&{phone:l.phone,licensePlate:l.licensePlate}})};return s.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl max-w-lg w-full border border-slate-200 dark:border-slate-700",children:[s.jsx("div",{className:"px-6 py-4 border-b border-slate-200 dark:border-slate-700",children:s.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-white",children:"Sa cng n"})}),s.jsxs("form",{onSubmit:c,className:"p-6 space-y-4",children:[s.jsx("div",{className:"bg-slate-100 dark:bg-slate-700 rounded-lg p-3",children:s.jsx("p",{className:"text-sm font-medium text-slate-900 dark:text-white",children:o?e.customerName:e.supplierName})}),o&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"S in thoi"}),s.jsx("input",{type:"text",value:l.phone,onChange:u=>d({...l,phone:u.target.value}),className:"w-full px-4 py-3 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Bin s xe"}),s.jsx("input",{type:"text",value:l.licensePlate,onChange:u=>d({...l,licensePlate:u.target.value}),className:"w-full px-4 py-3 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Ni dung cng n"}),s.jsx("textarea",{value:l.description,onChange:u=>d({...l,description:u.target.value}),rows:3,className:"w-full px-4 py-3 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Tng tin"}),s.jsx("input",{type:"number",value:l.totalAmount,onChange:u=>d({...l,totalAmount:Number(u.target.value)}),min:"0",className:"w-full px-4 py-3 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:" tr"}),s.jsx("input",{type:"number",value:l.paidAmount,onChange:u=>d({...l,paidAmount:Number(u.target.value)}),min:"0",max:l.totalAmount,className:"w-full px-4 py-3 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white"})]}),s.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-3",children:s.jsxs("p",{className:"text-sm text-blue-800 dark:text-blue-300",children:["Cn n:"," ",s.jsx("span",{className:"font-bold",children:Te(l.totalAmount-l.paidAmount)})]})}),s.jsxs("div",{className:"flex gap-3 pt-4",children:[s.jsx("button",{type:"button",onClick:a,className:"flex-1 px-4 py-3 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors font-medium",children:"Hy"}),s.jsx("button",{type:"submit",className:"flex-1 px-4 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors font-medium",children:"Lu thay i"})]})]})]})})},zEe=({debt:e,activeTab:t,storeSettings:r,onClose:n})=>{const a="customerName"in e;return s.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl max-w-2xl w-full border border-slate-200 dark:border-slate-700",children:[s.jsxs("div",{className:"px-6 py-4 border-b border-slate-200 dark:border-slate-700 flex items-center justify-between",children:[s.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-white",children:"Chi tit cng n"}),s.jsx("button",{onClick:n,className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-300",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:a?"Khch hng":"Nh cung cp"}),s.jsx("p",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:a?e.customerName:e.supplierName})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Ngy to"}),s.jsx("p",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:Fn(new Date(e.createdDate))})]})]}),a&&s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"S in thoi"}),s.jsx("p",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:e.phone||"--"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Bin s xe"}),s.jsx("p",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:e.licensePlate||"--"})]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-2",children:"Ni dung"}),s.jsx("div",{className:"bg-slate-100 dark:bg-slate-700 rounded-lg p-4",children:s.jsx("p",{className:"text-slate-900 dark:text-white",children:e.description})})]}),s.jsx("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-4",children:s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-1",children:"Tng tin"}),s.jsx("p",{className:"text-xl font-bold text-slate-900 dark:text-white",children:Te(e.totalAmount)})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-1",children:" tr"}),s.jsx("p",{className:"text-xl font-bold text-green-600 dark:text-green-400",children:Te(e.paidAmount)})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-1",children:"Cn n"}),s.jsx("p",{className:"text-2xl font-bold text-red-600 dark:text-red-400",children:Te(e.remainingAmount)})]})]})}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between text-sm text-slate-600 dark:text-slate-400 mb-2",children:[s.jsx("span",{children:"Tin  thanh ton"}),s.jsxs("span",{children:[Math.round(e.paidAmount/e.totalAmount*100),"%"]})]}),s.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-3",children:s.jsx("div",{className:"bg-green-600 h-3 rounded-full transition-all",style:{width:`${e.paidAmount/e.totalAmount*100}%`}})})]})]}),s.jsxs("div",{className:"px-6 py-4 border-t border-slate-200 dark:border-slate-700 flex justify-between",children:[s.jsxs("button",{onClick:()=>{const i=document.getElementById("debt-print-area");if(i){const o=window.open("","_blank");o&&(o.document.write(`
                    <html>
                      <head>
                        <title>Phiu Cng N - ${a?e.customerName:e.supplierName}</title>
                        <style>
                          body { font-family: Arial, sans-serif; padding: 20px; max-width: 800px; margin: 0 auto; }
                          .store-header { text-align: center; margin-bottom: 30px; padding-bottom: 20px; border-bottom: 2px solid #ddd; }
                          .store-header h2 { margin: 0 0 10px 0; font-size: 24px; color: #0ea5e9; }
                          .store-header p { margin: 5px 0; color: #666; }
                          h1 { text-align: center; margin-bottom: 20px; }
                          .info { margin-bottom: 15px; }
                          .info label { font-weight: bold; }
                          .description { white-space: pre-line; margin: 20px 0; padding: 15px; background: #f5f5f5; border-radius: 8px; }
                          .amounts { display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; margin: 20px 0; }
                          .amount-box { padding: 15px; border: 1px solid #ddd; border-radius: 8px; text-align: center; }
                          .amount-box label { display: block; font-size: 12px; color: #666; margin-bottom: 5px; }
                          .amount-box .value { font-size: 20px; font-weight: bold; }
                          .total { color: #1e40af; }
                          .paid { color: #16a34a; }
                          .remaining { color: #dc2626; }
                          .bank-info { margin-top: 30px; padding: 20px; background: #f0f9ff; border: 2px solid #0ea5e9; border-radius: 8px; }
                          .bank-info h3 { margin: 0 0 15px 0; color: #0369a1; text-align: center; }
                          .bank-info p { margin: 8px 0; }
                          .bank-info strong { display: inline-block; min-width: 150px; }
                          .bank-qr { text-align: center; margin-top: 15px; }
                          .bank-qr img { max-width: 200px; border: 1px solid #ddd; padding: 10px; background: white; }
                          @media print { button { display: none; } }
                        </style>
                      </head>
                      <body>
                        ${r?`
                        <div class="store-header">
                          <h2>${r.store_name||"MOTOCARE"}</h2>
                          ${r.address?`<p> ${r.address}</p>`:""}
                          ${r.phone?`<p> ${r.phone}</p>`:""}
                        </div>
                        `:""}
                        ${i.innerHTML}
                        ${r&&(r.bank_name||r.bank_account_number)?`
                        <div class="bank-info">
                          <h3> THNG TIN CHUYN KHON</h3>
                          ${r.bank_name?`<p><strong>Ngn hng:</strong> ${r.bank_name}</p>`:""}
                          ${r.bank_account_number?`<p><strong>S ti khon:</strong> ${r.bank_account_number}</p>`:""}
                          ${r.bank_account_holder?`<p><strong>Ch ti khon:</strong> ${r.bank_account_holder}</p>`:""}
                          ${r.bank_branch?`<p><strong>Chi nhnh:</strong> ${r.bank_branch}</p>`:""}
                          ${r.bank_qr_url?`<div class="bank-qr"><img src="${r.bank_qr_url}" alt="QR Code" /></div>`:""}
                        </div>
                        `:""}
                        <div style="margin-top: 30px; text-align: center;">
                          <button onclick="window.print()" style="padding: 10px 20px; background: #0ea5e9; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 16px;">In Phiu</button>
                        </div>
                      </body>
                    </html>
                  `),o.document.close())}},className:"px-6 py-2 bg-cyan-600 hover:bg-cyan-700 text-white rounded-lg transition-colors font-medium flex items-center gap-2",children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})}),"In phiu"]}),s.jsx("button",{onClick:n,className:"px-6 py-2 bg-slate-600 hover:bg-slate-700 text-white rounded-lg transition-colors font-medium",children:"ng"})]}),s.jsxs("div",{id:"debt-print-area",style:{display:"none"},children:[s.jsx("h1",{children:"PHIU CNG N"}),s.jsxs("div",{className:"info",children:[s.jsx("label",{children:a?"Khch hng:":"Nh cung cp:"})," ",a?e.customerName:e.supplierName]}),a&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"info",children:[s.jsx("label",{children:"S in thoi:"})," ",e.phone||"Cha c"]}),s.jsxs("div",{className:"info",children:[s.jsx("label",{children:"Bin s xe:"})," ",e.licensePlate||"Cha c"]})]}),s.jsxs("div",{className:"info",children:[s.jsx("label",{children:"Ngy to:"})," ",Fn(new Date(e.createdDate))]}),s.jsxs("div",{className:"description",children:[s.jsx("strong",{children:"Ni dung:"}),s.jsx("br",{}),e.description]}),s.jsxs("div",{className:"amounts",children:[s.jsxs("div",{className:"amount-box",children:[s.jsx("label",{children:"Tng tin"}),s.jsx("div",{className:"value total",children:Te(e.totalAmount)})]}),s.jsxs("div",{className:"amount-box",children:[s.jsx("label",{children:" tr"}),s.jsx("div",{className:"value paid",children:Te(e.paidAmount)})]}),s.jsxs("div",{className:"amount-box",children:[s.jsx("label",{children:"Cn n"}),s.jsx("div",{className:"value remaining",children:Te(e.remainingAmount)})]})]})]})]})})},qEe=({debt:e,activeTab:t,onClose:r,onConfirm:n})=>{const i="customerName"in e?e.customerName:e.supplierName;return s.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:s.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl max-w-md w-full border border-slate-200 dark:border-slate-700",children:s.jsxs("div",{className:"p-6",children:[s.jsx("div",{className:"flex items-center justify-center w-12 h-12 mx-auto bg-red-100 dark:bg-red-900/20 rounded-full mb-4",children:s.jsx("svg",{className:"w-6 h-6 text-red-600 dark:text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),s.jsx("h3",{className:"text-lg font-semibold text-center text-slate-900 dark:text-white mb-2",children:"Xc nhn xa cng n"}),s.jsxs("p",{className:"text-center text-slate-600 dark:text-slate-400 mb-6",children:["Bn c chc chn mun xa cng n ca"," ",s.jsx("span",{className:"font-semibold",children:i}),"?",s.jsx("br",{}),s.jsxs("span",{className:"text-red-600 dark:text-red-400 font-medium",children:["S tin: ",Te(e.remainingAmount)]}),s.jsx("br",{}),s.jsx("span",{className:"text-sm",children:"Hnh ng ny khng th hon tc!"})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:r,className:"flex-1 px-4 py-3 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors font-medium",children:"Hy"}),s.jsx("button",{onClick:n,className:"flex-1 px-4 py-3 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors font-medium",children:"Xa"})]})]})})})},fK=()=>{const e=Un();return xa({mutationFn:({id:t,branchId:r,delta:n})=>FS(t,r,n),onSuccess:()=>{e.invalidateQueries({queryKey:["paymentSourcesRepo"]})},onError:t=>Ze.error(Na(t))})},mK=()=>{const{cashTransactions:e,paymentSources:t,currentBranchId:r,setCashTransactions:n,setPaymentSources:a}=Ua();qc();const i=$U(),o=fK(),[l,d]=T.useState("all"),[c,u]=T.useState("all"),[x,b]=T.useState("month"),[g,k]=T.useState(!1),y=T.useMemo(()=>{let S=e.filter(P=>P.branchId===r);l!=="all"&&(S=S.filter(P=>P.type===l)),c!=="all"&&(S=S.filter(P=>P.paymentSourceId===c));const O=new Date,A=new Date(O.getFullYear(),O.getMonth(),O.getDate());switch(x){case"today":S=S.filter(W=>new Date(W.date)>=A);break;case"week":const P=new Date(A);P.setDate(P.getDate()-7),S=S.filter(W=>new Date(W.date)>=P);break;case"month":const q=new Date(A);q.setMonth(q.getMonth()-1),S=S.filter(W=>new Date(W.date)>=q);break}return S.sort((P,q)=>new Date(q.date).getTime()-new Date(P.date).getTime())},[e,r,l,c,x]),N=T.useMemo(()=>{var W,R;const S=y.filter(U=>U.type==="income").reduce((U,L)=>U+L.amount,0),O=y.filter(U=>U.type==="expense").reduce((U,L)=>U+L.amount,0),A=S-O,P=((W=t.find(U=>U.id==="cash"))==null?void 0:W.balance[r])||0,q=((R=t.find(U=>U.id==="bank"))==null?void 0:R.balance[r])||0;return{income:S,expense:O,balance:A,cashBalance:P,bankBalance:q,totalBalance:P+q}},[y,t,r]);return s.jsxs("div",{className:"h-full flex flex-col bg-slate-50 dark:bg-slate-900",children:[s.jsx("div",{className:"bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 px-6 py-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"S qu"}),s.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:"Theo di thu chi tin mt v chuyn khon"})]}),s.jsxs("button",{onClick:()=>k(!0),className:"flex items-center gap-2 px-4 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors",children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),s.jsx("span",{children:"Thm giao dch"})]})]})}),s.jsxs("div",{className:"p-4 md:p-6",children:[s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-3 md:gap-4 mb-6",children:[s.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-4 border-2 border-green-200 dark:border-green-800",children:[s.jsxs("div",{className:"flex items-center gap-2 text-green-600 dark:text-green-400 text-sm font-medium mb-2",children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 11l5-5m0 0l5 5m-5-5v12"})}),s.jsx("span",{children:"Thu"})]}),s.jsx("div",{className:"text-green-900 dark:text-green-100 text-2xl font-bold",children:Te(N.income)})]}),s.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 rounded-lg p-4 border-2 border-red-200 dark:border-red-800",children:[s.jsxs("div",{className:"flex items-center gap-2 text-red-600 dark:text-red-400 text-sm font-medium mb-2",children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 13l-5 5m0 0l-5-5m5 5V6"})}),s.jsx("span",{children:"Chi"})]}),s.jsx("div",{className:"text-red-900 dark:text-red-100 text-2xl font-bold",children:Te(N.expense)})]}),s.jsxs("div",{className:"col-span-2 md:col-span-1 bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4 border-2 border-blue-200 dark:border-blue-800",children:[s.jsx("div",{className:"text-blue-600 dark:text-blue-400 text-sm font-medium mb-2",children:"Chnh lch"}),s.jsx("div",{className:`text-2xl font-bold ${N.balance>=0?"text-blue-900 dark:text-blue-100":"text-red-600 dark:text-red-400"}`,children:Te(N.balance)})]}),s.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/20 rounded-lg p-4 border-2 border-amber-200 dark:border-amber-800",children:[s.jsx("div",{className:"text-amber-600 dark:text-amber-400 text-sm font-medium mb-2",children:"Tin mt"}),s.jsx("div",{className:"text-amber-900 dark:text-amber-100 text-2xl font-bold",children:Te(N.cashBalance)})]}),s.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 rounded-lg p-4 border-2 border-purple-200 dark:border-purple-800",children:[s.jsx("div",{className:"text-purple-600 dark:text-purple-400 text-sm font-medium mb-2",children:"Ngn hng"}),s.jsx("div",{className:"text-purple-900 dark:text-purple-100 text-2xl font-bold",children:Te(N.bankBalance)})]})]}),s.jsxs("div",{className:"md:hidden space-y-3 mb-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-medium text-slate-500 dark:text-slate-400 mb-1 block",children:"Loi"}),s.jsxs("select",{value:l,onChange:S=>d(S.target.value),className:"w-full p-2 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg text-sm",children:[s.jsx("option",{value:"all",children:"Tt c"}),s.jsx("option",{value:"income",children:"Thu"}),s.jsx("option",{value:"expense",children:"Chi"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-medium text-slate-500 dark:text-slate-400 mb-1 block",children:"Ngun tin"}),s.jsxs("select",{value:c,onChange:S=>u(S.target.value),className:"w-full p-2 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg text-sm",children:[s.jsx("option",{value:"all",children:"Tt c"}),s.jsx("option",{value:"cash",children:"Tin mt"}),s.jsx("option",{value:"bank",children:"Ngn hng"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-medium text-slate-500 dark:text-slate-400 mb-1 block",children:"Thi gian"}),s.jsxs("select",{value:x,onChange:S=>b(S.target.value),className:"w-full p-2 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg text-sm",children:[s.jsx("option",{value:"today",children:"Hm nay"}),s.jsx("option",{value:"week",children:"7 ngy qua"}),s.jsx("option",{value:"month",children:"30 ngy qua"}),s.jsx("option",{value:"all",children:"Tt c"})]})]})]}),s.jsx("div",{className:"hidden md:block bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-4 mb-4",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Loi:"}),s.jsx("div",{className:"flex gap-2",children:[{value:"all",label:"Tt c"},{value:"income",label:"Thu"},{value:"expense",label:"Chi"}].map(S=>s.jsx("button",{onClick:()=>d(S.value),className:`px-3 py-1.5 rounded-md text-sm font-medium transition-colors ${l===S.value?"bg-blue-600 text-white":"bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-600"}`,children:S.label},S.value))})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Ngun tin:"}),s.jsxs("select",{value:c,onChange:S=>u(S.target.value),className:"px-3 py-1.5 bg-slate-100 dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-md text-sm text-slate-900 dark:text-white",children:[s.jsx("option",{value:"all",children:"Tt c"}),s.jsx("option",{value:"cash",children:"Tin mt"}),s.jsx("option",{value:"bank",children:"Ngn hng"})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Thi gian:"}),s.jsx("div",{className:"flex gap-2",children:[{value:"today",label:"Hm nay"},{value:"week",label:"7 ngy"},{value:"month",label:"30 ngy"},{value:"all",label:"Tt c"}].map(S=>s.jsx("button",{onClick:()=>b(S.value),className:`px-3 py-1.5 rounded-md text-sm font-medium transition-colors ${x===S.value?"bg-blue-600 text-white":"bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-600"}`,children:S.label},S.value))})]})]})}),s.jsx("div",{className:"md:hidden space-y-3",children:y.length===0?s.jsx("div",{className:"text-center py-8 text-slate-500 dark:text-slate-400 bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700",children:"Khng c giao dch no"}):y.map(S=>s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg border border-slate-200 dark:border-slate-700 shadow-sm",children:[s.jsxs("div",{className:"flex justify-between items-start mb-2",children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-slate-900 dark:text-white",children:lR(S.category)}),s.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 mt-0.5",children:Fn(new Date(S.date))})]}),s.jsxs("div",{className:`font-bold ${S.type==="income"?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:[S.type==="income"?"+":"-",Te(S.amount)]})]}),s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-slate-600 dark:text-slate-400 truncate max-w-[60%]",children:S.notes||"--"}),s.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-medium bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300",children:S.paymentSourceId==="cash"?"Tin mt":"Ngn hng"})]})]},S.id))}),s.jsx("div",{className:"hidden md:block bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 overflow-hidden",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Ngy"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Loi"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Danh mc"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"i tng"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Ni dung"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Ngun tin"}),s.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"S tin"}),s.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Thao tc"})]})}),s.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:y.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:8,className:"px-4 py-8 text-center text-slate-500 dark:text-slate-400",children:"Khng c giao dch no"})}):y.map(S=>s.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[s.jsx("td",{className:"px-4 py-3 text-sm text-slate-900 dark:text-slate-100",children:Fn(new Date(S.date))}),s.jsx("td",{className:"px-4 py-3",children:s.jsx("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium ${S.type==="income"?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400"}`,children:S.type==="income"?" Thu":" Chi"})}),s.jsx("td",{className:"px-4 py-3 text-sm text-slate-600 dark:text-slate-400",children:lR(S.category)}),s.jsx("td",{className:"px-4 py-3 text-sm text-slate-900 dark:text-slate-100 font-medium",children:S.recipient||"--"}),s.jsx("td",{className:"px-4 py-3 text-sm text-slate-600 dark:text-slate-400",children:S.notes||"--"}),s.jsx("td",{className:"px-4 py-3 text-sm text-slate-600 dark:text-slate-400",children:S.paymentSourceId==="cash"?"Tin mt":"Ngn hng"}),s.jsxs("td",{className:`px-4 py-3 text-right text-sm font-semibold ${S.type==="income"?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:[S.type==="income"?"+":"-",Te(S.amount)]}),s.jsx("td",{className:"px-4 py-3 text-center",children:s.jsx("button",{className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-300",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"})})})})]},S.id))})]})})]}),g&&s.jsx(HEe,{onClose:()=>k(!1),onSave:async S=>{if(!S.amount||S.amount<=0){Ze.warning("S tin phi > 0");return}try{const O=await i.mutateAsync({type:S.type,amount:S.amount,branchId:r,paymentSourceId:S.paymentSourceId,date:S.date,notes:S.notes,category:S.category,recipient:S.recipient});if(O!=null&&O.ok){n(P=>[O.data,...P]);const A=S.type==="income"?S.amount:-S.amount;await o.mutateAsync({id:S.paymentSourceId,branchId:r,delta:A}),a(P=>P.map(q=>q.id===S.paymentSourceId?{...q,balance:{...q.balance,[r]:(q.balance[r]||0)+A}}:q)),Ze.success(" thm giao dch s qu"),k(!1)}else O!=null&&O.error&&Ze.error(O.error.message||"Ghi giao dch tht bi")}catch(O){Ze.error((O==null?void 0:O.message)||"Li khng xc nh")}}})]})},lR=e=>e?{sale_income:"Bn hng",service_income:"Dch v",other_income:"Thu khc",inventory_purchase:"Mua hng",salary:"Lng nhn vin",loan_payment:"Tr n vay",debt_collection:"Thu n khch hng",debt_payment:"Tr n nh cung cp",sale_refund:"Hon tr",other_expense:"Chi khc"}[e]||e:"--",HEe=({onClose:e,onSave:t})=>{const[r,n]=T.useState("income"),[a,i]=T.useState("0"),[o,l]=T.useState(""),[d,c]=T.useState("cash"),[u,x]=T.useState(""),[b,g]=T.useState(""),[k,y]=T.useState(new Date().toISOString().split("T")[0]),N=A=>{A.preventDefault(),t({type:r,amount:parseFloat(a),category:o,paymentSourceId:d,recipient:u,notes:b,date:new Date(k).toISOString()})},S=[{value:"sale_income",label:"Tin bn hng"},{value:"service_income",label:"Tin dch v"},{value:"other_income",label:"Thu nhp khc"}],O=[{value:"inventory_purchase",label:"Mua hng"},{value:"salary",label:"Lng nhn vin"},{value:"rent",label:"Tin thu mt bng"},{value:"utilities",label:"in nc"},{value:"sale_refund",label:"Hon tr khch hng"},{value:"other_expense",label:"Chi ph khc"}];return s.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl max-w-lg w-full border border-slate-200 dark:border-slate-700",children:[s.jsx("div",{className:"px-6 py-4 border-b border-slate-200 dark:border-slate-700",children:s.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-white",children:"Thm giao dch"})}),s.jsxs("form",{onSubmit:N,className:"p-6 space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Loi giao dch"}),s.jsxs("div",{className:"flex gap-4",children:[s.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[s.jsx("input",{type:"radio",value:"income",checked:r==="income",onChange:A=>n(A.target.value),className:"w-4 h-4 text-blue-600"}),s.jsx("span",{className:"text-slate-900 dark:text-white",children:"Thu tin"})]}),s.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[s.jsx("input",{type:"radio",value:"expense",checked:r==="expense",onChange:A=>n(A.target.value),className:"w-4 h-4 text-blue-600"}),s.jsx("span",{className:"text-slate-900 dark:text-white",children:"Chi tin"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"S tin"}),s.jsx("input",{type:"number",value:a,onChange:A=>i(A.target.value),className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Danh mc"}),s.jsxs("select",{value:o,onChange:A=>l(A.target.value),className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white",required:!0,children:[s.jsx("option",{value:"",children:"Chn danh mc"}),(r==="income"?S:O).map(A=>s.jsx("option",{value:A.value,children:A.label},A.value))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"i tng"}),s.jsx("input",{type:"text",value:u,onChange:A=>x(A.target.value),placeholder:r==="income"?"Thu tin t ai?":"Chi tin cho ai?",className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Ngun tin"}),s.jsxs("div",{className:"flex gap-4",children:[s.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[s.jsx("input",{type:"radio",value:"cash",checked:d==="cash",onChange:A=>c(A.target.value),className:"w-4 h-4 text-blue-600"}),s.jsx("span",{className:"text-slate-900 dark:text-white",children:"Tin mt"})]}),s.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[s.jsx("input",{type:"radio",value:"bank",checked:d==="bank",onChange:A=>c(A.target.value),className:"w-4 h-4 text-blue-600"}),s.jsx("span",{className:"text-slate-900 dark:text-white",children:"Ngn hng"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Ngy giao dch"}),s.jsx("input",{type:"date",value:k,onChange:A=>y(A.target.value),className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Ni dung"}),s.jsx("textarea",{value:b,onChange:A=>g(A.target.value),rows:3,className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white",placeholder:"Ghi ch v giao dch..."})]}),s.jsxs("div",{className:"flex gap-3 pt-2",children:[s.jsx("button",{type:"button",onClick:e,className:"flex-1 px-4 py-2.5 bg-slate-200 dark:bg-slate-700 hover:bg-slate-300 dark:hover:bg-slate-600 text-slate-900 dark:text-white rounded-lg font-medium transition-colors",children:"Hy"}),s.jsx("button",{type:"submit",className:"flex-1 px-4 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors",children:"Lu giao dch"})]})]})]})})},xK=()=>{const{currentBranchId:e,setCashTransactions:t,cashTransactions:r,setPaymentSources:n,paymentSources:a}=Ua(),{data:i=[],isLoading:o}=q6(),{data:l=[],isLoading:d}=fne(),c=dne(),u=une();hne();const x=mne(),[b,g]=T.useState(!1),[k,y]=T.useState(!1),[N,S]=T.useState(!1),[O,A]=T.useState(null),[P,q]=T.useState(null),W=T.useMemo(()=>{const U=i.reduce((Z,te)=>Z+te.principal,0),L=i.reduce((Z,te)=>Z+te.remainingAmount,0),Q=U-L,H=i.filter(Z=>Z.status==="active").length,G=i.filter(Z=>Z.status==="overdue").length;return{totalLoans:U,totalRemaining:L,totalPaid:Q,activeLoans:H,overdueLoans:G}},[i]),R=T.useMemo(()=>({active:i.filter(U=>U.status==="active"),overdue:i.filter(U=>U.status==="overdue"),paid:i.filter(U=>U.status==="paid")}),[i]);return s.jsxs("div",{className:"h-full flex flex-col bg-slate-50 dark:bg-slate-900",children:[s.jsx("div",{className:"bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 px-6 py-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Qun l vn & vay"}),s.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:"Theo di cc khon vay v lch tr n"})]}),s.jsxs("button",{onClick:()=>g(!0),className:"flex items-center gap-2 px-4 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors",children:[s.jsx(Mc,{className:"w-5 h-5"}),s.jsx("span",{children:"Thm khon vay"})]})]})}),s.jsx("div",{className:"p-4 md:p-6",children:o||d?s.jsxs("div",{className:"flex items-center justify-center py-12",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-cyan-600"}),s.jsx("span",{className:"ml-3 text-secondary-text",children:"ang ti d liu..."})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-3 md:gap-4 mb-6",children:[s.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4 border-2 border-blue-200 dark:border-blue-800",children:[s.jsx("div",{className:"text-blue-600 dark:text-blue-400 text-sm font-medium mb-2",children:"Tng vay"}),s.jsx("div",{className:"text-blue-900 dark:text-blue-100 text-xl md:text-2xl font-bold truncate",children:Te(W.totalLoans)})]}),s.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 rounded-lg p-4 border-2 border-red-200 dark:border-red-800",children:[s.jsx("div",{className:"text-red-600 dark:text-red-400 text-sm font-medium mb-2",children:"Cn n"}),s.jsx("div",{className:"text-red-900 dark:text-red-100 text-xl md:text-2xl font-bold truncate",children:Te(W.totalRemaining)})]}),s.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-4 border-2 border-green-200 dark:border-green-800",children:[s.jsx("div",{className:"text-green-600 dark:text-green-400 text-sm font-medium mb-2",children:" tr"}),s.jsx("div",{className:"text-green-900 dark:text-green-100 text-xl md:text-2xl font-bold truncate",children:Te(W.totalPaid)})]}),s.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/20 rounded-lg p-4 border-2 border-amber-200 dark:border-amber-800",children:[s.jsx("div",{className:"text-amber-600 dark:text-amber-400 text-sm font-medium mb-2",children:"ang vay"}),s.jsx("div",{className:"text-amber-900 dark:text-amber-100 text-xl md:text-2xl font-bold",children:W.activeLoans}),s.jsx("div",{className:"text-amber-600 dark:text-amber-400 text-xs mt-1",children:"khon"})]}),s.jsxs("div",{className:"col-span-2 md:col-span-1 bg-orange-50 dark:bg-orange-900/20 rounded-lg p-4 border-2 border-orange-200 dark:border-orange-800",children:[s.jsx("div",{className:"text-orange-600 dark:text-orange-400 text-sm font-medium mb-2",children:"Qu hn"}),s.jsx("div",{className:"text-orange-900 dark:text-orange-100 text-xl md:text-2xl font-bold",children:W.overdueLoans}),s.jsx("div",{className:"text-orange-600 dark:text-orange-400 text-xs mt-1",children:"khon"})]})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"Cc khon vay ang hot ng"}),R.active.length===0?s.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-8 text-center text-slate-500 dark:text-slate-400",children:"Khng c khon vay no ang hot ng"}):s.jsx("div",{className:"grid gap-4",children:R.active.map(U=>s.jsx(j_,{loan:U,onPayment:()=>{A(U),S(!0)},onEdit:()=>{q(U),y(!0)}},U.id))})]}),R.overdue.length>0&&s.jsxs("div",{className:"mb-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-orange-600 dark:text-orange-400 mb-4",children:"Cc khon vay qu hn"}),s.jsx("div",{className:"grid gap-4",children:R.overdue.map(U=>s.jsx(j_,{loan:U,onPayment:()=>{A(U),S(!0)},onEdit:()=>{q(U),y(!0)},isOverdue:!0},U.id))})]}),R.paid.length>0&&s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"Cc khon vay  thanh ton"}),s.jsx("div",{className:"grid gap-4",children:R.paid.map(U=>s.jsx(j_,{loan:U,isPaid:!0},U.id))})]})]})}),b&&s.jsx($Ee,{onClose:()=>g(!1),onSave:async U=>{try{await c.mutateAsync(U),Ze.success(" thm khon vay thnh cng"),g(!1)}catch(L){Ze.error(L.message||"Khng th thm khon vay")}}}),k&&P&&s.jsx(VEe,{loan:P,onClose:()=>{y(!1),q(null)},onSave:async U=>{try{await u.mutateAsync({id:P.id,updates:U}),Ze.success(" cp nht khon vay thnh cng"),y(!1),q(null)}catch(L){Ze.error(L.message||"Khng th cp nht khon vay")}}}),N&&O&&s.jsx(WEe,{loan:O,onClose:()=>{S(!1),A(null)},onSave:async U=>{try{await u.mutateAsync({id:O.id,updates:{remainingAmount:U.remainingAmount,status:U.remainingAmount===0?"paid":O.status}}),await x.mutateAsync(U),Ze.success(" ghi nhn thanh ton thnh cng");const Q={id:`CT-${Date.now()}`,type:"expense",date:U.paymentDate,amount:U.totalAmount,recipient:O.lenderName,notes:`Tr n vay - ${O.lenderName} (Gc: ${Te(U.principalAmount)}, Li: ${Te(U.interestAmount)})`,paymentSourceId:U.paymentMethod,branchId:e,category:"loan_payment"};t([Q,...r]),n(a.map(H=>H.id===U.paymentMethod?{...H,balance:{...H.balance,[e]:(H.balance[e]||0)-U.totalAmount}}:H)),S(!1),A(null)}catch(L){Ze.error(L.message||"Khng th ghi nhn thanh ton")}}})]})},j_=({loan:e,onPayment:t,onEdit:r,isOverdue:n,isPaid:a})=>{const i=(e.principal-e.remainingAmount)/e.principal*100,o=Math.ceil((new Date(e.endDate).getTime()-new Date().getTime())/(1e3*60*60*24));return s.jsxs("div",{className:`bg-white dark:bg-slate-800 rounded-lg border-2 p-6 ${n?"border-orange-300 dark:border-orange-700":a?"border-green-300 dark:border-green-700":"border-slate-200 dark:border-slate-700"}`,children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:e.lenderName}),s.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${e.loanType==="bank"?"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400":e.loanType==="personal"?"bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-400":"bg-slate-100 text-slate-800 dark:bg-slate-700 dark:text-slate-400"}`,children:e.loanType==="bank"?"Ngn hng":e.loanType==="personal"?"C nhn":"Khc"})]}),s.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:e.purpose})]}),!a&&s.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[s.jsx("button",{onClick:r,className:"px-4 py-2 bg-amber-500 hover:bg-amber-600 text-white rounded-lg text-sm font-medium transition-colors whitespace-nowrap",children:" Sa"}),s.jsx("button",{onClick:t,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm font-medium transition-colors whitespace-nowrap",children:" Tr n"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"S tin vay"}),s.jsx("div",{className:"text-sm font-semibold text-slate-900 dark:text-white truncate",children:Te(e.principal)})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"Cn n"}),s.jsx("div",{className:"text-sm font-semibold text-red-600 dark:text-red-400 truncate",children:Te(e.remainingAmount)})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"Li sut"}),s.jsxs("div",{className:"text-sm font-semibold text-slate-900 dark:text-white",children:[e.interestRate,"%/nm"]})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"Tr hng thng"}),s.jsx("div",{className:"text-sm font-semibold text-slate-900 dark:text-white truncate",children:Te(e.monthlyPayment)})]})]}),s.jsxs("div",{className:"mb-4",children:[s.jsxs("div",{className:"flex justify-between text-xs text-slate-500 dark:text-slate-400 mb-2",children:[s.jsxs("span",{children:[" tr ",i.toFixed(1),"%"]}),s.jsx("span",{children:!a&&(n?"Qu hn":o>0?`Cn ${o} ngy`:"n hn hm nay")})]}),s.jsx("div",{className:"h-2 bg-slate-200 dark:bg-slate-700 rounded-full overflow-hidden",children:s.jsx("div",{className:`h-full transition-all ${n?"bg-orange-500":a?"bg-green-500":"bg-blue-500"}`,style:{width:`${i}%`}})})]}),s.jsxs("div",{className:"flex items-center justify-between text-xs text-slate-500 dark:text-slate-400",children:[s.jsxs("span",{children:["Ngy vay: ",Fn(new Date(e.startDate))]}),s.jsxs("span",{children:["n hn: ",Fn(new Date(e.endDate))]})]})]})},$Ee=({onClose:e,onSave:t})=>{const[r,n]=T.useState(""),[a,i]=T.useState("bank"),[o,l]=T.useState("0"),[d,c]=T.useState("0"),[u,x]=T.useState("12"),[b,g]=T.useState(new Date().toISOString().split("T")[0]),[k,y]=T.useState(""),[N,S]=T.useState(""),O=A=>{A.preventDefault();const P=parseFloat(o),q=parseFloat(d),W=parseInt(u),R=q/100/12,U=P*(R*Math.pow(1+R,W))/(Math.pow(1+R,W)-1),L=new Date(b),Q=new Date(L);Q.setMonth(Q.getMonth()+W);const H={lenderName:r,loanType:a,principal:P,interestRate:q,term:W,startDate:L.toISOString(),endDate:Q.toISOString(),remainingAmount:P,monthlyPayment:isNaN(U)?0:U,status:"active",purpose:k,collateral:N};t(H)};return s.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl max-w-2xl w-full border border-slate-200 dark:border-slate-700 max-h-[90vh] overflow-y-auto",children:[s.jsx("div",{className:"px-6 py-4 border-b border-slate-200 dark:border-slate-700 sticky top-0 bg-white dark:bg-slate-800",children:s.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-white",children:"Thm khon vay mi"})}),s.jsxs("form",{onSubmit:O,className:"p-6 space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Tn ngn hng/Ngi cho vay *"}),s.jsx("input",{type:"text",value:r,onChange:A=>n(A.target.value),className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Loi vay *"}),s.jsxs("select",{value:a,onChange:A=>i(A.target.value),className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white",children:[s.jsx("option",{value:"bank",children:"Ngn hng"}),s.jsx("option",{value:"personal",children:"C nhn"}),s.jsx("option",{value:"other",children:"Khc"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"S tin vay *"}),s.jsx("input",{type:"number",value:o,onChange:A=>l(A.target.value),className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Li sut (%/nm) *"}),s.jsx("input",{type:"number",step:"0.1",value:d,onChange:A=>c(A.target.value),className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"K hn (thng) *"}),s.jsx("input",{type:"number",value:u,onChange:A=>x(A.target.value),className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white",required:!0})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Ngy vay *"}),s.jsx("input",{type:"date",value:b,onChange:A=>g(A.target.value),className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Mc ch vay"}),s.jsx("input",{type:"text",value:k,onChange:A=>y(A.target.value),placeholder:"V d: M rng ca hng, mua thit b...",className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Ti sn th chp"}),s.jsx("input",{type:"text",value:N,onChange:A=>S(A.target.value),placeholder:"V d: S  nh, giy t xe...",className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white"})]}),s.jsxs("div",{className:"flex gap-3 pt-4",children:[s.jsx("button",{type:"button",onClick:e,className:"flex-1 px-4 py-2.5 bg-slate-200 dark:bg-slate-700 hover:bg-slate-300 dark:hover:bg-slate-600 text-slate-900 dark:text-white rounded-lg font-medium transition-colors",children:"Hy"}),s.jsx("button",{type:"submit",className:"flex-1 px-4 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors",children:"Thm khon vay"})]})]})]})})},VEe=({loan:e,onClose:t,onSave:r})=>{const[n,a]=T.useState(e.lenderName),[i,o]=T.useState(e.loanType),[l,d]=T.useState(e.principal.toString()),[c,u]=T.useState(e.interestRate.toString()),[x,b]=T.useState(e.term.toString()),[g,k]=T.useState(e.startDate.split("T")[0]),[y,N]=T.useState(e.purpose||""),[S,O]=T.useState(e.collateral||""),A=P=>{P.preventDefault();const q=parseFloat(l),W=parseFloat(c),R=parseInt(x),U=W/100/12,L=q*(U*Math.pow(1+U,R))/(Math.pow(1+U,R)-1),Q=new Date(g),H=new Date(Q);H.setMonth(H.getMonth()+R);const G={lenderName:n,loanType:i,principal:q,interestRate:W,term:R,startDate:Q.toISOString(),endDate:H.toISOString(),monthlyPayment:isNaN(L)?0:L,purpose:y,collateral:S};r(G)};return s.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl max-w-2xl w-full border border-slate-200 dark:border-slate-700 max-h-[90vh] overflow-y-auto",children:[s.jsx("div",{className:"px-6 py-4 border-b border-slate-200 dark:border-slate-700 sticky top-0 bg-white dark:bg-slate-800",children:s.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-white",children:"Chnh sa khon vay"})}),s.jsxs("form",{onSubmit:A,className:"p-6 space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Tn ngn hng/Ngi cho vay *"}),s.jsx("input",{type:"text",value:n,onChange:P=>a(P.target.value),className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Loi vay *"}),s.jsxs("select",{value:i,onChange:P=>o(P.target.value),className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white",children:[s.jsx("option",{value:"bank",children:"Ngn hng"}),s.jsx("option",{value:"personal",children:"C nhn"}),s.jsx("option",{value:"other",children:"Khc"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"S tin vay *"}),s.jsx("input",{type:"number",value:l,onChange:P=>d(P.target.value),className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Li sut (%/nm) *"}),s.jsx("input",{type:"number",step:"0.1",value:c,onChange:P=>u(P.target.value),className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"K hn (thng) *"}),s.jsx("input",{type:"number",value:x,onChange:P=>b(P.target.value),className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white",required:!0})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Ngy vay *"}),s.jsx("input",{type:"date",value:g,onChange:P=>k(P.target.value),className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Mc ch vay"}),s.jsx("input",{type:"text",value:y,onChange:P=>N(P.target.value),placeholder:"V d: M rng ca hng, mua thit b...",className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Ti sn th chp"}),s.jsx("input",{type:"text",value:S,onChange:P=>O(P.target.value),placeholder:"V d: S  nh, giy t xe...",className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white"})]}),s.jsxs("div",{className:"flex gap-3 pt-4",children:[s.jsx("button",{type:"button",onClick:t,className:"flex-1 px-4 py-2.5 bg-slate-200 dark:bg-slate-700 hover:bg-slate-300 dark:hover:bg-slate-600 text-slate-900 dark:text-white rounded-lg font-medium transition-colors",children:"Hy"}),s.jsx("button",{type:"submit",className:"flex-1 px-4 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors",children:"Cp nht"})]})]})]})})},WEe=({loan:e,onClose:t,onSave:r})=>{const[n,a]=T.useState(e.monthlyPayment.toString()),[i,o]=T.useState("0"),[l,d]=T.useState("bank"),[c,u]=T.useState(new Date().toISOString().split("T")[0]),[x,b]=T.useState(""),g=parseFloat(n)+parseFloat(i),k=e.remainingAmount-parseFloat(n),y=N=>{N.preventDefault();const S={id:`LOANPAY-${Date.now()}`,loanId:e.id,paymentDate:new Date(c).toISOString(),principalAmount:parseFloat(n),interestAmount:parseFloat(i),totalAmount:g,remainingAmount:Math.max(0,k),paymentMethod:l,notes:x,branchId:e.branchId};r(S)};return s.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl max-w-lg w-full border border-slate-200 dark:border-slate-700",children:[s.jsxs("div",{className:"px-6 py-4 border-b border-slate-200 dark:border-slate-700",children:[s.jsxs("h2",{className:"text-xl font-semibold text-slate-900 dark:text-white",children:["Tr n - ",e.lenderName]}),s.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:["Cn n: ",Te(e.remainingAmount)]})]}),s.jsxs("form",{onSubmit:y,className:"p-6 space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Tin gc *"}),s.jsx("input",{type:"number",value:n,onChange:N=>a(N.target.value),className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Tin li"}),s.jsx("input",{type:"number",value:i,onChange:N=>o(N.target.value),className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white"})]}),s.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4 border border-blue-200 dark:border-blue-800",children:[s.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[s.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Tng tin tr:"}),s.jsx("span",{className:"font-semibold text-slate-900 dark:text-white",children:Te(g)})]}),s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Cn li sau khi tr:"}),s.jsx("span",{className:"font-semibold text-red-600 dark:text-red-400",children:Te(Math.max(0,k))})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Hnh thc thanh ton"}),s.jsxs("div",{className:"flex gap-4",children:[s.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[s.jsx("input",{type:"radio",value:"cash",checked:l==="cash",onChange:N=>d(N.target.value),className:"w-4 h-4 text-blue-600"}),s.jsx("span",{className:"text-slate-900 dark:text-white",children:"Tin mt"})]}),s.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[s.jsx("input",{type:"radio",value:"bank",checked:l==="bank",onChange:N=>d(N.target.value),className:"w-4 h-4 text-blue-600"}),s.jsx("span",{className:"text-slate-900 dark:text-white",children:"Chuyn khon"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Ngy tr"}),s.jsx("input",{type:"date",value:c,onChange:N=>u(N.target.value),className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Ghi ch"}),s.jsx("textarea",{value:x,onChange:N=>b(N.target.value),rows:2,className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white"})]}),s.jsxs("div",{className:"flex gap-3 pt-2",children:[s.jsx("button",{type:"button",onClick:t,className:"flex-1 px-4 py-2.5 bg-slate-200 dark:bg-slate-700 hover:bg-slate-300 dark:hover:bg-slate-600 text-slate-900 dark:text-white rounded-lg font-medium transition-colors",children:"Hy"}),s.jsx("button",{type:"submit",className:"flex-1 px-4 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors",children:"Xc nhn tr n"})]})]})]})})};async function GEe(){try{const{data:e,error:t}=await It.from("fixed_assets").select("*").order("purchase_date",{ascending:!1});if(t)return Ct({code:"supabase",message:"Khng th ti danh sch ti sn c nh",cause:t});const r=(e||[]).map(n=>({id:n.id,name:n.name,assetType:n.asset_type,purchasePrice:parseFloat(n.purchase_price),currentValue:parseFloat(n.current_value),purchaseDate:n.purchase_date,depreciationRate:parseFloat(n.depreciation_rate),depreciationMethod:n.depreciation_method,usefulLife:n.useful_life,status:n.status,serialNumber:n.serial_number,location:n.location,supplier:n.supplier,warranty:n.warranty,notes:n.notes,branchId:n.branch_id,created_at:n.created_at,updated_at:n.updated_at}));return Sn(r)}catch(e){return Ct({code:"network",message:"Li kt ni khi ti ti sn c nh",cause:e})}}async function KEe(e){try{const{data:t,error:r}=await It.from("fixed_assets").insert({name:e.name,asset_type:e.assetType,purchase_price:e.purchasePrice,current_value:e.currentValue,purchase_date:e.purchaseDate,depreciation_rate:e.depreciationRate,depreciation_method:e.depreciationMethod,useful_life:e.usefulLife,status:e.status,serial_number:e.serialNumber,location:e.location,supplier:e.supplier,warranty:e.warranty,notes:e.notes,branch_id:e.branchId}).select().single();return r||!t?Ct({code:"supabase",message:"Khng th thm ti sn c nh",cause:r}):Sn({id:t.id,name:t.name,assetType:t.asset_type,purchasePrice:parseFloat(t.purchase_price),currentValue:parseFloat(t.current_value),purchaseDate:t.purchase_date,depreciationRate:parseFloat(t.depreciation_rate),depreciationMethod:t.depreciation_method,usefulLife:t.useful_life,status:t.status,serialNumber:t.serial_number,location:t.location,supplier:t.supplier,warranty:t.warranty,notes:t.notes,branchId:t.branch_id,created_at:t.created_at,updated_at:t.updated_at})}catch(t){return Ct({code:"network",message:"Li kt ni khi thm ti sn c nh",cause:t})}}async function XEe(e,t){try{const r={};t.name!==void 0&&(r.name=t.name),t.assetType!==void 0&&(r.asset_type=t.assetType),t.purchasePrice!==void 0&&(r.purchase_price=t.purchasePrice),t.currentValue!==void 0&&(r.current_value=t.currentValue),t.purchaseDate!==void 0&&(r.purchase_date=t.purchaseDate),t.depreciationRate!==void 0&&(r.depreciation_rate=t.depreciationRate),t.depreciationMethod!==void 0&&(r.depreciation_method=t.depreciationMethod),t.usefulLife!==void 0&&(r.useful_life=t.usefulLife),t.status!==void 0&&(r.status=t.status),t.serialNumber!==void 0&&(r.serial_number=t.serialNumber),t.location!==void 0&&(r.location=t.location),t.supplier!==void 0&&(r.supplier=t.supplier),t.warranty!==void 0&&(r.warranty=t.warranty),t.notes!==void 0&&(r.notes=t.notes);const{data:n,error:a}=await It.from("fixed_assets").update(r).eq("id",e).select().single();return a||!n?Ct({code:"supabase",message:"Khng th cp nht ti sn c nh",cause:a}):Sn({id:n.id,name:n.name,assetType:n.asset_type,purchasePrice:parseFloat(n.purchase_price),currentValue:parseFloat(n.current_value),purchaseDate:n.purchase_date,depreciationRate:parseFloat(n.depreciation_rate),depreciationMethod:n.depreciation_method,usefulLife:n.useful_life,status:n.status,serialNumber:n.serial_number,location:n.location,supplier:n.supplier,warranty:n.warranty,notes:n.notes,branchId:n.branch_id,created_at:n.created_at,updated_at:n.updated_at})}catch(r){return Ct({code:"network",message:"Li kt ni khi cp nht ti sn c nh",cause:r})}}async function YEe(e){try{const{error:t}=await It.from("fixed_assets").delete().eq("id",e);return t?Ct({code:"supabase",message:"Khng th xa ti sn c nh",cause:t}):Sn(void 0)}catch(t){return Ct({code:"network",message:"Li kt ni khi xa ti sn c nh",cause:t})}}function QEe(){const{currentBranchId:e}=Ua();return Ls({queryKey:["fixed-assets",e],queryFn:async()=>{const t=await GEe();if(!t.ok)throw new Error(t.error.message);return t.data.filter(r=>r.branchId===e)},staleTime:3e4})}function ZEe(){const e=Un(),{currentBranchId:t}=Ua();return xa({mutationFn:async r=>{const n=await KEe(r);if(!n.ok)throw new Error(n.error.message);return n.data},onSuccess:()=>{e.invalidateQueries({queryKey:["fixed-assets",t]})}})}function JEe(){const e=Un(),{currentBranchId:t}=Ua();return xa({mutationFn:async({id:r,updates:n})=>{const a=await XEe(r,n);if(!a.ok)throw new Error(a.error.message);return a.data},onSuccess:()=>{e.invalidateQueries({queryKey:["fixed-assets",t]})}})}function e8e(){const e=Un(),{currentBranchId:t}=Ua();return xa({mutationFn:async r=>{const n=await YEe(r);if(!n.ok)throw new Error(n.error.message)},onSuccess:()=>{e.invalidateQueries({queryKey:["fixed-assets",t]})}})}const t8e=()=>{const{currentBranchId:e}=Ua(),{data:t=[],isLoading:r}=QEe(),n=ZEe(),a=JEe(),i=e8e(),[o,l]=T.useState(!1),[d,c]=T.useState(!1),[u,x]=T.useState(null),[b,g]=T.useState("all"),[k,y]=T.useState("all"),N=T.useMemo(()=>{const q=t.reduce((L,Q)=>L+Q.purchasePrice,0),W=t.reduce((L,Q)=>L+Q.currentValue,0),R=t.filter(L=>L.status==="active").length,U=q-W;return{totalValue:q,currentValue:W,activeAssets:R,totalDepreciation:U}},[t]),S=T.useMemo(()=>t.filter(q=>!(b!=="all"&&q.assetType!==b||k!=="all"&&q.status!==k)),[t,b,k]),O=async q=>{try{await n.mutateAsync({...q,branchId:e}),Ze.success(" thm ti sn c nh"),l(!1)}catch(W){Ze.error(W.message||"Khng th thm ti sn")}},A=async q=>{if(u)try{await a.mutateAsync({id:u.id,updates:q}),Ze.success(" cp nht ti sn"),c(!1),x(null)}catch(W){Ze.error(W.message||"Khng th cp nht ti sn")}},P=async q=>{if(window.confirm("Bn c chc mun xa ti sn ny?"))try{await i.mutateAsync(q),Ze.success(" xa ti sn")}catch(W){Ze.error(W.message||"Khng th xa ti sn")}};return r?s.jsx("div",{className:"h-full flex items-center justify-center",children:s.jsx("div",{className:"text-slate-500 dark:text-slate-400",children:"ang ti..."})}):s.jsxs("div",{className:"h-full flex flex-col bg-slate-50 dark:bg-slate-900",children:[s.jsx("div",{className:"bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 px-6 py-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Ti sn c nh"}),s.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:"Qun l ti sn v theo di khu hao"})]}),s.jsxs("button",{onClick:()=>l(!0),className:"flex items-center gap-2 px-4 py-2.5 bg-green-600 hover:bg-green-700 text-white rounded-lg font-medium transition-colors",children:[s.jsx(Mc,{className:"w-5 h-5"}),s.jsx("span",{children:"Thm ti sn"})]})]})}),s.jsxs("div",{className:"p-4 md:p-6",children:[s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-4",children:[s.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"Tng gi tr mua"}),s.jsx("div",{className:"text-xl font-bold text-slate-900 dark:text-white",children:Te(N.totalValue)})]}),s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-4",children:[s.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"Gi tr hin ti"}),s.jsx("div",{className:"text-xl font-bold text-blue-600 dark:text-blue-400",children:Te(N.currentValue)})]}),s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-4",children:[s.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"Khu hao ly k"}),s.jsx("div",{className:"text-xl font-bold text-orange-600 dark:text-orange-400",children:Te(N.totalDepreciation)})]}),s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-4",children:[s.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"Ti sn ang dng"}),s.jsx("div",{className:"text-xl font-bold text-green-600 dark:text-green-400",children:N.activeAssets})]})]}),s.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-4 mb-4",children:s.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Loi:"}),s.jsxs("select",{value:b,onChange:q=>g(q.target.value),className:"px-3 py-1.5 bg-slate-100 dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-sm",children:[s.jsx("option",{value:"all",children:"Tt c"}),s.jsx("option",{value:"equipment",children:"Thit b"}),s.jsx("option",{value:"vehicle",children:"Xe c"}),s.jsx("option",{value:"building",children:"Nh xng"}),s.jsx("option",{value:"furniture",children:"Ni tht"}),s.jsx("option",{value:"other",children:"Khc"})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Trng thi:"}),s.jsxs("select",{value:k,onChange:q=>y(q.target.value),className:"px-3 py-1.5 bg-slate-100 dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-sm",children:[s.jsx("option",{value:"all",children:"Tt c"}),s.jsx("option",{value:"active",children:"ang dng"}),s.jsx("option",{value:"maintenance",children:"Bo tr"}),s.jsx("option",{value:"disposed",children:" thanh l"})]})]})]})}),S.length===0?s.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-8 text-center text-slate-500 dark:text-slate-400",children:t.length===0?"Cha c ti sn c nh no":"Khng tm thy ti sn ph hp"}):s.jsx("div",{className:"grid gap-4",children:S.map(q=>s.jsx(r8e,{asset:q,onEdit:()=>{x(q),c(!0)},onDelete:()=>P(q.id)},q.id))})]}),o&&s.jsx(cR,{onClose:()=>l(!1),onSave:O,branchId:e}),d&&u&&s.jsx(cR,{asset:u,onClose:()=>{c(!1),x(null)},onSave:A,branchId:e})]})},r8e=({asset:e,onEdit:t,onDelete:r})=>{const n=(e.purchasePrice-e.currentValue)/e.purchasePrice*100,a=l=>({equipment:"Thit b",vehicle:"Xe c",building:"Nh xng",furniture:"Ni tht",other:"Khc"})[l]||l,i=l=>{const d={active:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400",maintenance:"bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-400",disposed:"bg-slate-100 text-slate-800 dark:bg-slate-700 dark:text-slate-400"};return d[l]||d.active},o=l=>({active:"ang dng",maintenance:"Bo tr",disposed:" thanh l"})[l]||l;return s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-6",children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:e.name}),s.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400",children:a(e.assetType)}),s.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${i(e.status)}`,children:o(e.status)})]}),e.serialNumber&&s.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:["Serial: ",e.serialNumber]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:t,className:"px-3 py-1.5 bg-amber-500 hover:bg-amber-600 text-white rounded-lg text-sm font-medium transition-colors",children:" Sa"}),s.jsx("button",{onClick:r,className:"px-3 py-1.5 bg-red-500 hover:bg-red-600 text-white rounded-lg text-sm font-medium transition-colors",children:" Xa"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"Gi mua"}),s.jsx("div",{className:"text-sm font-semibold text-slate-900 dark:text-white",children:Te(e.purchasePrice)})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"Gi tr hin ti"}),s.jsx("div",{className:"text-sm font-semibold text-blue-600 dark:text-blue-400",children:Te(e.currentValue)})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"Khu hao/nm"}),s.jsxs("div",{className:"text-sm font-semibold text-slate-900 dark:text-white",children:[e.depreciationRate,"%"]})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"Thi gian SD"}),s.jsxs("div",{className:"text-sm font-semibold text-slate-900 dark:text-white",children:[e.usefulLife," nm"]})]})]}),s.jsxs("div",{className:"mb-3",children:[s.jsxs("div",{className:"flex justify-between text-xs text-slate-500 dark:text-slate-400 mb-2",children:[s.jsxs("span",{children:["Khu hao: ",n.toFixed(1),"%"]}),s.jsxs("span",{children:["Cn li: ",(100-n).toFixed(1),"%"]})]}),s.jsx("div",{className:"h-2 bg-slate-200 dark:bg-slate-700 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-orange-500 transition-all",style:{width:`${n}%`}})})]}),s.jsxs("div",{className:"flex items-center justify-between text-xs text-slate-500 dark:text-slate-400",children:[s.jsxs("span",{children:["Ngy mua: ",Fn(new Date(e.purchaseDate))]}),e.location&&s.jsxs("span",{children:["V tr: ",e.location]})]})]})},cR=({asset:e,onClose:t,onSave:r,branchId:n})=>{const[a,i]=T.useState((e==null?void 0:e.name)||""),[o,l]=T.useState((e==null?void 0:e.assetType)||"equipment"),[d,c]=T.useState((e==null?void 0:e.purchaseDate.split("T")[0])||new Date().toISOString().split("T")[0]),[u,x]=T.useState((e==null?void 0:e.purchasePrice.toString())||"0"),[b,g]=T.useState((e==null?void 0:e.depreciationRate.toString())||"10"),[k,y]=T.useState((e==null?void 0:e.usefulLife.toString())||"5"),[N,S]=T.useState((e==null?void 0:e.status)||"active"),[O,A]=T.useState((e==null?void 0:e.location)||""),[P,q]=T.useState((e==null?void 0:e.serialNumber)||""),[W,R]=T.useState((e==null?void 0:e.supplier)||""),[U,L]=T.useState((e==null?void 0:e.warranty)||""),[Q,H]=T.useState((e==null?void 0:e.notes)||""),G=Z=>{Z.preventDefault();const te=parseFloat(u),se=parseFloat(b),ue=parseFloat(k),ae=(new Date().getTime()-new Date(d).getTime())/(1e3*60*60*24*365),pe=te*se/100,ve=Math.min(pe*ae,te),Pe=Math.max(0,te-ve),xe={name:a,assetType:o,purchaseDate:new Date(d).toISOString(),purchasePrice:te,currentValue:Pe,depreciationRate:se,depreciationMethod:"straight-line",usefulLife:ue,status:N,location:O,serialNumber:P,supplier:W,warranty:U,notes:Q,branchId:n};r(xe)};return s.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl max-w-3xl w-full border border-slate-200 dark:border-slate-700 max-h-[90vh] overflow-y-auto",children:[s.jsx("div",{className:"px-6 py-4 border-b border-slate-200 dark:border-slate-700 sticky top-0 bg-white dark:bg-slate-800",children:s.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-white",children:e?"Chnh sa ti sn":"Thm ti sn c nh"})}),s.jsxs("form",{onSubmit:G,className:"p-6 space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Tn ti sn *"}),s.jsx("input",{type:"text",value:a,onChange:Z=>i(Z.target.value),className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Loi ti sn *"}),s.jsxs("select",{value:o,onChange:Z=>l(Z.target.value),className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white",children:[s.jsx("option",{value:"equipment",children:"Thit b"}),s.jsx("option",{value:"vehicle",children:"Xe c"}),s.jsx("option",{value:"building",children:"Nh xng"}),s.jsx("option",{value:"furniture",children:"Ni tht"}),s.jsx("option",{value:"other",children:"Khc"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Trng thi"}),s.jsxs("select",{value:N,onChange:Z=>S(Z.target.value),className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white",children:[s.jsx("option",{value:"active",children:"ang dng"}),s.jsx("option",{value:"maintenance",children:"Bo tr"}),s.jsx("option",{value:"disposed",children:" thanh l"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Ngy mua *"}),s.jsx("input",{type:"date",value:d,onChange:Z=>c(Z.target.value),className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Gi mua *"}),s.jsx("input",{type:"number",value:u,onChange:Z=>x(Z.target.value),className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"T l khu hao (%/nm) *"}),s.jsx("input",{type:"number",step:"0.1",value:b,onChange:Z=>g(Z.target.value),className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Thi gian s dng (nm) *"}),s.jsx("input",{type:"number",value:k,onChange:Z=>y(Z.target.value),className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"S Serial"}),s.jsx("input",{type:"text",value:P,onChange:Z=>q(Z.target.value),className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"V tr"}),s.jsx("input",{type:"text",value:O,onChange:Z=>A(Z.target.value),className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Nh cung cp"}),s.jsx("input",{type:"text",value:W,onChange:Z=>R(Z.target.value),className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Bo hnh n"}),s.jsx("input",{type:"date",value:U,onChange:Z=>L(Z.target.value),className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white"})]}),s.jsxs("div",{className:"col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Ghi ch"}),s.jsx("textarea",{value:Q,onChange:Z=>H(Z.target.value),rows:3,className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white"})]})]}),s.jsxs("div",{className:"flex gap-3 pt-4",children:[s.jsx("button",{type:"button",onClick:t,className:"flex-1 px-4 py-2.5 bg-slate-200 dark:bg-slate-700 hover:bg-slate-300 dark:hover:bg-slate-600 text-slate-900 dark:text-white rounded-lg font-medium transition-colors",children:"Hy"}),s.jsx("button",{type:"submit",className:"flex-1 px-4 py-2.5 bg-green-600 hover:bg-green-700 text-white rounded-lg font-medium transition-colors",children:e?"Cp nht":"Thm ti sn"})]})]})]})})};async function n8e(){try{const{data:e,error:t}=await It.from("capital").select("*").order("date",{ascending:!1});if(t)return Ct({code:"supabase",message:"Khng th ti danh sch ngun vn",cause:t});const r=(e||[]).map(n=>({id:n.id,type:n.type,sourceName:n.source_name,amount:parseFloat(n.amount),date:n.date,notes:n.notes,interestRate:n.interest_rate?parseFloat(n.interest_rate):void 0,interestType:n.interest_type,paymentFrequency:n.payment_frequency,maturityDate:n.maturity_date,branchId:n.branch_id,created_at:n.created_at}));return Sn(r)}catch(e){return Ct({code:"network",message:"Li kt ni khi ti ngun vn",cause:e})}}async function a8e(e){try{const{data:t,error:r}=await It.from("capital").insert({type:e.type,source_name:e.sourceName,amount:e.amount,date:e.date,notes:e.notes,interest_rate:e.interestRate,interest_type:e.interestType,payment_frequency:e.paymentFrequency,maturity_date:e.maturityDate,branch_id:e.branchId}).select().single();return r||!t?Ct({code:"supabase",message:"Khng th thm ngun vn",cause:r}):Sn({id:t.id,type:t.type,sourceName:t.source_name,amount:parseFloat(t.amount),date:t.date,notes:t.notes,interestRate:t.interest_rate?parseFloat(t.interest_rate):void 0,interestType:t.interest_type,paymentFrequency:t.payment_frequency,maturityDate:t.maturity_date,branchId:t.branch_id,created_at:t.created_at})}catch(t){return Ct({code:"network",message:"Li kt ni khi thm ngun vn",cause:t})}}async function s8e(e,t){try{const r={};t.type!==void 0&&(r.type=t.type),t.sourceName!==void 0&&(r.source_name=t.sourceName),t.amount!==void 0&&(r.amount=t.amount),t.date!==void 0&&(r.date=t.date),t.notes!==void 0&&(r.notes=t.notes),t.interestRate!==void 0&&(r.interest_rate=t.interestRate),t.interestType!==void 0&&(r.interest_type=t.interestType),t.paymentFrequency!==void 0&&(r.payment_frequency=t.paymentFrequency),t.maturityDate!==void 0&&(r.maturity_date=t.maturityDate);const{data:n,error:a}=await It.from("capital").update(r).eq("id",e).select().single();return a||!n?Ct({code:"supabase",message:"Khng th cp nht ngun vn",cause:a}):Sn({id:n.id,type:n.type,sourceName:n.source_name,amount:parseFloat(n.amount),date:n.date,notes:n.notes,interestRate:n.interest_rate?parseFloat(n.interest_rate):void 0,interestType:n.interest_type,paymentFrequency:n.payment_frequency,maturityDate:n.maturity_date,branchId:n.branch_id,created_at:n.created_at})}catch(r){return Ct({code:"network",message:"Li kt ni khi cp nht ngun vn",cause:r})}}async function i8e(e){try{const{error:t}=await It.from("capital").delete().eq("id",e);return t?Ct({code:"supabase",message:"Khng th xa ngun vn",cause:t}):Sn(void 0)}catch(t){return Ct({code:"network",message:"Li kt ni khi xa ngun vn",cause:t})}}function o8e(){const{currentBranchId:e}=Ua();return Ls({queryKey:["capitals",e],queryFn:async()=>{const t=await n8e();if(!t.ok)throw new Error(t.error.message);return t.data.filter(r=>r.branchId===e)},staleTime:3e4})}function l8e(){const e=Un(),{currentBranchId:t}=Ua();return xa({mutationFn:async r=>{const n=await a8e(r);if(!n.ok)throw new Error(n.error.message);return n.data},onSuccess:()=>{e.invalidateQueries({queryKey:["capitals",t]})}})}function c8e(){const e=Un(),{currentBranchId:t}=Ua();return xa({mutationFn:async({id:r,updates:n})=>{const a=await s8e(r,n);if(!a.ok)throw new Error(a.error.message);return a.data},onSuccess:()=>{e.invalidateQueries({queryKey:["capitals",t]})}})}function d8e(){const e=Un(),{currentBranchId:t}=Ua();return xa({mutationFn:async r=>{const n=await i8e(r);if(!n.ok)throw new Error(n.error.message)},onSuccess:()=>{e.invalidateQueries({queryKey:["capitals",t]})}})}const u8e=()=>{const{currentBranchId:e}=Ua(),{data:t=[],isLoading:r}=o8e(),n=l8e(),a=c8e(),i=d8e(),[o,l]=T.useState(!1),[d,c]=T.useState(!1),[u,x]=T.useState(null),[b,g]=T.useState("all"),k=T.useMemo(()=>{const A=t.reduce((R,U)=>R+U.amount,0),P=t.filter(R=>R.type==="owner").reduce((R,U)=>R+U.amount,0),q=t.filter(R=>R.type==="investor").reduce((R,U)=>R+U.amount,0),W=t.filter(R=>R.type==="loan").reduce((R,U)=>R+U.amount,0);return{totalCapital:A,ownerCapital:P,investorCapital:q,loanCapital:W}},[t]),y=T.useMemo(()=>b==="all"?t:t.filter(A=>A.type===b),[t,b]),N=async A=>{try{await n.mutateAsync({...A,branchId:e}),Ze.success(" thm ngun vn"),l(!1)}catch(P){Ze.error(P.message||"Khng th thm ngun vn")}},S=async A=>{if(u)try{await a.mutateAsync({id:u.id,updates:A}),Ze.success(" cp nht ngun vn"),c(!1),x(null)}catch(P){Ze.error(P.message||"Khng th cp nht ngun vn")}},O=async A=>{if(window.confirm("Bn c chc mun xa ngun vn ny?"))try{await i.mutateAsync(A),Ze.success(" xa ngun vn")}catch(P){Ze.error(P.message||"Khng th xa ngun vn")}};return r?s.jsx("div",{className:"h-full flex items-center justify-center",children:s.jsx("div",{className:"text-slate-500 dark:text-slate-400",children:"ang ti..."})}):s.jsxs("div",{className:"h-full flex flex-col bg-slate-50 dark:bg-slate-900",children:[s.jsx("div",{className:"bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 px-6 py-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Vn u t"}),s.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:"Qun l vn ch s hu, vn u t v vn vay"})]}),s.jsxs("button",{onClick:()=>l(!0),className:"flex items-center gap-2 px-4 py-2.5 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-medium transition-colors",children:[s.jsx(Mc,{className:"w-5 h-5"}),s.jsx("span",{children:"Thm ngun vn"})]})]})}),s.jsxs("div",{className:"p-4 md:p-6",children:[s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[s.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20 rounded-lg border-2 border-purple-200 dark:border-purple-700 p-4",children:[s.jsx("div",{className:"text-xs text-purple-700 dark:text-purple-300 mb-1 font-medium",children:"Tng vn"}),s.jsx("div",{className:"text-xl font-bold text-purple-900 dark:text-purple-100",children:Te(k.totalCapital)})]}),s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-4",children:[s.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"Vn ch"}),s.jsx("div",{className:"text-xl font-bold text-blue-600 dark:text-blue-400",children:Te(k.ownerCapital)})]}),s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-4",children:[s.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"Vn u t"}),s.jsx("div",{className:"text-xl font-bold text-green-600 dark:text-green-400",children:Te(k.investorCapital)})]}),s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-4",children:[s.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"Vn vay"}),s.jsx("div",{className:"text-xl font-bold text-orange-600 dark:text-orange-400",children:Te(k.loanCapital)})]})]}),s.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-4 mb-4",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Loi ngun vn:"}),s.jsx("div",{className:"flex gap-2",children:[{value:"all",label:"Tt c"},{value:"owner",label:"Vn ch"},{value:"investor",label:"u t"},{value:"loan",label:"Vn vay"}].map(A=>s.jsx("button",{onClick:()=>g(A.value),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${b===A.value?"bg-purple-600 text-white":"bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-600"}`,children:A.label},A.value))})]})}),y.length===0?s.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-8 text-center text-slate-500 dark:text-slate-400",children:t.length===0?"Cha c ngun vn no":"Khng tm thy ngun vn ph hp"}):s.jsx("div",{className:"grid gap-4",children:y.map(A=>s.jsx(h8e,{capital:A,onEdit:()=>{x(A),c(!0)},onDelete:()=>O(A.id)},A.id))})]}),o&&s.jsx(dR,{onClose:()=>l(!1),onSave:N,branchId:e}),d&&u&&s.jsx(dR,{capital:u,onClose:()=>{c(!1),x(null)},onSave:S,branchId:e})]})},h8e=({capital:e,onEdit:t,onDelete:r})=>{const a=(i=>{const o={owner:{label:"Vn ch s hu",color:"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400",icon:""},investor:{label:"Vn u t",color:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400",icon:""},loan:{label:"Vn vay",color:"bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-400",icon:""}};return o[i]||o.owner})(e.type);return s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-6",children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsx("div",{className:"flex-1",children:s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.jsx("span",{className:"text-2xl",children:a.icon}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:e.sourceName}),s.jsx("span",{className:`inline-block px-2 py-1 rounded-full text-xs font-medium ${a.color} mt-1`,children:a.label})]})]})}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:t,className:"px-3 py-1.5 bg-amber-500 hover:bg-amber-600 text-white rounded-lg text-sm font-medium transition-colors",children:" Sa"}),s.jsx("button",{onClick:r,className:"px-3 py-1.5 bg-red-500 hover:bg-red-600 text-white rounded-lg text-sm font-medium transition-colors",children:" Xa"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-3",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"S tin"}),s.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:Te(e.amount)})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"Ngy nhn"}),s.jsx("div",{className:"text-sm font-semibold text-slate-900 dark:text-white",children:Fn(new Date(e.date))})]})]}),(e.type==="investor"||e.type==="loan")&&e.interestRate&&s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-3 p-3 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"Li sut"}),s.jsxs("div",{className:"text-sm font-bold text-orange-600 dark:text-orange-400",children:[e.interestRate,"%/nm"]})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"Loi li"}),s.jsx("div",{className:"text-sm font-semibold text-slate-900 dark:text-white",children:e.interestType==="simple"?"Li n":"Li kp"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"K tr li"}),s.jsx("div",{className:"text-sm font-semibold text-slate-900 dark:text-white",children:e.paymentFrequency==="monthly"?"Hng thng":e.paymentFrequency==="quarterly"?"Hng qu":"Hng nm"})]}),e.maturityDate&&s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"n hn"}),s.jsx("div",{className:"text-sm font-semibold text-slate-900 dark:text-white",children:Fn(new Date(e.maturityDate))})]})]}),e.notes&&s.jsxs("div",{className:"mt-3 pt-3 border-t border-slate-200 dark:border-slate-700",children:[s.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"Ghi ch"}),s.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300",children:e.notes})]})]})},dR=({capital:e,onClose:t,onSave:r,branchId:n})=>{var R,U;const[a,i]=T.useState((e==null?void 0:e.type)||"owner"),[o,l]=T.useState((e==null?void 0:e.sourceName)||""),[d,c]=T.useState((e==null?void 0:e.amount.toString())||"0"),[u,x]=T.useState((e==null?void 0:e.date.split("T")[0])||new Date().toISOString().split("T")[0]),[b,g]=T.useState((e==null?void 0:e.notes)||""),[k,y]=T.useState(((R=e==null?void 0:e.interestRate)==null?void 0:R.toString())||"0"),[N,S]=T.useState((e==null?void 0:e.interestType)||"simple"),[O,A]=T.useState((e==null?void 0:e.paymentFrequency)||"monthly"),[P,q]=T.useState(((U=e==null?void 0:e.maturityDate)==null?void 0:U.split("T")[0])||""),W=L=>{if(L.preventDefault(),!o.trim()){Ze.error("Vui lng nhp tn ngun vn");return}const Q={type:a,sourceName:o.trim(),amount:parseFloat(d),date:new Date(u).toISOString(),notes:b.trim(),branchId:n};(a==="investor"||a==="loan")&&(Q.interestRate=parseFloat(k),Q.interestType=N,Q.paymentFrequency=O,P&&(Q.maturityDate=new Date(P).toISOString())),r(Q)};return s.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl max-w-2xl w-full border border-slate-200 dark:border-slate-700",children:[s.jsx("div",{className:"px-6 py-4 border-b border-slate-200 dark:border-slate-700",children:s.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-white",children:e?"Chnh sa ngun vn":"Thm ngun vn"})}),s.jsxs("form",{onSubmit:W,className:"p-6 space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Loi ngun vn *"}),s.jsx("div",{className:"grid grid-cols-3 gap-3",children:[{value:"owner",label:" Vn ch",color:"blue"},{value:"investor",label:" u t",color:"green"},{value:"loan",label:" Vay",color:"orange"}].map(L=>s.jsx("button",{type:"button",onClick:()=>i(L.value),className:`px-4 py-3 rounded-lg border-2 font-medium transition-all ${a===L.value?`border-${L.color}-500 bg-${L.color}-50 dark:bg-${L.color}-900/20 text-${L.color}-700 dark:text-${L.color}-300`:"border-slate-300 dark:border-slate-600 hover:border-slate-400 dark:hover:border-slate-500"}`,children:L.label},L.value))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Tn ngun vn *"}),s.jsx("input",{type:"text",value:o,onChange:L=>l(L.target.value),placeholder:a==="owner"?"VD: Vn ch - Nguyn Vn A":a==="investor"?"VD: Nh u t ABC":"VD: Ngn hng Vietcombank",className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white",required:!0})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"S tin *"}),s.jsx("input",{type:"number",value:d,onChange:L=>c(L.target.value),className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white",required:!0,min:"0"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Ngy nhn *"}),s.jsx("input",{type:"date",value:u,onChange:L=>x(L.target.value),className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white",required:!0})]})]}),(a==="investor"||a==="loan")&&s.jsxs("div",{className:"p-4 bg-orange-50 dark:bg-orange-900/10 rounded-lg border-2 border-orange-200 dark:border-orange-800 space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.jsx("span",{className:"text-lg",children:""}),s.jsx("h3",{className:"text-sm font-semibold text-slate-900 dark:text-white",children:"Thng tin li sut"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Li sut (%/nm)"}),s.jsx("input",{type:"number",step:"0.1",value:k,onChange:L=>y(L.target.value),className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white",min:"0"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Loi li"}),s.jsxs("select",{value:N,onChange:L=>S(L.target.value),className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white",children:[s.jsx("option",{value:"simple",children:"Li n"}),s.jsx("option",{value:"compound",children:"Li kp"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"K tr li"}),s.jsxs("select",{value:O,onChange:L=>A(L.target.value),className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white",children:[s.jsx("option",{value:"monthly",children:"Hng thng"}),s.jsx("option",{value:"quarterly",children:"Hng qu"}),s.jsx("option",{value:"yearly",children:"Hng nm"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Ngy n hn"}),s.jsx("input",{type:"date",value:P,onChange:L=>q(L.target.value),className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Ghi ch"}),s.jsx("textarea",{value:b,onChange:L=>g(L.target.value),rows:3,placeholder:"Thm ghi ch v ngun vn...",className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white"})]}),s.jsxs("div",{className:"flex gap-3 pt-4",children:[s.jsx("button",{type:"button",onClick:t,className:"flex-1 px-4 py-2.5 bg-slate-200 dark:bg-slate-700 hover:bg-slate-300 dark:hover:bg-slate-600 text-slate-900 dark:text-white rounded-lg font-medium transition-colors",children:"Hy"}),s.jsx("button",{type:"submit",className:"flex-1 px-4 py-2.5 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-medium transition-colors",children:e?"Cp nht":"Thm ngun vn"})]})]})]})})},uR={cashbook:{label:"S qu",Icon:q0,activeClass:"bg-gradient-to-r from-blue-600 to-indigo-500 text-white border-transparent shadow-lg shadow-blue-500/40",inactiveClass:"bg-white/90 dark:bg-slate-900/60 text-blue-700 dark:text-blue-200 border border-blue-200 dark:border-blue-700 hover:bg-blue-50/80 dark:hover:bg-blue-900/20",dotClass:"bg-blue-400"},loans:{label:"Khon vay",Icon:C6,activeClass:"bg-gradient-to-r from-cyan-500 to-teal-500 text-white border-transparent shadow-lg shadow-cyan-500/40",inactiveClass:"bg-white/90 dark:bg-slate-900/60 text-cyan-800 dark:text-cyan-200 border border-cyan-200 dark:border-cyan-800 hover:bg-cyan-50/80 dark:hover:bg-cyan-900/20",dotClass:"bg-cyan-400"},assets:{label:"TSC",Icon:RJ,activeClass:"bg-gradient-to-r from-emerald-500 to-lime-500 text-white border-transparent shadow-lg shadow-emerald-500/40",inactiveClass:"bg-white/90 dark:bg-slate-900/60 text-emerald-700 dark:text-emerald-200 border border-emerald-200 dark:border-emerald-800 hover:bg-emerald-50/80 dark:hover:bg-emerald-900/20",dotClass:"bg-emerald-400"},capital:{label:"Vn",Icon:$J,activeClass:"bg-gradient-to-r from-fuchsia-500 to-purple-500 text-white border-transparent shadow-lg shadow-fuchsia-500/40",inactiveClass:"bg-white/90 dark:bg-slate-900/60 text-fuchsia-700 dark:text-fuchsia-200 border border-fuchsia-200 dark:border-fuchsia-800 hover:bg-fuchsia-50/80 dark:hover:bg-fuchsia-900/20",dotClass:"bg-fuchsia-400"}},f8e=()=>{const[e,t]=T.useState("cashbook");return s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-slate-800 dark:to-slate-900 rounded-lg shadow-lg border border-primary-border p-4 md:p-6",children:s.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"flex items-center gap-2 text-2xl font-bold text-primary-text mb-2",children:[s.jsx(cee,{className:"w-7 h-7 text-blue-600 dark:text-blue-400"}),"Qun l Ti chnh"]}),s.jsx("p",{className:"text-secondary-text",children:"Qun l s qu, khon vay v cc giao dch ti chnh"})]}),s.jsx("div",{className:"flex flex-col md:flex-row gap-3 w-full md:w-auto mt-4 md:mt-0",children:s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 w-full md:w-auto",children:Object.keys(uR).map(r=>{const n=uR[r],a=e===r,i=n.Icon;return s.jsxs("button",{type:"button","aria-pressed":a,onClick:()=>t(r),className:`px-4 md:px-6 py-2 md:py-3 rounded-xl font-medium transition-all flex items-center justify-center gap-2 border ${a?`${n.activeClass} scale-[1.03]`:n.inactiveClass}`,children:[s.jsx("span",{"aria-hidden":!0,className:`w-2.5 h-2.5 rounded-full ${a?"bg-white/90":n.dotClass}`}),s.jsx(i,{className:"w-4 h-4"}),s.jsx("span",{className:"whitespace-nowrap",children:n.label})]},r)})})})]})}),s.jsxs("div",{children:[e==="cashbook"&&s.jsx(mK,{}),e==="loans"&&s.jsx(xK,{}),e==="assets"&&s.jsx(t8e,{}),e==="capital"&&s.jsx(u8e,{})]})]})},pK=()=>{const{employees:e,payrollRecords:t,upsertEmployee:r,upsertPayrollRecord:n,currentBranchId:a}=Ua(),{mutateAsync:i}=$U(),{mutateAsync:o}=fK(),[l,d]=T.useState(new Date().toISOString().slice(0,7)),[c,u]=T.useState("employees"),[x,b]=T.useState(!1),[g,k]=T.useState(!1),y=T.useMemo(()=>t.filter(S=>S.month===l),[t,l]),N=T.useMemo(()=>{const S=e.filter(W=>W.status==="active").length,O=y.reduce((W,R)=>W+R.baseSalary,0),A=y.reduce((W,R)=>W+R.netSalary,0),P=y.filter(W=>W.paymentStatus==="paid").length,q=y.filter(W=>W.paymentStatus==="pending").length;return{totalEmployees:S,totalBaseSalary:O,totalNetSalary:A,paidCount:P,pendingCount:q}},[e,y]);return s.jsxs("div",{className:"h-full flex flex-col bg-slate-50 dark:bg-slate-900",children:[s.jsx("div",{className:"bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700",children:s.jsxs("div",{className:"px-6 py-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Qun l lng"}),s.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:"Qun l nhn vin v tnh lng"})]}),s.jsxs("button",{onClick:()=>c==="employees"?b(!0):k(!0),className:"flex items-center gap-2 px-4 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors",children:[s.jsx(Mc,{className:"w-5 h-5"}),s.jsx("span",{children:c==="employees"?"Thm nhn vin":"Tnh lng thng"})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{onClick:()=>u("employees"),className:`px-4 py-2 rounded-t-lg font-medium text-sm transition-colors ${c==="employees"?"bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 border-b-2 border-blue-600":"text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-slate-200"}`,children:["Danh sch nhn vin (",e.filter(S=>S.status==="active").length,")"]}),s.jsx("button",{onClick:()=>u("payroll"),className:`px-4 py-2 rounded-t-lg font-medium text-sm transition-colors ${c==="payroll"?"bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 border-b-2 border-blue-600":"text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-slate-200"}`,children:"Bng lng"})]})]})}),s.jsx("div",{className:"flex-1 overflow-auto p-6",children:c==="employees"?s.jsx(m8e,{employees:e,onEdit:S=>console.log("Edit",S)}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"mb-6",children:[s.jsx("div",{className:"flex items-center justify-between mb-4",children:s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Chn thng"}),s.jsx("input",{type:"month",value:l,onChange:S=>d(S.target.value),className:"px-4 py-2 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white"})]})}),s.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[s.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4 border border-blue-200 dark:border-blue-800",children:[s.jsx("div",{className:"text-blue-600 dark:text-blue-400 text-sm font-medium mb-2",children:"Tng lng c bn"}),s.jsx("div",{className:"text-blue-900 dark:text-blue-100 text-2xl font-bold",children:Te(N.totalBaseSalary)})]}),s.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-4 border border-green-200 dark:border-green-800",children:[s.jsx("div",{className:"text-green-600 dark:text-green-400 text-sm font-medium mb-2",children:"Tng lng thc nhn"}),s.jsx("div",{className:"text-green-900 dark:text-green-100 text-2xl font-bold",children:Te(N.totalNetSalary)})]}),s.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/20 rounded-lg p-4 border border-amber-200 dark:border-amber-800",children:[s.jsx("div",{className:"text-amber-600 dark:text-amber-400 text-sm font-medium mb-2",children:" tr lng"}),s.jsx("div",{className:"text-amber-900 dark:text-amber-100 text-2xl font-bold",children:N.paidCount}),s.jsx("div",{className:"text-amber-600 dark:text-amber-400 text-xs mt-1",children:"nhn vin"})]}),s.jsxs("div",{className:"bg-orange-50 dark:bg-orange-900/20 rounded-lg p-4 border border-orange-200 dark:border-orange-800",children:[s.jsx("div",{className:"text-orange-600 dark:text-orange-400 text-sm font-medium mb-2",children:"Cha tr"}),s.jsx("div",{className:"text-orange-900 dark:text-orange-100 text-2xl font-bold",children:N.pendingCount}),s.jsx("div",{className:"text-orange-600 dark:text-orange-400 text-xs mt-1",children:"nhn vin"})]})]})]}),s.jsx(x8e,{payroll:y,onMarkAsPaid:async(S,O)=>{const A=t.find(P=>P.id===S);A&&(n({...A,paymentStatus:"paid",paymentDate:new Date().toISOString(),paymentMethod:O}),await i({type:"expense",amount:A.netSalary,branchId:a,paymentSourceId:O,category:"salary",payrollRecordId:A.id,recipient:A.employeeName,notes:`Tr lng thng ${l} - ${A.employeeName}`,date:new Date().toISOString()}),await o({id:O,branchId:a,delta:-A.netSalary}))}})]})}),x&&s.jsx(p8e,{onClose:()=>b(!1),onSave:S=>{r(S),b(!1)}}),g&&s.jsx(g8e,{employees:e.filter(S=>S.status==="active"),month:l,onClose:()=>k(!1),onSave:S=>{S.forEach(O=>n(O)),k(!1)}})]})},m8e=({employees:e,onEdit:t})=>e.length===0?s.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-12 text-center",children:s.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Cha c nhn vin no"})}):s.jsx("div",{className:"grid gap-4",children:e.map(r=>s.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-4 hover:border-blue-300 dark:hover:border-blue-700 transition-colors",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:r.name}),s.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${r.status==="active"?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":"bg-slate-100 text-slate-800 dark:bg-slate-700 dark:text-slate-400"}`,children:r.status==="active"?"ang lm":"Ngh vic"})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsxs("span",{className:"text-slate-500 dark:text-slate-400",children:["Chc v:"," "]}),s.jsx("span",{className:"text-slate-900 dark:text-white font-medium",children:r.position})]}),s.jsxs("div",{children:[s.jsxs("span",{className:"text-slate-500 dark:text-slate-400",children:["Lng:"," "]}),s.jsx("span",{className:"text-slate-900 dark:text-white font-medium",children:Te(r.baseSalary)})]}),s.jsxs("div",{children:[s.jsxs("span",{className:"text-slate-500 dark:text-slate-400",children:["ST:"," "]}),s.jsx("span",{className:"text-slate-900 dark:text-white font-medium",children:r.phone||"--"})]})]})]}),s.jsx("button",{onClick:()=>t(r),className:"px-4 py-2 text-blue-600 hover:bg-blue-50 dark:text-blue-400 dark:hover:bg-blue-900/30 rounded-lg text-sm font-medium transition-colors",children:"Sa"})]})},r.id))}),x8e=({payroll:e,onMarkAsPaid:t})=>{const[r,n]=T.useState(!1),[a,i]=T.useState(null);return e.length===0?s.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-12 text-center",children:s.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Cha c bng lng cho thng ny"})}):s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 overflow-hidden",children:[s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Nhn vin"}),s.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Lng CB"}),s.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Thng"}),s.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Pht"}),s.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"BHXH"}),s.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Thu"}),s.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Thc nhn"}),s.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Trng thi"}),s.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Thao tc"})]})}),s.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:e.map(o=>s.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[s.jsx("td",{className:"px-4 py-3 text-slate-900 dark:text-white font-medium",children:o.employeeName}),s.jsx("td",{className:"px-4 py-3 text-right text-slate-900 dark:text-white",children:Te(o.baseSalary)}),s.jsxs("td",{className:"px-4 py-3 text-right text-green-600 dark:text-green-400",children:["+",Te(o.bonus)]}),s.jsxs("td",{className:"px-4 py-3 text-right text-red-600 dark:text-red-400",children:["-",Te(o.deduction)]}),s.jsx("td",{className:"px-4 py-3 text-right text-slate-600 dark:text-slate-400",children:Te(o.socialInsurance)}),s.jsx("td",{className:"px-4 py-3 text-right text-slate-600 dark:text-slate-400",children:Te(o.personalIncomeTax)}),s.jsx("td",{className:"px-4 py-3 text-right text-blue-600 dark:text-blue-400 font-bold",children:Te(o.netSalary)}),s.jsx("td",{className:"px-4 py-3 text-center",children:s.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${o.paymentStatus==="paid"?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":"bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-400"}`,children:o.paymentStatus==="paid"?" tr":"Cha tr"})}),s.jsx("td",{className:"px-4 py-3 text-center",children:o.paymentStatus==="pending"&&t&&s.jsx("button",{onClick:()=>{i(o),n(!0)},className:"px-3 py-1.5 bg-green-600 hover:bg-green-700 text-white rounded-md text-xs font-medium transition-colors",children:" tr lng"})})]},o.id))})]}),r&&a&&s.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl max-w-md w-full border border-slate-200 dark:border-slate-700",children:[s.jsx("div",{className:"px-6 py-4 border-b border-slate-200 dark:border-slate-700",children:s.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:"Xc nhn tr lng"})}),s.jsxs("div",{className:"p-6 space-y-4",children:[s.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4 border border-blue-200 dark:border-blue-800",children:[s.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 mb-1",children:"Nhn vin"}),s.jsx("div",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:a.employeeName}),s.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400 mt-2",children:Te(a.netSalary)})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Hnh thc thanh ton"}),s.jsxs("div",{className:"flex gap-4",children:[s.jsxs("button",{onClick:()=>{t&&t(a.id,"cash"),n(!1),i(null)},className:"flex-1 px-4 py-3 bg-green-600 hover:bg-green-700 text-white rounded-lg font-medium transition-colors flex items-center justify-center gap-2",children:[s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"w-5 h-5",children:[s.jsx("rect",{x:"2",y:"6",width:"20",height:"12",rx:"2",ry:"2"}),s.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),"Tin mt"]}),s.jsxs("button",{onClick:()=>{t&&t(a.id,"bank"),n(!1),i(null)},className:"flex-1 px-4 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors flex items-center justify-center gap-2",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"w-5 h-5",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 21h18M3 10h18M7 6h10l2 4H5l2-4Zm2 4v11m6-11v11"})}),"Chuyn khon"]})]})]})]}),s.jsx("div",{className:"px-6 py-4 border-t border-slate-200 dark:border-slate-700",children:s.jsx("button",{onClick:()=>{n(!1),i(null)},className:"w-full px-4 py-2 bg-slate-200 dark:bg-slate-700 hover:bg-slate-300 dark:hover:bg-slate-600 text-slate-900 dark:text-white rounded-lg font-medium transition-colors",children:"Hy"})})]})})]})},p8e=({onClose:e,onSave:t})=>{const[r,n]=T.useState(""),[a,i]=T.useState(""),[o,l]=T.useState(""),[d,c]=T.useState("0"),[u,x]=T.useState(new Date().toISOString().split("T")[0]),b=g=>{g.preventDefault();const k={name:r,phone:a,position:o,baseSalary:parseFloat(d),startDate:new Date(u).toISOString(),status:"active"};t(k)};return s.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl max-w-lg w-full border border-slate-200 dark:border-slate-700",children:[s.jsx("div",{className:"px-6 py-4 border-b border-slate-200 dark:border-slate-700",children:s.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-white",children:"Thm nhn vin mi"})}),s.jsxs("form",{onSubmit:b,className:"p-6 space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"H v tn *"}),s.jsx("input",{type:"text",value:r,onChange:g=>n(g.target.value),className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"S in thoi"}),s.jsx("input",{type:"tel",value:a,onChange:g=>i(g.target.value),className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Chc v *"}),s.jsx("input",{type:"text",value:o,onChange:g=>l(g.target.value),placeholder:"V d: K thut vin, Nhn vin bn hng...",className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Lng c bn *"}),s.jsx("input",{type:"number",value:d,onChange:g=>c(g.target.value),className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Ngy vo lm *"}),s.jsx("input",{type:"date",value:u,onChange:g=>x(g.target.value),className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white",required:!0})]}),s.jsxs("div",{className:"flex gap-3 pt-4",children:[s.jsx("button",{type:"button",onClick:e,className:"flex-1 px-4 py-2.5 bg-slate-200 dark:bg-slate-700 hover:bg-slate-300 dark:hover:bg-slate-600 text-slate-900 dark:text-white rounded-lg font-medium transition-colors",children:"Hy"}),s.jsx("button",{type:"submit",className:"flex-1 px-4 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors",children:"Thm nhn vin"})]})]})]})})},g8e=({employees:e,month:t,onClose:r,onSave:n})=>{const[a,i]=T.useState(e.map(k=>({employeeId:k.id,employeeName:k.name,baseSalary:k.baseSalary,bonus:0,deduction:0}))),o=(k,y)=>{i(N=>N.map(S=>S.employeeId===k?{...S,bonus:parseFloat(y)||0}:S))},l=(k,y)=>{i(N=>N.map(S=>S.employeeId===k?{...S,deduction:parseFloat(y)||0}:S))},d=(k,y,N)=>k+y-N,c=k=>{k.preventDefault();const y=a.map(N=>({id:`PAY-${t}-${N.employeeId}`,employeeId:N.employeeId,employeeName:N.employeeName,month:t,baseSalary:N.baseSalary,allowances:0,bonus:N.bonus,deduction:N.deduction,workDays:26,standardWorkDays:26,socialInsurance:0,healthInsurance:0,unemploymentInsurance:0,personalIncomeTax:0,netSalary:d(N.baseSalary,N.bonus,N.deduction),paymentStatus:"pending",paymentDate:void 0,notes:"",branchId:"main",created_at:new Date().toISOString()}));n(y)},u=a.reduce((k,y)=>k+y.baseSalary,0),x=a.reduce((k,y)=>k+y.bonus,0),b=a.reduce((k,y)=>k+y.deduction,0),g=a.reduce((k,y)=>k+d(y.baseSalary,y.bonus,y.deduction),0);return s.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl max-w-5xl w-full border border-slate-200 dark:border-slate-700 max-h-[90vh] flex flex-col",children:[s.jsxs("div",{className:"px-6 py-4 border-b border-slate-200 dark:border-slate-700",children:[s.jsxs("h2",{className:"text-xl font-semibold text-slate-900 dark:text-white",children:["Tnh lng thng ",t]}),s.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:[e.length," nhn vin"]})]}),s.jsxs("form",{onSubmit:c,className:"flex-1 flex flex-col",children:[s.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:s.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 overflow-hidden",children:s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Nhn vin"}),s.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Lng CB"}),s.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Thng"}),s.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Pht"}),s.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Thc nhn"})]})}),s.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:a.map(k=>s.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[s.jsx("td",{className:"px-4 py-3 text-slate-900 dark:text-white font-medium",children:k.employeeName}),s.jsx("td",{className:"px-4 py-3 text-right text-slate-900 dark:text-white",children:Te(k.baseSalary)}),s.jsx("td",{className:"px-4 py-3",children:s.jsx("input",{type:"number",value:k.bonus,onChange:y=>o(k.employeeId,y.target.value),className:"w-full px-2 py-1.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded text-right text-slate-900 dark:text-white",min:"0"})}),s.jsx("td",{className:"px-4 py-3",children:s.jsx("input",{type:"number",value:k.deduction,onChange:y=>l(k.employeeId,y.target.value),className:"w-full px-2 py-1.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded text-right text-slate-900 dark:text-white",min:"0"})}),s.jsx("td",{className:"px-4 py-3 text-right text-blue-600 dark:text-blue-400 font-bold",children:Te(d(k.baseSalary,k.bonus,k.deduction))})]},k.employeeId))}),s.jsx("tfoot",{className:"bg-slate-50 dark:bg-slate-700 border-t-2 border-slate-300 dark:border-slate-600",children:s.jsxs("tr",{children:[s.jsx("td",{className:"px-4 py-3 text-slate-900 dark:text-white font-bold",children:"TNG CNG"}),s.jsx("td",{className:"px-4 py-3 text-right text-slate-900 dark:text-white font-bold",children:Te(u)}),s.jsx("td",{className:"px-4 py-3 text-right text-green-600 dark:text-green-400 font-bold",children:Te(x)}),s.jsx("td",{className:"px-4 py-3 text-right text-red-600 dark:text-red-400 font-bold",children:Te(b)}),s.jsx("td",{className:"px-4 py-3 text-right text-blue-600 dark:text-blue-400 font-bold text-lg",children:Te(g)})]})})]})})}),s.jsxs("div",{className:"px-6 py-4 border-t border-slate-200 dark:border-slate-700 flex gap-3",children:[s.jsx("button",{type:"button",onClick:r,className:"flex-1 px-4 py-2.5 bg-slate-200 dark:bg-slate-700 hover:bg-slate-300 dark:hover:bg-slate-600 text-slate-900 dark:text-white rounded-lg font-medium transition-colors",children:"Hy"}),s.jsx("button",{type:"submit",className:"flex-1 px-4 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors",children:"To bng lng"})]})]})]})})},b8e=(e,t,r)=>{const n=wn.book_new(),a=e.reduce((g,k)=>g+k.total,0),i=e.reduce((g,k)=>g+k.items.reduce((y,N)=>y+(N.costPrice||0)*N.quantity,0),0),o=a-i,l=a>0?o/a*100:0,d=[["BO CO DOANH THU"],[`T ${Fn(t)} n ${Fn(r)}`],[],["Ch tiu","Gi tr"],["Tng doanh thu",Te(a)],["Tng chi ph",Te(i)],["Li nhun",Te(o)],["Bin li nhun",`${l.toFixed(2)}%`]],c=wn.aoa_to_sheet(d);wn.book_append_sheet(n,c,"Tng quan");const u=[["M n","Ngy","Khch hng","ST","Sn phm","S lng","n gi","Thnh tin","Gim gi","Tng","Phng thc"]];e.forEach(g=>{g.items.forEach((k,y)=>{u.push([y===0?Z1(g.id):"",y===0?Fn(g.date):"",y===0?g.customer.name:"",y===0&&g.customer.phone||"",k.partName,k.quantity,k.sellingPrice,k.sellingPrice*k.quantity,y===0?g.discount:"",y===0?g.total:"",y===0?g.paymentMethod==="cash"?"Tin mt":"Ngn hng":""])})});const x=wn.aoa_to_sheet(u);wn.book_append_sheet(n,x,"Chi tit bn hng");const b=`BaoCaoDoanhThu_${t}_${r}.xlsx`;t0(n,b)},v8e=(e,t,r)=>{const n=wn.book_new(),a=e.filter(y=>y.type==="income").reduce((y,N)=>y+N.amount,0),i=e.filter(y=>y.type==="expense").reduce((y,N)=>y+N.amount,0),o=a-i,l=[["BO CO THU CHI"],[`T ${Fn(t)} n ${Fn(r)}`],[],["Ch tiu","Gi tr"],["Tng thu",Te(a)],["Tng chi",Te(i)],["Thu chi rng",Te(o)]],d=wn.aoa_to_sheet(l);wn.book_append_sheet(n,d,"Tng quan");const c=[["Ngy","Loi","Danh mc","S tin","i tng","Ngun thanh ton","Ghi ch"]];e.forEach(y=>{c.push([Fn(y.date),y.type==="income"?"Thu":"Chi",y.category||"",y.amount,y.recipient||"",y.paymentSourceId,y.notes])});const u=wn.aoa_to_sheet(c);wn.book_append_sheet(n,u,"Chi tit giao dch");const x={};e.forEach(y=>{const N=y.category||"Khc";x[N]||(x[N]={income:0,expense:0}),y.type==="income"?x[N].income+=y.amount:x[N].expense+=y.amount});const b=[["Danh mc","Thu","Chi","Chnh lch"]];Object.entries(x).forEach(([y,N])=>{b.push([y,N.income,N.expense,N.income-N.expense])});const g=wn.aoa_to_sheet(b);wn.book_append_sheet(n,g,"Theo danh mc");const k=`BaoCaoThuChi_${t}_${r}.xlsx`;t0(n,k)},y8e=(e,t,r,n)=>{const a=wn.book_new(),i=e.reduce((g,k)=>{var y;return g+(k.stock[t]||0)*(((y=k.wholesalePrice)==null?void 0:y[t])||0)},0),o=e.filter(g=>(g.stock[t]||0)<10).length,l=[["BO CO TN KHO"],[`Ngy: ${Fn(n)}`],[],["Ch tiu","Gi tr"],["Tng gi tr tn kho",Te(i)],["S loi sn phm",e.length],["Sn phm tn kho thp",o]],d=wn.aoa_to_sheet(l);wn.book_append_sheet(a,d,"Tng quan");const c=[["M SKU","Tn sn phm","Danh mc","Tn kho","Gi nhp","Gi bn","Gi tr tn","Trng thi"]];e.forEach(g=>{var A;const k=g.stock[t]||0,y=((A=g.wholesalePrice)==null?void 0:A[t])||0,N=g.retailPrice[t]||0,S=k*y,O=k<10?"Thp":k<50?"Trung bnh":"";c.push([g.sku,g.name,g.category||"",k,y,N,S,O])});const u=wn.aoa_to_sheet(c);wn.book_append_sheet(a,u,"Chi tit tn kho");const x=e.filter(g=>(g.stock[t]||0)<10);if(x.length>0){const g=[["M SKU","Tn sn phm","Tn kho","Ghi ch"]];x.forEach(y=>{g.push([y.sku,y.name,y.stock[t]||0,"Cn nhp thm hng"])});const k=wn.aoa_to_sheet(g);wn.book_append_sheet(a,k,"Cnh bo tn kho")}const b=`BaoCaoTonKho_${n}.xlsx`;t0(a,b)},w8e=(e,t,r)=>{const n=wn.book_new(),a=e.reduce((N,S)=>N+S.baseSalary,0),i=e.reduce((N,S)=>N+S.netSalary,0),o=e.filter(N=>N.paymentStatus==="paid").length,l=e.filter(N=>N.paymentStatus==="pending").length,d=[["BO CO LNG"],[`T ${t} n ${r}`],[],["Ch tiu","Gi tr"],["Tng lng c bn",Te(a)],["Tng lng thc nhn",Te(i)],["S bng lng  tr",o],["S bng lng cha tr",l]],c=wn.aoa_to_sheet(d);wn.book_append_sheet(n,c,"Tng quan");const u=[["Nhn vin","Thng","Lng c bn","Ph cp","Thng","Khu tr","BHXH","BHYT","BHTN","Thu TNCN","Thc nhn","Trng thi","Ngy tr"]];e.forEach(N=>{u.push([N.employeeName,N.month,N.baseSalary,N.allowances,N.bonus,N.deduction,N.socialInsurance,N.healthInsurance,N.unemploymentInsurance,N.personalIncomeTax,N.netSalary,N.paymentStatus==="paid"?" tr":"Cha tr",N.paymentDate?Fn(N.paymentDate):""])});const x=wn.aoa_to_sheet(u);wn.book_append_sheet(n,x,"Chi tit lng");const b={};e.forEach(N=>{b[N.employeeName]||(b[N.employeeName]={totalBase:0,totalNet:0,months:0}),b[N.employeeName].totalBase+=N.baseSalary,b[N.employeeName].totalNet+=N.netSalary,b[N.employeeName].months+=1});const g=[["Nhn vin","S thng","Tng lng c bn","Tng thc nhn","TB/thng"]];Object.entries(b).forEach(([N,S])=>{g.push([N,S.months,S.totalBase,S.totalNet,Math.round(S.totalNet/S.months)])});const k=wn.aoa_to_sheet(g);wn.book_append_sheet(n,k,"Theo nhn vin");const y=`BaoCaoLuong_${t}_${r}.xlsx`;t0(n,y)},k8e=(e,t,r,n,a)=>{const i=wn.book_new(),o=[["BO CO CNG N"],[`T ${Fn(n)} n ${Fn(a)}`],[],["Loi","S lng"],["Khch hng",e.length],["Nh cung cp",t.length]],l=wn.aoa_to_sheet(o);wn.book_append_sheet(i,l,"Tng quan");const d=[["Tn khch hng","ST","Xe","Bin s","Phn khc"]];e.forEach(g=>{d.push([g.name,g.phone||"",g.vehicleModel||"",g.licensePlate||"",g.segment||""])});const c=wn.aoa_to_sheet(d);wn.book_append_sheet(i,c,"Khch hng");const u=[["Tn nh cung cp","ST","Email","a ch"]];t.forEach(g=>{u.push([g.name,g.phone||"",g.email||"",g.address||""])});const x=wn.aoa_to_sheet(u);wn.book_append_sheet(i,x,"Nh cung cp");const b=`BaoCaoCongNo_${n}_${a}.xlsx`;t0(i,b)},N8e=(e,t,r,n=20)=>{const a=wn.book_new(),i=new Map;e.forEach(g=>{g.items.forEach(k=>{const y=i.get(k.partId);y?(y.quantity+=k.quantity,y.revenue+=k.sellingPrice*k.quantity,y.orders+=1):i.set(k.partId,{name:k.partName,sku:k.sku||"",quantity:k.quantity,revenue:k.sellingPrice*k.quantity,orders:1})})});const o=Array.from(i.values()).sort((g,k)=>k.quantity-g.quantity).slice(0,n),l=[["TOP SN PHM BN CHY"],[`T ${Fn(t)} n ${Fn(r)}`],[],["STT","Tn sn phm","SKU","S lng bn","Doanh thu","S n","Trung bnh/n"]];o.forEach((g,k)=>{l.push([String(k+1),g.name,g.sku,String(g.quantity),Te(g.revenue),String(g.orders),Te(g.revenue/g.orders)])});const d=o.reduce((g,k)=>g+k.quantity,0),c=o.reduce((g,k)=>g+k.revenue,0),u=o.reduce((g,k)=>g+k.orders,0);l.push([]),l.push(["TNG","","",String(d),Te(c),String(u),Te(c/u)]);const x=wn.aoa_to_sheet(l);wn.book_append_sheet(a,x,"Top sn phm");const b=`TopSanPhamBanChay_${t}_${r}.xlsx`;t0(a,b)},_8e=(e,t,r)=>{const n=wn.book_new(),a=new Map;e.forEach(k=>{k.items.forEach(y=>{const N=(y.costPrice||0)*y.quantity,S=y.sellingPrice*y.quantity,O=S-N,A=a.get(y.partId);A?(A.quantity+=y.quantity,A.revenue+=S,A.cost+=N,A.profit+=O,A.margin=A.revenue>0?A.profit/A.revenue*100:0):a.set(y.partId,{name:y.partName,sku:y.sku||"",quantity:y.quantity,revenue:S,cost:N,profit:O,margin:S>0?O/S*100:0})})});const i=Array.from(a.values()).sort((k,y)=>y.profit-k.profit),o=[["BO CO LI NHUN THEO SN PHM"],[`T ${Fn(t)} n ${Fn(r)}`],[],["STT","Tn sn phm","SKU","SL","Doanh thu","Gi vn","Li nhun","Bin LN (%)"]];i.forEach((k,y)=>{o.push([String(y+1),k.name,k.sku,String(k.quantity),Te(k.revenue),Te(k.cost),Te(k.profit),k.margin.toFixed(2)+"%"])});const l=i.reduce((k,y)=>k+y.quantity,0),d=i.reduce((k,y)=>k+y.revenue,0),c=i.reduce((k,y)=>k+y.cost,0),u=i.reduce((k,y)=>k+y.profit,0),x=d>0?u/d*100:0;o.push([]),o.push(["TNG","","",String(l),Te(d),Te(c),Te(u),x.toFixed(2)+"%"]);const b=wn.aoa_to_sheet(o);wn.book_append_sheet(n,b,"Li nhun sn phm");const g=`LoiNhuanTheoSanPham_${t}_${r}.xlsx`;t0(n,g)},S8e=(e,t,r,n)=>{const a=wn.book_new(),i=e.length,o=e.reduce((y,N)=>{var S;return y+(((S=N.stock)==null?void 0:S[t])||0)},0),l=e.reduce((y,N)=>{var A,P;const S=((A=N.stock)==null?void 0:A[t])||0,O=typeof N.costPrice=="number"?N.costPrice:((P=N.retailPrice)==null?void 0:P[t])||0;return y+S*O},0),d=e.filter(y=>{var S;const N=((S=y.stock)==null?void 0:S[t])||0;return N>0&&N<=5}),c=e.filter(y=>{var N;return(((N=y.stock)==null?void 0:N[t])||0)===0}),u=[["BO CO TN KHO CHI TIT"],[`Ngy: ${Fn(new Date().toISOString())}`],[`Chi nhnh: ${t}`],[],["Ch tiu","Gi tr"],["Tng s mt hng",i],["Tng s lng tn",o],["Gi tr tn kho",Te(l)],["Sn phm tn thp (5)",d.length],["Sn phm ht hng",c.length]],x=wn.aoa_to_sheet(u);wn.book_append_sheet(a,x,"Tng quan");const b=[["SKU","Tn sn phm","Danh mc","Tn kho","Gi vn","Gi bn","Gi tr tn","Trng thi"]];e.forEach(y=>{var q,W;const N=((q=y.stock)==null?void 0:q[t])||0,S=typeof y.costPrice=="number"?y.costPrice:0,O=((W=y.retailPrice)==null?void 0:W[t])||0,A=N*S;let P="Bnh thng";N===0?P="Ht hng":N<=5&&(P="Tn thp"),b.push([y.sku||"",y.name,y.category||"",String(N),Te(S),Te(O),Te(A),P])});const g=wn.aoa_to_sheet(b);if(wn.book_append_sheet(a,g,"Tt c sn phm"),d.length>0){const y=[["SKU","Tn sn phm","Tn kho","Cn nhp"]];d.forEach(S=>{var P;const O=((P=S.stock)==null?void 0:P[t])||0,A=Math.max(10-O,0);y.push([S.sku||"",S.name,String(O),String(A)])});const N=wn.aoa_to_sheet(y);wn.book_append_sheet(a,N,"Tn thp")}if(c.length>0){const y=[["SKU","Tn sn phm","Gi bn"," xut"]];c.forEach(S=>{var A;const O=((A=S.retailPrice)==null?void 0:A[t])||0;y.push([S.sku||"",S.name,Te(O),"Cn nhp ngay"])});const N=wn.aoa_to_sheet(y);wn.book_append_sheet(a,N,"Ht hng")}const k=`TonKhoChiTiet_${t}_${Fn(new Date().toISOString())}.xlsx`;t0(a,k)},j8e=[{key:"revenue",label:"Doanh thu",icon:s.jsx(D0,{className:"w-4 h-4"}),activeClass:"bg-gradient-to-r from-blue-600 to-sky-500 text-white border-transparent shadow-lg shadow-blue-500/30",inactiveClass:"bg-white dark:bg-slate-900/60 text-blue-700 dark:text-blue-200 border-blue-200 dark:border-blue-700 hover:bg-blue-50/80 dark:hover:bg-blue-900/20",dotClass:"bg-blue-400"},{key:"cashflow",label:"Thu chi",icon:s.jsx(q0,{className:"w-4 h-4"}),activeClass:"bg-gradient-to-r from-emerald-500 to-lime-500 text-white border-transparent shadow-lg shadow-emerald-500/30",inactiveClass:"bg-white dark:bg-slate-900/60 text-emerald-700 dark:text-emerald-200 border-emerald-200 dark:border-emerald-800 hover:bg-emerald-50/70 dark:hover:bg-emerald-900/20",dotClass:"bg-emerald-400"},{key:"inventory",label:"Tn kho",icon:s.jsx(Hi,{className:"w-4 h-4"}),activeClass:"bg-gradient-to-r from-amber-500 to-orange-500 text-white border-transparent shadow-lg shadow-orange-500/30",inactiveClass:"bg-white dark:bg-slate-900/60 text-amber-700 dark:text-amber-200 border-amber-200 dark:border-amber-800 hover:bg-amber-50/70 dark:hover:bg-amber-900/20",dotClass:"bg-amber-400"},{key:"payroll",label:"Lng",icon:s.jsx(Rm,{className:"w-4 h-4"}),activeClass:"bg-gradient-to-r from-violet-500 to-fuchsia-500 text-white border-transparent shadow-lg shadow-violet-500/30",inactiveClass:"bg-white dark:bg-slate-900/60 text-violet-700 dark:text-violet-200 border-violet-200 dark:border-violet-800 hover:bg-violet-50/70 dark:hover:bg-violet-900/20",dotClass:"bg-violet-400"},{key:"debt",label:"Cng n",icon:s.jsx(E6,{className:"w-4 h-4"}),activeClass:"bg-gradient-to-r from-rose-500 to-red-500 text-white border-transparent shadow-lg shadow-rose-500/30",inactiveClass:"bg-white dark:bg-slate-900/60 text-rose-700 dark:text-rose-200 border-rose-200 dark:border-rose-800 hover:bg-rose-50/70 dark:hover:bg-rose-900/20",dotClass:"bg-rose-400"}],C8e=()=>{const{payrollRecords:e,customers:t,suppliers:r,currentBranchId:n,employees:a}=Ua(),{data:i=[],isLoading:o}=Jb(),{data:l=[],isLoading:d}=lh(),[c,u]=T.useState("revenue"),[x,b]=T.useState("month"),[g,k]=T.useState(""),[y,N]=T.useState(""),{start:S,end:O}=T.useMemo(()=>{const H=new Date;let G=new Date,Z=new Date;if(x==="custom"&&g&&y)return{start:new Date(g),end:new Date(y)};switch(x){case"today":G=new Date(H.setHours(0,0,0,0)),Z=new Date(H.setHours(23,59,59,999));break;case"week":G=new Date(H.setDate(H.getDate()-7));break;case"month":G=new Date(H.setMonth(H.getMonth()-1));break;case"quarter":G=new Date(H.setMonth(H.getMonth()-3));break;case"year":G=new Date(H.setFullYear(H.getFullYear()-1));break}return{start:G,end:Z}},[x,g,y]),A=T.useMemo(()=>{const H=i.filter(ae=>{const pe=new Date(ae.date);return pe>=S&&pe<=O}),G=H.reduce((ae,pe)=>ae+pe.total,0),Z=H.reduce((ae,pe)=>{const ve=pe.items.reduce((Pe,xe)=>Pe+(xe.costPrice||0)*xe.quantity,0);return ae+ve},0),te=G-Z,se=new Map;H.forEach(ae=>{const pe=new Date(ae.date).toISOString().split("T")[0];se.has(pe)||se.set(pe,{date:pe,sales:[],totalRevenue:0,totalCost:0,totalProfit:0,orderCount:0});const ve=se.get(pe),Pe=ae.items.reduce((xe,B)=>xe+(B.costPrice||0)*B.quantity,0);ve.sales.push(ae),ve.totalRevenue+=ae.total,ve.totalCost+=Pe,ve.totalProfit+=ae.total-Pe,ve.orderCount+=1});const ue=Array.from(se.values()).sort((ae,pe)=>new Date(ae.date).getTime()-new Date(pe.date).getTime());return{sales:H,dailyReport:ue,totalRevenue:G,totalCost:Z,totalProfit:te,profitMargin:G>0?(te/G*100).toFixed(1):0,orderCount:H.length}},[i,S,O]),{data:P=[],isLoading:q}=HU({branchId:n,startDate:S.toISOString(),endDate:O.toISOString()}),W=T.useMemo(()=>{const H=P.filter(se=>{const ue=new Date(se.date);return ue>=S&&ue<=O}),G=H.filter(se=>se.type==="income").reduce((se,ue)=>se+ue.amount,0),Z=H.filter(se=>se.type==="expense").reduce((se,ue)=>se+ue.amount,0),te={};return H.forEach(se=>{const ue=se.category||"other";te[ue]||(te[ue]={income:0,expense:0}),se.type==="income"?te[ue].income+=se.amount:te[ue].expense+=se.amount}),{transactions:H,totalIncome:G,totalExpense:Z,netCashFlow:G-Z,byCategory:te}},[P,S,O]),R=T.useMemo(()=>{const H=l.map(te=>({...te,stock:te.stock[n]||0,price:te.retailPrice[n]||0,value:(te.stock[n]||0)*(te.retailPrice[n]||0)})),G=H.reduce((te,se)=>te+se.value,0),Z=H.filter(te=>te.stock<10);return{parts:H,totalValue:G,lowStockCount:Z.length,lowStockItems:Z}},[l,n]),U=T.useMemo(()=>{const H=e.filter(se=>{const ue=new Date(se.month);return ue>=S&&ue<=O}),G=H.reduce((se,ue)=>se+ue.netSalary,0),Z=H.filter(se=>se.paymentStatus==="paid").reduce((se,ue)=>se+ue.netSalary,0),te=G-Z;return{records:H,totalSalary:G,paidSalary:Z,unpaidSalary:te,employeeCount:new Set(H.map(se=>se.employeeId)).size}},[e,S,O]),L=T.useMemo(()=>{const H=t.map(se=>{const ae=i.filter(pe=>(pe.customer.name===se.name||pe.customer.phone===se.phone)&&pe.paymentStatus!=="paid").reduce((pe,ve)=>pe+ve.total,0);return{name:se.name,debt:ae}}),G=r.map(se=>({name:se.name,debt:0})),Z=H.reduce((se,ue)=>se+ue.debt,0),te=G.reduce((se,ue)=>se+ue.debt,0);return{customerDebts:H.filter(se=>se.debt>0),supplierDebts:G.filter(se=>se.debt>0),totalCustomerDebt:Z,totalSupplierDebt:te,netDebt:Z-te}},[t,r]),Q=()=>{const H=S.toISOString().split("T")[0],G=O.toISOString().split("T")[0];try{switch(c){case"revenue":b8e(A.sales,H,G);break;case"cashflow":v8e(W.transactions,H,G);break;case"inventory":y8e(l,n,H,G);break;case"payroll":const Z=S.toISOString().slice(0,7),te=O.toISOString().slice(0,7);w8e(U.records,Z,te);break;case"debt":k8e(t,r,A.sales,H,G);break}Ze.success("Xut Excel thnh cng! File  c ti xung.")}catch(Z){console.error("Export error:",Z),Ze.error("C li khi xut Excel. Vui lng th li.")}};return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"md:hidden space-y-3 mb-4",children:[s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-3 rounded-lg border border-slate-200 dark:border-slate-700 shadow-sm",children:[s.jsx("label",{className:"text-xs font-medium text-slate-500 dark:text-slate-400 mb-2 block uppercase tracking-wider",children:"Loi bo co"}),s.jsxs("div",{className:"relative",children:[s.jsxs("select",{value:c,onChange:H=>u(H.target.value),className:"w-full appearance-none p-3 pl-10 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white font-medium focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all",children:[s.jsx("option",{value:"revenue",children:"Doanh thu"}),s.jsx("option",{value:"cashflow",children:"Thu chi"}),s.jsx("option",{value:"inventory",children:"Tn kho"}),s.jsx("option",{value:"payroll",children:"Lng nhn vin"}),s.jsx("option",{value:"debt",children:"Cng n"})]}),s.jsxs("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-500 dark:text-slate-400 pointer-events-none",children:[c==="revenue"&&s.jsx(D0,{className:"w-5 h-5"}),c==="cashflow"&&s.jsx(q0,{className:"w-5 h-5"}),c==="inventory"&&s.jsx(Hi,{className:"w-5 h-5"}),c==="payroll"&&s.jsx(Rm,{className:"w-5 h-5"}),c==="debt"&&s.jsx(E6,{className:"w-5 h-5"})]}),s.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-500 dark:text-slate-400 pointer-events-none",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:s.jsx("path",{d:"m6 9 6 6 6-6"})})})]})]}),s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-3 rounded-lg border border-slate-200 dark:border-slate-700 shadow-sm",children:[s.jsx("label",{className:"text-xs font-medium text-slate-500 dark:text-slate-400 mb-2 block uppercase tracking-wider",children:"Thi gian"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsxs("select",{value:x,onChange:H=>b(H.target.value),className:"w-full appearance-none p-3 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white font-medium focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all",children:[s.jsx("option",{value:"today",children:"Hm nay"}),s.jsx("option",{value:"week",children:"7 ngy qua"}),s.jsx("option",{value:"month",children:"Thng ny"}),s.jsx("option",{value:"quarter",children:"Qu ny"}),s.jsx("option",{value:"year",children:"Nm nay"}),s.jsx("option",{value:"custom",children:"Ty chnh"})]}),s.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-500 dark:text-slate-400 pointer-events-none",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:s.jsx("path",{d:"m6 9 6 6 6-6"})})})]}),s.jsx("button",{onClick:Q,className:"px-4 bg-emerald-600 text-white rounded-lg shadow-sm hover:bg-emerald-700 active:scale-95 transition-all flex items-center justify-center","aria-label":"Xut Excel",children:s.jsx(F7,{className:"w-5 h-5"})})]}),x==="custom"&&s.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3 animate-in fade-in slide-in-from-top-2 duration-200",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] text-slate-500 dark:text-slate-400 mb-1 block",children:"T ngy"}),s.jsx("input",{type:"date",value:g,onChange:H=>k(H.target.value),className:"w-full p-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg text-sm text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] text-slate-500 dark:text-slate-400 mb-1 block",children:"n ngy"}),s.jsx("input",{type:"date",value:y,onChange:H=>N(H.target.value),className:"w-full p-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg text-sm text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none"})]})]})]})]}),s.jsxs("div",{className:"hidden md:flex items-center gap-3 flex-wrap",children:[j8e.map(H=>{const G=c===H.key;return s.jsx("button",{type:"button","aria-pressed":G,onClick:()=>u(H.key),className:`px-6 py-2 rounded-xl font-medium whitespace-nowrap transition-all border ${G?H.activeClass:H.inactiveClass}`,children:s.jsxs("span",{className:"inline-flex items-center gap-2",children:[s.jsx("span",{"aria-hidden":!0,className:`w-2.5 h-2.5 rounded-full ${G?"bg-white/90":H.dotClass}`}),H.icon,H.label]})},H.key)}),s.jsx("div",{className:"h-8 w-px bg-slate-300 dark:bg-slate-600 mx-2"}),["today","week","month","quarter","year","custom"].map(H=>s.jsx("button",{onClick:()=>b(H),className:`px-4 py-2 rounded-lg font-medium text-sm transition-all ${x===H?"bg-blue-600 text-white shadow-md":"bg-slate-100 dark:bg-slate-700/50 text-slate-700 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:H==="today"?"Hm nay":H==="week"?"7 ngy":H==="month"?"Thng":H==="quarter"?"Qu":H==="year"?"Nm":"Ty chnh"},H)),x==="custom"&&s.jsxs(s.Fragment,{children:[s.jsx("input",{type:"date",value:g,onChange:H=>k(H.target.value),className:"px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white text-sm"}),s.jsx("span",{className:"text-slate-500 dark:text-slate-400",children:""}),s.jsx("input",{type:"date",value:y,onChange:H=>N(H.target.value),className:"px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white text-sm"})]}),s.jsxs("div",{className:"ml-auto flex gap-2",children:[s.jsxs("button",{onClick:Q,className:"px-5 py-2 bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-lg font-medium shadow-md hover:shadow-lg hover:from-green-700 hover:to-emerald-700 transition-all duration-200 flex items-center gap-2",children:[s.jsx(F7,{className:"w-4 h-4"})," Xut Excel"]}),c==="revenue"&&s.jsxs("div",{className:"relative group",children:[s.jsxs("button",{className:"px-4 py-2 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg font-medium shadow-md hover:shadow-lg hover:from-blue-700 hover:to-indigo-700 transition-all duration-200 flex items-center gap-2",children:[s.jsx(Y1,{className:"w-4 h-4"})," Bo co nng cao"]}),s.jsxs("div",{className:"absolute right-0 top-full mt-2 w-64 bg-white dark:bg-slate-800 rounded-lg shadow-xl border border-slate-200 dark:border-slate-700 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50",children:[s.jsxs("button",{onClick:()=>{const H=S.toISOString().split("T")[0],G=O.toISOString().split("T")[0];N8e(A.sales,H,G,20),Ze.success("Xut Top sn phm thnh cng!")},className:"w-full px-4 py-3 text-left hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors flex items-center gap-3 text-sm text-slate-700 dark:text-slate-300 rounded-t-lg",children:[s.jsx(K7,{className:"w-4 h-4 text-blue-600"}),s.jsx("span",{children:"Top sn phm bn chy"})]}),s.jsxs("button",{onClick:()=>{const H=S.toISOString().split("T")[0],G=O.toISOString().split("T")[0];_8e(A.sales,H,G),Ze.success("Xut li nhun sn phm thnh cng!")},className:"w-full px-4 py-3 text-left hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors flex items-center gap-3 text-sm text-slate-700 dark:text-slate-300 rounded-b-lg",children:[s.jsx(D7,{className:"w-4 h-4 text-green-600"}),s.jsx("span",{children:"Li nhun theo sn phm"})]})]})]}),c==="inventory"&&s.jsxs("button",{onClick:()=>{S.toISOString().split("T")[0],O.toISOString().split("T")[0],S8e(l,n),Ze.success("Xut bo co tn kho chi tit thnh cng!")},className:"px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg font-medium shadow-md hover:shadow-lg hover:from-purple-700 hover:to-pink-700 transition-all duration-200 flex items-center gap-2",children:[s.jsx(Hi,{className:"w-4 h-4"})," Tn kho chi tit"]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-6",children:[c==="revenue"&&s.jsxs("div",{className:"space-y-6",children:[o&&s.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:"ang ti doanh thu..."}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-lg p-6 border border-blue-200 dark:border-blue-800",children:[s.jsxs("div",{className:"flex items-center gap-1 text-sm font-medium text-blue-700 dark:text-blue-400 mb-2",children:[s.jsx(D0,{className:"w-4 h-4"})," Tng doanh thu"]}),s.jsx("div",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400",children:Te(A.totalRevenue).replace("","")}),s.jsx("div",{className:"text-xs text-blue-600 dark:text-blue-400 mt-1",children:""})]}),s.jsxs("div",{className:"bg-gradient-to-br from-red-50 to-rose-50 dark:from-red-900/20 dark:to-rose-900/20 rounded-lg p-6 border border-red-200 dark:border-red-800",children:[s.jsxs("div",{className:"flex items-center gap-1 text-sm font-medium text-red-700 dark:text-red-400 mb-2",children:[s.jsx(q0,{className:"w-4 h-4"})," Tng chi ph"]}),s.jsx("div",{className:"text-3xl font-bold text-red-600 dark:text-red-400",children:Te(A.totalCost).replace("","")}),s.jsx("div",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:""})]}),s.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 rounded-lg p-6 border border-green-200 dark:border-green-800",children:[s.jsxs("div",{className:"flex items-center gap-1 text-sm font-medium text-green-700 dark:text-green-400 mb-2",children:[s.jsx(Y1,{className:"w-4 h-4"})," Li nhun"]}),s.jsx("div",{className:"text-3xl font-bold text-green-600 dark:text-green-400",children:Te(A.totalProfit).replace("","")}),s.jsx("div",{className:"text-xs text-green-600 dark:text-green-400 mt-1",children:""})]}),s.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-fuchsia-50 dark:from-purple-900/20 dark:to-fuchsia-900/20 rounded-lg p-6 border border-purple-200 dark:border-purple-800",children:[s.jsxs("div",{className:"flex items-center gap-1 text-sm font-medium text-purple-700 dark:text-purple-400 mb-2",children:[s.jsx(D7,{className:"w-4 h-4"})," T sut li nhun"]}),s.jsx("div",{className:"text-3xl font-bold text-purple-600 dark:text-purple-400",children:A.profitMargin}),s.jsx("div",{className:"text-xs text-purple-600 dark:text-purple-400 mt-1",children:"%"})]})]}),s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700",children:[s.jsx("div",{className:"px-6 py-4 border-b border-slate-200 dark:border-slate-700",children:s.jsxs("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:["Chi tit n hng theo ngy (",A.dailyReport.length," ngy)"]})}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-blue-600 text-white",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3 text-center text-xs font-bold uppercase",children:"#"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold uppercase",children:"Ngy"}),s.jsxs("th",{className:"px-4 py-3 text-right text-xs font-bold uppercase",children:["Vn nhp kho",s.jsx("br",{}),"(1)"]}),s.jsxs("th",{className:"px-4 py-3 text-right text-xs font-bold uppercase",children:["Tin hng",s.jsx("br",{}),"(2)"]}),s.jsxs("th",{className:"px-4 py-3 text-right text-xs font-bold uppercase",children:["Vn sa cha",s.jsx("br",{}),"(3)"]}),s.jsxs("th",{className:"px-4 py-3 text-right text-xs font-bold uppercase",children:["Cng sa cha",s.jsx("br",{}),"(4)"]}),s.jsxs("th",{className:"px-4 py-3 text-right text-xs font-bold uppercase",children:["Doanh thu",s.jsx("br",{}),"(5 = 2 + 3 + 4)"]}),s.jsxs("th",{className:"px-4 py-3 text-right text-xs font-bold uppercase",children:["Li nhun",s.jsx("br",{}),"(6 = 2 - 1 - 4)"]}),s.jsxs("th",{className:"px-4 py-3 text-right text-xs font-bold uppercase",children:["Thu khc",s.jsx("br",{}),"(7)"]}),s.jsxs("th",{className:"px-4 py-3 text-right text-xs font-bold uppercase",children:["Chi khc",s.jsx("br",{}),"(8)"]}),s.jsxs("th",{className:"px-4 py-3 text-right text-xs font-bold uppercase bg-green-700",children:["Li nhun rng",s.jsx("br",{}),"(9 = (6 + 7) - 8)"]})]})}),s.jsxs("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:[A.dailyReport.map((H,G)=>{const te=H.totalRevenue,se=0,ue=0,ae=te+se+ue,pe=te-0-ue,ve=0,Pe=0,xe=pe+ve-Pe;return s.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/30",children:[s.jsx("td",{className:"px-4 py-3 text-center text-sm font-medium text-slate-900 dark:text-white",children:G+1}),s.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-slate-900 dark:text-white",children:new Date(H.date).toLocaleDateString("vi-VN")}),s.jsx("td",{className:"px-4 py-3 text-right text-sm text-slate-900 dark:text-white",children:Te(0)}),s.jsx("td",{className:"px-4 py-3 text-right text-sm font-semibold text-blue-600 dark:text-blue-400",children:Te(te)}),s.jsx("td",{className:"px-4 py-3 text-right text-sm text-slate-900 dark:text-white",children:Te(se)}),s.jsx("td",{className:"px-4 py-3 text-right text-sm text-slate-900 dark:text-white",children:Te(ue)}),s.jsx("td",{className:"px-4 py-3 text-right text-sm font-bold text-blue-600 dark:text-blue-400",children:Te(ae)}),s.jsx("td",{className:"px-4 py-3 text-right text-sm font-bold text-orange-600 dark:text-orange-400",children:Te(pe)}),s.jsx("td",{className:"px-4 py-3 text-right text-sm text-slate-900 dark:text-white",children:Te(ve)}),s.jsx("td",{className:"px-4 py-3 text-right text-sm text-red-600 dark:text-red-400",children:Te(Pe)}),s.jsx("td",{className:"px-4 py-3 text-right text-sm font-black text-green-700 dark:text-green-400 bg-green-50 dark:bg-green-900/20",children:Te(xe)})]},H.date)}),A.dailyReport.length>0&&s.jsxs("tr",{className:"bg-blue-50 dark:bg-blue-900/20 font-bold border-t-2 border-blue-600",children:[s.jsx("td",{colSpan:2,className:"px-4 py-3 text-left text-sm font-black text-slate-900 dark:text-white",children:"Tng:"}),s.jsx("td",{className:"px-4 py-3 text-right text-sm text-slate-900 dark:text-white",children:Te(0)}),s.jsx("td",{className:"px-4 py-3 text-right text-sm font-black text-blue-600 dark:text-blue-400",children:Te(A.totalRevenue)}),s.jsx("td",{className:"px-4 py-3 text-right text-sm text-slate-900 dark:text-white",children:Te(0)}),s.jsx("td",{className:"px-4 py-3 text-right text-sm text-slate-900 dark:text-white",children:Te(0)}),s.jsx("td",{className:"px-4 py-3 text-right text-sm font-black text-blue-600 dark:text-blue-400",children:Te(A.totalRevenue)}),s.jsx("td",{className:"px-4 py-3 text-right text-sm font-black text-orange-600 dark:text-orange-400",children:Te(A.totalProfit)}),s.jsx("td",{className:"px-4 py-3 text-right text-sm text-slate-900 dark:text-white",children:Te(0)}),s.jsx("td",{className:"px-4 py-3 text-right text-sm text-red-600 dark:text-red-400",children:Te(0)}),s.jsx("td",{className:"px-4 py-3 text-right text-sm font-black text-green-700 dark:text-green-400 bg-green-100 dark:bg-green-900/30",children:Te(A.totalProfit)})]})]})]})})]}),!1]}),c==="cashflow"&&s.jsxs("div",{className:"space-y-6",children:[q&&s.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:"ang ti s qu..."}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 rounded-lg p-6 border border-green-200 dark:border-green-800",children:[s.jsx("div",{className:"text-sm font-medium text-green-700 dark:text-green-400 mb-2",children:s.jsxs("span",{className:"inline-flex items-center gap-1",children:[s.jsx(q0,{className:"w-4 h-4"})," Tng thu"]})}),s.jsx("div",{className:"text-3xl font-bold text-green-600 dark:text-green-400",children:Te(W.totalIncome).replace("","")}),s.jsx("div",{className:"text-xs text-green-600 dark:text-green-400 mt-1",children:""})]}),s.jsxs("div",{className:"bg-gradient-to-br from-red-50 to-rose-50 dark:from-red-900/20 dark:to-rose-900/20 rounded-lg p-6 border border-red-200 dark:border-red-800",children:[s.jsxs("div",{className:"text-sm font-medium text-red-700 dark:text-red-400 mb-2 inline-flex items-center gap-1",children:[s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"w-4 h-4",children:[s.jsx("rect",{x:"2",y:"6",width:"20",height:"12",rx:"2",ry:"2"}),s.jsx("circle",{cx:"12",cy:"12",r:"2"}),s.jsx("path",{d:"M6 12h.01M18 12h.01"})]}),"Tng chi"]}),s.jsx("div",{className:"text-3xl font-bold text-red-600 dark:text-red-400",children:Te(W.totalExpense).replace("","")}),s.jsx("div",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:""})]}),s.jsxs("div",{className:`bg-gradient-to-br rounded-lg p-6 border ${W.netCashFlow>=0?"from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 border-blue-200 dark:border-blue-800":"from-orange-50 to-amber-50 dark:from-orange-900/20 dark:to-amber-900/20 border-orange-200 dark:border-orange-800"}`,children:[s.jsx("div",{className:`text-sm font-medium mb-2 ${W.netCashFlow>=0?"text-blue-700 dark:text-blue-400":"text-orange-700 dark:text-orange-400"}`,children:s.jsxs("span",{className:"inline-flex items-center gap-1",children:[s.jsx(D0,{className:"w-4 h-4"})," Dng tin rng"]})}),s.jsx("div",{className:`text-3xl font-bold ${W.netCashFlow>=0?"text-blue-600 dark:text-blue-400":"text-orange-600 dark:text-orange-400"}`,children:Te(W.netCashFlow).replace("","")}),s.jsx("div",{className:`text-xs mt-1 ${W.netCashFlow>=0?"text-blue-600 dark:text-blue-400":"text-orange-600 dark:text-orange-400"}`,children:""})]})]}),s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"Thu chi theo danh mc"}),s.jsx("div",{className:"space-y-3",children:Object.entries(W.byCategory).map(([H,G])=>s.jsxs("div",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-slate-50 to-slate-100 dark:from-slate-700 dark:to-slate-800 rounded-lg hover:shadow-md transition-shadow",children:[s.jsx("span",{className:"font-semibold text-slate-900 dark:text-white capitalize",children:H}),s.jsxs("div",{className:"flex gap-6",children:[s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"Thu"}),s.jsx("div",{className:"text-green-600 dark:text-green-400 font-bold",children:Te(G.income)})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"Chi"}),s.jsx("div",{className:"text-red-600 dark:text-red-400 font-bold",children:Te(G.expense)})]})]})]},H))})]})]}),c==="inventory"&&s.jsxs("div",{className:"space-y-6",children:[d&&s.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:"ang ti tn kho..."}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-lg p-6 border border-blue-200 dark:border-blue-800",children:[s.jsx("div",{className:"text-sm font-medium text-blue-700 dark:text-blue-400 mb-2",children:s.jsxs("span",{className:"inline-flex items-center gap-1",children:[s.jsx(Hi,{className:"w-4 h-4"})," Tng gi tr tn kho"]})}),s.jsx("div",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400",children:Te(R.totalValue).replace("","")}),s.jsx("div",{className:"text-xs text-blue-600 dark:text-blue-400 mt-1",children:""})]}),s.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-fuchsia-50 dark:from-purple-900/20 dark:to-fuchsia-900/20 rounded-lg p-6 border border-purple-200 dark:border-purple-800",children:[s.jsx("div",{className:"text-sm font-medium text-purple-700 dark:text-purple-400 mb-2",children:s.jsxs("span",{className:"inline-flex items-center gap-1",children:[s.jsx(K7,{className:"w-4 h-4"})," Tng sn phm"]})}),s.jsx("div",{className:"text-3xl font-bold text-purple-600 dark:text-purple-400",children:R.parts.length}),s.jsx("div",{className:"text-xs text-purple-600 dark:text-purple-400 mt-1",children:"sn phm"})]}),s.jsxs("div",{className:"bg-gradient-to-br from-red-50 to-rose-50 dark:from-red-900/20 dark:to-rose-900/20 rounded-lg p-6 border border-red-200 dark:border-red-800",children:[s.jsx("div",{className:"text-sm font-medium text-red-700 dark:text-red-400 mb-2",children:s.jsxs("span",{className:"inline-flex items-center gap-1",children:[s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"w-4 h-4 text-amber-500",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v4m0 4h.01"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.29 3.86 1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0Z"})]}),"Sn phm sp ht"]})}),s.jsx("div",{className:"text-3xl font-bold text-red-600 dark:text-red-400",children:R.lowStockCount}),s.jsx("div",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:"sn phm"})]})]}),R.lowStockCount>0&&s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:s.jsxs("span",{className:"inline-flex items-center gap-1",children:[s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"w-4 h-4 text-amber-500",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v4m0 4h.01"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.29 3.86 1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0Z"})]}),"Cnh bo hng sp ht"]})}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-slate-700 dark:text-slate-300",children:"Sn phm"}),s.jsx("th",{className:"px-4 py-2 text-right text-sm font-medium text-slate-700 dark:text-slate-300",children:"Tn kho"}),s.jsx("th",{className:"px-4 py-2 text-right text-sm font-medium text-slate-700 dark:text-slate-300",children:"n gi"}),s.jsx("th",{className:"px-4 py-2 text-right text-sm font-medium text-slate-700 dark:text-slate-300",children:"Gi tr"})]})}),s.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:R.lowStockItems.map(H=>s.jsxs("tr",{children:[s.jsx("td",{className:"px-4 py-2 text-sm text-slate-900 dark:text-white",children:H.name}),s.jsx("td",{className:"px-4 py-2 text-sm text-right text-red-600 dark:text-red-400 font-medium",children:H.stock}),s.jsx("td",{className:"px-4 py-2 text-sm text-right text-slate-900 dark:text-white",children:Te(H.price)}),s.jsx("td",{className:"px-4 py-2 text-sm text-right font-medium text-slate-900 dark:text-white",children:Te(H.value)})]},H.id))})]})})]})]}),c==="payroll"&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-lg p-6 border border-blue-200 dark:border-blue-800",children:[s.jsx("div",{className:"text-sm font-medium text-blue-700 dark:text-blue-400 mb-2",children:s.jsxs("span",{className:"inline-flex items-center gap-1",children:[s.jsx(D0,{className:"w-4 h-4"})," Tng lng"]})}),s.jsx("div",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400",children:Te(U.totalSalary).replace("","")}),s.jsx("div",{className:"text-xs text-blue-600 dark:text-blue-400 mt-1",children:""})]}),s.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 rounded-lg p-6 border border-green-200 dark:border-green-800",children:[s.jsx("div",{className:"text-sm font-medium text-green-700 dark:text-green-400 mb-2",children:s.jsxs("span",{className:"inline-flex items-center gap-1",children:[s.jsx(ob,{className:"w-4 h-4"}),"  thanh ton"]})}),s.jsx("div",{className:"text-3xl font-bold text-green-600 dark:text-green-400",children:Te(U.paidSalary).replace("","")}),s.jsx("div",{className:"text-xs text-green-600 dark:text-green-400 mt-1",children:""})]}),s.jsxs("div",{className:"bg-gradient-to-br from-red-50 to-rose-50 dark:from-red-900/20 dark:to-rose-900/20 rounded-lg p-6 border border-red-200 dark:border-red-800",children:[s.jsx("div",{className:"text-sm font-medium text-red-700 dark:text-red-400 mb-2",children:" Cha thanh ton"}),s.jsx("div",{className:"text-3xl font-bold text-red-600 dark:text-red-400",children:Te(U.unpaidSalary).replace("","")}),s.jsx("div",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:""})]}),s.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-fuchsia-50 dark:from-purple-900/20 dark:to-fuchsia-900/20 rounded-lg p-6 border border-purple-200 dark:border-purple-800",children:[s.jsx("div",{className:"text-sm font-medium text-purple-700 dark:text-purple-400 mb-2",children:s.jsxs("span",{className:"inline-flex items-center gap-1",children:[s.jsx(Rm,{className:"w-4 h-4"})," S nhn vin"]})}),s.jsx("div",{className:"text-3xl font-bold text-purple-600 dark:text-purple-400",children:U.employeeCount}),s.jsx("div",{className:"text-xs text-purple-600 dark:text-purple-400 mt-1",children:"nhn vin"})]})]}),s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700",children:[s.jsx("div",{className:"px-6 py-4 border-b border-slate-200 dark:border-slate-700",children:s.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:"Chi tit lng"})}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700/50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-slate-700 dark:text-slate-300",children:"Thng"}),s.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-slate-700 dark:text-slate-300",children:"Nhn vin"}),s.jsx("th",{className:"px-4 py-2 text-right text-sm font-medium text-slate-700 dark:text-slate-300",children:"Lng thc nhn"}),s.jsx("th",{className:"px-4 py-2 text-center text-sm font-medium text-slate-700 dark:text-slate-300",children:"Trng thi"})]})}),s.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:U.records.map(H=>{const G=a.find(Z=>Z.id===H.employeeId);return s.jsxs("tr",{children:[s.jsx("td",{className:"px-4 py-2 text-sm text-slate-900 dark:text-white",children:H.month}),s.jsx("td",{className:"px-4 py-2 text-sm text-slate-900 dark:text-white",children:(G==null?void 0:G.name)||"N/A"}),s.jsx("td",{className:"px-4 py-2 text-sm text-right font-medium text-slate-900 dark:text-white",children:Te(H.netSalary)}),s.jsx("td",{className:"px-4 py-2 text-center",children:s.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${H.paymentStatus==="paid"?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400"}`,children:H.paymentStatus==="paid"?" tr":"Cha tr"})})]},H.id)})})]})})]})]}),c==="debt"&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 rounded-lg p-6 border border-green-200 dark:border-green-800",children:[s.jsx("div",{className:"text-sm font-medium text-green-700 dark:text-green-400 mb-2",children:"N khch hng"}),s.jsx("div",{className:"text-3xl font-bold text-green-600 dark:text-green-400",children:L.customerDebts.length}),s.jsx("div",{className:"text-xs text-green-600 dark:text-green-400 mt-1",children:""})]}),s.jsxs("div",{className:"bg-gradient-to-br from-red-50 to-rose-50 dark:from-red-900/20 dark:to-rose-900/20 rounded-lg p-6 border border-red-200 dark:border-red-800",children:[s.jsx("div",{className:"text-sm font-medium text-red-700 dark:text-red-400 mb-2",children:"N nh cung cp"}),s.jsx("div",{className:"text-3xl font-bold text-red-600 dark:text-red-400",children:L.supplierDebts.length}),s.jsx("div",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:""})]}),s.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-lg p-6 border border-blue-200 dark:border-blue-800",children:[s.jsx("div",{className:"text-sm font-medium text-blue-700 dark:text-blue-400 mb-2",children:"Cng n rng"}),s.jsx("div",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400",children:"0"}),s.jsx("div",{className:"text-xs text-blue-600 dark:text-blue-400 mt-1",children:""})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-800 dark:to-slate-900 rounded-lg p-6 border border-slate-200 dark:border-slate-700",children:[s.jsxs("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4 flex items-center gap-2",children:[s.jsx(ff,{className:"w-4 h-4 text-green-600 dark:text-green-400"}),"Cng n khch hng"]}),s.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:L.customerDebts.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"text-4xl mb-3",children:""}),s.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Khng c cng n"})]}):L.customerDebts.map((H,G)=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-white dark:bg-slate-700 rounded-lg hover:shadow-md transition-shadow",children:[s.jsx("span",{className:"font-medium text-slate-900 dark:text-white",children:H.name}),s.jsx("span",{className:"text-green-600 dark:text-green-400 font-bold",children:Te(H.debt)})]},G))})]}),s.jsxs("div",{className:"bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-800 dark:to-slate-900 rounded-lg p-6 border border-slate-200 dark:border-slate-700",children:[s.jsxs("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4 flex items-center gap-2",children:[s.jsx("span",{className:"text-red-600 dark:text-red-400",children:""}),"Cng n nh cung cp"]}),s.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:L.supplierDebts.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"text-4xl mb-3",children:""}),s.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Khng c cng n"})]}):L.supplierDebts.map((H,G)=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-white dark:bg-slate-700 rounded-lg hover:shadow-md transition-shadow",children:[s.jsx("span",{className:"font-medium text-slate-900 dark:text-white",children:H.name}),s.jsx("span",{className:"text-red-600 dark:text-red-400 font-bold",children:Te(H.debt)})]},G))})]})]})]})]})]})},A8e=()=>{const{employees:e,setEmployees:t}=Ua(),{data:r,isLoading:n}=$6(),{mutateAsync:a}=Une(),{mutateAsync:i}=zne(),{mutateAsync:o}=qne(),l=r||e;T.useEffect(()=>{r&&t(r)},[r,t]);const[d,c]=T.useState("list"),[u,x]=T.useState(!1),[b,g]=T.useState(null),[k,y]=T.useState(""),[N,S]=T.useState({name:"",phone:"",email:"",position:"",department:"",baseSalary:0,allowances:0,status:"active",startDate:new Date().toISOString().split("T")[0]}),O=T.useMemo(()=>l.filter(U=>{var L;return U.name.toLowerCase().includes(k.toLowerCase())||((L=U.phone)==null?void 0:L.toLowerCase().includes(k.toLowerCase()))||U.position.toLowerCase().includes(k.toLowerCase())}),[l,k]),A=async U=>{if(U.preventDefault(),!N.name||!N.position||!N.baseSalary){Ze.error("Vui lng in y  thng tin bt buc!");return}try{b?await i({id:b.id,updates:N}):await a(N),P()}catch{}},P=()=>{S({name:"",phone:"",email:"",position:"",department:"",baseSalary:0,allowances:0,status:"active",startDate:new Date().toISOString().split("T")[0]}),g(null),x(!1)},q=U=>{g(U),S(U),x(!0)},W=async U=>{if(confirm(`Bn c chc mun xa nhn vin "${U.name}" khng?`))try{await o(U.id)}catch{}},R=T.useMemo(()=>{const U=l.filter(Q=>Q.status==="active").length,L=l.filter(Q=>Q.status==="active").reduce((Q,H)=>Q+H.baseSalary+(H.allowances||0),0);return{active:U,totalSalary:L,total:l.length}},[l]);return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[s.jsx(ff,{className:"w-8 h-8 text-blue-600 dark:text-blue-400"}),"Qun l nhn vin"]}),s.jsxs("button",{onClick:()=>x(!0),className:"px-6 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg font-medium shadow-md hover:shadow-xl hover:from-blue-700 hover:to-indigo-700 transition-all duration-200 flex items-center gap-2",children:[s.jsx(oc,{className:"w-5 h-5"})," Thm nhn vin"]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg p-6 text-white shadow-lg",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-white/80 text-sm font-medium",children:"Tng nhn vin"}),s.jsx(ff,{className:"w-8 h-8"})]}),s.jsx("div",{className:"text-3xl font-bold",children:R.total}),s.jsxs("div",{className:"text-white/70 text-sm mt-1",children:[R.active," ang lm vic"]})]}),s.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-green-600 rounded-lg p-6 text-white shadow-lg",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-white/80 text-sm font-medium",children:"ang hot ng"}),s.jsx(vee,{className:"w-8 h-8"})]}),s.jsx("div",{className:"text-3xl font-bold",children:R.active}),s.jsx("div",{className:"text-white/70 text-sm mt-1",children:"Nhn vin active"})]}),s.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-lg p-6 text-white shadow-lg",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-white/80 text-sm font-medium",children:"Tng lng thng"}),s.jsx(D0,{className:"w-8 h-8"})]}),s.jsx("div",{className:"text-2xl font-bold",children:Te(R.totalSalary)}),s.jsx("div",{className:"text-white/70 text-sm mt-1",children:"c tnh"})]})]}),s.jsx("div",{className:"flex gap-2 border-b border-slate-200 dark:border-slate-700",children:[{key:"list",label:"Danh sch",icon:s.jsx(E6,{className:"w-4 h-4"})},{key:"attendance",label:"Chm cng",icon:s.jsx(yS,{className:"w-4 h-4"})},{key:"payroll",label:"Qun l lng",icon:s.jsx(D0,{className:"w-4 h-4"})},{key:"history",label:"Lch s",icon:s.jsx(gw,{className:"w-4 h-4"})}].map(U=>s.jsx("button",{onClick:()=>c(U.key),className:`px-6 py-3 font-medium transition-all ${d===U.key?"text-blue-600 dark:text-blue-400 border-b-2 border-blue-600 dark:border-blue-400":"text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-slate-200"}`,children:s.jsxs("span",{className:"inline-flex items-center gap-1",children:[U.icon,U.label]})},U.key))}),d==="list"&&s.jsx("div",{className:"flex gap-4",children:s.jsx("input",{type:"text",placeholder:"Tm kim nhn vin (tn, ST, chc v)...",value:k,onChange:U=>y(U.target.value),className:"flex-1 px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500"})}),d==="list"&&s.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 overflow-hidden",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-slate-50 dark:bg-slate-900/50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Nhn vin"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Chc v"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Phng ban"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Lng CB"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Ph cp"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Ngy vo"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Trng thi"}),s.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Thao tc"})]})}),s.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:O.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:8,className:"px-6 py-8 text-center text-slate-500 dark:text-slate-400",children:"Khng tm thy nhn vin no"})}):O.map(U=>s.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors",children:[s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-slate-900 dark:text-white",children:U.name}),U.phone&&s.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:s.jsxs("span",{className:"inline-flex items-center gap-1",children:[s.jsx(LB,{className:"w-3 h-3"})," ",U.phone]})}),U.email&&s.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:s.jsxs("span",{className:"inline-flex items-center gap-1",children:[s.jsx(iee,{className:"w-3 h-3"})," ",U.email]})})]})}),s.jsx("td",{className:"px-6 py-4 text-slate-700 dark:text-slate-300",children:U.position}),s.jsx("td",{className:"px-6 py-4 text-slate-700 dark:text-slate-300",children:U.department||"-"}),s.jsx("td",{className:"px-6 py-4 font-medium text-slate-900 dark:text-white",children:Te(U.baseSalary)}),s.jsx("td",{className:"px-6 py-4 text-slate-700 dark:text-slate-300",children:Te(U.allowances||0)}),s.jsx("td",{className:"px-6 py-4 text-slate-700 dark:text-slate-300",children:Fn(U.startDate)}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${U.status==="active"?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":U.status==="inactive"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400":"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400"}`,children:U.status==="active"?"Hot ng":U.status==="inactive"?"Tm ngh":"Ngh vic"})}),s.jsxs("td",{className:"px-6 py-4 text-right space-x-2",children:[s.jsxs("button",{onClick:()=>q(U),className:"inline-flex items-center gap-1 text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 font-medium text-sm",children:[s.jsx(H7,{className:"w-4 h-4"})," Sa"]}),s.jsxs("button",{onClick:()=>W(U),className:"inline-flex items-center gap-1 text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-300 font-medium text-sm",children:[s.jsx(db,{className:"w-4 h-4"})," Xa"]})]})]},U.id))})]})})}),d==="attendance"&&s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-8 text-center",children:[s.jsx(yS,{className:"w-16 h-16 mb-4 text-slate-400"}),s.jsx("h3",{className:"text-xl font-semibold text-slate-900 dark:text-white mb-2",children:"Chc nng chm cng"}),s.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Tnh nng qun l chm cng ang c pht trin..."})]}),d==="payroll"&&s.jsx(pK,{}),d==="history"&&s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-8 text-center",children:[s.jsx(gw,{className:"w-16 h-16 mb-4 text-slate-400"}),s.jsx("h3",{className:"text-xl font-semibold text-slate-900 dark:text-white mb-2",children:"Lch s lm vic"}),s.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Tnh nng xem lch s lm vic ang c pht trin..."})]}),u&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"sticky top-0 bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 px-6 py-4 flex items-center justify-between",children:[s.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white",children:b?s.jsxs("span",{className:"inline-flex items-center gap-2",children:[s.jsx(H7,{className:"w-5 h-5"})," Sa nhn vin"]}):s.jsxs("span",{className:"inline-flex items-center gap-2",children:[s.jsx(oc,{className:"w-5 h-5"})," Thm nhn vin mi"]})}),s.jsx("button",{onClick:P,className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-300 text-2xl",children:""})]}),s.jsxs("form",{onSubmit:A,className:"p-6 space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:["H tn ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",value:N.name,onChange:U=>S({...N,name:U.target.value}),className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"S in thoi"}),s.jsx("input",{type:"tel",value:N.phone,onChange:U=>S({...N,phone:U.target.value}),className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Email"}),s.jsx("input",{type:"email",value:N.email,onChange:U=>S({...N,email:U.target.value}),className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:["Chc v ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",value:N.position,onChange:U=>S({...N,position:U.target.value}),className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Phng ban"}),s.jsx("input",{type:"text",value:N.department,onChange:U=>S({...N,department:U.target.value}),className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:["Lng c bn ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"number",value:N.baseSalary,onChange:U=>S({...N,baseSalary:Number(U.target.value)}),className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Ph cp"}),s.jsx("input",{type:"number",value:N.allowances,onChange:U=>S({...N,allowances:Number(U.target.value)}),className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:["Ngy vo lm ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"date",value:N.startDate,onChange:U=>S({...N,startDate:U.target.value}),className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Trng thi"}),s.jsxs("select",{value:N.status,onChange:U=>S({...N,status:U.target.value}),className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white",children:[s.jsx("option",{value:"active",children:"Hot ng"}),s.jsx("option",{value:"inactive",children:"Tm ngh"}),s.jsx("option",{value:"terminated",children:"Ngh vic"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"S ti khon"}),s.jsx("input",{type:"text",value:N.bankAccount,onChange:U=>S({...N,bankAccount:U.target.value}),className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Ngn hng"}),s.jsx("input",{type:"text",value:N.bankName,onChange:U=>S({...N,bankName:U.target.value}),className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"M s thu"}),s.jsx("input",{type:"text",value:N.taxCode,onChange:U=>S({...N,taxCode:U.target.value}),className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white"})]})]}),s.jsxs("div",{className:"flex gap-3 pt-4",children:[s.jsx("button",{type:"submit",className:"flex-1 px-6 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg font-medium shadow-md hover:shadow-xl hover:from-blue-700 hover:to-indigo-700 transition-all inline-flex items-center justify-center gap-2",children:b?s.jsxs(s.Fragment,{children:[s.jsx(kS,{className:"w-5 h-5"})," Lu thay i"]}):s.jsxs(s.Fragment,{children:[s.jsx(oc,{className:"w-5 h-5"})," Thm nhn vin"]})}),s.jsxs("button",{type:"button",onClick:P,className:"px-6 py-3 bg-slate-200 dark:bg-slate-700 text-slate-700 dark:text-slate-300 rounded-lg font-medium hover:bg-slate-300 dark:hover:bg-slate-600 transition-colors inline-flex items-center gap-2",children:[s.jsx(ic,{className:"w-5 h-5"})," Hy"]})]})]})]})})]})},E8e=()=>{const{currentBranchId:e}=Ua(),{data:t=[],isLoading:r}=lh(),{data:n=[],isLoading:a}=RE(),i=r||a,o=T.useMemo(()=>{const k=new Map;return t.forEach(y=>{const N=y.category||"Khng phn loi",S=y.stock[e]||0,O=y.retailPrice[e]||0,A=S*O,P=k.get(N);P?(P.value+=A,P.count+=1,P.stock+=S):k.set(N,{value:A,count:1,stock:S})}),Array.from(k.entries()).map(([y,N])=>({name:y,value:Math.round(N.value),count:N.count,stock:N.stock})).sort((y,N)=>N.value-y.value)},[t,e]),l=T.useMemo(()=>t.filter(k=>{const y=k.stock[e]||0;return y>0&&y<=10}).sort((k,y)=>{const N=k.stock[e]||0,S=y.stock[e]||0;return N-S}).slice(0,10),[t,e]),d=T.useMemo(()=>t.filter(k=>(k.stock[e]||0)===0).length,[t,e]),c=T.useMemo(()=>t.map(k=>{const y=k.stock[e]||0,N=k.retailPrice[e]||0;return{...k,totalValue:y*N}}).filter(k=>k.totalValue>0).sort((k,y)=>y.totalValue-k.totalValue).slice(0,10),[t,e]),u=T.useMemo(()=>t.reduce((k,y)=>{const N=y.stock[e]||0,S=y.retailPrice[e]||0;return k+N*S},0),[t,e]),x=T.useMemo(()=>t.reduce((k,y)=>{const N=y.stock[e]||0;return k+N},0),[t,e]),b=T.useMemo(()=>{const k=new Date;k.setDate(k.getDate()-30);const y=new Map;return n.filter(N=>new Date(N.date)>=k).forEach(N=>{const S=N.date.slice(0,10),O=y.get(S)||{in:0,out:0};N.type==="Nhp kho"?O.in+=N.quantity:O.out+=N.quantity,y.set(S,O)}),Array.from(y.entries()).map(([N,S])=>({date:new Date(N).toLocaleDateString("vi-VN",{day:"2-digit",month:"2-digit"}),"Nhp kho":S.in,"Xut kho":S.out})).slice(-14)},[n]),g=["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6","#ec4899","#06b6d4","#f97316"];return i?s.jsx("div",{className:"flex items-center justify-center h-96",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 p-6 rounded-lg border border-blue-200 dark:border-blue-700",children:[s.jsx("div",{className:"text-sm font-medium text-blue-600 dark:text-blue-400 mb-2",children:"Tng gi tr tn kho"}),s.jsx("div",{className:"text-3xl font-bold text-blue-900 dark:text-blue-100",children:Te(u)})]}),s.jsxs("div",{className:"bg-gradient-to-br from-emerald-50 to-emerald-100 dark:from-emerald-900/20 dark:to-emerald-800/20 p-6 rounded-lg border border-emerald-200 dark:border-emerald-700",children:[s.jsx("div",{className:"text-sm font-medium text-emerald-600 dark:text-emerald-400 mb-2",children:"Tng SL tn kho"}),s.jsx("div",{className:"text-3xl font-bold text-emerald-900 dark:text-emerald-100",children:x}),s.jsxs("div",{className:"text-xs text-emerald-700 dark:text-emerald-300 mt-1",children:[t.length," m sn phm"]})]}),s.jsxs("div",{className:"bg-gradient-to-br from-amber-50 to-amber-100 dark:from-amber-900/20 dark:to-amber-800/20 p-6 rounded-lg border border-amber-200 dark:border-amber-700",children:[s.jsx("div",{className:"text-sm font-medium text-amber-600 dark:text-amber-400 mb-2",children:"Sp ht hng"}),s.jsx("div",{className:"text-3xl font-bold text-amber-900 dark:text-amber-100",children:l.length})]}),s.jsxs("div",{className:"bg-gradient-to-br from-red-50 to-red-100 dark:from-red-900/20 dark:to-red-800/20 p-6 rounded-lg border border-red-200 dark:border-red-700",children:[s.jsx("div",{className:"text-sm font-medium text-red-600 dark:text-red-400 mb-2",children:"Ht hng"}),s.jsx("div",{className:"text-3xl font-bold text-red-900 dark:text-red-100",children:d})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-white dark:bg-[#1e293b] p-6 rounded-lg shadow-sm border border-slate-200 dark:border-slate-700",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Gi tr theo danh mc"}),s.jsx(Bu,{width:"100%",height:300,children:s.jsxs(LV,{children:[s.jsx(DA,{data:o,cx:"50%",cy:"50%",labelLine:!1,label:k=>`${k.name}: ${(k.percent*100).toFixed(0)}%`,outerRadius:100,fill:"#8884d8",dataKey:"value",children:o.map((k,y)=>s.jsx(Cp,{fill:g[y%g.length]},`cell-${y}`))}),s.jsx(zu,{formatter:k=>Te(k),contentStyle:{backgroundColor:"rgba(15, 23, 42, 0.95)",border:"none",borderRadius:"8px",color:"#fff"}})]})})]}),s.jsxs("div",{className:"bg-white dark:bg-[#1e293b] p-6 rounded-lg shadow-sm border border-slate-200 dark:border-slate-700",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Nhp/Xut kho (14 ngy gn nht)"}),s.jsx(Bu,{width:"100%",height:300,children:s.jsxs(VA,{data:b,children:[s.jsx(V0,{strokeDasharray:"3 3",stroke:"#334155"}),s.jsx(G0,{dataKey:"date",stroke:"#94a3b8"}),s.jsx(qu,{stroke:"#94a3b8"}),s.jsx(zu,{contentStyle:{backgroundColor:"rgba(15, 23, 42, 0.95)",border:"none",borderRadius:"8px",color:"#fff"}}),s.jsx(Vm,{}),s.jsx(xf,{type:"monotone",dataKey:"Nhp kho",stroke:"#10b981",strokeWidth:2}),s.jsx(xf,{type:"monotone",dataKey:"Xut kho",stroke:"#ef4444",strokeWidth:2})]})})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-white dark:bg-[#1e293b] p-6 rounded-lg shadow-sm border border-slate-200 dark:border-slate-700",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Top 10 sn phm gi tr cao"}),s.jsx("div",{className:"space-y-3",children:c.map((k,y)=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 dark:bg-slate-800 rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center text-sm font-bold text-blue-600 dark:text-blue-400",children:y+1}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-slate-900 dark:text-slate-100",children:k.name}),s.jsxs("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:["Tn: ",k.stock[e]||0]})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"font-semibold text-slate-900 dark:text-slate-100",children:Te(k.totalValue)}),s.jsxs("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:[Te(k.retailPrice[e]||0),"/sp"]})]})]},k.id))})]}),s.jsxs("div",{className:"bg-white dark:bg-[#1e293b] p-6 rounded-lg shadow-sm border border-slate-200 dark:border-slate-700",children:[s.jsxs("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-4 flex items-center gap-2",children:[s.jsx("span",{className:"inline-flex",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5 text-amber-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v4m0 4h.01M10.29 3.86 1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0Z"})})}),"Cnh bo tn kho thp"]}),s.jsxs("div",{className:"space-y-3",children:[l.map(k=>{const y=k.stock[e]||0,N=y<=3?"critical":y<=5?"warning":"low";return s.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg ${N==="critical"?"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800":N==="warning"?"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800":"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800"}`,children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-slate-900 dark:text-slate-100",children:k.name}),s.jsxs("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:["SKU: ",k.sku]})]}),s.jsx("div",{className:"flex items-center gap-2",children:s.jsxs("div",{className:`px-3 py-1 rounded-full text-sm font-semibold ${N==="critical"?"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400":N==="warning"?"bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-400":"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400"}`,children:[y," cn li"]})})]},k.id)}),l.length===0&&s.jsxs("div",{className:"text-center py-8 text-slate-600 dark:text-slate-400 flex items-center justify-center gap-2",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5 text-green-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})}),"Tt c sn phm u cn  hng"]})]})]})]})]})},T8e=()=>{const{currentBranchId:e}=Ua(),{data:t=[],isLoading:r}=Jb(),{data:n=[],isLoading:a}=lh(),[i,o]=T.useState("30days"),l=r||a,d=T.useMemo(()=>{if(i==="all")return t;const k=i==="7days"?7:i==="30days"?30:90,y=new Date;return y.setDate(y.getDate()-k),t.filter(N=>new Date(N.date)>=y)},[t,i]),c=T.useMemo(()=>{const k=d.reduce((O,A)=>O+A.total,0),y=d.length,N=d.reduce((O,A)=>O+A.items.reduce((P,q)=>P+q.quantity,0),0),S=y>0?k/y:0;return{totalRevenue:k,totalOrders:y,totalItems:N,avgOrderValue:S}},[d]),u=T.useMemo(()=>{const k=new Map;return d.forEach(y=>{const N=y.date.slice(0,10);k.set(N,(k.get(N)||0)+y.total)}),Array.from(k.entries()).map(([y,N])=>({date:new Date(y).toLocaleDateString("vi-VN",{day:"2-digit",month:"2-digit"}),revenue:Math.round(N)})).sort((y,N)=>y.date.localeCompare(N.date)).slice(-30)},[d]),x=T.useMemo(()=>{const k=new Map;return d.forEach(y=>{y.items.forEach(N=>{const S=k.get(N.partId),O=n.find(P=>P.id===N.partId),A=(O==null?void 0:O.name)||"Sn phm khng xc nh";S?(S.quantity+=N.quantity,S.revenue+=N.sellingPrice*N.quantity):k.set(N.partId,{quantity:N.quantity,revenue:N.sellingPrice*N.quantity,partName:A})})}),Array.from(k.entries()).map(([y,N])=>({id:y,name:N.partName,quantity:N.quantity,revenue:Math.round(N.revenue)})).sort((y,N)=>N.revenue-y.revenue).slice(0,10)},[d,n]),b=T.useMemo(()=>{const k=new Map;return d.forEach(y=>{k.set(y.paymentMethod,(k.get(y.paymentMethod)||0)+y.total)}),Array.from(k.entries()).map(([y,N])=>({method:y,revenue:Math.round(N)})).sort((y,N)=>N.revenue-y.revenue)},[d]),g=T.useMemo(()=>{const k=new Map;return d.forEach(y=>{const N=new Date(y.date).getHours();k.set(N,(k.get(N)||0)+1)}),Array.from({length:24},(y,N)=>({hour:`${N}h`,orders:k.get(N)||0}))},[d]);return l?s.jsx("div",{className:"flex items-center justify-center h-96",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"flex gap-2",children:[{value:"7days",label:"7 ngy"},{value:"30days",label:"30 ngy"},{value:"90days",label:"90 ngy"},{value:"all",label:"Tt c"}].map(k=>s.jsx("button",{onClick:()=>o(k.value),className:`px-4 py-2 rounded-lg font-medium transition-colors ${i===k.value?"bg-blue-600 text-white":"bg-slate-100 dark:bg-slate-800 text-slate-700 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:k.label},k.value))}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 p-6 rounded-lg border border-blue-200 dark:border-blue-700",children:[s.jsx("div",{className:"text-sm font-medium text-blue-600 dark:text-blue-400 mb-2",children:"Doanh thu"}),s.jsx("div",{className:"text-3xl font-bold text-blue-900 dark:text-blue-100",children:Te(c.totalRevenue)})]}),s.jsxs("div",{className:"bg-gradient-to-br from-emerald-50 to-emerald-100 dark:from-emerald-900/20 dark:to-emerald-800/20 p-6 rounded-lg border border-emerald-200 dark:border-emerald-700",children:[s.jsx("div",{className:"text-sm font-medium text-emerald-600 dark:text-emerald-400 mb-2",children:"n hng"}),s.jsx("div",{className:"text-3xl font-bold text-emerald-900 dark:text-emerald-100",children:c.totalOrders})]}),s.jsxs("div",{className:"bg-gradient-to-br from-amber-50 to-amber-100 dark:from-amber-900/20 dark:to-amber-800/20 p-6 rounded-lg border border-amber-200 dark:border-amber-700",children:[s.jsx("div",{className:"text-sm font-medium text-amber-600 dark:text-amber-400 mb-2",children:"Sn phm bn"}),s.jsx("div",{className:"text-3xl font-bold text-amber-900 dark:text-amber-100",children:c.totalItems})]}),s.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20 p-6 rounded-lg border border-purple-200 dark:border-purple-700",children:[s.jsx("div",{className:"text-sm font-medium text-purple-600 dark:text-purple-400 mb-2",children:"Gi tr TB/n"}),s.jsx("div",{className:"text-3xl font-bold text-purple-900 dark:text-purple-100",children:Te(c.avgOrderValue)})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-white dark:bg-[#1e293b] p-6 rounded-lg shadow-sm border border-slate-200 dark:border-slate-700",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Xu hng doanh thu"}),s.jsx(Bu,{width:"100%",height:300,children:s.jsxs(i2e,{data:u,children:[s.jsx("defs",{children:s.jsxs("linearGradient",{id:"colorRevenue",x1:"0",y1:"0",x2:"0",y2:"1",children:[s.jsx("stop",{offset:"5%",stopColor:"#3b82f6",stopOpacity:.8}),s.jsx("stop",{offset:"95%",stopColor:"#3b82f6",stopOpacity:0})]})}),s.jsx(V0,{strokeDasharray:"3 3",stroke:"#334155"}),s.jsx(G0,{dataKey:"date",stroke:"#94a3b8"}),s.jsx(qu,{stroke:"#94a3b8"}),s.jsx(zu,{formatter:k=>Te(k),contentStyle:{backgroundColor:"rgba(15, 23, 42, 0.95)",border:"none",borderRadius:"8px",color:"#fff"}}),s.jsx(wV,{type:"monotone",dataKey:"revenue",stroke:"#3b82f6",fillOpacity:1,fill:"url(#colorRevenue)"})]})})]}),s.jsxs("div",{className:"bg-white dark:bg-[#1e293b] p-6 rounded-lg shadow-sm border border-slate-200 dark:border-slate-700",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Phng thc thanh ton"}),s.jsx(Bu,{width:"100%",height:300,children:s.jsxs(Mj,{data:b,children:[s.jsx(V0,{strokeDasharray:"3 3",stroke:"#334155"}),s.jsx(G0,{dataKey:"method",stroke:"#94a3b8"}),s.jsx(qu,{stroke:"#94a3b8"}),s.jsx(zu,{formatter:k=>Te(k),contentStyle:{backgroundColor:"rgba(15, 23, 42, 0.95)",border:"none",borderRadius:"8px",color:"#fff"}}),s.jsx(Cm,{dataKey:"revenue",fill:"#10b981",radius:[8,8,0,0]})]})})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-white dark:bg-[#1e293b] p-6 rounded-lg shadow-sm border border-slate-200 dark:border-slate-700",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Phn b theo gi"}),s.jsx(Bu,{width:"100%",height:300,children:s.jsxs(VA,{data:g,children:[s.jsx(V0,{strokeDasharray:"3 3",stroke:"#334155"}),s.jsx(G0,{dataKey:"hour",stroke:"#94a3b8"}),s.jsx(qu,{stroke:"#94a3b8"}),s.jsx(zu,{contentStyle:{backgroundColor:"rgba(15, 23, 42, 0.95)",border:"none",borderRadius:"8px",color:"#fff"}}),s.jsx(xf,{type:"monotone",dataKey:"orders",stroke:"#f59e0b",strokeWidth:2})]})})]}),s.jsxs("div",{className:"bg-white dark:bg-[#1e293b] p-6 rounded-lg shadow-sm border border-slate-200 dark:border-slate-700",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Top 10 sn phm bn chy"}),s.jsxs("div",{className:"space-y-3",children:[x.map((k,y)=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 dark:bg-slate-800 rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-8 h-8 rounded-full bg-emerald-100 dark:bg-emerald-900/30 flex items-center justify-center text-sm font-bold text-emerald-600 dark:text-emerald-400",children:y+1}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-slate-900 dark:text-slate-100",children:k.name}),s.jsxs("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:[" bn: ",k.quantity]})]})]}),s.jsx("div",{className:"text-right",children:s.jsx("div",{className:"font-semibold text-slate-900 dark:text-slate-100",children:Te(k.revenue)})})]},k.id)),x.length===0&&s.jsx("div",{className:"text-center py-8 text-slate-600 dark:text-slate-400",children:"Cha c d liu bn hng"})]})]})]})]})},O8e=()=>{const{currentBranchId:e}=Ua(),{data:t=[],isLoading:r}=Jb(),{data:n=[],isLoading:a}=lh(),{data:i=[],isLoading:o}=RE(),{data:l=[],isLoading:d}=WA(),{data:c=[],isLoading:u}=L5(),x=r||a||o||d||u,[b,g]=T.useState("30days"),k=()=>{if(b==="all")return new Date(0);const U=b==="7days"?7:b==="30days"?30:90,L=new Date;return L.setDate(L.getDate()-U),L},y=T.useMemo(()=>{const U=k();return t.filter(L=>new Date(L.date)>=U).reduce((L,Q)=>L+Q.total,0)},[t,b]),N=T.useMemo(()=>{const U=k();return i.filter(L=>L.type==="Nhp kho"&&new Date(L.date)>=U).reduce((L,Q)=>{var Z;const H=n.find(te=>te.id===Q.partId),G=((Z=H==null?void 0:H.wholesalePrice)==null?void 0:Z[e])||0;return L+G*Q.quantity},0)},[i,n,e,b]),S=y-N,O=y>0?S/y*100:0,A=T.useMemo(()=>{const U=k(),L=new Map;return t.filter(Q=>new Date(Q.date)>=U).forEach(Q=>{const H=Q.date.slice(0,10),G=L.get(H)||{income:0,expense:0};G.income+=Q.total,L.set(H,G)}),i.filter(Q=>Q.type==="Nhp kho"&&new Date(Q.date)>=U).forEach(Q=>{var se;const H=Q.date.slice(0,10),G=n.find(ue=>ue.id===Q.partId),Z=((se=G==null?void 0:G.wholesalePrice)==null?void 0:se[e])||0,te=L.get(H)||{income:0,expense:0};te.expense+=Z*Q.quantity,L.set(H,te)}),Array.from(L.entries()).map(([Q,H])=>({date:new Date(Q).toLocaleDateString("vi-VN",{day:"2-digit",month:"2-digit"}),income:Math.round(H.income),expense:Math.round(H.expense),profit:Math.round(H.income-H.expense)})).sort((Q,H)=>Q.date.localeCompare(H.date)).slice(-30)},[t,i,n,e,b]),P=T.useMemo(()=>{const U=l.reduce((Q,H)=>Q+H.remainingAmount,0),L=l.filter(Q=>Q.remainingAmount>0).length;return{totalDebt:U,overdueCount:L,count:l.length}},[l]),q=T.useMemo(()=>{const U=c.reduce((Q,H)=>Q+H.remainingAmount,0),L=c.filter(Q=>Q.remainingAmount>0).length;return{totalDebt:U,overdueCount:L,count:c.length}},[c]),W=T.useMemo(()=>[...l].filter(U=>U.remainingAmount>0).sort((U,L)=>L.remainingAmount-U.remainingAmount).slice(0,5),[l]),R=T.useMemo(()=>n.reduce((U,L)=>{const Q=L.stock[e]||0,H=L.retailPrice[e]||0;return U+Q*H},0),[n,e]);return x?s.jsx("div",{className:"flex items-center justify-center h-96",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"flex gap-2",children:[{value:"7days",label:"7 ngy"},{value:"30days",label:"30 ngy"},{value:"90days",label:"90 ngy"},{value:"all",label:"Tt c"}].map(U=>s.jsx("button",{onClick:()=>g(U.value),className:`px-4 py-2 rounded-lg font-medium transition-colors ${b===U.value?"bg-blue-600 text-white":"bg-slate-100 dark:bg-slate-800 text-slate-700 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:U.label},U.value))}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"bg-gradient-to-br from-emerald-50 to-emerald-100 dark:from-emerald-900/20 dark:to-emerald-800/20 p-6 rounded-lg border border-emerald-200 dark:border-emerald-700",children:[s.jsx("div",{className:"text-sm font-medium text-emerald-600 dark:text-emerald-400 mb-2",children:"Thu nhp"}),s.jsx("div",{className:"text-3xl font-bold text-emerald-900 dark:text-emerald-100",children:Te(y)})]}),s.jsxs("div",{className:"bg-gradient-to-br from-red-50 to-red-100 dark:from-red-900/20 dark:to-red-800/20 p-6 rounded-lg border border-red-200 dark:border-red-700",children:[s.jsx("div",{className:"text-sm font-medium text-red-600 dark:text-red-400 mb-2",children:"Chi ph"}),s.jsx("div",{className:"text-3xl font-bold text-red-900 dark:text-red-100",children:Te(N)})]}),s.jsxs("div",{className:`bg-gradient-to-br p-6 rounded-lg border ${S>=0?"from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 border-blue-200 dark:border-blue-700":"from-red-50 to-red-100 dark:from-red-900/20 dark:to-red-800/20 border-red-200 dark:border-red-700"}`,children:[s.jsx("div",{className:`text-sm font-medium mb-2 ${S>=0?"text-blue-600 dark:text-blue-400":"text-red-600 dark:text-red-400"}`,children:"Li nhun"}),s.jsx("div",{className:`text-3xl font-bold ${S>=0?"text-blue-900 dark:text-blue-100":"text-red-900 dark:text-red-100"}`,children:Te(S)}),s.jsxs("div",{className:`text-xs mt-1 ${S>=0?"text-blue-600 dark:text-blue-400":"text-red-600 dark:text-red-400"}`,children:["Bin li nhun: ",O.toFixed(1),"%"]})]}),s.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20 p-6 rounded-lg border border-purple-200 dark:border-purple-700",children:[s.jsx("div",{className:"text-sm font-medium text-purple-600 dark:text-purple-400 mb-2",children:"Gi tr tn kho"}),s.jsx("div",{className:"text-3xl font-bold text-purple-900 dark:text-purple-100",children:Te(R)})]})]}),s.jsxs("div",{className:"bg-white dark:bg-[#1e293b] p-6 rounded-lg shadow-sm border border-slate-200 dark:border-slate-700",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Thu - Chi - Li nhun"}),s.jsx(Bu,{width:"100%",height:350,children:s.jsxs(l2e,{data:A,children:[s.jsx(V0,{strokeDasharray:"3 3",stroke:"#334155"}),s.jsx(G0,{dataKey:"date",stroke:"#94a3b8"}),s.jsx(qu,{stroke:"#94a3b8"}),s.jsx(zu,{formatter:U=>Te(U),contentStyle:{backgroundColor:"rgba(15, 23, 42, 0.95)",border:"none",borderRadius:"8px",color:"#fff"}}),s.jsx(Vm,{}),s.jsx(Cm,{dataKey:"income",fill:"#10b981",name:"Thu nhp"}),s.jsx(Cm,{dataKey:"expense",fill:"#ef4444",name:"Chi ph"}),s.jsx(xf,{type:"monotone",dataKey:"profit",stroke:"#3b82f6",strokeWidth:3,name:"Li nhun"})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-white dark:bg-[#1e293b] p-6 rounded-lg shadow-sm border border-slate-200 dark:border-slate-700",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Cng n khch hng"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 bg-amber-50 dark:bg-amber-900/20 rounded-lg border border-amber-200 dark:border-amber-700",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-amber-600 dark:text-amber-400",children:"Tng cng n"}),s.jsx("div",{className:"text-2xl font-bold text-amber-900 dark:text-amber-100",children:Te(P.totalDebt)})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-sm text-amber-600 dark:text-amber-400",children:"Qu hn"}),s.jsx("div",{className:"text-2xl font-bold text-amber-900 dark:text-amber-100",children:P.overdueCount})]})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Top 5 khch n nhiu nht"}),s.jsxs("div",{className:"space-y-2",children:[W.map(U=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 dark:bg-slate-800 rounded-lg",children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-slate-900 dark:text-slate-100",children:U.customerName}),s.jsxs("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:["Ngy to:"," ",new Date(U.createdDate).toLocaleDateString("vi-VN")]})]}),s.jsx("div",{className:"text-right",children:s.jsx("div",{className:"font-semibold text-amber-600 dark:text-amber-400",children:Te(U.remainingAmount)})})]},U.id)),W.length===0&&s.jsxs("div",{className:"text-center py-4 text-slate-600 dark:text-slate-400 inline-flex items-center justify-center gap-2",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-4 h-4 text-green-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})}),"Khng c cng n"]})]})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-[#1e293b] p-6 rounded-lg shadow-sm border border-slate-200 dark:border-slate-700",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Cng n nh cung cp"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 bg-red-50 dark:bg-red-900/20 rounded-lg border border-red-200 dark:border-red-700",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-red-600 dark:text-red-400",children:"Tng cng n"}),s.jsx("div",{className:"text-2xl font-bold text-red-900 dark:text-red-100",children:Te(q.totalDebt)})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-sm text-red-600 dark:text-red-400",children:"Qu hn"}),s.jsx("div",{className:"text-2xl font-bold text-red-900 dark:text-red-100",children:q.overdueCount})]})]}),s.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-700",children:[s.jsxs("div",{className:"text-sm text-blue-600 dark:text-blue-400 mb-2 inline-flex items-center gap-2",children:[s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-4 h-4",viewBox:"0 0 24 24",fill:"currentColor",children:[s.jsx("path",{d:"M11 2a1 1 0 011 1v1.07A7.002 7.002 0 0119 11a6.97 6.97 0 01-2.05 4.95A3.5 3.5 0 0014 19.5V20a1 1 0 11-2 0v-.5a3.5 3.5 0 00-2.95-3.45A6.97 6.97 0 017 11a7.002 7.002 0 016-6.93V3a1 1 0 011-1z"}),s.jsx("path",{d:"M13 22a1 1 0 11-2 0 1 1 0 012 0z"})]}),"Mo qun l ti chnh"]}),s.jsxs("ul",{className:"text-xs text-blue-700 dark:text-blue-300 space-y-1",children:[s.jsx("li",{children:" Theo di bin li nhun hng thng"}),s.jsx("li",{children:" Gi tn kho  mc hp l"}),s.jsx("li",{children:" Thu hi cng n ng hn"}),s.jsx("li",{children:" m phn iu khon vi nh cung cp"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-800 rounded-lg text-center",children:[s.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:"Khch hng n"}),s.jsx("div",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:P.count})]}),s.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-800 rounded-lg text-center",children:[s.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:"NCC cn tr"}),s.jsx("div",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:q.count})]})]})]})]})]})]})};function Za(e){"@babel/helpers - typeof";return Za=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Za(e)}var cu=Uint8Array,Lc=Uint16Array,BE=Int32Array,UE=new cu([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),zE=new cu([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),hR=new cu([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),gK=function(e,t){for(var r=new Lc(31),n=0;n<31;++n)r[n]=t+=1<<e[n-1];for(var a=new BE(r[30]),n=1;n<30;++n)for(var i=r[n];i<r[n+1];++i)a[i]=i-r[n]<<5|n;return{b:r,r:a}},bK=gK(UE,2),P8e=bK.b,Jj=bK.r;P8e[28]=258,Jj[258]=28;var I8e=gK(zE,0),fR=I8e.r,e6=new Lc(32768);for(var Ps=0;Ps<32768;++Ps){var Wh=(Ps&43690)>>1|(Ps&21845)<<1;Wh=(Wh&52428)>>2|(Wh&13107)<<2,Wh=(Wh&61680)>>4|(Wh&3855)<<4,e6[Ps]=((Wh&65280)>>8|(Wh&255)<<8)>>1}var tb=(function(e,t,r){for(var n=e.length,a=0,i=new Lc(t);a<n;++a)e[a]&&++i[e[a]-1];var o=new Lc(t);for(a=1;a<t;++a)o[a]=o[a-1]+i[a-1]<<1;var l;if(r){l=new Lc(1<<t);var d=15-t;for(a=0;a<n;++a)if(e[a])for(var c=a<<4|e[a],u=t-e[a],x=o[e[a]-1]++<<u,b=x|(1<<u)-1;x<=b;++x)l[e6[x]>>d]=c}else for(l=new Lc(n),a=0;a<n;++a)e[a]&&(l[a]=e6[o[e[a]-1]++]>>15-e[a]);return l}),nx=new cu(288);for(var Ps=0;Ps<144;++Ps)nx[Ps]=8;for(var Ps=144;Ps<256;++Ps)nx[Ps]=9;for(var Ps=256;Ps<280;++Ps)nx[Ps]=7;for(var Ps=280;Ps<288;++Ps)nx[Ps]=8;var Tk=new cu(32);for(var Ps=0;Ps<32;++Ps)Tk[Ps]=5;var D8e=tb(nx,9,0),M8e=tb(Tk,5,0),vK=function(e){return(e+7)/8|0},L8e=function(e,t,r){return(r==null||r>e.length)&&(r=e.length),new cu(e.subarray(t,r))},k0=function(e,t,r){r<<=t&7;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8},Pg=function(e,t,r){r<<=t&7;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8,e[n+2]|=r>>16},C_=function(e,t){for(var r=[],n=0;n<e.length;++n)e[n]&&r.push({s:n,f:e[n]});var a=r.length,i=r.slice();if(!a)return{t:wK,l:0};if(a==1){var o=new cu(r[0].s+1);return o[r[0].s]=1,{t:o,l:1}}r.sort(function(q,W){return q.f-W.f}),r.push({s:-1,f:25001});var l=r[0],d=r[1],c=0,u=1,x=2;for(r[0]={s:-1,f:l.f+d.f,l,r:d};u!=a-1;)l=r[r[c].f<r[x].f?c++:x++],d=r[c!=u&&r[c].f<r[x].f?c++:x++],r[u++]={s:-1,f:l.f+d.f,l,r:d};for(var b=i[0].s,n=1;n<a;++n)i[n].s>b&&(b=i[n].s);var g=new Lc(b+1),k=t6(r[u-1],g,0);if(k>t){var n=0,y=0,N=k-t,S=1<<N;for(i.sort(function(W,R){return g[R.s]-g[W.s]||W.f-R.f});n<a;++n){var O=i[n].s;if(g[O]>t)y+=S-(1<<k-g[O]),g[O]=t;else break}for(y>>=N;y>0;){var A=i[n].s;g[A]<t?y-=1<<t-g[A]++-1:++n}for(;n>=0&&y;--n){var P=i[n].s;g[P]==t&&(--g[P],++y)}k=t}return{t:new cu(g),l:k}},t6=function(e,t,r){return e.s==-1?Math.max(t6(e.l,t,r+1),t6(e.r,t,r+1)):t[e.s]=r},mR=function(e){for(var t=e.length;t&&!e[--t];);for(var r=new Lc(++t),n=0,a=e[0],i=1,o=function(d){r[n++]=d},l=1;l<=t;++l)if(e[l]==a&&l!=t)++i;else{if(!a&&i>2){for(;i>138;i-=138)o(32754);i>2&&(o(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(o(a),--i;i>6;i-=6)o(8304);i>2&&(o(i-3<<5|8208),i=0)}for(;i--;)o(a);i=1,a=e[l]}return{c:r.subarray(0,n),n:t}},Ig=function(e,t){for(var r=0,n=0;n<t.length;++n)r+=e[n]*t[n];return r},yK=function(e,t,r){var n=r.length,a=vK(t+2);e[a]=n&255,e[a+1]=n>>8,e[a+2]=e[a]^255,e[a+3]=e[a+1]^255;for(var i=0;i<n;++i)e[a+i+4]=r[i];return(a+4+n)*8},xR=function(e,t,r,n,a,i,o,l,d,c,u){k0(t,u++,r),++a[256];for(var x=C_(a,15),b=x.t,g=x.l,k=C_(i,15),y=k.t,N=k.l,S=mR(b),O=S.c,A=S.n,P=mR(y),q=P.c,W=P.n,R=new Lc(19),U=0;U<O.length;++U)++R[O[U]&31];for(var U=0;U<q.length;++U)++R[q[U]&31];for(var L=C_(R,7),Q=L.t,H=L.l,G=19;G>4&&!Q[hR[G-1]];--G);var Z=c+5<<3,te=Ig(a,nx)+Ig(i,Tk)+o,se=Ig(a,b)+Ig(i,y)+o+14+3*G+Ig(R,Q)+2*R[16]+3*R[17]+7*R[18];if(d>=0&&Z<=te&&Z<=se)return yK(t,u,e.subarray(d,d+c));var ue,ae,pe,ve;if(k0(t,u,1+(se<te)),u+=2,se<te){ue=tb(b,g,0),ae=b,pe=tb(y,N,0),ve=y;var Pe=tb(Q,H,0);k0(t,u,A-257),k0(t,u+5,W-1),k0(t,u+10,G-4),u+=14;for(var U=0;U<G;++U)k0(t,u+3*U,Q[hR[U]]);u+=3*G;for(var xe=[O,q],B=0;B<2;++B)for(var re=xe[B],U=0;U<re.length;++U){var J=re[U]&31;k0(t,u,Pe[J]),u+=Q[J],J>15&&(k0(t,u,re[U]>>5&127),u+=re[U]>>12)}}else ue=D8e,ae=nx,pe=M8e,ve=Tk;for(var U=0;U<l;++U){var ie=n[U];if(ie>255){var J=ie>>18&31;Pg(t,u,ue[J+257]),u+=ae[J+257],J>7&&(k0(t,u,ie>>23&31),u+=UE[J]);var Y=ie&31;Pg(t,u,pe[Y]),u+=ve[Y],Y>3&&(Pg(t,u,ie>>5&8191),u+=zE[Y])}else Pg(t,u,ue[ie]),u+=ae[ie]}return Pg(t,u,ue[256]),u+ae[256]},R8e=new BE([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),wK=new cu(0),F8e=function(e,t,r,n,a,i){var o=i.z||e.length,l=new cu(n+o+5*(1+Math.ceil(o/7e3))+a),d=l.subarray(n,l.length-a),c=i.l,u=(i.r||0)&7;if(t){u&&(d[0]=i.r>>3);for(var x=R8e[t-1],b=x>>13,g=x&8191,k=(1<<r)-1,y=i.p||new Lc(32768),N=i.h||new Lc(k+1),S=Math.ceil(r/3),O=2*S,A=function(be){return(e[be]^e[be+1]<<S^e[be+2]<<O)&k},P=new BE(25e3),q=new Lc(288),W=new Lc(32),R=0,U=0,L=i.i||0,Q=0,H=i.w||0,G=0;L+2<o;++L){var Z=A(L),te=L&32767,se=N[Z];if(y[te]=se,N[Z]=te,H<=L){var ue=o-L;if((R>7e3||Q>24576)&&(ue>423||!c)){u=xR(e,d,0,P,q,W,U,Q,G,L-G,u),Q=R=U=0,G=L;for(var ae=0;ae<286;++ae)q[ae]=0;for(var ae=0;ae<30;++ae)W[ae]=0}var pe=2,ve=0,Pe=g,xe=te-se&32767;if(ue>2&&Z==A(L-xe))for(var B=Math.min(b,ue)-1,re=Math.min(32767,L),J=Math.min(258,ue);xe<=re&&--Pe&&te!=se;){if(e[L+pe]==e[L+pe-xe]){for(var ie=0;ie<J&&e[L+ie]==e[L+ie-xe];++ie);if(ie>pe){if(pe=ie,ve=xe,ie>B)break;for(var Y=Math.min(xe,ie-2),_e=0,ae=0;ae<Y;++ae){var me=L-xe+ae&32767,ne=y[me],je=me-ne&32767;je>_e&&(_e=je,se=me)}}}te=se,se=y[te],xe+=te-se&32767}if(ve){P[Q++]=268435456|Jj[pe]<<18|fR[ve];var De=Jj[pe]&31,ce=fR[ve]&31;U+=UE[De]+zE[ce],++q[257+De],++W[ce],H=L+pe,++R}else P[Q++]=e[L],++q[e[L]]}}for(L=Math.max(L,H);L<o;++L)P[Q++]=e[L],++q[e[L]];u=xR(e,d,c,P,q,W,U,Q,G,L-G,u),c||(i.r=u&7|d[u/8|0]<<3,u-=7,i.h=N,i.p=y,i.i=L,i.w=H)}else{for(var L=i.w||0;L<o+c;L+=65535){var Ee=L+65535;Ee>=o&&(d[u/8|0]=c,Ee=o),u=yK(d,u+1,e.subarray(L,Ee))}i.i=o}return L8e(l,0,n+vK(u)+a)},kK=function(){var e=1,t=0;return{p:function(r){for(var n=e,a=t,i=r.length|0,o=0;o!=i;){for(var l=Math.min(o+2655,i);o<l;++o)a+=n+=r[o];n=(n&65535)+15*(n>>16),a=(a&65535)+15*(a>>16)}e=n,t=a},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},B8e=function(e,t,r,n,a){if(!a&&(a={l:1},t.dictionary)){var i=t.dictionary.subarray(-32768),o=new cu(i.length+e.length);o.set(i),o.set(e,i.length),e=o,a.w=i.length}return F8e(e,t.level==null?6:t.level,t.mem==null?a.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,r,n,a)},NK=function(e,t,r){for(;r;++t)e[t]=r,r>>>=8},U8e=function(e,t){var r=t.level,n=r==0?0:r<6?1:r==9?3:2;if(e[0]=120,e[1]=n<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var a=kK();a.p(t.dictionary),NK(e,2,a.d())}};function r6(e,t){t||(t={});var r=kK();r.p(e);var n=B8e(e,t,t.dictionary?6:2,4);return U8e(n,t),NK(n,n.length-4,r.d()),n}var z8e=typeof TextDecoder<"u"&&new TextDecoder,q8e=0;try{z8e.decode(wK,{stream:!0}),q8e=1}catch{}function H8e(e){if(Array.isArray(e))return e}function $8e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],d=!0,c=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(d=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);d=!0);}catch(u){c=!0,a=u}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(c)throw a}}return l}}function pR(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function V8e(e,t){if(e){if(typeof e=="string")return pR(e,t);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?pR(e,t):void 0}}function W8e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gR(e,t){return H8e(e)||$8e(e,t)||V8e(e,t)||W8e()}function bR(e,t="utf8"){return new TextDecoder(t).decode(e)}const G8e=new TextEncoder;function K8e(e){return G8e.encode(e)}const X8e=1024*8,Y8e=(()=>{const e=new Uint8Array(4),t=new Uint32Array(e.buffer);return!((t[0]=1)&e[0])})(),A_={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class qE{constructor(t=X8e,r={}){Oa(this,"buffer");Oa(this,"byteLength");Oa(this,"byteOffset");Oa(this,"length");Oa(this,"offset");Oa(this,"lastWrittenByte");Oa(this,"littleEndian");Oa(this,"_data");Oa(this,"_mark");Oa(this,"_marks");let n=!1;typeof t=="number"?t=new ArrayBuffer(t):(n=!0,this.lastWrittenByte=t.byteLength);const a=r.offset?r.offset>>>0:0,i=t.byteLength-a;let o=a;(ArrayBuffer.isView(t)||t instanceof qE)&&(t.byteLength!==t.buffer.byteLength&&(o=t.byteOffset+a),t=t.buffer),n?this.lastWrittenByte=i:this.lastWrittenByte=0,this.buffer=t,this.length=i,this.byteLength=i,this.byteOffset=o,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,o,i),this._mark=0,this._marks=[]}available(t=1){return this.offset+t<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(t=1){return this.offset+=t,this}back(t=1){return this.offset-=t,this}seek(t){return this.offset=t,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const t=this._marks.pop();if(t===void 0)throw new Error("Mark stack empty");return this.seek(t),this}rewind(){return this.offset=0,this}ensureAvailable(t=1){if(!this.available(t)){const n=(this.offset+t)*2,a=new Uint8Array(n);a.set(new Uint8Array(this.buffer)),this.buffer=a.buffer,this.length=n,this.byteLength=n,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(t=1){return this.readArray(t,"uint8")}readArray(t,r){const n=A_[r].BYTES_PER_ELEMENT*t,a=this.byteOffset+this.offset,i=this.buffer.slice(a,a+n);if(this.littleEndian===Y8e&&r!=="uint8"&&r!=="int8"){const l=new Uint8Array(this.buffer.slice(a,a+n));l.reverse();const d=new A_[r](l.buffer);return this.offset+=n,d.reverse(),d}const o=new A_[r](i);return this.offset+=n,o}readInt16(){const t=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,t}readUint16(){const t=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,t}readInt32(){const t=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,t}readUint32(){const t=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat32(){const t=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat64(){const t=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,t}readBigInt64(){const t=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,t}readBigUint64(){const t=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,t}readChar(){return String.fromCharCode(this.readInt8())}readChars(t=1){let r="";for(let n=0;n<t;n++)r+=this.readChar();return r}readUtf8(t=1){return bR(this.readBytes(t))}decodeText(t=1,r="utf8"){return bR(this.readBytes(t),r)}writeBoolean(t){return this.writeUint8(t?255:0),this}writeInt8(t){return this.ensureAvailable(1),this._data.setInt8(this.offset++,t),this._updateLastWrittenByte(),this}writeUint8(t){return this.ensureAvailable(1),this._data.setUint8(this.offset++,t),this._updateLastWrittenByte(),this}writeByte(t){return this.writeUint8(t)}writeBytes(t){this.ensureAvailable(t.length);for(let r=0;r<t.length;r++)this._data.setUint8(this.offset++,t[r]);return this._updateLastWrittenByte(),this}writeInt16(t){return this.ensureAvailable(2),this._data.setInt16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(t){return this.ensureAvailable(2),this._data.setUint16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(t){return this.ensureAvailable(4),this._data.setInt32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(t){return this.ensureAvailable(4),this._data.setUint32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(t){return this.ensureAvailable(4),this._data.setFloat32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(t){return this.ensureAvailable(8),this._data.setFloat64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(t){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(t){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(t){return this.writeUint8(t.charCodeAt(0))}writeChars(t){for(let r=0;r<t.length;r++)this.writeUint8(t.charCodeAt(r));return this}writeUtf8(t){return this.writeBytes(K8e(t))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function Ip(e){let t=e.length;for(;--t>=0;)e[t]=0}const Q8e=3,Z8e=258,_K=29,J8e=256,eTe=J8e+1+_K,SK=30,tTe=512,rTe=new Array((eTe+2)*2);Ip(rTe);const nTe=new Array(SK*2);Ip(nTe);const aTe=new Array(tTe);Ip(aTe);const sTe=new Array(Z8e-Q8e+1);Ip(sTe);const iTe=new Array(_K);Ip(iTe);const oTe=new Array(SK);Ip(oTe);const lTe=(e,t,r,n)=>{let a=e&65535|0,i=e>>>16&65535|0,o=0;for(;r!==0;){o=r>2e3?2e3:r,r-=o;do a=a+t[n++]|0,i=i+a|0;while(--o);a%=65521,i%=65521}return a|i<<16|0};var n6=lTe;const cTe=()=>{let e,t=[];for(var r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=e&1?3988292384^e>>>1:e>>>1;t[r]=e}return t},dTe=new Uint32Array(cTe()),uTe=(e,t,r,n)=>{const a=dTe,i=n+r;e^=-1;for(let o=n;o<i;o++)e=e>>>8^a[(e^t[o])&255];return e^-1};var Eu=uTe,a6={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},jK={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const hTe=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var fTe=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const r=t.shift();if(r){if(typeof r!="object")throw new TypeError(r+"must be non-object");for(const n in r)hTe(r,n)&&(e[n]=r[n])}}return e},mTe=e=>{let t=0;for(let n=0,a=e.length;n<a;n++)t+=e[n].length;const r=new Uint8Array(t);for(let n=0,a=0,i=e.length;n<i;n++){let o=e[n];r.set(o,a),a+=o.length}return r},CK={assign:fTe,flattenChunks:mTe};let AK=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{AK=!1}const zb=new Uint8Array(256);for(let e=0;e<256;e++)zb[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;zb[254]=zb[254]=1;var xTe=e=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let t,r,n,a,i,o=e.length,l=0;for(a=0;a<o;a++)r=e.charCodeAt(a),(r&64512)===55296&&a+1<o&&(n=e.charCodeAt(a+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),a++)),l+=r<128?1:r<2048?2:r<65536?3:4;for(t=new Uint8Array(l),i=0,a=0;i<l;a++)r=e.charCodeAt(a),(r&64512)===55296&&a+1<o&&(n=e.charCodeAt(a+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),a++)),r<128?t[i++]=r:r<2048?(t[i++]=192|r>>>6,t[i++]=128|r&63):r<65536?(t[i++]=224|r>>>12,t[i++]=128|r>>>6&63,t[i++]=128|r&63):(t[i++]=240|r>>>18,t[i++]=128|r>>>12&63,t[i++]=128|r>>>6&63,t[i++]=128|r&63);return t};const pTe=(e,t)=>{if(t<65534&&e.subarray&&AK)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let r="";for(let n=0;n<t;n++)r+=String.fromCharCode(e[n]);return r};var gTe=(e,t)=>{const r=t||e.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,t));let n,a;const i=new Array(r*2);for(a=0,n=0;n<r;){let o=e[n++];if(o<128){i[a++]=o;continue}let l=zb[o];if(l>4){i[a++]=65533,n+=l-1;continue}for(o&=l===2?31:l===3?15:7;l>1&&n<r;)o=o<<6|e[n++]&63,l--;if(l>1){i[a++]=65533;continue}o<65536?i[a++]=o:(o-=65536,i[a++]=55296|o>>10&1023,i[a++]=56320|o&1023)}return pTe(i,a)},bTe=(e,t)=>{t=t||e.length,t>e.length&&(t=e.length);let r=t-1;for(;r>=0&&(e[r]&192)===128;)r--;return r<0||r===0?t:r+zb[e[r]]>t?r:t},s6={string2buf:xTe,buf2string:gTe,utf8border:bTe};function vTe(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var yTe=vTe;const Wy=16209,wTe=16191;var kTe=function(t,r){let n,a,i,o,l,d,c,u,x,b,g,k,y,N,S,O,A,P,q,W,R,U,L,Q;const H=t.state;n=t.next_in,L=t.input,a=n+(t.avail_in-5),i=t.next_out,Q=t.output,o=i-(r-t.avail_out),l=i+(t.avail_out-257),d=H.dmax,c=H.wsize,u=H.whave,x=H.wnext,b=H.window,g=H.hold,k=H.bits,y=H.lencode,N=H.distcode,S=(1<<H.lenbits)-1,O=(1<<H.distbits)-1;e:do{k<15&&(g+=L[n++]<<k,k+=8,g+=L[n++]<<k,k+=8),A=y[g&S];t:for(;;){if(P=A>>>24,g>>>=P,k-=P,P=A>>>16&255,P===0)Q[i++]=A&65535;else if(P&16){q=A&65535,P&=15,P&&(k<P&&(g+=L[n++]<<k,k+=8),q+=g&(1<<P)-1,g>>>=P,k-=P),k<15&&(g+=L[n++]<<k,k+=8,g+=L[n++]<<k,k+=8),A=N[g&O];r:for(;;){if(P=A>>>24,g>>>=P,k-=P,P=A>>>16&255,P&16){if(W=A&65535,P&=15,k<P&&(g+=L[n++]<<k,k+=8,k<P&&(g+=L[n++]<<k,k+=8)),W+=g&(1<<P)-1,W>d){t.msg="invalid distance too far back",H.mode=Wy;break e}if(g>>>=P,k-=P,P=i-o,W>P){if(P=W-P,P>u&&H.sane){t.msg="invalid distance too far back",H.mode=Wy;break e}if(R=0,U=b,x===0){if(R+=c-P,P<q){q-=P;do Q[i++]=b[R++];while(--P);R=i-W,U=Q}}else if(x<P){if(R+=c+x-P,P-=x,P<q){q-=P;do Q[i++]=b[R++];while(--P);if(R=0,x<q){P=x,q-=P;do Q[i++]=b[R++];while(--P);R=i-W,U=Q}}}else if(R+=x-P,P<q){q-=P;do Q[i++]=b[R++];while(--P);R=i-W,U=Q}for(;q>2;)Q[i++]=U[R++],Q[i++]=U[R++],Q[i++]=U[R++],q-=3;q&&(Q[i++]=U[R++],q>1&&(Q[i++]=U[R++]))}else{R=i-W;do Q[i++]=Q[R++],Q[i++]=Q[R++],Q[i++]=Q[R++],q-=3;while(q>2);q&&(Q[i++]=Q[R++],q>1&&(Q[i++]=Q[R++]))}}else if((P&64)===0){A=N[(A&65535)+(g&(1<<P)-1)];continue r}else{t.msg="invalid distance code",H.mode=Wy;break e}break}}else if((P&64)===0){A=y[(A&65535)+(g&(1<<P)-1)];continue t}else if(P&32){H.mode=wTe;break e}else{t.msg="invalid literal/length code",H.mode=Wy;break e}break}}while(n<a&&i<l);q=k>>3,n-=q,k-=q<<3,g&=(1<<k)-1,t.next_in=n,t.next_out=i,t.avail_in=n<a?5+(a-n):5-(n-a),t.avail_out=i<l?257+(l-i):257-(i-l),H.hold=g,H.bits=k};const u1=15,vR=852,yR=592,wR=0,E_=1,kR=2,NTe=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),_Te=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),STe=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),jTe=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),CTe=(e,t,r,n,a,i,o,l)=>{const d=l.bits;let c=0,u=0,x=0,b=0,g=0,k=0,y=0,N=0,S=0,O=0,A,P,q,W,R,U=null,L;const Q=new Uint16Array(u1+1),H=new Uint16Array(u1+1);let G=null,Z,te,se;for(c=0;c<=u1;c++)Q[c]=0;for(u=0;u<n;u++)Q[t[r+u]]++;for(g=d,b=u1;b>=1&&Q[b]===0;b--);if(g>b&&(g=b),b===0)return a[i++]=1<<24|64<<16|0,a[i++]=1<<24|64<<16|0,l.bits=1,0;for(x=1;x<b&&Q[x]===0;x++);for(g<x&&(g=x),N=1,c=1;c<=u1;c++)if(N<<=1,N-=Q[c],N<0)return-1;if(N>0&&(e===wR||b!==1))return-1;for(H[1]=0,c=1;c<u1;c++)H[c+1]=H[c]+Q[c];for(u=0;u<n;u++)t[r+u]!==0&&(o[H[t[r+u]]++]=u);if(e===wR?(U=G=o,L=20):e===E_?(U=NTe,G=_Te,L=257):(U=STe,G=jTe,L=0),O=0,u=0,c=x,R=i,k=g,y=0,q=-1,S=1<<g,W=S-1,e===E_&&S>vR||e===kR&&S>yR)return 1;for(;;){Z=c-y,o[u]+1<L?(te=0,se=o[u]):o[u]>=L?(te=G[o[u]-L],se=U[o[u]-L]):(te=96,se=0),A=1<<c-y,P=1<<k,x=P;do P-=A,a[R+(O>>y)+P]=Z<<24|te<<16|se|0;while(P!==0);for(A=1<<c-1;O&A;)A>>=1;if(A!==0?(O&=A-1,O+=A):O=0,u++,--Q[c]===0){if(c===b)break;c=t[r+o[u]]}if(c>g&&(O&W)!==q){for(y===0&&(y=g),R+=x,k=c-y,N=1<<k;k+y<b&&(N-=Q[k+y],!(N<=0));)k++,N<<=1;if(S+=1<<k,e===E_&&S>vR||e===kR&&S>yR)return 1;q=O&W,a[q]=g<<24|k<<16|R-i|0}}return O!==0&&(a[R+O]=c-y<<24|64<<16|0),l.bits=g,0};var rb=CTe;const ATe=0,EK=1,TK=2,{Z_FINISH:NR,Z_BLOCK:ETe,Z_TREES:Gy,Z_OK:ax,Z_STREAM_END:TTe,Z_NEED_DICT:OTe,Z_STREAM_ERROR:jd,Z_DATA_ERROR:OK,Z_MEM_ERROR:PK,Z_BUF_ERROR:PTe,Z_DEFLATED:_R}=jK,Y5=16180,SR=16181,jR=16182,CR=16183,AR=16184,ER=16185,TR=16186,OR=16187,PR=16188,IR=16189,Ok=16190,N0=16191,T_=16192,DR=16193,O_=16194,MR=16195,LR=16196,RR=16197,FR=16198,Ky=16199,Xy=16200,BR=16201,UR=16202,zR=16203,qR=16204,HR=16205,P_=16206,$R=16207,VR=16208,qs=16209,IK=16210,DK=16211,ITe=852,DTe=592,MTe=15,LTe=MTe,WR=e=>(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24);function RTe(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const px=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<Y5||t.mode>DK?1:0},MK=e=>{if(px(e))return jd;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=t.wrap&1),t.mode=Y5,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(ITe),t.distcode=t.distdyn=new Int32Array(DTe),t.sane=1,t.back=-1,ax},LK=e=>{if(px(e))return jd;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,MK(e)},RK=(e,t)=>{let r;if(px(e))return jd;const n=e.state;return t<0?(r=0,t=-t):(r=(t>>4)+5,t<48&&(t&=15)),t&&(t<8||t>15)?jd:(n.window!==null&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,LK(e))},FK=(e,t)=>{if(!e)return jd;const r=new RTe;e.state=r,r.strm=e,r.window=null,r.mode=Y5;const n=RK(e,t);return n!==ax&&(e.state=null),n},FTe=e=>FK(e,LTe);let GR=!0,I_,D_;const BTe=e=>{if(GR){I_=new Int32Array(512),D_=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(rb(EK,e.lens,0,288,I_,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;rb(TK,e.lens,0,32,D_,0,e.work,{bits:5}),GR=!1}e.lencode=I_,e.lenbits=9,e.distcode=D_,e.distbits=5},BK=(e,t,r,n)=>{let a;const i=e.state;return i.window===null&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new Uint8Array(i.wsize)),n>=i.wsize?(i.window.set(t.subarray(r-i.wsize,r),0),i.wnext=0,i.whave=i.wsize):(a=i.wsize-i.wnext,a>n&&(a=n),i.window.set(t.subarray(r-n,r-n+a),i.wnext),n-=a,n?(i.window.set(t.subarray(r-n,r),0),i.wnext=n,i.whave=i.wsize):(i.wnext+=a,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=a))),0},UTe=(e,t)=>{let r,n,a,i,o,l,d,c,u,x,b,g,k,y,N=0,S,O,A,P,q,W,R,U;const L=new Uint8Array(4);let Q,H;const G=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(px(e)||!e.output||!e.input&&e.avail_in!==0)return jd;r=e.state,r.mode===N0&&(r.mode=T_),o=e.next_out,a=e.output,d=e.avail_out,i=e.next_in,n=e.input,l=e.avail_in,c=r.hold,u=r.bits,x=l,b=d,U=ax;e:for(;;)switch(r.mode){case Y5:if(r.wrap===0){r.mode=T_;break}for(;u<16;){if(l===0)break e;l--,c+=n[i++]<<u,u+=8}if(r.wrap&2&&c===35615){r.wbits===0&&(r.wbits=15),r.check=0,L[0]=c&255,L[1]=c>>>8&255,r.check=Eu(r.check,L,2,0),c=0,u=0,r.mode=SR;break}if(r.head&&(r.head.done=!1),!(r.wrap&1)||(((c&255)<<8)+(c>>8))%31){e.msg="incorrect header check",r.mode=qs;break}if((c&15)!==_R){e.msg="unknown compression method",r.mode=qs;break}if(c>>>=4,u-=4,R=(c&15)+8,r.wbits===0&&(r.wbits=R),R>15||R>r.wbits){e.msg="invalid window size",r.mode=qs;break}r.dmax=1<<r.wbits,r.flags=0,e.adler=r.check=1,r.mode=c&512?IR:N0,c=0,u=0;break;case SR:for(;u<16;){if(l===0)break e;l--,c+=n[i++]<<u,u+=8}if(r.flags=c,(r.flags&255)!==_R){e.msg="unknown compression method",r.mode=qs;break}if(r.flags&57344){e.msg="unknown header flags set",r.mode=qs;break}r.head&&(r.head.text=c>>8&1),r.flags&512&&r.wrap&4&&(L[0]=c&255,L[1]=c>>>8&255,r.check=Eu(r.check,L,2,0)),c=0,u=0,r.mode=jR;case jR:for(;u<32;){if(l===0)break e;l--,c+=n[i++]<<u,u+=8}r.head&&(r.head.time=c),r.flags&512&&r.wrap&4&&(L[0]=c&255,L[1]=c>>>8&255,L[2]=c>>>16&255,L[3]=c>>>24&255,r.check=Eu(r.check,L,4,0)),c=0,u=0,r.mode=CR;case CR:for(;u<16;){if(l===0)break e;l--,c+=n[i++]<<u,u+=8}r.head&&(r.head.xflags=c&255,r.head.os=c>>8),r.flags&512&&r.wrap&4&&(L[0]=c&255,L[1]=c>>>8&255,r.check=Eu(r.check,L,2,0)),c=0,u=0,r.mode=AR;case AR:if(r.flags&1024){for(;u<16;){if(l===0)break e;l--,c+=n[i++]<<u,u+=8}r.length=c,r.head&&(r.head.extra_len=c),r.flags&512&&r.wrap&4&&(L[0]=c&255,L[1]=c>>>8&255,r.check=Eu(r.check,L,2,0)),c=0,u=0}else r.head&&(r.head.extra=null);r.mode=ER;case ER:if(r.flags&1024&&(g=r.length,g>l&&(g=l),g&&(r.head&&(R=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(n.subarray(i,i+g),R)),r.flags&512&&r.wrap&4&&(r.check=Eu(r.check,n,g,i)),l-=g,i+=g,r.length-=g),r.length))break e;r.length=0,r.mode=TR;case TR:if(r.flags&2048){if(l===0)break e;g=0;do R=n[i+g++],r.head&&R&&r.length<65536&&(r.head.name+=String.fromCharCode(R));while(R&&g<l);if(r.flags&512&&r.wrap&4&&(r.check=Eu(r.check,n,g,i)),l-=g,i+=g,R)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=OR;case OR:if(r.flags&4096){if(l===0)break e;g=0;do R=n[i+g++],r.head&&R&&r.length<65536&&(r.head.comment+=String.fromCharCode(R));while(R&&g<l);if(r.flags&512&&r.wrap&4&&(r.check=Eu(r.check,n,g,i)),l-=g,i+=g,R)break e}else r.head&&(r.head.comment=null);r.mode=PR;case PR:if(r.flags&512){for(;u<16;){if(l===0)break e;l--,c+=n[i++]<<u,u+=8}if(r.wrap&4&&c!==(r.check&65535)){e.msg="header crc mismatch",r.mode=qs;break}c=0,u=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=N0;break;case IR:for(;u<32;){if(l===0)break e;l--,c+=n[i++]<<u,u+=8}e.adler=r.check=WR(c),c=0,u=0,r.mode=Ok;case Ok:if(r.havedict===0)return e.next_out=o,e.avail_out=d,e.next_in=i,e.avail_in=l,r.hold=c,r.bits=u,OTe;e.adler=r.check=1,r.mode=N0;case N0:if(t===ETe||t===Gy)break e;case T_:if(r.last){c>>>=u&7,u-=u&7,r.mode=P_;break}for(;u<3;){if(l===0)break e;l--,c+=n[i++]<<u,u+=8}switch(r.last=c&1,c>>>=1,u-=1,c&3){case 0:r.mode=DR;break;case 1:if(BTe(r),r.mode=Ky,t===Gy){c>>>=2,u-=2;break e}break;case 2:r.mode=LR;break;case 3:e.msg="invalid block type",r.mode=qs}c>>>=2,u-=2;break;case DR:for(c>>>=u&7,u-=u&7;u<32;){if(l===0)break e;l--,c+=n[i++]<<u,u+=8}if((c&65535)!==(c>>>16^65535)){e.msg="invalid stored block lengths",r.mode=qs;break}if(r.length=c&65535,c=0,u=0,r.mode=O_,t===Gy)break e;case O_:r.mode=MR;case MR:if(g=r.length,g){if(g>l&&(g=l),g>d&&(g=d),g===0)break e;a.set(n.subarray(i,i+g),o),l-=g,i+=g,d-=g,o+=g,r.length-=g;break}r.mode=N0;break;case LR:for(;u<14;){if(l===0)break e;l--,c+=n[i++]<<u,u+=8}if(r.nlen=(c&31)+257,c>>>=5,u-=5,r.ndist=(c&31)+1,c>>>=5,u-=5,r.ncode=(c&15)+4,c>>>=4,u-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=qs;break}r.have=0,r.mode=RR;case RR:for(;r.have<r.ncode;){for(;u<3;){if(l===0)break e;l--,c+=n[i++]<<u,u+=8}r.lens[G[r.have++]]=c&7,c>>>=3,u-=3}for(;r.have<19;)r.lens[G[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,Q={bits:r.lenbits},U=rb(ATe,r.lens,0,19,r.lencode,0,r.work,Q),r.lenbits=Q.bits,U){e.msg="invalid code lengths set",r.mode=qs;break}r.have=0,r.mode=FR;case FR:for(;r.have<r.nlen+r.ndist;){for(;N=r.lencode[c&(1<<r.lenbits)-1],S=N>>>24,O=N>>>16&255,A=N&65535,!(S<=u);){if(l===0)break e;l--,c+=n[i++]<<u,u+=8}if(A<16)c>>>=S,u-=S,r.lens[r.have++]=A;else{if(A===16){for(H=S+2;u<H;){if(l===0)break e;l--,c+=n[i++]<<u,u+=8}if(c>>>=S,u-=S,r.have===0){e.msg="invalid bit length repeat",r.mode=qs;break}R=r.lens[r.have-1],g=3+(c&3),c>>>=2,u-=2}else if(A===17){for(H=S+3;u<H;){if(l===0)break e;l--,c+=n[i++]<<u,u+=8}c>>>=S,u-=S,R=0,g=3+(c&7),c>>>=3,u-=3}else{for(H=S+7;u<H;){if(l===0)break e;l--,c+=n[i++]<<u,u+=8}c>>>=S,u-=S,R=0,g=11+(c&127),c>>>=7,u-=7}if(r.have+g>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=qs;break}for(;g--;)r.lens[r.have++]=R}}if(r.mode===qs)break;if(r.lens[256]===0){e.msg="invalid code -- missing end-of-block",r.mode=qs;break}if(r.lenbits=9,Q={bits:r.lenbits},U=rb(EK,r.lens,0,r.nlen,r.lencode,0,r.work,Q),r.lenbits=Q.bits,U){e.msg="invalid literal/lengths set",r.mode=qs;break}if(r.distbits=6,r.distcode=r.distdyn,Q={bits:r.distbits},U=rb(TK,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,Q),r.distbits=Q.bits,U){e.msg="invalid distances set",r.mode=qs;break}if(r.mode=Ky,t===Gy)break e;case Ky:r.mode=Xy;case Xy:if(l>=6&&d>=258){e.next_out=o,e.avail_out=d,e.next_in=i,e.avail_in=l,r.hold=c,r.bits=u,kTe(e,b),o=e.next_out,a=e.output,d=e.avail_out,i=e.next_in,n=e.input,l=e.avail_in,c=r.hold,u=r.bits,r.mode===N0&&(r.back=-1);break}for(r.back=0;N=r.lencode[c&(1<<r.lenbits)-1],S=N>>>24,O=N>>>16&255,A=N&65535,!(S<=u);){if(l===0)break e;l--,c+=n[i++]<<u,u+=8}if(O&&(O&240)===0){for(P=S,q=O,W=A;N=r.lencode[W+((c&(1<<P+q)-1)>>P)],S=N>>>24,O=N>>>16&255,A=N&65535,!(P+S<=u);){if(l===0)break e;l--,c+=n[i++]<<u,u+=8}c>>>=P,u-=P,r.back+=P}if(c>>>=S,u-=S,r.back+=S,r.length=A,O===0){r.mode=HR;break}if(O&32){r.back=-1,r.mode=N0;break}if(O&64){e.msg="invalid literal/length code",r.mode=qs;break}r.extra=O&15,r.mode=BR;case BR:if(r.extra){for(H=r.extra;u<H;){if(l===0)break e;l--,c+=n[i++]<<u,u+=8}r.length+=c&(1<<r.extra)-1,c>>>=r.extra,u-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=UR;case UR:for(;N=r.distcode[c&(1<<r.distbits)-1],S=N>>>24,O=N>>>16&255,A=N&65535,!(S<=u);){if(l===0)break e;l--,c+=n[i++]<<u,u+=8}if((O&240)===0){for(P=S,q=O,W=A;N=r.distcode[W+((c&(1<<P+q)-1)>>P)],S=N>>>24,O=N>>>16&255,A=N&65535,!(P+S<=u);){if(l===0)break e;l--,c+=n[i++]<<u,u+=8}c>>>=P,u-=P,r.back+=P}if(c>>>=S,u-=S,r.back+=S,O&64){e.msg="invalid distance code",r.mode=qs;break}r.offset=A,r.extra=O&15,r.mode=zR;case zR:if(r.extra){for(H=r.extra;u<H;){if(l===0)break e;l--,c+=n[i++]<<u,u+=8}r.offset+=c&(1<<r.extra)-1,c>>>=r.extra,u-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=qs;break}r.mode=qR;case qR:if(d===0)break e;if(g=b-d,r.offset>g){if(g=r.offset-g,g>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=qs;break}g>r.wnext?(g-=r.wnext,k=r.wsize-g):k=r.wnext-g,g>r.length&&(g=r.length),y=r.window}else y=a,k=o-r.offset,g=r.length;g>d&&(g=d),d-=g,r.length-=g;do a[o++]=y[k++];while(--g);r.length===0&&(r.mode=Xy);break;case HR:if(d===0)break e;a[o++]=r.length,d--,r.mode=Xy;break;case P_:if(r.wrap){for(;u<32;){if(l===0)break e;l--,c|=n[i++]<<u,u+=8}if(b-=d,e.total_out+=b,r.total+=b,r.wrap&4&&b&&(e.adler=r.check=r.flags?Eu(r.check,a,b,o-b):n6(r.check,a,b,o-b)),b=d,r.wrap&4&&(r.flags?c:WR(c))!==r.check){e.msg="incorrect data check",r.mode=qs;break}c=0,u=0}r.mode=$R;case $R:if(r.wrap&&r.flags){for(;u<32;){if(l===0)break e;l--,c+=n[i++]<<u,u+=8}if(r.wrap&4&&c!==(r.total&4294967295)){e.msg="incorrect length check",r.mode=qs;break}c=0,u=0}r.mode=VR;case VR:U=TTe;break e;case qs:U=OK;break e;case IK:return PK;case DK:default:return jd}return e.next_out=o,e.avail_out=d,e.next_in=i,e.avail_in=l,r.hold=c,r.bits=u,(r.wsize||b!==e.avail_out&&r.mode<qs&&(r.mode<P_||t!==NR))&&BK(e,e.output,e.next_out,b-e.avail_out),x-=e.avail_in,b-=e.avail_out,e.total_in+=x,e.total_out+=b,r.total+=b,r.wrap&4&&b&&(e.adler=r.check=r.flags?Eu(r.check,a,b,e.next_out-b):n6(r.check,a,b,e.next_out-b)),e.data_type=r.bits+(r.last?64:0)+(r.mode===N0?128:0)+(r.mode===Ky||r.mode===O_?256:0),(x===0&&b===0||t===NR)&&U===ax&&(U=PTe),U},zTe=e=>{if(px(e))return jd;let t=e.state;return t.window&&(t.window=null),e.state=null,ax},qTe=(e,t)=>{if(px(e))return jd;const r=e.state;return(r.wrap&2)===0?jd:(r.head=t,t.done=!1,ax)},HTe=(e,t)=>{const r=t.length;let n,a,i;return px(e)||(n=e.state,n.wrap!==0&&n.mode!==Ok)?jd:n.mode===Ok&&(a=1,a=n6(a,t,r,0),a!==n.check)?OK:(i=BK(e,t,r,r),i?(n.mode=IK,PK):(n.havedict=1,ax))};var $Te=LK,VTe=RK,WTe=MK,GTe=FTe,KTe=FK,XTe=UTe,YTe=zTe,QTe=qTe,ZTe=HTe,JTe="pako inflate (from Nodeca project)",C0={inflateReset:$Te,inflateReset2:VTe,inflateResetKeep:WTe,inflateInit:GTe,inflateInit2:KTe,inflate:XTe,inflateEnd:YTe,inflateGetHeader:QTe,inflateSetDictionary:ZTe,inflateInfo:JTe};function e7e(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var t7e=e7e;const UK=Object.prototype.toString,{Z_NO_FLUSH:r7e,Z_FINISH:n7e,Z_OK:qb,Z_STREAM_END:M_,Z_NEED_DICT:L_,Z_STREAM_ERROR:a7e,Z_DATA_ERROR:KR,Z_MEM_ERROR:s7e}=jK;function Iv(e){this.options=CK.assign({chunkSize:1024*64,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15)===0&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new yTe,this.strm.avail_out=0;let r=C0.inflateInit2(this.strm,t.windowBits);if(r!==qb)throw new Error(a6[r]);if(this.header=new t7e,C0.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=s6.string2buf(t.dictionary):UK.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(r=C0.inflateSetDictionary(this.strm,t.dictionary),r!==qb)))throw new Error(a6[r])}Iv.prototype.push=function(e,t){const r=this.strm,n=this.options.chunkSize,a=this.options.dictionary;let i,o,l;if(this.ended)return!1;for(t===~~t?o=t:o=t===!0?n7e:r7e,UK.call(e)==="[object ArrayBuffer]"?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;;){for(r.avail_out===0&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),i=C0.inflate(r,o),i===L_&&a&&(i=C0.inflateSetDictionary(r,a),i===qb?i=C0.inflate(r,o):i===KR&&(i=L_));r.avail_in>0&&i===M_&&r.state.wrap>0&&e[r.next_in]!==0;)C0.inflateReset(r),i=C0.inflate(r,o);switch(i){case a7e:case KR:case L_:case s7e:return this.onEnd(i),this.ended=!0,!1}if(l=r.avail_out,r.next_out&&(r.avail_out===0||i===M_))if(this.options.to==="string"){let d=s6.utf8border(r.output,r.next_out),c=r.next_out-d,u=s6.buf2string(r.output,d);r.next_out=c,r.avail_out=n-c,c&&r.output.set(r.output.subarray(d,d+c),0),this.onData(u)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(!(i===qb&&l===0)){if(i===M_)return i=C0.inflateEnd(this.strm),this.onEnd(i),this.ended=!0,!0;if(r.avail_in===0)break}}return!0};Iv.prototype.onData=function(e){this.chunks.push(e)};Iv.prototype.onEnd=function(e){e===qb&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=CK.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function i7e(e,t){const r=new Iv(t);if(r.push(e),r.err)throw r.msg||a6[r.err];return r.result}var o7e=Iv,l7e=i7e,c7e={Inflate:o7e,inflate:l7e};const{Inflate:d7e,inflate:u7e}=c7e;var XR=d7e,h7e=u7e;const zK=[];for(let e=0;e<256;e++){let t=e;for(let r=0;r<8;r++)t&1?t=3988292384^t>>>1:t=t>>>1;zK[e]=t}const YR=4294967295;function f7e(e,t,r){let n=e;for(let a=0;a<r;a++)n=zK[(n^t[a])&255]^n>>>8;return n}function m7e(e,t){return(f7e(YR,e,t)^YR)>>>0}function QR(e,t,r){const n=e.readUint32(),a=m7e(new Uint8Array(e.buffer,e.byteOffset+e.offset-t-4,t),t);if(a!==n)throw new Error(`CRC mismatch for chunk ${r}. Expected ${n}, found ${a}`)}function qK(e,t,r){for(let n=0;n<r;n++)t[n]=e[n]}function HK(e,t,r,n){let a=0;for(;a<n;a++)t[a]=e[a];for(;a<r;a++)t[a]=e[a]+t[a-n]&255}function $K(e,t,r,n){let a=0;if(r.length===0)for(;a<n;a++)t[a]=e[a];else for(;a<n;a++)t[a]=e[a]+r[a]&255}function VK(e,t,r,n,a){let i=0;if(r.length===0){for(;i<a;i++)t[i]=e[i];for(;i<n;i++)t[i]=e[i]+(t[i-a]>>1)&255}else{for(;i<a;i++)t[i]=e[i]+(r[i]>>1)&255;for(;i<n;i++)t[i]=e[i]+(t[i-a]+r[i]>>1)&255}}function WK(e,t,r,n,a){let i=0;if(r.length===0){for(;i<a;i++)t[i]=e[i];for(;i<n;i++)t[i]=e[i]+t[i-a]&255}else{for(;i<a;i++)t[i]=e[i]+r[i]&255;for(;i<n;i++)t[i]=e[i]+x7e(t[i-a],r[i],r[i-a])&255}}function x7e(e,t,r){const n=e+t-r,a=Math.abs(n-e),i=Math.abs(n-t),o=Math.abs(n-r);return a<=i&&a<=o?e:i<=o?t:r}function p7e(e,t,r,n,a,i){switch(e){case 0:qK(t,r,a);break;case 1:HK(t,r,a,i);break;case 2:$K(t,r,n,a);break;case 3:VK(t,r,n,a,i);break;case 4:WK(t,r,n,a,i);break;default:throw new Error(`Unsupported filter: ${e}`)}}const g7e=new Uint16Array([255]),b7e=new Uint8Array(g7e.buffer),v7e=b7e[0]===255;function y7e(e){const{data:t,width:r,height:n,channels:a,depth:i}=e,o=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],l=Math.ceil(i/8)*a,d=new Uint8Array(n*r*l);let c=0;for(let u=0;u<7;u++){const x=o[u],b=Math.ceil((r-x.x)/x.xStep),g=Math.ceil((n-x.y)/x.yStep);if(b<=0||g<=0)continue;const k=b*l,y=new Uint8Array(k);for(let N=0;N<g;N++){const S=t[c++],O=t.subarray(c,c+k);c+=k;const A=new Uint8Array(k);p7e(S,O,A,y,k,l),y.set(A);for(let P=0;P<b;P++){const q=x.x+P*x.xStep,W=x.y+N*x.yStep;if(!(q>=r||W>=n))for(let R=0;R<l;R++)d[(W*r+q)*l+R]=A[P*l+R]}}}if(i===16){const u=new Uint16Array(d.buffer);if(v7e)for(let x=0;x<u.length;x++)u[x]=w7e(u[x]);return u}else return d}function w7e(e){return(e&255)<<8|e>>8&255}const k7e=new Uint16Array([255]),N7e=new Uint8Array(k7e.buffer),_7e=N7e[0]===255,S7e=new Uint8Array(0);function ZR(e){const{data:t,width:r,height:n,channels:a,depth:i}=e,o=Math.ceil(i/8)*a,l=Math.ceil(i/8*a*r),d=new Uint8Array(n*l);let c=S7e,u=0,x,b;for(let g=0;g<n;g++){switch(x=t.subarray(u+1,u+1+l),b=d.subarray(g*l,(g+1)*l),t[u]){case 0:qK(x,b,l);break;case 1:HK(x,b,l,o);break;case 2:$K(x,b,c,l);break;case 3:VK(x,b,c,l,o);break;case 4:WK(x,b,c,l,o);break;default:throw new Error(`Unsupported filter: ${t[u]}`)}c=b,u+=l+1}if(i===16){const g=new Uint16Array(d.buffer);if(_7e)for(let k=0;k<g.length;k++)g[k]=j7e(g[k]);return g}else return d}function j7e(e){return(e&255)<<8|e>>8&255}const ow=Uint8Array.of(137,80,78,71,13,10,26,10);function JR(e){if(!C7e(e.readBytes(ow.length)))throw new Error("wrong PNG signature")}function C7e(e){if(e.length<ow.length)return!1;for(let t=0;t<ow.length;t++)if(e[t]!==ow[t])return!1;return!0}const A7e="tEXt",E7e=0,GK=new TextDecoder("latin1");function T7e(e){if(P7e(e),e.length===0||e.length>79)throw new Error("keyword length must be between 1 and 79")}const O7e=/^[\u0000-\u00FF]*$/;function P7e(e){if(!O7e.test(e))throw new Error("invalid latin1 text")}function I7e(e,t,r){const n=KK(t);e[n]=D7e(t,r-n.length-1)}function KK(e){for(e.mark();e.readByte()!==E7e;);const t=e.offset;e.reset();const r=GK.decode(e.readBytes(t-e.offset-1));return e.skip(1),T7e(r),r}function D7e(e,t){return GK.decode(e.readBytes(t))}const wc={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},R_={UNKNOWN:-1,DEFLATE:0},eF={UNKNOWN:-1,ADAPTIVE:0},F_={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},Yy={NONE:0,BACKGROUND:1,PREVIOUS:2},B_={SOURCE:0,OVER:1};class M7e extends qE{constructor(r,n={}){super(r);Oa(this,"_checkCrc");Oa(this,"_inflator");Oa(this,"_png");Oa(this,"_apng");Oa(this,"_end");Oa(this,"_hasPalette");Oa(this,"_palette");Oa(this,"_hasTransparency");Oa(this,"_transparency");Oa(this,"_compressionMethod");Oa(this,"_filterMethod");Oa(this,"_interlaceMethod");Oa(this,"_colorType");Oa(this,"_isAnimated");Oa(this,"_numberOfFrames");Oa(this,"_numberOfPlays");Oa(this,"_frames");Oa(this,"_writingDataChunks");const{checkCrc:a=!1}=n;this._checkCrc=a,this._inflator=new XR,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=R_.UNKNOWN,this._filterMethod=eF.UNKNOWN,this._interlaceMethod=F_.UNKNOWN,this._colorType=wc.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(JR(this);!this._end;){const r=this.readUint32(),n=this.readChars(4);this.decodeChunk(r,n)}return this.decodeImage(),this._png}decodeApng(){for(JR(this);!this._end;){const r=this.readUint32(),n=this.readChars(4);this.decodeApngChunk(r,n)}return this.decodeApngImage(),this._apng}decodeChunk(r,n){const a=this.offset;switch(n){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(r);break;case"IDAT":this.decodeIDAT(r);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(r);break;case"iCCP":this.decodeiCCP(r);break;case A7e:I7e(this._png.text,this,r);break;case"pHYs":this.decodepHYs();break;default:this.skip(r);break}if(this.offset-a!==r)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?QR(this,r+4,n):this.skip(4)}decodeApngChunk(r,n){const a=this.offset;switch(n!=="fdAT"&&n!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),n){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(r);break;default:this.decodeChunk(r,n),this.offset=a+r;break}if(this.offset-a!==r)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?QR(this,r+4,n):this.skip(4)}decodeIHDR(){const r=this._png;r.width=this.readUint32(),r.height=this.readUint32(),r.depth=L7e(this.readUint8());const n=this.readUint8();this._colorType=n;let a;switch(n){case wc.GREYSCALE:a=1;break;case wc.TRUECOLOUR:a=3;break;case wc.INDEXED_COLOUR:a=1;break;case wc.GREYSCALE_ALPHA:a=2;break;case wc.TRUECOLOUR_ALPHA:a=4;break;case wc.UNKNOWN:default:throw new Error(`Unknown color type: ${n}`)}if(this._png.channels=a,this._compressionMethod=this.readUint8(),this._compressionMethod!==R_.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const r={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(r)}decodePLTE(r){if(r%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${r}`);const n=r/3;this._hasPalette=!0;const a=[];this._palette=a;for(let i=0;i<n;i++)a.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(r){this._writingDataChunks=!0;const n=r,a=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,a,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(r)}decodeFDAT(r){this._writingDataChunks=!0;let n=r,a=this.offset+this.byteOffset;if(a+=4,n-=4,this._inflator.push(new Uint8Array(this.buffer,a,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(r)}decodetRNS(r){switch(this._colorType){case wc.GREYSCALE:case wc.TRUECOLOUR:{if(r%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${r}`);if(r/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${r/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(r/2);for(let n=0;n<r/2;n++)this._transparency[n]=this.readUint16();break}case wc.INDEXED_COLOUR:{if(r>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${r} vs ${this._palette.length})`);let n=0;for(;n<r;n++){const a=this.readByte();this._palette[n].push(a)}for(;n<this._palette.length;n++)this._palette[n].push(255);break}case wc.UNKNOWN:case wc.GREYSCALE_ALPHA:case wc.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(r){const n=KK(this),a=this.readUint8();if(a!==R_.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${a}`);const i=this.readBytes(r-n.length-2);this._png.iccEmbeddedProfile={name:n,profile:h7e(i)}}decodepHYs(){const r=this.readUint32(),n=this.readUint32(),a=this.readByte();this._png.resolution={x:r,y:n,unit:a}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let r=0;r<this._numberOfFrames;r++){const n={sequenceNumber:this._frames[r].sequenceNumber,delayNumber:this._frames[r].delayNumber,delayDenominator:this._frames[r].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},a=this._frames.at(r);if(a){if(a.data=ZR({data:a.data,width:a.width,height:a.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),r===0||a.xOffset===0&&a.yOffset===0&&a.width===this._png.width&&a.height===this._png.height)n.data=a.data;else{const i=this._apng.frames.at(r-1);this.disposeFrame(a,i,n),this.addFrameDataToCanvas(n,a)}this._apng.frames.push(n)}}return this._apng}disposeFrame(r,n,a){switch(r.disposeOp){case Yy.NONE:break;case Yy.BACKGROUND:for(let i=0;i<this._png.height;i++)for(let o=0;o<this._png.width;o++){const l=(i*r.width+o)*this._png.channels;for(let d=0;d<this._png.channels;d++)a.data[l+d]=0}break;case Yy.PREVIOUS:a.data.set(n.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(r,n){const a=1<<this._png.depth,i=(o,l)=>{const d=((o+n.yOffset)*this._png.width+n.xOffset+l)*this._png.channels,c=(o*n.width+l)*this._png.channels;return{index:d,frameIndex:c}};switch(n.blendOp){case B_.SOURCE:for(let o=0;o<n.height;o++)for(let l=0;l<n.width;l++){const{index:d,frameIndex:c}=i(o,l);for(let u=0;u<this._png.channels;u++)r.data[d+u]=n.data[c+u]}break;case B_.OVER:for(let o=0;o<n.height;o++)for(let l=0;l<n.width;l++){const{index:d,frameIndex:c}=i(o,l);for(let u=0;u<this._png.channels;u++){const x=n.data[c+this._png.channels-1]/a,b=u%(this._png.channels-1)===0?1:n.data[c+u],g=Math.floor(x*b+(1-x)*r.data[d+u]);r.data[d+u]+=g}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){var n;if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const r=this._isAnimated?((n=this._frames)==null?void 0:n.at(0)).data:this._inflator.result;if(this._filterMethod!==eF.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===F_.NO_INTERLACE)this._png.data=ZR({data:r,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===F_.ADAM7)this._png.data=y7e({data:r,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const r=this._inflator.result,n=this._frames.at(-1);n?n.data=r:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:Yy.NONE,blendOp:B_.SOURCE,data:r}),this._inflator=new XR,this._writingDataChunks=!1}}function L7e(e){if(e!==1&&e!==2&&e!==4&&e!==8&&e!==16)throw new Error(`invalid bit depth: ${e}`);return e}var tF;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.METRE=1]="METRE"})(tF||(tF={}));function R7e(e,t){return new M7e(e,t).decode()}var Rn=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function U_(){Rn.console&&typeof Rn.console.log=="function"&&Rn.console.log.apply(Rn.console,arguments)}var ms={log:U_,warn:function(e){Rn.console&&(typeof Rn.console.warn=="function"?Rn.console.warn.apply(Rn.console,arguments):U_.call(null,arguments))},error:function(e){Rn.console&&(typeof Rn.console.error=="function"?Rn.console.error.apply(Rn.console,arguments):U_(e))}};function z_(e,t,r){var n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){tm(n.response,t,r)},n.onerror=function(){ms.error("could not download file")},n.send()}function rF(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function Qy(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var tm=Rn.saveAs||((typeof window>"u"?"undefined":Za(window))!=="object"||window!==Rn?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,r){var n=Rn.URL||Rn.webkitURL,a=document.createElement("a");t=t||e.name||"download",a.download=t,a.rel="noopener",typeof e=="string"?(a.href=e,a.origin!==location.origin?rF(a.href)?z_(e,t,r):Qy(a,a.target="_blank"):Qy(a)):(a.href=n.createObjectURL(e),setTimeout(function(){n.revokeObjectURL(a.href)},4e4),setTimeout(function(){Qy(a)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,r){if(t=t||e.name||"download",typeof e=="string")if(rF(e))z_(e,t,r);else{var n=document.createElement("a");n.href=e,n.target="_blank",setTimeout(function(){Qy(n)})}else navigator.msSaveOrOpenBlob((function(a,i){return i===void 0?i={autoBom:!1}:Za(i)!=="object"&&(ms.warn("Deprecated: Expected third argument to be a object"),i={autoBom:!i}),i.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a})(e,r),t)}:function(e,t,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof e=="string")return z_(e,t,r);var a=e.type==="application/octet-stream",i=/constructor/i.test(Rn.HTMLElement)||Rn.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||a&&i)&&(typeof FileReader>"u"?"undefined":Za(FileReader))==="object"){var l=new FileReader;l.onloadend=function(){var u=l.result;u=o?u:u.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=u:location=u,n=null},l.readAsDataURL(e)}else{var d=Rn.URL||Rn.webkitURL,c=d.createObjectURL(e);n?n.location=c:location.href=c,n=null,setTimeout(function(){d.revokeObjectURL(c)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function XK(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(l){return[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(l){return[parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16),parseInt(l[3]+l[3],16)]}}],n=0;n<r.length;n++){var a=r[n].re,i=r[n].process,o=a.exec(e);o&&(t=i(o),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var l=this.r.toString(16),d=this.g.toString(16),c=this.b.toString(16);return l.length==1&&(l="0"+l),d.length==1&&(d="0"+d),c.length==1&&(c="0"+c),"#"+l+d+c}}var lw=Rn.atob.bind(Rn),nF=Rn.btoa.bind(Rn);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function q_(e,t){var r=e[0],n=e[1],a=e[2],i=e[3];r=Jo(r,n,a,i,t[0],7,-680876936),i=Jo(i,r,n,a,t[1],12,-389564586),a=Jo(a,i,r,n,t[2],17,606105819),n=Jo(n,a,i,r,t[3],22,-1044525330),r=Jo(r,n,a,i,t[4],7,-176418897),i=Jo(i,r,n,a,t[5],12,1200080426),a=Jo(a,i,r,n,t[6],17,-1473231341),n=Jo(n,a,i,r,t[7],22,-45705983),r=Jo(r,n,a,i,t[8],7,1770035416),i=Jo(i,r,n,a,t[9],12,-1958414417),a=Jo(a,i,r,n,t[10],17,-42063),n=Jo(n,a,i,r,t[11],22,-1990404162),r=Jo(r,n,a,i,t[12],7,1804603682),i=Jo(i,r,n,a,t[13],12,-40341101),a=Jo(a,i,r,n,t[14],17,-1502002290),r=el(r,n=Jo(n,a,i,r,t[15],22,1236535329),a,i,t[1],5,-165796510),i=el(i,r,n,a,t[6],9,-1069501632),a=el(a,i,r,n,t[11],14,643717713),n=el(n,a,i,r,t[0],20,-373897302),r=el(r,n,a,i,t[5],5,-701558691),i=el(i,r,n,a,t[10],9,38016083),a=el(a,i,r,n,t[15],14,-660478335),n=el(n,a,i,r,t[4],20,-405537848),r=el(r,n,a,i,t[9],5,568446438),i=el(i,r,n,a,t[14],9,-1019803690),a=el(a,i,r,n,t[3],14,-187363961),n=el(n,a,i,r,t[8],20,1163531501),r=el(r,n,a,i,t[13],5,-1444681467),i=el(i,r,n,a,t[2],9,-51403784),a=el(a,i,r,n,t[7],14,1735328473),r=tl(r,n=el(n,a,i,r,t[12],20,-1926607734),a,i,t[5],4,-378558),i=tl(i,r,n,a,t[8],11,-2022574463),a=tl(a,i,r,n,t[11],16,1839030562),n=tl(n,a,i,r,t[14],23,-35309556),r=tl(r,n,a,i,t[1],4,-1530992060),i=tl(i,r,n,a,t[4],11,1272893353),a=tl(a,i,r,n,t[7],16,-155497632),n=tl(n,a,i,r,t[10],23,-1094730640),r=tl(r,n,a,i,t[13],4,681279174),i=tl(i,r,n,a,t[0],11,-358537222),a=tl(a,i,r,n,t[3],16,-722521979),n=tl(n,a,i,r,t[6],23,76029189),r=tl(r,n,a,i,t[9],4,-640364487),i=tl(i,r,n,a,t[12],11,-421815835),a=tl(a,i,r,n,t[15],16,530742520),r=rl(r,n=tl(n,a,i,r,t[2],23,-995338651),a,i,t[0],6,-198630844),i=rl(i,r,n,a,t[7],10,1126891415),a=rl(a,i,r,n,t[14],15,-1416354905),n=rl(n,a,i,r,t[5],21,-57434055),r=rl(r,n,a,i,t[12],6,1700485571),i=rl(i,r,n,a,t[3],10,-1894986606),a=rl(a,i,r,n,t[10],15,-1051523),n=rl(n,a,i,r,t[1],21,-2054922799),r=rl(r,n,a,i,t[8],6,1873313359),i=rl(i,r,n,a,t[15],10,-30611744),a=rl(a,i,r,n,t[6],15,-1560198380),n=rl(n,a,i,r,t[13],21,1309151649),r=rl(r,n,a,i,t[4],6,-145523070),i=rl(i,r,n,a,t[11],10,-1120210379),a=rl(a,i,r,n,t[2],15,718787259),n=rl(n,a,i,r,t[9],21,-343485551),e[0]=uf(r,e[0]),e[1]=uf(n,e[1]),e[2]=uf(a,e[2]),e[3]=uf(i,e[3])}function Q5(e,t,r,n,a,i){return t=uf(uf(t,e),uf(n,i)),uf(t<<a|t>>>32-a,r)}function Jo(e,t,r,n,a,i,o){return Q5(t&r|~t&n,e,t,a,i,o)}function el(e,t,r,n,a,i,o){return Q5(t&n|r&~n,e,t,a,i,o)}function tl(e,t,r,n,a,i,o){return Q5(t^r^n,e,t,a,i,o)}function rl(e,t,r,n,a,i,o){return Q5(r^(t|~n),e,t,a,i,o)}function YK(e){var t,r=e.length,n=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)q_(n,F7e(e.substring(t-64,t)));e=e.substring(t-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)a[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(a[t>>2]|=128<<(t%4<<3),t>55)for(q_(n,a),t=0;t<16;t++)a[t]=0;return a[14]=8*r,q_(n,a),n}function F7e(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return r}var aF="0123456789abcdef".split("");function B7e(e){for(var t="",r=0;r<4;r++)t+=aF[e>>8*r+4&15]+aF[e>>8*r&15];return t}function U7e(e){return String.fromCharCode(255&e,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function i6(e){return YK(e).map(U7e).join("")}var z7e=(function(e){for(var t=0;t<e.length;t++)e[t]=B7e(e[t]);return e.join("")})(YK("hello"))!="5d41402abc4b2a76b9719d911017c592";function uf(e,t){if(z7e){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}return e+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function o6(e,t){var r,n,a,i;if(e!==r){for(var o=(a=e,i=1+(256/e.length|0),new Array(i+1).join(a)),l=[],d=0;d<256;d++)l[d]=d;var c=0;for(d=0;d<256;d++){var u=l[d];c=(c+u+o.charCodeAt(d))%256,l[d]=l[c],l[c]=u}r=e,n=l}else l=n;var x=t.length,b=0,g=0,k="";for(d=0;d<x;d++)g=(g+(u=l[b=(b+1)%256]))%256,l[b]=l[g],l[g]=u,o=l[(l[b]+l[g])%256],k+=String.fromCharCode(t.charCodeAt(d)^o);return k}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var sF={print:4,modify:8,copy:16,"annot-forms":32};function b1(e,t,r,n){this.v=1,this.r=2;var a=192;e.forEach(function(l){if(sF.perm!==void 0)throw new Error("Invalid permission: "+l);a+=sF[l]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var i=(t+this.padding).substr(0,32),o=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(i,o),this.P=-(1+(255^a)),this.encryptionKey=i6(i+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=o6(this.encryptionKey,this.padding)}function v1(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",r=e.length,n=0;n<r;n++){var a=e.charCodeAt(n);t+=a<33||a===35||a===37||a===40||a===41||a===47||a===60||a===62||a===91||a===93||a===123||a===125||a>126?"#"+("0"+a.toString(16)).slice(-2):e[n]}return t}function iF(e){if(Za(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(r,n,a){if(a=a||!1,typeof r!="string"||typeof n!="function"||typeof a!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(r)||(t[r]={});var i=Math.random().toString(35);return t[r][i]=[n,!!a],i},this.unsubscribe=function(r){for(var n in t)if(t[n][r])return delete t[n][r],Object.keys(t[n]).length===0&&delete t[n],!0;return!1},this.publish=function(r){if(t.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),a=[];for(var i in t[r]){var o=t[r][i];try{o[0].apply(e,n)}catch(l){Rn.console&&ms.error("jsPDF PubSub Error",l.message,l)}o[1]&&a.push(i)}a.length&&a.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function Pk(e){if(!(this instanceof Pk))return new Pk(e);var t="opacity,stroke-opacity".split(",");for(var r in e)e.hasOwnProperty(r)&&t.indexOf(r)>=0&&(this[r]=e[r]);this.id="",this.objectNumber=-1}function QK(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function sm(e,t,r,n,a){if(!(this instanceof sm))return new sm(e,t,r,n,a);this.type=e==="axial"?2:3,this.coords=t,this.colors=r,QK.call(this,n,a)}function N1(e,t,r,n,a){if(!(this instanceof N1))return new N1(e,t,r,n,a);this.boundingBox=e,this.xStep=t,this.yStep=r,this.stream="",this.cloneIndex=0,QK.call(this,n,a)}function sn(e){var t,r=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],a=arguments[2],i=arguments[3],o=[],l=1,d=16,c="S",u=null;Za(e=e||{})==="object"&&(r=e.orientation,n=e.unit||n,a=e.format||a,i=e.compress||e.compressPdf||i,(u=e.encryption||null)!==null&&(u.userPassword=u.userPassword||"",u.ownerPassword=u.ownerPassword||"",u.userPermissions=u.userPermissions||[]),l=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(d=e.floatPrecision),c=e.defaultPathOperation||"S"),o=e.filters||(i===!0?["FlateEncode"]:o),n=n||"mm",r=(""+(r||"P")).toLowerCase();var x=e.putOnlyUsedFonts||!1,b={},g={internal:{},__private__:{}};g.__private__.PubSub=iF;var k="1.3",y=g.__private__.getPdfVersion=function(){return k};g.__private__.setPdfVersion=function(K){k=K};var N={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};g.__private__.getPageFormats=function(){return N};var S=g.__private__.getPageFormat=function(K){return N[K]};a=a||"a4";var O="compat",A="advanced",P=O;function q(){this.saveGraphicsState(),ge(new cr(Kt,0,0,-Kt,0,mc()*Kt).toString()+" cm"),this.setFontSize(this.getFontSize()/Kt),c="n",P=A}function W(){this.restoreGraphicsState(),c="S",P=O}var R=g.__private__.combineFontStyleAndFontWeight=function(K,ke){if(K=="bold"&&ke=="normal"||K=="bold"&&ke==400||K=="normal"&&ke=="italic"||K=="bold"&&ke=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return ke&&(K=ke==400||ke==="normal"?K==="italic"?"italic":"normal":ke!=700&&ke!=="bold"||K!=="normal"?(ke==700?"bold":ke)+""+K:"bold"),K};g.advancedAPI=function(K){var ke=P===O;return ke&&q.call(this),typeof K!="function"||(K(this),ke&&W.call(this)),this},g.compatAPI=function(K){var ke=P===A;return ke&&W.call(this),typeof K!="function"||(K(this),ke&&q.call(this)),this},g.isAdvancedAPI=function(){return P===A};var U,L=function(K){if(P!==A)throw new Error(K+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},Q=g.roundToPrecision=g.__private__.roundToPrecision=function(K,ke){var $e=t||ke;if(isNaN(K)||isNaN($e))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return K.toFixed($e).replace(/0+$/,"")};U=g.hpf=g.__private__.hpf=typeof d=="number"?function(K){if(isNaN(K))throw new Error("Invalid argument passed to jsPDF.hpf");return Q(K,d)}:d==="smart"?function(K){if(isNaN(K))throw new Error("Invalid argument passed to jsPDF.hpf");return Q(K,K>-1&&K<1?16:5)}:function(K){if(isNaN(K))throw new Error("Invalid argument passed to jsPDF.hpf");return Q(K,16)};var H=g.f2=g.__private__.f2=function(K){if(isNaN(K))throw new Error("Invalid argument passed to jsPDF.f2");return Q(K,2)},G=g.__private__.f3=function(K){if(isNaN(K))throw new Error("Invalid argument passed to jsPDF.f3");return Q(K,3)},Z=g.scale=g.__private__.scale=function(K){if(isNaN(K))throw new Error("Invalid argument passed to jsPDF.scale");return P===O?K*Kt:P===A?K:void 0},te=function(K){return Z((function(ke){return P===O?mc()-ke:P===A?ke:void 0})(K))};g.__private__.setPrecision=g.setPrecision=function(K){typeof parseInt(K,10)=="number"&&(t=parseInt(K,10))};var se,ue="00000000000000000000000000000000",ae=g.__private__.getFileId=function(){return ue},pe=g.__private__.setFileId=function(K){return ue=K!==void 0&&/^[a-fA-F0-9]{32}$/.test(K)?K.toUpperCase():ue.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),u!==null&&(Da=new b1(u.userPermissions,u.userPassword,u.ownerPassword,ue)),ue};g.setFileId=function(K){return pe(K),this},g.getFileId=function(){return ae()};var ve=g.__private__.convertDateToPDFDate=function(K){var ke=K.getTimezoneOffset(),$e=ke<0?"+":"-",it=Math.floor(Math.abs(ke/60)),pt=Math.abs(ke%60),$t=[$e,J(it),"'",J(pt),"'"].join("");return["D:",K.getFullYear(),J(K.getMonth()+1),J(K.getDate()),J(K.getHours()),J(K.getMinutes()),J(K.getSeconds()),$t].join("")},Pe=g.__private__.convertPDFDateToDate=function(K){var ke=parseInt(K.substr(2,4),10),$e=parseInt(K.substr(6,2),10)-1,it=parseInt(K.substr(8,2),10),pt=parseInt(K.substr(10,2),10),$t=parseInt(K.substr(12,2),10),lr=parseInt(K.substr(14,2),10);return new Date(ke,$e,it,pt,$t,lr,0)},xe=g.__private__.setCreationDate=function(K){var ke;if(K===void 0&&(K=new Date),K instanceof Date)ke=ve(K);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(K))throw new Error("Invalid argument passed to jsPDF.setCreationDate");ke=K}return se=ke},B=g.__private__.getCreationDate=function(K){var ke=se;return K==="jsDate"&&(ke=Pe(se)),ke};g.setCreationDate=function(K){return xe(K),this},g.getCreationDate=function(K){return B(K)};var re,J=g.__private__.padd2=function(K){return("0"+parseInt(K)).slice(-2)},ie=g.__private__.padd2Hex=function(K){return("00"+(K=K.toString())).substr(K.length)},Y=0,_e=[],me=[],ne=0,je=[],De=[],ce=!1,Ee=me;g.__private__.setCustomOutputDestination=function(K){ce=!0,Ee=K};var be=function(K){ce||(Ee=K)};g.__private__.resetCustomOutputDestination=function(){ce=!1,Ee=me};var ge=g.__private__.out=function(K){return K=K.toString(),ne+=K.length+1,Ee.push(K),Ee},Qe=g.__private__.write=function(K){return ge(arguments.length===1?K.toString():Array.prototype.join.call(arguments," "))},Ye=g.__private__.getArrayBuffer=function(K){for(var ke=K.length,$e=new ArrayBuffer(ke),it=new Uint8Array($e);ke--;)it[ke]=K.charCodeAt(ke);return $e},at=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];g.__private__.getStandardFonts=function(){return at};var Je=e.fontSize||16;g.__private__.setFontSize=g.setFontSize=function(K){return Je=P===A?K/Kt:K,this};var ct,Ke=g.__private__.getFontSize=g.getFontSize=function(){return P===O?Je:Je*Kt},zt=e.R2L||!1;g.__private__.setR2L=g.setR2L=function(K){return zt=K,this},g.__private__.getR2L=g.getR2L=function(){return zt};var Ft,fr=g.__private__.setZoomMode=function(K){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(K))ct=K;else if(isNaN(K)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(K)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+K+'" is not recognized.');ct=K}else ct=parseInt(K,10)};g.__private__.getZoomMode=function(){return ct};var hr,sr=g.__private__.setPageMode=function(K){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(K)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+K+'" is not recognized.');Ft=K};g.__private__.getPageMode=function(){return Ft};var Sr=g.__private__.setLayoutMode=function(K){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(K)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+K+'" is not recognized.');hr=K};g.__private__.getLayoutMode=function(){return hr},g.__private__.setDisplayMode=g.setDisplayMode=function(K,ke,$e){return fr(K),Sr(ke),sr($e),this};var tr={title:"",subject:"",author:"",keywords:"",creator:""};g.__private__.getDocumentProperty=function(K){if(Object.keys(tr).indexOf(K)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return tr[K]},g.__private__.getDocumentProperties=function(){return tr},g.__private__.setDocumentProperties=g.setProperties=g.setDocumentProperties=function(K){for(var ke in tr)tr.hasOwnProperty(ke)&&K[ke]&&(tr[ke]=K[ke]);return this},g.__private__.setDocumentProperty=function(K,ke){if(Object.keys(tr).indexOf(K)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return tr[K]=ke};var Jt,Kt,ar,vr,rr,ft={},br={},yr=[],gr={},ot={},Lt={},ir={},Mt=null,Ge=0,At=[],ur=new iF(g),Dr=e.hotfixes||[],jr={},Xt={},Wr=[],cr=function K(ke,$e,it,pt,$t,lr){if(!(this instanceof K))return new K(ke,$e,it,pt,$t,lr);isNaN(ke)&&(ke=1),isNaN($e)&&($e=0),isNaN(it)&&(it=0),isNaN(pt)&&(pt=1),isNaN($t)&&($t=0),isNaN(lr)&&(lr=0),this._matrix=[ke,$e,it,pt,$t,lr]};Object.defineProperty(cr.prototype,"sx",{get:function(){return this._matrix[0]},set:function(K){this._matrix[0]=K}}),Object.defineProperty(cr.prototype,"shy",{get:function(){return this._matrix[1]},set:function(K){this._matrix[1]=K}}),Object.defineProperty(cr.prototype,"shx",{get:function(){return this._matrix[2]},set:function(K){this._matrix[2]=K}}),Object.defineProperty(cr.prototype,"sy",{get:function(){return this._matrix[3]},set:function(K){this._matrix[3]=K}}),Object.defineProperty(cr.prototype,"tx",{get:function(){return this._matrix[4]},set:function(K){this._matrix[4]=K}}),Object.defineProperty(cr.prototype,"ty",{get:function(){return this._matrix[5]},set:function(K){this._matrix[5]=K}}),Object.defineProperty(cr.prototype,"a",{get:function(){return this._matrix[0]},set:function(K){this._matrix[0]=K}}),Object.defineProperty(cr.prototype,"b",{get:function(){return this._matrix[1]},set:function(K){this._matrix[1]=K}}),Object.defineProperty(cr.prototype,"c",{get:function(){return this._matrix[2]},set:function(K){this._matrix[2]=K}}),Object.defineProperty(cr.prototype,"d",{get:function(){return this._matrix[3]},set:function(K){this._matrix[3]=K}}),Object.defineProperty(cr.prototype,"e",{get:function(){return this._matrix[4]},set:function(K){this._matrix[4]=K}}),Object.defineProperty(cr.prototype,"f",{get:function(){return this._matrix[5]},set:function(K){this._matrix[5]=K}}),Object.defineProperty(cr.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(cr.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(cr.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(cr.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),cr.prototype.join=function(K){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(U).join(K)},cr.prototype.multiply=function(K){var ke=K.sx*this.sx+K.shy*this.shx,$e=K.sx*this.shy+K.shy*this.sy,it=K.shx*this.sx+K.sy*this.shx,pt=K.shx*this.shy+K.sy*this.sy,$t=K.tx*this.sx+K.ty*this.shx+this.tx,lr=K.tx*this.shy+K.ty*this.sy+this.ty;return new cr(ke,$e,it,pt,$t,lr)},cr.prototype.decompose=function(){var K=this.sx,ke=this.shy,$e=this.shx,it=this.sy,pt=this.tx,$t=this.ty,lr=Math.sqrt(K*K+ke*ke),zr=(K/=lr)*$e+(ke/=lr)*it;$e-=K*zr,it-=ke*zr;var Ar=Math.sqrt($e*$e+it*it);return zr/=Ar,K*(it/=Ar)<ke*($e/=Ar)&&(K=-K,ke=-ke,zr=-zr,lr=-lr),{scale:new cr(lr,0,0,Ar,0,0),translate:new cr(1,0,0,1,pt,$t),rotate:new cr(K,ke,-ke,K,0,0),skew:new cr(1,0,zr,1,0,0)}},cr.prototype.toString=function(K){return this.join(" ")},cr.prototype.inversed=function(){var K=this.sx,ke=this.shy,$e=this.shx,it=this.sy,pt=this.tx,$t=this.ty,lr=1/(K*it-ke*$e),zr=it*lr,Ar=-ke*lr,kn=-$e*lr,qr=K*lr;return new cr(zr,Ar,kn,qr,-zr*pt-kn*$t,-Ar*pt-qr*$t)},cr.prototype.applyToPoint=function(K){var ke=K.x*this.sx+K.y*this.shx+this.tx,$e=K.x*this.shy+K.y*this.sy+this.ty;return new cs(ke,$e)},cr.prototype.applyToRectangle=function(K){var ke=this.applyToPoint(K),$e=this.applyToPoint(new cs(K.x+K.w,K.y+K.h));return new Rl(ke.x,ke.y,$e.x-ke.x,$e.y-ke.y)},cr.prototype.clone=function(){var K=this.sx,ke=this.shy,$e=this.shx,it=this.sy,pt=this.tx,$t=this.ty;return new cr(K,ke,$e,it,pt,$t)},g.Matrix=cr;var pr=g.matrixMult=function(K,ke){return ke.multiply(K)},Rr=new cr(1,0,0,1,0,0);g.unitMatrix=g.identityMatrix=Rr;var Ir=function(K,ke){if(!ot[K]){var $e=(ke instanceof sm?"Sh":"P")+(Object.keys(gr).length+1).toString(10);ke.id=$e,ot[K]=$e,gr[$e]=ke,ur.publish("addPattern",ke)}};g.ShadingPattern=sm,g.TilingPattern=N1,g.addShadingPattern=function(K,ke){return L("addShadingPattern()"),Ir(K,ke),this},g.beginTilingPattern=function(K){L("beginTilingPattern()"),Vc(K.boundingBox[0],K.boundingBox[1],K.boundingBox[2]-K.boundingBox[0],K.boundingBox[3]-K.boundingBox[1],K.matrix)},g.endTilingPattern=function(K,ke){L("endTilingPattern()"),ke.stream=De[re].join(`
`),Ir(K,ke),ur.publish("endTilingPattern",ke),Wr.pop().restore()};var Nn,Mr=g.__private__.newObject=function(){var K=Gr();return Ne(K,!0),K},Gr=g.__private__.newObjectDeferred=function(){return Y++,_e[Y]=function(){return ne},Y},Ne=function(K,ke){return ke=typeof ke=="boolean"&&ke,_e[K]=ne,ke&&ge(K+" 0 obj"),K},Me=g.__private__.newAdditionalObject=function(){var K={objId:Gr(),content:""};return je.push(K),K},Re=Gr(),Ce=Gr(),Ue=g.__private__.decodeColorString=function(K){var ke=K.split(" ");if(ke.length!==2||ke[1]!=="g"&&ke[1]!=="G")ke.length!==5||ke[4]!=="k"&&ke[4]!=="K"||(ke=[(1-ke[0])*(1-ke[3]),(1-ke[1])*(1-ke[3]),(1-ke[2])*(1-ke[3]),"r"]);else{var $e=parseFloat(ke[0]);ke=[$e,$e,$e,"r"]}for(var it="#",pt=0;pt<3;pt++)it+=("0"+Math.floor(255*parseFloat(ke[pt])).toString(16)).slice(-2);return it},de=g.__private__.encodeColorString=function(K){var ke;typeof K=="string"&&(K={ch1:K});var $e=K.ch1,it=K.ch2,pt=K.ch3,$t=K.ch4,lr=K.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof $e=="string"&&$e.charAt(0)!=="#"){var zr=new XK($e);if(zr.ok)$e=zr.toHex();else if(!/^\d*\.?\d*$/.test($e))throw new Error('Invalid color "'+$e+'" passed to jsPDF.encodeColorString.')}if(typeof $e=="string"&&/^#[0-9A-Fa-f]{3}$/.test($e)&&($e="#"+$e[1]+$e[1]+$e[2]+$e[2]+$e[3]+$e[3]),typeof $e=="string"&&/^#[0-9A-Fa-f]{6}$/.test($e)){var Ar=parseInt($e.substr(1),16);$e=Ar>>16&255,it=Ar>>8&255,pt=255&Ar}if(it===void 0||$t===void 0&&$e===it&&it===pt)ke=typeof $e=="string"?$e+" "+lr[0]:K.precision===2?H($e/255)+" "+lr[0]:G($e/255)+" "+lr[0];else if($t===void 0||Za($t)==="object"){if($t&&!isNaN($t.a)&&$t.a===0)return["1.","1.","1.",lr[1]].join(" ");ke=typeof $e=="string"?[$e,it,pt,lr[1]].join(" "):K.precision===2?[H($e/255),H(it/255),H(pt/255),lr[1]].join(" "):[G($e/255),G(it/255),G(pt/255),lr[1]].join(" ")}else ke=typeof $e=="string"?[$e,it,pt,$t,lr[2]].join(" "):K.precision===2?[H($e),H(it),H(pt),H($t),lr[2]].join(" "):[G($e),G(it),G(pt),G($t),lr[2]].join(" ");return ke},qe=g.__private__.getFilters=function(){return o},et=g.__private__.putStream=function(K){var ke=(K=K||{}).data||"",$e=K.filters||qe(),it=K.alreadyAppliedFilters||[],pt=K.addLength1||!1,$t=ke.length,lr=K.objectId,zr=function(Xs){return Xs};if(u!==null&&lr===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");u!==null&&(zr=Da.encryptor(lr,0));var Ar={};$e===!0&&($e=["FlateEncode"]);var kn=K.additionalKeyValues||[],qr=(Ar=sn.API.processDataByFilters!==void 0?sn.API.processDataByFilters(ke,$e):{data:ke,reverseChain:[]}).reverseChain+(Array.isArray(it)?it.join(" "):it.toString());if(Ar.data.length!==0&&(kn.push({key:"Length",value:Ar.data.length}),pt===!0&&kn.push({key:"Length1",value:$t})),qr.length!=0)if(qr.split("/").length-1==1)kn.push({key:"Filter",value:qr});else{kn.push({key:"Filter",value:"["+qr+"]"});for(var oa=0;oa<kn.length;oa+=1)if(kn[oa].key==="DecodeParms"){for(var Ca=[],Cn=0;Cn<Ar.reverseChain.split("/").length-1;Cn+=1)Ca.push("null");Ca.push(kn[oa].value),kn[oa].value="["+Ca.join(" ")+"]"}}ge("<<");for(var Er=0;Er<kn.length;Er++)ge("/"+kn[Er].key+" "+kn[Er].value);ge(">>"),Ar.data.length!==0&&(ge("stream"),ge(zr(Ar.data)),ge("endstream"))},tt=g.__private__.putPage=function(K){var ke=K.number,$e=K.data,it=K.objId,pt=K.contentsObjId;Ne(it,!0),ge("<</Type /Page"),ge("/Parent "+K.rootDictionaryObjId+" 0 R"),ge("/Resources "+K.resourceDictionaryObjId+" 0 R"),ge("/MediaBox ["+parseFloat(U(K.mediaBox.bottomLeftX))+" "+parseFloat(U(K.mediaBox.bottomLeftY))+" "+U(K.mediaBox.topRightX)+" "+U(K.mediaBox.topRightY)+"]"),K.cropBox!==null&&ge("/CropBox ["+U(K.cropBox.bottomLeftX)+" "+U(K.cropBox.bottomLeftY)+" "+U(K.cropBox.topRightX)+" "+U(K.cropBox.topRightY)+"]"),K.bleedBox!==null&&ge("/BleedBox ["+U(K.bleedBox.bottomLeftX)+" "+U(K.bleedBox.bottomLeftY)+" "+U(K.bleedBox.topRightX)+" "+U(K.bleedBox.topRightY)+"]"),K.trimBox!==null&&ge("/TrimBox ["+U(K.trimBox.bottomLeftX)+" "+U(K.trimBox.bottomLeftY)+" "+U(K.trimBox.topRightX)+" "+U(K.trimBox.topRightY)+"]"),K.artBox!==null&&ge("/ArtBox ["+U(K.artBox.bottomLeftX)+" "+U(K.artBox.bottomLeftY)+" "+U(K.artBox.topRightX)+" "+U(K.artBox.topRightY)+"]"),typeof K.userUnit=="number"&&K.userUnit!==1&&ge("/UserUnit "+K.userUnit),ur.publish("putPage",{objId:it,pageContext:At[ke],pageNumber:ke,page:$e}),ge("/Contents "+pt+" 0 R"),ge(">>"),ge("endobj");var $t=$e.join(`
`);return P===A&&($t+=`
Q`),Ne(pt,!0),et({data:$t,filters:qe(),objectId:pt}),ge("endobj"),it},Ae=g.__private__.putPages=function(){var K,ke,$e=[];for(K=1;K<=Ge;K++)At[K].objId=Gr(),At[K].contentsObjId=Gr();for(K=1;K<=Ge;K++)$e.push(tt({number:K,data:De[K],objId:At[K].objId,contentsObjId:At[K].contentsObjId,mediaBox:At[K].mediaBox,cropBox:At[K].cropBox,bleedBox:At[K].bleedBox,trimBox:At[K].trimBox,artBox:At[K].artBox,userUnit:At[K].userUnit,rootDictionaryObjId:Re,resourceDictionaryObjId:Ce}));Ne(Re,!0),ge("<</Type /Pages");var it="/Kids [";for(ke=0;ke<Ge;ke++)it+=$e[ke]+" 0 R ";ge(it+"]"),ge("/Count "+Ge),ge(">>"),ge("endobj"),ur.publish("postPutPages")},Xe=function(K){ur.publish("putFont",{font:K,out:ge,newObject:Mr,putStream:et}),K.isAlreadyPutted!==!0&&(K.objectNumber=Mr(),ge("<<"),ge("/Type /Font"),ge("/BaseFont /"+v1(K.postScriptName)),ge("/Subtype /Type1"),typeof K.encoding=="string"&&ge("/Encoding /"+K.encoding),ge("/FirstChar 32"),ge("/LastChar 255"),ge(">>"),ge("endobj"))},mt=function(K){K.objectNumber=Mr();var ke=[];ke.push({key:"Type",value:"/XObject"}),ke.push({key:"Subtype",value:"/Form"}),ke.push({key:"BBox",value:"["+[U(K.x),U(K.y),U(K.x+K.width),U(K.y+K.height)].join(" ")+"]"}),ke.push({key:"Matrix",value:"["+K.matrix.toString()+"]"});var $e=K.pages[1].join(`
`);et({data:$e,additionalKeyValues:ke,objectId:K.objectNumber}),ge("endobj")},Tt=function(K,ke){ke||(ke=21);var $e=Mr(),it=(function(lr,zr){var Ar,kn=[],qr=1/(zr-1);for(Ar=0;Ar<1;Ar+=qr)kn.push(Ar);if(kn.push(1),lr[0].offset!=0){var oa={offset:0,color:lr[0].color};lr.unshift(oa)}if(lr[lr.length-1].offset!=1){var Ca={offset:1,color:lr[lr.length-1].color};lr.push(Ca)}for(var Cn="",Er=0,Xs=0;Xs<kn.length;Xs++){for(Ar=kn[Xs];Ar>lr[Er+1].offset;)Er++;var On=lr[Er].offset,ds=(Ar-On)/(lr[Er+1].offset-On),yi=lr[Er].color,fo=lr[Er+1].color;Cn+=ie(Math.round((1-ds)*yi[0]+ds*fo[0]).toString(16))+ie(Math.round((1-ds)*yi[1]+ds*fo[1]).toString(16))+ie(Math.round((1-ds)*yi[2]+ds*fo[2]).toString(16))}return Cn.trim()})(K.colors,ke),pt=[];pt.push({key:"FunctionType",value:"0"}),pt.push({key:"Domain",value:"[0.0 1.0]"}),pt.push({key:"Size",value:"["+ke+"]"}),pt.push({key:"BitsPerSample",value:"8"}),pt.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),pt.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),et({data:it,additionalKeyValues:pt,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:$e}),ge("endobj"),K.objectNumber=Mr(),ge("<< /ShadingType "+K.type),ge("/ColorSpace /DeviceRGB");var $t="/Coords ["+U(parseFloat(K.coords[0]))+" "+U(parseFloat(K.coords[1]))+" ";K.type===2?$t+=U(parseFloat(K.coords[2]))+" "+U(parseFloat(K.coords[3])):$t+=U(parseFloat(K.coords[2]))+" "+U(parseFloat(K.coords[3]))+" "+U(parseFloat(K.coords[4]))+" "+U(parseFloat(K.coords[5])),ge($t+="]"),K.matrix&&ge("/Matrix ["+K.matrix.toString()+"]"),ge("/Function "+$e+" 0 R"),ge("/Extend [true true]"),ge(">>"),ge("endobj")},Rt=function(K,ke){var $e=Gr(),it=Mr();ke.push({resourcesOid:$e,objectOid:it}),K.objectNumber=it;var pt=[];pt.push({key:"Type",value:"/Pattern"}),pt.push({key:"PatternType",value:"1"}),pt.push({key:"PaintType",value:"1"}),pt.push({key:"TilingType",value:"1"}),pt.push({key:"BBox",value:"["+K.boundingBox.map(U).join(" ")+"]"}),pt.push({key:"XStep",value:U(K.xStep)}),pt.push({key:"YStep",value:U(K.yStep)}),pt.push({key:"Resources",value:$e+" 0 R"}),K.matrix&&pt.push({key:"Matrix",value:"["+K.matrix.toString()+"]"}),et({data:K.stream,additionalKeyValues:pt,objectId:K.objectNumber}),ge("endobj")},Yt=function(K){for(var ke in K.objectNumber=Mr(),ge("<<"),K)switch(ke){case"opacity":ge("/ca "+H(K[ke]));break;case"stroke-opacity":ge("/CA "+H(K[ke]))}ge(">>"),ge("endobj")},or=function(K){Ne(K.resourcesOid,!0),ge("<<"),ge("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),(function(){for(var ke in ge("/Font <<"),ft)ft.hasOwnProperty(ke)&&(x===!1||x===!0&&b.hasOwnProperty(ke))&&ge("/"+ke+" "+ft[ke].objectNumber+" 0 R");ge(">>")})(),(function(){if(Object.keys(gr).length>0){for(var ke in ge("/Shading <<"),gr)gr.hasOwnProperty(ke)&&gr[ke]instanceof sm&&gr[ke].objectNumber>=0&&ge("/"+ke+" "+gr[ke].objectNumber+" 0 R");ur.publish("putShadingPatternDict"),ge(">>")}})(),(function(ke){if(Object.keys(gr).length>0){for(var $e in ge("/Pattern <<"),gr)gr.hasOwnProperty($e)&&gr[$e]instanceof g.TilingPattern&&gr[$e].objectNumber>=0&&gr[$e].objectNumber<ke&&ge("/"+$e+" "+gr[$e].objectNumber+" 0 R");ur.publish("putTilingPatternDict"),ge(">>")}})(K.objectOid),(function(){if(Object.keys(Lt).length>0){var ke;for(ke in ge("/ExtGState <<"),Lt)Lt.hasOwnProperty(ke)&&Lt[ke].objectNumber>=0&&ge("/"+ke+" "+Lt[ke].objectNumber+" 0 R");ur.publish("putGStateDict"),ge(">>")}})(),(function(){for(var ke in ge("/XObject <<"),jr)jr.hasOwnProperty(ke)&&jr[ke].objectNumber>=0&&ge("/"+ke+" "+jr[ke].objectNumber+" 0 R");ur.publish("putXobjectDict"),ge(">>")})(),ge(">>"),ge("endobj")},Cr=function(K){br[K.fontName]=br[K.fontName]||{},br[K.fontName][K.fontStyle]=K.id},Et=function(K,ke,$e,it,pt){var $t={id:"F"+(Object.keys(ft).length+1).toString(10),postScriptName:K,fontName:ke,fontStyle:$e,encoding:it,isStandardFont:pt||!1,metadata:{}};return ur.publish("addFont",{font:$t,instance:this}),ft[$t.id]=$t,Cr($t),$t.id},dn=g.__private__.pdfEscape=g.pdfEscape=function(K,ke){return(function($e,it){var pt,$t,lr,zr,Ar,kn,qr,oa,Ca;if(lr=(it=it||{}).sourceEncoding||"Unicode",Ar=it.outputEncoding,(it.autoencode||Ar)&&ft[Jt].metadata&&ft[Jt].metadata[lr]&&ft[Jt].metadata[lr].encoding&&(zr=ft[Jt].metadata[lr].encoding,!Ar&&ft[Jt].encoding&&(Ar=ft[Jt].encoding),!Ar&&zr.codePages&&(Ar=zr.codePages[0]),typeof Ar=="string"&&(Ar=zr[Ar]),Ar)){for(qr=!1,kn=[],pt=0,$t=$e.length;pt<$t;pt++)(oa=Ar[$e.charCodeAt(pt)])?kn.push(String.fromCharCode(oa)):kn.push($e[pt]),kn[pt].charCodeAt(0)>>8&&(qr=!0);$e=kn.join("")}for(pt=$e.length;qr===void 0&&pt!==0;)$e.charCodeAt(pt-1)>>8&&(qr=!0),pt--;if(!qr)return $e;for(kn=it.noBOM?[]:[254,255],pt=0,$t=$e.length;pt<$t;pt++){if((Ca=(oa=$e.charCodeAt(pt))>>8)>>8)throw new Error("Character at position "+pt+" of string '"+$e+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");kn.push(Ca),kn.push(oa-(Ca<<8))}return String.fromCharCode.apply(void 0,kn)})(K,ke).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Zr=g.__private__.beginPage=function(K){De[++Ge]=[],At[Ge]={objId:0,contentsObjId:0,userUnit:Number(l),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(K[0]),topRightY:Number(K[1])}},Jr(Ge),be(De[re])},ia=function(K,ke){var $e,it,pt;switch(r=ke||r,typeof K=="string"&&($e=S(K.toLowerCase()),Array.isArray($e)&&(it=$e[0],pt=$e[1])),Array.isArray(K)&&(it=K[0]*Kt,pt=K[1]*Kt),isNaN(it)&&(it=a[0],pt=a[1]),(it>14400||pt>14400)&&(ms.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),it=Math.min(14400,it),pt=Math.min(14400,pt)),a=[it,pt],r.substr(0,1)){case"l":pt>it&&(a=[pt,it]);break;case"p":it>pt&&(a=[pt,it])}Zr(a),Ho(uo),ge(ho),Td!==0&&ge(Td+" J"),bs!==0&&ge(bs+" j"),ur.publish("addPage",{pageNumber:Ge})},ta=function(K){K>0&&K<=Ge&&(De.splice(K,1),At.splice(K,1),Ge--,re>Ge&&(re=Ge),this.setPage(re))},Jr=function(K){K>0&&K<=Ge&&(re=K)},Fr=g.__private__.getNumberOfPages=g.getNumberOfPages=function(){return De.length-1},rn=function(K,ke,$e){var it,pt=void 0;return $e=$e||{},K=K!==void 0?K:ft[Jt].fontName,ke=ke!==void 0?ke:ft[Jt].fontStyle,it=K.toLowerCase(),br[it]!==void 0&&br[it][ke]!==void 0?pt=br[it][ke]:br[K]!==void 0&&br[K][ke]!==void 0?pt=br[K][ke]:$e.disableWarning===!1&&ms.warn("Unable to look up font label for font '"+K+"', '"+ke+"'. Refer to getFontList() for available fonts."),pt||$e.noFallback||(pt=br.times[ke])==null&&(pt=br.times.normal),pt},ga=g.__private__.putInfo=function(){var K=Mr(),ke=function(it){return it};for(var $e in u!==null&&(ke=Da.encryptor(K,0)),ge("<<"),ge("/Producer ("+dn(ke("jsPDF "+sn.version))+")"),tr)tr.hasOwnProperty($e)&&tr[$e]&&ge("/"+$e.substr(0,1).toUpperCase()+$e.substr(1)+" ("+dn(ke(tr[$e]))+")");ge("/CreationDate ("+dn(ke(se))+")"),ge(">>"),ge("endobj")},Rs=g.__private__.putCatalog=function(K){var ke=(K=K||{}).rootDictionaryObjId||Re;switch(Mr(),ge("<<"),ge("/Type /Catalog"),ge("/Pages "+ke+" 0 R"),ct||(ct="fullwidth"),ct){case"fullwidth":ge("/OpenAction [3 0 R /FitH null]");break;case"fullheight":ge("/OpenAction [3 0 R /FitV null]");break;case"fullpage":ge("/OpenAction [3 0 R /Fit]");break;case"original":ge("/OpenAction [3 0 R /XYZ null null 1]");break;default:var $e=""+ct;$e.substr($e.length-1)==="%"&&(ct=parseInt(ct)/100),typeof ct=="number"&&ge("/OpenAction [3 0 R /XYZ null null "+H(ct)+"]")}switch(hr||(hr="continuous"),hr){case"continuous":ge("/PageLayout /OneColumn");break;case"single":ge("/PageLayout /SinglePage");break;case"two":case"twoleft":ge("/PageLayout /TwoColumnLeft");break;case"tworight":ge("/PageLayout /TwoColumnRight")}Ft&&ge("/PageMode /"+Ft),ur.publish("putCatalog"),ge(">>"),ge("endobj")},ra=g.__private__.putTrailer=function(){ge("trailer"),ge("<<"),ge("/Size "+(Y+1)),ge("/Root "+Y+" 0 R"),ge("/Info "+(Y-1)+" 0 R"),u!==null&&ge("/Encrypt "+Da.oid+" 0 R"),ge("/ID [ <"+ue+"> <"+ue+"> ]"),ge(">>")},Gn=g.__private__.putHeader=function(){ge("%PDF-"+k),ge("%")},Gi=g.__private__.putXRef=function(){var K="0000000000";ge("xref"),ge("0 "+(Y+1)),ge("0000000000 65535 f ");for(var ke=1;ke<=Y;ke++)typeof _e[ke]=="function"?ge((K+_e[ke]()).slice(-10)+" 00000 n "):_e[ke]!==void 0?ge((K+_e[ke]).slice(-10)+" 00000 n "):ge("0000000000 00000 n ")},ml=g.__private__.buildDocument=function(){var K;Y=0,ne=0,me=[],_e=[],je=[],Re=Gr(),Ce=Gr(),be(me),ur.publish("buildDocument"),Gn(),Ae(),(function(){ur.publish("putAdditionalObjects");for(var $e=0;$e<je.length;$e++){var it=je[$e];Ne(it.objId,!0),ge(it.content),ge("endobj")}ur.publish("postPutAdditionalObjects")})(),K=[],(function(){for(var $e in ft)ft.hasOwnProperty($e)&&(x===!1||x===!0&&b.hasOwnProperty($e))&&Xe(ft[$e])})(),(function(){var $e;for($e in Lt)Lt.hasOwnProperty($e)&&Yt(Lt[$e])})(),(function(){for(var $e in jr)jr.hasOwnProperty($e)&&mt(jr[$e])})(),(function($e){var it;for(it in gr)gr.hasOwnProperty(it)&&(gr[it]instanceof sm?Tt(gr[it]):gr[it]instanceof N1&&Rt(gr[it],$e))})(K),ur.publish("putResources"),K.forEach(or),or({resourcesOid:Ce,objectOid:Number.MAX_SAFE_INTEGER}),ur.publish("postPutResources"),u!==null&&(Da.oid=Mr(),ge("<<"),ge("/Filter /Standard"),ge("/V "+Da.v),ge("/R "+Da.r),ge("/U <"+Da.toHexString(Da.U)+">"),ge("/O <"+Da.toHexString(Da.O)+">"),ge("/P "+Da.P),ge(">>"),ge("endobj")),ga(),Rs();var ke=ne;return Gi(),ra(),ge("startxref"),ge(""+ke),ge("%%EOF"),be(De[re]),me.join(`
`)},ya=g.__private__.getBlob=function(K){return new Blob([Ye(K)],{type:"application/pdf"})},Ns=g.output=g.__private__.output=(Nn=function(K,ke){switch(typeof(ke=ke||{})=="string"?ke={filename:ke}:ke.filename=ke.filename||"generated.pdf",K){case void 0:return ml();case"save":g.save(ke.filename);break;case"arraybuffer":return Ye(ml());case"blob":return ya(ml());case"bloburi":case"bloburl":if(Rn.URL!==void 0&&typeof Rn.URL.createObjectURL=="function")return Rn.URL&&Rn.URL.createObjectURL(ya(ml()))||void 0;ms.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var $e="",it=ml();try{$e=nF(it)}catch{$e=nF(unescape(encodeURIComponent(it)))}return"data:application/pdf;filename="+ke.filename+";base64,"+$e;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Rn)==="[object Window]"){var pt="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",$t=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';ke.pdfObjectUrl&&(pt=ke.pdfObjectUrl,$t="");var lr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+pt+'"'+$t+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(ke)+");<\/script></body></html>",zr=Rn.open();return zr!==null&&zr.document.write(lr),zr}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Rn)==="[object Window]"){var Ar='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(ke.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+ke.filename+'" width="500px" height="400px" /></body></html>',kn=Rn.open();if(kn!==null){kn.document.write(Ar);var qr=this;kn.document.documentElement.querySelector("#pdfViewer").onload=function(){kn.document.title=ke.filename,kn.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(qr.output("bloburl"))}}return kn}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Rn)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var oa='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",ke)+'"></iframe></body></html>',Ca=Rn.open();if(Ca!==null&&(Ca.document.write(oa),Ca.document.title=ke.filename),Ca||typeof safari>"u")return Ca;break;case"datauri":case"dataurl":return Rn.document.location.href=this.output("datauristring",ke);default:return null}},Nn.foo=function(){try{return Nn.apply(this,arguments)}catch($e){var K=$e.stack||"";~K.indexOf(" at ")&&(K=K.split(" at ")[1]);var ke="Error in function "+K.split(`
`)[0].split("<")[0]+": "+$e.message;if(!Rn.console)throw new Error(ke);Rn.console.error(ke,$e),Rn.alert&&alert(ke)}},Nn.foo.bar=Nn,Nn.foo),na=function(K){return Array.isArray(Dr)===!0&&Dr.indexOf(K)>-1};switch(n){case"pt":Kt=1;break;case"mm":Kt=72/25.4;break;case"cm":Kt=72/2.54;break;case"in":Kt=72;break;case"px":Kt=na("px_scaling")==1?.75:96/72;break;case"pc":case"em":Kt=12;break;case"ex":Kt=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);Kt=n}var Da=null;xe(),pe();var Mn=g.__private__.getPageInfo=g.getPageInfo=function(K){if(isNaN(K)||K%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:At[K].objId,pageNumber:K,pageContext:At[K]}},ps=g.__private__.getPageInfoByObjId=function(K){if(isNaN(K)||K%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var ke in At)if(At[ke].objId===K)break;return Mn(ke)},yt=g.__private__.getCurrentPageInfo=g.getCurrentPageInfo=function(){return{objId:At[re].objId,pageNumber:re,pageContext:At[re]}};g.addPage=function(){return ia.apply(this,arguments),this},g.setPage=function(){return Jr.apply(this,arguments),be.call(this,De[re]),this},g.insertPage=function(K){return this.addPage(),this.movePage(re,K),this},g.movePage=function(K,ke){var $e,it;if(K>ke){$e=De[K],it=At[K];for(var pt=K;pt>ke;pt--)De[pt]=De[pt-1],At[pt]=At[pt-1];De[ke]=$e,At[ke]=it,this.setPage(ke)}else if(K<ke){$e=De[K],it=At[K];for(var $t=K;$t<ke;$t++)De[$t]=De[$t+1],At[$t]=At[$t+1];De[ke]=$e,At[ke]=it,this.setPage(ke)}return this},g.deletePage=function(){return ta.apply(this,arguments),this},g.__private__.text=g.text=function(K,ke,$e,it,pt){var $t,lr,zr,Ar,kn,qr,oa,Ca,Cn,Er=(it=it||{}).scope||this;if(typeof K=="number"&&typeof ke=="number"&&(typeof $e=="string"||Array.isArray($e))){var Xs=$e;$e=ke,ke=K,K=Xs}if(arguments[3]instanceof cr==0?(zr=arguments[4],Ar=arguments[5],Za(oa=arguments[3])==="object"&&oa!==null||(typeof zr=="string"&&(Ar=zr,zr=null),typeof oa=="string"&&(Ar=oa,oa=null),typeof oa=="number"&&(zr=oa,oa=null),it={flags:oa,angle:zr,align:Ar})):(L("The transform parameter of text() with a Matrix value"),Cn=pt),isNaN(ke)||isNaN($e)||K==null)throw new Error("Invalid arguments passed to jsPDF.text");if(K.length===0)return Er;var On,ds="",yi=typeof it.lineHeightFactor=="number"?it.lineHeightFactor:za,fo=Er.internal.scaleFactor;function Po(Vt){return Vt=Vt.split("	").join(Array(it.TabLen||9).join(" ")),dn(Vt,oa)}function Gc(Vt){for(var Wt,qt=Vt.concat(),on=[],gn=qt.length;gn--;)typeof(Wt=qt.shift())=="string"?on.push(Wt):Array.isArray(Vt)&&(Wt.length===1||Wt[1]===void 0&&Wt[2]===void 0)?on.push(Wt[0]):on.push([Wt[0],Wt[1],Wt[2]]);return on}function Kc(Vt,Wt){var qt;if(typeof Vt=="string")qt=Wt(Vt)[0];else if(Array.isArray(Vt)){for(var on,gn,es=Vt.concat(),_i=[],ri=es.length;ri--;)typeof(on=es.shift())=="string"?_i.push(Wt(on)[0]):Array.isArray(on)&&typeof on[0]=="string"&&(gn=Wt(on[0],on[1],on[2]),_i.push([gn[0],gn[1],gn[2]]));qt=_i}return qt}var $o=!1,Vo=!0;if(typeof K=="string")$o=!0;else if(Array.isArray(K)){var Xc=K.concat();lr=[];for(var Yc,vs=Xc.length;vs--;)(typeof(Yc=Xc.shift())!="string"||Array.isArray(Yc)&&typeof Yc[0]!="string")&&(Vo=!1);$o=Vo}if($o===!1)throw new Error('Type of text must be string or Array. "'+K+'" is not recognized.');typeof K=="string"&&(K=K.match(/[\r?\n]/)?K.split(/\r\n|\r|\n/g):[K]);var Bl=Je/Er.internal.scaleFactor,Qc=Bl*(yi-1);switch(it.baseline){case"bottom":$e-=Qc;break;case"top":$e+=Bl-Qc;break;case"hanging":$e+=Bl-2*Qc;break;case"middle":$e+=Bl/2-Qc}if((qr=it.maxWidth||0)>0&&(typeof K=="string"?K=Er.splitTextToSize(K,qr):Object.prototype.toString.call(K)==="[object Array]"&&(K=K.reduce(function(Vt,Wt){return Vt.concat(Er.splitTextToSize(Wt,qr))},[]))),$t={text:K,x:ke,y:$e,options:it,mutex:{pdfEscape:dn,activeFontKey:Jt,fonts:ft,activeFontSize:Je}},ur.publish("preProcessText",$t),K=$t.text,zr=(it=$t.options).angle,Cn instanceof cr==0&&zr&&typeof zr=="number"){zr*=Math.PI/180,it.rotationDirection===0&&(zr=-zr),P===A&&(zr=-zr);var Ul=Math.cos(zr),zl=Math.sin(zr);Cn=new cr(Ul,zl,-zl,Ul,0,0)}else zr&&zr instanceof cr&&(Cn=zr);P!==A||Cn||(Cn=Rr),(kn=it.charSpace||Oo)!==void 0&&(ds+=U(Z(kn))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Ca=it.horizontalScale)!==void 0&&(ds+=U(100*Ca)+` Tz
`),it.lang;var Aa=-1,Wo=it.renderingMode!==void 0?it.renderingMode:it.stroke,wi=Er.internal.getCurrentPageInfo().pageContext;switch(Wo){case 0:case!1:case"fill":Aa=0;break;case 1:case!0:case"stroke":Aa=1;break;case 2:case"fillThenStroke":Aa=2;break;case 3:case"invisible":Aa=3;break;case 4:case"fillAndAddForClipping":Aa=4;break;case 5:case"strokeAndAddPathForClipping":Aa=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Aa=6;break;case 7:case"addToPathForClipping":Aa=7}var mu=wi.usedRenderingMode!==void 0?wi.usedRenderingMode:-1;Aa!==-1?ds+=Aa+` Tr
`:mu!==-1&&(ds+=`0 Tr
`),Aa!==-1&&(wi.usedRenderingMode=Aa),Ar=it.align||"left";var ys,bl=Je*yi,vl=Er.internal.pageSize.getWidth(),a0=ft[Jt];kn=it.charSpace||Oo,qr=it.maxWidth||0,oa=Object.assign({autoencode:!0,noBOM:!0},it.flags);var Go=[],ki=function(Vt){return Er.getStringUnitWidth(Vt,{font:a0,charSpace:kn,fontSize:Je,doKerning:!1})*Je/fo};if(Object.prototype.toString.call(K)==="[object Array]"){var mo;lr=Gc(K),Ar!=="left"&&(ys=lr.map(ki));var Ni,xo=0;if(Ar==="right"){ke-=ys[0],K=[],vs=lr.length;for(var Bn=0;Bn<vs;Bn++)Bn===0?(Ni=hn(ke),mo=da($e)):(Ni=Z(xo-ys[Bn]),mo=-bl),K.push([lr[Bn],Ni,mo]),xo=ys[Bn]}else if(Ar==="center"){ke-=ys[0]/2,K=[],vs=lr.length;for(var Ko=0;Ko<vs;Ko++)Ko===0?(Ni=hn(ke),mo=da($e)):(Ni=Z((xo-ys[Ko])/2),mo=-bl),K.push([lr[Ko],Ni,mo]),xo=ys[Ko]}else if(Ar==="left"){K=[],vs=lr.length;for(var ye=0;ye<vs;ye++)K.push(lr[ye])}else if(Ar==="justify"&&a0.encoding==="Identity-H"){K=[],vs=lr.length,qr=qr!==0?qr:vl;for(var f=0,p=0;p<vs;p++)if(mo=p===0?da($e):-bl,Ni=p===0?hn(ke):f,p<vs-1){var v=Z((qr-ys[p])/(lr[p].split(" ").length-1)),_=lr[p].split(" ");K.push([_[0]+" ",Ni,mo]),f=0;for(var j=1;j<_.length;j++){var E=(ki(_[j-1]+" "+_[j])-ki(_[j]))*fo+v;j==_.length-1?K.push([_[j],E,0]):K.push([_[j]+" ",E,0]),f-=E}}else K.push([lr[p],Ni,mo]);K.push(["",f,0])}else{if(Ar!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(K=[],vs=lr.length,qr=qr!==0?qr:vl,p=0;p<vs;p++){mo=p===0?da($e):-bl,Ni=p===0?hn(ke):0;var D=lr[p].split(" ").length-1,z=D>0?(qr-ys[p])/D:0;p<vs-1?Go.push(U(Z(z))):Go.push(0),K.push([lr[p],Ni,mo])}}}(typeof it.R2L=="boolean"?it.R2L:zt)===!0&&(K=Kc(K,function(Vt,Wt,qt){return[Vt.split("").reverse().join(""),Wt,qt]})),$t={text:K,x:ke,y:$e,options:it,mutex:{pdfEscape:dn,activeFontKey:Jt,fonts:ft,activeFontSize:Je}},ur.publish("postProcessText",$t),K=$t.text,On=$t.mutex.isHex||!1;var X=ft[Jt].encoding;X!=="WinAnsiEncoding"&&X!=="StandardEncoding"||(K=Kc(K,function(Vt,Wt,qt){return[Po(Vt),Wt,qt]})),lr=Gc(K),K=[];for(var oe,we,Oe,He=Array.isArray(lr[0])?1:0,rt="",lt=function(Vt,Wt,qt){var on="";return qt instanceof cr?(qt=typeof it.angle=="number"?pr(qt,new cr(1,0,0,1,Vt,Wt)):pr(new cr(1,0,0,1,Vt,Wt),qt),P===A&&(qt=pr(new cr(1,0,0,-1,0,0),qt)),on=qt.join(" ")+` Tm
`):on=U(Vt)+" "+U(Wt)+` Td
`,on},xt=0;xt<lr.length;xt++){switch(rt="",He){case 1:Oe=(On?"<":"(")+lr[xt][0]+(On?">":")"),oe=parseFloat(lr[xt][1]),we=parseFloat(lr[xt][2]);break;case 0:Oe=(On?"<":"(")+lr[xt]+(On?">":")"),oe=hn(ke),we=da($e)}Go!==void 0&&Go[xt]!==void 0&&(rt=Go[xt]+` Tw
`),xt===0?K.push(rt+lt(oe,we,Cn)+Oe):He===0?K.push(rt+Oe):He===1&&K.push(rt+lt(oe,we,Cn)+Oe)}K=He===0?K.join(` Tj
T* `):K.join(` Tj
`),K+=` Tj
`;var St=`BT
/`;return St+=Jt+" "+Je+` Tf
`,St+=U(Je*yi)+` TL
`,St+=Ml+`
`,St+=ds,St+=K,ge(St+="ET"),b[Jt]=!0,Er};var fe=g.__private__.clip=g.clip=function(K){return ge(K==="evenodd"?"W*":"W"),this};g.clipEvenOdd=function(){return fe("evenodd")},g.__private__.discardPath=g.discardPath=function(){return ge("n"),this};var vt=g.__private__.isValidStyle=function(K){var ke=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(K)!==-1&&(ke=!0),ke};g.__private__.setDefaultPathOperation=g.setDefaultPathOperation=function(K){return vt(K)&&(c=K),this};var wr=g.__private__.getStyle=g.getStyle=function(K){var ke=c;switch(K){case"D":case"S":ke="S";break;case"F":ke="f";break;case"FD":case"DF":ke="B";break;case"f":case"f*":case"B":case"B*":ke=K}return ke},Or=g.close=function(){return ge("h"),this};g.stroke=function(){return ge("S"),this},g.fill=function(K){return nn("f",K),this},g.fillEvenOdd=function(K){return nn("f*",K),this},g.fillStroke=function(K){return nn("B",K),this},g.fillStrokeEvenOdd=function(K){return nn("B*",K),this};var nn=function(K,ke){Za(ke)==="object"?Tr(ke,K):ge(K)},zn=function(K){K===null||P===A&&K===void 0||(K=wr(K),ge(K))};function Vn(K,ke,$e,it,pt){var $t=new N1(ke||this.boundingBox,$e||this.xStep,it||this.yStep,this.gState,pt||this.matrix);$t.stream=this.stream;var lr=K+"$$"+this.cloneIndex+++"$$";return Ir(lr,$t),$t}var Tr=function(K,ke){var $e=ot[K.key],it=gr[$e];if(it instanceof sm)ge("q"),ge(_n(ke)),it.gState&&g.setGState(it.gState),ge(K.matrix.toString()+" cm"),ge("/"+$e+" sh"),ge("Q");else if(it instanceof N1){var pt=new cr(1,0,0,-1,0,mc());K.matrix&&(pt=pt.multiply(K.matrix||Rr),$e=Vn.call(it,K.key,K.boundingBox,K.xStep,K.yStep,pt).id),ge("q"),ge("/Pattern cs"),ge("/"+$e+" scn"),it.gState&&g.setGState(it.gState),ge(ke),ge("Q")}},_n=function(K){switch(K){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Ki=g.moveTo=function(K,ke){return ge(U(Z(K))+" "+U(te(ke))+" m"),this},bi=g.lineTo=function(K,ke){return ge(U(Z(K))+" "+U(te(ke))+" l"),this},gs=g.curveTo=function(K,ke,$e,it,pt,$t){return ge([U(Z(K)),U(te(ke)),U(Z($e)),U(te(it)),U(Z(pt)),U(te($t)),"c"].join(" ")),this};g.__private__.line=g.line=function(K,ke,$e,it,pt){if(isNaN(K)||isNaN(ke)||isNaN($e)||isNaN(it)||!vt(pt))throw new Error("Invalid arguments passed to jsPDF.line");return P===O?this.lines([[$e-K,it-ke]],K,ke,[1,1],pt||"S"):this.lines([[$e-K,it-ke]],K,ke,[1,1]).stroke()},g.__private__.lines=g.lines=function(K,ke,$e,it,pt,$t){var lr,zr,Ar,kn,qr,oa,Ca,Cn,Er,Xs,On,ds;if(typeof K=="number"&&(ds=$e,$e=ke,ke=K,K=ds),it=it||[1,1],$t=$t||!1,isNaN(ke)||isNaN($e)||!Array.isArray(K)||!Array.isArray(it)||!vt(pt)||typeof $t!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Ki(ke,$e),lr=it[0],zr=it[1],kn=K.length,Xs=ke,On=$e,Ar=0;Ar<kn;Ar++)(qr=K[Ar]).length===2?(Xs=qr[0]*lr+Xs,On=qr[1]*zr+On,bi(Xs,On)):(oa=qr[0]*lr+Xs,Ca=qr[1]*zr+On,Cn=qr[2]*lr+Xs,Er=qr[3]*zr+On,Xs=qr[4]*lr+Xs,On=qr[5]*zr+On,gs(oa,Ca,Cn,Er,Xs,On));return $t&&Or(),zn(pt),this},g.path=function(K){for(var ke=0;ke<K.length;ke++){var $e=K[ke],it=$e.c;switch($e.op){case"m":Ki(it[0],it[1]);break;case"l":bi(it[0],it[1]);break;case"c":gs.apply(this,it);break;case"h":Or()}}return this},g.__private__.rect=g.rect=function(K,ke,$e,it,pt){if(isNaN(K)||isNaN(ke)||isNaN($e)||isNaN(it)||!vt(pt))throw new Error("Invalid arguments passed to jsPDF.rect");return P===O&&(it=-it),ge([U(Z(K)),U(te(ke)),U(Z($e)),U(Z(it)),"re"].join(" ")),zn(pt),this},g.__private__.triangle=g.triangle=function(K,ke,$e,it,pt,$t,lr){if(isNaN(K)||isNaN(ke)||isNaN($e)||isNaN(it)||isNaN(pt)||isNaN($t)||!vt(lr))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[$e-K,it-ke],[pt-$e,$t-it],[K-pt,ke-$t]],K,ke,[1,1],lr,!0),this},g.__private__.roundedRect=g.roundedRect=function(K,ke,$e,it,pt,$t,lr){if(isNaN(K)||isNaN(ke)||isNaN($e)||isNaN(it)||isNaN(pt)||isNaN($t)||!vt(lr))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var zr=4/3*(Math.SQRT2-1);return pt=Math.min(pt,.5*$e),$t=Math.min($t,.5*it),this.lines([[$e-2*pt,0],[pt*zr,0,pt,$t-$t*zr,pt,$t],[0,it-2*$t],[0,$t*zr,-pt*zr,$t,-pt,$t],[2*pt-$e,0],[-pt*zr,0,-pt,-$t*zr,-pt,-$t],[0,2*$t-it],[0,-$t*zr,pt*zr,-$t,pt,-$t]],K+pt,ke,[1,1],lr,!0),this},g.__private__.ellipse=g.ellipse=function(K,ke,$e,it,pt){if(isNaN(K)||isNaN(ke)||isNaN($e)||isNaN(it)||!vt(pt))throw new Error("Invalid arguments passed to jsPDF.ellipse");var $t=4/3*(Math.SQRT2-1)*$e,lr=4/3*(Math.SQRT2-1)*it;return Ki(K+$e,ke),gs(K+$e,ke-lr,K+$t,ke-it,K,ke-it),gs(K-$t,ke-it,K-$e,ke-lr,K-$e,ke),gs(K-$e,ke+lr,K-$t,ke+it,K,ke+it),gs(K+$t,ke+it,K+$e,ke+lr,K+$e,ke),zn(pt),this},g.__private__.circle=g.circle=function(K,ke,$e,it){if(isNaN(K)||isNaN(ke)||isNaN($e)||!vt(it))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(K,ke,$e,$e,it)},g.setFont=function(K,ke,$e){return $e&&(ke=R(ke,$e)),Jt=rn(K,ke,{disableWarning:!1}),this};var aa=g.__private__.getFont=g.getFont=function(){return ft[rn.apply(g,arguments)]};g.__private__.getFontList=g.getFontList=function(){var K,ke,$e={};for(K in br)if(br.hasOwnProperty(K))for(ke in $e[K]=[],br[K])br[K].hasOwnProperty(ke)&&$e[K].push(ke);return $e},g.addFont=function(K,ke,$e,it,pt){var $t=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&$t.indexOf(arguments[3])!==-1?pt=arguments[3]:arguments[3]&&$t.indexOf(arguments[3])==-1&&($e=R($e,it)),Et.call(this,K,ke,$e,pt=pt||"Identity-H")};var za,uo=e.lineWidth||.200025,Pr=g.__private__.getLineWidth=g.getLineWidth=function(){return uo},Ho=g.__private__.setLineWidth=g.setLineWidth=function(K){return uo=K,ge(U(Z(K))+" w"),this};g.__private__.setLineDash=sn.API.setLineDash=sn.API.setLineDashPattern=function(K,ke){if(K=K||[],ke=ke||0,isNaN(ke)||!Array.isArray(K))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return K=K.map(function($e){return U(Z($e))}).join(" "),ke=U(Z(ke)),ge("["+K+"] "+ke+" d"),this};var xl=g.__private__.getLineHeight=g.getLineHeight=function(){return Je*za};g.__private__.getLineHeight=g.getLineHeight=function(){return Je*za};var un=g.__private__.setLineHeightFactor=g.setLineHeightFactor=function(K){return typeof(K=K||1.15)=="number"&&(za=K),this},vh=g.__private__.getLineHeightFactor=g.getLineHeightFactor=function(){return za};un(e.lineHeight);var hn=g.__private__.getHorizontalCoordinate=function(K){return Z(K)},da=g.__private__.getVerticalCoordinate=function(K){return P===A?K:At[re].mediaBox.topRightY-At[re].mediaBox.bottomLeftY-Z(K)},n0=g.__private__.getHorizontalCoordinateString=g.getHorizontalCoordinateString=function(K){return U(hn(K))},hc=g.__private__.getVerticalCoordinateString=g.getVerticalCoordinateString=function(K){return U(da(K))},ho=e.strokeColor||"0 G";g.__private__.getStrokeColor=g.getDrawColor=function(){return Ue(ho)},g.__private__.setStrokeColor=g.setDrawColor=function(K,ke,$e,it){return ho=de({ch1:K,ch2:ke,ch3:$e,ch4:it,pdfColorType:"draw",precision:2}),ge(ho),this};var To=e.fillColor||"0 g";g.__private__.getFillColor=g.getFillColor=function(){return Ue(To)},g.__private__.setFillColor=g.setFillColor=function(K,ke,$e,it){return To=de({ch1:K,ch2:ke,ch3:$e,ch4:it,pdfColorType:"fill",precision:2}),ge(To),this};var Ml=e.textColor||"0 g",pl=g.__private__.getTextColor=g.getTextColor=function(){return Ue(Ml)};g.__private__.setTextColor=g.setTextColor=function(K,ke,$e,it){return Ml=de({ch1:K,ch2:ke,ch3:$e,ch4:it,pdfColorType:"text",precision:3}),this};var Oo=e.charSpace,Ll=g.__private__.getCharSpace=g.getCharSpace=function(){return parseFloat(Oo||0)};g.__private__.setCharSpace=g.setCharSpace=function(K){if(isNaN(K))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Oo=K,this};var Td=0;g.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},g.__private__.setLineCap=g.setLineCap=function(K){var ke=g.CapJoinStyles[K];if(ke===void 0)throw new Error("Line cap style of '"+K+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Td=ke,ge(ke+" J"),this};var bs=0;g.__private__.setLineJoin=g.setLineJoin=function(K){var ke=g.CapJoinStyles[K];if(ke===void 0)throw new Error("Line join style of '"+K+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return bs=ke,ge(ke+" j"),this},g.__private__.setLineMiterLimit=g.__private__.setMiterLimit=g.setLineMiterLimit=g.setMiterLimit=function(K){if(K=K||0,isNaN(K))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return ge(U(Z(K))+" M"),this},g.GState=Pk,g.setGState=function(K){(K=typeof K=="string"?Lt[ir[K]]:vi(null,K)).equals(Mt)||(ge("/"+K.id+" gs"),Mt=K)};var vi=function(K,ke){if(!K||!ir[K]){var $e=!1;for(var it in Lt)if(Lt.hasOwnProperty(it)&&Lt[it].equals(ke)){$e=!0;break}if($e)ke=Lt[it];else{var pt="GS"+(Object.keys(Lt).length+1).toString(10);Lt[pt]=ke,ke.id=pt}return K&&(ir[K]=ke.id),ur.publish("addGState",ke),ke}};g.addGState=function(K,ke){return vi(K,ke),this},g.saveGraphicsState=function(){return ge("q"),yr.push({key:Jt,size:Je,color:Ml}),this},g.restoreGraphicsState=function(){ge("Q");var K=yr.pop();return Jt=K.key,Je=K.size,Ml=K.color,Mt=null,this},g.setCurrentTransformationMatrix=function(K){return ge(K.toString()+" cm"),this},g.comment=function(K){return ge("#"+K),this};var cs=function(K,ke){var $e=K||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return $e},set:function($t){isNaN($t)||($e=parseFloat($t))}});var it=ke||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return it},set:function($t){isNaN($t)||(it=parseFloat($t))}});var pt="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return pt},set:function($t){pt=$t.toString()}}),this},Rl=function(K,ke,$e,it){cs.call(this,K,ke),this.type="rect";var pt=$e||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return pt},set:function(lr){isNaN(lr)||(pt=parseFloat(lr))}});var $t=it||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return $t},set:function(lr){isNaN(lr)||($t=parseFloat(lr))}}),this},Od=function(){this.page=Ge,this.currentPage=re,this.pages=De.slice(0),this.pagesContext=At.slice(0),this.x=ar,this.y=vr,this.matrix=rr,this.width=Wc(re),this.height=Xn(re),this.outputDestination=Ee,this.id="",this.objectNumber=-1};Od.prototype.restore=function(){Ge=this.page,re=this.currentPage,At=this.pagesContext,De=this.pages,ar=this.x,vr=this.y,rr=this.matrix,Pd(re,this.width),Fl(re,this.height),Ee=this.outputDestination};var Vc=function(K,ke,$e,it,pt){Wr.push(new Od),Ge=re=0,De=[],ar=K,vr=ke,rr=pt,Zr([$e,it])};for(var fc in g.beginFormObject=function(K,ke,$e,it,pt){return Vc(K,ke,$e,it,pt),this},g.endFormObject=function(K){return(function(ke){if(Xt[ke])Wr.pop().restore();else{var $e=new Od,it="Xo"+(Object.keys(jr).length+1).toString(10);$e.id=it,Xt[ke]=it,jr[it]=$e,ur.publish("addFormObject",$e),Wr.pop().restore()}})(K),this},g.doFormObject=function(K,ke){var $e=jr[Xt[K]];return ge("q"),ge(ke.toString()+" cm"),ge("/"+$e.id+" Do"),ge("Q"),this},g.getFormObject=function(K){var ke=jr[Xt[K]];return{x:ke.x,y:ke.y,width:ke.width,height:ke.height,matrix:ke.matrix}},g.save=function(K,ke){return K=K||"generated.pdf",(ke=ke||{}).returnPromise=ke.returnPromise||!1,ke.returnPromise===!1?(tm(ya(ml()),K),typeof tm.unload=="function"&&Rn.setTimeout&&setTimeout(tm.unload,911),this):new Promise(function($e,it){try{var pt=tm(ya(ml()),K);typeof tm.unload=="function"&&Rn.setTimeout&&setTimeout(tm.unload,911),$e(pt)}catch($t){it($t.message)}})},sn.API)sn.API.hasOwnProperty(fc)&&(fc==="events"&&sn.API.events.length?(function(K,ke){var $e,it,pt;for(pt=ke.length-1;pt!==-1;pt--)$e=ke[pt][0],it=ke[pt][1],K.subscribe.apply(K,[$e].concat(typeof it=="function"?[it]:it))})(ur,sn.API.events):g[fc]=sn.API[fc]);function Wc(K){return At[K].mediaBox.topRightX-At[K].mediaBox.bottomLeftX}function Pd(K,ke){At[K].mediaBox.topRightX=ke+At[K].mediaBox.bottomLeftX}function Xn(K){return At[K].mediaBox.topRightY-At[K].mediaBox.bottomLeftY}function Fl(K,ke){At[K].mediaBox.topRightY=ke+At[K].mediaBox.bottomLeftY}var Id=g.getPageWidth=function(K){return Wc(K=K||re)/Kt},gl=g.setPageWidth=function(K,ke){Pd(K,ke*Kt)},mc=g.getPageHeight=function(K){return Xn(K=K||re)/Kt},Pt=g.setPageHeight=function(K,ke){Fl(K,ke*Kt)};return g.internal={pdfEscape:dn,getStyle:wr,getFont:aa,getFontSize:Ke,getCharSpace:Ll,getTextColor:pl,getLineHeight:xl,getLineHeightFactor:vh,getLineWidth:Pr,write:Qe,getHorizontalCoordinate:hn,getVerticalCoordinate:da,getCoordinateString:n0,getVerticalCoordinateString:hc,collections:{},newObject:Mr,newAdditionalObject:Me,newObjectDeferred:Gr,newObjectDeferredBegin:Ne,getFilters:qe,putStream:et,events:ur,scaleFactor:Kt,pageSize:{getWidth:function(){return Id(re)},setWidth:function(K){gl(re,K)},getHeight:function(){return mc(re)},setHeight:function(K){Pt(re,K)}},encryptionOptions:u,encryption:Da,getEncryptor:function(K){return u!==null?Da.encryptor(K,0):function(ke){return ke}},output:Ns,getNumberOfPages:Fr,pages:De,out:ge,f2:H,f3:G,getPageInfo:Mn,getPageInfoByObjId:ps,getCurrentPageInfo:yt,getPDFVersion:y,Point:cs,Rectangle:Rl,Matrix:cr,hasHotfix:na},Object.defineProperty(g.internal.pageSize,"width",{get:function(){return Id(re)},set:function(K){gl(re,K)},enumerable:!0,configurable:!0}),Object.defineProperty(g.internal.pageSize,"height",{get:function(){return mc(re)},set:function(K){Pt(re,K)},enumerable:!0,configurable:!0}),(function(K){for(var ke=0,$e=at.length;ke<$e;ke++){var it=Et.call(this,K[ke][0],K[ke][1],K[ke][2],at[ke][3],!0);x===!1&&(b[it]=!0);var pt=K[ke][0].split("-");Cr({id:it,fontName:pt[0],fontStyle:pt[1]||""})}ur.publish("addFonts",{fonts:ft,dictionary:br})}).call(g,at),Jt="F1",ia(a,r),ur.publish("initialized"),g}b1.prototype.lsbFirstWord=function(e){return String.fromCharCode(255&e,e>>8&255,e>>16&255,e>>24&255)},b1.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},b1.prototype.hexToBytes=function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(String.fromCharCode(parseInt(e.substr(r,2),16)));return t.join("")},b1.prototype.processOwnerPassword=function(e,t){return o6(i6(t).substr(0,5),e)},b1.prototype.encryptor=function(e,t){var r=i6(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(n){return o6(r,n)}},Pk.prototype.equals=function(e){var t,r="id,objectNumber,equals";if(!e||Za(e)!==Za(this))return!1;var n=0;for(t in this)if(!(r.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;n++}for(t in e)e.hasOwnProperty(t)&&r.indexOf(t)<0&&n--;return n===0},sn.API={events:[]},sn.version="3.0.3";var fi=sn.API,HE=1,gx=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},h1=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},$n=function(e){return e.toFixed(2)},Gh=function(e){return e.toFixed(5)};fi.__acroform__={};var uc=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},oF=function(e){return e*HE},Du=function(e){var t=new JK,r=Yr.internal.getHeight(e)||0,n=Yr.internal.getWidth(e)||0;return t.BBox=[0,0,Number($n(n)),Number($n(r))],t},q7e=fi.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|1<<t},H7e=fi.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&~(1<<t)},$7e=fi.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return e&1<<t?1:0},Ti=fi.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return $7e(e,t-1)},Oi=fi.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return q7e(e,t-1)},Pi=fi.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return H7e(e,t-1)},V7e=fi.__acroform__.calculateCoordinates=function(e,t){var r=t.internal.getHorizontalCoordinate,n=t.internal.getVerticalCoordinate,a=e[0],i=e[1],o=e[2],l=e[3],d={};return d.lowerLeft_X=r(a)||0,d.lowerLeft_Y=n(i+l)||0,d.upperRight_X=r(a+o)||0,d.upperRight_Y=n(i)||0,[Number($n(d.lowerLeft_X)),Number($n(d.lowerLeft_Y)),Number($n(d.upperRight_X)),Number($n(d.upperRight_Y))]},W7e=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],r=e._V||e.DV,n=l6(e,r),a=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+a+" "+$n(n.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(n.text),t.push("ET"),t.push("Q"),t.push("EMC");var i=Du(e);return i.scope=e.scope,i.stream=t.join(`
`),i}},l6=function(e,t){var r=e.fontSize===0?e.maxFontSize:e.fontSize,n={text:"",fontSize:""},a=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");a=e.multiline?a.map(function(H){return H.split(`
`)}):a.map(function(H){return[H]});var i=r,o=Yr.internal.getHeight(e)||0;o=o<0?-o:o;var l=Yr.internal.getWidth(e)||0;l=l<0?-l:l;var d=function(H,G,Z){if(H+1<a.length){var te=G+" "+a[H+1][0];return Zy(te,e,Z).width<=l-4}return!1};i++;e:for(;i>0;){t="",i--;var c,u,x=Zy("3",e,i).height,b=e.multiline?o-i:(o-x)/2,g=b+=2,k=0,y=0,N=0;if(i<=0){t=`(...) Tj
`,t+="% Width of Text: "+Zy(t,e,i=12).width+", FieldWidth:"+l+`
`;break}for(var S="",O=0,A=0;A<a.length;A++)if(a.hasOwnProperty(A)){var P=!1;if(a[A].length!==1&&N!==a[A].length-1){if((x+2)*(O+2)+2>o)continue e;S+=a[A][N],P=!0,y=A,A--}else{S=(S+=a[A][N]+" ").substr(S.length-1)==" "?S.substr(0,S.length-1):S;var q=parseInt(A),W=d(q,S,i),R=A>=a.length-1;if(W&&!R){S+=" ",N=0;continue}if(W||R){if(R)y=q;else if(e.multiline&&(x+2)*(O+2)+2>o)continue e}else{if(!e.multiline||(x+2)*(O+2)+2>o)continue e;y=q}}for(var U="",L=k;L<=y;L++){var Q=a[L];if(e.multiline){if(L===y){U+=Q[N]+" ",N=(N+1)%Q.length;continue}if(L===k){U+=Q[Q.length-1]+" ";continue}}U+=Q[0]+" "}switch(U=U.substr(U.length-1)==" "?U.substr(0,U.length-1):U,u=Zy(U,e,i).width,e.textAlign){case"right":c=l-u-2;break;case"center":c=(l-u)/2;break;default:c=2}t+=$n(c)+" "+$n(g)+` Td
`,t+="("+gx(U)+`) Tj
`,t+=-$n(c)+` 0 Td
`,g=-(i+2),u=0,k=P?y:y+1,O++,S=""}break}return n.text=t,n.fontSize=i,n},Zy=function(e,t,r){var n=t.scope.internal.getFont(t.fontName,t.fontStyle),a=t.scope.getStringUnitWidth(e,{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:t.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:a}},G7e={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},K7e=function(e,t){var r={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(n){return n.type===r.type&&n.object===r.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(r)},X7e=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(hu.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(G7e)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");HE=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new eX,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var a in n)if(n.hasOwnProperty(a)){var i=n[a];i.objId=void 0,i.hasAnnotation&&K7e(i,r)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(r){(function(n,a){var i=!n;for(var o in n||(a.internal.newObjectDeferredBegin(a.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),a.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||a.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(o)){var l=n[o],d=[],c=l.Rect;if(l.Rect&&(l.Rect=V7e(l.Rect,a)),a.internal.newObjectDeferredBegin(l.objId,!0),l.DA=Yr.createDefaultAppearanceStream(l),Za(l)==="object"&&typeof l.getKeyValueListForStream=="function"&&(d=l.getKeyValueListForStream()),l.Rect=c,l.hasAppearanceStream&&!l.appearanceStreamContent){var u=W7e(l);d.push({key:"AP",value:"<</N "+u+">>"}),a.internal.acroformPlugin.xForms.push(u)}if(l.appearanceStreamContent){var x="";for(var b in l.appearanceStreamContent)if(l.appearanceStreamContent.hasOwnProperty(b)){var g=l.appearanceStreamContent[b];if(x+="/"+b+" ",x+="<<",Object.keys(g).length>=1||Array.isArray(g)){for(var o in g)if(g.hasOwnProperty(o)){var k=g[o];typeof k=="function"&&(k=k.call(a,l)),x+="/"+o+" "+k+" ",a.internal.acroformPlugin.xForms.indexOf(k)>=0||a.internal.acroformPlugin.xForms.push(k)}}else typeof(k=g)=="function"&&(k=k.call(a,l)),x+="/"+o+" "+k,a.internal.acroformPlugin.xForms.indexOf(k)>=0||a.internal.acroformPlugin.xForms.push(k);x+=">>"}d.push({key:"AP",value:`<<
`+x+">>"})}a.internal.putStream({additionalKeyValues:d,objectId:l.objId}),a.internal.out("endobj")}i&&(function(y,N){for(var S in y)if(y.hasOwnProperty(S)){var O=S,A=y[S];N.internal.newObjectDeferredBegin(A.objId,!0),Za(A)==="object"&&typeof A.putStream=="function"&&A.putStream(),delete y[O]}})(a.internal.acroformPlugin.xForms,a)})(r,e)}),e.internal.acroformPlugin.isInitialized=!0}},ZK=fi.__acroform__.arrayToPdfArray=function(e,t,r){var n=function(o){return o};if(Array.isArray(e)){for(var a="[",i=0;i<e.length;i++)switch(i!==0&&(a+=" "),Za(e[i])){case"boolean":case"number":case"object":a+=e[i].toString();break;case"string":e[i].substr(0,1)!=="/"?(t!==void 0&&r&&(n=r.internal.getEncryptor(t)),a+="("+gx(n(e[i].toString()))+")"):a+=e[i].toString()}return a+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},H_=function(e,t,r){var n=function(a){return a};return t!==void 0&&r&&(n=r.internal.getEncryptor(t)),(e=e||"").toString(),"("+gx(n(e))+")"},$u=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};$u.prototype.toString=function(){return this.objId+" 0 R"},$u.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},$u.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(i){return i!="content"&&i!="appearanceStreamContent"&&i!="scope"&&i!="objId"&&i.substring(0,1)!="_"});for(var r in t)if(Object.getOwnPropertyDescriptor(this,t[r]).configurable===!1){var n=t[r],a=this[n];a&&(Array.isArray(a)?e.push({key:n,value:ZK(a,this.objId,this.scope)}):a instanceof $u?(a.scope=this.scope,e.push({key:n,value:a.objId+" 0 R"})):typeof a!="function"&&e.push({key:n,value:a}))}return e};var JK=function(){$u.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){e=r.trim()},get:function(){return e||null}})};uc(JK,$u);var eX=function(){$u.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var r=function(n){return n};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+gx(r(e))+")"}},set:function(r){e=r}})};uc(eX,$u);var hu=function e(){$u.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(S){if(isNaN(S))throw new Error('Invalid value "'+S+'" for attribute F supplied.');t=S}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Ti(t,3)},set:function(S){S?this.F=Oi(t,3):this.F=Pi(t,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(S){if(isNaN(S))throw new Error('Invalid value "'+S+'" for attribute Ff supplied.');r=S}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(S){n=S!==void 0?S:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(S){n[0]=S}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(S){n[1]=S}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(S){n[2]=S}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(S){n[3]=S}});var a="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return a},set:function(S){switch(S){case"/Btn":case"/Tx":case"/Ch":case"/Sig":a=S;break;default:throw new Error('Invalid value "'+S+'" for attribute FT supplied.')}}});var i=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!i||i.length<1){if(this instanceof Ik)return;i="FieldObject"+e.FieldNum++}var S=function(O){return O};return this.scope&&(S=this.scope.internal.getEncryptor(this.objId)),"("+gx(S(i))+")"},set:function(S){i=S.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return i},set:function(S){i=S}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(S){o=S}});var l="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return l},set:function(S){l=S}});var d=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return d},set:function(S){d=S}});var c=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return c===void 0?50/HE:c},set:function(S){c=S}});var u="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return u},set:function(S){u=S}});var x="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!x||this instanceof Ik||this instanceof Pm))return H_(x,this.objId,this.scope)},set:function(S){S=S.toString(),x=S}});var b=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(b)return this instanceof So==0?H_(b,this.objId,this.scope):b},set:function(S){S=S.toString(),b=this instanceof So==0?S.substr(0,1)==="("?h1(S.substr(1,S.length-2)):h1(S):S}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof So==1?h1(b.substr(1,b.length-1)):b},set:function(S){S=S.toString(),b=this instanceof So==1?"/"+S:S}});var g=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(g)return g},set:function(S){this.V=S}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(g)return this instanceof So==0?H_(g,this.objId,this.scope):g},set:function(S){S=S.toString(),g=this instanceof So==0?S.substr(0,1)==="("?h1(S.substr(1,S.length-2)):h1(S):S}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof So==1?h1(g.substr(1,g.length-1)):g},set:function(S){S=S.toString(),g=this instanceof So==1?"/"+S:S}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var k,y=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return y},set:function(S){S=!!S,y=S}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(k)return k},set:function(S){k=S}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Ti(this.Ff,1)},set:function(S){S?this.Ff=Oi(this.Ff,1):this.Ff=Pi(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Ti(this.Ff,2)},set:function(S){S?this.Ff=Oi(this.Ff,2):this.Ff=Pi(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Ti(this.Ff,3)},set:function(S){S?this.Ff=Oi(this.Ff,3):this.Ff=Pi(this.Ff,3)}});var N=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(N!==null)return N},set:function(S){if([0,1,2].indexOf(S)===-1)throw new Error('Invalid value "'+S+'" for attribute Q supplied.');N=S}}),Object.defineProperty(this,"textAlign",{get:function(){var S;switch(N){case 0:default:S="left";break;case 1:S="center";break;case 2:S="right"}return S},configurable:!0,enumerable:!0,set:function(S){switch(S){case"right":case 2:N=2;break;case"center":case 1:N=1;break;default:N=0}}})};uc(hu,$u);var I1=function(){hu.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(r){e=r}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return ZK(t,this.objId,this.scope)},set:function(r){var n,a;a=[],typeof(n=r)=="string"&&(a=(function(i,o,l){l||(l=1);for(var d,c=[];d=o.exec(i);)c.push(d[l]);return c})(n,/\((.*?)\)/g)),t=a}}),this.getOptions=function(){return t},this.setOptions=function(r){t=r,this.sort&&t.sort()},this.addOption=function(r){r=(r=r||"").toString(),t.push(r),this.sort&&t.sort()},this.removeOption=function(r,n){for(n=n||!1,r=(r=r||"").toString();t.indexOf(r)!==-1&&(t.splice(t.indexOf(r),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Ti(this.Ff,18)},set:function(r){r?this.Ff=Oi(this.Ff,18):this.Ff=Pi(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Ti(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=Oi(this.Ff,19):this.Ff=Pi(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Ti(this.Ff,20)},set:function(r){r?(this.Ff=Oi(this.Ff,20),t.sort()):this.Ff=Pi(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Ti(this.Ff,22)},set:function(r){r?this.Ff=Oi(this.Ff,22):this.Ff=Pi(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Ti(this.Ff,23)},set:function(r){r?this.Ff=Oi(this.Ff,23):this.Ff=Pi(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Ti(this.Ff,27)},set:function(r){r?this.Ff=Oi(this.Ff,27):this.Ff=Pi(this.Ff,27)}}),this.hasAppearanceStream=!1};uc(I1,hu);var D1=function(){I1.call(this),this.fontName="helvetica",this.combo=!1};uc(D1,I1);var M1=function(){D1.call(this),this.combo=!0};uc(M1,D1);var cw=function(){M1.call(this),this.edit=!0};uc(cw,M1);var So=function(){hu.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Ti(this.Ff,15)},set:function(r){r?this.Ff=Oi(this.Ff,15):this.Ff=Pi(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Ti(this.Ff,16)},set:function(r){r?this.Ff=Oi(this.Ff,16):this.Ff=Pi(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Ti(this.Ff,17)},set:function(r){r?this.Ff=Oi(this.Ff,17):this.Ff=Pi(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Ti(this.Ff,26)},set:function(r){r?this.Ff=Oi(this.Ff,26):this.Ff=Pi(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(i){return i};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var n,a=[];for(n in a.push("<<"),t)a.push("/"+n+" ("+gx(r(t[n]))+")");return a.push(">>"),a.join(`
`)}},set:function(r){Za(r)==="object"&&(t=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(r){typeof r=="string"&&(t.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(r){e="/"+r}})};uc(So,hu);var dw=function(){So.call(this),this.pushButton=!0};uc(dw,So);var L1=function(){So.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};uc(L1,So);var Ik=function(){var e,t;hu.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(a){e=a}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(a){t=a}});var r,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var a=function(l){return l};this.scope&&(a=this.scope.internal.getEncryptor(this.objId));var i,o=[];for(i in o.push("<<"),n)o.push("/"+i+" ("+gx(a(n[i]))+")");return o.push(">>"),o.join(`
`)},set:function(a){Za(a)==="object"&&(n=a)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(a){typeof a=="string"&&(n.CA=a)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(a){r=a}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(a){r="/"+a}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Yr.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};uc(Ik,hu),L1.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var r=this.Kids[t];r.appearanceStreamContent=e.createAppearanceStream(r.optionName),r.caption=e.getCA()}},L1.prototype.createOption=function(e){var t=new Ik;return t.Parent=this,t.optionName=e,this.Kids.push(t),Y7e.call(this.scope,t),t};var uw=function(){So.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Yr.CheckBox.createAppearanceStream()};uc(uw,So);var Pm=function(){hu.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Ti(this.Ff,13)},set:function(t){t?this.Ff=Oi(this.Ff,13):this.Ff=Pi(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Ti(this.Ff,21)},set:function(t){t?this.Ff=Oi(this.Ff,21):this.Ff=Pi(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Ti(this.Ff,23)},set:function(t){t?this.Ff=Oi(this.Ff,23):this.Ff=Pi(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Ti(this.Ff,24)},set:function(t){t?this.Ff=Oi(this.Ff,24):this.Ff=Pi(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Ti(this.Ff,25)},set:function(t){t?this.Ff=Oi(this.Ff,25):this.Ff=Pi(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Ti(this.Ff,26)},set:function(t){t?this.Ff=Oi(this.Ff,26):this.Ff=Pi(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};uc(Pm,hu);var hw=function(){Pm.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Ti(this.Ff,14)},set:function(e){e?this.Ff=Oi(this.Ff,14):this.Ff=Pi(this.Ff,14)}}),this.password=!0};uc(hw,Pm);var Yr={CheckBox:{createAppearanceStream:function(){return{N:{On:Yr.CheckBox.YesNormal},D:{On:Yr.CheckBox.YesPushDown,Off:Yr.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=Du(e);t.scope=e.scope;var r=[],n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,a=e.scope.__private__.encodeColorString(e.color),i=l6(e,e.caption);return r.push("0.749023 g"),r.push("0 0 "+$n(Yr.internal.getWidth(e))+" "+$n(Yr.internal.getHeight(e))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+n+" "+$n(i.fontSize)+" Tf "+a),r.push("BT"),r.push(i.text),r.push("ET"),r.push("Q"),r.push("EMC"),t.stream=r.join(`
`),t},YesNormal:function(e){var t=Du(e);t.scope=e.scope;var r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color),a=[],i=Yr.internal.getHeight(e),o=Yr.internal.getWidth(e),l=l6(e,e.caption);return a.push("1 g"),a.push("0 0 "+$n(o)+" "+$n(i)+" re"),a.push("f"),a.push("q"),a.push("0 0 1 rg"),a.push("0 0 "+$n(o-1)+" "+$n(i-1)+" re"),a.push("W"),a.push("n"),a.push("0 g"),a.push("BT"),a.push("/"+r+" "+$n(l.fontSize)+" Tf "+n),a.push(l.text),a.push("ET"),a.push("Q"),t.stream=a.join(`
`),t},OffPushDown:function(e){var t=Du(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+$n(Yr.internal.getWidth(e))+" "+$n(Yr.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:Yr.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=Yr.RadioButton.Circle.YesNormal,t.D[e]=Yr.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=Du(e);t.scope=e.scope;var r=[],n=Yr.internal.getWidth(e)<=Yr.internal.getHeight(e)?Yr.internal.getWidth(e)/4:Yr.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var a=Yr.internal.Bezier_C,i=Number((n*a).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+Gh(Yr.internal.getWidth(e)/2)+" "+Gh(Yr.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+i+" "+i+" "+n+" 0 "+n+" c"),r.push("-"+i+" "+n+" -"+n+" "+i+" -"+n+" 0 c"),r.push("-"+n+" -"+i+" -"+i+" -"+n+" 0 -"+n+" c"),r.push(i+" -"+n+" "+n+" -"+i+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=Du(e);t.scope=e.scope;var r=[],n=Yr.internal.getWidth(e)<=Yr.internal.getHeight(e)?Yr.internal.getWidth(e)/4:Yr.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),i=Number((a*Yr.internal.Bezier_C).toFixed(5)),o=Number((n*Yr.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Gh(Yr.internal.getWidth(e)/2)+" "+Gh(Yr.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+i+" "+i+" "+a+" 0 "+a+" c"),r.push("-"+i+" "+a+" -"+a+" "+i+" -"+a+" 0 c"),r.push("-"+a+" -"+i+" -"+i+" -"+a+" 0 -"+a+" c"),r.push(i+" -"+a+" "+a+" -"+i+" "+a+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+Gh(Yr.internal.getWidth(e)/2)+" "+Gh(Yr.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+o+" "+o+" "+n+" 0 "+n+" c"),r.push("-"+o+" "+n+" -"+n+" "+o+" -"+n+" 0 c"),r.push("-"+n+" -"+o+" -"+o+" -"+n+" 0 -"+n+" c"),r.push(o+" -"+n+" "+n+" -"+o+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(e){var t=Du(e);t.scope=e.scope;var r=[],n=Yr.internal.getWidth(e)<=Yr.internal.getHeight(e)?Yr.internal.getWidth(e)/4:Yr.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),i=Number((a*Yr.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Gh(Yr.internal.getWidth(e)/2)+" "+Gh(Yr.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+i+" "+i+" "+a+" 0 "+a+" c"),r.push("-"+i+" "+a+" -"+a+" "+i+" -"+a+" 0 c"),r.push("-"+a+" -"+i+" -"+i+" -"+a+" 0 -"+a+" c"),r.push(i+" -"+a+" "+a+" -"+i+" "+a+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:Yr.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=Yr.RadioButton.Cross.YesNormal,t.D[e]=Yr.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=Du(e);t.scope=e.scope;var r=[],n=Yr.internal.calculateCross(e);return r.push("q"),r.push("1 1 "+$n(Yr.internal.getWidth(e)-2)+" "+$n(Yr.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push($n(n.x1.x)+" "+$n(n.x1.y)+" m"),r.push($n(n.x2.x)+" "+$n(n.x2.y)+" l"),r.push($n(n.x4.x)+" "+$n(n.x4.y)+" m"),r.push($n(n.x3.x)+" "+$n(n.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=Du(e);t.scope=e.scope;var r=Yr.internal.calculateCross(e),n=[];return n.push("0.749023 g"),n.push("0 0 "+$n(Yr.internal.getWidth(e))+" "+$n(Yr.internal.getHeight(e))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+$n(Yr.internal.getWidth(e)-2)+" "+$n(Yr.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push($n(r.x1.x)+" "+$n(r.x1.y)+" m"),n.push($n(r.x2.x)+" "+$n(r.x2.y)+" l"),n.push($n(r.x4.x)+" "+$n(r.x4.y)+" m"),n.push($n(r.x3.x)+" "+$n(r.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(e){var t=Du(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+$n(Yr.internal.getWidth(e))+" "+$n(Yr.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+r}};Yr.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=Yr.internal.getWidth(e),r=Yr.internal.getHeight(e),n=Math.min(t,r);return{x1:{x:(t-n)/2,y:(r-n)/2+n},x2:{x:(t-n)/2+n,y:(r-n)/2},x3:{x:(t-n)/2,y:(r-n)/2},x4:{x:(t-n)/2+n,y:(r-n)/2+n}}}},Yr.internal.getWidth=function(e){var t=0;return Za(e)==="object"&&(t=oF(e.Rect[2])),t},Yr.internal.getHeight=function(e){var t=0;return Za(e)==="object"&&(t=oF(e.Rect[3])),t};var Y7e=fi.addField=function(e){if(X7e(this,e),!(e instanceof hu))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};fi.AcroFormChoiceField=I1,fi.AcroFormListBox=D1,fi.AcroFormComboBox=M1,fi.AcroFormEditBox=cw,fi.AcroFormButton=So,fi.AcroFormPushButton=dw,fi.AcroFormRadioButton=L1,fi.AcroFormCheckBox=uw,fi.AcroFormTextField=Pm,fi.AcroFormPasswordField=hw,fi.AcroFormAppearance=Yr,fi.AcroForm={ChoiceField:I1,ListBox:D1,ComboBox:M1,EditBox:cw,Button:So,PushButton:dw,RadioButton:L1,CheckBox:uw,TextField:Pm,PasswordField:hw,Appearance:Yr},sn.AcroForm={ChoiceField:I1,ListBox:D1,ComboBox:M1,EditBox:cw,Button:So,PushButton:dw,RadioButton:L1,CheckBox:uw,TextField:Pm,PasswordField:hw,Appearance:Yr};sn.AcroForm;function tX(e){return e.reduce(function(t,r,n){return t[r]=n,t},{})}(function(e){var t="addImage_";e.__addimage__={};var r="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},a=e.__addimage__.getImageFileTypeByImageData=function(H,G){var Z,te,se,ue,ae,pe=r;if((G=G||r)==="RGBA"||H.data!==void 0&&H.data instanceof Uint8ClampedArray&&"height"in H&&"width"in H)return"RGBA";if(W(H))for(ae in n)for(se=n[ae],Z=0;Z<se.length;Z+=1){for(ue=!0,te=0;te<se[Z].length;te+=1)if(se[Z][te]!==void 0&&se[Z][te]!==H[te]){ue=!1;break}if(ue===!0){pe=ae;break}}else for(ae in n)for(se=n[ae],Z=0;Z<se.length;Z+=1){for(ue=!0,te=0;te<se[Z].length;te+=1)if(se[Z][te]!==void 0&&se[Z][te]!==H.charCodeAt(te)){ue=!1;break}if(ue===!0){pe=ae;break}}return pe===r&&G!==r&&(pe=G),pe},i=function H(G){for(var Z=this.internal.write,te=this.internal.putStream,se=(0,this.internal.getFilters)();se.indexOf("FlateEncode")!==-1;)se.splice(se.indexOf("FlateEncode"),1);G.objectId=this.internal.newObject();var ue=[];if(ue.push({key:"Type",value:"/XObject"}),ue.push({key:"Subtype",value:"/Image"}),ue.push({key:"Width",value:G.width}),ue.push({key:"Height",value:G.height}),G.colorSpace===S.INDEXED?ue.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(G.palette.length/3-1)+" "+("sMask"in G&&G.sMask!==void 0?G.objectId+2:G.objectId+1)+" 0 R]"}):(ue.push({key:"ColorSpace",value:"/"+G.colorSpace}),G.colorSpace===S.DEVICE_CMYK&&ue.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),ue.push({key:"BitsPerComponent",value:G.bitsPerComponent}),"decodeParameters"in G&&G.decodeParameters!==void 0&&ue.push({key:"DecodeParms",value:"<<"+G.decodeParameters+">>"}),"transparency"in G&&Array.isArray(G.transparency)&&G.transparency.length>0){for(var ae="",pe=0,ve=G.transparency.length;pe<ve;pe++)ae+=G.transparency[pe]+" "+G.transparency[pe]+" ";ue.push({key:"Mask",value:"["+ae+"]"})}G.sMask!==void 0&&ue.push({key:"SMask",value:G.objectId+1+" 0 R"});var Pe=G.filter!==void 0?["/"+G.filter]:void 0;if(te({data:G.data,additionalKeyValues:ue,alreadyAppliedFilters:Pe,objectId:G.objectId}),Z("endobj"),"sMask"in G&&G.sMask!==void 0){var xe,B=(xe=G.sMaskBitsPerComponent)!==null&&xe!==void 0?xe:G.bitsPerComponent,re={width:G.width,height:G.height,colorSpace:"DeviceGray",bitsPerComponent:B,data:G.sMask};"filter"in G&&(re.decodeParameters="/Predictor ".concat(G.predictor," /Colors 1 /BitsPerComponent ").concat(B," /Columns ").concat(G.width),re.filter=G.filter),H.call(this,re)}if(G.colorSpace===S.INDEXED){var J=this.internal.newObject();te({data:U(new Uint8Array(G.palette)),objectId:J}),Z("endobj")}},o=function(){var H=this.internal.collections[t+"images"];for(var G in H)i.call(this,H[G])},l=function(){var H,G=this.internal.collections[t+"images"],Z=this.internal.write;for(var te in G)Z("/I"+(H=G[te]).index,H.objectId,"0","R")},d=function(){this.internal.collections[t+"images"]||(this.internal.collections[t+"images"]={},this.internal.events.subscribe("putResources",o),this.internal.events.subscribe("putXobjectDict",l))},c=function(){var H=this.internal.collections[t+"images"];return d.call(this),H},u=function(){return Object.keys(this.internal.collections[t+"images"]).length},x=function(H){return typeof e["process"+H.toUpperCase()]=="function"},b=function(H){return Za(H)==="object"&&H.nodeType===1},g=function(H,G){if(H.nodeName==="IMG"&&H.hasAttribute("src")){var Z=""+H.getAttribute("src");if(Z.indexOf("data:image/")===0)return lw(unescape(Z).split("base64,").pop());var te=e.loadFile(Z,!0);if(te!==void 0)return te}if(H.nodeName==="CANVAS"){if(H.width===0||H.height===0)throw new Error("Given canvas must have data. Canvas width: "+H.width+", height: "+H.height);var se;switch(G){case"PNG":se="image/png";break;case"WEBP":se="image/webp";break;default:se="image/jpeg"}return lw(H.toDataURL(se,1).split("base64,").pop())}},k=function(H){var G=this.internal.collections[t+"images"];if(G){for(var Z in G)if(H===G[Z].alias)return G[Z]}},y=function(H,G,Z){return H||G||(H=-96,G=-96),H<0&&(H=-1*Z.width*72/H/this.internal.scaleFactor),G<0&&(G=-1*Z.height*72/G/this.internal.scaleFactor),H===0&&(H=G*Z.width/Z.height),G===0&&(G=H*Z.height/Z.width),[H,G]},N=function(H,G,Z,te,se,ue){var ae=y.call(this,Z,te,se),pe=this.internal.getCoordinateString,ve=this.internal.getVerticalCoordinateString,Pe=c.call(this);if(Z=ae[0],te=ae[1],Pe[se.index]=se,ue){ue*=Math.PI/180;var xe=Math.cos(ue),B=Math.sin(ue),re=function(ie){return ie.toFixed(4)},J=[re(xe),re(B),re(-1*B),re(xe),0,0,"cm"]}this.internal.write("q"),ue?(this.internal.write([1,"0","0",1,pe(H),ve(G+te),"cm"].join(" ")),this.internal.write(J.join(" ")),this.internal.write([pe(Z),"0","0",pe(te),"0","0","cm"].join(" "))):this.internal.write([pe(Z),"0","0",pe(te),pe(H),ve(G+te),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+se.index+" Do"),this.internal.write("Q")},S=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var O=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},A=e.__addimage__.sHashCode=function(H){var G,Z,te=0;if(typeof H=="string")for(Z=H.length,G=0;G<Z;G++)te=(te<<5)-te+H.charCodeAt(G),te|=0;else if(W(H))for(Z=H.byteLength/2,G=0;G<Z;G++)te=(te<<5)-te+H[G],te|=0;return te},P=e.__addimage__.validateStringAsBase64=function(H){(H=H||"").toString().trim();var G=!0;return H.length===0&&(G=!1),H.length%4!=0&&(G=!1),/^[A-Za-z0-9+/]+$/.test(H.substr(0,H.length-2))===!1&&(G=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(H.substr(-2))===!1&&(G=!1),G},q=e.__addimage__.extractImageFromDataUrl=function(H){if(H==null||!(H=H.trim()).startsWith("data:"))return null;var G=H.indexOf(",");return G<0?null:H.substring(0,G).trim().endsWith("base64")?H.substring(G+1):null};e.__addimage__.isArrayBuffer=function(H){return H instanceof ArrayBuffer};var W=e.__addimage__.isArrayBufferView=function(H){return H instanceof Int8Array||H instanceof Uint8Array||H instanceof Uint8ClampedArray||H instanceof Int16Array||H instanceof Uint16Array||H instanceof Int32Array||H instanceof Uint32Array||H instanceof Float32Array||H instanceof Float64Array},R=e.__addimage__.binaryStringToUint8Array=function(H){for(var G=H.length,Z=new Uint8Array(G),te=0;te<G;te++)Z[te]=H.charCodeAt(te);return Z},U=e.__addimage__.arrayBufferToBinaryString=function(H){for(var G="",Z=W(H)?H:new Uint8Array(H),te=0;te<Z.length;te+=8192)G+=String.fromCharCode.apply(null,Z.subarray(te,te+8192));return G};e.addImage=function(){var H,G,Z,te,se,ue,ae,pe,ve;if(typeof arguments[1]=="number"?(G=r,Z=arguments[1],te=arguments[2],se=arguments[3],ue=arguments[4],ae=arguments[5],pe=arguments[6],ve=arguments[7]):(G=arguments[1],Z=arguments[2],te=arguments[3],se=arguments[4],ue=arguments[5],ae=arguments[6],pe=arguments[7],ve=arguments[8]),Za(H=arguments[0])==="object"&&!b(H)&&"imageData"in H){var Pe=H;H=Pe.imageData,G=Pe.format||G||r,Z=Pe.x||Z||0,te=Pe.y||te||0,se=Pe.w||Pe.width||se,ue=Pe.h||Pe.height||ue,ae=Pe.alias||ae,pe=Pe.compression||pe,ve=Pe.rotation||Pe.angle||ve}var xe=this.internal.getFilters();if(pe===void 0&&xe.indexOf("FlateEncode")!==-1&&(pe="SLOW"),isNaN(Z)||isNaN(te))throw new Error("Invalid coordinates passed to jsPDF.addImage");d.call(this);var B=L.call(this,H,G,ae,pe);return N.call(this,Z,te,se,ue,B,ve),this};var L=function(H,G,Z,te){var se,ue,ae;if(typeof H=="string"&&a(H)===r){H=unescape(H);var pe=Q(H,!1);(pe!==""||(pe=e.loadFile(H,!0))!==void 0)&&(H=pe)}if(b(H)&&(H=g(H,G)),G=a(H,G),!x(G))throw new Error("addImage does not support files of type '"+G+"', please ensure that a plugin for '"+G+"' support is added.");if(((ae=Z)==null||ae.length===0)&&(Z=(function(ve){return typeof ve=="string"||W(ve)?A(ve):W(ve.data)?A(ve.data):null})(H)),(se=k.call(this,Z))||(H instanceof Uint8Array||G==="RGBA"||(ue=H,H=R(H)),se=this["process"+G.toUpperCase()](H,u.call(this),Z,(function(ve){return ve&&typeof ve=="string"&&(ve=ve.toUpperCase()),ve in e.image_compression?ve:O.NONE})(te),ue)),!se)throw new Error("An unknown error occurred whilst processing the image.");return se},Q=e.__addimage__.convertBase64ToBinaryString=function(H,G){G=typeof G!="boolean"||G;var Z,te="";if(typeof H=="string"){var se;Z=(se=q(H))!==null&&se!==void 0?se:H;try{te=lw(Z)}catch(ue){if(G)throw P(Z)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+ue.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return te};e.getImageProperties=function(H){var G,Z,te="";if(b(H)&&(H=g(H)),typeof H=="string"&&a(H)===r&&((te=Q(H,!1))===""&&(te=e.loadFile(H)||""),H=te),Z=a(H),!x(Z))throw new Error("addImage does not support files of type '"+Z+"', please ensure that a plugin for '"+Z+"' support is added.");if(H instanceof Uint8Array||(H=R(H)),!(G=this["process"+Z.toUpperCase()](H)))throw new Error("An unknown error occurred whilst processing the image");return G.fileType=Z,G}})(sn.API),(function(e){var t=function(r){if(r!==void 0&&r!="")return!0};sn.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(r){for(var n,a,i,o=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,d=this.internal.getPageInfoByObjId(r.objId),c=r.pageContext.annotations,u=!1,x=0;x<c.length&&!u;x++)switch((n=c[x]).type){case"link":(t(n.options.url)||t(n.options.pageNumber))&&(u=!0);break;case"reference":case"text":case"freetext":u=!0}if(u!=0){this.internal.write("/Annots [");for(var b=0;b<c.length;b++){n=c[b];var g=this.internal.pdfEscape,k=this.internal.getEncryptor(r.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var y=this.internal.newAdditionalObject(),N=this.internal.newAdditionalObject(),S=this.internal.getEncryptor(y.objId),O=n.title||"Note";i="<</Type /Annot /Subtype /Text "+(a="/Rect ["+o(n.bounds.x)+" "+l(n.bounds.y+n.bounds.h)+" "+o(n.bounds.x+n.bounds.w)+" "+l(n.bounds.y)+"] ")+"/Contents ("+g(S(n.contents))+")",i+=" /Popup "+N.objId+" 0 R",i+=" /P "+d.objId+" 0 R",i+=" /T ("+g(S(O))+") >>",y.content=i;var A=y.objId+" 0 R";i="<</Type /Annot /Subtype /Popup "+(a="/Rect ["+o(n.bounds.x+30)+" "+l(n.bounds.y+n.bounds.h)+" "+o(n.bounds.x+n.bounds.w+30)+" "+l(n.bounds.y)+"] ")+" /Parent "+A,n.open&&(i+=" /Open true"),i+=" >>",N.content=i,this.internal.write(y.objId,"0 R",N.objId,"0 R");break;case"freetext":a="/Rect ["+o(n.bounds.x)+" "+l(n.bounds.y)+" "+o(n.bounds.x+n.bounds.w)+" "+l(n.bounds.y+n.bounds.h)+"] ";var P=n.color||"#000000";i="<</Type /Annot /Subtype /FreeText "+a+"/Contents ("+g(k(n.contents))+")",i+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+P+")",i+=" /Border [0 0 0]",i+=" >>",this.internal.write(i);break;case"link":if(n.options.name){var q=this.annotations._nameMap[n.options.name];n.options.pageNumber=q.page,n.options.top=q.y}else n.options.top||(n.options.top=0);if(a="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",i="",n.options.url)i="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /A <</S /URI /URI ("+g(k(n.options.url))+") >>";else if(n.options.pageNumber)switch(i="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":i+=" /Fit]";break;case"FitH":i+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,i+=" /FitV "+n.options.left+"]";break;default:var W=l(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),i+=" /XYZ "+n.options.left+" "+W+" "+n.options.zoom+"]"}i!=""&&(i+=" >>",this.internal.write(i))}}this.internal.write("]")}}]),e.createAnnotation=function(r){var n=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":n.pageContext.annotations.push(r)}},e.link=function(r,n,a,i,o){var l=this.internal.getCurrentPageInfo(),d=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString;l.pageContext.annotations.push({finalBounds:{x:d(r),y:c(n),w:d(r+a),h:c(n+i)},options:o,type:"link"})},e.textWithLink=function(r,n,a,i){var o,l,d=this.getTextWidth(r),c=this.internal.getLineHeight()/this.internal.scaleFactor;if(i.maxWidth!==void 0){l=i.maxWidth;var u=this.splitTextToSize(r,l).length;o=Math.ceil(c*u)}else l=d,o=c;return this.text(r,n,a,i),a+=.2*c,i.align==="center"&&(n-=d/2),i.align==="right"&&(n-=d),this.link(n,a-c,l,o,i),d},e.getTextWidth=function(r){var n=this.internal.getFontSize();return this.getStringUnitWidth(r)*n/this.internal.scaleFactor}})(sn.API),(function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},a=[1570,1571,1573,1575];e.__arabicParser__={};var i=e.__arabicParser__.isInArabicSubstitutionA=function(y){return t[y.charCodeAt(0)]!==void 0},o=e.__arabicParser__.isArabicLetter=function(y){return typeof y=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(y)},l=e.__arabicParser__.isArabicEndLetter=function(y){return o(y)&&i(y)&&t[y.charCodeAt(0)].length<=2},d=e.__arabicParser__.isArabicAlfLetter=function(y){return o(y)&&a.indexOf(y.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(y){return o(y)&&i(y)&&t[y.charCodeAt(0)].length>=1};var c=e.__arabicParser__.arabicLetterHasFinalForm=function(y){return o(y)&&i(y)&&t[y.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(y){return o(y)&&i(y)&&t[y.charCodeAt(0)].length>=3};var u=e.__arabicParser__.arabicLetterHasMedialForm=function(y){return o(y)&&i(y)&&t[y.charCodeAt(0)].length==4},x=e.__arabicParser__.resolveLigatures=function(y){var N=0,S=r,O="",A=0;for(N=0;N<y.length;N+=1)S[y.charCodeAt(N)]!==void 0?(A++,typeof(S=S[y.charCodeAt(N)])=="number"&&(O+=String.fromCharCode(S),S=r,A=0),N===y.length-1&&(S=r,O+=y.charAt(N-(A-1)),N-=A-1,A=0)):(S=r,O+=y.charAt(N-A),N-=A,A=0);return O};e.__arabicParser__.isArabicDiacritic=function(y){return y!==void 0&&n[y.charCodeAt(0)]!==void 0};var b=e.__arabicParser__.getCorrectForm=function(y,N,S){return o(y)?i(y)===!1?-1:!c(y)||!o(N)&&!o(S)||!o(S)&&l(N)||l(y)&&!o(N)||l(y)&&d(N)||l(y)&&l(N)?0:u(y)&&o(N)&&!l(N)&&o(S)&&c(S)?3:l(y)||!o(S)?1:2:-1},g=function(y){var N=0,S=0,O=0,A="",P="",q="",W=(y=y||"").split("\\s+"),R=[];for(N=0;N<W.length;N+=1){for(R.push(""),S=0;S<W[N].length;S+=1)A=W[N][S],P=W[N][S-1],q=W[N][S+1],o(A)?(O=b(A,P,q),R[N]+=O!==-1?String.fromCharCode(t[A.charCodeAt(0)][O]):A):R[N]+=A;R[N]=x(R[N])}return R.join(" ")},k=e.__arabicParser__.processArabic=e.processArabic=function(){var y,N=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,S=[];if(Array.isArray(N)){var O=0;for(S=[],O=0;O<N.length;O+=1)Array.isArray(N[O])?S.push([g(N[O][0]),N[O][1],N[O][2]]):S.push([g(N[O])]);y=S}else y=g(N);return typeof arguments[0]=="string"?y:(arguments[0].text=y,arguments[0])};e.events.push(["preProcessText",k])})(sn.API),sn.API.autoPrint=function(e){var t;return(e=e||{}).variant=e.variant||"non-conform",e.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})),this},(function(e){var t=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(l){r=l}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(l){n=isNaN(l)||Number.isInteger(l)===!1||l<0?150:l,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var a=300;Object.defineProperty(this,"height",{get:function(){return a},set:function(l){a=isNaN(l)||Number.isInteger(l)===!1||l<0?300:l,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=a+1)}});var i=[];Object.defineProperty(this,"childNodes",{get:function(){return i},set:function(l){i=l}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(l){o=l}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(r,n){var a;if((r=r||"2d")!=="2d")return null;for(a in n)this.pdf.context2d.hasOwnProperty(a)&&(this.pdf.context2d[a]=n[a]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])})(sn.API),(function(e){var t={left:0,top:0,bottom:0,right:0},r=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),a.call(this))},a=function(){this.internal.__cell__.lastCell=new i,this.internal.__cell__.pages=1},i=function(){var d=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return d},set:function(y){d=y}});var c=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return c},set:function(y){c=y}});var u=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return u},set:function(y){u=y}});var x=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return x},set:function(y){x=y}});var b=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return b},set:function(y){b=y}});var g=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return g},set:function(y){g=y}});var k=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return k},set:function(y){k=y}}),this};i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},i.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(d){return n.call(this),this.internal.__cell__.headerFunction=typeof d=="function"?d:void 0,this},e.getTextDimensions=function(d,c){n.call(this);var u=(c=c||{}).fontSize||this.getFontSize(),x=c.font||this.getFont(),b=c.scaleFactor||this.internal.scaleFactor,g=0,k=0,y=0,N=this;if(!Array.isArray(d)&&typeof d!="string"){if(typeof d!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");d=String(d)}var S=c.maxWidth;S>0?typeof d=="string"?d=this.splitTextToSize(d,S):Object.prototype.toString.call(d)==="[object Array]"&&(d=d.reduce(function(A,P){return A.concat(N.splitTextToSize(P,S))},[])):d=Array.isArray(d)?d:[d];for(var O=0;O<d.length;O++)g<(y=this.getStringUnitWidth(d[O],{font:x})*u)&&(g=y);return g!==0&&(k=d.length),{w:g/=b,h:Math.max((k*u*this.getLineHeightFactor()-u*(this.getLineHeightFactor()-1))/b,0)}},e.cellAddPage=function(){n.call(this),this.addPage();var d=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new i(d.left,d.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=e.cell=function(){var d;d=arguments[0]instanceof i?arguments[0]:new i(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),n.call(this);var c=this.internal.__cell__.lastCell,u=this.internal.__cell__.padding,x=this.internal.__cell__.margins||t,b=this.internal.__cell__.tableHeaderRow,g=this.internal.__cell__.printHeaders;return c.lineNumber!==void 0&&(c.lineNumber===d.lineNumber?(d.x=(c.x||0)+(c.width||0),d.y=c.y||0):c.y+c.height+d.height+x.bottom>this.getPageHeight()?(this.cellAddPage(),d.y=x.top,g&&b&&(this.printHeaderRow(d.lineNumber,!0),d.y+=b[0].height)):d.y=c.y+c.height||d.y),d.text[0]!==void 0&&(this.rect(d.x,d.y,d.width,d.height,r===!0?"FD":void 0),d.align==="right"?this.text(d.text,d.x+d.width-u,d.y+u,{align:"right",baseline:"top"}):d.align==="center"?this.text(d.text,d.x+d.width/2,d.y+u,{align:"center",baseline:"top",maxWidth:d.width-u-u}):this.text(d.text,d.x+u,d.y+u,{align:"left",baseline:"top",maxWidth:d.width-u-u})),this.internal.__cell__.lastCell=d,this};e.table=function(d,c,u,x,b){if(n.call(this),!u)throw new Error("No data for PDF table.");var g,k,y,N,S=[],O=[],A=[],P={},q={},W=[],R=[],U=(b=b||{}).autoSize||!1,L=b.printHeaders!==!1,Q=b.css&&b.css["font-size"]!==void 0?16*b.css["font-size"]:b.fontSize||12,H=b.margins||Object.assign({width:this.getPageWidth()},t),G=typeof b.padding=="number"?b.padding:3,Z=b.headerBackgroundColor||"#c8c8c8",te=b.headerTextColor||"#000";if(a.call(this),this.internal.__cell__.printHeaders=L,this.internal.__cell__.margins=H,this.internal.__cell__.table_font_size=Q,this.internal.__cell__.padding=G,this.internal.__cell__.headerBackgroundColor=Z,this.internal.__cell__.headerTextColor=te,this.setFontSize(Q),x==null)O=S=Object.keys(u[0]),A=S.map(function(){return"left"});else if(Array.isArray(x)&&Za(x[0])==="object")for(S=x.map(function(Pe){return Pe.name}),O=x.map(function(Pe){return Pe.prompt||Pe.name||""}),A=x.map(function(Pe){return Pe.align||"left"}),g=0;g<x.length;g+=1)q[x[g].name]=.7499990551181103*x[g].width;else Array.isArray(x)&&typeof x[0]=="string"&&(O=S=x,A=S.map(function(){return"left"}));if(U||Array.isArray(x)&&typeof x[0]=="string")for(g=0;g<S.length;g+=1){for(P[N=S[g]]=u.map(function(Pe){return Pe[N]}),this.setFont(void 0,"bold"),W.push(this.getTextDimensions(O[g],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),k=P[N],this.setFont(void 0,"normal"),y=0;y<k.length;y+=1)W.push(this.getTextDimensions(k[y],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);q[N]=Math.max.apply(null,W)+G+G,W=[]}if(L){var se={};for(g=0;g<S.length;g+=1)se[S[g]]={},se[S[g]].text=O[g],se[S[g]].align=A[g];var ue=l.call(this,se,q);R=S.map(function(Pe){return new i(d,c,q[Pe],ue,se[Pe].text,void 0,se[Pe].align)}),this.setTableHeaderRow(R),this.printHeaderRow(1,!1)}var ae=x.reduce(function(Pe,xe){return Pe[xe.name]=xe.align,Pe},{});for(g=0;g<u.length;g+=1){"rowStart"in b&&b.rowStart instanceof Function&&b.rowStart({row:g,data:u[g]},this);var pe=l.call(this,u[g],q);for(y=0;y<S.length;y+=1){var ve=u[g][S[y]];"cellStart"in b&&b.cellStart instanceof Function&&b.cellStart({row:g,col:y,data:ve},this),o.call(this,new i(d,c,q[S[y]],pe,ve,g+2,ae[S[y]]))}}return this.internal.__cell__.table_x=d,this.internal.__cell__.table_y=c,this};var l=function(d,c){var u=this.internal.__cell__.padding,x=this.internal.__cell__.table_font_size,b=this.internal.scaleFactor;return Object.keys(d).map(function(g){var k=d[g];return this.splitTextToSize(k.hasOwnProperty("text")?k.text:k,c[g]-u-u)},this).map(function(g){return this.getLineHeightFactor()*g.length*x/b+u+u},this).reduce(function(g,k){return Math.max(g,k)},0)};e.setTableHeaderRow=function(d){n.call(this),this.internal.__cell__.tableHeaderRow=d},e.printHeaderRow=function(d,c){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var u;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var x=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new i(x[0],x[1],x[2],x[3],void 0,-1)}this.setFont(void 0,"bold");for(var b=[],g=0;g<this.internal.__cell__.tableHeaderRow.length;g+=1){u=this.internal.__cell__.tableHeaderRow[g].clone(),c&&(u.y=this.internal.__cell__.margins.top||0,b.push(u)),u.lineNumber=d;var k=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,u),this.setTextColor(k)}b.length>0&&this.setTableHeaderRow(b),this.setFont(void 0,"normal"),r=!1}})(sn.API);var rX={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},nX=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],c6=tX(nX),aX=[100,200,300,400,500,600,700,800,900],Q7e=tX(aX);function $_(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),r=(function(i){return rX[i=i||"normal"]?i:"normal"})(e.style),n=(function(i){return i?typeof i=="number"?i>=100&&i<=900&&i%100==0?i:400:/^\d00$/.test(i)?parseInt(i):i==="bold"?700:400:400})(e.weight),a=(function(i){return typeof c6[i=i||"normal"]=="number"?i:"normal"})(e.stretch);return{family:t,style:r,weight:n,stretch:a,src:e.src||[],ref:e.ref||{name:t,style:[a,r,n].join(" ")}}}function lF(e,t,r,n){var a;for(a=r;a>=0&&a<t.length;a+=n)if(e[t[a]])return e[t[a]];for(a=r;a>=0&&a<t.length;a-=n)if(e[t[a]])return e[t[a]]}var Z7e={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},cF={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function dF(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function uF(e){return e.trimLeft()}function J7e(e,t){for(var r=0;r<e.length;){if(e.charAt(r)===t)return[e.substring(0,r),e.substring(r+1)];r+=1}return null}function eOe(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var Jy,hF,fF,f1,ew,mF,xF,pF,V_=["times"];function gF(e,t,r,n,a){var i=4,o=vF;switch(a){case sn.API.image_compression.FAST:i=1,o=bF;break;case sn.API.image_compression.MEDIUM:i=6,o=yF;break;case sn.API.image_compression.SLOW:i=9,o=wF}e=(function(d,c,u,x){for(var b,g=d.length/c,k=new Uint8Array(d.length+g),y=[tOe,bF,vF,yF,wF],N=0;N<g;N+=1){var S=N*c,O=d.subarray(S,S+c);if(x)k.set(x(O,u,b),S+N);else{for(var A=y.length,P=[],q=0;q<A;q+=1)P[q]=y[q](O,u,b);var W=nOe(P.concat());k.set(P[W],S+N)}b=O}return k})(e,t,Math.ceil(r*n/8),o);var l=r6(e,{level:i});return sn.API.__addimage__.arrayBufferToBinaryString(l)}function tOe(e){var t=Array.apply([],e);return t.unshift(0),t}function bF(e,t){var r=e.length,n=[];n[0]=1;for(var a=0;a<r;a+=1){var i=e[a-t]||0;n[a+1]=e[a]-i+256&255}return n}function vF(e,t,r){var n=e.length,a=[];a[0]=2;for(var i=0;i<n;i+=1){var o=r&&r[i]||0;a[i+1]=e[i]-o+256&255}return a}function yF(e,t,r){var n=e.length,a=[];a[0]=3;for(var i=0;i<n;i+=1){var o=e[i-t]||0,l=r&&r[i]||0;a[i+1]=e[i]+256-(o+l>>>1)&255}return a}function wF(e,t,r){var n=e.length,a=[];a[0]=4;for(var i=0;i<n;i+=1){var o=rOe(e[i-t]||0,r&&r[i]||0,r&&r[i-t]||0);a[i+1]=e[i]-o+256&255}return a}function rOe(e,t,r){if(e===t&&t===r)return e;var n=Math.abs(t-r),a=Math.abs(e-r),i=Math.abs(e+t-r-r);return n<=a&&n<=i?e:a<=i?t:r}function nOe(e){var t=e.map(function(r){return r.reduce(function(n,a){return n+Math.abs(a)},0)});return t.indexOf(Math.min.apply(null,t))}function W_(e,t,r){var n=t*r,a=Math.floor(n/8),i=16-(n-8*a+r),o=(1<<r)-1;return sX(e,a)>>i&o}function kF(e,t,r,n){var a=r*n,i=Math.floor(a/8),o=16-(a-8*i+n),l=(1<<n)-1,d=(t&l)<<o;(function(c,u,x){if(u+1<c.byteLength)c.setUint16(u,x,!1);else{var b=x>>8&255;c.setUint8(u,b)}})(e,i,sX(e,i)&~(l<<o)&65535|d)}function sX(e,t){return t+1<e.byteLength?e.getUint16(t,!1):e.getUint8(t)<<8}function aOe(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=e[t++]|e[t++]<<8,n=e[t++]|e[t++]<<8,a=e[t++],i=a>>7,o=1<<1+(7&a);e[t++],e[t++];var l=null,d=null;i&&(l=t,d=o,t+=3*o);var c=!0,u=[],x=0,b=null,g=0,k=null;for(this.width=r,this.height=n;c&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,k=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((H=e[t++])>=0))throw Error("Invalid block size");if(H===0)break;t+=H}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var y=e[t++];x=e[t++]|e[t++]<<8,b=e[t++],1&y||(b=null),g=y>>2&7,t++;break;case 254:for(;;){if(!((H=e[t++])>=0))throw Error("Invalid block size");if(H===0)break;t+=H}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var N=e[t++]|e[t++]<<8,S=e[t++]|e[t++]<<8,O=e[t++]|e[t++]<<8,A=e[t++]|e[t++]<<8,P=e[t++],q=P>>6&1,W=1<<1+(7&P),R=l,U=d,L=!1;P>>7&&(L=!0,R=t,U=W,t+=3*W);var Q=t;for(t++;;){var H;if(!((H=e[t++])>=0))throw Error("Invalid block size");if(H===0)break;t+=H}u.push({x:N,y:S,width:O,height:A,has_local_palette:L,palette_offset:R,palette_size:U,data_offset:Q,data_length:t-Q,transparent_index:b,interlaced:!!q,delay:x,disposal:g});break;case 59:c=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return u.length},this.loopCount=function(){return k},this.frameInfo=function(G){if(G<0||G>=u.length)throw new Error("Frame index out of range.");return u[G]},this.decodeAndBlitFrameBGRA=function(G,Z){var te=this.frameInfo(G),se=te.width*te.height,ue=new Uint8Array(se);NF(e,te.data_offset,ue,se);var ae=te.palette_offset,pe=te.transparent_index;pe===null&&(pe=256);var ve=te.width,Pe=r-ve,xe=ve,B=4*(te.y*r+te.x),re=4*((te.y+te.height)*r+te.x),J=B,ie=4*Pe;te.interlaced===!0&&(ie+=4*r*7);for(var Y=8,_e=0,me=ue.length;_e<me;++_e){var ne=ue[_e];if(xe===0&&(xe=ve,(J+=ie)>=re&&(ie=4*Pe+4*r*(Y-1),J=B+(ve+Pe)*(Y<<1),Y>>=1)),ne===pe)J+=4;else{var je=e[ae+3*ne],De=e[ae+3*ne+1],ce=e[ae+3*ne+2];Z[J++]=ce,Z[J++]=De,Z[J++]=je,Z[J++]=255}--xe}},this.decodeAndBlitFrameRGBA=function(G,Z){var te=this.frameInfo(G),se=te.width*te.height,ue=new Uint8Array(se);NF(e,te.data_offset,ue,se);var ae=te.palette_offset,pe=te.transparent_index;pe===null&&(pe=256);var ve=te.width,Pe=r-ve,xe=ve,B=4*(te.y*r+te.x),re=4*((te.y+te.height)*r+te.x),J=B,ie=4*Pe;te.interlaced===!0&&(ie+=4*r*7);for(var Y=8,_e=0,me=ue.length;_e<me;++_e){var ne=ue[_e];if(xe===0&&(xe=ve,(J+=ie)>=re&&(ie=4*Pe+4*r*(Y-1),J=B+(ve+Pe)*(Y<<1),Y>>=1)),ne===pe)J+=4;else{var je=e[ae+3*ne],De=e[ae+3*ne+1],ce=e[ae+3*ne+2];Z[J++]=je,Z[J++]=De,Z[J++]=ce,Z[J++]=255}--xe}}}function NF(e,t,r,n){for(var a=e[t++],i=1<<a,o=i+1,l=o+1,d=a+1,c=(1<<d)-1,u=0,x=0,b=0,g=e[t++],k=new Int32Array(4096),y=null;;){for(;u<16&&g!==0;)x|=e[t++]<<u,u+=8,g===1?g=e[t++]:--g;if(u<d)break;var N=x&c;if(x>>=d,u-=d,N!==i){if(N===o)break;for(var S=N<l?N:y,O=0,A=S;A>i;)A=k[A]>>8,++O;var P=A;if(b+O+(S!==N?1:0)>n)return void ms.log("Warning, gif stream longer than expected.");r[b++]=P;var q=b+=O;for(S!==N&&(r[b++]=P),A=S;O--;)A=k[A],r[--q]=255&A,A>>=8;y!==null&&l<4096&&(k[l++]=y<<8|P,l>=c+1&&d<12&&(++d,c=c<<1|1)),y=N}else l=o+1,c=(1<<(d=a+1))-1,y=null}return b!==n&&ms.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function G_(e){var t,r,n,a,i,o=Math.floor,l=new Array(64),d=new Array(64),c=new Array(64),u=new Array(64),x=new Array(65535),b=new Array(65535),g=new Array(64),k=new Array(64),y=[],N=0,S=7,O=new Array(64),A=new Array(64),P=new Array(64),q=new Array(256),W=new Array(2048),R=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],U=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],L=[0,1,2,3,4,5,6,7,8,9,10,11],Q=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],H=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],G=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],Z=[0,1,2,3,4,5,6,7,8,9,10,11],te=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],se=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function ue(B,re){for(var J=0,ie=0,Y=new Array,_e=1;_e<=16;_e++){for(var me=1;me<=B[_e];me++)Y[re[ie]]=[],Y[re[ie]][0]=J,Y[re[ie]][1]=_e,ie++,J++;J*=2}return Y}function ae(B){for(var re=B[0],J=B[1]-1;J>=0;)re&1<<J&&(N|=1<<S),J--,--S<0&&(N==255?(pe(255),pe(0)):pe(N),S=7,N=0)}function pe(B){y.push(B)}function ve(B){pe(B>>8&255),pe(255&B)}function Pe(B,re,J,ie,Y){for(var _e,me=Y[0],ne=Y[240],je=(function(Je,ct){var Ke,zt,Ft,fr,hr,sr,Sr,tr,Jt,Kt,ar=0;for(Jt=0;Jt<8;++Jt){Ke=Je[ar],zt=Je[ar+1],Ft=Je[ar+2],fr=Je[ar+3],hr=Je[ar+4],sr=Je[ar+5],Sr=Je[ar+6];var vr=Ke+(tr=Je[ar+7]),rr=Ke-tr,ft=zt+Sr,br=zt-Sr,yr=Ft+sr,gr=Ft-sr,ot=fr+hr,Lt=fr-hr,ir=vr+ot,Mt=vr-ot,Ge=ft+yr,At=ft-yr;Je[ar]=ir+Ge,Je[ar+4]=ir-Ge;var ur=.707106781*(At+Mt);Je[ar+2]=Mt+ur,Je[ar+6]=Mt-ur;var Dr=.382683433*((ir=Lt+gr)-(At=br+rr)),jr=.5411961*ir+Dr,Xt=1.306562965*At+Dr,Wr=.707106781*(Ge=gr+br),cr=rr+Wr,pr=rr-Wr;Je[ar+5]=pr+jr,Je[ar+3]=pr-jr,Je[ar+1]=cr+Xt,Je[ar+7]=cr-Xt,ar+=8}for(ar=0,Jt=0;Jt<8;++Jt){Ke=Je[ar],zt=Je[ar+8],Ft=Je[ar+16],fr=Je[ar+24],hr=Je[ar+32],sr=Je[ar+40],Sr=Je[ar+48];var Rr=Ke+(tr=Je[ar+56]),Ir=Ke-tr,Nn=zt+Sr,Mr=zt-Sr,Gr=Ft+sr,Ne=Ft-sr,Me=fr+hr,Re=fr-hr,Ce=Rr+Me,Ue=Rr-Me,de=Nn+Gr,qe=Nn-Gr;Je[ar]=Ce+de,Je[ar+32]=Ce-de;var et=.707106781*(qe+Ue);Je[ar+16]=Ue+et,Je[ar+48]=Ue-et;var tt=.382683433*((Ce=Re+Ne)-(qe=Mr+Ir)),Ae=.5411961*Ce+tt,Xe=1.306562965*qe+tt,mt=.707106781*(de=Ne+Mr),Tt=Ir+mt,Rt=Ir-mt;Je[ar+40]=Rt+Ae,Je[ar+24]=Rt-Ae,Je[ar+8]=Tt+Xe,Je[ar+56]=Tt-Xe,ar++}for(Jt=0;Jt<64;++Jt)Kt=Je[Jt]*ct[Jt],g[Jt]=Kt>0?Kt+.5|0:Kt-.5|0;return g})(B,re),De=0;De<64;++De)k[R[De]]=je[De];var ce=k[0]-J;J=k[0],ce==0?ae(ie[0]):(ae(ie[b[_e=32767+ce]]),ae(x[_e]));for(var Ee=63;Ee>0&&k[Ee]==0;)Ee--;if(Ee==0)return ae(me),J;for(var be,ge=1;ge<=Ee;){for(var Qe=ge;k[ge]==0&&ge<=Ee;)++ge;var Ye=ge-Qe;if(Ye>=16){be=Ye>>4;for(var at=1;at<=be;++at)ae(ne);Ye&=15}_e=32767+k[ge],ae(Y[(Ye<<4)+b[_e]]),ae(x[_e]),ge++}return Ee!=63&&ae(me),J}function xe(B){B=Math.min(Math.max(B,1),100),i!=B&&((function(re){for(var J=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],ie=0;ie<64;ie++){var Y=o((J[ie]*re+50)/100);Y=Math.min(Math.max(Y,1),255),l[R[ie]]=Y}for(var _e=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],me=0;me<64;me++){var ne=o((_e[me]*re+50)/100);ne=Math.min(Math.max(ne,1),255),d[R[me]]=ne}for(var je=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],De=0,ce=0;ce<8;ce++)for(var Ee=0;Ee<8;Ee++)c[De]=1/(l[R[De]]*je[ce]*je[Ee]*8),u[De]=1/(d[R[De]]*je[ce]*je[Ee]*8),De++})(B<50?Math.floor(5e3/B):Math.floor(200-2*B)),i=B)}this.encode=function(B,re){re&&xe(re),y=new Array,N=0,S=7,ve(65496),ve(65504),ve(16),pe(74),pe(70),pe(73),pe(70),pe(0),pe(1),pe(1),pe(0),ve(1),ve(1),pe(0),pe(0),(function(){ve(65499),ve(132),pe(0);for(var zt=0;zt<64;zt++)pe(l[zt]);pe(1);for(var Ft=0;Ft<64;Ft++)pe(d[Ft])})(),(function(zt,Ft){ve(65472),ve(17),pe(8),ve(Ft),ve(zt),pe(3),pe(1),pe(17),pe(0),pe(2),pe(17),pe(1),pe(3),pe(17),pe(1)})(B.width,B.height),(function(){ve(65476),ve(418),pe(0);for(var zt=0;zt<16;zt++)pe(U[zt+1]);for(var Ft=0;Ft<=11;Ft++)pe(L[Ft]);pe(16);for(var fr=0;fr<16;fr++)pe(Q[fr+1]);for(var hr=0;hr<=161;hr++)pe(H[hr]);pe(1);for(var sr=0;sr<16;sr++)pe(G[sr+1]);for(var Sr=0;Sr<=11;Sr++)pe(Z[Sr]);pe(17);for(var tr=0;tr<16;tr++)pe(te[tr+1]);for(var Jt=0;Jt<=161;Jt++)pe(se[Jt])})(),ve(65498),ve(12),pe(3),pe(1),pe(0),pe(2),pe(17),pe(3),pe(17),pe(0),pe(63),pe(0);var J=0,ie=0,Y=0;N=0,S=7,this.encode.displayName="_encode_";for(var _e,me,ne,je,De,ce,Ee,be,ge,Qe=B.data,Ye=B.width,at=B.height,Je=4*Ye,ct=0;ct<at;){for(_e=0;_e<Je;){for(De=Je*ct+_e,Ee=-1,be=0,ge=0;ge<64;ge++)ce=De+(be=ge>>3)*Je+(Ee=4*(7&ge)),ct+be>=at&&(ce-=Je*(ct+1+be-at)),_e+Ee>=Je&&(ce-=_e+Ee-Je+4),me=Qe[ce++],ne=Qe[ce++],je=Qe[ce++],O[ge]=(W[me]+W[ne+256|0]+W[je+512|0]>>16)-128,A[ge]=(W[me+768|0]+W[ne+1024|0]+W[je+1280|0]>>16)-128,P[ge]=(W[me+1280|0]+W[ne+1536|0]+W[je+1792|0]>>16)-128;J=Pe(O,c,J,t,n),ie=Pe(A,u,ie,r,a),Y=Pe(P,u,Y,r,a),_e+=32}ct+=8}if(S>=0){var Ke=[];Ke[1]=S+1,Ke[0]=(1<<S+1)-1,ae(Ke)}return ve(65497),new Uint8Array(y)},e=e||50,(function(){for(var B=String.fromCharCode,re=0;re<256;re++)q[re]=B(re)})(),t=ue(U,L),r=ue(G,Z),n=ue(Q,H),a=ue(te,se),(function(){for(var B=1,re=2,J=1;J<=15;J++){for(var ie=B;ie<re;ie++)b[32767+ie]=J,x[32767+ie]=[],x[32767+ie][1]=J,x[32767+ie][0]=ie;for(var Y=-(re-1);Y<=-B;Y++)b[32767+Y]=J,x[32767+Y]=[],x[32767+Y][1]=J,x[32767+Y][0]=re-1+Y;B<<=1,re<<=1}})(),(function(){for(var B=0;B<256;B++)W[B]=19595*B,W[B+256|0]=38470*B,W[B+512|0]=7471*B+32768,W[B+768|0]=-11059*B,W[B+1024|0]=-21709*B,W[B+1280|0]=32768*B+8421375,W[B+1536|0]=-27439*B,W[B+1792|0]=-5329*B})(),xe(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Wd(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function _F(e){function t(L){if(!L)throw Error("assert :P")}function r(L,Q,H){for(var G=0;4>G;G++)if(L[Q+G]!=H.charCodeAt(G))return!0;return!1}function n(L,Q,H,G,Z){for(var te=0;te<Z;te++)L[Q+te]=H[G+te]}function a(L,Q,H,G){for(var Z=0;Z<G;Z++)L[Q+Z]=H}function i(L){return new Int32Array(L)}function o(L,Q){for(var H=[],G=0;G<L;G++)H.push(new Q);return H}function l(L,Q){var H=[];return(function G(Z,te,se){for(var ue=se[te],ae=0;ae<ue&&(Z.push(se.length>te+1?[]:new Q),!(se.length<te+1));ae++)G(Z[ae],te+1,se)})(H,0,L),H}var d=function(){var L=this;function Q(I,F){for(var ee=1<<F-1>>>0;I&ee;)ee>>>=1;return ee?(I&ee-1)+ee:I}function H(I,F,ee,le,Se){t(!(le%ee));do I[F+(le-=ee)]=Se;while(0<le)}function G(I,F,ee,le,Se){if(t(2328>=Se),512>=Se)var Ie=i(512);else if((Ie=i(Se))==null)return 0;return(function(Le,Be,ze,We,dt,kt){var Ve,ht,bt=Be,Ut=1<<ze,wt=i(16),Bt=i(16);for(t(dt!=0),t(We!=null),t(Le!=null),t(0<ze),ht=0;ht<dt;++ht){if(15<We[ht])return 0;++wt[We[ht]]}if(wt[0]==dt)return 0;for(Bt[1]=0,Ve=1;15>Ve;++Ve){if(wt[Ve]>1<<Ve)return 0;Bt[Ve+1]=Bt[Ve]+wt[Ve]}for(ht=0;ht<dt;++ht)Ve=We[ht],0<We[ht]&&(kt[Bt[Ve]++]=ht);if(Bt[15]==1)return(We=new Z).g=0,We.value=kt[0],H(Le,bt,1,Ut,We),Ut;var Qt,mr=-1,nr=Ut-1,Xr=0,Br=1,Ln=1,$r=1<<ze;for(ht=0,Ve=1,dt=2;Ve<=ze;++Ve,dt<<=1){if(Br+=Ln<<=1,0>(Ln-=wt[Ve]))return 0;for(;0<wt[Ve];--wt[Ve])(We=new Z).g=Ve,We.value=kt[ht++],H(Le,bt+Xr,dt,$r,We),Xr=Q(Xr,Ve)}for(Ve=ze+1,dt=2;15>=Ve;++Ve,dt<<=1){if(Br+=Ln<<=1,0>(Ln-=wt[Ve]))return 0;for(;0<wt[Ve];--wt[Ve]){if(We=new Z,(Xr&nr)!=mr){for(bt+=$r,Qt=1<<(mr=Ve)-ze;15>mr&&!(0>=(Qt-=wt[mr]));)++mr,Qt<<=1;Ut+=$r=1<<(Qt=mr-ze),Le[Be+(mr=Xr&nr)].g=Qt+ze,Le[Be+mr].value=bt-Be-mr}We.g=Ve-ze,We.value=kt[ht++],H(Le,bt+(Xr>>ze),dt,$r,We),Xr=Q(Xr,Ve)}}return Br!=2*Bt[15]-1?0:Ut})(I,F,ee,le,Se,Ie)}function Z(){this.value=this.g=0}function te(){this.value=this.g=0}function se(){this.G=o(5,Z),this.H=i(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(ki,te)}function ue(I,F,ee,le){t(I!=null),t(F!=null),t(2147483648>le),I.Ca=254,I.I=0,I.b=-8,I.Ka=0,I.oa=F,I.pa=ee,I.Jd=F,I.Yc=ee+le,I.Zc=4<=le?ee+le-4+1:ee,me(I)}function ae(I,F){for(var ee=0;0<F--;)ee|=je(I,128)<<F;return ee}function pe(I,F){var ee=ae(I,F);return ne(I)?-ee:ee}function ve(I,F,ee,le){var Se,Ie=0;for(t(I!=null),t(F!=null),t(4294967288>le),I.Sb=le,I.Ra=0,I.u=0,I.h=0,4<le&&(le=4),Se=0;Se<le;++Se)Ie+=F[ee+Se]<<8*Se;I.Ra=Ie,I.bb=le,I.oa=F,I.pa=ee}function Pe(I){for(;8<=I.u&&I.bb<I.Sb;)I.Ra>>>=8,I.Ra+=I.oa[I.pa+I.bb]<<xo-8>>>0,++I.bb,I.u-=8;ie(I)&&(I.h=1,I.u=0)}function xe(I,F){if(t(0<=F),!I.h&&F<=Ni){var ee=J(I)&mo[F];return I.u+=F,Pe(I),ee}return I.h=1,I.u=0}function B(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function re(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function J(I){return I.Ra>>>(I.u&xo-1)>>>0}function ie(I){return t(I.bb<=I.Sb),I.h||I.bb==I.Sb&&I.u>xo}function Y(I,F){I.u=F,I.h=ie(I)}function _e(I){I.u>=Bn&&(t(I.u>=Bn),Pe(I))}function me(I){t(I!=null&&I.oa!=null),I.pa<I.Zc?(I.I=(I.oa[I.pa++]|I.I<<8)>>>0,I.b+=8):(t(I!=null&&I.oa!=null),I.pa<I.Yc?(I.b+=8,I.I=I.oa[I.pa++]|I.I<<8):I.Ka?I.b=0:(I.I<<=8,I.b+=8,I.Ka=1))}function ne(I){return ae(I,1)}function je(I,F){var ee=I.Ca;0>I.b&&me(I);var le=I.b,Se=ee*F>>>8,Ie=(I.I>>>le>Se)+0;for(Ie?(ee-=Se,I.I-=Se+1<<le>>>0):ee=Se+1,le=ee,Se=0;256<=le;)Se+=8,le>>=8;return le=7^Se+Ko[le],I.b-=le,I.Ca=(ee<<le)-1,Ie}function De(I,F,ee){I[F+0]=ee>>24&255,I[F+1]=ee>>16&255,I[F+2]=ee>>8&255,I[F+3]=255&ee}function ce(I,F){return I[F+0]|I[F+1]<<8}function Ee(I,F){return ce(I,F)|I[F+2]<<16}function be(I,F){return ce(I,F)|ce(I,F+2)<<16}function ge(I,F){var ee=1<<F;return t(I!=null),t(0<F),I.X=i(ee),I.X==null?0:(I.Mb=32-F,I.Xa=F,1)}function Qe(I,F){t(I!=null),t(F!=null),t(I.Xa==F.Xa),n(F.X,0,I.X,0,1<<F.Xa)}function Ye(){this.X=[],this.Xa=this.Mb=0}function at(I,F,ee,le){t(ee!=null),t(le!=null);var Se=ee[0],Ie=le[0];return Se==0&&(Se=(I*Ie+F/2)/F),Ie==0&&(Ie=(F*Se+I/2)/I),0>=Se||0>=Ie?0:(ee[0]=Se,le[0]=Ie,1)}function Je(I,F){return I+(1<<F)-1>>>F}function ct(I,F){return((4278255360&I)+(4278255360&F)>>>0&4278255360)+((16711935&I)+(16711935&F)>>>0&16711935)>>>0}function Ke(I,F){L[F]=function(ee,le,Se,Ie,Le,Be,ze){var We;for(We=0;We<Le;++We){var dt=L[I](Be[ze+We-1],Se,Ie+We);Be[ze+We]=ct(ee[le+We],dt)}}}function zt(){this.ud=this.hd=this.jd=0}function Ft(I,F){return((4278124286&(I^F))>>>1)+(I&F)>>>0}function fr(I){return 0<=I&&256>I?I:0>I?0:255<I?255:void 0}function hr(I,F){return fr(I+(I-F+.5>>1))}function sr(I,F,ee){return Math.abs(F-ee)-Math.abs(I-ee)}function Sr(I,F,ee,le,Se,Ie,Le){for(le=Ie[Le-1],ee=0;ee<Se;++ee)Ie[Le+ee]=le=ct(I[F+ee],le)}function tr(I,F,ee,le,Se){var Ie;for(Ie=0;Ie<ee;++Ie){var Le=I[F+Ie],Be=Le>>8&255,ze=16711935&(ze=(ze=16711935&Le)+((Be<<16)+Be));le[Se+Ie]=(4278255360&Le)+ze>>>0}}function Jt(I,F){F.jd=255&I,F.hd=I>>8&255,F.ud=I>>16&255}function Kt(I,F,ee,le,Se,Ie){var Le;for(Le=0;Le<le;++Le){var Be=F[ee+Le],ze=Be>>>8,We=Be,dt=255&(dt=(dt=Be>>>16)+((I.jd<<24>>24)*(ze<<24>>24)>>>5));We=255&(We=(We+=(I.hd<<24>>24)*(ze<<24>>24)>>>5)+((I.ud<<24>>24)*(dt<<24>>24)>>>5)),Se[Ie+Le]=(4278255360&Be)+(dt<<16)+We}}function ar(I,F,ee,le,Se){L[F]=function(Ie,Le,Be,ze,We,dt,kt,Ve,ht){for(ze=kt;ze<Ve;++ze)for(kt=0;kt<ht;++kt)We[dt++]=Se(Be[le(Ie[Le++])])},L[I]=function(Ie,Le,Be,ze,We,dt,kt){var Ve=8>>Ie.b,ht=Ie.Ea,bt=Ie.K[0],Ut=Ie.w;if(8>Ve)for(Ie=(1<<Ie.b)-1,Ut=(1<<Ve)-1;Le<Be;++Le){var wt,Bt=0;for(wt=0;wt<ht;++wt)wt&Ie||(Bt=le(ze[We++])),dt[kt++]=Se(bt[Bt&Ut]),Bt>>=Ve}else L["VP8LMapColor"+ee](ze,We,bt,Ut,dt,kt,Le,Be,ht)}}function vr(I,F,ee,le,Se){for(ee=F+ee;F<ee;){var Ie=I[F++];le[Se++]=Ie>>16&255,le[Se++]=Ie>>8&255,le[Se++]=255&Ie}}function rr(I,F,ee,le,Se){for(ee=F+ee;F<ee;){var Ie=I[F++];le[Se++]=Ie>>16&255,le[Se++]=Ie>>8&255,le[Se++]=255&Ie,le[Se++]=Ie>>24&255}}function ft(I,F,ee,le,Se){for(ee=F+ee;F<ee;){var Ie=(Le=I[F++])>>16&240|Le>>12&15,Le=240&Le|Le>>28&15;le[Se++]=Ie,le[Se++]=Le}}function br(I,F,ee,le,Se){for(ee=F+ee;F<ee;){var Ie=(Le=I[F++])>>16&248|Le>>13&7,Le=Le>>5&224|Le>>3&31;le[Se++]=Ie,le[Se++]=Le}}function yr(I,F,ee,le,Se){for(ee=F+ee;F<ee;){var Ie=I[F++];le[Se++]=255&Ie,le[Se++]=Ie>>8&255,le[Se++]=Ie>>16&255}}function gr(I,F,ee,le,Se,Ie){if(Ie==0)for(ee=F+ee;F<ee;)De(le,((Ie=I[F++])[0]>>24|Ie[1]>>8&65280|Ie[2]<<8&16711680|Ie[3]<<24)>>>0),Se+=32;else n(le,Se,I,F,ee)}function ot(I,F){L[F][0]=L[I+"0"],L[F][1]=L[I+"1"],L[F][2]=L[I+"2"],L[F][3]=L[I+"3"],L[F][4]=L[I+"4"],L[F][5]=L[I+"5"],L[F][6]=L[I+"6"],L[F][7]=L[I+"7"],L[F][8]=L[I+"8"],L[F][9]=L[I+"9"],L[F][10]=L[I+"10"],L[F][11]=L[I+"11"],L[F][12]=L[I+"12"],L[F][13]=L[I+"13"],L[F][14]=L[I+"0"],L[F][15]=L[I+"0"]}function Lt(I){return I==Ff||I==kx||I==wh||I==Nx}function ir(){this.eb=[],this.size=this.A=this.fb=0}function Mt(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Ge(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new ir,this.f.kb=new Mt,this.sd=null}function At(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function ur(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Dr(I){return alert("todo:WebPSamplerProcessPlane"),I.T}function jr(I,F){var ee=I.T,le=F.ba.f.RGBA,Se=le.eb,Ie=le.fb+I.ka*le.A,Le=Qi[F.ba.S],Be=I.y,ze=I.O,We=I.f,dt=I.N,kt=I.ea,Ve=I.W,ht=F.cc,bt=F.dc,Ut=F.Mc,wt=F.Nc,Bt=I.ka,Qt=I.ka+I.T,mr=I.U,nr=mr+1>>1;for(Bt==0?Le(Be,ze,null,null,We,dt,kt,Ve,We,dt,kt,Ve,Se,Ie,null,null,mr):(Le(F.ec,F.fc,Be,ze,ht,bt,Ut,wt,We,dt,kt,Ve,Se,Ie-le.A,Se,Ie,mr),++ee);Bt+2<Qt;Bt+=2)ht=We,bt=dt,Ut=kt,wt=Ve,dt+=I.Rc,Ve+=I.Rc,Ie+=2*le.A,Le(Be,(ze+=2*I.fa)-I.fa,Be,ze,ht,bt,Ut,wt,We,dt,kt,Ve,Se,Ie-le.A,Se,Ie,mr);return ze+=I.fa,I.j+Qt<I.o?(n(F.ec,F.fc,Be,ze,mr),n(F.cc,F.dc,We,dt,nr),n(F.Mc,F.Nc,kt,Ve,nr),ee--):1&Qt||Le(Be,ze,null,null,We,dt,kt,Ve,We,dt,kt,Ve,Se,Ie+le.A,null,null,mr),ee}function Xt(I,F,ee){var le=I.F,Se=[I.J];if(le!=null){var Ie=I.U,Le=F.ba.S,Be=Le==Rf||Le==wh;F=F.ba.f.RGBA;var ze=[0],We=I.ka;ze[0]=I.T,I.Kb&&(We==0?--ze[0]:(--We,Se[0]-=I.width),I.j+I.ka+I.T==I.o&&(ze[0]=I.o-I.j-We));var dt=F.eb;We=F.fb+We*F.A,I=If(le,Se[0],I.width,Ie,ze,dt,We+(Be?0:3),F.A),t(ee==ze),I&&Lt(Le)&&Md(dt,We,Be,Ie,ze,F.A)}return 0}function Wr(I){var F=I.ma,ee=F.ba.S,le=11>ee,Se=ee==bo||ee==Hl||ee==Rf||ee==yh||ee==12||Lt(ee);if(F.memory=null,F.Ib=null,F.Jb=null,F.Nd=null,!vl(F.Oa,I,Se?11:12))return 0;if(Se&&Lt(ee)&&Po(),I.da)alert("todo:use_scaling");else{if(le){if(F.Ib=Dr,I.Kb){if(ee=I.U+1>>1,F.memory=i(I.U+2*ee),F.memory==null)return 0;F.ec=F.memory,F.fc=0,F.cc=F.ec,F.dc=F.fc+I.U,F.Mc=F.cc,F.Nc=F.dc+ee,F.Ib=jr,Po()}}else alert("todo:EmitYUV");Se&&(F.Jb=Xt,le&&yi())}if(le&&!wu){for(I=0;256>I;++I)Zi[I]=89858*(I-128)+_h>>Xl,t4[I]=-22014*(I-128)+_h,Lv[I]=-45773*(I-128),Ax[I]=113618*(I-128)+_h>>Xl;for(I=l0;I<yu;++I)F=76283*(I-16)+_h>>Xl,r4[I-l0]=Aa(F,255),n4[I-l0]=Aa(F+8>>4,15);wu=1}return 1}function cr(I){var F=I.ma,ee=I.U,le=I.T;return t(!(1&I.ka)),0>=ee||0>=le?0:(ee=F.Ib(I,F),F.Jb!=null&&F.Jb(I,F,ee),F.Dc+=ee,1)}function pr(I){I.ma.memory=null}function Rr(I,F,ee,le){return xe(I,8)!=47?0:(F[0]=xe(I,14)+1,ee[0]=xe(I,14)+1,le[0]=xe(I,1),xe(I,3)!=0?0:!I.h)}function Ir(I,F){if(4>I)return I+1;var ee=I-2>>1;return(2+(1&I)<<ee)+xe(F,ee)+1}function Nn(I,F){return 120<F?F-120:1<=(ee=((ee=Vl[F-1])>>4)*I+(8-(15&ee)))?ee:1;var ee}function Mr(I,F,ee){var le=J(ee),Se=I[F+=255&le].g-8;return 0<Se&&(Y(ee,ee.u+8),le=J(ee),F+=I[F].value,F+=le&(1<<Se)-1),Y(ee,ee.u+I[F].g),I[F].value}function Gr(I,F,ee){return ee.g+=I.g,ee.value+=I.value<<F>>>0,t(8>=ee.g),I.g}function Ne(I,F,ee){var le=I.xc;return t((F=le==0?0:I.vc[I.md*(ee>>le)+(F>>le)])<I.Wb),I.Ya[F]}function Me(I,F,ee,le){var Se=I.ab,Ie=I.c*F,Le=I.C;F=Le+F;var Be=ee,ze=le;for(le=I.Ta,ee=I.Ua;0<Se--;){var We=I.gc[Se],dt=Le,kt=F,Ve=Be,ht=ze,bt=(ze=le,Be=ee,We.Ea);switch(t(dt<kt),t(kt<=We.nc),We.hc){case 2:p(Ve,ht,(kt-dt)*bt,ze,Be);break;case 0:var Ut=dt,wt=kt,Bt=ze,Qt=Be,mr=($r=We).Ea;Ut==0&&(ye(Ve,ht,null,null,1,Bt,Qt),Sr(Ve,ht+1,0,0,mr-1,Bt,Qt+1),ht+=mr,Qt+=mr,++Ut);for(var nr=1<<$r.b,Xr=nr-1,Br=Je(mr,$r.b),Ln=$r.K,$r=$r.w+(Ut>>$r.b)*Br;Ut<wt;){var la=Ln,hs=$r,qn=1;for(f(Ve,ht,Bt,Qt-mr,1,Bt,Qt);qn<mr;){var Ur=(qn&~Xr)+nr;Ur>mr&&(Ur=mr),(0,D[la[hs++]>>8&15])(Ve,ht+ +qn,Bt,Qt+qn-mr,Ur-qn,Bt,Qt+qn),qn=Ur}ht+=mr,Qt+=mr,++Ut&Xr||($r+=Br)}kt!=We.nc&&n(ze,Be-bt,ze,Be+(kt-dt-1)*bt,bt);break;case 1:for(bt=Ve,wt=ht,mr=(Ve=We.Ea)-(Qt=Ve&~(Bt=(ht=1<<We.b)-1)),Ut=Je(Ve,We.b),nr=We.K,We=We.w+(dt>>We.b)*Ut;dt<kt;){for(Xr=nr,Br=We,Ln=new zt,$r=wt+Qt,la=wt+Ve;wt<$r;)Jt(Xr[Br++],Ln),z(Ln,bt,wt,ht,ze,Be),wt+=ht,Be+=ht;wt<la&&(Jt(Xr[Br++],Ln),z(Ln,bt,wt,mr,ze,Be),wt+=mr,Be+=mr),++dt&Bt||(We+=Ut)}break;case 3:if(Ve==ze&&ht==Be&&0<We.b){for(wt=ze,Ve=bt=Be+(kt-dt)*bt-(Qt=(kt-dt)*Je(We.Ea,We.b)),ht=ze,Bt=Be,Ut=[],Qt=(mr=Qt)-1;0<=Qt;--Qt)Ut[Qt]=ht[Bt+Qt];for(Qt=mr-1;0<=Qt;--Qt)wt[Ve+Qt]=Ut[Qt];v(We,dt,kt,ze,bt,ze,Be)}else v(We,dt,kt,Ve,ht,ze,Be)}Be=le,ze=ee}ze!=ee&&n(le,ee,Be,ze,Ie)}function Re(I,F){var ee=I.V,le=I.Ba+I.c*I.C,Se=F-I.C;if(t(F<=I.l.o),t(16>=Se),0<Se){var Ie=I.l,Le=I.Ta,Be=I.Ua,ze=Ie.width;if(Me(I,Se,ee,le),Se=Be=[Be],t((ee=I.C)<(le=F)),t(Ie.v<Ie.va),le>Ie.o&&(le=Ie.o),ee<Ie.j){var We=Ie.j-ee;ee=Ie.j,Se[0]+=We*ze}if(ee>=le?ee=0:(Se[0]+=4*Ie.v,Ie.ka=ee-Ie.j,Ie.U=Ie.va-Ie.v,Ie.T=le-ee,ee=1),ee){if(Be=Be[0],11>(ee=I.ca).S){var dt=ee.f.RGBA,kt=(le=ee.S,Se=Ie.U,Ie=Ie.T,We=dt.eb,dt.A),Ve=Ie;for(dt=dt.fb+I.Ma*dt.A;0<Ve--;){var ht=Le,bt=Be,Ut=Se,wt=We,Bt=dt;switch(le){case yx:X(ht,bt,Ut,wt,Bt);break;case bo:oe(ht,bt,Ut,wt,Bt);break;case Ff:oe(ht,bt,Ut,wt,Bt),Md(wt,Bt,0,Ut,1,0);break;case wx:He(ht,bt,Ut,wt,Bt);break;case Hl:gr(ht,bt,Ut,wt,Bt,1);break;case kx:gr(ht,bt,Ut,wt,Bt,1),Md(wt,Bt,0,Ut,1,0);break;case Rf:gr(ht,bt,Ut,wt,Bt,0);break;case wh:gr(ht,bt,Ut,wt,Bt,0),Md(wt,Bt,1,Ut,1,0);break;case yh:we(ht,bt,Ut,wt,Bt);break;case Nx:we(ht,bt,Ut,wt,Bt),ql(wt,Bt,Ut,1,0);break;case xu:Oe(ht,bt,Ut,wt,Bt);break;default:t(0)}Be+=ze,dt+=kt}I.Ma+=Ie}else alert("todo:EmitRescaledRowsYUVA");t(I.Ma<=ee.height)}}I.C=F,t(I.C<=I.i)}function Ce(I){var F;if(0<I.ua)return 0;for(F=0;F<I.Wb;++F){var ee=I.Ya[F].G,le=I.Ya[F].H;if(0<ee[1][le[1]+0].g||0<ee[2][le[2]+0].g||0<ee[3][le[3]+0].g)return 0}return 1}function Ue(I,F,ee,le,Se,Ie){if(I.Z!=0){var Le=I.qd,Be=I.rd;for(t(Rd[I.Z]!=null);F<ee;++F)Rd[I.Z](Le,Be,le,Se,le,Se,Ie),Le=le,Be=Se,Se+=Ie;I.qd=Le,I.rd=Be}}function de(I,F){var ee=I.l.ma,le=ee.Z==0||ee.Z==1?I.l.j:I.C;if(le=I.C<le?le:I.C,t(F<=I.l.o),F>le){var Se=I.l.width,Ie=ee.ca,Le=ee.tb+Se*le,Be=I.V,ze=I.Ba+I.c*le,We=I.gc;t(I.ab==1),t(We[0].hc==3),j(We[0],le,F,Be,ze,Ie,Le),Ue(ee,le,F,Ie,Le,Se)}I.C=I.Ma=F}function qe(I,F,ee,le,Se,Ie,Le){var Be=I.$/le,ze=I.$%le,We=I.m,dt=I.s,kt=ee+I.$,Ve=kt;Se=ee+le*Se;var ht=ee+le*Ie,bt=280+dt.ua,Ut=I.Pb?Be:16777216,wt=0<dt.ua?dt.Wa:null,Bt=dt.wc,Qt=kt<ht?Ne(dt,ze,Be):null;t(I.C<Ie),t(ht<=Se);var mr=!1;e:for(;;){for(;mr||kt<ht;){var nr=0;if(Be>=Ut){var Xr=kt-ee;t((Ut=I).Pb),Ut.wd=Ut.m,Ut.xd=Xr,0<Ut.s.ua&&Qe(Ut.s.Wa,Ut.s.vb),Ut=Be+pu}if(ze&Bt||(Qt=Ne(dt,ze,Be)),t(Qt!=null),Qt.Qb&&(F[kt]=Qt.qb,mr=!0),!mr)if(_e(We),Qt.jc){nr=We,Xr=F;var Br=kt,Ln=Qt.pd[J(nr)&ki-1];t(Qt.jc),256>Ln.g?(Y(nr,nr.u+Ln.g),Xr[Br]=Ln.value,nr=0):(Y(nr,nr.u+Ln.g-256),t(256<=Ln.value),nr=Ln.value),nr==0&&(mr=!0)}else nr=Mr(Qt.G[0],Qt.H[0],We);if(We.h)break;if(mr||256>nr){if(!mr)if(Qt.nd)F[kt]=(Qt.qb|nr<<8)>>>0;else{if(_e(We),mr=Mr(Qt.G[1],Qt.H[1],We),_e(We),Xr=Mr(Qt.G[2],Qt.H[2],We),Br=Mr(Qt.G[3],Qt.H[3],We),We.h)break;F[kt]=(Br<<24|mr<<16|nr<<8|Xr)>>>0}if(mr=!1,++kt,++ze>=le&&(ze=0,++Be,Le!=null&&Be<=Ie&&!(Be%16)&&Le(I,Be),wt!=null))for(;Ve<kt;)nr=F[Ve++],wt.X[(506832829*nr&4294967295)>>>wt.Mb]=nr}else if(280>nr){if(nr=Ir(nr-256,We),Xr=Mr(Qt.G[4],Qt.H[4],We),_e(We),Xr=Nn(le,Xr=Ir(Xr,We)),We.h)break;if(kt-ee<Xr||Se-kt<nr)break e;for(Br=0;Br<nr;++Br)F[kt+Br]=F[kt+Br-Xr];for(kt+=nr,ze+=nr;ze>=le;)ze-=le,++Be,Le!=null&&Be<=Ie&&!(Be%16)&&Le(I,Be);if(t(kt<=Se),ze&Bt&&(Qt=Ne(dt,ze,Be)),wt!=null)for(;Ve<kt;)nr=F[Ve++],wt.X[(506832829*nr&4294967295)>>>wt.Mb]=nr}else{if(!(nr<bt))break e;for(mr=nr-280,t(wt!=null);Ve<kt;)nr=F[Ve++],wt.X[(506832829*nr&4294967295)>>>wt.Mb]=nr;nr=kt,t(!(mr>>>(Xr=wt).Xa)),F[nr]=Xr.X[mr],mr=!0}mr||t(We.h==ie(We))}if(I.Pb&&We.h&&kt<Se)t(I.m.h),I.a=5,I.m=I.wd,I.$=I.xd,0<I.s.ua&&Qe(I.s.vb,I.s.Wa);else{if(We.h)break e;Le!=null&&Le(I,Be>Ie?Ie:Be),I.a=0,I.$=kt-ee}return 1}return I.a=3,0}function et(I){t(I!=null),I.vc=null,I.yc=null,I.Ya=null;var F=I.Wa;F!=null&&(F.X=null),I.vb=null,t(I!=null)}function tt(){var I=new Ar;return I==null?null:(I.a=0,I.xb=Mp,ot("Predictor","VP8LPredictors"),ot("Predictor","VP8LPredictors_C"),ot("PredictorAdd","VP8LPredictorsAdd"),ot("PredictorAdd","VP8LPredictorsAdd_C"),p=tr,z=Kt,X=vr,oe=rr,we=ft,Oe=br,He=yr,L.VP8LMapColor32b=_,L.VP8LMapColor8b=E,I)}function Ae(I,F,ee,le,Se){var Ie=1,Le=[I],Be=[F],ze=le.m,We=le.s,dt=null,kt=0;e:for(;;){if(ee)for(;Ie&&xe(ze,1);){var Ve=Le,ht=Be,bt=le,Ut=1,wt=bt.m,Bt=bt.gc[bt.ab],Qt=xe(wt,2);if(bt.Oc&1<<Qt)Ie=0;else{switch(bt.Oc|=1<<Qt,Bt.hc=Qt,Bt.Ea=Ve[0],Bt.nc=ht[0],Bt.K=[null],++bt.ab,t(4>=bt.ab),Qt){case 0:case 1:Bt.b=xe(wt,3)+2,Ut=Ae(Je(Bt.Ea,Bt.b),Je(Bt.nc,Bt.b),0,bt,Bt.K),Bt.K=Bt.K[0];break;case 3:var mr,nr=xe(wt,8)+1,Xr=16<nr?0:4<nr?1:2<nr?2:3;if(Ve[0]=Je(Bt.Ea,Xr),Bt.b=Xr,mr=Ut=Ae(nr,1,0,bt,Bt.K)){var Br,Ln=nr,$r=Bt,la=1<<(8>>$r.b),hs=i(la);if(hs==null)mr=0;else{var qn=$r.K[0],Ur=$r.w;for(hs[0]=$r.K[0][0],Br=1;Br<1*Ln;++Br)hs[Br]=ct(qn[Ur+Br],hs[Br-1]);for(;Br<4*la;++Br)hs[Br]=0;$r.K[0]=null,$r.K[0]=hs,mr=1}}Ut=mr;break;case 2:break;default:t(0)}Ie=Ut}}if(Le=Le[0],Be=Be[0],Ie&&xe(ze,1)&&!(Ie=1<=(kt=xe(ze,4))&&11>=kt)){le.a=3;break e}var _r;if(_r=Ie)t:{var _s,jn,Wn,qa=le,Si=Le,Ji=Be,ts=kt,ai=ee,vo=qa.m,si=qa.s,Jn=[null],_a=1,Ss=0,Ta=Wl[ts];r:for(;;){if(ai&&xe(vo,1)){var ji=xe(vo,3)+2,js=Je(Si,ji),Sa=Je(Ji,ji),Qs=js*Sa;if(!Ae(js,Sa,0,qa,Jn))break r;for(Jn=Jn[0],si.xc=ji,_s=0;_s<Qs;++_s){var Ha=Jn[_s]>>8&65535;Jn[_s]=Ha,Ha>=_a&&(_a=Ha+1)}}if(vo.h)break r;for(jn=0;5>jn;++jn){var ii=i0[jn];!jn&&0<ts&&(ii+=1<<ts),Ss<ii&&(Ss=ii)}var oi=o(_a*Ta,Z),Wa=_a,wa=o(Wa,se);if(wa==null)var yo=null;else t(65536>=Wa),yo=wa;var Bs=i(Ss);if(yo==null||Bs==null||oi==null){qa.a=1;break r}var fn=oi;for(_s=Wn=0;_s<_a;++_s){var bn=yo[_s],ja=bn.G,Xo=bn.H,Yl=0,Do=1,li=0;for(jn=0;5>jn;++jn){ii=i0[jn],ja[jn]=fn,Xo[jn]=Wn,!jn&&0<ts&&(ii+=1<<ts);a:{var ku,Nu=ii,Tx=qa,rs=Bs,Rp=fn,Fp=Wn,Ox=0,Fd=Tx.m,a4=xe(Fd,1);if(a(rs,0,0,Nu),a4){var Bp=xe(Fd,1)+1,Up=xe(Fd,1),Px=xe(Fd,Up==0?1:8);rs[Px]=1,Bp==2&&(rs[Px=xe(Fd,8)]=1);var Mi=1}else{var Us=i(19),qf=xe(Fd,4)+4;if(19<qf){Tx.a=3;var _u=0;break a}for(ku=0;ku<qf;++ku)Us[Bf[ku]]=xe(Fd,3);var jh=void 0,c0=void 0,ed=Tx,Ix=Us,Ch=Nu,Dx=rs,Mx=0,Bd=ed.m,zp=8,qp=o(128,Z);n:for(;G(qp,0,7,Ix,19);){if(xe(Bd,1)){var Rv=2+2*xe(Bd,3);if((jh=2+xe(Bd,Rv))>Ch)break n}else jh=Ch;for(c0=0;c0<Ch&&jh--;){_e(Bd);var Hp=qp[0+(127&J(Bd))];Y(Bd,Bd.u+Hp.g);var Su=Hp.value;if(16>Su)Dx[c0++]=Su,Su!=0&&(zp=Su);else{var Fv=Su==16,Bv=Su-16,Uv=kh[Bv],$p=xe(Bd,$l[Bv])+Uv;if(c0+$p>Ch)break n;for(var zv=Fv?zp:0;0<$p--;)Dx[c0++]=zv}}Mx=1;break n}Mx||(ed.a=3),Mi=Mx}(Mi=Mi&&!Fd.h)&&(Ox=G(Rp,Fp,8,rs,Nu)),Mi&&Ox!=0?_u=Ox:(Tx.a=3,_u=0)}if(_u==0)break r;if(Do&&_x[jn]==1&&(Do=fn[Wn].g==0),Yl+=fn[Wn].g,Wn+=_u,3>=jn){var d0,Lx=Bs[0];for(d0=1;d0<ii;++d0)Bs[d0]>Lx&&(Lx=Bs[d0]);li+=Lx}}if(bn.nd=Do,bn.Qb=0,Do&&(bn.qb=(ja[3][Xo[3]+0].value<<24|ja[1][Xo[1]+0].value<<16|ja[2][Xo[2]+0].value)>>>0,Yl==0&&256>ja[0][Xo[0]+0].value&&(bn.Qb=1,bn.qb+=ja[0][Xo[0]+0].value<<8)),bn.jc=!bn.Qb&&6>li,bn.jc){var Hf,td=bn;for(Hf=0;Hf<ki;++Hf){var Ud=Hf,zd=td.pd[Ud],Rx=td.G[0][td.H[0]+Ud];256<=Rx.value?(zd.g=Rx.g+256,zd.value=Rx.value):(zd.g=0,zd.value=0,Ud>>=Gr(Rx,8,zd),Ud>>=Gr(td.G[1][td.H[1]+Ud],16,zd),Ud>>=Gr(td.G[2][td.H[2]+Ud],0,zd),Gr(td.G[3][td.H[3]+Ud],24,zd))}}}si.vc=Jn,si.Wb=_a,si.Ya=yo,si.yc=oi,_r=1;break t}_r=0}if(!(Ie=_r)){le.a=3;break e}if(0<kt){if(We.ua=1<<kt,!ge(We.Wa,kt)){le.a=1,Ie=0;break e}}else We.ua=0;var Fx=le,u0=Le,qv=Be,Ah=Fx.s,Eh=Ah.xc;if(Fx.c=u0,Fx.i=qv,Ah.md=Je(u0,Eh),Ah.wc=Eh==0?-1:(1<<Eh)-1,ee){le.xb=gu;break e}if((dt=i(Le*Be))==null){le.a=1,Ie=0;break e}Ie=(Ie=qe(le,dt,0,Le,Be,Be,null))&&!ze.h;break e}return Ie?(Se!=null?Se[0]=dt:(t(dt==null),t(ee)),le.$=0,ee||et(We)):et(We),Ie}function Xe(I,F){var ee=I.c*I.i,le=ee+F+16*F;return t(I.c<=F),I.V=i(le),I.V==null?(I.Ta=null,I.Ua=0,I.a=1,0):(I.Ta=I.V,I.Ua=I.Ba+ee+F,1)}function mt(I,F){var ee=I.C,le=F-ee,Se=I.V,Ie=I.Ba+I.c*ee;for(t(F<=I.l.o);0<le;){var Le=16<le?16:le,Be=I.l.ma,ze=I.l.width,We=ze*Le,dt=Be.ca,kt=Be.tb+ze*ee,Ve=I.Ta,ht=I.Ua;Me(I,Le,Se,Ie),yl(Ve,ht,dt,kt,We),Ue(Be,ee,ee+Le,dt,kt,ze),le-=Le,Se+=Le*I.c,ee+=Le}t(ee==F),I.C=I.Ma=F}function Tt(){this.ub=this.yd=this.td=this.Rb=0}function Rt(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Yt(){this.Fb=this.Bb=this.Cb=0,this.Zb=i(4),this.Lb=i(4)}function or(){this.Yb=(function(){var I=[];return(function F(ee,le,Se){for(var Ie=Se[le],Le=0;Le<Ie&&(ee.push(Se.length>le+1?[]:0),!(Se.length<le+1));Le++)F(ee[Le],le+1,Se)})(I,0,[3,11]),I})()}function Cr(){this.jb=i(3),this.Wc=l([4,8],or),this.Xc=l([4,17],or)}function Et(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new i(4),this.od=new i(4)}function dn(){this.ld=this.La=this.dd=this.tc=0}function Zr(){this.Na=this.la=0}function ia(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function ta(){this.ad=i(384),this.Za=0,this.Ob=i(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Jr(){this.uc=this.M=this.Nb=0,this.wa=Array(new dn),this.Y=0,this.ya=Array(new ta),this.aa=0,this.l=new ga}function Fr(){this.y=i(16),this.f=i(8),this.ea=i(8)}function rn(){this.cb=this.a=0,this.sc="",this.m=new B,this.Od=new Tt,this.Kc=new Rt,this.ed=new Et,this.Qa=new Yt,this.Ic=this.$c=this.Aa=0,this.D=new Jr,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,B),this.ia=0,this.pb=o(4,ia),this.Pa=new Cr,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Fr),this.Hd=0,this.rb=Array(new Zr),this.sb=0,this.wa=Array(new dn),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new ta),this.L=this.aa=0,this.gd=l([4,2],dn),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function ga(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Rs(){var I=new rn;return I!=null&&(I.a=0,I.sc="OK",I.cb=0,I.Xb=0,wl||(wl=ml)),I}function ra(I,F,ee){return I.a==0&&(I.a=F,I.sc=ee,I.cb=0),0}function Gn(I,F,ee){return 3<=ee&&I[F+0]==157&&I[F+1]==1&&I[F+2]==42}function Gi(I,F){if(I==null)return 0;if(I.a=0,I.sc="OK",F==null)return ra(I,2,"null VP8Io passed to VP8GetHeaders()");var ee=F.data,le=F.w,Se=F.ha;if(4>Se)return ra(I,7,"Truncated header.");var Ie=ee[le+0]|ee[le+1]<<8|ee[le+2]<<16,Le=I.Od;if(Le.Rb=!(1&Ie),Le.td=Ie>>1&7,Le.yd=Ie>>4&1,Le.ub=Ie>>5,3<Le.td)return ra(I,3,"Incorrect keyframe parameters.");if(!Le.yd)return ra(I,4,"Frame not displayable.");le+=3,Se-=3;var Be=I.Kc;if(Le.Rb){if(7>Se)return ra(I,7,"cannot parse picture header");if(!Gn(ee,le,Se))return ra(I,3,"Bad code word");Be.c=16383&(ee[le+4]<<8|ee[le+3]),Be.Td=ee[le+4]>>6,Be.i=16383&(ee[le+6]<<8|ee[le+5]),Be.Ud=ee[le+6]>>6,le+=7,Se-=7,I.za=Be.c+15>>4,I.Ub=Be.i+15>>4,F.width=Be.c,F.height=Be.i,F.Da=0,F.j=0,F.v=0,F.va=F.width,F.o=F.height,F.da=0,F.ib=F.width,F.hb=F.height,F.U=F.width,F.T=F.height,a((Ie=I.Pa).jb,0,255,Ie.jb.length),t((Ie=I.Qa)!=null),Ie.Cb=0,Ie.Bb=0,Ie.Fb=1,a(Ie.Zb,0,0,Ie.Zb.length),a(Ie.Lb,0,0,Ie.Lb)}if(Le.ub>Se)return ra(I,7,"bad partition length");ue(Ie=I.m,ee,le,Le.ub),le+=Le.ub,Se-=Le.ub,Le.Rb&&(Be.Ld=ne(Ie),Be.Kd=ne(Ie)),Be=I.Qa;var ze,We=I.Pa;if(t(Ie!=null),t(Be!=null),Be.Cb=ne(Ie),Be.Cb){if(Be.Bb=ne(Ie),ne(Ie)){for(Be.Fb=ne(Ie),ze=0;4>ze;++ze)Be.Zb[ze]=ne(Ie)?pe(Ie,7):0;for(ze=0;4>ze;++ze)Be.Lb[ze]=ne(Ie)?pe(Ie,6):0}if(Be.Bb)for(ze=0;3>ze;++ze)We.jb[ze]=ne(Ie)?ae(Ie,8):255}else Be.Bb=0;if(Ie.Ka)return ra(I,3,"cannot parse segment header");if((Be=I.ed).zd=ne(Ie),Be.Tb=ae(Ie,6),Be.wb=ae(Ie,3),Be.Pc=ne(Ie),Be.Pc&&ne(Ie)){for(We=0;4>We;++We)ne(Ie)&&(Be.vd[We]=pe(Ie,6));for(We=0;4>We;++We)ne(Ie)&&(Be.od[We]=pe(Ie,6))}if(I.L=Be.Tb==0?0:Be.zd?1:2,Ie.Ka)return ra(I,3,"cannot parse filter header");var dt=Se;if(Se=ze=le,le=ze+dt,Be=dt,I.Xb=(1<<ae(I.m,2))-1,dt<3*(We=I.Xb))ee=7;else{for(ze+=3*We,Be-=3*We,dt=0;dt<We;++dt){var kt=ee[Se+0]|ee[Se+1]<<8|ee[Se+2]<<16;kt>Be&&(kt=Be),ue(I.Jc[+dt],ee,ze,kt),ze+=kt,Be-=kt,Se+=3}ue(I.Jc[+We],ee,ze,Be),ee=ze<le?0:5}if(ee!=0)return ra(I,ee,"cannot parse partitions");for(ee=ae(ze=I.m,7),Se=ne(ze)?pe(ze,4):0,le=ne(ze)?pe(ze,4):0,Be=ne(ze)?pe(ze,4):0,We=ne(ze)?pe(ze,4):0,ze=ne(ze)?pe(ze,4):0,dt=I.Qa,kt=0;4>kt;++kt){if(dt.Cb){var Ve=dt.Zb[kt];dt.Fb||(Ve+=ee)}else{if(0<kt){I.pb[kt]=I.pb[0];continue}Ve=ee}var ht=I.pb[kt];ht.Sc[0]=Gl[Aa(Ve+Se,127)],ht.Sc[1]=Kl[Aa(Ve+0,127)],ht.Eb[0]=2*Gl[Aa(Ve+le,127)],ht.Eb[1]=101581*Kl[Aa(Ve+Be,127)]>>16,8>ht.Eb[1]&&(ht.Eb[1]=8),ht.Qc[0]=Gl[Aa(Ve+We,117)],ht.Qc[1]=Kl[Aa(Ve+ze,127)],ht.lc=Ve+ze}if(!Le.Rb)return ra(I,4,"Not a key frame.");for(ne(Ie),Le=I.Pa,ee=0;4>ee;++ee){for(Se=0;8>Se;++Se)for(le=0;3>le;++le)for(Be=0;11>Be;++Be)We=je(Ie,us[ee][Se][le][Be])?ae(Ie,8):Mv[ee][Se][le][Be],Le.Wc[ee][Se].Yb[le][Be]=We;for(Se=0;17>Se;++Se)Le.Xc[ee][Se]=Le.Wc[ee][ua[Se]]}return I.kc=ne(Ie),I.kc&&(I.Bd=ae(Ie,8)),I.cb=1}function ml(I,F,ee,le,Se,Ie,Le){var Be=F[Se].Yb[ee];for(ee=0;16>Se;++Se){if(!je(I,Be[ee+0]))return Se;for(;!je(I,Be[ee+1]);)if(Be=F[++Se].Yb[0],ee=0,Se==16)return 16;var ze=F[Se+1].Yb;if(je(I,Be[ee+2])){var We=I,dt=0;if(je(We,(Ve=Be)[(kt=ee)+3]))if(je(We,Ve[kt+6])){for(Be=0,kt=2*(dt=je(We,Ve[kt+8]))+(Ve=je(We,Ve[kt+9+dt])),dt=0,Ve=Dv[kt];Ve[Be];++Be)dt+=dt+je(We,Ve[Be]);dt+=3+(8<<kt)}else je(We,Ve[kt+7])?(dt=7+2*je(We,165),dt+=je(We,145)):dt=5+je(We,159);else dt=je(We,Ve[kt+4])?3+je(We,Ve[kt+5]):2;Be=ze[2]}else dt=1,Be=ze[1];ze=Le+Dp[Se],0>(We=I).b&&me(We);var kt,Ve=We.b,ht=(kt=We.Ca>>1)-(We.I>>Ve)>>31;--We.b,We.Ca+=ht,We.Ca|=1,We.I-=(kt+1&ht)<<Ve,Ie[ze]=((dt^ht)-ht)*le[(0<Se)+0]}return 16}function ya(I){var F=I.rb[I.sb-1];F.la=0,F.Na=0,a(I.zc,0,0,I.zc.length),I.ja=0}function Ns(I,F,ee,le,Se){Se=I[F+ee+32*le]+(Se>>3),I[F+ee+32*le]=-256&Se?0>Se?0:255:Se}function na(I,F,ee,le,Se,Ie){Ns(I,F,0,ee,le+Se),Ns(I,F,1,ee,le+Ie),Ns(I,F,2,ee,le-Ie),Ns(I,F,3,ee,le-Se)}function Da(I){return(20091*I>>16)+I}function Mn(I,F,ee,le){var Se,Ie=0,Le=i(16);for(Se=0;4>Se;++Se){var Be=I[F+0]+I[F+8],ze=I[F+0]-I[F+8],We=(35468*I[F+4]>>16)-Da(I[F+12]),dt=Da(I[F+4])+(35468*I[F+12]>>16);Le[Ie+0]=Be+dt,Le[Ie+1]=ze+We,Le[Ie+2]=ze-We,Le[Ie+3]=Be-dt,Ie+=4,F++}for(Se=Ie=0;4>Se;++Se)Be=(I=Le[Ie+0]+4)+Le[Ie+8],ze=I-Le[Ie+8],We=(35468*Le[Ie+4]>>16)-Da(Le[Ie+12]),Ns(ee,le,0,0,Be+(dt=Da(Le[Ie+4])+(35468*Le[Ie+12]>>16))),Ns(ee,le,1,0,ze+We),Ns(ee,le,2,0,ze-We),Ns(ee,le,3,0,Be-dt),Ie++,le+=32}function ps(I,F,ee,le){var Se=I[F+0]+4,Ie=35468*I[F+4]>>16,Le=Da(I[F+4]),Be=35468*I[F+1]>>16;na(ee,le,0,Se+Le,I=Da(I[F+1]),Be),na(ee,le,1,Se+Ie,I,Be),na(ee,le,2,Se-Ie,I,Be),na(ee,le,3,Se-Le,I,Be)}function yt(I,F,ee,le,Se){Mn(I,F,ee,le),Se&&Mn(I,F+16,ee,le+4)}function fe(I,F,ee,le){lt(I,F+0,ee,le,1),lt(I,F+32,ee,le+128,1)}function vt(I,F,ee,le){var Se;for(I=I[F+0]+4,Se=0;4>Se;++Se)for(F=0;4>F;++F)Ns(ee,le,F,Se,I)}function wr(I,F,ee,le){I[F+0]&&Vt(I,F+0,ee,le),I[F+16]&&Vt(I,F+16,ee,le+4),I[F+32]&&Vt(I,F+32,ee,le+128),I[F+48]&&Vt(I,F+48,ee,le+128+4)}function Or(I,F,ee,le){var Se,Ie=i(16);for(Se=0;4>Se;++Se){var Le=I[F+0+Se]+I[F+12+Se],Be=I[F+4+Se]+I[F+8+Se],ze=I[F+4+Se]-I[F+8+Se],We=I[F+0+Se]-I[F+12+Se];Ie[0+Se]=Le+Be,Ie[8+Se]=Le-Be,Ie[4+Se]=We+ze,Ie[12+Se]=We-ze}for(Se=0;4>Se;++Se)Le=(I=Ie[0+4*Se]+3)+Ie[3+4*Se],Be=Ie[1+4*Se]+Ie[2+4*Se],ze=Ie[1+4*Se]-Ie[2+4*Se],We=I-Ie[3+4*Se],ee[le+0]=Le+Be>>3,ee[le+16]=We+ze>>3,ee[le+32]=Le-Be>>3,ee[le+48]=We-ze>>3,le+=64}function nn(I,F,ee){var le,Se=F-32,Ie=go,Le=255-I[Se-1];for(le=0;le<ee;++le){var Be,ze=Ie,We=Le+I[F-1];for(Be=0;Be<ee;++Be)I[F+Be]=ze[We+I[Se+Be]];F+=32}}function zn(I,F){nn(I,F,4)}function Vn(I,F){nn(I,F,8)}function Tr(I,F){nn(I,F,16)}function _n(I,F){var ee;for(ee=0;16>ee;++ee)n(I,F+32*ee,I,F-32,16)}function Ki(I,F){var ee;for(ee=16;0<ee;--ee)a(I,F,I[F-1],16),F+=32}function bi(I,F,ee){var le;for(le=0;16>le;++le)a(F,ee+32*le,I,16)}function gs(I,F){var ee,le=16;for(ee=0;16>ee;++ee)le+=I[F-1+32*ee]+I[F+ee-32];bi(le>>5,I,F)}function aa(I,F){var ee,le=8;for(ee=0;16>ee;++ee)le+=I[F-1+32*ee];bi(le>>4,I,F)}function za(I,F){var ee,le=8;for(ee=0;16>ee;++ee)le+=I[F+ee-32];bi(le>>4,I,F)}function uo(I,F){bi(128,I,F)}function Pr(I,F,ee){return I+2*F+ee+2>>2}function Ho(I,F){var ee,le=F-32;for(le=new Uint8Array([Pr(I[le-1],I[le+0],I[le+1]),Pr(I[le+0],I[le+1],I[le+2]),Pr(I[le+1],I[le+2],I[le+3]),Pr(I[le+2],I[le+3],I[le+4])]),ee=0;4>ee;++ee)n(I,F+32*ee,le,0,le.length)}function xl(I,F){var ee=I[F-1],le=I[F-1+32],Se=I[F-1+64],Ie=I[F-1+96];De(I,F+0,16843009*Pr(I[F-1-32],ee,le)),De(I,F+32,16843009*Pr(ee,le,Se)),De(I,F+64,16843009*Pr(le,Se,Ie)),De(I,F+96,16843009*Pr(Se,Ie,Ie))}function un(I,F){var ee,le=4;for(ee=0;4>ee;++ee)le+=I[F+ee-32]+I[F-1+32*ee];for(le>>=3,ee=0;4>ee;++ee)a(I,F+32*ee,le,4)}function vh(I,F){var ee=I[F-1+0],le=I[F-1+32],Se=I[F-1+64],Ie=I[F-1-32],Le=I[F+0-32],Be=I[F+1-32],ze=I[F+2-32],We=I[F+3-32];I[F+0+96]=Pr(le,Se,I[F-1+96]),I[F+1+96]=I[F+0+64]=Pr(ee,le,Se),I[F+2+96]=I[F+1+64]=I[F+0+32]=Pr(Ie,ee,le),I[F+3+96]=I[F+2+64]=I[F+1+32]=I[F+0+0]=Pr(Le,Ie,ee),I[F+3+64]=I[F+2+32]=I[F+1+0]=Pr(Be,Le,Ie),I[F+3+32]=I[F+2+0]=Pr(ze,Be,Le),I[F+3+0]=Pr(We,ze,Be)}function hn(I,F){var ee=I[F+1-32],le=I[F+2-32],Se=I[F+3-32],Ie=I[F+4-32],Le=I[F+5-32],Be=I[F+6-32],ze=I[F+7-32];I[F+0+0]=Pr(I[F+0-32],ee,le),I[F+1+0]=I[F+0+32]=Pr(ee,le,Se),I[F+2+0]=I[F+1+32]=I[F+0+64]=Pr(le,Se,Ie),I[F+3+0]=I[F+2+32]=I[F+1+64]=I[F+0+96]=Pr(Se,Ie,Le),I[F+3+32]=I[F+2+64]=I[F+1+96]=Pr(Ie,Le,Be),I[F+3+64]=I[F+2+96]=Pr(Le,Be,ze),I[F+3+96]=Pr(Be,ze,ze)}function da(I,F){var ee=I[F-1+0],le=I[F-1+32],Se=I[F-1+64],Ie=I[F-1-32],Le=I[F+0-32],Be=I[F+1-32],ze=I[F+2-32],We=I[F+3-32];I[F+0+0]=I[F+1+64]=Ie+Le+1>>1,I[F+1+0]=I[F+2+64]=Le+Be+1>>1,I[F+2+0]=I[F+3+64]=Be+ze+1>>1,I[F+3+0]=ze+We+1>>1,I[F+0+96]=Pr(Se,le,ee),I[F+0+64]=Pr(le,ee,Ie),I[F+0+32]=I[F+1+96]=Pr(ee,Ie,Le),I[F+1+32]=I[F+2+96]=Pr(Ie,Le,Be),I[F+2+32]=I[F+3+96]=Pr(Le,Be,ze),I[F+3+32]=Pr(Be,ze,We)}function n0(I,F){var ee=I[F+0-32],le=I[F+1-32],Se=I[F+2-32],Ie=I[F+3-32],Le=I[F+4-32],Be=I[F+5-32],ze=I[F+6-32],We=I[F+7-32];I[F+0+0]=ee+le+1>>1,I[F+1+0]=I[F+0+64]=le+Se+1>>1,I[F+2+0]=I[F+1+64]=Se+Ie+1>>1,I[F+3+0]=I[F+2+64]=Ie+Le+1>>1,I[F+0+32]=Pr(ee,le,Se),I[F+1+32]=I[F+0+96]=Pr(le,Se,Ie),I[F+2+32]=I[F+1+96]=Pr(Se,Ie,Le),I[F+3+32]=I[F+2+96]=Pr(Ie,Le,Be),I[F+3+64]=Pr(Le,Be,ze),I[F+3+96]=Pr(Be,ze,We)}function hc(I,F){var ee=I[F-1+0],le=I[F-1+32],Se=I[F-1+64],Ie=I[F-1+96];I[F+0+0]=ee+le+1>>1,I[F+2+0]=I[F+0+32]=le+Se+1>>1,I[F+2+32]=I[F+0+64]=Se+Ie+1>>1,I[F+1+0]=Pr(ee,le,Se),I[F+3+0]=I[F+1+32]=Pr(le,Se,Ie),I[F+3+32]=I[F+1+64]=Pr(Se,Ie,Ie),I[F+3+64]=I[F+2+64]=I[F+0+96]=I[F+1+96]=I[F+2+96]=I[F+3+96]=Ie}function ho(I,F){var ee=I[F-1+0],le=I[F-1+32],Se=I[F-1+64],Ie=I[F-1+96],Le=I[F-1-32],Be=I[F+0-32],ze=I[F+1-32],We=I[F+2-32];I[F+0+0]=I[F+2+32]=ee+Le+1>>1,I[F+0+32]=I[F+2+64]=le+ee+1>>1,I[F+0+64]=I[F+2+96]=Se+le+1>>1,I[F+0+96]=Ie+Se+1>>1,I[F+3+0]=Pr(Be,ze,We),I[F+2+0]=Pr(Le,Be,ze),I[F+1+0]=I[F+3+32]=Pr(ee,Le,Be),I[F+1+32]=I[F+3+64]=Pr(le,ee,Le),I[F+1+64]=I[F+3+96]=Pr(Se,le,ee),I[F+1+96]=Pr(Ie,Se,le)}function To(I,F){var ee;for(ee=0;8>ee;++ee)n(I,F+32*ee,I,F-32,8)}function Ml(I,F){var ee;for(ee=0;8>ee;++ee)a(I,F,I[F-1],8),F+=32}function pl(I,F,ee){var le;for(le=0;8>le;++le)a(F,ee+32*le,I,8)}function Oo(I,F){var ee,le=8;for(ee=0;8>ee;++ee)le+=I[F+ee-32]+I[F-1+32*ee];pl(le>>4,I,F)}function Ll(I,F){var ee,le=4;for(ee=0;8>ee;++ee)le+=I[F+ee-32];pl(le>>3,I,F)}function Td(I,F){var ee,le=4;for(ee=0;8>ee;++ee)le+=I[F-1+32*ee];pl(le>>3,I,F)}function bs(I,F){pl(128,I,F)}function vi(I,F,ee){var le=I[F-ee],Se=I[F+0],Ie=3*(Se-le)+Ld[1020+I[F-2*ee]-I[F+ee]],Le=Lf[112+(Ie+4>>3)];I[F-ee]=go[255+le+Lf[112+(Ie+3>>3)]],I[F+0]=go[255+Se-Le]}function cs(I,F,ee,le){var Se=I[F+0],Ie=I[F+ee];return Xi[255+I[F-2*ee]-I[F-ee]]>le||Xi[255+Ie-Se]>le}function Rl(I,F,ee,le){return 4*Xi[255+I[F-ee]-I[F+0]]+Xi[255+I[F-2*ee]-I[F+ee]]<=le}function Od(I,F,ee,le,Se){var Ie=I[F-3*ee],Le=I[F-2*ee],Be=I[F-ee],ze=I[F+0],We=I[F+ee],dt=I[F+2*ee],kt=I[F+3*ee];return 4*Xi[255+Be-ze]+Xi[255+Le-We]>le?0:Xi[255+I[F-4*ee]-Ie]<=Se&&Xi[255+Ie-Le]<=Se&&Xi[255+Le-Be]<=Se&&Xi[255+kt-dt]<=Se&&Xi[255+dt-We]<=Se&&Xi[255+We-ze]<=Se}function Vc(I,F,ee,le){var Se=2*le+1;for(le=0;16>le;++le)Rl(I,F+le,ee,Se)&&vi(I,F+le,ee)}function fc(I,F,ee,le){var Se=2*le+1;for(le=0;16>le;++le)Rl(I,F+le*ee,1,Se)&&vi(I,F+le*ee,1)}function Wc(I,F,ee,le){var Se;for(Se=3;0<Se;--Se)Vc(I,F+=4*ee,ee,le)}function Pd(I,F,ee,le){var Se;for(Se=3;0<Se;--Se)fc(I,F+=4,ee,le)}function Xn(I,F,ee,le,Se,Ie,Le,Be){for(Ie=2*Ie+1;0<Se--;){if(Od(I,F,ee,Ie,Le))if(cs(I,F,ee,Be))vi(I,F,ee);else{var ze=I,We=F,dt=ee,kt=ze[We-2*dt],Ve=ze[We-dt],ht=ze[We+0],bt=ze[We+dt],Ut=ze[We+2*dt],wt=27*(Qt=Ld[1020+3*(ht-Ve)+Ld[1020+kt-bt]])+63>>7,Bt=18*Qt+63>>7,Qt=9*Qt+63>>7;ze[We-3*dt]=go[255+ze[We-3*dt]+Qt],ze[We-2*dt]=go[255+kt+Bt],ze[We-dt]=go[255+Ve+wt],ze[We+0]=go[255+ht-wt],ze[We+dt]=go[255+bt-Bt],ze[We+2*dt]=go[255+Ut-Qt]}F+=le}}function Fl(I,F,ee,le,Se,Ie,Le,Be){for(Ie=2*Ie+1;0<Se--;){if(Od(I,F,ee,Ie,Le))if(cs(I,F,ee,Be))vi(I,F,ee);else{var ze=I,We=F,dt=ee,kt=ze[We-dt],Ve=ze[We+0],ht=ze[We+dt],bt=Lf[112+(4+(Ut=3*(Ve-kt))>>3)],Ut=Lf[112+(Ut+3>>3)],wt=bt+1>>1;ze[We-2*dt]=go[255+ze[We-2*dt]+wt],ze[We-dt]=go[255+kt+Ut],ze[We+0]=go[255+Ve-bt],ze[We+dt]=go[255+ht-wt]}F+=le}}function Id(I,F,ee,le,Se,Ie){Xn(I,F,ee,1,16,le,Se,Ie)}function gl(I,F,ee,le,Se,Ie){Xn(I,F,1,ee,16,le,Se,Ie)}function mc(I,F,ee,le,Se,Ie){var Le;for(Le=3;0<Le;--Le)Fl(I,F+=4*ee,ee,1,16,le,Se,Ie)}function Pt(I,F,ee,le,Se,Ie){var Le;for(Le=3;0<Le;--Le)Fl(I,F+=4,1,ee,16,le,Se,Ie)}function K(I,F,ee,le,Se,Ie,Le,Be){Xn(I,F,Se,1,8,Ie,Le,Be),Xn(ee,le,Se,1,8,Ie,Le,Be)}function ke(I,F,ee,le,Se,Ie,Le,Be){Xn(I,F,1,Se,8,Ie,Le,Be),Xn(ee,le,1,Se,8,Ie,Le,Be)}function $e(I,F,ee,le,Se,Ie,Le,Be){Fl(I,F+4*Se,Se,1,8,Ie,Le,Be),Fl(ee,le+4*Se,Se,1,8,Ie,Le,Be)}function it(I,F,ee,le,Se,Ie,Le,Be){Fl(I,F+4,1,Se,8,Ie,Le,Be),Fl(ee,le+4,1,Se,8,Ie,Le,Be)}function pt(){this.ba=new Ge,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new ur,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function $t(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function lr(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function zr(){this.ua=0,this.Wa=new Ye,this.vb=new Ye,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new se,this.yc=new Z}function Ar(){this.xb=this.a=0,this.l=new ga,this.ca=new Ge,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new re,this.Pb=0,this.wd=new re,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new zr,this.ab=0,this.gc=o(4,lr),this.Oc=0}function kn(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new ga,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function qr(I,F,ee,le,Se,Ie,Le){for(I=I==null?0:I[F+0],F=0;F<Le;++F)Se[Ie+F]=I+ee[le+F]&255,I=Se[Ie+F]}function oa(I,F,ee,le,Se,Ie,Le){var Be;if(I==null)qr(null,null,ee,le,Se,Ie,Le);else for(Be=0;Be<Le;++Be)Se[Ie+Be]=I[F+Be]+ee[le+Be]&255}function Ca(I,F,ee,le,Se,Ie,Le){if(I==null)qr(null,null,ee,le,Se,Ie,Le);else{var Be,ze=I[F+0],We=ze,dt=ze;for(Be=0;Be<Le;++Be)We=dt+(ze=I[F+Be])-We,dt=ee[le+Be]+(-256&We?0>We?0:255:We)&255,We=ze,Se[Ie+Be]=dt}}function Cn(I,F,ee,le){var Se=F.width,Ie=F.o;if(t(I!=null&&F!=null),0>ee||0>=le||ee+le>Ie)return null;if(!I.Cc){if(I.ga==null){var Le;if(I.ga=new kn,(Le=I.ga==null)||(Le=F.width*F.o,t(I.Gb.length==0),I.Gb=i(Le),I.Uc=0,I.Gb==null?Le=0:(I.mb=I.Gb,I.nb=I.Uc,I.rc=null,Le=1),Le=!Le),!Le){Le=I.ga;var Be=I.Fa,ze=I.P,We=I.qc,dt=I.mb,kt=I.nb,Ve=ze+1,ht=We-1,bt=Le.l;if(t(Be!=null&&dt!=null&&F!=null),Rd[0]=null,Rd[1]=qr,Rd[2]=oa,Rd[3]=Ca,Le.ca=dt,Le.tb=kt,Le.c=F.width,Le.i=F.height,t(0<Le.c&&0<Le.i),1>=We)F=0;else if(Le.$a=3&Be[ze+0],Le.Z=Be[ze+0]>>2&3,Le.Lc=Be[ze+0]>>4&3,ze=Be[ze+0]>>6&3,0>Le.$a||1<Le.$a||4<=Le.Z||1<Le.Lc||ze)F=0;else if(bt.put=cr,bt.ac=Wr,bt.bc=pr,bt.ma=Le,bt.width=F.width,bt.height=F.height,bt.Da=F.Da,bt.v=F.v,bt.va=F.va,bt.j=F.j,bt.o=F.o,Le.$a)e:{t(Le.$a==1),F=tt();t:for(;;){if(F==null){F=0;break e}if(t(Le!=null),Le.mc=F,F.c=Le.c,F.i=Le.i,F.l=Le.l,F.l.ma=Le,F.l.width=Le.c,F.l.height=Le.i,F.a=0,ve(F.m,Be,Ve,ht),!Ae(Le.c,Le.i,1,F,null)||(F.ab==1&&F.gc[0].hc==3&&Ce(F.s)?(Le.ic=1,Be=F.c*F.i,F.Ta=null,F.Ua=0,F.V=i(Be),F.Ba=0,F.V==null?(F.a=1,F=0):F=1):(Le.ic=0,F=Xe(F,Le.c)),!F))break t;F=1;break e}Le.mc=null,F=0}else F=ht>=Le.c*Le.i;Le=!F}if(Le)return null;I.ga.Lc!=1?I.Ga=0:le=Ie-ee}t(I.ga!=null),t(ee+le<=Ie);e:{if(F=(Be=I.ga).c,Ie=Be.l.o,Be.$a==0){if(Ve=I.rc,ht=I.Vc,bt=I.Fa,ze=I.P+1+ee*F,We=I.mb,dt=I.nb+ee*F,t(ze<=I.P+I.qc),Be.Z!=0)for(t(Rd[Be.Z]!=null),Le=0;Le<le;++Le)Rd[Be.Z](Ve,ht,bt,ze,We,dt,F),Ve=We,ht=dt,dt+=F,ze+=F;else for(Le=0;Le<le;++Le)n(We,dt,bt,ze,F),Ve=We,ht=dt,dt+=F,ze+=F;I.rc=Ve,I.Vc=ht}else{if(t(Be.mc!=null),F=ee+le,t((Le=Be.mc)!=null),t(F<=Le.i),Le.C>=F)F=1;else if(Be.ic||yi(),Be.ic){Be=Le.V,Ve=Le.Ba,ht=Le.c;var Ut=Le.i,wt=(bt=1,ze=Le.$/ht,We=Le.$%ht,dt=Le.m,kt=Le.s,Le.$),Bt=ht*Ut,Qt=ht*F,mr=kt.wc,nr=wt<Qt?Ne(kt,We,ze):null;t(wt<=Bt),t(F<=Ut),t(Ce(kt));t:for(;;){for(;!dt.h&&wt<Qt;){if(We&mr||(nr=Ne(kt,We,ze)),t(nr!=null),_e(dt),256>(Ut=Mr(nr.G[0],nr.H[0],dt)))Be[Ve+wt]=Ut,++wt,++We>=ht&&(We=0,++ze<=F&&!(ze%16)&&de(Le,ze));else{if(!(280>Ut)){bt=0;break t}Ut=Ir(Ut-256,dt);var Xr,Br=Mr(nr.G[4],nr.H[4],dt);if(_e(dt),!(wt>=(Br=Nn(ht,Br=Ir(Br,dt)))&&Bt-wt>=Ut)){bt=0;break t}for(Xr=0;Xr<Ut;++Xr)Be[Ve+wt+Xr]=Be[Ve+wt+Xr-Br];for(wt+=Ut,We+=Ut;We>=ht;)We-=ht,++ze<=F&&!(ze%16)&&de(Le,ze);wt<Qt&&We&mr&&(nr=Ne(kt,We,ze))}t(dt.h==ie(dt))}de(Le,ze>F?F:ze);break t}!bt||dt.h&&wt<Bt?(bt=0,Le.a=dt.h?5:3):Le.$=wt,F=bt}else F=qe(Le,Le.V,Le.Ba,Le.c,Le.i,F,mt);if(!F){le=0;break e}}ee+le>=Ie&&(I.Cc=1),le=1}if(!le)return null;if(I.Cc&&((le=I.ga)!=null&&(le.mc=null),I.ga=null,0<I.Ga))return alert("todo:WebPDequantizeLevels"),null}return I.nb+ee*Se}function Er(I,F,ee,le,Se,Ie){for(;0<Se--;){var Le,Be=I,ze=F+(ee?1:0),We=I,dt=F+(ee?0:3);for(Le=0;Le<le;++Le){var kt=We[dt+4*Le];kt!=255&&(kt*=32897,Be[ze+4*Le+0]=Be[ze+4*Le+0]*kt>>23,Be[ze+4*Le+1]=Be[ze+4*Le+1]*kt>>23,Be[ze+4*Le+2]=Be[ze+4*Le+2]*kt>>23)}F+=Ie}}function Xs(I,F,ee,le,Se){for(;0<le--;){var Ie;for(Ie=0;Ie<ee;++Ie){var Le=I[F+2*Ie+0],Be=15&(We=I[F+2*Ie+1]),ze=4369*Be,We=(240&We|We>>4)*ze>>16;I[F+2*Ie+0]=(240&Le|Le>>4)*ze>>16&240|(15&Le|Le<<4)*ze>>16>>4&15,I[F+2*Ie+1]=240&We|Be}F+=Se}}function On(I,F,ee,le,Se,Ie,Le,Be){var ze,We,dt=255;for(We=0;We<Se;++We){for(ze=0;ze<le;++ze){var kt=I[F+ze];Ie[Le+4*ze]=kt,dt&=kt}F+=ee,Le+=Be}return dt!=255}function ds(I,F,ee,le,Se){var Ie;for(Ie=0;Ie<Se;++Ie)ee[le+Ie]=I[F+Ie]>>8}function yi(){Md=Er,ql=Xs,If=On,yl=ds}function fo(I,F,ee){L[I]=function(le,Se,Ie,Le,Be,ze,We,dt,kt,Ve,ht,bt,Ut,wt,Bt,Qt,mr){var nr,Xr=mr-1>>1,Br=Be[ze+0]|We[dt+0]<<16,Ln=kt[Ve+0]|ht[bt+0]<<16;t(le!=null);var $r=3*Br+Ln+131074>>2;for(F(le[Se+0],255&$r,$r>>16,Ut,wt),Ie!=null&&($r=3*Ln+Br+131074>>2,F(Ie[Le+0],255&$r,$r>>16,Bt,Qt)),nr=1;nr<=Xr;++nr){var la=Be[ze+nr]|We[dt+nr]<<16,hs=kt[Ve+nr]|ht[bt+nr]<<16,qn=Br+la+Ln+hs+524296,Ur=qn+2*(la+Ln)>>3;$r=Ur+Br>>1,Br=(qn=qn+2*(Br+hs)>>3)+la>>1,F(le[Se+2*nr-1],255&$r,$r>>16,Ut,wt+(2*nr-1)*ee),F(le[Se+2*nr-0],255&Br,Br>>16,Ut,wt+(2*nr-0)*ee),Ie!=null&&($r=qn+Ln>>1,Br=Ur+hs>>1,F(Ie[Le+2*nr-1],255&$r,$r>>16,Bt,Qt+(2*nr-1)*ee),F(Ie[Le+2*nr+0],255&Br,Br>>16,Bt,Qt+(2*nr+0)*ee)),Br=la,Ln=hs}1&mr||($r=3*Br+Ln+131074>>2,F(le[Se+mr-1],255&$r,$r>>16,Ut,wt+(mr-1)*ee),Ie!=null&&($r=3*Ln+Br+131074>>2,F(Ie[Le+mr-1],255&$r,$r>>16,Bt,Qt+(mr-1)*ee)))}}function Po(){Qi[yx]=o0,Qi[bo]=Nh,Qi[wx]=Lp,Qi[Hl]=jx,Qi[Rf]=bu,Qi[yh]=Jc,Qi[xu]=vu,Qi[Ff]=Nh,Qi[kx]=jx,Qi[wh]=bu,Qi[Nx]=Jc}function Gc(I){return I&-16384?0>I?0:255:I>>Cx}function Kc(I,F){return Gc((19077*I>>8)+(26149*F>>8)-14234)}function $o(I,F,ee){return Gc((19077*I>>8)-(6419*F>>8)-(13320*ee>>8)+8708)}function Vo(I,F){return Gc((19077*I>>8)+(33050*F>>8)-17685)}function Xc(I,F,ee,le,Se){le[Se+0]=Kc(I,ee),le[Se+1]=$o(I,F,ee),le[Se+2]=Vo(I,F)}function Yc(I,F,ee,le,Se){le[Se+0]=Vo(I,F),le[Se+1]=$o(I,F,ee),le[Se+2]=Kc(I,ee)}function vs(I,F,ee,le,Se){var Ie=$o(I,F,ee);F=Ie<<3&224|Vo(I,F)>>3,le[Se+0]=248&Kc(I,ee)|Ie>>5,le[Se+1]=F}function Bl(I,F,ee,le,Se){var Ie=240&Vo(I,F)|15;le[Se+0]=240&Kc(I,ee)|$o(I,F,ee)>>4,le[Se+1]=Ie}function Qc(I,F,ee,le,Se){le[Se+0]=255,Xc(I,F,ee,le,Se+1)}function Ul(I,F,ee,le,Se){Yc(I,F,ee,le,Se),le[Se+3]=255}function zl(I,F,ee,le,Se){Xc(I,F,ee,le,Se),le[Se+3]=255}function Aa(I,F){return 0>I?0:I>F?F:I}function Wo(I,F,ee){L[I]=function(le,Se,Ie,Le,Be,ze,We,dt,kt){for(var Ve=dt+(-2&kt)*ee;dt!=Ve;)F(le[Se+0],Ie[Le+0],Be[ze+0],We,dt),F(le[Se+1],Ie[Le+0],Be[ze+0],We,dt+ee),Se+=2,++Le,++ze,dt+=2*ee;1&kt&&F(le[Se+0],Ie[Le+0],Be[ze+0],We,dt)}}function wi(I,F,ee){return ee==0?I==0?F==0?6:5:F==0?4:0:ee}function mu(I,F,ee,le,Se){switch(I>>>30){case 3:lt(F,ee,le,Se,0);break;case 2:xt(F,ee,le,Se);break;case 1:Vt(F,ee,le,Se)}}function ys(I,F){var ee,le,Se=F.M,Ie=F.Nb,Le=I.oc,Be=I.pc+40,ze=I.oc,We=I.pc+584,dt=I.oc,kt=I.pc+600;for(ee=0;16>ee;++ee)Le[Be+32*ee-1]=129;for(ee=0;8>ee;++ee)ze[We+32*ee-1]=129,dt[kt+32*ee-1]=129;for(0<Se?Le[Be-1-32]=ze[We-1-32]=dt[kt-1-32]=129:(a(Le,Be-32-1,127,21),a(ze,We-32-1,127,9),a(dt,kt-32-1,127,9)),le=0;le<I.za;++le){var Ve=F.ya[F.aa+le];if(0<le){for(ee=-1;16>ee;++ee)n(Le,Be+32*ee-4,Le,Be+32*ee+12,4);for(ee=-1;8>ee;++ee)n(ze,We+32*ee-4,ze,We+32*ee+4,4),n(dt,kt+32*ee-4,dt,kt+32*ee+4,4)}var ht=I.Gd,bt=I.Hd+le,Ut=Ve.ad,wt=Ve.Hc;if(0<Se&&(n(Le,Be-32,ht[bt].y,0,16),n(ze,We-32,ht[bt].f,0,8),n(dt,kt-32,ht[bt].ea,0,8)),Ve.Za){var Bt=Le,Qt=Be-32+16;for(0<Se&&(le>=I.za-1?a(Bt,Qt,ht[bt].y[15],4):n(Bt,Qt,ht[bt+1].y,0,4)),ee=0;4>ee;ee++)Bt[Qt+128+ee]=Bt[Qt+256+ee]=Bt[Qt+384+ee]=Bt[Qt+0+ee];for(ee=0;16>ee;++ee,wt<<=2)Bt=Le,Qt=Be+Ys[ee],Fs[Ve.Ob[ee]](Bt,Qt),mu(wt,Ut,16*+ee,Bt,Qt)}else if(Bt=wi(le,Se,Ve.Ob[0]),Io[Bt](Le,Be),wt!=0)for(ee=0;16>ee;++ee,wt<<=2)mu(wt,Ut,16*+ee,Le,Be+Ys[ee]);for(ee=Ve.Gc,Bt=wi(le,Se,Ve.Dd),xc[Bt](ze,We),xc[Bt](dt,kt),wt=Ut,Bt=ze,Qt=We,255&(Ve=0|ee)&&(170&Ve?St(wt,256,Bt,Qt):Wt(wt,256,Bt,Qt)),Ve=dt,wt=kt,255&(ee>>=8)&&(170&ee?St(Ut,320,Ve,wt):Wt(Ut,320,Ve,wt)),Se<I.Ub-1&&(n(ht[bt].y,0,Le,Be+480,16),n(ht[bt].f,0,ze,We+224,8),n(ht[bt].ea,0,dt,kt+224,8)),ee=8*Ie*I.B,ht=I.sa,bt=I.ta+16*le+16*Ie*I.R,Ut=I.qa,Ve=I.ra+8*le+ee,wt=I.Ha,Bt=I.Ia+8*le+ee,ee=0;16>ee;++ee)n(ht,bt+ee*I.R,Le,Be+32*ee,16);for(ee=0;8>ee;++ee)n(Ut,Ve+ee*I.B,ze,We+32*ee,8),n(wt,Bt+ee*I.B,dt,kt+32*ee,8)}}function bl(I,F,ee,le,Se,Ie,Le,Be,ze){var We=[0],dt=[0],kt=0,Ve=ze!=null?ze.kd:0,ht=ze??new $t;if(I==null||12>ee)return 7;ht.data=I,ht.w=F,ht.ha=ee,F=[F],ee=[ee],ht.gb=[ht.gb];e:{var bt=F,Ut=ee,wt=ht.gb;if(t(I!=null),t(Ut!=null),t(wt!=null),wt[0]=0,12<=Ut[0]&&!r(I,bt[0],"RIFF")){if(r(I,bt[0]+8,"WEBP")){wt=3;break e}var Bt=be(I,bt[0]+4);if(12>Bt||4294967286<Bt){wt=3;break e}if(Ve&&Bt>Ut[0]-8){wt=7;break e}wt[0]=Bt,bt[0]+=12,Ut[0]-=12}wt=0}if(wt!=0)return wt;for(Bt=0<ht.gb[0],ee=ee[0];;){e:{var Qt=I;Ut=F,wt=ee;var mr=We,nr=dt,Xr=bt=[0];if(($r=kt=[kt])[0]=0,8>wt[0])wt=7;else{if(!r(Qt,Ut[0],"VP8X")){if(be(Qt,Ut[0]+4)!=10){wt=3;break e}if(18>wt[0]){wt=7;break e}var Br=be(Qt,Ut[0]+8),Ln=1+Ee(Qt,Ut[0]+12);if(2147483648<=Ln*(Qt=1+Ee(Qt,Ut[0]+15))){wt=3;break e}Xr!=null&&(Xr[0]=Br),mr!=null&&(mr[0]=Ln),nr!=null&&(nr[0]=Qt),Ut[0]+=18,wt[0]-=18,$r[0]=1}wt=0}}if(kt=kt[0],bt=bt[0],wt!=0)return wt;if(Ut=!!(2&bt),!Bt&&kt)return 3;if(Ie!=null&&(Ie[0]=!!(16&bt)),Le!=null&&(Le[0]=Ut),Be!=null&&(Be[0]=0),Le=We[0],bt=dt[0],kt&&Ut&&ze==null){wt=0;break}if(4>ee){wt=7;break}if(Bt&&kt||!Bt&&!kt&&!r(I,F[0],"ALPH")){ee=[ee],ht.na=[ht.na],ht.P=[ht.P],ht.Sa=[ht.Sa];e:{Br=I,wt=F,Bt=ee;var $r=ht.gb;mr=ht.na,nr=ht.P,Xr=ht.Sa,Ln=22,t(Br!=null),t(Bt!=null),Qt=wt[0];var la=Bt[0];for(t(mr!=null),t(Xr!=null),mr[0]=null,nr[0]=null,Xr[0]=0;;){if(wt[0]=Qt,Bt[0]=la,8>la){wt=7;break e}var hs=be(Br,Qt+4);if(4294967286<hs){wt=3;break e}var qn=8+hs+1&-2;if(Ln+=qn,0<$r&&Ln>$r){wt=3;break e}if(!r(Br,Qt,"VP8 ")||!r(Br,Qt,"VP8L")){wt=0;break e}if(la[0]<qn){wt=7;break e}r(Br,Qt,"ALPH")||(mr[0]=Br,nr[0]=Qt+8,Xr[0]=hs),Qt+=qn,la-=qn}}if(ee=ee[0],ht.na=ht.na[0],ht.P=ht.P[0],ht.Sa=ht.Sa[0],wt!=0)break}ee=[ee],ht.Ja=[ht.Ja],ht.xa=[ht.xa];e:if($r=I,wt=F,Bt=ee,mr=ht.gb[0],nr=ht.Ja,Xr=ht.xa,Br=wt[0],Qt=!r($r,Br,"VP8 "),Ln=!r($r,Br,"VP8L"),t($r!=null),t(Bt!=null),t(nr!=null),t(Xr!=null),8>Bt[0])wt=7;else{if(Qt||Ln){if($r=be($r,Br+4),12<=mr&&$r>mr-12){wt=3;break e}if(Ve&&$r>Bt[0]-8){wt=7;break e}nr[0]=$r,wt[0]+=8,Bt[0]-=8,Xr[0]=Ln}else Xr[0]=5<=Bt[0]&&$r[Br+0]==47&&!($r[Br+4]>>5),nr[0]=Bt[0];wt=0}if(ee=ee[0],ht.Ja=ht.Ja[0],ht.xa=ht.xa[0],F=F[0],wt!=0)break;if(4294967286<ht.Ja)return 3;if(Be==null||Ut||(Be[0]=ht.xa?2:1),Le=[Le],bt=[bt],ht.xa){if(5>ee){wt=7;break}Be=Le,Ve=bt,Ut=Ie,I==null||5>ee?I=0:5<=ee&&I[F+0]==47&&!(I[F+4]>>5)?(Bt=[0],$r=[0],mr=[0],ve(nr=new re,I,F,ee),Rr(nr,Bt,$r,mr)?(Be!=null&&(Be[0]=Bt[0]),Ve!=null&&(Ve[0]=$r[0]),Ut!=null&&(Ut[0]=mr[0]),I=1):I=0):I=0}else{if(10>ee){wt=7;break}Be=bt,I==null||10>ee||!Gn(I,F+3,ee-3)?I=0:(Ve=I[F+0]|I[F+1]<<8|I[F+2]<<16,Ut=16383&(I[F+7]<<8|I[F+6]),I=16383&(I[F+9]<<8|I[F+8]),1&Ve||3<(Ve>>1&7)||!(Ve>>4&1)||Ve>>5>=ht.Ja||!Ut||!I?I=0:(Le&&(Le[0]=Ut),Be&&(Be[0]=I),I=1))}if(!I||(Le=Le[0],bt=bt[0],kt&&(We[0]!=Le||dt[0]!=bt)))return 3;ze!=null&&(ze[0]=ht,ze.offset=F-ze.w,t(4294967286>F-ze.w),t(ze.offset==ze.ha-ee));break}return wt==0||wt==7&&kt&&ze==null?(Ie!=null&&(Ie[0]|=ht.na!=null&&0<ht.na.length),le!=null&&(le[0]=Le),Se!=null&&(Se[0]=bt),0):wt}function vl(I,F,ee){var le=F.width,Se=F.height,Ie=0,Le=0,Be=le,ze=Se;if(F.Da=I!=null&&0<I.Da,F.Da&&(Be=I.cd,ze=I.bd,Ie=I.v,Le=I.j,11>ee||(Ie&=-2,Le&=-2),0>Ie||0>Le||0>=Be||0>=ze||Ie+Be>le||Le+ze>Se))return 0;if(F.v=Ie,F.j=Le,F.va=Ie+Be,F.o=Le+ze,F.U=Be,F.T=ze,F.da=I!=null&&0<I.da,F.da){if(!at(Be,ze,ee=[I.ib],Ie=[I.hb]))return 0;F.ib=ee[0],F.hb=Ie[0]}return F.ob=I!=null&&I.ob,F.Kb=I==null||!I.Sd,F.da&&(F.ob=F.ib<3*le/4&&F.hb<3*Se/4,F.Kb=0),1}function a0(I){if(I==null)return 2;if(11>I.S){var F=I.f.RGBA;F.fb+=(I.height-1)*F.A,F.A=-F.A}else F=I.f.kb,I=I.height,F.O+=(I-1)*F.fa,F.fa=-F.fa,F.N+=(I-1>>1)*F.Ab,F.Ab=-F.Ab,F.W+=(I-1>>1)*F.Db,F.Db=-F.Db,F.F!=null&&(F.J+=(I-1)*F.lb,F.lb=-F.lb);return 0}function Go(I,F,ee,le){if(le==null||0>=I||0>=F)return 2;if(ee!=null){if(ee.Da){var Se=ee.cd,Ie=ee.bd,Le=-2&ee.v,Be=-2&ee.j;if(0>Le||0>Be||0>=Se||0>=Ie||Le+Se>I||Be+Ie>F)return 2;I=Se,F=Ie}if(ee.da){if(!at(I,F,Se=[ee.ib],Ie=[ee.hb]))return 2;I=Se[0],F=Ie[0]}}le.width=I,le.height=F;e:{var ze=le.width,We=le.height;if(I=le.S,0>=ze||0>=We||!(I>=yx&&13>I))I=2;else{if(0>=le.Rd&&le.sd==null){Le=Ie=Se=F=0;var dt=(Be=ze*Ex[I])*We;if(11>I||(Ie=(We+1)/2*(F=(ze+1)/2),I==12&&(Le=(Se=ze)*We)),(We=i(dt+2*Ie+Le))==null){I=1;break e}le.sd=We,11>I?((ze=le.f.RGBA).eb=We,ze.fb=0,ze.A=Be,ze.size=dt):((ze=le.f.kb).y=We,ze.O=0,ze.fa=Be,ze.Fd=dt,ze.f=We,ze.N=0+dt,ze.Ab=F,ze.Cd=Ie,ze.ea=We,ze.W=0+dt+Ie,ze.Db=F,ze.Ed=Ie,I==12&&(ze.F=We,ze.J=0+dt+2*Ie),ze.Tc=Le,ze.lb=Se)}if(F=1,Se=le.S,Ie=le.width,Le=le.height,Se>=yx&&13>Se)if(11>Se)I=le.f.RGBA,F&=(Be=Math.abs(I.A))*(Le-1)+Ie<=I.size,F&=Be>=Ie*Ex[Se],F&=I.eb!=null;else{I=le.f.kb,Be=(Ie+1)/2,dt=(Le+1)/2,ze=Math.abs(I.fa),We=Math.abs(I.Ab);var kt=Math.abs(I.Db),Ve=Math.abs(I.lb),ht=Ve*(Le-1)+Ie;F&=ze*(Le-1)+Ie<=I.Fd,F&=We*(dt-1)+Be<=I.Cd,F=(F&=kt*(dt-1)+Be<=I.Ed)&ze>=Ie&We>=Be&kt>=Be,F&=I.y!=null,F&=I.f!=null,F&=I.ea!=null,Se==12&&(F&=Ve>=Ie,F&=ht<=I.Tc,F&=I.F!=null)}else F=0;I=F?0:2}}return I!=0||ee!=null&&ee.fd&&(I=a0(le)),I}var ki=64,mo=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Ni=24,xo=32,Bn=8,Ko=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Ke("Predictor0","PredictorAdd0"),L.Predictor0=function(){return 4278190080},L.Predictor1=function(I){return I},L.Predictor2=function(I,F,ee){return F[ee+0]},L.Predictor3=function(I,F,ee){return F[ee+1]},L.Predictor4=function(I,F,ee){return F[ee-1]},L.Predictor5=function(I,F,ee){return Ft(Ft(I,F[ee+1]),F[ee+0])},L.Predictor6=function(I,F,ee){return Ft(I,F[ee-1])},L.Predictor7=function(I,F,ee){return Ft(I,F[ee+0])},L.Predictor8=function(I,F,ee){return Ft(F[ee-1],F[ee+0])},L.Predictor9=function(I,F,ee){return Ft(F[ee+0],F[ee+1])},L.Predictor10=function(I,F,ee){return Ft(Ft(I,F[ee-1]),Ft(F[ee+0],F[ee+1]))},L.Predictor11=function(I,F,ee){var le=F[ee+0];return 0>=sr(le>>24&255,I>>24&255,(F=F[ee-1])>>24&255)+sr(le>>16&255,I>>16&255,F>>16&255)+sr(le>>8&255,I>>8&255,F>>8&255)+sr(255&le,255&I,255&F)?le:I},L.Predictor12=function(I,F,ee){var le=F[ee+0];return(fr((I>>24&255)+(le>>24&255)-((F=F[ee-1])>>24&255))<<24|fr((I>>16&255)+(le>>16&255)-(F>>16&255))<<16|fr((I>>8&255)+(le>>8&255)-(F>>8&255))<<8|fr((255&I)+(255&le)-(255&F)))>>>0},L.Predictor13=function(I,F,ee){var le=F[ee-1];return(hr((I=Ft(I,F[ee+0]))>>24&255,le>>24&255)<<24|hr(I>>16&255,le>>16&255)<<16|hr(I>>8&255,le>>8&255)<<8|hr(255&I,255&le))>>>0};var ye=L.PredictorAdd0;L.PredictorAdd1=Sr,Ke("Predictor2","PredictorAdd2"),Ke("Predictor3","PredictorAdd3"),Ke("Predictor4","PredictorAdd4"),Ke("Predictor5","PredictorAdd5"),Ke("Predictor6","PredictorAdd6"),Ke("Predictor7","PredictorAdd7"),Ke("Predictor8","PredictorAdd8"),Ke("Predictor9","PredictorAdd9"),Ke("Predictor10","PredictorAdd10"),Ke("Predictor11","PredictorAdd11"),Ke("Predictor12","PredictorAdd12"),Ke("Predictor13","PredictorAdd13");var f=L.PredictorAdd2;ar("ColorIndexInverseTransform","MapARGB","32b",function(I){return I>>8&255},function(I){return I}),ar("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(I){return I},function(I){return I>>8&255});var p,v=L.ColorIndexInverseTransform,_=L.MapARGB,j=L.VP8LColorIndexInverseTransformAlpha,E=L.MapAlpha,D=L.VP8LPredictorsAdd=[];D.length=16,(L.VP8LPredictors=[]).length=16,(L.VP8LPredictorsAdd_C=[]).length=16,(L.VP8LPredictors_C=[]).length=16;var z,X,oe,we,Oe,He,rt,lt,xt,St,Vt,Wt,qt,on,gn,es,_i,ri,Ea,ni,po,Dd,Zc,Pf,Md,ql,If,yl,s0=i(511),bx=i(2041),Df=i(225),Mf=i(767),vx=0,Ld=bx,Lf=Df,go=Mf,Xi=s0,yx=0,bo=1,wx=2,Hl=3,Rf=4,yh=5,xu=6,Ff=7,kx=8,wh=9,Nx=10,$l=[2,3,7],kh=[3,3,11],i0=[280,256,256,256,40],_x=[0,1,1,1,0],Bf=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Vl=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Wl=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],pu=8,Gl=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Kl=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],wl=null,Dv=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Dp=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Sx=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Mv=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Yi=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],us=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],ua=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Io=[],Fs=[],xc=[],gu=1,Mp=2,Rd=[],Qi=[];fo("UpsampleRgbLinePair",Xc,3),fo("UpsampleBgrLinePair",Yc,3),fo("UpsampleRgbaLinePair",zl,4),fo("UpsampleBgraLinePair",Ul,4),fo("UpsampleArgbLinePair",Qc,4),fo("UpsampleRgba4444LinePair",Bl,2),fo("UpsampleRgb565LinePair",vs,2);var o0=L.UpsampleRgbLinePair,Lp=L.UpsampleBgrLinePair,Nh=L.UpsampleRgbaLinePair,jx=L.UpsampleBgraLinePair,bu=L.UpsampleArgbLinePair,Jc=L.UpsampleRgba4444LinePair,vu=L.UpsampleRgb565LinePair,Xl=16,_h=1<<Xl-1,l0=-227,yu=482,Cx=6,wu=0,Zi=i(256),Ax=i(256),Lv=i(256),t4=i(256),r4=i(yu-l0),n4=i(yu-l0);Wo("YuvToRgbRow",Xc,3),Wo("YuvToBgrRow",Yc,3),Wo("YuvToRgbaRow",zl,4),Wo("YuvToBgraRow",Ul,4),Wo("YuvToArgbRow",Qc,4),Wo("YuvToRgba4444Row",Bl,2),Wo("YuvToRgb565Row",vs,2);var Ys=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Sh=[0,2,8],Uf=[8,7,6,4,4,2,2,2,1,1,1,1],zf=1;this.WebPDecodeRGBA=function(I,F,ee,le,Se){var Ie=bo,Le=new pt,Be=new Ge;Le.ba=Be,Be.S=Ie,Be.width=[Be.width],Be.height=[Be.height];var ze=Be.width,We=Be.height,dt=new At;if(dt==null||I==null)var kt=2;else t(dt!=null),kt=bl(I,F,ee,dt.width,dt.height,dt.Pd,dt.Qd,dt.format,null);if(kt!=0?ze=0:(ze!=null&&(ze[0]=dt.width[0]),We!=null&&(We[0]=dt.height[0]),ze=1),ze){Be.width=Be.width[0],Be.height=Be.height[0],le!=null&&(le[0]=Be.width),Se!=null&&(Se[0]=Be.height);e:{if(le=new ga,(Se=new $t).data=I,Se.w=F,Se.ha=ee,Se.kd=1,F=[0],t(Se!=null),((I=bl(Se.data,Se.w,Se.ha,null,null,null,F,null,Se))==0||I==7)&&F[0]&&(I=4),(F=I)==0){if(t(Le!=null),le.data=Se.data,le.w=Se.w+Se.offset,le.ha=Se.ha-Se.offset,le.put=cr,le.ac=Wr,le.bc=pr,le.ma=Le,Se.xa){if((I=tt())==null){Le=1;break e}if((function(Ve,ht){var bt=[0],Ut=[0],wt=[0];t:for(;;){if(Ve==null)return 0;if(ht==null)return Ve.a=2,0;if(Ve.l=ht,Ve.a=0,ve(Ve.m,ht.data,ht.w,ht.ha),!Rr(Ve.m,bt,Ut,wt)){Ve.a=3;break t}if(Ve.xb=Mp,ht.width=bt[0],ht.height=Ut[0],!Ae(bt[0],Ut[0],1,Ve,null))break t;return 1}return t(Ve.a!=0),0})(I,le)){if(le=(F=Go(le.width,le.height,Le.Oa,Le.ba))==0){t:{le=I;r:for(;;){if(le==null){le=0;break t}if(t(le.s.yc!=null),t(le.s.Ya!=null),t(0<le.s.Wb),t((ee=le.l)!=null),t((Se=ee.ma)!=null),le.xb!=0){if(le.ca=Se.ba,le.tb=Se.tb,t(le.ca!=null),!vl(Se.Oa,ee,Hl)){le.a=2;break r}if(!Xe(le,ee.width)||ee.da)break r;if((ee.da||Lt(le.ca.S))&&yi(),11>le.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),le.ca.f.kb.F!=null&&yi()),le.Pb&&0<le.s.ua&&le.s.vb.X==null&&!ge(le.s.vb,le.s.Wa.Xa)){le.a=1;break r}le.xb=0}if(!qe(le,le.V,le.Ba,le.c,le.i,ee.o,Re))break r;Se.Dc=le.Ma,le=1;break t}t(le.a!=0),le=0}le=!le}le&&(F=I.a)}else F=I.a}else{if((I=new Rs)==null){Le=1;break e}if(I.Fa=Se.na,I.P=Se.P,I.qc=Se.Sa,Gi(I,le)){if((F=Go(le.width,le.height,Le.Oa,Le.ba))==0){if(I.Aa=0,ee=Le.Oa,t((Se=I)!=null),ee!=null){if(0<(ze=0>(ze=ee.Md)?0:100<ze?255:255*ze/100)){for(We=dt=0;4>We;++We)12>(kt=Se.pb[We]).lc&&(kt.ia=ze*Uf[0>kt.lc?0:kt.lc]>>3),dt|=kt.ia;dt&&(alert("todo:VP8InitRandom"),Se.ia=1)}Se.Ga=ee.Id,100<Se.Ga?Se.Ga=100:0>Se.Ga&&(Se.Ga=0)}(function(Ve,ht){if(Ve==null)return 0;if(ht==null)return ra(Ve,2,"NULL VP8Io parameter in VP8Decode().");if(!Ve.cb&&!Gi(Ve,ht))return 0;if(t(Ve.cb),ht.ac==null||ht.ac(ht)){ht.ob&&(Ve.L=0);var bt=Sh[Ve.L];if(Ve.L==2?(Ve.yb=0,Ve.zb=0):(Ve.yb=ht.v-bt>>4,Ve.zb=ht.j-bt>>4,0>Ve.yb&&(Ve.yb=0),0>Ve.zb&&(Ve.zb=0)),Ve.Va=ht.o+15+bt>>4,Ve.Hb=ht.va+15+bt>>4,Ve.Hb>Ve.za&&(Ve.Hb=Ve.za),Ve.Va>Ve.Ub&&(Ve.Va=Ve.Ub),0<Ve.L){var Ut=Ve.ed;for(bt=0;4>bt;++bt){var wt;if(Ve.Qa.Cb){var Bt=Ve.Qa.Lb[bt];Ve.Qa.Fb||(Bt+=Ut.Tb)}else Bt=Ut.Tb;for(wt=0;1>=wt;++wt){var Qt=Ve.gd[bt][wt],mr=Bt;if(Ut.Pc&&(mr+=Ut.vd[0],wt&&(mr+=Ut.od[0])),0<(mr=0>mr?0:63<mr?63:mr)){var nr=mr;0<Ut.wb&&(nr=4<Ut.wb?nr>>2:nr>>1)>9-Ut.wb&&(nr=9-Ut.wb),1>nr&&(nr=1),Qt.dd=nr,Qt.tc=2*mr+nr,Qt.ld=40<=mr?2:15<=mr?1:0}else Qt.tc=0;Qt.La=wt}}}bt=0}else ra(Ve,6,"Frame setup failed"),bt=Ve.a;if(bt=bt==0){if(bt){Ve.$c=0,0<Ve.Aa||(Ve.Ic=zf);t:{bt=Ve.Ic,Ut=4*(nr=Ve.za);var Xr=32*nr,Br=nr+1,Ln=0<Ve.L?nr*(0<Ve.Aa?2:1):0,$r=(Ve.Aa==2?2:1)*nr;if((Qt=Ut+832+(wt=3*(16*bt+Sh[Ve.L])/2*Xr)+(Bt=Ve.Fa!=null&&0<Ve.Fa.length?Ve.Kc.c*Ve.Kc.i:0))!=Qt)bt=0;else{if(Qt>Ve.Vb){if(Ve.Vb=0,Ve.Ec=i(Qt),Ve.Fc=0,Ve.Ec==null){bt=ra(Ve,1,"no memory during frame initialization.");break t}Ve.Vb=Qt}Qt=Ve.Ec,mr=Ve.Fc,Ve.Ac=Qt,Ve.Bc=mr,mr+=Ut,Ve.Gd=o(Xr,Fr),Ve.Hd=0,Ve.rb=o(Br+1,Zr),Ve.sb=1,Ve.wa=Ln?o(Ln,dn):null,Ve.Y=0,Ve.D.Nb=0,Ve.D.wa=Ve.wa,Ve.D.Y=Ve.Y,0<Ve.Aa&&(Ve.D.Y+=nr),t(!0),Ve.oc=Qt,Ve.pc=mr,mr+=832,Ve.ya=o($r,ta),Ve.aa=0,Ve.D.ya=Ve.ya,Ve.D.aa=Ve.aa,Ve.Aa==2&&(Ve.D.aa+=nr),Ve.R=16*nr,Ve.B=8*nr,nr=(Xr=Sh[Ve.L])*Ve.R,Xr=Xr/2*Ve.B,Ve.sa=Qt,Ve.ta=mr+nr,Ve.qa=Ve.sa,Ve.ra=Ve.ta+16*bt*Ve.R+Xr,Ve.Ha=Ve.qa,Ve.Ia=Ve.ra+8*bt*Ve.B+Xr,Ve.$c=0,mr+=wt,Ve.mb=Bt?Qt:null,Ve.nb=Bt?mr:null,t(mr+Bt<=Ve.Fc+Ve.Vb),ya(Ve),a(Ve.Ac,Ve.Bc,0,Ut),bt=1}}if(bt){if(ht.ka=0,ht.y=Ve.sa,ht.O=Ve.ta,ht.f=Ve.qa,ht.N=Ve.ra,ht.ea=Ve.Ha,ht.Vd=Ve.Ia,ht.fa=Ve.R,ht.Rc=Ve.B,ht.F=null,ht.J=0,!vx){for(bt=-255;255>=bt;++bt)s0[255+bt]=0>bt?-bt:bt;for(bt=-1020;1020>=bt;++bt)bx[1020+bt]=-128>bt?-128:127<bt?127:bt;for(bt=-112;112>=bt;++bt)Df[112+bt]=-16>bt?-16:15<bt?15:bt;for(bt=-255;510>=bt;++bt)Mf[255+bt]=0>bt?0:255<bt?255:bt;vx=1}rt=Or,lt=yt,St=fe,Vt=vt,Wt=wr,xt=ps,qt=Id,on=gl,gn=K,es=ke,_i=mc,ri=Pt,Ea=$e,ni=it,po=Vc,Dd=fc,Zc=Wc,Pf=Pd,Fs[0]=un,Fs[1]=zn,Fs[2]=Ho,Fs[3]=xl,Fs[4]=vh,Fs[5]=da,Fs[6]=hn,Fs[7]=n0,Fs[8]=ho,Fs[9]=hc,Io[0]=gs,Io[1]=Tr,Io[2]=_n,Io[3]=Ki,Io[4]=aa,Io[5]=za,Io[6]=uo,xc[0]=Oo,xc[1]=Vn,xc[2]=To,xc[3]=Ml,xc[4]=Td,xc[5]=Ll,xc[6]=bs,bt=1}else bt=0}bt&&(bt=(function(la,hs){for(la.M=0;la.M<la.Va;++la.M){var qn,Ur=la.Jc[la.M&la.Xb],_r=la.m,_s=la;for(qn=0;qn<_s.za;++qn){var jn=_r,Wn=_s,qa=Wn.Ac,Si=Wn.Bc+4*qn,Ji=Wn.zc,ts=Wn.ya[Wn.aa+qn];if(Wn.Qa.Bb?ts.$b=je(jn,Wn.Pa.jb[0])?2+je(jn,Wn.Pa.jb[2]):je(jn,Wn.Pa.jb[1]):ts.$b=0,Wn.kc&&(ts.Ad=je(jn,Wn.Bd)),ts.Za=!je(jn,145)+0,ts.Za){var ai=ts.Ob,vo=0;for(Wn=0;4>Wn;++Wn){var si,Jn=Ji[0+Wn];for(si=0;4>si;++si){Jn=Yi[qa[Si+si]][Jn];for(var _a=Sx[je(jn,Jn[0])];0<_a;)_a=Sx[2*_a+je(jn,Jn[_a])];Jn=-_a,qa[Si+si]=Jn}n(ai,vo,qa,Si,4),vo+=4,Ji[0+Wn]=Jn}}else Jn=je(jn,156)?je(jn,128)?1:3:je(jn,163)?2:0,ts.Ob[0]=Jn,a(qa,Si,Jn,4),a(Ji,0,Jn,4);ts.Dd=je(jn,142)?je(jn,114)?je(jn,183)?1:3:2:0}if(_s.m.Ka)return ra(la,7,"Premature end-of-partition0 encountered.");for(;la.ja<la.za;++la.ja){if(_s=Ur,jn=(_r=la).rb[_r.sb-1],qa=_r.rb[_r.sb+_r.ja],qn=_r.ya[_r.aa+_r.ja],Si=_r.kc?qn.Ad:0)jn.la=qa.la=0,qn.Za||(jn.Na=qa.Na=0),qn.Hc=0,qn.Gc=0,qn.ia=0;else{var Ss,Ta;if(jn=qa,qa=_s,Si=_r.Pa.Xc,Ji=_r.ya[_r.aa+_r.ja],ts=_r.pb[Ji.$b],Wn=Ji.ad,ai=0,vo=_r.rb[_r.sb-1],Jn=si=0,a(Wn,ai,0,384),Ji.Za)var ji=0,js=Si[3];else{_a=i(16);var Sa=jn.Na+vo.Na;if(Sa=wl(qa,Si[1],Sa,ts.Eb,0,_a,0),jn.Na=vo.Na=(0<Sa)+0,1<Sa)rt(_a,0,Wn,ai);else{var Qs=_a[0]+3>>3;for(_a=0;256>_a;_a+=16)Wn[ai+_a]=Qs}ji=1,js=Si[0]}var Ha=15&jn.la,ii=15&vo.la;for(_a=0;4>_a;++_a){var oi=1&ii;for(Qs=Ta=0;4>Qs;++Qs)Ha=Ha>>1|(oi=(Sa=wl(qa,js,Sa=oi+(1&Ha),ts.Sc,ji,Wn,ai))>ji)<<7,Ta=Ta<<2|(3<Sa?3:1<Sa?2:Wn[ai+0]!=0),ai+=16;Ha>>=4,ii=ii>>1|oi<<7,si=(si<<8|Ta)>>>0}for(js=Ha,ji=ii>>4,Ss=0;4>Ss;Ss+=2){for(Ta=0,Ha=jn.la>>4+Ss,ii=vo.la>>4+Ss,_a=0;2>_a;++_a){for(oi=1&ii,Qs=0;2>Qs;++Qs)Sa=oi+(1&Ha),Ha=Ha>>1|(oi=0<(Sa=wl(qa,Si[2],Sa,ts.Qc,0,Wn,ai)))<<3,Ta=Ta<<2|(3<Sa?3:1<Sa?2:Wn[ai+0]!=0),ai+=16;Ha>>=2,ii=ii>>1|oi<<5}Jn|=Ta<<4*Ss,js|=Ha<<4<<Ss,ji|=(240&ii)<<Ss}jn.la=js,vo.la=ji,Ji.Hc=si,Ji.Gc=Jn,Ji.ia=43690&Jn?0:ts.ia,Si=!(si|Jn)}if(0<_r.L&&(_r.wa[_r.Y+_r.ja]=_r.gd[qn.$b][qn.Za],_r.wa[_r.Y+_r.ja].La|=!Si),_s.Ka)return ra(la,7,"Premature end-of-file encountered.")}if(ya(la),_r=hs,_s=1,qn=(Ur=la).D,jn=0<Ur.L&&Ur.M>=Ur.zb&&Ur.M<=Ur.Va,Ur.Aa==0)t:{if(qn.M=Ur.M,qn.uc=jn,ys(Ur,qn),_s=1,qn=(Ta=Ur.D).Nb,jn=(Jn=Sh[Ur.L])*Ur.R,qa=Jn/2*Ur.B,_a=16*qn*Ur.R,Qs=8*qn*Ur.B,Si=Ur.sa,Ji=Ur.ta-jn+_a,ts=Ur.qa,Wn=Ur.ra-qa+Qs,ai=Ur.Ha,vo=Ur.Ia-qa+Qs,ii=(Ha=Ta.M)==0,si=Ha>=Ur.Va-1,Ur.Aa==2&&ys(Ur,Ta),Ta.uc)for(oi=(Sa=Ur).D.M,t(Sa.D.uc),Ta=Sa.yb;Ta<Sa.Hb;++Ta){ji=Ta,js=oi;var Wa=(wa=(li=Sa).D).Nb;Ss=li.R;var wa=wa.wa[wa.Y+ji],yo=li.sa,Bs=li.ta+16*Wa*Ss+16*ji,fn=wa.dd,bn=wa.tc;if(bn!=0)if(t(3<=bn),li.L==1)0<ji&&Dd(yo,Bs,Ss,bn+4),wa.La&&Pf(yo,Bs,Ss,bn),0<js&&po(yo,Bs,Ss,bn+4),wa.La&&Zc(yo,Bs,Ss,bn);else{var ja=li.B,Xo=li.qa,Yl=li.ra+8*Wa*ja+8*ji,Do=li.Ha,li=li.Ia+8*Wa*ja+8*ji;Wa=wa.ld,0<ji&&(on(yo,Bs,Ss,bn+4,fn,Wa),es(Xo,Yl,Do,li,ja,bn+4,fn,Wa)),wa.La&&(ri(yo,Bs,Ss,bn,fn,Wa),ni(Xo,Yl,Do,li,ja,bn,fn,Wa)),0<js&&(qt(yo,Bs,Ss,bn+4,fn,Wa),gn(Xo,Yl,Do,li,ja,bn+4,fn,Wa)),wa.La&&(_i(yo,Bs,Ss,bn,fn,Wa),Ea(Xo,Yl,Do,li,ja,bn,fn,Wa))}}if(Ur.ia&&alert("todo:DitherRow"),_r.put!=null){if(Ta=16*Ha,Ha=16*(Ha+1),ii?(_r.y=Ur.sa,_r.O=Ur.ta+_a,_r.f=Ur.qa,_r.N=Ur.ra+Qs,_r.ea=Ur.Ha,_r.W=Ur.Ia+Qs):(Ta-=Jn,_r.y=Si,_r.O=Ji,_r.f=ts,_r.N=Wn,_r.ea=ai,_r.W=vo),si||(Ha-=Jn),Ha>_r.o&&(Ha=_r.o),_r.F=null,_r.J=null,Ur.Fa!=null&&0<Ur.Fa.length&&Ta<Ha&&(_r.J=Cn(Ur,_r,Ta,Ha-Ta),_r.F=Ur.mb,_r.F==null&&_r.F.length==0)){_s=ra(Ur,3,"Could not decode alpha data.");break t}Ta<_r.j&&(Jn=_r.j-Ta,Ta=_r.j,t(!(1&Jn)),_r.O+=Ur.R*Jn,_r.N+=Ur.B*(Jn>>1),_r.W+=Ur.B*(Jn>>1),_r.F!=null&&(_r.J+=_r.width*Jn)),Ta<Ha&&(_r.O+=_r.v,_r.N+=_r.v>>1,_r.W+=_r.v>>1,_r.F!=null&&(_r.J+=_r.v),_r.ka=Ta-_r.j,_r.U=_r.va-_r.v,_r.T=Ha-Ta,_s=_r.put(_r))}qn+1!=Ur.Ic||si||(n(Ur.sa,Ur.ta-jn,Si,Ji+16*Ur.R,jn),n(Ur.qa,Ur.ra-qa,ts,Wn+8*Ur.B,qa),n(Ur.Ha,Ur.Ia-qa,ai,vo+8*Ur.B,qa))}if(!_s)return ra(la,6,"Output aborted.")}return 1})(Ve,ht)),ht.bc!=null&&ht.bc(ht),bt&=1}return bt?(Ve.cb=0,bt):0})(I,le)||(F=I.a)}}else F=I.a}F==0&&Le.Oa!=null&&Le.Oa.fd&&(F=a0(Le.ba))}Le=F}Ie=Le!=0?null:11>Ie?Be.f.RGBA.eb:Be.f.kb.y}else Ie=null;return Ie};var Ex=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function c(L,Q){for(var H="",G=0;G<4;G++)H+=String.fromCharCode(L[Q++]);return H}function u(L,Q){return L[Q+0]|L[Q+1]<<8}function x(L,Q){return(L[Q+0]|L[Q+1]<<8|L[Q+2]<<16)>>>0}function b(L,Q){return(L[Q+0]|L[Q+1]<<8|L[Q+2]<<16|L[Q+3]<<24)>>>0}new d;var g=[0],k=[0],y=[],N=new d,S=e,O=(function(L,Q){var H={},G=0,Z=!1,te=0,se=0;if(H.frames=[],!(function(B,re){for(var J=0;J<4;J++)if(B[re+J]!="RIFF".charCodeAt(J))return!0;return!1})(L,Q)){for(b(L,Q+=4),Q+=8;Q<L.length;){var ue=c(L,Q),ae=b(L,Q+=4);Q+=4;var pe=ae+(1&ae);switch(ue){case"VP8 ":case"VP8L":H.frames[G]===void 0&&(H.frames[G]={}),(xe=H.frames[G]).src_off=Z?se:Q-8,xe.src_size=te+ae+8,G++,Z&&(Z=!1,te=0,se=0);break;case"VP8X":(xe=H.header={}).feature_flags=L[Q];var ve=Q+4;xe.canvas_width=1+x(L,ve),ve+=3,xe.canvas_height=1+x(L,ve),ve+=3;break;case"ALPH":Z=!0,te=pe+8,se=Q-8;break;case"ANIM":(xe=H.header).bgcolor=b(L,Q),ve=Q+4,xe.loop_count=u(L,ve),ve+=2;break;case"ANMF":var Pe,xe;(xe=H.frames[G]={}).offset_x=2*x(L,Q),Q+=3,xe.offset_y=2*x(L,Q),Q+=3,xe.width=1+x(L,Q),Q+=3,xe.height=1+x(L,Q),Q+=3,xe.duration=x(L,Q),Q+=3,Pe=L[Q++],xe.dispose=1&Pe,xe.blend=Pe>>1&1}ue!="ANMF"&&(Q+=pe)}return H}})(S,0);O.response=S,O.rgbaoutput=!0,O.dataurl=!1;var A=O.header?O.header:null,P=O.frames?O.frames:null;if(A){A.loop_counter=A.loop_count,g=[A.canvas_height],k=[A.canvas_width];for(var q=0;q<P.length&&P[q].blend!=0;q++);}var W=P[0],R=N.WebPDecodeRGBA(S,W.src_off,W.src_size,k,g);W.rgba=R,W.imgwidth=k[0],W.imgheight=g[0];for(var U=0;U<k[0]*g[0]*4;U++)y[U]=R[U];return this.width=k,this.height=g,this.data=y,this}(function(e){var t,r,n,a,i,o,l,d,c,u=function(B){return B=B||{},this.isStrokeTransparent=B.isStrokeTransparent||!1,this.strokeOpacity=B.strokeOpacity||1,this.strokeStyle=B.strokeStyle||"#000000",this.fillStyle=B.fillStyle||"#000000",this.isFillTransparent=B.isFillTransparent||!1,this.fillOpacity=B.fillOpacity||1,this.font=B.font||"10px sans-serif",this.textBaseline=B.textBaseline||"alphabetic",this.textAlign=B.textAlign||"left",this.lineWidth=B.lineWidth||1,this.lineJoin=B.lineJoin||"miter",this.lineCap=B.lineCap||"butt",this.path=B.path||[],this.transform=B.transform!==void 0?B.transform.clone():new d,this.globalCompositeOperation=B.globalCompositeOperation||"normal",this.globalAlpha=B.globalAlpha||1,this.clip_path=B.clip_path||[],this.currentPoint=B.currentPoint||new o,this.miterLimit=B.miterLimit||10,this.lastPoint=B.lastPoint||new o,this.lineDashOffset=B.lineDashOffset||0,this.lineDash=B.lineDash||[],this.margin=B.margin||[0,0,0,0],this.prevPageLastElemOffset=B.prevPageLastElemOffset||0,this.ignoreClearRect=typeof B.ignoreClearRect!="boolean"||B.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new x(this),t=this.internal.f2,r=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,a=this.internal.getHorizontalCoordinate,i=this.internal.getVerticalCoordinate,o=this.internal.Point,l=this.internal.Rectangle,d=this.internal.Matrix,c=new u}]);var x=function(B){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var re=B;Object.defineProperty(this,"pdf",{get:function(){return re}});var J=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return J},set:function(be){J=!!be}});var ie=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return ie},set:function(be){ie=!!be}});var Y=0;Object.defineProperty(this,"posX",{get:function(){return Y},set:function(be){isNaN(be)||(Y=be)}});var _e=0;Object.defineProperty(this,"posY",{get:function(){return _e},set:function(be){isNaN(be)||(_e=be)}}),Object.defineProperty(this,"margin",{get:function(){return c.margin},set:function(be){var ge;typeof be=="number"?ge=[be,be,be,be]:((ge=new Array(4))[0]=be[0],ge[1]=be.length>=2?be[1]:ge[0],ge[2]=be.length>=3?be[2]:ge[0],ge[3]=be.length>=4?be[3]:ge[1]),c.margin=ge}});var me=!1;Object.defineProperty(this,"autoPaging",{get:function(){return me},set:function(be){me=be}});var ne=0;Object.defineProperty(this,"lastBreak",{get:function(){return ne},set:function(be){ne=be}});var je=[];Object.defineProperty(this,"pageBreaks",{get:function(){return je},set:function(be){je=be}}),Object.defineProperty(this,"ctx",{get:function(){return c},set:function(be){be instanceof u&&(c=be)}}),Object.defineProperty(this,"path",{get:function(){return c.path},set:function(be){c.path=be}});var De=[];Object.defineProperty(this,"ctxStack",{get:function(){return De},set:function(be){De=be}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(be){var ge;ge=b(be),this.ctx.fillStyle=ge.style,this.ctx.isFillTransparent=ge.a===0,this.ctx.fillOpacity=ge.a,this.pdf.setFillColor(ge.r,ge.g,ge.b,{a:ge.a}),this.pdf.setTextColor(ge.r,ge.g,ge.b,{a:ge.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(be){var ge=b(be);this.ctx.strokeStyle=ge.style,this.ctx.isStrokeTransparent=ge.a===0,this.ctx.strokeOpacity=ge.a,ge.a===0?this.pdf.setDrawColor(255,255,255):(ge.a,this.pdf.setDrawColor(ge.r,ge.g,ge.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(be){["butt","round","square"].indexOf(be)!==-1&&(this.ctx.lineCap=be,this.pdf.setLineCap(be))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(be){isNaN(be)||(this.ctx.lineWidth=be,this.pdf.setLineWidth(be))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(be){["bevel","round","miter"].indexOf(be)!==-1&&(this.ctx.lineJoin=be,this.pdf.setLineJoin(be))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(be){isNaN(be)||(this.ctx.miterLimit=be,this.pdf.setMiterLimit(be))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(be){this.ctx.textBaseline=be}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(be){["right","end","center","left","start"].indexOf(be)!==-1&&(this.ctx.textAlign=be)}});var ce=null,Ee=null;Object.defineProperty(this,"fontFaces",{get:function(){return Ee},set:function(be){ce=null,Ee=be}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(be){var ge;if(this.ctx.font=be,(ge=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(be))!==null){var Qe=ge[1];ge[2];var Ye=ge[3],at=ge[4];ge[5];var Je=ge[6],ct=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(at)[2];at=Math.floor(ct==="px"?parseFloat(at)*this.pdf.internal.scaleFactor:ct==="em"?parseFloat(at)*this.pdf.getFontSize():parseFloat(at)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(at);var Ke=(function(Kt){var ar,vr,rr=[],ft=Kt.trim();if(ft==="")return V_;if(ft in cF)return[cF[ft]];for(;ft!=="";){switch(vr=null,ar=(ft=uF(ft)).charAt(0)){case'"':case"'":vr=J7e(ft.substring(1),ar);break;default:vr=eOe(ft)}if(vr===null||(rr.push(vr[0]),(ft=uF(vr[1]))!==""&&ft.charAt(0)!==","))return V_;ft=ft.replace(/^,/,"")}return rr})(Je);if(this.fontFaces){var zt=(function(Kt,ar){if(ce===null){var vr=(function(rr){var ft=[];return Object.keys(rr).forEach(function(br){rr[br].forEach(function(yr){var gr=null;switch(yr){case"bold":gr={family:br,weight:"bold"};break;case"italic":gr={family:br,style:"italic"};break;case"bolditalic":gr={family:br,weight:"bold",style:"italic"};break;case"":case"normal":gr={family:br}}gr!==null&&(gr.ref={name:br,style:yr},ft.push(gr))})}),ft})(Kt.getFontList());ce=(function(rr){for(var ft={},br=0;br<rr.length;++br){var yr=$_(rr[br]),gr=yr.family,ot=yr.stretch,Lt=yr.style,ir=yr.weight;ft[gr]=ft[gr]||{},ft[gr][ot]=ft[gr][ot]||{},ft[gr][ot][Lt]=ft[gr][ot][Lt]||{},ft[gr][ot][Lt][ir]=yr}return ft})(vr.concat(ar))}return ce})(this.pdf,this.fontFaces),Ft=Ke.map(function(Kt){return{family:Kt,stretch:"normal",weight:Ye,style:Qe}}),fr=(function(Kt,ar,vr){for(var rr=(vr=vr||{}).defaultFontFamily||"times",ft=Object.assign({},Z7e,vr.genericFontFamilies||{}),br=null,yr=null,gr=0;gr<ar.length;++gr)if(ft[(br=$_(ar[gr])).family]&&(br.family=ft[br.family]),Kt.hasOwnProperty(br.family)){yr=Kt[br.family];break}if(!(yr=yr||Kt[rr]))throw new Error("Could not find a font-family for the rule '"+dF(br)+"' and default family '"+rr+"'.");if(yr=(function(ot,Lt){if(Lt[ot])return Lt[ot];var ir=c6[ot],Mt=ir<=c6.normal?-1:1,Ge=lF(Lt,nX,ir,Mt);if(!Ge)throw new Error("Could not find a matching font-stretch value for "+ot);return Ge})(br.stretch,yr),yr=(function(ot,Lt){if(Lt[ot])return Lt[ot];for(var ir=rX[ot],Mt=0;Mt<ir.length;++Mt)if(Lt[ir[Mt]])return Lt[ir[Mt]];throw new Error("Could not find a matching font-style for "+ot)})(br.style,yr),!(yr=(function(ot,Lt){if(Lt[ot])return Lt[ot];if(ot===400&&Lt[500])return Lt[500];if(ot===500&&Lt[400])return Lt[400];var ir=Q7e[ot],Mt=lF(Lt,aX,ir,ot<400?-1:1);if(!Mt)throw new Error("Could not find a matching font-weight for value "+ot);return Mt})(br.weight,yr)))throw new Error("Failed to resolve a font for the rule '"+dF(br)+"'.");return yr})(zt,Ft);this.pdf.setFont(fr.ref.name,fr.ref.style)}else{var hr="";(Ye==="bold"||parseInt(Ye,10)>=700||Qe==="bold")&&(hr="bold"),Qe==="italic"&&(hr+="italic"),hr.length===0&&(hr="normal");for(var sr="",Sr={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},tr=0;tr<Ke.length;tr++){if(this.pdf.internal.getFont(Ke[tr],hr,{noFallback:!0,disableWarning:!0})!==void 0){sr=Ke[tr];break}if(hr==="bolditalic"&&this.pdf.internal.getFont(Ke[tr],"bold",{noFallback:!0,disableWarning:!0})!==void 0)sr=Ke[tr],hr="bold";else if(this.pdf.internal.getFont(Ke[tr],"normal",{noFallback:!0,disableWarning:!0})!==void 0){sr=Ke[tr],hr="normal";break}}if(sr===""){for(var Jt=0;Jt<Ke.length;Jt++)if(Sr[Ke[Jt]]){sr=Sr[Ke[Jt]];break}}sr=sr===""?"Times":sr,this.pdf.setFont(sr,hr)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(be){this.ctx.globalCompositeOperation=be}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(be){this.ctx.globalAlpha=be}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(be){this.ctx.lineDashOffset=be,xe.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(be){this.ctx.lineDash=be,xe.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(be){this.ctx.ignoreClearRect=!!be}})};x.prototype.setLineDash=function(B){this.lineDash=B},x.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},x.prototype.fill=function(){P.call(this,"fill",!1)},x.prototype.stroke=function(){P.call(this,"stroke",!1)},x.prototype.beginPath=function(){this.path=[{type:"begin"}]},x.prototype.moveTo=function(B,re){if(isNaN(B)||isNaN(re))throw ms.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var J=this.ctx.transform.applyToPoint(new o(B,re));this.path.push({type:"mt",x:J.x,y:J.y}),this.ctx.lastPoint=new o(B,re)},x.prototype.closePath=function(){var B=new o(0,0),re=0;for(re=this.path.length-1;re!==-1;re--)if(this.path[re].type==="begin"&&Za(this.path[re+1])==="object"&&typeof this.path[re+1].x=="number"){B=new o(this.path[re+1].x,this.path[re+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(B.x,B.y)},x.prototype.lineTo=function(B,re){if(isNaN(B)||isNaN(re))throw ms.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var J=this.ctx.transform.applyToPoint(new o(B,re));this.path.push({type:"lt",x:J.x,y:J.y}),this.ctx.lastPoint=new o(J.x,J.y)},x.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),P.call(this,null,!0)},x.prototype.quadraticCurveTo=function(B,re,J,ie){if(isNaN(J)||isNaN(ie)||isNaN(B)||isNaN(re))throw ms.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var Y=this.ctx.transform.applyToPoint(new o(J,ie)),_e=this.ctx.transform.applyToPoint(new o(B,re));this.path.push({type:"qct",x1:_e.x,y1:_e.y,x:Y.x,y:Y.y}),this.ctx.lastPoint=new o(Y.x,Y.y)},x.prototype.bezierCurveTo=function(B,re,J,ie,Y,_e){if(isNaN(Y)||isNaN(_e)||isNaN(B)||isNaN(re)||isNaN(J)||isNaN(ie))throw ms.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var me=this.ctx.transform.applyToPoint(new o(Y,_e)),ne=this.ctx.transform.applyToPoint(new o(B,re)),je=this.ctx.transform.applyToPoint(new o(J,ie));this.path.push({type:"bct",x1:ne.x,y1:ne.y,x2:je.x,y2:je.y,x:me.x,y:me.y}),this.ctx.lastPoint=new o(me.x,me.y)},x.prototype.arc=function(B,re,J,ie,Y,_e){if(isNaN(B)||isNaN(re)||isNaN(J)||isNaN(ie)||isNaN(Y))throw ms.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(_e=!!_e,!this.ctx.transform.isIdentity){var me=this.ctx.transform.applyToPoint(new o(B,re));B=me.x,re=me.y;var ne=this.ctx.transform.applyToPoint(new o(0,J)),je=this.ctx.transform.applyToPoint(new o(0,0));J=Math.sqrt(Math.pow(ne.x-je.x,2)+Math.pow(ne.y-je.y,2))}Math.abs(Y-ie)>=2*Math.PI&&(ie=0,Y=2*Math.PI),this.path.push({type:"arc",x:B,y:re,radius:J,startAngle:ie,endAngle:Y,counterclockwise:_e})},x.prototype.arcTo=function(B,re,J,ie,Y){throw new Error("arcTo not implemented.")},x.prototype.rect=function(B,re,J,ie){if(isNaN(B)||isNaN(re)||isNaN(J)||isNaN(ie))throw ms.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(B,re),this.lineTo(B+J,re),this.lineTo(B+J,re+ie),this.lineTo(B,re+ie),this.lineTo(B,re),this.lineTo(B+J,re),this.lineTo(B,re)},x.prototype.fillRect=function(B,re,J,ie){if(isNaN(B)||isNaN(re)||isNaN(J)||isNaN(ie))throw ms.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!g.call(this)){var Y={};this.lineCap!=="butt"&&(Y.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(Y.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(B,re,J,ie),this.fill(),Y.hasOwnProperty("lineCap")&&(this.lineCap=Y.lineCap),Y.hasOwnProperty("lineJoin")&&(this.lineJoin=Y.lineJoin)}},x.prototype.strokeRect=function(B,re,J,ie){if(isNaN(B)||isNaN(re)||isNaN(J)||isNaN(ie))throw ms.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");k.call(this)||(this.beginPath(),this.rect(B,re,J,ie),this.stroke())},x.prototype.clearRect=function(B,re,J,ie){if(isNaN(B)||isNaN(re)||isNaN(J)||isNaN(ie))throw ms.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(B,re,J,ie))},x.prototype.save=function(B){B=typeof B!="boolean"||B;for(var re=this.pdf.internal.getCurrentPageInfo().pageNumber,J=0;J<this.pdf.internal.getNumberOfPages();J++)this.pdf.setPage(J+1),this.pdf.internal.out("q");if(this.pdf.setPage(re),B){this.ctx.fontSize=this.pdf.internal.getFontSize();var ie=new u(this.ctx);this.ctxStack.push(this.ctx),this.ctx=ie}},x.prototype.restore=function(B){B=typeof B!="boolean"||B;for(var re=this.pdf.internal.getCurrentPageInfo().pageNumber,J=0;J<this.pdf.internal.getNumberOfPages();J++)this.pdf.setPage(J+1),this.pdf.internal.out("Q");this.pdf.setPage(re),B&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},x.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var b=function(B){var re,J,ie,Y;if(B.isCanvasGradient===!0&&(B=B.getColor()),!B)return{r:0,g:0,b:0,a:0,style:B};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(B))re=0,J=0,ie=0,Y=0;else{var _e=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(B);if(_e!==null)re=parseInt(_e[1]),J=parseInt(_e[2]),ie=parseInt(_e[3]),Y=1;else if((_e=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(B))!==null)re=parseInt(_e[1]),J=parseInt(_e[2]),ie=parseInt(_e[3]),Y=parseFloat(_e[4]);else{if(Y=1,typeof B=="string"&&B.charAt(0)!=="#"){var me=new XK(B);B=me.ok?me.toHex():"#000000"}B.length===4?(re=B.substring(1,2),re+=re,J=B.substring(2,3),J+=J,ie=B.substring(3,4),ie+=ie):(re=B.substring(1,3),J=B.substring(3,5),ie=B.substring(5,7)),re=parseInt(re,16),J=parseInt(J,16),ie=parseInt(ie,16)}}return{r:re,g:J,b:ie,a:Y,style:B}},g=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},k=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};x.prototype.fillText=function(B,re,J,ie){if(isNaN(re)||isNaN(J)||typeof B!="string")throw ms.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(ie=isNaN(ie)?void 0:ie,!g.call(this)){var Y=pe(this.ctx.transform.rotation),_e=this.ctx.transform.scaleX;G.call(this,{text:B,x:re,y:J,scale:_e,angle:Y,align:this.textAlign,maxWidth:ie})}},x.prototype.strokeText=function(B,re,J,ie){if(isNaN(re)||isNaN(J)||typeof B!="string")throw ms.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!k.call(this)){ie=isNaN(ie)?void 0:ie;var Y=pe(this.ctx.transform.rotation),_e=this.ctx.transform.scaleX;G.call(this,{text:B,x:re,y:J,scale:_e,renderingMode:"stroke",angle:Y,align:this.textAlign,maxWidth:ie})}},x.prototype.measureText=function(B){if(typeof B!="string")throw ms.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var re=this.pdf,J=this.pdf.internal.scaleFactor,ie=re.internal.getFontSize(),Y=re.getStringUnitWidth(B)*ie/re.internal.scaleFactor;return new function(_e){var me=(_e=_e||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return me}}),this}({width:Y*=Math.round(96*J/72*1e4)/1e4})},x.prototype.scale=function(B,re){if(isNaN(B)||isNaN(re))throw ms.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var J=new d(B,0,0,re,0,0);this.ctx.transform=this.ctx.transform.multiply(J)},x.prototype.rotate=function(B){if(isNaN(B))throw ms.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var re=new d(Math.cos(B),Math.sin(B),-Math.sin(B),Math.cos(B),0,0);this.ctx.transform=this.ctx.transform.multiply(re)},x.prototype.translate=function(B,re){if(isNaN(B)||isNaN(re))throw ms.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var J=new d(1,0,0,1,B,re);this.ctx.transform=this.ctx.transform.multiply(J)},x.prototype.transform=function(B,re,J,ie,Y,_e){if(isNaN(B)||isNaN(re)||isNaN(J)||isNaN(ie)||isNaN(Y)||isNaN(_e))throw ms.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var me=new d(B,re,J,ie,Y,_e);this.ctx.transform=this.ctx.transform.multiply(me)},x.prototype.setTransform=function(B,re,J,ie,Y,_e){B=isNaN(B)?1:B,re=isNaN(re)?0:re,J=isNaN(J)?0:J,ie=isNaN(ie)?1:ie,Y=isNaN(Y)?0:Y,_e=isNaN(_e)?0:_e,this.ctx.transform=new d(B,re,J,ie,Y,_e)};var y=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};x.prototype.drawImage=function(B,re,J,ie,Y,_e,me,ne,je){var De=this.pdf.getImageProperties(B),ce=1,Ee=1,be=1,ge=1;ie!==void 0&&ne!==void 0&&(be=ne/ie,ge=je/Y,ce=De.width/ie*ne/ie,Ee=De.height/Y*je/Y),_e===void 0&&(_e=re,me=J,re=0,J=0),ie!==void 0&&ne===void 0&&(ne=ie,je=Y),ie===void 0&&ne===void 0&&(ne=De.width,je=De.height);for(var Qe,Ye=this.ctx.transform.decompose(),at=pe(Ye.rotate.shx),Je=new d,ct=(Je=(Je=(Je=Je.multiply(Ye.translate)).multiply(Ye.skew)).multiply(Ye.scale)).applyToRectangle(new l(_e-re*be,me-J*ge,ie*ce,Y*Ee)),Ke=N.call(this,ct),zt=[],Ft=0;Ft<Ke.length;Ft+=1)zt.indexOf(Ke[Ft])===-1&&zt.push(Ke[Ft]);if(A(zt),this.autoPaging)for(var fr=zt[0],hr=zt[zt.length-1],sr=fr;sr<hr+1;sr++){this.pdf.setPage(sr);var Sr=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],tr=sr===1?this.posY+this.margin[0]:this.margin[0],Jt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Kt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ar=sr===1?0:Jt+(sr-2)*Kt;if(this.ctx.clip_path.length!==0){var vr=this.path;Qe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=O(Qe,this.posX+this.margin[3],-ar+tr+this.ctx.prevPageLastElemOffset),q.call(this,"fill",!0),this.path=vr}var rr=JSON.parse(JSON.stringify(ct));rr=O([rr],this.posX+this.margin[3],-ar+tr+this.ctx.prevPageLastElemOffset)[0];var ft=(sr>fr||sr<hr)&&y.call(this);ft&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Sr,Kt,null).clip().discardPath()),this.pdf.addImage(B,"JPEG",rr.x,rr.y,rr.w,rr.h,null,null,at),ft&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(B,"JPEG",ct.x,ct.y,ct.w,ct.h,null,null,at)};var N=function(B,re,J){var ie=[];re=re||this.pdf.internal.pageSize.width,J=J||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var Y=this.posY+this.ctx.prevPageLastElemOffset;switch(B.type){default:case"mt":case"lt":ie.push(Math.floor((B.y+Y)/J)+1);break;case"arc":ie.push(Math.floor((B.y+Y-B.radius)/J)+1),ie.push(Math.floor((B.y+Y+B.radius)/J)+1);break;case"qct":var _e=ve(this.ctx.lastPoint.x,this.ctx.lastPoint.y,B.x1,B.y1,B.x,B.y);ie.push(Math.floor((_e.y+Y)/J)+1),ie.push(Math.floor((_e.y+_e.h+Y)/J)+1);break;case"bct":var me=Pe(this.ctx.lastPoint.x,this.ctx.lastPoint.y,B.x1,B.y1,B.x2,B.y2,B.x,B.y);ie.push(Math.floor((me.y+Y)/J)+1),ie.push(Math.floor((me.y+me.h+Y)/J)+1);break;case"rect":ie.push(Math.floor((B.y+Y)/J)+1),ie.push(Math.floor((B.y+B.h+Y)/J)+1)}for(var ne=0;ne<ie.length;ne+=1)for(;this.pdf.internal.getNumberOfPages()<ie[ne];)S.call(this);return ie},S=function(){var B=this.fillStyle,re=this.strokeStyle,J=this.font,ie=this.lineCap,Y=this.lineWidth,_e=this.lineJoin;this.pdf.addPage(),this.fillStyle=B,this.strokeStyle=re,this.font=J,this.lineCap=ie,this.lineWidth=Y,this.lineJoin=_e},O=function(B,re,J){for(var ie=0;ie<B.length;ie++)switch(B[ie].type){case"bct":B[ie].x2+=re,B[ie].y2+=J;case"qct":B[ie].x1+=re,B[ie].y1+=J;default:B[ie].x+=re,B[ie].y+=J}return B},A=function(B){return B.sort(function(re,J){return re-J})},P=function(B,re){for(var J,ie,Y=this.fillStyle,_e=this.strokeStyle,me=this.lineCap,ne=this.lineWidth,je=Math.abs(ne*this.ctx.transform.scaleX),De=this.lineJoin,ce=JSON.parse(JSON.stringify(this.path)),Ee=JSON.parse(JSON.stringify(this.path)),be=[],ge=0;ge<Ee.length;ge++)if(Ee[ge].x!==void 0)for(var Qe=N.call(this,Ee[ge]),Ye=0;Ye<Qe.length;Ye+=1)be.indexOf(Qe[Ye])===-1&&be.push(Qe[Ye]);for(var at=0;at<be.length;at++)for(;this.pdf.internal.getNumberOfPages()<be[at];)S.call(this);if(A(be),this.autoPaging)for(var Je=be[0],ct=be[be.length-1],Ke=Je;Ke<ct+1;Ke++){this.pdf.setPage(Ke),this.fillStyle=Y,this.strokeStyle=_e,this.lineCap=me,this.lineWidth=je,this.lineJoin=De;var zt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ft=Ke===1?this.posY+this.margin[0]:this.margin[0],fr=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],hr=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],sr=Ke===1?0:fr+(Ke-2)*hr;if(this.ctx.clip_path.length!==0){var Sr=this.path;J=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=O(J,this.posX+this.margin[3],-sr+Ft+this.ctx.prevPageLastElemOffset),q.call(this,B,!0),this.path=Sr}if(ie=JSON.parse(JSON.stringify(ce)),this.path=O(ie,this.posX+this.margin[3],-sr+Ft+this.ctx.prevPageLastElemOffset),re===!1||Ke===0){var tr=(Ke>Je||Ke<ct)&&y.call(this);tr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],zt,hr,null).clip().discardPath()),q.call(this,B,re),tr&&this.pdf.restoreGraphicsState()}this.lineWidth=ne}else this.lineWidth=je,q.call(this,B,re),this.lineWidth=ne;this.path=ce},q=function(B,re){if((B!=="stroke"||re||!k.call(this))&&(B==="stroke"||re||!g.call(this))){for(var J,ie,Y=[],_e=this.path,me=0;me<_e.length;me++){var ne=_e[me];switch(ne.type){case"begin":Y.push({begin:!0});break;case"close":Y.push({close:!0});break;case"mt":Y.push({start:ne,deltas:[],abs:[]});break;case"lt":var je=Y.length;if(_e[me-1]&&!isNaN(_e[me-1].x)&&(J=[ne.x-_e[me-1].x,ne.y-_e[me-1].y],je>0)){for(;je>=0;je--)if(Y[je-1].close!==!0&&Y[je-1].begin!==!0){Y[je-1].deltas.push(J),Y[je-1].abs.push(ne);break}}break;case"bct":J=[ne.x1-_e[me-1].x,ne.y1-_e[me-1].y,ne.x2-_e[me-1].x,ne.y2-_e[me-1].y,ne.x-_e[me-1].x,ne.y-_e[me-1].y],Y[Y.length-1].deltas.push(J);break;case"qct":var De=_e[me-1].x+2/3*(ne.x1-_e[me-1].x),ce=_e[me-1].y+2/3*(ne.y1-_e[me-1].y),Ee=ne.x+2/3*(ne.x1-ne.x),be=ne.y+2/3*(ne.y1-ne.y),ge=ne.x,Qe=ne.y;J=[De-_e[me-1].x,ce-_e[me-1].y,Ee-_e[me-1].x,be-_e[me-1].y,ge-_e[me-1].x,Qe-_e[me-1].y],Y[Y.length-1].deltas.push(J);break;case"arc":Y.push({deltas:[],abs:[],arc:!0}),Array.isArray(Y[Y.length-1].abs)&&Y[Y.length-1].abs.push(ne)}}ie=re?null:B==="stroke"?"stroke":"fill";for(var Ye=!1,at=0;at<Y.length;at++)if(Y[at].arc)for(var Je=Y[at].abs,ct=0;ct<Je.length;ct++){var Ke=Je[ct];Ke.type==="arc"?U.call(this,Ke.x,Ke.y,Ke.radius,Ke.startAngle,Ke.endAngle,Ke.counterclockwise,void 0,re,!Ye):Z.call(this,Ke.x,Ke.y),Ye=!0}else if(Y[at].close===!0)this.pdf.internal.out("h"),Ye=!1;else if(Y[at].begin!==!0){var zt=Y[at].start.x,Ft=Y[at].start.y;te.call(this,Y[at].deltas,zt,Ft),Ye=!0}ie&&L.call(this,ie),re&&Q.call(this)}},W=function(B){var re=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,J=re*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return B-J;case"top":return B+re-J;case"hanging":return B+re-2*J;case"middle":return B+re/2-J;default:return B}},R=function(B){return B+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};x.prototype.createLinearGradient=function(){var B=function(){};return B.colorStops=[],B.addColorStop=function(re,J){this.colorStops.push([re,J])},B.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},B.isCanvasGradient=!0,B},x.prototype.createPattern=function(){return this.createLinearGradient()},x.prototype.createRadialGradient=function(){return this.createLinearGradient()};var U=function(B,re,J,ie,Y,_e,me,ne,je){for(var De=ue.call(this,J,ie,Y,_e),ce=0;ce<De.length;ce++){var Ee=De[ce];ce===0&&(je?H.call(this,Ee.x1+B,Ee.y1+re):Z.call(this,Ee.x1+B,Ee.y1+re)),se.call(this,B,re,Ee.x2,Ee.y2,Ee.x3,Ee.y3,Ee.x4,Ee.y4)}ne?Q.call(this):L.call(this,me)},L=function(B){switch(B){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},Q=function(){this.pdf.clip(),this.pdf.discardPath()},H=function(B,re){this.pdf.internal.out(r(B)+" "+n(re)+" m")},G=function(B){var re;switch(B.align){case"right":case"end":re="right";break;case"center":re="center";break;default:re="left"}var J=this.pdf.getTextDimensions(B.text),ie=W.call(this,B.y),Y=R.call(this,ie)-J.h,_e=this.ctx.transform.applyToPoint(new o(B.x,ie)),me=this.ctx.transform.decompose(),ne=new d;ne=(ne=(ne=ne.multiply(me.translate)).multiply(me.skew)).multiply(me.scale);for(var je,De,ce,Ee=this.ctx.transform.applyToRectangle(new l(B.x,ie,J.w,J.h)),be=ne.applyToRectangle(new l(B.x,Y,J.w,J.h)),ge=N.call(this,be),Qe=[],Ye=0;Ye<ge.length;Ye+=1)Qe.indexOf(ge[Ye])===-1&&Qe.push(ge[Ye]);if(A(Qe),this.autoPaging)for(var at=Qe[0],Je=Qe[Qe.length-1],ct=at;ct<Je+1;ct++){this.pdf.setPage(ct);var Ke=ct===1?this.posY+this.margin[0]:this.margin[0],zt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ft=this.pdf.internal.pageSize.height-this.margin[2],fr=Ft-this.margin[0],hr=this.pdf.internal.pageSize.width-this.margin[1],sr=hr-this.margin[3],Sr=ct===1?0:zt+(ct-2)*fr;if(this.ctx.clip_path.length!==0){var tr=this.path;je=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=O(je,this.posX+this.margin[3],-1*Sr+Ke),q.call(this,"fill",!0),this.path=tr}var Jt=O([JSON.parse(JSON.stringify(be))],this.posX+this.margin[3],-Sr+Ke+this.ctx.prevPageLastElemOffset)[0];B.scale>=.01&&(De=this.pdf.internal.getFontSize(),this.pdf.setFontSize(De*B.scale),ce=this.lineWidth,this.lineWidth=ce*B.scale);var Kt=this.autoPaging!=="text";if(Kt||Jt.y+Jt.h<=Ft){if(Kt||Jt.y>=Ke&&Jt.x<=hr){var ar=Kt?B.text:this.pdf.splitTextToSize(B.text,B.maxWidth||hr-Jt.x)[0],vr=O([JSON.parse(JSON.stringify(Ee))],this.posX+this.margin[3],-Sr+Ke+this.ctx.prevPageLastElemOffset)[0],rr=Kt&&(ct>at||ct<Je)&&y.call(this);rr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],sr,fr,null).clip().discardPath()),this.pdf.text(ar,vr.x,vr.y,{angle:B.angle,align:re,renderingMode:B.renderingMode}),rr&&this.pdf.restoreGraphicsState()}}else Jt.y<Ft&&(this.ctx.prevPageLastElemOffset+=Ft-Jt.y);B.scale>=.01&&(this.pdf.setFontSize(De),this.lineWidth=ce)}else B.scale>=.01&&(De=this.pdf.internal.getFontSize(),this.pdf.setFontSize(De*B.scale),ce=this.lineWidth,this.lineWidth=ce*B.scale),this.pdf.text(B.text,_e.x+this.posX,_e.y+this.posY,{angle:B.angle,align:re,renderingMode:B.renderingMode,maxWidth:B.maxWidth}),B.scale>=.01&&(this.pdf.setFontSize(De),this.lineWidth=ce)},Z=function(B,re,J,ie){J=J||0,ie=ie||0,this.pdf.internal.out(r(B+J)+" "+n(re+ie)+" l")},te=function(B,re,J){return this.pdf.lines(B,re,J,null,null)},se=function(B,re,J,ie,Y,_e,me,ne){this.pdf.internal.out([t(a(J+B)),t(i(ie+re)),t(a(Y+B)),t(i(_e+re)),t(a(me+B)),t(i(ne+re)),"c"].join(" "))},ue=function(B,re,J,ie){for(var Y=2*Math.PI,_e=Math.PI/2;re>J;)re-=Y;var me=Math.abs(J-re);me<Y&&ie&&(me=Y-me);for(var ne=[],je=ie?-1:1,De=re;me>1e-5;){var ce=De+je*Math.min(me,_e);ne.push(ae.call(this,B,De,ce)),me-=Math.abs(ce-De),De=ce}return ne},ae=function(B,re,J){var ie=(J-re)/2,Y=B*Math.cos(ie),_e=B*Math.sin(ie),me=Y,ne=-_e,je=me*me+ne*ne,De=je+me*Y+ne*_e,ce=4/3*(Math.sqrt(2*je*De)-De)/(me*_e-ne*Y),Ee=me-ce*ne,be=ne+ce*me,ge=Ee,Qe=-be,Ye=ie+re,at=Math.cos(Ye),Je=Math.sin(Ye);return{x1:B*Math.cos(re),y1:B*Math.sin(re),x2:Ee*at-be*Je,y2:Ee*Je+be*at,x3:ge*at-Qe*Je,y3:ge*Je+Qe*at,x4:B*Math.cos(J),y4:B*Math.sin(J)}},pe=function(B){return 180*B/Math.PI},ve=function(B,re,J,ie,Y,_e){var me=B+.5*(J-B),ne=re+.5*(ie-re),je=Y+.5*(J-Y),De=_e+.5*(ie-_e),ce=Math.min(B,Y,me,je),Ee=Math.max(B,Y,me,je),be=Math.min(re,_e,ne,De),ge=Math.max(re,_e,ne,De);return new l(ce,be,Ee-ce,ge-be)},Pe=function(B,re,J,ie,Y,_e,me,ne){var je,De,ce,Ee,be,ge,Qe,Ye,at,Je,ct,Ke,zt,Ft,fr=J-B,hr=ie-re,sr=Y-J,Sr=_e-ie,tr=me-Y,Jt=ne-_e;for(De=0;De<41;De++)at=(Qe=(ce=B+(je=De/40)*fr)+je*((be=J+je*sr)-ce))+je*(be+je*(Y+je*tr-be)-Qe),Je=(Ye=(Ee=re+je*hr)+je*((ge=ie+je*Sr)-Ee))+je*(ge+je*(_e+je*Jt-ge)-Ye),De==0?(ct=at,Ke=Je,zt=at,Ft=Je):(ct=Math.min(ct,at),Ke=Math.min(Ke,Je),zt=Math.max(zt,at),Ft=Math.max(Ft,Je));return new l(Math.round(ct),Math.round(Ke),Math.round(zt-ct),Math.round(Ft-Ke))},xe=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var B,re,J=(B=this.ctx.lineDash,re=this.ctx.lineDashOffset,JSON.stringify({lineDash:B,lineDashOffset:re}));this.prevLineDash!==J&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=J)}}})(sn.API),(function(e){var t=function(o){var l,d,c,u,x,b,g,k,y,N;for(d=[],c=0,u=(o+=l="\0\0\0\0".slice(o.length%4||4)).length;u>c;c+=4)(x=(o.charCodeAt(c)<<24)+(o.charCodeAt(c+1)<<16)+(o.charCodeAt(c+2)<<8)+o.charCodeAt(c+3))!==0?(b=(x=((x=((x=((x=(x-(N=x%85))/85)-(y=x%85))/85)-(k=x%85))/85)-(g=x%85))/85)%85,d.push(b+33,g+33,k+33,y+33,N+33)):d.push(122);return(function(S,O){for(var A=O;A>0;A--)S.pop()})(d,l.length),String.fromCharCode.apply(String,d)+"~>"},r=function(o){var l,d,c,u,x,b=String,g="length",k=255,y="charCodeAt",N="slice",S="replace";for(o[N](-2),o=o[N](0,-2)[S](/\s/g,"")[S]("z","!!!!!"),c=[],u=0,x=(o+=l="uuuuu"[N](o[g]%5||5))[g];x>u;u+=5)d=52200625*(o[y](u)-33)+614125*(o[y](u+1)-33)+7225*(o[y](u+2)-33)+85*(o[y](u+3)-33)+(o[y](u+4)-33),c.push(k&d>>24,k&d>>16,k&d>>8,k&d);return(function(O,A){for(var P=A;P>0;P--)O.pop()})(c,l[g]),b.fromCharCode.apply(b,c)},n=function(o){return o.split("").map(function(l){return("0"+l.charCodeAt().toString(16)).slice(-2)}).join("")+">"},a=function(o){var l=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((o=o.replace(/\s/g,"")).indexOf(">")!==-1&&(o=o.substr(0,o.indexOf(">"))),o.length%2&&(o+="0"),l.test(o)===!1)return"";for(var d="",c=0;c<o.length;c+=2)d+=String.fromCharCode("0x"+(o[c]+o[c+1]));return d},i=function(o){for(var l=new Uint8Array(o.length),d=o.length;d--;)l[d]=o.charCodeAt(d);return(l=r6(l)).reduce(function(c,u){return c+String.fromCharCode(u)},"")};e.processDataByFilters=function(o,l){var d=0,c=o||"",u=[];for(typeof(l=l||[])=="string"&&(l=[l]),d=0;d<l.length;d+=1)switch(l[d]){case"ASCII85Decode":case"/ASCII85Decode":c=r(c),u.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":c=t(c),u.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":c=a(c),u.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":c=n(c),u.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":c=i(c),u.push("/FlateDecode");break;default:throw new Error('The filter: "'+l[d]+'" is not implemented')}return{data:c,reverseChain:u.reverse().join(" ")}}})(sn.API),(function(e){e.loadFile=function(t,r,n){return(function(a,i,o){i=i!==!1,o=typeof o=="function"?o:function(){};var l=void 0;try{l=(function(d,c,u){var x=new XMLHttpRequest,b=0,g=function(k){var y=k.length,N=[],S=String.fromCharCode;for(b=0;b<y;b+=1)N.push(S(255&k.charCodeAt(b)));return N.join("")};if(x.open("GET",d,!c),x.overrideMimeType("text/plain; charset=x-user-defined"),c===!1&&(x.onload=function(){x.status===200?u(g(this.responseText)):u(void 0)}),x.send(null),c&&x.status===200)return g(x.responseText)})(a,i,o)}catch{}return l})(t,r,n)},e.loadImageFile=e.loadFile})(sn.API),(function(e){function t(){return(Rn.html2canvas?Promise.resolve(Rn.html2canvas):km(()=>import("./html2canvas.esm-QH1iLAAe.js"),[])).catch(function(l){return Promise.reject(new Error("Could not load html2canvas: "+l))}).then(function(l){return l.default?l.default:l})}function r(){return(Rn.DOMPurify?Promise.resolve(Rn.DOMPurify):km(()=>import("./purify.es-B6FQ9oRL.js"),[])).catch(function(l){return Promise.reject(new Error("Could not load dompurify: "+l))}).then(function(l){return l.default?l.default:l})}var n=function(l){var d=Za(l);return d==="undefined"?"undefined":d==="string"||l instanceof String?"string":d==="number"||l instanceof Number?"number":d==="function"||l instanceof Function?"function":l&&l.constructor===Array?"array":l&&l.nodeType===1?"element":d==="object"?"object":"unknown"},a=function(l,d){var c=document.createElement(l);for(var u in d.className&&(c.className=d.className),d.innerHTML&&d.dompurify&&(c.innerHTML=d.dompurify.sanitize(d.innerHTML)),d.style)c.style[u]=d.style[u];return c},i=function l(d,c){for(var u=d.nodeType===3?document.createTextNode(d.nodeValue):d.cloneNode(!1),x=d.firstChild;x;x=x.nextSibling)c!==!0&&x.nodeType===1&&x.nodeName==="SCRIPT"||u.appendChild(l(x,c));return d.nodeType===1&&(d.nodeName==="CANVAS"?(u.width=d.width,u.height=d.height,u.getContext("2d").drawImage(d,0,0)):d.nodeName!=="TEXTAREA"&&d.nodeName!=="SELECT"||(u.value=d.value),u.addEventListener("load",function(){u.scrollTop=d.scrollTop,u.scrollLeft=d.scrollLeft},!0)),u},o=function l(d){var c=Object.assign(l.convert(Promise.resolve()),JSON.parse(JSON.stringify(l.template))),u=l.convert(Promise.resolve(),c);return(u=u.setProgress(1,l,1,[l])).set(d)};(o.prototype=Object.create(Promise.prototype)).constructor=o,o.convert=function(l,d){return l.__proto__=d||o.prototype,l},o.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},o.prototype.from=function(l,d){return this.then(function(){switch(d=d||(function(c){switch(n(c)){case"string":return"string";case"element":return c.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(l),d){case"string":return this.then(r).then(function(c){return this.set({src:a("div",{innerHTML:l,dompurify:c})})});case"element":return this.set({src:l});case"canvas":return this.set({canvas:l});case"img":return this.set({img:l});default:return this.error("Unknown source type.")}})},o.prototype.to=function(l){switch(l){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},o.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var l={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},d=i(this.prop.src,this.opt.html2canvas.javascriptEnabled);d.tagName==="BODY"&&(l.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=a("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=a("div",{className:"html2pdf__container",style:l}),this.prop.container.appendChild(d),this.prop.container.firstChild.appendChild(a("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},o.prototype.toCanvas=function(){var l=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(l).then(t).then(function(d){var c=Object.assign({},this.opt.html2canvas);return delete c.onrendered,d(this.prop.container,c)}).then(function(d){(this.opt.html2canvas.onrendered||function(){})(d),this.prop.canvas=d,document.body.removeChild(this.prop.overlay)})},o.prototype.toContext2d=function(){var l=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(l).then(t).then(function(d){var c=this.opt.jsPDF,u=this.opt.fontFaces,x=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,b=Object.assign({async:!0,allowTaint:!0,scale:x,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete b.onrendered,c.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,c.context2d.posX=this.opt.x,c.context2d.posY=this.opt.y,c.context2d.margin=this.opt.margin,c.context2d.fontFaces=u,u)for(var g=0;g<u.length;++g){var k=u[g],y=k.src.find(function(N){return N.format==="truetype"});y&&c.addFont(y.url,k.ref.name,k.ref.style)}return b.windowHeight=b.windowHeight||0,b.windowHeight=b.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):b.windowHeight,c.context2d.save(!0),d(this.prop.container,b)}).then(function(d){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(d),this.prop.canvas=d,document.body.removeChild(this.prop.overlay)})},o.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var l=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=l})},o.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},o.prototype.output=function(l,d,c){return(c=c||"pdf").toLowerCase()==="img"||c.toLowerCase()==="image"?this.outputImg(l,d):this.outputPdf(l,d)},o.prototype.outputPdf=function(l,d){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(l,d)})},o.prototype.outputImg=function(l){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(l){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+l+'" is not supported.'}})},o.prototype.save=function(l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(l?{filename:l}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},o.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},o.prototype.set=function(l){if(n(l)!=="object")return this;var d=Object.keys(l||{}).map(function(c){if(c in o.template.prop)return function(){this.prop[c]=l[c]};switch(c){case"margin":return this.setMargin.bind(this,l.margin);case"jsPDF":return function(){return this.opt.jsPDF=l.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,l.pageSize);default:return function(){this.opt[c]=l[c]}}},this);return this.then(function(){return this.thenList(d)})},o.prototype.get=function(l,d){return this.then(function(){var c=l in o.template.prop?this.prop[l]:this.opt[l];return d?d(c):c})},o.prototype.setMargin=function(l){return this.then(function(){switch(n(l)){case"number":l=[l,l,l,l];case"array":if(l.length===2&&(l=[l[0],l[1],l[0],l[1]]),l.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=l}).then(this.setPageSize)},o.prototype.setPageSize=function(l){function d(c,u){return Math.floor(c*u/72*96)}return this.then(function(){(l=l||sn.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(l.inner={width:l.width-this.opt.margin[1]-this.opt.margin[3],height:l.height-this.opt.margin[0]-this.opt.margin[2]},l.inner.px={width:d(l.inner.width,l.k),height:d(l.inner.height,l.k)},l.inner.ratio=l.inner.height/l.inner.width),this.prop.pageSize=l})},o.prototype.setProgress=function(l,d,c,u){return l!=null&&(this.progress.val=l),d!=null&&(this.progress.state=d),c!=null&&(this.progress.n=c),u!=null&&(this.progress.stack=u),this.progress.ratio=this.progress.val/this.progress.state,this},o.prototype.updateProgress=function(l,d,c,u){return this.setProgress(l?this.progress.val+l:null,d||null,c?this.progress.n+c:null,u?this.progress.stack.concat(u):null)},o.prototype.then=function(l,d){var c=this;return this.thenCore(l,d,function(u,x){return c.updateProgress(null,null,1,[u]),Promise.prototype.then.call(this,function(b){return c.updateProgress(null,u),b}).then(u,x).then(function(b){return c.updateProgress(1),b})})},o.prototype.thenCore=function(l,d,c){c=c||Promise.prototype.then;var u=this;l&&(l=l.bind(u)),d&&(d=d.bind(u));var x=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?u:o.convert(Object.assign({},u),Promise.prototype),b=c.call(x,l,d);return o.convert(b,u.__proto__)},o.prototype.thenExternal=function(l,d){return Promise.prototype.then.call(this,l,d)},o.prototype.thenList=function(l){var d=this;return l.forEach(function(c){d=d.thenCore(c)}),d},o.prototype.catch=function(l){l&&(l=l.bind(this));var d=Promise.prototype.catch.call(this,l);return o.convert(d,this)},o.prototype.catchExternal=function(l){return Promise.prototype.catch.call(this,l)},o.prototype.error=function(l){return this.then(function(){throw new Error(l)})},o.prototype.using=o.prototype.set,o.prototype.saveAs=o.prototype.save,o.prototype.export=o.prototype.output,o.prototype.run=o.prototype.then,sn.getPageSize=function(l,d,c){if(Za(l)==="object"){var u=l;l=u.orientation,d=u.unit||d,c=u.format||c}d=d||"mm",c=c||"a4",l=(""+(l||"P")).toLowerCase();var x,b=(""+c).toLowerCase(),g={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(d){case"pt":x=1;break;case"mm":x=72/25.4;break;case"cm":x=72/2.54;break;case"in":x=72;break;case"px":x=.75;break;case"pc":case"em":x=12;break;case"ex":x=6;break;default:throw"Invalid unit: "+d}var k,y=0,N=0;if(g.hasOwnProperty(b))y=g[b][1]/x,N=g[b][0]/x;else try{y=c[1],N=c[0]}catch{throw new Error("Invalid format: "+c)}if(l==="p"||l==="portrait")l="p",N>y&&(k=N,N=y,y=k);else{if(l!=="l"&&l!=="landscape")throw"Invalid orientation: "+l;l="l",y>N&&(k=N,N=y,y=k)}return{width:N,height:y,unit:d,k:x,orientation:l}},e.html=function(l,d){(d=d||{}).callback=d.callback||function(){},d.html2canvas=d.html2canvas||{},d.html2canvas.canvas=d.html2canvas.canvas||this.canvas,d.jsPDF=d.jsPDF||this,d.fontFaces=d.fontFaces?d.fontFaces.map($_):null;var c=new o(d);return d.worker?c:c.from(l).doCallback()}})(sn.API),sn.API.addJS=function(e){return fF=e,this.internal.events.subscribe("postPutResources",function(){Jy=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Jy+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),hF=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+fF+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Jy!==void 0&&hF!==void 0&&this.internal.out("/Names <</JavaScript "+Jy+" 0 R>>")}),this},(function(e){var t;e.events.push(["postPutResources",function(){var r=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var a=r.outline.render().split(/\r\n/),i=0;i<a.length;i++){var o=a[i],l=n.exec(o);if(l!=null){var d=l[1];r.internal.newObjectDeferredBegin(d,!1)}r.internal.write(o)}if(this.outline.createNamedDestinations){var c=this.internal.pages.length,u=[];for(i=0;i<c;i++){var x=r.internal.newObject();u.push(x);var b=r.internal.getPageInfo(i+1);r.internal.write("<< /D["+b.objId+" 0 R /XYZ null null null]>> endobj")}var g=r.internal.newObject();for(r.internal.write("<< /Names [ "),i=0;i<u.length;i++)r.internal.write("(page_"+(i+1)+")"+u[i]+" 0 R");r.internal.write(" ] >>","endobj"),t=r.internal.newObject(),r.internal.write("<< /Dests "+g+" 0 R"),r.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){var r=this;r.outline.root.children.length>0&&(r.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&r.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(n,a,i){var o={title:a,options:i,children:[]};return n==null&&(n=this.root),n.children.push(o),o},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(n){n.id=r.internal.newObjectDeferred();for(var a=0;a<n.children.length;a++)this.genIds_r(n.children[a])},r.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},r.outline.renderItems=function(n){for(var a=this.ctx.pdf.internal.getVerticalCoordinateString,i=0;i<n.children.length;i++){var o=n.children[i];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(n)),i>0&&this.line("/Prev "+this.makeRef(n.children[i-1])),i<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[i+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var l=this.count=this.count_r({count:0},o);if(l>0&&this.line("/Count "+l),o.options&&o.options.pageNumber){var d=r.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+d.objId+" 0 R /XYZ 0 "+a(0)+" 0]")}this.objEnd()}for(var c=0;c<n.children.length;c++)this.renderItems(n.children[c])},r.outline.line=function(n){this.ctx.val+=n+`\r
`},r.outline.makeRef=function(n){return n.id+" 0 R"},r.outline.makeString=function(n){return"("+r.internal.pdfEscape(n)+")"},r.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(n,a){for(var i=0;i<a.children.length;i++)n.count++,this.count_r(n,a.children[i]);return n.count}}])})(sn.API),(function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(r,n,a,i,o,l){var d,c=this.decode.DCT_DECODE,u=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=o||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,d=(function(x){for(var b,g=256*x.charCodeAt(4)+x.charCodeAt(5),k=x.length,y={width:0,height:0,numcomponents:1},N=4;N<k;N+=2){if(N+=g,t.indexOf(x.charCodeAt(N+1))!==-1){b=256*x.charCodeAt(N+5)+x.charCodeAt(N+6),y={width:256*x.charCodeAt(N+7)+x.charCodeAt(N+8),height:b,numcomponents:x.charCodeAt(N+9)};break}g=256*x.charCodeAt(N+2)+x.charCodeAt(N+3)}return y})(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r),d.numcomponents){case 1:l=this.color_spaces.DEVICE_GRAY;break;case 4:l=this.color_spaces.DEVICE_CMYK;break;case 3:l=this.color_spaces.DEVICE_RGB}u={data:r,width:d.width,height:d.height,colorSpace:l,bitsPerComponent:8,filter:c,index:n,alias:a}}return u}})(sn.API),sn.API.processPNG=function(e,t,r,n){if(this.__addimage__.isArrayBuffer(e)&&(e=new Uint8Array(e)),this.__addimage__.isArrayBufferView(e)){var a,i=R7e(e,{checkCrc:!0}),o=i.width,l=i.height,d=i.channels,c=i.palette,u=i.depth;a=c&&d===1?(function(U){for(var L=U.width,Q=U.height,H=U.data,G=U.palette,Z=U.depth,te=!1,se=[],ue=[],ae=void 0,pe=!1,ve=0,Pe=0;Pe<G.length;Pe++){var xe=gR(G[Pe],4),B=xe[0],re=xe[1],J=xe[2],ie=xe[3];se.push(B,re,J),ie!=null&&(ie===0?(ve++,ue.length<1&&ue.push(Pe)):ie<255&&(pe=!0))}if(pe||ve>1){te=!0,ue=void 0;var Y=L*Q;ae=new Uint8Array(Y);for(var _e=new DataView(H.buffer),me=0;me<Y;me++){var ne=W_(_e,me,Z),je=gR(G[ne],4)[3];ae[me]=je}}else ve===0&&(ue=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:te?8:void 0,colorBytes:H,alphaBytes:ae,needSMask:te,palette:se,mask:ue}})(i):d===2||d===4?(function(U){for(var L=U.data,Q=U.width,H=U.height,G=U.channels,Z=U.depth,te=G===2?"DeviceGray":"DeviceRGB",se=G-1,ue=Q*H,ae=se,pe=ue*ae,ve=1*ue,Pe=Math.ceil(pe*Z/8),xe=Math.ceil(ve*Z/8),B=new Uint8Array(Pe),re=new Uint8Array(xe),J=new DataView(L.buffer),ie=new DataView(B.buffer),Y=new DataView(re.buffer),_e=!1,me=0;me<ue;me++){for(var ne=me*G,je=0;je<ae;je++)kF(ie,W_(J,ne+je,Z),me*ae+je,Z);var De=W_(J,ne+ae,Z);De<(1<<Z)-1&&(_e=!0),kF(Y,De,1*me,Z)}return{colorSpace:te,colorsPerPixel:se,sMaskBitsPerComponent:_e?Z:void 0,colorBytes:B,alphaBytes:re,needSMask:_e}})(i):(function(U){var L=U.data,Q=U.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:Q,colorsPerPixel:Q==="DeviceGray"?1:3,colorBytes:L instanceof Uint16Array?(function(H){for(var G=H.length,Z=new Uint8Array(2*G),te=new DataView(Z.buffer,Z.byteOffset,Z.byteLength),se=0;se<G;se++)te.setUint16(2*se,H[se],!1);return Z})(L):L,needSMask:!1}})(i);var x,b,g,k=a,y=k.colorSpace,N=k.colorsPerPixel,S=k.sMaskBitsPerComponent,O=k.colorBytes,A=k.alphaBytes,P=k.needSMask,q=k.palette,W=k.mask,R=null;return n!==sn.API.image_compression.NONE&&typeof r6=="function"?(R=(function(U){var L;switch(U){case sn.API.image_compression.FAST:L=11;break;case sn.API.image_compression.MEDIUM:L=13;break;case sn.API.image_compression.SLOW:L=14;break;default:L=12}return L})(n),x=this.decode.FLATE_DECODE,b="/Predictor ".concat(R," /Colors ").concat(N," /BitsPerComponent ").concat(u," /Columns ").concat(o),e=gF(O,Math.ceil(o*N*u/8),N,u,n),P&&(g=gF(A,Math.ceil(o*S/8),1,S,n))):(x=void 0,b=void 0,e=O,P&&(g=A)),(this.__addimage__.isArrayBuffer(e)||this.__addimage__.isArrayBufferView(e))&&(e=this.__addimage__.arrayBufferToBinaryString(e)),(g&&this.__addimage__.isArrayBuffer(g)||this.__addimage__.isArrayBufferView(g))&&(g=this.__addimage__.arrayBufferToBinaryString(g)),{alias:r,data:e,index:t,filter:x,decodeParameters:b,transparency:W,palette:q,sMask:g,predictor:R,width:o,height:l,bitsPerComponent:u,sMaskBitsPerComponent:S,colorSpace:y}}},(function(e){e.processGIF89A=function(t,r,n,a){var i=new aOe(t),o=i.width,l=i.height,d=[];i.decodeAndBlitFrameRGBA(0,d);var c={data:d,width:o,height:l},u=new G_(100).encode(c,100);return e.processJPEG.call(this,u,r,n,a)},e.processGIF87A=e.processGIF89A})(sn.API),Wd.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:a,green:n,blue:r,quad:i}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Wd.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(r){ms.log("bit decode error:"+r)}},Wd.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),r=t%4;for(e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,a=0;a<t;a++)for(var i=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+8*a*4,l=0;l<8&&8*a+l<this.width;l++){var d=this.palette[i>>7-l&1];this.data[o+4*l]=d.blue,this.data[o+4*l+1]=d.green,this.data[o+4*l+2]=d.red,this.data[o+4*l+3]=255}r!==0&&(this.pos+=4-r)}},Wd.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<e;a++){var i=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+2*a*4,l=i>>4,d=15&i,c=this.palette[l];if(this.data[o]=c.blue,this.data[o+1]=c.green,this.data[o+2]=c.red,this.data[o+3]=255,2*a+1>=this.width)break;c=this.palette[d],this.data[o+4]=c.blue,this.data[o+4+1]=c.green,this.data[o+4+2]=c.red,this.data[o+4+3]=255}t!==0&&(this.pos+=4-t)}},Wd.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var a=this.datav.getUint8(this.pos++,!0),i=r*this.width*4+4*n;if(a<this.palette.length){var o=this.palette[a];this.data[i]=o.red,this.data[i+1]=o.green,this.data[i+2]=o.blue,this.data[i+3]=255}else this.data[i]=255,this.data[i+1]=255,this.data[i+2]=255,this.data[i+3]=255}e!==0&&(this.pos+=4-e)}},Wd.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<this.width;a++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(i&t)/t*255|0,l=(i>>5&t)/t*255|0,d=(i>>10&t)/t*255|0,c=i>>15?255:0,u=n*this.width*4+4*a;this.data[u]=d,this.data[u+1]=l,this.data[u+2]=o,this.data[u+3]=c}this.pos+=e}},Wd.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),r=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var a=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(o&t)/t*255|0,d=(o>>5&r)/r*255|0,c=(o>>11)/t*255|0,u=a*this.width*4+4*i;this.data[u]=c,this.data[u+1]=d,this.data[u+2]=l,this.data[u+3]=255}this.pos+=e}},Wd.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*r;this.data[o]=i,this.data[o+1]=a,this.data[o+2]=n,this.data[o+3]=255}this.pos+=this.width%4}},Wd.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=t*this.width*4+4*r;this.data[l]=i,this.data[l+1]=a,this.data[l+2]=n,this.data[l+3]=o}},Wd.prototype.getData=function(){return this.data},(function(e){e.processBMP=function(t,r,n,a){var i=new Wd(t,!1),o=i.width,l=i.height,d={data:i.getData(),width:o,height:l},c=new G_(100).encode(d,100);return e.processJPEG.call(this,c,r,n,a)}})(sn.API),_F.prototype.getData=function(){return this.data},(function(e){e.processWEBP=function(t,r,n,a){var i=new _F(t),o=i.width,l=i.height,d={data:i.getData(),width:o,height:l},c=new G_(100).encode(d,100);return e.processJPEG.call(this,c,r,n,a)}})(sn.API),sn.API.processRGBA=function(e,t,r){for(var n=e.data,a=n.length,i=new Uint8Array(a/4*3),o=new Uint8Array(a/4),l=0,d=0,c=0;c<a;c+=4){var u=n[c],x=n[c+1],b=n[c+2],g=n[c+3];i[l++]=u,i[l++]=x,i[l++]=b,o[d++]=g}var k=this.__addimage__.arrayBufferToBinaryString(i);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:k,index:t,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},sn.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},f1=sn.API,ew=f1.getCharWidthsArray=function(e,t){var r,n,a=(t=t||{}).font||this.internal.getFont(),i=t.fontSize||this.internal.getFontSize(),o=t.charSpace||this.internal.getCharSpace(),l=t.widths?t.widths:a.metadata.Unicode.widths,d=l.fof?l.fof:1,c=t.kerning?t.kerning:a.metadata.Unicode.kerning,u=c.fof?c.fof:1,x=t.doKerning!==!1,b=0,g=e.length,k=0,y=l[0]||d,N=[];for(r=0;r<g;r++)n=e.charCodeAt(r),typeof a.metadata.widthOfString=="function"?N.push((a.metadata.widthOfGlyph(a.metadata.characterToGlyph(n))+o*(1e3/i)||0)/1e3):(b=x&&Za(c[n])==="object"&&!isNaN(parseInt(c[n][k],10))?c[n][k]/u:0,N.push((l[n]||y)/d+b)),k=n;return N},mF=f1.getStringUnitWidth=function(e,t){var r=(t=t||{}).fontSize||this.internal.getFontSize(),n=t.font||this.internal.getFont(),a=t.charSpace||this.internal.getCharSpace();return f1.processArabic&&(e=f1.processArabic(e)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(e,r,a)/r:ew.apply(this,arguments).reduce(function(i,o){return i+o},0)},xF=function(e,t,r,n){for(var a=[],i=0,o=e.length,l=0;i!==o&&l+t[i]<r;)l+=t[i],i++;a.push(e.slice(0,i));var d=i;for(l=0;i!==o;)l+t[i]>n&&(a.push(e.slice(d,i)),l=0,d=i),l+=t[i],i++;return d!==i&&a.push(e.slice(d,i)),a},pF=function(e,t,r){r||(r={});var n,a,i,o,l,d,c,u=[],x=[u],b=r.textIndent||0,g=0,k=0,y=e.split(" "),N=ew.apply(this,[" ",r])[0];if(d=r.lineIndent===-1?y[0].length+2:r.lineIndent||0){var S=Array(d).join(" "),O=[];y.map(function(P){(P=P.split(/\s*\n/)).length>1?O=O.concat(P.map(function(q,W){return(W&&q.length?`
`:"")+q})):O.push(P[0])}),y=O,d=mF.apply(this,[S,r])}for(i=0,o=y.length;i<o;i++){var A=0;if(n=y[i],d&&n[0]==`
`&&(n=n.substr(1),A=1),b+g+(k=(a=ew.apply(this,[n,r])).reduce(function(P,q){return P+q},0))>t||A){if(k>t){for(l=xF.apply(this,[n,a,t-(b+g),t]),u.push(l.shift()),u=[l.pop()];l.length;)x.push([l.shift()]);k=a.slice(n.length-(u[0]?u[0].length:0)).reduce(function(P,q){return P+q},0)}else u=[n];x.push(u),b=k+d,g=N}else u.push(n),b+=g+k,g=N}return c=d?function(P,q){return(q?S:"")+P.join(" ")}:function(P){return P.join(" ")},x.map(c)},f1.splitTextToSize=function(e,t,r){var n,a=(r=r||{}).fontSize||this.internal.getFontSize(),i=(function(u){if(u.widths&&u.kerning)return{widths:u.widths,kerning:u.kerning};var x=this.internal.getFont(u.fontName,u.fontStyle),b="Unicode";return x.metadata[b]?{widths:x.metadata[b].widths||{0:1},kerning:x.metadata[b].kerning||{}}:{font:x.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);n=Array.isArray(e)?e:String(e).split(/\r?\n/);var o=1*this.internal.scaleFactor*t/a;i.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/a:0,i.lineIndent=r.lineIndent;var l,d,c=[];for(l=0,d=n.length;l<d;l++)c=c.concat(pF.apply(this,[n[l],o,i]));return c},(function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="0123456789abcdef",r="klmnopqrstuvwxyz",n={},a={},i=0;i<16;i++)n[r[i]]=t[i],a[t[i]]=r[i];var o=function(b){return"0x"+parseInt(b,10).toString(16)},l=e.__fontmetrics__.compress=function(b){var g,k,y,N,S=["{"];for(var O in b){if(g=b[O],isNaN(parseInt(O,10))?k="'"+O+"'":(O=parseInt(O,10),k=(k=o(O).slice(2)).slice(0,-1)+a[k.slice(-1)]),typeof g=="number")g<0?(y=o(g).slice(3),N="-"):(y=o(g).slice(2),N=""),y=N+y.slice(0,-1)+a[y.slice(-1)];else{if(Za(g)!=="object")throw new Error("Don't know what to do with value type "+Za(g)+".");y=l(g)}S.push(k+y)}return S.push("}"),S.join("")},d=e.__fontmetrics__.uncompress=function(b){if(typeof b!="string")throw new Error("Invalid argument passed to uncompress.");for(var g,k,y,N,S={},O=1,A=S,P=[],q="",W="",R=b.length-1,U=1;U<R;U+=1)(N=b[U])=="'"?g?(y=g.join(""),g=void 0):g=[]:g?g.push(N):N=="{"?(P.push([A,y]),A={},y=void 0):N=="}"?((k=P.pop())[0][k[1]]=A,y=void 0,A=k[0]):N=="-"?O=-1:y===void 0?n.hasOwnProperty(N)?(q+=n[N],y=parseInt(q,16)*O,O=1,q=""):q+=N:n.hasOwnProperty(N)?(W+=n[N],A[y]=parseInt(W,16)*O,O=1,y=void 0,W=""):W+=N;return S},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:d("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},u={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},x={Unicode:{"Courier-Oblique":d("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":d("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":d("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:d("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":d("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":d("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:d("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:d("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":d("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:d("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":d("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":d("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":d("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":d("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(b){var g=b.font,k=x.Unicode[g.postScriptName];k&&(g.metadata.Unicode={},g.metadata.Unicode.widths=k.widths,g.metadata.Unicode.kerning=k.kerning);var y=u.Unicode[g.postScriptName];y&&(g.metadata.Unicode.encoding=y,g.encoding=y.codePages[0])}])})(sn.API),(function(e){var t=function(r){for(var n=r.length,a=new Uint8Array(n),i=0;i<n;i++)a[i]=r.charCodeAt(i);return a};e.API.events.push(["addFont",function(r){var n=void 0,a=r.font,i=r.instance;if(!a.isStandardFont){if(i===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");if(typeof(n=i.existsFileInVFS(a.postScriptName)===!1?i.loadFile(a.postScriptName):i.getFileFromVFS(a.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");(function(o,l){l=/^\x00\x01\x00\x00/.test(l)?t(l):t(lw(l)),o.metadata=e.API.TTFFont.open(l),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(a,n)}}])})(sn),sn.API.addSvgAsImage=function(e,t,r,n,a,i,o,l){if(isNaN(t)||isNaN(r))throw ms.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(n)||isNaN(a))throw ms.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var d=document.createElement("canvas");d.width=n,d.height=a;var c=d.getContext("2d");c.fillStyle="#fff",c.fillRect(0,0,d.width,d.height);var u={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},x=this;return(Rn.canvg?Promise.resolve(Rn.canvg):km(()=>import("./index.es-B-DCOcDx.js"),[])).catch(function(b){return Promise.reject(new Error("Could not load canvg: "+b))}).then(function(b){return b.default?b.default:b}).then(function(b){return b.fromString(c,e,u)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(b){return b.render(u)}).then(function(){x.addImage(d.toDataURL("image/jpeg",1),t,r,n,a,o,l)})},sn.API.putTotalPages=function(e){var t,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),r=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var a=0;a<this.internal.pages[n].length;a++)this.internal.pages[n][a]=this.internal.pages[n][a].replace(t,r);return this},sn.API.viewerPreferences=function(e,t){var r;e=e||{},t=t||!1;var n,a,i,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},l=Object.keys(o),d=[],c=0,u=0,x=0;function b(k,y){var N,S=!1;for(N=0;N<k.length;N+=1)k[N]===y&&(S=!0);return S}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var g=l.length;for(x=0;x<g;x+=1)r[l[x]].value=r[l[x]].defaultValue,r[l[x]].explicitSet=!1}if(Za(e)==="object"){for(a in e)if(i=e[a],b(l,a)&&i!==void 0){if(r[a].type==="boolean"&&typeof i=="boolean")r[a].value=i;else if(r[a].type==="name"&&b(r[a].valueSet,i))r[a].value=i;else if(r[a].type==="integer"&&Number.isInteger(i))r[a].value=i;else if(r[a].type==="array"){for(c=0;c<i.length;c+=1)if(n=!0,i[c].length===1&&typeof i[c][0]=="number")d.push(String(i[c]-1));else if(i[c].length>1){for(u=0;u<i[c].length;u+=1)typeof i[c][u]!="number"&&(n=!1);n===!0&&d.push([i[c][0]-1,i[c][1]-1].join(" "))}r[a].value="["+d.join(" ")+"]"}else r[a].value=r[a].defaultValue;r[a].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var k,y=[];for(k in r)r[k].explicitSet===!0&&(r[k].type==="name"?y.push("/"+k+" /"+r[k].value):y.push("/"+k+" "+r[k].value));y.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+y.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},(function(e){var t=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',a=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),i=unescape(encodeURIComponent(n)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),l=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),d=unescape(encodeURIComponent("</x:xmpmeta>")),c=i.length+o.length+l.length+a.length+d.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+c+" >>"),this.internal.write("stream"),this.internal.write(a+i+o+l+d),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(n,a){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:a||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",t)),this}})(sn.API),(function(e){var t=e.API,r=t.pdfEscape16=function(i,o){for(var l,d=o.metadata.Unicode.widths,c=["","0","00","000","0000"],u=[""],x=0,b=i.length;x<b;++x){if(l=o.metadata.characterToGlyph(i.charCodeAt(x)),o.metadata.glyIdsUsed.push(l),o.metadata.toUnicode[l]=i.charCodeAt(x),d.indexOf(l)==-1&&(d.push(l),d.push([parseInt(o.metadata.widthOfGlyph(l),10)])),l=="0")return u.join("");l=l.toString(16),u.push(c[4-l.length],l)}return u.join("")},n=function(i){var o,l,d,c,u,x,b;for(u=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,d=[],x=0,b=(l=Object.keys(i).sort(function(g,k){return g-k})).length;x<b;x++)o=l[x],d.length>=100&&(u+=`
`+d.length+` beginbfchar
`+d.join(`
`)+`
endbfchar`,d=[]),i[o]!==void 0&&i[o]!==null&&typeof i[o].toString=="function"&&(c=("0000"+i[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),d.push("<"+o+"><"+c+">"));return d.length&&(u+=`
`+d.length+` beginbfchar
`+d.join(`
`)+`
endbfchar
`),u+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(i){(function(o){var l=o.font,d=o.out,c=o.newObject,u=o.putStream;if(l.metadata instanceof e.API.TTFFont&&l.encoding==="Identity-H"){for(var x=l.metadata.Unicode.widths,b=l.metadata.subset.encode(l.metadata.glyIdsUsed,1),g="",k=0;k<b.length;k++)g+=String.fromCharCode(b[k]);var y=c();u({data:g,addLength1:!0,objectId:y}),d("endobj");var N=c();u({data:n(l.metadata.toUnicode),addLength1:!0,objectId:N}),d("endobj");var S=c();d("<<"),d("/Type /FontDescriptor"),d("/FontName /"+v1(l.fontName)),d("/FontFile2 "+y+" 0 R"),d("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),d("/Flags "+l.metadata.flags),d("/StemV "+l.metadata.stemV),d("/ItalicAngle "+l.metadata.italicAngle),d("/Ascent "+l.metadata.ascender),d("/Descent "+l.metadata.decender),d("/CapHeight "+l.metadata.capHeight),d(">>"),d("endobj");var O=c();d("<<"),d("/Type /Font"),d("/BaseFont /"+v1(l.fontName)),d("/FontDescriptor "+S+" 0 R"),d("/W "+e.API.PDFObject.convert(x)),d("/CIDToGIDMap /Identity"),d("/DW 1000"),d("/Subtype /CIDFontType2"),d("/CIDSystemInfo"),d("<<"),d("/Supplement 0"),d("/Registry (Adobe)"),d("/Ordering ("+l.encoding+")"),d(">>"),d(">>"),d("endobj"),l.objectNumber=c(),d("<<"),d("/Type /Font"),d("/Subtype /Type0"),d("/ToUnicode "+N+" 0 R"),d("/BaseFont /"+v1(l.fontName)),d("/Encoding /"+l.encoding),d("/DescendantFonts ["+O+" 0 R]"),d(">>"),d("endobj"),l.isAlreadyPutted=!0}})(i)}]),t.events.push(["putFont",function(i){(function(o){var l=o.font,d=o.out,c=o.newObject,u=o.putStream;if(l.metadata instanceof e.API.TTFFont&&l.encoding==="WinAnsiEncoding"){for(var x=l.metadata.rawData,b="",g=0;g<x.length;g++)b+=String.fromCharCode(x[g]);var k=c();u({data:b,addLength1:!0,objectId:k}),d("endobj");var y=c();u({data:n(l.metadata.toUnicode),addLength1:!0,objectId:y}),d("endobj");var N=c();d("<<"),d("/Descent "+l.metadata.decender),d("/CapHeight "+l.metadata.capHeight),d("/StemV "+l.metadata.stemV),d("/Type /FontDescriptor"),d("/FontFile2 "+k+" 0 R"),d("/Flags 96"),d("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),d("/FontName /"+v1(l.fontName)),d("/ItalicAngle "+l.metadata.italicAngle),d("/Ascent "+l.metadata.ascender),d(">>"),d("endobj"),l.objectNumber=c();for(var S=0;S<l.metadata.hmtx.widths.length;S++)l.metadata.hmtx.widths[S]=parseInt(l.metadata.hmtx.widths[S]*(1e3/l.metadata.head.unitsPerEm));d("<</Subtype/TrueType/Type/Font/ToUnicode "+y+" 0 R/BaseFont/"+v1(l.fontName)+"/FontDescriptor "+N+" 0 R/Encoding/"+l.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(l.metadata.hmtx.widths)+">>"),d("endobj"),l.isAlreadyPutted=!0}})(i)}]);var a=function(i){var o,l=i.text||"",d=i.x,c=i.y,u=i.options||{},x=i.mutex||{},b=x.pdfEscape,g=x.activeFontKey,k=x.fonts,y=g,N="",S=0,O="",A=k[y].encoding;if(k[y].encoding!=="Identity-H")return{text:l,x:d,y:c,options:u,mutex:x};for(O=l,y=g,Array.isArray(l)&&(O=l[0]),S=0;S<O.length;S+=1)k[y].metadata.hasOwnProperty("cmap")&&(o=k[y].metadata.cmap.unicode.codeMap[O[S].charCodeAt(0)]),o||O[S].charCodeAt(0)<256&&k[y].metadata.hasOwnProperty("Unicode")?N+=O[S]:N+="";var P="";return parseInt(y.slice(1))<14||A==="WinAnsiEncoding"?P=b(N,y).split("").map(function(q){return q.charCodeAt(0).toString(16)}).join(""):A==="Identity-H"&&(P=r(N,k[y])),x.isHex=!0,{text:P,x:d,y:c,options:u,mutex:x}};t.events.push(["postProcessText",function(i){var o=i.text||"",l=[],d={text:o,x:i.x,y:i.y,options:i.options,mutex:i.mutex};if(Array.isArray(o)){var c=0;for(c=0;c<o.length;c+=1)Array.isArray(o[c])&&o[c].length===3?l.push([a(Object.assign({},d,{text:o[c][0]})).text,o[c][1],o[c][2]]):l.push(a(Object.assign({},d,{text:o[c]})).text);i.text=l}else i.text=a(Object.assign({},d,{text:o})).text}])})(sn),(function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0},e.addFileToVFS=function(r,n){return t.call(this),this.internal.vFS[r]=n,this},e.getFileFromVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}})(sn.API),(function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(n){var a,i,o,l,d,c,u,x=t,b=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],g=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],k={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},y={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},N=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],S=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),O=!1,A=0;this.__bidiEngine__={};var P=function(H){var G=H.charCodeAt(),Z=G>>8,te=y[Z];return te!==void 0?x[256*te+(255&G)]:Z===252||Z===253?"AL":S.test(Z)?"L":Z===8?"R":"N"},q=function(H){for(var G,Z=0;Z<H.length;Z++){if((G=P(H.charAt(Z)))==="L")return!1;if(G==="R")return!0}return!1},W=function(H,G,Z,te){var se,ue,ae,pe,ve=G[te];switch(ve){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":O=!1;break;case"N":case"AN":break;case"EN":O&&(ve="AN");break;case"AL":O=!0,ve="R";break;case"WS":case"BN":ve="N";break;case"CS":te<1||te+1>=G.length||(se=Z[te-1])!=="EN"&&se!=="AN"||(ue=G[te+1])!=="EN"&&ue!=="AN"?ve="N":O&&(ue="AN"),ve=ue===se?ue:"N";break;case"ES":ve=(se=te>0?Z[te-1]:"B")==="EN"&&te+1<G.length&&G[te+1]==="EN"?"EN":"N";break;case"ET":if(te>0&&Z[te-1]==="EN"){ve="EN";break}if(O){ve="N";break}for(ae=te+1,pe=G.length;ae<pe&&G[ae]==="ET";)ae++;ve=ae<pe&&G[ae]==="EN"?"EN":"N";break;case"NSM":if(o&&!l){for(pe=G.length,ae=te+1;ae<pe&&G[ae]==="NSM";)ae++;if(ae<pe){var Pe=H[te],xe=Pe>=1425&&Pe<=2303||Pe===64286;if(se=G[ae],xe&&(se==="R"||se==="AL")){ve="R";break}}}ve=te<1||(se=G[te-1])==="B"?"N":Z[te-1];break;case"B":O=!1,a=!0,ve=A;break;case"S":i=!0,ve="N"}return ve},R=function(H,G,Z){var te=H.split("");return Z&&U(te,Z,{hiLevel:A}),te.reverse(),G&&G.reverse(),te.join("")},U=function(H,G,Z){var te,se,ue,ae,pe,ve=-1,Pe=H.length,xe=0,B=[],re=A?g:b,J=[];for(O=!1,a=!1,i=!1,se=0;se<Pe;se++)J[se]=P(H[se]);for(ue=0;ue<Pe;ue++){if(pe=xe,B[ue]=W(H,J,B,ue),te=240&(xe=re[pe][k[B[ue]]]),xe&=15,G[ue]=ae=re[xe][5],te>0)if(te===16){for(se=ve;se<ue;se++)G[se]=1;ve=-1}else ve=-1;if(re[xe][6])ve===-1&&(ve=ue);else if(ve>-1){for(se=ve;se<ue;se++)G[se]=ae;ve=-1}J[ue]==="B"&&(G[ue]=0),Z.hiLevel|=ae}i&&(function(ie,Y,_e){for(var me=0;me<_e;me++)if(ie[me]==="S"){Y[me]=A;for(var ne=me-1;ne>=0&&ie[ne]==="WS";ne--)Y[ne]=A}})(J,G,Pe)},L=function(H,G,Z,te,se){if(!(se.hiLevel<H)){if(H===1&&A===1&&!a)return G.reverse(),void(Z&&Z.reverse());for(var ue,ae,pe,ve,Pe=G.length,xe=0;xe<Pe;){if(te[xe]>=H){for(pe=xe+1;pe<Pe&&te[pe]>=H;)pe++;for(ve=xe,ae=pe-1;ve<ae;ve++,ae--)ue=G[ve],G[ve]=G[ae],G[ae]=ue,Z&&(ue=Z[ve],Z[ve]=Z[ae],Z[ae]=ue);xe=pe}xe++}}},Q=function(H,G,Z){var te=H.split(""),se={hiLevel:A};return Z||(Z=[]),U(te,Z,se),(function(ue,ae,pe){if(pe.hiLevel!==0&&u)for(var ve,Pe=0;Pe<ue.length;Pe++)ae[Pe]===1&&(ve=N.indexOf(ue[Pe]))>=0&&(ue[Pe]=N[ve+1])})(te,Z,se),L(2,te,G,Z,se),L(1,te,G,Z,se),te.join("")};return this.__bidiEngine__.doBidiReorder=function(H,G,Z){if((function(se,ue){if(ue)for(var ae=0;ae<se.length;ae++)ue[ae]=ae;l===void 0&&(l=q(se)),c===void 0&&(c=q(se))})(H,G),o||!d||c)if(o&&d&&l^c)A=l?1:0,H=R(H,G,Z);else if(!o&&d&&c)A=l?1:0,H=Q(H,G,Z),H=R(H,G);else if(!o||l||d||c){if(o&&!d&&l^c)H=R(H,G),l?(A=0,H=Q(H,G,Z)):(A=1,H=Q(H,G,Z),H=R(H,G));else if(o&&l&&!d&&c)A=1,H=Q(H,G,Z),H=R(H,G);else if(!o&&!d&&l^c){var te=u;l?(A=1,H=Q(H,G,Z),A=0,u=!1,H=Q(H,G,Z),u=te):(A=0,H=Q(H,G,Z),H=R(H,G),A=1,u=!1,H=Q(H,G,Z),u=te,H=R(H,G))}}else A=0,H=Q(H,G,Z);else A=l?1:0,H=Q(H,G,Z);return H},this.__bidiEngine__.setOptions=function(H){H&&(o=H.isInputVisual,d=H.isOutputVisual,l=H.isInputRtl,c=H.isOutputRtl,u=H.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(n){var a=n.text;n.x,n.y;var i=n.options||{};n.mutex,i.lang;var o=[];if(i.isInputVisual=typeof i.isInputVisual!="boolean"||i.isInputVisual,r.setOptions(i),Object.prototype.toString.call(a)==="[object Array]"){var l=0;for(o=[],l=0;l<a.length;l+=1)Object.prototype.toString.call(a[l])==="[object Array]"?o.push([r.doBidiReorder(a[l][0]),a[l][1],a[l][2]]):o.push([r.doBidiReorder(a[l])]);n.text=o}else n.text=r.doBidiReorder(a);r.setOptions({isInputVisual:!0})}])})(sn),sn.API.TTFFont=(function(){function e(t){var r;if(this.rawData=t,r=this.contents=new Nf(t),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new vOe(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new sOe(this.contents),this.head=new oOe(this),this.name=new hOe(this),this.cmap=new iX(this),this.toUnicode={},this.hhea=new lOe(this),this.maxp=new fOe(this),this.hmtx=new mOe(this),this.post=new dOe(this),this.os2=new cOe(this),this.loca=new bOe(this),this.glyf=new xOe(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,r,n,a,i;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,l,d,c;for(c=[],o=0,l=(d=this.bbox).length;o<l;o++)t=d[o],c.push(Math.round(t*this.scaleFactor));return c}).call(this),this.stemV=0,this.post.exists?(n=255&(a=this.post.italic_angle),32768&(r=a>>16)&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(i=this.familyClass)===1||i===2||i===3||i===4||i===5||i===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var r;return((r=this.cmap.unicode)!=null?r.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*r},e.prototype.widthOfString=function(t,r,n){var a,i,o,l;for(o=0,i=0,l=(t=""+t).length;0<=l?i<l:i>l;i=0<=l?++i:--i)a=t.charCodeAt(i),o+=this.widthOfGlyph(this.characterToGlyph(a))+n*(1e3/r)||0;return o*(r/1e3)},e.prototype.lineHeight=function(t,r){var n;return r==null&&(r=!1),n=r?this.lineGap:0,(this.ascender+n-this.decender)/1e3*t},e})();var fu,Nf=(function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var r,n;for(n=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)n[r]=String.fromCharCode(this.readByte());return n.join("")},e.prototype.writeString=function(t){var r,n,a;for(a=[],r=0,n=t.length;0<=n?r<n:r>n;r=0<=n?++r:--r)a.push(this.writeByte(t.charCodeAt(r)));return a},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,r,n,a,i,o,l,d;return t=this.readByte(),r=this.readByte(),n=this.readByte(),a=this.readByte(),i=this.readByte(),o=this.readByte(),l=this.readByte(),d=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^r)+1099511627776*(255^n)+4294967296*(255^a)+16777216*(255^i)+65536*(255^o)+256*(255^l)+(255^d)+1):72057594037927940*t+281474976710656*r+1099511627776*n+4294967296*a+16777216*i+65536*o+256*l+d},e.prototype.writeLongLong=function(t){var r,n;return r=Math.floor(t/4294967296),n=4294967295&t,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var r,n;for(r=[],n=0;0<=t?n<t:n>t;n=0<=t?++n:--n)r.push(this.readByte());return r},e.prototype.write=function(t){var r,n,a,i;for(i=[],n=0,a=t.length;n<a;n++)r=t[n],i.push(this.writeByte(r));return i},e})(),sOe=(function(){var e;function t(r){var n,a,i;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},a=0,i=this.tableCount;0<=i?a<i:a>i;a=0<=i?++a:--a)n={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[n.tag]=n}return t.prototype.encode=function(r){var n,a,i,o,l,d,c,u,x,b,g,k,y;for(y in g=Object.keys(r).length,d=Math.log(2),x=16*Math.floor(Math.log(g)/d),o=Math.floor(x/d),u=16*g-x,(a=new Nf).writeInt(this.scalarType),a.writeShort(g),a.writeShort(x),a.writeShort(o),a.writeShort(u),i=16*g,c=a.pos+i,l=null,k=[],r)for(b=r[y],a.writeString(y),a.writeInt(e(b)),a.writeInt(c),a.writeInt(b.length),k=k.concat(b),y==="head"&&(l=c),c+=b.length;c%4;)k.push(0),c++;return a.write(k),n=2981146554-e(a.data),a.pos=l+8,a.writeUInt32(n),a.data},e=function(r){var n,a,i,o;for(r=oX.call(r);r.length%4;)r.push(0);for(i=new Nf(r),a=0,n=0,o=r.length;n<o;n=n+=4)a+=i.readUInt32();return 4294967295&a},t})(),iOe={}.hasOwnProperty,r0=function(e,t){for(var r in t)iOe.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};fu=(function(){function e(t){var r;this.file=t,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e})();var oOe=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return r0(e,fu),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var r;return(r=new Nf).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(t),r.writeShort(this.glyphDataFormat),r.data},e})(),SF=(function(){function e(t,r){var n,a,i,o,l,d,c,u,x,b,g,k,y,N,S,O,A;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=r+t.readInt(),x=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(d=0;d<256;++d)this.codeMap[d]=t.readByte();break;case 4:for(g=t.readUInt16(),b=g/2,t.pos+=6,i=(function(){var P,q;for(q=[],d=P=0;0<=b?P<b:P>b;d=0<=b?++P:--P)q.push(t.readUInt16());return q})(),t.pos+=2,y=(function(){var P,q;for(q=[],d=P=0;0<=b?P<b:P>b;d=0<=b?++P:--P)q.push(t.readUInt16());return q})(),c=(function(){var P,q;for(q=[],d=P=0;0<=b?P<b:P>b;d=0<=b?++P:--P)q.push(t.readUInt16());return q})(),u=(function(){var P,q;for(q=[],d=P=0;0<=b?P<b:P>b;d=0<=b?++P:--P)q.push(t.readUInt16());return q})(),a=(this.length-t.pos+this.offset)/2,l=(function(){var P,q;for(q=[],d=P=0;0<=a?P<a:P>a;d=0<=a?++P:--P)q.push(t.readUInt16());return q})(),d=S=0,A=i.length;S<A;d=++S)for(N=i[d],n=O=k=y[d];k<=N?O<=N:O>=N;n=k<=N?++O:--O)u[d]===0?o=n+c[d]:(o=l[u[d]/2+(n-k)-(b-d)]||0)!==0&&(o+=c[d]),this.codeMap[n]=65535&o}t.pos=x}return e.encode=function(t,r){var n,a,i,o,l,d,c,u,x,b,g,k,y,N,S,O,A,P,q,W,R,U,L,Q,H,G,Z,te,se,ue,ae,pe,ve,Pe,xe,B,re,J,ie,Y,_e,me,ne,je,De,ce;switch(te=new Nf,o=Object.keys(t).sort(function(Ee,be){return Ee-be}),r){case"macroman":for(y=0,N=(function(){var Ee=[];for(k=0;k<256;++k)Ee.push(0);return Ee})(),O={0:0},i={},se=0,ve=o.length;se<ve;se++)O[ne=t[a=o[se]]]==null&&(O[ne]=++y),i[a]={old:t[a],new:O[t[a]]},N[a]=O[t[a]];return te.writeUInt16(1),te.writeUInt16(0),te.writeUInt32(12),te.writeUInt16(0),te.writeUInt16(262),te.writeUInt16(0),te.write(N),{charMap:i,subtable:te.data,maxGlyphID:y+1};case"unicode":for(G=[],x=[],A=0,O={},n={},S=c=null,ue=0,Pe=o.length;ue<Pe;ue++)O[q=t[a=o[ue]]]==null&&(O[q]=++A),n[a]={old:q,new:O[q]},l=O[q]-a,S!=null&&l===c||(S&&x.push(S),G.push(a),c=l),S=a;for(S&&x.push(S),x.push(65535),G.push(65535),Q=2*(L=G.length),U=2*Math.pow(Math.log(L)/Math.LN2,2),b=Math.log(U/2)/Math.LN2,R=2*L-U,d=[],W=[],g=[],k=ae=0,xe=G.length;ae<xe;k=++ae){if(H=G[k],u=x[k],H===65535){d.push(0),W.push(0);break}if(H-(Z=n[H].new)>=32768)for(d.push(0),W.push(2*(g.length+L-k)),a=pe=H;H<=u?pe<=u:pe>=u;a=H<=u?++pe:--pe)g.push(n[a].new);else d.push(Z-H),W.push(0)}for(te.writeUInt16(3),te.writeUInt16(1),te.writeUInt32(12),te.writeUInt16(4),te.writeUInt16(16+8*L+2*g.length),te.writeUInt16(0),te.writeUInt16(Q),te.writeUInt16(U),te.writeUInt16(b),te.writeUInt16(R),_e=0,B=x.length;_e<B;_e++)a=x[_e],te.writeUInt16(a);for(te.writeUInt16(0),me=0,re=G.length;me<re;me++)a=G[me],te.writeUInt16(a);for(je=0,J=d.length;je<J;je++)l=d[je],te.writeUInt16(l);for(De=0,ie=W.length;De<ie;De++)P=W[De],te.writeUInt16(P);for(ce=0,Y=g.length;ce<Y;ce++)y=g[ce],te.writeUInt16(y);return{charMap:n,subtable:te.data,maxGlyphID:A+1}}},e})(),iX=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return r0(e,fu),e.prototype.tag="cmap",e.prototype.parse=function(t){var r,n,a;for(t.pos=this.offset,this.version=t.readUInt16(),a=t.readUInt16(),this.tables=[],this.unicode=null,n=0;0<=a?n<a:n>a;n=0<=a?++n:--n)r=new SF(t,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(t,r){var n,a;return r==null&&(r="macroman"),n=SF.encode(t,r),(a=new Nf).writeUInt16(0),a.writeUInt16(1),n.table=a.data.concat(n.subtable),n},e})(),lOe=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return r0(e,fu),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e})(),cOe=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return r0(e,fu),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=(function(){var r,n;for(n=[],r=0;r<10;++r)n.push(t.readByte());return n})(),this.charRange=(function(){var r,n;for(n=[],r=0;r<4;++r)n.push(t.readInt());return n})(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=(function(){var r,n;for(n=[],r=0;r<2;r=++r)n.push(t.readInt());return n})(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e})(),dOe=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return r0(e,fu),e.prototype.tag="post",e.prototype.parse=function(t){var r,n,a;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:case 196608:break;case 131072:var i;for(n=t.readUInt16(),this.glyphNameIndex=[],i=0;0<=n?i<n:i>n;i=0<=n?++i:--i)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],a=[];t.pos<this.offset+this.length;)r=t.readByte(),a.push(this.names.push(t.readString(r)));return a;case 151552:return n=t.readUInt16(),this.offsets=t.read(n);case 262144:return this.map=(function(){var o,l,d;for(d=[],i=o=0,l=this.file.maxp.numGlyphs;0<=l?o<l:o>l;i=0<=l?++o:--o)d.push(t.readUInt32());return d}).call(this)}},e})(),uOe=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},hOe=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return r0(e,fu),e.prototype.tag="name",e.prototype.parse=function(t){var r,n,a,i,o,l,d,c,u,x,b;for(t.pos=this.offset,t.readShort(),r=t.readShort(),l=t.readShort(),n=[],i=0;0<=r?i<r:i>r;i=0<=r?++i:--i)n.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+l+t.readShort()});for(d={},i=u=0,x=n.length;u<x;i=++u)a=n[i],t.pos=a.offset,c=t.readString(a.length),o=new uOe(c,a),d[b=a.nameID]==null&&(d[b]=[]),d[a.nameID].push(o);this.strings=d,this.copyright=d[0],this.fontFamily=d[1],this.fontSubfamily=d[2],this.uniqueSubfamily=d[3],this.fontName=d[4],this.version=d[5];try{this.postscriptName=d[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=d[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=d[7],this.manufacturer=d[8],this.designer=d[9],this.description=d[10],this.vendorUrl=d[11],this.designerUrl=d[12],this.license=d[13],this.licenseUrl=d[14],this.preferredFamily=d[15],this.preferredSubfamily=d[17],this.compatibleFull=d[18],this.sampleText=d[19]},e})(),fOe=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return r0(e,fu),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e})(),mOe=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return r0(e,fu),e.prototype.tag="hmtx",e.prototype.parse=function(t){var r,n,a,i,o,l,d;for(t.pos=this.offset,this.metrics=[],r=0,l=this.file.hhea.numberOfMetrics;0<=l?r<l:r>l;r=0<=l?++r:--r)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(a=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var c,u;for(u=[],r=c=0;0<=a?c<a:c>a;r=0<=a?++c:--c)u.push(t.readInt16());return u})(),this.widths=(function(){var c,u,x,b;for(b=[],c=0,u=(x=this.metrics).length;c<u;c++)i=x[c],b.push(i.advance);return b}).call(this),n=this.widths[this.widths.length-1],d=[],r=o=0;0<=a?o<a:o>a;r=0<=a?++o:--o)d.push(this.widths.push(n));return d},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e})(),oX=[].slice,xOe=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return r0(e,fu),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var r,n,a,i,o,l,d,c,u,x;return t in this.cache?this.cache[t]:(i=this.file.loca,r=this.file.contents,n=i.indexOf(t),(a=i.lengthOf(t))===0?this.cache[t]=null:(r.pos=this.offset+n,o=(l=new Nf(r.read(a))).readShort(),c=l.readShort(),x=l.readShort(),d=l.readShort(),u=l.readShort(),this.cache[t]=o===-1?new gOe(l,c,x,d,u):new pOe(l,o,c,x,d,u),this.cache[t]))},e.prototype.encode=function(t,r,n){var a,i,o,l,d;for(o=[],i=[],l=0,d=r.length;l<d;l++)a=t[r[l]],i.push(o.length),a&&(o=o.concat(a.encode(n)));return i.push(o.length),{table:o,offsets:i}},e})(),pOe=(function(){function e(t,r,n,a,i,o){this.raw=t,this.numberOfContours=r,this.xMin=n,this.yMin=a,this.xMax=i,this.yMax=o,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e})(),gOe=(function(){function e(t,r,n,a,i){var o,l;for(this.raw=t,this.xMin=r,this.yMin=n,this.xMax=a,this.yMax=i,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;l=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&l;)o.pos+=1&l?4:2,128&l?o.pos+=8:64&l?o.pos+=4:8&l&&(o.pos+=2)}return e.prototype.encode=function(){var t,r,n;for(r=new Nf(oX.call(this.raw.data)),t=0,n=this.glyphIDs.length;t<n;++t)r.pos=this.glyphOffsets[t];return r.data},e})(),bOe=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return r0(e,fu),e.prototype.tag="loca",e.prototype.parse=function(t){var r,n;return t.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var a,i;for(i=[],n=0,a=this.length;n<a;n+=2)i.push(2*t.readUInt16());return i}).call(this):(function(){var a,i;for(i=[],n=0,a=this.length;n<a;n+=4)i.push(t.readUInt32());return i}).call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,r){for(var n=new Uint32Array(this.offsets.length),a=0,i=0,o=0;o<n.length;++o)if(n[o]=a,i<r.length&&r[i]==o){++i,n[o]=a;var l=this.offsets[o],d=this.offsets[o+1]-l;d>0&&(a+=d)}for(var c=new Array(4*n.length),u=0;u<n.length;++u)c[4*u+3]=255&n[u],c[4*u+2]=(65280&n[u])>>8,c[4*u+1]=(16711680&n[u])>>16,c[4*u]=(4278190080&n[u])>>24;return c},e})(),vOe=(function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,r,n,a,i;for(r in a=this.font.cmap.tables[0].codeMap,t={},i=this.subset)n=i[r],t[r]=a[n];return t},e.prototype.glyphsFor=function(t){var r,n,a,i,o,l,d;for(a={},o=0,l=t.length;o<l;o++)a[i=t[o]]=this.font.glyf.glyphFor(i);for(i in r=[],a)(n=a[i])!=null&&n.compound&&r.push.apply(r,n.glyphIDs);if(r.length>0)for(i in d=this.glyphsFor(r))n=d[i],a[i]=n;return a},e.prototype.encode=function(t,r){var n,a,i,o,l,d,c,u,x,b,g,k,y,N,S;for(a in n=iX.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(t),g={0:0},S=n.charMap)g[(d=S[a]).old]=d.new;for(k in b=n.maxGlyphID,o)k in g||(g[k]=b++);return u=(function(O){var A,P;for(A in P={},O)P[O[A]]=A;return P})(g),x=Object.keys(u).sort(function(O,A){return O-A}),y=(function(){var O,A,P;for(P=[],O=0,A=x.length;O<A;O++)l=x[O],P.push(u[l]);return P})(),i=this.font.glyf.encode(o,y,g),c=this.font.loca.encode(i.offsets,y),N={cmap:this.font.cmap.raw(),glyf:i.table,loca:c,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(N["OS/2"]=this.font.os2.raw()),this.font.directory.encode(N)},e})();sn.API.PDFObject=(function(){var e;function t(){}return e=function(r,n){return(Array(n+1).join("0")+r).slice(-n)},t.convert=function(r){var n,a,i,o;if(Array.isArray(r))return"["+(function(){var l,d,c;for(c=[],l=0,d=r.length;l<d;l++)n=r[l],c.push(t.convert(n));return c})().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+e(r.getUTCFullYear(),4)+e(r.getUTCMonth(),2)+e(r.getUTCDate(),2)+e(r.getUTCHours(),2)+e(r.getUTCMinutes(),2)+e(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(a in i=["<<"],r)o=r[a],i.push("/"+a+" "+t.convert(o));return i.push(">>"),i.join(`
`)}return""+r},t})();function lX(e,t,r,n,a){n=n||{};var i=1.15,o=a.internal.scaleFactor,l=a.internal.getFontSize()/o,d=a.getLineHeightFactor?a.getLineHeightFactor():i,c=l*d,u=/\r\n|\r|\n/g,x="",b=1;if((n.valign==="middle"||n.valign==="bottom"||n.halign==="center"||n.halign==="right")&&(x=typeof e=="string"?e.split(u):e,b=x.length||1),r+=l*(2-i),n.valign==="middle"?r-=b/2*c:n.valign==="bottom"&&(r-=b*c),n.halign==="center"||n.halign==="right"){var g=l;if(n.halign==="center"&&(g*=.5),x&&b>=1){for(var k=0;k<x.length;k++)a.text(x[k],t-a.getStringUnitWidth(x[k])*g,r),r+=c;return a}t-=a.getStringUnitWidth(e)*g}return n.halign==="justify"?a.text(e,t,r,{maxWidth:n.maxWidth||100,align:"justify"}):a.text(e,t,r),a}var jF={},R1=(function(){function e(t){this.jsPDFDocument=t,this.userStyles={textColor:t.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:t.internal.getFontSize(),fontStyle:t.internal.getFont().fontStyle,font:t.internal.getFont().fontName,lineWidth:t.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:t.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return e.setDefaults=function(t,r){r===void 0&&(r=null),r?r.__autoTableDocumentDefaults=t:jF=t},e.unifyColor=function(t){return Array.isArray(t)?t:typeof t=="number"?[t,t,t]:typeof t=="string"?[t]:null},e.prototype.applyStyles=function(t,r){var n,a,i;r===void 0&&(r=!1),t.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(t.fontStyle);var o=this.jsPDFDocument.internal.getFont(),l=o.fontStyle,d=o.fontName;if(t.font&&(d=t.font),t.fontStyle){l=t.fontStyle;var c=this.getFontList()[d];c&&c.indexOf(l)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(c[0]),l=c[0])}if(this.jsPDFDocument.setFont(d,l),t.fontSize&&this.jsPDFDocument.setFontSize(t.fontSize),!r){var u=e.unifyColor(t.fillColor);u&&(n=this.jsPDFDocument).setFillColor.apply(n,u),u=e.unifyColor(t.textColor),u&&(a=this.jsPDFDocument).setTextColor.apply(a,u),u=e.unifyColor(t.lineColor),u&&(i=this.jsPDFDocument).setDrawColor.apply(i,u),typeof t.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(t.lineWidth)}},e.prototype.splitTextToSize=function(t,r,n){return this.jsPDFDocument.splitTextToSize(t,r,n)},e.prototype.rect=function(t,r,n,a,i){return this.jsPDFDocument.rect(t,r,n,a,i)},e.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},e.prototype.getTextWidth=function(t){return this.jsPDFDocument.getTextWidth(t)},e.prototype.getDocument=function(){return this.jsPDFDocument},e.prototype.setPage=function(t){this.jsPDFDocument.setPage(t)},e.prototype.addPage=function(){return this.jsPDFDocument.addPage()},e.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},e.prototype.getGlobalOptions=function(){return jF||{}},e.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},e.prototype.pageSize=function(){var t=this.jsPDFDocument.internal.pageSize;return t.width==null&&(t={width:t.getWidth(),height:t.getHeight()}),t},e.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},e.prototype.getLineHeightFactor=function(){var t=this.jsPDFDocument;return t.getLineHeightFactor?t.getLineHeightFactor():1.15},e.prototype.getLineHeight=function(t){return t/this.scaleFactor()*this.getLineHeightFactor()},e.prototype.pageNumber=function(){var t=this.jsPDFDocument.internal.getCurrentPageInfo();return t?t.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},e})(),d6=function(e,t){return d6=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])},d6(e,t)};function cX(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");d6(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var dX=(function(e){cX(t,e);function t(r){var n=e.call(this)||this;return n._element=r,n}return t})(Array);function yOe(e){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/e,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function wOe(e){var t={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return t[e]}function Dk(e,t,r){r.applyStyles(t,!0);var n=Array.isArray(e)?e:[e],a=n.map(function(i){return r.getTextWidth(i)}).reduce(function(i,o){return Math.max(i,o)},0);return a}function uX(e,t,r,n){var a=t.settings.tableLineWidth,i=t.settings.tableLineColor;e.applyStyles({lineWidth:a,lineColor:i});var o=hX(a,!1);o&&e.rect(r.x,r.y,t.getWidth(e.pageSize().width),n.y-r.y,o)}function hX(e,t){var r=e>0,n=t||t===0;return r&&n?"DF":r?"S":n?"F":null}function Z5(e,t){var r,n,a,i;if(e=e||t,Array.isArray(e)){if(e.length>=4)return{top:e[0],right:e[1],bottom:e[2],left:e[3]};if(e.length===3)return{top:e[0],right:e[1],bottom:e[2],left:e[1]};if(e.length===2)return{top:e[0],right:e[1],bottom:e[0],left:e[1]};e.length===1?e=e[0]:e=t}return typeof e=="object"?(typeof e.vertical=="number"&&(e.top=e.vertical,e.bottom=e.vertical),typeof e.horizontal=="number"&&(e.right=e.horizontal,e.left=e.horizontal),{left:(r=e.left)!==null&&r!==void 0?r:t,top:(n=e.top)!==null&&n!==void 0?n:t,right:(a=e.right)!==null&&a!==void 0?a:t,bottom:(i=e.bottom)!==null&&i!==void 0?i:t}):(typeof e!="number"&&(e=t),{top:e,right:e,bottom:e,left:e})}function fX(e,t){var r=Z5(t.settings.margin,0);return e.pageSize().width-(r.left+r.right)}function kOe(e,t,r,n,a){var i={},o=1.3333333333333333,l=K_(t,function(A){return a.getComputedStyle(A).backgroundColor});l!=null&&(i.fillColor=l);var d=K_(t,function(A){return a.getComputedStyle(A).color});d!=null&&(i.textColor=d);var c=_Oe(n,r);c&&(i.cellPadding=c);var u="borderTopColor",x=o*r,b=n.borderTopWidth;if(n.borderBottomWidth===b&&n.borderRightWidth===b&&n.borderLeftWidth===b){var g=(parseFloat(b)||0)/x;g&&(i.lineWidth=g)}else i.lineWidth={top:(parseFloat(n.borderTopWidth)||0)/x,right:(parseFloat(n.borderRightWidth)||0)/x,bottom:(parseFloat(n.borderBottomWidth)||0)/x,left:(parseFloat(n.borderLeftWidth)||0)/x},i.lineWidth.top||(i.lineWidth.right?u="borderRightColor":i.lineWidth.bottom?u="borderBottomColor":i.lineWidth.left&&(u="borderLeftColor"));var k=K_(t,function(A){return a.getComputedStyle(A)[u]});k!=null&&(i.lineColor=k);var y=["left","right","center","justify"];y.indexOf(n.textAlign)!==-1&&(i.halign=n.textAlign),y=["middle","bottom","top"],y.indexOf(n.verticalAlign)!==-1&&(i.valign=n.verticalAlign);var N=parseInt(n.fontSize||"");isNaN(N)||(i.fontSize=N/o);var S=NOe(n);S&&(i.fontStyle=S);var O=(n.fontFamily||"").toLowerCase();return e.indexOf(O)!==-1&&(i.font=O),i}function NOe(e){var t="";return(e.fontWeight==="bold"||e.fontWeight==="bolder"||parseInt(e.fontWeight)>=700)&&(t="bold"),(e.fontStyle==="italic"||e.fontStyle==="oblique")&&(t+="italic"),t}function K_(e,t){var r=mX(e,t);if(!r)return null;var n=r.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!n||!Array.isArray(n))return null;var a=[parseInt(n[1]),parseInt(n[2]),parseInt(n[3])],i=parseInt(n[4]);return i===0||isNaN(a[0])||isNaN(a[1])||isNaN(a[2])?null:a}function mX(e,t){var r=t(e);return r==="rgba(0, 0, 0, 0)"||r==="transparent"||r==="initial"||r==="inherit"?e.parentElement==null?null:mX(e.parentElement,t):r}function _Oe(e,t){var r=[e.paddingTop,e.paddingRight,e.paddingBottom,e.paddingLeft],n=96/(72/t),a=(parseInt(e.lineHeight)-parseInt(e.fontSize))/t/2,i=r.map(function(l){return parseInt(l||"0")/n}),o=Z5(i,0);return a>o.top&&(o.top=a),a>o.bottom&&(o.bottom=a),o}function xX(e,t,r,n,a){var i,o;n===void 0&&(n=!1),a===void 0&&(a=!1);var l;typeof t=="string"?l=r.document.querySelector(t):l=t;var d=Object.keys(e.getFontList()),c=e.scaleFactor(),u=[],x=[],b=[];if(!l)return console.error("Html table could not be found with input: ",t),{head:u,body:x,foot:b};for(var g=0;g<l.rows.length;g++){var k=l.rows[g],y=(o=(i=k==null?void 0:k.parentElement)===null||i===void 0?void 0:i.tagName)===null||o===void 0?void 0:o.toLowerCase(),N=SOe(d,c,r,k,n,a);N&&(y==="thead"?u.push(N):y==="tfoot"?b.push(N):x.push(N))}return{head:u,body:x,foot:b}}function SOe(e,t,r,n,a,i){for(var o=new dX(n),l=0;l<n.cells.length;l++){var d=n.cells[l],c=r.getComputedStyle(d);if(a||c.display!=="none"){var u=void 0;i&&(u=kOe(e,d,t,c,r)),o.push({rowSpan:d.rowSpan,colSpan:d.colSpan,styles:u,_element:d,content:jOe(d)})}}var x=r.getComputedStyle(n);if(o.length>0&&(a||x.display!=="none"))return o}function jOe(e){var t=e.cloneNode(!0);return t.innerHTML=t.innerHTML.replace(/\n/g,"").replace(/ +/g," "),t.innerHTML=t.innerHTML.split(/<br.*?>/).map(function(r){return r.trim()}).join(`
`),t.innerText||t.textContent||""}function COe(e,t,r){for(var n=0,a=[e,t,r];n<a.length;n++){var i=a[n];i&&typeof i!="object"&&console.error("The options parameter should be of type object, is: "+typeof i),i.startY&&typeof i.startY!="number"&&(console.error("Invalid value for startY option",i.startY),delete i.startY)}}function U0(e,t,r,n,a){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(e),o=1;o<arguments.length;o++){var l=arguments[o];if(l!=null)for(var d in l)Object.prototype.hasOwnProperty.call(l,d)&&(i[d]=l[d])}return i}function pX(e,t){var r=new R1(e),n=r.getDocumentOptions(),a=r.getGlobalOptions();COe(a,n,t);var i=U0({},a,n,t),o;typeof window<"u"&&(o=window);var l=AOe(a,n,t),d=EOe(a,n,t),c=TOe(r,i),u=POe(r,i,o);return{id:t.tableId,content:u,hooks:d,styles:l,settings:c}}function AOe(e,t,r){for(var n={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},a=function(d){if(d==="columnStyles"){var c=e[d],u=t[d],x=r[d];n.columnStyles=U0({},c,u,x)}else{var b=[e,t,r],g=b.map(function(k){return k[d]||{}});n[d]=U0({},g[0],g[1],g[2])}},i=0,o=Object.keys(n);i<o.length;i++){var l=o[i];a(l)}return n}function EOe(e,t,r){for(var n=[e,t,r],a={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},i=0,o=n;i<o.length;i++){var l=o[i];l.didParseCell&&a.didParseCell.push(l.didParseCell),l.willDrawCell&&a.willDrawCell.push(l.willDrawCell),l.didDrawCell&&a.didDrawCell.push(l.didDrawCell),l.willDrawPage&&a.willDrawPage.push(l.willDrawPage),l.didDrawPage&&a.didDrawPage.push(l.didDrawPage)}return a}function TOe(e,t){var r,n,a,i,o,l,d,c,u,x,b,g,k=Z5(t.margin,40/e.scaleFactor()),y=(r=OOe(e,t.startY))!==null&&r!==void 0?r:k.top,N;t.showFoot===!0?N="everyPage":t.showFoot===!1?N="never":N=(n=t.showFoot)!==null&&n!==void 0?n:"everyPage";var S;t.showHead===!0?S="everyPage":t.showHead===!1?S="never":S=(a=t.showHead)!==null&&a!==void 0?a:"everyPage";var O=(i=t.useCss)!==null&&i!==void 0?i:!1,A=t.theme||(O?"plain":"striped"),P=!!t.horizontalPageBreak,q=(o=t.horizontalPageBreakRepeat)!==null&&o!==void 0?o:null;return{includeHiddenHtml:(l=t.includeHiddenHtml)!==null&&l!==void 0?l:!1,useCss:O,theme:A,startY:y,margin:k,pageBreak:(d=t.pageBreak)!==null&&d!==void 0?d:"auto",rowPageBreak:(c=t.rowPageBreak)!==null&&c!==void 0?c:"auto",tableWidth:(u=t.tableWidth)!==null&&u!==void 0?u:"auto",showHead:S,showFoot:N,tableLineWidth:(x=t.tableLineWidth)!==null&&x!==void 0?x:0,tableLineColor:(b=t.tableLineColor)!==null&&b!==void 0?b:200,horizontalPageBreak:P,horizontalPageBreakRepeat:q,horizontalPageBreakBehaviour:(g=t.horizontalPageBreakBehaviour)!==null&&g!==void 0?g:"afterAllRows"}}function OOe(e,t){var r=e.getLastAutoTable(),n=e.scaleFactor(),a=e.pageNumber(),i=!1;if(r&&r.startPageNumber){var o=r.startPageNumber+r.pageNumber-1;i=o===a}return typeof t=="number"?t:(t==null||t===!1)&&i&&(r==null?void 0:r.finalY)!=null?r.finalY+20/n:null}function POe(e,t,r){var n=t.head||[],a=t.body||[],i=t.foot||[];if(t.html){var o=t.includeHiddenHtml;if(r){var l=xX(e,t.html,r,o,t.useCss)||{};n=l.head||n,a=l.body||n,i=l.foot||n}else console.error("Cannot parse html in non browser environment")}var d=t.columns||IOe(n,a,i);return{columns:d,head:n,body:a,foot:i}}function IOe(e,t,r){var n=e[0]||t[0]||r[0]||[],a=[];return Object.keys(n).filter(function(i){return i!=="_element"}).forEach(function(i){var o=1,l;Array.isArray(n)?l=n[parseInt(i)]:l=n[i],typeof l=="object"&&!Array.isArray(l)&&(o=(l==null?void 0:l.colSpan)||1);for(var d=0;d<o;d++){var c=void 0;Array.isArray(n)?c=a.length:c=i+(d>0?"_".concat(d):"");var u={dataKey:c};a.push(u)}}),a}var u6=(function(){function e(t,r,n){this.table=r,this.pageNumber=r.pageNumber,this.settings=r.settings,this.cursor=n,this.doc=t.getDocument()}return e})(),DOe=(function(e){cX(t,e);function t(r,n,a,i,o,l){var d=e.call(this,r,n,l)||this;return d.cell=a,d.row=i,d.column=o,d.section=i.section,d}return t})(u6),MOe=(function(){function e(t,r){this.pageNumber=1,this.id=t.id,this.settings=t.settings,this.styles=t.styles,this.hooks=t.hooks,this.columns=r.columns,this.head=r.head,this.body=r.body,this.foot=r.foot}return e.prototype.getHeadHeight=function(t){return this.head.reduce(function(r,n){return r+n.getMaxCellHeight(t)},0)},e.prototype.getFootHeight=function(t){return this.foot.reduce(function(r,n){return r+n.getMaxCellHeight(t)},0)},e.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},e.prototype.callCellHooks=function(t,r,n,a,i,o){for(var l=0,d=r;l<d.length;l++){var c=d[l],u=new DOe(t,this,n,a,i,o),x=c(u)===!1;if(n.text=Array.isArray(n.text)?n.text:[n.text],x)return!1}return!0},e.prototype.callEndPageHooks=function(t,r){t.applyStyles(t.userStyles);for(var n=0,a=this.hooks.didDrawPage;n<a.length;n++){var i=a[n];i(new u6(t,this,r))}},e.prototype.callWillDrawPageHooks=function(t,r){for(var n=0,a=this.hooks.willDrawPage;n<a.length;n++){var i=a[n];i(new u6(t,this,r))}},e.prototype.getWidth=function(t){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var r=this.columns.reduce(function(a,i){return a+i.wrappedWidth},0);return r}else{var n=this.settings.margin;return t-n.left-n.right}},e})(),gX=(function(){function e(t,r,n,a,i){i===void 0&&(i=!1),this.height=0,this.raw=t,t instanceof dX&&(this.raw=t._element,this.element=t._element),this.index=r,this.section=n,this.cells=a,this.spansMultiplePages=i}return e.prototype.getMaxCellHeight=function(t){var r=this;return t.reduce(function(n,a){var i;return Math.max(n,((i=r.cells[a.index])===null||i===void 0?void 0:i.height)||0)},0)},e.prototype.hasRowSpan=function(t){var r=this;return t.filter(function(n){var a=r.cells[n.index];return a?a.rowSpan>1:!1}).length>0},e.prototype.canEntireRowFit=function(t,r){return this.getMaxCellHeight(r)<=t},e.prototype.getMinimumRowHeight=function(t,r){var n=this;return t.reduce(function(a,i){var o=n.cells[i.index];if(!o)return 0;var l=r.getLineHeight(o.styles.fontSize),d=o.padding("vertical"),c=d+l;return c>a?c:a},0)},e})(),bX=(function(){function e(t,r,n){var a;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=r,this.section=n,this.raw=t;var i=t;t!=null&&typeof t=="object"&&!Array.isArray(t)?(this.rowSpan=t.rowSpan||1,this.colSpan=t.colSpan||1,i=(a=t.content)!==null&&a!==void 0?a:t,t._element&&(this.raw=t._element)):(this.rowSpan=1,this.colSpan=1);var o=i!=null?""+i:"",l=/\r\n|\r|\n/g;this.text=o.split(l)}return e.prototype.getTextPos=function(){var t;if(this.styles.valign==="top")t=this.y+this.padding("top");else if(this.styles.valign==="bottom")t=this.y+this.height-this.padding("bottom");else{var r=this.height-this.padding("vertical");t=this.y+r/2+this.padding("top")}var n;if(this.styles.halign==="right")n=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var a=this.width-this.padding("horizontal");n=this.x+a/2+this.padding("left")}else n=this.x+this.padding("left");return{x:n,y:t}},e.prototype.getContentHeight=function(t,r){r===void 0&&(r=1.15);var n=Array.isArray(this.text)?this.text.length:1,a=this.styles.fontSize/t*r,i=n*a+this.padding("vertical");return Math.max(i,this.styles.minCellHeight)},e.prototype.padding=function(t){var r=Z5(this.styles.cellPadding,0);return t==="vertical"?r.top+r.bottom:t==="horizontal"?r.left+r.right:r[t]},e})(),LOe=(function(){function e(t,r,n){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=t,this.raw=r,this.index=n}return e.prototype.getMaxCustomCellWidth=function(t){for(var r=0,n=0,a=t.allRows();n<a.length;n++){var i=a[n],o=i.cells[this.index];o&&typeof o.styles.cellWidth=="number"&&(r=Math.max(r,o.styles.cellWidth))}return r},e})();function ROe(e,t){FOe(e,t);var r=[],n=0;t.columns.forEach(function(i){var o=i.getMaxCustomCellWidth(t);o?i.width=o:(i.width=i.wrappedWidth,r.push(i)),n+=i.width});var a=t.getWidth(e.pageSize().width)-n;a&&(a=h6(r,a,function(i){return Math.max(i.minReadableWidth,i.minWidth)})),a&&(a=h6(r,a,function(i){return i.minWidth})),a=Math.abs(a),!t.settings.horizontalPageBreak&&a>.1/e.scaleFactor()&&(a=a<1?a:Math.round(a),console.warn("Of the table content, ".concat(a," units width could not fit page"))),UOe(t),zOe(t,e),BOe(t)}function FOe(e,t){var r=e.scaleFactor(),n=t.settings.horizontalPageBreak,a=fX(e,t);t.allRows().forEach(function(i){for(var o=0,l=t.columns;o<l.length;o++){var d=l[o],c=i.cells[d.index];if(c){var u=t.hooks.didParseCell;t.callCellHooks(e,u,c,i,d,null);var x=c.padding("horizontal");c.contentWidth=Dk(c.text,c.styles,e)+x;var b=Dk(c.text.join(" ").split(/[^\S\u00A0]+/),c.styles,e);if(c.minReadableWidth=b+c.padding("horizontal"),typeof c.styles.cellWidth=="number")c.minWidth=c.styles.cellWidth,c.wrappedWidth=c.styles.cellWidth;else if(c.styles.cellWidth==="wrap"||n===!0)c.contentWidth>a?(c.minWidth=a,c.wrappedWidth=a):(c.minWidth=c.contentWidth,c.wrappedWidth=c.contentWidth);else{var g=10/r;c.minWidth=c.styles.minCellWidth||g,c.wrappedWidth=c.contentWidth,c.minWidth>c.wrappedWidth&&(c.wrappedWidth=c.minWidth)}}}}),t.allRows().forEach(function(i){for(var o=0,l=t.columns;o<l.length;o++){var d=l[o],c=i.cells[d.index];if(c&&c.colSpan===1)d.wrappedWidth=Math.max(d.wrappedWidth,c.wrappedWidth),d.minWidth=Math.max(d.minWidth,c.minWidth),d.minReadableWidth=Math.max(d.minReadableWidth,c.minReadableWidth);else{var u=t.styles.columnStyles[d.dataKey]||t.styles.columnStyles[d.index]||{},x=u.cellWidth||u.minCellWidth;x&&typeof x=="number"&&(d.minWidth=x,d.wrappedWidth=x)}c&&(c.colSpan>1&&!d.minWidth&&(d.minWidth=c.minWidth),c.colSpan>1&&!d.wrappedWidth&&(d.wrappedWidth=c.minWidth))}})}function h6(e,t,r){for(var n=t,a=e.reduce(function(g,k){return g+k.wrappedWidth},0),i=0;i<e.length;i++){var o=e[i],l=o.wrappedWidth/a,d=n*l,c=o.width+d,u=r(o),x=c<u?u:c;t-=x-o.width,o.width=x}if(t=Math.round(t*1e10)/1e10,t){var b=e.filter(function(g){return t<0?g.width>r(g):!0});b.length&&(t=h6(b,t,r))}return t}function BOe(e){for(var t={},r=1,n=e.allRows(),a=0;a<n.length;a++)for(var i=n[a],o=0,l=e.columns;o<l.length;o++){var d=l[o],c=t[d.index];if(r>1)r--,delete i.cells[d.index];else if(c)c.cell.height+=i.height,r=c.cell.colSpan,delete i.cells[d.index],c.left--,c.left<=1&&delete t[d.index];else{var u=i.cells[d.index];if(!u)continue;if(u.height=i.height,u.rowSpan>1){var x=n.length-a,b=u.rowSpan>x?x:u.rowSpan;t[d.index]={cell:u,left:b,row:i}}}}}function UOe(e){for(var t=e.allRows(),r=0;r<t.length;r++)for(var n=t[r],a=null,i=0,o=0,l=0;l<e.columns.length;l++){var d=e.columns[l];if(o-=1,o>1&&e.columns[l+1])i+=d.width,delete n.cells[d.index];else if(a){var c=a;delete n.cells[d.index],a=null,c.width=d.width+i}else{var c=n.cells[d.index];if(!c)continue;if(o=c.colSpan,i=0,c.colSpan>1){a=c,i+=d.width;continue}c.width=d.width+i}}}function zOe(e,t){for(var r={count:0,height:0},n=0,a=e.allRows();n<a.length;n++){for(var i=a[n],o=0,l=e.columns;o<l.length;o++){var d=l[o],c=i.cells[d.index];if(c){t.applyStyles(c.styles,!0);var u=c.width-c.padding("horizontal");if(c.styles.overflow==="linebreak")c.text=t.splitTextToSize(c.text,u+1/t.scaleFactor(),{fontSize:c.styles.fontSize});else if(c.styles.overflow==="ellipsize")c.text=CF(c.text,u,c.styles,t,"...");else if(c.styles.overflow==="hidden")c.text=CF(c.text,u,c.styles,t,"");else if(typeof c.styles.overflow=="function"){var x=c.styles.overflow(c.text,u);typeof x=="string"?c.text=[x]:c.text=x}c.contentHeight=c.getContentHeight(t.scaleFactor(),t.getLineHeightFactor());var b=c.contentHeight/c.rowSpan;c.rowSpan>1&&r.count*r.height<b*c.rowSpan?r={height:b,count:c.rowSpan}:r&&r.count>0&&r.height>b&&(b=r.height),b>i.height&&(i.height=b)}}r.count--}}function CF(e,t,r,n,a){return e.map(function(i){return qOe(i,t,r,n,a)})}function qOe(e,t,r,n,a){var i=1e4*n.scaleFactor();if(t=Math.ceil(t*i)/i,t>=Dk(e,r,n))return e;for(;t<Dk(e+a,r,n)&&!(e.length<=1);)e=e.substring(0,e.length-1);return e.trim()+a}function vX(e,t){var r=new R1(e),n=HOe(t,r.scaleFactor()),a=new MOe(t,n);return ROe(r,a),r.applyStyles(r.userStyles),a}function HOe(e,t){var r=e.content,n=VOe(r.columns);if(r.head.length===0){var a=AF(n,"head");a&&r.head.push(a)}if(r.foot.length===0){var a=AF(n,"foot");a&&r.foot.push(a)}var i=e.settings.theme,o=e.styles;return{columns:n,head:X_("head",r.head,n,o,i,t),body:X_("body",r.body,n,o,i,t),foot:X_("foot",r.foot,n,o,i,t)}}function X_(e,t,r,n,a,i){var o={},l=t.map(function(d,c){for(var u=0,x={},b=0,g=0,k=0,y=r;k<y.length;k++){var N=y[k];if(o[N.index]==null||o[N.index].left===0)if(g===0){var S=void 0;Array.isArray(d)?S=d[N.index-b-u]:S=d[N.dataKey];var O={};typeof S=="object"&&!Array.isArray(S)&&(O=(S==null?void 0:S.styles)||{});var A=WOe(e,N,c,a,n,i,O),P=new bX(S,A,e);x[N.dataKey]=P,x[N.index]=P,g=P.colSpan-1,o[N.index]={left:P.rowSpan-1,times:g}}else g--,b++;else o[N.index].left--,g=o[N.index].times,u++}return new gX(d,c,e,x)});return l}function AF(e,t){var r={};return e.forEach(function(n){if(n.raw!=null){var a=$Oe(t,n.raw);a!=null&&(r[n.dataKey]=a)}}),Object.keys(r).length>0?r:null}function $Oe(e,t){if(e==="head"){if(typeof t=="object")return t.header||null;if(typeof t=="string"||typeof t=="number")return t}else if(e==="foot"&&typeof t=="object")return t.footer;return null}function VOe(e){return e.map(function(t,r){var n,a;return typeof t=="object"?a=(n=t.dataKey)!==null&&n!==void 0?n:r:a=r,new LOe(a,t,r)})}function WOe(e,t,r,n,a,i,o){var l=wOe(n),d;e==="head"?d=a.headStyles:e==="body"?d=a.bodyStyles:e==="foot"&&(d=a.footStyles);var c=U0({},l.table,l[e],a.styles,d),u=a.columnStyles[t.dataKey]||a.columnStyles[t.index]||{},x=e==="body"?u:{},b=e==="body"&&r%2===0?U0({},l.alternateRow,a.alternateRowStyles):{},g=yOe(i),k=U0({},g,c,b,x);return U0(k,o)}function GOe(e,t,r){var n;r===void 0&&(r={});var a=fX(e,t),i=new Map,o=[],l=[],d=[];Array.isArray(t.settings.horizontalPageBreakRepeat)?d=t.settings.horizontalPageBreakRepeat:(typeof t.settings.horizontalPageBreakRepeat=="string"||typeof t.settings.horizontalPageBreakRepeat=="number")&&(d=[t.settings.horizontalPageBreakRepeat]),d.forEach(function(b){var g=t.columns.find(function(k){return k.dataKey===b||k.index===b});g&&!i.has(g.index)&&(i.set(g.index,!0),o.push(g.index),l.push(t.columns[g.index]),a-=g.wrappedWidth)});for(var c=!0,u=(n=r==null?void 0:r.start)!==null&&n!==void 0?n:0;u<t.columns.length;){if(i.has(u)){u++;continue}var x=t.columns[u].wrappedWidth;if(c||a>=x)c=!1,o.push(u),l.push(t.columns[u]),a-=x;else break;u++}return{colIndexes:o,columns:l,lastIndex:u-1}}function KOe(e,t){for(var r=[],n=0;n<t.columns.length;n++){var a=GOe(e,t,{start:n});a.columns.length&&(r.push(a),n=a.lastIndex)}return r}function yX(e,t){var r=t.settings,n=r.startY,a=r.margin,i={x:a.left,y:n},o=t.getHeadHeight(t.columns)+t.getFootHeight(t.columns),l=n+a.bottom+o;if(r.pageBreak==="avoid"){var d=t.body,c=d.reduce(function(b,g){return b+g.height},0);l+=c}var u=new R1(e);(r.pageBreak==="always"||r.startY!=null&&l>u.pageSize().height)&&(kX(u),i.y=a.top),t.callWillDrawPageHooks(u,i);var x=U0({},i);t.startPageNumber=u.pageNumber(),r.horizontalPageBreak?XOe(u,t,x,i):(u.applyStyles(u.userStyles),(r.showHead==="firstPage"||r.showHead==="everyPage")&&t.head.forEach(function(b){return oh(u,t,b,i,t.columns)}),u.applyStyles(u.userStyles),t.body.forEach(function(b,g){var k=g===t.body.length-1;Mk(u,t,b,k,x,i,t.columns)}),u.applyStyles(u.userStyles),(r.showFoot==="lastPage"||r.showFoot==="everyPage")&&t.foot.forEach(function(b){return oh(u,t,b,i,t.columns)})),uX(u,t,x,i),t.callEndPageHooks(u,i),t.finalY=i.y,e.lastAutoTable=t,u.applyStyles(u.userStyles)}function XOe(e,t,r,n){var a=KOe(e,t),i=t.settings;if(i.horizontalPageBreakBehaviour==="afterAllRows")a.forEach(function(c,u){e.applyStyles(e.userStyles),u>0?nb(e,t,r,n,c.columns,!0):EF(e,t,n,c.columns),YOe(e,t,r,n,c.columns),Y_(e,t,n,c.columns)});else for(var o=-1,l=a[0],d=function(){var c=o;if(l){e.applyStyles(e.userStyles);var u=l.columns;o>=0?nb(e,t,r,n,u,!0):EF(e,t,n,u),c=TF(e,t,o+1,n,u),Y_(e,t,n,u)}var x=c-o;a.slice(1).forEach(function(b){e.applyStyles(e.userStyles),nb(e,t,r,n,b.columns,!0),TF(e,t,o+1,n,b.columns,x),Y_(e,t,n,b.columns)}),o=c};o<t.body.length-1;)d()}function EF(e,t,r,n){var a=t.settings;e.applyStyles(e.userStyles),(a.showHead==="firstPage"||a.showHead==="everyPage")&&t.head.forEach(function(i){return oh(e,t,i,r,n)})}function YOe(e,t,r,n,a){e.applyStyles(e.userStyles),t.body.forEach(function(i,o){var l=o===t.body.length-1;Mk(e,t,i,l,r,n,a)})}function TF(e,t,r,n,a,i){e.applyStyles(e.userStyles),i=i??t.body.length;var o=Math.min(r+i,t.body.length),l=-1;return t.body.slice(r,o).forEach(function(d,c){var u=r+c===t.body.length-1,x=wX(e,t,u,n);d.canEntireRowFit(x,a)&&(oh(e,t,d,n,a),l=r+c)}),l}function Y_(e,t,r,n){var a=t.settings;e.applyStyles(e.userStyles),(a.showFoot==="lastPage"||a.showFoot==="everyPage")&&t.foot.forEach(function(i){return oh(e,t,i,r,n)})}function QOe(e,t,r){var n=r.getLineHeight(e.styles.fontSize),a=e.padding("vertical"),i=Math.floor((t-a)/n);return Math.max(0,i)}function ZOe(e,t,r,n){var a={};e.spansMultiplePages=!0,e.height=0;for(var i=0,o=0,l=r.columns;o<l.length;o++){var d=l[o],c=e.cells[d.index];if(c){Array.isArray(c.text)||(c.text=[c.text]);var u=new bX(c.raw,c.styles,c.section);u=U0(u,c),u.text=[];var x=QOe(c,t,n);c.text.length>x&&(u.text=c.text.splice(x,c.text.length));var b=n.scaleFactor(),g=n.getLineHeightFactor();c.contentHeight=c.getContentHeight(b,g),c.contentHeight>=t&&(c.contentHeight=t,u.styles.minCellHeight-=t),c.contentHeight>e.height&&(e.height=c.contentHeight),u.contentHeight=u.getContentHeight(b,g),u.contentHeight>i&&(i=u.contentHeight),a[d.index]=u}}var k=new gX(e.raw,-1,e.section,a,!0);k.height=i;for(var y=0,N=r.columns;y<N.length;y++){var d=N[y],u=k.cells[d.index];u&&(u.height=k.height);var c=e.cells[d.index];c&&(c.height=e.height)}return k}function JOe(e,t,r,n){var a=e.pageSize().height,i=n.settings.margin,o=i.top+i.bottom,l=a-o;t.section==="body"&&(l-=n.getHeadHeight(n.columns)+n.getFootHeight(n.columns));var d=t.getMinimumRowHeight(n.columns,e),c=d<r;if(d>l)return console.error("Will not be able to print row ".concat(t.index," correctly since it's minimum height is larger than page height")),!0;if(!c)return!1;var u=t.hasRowSpan(n.columns),x=t.getMaxCellHeight(n.columns)>l;return x?(u&&console.error("The content of row ".concat(t.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(u||n.settings.rowPageBreak==="avoid")}function Mk(e,t,r,n,a,i,o){var l=wX(e,t,n,i);if(r.canEntireRowFit(l,o))oh(e,t,r,i,o);else if(JOe(e,r,l,t)){var d=ZOe(r,l,t,e);oh(e,t,r,i,o),nb(e,t,a,i,o),Mk(e,t,d,n,a,i,o)}else nb(e,t,a,i,o),Mk(e,t,r,n,a,i,o)}function oh(e,t,r,n,a){n.x=t.settings.margin.left;for(var i=0,o=a;i<o.length;i++){var l=o[i],d=r.cells[l.index];if(!d){n.x+=l.width;continue}e.applyStyles(d.styles),d.x=n.x,d.y=n.y;var c=t.callCellHooks(e,t.hooks.willDrawCell,d,r,l,n);if(c===!1){n.x+=l.width;continue}e9e(e,d,n);var u=d.getTextPos();lX(d.text,u.x,u.y,{halign:d.styles.halign,valign:d.styles.valign,maxWidth:Math.ceil(d.width-d.padding("left")-d.padding("right"))},e.getDocument()),t.callCellHooks(e,t.hooks.didDrawCell,d,r,l,n),n.x+=l.width}n.y+=r.height}function e9e(e,t,r){var n=t.styles;if(e.getDocument().setFillColor(e.getDocument().getFillColor()),typeof n.lineWidth=="number"){var a=hX(n.lineWidth,n.fillColor);a&&e.rect(t.x,r.y,t.width,t.height,a)}else typeof n.lineWidth=="object"&&(n.fillColor&&e.rect(t.x,r.y,t.width,t.height,"F"),t9e(e,t,r,n.lineWidth))}function t9e(e,t,r,n){var a,i,o,l;n.top&&(a=r.x,i=r.y,o=r.x+t.width,l=r.y,n.right&&(o+=.5*n.right),n.left&&(a-=.5*n.left),d(n.top,a,i,o,l)),n.bottom&&(a=r.x,i=r.y+t.height,o=r.x+t.width,l=r.y+t.height,n.right&&(o+=.5*n.right),n.left&&(a-=.5*n.left),d(n.bottom,a,i,o,l)),n.left&&(a=r.x,i=r.y,o=r.x,l=r.y+t.height,n.top&&(i-=.5*n.top),n.bottom&&(l+=.5*n.bottom),d(n.left,a,i,o,l)),n.right&&(a=r.x+t.width,i=r.y,o=r.x+t.width,l=r.y+t.height,n.top&&(i-=.5*n.top),n.bottom&&(l+=.5*n.bottom),d(n.right,a,i,o,l));function d(c,u,x,b,g){e.getDocument().setLineWidth(c),e.getDocument().line(u,x,b,g,"S")}}function wX(e,t,r,n){var a=t.settings.margin.bottom,i=t.settings.showFoot;return(i==="everyPage"||i==="lastPage"&&r)&&(a+=t.getFootHeight(t.columns)),e.pageSize().height-n.y-a}function nb(e,t,r,n,a,i){a===void 0&&(a=[]),i===void 0&&(i=!1),e.applyStyles(e.userStyles),t.settings.showFoot==="everyPage"&&!i&&t.foot.forEach(function(l){return oh(e,t,l,n,a)}),t.callEndPageHooks(e,n);var o=t.settings.margin;uX(e,t,r,n),kX(e),t.pageNumber++,n.x=o.left,n.y=o.top,r.y=o.top,t.callWillDrawPageHooks(e,n),t.settings.showHead==="everyPage"&&(t.head.forEach(function(l){return oh(e,t,l,n,a)}),e.applyStyles(e.userStyles))}function kX(e){var t=e.pageNumber();e.setPage(t+1);var r=e.pageNumber();return r===t?(e.addPage(),!0):!1}function r9e(e){e.API.autoTable=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=t[0],a=pX(this,n),i=vX(this,a);return yX(this,i),this},e.API.lastAutoTable=!1,e.API.autoTableText=function(t,r,n,a){lX(t,r,n,a,this)},e.API.autoTableSetDefaults=function(t){return R1.setDefaults(t,this),this},e.autoTableSetDefaults=function(t,r){R1.setDefaults(t,r)},e.API.autoTableHtmlToJson=function(t,r){var n;if(r===void 0&&(r=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var a=new R1(this),i=xX(a,t,window,r,!1),o=i.head,l=i.body,d=((n=o[0])===null||n===void 0?void 0:n.map(function(c){return c.content}))||[];return{columns:d,rows:l,data:l}}}var Q_;function sx(e,t){var r=pX(e,t),n=vX(e,r);yX(e,n)}try{if(typeof window<"u"&&window){var OF=window,PF=OF.jsPDF||((Q_=OF.jspdf)===null||Q_===void 0?void 0:Q_.jsPDF);PF&&r9e(PF)}}catch(e){console.error("Could not apply autoTable plugin",e)}const J5=(e,t,r)=>(e.setFontSize(20),e.setFont("helvetica","bold"),e.text(t,14,20),r&&(e.setFontSize(10),e.setFont("helvetica","normal"),e.text(r,14,28)),e.setFontSize(9),e.setTextColor(100),e.text(`Generated: ${new Date().toLocaleString("vi-VN")}`,14,r?35:28),e.setTextColor(0),r?42:35),e4=e=>{const t=e.internal.getNumberOfPages();e.setFontSize(8),e.setTextColor(100);for(let r=1;r<=t;r++)e.setPage(r),e.text(`Page ${r} of ${t}`,e.internal.pageSize.width/2,e.internal.pageSize.height-10,{align:"center"})},n9e=(e,t)=>{const r=new sn,n=J5(r,"INVENTORY REPORT",`Total Products: ${e.length}`),a=e.reduce((c,u)=>{const x=u.stock[t]||0,b=u.retailPrice[t]||0;return c+x*b},0),i=e.reduce((c,u)=>c+(u.stock[t]||0),0),o=e.filter(c=>(c.stock[t]||0)>0&&(c.stock[t]||0)<=10).length,l=e.filter(c=>(c.stock[t]||0)===0).length;sx(r,{startY:n,head:[["Metric","Value"]],body:[["Total Inventory Value",Te(a)],["Total Products",e.length.toString()],["Total Stock Units",i.toString()],["Low Stock Items",o.toString()],["Out of Stock",l.toString()]],theme:"grid",headStyles:{fillColor:[59,130,246]}});const d=e.map(c=>{const u=c.stock[t]||0,x=c.retailPrice[t]||0,b=u*x;return[c.sku||"N/A",c.name,c.category||"Uncategorized",u.toString(),Te(x),Te(b)]});sx(r,{startY:r.lastAutoTable.finalY+10,head:[["SKU","Name","Category","Stock","Price","Value"]],body:d,theme:"striped",headStyles:{fillColor:[59,130,246]},styles:{fontSize:8},columnStyles:{1:{cellWidth:50},3:{halign:"center"},4:{halign:"right"},5:{halign:"right"}}}),e4(r),r.save(`Inventory_Report_${new Date().toISOString().slice(0,10)}.pdf`)},a9e=(e,t,r={})=>{var g;const n=new sn;let a=e;(r.start||r.end)&&(a=e.filter(k=>{const y=new Date(k.date);return!(r.start&&y<r.start||r.end&&y>r.end)}));const i=r.start?`Period: ${r.start.toLocaleDateString("vi-VN")} - ${((g=r.end)==null?void 0:g.toLocaleDateString("vi-VN"))||"Now"}`:`Total Orders: ${a.length}`,o=J5(n,"SALES REPORT",i),l=a.reduce((k,y)=>k+y.total,0),d=a.length,c=a.reduce((k,y)=>k+y.items.reduce((N,S)=>N+S.quantity,0),0),u=d>0?l/d:0;sx(n,{startY:o,head:[["Metric","Value"]],body:[["Total Revenue",Te(l)],["Total Orders",d.toString()],["Total Items Sold",c.toString()],["Average Order Value",Te(u)]],theme:"grid",headStyles:{fillColor:[16,185,129]}});const x=new Map;a.forEach(k=>{k.items.forEach(y=>{const N=x.get(y.partId),S=t.find(A=>A.id===y.partId),O=(S==null?void 0:S.name)||"Unknown Product";N?(N.quantity+=y.quantity,N.revenue+=y.sellingPrice*y.quantity):x.set(y.partId,{quantity:y.quantity,revenue:y.sellingPrice*y.quantity,name:O})})});const b=Array.from(x.entries()).map(([k,y])=>({name:y.name,quantity:y.quantity,revenue:y.revenue})).sort((k,y)=>y.revenue-k.revenue).slice(0,20);sx(n,{startY:n.lastAutoTable.finalY+10,head:[["Product","Quantity Sold","Revenue"]],body:b.map(k=>[k.name,k.quantity.toString(),Te(k.revenue)]),theme:"striped",headStyles:{fillColor:[16,185,129]},styles:{fontSize:8},columnStyles:{0:{cellWidth:80},1:{halign:"center"},2:{halign:"right"}}}),e4(n),n.save(`Sales_Report_${new Date().toISOString().slice(0,10)}.pdf`)},s9e=(e,t,r,n,a,i,o={})=>{var q;const l=new sn;let d=e,c=t;(o.start||o.end)&&(d=e.filter(W=>{const R=new Date(W.date);return!(o.start&&R<o.start||o.end&&R>o.end)}),c=t.filter(W=>{const R=new Date(W.date);return!(o.start&&R<o.start||o.end&&R>o.end)}));const u=o.start?`Period: ${o.start.toLocaleDateString("vi-VN")} - ${((q=o.end)==null?void 0:q.toLocaleDateString("vi-VN"))||"Now"}`:"All Time",x=J5(l,"FINANCIAL REPORT",u),b=d.reduce((W,R)=>W+R.total,0),g=c.filter(W=>W.type==="Nhp kho").reduce((W,R)=>{var Q;const U=r.find(H=>H.id===R.partId),L=((Q=U==null?void 0:U.wholesalePrice)==null?void 0:Q[n])||0;return W+L*R.quantity},0),k=b-g,y=b>0?k/b*100:0,N=r.reduce((W,R)=>{const U=R.stock[n]||0,L=R.retailPrice[n]||0;return W+U*L},0),S=a.reduce((W,R)=>W+R.amount,0),O=i.reduce((W,R)=>W+R.amount,0);sx(l,{startY:x,head:[["Metric","Amount"]],body:[["Total Income",Te(b)],["Total Expenses",Te(g)],["Net Profit",Te(k)],["Profit Margin",`${y.toFixed(2)}%`],["Inventory Value",Te(N)],["Customer Debts",Te(S)],["Supplier Debts",Te(O)],["Net Position",Te(k+N+S-O)]],theme:"grid",headStyles:{fillColor:[139,92,246]},didParseCell:W=>{W.row.index===2&&(W.cell.styles.fillColor=k>=0?[220,252,231]:[254,226,226],W.cell.styles.textColor=k>=0?[22,101,52]:[127,29,29],W.cell.styles.fontStyle="bold")}});const A=l.lastAutoTable.finalY+10;l.setFontSize(10),l.setFont("helvetica","bold"),l.text("Notes:",14,A),l.setFontSize(9),l.setFont("helvetica","normal"),[" Income includes all sales revenue"," Expenses include inventory purchase costs"," Profit margin = (Net Profit / Income)  100%"," Net Position = Profit + Inventory + Customer Debts - Supplier Debts"].forEach((W,R)=>{l.text(W,14,A+7+R*5)}),e4(l),l.save(`Financial_Report_${new Date().toISOString().slice(0,10)}.pdf`)},i9e=(e,t)=>{const r=new sn,n=e.filter(o=>{const l=o.stock[t]||0;return l>0&&l<=10}),a=e.filter(o=>(o.stock[t]||0)===0),i=J5(r,"LOW STOCK ALERT",`Low Stock: ${n.length} | Out of Stock: ${a.length}`);if(n.length>0){r.setFontSize(12),r.setFont("helvetica","bold"),r.text("Low Stock Items ( 10 units)",14,i);const o=n.sort((l,d)=>(l.stock[t]||0)-(d.stock[t]||0)).map(l=>{const d=l.stock[t]||0,c=d<=3?"Critical":d<=5?"Warning":"Low";return[l.sku||"N/A",l.name,l.category||"Uncategorized",d.toString(),c]});sx(r,{startY:i+5,head:[["SKU","Name","Category","Stock","Status"]],body:o,theme:"striped",headStyles:{fillColor:[245,158,11]},styles:{fontSize:8},columnStyles:{1:{cellWidth:60},3:{halign:"center"},4:{halign:"center"}},didParseCell:l=>{if(l.column.index===4&&l.row.section==="body"){const d=l.cell.raw;d==="Critical"?(l.cell.styles.fillColor=[254,226,226],l.cell.styles.textColor=[127,29,29]):d==="Warning"&&(l.cell.styles.fillColor=[254,243,199],l.cell.styles.textColor=[146,64,14])}}})}if(a.length>0){const o=n.length>0?r.lastAutoTable.finalY+15:i;r.setFontSize(12),r.setFont("helvetica","bold"),r.text("Out of Stock Items",14,o);const l=a.map(d=>[d.sku||"N/A",d.name,d.category||"Uncategorized"]);sx(r,{startY:o+5,head:[["SKU","Name","Category"]],body:l,theme:"striped",headStyles:{fillColor:[239,68,68]},styles:{fontSize:8},columnStyles:{1:{cellWidth:80}}})}n.length===0&&a.length===0&&(r.setFontSize(12),r.text("All products are in stock!",14,i)),e4(r),r.save(`Low_Stock_Alert_${new Date().toISOString().slice(0,10)}.pdf`)},o9e=()=>{const[e,t]=T.useState("inventory"),{parts:r,sales:n,inventoryTransactions:a,customerDebts:i,supplierDebts:o,currentBranchId:l}=Ua(),d=()=>{try{switch(e){case"inventory":n9e(r,l),Ze.success(" xut bo co tn kho thnh cng!");break;case"sales":a9e(n,r),Ze.success(" xut bo co bn hng thnh cng!");break;case"financial":s9e(n,a,r,l,i,o),Ze.success(" xut bo co ti chnh thnh cng!");break}}catch(x){console.error("Export error:",x),Ze.error("Li khi xut bo co PDF")}},c=()=>{try{i9e(r,l),Ze.success(" xut bo co cnh bo tn kho!")}catch(x){console.error("Export error:",x),Ze.error("Li khi xut bo co")}},u=[{id:"inventory",label:"Tn kho",icon:s.jsx(Hi,{className:"w-4 h-4"})},{id:"sales",label:"Bn hng",icon:s.jsx(Fm,{className:"w-4 h-4"})},{id:"financial",label:"Ti chnh",icon:s.jsx(zJ,{className:"w-4 h-4"})}];return s.jsxs("div",{className:"p-6 max-w-[1600px] mx-auto",children:[s.jsxs("div",{className:"mb-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-slate-100",children:"Bo co & Phn tch"}),s.jsx("p",{className:"text-slate-600 dark:text-slate-400 mt-1",children:"Theo di v phn tch hiu sut kinh doanh"})]}),s.jsxs("div",{className:"flex gap-2",children:[e==="inventory"&&s.jsxs("button",{onClick:c,className:"px-4 py-2 bg-amber-600 hover:bg-amber-700 text-white rounded-lg font-medium transition-colors flex items-center gap-2",children:[s.jsx(bw,{className:"w-4 h-4"})," Cnh bo tn kho"]}),s.jsxs("button",{onClick:d,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors flex items-center gap-2",children:[s.jsx(vd,{className:"w-4 h-4"})," Xut PDF"]})]})]}),s.jsx("div",{className:"flex gap-2 border-b border-slate-200 dark:border-slate-700",children:u.map(x=>s.jsxs("button",{onClick:()=>t(x.id),className:`px-6 py-3 font-medium transition-all relative ${e===x.id?"text-blue-600 dark:text-blue-400":"text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-slate-200"}`,children:[s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx("span",{children:x.icon}),s.jsx("span",{children:x.label})]}),e===x.id&&s.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-blue-600 dark:bg-blue-400"})]},x.id))})]}),s.jsxs("div",{className:"animate-fadeIn",children:[e==="inventory"&&s.jsx(E8e,{}),e==="sales"&&s.jsx(T8e,{}),e==="financial"&&s.jsx(O8e,{})]})]})},l9e=e=>Ls({queryKey:["auditLogs",e],queryFn:async()=>{const t=await Xre(e);if(!t.ok)throw t.error;return t}}),IF={"auth.login":"ng nhp","auth.logout":"ng xut","sale.create":"To ha n","sale.delete":"Xa ha n","part.update_price":"Cp nht gi ph tng","inventory.receipt":"Nhp kho","settings.update":"Cp nht ci t","debt.customer_pay":"Thu n khch hng","debt.supplier_pay":"Tr n nh cung cp","cash.manual":"Giao dch qu th cng"},c9e=()=>{var S;const{profile:e}=qc(),[t,r]=T.useState(""),[n,a]=T.useState(50),[i,o]=T.useState(""),[l,d]=T.useState(""),[c,u]=T.useState(1),{data:x,isLoading:b,refetch:g}=l9e({action:t||void 0,page:c,pageSize:n,includeUser:!0,startDate:i?new Date(i).toISOString():void 0,endDate:l?new Date(l+"T23:59:59").toISOString():void 0}),k=(x==null?void 0:x.data)||[],y=((S=x==null?void 0:x.meta)==null?void 0:S.total)||0,N=Math.max(1,Math.ceil(y/n));return!e||e.role!=="owner"?s.jsxs("div",{className:"flex items-center justify-center h-96 text-slate-500 dark:text-slate-400",children:[s.jsx(mee,{className:"w-5 h-5 mr-2"})," Ch ch ca hng c xem nht k h thng."]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Nht k h thng"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("select",{value:t,onChange:O=>r(O.target.value),className:"px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-sm",children:[s.jsx("option",{value:"",children:"Tt c hnh ng"}),Object.entries(IF).map(([O,A])=>s.jsx("option",{value:O,children:A},O))]}),s.jsx("input",{type:"date",value:i,onChange:O=>o(O.target.value),className:"px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-sm"}),s.jsx("input",{type:"date",value:l,onChange:O=>d(O.target.value),className:"px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-sm"}),s.jsx("select",{value:n,onChange:O=>a(parseInt(O.target.value)),className:"px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-sm",children:[25,50,100].map(O=>s.jsxs("option",{value:O,children:[O," dng"]},O))}),s.jsxs("button",{onClick:()=>g(),className:"px-3 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg flex items-center gap-2 text-sm",children:[s.jsx(uee,{className:"w-4 h-4"})," Ti li"]}),s.jsx("button",{onClick:()=>d9e(k),className:"px-3 py-2 bg-emerald-600 hover:bg-emerald-700 text-white rounded-lg flex items-center gap-2 text-sm",children:"JSON"}),s.jsx("button",{onClick:()=>u9e(k),className:"px-3 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg flex items-center gap-2 text-sm",children:"CSV"})]})]}),s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 shadow divide-y divide-slate-200 dark:divide-slate-700",children:[s.jsxs("div",{className:"p-4 flex items-center justify-between",children:[s.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:b?"ang ti...":`Hin th ${k.length} dng  Trang ${c}/${N}  Tng ${y}`}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>u(O=>Math.max(1,O-1)),disabled:c<=1,className:"px-3 py-1.5 bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-200 rounded disabled:opacity-50",children:"Trang trc"}),s.jsx("button",{onClick:()=>u(O=>Math.min(N,O+1)),disabled:c>=N,className:"px-3 py-1.5 bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-200 rounded disabled:opacity-50",children:"Trang sau"})]})]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"bg-slate-50 dark:bg-slate-700/50 text-slate-600 dark:text-slate-300",children:[s.jsx("th",{className:"text-left px-4 py-2 font-medium",children:"Thi gian"}),s.jsx("th",{className:"text-left px-4 py-2 font-medium",children:"Hnh ng"}),s.jsx("th",{className:"text-left px-4 py-2 font-medium",children:"Bng"}),s.jsx("th",{className:"text-left px-4 py-2 font-medium",children:"ID bn ghi"}),s.jsx("th",{className:"text-left px-4 py-2 font-medium",children:"D liu"}),s.jsx("th",{className:"text-left px-4 py-2 font-medium",children:"User"})]})}),s.jsxs("tbody",{children:[b&&s.jsx("tr",{children:s.jsx("td",{colSpan:6,className:"px-4 py-6 text-center",children:s.jsx(aee,{className:"w-6 h-6 animate-spin mx-auto text-slate-400"})})}),!b&&k.length===0&&s.jsx("tr",{children:s.jsx("td",{colSpan:6,className:"px-4 py-6 text-center text-slate-500",children:"Khng c d liu"})}),!b&&k.map(O=>{var P;const A=IF[O.action]||O.action;return s.jsxs("tr",{className:"border-t border-slate-100 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-700/40",children:[s.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-slate-700 dark:text-slate-300",children:new Date(O.created_at).toLocaleString("vi-VN")}),s.jsx("td",{className:"px-4 py-2 text-slate-700 dark:text-slate-300",children:A}),s.jsx("td",{className:"px-4 py-2 text-slate-600 dark:text-slate-400",children:O.table_name||"-"}),s.jsx("td",{className:"px-4 py-2 text-slate-600 dark:text-slate-400",children:O.record_id||"-"}),s.jsx("td",{className:"px-4 py-2 max-w-[280px]",children:s.jsx("pre",{className:"text-xs whitespace-pre-wrap break-all bg-slate-50 dark:bg-slate-900/40 p-2 rounded border border-slate-200 dark:border-slate-700 max-h-32 overflow-y-auto",children:O.new_data||O.old_data?JSON.stringify({old:O.old_data?DF(O.old_data):void 0,new:O.new_data?DF(O.new_data):void 0},null,2):"-"})}),s.jsx("td",{className:"px-4 py-2 text-slate-600 dark:text-slate-400",children:O.user_email||O.user_name?`${O.user_name||""} ${O.user_email?"<"+O.user_email+">":""}`.trim():((P=O.user_id)==null?void 0:P.slice(0,8))||"-"})]},O.id)})]})]})})]})]})};function DF(e){try{return typeof e=="string"?JSON.parse(e):e}catch{return e}}function d9e(e){try{const t=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),r=URL.createObjectURL(t),n=document.createElement("a");n.href=r,n.download=`audit-logs-${new Date().toISOString()}.json`,n.click(),URL.revokeObjectURL(r)}catch{}}function u9e(e){try{const r=[["created_at","action","table_name","record_id","user_id","old_data","new_data"].join(",")];for(const o of e){const l=[o.created_at,o.action,o.table_name??"",o.record_id??"",o.user_id??"",JSON.stringify(o.old_data??""),JSON.stringify(o.new_data??"")].map(d=>`"${String(d).replace(/"/g,'""')}"`).join(",");r.push(l)}const n=new Blob([r.join(`
`)],{type:"text/csv;charset=utf-8;"}),a=URL.createObjectURL(n),i=document.createElement("a");i.href=a,i.download=`audit-logs-${new Date().toISOString()}.csv`,i.click(),URL.revokeObjectURL(a)}catch{}}const h9e=()=>{const{profile:e,hasRole:t}=qc(),[r,n]=T.useState(null),[a,i]=T.useState(!0),[o,l]=T.useState(!1),[d,c]=T.useState(!1),[u,x]=T.useState(!1),[b,g]=T.useState("general");T.useEffect(()=>{k()},[]);const k=async()=>{try{const{data:P,error:q}=await It.from("store_settings").select("*").order("created_at",{ascending:!1}).limit(1).single();if(q)throw q;n(P)}catch(P){console.error("Error loading settings:",P),Ze.error("Khng th ti ci t")}finally{i(!1)}},y=async()=>{if(r){l(!0);try{const P={...r};console.log("Saving settings:",r);const{error:q,data:W}=await It.from("store_settings").update(r).eq("id",r.id).select();if(q)throw console.error("Update error:",q),q;console.log("Update result:",W),await k(),Ze.success(" lu ci t thnh cng!"),Ws((e==null?void 0:e.id)||null,{action:"settings.update",tableName:"store_settings",recordId:r.id,oldData:P,newData:r})}catch(P){console.error("Error saving settings:",P),Ze.error(P.message||"Khng th lu ci t")}finally{l(!1)}}},N=(P,q)=>{r&&n({...r,[P]:q})},S=async P=>{var W;const q=(W=P.target.files)==null?void 0:W[0];if(q){if(!q.type.startsWith("image/")){Ze.error("Vui lng chn file nh");return}if(q.size>2*1024*1024){Ze.error("Kch thc nh khng c vt qu 2MB");return}c(!0);try{const R=q.name.split(".").pop(),L=`store-assets/${`logo-${Date.now()}.${R}`}`,{error:Q}=await It.storage.from("public-assets").upload(L,q);if(Q)throw Q;const{data:H}=It.storage.from("public-assets").getPublicUrl(L);N("logo_url",H.publicUrl),Ze.success(" ti logo ln thnh cng!")}catch(R){console.error("Error uploading logo:",R),Ze.error(R.message||"Khng th ti logo ln")}finally{c(!1)}}},O=async P=>{var W;const q=(W=P.target.files)==null?void 0:W[0];if(q){if(!q.type.startsWith("image/")){Ze.error("Vui lng chn file nh");return}if(q.size>2*1024*1024){Ze.error("Kch thc nh khng c vt qu 2MB");return}x(!0);try{const R=q.name.split(".").pop(),L=`store-assets/${`bank-qr-${Date.now()}.${R}`}`,{error:Q}=await It.storage.from("public-assets").upload(L,q);if(Q)throw Q;const{data:H}=It.storage.from("public-assets").getPublicUrl(L);N("bank_qr_url",H.publicUrl),Ze.success(" ti m QR ngn hng ln thnh cng!")}catch(R){console.error("Error uploading QR:",R),Ze.error(R.message||"Khng th ti m QR ln")}finally{x(!1)}}};if(!t(["owner","manager"]))return s.jsx("div",{className:"flex items-center justify-center h-96",children:s.jsxs("div",{className:"text-center flex items-center gap-2 text-slate-600 dark:text-slate-400",children:[s.jsx(see,{className:"w-5 h-5","aria-hidden":"true"}),s.jsx("p",{className:"text-lg",children:"Ch ch ca hng v qun l mi c quyn truy cp ci t"})]})});if(a||!r)return s.jsx("div",{className:"flex items-center justify-center h-96",children:s.jsx(BU,{size:"lg"})});const A=t(["owner"]);return s.jsxs("div",{className:"space-y-4 md:space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-xl md:text-2xl font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[s.jsx(cb,{className:"w-6 h-6 md:w-7 md:h-7 text-blue-600","aria-hidden":"true"}),s.jsx("span",{children:"Ci t h thng"})]}),s.jsx("p",{className:"text-xs md:text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Qun l thng tin ca hng v cu hnh h thng"})]}),A&&s.jsx("button",{onClick:y,disabled:o,className:"w-full sm:w-auto px-4 py-2 md:px-6 md:py-2.5 bg-blue-600 hover:bg-blue-700 disabled:bg-slate-400 text-white rounded-lg text-sm md:text-base font-semibold transition-colors inline-flex items-center justify-center gap-2","aria-label":"Lu thay i",children:o?s.jsx("span",{children:"ang lu..."}):s.jsxs(s.Fragment,{children:[s.jsx(kS,{className:"w-4 h-4 md:w-5 md:h-5","aria-hidden":"true"}),s.jsx("span",{children:"Lu thay i"})]})})]}),!A&&s.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-3 md:p-4 flex items-start gap-2",children:[s.jsx(B7,{className:"w-4 h-4 md:w-5 md:h-5 text-yellow-700 dark:text-yellow-300 mt-0.5 flex-shrink-0","aria-hidden":"true"}),s.jsx("p",{className:"text-xs md:text-sm text-yellow-800 dark:text-yellow-200",children:"Bn ch c quyn xem. Ch ch ca hng mi c th chnh sa ci t."})]}),s.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700 -mx-4 px-4 md:mx-0 md:px-0",children:s.jsx("div",{className:"flex gap-2 md:gap-4 overflow-x-auto pb-px",children:[{id:"general",label:"Thng tin chung",shortLabel:"Thng tin",icon:s.jsx(xee,{className:"w-3.5 h-3.5 md:w-4 md:h-4","aria-hidden":"true"})},{id:"branding",label:"Thng hiu",shortLabel:"Thng hiu",icon:s.jsx(DB,{className:"w-3.5 h-3.5 md:w-4 md:h-4","aria-hidden":"true"})},{id:"banking",label:"Ngn hng",shortLabel:"Ngn hng",icon:s.jsx(lb,{className:"w-3.5 h-3.5 md:w-4 md:h-4","aria-hidden":"true"})},{id:"invoice",label:"Ha n",shortLabel:"Ha n",icon:s.jsx(vd,{className:"w-3.5 h-3.5 md:w-4 md:h-4","aria-hidden":"true"})}].map(P=>s.jsxs("button",{onClick:()=>g(P.id),className:`px-2.5 py-2 md:px-4 md:py-3 text-xs md:text-sm font-medium border-b-2 transition-colors inline-flex items-center gap-1.5 md:gap-2 whitespace-nowrap ${b===P.id?"border-blue-600 text-blue-600 dark:text-blue-400":"border-transparent text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-slate-200"}`,children:[P.icon,s.jsx("span",{className:"hidden sm:inline",children:P.label}),s.jsx("span",{className:"inline sm:hidden",children:P.shortLabel})]},P.id))})}),s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-lg border border-slate-200 dark:border-slate-700 p-4 md:p-6",children:[b==="general"&&s.jsxs("div",{className:"space-y-4 md:space-y-6",children:[s.jsx("h2",{className:"text-base md:text-lg font-semibold text-slate-900 dark:text-white mb-3 md:mb-4",children:"Thng tin ca hng"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs md:text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5 md:mb-2",children:"Tn ca hng *"}),s.jsx("input",{type:"text",value:r.store_name||"",onChange:P=>N("store_name",P.target.value),disabled:!A,className:"w-full px-3 py-2 md:px-4 md:py-2.5 text-sm md:text-base border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white disabled:opacity-50"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs md:text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5 md:mb-2",children:"Tn ting Anh"}),s.jsx("input",{type:"text",value:r.store_name_en||"",onChange:P=>N("store_name_en",P.target.value),disabled:!A,className:"w-full px-3 py-2 md:px-4 md:py-2.5 text-sm md:text-base border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white disabled:opacity-50"})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-xs md:text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5 md:mb-2",children:"Slogan"}),s.jsx("input",{type:"text",value:r.slogan||"",onChange:P=>N("slogan",P.target.value),disabled:!A,placeholder:"Chm sc xe my chuyn nghip",className:"w-full px-3 py-2 md:px-4 md:py-2.5 text-sm md:text-base border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white disabled:opacity-50"})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-xs md:text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5 md:mb-2",children:"a ch"}),s.jsx("input",{type:"text",value:r.address||"",onChange:P=>N("address",P.target.value),disabled:!A,className:"w-full px-3 py-2 md:px-4 md:py-2.5 text-sm md:text-base border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white disabled:opacity-50"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs md:text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5 md:mb-2",children:"S in thoi"}),s.jsx("input",{type:"tel",value:r.phone||"",onChange:P=>N("phone",P.target.value),disabled:!A,className:"w-full px-3 py-2 md:px-4 md:py-2.5 text-sm md:text-base border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white disabled:opacity-50"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs md:text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5 md:mb-2",children:"Email"}),s.jsx("input",{type:"email",value:r.email||"",onChange:P=>N("email",P.target.value),disabled:!A,className:"w-full px-3 py-2 md:px-4 md:py-2.5 text-sm md:text-base border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white disabled:opacity-50"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs md:text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5 md:mb-2",children:"Website"}),s.jsx("input",{type:"url",value:r.website||"",onChange:P=>N("website",P.target.value),disabled:!A,placeholder:"https://...",className:"w-full px-3 py-2 md:px-4 md:py-2.5 text-sm md:text-base border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white disabled:opacity-50"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs md:text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5 md:mb-2",children:"M s thu"}),s.jsx("input",{type:"text",value:r.tax_code||"",onChange:P=>N("tax_code",P.target.value),disabled:!A,className:"w-full px-3 py-2 md:px-4 md:py-2.5 text-sm md:text-base border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white disabled:opacity-50"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs md:text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5 md:mb-2",children:"Gi m ca"}),s.jsx("input",{type:"text",value:r.business_hours||"",onChange:P=>N("business_hours",P.target.value),disabled:!A,placeholder:"8:00 - 18:00 (T2-T7)",className:"w-full px-3 py-2 md:px-4 md:py-2.5 text-sm md:text-base border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white disabled:opacity-50"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs md:text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5 md:mb-2",children:"Nm thnh lp"}),s.jsx("input",{type:"number",value:r.established_year||"",onChange:P=>N("established_year",Number(P.target.value)),disabled:!A,placeholder:"2020",className:"w-full px-3 py-2 md:px-4 md:py-2.5 text-sm md:text-base border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white disabled:opacity-50"})]})]})]}),b==="branding"&&s.jsxs("div",{className:"space-y-4 md:space-y-6",children:[s.jsx("h2",{className:"text-base md:text-lg font-semibold text-slate-900 dark:text-white mb-3 md:mb-4",children:"Thng hiu & Hnh nh"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs md:text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5 md:mb-2",children:"Logo ca hng"}),s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("label",{className:`flex items-center justify-center gap-2 px-4 py-3 border-2 border-dashed border-slate-300 dark:border-slate-600 rounded-lg hover:border-blue-500 dark:hover:border-blue-400 transition-colors ${A?"cursor-pointer":"opacity-50 cursor-not-allowed"}`,children:[s.jsx(bee,{className:"w-4 h-4 md:w-5 md:h-5 text-slate-500"}),s.jsx("span",{className:"text-xs md:text-sm text-slate-600 dark:text-slate-400",children:d?"ang ti ln...":"Chn nh logo"}),s.jsx("input",{type:"file",accept:"image/*",onChange:S,disabled:!A||d,className:"hidden"})]}),s.jsx("p",{className:"text-[10px] md:text-xs text-slate-500 dark:text-slate-400 mt-1",children:"Kch thc ti a: 2MB. nh dng: JPG, PNG, SVG"})]}),r.logo_url&&s.jsx("div",{className:"w-24 h-24 md:w-32 md:h-32 border-2 border-slate-300 dark:border-slate-600 rounded-lg overflow-hidden bg-white dark:bg-slate-700 flex items-center justify-center",children:s.jsx("img",{src:r.logo_url,alt:"Store Logo",className:"max-w-full max-h-full object-contain"})})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs md:text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5 md:mb-2",children:"Hoc nhp URL Logo"}),s.jsx("input",{type:"url",value:r.logo_url||"",onChange:P=>N("logo_url",P.target.value),disabled:!A,placeholder:"https://...",className:"w-full px-3 py-2 md:px-4 md:py-2.5 text-sm md:text-base border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white disabled:opacity-50"})]})]}),s.jsxs("div",{className:"space-y-4 pt-4 md:pt-6 border-t border-slate-200 dark:border-slate-700",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs md:text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5 md:mb-2",children:"M QR ngn hng"}),s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("label",{className:`flex items-center justify-center gap-2 px-4 py-3 border-2 border-dashed border-slate-300 dark:border-slate-600 rounded-lg hover:border-blue-500 dark:hover:border-blue-400 transition-colors ${A?"cursor-pointer":"opacity-50 cursor-not-allowed"}`,children:[s.jsx(tee,{className:"w-4 h-4 md:w-5 md:h-5 text-slate-500"}),s.jsx("span",{className:"text-xs md:text-sm text-slate-600 dark:text-slate-400",children:u?"ang ti ln...":"Chn nh QR Code"}),s.jsx("input",{type:"file",accept:"image/*",onChange:O,disabled:!A||u,className:"hidden"})]}),s.jsx("p",{className:"text-[10px] md:text-xs text-slate-500 dark:text-slate-400 mt-1",children:"Kch thc ti a: 2MB. nh dng: JPG, PNG"})]}),r.bank_qr_url&&s.jsx("div",{className:"w-24 h-24 md:w-32 md:h-32 border-2 border-slate-300 dark:border-slate-600 rounded-lg overflow-hidden bg-white dark:bg-slate-700 flex items-center justify-center",children:s.jsx("img",{src:r.bank_qr_url,alt:"Bank QR Code",className:"max-w-full max-h-full object-contain"})})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs md:text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5 md:mb-2",children:"Hoc nhp URL m QR"}),s.jsx("input",{type:"url",value:r.bank_qr_url||"",onChange:P=>N("bank_qr_url",P.target.value),disabled:!A,placeholder:"https://...",className:"w-full px-3 py-2 md:px-4 md:py-2.5 text-sm md:text-base border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white disabled:opacity-50"})]})]}),s.jsx("div",{className:"pt-4 md:pt-6 border-t border-slate-200 dark:border-slate-700",children:s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs md:text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5 md:mb-2",children:"Mu ch o"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"color",value:r.primary_color||"#3B82F6",onChange:P=>N("primary_color",P.target.value),disabled:!A,className:"w-12 h-10 md:w-16 md:h-12 rounded border border-slate-300 dark:border-slate-600 cursor-pointer disabled:opacity-50"}),s.jsx("input",{type:"text",value:r.primary_color||"#3B82F6",onChange:P=>N("primary_color",P.target.value),disabled:!A,placeholder:"#3B82F6",className:"flex-1 px-3 py-2 md:px-4 md:py-2.5 text-sm md:text-base border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white disabled:opacity-50"})]}),s.jsx("p",{className:"text-[10px] md:text-xs text-slate-500 dark:text-slate-400 mt-1",children:"Mu ny s c s dng trong giao din h thng"})]})})]}),b==="banking"&&s.jsxs("div",{className:"space-y-4 md:space-y-6",children:[s.jsx("h2",{className:"text-base md:text-lg font-semibold text-slate-900 dark:text-white mb-3 md:mb-4",children:"Thng tin ngn hng"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-xs md:text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5 md:mb-2",children:"Tn ngn hng *"}),s.jsx("input",{type:"text",value:r.bank_name||"",onChange:P=>N("bank_name",P.target.value),disabled:!A,placeholder:"VD: Vietcombank, Techcombank, MB Bank...",className:"w-full px-3 py-2 md:px-4 md:py-2.5 text-sm md:text-base border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white disabled:opacity-50"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs md:text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5 md:mb-2",children:"S ti khon *"}),s.jsx("input",{type:"text",value:r.bank_account_number||"",onChange:P=>N("bank_account_number",P.target.value),disabled:!A,className:"w-full px-3 py-2 md:px-4 md:py-2.5 text-sm md:text-base border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white disabled:opacity-50"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs md:text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5 md:mb-2",children:"Ch ti khon *"}),s.jsx("input",{type:"text",value:r.bank_account_holder||"",onChange:P=>N("bank_account_holder",P.target.value),disabled:!A,placeholder:"VD: NGUYEN VAN A",className:"w-full px-3 py-2 md:px-4 md:py-2.5 text-sm md:text-base border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white disabled:opacity-50"})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-xs md:text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5 md:mb-2",children:"Chi nhnh"}),s.jsx("input",{type:"text",value:r.bank_branch||"",onChange:P=>N("bank_branch",P.target.value),disabled:!A,placeholder:"VD: Chi nhnh Qun 1, TP.HCM",className:"w-full px-3 py-2 md:px-4 md:py-2.5 text-sm md:text-base border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white disabled:opacity-50"})]})]}),s.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-3 md:p-4",children:s.jsxs("div",{className:"flex gap-2 md:gap-3",children:[s.jsx(B7,{className:"w-4 h-4 md:w-5 md:h-5 text-blue-600 dark:text-blue-400 flex-shrink-0 mt-0.5"}),s.jsxs("div",{className:"text-xs md:text-sm text-blue-800 dark:text-blue-300",children:[s.jsx("p",{className:"font-medium mb-1",children:"Thng tin ngn hng"}),s.jsx("p",{children:"Thng tin ny s c hin th trn cc ha n, bin nhn v phiu dch v. Khch hng c th qut m QR hoc chuyn khon theo thng tin ny."})]})]})})]}),b==="invoice"&&s.jsxs("div",{className:"space-y-4 md:space-y-6",children:[s.jsx("h2",{className:"text-base md:text-lg font-semibold text-slate-900 dark:text-white mb-3 md:mb-4",children:"Cu hnh ha n"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 md:gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs md:text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5 md:mb-2",children:"M ha n bn"}),s.jsx("input",{type:"text",value:r.invoice_prefix||"HD",onChange:P=>N("invoice_prefix",P.target.value),disabled:!A,placeholder:"HD",className:"w-full px-3 py-2 md:px-4 md:py-2.5 text-sm md:text-base border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white disabled:opacity-50"}),s.jsx("p",{className:"text-[10px] md:text-xs text-slate-500 dark:text-slate-400 mt-1",children:"VD: HD-001, HD-002"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs md:text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5 md:mb-2",children:"M phiu nhp"}),s.jsx("input",{type:"text",value:r.receipt_prefix||"PN",onChange:P=>N("receipt_prefix",P.target.value),disabled:!A,placeholder:"PN",className:"w-full px-3 py-2 md:px-4 md:py-2.5 text-sm md:text-base border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white disabled:opacity-50"}),s.jsx("p",{className:"text-[10px] md:text-xs text-slate-500 dark:text-slate-400 mt-1",children:"VD: PN-001, PN-002"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs md:text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5 md:mb-2",children:"M phiu sa cha"}),s.jsx("input",{type:"text",value:r.work_order_prefix||"SC",onChange:P=>N("work_order_prefix",P.target.value),disabled:!A,placeholder:"SC",className:"w-full px-3 py-2 md:px-4 md:py-2.5 text-sm md:text-base border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white disabled:opacity-50"}),s.jsx("p",{className:"text-[10px] md:text-xs text-slate-500 dark:text-slate-400 mt-1",children:"VD: SC-001, SC-002"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs md:text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5 md:mb-2",children:"Ghi ch cui ha n"}),s.jsx("textarea",{rows:3,value:r.invoice_footer_note||"",onChange:P=>N("invoice_footer_note",P.target.value),disabled:!A,placeholder:"Cm n qu khch  tin tng v s dng dch v!",className:"w-full px-3 py-2 md:px-4 md:py-2.5 text-sm md:text-base border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white disabled:opacity-50"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 md:gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs md:text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5 md:mb-2",children:"nh dng ngy"}),s.jsxs("select",{value:r.date_format||"DD/MM/YYYY",onChange:P=>N("date_format",P.target.value),disabled:!A,className:"w-full px-3 py-2 md:px-4 md:py-2.5 text-sm md:text-base border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white disabled:opacity-50",children:[s.jsx("option",{value:"DD/MM/YYYY",children:"DD/MM/YYYY"}),s.jsx("option",{value:"MM/DD/YYYY",children:"MM/DD/YYYY"}),s.jsx("option",{value:"YYYY-MM-DD",children:"YYYY-MM-DD"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs md:text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5 md:mb-2",children:"n v tin t"}),s.jsxs("select",{value:r.currency||"VND",onChange:P=>N("currency",P.target.value),disabled:!A,className:"w-full px-3 py-2 md:px-4 md:py-2.5 text-sm md:text-base border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white disabled:opacity-50",children:[s.jsx("option",{value:"VND",children:"VND - Vit Nam ng"}),s.jsx("option",{value:"USD",children:"USD - US Dollar"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs md:text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5 md:mb-2",children:"Mi gi"}),s.jsxs("select",{value:r.timezone||"Asia/Ho_Chi_Minh",onChange:P=>N("timezone",P.target.value),disabled:!A,className:"w-full px-3 py-2 md:px-4 md:py-2.5 text-sm md:text-base border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white disabled:opacity-50",children:[s.jsx("option",{value:"Asia/Ho_Chi_Minh",children:"H Ch Minh (GMT+7)"}),s.jsx("option",{value:"Asia/Bangkok",children:"Bangkok (GMT+7)"}),s.jsx("option",{value:"Asia/Singapore",children:"Singapore (GMT+8)"})]})]})]})]})]}),A&&s.jsx("div",{className:"flex justify-end",children:s.jsx("button",{onClick:y,disabled:o,className:"w-full sm:w-auto px-4 py-2 md:px-6 md:py-2.5 bg-blue-600 hover:bg-blue-700 disabled:bg-slate-400 text-white rounded-lg text-sm md:text-base font-semibold transition-colors inline-flex items-center justify-center gap-2","aria-label":"Lu tt c thay i",children:o?s.jsx("span",{children:"ang lu..."}):s.jsxs(s.Fragment,{children:[s.jsx(kS,{className:"w-4 h-4 md:w-5 md:h-5","aria-hidden":"true"}),s.jsx("span",{children:"Lu tt c thay i"})]})})})]})},f9e=()=>s.jsx(rye,{}),m9e=()=>s.jsx(mEe,{}),x9e=()=>s.jsx(SEe,{}),p9e=()=>s.jsx(AEe,{currentBranchId:Ua().currentBranchId}),g9e=()=>s.jsx(OEe,{}),b9e=()=>s.jsx(MEe,{}),v9e=()=>s.jsx(mK,{}),y9e=()=>s.jsx(xK,{}),w9e=()=>s.jsx(f8e,{}),k9e=()=>s.jsx(pK,{}),N9e=()=>s.jsx(C8e,{}),_9e=()=>s.jsx(A8e,{}),S9e=()=>s.jsx(eK,{}),j9e=()=>s.jsx(tK,{}),C9e=()=>s.jsx(o9e,{}),A9e=()=>s.jsx(h9e,{});function E9e(){var k,y,N,S,O,A,P,q,W,R,U,L,Q;const[e,t]=T.useState(!1),[r,n]=T.useState(!1),{theme:a,toggleTheme:i}=Sne(),{profile:o,user:l,signOut:d}=qc(),c=o==null?void 0:o.role,u=((k=o==null?void 0:o.full_name)==null?void 0:k.trim())||((N=(y=l==null?void 0:l.user_metadata)==null?void 0:y.full_name)==null?void 0:N.trim())||((O=(S=l==null?void 0:l.user_metadata)==null?void 0:S.name)==null?void 0:O.trim())||((P=(A=l==null?void 0:l.user_metadata)==null?void 0:A.display_name)==null?void 0:P.trim()),x=u&&u.length>0?u:(o==null?void 0:o.email)||(l==null?void 0:l.email)||"Ti khon",b=((q=u==null?void 0:u.charAt(0))==null?void 0:q.toUpperCase())||((R=(W=o==null?void 0:o.email)==null?void 0:W.charAt(0))==null?void 0:R.toUpperCase())||((L=(U=l==null?void 0:l.email)==null?void 0:U.charAt(0))==null?void 0:L.toUpperCase())||"N",g={viewFinance:c==="owner"||c==="manager",viewAnalytics:c==="owner"||c==="manager",viewDebt:c==="owner"||c==="manager",viewEmployees:c==="owner"||c==="manager",viewSettings:c==="owner"||c==="manager"};return s.jsx("nav",{className:"bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 sticky top-0 z-50",children:s.jsxs("div",{className:"max-w-[1600px] mx-auto px-2 md:px-6 py-2 md:py-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2 md:gap-4",children:[s.jsx("button",{onClick:()=>n(!r),className:"md:hidden p-2 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg transition","aria-label":"Menu",children:s.jsx(lee,{className:"w-6 h-6 text-slate-600 dark:text-slate-300"})}),s.jsxs("div",{className:"relative",children:[s.jsxs("button",{onClick:()=>t(!e),className:"group flex items-center gap-3 focus:outline-none","aria-label":"M ci t v ti khon",children:[s.jsx("img",{src:"/logo-smartcare.png",alt:"SmartCare Logo",className:"w-9 h-9 md:w-14 md:h-14 rounded-xl shadow-sm ring-1 ring-slate-200 dark:ring-slate-700 group-hover:shadow-md group-hover:ring-emerald-400/60 dark:group-hover:ring-emerald-500/60 transition"}),s.jsx("span",{className:"font-bold text-lg md:text-xl tracking-tight bg-gradient-to-r from-emerald-600 to-blue-600 text-transparent bg-clip-text dark:from-emerald-400 dark:to-blue-400 hidden lg:inline",children:"Nhn Lm SmartCare"})]}),e&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>t(!1)}),s.jsxs("div",{className:"absolute top-full left-0 mt-2 w-80 bg-white dark:bg-slate-800 rounded-xl shadow-xl border border-slate-200 dark:border-slate-700 py-2 z-50",children:[s.jsxs("div",{className:"px-5 py-4 border-b border-slate-200 dark:border-slate-700 flex items-center justify-between",children:[s.jsx("p",{className:"text-sm font-semibold text-slate-700 dark:text-slate-200",children:"Ci t & ti khon"}),s.jsx("button",{onClick:()=>t(!1),className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-300 transition","aria-label":"ng",children:s.jsx(ic,{className:"w-4 h-4"})})]}),o&&s.jsxs("div",{className:"px-5 py-4 border-b border-slate-200 dark:border-slate-700 flex items-center gap-3",children:[s.jsx("div",{className:"w-9 h-9 bg-blue-600 rounded-full flex items-center justify-center text-white font-semibold",children:b}),s.jsxs("div",{className:"min-w-0",children:[s.jsx("div",{className:"text-sm font-medium text-slate-900 dark:text-white truncate",children:x}),s.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400 truncate flex items-center gap-1",children:[o.role==="owner"&&s.jsx(M7,{className:"w-3.5 h-3.5 text-yellow-500"}),o.role==="manager"&&s.jsx(X7,{className:"w-3.5 h-3.5 text-indigo-500"}),o.role==="staff"&&s.jsx(Y7,{className:"w-3.5 h-3.5 text-slate-500"}),s.jsx("span",{children:o.role==="owner"?"Ch ca hng":o.role==="manager"?"Qun l":"Nhn vin"})]})]})]}),s.jsxs("button",{onClick:()=>{i(),t(!1)},className:"w-full px-4 py-2 text-left hover:bg-slate-100 dark:hover:bg-slate-700 flex items-center justify-between text-sm text-slate-700 dark:text-slate-200",children:[s.jsxs("span",{className:"flex items-center gap-2",children:[a==="dark"?s.jsx(q7,{className:"w-4 h-4"}):s.jsx(G7,{className:"w-4 h-4"}),s.jsxs("span",{children:["Ch  ",a==="dark"?"ti":"sng"]})]}),s.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:a==="dark"?"Chuyn sang sng":"Chuyn sang ti"})]}),g.viewSettings&&s.jsx(kd,{to:"/settings",onClick:()=>t(!1),className:"block w-full px-4 py-2 text-left hover:bg-slate-100 dark:hover:bg-slate-700 text-sm text-slate-700 dark:text-slate-200",children:s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx(cb,{className:"w-4 h-4"}),s.jsx("span",{children:"Ci t h thng"})]})}),o&&s.jsx("button",{onClick:async()=>{try{await d()}finally{t(!1)}},className:"w-full px-4 py-2 text-left text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20",children:s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx(z7,{className:"w-4 h-4"}),s.jsx("span",{children:"ng xut"})]})})]})]})]})]}),s.jsxs("div",{className:"hidden md:flex items-center gap-2",children:[s.jsx(Tu,{to:"/dashboard",colorKey:"blue",icon:s.jsx(wS,{className:"w-5 h-5"}),label:"Tng quan"}),s.jsx(Tu,{to:"/service",colorKey:"violet",icon:s.jsx(Bm,{className:"w-5 h-5"}),label:"Sa cha"}),s.jsx(Tu,{to:"/sales",colorKey:"emerald",icon:s.jsx(om,{className:"w-5 h-5"}),label:"Bn hng"}),s.jsx(Tu,{to:"/inventory",colorKey:"amber",icon:s.jsx(Hi,{className:"w-5 h-5"}),label:"Qun l kho"}),s.jsx(Tu,{to:"/customers",colorKey:"cyan",icon:s.jsx(ff,{className:"w-5 h-5"}),label:"Khch hng"}),g.viewEmployees&&s.jsx(Tu,{to:"/employees",colorKey:"indigo",icon:s.jsx(Rm,{className:"w-5 h-5"}),label:"Nhn vin"}),g.viewFinance&&s.jsx(Tu,{to:"/finance",colorKey:"rose",icon:s.jsx(lb,{className:"w-5 h-5"}),label:"Ti chnh"}),g.viewDebt&&s.jsx(Tu,{to:"/debt",colorKey:"orange",icon:s.jsx(Fm,{className:"w-5 h-5"}),label:"Cng n"}),g.viewAnalytics&&s.jsx(Tu,{to:"/analytics",colorKey:"teal",icon:s.jsx(pw,{className:"w-5 h-5"}),label:"Phn tch"}),s.jsx(Tu,{to:"/reports",colorKey:"fuchsia",icon:s.jsx(vd,{className:"w-5 h-5"}),label:"Bo co"})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(yne,{}),s.jsx(kd,{to:"/dashboard",className:"p-2 text-slate-500 hover:text-blue-600 dark:text-slate-400 dark:hover:text-blue-400 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg transition-colors",title:"Trang ch",children:s.jsx(wS,{className:"w-6 h-6"})})]})]}),r&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 md:hidden",onClick:()=>n(!1)}),s.jsxs("div",{className:"fixed inset-y-0 left-0 w-80 bg-gradient-to-br from-white to-slate-50 dark:from-slate-800 dark:to-slate-900 z-50 shadow-2xl md:hidden overflow-y-auto animate-slide-in-left",children:[s.jsxs("div",{className:"relative p-6 pb-8 bg-gradient-to-br from-blue-600 to-violet-600 dark:from-blue-700 dark:to-violet-800",children:[s.jsx("button",{onClick:()=>n(!1),className:"absolute top-4 right-4 p-2 hover:bg-white/10 rounded-lg transition text-white",children:s.jsx(ic,{className:"w-5 h-5"})}),o&&s.jsxs("div",{className:"flex items-center gap-3 text-white mt-2",children:[s.jsx("div",{className:"w-14 h-14 bg-white/20 backdrop-blur rounded-full flex items-center justify-center text-xl font-bold border-2 border-white/30",children:((Q=o.full_name)==null?void 0:Q[0])||o.email[0].toUpperCase()}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"font-semibold text-base truncate",children:o.full_name||o.email}),s.jsxs("div",{className:"text-xs text-white/80 flex items-center gap-1 mt-0.5",children:[o.role==="owner"&&s.jsx(M7,{className:"w-3 h-3"}),o.role==="manager"&&s.jsx(X7,{className:"w-3 h-3"}),o.role==="staff"&&s.jsx(Y7,{className:"w-3 h-3"}),s.jsx("span",{children:o.role==="owner"?"Ch ca hng":o.role==="manager"?"Qun l":"Nhn vin"})]})]})]})]}),s.jsxs("div",{className:"p-4 space-y-6",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider px-3 mb-2",children:"Qun l"}),s.jsxs("div",{className:"space-y-1",children:[g.viewEmployees&&s.jsx(m1,{to:"/employees",icon:s.jsx(Rm,{className:"w-5 h-5"}),label:"Nhn vin",color:"indigo",onClick:()=>n(!1)}),g.viewDebt&&s.jsx(m1,{to:"/debt",icon:s.jsx(Fm,{className:"w-5 h-5"}),label:"Cng n",color:"orange",onClick:()=>n(!1)})]})]}),(g.viewFinance||g.viewAnalytics)&&s.jsxs("div",{children:[s.jsx("div",{className:"text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider px-3 mb-2",children:"Ti chnh & Bo co"}),s.jsxs("div",{className:"space-y-1",children:[g.viewFinance&&s.jsx(m1,{to:"/finance",icon:s.jsx(lb,{className:"w-5 h-5"}),label:"Ti chnh",color:"rose",onClick:()=>n(!1)}),g.viewAnalytics&&s.jsx(m1,{to:"/analytics",icon:s.jsx(pw,{className:"w-5 h-5"}),label:"Phn tch",color:"teal",onClick:()=>n(!1)}),s.jsx(m1,{to:"/reports",icon:s.jsx(vd,{className:"w-5 h-5"}),label:"Bo co",color:"fuchsia",onClick:()=>n(!1)})]})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider px-3 mb-2",children:"H thng"}),s.jsxs("div",{className:"space-y-1",children:[s.jsxs("button",{onClick:()=>{i(),n(!1)},className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl hover:bg-slate-100 dark:hover:bg-slate-700/50 transition text-slate-700 dark:text-slate-300",children:[a==="dark"?s.jsx(q7,{className:"w-5 h-5"}):s.jsx(G7,{className:"w-5 h-5"}),s.jsxs("span",{className:"font-medium",children:["Ch  ",a==="dark"?"ti":"sng"]})]}),g.viewSettings&&s.jsx(m1,{to:"/settings",icon:s.jsx(cb,{className:"w-5 h-5"}),label:"Ci t",color:"slate",onClick:()=>n(!1)})]})]})]}),s.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-4 bg-white dark:bg-slate-800 border-t border-slate-200 dark:border-slate-700",children:s.jsxs("button",{onClick:async()=>{try{await d()}finally{n(!1)}},className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-red-500 hover:bg-red-600 text-white rounded-xl font-medium transition shadow-lg shadow-red-500/20",children:[s.jsx(z7,{className:"w-5 h-5"}),s.jsx("span",{children:"ng xut"})]})})]})]})]})})}const Im={blue:{text:"text-blue-600 dark:text-blue-400",bg:"bg-blue-50 dark:bg-blue-900/30",hoverBg:"hover:bg-blue-50 dark:hover:bg-blue-900/20"},violet:{text:"text-violet-600 dark:text-violet-400",bg:"bg-violet-50 dark:bg-violet-900/30",hoverBg:"hover:bg-violet-50 dark:hover:bg-violet-900/20"},emerald:{text:"text-emerald-600 dark:text-emerald-400",bg:"bg-emerald-50 dark:bg-emerald-900/30",hoverBg:"hover:bg-emerald-50 dark:hover:bg-emerald-900/20"},amber:{text:"text-amber-600 dark:text-amber-400",bg:"bg-amber-50 dark:bg-amber-900/30",hoverBg:"hover:bg-amber-50 dark:hover:bg-amber-900/20"},cyan:{text:"text-cyan-600 dark:text-cyan-400",bg:"bg-cyan-50 dark:bg-cyan-900/30",hoverBg:"hover:bg-cyan-50 dark:hover:bg-cyan-900/20"},indigo:{text:"text-indigo-600 dark:text-indigo-400",bg:"bg-indigo-50 dark:bg-indigo-900/30",hoverBg:"hover:bg-indigo-50 dark:hover:bg-indigo-900/20"},rose:{text:"text-rose-600 dark:text-rose-400",bg:"bg-rose-50 dark:bg-rose-900/30",hoverBg:"hover:bg-rose-50 dark:hover:bg-rose-900/20"},orange:{text:"text-orange-600 dark:text-orange-400",bg:"bg-orange-50 dark:bg-orange-900/30",hoverBg:"hover:bg-orange-50 dark:hover:bg-orange-900/20"},teal:{text:"text-teal-600 dark:text-teal-400",bg:"bg-teal-50 dark:bg-teal-900/30",hoverBg:"hover:bg-teal-50 dark:hover:bg-teal-900/20"},fuchsia:{text:"text-fuchsia-600 dark:text-fuchsia-400",bg:"bg-fuchsia-50 dark:bg-fuchsia-900/30",hoverBg:"hover:bg-fuchsia-50 dark:hover:bg-fuchsia-900/20"},slate:{text:"text-slate-600 dark:text-slate-400",bg:"bg-slate-50 dark:bg-slate-900/30",hoverBg:"hover:bg-slate-50 dark:hover:bg-slate-900/20"}},m1=({to:e,icon:t,label:r,color:n,onClick:a})=>{const o=Cd().pathname===e,l=Im[n]||Im.slate;return s.jsxs(kd,{to:e,onClick:a,className:`flex items-center gap-3 px-4 py-3 rounded-xl transition ${o?`${l.bg} ${l.text} shadow-sm`:"text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700/50"}`,children:[s.jsx("div",{className:`${o?l.text:""}`,children:t}),s.jsx("span",{className:"font-medium text-sm",children:r})]})},Tu=({to:e,icon:t,label:r,colorKey:n})=>{const i=Cd().pathname===e;return s.jsxs(kd,{to:e,className:`flex flex-col items-center gap-1 px-4 py-2 rounded-lg transition ${i?`${Im[n].bg} ${Im[n].text}`:`text-slate-600 dark:text-slate-300 ${Im[n].hoverBg}`}`,children:[s.jsx("span",{className:"flex items-center justify-center",children:t}),s.jsx("span",{className:"text-xs font-medium whitespace-nowrap",children:r})]})},T9e=()=>{const e=Cd();if(e.pathname==="/inventory")return null;const t=[{to:"/dashboard",icon:s.jsx(wS,{className:"w-6 h-6"}),label:"Tng quan",color:"blue"},{to:"/service",icon:s.jsx(Bm,{className:"w-6 h-6"}),label:"Sa cha",color:"violet"},{to:"/sales",icon:s.jsx(om,{className:"w-6 h-6"}),label:"Bn hng",color:"emerald"},{to:"/inventory",icon:s.jsx(Hi,{className:"w-6 h-6"}),label:"Kho",color:"amber"},{to:"/customers",icon:s.jsx(ff,{className:"w-6 h-6"}),label:"Khch hng",color:"cyan"}];return s.jsxs("div",{className:"md:hidden fixed bottom-0 left-0 right-0 z-50 bg-white dark:bg-slate-800 border-t border-slate-200 dark:border-slate-700 safe-area-bottom",children:[s.jsx("div",{className:"absolute inset-0 bg-white/80 dark:bg-slate-800/80 backdrop-blur-lg -z-10"}),s.jsx("div",{className:"grid grid-cols-5 gap-1 px-2 py-2",children:t.map(r=>{const n=e.pathname===r.to,a=r.color;return s.jsxs(kd,{to:r.to,className:`flex flex-col items-center gap-1 px-1 py-1.5 rounded-lg transition-all duration-200 ${n?`${Im[a].bg} ${Im[a].text}`:"text-slate-600 dark:text-slate-400 active:scale-95"}`,children:[s.jsx("div",{className:`transition-transform ${n?"scale-105":""}`,children:ma.cloneElement(r.icon,{className:"w-6 h-6"})}),s.jsx("span",{className:`text-[9px] font-medium truncate w-full text-center ${n?"font-semibold":""}`,children:r.label})]},r.to)})})]})};function O9e(){const[e,t]=T.useState(!1);return T.useEffect(()=>{t(!0)},[]),{ready:e}}const P9e=new IZ({defaultOptions:{queries:{staleTime:120*1e3,gcTime:300*1e3,refetchOnWindowFocus:!1,refetchOnReconnect:"always",retry:2}}}),I9e=()=>{const t=Cd().pathname==="/sales";return s.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 transition-colors pb-20 md:pb-0",children:[s.jsx(E9e,{}),s.jsx("main",{className:`max-w-[1600px] mx-auto ${t?"p-0":"p-0 md:p-6"}`,children:s.jsxs(nB,{children:[s.jsx(ui,{path:"/",element:s.jsx(rB,{to:"/dashboard",replace:!0})}),s.jsx(ui,{path:"/dashboard",element:s.jsx(d2e,{})}),s.jsx(ui,{path:"/sales",element:s.jsx(f9e,{})}),s.jsx(ui,{path:"/audit-logs",element:s.jsx(Ou,{requiredRoles:["owner"],children:s.jsx(c9e,{})})}),s.jsx(ui,{path:"/inventory",element:s.jsx(m9e,{})}),s.jsx(ui,{path:"/categories",element:s.jsx(S9e,{})}),s.jsx(ui,{path:"/lookup",element:s.jsx(j9e,{})}),s.jsx(ui,{path:"/service",element:s.jsx(x9e,{})}),s.jsx(ui,{path:"/service-history",element:s.jsx(p9e,{})}),s.jsx(ui,{path:"/customers",element:s.jsx(g9e,{})}),s.jsx(ui,{path:"/debt",element:s.jsx(Ou,{requiredRoles:["owner","manager"],children:s.jsx(b9e,{})})}),s.jsx(ui,{path:"/cashbook",element:s.jsx(Ou,{requiredRoles:["owner","manager"],children:s.jsx(v9e,{})})}),s.jsx(ui,{path:"/loans",element:s.jsx(Ou,{requiredRoles:["owner","manager"],children:s.jsx(y9e,{})})}),s.jsx(ui,{path:"/payroll",element:s.jsx(Ou,{requiredRoles:["owner","manager"],children:s.jsx(k9e,{})})}),s.jsx(ui,{path:"/employees",element:s.jsx(Ou,{requiredRoles:["owner","manager"],children:s.jsx(_9e,{})})}),s.jsx(ui,{path:"/finance",element:s.jsx(Ou,{requiredRoles:["owner","manager"],children:s.jsx(w9e,{})})}),s.jsx(ui,{path:"/analytics",element:s.jsx(Ou,{requiredRoles:["owner","manager"],children:s.jsx(C9e,{})})}),s.jsx(ui,{path:"/reports",element:s.jsx(N9e,{})}),s.jsx(ui,{path:"/settings",element:s.jsx(Ou,{requiredRoles:["owner","manager"],children:s.jsx(A9e,{})})})]})}),s.jsx(T9e,{})]})};function D9e(){const{ready:e}=O9e();return e?s.jsx(DZ,{client:P9e,children:s.jsx(_ne,{children:s.jsx(FU,{children:s.jsx(vne,{children:s.jsx(tZ,{children:s.jsxs(TJ,{children:[s.jsx(OJ,{}),s.jsxs(nB,{children:[s.jsx(ui,{path:"/login",element:s.jsx(Cne,{})}),s.jsx(ui,{path:"/*",element:s.jsx(Ou,{children:s.jsx(I9e,{})})})]}),s.jsx(Nne,{initialIsOpen:!1}),!1]})})})})})}):null}HY.createRoot(document.getElementById("root")).render(s.jsxs(ma.StrictMode,{children:[s.jsx(D9e,{}),s.jsx(EJ,{position:"top-right",autoClose:3e3,hideProgressBar:!1,newestOnTop:!0,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"colored"})]}));export{Za as _,_2 as c,zc as g};
