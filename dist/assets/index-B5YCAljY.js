var sG=Object.defineProperty;var $8=e=>{throw TypeError(e)};var iG=(e,t,r)=>t in e?sG(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var Aa=(e,t,r)=>iG(e,typeof t!="symbol"?t+"":t,r),a4=(e,t,r)=>t.has(e)||$8("Cannot "+r);var et=(e,t,r)=>(a4(e,t,"read from private field"),r?r.call(e):t.get(e)),mn=(e,t,r)=>t.has(e)?$8("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),Rr=(e,t,r,n)=>(a4(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),ea=(e,t,r)=>(a4(e,t,"access private method"),r);var t2=(e,t,r,n)=>({set _(a){Rr(e,t,a,r)},get _(){return et(e,t,n)}});function r6(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in e)){const i=Object.getOwnPropertyDescriptor(n,a);i&&Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();var r2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function gd(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function lG(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var a=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,a.get?a:{enumerable:!0,get:function(){return e[n]}})}),r}var s4={exports:{}},Jp={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var V8;function oG(){if(V8)return Jp;V8=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(n,a,i){var l=null;if(i!==void 0&&(l=""+i),a.key!==void 0&&(l=""+a.key),"key"in a){i={};for(var o in a)o!=="key"&&(i[o]=a[o])}else i=a;return a=i.ref,{$$typeof:e,type:n,key:l,ref:a!==void 0?a:null,props:i}}return Jp.Fragment=t,Jp.jsx=r,Jp.jsxs=r,Jp}var W8;function cG(){return W8||(W8=1,s4.exports=oG()),s4.exports}var s=cG(),i4={exports:{}},$n={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var K8;function dG(){if(K8)return $n;K8=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),l=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),p=Symbol.for("react.activity"),y=Symbol.iterator;function g(xe){return xe===null||typeof xe!="object"?null:(xe=y&&xe[y]||xe["@@iterator"],typeof xe=="function"?xe:null)}var N={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,k={};function S(xe,B,ee){this.props=xe,this.context=B,this.refs=k,this.updater=ee||N}S.prototype.isReactComponent={},S.prototype.setState=function(xe,B){if(typeof xe!="object"&&typeof xe!="function"&&xe!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,xe,B,"setState")},S.prototype.forceUpdate=function(xe){this.updater.enqueueForceUpdate(this,xe,"forceUpdate")};function O(){}O.prototype=S.prototype;function E(xe,B,ee){this.props=xe,this.context=B,this.refs=k,this.updater=ee||N}var D=E.prototype=new O;D.constructor=E,w(D,S.prototype),D.isPureReactComponent=!0;var q=Array.isArray;function W(){}var R={H:null,A:null,T:null,S:null},U=Object.prototype.hasOwnProperty;function z(xe,B,ee){var Y=ee.ref;return{$$typeof:e,type:xe,key:B,ref:Y!==void 0?Y:null,props:ee}}function Z(xe,B){return z(xe.type,B,xe.props)}function H(xe){return typeof xe=="object"&&xe!==null&&xe.$$typeof===e}function K(xe){var B={"=":"=0",":":"=2"};return"$"+xe.replace(/[=:]/g,function(ee){return B[ee]})}var J=/\/+/g;function ae(xe,B){return typeof xe=="object"&&xe!==null&&xe.key!=null?K(""+xe.key):B.toString(36)}function se(xe){switch(xe.status){case"fulfilled":return xe.value;case"rejected":throw xe.reason;default:switch(typeof xe.status=="string"?xe.then(W,W):(xe.status="pending",xe.then(function(B){xe.status==="pending"&&(xe.status="fulfilled",xe.value=B)},function(B){xe.status==="pending"&&(xe.status="rejected",xe.reason=B)})),xe.status){case"fulfilled":return xe.value;case"rejected":throw xe.reason}}throw xe}function ue(xe,B,ee,Y,re){var Q=typeof xe;(Q==="undefined"||Q==="boolean")&&(xe=null);var Ce=!1;if(xe===null)Ce=!0;else switch(Q){case"bigint":case"string":case"number":Ce=!0;break;case"object":switch(xe.$$typeof){case e:case t:Ce=!0;break;case f:return Ce=xe._init,ue(Ce(xe._payload),B,ee,Y,re)}}if(Ce)return re=re(xe),Ce=Y===""?"."+ae(xe,0):Y,q(re)?(ee="",Ce!=null&&(ee=Ce.replace(J,"$&/")+"/"),ue(re,B,ee,"",function(je){return je})):re!=null&&(H(re)&&(re=Z(re,ee+(re.key==null||xe&&xe.key===re.key?"":(""+re.key).replace(J,"$&/")+"/")+Ce)),B.push(re)),1;Ce=0;var me=Y===""?".":Y+":";if(q(xe))for(var ie=0;ie<xe.length;ie++)Y=xe[ie],Q=me+ae(Y,ie),Ce+=ue(Y,B,ee,Q,re);else if(ie=g(xe),typeof ie=="function")for(xe=ie.call(xe),ie=0;!(Y=xe.next()).done;)Y=Y.value,Q=me+ae(Y,ie++),Ce+=ue(Y,B,ee,Q,re);else if(Q==="object"){if(typeof xe.then=="function")return ue(se(xe),B,ee,Y,re);throw B=String(xe),Error("Objects are not valid as a React child (found: "+(B==="[object Object]"?"object with keys {"+Object.keys(xe).join(", ")+"}":B)+"). If you meant to render a collection of children, use an array instead.")}return Ce}function fe(xe,B,ee){if(xe==null)return xe;var Y=[],re=0;return ue(xe,Y,"","",function(Q){return B.call(ee,Q,re++)}),Y}function ke(xe){if(xe._status===-1){var B=xe._result;B=B(),B.then(function(ee){(xe._status===0||xe._status===-1)&&(xe._status=1,xe._result=ee)},function(ee){(xe._status===0||xe._status===-1)&&(xe._status=2,xe._result=ee)}),xe._status===-1&&(xe._status=0,xe._result=B)}if(xe._status===1)return xe._result.default;throw xe._result}var _e=typeof reportError=="function"?reportError:function(xe){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var B=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof xe=="object"&&xe!==null&&typeof xe.message=="string"?String(xe.message):String(xe),error:xe});if(!window.dispatchEvent(B))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",xe);return}console.error(xe)},Le={map:fe,forEach:function(xe,B,ee){fe(xe,function(){B.apply(this,arguments)},ee)},count:function(xe){var B=0;return fe(xe,function(){B++}),B},toArray:function(xe){return fe(xe,function(B){return B})||[]},only:function(xe){if(!H(xe))throw Error("React.Children.only expected to receive a single React element child.");return xe}};return $n.Activity=p,$n.Children=Le,$n.Component=S,$n.Fragment=r,$n.Profiler=a,$n.PureComponent=E,$n.StrictMode=n,$n.Suspense=c,$n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,$n.__COMPILER_RUNTIME={__proto__:null,c:function(xe){return R.H.useMemoCache(xe)}},$n.cache=function(xe){return function(){return xe.apply(null,arguments)}},$n.cacheSignal=function(){return null},$n.cloneElement=function(xe,B,ee){if(xe==null)throw Error("The argument must be a React element, but you passed "+xe+".");var Y=w({},xe.props),re=xe.key;if(B!=null)for(Q in B.key!==void 0&&(re=""+B.key),B)!U.call(B,Q)||Q==="key"||Q==="__self"||Q==="__source"||Q==="ref"&&B.ref===void 0||(Y[Q]=B[Q]);var Q=arguments.length-2;if(Q===1)Y.children=ee;else if(1<Q){for(var Ce=Array(Q),me=0;me<Q;me++)Ce[me]=arguments[me+2];Y.children=Ce}return z(xe.type,re,Y)},$n.createContext=function(xe){return xe={$$typeof:l,_currentValue:xe,_currentValue2:xe,_threadCount:0,Provider:null,Consumer:null},xe.Provider=xe,xe.Consumer={$$typeof:i,_context:xe},xe},$n.createElement=function(xe,B,ee){var Y,re={},Q=null;if(B!=null)for(Y in B.key!==void 0&&(Q=""+B.key),B)U.call(B,Y)&&Y!=="key"&&Y!=="__self"&&Y!=="__source"&&(re[Y]=B[Y]);var Ce=arguments.length-2;if(Ce===1)re.children=ee;else if(1<Ce){for(var me=Array(Ce),ie=0;ie<Ce;ie++)me[ie]=arguments[ie+2];re.children=me}if(xe&&xe.defaultProps)for(Y in Ce=xe.defaultProps,Ce)re[Y]===void 0&&(re[Y]=Ce[Y]);return z(xe,Q,re)},$n.createRef=function(){return{current:null}},$n.forwardRef=function(xe){return{$$typeof:o,render:xe}},$n.isValidElement=H,$n.lazy=function(xe){return{$$typeof:f,_payload:{_status:-1,_result:xe},_init:ke}},$n.memo=function(xe,B){return{$$typeof:d,type:xe,compare:B===void 0?null:B}},$n.startTransition=function(xe){var B=R.T,ee={};R.T=ee;try{var Y=xe(),re=R.S;re!==null&&re(ee,Y),typeof Y=="object"&&Y!==null&&typeof Y.then=="function"&&Y.then(W,_e)}catch(Q){_e(Q)}finally{B!==null&&ee.types!==null&&(B.types=ee.types),R.T=B}},$n.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},$n.use=function(xe){return R.H.use(xe)},$n.useActionState=function(xe,B,ee){return R.H.useActionState(xe,B,ee)},$n.useCallback=function(xe,B){return R.H.useCallback(xe,B)},$n.useContext=function(xe){return R.H.useContext(xe)},$n.useDebugValue=function(){},$n.useDeferredValue=function(xe,B){return R.H.useDeferredValue(xe,B)},$n.useEffect=function(xe,B){return R.H.useEffect(xe,B)},$n.useEffectEvent=function(xe){return R.H.useEffectEvent(xe)},$n.useId=function(){return R.H.useId()},$n.useImperativeHandle=function(xe,B,ee){return R.H.useImperativeHandle(xe,B,ee)},$n.useInsertionEffect=function(xe,B){return R.H.useInsertionEffect(xe,B)},$n.useLayoutEffect=function(xe,B){return R.H.useLayoutEffect(xe,B)},$n.useMemo=function(xe,B){return R.H.useMemo(xe,B)},$n.useOptimistic=function(xe,B){return R.H.useOptimistic(xe,B)},$n.useReducer=function(xe,B,ee){return R.H.useReducer(xe,B,ee)},$n.useRef=function(xe){return R.H.useRef(xe)},$n.useState=function(xe){return R.H.useState(xe)},$n.useSyncExternalStore=function(xe,B,ee){return R.H.useSyncExternalStore(xe,B,ee)},$n.useTransition=function(){return R.H.useTransition()},$n.version="19.2.0",$n}var G8;function Y1(){return G8||(G8=1,i4.exports=dG()),i4.exports}var T=Y1();const ua=gd(T),uG=r6({__proto__:null,default:ua},[T]);var l4={exports:{}},eg={},o4={exports:{}},c4={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var X8;function hG(){return X8||(X8=1,(function(e){function t(ue,fe){var ke=ue.length;ue.push(fe);e:for(;0<ke;){var _e=ke-1>>>1,Le=ue[_e];if(0<a(Le,fe))ue[_e]=fe,ue[ke]=Le,ke=_e;else break e}}function r(ue){return ue.length===0?null:ue[0]}function n(ue){if(ue.length===0)return null;var fe=ue[0],ke=ue.pop();if(ke!==fe){ue[0]=ke;e:for(var _e=0,Le=ue.length,xe=Le>>>1;_e<xe;){var B=2*(_e+1)-1,ee=ue[B],Y=B+1,re=ue[Y];if(0>a(ee,ke))Y<Le&&0>a(re,ee)?(ue[_e]=re,ue[Y]=ke,_e=Y):(ue[_e]=ee,ue[B]=ke,_e=B);else if(Y<Le&&0>a(re,ke))ue[_e]=re,ue[Y]=ke,_e=Y;else break e}}return fe}function a(ue,fe){var ke=ue.sortIndex-fe.sortIndex;return ke!==0?ke:ue.id-fe.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var l=Date,o=l.now();e.unstable_now=function(){return l.now()-o}}var c=[],d=[],f=1,p=null,y=3,g=!1,N=!1,w=!1,k=!1,S=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;function D(ue){for(var fe=r(d);fe!==null;){if(fe.callback===null)n(d);else if(fe.startTime<=ue)n(d),fe.sortIndex=fe.expirationTime,t(c,fe);else break;fe=r(d)}}function q(ue){if(w=!1,D(ue),!N)if(r(c)!==null)N=!0,W||(W=!0,K());else{var fe=r(d);fe!==null&&se(q,fe.startTime-ue)}}var W=!1,R=-1,U=5,z=-1;function Z(){return k?!0:!(e.unstable_now()-z<U)}function H(){if(k=!1,W){var ue=e.unstable_now();z=ue;var fe=!0;try{e:{N=!1,w&&(w=!1,O(R),R=-1),g=!0;var ke=y;try{t:{for(D(ue),p=r(c);p!==null&&!(p.expirationTime>ue&&Z());){var _e=p.callback;if(typeof _e=="function"){p.callback=null,y=p.priorityLevel;var Le=_e(p.expirationTime<=ue);if(ue=e.unstable_now(),typeof Le=="function"){p.callback=Le,D(ue),fe=!0;break t}p===r(c)&&n(c),D(ue)}else n(c);p=r(c)}if(p!==null)fe=!0;else{var xe=r(d);xe!==null&&se(q,xe.startTime-ue),fe=!1}}break e}finally{p=null,y=ke,g=!1}fe=void 0}}finally{fe?K():W=!1}}}var K;if(typeof E=="function")K=function(){E(H)};else if(typeof MessageChannel<"u"){var J=new MessageChannel,ae=J.port2;J.port1.onmessage=H,K=function(){ae.postMessage(null)}}else K=function(){S(H,0)};function se(ue,fe){R=S(function(){ue(e.unstable_now())},fe)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(ue){ue.callback=null},e.unstable_forceFrameRate=function(ue){0>ue||125<ue?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):U=0<ue?Math.floor(1e3/ue):5},e.unstable_getCurrentPriorityLevel=function(){return y},e.unstable_next=function(ue){switch(y){case 1:case 2:case 3:var fe=3;break;default:fe=y}var ke=y;y=fe;try{return ue()}finally{y=ke}},e.unstable_requestPaint=function(){k=!0},e.unstable_runWithPriority=function(ue,fe){switch(ue){case 1:case 2:case 3:case 4:case 5:break;default:ue=3}var ke=y;y=ue;try{return fe()}finally{y=ke}},e.unstable_scheduleCallback=function(ue,fe,ke){var _e=e.unstable_now();switch(typeof ke=="object"&&ke!==null?(ke=ke.delay,ke=typeof ke=="number"&&0<ke?_e+ke:_e):ke=_e,ue){case 1:var Le=-1;break;case 2:Le=250;break;case 5:Le=1073741823;break;case 4:Le=1e4;break;default:Le=5e3}return Le=ke+Le,ue={id:f++,callback:fe,priorityLevel:ue,startTime:ke,expirationTime:Le,sortIndex:-1},ke>_e?(ue.sortIndex=ke,t(d,ue),r(c)===null&&ue===r(d)&&(w?(O(R),R=-1):w=!0,se(q,ke-_e))):(ue.sortIndex=Le,t(c,ue),N||g||(N=!0,W||(W=!0,K()))),ue},e.unstable_shouldYield=Z,e.unstable_wrapCallback=function(ue){var fe=y;return function(){var ke=y;y=fe;try{return ue.apply(this,arguments)}finally{y=ke}}}})(c4)),c4}var Y8;function fG(){return Y8||(Y8=1,o4.exports=hG()),o4.exports}var d4={exports:{}},Hl={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Z8;function mG(){if(Z8)return Hl;Z8=1;var e=Y1();function t(c){var d="https://react.dev/errors/"+c;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)d+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+c+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var n={d:{f:r,r:function(){throw Error(t(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},a=Symbol.for("react.portal");function i(c,d,f){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:p==null?null:""+p,children:c,containerInfo:d,implementation:f}}var l=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(c,d){if(c==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return Hl.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,Hl.createPortal=function(c,d){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(t(299));return i(c,d,null,f)},Hl.flushSync=function(c){var d=l.T,f=n.p;try{if(l.T=null,n.p=2,c)return c()}finally{l.T=d,n.p=f,n.d.f()}},Hl.preconnect=function(c,d){typeof c=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,n.d.C(c,d))},Hl.prefetchDNS=function(c){typeof c=="string"&&n.d.D(c)},Hl.preinit=function(c,d){if(typeof c=="string"&&d&&typeof d.as=="string"){var f=d.as,p=o(f,d.crossOrigin),y=typeof d.integrity=="string"?d.integrity:void 0,g=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;f==="style"?n.d.S(c,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:p,integrity:y,fetchPriority:g}):f==="script"&&n.d.X(c,{crossOrigin:p,integrity:y,fetchPriority:g,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},Hl.preinitModule=function(c,d){if(typeof c=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var f=o(d.as,d.crossOrigin);n.d.M(c,{crossOrigin:f,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&n.d.M(c)},Hl.preload=function(c,d){if(typeof c=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var f=d.as,p=o(f,d.crossOrigin);n.d.L(c,f,{crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},Hl.preloadModule=function(c,d){if(typeof c=="string")if(d){var f=o(d.as,d.crossOrigin);n.d.m(c,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:f,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else n.d.m(c)},Hl.requestFormReset=function(c){n.d.r(c)},Hl.unstable_batchedUpdates=function(c,d){return c(d)},Hl.useFormState=function(c,d,f){return l.H.useFormState(c,d,f)},Hl.useFormStatus=function(){return l.H.useHostTransitionStatus()},Hl.version="19.2.0",Hl}var Q8;function OL(){if(Q8)return d4.exports;Q8=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),d4.exports=mG(),d4.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var J8;function xG(){if(J8)return eg;J8=1;var e=fG(),t=Y1(),r=OL();function n(u){var m="https://react.dev/errors/"+u;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)m+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+u+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(u){return!(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)}function i(u){var m=u,v=u;if(u.alternate)for(;m.return;)m=m.return;else{u=m;do m=u,(m.flags&4098)!==0&&(v=m.return),u=m.return;while(u)}return m.tag===3?v:null}function l(u){if(u.tag===13){var m=u.memoizedState;if(m===null&&(u=u.alternate,u!==null&&(m=u.memoizedState)),m!==null)return m.dehydrated}return null}function o(u){if(u.tag===31){var m=u.memoizedState;if(m===null&&(u=u.alternate,u!==null&&(m=u.memoizedState)),m!==null)return m.dehydrated}return null}function c(u){if(i(u)!==u)throw Error(n(188))}function d(u){var m=u.alternate;if(!m){if(m=i(u),m===null)throw Error(n(188));return m!==u?null:u}for(var v=u,C=m;;){var M=v.return;if(M===null)break;var V=M.alternate;if(V===null){if(C=M.return,C!==null){v=C;continue}break}if(M.child===V.child){for(V=M.child;V;){if(V===v)return c(M),u;if(V===C)return c(M),m;V=V.sibling}throw Error(n(188))}if(v.return!==C.return)v=M,C=V;else{for(var he=!1,Re=M.child;Re;){if(Re===v){he=!0,v=M,C=V;break}if(Re===C){he=!0,C=M,v=V;break}Re=Re.sibling}if(!he){for(Re=V.child;Re;){if(Re===v){he=!0,v=V,C=M;break}if(Re===C){he=!0,C=V,v=M;break}Re=Re.sibling}if(!he)throw Error(n(189))}}if(v.alternate!==C)throw Error(n(190))}if(v.tag!==3)throw Error(n(188));return v.stateNode.current===v?u:m}function f(u){var m=u.tag;if(m===5||m===26||m===27||m===6)return u;for(u=u.child;u!==null;){if(m=f(u),m!==null)return m;u=u.sibling}return null}var p=Object.assign,y=Symbol.for("react.element"),g=Symbol.for("react.transitional.element"),N=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),O=Symbol.for("react.consumer"),E=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),q=Symbol.for("react.suspense"),W=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),U=Symbol.for("react.lazy"),z=Symbol.for("react.activity"),Z=Symbol.for("react.memo_cache_sentinel"),H=Symbol.iterator;function K(u){return u===null||typeof u!="object"?null:(u=H&&u[H]||u["@@iterator"],typeof u=="function"?u:null)}var J=Symbol.for("react.client.reference");function ae(u){if(u==null)return null;if(typeof u=="function")return u.$$typeof===J?null:u.displayName||u.name||null;if(typeof u=="string")return u;switch(u){case w:return"Fragment";case S:return"Profiler";case k:return"StrictMode";case q:return"Suspense";case W:return"SuspenseList";case z:return"Activity"}if(typeof u=="object")switch(u.$$typeof){case N:return"Portal";case E:return u.displayName||"Context";case O:return(u._context.displayName||"Context")+".Consumer";case D:var m=u.render;return u=u.displayName,u||(u=m.displayName||m.name||"",u=u!==""?"ForwardRef("+u+")":"ForwardRef"),u;case R:return m=u.displayName||null,m!==null?m:ae(u.type)||"Memo";case U:m=u._payload,u=u._init;try{return ae(u(m))}catch{}}return null}var se=Array.isArray,ue=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,fe=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ke={pending:!1,data:null,method:null,action:null},_e=[],Le=-1;function xe(u){return{current:u}}function B(u){0>Le||(u.current=_e[Le],_e[Le]=null,Le--)}function ee(u,m){Le++,_e[Le]=u.current,u.current=m}var Y=xe(null),re=xe(null),Q=xe(null),Ce=xe(null);function me(u,m){switch(ee(Q,m),ee(re,u),ee(Y,null),m.nodeType){case 9:case 11:u=(u=m.documentElement)&&(u=u.namespaceURI)?f8(u):0;break;default:if(u=m.tagName,m=m.namespaceURI)m=f8(m),u=m8(m,u);else switch(u){case"svg":u=1;break;case"math":u=2;break;default:u=0}}B(Y),ee(Y,u)}function ie(){B(Y),B(re),B(Q)}function je(u){u.memoizedState!==null&&ee(Ce,u);var m=Y.current,v=m8(m,u.type);m!==v&&(ee(re,u),ee(Y,v))}function be(u){re.current===u&&(B(Y),B(re)),Ce.current===u&&(B(Ce),Xp._currentValue=ke)}var le,Ee;function Me(u){if(le===void 0)try{throw Error()}catch(v){var m=v.stack.trim().match(/\n( *(at )?)/);le=m&&m[1]||"",Ee=-1<v.stack.indexOf(`
    at`)?" (<anonymous>)":-1<v.stack.indexOf("@")?"@unknown:0:0":""}return`
`+le+u+Ee}var ye=!1;function at(u,m){if(!u||ye)return"";ye=!0;var v=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var C={DetermineComponentFrameRoot:function(){try{if(m){var er=function(){throw Error()};if(Object.defineProperty(er.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(er,[])}catch(It){var At=It}Reflect.construct(u,[],er)}else{try{er.call()}catch(It){At=It}u.call(er.prototype)}}else{try{throw Error()}catch(It){At=It}(er=u())&&typeof er.catch=="function"&&er.catch(function(){})}}catch(It){if(It&&At&&typeof It.stack=="string")return[It.stack,At.stack]}return[null,null]}};C.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var M=Object.getOwnPropertyDescriptor(C.DetermineComponentFrameRoot,"name");M&&M.configurable&&Object.defineProperty(C.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var V=C.DetermineComponentFrameRoot(),he=V[0],Re=V[1];if(he&&Re){var Qe=he.split(`
`),_t=Re.split(`
`);for(M=C=0;C<Qe.length&&!Qe[C].includes("DetermineComponentFrameRoot");)C++;for(;M<_t.length&&!_t[M].includes("DetermineComponentFrameRoot");)M++;if(C===Qe.length||M===_t.length)for(C=Qe.length-1,M=_t.length-1;1<=C&&0<=M&&Qe[C]!==_t[M];)M--;for(;1<=C&&0<=M;C--,M--)if(Qe[C]!==_t[M]){if(C!==1||M!==1)do if(C--,M--,0>M||Qe[C]!==_t[M]){var Ht=`
`+Qe[C].replace(" at new "," at ");return u.displayName&&Ht.includes("<anonymous>")&&(Ht=Ht.replace("<anonymous>",u.displayName)),Ht}while(1<=C&&0<=M);break}}}finally{ye=!1,Error.prepareStackTrace=v}return(v=u?u.displayName||u.name:"")?Me(v):""}function lt(u,m){switch(u.tag){case 26:case 27:case 5:return Me(u.type);case 16:return Me("Lazy");case 13:return u.child!==m&&m!==null?Me("Suspense Fallback"):Me("Suspense");case 19:return Me("SuspenseList");case 0:case 15:return at(u.type,!1);case 11:return at(u.type.render,!1);case 1:return at(u.type,!0);case 31:return Me("Activity");default:return""}}function ut(u){try{var m="",v=null;do m+=lt(u,v),v=u,u=u.return;while(u);return m}catch(C){return`
Error generating stack: `+C.message+`
`+C.stack}}var nt=Object.prototype.hasOwnProperty,ot=e.unstable_scheduleCallback,We=e.unstable_cancelCallback,Kt=e.unstable_shouldYield,Dt=e.unstable_requestPaint,fr=e.unstable_now,xr=e.unstable_getCurrentPriorityLevel,nr=e.unstable_ImmediatePriority,Mr=e.unstable_UserBlockingPriority,rr=e.unstable_NormalPriority,Gt=e.unstable_LowPriority,Vt=e.unstable_IdlePriority,cr=e.log,br=e.unstable_setDisableYieldValue,ar=null,xt=null;function yr(u){if(typeof cr=="function"&&br(u),xt&&typeof xt.setStrictMode=="function")try{xt.setStrictMode(ar,u)}catch{}}var Ge=Math.clz32?Math.clz32:Yt,vt=Math.log,$t=Math.LN2;function Yt(u){return u>>>=0,u===0?32:31-(vt(u)/$t|0)|0}var Er=256,wr=262144,Ke=4194304;function Et(u){var m=u&42;if(m!==0)return m;switch(u&-u){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return u&261888;case 262144:case 524288:case 1048576:case 2097152:return u&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return u&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return u}}function ur(u,m,v){var C=u.pendingLanes;if(C===0)return 0;var M=0,V=u.suspendedLanes,he=u.pingedLanes;u=u.warmLanes;var Re=C&134217727;return Re!==0?(C=Re&~V,C!==0?M=Et(C):(he&=Re,he!==0?M=Et(he):v||(v=Re&~u,v!==0&&(M=Et(v))))):(Re=C&~V,Re!==0?M=Et(Re):he!==0?M=Et(he):v||(v=C&~u,v!==0&&(M=Et(v)))),M===0?0:m!==0&&m!==M&&(m&V)===0&&(V=M&-M,v=m&-m,V>=v||V===32&&(v&4194048)!==0)?m:M}function Br(u,m){return(u.pendingLanes&~(u.suspendedLanes&~u.pingedLanes)&m)===0}function Tr(u,m){switch(u){case 1:case 2:case 4:case 8:case 64:return m+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return m+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Zt(){var u=Ke;return Ke<<=1,(Ke&62914560)===0&&(Ke=4194304),u}function Pr(u){for(var m=[],v=0;31>v;v++)m.push(u);return m}function sr(u,m){u.pendingLanes|=m,m!==268435456&&(u.suspendedLanes=0,u.pingedLanes=0,u.warmLanes=0)}function Or(u,m,v,C,M,V){var he=u.pendingLanes;u.pendingLanes=v,u.suspendedLanes=0,u.pingedLanes=0,u.warmLanes=0,u.expiredLanes&=v,u.entangledLanes&=v,u.errorRecoveryDisabledLanes&=v,u.shellSuspendCounter=0;var Re=u.entanglements,Qe=u.expirationTimes,_t=u.hiddenUpdates;for(v=he&~v;0<v;){var Ht=31-Ge(v),er=1<<Ht;Re[Ht]=0,Qe[Ht]=-1;var At=_t[Ht];if(At!==null)for(_t[Ht]=null,Ht=0;Ht<At.length;Ht++){var It=At[Ht];It!==null&&(It.lane&=-536870913)}v&=~er}C!==0&&qr(u,C,0),V!==0&&M===0&&u.tag!==0&&(u.suspendedLanes|=V&~(he&~m))}function qr(u,m,v){u.pendingLanes|=m,u.suspendedLanes&=~m;var C=31-Ge(m);u.entangledLanes|=m,u.entanglements[C]=u.entanglements[C]|1073741824|v&261930}function Lr(u,m){var v=u.entangledLanes|=m;for(u=u.entanglements;v;){var C=31-Ge(v),M=1<<C;M&m|u[C]&m&&(u[C]|=m),v&=~M}}function An(u,m){var v=m&-m;return v=(v&42)!==0?1:Ir(v),(v&(u.suspendedLanes|m))!==0?0:v}function Ir(u){switch(u){case 2:u=1;break;case 8:u=4;break;case 32:u=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:u=128;break;case 268435456:u=134217728;break;default:u=0}return u}function Nn(u){return u&=-u,2<u?8<u?(u&134217727)!==0?32:268435456:8:2}function we(){var u=fe.p;return u!==0?u:(u=window.event,u===void 0?32:R8(u.type))}function Ne(u,m){var v=fe.p;try{return fe.p=u,m()}finally{fe.p=v}}var De=Math.random().toString(36).slice(2),Ie="__reactFiber$"+De,oe="__reactProps$"+De,ne="__reactContainer$"+De,ze="__reactEvents$"+De,st="__reactListeners$"+De,Ze="__reactHandles$"+De,mt="__reactResources$"+De,ct="__reactMarker$"+De;function Rt(u){delete u[Ie],delete u[oe],delete u[ze],delete u[st],delete u[Ze]}function Xt(u){var m=u[Ie];if(m)return m;for(var v=u.parentNode;v;){if(m=v[ne]||v[Ie]){if(v=m.alternate,m.child!==null||v!==null&&v.child!==null)for(u=w8(u);u!==null;){if(v=u[Ie])return v;u=w8(u)}return m}u=v,v=u.parentNode}return null}function Jt(u){if(u=u[Ie]||u[ne]){var m=u.tag;if(m===5||m===6||m===13||m===31||m===26||m===27||m===3)return u}return null}function ir(u){var m=u.tag;if(m===5||m===26||m===27||m===6)return u.stateNode;throw Error(n(33))}function mr(u){var m=u[mt];return m||(m=u[mt]={hoistableStyles:new Map,hoistableScripts:new Map}),m}function Sr(u){u[ct]=!0}var Pt=new Set,Un={};function en(u,m){Na(u,m),Na(u+"Capture",m)}function Na(u,m){for(Un[u]=m,u=0;u<m.length;u++)Pt.add(m[u])}var Ci=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),tn={},an={};function On(u){return nt.call(an,u)?!0:nt.call(tn,u)?!1:Ci.test(u)?an[u]=!0:(tn[u]=!0,!1)}function ss(u,m,v){if(On(m))if(v===null)u.removeAttribute(m);else{switch(typeof v){case"undefined":case"function":case"symbol":u.removeAttribute(m);return;case"boolean":var C=m.toLowerCase().slice(0,5);if(C!=="data-"&&C!=="aria-"){u.removeAttribute(m);return}}u.setAttribute(m,""+v)}}function To(u,m,v){if(v===null)u.removeAttribute(m);else{switch(typeof v){case"undefined":case"function":case"symbol":case"boolean":u.removeAttribute(m);return}u.setAttribute(m,""+v)}}function cn(u,m,v,C){if(C===null)u.removeAttribute(v);else{switch(typeof C){case"undefined":case"function":case"symbol":case"boolean":u.removeAttribute(v);return}u.setAttributeNS(m,v,""+C)}}function ta(u){switch(typeof u){case"bigint":case"boolean":case"number":case"string":case"undefined":return u;case"object":return u;default:return""}}function rl(u){var m=u.type;return(u=u.nodeName)&&u.toLowerCase()==="input"&&(m==="checkbox"||m==="radio")}function lo(u,m,v){var C=Object.getOwnPropertyDescriptor(u.constructor.prototype,m);if(!u.hasOwnProperty(m)&&typeof C<"u"&&typeof C.get=="function"&&typeof C.set=="function"){var M=C.get,V=C.set;return Object.defineProperty(u,m,{configurable:!0,get:function(){return M.call(this)},set:function(he){v=""+he,V.call(this,he)}}),Object.defineProperty(u,m,{enumerable:C.enumerable}),{getValue:function(){return v},setValue:function(he){v=""+he},stopTracking:function(){u._valueTracker=null,delete u[m]}}}}function pa(u){if(!u._valueTracker){var m=rl(u)?"checked":"value";u._valueTracker=lo(u,m,""+u[m])}}function Je(u){if(!u)return!1;var m=u._valueTracker;if(!m)return!0;var v=m.getValue(),C="";return u&&(C=rl(u)?u.checked?"true":"false":u.value),u=C,u!==v?(m.setValue(u),!0):!1}function dr(u){if(u=u||(typeof document<"u"?document:void 0),typeof u>"u")return null;try{return u.activeElement||u.body}catch{return u.body}}var kr=/[\n"\\]/g;function pr(u){return u.replace(kr,function(m){return"\\"+m.charCodeAt(0).toString(16)+" "})}function dn(u,m,v,C,M,V,he,Re){u.name="",he!=null&&typeof he!="function"&&typeof he!="symbol"&&typeof he!="boolean"?u.type=he:u.removeAttribute("type"),m!=null?he==="number"?(m===0&&u.value===""||u.value!=m)&&(u.value=""+ta(m)):u.value!==""+ta(m)&&(u.value=""+ta(m)):he!=="submit"&&he!=="reset"||u.removeAttribute("value"),m!=null?Be(u,he,ta(m)):v!=null?Be(u,he,ta(v)):C!=null&&u.removeAttribute("value"),M==null&&V!=null&&(u.defaultChecked=!!V),M!=null&&(u.checked=M&&typeof M!="function"&&typeof M!="symbol"),Re!=null&&typeof Re!="function"&&typeof Re!="symbol"&&typeof Re!="boolean"?u.name=""+ta(Re):u.removeAttribute("name")}function ht(u,m,v,C,M,V,he,Re){if(V!=null&&typeof V!="function"&&typeof V!="symbol"&&typeof V!="boolean"&&(u.type=V),m!=null||v!=null){if(!(V!=="submit"&&V!=="reset"||m!=null)){pa(u);return}v=v!=null?""+ta(v):"",m=m!=null?""+ta(m):v,Re||m===u.value||(u.value=m),u.defaultValue=m}C=C??M,C=typeof C!="function"&&typeof C!="symbol"&&!!C,u.checked=Re?u.checked:!!C,u.defaultChecked=!!C,he!=null&&typeof he!="function"&&typeof he!="symbol"&&typeof he!="boolean"&&(u.name=he),pa(u)}function Be(u,m,v){m==="number"&&dr(u.ownerDocument)===u||u.defaultValue===""+v||(u.defaultValue=""+v)}function vr(u,m,v,C){if(u=u.options,m){m={};for(var M=0;M<v.length;M++)m["$"+v[M]]=!0;for(v=0;v<u.length;v++)M=m.hasOwnProperty("$"+u[v].value),u[v].selected!==M&&(u[v].selected=M),M&&C&&(u[v].defaultSelected=!0)}else{for(v=""+ta(v),m=null,M=0;M<u.length;M++){if(u[M].value===v){u[M].selected=!0,C&&(u[M].defaultSelected=!0);return}m!==null||u[M].disabled||(m=u[M])}m!==null&&(m.selected=!0)}}function Pn(u,m,v){if(m!=null&&(m=""+ta(m),m!==u.value&&(u.value=m),v==null)){u.defaultValue!==m&&(u.defaultValue=m);return}u.defaultValue=v!=null?""+ta(v):""}function za(u,m,v,C){if(m==null){if(C!=null){if(v!=null)throw Error(n(92));if(se(C)){if(1<C.length)throw Error(n(93));C=C[0]}v=C}v==null&&(v=""),m=v}v=ta(m),u.defaultValue=v,C=u.textContent,C===v&&C!==""&&C!==null&&(u.value=C),pa(u)}function is(u,m){if(m){var v=u.firstChild;if(v&&v===u.lastChild&&v.nodeType===3){v.nodeValue=m;return}}u.textContent=m}var Ai=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Qn(u,m,v){var C=m.indexOf("--")===0;v==null||typeof v=="boolean"||v===""?C?u.setProperty(m,""):m==="float"?u.cssFloat="":u[m]="":C?u.setProperty(m,v):typeof v!="number"||v===0||Ai.has(m)?m==="float"?u.cssFloat=v:u[m]=(""+v).trim():u[m]=v+"px"}function Dr(u,m,v){if(m!=null&&typeof m!="object")throw Error(n(62));if(u=u.style,v!=null){for(var C in v)!v.hasOwnProperty(C)||m!=null&&m.hasOwnProperty(C)||(C.indexOf("--")===0?u.setProperty(C,""):C==="float"?u.cssFloat="":u[C]="");for(var M in m)C=m[M],m.hasOwnProperty(M)&&v[M]!==C&&Qn(u,M,C)}else for(var V in m)m.hasOwnProperty(V)&&Qn(u,V,m[V])}function na(u){if(u.indexOf("-")===-1)return!1;switch(u){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var oo=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),wd=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function kl(u){return wd.test(""+u)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":u}function nl(){}var co=null;function kd(u){return u=u.target||u.srcElement||window,u.correspondingUseElement&&(u=u.correspondingUseElement),u.nodeType===3?u.parentNode:u}var Fr=null,Ll=null;function uo(u){var m=Jt(u);if(m&&(u=m.stateNode)){var v=u[oe]||null;e:switch(u=m.stateNode,m.type){case"input":if(dn(u,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name),m=v.name,v.type==="radio"&&m!=null){for(v=u;v.parentNode;)v=v.parentNode;for(v=v.querySelectorAll('input[name="'+pr(""+m)+'"][type="radio"]'),m=0;m<v.length;m++){var C=v[m];if(C!==u&&C.form===u.form){var M=C[oe]||null;if(!M)throw Error(n(90));dn(C,M.value,M.defaultValue,M.defaultValue,M.checked,M.defaultChecked,M.type,M.name)}}for(m=0;m<v.length;m++)C=v[m],C.form===u.form&&Je(C)}break e;case"textarea":Pn(u,v.value,v.defaultValue);break e;case"select":m=v.value,m!=null&&vr(u,!!v.multiple,m,!1)}}}var un=!1;function oh(u,m,v){if(un)return u(m,v);un=!0;try{var C=u(m);return C}finally{if(un=!1,(Fr!==null||Ll!==null)&&(Iv(),Fr&&(m=Fr,u=Ll,Ll=Fr=null,uo(m),u)))for(m=0;m<u.length;m++)uo(u[m])}}function hn(u,m){var v=u.stateNode;if(v===null)return null;var C=v[oe]||null;if(C===null)return null;v=C[m];e:switch(m){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(C=!C.disabled)||(u=u.type,C=!(u==="button"||u==="input"||u==="select"||u==="textarea")),u=!C;break e;default:u=!1}if(u)return null;if(v&&typeof v!="function")throw Error(n(231,m,typeof v));return v}var la=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Zu=!1;if(la)try{var ic={};Object.defineProperty(ic,"passive",{get:function(){Zu=!0}}),window.addEventListener("test",ic,ic),window.removeEventListener("test",ic,ic)}catch{Zu=!1}var al=null,Nl=null,Oo=null;function ho(){if(Oo)return Oo;var u,m=Nl,v=m.length,C,M="value"in al?al.value:al.textContent,V=M.length;for(u=0;u<v&&m[u]===M[u];u++);var he=v-u;for(C=1;C<=he&&m[v-C]===M[V-C];C++);return Oo=M.slice(u,1<C?1-C:void 0)}function _l(u){var m=u.keyCode;return"charCode"in u?(u=u.charCode,u===0&&m===13&&(u=13)):u=m,u===10&&(u=13),32<=u||u===13?u:0}function Po(){return!0}function Nd(){return!1}function ms(u){function m(v,C,M,V,he){this._reactName=v,this._targetInst=M,this.type=C,this.nativeEvent=V,this.target=he,this.currentTarget=null;for(var Re in u)u.hasOwnProperty(Re)&&(v=u[Re],this[Re]=v?v(V):V[Re]);return this.isDefaultPrevented=(V.defaultPrevented!=null?V.defaultPrevented:V.returnValue===!1)?Po:Nd,this.isPropagationStopped=Nd,this}return p(m.prototype,{preventDefault:function(){this.defaultPrevented=!0;var v=this.nativeEvent;v&&(v.preventDefault?v.preventDefault():typeof v.returnValue!="unknown"&&(v.returnValue=!1),this.isDefaultPrevented=Po)},stopPropagation:function(){var v=this.nativeEvent;v&&(v.stopPropagation?v.stopPropagation():typeof v.cancelBubble!="unknown"&&(v.cancelBubble=!0),this.isPropagationStopped=Po)},persist:function(){},isPersistent:Po}),m}var ui={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(u){return u.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ls=ms(ui),Io=p({},ui,{view:0,detail:0}),_d=ms(Io),Lc,lc,Rc,Sd=p({},Io,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kn,button:0,buttons:0,relatedTarget:function(u){return u.relatedTarget===void 0?u.fromElement===u.srcElement?u.toElement:u.fromElement:u.relatedTarget},movementX:function(u){return"movementX"in u?u.movementX:(u!==Rc&&(Rc&&u.type==="mousemove"?(Lc=u.screenX-Rc.screenX,lc=u.screenY-Rc.screenY):lc=Lc=0,Rc=u),Lc)},movementY:function(u){return"movementY"in u?u.movementY:lc}}),Gn=ms(Sd),Do=p({},Sd,{dataTransfer:0}),jd=ms(Do),fo=p({},Io,{relatedTarget:0}),oc=ms(fo),Tt=p({},ui,{animationName:0,elapsedTime:0,pseudoElement:0}),G=ms(Tt),ve=p({},ui,{clipboardData:function(u){return"clipboardData"in u?u.clipboardData:window.clipboardData}}),He=ms(ve),tt=p({},ui,{data:0}),gt=ms(tt),Ut={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},lr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Hr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cr(u){var m=this.nativeEvent;return m.getModifierState?m.getModifierState(u):(u=Hr[u])?!!m[u]:!1}function kn(){return Cr}var $r=p({},Io,{key:function(u){if(u.key){var m=Ut[u.key]||u.key;if(m!=="Unidentified")return m}return u.type==="keypress"?(u=_l(u),u===13?"Enter":String.fromCharCode(u)):u.type==="keydown"||u.type==="keyup"?lr[u.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kn,charCode:function(u){return u.type==="keypress"?_l(u):0},keyCode:function(u){return u.type==="keydown"||u.type==="keyup"?u.keyCode:0},which:function(u){return u.type==="keypress"?_l(u):u.type==="keydown"||u.type==="keyup"?u.keyCode:0}}),aa=ms($r),_a=p({},Sd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),jn=ms(_a),Ar=p({},Io,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kn}),qs=ms(Ar),In=p({},ui,{propertyName:0,elapsedTime:0,pseudoElement:0}),os=ms(In),hi=p({},Sd,{deltaX:function(u){return"deltaX"in u?u.deltaX:"wheelDeltaX"in u?-u.wheelDeltaX:0},deltaY:function(u){return"deltaY"in u?u.deltaY:"wheelDeltaY"in u?-u.wheelDeltaY:"wheelDelta"in u?-u.wheelDelta:0},deltaZ:0,deltaMode:0}),sl=ms(hi),Sl=p({},ui,{newState:0,oldState:0}),Fc=ms(Sl),Bc=[9,13,27,32],Rl=la&&"CompositionEvent"in window,Fl=null;la&&"documentMode"in document&&(Fl=document.documentMode);var Uc=la&&"TextEvent"in window&&!Fl,zc=la&&(!Rl||Fl&&8<Fl&&11>=Fl),xs=" ",Mo=!1;function qc(u,m){switch(u){case"keyup":return Bc.indexOf(m.keyCode)!==-1;case"keydown":return m.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Lo(u){return u=u.detail,typeof u=="object"&&"data"in u?u.data:null}var Ro=!1;function Sa(u,m){switch(u){case"compositionend":return Lo(m);case"keypress":return m.which!==32?null:(Mo=!0,xs);case"textInput":return u=m.data,u===xs&&Mo?null:u;default:return null}}function Bl(u,m){if(Ro)return u==="compositionend"||!Rl&&qc(u,m)?(u=ho(),Oo=Nl=al=null,Ro=!1,u):null;switch(u){case"paste":return null;case"keypress":if(!(m.ctrlKey||m.altKey||m.metaKey)||m.ctrlKey&&m.altKey){if(m.char&&1<m.char.length)return m.char;if(m.which)return String.fromCharCode(m.which)}return null;case"compositionend":return zc&&m.locale!=="ko"?null:m.data;default:return null}}var fi={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function iu(u){var m=u&&u.nodeName&&u.nodeName.toLowerCase();return m==="input"?!!fi[u.type]:m==="textarea"}function ps(u,m,v,C){Fr?Ll?Ll.push(C):Ll=[C]:Fr=C,m=Uv(m,"onChange"),0<m.length&&(v=new ls("onChange","change",null,v,C),u.push({event:v,listeners:m}))}var mo=null,xo=null;function Qu(u){l8(u,0)}function Ul(u){var m=ir(u);if(Je(m))return u}function mi(u,m){if(u==="change")return m}var il=!1;if(la){var xi;if(la){var ll="oninput"in document;if(!ll){var zn=document.createElement("div");zn.setAttribute("oninput","return;"),ll=typeof zn.oninput=="function"}xi=ll}else xi=!1;il=xi&&(!document.documentMode||9<document.documentMode)}function zl(){mo&&(mo.detachEvent("onpropertychange",pe),xo=mo=null)}function pe(u){if(u.propertyName==="value"&&Ul(xo)){var m=[];ps(m,xo,u,kd(u)),oh(Qu,m)}}function h(u,m,v){u==="focusin"?(zl(),mo=m,xo=v,mo.attachEvent("onpropertychange",pe)):u==="focusout"&&zl()}function x(u){if(u==="selectionchange"||u==="keyup"||u==="keydown")return Ul(xo)}function b(u,m){if(u==="click")return Ul(m)}function _(u,m){if(u==="input"||u==="change")return Ul(m)}function j(u,m){return u===m&&(u!==0||1/u===1/m)||u!==u&&m!==m}var A=typeof Object.is=="function"?Object.is:j;function I(u,m){if(A(u,m))return!0;if(typeof u!="object"||u===null||typeof m!="object"||m===null)return!1;var v=Object.keys(u),C=Object.keys(m);if(v.length!==C.length)return!1;for(C=0;C<v.length;C++){var M=v[C];if(!nt.call(m,M)||!A(u[M],m[M]))return!1}return!0}function F(u){for(;u&&u.firstChild;)u=u.firstChild;return u}function X(u,m){var v=F(u);u=0;for(var C;v;){if(v.nodeType===3){if(C=u+v.textContent.length,u<=m&&C>=m)return{node:v,offset:m-u};u=C}e:{for(;v;){if(v.nextSibling){v=v.nextSibling;break e}v=v.parentNode}v=void 0}v=F(v)}}function ce(u,m){return u&&m?u===m?!0:u&&u.nodeType===3?!1:m&&m.nodeType===3?ce(u,m.parentNode):"contains"in u?u.contains(m):u.compareDocumentPosition?!!(u.compareDocumentPosition(m)&16):!1:!1}function ge(u){u=u!=null&&u.ownerDocument!=null&&u.ownerDocument.defaultView!=null?u.ownerDocument.defaultView:window;for(var m=dr(u.document);m instanceof u.HTMLIFrameElement;){try{var v=typeof m.contentWindow.location.href=="string"}catch{v=!1}if(v)u=m.contentWindow;else break;m=dr(u.document)}return m}function Ae(u){var m=u&&u.nodeName&&u.nodeName.toLowerCase();return m&&(m==="input"&&(u.type==="text"||u.type==="search"||u.type==="tel"||u.type==="url"||u.type==="password")||m==="textarea"||u.contentEditable==="true")}var qe=la&&"documentMode"in document&&11>=document.documentMode,Ye=null,rt=null,pt=null,St=!1;function zt(u,m,v){var C=v.window===v?v.document:v.nodeType===9?v:v.ownerDocument;St||Ye==null||Ye!==dr(C)||(C=Ye,"selectionStart"in C&&Ae(C)?C={start:C.selectionStart,end:C.selectionEnd}:(C=(C.ownerDocument&&C.ownerDocument.defaultView||window).getSelection(),C={anchorNode:C.anchorNode,anchorOffset:C.anchorOffset,focusNode:C.focusNode,focusOffset:C.focusOffset}),pt&&I(pt,C)||(pt=C,C=Uv(rt,"onSelect"),0<C.length&&(m=new ls("onSelect","select",null,m,v),u.push({event:m,listeners:C}),m.target=Ye)))}function qt(u,m){var v={};return v[u.toLowerCase()]=m.toLowerCase(),v["Webkit"+u]="webkit"+m,v["Moz"+u]="moz"+m,v}var Ft={animationend:qt("Animation","AnimationEnd"),animationiteration:qt("Animation","AnimationIteration"),animationstart:qt("Animation","AnimationStart"),transitionrun:qt("Transition","TransitionRun"),transitionstart:qt("Transition","TransitionStart"),transitioncancel:qt("Transition","TransitionCancel"),transitionend:qt("Transition","TransitionEnd")},sn={},gn={};la&&(gn=document.createElement("div").style,"AnimationEvent"in window||(delete Ft.animationend.animation,delete Ft.animationiteration.animation,delete Ft.animationstart.animation),"TransitionEvent"in window||delete Ft.transitionend.transition);function Ya(u){if(sn[u])return sn[u];if(!Ft[u])return u;var m=Ft[u],v;for(v in m)if(m.hasOwnProperty(v)&&v in gn)return sn[u]=m[v];return u}var pi=Ya("animationend"),Xs=Ya("animationiteration"),ja=Ya("animationstart"),Ys=Ya("transitionrun"),ol=Ya("transitionstart"),Cd=Ya("transitioncancel"),Hc=Ya("transitionend"),kf=new Map,Ad="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ad.push("scrollEnd");function Fo(u,m){kf.set(u,m),en(m,[u])}var Nf=typeof reportError=="function"?reportError:function(u){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var m=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof u=="object"&&u!==null&&typeof u.message=="string"?String(u.message):String(u),error:u});if(!window.dispatchEvent(m))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",u);return}console.error(u)},po=[],Ju=0,ox=0;function _f(){for(var u=Ju,m=ox=Ju=0;m<u;){var v=po[m];po[m++]=null;var C=po[m];po[m++]=null;var M=po[m];po[m++]=null;var V=po[m];if(po[m++]=null,C!==null&&M!==null){var he=C.pending;he===null?M.next=M:(M.next=he.next,he.next=M),C.pending=M}V!==0&&jf(v,M,V)}}function Sf(u,m,v,C){po[Ju++]=u,po[Ju++]=m,po[Ju++]=v,po[Ju++]=C,ox|=C,u.lanes|=C,u=u.alternate,u!==null&&(u.lanes|=C)}function cx(u,m,v,C){return Sf(u,m,v,C),cl(u)}function Ed(u,m){return Sf(u,null,null,m),cl(u)}function jf(u,m,v){u.lanes|=v;var C=u.alternate;C!==null&&(C.lanes|=v);for(var M=!1,V=u.return;V!==null;)V.childLanes|=v,C=V.alternate,C!==null&&(C.childLanes|=v),V.tag===22&&(u=V.stateNode,u===null||u._visibility&1||(M=!0)),u=V,V=V.return;return u.tag===3?(V=u.stateNode,M&&m!==null&&(M=31-Ge(v),u=V.hiddenUpdates,C=u[M],C===null?u[M]=[m]:C.push(m),m.lane=v|536870912),V):null}function cl(u){if(50<qp)throw qp=0,A5=null,Error(n(185));for(var m=u.return;m!==null;)u=m,m=u.return;return u.tag===3?u.stateNode:null}var Ui={};function dx(u,m,v,C){this.tag=u,this.key=v,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=m,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=C,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function dl(u,m,v,C){return new dx(u,m,v,C)}function ux(u){return u=u.prototype,!(!u||!u.isReactComponent)}function Bo(u,m){var v=u.alternate;return v===null?(v=dl(u.tag,m,u.key,u.mode),v.elementType=u.elementType,v.type=u.type,v.stateNode=u.stateNode,v.alternate=u,u.alternate=v):(v.pendingProps=m,v.type=u.type,v.flags=0,v.subtreeFlags=0,v.deletions=null),v.flags=u.flags&65011712,v.childLanes=u.childLanes,v.lanes=u.lanes,v.child=u.child,v.memoizedProps=u.memoizedProps,v.memoizedState=u.memoizedState,v.updateQueue=u.updateQueue,m=u.dependencies,v.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext},v.sibling=u.sibling,v.index=u.index,v.ref=u.ref,v.refCleanup=u.refCleanup,v}function Cf(u,m){u.flags&=65011714;var v=u.alternate;return v===null?(u.childLanes=0,u.lanes=m,u.child=null,u.subtreeFlags=0,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=v.childLanes,u.lanes=v.lanes,u.child=v.child,u.subtreeFlags=0,u.deletions=null,u.memoizedProps=v.memoizedProps,u.memoizedState=v.memoizedState,u.updateQueue=v.updateQueue,u.type=v.type,m=v.dependencies,u.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext}),u}function ch(u,m,v,C,M,V){var he=0;if(C=u,typeof u=="function")ux(u)&&(he=1);else if(typeof u=="string")he=KK(u,v,Y.current)?26:u==="html"||u==="head"||u==="body"?27:5;else e:switch(u){case z:return u=dl(31,v,m,M),u.elementType=z,u.lanes=V,u;case w:return lu(v.children,M,V,m);case k:he=8,M|=24;break;case S:return u=dl(12,v,m,M|2),u.elementType=S,u.lanes=V,u;case q:return u=dl(13,v,m,M),u.elementType=q,u.lanes=V,u;case W:return u=dl(19,v,m,M),u.elementType=W,u.lanes=V,u;default:if(typeof u=="object"&&u!==null)switch(u.$$typeof){case E:he=10;break e;case O:he=9;break e;case D:he=11;break e;case R:he=14;break e;case U:he=16,C=null;break e}he=29,v=Error(n(130,u===null?"null":typeof u,"")),C=null}return m=dl(he,v,m,M),m.elementType=u,m.type=C,m.lanes=V,m}function lu(u,m,v,C){return u=dl(7,u,C,m),u.lanes=v,u}function Af(u,m,v){return u=dl(6,u,null,m),u.lanes=v,u}function hx(u){var m=dl(18,null,null,0);return m.stateNode=u,m}function dh(u,m,v){return m=dl(4,u.children!==null?u.children:[],u.key,m),m.lanes=v,m.stateNode={containerInfo:u.containerInfo,pendingChildren:null,implementation:u.implementation},m}var fx=new WeakMap;function Uo(u,m){if(typeof u=="object"&&u!==null){var v=fx.get(u);return v!==void 0?v:(m={value:u,source:m,stack:ut(m)},fx.set(u,m),m)}return{value:u,source:m,stack:ut(m)}}var uh=[],e0=0,mx=null,Ef=0,zo=[],qo=0,ou=null,Ho=1,$o="";function go(u,m){uh[e0++]=Ef,uh[e0++]=mx,mx=u,Ef=m}function hv(u,m,v){zo[qo++]=Ho,zo[qo++]=$o,zo[qo++]=ou,ou=u;var C=Ho;u=$o;var M=32-Ge(C)-1;C&=~(1<<M),v+=1;var V=32-Ge(m)+M;if(30<V){var he=M-M%5;V=(C&(1<<he)-1).toString(32),C>>=he,M-=he,Ho=1<<32-Ge(m)+M|v<<M|C,$o=V+u}else Ho=1<<V|v<<M|C,$o=u}function wp(u){u.return!==null&&(go(u,1),hv(u,1,0))}function xx(u){for(;u===mx;)mx=uh[--e0],uh[e0]=null,Ef=uh[--e0],uh[e0]=null;for(;u===ou;)ou=zo[--qo],zo[qo]=null,$o=zo[--qo],zo[qo]=null,Ho=zo[--qo],zo[qo]=null}function fv(u,m){zo[qo++]=Ho,zo[qo++]=$o,zo[qo++]=ou,Ho=m.id,$o=m.overflow,ou=u}var zi=null,cs=null,oa=!1,jl=null,Os=!1,cc=Error(n(519));function cu(u){var m=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw hh(Uo(m,u)),cc}function kp(u){var m=u.stateNode,v=u.type,C=u.memoizedProps;switch(m[Ie]=u,m[oe]=C,v){case"dialog":da("cancel",m),da("close",m);break;case"iframe":case"object":case"embed":da("load",m);break;case"video":case"audio":for(v=0;v<$p.length;v++)da($p[v],m);break;case"source":da("error",m);break;case"img":case"image":case"link":da("error",m),da("load",m);break;case"details":da("toggle",m);break;case"input":da("invalid",m),ht(m,C.value,C.defaultValue,C.checked,C.defaultChecked,C.type,C.name,!0);break;case"select":da("invalid",m);break;case"textarea":da("invalid",m),za(m,C.value,C.defaultValue,C.children)}v=C.children,typeof v!="string"&&typeof v!="number"&&typeof v!="bigint"||m.textContent===""+v||C.suppressHydrationWarning===!0||u8(m.textContent,v)?(C.popover!=null&&(da("beforetoggle",m),da("toggle",m)),C.onScroll!=null&&da("scroll",m),C.onScrollEnd!=null&&da("scrollend",m),C.onClick!=null&&(m.onclick=nl),m=!0):m=!1,m||cu(u,!0)}function Td(u){for(zi=u.return;zi;)switch(zi.tag){case 5:case 31:case 13:Os=!1;return;case 27:case 3:Os=!0;return;default:zi=zi.return}}function qi(u){if(u!==zi)return!1;if(!oa)return Td(u),oa=!0,!1;var m=u.tag,v;if((v=m!==3&&m!==27)&&((v=m===5)&&(v=u.type,v=!(v!=="form"&&v!=="button")||H5(u.type,u.memoizedProps)),v=!v),v&&cs&&cu(u),Td(u),m===13){if(u=u.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(n(317));cs=y8(u)}else if(m===31){if(u=u.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(n(317));cs=y8(u)}else m===27?(m=cs,jh(u.type)?(u=G5,G5=null,cs=u):cs=m):cs=zi?Kc(u.stateNode.nextSibling):null;return!0}function t0(){cs=zi=null,oa=!1}function Np(){var u=jl;return u!==null&&(Yo===null?Yo=u:Yo.push.apply(Yo,u),jl=null),u}function hh(u){jl===null?jl=[u]:jl.push(u)}var px=xe(null),du=null,$c=null;function uu(u,m,v){ee(px,m._currentValue),m._currentValue=v}function Vo(u){u._currentValue=px.current,B(px)}function fh(u,m,v){for(;u!==null;){var C=u.alternate;if((u.childLanes&m)!==m?(u.childLanes|=m,C!==null&&(C.childLanes|=m)):C!==null&&(C.childLanes&m)!==m&&(C.childLanes|=m),u===v)break;u=u.return}}function r0(u,m,v,C){var M=u.child;for(M!==null&&(M.return=u);M!==null;){var V=M.dependencies;if(V!==null){var he=M.child;V=V.firstContext;e:for(;V!==null;){var Re=V;V=M;for(var Qe=0;Qe<m.length;Qe++)if(Re.context===m[Qe]){V.lanes|=v,Re=V.alternate,Re!==null&&(Re.lanes|=v),fh(V.return,v,u),C||(he=null);break e}V=Re.next}}else if(M.tag===18){if(he=M.return,he===null)throw Error(n(341));he.lanes|=v,V=he.alternate,V!==null&&(V.lanes|=v),fh(he,v,u),he=null}else he=M.child;if(he!==null)he.return=M;else for(he=M;he!==null;){if(he===u){he=null;break}if(M=he.sibling,M!==null){M.return=he.return,he=M;break}he=he.return}M=he}}function hu(u,m,v,C){u=null;for(var M=m,V=!1;M!==null;){if(!V){if((M.flags&524288)!==0)V=!0;else if((M.flags&262144)!==0)break}if(M.tag===10){var he=M.alternate;if(he===null)throw Error(n(387));if(he=he.memoizedProps,he!==null){var Re=M.type;A(M.pendingProps.value,he.value)||(u!==null?u.push(Re):u=[Re])}}else if(M===Ce.current){if(he=M.alternate,he===null)throw Error(n(387));he.memoizedState.memoizedState!==M.memoizedState.memoizedState&&(u!==null?u.push(Xp):u=[Xp])}M=M.return}u!==null&&r0(m,u,v,C),m.flags|=262144}function gx(u){for(u=u.firstContext;u!==null;){if(!A(u.context._currentValue,u.memoizedValue))return!0;u=u.next}return!1}function fu(u){du=u,$c=null,u=u.dependencies,u!==null&&(u.firstContext=null)}function Hi(u){return mv(du,u)}function bx(u,m){return du===null&&fu(u),mv(u,m)}function mv(u,m){var v=m._currentValue;if(m={context:m,memoizedValue:v,next:null},$c===null){if(u===null)throw Error(n(308));$c=m,u.dependencies={lanes:0,firstContext:m},u.flags|=524288}else $c=$c.next=m;return v}var Kk=typeof AbortController<"u"?AbortController:function(){var u=[],m=this.signal={aborted:!1,addEventListener:function(v,C){u.push(C)}};this.abort=function(){m.aborted=!0,u.forEach(function(v){return v()})}},Gk=e.unstable_scheduleCallback,Xk=e.unstable_NormalPriority,Hs={$$typeof:E,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function mh(){return{controller:new Kk,data:new Map,refCount:0}}function Tf(u){u.refCount--,u.refCount===0&&Gk(Xk,function(){u.controller.abort()})}var Of=null,vx=0,P=0,L=null;function te(u,m){if(Of===null){var v=Of=[];vx=0,P=D5(),L={status:"pending",value:void 0,then:function(C){v.push(C)}}}return vx++,m.then(de,de),m}function de(){if(--vx===0&&Of!==null){L!==null&&(L.status="fulfilled");var u=Of;Of=null,P=0,L=null;for(var m=0;m<u.length;m++)(0,u[m])()}}function Se(u,m){var v=[],C={status:"pending",value:null,reason:null,then:function(M){v.push(M)}};return u.then(function(){C.status="fulfilled",C.value=m;for(var M=0;M<v.length;M++)(0,v[M])(m)},function(M){for(C.status="rejected",C.reason=M,M=0;M<v.length;M++)(0,v[M])(void 0)}),C}var Te=ue.S;ue.S=function(u,m){ME=fr(),typeof m=="object"&&m!==null&&typeof m.then=="function"&&te(u,m),Te!==null&&Te(u,m)};var Pe=xe(null);function Fe(){var u=Pe.current;return u!==null?u:us.pooledCache}function Ue(u,m){m===null?ee(Pe,Pe.current):ee(Pe,m.pool)}function Ve(){var u=Fe();return u===null?null:{parent:Hs._currentValue,pool:u}}var it=Error(n(460)),kt=Error(n(474)),$e=Error(n(542)),ft={then:function(){}};function yt(u){return u=u.status,u==="fulfilled"||u==="rejected"}function Lt(u,m,v){switch(v=u[v],v===void 0?u.push(m):v!==m&&(m.then(nl,nl),m=v),m.status){case"fulfilled":return m.value;case"rejected":throw u=m.reason,hr(u),u;default:if(typeof m.status=="string")m.then(nl,nl);else{if(u=us,u!==null&&100<u.shellSuspendCounter)throw Error(n(482));u=m,u.status="pending",u.then(function(C){if(m.status==="pending"){var M=m;M.status="fulfilled",M.value=C}},function(C){if(m.status==="pending"){var M=m;M.status="rejected",M.reason=C}})}switch(m.status){case"fulfilled":return m.value;case"rejected":throw u=m.reason,hr(u),u}throw Mt=m,it}}function wt(u){try{var m=u._init;return m(u._payload)}catch(v){throw v!==null&&typeof v=="object"&&typeof v.then=="function"?(Mt=v,it):v}}var Mt=null;function Wt(){if(Mt===null)throw Error(n(459));var u=Mt;return Mt=null,u}function hr(u){if(u===it||u===$e)throw Error(n(483))}var tr=null,Xr=0;function Ur(u){var m=Xr;return Xr+=1,tr===null&&(tr=[]),Lt(tr,u,m)}function Rn(u,m){m=m.props.ref,u.ref=m!==void 0?m:null}function Wr(u,m){throw m.$$typeof===y?Error(n(525)):(u=Object.prototype.toString.call(m),Error(n(31,u==="[object Object]"?"object with keys {"+Object.keys(m).join(", ")+"}":u)))}function sa(u){function m(bt,dt){if(u){var Nt=bt.deletions;Nt===null?(bt.deletions=[dt],bt.flags|=16):Nt.push(dt)}}function v(bt,dt){if(!u)return null;for(;dt!==null;)m(bt,dt),dt=dt.sibling;return null}function C(bt){for(var dt=new Map;bt!==null;)bt.key!==null?dt.set(bt.key,bt):dt.set(bt.index,bt),bt=bt.sibling;return dt}function M(bt,dt){return bt=Bo(bt,dt),bt.index=0,bt.sibling=null,bt}function V(bt,dt,Nt){return bt.index=Nt,u?(Nt=bt.alternate,Nt!==null?(Nt=Nt.index,Nt<dt?(bt.flags|=67108866,dt):Nt):(bt.flags|=67108866,dt)):(bt.flags|=1048576,dt)}function he(bt){return u&&bt.alternate===null&&(bt.flags|=67108866),bt}function Re(bt,dt,Nt,Qt){return dt===null||dt.tag!==6?(dt=Af(Nt,bt.mode,Qt),dt.return=bt,dt):(dt=M(dt,Nt),dt.return=bt,dt)}function Qe(bt,dt,Nt,Qt){var vn=Nt.type;return vn===w?Ht(bt,dt,Nt.props.children,Qt,Nt.key):dt!==null&&(dt.elementType===vn||typeof vn=="object"&&vn!==null&&vn.$$typeof===U&&wt(vn)===dt.type)?(dt=M(dt,Nt.props),Rn(dt,Nt),dt.return=bt,dt):(dt=ch(Nt.type,Nt.key,Nt.props,null,bt.mode,Qt),Rn(dt,Nt),dt.return=bt,dt)}function _t(bt,dt,Nt,Qt){return dt===null||dt.tag!==4||dt.stateNode.containerInfo!==Nt.containerInfo||dt.stateNode.implementation!==Nt.implementation?(dt=dh(Nt,bt.mode,Qt),dt.return=bt,dt):(dt=M(dt,Nt.children||[]),dt.return=bt,dt)}function Ht(bt,dt,Nt,Qt,vn){return dt===null||dt.tag!==7?(dt=lu(Nt,bt.mode,Qt,vn),dt.return=bt,dt):(dt=M(dt,Nt),dt.return=bt,dt)}function er(bt,dt,Nt){if(typeof dt=="string"&&dt!==""||typeof dt=="number"||typeof dt=="bigint")return dt=Af(""+dt,bt.mode,Nt),dt.return=bt,dt;if(typeof dt=="object"&&dt!==null){switch(dt.$$typeof){case g:return Nt=ch(dt.type,dt.key,dt.props,null,bt.mode,Nt),Rn(Nt,dt),Nt.return=bt,Nt;case N:return dt=dh(dt,bt.mode,Nt),dt.return=bt,dt;case U:return dt=wt(dt),er(bt,dt,Nt)}if(se(dt)||K(dt))return dt=lu(dt,bt.mode,Nt,null),dt.return=bt,dt;if(typeof dt.then=="function")return er(bt,Ur(dt),Nt);if(dt.$$typeof===E)return er(bt,bx(bt,dt),Nt);Wr(bt,dt)}return null}function At(bt,dt,Nt,Qt){var vn=dt!==null?dt.key:null;if(typeof Nt=="string"&&Nt!==""||typeof Nt=="number"||typeof Nt=="bigint")return vn!==null?null:Re(bt,dt,""+Nt,Qt);if(typeof Nt=="object"&&Nt!==null){switch(Nt.$$typeof){case g:return Nt.key===vn?Qe(bt,dt,Nt,Qt):null;case N:return Nt.key===vn?_t(bt,dt,Nt,Qt):null;case U:return Nt=wt(Nt),At(bt,dt,Nt,Qt)}if(se(Nt)||K(Nt))return vn!==null?null:Ht(bt,dt,Nt,Qt,null);if(typeof Nt.then=="function")return At(bt,dt,Ur(Nt),Qt);if(Nt.$$typeof===E)return At(bt,dt,bx(bt,Nt),Qt);Wr(bt,Nt)}return null}function It(bt,dt,Nt,Qt,vn){if(typeof Qt=="string"&&Qt!==""||typeof Qt=="number"||typeof Qt=="bigint")return bt=bt.get(Nt)||null,Re(dt,bt,""+Qt,vn);if(typeof Qt=="object"&&Qt!==null){switch(Qt.$$typeof){case g:return bt=bt.get(Qt.key===null?Nt:Qt.key)||null,Qe(dt,bt,Qt,vn);case N:return bt=bt.get(Qt.key===null?Nt:Qt.key)||null,_t(dt,bt,Qt,vn);case U:return Qt=wt(Qt),It(bt,dt,Nt,Qt,vn)}if(se(Qt)||K(Qt))return bt=bt.get(Nt)||null,Ht(dt,bt,Qt,vn,null);if(typeof Qt.then=="function")return It(bt,dt,Nt,Ur(Qt),vn);if(Qt.$$typeof===E)return It(bt,dt,Nt,bx(dt,Qt),vn);Wr(dt,Qt)}return null}function Gr(bt,dt,Nt,Qt){for(var vn=null,Oa=null,rn=dt,Xn=dt=0,xa=null;rn!==null&&Xn<Nt.length;Xn++){rn.index>Xn?(xa=rn,rn=null):xa=rn.sibling;var Pa=At(bt,rn,Nt[Xn],Qt);if(Pa===null){rn===null&&(rn=xa);break}u&&rn&&Pa.alternate===null&&m(bt,rn),dt=V(Pa,dt,Xn),Oa===null?vn=Pa:Oa.sibling=Pa,Oa=Pa,rn=xa}if(Xn===Nt.length)return v(bt,rn),oa&&go(bt,Xn),vn;if(rn===null){for(;Xn<Nt.length;Xn++)rn=er(bt,Nt[Xn],Qt),rn!==null&&(dt=V(rn,dt,Xn),Oa===null?vn=rn:Oa.sibling=rn,Oa=rn);return oa&&go(bt,Xn),vn}for(rn=C(rn);Xn<Nt.length;Xn++)xa=It(rn,bt,Xn,Nt[Xn],Qt),xa!==null&&(u&&xa.alternate!==null&&rn.delete(xa.key===null?Xn:xa.key),dt=V(xa,dt,Xn),Oa===null?vn=xa:Oa.sibling=xa,Oa=xa);return u&&rn.forEach(function(Oh){return m(bt,Oh)}),oa&&go(bt,Xn),vn}function Cn(bt,dt,Nt,Qt){if(Nt==null)throw Error(n(151));for(var vn=null,Oa=null,rn=dt,Xn=dt=0,xa=null,Pa=Nt.next();rn!==null&&!Pa.done;Xn++,Pa=Nt.next()){rn.index>Xn?(xa=rn,rn=null):xa=rn.sibling;var Oh=At(bt,rn,Pa.value,Qt);if(Oh===null){rn===null&&(rn=xa);break}u&&rn&&Oh.alternate===null&&m(bt,rn),dt=V(Oh,dt,Xn),Oa===null?vn=Oh:Oa.sibling=Oh,Oa=Oh,rn=xa}if(Pa.done)return v(bt,rn),oa&&go(bt,Xn),vn;if(rn===null){for(;!Pa.done;Xn++,Pa=Nt.next())Pa=er(bt,Pa.value,Qt),Pa!==null&&(dt=V(Pa,dt,Xn),Oa===null?vn=Pa:Oa.sibling=Pa,Oa=Pa);return oa&&go(bt,Xn),vn}for(rn=C(rn);!Pa.done;Xn++,Pa=Nt.next())Pa=It(rn,bt,Xn,Pa.value,Qt),Pa!==null&&(u&&Pa.alternate!==null&&rn.delete(Pa.key===null?Xn:Pa.key),dt=V(Pa,dt,Xn),Oa===null?vn=Pa:Oa.sibling=Pa,Oa=Pa);return u&&rn.forEach(function(aG){return m(bt,aG)}),oa&&go(bt,Xn),vn}function es(bt,dt,Nt,Qt){if(typeof Nt=="object"&&Nt!==null&&Nt.type===w&&Nt.key===null&&(Nt=Nt.props.children),typeof Nt=="object"&&Nt!==null){switch(Nt.$$typeof){case g:e:{for(var vn=Nt.key;dt!==null;){if(dt.key===vn){if(vn=Nt.type,vn===w){if(dt.tag===7){v(bt,dt.sibling),Qt=M(dt,Nt.props.children),Qt.return=bt,bt=Qt;break e}}else if(dt.elementType===vn||typeof vn=="object"&&vn!==null&&vn.$$typeof===U&&wt(vn)===dt.type){v(bt,dt.sibling),Qt=M(dt,Nt.props),Rn(Qt,Nt),Qt.return=bt,bt=Qt;break e}v(bt,dt);break}else m(bt,dt);dt=dt.sibling}Nt.type===w?(Qt=lu(Nt.props.children,bt.mode,Qt,Nt.key),Qt.return=bt,bt=Qt):(Qt=ch(Nt.type,Nt.key,Nt.props,null,bt.mode,Qt),Rn(Qt,Nt),Qt.return=bt,bt=Qt)}return he(bt);case N:e:{for(vn=Nt.key;dt!==null;){if(dt.key===vn)if(dt.tag===4&&dt.stateNode.containerInfo===Nt.containerInfo&&dt.stateNode.implementation===Nt.implementation){v(bt,dt.sibling),Qt=M(dt,Nt.children||[]),Qt.return=bt,bt=Qt;break e}else{v(bt,dt);break}else m(bt,dt);dt=dt.sibling}Qt=dh(Nt,bt.mode,Qt),Qt.return=bt,bt=Qt}return he(bt);case U:return Nt=wt(Nt),es(bt,dt,Nt,Qt)}if(se(Nt))return Gr(bt,dt,Nt,Qt);if(K(Nt)){if(vn=K(Nt),typeof vn!="function")throw Error(n(150));return Nt=vn.call(Nt),Cn(bt,dt,Nt,Qt)}if(typeof Nt.then=="function")return es(bt,dt,Ur(Nt),Qt);if(Nt.$$typeof===E)return es(bt,dt,bx(bt,Nt),Qt);Wr(bt,Nt)}return typeof Nt=="string"&&Nt!==""||typeof Nt=="number"||typeof Nt=="bigint"?(Nt=""+Nt,dt!==null&&dt.tag===6?(v(bt,dt.sibling),Qt=M(dt,Nt),Qt.return=bt,bt=Qt):(v(bt,dt),Qt=Af(Nt,bt.mode,Qt),Qt.return=bt,bt=Qt),he(bt)):v(bt,dt)}return function(bt,dt,Nt,Qt){try{Xr=0;var vn=es(bt,dt,Nt,Qt);return tr=null,vn}catch(rn){if(rn===it||rn===$e)throw rn;var Oa=dl(29,rn,null,bt.mode);return Oa.lanes=Qt,Oa.return=bt,Oa}finally{}}}var ds=sa(!0),Hn=sa(!1),zr=!1;function jr(u){u.updateQueue={baseState:u.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function vs(u,m){u=u.updateQueue,m.updateQueue===u&&(m.updateQueue={baseState:u.baseState,firstBaseUpdate:u.firstBaseUpdate,lastBaseUpdate:u.lastBaseUpdate,shared:u.shared,callbacks:null})}function Sn(u){return{lane:u,tag:0,payload:null,callback:null,next:null}}function Wn(u,m,v){var C=u.updateQueue;if(C===null)return null;if(C=C.shared,(Fa&2)!==0){var M=C.pending;return M===null?m.next=m:(m.next=M.next,M.next=m),C.pending=m,m=cl(u),jf(u,null,v),m}return Sf(u,C,m,v),cl(u)}function La(u,m,v){if(m=m.updateQueue,m!==null&&(m=m.shared,(v&4194048)!==0)){var C=m.lanes;C&=u.pendingLanes,v|=C,m.lanes=v,Lr(u,v)}}function gi(u,m){var v=u.updateQueue,C=u.alternate;if(C!==null&&(C=C.updateQueue,v===C)){var M=null,V=null;if(v=v.firstBaseUpdate,v!==null){do{var he={lane:v.lane,tag:v.tag,payload:v.payload,callback:null,next:null};V===null?M=V=he:V=V.next=he,v=v.next}while(v!==null);V===null?M=V=m:V=V.next=m}else M=V=m;v={baseState:C.baseState,firstBaseUpdate:M,lastBaseUpdate:V,shared:C.shared,callbacks:C.callbacks},u.updateQueue=v;return}u=v.lastBaseUpdate,u===null?v.firstBaseUpdate=m:u.next=m,v.lastBaseUpdate=m}var $i=!1;function Za(){if($i){var u=L;if(u!==null)throw u}}function Zs(u,m,v,C){$i=!1;var M=u.updateQueue;zr=!1;var V=M.firstBaseUpdate,he=M.lastBaseUpdate,Re=M.shared.pending;if(Re!==null){M.shared.pending=null;var Qe=Re,_t=Qe.next;Qe.next=null,he===null?V=_t:he.next=_t,he=Qe;var Ht=u.alternate;Ht!==null&&(Ht=Ht.updateQueue,Re=Ht.lastBaseUpdate,Re!==he&&(Re===null?Ht.firstBaseUpdate=_t:Re.next=_t,Ht.lastBaseUpdate=Qe))}if(V!==null){var er=M.baseState;he=0,Ht=_t=Qe=null,Re=V;do{var At=Re.lane&-536870913,It=At!==Re.lane;if(It?(ma&At)===At:(C&At)===At){At!==0&&At===P&&($i=!0),Ht!==null&&(Ht=Ht.next={lane:0,tag:Re.tag,payload:Re.payload,callback:null,next:null});e:{var Gr=u,Cn=Re;At=m;var es=v;switch(Cn.tag){case 1:if(Gr=Cn.payload,typeof Gr=="function"){er=Gr.call(es,er,At);break e}er=Gr;break e;case 3:Gr.flags=Gr.flags&-65537|128;case 0:if(Gr=Cn.payload,At=typeof Gr=="function"?Gr.call(es,er,At):Gr,At==null)break e;er=p({},er,At);break e;case 2:zr=!0}}At=Re.callback,At!==null&&(u.flags|=64,It&&(u.flags|=8192),It=M.callbacks,It===null?M.callbacks=[At]:It.push(At))}else It={lane:At,tag:Re.tag,payload:Re.payload,callback:Re.callback,next:null},Ht===null?(_t=Ht=It,Qe=er):Ht=Ht.next=It,he|=At;if(Re=Re.next,Re===null){if(Re=M.shared.pending,Re===null)break;It=Re,Re=It.next,It.next=null,M.lastBaseUpdate=It,M.shared.pending=null}}while(!0);Ht===null&&(Qe=er),M.baseState=Qe,M.firstBaseUpdate=_t,M.lastBaseUpdate=Ht,V===null&&(M.shared.lanes=0),wh|=he,u.lanes=he,u.memoizedState=er}}function ul(u,m){if(typeof u!="function")throw Error(n(191,u));u.call(m)}function Qs(u,m){var v=u.callbacks;if(v!==null)for(u.callbacks=null,u=0;u<v.length;u++)ul(v[u],m)}var Jn=xe(null),ya=xe(0);function ys(u,m){u=h0,ee(ya,u),ee(Jn,m),h0=u|m.baseLanes}function Ca(){ee(ya,h0),ee(Jn,Jn.current)}function bi(){h0=ya.current,B(Jn),B(ya)}var ws=xe(null),wa=null;function $s(u){var m=u.alternate;ee(ga,ga.current&1),ee(ws,u),wa===null&&(m===null||Jn.current!==null||m.memoizedState!==null)&&(wa=u)}function Ra(u){ee(ga,ga.current),ee(ws,u),wa===null&&(wa=u)}function Js(u){u.tag===22?(ee(ga,ga.current),ee(ws,u),wa===null&&(wa=u)):ei()}function ei(){ee(ga,ga.current),ee(ws,ws.current)}function qa(u){B(ws),wa===u&&(wa=null),B(ga)}var ga=xe(0);function hl(u){for(var m=u;m!==null;){if(m.tag===13){var v=m.memoizedState;if(v!==null&&(v=v.dehydrated,v===null||W5(v)||K5(v)))return m}else if(m.tag===19&&(m.memoizedProps.revealOrder==="forwards"||m.memoizedProps.revealOrder==="backwards"||m.memoizedProps.revealOrder==="unstable_legacy-backwards"||m.memoizedProps.revealOrder==="together")){if((m.flags&128)!==0)return m}else if(m.child!==null){m.child.return=m,m=m.child;continue}if(m===u)break;for(;m.sibling===null;){if(m.return===null||m.return===u)return null;m=m.return}m.sibling.return=m.return,m=m.sibling}return null}var Ps=0,fn=null,bn=null,ka=null,ql=!1,Wo=!1,Cl=!1,ti=0,mu=0,xu=null,yx=0;function Qa(){throw Error(n(321))}function _p(u,m){if(m===null)return!1;for(var v=0;v<m.length&&v<u.length;v++)if(!A(u[v],m[v]))return!1;return!0}function Sp(u,m,v,C,M,V){return Ps=V,fn=m,m.memoizedState=null,m.updateQueue=null,m.lanes=0,ue.H=u===null||u.memoizedState===null?WA:n5,Cl=!1,V=v(C,M),Cl=!1,Wo&&(V=Od(m,v,C,M)),wx(u),V}function wx(u){ue.H=Ip;var m=bn!==null&&bn.next!==null;if(Ps=0,ka=bn=fn=null,ql=!1,mu=0,xu=null,m)throw Error(n(300));u===null||Ti||(u=u.dependencies,u!==null&&gx(u)&&(Ti=!0))}function Od(u,m,v,C){fn=u;var M=0;do{if(Wo&&(xu=null),mu=0,Wo=!1,25<=M)throw Error(n(301));if(M+=1,ka=bn=null,u.updateQueue!=null){var V=u.updateQueue;V.lastEffect=null,V.events=null,V.stores=null,V.memoCache!=null&&(V.memoCache.index=0)}ue.H=KA,V=m(v,C)}while(Wo);return V}function Yk(){var u=ue.H,m=u.useState()[0];return m=typeof m.then=="function"?pu(m):m,u=u.useState()[0],(bn!==null?bn.memoizedState:null)!==u&&(fn.flags|=1024),m}function jp(){var u=ti!==0;return ti=0,u}function Cp(u,m,v){m.updateQueue=u.updateQueue,m.flags&=-2053,u.lanes&=~v}function kx(u){if(ql){for(u=u.memoizedState;u!==null;){var m=u.queue;m!==null&&(m.pending=null),u=u.next}ql=!1}Ps=0,ka=bn=fn=null,Wo=!1,mu=ti=0,xu=null}function Ei(){var u={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ka===null?fn.memoizedState=ka=u:ka=ka.next=u,ka}function Is(){if(bn===null){var u=fn.alternate;u=u!==null?u.memoizedState:null}else u=bn.next;var m=ka===null?fn.memoizedState:ka.next;if(m!==null)ka=m,bn=u;else{if(u===null)throw fn.alternate===null?Error(n(467)):Error(n(310));bn=u,u={memoizedState:bn.memoizedState,baseState:bn.baseState,baseQueue:bn.baseQueue,queue:bn.queue,next:null},ka===null?fn.memoizedState=ka=u:ka=ka.next=u}return ka}function Pf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function pu(u){var m=mu;return mu+=1,xu===null&&(xu=[]),u=Lt(xu,u,m),m=fn,(ka===null?m.memoizedState:ka.next)===null&&(m=m.alternate,ue.H=m===null||m.memoizedState===null?WA:n5),u}function xh(u){if(u!==null&&typeof u=="object"){if(typeof u.then=="function")return pu(u);if(u.$$typeof===E)return Hi(u)}throw Error(n(438,String(u)))}function n0(u){var m=null,v=fn.updateQueue;if(v!==null&&(m=v.memoCache),m==null){var C=fn.alternate;C!==null&&(C=C.updateQueue,C!==null&&(C=C.memoCache,C!=null&&(m={data:C.data.map(function(M){return M.slice()}),index:0})))}if(m==null&&(m={data:[],index:0}),v===null&&(v=Pf(),fn.updateQueue=v),v.memoCache=m,v=m.data[m.index],v===void 0)for(v=m.data[m.index]=Array(u),C=0;C<u;C++)v[C]=Z;return m.index++,v}function Vc(u,m){return typeof m=="function"?m(u):m}function Nx(u){var m=Is();return ph(m,bn,u)}function ph(u,m,v){var C=u.queue;if(C===null)throw Error(n(311));C.lastRenderedReducer=v;var M=u.baseQueue,V=C.pending;if(V!==null){if(M!==null){var he=M.next;M.next=V.next,V.next=he}m.baseQueue=M=V,C.pending=null}if(V=u.baseState,M===null)u.memoizedState=V;else{m=M.next;var Re=he=null,Qe=null,_t=m,Ht=!1;do{var er=_t.lane&-536870913;if(er!==_t.lane?(ma&er)===er:(Ps&er)===er){var At=_t.revertLane;if(At===0)Qe!==null&&(Qe=Qe.next={lane:0,revertLane:0,gesture:null,action:_t.action,hasEagerState:_t.hasEagerState,eagerState:_t.eagerState,next:null}),er===P&&(Ht=!0);else if((Ps&At)===At){_t=_t.next,At===P&&(Ht=!0);continue}else er={lane:0,revertLane:_t.revertLane,gesture:null,action:_t.action,hasEagerState:_t.hasEagerState,eagerState:_t.eagerState,next:null},Qe===null?(Re=Qe=er,he=V):Qe=Qe.next=er,fn.lanes|=At,wh|=At;er=_t.action,Cl&&v(V,er),V=_t.hasEagerState?_t.eagerState:v(V,er)}else At={lane:er,revertLane:_t.revertLane,gesture:_t.gesture,action:_t.action,hasEagerState:_t.hasEagerState,eagerState:_t.eagerState,next:null},Qe===null?(Re=Qe=At,he=V):Qe=Qe.next=At,fn.lanes|=er,wh|=er;_t=_t.next}while(_t!==null&&_t!==m);if(Qe===null?he=V:Qe.next=Re,!A(V,u.memoizedState)&&(Ti=!0,Ht&&(v=L,v!==null)))throw v;u.memoizedState=V,u.baseState=he,u.baseQueue=Qe,C.lastRenderedState=V}return M===null&&(C.lanes=0),[u.memoizedState,C.dispatch]}function _x(u){var m=Is(),v=m.queue;if(v===null)throw Error(n(311));v.lastRenderedReducer=u;var C=v.dispatch,M=v.pending,V=m.memoizedState;if(M!==null){v.pending=null;var he=M=M.next;do V=u(V,he.action),he=he.next;while(he!==M);A(V,m.memoizedState)||(Ti=!0),m.memoizedState=V,m.baseQueue===null&&(m.baseState=V),v.lastRenderedState=V}return[V,C]}function Sx(u,m,v){var C=fn,M=Is(),V=oa;if(V){if(v===void 0)throw Error(n(407));v=v()}else v=m();var he=!A((bn||M).memoizedState,v);if(he&&(M.memoizedState=v,Ti=!0),M=M.queue,Zk(Ep.bind(null,C,M,u),[u]),M.getSnapshot!==m||he||ka!==null&&ka.memoizedState.tag&1){if(C.flags|=2048,s0(9,{destroy:void 0},Ap.bind(null,C,M,v,m),null),us===null)throw Error(n(349));V||(Ps&127)!==0||Pd(C,m,v)}return v}function Pd(u,m,v){u.flags|=16384,u={getSnapshot:m,value:v},m=fn.updateQueue,m===null?(m=Pf(),fn.updateQueue=m,m.stores=[u]):(v=m.stores,v===null?m.stores=[u]:v.push(u))}function Ap(u,m,v,C){m.value=v,m.getSnapshot=C,xv(m)&&Tp(u)}function Ep(u,m,v){return v(function(){xv(m)&&Tp(u)})}function xv(u){var m=u.getSnapshot;u=u.value;try{var v=m();return!A(u,v)}catch{return!0}}function Tp(u){var m=Ed(u,2);m!==null&&Zo(m,u,2)}function gu(u){var m=Ei();if(typeof u=="function"){var v=u;if(u=v(),Cl){yr(!0);try{v()}finally{yr(!1)}}}return m.memoizedState=m.baseState=u,m.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vc,lastRenderedState:u},m}function pv(u,m,v,C){return u.baseState=v,ph(u,bn,typeof C=="function"?C:Vc)}function gv(u,m,v,C,M){if(wv(u))throw Error(n(485));if(u=m.action,u!==null){var V={payload:M,action:u,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(he){V.listeners.push(he)}};ue.T!==null?v(!0):V.isTransition=!1,C(V),v=m.pending,v===null?(V.next=m.pending=V,bv(m,V)):(V.next=v.next,m.pending=v.next=V)}}function bv(u,m){var v=m.action,C=m.payload,M=u.state;if(m.isTransition){var V=ue.T,he={};ue.T=he;try{var Re=v(M,C),Qe=ue.S;Qe!==null&&Qe(he,Re),Op(u,m,Re)}catch(_t){a0(u,m,_t)}finally{V!==null&&he.types!==null&&(V.types=he.types),ue.T=V}}else try{V=v(M,C),Op(u,m,V)}catch(_t){a0(u,m,_t)}}function Op(u,m,v){v!==null&&typeof v=="object"&&typeof v.then=="function"?v.then(function(C){vv(u,m,C)},function(C){return a0(u,m,C)}):vv(u,m,v)}function vv(u,m,v){m.status="fulfilled",m.value=v,jx(m),u.state=v,m=u.pending,m!==null&&(v=m.next,v===m?u.pending=null:(v=v.next,m.next=v,bv(u,v)))}function a0(u,m,v){var C=u.pending;if(u.pending=null,C!==null){C=C.next;do m.status="rejected",m.reason=v,jx(m),m=m.next;while(m!==C)}u.action=null}function jx(u){u=u.listeners;for(var m=0;m<u.length;m++)(0,u[m])()}function If(u,m){return m}function Wc(u,m){if(oa){var v=us.formState;if(v!==null){e:{var C=fn;if(oa){if(cs){t:{for(var M=cs,V=Os;M.nodeType!==8;){if(!V){M=null;break t}if(M=Kc(M.nextSibling),M===null){M=null;break t}}V=M.data,M=V==="F!"||V==="F"?M:null}if(M){cs=Kc(M.nextSibling),C=M.data==="F!";break e}}cu(C)}C=!1}C&&(m=v[0])}}return v=Ei(),v.memoizedState=v.baseState=m,C={pending:null,lanes:0,dispatch:null,lastRenderedReducer:If,lastRenderedState:m},v.queue=C,v=HA.bind(null,fn,C),C.dispatch=v,C=gu(!1),V=r5.bind(null,fn,!1,C.queue),C=Ei(),M={state:m,dispatch:null,action:u,pending:null},C.queue=M,v=gv.bind(null,fn,M,V,v),M.dispatch=v,C.memoizedState=u,[m,v,!1]}function Id(u){var m=Is();return Dd(m,bn,u)}function Dd(u,m,v){if(m=ph(u,m,If)[0],u=Nx(Vc)[0],typeof m=="object"&&m!==null&&typeof m.then=="function")try{var C=pu(m)}catch(he){throw he===it?$e:he}else C=m;m=Is();var M=m.queue,V=M.dispatch;return v!==m.memoizedState&&(fn.flags|=2048,s0(9,{destroy:void 0},Cx.bind(null,M,v),null)),[C,V,u]}function Cx(u,m){u.action=m}function Ax(u){var m=Is(),v=bn;if(v!==null)return Dd(m,v,u);Is(),m=m.memoizedState,v=Is();var C=v.queue.dispatch;return v.memoizedState=u,[m,C,!1]}function s0(u,m,v,C){return u={tag:u,create:v,deps:C,inst:m,next:null},m=fn.updateQueue,m===null&&(m=Pf(),fn.updateQueue=m),v=m.lastEffect,v===null?m.lastEffect=u.next=u:(C=v.next,v.next=u,u.next=C,m.lastEffect=u),u}function yv(){return Is().memoizedState}function gh(u,m,v,C){var M=Ei();fn.flags|=u,M.memoizedState=s0(1|m,{destroy:void 0},v,C===void 0?null:C)}function bh(u,m,v,C){var M=Is();C=C===void 0?null:C;var V=M.memoizedState.inst;bn!==null&&C!==null&&_p(C,bn.memoizedState.deps)?M.memoizedState=s0(m,V,v,C):(fn.flags|=u,M.memoizedState=s0(1|m,V,v,C))}function EA(u,m){gh(8390656,8,u,m)}function Zk(u,m){bh(2048,8,u,m)}function QW(u){fn.flags|=4;var m=fn.updateQueue;if(m===null)m=Pf(),fn.updateQueue=m,m.events=[u];else{var v=m.events;v===null?m.events=[u]:v.push(u)}}function TA(u){var m=Is().memoizedState;return QW({ref:m,nextImpl:u}),function(){if((Fa&2)!==0)throw Error(n(440));return m.impl.apply(void 0,arguments)}}function OA(u,m){return bh(4,2,u,m)}function PA(u,m){return bh(4,4,u,m)}function IA(u,m){if(typeof m=="function"){u=u();var v=m(u);return function(){typeof v=="function"?v():m(null)}}if(m!=null)return u=u(),m.current=u,function(){m.current=null}}function DA(u,m,v){v=v!=null?v.concat([u]):null,bh(4,4,IA.bind(null,m,u),v)}function Qk(){}function MA(u,m){var v=Is();m=m===void 0?null:m;var C=v.memoizedState;return m!==null&&_p(m,C[1])?C[0]:(v.memoizedState=[u,m],u)}function LA(u,m){var v=Is();m=m===void 0?null:m;var C=v.memoizedState;if(m!==null&&_p(m,C[1]))return C[0];if(C=u(),Cl){yr(!0);try{u()}finally{yr(!1)}}return v.memoizedState=[C,m],C}function Jk(u,m,v){return v===void 0||(Ps&1073741824)!==0&&(ma&261930)===0?u.memoizedState=m:(u.memoizedState=v,u=RE(),fn.lanes|=u,wh|=u,v)}function RA(u,m,v,C){return A(v,m)?v:Jn.current!==null?(u=Jk(u,v,C),A(u,m)||(Ti=!0),u):(Ps&42)===0||(Ps&1073741824)!==0&&(ma&261930)===0?(Ti=!0,u.memoizedState=v):(u=RE(),fn.lanes|=u,wh|=u,m)}function FA(u,m,v,C,M){var V=fe.p;fe.p=V!==0&&8>V?V:8;var he=ue.T,Re={};ue.T=Re,r5(u,!1,m,v);try{var Qe=M(),_t=ue.S;if(_t!==null&&_t(Re,Qe),Qe!==null&&typeof Qe=="object"&&typeof Qe.then=="function"){var Ht=Se(Qe,C);Pp(u,m,Ht,hc(u))}else Pp(u,m,C,hc(u))}catch(er){Pp(u,m,{then:function(){},status:"rejected",reason:er},hc())}finally{fe.p=V,he!==null&&Re.types!==null&&(he.types=Re.types),ue.T=he}}function JW(){}function e5(u,m,v,C){if(u.tag!==5)throw Error(n(476));var M=BA(u).queue;FA(u,M,m,ke,v===null?JW:function(){return UA(u),v(C)})}function BA(u){var m=u.memoizedState;if(m!==null)return m;m={memoizedState:ke,baseState:ke,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vc,lastRenderedState:ke},next:null};var v={};return m.next={memoizedState:v,baseState:v,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vc,lastRenderedState:v},next:null},u.memoizedState=m,u=u.alternate,u!==null&&(u.memoizedState=m),m}function UA(u){var m=BA(u);m.next===null&&(m=u.alternate.memoizedState),Pp(u,m.next.queue,{},hc())}function t5(){return Hi(Xp)}function zA(){return Is().memoizedState}function qA(){return Is().memoizedState}function eK(u){for(var m=u.return;m!==null;){switch(m.tag){case 24:case 3:var v=hc();u=Sn(v);var C=Wn(m,u,v);C!==null&&(Zo(C,m,v),La(C,m,v)),m={cache:mh()},u.payload=m;return}m=m.return}}function tK(u,m,v){var C=hc();v={lane:C,revertLane:0,gesture:null,action:v,hasEagerState:!1,eagerState:null,next:null},wv(u)?$A(m,v):(v=cx(u,m,v,C),v!==null&&(Zo(v,u,C),VA(v,m,C)))}function HA(u,m,v){var C=hc();Pp(u,m,v,C)}function Pp(u,m,v,C){var M={lane:C,revertLane:0,gesture:null,action:v,hasEagerState:!1,eagerState:null,next:null};if(wv(u))$A(m,M);else{var V=u.alternate;if(u.lanes===0&&(V===null||V.lanes===0)&&(V=m.lastRenderedReducer,V!==null))try{var he=m.lastRenderedState,Re=V(he,v);if(M.hasEagerState=!0,M.eagerState=Re,A(Re,he))return Sf(u,m,M,0),us===null&&_f(),!1}catch{}finally{}if(v=cx(u,m,M,C),v!==null)return Zo(v,u,C),VA(v,m,C),!0}return!1}function r5(u,m,v,C){if(C={lane:2,revertLane:D5(),gesture:null,action:C,hasEagerState:!1,eagerState:null,next:null},wv(u)){if(m)throw Error(n(479))}else m=cx(u,v,C,2),m!==null&&Zo(m,u,2)}function wv(u){var m=u.alternate;return u===fn||m!==null&&m===fn}function $A(u,m){Wo=ql=!0;var v=u.pending;v===null?m.next=m:(m.next=v.next,v.next=m),u.pending=m}function VA(u,m,v){if((v&4194048)!==0){var C=m.lanes;C&=u.pendingLanes,v|=C,m.lanes=v,Lr(u,v)}}var Ip={readContext:Hi,use:xh,useCallback:Qa,useContext:Qa,useEffect:Qa,useImperativeHandle:Qa,useLayoutEffect:Qa,useInsertionEffect:Qa,useMemo:Qa,useReducer:Qa,useRef:Qa,useState:Qa,useDebugValue:Qa,useDeferredValue:Qa,useTransition:Qa,useSyncExternalStore:Qa,useId:Qa,useHostTransitionStatus:Qa,useFormState:Qa,useActionState:Qa,useOptimistic:Qa,useMemoCache:Qa,useCacheRefresh:Qa};Ip.useEffectEvent=Qa;var WA={readContext:Hi,use:xh,useCallback:function(u,m){return Ei().memoizedState=[u,m===void 0?null:m],u},useContext:Hi,useEffect:EA,useImperativeHandle:function(u,m,v){v=v!=null?v.concat([u]):null,gh(4194308,4,IA.bind(null,m,u),v)},useLayoutEffect:function(u,m){return gh(4194308,4,u,m)},useInsertionEffect:function(u,m){gh(4,2,u,m)},useMemo:function(u,m){var v=Ei();m=m===void 0?null:m;var C=u();if(Cl){yr(!0);try{u()}finally{yr(!1)}}return v.memoizedState=[C,m],C},useReducer:function(u,m,v){var C=Ei();if(v!==void 0){var M=v(m);if(Cl){yr(!0);try{v(m)}finally{yr(!1)}}}else M=m;return C.memoizedState=C.baseState=M,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:u,lastRenderedState:M},C.queue=u,u=u.dispatch=tK.bind(null,fn,u),[C.memoizedState,u]},useRef:function(u){var m=Ei();return u={current:u},m.memoizedState=u},useState:function(u){u=gu(u);var m=u.queue,v=HA.bind(null,fn,m);return m.dispatch=v,[u.memoizedState,v]},useDebugValue:Qk,useDeferredValue:function(u,m){var v=Ei();return Jk(v,u,m)},useTransition:function(){var u=gu(!1);return u=FA.bind(null,fn,u.queue,!0,!1),Ei().memoizedState=u,[!1,u]},useSyncExternalStore:function(u,m,v){var C=fn,M=Ei();if(oa){if(v===void 0)throw Error(n(407));v=v()}else{if(v=m(),us===null)throw Error(n(349));(ma&127)!==0||Pd(C,m,v)}M.memoizedState=v;var V={value:v,getSnapshot:m};return M.queue=V,EA(Ep.bind(null,C,V,u),[u]),C.flags|=2048,s0(9,{destroy:void 0},Ap.bind(null,C,V,v,m),null),v},useId:function(){var u=Ei(),m=us.identifierPrefix;if(oa){var v=$o,C=Ho;v=(C&~(1<<32-Ge(C)-1)).toString(32)+v,m="_"+m+"R_"+v,v=ti++,0<v&&(m+="H"+v.toString(32)),m+="_"}else v=yx++,m="_"+m+"r_"+v.toString(32)+"_";return u.memoizedState=m},useHostTransitionStatus:t5,useFormState:Wc,useActionState:Wc,useOptimistic:function(u){var m=Ei();m.memoizedState=m.baseState=u;var v={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return m.queue=v,m=r5.bind(null,fn,!0,v),v.dispatch=m,[u,m]},useMemoCache:n0,useCacheRefresh:function(){return Ei().memoizedState=eK.bind(null,fn)},useEffectEvent:function(u){var m=Ei(),v={impl:u};return m.memoizedState=v,function(){if((Fa&2)!==0)throw Error(n(440));return v.impl.apply(void 0,arguments)}}},n5={readContext:Hi,use:xh,useCallback:MA,useContext:Hi,useEffect:Zk,useImperativeHandle:DA,useInsertionEffect:OA,useLayoutEffect:PA,useMemo:LA,useReducer:Nx,useRef:yv,useState:function(){return Nx(Vc)},useDebugValue:Qk,useDeferredValue:function(u,m){var v=Is();return RA(v,bn.memoizedState,u,m)},useTransition:function(){var u=Nx(Vc)[0],m=Is().memoizedState;return[typeof u=="boolean"?u:pu(u),m]},useSyncExternalStore:Sx,useId:zA,useHostTransitionStatus:t5,useFormState:Id,useActionState:Id,useOptimistic:function(u,m){var v=Is();return pv(v,bn,u,m)},useMemoCache:n0,useCacheRefresh:qA};n5.useEffectEvent=TA;var KA={readContext:Hi,use:xh,useCallback:MA,useContext:Hi,useEffect:Zk,useImperativeHandle:DA,useInsertionEffect:OA,useLayoutEffect:PA,useMemo:LA,useReducer:_x,useRef:yv,useState:function(){return _x(Vc)},useDebugValue:Qk,useDeferredValue:function(u,m){var v=Is();return bn===null?Jk(v,u,m):RA(v,bn.memoizedState,u,m)},useTransition:function(){var u=_x(Vc)[0],m=Is().memoizedState;return[typeof u=="boolean"?u:pu(u),m]},useSyncExternalStore:Sx,useId:zA,useHostTransitionStatus:t5,useFormState:Ax,useActionState:Ax,useOptimistic:function(u,m){var v=Is();return bn!==null?pv(v,bn,u,m):(v.baseState=u,[u,v.queue.dispatch])},useMemoCache:n0,useCacheRefresh:qA};KA.useEffectEvent=TA;function a5(u,m,v,C){m=u.memoizedState,v=v(C,m),v=v==null?m:p({},m,v),u.memoizedState=v,u.lanes===0&&(u.updateQueue.baseState=v)}var s5={enqueueSetState:function(u,m,v){u=u._reactInternals;var C=hc(),M=Sn(C);M.payload=m,v!=null&&(M.callback=v),m=Wn(u,M,C),m!==null&&(Zo(m,u,C),La(m,u,C))},enqueueReplaceState:function(u,m,v){u=u._reactInternals;var C=hc(),M=Sn(C);M.tag=1,M.payload=m,v!=null&&(M.callback=v),m=Wn(u,M,C),m!==null&&(Zo(m,u,C),La(m,u,C))},enqueueForceUpdate:function(u,m){u=u._reactInternals;var v=hc(),C=Sn(v);C.tag=2,m!=null&&(C.callback=m),m=Wn(u,C,v),m!==null&&(Zo(m,u,v),La(m,u,v))}};function GA(u,m,v,C,M,V,he){return u=u.stateNode,typeof u.shouldComponentUpdate=="function"?u.shouldComponentUpdate(C,V,he):m.prototype&&m.prototype.isPureReactComponent?!I(v,C)||!I(M,V):!0}function XA(u,m,v,C){u=m.state,typeof m.componentWillReceiveProps=="function"&&m.componentWillReceiveProps(v,C),typeof m.UNSAFE_componentWillReceiveProps=="function"&&m.UNSAFE_componentWillReceiveProps(v,C),m.state!==u&&s5.enqueueReplaceState(m,m.state,null)}function Df(u,m){var v=m;if("ref"in m){v={};for(var C in m)C!=="ref"&&(v[C]=m[C])}if(u=u.defaultProps){v===m&&(v=p({},v));for(var M in u)v[M]===void 0&&(v[M]=u[M])}return v}function YA(u){Nf(u)}function ZA(u){console.error(u)}function QA(u){Nf(u)}function kv(u,m){try{var v=u.onUncaughtError;v(m.value,{componentStack:m.stack})}catch(C){setTimeout(function(){throw C})}}function JA(u,m,v){try{var C=u.onCaughtError;C(v.value,{componentStack:v.stack,errorBoundary:m.tag===1?m.stateNode:null})}catch(M){setTimeout(function(){throw M})}}function i5(u,m,v){return v=Sn(v),v.tag=3,v.payload={element:null},v.callback=function(){kv(u,m)},v}function eE(u){return u=Sn(u),u.tag=3,u}function tE(u,m,v,C){var M=v.type.getDerivedStateFromError;if(typeof M=="function"){var V=C.value;u.payload=function(){return M(V)},u.callback=function(){JA(m,v,C)}}var he=v.stateNode;he!==null&&typeof he.componentDidCatch=="function"&&(u.callback=function(){JA(m,v,C),typeof M!="function"&&(kh===null?kh=new Set([this]):kh.add(this));var Re=C.stack;this.componentDidCatch(C.value,{componentStack:Re!==null?Re:""})})}function rK(u,m,v,C,M){if(v.flags|=32768,C!==null&&typeof C=="object"&&typeof C.then=="function"){if(m=v.alternate,m!==null&&hu(m,v,M,!0),v=ws.current,v!==null){switch(v.tag){case 31:case 13:return wa===null?Dv():v.alternate===null&&ri===0&&(ri=3),v.flags&=-257,v.flags|=65536,v.lanes=M,C===ft?v.flags|=16384:(m=v.updateQueue,m===null?v.updateQueue=new Set([C]):m.add(C),O5(u,C,M)),!1;case 22:return v.flags|=65536,C===ft?v.flags|=16384:(m=v.updateQueue,m===null?(m={transitions:null,markerInstances:null,retryQueue:new Set([C])},v.updateQueue=m):(v=m.retryQueue,v===null?m.retryQueue=new Set([C]):v.add(C)),O5(u,C,M)),!1}throw Error(n(435,v.tag))}return O5(u,C,M),Dv(),!1}if(oa)return m=ws.current,m!==null?((m.flags&65536)===0&&(m.flags|=256),m.flags|=65536,m.lanes=M,C!==cc&&(u=Error(n(422),{cause:C}),hh(Uo(u,v)))):(C!==cc&&(m=Error(n(423),{cause:C}),hh(Uo(m,v))),u=u.current.alternate,u.flags|=65536,M&=-M,u.lanes|=M,C=Uo(C,v),M=i5(u.stateNode,C,M),gi(u,M),ri!==4&&(ri=2)),!1;var V=Error(n(520),{cause:C});if(V=Uo(V,v),zp===null?zp=[V]:zp.push(V),ri!==4&&(ri=2),m===null)return!0;C=Uo(C,v),v=m;do{switch(v.tag){case 3:return v.flags|=65536,u=M&-M,v.lanes|=u,u=i5(v.stateNode,C,u),gi(v,u),!1;case 1:if(m=v.type,V=v.stateNode,(v.flags&128)===0&&(typeof m.getDerivedStateFromError=="function"||V!==null&&typeof V.componentDidCatch=="function"&&(kh===null||!kh.has(V))))return v.flags|=65536,M&=-M,v.lanes|=M,M=eE(M),tE(M,u,v,C),gi(v,M),!1}v=v.return}while(v!==null);return!1}var l5=Error(n(461)),Ti=!1;function Al(u,m,v,C){m.child=u===null?Hn(m,null,v,C):ds(m,u.child,v,C)}function rE(u,m,v,C,M){v=v.render;var V=m.ref;if("ref"in C){var he={};for(var Re in C)Re!=="ref"&&(he[Re]=C[Re])}else he=C;return fu(m),C=Sp(u,m,v,he,V,M),Re=jp(),u!==null&&!Ti?(Cp(u,m,M),i0(u,m,M)):(oa&&Re&&wp(m),m.flags|=1,Al(u,m,C,M),m.child)}function nE(u,m,v,C,M){if(u===null){var V=v.type;return typeof V=="function"&&!ux(V)&&V.defaultProps===void 0&&v.compare===null?(m.tag=15,m.type=V,aE(u,m,V,C,M)):(u=ch(v.type,null,C,m,m.mode,M),u.ref=m.ref,u.return=m,m.child=u)}if(V=u.child,!x5(u,M)){var he=V.memoizedProps;if(v=v.compare,v=v!==null?v:I,v(he,C)&&u.ref===m.ref)return i0(u,m,M)}return m.flags|=1,u=Bo(V,C),u.ref=m.ref,u.return=m,m.child=u}function aE(u,m,v,C,M){if(u!==null){var V=u.memoizedProps;if(I(V,C)&&u.ref===m.ref)if(Ti=!1,m.pendingProps=C=V,x5(u,M))(u.flags&131072)!==0&&(Ti=!0);else return m.lanes=u.lanes,i0(u,m,M)}return o5(u,m,v,C,M)}function sE(u,m,v,C){var M=C.children,V=u!==null?u.memoizedState:null;if(u===null&&m.stateNode===null&&(m.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),C.mode==="hidden"){if((m.flags&128)!==0){if(V=V!==null?V.baseLanes|v:v,u!==null){for(C=m.child=u.child,M=0;C!==null;)M=M|C.lanes|C.childLanes,C=C.sibling;C=M&~V}else C=0,m.child=null;return iE(u,m,V,v,C)}if((v&536870912)!==0)m.memoizedState={baseLanes:0,cachePool:null},u!==null&&Ue(m,V!==null?V.cachePool:null),V!==null?ys(m,V):Ca(),Js(m);else return C=m.lanes=536870912,iE(u,m,V!==null?V.baseLanes|v:v,v,C)}else V!==null?(Ue(m,V.cachePool),ys(m,V),ei(),m.memoizedState=null):(u!==null&&Ue(m,null),Ca(),ei());return Al(u,m,M,v),m.child}function Dp(u,m){return u!==null&&u.tag===22||m.stateNode!==null||(m.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),m.sibling}function iE(u,m,v,C,M){var V=Fe();return V=V===null?null:{parent:Hs._currentValue,pool:V},m.memoizedState={baseLanes:v,cachePool:V},u!==null&&Ue(m,null),Ca(),Js(m),u!==null&&hu(u,m,C,!0),m.childLanes=M,null}function Nv(u,m){return m=Sv({mode:m.mode,children:m.children},u.mode),m.ref=u.ref,u.child=m,m.return=u,m}function lE(u,m,v){return ds(m,u.child,null,v),u=Nv(m,m.pendingProps),u.flags|=2,qa(m),m.memoizedState=null,u}function nK(u,m,v){var C=m.pendingProps,M=(m.flags&128)!==0;if(m.flags&=-129,u===null){if(oa){if(C.mode==="hidden")return u=Nv(m,C),m.lanes=536870912,Dp(null,u);if(Ra(m),(u=cs)?(u=v8(u,Os),u=u!==null&&u.data==="&"?u:null,u!==null&&(m.memoizedState={dehydrated:u,treeContext:ou!==null?{id:Ho,overflow:$o}:null,retryLane:536870912,hydrationErrors:null},v=hx(u),v.return=m,m.child=v,zi=m,cs=null)):u=null,u===null)throw cu(m);return m.lanes=536870912,null}return Nv(m,C)}var V=u.memoizedState;if(V!==null){var he=V.dehydrated;if(Ra(m),M)if(m.flags&256)m.flags&=-257,m=lE(u,m,v);else if(m.memoizedState!==null)m.child=u.child,m.flags|=128,m=null;else throw Error(n(558));else if(Ti||hu(u,m,v,!1),M=(v&u.childLanes)!==0,Ti||M){if(C=us,C!==null&&(he=An(C,v),he!==0&&he!==V.retryLane))throw V.retryLane=he,Ed(u,he),Zo(C,u,he),l5;Dv(),m=lE(u,m,v)}else u=V.treeContext,cs=Kc(he.nextSibling),zi=m,oa=!0,jl=null,Os=!1,u!==null&&fv(m,u),m=Nv(m,C),m.flags|=4096;return m}return u=Bo(u.child,{mode:C.mode,children:C.children}),u.ref=m.ref,m.child=u,u.return=m,u}function _v(u,m){var v=m.ref;if(v===null)u!==null&&u.ref!==null&&(m.flags|=4194816);else{if(typeof v!="function"&&typeof v!="object")throw Error(n(284));(u===null||u.ref!==v)&&(m.flags|=4194816)}}function o5(u,m,v,C,M){return fu(m),v=Sp(u,m,v,C,void 0,M),C=jp(),u!==null&&!Ti?(Cp(u,m,M),i0(u,m,M)):(oa&&C&&wp(m),m.flags|=1,Al(u,m,v,M),m.child)}function oE(u,m,v,C,M,V){return fu(m),m.updateQueue=null,v=Od(m,C,v,M),wx(u),C=jp(),u!==null&&!Ti?(Cp(u,m,V),i0(u,m,V)):(oa&&C&&wp(m),m.flags|=1,Al(u,m,v,V),m.child)}function cE(u,m,v,C,M){if(fu(m),m.stateNode===null){var V=Ui,he=v.contextType;typeof he=="object"&&he!==null&&(V=Hi(he)),V=new v(C,V),m.memoizedState=V.state!==null&&V.state!==void 0?V.state:null,V.updater=s5,m.stateNode=V,V._reactInternals=m,V=m.stateNode,V.props=C,V.state=m.memoizedState,V.refs={},jr(m),he=v.contextType,V.context=typeof he=="object"&&he!==null?Hi(he):Ui,V.state=m.memoizedState,he=v.getDerivedStateFromProps,typeof he=="function"&&(a5(m,v,he,C),V.state=m.memoizedState),typeof v.getDerivedStateFromProps=="function"||typeof V.getSnapshotBeforeUpdate=="function"||typeof V.UNSAFE_componentWillMount!="function"&&typeof V.componentWillMount!="function"||(he=V.state,typeof V.componentWillMount=="function"&&V.componentWillMount(),typeof V.UNSAFE_componentWillMount=="function"&&V.UNSAFE_componentWillMount(),he!==V.state&&s5.enqueueReplaceState(V,V.state,null),Zs(m,C,V,M),Za(),V.state=m.memoizedState),typeof V.componentDidMount=="function"&&(m.flags|=4194308),C=!0}else if(u===null){V=m.stateNode;var Re=m.memoizedProps,Qe=Df(v,Re);V.props=Qe;var _t=V.context,Ht=v.contextType;he=Ui,typeof Ht=="object"&&Ht!==null&&(he=Hi(Ht));var er=v.getDerivedStateFromProps;Ht=typeof er=="function"||typeof V.getSnapshotBeforeUpdate=="function",Re=m.pendingProps!==Re,Ht||typeof V.UNSAFE_componentWillReceiveProps!="function"&&typeof V.componentWillReceiveProps!="function"||(Re||_t!==he)&&XA(m,V,C,he),zr=!1;var At=m.memoizedState;V.state=At,Zs(m,C,V,M),Za(),_t=m.memoizedState,Re||At!==_t||zr?(typeof er=="function"&&(a5(m,v,er,C),_t=m.memoizedState),(Qe=zr||GA(m,v,Qe,C,At,_t,he))?(Ht||typeof V.UNSAFE_componentWillMount!="function"&&typeof V.componentWillMount!="function"||(typeof V.componentWillMount=="function"&&V.componentWillMount(),typeof V.UNSAFE_componentWillMount=="function"&&V.UNSAFE_componentWillMount()),typeof V.componentDidMount=="function"&&(m.flags|=4194308)):(typeof V.componentDidMount=="function"&&(m.flags|=4194308),m.memoizedProps=C,m.memoizedState=_t),V.props=C,V.state=_t,V.context=he,C=Qe):(typeof V.componentDidMount=="function"&&(m.flags|=4194308),C=!1)}else{V=m.stateNode,vs(u,m),he=m.memoizedProps,Ht=Df(v,he),V.props=Ht,er=m.pendingProps,At=V.context,_t=v.contextType,Qe=Ui,typeof _t=="object"&&_t!==null&&(Qe=Hi(_t)),Re=v.getDerivedStateFromProps,(_t=typeof Re=="function"||typeof V.getSnapshotBeforeUpdate=="function")||typeof V.UNSAFE_componentWillReceiveProps!="function"&&typeof V.componentWillReceiveProps!="function"||(he!==er||At!==Qe)&&XA(m,V,C,Qe),zr=!1,At=m.memoizedState,V.state=At,Zs(m,C,V,M),Za();var It=m.memoizedState;he!==er||At!==It||zr||u!==null&&u.dependencies!==null&&gx(u.dependencies)?(typeof Re=="function"&&(a5(m,v,Re,C),It=m.memoizedState),(Ht=zr||GA(m,v,Ht,C,At,It,Qe)||u!==null&&u.dependencies!==null&&gx(u.dependencies))?(_t||typeof V.UNSAFE_componentWillUpdate!="function"&&typeof V.componentWillUpdate!="function"||(typeof V.componentWillUpdate=="function"&&V.componentWillUpdate(C,It,Qe),typeof V.UNSAFE_componentWillUpdate=="function"&&V.UNSAFE_componentWillUpdate(C,It,Qe)),typeof V.componentDidUpdate=="function"&&(m.flags|=4),typeof V.getSnapshotBeforeUpdate=="function"&&(m.flags|=1024)):(typeof V.componentDidUpdate!="function"||he===u.memoizedProps&&At===u.memoizedState||(m.flags|=4),typeof V.getSnapshotBeforeUpdate!="function"||he===u.memoizedProps&&At===u.memoizedState||(m.flags|=1024),m.memoizedProps=C,m.memoizedState=It),V.props=C,V.state=It,V.context=Qe,C=Ht):(typeof V.componentDidUpdate!="function"||he===u.memoizedProps&&At===u.memoizedState||(m.flags|=4),typeof V.getSnapshotBeforeUpdate!="function"||he===u.memoizedProps&&At===u.memoizedState||(m.flags|=1024),C=!1)}return V=C,_v(u,m),C=(m.flags&128)!==0,V||C?(V=m.stateNode,v=C&&typeof v.getDerivedStateFromError!="function"?null:V.render(),m.flags|=1,u!==null&&C?(m.child=ds(m,u.child,null,M),m.child=ds(m,null,v,M)):Al(u,m,v,M),m.memoizedState=V.state,u=m.child):u=i0(u,m,M),u}function dE(u,m,v,C){return t0(),m.flags|=256,Al(u,m,v,C),m.child}var c5={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function d5(u){return{baseLanes:u,cachePool:Ve()}}function u5(u,m,v){return u=u!==null?u.childLanes&~v:0,m&&(u|=uc),u}function uE(u,m,v){var C=m.pendingProps,M=!1,V=(m.flags&128)!==0,he;if((he=V)||(he=u!==null&&u.memoizedState===null?!1:(ga.current&2)!==0),he&&(M=!0,m.flags&=-129),he=(m.flags&32)!==0,m.flags&=-33,u===null){if(oa){if(M?$s(m):ei(),(u=cs)?(u=v8(u,Os),u=u!==null&&u.data!=="&"?u:null,u!==null&&(m.memoizedState={dehydrated:u,treeContext:ou!==null?{id:Ho,overflow:$o}:null,retryLane:536870912,hydrationErrors:null},v=hx(u),v.return=m,m.child=v,zi=m,cs=null)):u=null,u===null)throw cu(m);return K5(u)?m.lanes=32:m.lanes=536870912,null}var Re=C.children;return C=C.fallback,M?(ei(),M=m.mode,Re=Sv({mode:"hidden",children:Re},M),C=lu(C,M,v,null),Re.return=m,C.return=m,Re.sibling=C,m.child=Re,C=m.child,C.memoizedState=d5(v),C.childLanes=u5(u,he,v),m.memoizedState=c5,Dp(null,C)):($s(m),h5(m,Re))}var Qe=u.memoizedState;if(Qe!==null&&(Re=Qe.dehydrated,Re!==null)){if(V)m.flags&256?($s(m),m.flags&=-257,m=f5(u,m,v)):m.memoizedState!==null?(ei(),m.child=u.child,m.flags|=128,m=null):(ei(),Re=C.fallback,M=m.mode,C=Sv({mode:"visible",children:C.children},M),Re=lu(Re,M,v,null),Re.flags|=2,C.return=m,Re.return=m,C.sibling=Re,m.child=C,ds(m,u.child,null,v),C=m.child,C.memoizedState=d5(v),C.childLanes=u5(u,he,v),m.memoizedState=c5,m=Dp(null,C));else if($s(m),K5(Re)){if(he=Re.nextSibling&&Re.nextSibling.dataset,he)var _t=he.dgst;he=_t,C=Error(n(419)),C.stack="",C.digest=he,hh({value:C,source:null,stack:null}),m=f5(u,m,v)}else if(Ti||hu(u,m,v,!1),he=(v&u.childLanes)!==0,Ti||he){if(he=us,he!==null&&(C=An(he,v),C!==0&&C!==Qe.retryLane))throw Qe.retryLane=C,Ed(u,C),Zo(he,u,C),l5;W5(Re)||Dv(),m=f5(u,m,v)}else W5(Re)?(m.flags|=192,m.child=u.child,m=null):(u=Qe.treeContext,cs=Kc(Re.nextSibling),zi=m,oa=!0,jl=null,Os=!1,u!==null&&fv(m,u),m=h5(m,C.children),m.flags|=4096);return m}return M?(ei(),Re=C.fallback,M=m.mode,Qe=u.child,_t=Qe.sibling,C=Bo(Qe,{mode:"hidden",children:C.children}),C.subtreeFlags=Qe.subtreeFlags&65011712,_t!==null?Re=Bo(_t,Re):(Re=lu(Re,M,v,null),Re.flags|=2),Re.return=m,C.return=m,C.sibling=Re,m.child=C,Dp(null,C),C=m.child,Re=u.child.memoizedState,Re===null?Re=d5(v):(M=Re.cachePool,M!==null?(Qe=Hs._currentValue,M=M.parent!==Qe?{parent:Qe,pool:Qe}:M):M=Ve(),Re={baseLanes:Re.baseLanes|v,cachePool:M}),C.memoizedState=Re,C.childLanes=u5(u,he,v),m.memoizedState=c5,Dp(u.child,C)):($s(m),v=u.child,u=v.sibling,v=Bo(v,{mode:"visible",children:C.children}),v.return=m,v.sibling=null,u!==null&&(he=m.deletions,he===null?(m.deletions=[u],m.flags|=16):he.push(u)),m.child=v,m.memoizedState=null,v)}function h5(u,m){return m=Sv({mode:"visible",children:m},u.mode),m.return=u,u.child=m}function Sv(u,m){return u=dl(22,u,null,m),u.lanes=0,u}function f5(u,m,v){return ds(m,u.child,null,v),u=h5(m,m.pendingProps.children),u.flags|=2,m.memoizedState=null,u}function hE(u,m,v){u.lanes|=m;var C=u.alternate;C!==null&&(C.lanes|=m),fh(u.return,m,v)}function m5(u,m,v,C,M,V){var he=u.memoizedState;he===null?u.memoizedState={isBackwards:m,rendering:null,renderingStartTime:0,last:C,tail:v,tailMode:M,treeForkCount:V}:(he.isBackwards=m,he.rendering=null,he.renderingStartTime=0,he.last=C,he.tail=v,he.tailMode=M,he.treeForkCount=V)}function fE(u,m,v){var C=m.pendingProps,M=C.revealOrder,V=C.tail;C=C.children;var he=ga.current,Re=(he&2)!==0;if(Re?(he=he&1|2,m.flags|=128):he&=1,ee(ga,he),Al(u,m,C,v),C=oa?Ef:0,!Re&&u!==null&&(u.flags&128)!==0)e:for(u=m.child;u!==null;){if(u.tag===13)u.memoizedState!==null&&hE(u,v,m);else if(u.tag===19)hE(u,v,m);else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===m)break e;for(;u.sibling===null;){if(u.return===null||u.return===m)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}switch(M){case"forwards":for(v=m.child,M=null;v!==null;)u=v.alternate,u!==null&&hl(u)===null&&(M=v),v=v.sibling;v=M,v===null?(M=m.child,m.child=null):(M=v.sibling,v.sibling=null),m5(m,!1,M,v,V,C);break;case"backwards":case"unstable_legacy-backwards":for(v=null,M=m.child,m.child=null;M!==null;){if(u=M.alternate,u!==null&&hl(u)===null){m.child=M;break}u=M.sibling,M.sibling=v,v=M,M=u}m5(m,!0,v,null,V,C);break;case"together":m5(m,!1,null,null,void 0,C);break;default:m.memoizedState=null}return m.child}function i0(u,m,v){if(u!==null&&(m.dependencies=u.dependencies),wh|=m.lanes,(v&m.childLanes)===0)if(u!==null){if(hu(u,m,v,!1),(v&m.childLanes)===0)return null}else return null;if(u!==null&&m.child!==u.child)throw Error(n(153));if(m.child!==null){for(u=m.child,v=Bo(u,u.pendingProps),m.child=v,v.return=m;u.sibling!==null;)u=u.sibling,v=v.sibling=Bo(u,u.pendingProps),v.return=m;v.sibling=null}return m.child}function x5(u,m){return(u.lanes&m)!==0?!0:(u=u.dependencies,!!(u!==null&&gx(u)))}function aK(u,m,v){switch(m.tag){case 3:me(m,m.stateNode.containerInfo),uu(m,Hs,u.memoizedState.cache),t0();break;case 27:case 5:je(m);break;case 4:me(m,m.stateNode.containerInfo);break;case 10:uu(m,m.type,m.memoizedProps.value);break;case 31:if(m.memoizedState!==null)return m.flags|=128,Ra(m),null;break;case 13:var C=m.memoizedState;if(C!==null)return C.dehydrated!==null?($s(m),m.flags|=128,null):(v&m.child.childLanes)!==0?uE(u,m,v):($s(m),u=i0(u,m,v),u!==null?u.sibling:null);$s(m);break;case 19:var M=(u.flags&128)!==0;if(C=(v&m.childLanes)!==0,C||(hu(u,m,v,!1),C=(v&m.childLanes)!==0),M){if(C)return fE(u,m,v);m.flags|=128}if(M=m.memoizedState,M!==null&&(M.rendering=null,M.tail=null,M.lastEffect=null),ee(ga,ga.current),C)break;return null;case 22:return m.lanes=0,sE(u,m,v,m.pendingProps);case 24:uu(m,Hs,u.memoizedState.cache)}return i0(u,m,v)}function mE(u,m,v){if(u!==null)if(u.memoizedProps!==m.pendingProps)Ti=!0;else{if(!x5(u,v)&&(m.flags&128)===0)return Ti=!1,aK(u,m,v);Ti=(u.flags&131072)!==0}else Ti=!1,oa&&(m.flags&1048576)!==0&&hv(m,Ef,m.index);switch(m.lanes=0,m.tag){case 16:e:{var C=m.pendingProps;if(u=wt(m.elementType),m.type=u,typeof u=="function")ux(u)?(C=Df(u,C),m.tag=1,m=cE(null,m,u,C,v)):(m.tag=0,m=o5(null,m,u,C,v));else{if(u!=null){var M=u.$$typeof;if(M===D){m.tag=11,m=rE(null,m,u,C,v);break e}else if(M===R){m.tag=14,m=nE(null,m,u,C,v);break e}}throw m=ae(u)||u,Error(n(306,m,""))}}return m;case 0:return o5(u,m,m.type,m.pendingProps,v);case 1:return C=m.type,M=Df(C,m.pendingProps),cE(u,m,C,M,v);case 3:e:{if(me(m,m.stateNode.containerInfo),u===null)throw Error(n(387));C=m.pendingProps;var V=m.memoizedState;M=V.element,vs(u,m),Zs(m,C,null,v);var he=m.memoizedState;if(C=he.cache,uu(m,Hs,C),C!==V.cache&&r0(m,[Hs],v,!0),Za(),C=he.element,V.isDehydrated)if(V={element:C,isDehydrated:!1,cache:he.cache},m.updateQueue.baseState=V,m.memoizedState=V,m.flags&256){m=dE(u,m,C,v);break e}else if(C!==M){M=Uo(Error(n(424)),m),hh(M),m=dE(u,m,C,v);break e}else{switch(u=m.stateNode.containerInfo,u.nodeType){case 9:u=u.body;break;default:u=u.nodeName==="HTML"?u.ownerDocument.body:u}for(cs=Kc(u.firstChild),zi=m,oa=!0,jl=null,Os=!0,v=Hn(m,null,C,v),m.child=v;v;)v.flags=v.flags&-3|4096,v=v.sibling}else{if(t0(),C===M){m=i0(u,m,v);break e}Al(u,m,C,v)}m=m.child}return m;case 26:return _v(u,m),u===null?(v=S8(m.type,null,m.pendingProps,null))?m.memoizedState=v:oa||(v=m.type,u=m.pendingProps,C=zv(Q.current).createElement(v),C[Ie]=m,C[oe]=u,El(C,v,u),Sr(C),m.stateNode=C):m.memoizedState=S8(m.type,u.memoizedProps,m.pendingProps,u.memoizedState),null;case 27:return je(m),u===null&&oa&&(C=m.stateNode=k8(m.type,m.pendingProps,Q.current),zi=m,Os=!0,M=cs,jh(m.type)?(G5=M,cs=Kc(C.firstChild)):cs=M),Al(u,m,m.pendingProps.children,v),_v(u,m),u===null&&(m.flags|=4194304),m.child;case 5:return u===null&&oa&&((M=C=cs)&&(C=DK(C,m.type,m.pendingProps,Os),C!==null?(m.stateNode=C,zi=m,cs=Kc(C.firstChild),Os=!1,M=!0):M=!1),M||cu(m)),je(m),M=m.type,V=m.pendingProps,he=u!==null?u.memoizedProps:null,C=V.children,H5(M,V)?C=null:he!==null&&H5(M,he)&&(m.flags|=32),m.memoizedState!==null&&(M=Sp(u,m,Yk,null,null,v),Xp._currentValue=M),_v(u,m),Al(u,m,C,v),m.child;case 6:return u===null&&oa&&((u=v=cs)&&(v=MK(v,m.pendingProps,Os),v!==null?(m.stateNode=v,zi=m,cs=null,u=!0):u=!1),u||cu(m)),null;case 13:return uE(u,m,v);case 4:return me(m,m.stateNode.containerInfo),C=m.pendingProps,u===null?m.child=ds(m,null,C,v):Al(u,m,C,v),m.child;case 11:return rE(u,m,m.type,m.pendingProps,v);case 7:return Al(u,m,m.pendingProps,v),m.child;case 8:return Al(u,m,m.pendingProps.children,v),m.child;case 12:return Al(u,m,m.pendingProps.children,v),m.child;case 10:return C=m.pendingProps,uu(m,m.type,C.value),Al(u,m,C.children,v),m.child;case 9:return M=m.type._context,C=m.pendingProps.children,fu(m),M=Hi(M),C=C(M),m.flags|=1,Al(u,m,C,v),m.child;case 14:return nE(u,m,m.type,m.pendingProps,v);case 15:return aE(u,m,m.type,m.pendingProps,v);case 19:return fE(u,m,v);case 31:return nK(u,m,v);case 22:return sE(u,m,v,m.pendingProps);case 24:return fu(m),C=Hi(Hs),u===null?(M=Fe(),M===null&&(M=us,V=mh(),M.pooledCache=V,V.refCount++,V!==null&&(M.pooledCacheLanes|=v),M=V),m.memoizedState={parent:C,cache:M},jr(m),uu(m,Hs,M)):((u.lanes&v)!==0&&(vs(u,m),Zs(m,null,null,v),Za()),M=u.memoizedState,V=m.memoizedState,M.parent!==C?(M={parent:C,cache:C},m.memoizedState=M,m.lanes===0&&(m.memoizedState=m.updateQueue.baseState=M),uu(m,Hs,C)):(C=V.cache,uu(m,Hs,C),C!==M.cache&&r0(m,[Hs],v,!0))),Al(u,m,m.pendingProps.children,v),m.child;case 29:throw m.pendingProps}throw Error(n(156,m.tag))}function l0(u){u.flags|=4}function p5(u,m,v,C,M){if((m=(u.mode&32)!==0)&&(m=!1),m){if(u.flags|=16777216,(M&335544128)===M)if(u.stateNode.complete)u.flags|=8192;else if(zE())u.flags|=8192;else throw Mt=ft,kt}else u.flags&=-16777217}function xE(u,m){if(m.type!=="stylesheet"||(m.state.loading&4)!==0)u.flags&=-16777217;else if(u.flags|=16777216,!T8(m))if(zE())u.flags|=8192;else throw Mt=ft,kt}function jv(u,m){m!==null&&(u.flags|=4),u.flags&16384&&(m=u.tag!==22?Zt():536870912,u.lanes|=m,Px|=m)}function Mp(u,m){if(!oa)switch(u.tailMode){case"hidden":m=u.tail;for(var v=null;m!==null;)m.alternate!==null&&(v=m),m=m.sibling;v===null?u.tail=null:v.sibling=null;break;case"collapsed":v=u.tail;for(var C=null;v!==null;)v.alternate!==null&&(C=v),v=v.sibling;C===null?m||u.tail===null?u.tail=null:u.tail.sibling=null:C.sibling=null}}function ks(u){var m=u.alternate!==null&&u.alternate.child===u.child,v=0,C=0;if(m)for(var M=u.child;M!==null;)v|=M.lanes|M.childLanes,C|=M.subtreeFlags&65011712,C|=M.flags&65011712,M.return=u,M=M.sibling;else for(M=u.child;M!==null;)v|=M.lanes|M.childLanes,C|=M.subtreeFlags,C|=M.flags,M.return=u,M=M.sibling;return u.subtreeFlags|=C,u.childLanes=v,m}function sK(u,m,v){var C=m.pendingProps;switch(xx(m),m.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ks(m),null;case 1:return ks(m),null;case 3:return v=m.stateNode,C=null,u!==null&&(C=u.memoizedState.cache),m.memoizedState.cache!==C&&(m.flags|=2048),Vo(Hs),ie(),v.pendingContext&&(v.context=v.pendingContext,v.pendingContext=null),(u===null||u.child===null)&&(qi(m)?l0(m):u===null||u.memoizedState.isDehydrated&&(m.flags&256)===0||(m.flags|=1024,Np())),ks(m),null;case 26:var M=m.type,V=m.memoizedState;return u===null?(l0(m),V!==null?(ks(m),xE(m,V)):(ks(m),p5(m,M,null,C,v))):V?V!==u.memoizedState?(l0(m),ks(m),xE(m,V)):(ks(m),m.flags&=-16777217):(u=u.memoizedProps,u!==C&&l0(m),ks(m),p5(m,M,u,C,v)),null;case 27:if(be(m),v=Q.current,M=m.type,u!==null&&m.stateNode!=null)u.memoizedProps!==C&&l0(m);else{if(!C){if(m.stateNode===null)throw Error(n(166));return ks(m),null}u=Y.current,qi(m)?kp(m):(u=k8(M,C,v),m.stateNode=u,l0(m))}return ks(m),null;case 5:if(be(m),M=m.type,u!==null&&m.stateNode!=null)u.memoizedProps!==C&&l0(m);else{if(!C){if(m.stateNode===null)throw Error(n(166));return ks(m),null}if(V=Y.current,qi(m))kp(m);else{var he=zv(Q.current);switch(V){case 1:V=he.createElementNS("http://www.w3.org/2000/svg",M);break;case 2:V=he.createElementNS("http://www.w3.org/1998/Math/MathML",M);break;default:switch(M){case"svg":V=he.createElementNS("http://www.w3.org/2000/svg",M);break;case"math":V=he.createElementNS("http://www.w3.org/1998/Math/MathML",M);break;case"script":V=he.createElement("div"),V.innerHTML="<script><\/script>",V=V.removeChild(V.firstChild);break;case"select":V=typeof C.is=="string"?he.createElement("select",{is:C.is}):he.createElement("select"),C.multiple?V.multiple=!0:C.size&&(V.size=C.size);break;default:V=typeof C.is=="string"?he.createElement(M,{is:C.is}):he.createElement(M)}}V[Ie]=m,V[oe]=C;e:for(he=m.child;he!==null;){if(he.tag===5||he.tag===6)V.appendChild(he.stateNode);else if(he.tag!==4&&he.tag!==27&&he.child!==null){he.child.return=he,he=he.child;continue}if(he===m)break e;for(;he.sibling===null;){if(he.return===null||he.return===m)break e;he=he.return}he.sibling.return=he.return,he=he.sibling}m.stateNode=V;e:switch(El(V,M,C),M){case"button":case"input":case"select":case"textarea":C=!!C.autoFocus;break e;case"img":C=!0;break e;default:C=!1}C&&l0(m)}}return ks(m),p5(m,m.type,u===null?null:u.memoizedProps,m.pendingProps,v),null;case 6:if(u&&m.stateNode!=null)u.memoizedProps!==C&&l0(m);else{if(typeof C!="string"&&m.stateNode===null)throw Error(n(166));if(u=Q.current,qi(m)){if(u=m.stateNode,v=m.memoizedProps,C=null,M=zi,M!==null)switch(M.tag){case 27:case 5:C=M.memoizedProps}u[Ie]=m,u=!!(u.nodeValue===v||C!==null&&C.suppressHydrationWarning===!0||u8(u.nodeValue,v)),u||cu(m,!0)}else u=zv(u).createTextNode(C),u[Ie]=m,m.stateNode=u}return ks(m),null;case 31:if(v=m.memoizedState,u===null||u.memoizedState!==null){if(C=qi(m),v!==null){if(u===null){if(!C)throw Error(n(318));if(u=m.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(n(557));u[Ie]=m}else t0(),(m.flags&128)===0&&(m.memoizedState=null),m.flags|=4;ks(m),u=!1}else v=Np(),u!==null&&u.memoizedState!==null&&(u.memoizedState.hydrationErrors=v),u=!0;if(!u)return m.flags&256?(qa(m),m):(qa(m),null);if((m.flags&128)!==0)throw Error(n(558))}return ks(m),null;case 13:if(C=m.memoizedState,u===null||u.memoizedState!==null&&u.memoizedState.dehydrated!==null){if(M=qi(m),C!==null&&C.dehydrated!==null){if(u===null){if(!M)throw Error(n(318));if(M=m.memoizedState,M=M!==null?M.dehydrated:null,!M)throw Error(n(317));M[Ie]=m}else t0(),(m.flags&128)===0&&(m.memoizedState=null),m.flags|=4;ks(m),M=!1}else M=Np(),u!==null&&u.memoizedState!==null&&(u.memoizedState.hydrationErrors=M),M=!0;if(!M)return m.flags&256?(qa(m),m):(qa(m),null)}return qa(m),(m.flags&128)!==0?(m.lanes=v,m):(v=C!==null,u=u!==null&&u.memoizedState!==null,v&&(C=m.child,M=null,C.alternate!==null&&C.alternate.memoizedState!==null&&C.alternate.memoizedState.cachePool!==null&&(M=C.alternate.memoizedState.cachePool.pool),V=null,C.memoizedState!==null&&C.memoizedState.cachePool!==null&&(V=C.memoizedState.cachePool.pool),V!==M&&(C.flags|=2048)),v!==u&&v&&(m.child.flags|=8192),jv(m,m.updateQueue),ks(m),null);case 4:return ie(),u===null&&F5(m.stateNode.containerInfo),ks(m),null;case 10:return Vo(m.type),ks(m),null;case 19:if(B(ga),C=m.memoizedState,C===null)return ks(m),null;if(M=(m.flags&128)!==0,V=C.rendering,V===null)if(M)Mp(C,!1);else{if(ri!==0||u!==null&&(u.flags&128)!==0)for(u=m.child;u!==null;){if(V=hl(u),V!==null){for(m.flags|=128,Mp(C,!1),u=V.updateQueue,m.updateQueue=u,jv(m,u),m.subtreeFlags=0,u=v,v=m.child;v!==null;)Cf(v,u),v=v.sibling;return ee(ga,ga.current&1|2),oa&&go(m,C.treeForkCount),m.child}u=u.sibling}C.tail!==null&&fr()>Ov&&(m.flags|=128,M=!0,Mp(C,!1),m.lanes=4194304)}else{if(!M)if(u=hl(V),u!==null){if(m.flags|=128,M=!0,u=u.updateQueue,m.updateQueue=u,jv(m,u),Mp(C,!0),C.tail===null&&C.tailMode==="hidden"&&!V.alternate&&!oa)return ks(m),null}else 2*fr()-C.renderingStartTime>Ov&&v!==536870912&&(m.flags|=128,M=!0,Mp(C,!1),m.lanes=4194304);C.isBackwards?(V.sibling=m.child,m.child=V):(u=C.last,u!==null?u.sibling=V:m.child=V,C.last=V)}return C.tail!==null?(u=C.tail,C.rendering=u,C.tail=u.sibling,C.renderingStartTime=fr(),u.sibling=null,v=ga.current,ee(ga,M?v&1|2:v&1),oa&&go(m,C.treeForkCount),u):(ks(m),null);case 22:case 23:return qa(m),bi(),C=m.memoizedState!==null,u!==null?u.memoizedState!==null!==C&&(m.flags|=8192):C&&(m.flags|=8192),C?(v&536870912)!==0&&(m.flags&128)===0&&(ks(m),m.subtreeFlags&6&&(m.flags|=8192)):ks(m),v=m.updateQueue,v!==null&&jv(m,v.retryQueue),v=null,u!==null&&u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(v=u.memoizedState.cachePool.pool),C=null,m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(C=m.memoizedState.cachePool.pool),C!==v&&(m.flags|=2048),u!==null&&B(Pe),null;case 24:return v=null,u!==null&&(v=u.memoizedState.cache),m.memoizedState.cache!==v&&(m.flags|=2048),Vo(Hs),ks(m),null;case 25:return null;case 30:return null}throw Error(n(156,m.tag))}function iK(u,m){switch(xx(m),m.tag){case 1:return u=m.flags,u&65536?(m.flags=u&-65537|128,m):null;case 3:return Vo(Hs),ie(),u=m.flags,(u&65536)!==0&&(u&128)===0?(m.flags=u&-65537|128,m):null;case 26:case 27:case 5:return be(m),null;case 31:if(m.memoizedState!==null){if(qa(m),m.alternate===null)throw Error(n(340));t0()}return u=m.flags,u&65536?(m.flags=u&-65537|128,m):null;case 13:if(qa(m),u=m.memoizedState,u!==null&&u.dehydrated!==null){if(m.alternate===null)throw Error(n(340));t0()}return u=m.flags,u&65536?(m.flags=u&-65537|128,m):null;case 19:return B(ga),null;case 4:return ie(),null;case 10:return Vo(m.type),null;case 22:case 23:return qa(m),bi(),u!==null&&B(Pe),u=m.flags,u&65536?(m.flags=u&-65537|128,m):null;case 24:return Vo(Hs),null;case 25:return null;default:return null}}function pE(u,m){switch(xx(m),m.tag){case 3:Vo(Hs),ie();break;case 26:case 27:case 5:be(m);break;case 4:ie();break;case 31:m.memoizedState!==null&&qa(m);break;case 13:qa(m);break;case 19:B(ga);break;case 10:Vo(m.type);break;case 22:case 23:qa(m),bi(),u!==null&&B(Pe);break;case 24:Vo(Hs)}}function Lp(u,m){try{var v=m.updateQueue,C=v!==null?v.lastEffect:null;if(C!==null){var M=C.next;v=M;do{if((v.tag&u)===u){C=void 0;var V=v.create,he=v.inst;C=V(),he.destroy=C}v=v.next}while(v!==M)}}catch(Re){$a(m,m.return,Re)}}function vh(u,m,v){try{var C=m.updateQueue,M=C!==null?C.lastEffect:null;if(M!==null){var V=M.next;C=V;do{if((C.tag&u)===u){var he=C.inst,Re=he.destroy;if(Re!==void 0){he.destroy=void 0,M=m;var Qe=v,_t=Re;try{_t()}catch(Ht){$a(M,Qe,Ht)}}}C=C.next}while(C!==V)}}catch(Ht){$a(m,m.return,Ht)}}function gE(u){var m=u.updateQueue;if(m!==null){var v=u.stateNode;try{Qs(m,v)}catch(C){$a(u,u.return,C)}}}function bE(u,m,v){v.props=Df(u.type,u.memoizedProps),v.state=u.memoizedState;try{v.componentWillUnmount()}catch(C){$a(u,m,C)}}function Rp(u,m){try{var v=u.ref;if(v!==null){switch(u.tag){case 26:case 27:case 5:var C=u.stateNode;break;case 30:C=u.stateNode;break;default:C=u.stateNode}typeof v=="function"?u.refCleanup=v(C):v.current=C}}catch(M){$a(u,m,M)}}function bu(u,m){var v=u.ref,C=u.refCleanup;if(v!==null)if(typeof C=="function")try{C()}catch(M){$a(u,m,M)}finally{u.refCleanup=null,u=u.alternate,u!=null&&(u.refCleanup=null)}else if(typeof v=="function")try{v(null)}catch(M){$a(u,m,M)}else v.current=null}function vE(u){var m=u.type,v=u.memoizedProps,C=u.stateNode;try{e:switch(m){case"button":case"input":case"select":case"textarea":v.autoFocus&&C.focus();break e;case"img":v.src?C.src=v.src:v.srcSet&&(C.srcset=v.srcSet)}}catch(M){$a(u,u.return,M)}}function g5(u,m,v){try{var C=u.stateNode;AK(C,u.type,v,m),C[oe]=m}catch(M){$a(u,u.return,M)}}function yE(u){return u.tag===5||u.tag===3||u.tag===26||u.tag===27&&jh(u.type)||u.tag===4}function b5(u){e:for(;;){for(;u.sibling===null;){if(u.return===null||yE(u.return))return null;u=u.return}for(u.sibling.return=u.return,u=u.sibling;u.tag!==5&&u.tag!==6&&u.tag!==18;){if(u.tag===27&&jh(u.type)||u.flags&2||u.child===null||u.tag===4)continue e;u.child.return=u,u=u.child}if(!(u.flags&2))return u.stateNode}}function v5(u,m,v){var C=u.tag;if(C===5||C===6)u=u.stateNode,m?(v.nodeType===9?v.body:v.nodeName==="HTML"?v.ownerDocument.body:v).insertBefore(u,m):(m=v.nodeType===9?v.body:v.nodeName==="HTML"?v.ownerDocument.body:v,m.appendChild(u),v=v._reactRootContainer,v!=null||m.onclick!==null||(m.onclick=nl));else if(C!==4&&(C===27&&jh(u.type)&&(v=u.stateNode,m=null),u=u.child,u!==null))for(v5(u,m,v),u=u.sibling;u!==null;)v5(u,m,v),u=u.sibling}function Cv(u,m,v){var C=u.tag;if(C===5||C===6)u=u.stateNode,m?v.insertBefore(u,m):v.appendChild(u);else if(C!==4&&(C===27&&jh(u.type)&&(v=u.stateNode),u=u.child,u!==null))for(Cv(u,m,v),u=u.sibling;u!==null;)Cv(u,m,v),u=u.sibling}function wE(u){var m=u.stateNode,v=u.memoizedProps;try{for(var C=u.type,M=m.attributes;M.length;)m.removeAttributeNode(M[0]);El(m,C,v),m[Ie]=u,m[oe]=v}catch(V){$a(u,u.return,V)}}var o0=!1,Oi=!1,y5=!1,kE=typeof WeakSet=="function"?WeakSet:Set,fl=null;function lK(u,m){if(u=u.containerInfo,z5=Gv,u=ge(u),Ae(u)){if("selectionStart"in u)var v={start:u.selectionStart,end:u.selectionEnd};else e:{v=(v=u.ownerDocument)&&v.defaultView||window;var C=v.getSelection&&v.getSelection();if(C&&C.rangeCount!==0){v=C.anchorNode;var M=C.anchorOffset,V=C.focusNode;C=C.focusOffset;try{v.nodeType,V.nodeType}catch{v=null;break e}var he=0,Re=-1,Qe=-1,_t=0,Ht=0,er=u,At=null;t:for(;;){for(var It;er!==v||M!==0&&er.nodeType!==3||(Re=he+M),er!==V||C!==0&&er.nodeType!==3||(Qe=he+C),er.nodeType===3&&(he+=er.nodeValue.length),(It=er.firstChild)!==null;)At=er,er=It;for(;;){if(er===u)break t;if(At===v&&++_t===M&&(Re=he),At===V&&++Ht===C&&(Qe=he),(It=er.nextSibling)!==null)break;er=At,At=er.parentNode}er=It}v=Re===-1||Qe===-1?null:{start:Re,end:Qe}}else v=null}v=v||{start:0,end:0}}else v=null;for(q5={focusedElem:u,selectionRange:v},Gv=!1,fl=m;fl!==null;)if(m=fl,u=m.child,(m.subtreeFlags&1028)!==0&&u!==null)u.return=m,fl=u;else for(;fl!==null;){switch(m=fl,V=m.alternate,u=m.flags,m.tag){case 0:if((u&4)!==0&&(u=m.updateQueue,u=u!==null?u.events:null,u!==null))for(v=0;v<u.length;v++)M=u[v],M.ref.impl=M.nextImpl;break;case 11:case 15:break;case 1:if((u&1024)!==0&&V!==null){u=void 0,v=m,M=V.memoizedProps,V=V.memoizedState,C=v.stateNode;try{var Gr=Df(v.type,M);u=C.getSnapshotBeforeUpdate(Gr,V),C.__reactInternalSnapshotBeforeUpdate=u}catch(Cn){$a(v,v.return,Cn)}}break;case 3:if((u&1024)!==0){if(u=m.stateNode.containerInfo,v=u.nodeType,v===9)V5(u);else if(v===1)switch(u.nodeName){case"HEAD":case"HTML":case"BODY":V5(u);break;default:u.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((u&1024)!==0)throw Error(n(163))}if(u=m.sibling,u!==null){u.return=m.return,fl=u;break}fl=m.return}}function NE(u,m,v){var C=v.flags;switch(v.tag){case 0:case 11:case 15:d0(u,v),C&4&&Lp(5,v);break;case 1:if(d0(u,v),C&4)if(u=v.stateNode,m===null)try{u.componentDidMount()}catch(he){$a(v,v.return,he)}else{var M=Df(v.type,m.memoizedProps);m=m.memoizedState;try{u.componentDidUpdate(M,m,u.__reactInternalSnapshotBeforeUpdate)}catch(he){$a(v,v.return,he)}}C&64&&gE(v),C&512&&Rp(v,v.return);break;case 3:if(d0(u,v),C&64&&(u=v.updateQueue,u!==null)){if(m=null,v.child!==null)switch(v.child.tag){case 27:case 5:m=v.child.stateNode;break;case 1:m=v.child.stateNode}try{Qs(u,m)}catch(he){$a(v,v.return,he)}}break;case 27:m===null&&C&4&&wE(v);case 26:case 5:d0(u,v),m===null&&C&4&&vE(v),C&512&&Rp(v,v.return);break;case 12:d0(u,v);break;case 31:d0(u,v),C&4&&jE(u,v);break;case 13:d0(u,v),C&4&&CE(u,v),C&64&&(u=v.memoizedState,u!==null&&(u=u.dehydrated,u!==null&&(v=pK.bind(null,v),LK(u,v))));break;case 22:if(C=v.memoizedState!==null||o0,!C){m=m!==null&&m.memoizedState!==null||Oi,M=o0;var V=Oi;o0=C,(Oi=m)&&!V?u0(u,v,(v.subtreeFlags&8772)!==0):d0(u,v),o0=M,Oi=V}break;case 30:break;default:d0(u,v)}}function _E(u){var m=u.alternate;m!==null&&(u.alternate=null,_E(m)),u.child=null,u.deletions=null,u.sibling=null,u.tag===5&&(m=u.stateNode,m!==null&&Rt(m)),u.stateNode=null,u.return=null,u.dependencies=null,u.memoizedProps=null,u.memoizedState=null,u.pendingProps=null,u.stateNode=null,u.updateQueue=null}var Ds=null,Ko=!1;function c0(u,m,v){for(v=v.child;v!==null;)SE(u,m,v),v=v.sibling}function SE(u,m,v){if(xt&&typeof xt.onCommitFiberUnmount=="function")try{xt.onCommitFiberUnmount(ar,v)}catch{}switch(v.tag){case 26:Oi||bu(v,m),c0(u,m,v),v.memoizedState?v.memoizedState.count--:v.stateNode&&(v=v.stateNode,v.parentNode.removeChild(v));break;case 27:Oi||bu(v,m);var C=Ds,M=Ko;jh(v.type)&&(Ds=v.stateNode,Ko=!1),c0(u,m,v),Wp(v.stateNode),Ds=C,Ko=M;break;case 5:Oi||bu(v,m);case 6:if(C=Ds,M=Ko,Ds=null,c0(u,m,v),Ds=C,Ko=M,Ds!==null)if(Ko)try{(Ds.nodeType===9?Ds.body:Ds.nodeName==="HTML"?Ds.ownerDocument.body:Ds).removeChild(v.stateNode)}catch(V){$a(v,m,V)}else try{Ds.removeChild(v.stateNode)}catch(V){$a(v,m,V)}break;case 18:Ds!==null&&(Ko?(u=Ds,g8(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,v.stateNode),Ux(u)):g8(Ds,v.stateNode));break;case 4:C=Ds,M=Ko,Ds=v.stateNode.containerInfo,Ko=!0,c0(u,m,v),Ds=C,Ko=M;break;case 0:case 11:case 14:case 15:vh(2,v,m),Oi||vh(4,v,m),c0(u,m,v);break;case 1:Oi||(bu(v,m),C=v.stateNode,typeof C.componentWillUnmount=="function"&&bE(v,m,C)),c0(u,m,v);break;case 21:c0(u,m,v);break;case 22:Oi=(C=Oi)||v.memoizedState!==null,c0(u,m,v),Oi=C;break;default:c0(u,m,v)}}function jE(u,m){if(m.memoizedState===null&&(u=m.alternate,u!==null&&(u=u.memoizedState,u!==null))){u=u.dehydrated;try{Ux(u)}catch(v){$a(m,m.return,v)}}}function CE(u,m){if(m.memoizedState===null&&(u=m.alternate,u!==null&&(u=u.memoizedState,u!==null&&(u=u.dehydrated,u!==null))))try{Ux(u)}catch(v){$a(m,m.return,v)}}function oK(u){switch(u.tag){case 31:case 13:case 19:var m=u.stateNode;return m===null&&(m=u.stateNode=new kE),m;case 22:return u=u.stateNode,m=u._retryCache,m===null&&(m=u._retryCache=new kE),m;default:throw Error(n(435,u.tag))}}function Av(u,m){var v=oK(u);m.forEach(function(C){if(!v.has(C)){v.add(C);var M=gK.bind(null,u,C);C.then(M,M)}})}function Go(u,m){var v=m.deletions;if(v!==null)for(var C=0;C<v.length;C++){var M=v[C],V=u,he=m,Re=he;e:for(;Re!==null;){switch(Re.tag){case 27:if(jh(Re.type)){Ds=Re.stateNode,Ko=!1;break e}break;case 5:Ds=Re.stateNode,Ko=!1;break e;case 3:case 4:Ds=Re.stateNode.containerInfo,Ko=!0;break e}Re=Re.return}if(Ds===null)throw Error(n(160));SE(V,he,M),Ds=null,Ko=!1,V=M.alternate,V!==null&&(V.return=null),M.return=null}if(m.subtreeFlags&13886)for(m=m.child;m!==null;)AE(m,u),m=m.sibling}var Md=null;function AE(u,m){var v=u.alternate,C=u.flags;switch(u.tag){case 0:case 11:case 14:case 15:Go(m,u),Xo(u),C&4&&(vh(3,u,u.return),Lp(3,u),vh(5,u,u.return));break;case 1:Go(m,u),Xo(u),C&512&&(Oi||v===null||bu(v,v.return)),C&64&&o0&&(u=u.updateQueue,u!==null&&(C=u.callbacks,C!==null&&(v=u.shared.hiddenCallbacks,u.shared.hiddenCallbacks=v===null?C:v.concat(C))));break;case 26:var M=Md;if(Go(m,u),Xo(u),C&512&&(Oi||v===null||bu(v,v.return)),C&4){var V=v!==null?v.memoizedState:null;if(C=u.memoizedState,v===null)if(C===null)if(u.stateNode===null){e:{C=u.type,v=u.memoizedProps,M=M.ownerDocument||M;t:switch(C){case"title":V=M.getElementsByTagName("title")[0],(!V||V[ct]||V[Ie]||V.namespaceURI==="http://www.w3.org/2000/svg"||V.hasAttribute("itemprop"))&&(V=M.createElement(C),M.head.insertBefore(V,M.querySelector("head > title"))),El(V,C,v),V[Ie]=u,Sr(V),C=V;break e;case"link":var he=A8("link","href",M).get(C+(v.href||""));if(he){for(var Re=0;Re<he.length;Re++)if(V=he[Re],V.getAttribute("href")===(v.href==null||v.href===""?null:v.href)&&V.getAttribute("rel")===(v.rel==null?null:v.rel)&&V.getAttribute("title")===(v.title==null?null:v.title)&&V.getAttribute("crossorigin")===(v.crossOrigin==null?null:v.crossOrigin)){he.splice(Re,1);break t}}V=M.createElement(C),El(V,C,v),M.head.appendChild(V);break;case"meta":if(he=A8("meta","content",M).get(C+(v.content||""))){for(Re=0;Re<he.length;Re++)if(V=he[Re],V.getAttribute("content")===(v.content==null?null:""+v.content)&&V.getAttribute("name")===(v.name==null?null:v.name)&&V.getAttribute("property")===(v.property==null?null:v.property)&&V.getAttribute("http-equiv")===(v.httpEquiv==null?null:v.httpEquiv)&&V.getAttribute("charset")===(v.charSet==null?null:v.charSet)){he.splice(Re,1);break t}}V=M.createElement(C),El(V,C,v),M.head.appendChild(V);break;default:throw Error(n(468,C))}V[Ie]=u,Sr(V),C=V}u.stateNode=C}else E8(M,u.type,u.stateNode);else u.stateNode=C8(M,C,u.memoizedProps);else V!==C?(V===null?v.stateNode!==null&&(v=v.stateNode,v.parentNode.removeChild(v)):V.count--,C===null?E8(M,u.type,u.stateNode):C8(M,C,u.memoizedProps)):C===null&&u.stateNode!==null&&g5(u,u.memoizedProps,v.memoizedProps)}break;case 27:Go(m,u),Xo(u),C&512&&(Oi||v===null||bu(v,v.return)),v!==null&&C&4&&g5(u,u.memoizedProps,v.memoizedProps);break;case 5:if(Go(m,u),Xo(u),C&512&&(Oi||v===null||bu(v,v.return)),u.flags&32){M=u.stateNode;try{is(M,"")}catch(Gr){$a(u,u.return,Gr)}}C&4&&u.stateNode!=null&&(M=u.memoizedProps,g5(u,M,v!==null?v.memoizedProps:M)),C&1024&&(y5=!0);break;case 6:if(Go(m,u),Xo(u),C&4){if(u.stateNode===null)throw Error(n(162));C=u.memoizedProps,v=u.stateNode;try{v.nodeValue=C}catch(Gr){$a(u,u.return,Gr)}}break;case 3:if($v=null,M=Md,Md=qv(m.containerInfo),Go(m,u),Md=M,Xo(u),C&4&&v!==null&&v.memoizedState.isDehydrated)try{Ux(m.containerInfo)}catch(Gr){$a(u,u.return,Gr)}y5&&(y5=!1,EE(u));break;case 4:C=Md,Md=qv(u.stateNode.containerInfo),Go(m,u),Xo(u),Md=C;break;case 12:Go(m,u),Xo(u);break;case 31:Go(m,u),Xo(u),C&4&&(C=u.updateQueue,C!==null&&(u.updateQueue=null,Av(u,C)));break;case 13:Go(m,u),Xo(u),u.child.flags&8192&&u.memoizedState!==null!=(v!==null&&v.memoizedState!==null)&&(Tv=fr()),C&4&&(C=u.updateQueue,C!==null&&(u.updateQueue=null,Av(u,C)));break;case 22:M=u.memoizedState!==null;var Qe=v!==null&&v.memoizedState!==null,_t=o0,Ht=Oi;if(o0=_t||M,Oi=Ht||Qe,Go(m,u),Oi=Ht,o0=_t,Xo(u),C&8192)e:for(m=u.stateNode,m._visibility=M?m._visibility&-2:m._visibility|1,M&&(v===null||Qe||o0||Oi||Mf(u)),v=null,m=u;;){if(m.tag===5||m.tag===26){if(v===null){Qe=v=m;try{if(V=Qe.stateNode,M)he=V.style,typeof he.setProperty=="function"?he.setProperty("display","none","important"):he.display="none";else{Re=Qe.stateNode;var er=Qe.memoizedProps.style,At=er!=null&&er.hasOwnProperty("display")?er.display:null;Re.style.display=At==null||typeof At=="boolean"?"":(""+At).trim()}}catch(Gr){$a(Qe,Qe.return,Gr)}}}else if(m.tag===6){if(v===null){Qe=m;try{Qe.stateNode.nodeValue=M?"":Qe.memoizedProps}catch(Gr){$a(Qe,Qe.return,Gr)}}}else if(m.tag===18){if(v===null){Qe=m;try{var It=Qe.stateNode;M?b8(It,!0):b8(Qe.stateNode,!1)}catch(Gr){$a(Qe,Qe.return,Gr)}}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===u)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===u)break e;for(;m.sibling===null;){if(m.return===null||m.return===u)break e;v===m&&(v=null),m=m.return}v===m&&(v=null),m.sibling.return=m.return,m=m.sibling}C&4&&(C=u.updateQueue,C!==null&&(v=C.retryQueue,v!==null&&(C.retryQueue=null,Av(u,v))));break;case 19:Go(m,u),Xo(u),C&4&&(C=u.updateQueue,C!==null&&(u.updateQueue=null,Av(u,C)));break;case 30:break;case 21:break;default:Go(m,u),Xo(u)}}function Xo(u){var m=u.flags;if(m&2){try{for(var v,C=u.return;C!==null;){if(yE(C)){v=C;break}C=C.return}if(v==null)throw Error(n(160));switch(v.tag){case 27:var M=v.stateNode,V=b5(u);Cv(u,V,M);break;case 5:var he=v.stateNode;v.flags&32&&(is(he,""),v.flags&=-33);var Re=b5(u);Cv(u,Re,he);break;case 3:case 4:var Qe=v.stateNode.containerInfo,_t=b5(u);v5(u,_t,Qe);break;default:throw Error(n(161))}}catch(Ht){$a(u,u.return,Ht)}u.flags&=-3}m&4096&&(u.flags&=-4097)}function EE(u){if(u.subtreeFlags&1024)for(u=u.child;u!==null;){var m=u;EE(m),m.tag===5&&m.flags&1024&&m.stateNode.reset(),u=u.sibling}}function d0(u,m){if(m.subtreeFlags&8772)for(m=m.child;m!==null;)NE(u,m.alternate,m),m=m.sibling}function Mf(u){for(u=u.child;u!==null;){var m=u;switch(m.tag){case 0:case 11:case 14:case 15:vh(4,m,m.return),Mf(m);break;case 1:bu(m,m.return);var v=m.stateNode;typeof v.componentWillUnmount=="function"&&bE(m,m.return,v),Mf(m);break;case 27:Wp(m.stateNode);case 26:case 5:bu(m,m.return),Mf(m);break;case 22:m.memoizedState===null&&Mf(m);break;case 30:Mf(m);break;default:Mf(m)}u=u.sibling}}function u0(u,m,v){for(v=v&&(m.subtreeFlags&8772)!==0,m=m.child;m!==null;){var C=m.alternate,M=u,V=m,he=V.flags;switch(V.tag){case 0:case 11:case 15:u0(M,V,v),Lp(4,V);break;case 1:if(u0(M,V,v),C=V,M=C.stateNode,typeof M.componentDidMount=="function")try{M.componentDidMount()}catch(_t){$a(C,C.return,_t)}if(C=V,M=C.updateQueue,M!==null){var Re=C.stateNode;try{var Qe=M.shared.hiddenCallbacks;if(Qe!==null)for(M.shared.hiddenCallbacks=null,M=0;M<Qe.length;M++)ul(Qe[M],Re)}catch(_t){$a(C,C.return,_t)}}v&&he&64&&gE(V),Rp(V,V.return);break;case 27:wE(V);case 26:case 5:u0(M,V,v),v&&C===null&&he&4&&vE(V),Rp(V,V.return);break;case 12:u0(M,V,v);break;case 31:u0(M,V,v),v&&he&4&&jE(M,V);break;case 13:u0(M,V,v),v&&he&4&&CE(M,V);break;case 22:V.memoizedState===null&&u0(M,V,v),Rp(V,V.return);break;case 30:break;default:u0(M,V,v)}m=m.sibling}}function w5(u,m){var v=null;u!==null&&u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(v=u.memoizedState.cachePool.pool),u=null,m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(u=m.memoizedState.cachePool.pool),u!==v&&(u!=null&&u.refCount++,v!=null&&Tf(v))}function k5(u,m){u=null,m.alternate!==null&&(u=m.alternate.memoizedState.cache),m=m.memoizedState.cache,m!==u&&(m.refCount++,u!=null&&Tf(u))}function Ld(u,m,v,C){if(m.subtreeFlags&10256)for(m=m.child;m!==null;)TE(u,m,v,C),m=m.sibling}function TE(u,m,v,C){var M=m.flags;switch(m.tag){case 0:case 11:case 15:Ld(u,m,v,C),M&2048&&Lp(9,m);break;case 1:Ld(u,m,v,C);break;case 3:Ld(u,m,v,C),M&2048&&(u=null,m.alternate!==null&&(u=m.alternate.memoizedState.cache),m=m.memoizedState.cache,m!==u&&(m.refCount++,u!=null&&Tf(u)));break;case 12:if(M&2048){Ld(u,m,v,C),u=m.stateNode;try{var V=m.memoizedProps,he=V.id,Re=V.onPostCommit;typeof Re=="function"&&Re(he,m.alternate===null?"mount":"update",u.passiveEffectDuration,-0)}catch(Qe){$a(m,m.return,Qe)}}else Ld(u,m,v,C);break;case 31:Ld(u,m,v,C);break;case 13:Ld(u,m,v,C);break;case 23:break;case 22:V=m.stateNode,he=m.alternate,m.memoizedState!==null?V._visibility&2?Ld(u,m,v,C):Fp(u,m):V._visibility&2?Ld(u,m,v,C):(V._visibility|=2,Ex(u,m,v,C,(m.subtreeFlags&10256)!==0||!1)),M&2048&&w5(he,m);break;case 24:Ld(u,m,v,C),M&2048&&k5(m.alternate,m);break;default:Ld(u,m,v,C)}}function Ex(u,m,v,C,M){for(M=M&&((m.subtreeFlags&10256)!==0||!1),m=m.child;m!==null;){var V=u,he=m,Re=v,Qe=C,_t=he.flags;switch(he.tag){case 0:case 11:case 15:Ex(V,he,Re,Qe,M),Lp(8,he);break;case 23:break;case 22:var Ht=he.stateNode;he.memoizedState!==null?Ht._visibility&2?Ex(V,he,Re,Qe,M):Fp(V,he):(Ht._visibility|=2,Ex(V,he,Re,Qe,M)),M&&_t&2048&&w5(he.alternate,he);break;case 24:Ex(V,he,Re,Qe,M),M&&_t&2048&&k5(he.alternate,he);break;default:Ex(V,he,Re,Qe,M)}m=m.sibling}}function Fp(u,m){if(m.subtreeFlags&10256)for(m=m.child;m!==null;){var v=u,C=m,M=C.flags;switch(C.tag){case 22:Fp(v,C),M&2048&&w5(C.alternate,C);break;case 24:Fp(v,C),M&2048&&k5(C.alternate,C);break;default:Fp(v,C)}m=m.sibling}}var Bp=8192;function Tx(u,m,v){if(u.subtreeFlags&Bp)for(u=u.child;u!==null;)OE(u,m,v),u=u.sibling}function OE(u,m,v){switch(u.tag){case 26:Tx(u,m,v),u.flags&Bp&&u.memoizedState!==null&&GK(v,Md,u.memoizedState,u.memoizedProps);break;case 5:Tx(u,m,v);break;case 3:case 4:var C=Md;Md=qv(u.stateNode.containerInfo),Tx(u,m,v),Md=C;break;case 22:u.memoizedState===null&&(C=u.alternate,C!==null&&C.memoizedState!==null?(C=Bp,Bp=16777216,Tx(u,m,v),Bp=C):Tx(u,m,v));break;default:Tx(u,m,v)}}function PE(u){var m=u.alternate;if(m!==null&&(u=m.child,u!==null)){m.child=null;do m=u.sibling,u.sibling=null,u=m;while(u!==null)}}function Up(u){var m=u.deletions;if((u.flags&16)!==0){if(m!==null)for(var v=0;v<m.length;v++){var C=m[v];fl=C,DE(C,u)}PE(u)}if(u.subtreeFlags&10256)for(u=u.child;u!==null;)IE(u),u=u.sibling}function IE(u){switch(u.tag){case 0:case 11:case 15:Up(u),u.flags&2048&&vh(9,u,u.return);break;case 3:Up(u);break;case 12:Up(u);break;case 22:var m=u.stateNode;u.memoizedState!==null&&m._visibility&2&&(u.return===null||u.return.tag!==13)?(m._visibility&=-3,Ev(u)):Up(u);break;default:Up(u)}}function Ev(u){var m=u.deletions;if((u.flags&16)!==0){if(m!==null)for(var v=0;v<m.length;v++){var C=m[v];fl=C,DE(C,u)}PE(u)}for(u=u.child;u!==null;){switch(m=u,m.tag){case 0:case 11:case 15:vh(8,m,m.return),Ev(m);break;case 22:v=m.stateNode,v._visibility&2&&(v._visibility&=-3,Ev(m));break;default:Ev(m)}u=u.sibling}}function DE(u,m){for(;fl!==null;){var v=fl;switch(v.tag){case 0:case 11:case 15:vh(8,v,m);break;case 23:case 22:if(v.memoizedState!==null&&v.memoizedState.cachePool!==null){var C=v.memoizedState.cachePool.pool;C!=null&&C.refCount++}break;case 24:Tf(v.memoizedState.cache)}if(C=v.child,C!==null)C.return=v,fl=C;else e:for(v=u;fl!==null;){C=fl;var M=C.sibling,V=C.return;if(_E(C),C===v){fl=null;break e}if(M!==null){M.return=V,fl=M;break e}fl=V}}}var cK={getCacheForType:function(u){var m=Hi(Hs),v=m.data.get(u);return v===void 0&&(v=u(),m.data.set(u,v)),v},cacheSignal:function(){return Hi(Hs).controller.signal}},dK=typeof WeakMap=="function"?WeakMap:Map,Fa=0,us=null,ca=null,ma=0,Ha=0,dc=null,yh=!1,Ox=!1,N5=!1,h0=0,ri=0,wh=0,Lf=0,_5=0,uc=0,Px=0,zp=null,Yo=null,S5=!1,Tv=0,ME=0,Ov=1/0,Pv=null,kh=null,Vi=0,Nh=null,Ix=null,f0=0,j5=0,C5=null,LE=null,qp=0,A5=null;function hc(){return(Fa&2)!==0&&ma!==0?ma&-ma:ue.T!==null?D5():we()}function RE(){if(uc===0)if((ma&536870912)===0||oa){var u=wr;wr<<=1,(wr&3932160)===0&&(wr=262144),uc=u}else uc=536870912;return u=ws.current,u!==null&&(u.flags|=32),uc}function Zo(u,m,v){(u===us&&(Ha===2||Ha===9)||u.cancelPendingCommit!==null)&&(Dx(u,0),_h(u,ma,uc,!1)),sr(u,v),((Fa&2)===0||u!==us)&&(u===us&&((Fa&2)===0&&(Lf|=v),ri===4&&_h(u,ma,uc,!1)),vu(u))}function FE(u,m,v){if((Fa&6)!==0)throw Error(n(327));var C=!v&&(m&127)===0&&(m&u.expiredLanes)===0||Br(u,m),M=C?fK(u,m):T5(u,m,!0),V=C;do{if(M===0){Ox&&!C&&_h(u,m,0,!1);break}else{if(v=u.current.alternate,V&&!uK(v)){M=T5(u,m,!1),V=!1;continue}if(M===2){if(V=m,u.errorRecoveryDisabledLanes&V)var he=0;else he=u.pendingLanes&-536870913,he=he!==0?he:he&536870912?536870912:0;if(he!==0){m=he;e:{var Re=u;M=zp;var Qe=Re.current.memoizedState.isDehydrated;if(Qe&&(Dx(Re,he).flags|=256),he=T5(Re,he,!1),he!==2){if(N5&&!Qe){Re.errorRecoveryDisabledLanes|=V,Lf|=V,M=4;break e}V=Yo,Yo=M,V!==null&&(Yo===null?Yo=V:Yo.push.apply(Yo,V))}M=he}if(V=!1,M!==2)continue}}if(M===1){Dx(u,0),_h(u,m,0,!0);break}e:{switch(C=u,V=M,V){case 0:case 1:throw Error(n(345));case 4:if((m&4194048)!==m)break;case 6:_h(C,m,uc,!yh);break e;case 2:Yo=null;break;case 3:case 5:break;default:throw Error(n(329))}if((m&62914560)===m&&(M=Tv+300-fr(),10<M)){if(_h(C,m,uc,!yh),ur(C,0,!0)!==0)break e;f0=m,C.timeoutHandle=x8(BE.bind(null,C,v,Yo,Pv,S5,m,uc,Lf,Px,yh,V,"Throttled",-0,0),M);break e}BE(C,v,Yo,Pv,S5,m,uc,Lf,Px,yh,V,null,-0,0)}}break}while(!0);vu(u)}function BE(u,m,v,C,M,V,he,Re,Qe,_t,Ht,er,At,It){if(u.timeoutHandle=-1,er=m.subtreeFlags,er&8192||(er&16785408)===16785408){er={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:nl},OE(m,V,er);var Gr=(V&62914560)===V?Tv-fr():(V&4194048)===V?ME-fr():0;if(Gr=XK(er,Gr),Gr!==null){f0=V,u.cancelPendingCommit=Gr(KE.bind(null,u,m,V,v,C,M,he,Re,Qe,Ht,er,null,At,It)),_h(u,V,he,!_t);return}}KE(u,m,V,v,C,M,he,Re,Qe)}function uK(u){for(var m=u;;){var v=m.tag;if((v===0||v===11||v===15)&&m.flags&16384&&(v=m.updateQueue,v!==null&&(v=v.stores,v!==null)))for(var C=0;C<v.length;C++){var M=v[C],V=M.getSnapshot;M=M.value;try{if(!A(V(),M))return!1}catch{return!1}}if(v=m.child,m.subtreeFlags&16384&&v!==null)v.return=m,m=v;else{if(m===u)break;for(;m.sibling===null;){if(m.return===null||m.return===u)return!0;m=m.return}m.sibling.return=m.return,m=m.sibling}}return!0}function _h(u,m,v,C){m&=~_5,m&=~Lf,u.suspendedLanes|=m,u.pingedLanes&=~m,C&&(u.warmLanes|=m),C=u.expirationTimes;for(var M=m;0<M;){var V=31-Ge(M),he=1<<V;C[V]=-1,M&=~he}v!==0&&qr(u,v,m)}function Iv(){return(Fa&6)===0?(Hp(0),!1):!0}function E5(){if(ca!==null){if(Ha===0)var u=ca.return;else u=ca,$c=du=null,kx(u),tr=null,Xr=0,u=ca;for(;u!==null;)pE(u.alternate,u),u=u.return;ca=null}}function Dx(u,m){var v=u.timeoutHandle;v!==-1&&(u.timeoutHandle=-1,OK(v)),v=u.cancelPendingCommit,v!==null&&(u.cancelPendingCommit=null,v()),f0=0,E5(),us=u,ca=v=Bo(u.current,null),ma=m,Ha=0,dc=null,yh=!1,Ox=Br(u,m),N5=!1,Px=uc=_5=Lf=wh=ri=0,Yo=zp=null,S5=!1,(m&8)!==0&&(m|=m&32);var C=u.entangledLanes;if(C!==0)for(u=u.entanglements,C&=m;0<C;){var M=31-Ge(C),V=1<<M;m|=u[M],C&=~V}return h0=m,_f(),v}function UE(u,m){fn=null,ue.H=Ip,m===it||m===$e?(m=Wt(),Ha=3):m===kt?(m=Wt(),Ha=4):Ha=m===l5?8:m!==null&&typeof m=="object"&&typeof m.then=="function"?6:1,dc=m,ca===null&&(ri=1,kv(u,Uo(m,u.current)))}function zE(){var u=ws.current;return u===null?!0:(ma&4194048)===ma?wa===null:(ma&62914560)===ma||(ma&536870912)!==0?u===wa:!1}function qE(){var u=ue.H;return ue.H=Ip,u===null?Ip:u}function HE(){var u=ue.A;return ue.A=cK,u}function Dv(){ri=4,yh||(ma&4194048)!==ma&&ws.current!==null||(Ox=!0),(wh&134217727)===0&&(Lf&134217727)===0||us===null||_h(us,ma,uc,!1)}function T5(u,m,v){var C=Fa;Fa|=2;var M=qE(),V=HE();(us!==u||ma!==m)&&(Pv=null,Dx(u,m)),m=!1;var he=ri;e:do try{if(Ha!==0&&ca!==null){var Re=ca,Qe=dc;switch(Ha){case 8:E5(),he=6;break e;case 3:case 2:case 9:case 6:ws.current===null&&(m=!0);var _t=Ha;if(Ha=0,dc=null,Mx(u,Re,Qe,_t),v&&Ox){he=0;break e}break;default:_t=Ha,Ha=0,dc=null,Mx(u,Re,Qe,_t)}}hK(),he=ri;break}catch(Ht){UE(u,Ht)}while(!0);return m&&u.shellSuspendCounter++,$c=du=null,Fa=C,ue.H=M,ue.A=V,ca===null&&(us=null,ma=0,_f()),he}function hK(){for(;ca!==null;)$E(ca)}function fK(u,m){var v=Fa;Fa|=2;var C=qE(),M=HE();us!==u||ma!==m?(Pv=null,Ov=fr()+500,Dx(u,m)):Ox=Br(u,m);e:do try{if(Ha!==0&&ca!==null){m=ca;var V=dc;t:switch(Ha){case 1:Ha=0,dc=null,Mx(u,m,V,1);break;case 2:case 9:if(yt(V)){Ha=0,dc=null,VE(m);break}m=function(){Ha!==2&&Ha!==9||us!==u||(Ha=7),vu(u)},V.then(m,m);break e;case 3:Ha=7;break e;case 4:Ha=5;break e;case 7:yt(V)?(Ha=0,dc=null,VE(m)):(Ha=0,dc=null,Mx(u,m,V,7));break;case 5:var he=null;switch(ca.tag){case 26:he=ca.memoizedState;case 5:case 27:var Re=ca;if(he?T8(he):Re.stateNode.complete){Ha=0,dc=null;var Qe=Re.sibling;if(Qe!==null)ca=Qe;else{var _t=Re.return;_t!==null?(ca=_t,Mv(_t)):ca=null}break t}}Ha=0,dc=null,Mx(u,m,V,5);break;case 6:Ha=0,dc=null,Mx(u,m,V,6);break;case 8:E5(),ri=6;break e;default:throw Error(n(462))}}mK();break}catch(Ht){UE(u,Ht)}while(!0);return $c=du=null,ue.H=C,ue.A=M,Fa=v,ca!==null?0:(us=null,ma=0,_f(),ri)}function mK(){for(;ca!==null&&!Kt();)$E(ca)}function $E(u){var m=mE(u.alternate,u,h0);u.memoizedProps=u.pendingProps,m===null?Mv(u):ca=m}function VE(u){var m=u,v=m.alternate;switch(m.tag){case 15:case 0:m=oE(v,m,m.pendingProps,m.type,void 0,ma);break;case 11:m=oE(v,m,m.pendingProps,m.type.render,m.ref,ma);break;case 5:kx(m);default:pE(v,m),m=ca=Cf(m,h0),m=mE(v,m,h0)}u.memoizedProps=u.pendingProps,m===null?Mv(u):ca=m}function Mx(u,m,v,C){$c=du=null,kx(m),tr=null,Xr=0;var M=m.return;try{if(rK(u,M,m,v,ma)){ri=1,kv(u,Uo(v,u.current)),ca=null;return}}catch(V){if(M!==null)throw ca=M,V;ri=1,kv(u,Uo(v,u.current)),ca=null;return}m.flags&32768?(oa||C===1?u=!0:Ox||(ma&536870912)!==0?u=!1:(yh=u=!0,(C===2||C===9||C===3||C===6)&&(C=ws.current,C!==null&&C.tag===13&&(C.flags|=16384))),WE(m,u)):Mv(m)}function Mv(u){var m=u;do{if((m.flags&32768)!==0){WE(m,yh);return}u=m.return;var v=sK(m.alternate,m,h0);if(v!==null){ca=v;return}if(m=m.sibling,m!==null){ca=m;return}ca=m=u}while(m!==null);ri===0&&(ri=5)}function WE(u,m){do{var v=iK(u.alternate,u);if(v!==null){v.flags&=32767,ca=v;return}if(v=u.return,v!==null&&(v.flags|=32768,v.subtreeFlags=0,v.deletions=null),!m&&(u=u.sibling,u!==null)){ca=u;return}ca=u=v}while(u!==null);ri=6,ca=null}function KE(u,m,v,C,M,V,he,Re,Qe){u.cancelPendingCommit=null;do Lv();while(Vi!==0);if((Fa&6)!==0)throw Error(n(327));if(m!==null){if(m===u.current)throw Error(n(177));if(V=m.lanes|m.childLanes,V|=ox,Or(u,v,V,he,Re,Qe),u===us&&(ca=us=null,ma=0),Ix=m,Nh=u,f0=v,j5=V,C5=M,LE=C,(m.subtreeFlags&10256)!==0||(m.flags&10256)!==0?(u.callbackNode=null,u.callbackPriority=0,bK(rr,function(){return QE(),null})):(u.callbackNode=null,u.callbackPriority=0),C=(m.flags&13878)!==0,(m.subtreeFlags&13878)!==0||C){C=ue.T,ue.T=null,M=fe.p,fe.p=2,he=Fa,Fa|=4;try{lK(u,m,v)}finally{Fa=he,fe.p=M,ue.T=C}}Vi=1,GE(),XE(),YE()}}function GE(){if(Vi===1){Vi=0;var u=Nh,m=Ix,v=(m.flags&13878)!==0;if((m.subtreeFlags&13878)!==0||v){v=ue.T,ue.T=null;var C=fe.p;fe.p=2;var M=Fa;Fa|=4;try{AE(m,u);var V=q5,he=ge(u.containerInfo),Re=V.focusedElem,Qe=V.selectionRange;if(he!==Re&&Re&&Re.ownerDocument&&ce(Re.ownerDocument.documentElement,Re)){if(Qe!==null&&Ae(Re)){var _t=Qe.start,Ht=Qe.end;if(Ht===void 0&&(Ht=_t),"selectionStart"in Re)Re.selectionStart=_t,Re.selectionEnd=Math.min(Ht,Re.value.length);else{var er=Re.ownerDocument||document,At=er&&er.defaultView||window;if(At.getSelection){var It=At.getSelection(),Gr=Re.textContent.length,Cn=Math.min(Qe.start,Gr),es=Qe.end===void 0?Cn:Math.min(Qe.end,Gr);!It.extend&&Cn>es&&(he=es,es=Cn,Cn=he);var bt=X(Re,Cn),dt=X(Re,es);if(bt&&dt&&(It.rangeCount!==1||It.anchorNode!==bt.node||It.anchorOffset!==bt.offset||It.focusNode!==dt.node||It.focusOffset!==dt.offset)){var Nt=er.createRange();Nt.setStart(bt.node,bt.offset),It.removeAllRanges(),Cn>es?(It.addRange(Nt),It.extend(dt.node,dt.offset)):(Nt.setEnd(dt.node,dt.offset),It.addRange(Nt))}}}}for(er=[],It=Re;It=It.parentNode;)It.nodeType===1&&er.push({element:It,left:It.scrollLeft,top:It.scrollTop});for(typeof Re.focus=="function"&&Re.focus(),Re=0;Re<er.length;Re++){var Qt=er[Re];Qt.element.scrollLeft=Qt.left,Qt.element.scrollTop=Qt.top}}Gv=!!z5,q5=z5=null}finally{Fa=M,fe.p=C,ue.T=v}}u.current=m,Vi=2}}function XE(){if(Vi===2){Vi=0;var u=Nh,m=Ix,v=(m.flags&8772)!==0;if((m.subtreeFlags&8772)!==0||v){v=ue.T,ue.T=null;var C=fe.p;fe.p=2;var M=Fa;Fa|=4;try{NE(u,m.alternate,m)}finally{Fa=M,fe.p=C,ue.T=v}}Vi=3}}function YE(){if(Vi===4||Vi===3){Vi=0,Dt();var u=Nh,m=Ix,v=f0,C=LE;(m.subtreeFlags&10256)!==0||(m.flags&10256)!==0?Vi=5:(Vi=0,Ix=Nh=null,ZE(u,u.pendingLanes));var M=u.pendingLanes;if(M===0&&(kh=null),Nn(v),m=m.stateNode,xt&&typeof xt.onCommitFiberRoot=="function")try{xt.onCommitFiberRoot(ar,m,void 0,(m.current.flags&128)===128)}catch{}if(C!==null){m=ue.T,M=fe.p,fe.p=2,ue.T=null;try{for(var V=u.onRecoverableError,he=0;he<C.length;he++){var Re=C[he];V(Re.value,{componentStack:Re.stack})}}finally{ue.T=m,fe.p=M}}(f0&3)!==0&&Lv(),vu(u),M=u.pendingLanes,(v&261930)!==0&&(M&42)!==0?u===A5?qp++:(qp=0,A5=u):qp=0,Hp(0)}}function ZE(u,m){(u.pooledCacheLanes&=m)===0&&(m=u.pooledCache,m!=null&&(u.pooledCache=null,Tf(m)))}function Lv(){return GE(),XE(),YE(),QE()}function QE(){if(Vi!==5)return!1;var u=Nh,m=j5;j5=0;var v=Nn(f0),C=ue.T,M=fe.p;try{fe.p=32>v?32:v,ue.T=null,v=C5,C5=null;var V=Nh,he=f0;if(Vi=0,Ix=Nh=null,f0=0,(Fa&6)!==0)throw Error(n(331));var Re=Fa;if(Fa|=4,IE(V.current),TE(V,V.current,he,v),Fa=Re,Hp(0,!1),xt&&typeof xt.onPostCommitFiberRoot=="function")try{xt.onPostCommitFiberRoot(ar,V)}catch{}return!0}finally{fe.p=M,ue.T=C,ZE(u,m)}}function JE(u,m,v){m=Uo(v,m),m=i5(u.stateNode,m,2),u=Wn(u,m,2),u!==null&&(sr(u,2),vu(u))}function $a(u,m,v){if(u.tag===3)JE(u,u,v);else for(;m!==null;){if(m.tag===3){JE(m,u,v);break}else if(m.tag===1){var C=m.stateNode;if(typeof m.type.getDerivedStateFromError=="function"||typeof C.componentDidCatch=="function"&&(kh===null||!kh.has(C))){u=Uo(v,u),v=eE(2),C=Wn(m,v,2),C!==null&&(tE(v,C,m,u),sr(C,2),vu(C));break}}m=m.return}}function O5(u,m,v){var C=u.pingCache;if(C===null){C=u.pingCache=new dK;var M=new Set;C.set(m,M)}else M=C.get(m),M===void 0&&(M=new Set,C.set(m,M));M.has(v)||(N5=!0,M.add(v),u=xK.bind(null,u,m,v),m.then(u,u))}function xK(u,m,v){var C=u.pingCache;C!==null&&C.delete(m),u.pingedLanes|=u.suspendedLanes&v,u.warmLanes&=~v,us===u&&(ma&v)===v&&(ri===4||ri===3&&(ma&62914560)===ma&&300>fr()-Tv?(Fa&2)===0&&Dx(u,0):_5|=v,Px===ma&&(Px=0)),vu(u)}function e8(u,m){m===0&&(m=Zt()),u=Ed(u,m),u!==null&&(sr(u,m),vu(u))}function pK(u){var m=u.memoizedState,v=0;m!==null&&(v=m.retryLane),e8(u,v)}function gK(u,m){var v=0;switch(u.tag){case 31:case 13:var C=u.stateNode,M=u.memoizedState;M!==null&&(v=M.retryLane);break;case 19:C=u.stateNode;break;case 22:C=u.stateNode._retryCache;break;default:throw Error(n(314))}C!==null&&C.delete(m),e8(u,v)}function bK(u,m){return ot(u,m)}var Rv=null,Lx=null,P5=!1,Fv=!1,I5=!1,Sh=0;function vu(u){u!==Lx&&u.next===null&&(Lx===null?Rv=Lx=u:Lx=Lx.next=u),Fv=!0,P5||(P5=!0,yK())}function Hp(u,m){if(!I5&&Fv){I5=!0;do for(var v=!1,C=Rv;C!==null;){if(u!==0){var M=C.pendingLanes;if(M===0)var V=0;else{var he=C.suspendedLanes,Re=C.pingedLanes;V=(1<<31-Ge(42|u)+1)-1,V&=M&~(he&~Re),V=V&201326741?V&201326741|1:V?V|2:0}V!==0&&(v=!0,a8(C,V))}else V=ma,V=ur(C,C===us?V:0,C.cancelPendingCommit!==null||C.timeoutHandle!==-1),(V&3)===0||Br(C,V)||(v=!0,a8(C,V));C=C.next}while(v);I5=!1}}function vK(){t8()}function t8(){Fv=P5=!1;var u=0;Sh!==0&&TK()&&(u=Sh);for(var m=fr(),v=null,C=Rv;C!==null;){var M=C.next,V=r8(C,m);V===0?(C.next=null,v===null?Rv=M:v.next=M,M===null&&(Lx=v)):(v=C,(u!==0||(V&3)!==0)&&(Fv=!0)),C=M}Vi!==0&&Vi!==5||Hp(u),Sh!==0&&(Sh=0)}function r8(u,m){for(var v=u.suspendedLanes,C=u.pingedLanes,M=u.expirationTimes,V=u.pendingLanes&-62914561;0<V;){var he=31-Ge(V),Re=1<<he,Qe=M[he];Qe===-1?((Re&v)===0||(Re&C)!==0)&&(M[he]=Tr(Re,m)):Qe<=m&&(u.expiredLanes|=Re),V&=~Re}if(m=us,v=ma,v=ur(u,u===m?v:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),C=u.callbackNode,v===0||u===m&&(Ha===2||Ha===9)||u.cancelPendingCommit!==null)return C!==null&&C!==null&&We(C),u.callbackNode=null,u.callbackPriority=0;if((v&3)===0||Br(u,v)){if(m=v&-v,m===u.callbackPriority)return m;switch(C!==null&&We(C),Nn(v)){case 2:case 8:v=Mr;break;case 32:v=rr;break;case 268435456:v=Vt;break;default:v=rr}return C=n8.bind(null,u),v=ot(v,C),u.callbackPriority=m,u.callbackNode=v,m}return C!==null&&C!==null&&We(C),u.callbackPriority=2,u.callbackNode=null,2}function n8(u,m){if(Vi!==0&&Vi!==5)return u.callbackNode=null,u.callbackPriority=0,null;var v=u.callbackNode;if(Lv()&&u.callbackNode!==v)return null;var C=ma;return C=ur(u,u===us?C:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),C===0?null:(FE(u,C,m),r8(u,fr()),u.callbackNode!=null&&u.callbackNode===v?n8.bind(null,u):null)}function a8(u,m){if(Lv())return null;FE(u,m,!0)}function yK(){PK(function(){(Fa&6)!==0?ot(nr,vK):t8()})}function D5(){if(Sh===0){var u=P;u===0&&(u=Er,Er<<=1,(Er&261888)===0&&(Er=256)),Sh=u}return Sh}function s8(u){return u==null||typeof u=="symbol"||typeof u=="boolean"?null:typeof u=="function"?u:kl(""+u)}function i8(u,m){var v=m.ownerDocument.createElement("input");return v.name=m.name,v.value=m.value,u.id&&v.setAttribute("form",u.id),m.parentNode.insertBefore(v,m),u=new FormData(u),v.parentNode.removeChild(v),u}function wK(u,m,v,C,M){if(m==="submit"&&v&&v.stateNode===M){var V=s8((M[oe]||null).action),he=C.submitter;he&&(m=(m=he[oe]||null)?s8(m.formAction):he.getAttribute("formAction"),m!==null&&(V=m,he=null));var Re=new ls("action","action",null,C,M);u.push({event:Re,listeners:[{instance:null,listener:function(){if(C.defaultPrevented){if(Sh!==0){var Qe=he?i8(M,he):new FormData(M);e5(v,{pending:!0,data:Qe,method:M.method,action:V},null,Qe)}}else typeof V=="function"&&(Re.preventDefault(),Qe=he?i8(M,he):new FormData(M),e5(v,{pending:!0,data:Qe,method:M.method,action:V},V,Qe))},currentTarget:M}]})}}for(var M5=0;M5<Ad.length;M5++){var L5=Ad[M5],kK=L5.toLowerCase(),NK=L5[0].toUpperCase()+L5.slice(1);Fo(kK,"on"+NK)}Fo(pi,"onAnimationEnd"),Fo(Xs,"onAnimationIteration"),Fo(ja,"onAnimationStart"),Fo("dblclick","onDoubleClick"),Fo("focusin","onFocus"),Fo("focusout","onBlur"),Fo(Ys,"onTransitionRun"),Fo(ol,"onTransitionStart"),Fo(Cd,"onTransitionCancel"),Fo(Hc,"onTransitionEnd"),Na("onMouseEnter",["mouseout","mouseover"]),Na("onMouseLeave",["mouseout","mouseover"]),Na("onPointerEnter",["pointerout","pointerover"]),Na("onPointerLeave",["pointerout","pointerover"]),en("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),en("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),en("onBeforeInput",["compositionend","keypress","textInput","paste"]),en("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),en("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),en("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $p="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_K=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat($p));function l8(u,m){m=(m&4)!==0;for(var v=0;v<u.length;v++){var C=u[v],M=C.event;C=C.listeners;e:{var V=void 0;if(m)for(var he=C.length-1;0<=he;he--){var Re=C[he],Qe=Re.instance,_t=Re.currentTarget;if(Re=Re.listener,Qe!==V&&M.isPropagationStopped())break e;V=Re,M.currentTarget=_t;try{V(M)}catch(Ht){Nf(Ht)}M.currentTarget=null,V=Qe}else for(he=0;he<C.length;he++){if(Re=C[he],Qe=Re.instance,_t=Re.currentTarget,Re=Re.listener,Qe!==V&&M.isPropagationStopped())break e;V=Re,M.currentTarget=_t;try{V(M)}catch(Ht){Nf(Ht)}M.currentTarget=null,V=Qe}}}}function da(u,m){var v=m[ze];v===void 0&&(v=m[ze]=new Set);var C=u+"__bubble";v.has(C)||(o8(m,u,2,!1),v.add(C))}function R5(u,m,v){var C=0;m&&(C|=4),o8(v,u,C,m)}var Bv="_reactListening"+Math.random().toString(36).slice(2);function F5(u){if(!u[Bv]){u[Bv]=!0,Pt.forEach(function(v){v!=="selectionchange"&&(_K.has(v)||R5(v,!1,u),R5(v,!0,u))});var m=u.nodeType===9?u:u.ownerDocument;m===null||m[Bv]||(m[Bv]=!0,R5("selectionchange",!1,m))}}function o8(u,m,v,C){switch(R8(m)){case 2:var M=QK;break;case 8:M=JK;break;default:M=J5}v=M.bind(null,m,v,u),M=void 0,!Zu||m!=="touchstart"&&m!=="touchmove"&&m!=="wheel"||(M=!0),C?M!==void 0?u.addEventListener(m,v,{capture:!0,passive:M}):u.addEventListener(m,v,!0):M!==void 0?u.addEventListener(m,v,{passive:M}):u.addEventListener(m,v,!1)}function B5(u,m,v,C,M){var V=C;if((m&1)===0&&(m&2)===0&&C!==null)e:for(;;){if(C===null)return;var he=C.tag;if(he===3||he===4){var Re=C.stateNode.containerInfo;if(Re===M)break;if(he===4)for(he=C.return;he!==null;){var Qe=he.tag;if((Qe===3||Qe===4)&&he.stateNode.containerInfo===M)return;he=he.return}for(;Re!==null;){if(he=Xt(Re),he===null)return;if(Qe=he.tag,Qe===5||Qe===6||Qe===26||Qe===27){C=V=he;continue e}Re=Re.parentNode}}C=C.return}oh(function(){var _t=V,Ht=kd(v),er=[];e:{var At=kf.get(u);if(At!==void 0){var It=ls,Gr=u;switch(u){case"keypress":if(_l(v)===0)break e;case"keydown":case"keyup":It=aa;break;case"focusin":Gr="focus",It=oc;break;case"focusout":Gr="blur",It=oc;break;case"beforeblur":case"afterblur":It=oc;break;case"click":if(v.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":It=Gn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":It=jd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":It=qs;break;case pi:case Xs:case ja:It=G;break;case Hc:It=os;break;case"scroll":case"scrollend":It=_d;break;case"wheel":It=sl;break;case"copy":case"cut":case"paste":It=He;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":It=jn;break;case"toggle":case"beforetoggle":It=Fc}var Cn=(m&4)!==0,es=!Cn&&(u==="scroll"||u==="scrollend"),bt=Cn?At!==null?At+"Capture":null:At;Cn=[];for(var dt=_t,Nt;dt!==null;){var Qt=dt;if(Nt=Qt.stateNode,Qt=Qt.tag,Qt!==5&&Qt!==26&&Qt!==27||Nt===null||bt===null||(Qt=hn(dt,bt),Qt!=null&&Cn.push(Vp(dt,Qt,Nt))),es)break;dt=dt.return}0<Cn.length&&(At=new It(At,Gr,null,v,Ht),er.push({event:At,listeners:Cn}))}}if((m&7)===0){e:{if(At=u==="mouseover"||u==="pointerover",It=u==="mouseout"||u==="pointerout",At&&v!==co&&(Gr=v.relatedTarget||v.fromElement)&&(Xt(Gr)||Gr[ne]))break e;if((It||At)&&(At=Ht.window===Ht?Ht:(At=Ht.ownerDocument)?At.defaultView||At.parentWindow:window,It?(Gr=v.relatedTarget||v.toElement,It=_t,Gr=Gr?Xt(Gr):null,Gr!==null&&(es=i(Gr),Cn=Gr.tag,Gr!==es||Cn!==5&&Cn!==27&&Cn!==6)&&(Gr=null)):(It=null,Gr=_t),It!==Gr)){if(Cn=Gn,Qt="onMouseLeave",bt="onMouseEnter",dt="mouse",(u==="pointerout"||u==="pointerover")&&(Cn=jn,Qt="onPointerLeave",bt="onPointerEnter",dt="pointer"),es=It==null?At:ir(It),Nt=Gr==null?At:ir(Gr),At=new Cn(Qt,dt+"leave",It,v,Ht),At.target=es,At.relatedTarget=Nt,Qt=null,Xt(Ht)===_t&&(Cn=new Cn(bt,dt+"enter",Gr,v,Ht),Cn.target=Nt,Cn.relatedTarget=es,Qt=Cn),es=Qt,It&&Gr)t:{for(Cn=SK,bt=It,dt=Gr,Nt=0,Qt=bt;Qt;Qt=Cn(Qt))Nt++;Qt=0;for(var vn=dt;vn;vn=Cn(vn))Qt++;for(;0<Nt-Qt;)bt=Cn(bt),Nt--;for(;0<Qt-Nt;)dt=Cn(dt),Qt--;for(;Nt--;){if(bt===dt||dt!==null&&bt===dt.alternate){Cn=bt;break t}bt=Cn(bt),dt=Cn(dt)}Cn=null}else Cn=null;It!==null&&c8(er,At,It,Cn,!1),Gr!==null&&es!==null&&c8(er,es,Gr,Cn,!0)}}e:{if(At=_t?ir(_t):window,It=At.nodeName&&At.nodeName.toLowerCase(),It==="select"||It==="input"&&At.type==="file")var Oa=mi;else if(iu(At))if(il)Oa=_;else{Oa=x;var rn=h}else It=At.nodeName,!It||It.toLowerCase()!=="input"||At.type!=="checkbox"&&At.type!=="radio"?_t&&na(_t.elementType)&&(Oa=mi):Oa=b;if(Oa&&(Oa=Oa(u,_t))){ps(er,Oa,v,Ht);break e}rn&&rn(u,At,_t),u==="focusout"&&_t&&At.type==="number"&&_t.memoizedProps.value!=null&&Be(At,"number",At.value)}switch(rn=_t?ir(_t):window,u){case"focusin":(iu(rn)||rn.contentEditable==="true")&&(Ye=rn,rt=_t,pt=null);break;case"focusout":pt=rt=Ye=null;break;case"mousedown":St=!0;break;case"contextmenu":case"mouseup":case"dragend":St=!1,zt(er,v,Ht);break;case"selectionchange":if(qe)break;case"keydown":case"keyup":zt(er,v,Ht)}var Xn;if(Rl)e:{switch(u){case"compositionstart":var xa="onCompositionStart";break e;case"compositionend":xa="onCompositionEnd";break e;case"compositionupdate":xa="onCompositionUpdate";break e}xa=void 0}else Ro?qc(u,v)&&(xa="onCompositionEnd"):u==="keydown"&&v.keyCode===229&&(xa="onCompositionStart");xa&&(zc&&v.locale!=="ko"&&(Ro||xa!=="onCompositionStart"?xa==="onCompositionEnd"&&Ro&&(Xn=ho()):(al=Ht,Nl="value"in al?al.value:al.textContent,Ro=!0)),rn=Uv(_t,xa),0<rn.length&&(xa=new gt(xa,u,null,v,Ht),er.push({event:xa,listeners:rn}),Xn?xa.data=Xn:(Xn=Lo(v),Xn!==null&&(xa.data=Xn)))),(Xn=Uc?Sa(u,v):Bl(u,v))&&(xa=Uv(_t,"onBeforeInput"),0<xa.length&&(rn=new gt("onBeforeInput","beforeinput",null,v,Ht),er.push({event:rn,listeners:xa}),rn.data=Xn)),wK(er,u,_t,v,Ht)}l8(er,m)})}function Vp(u,m,v){return{instance:u,listener:m,currentTarget:v}}function Uv(u,m){for(var v=m+"Capture",C=[];u!==null;){var M=u,V=M.stateNode;if(M=M.tag,M!==5&&M!==26&&M!==27||V===null||(M=hn(u,v),M!=null&&C.unshift(Vp(u,M,V)),M=hn(u,m),M!=null&&C.push(Vp(u,M,V))),u.tag===3)return C;u=u.return}return[]}function SK(u){if(u===null)return null;do u=u.return;while(u&&u.tag!==5&&u.tag!==27);return u||null}function c8(u,m,v,C,M){for(var V=m._reactName,he=[];v!==null&&v!==C;){var Re=v,Qe=Re.alternate,_t=Re.stateNode;if(Re=Re.tag,Qe!==null&&Qe===C)break;Re!==5&&Re!==26&&Re!==27||_t===null||(Qe=_t,M?(_t=hn(v,V),_t!=null&&he.unshift(Vp(v,_t,Qe))):M||(_t=hn(v,V),_t!=null&&he.push(Vp(v,_t,Qe)))),v=v.return}he.length!==0&&u.push({event:m,listeners:he})}var jK=/\r\n?/g,CK=/\u0000|\uFFFD/g;function d8(u){return(typeof u=="string"?u:""+u).replace(jK,`
`).replace(CK,"")}function u8(u,m){return m=d8(m),d8(u)===m}function Ja(u,m,v,C,M,V){switch(v){case"children":typeof C=="string"?m==="body"||m==="textarea"&&C===""||is(u,C):(typeof C=="number"||typeof C=="bigint")&&m!=="body"&&is(u,""+C);break;case"className":To(u,"class",C);break;case"tabIndex":To(u,"tabindex",C);break;case"dir":case"role":case"viewBox":case"width":case"height":To(u,v,C);break;case"style":Dr(u,C,V);break;case"data":if(m!=="object"){To(u,"data",C);break}case"src":case"href":if(C===""&&(m!=="a"||v!=="href")){u.removeAttribute(v);break}if(C==null||typeof C=="function"||typeof C=="symbol"||typeof C=="boolean"){u.removeAttribute(v);break}C=kl(""+C),u.setAttribute(v,C);break;case"action":case"formAction":if(typeof C=="function"){u.setAttribute(v,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof V=="function"&&(v==="formAction"?(m!=="input"&&Ja(u,m,"name",M.name,M,null),Ja(u,m,"formEncType",M.formEncType,M,null),Ja(u,m,"formMethod",M.formMethod,M,null),Ja(u,m,"formTarget",M.formTarget,M,null)):(Ja(u,m,"encType",M.encType,M,null),Ja(u,m,"method",M.method,M,null),Ja(u,m,"target",M.target,M,null)));if(C==null||typeof C=="symbol"||typeof C=="boolean"){u.removeAttribute(v);break}C=kl(""+C),u.setAttribute(v,C);break;case"onClick":C!=null&&(u.onclick=nl);break;case"onScroll":C!=null&&da("scroll",u);break;case"onScrollEnd":C!=null&&da("scrollend",u);break;case"dangerouslySetInnerHTML":if(C!=null){if(typeof C!="object"||!("__html"in C))throw Error(n(61));if(v=C.__html,v!=null){if(M.children!=null)throw Error(n(60));u.innerHTML=v}}break;case"multiple":u.multiple=C&&typeof C!="function"&&typeof C!="symbol";break;case"muted":u.muted=C&&typeof C!="function"&&typeof C!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(C==null||typeof C=="function"||typeof C=="boolean"||typeof C=="symbol"){u.removeAttribute("xlink:href");break}v=kl(""+C),u.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",v);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":C!=null&&typeof C!="function"&&typeof C!="symbol"?u.setAttribute(v,""+C):u.removeAttribute(v);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":C&&typeof C!="function"&&typeof C!="symbol"?u.setAttribute(v,""):u.removeAttribute(v);break;case"capture":case"download":C===!0?u.setAttribute(v,""):C!==!1&&C!=null&&typeof C!="function"&&typeof C!="symbol"?u.setAttribute(v,C):u.removeAttribute(v);break;case"cols":case"rows":case"size":case"span":C!=null&&typeof C!="function"&&typeof C!="symbol"&&!isNaN(C)&&1<=C?u.setAttribute(v,C):u.removeAttribute(v);break;case"rowSpan":case"start":C==null||typeof C=="function"||typeof C=="symbol"||isNaN(C)?u.removeAttribute(v):u.setAttribute(v,C);break;case"popover":da("beforetoggle",u),da("toggle",u),ss(u,"popover",C);break;case"xlinkActuate":cn(u,"http://www.w3.org/1999/xlink","xlink:actuate",C);break;case"xlinkArcrole":cn(u,"http://www.w3.org/1999/xlink","xlink:arcrole",C);break;case"xlinkRole":cn(u,"http://www.w3.org/1999/xlink","xlink:role",C);break;case"xlinkShow":cn(u,"http://www.w3.org/1999/xlink","xlink:show",C);break;case"xlinkTitle":cn(u,"http://www.w3.org/1999/xlink","xlink:title",C);break;case"xlinkType":cn(u,"http://www.w3.org/1999/xlink","xlink:type",C);break;case"xmlBase":cn(u,"http://www.w3.org/XML/1998/namespace","xml:base",C);break;case"xmlLang":cn(u,"http://www.w3.org/XML/1998/namespace","xml:lang",C);break;case"xmlSpace":cn(u,"http://www.w3.org/XML/1998/namespace","xml:space",C);break;case"is":ss(u,"is",C);break;case"innerText":case"textContent":break;default:(!(2<v.length)||v[0]!=="o"&&v[0]!=="O"||v[1]!=="n"&&v[1]!=="N")&&(v=oo.get(v)||v,ss(u,v,C))}}function U5(u,m,v,C,M,V){switch(v){case"style":Dr(u,C,V);break;case"dangerouslySetInnerHTML":if(C!=null){if(typeof C!="object"||!("__html"in C))throw Error(n(61));if(v=C.__html,v!=null){if(M.children!=null)throw Error(n(60));u.innerHTML=v}}break;case"children":typeof C=="string"?is(u,C):(typeof C=="number"||typeof C=="bigint")&&is(u,""+C);break;case"onScroll":C!=null&&da("scroll",u);break;case"onScrollEnd":C!=null&&da("scrollend",u);break;case"onClick":C!=null&&(u.onclick=nl);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Un.hasOwnProperty(v))e:{if(v[0]==="o"&&v[1]==="n"&&(M=v.endsWith("Capture"),m=v.slice(2,M?v.length-7:void 0),V=u[oe]||null,V=V!=null?V[v]:null,typeof V=="function"&&u.removeEventListener(m,V,M),typeof C=="function")){typeof V!="function"&&V!==null&&(v in u?u[v]=null:u.hasAttribute(v)&&u.removeAttribute(v)),u.addEventListener(m,C,M);break e}v in u?u[v]=C:C===!0?u.setAttribute(v,""):ss(u,v,C)}}}function El(u,m,v){switch(m){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":da("error",u),da("load",u);var C=!1,M=!1,V;for(V in v)if(v.hasOwnProperty(V)){var he=v[V];if(he!=null)switch(V){case"src":C=!0;break;case"srcSet":M=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,m));default:Ja(u,m,V,he,v,null)}}M&&Ja(u,m,"srcSet",v.srcSet,v,null),C&&Ja(u,m,"src",v.src,v,null);return;case"input":da("invalid",u);var Re=V=he=M=null,Qe=null,_t=null;for(C in v)if(v.hasOwnProperty(C)){var Ht=v[C];if(Ht!=null)switch(C){case"name":M=Ht;break;case"type":he=Ht;break;case"checked":Qe=Ht;break;case"defaultChecked":_t=Ht;break;case"value":V=Ht;break;case"defaultValue":Re=Ht;break;case"children":case"dangerouslySetInnerHTML":if(Ht!=null)throw Error(n(137,m));break;default:Ja(u,m,C,Ht,v,null)}}ht(u,V,Re,Qe,_t,he,M,!1);return;case"select":da("invalid",u),C=he=V=null;for(M in v)if(v.hasOwnProperty(M)&&(Re=v[M],Re!=null))switch(M){case"value":V=Re;break;case"defaultValue":he=Re;break;case"multiple":C=Re;default:Ja(u,m,M,Re,v,null)}m=V,v=he,u.multiple=!!C,m!=null?vr(u,!!C,m,!1):v!=null&&vr(u,!!C,v,!0);return;case"textarea":da("invalid",u),V=M=C=null;for(he in v)if(v.hasOwnProperty(he)&&(Re=v[he],Re!=null))switch(he){case"value":C=Re;break;case"defaultValue":M=Re;break;case"children":V=Re;break;case"dangerouslySetInnerHTML":if(Re!=null)throw Error(n(91));break;default:Ja(u,m,he,Re,v,null)}za(u,C,M,V);return;case"option":for(Qe in v)if(v.hasOwnProperty(Qe)&&(C=v[Qe],C!=null))switch(Qe){case"selected":u.selected=C&&typeof C!="function"&&typeof C!="symbol";break;default:Ja(u,m,Qe,C,v,null)}return;case"dialog":da("beforetoggle",u),da("toggle",u),da("cancel",u),da("close",u);break;case"iframe":case"object":da("load",u);break;case"video":case"audio":for(C=0;C<$p.length;C++)da($p[C],u);break;case"image":da("error",u),da("load",u);break;case"details":da("toggle",u);break;case"embed":case"source":case"link":da("error",u),da("load",u);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(_t in v)if(v.hasOwnProperty(_t)&&(C=v[_t],C!=null))switch(_t){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,m));default:Ja(u,m,_t,C,v,null)}return;default:if(na(m)){for(Ht in v)v.hasOwnProperty(Ht)&&(C=v[Ht],C!==void 0&&U5(u,m,Ht,C,v,void 0));return}}for(Re in v)v.hasOwnProperty(Re)&&(C=v[Re],C!=null&&Ja(u,m,Re,C,v,null))}function AK(u,m,v,C){switch(m){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var M=null,V=null,he=null,Re=null,Qe=null,_t=null,Ht=null;for(It in v){var er=v[It];if(v.hasOwnProperty(It)&&er!=null)switch(It){case"checked":break;case"value":break;case"defaultValue":Qe=er;default:C.hasOwnProperty(It)||Ja(u,m,It,null,C,er)}}for(var At in C){var It=C[At];if(er=v[At],C.hasOwnProperty(At)&&(It!=null||er!=null))switch(At){case"type":V=It;break;case"name":M=It;break;case"checked":_t=It;break;case"defaultChecked":Ht=It;break;case"value":he=It;break;case"defaultValue":Re=It;break;case"children":case"dangerouslySetInnerHTML":if(It!=null)throw Error(n(137,m));break;default:It!==er&&Ja(u,m,At,It,C,er)}}dn(u,he,Re,Qe,_t,Ht,V,M);return;case"select":It=he=Re=At=null;for(V in v)if(Qe=v[V],v.hasOwnProperty(V)&&Qe!=null)switch(V){case"value":break;case"multiple":It=Qe;default:C.hasOwnProperty(V)||Ja(u,m,V,null,C,Qe)}for(M in C)if(V=C[M],Qe=v[M],C.hasOwnProperty(M)&&(V!=null||Qe!=null))switch(M){case"value":At=V;break;case"defaultValue":Re=V;break;case"multiple":he=V;default:V!==Qe&&Ja(u,m,M,V,C,Qe)}m=Re,v=he,C=It,At!=null?vr(u,!!v,At,!1):!!C!=!!v&&(m!=null?vr(u,!!v,m,!0):vr(u,!!v,v?[]:"",!1));return;case"textarea":It=At=null;for(Re in v)if(M=v[Re],v.hasOwnProperty(Re)&&M!=null&&!C.hasOwnProperty(Re))switch(Re){case"value":break;case"children":break;default:Ja(u,m,Re,null,C,M)}for(he in C)if(M=C[he],V=v[he],C.hasOwnProperty(he)&&(M!=null||V!=null))switch(he){case"value":At=M;break;case"defaultValue":It=M;break;case"children":break;case"dangerouslySetInnerHTML":if(M!=null)throw Error(n(91));break;default:M!==V&&Ja(u,m,he,M,C,V)}Pn(u,At,It);return;case"option":for(var Gr in v)if(At=v[Gr],v.hasOwnProperty(Gr)&&At!=null&&!C.hasOwnProperty(Gr))switch(Gr){case"selected":u.selected=!1;break;default:Ja(u,m,Gr,null,C,At)}for(Qe in C)if(At=C[Qe],It=v[Qe],C.hasOwnProperty(Qe)&&At!==It&&(At!=null||It!=null))switch(Qe){case"selected":u.selected=At&&typeof At!="function"&&typeof At!="symbol";break;default:Ja(u,m,Qe,At,C,It)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Cn in v)At=v[Cn],v.hasOwnProperty(Cn)&&At!=null&&!C.hasOwnProperty(Cn)&&Ja(u,m,Cn,null,C,At);for(_t in C)if(At=C[_t],It=v[_t],C.hasOwnProperty(_t)&&At!==It&&(At!=null||It!=null))switch(_t){case"children":case"dangerouslySetInnerHTML":if(At!=null)throw Error(n(137,m));break;default:Ja(u,m,_t,At,C,It)}return;default:if(na(m)){for(var es in v)At=v[es],v.hasOwnProperty(es)&&At!==void 0&&!C.hasOwnProperty(es)&&U5(u,m,es,void 0,C,At);for(Ht in C)At=C[Ht],It=v[Ht],!C.hasOwnProperty(Ht)||At===It||At===void 0&&It===void 0||U5(u,m,Ht,At,C,It);return}}for(var bt in v)At=v[bt],v.hasOwnProperty(bt)&&At!=null&&!C.hasOwnProperty(bt)&&Ja(u,m,bt,null,C,At);for(er in C)At=C[er],It=v[er],!C.hasOwnProperty(er)||At===It||At==null&&It==null||Ja(u,m,er,At,C,It)}function h8(u){switch(u){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function EK(){if(typeof performance.getEntriesByType=="function"){for(var u=0,m=0,v=performance.getEntriesByType("resource"),C=0;C<v.length;C++){var M=v[C],V=M.transferSize,he=M.initiatorType,Re=M.duration;if(V&&Re&&h8(he)){for(he=0,Re=M.responseEnd,C+=1;C<v.length;C++){var Qe=v[C],_t=Qe.startTime;if(_t>Re)break;var Ht=Qe.transferSize,er=Qe.initiatorType;Ht&&h8(er)&&(Qe=Qe.responseEnd,he+=Ht*(Qe<Re?1:(Re-_t)/(Qe-_t)))}if(--C,m+=8*(V+he)/(M.duration/1e3),u++,10<u)break}}if(0<u)return m/u/1e6}return navigator.connection&&(u=navigator.connection.downlink,typeof u=="number")?u:5}var z5=null,q5=null;function zv(u){return u.nodeType===9?u:u.ownerDocument}function f8(u){switch(u){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function m8(u,m){if(u===0)switch(m){case"svg":return 1;case"math":return 2;default:return 0}return u===1&&m==="foreignObject"?0:u}function H5(u,m){return u==="textarea"||u==="noscript"||typeof m.children=="string"||typeof m.children=="number"||typeof m.children=="bigint"||typeof m.dangerouslySetInnerHTML=="object"&&m.dangerouslySetInnerHTML!==null&&m.dangerouslySetInnerHTML.__html!=null}var $5=null;function TK(){var u=window.event;return u&&u.type==="popstate"?u===$5?!1:($5=u,!0):($5=null,!1)}var x8=typeof setTimeout=="function"?setTimeout:void 0,OK=typeof clearTimeout=="function"?clearTimeout:void 0,p8=typeof Promise=="function"?Promise:void 0,PK=typeof queueMicrotask=="function"?queueMicrotask:typeof p8<"u"?function(u){return p8.resolve(null).then(u).catch(IK)}:x8;function IK(u){setTimeout(function(){throw u})}function jh(u){return u==="head"}function g8(u,m){var v=m,C=0;do{var M=v.nextSibling;if(u.removeChild(v),M&&M.nodeType===8)if(v=M.data,v==="/$"||v==="/&"){if(C===0){u.removeChild(M),Ux(m);return}C--}else if(v==="$"||v==="$?"||v==="$~"||v==="$!"||v==="&")C++;else if(v==="html")Wp(u.ownerDocument.documentElement);else if(v==="head"){v=u.ownerDocument.head,Wp(v);for(var V=v.firstChild;V;){var he=V.nextSibling,Re=V.nodeName;V[ct]||Re==="SCRIPT"||Re==="STYLE"||Re==="LINK"&&V.rel.toLowerCase()==="stylesheet"||v.removeChild(V),V=he}}else v==="body"&&Wp(u.ownerDocument.body);v=M}while(v);Ux(m)}function b8(u,m){var v=u;u=0;do{var C=v.nextSibling;if(v.nodeType===1?m?(v._stashedDisplay=v.style.display,v.style.display="none"):(v.style.display=v._stashedDisplay||"",v.getAttribute("style")===""&&v.removeAttribute("style")):v.nodeType===3&&(m?(v._stashedText=v.nodeValue,v.nodeValue=""):v.nodeValue=v._stashedText||""),C&&C.nodeType===8)if(v=C.data,v==="/$"){if(u===0)break;u--}else v!=="$"&&v!=="$?"&&v!=="$~"&&v!=="$!"||u++;v=C}while(v)}function V5(u){var m=u.firstChild;for(m&&m.nodeType===10&&(m=m.nextSibling);m;){var v=m;switch(m=m.nextSibling,v.nodeName){case"HTML":case"HEAD":case"BODY":V5(v),Rt(v);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(v.rel.toLowerCase()==="stylesheet")continue}u.removeChild(v)}}function DK(u,m,v,C){for(;u.nodeType===1;){var M=v;if(u.nodeName.toLowerCase()!==m.toLowerCase()){if(!C&&(u.nodeName!=="INPUT"||u.type!=="hidden"))break}else if(C){if(!u[ct])switch(m){case"meta":if(!u.hasAttribute("itemprop"))break;return u;case"link":if(V=u.getAttribute("rel"),V==="stylesheet"&&u.hasAttribute("data-precedence"))break;if(V!==M.rel||u.getAttribute("href")!==(M.href==null||M.href===""?null:M.href)||u.getAttribute("crossorigin")!==(M.crossOrigin==null?null:M.crossOrigin)||u.getAttribute("title")!==(M.title==null?null:M.title))break;return u;case"style":if(u.hasAttribute("data-precedence"))break;return u;case"script":if(V=u.getAttribute("src"),(V!==(M.src==null?null:M.src)||u.getAttribute("type")!==(M.type==null?null:M.type)||u.getAttribute("crossorigin")!==(M.crossOrigin==null?null:M.crossOrigin))&&V&&u.hasAttribute("async")&&!u.hasAttribute("itemprop"))break;return u;default:return u}}else if(m==="input"&&u.type==="hidden"){var V=M.name==null?null:""+M.name;if(M.type==="hidden"&&u.getAttribute("name")===V)return u}else return u;if(u=Kc(u.nextSibling),u===null)break}return null}function MK(u,m,v){if(m==="")return null;for(;u.nodeType!==3;)if((u.nodeType!==1||u.nodeName!=="INPUT"||u.type!=="hidden")&&!v||(u=Kc(u.nextSibling),u===null))return null;return u}function v8(u,m){for(;u.nodeType!==8;)if((u.nodeType!==1||u.nodeName!=="INPUT"||u.type!=="hidden")&&!m||(u=Kc(u.nextSibling),u===null))return null;return u}function W5(u){return u.data==="$?"||u.data==="$~"}function K5(u){return u.data==="$!"||u.data==="$?"&&u.ownerDocument.readyState!=="loading"}function LK(u,m){var v=u.ownerDocument;if(u.data==="$~")u._reactRetry=m;else if(u.data!=="$?"||v.readyState!=="loading")m();else{var C=function(){m(),v.removeEventListener("DOMContentLoaded",C)};v.addEventListener("DOMContentLoaded",C),u._reactRetry=C}}function Kc(u){for(;u!=null;u=u.nextSibling){var m=u.nodeType;if(m===1||m===3)break;if(m===8){if(m=u.data,m==="$"||m==="$!"||m==="$?"||m==="$~"||m==="&"||m==="F!"||m==="F")break;if(m==="/$"||m==="/&")return null}}return u}var G5=null;function y8(u){u=u.nextSibling;for(var m=0;u;){if(u.nodeType===8){var v=u.data;if(v==="/$"||v==="/&"){if(m===0)return Kc(u.nextSibling);m--}else v!=="$"&&v!=="$!"&&v!=="$?"&&v!=="$~"&&v!=="&"||m++}u=u.nextSibling}return null}function w8(u){u=u.previousSibling;for(var m=0;u;){if(u.nodeType===8){var v=u.data;if(v==="$"||v==="$!"||v==="$?"||v==="$~"||v==="&"){if(m===0)return u;m--}else v!=="/$"&&v!=="/&"||m++}u=u.previousSibling}return null}function k8(u,m,v){switch(m=zv(v),u){case"html":if(u=m.documentElement,!u)throw Error(n(452));return u;case"head":if(u=m.head,!u)throw Error(n(453));return u;case"body":if(u=m.body,!u)throw Error(n(454));return u;default:throw Error(n(451))}}function Wp(u){for(var m=u.attributes;m.length;)u.removeAttributeNode(m[0]);Rt(u)}var Gc=new Map,N8=new Set;function qv(u){return typeof u.getRootNode=="function"?u.getRootNode():u.nodeType===9?u:u.ownerDocument}var m0=fe.d;fe.d={f:RK,r:FK,D:BK,C:UK,L:zK,m:qK,X:$K,S:HK,M:VK};function RK(){var u=m0.f(),m=Iv();return u||m}function FK(u){var m=Jt(u);m!==null&&m.tag===5&&m.type==="form"?UA(m):m0.r(u)}var Rx=typeof document>"u"?null:document;function _8(u,m,v){var C=Rx;if(C&&typeof m=="string"&&m){var M=pr(m);M='link[rel="'+u+'"][href="'+M+'"]',typeof v=="string"&&(M+='[crossorigin="'+v+'"]'),N8.has(M)||(N8.add(M),u={rel:u,crossOrigin:v,href:m},C.querySelector(M)===null&&(m=C.createElement("link"),El(m,"link",u),Sr(m),C.head.appendChild(m)))}}function BK(u){m0.D(u),_8("dns-prefetch",u,null)}function UK(u,m){m0.C(u,m),_8("preconnect",u,m)}function zK(u,m,v){m0.L(u,m,v);var C=Rx;if(C&&u&&m){var M='link[rel="preload"][as="'+pr(m)+'"]';m==="image"&&v&&v.imageSrcSet?(M+='[imagesrcset="'+pr(v.imageSrcSet)+'"]',typeof v.imageSizes=="string"&&(M+='[imagesizes="'+pr(v.imageSizes)+'"]')):M+='[href="'+pr(u)+'"]';var V=M;switch(m){case"style":V=Fx(u);break;case"script":V=Bx(u)}Gc.has(V)||(u=p({rel:"preload",href:m==="image"&&v&&v.imageSrcSet?void 0:u,as:m},v),Gc.set(V,u),C.querySelector(M)!==null||m==="style"&&C.querySelector(Kp(V))||m==="script"&&C.querySelector(Gp(V))||(m=C.createElement("link"),El(m,"link",u),Sr(m),C.head.appendChild(m)))}}function qK(u,m){m0.m(u,m);var v=Rx;if(v&&u){var C=m&&typeof m.as=="string"?m.as:"script",M='link[rel="modulepreload"][as="'+pr(C)+'"][href="'+pr(u)+'"]',V=M;switch(C){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":V=Bx(u)}if(!Gc.has(V)&&(u=p({rel:"modulepreload",href:u},m),Gc.set(V,u),v.querySelector(M)===null)){switch(C){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(v.querySelector(Gp(V)))return}C=v.createElement("link"),El(C,"link",u),Sr(C),v.head.appendChild(C)}}}function HK(u,m,v){m0.S(u,m,v);var C=Rx;if(C&&u){var M=mr(C).hoistableStyles,V=Fx(u);m=m||"default";var he=M.get(V);if(!he){var Re={loading:0,preload:null};if(he=C.querySelector(Kp(V)))Re.loading=5;else{u=p({rel:"stylesheet",href:u,"data-precedence":m},v),(v=Gc.get(V))&&X5(u,v);var Qe=he=C.createElement("link");Sr(Qe),El(Qe,"link",u),Qe._p=new Promise(function(_t,Ht){Qe.onload=_t,Qe.onerror=Ht}),Qe.addEventListener("load",function(){Re.loading|=1}),Qe.addEventListener("error",function(){Re.loading|=2}),Re.loading|=4,Hv(he,m,C)}he={type:"stylesheet",instance:he,count:1,state:Re},M.set(V,he)}}}function $K(u,m){m0.X(u,m);var v=Rx;if(v&&u){var C=mr(v).hoistableScripts,M=Bx(u),V=C.get(M);V||(V=v.querySelector(Gp(M)),V||(u=p({src:u,async:!0},m),(m=Gc.get(M))&&Y5(u,m),V=v.createElement("script"),Sr(V),El(V,"link",u),v.head.appendChild(V)),V={type:"script",instance:V,count:1,state:null},C.set(M,V))}}function VK(u,m){m0.M(u,m);var v=Rx;if(v&&u){var C=mr(v).hoistableScripts,M=Bx(u),V=C.get(M);V||(V=v.querySelector(Gp(M)),V||(u=p({src:u,async:!0,type:"module"},m),(m=Gc.get(M))&&Y5(u,m),V=v.createElement("script"),Sr(V),El(V,"link",u),v.head.appendChild(V)),V={type:"script",instance:V,count:1,state:null},C.set(M,V))}}function S8(u,m,v,C){var M=(M=Q.current)?qv(M):null;if(!M)throw Error(n(446));switch(u){case"meta":case"title":return null;case"style":return typeof v.precedence=="string"&&typeof v.href=="string"?(m=Fx(v.href),v=mr(M).hoistableStyles,C=v.get(m),C||(C={type:"style",instance:null,count:0,state:null},v.set(m,C)),C):{type:"void",instance:null,count:0,state:null};case"link":if(v.rel==="stylesheet"&&typeof v.href=="string"&&typeof v.precedence=="string"){u=Fx(v.href);var V=mr(M).hoistableStyles,he=V.get(u);if(he||(M=M.ownerDocument||M,he={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},V.set(u,he),(V=M.querySelector(Kp(u)))&&!V._p&&(he.instance=V,he.state.loading=5),Gc.has(u)||(v={rel:"preload",as:"style",href:v.href,crossOrigin:v.crossOrigin,integrity:v.integrity,media:v.media,hrefLang:v.hrefLang,referrerPolicy:v.referrerPolicy},Gc.set(u,v),V||WK(M,u,v,he.state))),m&&C===null)throw Error(n(528,""));return he}if(m&&C!==null)throw Error(n(529,""));return null;case"script":return m=v.async,v=v.src,typeof v=="string"&&m&&typeof m!="function"&&typeof m!="symbol"?(m=Bx(v),v=mr(M).hoistableScripts,C=v.get(m),C||(C={type:"script",instance:null,count:0,state:null},v.set(m,C)),C):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,u))}}function Fx(u){return'href="'+pr(u)+'"'}function Kp(u){return'link[rel="stylesheet"]['+u+"]"}function j8(u){return p({},u,{"data-precedence":u.precedence,precedence:null})}function WK(u,m,v,C){u.querySelector('link[rel="preload"][as="style"]['+m+"]")?C.loading=1:(m=u.createElement("link"),C.preload=m,m.addEventListener("load",function(){return C.loading|=1}),m.addEventListener("error",function(){return C.loading|=2}),El(m,"link",v),Sr(m),u.head.appendChild(m))}function Bx(u){return'[src="'+pr(u)+'"]'}function Gp(u){return"script[async]"+u}function C8(u,m,v){if(m.count++,m.instance===null)switch(m.type){case"style":var C=u.querySelector('style[data-href~="'+pr(v.href)+'"]');if(C)return m.instance=C,Sr(C),C;var M=p({},v,{"data-href":v.href,"data-precedence":v.precedence,href:null,precedence:null});return C=(u.ownerDocument||u).createElement("style"),Sr(C),El(C,"style",M),Hv(C,v.precedence,u),m.instance=C;case"stylesheet":M=Fx(v.href);var V=u.querySelector(Kp(M));if(V)return m.state.loading|=4,m.instance=V,Sr(V),V;C=j8(v),(M=Gc.get(M))&&X5(C,M),V=(u.ownerDocument||u).createElement("link"),Sr(V);var he=V;return he._p=new Promise(function(Re,Qe){he.onload=Re,he.onerror=Qe}),El(V,"link",C),m.state.loading|=4,Hv(V,v.precedence,u),m.instance=V;case"script":return V=Bx(v.src),(M=u.querySelector(Gp(V)))?(m.instance=M,Sr(M),M):(C=v,(M=Gc.get(V))&&(C=p({},v),Y5(C,M)),u=u.ownerDocument||u,M=u.createElement("script"),Sr(M),El(M,"link",C),u.head.appendChild(M),m.instance=M);case"void":return null;default:throw Error(n(443,m.type))}else m.type==="stylesheet"&&(m.state.loading&4)===0&&(C=m.instance,m.state.loading|=4,Hv(C,v.precedence,u));return m.instance}function Hv(u,m,v){for(var C=v.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),M=C.length?C[C.length-1]:null,V=M,he=0;he<C.length;he++){var Re=C[he];if(Re.dataset.precedence===m)V=Re;else if(V!==M)break}V?V.parentNode.insertBefore(u,V.nextSibling):(m=v.nodeType===9?v.head:v,m.insertBefore(u,m.firstChild))}function X5(u,m){u.crossOrigin==null&&(u.crossOrigin=m.crossOrigin),u.referrerPolicy==null&&(u.referrerPolicy=m.referrerPolicy),u.title==null&&(u.title=m.title)}function Y5(u,m){u.crossOrigin==null&&(u.crossOrigin=m.crossOrigin),u.referrerPolicy==null&&(u.referrerPolicy=m.referrerPolicy),u.integrity==null&&(u.integrity=m.integrity)}var $v=null;function A8(u,m,v){if($v===null){var C=new Map,M=$v=new Map;M.set(v,C)}else M=$v,C=M.get(v),C||(C=new Map,M.set(v,C));if(C.has(u))return C;for(C.set(u,null),v=v.getElementsByTagName(u),M=0;M<v.length;M++){var V=v[M];if(!(V[ct]||V[Ie]||u==="link"&&V.getAttribute("rel")==="stylesheet")&&V.namespaceURI!=="http://www.w3.org/2000/svg"){var he=V.getAttribute(m)||"";he=u+he;var Re=C.get(he);Re?Re.push(V):C.set(he,[V])}}return C}function E8(u,m,v){u=u.ownerDocument||u,u.head.insertBefore(v,m==="title"?u.querySelector("head > title"):null)}function KK(u,m,v){if(v===1||m.itemProp!=null)return!1;switch(u){case"meta":case"title":return!0;case"style":if(typeof m.precedence!="string"||typeof m.href!="string"||m.href==="")break;return!0;case"link":if(typeof m.rel!="string"||typeof m.href!="string"||m.href===""||m.onLoad||m.onError)break;switch(m.rel){case"stylesheet":return u=m.disabled,typeof m.precedence=="string"&&u==null;default:return!0}case"script":if(m.async&&typeof m.async!="function"&&typeof m.async!="symbol"&&!m.onLoad&&!m.onError&&m.src&&typeof m.src=="string")return!0}return!1}function T8(u){return!(u.type==="stylesheet"&&(u.state.loading&3)===0)}function GK(u,m,v,C){if(v.type==="stylesheet"&&(typeof C.media!="string"||matchMedia(C.media).matches!==!1)&&(v.state.loading&4)===0){if(v.instance===null){var M=Fx(C.href),V=m.querySelector(Kp(M));if(V){m=V._p,m!==null&&typeof m=="object"&&typeof m.then=="function"&&(u.count++,u=Vv.bind(u),m.then(u,u)),v.state.loading|=4,v.instance=V,Sr(V);return}V=m.ownerDocument||m,C=j8(C),(M=Gc.get(M))&&X5(C,M),V=V.createElement("link"),Sr(V);var he=V;he._p=new Promise(function(Re,Qe){he.onload=Re,he.onerror=Qe}),El(V,"link",C),v.instance=V}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(v,m),(m=v.state.preload)&&(v.state.loading&3)===0&&(u.count++,v=Vv.bind(u),m.addEventListener("load",v),m.addEventListener("error",v))}}var Z5=0;function XK(u,m){return u.stylesheets&&u.count===0&&Kv(u,u.stylesheets),0<u.count||0<u.imgCount?function(v){var C=setTimeout(function(){if(u.stylesheets&&Kv(u,u.stylesheets),u.unsuspend){var V=u.unsuspend;u.unsuspend=null,V()}},6e4+m);0<u.imgBytes&&Z5===0&&(Z5=62500*EK());var M=setTimeout(function(){if(u.waitingForImages=!1,u.count===0&&(u.stylesheets&&Kv(u,u.stylesheets),u.unsuspend)){var V=u.unsuspend;u.unsuspend=null,V()}},(u.imgBytes>Z5?50:800)+m);return u.unsuspend=v,function(){u.unsuspend=null,clearTimeout(C),clearTimeout(M)}}:null}function Vv(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Kv(this,this.stylesheets);else if(this.unsuspend){var u=this.unsuspend;this.unsuspend=null,u()}}}var Wv=null;function Kv(u,m){u.stylesheets=null,u.unsuspend!==null&&(u.count++,Wv=new Map,m.forEach(YK,u),Wv=null,Vv.call(u))}function YK(u,m){if(!(m.state.loading&4)){var v=Wv.get(u);if(v)var C=v.get(null);else{v=new Map,Wv.set(u,v);for(var M=u.querySelectorAll("link[data-precedence],style[data-precedence]"),V=0;V<M.length;V++){var he=M[V];(he.nodeName==="LINK"||he.getAttribute("media")!=="not all")&&(v.set(he.dataset.precedence,he),C=he)}C&&v.set(null,C)}M=m.instance,he=M.getAttribute("data-precedence"),V=v.get(he)||C,V===C&&v.set(null,M),v.set(he,M),this.count++,C=Vv.bind(this),M.addEventListener("load",C),M.addEventListener("error",C),V?V.parentNode.insertBefore(M,V.nextSibling):(u=u.nodeType===9?u.head:u,u.insertBefore(M,u.firstChild)),m.state.loading|=4}}var Xp={$$typeof:E,Provider:null,Consumer:null,_currentValue:ke,_currentValue2:ke,_threadCount:0};function ZK(u,m,v,C,M,V,he,Re,Qe){this.tag=1,this.containerInfo=u,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Pr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Pr(0),this.hiddenUpdates=Pr(null),this.identifierPrefix=C,this.onUncaughtError=M,this.onCaughtError=V,this.onRecoverableError=he,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Qe,this.incompleteTransitions=new Map}function O8(u,m,v,C,M,V,he,Re,Qe,_t,Ht,er){return u=new ZK(u,m,v,he,Qe,_t,Ht,er,Re),m=1,V===!0&&(m|=24),V=dl(3,null,null,m),u.current=V,V.stateNode=u,m=mh(),m.refCount++,u.pooledCache=m,m.refCount++,V.memoizedState={element:C,isDehydrated:v,cache:m},jr(V),u}function P8(u){return u?(u=Ui,u):Ui}function I8(u,m,v,C,M,V){M=P8(M),C.context===null?C.context=M:C.pendingContext=M,C=Sn(m),C.payload={element:v},V=V===void 0?null:V,V!==null&&(C.callback=V),v=Wn(u,C,m),v!==null&&(Zo(v,u,m),La(v,u,m))}function D8(u,m){if(u=u.memoizedState,u!==null&&u.dehydrated!==null){var v=u.retryLane;u.retryLane=v!==0&&v<m?v:m}}function Q5(u,m){D8(u,m),(u=u.alternate)&&D8(u,m)}function M8(u){if(u.tag===13||u.tag===31){var m=Ed(u,67108864);m!==null&&Zo(m,u,67108864),Q5(u,67108864)}}function L8(u){if(u.tag===13||u.tag===31){var m=hc();m=Ir(m);var v=Ed(u,m);v!==null&&Zo(v,u,m),Q5(u,m)}}var Gv=!0;function QK(u,m,v,C){var M=ue.T;ue.T=null;var V=fe.p;try{fe.p=2,J5(u,m,v,C)}finally{fe.p=V,ue.T=M}}function JK(u,m,v,C){var M=ue.T;ue.T=null;var V=fe.p;try{fe.p=8,J5(u,m,v,C)}finally{fe.p=V,ue.T=M}}function J5(u,m,v,C){if(Gv){var M=e4(C);if(M===null)B5(u,m,C,Xv,v),F8(u,C);else if(tG(M,u,m,v,C))C.stopPropagation();else if(F8(u,C),m&4&&-1<eG.indexOf(u)){for(;M!==null;){var V=Jt(M);if(V!==null)switch(V.tag){case 3:if(V=V.stateNode,V.current.memoizedState.isDehydrated){var he=Et(V.pendingLanes);if(he!==0){var Re=V;for(Re.pendingLanes|=2,Re.entangledLanes|=2;he;){var Qe=1<<31-Ge(he);Re.entanglements[1]|=Qe,he&=~Qe}vu(V),(Fa&6)===0&&(Ov=fr()+500,Hp(0))}}break;case 31:case 13:Re=Ed(V,2),Re!==null&&Zo(Re,V,2),Iv(),Q5(V,2)}if(V=e4(C),V===null&&B5(u,m,C,Xv,v),V===M)break;M=V}M!==null&&C.stopPropagation()}else B5(u,m,C,null,v)}}function e4(u){return u=kd(u),t4(u)}var Xv=null;function t4(u){if(Xv=null,u=Xt(u),u!==null){var m=i(u);if(m===null)u=null;else{var v=m.tag;if(v===13){if(u=l(m),u!==null)return u;u=null}else if(v===31){if(u=o(m),u!==null)return u;u=null}else if(v===3){if(m.stateNode.current.memoizedState.isDehydrated)return m.tag===3?m.stateNode.containerInfo:null;u=null}else m!==u&&(u=null)}}return Xv=u,null}function R8(u){switch(u){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(xr()){case nr:return 2;case Mr:return 8;case rr:case Gt:return 32;case Vt:return 268435456;default:return 32}default:return 32}}var r4=!1,Ch=null,Ah=null,Eh=null,Yp=new Map,Zp=new Map,Th=[],eG="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function F8(u,m){switch(u){case"focusin":case"focusout":Ch=null;break;case"dragenter":case"dragleave":Ah=null;break;case"mouseover":case"mouseout":Eh=null;break;case"pointerover":case"pointerout":Yp.delete(m.pointerId);break;case"gotpointercapture":case"lostpointercapture":Zp.delete(m.pointerId)}}function Qp(u,m,v,C,M,V){return u===null||u.nativeEvent!==V?(u={blockedOn:m,domEventName:v,eventSystemFlags:C,nativeEvent:V,targetContainers:[M]},m!==null&&(m=Jt(m),m!==null&&M8(m)),u):(u.eventSystemFlags|=C,m=u.targetContainers,M!==null&&m.indexOf(M)===-1&&m.push(M),u)}function tG(u,m,v,C,M){switch(m){case"focusin":return Ch=Qp(Ch,u,m,v,C,M),!0;case"dragenter":return Ah=Qp(Ah,u,m,v,C,M),!0;case"mouseover":return Eh=Qp(Eh,u,m,v,C,M),!0;case"pointerover":var V=M.pointerId;return Yp.set(V,Qp(Yp.get(V)||null,u,m,v,C,M)),!0;case"gotpointercapture":return V=M.pointerId,Zp.set(V,Qp(Zp.get(V)||null,u,m,v,C,M)),!0}return!1}function B8(u){var m=Xt(u.target);if(m!==null){var v=i(m);if(v!==null){if(m=v.tag,m===13){if(m=l(v),m!==null){u.blockedOn=m,Ne(u.priority,function(){L8(v)});return}}else if(m===31){if(m=o(v),m!==null){u.blockedOn=m,Ne(u.priority,function(){L8(v)});return}}else if(m===3&&v.stateNode.current.memoizedState.isDehydrated){u.blockedOn=v.tag===3?v.stateNode.containerInfo:null;return}}}u.blockedOn=null}function Yv(u){if(u.blockedOn!==null)return!1;for(var m=u.targetContainers;0<m.length;){var v=e4(u.nativeEvent);if(v===null){v=u.nativeEvent;var C=new v.constructor(v.type,v);co=C,v.target.dispatchEvent(C),co=null}else return m=Jt(v),m!==null&&M8(m),u.blockedOn=v,!1;m.shift()}return!0}function U8(u,m,v){Yv(u)&&v.delete(m)}function rG(){r4=!1,Ch!==null&&Yv(Ch)&&(Ch=null),Ah!==null&&Yv(Ah)&&(Ah=null),Eh!==null&&Yv(Eh)&&(Eh=null),Yp.forEach(U8),Zp.forEach(U8)}function Zv(u,m){u.blockedOn===m&&(u.blockedOn=null,r4||(r4=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,rG)))}var Qv=null;function z8(u){Qv!==u&&(Qv=u,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Qv===u&&(Qv=null);for(var m=0;m<u.length;m+=3){var v=u[m],C=u[m+1],M=u[m+2];if(typeof C!="function"){if(t4(C||v)===null)continue;break}var V=Jt(v);V!==null&&(u.splice(m,3),m-=3,e5(V,{pending:!0,data:M,method:v.method,action:C},C,M))}}))}function Ux(u){function m(Qe){return Zv(Qe,u)}Ch!==null&&Zv(Ch,u),Ah!==null&&Zv(Ah,u),Eh!==null&&Zv(Eh,u),Yp.forEach(m),Zp.forEach(m);for(var v=0;v<Th.length;v++){var C=Th[v];C.blockedOn===u&&(C.blockedOn=null)}for(;0<Th.length&&(v=Th[0],v.blockedOn===null);)B8(v),v.blockedOn===null&&Th.shift();if(v=(u.ownerDocument||u).$$reactFormReplay,v!=null)for(C=0;C<v.length;C+=3){var M=v[C],V=v[C+1],he=M[oe]||null;if(typeof V=="function")he||z8(v);else if(he){var Re=null;if(V&&V.hasAttribute("formAction")){if(M=V,he=V[oe]||null)Re=he.formAction;else if(t4(M)!==null)continue}else Re=he.action;typeof Re=="function"?v[C+1]=Re:(v.splice(C,3),C-=3),z8(v)}}}function q8(){function u(V){V.canIntercept&&V.info==="react-transition"&&V.intercept({handler:function(){return new Promise(function(he){return M=he})},focusReset:"manual",scroll:"manual"})}function m(){M!==null&&(M(),M=null),C||setTimeout(v,20)}function v(){if(!C&&!navigation.transition){var V=navigation.currentEntry;V&&V.url!=null&&navigation.navigate(V.url,{state:V.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var C=!1,M=null;return navigation.addEventListener("navigate",u),navigation.addEventListener("navigatesuccess",m),navigation.addEventListener("navigateerror",m),setTimeout(v,100),function(){C=!0,navigation.removeEventListener("navigate",u),navigation.removeEventListener("navigatesuccess",m),navigation.removeEventListener("navigateerror",m),M!==null&&(M(),M=null)}}}function n4(u){this._internalRoot=u}Jv.prototype.render=n4.prototype.render=function(u){var m=this._internalRoot;if(m===null)throw Error(n(409));var v=m.current,C=hc();I8(v,C,u,m,null,null)},Jv.prototype.unmount=n4.prototype.unmount=function(){var u=this._internalRoot;if(u!==null){this._internalRoot=null;var m=u.containerInfo;I8(u.current,2,null,u,null,null),Iv(),m[ne]=null}};function Jv(u){this._internalRoot=u}Jv.prototype.unstable_scheduleHydration=function(u){if(u){var m=we();u={blockedOn:null,target:u,priority:m};for(var v=0;v<Th.length&&m!==0&&m<Th[v].priority;v++);Th.splice(v,0,u),v===0&&B8(u)}};var H8=t.version;if(H8!=="19.2.0")throw Error(n(527,H8,"19.2.0"));fe.findDOMNode=function(u){var m=u._reactInternals;if(m===void 0)throw typeof u.render=="function"?Error(n(188)):(u=Object.keys(u).join(","),Error(n(268,u)));return u=d(m),u=u!==null?f(u):null,u=u===null?null:u.stateNode,u};var nG={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:ue,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var e2=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!e2.isDisabled&&e2.supportsFiber)try{ar=e2.inject(nG),xt=e2}catch{}}return eg.createRoot=function(u,m){if(!a(u))throw Error(n(299));var v=!1,C="",M=YA,V=ZA,he=QA;return m!=null&&(m.unstable_strictMode===!0&&(v=!0),m.identifierPrefix!==void 0&&(C=m.identifierPrefix),m.onUncaughtError!==void 0&&(M=m.onUncaughtError),m.onCaughtError!==void 0&&(V=m.onCaughtError),m.onRecoverableError!==void 0&&(he=m.onRecoverableError)),m=O8(u,1,!1,null,null,v,C,null,M,V,he,q8),u[ne]=m.current,F5(u),new n4(m)},eg.hydrateRoot=function(u,m,v){if(!a(u))throw Error(n(299));var C=!1,M="",V=YA,he=ZA,Re=QA,Qe=null;return v!=null&&(v.unstable_strictMode===!0&&(C=!0),v.identifierPrefix!==void 0&&(M=v.identifierPrefix),v.onUncaughtError!==void 0&&(V=v.onUncaughtError),v.onCaughtError!==void 0&&(he=v.onCaughtError),v.onRecoverableError!==void 0&&(Re=v.onRecoverableError),v.formState!==void 0&&(Qe=v.formState)),m=O8(u,1,!0,m,v??null,C,M,Qe,V,he,Re,q8),m.context=P8(null),v=m.current,C=hc(),C=Ir(C),M=Sn(C),M.callback=null,Wn(v,M,C),v=C,m.current.lanes=v,sr(m,v),vu(m),u[ne]=m.current,F5(u),new Jv(m)},eg.version="19.2.0",eg}var eT;function pG(){if(eT)return l4.exports;eT=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),l4.exports=xG(),l4.exports}var gG=pG();const bG=gd(gG);/**
 * react-router v7.9.5
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var tT="popstate";function vG(e={}){function t(a,i){let{pathname:l="/",search:o="",hash:c=""}=Ym(a.location.hash.substring(1));return!l.startsWith("/")&&!l.startsWith(".")&&(l="/"+l),qN("",{pathname:l,search:o,hash:c},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(a,i){let l=a.document.querySelector("base"),o="";if(l&&l.getAttribute("href")){let c=a.location.href,d=c.indexOf("#");o=d===-1?c:c.slice(0,d)}return o+"#"+(typeof i=="string"?i:Bg(i))}function n(a,i){hd(a.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(i)})`)}return wG(t,r,n,e)}function Fs(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function hd(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function yG(){return Math.random().toString(36).substring(2,10)}function rT(e,t){return{usr:e.state,key:e.key,idx:t}}function qN(e,t,r=null,n){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?Ym(t):t,state:r,key:t&&t.key||n||yG()}}function Bg({pathname:e="/",search:t="",hash:r=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Ym(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substring(n),e=e.substring(0,n)),e&&(t.pathname=e)}return t}function wG(e,t,r,n={}){let{window:a=document.defaultView,v5Compat:i=!1}=n,l=a.history,o="POP",c=null,d=f();d==null&&(d=0,l.replaceState({...l.state,idx:d},""));function f(){return(l.state||{idx:null}).idx}function p(){o="POP";let k=f(),S=k==null?null:k-d;d=k,c&&c({action:o,location:w.location,delta:S})}function y(k,S){o="PUSH";let O=qN(w.location,k,S);r&&r(O,k),d=f()+1;let E=rT(O,d),D=w.createHref(O);try{l.pushState(E,"",D)}catch(q){if(q instanceof DOMException&&q.name==="DataCloneError")throw q;a.location.assign(D)}i&&c&&c({action:o,location:w.location,delta:1})}function g(k,S){o="REPLACE";let O=qN(w.location,k,S);r&&r(O,k),d=f();let E=rT(O,d),D=w.createHref(O);l.replaceState(E,"",D),i&&c&&c({action:o,location:w.location,delta:0})}function N(k){return kG(k)}let w={get action(){return o},get location(){return e(a,l)},listen(k){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(tT,p),c=k,()=>{a.removeEventListener(tT,p),c=null}},createHref(k){return t(a,k)},createURL:N,encodeLocation(k){let S=N(k);return{pathname:S.pathname,search:S.search,hash:S.hash}},push:y,replace:g,go(k){return l.go(k)}};return w}function kG(e,t=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),Fs(r,"No window.location.(origin|href) available to create URL");let n=typeof e=="string"?e:Bg(e);return n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=r+n),new URL(n,r)}function PL(e,t,r="/"){return NG(e,t,r,!1)}function NG(e,t,r,n){let a=typeof t=="string"?Ym(t):t,i=H0(a.pathname||"/",r);if(i==null)return null;let l=IL(e);_G(l);let o=null;for(let c=0;o==null&&c<l.length;++c){let d=MG(i);o=IG(l[c],d,n)}return o}function IL(e,t=[],r=[],n="",a=!1){let i=(l,o,c=a,d)=>{let f={relativePath:d===void 0?l.path||"":d,caseSensitive:l.caseSensitive===!0,childrenIndex:o,route:l};if(f.relativePath.startsWith("/")){if(!f.relativePath.startsWith(n)&&c)return;Fs(f.relativePath.startsWith(n),`Absolute route path "${f.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),f.relativePath=f.relativePath.slice(n.length)}let p=D0([n,f.relativePath]),y=r.concat(f);l.children&&l.children.length>0&&(Fs(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),IL(l.children,t,y,p,c)),!(l.path==null&&!l.index)&&t.push({path:p,score:OG(p,l.index),routesMeta:y})};return e.forEach((l,o)=>{var c;if(l.path===""||!((c=l.path)!=null&&c.includes("?")))i(l,o);else for(let d of DL(l.path))i(l,o,!0,d)}),t}function DL(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,a=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return a?[i,""]:[i];let l=DL(n.join("/")),o=[];return o.push(...l.map(c=>c===""?i:[i,c].join("/"))),a&&o.push(...l),o.map(c=>e.startsWith("/")&&c===""?"/":c)}function _G(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:PG(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var SG=/^:[\w-]+$/,jG=3,CG=2,AG=1,EG=10,TG=-2,nT=e=>e==="*";function OG(e,t){let r=e.split("/"),n=r.length;return r.some(nT)&&(n+=TG),t&&(n+=CG),r.filter(a=>!nT(a)).reduce((a,i)=>a+(SG.test(i)?jG:i===""?AG:EG),n)}function PG(e,t){return e.length===t.length&&e.slice(0,-1).every((n,a)=>n===t[a])?e[e.length-1]-t[t.length-1]:0}function IG(e,t,r=!1){let{routesMeta:n}=e,a={},i="/",l=[];for(let o=0;o<n.length;++o){let c=n[o],d=o===n.length-1,f=i==="/"?t:t.slice(i.length)||"/",p=dy({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},f),y=c.route;if(!p&&d&&r&&!n[n.length-1].route.index&&(p=dy({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},f)),!p)return null;Object.assign(a,p.params),l.push({params:a,pathname:D0([i,p.pathname]),pathnameBase:BG(D0([i,p.pathnameBase])),route:y}),p.pathnameBase!=="/"&&(i=D0([i,p.pathnameBase]))}return l}function dy(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=DG(e.path,e.caseSensitive,e.end),a=t.match(r);if(!a)return null;let i=a[0],l=i.replace(/(.)\/+$/,"$1"),o=a.slice(1);return{params:n.reduce((d,{paramName:f,isOptional:p},y)=>{if(f==="*"){let N=o[y]||"";l=i.slice(0,i.length-N.length).replace(/(.)\/+$/,"$1")}const g=o[y];return p&&!g?d[f]=void 0:d[f]=(g||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:l,pattern:e}}function DG(e,t=!1,r=!0){hd(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let n=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,o,c)=>(n.push({paramName:o,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(n.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),n]}function MG(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return hd(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function H0(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function LG(e,t="/"){let{pathname:r,search:n="",hash:a=""}=typeof e=="string"?Ym(e):e;return{pathname:r?r.startsWith("/")?r:RG(r,t):t,search:UG(n),hash:zG(a)}}function RG(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function u4(e,t,r,n){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function FG(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function n6(e){let t=FG(e);return t.map((r,n)=>n===t.length-1?r.pathname:r.pathnameBase)}function a6(e,t,r,n=!1){let a;typeof e=="string"?a=Ym(e):(a={...e},Fs(!a.pathname||!a.pathname.includes("?"),u4("?","pathname","search",a)),Fs(!a.pathname||!a.pathname.includes("#"),u4("#","pathname","hash",a)),Fs(!a.search||!a.search.includes("#"),u4("#","search","hash",a)));let i=e===""||a.pathname==="",l=i?"/":a.pathname,o;if(l==null)o=r;else{let p=t.length-1;if(!n&&l.startsWith("..")){let y=l.split("/");for(;y[0]==="..";)y.shift(),p-=1;a.pathname=y.join("/")}o=p>=0?t[p]:"/"}let c=LG(a,o),d=l&&l!=="/"&&l.endsWith("/"),f=(i||l===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(d||f)&&(c.pathname+="/"),c}var D0=e=>e.join("/").replace(/\/\/+/g,"/"),BG=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),UG=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,zG=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function qG(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var ML=["POST","PUT","PATCH","DELETE"];new Set(ML);var HG=["GET",...ML];new Set(HG);var Z1=T.createContext(null);Z1.displayName="DataRouter";var Ow=T.createContext(null);Ow.displayName="DataRouterState";T.createContext(!1);var LL=T.createContext({isTransitioning:!1});LL.displayName="ViewTransition";var $G=T.createContext(new Map);$G.displayName="Fetchers";var VG=T.createContext(null);VG.displayName="Await";var ru=T.createContext(null);ru.displayName="Navigation";var Tb=T.createContext(null);Tb.displayName="Location";var Vu=T.createContext({outlet:null,matches:[],isDataRoute:!1});Vu.displayName="Route";var s6=T.createContext(null);s6.displayName="RouteError";function WG(e,{relative:t}={}){Fs(Q1(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=T.useContext(ru),{hash:a,pathname:i,search:l}=Ob(e,{relative:t}),o=i;return r!=="/"&&(o=i==="/"?r:D0([r,i])),n.createHref({pathname:o,search:l,hash:a})}function Q1(){return T.useContext(Tb)!=null}function bd(){return Fs(Q1(),"useLocation() may be used only in the context of a <Router> component."),T.useContext(Tb).location}var RL="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function FL(e){T.useContext(ru).static||T.useLayoutEffect(e)}function Pw(){let{isDataRoute:e}=T.useContext(Vu);return e?sX():KG()}function KG(){Fs(Q1(),"useNavigate() may be used only in the context of a <Router> component.");let e=T.useContext(Z1),{basename:t,navigator:r}=T.useContext(ru),{matches:n}=T.useContext(Vu),{pathname:a}=bd(),i=JSON.stringify(n6(n)),l=T.useRef(!1);return FL(()=>{l.current=!0}),T.useCallback((c,d={})=>{if(hd(l.current,RL),!l.current)return;if(typeof c=="number"){r.go(c);return}let f=a6(c,JSON.parse(i),a,d.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:D0([t,f.pathname])),(d.replace?r.replace:r.push)(f,d.state,d)},[t,r,i,a,e])}T.createContext(null);function Ob(e,{relative:t}={}){let{matches:r}=T.useContext(Vu),{pathname:n}=bd(),a=JSON.stringify(n6(r));return T.useMemo(()=>a6(e,JSON.parse(a),n,t==="path"),[e,a,n,t])}function GG(e,t){return BL(e,t)}function BL(e,t,r,n,a){var O;Fs(Q1(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=T.useContext(ru),{matches:l}=T.useContext(Vu),o=l[l.length-1],c=o?o.params:{},d=o?o.pathname:"/",f=o?o.pathnameBase:"/",p=o&&o.route;{let E=p&&p.path||"";UL(d,!p||E.endsWith("*")||E.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${E}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${E}"> to <Route path="${E==="/"?"*":`${E}/*`}">.`)}let y=bd(),g;if(t){let E=typeof t=="string"?Ym(t):t;Fs(f==="/"||((O=E.pathname)==null?void 0:O.startsWith(f)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${E.pathname}" was given in the \`location\` prop.`),g=E}else g=y;let N=g.pathname||"/",w=N;if(f!=="/"){let E=f.replace(/^\//,"").split("/");w="/"+N.replace(/^\//,"").split("/").slice(E.length).join("/")}let k=PL(e,{pathname:w});hd(p||k!=null,`No routes matched location "${g.pathname}${g.search}${g.hash}" `),hd(k==null||k[k.length-1].route.element!==void 0||k[k.length-1].route.Component!==void 0||k[k.length-1].route.lazy!==void 0,`Matched leaf route at location "${g.pathname}${g.search}${g.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let S=JG(k&&k.map(E=>Object.assign({},E,{params:Object.assign({},c,E.params),pathname:D0([f,i.encodeLocation?i.encodeLocation(E.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?f:D0([f,i.encodeLocation?i.encodeLocation(E.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:E.pathnameBase])})),l,r,n,a);return t&&S?T.createElement(Tb.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...g},navigationType:"POP"}},S):S}function XG(){let e=aX(),t=qG(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:n},i={padding:"2px 4px",backgroundColor:n},l=null;return console.error("Error handled by React Router default ErrorBoundary:",e),l=T.createElement(T.Fragment,null,T.createElement("p",null," Hey developer "),T.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",T.createElement("code",{style:i},"ErrorBoundary")," or"," ",T.createElement("code",{style:i},"errorElement")," prop on your route.")),T.createElement(T.Fragment,null,T.createElement("h2",null,"Unexpected Application Error!"),T.createElement("h3",{style:{fontStyle:"italic"}},t),r?T.createElement("pre",{style:a},r):null,l)}var YG=T.createElement(XG,null),ZG=class extends T.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.unstable_onError?this.props.unstable_onError(e,t):console.error("React Router caught the following error during render",e)}render(){return this.state.error!==void 0?T.createElement(Vu.Provider,{value:this.props.routeContext},T.createElement(s6.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function QG({routeContext:e,match:t,children:r}){let n=T.useContext(Z1);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),T.createElement(Vu.Provider,{value:e},r)}function JG(e,t=[],r=null,n=null,a=null){if(e==null){if(!r)return null;if(r.errors)e=r.matches;else if(t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let i=e,l=r==null?void 0:r.errors;if(l!=null){let d=i.findIndex(f=>f.route.id&&(l==null?void 0:l[f.route.id])!==void 0);Fs(d>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),i=i.slice(0,Math.min(i.length,d+1))}let o=!1,c=-1;if(r)for(let d=0;d<i.length;d++){let f=i[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(c=d),f.route.id){let{loaderData:p,errors:y}=r,g=f.route.loader&&!p.hasOwnProperty(f.route.id)&&(!y||y[f.route.id]===void 0);if(f.route.lazy||g){o=!0,c>=0?i=i.slice(0,c+1):i=[i[0]];break}}}return i.reduceRight((d,f,p)=>{let y,g=!1,N=null,w=null;r&&(y=l&&f.route.id?l[f.route.id]:void 0,N=f.route.errorElement||YG,o&&(c<0&&p===0?(UL("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),g=!0,w=null):c===p&&(g=!0,w=f.route.hydrateFallbackElement||null)));let k=t.concat(i.slice(0,p+1)),S=()=>{let O;return y?O=N:g?O=w:f.route.Component?O=T.createElement(f.route.Component,null):f.route.element?O=f.route.element:O=d,T.createElement(QG,{match:f,routeContext:{outlet:d,matches:k,isDataRoute:r!=null},children:O})};return r&&(f.route.ErrorBoundary||f.route.errorElement||p===0)?T.createElement(ZG,{location:r.location,revalidation:r.revalidation,component:N,error:y,children:S(),routeContext:{outlet:null,matches:k,isDataRoute:!0},unstable_onError:n}):S()},null)}function i6(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function eX(e){let t=T.useContext(Z1);return Fs(t,i6(e)),t}function tX(e){let t=T.useContext(Ow);return Fs(t,i6(e)),t}function rX(e){let t=T.useContext(Vu);return Fs(t,i6(e)),t}function l6(e){let t=rX(e),r=t.matches[t.matches.length-1];return Fs(r.route.id,`${e} can only be used on routes that contain a unique "id"`),r.route.id}function nX(){return l6("useRouteId")}function aX(){var n;let e=T.useContext(s6),t=tX("useRouteError"),r=l6("useRouteError");return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function sX(){let{router:e}=eX("useNavigate"),t=l6("useNavigate"),r=T.useRef(!1);return FL(()=>{r.current=!0}),T.useCallback(async(a,i={})=>{hd(r.current,RL),r.current&&(typeof a=="number"?e.navigate(a):await e.navigate(a,{fromRouteId:t,...i}))},[e,t])}var aT={};function UL(e,t,r){!t&&!aT[e]&&(aT[e]=!0,hd(!1,r))}T.memo(iX);function iX({routes:e,future:t,state:r,unstable_onError:n}){return BL(e,void 0,r,n,t)}function zL({to:e,replace:t,state:r,relative:n}){Fs(Q1(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=T.useContext(ru);hd(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=T.useContext(Vu),{pathname:l}=bd(),o=Pw(),c=a6(e,n6(i),l,n==="path"),d=JSON.stringify(c);return T.useEffect(()=>{o(JSON.parse(d),{replace:t,state:r,relative:n})},[o,d,n,t,r]),null}function ni(e){Fs(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function lX({basename:e="/",children:t=null,location:r,navigationType:n="POP",navigator:a,static:i=!1}){Fs(!Q1(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=e.replace(/^\/*/,"/"),o=T.useMemo(()=>({basename:l,navigator:a,static:i,future:{}}),[l,a,i]);typeof r=="string"&&(r=Ym(r));let{pathname:c="/",search:d="",hash:f="",state:p=null,key:y="default"}=r,g=T.useMemo(()=>{let N=H0(c,l);return N==null?null:{location:{pathname:N,search:d,hash:f,state:p,key:y},navigationType:n}},[l,c,d,f,p,y,n]);return hd(g!=null,`<Router basename="${l}"> is not able to match the URL "${c}${d}${f}" because it does not start with the basename, so the <Router> won't render anything.`),g==null?null:T.createElement(ru.Provider,{value:o},T.createElement(Tb.Provider,{children:t,value:g}))}function qL({children:e,location:t}){return GG(HN(e),t)}function HN(e,t=[]){let r=[];return T.Children.forEach(e,(n,a)=>{if(!T.isValidElement(n))return;let i=[...t,a];if(n.type===T.Fragment){r.push.apply(r,HN(n.props.children,i));return}Fs(n.type===ni,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Fs(!n.props.index||!n.props.children,"An index route cannot have child routes.");let l={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(l.children=HN(n.props.children,i)),r.push(l)}),r}var Z2="get",Q2="application/x-www-form-urlencoded";function Iw(e){return e!=null&&typeof e.tagName=="string"}function oX(e){return Iw(e)&&e.tagName.toLowerCase()==="button"}function cX(e){return Iw(e)&&e.tagName.toLowerCase()==="form"}function dX(e){return Iw(e)&&e.tagName.toLowerCase()==="input"}function uX(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function hX(e,t){return e.button===0&&(!t||t==="_self")&&!uX(e)}var n2=null;function fX(){if(n2===null)try{new FormData(document.createElement("form"),0),n2=!1}catch{n2=!0}return n2}var mX=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function h4(e){return e!=null&&!mX.has(e)?(hd(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Q2}"`),null):e}function xX(e,t){let r,n,a,i,l;if(cX(e)){let o=e.getAttribute("action");n=o?H0(o,t):null,r=e.getAttribute("method")||Z2,a=h4(e.getAttribute("enctype"))||Q2,i=new FormData(e)}else if(oX(e)||dX(e)&&(e.type==="submit"||e.type==="image")){let o=e.form;if(o==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=e.getAttribute("formaction")||o.getAttribute("action");if(n=c?H0(c,t):null,r=e.getAttribute("formmethod")||o.getAttribute("method")||Z2,a=h4(e.getAttribute("formenctype"))||h4(o.getAttribute("enctype"))||Q2,i=new FormData(o,e),!fX()){let{name:d,type:f,value:p}=e;if(f==="image"){let y=d?`${d}.`:"";i.append(`${y}x`,"0"),i.append(`${y}y`,"0")}else d&&i.append(d,p)}}else{if(Iw(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=Z2,n=null,a=Q2,l=e}return i&&a==="text/plain"&&(l=i,i=void 0),{action:n,method:r.toLowerCase(),encType:a,formData:i,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function o6(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function pX(e,t,r){let n=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return n.pathname==="/"?n.pathname=`_root.${r}`:t&&H0(n.pathname,t)==="/"?n.pathname=`${t.replace(/\/$/,"")}/_root.${r}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${r}`,n}async function gX(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(r){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function bX(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function vX(e,t,r){let n=await Promise.all(e.map(async a=>{let i=t.routes[a.route.id];if(i){let l=await gX(i,r);return l.links?l.links():[]}return[]}));return NX(n.flat(1).filter(bX).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function sT(e,t,r,n,a,i){let l=(c,d)=>r[d]?c.route.id!==r[d].route.id:!0,o=(c,d)=>{var f;return r[d].pathname!==c.pathname||((f=r[d].route.path)==null?void 0:f.endsWith("*"))&&r[d].params["*"]!==c.params["*"]};return i==="assets"?t.filter((c,d)=>l(c,d)||o(c,d)):i==="data"?t.filter((c,d)=>{var p;let f=n.routes[c.route.id];if(!f||!f.hasLoader)return!1;if(l(c,d)||o(c,d))return!0;if(c.route.shouldRevalidate){let y=c.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((p=r[0])==null?void 0:p.params)||{},nextUrl:new URL(e,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof y=="boolean")return y}return!0}):[]}function yX(e,t,{includeHydrateFallback:r}={}){return wX(e.map(n=>{let a=t.routes[n.route.id];if(!a)return[];let i=[a.module];return a.clientActionModule&&(i=i.concat(a.clientActionModule)),a.clientLoaderModule&&(i=i.concat(a.clientLoaderModule)),r&&a.hydrateFallbackModule&&(i=i.concat(a.hydrateFallbackModule)),a.imports&&(i=i.concat(a.imports)),i}).flat(1))}function wX(e){return[...new Set(e)]}function kX(e){let t={},r=Object.keys(e).sort();for(let n of r)t[n]=e[n];return t}function NX(e,t){let r=new Set;return new Set(t),e.reduce((n,a)=>{let i=JSON.stringify(kX(a));return r.has(i)||(r.add(i),n.push({key:i,link:a})),n},[])}function HL(){let e=T.useContext(Z1);return o6(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function _X(){let e=T.useContext(Ow);return o6(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var c6=T.createContext(void 0);c6.displayName="FrameworkContext";function $L(){let e=T.useContext(c6);return o6(e,"You must render this element inside a <HydratedRouter> element"),e}function SX(e,t){let r=T.useContext(c6),[n,a]=T.useState(!1),[i,l]=T.useState(!1),{onFocus:o,onBlur:c,onMouseEnter:d,onMouseLeave:f,onTouchStart:p}=t,y=T.useRef(null);T.useEffect(()=>{if(e==="render"&&l(!0),e==="viewport"){let w=S=>{S.forEach(O=>{l(O.isIntersecting)})},k=new IntersectionObserver(w,{threshold:.5});return y.current&&k.observe(y.current),()=>{k.disconnect()}}},[e]),T.useEffect(()=>{if(n){let w=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(w)}}},[n]);let g=()=>{a(!0)},N=()=>{a(!1),l(!1)};return r?e!=="intent"?[i,y,{}]:[i,y,{onFocus:tg(o,g),onBlur:tg(c,N),onMouseEnter:tg(d,g),onMouseLeave:tg(f,N),onTouchStart:tg(p,g)}]:[!1,y,{}]}function tg(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function jX({page:e,...t}){let{router:r}=HL(),n=T.useMemo(()=>PL(r.routes,e,r.basename),[r.routes,e,r.basename]);return n?T.createElement(AX,{page:e,matches:n,...t}):null}function CX(e){let{manifest:t,routeModules:r}=$L(),[n,a]=T.useState([]);return T.useEffect(()=>{let i=!1;return vX(e,t,r).then(l=>{i||a(l)}),()=>{i=!0}},[e,t,r]),n}function AX({page:e,matches:t,...r}){let n=bd(),{manifest:a,routeModules:i}=$L(),{basename:l}=HL(),{loaderData:o,matches:c}=_X(),d=T.useMemo(()=>sT(e,t,c,a,n,"data"),[e,t,c,a,n]),f=T.useMemo(()=>sT(e,t,c,a,n,"assets"),[e,t,c,a,n]),p=T.useMemo(()=>{if(e===n.pathname+n.search+n.hash)return[];let N=new Set,w=!1;if(t.forEach(S=>{var E;let O=a.routes[S.route.id];!O||!O.hasLoader||(!d.some(D=>D.route.id===S.route.id)&&S.route.id in o&&((E=i[S.route.id])!=null&&E.shouldRevalidate)||O.hasClientLoader?w=!0:N.add(S.route.id))}),N.size===0)return[];let k=pX(e,l,"data");return w&&N.size>0&&k.searchParams.set("_routes",t.filter(S=>N.has(S.route.id)).map(S=>S.route.id).join(",")),[k.pathname+k.search]},[l,o,n,a,d,t,e,i]),y=T.useMemo(()=>yX(f,a),[f,a]),g=CX(f);return T.createElement(T.Fragment,null,p.map(N=>T.createElement("link",{key:N,rel:"prefetch",as:"fetch",href:N,...r})),y.map(N=>T.createElement("link",{key:N,rel:"modulepreload",href:N,...r})),g.map(({key:N,link:w})=>T.createElement("link",{key:N,nonce:r.nonce,...w})))}function EX(...e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var VL=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{VL&&(window.__reactRouterVersion="7.9.5")}catch{}function TX({basename:e,children:t,window:r}){let n=T.useRef();n.current==null&&(n.current=vG({window:r,v5Compat:!0}));let a=n.current,[i,l]=T.useState({action:a.action,location:a.location}),o=T.useCallback(c=>{T.startTransition(()=>l(c))},[l]);return T.useLayoutEffect(()=>a.listen(o),[a,o]),T.createElement(lX,{basename:e,children:t,location:i.location,navigationType:i.action,navigator:a})}var WL=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Uu=T.forwardRef(function({onClick:t,discover:r="render",prefetch:n="none",relative:a,reloadDocument:i,replace:l,state:o,target:c,to:d,preventScrollReset:f,viewTransition:p,...y},g){let{basename:N}=T.useContext(ru),w=typeof d=="string"&&WL.test(d),k,S=!1;if(typeof d=="string"&&w&&(k=d,VL))try{let z=new URL(window.location.href),Z=d.startsWith("//")?new URL(z.protocol+d):new URL(d),H=H0(Z.pathname,N);Z.origin===z.origin&&H!=null?d=H+Z.search+Z.hash:S=!0}catch{hd(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let O=WG(d,{relative:a}),[E,D,q]=SX(n,y),W=DX(d,{replace:l,state:o,target:c,preventScrollReset:f,relative:a,viewTransition:p});function R(z){t&&t(z),z.defaultPrevented||W(z)}let U=T.createElement("a",{...y,...q,href:k||O,onClick:S||i?t:R,ref:EX(g,D),target:c,"data-discover":!w&&r==="render"?"true":void 0});return E&&!w?T.createElement(T.Fragment,null,U,T.createElement(jX,{page:O})):U});Uu.displayName="Link";var OX=T.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:n="",end:a=!1,style:i,to:l,viewTransition:o,children:c,...d},f){let p=Ob(l,{relative:d.relative}),y=bd(),g=T.useContext(Ow),{navigator:N,basename:w}=T.useContext(ru),k=g!=null&&BX(p)&&o===!0,S=N.encodeLocation?N.encodeLocation(p).pathname:p.pathname,O=y.pathname,E=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;r||(O=O.toLowerCase(),E=E?E.toLowerCase():null,S=S.toLowerCase()),E&&w&&(E=H0(E,w)||E);const D=S!=="/"&&S.endsWith("/")?S.length-1:S.length;let q=O===S||!a&&O.startsWith(S)&&O.charAt(D)==="/",W=E!=null&&(E===S||!a&&E.startsWith(S)&&E.charAt(S.length)==="/"),R={isActive:q,isPending:W,isTransitioning:k},U=q?t:void 0,z;typeof n=="function"?z=n(R):z=[n,q?"active":null,W?"pending":null,k?"transitioning":null].filter(Boolean).join(" ");let Z=typeof i=="function"?i(R):i;return T.createElement(Uu,{...d,"aria-current":U,className:z,ref:f,style:Z,to:l,viewTransition:o},typeof c=="function"?c(R):c)});OX.displayName="NavLink";var PX=T.forwardRef(({discover:e="render",fetcherKey:t,navigate:r,reloadDocument:n,replace:a,state:i,method:l=Z2,action:o,onSubmit:c,relative:d,preventScrollReset:f,viewTransition:p,...y},g)=>{let N=RX(),w=FX(o,{relative:d}),k=l.toLowerCase()==="get"?"get":"post",S=typeof o=="string"&&WL.test(o),O=E=>{if(c&&c(E),E.defaultPrevented)return;E.preventDefault();let D=E.nativeEvent.submitter,q=(D==null?void 0:D.getAttribute("formmethod"))||l;N(D||E.currentTarget,{fetcherKey:t,method:q,navigate:r,replace:a,state:i,relative:d,preventScrollReset:f,viewTransition:p})};return T.createElement("form",{ref:g,method:k,action:w,onSubmit:n?c:O,...y,"data-discover":!S&&e==="render"?"true":void 0})});PX.displayName="Form";function IX(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function KL(e){let t=T.useContext(Z1);return Fs(t,IX(e)),t}function DX(e,{target:t,replace:r,state:n,preventScrollReset:a,relative:i,viewTransition:l}={}){let o=Pw(),c=bd(),d=Ob(e,{relative:i});return T.useCallback(f=>{if(hX(f,t)){f.preventDefault();let p=r!==void 0?r:Bg(c)===Bg(d);o(e,{replace:p,state:n,preventScrollReset:a,relative:i,viewTransition:l})}},[c,o,d,r,n,t,e,a,i,l])}var MX=0,LX=()=>`__${String(++MX)}__`;function RX(){let{router:e}=KL("useSubmit"),{basename:t}=T.useContext(ru),r=nX();return T.useCallback(async(n,a={})=>{let{action:i,method:l,encType:o,formData:c,body:d}=xX(n,t);if(a.navigate===!1){let f=a.fetcherKey||LX();await e.fetch(f,r,a.action||i,{preventScrollReset:a.preventScrollReset,formData:c,body:d,formMethod:a.method||l,formEncType:a.encType||o,flushSync:a.flushSync})}else await e.navigate(a.action||i,{preventScrollReset:a.preventScrollReset,formData:c,body:d,formMethod:a.method||l,formEncType:a.encType||o,replace:a.replace,state:a.state,fromRouteId:r,flushSync:a.flushSync,viewTransition:a.viewTransition})},[e,t,r])}function FX(e,{relative:t}={}){let{basename:r}=T.useContext(ru),n=T.useContext(Vu);Fs(n,"useFormAction must be used inside a RouteContext");let[a]=n.matches.slice(-1),i={...Ob(e||".",{relative:t})},l=bd();if(e==null){i.search=l.search;let o=new URLSearchParams(i.search),c=o.getAll("index");if(c.some(f=>f==="")){o.delete("index"),c.filter(p=>p).forEach(p=>o.append("index",p));let f=o.toString();i.search=f?`?${f}`:""}}return(!e||e===".")&&a.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(i.pathname=i.pathname==="/"?r:D0([r,i.pathname])),Bg(i)}function BX(e,{relative:t}={}){let r=T.useContext(LL);Fs(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=KL("useViewTransitionState"),a=Ob(e,{relative:t});if(!r.isTransitioning)return!1;let i=H0(r.currentLocation.pathname,n)||r.currentLocation.pathname,l=H0(r.nextLocation.pathname,n)||r.nextLocation.pathname;return dy(a.pathname,l)!=null||dy(a.pathname,i)!=null}var GL=OL(),J1=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},UX={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},zh,t6,yL,zX=(yL=class{constructor(){mn(this,zh,UX);mn(this,t6,!1)}setTimeoutProvider(e){Rr(this,zh,e)}setTimeout(e,t){return et(this,zh).setTimeout(e,t)}clearTimeout(e){et(this,zh).clearTimeout(e)}setInterval(e,t){return et(this,zh).setInterval(e,t)}clearInterval(e){et(this,zh).clearInterval(e)}},zh=new WeakMap,t6=new WeakMap,yL),Xf=new zX;function qX(e){setTimeout(e,0)}var Sm=typeof window>"u"||"Deno"in globalThis;function yo(){}function HX(e,t){return typeof e=="function"?e(t):e}function $N(e){return typeof e=="number"&&e>=0&&e!==1/0}function XL(e,t){return Math.max(e+(t||0)-Date.now(),0)}function ef(e,t){return typeof e=="function"?e(t):e}function ld(e,t){return typeof e=="function"?e(t):e}function iT(e,t){const{type:r="all",exact:n,fetchStatus:a,predicate:i,queryKey:l,stale:o}=e;if(l){if(n){if(t.queryHash!==d6(l,t.options))return!1}else if(!Ug(t.queryKey,l))return!1}if(r!=="all"){const c=t.isActive();if(r==="active"&&!c||r==="inactive"&&c)return!1}return!(typeof o=="boolean"&&t.isStale()!==o||a&&a!==t.state.fetchStatus||i&&!i(t))}function lT(e,t){const{exact:r,status:n,predicate:a,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(r){if(jm(t.options.mutationKey)!==jm(i))return!1}else if(!Ug(t.options.mutationKey,i))return!1}return!(n&&t.state.status!==n||a&&!a(t))}function d6(e,t){return((t==null?void 0:t.queryKeyHashFn)||jm)(e)}function jm(e){return JSON.stringify(e,(t,r)=>VN(r)?Object.keys(r).sort().reduce((n,a)=>(n[a]=r[a],n),{}):r)}function Ug(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(r=>Ug(e[r],t[r])):!1}var $X=Object.prototype.hasOwnProperty;function u6(e,t){if(e===t)return e;const r=oT(e)&&oT(t);if(!r&&!(VN(e)&&VN(t)))return t;const a=(r?e:Object.keys(e)).length,i=r?t:Object.keys(t),l=i.length,o=r?new Array(l):{};let c=0;for(let d=0;d<l;d++){const f=r?d:i[d],p=e[f],y=t[f];if(p===y){o[f]=p,(r?d<a:$X.call(e,f))&&c++;continue}if(p===null||y===null||typeof p!="object"||typeof y!="object"){o[f]=y;continue}const g=u6(p,y);o[f]=g,g===p&&c++}return a===l&&c===a?e:o}function uy(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}function oT(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function VN(e){if(!cT(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!cT(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function cT(e){return Object.prototype.toString.call(e)==="[object Object]"}function VX(e){return new Promise(t=>{Xf.setTimeout(t,e)})}function WN(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?u6(e,t):t}function WX(e,t,r=0){const n=[...e,t];return r&&n.length>r?n.slice(1):n}function KX(e,t,r=0){const n=[t,...e];return r&&n.length>r?n.slice(0,-1):n}var h6=Symbol();function YL(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===h6?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function ZL(e,t){return typeof e=="function"?e(...t):!!e}var nm,qh,S1,wL,GX=(wL=class extends J1{constructor(){super();mn(this,nm);mn(this,qh);mn(this,S1);Rr(this,S1,t=>{if(!Sm&&window.addEventListener){const r=()=>t();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){et(this,qh)||this.setEventListener(et(this,S1))}onUnsubscribe(){var t;this.hasListeners()||((t=et(this,qh))==null||t.call(this),Rr(this,qh,void 0))}setEventListener(t){var r;Rr(this,S1,t),(r=et(this,qh))==null||r.call(this),Rr(this,qh,t(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(t){et(this,nm)!==t&&(Rr(this,nm,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(r=>{r(t)})}isFocused(){var t;return typeof et(this,nm)=="boolean"?et(this,nm):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},nm=new WeakMap,qh=new WeakMap,S1=new WeakMap,wL),f6=new GX;function KN(){let e,t;const r=new Promise((a,i)=>{e=a,t=i});r.status="pending",r.catch(()=>{});function n(a){Object.assign(r,a),delete r.resolve,delete r.reject}return r.resolve=a=>{n({status:"fulfilled",value:a}),e(a)},r.reject=a=>{n({status:"rejected",reason:a}),t(a)},r}var XX=qX;function YX(){let e=[],t=0,r=o=>{o()},n=o=>{o()},a=XX;const i=o=>{t?e.push(o):a(()=>{r(o)})},l=()=>{const o=e;e=[],o.length&&a(()=>{n(()=>{o.forEach(c=>{r(c)})})})};return{batch:o=>{let c;t++;try{c=o()}finally{t--,t||l()}return c},batchCalls:o=>(...c)=>{i(()=>{o(...c)})},schedule:i,setNotifyFunction:o=>{r=o},setBatchNotifyFunction:o=>{n=o},setScheduler:o=>{a=o}}}var wi=YX(),j1,Hh,C1,kL,ZX=(kL=class extends J1{constructor(){super();mn(this,j1,!0);mn(this,Hh);mn(this,C1);Rr(this,C1,t=>{if(!Sm&&window.addEventListener){const r=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){et(this,Hh)||this.setEventListener(et(this,C1))}onUnsubscribe(){var t;this.hasListeners()||((t=et(this,Hh))==null||t.call(this),Rr(this,Hh,void 0))}setEventListener(t){var r;Rr(this,C1,t),(r=et(this,Hh))==null||r.call(this),Rr(this,Hh,t(this.setOnline.bind(this)))}setOnline(t){et(this,j1)!==t&&(Rr(this,j1,t),this.listeners.forEach(n=>{n(t)}))}isOnline(){return et(this,j1)}},j1=new WeakMap,Hh=new WeakMap,C1=new WeakMap,kL),hy=new ZX;function QX(e){return Math.min(1e3*2**e,3e4)}function QL(e){return(e??"online")==="online"?hy.isOnline():!0}var GN=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function JL(e){let t=!1,r=0,n;const a=KN(),i=()=>a.status!=="pending",l=w=>{var k;if(!i()){const S=new GN(w);y(S),(k=e.onCancel)==null||k.call(e,S)}},o=()=>{t=!0},c=()=>{t=!1},d=()=>f6.isFocused()&&(e.networkMode==="always"||hy.isOnline())&&e.canRun(),f=()=>QL(e.networkMode)&&e.canRun(),p=w=>{i()||(n==null||n(),a.resolve(w))},y=w=>{i()||(n==null||n(),a.reject(w))},g=()=>new Promise(w=>{var k;n=S=>{(i()||d())&&w(S)},(k=e.onPause)==null||k.call(e)}).then(()=>{var w;n=void 0,i()||(w=e.onContinue)==null||w.call(e)}),N=()=>{if(i())return;let w;const k=r===0?e.initialPromise:void 0;try{w=k??e.fn()}catch(S){w=Promise.reject(S)}Promise.resolve(w).then(p).catch(S=>{var W;if(i())return;const O=e.retry??(Sm?0:3),E=e.retryDelay??QX,D=typeof E=="function"?E(r,S):E,q=O===!0||typeof O=="number"&&r<O||typeof O=="function"&&O(r,S);if(t||!q){y(S);return}r++,(W=e.onFail)==null||W.call(e,r,S),VX(D).then(()=>d()?void 0:g()).then(()=>{t?y(S):N()})})};return{promise:a,status:()=>a.status,cancel:l,continue:()=>(n==null||n(),a),cancelRetry:o,continueRetry:c,canStart:f,start:()=>(f()?N():g().then(N),a)}}var am,NL,eR=(NL=class{constructor(){mn(this,am)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),$N(this.gcTime)&&Rr(this,am,Xf.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Sm?1/0:300*1e3))}clearGcTimeout(){et(this,am)&&(Xf.clearTimeout(et(this,am)),Rr(this,am,void 0))}},am=new WeakMap,NL),sm,A1,sd,im,ml,Sb,lm,qd,g0,_L,JX=(_L=class extends eR{constructor(t){super();mn(this,qd);mn(this,sm);mn(this,A1);mn(this,sd);mn(this,im);mn(this,ml);mn(this,Sb);mn(this,lm);Rr(this,lm,!1),Rr(this,Sb,t.defaultOptions),this.setOptions(t.options),this.observers=[],Rr(this,im,t.client),Rr(this,sd,et(this,im).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,Rr(this,sm,uT(this.options)),this.state=t.state??et(this,sm),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=et(this,ml))==null?void 0:t.promise}setOptions(t){if(this.options={...et(this,Sb),...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const r=uT(this.options);r.data!==void 0&&(this.setState(dT(r.data,r.dataUpdatedAt)),Rr(this,sm,r))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&et(this,sd).remove(this)}setData(t,r){const n=WN(this.state.data,t,this.options);return ea(this,qd,g0).call(this,{data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(t,r){ea(this,qd,g0).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var n,a;const r=(n=et(this,ml))==null?void 0:n.promise;return(a=et(this,ml))==null||a.cancel(t),r?r.then(yo).catch(yo):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(et(this,sm))}isActive(){return this.observers.some(t=>ld(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===h6||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>ef(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!XL(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(n=>n.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=et(this,ml))==null||r.continue()}onOnline(){var r;const t=this.observers.find(n=>n.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=et(this,ml))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),et(this,sd).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(et(this,ml)&&(et(this,lm)?et(this,ml).cancel({revert:!0}):et(this,ml).cancelRetry()),this.scheduleGc()),et(this,sd).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||ea(this,qd,g0).call(this,{type:"invalidate"})}async fetch(t,r){var c,d,f,p,y,g,N,w,k,S,O,E;if(this.state.fetchStatus!=="idle"&&((c=et(this,ml))==null?void 0:c.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(et(this,ml))return et(this,ml).continueRetry(),et(this,ml).promise}if(t&&this.setOptions(t),!this.options.queryFn){const D=this.observers.find(q=>q.options.queryFn);D&&this.setOptions(D.options)}const n=new AbortController,a=D=>{Object.defineProperty(D,"signal",{enumerable:!0,get:()=>(Rr(this,lm,!0),n.signal)})},i=()=>{const D=YL(this.options,r),W=(()=>{const R={client:et(this,im),queryKey:this.queryKey,meta:this.meta};return a(R),R})();return Rr(this,lm,!1),this.options.persister?this.options.persister(D,W,this):D(W)},o=(()=>{const D={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:et(this,im),state:this.state,fetchFn:i};return a(D),D})();(d=this.options.behavior)==null||d.onFetch(o,this),Rr(this,A1,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((f=o.fetchOptions)==null?void 0:f.meta))&&ea(this,qd,g0).call(this,{type:"fetch",meta:(p=o.fetchOptions)==null?void 0:p.meta}),Rr(this,ml,JL({initialPromise:r==null?void 0:r.initialPromise,fn:o.fetchFn,onCancel:D=>{D instanceof GN&&D.revert&&this.setState({...et(this,A1),fetchStatus:"idle"}),n.abort()},onFail:(D,q)=>{ea(this,qd,g0).call(this,{type:"failed",failureCount:D,error:q})},onPause:()=>{ea(this,qd,g0).call(this,{type:"pause"})},onContinue:()=>{ea(this,qd,g0).call(this,{type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0}));try{const D=await et(this,ml).start();if(D===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(D),(g=(y=et(this,sd).config).onSuccess)==null||g.call(y,D,this),(w=(N=et(this,sd).config).onSettled)==null||w.call(N,D,this.state.error,this),D}catch(D){if(D instanceof GN){if(D.silent)return et(this,ml).promise;if(D.revert){if(this.state.data===void 0)throw D;return this.state.data}}throw ea(this,qd,g0).call(this,{type:"error",error:D}),(S=(k=et(this,sd).config).onError)==null||S.call(k,D,this),(E=(O=et(this,sd).config).onSettled)==null||E.call(O,this.state.data,D,this),D}finally{this.scheduleGc()}}},sm=new WeakMap,A1=new WeakMap,sd=new WeakMap,im=new WeakMap,ml=new WeakMap,Sb=new WeakMap,lm=new WeakMap,qd=new WeakSet,g0=function(t){const r=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...tR(n.data,this.options),fetchMeta:t.meta??null};case"success":const a={...n,...dT(t.data,t.dataUpdatedAt),dataUpdateCount:n.dataUpdateCount+1,...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return Rr(this,A1,t.manual?a:void 0),a;case"error":const i=t.error;return{...n,error:i,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=r(this.state),wi.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),et(this,sd).notify({query:this,type:"updated",action:t})})},_L);function tR(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:QL(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function dT(e,t){return{data:e,dataUpdatedAt:t??Date.now(),error:null,isInvalidated:!1,status:"success"}}function uT(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,n=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var Qo,ba,jb,bo,om,E1,w0,$h,Cb,T1,O1,cm,dm,Vh,P1,Ua,xg,XN,YN,ZN,QN,JN,e_,t_,rR,SL,eY=(SL=class extends J1{constructor(t,r){super();mn(this,Ua);mn(this,Qo);mn(this,ba);mn(this,jb);mn(this,bo);mn(this,om);mn(this,E1);mn(this,w0);mn(this,$h);mn(this,Cb);mn(this,T1);mn(this,O1);mn(this,cm);mn(this,dm);mn(this,Vh);mn(this,P1,new Set);this.options=r,Rr(this,Qo,t),Rr(this,$h,null),Rr(this,w0,KN()),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(et(this,ba).addObserver(this),hT(et(this,ba),this.options)?ea(this,Ua,xg).call(this):this.updateResult(),ea(this,Ua,QN).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return r_(et(this,ba),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return r_(et(this,ba),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,ea(this,Ua,JN).call(this),ea(this,Ua,e_).call(this),et(this,ba).removeObserver(this)}setOptions(t){const r=this.options,n=et(this,ba);if(this.options=et(this,Qo).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof ld(this.options.enabled,et(this,ba))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");ea(this,Ua,t_).call(this),et(this,ba).setOptions(this.options),r._defaulted&&!uy(this.options,r)&&et(this,Qo).getQueryCache().notify({type:"observerOptionsUpdated",query:et(this,ba),observer:this});const a=this.hasListeners();a&&fT(et(this,ba),n,this.options,r)&&ea(this,Ua,xg).call(this),this.updateResult(),a&&(et(this,ba)!==n||ld(this.options.enabled,et(this,ba))!==ld(r.enabled,et(this,ba))||ef(this.options.staleTime,et(this,ba))!==ef(r.staleTime,et(this,ba)))&&ea(this,Ua,XN).call(this);const i=ea(this,Ua,YN).call(this);a&&(et(this,ba)!==n||ld(this.options.enabled,et(this,ba))!==ld(r.enabled,et(this,ba))||i!==et(this,Vh))&&ea(this,Ua,ZN).call(this,i)}getOptimisticResult(t){const r=et(this,Qo).getQueryCache().build(et(this,Qo),t),n=this.createResult(r,t);return rY(this,n)&&(Rr(this,bo,n),Rr(this,E1,this.options),Rr(this,om,et(this,ba).state)),n}getCurrentResult(){return et(this,bo)}trackResult(t,r){return new Proxy(t,{get:(n,a)=>(this.trackProp(a),r==null||r(a),a==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&et(this,w0).status==="pending"&&et(this,w0).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(n,a))})}trackProp(t){et(this,P1).add(t)}getCurrentQuery(){return et(this,ba)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const r=et(this,Qo).defaultQueryOptions(t),n=et(this,Qo).getQueryCache().build(et(this,Qo),r);return n.fetch().then(()=>this.createResult(n,r))}fetch(t){return ea(this,Ua,xg).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),et(this,bo)))}createResult(t,r){var z;const n=et(this,ba),a=this.options,i=et(this,bo),l=et(this,om),o=et(this,E1),d=t!==n?t.state:et(this,jb),{state:f}=t;let p={...f},y=!1,g;if(r._optimisticResults){const Z=this.hasListeners(),H=!Z&&hT(t,r),K=Z&&fT(t,n,r,a);(H||K)&&(p={...p,...tR(f.data,t.options)}),r._optimisticResults==="isRestoring"&&(p.fetchStatus="idle")}let{error:N,errorUpdatedAt:w,status:k}=p;g=p.data;let S=!1;if(r.placeholderData!==void 0&&g===void 0&&k==="pending"){let Z;i!=null&&i.isPlaceholderData&&r.placeholderData===(o==null?void 0:o.placeholderData)?(Z=i.data,S=!0):Z=typeof r.placeholderData=="function"?r.placeholderData((z=et(this,O1))==null?void 0:z.state.data,et(this,O1)):r.placeholderData,Z!==void 0&&(k="success",g=WN(i==null?void 0:i.data,Z,r),y=!0)}if(r.select&&g!==void 0&&!S)if(i&&g===(l==null?void 0:l.data)&&r.select===et(this,Cb))g=et(this,T1);else try{Rr(this,Cb,r.select),g=r.select(g),g=WN(i==null?void 0:i.data,g,r),Rr(this,T1,g),Rr(this,$h,null)}catch(Z){Rr(this,$h,Z)}et(this,$h)&&(N=et(this,$h),g=et(this,T1),w=Date.now(),k="error");const O=p.fetchStatus==="fetching",E=k==="pending",D=k==="error",q=E&&O,W=g!==void 0,U={status:k,fetchStatus:p.fetchStatus,isPending:E,isSuccess:k==="success",isError:D,isInitialLoading:q,isLoading:q,data:g,dataUpdatedAt:p.dataUpdatedAt,error:N,errorUpdatedAt:w,failureCount:p.fetchFailureCount,failureReason:p.fetchFailureReason,errorUpdateCount:p.errorUpdateCount,isFetched:p.dataUpdateCount>0||p.errorUpdateCount>0,isFetchedAfterMount:p.dataUpdateCount>d.dataUpdateCount||p.errorUpdateCount>d.errorUpdateCount,isFetching:O,isRefetching:O&&!E,isLoadingError:D&&!W,isPaused:p.fetchStatus==="paused",isPlaceholderData:y,isRefetchError:D&&W,isStale:m6(t,r),refetch:this.refetch,promise:et(this,w0),isEnabled:ld(r.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const Z=J=>{U.status==="error"?J.reject(U.error):U.data!==void 0&&J.resolve(U.data)},H=()=>{const J=Rr(this,w0,U.promise=KN());Z(J)},K=et(this,w0);switch(K.status){case"pending":t.queryHash===n.queryHash&&Z(K);break;case"fulfilled":(U.status==="error"||U.data!==K.value)&&H();break;case"rejected":(U.status!=="error"||U.error!==K.reason)&&H();break}}return U}updateResult(){const t=et(this,bo),r=this.createResult(et(this,ba),this.options);if(Rr(this,om,et(this,ba).state),Rr(this,E1,this.options),et(this,om).data!==void 0&&Rr(this,O1,et(this,ba)),uy(r,t))return;Rr(this,bo,r);const n=()=>{if(!t)return!0;const{notifyOnChangeProps:a}=this.options,i=typeof a=="function"?a():a;if(i==="all"||!i&&!et(this,P1).size)return!0;const l=new Set(i??et(this,P1));return this.options.throwOnError&&l.add("error"),Object.keys(et(this,bo)).some(o=>{const c=o;return et(this,bo)[c]!==t[c]&&l.has(c)})};ea(this,Ua,rR).call(this,{listeners:n()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&ea(this,Ua,QN).call(this)}},Qo=new WeakMap,ba=new WeakMap,jb=new WeakMap,bo=new WeakMap,om=new WeakMap,E1=new WeakMap,w0=new WeakMap,$h=new WeakMap,Cb=new WeakMap,T1=new WeakMap,O1=new WeakMap,cm=new WeakMap,dm=new WeakMap,Vh=new WeakMap,P1=new WeakMap,Ua=new WeakSet,xg=function(t){ea(this,Ua,t_).call(this);let r=et(this,ba).fetch(this.options,t);return t!=null&&t.throwOnError||(r=r.catch(yo)),r},XN=function(){ea(this,Ua,JN).call(this);const t=ef(this.options.staleTime,et(this,ba));if(Sm||et(this,bo).isStale||!$N(t))return;const n=XL(et(this,bo).dataUpdatedAt,t)+1;Rr(this,cm,Xf.setTimeout(()=>{et(this,bo).isStale||this.updateResult()},n))},YN=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(et(this,ba)):this.options.refetchInterval)??!1},ZN=function(t){ea(this,Ua,e_).call(this),Rr(this,Vh,t),!(Sm||ld(this.options.enabled,et(this,ba))===!1||!$N(et(this,Vh))||et(this,Vh)===0)&&Rr(this,dm,Xf.setInterval(()=>{(this.options.refetchIntervalInBackground||f6.isFocused())&&ea(this,Ua,xg).call(this)},et(this,Vh)))},QN=function(){ea(this,Ua,XN).call(this),ea(this,Ua,ZN).call(this,ea(this,Ua,YN).call(this))},JN=function(){et(this,cm)&&(Xf.clearTimeout(et(this,cm)),Rr(this,cm,void 0))},e_=function(){et(this,dm)&&(Xf.clearInterval(et(this,dm)),Rr(this,dm,void 0))},t_=function(){const t=et(this,Qo).getQueryCache().build(et(this,Qo),this.options);if(t===et(this,ba))return;const r=et(this,ba);Rr(this,ba,t),Rr(this,jb,t.state),this.hasListeners()&&(r==null||r.removeObserver(this),t.addObserver(this))},rR=function(t){wi.batch(()=>{t.listeners&&this.listeners.forEach(r=>{r(et(this,bo))}),et(this,Qo).getQueryCache().notify({query:et(this,ba),type:"observerResultsUpdated"})})},SL);function tY(e,t){return ld(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function hT(e,t){return tY(e,t)||e.state.data!==void 0&&r_(e,t,t.refetchOnMount)}function r_(e,t,r){if(ld(t.enabled,e)!==!1&&ef(t.staleTime,e)!=="static"){const n=typeof r=="function"?r(e):r;return n==="always"||n!==!1&&m6(e,t)}return!1}function fT(e,t,r,n){return(e!==t||ld(n.enabled,e)===!1)&&(!r.suspense||e.state.status!=="error")&&m6(e,r)}function m6(e,t){return ld(t.enabled,e)!==!1&&e.isStaleByTime(ef(t.staleTime,e))}function rY(e,t){return!uy(e.getCurrentResult(),t)}function mT(e){return{onFetch:(t,r)=>{var f,p,y,g,N;const n=t.options,a=(y=(p=(f=t.fetchOptions)==null?void 0:f.meta)==null?void 0:p.fetchMore)==null?void 0:y.direction,i=((g=t.state.data)==null?void 0:g.pages)||[],l=((N=t.state.data)==null?void 0:N.pageParams)||[];let o={pages:[],pageParams:[]},c=0;const d=async()=>{let w=!1;const k=E=>{Object.defineProperty(E,"signal",{enumerable:!0,get:()=>(t.signal.aborted?w=!0:t.signal.addEventListener("abort",()=>{w=!0}),t.signal)})},S=YL(t.options,t.fetchOptions),O=async(E,D,q)=>{if(w)return Promise.reject();if(D==null&&E.pages.length)return Promise.resolve(E);const R=(()=>{const H={client:t.client,queryKey:t.queryKey,pageParam:D,direction:q?"backward":"forward",meta:t.options.meta};return k(H),H})(),U=await S(R),{maxPages:z}=t.options,Z=q?KX:WX;return{pages:Z(E.pages,U,z),pageParams:Z(E.pageParams,D,z)}};if(a&&i.length){const E=a==="backward",D=E?nY:xT,q={pages:i,pageParams:l},W=D(n,q);o=await O(q,W,E)}else{const E=e??i.length;do{const D=c===0?l[0]??n.initialPageParam:xT(n,o);if(c>0&&D==null)break;o=await O(o,D),c++}while(c<E)}return o};t.options.persister?t.fetchFn=()=>{var w,k;return(k=(w=t.options).persister)==null?void 0:k.call(w,d,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r)}:t.fetchFn=d}}}function xT(e,{pages:t,pageParams:r}){const n=t.length-1;return t.length>0?e.getNextPageParam(t[n],t,r[n],r):void 0}function nY(e,{pages:t,pageParams:r}){var n;return t.length>0?(n=e.getPreviousPageParam)==null?void 0:n.call(e,t[0],t,r[0],r):void 0}var Ab,Au,vo,um,Eu,Lh,jL,aY=(jL=class extends eR{constructor(t){super();mn(this,Eu);mn(this,Ab);mn(this,Au);mn(this,vo);mn(this,um);Rr(this,Ab,t.client),this.mutationId=t.mutationId,Rr(this,vo,t.mutationCache),Rr(this,Au,[]),this.state=t.state||nR(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){et(this,Au).includes(t)||(et(this,Au).push(t),this.clearGcTimeout(),et(this,vo).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){Rr(this,Au,et(this,Au).filter(r=>r!==t)),this.scheduleGc(),et(this,vo).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){et(this,Au).length||(this.state.status==="pending"?this.scheduleGc():et(this,vo).remove(this))}continue(){var t;return((t=et(this,um))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var l,o,c,d,f,p,y,g,N,w,k,S,O,E,D,q,W,R,U,z;const r=()=>{ea(this,Eu,Lh).call(this,{type:"continue"})},n={client:et(this,Ab),meta:this.options.meta,mutationKey:this.options.mutationKey};Rr(this,um,JL({fn:()=>this.options.mutationFn?this.options.mutationFn(t,n):Promise.reject(new Error("No mutationFn found")),onFail:(Z,H)=>{ea(this,Eu,Lh).call(this,{type:"failed",failureCount:Z,error:H})},onPause:()=>{ea(this,Eu,Lh).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>et(this,vo).canRun(this)}));const a=this.state.status==="pending",i=!et(this,um).canStart();try{if(a)r();else{ea(this,Eu,Lh).call(this,{type:"pending",variables:t,isPaused:i}),await((o=(l=et(this,vo).config).onMutate)==null?void 0:o.call(l,t,this,n));const H=await((d=(c=this.options).onMutate)==null?void 0:d.call(c,t,n));H!==this.state.context&&ea(this,Eu,Lh).call(this,{type:"pending",context:H,variables:t,isPaused:i})}const Z=await et(this,um).start();return await((p=(f=et(this,vo).config).onSuccess)==null?void 0:p.call(f,Z,t,this.state.context,this,n)),await((g=(y=this.options).onSuccess)==null?void 0:g.call(y,Z,t,this.state.context,n)),await((w=(N=et(this,vo).config).onSettled)==null?void 0:w.call(N,Z,null,this.state.variables,this.state.context,this,n)),await((S=(k=this.options).onSettled)==null?void 0:S.call(k,Z,null,t,this.state.context,n)),ea(this,Eu,Lh).call(this,{type:"success",data:Z}),Z}catch(Z){try{throw await((E=(O=et(this,vo).config).onError)==null?void 0:E.call(O,Z,t,this.state.context,this,n)),await((q=(D=this.options).onError)==null?void 0:q.call(D,Z,t,this.state.context,n)),await((R=(W=et(this,vo).config).onSettled)==null?void 0:R.call(W,void 0,Z,this.state.variables,this.state.context,this,n)),await((z=(U=this.options).onSettled)==null?void 0:z.call(U,void 0,Z,t,this.state.context,n)),Z}finally{ea(this,Eu,Lh).call(this,{type:"error",error:Z})}}finally{et(this,vo).runNext(this)}}},Ab=new WeakMap,Au=new WeakMap,vo=new WeakMap,um=new WeakMap,Eu=new WeakSet,Lh=function(t){const r=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),wi.batch(()=>{et(this,Au).forEach(n=>{n.onMutationUpdate(t)}),et(this,vo).notify({mutation:this,type:"updated",action:t})})},jL);function nR(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var k0,Hd,Eb,CL,sY=(CL=class extends J1{constructor(t={}){super();mn(this,k0);mn(this,Hd);mn(this,Eb);this.config=t,Rr(this,k0,new Set),Rr(this,Hd,new Map),Rr(this,Eb,0)}build(t,r,n){const a=new aY({client:t,mutationCache:this,mutationId:++t2(this,Eb)._,options:t.defaultMutationOptions(r),state:n});return this.add(a),a}add(t){et(this,k0).add(t);const r=a2(t);if(typeof r=="string"){const n=et(this,Hd).get(r);n?n.push(t):et(this,Hd).set(r,[t])}this.notify({type:"added",mutation:t})}remove(t){if(et(this,k0).delete(t)){const r=a2(t);if(typeof r=="string"){const n=et(this,Hd).get(r);if(n)if(n.length>1){const a=n.indexOf(t);a!==-1&&n.splice(a,1)}else n[0]===t&&et(this,Hd).delete(r)}}this.notify({type:"removed",mutation:t})}canRun(t){const r=a2(t);if(typeof r=="string"){const n=et(this,Hd).get(r),a=n==null?void 0:n.find(i=>i.state.status==="pending");return!a||a===t}else return!0}runNext(t){var n;const r=a2(t);if(typeof r=="string"){const a=(n=et(this,Hd).get(r))==null?void 0:n.find(i=>i!==t&&i.state.isPaused);return(a==null?void 0:a.continue())??Promise.resolve()}else return Promise.resolve()}clear(){wi.batch(()=>{et(this,k0).forEach(t=>{this.notify({type:"removed",mutation:t})}),et(this,k0).clear(),et(this,Hd).clear()})}getAll(){return Array.from(et(this,k0))}find(t){const r={exact:!0,...t};return this.getAll().find(n=>lT(r,n))}findAll(t={}){return this.getAll().filter(r=>lT(t,r))}notify(t){wi.batch(()=>{this.listeners.forEach(r=>{r(t)})})}resumePausedMutations(){const t=this.getAll().filter(r=>r.state.isPaused);return wi.batch(()=>Promise.all(t.map(r=>r.continue().catch(yo))))}},k0=new WeakMap,Hd=new WeakMap,Eb=new WeakMap,CL);function a2(e){var t;return(t=e.options.scope)==null?void 0:t.id}var N0,Wh,Jo,_0,q0,J2,n_,AL,iY=(AL=class extends J1{constructor(r,n){super();mn(this,q0);mn(this,N0);mn(this,Wh);mn(this,Jo);mn(this,_0);Rr(this,N0,r),this.setOptions(n),this.bindMethods(),ea(this,q0,J2).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(r){var a;const n=this.options;this.options=et(this,N0).defaultMutationOptions(r),uy(this.options,n)||et(this,N0).getMutationCache().notify({type:"observerOptionsUpdated",mutation:et(this,Jo),observer:this}),n!=null&&n.mutationKey&&this.options.mutationKey&&jm(n.mutationKey)!==jm(this.options.mutationKey)?this.reset():((a=et(this,Jo))==null?void 0:a.state.status)==="pending"&&et(this,Jo).setOptions(this.options)}onUnsubscribe(){var r;this.hasListeners()||(r=et(this,Jo))==null||r.removeObserver(this)}onMutationUpdate(r){ea(this,q0,J2).call(this),ea(this,q0,n_).call(this,r)}getCurrentResult(){return et(this,Wh)}reset(){var r;(r=et(this,Jo))==null||r.removeObserver(this),Rr(this,Jo,void 0),ea(this,q0,J2).call(this),ea(this,q0,n_).call(this)}mutate(r,n){var a;return Rr(this,_0,n),(a=et(this,Jo))==null||a.removeObserver(this),Rr(this,Jo,et(this,N0).getMutationCache().build(et(this,N0),this.options)),et(this,Jo).addObserver(this),et(this,Jo).execute(r)}},N0=new WeakMap,Wh=new WeakMap,Jo=new WeakMap,_0=new WeakMap,q0=new WeakSet,J2=function(){var n;const r=((n=et(this,Jo))==null?void 0:n.state)??nR();Rr(this,Wh,{...r,isPending:r.status==="pending",isSuccess:r.status==="success",isError:r.status==="error",isIdle:r.status==="idle",mutate:this.mutate,reset:this.reset})},n_=function(r){wi.batch(()=>{var n,a,i,l,o,c,d,f;if(et(this,_0)&&this.hasListeners()){const p=et(this,Wh).variables,y=et(this,Wh).context,g={client:et(this,N0),meta:this.options.meta,mutationKey:this.options.mutationKey};(r==null?void 0:r.type)==="success"?((a=(n=et(this,_0)).onSuccess)==null||a.call(n,r.data,p,y,g),(l=(i=et(this,_0)).onSettled)==null||l.call(i,r.data,null,p,y,g)):(r==null?void 0:r.type)==="error"&&((c=(o=et(this,_0)).onError)==null||c.call(o,r.error,p,y,g),(f=(d=et(this,_0)).onSettled)==null||f.call(d,void 0,r.error,p,y,g))}this.listeners.forEach(p=>{p(et(this,Wh))})})},AL),Tu,EL,lY=(EL=class extends J1{constructor(t={}){super();mn(this,Tu);this.config=t,Rr(this,Tu,new Map)}build(t,r,n){const a=r.queryKey,i=r.queryHash??d6(a,r);let l=this.get(i);return l||(l=new JX({client:t,queryKey:a,queryHash:i,options:t.defaultQueryOptions(r),state:n,defaultOptions:t.getQueryDefaults(a)}),this.add(l)),l}add(t){et(this,Tu).has(t.queryHash)||(et(this,Tu).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const r=et(this,Tu).get(t.queryHash);r&&(t.destroy(),r===t&&et(this,Tu).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){wi.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return et(this,Tu).get(t)}getAll(){return[...et(this,Tu).values()]}find(t){const r={exact:!0,...t};return this.getAll().find(n=>iT(r,n))}findAll(t={}){const r=this.getAll();return Object.keys(t).length>0?r.filter(n=>iT(t,n)):r}notify(t){wi.batch(()=>{this.listeners.forEach(r=>{r(t)})})}onFocus(){wi.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){wi.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Tu=new WeakMap,EL),ai,Kh,Gh,I1,D1,Xh,M1,L1,TL,oY=(TL=class{constructor(e={}){mn(this,ai);mn(this,Kh);mn(this,Gh);mn(this,I1);mn(this,D1);mn(this,Xh);mn(this,M1);mn(this,L1);Rr(this,ai,e.queryCache||new lY),Rr(this,Kh,e.mutationCache||new sY),Rr(this,Gh,e.defaultOptions||{}),Rr(this,I1,new Map),Rr(this,D1,new Map),Rr(this,Xh,0)}mount(){t2(this,Xh)._++,et(this,Xh)===1&&(Rr(this,M1,f6.subscribe(async e=>{e&&(await this.resumePausedMutations(),et(this,ai).onFocus())})),Rr(this,L1,hy.subscribe(async e=>{e&&(await this.resumePausedMutations(),et(this,ai).onOnline())})))}unmount(){var e,t;t2(this,Xh)._--,et(this,Xh)===0&&((e=et(this,M1))==null||e.call(this),Rr(this,M1,void 0),(t=et(this,L1))==null||t.call(this),Rr(this,L1,void 0))}isFetching(e){return et(this,ai).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return et(this,Kh).findAll({...e,status:"pending"}).length}getQueryData(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=et(this,ai).get(t.queryHash))==null?void 0:r.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),r=et(this,ai).build(this,t),n=r.state.data;return n===void 0?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(ef(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(n))}getQueriesData(e){return et(this,ai).findAll(e).map(({queryKey:t,state:r})=>{const n=r.data;return[t,n]})}setQueryData(e,t,r){const n=this.defaultQueryOptions({queryKey:e}),a=et(this,ai).get(n.queryHash),i=a==null?void 0:a.state.data,l=HX(t,i);if(l!==void 0)return et(this,ai).build(this,n).setData(l,{...r,manual:!0})}setQueriesData(e,t,r){return wi.batch(()=>et(this,ai).findAll(e).map(({queryKey:n})=>[n,this.setQueryData(n,t,r)]))}getQueryState(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=et(this,ai).get(t.queryHash))==null?void 0:r.state}removeQueries(e){const t=et(this,ai);wi.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=et(this,ai);return wi.batch(()=>(r.findAll(e).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const r={revert:!0,...t},n=wi.batch(()=>et(this,ai).findAll(e).map(a=>a.cancel(r)));return Promise.all(n).then(yo).catch(yo)}invalidateQueries(e,t={}){return wi.batch(()=>(et(this,ai).findAll(e).forEach(r=>{r.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},n=wi.batch(()=>et(this,ai).findAll(e).filter(a=>!a.isDisabled()&&!a.isStatic()).map(a=>{let i=a.fetch(void 0,r);return r.throwOnError||(i=i.catch(yo)),a.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(n).then(yo)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=et(this,ai).build(this,t);return r.isStaleByTime(ef(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(yo).catch(yo)}fetchInfiniteQuery(e){return e.behavior=mT(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(yo).catch(yo)}ensureInfiniteQueryData(e){return e.behavior=mT(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return hy.isOnline()?et(this,Kh).resumePausedMutations():Promise.resolve()}getQueryCache(){return et(this,ai)}getMutationCache(){return et(this,Kh)}getDefaultOptions(){return et(this,Gh)}setDefaultOptions(e){Rr(this,Gh,e)}setQueryDefaults(e,t){et(this,I1).set(jm(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...et(this,I1).values()],r={};return t.forEach(n=>{Ug(e,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(e,t){et(this,D1).set(jm(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...et(this,D1).values()],r={};return t.forEach(n=>{Ug(e,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...et(this,Gh).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=d6(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===h6&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...et(this,Gh).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){et(this,ai).clear(),et(this,Kh).clear()}},ai=new WeakMap,Kh=new WeakMap,Gh=new WeakMap,I1=new WeakMap,D1=new WeakMap,Xh=new WeakMap,M1=new WeakMap,L1=new WeakMap,TL),aR=T.createContext(void 0),qn=e=>{const t=T.useContext(aR);if(e)return e;if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},cY=({client:e,children:t})=>(T.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),s.jsx(aR.Provider,{value:e,children:t})),sR=T.createContext(!1),dY=()=>T.useContext(sR);sR.Provider;function uY(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var hY=T.createContext(uY()),fY=()=>T.useContext(hY),mY=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},xY=e=>{T.useEffect(()=>{e.clearReset()},[e])},pY=({result:e,errorResetBoundary:t,throwOnError:r,query:n,suspense:a})=>e.isError&&!t.isReset()&&!e.isFetching&&n&&(a&&e.data===void 0||ZL(r,[e.error,n])),gY=e=>{if(e.suspense){const r=a=>a==="static"?a:Math.max(a??1e3,1e3),n=e.staleTime;e.staleTime=typeof n=="function"?(...a)=>r(n(...a)):r(n),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},bY=(e,t)=>e.isLoading&&e.isFetching&&!t,vY=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,pT=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()});function yY(e,t,r){var p,y,g,N,w;const n=dY(),a=fY(),i=qn(r),l=i.defaultQueryOptions(e);(y=(p=i.getDefaultOptions().queries)==null?void 0:p._experimental_beforeQuery)==null||y.call(p,l),l._optimisticResults=n?"isRestoring":"optimistic",gY(l),mY(l,a),xY(a);const o=!i.getQueryCache().get(l.queryHash),[c]=T.useState(()=>new t(i,l)),d=c.getOptimisticResult(l),f=!n&&e.subscribed!==!1;if(T.useSyncExternalStore(T.useCallback(k=>{const S=f?c.subscribe(wi.batchCalls(k)):yo;return c.updateResult(),S},[c,f]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),T.useEffect(()=>{c.setOptions(l)},[l,c]),vY(l,d))throw pT(l,c,a);if(pY({result:d,errorResetBoundary:a,throwOnError:l.throwOnError,query:i.getQueryCache().get(l.queryHash),suspense:l.suspense}))throw d.error;if((N=(g=i.getDefaultOptions().queries)==null?void 0:g._experimental_afterQuery)==null||N.call(g,l,d),l.experimental_prefetchInRender&&!Sm&&bY(d,n)){const k=o?pT(l,c,a):(w=i.getQueryCache().get(l.queryHash))==null?void 0:w.promise;k==null||k.catch(yo).finally(()=>{c.updateResult()})}return l.notifyOnChangeProps?d:c.trackResult(d)}function Ts(e,t){return yY(e,eY,t)}function wY(e,t){const r=qn(t),n=r.getQueryCache();return T.useSyncExternalStore(T.useCallback(a=>n.subscribe(wi.batchCalls(a)),[n]),()=>r.isFetching(e),()=>r.isFetching(e))}function kY(e,t){const r=qn(t);return NY({filters:{...e,status:"pending"}},r).length}function gT(e,t){return e.findAll(t.filters).map(r=>t.select?t.select(r):r.state)}function NY(e={},t){const r=qn(t).getMutationCache(),n=T.useRef(e),a=T.useRef(null);return a.current===null&&(a.current=gT(r,e)),T.useEffect(()=>{n.current=e}),T.useSyncExternalStore(T.useCallback(i=>r.subscribe(()=>{const l=u6(a.current,gT(r,n.current));a.current!==l&&(a.current=l,wi.schedule(i))}),[r]),()=>a.current,()=>a.current)}function ha(e,t){const r=qn(t),[n]=T.useState(()=>new iY(r,e));T.useEffect(()=>{n.setOptions(e)},[n,e]);const a=T.useSyncExternalStore(T.useCallback(l=>n.subscribe(wi.batchCalls(l)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),i=T.useCallback((l,o)=>{n.mutate(l,o).catch(yo)},[n]);if(a.error&&ZL(n.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:i,mutateAsync:a.mutate}}function iR(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=iR(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function Zn(){for(var e,t,r=0,n="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=iR(e))&&(n&&(n+=" "),n+=t);return n}function _Y(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",t.firstChild?t.insertBefore(r,t.firstChild):t.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}_Y(`:root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
`);var Pb=e=>typeof e=="number"&&!isNaN(e),Cm=e=>typeof e=="string",$0=e=>typeof e=="function",SY=e=>Cm(e)||Pb(e),a_=e=>Cm(e)||$0(e)?e:null,jY=(e,t)=>e===!1||Pb(e)&&e>0?e:t,s_=e=>T.isValidElement(e)||Cm(e)||$0(e)||Pb(e);function CY(e,t,r=300){let{scrollHeight:n,style:a}=e;requestAnimationFrame(()=>{a.minHeight="initial",a.height=n+"px",a.transition=`all ${r}ms`,requestAnimationFrame(()=>{a.height="0",a.padding="0",a.margin="0",setTimeout(t,r)})})}function AY({enter:e,exit:t,appendPosition:r=!1,collapse:n=!0,collapseDuration:a=300}){return function({children:i,position:l,preventExitTransition:o,done:c,nodeRef:d,isIn:f,playToast:p}){let y=r?`${e}--${l}`:e,g=r?`${t}--${l}`:t,N=T.useRef(0);return T.useLayoutEffect(()=>{let w=d.current,k=y.split(" "),S=O=>{O.target===d.current&&(p(),w.removeEventListener("animationend",S),w.removeEventListener("animationcancel",S),N.current===0&&O.type!=="animationcancel"&&w.classList.remove(...k))};w.classList.add(...k),w.addEventListener("animationend",S),w.addEventListener("animationcancel",S)},[]),T.useEffect(()=>{let w=d.current,k=()=>{w.removeEventListener("animationend",k),n?CY(w,c,a):c()};f||(o?k():(N.current=1,w.className+=` ${g}`,w.addEventListener("animationend",k)))},[f]),ua.createElement(ua.Fragment,null,i)}}function bT(e,t){return{content:lR(e.content,e.props),containerId:e.props.containerId,id:e.props.toastId,theme:e.props.theme,type:e.props.type,data:e.props.data||{},isLoading:e.props.isLoading,icon:e.props.icon,reason:e.removalReason,status:t}}function lR(e,t,r=!1){return T.isValidElement(e)&&!Cm(e.type)?T.cloneElement(e,{closeToast:t.closeToast,toastProps:t,data:t.data,isPaused:r}):$0(e)?e({closeToast:t.closeToast,toastProps:t,data:t.data,isPaused:r}):e}function EY({closeToast:e,theme:t,ariaLabel:r="close"}){return ua.createElement("button",{className:`Toastify__close-button Toastify__close-button--${t}`,type:"button",onClick:n=>{n.stopPropagation(),e(!0)},"aria-label":r},ua.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},ua.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function TY({delay:e,isRunning:t,closeToast:r,type:n="default",hide:a,className:i,controlledProgress:l,progress:o,rtl:c,isIn:d,theme:f}){let p=a||l&&o===0,y={animationDuration:`${e}ms`,animationPlayState:t?"running":"paused"};l&&(y.transform=`scaleX(${o})`);let g=Zn("Toastify__progress-bar",l?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${f}`,`Toastify__progress-bar--${n}`,{"Toastify__progress-bar--rtl":c}),N=$0(i)?i({rtl:c,type:n,defaultClassName:g}):Zn(g,i),w={[l&&o>=1?"onTransitionEnd":"onAnimationEnd"]:l&&o<1?null:()=>{d&&r()}};return ua.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":p},ua.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${f} Toastify__progress-bar--${n}`}),ua.createElement("div",{role:"progressbar","aria-hidden":p?"true":"false","aria-label":"notification timer",className:N,style:y,...w}))}var OY=1,oR=()=>`${OY++}`;function PY(e,t,r){let n=1,a=0,i=[],l=[],o=t,c=new Map,d=new Set,f=O=>(d.add(O),()=>d.delete(O)),p=()=>{l=Array.from(c.values()),d.forEach(O=>O())},y=({containerId:O,toastId:E,updateId:D})=>{let q=O?O!==e:e!==1,W=c.has(E)&&D==null;return q||W},g=(O,E)=>{c.forEach(D=>{var q;(E==null||E===D.props.toastId)&&((q=D.toggle)==null||q.call(D,O))})},N=O=>{var E,D;(D=(E=O.props)==null?void 0:E.onClose)==null||D.call(E,O.removalReason),O.isActive=!1},w=O=>{if(O==null)c.forEach(N);else{let E=c.get(O);E&&N(E)}p()},k=()=>{a-=i.length,i=[]},S=O=>{var E,D;let{toastId:q,updateId:W}=O.props,R=W==null;O.staleId&&c.delete(O.staleId),O.isActive=!0,c.set(q,O),p(),r(bT(O,R?"added":"updated")),R&&((D=(E=O.props).onOpen)==null||D.call(E))};return{id:e,props:o,observe:f,toggle:g,removeToast:w,toasts:c,clearQueue:k,buildToast:(O,E)=>{if(y(E))return;let{toastId:D,updateId:q,data:W,staleId:R,delay:U}=E,z=q==null;z&&a++;let Z={...o,style:o.toastStyle,key:n++,...Object.fromEntries(Object.entries(E).filter(([K,J])=>J!=null)),toastId:D,updateId:q,data:W,isIn:!1,className:a_(E.className||o.toastClassName),progressClassName:a_(E.progressClassName||o.progressClassName),autoClose:E.isLoading?!1:jY(E.autoClose,o.autoClose),closeToast(K){c.get(D).removalReason=K,w(D)},deleteToast(){let K=c.get(D);if(K!=null){if(r(bT(K,"removed")),c.delete(D),a--,a<0&&(a=0),i.length>0){S(i.shift());return}p()}}};Z.closeButton=o.closeButton,E.closeButton===!1||s_(E.closeButton)?Z.closeButton=E.closeButton:E.closeButton===!0&&(Z.closeButton=s_(o.closeButton)?o.closeButton:!0);let H={content:O,props:Z,staleId:R};o.limit&&o.limit>0&&a>o.limit&&z?i.push(H):Pb(U)?setTimeout(()=>{S(H)},U):S(H)},setProps(O){o=O},setToggle:(O,E)=>{let D=c.get(O);D&&(D.toggle=E)},isToastActive:O=>{var E;return(E=c.get(O))==null?void 0:E.isActive},getSnapshot:()=>l}}var So=new Map,zg=[],i_=new Set,IY=e=>i_.forEach(t=>t(e)),cR=()=>So.size>0;function DY(){zg.forEach(e=>uR(e.content,e.options)),zg=[]}var MY=(e,{containerId:t})=>{var r;return(r=So.get(t||1))==null?void 0:r.toasts.get(e)};function dR(e,t){var r;if(t)return!!((r=So.get(t))!=null&&r.isToastActive(e));let n=!1;return So.forEach(a=>{a.isToastActive(e)&&(n=!0)}),n}function LY(e){if(!cR()){zg=zg.filter(t=>e!=null&&t.options.toastId!==e);return}if(e==null||SY(e))So.forEach(t=>{t.removeToast(e)});else if(e&&("containerId"in e||"id"in e)){let t=So.get(e.containerId);t?t.removeToast(e.id):So.forEach(r=>{r.removeToast(e.id)})}}var RY=(e={})=>{So.forEach(t=>{t.props.limit&&(!e.containerId||t.id===e.containerId)&&t.clearQueue()})};function uR(e,t){s_(e)&&(cR()||zg.push({content:e,options:t}),So.forEach(r=>{r.buildToast(e,t)}))}function FY(e){var t;(t=So.get(e.containerId||1))==null||t.setToggle(e.id,e.fn)}function hR(e,t){So.forEach(r=>{(t==null||!(t!=null&&t.containerId)||(t==null?void 0:t.containerId)===r.id)&&r.toggle(e,t==null?void 0:t.id)})}function BY(e){let t=e.containerId||1;return{subscribe(r){let n=PY(t,e,IY);So.set(t,n);let a=n.observe(r);return DY(),()=>{a(),So.delete(t)}},setProps(r){var n;(n=So.get(t))==null||n.setProps(r)},getSnapshot(){var r;return(r=So.get(t))==null?void 0:r.getSnapshot()}}}function UY(e){return i_.add(e),()=>{i_.delete(e)}}function zY(e){return e&&(Cm(e.toastId)||Pb(e.toastId))?e.toastId:oR()}function Ib(e,t){return uR(e,t),t.toastId}function Dw(e,t){return{...t,type:t&&t.type||e,toastId:zY(t)}}function Mw(e){return(t,r)=>Ib(t,Dw(e,r))}function Da(e,t){return Ib(e,Dw("default",t))}Da.loading=(e,t)=>Ib(e,Dw("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...t}));function qY(e,{pending:t,error:r,success:n},a){let i;t&&(i=Cm(t)?Da.loading(t,a):Da.loading(t.render,{...a,...t}));let l={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},o=(d,f,p)=>{if(f==null){Da.dismiss(i);return}let y={type:d,...l,...a,data:p},g=Cm(f)?{render:f}:f;return i?Da.update(i,{...y,...g}):Da(g.render,{...y,...g}),p},c=$0(e)?e():e;return c.then(d=>o("success",n,d)).catch(d=>o("error",r,d)),c}Da.promise=qY;Da.success=Mw("success");Da.info=Mw("info");Da.error=Mw("error");Da.warning=Mw("warning");Da.warn=Da.warning;Da.dark=(e,t)=>Ib(e,Dw("default",{theme:"dark",...t}));function HY(e){LY(e)}Da.dismiss=HY;Da.clearWaitingQueue=RY;Da.isActive=dR;Da.update=(e,t={})=>{let r=MY(e,t);if(r){let{props:n,content:a}=r,i={delay:100,...n,...t,toastId:t.toastId||e,updateId:oR()};i.toastId!==e&&(i.staleId=e);let l=i.render||a;delete i.render,Ib(l,i)}};Da.done=e=>{Da.update(e,{progress:1})};Da.onChange=UY;Da.play=e=>hR(!0,e);Da.pause=e=>hR(!1,e);function $Y(e){var t;let{subscribe:r,getSnapshot:n,setProps:a}=T.useRef(BY(e)).current;a(e);let i=(t=T.useSyncExternalStore(r,n,n))==null?void 0:t.slice();function l(o){if(!i)return[];let c=new Map;return e.newestOnTop&&i.reverse(),i.forEach(d=>{let{position:f}=d.props;c.has(f)||c.set(f,[]),c.get(f).push(d)}),Array.from(c,d=>o(d[0],d[1]))}return{getToastToRender:l,isToastActive:dR,count:i==null?void 0:i.length}}function VY(e){let[t,r]=T.useState(!1),[n,a]=T.useState(!1),i=T.useRef(null),l=T.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:o,pauseOnHover:c,closeToast:d,onClick:f,closeOnClick:p}=e;FY({id:e.toastId,containerId:e.containerId,fn:r}),T.useEffect(()=>{if(e.pauseOnFocusLoss)return y(),()=>{g()}},[e.pauseOnFocusLoss]);function y(){document.hasFocus()||S(),window.addEventListener("focus",k),window.addEventListener("blur",S)}function g(){window.removeEventListener("focus",k),window.removeEventListener("blur",S)}function N(R){if(e.draggable===!0||e.draggable===R.pointerType){O();let U=i.current;l.canCloseOnClick=!0,l.canDrag=!0,U.style.transition="none",e.draggableDirection==="x"?(l.start=R.clientX,l.removalDistance=U.offsetWidth*(e.draggablePercent/100)):(l.start=R.clientY,l.removalDistance=U.offsetHeight*(e.draggablePercent===80?e.draggablePercent*1.5:e.draggablePercent)/100)}}function w(R){let{top:U,bottom:z,left:Z,right:H}=i.current.getBoundingClientRect();R.nativeEvent.type!=="touchend"&&e.pauseOnHover&&R.clientX>=Z&&R.clientX<=H&&R.clientY>=U&&R.clientY<=z?S():k()}function k(){r(!0)}function S(){r(!1)}function O(){l.didMove=!1,document.addEventListener("pointermove",D),document.addEventListener("pointerup",q)}function E(){document.removeEventListener("pointermove",D),document.removeEventListener("pointerup",q)}function D(R){let U=i.current;if(l.canDrag&&U){l.didMove=!0,t&&S(),e.draggableDirection==="x"?l.delta=R.clientX-l.start:l.delta=R.clientY-l.start,l.start!==R.clientX&&(l.canCloseOnClick=!1);let z=e.draggableDirection==="x"?`${l.delta}px, var(--y)`:`0, calc(${l.delta}px + var(--y))`;U.style.transform=`translate3d(${z},0)`,U.style.opacity=`${1-Math.abs(l.delta/l.removalDistance)}`}}function q(){E();let R=i.current;if(l.canDrag&&l.didMove&&R){if(l.canDrag=!1,Math.abs(l.delta)>l.removalDistance){a(!0),e.closeToast(!0),e.collapseAll();return}R.style.transition="transform 0.2s, opacity 0.2s",R.style.removeProperty("transform"),R.style.removeProperty("opacity")}}let W={onPointerDown:N,onPointerUp:w};return o&&c&&(W.onMouseEnter=S,e.stacked||(W.onMouseLeave=k)),p&&(W.onClick=R=>{f&&f(R),l.canCloseOnClick&&d(!0)}),{playToast:k,pauseToast:S,isRunning:t,preventExitTransition:n,toastRef:i,eventHandlers:W}}var WY=typeof window<"u"?T.useLayoutEffect:T.useEffect,Lw=({theme:e,type:t,isLoading:r,...n})=>ua.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:e==="colored"?"currentColor":`var(--toastify-icon-color-${t})`,...n});function KY(e){return ua.createElement(Lw,{...e},ua.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))}function GY(e){return ua.createElement(Lw,{...e},ua.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))}function XY(e){return ua.createElement(Lw,{...e},ua.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))}function YY(e){return ua.createElement(Lw,{...e},ua.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))}function ZY(){return ua.createElement("div",{className:"Toastify__spinner"})}var l_={info:GY,warning:KY,success:XY,error:YY,spinner:ZY},QY=e=>e in l_;function JY({theme:e,type:t,isLoading:r,icon:n}){let a=null,i={theme:e,type:t};return n===!1||($0(n)?a=n({...i,isLoading:r}):T.isValidElement(n)?a=T.cloneElement(n,i):r?a=l_.spinner():QY(t)&&(a=l_[t](i))),a}var eZ=e=>{let{isRunning:t,preventExitTransition:r,toastRef:n,eventHandlers:a,playToast:i}=VY(e),{closeButton:l,children:o,autoClose:c,onClick:d,type:f,hideProgressBar:p,closeToast:y,transition:g,position:N,className:w,style:k,progressClassName:S,updateId:O,role:E,progress:D,rtl:q,toastId:W,deleteToast:R,isIn:U,isLoading:z,closeOnClick:Z,theme:H,ariaLabel:K}=e,J=Zn("Toastify__toast",`Toastify__toast-theme--${H}`,`Toastify__toast--${f}`,{"Toastify__toast--rtl":q},{"Toastify__toast--close-on-click":Z}),ae=$0(w)?w({rtl:q,position:N,type:f,defaultClassName:J}):Zn(J,w),se=JY(e),ue=!!D||!c,fe={closeToast:y,type:f,theme:H},ke=null;return l===!1||($0(l)?ke=l(fe):T.isValidElement(l)?ke=T.cloneElement(l,fe):ke=EY(fe)),ua.createElement(g,{isIn:U,done:R,position:N,preventExitTransition:r,nodeRef:n,playToast:i},ua.createElement("div",{id:W,tabIndex:0,onClick:d,"data-in":U,className:ae,...a,style:k,ref:n,...U&&{role:E,"aria-label":K}},se!=null&&ua.createElement("div",{className:Zn("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!z})},se),lR(o,e,!t),ke,!e.customProgressBar&&ua.createElement(TY,{...O&&!ue?{key:`p-${O}`}:{},rtl:q,theme:H,delay:c,isRunning:t,isIn:U,closeToast:y,hide:p,type:f,className:S,controlledProgress:ue,progress:D||0})))},tZ=(e,t=!1)=>({enter:`Toastify--animate Toastify__${e}-enter`,exit:`Toastify--animate Toastify__${e}-exit`,appendPosition:t}),rZ=AY(tZ("bounce",!0)),nZ={position:"top-right",transition:rZ,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light","aria-label":"Notifications Alt+T",hotKeys:e=>e.altKey&&e.code==="KeyT"};function aZ(e){let t={...nZ,...e},r=e.stacked,[n,a]=T.useState(!0),i=T.useRef(null),{getToastToRender:l,isToastActive:o,count:c}=$Y(t),{className:d,style:f,rtl:p,containerId:y,hotKeys:g}=t;function N(k){let S=Zn("Toastify__toast-container",`Toastify__toast-container--${k}`,{"Toastify__toast-container--rtl":p});return $0(d)?d({position:k,rtl:p,defaultClassName:S}):Zn(S,a_(d))}function w(){r&&(a(!0),Da.play())}return WY(()=>{var k;if(r){let S=i.current.querySelectorAll('[data-in="true"]'),O=12,E=(k=t.position)==null?void 0:k.includes("top"),D=0,q=0;Array.from(S).reverse().forEach((W,R)=>{let U=W;U.classList.add("Toastify__toast--stacked"),R>0&&(U.dataset.collapsed=`${n}`),U.dataset.pos||(U.dataset.pos=E?"top":"bot");let z=D*(n?.2:1)+(n?0:O*R);U.style.setProperty("--y",`${E?z:z*-1}px`),U.style.setProperty("--g",`${O}`),U.style.setProperty("--s",`${1-(n?q:0)}`),D+=U.offsetHeight,q+=.025})}},[n,c,r]),T.useEffect(()=>{function k(S){var O;let E=i.current;g(S)&&((O=E.querySelector('[tabIndex="0"]'))==null||O.focus(),a(!1),Da.pause()),S.key==="Escape"&&(document.activeElement===E||E!=null&&E.contains(document.activeElement))&&(a(!0),Da.play())}return document.addEventListener("keydown",k),()=>{document.removeEventListener("keydown",k)}},[g]),ua.createElement("section",{ref:i,className:"Toastify",id:y,onMouseEnter:()=>{r&&(a(!1),Da.pause())},onMouseLeave:w,"aria-live":"polite","aria-atomic":"false","aria-relevant":"additions text","aria-label":t["aria-label"]},l((k,S)=>{let O=S.length?{...f}:{...f,pointerEvents:"none"};return ua.createElement("div",{tabIndex:-1,className:N(k),"data-stacked":r,style:O,key:`c-${k}`},S.map(({content:E,props:D})=>ua.createElement(eZ,{...D,stacked:r,collapseAll:w,isIn:o(D.toastId,D.containerId),key:`t-${D.key}`},E)))}))}const rg={position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0},Xe={success:(e,t)=>{Da.success(e,{...rg,...t})},error:(e,t)=>{Da.error(e,{...rg,...t})},warning:(e,t)=>{Da.warning(e,{...rg,...t})},info:(e,t)=>{Da.info(e,{...rg,...t})},promise:(e,t,r)=>Da.promise(e,{pending:t.pending,success:t.success,error:t.error},{...rg,...r})};class sZ extends ua.Component{constructor(){super(...arguments);Aa(this,"state",{hasError:!1});Aa(this,"handleReload",()=>{this.setState({hasError:!1,error:void 0}),window.location.reload()})}static getDerivedStateFromError(r){return{hasError:!0,error:r}}componentDidCatch(r,n){console.error("Unhandled UI error:",r,n),Xe.error(" xy ra li khng mong mun. Vui lng th li.")}render(){return this.state.hasError?this.props.fallback||s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-50 dark:bg-slate-900",children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-xl text-center max-w-md",children:[s.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-white mb-2",children:"C li xy ra"}),s.jsx("p",{className:"text-slate-600 dark:text-slate-400 mb-4",children:"Vui lng ti li trang hoc quay li sau."}),s.jsx("button",{onClick:this.handleReload,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg",children:"Ti li trang"})]})}):this.props.children}}const iZ=()=>{const e=wY(),t=kY(),r=e+t>0,[n,a]=T.useState(!1);return T.useEffect(()=>{if(r)a(!0);else{const i=setTimeout(()=>a(!1),300);return()=>clearTimeout(i)}},[r]),s.jsxs("div",{"aria-hidden":!n,className:"fixed top-0 left-0 right-0 z-[60] pointer-events-none",style:{opacity:n?1:0,transition:"opacity 0.2s ease"},children:[s.jsx("div",{className:"h-1 bg-gradient-to-r from-emerald-500 via-blue-500 to-fuchsia-500 animate-[progress_1.2s_linear_infinite]"}),s.jsx("style",{children:`
        @keyframes progress {
          0% { transform: translateX(-100%); }
          100% { transform: translateX(100%); }
        }
        .animate-[progress_1.2s_linear_infinite] {
          background-size: 200% 100%;
        }
      `})]})},lZ="modulepreload",oZ=function(e){return"/"+e},vT={},hm=function(t,r,n){let a=Promise.resolve();if(r&&r.length>0){let l=function(d){return Promise.all(d.map(f=>Promise.resolve(f).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),c=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));a=l(r.map(d=>{if(d=oZ(d),d in vT)return;vT[d]=!0;const f=d.endsWith(".css"),p=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${p}`))return;const y=document.createElement("link");if(y.rel=f?"stylesheet":lZ,f||(y.as="script"),y.crossOrigin="",y.href=d,c&&y.setAttribute("nonce",c),document.head.appendChild(y),f)return new Promise((g,N)=>{y.addEventListener("load",g),y.addEventListener("error",()=>N(new Error(`Unable to preload CSS for ${d}`)))})}))}function i(l){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=l,window.dispatchEvent(o),!o.defaultPrevented)throw l}return a.then(l=>{for(const o of l||[])o.status==="rejected"&&i(o.reason);return t().catch(i)})};var cZ=function(){return null},o_=function(e,t){return o_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])},o_(e,t)};function fR(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");o_(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var fy=function(){return fy=Object.assign||function(t){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},fy.apply(this,arguments)};function ep(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r}function mR(e,t,r,n){var a=arguments.length,i=a<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(e,t,r,n);else for(var o=e.length-1;o>=0;o--)(l=e[o])&&(i=(a<3?l(i):a>3?l(t,r,i):l(t,r))||i);return a>3&&i&&Object.defineProperty(t,r,i),i}function xR(e,t){return function(r,n){t(r,n,e)}}function pR(e,t,r,n,a,i){function l(S){if(S!==void 0&&typeof S!="function")throw new TypeError("Function expected");return S}for(var o=n.kind,c=o==="getter"?"get":o==="setter"?"set":"value",d=!t&&e?n.static?e:e.prototype:null,f=t||(d?Object.getOwnPropertyDescriptor(d,n.name):{}),p,y=!1,g=r.length-1;g>=0;g--){var N={};for(var w in n)N[w]=w==="access"?{}:n[w];for(var w in n.access)N.access[w]=n.access[w];N.addInitializer=function(S){if(y)throw new TypeError("Cannot add initializers after decoration has completed");i.push(l(S||null))};var k=(0,r[g])(o==="accessor"?{get:f.get,set:f.set}:f[c],N);if(o==="accessor"){if(k===void 0)continue;if(k===null||typeof k!="object")throw new TypeError("Object expected");(p=l(k.get))&&(f.get=p),(p=l(k.set))&&(f.set=p),(p=l(k.init))&&a.unshift(p)}else(p=l(k))&&(o==="field"?a.unshift(p):f[c]=p)}d&&Object.defineProperty(d,n.name,f),y=!0}function gR(e,t,r){for(var n=arguments.length>2,a=0;a<t.length;a++)r=n?t[a].call(e,r):t[a].call(e);return n?r:void 0}function bR(e){return typeof e=="symbol"?e:"".concat(e)}function vR(e,t,r){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:r?"".concat(r," ",t):t})}function yR(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function on(e,t,r,n){function a(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function o(f){try{d(n.next(f))}catch(p){l(p)}}function c(f){try{d(n.throw(f))}catch(p){l(p)}}function d(f){f.done?i(f.value):a(f.value).then(o,c)}d((n=n.apply(e,t||[])).next())})}function wR(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,a,i,l=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return l.next=o(0),l.throw=o(1),l.return=o(2),typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function o(d){return function(f){return c([d,f])}}function c(d){if(n)throw new TypeError("Generator is already executing.");for(;l&&(l=0,d[0]&&(r=0)),r;)try{if(n=1,a&&(i=d[0]&2?a.return:d[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,d[1])).done)return i;switch(a=0,i&&(d=[d[0]&2,i.value]),d[0]){case 0:case 1:i=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,a=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!i||d[1]>i[0]&&d[1]<i[3])){r.label=d[1];break}if(d[0]===6&&r.label<i[1]){r.label=i[1],i=d;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(d);break}i[2]&&r.ops.pop(),r.trys.pop();continue}d=t.call(e,r)}catch(f){d=[6,f],a=0}finally{n=i=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}var Rw=Object.create?(function(e,t,r,n){n===void 0&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}):(function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]});function kR(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&Rw(t,e,r)}function my(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function x6(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),a,i=[],l;try{for(;(t===void 0||t-- >0)&&!(a=n.next()).done;)i.push(a.value)}catch(o){l={error:o}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(l)throw l.error}}return i}function NR(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(x6(arguments[t]));return e}function _R(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),a=0,t=0;t<r;t++)for(var i=arguments[t],l=0,o=i.length;l<o;l++,a++)n[a]=i[l];return n}function SR(e,t,r){if(r||arguments.length===2)for(var n=0,a=t.length,i;n<a;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))}function R1(e){return this instanceof R1?(this.v=e,this):new R1(e)}function jR(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),a,i=[];return a=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),o("next"),o("throw"),o("return",l),a[Symbol.asyncIterator]=function(){return this},a;function l(g){return function(N){return Promise.resolve(N).then(g,p)}}function o(g,N){n[g]&&(a[g]=function(w){return new Promise(function(k,S){i.push([g,w,k,S])>1||c(g,w)})},N&&(a[g]=N(a[g])))}function c(g,N){try{d(n[g](N))}catch(w){y(i[0][3],w)}}function d(g){g.value instanceof R1?Promise.resolve(g.value.v).then(f,p):y(i[0][2],g)}function f(g){c("next",g)}function p(g){c("throw",g)}function y(g,N){g(N),i.shift(),i.length&&c(i[0][0],i[0][1])}}function CR(e){var t,r;return t={},n("next"),n("throw",function(a){throw a}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(a,i){t[a]=e[a]?function(l){return(r=!r)?{value:R1(e[a](l)),done:!1}:i?i(l):l}:i}}function AR(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof my=="function"?my(e):e[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(i){r[i]=e[i]&&function(l){return new Promise(function(o,c){l=e[i](l),a(o,c,l.done,l.value)})}}function a(i,l,o,c){Promise.resolve(c).then(function(d){i({value:d,done:o})},l)}}function ER(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var dZ=Object.create?(function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}):function(e,t){e.default=t},c_=function(e){return c_=Object.getOwnPropertyNames||function(t){var r=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[r.length]=n);return r},c_(e)};function TR(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r=c_(e),n=0;n<r.length;n++)r[n]!=="default"&&Rw(t,e,r[n]);return dZ(t,e),t}function OR(e){return e&&e.__esModule?e:{default:e}}function PR(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)}function IR(e,t,r,n,a){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!a)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?a.call(e,r):a?a.value=r:t.set(e,r),r}function DR(e,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e=="function"?t===e:e.has(t)}function MR(e,t,r){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var n,a;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=t[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=t[Symbol.dispose],r&&(a=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");a&&(n=function(){try{a.call(this)}catch(i){return Promise.reject(i)}}),e.stack.push({value:t,dispose:n,async:r})}else r&&e.stack.push({async:!0});return t}var uZ=typeof SuppressedError=="function"?SuppressedError:function(e,t,r){var n=new Error(r);return n.name="SuppressedError",n.error=e,n.suppressed=t,n};function LR(e){function t(i){e.error=e.hasError?new uZ(i,e.error,"An error was suppressed during disposal."):i,e.hasError=!0}var r,n=0;function a(){for(;r=e.stack.pop();)try{if(!r.async&&n===1)return n=0,e.stack.push(r),Promise.resolve().then(a);if(r.dispose){var i=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(i).then(a,function(l){return t(l),a()})}else n|=1}catch(l){t(l)}if(n===1)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}return a()}function RR(e,t){return typeof e=="string"&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(r,n,a,i,l){return n?t?".jsx":".js":a&&(!i||!l)?r:a+i+"."+l.toLowerCase()+"js"}):e}const hZ={__extends:fR,__assign:fy,__rest:ep,__decorate:mR,__param:xR,__esDecorate:pR,__runInitializers:gR,__propKey:bR,__setFunctionName:vR,__metadata:yR,__awaiter:on,__generator:wR,__createBinding:Rw,__exportStar:kR,__values:my,__read:x6,__spread:NR,__spreadArrays:_R,__spreadArray:SR,__await:R1,__asyncGenerator:jR,__asyncDelegator:CR,__asyncValues:AR,__makeTemplateObject:ER,__importStar:TR,__importDefault:OR,__classPrivateFieldGet:PR,__classPrivateFieldSet:IR,__classPrivateFieldIn:DR,__addDisposableResource:MR,__disposeResources:LR,__rewriteRelativeImportExtension:RR},fZ=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:MR,get __assign(){return fy},__asyncDelegator:CR,__asyncGenerator:jR,__asyncValues:AR,__await:R1,__awaiter:on,__classPrivateFieldGet:PR,__classPrivateFieldIn:DR,__classPrivateFieldSet:IR,__createBinding:Rw,__decorate:mR,__disposeResources:LR,__esDecorate:pR,__exportStar:kR,__extends:fR,__generator:wR,__importDefault:OR,__importStar:TR,__makeTemplateObject:ER,__metadata:yR,__param:xR,__propKey:bR,__read:x6,__rest:ep,__rewriteRelativeImportExtension:RR,__runInitializers:gR,__setFunctionName:vR,__spread:NR,__spreadArray:SR,__spreadArrays:_R,__values:my,default:hZ},Symbol.toStringTag,{value:"Module"})),mZ=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);class p6 extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class yT extends p6{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class wT extends p6{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class kT extends p6{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var d_;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(d_||(d_={}));class xZ{constructor(t,{headers:r={},customFetch:n,region:a=d_.Any}={}){this.url=t,this.headers=r,this.region=a,this.fetch=mZ(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return on(this,arguments,void 0,function*(r,n={}){var a;try{const{headers:i,method:l,body:o,signal:c}=n;let d={},{region:f}=n;f||(f=this.region);const p=new URL(`${this.url}/${r}`);f&&f!=="any"&&(d["x-region"]=f,p.searchParams.set("forceFunctionRegion",f));let y;o&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)?typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(d["Content-Type"]="application/octet-stream",y=o):typeof o=="string"?(d["Content-Type"]="text/plain",y=o):typeof FormData<"u"&&o instanceof FormData?y=o:(d["Content-Type"]="application/json",y=JSON.stringify(o)):y=o;const g=yield this.fetch(p.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},d),this.headers),i),body:y,signal:c}).catch(S=>{throw S.name==="AbortError"?S:new yT(S)}),N=g.headers.get("x-relay-error");if(N&&N==="true")throw new wT(g);if(!g.ok)throw new kT(g);let w=((a=g.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),k;return w==="application/json"?k=yield g.json():w==="application/octet-stream"||w==="application/pdf"?k=yield g.blob():w==="text/event-stream"?k=g:w==="multipart/form-data"?k=yield g.formData():k=yield g.text(),{data:k,error:null,response:g}}catch(i){return i instanceof Error&&i.name==="AbortError"?{data:null,error:new yT(i)}:{data:null,error:i,response:i instanceof kT||i instanceof wT?i.context:void 0}}})}}var $l={};const tp=lG(fZ);var s2={},i2={},l2={},o2={},c2={},d2={},NT;function FR(){if(NT)return d2;NT=1,Object.defineProperty(d2,"__esModule",{value:!0});class e extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return d2.default=e,d2}var _T;function BR(){if(_T)return c2;_T=1,Object.defineProperty(c2,"__esModule",{value:!0});const t=tp.__importDefault(FR());class r{constructor(a){var i,l;this.shouldThrowOnError=!1,this.method=a.method,this.url=a.url,this.headers=new Headers(a.headers),this.schema=a.schema,this.body=a.body,this.shouldThrowOnError=(i=a.shouldThrowOnError)!==null&&i!==void 0?i:!1,this.signal=a.signal,this.isMaybeSingle=(l=a.isMaybeSingle)!==null&&l!==void 0?l:!1,a.fetch?this.fetch=a.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(a,i){return this.headers=new Headers(this.headers),this.headers.set(a,i),this}then(a,i){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const l=this.fetch;let o=l(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async c=>{var d,f,p,y;let g=null,N=null,w=null,k=c.status,S=c.statusText;if(c.ok){if(this.method!=="HEAD"){const q=await c.text();q===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((d=this.headers.get("Accept"))===null||d===void 0)&&d.includes("application/vnd.pgrst.plan+text"))?N=q:N=JSON.parse(q))}const E=(f=this.headers.get("Prefer"))===null||f===void 0?void 0:f.match(/count=(exact|planned|estimated)/),D=(p=c.headers.get("content-range"))===null||p===void 0?void 0:p.split("/");E&&D&&D.length>1&&(w=parseInt(D[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(N)&&(N.length>1?(g={code:"PGRST116",details:`Results contain ${N.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},N=null,w=null,k=406,S="Not Acceptable"):N.length===1?N=N[0]:N=null)}else{const E=await c.text();try{g=JSON.parse(E),Array.isArray(g)&&c.status===404&&(N=[],g=null,k=200,S="OK")}catch{c.status===404&&E===""?(k=204,S="No Content"):g={message:E}}if(g&&this.isMaybeSingle&&(!((y=g==null?void 0:g.details)===null||y===void 0)&&y.includes("0 rows"))&&(g=null,k=200,S="OK"),g&&this.shouldThrowOnError)throw new t.default(g)}return{error:g,data:N,count:w,status:k,statusText:S}});return this.shouldThrowOnError||(o=o.catch(c=>{var d,f,p;return{error:{message:`${(d=c==null?void 0:c.name)!==null&&d!==void 0?d:"FetchError"}: ${c==null?void 0:c.message}`,details:`${(f=c==null?void 0:c.stack)!==null&&f!==void 0?f:""}`,hint:"",code:`${(p=c==null?void 0:c.code)!==null&&p!==void 0?p:""}`},data:null,count:null,status:0,statusText:""}})),o.then(a,i)}returns(){return this}overrideTypes(){return this}}return c2.default=r,c2}var ST;function UR(){if(ST)return o2;ST=1,Object.defineProperty(o2,"__esModule",{value:!0});const t=tp.__importDefault(BR());class r extends t.default{select(a){let i=!1;const l=(a??"*").split("").map(o=>/\s/.test(o)&&!i?"":(o==='"'&&(i=!i),o)).join("");return this.url.searchParams.set("select",l),this.headers.append("Prefer","return=representation"),this}order(a,{ascending:i=!0,nullsFirst:l,foreignTable:o,referencedTable:c=o}={}){const d=c?`${c}.order`:"order",f=this.url.searchParams.get(d);return this.url.searchParams.set(d,`${f?`${f},`:""}${a}.${i?"asc":"desc"}${l===void 0?"":l?".nullsfirst":".nullslast"}`),this}limit(a,{foreignTable:i,referencedTable:l=i}={}){const o=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(o,`${a}`),this}range(a,i,{foreignTable:l,referencedTable:o=l}={}){const c=typeof o>"u"?"offset":`${o}.offset`,d=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(c,`${a}`),this.url.searchParams.set(d,`${i-a+1}`),this}abortSignal(a){return this.signal=a,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:a=!1,verbose:i=!1,settings:l=!1,buffers:o=!1,wal:c=!1,format:d="text"}={}){var f;const p=[a?"analyze":null,i?"verbose":null,l?"settings":null,o?"buffers":null,c?"wal":null].filter(Boolean).join("|"),y=(f=this.headers.get("Accept"))!==null&&f!==void 0?f:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${d}; for="${y}"; options=${p};`),d==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(a){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${a}`),this}}return o2.default=r,o2}var jT;function g6(){if(jT)return l2;jT=1,Object.defineProperty(l2,"__esModule",{value:!0});const t=tp.__importDefault(UR()),r=new RegExp("[,()]");class n extends t.default{eq(i,l){return this.url.searchParams.append(i,`eq.${l}`),this}neq(i,l){return this.url.searchParams.append(i,`neq.${l}`),this}gt(i,l){return this.url.searchParams.append(i,`gt.${l}`),this}gte(i,l){return this.url.searchParams.append(i,`gte.${l}`),this}lt(i,l){return this.url.searchParams.append(i,`lt.${l}`),this}lte(i,l){return this.url.searchParams.append(i,`lte.${l}`),this}like(i,l){return this.url.searchParams.append(i,`like.${l}`),this}likeAllOf(i,l){return this.url.searchParams.append(i,`like(all).{${l.join(",")}}`),this}likeAnyOf(i,l){return this.url.searchParams.append(i,`like(any).{${l.join(",")}}`),this}ilike(i,l){return this.url.searchParams.append(i,`ilike.${l}`),this}ilikeAllOf(i,l){return this.url.searchParams.append(i,`ilike(all).{${l.join(",")}}`),this}ilikeAnyOf(i,l){return this.url.searchParams.append(i,`ilike(any).{${l.join(",")}}`),this}is(i,l){return this.url.searchParams.append(i,`is.${l}`),this}in(i,l){const o=Array.from(new Set(l)).map(c=>typeof c=="string"&&r.test(c)?`"${c}"`:`${c}`).join(",");return this.url.searchParams.append(i,`in.(${o})`),this}contains(i,l){return typeof l=="string"?this.url.searchParams.append(i,`cs.${l}`):Array.isArray(l)?this.url.searchParams.append(i,`cs.{${l.join(",")}}`):this.url.searchParams.append(i,`cs.${JSON.stringify(l)}`),this}containedBy(i,l){return typeof l=="string"?this.url.searchParams.append(i,`cd.${l}`):Array.isArray(l)?this.url.searchParams.append(i,`cd.{${l.join(",")}}`):this.url.searchParams.append(i,`cd.${JSON.stringify(l)}`),this}rangeGt(i,l){return this.url.searchParams.append(i,`sr.${l}`),this}rangeGte(i,l){return this.url.searchParams.append(i,`nxl.${l}`),this}rangeLt(i,l){return this.url.searchParams.append(i,`sl.${l}`),this}rangeLte(i,l){return this.url.searchParams.append(i,`nxr.${l}`),this}rangeAdjacent(i,l){return this.url.searchParams.append(i,`adj.${l}`),this}overlaps(i,l){return typeof l=="string"?this.url.searchParams.append(i,`ov.${l}`):this.url.searchParams.append(i,`ov.{${l.join(",")}}`),this}textSearch(i,l,{config:o,type:c}={}){let d="";c==="plain"?d="pl":c==="phrase"?d="ph":c==="websearch"&&(d="w");const f=o===void 0?"":`(${o})`;return this.url.searchParams.append(i,`${d}fts${f}.${l}`),this}match(i){return Object.entries(i).forEach(([l,o])=>{this.url.searchParams.append(l,`eq.${o}`)}),this}not(i,l,o){return this.url.searchParams.append(i,`not.${l}.${o}`),this}or(i,{foreignTable:l,referencedTable:o=l}={}){const c=o?`${o}.or`:"or";return this.url.searchParams.append(c,`(${i})`),this}filter(i,l,o){return this.url.searchParams.append(i,`${l}.${o}`),this}}return l2.default=n,l2}var CT;function zR(){if(CT)return i2;CT=1,Object.defineProperty(i2,"__esModule",{value:!0});const t=tp.__importDefault(g6());class r{constructor(a,{headers:i={},schema:l,fetch:o}){this.url=a,this.headers=new Headers(i),this.schema=l,this.fetch=o}select(a,i){const{head:l=!1,count:o}=i??{},c=l?"HEAD":"GET";let d=!1;const f=(a??"*").split("").map(p=>/\s/.test(p)&&!d?"":(p==='"'&&(d=!d),p)).join("");return this.url.searchParams.set("select",f),o&&this.headers.append("Prefer",`count=${o}`),new t.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(a,{count:i,defaultToNull:l=!0}={}){var o;const c="POST";if(i&&this.headers.append("Prefer",`count=${i}`),l||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const d=a.reduce((f,p)=>f.concat(Object.keys(p)),[]);if(d.length>0){const f=[...new Set(d)].map(p=>`"${p}"`);this.url.searchParams.set("columns",f.join(","))}}return new t.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}upsert(a,{onConflict:i,ignoreDuplicates:l=!1,count:o,defaultToNull:c=!0}={}){var d;const f="POST";if(this.headers.append("Prefer",`resolution=${l?"ignore":"merge"}-duplicates`),i!==void 0&&this.url.searchParams.set("on_conflict",i),o&&this.headers.append("Prefer",`count=${o}`),c||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const p=a.reduce((y,g)=>y.concat(Object.keys(g)),[]);if(p.length>0){const y=[...new Set(p)].map(g=>`"${g}"`);this.url.searchParams.set("columns",y.join(","))}}return new t.default({method:f,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}update(a,{count:i}={}){var l;const o="PATCH";return i&&this.headers.append("Prefer",`count=${i}`),new t.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}delete({count:a}={}){var i;const l="DELETE";return a&&this.headers.append("Prefer",`count=${a}`),new t.default({method:l,url:this.url,headers:this.headers,schema:this.schema,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}}return i2.default=r,i2}var AT;function pZ(){if(AT)return s2;AT=1,Object.defineProperty(s2,"__esModule",{value:!0});const e=tp,t=e.__importDefault(zR()),r=e.__importDefault(g6());class n{constructor(i,{headers:l={},schema:o,fetch:c}={}){this.url=i,this.headers=new Headers(l),this.schemaName=o,this.fetch=c}from(i){const l=new URL(`${this.url}/${i}`);return new t.default(l,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(i){return new n(this.url,{headers:this.headers,schema:i,fetch:this.fetch})}rpc(i,l={},{head:o=!1,get:c=!1,count:d}={}){var f;let p;const y=new URL(`${this.url}/rpc/${i}`);let g;o||c?(p=o?"HEAD":"GET",Object.entries(l).filter(([w,k])=>k!==void 0).map(([w,k])=>[w,Array.isArray(k)?`{${k.join(",")}}`:`${k}`]).forEach(([w,k])=>{y.searchParams.append(w,k)})):(p="POST",g=l);const N=new Headers(this.headers);return d&&N.set("Prefer",`count=${d}`),new r.default({method:p,url:y,headers:N,schema:this.schemaName,body:g,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}}return s2.default=n,s2}var ET;function gZ(){if(ET)return $l;ET=1,Object.defineProperty($l,"__esModule",{value:!0}),$l.PostgrestError=$l.PostgrestBuilder=$l.PostgrestTransformBuilder=$l.PostgrestFilterBuilder=$l.PostgrestQueryBuilder=$l.PostgrestClient=void 0;const e=tp,t=e.__importDefault(pZ());$l.PostgrestClient=t.default;const r=e.__importDefault(zR());$l.PostgrestQueryBuilder=r.default;const n=e.__importDefault(g6());$l.PostgrestFilterBuilder=n.default;const a=e.__importDefault(UR());$l.PostgrestTransformBuilder=a.default;const i=e.__importDefault(BR());$l.PostgrestBuilder=i.default;const l=e.__importDefault(FR());return $l.PostgrestError=l.default,$l.default={PostgrestClient:t.default,PostgrestQueryBuilder:r.default,PostgrestFilterBuilder:n.default,PostgrestTransformBuilder:a.default,PostgrestBuilder:i.default,PostgrestError:l.default},$l}var qR=gZ();const HR=gd(qR),bZ=r6({__proto__:null,default:HR},[qR]),{PostgrestClient:vZ,PostgrestQueryBuilder:jTe,PostgrestFilterBuilder:CTe,PostgrestTransformBuilder:ATe,PostgrestBuilder:ETe,PostgrestError:TTe}=HR||bZ;class yZ{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const n=r.node,a=parseInt(n.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const n=this.getWebSocketConstructor();return new n(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const wZ="2.80.0",kZ=`realtime-js/${wZ}`,NZ="1.0.0",u_=1e4,_Z=1e3,SZ=100;var Ng;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Ng||(Ng={}));var Wi;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Wi||(Wi={}));var $d;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})($d||($d={}));var h_;(function(e){e.websocket="websocket"})(h_||(h_={}));var Vf;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Vf||(Vf={}));class jZ{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),n=new TextDecoder;return this._decodeBroadcast(t,r,n)}_decodeBroadcast(t,r,n){const a=r.getUint8(1),i=r.getUint8(2);let l=this.HEADER_LENGTH+2;const o=n.decode(t.slice(l,l+a));l=l+a;const c=n.decode(t.slice(l,l+i));l=l+i;const d=JSON.parse(n.decode(t.slice(l,t.byteLength)));return{ref:null,topic:o,event:c,payload:d}}}class $R{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var gs;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(gs||(gs={}));const TT=(e,t,r={})=>{var n;const a=(n=r.skipTypes)!==null&&n!==void 0?n:[];return t?Object.keys(t).reduce((i,l)=>(i[l]=CZ(l,e,t,a),i),{}):{}},CZ=(e,t,r,n)=>{const a=t.find(o=>o.name===e),i=a==null?void 0:a.type,l=r[e];return i&&!n.includes(i)?VR(i,l):f_(l)},VR=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return OZ(t,r)}switch(e){case gs.bool:return AZ(t);case gs.float4:case gs.float8:case gs.int2:case gs.int4:case gs.int8:case gs.numeric:case gs.oid:return EZ(t);case gs.json:case gs.jsonb:return TZ(t);case gs.timestamp:return PZ(t);case gs.abstime:case gs.date:case gs.daterange:case gs.int4range:case gs.int8range:case gs.money:case gs.reltime:case gs.text:case gs.time:case gs.timestamptz:case gs.timetz:case gs.tsrange:case gs.tstzrange:return f_(t);default:return f_(t)}},f_=e=>e,AZ=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},EZ=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},TZ=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},OZ=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let i;const l=e.slice(1,r);try{i=JSON.parse("["+l+"]")}catch{i=l?l.split(","):[]}return i.map(o=>VR(t,o))}return e},PZ=e=>typeof e=="string"?e.replace(" ","T"):e,WR=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class f4{constructor(t,r,n={},a=u_){this.channel=t,this.event=r,this.payload=n,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var OT;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(OT||(OT={}));class _g{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},a=>{const{onJoin:i,onLeave:l,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=_g.syncState(this.state,a,i,l),this.pendingDiffs.forEach(c=>{this.state=_g.syncDiff(this.state,c,i,l)}),this.pendingDiffs=[],o()}),this.channel._on(n.diff,{},a=>{const{onJoin:i,onLeave:l,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=_g.syncDiff(this.state,a,i,l),o())}),this.onJoin((a,i,l)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:i,newPresences:l})}),this.onLeave((a,i,l)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:i,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,a){const i=this.cloneDeep(t),l=this.transformState(r),o={},c={};return this.map(i,(d,f)=>{l[d]||(c[d]=f)}),this.map(l,(d,f)=>{const p=i[d];if(p){const y=f.map(k=>k.presence_ref),g=p.map(k=>k.presence_ref),N=f.filter(k=>g.indexOf(k.presence_ref)<0),w=p.filter(k=>y.indexOf(k.presence_ref)<0);N.length>0&&(o[d]=N),w.length>0&&(c[d]=w)}else o[d]=f}),this.syncDiff(i,{joins:o,leaves:c},n,a)}static syncDiff(t,r,n,a){const{joins:i,leaves:l}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),a||(a=()=>{}),this.map(i,(o,c)=>{var d;const f=(d=t[o])!==null&&d!==void 0?d:[];if(t[o]=this.cloneDeep(c),f.length>0){const p=t[o].map(g=>g.presence_ref),y=f.filter(g=>p.indexOf(g.presence_ref)<0);t[o].unshift(...y)}n(o,f,c)}),this.map(l,(o,c)=>{let d=t[o];if(!d)return;const f=c.map(p=>p.presence_ref);d=d.filter(p=>f.indexOf(p.presence_ref)<0),t[o]=d,a(o,d,c),d.length===0&&delete t[o]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const a=t[n];return"metas"in a?r[n]=a.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=a,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var PT;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(PT||(PT={}));var Sg;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Sg||(Sg={}));var v0;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(v0||(v0={}));class b6{constructor(t,r={config:{}},n){var a,i;if(this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=Wi.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new f4(this,$d.join,this.params,this.timeout),this.rejoinTimer=new $R(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Wi.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(l=>l.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Wi.closed,this.socket._remove(this)}),this._onError(l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=Wi.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Wi.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=Wi.errored,this.rejoinTimer.scheduleTimeout())}),this._on($d.reply,{},(l,o)=>{this._trigger(this._replyEventName(o),l)}),this.presence=new _g(this),this.broadcastEndpointURL=WR(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(a=this.params.config)===null||a===void 0?void 0:a.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,r=this.timeout){var n,a,i;if(this.socket.isConnected()||this.socket.connect(),this.state==Wi.closed){const{config:{broadcast:l,presence:o,private:c}}=this.params,d=(a=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(g=>g.filter))!==null&&a!==void 0?a:[],f=!!this.bindings[Sg.PRESENCE]&&this.bindings[Sg.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,p={},y={broadcast:l,presence:Object.assign(Object.assign({},o),{enabled:f}),postgres_changes:d,private:c};this.socket.accessTokenValue&&(p.access_token=this.socket.accessTokenValue),this._onError(g=>t==null?void 0:t(v0.CHANNEL_ERROR,g)),this._onClose(()=>t==null?void 0:t(v0.CLOSED)),this.updateJoinPayload(Object.assign({config:y},p)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:g})=>{var N;if(this.socket.setAuth(),g===void 0){t==null||t(v0.SUBSCRIBED);return}else{const w=this.bindings.postgres_changes,k=(N=w==null?void 0:w.length)!==null&&N!==void 0?N:0,S=[];for(let O=0;O<k;O++){const E=w[O],{filter:{event:D,schema:q,table:W,filter:R}}=E,U=g&&g[O];if(U&&U.event===D&&U.schema===q&&U.table===W&&U.filter===R)S.push(Object.assign(Object.assign({},E),{id:U.id}));else{this.unsubscribe(),this.state=Wi.errored,t==null||t(v0.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=S,t&&t(v0.SUBSCRIBED);return}}).receive("error",g=>{this.state=Wi.errored,t==null||t(v0.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(g).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(v0.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this.state===Wi.joined&&t===Sg.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,r,n)}async httpSend(t,r,n={}){var a;const i=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(r==null)return Promise.reject("Payload is required for httpSend()");const l={method:"POST",headers:{Authorization:i,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:r,private:this.private}]})},o=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(a=n.timeout)!==null&&a!==void 0?a:this.timeout);if(o.status===202)return{success:!0};let c=o.statusText;try{const d=await o.json();c=d.error||d.message||c}catch{}return Promise.reject(new Error(c))}async send(t,r={}){var n,a;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:l}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:l,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((a=d.body)===null||a===void 0?void 0:a.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var l,o,c;const d=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(o=(l=this.params)===null||l===void 0?void 0:l.config)===null||o===void 0?void 0:o.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),d.receive("ok",()=>i("ok")),d.receive("error",()=>i("error")),d.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Wi.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger($d.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(a=>{n=new f4(this,$d.leave,{},t),n.receive("ok",()=>{r(),a("ok")}).receive("timeout",()=>{r(),a("timed out")}).receive("error",()=>{a("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Wi.closed,this.bindings={}}async _fetchWithTimeout(t,r,n){const a=new AbortController,i=setTimeout(()=>a.abort(),n),l=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:a.signal}));return clearTimeout(i),l}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new f4(this,t,r,n);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>SZ){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var a,i;const l=t.toLocaleLowerCase(),{close:o,error:c,leave:d,join:f}=$d;if(n&&[o,c,d,f].indexOf(l)>=0&&n!==this._joinRef())return;let y=this._onMessage(l,r,n);if(r&&!y)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(g=>{var N,w,k;return((N=g.filter)===null||N===void 0?void 0:N.event)==="*"||((k=(w=g.filter)===null||w===void 0?void 0:w.event)===null||k===void 0?void 0:k.toLocaleLowerCase())===l}).map(g=>g.callback(y,n)):(i=this.bindings[l])===null||i===void 0||i.filter(g=>{var N,w,k,S,O,E;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in g){const D=g.id,q=(N=g.filter)===null||N===void 0?void 0:N.event;return D&&((w=r.ids)===null||w===void 0?void 0:w.includes(D))&&(q==="*"||(q==null?void 0:q.toLocaleLowerCase())===((k=r.data)===null||k===void 0?void 0:k.type.toLocaleLowerCase()))}else{const D=(O=(S=g==null?void 0:g.filter)===null||S===void 0?void 0:S.event)===null||O===void 0?void 0:O.toLocaleLowerCase();return D==="*"||D===((E=r==null?void 0:r.event)===null||E===void 0?void 0:E.toLocaleLowerCase())}else return g.type.toLocaleLowerCase()===l}).map(g=>{if(typeof y=="object"&&"ids"in y){const N=y.data,{schema:w,table:k,commit_timestamp:S,type:O,errors:E}=N;y=Object.assign(Object.assign({},{schema:w,table:k,commit_timestamp:S,eventType:O,new:{},old:{},errors:E}),this._getPayloadRecords(N))}g.callback(y,n)})}_isClosed(){return this.state===Wi.closed}_isJoined(){return this.state===Wi.joined}_isJoining(){return this.state===Wi.joining}_isLeaving(){return this.state===Wi.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const a=t.toLocaleLowerCase(),i={type:a,filter:r,callback:n};return this.bindings[a]?this.bindings[a].push(i):this.bindings[a]=[i],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(a=>{var i;return!(((i=a.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&b6.isEqual(a.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on($d.close,{},t)}_onError(t){this._on($d.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Wi.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=TT(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=TT(t.columns,t.old_record)),r}}const m4=()=>{},u2={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},IZ=[1e3,2e3,5e3,1e4],DZ=1e4,MZ=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class LZ{constructor(t,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=u_,this.transport=null,this.heartbeatIntervalMs=u2.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=m4,this.ref=0,this.reconnectTimer=null,this.logger=m4,this.conn=null,this.sendBuffer=[],this.serializer=new jZ,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>a?(...i)=>a(...i):(...i)=>fetch(...i),!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${h_.websocket}`,this.httpEndpoint=WR(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=yZ.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:NZ}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},t?this.conn.close(t,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Ng.connecting:return Vf.Connecting;case Ng.open:return Vf.Open;case Ng.closing:return Vf.Closing;default:return Vf.Closed}}isConnected(){return this.connectionState()===Vf.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const n=`realtime:${t}`,a=this.getChannels().find(i=>i.topic===n);if(a)return a;{const i=new b6(`realtime:${t}`,r,this);return this.channels.push(i),i}}push(t){const{topic:r,event:n,payload:a,ref:i}=t,l=()=>{this.encode(t,o=>{var c;(c=this.conn)===null||c===void 0||c.send(o)})};this.log("push",`${r} ${n} (${i})`,a),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(_Z,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},u2.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(d){this.log("error","error in heartbeat callback",d)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:a,payload:i,ref:l}=r,o=l?`(${l})`:"",c=i.status||"";this.log("receive",`${c} ${n} ${a} ${o}`.trim(),i),this.channels.filter(d=>d._isMember(n)).forEach(d=>d._trigger(a,i,l)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger($d.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",a=new URLSearchParams(r);return`${t}${n}${a}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([MZ],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r;t?r=t:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const a={access_token:r,version:kZ};r&&n.updateJoinPayload(a),n.joinedOnce&&n._isJoined()&&n._push($d.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(r)}catch(a){this.log("error",`error in ${t} callback`,a)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new $R(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},u2.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,n,a,i,l,o,c,d,f;if(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(n=t==null?void 0:t.timeout)!==null&&n!==void 0?n:u_,this.heartbeatIntervalMs=(a=t==null?void 0:t.heartbeatIntervalMs)!==null&&a!==void 0?a:u2.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(l=t==null?void 0:t.accessToken)!==null&&l!==void 0?l:null,this.heartbeatCallback=(o=t==null?void 0:t.heartbeatCallback)!==null&&o!==void 0?o:m4,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=t==null?void 0:t.reconnectAfterMs)!==null&&c!==void 0?c:(p=>IZ[p-1]||DZ),this.encode=(d=t==null?void 0:t.encode)!==null&&d!==void 0?d:((p,y)=>y(JSON.stringify(p))),this.decode=(f=t==null?void 0:t.decode)!==null&&f!==void 0?f:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class v6 extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Vs(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class RZ extends v6{constructor(t,r,n){super(t),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class m_ extends v6{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}const y6=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),FZ=()=>Response,x_=e=>{if(Array.isArray(e))return e.map(r=>x_(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const a=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[a]=x_(n)}),t},BZ=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},x4=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},UZ=(e,t,r)=>on(void 0,void 0,void 0,function*(){const n=yield FZ();e instanceof n&&!(r!=null&&r.noResolveJson)?e.json().then(a=>{const i=e.status||500,l=(a==null?void 0:a.statusCode)||i+"";t(new RZ(x4(a),i,l))}).catch(a=>{t(new m_(x4(a),a))}):t(new m_(x4(e),e))}),zZ=(e,t,r,n)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!n?a:(BZ(n)?(a.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),a.body=JSON.stringify(n)):a.body=n,t!=null&&t.duplex&&(a.duplex=t.duplex),Object.assign(Object.assign({},a),r))};function Db(e,t,r,n,a,i){return on(this,void 0,void 0,function*(){return new Promise((l,o)=>{e(r,zZ(t,n,a,i)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>l(c)).catch(c=>UZ(c,o,n))})})}function qg(e,t,r,n){return on(this,void 0,void 0,function*(){return Db(e,"GET",t,r,n)})}function zd(e,t,r,n,a){return on(this,void 0,void 0,function*(){return Db(e,"POST",t,n,a,r)})}function p_(e,t,r,n,a){return on(this,void 0,void 0,function*(){return Db(e,"PUT",t,n,a,r)})}function qZ(e,t,r,n){return on(this,void 0,void 0,function*(){return Db(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function w6(e,t,r,n,a){return on(this,void 0,void 0,function*(){return Db(e,"DELETE",t,n,a,r)})}class HZ{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r}then(t,r){return this.execute().then(t,r)}execute(){return on(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Vs(t))return{data:null,error:t};throw t}})}}var KR;class $Z{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r,this[KR]="BlobDownloadBuilder",this.promise=null}asStream(){return new HZ(this.downloadFn,this.shouldThrowOnError)}then(t,r){return this.getPromise().then(t,r)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return on(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Vs(t))return{data:null,error:t};throw t}})}}KR=Symbol.toStringTag;const VZ={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},IT={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class WZ{constructor(t,r={},n,a){this.shouldThrowOnError=!1,this.url=t,this.headers=r,this.bucketId=n,this.fetch=y6(a)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,r,n,a){return on(this,void 0,void 0,function*(){try{let i;const l=Object.assign(Object.assign({},IT),a);let o=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(l.upsert)});const c=l.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",l.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.has("cacheControl")||i.append("cacheControl",l.cacheControl),c&&!i.has("metadata")&&i.append("metadata",this.encodeMetadata(c))):(i=n,o["cache-control"]=`max-age=${l.cacheControl}`,o["content-type"]=l.contentType,c&&(o["x-metadata"]=this.toBase64(this.encodeMetadata(c))),(typeof ReadableStream<"u"&&i instanceof ReadableStream||i&&typeof i=="object"&&"pipe"in i&&typeof i.pipe=="function")&&!l.duplex&&(l.duplex="half")),a!=null&&a.headers&&(o=Object.assign(Object.assign({},o),a.headers));const d=this._removeEmptyFolders(r),f=this._getFinalPath(d),p=yield(t=="PUT"?p_:zd)(this.fetch,`${this.url}/object/${f}`,i,Object.assign({headers:o},l!=null&&l.duplex?{duplex:l.duplex}:{}));return{data:{path:d,id:p.Id,fullPath:p.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Vs(i))return{data:null,error:i};throw i}})}upload(t,r,n){return on(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,a){return on(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),l=this._getFinalPath(i),o=new URL(this.url+`/object/upload/sign/${l}`);o.searchParams.set("token",r);try{let c;const d=Object.assign({upsert:IT.upsert},a),f=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",d.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",d.cacheControl)):(c=n,f["cache-control"]=`max-age=${d.cacheControl}`,f["content-type"]=d.contentType);const p=yield p_(this.fetch,o.toString(),c,{headers:f});return{data:{path:i,fullPath:p.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(Vs(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,r){return on(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const a=Object.assign({},this.headers);r!=null&&r.upsert&&(a["x-upsert"]="true");const i=yield zd(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:a}),l=new URL(this.url+i.url),o=l.searchParams.get("token");if(!o)throw new v6("No token returned by API");return{data:{signedUrl:l.toString(),path:t,token:o},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Vs(n))return{data:null,error:n};throw n}})}update(t,r,n){return on(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return on(this,void 0,void 0,function*(){try{return{data:yield zd(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Vs(a))return{data:null,error:a};throw a}})}copy(t,r,n){return on(this,void 0,void 0,function*(){try{return{data:{path:(yield zd(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Vs(a))return{data:null,error:a};throw a}})}createSignedUrl(t,r,n){return on(this,void 0,void 0,function*(){try{let a=this._getFinalPath(t),i=yield zd(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const l=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${l}`)},{data:i,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Vs(a))return{data:null,error:a};throw a}})}createSignedUrls(t,r,n){return on(this,void 0,void 0,function*(){try{const a=yield zd(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:a.map(l=>Object.assign(Object.assign({},l),{signedUrl:l.signedURL?encodeURI(`${this.url}${l.signedURL}${i}`):null})),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Vs(a))return{data:null,error:a};throw a}})}download(t,r){const a=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),l=i?`?${i}`:"",o=this._getFinalPath(t),c=()=>qg(this.fetch,`${this.url}/${a}/${o}${l}`,{headers:this.headers,noResolveJson:!0});return new $Z(c,this.shouldThrowOnError)}info(t){return on(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield qg(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:x_(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Vs(n))return{data:null,error:n};throw n}})}exists(t){return on(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield qZ(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Vs(n)&&n instanceof m_){const a=n.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),a=[],i=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&a.push(i);const o=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});c!==""&&a.push(c);let d=a.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${n}${d}`)}}}remove(t){return on(this,void 0,void 0,function*(){try{return{data:yield w6(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Vs(r))return{data:null,error:r};throw r}})}list(t,r,n){return on(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},VZ),r),{prefix:t||""});return{data:yield zd(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},n),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Vs(a))return{data:null,error:a};throw a}})}listV2(t,r){return on(this,void 0,void 0,function*(){try{const n=Object.assign({},t);return{data:yield zd(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Vs(n))return{data:null,error:n};throw n}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const GR="2.80.0",XR={"X-Client-Info":`storage-js/${GR}`};class KZ{constructor(t,r={},n,a){this.shouldThrowOnError=!1;const i=new URL(t);a!=null&&a.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},XR),r),this.fetch=y6(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(t){return on(this,void 0,void 0,function*(){try{const r=this.listBucketOptionsToQueryString(t);return{data:yield qg(this.fetch,`${this.url}/bucket${r}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Vs(r))return{data:null,error:r};throw r}})}getBucket(t){return on(this,void 0,void 0,function*(){try{return{data:yield qg(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Vs(r))return{data:null,error:r};throw r}})}createBucket(t){return on(this,arguments,void 0,function*(r,n={public:!1}){try{return{data:yield zd(this.fetch,`${this.url}/bucket`,{id:r,name:r,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Vs(a))return{data:null,error:a};throw a}})}updateBucket(t,r){return on(this,void 0,void 0,function*(){try{return{data:yield p_(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Vs(n))return{data:null,error:n};throw n}})}emptyBucket(t){return on(this,void 0,void 0,function*(){try{return{data:yield zd(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Vs(r))return{data:null,error:r};throw r}})}deleteBucket(t){return on(this,void 0,void 0,function*(){try{return{data:yield w6(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Vs(r))return{data:null,error:r};throw r}})}listBucketOptionsToQueryString(t){const r={};return t&&("limit"in t&&(r.limit=String(t.limit)),"offset"in t&&(r.offset=String(t.offset)),t.search&&(r.search=t.search),t.sortColumn&&(r.sortColumn=t.sortColumn),t.sortOrder&&(r.sortOrder=t.sortOrder)),Object.keys(r).length>0?"?"+new URLSearchParams(r).toString():""}}class GZ{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},XR),r),this.fetch=y6(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return on(this,void 0,void 0,function*(){try{return{data:yield zd(this.fetch,`${this.url}/bucket`,{name:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Vs(r))return{data:null,error:r};throw r}})}listBuckets(t){return on(this,void 0,void 0,function*(){try{const r=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&r.set("limit",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&r.set("offset",t.offset.toString()),t!=null&&t.sortColumn&&r.set("sortColumn",t.sortColumn),t!=null&&t.sortOrder&&r.set("sortOrder",t.sortOrder),t!=null&&t.search&&r.set("search",t.search);const n=r.toString(),a=n?`${this.url}/bucket?${n}`:`${this.url}/bucket`;return{data:yield qg(this.fetch,a,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Vs(r))return{data:null,error:r};throw r}})}deleteBucket(t){return on(this,void 0,void 0,function*(){try{return{data:yield w6(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Vs(r))return{data:null,error:r};throw r}})}}const k6={"X-Client-Info":`storage-js/${GR}`,"Content-Type":"application/json"};class YR extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function kc(e){return typeof e=="object"&&e!==null&&"__isStorageVectorsError"in e}class p4 extends YR{constructor(t,r,n){super(t),this.name="StorageVectorsApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class XZ extends YR{constructor(t,r){super(t),this.name="StorageVectorsUnknownError",this.originalError=r}}var DT;(function(e){e.InternalError="InternalError",e.S3VectorConflictException="S3VectorConflictException",e.S3VectorNotFoundException="S3VectorNotFoundException",e.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",e.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",e.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(DT||(DT={}));const N6=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),YZ=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},MT=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),ZZ=(e,t,r)=>on(void 0,void 0,void 0,function*(){if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(r!=null&&r.noResolveJson)){const a=e.status||500,i=e;if(typeof i.json=="function")i.json().then(l=>{const o=(l==null?void 0:l.statusCode)||(l==null?void 0:l.code)||a+"";t(new p4(MT(l),a,o))}).catch(()=>{const l=a+"",o=i.statusText||`HTTP ${a} error`;t(new p4(o,a,l))});else{const l=a+"",o=i.statusText||`HTTP ${a} error`;t(new p4(o,a,l))}}else t(new XZ(MT(e),e))}),QZ=(e,t,r,n)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return n?(YZ(n)?(a.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),a.body=JSON.stringify(n)):a.body=n,Object.assign(Object.assign({},a),r)):a};function JZ(e,t,r,n,a,i){return on(this,void 0,void 0,function*(){return new Promise((l,o)=>{e(r,QZ(t,n,a,i)).then(c=>{if(!c.ok)throw c;if(n!=null&&n.noResolveJson)return c;const d=c.headers.get("content-type");return!d||!d.includes("application/json")?{}:c.json()}).then(c=>l(c)).catch(c=>ZZ(c,o,n))})})}function Nc(e,t,r,n,a){return on(this,void 0,void 0,function*(){return JZ(e,"POST",t,n,a,r)})}class eQ{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},k6),r),this.fetch=N6(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(t){return on(this,void 0,void 0,function*(){try{return{data:(yield Nc(this.fetch,`${this.url}/CreateIndex`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(kc(r))return{data:null,error:r};throw r}})}getIndex(t,r){return on(this,void 0,void 0,function*(){try{return{data:yield Nc(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:t,indexName:r},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(kc(n))return{data:null,error:n};throw n}})}listIndexes(t){return on(this,void 0,void 0,function*(){try{return{data:yield Nc(this.fetch,`${this.url}/ListIndexes`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(kc(r))return{data:null,error:r};throw r}})}deleteIndex(t,r){return on(this,void 0,void 0,function*(){try{return{data:(yield Nc(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:t,indexName:r},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(kc(n))return{data:null,error:n};throw n}})}}class tQ{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},k6),r),this.fetch=N6(n)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(t){return on(this,void 0,void 0,function*(){try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Nc(this.fetch,`${this.url}/PutVectors`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(kc(r))return{data:null,error:r};throw r}})}getVectors(t){return on(this,void 0,void 0,function*(){try{return{data:yield Nc(this.fetch,`${this.url}/GetVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(kc(r))return{data:null,error:r};throw r}})}listVectors(t){return on(this,void 0,void 0,function*(){try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:yield Nc(this.fetch,`${this.url}/ListVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(kc(r))return{data:null,error:r};throw r}})}queryVectors(t){return on(this,void 0,void 0,function*(){try{return{data:yield Nc(this.fetch,`${this.url}/QueryVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(kc(r))return{data:null,error:r};throw r}})}deleteVectors(t){return on(this,void 0,void 0,function*(){try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Nc(this.fetch,`${this.url}/DeleteVectors`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(kc(r))return{data:null,error:r};throw r}})}}class rQ{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},k6),r),this.fetch=N6(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return on(this,void 0,void 0,function*(){try{return{data:(yield Nc(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(kc(r))return{data:null,error:r};throw r}})}getBucket(t){return on(this,void 0,void 0,function*(){try{return{data:yield Nc(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(kc(r))return{data:null,error:r};throw r}})}listBuckets(){return on(this,arguments,void 0,function*(t={}){try{return{data:yield Nc(this.fetch,`${this.url}/ListVectorBuckets`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(kc(r))return{data:null,error:r};throw r}})}deleteBucket(t){return on(this,void 0,void 0,function*(){try{return{data:(yield Nc(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(kc(r))return{data:null,error:r};throw r}})}}class nQ extends rQ{constructor(t,r={}){super(t,r.headers||{},r.fetch)}from(t){return new aQ(this.url,this.headers,t,this.fetch)}}class aQ extends eQ{constructor(t,r,n,a){super(t,r,a),this.vectorBucketName=n}createIndex(t){const r=Object.create(null,{createIndex:{get:()=>super.createIndex}});return on(this,void 0,void 0,function*(){return r.createIndex.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const t=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return on(this,arguments,void 0,function*(r={}){return t.listIndexes.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName}))})}getIndex(t){const r=Object.create(null,{getIndex:{get:()=>super.getIndex}});return on(this,void 0,void 0,function*(){return r.getIndex.call(this,this.vectorBucketName,t)})}deleteIndex(t){const r=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return on(this,void 0,void 0,function*(){return r.deleteIndex.call(this,this.vectorBucketName,t)})}index(t){return new sQ(this.url,this.headers,this.vectorBucketName,t,this.fetch)}}class sQ extends tQ{constructor(t,r,n,a,i){super(t,r,i),this.vectorBucketName=n,this.indexName=a}putVectors(t){const r=Object.create(null,{putVectors:{get:()=>super.putVectors}});return on(this,void 0,void 0,function*(){return r.putVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(t){const r=Object.create(null,{getVectors:{get:()=>super.getVectors}});return on(this,void 0,void 0,function*(){return r.getVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const t=Object.create(null,{listVectors:{get:()=>super.listVectors}});return on(this,arguments,void 0,function*(r={}){return t.listVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(t){const r=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return on(this,void 0,void 0,function*(){return r.queryVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(t){const r=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return on(this,void 0,void 0,function*(){return r.deleteVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class iQ extends KZ{constructor(t,r={},n,a){super(t,r,n,a)}from(t){return new WZ(this.url,this.headers,t,this.fetch)}get vectors(){return new nQ(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new GZ(this.url+"/iceberg",this.headers,this.fetch)}}const lQ="2.80.0";let pg="";typeof Deno<"u"?pg="deno":typeof document<"u"?pg="web":typeof navigator<"u"&&navigator.product==="ReactNative"?pg="react-native":pg="node";const oQ={"X-Client-Info":`supabase-js-${pg}/${lQ}`},cQ={headers:oQ},dQ={schema:"public"},uQ={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},hQ={},fQ=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),mQ=()=>Headers,xQ=(e,t,r)=>{const n=fQ(r),a=mQ();return async(i,l)=>{var o;const c=(o=await t())!==null&&o!==void 0?o:e;let d=new a(l==null?void 0:l.headers);return d.has("apikey")||d.set("apikey",e),d.has("Authorization")||d.set("Authorization",`Bearer ${c}`),n(i,Object.assign(Object.assign({},l),{headers:d}))}};function pQ(e){return e.endsWith("/")?e:e+"/"}function gQ(e,t){var r,n;const{db:a,auth:i,realtime:l,global:o}=e,{db:c,auth:d,realtime:f,global:p}=t,y={db:Object.assign(Object.assign({},c),a),auth:Object.assign(Object.assign({},d),i),realtime:Object.assign(Object.assign({},f),l),storage:{},global:Object.assign(Object.assign(Object.assign({},p),o),{headers:Object.assign(Object.assign({},(r=p==null?void 0:p.headers)!==null&&r!==void 0?r:{}),(n=o==null?void 0:o.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return e.accessToken?y.accessToken=e.accessToken:delete y.accessToken,y}function bQ(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(pQ(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const ZR="2.80.0",r1=30*1e3,g_=3,g4=g_*r1,vQ="http://localhost:9999",yQ="supabase.auth.token",wQ={"X-Client-Info":`gotrue-js/${ZR}`},b_="X-Supabase-Api-Version",QR={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},kQ=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,NQ=600*1e3;class Hg extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function pn(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class _Q extends Hg{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function SQ(e){return pn(e)&&e.name==="AuthApiError"}class Wf extends Hg{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class ff extends Hg{constructor(t,r,n,a){super(t,n,a),this.name=r,this.status=n}}class Bd extends ff{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function jQ(e){return pn(e)&&e.name==="AuthSessionMissingError"}class zx extends ff{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class h2 extends ff{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class f2 extends ff{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function CQ(e){return pn(e)&&e.name==="AuthImplicitGrantRedirectError"}class LT extends ff{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class v_ extends ff{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function b4(e){return pn(e)&&e.name==="AuthRetryableFetchError"}class RT extends ff{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class y_ extends ff{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const xy="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),FT=` 	
\r=`.split(""),AQ=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<FT.length;t+=1)e[FT[t].charCodeAt(0)]=-2;for(let t=0;t<xy.length;t+=1)e[xy[t].charCodeAt(0)]=t;return e})();function BT(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(xy[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(xy[n]),t.queuedBits-=6}}function JR(e,t,r){const n=AQ[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function UT(e){const t=[],r=l=>{t.push(String.fromCodePoint(l))},n={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},i=l=>{OQ(l,n,r)};for(let l=0;l<e.length;l+=1)JR(e.charCodeAt(l),a,i);return t.join("")}function EQ(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function TQ(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const a=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|a)+65536,r+=1}EQ(n,t)}}function OQ(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if((e>>7-n&1)===0){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function u1(e){const t=[],r={queue:0,queuedBits:0},n=a=>{t.push(a)};for(let a=0;a<e.length;a+=1)JR(e.charCodeAt(a),r,n);return new Uint8Array(t)}function PQ(e){const t=[];return TQ(e,r=>t.push(r)),new Uint8Array(t)}function Yf(e){const t=[],r={queue:0,queuedBits:0},n=a=>{t.push(a)};return e.forEach(a=>BT(a,r,n)),BT(null,r,n),t.join("")}function IQ(e){return Math.round(Date.now()/1e3)+e}function DQ(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const Yl=()=>typeof window<"u"&&typeof document<"u",Rf={tested:!1,writable:!1},eF=()=>{if(!Yl())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Rf.tested)return Rf.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Rf.tested=!0,Rf.writable=!0}catch{Rf.tested=!0,Rf.writable=!1}return Rf.writable};function MQ(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((a,i)=>{t[i]=a})}catch{}return r.searchParams.forEach((n,a)=>{t[a]=n}),t}const tF=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),LQ=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",n1=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},Ff=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Ph=async(e,t)=>{await e.removeItem(t)};class Fw{constructor(){this.promise=new Fw.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}Fw.promiseConstructor=Promise;function v4(e){const t=e.split(".");if(t.length!==3)throw new y_("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!kQ.test(t[n]))throw new y_("JWT not in base64url format");return{header:JSON.parse(UT(t[0])),payload:JSON.parse(UT(t[1])),signature:u1(t[2]),raw:{header:t[0],payload:t[1]}}}async function RQ(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function FQ(e,t){return new Promise((n,a)=>{(async()=>{for(let i=0;i<1/0;i++)try{const l=await e(i);if(!t(i,null,l)){n(l);return}}catch(l){if(!t(i,l)){a(l);return}}})()})}function BQ(e){return("0"+e.toString(16)).substr(-2)}function UQ(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let a="";for(let i=0;i<56;i++)a+=r.charAt(Math.floor(Math.random()*n));return a}return crypto.getRandomValues(t),Array.from(t,BQ).join("")}async function zQ(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),a=new Uint8Array(n);return Array.from(a).map(i=>String.fromCharCode(i)).join("")}async function qQ(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await zQ(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function qx(e,t,r=!1){const n=UQ();let a=n;r&&(a+="/PASSWORD_RECOVERY"),await n1(e,`${t}-code-verifier`,a);const i=await qQ(n);return[i,n===i?"plain":"s256"]}const HQ=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function $Q(e){const t=e.headers.get(b_);if(!t||!t.match(HQ))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function VQ(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function WQ(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const KQ=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Hx(e){if(!KQ.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function y4(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function GQ(e,t){return new Proxy(e,{get:(r,n,a)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const i=n.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,n,a)}return!t.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(r,n,a)}})}function zT(e){return JSON.parse(JSON.stringify(e))}const Uf=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),XQ=[502,503,504];async function qT(e){var t;if(!LQ(e))throw new v_(Uf(e),0);if(XQ.includes(e.status))throw new v_(Uf(e),e.status);let r;try{r=await e.json()}catch(i){throw new Wf(Uf(i),i)}let n;const a=$Q(e);if(a&&a.getTime()>=QR["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new RT(Uf(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new Bd}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,l)=>i&&typeof l=="string",!0))throw new RT(Uf(r),e.status,r.weak_password.reasons);throw new _Q(Uf(r),e.status||500,n)}const YQ=(e,t,r,n)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),a.body=JSON.stringify(n),Object.assign(Object.assign({},a),r))};async function Dn(e,t,r,n){var a;const i=Object.assign({},n==null?void 0:n.headers);i[b_]||(i[b_]=QR["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const l=(a=n==null?void 0:n.query)!==null&&a!==void 0?a:{};n!=null&&n.redirectTo&&(l.redirect_to=n.redirectTo);const o=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",c=await ZQ(e,t,r+o,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function ZQ(e,t,r,n,a,i){const l=YQ(t,n,a,i);let o;try{o=await e(r,Object.assign({},l))}catch(c){throw console.error(c),new v_(Uf(c),0)}if(o.ok||await qT(o),n!=null&&n.noResolveJson)return o;try{return await o.json()}catch(c){await qT(c)}}function Ud(e){var t;let r=null;eJ(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=IQ(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function HT(e){const t=Ud(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Bh(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function QQ(e){return{data:e,error:null}}function JQ(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:a,verification_type:i}=e,l=ep(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:t,email_otp:r,hashed_token:n,redirect_to:a,verification_type:i},c=Object.assign({},l);return{data:{properties:o,user:c},error:null}}function $T(e){return e}function eJ(e){return e.access_token&&e.refresh_token&&e.expires_in}const w4=["global","local","others"];class tJ{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=tF(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,r=w4[0]){if(w4.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${w4.join(", ")}`);try{return await Dn(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(pn(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await Dn(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Bh})}catch(n){if(pn(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=ep(t,["options"]),a=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(a.new_email=n==null?void 0:n.newEmail,delete a.newEmail),await Dn(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:JQ,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(pn(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await Dn(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Bh})}catch(r){if(pn(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,a,i,l,o,c;try{const d={nextPage:null,lastPage:0,total:0},f=await Dn(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:$T});if(f.error)throw f.error;const p=await f.json(),y=(l=f.headers.get("x-total-count"))!==null&&l!==void 0?l:0,g=(c=(o=f.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&c!==void 0?c:[];return g.length>0&&(g.forEach(N=>{const w=parseInt(N.split(";")[0].split("=")[1].substring(0,1)),k=JSON.parse(N.split(";")[1].split("=")[1]);d[`${k}Page`]=w}),d.total=parseInt(y)),{data:Object.assign(Object.assign({},p),d),error:null}}catch(d){if(pn(d))return{data:{users:[]},error:d};throw d}}async getUserById(t){Hx(t);try{return await Dn(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Bh})}catch(r){if(pn(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){Hx(t);try{return await Dn(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:Bh})}catch(n){if(pn(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){Hx(t);try{return await Dn(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:Bh})}catch(n){if(pn(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){Hx(t.userId);try{const{data:r,error:n}=await Dn(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:r,error:n}}catch(r){if(pn(r))return{data:null,error:r};throw r}}async _deleteFactor(t){Hx(t.userId),Hx(t.id);try{return{data:await Dn(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(pn(r))return{data:null,error:r};throw r}}async _listOAuthClients(t){var r,n,a,i,l,o,c;try{const d={nextPage:null,lastPage:0,total:0},f=await Dn(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:$T});if(f.error)throw f.error;const p=await f.json(),y=(l=f.headers.get("x-total-count"))!==null&&l!==void 0?l:0,g=(c=(o=f.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&c!==void 0?c:[];return g.length>0&&(g.forEach(N=>{const w=parseInt(N.split(";")[0].split("=")[1].substring(0,1)),k=JSON.parse(N.split(";")[1].split("=")[1]);d[`${k}Page`]=w}),d.total=parseInt(y)),{data:Object.assign(Object.assign({},p),d),error:null}}catch(d){if(pn(d))return{data:{clients:[]},error:d};throw d}}async _createOAuthClient(t){try{return await Dn(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(pn(r))return{data:null,error:r};throw r}}async _getOAuthClient(t){try{return await Dn(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(pn(r))return{data:null,error:r};throw r}}async _updateOAuthClient(t,r){try{return await Dn(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(pn(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(t){try{return await Dn(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(pn(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(t){try{return await Dn(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(pn(r))return{data:null,error:r};throw r}}}function VT(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const $x={debug:!!(globalThis&&eF()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class rF extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class rJ extends rF{}async function nJ(e,t,r){$x.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),$x.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async a=>{if(a){$x.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,a.name);try{return await r()}finally{$x.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,a.name)}}else{if(t===0)throw $x.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new rJ(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if($x.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function aJ(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function nF(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function sJ(e){return parseInt(e,16)}function iJ(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,n=>n.toString(16).padStart(2,"0")).join("")}function lJ(e){var t;const{chainId:r,domain:n,expirationTime:a,issuedAt:i=new Date,nonce:l,notBefore:o,requestId:c,resources:d,scheme:f,uri:p,version:y}=e;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(l&&l.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${l}`);if(!p)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(y!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${y}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const g=nF(e.address),N=f?`${f}://${n}`:n,w=e.statement?`${e.statement}
`:"",k=`${N} wants you to sign in with your Ethereum account:
${g}

${w}`;let S=`URI: ${p}
Version: ${y}
Chain ID: ${r}${l?`
Nonce: ${l}`:""}
Issued At: ${i.toISOString()}`;if(a&&(S+=`
Expiration Time: ${a.toISOString()}`),o&&(S+=`
Not Before: ${o.toISOString()}`),c&&(S+=`
Request ID: ${c}`),d){let O=`
Resources:`;for(const E of d){if(!E||typeof E!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${E}`);O+=`
- ${E}`}S+=O}return`${k}
${S}`}class Mi extends Error{constructor({message:t,code:r,cause:n,name:a}){var i;super(t,{cause:n}),this.__isWebAuthnError=!0,this.name=(i=a??(n instanceof Error?n.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=r}}class py extends Mi{constructor(t,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:t}),this.name="WebAuthnUnknownError",this.originalError=r}}function oJ({error:e,options:t}){var r,n,a;const{publicKey:i}=t;if(!i)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Mi({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((r=i.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new Mi({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((n=i.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new Mi({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((a=i.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new Mi({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new Mi({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new Mi({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return i.pubKeyCredParams.filter(o=>o.type==="public-key").length===0?new Mi({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new Mi({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const l=window.location.hostname;if(aF(l)){if(i.rp.id!==l)return new Mi({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Mi({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new Mi({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new Mi({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Mi({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function cJ({error:e,options:t}){const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Mi({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new Mi({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const n=window.location.hostname;if(aF(n)){if(r.rpId!==n)return new Mi({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Mi({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new Mi({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Mi({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class dJ{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const uJ=new dJ;function hJ(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:r,excludeCredentials:n}=e,a=ep(e,["challenge","user","excludeCredentials"]),i=u1(t).buffer,l=Object.assign(Object.assign({},r),{id:u1(r.id).buffer}),o=Object.assign(Object.assign({},a),{challenge:i,user:l});if(n&&n.length>0){o.excludeCredentials=new Array(n.length);for(let c=0;c<n.length;c++){const d=n[c];o.excludeCredentials[c]=Object.assign(Object.assign({},d),{id:u1(d.id).buffer,type:d.type||"public-key",transports:d.transports})}}return o}function fJ(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:r}=e,n=ep(e,["challenge","allowCredentials"]),a=u1(t).buffer,i=Object.assign(Object.assign({},n),{challenge:a});if(r&&r.length>0){i.allowCredentials=new Array(r.length);for(let l=0;l<r.length;l++){const o=r[l];i.allowCredentials[l]=Object.assign(Object.assign({},o),{id:u1(o.id).buffer,type:o.type||"public-key",transports:o.transports})}}return i}function mJ(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e;return{id:e.id,rawId:e.id,response:{attestationObject:Yf(new Uint8Array(e.response.attestationObject)),clientDataJSON:Yf(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function xJ(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e,n=e.getClientExtensionResults(),a=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:Yf(new Uint8Array(a.authenticatorData)),clientDataJSON:Yf(new Uint8Array(a.clientDataJSON)),signature:Yf(new Uint8Array(a.signature)),userHandle:a.userHandle?Yf(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function aF(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function WT(){var e,t;return!!(Yl()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function pJ(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new py("Browser returned unexpected credential type",t)}:{data:null,error:new py("Empty credential response",t)}}catch(t){return{data:null,error:oJ({error:t,options:e})}}}async function gJ(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new py("Browser returned unexpected credential type",t)}:{data:null,error:new py("Empty credential response",t)}}catch(t){return{data:null,error:cJ({error:t,options:e})}}}const bJ={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},vJ={userVerification:"preferred",hints:["security-key"]};function gy(...e){const t=a=>a!==null&&typeof a=="object"&&!Array.isArray(a),r=a=>a instanceof ArrayBuffer||ArrayBuffer.isView(a),n={};for(const a of e)if(a)for(const i in a){const l=a[i];if(l!==void 0)if(Array.isArray(l))n[i]=l;else if(r(l))n[i]=l;else if(t(l)){const o=n[i];t(o)?n[i]=gy(o,l):n[i]=gy(l)}else n[i]=l}return n}function yJ(e,t){return gy(bJ,e,t||{})}function wJ(e,t){return gy(vJ,e,t||{})}class kJ{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:r,friendlyName:n,signal:a},i){try{const{data:l,error:o}=await this.client.mfa.challenge({factorId:t,webauthn:r});if(!l)return{data:null,error:o};const c=a??uJ.createNewAbortSignal();if(l.webauthn.type==="create"){const{user:d}=l.webauthn.credential_options.publicKey;d.name||(d.name=`${d.id}:${n}`),d.displayName||(d.displayName=d.name)}switch(l.webauthn.type){case"create":{const d=yJ(l.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:f,error:p}=await pJ({publicKey:d,signal:c});return f?{data:{factorId:t,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:f}},error:null}:{data:null,error:p}}case"request":{const d=wJ(l.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:f,error:p}=await gJ(Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:d,signal:c}));return f?{data:{factorId:t,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:f}},error:null}:{data:null,error:p}}}}catch(l){return pn(l)?{data:null,error:l}:{data:null,error:new Wf("Unexpected error in challenge",l)}}}async _verify({challengeId:t,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:t,webauthn:n})}async _authenticate({factorId:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:a}},i){if(!r)return{data:null,error:new Hg("rpId is required for WebAuthn authentication")};try{if(!WT())return{data:null,error:new Wf("Browser does not support WebAuthn",null)};const{data:l,error:o}=await this.challenge({factorId:t,webauthn:{rpId:r,rpOrigins:n},signal:a},{request:i});if(!l)return{data:null,error:o};const{webauthn:c}=l;return this._verify({factorId:t,challengeId:l.challengeId,webauthn:{type:c.type,rpId:r,rpOrigins:n,credential_response:c.credential_response}})}catch(l){return pn(l)?{data:null,error:l}:{data:null,error:new Wf("Unexpected error in authenticate",l)}}}async _register({friendlyName:t,rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:a},i){if(!r)return{data:null,error:new Hg("rpId is required for WebAuthn registration")};try{if(!WT())return{data:null,error:new Wf("Browser does not support WebAuthn",null)};const{data:l,error:o}=await this._enroll({friendlyName:t});if(!l)return await this.client.mfa.listFactors().then(f=>{var p;return(p=f.data)===null||p===void 0?void 0:p.all.find(y=>y.factor_type==="webauthn"&&y.friendly_name===t&&y.status!=="unverified")}).then(f=>f?this.client.mfa.unenroll({factorId:f==null?void 0:f.id}):void 0),{data:null,error:o};const{data:c,error:d}=await this._challenge({factorId:l.id,friendlyName:l.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:a},{create:i});return c?this._verify({factorId:l.id,challengeId:c.challengeId,webauthn:{rpId:r,rpOrigins:n,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:d}}catch(l){return pn(l)?{data:null,error:l}:{data:null,error:new Wf("Unexpected error in register",l)}}}}aJ();const NJ={url:vQ,storageKey:yQ,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:wQ,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function KT(e,t,r){return await r()}const Vx={};class $g{get jwks(){var t,r;return(r=(t=Vx[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){Vx[this.storageKey]=Object.assign(Object.assign({},Vx[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=Vx[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Vx[this.storageKey]=Object.assign(Object.assign({},Vx[this.storageKey]),{cachedAt:t})}constructor(t){var r,n,a;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const i=Object.assign(Object.assign({},NJ),t);if(this.storageKey=i.storageKey,this.instanceID=(r=$g.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,$g.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.instanceID>0&&Yl()){const l=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(l),this.logDebugMessages&&console.trace(l)}if(this.persistSession=i.persistSession,this.autoRefreshToken=i.autoRefreshToken,this.admin=new tJ({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=tF(i.fetch),this.lock=i.lock||KT,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,i.lock?this.lock=i.lock:Yl()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=nJ:this.lock=KT,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new kJ(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:eF()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=VT(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=VT(this.memoryStorage)),Yl()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(l){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",l)}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",async l=>{this._debug("received broadcast notification from other tab or client",l),await this._notifyAllSubscribers(l.data.event,l.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${ZR}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let r={},n="none";if(Yl()&&(r=MQ(window.location.href),this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce")),Yl()&&this.detectSessionInUrl&&n!=="none"){const{data:a,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),CQ(i)){const c=(t=i.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:l,redirectType:o}=a;return this._debug("#_initialize()","detected session in URL",l,"redirect type",o),await this._saveSession(l),setTimeout(async()=>{o==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return pn(r)?this._returnResult({error:r}):this._returnResult({error:new Wf("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,a;try{const i=await Dn(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(a=t==null?void 0:t.options)===null||a===void 0?void 0:a.captchaToken}},xform:Ud}),{data:l,error:o}=i;if(o||!l)return this._returnResult({data:{user:null,session:null},error:o});const c=l.session,d=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:d,session:c},error:null})}catch(i){if(pn(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signUp(t){var r,n,a;try{let i;if("email"in t){const{email:f,password:p,options:y}=t;let g=null,N=null;this.flowType==="pkce"&&([g,N]=await qx(this.storage,this.storageKey)),i=await Dn(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:y==null?void 0:y.emailRedirectTo,body:{email:f,password:p,data:(r=y==null?void 0:y.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:y==null?void 0:y.captchaToken},code_challenge:g,code_challenge_method:N},xform:Ud})}else if("phone"in t){const{phone:f,password:p,options:y}=t;i=await Dn(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:f,password:p,data:(n=y==null?void 0:y.data)!==null&&n!==void 0?n:{},channel:(a=y==null?void 0:y.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:y==null?void 0:y.captchaToken}},xform:Ud})}else throw new h2("You must provide either an email or phone number and a password");const{data:l,error:o}=i;if(o||!l)return this._returnResult({data:{user:null,session:null},error:o});const c=l.session,d=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:d,session:c},error:null})}catch(i){if(pn(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithPassword(t){try{let r;if("email"in t){const{email:i,password:l,options:o}=t;r=await Dn(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:l,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:HT})}else if("phone"in t){const{phone:i,password:l,options:o}=t;r=await Dn(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:l,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:HT})}else throw new h2("You must provide either an email or phone number and a password");const{data:n,error:a}=r;if(a)return this._returnResult({data:{user:null,session:null},error:a});if(!n||!n.session||!n.user){const i=new zx;return this._returnResult({data:{user:null,session:null},error:i})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:a})}catch(r){if(pn(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(t){var r,n,a,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(a=t.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;switch(r){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(t){var r,n,a,i,l,o,c,d,f,p,y;let g,N;if("message"in t)g=t.message,N=t.signature;else{const{chain:w,wallet:k,statement:S,options:O}=t;let E;if(Yl())if(typeof k=="object")E=k;else{const z=window;if("ethereum"in z&&typeof z.ethereum=="object"&&"request"in z.ethereum&&typeof z.ethereum.request=="function")E=z.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof k!="object"||!(O!=null&&O.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");E=k}const D=new URL((r=O==null?void 0:O.url)!==null&&r!==void 0?r:window.location.href),q=await E.request({method:"eth_requestAccounts"}).then(z=>z).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!q||q.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const W=nF(q[0]);let R=(n=O==null?void 0:O.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!R){const z=await E.request({method:"eth_chainId"});R=sJ(z)}const U={domain:D.host,address:W,statement:S,uri:D.href,version:"1",chainId:R,nonce:(a=O==null?void 0:O.signInWithEthereum)===null||a===void 0?void 0:a.nonce,issuedAt:(l=(i=O==null?void 0:O.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&l!==void 0?l:new Date,expirationTime:(o=O==null?void 0:O.signInWithEthereum)===null||o===void 0?void 0:o.expirationTime,notBefore:(c=O==null?void 0:O.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(d=O==null?void 0:O.signInWithEthereum)===null||d===void 0?void 0:d.requestId,resources:(f=O==null?void 0:O.signInWithEthereum)===null||f===void 0?void 0:f.resources};g=lJ(U),N=await E.request({method:"personal_sign",params:[iJ(g),W]})}try{const{data:w,error:k}=await Dn(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:g,signature:N},!((p=t.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(y=t.options)===null||y===void 0?void 0:y.captchaToken}}:null),xform:Ud});if(k)throw k;if(!w||!w.session||!w.user){const S=new zx;return this._returnResult({data:{user:null,session:null},error:S})}return w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),this._returnResult({data:Object.assign({},w),error:k})}catch(w){if(pn(w))return this._returnResult({data:{user:null,session:null},error:w});throw w}}async signInWithSolana(t){var r,n,a,i,l,o,c,d,f,p,y,g;let N,w;if("message"in t)N=t.message,w=t.signature;else{const{chain:k,wallet:S,statement:O,options:E}=t;let D;if(Yl())if(typeof S=="object")D=S;else{const W=window;if("solana"in W&&typeof W.solana=="object"&&("signIn"in W.solana&&typeof W.solana.signIn=="function"||"signMessage"in W.solana&&typeof W.solana.signMessage=="function"))D=W.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof S!="object"||!(E!=null&&E.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");D=S}const q=new URL((r=E==null?void 0:E.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in D&&D.signIn){const W=await D.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},E==null?void 0:E.signInWithSolana),{version:"1",domain:q.host,uri:q.href}),O?{statement:O}:null));let R;if(Array.isArray(W)&&W[0]&&typeof W[0]=="object")R=W[0];else if(W&&typeof W=="object"&&"signedMessage"in W&&"signature"in W)R=W;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in R&&"signature"in R&&(typeof R.signedMessage=="string"||R.signedMessage instanceof Uint8Array)&&R.signature instanceof Uint8Array)N=typeof R.signedMessage=="string"?R.signedMessage:new TextDecoder().decode(R.signedMessage),w=R.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in D)||typeof D.signMessage!="function"||!("publicKey"in D)||typeof D!="object"||!D.publicKey||!("toBase58"in D.publicKey)||typeof D.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");N=[`${q.host} wants you to sign in with your Solana account:`,D.publicKey.toBase58(),...O?["",O,""]:[""],"Version: 1",`URI: ${q.href}`,`Issued At: ${(a=(n=E==null?void 0:E.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((i=E==null?void 0:E.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${E.signInWithSolana.notBefore}`]:[],...!((l=E==null?void 0:E.signInWithSolana)===null||l===void 0)&&l.expirationTime?[`Expiration Time: ${E.signInWithSolana.expirationTime}`]:[],...!((o=E==null?void 0:E.signInWithSolana)===null||o===void 0)&&o.chainId?[`Chain ID: ${E.signInWithSolana.chainId}`]:[],...!((c=E==null?void 0:E.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${E.signInWithSolana.nonce}`]:[],...!((d=E==null?void 0:E.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${E.signInWithSolana.requestId}`]:[],...!((p=(f=E==null?void 0:E.signInWithSolana)===null||f===void 0?void 0:f.resources)===null||p===void 0)&&p.length?["Resources",...E.signInWithSolana.resources.map(R=>`- ${R}`)]:[]].join(`
`);const W=await D.signMessage(new TextEncoder().encode(N),"utf8");if(!W||!(W instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");w=W}}try{const{data:k,error:S}=await Dn(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:N,signature:Yf(w)},!((y=t.options)===null||y===void 0)&&y.captchaToken?{gotrue_meta_security:{captcha_token:(g=t.options)===null||g===void 0?void 0:g.captchaToken}}:null),xform:Ud});if(S)throw S;if(!k||!k.session||!k.user){const O=new zx;return this._returnResult({data:{user:null,session:null},error:O})}return k.session&&(await this._saveSession(k.session),await this._notifyAllSubscribers("SIGNED_IN",k.session)),this._returnResult({data:Object.assign({},k),error:S})}catch(k){if(pn(k))return this._returnResult({data:{user:null,session:null},error:k});throw k}}async _exchangeCodeForSession(t){const r=await Ff(this.storage,`${this.storageKey}-code-verifier`),[n,a]=(r??"").split("/");try{const{data:i,error:l}=await Dn(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:Ud});if(await Ph(this.storage,`${this.storageKey}-code-verifier`),l)throw l;if(!i||!i.session||!i.user){const o=new zx;return this._returnResult({data:{user:null,session:null,redirectType:null},error:o})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign(Object.assign({},i),{redirectType:a??null}),error:l})}catch(i){if(pn(i))return this._returnResult({data:{user:null,session:null,redirectType:null},error:i});throw i}}async signInWithIdToken(t){try{const{options:r,provider:n,token:a,access_token:i,nonce:l}=t,o=await Dn(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:a,access_token:i,nonce:l,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Ud}),{data:c,error:d}=o;if(d)return this._returnResult({data:{user:null,session:null},error:d});if(!c||!c.session||!c.user){const f=new zx;return this._returnResult({data:{user:null,session:null},error:f})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:c,error:d})}catch(r){if(pn(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(t){var r,n,a,i,l;try{if("email"in t){const{email:o,options:c}=t;let d=null,f=null;this.flowType==="pkce"&&([d,f]=await qx(this.storage,this.storageKey));const{error:p}=await Dn(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:d,code_challenge_method:f},redirectTo:c==null?void 0:c.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:p})}if("phone"in t){const{phone:o,options:c}=t,{data:d,error:f}=await Dn(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(a=c==null?void 0:c.data)!==null&&a!==void 0?a:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(l=c==null?void 0:c.channel)!==null&&l!==void 0?l:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:f})}throw new h2("You must provide either an email or phone number.")}catch(o){if(pn(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async verifyOtp(t){var r,n;try{let a,i;"options"in t&&(a=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:l,error:o}=await Dn(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:a,xform:Ud});if(o)throw o;if(!l)throw new Error("An error occurred on token verification.");const c=l.session,d=l.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),this._returnResult({data:{user:d,session:c},error:null})}catch(a){if(pn(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithSSO(t){var r,n,a;try{let i=null,l=null;this.flowType==="pkce"&&([i,l]=await qx(this.storage,this.storageKey));const o=await Dn(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((a=t==null?void 0:t.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:l}),headers:this.headers,xform:QQ});return this._returnResult(o)}catch(i){if(pn(i))return this._returnResult({data:null,error:i});throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new Bd;const{error:a}=await Dn(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:a})})}catch(t){if(pn(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:a,options:i}=t,{error:l}=await Dn(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:l})}else if("phone"in t){const{phone:n,type:a,options:i}=t,{data:l,error:o}=await Dn(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:o})}throw new h2("You must provide either an email or phone number and a type")}catch(r){if(pn(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await Ff(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<g4:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const l=await Ff(this.userStorage,this.storageKey+"-user");l!=null&&l.user?t.user=l.user:t.user=y4()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const l={value:this.suppressGetSessionWarning};t.user=GQ(t.user,l),l.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{session:null},error:i}):this._returnResult({data:{session:a},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await Dn(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Bh}):await this._useSession(async r=>{var n,a,i;const{data:l,error:o}=r;if(o)throw o;return!(!((n=l.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Bd}:await Dn(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(a=l.session)===null||a===void 0?void 0:a.access_token)!==null&&i!==void 0?i:void 0,xform:Bh})})}catch(r){if(pn(r))return jQ(r)&&(await this._removeSession(),await Ph(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:a,error:i}=n;if(i)throw i;if(!a.session)throw new Bd;const l=a.session;let o=null,c=null;this.flowType==="pkce"&&t.email!=null&&([o,c]=await qx(this.storage,this.storageKey));const{data:d,error:f}=await Dn(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:o,code_challenge_method:c}),jwt:l.access_token,xform:Bh});if(f)throw f;return l.user=d.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),this._returnResult({data:{user:l.user},error:null})})}catch(n){if(pn(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Bd;const r=Date.now()/1e3;let n=r,a=!0,i=null;const{payload:l}=v4(t.access_token);if(l.exp&&(n=l.exp,a=n<=r),a){const{data:o,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!o)return{data:{user:null,session:null},error:null};i=o}else{const{data:o,error:c}=await this._getUser(t.access_token);if(c)throw c;i={access_token:t.access_token,refresh_token:t.refresh_token,user:o.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(r){if(pn(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:l,error:o}=r;if(o)throw o;t=(n=l.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new Bd;const{data:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{user:null,session:null},error:i}):a?this._returnResult({data:{user:a.user,session:a},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(pn(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(t,r){try{if(!Yl())throw new f2("No browser detected.");if(t.error||t.error_description||t.error_code)throw new f2(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new LT("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new f2("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new LT("No code detected.");const{data:O,error:E}=await this._exchangeCodeForSession(t.code);if(E)throw E;const D=new URL(window.location.href);return D.searchParams.delete("code"),window.history.replaceState(window.history.state,"",D.toString()),{data:{session:O.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:a,access_token:i,refresh_token:l,expires_in:o,expires_at:c,token_type:d}=t;if(!i||!o||!l||!d)throw new f2("No session defined in URL");const f=Math.round(Date.now()/1e3),p=parseInt(o);let y=f+p;c&&(y=parseInt(c));const g=y-f;g*1e3<=r1&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${g}s, should have been closer to ${p}s`);const N=y-p;f-N>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",N,y,f):f-N<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",N,y,f);const{data:w,error:k}=await this._getUser(i);if(k)throw k;const S={provider_token:n,provider_refresh_token:a,access_token:i,expires_in:p,expires_at:y,refresh_token:l,token_type:d,user:w.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:S,redirectType:t.type},error:null})}catch(n){if(pn(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await Ff(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:a,error:i}=r;if(i)return this._returnResult({error:i});const l=(n=a.session)===null||n===void 0?void 0:n.access_token;if(l){const{error:o}=await this.admin.signOut(l,t);if(o&&!(SQ(o)&&(o.status===404||o.status===401||o.status===403)))return this._returnResult({error:o})}return t!=="others"&&(await this._removeSession(),await Ph(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const r=DQ(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,a;try{const{data:{session:i},error:l}=r;if(l)throw l;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let n=null,a=null;this.flowType==="pkce"&&([n,a]=await qx(this.storage,this.storageKey,!0));try{return await Dn(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:a,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(pn(i))return this._returnResult({data:null,error:i});throw i}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(r){if(pn(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var r;try{const{data:n,error:a}=await this._useSession(async i=>{var l,o,c,d,f;const{data:p,error:y}=i;if(y)throw y;const g=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(l=t.options)===null||l===void 0?void 0:l.redirectTo,scopes:(o=t.options)===null||o===void 0?void 0:o.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await Dn(this.fetch,"GET",g,{headers:this.headers,jwt:(f=(d=p.session)===null||d===void 0?void 0:d.access_token)!==null&&f!==void 0?f:void 0})});if(a)throw a;return Yl()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),this._returnResult({data:{provider:t.provider,url:n==null?void 0:n.url},error:null})}catch(n){if(pn(n))return this._returnResult({data:{provider:t.provider,url:null},error:n});throw n}}async linkIdentityIdToken(t){return await this._useSession(async r=>{var n;try{const{error:a,data:{session:i}}=r;if(a)throw a;const{options:l,provider:o,token:c,access_token:d,nonce:f}=t,p=await Dn(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=i==null?void 0:i.access_token)!==null&&n!==void 0?n:void 0,body:{provider:o,id_token:c,access_token:d,nonce:f,link_identity:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Ud}),{data:y,error:g}=p;return g?this._returnResult({data:{user:null,session:null},error:g}):!y||!y.session||!y.user?this._returnResult({data:{user:null,session:null},error:new zx}):(y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("USER_UPDATED",y.session)),this._returnResult({data:y,error:g}))}catch(a){if(pn(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}})}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,a;const{data:i,error:l}=r;if(l)throw l;return await Dn(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(a=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&a!==void 0?a:void 0})})}catch(r){if(pn(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await FQ(async a=>(a>0&&await RQ(200*Math.pow(2,a-1)),this._debug(r,"refreshing attempt",a),await Dn(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Ud})),(a,i)=>{const l=200*Math.pow(2,a);return i&&b4(i)&&Date.now()+l-n<r1})}catch(n){if(this._debug(r,"error",n),pn(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),Yl()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const a=await Ff(this.storage,this.storageKey);if(a&&this.userStorage){let l=await Ff(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!l&&(l={user:a.user},await n1(this.userStorage,this.storageKey+"-user",l)),a.user=(t=l==null?void 0:l.user)!==null&&t!==void 0?t:y4()}else if(a&&!a.user&&!a.user){const l=await Ff(this.storage,this.storageKey+"-user");l&&(l!=null&&l.user)?(a.user=l.user,await Ph(this.storage,this.storageKey+"-user"),await n1(this.storage,this.storageKey,a)):a.user=y4()}if(this._debug(n,"session from storage",a),!this._isValidSession(a)){this._debug(n,"session is not valid"),a!==null&&await this._removeSession();return}const i=((r=a.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<g4;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${g4}s`),i){if(this.autoRefreshToken&&a.refresh_token){const{error:l}=await this._callRefreshToken(a.refresh_token);l&&(console.error(l),b4(l)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",l),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:l,error:o}=await this._getUser(a.access_token);!o&&(l!=null&&l.user)?(a.user=l.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(l){console.error("Error getting user data:",l),this._debug(n,"error getting user data, skipping SIGNED_IN notification",l)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(n,"error",a),console.error(a);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new Bd;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new Fw;const{data:i,error:l}=await this._refreshAccessToken(t);if(l)throw l;if(!i.session)throw new Bd;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const o={data:i.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(i){if(this._debug(a,"error",i),pn(i)){const l={data:null,error:i};return b4(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(l),l}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(t,r,n=!0){const a=`#_notifyAllSubscribers(${t})`;this._debug(a,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],l=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(t,r)}catch(c){i.push(c)}});if(await Promise.all(l),i.length>0){for(let o=0;o<i.length;o+=1)console.error(i[o]);throw i[0]}}finally{this._debug(a,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await n1(this.userStorage,this.storageKey+"-user",{user:r.user});const a=Object.assign({},r);delete a.user;const i=zT(a);await n1(this.storage,this.storageKey,i)}else{const a=zT(r);await n1(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),await Ph(this.storage,this.storageKey),await Ph(this.storage,this.storageKey+"-code-verifier"),await Ph(this.storage,this.storageKey+"-user"),this.userStorage&&await Ph(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Yl()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),r1);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((n.expires_at*1e3-t)/r1);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${r1}ms, refresh threshold is ${g_} ticks`),a<=g_&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof rF)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Yl()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const a=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&a.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&a.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,l]=await qx(this.storage,this.storageKey),o=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(l)}`});a.push(o.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);a.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&a.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${a.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;return i?this._returnResult({data:null,error:i}):await Dn(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(pn(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,a;const{data:i,error:l}=r;if(l)return this._returnResult({data:null,error:l});const o=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:c,error:d}=await Dn(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return d?this._returnResult({data:null,error:d}):(t.factorType==="totp"&&c.type==="totp"&&(!((a=c==null?void 0:c.totp)===null||a===void 0)&&a.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),this._returnResult({data:c,error:null}))})}catch(r){if(pn(r))return this._returnResult({data:null,error:r});throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;if(i)return this._returnResult({data:null,error:i});const l=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?mJ(t.webauthn.credential_response):xJ(t.webauthn.credential_response)})}:{code:t.code}),{data:o,error:c}=await Dn(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:l,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return c?this._returnResult({data:null,error:c}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),this._returnResult({data:o,error:c}))})}catch(r){if(pn(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;if(i)return this._returnResult({data:null,error:i});const l=await Dn(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});if(l.error)return l;const{data:o}=l;if(o.type!=="webauthn")return{data:o,error:null};switch(o.webauthn.type){case"create":return{data:Object.assign(Object.assign({},o),{webauthn:Object.assign(Object.assign({},o.webauthn),{credential_options:Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:hJ(o.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},o),{webauthn:Object.assign(Object.assign({},o.webauthn),{credential_options:Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:fJ(o.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(pn(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){var t;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const a={all:[],phone:[],totp:[],webauthn:[]};for(const i of(t=r==null?void 0:r.factors)!==null&&t!==void 0?t:[])a.all.push(i),i.status==="verified"&&a[i.factor_type].push(i);return{data:a,error:null}}async _getAuthenticatorAssuranceLevel(){var t,r;const{data:{session:n},error:a}=await this.getSession();if(a)return this._returnResult({data:null,error:a});if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=v4(n.access_token);let l=null;i.aal&&(l=i.aal);let o=l;((r=(t=n.user.factors)===null||t===void 0?void 0:t.filter(f=>f.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(o="aal2");const d=i.amr||[];return{data:{currentLevel:l,nextLevel:o,currentAuthenticationMethods:d},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async r=>{const{data:{session:n},error:a}=r;return a?this._returnResult({data:null,error:a}):n?await Dn(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:n.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new Bd})})}catch(r){if(pn(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:a},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!a)return this._returnResult({data:null,error:new Bd});const l=await Dn(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"approve"},xform:o=>({data:o,error:null})});return l.data&&l.data.redirect_url&&Yl()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(l.data.redirect_url),l})}catch(n){if(pn(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:a},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!a)return this._returnResult({data:null,error:new Bd});const l=await Dn(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"deny"},xform:o=>({data:o,error:null})});return l.data&&l.data.redirect_url&&Yl()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(l.data.redirect_url),l})}catch(n){if(pn(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(o=>o.kid===t);if(n)return n;const a=Date.now();if(n=this.jwks.keys.find(o=>o.kid===t),n&&this.jwks_cached_at+NQ>a)return n;const{data:i,error:l}=await Dn(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(l)throw l;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=a,n=i.keys.find(o=>o.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:g,error:N}=await this.getSession();if(N||!g.session)return this._returnResult({data:null,error:N});n=g.session.access_token}const{header:a,payload:i,signature:l,raw:{header:o,payload:c}}=v4(n);r!=null&&r.allowExpired||VQ(i.exp);const d=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!d){const{error:g}=await this.getUser(n);if(g)throw g;return{data:{claims:i,header:a,signature:l},error:null}}const f=WQ(a.alg),p=await crypto.subtle.importKey("jwk",d,f,!0,["verify"]);if(!await crypto.subtle.verify(f,p,l,PQ(`${o}.${c}`)))throw new y_("Invalid JWT signature");return{data:{claims:i,header:a,signature:l},error:null}}catch(n){if(pn(n))return this._returnResult({data:null,error:n});throw n}}}$g.nextInstanceID={};const _J=$g;class SJ extends _J{constructor(t){super(t)}}class jJ{constructor(t,r,n){var a,i,l;this.supabaseUrl=t,this.supabaseKey=r;const o=bQ(t);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",o),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",o),this.storageUrl=new URL("storage/v1",o),this.functionsUrl=new URL("functions/v1",o);const c=`sb-${o.hostname.split(".")[0]}-auth-token`,d={db:dQ,realtime:hQ,auth:Object.assign(Object.assign({},uQ),{storageKey:c}),global:cQ},f=gQ(n??{},d);this.storageKey=(a=f.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(i=f.global.headers)!==null&&i!==void 0?i:{},f.accessToken?(this.accessToken=f.accessToken,this.auth=new Proxy({},{get:(p,y)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(y)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((l=f.auth)!==null&&l!==void 0?l:{},this.headers,f.global.fetch),this.fetch=xQ(r,this._getAccessToken.bind(this),f.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},f.realtime)),this.rest=new vZ(new URL("rest/v1",o).href,{headers:this.headers,schema:f.db.schema,fetch:this.fetch}),this.storage=new iQ(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),f.accessToken||this._listenForAuthEvents()}get functions(){return new xZ(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t,r;if(this.accessToken)return await this.accessToken();const{data:n}=await this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:a,userStorage:i,storageKey:l,flowType:o,lock:c,debug:d,throwOnError:f},p,y){const g={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new SJ({url:this.authUrl.href,headers:Object.assign(Object.assign({},g),p),storageKey:l,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:a,userStorage:i,flowType:o,lock:c,debug:d,throwOnError:f,fetch:y,hasCustomAuthorizationHeader:Object.keys(this.headers).some(N=>N.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new LZ(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const CJ=(e,t,r)=>new jJ(e,t,r);function AJ(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}AJ()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const sF="https://uvaxkefgehiokxkvaqge.supabase.co",EJ="replace_with_real_anon_key_for_production",iF=sF.includes("placeholder");if(iF)throw new Error("PRODUCTION BUILD ERROR: Missing Supabase env. Set VITE_SUPABASE_URL and VITE_SUPABASE_ANON_KEY.");const Ot=CJ(sF,EJ,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0}}),TJ=Object.freeze(Object.defineProperty({__proto__:null,IS_OFFLINE:iF,supabase:Ot},Symbol.toStringTag,{value:"Module"})),_n=(e,t)=>({ok:!0,data:e,meta:t}),Ct=e=>{var t,r;try{typeof window<"u"&&((r=(t=import.meta)==null?void 0:t.env)!=null&&r.DEV)&&(window.__repoErrors=window.__repoErrors||[],window.__repoErrors.push(e),window.dispatchEvent(new CustomEvent("repo-error",{detail:e})))}catch{}return{ok:!1,error:e}};typeof window<"u"&&(window.__repoErrors=window.__repoErrors||[]);const OJ="audit_logs";let jg=[],h1=null,PJ=10,IJ=2e3,GT=!1;function DJ({userId:e,input:t}){return{user_id:e,action:t.action,table_name:t.tableName??null,record_id:t.recordId??null,old_data:t.oldData?JSON.stringify(t.oldData):null,new_data:t.newData?JSON.stringify(t.newData):null,ip_address:t.ipAddress??null,user_agent:t.userAgent||(typeof navigator<"u"?navigator.userAgent:null)}}async function _6(){var t,r;if(jg.length===0)return;const e=jg;jg=[];try{const n=e.map(DJ);await Ot.from(OJ).insert(n)}catch(n){(r=(t=import.meta)==null?void 0:t.env)!=null&&r.DEV&&console.warn("auditQueue flush failed",n)}}function MJ(){h1||(h1=setTimeout(async()=>{h1=null,await _6()},IJ))}function LJ(){if(GT||typeof window>"u")return;GT=!0;const e=()=>{_6()};window.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&e()}),window.addEventListener("beforeunload",e)}function RJ(e,t){if(LJ(),jg.push({userId:e,input:t}),jg.length>=PJ){_6(),h1&&(clearTimeout(h1),h1=null);return}MJ()}const FJ="audit_logs";async function Bs(e,t){var r,n;try{RJ(e,t)}catch(a){(n=(r=import.meta)==null?void 0:r.env)!=null&&n.DEV&&console.warn("Audit log exception",a)}}async function BJ(e){try{const t=(e==null?void 0:e.pageSize)||(e==null?void 0:e.limit)||50,r=e!=null&&e.page&&e.page>0?e.page:1,n=(r-1)*t,a=n+t-1,i=e!=null&&e.includeUser?"audit_logs_with_user":FJ;let l=Ot.from(i).select("*",{count:"exact"}).order("created_at",{ascending:!1}).range(n,a);e!=null&&e.action&&(l=l.eq("action",e.action)),e!=null&&e.startDate&&(l=l.gte("created_at",e.startDate)),e!=null&&e.endDate&&(l=l.lte("created_at",e.endDate));const{data:o,error:c,count:d}=await l;return c?Ct({code:"supabase",message:"Khng th ti audit logs",cause:c}):_n(o||[],{total:d,page:r,pageSize:t})}catch(t){return Ct({code:"network",message:"Li mng khi ti audit logs",cause:t})}}const w_="cash_transactions";async function UJ(e){try{let t=Ot.from(w_).select("*").order("date",{ascending:!1});e!=null&&e.branchId&&(t=t.eq("branchId",e.branchId)),e!=null&&e.startDate&&(t=t.gte("date",e.startDate)),e!=null&&e.endDate&&(t=t.lte("date",e.endDate)),e!=null&&e.limit&&(t=t.limit(e.limit)),e!=null&&e.type&&(t=t.eq("type",e.type));const{data:r,error:n}=await t;return n?Ct({code:"supabase",message:"Khng th ti s qu",cause:n}):_n(r||[])}catch(t){return Ct({code:"network",message:"Li kt ni khi ti s qu",cause:t})}}async function k_(e){var t;try{if(!e.amount||e.amount<=0)return Ct({code:"validation",message:"S tin phi > 0"});if(!e.branchId)return Ct({code:"validation",message:"Thiu chi nhnh"});if(!e.paymentSourceId)return Ct({code:"validation",message:"Thiu ngun tin"});if(!e.type)return Ct({code:"validation",message:"Thiu loi thu/chi"});const r={amount:e.amount,branchId:e.branchId,paymentSource:e.paymentSourceId,paymentSourceId:e.paymentSourceId,category:e.category||(e.type==="income"?"general_income":"general_expense"),date:e.date||new Date().toISOString(),notes:e.notes,description:e.notes,type:e.type,saleId:e.saleId,workOrderId:e.workOrderId,payrollRecordId:e.payrollRecordId,loanPaymentId:e.loanPaymentId,supplierId:e.supplierId,customerId:e.customerId,recipient:e.recipient},{data:n,error:a}=await Ot.from(w_).insert([r]).select().single();if(a||!n)return Ct({code:"supabase",message:"Ghi s qu tht bi",cause:a});const i=n;try{if(!r.saleId&&!r.workOrderId&&!r.payrollRecordId&&!r.loanPaymentId){const{data:o}=await Ot.auth.getUser(),c=((t=o==null?void 0:o.user)==null?void 0:t.id)||null;Bs(c,{action:"cash.manual",tableName:w_,recordId:i.id,oldData:null,newData:i})}}catch{}return _n(i)}catch(r){return Ct({code:"network",message:"Li kt ni khi ghi s qu",cause:r})}}const k4="payment_sources";async function N_(e,t,r){var n;try{const{data:a,error:i}=await Ot.from(k4).select("*").eq("id",e).single();if(i||!a)return Ct({code:"supabase",message:"Khng tm thy ngun tin",cause:i});const l=a.balance||{},o={...l,[t]:(l[t]||0)+r},{data:c,error:d}=await Ot.from(k4).update({balance:o}).eq("id",e).select().single();if(d||!c)return Ct({code:"supabase",message:"Cp nht s d tht bi",cause:d});let f=null;try{const{data:p}=await Ot.auth.getUser();f=((n=p==null?void 0:p.user)==null?void 0:n.id)||null}catch{}return await Bs(f,{action:"payment_source.balance_adjust",tableName:k4,recordId:e,oldData:{balance:l},newData:{balance:o,delta:r,branchId:t}}),_n(c)}catch(a){return Ct({code:"network",message:"Li kt ni khi cp nht s d",cause:a})}}function va(e){switch(e.code){case"network":return"Mt kt ni my ch. Vui lng kim tra mng.";case"validation":return e.message;case"not_found":return"Khng tm thy bn ghi.";case"supabase":return"C li d liu. Th li hoc lin h qun tr.";default:return"Li khng xc nh."}}const lF=T.createContext(void 0),zJ=({children:e})=>{const[t]=T.useState("CN1"),n=(()=>{try{const Ee=localStorage.getItem("motocare-data");if(Ee)return JSON.parse(Ee)}catch(Ee){console.error("Error loading from localStorage:",Ee)}return{}})(),[a,i]=T.useState(()=>(n==null?void 0:n.parts)||[]),[l,o]=T.useState(()=>(n==null?void 0:n.customers)||[]),[c,d]=T.useState(()=>(n==null?void 0:n.suppliers)||[]),[f,p]=T.useState(()=>(n==null?void 0:n.sales)||[]),[y,g]=T.useState(()=>(n==null?void 0:n.workOrders)||[]),[N,w]=T.useState(()=>(n==null?void 0:n.cartItems)||[]),[k,S]=T.useState(()=>(n==null?void 0:n.paymentSources)||[{id:"cash",name:"Tin mt",balance:{CN1:0},isDefault:!0},{id:"bank",name:"Ti khon ngn hng",balance:{CN1:0}}]),[O,E]=T.useState(()=>(n==null?void 0:n.cashTransactions)||[]),[D,q]=T.useState(()=>(n==null?void 0:n.inventoryTransactions)||[]),[W,R]=T.useState(()=>(n==null?void 0:n.employees)||[]),[U,z]=T.useState(()=>(n==null?void 0:n.payrollRecords)||[]),[Z,H]=T.useState(()=>(n==null?void 0:n.loans)||[]),[K,J]=T.useState(()=>(n==null?void 0:n.loanPayments)||[]),[ae,se]=T.useState(()=>(n==null?void 0:n.customerDebts)||[]),[ue,fe]=T.useState(()=>(n==null?void 0:n.supplierDebts)||[]);T.useEffect(()=>{const Ee={parts:a,customers:l,suppliers:c,sales:f,workOrders:y,cartItems:N,paymentSources:k,cashTransactions:O,inventoryTransactions:D,employees:W,payrollRecords:U,loans:Z,loanPayments:K,customerDebts:ae,supplierDebts:ue};localStorage.setItem("motocare-data",JSON.stringify(Ee))},[a,l,c,f,y,N,k,O,D,W,U,Z,K,ae,ue]);const ke=T.useCallback(Ee=>{i(Me=>{if(Ee.id)return Me.map(lt=>lt.id===Ee.id?{...lt,...Ee}:lt);const ye=`PART-${Date.now()}-${Math.random().toString(16).slice(2)}`;return[{id:ye,name:Ee.name||"Tn ph tng",sku:Ee.sku||ye,stock:Ee.stock||{[t]:0},retailPrice:Ee.retailPrice||{[t]:0},wholesalePrice:Ee.wholesalePrice||{[t]:0},category:Ee.category,description:Ee.description,warrantyPeriod:Ee.warrantyPeriod,created_at:new Date().toISOString()},...Me]})},[t]),_e=T.useCallback(Ee=>{i(Me=>Me.filter(ye=>ye.id!==Ee))},[]),Le=T.useCallback(Ee=>{o(Me=>Ee.id?Me.findIndex(nt=>nt.id===Ee.id)>=0?Me.map(nt=>nt.id===Ee.id?{...nt,...Ee}:nt):[{id:Ee.id,name:Ee.name||"Khch hng",phone:Ee.phone,created_at:new Date().toISOString(),...Ee},...Me]:[{id:`CUS-${Date.now()}-${Math.random().toString(16).slice(2)}`,name:Ee.name||"Khch hng",phone:Ee.phone,created_at:new Date().toISOString(),...Ee},...Me])},[]),xe=T.useCallback(Ee=>{d(Me=>Ee.id?Me.map(lt=>lt.id===Ee.id?{...lt,...Ee}:lt):[{id:`SUP-${Date.now()}-${Math.random().toString(16).slice(2)}`,name:Ee.name||"Nh cung cp",phone:Ee.phone,email:Ee.email,address:Ee.address,created_at:new Date().toISOString()},...Me])},[]),B=T.useCallback(Ee=>{g(Me=>Me.find(at=>at.id===Ee.id)?Me.map(at=>at.id===Ee.id?Ee:at):[Ee,...Me])},[]),ee=T.useCallback(()=>w([]),[]),Y=T.useCallback(Ee=>{if(!Ee.items.length)return;const Me=Ee.items.reduce((We,Kt)=>We+Kt.sellingPrice*Kt.quantity,0),ye=Ee.items.reduce((We,Kt)=>We+(Kt.discount||0),0),at=Me-ye-Ee.discount,lt=`SALE-${Date.now()}`,ut={id:lt,date:new Date().toISOString(),items:Ee.items,subtotal:Me,discount:Ee.discount+ye,total:at,customer:Ee.customer,paymentMethod:Ee.paymentMethod,userId:"local-user",userName:"Local User",branchId:t,cashTransactionId:void 0};p(We=>[ut,...We]),i(We=>We.map(Kt=>{const Dt=Ee.items.filter(fr=>fr.partId===Kt.id).reduce((fr,xr)=>fr+xr.quantity,0);return Dt?{...Kt,stock:{...Kt.stock,[t]:(Kt.stock[t]||0)-Dt}}:Kt}));const ot={id:`CT-${Date.now()}`,type:"income",date:new Date().toISOString(),amount:at,notes:Ee.note||"Thu tin bn hng",paymentSourceId:Ee.paymentMethod,branchId:t,category:"sale_income",saleId:lt};E(We=>[ot,...We]),S(We=>We.map(Kt=>Kt.id===Ee.paymentMethod?{...Kt,balance:{...Kt.balance,[t]:(Kt.balance[t]||0)+at}}:Kt)),ee()},[ee,t]),re=T.useCallback(Ee=>{const Me=f.find(ye=>ye.id===Ee);Me&&(p(ye=>ye.filter(at=>at.id!==Ee)),i(ye=>ye.map(at=>{const lt=Me.items.filter(ut=>ut.partId===at.id).reduce((ut,nt)=>ut+nt.quantity,0);return lt?{...at,stock:{...at.stock,[t]:(at.stock[t]||0)+lt}}:at})),E(ye=>ye.filter(at=>at.saleId!==Ee)),S(ye=>ye.map(at=>at.id===Me.paymentMethod?{...at,balance:{...at.balance,[t]:(at.balance[t]||0)-Me.total}}:at)))},[f,t]),Q=T.useCallback(Ee=>{const ye={id:`INV-${Date.now()}-${Math.random().toString(16).slice(2)}`,...Ee};q(at=>[ye,...at])},[]),Ce=T.useCallback(Ee=>{R(Me=>Ee.id?Me.map(lt=>lt.id===Ee.id?{...lt,...Ee}:lt):[{id:`EMP-${Date.now()}-${Math.random().toString(16).slice(2)}`,name:Ee.name||"Nhn vin",phone:Ee.phone,position:Ee.position||"",baseSalary:Ee.baseSalary||0,startDate:Ee.startDate||new Date().toISOString(),status:Ee.status||"active",created_at:new Date().toISOString()},...Me])},[]),me=T.useCallback(Ee=>{z(Me=>Me.find(at=>at.id===Ee.id)?Me.map(at=>at.id===Ee.id?Ee:at):[Ee,...Me])},[]),ie=T.useCallback(Ee=>{H(Me=>Ee.id?Me.map(lt=>lt.id===Ee.id?{...lt,...Ee}:lt):[{id:`LOAN-${Date.now()}-${Math.random().toString(16).slice(2)}`,lenderName:Ee.lenderName||"",loanType:Ee.loanType||"bank",principal:Ee.principal||0,interestRate:Ee.interestRate||0,term:Ee.term||0,startDate:Ee.startDate||new Date().toISOString(),endDate:Ee.endDate||new Date().toISOString(),monthlyPayment:Ee.monthlyPayment||0,remainingAmount:Ee.remainingAmount||Ee.principal||0,status:Ee.status||"active",purpose:Ee.purpose,collateral:Ee.collateral,branchId:t,created_at:new Date().toISOString()},...Me])},[t]),je=T.useCallback(Ee=>{J(Me=>Me.find(at=>at.id===Ee.id)?Me.map(at=>at.id===Ee.id?Ee:at):[Ee,...Me])},[]),be=T.useCallback((Ee,Me,ye)=>{let at=0;se(lt=>lt.map(ut=>{if(Ee.includes(ut.customerId)&&ut.branchId===t){const nt=ut.remainingAmount;return at+=nt,{...ut,paidAmount:ut.totalAmount,remainingAmount:0,status:"paid"}}return ut}).filter(ut=>ut.remainingAmount>0)),at>0&&(async()=>{var We;const{data:lt}=await Ot.auth.getUser(),ut=((We=lt==null?void 0:lt.user)==null?void 0:We.id)||null,nt=await k_({type:"income",amount:at,branchId:t,paymentSourceId:Me,date:ye,category:"debt_collection",notes:`Thu ht n cho ${Ee.length} khch hng`,recipient:`Thu n ${Ee.length} khch hng`});if(!nt.ok){Xe.error(va(nt.error));return}const ot=await N_(Me,t,at);ot.ok||Xe.error(va(ot.error)),Bs(ut,{action:"debt.customer_pay",tableName:"customer_debts",oldData:null,newData:{customerIds:Ee,totalPaid:at,paymentMethod:Me,timestamp:ye}})})()},[t]),le=T.useCallback((Ee,Me,ye)=>{let at=0;fe(lt=>lt.map(ut=>{if(Ee.includes(ut.supplierId)&&ut.branchId===t){const nt=ut.remainingAmount;return at+=nt,{...ut,paidAmount:ut.totalAmount,remainingAmount:0,status:"paid"}}return ut}).filter(ut=>ut.remainingAmount>0)),at>0&&(async()=>{var We;const{data:lt}=await Ot.auth.getUser(),ut=((We=lt==null?void 0:lt.user)==null?void 0:We.id)||null,nt=await k_({type:"expense",amount:at,branchId:t,paymentSourceId:Me,date:ye,category:"debt_payment",notes:`Tr ht n cho ${Ee.length} nh cung cp`,recipient:`Tr n ${Ee.length} nh cung cp`});if(!nt.ok){Xe.error(va(nt.error));return}const ot=await N_(Me,t,-at);ot.ok||Xe.error(va(ot.error)),Bs(ut,{action:"debt.supplier_pay",tableName:"supplier_debts",oldData:null,newData:{supplierIds:Ee,totalPaid:at,paymentMethod:Me,timestamp:ye}})})()},[t]);return s.jsx(lF.Provider,{value:{parts:a,customers:l,suppliers:c,sales:f,workOrders:y,cartItems:N,paymentSources:k,cashTransactions:O,inventoryTransactions:D,employees:W,payrollRecords:U,loans:Z,loanPayments:K,customerDebts:ae,supplierDebts:ue,currentBranchId:t,setParts:i,upsertPart:ke,deletePart:_e,setCustomers:o,upsertCustomer:Le,setSuppliers:d,upsertSupplier:xe,setWorkOrders:g,upsertWorkOrder:B,setCartItems:w,clearCart:ee,deleteSale:re,finalizeSale:Y,setPaymentSources:S,setCashTransactions:E,recordInventoryTransaction:Q,setEmployees:R,upsertEmployee:Ce,setPayrollRecords:z,upsertPayrollRecord:me,setLoans:H,upsertLoan:ie,setLoanPayments:J,upsertLoanPayment:je,setCustomerDebts:se,setSupplierDebts:fe,payCustomerDebts:be,paySupplierDebts:le},children:e})},Ba=()=>{const e=T.useContext(lF);if(!e)throw new Error("useAppContext phi dng bn trong AppProvider");return e},oF=T.createContext(void 0),qJ=({children:e})=>{const[t,r]=T.useState(()=>{const a=localStorage.getItem("theme");return a==="light"||a==="dark"?a:"light"});T.useEffect(()=>{localStorage.setItem("theme",t),t==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[t]);const n=()=>{r(a=>a==="light"?"dark":"light")};return s.jsx(oF.Provider,{value:{theme:t,toggleTheme:n},children:e})},HJ=()=>{const e=T.useContext(oF);if(!e)throw new Error("useTheme must be used within ThemeProvider");return e},cF=T.createContext(void 0),Dc=()=>{const e=T.useContext(cF);if(!e)throw new Error("useAuth must be used within AuthProvider");return e},dF=({children:e})=>{const[t,r]=T.useState(null),[n,a]=T.useState(null),[i,l]=T.useState(null),[o,c]=T.useState(!0),[d,f]=T.useState(null);T.useEffect(()=>{Ot.auth.getSession().then(({data:{session:O}})=>{l(O),r((O==null?void 0:O.user)??null),O!=null&&O.user?p(O.user.id):c(!1)});const k=async(O,E)=>{l(E),r((E==null?void 0:E.user)??null),E!=null&&E.user?p(E.user.id):(a(null),c(!1))},{data:{subscription:S}}=Ot.auth.onAuthStateChange(k);return()=>S.unsubscribe()},[]);const p=async k=>{try{let{data:S,error:O}=await Ot.from("profiles").select("*").eq("id",k).maybeSingle();if(O&&O.code!=="PGRST116")throw O;if(!S){const E=await Ot.from("user_profiles").select("*").eq("id",k).maybeSingle();if(S=E.data,O=E.error,O&&O.code!=="PGRST116")throw O}if(O)throw O;a(S||null)}catch(S){console.error("Error loading user profile:",S),a(null),f("Khng th ti h s ngi dng")}finally{c(!1)}},w={user:t,profile:n,session:i,loading:o,error:d,signIn:async(k,S)=>{var q;const{error:O,data:E}=await Ot.auth.signInWithPassword({email:k,password:S});if(O)throw O;f(null);const D=((q=E==null?void 0:E.user)==null?void 0:q.id)||null;Bs(D,{action:"auth.login"})},signOut:async()=>{const k=(t==null?void 0:t.id)||null,{error:S}=await Ot.auth.signOut();if(S)throw S;f(null),Bs(k,{action:"auth.logout"})},hasRole:k=>n?k.includes(n.role):!1};return s.jsx(cF.Provider,{value:w,children:e})},$J=Object.freeze(Object.defineProperty({__proto__:null,AuthProvider:dF,useAuth:Dc},Symbol.toStringTag,{value:"Module"})),VJ=()=>{const e=Pw(),{signIn:t}=Dc(),[r,n]=T.useState(""),[a,i]=T.useState(""),[l,o]=T.useState(!1),[c,d]=T.useState(""),f=async p=>{p.preventDefault(),d(""),o(!0);try{await t(r,a),Xe.success("ng nhp thnh cng!"),e("/dashboard")}catch(y){console.error("Login error:",y);const g=y.message||"ng nhp tht bi";d(g),Xe.error(g)}finally{o(!1)}};return s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-900 dark:to-slate-800 flex items-center justify-center p-4",children:s.jsxs("div",{className:"w-full max-w-md",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-white dark:bg-slate-800 rounded-2xl mb-4 shadow-lg ring-1 ring-slate-200 dark:ring-slate-700 overflow-hidden",children:s.jsx("img",{src:"/logo-smartcare.png",alt:"Nhn-Lm SmartCare",className:"w-full h-full object-contain p-1.5",onError:p=>{const y=p.currentTarget;y.style.display="none";const g=y.parentElement;if(g){g.innerHTML="";const N=document.createElement("span");N.className="text-blue-600 dark:text-blue-400",g.appendChild(N)}}})}),s.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-white mb-2",children:"MotoCare"}),s.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"H thng qun l ca hng xe my"})]}),s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-xl border border-slate-200 dark:border-slate-700 p-8",children:[s.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white mb-6",children:"ng nhp"}),c&&s.jsx("div",{className:"mb-4 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:s.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:c})}),s.jsxs("form",{onSubmit:f,className:"space-y-5",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Email"}),s.jsx("input",{type:"email",value:r,onChange:p=>n(p.target.value),placeholder:"your@email.com",required:!0,className:"w-full px-4 py-3 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white placeholder-slate-400 dark:placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Mt khu"}),s.jsx("input",{type:"password",value:a,onChange:p=>i(p.target.value),placeholder:"",required:!0,className:"w-full px-4 py-3 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white placeholder-slate-400 dark:placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"})]}),s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[s.jsx("input",{type:"checkbox",className:"w-4 h-4 text-blue-600 border-slate-300 dark:border-slate-600 rounded focus:ring-2 focus:ring-blue-500"}),s.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Ghi nh ng nhp"})]}),s.jsx("a",{href:"#",className:"text-blue-600 dark:text-blue-400 hover:underline",children:"Qun mt khu?"})]}),s.jsx("button",{type:"submit",disabled:l,className:"w-full py-3 bg-blue-600 hover:bg-blue-700 disabled:bg-slate-400 text-white font-semibold rounded-lg transition-colors shadow-lg hover:shadow-xl disabled:cursor-not-allowed",children:l?s.jsxs("span",{className:"flex items-center justify-center gap-2",children:[s.jsxs("svg",{className:"animate-spin h-5 w-5",viewBox:"0 0 24 24",fill:"none",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"ang ng nhp..."]}):"ng nhp"})]})]}),s.jsx("div",{className:"text-center mt-6",children:s.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:" 2025 MotoCare. Phin bn 1.0.0"})})]})})};/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WJ=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),uF=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim();/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var KJ={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GJ=T.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:a="",children:i,iconNode:l,...o},c)=>T.createElement("svg",{ref:c,...KJ,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:uF("lucide",a),...o},[...l.map(([d,f])=>T.createElement(d,f)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gr=(e,t)=>{const r=T.forwardRef(({className:n,...a},i)=>T.createElement(GJ,{ref:i,iconNode:t,className:uF(`lucide-${WJ(e)}`,n),...a}));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XJ=gr("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XT=gr("BadgePercent",[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"M9 9h.01",key:"1q5me6"}],["path",{d:"M15 15h.01",key:"lqbp3k"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hF=gr("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S6=gr("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YJ=gr("Battery",[["rect",{width:"16",height:"10",x:"2",y:"7",rx:"2",ry:"2",key:"1w10f2"}],["line",{x1:"22",x2:"22",y1:"11",y2:"13",key:"4dh1rd"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZJ=gr("Bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j6=gr("Bike",[["circle",{cx:"18.5",cy:"17.5",r:"3.5",key:"15x4ox"}],["circle",{cx:"5.5",cy:"17.5",r:"3.5",key:"1noe27"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["path",{d:"M12 17.5V14l-3-3 4-3 2 3h2",key:"1npguv"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QJ=gr("Bolt",[["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}],["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gi=gr("Boxes",[["path",{d:"M2.97 12.92A2 2 0 0 0 2 14.63v3.24a2 2 0 0 0 .97 1.71l3 1.8a2 2 0 0 0 2.06 0L12 19v-5.5l-5-3-4.03 2.42Z",key:"lc1i9w"}],["path",{d:"m7 16.5-4.74-2.85",key:"1o9zyk"}],["path",{d:"m7 16.5 5-3",key:"va8pkn"}],["path",{d:"M7 16.5v5.17",key:"jnp8gn"}],["path",{d:"M12 13.5V19l3.97 2.38a2 2 0 0 0 2.06 0l3-1.8a2 2 0 0 0 .97-1.71v-3.24a2 2 0 0 0-.97-1.71L17 10.5l-5 3Z",key:"8zsnat"}],["path",{d:"m17 16.5-5-3",key:"8arw3v"}],["path",{d:"m17 16.5 4.74-2.85",key:"8rfmw"}],["path",{d:"M17 16.5v5.17",key:"k6z78m"}],["path",{d:"M7.97 4.42A2 2 0 0 0 7 6.13v4.37l5 3 5-3V6.13a2 2 0 0 0-.97-1.71l-3-1.8a2 2 0 0 0-2.06 0l-3 1.8Z",key:"1xygjf"}],["path",{d:"M12 8 7.26 5.15",key:"1vbdud"}],["path",{d:"m12 8 4.74-2.85",key:"3rx089"}],["path",{d:"M12 13.5V8",key:"1io7kd"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Am=gr("BriefcaseBusiness",[["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M16 6V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v2",key:"1ksdt3"}],["path",{d:"M22 13a18.15 18.15 0 0 1-20 0",key:"12hx5q"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JJ=gr("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eee=gr("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N4=gr("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tee=gr("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ree=gr("Car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vg=gr("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nee=gr("ChartLine",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const by=gr("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __=gr("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YT=gr("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aee=gr("CircleDollarSign",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 18V6",key:"zqpxq5"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const see=gr("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C6=gr("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vy=gr("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iee=gr("CloudDownload",[["path",{d:"M12 13v8l-4-4",key:"1f5nwf"}],["path",{d:"m12 21 4-4",key:"1lfcce"}],["path",{d:"M4.393 15.269A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.436 8.284",key:"ui1hmy"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lee=gr("CloudUpload",[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oee=gr("Cog",[["path",{d:"M12 20a8 8 0 1 0 0-16 8 8 0 0 0 0 16Z",key:"sobvz5"}],["path",{d:"M12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z",key:"11i496"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 22v-2",key:"1osdcq"}],["path",{d:"m17 20.66-1-1.73",key:"eq3orb"}],["path",{d:"M11 10.27 7 3.34",key:"16pf9h"}],["path",{d:"m20.66 17-1.73-1",key:"sg0v6f"}],["path",{d:"m3.34 7 1.73 1",key:"1ulond"}],["path",{d:"M14 12h8",key:"4f43i9"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"m20.66 7-1.73 1",key:"1ow05n"}],["path",{d:"m3.34 17 1.73-1",key:"nuk764"}],["path",{d:"m17 3.34-1 1.73",key:"2wel8s"}],["path",{d:"m11 13.73-4 6.93",key:"794ttg"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fF=gr("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZT=gr("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cee=gr("Disc",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C0=gr("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QT=gr("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JT=gr("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dee=gr("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e7=gr("FileSpreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dd=gr("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uee=gr("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hee=gr("Hammer",[["path",{d:"m15 12-8.373 8.373a1 1 0 1 1-3-3L12 9",key:"eefl8a"}],["path",{d:"m18 15 4-4",key:"16gjal"}],["path",{d:"m21.5 11.5-1.914-1.914A2 2 0 0 1 19 8.172V7l-2.26-2.26a6 6 0 0 0-4.202-1.756L9 2.96l.92.82A6.18 6.18 0 0 1 12 8.4V10l2 2h1.172a2 2 0 0 1 1.414.586L18.5 14.5",key:"b7pghm"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wg=gr("HandCoins",[["path",{d:"M11 15h2a2 2 0 1 0 0-4h-3c-.6 0-1.1.2-1.4.6L3 17",key:"geh8rc"}],["path",{d:"m7 21 1.6-1.4c.3-.4.8-.6 1.4-.6h4c1.1 0 2.1-.4 2.8-1.2l4.6-4.4a2 2 0 0 0-2.75-2.91l-4.2 3.9",key:"1fto5m"}],["path",{d:"m2 16 6 6",key:"1pfhp9"}],["circle",{cx:"16",cy:"9",r:"2.9",key:"1n0dlu"}],["circle",{cx:"6",cy:"5",r:"3",key:"151irh"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S_=gr("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fee=gr("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t7=gr("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r7=gr("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kg=gr("Landmark",[["line",{x1:"3",x2:"21",y1:"22",y2:"22",key:"j8o0r"}],["line",{x1:"6",x2:"6",y1:"18",y2:"11",key:"10tf0k"}],["line",{x1:"10",x2:"10",y1:"18",y2:"11",key:"54lgf6"}],["line",{x1:"14",x2:"14",y1:"18",y2:"11",key:"380y"}],["line",{x1:"18",x2:"18",y1:"18",y2:"11",key:"1kevvc"}],["polygon",{points:"12 2 20 7 4 7",key:"jkujk7"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j_=gr("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mee=gr("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xee=gr("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mF=gr("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pee=gr("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gee=gr("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n7=gr("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bee=gr("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vee=gr("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yee=gr("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wee=gr("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a7=gr("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zf=gr("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xF=gr("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pF=gr("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s7=gr("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gF=gr("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kee=gr("PiggyBank",[["path",{d:"M19 5c-1.5 0-2.8 1.4-3 2-3.5-1.5-11-.3-11 5 0 1.8 0 3 2 4.5V20h4v-2h3v2h4v-4c1-.5 1.7-1 2-2h2v-4h-2c0-1-.5-1.5-1-2V5z",key:"1ivx2i"}],["path",{d:"M2 9v1c0 1.1.9 2 2 2h1",key:"nm575m"}],["path",{d:"M16 11h.01",key:"xkw8gn"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _c=gr("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fm=gr("Printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nee=gr("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _ee=gr("RefreshCcw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i7=gr("Repeat",[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C_=gr("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const See=gr("ScanLine",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M7 12h10",key:"b7w52i"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pu=gr("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gg=gr("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jee=gr("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cee=gr("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qf=gr("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l7=gr("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o7=gr("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aee=gr("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12a2 2 0 0 1-2-2V7",key:"6c3vgh"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c7=gr("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d7=gr("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xg=gr("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F1=gr("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bF=gr("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eee=gr("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tee=gr("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oee=gr("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u7=gr("UserCog",[["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m21.7 16.4-.9-.3",key:"12j9ji"}],["path",{d:"m15.2 13.9-.9-.3",key:"1fdjdi"}],["path",{d:"m16.6 18.7.3-.9",key:"heedtr"}],["path",{d:"m19.1 12.2.3-.9",key:"1af3ki"}],["path",{d:"m19.6 18.7-.4-1",key:"1x9vze"}],["path",{d:"m16.8 12.3-.4-1",key:"vqeiwj"}],["path",{d:"m14.3 16.6 1-.4",key:"1qlj63"}],["path",{d:"m20.7 13.8 1-.4",key:"1v5t8k"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h7=gr("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tf=gr("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mm=gr("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Em=gr("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ou=gr("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),vF=({size:e="md",color:t="blue",text:r})=>{const n={sm:"w-4 h-4 border-2",md:"w-8 h-8 border-3",lg:"w-12 h-12 border-4"},a={blue:"border-blue-200 dark:border-blue-900 border-t-blue-600 dark:border-t-blue-400",white:"border-white/30 border-t-white",slate:"border-slate-200 dark:border-slate-700 border-t-slate-600 dark:border-t-slate-400"};return s.jsxs("div",{className:"flex flex-col items-center justify-center gap-3",children:[s.jsx("div",{className:`${n[e]} ${a[t]} rounded-full animate-spin`}),r&&s.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 animate-pulse",children:r})]})},Nu=({children:e,requiredRoles:t})=>{const{user:r,profile:n,loading:a,error:i}=Dc();return i&&Xe.error(i),a||r&&!n?s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-50 dark:bg-slate-900",children:s.jsx(vF,{})}):r?t&&n&&!t.includes(n.role)?s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-50 dark:bg-slate-900",children:s.jsxs("div",{className:"text-center",children:[s.jsxs("h1",{className:"text-4xl font-bold text-slate-900 dark:text-white mb-4 flex items-center justify-center gap-3",children:[s.jsx(hF,{className:"w-8 h-8 text-red-600 dark:text-red-400"}),"Khng c quyn truy cp"]}),s.jsx("p",{className:"text-slate-600 dark:text-slate-400 mb-6",children:"Bn khng c quyn truy cp trang ny."}),s.jsx("button",{onClick:()=>window.history.back(),className:"px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-semibold",children:"Quay li"})]})}):s.jsx(s.Fragment,{children:e}):s.jsx(zL,{to:"/login",replace:!0})};function yF(){const e="ABCDEFGHJKLMNPQRSTUVWXYZ23456789";let t="";for(let r=0;r<8;r++){const n=Math.floor(Math.random()*e.length);t+=e[n]}return t}function Pee(e){return/^[A-Z0-9]{8}$/.test(e)}const Fu="parts";async function Iee(){try{const{data:e,error:t}=await Ot.from(Fu).select("*").order("name");return t?Ct({code:"supabase",message:"Khng th ti danh sch ph tng",cause:t}):_n(e||[])}catch(e){return Ct({code:"network",message:"Li kt ni ti my ch",cause:e})}}async function Dee(e){try{const t=e!=null&&e.pageSize&&e.pageSize>0?e.pageSize:50,r=e!=null&&e.page&&e.page>0?e.page:1,n=(r-1)*t,a=n+t-1;let i=Ot.from(Fu).select("*",{count:"exact"}).order("name").range(n,a);if(e!=null&&e.category&&e.category!=="all"&&(i=i.eq("category",e.category)),e!=null&&e.search&&e.search.trim()){const d=e.search.trim();i=i.or(`name.ilike.%${d}%,sku.ilike.%${d}%`)}const{data:l,error:o,count:c}=await i;return o?Ct({code:"supabase",message:"Khng th ti danh sch ph tng (phn trang)",cause:o}):_n(l||[],{total:c,page:r,pageSize:t})}catch(t){return Ct({code:"network",message:"Li kt ni ti my ch khi ti ph tng (phn trang)",cause:t})}}async function Mee(e){var t;try{if(!e.name)return Ct({code:"validation",message:"Thiu tn ph tng"});const r=e.sku||yF(),n={id:typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():`${Math.random().toString(36).slice(2)}-${Date.now()}`,name:e.name,sku:r,stock:e.stock||{CN1:0},retailPrice:e.retailPrice||{CN1:0},wholesalePrice:e.wholesalePrice||{CN1:0},category:e.category,description:e.description,warrantyPeriod:e.warrantyPeriod},{data:a,error:i}=await Ot.from(Fu).insert([n]).select().single();if(i||!a){const o=(i==null?void 0:i.message)||(i==null?void 0:i.details)||"To ph tng tht bi";return Ct({code:"supabase",message:o,cause:i})}let l=null;try{const{data:o}=await Ot.auth.getUser();l=((t=o==null?void 0:o.user)==null?void 0:t.id)||null}catch{}return await Bs(l,{action:"part.create",tableName:Fu,recordId:a.id,oldData:null,newData:a}),_n(a)}catch(r){return Ct({code:"network",message:"Li kt ni khi to ph tng",cause:r})}}async function Lee(e,t){var r;try{const{data:n,error:a}=await Ot.from(Fu).select("*").eq("id",e).single();if(a||!n)return Ct({code:"supabase",message:"Khng tm thy ph tng  cp nht",cause:a});const{data:i,error:l}=await Ot.from(Fu).update(t).eq("id",e).select().single();if(l||!i)return Ct({code:"supabase",message:"Cp nht ph tng tht bi",cause:l});let o=null;try{const{data:c}=await Ot.auth.getUser();o=((r=c==null?void 0:c.user)==null?void 0:r.id)||null}catch{}return await Bs(o,{action:"part.update",tableName:Fu,recordId:e,oldData:n,newData:i}),_n(i)}catch(n){return Ct({code:"network",message:"Li kt ni khi cp nht ph tng",cause:n})}}async function Ree(e){var t;try{const{data:r,error:n}=await Ot.from(Fu).select("*").eq("id",e).single();if(n||!r)return Ct({code:"supabase",message:"Khng tm thy ph tng  xa",cause:n});const{error:a}=await Ot.from(Fu).delete().eq("id",e);if(a)return Ct({code:"supabase",message:"Xa ph tng tht bi",cause:a});let i=null;try{const{data:l}=await Ot.auth.getUser();i=((t=l==null?void 0:l.user)==null?void 0:t.id)||null}catch{}return await Bs(i,{action:"part.delete",tableName:Fu,recordId:e,oldData:r,newData:null}),_n({id:e})}catch(r){return Ct({code:"network",message:"Li kt ni khi xa ph tng",cause:r})}}const A_="inventory_transactions";async function Fee(e){try{let t=Ot.from(A_).select("id,type,partId,partName,quantity,date,unitPrice,totalPrice,branchId,notes,saleId,workOrderId,created_at").order("created_at",{ascending:!1});e!=null&&e.branchId&&(t=t.eq("branchId",e.branchId)),e!=null&&e.startDate&&(t=t.gte("date",e.startDate)),e!=null&&e.endDate&&(t=t.lte("date",e.endDate)),e!=null&&e.limit&&(t=t.limit(e.limit));const{data:r,error:n}=await t;return n?Ct({code:"supabase",message:(n==null?void 0:n.message)||(n==null?void 0:n.details)||"Khng th ti lch s kho",cause:n}):_n(r||[])}catch(t){return Ct({code:"network",message:"Li kt ni khi ti lch s kho",cause:t})}}async function Bee(e){var t;try{if(!e.partId||!e.partName)return Ct({code:"validation",message:"Thiu thng tin ph tng"});if(!e.quantity||e.quantity<=0)return Ct({code:"validation",message:"S lng phi > 0"});if(!e.branchId)return Ct({code:"validation",message:"Thiu chi nhnh"});if(!e.type)return Ct({code:"validation",message:"Thiu loi giao dch kho"});const r=e.unitPrice??0,n=e.totalPrice??r*e.quantity,a={id:typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():`${Math.random().toString(36).slice(2)}-${Date.now()}`,type:e.type,partId:e.partId,partName:e.partName,quantity:e.quantity,date:e.date||new Date().toISOString(),unitPrice:r||null,totalPrice:n,branchId:e.branchId,notes:e.notes,saleId:e.saleId,workOrderId:e.workOrderId},{data:i,error:l}=await Ot.from(A_).insert([a]).select().single();if(l||!i)return Ct({code:"supabase",message:(l==null?void 0:l.message)||(l==null?void 0:l.details)||"Ghi lch s kho tht bi",cause:l});let o=null;try{const{data:c}=await Ot.auth.getUser();o=((t=c==null?void 0:c.user)==null?void 0:t.id)||null}catch{}return await Bs(o,{action:e.type==="Nhp kho"?"inventory.receipt":"inventory.adjust",tableName:A_,recordId:i.id,oldData:null,newData:i}),_n(i)}catch(r){return Ct({code:"network",message:"Li kt ni khi ghi lch s kho",cause:r})}}async function Uee(e,t,r,n,a){try{const{data:i,error:l}=await Ot.rpc("receipt_create_atomic",{p_items:e,p_supplier_id:t,p_branch_id:r,p_user_id:n,p_notes:a});return l?Ct({code:"supabase",message:l.message,cause:l}):i&&!i.success?Ct({code:"validation",message:i.message}):_n(i)}catch(i){return Ct({code:"network",message:"Li kt ni khi to phiu nhp",cause:i})}}function zee(){const e=qn();return ha({mutationFn:async t=>{const r=await Uee(t.items,t.supplierId,t.branchId,t.userId,t.notes);if(!r.ok)throw r.error;return r.data},onSuccess:()=>{e.invalidateQueries({queryKey:["inventoryTransactions"]}),e.invalidateQueries({queryKey:["inventoryTxRepo"]}),e.invalidateQueries({queryKey:["partsRepo"]}),e.invalidateQueries({queryKey:["partsRepoPaged"]})}})}const Bw="sales";async function wF(){try{const{data:e,error:t}=await Ot.from(Bw).select("*").order("date",{ascending:!1});if(t)return Ct({code:"supabase",message:"Khng th ti danh sch ha n",cause:t});const r=(e||[]).map(n=>({...n,userName:n.username||"N/A",paymentMethod:n.paymentmethod||n.paymentMethod||"cash",userId:n.userid||n.userId,branchId:n.branchid||n.branchId}));return _n(r)}catch(e){return Ct({code:"network",message:"Li kt ni ti my ch",cause:e})}}async function kF(e){const{branchId:t,fromDate:r,toDate:n,page:a=1,pageSize:i=20,search:l,status:o,paymentMethod:c,mode:d="offset",afterDate:f,afterId:p}=e||{};try{let y=Ot.from(Bw).select("*",{count:"exact"}).order("date",{ascending:!1});if(t&&(y=y.eq("branchid",t)),r&&(y=y.gte("date",r)),n&&(y=y.lte("date",n)),l){const N=l.replace(/[%_]/g,"");y=y.or(`id.ilike.%${N}%,customer->>name.ilike.%${N}%,sale_code.ilike.%${N}%`)}c&&(y=y.eq("paymentmethod",c)),o&&(o==="cancelled"||o==="refunded"?y=y.eq("refunded",!0):o==="completed"&&(y=y.or("refunded.is.null,refunded.eq.false")));let g={};if(d==="keyset"){f&&(p?y=y.or(`date.lt.${f},and(date.eq.${f},id.lt.${p})`):y=y.lt("date",f)),y=y.limit(i);const{data:N,error:w}=await y;if(w)return Ct({code:"supabase",message:"Khng th ti danh sch ha n (keyset)",cause:w});const S=(N||[]).map(O=>({...O,userName:O.username||"N/A",paymentMethod:O.paymentmethod||O.paymentMethod||"cash",userId:O.userid||O.userId,branchId:O.branchid||O.branchId}));return g={mode:"keyset",pageSize:i,hasMore:S.length===i,nextAfterDate:S.length?S[S.length-1].date:void 0,nextAfterId:S.length?S[S.length-1].id:void 0},_n(S,g)}else{const N=(a-1)*i,w=N+i-1;y=y.range(N,w);const{data:k,error:S,count:O}=await y;if(S)return Ct({code:"supabase",message:"Khng th ti danh sch ha n (phn trang)",cause:S});const E=(k||[]).map(W=>({...W,userName:W.username||"N/A",paymentMethod:W.paymentmethod||W.paymentMethod||"cash",userId:W.userid||W.userId,branchId:W.branchid||W.branchId})),D=O||0,q=Math.max(1,Math.ceil(D/i));return g={mode:"offset",page:a,pageSize:i,total:D,totalPages:q,hasMore:a<q},_n(E,g)}}catch(y){return Ct({code:"network",message:"Li kt ni khi ti ha n (phn trang)",cause:y})}}async function NF(e){var t;try{if(!e.items||!e.items.length)return Ct({code:"validation",message:"Thiu danh sch hng ha"});if(!e.paymentMethod)return Ct({code:"validation",message:"Thiu phng thc thanh ton"});if(!e.id)return Ct({code:"validation",message:"Thiu ID ha n"});const r={p_sale_id:e.id,p_items:e.items,p_discount:e.discount??0,p_customer:e.customer??{name:"Khch l"},p_payment_method:e.paymentMethod,p_user_id:e.userId||"unknown",p_user_name:e.userName||"Unknown",p_branch_id:e.branchId||"CN1"},{data:n,error:a}=await Ot.rpc("sale_create_atomic",r);if(a||!n){const d=(a==null?void 0:a.details)||(a==null?void 0:a.message)||"",f=d.toUpperCase();if(f.includes("INSUFFICIENT_STOCK")){let p=[];const y=d.indexOf(":");if(y!==-1){const N=d.slice(y+1).trim();try{p=JSON.parse(N)}catch{}}const g=Array.isArray(p)?p.map(N=>`${N.partName||N.partId||"?"} (cn ${N.available}, cn ${N.requested})`).join(", "):"";return Ct({code:"validation",message:g?`Thiu tn kho: ${g}`:"Tn kho khng  cho mt hoc nhiu sn phm",cause:a})}return f.includes("PART_NOT_FOUND")?Ct({code:"validation",message:"Khng tm thy ph tng trong kho",cause:a}):f.includes("INVALID_ITEM")?Ct({code:"validation",message:"D liu sn phm khng hp l",cause:a}):f.includes("EMPTY_ITEMS")?Ct({code:"validation",message:"Danh sch hng ha trng",cause:a}):f.includes("INVALID_PAYMENT_METHOD")?Ct({code:"validation",message:"Phng thc thanh ton khng hp l",cause:a}):f.includes("UNAUTHORIZED")?Ct({code:"supabase",message:"Bn khng c quyn to ha n",cause:a}):f.includes("BRANCH_MISMATCH")?Ct({code:"validation",message:"Chi nhnh khng khp vi quyn hin ti",cause:a}):Ct({code:"supabase",message:"To ha n (atomic) tht bi",cause:a})}const i=n.sale,l=n.cashTransactionId,o=n.inventoryTxCount;if(!i)return Ct({code:"unknown",message:"Kt qu RPC khng hp l"});let c=null;try{const{data:d}=await Ot.auth.getUser();c=((t=d==null?void 0:d.user)==null?void 0:t.id)||null}catch{}return await Bs(c,{action:"sale.create",tableName:Bw,recordId:i.id,oldData:null,newData:i}),_n({...i,cashTransactionId:l,inventoryTxCount:o})}catch(r){return Ct({code:"network",message:"Li kt ni khi to ha n (atomic)",cause:r})}}async function qee(e){var t;try{const{data:r,error:n}=await Ot.rpc("sale_delete_atomic",{p_sale_id:e});if(n)return(n.message||"").includes("SALE_NOT_FOUND")?Ct({code:"not_found",message:"Khng tm thy ha n",cause:n}):Ct({code:"supabase",message:"Xa ha n tht bi",cause:n});let a=null;try{const{data:i}=await Ot.auth.getUser();a=((t=i==null?void 0:i.user)==null?void 0:t.id)||null}catch{}return await Bs(a,{action:"sale.delete",tableName:Bw,recordId:e,oldData:null,newData:r}),_n({id:e})}catch(r){return Ct({code:"network",message:"Li kt ni khi xa ha n",cause:r})}}const Hee=Object.freeze(Object.defineProperty({__proto__:null,createSaleAtomic:NF,deleteSaleById:qee,fetchSales:wF,fetchSalesPaged:kF},Symbol.toStringTag,{value:"Module"})),Mb=()=>Ts({queryKey:["salesRepo"],queryFn:async()=>{const e=await wF();if(!e.ok)throw e.error;return e.data}}),$ee=e=>Ts({queryKey:["salesRepoPaged",e],queryFn:async()=>{const{status:t,...r}=e||{},n={...r,status:t==="all"?void 0:t},a=await kF(n);if(!a.ok)throw a.error;return{data:a.data,meta:a.meta}},placeholderData:t=>t}),Vee=()=>{const e=qn();return ha({mutationFn:t=>NF(t),onSuccess:t=>{var r;e.invalidateQueries({queryKey:["salesRepo"]}),e.invalidateQueries({queryKey:["salesRepoPaged"]}),e.invalidateQueries({queryKey:["salesRepoKeyset"]}),e.invalidateQueries({queryKey:["partsRepo"]}),e.invalidateQueries({queryKey:["partsRepoPaged"]}),e.invalidateQueries({queryKey:["inventoryTxRepo"]}),Xe.success(" to ha n (atomic)"),(r=t==null?void 0:t.data)!=null&&r.inventoryTxCount&&Xe.info(`Xut kho: ${t.data.inventoryTxCount} dng`)},onError:t=>Xe.error(va(t))})},mf=()=>Ts({queryKey:["partsRepo"],queryFn:async()=>{const e=await Iee();if(!e.ok)throw e.error;return e.data}}),A6=e=>Ts({queryKey:["partsRepoPaged",e.page,e.pageSize,e.search||"",e.category||"all"],queryFn:async()=>{const t=await Dee(e);if(!t.ok)throw t.error;return t},staleTime:3e4}),E6=()=>{const e=qn();return ha({mutationFn:Mee,onSuccess:()=>{e.invalidateQueries({queryKey:["partsRepo"]}),e.invalidateQueries({queryKey:["partsRepoPaged"]})},onError:t=>Xe.error(va(t))})},Wee=()=>{const e=qn();return ha({mutationFn:({id:t,updates:r})=>Lee(t,r),onSuccess:()=>{e.invalidateQueries({queryKey:["partsRepo"]}),e.invalidateQueries({queryKey:["partsRepoPaged"]})},onError:t=>Xe.error(va(t))})},Kee=()=>{const e=qn();return ha({mutationFn:({id:t})=>Ree(t),onSuccess:()=>{e.invalidateQueries({queryKey:["partsRepo"]}),e.invalidateQueries({queryKey:["partsRepoPaged"]})},onError:t=>Xe.error(va(t))})},_F=e=>Ts({queryKey:["cashTxRepo",e],queryFn:async()=>{const t=await UJ(e);if(!t.ok)throw t.error;return t.data}}),SF=()=>{const e=qn();return ha({mutationFn:t=>k_(t),onSuccess:()=>{e.invalidateQueries({queryKey:["cashTxRepo"]}),Xe.success(" ghi thu/chi")},onError:t=>Xe.error(va(t))})},Zm={async getCustomers(){const{data:e,error:t}=await Ot.from("customers").select("*").order("created_at",{ascending:!1});if(t)throw t;return e},async createCustomer(e){const{data:t,error:r}=await Ot.from("customers").insert([e]).select().single();if(r||r)throw r;return t},async createCustomersBulk(e){const{data:t,error:r}=await Ot.from("customers").insert(e).select();if(r)throw r;return t},async updateCustomer(e,t){const{data:r,error:n}=await Ot.from("customers").update(t).eq("id",e).select().single();if(n)throw n;return r},async getSuppliers(){const{data:e,error:t}=await Ot.from("suppliers").select("*").order("created_at",{ascending:!1});if(t)throw t;return e},async createSupplier(e){const{data:t,error:r}=await Ot.from("suppliers").insert([e]).select().single();if(r)throw r;return t},async createSuppliersBulk(e){const{data:t,error:r}=await Ot.from("suppliers").insert(e).select();if(r)throw r;return t},async updateSupplier(e,t){const{data:r,error:n}=await Ot.from("suppliers").update(t).eq("id",e).select().single();if(n)throw n;return r},async getParts(){const{data:e,error:t}=await Ot.from("parts").select("*").order("name");if(t)throw t;return e},async createPart(e){const{data:t,error:r}=await Ot.from("parts").insert([e]).select().single();if(r)throw r;return t},async updatePart(e,t){const{data:r,error:n}=await Ot.from("parts").update(t).eq("id",e).select().single();if(n)throw n;return r},async getWorkOrders(){const{data:e,error:t}=await Ot.from("work_orders").select("*").order("created_at",{ascending:!1});if(t)throw t;return e},async createWorkOrder(e){const{data:t,error:r}=await Ot.from("work_orders").insert([e]).select().single();if(r)throw r;return t},async updateWorkOrder(e,t){const{data:r,error:n}=await Ot.from("work_orders").update(t).eq("id",e).select().single();if(n)throw n;return r},async getSales(){const{data:e,error:t}=await Ot.from("sales").select("*").order("date",{ascending:!1});if(t)throw t;return e},async createSale(e){const{data:t,error:r}=await Ot.from("sales").insert([e]).select().single();if(r)throw r;return t},async getCashTransactions(){const{data:e,error:t}=await Ot.from("cash_transactions").select("*").order("date",{ascending:!1});if(t)throw t;return e},async createCashTransaction(e){const{data:t,error:r}=await Ot.from("cash_transactions").insert([e]).select().single();if(r)throw r;return t},async getPaymentSources(){const{data:e,error:t}=await Ot.from("payment_sources").select("*");if(t)throw t;return e},async updatePaymentSource(e,t){const{data:r,error:n}=await Ot.from("payment_sources").update(t).eq("id",e).select().single();if(n)throw n;return r},async getInventoryTransactions(){const{data:e,error:t}=await Ot.from("inventory_transactions").select("*").order("date",{ascending:!1});if(t)throw t;return e},async createInventoryTransaction(e){const{data:t,error:r}=await Ot.from("inventory_transactions").insert([e]).select().single();if(r)throw r;return t}},jF=()=>Ts({queryKey:["customers"],queryFn:Zm.getCustomers,staleTime:300*1e3,gcTime:600*1e3}),Gee=()=>{const e=qn();return ha({mutationFn:Zm.createCustomer,onSuccess:()=>{e.invalidateQueries({queryKey:["customers"]})}})},Xee=()=>{const e=qn();return ha({mutationFn:Zm.createCustomersBulk,onSuccess:()=>{e.invalidateQueries({queryKey:["customers"]})}})},Yee=()=>{const e=qn();return ha({mutationFn:({id:t,updates:r})=>Zm.updateCustomer(t,r),onSuccess:()=>{e.invalidateQueries({queryKey:["customers"]})}})},Zee=()=>Ts({queryKey:["parts"],queryFn:Zm.getParts,staleTime:300*1e3,gcTime:600*1e3}),Qee=()=>Ts({queryKey:["workOrders"],queryFn:Zm.getWorkOrders,staleTime:120*1e3,gcTime:300*1e3}),Jee=()=>Ts({queryKey:["paymentSources"],queryFn:Zm.getPaymentSources}),Uw="employees";async function ete(){try{const{data:e,error:t}=await Ot.from(Uw).select("*").order("created_at",{ascending:!1});if(t)return Ct({code:"supabase",message:"Khng th ti danh sch nhn vin",cause:t});const r=(e||[]).map(n=>({id:n.id,name:n.name,phone:n.phone,email:n.email,position:n.position,department:n.department,baseSalary:n.base_salary,allowances:n.allowances,startDate:n.start_date,status:n.status,bankAccount:n.bank_account,bankName:n.bank_name,taxCode:n.tax_code,branchId:n.branch_id,created_at:n.created_at,updated_at:n.updated_at}));return _n(r)}catch(e){return Ct({code:"network",message:"Li kt ni ti my ch",cause:e})}}async function tte(e){try{console.log("Creating employee with data:",e);const{data:t,error:r}=await Ot.rpc("mc_current_branch");console.log("Branch data:",t,"Branch error:",r);const n=t||"CN1",a={id:`EMP-${Date.now()}`,name:e.name,phone:e.phone,email:e.email,position:e.position,department:e.department,base_salary:e.baseSalary,allowances:e.allowances||0,start_date:e.startDate,status:e.status||"active",bank_account:e.bankAccount,bank_name:e.bankName,tax_code:e.taxCode,branch_id:n};console.log("Inserting employee:",a);const{data:i,error:l}=await Ot.from(Uw).insert(a).select().single();if(console.log("Insert result - data:",i,"error:",l),l||!i)return console.error("Insert failed - error:",l,"data:",i),Ct({code:"supabase",message:(l==null?void 0:l.message)||"Khng th thm nhn vin",cause:l||new Error("No data returned from insert")});const o={id:i.id,name:i.name,phone:i.phone,email:i.email,position:i.position,department:i.department,baseSalary:i.base_salary,allowances:i.allowances,startDate:i.start_date,status:i.status,bankAccount:i.bank_account,bankName:i.bank_name,taxCode:i.tax_code,branchId:i.branch_id,created_at:i.created_at,updated_at:i.updated_at};return _n(o)}catch(t){return Ct({code:"network",message:"Li kt ni khi thm nhn vin",cause:t})}}async function rte(e,t){try{const r={};t.name!==void 0&&(r.name=t.name),t.phone!==void 0&&(r.phone=t.phone),t.email!==void 0&&(r.email=t.email),t.position!==void 0&&(r.position=t.position),t.department!==void 0&&(r.department=t.department),t.baseSalary!==void 0&&(r.base_salary=t.baseSalary),t.allowances!==void 0&&(r.allowances=t.allowances),t.startDate!==void 0&&(r.start_date=t.startDate),t.status!==void 0&&(r.status=t.status),t.bankAccount!==void 0&&(r.bank_account=t.bankAccount),t.bankName!==void 0&&(r.bank_name=t.bankName),t.taxCode!==void 0&&(r.tax_code=t.taxCode),r.updated_at=new Date().toISOString();const{data:n,error:a}=await Ot.from(Uw).update(r).eq("id",e).select().single();if(a||!n)return Ct({code:"supabase",message:"Khng th cp nht nhn vin",cause:a});const i={id:n.id,name:n.name,phone:n.phone,email:n.email,position:n.position,department:n.department,baseSalary:n.base_salary,allowances:n.allowances,startDate:n.start_date,status:n.status,bankAccount:n.bank_account,bankName:n.bank_name,taxCode:n.tax_code,branchId:n.branch_id,created_at:n.created_at,updated_at:n.updated_at};return _n(i)}catch(r){return Ct({code:"network",message:"Li kt ni khi cp nht nhn vin",cause:r})}}async function nte(e){try{const{error:t}=await Ot.from(Uw).delete().eq("id",e);return t?Ct({code:"supabase",message:"Khng th xa nhn vin",cause:t}):_n(void 0)}catch(t){return Ct({code:"network",message:"Li kt ni khi xa nhn vin",cause:t})}}function T6(){return Ts({queryKey:["employees"],queryFn:async()=>{const e=await ete();if(!e.ok)throw new Error(va(e.error));return e.data}})}function ate(){const e=qn();return ha({mutationFn:async t=>{console.log("Mutation called with employee:",t);const r=await tte(t);if(console.log("Repository result:",r),!r.ok){console.error("Repository failed:",r.error);const n=r.error?va(r.error):"Khng th thm nhn vin. Vui lng th li.";throw new Error(n)}return r.data},onSuccess:()=>{e.invalidateQueries({queryKey:["employees"]}),Xe.success("Thm nhn vin thnh cng!")},onError:t=>{const r=(t==null?void 0:t.message)||"C li xy ra khi thm nhn vin";Xe.error(r),console.error("Create employee error:",t)}})}function ste(){const e=qn();return ha({mutationFn:async({id:t,updates:r})=>{const n=await rte(t,r);if(!n.ok)throw new Error(va(n.error));return n.data},onSuccess:()=>{e.invalidateQueries({queryKey:["employees"]}),Xe.success("Cp nht nhn vin thnh cng!")},onError:t=>{Xe.error(`Li: ${t.message}`)}})}function ite(){const e=qn();return ha({mutationFn:async t=>{const r=await nte(t);if(!r.ok)throw new Error(va(r.error));return r.data},onSuccess:()=>{e.invalidateQueries({queryKey:["employees"]}),Xe.success("Xa nhn vin thnh cng!")},onError:t=>{Xe.error(`Li: ${t.message}`)}})}async function lte(){try{const{data:e,error:t}=await Ot.from("loans").select("*").order("created_at",{ascending:!1});if(t)return Ct({code:"supabase",message:"Khng th ti danh sch khon vay",cause:t});const r=(e||[]).map(n=>({id:n.id,lenderName:n.lender_name,loanType:n.loan_type,principal:n.principal,interestRate:n.interest_rate,term:n.term,startDate:n.start_date,endDate:n.end_date,remainingAmount:n.remaining_amount,monthlyPayment:n.monthly_payment,status:n.status,purpose:n.purpose,collateral:n.collateral,notes:n.notes,branchId:n.branch_id,created_at:n.created_at}));return _n(r)}catch(e){return Ct({code:"network",message:"Li kt ni ti my ch",cause:e})}}async function ote(e){try{const t={id:`LOAN-${Date.now()}`,lender_name:e.lenderName,loan_type:e.loanType,principal:e.principal,interest_rate:e.interestRate,term:e.term,start_date:e.startDate,end_date:e.endDate,remaining_amount:e.remainingAmount||e.principal,monthly_payment:e.monthlyPayment,status:e.status||"active",purpose:e.purpose,collateral:e.collateral,notes:e.notes,branch_id:e.branchId||"CN1"},{data:r,error:n}=await Ot.from("loans").insert(t).select().single();return n||!r?Ct({code:"supabase",message:(n==null?void 0:n.message)||"Khng th thm khon vay",cause:n||new Error("No data returned")}):_n({id:r.id,lenderName:r.lender_name,loanType:r.loan_type,principal:r.principal,interestRate:r.interest_rate,term:r.term,startDate:r.start_date,endDate:r.end_date,remainingAmount:r.remaining_amount,monthlyPayment:r.monthly_payment,status:r.status,purpose:r.purpose,collateral:r.collateral,notes:r.notes,branchId:r.branch_id,created_at:r.created_at})}catch(t){return Ct({code:"network",message:"Li kt ni khi thm khon vay",cause:t})}}async function cte(e,t){try{const r={};t.lenderName!==void 0&&(r.lender_name=t.lenderName),t.loanType!==void 0&&(r.loan_type=t.loanType),t.principal!==void 0&&(r.principal=t.principal),t.interestRate!==void 0&&(r.interest_rate=t.interestRate),t.term!==void 0&&(r.term=t.term),t.startDate!==void 0&&(r.start_date=t.startDate),t.endDate!==void 0&&(r.end_date=t.endDate),t.remainingAmount!==void 0&&(r.remaining_amount=t.remainingAmount),t.monthlyPayment!==void 0&&(r.monthly_payment=t.monthlyPayment),t.status!==void 0&&(r.status=t.status),t.purpose!==void 0&&(r.purpose=t.purpose),t.collateral!==void 0&&(r.collateral=t.collateral),t.notes!==void 0&&(r.notes=t.notes),r.updated_at=new Date().toISOString();const{data:n,error:a}=await Ot.from("loans").update(r).eq("id",e).select().single();return a||!n?Ct({code:"supabase",message:"Khng th cp nht khon vay",cause:a}):_n({id:n.id,lenderName:n.lender_name,loanType:n.loan_type,principal:n.principal,interestRate:n.interest_rate,term:n.term,startDate:n.start_date,endDate:n.end_date,remainingAmount:n.remaining_amount,monthlyPayment:n.monthly_payment,status:n.status,purpose:n.purpose,collateral:n.collateral,notes:n.notes,branchId:n.branch_id,created_at:n.created_at})}catch(r){return Ct({code:"network",message:"Li kt ni khi cp nht khon vay",cause:r})}}async function dte(e){try{const{error:t}=await Ot.from("loans").delete().eq("id",e);return t?Ct({code:"supabase",message:"Khng th xa khon vay",cause:t}):_n(void 0)}catch(t){return Ct({code:"network",message:"Li kt ni khi xa khon vay",cause:t})}}async function ute(e){try{let t=Ot.from("loan_payments").select("*").order("payment_date",{ascending:!1});const{data:r,error:n}=await t;if(n)return Ct({code:"supabase",message:"Khng th ti lch s tr n",cause:n});const a=(r||[]).map(i=>({id:i.id,loanId:i.loan_id,paymentDate:i.payment_date,principalAmount:i.principal_amount,interestAmount:i.interest_amount,totalAmount:i.total_amount,remainingAmount:i.remaining_amount,paymentMethod:i.payment_method,notes:i.notes,branchId:i.branch_id,cashTransactionId:i.cash_transaction_id}));return _n(a)}catch(t){return Ct({code:"network",message:"Li kt ni ti my ch",cause:t})}}async function hte(e){try{const t={id:`LPAY-${Date.now()}`,loan_id:e.loanId,payment_date:e.paymentDate,principal_amount:e.principalAmount,interest_amount:e.interestAmount,total_amount:e.totalAmount,remaining_amount:e.remainingAmount,payment_method:e.paymentMethod,notes:e.notes,branch_id:e.branchId||"CN1",cash_transaction_id:e.cashTransactionId},{data:r,error:n}=await Ot.from("loan_payments").insert(t).select().single();return n||!r?Ct({code:"supabase",message:(n==null?void 0:n.message)||"Khng th thm thanh ton",cause:n||new Error("No data returned")}):_n({id:r.id,loanId:r.loan_id,paymentDate:r.payment_date,principalAmount:r.principal_amount,interestAmount:r.interest_amount,totalAmount:r.total_amount,remainingAmount:r.remaining_amount,paymentMethod:r.payment_method,notes:r.notes,branchId:r.branch_id,cashTransactionId:r.cash_transaction_id})}catch(t){return Ct({code:"network",message:"Li kt ni khi thm thanh ton",cause:t})}}function CF(){return Ts({queryKey:["loans"],queryFn:lte,select:e=>{if(!e.ok)throw new Error(va(e.error));return e.data}})}function fte(){const e=qn();return ha({mutationFn:t=>ote(t),onSuccess:t=>{if(t.ok)e.invalidateQueries({queryKey:["loans"]});else throw new Error(va(t.error))}})}function mte(){const e=qn();return ha({mutationFn:({id:t,updates:r})=>cte(t,r),onSuccess:t=>{if(t.ok)e.invalidateQueries({queryKey:["loans"]});else throw new Error(va(t.error))}})}function xte(){const e=qn();return ha({mutationFn:t=>dte(t),onSuccess:t=>{if(t.ok)e.invalidateQueries({queryKey:["loans"]});else throw new Error(va(t.error))}})}function pte(e){return Ts({queryKey:["loanPayments",e],queryFn:()=>ute(e),select:t=>{if(!t.ok)throw new Error(va(t.error));return t.data}})}function gte(){const e=qn();return ha({mutationFn:t=>hte(t),onSuccess:t=>{if(t.ok)e.invalidateQueries({queryKey:["loanPayments"]}),e.invalidateQueries({queryKey:["loans"]});else throw new Error(va(t.error))}})}const Oe=e=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(e),Bn=(e,t=!0)=>{if(!e)return"--";const r=typeof e=="string"?new Date(e):e;if(Number.isNaN(r.getTime()))return"--";const n=String(r.getDate()).padStart(2,"0"),a=String(r.getMonth()+1).padStart(2,"0"),i=r.getFullYear();if(t)return`${n}/${a}/${i}`;const l=String(r.getHours()).padStart(2,"0"),o=String(r.getMinutes()).padStart(2,"0");return`${n}/${a}/${i} ${l}:${o}`},Li=(e,t)=>{if(!e)return"";const r=t||"SC";let n=e.match(new RegExp(`^${r}-(\\d{10,})`,"i"));if(n||(n=e.match(/WO-(\d+)/i)||e.match(/(\d{10,})/)),n&&n[1]){const a=n[1],i=Number(a);if(!Number.isNaN(i)){const l=new Date(i);if(!Number.isNaN(l.getTime())){const o=`${l.getFullYear()}${String(l.getMonth()+1).padStart(2,"0")}${String(l.getDate()).padStart(2,"0")}`,c=String(a).slice(-6).padStart(6,"0");return`${r}-${o}-${c}`}}}return e},B1=(e,t)=>{if(!e)return"";const r=e.match(/^([A-Z0-9_-]+)-(\d{10,})$/i);if(r){const a=r[1],i=r[2],l=Number(i);if(!Number.isNaN(l)){const o=new Date(l);if(!Number.isNaN(o.getTime())){const c=`${o.getFullYear()}${String(o.getMonth()+1).padStart(2,"0")}${String(o.getDate()).padStart(2,"0")}`,d=String(i).slice(-6).padStart(6,"0");return`${a}-${c}-${d}`}}}const n=e.match(/(\d{10,})/);if(n){const a=n[1],i=Number(a);if(!Number.isNaN(i)){const l=new Date(i);if(!Number.isNaN(l.getTime())){const o=`${l.getFullYear()}${String(l.getMonth()+1).padStart(2,"0")}${String(l.getDate()).padStart(2,"0")}`,c=String(a).slice(-6).padStart(6,"0");return`SC-${o}-${c}`}}}return e},Ln=()=>Math.random().toString(36).substr(2,9),Vd=new Date,Qr=e=>{const t=new Date(Vd);return t.setDate(t.getDate()-e),t.toISOString()},ln=[{id:Ln(),name:"Nguyn Vn An",phone:"0901234567",email:"annv@gmail.com",vehicleModel:"Honda SH 2023",licensePlate:"30A-12345",status:"active",segment:"VIP",loyaltyPoints:5800,totalSpent:29e6,visitCount:32,lastVisit:Qr(3),created_at:Qr(180)},{id:Ln(),name:"Trn Th Bnh",phone:"0912345678",email:"binhtt@gmail.com",vehicleModel:"Yamaha Exciter 150",licensePlate:"30B-67890",status:"active",segment:"Loyal",loyaltyPoints:2500,totalSpent:125e5,visitCount:15,lastVisit:Qr(7),created_at:Qr(150)},{id:Ln(),name:"L Minh Cng",phone:"0923456789",email:"cuonglm@gmail.com",vehicleModel:"Honda Vision 2022",licensePlate:"30C-11111",status:"active",segment:"Potential",loyaltyPoints:680,totalSpent:34e5,visitCount:5,lastVisit:Qr(15),created_at:Qr(90)},{id:Ln(),name:"Phm Thu H",phone:"0934567890",email:"hapt@gmail.com",vehicleModel:"Suzuki Raider 150",licensePlate:"30D-22222",status:"active",segment:"New",loyaltyPoints:150,totalSpent:75e4,visitCount:2,lastVisit:Qr(5),created_at:Qr(30)},{id:Ln(),name:"V Thanh Tng",phone:"0945678901",email:"tungvt@gmail.com",vehicleModel:"Honda Air Blade",licensePlate:"30E-33333",status:"active",segment:"VIP",loyaltyPoints:4200,totalSpent:21e6,visitCount:28,lastVisit:Qr(2),created_at:Qr(200)}],xn=[{id:Ln(),name:"Nht Motul 7100 10W40",sku:"MOTUL-7100",retailPrice:{CN1:18e4},wholesalePrice:{CN1:15e4},stock:{CN1:50},category:"Nht ng c",description:"Nht cao cp cho xe cn tay",created_at:Qr(365)},{id:Ln(),name:"Lp Michelin Pilot Street",sku:"MICH-PS",retailPrice:{CN1:45e4},wholesalePrice:{CN1:38e4},stock:{CN1:30},category:"Lp xe",description:"Lp cht lng cao",created_at:Qr(300)},{id:Ln(),name:"Phanh ABS Honda SH",sku:"PHANH-SH",retailPrice:{CN1:35e4},wholesalePrice:{CN1:28e4},stock:{CN1:8},category:"Ph tng phanh",description:"M phanh chnh hng",created_at:Qr(250)},{id:Ln(),name:"c quy GS GTZ5S",sku:"ACQUY-GS",retailPrice:{CN1:38e4},wholesalePrice:{CN1:32e4},stock:{CN1:25},category:"c quy",description:"c quy kh, bo hnh 6 thng",created_at:Qr(200)},{id:Ln(),name:"Nht Shell Advance AX7",sku:"SHELL-AX7",retailPrice:{CN1:12e4},wholesalePrice:{CN1:95e3},stock:{CN1:80},category:"Nht ng c",description:"Nht bn tng hp",created_at:Qr(180)},{id:Ln(),name:"Lc gi K&N",sku:"KN-FILTER",retailPrice:{CN1:25e4},wholesalePrice:{CN1:2e5},stock:{CN1:15},category:"Lc",description:"Lc gi cao cp, c th ra",created_at:Qr(150)},{id:Ln(),name:"Xch MTKRACING 428",sku:"XICH-MTK",retailPrice:{CN1:28e4},wholesalePrice:{CN1:23e4},stock:{CN1:5},category:"Xch nhng",description:"Xch cht lng cao",created_at:Qr(120)}],gc=[{id:Ln(),name:"Nguyn Vn c",phone:"0987654321",email:"duc.nv@motocare.vn",position:"K thut vin chnh",department:"K thut",baseSalary:12e6,allowances:5e5,startDate:Qr(730),status:"active",branchId:"CN1",created_at:Qr(730)},{id:Ln(),name:"Trn Minh Hong",phone:"0976543210",email:"hoang.tm@motocare.vn",position:"Nhn vin bn hng",department:"Kinh doanh",baseSalary:8e6,allowances:3e5,startDate:Qr(365),status:"active",branchId:"CN1",created_at:Qr(365)},{id:Ln(),name:"L Th Mai",phone:"0965432109",email:"mai.lt@motocare.vn",position:"K ton",department:"Ti chnh",baseSalary:1e7,allowances:4e5,startDate:Qr(500),status:"active",branchId:"CN1",created_at:Qr(500)},{id:Ln(),name:"Phm Vn Sn",phone:"0954321098",email:"son.pv@motocare.vn",position:"K thut vin",department:"K thut",baseSalary:9e6,allowances:3e5,startDate:Qr(200),status:"active",branchId:"CN1",created_at:Qr(200)}],E_=[...Array.from({length:5},(e,t)=>{const r=[{partId:xn[0].id,partName:xn[0].name,sku:xn[0].sku,quantity:2,sellingPrice:xn[0].retailPrice.CN1,stockSnapshot:xn[0].stock.CN1},{partId:xn[1].id,partName:xn[1].name,sku:xn[1].sku,quantity:1,sellingPrice:xn[1].retailPrice.CN1,stockSnapshot:xn[1].stock.CN1}],n=r.reduce((a,i)=>a+i.sellingPrice*i.quantity,0);return{id:Ln(),date:Qr(t),customer:{id:ln[t%ln.length].id,name:ln[t%ln.length].name,phone:ln[t%ln.length].phone},items:r,subtotal:n,discount:0,total:n,paymentMethod:"cash",userId:"demo-user",userName:"Demo User",branchId:"CN1"}}),...Array.from({length:10},(e,t)=>{const r=xn[(t+1)%xn.length],n=[{partId:r.id,partName:r.name,sku:r.sku,quantity:1,sellingPrice:r.retailPrice.CN1,stockSnapshot:r.stock.CN1}],a=n.reduce((i,l)=>i+l.sellingPrice*l.quantity,0);return{id:Ln(),date:Qr(t+6),customer:{id:ln[(t+2)%ln.length].id,name:ln[(t+2)%ln.length].name,phone:ln[(t+2)%ln.length].phone},items:n,subtotal:a,discount:0,total:a,paymentMethod:Math.random()>.5?"cash":"bank",userId:"demo-user",userName:"Demo User",branchId:"CN1"}}),...Array.from({length:15},(e,t)=>{const r=xn[t%xn.length],n=Math.floor(Math.random()*3)+1,a=[{partId:r.id,partName:r.name,sku:r.sku,quantity:n,sellingPrice:r.retailPrice.CN1,stockSnapshot:r.stock.CN1}],i=a.reduce((l,o)=>l+o.sellingPrice*o.quantity,0);return{id:Ln(),date:Qr(t+16),customer:{id:ln[(t+3)%ln.length].id,name:ln[(t+3)%ln.length].name,phone:ln[(t+3)%ln.length].phone},items:a,subtotal:i,discount:0,total:i,paymentMethod:Math.random()>.5?"cash":"bank",userId:"demo-user",userName:"Demo User",branchId:"CN1"}})],f7=gc.flatMap(e=>[{id:Ln(),employeeId:e.id,employeeName:e.name,month:Vd.toISOString().slice(0,7),baseSalary:e.baseSalary,allowances:e.allowances||0,bonus:1e6,deduction:0,workDays:26,standardWorkDays:26,socialInsurance:0,healthInsurance:0,unemploymentInsurance:0,personalIncomeTax:0,netSalary:e.baseSalary+(e.allowances||0)+1e6,paymentStatus:"pending",branchId:"CN1",created_at:Vd.toISOString()},{id:Ln(),employeeId:e.id,employeeName:e.name,month:new Date(Vd.getFullYear(),Vd.getMonth()-1,1).toISOString().slice(0,7),baseSalary:e.baseSalary,allowances:e.allowances||0,bonus:8e5,deduction:0,workDays:26,standardWorkDays:26,socialInsurance:0,healthInsurance:0,unemploymentInsurance:0,personalIncomeTax:0,netSalary:e.baseSalary+(e.allowances||0)+8e5,paymentStatus:"paid",paymentDate:Qr(5),paymentMethod:"bank",branchId:"CN1",created_at:Qr(35)}]),m7=[{id:Ln(),lenderName:"Ngn hng Vietcombank",loanType:"bank",principal:1e8,interestRate:12,term:12,startDate:Qr(180),endDate:new Date(Vd.getFullYear()+1,Vd.getMonth(),Vd.getDate()).toISOString(),purpose:"M rng ca hng",remainingAmount:75e6,monthlyPayment:1e7,status:"active",branchId:"CN1",created_at:Qr(180)},{id:Ln(),lenderName:"Ngn hng Techcombank",loanType:"bank",principal:5e7,interestRate:10,term:6,startDate:Qr(90),endDate:new Date(Vd.getFullYear(),Vd.getMonth()+6,Vd.getDate()).toISOString(),purpose:"Nhp hng",remainingAmount:4e7,monthlyPayment:9e6,status:"active",branchId:"CN1",created_at:Qr(90)}],x7=[...E_.slice(0,10).map(e=>({id:Ln(),type:"income",category:"sale_income",amount:e.total,date:e.date,notes:`Bn hng cho ${e.customer.name}`,paymentSourceId:e.paymentMethod==="cash"?"cash":"bank",recipient:e.customer.name,branchId:"CN1"})),{id:Ln(),type:"expense",category:"salary",amount:125e5,date:Qr(5),notes:`Tr lng thng trc - ${gc[0].name}`,paymentSourceId:"bank",recipient:gc[0].name,branchId:"CN1"},{id:Ln(),type:"expense",category:"loan_payment",amount:1e7,date:Qr(10),notes:"Tr n vay - Vietcombank (Gc: 8000000, Li: 2000000)",paymentSourceId:"bank",recipient:"Ngn hng Vietcombank",branchId:"CN1"},{id:Ln(),type:"expense",category:"inventory_purchase",amount:15e6,date:Qr(15),notes:"Nhp ph tng",paymentSourceId:"cash",branchId:"CN1"},{id:Ln(),type:"expense",category:"other_expense",amount:3e6,date:Qr(7),notes:"Tin in, nc, internet thng ny",paymentSourceId:"cash",branchId:"CN1"}],Cu=[{id:Ln(),name:"Cng ty TNHH Ph tng Minh Anh",phone:"0281234567",email:"minhanh@parts.vn",address:"123 Nguyn Vn Linh, Q.7, TP.HCM",created_at:Qr(365)},{id:Ln(),name:"Nh phn phi Honda chnh hng",phone:"0282345678",email:"honda@distributor.vn",address:"456 Xa l H Ni, Q.9, TP.HCM",created_at:Qr(300)},{id:Ln(),name:"Yamaha Parts Vietnam",phone:"0283456789",email:"yamaha@parts.vn",address:"789 L Vn Vit, Q.9, TP.HCM",created_at:Qr(250)}],p7=[{id:Ln(),customerId:ln[0].id,customerName:ln[0].name,phone:ln[0].phone,licensePlate:ln[0].licensePlate,description:"Thay nht + lc gi + bugi (n hng #DH001)",totalAmount:85e4,paidAmount:5e5,remainingAmount:35e4,createdDate:Qr(10),branchId:"CN1"},{id:Ln(),customerId:ln[1].id,customerName:ln[1].name,phone:ln[1].phone,licensePlate:ln[1].licensePlate,description:"Thay lp Michelin Pilot Street (n hng #DH002)",totalAmount:125e4,paidAmount:0,remainingAmount:125e4,createdDate:Qr(7),branchId:"CN1"},{id:Ln(),customerId:ln[2].id,customerName:ln[2].name,phone:ln[2].phone,licensePlate:ln[2].licensePlate,description:"Thay m phanh trc/sau + du phanh (n hng #DH003)",totalAmount:98e4,paidAmount:3e5,remainingAmount:68e4,createdDate:Qr(5),branchId:"CN1"},{id:Ln(),customerId:ln[3].id,customerName:ln[3].name,phone:ln[3].phone,licensePlate:ln[3].licensePlate,description:"Thay c quy GS 12V-7Ah (n hng #DH004)",totalAmount:55e4,paidAmount:0,remainingAmount:55e4,createdDate:Qr(3),branchId:"CN1"},{id:Ln(),customerId:ln[4].id,customerName:ln[4].name,phone:ln[4].phone,licensePlate:ln[4].licensePlate,description:"Bo dng nh k 5000km (n hng #DH005)",totalAmount:185e4,paidAmount:1e6,remainingAmount:85e4,createdDate:Qr(2),branchId:"CN1"}],g7=[{id:Ln(),supplierId:Cu[0].id,supplierName:Cu[0].name,description:"Nhp 50 chai du nht Shell 10W40 (n nhp #PN001)",totalAmount:6e6,paidAmount:3e6,remainingAmount:3e6,createdDate:Qr(15),branchId:"CN1"},{id:Ln(),supplierId:Cu[1].id,supplierName:Cu[1].name,description:"Nhp l ph tng chnh hng Honda (n nhp #PN002)",totalAmount:25e6,paidAmount:15e6,remainingAmount:1e7,createdDate:Qr(12),branchId:"CN1"},{id:Ln(),supplierId:Cu[2].id,supplierName:Cu[2].name,description:"Nhp 20 b m phanh Yamaha Exciter (n nhp #PN003)",totalAmount:45e5,paidAmount:0,remainingAmount:45e5,createdDate:Qr(8),branchId:"CN1"},{id:Ln(),supplierId:Cu[0].id,supplierName:Cu[0].name,description:"Nhp 30 lc lc du + lc gi (n nhp #PN004)",totalAmount:32e5,paidAmount:32e5,remainingAmount:0,createdDate:Qr(5),branchId:"CN1"}],b7=[{id:Ln(),creationDate:Qr(1),customerName:ln[0].name,customerPhone:ln[0].phone,vehicleModel:ln[0].vehicleModel,licensePlate:ln[0].licensePlate,issueDescription:"Thay nht nh k, kim tra phanh",technicianName:gc[0].name,status:"ang sa",laborCost:15e4,partsUsed:[{partId:xn[0].id,partName:xn[0].name,sku:xn[0].sku,quantity:1,price:xn[0].retailPrice.CN1}],discount:0,total:15e4+xn[0].retailPrice.CN1,branchId:"CN1",depositAmount:2e5,depositDate:Qr(1),paymentStatus:"partial",totalPaid:2e5,remainingAmount:15e4+xn[0].retailPrice.CN1-2e5},{id:Ln(),creationDate:Qr(0),customerName:ln[1].name,customerPhone:ln[1].phone,vehicleModel:ln[1].vehicleModel,licensePlate:ln[1].licensePlate,issueDescription:"Xe kh n, kim tra h thng in",technicianName:gc[3].name,status:"Tip nhn",laborCost:3e5,partsUsed:[],discount:0,total:3e5,branchId:"CN1",paymentStatus:"unpaid"},{id:Ln(),creationDate:Qr(3),customerName:ln[2].name,customerPhone:ln[2].phone,vehicleModel:ln[2].vehicleModel,licensePlate:ln[2].licensePlate,issueDescription:"Thay lp trc, cn chnh bnh xe",technicianName:gc[0].name,status:" sa xong",laborCost:1e5,partsUsed:[{partId:xn[1].id,partName:xn[1].name,sku:xn[1].sku,quantity:1,price:xn[1].retailPrice.CN1}],discount:2e4,total:1e5+xn[1].retailPrice.CN1-2e4,branchId:"CN1",paymentStatus:"unpaid"},{id:Ln(),creationDate:Qr(5),customerName:ln[3].name,customerPhone:ln[3].phone,vehicleModel:ln[3].vehicleModel,licensePlate:ln[3].licensePlate,issueDescription:"Thay c quy, kim tra h thng sc",technicianName:gc[3].name,status:"Tr my",laborCost:5e4,partsUsed:[{partId:xn[3].id,partName:xn[3].name,sku:xn[3].sku,quantity:1,price:xn[3].retailPrice.CN1}],discount:0,total:5e4+xn[3].retailPrice.CN1,branchId:"CN1",depositAmount:1e5,depositDate:Qr(5),paymentStatus:"paid",paymentMethod:"cash",totalPaid:5e4+xn[3].retailPrice.CN1,remainingAmount:0,paymentDate:Qr(5)},{id:Ln(),creationDate:Qr(2),customerName:ln[4].name,customerPhone:ln[4].phone,vehicleModel:ln[4].vehicleModel,licensePlate:ln[4].licensePlate,issueDescription:"Thay dy xch, nhng, kim tra phanh sau",technicianName:gc[0].name,status:"ang sa",laborCost:2e5,partsUsed:[{partId:xn[6].id,partName:xn[6].name,sku:xn[6].sku,quantity:1,price:xn[6].retailPrice.CN1},{partId:xn[2].id,partName:xn[2].name,sku:xn[2].sku,quantity:2,price:xn[2].retailPrice.CN1}],discount:3e4,total:2e5+xn[6].retailPrice.CN1+xn[2].retailPrice.CN1*2-3e4,branchId:"CN1",depositAmount:3e5,depositDate:Qr(2),paymentStatus:"partial",totalPaid:3e5,remainingAmount:2e5+xn[6].retailPrice.CN1+xn[2].retailPrice.CN1*2-3e4-3e5},{id:Ln(),creationDate:Qr(0),customerName:"Phm Vn c",customerPhone:"0967890123",vehicleModel:"Honda Wave RSX",licensePlate:"30F-44444",issueDescription:"Bo dng nh k 5000km",technicianName:gc[3].name,status:"Tip nhn",laborCost:1e5,partsUsed:[],discount:0,total:1e5,branchId:"CN1",paymentStatus:"unpaid"},{id:Ln(),creationDate:Qr(4),customerName:"L Th Hng",customerPhone:"0978901234",vehicleModel:"Yamaha Sirius",licensePlate:"30G-55555",issueDescription:"Thay lc gi, kim tra bugi",technicianName:gc[0].name,status:" sa xong",laborCost:8e4,partsUsed:[{partId:xn[5].id,partName:xn[5].name,sku:xn[5].sku,quantity:1,price:xn[5].retailPrice.CN1}],discount:1e4,total:8e4+xn[5].retailPrice.CN1-1e4,branchId:"CN1",paymentStatus:"unpaid"},{id:Ln(),creationDate:Qr(7),customerName:"Nguyn Thanh Tng",customerPhone:"0989012345",vehicleModel:"Honda Future",licensePlate:"30H-66666",issueDescription:"Sa h thng phanh a, thay du phanh",technicianName:gc[3].name,status:"Tr my",laborCost:15e4,partsUsed:[{partId:xn[2].id,partName:xn[2].name,sku:xn[2].sku,quantity:2,price:xn[2].retailPrice.CN1}],discount:0,total:15e4+xn[2].retailPrice.CN1*2,branchId:"CN1",paymentStatus:"paid",paymentMethod:"bank",totalPaid:15e4+xn[2].retailPrice.CN1*2,remainingAmount:0,paymentDate:Qr(7)}],bte=()=>{const e=localStorage.getItem("motocare-data");if(e){const t=JSON.parse(e);t.customers=[...t.customers||[],...ln],t.parts=[...t.parts||[],...xn],t.sales=[...t.sales||[],...E_],t.employees=[...t.employees||[],...gc],t.payrollRecords=[...t.payrollRecords||[],...f7],t.loans=[...t.loans||[],...m7],t.cashTransactions=[...t.cashTransactions||[],...x7],t.suppliers=[...t.suppliers||[],...Cu],t.workOrders=[...t.workOrders||[],...b7],t.customerDebts=[...t.customerDebts||[],...p7],t.supplierDebts=[...t.supplierDebts||[],...g7],localStorage.setItem("motocare-data",JSON.stringify(t))}else{const t={customers:ln,parts:xn,sales:E_,employees:gc,payrollRecords:f7,loans:m7,cashTransactions:x7,suppliers:Cu,workOrders:b7,customerDebts:p7,supplierDebts:g7,cartItems:[],loanPayments:[],inventoryTransactions:[],paymentSources:[{id:"cash",name:"Tin mt",balance:{CN1:5e7}},{id:"bank",name:"Ngn hng",balance:{CN1:15e7}}]};localStorage.setItem("motocare-data",JSON.stringify(t))}return console.log("Demo data loaded successfully."),!0},vte=()=>{localStorage.removeItem("motocare-data"),console.log("Demo data cleared.")};var yte=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function O6(e){if(typeof e!="string")return!1;var t=yte;return t.includes(e)}var wte=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function AF(e){if(typeof e!="string")return!1;var t=wte;return t.includes(e)}function EF(e){return typeof e=="string"&&e.startsWith("data-")}function Ao(e){var t=Object.entries(e).filter(r=>{var[n]=r;return AF(n)||EF(n)});return Object.fromEntries(t)}function Tm(e){if(e==null)return null;if(T.isValidElement(e)&&typeof e.props=="object"&&e.props!==null){var t=e.props;return Ao(t)}return typeof e=="object"&&!Array.isArray(e)?Ao(e):null}function Eo(e){var t=Object.entries(e).filter(r=>{var[n]=r;return AF(n)||EF(n)||O6(n)});return Object.fromEntries(t)}function TF(e){return e==null?null:T.isValidElement(e)?Eo(e.props):typeof e=="object"&&!Array.isArray(e)?Eo(e):null}var kte=["children","width","height","viewBox","className","style","title","desc"];function T_(){return T_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},T_.apply(null,arguments)}function Nte(e,t){if(e==null)return{};var r,n,a=_te(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function _te(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var P6=T.forwardRef((e,t)=>{var{children:r,width:n,height:a,viewBox:i,className:l,style:o,title:c,desc:d}=e,f=Nte(e,kte),p=i||{width:n,height:a,x:0,y:0},y=Zn("recharts-surface",l);return T.createElement("svg",T_({},Eo(f),{className:y,width:n,height:a,style:o,viewBox:"".concat(p.x," ").concat(p.y," ").concat(p.width," ").concat(p.height),ref:t}),T.createElement("title",null,c),T.createElement("desc",null,d),r)}),Ste=["children","className"];function O_(){return O_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},O_.apply(null,arguments)}function jte(e,t){if(e==null)return{};var r,n,a=Cte(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Cte(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var ci=T.forwardRef((e,t)=>{var{children:r,className:n}=e,a=jte(e,Ste),i=Zn("recharts-layer",n);return T.createElement("g",O_({className:i},Eo(a),{ref:t}),r)}),OF=T.createContext(null),Ate=()=>T.useContext(OF);function bs(e){return function(){return e}}const PF=Math.cos,yy=Math.sin,nu=Math.sqrt,wy=Math.PI,zw=2*wy,P_=Math.PI,I_=2*P_,zf=1e-6,Ete=I_-zf;function IF(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function Tte(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return IF;const r=10**t;return function(n){this._+=n[0];for(let a=1,i=n.length;a<i;++a)this._+=Math.round(arguments[a]*r)/r+n[a]}}class Ote{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?IF:Tte(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,a){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+a}`}bezierCurveTo(t,r,n,a,i,l){this._append`C${+t},${+r},${+n},${+a},${this._x1=+i},${this._y1=+l}`}arcTo(t,r,n,a,i){if(t=+t,r=+r,n=+n,a=+a,i=+i,i<0)throw new Error(`negative radius: ${i}`);let l=this._x1,o=this._y1,c=n-t,d=a-r,f=l-t,p=o-r,y=f*f+p*p;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(y>zf)if(!(Math.abs(p*c-d*f)>zf)||!i)this._append`L${this._x1=t},${this._y1=r}`;else{let g=n-l,N=a-o,w=c*c+d*d,k=g*g+N*N,S=Math.sqrt(w),O=Math.sqrt(y),E=i*Math.tan((P_-Math.acos((w+y-k)/(2*S*O)))/2),D=E/O,q=E/S;Math.abs(D-1)>zf&&this._append`L${t+D*f},${r+D*p}`,this._append`A${i},${i},0,0,${+(p*g>f*N)},${this._x1=t+q*c},${this._y1=r+q*d}`}}arc(t,r,n,a,i,l){if(t=+t,r=+r,n=+n,l=!!l,n<0)throw new Error(`negative radius: ${n}`);let o=n*Math.cos(a),c=n*Math.sin(a),d=t+o,f=r+c,p=1^l,y=l?a-i:i-a;this._x1===null?this._append`M${d},${f}`:(Math.abs(this._x1-d)>zf||Math.abs(this._y1-f)>zf)&&this._append`L${d},${f}`,n&&(y<0&&(y=y%I_+I_),y>Ete?this._append`A${n},${n},0,1,${p},${t-o},${r-c}A${n},${n},0,1,${p},${this._x1=d},${this._y1=f}`:y>zf&&this._append`A${n},${n},0,${+(y>=P_)},${p},${this._x1=t+n*Math.cos(i)},${this._y1=r+n*Math.sin(i)}`)}rect(t,r,n,a){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+a}h${-n}Z`}toString(){return this._}}function I6(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new Ote(t)}function D6(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function DF(e){this._context=e}DF.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function qw(e){return new DF(e)}function MF(e){return e[0]}function LF(e){return e[1]}function RF(e,t){var r=bs(!0),n=null,a=qw,i=null,l=I6(o);e=typeof e=="function"?e:e===void 0?MF:bs(e),t=typeof t=="function"?t:t===void 0?LF:bs(t);function o(c){var d,f=(c=D6(c)).length,p,y=!1,g;for(n==null&&(i=a(g=l())),d=0;d<=f;++d)!(d<f&&r(p=c[d],d,c))===y&&((y=!y)?i.lineStart():i.lineEnd()),y&&i.point(+e(p,d,c),+t(p,d,c));if(g)return i=null,g+""||null}return o.x=function(c){return arguments.length?(e=typeof c=="function"?c:bs(+c),o):e},o.y=function(c){return arguments.length?(t=typeof c=="function"?c:bs(+c),o):t},o.defined=function(c){return arguments.length?(r=typeof c=="function"?c:bs(!!c),o):r},o.curve=function(c){return arguments.length?(a=c,n!=null&&(i=a(n)),o):a},o.context=function(c){return arguments.length?(c==null?n=i=null:i=a(n=c),o):n},o}function m2(e,t,r){var n=null,a=bs(!0),i=null,l=qw,o=null,c=I6(d);e=typeof e=="function"?e:e===void 0?MF:bs(+e),t=typeof t=="function"?t:bs(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?LF:bs(+r);function d(p){var y,g,N,w=(p=D6(p)).length,k,S=!1,O,E=new Array(w),D=new Array(w);for(i==null&&(o=l(O=c())),y=0;y<=w;++y){if(!(y<w&&a(k=p[y],y,p))===S)if(S=!S)g=y,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),N=y-1;N>=g;--N)o.point(E[N],D[N]);o.lineEnd(),o.areaEnd()}S&&(E[y]=+e(k,y,p),D[y]=+t(k,y,p),o.point(n?+n(k,y,p):E[y],r?+r(k,y,p):D[y]))}if(O)return o=null,O+""||null}function f(){return RF().defined(a).curve(l).context(i)}return d.x=function(p){return arguments.length?(e=typeof p=="function"?p:bs(+p),n=null,d):e},d.x0=function(p){return arguments.length?(e=typeof p=="function"?p:bs(+p),d):e},d.x1=function(p){return arguments.length?(n=p==null?null:typeof p=="function"?p:bs(+p),d):n},d.y=function(p){return arguments.length?(t=typeof p=="function"?p:bs(+p),r=null,d):t},d.y0=function(p){return arguments.length?(t=typeof p=="function"?p:bs(+p),d):t},d.y1=function(p){return arguments.length?(r=p==null?null:typeof p=="function"?p:bs(+p),d):r},d.lineX0=d.lineY0=function(){return f().x(e).y(t)},d.lineY1=function(){return f().x(e).y(r)},d.lineX1=function(){return f().x(n).y(t)},d.defined=function(p){return arguments.length?(a=typeof p=="function"?p:bs(!!p),d):a},d.curve=function(p){return arguments.length?(l=p,i!=null&&(o=l(i)),d):l},d.context=function(p){return arguments.length?(p==null?i=o=null:o=l(i=p),d):i},d}class FF{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function Pte(e){return new FF(e,!0)}function Ite(e){return new FF(e,!1)}const M6={draw(e,t){const r=nu(t/wy);e.moveTo(r,0),e.arc(0,0,r,0,zw)}},Dte={draw(e,t){const r=nu(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},BF=nu(1/3),Mte=BF*2,Lte={draw(e,t){const r=nu(t/Mte),n=r*BF;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},Rte={draw(e,t){const r=nu(t),n=-r/2;e.rect(n,n,r,r)}},Fte=.8908130915292852,UF=yy(wy/10)/yy(7*wy/10),Bte=yy(zw/10)*UF,Ute=-PF(zw/10)*UF,zte={draw(e,t){const r=nu(t*Fte),n=Bte*r,a=Ute*r;e.moveTo(0,-r),e.lineTo(n,a);for(let i=1;i<5;++i){const l=zw*i/5,o=PF(l),c=yy(l);e.lineTo(c*r,-o*r),e.lineTo(o*n-c*a,c*n+o*a)}e.closePath()}},_4=nu(3),qte={draw(e,t){const r=-nu(t/(_4*3));e.moveTo(0,r*2),e.lineTo(-_4*r,-r),e.lineTo(_4*r,-r),e.closePath()}},Xc=-.5,Yc=nu(3)/2,D_=1/nu(12),Hte=(D_/2+1)*3,$te={draw(e,t){const r=nu(t/Hte),n=r/2,a=r*D_,i=n,l=r*D_+r,o=-i,c=l;e.moveTo(n,a),e.lineTo(i,l),e.lineTo(o,c),e.lineTo(Xc*n-Yc*a,Yc*n+Xc*a),e.lineTo(Xc*i-Yc*l,Yc*i+Xc*l),e.lineTo(Xc*o-Yc*c,Yc*o+Xc*c),e.lineTo(Xc*n+Yc*a,Xc*a-Yc*n),e.lineTo(Xc*i+Yc*l,Xc*l-Yc*i),e.lineTo(Xc*o+Yc*c,Xc*c-Yc*o),e.closePath()}};function Vte(e,t){let r=null,n=I6(a);e=typeof e=="function"?e:bs(e||M6),t=typeof t=="function"?t:bs(t===void 0?64:+t);function a(){let i;if(r||(r=i=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),i)return r=null,i+""||null}return a.type=function(i){return arguments.length?(e=typeof i=="function"?i:bs(i),a):e},a.size=function(i){return arguments.length?(t=typeof i=="function"?i:bs(+i),a):t},a.context=function(i){return arguments.length?(r=i??null,a):r},a}function ky(){}function Ny(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function zF(e){this._context=e}zF.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Ny(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Ny(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Wte(e){return new zF(e)}function qF(e){this._context=e}qF.prototype={areaStart:ky,areaEnd:ky,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Ny(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Kte(e){return new qF(e)}function HF(e){this._context=e}HF.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:Ny(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Gte(e){return new HF(e)}function $F(e){this._context=e}$F.prototype={areaStart:ky,areaEnd:ky,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function Xte(e){return new $F(e)}function v7(e){return e<0?-1:1}function y7(e,t,r){var n=e._x1-e._x0,a=t-e._x1,i=(e._y1-e._y0)/(n||a<0&&-0),l=(r-e._y1)/(a||n<0&&-0),o=(i*a+l*n)/(n+a);return(v7(i)+v7(l))*Math.min(Math.abs(i),Math.abs(l),.5*Math.abs(o))||0}function w7(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function S4(e,t,r){var n=e._x0,a=e._y0,i=e._x1,l=e._y1,o=(i-n)/3;e._context.bezierCurveTo(n+o,a+o*t,i-o,l-o*r,i,l)}function _y(e){this._context=e}_y.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:S4(this,this._t0,w7(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,S4(this,w7(this,r=y7(this,e,t)),r);break;default:S4(this,this._t0,r=y7(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function VF(e){this._context=new WF(e)}(VF.prototype=Object.create(_y.prototype)).point=function(e,t){_y.prototype.point.call(this,t,e)};function WF(e){this._context=e}WF.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,a,i){this._context.bezierCurveTo(t,e,n,r,i,a)}};function Yte(e){return new _y(e)}function Zte(e){return new VF(e)}function KF(e){this._context=e}KF.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=k7(e),a=k7(t),i=0,l=1;l<r;++i,++l)this._context.bezierCurveTo(n[0][i],a[0][i],n[1][i],a[1][i],e[l],t[l]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function k7(e){var t,r=e.length-1,n,a=new Array(r),i=new Array(r),l=new Array(r);for(a[0]=0,i[0]=2,l[0]=e[0]+2*e[1],t=1;t<r-1;++t)a[t]=1,i[t]=4,l[t]=4*e[t]+2*e[t+1];for(a[r-1]=2,i[r-1]=7,l[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=a[t]/i[t-1],i[t]-=n,l[t]-=n*l[t-1];for(a[r-1]=l[r-1]/i[r-1],t=r-2;t>=0;--t)a[t]=(l[t]-a[t+1])/i[t];for(i[r-1]=(e[r]+a[r-1])/2,t=0;t<r-1;++t)i[t]=2*e[t+1]-a[t+1];return[a,i]}function Qte(e){return new KF(e)}function Hw(e,t){this._context=e,this._t=t}Hw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function Jte(e){return new Hw(e,.5)}function ere(e){return new Hw(e,0)}function tre(e){return new Hw(e,1)}function U1(e,t){if((l=e.length)>1)for(var r=1,n,a,i=e[t[0]],l,o=i.length;r<l;++r)for(a=i,i=e[t[r]],n=0;n<o;++n)i[n][1]+=i[n][0]=isNaN(a[n][1])?a[n][0]:a[n][1]}function M_(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function rre(e,t){return e[t]}function nre(e){const t=[];return t.key=e,t}function are(){var e=bs([]),t=M_,r=U1,n=rre;function a(i){var l=Array.from(e.apply(this,arguments),nre),o,c=l.length,d=-1,f;for(const p of i)for(o=0,++d;o<c;++o)(l[o][d]=[0,+n(p,l[o].key,d,i)]).data=p;for(o=0,f=D6(t(l));o<c;++o)l[f[o]].index=o;return r(l,f),l}return a.keys=function(i){return arguments.length?(e=typeof i=="function"?i:bs(Array.from(i)),a):e},a.value=function(i){return arguments.length?(n=typeof i=="function"?i:bs(+i),a):n},a.order=function(i){return arguments.length?(t=i==null?M_:typeof i=="function"?i:bs(Array.from(i)),a):t},a.offset=function(i){return arguments.length?(r=i??U1,a):r},a}function sre(e,t){if((n=e.length)>0){for(var r,n,a=0,i=e[0].length,l;a<i;++a){for(l=r=0;r<n;++r)l+=e[r][a][1]||0;if(l)for(r=0;r<n;++r)e[r][a][1]/=l}U1(e,t)}}function ire(e,t){if((a=e.length)>0){for(var r=0,n=e[t[0]],a,i=n.length;r<i;++r){for(var l=0,o=0;l<a;++l)o+=e[l][r][1]||0;n[r][1]+=n[r][0]=-o/2}U1(e,t)}}function lre(e,t){if(!(!((l=e.length)>0)||!((i=(a=e[t[0]]).length)>0))){for(var r=0,n=1,a,i,l;n<i;++n){for(var o=0,c=0,d=0;o<l;++o){for(var f=e[t[o]],p=f[n][1]||0,y=f[n-1][1]||0,g=(p-y)/2,N=0;N<o;++N){var w=e[t[N]],k=w[n][1]||0,S=w[n-1][1]||0;g+=k-S}c+=p,d+=g*p}a[n-1][1]+=a[n-1][0]=r,c&&(r-=d/c)}a[n-1][1]+=a[n-1][0]=r,U1(e,t)}}var j4={},C4={},N7;function ore(){return N7||(N7=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==="__proto__"}e.isUnsafeProperty=t})(C4)),C4}var A4={},_7;function GF(){return _7||(_7=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}e.isDeepKey=t})(A4)),A4}var E4={},S7;function L6(){return S7||(S7=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var n;return typeof r=="string"||typeof r=="symbol"?r:Object.is((n=r==null?void 0:r.valueOf)==null?void 0:n.call(r),-0)?"-0":String(r)}e.toKey=t})(E4)),E4}var T4={},O4={},j7;function cre(){return j7||(j7=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){if(r==null)return"";if(typeof r=="string")return r;if(Array.isArray(r))return r.map(t).join(",");const n=String(r);return n==="0"&&Object.is(Number(r),-0)?"-0":n}e.toString=t})(O4)),O4}var C7;function R6(){return C7||(C7=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=cre(),r=L6();function n(a){if(Array.isArray(a))return a.map(r.toKey);if(typeof a=="symbol")return[a];a=t.toString(a);const i=[],l=a.length;if(l===0)return i;let o=0,c="",d="",f=!1;for(a.charCodeAt(0)===46&&(i.push(""),o++);o<l;){const p=a[o];d?p==="\\"&&o+1<l?(o++,c+=a[o]):p===d?d="":c+=p:f?p==='"'||p==="'"?d=p:p==="]"?(f=!1,i.push(c),c=""):c+=p:p==="["?(f=!0,c&&(i.push(c),c="")):p==="."?c&&(i.push(c),c=""):c+=p,o++}return c&&i.push(c),i}e.toPath=n})(T4)),T4}var A7;function F6(){return A7||(A7=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ore(),r=GF(),n=L6(),a=R6();function i(o,c,d){if(o==null)return d;switch(typeof c){case"string":{if(t.isUnsafeProperty(c))return d;const f=o[c];return f===void 0?r.isDeepKey(c)?i(o,a.toPath(c),d):d:f}case"number":case"symbol":{typeof c=="number"&&(c=n.toKey(c));const f=o[c];return f===void 0?d:f}default:{if(Array.isArray(c))return l(o,c,d);if(Object.is(c==null?void 0:c.valueOf(),-0)?c="-0":c=String(c),t.isUnsafeProperty(c))return d;const f=o[c];return f===void 0?d:f}}}function l(o,c,d){if(c.length===0)return d;let f=o;for(let p=0;p<c.length;p++){if(f==null||t.isUnsafeProperty(c[p]))return d;f=f[c[p]]}return f===void 0?d:f}e.get=i})(j4)),j4}var P4,E7;function dre(){return E7||(E7=1,P4=F6().get),P4}var ure=dre();const Om=gd(ure);var vl=e=>e===0?0:e>0?1:-1,Oc=e=>typeof e=="number"&&e!=+e,V0=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,Zr=e=>(typeof e=="number"||e instanceof Number)&&!Oc(e),zu=e=>Zr(e)||typeof e=="string",hre=0,Yg=e=>{var t=++hre;return"".concat(e||"").concat(t)},no=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Zr(t)&&typeof t!="string")return n;var i;if(V0(t)){if(r==null)return n;var l=t.indexOf("%");i=r*parseFloat(t.slice(0,l))/100}else i=+t;return Oc(i)&&(i=n),a&&r!=null&&i>r&&(i=r),i},XF=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,r={},n=0;n<t;n++)if(!r[e[n]])r[e[n]]=!0;else return!0;return!1};function rs(e,t,r){return Zr(e)&&Zr(t)?e+r*(t-e):t}function YF(e,t,r){if(!(!e||!e.length))return e.find(n=>n&&(typeof t=="function"?t(n):Om(n,t))===r)}var Cs=e=>e===null||typeof e>"u",Lb=e=>Cs(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1)),fre=["type","size","sizeType"];function L_(){return L_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},L_.apply(null,arguments)}function T7(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function O7(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?T7(Object(r),!0).forEach(function(n){mre(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T7(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function mre(e,t,r){return(t=xre(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xre(e){var t=pre(e,"string");return typeof t=="symbol"?t:t+""}function pre(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function gre(e,t){if(e==null)return{};var r,n,a=bre(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function bre(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var ZF={symbolCircle:M6,symbolCross:Dte,symbolDiamond:Lte,symbolSquare:Rte,symbolStar:zte,symbolTriangle:qte,symbolWye:$te},vre=Math.PI/180,yre=e=>{var t="symbol".concat(Lb(e));return ZF[t]||M6},wre=(e,t,r)=>{if(t==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var n=18*vre;return 1.25*e*e*(Math.tan(n)-Math.tan(n*2)*Math.tan(n)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},kre=(e,t)=>{ZF["symbol".concat(Lb(e))]=t},B6=e=>{var{type:t="circle",size:r=64,sizeType:n="area"}=e,a=gre(e,fre),i=O7(O7({},a),{},{type:t,size:r,sizeType:n}),l="circle";typeof t=="string"&&(l=t);var o=()=>{var y=yre(l),g=Vte().type(y).size(wre(r,n,l)),N=g();if(N!==null)return N},{className:c,cx:d,cy:f}=i,p=Eo(i);return d===+d&&f===+f&&r===+r?T.createElement("path",L_({},p,{className:Zn("recharts-symbols",c),transform:"translate(".concat(d,", ").concat(f,")"),d:o()})):null};B6.registerSymbol=kre;var U6=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(T.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var n={};return Object.keys(r).forEach(a=>{O6(a)&&(n[a]=(i=>r[a](r,i)))}),n},Nre=(e,t,r)=>n=>(e(t,r,n),null),Rb=(e,t,r)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var n=null;return Object.keys(e).forEach(a=>{var i=e[a];O6(a)&&typeof i=="function"&&(n||(n={}),n[a]=Nre(i,t,r))}),n};function R_(){return R_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},R_.apply(null,arguments)}function P7(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function _re(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?P7(Object(r),!0).forEach(function(n){z6(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P7(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function z6(e,t,r){return(t=Sre(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Sre(e){var t=jre(e,"string");return typeof t=="symbol"?t:t+""}function jre(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Zc=32;class q6 extends T.PureComponent{renderIcon(t,r){var{inactiveColor:n}=this.props,a=Zc/2,i=Zc/6,l=Zc/3,o=t.inactive?n:t.color,c=r??t.type;if(c==="none")return null;if(c==="plainline")return T.createElement("line",{strokeWidth:4,fill:"none",stroke:o,strokeDasharray:t.payload.strokeDasharray,x1:0,y1:a,x2:Zc,y2:a,className:"recharts-legend-icon"});if(c==="line")return T.createElement("path",{strokeWidth:4,fill:"none",stroke:o,d:"M0,".concat(a,"h").concat(l,`
            A`).concat(i,",").concat(i,",0,1,1,").concat(2*l,",").concat(a,`
            H`).concat(Zc,"M").concat(2*l,",").concat(a,`
            A`).concat(i,",").concat(i,",0,1,1,").concat(l,",").concat(a),className:"recharts-legend-icon"});if(c==="rect")return T.createElement("path",{stroke:"none",fill:o,d:"M0,".concat(Zc/8,"h").concat(Zc,"v").concat(Zc*3/4,"h").concat(-Zc,"z"),className:"recharts-legend-icon"});if(T.isValidElement(t.legendIcon)){var d=_re({},t);return delete d.legendIcon,T.cloneElement(t.legendIcon,d)}return T.createElement(B6,{fill:o,cx:a,cy:a,size:Zc,sizeType:"diameter",type:c})}renderItems(){var{payload:t,iconSize:r,layout:n,formatter:a,inactiveColor:i,iconType:l}=this.props,o={x:0,y:0,width:Zc,height:Zc},c={display:n==="horizontal"?"inline-block":"block",marginRight:10},d={display:"inline-block",verticalAlign:"middle",marginRight:4};return t.map((f,p)=>{var y=f.formatter||a,g=Zn({"recharts-legend-item":!0,["legend-item-".concat(p)]:!0,inactive:f.inactive});if(f.type==="none")return null;var N=f.inactive?i:f.color,w=y?y(f.value,f,p):f.value;return T.createElement("li",R_({className:g,style:c,key:"legend-item-".concat(p)},Rb(this.props,f,p)),T.createElement(P6,{width:r,height:r,viewBox:o,style:d,"aria-label":"".concat(w," legend icon")},this.renderIcon(f,l)),T.createElement("span",{className:"recharts-legend-item-text",style:{color:N}},w))})}render(){var{payload:t,layout:r,align:n}=this.props;if(!t||!t.length)return null;var a={padding:0,margin:0,textAlign:r==="horizontal"?n:"left"};return T.createElement("ul",{className:"recharts-default-legend",style:a},this.renderItems())}}z6(q6,"displayName","Legend");z6(q6,"defaultProps",{align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"});var I4={},D4={},I7;function Cre(){return I7||(I7=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){const a=new Map;for(let i=0;i<r.length;i++){const l=r[i],o=n(l);a.has(o)||a.set(o,l)}return Array.from(a.values())}e.uniqBy=t})(D4)),D4}var M4={},D7;function QF(){return D7||(D7=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r}e.identity=t})(M4)),M4}var L4={},R4={},F4={},M7;function Are(){return M7||(M7=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Number.isSafeInteger(r)&&r>=0}e.isLength=t})(F4)),F4}var L7;function H6(){return L7||(L7=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Are();function r(n){return n!=null&&typeof n!="function"&&t.isLength(n.length)}e.isArrayLike=r})(R4)),R4}var B4={},R7;function Ere(){return R7||(R7=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="object"&&r!==null}e.isObjectLike=t})(B4)),B4}var F7;function Tre(){return F7||(F7=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=H6(),r=Ere();function n(a){return r.isObjectLike(a)&&t.isArrayLike(a)}e.isArrayLikeObject=n})(L4)),L4}var U4={},z4={},B7;function Ore(){return B7||(B7=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=F6();function r(n){return function(a){return t.get(a,n)}}e.property=r})(z4)),z4}var q4={},H4={},$4={},V4={},U7;function JF(){return U7||(U7=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r!==null&&(typeof r=="object"||typeof r=="function")}e.isObject=t})(V4)),V4}var W4={},z7;function eB(){return z7||(z7=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null||typeof r!="object"&&typeof r!="function"}e.isPrimitive=t})(W4)),W4}var K4={},q7;function tB(){return q7||(q7=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){return r===n||Number.isNaN(r)&&Number.isNaN(n)}e.eq=t})(K4)),K4}var H7;function Pre(){return H7||(H7=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=JF(),r=eB(),n=tB();function a(f,p,y){return typeof y!="function"?a(f,p,()=>{}):i(f,p,function g(N,w,k,S,O,E){const D=y(N,w,k,S,O,E);return D!==void 0?!!D:i(N,w,g,E)},new Map)}function i(f,p,y,g){if(p===f)return!0;switch(typeof p){case"object":return l(f,p,y,g);case"function":return Object.keys(p).length>0?i(f,{...p},y,g):n.eq(f,p);default:return t.isObject(f)?typeof p=="string"?p==="":!0:n.eq(f,p)}}function l(f,p,y,g){if(p==null)return!0;if(Array.isArray(p))return c(f,p,y,g);if(p instanceof Map)return o(f,p,y,g);if(p instanceof Set)return d(f,p,y,g);const N=Object.keys(p);if(f==null)return N.length===0;if(N.length===0)return!0;if(g!=null&&g.has(p))return g.get(p)===f;g==null||g.set(p,f);try{for(let w=0;w<N.length;w++){const k=N[w];if(!r.isPrimitive(f)&&!(k in f)||p[k]===void 0&&f[k]!==void 0||p[k]===null&&f[k]!==null||!y(f[k],p[k],k,f,p,g))return!1}return!0}finally{g==null||g.delete(p)}}function o(f,p,y,g){if(p.size===0)return!0;if(!(f instanceof Map))return!1;for(const[N,w]of p.entries()){const k=f.get(N);if(y(k,w,N,f,p,g)===!1)return!1}return!0}function c(f,p,y,g){if(p.length===0)return!0;if(!Array.isArray(f))return!1;const N=new Set;for(let w=0;w<p.length;w++){const k=p[w];let S=!1;for(let O=0;O<f.length;O++){if(N.has(O))continue;const E=f[O];let D=!1;if(y(E,k,w,f,p,g)&&(D=!0),D){N.add(O),S=!0;break}}if(!S)return!1}return!0}function d(f,p,y,g){return p.size===0?!0:f instanceof Set?c([...f],[...p],y,g):!1}e.isMatchWith=a,e.isSetMatch=d})($4)),$4}var $7;function rB(){return $7||($7=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Pre();function r(n,a){return t.isMatchWith(n,a,()=>{})}e.isMatch=r})(H4)),H4}var G4={},X4={},Y4={},V7;function Ire(){return V7||(V7=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Object.getOwnPropertySymbols(r).filter(n=>Object.prototype.propertyIsEnumerable.call(r,n))}e.getSymbols=t})(Y4)),Y4}var Z4={},W7;function nB(){return W7||(W7=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}e.getTag=t})(Z4)),Z4}var Q4={},K7;function aB(){return K7||(K7=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",r="[object String]",n="[object Number]",a="[object Boolean]",i="[object Arguments]",l="[object Symbol]",o="[object Date]",c="[object Map]",d="[object Set]",f="[object Array]",p="[object Function]",y="[object ArrayBuffer]",g="[object Object]",N="[object Error]",w="[object DataView]",k="[object Uint8Array]",S="[object Uint8ClampedArray]",O="[object Uint16Array]",E="[object Uint32Array]",D="[object BigUint64Array]",q="[object Int8Array]",W="[object Int16Array]",R="[object Int32Array]",U="[object BigInt64Array]",z="[object Float32Array]",Z="[object Float64Array]";e.argumentsTag=i,e.arrayBufferTag=y,e.arrayTag=f,e.bigInt64ArrayTag=U,e.bigUint64ArrayTag=D,e.booleanTag=a,e.dataViewTag=w,e.dateTag=o,e.errorTag=N,e.float32ArrayTag=z,e.float64ArrayTag=Z,e.functionTag=p,e.int16ArrayTag=W,e.int32ArrayTag=R,e.int8ArrayTag=q,e.mapTag=c,e.numberTag=n,e.objectTag=g,e.regexpTag=t,e.setTag=d,e.stringTag=r,e.symbolTag=l,e.uint16ArrayTag=O,e.uint32ArrayTag=E,e.uint8ArrayTag=k,e.uint8ClampedArrayTag=S})(Q4)),Q4}var J4={},G7;function Dre(){return G7||(G7=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}e.isTypedArray=t})(J4)),J4}var X7;function sB(){return X7||(X7=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Ire(),r=nB(),n=aB(),a=eB(),i=Dre();function l(f,p){return o(f,void 0,f,new Map,p)}function o(f,p,y,g=new Map,N=void 0){const w=N==null?void 0:N(f,p,y,g);if(w!==void 0)return w;if(a.isPrimitive(f))return f;if(g.has(f))return g.get(f);if(Array.isArray(f)){const k=new Array(f.length);g.set(f,k);for(let S=0;S<f.length;S++)k[S]=o(f[S],S,y,g,N);return Object.hasOwn(f,"index")&&(k.index=f.index),Object.hasOwn(f,"input")&&(k.input=f.input),k}if(f instanceof Date)return new Date(f.getTime());if(f instanceof RegExp){const k=new RegExp(f.source,f.flags);return k.lastIndex=f.lastIndex,k}if(f instanceof Map){const k=new Map;g.set(f,k);for(const[S,O]of f)k.set(S,o(O,S,y,g,N));return k}if(f instanceof Set){const k=new Set;g.set(f,k);for(const S of f)k.add(o(S,void 0,y,g,N));return k}if(typeof Buffer<"u"&&Buffer.isBuffer(f))return f.subarray();if(i.isTypedArray(f)){const k=new(Object.getPrototypeOf(f)).constructor(f.length);g.set(f,k);for(let S=0;S<f.length;S++)k[S]=o(f[S],S,y,g,N);return k}if(f instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&f instanceof SharedArrayBuffer)return f.slice(0);if(f instanceof DataView){const k=new DataView(f.buffer.slice(0),f.byteOffset,f.byteLength);return g.set(f,k),c(k,f,y,g,N),k}if(typeof File<"u"&&f instanceof File){const k=new File([f],f.name,{type:f.type});return g.set(f,k),c(k,f,y,g,N),k}if(typeof Blob<"u"&&f instanceof Blob){const k=new Blob([f],{type:f.type});return g.set(f,k),c(k,f,y,g,N),k}if(f instanceof Error){const k=new f.constructor;return g.set(f,k),k.message=f.message,k.name=f.name,k.stack=f.stack,k.cause=f.cause,c(k,f,y,g,N),k}if(f instanceof Boolean){const k=new Boolean(f.valueOf());return g.set(f,k),c(k,f,y,g,N),k}if(f instanceof Number){const k=new Number(f.valueOf());return g.set(f,k),c(k,f,y,g,N),k}if(f instanceof String){const k=new String(f.valueOf());return g.set(f,k),c(k,f,y,g,N),k}if(typeof f=="object"&&d(f)){const k=Object.create(Object.getPrototypeOf(f));return g.set(f,k),c(k,f,y,g,N),k}return f}function c(f,p,y=f,g,N){const w=[...Object.keys(p),...t.getSymbols(p)];for(let k=0;k<w.length;k++){const S=w[k],O=Object.getOwnPropertyDescriptor(f,S);(O==null||O.writable)&&(f[S]=o(p[S],S,y,g,N))}}function d(f){switch(r.getTag(f)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=l,e.cloneDeepWithImpl=o,e.copyProperties=c})(X4)),X4}var Y7;function Mre(){return Y7||(Y7=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=sB();function r(n){return t.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}e.cloneDeep=r})(G4)),G4}var Z7;function Lre(){return Z7||(Z7=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=rB(),r=Mre();function n(a){return a=r.cloneDeep(a),i=>t.isMatch(i,a)}e.matches=n})(q4)),q4}var e3={},t3={},r3={},Q7;function Rre(){return Q7||(Q7=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=sB(),r=aB();function n(a,i){return t.cloneDeepWith(a,(l,o,c,d)=>{const f=i==null?void 0:i(l,o,c,d);if(f!==void 0)return f;if(typeof a=="object")switch(Object.prototype.toString.call(a)){case r.numberTag:case r.stringTag:case r.booleanTag:{const p=new a.constructor(a==null?void 0:a.valueOf());return t.copyProperties(p,a),p}case r.argumentsTag:{const p={};return t.copyProperties(p,a),p.length=a.length,p[Symbol.iterator]=a[Symbol.iterator],p}default:return}})}e.cloneDeepWith=n})(r3)),r3}var J7;function Fre(){return J7||(J7=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Rre();function r(n){return t.cloneDeepWith(n)}e.cloneDeep=r})(t3)),t3}var n3={},a3={},eO;function iB(){return eO||(eO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function r(n,a=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<a;case"symbol":return!1;case"string":return t.test(n)}}e.isIndex=r})(a3)),a3}var s3={},tO;function Bre(){return tO||(tO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=nB();function r(n){return n!==null&&typeof n=="object"&&t.getTag(n)==="[object Arguments]"}e.isArguments=r})(s3)),s3}var rO;function Ure(){return rO||(rO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=GF(),r=iB(),n=Bre(),a=R6();function i(l,o){let c;if(Array.isArray(o)?c=o:typeof o=="string"&&t.isDeepKey(o)&&(l==null?void 0:l[o])==null?c=a.toPath(o):c=[o],c.length===0)return!1;let d=l;for(let f=0;f<c.length;f++){const p=c[f];if((d==null||!Object.hasOwn(d,p))&&!((Array.isArray(d)||n.isArguments(d))&&r.isIndex(p)&&p<d.length))return!1;d=d[p]}return!0}e.has=i})(n3)),n3}var nO;function zre(){return nO||(nO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=rB(),r=L6(),n=Fre(),a=F6(),i=Ure();function l(o,c){switch(typeof o){case"object":{Object.is(o==null?void 0:o.valueOf(),-0)&&(o="-0");break}case"number":{o=r.toKey(o);break}}return c=n.cloneDeep(c),function(d){const f=a.get(d,o);return f===void 0?i.has(d,o):c===void 0?f===void 0:t.isMatch(f,c)}}e.matchesProperty=l})(e3)),e3}var aO;function qre(){return aO||(aO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=QF(),r=Ore(),n=Lre(),a=zre();function i(l){if(l==null)return t.identity;switch(typeof l){case"function":return l;case"object":return Array.isArray(l)&&l.length===2?a.matchesProperty(l[0],l[1]):n.matches(l);case"string":case"symbol":case"number":return r.property(l)}}e.iteratee=i})(U4)),U4}var sO;function Hre(){return sO||(sO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Cre(),r=QF(),n=Tre(),a=qre();function i(l,o=r.identity){return n.isArrayLikeObject(l)?t.uniqBy(Array.from(l),a.iteratee(o)):[]}e.uniqBy=i})(I4)),I4}var i3,iO;function $re(){return iO||(iO=1,i3=Hre().uniqBy),i3}var Vre=$re();const lO=gd(Vre);function lB(e,t,r){return t===!0?lO(e,r):typeof t=="function"?lO(e,t):e}var l3={exports:{}},o3={},c3={exports:{}},d3={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oO;function Wre(){if(oO)return d3;oO=1;var e=Y1();function t(p,y){return p===y&&(p!==0||1/p===1/y)||p!==p&&y!==y}var r=typeof Object.is=="function"?Object.is:t,n=e.useState,a=e.useEffect,i=e.useLayoutEffect,l=e.useDebugValue;function o(p,y){var g=y(),N=n({inst:{value:g,getSnapshot:y}}),w=N[0].inst,k=N[1];return i(function(){w.value=g,w.getSnapshot=y,c(w)&&k({inst:w})},[p,g,y]),a(function(){return c(w)&&k({inst:w}),p(function(){c(w)&&k({inst:w})})},[p]),l(g),g}function c(p){var y=p.getSnapshot;p=p.value;try{var g=y();return!r(p,g)}catch{return!0}}function d(p,y){return y()}var f=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:o;return d3.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:f,d3}var cO;function Kre(){return cO||(cO=1,c3.exports=Wre()),c3.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dO;function Gre(){if(dO)return o3;dO=1;var e=Y1(),t=Kre();function r(d,f){return d===f&&(d!==0||1/d===1/f)||d!==d&&f!==f}var n=typeof Object.is=="function"?Object.is:r,a=t.useSyncExternalStore,i=e.useRef,l=e.useEffect,o=e.useMemo,c=e.useDebugValue;return o3.useSyncExternalStoreWithSelector=function(d,f,p,y,g){var N=i(null);if(N.current===null){var w={hasValue:!1,value:null};N.current=w}else w=N.current;N=o(function(){function S(W){if(!O){if(O=!0,E=W,W=y(W),g!==void 0&&w.hasValue){var R=w.value;if(g(R,W))return D=R}return D=W}if(R=D,n(E,W))return R;var U=y(W);return g!==void 0&&g(R,U)?(E=W,R):(E=W,D=U)}var O=!1,E,D,q=p===void 0?null:p;return[function(){return S(f())},q===null?void 0:function(){return S(q())}]},[f,p,y,g]);var k=a(d,N[0],N[1]);return l(function(){w.hasValue=!0,w.value=k},[k]),c(k),k},o3}var uO;function Xre(){return uO||(uO=1,l3.exports=Gre()),l3.exports}var Yre=Xre(),$6=T.createContext(null),Zre=e=>e,Us=()=>{var e=T.useContext($6);return e?e.store.dispatch:Zre},ey=()=>{},Qre=()=>ey,Jre=(e,t)=>e===t;function Jr(e){var t=T.useContext($6);return Yre.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:Qre,t?t.store.getState:ey,t?t.store.getState:ey,t?e:ey,Jre)}function ene(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function tne(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function rne(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(r=>typeof r=="function")){const r=e.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${t}[${r}]`)}}var hO=e=>Array.isArray(e)?e:[e];function nne(e){const t=Array.isArray(e[0])?e[0]:e;return rne(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function ane(e,t){const r=[],{length:n}=e;for(let a=0;a<n;a++)r.push(e[a].apply(null,t));return r}var sne=class{constructor(e){this.value=e}deref(){return this.value}},ine=typeof WeakRef<"u"?WeakRef:sne,lne=0,fO=1;function x2(){return{s:lne,v:void 0,o:null,p:null}}function oB(e,t={}){let r=x2();const{resultEqualityCheck:n}=t;let a,i=0;function l(){var p;let o=r;const{length:c}=arguments;for(let y=0,g=c;y<g;y++){const N=arguments[y];if(typeof N=="function"||typeof N=="object"&&N!==null){let w=o.o;w===null&&(o.o=w=new WeakMap);const k=w.get(N);k===void 0?(o=x2(),w.set(N,o)):o=k}else{let w=o.p;w===null&&(o.p=w=new Map);const k=w.get(N);k===void 0?(o=x2(),w.set(N,o)):o=k}}const d=o;let f;if(o.s===fO)f=o.v;else if(f=e.apply(null,arguments),i++,n){const y=((p=a==null?void 0:a.deref)==null?void 0:p.call(a))??a;y!=null&&n(y,f)&&(f=y,i!==0&&i--),a=typeof f=="object"&&f!==null||typeof f=="function"?new ine(f):f}return d.s=fO,d.v=f,f}return l.clearCache=()=>{r=x2(),l.resetResultsCount()},l.resultsCount=()=>i,l.resetResultsCount=()=>{i=0},l}function one(e,...t){const r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,n=(...a)=>{let i=0,l=0,o,c={},d=a.pop();typeof d=="object"&&(c=d,d=a.pop()),ene(d,`createSelector expects an output function after the inputs, but received: [${typeof d}]`);const f={...r,...c},{memoize:p,memoizeOptions:y=[],argsMemoize:g=oB,argsMemoizeOptions:N=[]}=f,w=hO(y),k=hO(N),S=nne(a),O=p(function(){return i++,d.apply(null,arguments)},...w),E=g(function(){l++;const q=ane(S,arguments);return o=O.apply(null,q),o},...k);return Object.assign(E,{resultFunc:d,memoizedResultFunc:O,dependencies:S,dependencyRecomputations:()=>l,resetDependencyRecomputations:()=>{l=0},lastResult:()=>o,recomputations:()=>i,resetRecomputations:()=>{i=0},memoize:p,argsMemoize:g})};return Object.assign(n,{withTypes:()=>n}),n}var jt=one(oB),cne=Object.assign((e,t=jt)=>{tne(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const r=Object.keys(e),n=r.map(i=>e[i]);return t(n,(...i)=>i.reduce((l,o,c)=>(l[r[c]]=o,l),{}))},{withTypes:()=>cne}),u3={},h3={},f3={},mO;function dne(){return mO||(mO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const r=(n,a,i)=>{if(n!==a){const l=t(n),o=t(a);if(l===o&&l===0){if(n<a)return i==="desc"?1:-1;if(n>a)return i==="desc"?-1:1}return i==="desc"?o-l:l-o}return 0};e.compareValues=r})(f3)),f3}var m3={},x3={},xO;function cB(){return xO||(xO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"||r instanceof Symbol}e.isSymbol=t})(x3)),x3}var pO;function une(){return pO||(pO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=cB(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function a(i,l){return Array.isArray(i)?!1:typeof i=="number"||typeof i=="boolean"||i==null||t.isSymbol(i)?!0:typeof i=="string"&&(n.test(i)||!r.test(i))||l!=null&&Object.hasOwn(l,i)}e.isKey=a})(m3)),m3}var gO;function hne(){return gO||(gO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=dne(),r=une(),n=R6();function a(i,l,o,c){if(i==null)return[];o=c?void 0:o,Array.isArray(i)||(i=Object.values(i)),Array.isArray(l)||(l=l==null?[null]:[l]),l.length===0&&(l=[null]),Array.isArray(o)||(o=o==null?[]:[o]),o=o.map(g=>String(g));const d=(g,N)=>{let w=g;for(let k=0;k<N.length&&w!=null;++k)w=w[N[k]];return w},f=(g,N)=>N==null||g==null?N:typeof g=="object"&&"key"in g?Object.hasOwn(N,g.key)?N[g.key]:d(N,g.path):typeof g=="function"?g(N):Array.isArray(g)?d(N,g):typeof N=="object"?N[g]:N,p=l.map(g=>(Array.isArray(g)&&g.length===1&&(g=g[0]),g==null||typeof g=="function"||Array.isArray(g)||r.isKey(g)?g:{key:g,path:n.toPath(g)}));return i.map(g=>({original:g,criteria:p.map(N=>f(N,g))})).slice().sort((g,N)=>{for(let w=0;w<p.length;w++){const k=t.compareValues(g.criteria[w],N.criteria[w],o[w]);if(k!==0)return k}return 0}).map(g=>g.original)}e.orderBy=a})(h3)),h3}var p3={},bO;function fne(){return bO||(bO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n=1){const a=[],i=Math.floor(n),l=(o,c)=>{for(let d=0;d<o.length;d++){const f=o[d];Array.isArray(f)&&c<i?l(f,c+1):a.push(f)}};return l(r,0),a}e.flatten=t})(p3)),p3}var g3={},vO;function dB(){return vO||(vO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=iB(),r=H6(),n=JF(),a=tB();function i(l,o,c){return n.isObject(c)&&(typeof o=="number"&&r.isArrayLike(c)&&t.isIndex(o)&&o<c.length||typeof o=="string"&&o in c)?a.eq(c[o],l):!1}e.isIterateeCall=i})(g3)),g3}var yO;function mne(){return yO||(yO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=hne(),r=fne(),n=dB();function a(i,...l){const o=l.length;return o>1&&n.isIterateeCall(i,l[0],l[1])?l=[]:o>2&&n.isIterateeCall(l[0],l[1],l[2])&&(l=[l[0]]),t.orderBy(i,r.flatten(l),["asc"])}e.sortBy=a})(u3)),u3}var b3,wO;function xne(){return wO||(wO=1,b3=mne().sortBy),b3}var pne=xne();const $w=gd(pne);var uB=e=>e.legend.settings,gne=e=>e.legend.size,bne=e=>e.legend.payload,vne=jt([bne,uB],(e,t)=>{var{itemSorter:r}=t,n=e.flat(1);return r?$w(n,r):n});function yne(){return Jr(vne)}var p2=1;function hB(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,r]=T.useState({height:0,left:0,top:0,width:0}),n=T.useCallback(a=>{if(a!=null){var i=a.getBoundingClientRect(),l={height:i.height,left:i.left,top:i.top,width:i.width};(Math.abs(l.height-t.height)>p2||Math.abs(l.left-t.left)>p2||Math.abs(l.top-t.top)>p2||Math.abs(l.width-t.width)>p2)&&r({height:l.height,left:l.left,top:l.top,width:l.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,n]}function Ol(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var wne=typeof Symbol=="function"&&Symbol.observable||"@@observable",kO=wne,v3=()=>Math.random().toString(36).substring(7).split("").join("."),kne={INIT:`@@redux/INIT${v3()}`,REPLACE:`@@redux/REPLACE${v3()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${v3()}`},Sy=kne;function V6(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function fB(e,t,r){if(typeof e!="function")throw new Error(Ol(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Ol(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Ol(1));return r(fB)(e,t)}let n=e,a=t,i=new Map,l=i,o=0,c=!1;function d(){l===i&&(l=new Map,i.forEach((k,S)=>{l.set(S,k)}))}function f(){if(c)throw new Error(Ol(3));return a}function p(k){if(typeof k!="function")throw new Error(Ol(4));if(c)throw new Error(Ol(5));let S=!0;d();const O=o++;return l.set(O,k),function(){if(S){if(c)throw new Error(Ol(6));S=!1,d(),l.delete(O),i=null}}}function y(k){if(!V6(k))throw new Error(Ol(7));if(typeof k.type>"u")throw new Error(Ol(8));if(typeof k.type!="string")throw new Error(Ol(17));if(c)throw new Error(Ol(9));try{c=!0,a=n(a,k)}finally{c=!1}return(i=l).forEach(O=>{O()}),k}function g(k){if(typeof k!="function")throw new Error(Ol(10));n=k,y({type:Sy.REPLACE})}function N(){const k=p;return{subscribe(S){if(typeof S!="object"||S===null)throw new Error(Ol(11));function O(){const D=S;D.next&&D.next(f())}return O(),{unsubscribe:k(O)}},[kO](){return this}}}return y({type:Sy.INIT}),{dispatch:y,subscribe:p,getState:f,replaceReducer:g,[kO]:N}}function Nne(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:Sy.INIT})>"u")throw new Error(Ol(12));if(typeof r(void 0,{type:Sy.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Ol(13))})}function mB(e){const t=Object.keys(e),r={};for(let i=0;i<t.length;i++){const l=t[i];typeof e[l]=="function"&&(r[l]=e[l])}const n=Object.keys(r);let a;try{Nne(r)}catch(i){a=i}return function(l={},o){if(a)throw a;let c=!1;const d={};for(let f=0;f<n.length;f++){const p=n[f],y=r[p],g=l[p],N=y(g,o);if(typeof N>"u")throw o&&o.type,new Error(Ol(14));d[p]=N,c=c||N!==g}return c=c||n.length!==Object.keys(l).length,c?d:l}}function jy(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function _ne(...e){return t=>(r,n)=>{const a=t(r,n);let i=()=>{throw new Error(Ol(15))};const l={getState:a.getState,dispatch:(c,...d)=>i(c,...d)},o=e.map(c=>c(l));return i=jy(...o)(a.dispatch),{...a,dispatch:i}}}function xB(e){return V6(e)&&"type"in e&&typeof e.type=="string"}var pB=Symbol.for("immer-nothing"),NO=Symbol.for("immer-draftable"),Pc=Symbol.for("immer-state");function Wd(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Zg=Object.getPrototypeOf;function Pm(e){return!!e&&!!e[Pc]}function W0(e){var t;return e?gB(e)||Array.isArray(e)||!!e[NO]||!!((t=e.constructor)!=null&&t[NO])||Fb(e)||Ww(e):!1}var Sne=Object.prototype.constructor.toString(),_O=new WeakMap;function gB(e){if(!e||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);if(t===null||t===Object.prototype)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;if(r===Object)return!0;if(typeof r!="function")return!1;let n=_O.get(r);return n===void 0&&(n=Function.toString.call(r),_O.set(r,n)),n===Sne}function Cy(e,t,r=!0){Vw(e)===0?(r?Reflect.ownKeys(e):Object.keys(e)).forEach(a=>{t(a,e[a],e)}):e.forEach((n,a)=>t(a,n,e))}function Vw(e){const t=e[Pc];return t?t.type_:Array.isArray(e)?1:Fb(e)?2:Ww(e)?3:0}function F_(e,t){return Vw(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function bB(e,t,r){const n=Vw(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function jne(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Fb(e){return e instanceof Map}function Ww(e){return e instanceof Set}function qf(e){return e.copy_||e.base_}function B_(e,t){if(Fb(e))return new Map(e);if(Ww(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=gB(e);if(t===!0||t==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(e);delete n[Pc];let a=Reflect.ownKeys(n);for(let i=0;i<a.length;i++){const l=a[i],o=n[l];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(n[l]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[l]})}return Object.create(Zg(e),n)}else{const n=Zg(e);if(n!==null&&r)return{...e};const a=Object.create(n);return Object.assign(a,e)}}function W6(e,t=!1){return Kw(e)||Pm(e)||!W0(e)||(Vw(e)>1&&Object.defineProperties(e,{set:g2,add:g2,clear:g2,delete:g2}),Object.freeze(e),t&&Object.values(e).forEach(r=>W6(r,!0))),e}function Cne(){Wd(2)}var g2={value:Cne};function Kw(e){return e===null||typeof e!="object"?!0:Object.isFrozen(e)}var Ane={};function Im(e){const t=Ane[e];return t||Wd(0,e),t}var Qg;function vB(){return Qg}function Ene(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function SO(e,t){t&&(Im("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function U_(e){z_(e),e.drafts_.forEach(Tne),e.drafts_=null}function z_(e){e===Qg&&(Qg=e.parent_)}function jO(e){return Qg=Ene(Qg,e)}function Tne(e){const t=e[Pc];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function CO(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[Pc].modified_&&(U_(t),Wd(4)),W0(e)&&(e=Ay(t,e),t.parent_||Ey(t,e)),t.patches_&&Im("Patches").generateReplacementPatches_(r[Pc].base_,e,t.patches_,t.inversePatches_)):e=Ay(t,r,[]),U_(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==pB?e:void 0}function Ay(e,t,r){if(Kw(t))return t;const n=e.immer_.shouldUseStrictIteration(),a=t[Pc];if(!a)return Cy(t,(i,l)=>AO(e,a,t,i,l,r),n),t;if(a.scope_!==e)return t;if(!a.modified_)return Ey(e,a.base_,!0),a.base_;if(!a.finalized_){a.finalized_=!0,a.scope_.unfinalizedDrafts_--;const i=a.copy_;let l=i,o=!1;a.type_===3&&(l=new Set(i),i.clear(),o=!0),Cy(l,(c,d)=>AO(e,a,i,c,d,r,o),n),Ey(e,i,!1),r&&e.patches_&&Im("Patches").generatePatches_(a,r,e.patches_,e.inversePatches_)}return a.copy_}function AO(e,t,r,n,a,i,l){if(a==null||typeof a!="object"&&!l)return;const o=Kw(a);if(!(o&&!l)){if(Pm(a)){const c=i&&t&&t.type_!==3&&!F_(t.assigned_,n)?i.concat(n):void 0,d=Ay(e,a,c);if(bB(r,n,d),Pm(d))e.canAutoFreeze_=!1;else return}else l&&r.add(a);if(W0(a)&&!o){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1||t&&t.base_&&t.base_[n]===a&&o)return;Ay(e,a),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&(Fb(r)?r.has(n):Object.prototype.propertyIsEnumerable.call(r,n))&&Ey(e,a)}}}function Ey(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&W6(t,r)}function One(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:vB(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=n,i=K6;r&&(a=[n],i=Jg);const{revoke:l,proxy:o}=Proxy.revocable(a,i);return n.draft_=o,n.revoke_=l,o}var K6={get(e,t){if(t===Pc)return e;const r=qf(e);if(!F_(r,t))return Pne(e,r,t);const n=r[t];return e.finalized_||!W0(n)?n:n===y3(e.base_,t)?(w3(e),e.copy_[t]=H_(n,e)):n},has(e,t){return t in qf(e)},ownKeys(e){return Reflect.ownKeys(qf(e))},set(e,t,r){const n=yB(qf(e),t);if(n!=null&&n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const a=y3(qf(e),t),i=a==null?void 0:a[Pc];if(i&&i.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(jne(r,a)&&(r!==void 0||F_(e.base_,t)))return!0;w3(e),q_(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return y3(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,w3(e),q_(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=qf(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){Wd(11)},getPrototypeOf(e){return Zg(e.base_)},setPrototypeOf(){Wd(12)}},Jg={};Cy(K6,(e,t)=>{Jg[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Jg.deleteProperty=function(e,t){return Jg.set.call(this,e,t,void 0)};Jg.set=function(e,t,r){return K6.set.call(this,e[0],t,r,e[0])};function y3(e,t){const r=e[Pc];return(r?qf(r):e)[t]}function Pne(e,t,r){var a;const n=yB(t,r);return n?"value"in n?n.value:(a=n.get)==null?void 0:a.call(e.draft_):void 0}function yB(e,t){if(!(t in e))return;let r=Zg(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Zg(r)}}function q_(e){e.modified_||(e.modified_=!0,e.parent_&&q_(e.parent_))}function w3(e){e.copy_||(e.copy_=B_(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var Ine=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){const i=r;r=t;const l=this;return function(c=i,...d){return l.produce(c,f=>r.call(this,f,...d))}}typeof r!="function"&&Wd(6),n!==void 0&&typeof n!="function"&&Wd(7);let a;if(W0(t)){const i=jO(this),l=H_(t,void 0);let o=!0;try{a=r(l),o=!1}finally{o?U_(i):z_(i)}return SO(i,n),CO(a,i)}else if(!t||typeof t!="object"){if(a=r(t),a===void 0&&(a=t),a===pB&&(a=void 0),this.autoFreeze_&&W6(a,!0),n){const i=[],l=[];Im("Patches").generateReplacementPatches_(t,a,i,l),n(i,l)}return a}else Wd(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(l,...o)=>this.produceWithPatches(l,c=>t(c,...o));let n,a;return[this.produce(t,r,(l,o)=>{n=l,a=o}),n,a]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),typeof(e==null?void 0:e.useStrictIteration)=="boolean"&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){W0(e)||Wd(8),Pm(e)&&(e=M0(e));const t=jO(this),r=H_(e,void 0);return r[Pc].isManual_=!0,z_(t),r}finishDraft(e,t){const r=e&&e[Pc];(!r||!r.isManual_)&&Wd(9);const{scope_:n}=r;return SO(n,t),CO(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const a=t[r];if(a.path.length===0&&a.op==="replace"){e=a.value;break}}r>-1&&(t=t.slice(r+1));const n=Im("Patches").applyPatches_;return Pm(e)?n(e,t):this.produce(e,a=>n(a,t))}};function H_(e,t){const r=Fb(e)?Im("MapSet").proxyMap_(e,t):Ww(e)?Im("MapSet").proxySet_(e,t):One(e,t);return(t?t.scope_:vB()).drafts_.push(r),r}function M0(e){return Pm(e)||Wd(10,e),wB(e)}function wB(e){if(!W0(e)||Kw(e))return e;const t=e[Pc];let r,n=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=B_(e,t.scope_.immer_.useStrictShallowCopy_),n=t.scope_.immer_.shouldUseStrictIteration()}else r=B_(e,!0);return Cy(r,(a,i)=>{bB(r,a,wB(i))},n),t&&(t.finalized_=!1),r}var $_=new Ine,kB=$_.produce,Dne=$_.setUseStrictIteration.bind($_);function NB(e){return({dispatch:r,getState:n})=>a=>i=>typeof i=="function"?i(r,n,e):a(i)}var Mne=NB(),Lne=NB,Rne=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?jy:jy.apply(null,arguments)};function fd(e,t){function r(...n){if(t){let a=t(...n);if(!a)throw new Error(Tc(0));return{type:e,payload:a.payload,..."meta"in a&&{meta:a.meta},..."error"in a&&{error:a.error}}}return{type:e,payload:n[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=n=>xB(n)&&n.type===e,r}var _B=class gg extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,gg.prototype)}static get[Symbol.species](){return gg}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new gg(...t[0].concat(this)):new gg(...t.concat(this))}};function EO(e){return W0(e)?kB(e,()=>{}):e}function b2(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function Fne(e){return typeof e=="boolean"}var Bne=()=>function(t){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:a=!0,actionCreatorCheck:i=!0}=t??{};let l=new _B;return r&&(Fne(r)?l.push(Mne):l.push(Lne(r.extraArgument))),l},SB="RTK_autoBatch",No=()=>e=>({payload:e,meta:{[SB]:!0}}),TO=e=>t=>{setTimeout(t,e)},jB=(e={type:"raf"})=>t=>(...r)=>{const n=t(...r);let a=!0,i=!1,l=!1;const o=new Set,c=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:TO(10):e.type==="callback"?e.queueNotification:TO(e.timeout),d=()=>{l=!1,i&&(i=!1,o.forEach(f=>f()))};return Object.assign({},n,{subscribe(f){const p=()=>a&&f(),y=n.subscribe(p);return o.add(f),()=>{y(),o.delete(f)}},dispatch(f){var p;try{return a=!((p=f==null?void 0:f.meta)!=null&&p[SB]),i=!a,i&&(l||(l=!0,c(d))),n.dispatch(f)}finally{a=!0}}})},Une=e=>function(r){const{autoBatch:n=!0}=r??{};let a=new _B(e);return n&&a.push(jB(typeof n=="object"?n:void 0)),a};function zne(e){const t=Bne(),{reducer:r=void 0,middleware:n,devTools:a=!0,preloadedState:i=void 0,enhancers:l=void 0}=e||{};let o;if(typeof r=="function")o=r;else if(V6(r))o=mB(r);else throw new Error(Tc(1));let c;typeof n=="function"?c=n(t):c=t();let d=jy;a&&(d=Rne({trace:!1,...typeof a=="object"&&a}));const f=_ne(...c),p=Une(f);let y=typeof l=="function"?l(p):p();const g=d(...y);return fB(o,i,g)}function CB(e){const t={},r=[];let n;const a={addCase(i,l){const o=typeof i=="string"?i:i.type;if(!o)throw new Error(Tc(28));if(o in t)throw new Error(Tc(29));return t[o]=l,a},addAsyncThunk(i,l){return l.pending&&(t[i.pending.type]=l.pending),l.rejected&&(t[i.rejected.type]=l.rejected),l.fulfilled&&(t[i.fulfilled.type]=l.fulfilled),l.settled&&r.push({matcher:i.settled,reducer:l.settled}),a},addMatcher(i,l){return r.push({matcher:i,reducer:l}),a},addDefaultCase(i){return n=i,a}};return e(a),[t,r,n]}Dne(!1);function qne(e){return typeof e=="function"}function Hne(e,t){let[r,n,a]=CB(t),i;if(qne(e))i=()=>EO(e());else{const o=EO(e);i=()=>o}function l(o=i(),c){let d=[r[c.type],...n.filter(({matcher:f})=>f(c)).map(({reducer:f})=>f)];return d.filter(f=>!!f).length===0&&(d=[a]),d.reduce((f,p)=>{if(p)if(Pm(f)){const g=p(f,c);return g===void 0?f:g}else{if(W0(f))return kB(f,y=>p(y,c));{const y=p(f,c);if(y===void 0){if(f===null)return f;throw Error("A case reducer on a non-draftable value must not return undefined")}return y}}return f},o)}return l.getInitialState=i,l}var $ne="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Vne=(e=21)=>{let t="",r=e;for(;r--;)t+=$ne[Math.random()*64|0];return t},Wne=Symbol.for("rtk-slice-createasyncthunk");function Kne(e,t){return`${e}/${t}`}function Gne({creators:e}={}){var r;const t=(r=e==null?void 0:e.asyncThunk)==null?void 0:r[Wne];return function(a){const{name:i,reducerPath:l=i}=a;if(!i)throw new Error(Tc(11));const o=(typeof a.reducers=="function"?a.reducers(Yne()):a.reducers)||{},c=Object.keys(o),d={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},f={addCase(D,q){const W=typeof D=="string"?D:D.type;if(!W)throw new Error(Tc(12));if(W in d.sliceCaseReducersByType)throw new Error(Tc(13));return d.sliceCaseReducersByType[W]=q,f},addMatcher(D,q){return d.sliceMatchers.push({matcher:D,reducer:q}),f},exposeAction(D,q){return d.actionCreators[D]=q,f},exposeCaseReducer(D,q){return d.sliceCaseReducersByName[D]=q,f}};c.forEach(D=>{const q=o[D],W={reducerName:D,type:Kne(i,D),createNotation:typeof a.reducers=="function"};Qne(q)?eae(W,q,f,t):Zne(W,q,f)});function p(){const[D={},q=[],W=void 0]=typeof a.extraReducers=="function"?CB(a.extraReducers):[a.extraReducers],R={...D,...d.sliceCaseReducersByType};return Hne(a.initialState,U=>{for(let z in R)U.addCase(z,R[z]);for(let z of d.sliceMatchers)U.addMatcher(z.matcher,z.reducer);for(let z of q)U.addMatcher(z.matcher,z.reducer);W&&U.addDefaultCase(W)})}const y=D=>D,g=new Map,N=new WeakMap;let w;function k(D,q){return w||(w=p()),w(D,q)}function S(){return w||(w=p()),w.getInitialState()}function O(D,q=!1){function W(U){let z=U[D];return typeof z>"u"&&q&&(z=b2(N,W,S)),z}function R(U=y){const z=b2(g,q,()=>new WeakMap);return b2(z,U,()=>{const Z={};for(const[H,K]of Object.entries(a.selectors??{}))Z[H]=Xne(K,U,()=>b2(N,U,S),q);return Z})}return{reducerPath:D,getSelectors:R,get selectors(){return R(W)},selectSlice:W}}const E={name:i,reducer:k,actions:d.actionCreators,caseReducers:d.sliceCaseReducersByName,getInitialState:S,...O(l),injectInto(D,{reducerPath:q,...W}={}){const R=q??l;return D.inject({reducerPath:R,reducer:k},W),{...E,...O(R,!0)}}};return E}}function Xne(e,t,r,n){function a(i,...l){let o=t(i);return typeof o>"u"&&n&&(o=r()),e(o,...l)}return a.unwrapped=e,a}var Mc=Gne();function Yne(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function Zne({type:e,reducerName:t,createNotation:r},n,a){let i,l;if("reducer"in n){if(r&&!Jne(n))throw new Error(Tc(17));i=n.reducer,l=n.prepare}else i=n;a.addCase(e,i).exposeCaseReducer(t,i).exposeAction(t,l?fd(e,l):fd(e))}function Qne(e){return e._reducerDefinitionType==="asyncThunk"}function Jne(e){return e._reducerDefinitionType==="reducerWithPrepare"}function eae({type:e,reducerName:t},r,n,a){if(!a)throw new Error(Tc(18));const{payloadCreator:i,fulfilled:l,pending:o,rejected:c,settled:d,options:f}=r,p=a(e,i,f);n.exposeAction(t,p),l&&n.addCase(p.fulfilled,l),o&&n.addCase(p.pending,o),c&&n.addCase(p.rejected,c),d&&n.addMatcher(p.settled,d),n.exposeCaseReducer(t,{fulfilled:l||v2,pending:o||v2,rejected:c||v2,settled:d||v2})}function v2(){}var tae="task",AB="listener",EB="completed",G6="cancelled",rae=`task-${G6}`,nae=`task-${EB}`,V_=`${AB}-${G6}`,aae=`${AB}-${EB}`,Gw=class{constructor(e){Aa(this,"name","TaskAbortError");Aa(this,"message");this.code=e,this.message=`${tae} ${G6} (reason: ${e})`}},X6=(e,t)=>{if(typeof e!="function")throw new TypeError(Tc(32))},Ty=()=>{},TB=(e,t=Ty)=>(e.catch(t),e),OB=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),xm=(e,t)=>{const r=e.signal;r.aborted||("reason"in r||Object.defineProperty(r,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},pm=e=>{if(e.aborted){const{reason:t}=e;throw new Gw(t)}};function PB(e,t){let r=Ty;return new Promise((n,a)=>{const i=()=>a(new Gw(e.reason));if(e.aborted){i();return}r=OB(e,i),t.finally(()=>r()).then(n,a)}).finally(()=>{r=Ty})}var sae=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(r){return{status:r instanceof Gw?"cancelled":"rejected",error:r}}finally{t==null||t()}},Oy=e=>t=>TB(PB(e,t).then(r=>(pm(e),r))),IB=e=>{const t=Oy(e);return r=>t(new Promise(n=>setTimeout(n,r)))},{assign:f1}=Object,OO={},Xw="listenerMiddleware",iae=(e,t)=>{const r=n=>OB(e,()=>xm(n,e.reason));return(n,a)=>{X6(n);const i=new AbortController;r(i);const l=sae(async()=>{pm(e),pm(i.signal);const o=await n({pause:Oy(i.signal),delay:IB(i.signal),signal:i.signal});return pm(i.signal),o},()=>xm(i,nae));return a!=null&&a.autoJoin&&t.push(l.catch(Ty)),{result:Oy(e)(l),cancel(){xm(i,rae)}}}},lae=(e,t)=>{const r=async(n,a)=>{pm(t);let i=()=>{};const o=[new Promise((c,d)=>{let f=e({predicate:n,effect:(p,y)=>{y.unsubscribe(),c([p,y.getState(),y.getOriginalState()])}});i=()=>{f(),d()}})];a!=null&&o.push(new Promise(c=>setTimeout(c,a,null)));try{const c=await PB(t,Promise.race(o));return pm(t),c}finally{i()}};return(n,a)=>TB(r(n,a))},DB=e=>{let{type:t,actionCreator:r,matcher:n,predicate:a,effect:i}=e;if(t)a=fd(t).match;else if(r)t=r.type,a=r.match;else if(n)a=n;else if(!a)throw new Error(Tc(21));return X6(i),{predicate:a,type:t,effect:i}},MB=f1(e=>{const{type:t,predicate:r,effect:n}=DB(e);return{id:Vne(),effect:n,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(Tc(22))}}},{withTypes:()=>MB}),PO=(e,t)=>{const{type:r,effect:n,predicate:a}=DB(t);return Array.from(e.values()).find(i=>(typeof r=="string"?i.type===r:i.predicate===a)&&i.effect===n)},W_=e=>{e.pending.forEach(t=>{xm(t,V_)})},oae=(e,t)=>()=>{for(const r of t.keys())W_(r);e.clear()},IO=(e,t,r)=>{try{e(t,r)}catch(n){setTimeout(()=>{throw n},0)}},LB=f1(fd(`${Xw}/add`),{withTypes:()=>LB}),cae=fd(`${Xw}/removeAll`),RB=f1(fd(`${Xw}/remove`),{withTypes:()=>RB}),dae=(...e)=>{console.error(`${Xw}/error`,...e)},Bb=(e={})=>{const t=new Map,r=new Map,n=g=>{const N=r.get(g)??0;r.set(g,N+1)},a=g=>{const N=r.get(g)??1;N===1?r.delete(g):r.set(g,N-1)},{extra:i,onError:l=dae}=e;X6(l);const o=g=>(g.unsubscribe=()=>t.delete(g.id),t.set(g.id,g),N=>{g.unsubscribe(),N!=null&&N.cancelActive&&W_(g)}),c=g=>{const N=PO(t,g)??MB(g);return o(N)};f1(c,{withTypes:()=>c});const d=g=>{const N=PO(t,g);return N&&(N.unsubscribe(),g.cancelActive&&W_(N)),!!N};f1(d,{withTypes:()=>d});const f=async(g,N,w,k)=>{const S=new AbortController,O=lae(c,S.signal),E=[];try{g.pending.add(S),n(g),await Promise.resolve(g.effect(N,f1({},w,{getOriginalState:k,condition:(D,q)=>O(D,q).then(Boolean),take:O,delay:IB(S.signal),pause:Oy(S.signal),extra:i,signal:S.signal,fork:iae(S.signal,E),unsubscribe:g.unsubscribe,subscribe:()=>{t.set(g.id,g)},cancelActiveListeners:()=>{g.pending.forEach((D,q,W)=>{D!==S&&(xm(D,V_),W.delete(D))})},cancel:()=>{xm(S,V_),g.pending.delete(S)},throwIfCancelled:()=>{pm(S.signal)}})))}catch(D){D instanceof Gw||IO(l,D,{raisedBy:"effect"})}finally{await Promise.all(E),xm(S,aae),a(g),g.pending.delete(S)}},p=oae(t,r);return{middleware:g=>N=>w=>{if(!xB(w))return N(w);if(LB.match(w))return c(w.payload);if(cae.match(w)){p();return}if(RB.match(w))return d(w.payload);let k=g.getState();const S=()=>{if(k===OO)throw new Error(Tc(23));return k};let O;try{if(O=N(w),t.size>0){const E=g.getState(),D=Array.from(t.values());for(const q of D){let W=!1;try{W=q.predicate(w,E,k)}catch(R){W=!1,IO(l,R,{raisedBy:"predicate"})}W&&f(q,w,g,S)}}}finally{k=OO}return O},startListening:c,stopListening:d,clearListeners:p}};function Tc(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var uae={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},FB=Mc({name:"chartLayout",initialState:uae,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var r,n,a,i;e.margin.top=(r=t.payload.top)!==null&&r!==void 0?r:0,e.margin.right=(n=t.payload.right)!==null&&n!==void 0?n:0,e.margin.bottom=(a=t.payload.bottom)!==null&&a!==void 0?a:0,e.margin.left=(i=t.payload.left)!==null&&i!==void 0?i:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:hae,setLayout:fae,setChartSize:mae,setScale:xae}=FB.actions,pae=FB.reducer;function DO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function MO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?DO(Object(r),!0).forEach(function(n){gae(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):DO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function gae(e,t,r){return(t=bae(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bae(e){var t=vae(e,"string");return typeof t=="symbol"?t:t+""}function vae(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Py=Math.PI/180,yae=e=>e*180/Math.PI,Ri=(e,t,r,n)=>({x:e+Math.cos(-Py*n)*r,y:t+Math.sin(-Py*n)*r}),BB=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},wae=(e,t)=>{var{x:r,y:n}=e,{x:a,y:i}=t;return Math.sqrt((r-a)**2+(n-i)**2)},kae=(e,t)=>{var{x:r,y:n}=e,{cx:a,cy:i}=t,l=wae({x:r,y:n},{x:a,y:i});if(l<=0)return{radius:l,angle:0};var o=(r-a)/l,c=Math.acos(o);return n>i&&(c=2*Math.PI-c),{radius:l,angle:yae(c),angleInRadian:c}},Nae=e=>{var{startAngle:t,endAngle:r}=e,n=Math.floor(t/360),a=Math.floor(r/360),i=Math.min(n,a);return{startAngle:t-i*360,endAngle:r-i*360}},_ae=(e,t)=>{var{startAngle:r,endAngle:n}=t,a=Math.floor(r/360),i=Math.floor(n/360),l=Math.min(a,i);return e+l*360},Sae=(e,t)=>{var{x:r,y:n}=e,{radius:a,angle:i}=kae({x:r,y:n},t),{innerRadius:l,outerRadius:o}=t;if(a<l||a>o||a===0)return null;var{startAngle:c,endAngle:d}=Nae(t),f=i,p;if(c<=d){for(;f>d;)f-=360;for(;f<c;)f+=360;p=f>=c&&f<=d}else{for(;f>c;)f-=360;for(;f<d;)f+=360;p=f>=d&&f<=c}return p?MO(MO({},t),{},{radius:a,angle:_ae(f,t)}):null};function UB(e,t,r){return Array.isArray(e)&&e&&t+r!==0?e.slice(t,r+1):e}function LO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function od(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?LO(Object(r),!0).forEach(function(n){jae(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):LO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function jae(e,t,r){return(t=Cae(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Cae(e){var t=Aae(e,"string");return typeof t=="symbol"?t:t+""}function Aae(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ns(e,t,r){return Cs(e)||Cs(t)?r:zu(t)?Om(e,t,r):typeof t=="function"?t(e):r}var Eae=(e,t,r,n,a)=>{var i,l=-1,o=(i=t==null?void 0:t.length)!==null&&i!==void 0?i:0;if(o<=1||e==null)return 0;if(n==="angleAxis"&&a!=null&&Math.abs(Math.abs(a[1]-a[0])-360)<=1e-6)for(var c=0;c<o;c++){var d=c>0?r[c-1].coordinate:r[o-1].coordinate,f=r[c].coordinate,p=c>=o-1?r[0].coordinate:r[c+1].coordinate,y=void 0;if(vl(f-d)!==vl(p-f)){var g=[];if(vl(p-f)===vl(a[1]-a[0])){y=p;var N=f+a[1]-a[0];g[0]=Math.min(N,(N+d)/2),g[1]=Math.max(N,(N+d)/2)}else{y=d;var w=p+a[1]-a[0];g[0]=Math.min(f,(w+f)/2),g[1]=Math.max(f,(w+f)/2)}var k=[Math.min(f,(y+f)/2),Math.max(f,(y+f)/2)];if(e>k[0]&&e<=k[1]||e>=g[0]&&e<=g[1]){({index:l}=r[c]);break}}else{var S=Math.min(d,p),O=Math.max(d,p);if(e>(S+f)/2&&e<=(O+f)/2){({index:l}=r[c]);break}}}else if(t){for(var E=0;E<o;E++)if(E===0&&e<=(t[E].coordinate+t[E+1].coordinate)/2||E>0&&E<o-1&&e>(t[E].coordinate+t[E-1].coordinate)/2&&e<=(t[E].coordinate+t[E+1].coordinate)/2||E===o-1&&e>(t[E].coordinate+t[E-1].coordinate)/2){({index:l}=t[E]);break}}return l},Tae=(e,t,r)=>{if(t&&r){var{width:n,height:a}=r,{align:i,verticalAlign:l,layout:o}=t;if((o==="vertical"||o==="horizontal"&&l==="middle")&&i!=="center"&&Zr(e[i]))return od(od({},e),{},{[i]:e[i]+(n||0)});if((o==="horizontal"||o==="vertical"&&i==="center")&&l!=="middle"&&Zr(e[l]))return od(od({},e),{},{[l]:e[l]+(a||0)})}return e},Wu=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",zB=(e,t,r,n)=>{if(n)return e.map(o=>o.coordinate);var a,i,l=e.map(o=>(o.coordinate===t&&(a=!0),o.coordinate===r&&(i=!0),o.coordinate));return a||l.push(t),i||l.push(r),l},qB=(e,t,r)=>{if(!e)return null;var{duplicateDomain:n,type:a,range:i,scale:l,realScaleType:o,isCategorical:c,categoricalDomain:d,tickCount:f,ticks:p,niceTicks:y,axisType:g}=e;if(!l)return null;var N=o==="scaleBand"&&l.bandwidth?l.bandwidth()/2:2,w=a==="category"&&l.bandwidth?l.bandwidth()/N:0;if(w=g==="angleAxis"&&i&&i.length>=2?vl(i[0]-i[1])*2*w:w,p||y){var k=(p||y||[]).map((S,O)=>{var E=n?n.indexOf(S):S;return{coordinate:l(E)+w,value:S,offset:w,index:O}});return k.filter(S=>!Oc(S.coordinate))}return c&&d?d.map((S,O)=>({coordinate:l(S)+w,value:S,index:O,offset:w})):l.ticks&&f!=null?l.ticks(f).map((S,O)=>({coordinate:l(S)+w,value:S,offset:w,index:O})):l.domain().map((S,O)=>({coordinate:l(S)+w,value:n?n[S]:S,index:O,offset:w}))},RO=1e-4,Oae=e=>{var t=e.domain();if(!(!t||t.length<=2)){var r=t.length,n=e.range(),a=Math.min(n[0],n[1])-RO,i=Math.max(n[0],n[1])+RO,l=e(t[0]),o=e(t[r-1]);(l<a||l>i||o<a||o>i)&&e.domain([t[0],t[r-1]])}},Pae=(e,t)=>{if(!t||t.length!==2||!Zr(t[0])||!Zr(t[1]))return e;var r=Math.min(t[0],t[1]),n=Math.max(t[0],t[1]),a=[e[0],e[1]];return(!Zr(e[0])||e[0]<r)&&(a[0]=r),(!Zr(e[1])||e[1]>n)&&(a[1]=n),a[0]>n&&(a[0]=n),a[1]<r&&(a[1]=r),a},Iae=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var a=0,i=0,l=0;l<t;++l){var o=Oc(e[l][r][1])?e[l][r][0]:e[l][r][1];o>=0?(e[l][r][0]=a,e[l][r][1]=a+o,a=e[l][r][1]):(e[l][r][0]=i,e[l][r][1]=i+o,i=e[l][r][1])}},Dae=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var a=0,i=0;i<t;++i){var l=Oc(e[i][r][1])?e[i][r][0]:e[i][r][1];l>=0?(e[i][r][0]=a,e[i][r][1]=a+l,a=e[i][r][1]):(e[i][r][0]=0,e[i][r][1]=0)}},Mae={sign:Iae,expand:sre,none:U1,silhouette:ire,wiggle:lre,positive:Dae},Lae=(e,t,r)=>{var n=Mae[r],a=are().keys(t).value((i,l)=>+ns(i,l,0)).order(M_).offset(n);return a(e)};function HB(e){return e==null?void 0:String(e)}function Iy(e){var{axis:t,ticks:r,bandSize:n,entry:a,index:i,dataKey:l}=e;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!Cs(a[t.dataKey])){var o=YF(r,"value",a[t.dataKey]);if(o)return o.coordinate+n/2}return r[i]?r[i].coordinate+n/2:null}var c=ns(a,Cs(l)?t.dataKey:l);return Cs(c)?null:t.scale(c)}var FO=e=>{var{axis:t,ticks:r,offset:n,bandSize:a,entry:i,index:l}=e;if(t.type==="category")return r[l]?r[l].coordinate+n:null;var o=ns(i,t.dataKey,t.scale.domain()[l]);return Cs(o)?null:t.scale(o)-a/2+n},Rae=e=>{var{numericAxis:t}=e,r=t.scale.domain();if(t.type==="number"){var n=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]);return n<=0&&a>=0?0:a<0?a:n}return r[0]},Fae=e=>{var t=e.flat(2).filter(Zr);return[Math.min(...t),Math.max(...t)]},Bae=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],Uae=(e,t,r)=>{if(e!=null)return Bae(Object.keys(e).reduce((n,a)=>{var i=e[a],{stackedData:l}=i,o=l.reduce((c,d)=>{var f=UB(d,t,r),p=Fae(f);return[Math.min(c[0],p[0]),Math.max(c[1],p[1])]},[1/0,-1/0]);return[Math.min(o[0],n[0]),Math.max(o[1],n[1])]},[1/0,-1/0]))},BO=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,UO=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Dm=(e,t,r)=>{if(e&&e.scale&&e.scale.bandwidth){var n=e.scale.bandwidth();if(!r||n>0)return n}if(e&&t&&t.length>=2){for(var a=$w(t,f=>f.coordinate),i=1/0,l=1,o=a.length;l<o;l++){var c=a[l],d=a[l-1];i=Math.min((c.coordinate||0)-(d.coordinate||0),i)}return i===1/0?0:i}return r?void 0:0};function zO(e){var{tooltipEntrySettings:t,dataKey:r,payload:n,value:a,name:i}=e;return od(od({},t),{},{dataKey:r,payload:n,value:a,name:i})}function xf(e,t){if(e)return String(e);if(typeof t=="string")return t}function zae(e,t,r,n,a){if(r==="horizontal"||r==="vertical"){var i=e>=a.left&&e<=a.left+a.width&&t>=a.top&&t<=a.top+a.height;return i?{x:e,y:t}:null}return n?Sae({x:e,y:t},n):null}var qae=(e,t,r,n)=>{var a=t.find(d=>d&&d.index===r);if(a){if(e==="horizontal")return{x:a.coordinate,y:n.y};if(e==="vertical")return{x:n.x,y:a.coordinate};if(e==="centric"){var i=a.coordinate,{radius:l}=n;return od(od(od({},n),Ri(n.cx,n.cy,l,i)),{},{angle:i,radius:l})}var o=a.coordinate,{angle:c}=n;return od(od(od({},n),Ri(n.cx,n.cy,o,c)),{},{angle:c,radius:o})}return{x:0,y:0}},Hae=(e,t)=>t==="horizontal"?e.x:t==="vertical"?e.y:t==="centric"?e.angle:e.radius,Q0=e=>e.layout.width,J0=e=>e.layout.height,$ae=e=>e.layout.scale,$B=e=>e.layout.margin,Yw=jt(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),Zw=jt(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),VB="data-recharts-item-index",WB="data-recharts-item-data-key",Ub=60;function qO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function y2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qO(Object(r),!0).forEach(function(n){Vae(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Vae(e,t,r){return(t=Wae(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Wae(e){var t=Kae(e,"string");return typeof t=="symbol"?t:t+""}function Kae(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Gae=e=>e.brush.height;function Xae(e){var t=Zw(e);return t.reduce((r,n)=>{if(n.orientation==="left"&&!n.mirror&&!n.hide){var a=typeof n.width=="number"?n.width:Ub;return r+a}return r},0)}function Yae(e){var t=Zw(e);return t.reduce((r,n)=>{if(n.orientation==="right"&&!n.mirror&&!n.hide){var a=typeof n.width=="number"?n.width:Ub;return r+a}return r},0)}function Zae(e){var t=Yw(e);return t.reduce((r,n)=>n.orientation==="top"&&!n.mirror&&!n.hide?r+n.height:r,0)}function Qae(e){var t=Yw(e);return t.reduce((r,n)=>n.orientation==="bottom"&&!n.mirror&&!n.hide?r+n.height:r,0)}var Zi=jt([Q0,J0,$B,Gae,Xae,Yae,Zae,Qae,uB,gne],(e,t,r,n,a,i,l,o,c,d)=>{var f={left:(r.left||0)+a,right:(r.right||0)+i},p={top:(r.top||0)+l,bottom:(r.bottom||0)+o},y=y2(y2({},p),f),g=y.bottom;y.bottom+=n,y=Tae(y,c,d);var N=e-y.left-y.right,w=t-y.top-y.bottom;return y2(y2({brushBottom:g},y),{},{width:Math.max(N,0),height:Math.max(w,0)})}),Jae=jt(Zi,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),Y6=jt(Q0,J0,(e,t)=>({x:0,y:0,width:e,height:t})),ese=T.createContext(null),Ml=()=>T.useContext(ese)!=null,Qw=e=>e.brush,Jw=jt([Qw,Zi,$B],(e,t,r)=>({height:e.height,x:Zr(e.x)?e.x:t.left,y:Zr(e.y)?e.y:t.top+t.height+t.brushBottom-((r==null?void 0:r.bottom)||0),width:Zr(e.width)?e.width:t.width})),k3={},N3={},_3={},HO;function tse(){return HO||(HO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n,{signal:a,edges:i}={}){let l,o=null;const c=i!=null&&i.includes("leading"),d=i==null||i.includes("trailing"),f=()=>{o!==null&&(r.apply(l,o),l=void 0,o=null)},p=()=>{d&&f(),w()};let y=null;const g=()=>{y!=null&&clearTimeout(y),y=setTimeout(()=>{y=null,p()},n)},N=()=>{y!==null&&(clearTimeout(y),y=null)},w=()=>{N(),l=void 0,o=null},k=()=>{f()},S=function(...O){if(a!=null&&a.aborted)return;l=this,o=O;const E=y==null;g(),c&&E&&f()};return S.schedule=g,S.cancel=w,S.flush=k,a==null||a.addEventListener("abort",w,{once:!0}),S}e.debounce=t})(_3)),_3}var $O;function rse(){return $O||($O=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=tse();function r(n,a=0,i={}){typeof i!="object"&&(i={});const{leading:l=!1,trailing:o=!0,maxWait:c}=i,d=Array(2);l&&(d[0]="leading"),o&&(d[1]="trailing");let f,p=null;const y=t.debounce(function(...w){f=n.apply(this,w),p=null},a,{edges:d}),g=function(...w){return c!=null&&(p===null&&(p=Date.now()),Date.now()-p>=c)?(f=n.apply(this,w),p=Date.now(),y.cancel(),y.schedule(),f):(y.apply(this,w),f)},N=()=>(y.flush(),f);return g.cancel=y.cancel,g.flush=N,g}e.debounce=r})(N3)),N3}var VO;function nse(){return VO||(VO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=rse();function r(n,a=0,i={}){const{leading:l=!0,trailing:o=!0}=i;return t.debounce(n,a,{leading:l,maxWait:a,trailing:o})}e.throttle=r})(k3)),k3}var S3,WO;function ase(){return WO||(WO=1,S3=nse().throttle),S3}var sse=ase();const ise=gd(sse);var Dy=function(t,r){for(var n=arguments.length,a=new Array(n>2?n-2:0),i=2;i<n;i++)a[i-2]=arguments[i]},KB=(e,t,r)=>{var{width:n="100%",height:a="100%",aspect:i,maxHeight:l}=r,o=V0(n)?e:Number(n),c=V0(a)?t:Number(a);return i&&i>0&&(o?c=o/i:c&&(o=c*i),l&&c>l&&(c=l)),{calculatedWidth:o,calculatedHeight:c}},lse={width:0,height:0,overflow:"visible"},ose={width:0,overflowX:"visible"},cse={height:0,overflowY:"visible"},dse={},use=e=>{var{width:t,height:r}=e,n=V0(t),a=V0(r);return n&&a?lse:n?ose:a?cse:dse};function hse(e){var{width:t,height:r,aspect:n}=e,a=t,i=r;return a===void 0&&i===void 0?(a="100%",i="100%"):a===void 0?a=n&&n>0?void 0:"100%":i===void 0&&(i=n&&n>0?void 0:"100%"),{width:a,height:i}}function Bi(e){return Number.isFinite(e)}function z1(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function K_(){return K_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},K_.apply(null,arguments)}function KO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function GO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?KO(Object(r),!0).forEach(function(n){fse(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):KO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function fse(e,t,r){return(t=mse(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mse(e){var t=xse(e,"string");return typeof t=="symbol"?t:t+""}function xse(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var GB=T.createContext({width:-1,height:-1});function XB(e){var{children:t,width:r,height:n}=e,a=T.useMemo(()=>({width:r,height:n}),[r,n]);return r<=0||n<=0?null:T.createElement(GB.Provider,{value:a},t)}var Z6=()=>T.useContext(GB),pse=T.forwardRef((e,t)=>{var{aspect:r,initialDimension:n={width:-1,height:-1},width:a,height:i,minWidth:l=0,minHeight:o,maxHeight:c,children:d,debounce:f=0,id:p,className:y,onResize:g,style:N={}}=e,w=T.useRef(null),k=T.useRef();k.current=g,T.useImperativeHandle(t,()=>w.current);var[S,O]=T.useState({containerWidth:n.width,containerHeight:n.height}),E=T.useCallback((U,z)=>{O(Z=>{var H=Math.round(U),K=Math.round(z);return Z.containerWidth===H&&Z.containerHeight===K?Z:{containerWidth:H,containerHeight:K}})},[]);T.useEffect(()=>{var U=K=>{var J,{width:ae,height:se}=K[0].contentRect;E(ae,se),(J=k.current)===null||J===void 0||J.call(k,ae,se)};f>0&&(U=ise(U,f,{trailing:!0,leading:!1}));var z=new ResizeObserver(U),{width:Z,height:H}=w.current.getBoundingClientRect();return E(Z,H),z.observe(w.current),()=>{z.disconnect()}},[E,f]);var{containerWidth:D,containerHeight:q}=S;Dy(!r||r>0,"The aspect(%s) must be greater than zero.",r);var{calculatedWidth:W,calculatedHeight:R}=KB(D,q,{width:a,height:i,aspect:r,maxHeight:c});return Dy(W>0||R>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,W,R,a,i,l,o,r),T.createElement("div",{id:p?"".concat(p):void 0,className:Zn("recharts-responsive-container",y),style:GO(GO({},N),{},{width:a,height:i,minWidth:l,minHeight:o,maxHeight:c}),ref:w},T.createElement("div",{style:use({width:a,height:i})},T.createElement(XB,{width:W,height:R},d)))}),Kd=T.forwardRef((e,t)=>{var r=Z6();if(z1(r.width)&&z1(r.height))return e.children;var{width:n,height:a}=hse({width:e.width,height:e.height,aspect:e.aspect}),{calculatedWidth:i,calculatedHeight:l}=KB(void 0,void 0,{width:n,height:a,aspect:e.aspect,maxHeight:e.maxHeight});return Zr(i)&&Zr(l)?T.createElement(XB,{width:i,height:l},e.children):T.createElement(pse,K_({},e,{width:n,height:a,ref:t}))}),ek=()=>{var e,t=Ml(),r=Jr(Jae),n=Jr(Jw),a=(e=Jr(Qw))===null||e===void 0?void 0:e.padding;return!t||!n||!a?r:{width:n.width-a.left-a.right,height:n.height-a.top-a.bottom,x:a.left,y:a.top}},gse={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},YB=()=>{var e;return(e=Jr(Zi))!==null&&e!==void 0?e:gse},Q6=()=>Jr(Q0),J6=()=>Jr(J0),bse=()=>Jr(e=>e.layout.margin),fa=e=>e.layout.layoutType,zb=()=>Jr(fa),tk=e=>{var t=Us(),r=Ml(),{width:n,height:a}=e,i=Z6(),l=n,o=a;return i&&(l=i.width>0?i.width:n,o=i.height>0?i.height:a),T.useEffect(()=>{!r&&z1(l)&&z1(o)&&t(mae({width:l,height:o}))},[t,r,l,o]),null},vse={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},ZB=Mc({name:"legend",initialState:vse,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload:{reducer(e,t){e.payload.push(t.payload)},prepare:No()},removeLegendPayload:{reducer(e,t){var r=M0(e).payload.indexOf(t.payload);r>-1&&e.payload.splice(r,1)},prepare:No()}}}),{setLegendSize:XO,setLegendSettings:yse,addLegendPayload:QB,removeLegendPayload:JB}=ZB.actions,wse=ZB.reducer,kse=["contextPayload"];function G_(){return G_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},G_.apply(null,arguments)}function YO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function q1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?YO(Object(r),!0).forEach(function(n){ej(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):YO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ej(e,t,r){return(t=Nse(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Nse(e){var t=_se(e,"string");return typeof t=="symbol"?t:t+""}function _se(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Sse(e,t){if(e==null)return{};var r,n,a=jse(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function jse(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Cse(e){return e.value}function Ase(e){var{contextPayload:t}=e,r=Sse(e,kse),n=lB(t,e.payloadUniqBy,Cse),a=q1(q1({},r),{},{payload:n});return T.isValidElement(e.content)?T.cloneElement(e.content,a):typeof e.content=="function"?T.createElement(e.content,a):T.createElement(q6,a)}function Ese(e,t,r,n,a,i){var{layout:l,align:o,verticalAlign:c}=t,d,f;return(!e||(e.left===void 0||e.left===null)&&(e.right===void 0||e.right===null))&&(o==="center"&&l==="vertical"?d={left:((n||0)-i.width)/2}:d=o==="right"?{right:r&&r.right||0}:{left:r&&r.left||0}),(!e||(e.top===void 0||e.top===null)&&(e.bottom===void 0||e.bottom===null))&&(c==="middle"?f={top:((a||0)-i.height)/2}:f=c==="bottom"?{bottom:r&&r.bottom||0}:{top:r&&r.top||0}),q1(q1({},d),f)}function Tse(e){var t=Us();return T.useEffect(()=>{t(yse(e))},[t,e]),null}function Ose(e){var t=Us();return T.useEffect(()=>(t(XO(e)),()=>{t(XO({width:0,height:0}))}),[t,e]),null}function Pse(e){var t=yne(),r=Ate(),n=bse(),{width:a,height:i,wrapperStyle:l,portal:o}=e,[c,d]=hB([t]),f=Q6(),p=J6();if(f==null||p==null)return null;var y=f-(n.left||0)-(n.right||0),g=Mm.getWidthOrHeight(e.layout,i,a,y),N=o?l:q1(q1({position:"absolute",width:(g==null?void 0:g.width)||a||"auto",height:(g==null?void 0:g.height)||i||"auto"},Ese(l,e,n,f,p,c)),l),w=o??r;if(w==null)return null;var k=T.createElement("div",{className:"recharts-legend-wrapper",style:N,ref:d},T.createElement(Tse,{layout:e.layout,align:e.align,verticalAlign:e.verticalAlign,itemSorter:e.itemSorter}),T.createElement(Ose,{width:c.width,height:c.height}),T.createElement(Ase,G_({},e,g,{margin:n,chartWidth:f,chartHeight:p,contextPayload:t})));return GL.createPortal(k,w)}class Mm extends T.PureComponent{static getWidthOrHeight(t,r,n,a){return t==="vertical"&&Zr(r)?{height:r}:t==="horizontal"?{width:n||a}:null}render(){return T.createElement(Pse,this.props)}}ej(Mm,"displayName","Legend");ej(Mm,"defaultProps",{align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"});function X_(){return X_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},X_.apply(null,arguments)}function ZO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function j3(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ZO(Object(r),!0).forEach(function(n){Ise(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ZO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ise(e,t,r){return(t=Dse(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Dse(e){var t=Mse(e,"string");return typeof t=="symbol"?t:t+""}function Mse(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Lse(e){return Array.isArray(e)&&zu(e[0])&&zu(e[1])?e.join(" ~ "):e}var Rse=e=>{var{separator:t=" : ",contentStyle:r={},itemStyle:n={},labelStyle:a={},payload:i,formatter:l,itemSorter:o,wrapperClassName:c,labelClassName:d,label:f,labelFormatter:p,accessibilityLayer:y=!1}=e,g=()=>{if(i&&i.length){var q={padding:0,margin:0},W=(o?$w(i,o):i).map((R,U)=>{if(R.type==="none")return null;var z=R.formatter||l||Lse,{value:Z,name:H}=R,K=Z,J=H;if(z){var ae=z(Z,H,R,U,i);if(Array.isArray(ae))[K,J]=ae;else if(ae!=null)K=ae;else return null}var se=j3({display:"block",paddingTop:4,paddingBottom:4,color:R.color||"#000"},n);return T.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(U),style:se},zu(J)?T.createElement("span",{className:"recharts-tooltip-item-name"},J):null,zu(J)?T.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,T.createElement("span",{className:"recharts-tooltip-item-value"},K),T.createElement("span",{className:"recharts-tooltip-item-unit"},R.unit||""))});return T.createElement("ul",{className:"recharts-tooltip-item-list",style:q},W)}return null},N=j3({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),w=j3({margin:0},a),k=!Cs(f),S=k?f:"",O=Zn("recharts-default-tooltip",c),E=Zn("recharts-tooltip-label",d);k&&p&&i!==void 0&&i!==null&&(S=p(f,i));var D=y?{role:"status","aria-live":"assertive"}:{};return T.createElement("div",X_({className:O,style:N},D),T.createElement("p",{className:E,style:w},T.isValidElement(S)?S:"".concat(S)),g())},ng="recharts-tooltip-wrapper",Fse={visibility:"hidden"};function Bse(e){var{coordinate:t,translateX:r,translateY:n}=e;return Zn(ng,{["".concat(ng,"-right")]:Zr(r)&&t&&Zr(t.x)&&r>=t.x,["".concat(ng,"-left")]:Zr(r)&&t&&Zr(t.x)&&r<t.x,["".concat(ng,"-bottom")]:Zr(n)&&t&&Zr(t.y)&&n>=t.y,["".concat(ng,"-top")]:Zr(n)&&t&&Zr(t.y)&&n<t.y})}function QO(e){var{allowEscapeViewBox:t,coordinate:r,key:n,offsetTopLeft:a,position:i,reverseDirection:l,tooltipDimension:o,viewBox:c,viewBoxDimension:d}=e;if(i&&Zr(i[n]))return i[n];var f=r[n]-o-(a>0?a:0),p=r[n]+a;if(t[n])return l[n]?f:p;var y=c[n];if(y==null)return 0;if(l[n]){var g=f,N=y;return g<N?Math.max(p,y):Math.max(f,y)}if(d==null)return 0;var w=p+o,k=y+d;return w>k?Math.max(f,y):Math.max(p,y)}function Use(e){var{translateX:t,translateY:r,useTranslate3d:n}=e;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function zse(e){var{allowEscapeViewBox:t,coordinate:r,offsetTopLeft:n,position:a,reverseDirection:i,tooltipBox:l,useTranslate3d:o,viewBox:c}=e,d,f,p;return l.height>0&&l.width>0&&r?(f=QO({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:a,reverseDirection:i,tooltipDimension:l.width,viewBox:c,viewBoxDimension:c.width}),p=QO({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:a,reverseDirection:i,tooltipDimension:l.height,viewBox:c,viewBoxDimension:c.height}),d=Use({translateX:f,translateY:p,useTranslate3d:o})):d=Fse,{cssProperties:d,cssClasses:Bse({translateX:f,translateY:p,coordinate:r})}}function JO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function w2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?JO(Object(r),!0).forEach(function(n){Y_(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):JO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Y_(e,t,r){return(t=qse(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qse(e){var t=Hse(e,"string");return typeof t=="symbol"?t:t+""}function Hse(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class $se extends T.PureComponent{constructor(){super(...arguments),Y_(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),Y_(this,"handleKeyDown",t=>{if(t.key==="Escape"){var r,n,a,i;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&r!==void 0?r:0,y:(a=(i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==null&&a!==void 0?a:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,r;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:r,animationDuration:n,animationEasing:a,children:i,coordinate:l,hasPayload:o,isAnimationActive:c,offset:d,position:f,reverseDirection:p,useTranslate3d:y,viewBox:g,wrapperStyle:N,lastBoundingBox:w,innerRef:k,hasPortalFromProps:S}=this.props,{cssClasses:O,cssProperties:E}=zse({allowEscapeViewBox:r,coordinate:l,offsetTopLeft:d,position:f,reverseDirection:p,tooltipBox:{height:w.height,width:w.width},useTranslate3d:y,viewBox:g}),D=S?{}:w2(w2({transition:c&&t?"transform ".concat(n,"ms ").concat(a):void 0},E),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&o?"visible":"hidden",position:"absolute",top:0,left:0}),q=w2(w2({},D),{},{visibility:!this.state.dismissed&&t&&o?"visible":"hidden"},N);return T.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:O,style:q,ref:k},i)}}var Vse=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),eh={devToolsEnabled:!1,isSsr:Vse()},eU=()=>Jr(e=>e.rootProps.accessibilityLayer);function Z_(){return Z_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Z_.apply(null,arguments)}function e9(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function t9(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?e9(Object(r),!0).forEach(function(n){Wse(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):e9(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Wse(e,t,r){return(t=Kse(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Kse(e){var t=Gse(e,"string");return typeof t=="symbol"?t:t+""}function Gse(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var r9={curveBasisClosed:Kte,curveBasisOpen:Gte,curveBasis:Wte,curveBumpX:Pte,curveBumpY:Ite,curveLinearClosed:Xte,curveLinear:qw,curveMonotoneX:Yte,curveMonotoneY:Zte,curveNatural:Qte,curveStep:Jte,curveStepAfter:tre,curveStepBefore:ere},k2=e=>Bi(e.x)&&Bi(e.y),ag=e=>e.x,sg=e=>e.y,Xse=(e,t)=>{if(typeof e=="function")return e;var r="curve".concat(Lb(e));return(r==="curveMonotone"||r==="curveBump")&&t?r9["".concat(r).concat(t==="vertical"?"Y":"X")]:r9[r]||qw},Yse=e=>{var{type:t="linear",points:r=[],baseLine:n,layout:a,connectNulls:i=!1}=e,l=Xse(t,a),o=i?r.filter(k2):r,c;if(Array.isArray(n)){var d=i?n.filter(p=>k2(p)):n,f=o.map((p,y)=>t9(t9({},p),{},{base:d[y]}));return a==="vertical"?c=m2().y(sg).x1(ag).x0(p=>p.base.x):c=m2().x(ag).y1(sg).y0(p=>p.base.y),c.defined(k2).curve(l),c(f)}return a==="vertical"&&Zr(n)?c=m2().y(sg).x1(ag).x0(n):Zr(n)?c=m2().x(ag).y1(sg).y0(n):c=RF().x(ag).y(sg),c.defined(k2).curve(l),c(o)},m1=e=>{var{className:t,points:r,path:n,pathRef:a}=e;if((!r||!r.length)&&!n)return null;var i=r&&r.length?Yse(e):n;return T.createElement("path",Z_({},Ao(e),U6(e),{className:Zn("recharts-curve",t),d:i===null?void 0:i,ref:a}))},Zse=["x","y","top","left","width","height","className"];function Q_(){return Q_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Q_.apply(null,arguments)}function n9(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Qse(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?n9(Object(r),!0).forEach(function(n){Jse(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n9(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Jse(e,t,r){return(t=eie(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eie(e){var t=tie(e,"string");return typeof t=="symbol"?t:t+""}function tie(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function rie(e,t){if(e==null)return{};var r,n,a=nie(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function nie(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var aie=(e,t,r,n,a,i)=>"M".concat(e,",").concat(a,"v").concat(n,"M").concat(i,",").concat(t,"h").concat(r),sie=e=>{var{x:t=0,y:r=0,top:n=0,left:a=0,width:i=0,height:l=0,className:o}=e,c=rie(e,Zse),d=Qse({x:t,y:r,top:n,left:a,width:i,height:l},c);return!Zr(t)||!Zr(r)||!Zr(i)||!Zr(l)||!Zr(n)||!Zr(a)?null:T.createElement("path",Q_({},Eo(d),{className:Zn("recharts-cross",o),d:aie(t,r,i,l,n,a)}))};function iie(e,t,r,n){var a=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-a:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-a,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function a9(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function lie(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?a9(Object(r),!0).forEach(function(n){oie(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a9(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function oie(e,t,r){return(t=cie(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cie(e){var t=die(e,"string");return typeof t=="symbol"?t:t+""}function die(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Qi(e,t){var r=lie({},e),n=t,a=Object.keys(t),i=a.reduce((l,o)=>(l[o]===void 0&&n[o]!==void 0&&(l[o]=n[o]),l),r);return i}function uie(){}function hie(e){return e!=null}function s9(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function i9(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?s9(Object(r),!0).forEach(function(n){fie(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s9(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function fie(e,t,r){return(t=mie(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mie(e){var t=xie(e,"string");return typeof t=="symbol"?t:t+""}function xie(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var pie=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),tU=(e,t,r)=>e.map(n=>"".concat(pie(n)," ").concat(t,"ms ").concat(r)).join(","),gie=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((r,n)=>r.filter(a=>n.includes(a))),eb=(e,t)=>Object.keys(t).reduce((r,n)=>i9(i9({},r),{},{[n]:e(n,t[n])}),{});function l9(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Pl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?l9(Object(r),!0).forEach(function(n){bie(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l9(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function bie(e,t,r){return(t=vie(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vie(e){var t=yie(e,"string");return typeof t=="symbol"?t:t+""}function yie(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var My=(e,t,r)=>e+(t-e)*r,J_=e=>{var{from:t,to:r}=e;return t!==r},rU=(e,t,r)=>{var n=eb((a,i)=>{if(J_(i)){var[l,o]=e(i.from,i.to,i.velocity);return Pl(Pl({},i),{},{from:l,velocity:o})}return i},t);return r<1?eb((a,i)=>J_(i)?Pl(Pl({},i),{},{velocity:My(i.velocity,n[a].velocity,r),from:My(i.from,n[a].from,r)}):i,t):rU(e,n,r-1)};function wie(e,t,r,n,a,i){var l,o=n.reduce((y,g)=>Pl(Pl({},y),{},{[g]:{from:e[g],velocity:0,to:t[g]}}),{}),c=()=>eb((y,g)=>g.from,o),d=()=>!Object.values(o).filter(J_).length,f=null,p=y=>{l||(l=y);var g=y-l,N=g/r.dt;o=rU(r,o,N),a(Pl(Pl(Pl({},e),t),c())),l=y,d()||(f=i.setTimeout(p))};return()=>(f=i.setTimeout(p),()=>{f()})}function kie(e,t,r,n,a,i,l){var o=null,c=a.reduce((p,y)=>Pl(Pl({},p),{},{[y]:[e[y],t[y]]}),{}),d,f=p=>{d||(d=p);var y=(p-d)/n,g=eb((w,k)=>My(...k,r(y)),c);if(i(Pl(Pl(Pl({},e),t),g)),y<1)o=l.setTimeout(f);else{var N=eb((w,k)=>My(...k,r(1)),c);i(Pl(Pl(Pl({},e),t),N))}};return()=>(o=l.setTimeout(f),()=>{o()})}const Nie=(e,t,r,n,a,i)=>{var l=gie(e,t);return r.isStepper===!0?wie(e,t,r,l,a,i):kie(e,t,r,n,l,a,i)};var Ly=1e-4,nU=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],aU=(e,t)=>e.map((r,n)=>r*t**n).reduce((r,n)=>r+n),o9=(e,t)=>r=>{var n=nU(e,t);return aU(n,r)},_ie=(e,t)=>r=>{var n=nU(e,t),a=[...n.map((i,l)=>i*l).slice(1),0];return aU(a,r)},c9=function(){for(var t,r,n,a,i=arguments.length,l=new Array(i),o=0;o<i;o++)l[o]=arguments[o];if(l.length===1)switch(l[0]){case"linear":[t,n,r,a]=[0,0,1,1];break;case"ease":[t,n,r,a]=[.25,.1,.25,1];break;case"ease-in":[t,n,r,a]=[.42,0,1,1];break;case"ease-out":[t,n,r,a]=[.42,0,.58,1];break;case"ease-in-out":[t,n,r,a]=[0,0,.58,1];break;default:{var c=l[0].split("(");c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4&&([t,n,r,a]=c[1].split(")")[0].split(",").map(N=>parseFloat(N)))}}else l.length===4&&([t,n,r,a]=l);var d=o9(t,r),f=o9(n,a),p=_ie(t,r),y=N=>N>1?1:N<0?0:N,g=N=>{for(var w=N>1?1:N,k=w,S=0;S<8;++S){var O=d(k)-w,E=p(k);if(Math.abs(O-w)<Ly||E<Ly)return f(k);k=y(k-O/E)}return f(k)};return g.isStepper=!1,g},Sie=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:n=8,dt:a=17}=t,i=(l,o,c)=>{var d=-(l-o)*r,f=c*n,p=c+(d-f)*a/1e3,y=c*a/1e3+l;return Math.abs(y-o)<Ly&&Math.abs(p)<Ly?[o,0]:[y,p]};return i.isStepper=!0,i.dt=a,i},jie=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return c9(e);case"spring":return Sie();default:if(e.split("(")[0]==="cubic-bezier")return c9(e)}return typeof e=="function"?e:null};function Cie(e){var t,r=()=>null,n=!1,a=null,i=l=>{if(!n){if(Array.isArray(l)){if(!l.length)return;var o=l,[c,...d]=o;if(typeof c=="number"){a=e.setTimeout(i.bind(null,d),c);return}i(c),a=e.setTimeout(i.bind(null,d));return}typeof l=="string"&&(t=l,r(t)),typeof l=="object"&&(t=l,r(t)),typeof l=="function"&&l()}};return{stop:()=>{n=!0},start:l=>{n=!1,a&&(a(),a=null),i(l)},subscribe:l=>(r=l,()=>{r=()=>null}),getTimeoutController:()=>e}}class Aie{setTimeout(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),a=null,i=l=>{l-n>=r?t(l):typeof requestAnimationFrame=="function"&&(a=requestAnimationFrame(i))};return a=requestAnimationFrame(i),()=>{cancelAnimationFrame(a)}}}function Eie(){return Cie(new Aie)}var Tie=T.createContext(Eie);function Oie(e,t){var r=T.useContext(Tie);return T.useMemo(()=>t??r(e),[e,t,r])}var Pie={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},d9={t:0},C3={t:1};function rp(e){var t=Qi(e,Pie),{isActive:r,canBegin:n,duration:a,easing:i,begin:l,onAnimationEnd:o,onAnimationStart:c,children:d}=t,f=Oie(t.animationId,t.animationManager),[p,y]=T.useState(r?d9:C3),g=T.useRef(null);return T.useEffect(()=>{r||y(C3)},[r]),T.useEffect(()=>{if(!r||!n)return uie;var N=Nie(d9,C3,jie(i),a,y,f.getTimeoutController()),w=()=>{g.current=N()};return f.start([c,l,w,a,o]),()=>{f.stop(),g.current&&g.current(),o()}},[r,n,a,i,l,c,o,f]),d(p.t)}function np(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=T.useRef(Yg(t)),n=T.useRef(e);return n.current!==e&&(r.current=Yg(t),n.current=e),r.current}var Iie=["radius"],Die=["radius"];function u9(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function h9(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?u9(Object(r),!0).forEach(function(n){Mie(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u9(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Mie(e,t,r){return(t=Lie(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Lie(e){var t=Rie(e,"string");return typeof t=="symbol"?t:t+""}function Rie(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ry(){return Ry=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ry.apply(null,arguments)}function f9(e,t){if(e==null)return{};var r,n,a=Fie(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Fie(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var m9=(e,t,r,n,a)=>{var i=Math.min(Math.abs(r)/2,Math.abs(n)/2),l=n>=0?1:-1,o=r>=0?1:-1,c=n>=0&&r>=0||n<0&&r<0?1:0,d;if(i>0&&a instanceof Array){for(var f=[0,0,0,0],p=0,y=4;p<y;p++)f[p]=a[p]>i?i:a[p];d="M".concat(e,",").concat(t+l*f[0]),f[0]>0&&(d+="A ".concat(f[0],",").concat(f[0],",0,0,").concat(c,",").concat(e+o*f[0],",").concat(t)),d+="L ".concat(e+r-o*f[1],",").concat(t),f[1]>0&&(d+="A ".concat(f[1],",").concat(f[1],",0,0,").concat(c,`,
        `).concat(e+r,",").concat(t+l*f[1])),d+="L ".concat(e+r,",").concat(t+n-l*f[2]),f[2]>0&&(d+="A ".concat(f[2],",").concat(f[2],",0,0,").concat(c,`,
        `).concat(e+r-o*f[2],",").concat(t+n)),d+="L ".concat(e+o*f[3],",").concat(t+n),f[3]>0&&(d+="A ".concat(f[3],",").concat(f[3],",0,0,").concat(c,`,
        `).concat(e,",").concat(t+n-l*f[3])),d+="Z"}else if(i>0&&a===+a&&a>0){var g=Math.min(i,a);d="M ".concat(e,",").concat(t+l*g,`
            A `).concat(g,",").concat(g,",0,0,").concat(c,",").concat(e+o*g,",").concat(t,`
            L `).concat(e+r-o*g,",").concat(t,`
            A `).concat(g,",").concat(g,",0,0,").concat(c,",").concat(e+r,",").concat(t+l*g,`
            L `).concat(e+r,",").concat(t+n-l*g,`
            A `).concat(g,",").concat(g,",0,0,").concat(c,",").concat(e+r-o*g,",").concat(t+n,`
            L `).concat(e+o*g,",").concat(t+n,`
            A `).concat(g,",").concat(g,",0,0,").concat(c,",").concat(e,",").concat(t+n-l*g," Z")}else d="M ".concat(e,",").concat(t," h ").concat(r," v ").concat(n," h ").concat(-r," Z");return d},Bie={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},sU=e=>{var t=Qi(e,Bie),r=T.useRef(null),[n,a]=T.useState(-1);T.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var fe=r.current.getTotalLength();fe&&a(fe)}catch{}},[]);var{x:i,y:l,width:o,height:c,radius:d,className:f}=t,{animationEasing:p,animationDuration:y,animationBegin:g,isAnimationActive:N,isUpdateAnimationActive:w}=t,k=T.useRef(o),S=T.useRef(c),O=T.useRef(i),E=T.useRef(l),D=T.useMemo(()=>({x:i,y:l,width:o,height:c,radius:d}),[i,l,o,c,d]),q=np(D,"rectangle-");if(i!==+i||l!==+l||o!==+o||c!==+c||o===0||c===0)return null;var W=Zn("recharts-rectangle",f);if(!w){var R=Eo(t),{radius:U}=R,z=f9(R,Iie);return T.createElement("path",Ry({},z,{radius:typeof d=="number"?d:void 0,className:W,d:m9(i,l,o,c,d)}))}var Z=k.current,H=S.current,K=O.current,J=E.current,ae="0px ".concat(n===-1?1:n,"px"),se="".concat(n,"px 0px"),ue=tU(["strokeDasharray"],y,typeof p=="string"?p:void 0);return T.createElement(rp,{animationId:q,key:q,canBegin:n>0,duration:y,easing:p,isActive:w,begin:g},fe=>{var ke=rs(Z,o,fe),_e=rs(H,c,fe),Le=rs(K,i,fe),xe=rs(J,l,fe);r.current&&(k.current=ke,S.current=_e,O.current=Le,E.current=xe);var B;N?fe>0?B={transition:ue,strokeDasharray:se}:B={strokeDasharray:ae}:B={strokeDasharray:se};var ee=Eo(t),{radius:Y}=ee,re=f9(ee,Die);return T.createElement("path",Ry({},re,{radius:typeof d=="number"?d:void 0,className:W,d:m9(Le,xe,ke,_e,d),ref:r,style:h9(h9({},B),t.style)}))})};function iU(e){var{cx:t,cy:r,radius:n,startAngle:a,endAngle:i}=e,l=Ri(t,r,n,a),o=Ri(t,r,n,i);return{points:[l,o],cx:t,cy:r,radius:n,startAngle:a,endAngle:i}}function eS(){return eS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},eS.apply(null,arguments)}var Uie=(e,t)=>{var r=vl(t-e),n=Math.min(Math.abs(t-e),359.999);return r*n},N2=e=>{var{cx:t,cy:r,radius:n,angle:a,sign:i,isExternal:l,cornerRadius:o,cornerIsExternal:c}=e,d=o*(l?1:-1)+n,f=Math.asin(o/d)/Py,p=c?a:a+i*f,y=Ri(t,r,d,p),g=Ri(t,r,n,p),N=c?a-i*f:a,w=Ri(t,r,d*Math.cos(f*Py),N);return{center:y,circleTangency:g,lineTangency:w,theta:f}},lU=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:a,startAngle:i,endAngle:l}=e,o=Uie(i,l),c=i+o,d=Ri(t,r,a,i),f=Ri(t,r,a,c),p="M ".concat(d.x,",").concat(d.y,`
    A `).concat(a,",").concat(a,`,0,
    `).concat(+(Math.abs(o)>180),",").concat(+(i>c),`,
    `).concat(f.x,",").concat(f.y,`
  `);if(n>0){var y=Ri(t,r,n,i),g=Ri(t,r,n,c);p+="L ".concat(g.x,",").concat(g.y,`
            A `).concat(n,",").concat(n,`,0,
            `).concat(+(Math.abs(o)>180),",").concat(+(i<=c),`,
            `).concat(y.x,",").concat(y.y," Z")}else p+="L ".concat(t,",").concat(r," Z");return p},zie=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:a,cornerRadius:i,forceCornerRadius:l,cornerIsExternal:o,startAngle:c,endAngle:d}=e,f=vl(d-c),{circleTangency:p,lineTangency:y,theta:g}=N2({cx:t,cy:r,radius:a,angle:c,sign:f,cornerRadius:i,cornerIsExternal:o}),{circleTangency:N,lineTangency:w,theta:k}=N2({cx:t,cy:r,radius:a,angle:d,sign:-f,cornerRadius:i,cornerIsExternal:o}),S=o?Math.abs(c-d):Math.abs(c-d)-g-k;if(S<0)return l?"M ".concat(y.x,",").concat(y.y,`
        a`).concat(i,",").concat(i,",0,0,1,").concat(i*2,`,0
        a`).concat(i,",").concat(i,",0,0,1,").concat(-i*2,`,0
      `):lU({cx:t,cy:r,innerRadius:n,outerRadius:a,startAngle:c,endAngle:d});var O="M ".concat(y.x,",").concat(y.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(f<0),",").concat(p.x,",").concat(p.y,`
    A`).concat(a,",").concat(a,",0,").concat(+(S>180),",").concat(+(f<0),",").concat(N.x,",").concat(N.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(f<0),",").concat(w.x,",").concat(w.y,`
  `);if(n>0){var{circleTangency:E,lineTangency:D,theta:q}=N2({cx:t,cy:r,radius:n,angle:c,sign:f,isExternal:!0,cornerRadius:i,cornerIsExternal:o}),{circleTangency:W,lineTangency:R,theta:U}=N2({cx:t,cy:r,radius:n,angle:d,sign:-f,isExternal:!0,cornerRadius:i,cornerIsExternal:o}),z=o?Math.abs(c-d):Math.abs(c-d)-q-U;if(z<0&&i===0)return"".concat(O,"L").concat(t,",").concat(r,"Z");O+="L".concat(R.x,",").concat(R.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(f<0),",").concat(W.x,",").concat(W.y,`
      A`).concat(n,",").concat(n,",0,").concat(+(z>180),",").concat(+(f>0),",").concat(E.x,",").concat(E.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(f<0),",").concat(D.x,",").concat(D.y,"Z")}else O+="L".concat(t,",").concat(r,"Z");return O},qie={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},oU=e=>{var t=Qi(e,qie),{cx:r,cy:n,innerRadius:a,outerRadius:i,cornerRadius:l,forceCornerRadius:o,cornerIsExternal:c,startAngle:d,endAngle:f,className:p}=t;if(i<a||d===f)return null;var y=Zn("recharts-sector",p),g=i-a,N=no(l,g,0,!0),w;return N>0&&Math.abs(d-f)<360?w=zie({cx:r,cy:n,innerRadius:a,outerRadius:i,cornerRadius:Math.min(N,g/2),forceCornerRadius:o,cornerIsExternal:c,startAngle:d,endAngle:f}):w=lU({cx:r,cy:n,innerRadius:a,outerRadius:i,startAngle:d,endAngle:f}),T.createElement("path",eS({},Eo(t),{className:y,d:w}))};function Hie(e,t,r){var n,a,i,l;if(e==="horizontal")n=t.x,i=n,a=r.top,l=r.top+r.height;else if(e==="vertical")a=t.y,l=a,n=r.left,i=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var{cx:o,cy:c,innerRadius:d,outerRadius:f,angle:p}=t,y=Ri(o,c,d,p),g=Ri(o,c,f,p);n=y.x,a=y.y,i=g.x,l=g.y}else return iU(t);return[{x:n,y:a},{x:i,y:l}]}var A3={},E3={},T3={},x9;function $ie(){return x9||(x9=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=cB();function r(n){return t.isSymbol(n)?NaN:Number(n)}e.toNumber=r})(T3)),T3}var p9;function Vie(){return p9||(p9=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=$ie();function r(n){return n?(n=t.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}e.toFinite=r})(E3)),E3}var g9;function Wie(){return g9||(g9=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=dB(),r=Vie();function n(a,i,l){l&&typeof l!="number"&&t.isIterateeCall(a,i,l)&&(i=l=void 0),a=r.toFinite(a),i===void 0?(i=a,a=0):i=r.toFinite(i),l=l===void 0?a<i?1:-1:r.toFinite(l);const o=Math.max(Math.ceil((i-a)/(l||1)),0),c=new Array(o);for(let d=0;d<o;d++)c[d]=a,a+=l;return c}e.range=n})(A3)),A3}var O3,b9;function Kie(){return b9||(b9=1,O3=Wie().range),O3}var Gie=Kie();const cU=gd(Gie);function rf(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Xie(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function tj(e){let t,r,n;e.length!==2?(t=rf,r=(o,c)=>rf(e(o),c),n=(o,c)=>e(o)-c):(t=e===rf||e===Xie?e:Yie,r=e,n=e);function a(o,c,d=0,f=o.length){if(d<f){if(t(c,c)!==0)return f;do{const p=d+f>>>1;r(o[p],c)<0?d=p+1:f=p}while(d<f)}return d}function i(o,c,d=0,f=o.length){if(d<f){if(t(c,c)!==0)return f;do{const p=d+f>>>1;r(o[p],c)<=0?d=p+1:f=p}while(d<f)}return d}function l(o,c,d=0,f=o.length){const p=a(o,c,d,f-1);return p>d&&n(o[p-1],c)>-n(o[p],c)?p-1:p}return{left:a,center:l,right:i}}function Yie(){return 0}function dU(e){return e===null?NaN:+e}function*Zie(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const Qie=tj(rf),qb=Qie.right;tj(dU).center;class v9 extends Map{constructor(t,r=tle){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,a]of t)this.set(n,a)}get(t){return super.get(y9(this,t))}has(t){return super.has(y9(this,t))}set(t,r){return super.set(Jie(this,t),r)}delete(t){return super.delete(ele(this,t))}}function y9({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function Jie({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function ele({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function tle(e){return e!==null&&typeof e=="object"?e.valueOf():e}function rle(e=rf){if(e===rf)return uU;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function uU(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const nle=Math.sqrt(50),ale=Math.sqrt(10),sle=Math.sqrt(2);function Fy(e,t,r){const n=(t-e)/Math.max(0,r),a=Math.floor(Math.log10(n)),i=n/Math.pow(10,a),l=i>=nle?10:i>=ale?5:i>=sle?2:1;let o,c,d;return a<0?(d=Math.pow(10,-a)/l,o=Math.round(e*d),c=Math.round(t*d),o/d<e&&++o,c/d>t&&--c,d=-d):(d=Math.pow(10,a)*l,o=Math.round(e/d),c=Math.round(t/d),o*d<e&&++o,c*d>t&&--c),c<o&&.5<=r&&r<2?Fy(e,t,r*2):[o,c,d]}function tS(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[a,i,l]=n?Fy(t,e,r):Fy(e,t,r);if(!(i>=a))return[];const o=i-a+1,c=new Array(o);if(n)if(l<0)for(let d=0;d<o;++d)c[d]=(i-d)/-l;else for(let d=0;d<o;++d)c[d]=(i-d)*l;else if(l<0)for(let d=0;d<o;++d)c[d]=(a+d)/-l;else for(let d=0;d<o;++d)c[d]=(a+d)*l;return c}function rS(e,t,r){return t=+t,e=+e,r=+r,Fy(e,t,r)[2]}function nS(e,t,r){t=+t,e=+e,r=+r;const n=t<e,a=n?rS(t,e,r):rS(e,t,r);return(n?-1:1)*(a<0?1/-a:a)}function w9(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function k9(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function hU(e,t,r=0,n=1/0,a){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(a=a===void 0?uU:rle(a);n>r;){if(n-r>600){const c=n-r+1,d=t-r+1,f=Math.log(c),p=.5*Math.exp(2*f/3),y=.5*Math.sqrt(f*p*(c-p)/c)*(d-c/2<0?-1:1),g=Math.max(r,Math.floor(t-d*p/c+y)),N=Math.min(n,Math.floor(t+(c-d)*p/c+y));hU(e,t,g,N,a)}const i=e[t];let l=r,o=n;for(ig(e,r,t),a(e[n],i)>0&&ig(e,r,n);l<o;){for(ig(e,l,o),++l,--o;a(e[l],i)<0;)++l;for(;a(e[o],i)>0;)--o}a(e[r],i)===0?ig(e,r,o):(++o,ig(e,o,n)),o<=t&&(r=o+1),t<=o&&(n=o-1)}return e}function ig(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function ile(e,t,r){if(e=Float64Array.from(Zie(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return k9(e);if(t>=1)return w9(e);var n,a=(n-1)*t,i=Math.floor(a),l=w9(hU(e,i).subarray(0,i+1)),o=k9(e.subarray(i+1));return l+(o-l)*(a-i)}}function lle(e,t,r=dU){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,a=(n-1)*t,i=Math.floor(a),l=+r(e[i],i,e),o=+r(e[i+1],i+1,e);return l+(o-l)*(a-i)}}function ole(e,t,r){e=+e,t=+t,r=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+r;for(var n=-1,a=Math.max(0,Math.ceil((t-e)/r))|0,i=new Array(a);++n<a;)i[n]=e+n*r;return i}function vd(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function th(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const aS=Symbol("implicit");function rj(){var e=new v9,t=[],r=[],n=aS;function a(i){let l=e.get(i);if(l===void 0){if(n!==aS)return n;e.set(i,l=t.push(i)-1)}return r[l%r.length]}return a.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new v9;for(const l of i)e.has(l)||e.set(l,t.push(l)-1);return a},a.range=function(i){return arguments.length?(r=Array.from(i),a):r.slice()},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return rj(t,r).unknown(n)},vd.apply(a,arguments),a}function nj(){var e=rj().unknown(void 0),t=e.domain,r=e.range,n=0,a=1,i,l,o=!1,c=0,d=0,f=.5;delete e.unknown;function p(){var y=t().length,g=a<n,N=g?a:n,w=g?n:a;i=(w-N)/Math.max(1,y-c+d*2),o&&(i=Math.floor(i)),N+=(w-N-i*(y-c))*f,l=i*(1-c),o&&(N=Math.round(N),l=Math.round(l));var k=ole(y).map(function(S){return N+i*S});return r(g?k.reverse():k)}return e.domain=function(y){return arguments.length?(t(y),p()):t()},e.range=function(y){return arguments.length?([n,a]=y,n=+n,a=+a,p()):[n,a]},e.rangeRound=function(y){return[n,a]=y,n=+n,a=+a,o=!0,p()},e.bandwidth=function(){return l},e.step=function(){return i},e.round=function(y){return arguments.length?(o=!!y,p()):o},e.padding=function(y){return arguments.length?(c=Math.min(1,d=+y),p()):c},e.paddingInner=function(y){return arguments.length?(c=Math.min(1,y),p()):c},e.paddingOuter=function(y){return arguments.length?(d=+y,p()):d},e.align=function(y){return arguments.length?(f=Math.max(0,Math.min(1,y)),p()):f},e.copy=function(){return nj(t(),[n,a]).round(o).paddingInner(c).paddingOuter(d).align(f)},vd.apply(p(),arguments)}function fU(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return fU(t())},e}function cle(){return fU(nj.apply(null,arguments).paddingInner(1))}function aj(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function mU(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function Hb(){}var tb=.7,By=1/tb,x1="\\s*([+-]?\\d+)\\s*",rb="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Bu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",dle=/^#([0-9a-f]{3,8})$/,ule=new RegExp(`^rgb\\(${x1},${x1},${x1}\\)$`),hle=new RegExp(`^rgb\\(${Bu},${Bu},${Bu}\\)$`),fle=new RegExp(`^rgba\\(${x1},${x1},${x1},${rb}\\)$`),mle=new RegExp(`^rgba\\(${Bu},${Bu},${Bu},${rb}\\)$`),xle=new RegExp(`^hsl\\(${rb},${Bu},${Bu}\\)$`),ple=new RegExp(`^hsla\\(${rb},${Bu},${Bu},${rb}\\)$`),N9={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};aj(Hb,nb,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:_9,formatHex:_9,formatHex8:gle,formatHsl:ble,formatRgb:S9,toString:S9});function _9(){return this.rgb().formatHex()}function gle(){return this.rgb().formatHex8()}function ble(){return xU(this).formatHsl()}function S9(){return this.rgb().formatRgb()}function nb(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=dle.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?j9(t):r===3?new rc(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?_2(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?_2(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=ule.exec(e))?new rc(t[1],t[2],t[3],1):(t=hle.exec(e))?new rc(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=fle.exec(e))?_2(t[1],t[2],t[3],t[4]):(t=mle.exec(e))?_2(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=xle.exec(e))?E9(t[1],t[2]/100,t[3]/100,1):(t=ple.exec(e))?E9(t[1],t[2]/100,t[3]/100,t[4]):N9.hasOwnProperty(e)?j9(N9[e]):e==="transparent"?new rc(NaN,NaN,NaN,0):null}function j9(e){return new rc(e>>16&255,e>>8&255,e&255,1)}function _2(e,t,r,n){return n<=0&&(e=t=r=NaN),new rc(e,t,r,n)}function vle(e){return e instanceof Hb||(e=nb(e)),e?(e=e.rgb(),new rc(e.r,e.g,e.b,e.opacity)):new rc}function sS(e,t,r,n){return arguments.length===1?vle(e):new rc(e,t,r,n??1)}function rc(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}aj(rc,sS,mU(Hb,{brighter(e){return e=e==null?By:Math.pow(By,e),new rc(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?tb:Math.pow(tb,e),new rc(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new rc(gm(this.r),gm(this.g),gm(this.b),Uy(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:C9,formatHex:C9,formatHex8:yle,formatRgb:A9,toString:A9}));function C9(){return`#${Jf(this.r)}${Jf(this.g)}${Jf(this.b)}`}function yle(){return`#${Jf(this.r)}${Jf(this.g)}${Jf(this.b)}${Jf((isNaN(this.opacity)?1:this.opacity)*255)}`}function A9(){const e=Uy(this.opacity);return`${e===1?"rgb(":"rgba("}${gm(this.r)}, ${gm(this.g)}, ${gm(this.b)}${e===1?")":`, ${e})`}`}function Uy(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function gm(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Jf(e){return e=gm(e),(e<16?"0":"")+e.toString(16)}function E9(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Gd(e,t,r,n)}function xU(e){if(e instanceof Gd)return new Gd(e.h,e.s,e.l,e.opacity);if(e instanceof Hb||(e=nb(e)),!e)return new Gd;if(e instanceof Gd)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,a=Math.min(t,r,n),i=Math.max(t,r,n),l=NaN,o=i-a,c=(i+a)/2;return o?(t===i?l=(r-n)/o+(r<n)*6:r===i?l=(n-t)/o+2:l=(t-r)/o+4,o/=c<.5?i+a:2-i-a,l*=60):o=c>0&&c<1?0:l,new Gd(l,o,c,e.opacity)}function wle(e,t,r,n){return arguments.length===1?xU(e):new Gd(e,t,r,n??1)}function Gd(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}aj(Gd,wle,mU(Hb,{brighter(e){return e=e==null?By:Math.pow(By,e),new Gd(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?tb:Math.pow(tb,e),new Gd(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,a=2*r-n;return new rc(P3(e>=240?e-240:e+120,a,n),P3(e,a,n),P3(e<120?e+240:e-120,a,n),this.opacity)},clamp(){return new Gd(T9(this.h),S2(this.s),S2(this.l),Uy(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Uy(this.opacity);return`${e===1?"hsl(":"hsla("}${T9(this.h)}, ${S2(this.s)*100}%, ${S2(this.l)*100}%${e===1?")":`, ${e})`}`}}));function T9(e){return e=(e||0)%360,e<0?e+360:e}function S2(e){return Math.max(0,Math.min(1,e||0))}function P3(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const sj=e=>()=>e;function kle(e,t){return function(r){return e+r*t}}function Nle(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function _le(e){return(e=+e)==1?pU:function(t,r){return r-t?Nle(t,r,e):sj(isNaN(t)?r:t)}}function pU(e,t){var r=t-e;return r?kle(e,r):sj(isNaN(e)?t:e)}const O9=(function e(t){var r=_le(t);function n(a,i){var l=r((a=sS(a)).r,(i=sS(i)).r),o=r(a.g,i.g),c=r(a.b,i.b),d=pU(a.opacity,i.opacity);return function(f){return a.r=l(f),a.g=o(f),a.b=c(f),a.opacity=d(f),a+""}}return n.gamma=e,n})(1);function Sle(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),a;return function(i){for(a=0;a<r;++a)n[a]=e[a]*(1-i)+t[a]*i;return n}}function jle(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Cle(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,a=new Array(n),i=new Array(r),l;for(l=0;l<n;++l)a[l]=ap(e[l],t[l]);for(;l<r;++l)i[l]=t[l];return function(o){for(l=0;l<n;++l)i[l]=a[l](o);return i}}function Ale(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function zy(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function Ele(e,t){var r={},n={},a;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in e?r[a]=ap(e[a],t[a]):n[a]=t[a];return function(i){for(a in r)n[a]=r[a](i);return n}}var iS=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,I3=new RegExp(iS.source,"g");function Tle(e){return function(){return e}}function Ole(e){return function(t){return e(t)+""}}function Ple(e,t){var r=iS.lastIndex=I3.lastIndex=0,n,a,i,l=-1,o=[],c=[];for(e=e+"",t=t+"";(n=iS.exec(e))&&(a=I3.exec(t));)(i=a.index)>r&&(i=t.slice(r,i),o[l]?o[l]+=i:o[++l]=i),(n=n[0])===(a=a[0])?o[l]?o[l]+=a:o[++l]=a:(o[++l]=null,c.push({i:l,x:zy(n,a)})),r=I3.lastIndex;return r<t.length&&(i=t.slice(r),o[l]?o[l]+=i:o[++l]=i),o.length<2?c[0]?Ole(c[0].x):Tle(t):(t=c.length,function(d){for(var f=0,p;f<t;++f)o[(p=c[f]).i]=p.x(d);return o.join("")})}function ap(e,t){var r=typeof t,n;return t==null||r==="boolean"?sj(t):(r==="number"?zy:r==="string"?(n=nb(t))?(t=n,O9):Ple:t instanceof nb?O9:t instanceof Date?Ale:jle(t)?Sle:Array.isArray(t)?Cle:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Ele:zy)(e,t)}function ij(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function Ile(e,t){t===void 0&&(t=e,e=ap);for(var r=0,n=t.length-1,a=t[0],i=new Array(n<0?0:n);r<n;)i[r]=e(a,a=t[++r]);return function(l){var o=Math.max(0,Math.min(n-1,Math.floor(l*=n)));return i[o](l-o)}}function Dle(e){return function(){return e}}function qy(e){return+e}var P9=[0,1];function jo(e){return e}function lS(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:Dle(isNaN(t)?NaN:.5)}function Mle(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function Lle(e,t,r){var n=e[0],a=e[1],i=t[0],l=t[1];return a<n?(n=lS(a,n),i=r(l,i)):(n=lS(n,a),i=r(i,l)),function(o){return i(n(o))}}function Rle(e,t,r){var n=Math.min(e.length,t.length)-1,a=new Array(n),i=new Array(n),l=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++l<n;)a[l]=lS(e[l],e[l+1]),i[l]=r(t[l],t[l+1]);return function(o){var c=qb(e,o,1,n)-1;return i[c](a[c](o))}}function $b(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function rk(){var e=P9,t=P9,r=ap,n,a,i,l=jo,o,c,d;function f(){var y=Math.min(e.length,t.length);return l!==jo&&(l=Mle(e[0],e[y-1])),o=y>2?Rle:Lle,c=d=null,p}function p(y){return y==null||isNaN(y=+y)?i:(c||(c=o(e.map(n),t,r)))(n(l(y)))}return p.invert=function(y){return l(a((d||(d=o(t,e.map(n),zy)))(y)))},p.domain=function(y){return arguments.length?(e=Array.from(y,qy),f()):e.slice()},p.range=function(y){return arguments.length?(t=Array.from(y),f()):t.slice()},p.rangeRound=function(y){return t=Array.from(y),r=ij,f()},p.clamp=function(y){return arguments.length?(l=y?!0:jo,f()):l!==jo},p.interpolate=function(y){return arguments.length?(r=y,f()):r},p.unknown=function(y){return arguments.length?(i=y,p):i},function(y,g){return n=y,a=g,f()}}function lj(){return rk()(jo,jo)}function Fle(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Hy(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function H1(e){return e=Hy(Math.abs(e)),e?e[1]:NaN}function Ble(e,t){return function(r,n){for(var a=r.length,i=[],l=0,o=e[0],c=0;a>0&&o>0&&(c+o+1>n&&(o=Math.max(1,n-c)),i.push(r.substring(a-=o,a+o)),!((c+=o+1)>n));)o=e[l=(l+1)%e.length];return i.reverse().join(t)}}function Ule(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var zle=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ab(e){if(!(t=zle.exec(e)))throw new Error("invalid format: "+e);var t;return new oj({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}ab.prototype=oj.prototype;function oj(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}oj.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function qle(e){e:for(var t=e.length,r=1,n=-1,a;r<t;++r)switch(e[r]){case".":n=a=r;break;case"0":n===0&&(n=r),a=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(a+1):e}var gU;function Hle(e,t){var r=Hy(e,t);if(!r)return e+"";var n=r[0],a=r[1],i=a-(gU=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,l=n.length;return i===l?n:i>l?n+new Array(i-l+1).join("0"):i>0?n.slice(0,i)+"."+n.slice(i):"0."+new Array(1-i).join("0")+Hy(e,Math.max(0,t+i-1))[0]}function I9(e,t){var r=Hy(e,t);if(!r)return e+"";var n=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")}const D9={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:Fle,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>I9(e*100,t),r:I9,s:Hle,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function M9(e){return e}var L9=Array.prototype.map,R9=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function $le(e){var t=e.grouping===void 0||e.thousands===void 0?M9:Ble(L9.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",a=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?M9:Ule(L9.call(e.numerals,String)),l=e.percent===void 0?"%":e.percent+"",o=e.minus===void 0?"":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function d(p){p=ab(p);var y=p.fill,g=p.align,N=p.sign,w=p.symbol,k=p.zero,S=p.width,O=p.comma,E=p.precision,D=p.trim,q=p.type;q==="n"?(O=!0,q="g"):D9[q]||(E===void 0&&(E=12),D=!0,q="g"),(k||y==="0"&&g==="=")&&(k=!0,y="0",g="=");var W=w==="$"?r:w==="#"&&/[boxX]/.test(q)?"0"+q.toLowerCase():"",R=w==="$"?n:/[%p]/.test(q)?l:"",U=D9[q],z=/[defgprs%]/.test(q);E=E===void 0?6:/[gprs]/.test(q)?Math.max(1,Math.min(21,E)):Math.max(0,Math.min(20,E));function Z(H){var K=W,J=R,ae,se,ue;if(q==="c")J=U(H)+J,H="";else{H=+H;var fe=H<0||1/H<0;if(H=isNaN(H)?c:U(Math.abs(H),E),D&&(H=qle(H)),fe&&+H==0&&N!=="+"&&(fe=!1),K=(fe?N==="("?N:o:N==="-"||N==="("?"":N)+K,J=(q==="s"?R9[8+gU/3]:"")+J+(fe&&N==="("?")":""),z){for(ae=-1,se=H.length;++ae<se;)if(ue=H.charCodeAt(ae),48>ue||ue>57){J=(ue===46?a+H.slice(ae+1):H.slice(ae))+J,H=H.slice(0,ae);break}}}O&&!k&&(H=t(H,1/0));var ke=K.length+H.length+J.length,_e=ke<S?new Array(S-ke+1).join(y):"";switch(O&&k&&(H=t(_e+H,_e.length?S-J.length:1/0),_e=""),g){case"<":H=K+H+J+_e;break;case"=":H=K+_e+H+J;break;case"^":H=_e.slice(0,ke=_e.length>>1)+K+H+J+_e.slice(ke);break;default:H=_e+K+H+J;break}return i(H)}return Z.toString=function(){return p+""},Z}function f(p,y){var g=d((p=ab(p),p.type="f",p)),N=Math.max(-8,Math.min(8,Math.floor(H1(y)/3)))*3,w=Math.pow(10,-N),k=R9[8+N/3];return function(S){return g(w*S)+k}}return{format:d,formatPrefix:f}}var j2,cj,bU;Vle({thousands:",",grouping:[3],currency:["$",""]});function Vle(e){return j2=$le(e),cj=j2.format,bU=j2.formatPrefix,j2}function Wle(e){return Math.max(0,-H1(Math.abs(e)))}function Kle(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(H1(t)/3)))*3-H1(Math.abs(e)))}function Gle(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,H1(t)-H1(e))+1}function vU(e,t,r,n){var a=nS(e,t,r),i;switch(n=ab(n??",f"),n.type){case"s":{var l=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(i=Kle(a,l))&&(n.precision=i),bU(n,l)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(i=Gle(a,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=i-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(i=Wle(a))&&(n.precision=i-(n.type==="%")*2);break}}return cj(n)}function pf(e){var t=e.domain;return e.ticks=function(r){var n=t();return tS(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var a=t();return vU(a[0],a[a.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),a=0,i=n.length-1,l=n[a],o=n[i],c,d,f=10;for(o<l&&(d=l,l=o,o=d,d=a,a=i,i=d);f-- >0;){if(d=rS(l,o,r),d===c)return n[a]=l,n[i]=o,t(n);if(d>0)l=Math.floor(l/d)*d,o=Math.ceil(o/d)*d;else if(d<0)l=Math.ceil(l*d)/d,o=Math.floor(o*d)/d;else break;c=d}return e},e}function yU(){var e=lj();return e.copy=function(){return $b(e,yU())},vd.apply(e,arguments),pf(e)}function wU(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,qy),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return wU(e).unknown(t)},e=arguments.length?Array.from(e,qy):[0,1],pf(r)}function kU(e,t){e=e.slice();var r=0,n=e.length-1,a=e[r],i=e[n],l;return i<a&&(l=r,r=n,n=l,l=a,a=i,i=l),e[r]=t.floor(a),e[n]=t.ceil(i),e}function F9(e){return Math.log(e)}function B9(e){return Math.exp(e)}function Xle(e){return-Math.log(-e)}function Yle(e){return-Math.exp(-e)}function Zle(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Qle(e){return e===10?Zle:e===Math.E?Math.exp:t=>Math.pow(e,t)}function Jle(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function U9(e){return(t,r)=>-e(-t,r)}function dj(e){const t=e(F9,B9),r=t.domain;let n=10,a,i;function l(){return a=Jle(n),i=Qle(n),r()[0]<0?(a=U9(a),i=U9(i),e(Xle,Yle)):e(F9,B9),t}return t.base=function(o){return arguments.length?(n=+o,l()):n},t.domain=function(o){return arguments.length?(r(o),l()):r()},t.ticks=o=>{const c=r();let d=c[0],f=c[c.length-1];const p=f<d;p&&([d,f]=[f,d]);let y=a(d),g=a(f),N,w;const k=o==null?10:+o;let S=[];if(!(n%1)&&g-y<k){if(y=Math.floor(y),g=Math.ceil(g),d>0){for(;y<=g;++y)for(N=1;N<n;++N)if(w=y<0?N/i(-y):N*i(y),!(w<d)){if(w>f)break;S.push(w)}}else for(;y<=g;++y)for(N=n-1;N>=1;--N)if(w=y>0?N/i(-y):N*i(y),!(w<d)){if(w>f)break;S.push(w)}S.length*2<k&&(S=tS(d,f,k))}else S=tS(y,g,Math.min(g-y,k)).map(i);return p?S.reverse():S},t.tickFormat=(o,c)=>{if(o==null&&(o=10),c==null&&(c=n===10?"s":","),typeof c!="function"&&(!(n%1)&&(c=ab(c)).precision==null&&(c.trim=!0),c=cj(c)),o===1/0)return c;const d=Math.max(1,n*o/t.ticks().length);return f=>{let p=f/i(Math.round(a(f)));return p*n<n-.5&&(p*=n),p<=d?c(f):""}},t.nice=()=>r(kU(r(),{floor:o=>i(Math.floor(a(o))),ceil:o=>i(Math.ceil(a(o)))})),t}function NU(){const e=dj(rk()).domain([1,10]);return e.copy=()=>$b(e,NU()).base(e.base()),vd.apply(e,arguments),e}function z9(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function q9(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function uj(e){var t=1,r=e(z9(t),q9(t));return r.constant=function(n){return arguments.length?e(z9(t=+n),q9(t)):t},pf(r)}function _U(){var e=uj(rk());return e.copy=function(){return $b(e,_U()).constant(e.constant())},vd.apply(e,arguments)}function H9(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function eoe(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function toe(e){return e<0?-e*e:e*e}function hj(e){var t=e(jo,jo),r=1;function n(){return r===1?e(jo,jo):r===.5?e(eoe,toe):e(H9(r),H9(1/r))}return t.exponent=function(a){return arguments.length?(r=+a,n()):r},pf(t)}function fj(){var e=hj(rk());return e.copy=function(){return $b(e,fj()).exponent(e.exponent())},vd.apply(e,arguments),e}function roe(){return fj.apply(null,arguments).exponent(.5)}function $9(e){return Math.sign(e)*e*e}function noe(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function SU(){var e=lj(),t=[0,1],r=!1,n;function a(i){var l=noe(e(i));return isNaN(l)?n:r?Math.round(l):l}return a.invert=function(i){return e.invert($9(i))},a.domain=function(i){return arguments.length?(e.domain(i),a):e.domain()},a.range=function(i){return arguments.length?(e.range((t=Array.from(i,qy)).map($9)),a):t.slice()},a.rangeRound=function(i){return a.range(i).round(!0)},a.round=function(i){return arguments.length?(r=!!i,a):r},a.clamp=function(i){return arguments.length?(e.clamp(i),a):e.clamp()},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return SU(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},vd.apply(a,arguments),pf(a)}function jU(){var e=[],t=[],r=[],n;function a(){var l=0,o=Math.max(1,t.length);for(r=new Array(o-1);++l<o;)r[l-1]=lle(e,l/o);return i}function i(l){return l==null||isNaN(l=+l)?n:t[qb(r,l)]}return i.invertExtent=function(l){var o=t.indexOf(l);return o<0?[NaN,NaN]:[o>0?r[o-1]:e[0],o<r.length?r[o]:e[e.length-1]]},i.domain=function(l){if(!arguments.length)return e.slice();e=[];for(let o of l)o!=null&&!isNaN(o=+o)&&e.push(o);return e.sort(rf),a()},i.range=function(l){return arguments.length?(t=Array.from(l),a()):t.slice()},i.unknown=function(l){return arguments.length?(n=l,i):n},i.quantiles=function(){return r.slice()},i.copy=function(){return jU().domain(e).range(t).unknown(n)},vd.apply(i,arguments)}function CU(){var e=0,t=1,r=1,n=[.5],a=[0,1],i;function l(c){return c!=null&&c<=c?a[qb(n,c,0,r)]:i}function o(){var c=-1;for(n=new Array(r);++c<r;)n[c]=((c+1)*t-(c-r)*e)/(r+1);return l}return l.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,o()):[e,t]},l.range=function(c){return arguments.length?(r=(a=Array.from(c)).length-1,o()):a.slice()},l.invertExtent=function(c){var d=a.indexOf(c);return d<0?[NaN,NaN]:d<1?[e,n[0]]:d>=r?[n[r-1],t]:[n[d-1],n[d]]},l.unknown=function(c){return arguments.length&&(i=c),l},l.thresholds=function(){return n.slice()},l.copy=function(){return CU().domain([e,t]).range(a).unknown(i)},vd.apply(pf(l),arguments)}function AU(){var e=[.5],t=[0,1],r,n=1;function a(i){return i!=null&&i<=i?t[qb(e,i,0,n)]:r}return a.domain=function(i){return arguments.length?(e=Array.from(i),n=Math.min(e.length,t.length-1),a):e.slice()},a.range=function(i){return arguments.length?(t=Array.from(i),n=Math.min(e.length,t.length-1),a):t.slice()},a.invertExtent=function(i){var l=t.indexOf(i);return[e[l-1],e[l]]},a.unknown=function(i){return arguments.length?(r=i,a):r},a.copy=function(){return AU().domain(e).range(t).unknown(r)},vd.apply(a,arguments)}const D3=new Date,M3=new Date;function Ji(e,t,r,n){function a(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return a.floor=i=>(e(i=new Date(+i)),i),a.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),a.round=i=>{const l=a(i),o=a.ceil(i);return i-l<o-i?l:o},a.offset=(i,l)=>(t(i=new Date(+i),l==null?1:Math.floor(l)),i),a.range=(i,l,o)=>{const c=[];if(i=a.ceil(i),o=o==null?1:Math.floor(o),!(i<l)||!(o>0))return c;let d;do c.push(d=new Date(+i)),t(i,o),e(i);while(d<i&&i<l);return c},a.filter=i=>Ji(l=>{if(l>=l)for(;e(l),!i(l);)l.setTime(l-1)},(l,o)=>{if(l>=l)if(o<0)for(;++o<=0;)for(;t(l,-1),!i(l););else for(;--o>=0;)for(;t(l,1),!i(l););}),r&&(a.count=(i,l)=>(D3.setTime(+i),M3.setTime(+l),e(D3),e(M3),Math.floor(r(D3,M3))),a.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?a.filter(n?l=>n(l)%i===0:l=>a.count(0,l)%i===0):a)),a}const $y=Ji(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);$y.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Ji(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):$y);$y.range;const A0=1e3,cd=A0*60,E0=cd*60,K0=E0*24,mj=K0*7,V9=K0*30,L3=K0*365,em=Ji(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*A0)},(e,t)=>(t-e)/A0,e=>e.getUTCSeconds());em.range;const xj=Ji(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*A0)},(e,t)=>{e.setTime(+e+t*cd)},(e,t)=>(t-e)/cd,e=>e.getMinutes());xj.range;const pj=Ji(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*cd)},(e,t)=>(t-e)/cd,e=>e.getUTCMinutes());pj.range;const gj=Ji(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*A0-e.getMinutes()*cd)},(e,t)=>{e.setTime(+e+t*E0)},(e,t)=>(t-e)/E0,e=>e.getHours());gj.range;const bj=Ji(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*E0)},(e,t)=>(t-e)/E0,e=>e.getUTCHours());bj.range;const Vb=Ji(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*cd)/K0,e=>e.getDate()-1);Vb.range;const nk=Ji(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/K0,e=>e.getUTCDate()-1);nk.range;const EU=Ji(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/K0,e=>Math.floor(e/K0));EU.range;function Qm(e){return Ji(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*cd)/mj)}const ak=Qm(0),Vy=Qm(1),aoe=Qm(2),soe=Qm(3),$1=Qm(4),ioe=Qm(5),loe=Qm(6);ak.range;Vy.range;aoe.range;soe.range;$1.range;ioe.range;loe.range;function Jm(e){return Ji(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/mj)}const sk=Jm(0),Wy=Jm(1),ooe=Jm(2),coe=Jm(3),V1=Jm(4),doe=Jm(5),uoe=Jm(6);sk.range;Wy.range;ooe.range;coe.range;V1.range;doe.range;uoe.range;const vj=Ji(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());vj.range;const yj=Ji(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());yj.range;const G0=Ji(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());G0.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Ji(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});G0.range;const X0=Ji(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());X0.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Ji(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});X0.range;function TU(e,t,r,n,a,i){const l=[[em,1,A0],[em,5,5*A0],[em,15,15*A0],[em,30,30*A0],[i,1,cd],[i,5,5*cd],[i,15,15*cd],[i,30,30*cd],[a,1,E0],[a,3,3*E0],[a,6,6*E0],[a,12,12*E0],[n,1,K0],[n,2,2*K0],[r,1,mj],[t,1,V9],[t,3,3*V9],[e,1,L3]];function o(d,f,p){const y=f<d;y&&([d,f]=[f,d]);const g=p&&typeof p.range=="function"?p:c(d,f,p),N=g?g.range(d,+f+1):[];return y?N.reverse():N}function c(d,f,p){const y=Math.abs(f-d)/p,g=tj(([,,k])=>k).right(l,y);if(g===l.length)return e.every(nS(d/L3,f/L3,p));if(g===0)return $y.every(Math.max(nS(d,f,p),1));const[N,w]=l[y/l[g-1][2]<l[g][2]/y?g-1:g];return N.every(w)}return[o,c]}const[hoe,foe]=TU(X0,yj,sk,EU,bj,pj),[moe,xoe]=TU(G0,vj,ak,Vb,gj,xj);function R3(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function F3(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function lg(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function poe(e){var t=e.dateTime,r=e.date,n=e.time,a=e.periods,i=e.days,l=e.shortDays,o=e.months,c=e.shortMonths,d=og(a),f=cg(a),p=og(i),y=cg(i),g=og(l),N=cg(l),w=og(o),k=cg(o),S=og(c),O=cg(c),E={a:fe,A:ke,b:_e,B:Le,c:null,d:Z9,e:Z9,f:Boe,g:Xoe,G:Zoe,H:Loe,I:Roe,j:Foe,L:OU,m:Uoe,M:zoe,p:xe,q:B,Q:eP,s:tP,S:qoe,u:Hoe,U:$oe,V:Voe,w:Woe,W:Koe,x:null,X:null,y:Goe,Y:Yoe,Z:Qoe,"%":J9},D={a:ee,A:Y,b:re,B:Q,c:null,d:Q9,e:Q9,f:rce,g:hce,G:mce,H:Joe,I:ece,j:tce,L:IU,m:nce,M:ace,p:Ce,q:me,Q:eP,s:tP,S:sce,u:ice,U:lce,V:oce,w:cce,W:dce,x:null,X:null,y:uce,Y:fce,Z:xce,"%":J9},q={a:Z,A:H,b:K,B:J,c:ae,d:X9,e:X9,f:Poe,g:G9,G:K9,H:Y9,I:Y9,j:Aoe,L:Ooe,m:Coe,M:Eoe,p:z,q:joe,Q:Doe,s:Moe,S:Toe,u:woe,U:koe,V:Noe,w:yoe,W:_oe,x:se,X:ue,y:G9,Y:K9,Z:Soe,"%":Ioe};E.x=W(r,E),E.X=W(n,E),E.c=W(t,E),D.x=W(r,D),D.X=W(n,D),D.c=W(t,D);function W(ie,je){return function(be){var le=[],Ee=-1,Me=0,ye=ie.length,at,lt,ut;for(be instanceof Date||(be=new Date(+be));++Ee<ye;)ie.charCodeAt(Ee)===37&&(le.push(ie.slice(Me,Ee)),(lt=W9[at=ie.charAt(++Ee)])!=null?at=ie.charAt(++Ee):lt=at==="e"?" ":"0",(ut=je[at])&&(at=ut(be,lt)),le.push(at),Me=Ee+1);return le.push(ie.slice(Me,Ee)),le.join("")}}function R(ie,je){return function(be){var le=lg(1900,void 0,1),Ee=U(le,ie,be+="",0),Me,ye;if(Ee!=be.length)return null;if("Q"in le)return new Date(le.Q);if("s"in le)return new Date(le.s*1e3+("L"in le?le.L:0));if(je&&!("Z"in le)&&(le.Z=0),"p"in le&&(le.H=le.H%12+le.p*12),le.m===void 0&&(le.m="q"in le?le.q:0),"V"in le){if(le.V<1||le.V>53)return null;"w"in le||(le.w=1),"Z"in le?(Me=F3(lg(le.y,0,1)),ye=Me.getUTCDay(),Me=ye>4||ye===0?Wy.ceil(Me):Wy(Me),Me=nk.offset(Me,(le.V-1)*7),le.y=Me.getUTCFullYear(),le.m=Me.getUTCMonth(),le.d=Me.getUTCDate()+(le.w+6)%7):(Me=R3(lg(le.y,0,1)),ye=Me.getDay(),Me=ye>4||ye===0?Vy.ceil(Me):Vy(Me),Me=Vb.offset(Me,(le.V-1)*7),le.y=Me.getFullYear(),le.m=Me.getMonth(),le.d=Me.getDate()+(le.w+6)%7)}else("W"in le||"U"in le)&&("w"in le||(le.w="u"in le?le.u%7:"W"in le?1:0),ye="Z"in le?F3(lg(le.y,0,1)).getUTCDay():R3(lg(le.y,0,1)).getDay(),le.m=0,le.d="W"in le?(le.w+6)%7+le.W*7-(ye+5)%7:le.w+le.U*7-(ye+6)%7);return"Z"in le?(le.H+=le.Z/100|0,le.M+=le.Z%100,F3(le)):R3(le)}}function U(ie,je,be,le){for(var Ee=0,Me=je.length,ye=be.length,at,lt;Ee<Me;){if(le>=ye)return-1;if(at=je.charCodeAt(Ee++),at===37){if(at=je.charAt(Ee++),lt=q[at in W9?je.charAt(Ee++):at],!lt||(le=lt(ie,be,le))<0)return-1}else if(at!=be.charCodeAt(le++))return-1}return le}function z(ie,je,be){var le=d.exec(je.slice(be));return le?(ie.p=f.get(le[0].toLowerCase()),be+le[0].length):-1}function Z(ie,je,be){var le=g.exec(je.slice(be));return le?(ie.w=N.get(le[0].toLowerCase()),be+le[0].length):-1}function H(ie,je,be){var le=p.exec(je.slice(be));return le?(ie.w=y.get(le[0].toLowerCase()),be+le[0].length):-1}function K(ie,je,be){var le=S.exec(je.slice(be));return le?(ie.m=O.get(le[0].toLowerCase()),be+le[0].length):-1}function J(ie,je,be){var le=w.exec(je.slice(be));return le?(ie.m=k.get(le[0].toLowerCase()),be+le[0].length):-1}function ae(ie,je,be){return U(ie,t,je,be)}function se(ie,je,be){return U(ie,r,je,be)}function ue(ie,je,be){return U(ie,n,je,be)}function fe(ie){return l[ie.getDay()]}function ke(ie){return i[ie.getDay()]}function _e(ie){return c[ie.getMonth()]}function Le(ie){return o[ie.getMonth()]}function xe(ie){return a[+(ie.getHours()>=12)]}function B(ie){return 1+~~(ie.getMonth()/3)}function ee(ie){return l[ie.getUTCDay()]}function Y(ie){return i[ie.getUTCDay()]}function re(ie){return c[ie.getUTCMonth()]}function Q(ie){return o[ie.getUTCMonth()]}function Ce(ie){return a[+(ie.getUTCHours()>=12)]}function me(ie){return 1+~~(ie.getUTCMonth()/3)}return{format:function(ie){var je=W(ie+="",E);return je.toString=function(){return ie},je},parse:function(ie){var je=R(ie+="",!1);return je.toString=function(){return ie},je},utcFormat:function(ie){var je=W(ie+="",D);return je.toString=function(){return ie},je},utcParse:function(ie){var je=R(ie+="",!0);return je.toString=function(){return ie},je}}}var W9={"-":"",_:" ",0:"0"},wl=/^\s*\d+/,goe=/^%/,boe=/[\\^$*+?|[\]().{}]/g;function Ma(e,t,r){var n=e<0?"-":"",a=(n?-e:e)+"",i=a.length;return n+(i<r?new Array(r-i+1).join(t)+a:a)}function voe(e){return e.replace(boe,"\\$&")}function og(e){return new RegExp("^(?:"+e.map(voe).join("|")+")","i")}function cg(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function yoe(e,t,r){var n=wl.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function woe(e,t,r){var n=wl.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function koe(e,t,r){var n=wl.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function Noe(e,t,r){var n=wl.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function _oe(e,t,r){var n=wl.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function K9(e,t,r){var n=wl.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function G9(e,t,r){var n=wl.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function Soe(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function joe(e,t,r){var n=wl.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function Coe(e,t,r){var n=wl.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function X9(e,t,r){var n=wl.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function Aoe(e,t,r){var n=wl.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function Y9(e,t,r){var n=wl.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function Eoe(e,t,r){var n=wl.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function Toe(e,t,r){var n=wl.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function Ooe(e,t,r){var n=wl.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function Poe(e,t,r){var n=wl.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function Ioe(e,t,r){var n=goe.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function Doe(e,t,r){var n=wl.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function Moe(e,t,r){var n=wl.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function Z9(e,t){return Ma(e.getDate(),t,2)}function Loe(e,t){return Ma(e.getHours(),t,2)}function Roe(e,t){return Ma(e.getHours()%12||12,t,2)}function Foe(e,t){return Ma(1+Vb.count(G0(e),e),t,3)}function OU(e,t){return Ma(e.getMilliseconds(),t,3)}function Boe(e,t){return OU(e,t)+"000"}function Uoe(e,t){return Ma(e.getMonth()+1,t,2)}function zoe(e,t){return Ma(e.getMinutes(),t,2)}function qoe(e,t){return Ma(e.getSeconds(),t,2)}function Hoe(e){var t=e.getDay();return t===0?7:t}function $oe(e,t){return Ma(ak.count(G0(e)-1,e),t,2)}function PU(e){var t=e.getDay();return t>=4||t===0?$1(e):$1.ceil(e)}function Voe(e,t){return e=PU(e),Ma($1.count(G0(e),e)+(G0(e).getDay()===4),t,2)}function Woe(e){return e.getDay()}function Koe(e,t){return Ma(Vy.count(G0(e)-1,e),t,2)}function Goe(e,t){return Ma(e.getFullYear()%100,t,2)}function Xoe(e,t){return e=PU(e),Ma(e.getFullYear()%100,t,2)}function Yoe(e,t){return Ma(e.getFullYear()%1e4,t,4)}function Zoe(e,t){var r=e.getDay();return e=r>=4||r===0?$1(e):$1.ceil(e),Ma(e.getFullYear()%1e4,t,4)}function Qoe(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Ma(t/60|0,"0",2)+Ma(t%60,"0",2)}function Q9(e,t){return Ma(e.getUTCDate(),t,2)}function Joe(e,t){return Ma(e.getUTCHours(),t,2)}function ece(e,t){return Ma(e.getUTCHours()%12||12,t,2)}function tce(e,t){return Ma(1+nk.count(X0(e),e),t,3)}function IU(e,t){return Ma(e.getUTCMilliseconds(),t,3)}function rce(e,t){return IU(e,t)+"000"}function nce(e,t){return Ma(e.getUTCMonth()+1,t,2)}function ace(e,t){return Ma(e.getUTCMinutes(),t,2)}function sce(e,t){return Ma(e.getUTCSeconds(),t,2)}function ice(e){var t=e.getUTCDay();return t===0?7:t}function lce(e,t){return Ma(sk.count(X0(e)-1,e),t,2)}function DU(e){var t=e.getUTCDay();return t>=4||t===0?V1(e):V1.ceil(e)}function oce(e,t){return e=DU(e),Ma(V1.count(X0(e),e)+(X0(e).getUTCDay()===4),t,2)}function cce(e){return e.getUTCDay()}function dce(e,t){return Ma(Wy.count(X0(e)-1,e),t,2)}function uce(e,t){return Ma(e.getUTCFullYear()%100,t,2)}function hce(e,t){return e=DU(e),Ma(e.getUTCFullYear()%100,t,2)}function fce(e,t){return Ma(e.getUTCFullYear()%1e4,t,4)}function mce(e,t){var r=e.getUTCDay();return e=r>=4||r===0?V1(e):V1.ceil(e),Ma(e.getUTCFullYear()%1e4,t,4)}function xce(){return"+0000"}function J9(){return"%"}function eP(e){return+e}function tP(e){return Math.floor(+e/1e3)}var Wx,MU,LU;pce({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function pce(e){return Wx=poe(e),MU=Wx.format,Wx.parse,LU=Wx.utcFormat,Wx.utcParse,Wx}function gce(e){return new Date(e)}function bce(e){return e instanceof Date?+e:+new Date(+e)}function wj(e,t,r,n,a,i,l,o,c,d){var f=lj(),p=f.invert,y=f.domain,g=d(".%L"),N=d(":%S"),w=d("%I:%M"),k=d("%I %p"),S=d("%a %d"),O=d("%b %d"),E=d("%B"),D=d("%Y");function q(W){return(c(W)<W?g:o(W)<W?N:l(W)<W?w:i(W)<W?k:n(W)<W?a(W)<W?S:O:r(W)<W?E:D)(W)}return f.invert=function(W){return new Date(p(W))},f.domain=function(W){return arguments.length?y(Array.from(W,bce)):y().map(gce)},f.ticks=function(W){var R=y();return e(R[0],R[R.length-1],W??10)},f.tickFormat=function(W,R){return R==null?q:d(R)},f.nice=function(W){var R=y();return(!W||typeof W.range!="function")&&(W=t(R[0],R[R.length-1],W??10)),W?y(kU(R,W)):f},f.copy=function(){return $b(f,wj(e,t,r,n,a,i,l,o,c,d))},f}function vce(){return vd.apply(wj(moe,xoe,G0,vj,ak,Vb,gj,xj,em,MU).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function yce(){return vd.apply(wj(hoe,foe,X0,yj,sk,nk,bj,pj,em,LU).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function ik(){var e=0,t=1,r,n,a,i,l=jo,o=!1,c;function d(p){return p==null||isNaN(p=+p)?c:l(a===0?.5:(p=(i(p)-r)*a,o?Math.max(0,Math.min(1,p)):p))}d.domain=function(p){return arguments.length?([e,t]=p,r=i(e=+e),n=i(t=+t),a=r===n?0:1/(n-r),d):[e,t]},d.clamp=function(p){return arguments.length?(o=!!p,d):o},d.interpolator=function(p){return arguments.length?(l=p,d):l};function f(p){return function(y){var g,N;return arguments.length?([g,N]=y,l=p(g,N),d):[l(0),l(1)]}}return d.range=f(ap),d.rangeRound=f(ij),d.unknown=function(p){return arguments.length?(c=p,d):c},function(p){return i=p,r=p(e),n=p(t),a=r===n?0:1/(n-r),d}}function gf(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function RU(){var e=pf(ik()(jo));return e.copy=function(){return gf(e,RU())},th.apply(e,arguments)}function FU(){var e=dj(ik()).domain([1,10]);return e.copy=function(){return gf(e,FU()).base(e.base())},th.apply(e,arguments)}function BU(){var e=uj(ik());return e.copy=function(){return gf(e,BU()).constant(e.constant())},th.apply(e,arguments)}function kj(){var e=hj(ik());return e.copy=function(){return gf(e,kj()).exponent(e.exponent())},th.apply(e,arguments)}function wce(){return kj.apply(null,arguments).exponent(.5)}function UU(){var e=[],t=jo;function r(n){if(n!=null&&!isNaN(n=+n))return t((qb(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let a of n)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(rf),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,a)=>t(a/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(a,i)=>ile(e,i/n))},r.copy=function(){return UU(t).domain(e)},th.apply(r,arguments)}function lk(){var e=0,t=.5,r=1,n=1,a,i,l,o,c,d=jo,f,p=!1,y;function g(w){return isNaN(w=+w)?y:(w=.5+((w=+f(w))-i)*(n*w<n*i?o:c),d(p?Math.max(0,Math.min(1,w)):w))}g.domain=function(w){return arguments.length?([e,t,r]=w,a=f(e=+e),i=f(t=+t),l=f(r=+r),o=a===i?0:.5/(i-a),c=i===l?0:.5/(l-i),n=i<a?-1:1,g):[e,t,r]},g.clamp=function(w){return arguments.length?(p=!!w,g):p},g.interpolator=function(w){return arguments.length?(d=w,g):d};function N(w){return function(k){var S,O,E;return arguments.length?([S,O,E]=k,d=Ile(w,[S,O,E]),g):[d(0),d(.5),d(1)]}}return g.range=N(ap),g.rangeRound=N(ij),g.unknown=function(w){return arguments.length?(y=w,g):y},function(w){return f=w,a=w(e),i=w(t),l=w(r),o=a===i?0:.5/(i-a),c=i===l?0:.5/(l-i),n=i<a?-1:1,g}}function zU(){var e=pf(lk()(jo));return e.copy=function(){return gf(e,zU())},th.apply(e,arguments)}function qU(){var e=dj(lk()).domain([.1,1,10]);return e.copy=function(){return gf(e,qU()).base(e.base())},th.apply(e,arguments)}function HU(){var e=uj(lk());return e.copy=function(){return gf(e,HU()).constant(e.constant())},th.apply(e,arguments)}function Nj(){var e=hj(lk());return e.copy=function(){return gf(e,Nj()).exponent(e.exponent())},th.apply(e,arguments)}function kce(){return Nj.apply(null,arguments).exponent(.5)}const bg=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:nj,scaleDiverging:zU,scaleDivergingLog:qU,scaleDivergingPow:Nj,scaleDivergingSqrt:kce,scaleDivergingSymlog:HU,scaleIdentity:wU,scaleImplicit:aS,scaleLinear:yU,scaleLog:NU,scaleOrdinal:rj,scalePoint:cle,scalePow:fj,scaleQuantile:jU,scaleQuantize:CU,scaleRadial:SU,scaleSequential:RU,scaleSequentialLog:FU,scaleSequentialPow:kj,scaleSequentialQuantile:UU,scaleSequentialSqrt:wce,scaleSequentialSymlog:BU,scaleSqrt:roe,scaleSymlog:_U,scaleThreshold:AU,scaleTime:vce,scaleUtc:yce,tickFormat:vU},Symbol.toStringTag,{value:"Module"}));var bf=e=>e.chartData,_j=jt([bf],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),Wb=(e,t,r,n)=>n?_j(e):bf(e);function Lm(e){if(Array.isArray(e)&&e.length===2){var[t,r]=e;if(Bi(t)&&Bi(r))return!0}return!1}function rP(e,t,r){return r?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function $U(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[r,n]=e,a,i;if(Bi(r))a=r;else if(typeof r=="function")return;if(Bi(n))i=n;else if(typeof n=="function")return;var l=[a,i];if(Lm(l))return l}}function Nce(e,t,r){if(!(!r&&t==null)){if(typeof e=="function"&&t!=null)try{var n=e(t,r);if(Lm(n))return rP(n,t,r)}catch{}if(Array.isArray(e)&&e.length===2){var[a,i]=e,l,o;if(a==="auto")t!=null&&(l=Math.min(...t));else if(Zr(a))l=a;else if(typeof a=="function")try{t!=null&&(l=a(t==null?void 0:t[0]))}catch{}else if(typeof a=="string"&&BO.test(a)){var c=BO.exec(a);if(c==null||t==null)l=void 0;else{var d=+c[1];l=t[0]-d}}else l=t==null?void 0:t[0];if(i==="auto")t!=null&&(o=Math.max(...t));else if(Zr(i))o=i;else if(typeof i=="function")try{t!=null&&(o=i(t==null?void 0:t[1]))}catch{}else if(typeof i=="string"&&UO.test(i)){var f=UO.exec(i);if(f==null||t==null)o=void 0;else{var p=+f[1];o=t[1]+p}}else o=t==null?void 0:t[1];var y=[l,o];if(Lm(y))return t==null?y:rP(y,t,r)}}}var sp=1e9,_ce={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},jj,Rs=!0,md="[DecimalError] ",bm=md+"Invalid argument: ",Sj=md+"Exponent out of range: ",ip=Math.floor,Hf=Math.pow,Sce=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Sc,xl=1e7,_s=7,VU=9007199254740991,Ky=ip(VU/_s),Kr={};Kr.absoluteValue=Kr.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Kr.comparedTo=Kr.cmp=function(e){var t,r,n,a,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(n=i.d.length,a=e.d.length,t=0,r=n<a?n:a;t<r;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return n===a?0:n>a^i.s<0?1:-1};Kr.decimalPlaces=Kr.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*_s;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};Kr.dividedBy=Kr.div=function(e){return L0(this,new this.constructor(e))};Kr.dividedToIntegerBy=Kr.idiv=function(e){var t=this,r=t.constructor;return fs(L0(t,new r(e),0,1),r.precision)};Kr.equals=Kr.eq=function(e){return!this.cmp(e)};Kr.exponent=function(){return Fi(this)};Kr.greaterThan=Kr.gt=function(e){return this.cmp(e)>0};Kr.greaterThanOrEqualTo=Kr.gte=function(e){return this.cmp(e)>=0};Kr.isInteger=Kr.isint=function(){return this.e>this.d.length-2};Kr.isNegative=Kr.isneg=function(){return this.s<0};Kr.isPositive=Kr.ispos=function(){return this.s>0};Kr.isZero=function(){return this.s===0};Kr.lessThan=Kr.lt=function(e){return this.cmp(e)<0};Kr.lessThanOrEqualTo=Kr.lte=function(e){return this.cmp(e)<1};Kr.logarithm=Kr.log=function(e){var t,r=this,n=r.constructor,a=n.precision,i=a+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(Sc))throw Error(md+"NaN");if(r.s<1)throw Error(md+(r.s?"NaN":"-Infinity"));return r.eq(Sc)?new n(0):(Rs=!1,t=L0(sb(r,i),sb(e,i),i),Rs=!0,fs(t,a))};Kr.minus=Kr.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?GU(t,e):WU(t,(e.s=-e.s,e))};Kr.modulo=Kr.mod=function(e){var t,r=this,n=r.constructor,a=n.precision;if(e=new n(e),!e.s)throw Error(md+"NaN");return r.s?(Rs=!1,t=L0(r,e,0,1).times(e),Rs=!0,r.minus(t)):fs(new n(r),a)};Kr.naturalExponential=Kr.exp=function(){return KU(this)};Kr.naturalLogarithm=Kr.ln=function(){return sb(this)};Kr.negated=Kr.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Kr.plus=Kr.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?WU(t,e):GU(t,(e.s=-e.s,e))};Kr.precision=Kr.sd=function(e){var t,r,n,a=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(bm+e);if(t=Fi(a)+1,n=a.d.length-1,r=n*_s+1,n=a.d[n],n){for(;n%10==0;n/=10)r--;for(n=a.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};Kr.squareRoot=Kr.sqrt=function(){var e,t,r,n,a,i,l,o=this,c=o.constructor;if(o.s<1){if(!o.s)return new c(0);throw Error(md+"NaN")}for(e=Fi(o),Rs=!1,a=Math.sqrt(+o),a==0||a==1/0?(t=Iu(o.d),(t.length+e)%2==0&&(t+="0"),a=Math.sqrt(t),e=ip((e+1)/2)-(e<0||e%2),a==1/0?t="5e"+e:(t=a.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new c(t)):n=new c(a.toString()),r=c.precision,a=l=r+3;;)if(i=n,n=i.plus(L0(o,i,l+2)).times(.5),Iu(i.d).slice(0,l)===(t=Iu(n.d)).slice(0,l)){if(t=t.slice(l-3,l+1),a==l&&t=="4999"){if(fs(i,r+1,0),i.times(i).eq(o)){n=i;break}}else if(t!="9999")break;l+=4}return Rs=!0,fs(n,r)};Kr.times=Kr.mul=function(e){var t,r,n,a,i,l,o,c,d,f=this,p=f.constructor,y=f.d,g=(e=new p(e)).d;if(!f.s||!e.s)return new p(0);for(e.s*=f.s,r=f.e+e.e,c=y.length,d=g.length,c<d&&(i=y,y=g,g=i,l=c,c=d,d=l),i=[],l=c+d,n=l;n--;)i.push(0);for(n=d;--n>=0;){for(t=0,a=c+n;a>n;)o=i[a]+g[n]*y[a-n-1]+t,i[a--]=o%xl|0,t=o/xl|0;i[a]=(i[a]+t)%xl|0}for(;!i[--l];)i.pop();return t?++r:i.shift(),e.d=i,e.e=r,Rs?fs(e,p.precision):e};Kr.toDecimalPlaces=Kr.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(qu(e,0,sp),t===void 0?t=n.rounding:qu(t,0,8),fs(r,e+Fi(r)+1,t))};Kr.toExponential=function(e,t){var r,n=this,a=n.constructor;return e===void 0?r=Rm(n,!0):(qu(e,0,sp),t===void 0?t=a.rounding:qu(t,0,8),n=fs(new a(n),e+1,t),r=Rm(n,!0,e+1)),r};Kr.toFixed=function(e,t){var r,n,a=this,i=a.constructor;return e===void 0?Rm(a):(qu(e,0,sp),t===void 0?t=i.rounding:qu(t,0,8),n=fs(new i(a),e+Fi(a)+1,t),r=Rm(n.abs(),!1,e+Fi(n)+1),a.isneg()&&!a.isZero()?"-"+r:r)};Kr.toInteger=Kr.toint=function(){var e=this,t=e.constructor;return fs(new t(e),Fi(e)+1,t.rounding)};Kr.toNumber=function(){return+this};Kr.toPower=Kr.pow=function(e){var t,r,n,a,i,l,o=this,c=o.constructor,d=12,f=+(e=new c(e));if(!e.s)return new c(Sc);if(o=new c(o),!o.s){if(e.s<1)throw Error(md+"Infinity");return o}if(o.eq(Sc))return o;if(n=c.precision,e.eq(Sc))return fs(o,n);if(t=e.e,r=e.d.length-1,l=t>=r,i=o.s,l){if((r=f<0?-f:f)<=VU){for(a=new c(Sc),t=Math.ceil(n/_s+4),Rs=!1;r%2&&(a=a.times(o),aP(a.d,t)),r=ip(r/2),r!==0;)o=o.times(o),aP(o.d,t);return Rs=!0,e.s<0?new c(Sc).div(a):fs(a,n)}}else if(i<0)throw Error(md+"NaN");return i=i<0&&e.d[Math.max(t,r)]&1?-1:1,o.s=1,Rs=!1,a=e.times(sb(o,n+d)),Rs=!0,a=KU(a),a.s=i,a};Kr.toPrecision=function(e,t){var r,n,a=this,i=a.constructor;return e===void 0?(r=Fi(a),n=Rm(a,r<=i.toExpNeg||r>=i.toExpPos)):(qu(e,1,sp),t===void 0?t=i.rounding:qu(t,0,8),a=fs(new i(a),e,t),r=Fi(a),n=Rm(a,e<=r||r<=i.toExpNeg,e)),n};Kr.toSignificantDigits=Kr.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(qu(e,1,sp),t===void 0?t=n.rounding:qu(t,0,8)),fs(new n(r),e,t)};Kr.toString=Kr.valueOf=Kr.val=Kr.toJSON=Kr[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Fi(e),r=e.constructor;return Rm(e,t<=r.toExpNeg||t>=r.toExpPos)};function WU(e,t){var r,n,a,i,l,o,c,d,f=e.constructor,p=f.precision;if(!e.s||!t.s)return t.s||(t=new f(e)),Rs?fs(t,p):t;if(c=e.d,d=t.d,l=e.e,a=t.e,c=c.slice(),i=l-a,i){for(i<0?(n=c,i=-i,o=d.length):(n=d,a=l,o=c.length),l=Math.ceil(p/_s),o=l>o?l+1:o+1,i>o&&(i=o,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(o=c.length,i=d.length,o-i<0&&(i=o,n=d,d=c,c=n),r=0;i;)r=(c[--i]=c[i]+d[i]+r)/xl|0,c[i]%=xl;for(r&&(c.unshift(r),++a),o=c.length;c[--o]==0;)c.pop();return t.d=c,t.e=a,Rs?fs(t,p):t}function qu(e,t,r){if(e!==~~e||e<t||e>r)throw Error(bm+e)}function Iu(e){var t,r,n,a=e.length-1,i="",l=e[0];if(a>0){for(i+=l,t=1;t<a;t++)n=e[t]+"",r=_s-n.length,r&&(i+=Rh(r)),i+=n;l=e[t],n=l+"",r=_s-n.length,r&&(i+=Rh(r))}else if(l===0)return"0";for(;l%10===0;)l/=10;return i+l}var L0=(function(){function e(n,a){var i,l=0,o=n.length;for(n=n.slice();o--;)i=n[o]*a+l,n[o]=i%xl|0,l=i/xl|0;return l&&n.unshift(l),n}function t(n,a,i,l){var o,c;if(i!=l)c=i>l?1:-1;else for(o=c=0;o<i;o++)if(n[o]!=a[o]){c=n[o]>a[o]?1:-1;break}return c}function r(n,a,i){for(var l=0;i--;)n[i]-=l,l=n[i]<a[i]?1:0,n[i]=l*xl+n[i]-a[i];for(;!n[0]&&n.length>1;)n.shift()}return function(n,a,i,l){var o,c,d,f,p,y,g,N,w,k,S,O,E,D,q,W,R,U,z=n.constructor,Z=n.s==a.s?1:-1,H=n.d,K=a.d;if(!n.s)return new z(n);if(!a.s)throw Error(md+"Division by zero");for(c=n.e-a.e,R=K.length,q=H.length,g=new z(Z),N=g.d=[],d=0;K[d]==(H[d]||0);)++d;if(K[d]>(H[d]||0)&&--c,i==null?O=i=z.precision:l?O=i+(Fi(n)-Fi(a))+1:O=i,O<0)return new z(0);if(O=O/_s+2|0,d=0,R==1)for(f=0,K=K[0],O++;(d<q||f)&&O--;d++)E=f*xl+(H[d]||0),N[d]=E/K|0,f=E%K|0;else{for(f=xl/(K[0]+1)|0,f>1&&(K=e(K,f),H=e(H,f),R=K.length,q=H.length),D=R,w=H.slice(0,R),k=w.length;k<R;)w[k++]=0;U=K.slice(),U.unshift(0),W=K[0],K[1]>=xl/2&&++W;do f=0,o=t(K,w,R,k),o<0?(S=w[0],R!=k&&(S=S*xl+(w[1]||0)),f=S/W|0,f>1?(f>=xl&&(f=xl-1),p=e(K,f),y=p.length,k=w.length,o=t(p,w,y,k),o==1&&(f--,r(p,R<y?U:K,y))):(f==0&&(o=f=1),p=K.slice()),y=p.length,y<k&&p.unshift(0),r(w,p,k),o==-1&&(k=w.length,o=t(K,w,R,k),o<1&&(f++,r(w,R<k?U:K,k))),k=w.length):o===0&&(f++,w=[0]),N[d++]=f,o&&w[0]?w[k++]=H[D]||0:(w=[H[D]],k=1);while((D++<q||w[0]!==void 0)&&O--)}return N[0]||N.shift(),g.e=c,fs(g,l?i+Fi(g)+1:i)}})();function KU(e,t){var r,n,a,i,l,o,c=0,d=0,f=e.constructor,p=f.precision;if(Fi(e)>16)throw Error(Sj+Fi(e));if(!e.s)return new f(Sc);for(Rs=!1,o=p,l=new f(.03125);e.abs().gte(.1);)e=e.times(l),d+=5;for(n=Math.log(Hf(2,d))/Math.LN10*2+5|0,o+=n,r=a=i=new f(Sc),f.precision=o;;){if(a=fs(a.times(e),o),r=r.times(++c),l=i.plus(L0(a,r,o)),Iu(l.d).slice(0,o)===Iu(i.d).slice(0,o)){for(;d--;)i=fs(i.times(i),o);return f.precision=p,t==null?(Rs=!0,fs(i,p)):i}i=l}}function Fi(e){for(var t=e.e*_s,r=e.d[0];r>=10;r/=10)t++;return t}function B3(e,t,r){if(t>e.LN10.sd())throw Rs=!0,r&&(e.precision=r),Error(md+"LN10 precision limit exceeded");return fs(new e(e.LN10),t)}function Rh(e){for(var t="";e--;)t+="0";return t}function sb(e,t){var r,n,a,i,l,o,c,d,f,p=1,y=10,g=e,N=g.d,w=g.constructor,k=w.precision;if(g.s<1)throw Error(md+(g.s?"NaN":"-Infinity"));if(g.eq(Sc))return new w(0);if(t==null?(Rs=!1,d=k):d=t,g.eq(10))return t==null&&(Rs=!0),B3(w,d);if(d+=y,w.precision=d,r=Iu(N),n=r.charAt(0),i=Fi(g),Math.abs(i)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)g=g.times(e),r=Iu(g.d),n=r.charAt(0),p++;i=Fi(g),n>1?(g=new w("0."+r),i++):g=new w(n+"."+r.slice(1))}else return c=B3(w,d+2,k).times(i+""),g=sb(new w(n+"."+r.slice(1)),d-y).plus(c),w.precision=k,t==null?(Rs=!0,fs(g,k)):g;for(o=l=g=L0(g.minus(Sc),g.plus(Sc),d),f=fs(g.times(g),d),a=3;;){if(l=fs(l.times(f),d),c=o.plus(L0(l,new w(a),d)),Iu(c.d).slice(0,d)===Iu(o.d).slice(0,d))return o=o.times(2),i!==0&&(o=o.plus(B3(w,d+2,k).times(i+""))),o=L0(o,new w(p),d),w.precision=k,t==null?(Rs=!0,fs(o,k)):o;o=c,a+=2}}function nP(e,t){var r,n,a;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(a=t.length;t.charCodeAt(a-1)===48;)--a;if(t=t.slice(n,a),t){if(a-=n,r=r-n-1,e.e=ip(r/_s),e.d=[],n=(r+1)%_s,r<0&&(n+=_s),n<a){for(n&&e.d.push(+t.slice(0,n)),a-=_s;n<a;)e.d.push(+t.slice(n,n+=_s));t=t.slice(n),n=_s-t.length}else n-=a;for(;n--;)t+="0";if(e.d.push(+t),Rs&&(e.e>Ky||e.e<-Ky))throw Error(Sj+r)}else e.s=0,e.e=0,e.d=[0];return e}function fs(e,t,r){var n,a,i,l,o,c,d,f,p=e.d;for(l=1,i=p[0];i>=10;i/=10)l++;if(n=t-l,n<0)n+=_s,a=t,d=p[f=0];else{if(f=Math.ceil((n+1)/_s),i=p.length,f>=i)return e;for(d=i=p[f],l=1;i>=10;i/=10)l++;n%=_s,a=n-_s+l}if(r!==void 0&&(i=Hf(10,l-a-1),o=d/i%10|0,c=t<0||p[f+1]!==void 0||d%i,c=r<4?(o||c)&&(r==0||r==(e.s<0?3:2)):o>5||o==5&&(r==4||c||r==6&&(n>0?a>0?d/Hf(10,l-a):0:p[f-1])%10&1||r==(e.s<0?8:7))),t<1||!p[0])return c?(i=Fi(e),p.length=1,t=t-i-1,p[0]=Hf(10,(_s-t%_s)%_s),e.e=ip(-t/_s)||0):(p.length=1,p[0]=e.e=e.s=0),e;if(n==0?(p.length=f,i=1,f--):(p.length=f+1,i=Hf(10,_s-n),p[f]=a>0?(d/Hf(10,l-a)%Hf(10,a)|0)*i:0),c)for(;;)if(f==0){(p[0]+=i)==xl&&(p[0]=1,++e.e);break}else{if(p[f]+=i,p[f]!=xl)break;p[f--]=0,i=1}for(n=p.length;p[--n]===0;)p.pop();if(Rs&&(e.e>Ky||e.e<-Ky))throw Error(Sj+Fi(e));return e}function GU(e,t){var r,n,a,i,l,o,c,d,f,p,y=e.constructor,g=y.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new y(e),Rs?fs(t,g):t;if(c=e.d,p=t.d,n=t.e,d=e.e,c=c.slice(),l=d-n,l){for(f=l<0,f?(r=c,l=-l,o=p.length):(r=p,n=d,o=c.length),a=Math.max(Math.ceil(g/_s),o)+2,l>a&&(l=a,r.length=1),r.reverse(),a=l;a--;)r.push(0);r.reverse()}else{for(a=c.length,o=p.length,f=a<o,f&&(o=a),a=0;a<o;a++)if(c[a]!=p[a]){f=c[a]<p[a];break}l=0}for(f&&(r=c,c=p,p=r,t.s=-t.s),o=c.length,a=p.length-o;a>0;--a)c[o++]=0;for(a=p.length;a>l;){if(c[--a]<p[a]){for(i=a;i&&c[--i]===0;)c[i]=xl-1;--c[i],c[a]+=xl}c[a]-=p[a]}for(;c[--o]===0;)c.pop();for(;c[0]===0;c.shift())--n;return c[0]?(t.d=c,t.e=n,Rs?fs(t,g):t):new y(0)}function Rm(e,t,r){var n,a=Fi(e),i=Iu(e.d),l=i.length;return t?(r&&(n=r-l)>0?i=i.charAt(0)+"."+i.slice(1)+Rh(n):l>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(a<0?"e":"e+")+a):a<0?(i="0."+Rh(-a-1)+i,r&&(n=r-l)>0&&(i+=Rh(n))):a>=l?(i+=Rh(a+1-l),r&&(n=r-a-1)>0&&(i=i+"."+Rh(n))):((n=a+1)<l&&(i=i.slice(0,n)+"."+i.slice(n)),r&&(n=r-l)>0&&(a+1===l&&(i+="."),i+=Rh(n))),e.s<0?"-"+i:i}function aP(e,t){if(e.length>t)return e.length=t,!0}function XU(e){var t,r,n;function a(i){var l=this;if(!(l instanceof a))return new a(i);if(l.constructor=a,i instanceof a){l.s=i.s,l.e=i.e,l.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(bm+i);if(i>0)l.s=1;else if(i<0)i=-i,l.s=-1;else{l.s=0,l.e=0,l.d=[0];return}if(i===~~i&&i<1e7){l.e=0,l.d=[i];return}return nP(l,i.toString())}else if(typeof i!="string")throw Error(bm+i);if(i.charCodeAt(0)===45?(i=i.slice(1),l.s=-1):l.s=1,Sce.test(i))nP(l,i);else throw Error(bm+i)}if(a.prototype=Kr,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=XU,a.config=a.set=jce,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return a.config(e),a}function jce(e){if(!e||typeof e!="object")throw Error(md+"Object expected");var t,r,n,a=["precision",1,sp,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<a.length;t+=3)if((n=e[r=a[t]])!==void 0)if(ip(n)===n&&n>=a[t+1]&&n<=a[t+2])this[r]=n;else throw Error(bm+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(bm+r+": "+n);return this}var jj=XU(_ce);Sc=new jj(1);const Ka=jj;var Cce=e=>e,YU={},ZU=e=>e===YU,sP=e=>function t(){return arguments.length===0||arguments.length===1&&ZU(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},QU=(e,t)=>e===1?t:sP(function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];var i=n.filter(l=>l!==YU).length;return i>=e?t(...n):QU(e-i,sP(function(){for(var l=arguments.length,o=new Array(l),c=0;c<l;c++)o[c]=arguments[c];var d=n.map(f=>ZU(f)?o.shift():f);return t(...d,...o)}))}),ok=e=>QU(e.length,e),oS=(e,t)=>{for(var r=[],n=e;n<t;++n)r[n-e]=n;return r},Ace=ok((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(r=>t[r]).map(e)),Ece=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return Cce;var a=r.reverse(),i=a[0],l=a.slice(1);return function(){return l.reduce((o,c)=>c(o),i(...arguments))}},cS=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join(""),JU=e=>{var t=null,r=null;return function(){for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return t&&a.every((l,o)=>{var c;return l===((c=t)===null||c===void 0?void 0:c[o])})||(t=a,r=e(...a)),r}};function ez(e){var t;return e===0?t=1:t=Math.floor(new Ka(e).abs().log(10).toNumber())+1,t}function tz(e,t,r){for(var n=new Ka(e),a=0,i=[];n.lt(t)&&a<1e5;)i.push(n.toNumber()),n=n.add(r),a++;return i}ok((e,t,r)=>{var n=+e,a=+t;return n+r*(a-n)});ok((e,t,r)=>{var n=t-+e;return n=n||1/0,(r-e)/n});ok((e,t,r)=>{var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});var rz=e=>{var[t,r]=e,[n,a]=[t,r];return t>r&&([n,a]=[r,t]),[n,a]},nz=(e,t,r)=>{if(e.lte(0))return new Ka(0);var n=ez(e.toNumber()),a=new Ka(10).pow(n),i=e.div(a),l=n!==1?.05:.1,o=new Ka(Math.ceil(i.div(l).toNumber())).add(r).mul(l),c=o.mul(a);return t?new Ka(c.toNumber()):new Ka(Math.ceil(c.toNumber()))},Tce=(e,t,r)=>{var n=new Ka(1),a=new Ka(e);if(!a.isint()&&r){var i=Math.abs(e);i<1?(n=new Ka(10).pow(ez(e)-1),a=new Ka(Math.floor(a.div(n).toNumber())).mul(n)):i>1&&(a=new Ka(Math.floor(e)))}else e===0?a=new Ka(Math.floor((t-1)/2)):r||(a=new Ka(Math.floor(e)));var l=Math.floor((t-1)/2),o=Ece(Ace(c=>a.add(new Ka(c-l).mul(n)).toNumber()),oS);return o(0,t)},az=function(t,r,n,a){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-t)/(n-1)))return{step:new Ka(0),tickMin:new Ka(0),tickMax:new Ka(0)};var l=nz(new Ka(r).sub(t).div(n-1),a,i),o;t<=0&&r>=0?o=new Ka(0):(o=new Ka(t).add(r).div(2),o=o.sub(new Ka(o).mod(l)));var c=Math.ceil(o.sub(t).div(l).toNumber()),d=Math.ceil(new Ka(r).sub(o).div(l).toNumber()),f=c+d+1;return f>n?az(t,r,n,a,i+1):(f<n&&(d=r>0?d+(n-f):d,c=r>0?c:c+(n-f)),{step:l,tickMin:o.sub(new Ka(c).mul(l)),tickMax:o.add(new Ka(d).mul(l))})};function Oce(e){var[t,r]=e,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=Math.max(n,2),[l,o]=rz([t,r]);if(l===-1/0||o===1/0){var c=o===1/0?[l,...oS(0,n-1).map(()=>1/0)]:[...oS(0,n-1).map(()=>-1/0),o];return t>r?cS(c):c}if(l===o)return Tce(l,n,a);var{step:d,tickMin:f,tickMax:p}=az(l,o,i,a,0),y=tz(f,p.add(new Ka(.1).mul(d)),d);return t>r?cS(y):y}function Pce(e,t){var[r,n]=e,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[i,l]=rz([r,n]);if(i===-1/0||l===1/0)return[r,n];if(i===l)return[i];var o=Math.max(t,2),c=nz(new Ka(l).sub(i).div(o-1),a,0),d=[...tz(new Ka(i),new Ka(l),c),l];return a===!1&&(d=d.map(f=>Math.round(f))),r>n?cS(d):d}var Ice=JU(Oce),Dce=JU(Pce),sz=e=>e.rootProps.maxBarSize,Mce=e=>e.rootProps.barGap,iz=e=>e.rootProps.barCategoryGap,Lce=e=>e.rootProps.barSize,Kb=e=>e.rootProps.stackOffset,Cj=e=>e.options.chartName,Aj=e=>e.rootProps.syncId,lz=e=>e.rootProps.syncMethod,Ej=e=>e.options.eventEmitter,S0={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},bc={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},ck=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},Rce={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:S0.angleAxisId,includeHidden:!1,name:void 0,reversed:S0.reversed,scale:S0.scale,tick:S0.tick,tickCount:void 0,ticks:void 0,type:S0.type,unit:void 0},Fce={allowDataOverflow:bc.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:bc.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:bc.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:bc.scale,tick:bc.tick,tickCount:bc.tickCount,ticks:void 0,type:bc.type,unit:void 0},Bce={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:S0.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:S0.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:S0.scale,tick:S0.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},Uce={allowDataOverflow:bc.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:bc.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:bc.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:bc.scale,tick:bc.tick,tickCount:bc.tickCount,ticks:void 0,type:"category",unit:void 0},Tj=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?Bce:Rce,Oj=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?Uce:Fce,dk=e=>e.polarOptions,Pj=jt([Q0,J0,Zi],BB),oz=jt([dk,Pj],(e,t)=>{if(e!=null)return no(e.innerRadius,t,0)}),cz=jt([dk,Pj],(e,t)=>{if(e!=null)return no(e.outerRadius,t,t*.8)}),zce=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:r}=e;return[t,r]},dz=jt([dk],zce);jt([Tj,dz],ck);var uz=jt([Pj,oz,cz],(e,t,r)=>{if(!(e==null||t==null||r==null))return[t,r]});jt([Oj,uz],ck);var hz=jt([fa,dk,oz,cz,Q0,J0],(e,t,r,n,a,i)=>{if(!(e!=="centric"&&e!=="radial"||t==null||r==null||n==null)){var{cx:l,cy:o,startAngle:c,endAngle:d}=t;return{cx:no(l,a,a/2),cy:no(o,i,i/2),innerRadius:r,outerRadius:n,startAngle:c,endAngle:d,clockWise:!1}}}),zs=(e,t)=>t,Gb=(e,t,r)=>r;function uk(e){return e==null?void 0:e.id}var el=e=>{var t=fa(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},lp=e=>e.tooltip.settings.axisId,tl=e=>{var t=el(e),r=lp(e);return Xb(e,t,r)},fz=jt([tl],e=>e==null?void 0:e.dataKey);function mz(e,t,r){var{chartData:n=[]}=t,{allowDuplicatedCategory:a,dataKey:i}=r,l=new Map;return e.forEach(o=>{var c,d=(c=o.data)!==null&&c!==void 0?c:n;if(!(d==null||d.length===0)){var f=uk(o);d.forEach((p,y)=>{var g=i==null||a?y:String(ns(p,i,null)),N=ns(p,o.dataKey,0),w;l.has(g)?w=l.get(g):w={},Object.assign(w,{[f]:N}),l.set(g,w)})}}),Array.from(l.values())}function hk(e){return e.stackId!=null&&e.dataKey!=null}var fk=(e,t)=>e===t?!0:e==null||t==null?!1:e[0]===t[0]&&e[1]===t[1];function mk(e,t){return Array.isArray(e)&&Array.isArray(t)&&e.length===0&&t.length===0?!0:e===t}function iP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Gy(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?iP(Object(r),!0).forEach(function(n){qce(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):iP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function qce(e,t,r){return(t=Hce(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Hce(e){var t=$ce(e,"string");return typeof t=="symbol"?t:t+""}function $ce(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var dS=[0,"auto"],mc={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},xz=(e,t)=>e.cartesianAxis.xAxis[t],rh=(e,t)=>{var r=xz(e,t);return r??mc},xc={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:dS,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Ub},pz=(e,t)=>e.cartesianAxis.yAxis[t],nh=(e,t)=>{var r=pz(e,t);return r??xc},Vce={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},Ij=(e,t)=>{var r=e.cartesianAxis.zAxis[t];return r??Vce},Gs=(e,t,r)=>{switch(t){case"xAxis":return rh(e,r);case"yAxis":return nh(e,r);case"zAxis":return Ij(e,r);case"angleAxis":return Tj(e,r);case"radiusAxis":return Oj(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},Wce=(e,t,r)=>{switch(t){case"xAxis":return rh(e,r);case"yAxis":return nh(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},Xb=(e,t,r)=>{switch(t){case"xAxis":return rh(e,r);case"yAxis":return nh(e,r);case"angleAxis":return Tj(e,r);case"radiusAxis":return Oj(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},gz=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function Dj(e,t){return r=>{switch(e){case"xAxis":return"xAxisId"in r&&r.xAxisId===t;case"yAxis":return"yAxisId"in r&&r.yAxisId===t;case"zAxis":return"zAxisId"in r&&r.zAxisId===t;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===t;default:return!1}}}var Yb=e=>e.graphicalItems.cartesianItems,Kce=jt([zs,Gb],Dj),Mj=(e,t,r)=>e.filter(r).filter(n=>(t==null?void 0:t.includeHidden)===!0?!0:!n.hide),Zb=jt([Yb,Gs,Kce],Mj,{memoizeOptions:{resultEqualityCheck:mk}}),bz=jt([Zb],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(hk)),vz=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),Gce=jt([Zb],vz),Lj=e=>e.map(t=>t.data).filter(Boolean).flat(1),Xce=jt([Zb],Lj,{memoizeOptions:{resultEqualityCheck:mk}}),Rj=(e,t)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:a}=t;return e.length>0?e:r.slice(n,a+1)},Fj=jt([Xce,Wb],Rj),Bj=(e,t,r)=>(t==null?void 0:t.dataKey)!=null?e.map(n=>({value:ns(n,t.dataKey)})):r.length>0?r.map(n=>n.dataKey).flatMap(n=>e.map(a=>({value:ns(a,n)}))):e.map(n=>({value:n})),xk=jt([Fj,Gs,Zb],Bj);function yz(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function ty(e){if(zu(e)||e instanceof Date){var t=Number(e);if(Bi(t))return t}}function lP(e){if(Array.isArray(e)){var t=[ty(e[0]),ty(e[1])];return Lm(t)?t:void 0}var r=ty(e);if(r!=null)return[r,r]}function op(e){return e.map(ty).filter(hie)}function Yce(e,t,r){return!r||typeof t!="number"||Oc(t)?[]:r.length?op(r.flatMap(n=>{var a=ns(e,n.dataKey),i,l;if(Array.isArray(a)?[i,l]=a:i=l=a,!(!Bi(i)||!Bi(l)))return[t-i,t+l]})):[]}var Zce=jt([bz,Wb,tl],mz),wz=(e,t,r)=>{var n={},a=t.reduce((i,l)=>(l.stackId==null||(i[l.stackId]==null&&(i[l.stackId]=[]),i[l.stackId].push(l)),i),n);return Object.fromEntries(Object.entries(a).map(i=>{var[l,o]=i,c=o.map(uk);return[l,{stackedData:Lae(e,c,r),graphicalItems:o}]}))},ib=jt([Zce,bz,Kb],wz),kz=(e,t,r,n)=>{var{dataStartIndex:a,dataEndIndex:i}=t;if(n==null&&r!=="zAxis"){var l=Uae(e,a,i);if(!(l!=null&&l[0]===0&&l[1]===0))return l}},Qce=jt([Gs],e=>e.allowDataOverflow),Uj=e=>{var t;if(e==null||!("domain"in e))return dS;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var r=op(e.ticks);return[Math.min(...r),Math.max(...r)]}if(e.type==="category")return e.ticks.map(String)}return(t=e==null?void 0:e.domain)!==null&&t!==void 0?t:dS},zj=jt([Gs],Uj),qj=jt([zj,Qce],$U),Jce=jt([ib,bf,zs,qj],kz,{memoizeOptions:{resultEqualityCheck:fk}}),pk=e=>e.errorBars,ede=(e,t,r)=>e.flatMap(n=>t[n.id]).filter(Boolean).filter(n=>yz(r,n)),Xy=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var a=r.filter(Boolean);if(a.length!==0){var i=a.flat(),l=Math.min(...i),o=Math.max(...i);return[l,o]}},Hj=(e,t,r,n,a)=>{var i,l;if(r.length>0&&e.forEach(o=>{r.forEach(c=>{var d,f,p=(d=n[c.id])===null||d===void 0?void 0:d.filter(S=>yz(a,S)),y=ns(o,(f=t.dataKey)!==null&&f!==void 0?f:c.dataKey),g=Yce(o,y,p);if(g.length>=2){var N=Math.min(...g),w=Math.max(...g);(i==null||N<i)&&(i=N),(l==null||w>l)&&(l=w)}var k=lP(y);k!=null&&(i=i==null?k[0]:Math.min(i,k[0]),l=l==null?k[1]:Math.max(l,k[1]))})}),(t==null?void 0:t.dataKey)!=null&&e.forEach(o=>{var c=lP(ns(o,t.dataKey));c!=null&&(i=i==null?c[0]:Math.min(i,c[0]),l=l==null?c[1]:Math.max(l,c[1]))}),Bi(i)&&Bi(l))return[i,l]},tde=jt([Fj,Gs,Gce,pk,zs],Hj,{memoizeOptions:{resultEqualityCheck:fk}});function rde(e){var{value:t}=e;if(zu(t)||t instanceof Date)return t}var nde=(e,t,r)=>{var n=e.map(rde).filter(a=>a!=null);return r&&(t.dataKey==null||t.allowDuplicatedCategory&&XF(n))?cU(0,e.length):t.allowDuplicatedCategory?n:Array.from(new Set(n))},Nz=e=>e.referenceElements.dots,cp=(e,t,r)=>e.filter(n=>n.ifOverflow==="extendDomain").filter(n=>t==="xAxis"?n.xAxisId===r:n.yAxisId===r),ade=jt([Nz,zs,Gb],cp),_z=e=>e.referenceElements.areas,sde=jt([_z,zs,Gb],cp),Sz=e=>e.referenceElements.lines,ide=jt([Sz,zs,Gb],cp),jz=(e,t)=>{var r=op(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},lde=jt(ade,zs,jz),Cz=(e,t)=>{var r=op(e.flatMap(n=>[t==="xAxis"?n.x1:n.y1,t==="xAxis"?n.x2:n.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},ode=jt([sde,zs],Cz),Az=(e,t)=>{var r=op(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},cde=jt(ide,zs,Az),dde=jt(lde,cde,ode,(e,t,r)=>Xy(e,r,t)),$j=(e,t,r,n,a,i,l,o)=>{if(r!=null)return r;var c=l==="vertical"&&o==="xAxis"||l==="horizontal"&&o==="yAxis",d=c?Xy(n,i,a):Xy(i,a);return Nce(t,d,e.allowDataOverflow)},ude=jt([Gs,zj,qj,Jce,tde,dde,fa,zs],$j,{memoizeOptions:{resultEqualityCheck:fk}}),hde=[0,1],Vj=(e,t,r,n,a,i,l)=>{if(!((e==null||r==null||r.length===0)&&l===void 0)){var{dataKey:o,type:c}=e,d=Wu(t,i);return d&&o==null?cU(0,r.length):c==="category"?nde(n,e,d):a==="expand"?hde:l}},Wj=jt([Gs,fa,Fj,xk,Kb,zs,ude],Vj),Ez=(e,t,r,n,a)=>{if(e!=null){var{scale:i,type:l}=e;if(i==="auto")return t==="radial"&&a==="radiusAxis"?"band":t==="radial"&&a==="angleAxis"?"linear":l==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?"point":l==="category"?"band":"linear";if(typeof i=="string"){var o="scale".concat(Lb(i));return o in bg?o:"point"}}},dp=jt([Gs,fa,gz,Cj,zs],Ez);function fde(e){if(e!=null){if(e in bg)return bg[e]();var t="scale".concat(Lb(e));if(t in bg)return bg[t]()}}function Kj(e,t,r,n){if(!(r==null||n==null)){if(typeof e.scale=="function")return e.scale.copy().domain(r).range(n);var a=fde(t);if(a!=null){var i=a.domain(r).range(n);return Oae(i),i}}}var Gj=(e,t,r)=>{var n=Uj(t);if(!(r!=="auto"&&r!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&Lm(e))return Ice(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&Lm(e))return Dce(e,t.tickCount,t.allowDecimals)}},Xj=jt([Wj,Xb,dp],Gj),Yj=(e,t,r,n)=>{if(n!=="angleAxis"&&(e==null?void 0:e.type)==="number"&&Lm(t)&&Array.isArray(r)&&r.length>0){var a=t[0],i=r[0],l=t[1],o=r[r.length-1];return[Math.min(a,i),Math.max(l,o)]}return t},mde=jt([Gs,Wj,Xj,zs],Yj),xde=jt(xk,Gs,(e,t)=>{if(!(!t||t.type!=="number")){var r=1/0,n=Array.from(op(e.map(o=>o.value))).sort((o,c)=>o-c);if(n.length<2)return 1/0;var a=n[n.length-1]-n[0];if(a===0)return 1/0;for(var i=0;i<n.length-1;i++){var l=n[i+1]-n[i];r=Math.min(r,l)}return r/a}}),Tz=jt(xde,fa,iz,Zi,(e,t,r,n)=>n,(e,t,r,n,a)=>{if(!Bi(e))return 0;var i=t==="vertical"?n.height:n.width;if(a==="gap")return e*i/2;if(a==="no-gap"){var l=no(r,e*i),o=e*i/2;return o-l-(o-l)/i*l}return 0}),pde=(e,t)=>{var r=rh(e,t);return r==null||typeof r.padding!="string"?0:Tz(e,"xAxis",t,r.padding)},gde=(e,t)=>{var r=nh(e,t);return r==null||typeof r.padding!="string"?0:Tz(e,"yAxis",t,r.padding)},bde=jt(rh,pde,(e,t)=>{var r,n;if(e==null)return{left:0,right:0};var{padding:a}=e;return typeof a=="string"?{left:t,right:t}:{left:((r=a.left)!==null&&r!==void 0?r:0)+t,right:((n=a.right)!==null&&n!==void 0?n:0)+t}}),vde=jt(nh,gde,(e,t)=>{var r,n;if(e==null)return{top:0,bottom:0};var{padding:a}=e;return typeof a=="string"?{top:t,bottom:t}:{top:((r=a.top)!==null&&r!==void 0?r:0)+t,bottom:((n=a.bottom)!==null&&n!==void 0?n:0)+t}}),yde=jt([Zi,bde,Jw,Qw,(e,t,r)=>r],(e,t,r,n,a)=>{var{padding:i}=n;return a?[i.left,r.width-i.right]:[e.left+t.left,e.left+e.width-t.right]}),wde=jt([Zi,fa,vde,Jw,Qw,(e,t,r)=>r],(e,t,r,n,a,i)=>{var{padding:l}=a;return i?[n.height-l.bottom,l.top]:t==="horizontal"?[e.top+e.height-r.bottom,e.top+r.top]:[e.top+r.top,e.top+e.height-r.bottom]}),Qb=(e,t,r,n)=>{var a;switch(t){case"xAxis":return yde(e,r,n);case"yAxis":return wde(e,r,n);case"zAxis":return(a=Ij(e,r))===null||a===void 0?void 0:a.range;case"angleAxis":return dz(e);case"radiusAxis":return uz(e,r);default:return}},Oz=jt([Gs,Qb],ck),up=jt([Gs,dp,mde,Oz],Kj);jt([Zb,pk,zs],ede);function Pz(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var gk=(e,t)=>t,bk=(e,t,r)=>r,kde=jt(Yw,gk,bk,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(Pz)),Nde=jt(Zw,gk,bk,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(Pz)),Iz=(e,t)=>({width:e.width,height:t.height}),_de=(e,t)=>{var r=typeof t.width=="number"?t.width:Ub;return{width:r,height:e.height}},Dz=jt(Zi,rh,Iz),Sde=(e,t,r)=>{switch(t){case"top":return e.top;case"bottom":return r-e.bottom;default:return 0}},jde=(e,t,r)=>{switch(t){case"left":return e.left;case"right":return r-e.right;default:return 0}},Cde=jt(J0,Zi,kde,gk,bk,(e,t,r,n,a)=>{var i={},l;return r.forEach(o=>{var c=Iz(t,o);l==null&&(l=Sde(t,n,e));var d=n==="top"&&!a||n==="bottom"&&a;i[o.id]=l-Number(d)*c.height,l+=(d?-1:1)*c.height}),i}),Ade=jt(Q0,Zi,Nde,gk,bk,(e,t,r,n,a)=>{var i={},l;return r.forEach(o=>{var c=_de(t,o);l==null&&(l=jde(t,n,e));var d=n==="left"&&!a||n==="right"&&a;i[o.id]=l-Number(d)*c.width,l+=(d?-1:1)*c.width}),i}),Ede=(e,t)=>{var r=rh(e,t);if(r!=null)return Cde(e,r.orientation,r.mirror)},Tde=jt([Zi,rh,Ede,(e,t)=>t],(e,t,r,n)=>{if(t!=null){var a=r==null?void 0:r[n];return a==null?{x:e.left,y:0}:{x:e.left,y:a}}}),Ode=(e,t)=>{var r=nh(e,t);if(r!=null)return Ade(e,r.orientation,r.mirror)},Pde=jt([Zi,nh,Ode,(e,t)=>t],(e,t,r,n)=>{if(t!=null){var a=r==null?void 0:r[n];return a==null?{x:0,y:e.top}:{x:a,y:e.top}}}),Mz=jt(Zi,nh,(e,t)=>{var r=typeof t.width=="number"?t.width:Ub;return{width:r,height:e.height}}),oP=(e,t,r)=>{switch(t){case"xAxis":return Dz(e,r).width;case"yAxis":return Mz(e,r).height;default:return}},Lz=(e,t,r,n)=>{if(r!=null){var{allowDuplicatedCategory:a,type:i,dataKey:l}=r,o=Wu(e,n),c=t.map(d=>d.value);if(l&&o&&i==="category"&&a&&XF(c))return c}},Zj=jt([fa,xk,Gs,zs],Lz),Rz=(e,t,r,n)=>{if(!(r==null||r.dataKey==null)){var{type:a,scale:i}=r,l=Wu(e,n);if(l&&(a==="number"||i!=="auto"))return t.map(o=>o.value)}},Qj=jt([fa,xk,Xb,zs],Rz),cP=jt([fa,Wce,dp,up,Zj,Qj,Qb,Xj,zs],(e,t,r,n,a,i,l,o,c)=>{if(t==null)return null;var d=Wu(e,c);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:c,categoricalDomain:i,duplicateDomain:a,isCategorical:d,niceTicks:o,range:l,realScaleType:r,scale:n}}),Ide=(e,t,r,n,a,i,l,o,c)=>{if(!(t==null||n==null)){var d=Wu(e,c),{type:f,ticks:p,tickCount:y}=t,g=r==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,N=f==="category"&&n.bandwidth?n.bandwidth()/g:0;N=c==="angleAxis"&&i!=null&&i.length>=2?vl(i[0]-i[1])*2*N:N;var w=p||a;if(w){var k=w.map((S,O)=>{var E=l?l.indexOf(S):S;return{index:O,coordinate:n(E)+N,value:S,offset:N}});return k.filter(S=>!Oc(S.coordinate))}return d&&o?o.map((S,O)=>({coordinate:n(S)+N,value:S,index:O,offset:N})):n.ticks?n.ticks(y).map(S=>({coordinate:n(S)+N,value:S,offset:N})):n.domain().map((S,O)=>({coordinate:n(S)+N,value:l?l[S]:S,index:O,offset:N}))}},Fz=jt([fa,Xb,dp,up,Xj,Qb,Zj,Qj,zs],Ide),Dde=(e,t,r,n,a,i,l)=>{if(!(t==null||r==null||n==null||n[0]===n[1])){var o=Wu(e,l),{tickCount:c}=t,d=0;return d=l==="angleAxis"&&(n==null?void 0:n.length)>=2?vl(n[0]-n[1])*2*d:d,o&&i?i.map((f,p)=>({coordinate:r(f)+d,value:f,index:p,offset:d})):r.ticks?r.ticks(c).map(f=>({coordinate:r(f)+d,value:f,offset:d})):r.domain().map((f,p)=>({coordinate:r(f)+d,value:a?a[f]:f,index:p,offset:d}))}},Hu=jt([fa,Xb,up,Qb,Zj,Qj,zs],Dde),$u=jt(Gs,up,(e,t)=>{if(!(e==null||t==null))return Gy(Gy({},e),{},{scale:t})}),Mde=jt([Gs,dp,Wj,Oz],Kj);jt((e,t,r)=>Ij(e,r),Mde,(e,t)=>{if(!(e==null||t==null))return Gy(Gy({},e),{},{scale:t})});var Lde=jt([fa,Yw,Zw],(e,t,r)=>{switch(e){case"horizontal":return t.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),Bz=e=>e.options.defaultTooltipEventType,Uz=e=>e.options.validateTooltipEventTypes;function zz(e,t,r){if(e==null)return t;var n=e?"axis":"item";return r==null?t:r.includes(n)?n:t}function Jj(e,t){var r=Bz(e),n=Uz(e);return zz(t,r,n)}function Rde(e){return Jr(t=>Jj(t,e))}var qz=(e,t)=>{var r,n=Number(t);if(!(Oc(n)||t==null))return n>=0?e==null||(r=e[n])===null||r===void 0?void 0:r.value:void 0},Fde=e=>e.tooltip.settings,Uh={active:!1,index:null,dataKey:void 0,coordinate:void 0},Bde={itemInteraction:{click:Uh,hover:Uh},axisInteraction:{click:Uh,hover:Uh},keyboardInteraction:Uh,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},Hz=Mc({name:"tooltip",initialState:Bde,reducers:{addTooltipEntrySettings:{reducer(e,t){e.tooltipItemPayloads.push(t.payload)},prepare:No()},removeTooltipEntrySettings:{reducer(e,t){var r=M0(e).tooltipItemPayloads.indexOf(t.payload);r>-1&&e.tooltipItemPayloads.splice(r,1)},prepare:No()},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:Ude,removeTooltipEntrySettings:zde,setTooltipSettingsState:qde,setActiveMouseOverItemIndex:$z,mouseLeaveItem:Hde,mouseLeaveChart:Vz,setActiveClickItemIndex:$de,setMouseOverAxisIndex:Wz,setMouseClickAxisIndex:Vde,setSyncInteraction:uS,setKeyboardInteraction:hS}=Hz.actions,Wde=Hz.reducer;function dP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function C2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?dP(Object(r),!0).forEach(function(n){Kde(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Kde(e,t,r){return(t=Gde(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Gde(e){var t=Xde(e,"string");return typeof t=="symbol"?t:t+""}function Xde(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Yde(e,t,r){return t==="axis"?r==="click"?e.axisInteraction.click:e.axisInteraction.hover:r==="click"?e.itemInteraction.click:e.itemInteraction.hover}function Zde(e){return e.index!=null}var Kz=(e,t,r,n)=>{if(t==null)return Uh;var a=Yde(e,t,r);if(a==null)return Uh;if(a.active)return a;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var i=e.settings.active===!0;if(Zde(a)){if(i)return C2(C2({},a),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n};return C2(C2({},Uh),{},{coordinate:a.coordinate})},eC=(e,t)=>{var r=e==null?void 0:e.index;if(r==null)return null;var n=Number(r);if(!Bi(n))return r;var a=0,i=1/0;return t.length>0&&(i=t.length-1),String(Math.max(a,Math.min(n,i)))},Gz=(e,t,r,n,a,i,l,o)=>{if(!(i==null||o==null)){var c=l[0],d=c==null?void 0:o(c.positions,i);if(d!=null)return d;var f=a==null?void 0:a[Number(i)];if(f)switch(r){case"horizontal":return{x:f.coordinate,y:(n.top+t)/2};default:return{x:(n.left+e)/2,y:f.coordinate}}}},Xz=(e,t,r,n)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var a;return r==="hover"?a=e.itemInteraction.hover.dataKey:a=e.itemInteraction.click.dataKey,a==null&&n!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(i=>{var l;return((l=i.settings)===null||l===void 0?void 0:l.dataKey)===a})},Jb=e=>e.options.tooltipPayloadSearcher,hp=e=>e.tooltip;function uP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function hP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?uP(Object(r),!0).forEach(function(n){Qde(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Qde(e,t,r){return(t=Jde(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Jde(e){var t=eue(e,"string");return typeof t=="symbol"?t:t+""}function eue(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function tue(e,t){return e??t}var Yz=(e,t,r,n,a,i,l)=>{if(!(t==null||i==null)){var{chartData:o,computedData:c,dataStartIndex:d,dataEndIndex:f}=r,p=[];return e.reduce((y,g)=>{var N,{dataDefinedOnItem:w,settings:k}=g,S=tue(w,o),O=Array.isArray(S)?UB(S,d,f):S,E=(N=k==null?void 0:k.dataKey)!==null&&N!==void 0?N:n,D=k==null?void 0:k.nameKey,q;if(n&&Array.isArray(O)&&!Array.isArray(O[0])&&l==="axis"?q=YF(O,n,a):q=i(O,t,c,D),Array.isArray(q))q.forEach(R=>{var U=hP(hP({},k),{},{name:R.name,unit:R.unit,color:void 0,fill:void 0});y.push(zO({tooltipEntrySettings:U,dataKey:R.dataKey,payload:R.payload,value:ns(R.payload,R.dataKey),name:R.name}))});else{var W;y.push(zO({tooltipEntrySettings:k,dataKey:E,payload:q,value:ns(q,E),name:(W=ns(q,D))!==null&&W!==void 0?W:k==null?void 0:k.name}))}return y},p)}},tC=jt([tl,fa,gz,Cj,el],Ez),rue=jt([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),nue=jt([el,lp],Dj),ev=jt([rue,tl,nue],Mj,{memoizeOptions:{resultEqualityCheck:mk}}),aue=jt([ev],e=>e.filter(hk)),sue=jt([ev],Lj,{memoizeOptions:{resultEqualityCheck:mk}}),fp=jt([sue,bf],Rj),iue=jt([aue,bf,tl],mz),rC=jt([fp,tl,ev],Bj),Zz=jt([tl],Uj),lue=jt([tl],e=>e.allowDataOverflow),Qz=jt([Zz,lue],$U),oue=jt([ev],e=>e.filter(hk)),cue=jt([iue,oue,Kb],wz),due=jt([cue,bf,el,Qz],kz),uue=jt([ev],vz),hue=jt([fp,tl,uue,pk,el],Hj,{memoizeOptions:{resultEqualityCheck:fk}}),fue=jt([Nz,el,lp],cp),mue=jt([fue,el],jz),xue=jt([_z,el,lp],cp),pue=jt([xue,el],Cz),gue=jt([Sz,el,lp],cp),bue=jt([gue,el],Az),vue=jt([mue,bue,pue],Xy),yue=jt([tl,Zz,Qz,due,hue,vue,fa,el],$j),Jz=jt([tl,fa,fp,rC,Kb,el,yue],Vj),wue=jt([Jz,tl,tC],Gj),kue=jt([tl,Jz,wue,el],Yj),eq=e=>{var t=el(e),r=lp(e),n=!1;return Qb(e,t,r,n)},tq=jt([tl,eq],ck),rq=jt([tl,tC,kue,tq],Kj),Nue=jt([fa,rC,tl,el],Lz),_ue=jt([fa,rC,tl,el],Rz),Sue=(e,t,r,n,a,i,l,o)=>{if(t){var{type:c}=t,d=Wu(e,o);if(n){var f=r==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,p=c==="category"&&n.bandwidth?n.bandwidth()/f:0;return p=o==="angleAxis"&&a!=null&&(a==null?void 0:a.length)>=2?vl(a[0]-a[1])*2*p:p,d&&l?l.map((y,g)=>({coordinate:n(y)+p,value:y,index:g,offset:p})):n.domain().map((y,g)=>({coordinate:n(y)+p,value:i?i[y]:y,index:g,offset:p}))}}},ah=jt([fa,tl,tC,rq,eq,Nue,_ue,el],Sue),nC=jt([Bz,Uz,Fde],(e,t,r)=>zz(r.shared,e,t)),nq=e=>e.tooltip.settings.trigger,aC=e=>e.tooltip.settings.defaultIndex,vk=jt([hp,nC,nq,aC],Kz),af=jt([vk,fp],eC),aq=jt([ah,af],qz),sq=jt([vk],e=>{if(e)return e.dataKey}),iq=jt([hp,nC,nq,aC],Xz),jue=jt([Q0,J0,fa,Zi,ah,aC,iq,Jb],Gz),Cue=jt([vk,jue],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),Aue=jt([vk],e=>e.active),Eue=jt([iq,af,bf,fz,aq,Jb,nC],Yz),Tue=jt([Eue],e=>{if(e!=null){var t=e.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(t))}});function fP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function mP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?fP(Object(r),!0).forEach(function(n){Oue(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Oue(e,t,r){return(t=Pue(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Pue(e){var t=Iue(e,"string");return typeof t=="symbol"?t:t+""}function Iue(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Due=()=>Jr(tl),Mue=()=>{var e=Due(),t=Jr(ah),r=Jr(rq);return Dm(mP(mP({},e),{},{scale:r}),t)},lq=()=>Jr(Cj),sC=(e,t)=>t,oq=(e,t,r)=>r,iC=(e,t,r,n)=>n,Lue=jt(ah,e=>$w(e,t=>t.coordinate)),lC=jt([hp,sC,oq,iC],Kz),cq=jt([lC,fp],eC),Rue=(e,t,r)=>{if(t!=null){var n=hp(e);return t==="axis"?r==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:r==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},dq=jt([hp,sC,oq,iC],Xz),Yy=jt([Q0,J0,fa,Zi,ah,iC,dq,Jb],Gz),Fue=jt([lC,Yy],(e,t)=>{var r;return(r=e.coordinate)!==null&&r!==void 0?r:t}),uq=jt(ah,cq,qz),Bue=jt([dq,cq,bf,fz,uq,Jb,sC],Yz),Uue=jt([lC],e=>({isActive:e.active,activeIndex:e.index})),zue=(e,t,r,n,a,i,l,o)=>{if(!(!e||!t||!n||!a||!i)){var c=zae(e.chartX,e.chartY,t,r,o);if(c){var d=Hae(c,t),f=Eae(d,l,i,n,a),p=qae(t,i,f,c);return{activeIndex:String(f),activeCoordinate:p}}}};function fS(){return fS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},fS.apply(null,arguments)}function xP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function A2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xP(Object(r),!0).forEach(function(n){que(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function que(e,t,r){return(t=Hue(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Hue(e){var t=$ue(e,"string");return typeof t=="symbol"?t:t+""}function $ue(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Vue(e){var{coordinate:t,payload:r,index:n,offset:a,tooltipAxisBandSize:i,layout:l,cursor:o,tooltipEventType:c,chartName:d}=e,f=t,p=r,y=n;if(!o||!f||d!=="ScatterChart"&&c!=="axis")return null;var g,N;if(d==="ScatterChart")g=f,N=sie;else if(d==="BarChart")g=iie(l,f,a,i),N=sU;else if(l==="radial"){var{cx:w,cy:k,radius:S,startAngle:O,endAngle:E}=iU(f);g={cx:w,cy:k,startAngle:O,endAngle:E,innerRadius:S,outerRadius:S},N=oU}else g={points:Hie(l,f,a)},N=m1;var D=typeof o=="object"&&"className"in o?o.className:void 0,q=A2(A2(A2(A2({stroke:"#ccc",pointerEvents:"none"},a),g),Tm(o)),{},{payload:p,payloadIndex:y,className:Zn("recharts-tooltip-cursor",D)});return T.isValidElement(o)?T.cloneElement(o,q):T.createElement(N,q)}function Wue(e){var t=Mue(),r=YB(),n=zb(),a=lq();return T.createElement(Vue,fS({},e,{coordinate:e.coordinate,index:e.index,payload:e.payload,offset:r,layout:n,tooltipAxisBandSize:t,chartName:a}))}var hq=T.createContext(null),Kue=()=>T.useContext(hq),U3={exports:{}},pP;function Gue(){return pP||(pP=1,(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function a(c,d,f){this.fn=c,this.context=d,this.once=f||!1}function i(c,d,f,p,y){if(typeof f!="function")throw new TypeError("The listener must be a function");var g=new a(f,p||c,y),N=r?r+d:d;return c._events[N]?c._events[N].fn?c._events[N]=[c._events[N],g]:c._events[N].push(g):(c._events[N]=g,c._eventsCount++),c}function l(c,d){--c._eventsCount===0?c._events=new n:delete c._events[d]}function o(){this._events=new n,this._eventsCount=0}o.prototype.eventNames=function(){var d=[],f,p;if(this._eventsCount===0)return d;for(p in f=this._events)t.call(f,p)&&d.push(r?p.slice(1):p);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(f)):d},o.prototype.listeners=function(d){var f=r?r+d:d,p=this._events[f];if(!p)return[];if(p.fn)return[p.fn];for(var y=0,g=p.length,N=new Array(g);y<g;y++)N[y]=p[y].fn;return N},o.prototype.listenerCount=function(d){var f=r?r+d:d,p=this._events[f];return p?p.fn?1:p.length:0},o.prototype.emit=function(d,f,p,y,g,N){var w=r?r+d:d;if(!this._events[w])return!1;var k=this._events[w],S=arguments.length,O,E;if(k.fn){switch(k.once&&this.removeListener(d,k.fn,void 0,!0),S){case 1:return k.fn.call(k.context),!0;case 2:return k.fn.call(k.context,f),!0;case 3:return k.fn.call(k.context,f,p),!0;case 4:return k.fn.call(k.context,f,p,y),!0;case 5:return k.fn.call(k.context,f,p,y,g),!0;case 6:return k.fn.call(k.context,f,p,y,g,N),!0}for(E=1,O=new Array(S-1);E<S;E++)O[E-1]=arguments[E];k.fn.apply(k.context,O)}else{var D=k.length,q;for(E=0;E<D;E++)switch(k[E].once&&this.removeListener(d,k[E].fn,void 0,!0),S){case 1:k[E].fn.call(k[E].context);break;case 2:k[E].fn.call(k[E].context,f);break;case 3:k[E].fn.call(k[E].context,f,p);break;case 4:k[E].fn.call(k[E].context,f,p,y);break;default:if(!O)for(q=1,O=new Array(S-1);q<S;q++)O[q-1]=arguments[q];k[E].fn.apply(k[E].context,O)}}return!0},o.prototype.on=function(d,f,p){return i(this,d,f,p,!1)},o.prototype.once=function(d,f,p){return i(this,d,f,p,!0)},o.prototype.removeListener=function(d,f,p,y){var g=r?r+d:d;if(!this._events[g])return this;if(!f)return l(this,g),this;var N=this._events[g];if(N.fn)N.fn===f&&(!y||N.once)&&(!p||N.context===p)&&l(this,g);else{for(var w=0,k=[],S=N.length;w<S;w++)(N[w].fn!==f||y&&!N[w].once||p&&N[w].context!==p)&&k.push(N[w]);k.length?this._events[g]=k.length===1?k[0]:k:l(this,g)}return this},o.prototype.removeAllListeners=function(d){var f;return d?(f=r?r+d:d,this._events[f]&&l(this,f)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=r,o.EventEmitter=o,e.exports=o})(U3)),U3.exports}var Xue=Gue();const Yue=gd(Xue);var lb=new Yue,mS="recharts.syncEvent.tooltip",gP="recharts.syncEvent.brush";function tv(e,t){if(t){var r=Number.parseInt(t,10);if(!Oc(r))return e==null?void 0:e[r]}}var Zue={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},fq=Mc({name:"options",initialState:Zue,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),Que=fq.reducer,{createEventEmitter:Jue}=fq.actions;function e0e(e){return e.tooltip.syncInteraction}var t0e={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},mq=Mc({name:"chartData",initialState:t0e,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:r,endIndex:n}=t.payload;r!=null&&(e.dataStartIndex=r),n!=null&&(e.dataEndIndex=n)}}}),{setChartData:bP,setDataStartEndIndexes:r0e,setComputedData:OTe}=mq.actions,n0e=mq.reducer,a0e=["x","y"];function vP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Kx(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?vP(Object(r),!0).forEach(function(n){s0e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function s0e(e,t,r){return(t=i0e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i0e(e){var t=l0e(e,"string");return typeof t=="symbol"?t:t+""}function l0e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function o0e(e,t){if(e==null)return{};var r,n,a=c0e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function c0e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var xq=()=>{};function d0e(){var e=Jr(Aj),t=Jr(Ej),r=Us(),n=Jr(lz),a=Jr(ah),i=zb(),l=ek(),o=Jr(c=>c.rootProps.className);T.useEffect(()=>{if(e==null)return xq;var c=(d,f,p)=>{if(t!==p&&e===d){if(n==="index"){var y;if(l&&f!==null&&f!==void 0&&(y=f.payload)!==null&&y!==void 0&&y.coordinate&&f.payload.sourceViewBox){var g=f.payload.coordinate,{x:N,y:w}=g,k=o0e(g,a0e),{x:S,y:O,width:E,height:D}=f.payload.sourceViewBox,q=Kx(Kx({},k),{},{x:l.x+(E?(N-S)/E:0)*l.width,y:l.y+(D?(w-O)/D:0)*l.height});r(Kx(Kx({},f),{},{payload:Kx(Kx({},f.payload),{},{coordinate:q})}))}else r(f);return}if(a!=null){var W;if(typeof n=="function"){var R={activeTooltipIndex:f.payload.index==null?void 0:Number(f.payload.index),isTooltipActive:f.payload.active,activeIndex:f.payload.index==null?void 0:Number(f.payload.index),activeLabel:f.payload.label,activeDataKey:f.payload.dataKey,activeCoordinate:f.payload.coordinate},U=n(a,R);W=a[U]}else n==="value"&&(W=a.find(ue=>String(ue.value)===f.payload.label));var{coordinate:z}=f.payload;if(W==null||f.payload.active===!1||z==null||l==null){r(uS({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0}));return}var{x:Z,y:H}=z,K=Math.min(Z,l.x+l.width),J=Math.min(H,l.y+l.height),ae={x:i==="horizontal"?W.coordinate:K,y:i==="horizontal"?J:W.coordinate},se=uS({active:f.payload.active,coordinate:ae,dataKey:f.payload.dataKey,index:String(W.index),label:f.payload.label,sourceViewBox:f.payload.sourceViewBox});r(se)}}};return lb.on(mS,c),()=>{lb.off(mS,c)}},[o,r,t,e,n,a,i,l])}function u0e(){var e=Jr(Aj),t=Jr(Ej),r=Us();T.useEffect(()=>{if(e==null)return xq;var n=(a,i,l)=>{t!==l&&e===a&&r(r0e(i))};return lb.on(gP,n),()=>{lb.off(gP,n)}},[r,t,e])}function h0e(){var e=Us();T.useEffect(()=>{e(Jue())},[e]),d0e(),u0e()}function f0e(e,t,r,n,a,i){var l=Jr(g=>Rue(g,e,t)),o=Jr(Ej),c=Jr(Aj),d=Jr(lz),f=Jr(e0e),p=f==null?void 0:f.active,y=ek();T.useEffect(()=>{if(!p&&c!=null&&o!=null){var g=uS({active:i,coordinate:r,dataKey:l,index:a,label:typeof n=="number"?String(n):n,sourceViewBox:y});lb.emit(mS,c,g,o)}},[p,r,l,a,n,o,c,d,i,y])}function yP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function wP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?yP(Object(r),!0).forEach(function(n){m0e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function m0e(e,t,r){return(t=x0e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function x0e(e){var t=p0e(e,"string");return typeof t=="symbol"?t:t+""}function p0e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function g0e(e){return e.dataKey}function b0e(e,t){return T.isValidElement(e)?T.cloneElement(e,t):typeof e=="function"?T.createElement(e,t):T.createElement(Rse,t)}var kP=[],v0e={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!eh.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function Xd(e){var t=Qi(e,v0e),{active:r,allowEscapeViewBox:n,animationDuration:a,animationEasing:i,content:l,filterNull:o,isAnimationActive:c,offset:d,payloadUniqBy:f,position:p,reverseDirection:y,useTranslate3d:g,wrapperStyle:N,cursor:w,shared:k,trigger:S,defaultIndex:O,portal:E,axisId:D}=t,q=Us(),W=typeof O=="number"?String(O):O;T.useEffect(()=>{q(qde({shared:k,trigger:S,axisId:D,active:r,defaultIndex:W}))},[q,k,S,D,r,W]);var R=ek(),U=eU(),z=Rde(k),{activeIndex:Z,isActive:H}=Jr(re=>Uue(re,z,S,W)),K=Jr(re=>Bue(re,z,S,W)),J=Jr(re=>uq(re,z,S,W)),ae=Jr(re=>Fue(re,z,S,W)),se=K,ue=Kue(),fe=r??H,[ke,_e]=hB([se,fe]),Le=z==="axis"?J:void 0;f0e(z,S,ae,Le,Z,fe);var xe=E??ue;if(xe==null)return null;var B=se??kP;fe||(B=kP),o&&B.length&&(B=lB(se.filter(re=>re.value!=null&&(re.hide!==!0||t.includeHidden)),f,g0e));var ee=B.length>0,Y=T.createElement($se,{allowEscapeViewBox:n,animationDuration:a,animationEasing:i,isAnimationActive:c,active:fe,coordinate:ae,hasPayload:ee,offset:d,position:p,reverseDirection:y,useTranslate3d:g,viewBox:R,wrapperStyle:N,lastBoundingBox:ke,innerRef:_e,hasPortalFromProps:!!E},b0e(l,wP(wP({},t),{},{payload:B,label:Le,active:fe,coordinate:ae,accessibilityLayer:U})));return T.createElement(T.Fragment,null,GL.createPortal(Y,xe),fe&&T.createElement(Wue,{cursor:w,tooltipEventType:z,coordinate:ae,payload:se,index:Z}))}var mp=e=>null;mp.displayName="Cell";function y0e(e,t,r){return(t=w0e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function w0e(e){var t=k0e(e,"string");return typeof t=="symbol"?t:t+""}function k0e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class N0e{constructor(t){y0e(this,"cache",new Map),this.maxSize=t}get(t){var r=this.cache.get(t);return r!==void 0&&(this.cache.delete(t),this.cache.set(t,r)),r}set(t,r){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var n=this.cache.keys().next().value;this.cache.delete(n)}this.cache.set(t,r)}clear(){this.cache.clear()}size(){return this.cache.size}}function NP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function _0e(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?NP(Object(r),!0).forEach(function(n){S0e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):NP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function S0e(e,t,r){return(t=j0e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function j0e(e){var t=C0e(e,"string");return typeof t=="symbol"?t:t+""}function C0e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var A0e={cacheSize:2e3,enableCache:!0},pq=_0e({},A0e),_P=new N0e(pq.cacheSize),E0e={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},SP="recharts_measurement_span";function T0e(e,t){var r=t.fontSize||"",n=t.fontFamily||"",a=t.fontWeight||"",i=t.fontStyle||"",l=t.letterSpacing||"",o=t.textTransform||"";return"".concat(e,"|").concat(r,"|").concat(n,"|").concat(a,"|").concat(i,"|").concat(l,"|").concat(o)}var jP=(e,t)=>{try{var r=document.getElementById(SP);r||(r=document.createElement("span"),r.setAttribute("id",SP),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,E0e,t),r.textContent="".concat(e);var n=r.getBoundingClientRect();return{width:n.width,height:n.height}}catch{return{width:0,height:0}}},Cg=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||eh.isSsr)return{width:0,height:0};if(!pq.enableCache)return jP(t,r);var n=T0e(t,r),a=_P.get(n);if(a)return a;var i=jP(t,r);return _P.set(n,i),i},CP=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,AP=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,O0e=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,P0e=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,gq={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},I0e=Object.keys(gq),l1="NaN";function D0e(e,t){return e*gq[t]}class ec{static parse(t){var r,[,n,a]=(r=P0e.exec(t))!==null&&r!==void 0?r:[];return new ec(parseFloat(n),a??"")}constructor(t,r){this.num=t,this.unit=r,this.num=t,this.unit=r,Oc(t)&&(this.unit=""),r!==""&&!O0e.test(r)&&(this.num=NaN,this.unit=""),I0e.includes(r)&&(this.num=D0e(t,r),this.unit="px")}add(t){return this.unit!==t.unit?new ec(NaN,""):new ec(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new ec(NaN,""):new ec(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new ec(NaN,""):new ec(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new ec(NaN,""):new ec(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Oc(this.num)}}function bq(e){if(e.includes(l1))return l1;for(var t=e;t.includes("*")||t.includes("/");){var r,[,n,a,i]=(r=CP.exec(t))!==null&&r!==void 0?r:[],l=ec.parse(n??""),o=ec.parse(i??""),c=a==="*"?l.multiply(o):l.divide(o);if(c.isNaN())return l1;t=t.replace(CP,c.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var d,[,f,p,y]=(d=AP.exec(t))!==null&&d!==void 0?d:[],g=ec.parse(f??""),N=ec.parse(y??""),w=p==="+"?g.add(N):g.subtract(N);if(w.isNaN())return l1;t=t.replace(AP,w.toString())}return t}var EP=/\(([^()]*)\)/;function M0e(e){for(var t=e,r;(r=EP.exec(t))!=null;){var[,n]=r;t=t.replace(EP,bq(n))}return t}function L0e(e){var t=e.replace(/\s+/g,"");return t=M0e(t),t=bq(t),t}function R0e(e){try{return L0e(e)}catch{return l1}}function z3(e){var t=R0e(e.slice(5,-1));return t===l1?"":t}var F0e=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],B0e=["dx","dy","angle","className","breakAll"];function xS(){return xS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},xS.apply(null,arguments)}function TP(e,t){if(e==null)return{};var r,n,a=U0e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function U0e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var vq=/[ \f\n\r\t\v\u2028\u2029]+/,yq=e=>{var{children:t,breakAll:r,style:n}=e;try{var a=[];Cs(t)||(r?a=t.toString().split(""):a=t.toString().split(vq));var i=a.map(o=>({word:o,width:Cg(o,n).width})),l=r?0:Cg("",n).width;return{wordsWithComputedWidth:i,spaceWidth:l}}catch{return null}},z0e=(e,t,r,n,a)=>{var{maxLines:i,children:l,style:o,breakAll:c}=e,d=Zr(i),f=l,p=function(){var H=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return H.reduce((K,J)=>{var{word:ae,width:se}=J,ue=K[K.length-1];if(ue&&(n==null||a||ue.width+se+r<Number(n)))ue.words.push(ae),ue.width+=se+r;else{var fe={words:[ae],width:se};K.push(fe)}return K},[])},y=p(t),g=Z=>Z.reduce((H,K)=>H.width>K.width?H:K);if(!d||a)return y;var N=y.length>i||g(y).width>Number(n);if(!N)return y;for(var w="",k=Z=>{var H=f.slice(0,Z),K=yq({breakAll:c,style:o,children:H+w}).wordsWithComputedWidth,J=p(K),ae=J.length>i||g(J).width>Number(n);return[ae,J]},S=0,O=f.length-1,E=0,D;S<=O&&E<=f.length-1;){var q=Math.floor((S+O)/2),W=q-1,[R,U]=k(W),[z]=k(q);if(!R&&!z&&(S=q+1),R&&z&&(O=q-1),!R&&z){D=U;break}E++}return D||y},OP=e=>{var t=Cs(e)?[]:e.toString().split(vq);return[{words:t}]},q0e=e=>{var{width:t,scaleToFit:r,children:n,style:a,breakAll:i,maxLines:l}=e;if((t||r)&&!eh.isSsr){var o,c,d=yq({breakAll:i,children:n,style:a});if(d){var{wordsWithComputedWidth:f,spaceWidth:p}=d;o=f,c=p}else return OP(n);return z0e({breakAll:i,children:n,maxLines:l,style:a},o,c,t,r)}return OP(n)},PP="#808080",yk=T.forwardRef((e,t)=>{var{x:r=0,y:n=0,lineHeight:a="1em",capHeight:i="0.71em",scaleToFit:l=!1,textAnchor:o="start",verticalAnchor:c="end",fill:d=PP}=e,f=TP(e,F0e),p=T.useMemo(()=>q0e({breakAll:f.breakAll,children:f.children,maxLines:f.maxLines,scaleToFit:l,style:f.style,width:f.width}),[f.breakAll,f.children,f.maxLines,l,f.style,f.width]),{dx:y,dy:g,angle:N,className:w,breakAll:k}=f,S=TP(f,B0e);if(!zu(r)||!zu(n)||p.length===0)return null;var O=r+(Zr(y)?y:0),E=n+(Zr(g)?g:0),D;switch(c){case"start":D=z3("calc(".concat(i,")"));break;case"middle":D=z3("calc(".concat((p.length-1)/2," * -").concat(a," + (").concat(i," / 2))"));break;default:D=z3("calc(".concat(p.length-1," * -").concat(a,")"));break}var q=[];if(l){var W=p[0].width,{width:R}=f;q.push("scale(".concat(Zr(R)?R/W:1,")"))}return N&&q.push("rotate(".concat(N,", ").concat(O,", ").concat(E,")")),q.length&&(S.transform=q.join(" ")),T.createElement("text",xS({},Eo(S),{ref:t,x:O,y:E,className:Zn("recharts-text",w),textAnchor:o,fill:d.includes("url")?PP:d}),p.map((U,z)=>{var Z=U.words.join(k?"":" ");return T.createElement("tspan",{x:O,dy:z===0?D:a,key:"".concat(Z,"-").concat(z)},Z)}))});yk.displayName="Text";var H0e=["labelRef"];function $0e(e,t){if(e==null)return{};var r,n,a=V0e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function V0e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function IP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function yi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?IP(Object(r),!0).forEach(function(n){W0e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):IP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function W0e(e,t,r){return(t=K0e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function K0e(e){var t=G0e(e,"string");return typeof t=="symbol"?t:t+""}function G0e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function j0(){return j0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},j0.apply(null,arguments)}var wq=T.createContext(null),X0e=e=>{var{x:t,y:r,width:n,height:a,children:i}=e,l=T.useMemo(()=>({x:t,y:r,width:n,height:a}),[t,r,n,a]);return T.createElement(wq.Provider,{value:l},i)},kq=()=>{var e=T.useContext(wq),t=ek();return e||t},Y0e=T.createContext(null),Z0e=()=>{var e=T.useContext(Y0e),t=Jr(hz);return e||t},Q0e=e=>{var{value:t,formatter:r}=e,n=Cs(e.children)?t:e.children;return typeof r=="function"?r(n):n},oC=e=>e!=null&&typeof e=="function",J0e=(e,t)=>{var r=vl(t-e),n=Math.min(Math.abs(t-e),360);return r*n},ehe=(e,t,r,n,a)=>{var{offset:i,className:l}=e,{cx:o,cy:c,innerRadius:d,outerRadius:f,startAngle:p,endAngle:y,clockWise:g}=a,N=(d+f)/2,w=J0e(p,y),k=w>=0?1:-1,S,O;switch(t){case"insideStart":S=p+k*i,O=g;break;case"insideEnd":S=y-k*i,O=!g;break;case"end":S=y+k*i,O=g;break;default:throw new Error("Unsupported position ".concat(t))}O=w<=0?O:!O;var E=Ri(o,c,N,S),D=Ri(o,c,N,S+(O?1:-1)*359),q="M".concat(E.x,",").concat(E.y,`
    A`).concat(N,",").concat(N,",0,1,").concat(O?0:1,`,
    `).concat(D.x,",").concat(D.y),W=Cs(e.id)?Yg("recharts-radial-line-"):e.id;return T.createElement("text",j0({},n,{dominantBaseline:"central",className:Zn("recharts-radial-bar-label",l)}),T.createElement("defs",null,T.createElement("path",{id:W,d:q})),T.createElement("textPath",{xlinkHref:"#".concat(W)},r))},the=(e,t,r)=>{var{cx:n,cy:a,innerRadius:i,outerRadius:l,startAngle:o,endAngle:c}=e,d=(o+c)/2;if(r==="outside"){var{x:f,y:p}=Ri(n,a,l+t,d);return{x:f,y:p,textAnchor:f>=n?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"end"};var y=(i+l)/2,{x:g,y:N}=Ri(n,a,y,d);return{x:g,y:N,textAnchor:"middle",verticalAnchor:"middle"}},Nq=e=>"cx"in e&&Zr(e.cx),rhe=(e,t)=>{var{parentViewBox:r,offset:n,position:a}=e,i;r!=null&&!Nq(r)&&(i=r);var{x:l,y:o,width:c,height:d}=t,f=d>=0?1:-1,p=f*n,y=f>0?"end":"start",g=f>0?"start":"end",N=c>=0?1:-1,w=N*n,k=N>0?"end":"start",S=N>0?"start":"end";if(a==="top"){var O={x:l+c/2,y:o-f*n,textAnchor:"middle",verticalAnchor:y};return yi(yi({},O),i?{height:Math.max(o-i.y,0),width:c}:{})}if(a==="bottom"){var E={x:l+c/2,y:o+d+p,textAnchor:"middle",verticalAnchor:g};return yi(yi({},E),i?{height:Math.max(i.y+i.height-(o+d),0),width:c}:{})}if(a==="left"){var D={x:l-w,y:o+d/2,textAnchor:k,verticalAnchor:"middle"};return yi(yi({},D),i?{width:Math.max(D.x-i.x,0),height:d}:{})}if(a==="right"){var q={x:l+c+w,y:o+d/2,textAnchor:S,verticalAnchor:"middle"};return yi(yi({},q),i?{width:Math.max(i.x+i.width-q.x,0),height:d}:{})}var W=i?{width:c,height:d}:{};return a==="insideLeft"?yi({x:l+w,y:o+d/2,textAnchor:S,verticalAnchor:"middle"},W):a==="insideRight"?yi({x:l+c-w,y:o+d/2,textAnchor:k,verticalAnchor:"middle"},W):a==="insideTop"?yi({x:l+c/2,y:o+p,textAnchor:"middle",verticalAnchor:g},W):a==="insideBottom"?yi({x:l+c/2,y:o+d-p,textAnchor:"middle",verticalAnchor:y},W):a==="insideTopLeft"?yi({x:l+w,y:o+p,textAnchor:S,verticalAnchor:g},W):a==="insideTopRight"?yi({x:l+c-w,y:o+p,textAnchor:k,verticalAnchor:g},W):a==="insideBottomLeft"?yi({x:l+w,y:o+d-p,textAnchor:S,verticalAnchor:y},W):a==="insideBottomRight"?yi({x:l+c-w,y:o+d-p,textAnchor:k,verticalAnchor:y},W):a&&typeof a=="object"&&(Zr(a.x)||V0(a.x))&&(Zr(a.y)||V0(a.y))?yi({x:l+no(a.x,c),y:o+no(a.y,d),textAnchor:"end",verticalAnchor:"end"},W):yi({x:l+c/2,y:o+d/2,textAnchor:"middle",verticalAnchor:"middle"},W)},nhe={offset:5};function Fh(e){var t=Qi(e,nhe),{viewBox:r,position:n,value:a,children:i,content:l,className:o="",textBreakAll:c,labelRef:d}=t,f=Z0e(),p=kq(),y=n==="center"?p:f??p,g=r||y;if(!g||Cs(a)&&Cs(i)&&!T.isValidElement(l)&&typeof l!="function")return null;var N=yi(yi({},t),{},{viewBox:g});if(T.isValidElement(l)){var{labelRef:w}=N,k=$0e(N,H0e);return T.cloneElement(l,k)}var S;if(typeof l=="function"){if(S=T.createElement(l,N),T.isValidElement(S))return S}else S=Q0e(t);var O=Nq(g),E=Eo(t);if(O&&(n==="insideStart"||n==="insideEnd"||n==="end"))return ehe(t,n,S,E,g);var D=O?the(g,t.offset,t.position):rhe(t,g);return T.createElement(yk,j0({ref:d,className:Zn("recharts-label",o)},E,D,{breakAll:c}),S)}Fh.displayName="Label";var ahe=(e,t,r)=>{if(!e)return null;var n={viewBox:t,labelRef:r};return e===!0?T.createElement(Fh,j0({key:"label-implicit"},n)):zu(e)?T.createElement(Fh,j0({key:"label-implicit",value:e},n)):T.isValidElement(e)?e.type===Fh?T.cloneElement(e,yi({key:"label-implicit"},n)):T.createElement(Fh,j0({key:"label-implicit",content:e},n)):oC(e)?T.createElement(Fh,j0({key:"label-implicit",content:e},n)):e&&typeof e=="object"?T.createElement(Fh,j0({},e,{key:"label-implicit"},n)):null};function she(e){var{label:t,labelRef:r}=e,n=kq();return ahe(t,n,r)||null}var q3={},H3={},DP;function ihe(){return DP||(DP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r[r.length-1]}e.last=t})(H3)),H3}var $3={},MP;function lhe(){return MP||(MP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Array.isArray(r)?r:Array.from(r)}e.toArray=t})($3)),$3}var LP;function ohe(){return LP||(LP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ihe(),r=lhe(),n=H6();function a(i){if(n.isArrayLike(i))return t.last(r.toArray(i))}e.last=a})(q3)),q3}var V3,RP;function che(){return RP||(RP=1,V3=ohe().last),V3}var dhe=che();const uhe=gd(dhe);var hhe=["valueAccessor"],fhe=["dataKey","clockWise","id","textBreakAll"];function Zy(){return Zy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Zy.apply(null,arguments)}function FP(e,t){if(e==null)return{};var r,n,a=mhe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function mhe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var xhe=e=>Array.isArray(e.value)?uhe(e.value):e.value,_q=T.createContext(void 0),cC=_q.Provider,Sq=T.createContext(void 0),phe=Sq.Provider;function ghe(){return T.useContext(_q)}function bhe(){return T.useContext(Sq)}function ry(e){var{valueAccessor:t=xhe}=e,r=FP(e,hhe),{dataKey:n,clockWise:a,id:i,textBreakAll:l}=r,o=FP(r,fhe),c=ghe(),d=bhe(),f=c||d;return!f||!f.length?null:T.createElement(ci,{className:"recharts-label-list"},f.map((p,y)=>{var g,N=Cs(n)?t(p,y):ns(p&&p.payload,n),w=Cs(i)?{}:{id:"".concat(i,"-").concat(y)};return T.createElement(Fh,Zy({key:"label-".concat(y)},Eo(p),o,w,{fill:(g=r.fill)!==null&&g!==void 0?g:p.fill,parentViewBox:p.parentViewBox,value:N,textBreakAll:l,viewBox:p.viewBox,index:y}))}))}ry.displayName="LabelList";function wk(e){var{label:t}=e;return t?t===!0?T.createElement(ry,{key:"labelList-implicit"}):T.isValidElement(t)||oC(t)?T.createElement(ry,{key:"labelList-implicit",content:t}):typeof t=="object"?T.createElement(ry,Zy({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}function pS(){return pS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},pS.apply(null,arguments)}var dC=e=>{var{cx:t,cy:r,r:n,className:a}=e,i=Zn("recharts-dot",a);return t===+t&&r===+r&&n===+n?T.createElement("circle",pS({},Ao(e),U6(e),{className:i,cx:t,cy:r,r:n})):null},jq=e=>e.graphicalItems.polarItems,vhe=jt([zs,Gb],Dj),kk=jt([jq,Gs,vhe],Mj),yhe=jt([kk],Lj),Nk=jt([yhe,_j],Rj),whe=jt([Nk,Gs,kk],Bj);jt([Nk,Gs,kk],(e,t,r)=>r.length>0?e.flatMap(n=>r.flatMap(a=>{var i,l=ns(n,(i=t.dataKey)!==null&&i!==void 0?i:a.dataKey);return{value:l,errorDomain:[]}})).filter(Boolean):(t==null?void 0:t.dataKey)!=null?e.map(n=>({value:ns(n,t.dataKey),errorDomain:[]})):e.map(n=>({value:n,errorDomain:[]})));var BP=()=>{},khe=jt([Nk,Gs,kk,pk,zs],Hj),Nhe=jt([Gs,zj,qj,BP,khe,BP,fa,zs],$j),Cq=jt([Gs,fa,Nk,whe,Kb,zs,Nhe],Vj),_he=jt([Cq,Gs,dp],Gj);jt([Gs,Cq,_he,zs],Yj);var She={radiusAxis:{},angleAxis:{}},Aq=Mc({name:"polarAxis",initialState:She,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:PTe,removeRadiusAxis:ITe,addAngleAxis:DTe,removeAngleAxis:MTe}=Aq.actions,jhe=Aq.reducer;function UP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function zP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?UP(Object(r),!0).forEach(function(n){Che(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):UP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Che(e,t,r){return(t=Ahe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ahe(e){var t=Ehe(e,"string");return typeof t=="symbol"?t:t+""}function Ehe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var The=(e,t)=>t,uC=jt([jq,The],(e,t)=>e.filter(r=>r.type==="pie").find(r=>r.id===t)),Ohe=[],hC=(e,t,r)=>(r==null?void 0:r.length)===0?Ohe:r,Eq=jt([_j,uC,hC],(e,t,r)=>{var{chartData:n}=e;if(t!=null){var a;if((t==null?void 0:t.data)!=null&&t.data.length>0?a=t.data:a=n,(!a||!a.length)&&r!=null&&(a=r.map(i=>zP(zP({},t.presentationProps),i.props))),a!=null)return a}}),Phe=jt([Eq,uC,hC],(e,t,r)=>{if(!(e==null||t==null))return e.map((n,a)=>{var i,l=ns(n,t.nameKey,t.name),o;return r!=null&&(i=r[a])!==null&&i!==void 0&&(i=i.props)!==null&&i!==void 0&&i.fill?o=r[a].props.fill:typeof n=="object"&&n!=null&&"fill"in n?o=n.fill:o=t.fill,{value:xf(l,t.dataKey),color:o,payload:n,type:t.legendType}})}),Ihe=jt([Eq,uC,hC,Zi],(e,t,r,n)=>{if(!(t==null||e==null))return Ife({offset:n,pieSettings:t,displayedData:e,cells:r})}),W3={exports:{}},ts={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qP;function Dhe(){if(qP)return ts;qP=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),l=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),y=Symbol.for("react.view_transition"),g=Symbol.for("react.client.reference");function N(w){if(typeof w=="object"&&w!==null){var k=w.$$typeof;switch(k){case e:switch(w=w.type,w){case r:case a:case n:case c:case d:case y:return w;default:switch(w=w&&w.$$typeof,w){case l:case o:case p:case f:return w;case i:return w;default:return k}}case t:return k}}}return ts.ContextConsumer=i,ts.ContextProvider=l,ts.Element=e,ts.ForwardRef=o,ts.Fragment=r,ts.Lazy=p,ts.Memo=f,ts.Portal=t,ts.Profiler=a,ts.StrictMode=n,ts.Suspense=c,ts.SuspenseList=d,ts.isContextConsumer=function(w){return N(w)===i},ts.isContextProvider=function(w){return N(w)===l},ts.isElement=function(w){return typeof w=="object"&&w!==null&&w.$$typeof===e},ts.isForwardRef=function(w){return N(w)===o},ts.isFragment=function(w){return N(w)===r},ts.isLazy=function(w){return N(w)===p},ts.isMemo=function(w){return N(w)===f},ts.isPortal=function(w){return N(w)===t},ts.isProfiler=function(w){return N(w)===a},ts.isStrictMode=function(w){return N(w)===n},ts.isSuspense=function(w){return N(w)===c},ts.isSuspenseList=function(w){return N(w)===d},ts.isValidElementType=function(w){return typeof w=="string"||typeof w=="function"||w===r||w===a||w===n||w===c||w===d||typeof w=="object"&&w!==null&&(w.$$typeof===p||w.$$typeof===f||w.$$typeof===l||w.$$typeof===i||w.$$typeof===o||w.$$typeof===g||w.getModuleId!==void 0)},ts.typeOf=N,ts}var HP;function Mhe(){return HP||(HP=1,W3.exports=Dhe()),W3.exports}var Lhe=Mhe(),$P=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",VP=null,K3=null,Tq=e=>{if(e===VP&&Array.isArray(K3))return K3;var t=[];return T.Children.forEach(e,r=>{Cs(r)||(Lhe.isFragment(r)?t=t.concat(Tq(r.props.children)):t.push(r))}),K3=t,VP=e,t};function fC(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(a=>$P(a)):n=[$P(t)],Tq(e).forEach(a=>{var i=Om(a,"type.displayName")||Om(a,"type.name");n.indexOf(i)!==-1&&r.push(a)}),r}var _k=e=>e&&typeof e=="object"&&"clipDot"in e?!!e.clipDot:!0,G3={},WP;function Rhe(){return WP||(WP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var a;if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){const i=r[Symbol.toStringTag];return i==null||!((a=Object.getOwnPropertyDescriptor(r,Symbol.toStringTag))!=null&&a.writable)?!1:r.toString()===`[object ${i}]`}let n=r;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(r)===n}e.isPlainObject=t})(G3)),G3}var X3,KP;function Fhe(){return KP||(KP=1,X3=Rhe().isPlainObject),X3}var Bhe=Fhe();const Uhe=gd(Bhe);function GP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function XP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?GP(Object(r),!0).forEach(function(n){zhe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):GP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function zhe(e,t,r){return(t=qhe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qhe(e){var t=Hhe(e,"string");return typeof t=="symbol"?t:t+""}function Hhe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Qy(){return Qy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Qy.apply(null,arguments)}var YP=(e,t,r,n,a)=>{var i=r-n,l;return l="M ".concat(e,",").concat(t),l+="L ".concat(e+r,",").concat(t),l+="L ".concat(e+r-i/2,",").concat(t+a),l+="L ".concat(e+r-i/2-n,",").concat(t+a),l+="L ".concat(e,",").concat(t," Z"),l},$he={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Vhe=e=>{var t=Qi(e,$he),{x:r,y:n,upperWidth:a,lowerWidth:i,height:l,className:o}=t,{animationEasing:c,animationDuration:d,animationBegin:f,isUpdateAnimationActive:p}=t,y=T.useRef(null),[g,N]=T.useState(-1),w=T.useRef(a),k=T.useRef(i),S=T.useRef(l),O=T.useRef(r),E=T.useRef(n),D=np(e,"trapezoid-");if(T.useEffect(()=>{if(y.current&&y.current.getTotalLength)try{var ae=y.current.getTotalLength();ae&&N(ae)}catch{}},[]),r!==+r||n!==+n||a!==+a||i!==+i||l!==+l||a===0&&i===0||l===0)return null;var q=Zn("recharts-trapezoid",o);if(!p)return T.createElement("g",null,T.createElement("path",Qy({},Eo(t),{className:q,d:YP(r,n,a,i,l)})));var W=w.current,R=k.current,U=S.current,z=O.current,Z=E.current,H="0px ".concat(g===-1?1:g,"px"),K="".concat(g,"px 0px"),J=tU(["strokeDasharray"],d,c);return T.createElement(rp,{animationId:D,key:D,canBegin:g>0,duration:d,easing:c,isActive:p,begin:f},ae=>{var se=rs(W,a,ae),ue=rs(R,i,ae),fe=rs(U,l,ae),ke=rs(z,r,ae),_e=rs(Z,n,ae);y.current&&(w.current=se,k.current=ue,S.current=fe,O.current=ke,E.current=_e);var Le=ae>0?{transition:J,strokeDasharray:K}:{strokeDasharray:H};return T.createElement("path",Qy({},Eo(t),{className:q,d:YP(ke,_e,se,ue,fe),ref:y,style:XP(XP({},Le),t.style)}))})},Whe=["option","shapeType","propTransformer","activeClassName","isActive"];function Khe(e,t){if(e==null)return{};var r,n,a=Ghe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Ghe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function ZP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Jy(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ZP(Object(r),!0).forEach(function(n){Xhe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ZP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Xhe(e,t,r){return(t=Yhe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Yhe(e){var t=Zhe(e,"string");return typeof t=="symbol"?t:t+""}function Zhe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Qhe(e,t){return Jy(Jy({},t),e)}function Jhe(e,t){return e==="symbols"}function QP(e){var{shapeType:t,elementProps:r}=e;switch(t){case"rectangle":return T.createElement(sU,r);case"trapezoid":return T.createElement(Vhe,r);case"sector":return T.createElement(oU,r);case"symbols":if(Jhe(t))return T.createElement(B6,r);break;default:return null}}function efe(e){return T.isValidElement(e)?e.props:e}function Oq(e){var{option:t,shapeType:r,propTransformer:n=Qhe,activeClassName:a="recharts-active-shape",isActive:i}=e,l=Khe(e,Whe),o;if(T.isValidElement(t))o=T.cloneElement(t,Jy(Jy({},l),efe(t)));else if(typeof t=="function")o=t(l);else if(Uhe(t)&&typeof t!="boolean"){var c=n(t,l);o=T.createElement(QP,{shapeType:r,elementProps:c})}else{var d=l;o=T.createElement(QP,{shapeType:r,elementProps:d})}return i?T.createElement(ci,{className:a},o):o}var mC=(e,t)=>{var r=Us();return(n,a)=>i=>{e==null||e(n,a,i),r($z({activeIndex:String(a),activeDataKey:t,activeCoordinate:n.tooltipPosition}))}},xC=e=>{var t=Us();return(r,n)=>a=>{e==null||e(r,n,a),t(Hde())}},pC=(e,t)=>{var r=Us();return(n,a)=>i=>{e==null||e(n,a,i),r($de({activeIndex:String(a),activeDataKey:t,activeCoordinate:n.tooltipPosition}))}};function Sk(e){var{fn:t,args:r}=e,n=Us(),a=Ml();return T.useLayoutEffect(()=>{if(!a){var i=t(r);return n(Ude(i)),()=>{n(zde(i))}}},[t,r,n,a]),null}var Pq=()=>{};function gC(e){var{legendPayload:t}=e,r=Us(),n=Ml();return T.useLayoutEffect(()=>n?Pq:(r(QB(t)),()=>{r(JB(t))}),[r,n,t]),null}function tfe(e){var{legendPayload:t}=e,r=Us(),n=Jr(fa);return T.useLayoutEffect(()=>n!=="centric"&&n!=="radial"?Pq:(r(QB(t)),()=>{r(JB(t))}),[r,n,t]),null}var Y3,rfe=()=>{var[e]=T.useState(()=>Yg("uid-"));return e},nfe=(Y3=uG.useId)!==null&&Y3!==void 0?Y3:rfe;function afe(e,t){var r=nfe();return t||(e?"".concat(e,"-").concat(r):r)}var sfe=T.createContext(void 0),jk=e=>{var{id:t,type:r,children:n}=e,a=afe("recharts-".concat(r),t);return T.createElement(sfe.Provider,{value:a},n(a))},ife={cartesianItems:[],polarItems:[]},Iq=Mc({name:"graphicalItems",initialState:ife,reducers:{addCartesianGraphicalItem:{reducer(e,t){e.cartesianItems.push(t.payload)},prepare:No()},replaceCartesianGraphicalItem:{reducer(e,t){var{prev:r,next:n}=t.payload,a=M0(e).cartesianItems.indexOf(r);a>-1&&(e.cartesianItems[a]=n)},prepare:No()},removeCartesianGraphicalItem:{reducer(e,t){var r=M0(e).cartesianItems.indexOf(t.payload);r>-1&&e.cartesianItems.splice(r,1)},prepare:No()},addPolarGraphicalItem:{reducer(e,t){e.polarItems.push(t.payload)},prepare:No()},removePolarGraphicalItem:{reducer(e,t){var r=M0(e).polarItems.indexOf(t.payload);r>-1&&e.polarItems.splice(r,1)},prepare:No()}}}),{addCartesianGraphicalItem:lfe,replaceCartesianGraphicalItem:ofe,removeCartesianGraphicalItem:cfe,addPolarGraphicalItem:dfe,removePolarGraphicalItem:ufe}=Iq.actions,hfe=Iq.reducer;function bC(e){var t=Us(),r=T.useRef(null);return T.useLayoutEffect(()=>{r.current===null?t(lfe(e)):r.current!==e&&t(ofe({prev:r.current,next:e})),r.current=e},[t,e]),T.useLayoutEffect(()=>()=>{r.current&&(t(cfe(r.current)),r.current=null)},[t]),null}function ffe(e){var t=Us();return T.useLayoutEffect(()=>(t(dfe(e)),()=>{t(ufe(e))}),[t,e]),null}var mfe=["onMouseEnter","onClick","onMouseLeave"],xfe=["id"],pfe=["id"];function vC(e,t){if(e==null)return{};var r,n,a=gfe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function gfe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function JP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ls(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?JP(Object(r),!0).forEach(function(n){bfe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):JP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function bfe(e,t,r){return(t=vfe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vfe(e){var t=yfe(e,"string");return typeof t=="symbol"?t:t+""}function yfe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function sf(){return sf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},sf.apply(null,arguments)}function wfe(e){var t=T.useMemo(()=>fC(e.children,mp),[e.children]),r=Jr(n=>Phe(n,e.id,t));return r==null?null:T.createElement(tfe,{legendPayload:r})}function kfe(e){var{dataKey:t,nameKey:r,sectors:n,stroke:a,strokeWidth:i,fill:l,name:o,hide:c,tooltipType:d}=e;return{dataDefinedOnItem:n.map(f=>f.tooltipPayload),positions:n.map(f=>f.tooltipPosition),settings:{stroke:a,strokeWidth:i,fill:l,dataKey:t,nameKey:r,name:xf(o,t),hide:c,type:d,color:l,unit:""}}}var Nfe=(e,t)=>e>t?"start":e<t?"end":"middle",_fe=(e,t,r)=>no(typeof t=="function"?t(e):t,r,r*.8),Sfe=(e,t,r)=>{var{top:n,left:a,width:i,height:l}=t,o=BB(i,l),c=a+no(e.cx,i,i/2),d=n+no(e.cy,l,l/2),f=no(e.innerRadius,o,0),p=_fe(r,e.outerRadius,o),y=e.maxRadius||Math.sqrt(i*i+l*l)/2;return{cx:c,cy:d,innerRadius:f,outerRadius:p,maxRadius:y}},jfe=(e,t)=>{var r=vl(t-e),n=Math.min(Math.abs(t-e),360);return r*n};function Cfe(e){return e&&typeof e=="object"&&"className"in e&&typeof e.className=="string"?e.className:""}var Afe=(e,t)=>{if(T.isValidElement(e))return T.cloneElement(e,t);if(typeof e=="function")return e(t);var r=Zn("recharts-pie-label-line",typeof e!="boolean"?e.className:"");return T.createElement(m1,sf({},t,{type:"linear",className:r}))},Efe=(e,t,r)=>{if(T.isValidElement(e))return T.cloneElement(e,t);var n=r;if(typeof e=="function"&&(n=e(t),T.isValidElement(n)))return n;var a=Zn("recharts-pie-label-text",Cfe(e));return T.createElement(yk,sf({},t,{alignmentBaseline:"middle",className:a}),n)};function Tfe(e){var{sectors:t,props:r,showLabels:n}=e,{label:a,labelLine:i,dataKey:l}=r;if(!n||!a||!t)return null;var o=Ao(r),c=Tm(a),d=Tm(i),f=typeof a=="object"&&"offsetRadius"in a&&typeof a.offsetRadius=="number"&&a.offsetRadius||20,p=t.map((y,g)=>{var N=(y.startAngle+y.endAngle)/2,w=Ri(y.cx,y.cy,y.outerRadius+f,N),k=Ls(Ls(Ls(Ls({},o),y),{},{stroke:"none"},c),{},{index:g,textAnchor:Nfe(w.x,y.cx)},w),S=Ls(Ls(Ls(Ls({},o),y),{},{fill:"none",stroke:y.fill},d),{},{index:g,points:[Ri(y.cx,y.cy,y.outerRadius,N),w],key:"line"});return T.createElement(ci,{key:"label-".concat(y.startAngle,"-").concat(y.endAngle,"-").concat(y.midAngle,"-").concat(g)},i&&Afe(i,S),Efe(a,k,ns(y,l)))});return T.createElement(ci,{className:"recharts-pie-labels"},p)}function Ofe(e){var{sectors:t,props:r,showLabels:n}=e,{label:a}=r;return typeof a=="object"&&a!=null&&"position"in a?T.createElement(wk,{label:a}):T.createElement(Tfe,{sectors:t,props:r,showLabels:n})}function Pfe(e){var{sectors:t,activeShape:r,inactiveShape:n,allOtherPieProps:a}=e,i=Jr(af),{onMouseEnter:l,onClick:o,onMouseLeave:c}=a,d=vC(a,mfe),f=mC(l,a.dataKey),p=xC(c),y=pC(o,a.dataKey);return t==null||t.length===0?null:T.createElement(T.Fragment,null,t.map((g,N)=>{if((g==null?void 0:g.startAngle)===0&&(g==null?void 0:g.endAngle)===0&&t.length!==1)return null;var w=r&&String(N)===i,k=i?n:null,S=w?r:k,O=Ls(Ls({},g),{},{stroke:g.stroke,tabIndex:-1,[VB]:N,[WB]:a.dataKey});return T.createElement(ci,sf({key:"sector-".concat(g==null?void 0:g.startAngle,"-").concat(g==null?void 0:g.endAngle,"-").concat(g.midAngle,"-").concat(N),tabIndex:-1,className:"recharts-pie-sector"},Rb(d,g,N),{onMouseEnter:f(g,N),onMouseLeave:p(g,N),onClick:y(g,N)}),T.createElement(Oq,sf({option:S,isActive:w,shapeType:"sector"},O)))}))}function Ife(e){var t,{pieSettings:r,displayedData:n,cells:a,offset:i}=e,{cornerRadius:l,startAngle:o,endAngle:c,dataKey:d,nameKey:f,tooltipType:p}=r,y=Math.abs(r.minAngle),g=jfe(o,c),N=Math.abs(g),w=n.length<=1?0:(t=r.paddingAngle)!==null&&t!==void 0?t:0,k=n.filter(W=>ns(W,d,0)!==0).length,S=(N>=360?k:k-1)*w,O=N-k*y-S,E=n.reduce((W,R)=>{var U=ns(R,d,0);return W+(Zr(U)?U:0)},0),D;if(E>0){var q;D=n.map((W,R)=>{var U=ns(W,d,0),z=ns(W,f,R),Z=Sfe(r,i,W),H=(Zr(U)?U:0)/E,K,J=Ls(Ls({},W),a&&a[R]&&a[R].props);R?K=q.endAngle+vl(g)*w*(U!==0?1:0):K=o;var ae=K+vl(g)*((U!==0?y:0)+H*O),se=(K+ae)/2,ue=(Z.innerRadius+Z.outerRadius)/2,fe=[{name:z,value:U,payload:J,dataKey:d,type:p}],ke=Ri(Z.cx,Z.cy,ue,se);return q=Ls(Ls(Ls(Ls({},r.presentationProps),{},{percent:H,cornerRadius:l,name:z,tooltipPayload:fe,midAngle:se,middleRadius:ue,tooltipPosition:ke},J),Z),{},{value:U,startAngle:K,endAngle:ae,payload:J,paddingAngle:vl(g)*w}),q})}return D}function Dfe(e){var{showLabels:t,sectors:r,children:n}=e,a=T.useMemo(()=>!t||!r?[]:r.map(i=>({value:i.value,payload:i.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:i.cx,cy:i.cy,innerRadius:i.innerRadius,outerRadius:i.outerRadius,startAngle:i.startAngle,endAngle:i.endAngle,clockWise:!1},fill:i.fill})),[r,t]);return T.createElement(phe,{value:t?a:void 0},n)}function Mfe(e){var{props:t,previousSectorsRef:r}=e,{sectors:n,isAnimationActive:a,animationBegin:i,animationDuration:l,animationEasing:o,activeShape:c,inactiveShape:d,onAnimationStart:f,onAnimationEnd:p}=t,y=np(t,"recharts-pie-"),g=r.current,[N,w]=T.useState(!1),k=T.useCallback(()=>{typeof p=="function"&&p(),w(!1)},[p]),S=T.useCallback(()=>{typeof f=="function"&&f(),w(!0)},[f]);return T.createElement(Dfe,{showLabels:!N,sectors:n},T.createElement(rp,{animationId:y,begin:i,duration:l,isActive:a,easing:o,onAnimationStart:S,onAnimationEnd:k,key:y},O=>{var E=[],D=n&&n[0],q=D==null?void 0:D.startAngle;return n==null||n.forEach((W,R)=>{var U=g&&g[R],z=R>0?Om(W,"paddingAngle",0):0;if(U){var Z=rs(U.endAngle-U.startAngle,W.endAngle-W.startAngle,O),H=Ls(Ls({},W),{},{startAngle:q+z,endAngle:q+Z+z});E.push(H),q=H.endAngle}else{var{endAngle:K,startAngle:J}=W,ae=rs(0,K-J,O),se=Ls(Ls({},W),{},{startAngle:q+z,endAngle:q+ae+z});E.push(se),q=se.endAngle}}),r.current=E,T.createElement(ci,null,T.createElement(Pfe,{sectors:E,activeShape:c,inactiveShape:d,allOtherPieProps:t}))}),T.createElement(Ofe,{showLabels:!N,sectors:n,props:t}),t.children)}var Lfe={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:!eh.isSsr,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff"};function Rfe(e){var{id:t}=e,r=vC(e,xfe),{hide:n,className:a,rootTabIndex:i}=e,l=T.useMemo(()=>fC(e.children,mp),[e.children]),o=Jr(f=>Ihe(f,t,l)),c=T.useRef(null),d=Zn("recharts-pie",a);return n||o==null?(c.current=null,T.createElement(ci,{tabIndex:i,className:d})):T.createElement(T.Fragment,null,T.createElement(Sk,{fn:kfe,args:Ls(Ls({},e),{},{sectors:o})}),T.createElement(ci,{tabIndex:i,className:d},T.createElement(Mfe,{props:Ls(Ls({},r),{},{sectors:o}),previousSectorsRef:c})))}function yC(e){var t=Qi(e,Lfe),{id:r}=t,n=vC(t,pfe),a=Ao(n);return T.createElement(jk,{id:r,type:"pie"},i=>T.createElement(T.Fragment,null,T.createElement(ffe,{type:"pie",id:i,data:n.data,dataKey:n.dataKey,hide:n.hide,angleAxisId:0,radiusAxisId:0,name:n.name,nameKey:n.nameKey,tooltipType:n.tooltipType,legendType:n.legendType,fill:n.fill,cx:n.cx,cy:n.cy,startAngle:n.startAngle,endAngle:n.endAngle,paddingAngle:n.paddingAngle,minAngle:n.minAngle,innerRadius:n.innerRadius,outerRadius:n.outerRadius,cornerRadius:n.cornerRadius,presentationProps:a,maxRadius:t.maxRadius}),T.createElement(wfe,sf({},n,{id:i})),T.createElement(Rfe,sf({},n,{id:i}))))}yC.displayName="Pie";function eI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function tI(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?eI(Object(r),!0).forEach(function(n){Ffe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ffe(e,t,r){return(t=Bfe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Bfe(e){var t=Ufe(e,"string");return typeof t=="symbol"?t:t+""}function Ufe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var zfe={xAxis:{},yAxis:{},zAxis:{}},Dq=Mc({name:"cartesianAxis",initialState:zfe,reducers:{addXAxis:{reducer(e,t){e.xAxis[t.payload.id]=t.payload},prepare:No()},removeXAxis:{reducer(e,t){delete e.xAxis[t.payload.id]},prepare:No()},addYAxis:{reducer(e,t){e.yAxis[t.payload.id]=t.payload},prepare:No()},removeYAxis:{reducer(e,t){delete e.yAxis[t.payload.id]},prepare:No()},addZAxis:{reducer(e,t){e.zAxis[t.payload.id]=t.payload},prepare:No()},removeZAxis:{reducer(e,t){delete e.zAxis[t.payload.id]},prepare:No()},updateYAxisWidth(e,t){var{id:r,width:n}=t.payload,a=e.yAxis[r];if(a){var i=a.widthHistory||[];if(i.length===3&&i[0]===i[2]&&n===i[1]&&n!==a.width&&Math.abs(n-i[0])<=1)return;var l=[...i,n].slice(-3);e.yAxis[r]=tI(tI({},e.yAxis[r]),{},{width:n,widthHistory:l})}}}}),{addXAxis:qfe,removeXAxis:Hfe,addYAxis:$fe,removeYAxis:Vfe,addZAxis:LTe,removeZAxis:RTe,updateYAxisWidth:Wfe}=Dq.actions,Kfe=Dq.reducer,Gfe=jt([Zi],e=>{if(e)return{top:e.top,bottom:e.bottom,left:e.left,right:e.right}}),Xfe=jt([Gfe,Q0,J0],(e,t,r)=>{if(!(!e||t==null||r==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,r-e.top-e.bottom)}}),Ck=()=>Jr(Xfe),Yfe=()=>Jr(Tue);function rI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function nI(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?rI(Object(r),!0).forEach(function(n){Zfe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Zfe(e,t,r){return(t=Qfe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Qfe(e){var t=Jfe(e,"string");return typeof t=="symbol"?t:t+""}function Jfe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var eme=e=>{var{point:t,childIndex:r,mainColor:n,activeDot:a,dataKey:i}=e;if(a===!1||t.x==null||t.y==null)return null;var l=nI(nI({index:r,dataKey:i,cx:t.x,cy:t.y,r:4,fill:n??"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},Tm(a)),U6(a)),o;return T.isValidElement(a)?o=T.cloneElement(a,l):typeof a=="function"?o=a(l):o=T.createElement(dC,l),T.createElement(ci,{className:"recharts-active-dot"},o)};function gS(e){var{points:t,mainColor:r,activeDot:n,itemDataKey:a}=e,i=Jr(af),l=Yfe();if(t==null||l==null)return null;var o=t.find(c=>l.includes(c.payload));return Cs(o)?null:eme({point:o,childIndex:Number(i),mainColor:r,dataKey:a,activeDot:n})}var tme="Invariant failed";function rme(e,t){throw new Error(tme)}var nme=["x","y"];function bS(){return bS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},bS.apply(null,arguments)}function aI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function dg(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?aI(Object(r),!0).forEach(function(n){ame(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):aI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ame(e,t,r){return(t=sme(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sme(e){var t=ime(e,"string");return typeof t=="symbol"?t:t+""}function ime(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function lme(e,t){if(e==null)return{};var r,n,a=ome(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function ome(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function cme(e,t){var{x:r,y:n}=e,a=lme(e,nme),i="".concat(r),l=parseInt(i,10),o="".concat(n),c=parseInt(o,10),d="".concat(t.height||a.height),f=parseInt(d,10),p="".concat(t.width||a.width),y=parseInt(p,10);return dg(dg(dg(dg(dg({},t),a),l?{x:l}:{}),c?{y:c}:{}),{},{height:f,width:y,name:t.name,radius:t.radius})}function wC(e){return T.createElement(Oq,bS({shapeType:"rectangle",propTransformer:cme,activeClassName:"recharts-active-bar"},e))}var dme=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(n,a)=>{if(Zr(t))return t;var i=Zr(n)||Cs(n);return i?t(n,a):(i||rme(),r)}},ume={},Mq=Mc({name:"errorBars",initialState:ume,reducers:{addErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]||(e[r]=[]),e[r].push(n)},replaceErrorBar:(e,t)=>{var{itemId:r,prev:n,next:a}=t.payload;e[r]&&(e[r]=e[r].map(i=>i.dataKey===n.dataKey&&i.direction===n.direction?a:i))},removeErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]&&(e[r]=e[r].filter(a=>a.dataKey!==n.dataKey||a.direction!==n.direction))}}}),{addErrorBar:FTe,replaceErrorBar:BTe,removeErrorBar:UTe}=Mq.actions,hme=Mq.reducer,fme=["children"];function mme(e,t){if(e==null)return{};var r,n,a=xme(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function xme(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var pme={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},gme=T.createContext(pme);function Lq(e){var{children:t}=e,r=mme(e,fme);return T.createElement(gme.Provider,{value:r},t)}function Ak(e,t){var r,n,a=Jr(d=>rh(d,e)),i=Jr(d=>nh(d,t)),l=(r=a==null?void 0:a.allowDataOverflow)!==null&&r!==void 0?r:mc.allowDataOverflow,o=(n=i==null?void 0:i.allowDataOverflow)!==null&&n!==void 0?n:xc.allowDataOverflow,c=l||o;return{needClip:c,needClipX:l,needClipY:o}}function kC(e){var{xAxisId:t,yAxisId:r,clipPathId:n}=e,a=Ck(),{needClipX:i,needClipY:l,needClip:o}=Ak(t,r);if(!o)return null;var{x:c,y:d,width:f,height:p}=a;return T.createElement("clipPath",{id:"clipPath-".concat(n)},T.createElement("rect",{x:i?c:c-f/2,y:l?d:d-p/2,width:i?f:f*2,height:l?p:p*2}))}var bme=["onMouseEnter","onMouseLeave","onClick"],vme=["value","background","tooltipPosition"],yme=["id"],wme=["onMouseEnter","onClick","onMouseLeave"];function lf(){return lf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},lf.apply(null,arguments)}function sI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function _o(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?sI(Object(r),!0).forEach(function(n){kme(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function kme(e,t,r){return(t=Nme(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Nme(e){var t=_me(e,"string");return typeof t=="symbol"?t:t+""}function _me(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ew(e,t){if(e==null)return{};var r,n,a=Sme(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Sme(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var jme=e=>{var{dataKey:t,name:r,fill:n,legendType:a,hide:i}=e;return[{inactive:i,dataKey:t,type:a,color:n,value:xf(r,t),payload:e}]};function Cme(e){var{dataKey:t,stroke:r,strokeWidth:n,fill:a,name:i,hide:l,unit:o}=e;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:n,fill:a,dataKey:t,nameKey:void 0,name:xf(i,t),hide:l,type:e.tooltipType,color:e.fill,unit:o}}}function Ame(e){var t=Jr(af),{data:r,dataKey:n,background:a,allOtherBarProps:i}=e,{onMouseEnter:l,onMouseLeave:o,onClick:c}=i,d=ew(i,bme),f=mC(l,n),p=xC(o),y=pC(c,n);if(!a||r==null)return null;var g=Tm(a);return T.createElement(T.Fragment,null,r.map((N,w)=>{var{value:k,background:S,tooltipPosition:O}=N,E=ew(N,vme);if(!S)return null;var D=f(N,w),q=p(N,w),W=y(N,w),R=_o(_o(_o(_o(_o({option:a,isActive:String(w)===t},E),{},{fill:"#eee"},S),g),Rb(d,N,w)),{},{onMouseEnter:D,onMouseLeave:q,onClick:W,dataKey:n,index:w,className:"recharts-bar-background-rectangle"});return T.createElement(wC,lf({key:"background-bar-".concat(w)},R))}))}function Eme(e){var{showLabels:t,children:r,rects:n}=e,a=n==null?void 0:n.map(i=>{var l={x:i.x,y:i.y,width:i.width,height:i.height};return _o(_o({},l),{},{value:i.value,payload:i.payload,parentViewBox:i.parentViewBox,viewBox:l,fill:i.fill})});return T.createElement(cC,{value:t?a:void 0},r)}function Tme(e){var{shape:t,activeBar:r,baseProps:n,entry:a,index:i,dataKey:l}=e,o=Jr(af),c=Jr(sq),d=r&&String(i)===o&&(c==null||l===c),f=d?r:t;return T.createElement(wC,lf({},n,{name:String(n.name)},a,{isActive:d,option:f,index:i,dataKey:l}))}function Ome(e){var{shape:t,baseProps:r,entry:n,index:a,dataKey:i}=e;return T.createElement(wC,lf({},r,{name:String(r.name)},n,{isActive:!1,option:t,index:a,dataKey:i}))}function Pme(e){var{data:t,props:r}=e,n=Ao(r),{id:a}=n,i=ew(n,yme),{shape:l,dataKey:o,activeBar:c}=r,{onMouseEnter:d,onClick:f,onMouseLeave:p}=r,y=ew(r,wme),g=mC(d,o),N=xC(p),w=pC(f,o);return t?T.createElement(T.Fragment,null,t.map((k,S)=>T.createElement(ci,lf({key:"rectangle-".concat(k==null?void 0:k.x,"-").concat(k==null?void 0:k.y,"-").concat(k==null?void 0:k.value,"-").concat(S),className:"recharts-bar-rectangle"},Rb(y,k,S),{onMouseEnter:g(k,S),onMouseLeave:N(k,S),onClick:w(k,S)}),c?T.createElement(Tme,{shape:l,activeBar:c,baseProps:i,entry:k,index:S,dataKey:o}):T.createElement(Ome,{shape:l,baseProps:i,entry:k,index:S,dataKey:o})))):null}function Ime(e){var{props:t,previousRectanglesRef:r}=e,{data:n,layout:a,isAnimationActive:i,animationBegin:l,animationDuration:o,animationEasing:c,onAnimationEnd:d,onAnimationStart:f}=t,p=r.current,y=np(t,"recharts-bar-"),[g,N]=T.useState(!1),w=!g,k=T.useCallback(()=>{typeof d=="function"&&d(),N(!1)},[d]),S=T.useCallback(()=>{typeof f=="function"&&f(),N(!0)},[f]);return T.createElement(Eme,{showLabels:w,rects:n},T.createElement(rp,{animationId:y,begin:l,duration:o,isActive:i,easing:c,onAnimationEnd:k,onAnimationStart:S,key:y},O=>{var E=O===1?n:n==null?void 0:n.map((D,q)=>{var W=p&&p[q];if(W)return _o(_o({},D),{},{x:rs(W.x,D.x,O),y:rs(W.y,D.y,O),width:rs(W.width,D.width,O),height:rs(W.height,D.height,O)});if(a==="horizontal"){var R=rs(0,D.height,O);return _o(_o({},D),{},{y:D.y+D.height-R,height:R})}var U=rs(0,D.width,O);return _o(_o({},D),{},{width:U})});return O>0&&(r.current=E??null),E==null?null:T.createElement(ci,null,T.createElement(Pme,{props:t,data:E}))}),T.createElement(wk,{label:t.label}),t.children)}function Dme(e){var t=T.useRef(null);return T.createElement(Ime,{previousRectanglesRef:t,props:e})}var Rq=0,Mme=(e,t)=>{var r=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:r,errorVal:ns(e,t)}};class Lme extends T.PureComponent{render(){var{hide:t,data:r,dataKey:n,className:a,xAxisId:i,yAxisId:l,needClip:o,background:c,id:d}=this.props;if(t||r==null)return null;var f=Zn("recharts-bar",a),p=d;return T.createElement(ci,{className:f,id:d},o&&T.createElement("defs",null,T.createElement(kC,{clipPathId:p,xAxisId:i,yAxisId:l})),T.createElement(ci,{className:"recharts-bar-rectangles",clipPath:o?"url(#clipPath-".concat(p,")"):void 0},T.createElement(Ame,{data:r,dataKey:n,background:c,allOtherBarProps:this.props}),T.createElement(Dme,this.props)))}}var Rme={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!eh.isSsr,legendType:"rect",minPointSize:Rq,xAxisId:0,yAxisId:0};function Fme(e){var{xAxisId:t,yAxisId:r,hide:n,legendType:a,minPointSize:i,activeBar:l,animationBegin:o,animationDuration:c,animationEasing:d,isAnimationActive:f}=e,{needClip:p}=Ak(t,r),y=zb(),g=Ml(),N=fC(e.children,mp),w=Jr(O=>hxe(O,t,r,g,e.id,N));if(y!=="vertical"&&y!=="horizontal")return null;var k,S=w==null?void 0:w[0];return S==null||S.height==null||S.width==null?k=0:k=y==="vertical"?S.height/2:S.width/2,T.createElement(Lq,{xAxisId:t,yAxisId:r,data:w,dataPointFormatter:Mme,errorBarOffset:k},T.createElement(Lme,lf({},e,{layout:y,needClip:p,data:w,xAxisId:t,yAxisId:r,hide:n,legendType:a,minPointSize:i,activeBar:l,animationBegin:o,animationDuration:c,animationEasing:d,isAnimationActive:f})))}function Bme(e){var{layout:t,barSettings:{dataKey:r,minPointSize:n},pos:a,bandSize:i,xAxis:l,yAxis:o,xAxisTicks:c,yAxisTicks:d,stackedData:f,displayedData:p,offset:y,cells:g,parentViewBox:N}=e,w=t==="horizontal"?o:l,k=f?w.scale.domain():null,S=Rae({numericAxis:w});return p.map((O,E)=>{var D,q,W,R,U,z;f?D=Pae(f[E],k):(D=ns(O,r),Array.isArray(D)||(D=[S,D]));var Z=dme(n,Rq)(D[1],E);if(t==="horizontal"){var H,[K,J]=[o.scale(D[0]),o.scale(D[1])];q=FO({axis:l,ticks:c,bandSize:i,offset:a.offset,entry:O,index:E}),W=(H=J??K)!==null&&H!==void 0?H:void 0,R=a.size;var ae=K-J;if(U=Oc(ae)?0:ae,z={x:q,y:y.top,width:R,height:y.height},Math.abs(Z)>0&&Math.abs(U)<Math.abs(Z)){var se=vl(U||Z)*(Math.abs(Z)-Math.abs(U));W-=se,U+=se}}else{var[ue,fe]=[l.scale(D[0]),l.scale(D[1])];if(q=ue,W=FO({axis:o,ticks:d,bandSize:i,offset:a.offset,entry:O,index:E}),R=fe-ue,U=a.size,z={x:y.left,y:W,width:y.width,height:U},Math.abs(Z)>0&&Math.abs(R)<Math.abs(Z)){var ke=vl(R||Z)*(Math.abs(Z)-Math.abs(R));R+=ke}}if(q==null||W==null||R==null||U==null)return null;var _e=_o(_o({},O),{},{x:q,y:W,width:R,height:U,value:f?D:D[1],payload:O,background:z,tooltipPosition:{x:q+R/2,y:W+U/2},parentViewBox:N},g&&g[E]&&g[E].props);return _e}).filter(Boolean)}function Ume(e){var t=Qi(e,Rme),r=Ml();return T.createElement(jk,{id:t.id,type:"bar"},n=>T.createElement(T.Fragment,null,T.createElement(gC,{legendPayload:jme(t)}),T.createElement(Sk,{fn:Cme,args:t}),T.createElement(bC,{type:"bar",id:n,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:HB(t.stackId),hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:r}),T.createElement(Fme,lf({},t,{id:n}))))}var Yh=T.memo(Ume);Yh.displayName="Bar";function iI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function E2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?iI(Object(r),!0).forEach(function(n){zme(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):iI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function zme(e,t,r){return(t=qme(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qme(e){var t=Hme(e,"string");return typeof t=="symbol"?t:t+""}function Hme(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var $me=(e,t)=>t,Vme=(e,t,r)=>r,Wme=(e,t,r,n)=>n,Kme=(e,t,r,n,a)=>a,rv=jt([Yb,Kme],(e,t)=>e.filter(r=>r.type==="bar").find(r=>r.id===t)),Gme=jt([rv],e=>e==null?void 0:e.maxBarSize),Xme=(e,t,r,n,a,i)=>i,lI=(e,t,r)=>{var n=r??e;if(!Cs(n))return no(n,t,0)},Yme=jt([fa,Yb,$me,Vme,Wme],(e,t,r,n,a)=>t.filter(i=>e==="horizontal"?i.xAxisId===r:i.yAxisId===n).filter(i=>i.isPanorama===a).filter(i=>i.hide===!1).filter(i=>i.type==="bar")),Zme=(e,t,r,n)=>{var a=fa(e);return a==="horizontal"?ib(e,"yAxis",r,n):ib(e,"xAxis",t,n)},Qme=(e,t,r)=>{var n=fa(e);return n==="horizontal"?oP(e,"xAxis",t):oP(e,"yAxis",r)},Jme=(e,t,r)=>{var n={},a=e.filter(hk),i=e.filter(d=>d.stackId==null),l=a.reduce((d,f)=>(d[f.stackId]||(d[f.stackId]=[]),d[f.stackId].push(f),d),n),o=Object.entries(l).map(d=>{var[f,p]=d,y=p.map(N=>N.dataKey),g=lI(t,r,p[0].barSize);return{stackId:f,dataKeys:y,barSize:g}}),c=i.map(d=>{var f=[d.dataKey].filter(y=>y!=null),p=lI(t,r,d.barSize);return{stackId:void 0,dataKeys:f,barSize:p}});return[...o,...c]},exe=jt([Yme,Lce,Qme],Jme),txe=(e,t,r,n,a)=>{var i,l,o=rv(e,t,r,n,a);if(o!=null){var c=fa(e),d=sz(e),{maxBarSize:f}=o,p=Cs(f)?d:f,y,g;return c==="horizontal"?(y=$u(e,"xAxis",t,n),g=Hu(e,"xAxis",t,n)):(y=$u(e,"yAxis",r,n),g=Hu(e,"yAxis",r,n)),(i=(l=Dm(y,g,!0))!==null&&l!==void 0?l:p)!==null&&i!==void 0?i:0}},Fq=(e,t,r,n)=>{var a=fa(e),i,l;return a==="horizontal"?(i=$u(e,"xAxis",t,n),l=Hu(e,"xAxis",t,n)):(i=$u(e,"yAxis",r,n),l=Hu(e,"yAxis",r,n)),Dm(i,l)};function rxe(e,t,r,n,a){var i=n.length;if(!(i<1)){var l=no(e,r,0,!0),o,c=[];if(Bi(n[0].barSize)){var d=!1,f=r/i,p=n.reduce((S,O)=>S+(O.barSize||0),0);p+=(i-1)*l,p>=r&&(p-=(i-1)*l,l=0),p>=r&&f>0&&(d=!0,f*=.9,p=i*f);var y=(r-p)/2>>0,g={offset:y-l,size:0};o=n.reduce((S,O)=>{var E,D={stackId:O.stackId,dataKeys:O.dataKeys,position:{offset:g.offset+g.size+l,size:d?f:(E=O.barSize)!==null&&E!==void 0?E:0}},q=[...S,D];return g=q[q.length-1].position,q},c)}else{var N=no(t,r,0,!0);r-2*N-(i-1)*l<=0&&(l=0);var w=(r-2*N-(i-1)*l)/i;w>1&&(w>>=0);var k=Bi(a)?Math.min(w,a):w;o=n.reduce((S,O,E)=>[...S,{stackId:O.stackId,dataKeys:O.dataKeys,position:{offset:N+(w+l)*E+(w-k)/2,size:k}}],c)}return o}}var nxe=(e,t,r,n,a,i,l)=>{var o=Cs(l)?t:l,c=rxe(r,n,a!==i?a:i,e,o);return a!==i&&c!=null&&(c=c.map(d=>E2(E2({},d),{},{position:E2(E2({},d.position),{},{offset:d.position.offset-a/2})}))),c},axe=jt([exe,sz,Mce,iz,txe,Fq,Gme],nxe),sxe=(e,t,r,n)=>$u(e,"xAxis",t,n),ixe=(e,t,r,n)=>$u(e,"yAxis",r,n),lxe=(e,t,r,n)=>Hu(e,"xAxis",t,n),oxe=(e,t,r,n)=>Hu(e,"yAxis",r,n),cxe=jt([axe,rv],(e,t)=>{if(!(e==null||t==null)){var r=e.find(n=>n.stackId===t.stackId&&t.dataKey!=null&&n.dataKeys.includes(t.dataKey));if(r!=null)return r.position}}),dxe=(e,t)=>{var r=uk(t);if(!(!e||r==null||t==null)){var{stackId:n}=t;if(n!=null){var a=e[n];if(a){var{stackedData:i}=a;if(i)return i.find(l=>l.key===r)}}}},uxe=jt([Zme,rv],dxe),hxe=jt([Zi,Y6,sxe,ixe,lxe,oxe,cxe,fa,Wb,Fq,uxe,rv,Xme],(e,t,r,n,a,i,l,o,c,d,f,p,y)=>{var{chartData:g,dataStartIndex:N,dataEndIndex:w}=c;if(!(p==null||l==null||t==null||o!=="horizontal"&&o!=="vertical"||r==null||n==null||a==null||i==null||d==null)){var{data:k}=p,S;if(k!=null&&k.length>0?S=k:S=g==null?void 0:g.slice(N,w+1),S!=null)return Bme({layout:o,barSettings:p,pos:l,parentViewBox:t,bandSize:d,xAxis:r,yAxis:n,xAxisTicks:a,yAxisTicks:i,stackedData:f,displayedData:S,offset:e,cells:y})}}),Bq=e=>{var{chartData:t}=e,r=Us(),n=Ml();return T.useEffect(()=>n?()=>{}:(r(bP(t)),()=>{r(bP(void 0))}),[t,r,n]),null},oI={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},Uq=Mc({name:"brush",initialState:oI,reducers:{setBrushSettings(e,t){return t.payload==null?oI:t.payload}}}),{setBrushSettings:zTe}=Uq.actions,fxe=Uq.reducer;function mxe(e,t,r){return(t=xxe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xxe(e){var t=pxe(e,"string");return typeof t=="symbol"?t:t+""}function pxe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class NC{static create(t){return new NC(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:r,position:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(n)switch(n){case"start":return this.scale(t);case"middle":{var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+a}case"end":{var i=this.bandwidth?this.bandwidth():0;return this.scale(t)+i}default:return this.scale(t)}if(r){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+l}return this.scale(t)}}isInRange(t){var r=this.range(),n=r[0],a=r[r.length-1];return n<=a?t>=n&&t<=a:t>=a&&t<=n}}mxe(NC,"EPS",1e-4);function gxe(e){return(e%180+180)%180}var bxe=function(t){var{width:r,height:n}=t,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=gxe(a),l=i*Math.PI/180,o=Math.atan(n/r),c=l>o&&l<Math.PI-o?n/Math.sin(l):r/Math.cos(l);return Math.abs(c)},vxe={dots:[],areas:[],lines:[]},zq=Mc({name:"referenceElements",initialState:vxe,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var r=M0(e).dots.findIndex(n=>n===t.payload);r!==-1&&e.dots.splice(r,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var r=M0(e).areas.findIndex(n=>n===t.payload);r!==-1&&e.areas.splice(r,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var r=M0(e).lines.findIndex(n=>n===t.payload);r!==-1&&e.lines.splice(r,1)}}}),{addDot:qTe,removeDot:HTe,addArea:$Te,removeArea:VTe,addLine:WTe,removeLine:KTe}=zq.actions,yxe=zq.reducer,wxe=T.createContext(void 0),kxe=e=>{var{children:t}=e,[r]=T.useState("".concat(Yg("recharts"),"-clip")),n=Ck();if(n==null)return null;var{x:a,y:i,width:l,height:o}=n;return T.createElement(wxe.Provider,{value:r},T.createElement("defs",null,T.createElement("clipPath",{id:r},T.createElement("rect",{x:a,y:i,height:o,width:l}))),t)};function W1(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function qq(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var n=[],a=0;a<e.length;a+=t)n.push(e[a]);return n}function Nxe(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return bxe(n,r)}function _xe(e,t,r){var n=r==="width",{x:a,y:i,width:l,height:o}=e;return t===1?{start:n?a:i,end:n?a+l:i+o}:{start:n?a+l:i+o,end:n?a:i}}function tw(e,t,r,n,a){if(e*t<e*n||e*t>e*a)return!1;var i=r();return e*(t-e*i/2-n)>=0&&e*(t+e*i/2-a)<=0}function Sxe(e,t){return qq(e,t+1)}function jxe(e,t,r,n,a){for(var i=(n||[]).slice(),{start:l,end:o}=t,c=0,d=1,f=l,p=function(){var N=n==null?void 0:n[c];if(N===void 0)return{v:qq(n,d)};var w=c,k,S=()=>(k===void 0&&(k=r(N,w)),k),O=N.coordinate,E=c===0||tw(e,O,S,f,o);E||(c=0,f=l,d+=1),E&&(f=O+e*(S()/2+a),c+=d)},y;d<=i.length;)if(y=p(),y)return y.v;return[]}function cI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Zl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?cI(Object(r),!0).forEach(function(n){Cxe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Cxe(e,t,r){return(t=Axe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Axe(e){var t=Exe(e,"string");return typeof t=="symbol"?t:t+""}function Exe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Txe(e,t,r,n,a){for(var i=(n||[]).slice(),l=i.length,{start:o}=t,{end:c}=t,d=function(y){var g=i[y],N,w=()=>(N===void 0&&(N=r(g,y)),N);if(y===l-1){var k=e*(g.coordinate+e*w()/2-c);i[y]=g=Zl(Zl({},g),{},{tickCoord:k>0?g.coordinate-k*e:g.coordinate})}else i[y]=g=Zl(Zl({},g),{},{tickCoord:g.coordinate});var S=tw(e,g.tickCoord,w,o,c);S&&(c=g.tickCoord-e*(w()/2+a),i[y]=Zl(Zl({},g),{},{isShow:!0}))},f=l-1;f>=0;f--)d(f);return i}function Oxe(e,t,r,n,a,i){var l=(n||[]).slice(),o=l.length,{start:c,end:d}=t;if(i){var f=n[o-1],p=r(f,o-1),y=e*(f.coordinate+e*p/2-d);l[o-1]=f=Zl(Zl({},f),{},{tickCoord:y>0?f.coordinate-y*e:f.coordinate});var g=tw(e,f.tickCoord,()=>p,c,d);g&&(d=f.tickCoord-e*(p/2+a),l[o-1]=Zl(Zl({},f),{},{isShow:!0}))}for(var N=i?o-1:o,w=function(O){var E=l[O],D,q=()=>(D===void 0&&(D=r(E,O)),D);if(O===0){var W=e*(E.coordinate-e*q()/2-c);l[O]=E=Zl(Zl({},E),{},{tickCoord:W<0?E.coordinate-W*e:E.coordinate})}else l[O]=E=Zl(Zl({},E),{},{tickCoord:E.coordinate});var R=tw(e,E.tickCoord,q,c,d);R&&(c=E.tickCoord+e*(q()/2+a),l[O]=Zl(Zl({},E),{},{isShow:!0}))},k=0;k<N;k++)w(k);return l}function _C(e,t,r){var{tick:n,ticks:a,viewBox:i,minTickGap:l,orientation:o,interval:c,tickFormatter:d,unit:f,angle:p}=e;if(!a||!a.length||!n)return[];if(Zr(c)||eh.isSsr){var y;return(y=Sxe(a,Zr(c)?c:0))!==null&&y!==void 0?y:[]}var g=[],N=o==="top"||o==="bottom"?"width":"height",w=f&&N==="width"?Cg(f,{fontSize:t,letterSpacing:r}):{width:0,height:0},k=(E,D)=>{var q=typeof d=="function"?d(E.value,D):E.value;return N==="width"?Nxe(Cg(q,{fontSize:t,letterSpacing:r}),w,p):Cg(q,{fontSize:t,letterSpacing:r})[N]},S=a.length>=2?vl(a[1].coordinate-a[0].coordinate):1,O=_xe(i,S,N);return c==="equidistantPreserveStart"?jxe(S,O,k,a,l):(c==="preserveStart"||c==="preserveStartEnd"?g=Oxe(S,O,k,a,l,c==="preserveStartEnd"):g=Txe(S,O,k,a,l),g.filter(E=>E.isShow))}var Pxe=e=>{var{ticks:t,label:r,labelGapWithTick:n=5,tickSize:a=0,tickMargin:i=0}=e,l=0;if(t){Array.from(t).forEach(f=>{if(f){var p=f.getBoundingClientRect();p.width>l&&(l=p.width)}});var o=r?r.getBoundingClientRect().width:0,c=a+i,d=l+c+o+(r?n:0);return Math.round(d)}return 0},Ixe=["axisLine","width","height","className","hide","ticks"],Dxe=["viewBox"],Mxe=["viewBox"];function vS(e,t){if(e==null)return{};var r,n,a=Lxe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Lxe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Fm(){return Fm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Fm.apply(null,arguments)}function dI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ki(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?dI(Object(r),!0).forEach(function(n){Rxe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Rxe(e,t,r){return(t=Fxe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Fxe(e){var t=Bxe(e,"string");return typeof t=="symbol"?t:t+""}function Bxe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var SC={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"};function Uxe(e){var{x:t,y:r,width:n,height:a,orientation:i,mirror:l,axisLine:o,otherSvgProps:c}=e;if(!o)return null;var d=Ki(Ki(Ki({},c),Ao(o)),{},{fill:"none"});if(i==="top"||i==="bottom"){var f=+(i==="top"&&!l||i==="bottom"&&l);d=Ki(Ki({},d),{},{x1:t,y1:r+f*a,x2:t+n,y2:r+f*a})}else{var p=+(i==="left"&&!l||i==="right"&&l);d=Ki(Ki({},d),{},{x1:t+p*n,y1:r,x2:t+p*n,y2:r+a})}return T.createElement("line",Fm({},d,{className:Zn("recharts-cartesian-axis-line",Om(o,"className"))}))}function zxe(e,t,r,n,a,i,l,o,c){var d,f,p,y,g,N,w=o?-1:1,k=e.tickSize||l,S=Zr(e.tickCoord)?e.tickCoord:e.coordinate;switch(i){case"top":d=f=e.coordinate,y=r+ +!o*a,p=y-w*k,N=p-w*c,g=S;break;case"left":p=y=e.coordinate,f=t+ +!o*n,d=f-w*k,g=d-w*c,N=S;break;case"right":p=y=e.coordinate,f=t+ +o*n,d=f+w*k,g=d+w*c,N=S;break;default:d=f=e.coordinate,y=r+ +o*a,p=y+w*k,N=p+w*c,g=S;break}return{line:{x1:d,y1:p,x2:f,y2:y},tick:{x:g,y:N}}}function qxe(e,t){switch(e){case"left":return t?"start":"end";case"right":return t?"end":"start";default:return"middle"}}function Hxe(e,t){switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}function $xe(e){var{option:t,tickProps:r,value:n}=e,a,i=Zn(r.className,"recharts-cartesian-axis-tick-value");if(T.isValidElement(t))a=T.cloneElement(t,Ki(Ki({},r),{},{className:i}));else if(typeof t=="function")a=t(Ki(Ki({},r),{},{className:i}));else{var l="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(l=Zn(l,t==null?void 0:t.className)),a=T.createElement(yk,Fm({},r,{className:l}),n)}return a}function Vxe(e){var{ticks:t=[],tick:r,tickLine:n,stroke:a,tickFormatter:i,unit:l,padding:o,tickTextProps:c,orientation:d,mirror:f,x:p,y,width:g,height:N,tickSize:w,tickMargin:k,fontSize:S,letterSpacing:O,getTicksConfig:E,events:D}=e,q=_C(Ki(Ki({},E),{},{ticks:t}),S,O),W=qxe(d,f),R=Hxe(d,f),U=Ao(E),z=Tm(r),Z={};typeof n=="object"&&(Z=n);var H=Ki(Ki({},U),{},{fill:"none"},Z),K=q.map((J,ae)=>{var{line:se,tick:ue}=zxe(J,p,y,g,N,d,w,f,k),fe=Ki(Ki(Ki(Ki({textAnchor:W,verticalAnchor:R},U),{},{stroke:"none",fill:a},z),ue),{},{index:ae,payload:J,visibleTicksCount:q.length,tickFormatter:i,padding:o},c);return T.createElement(ci,Fm({className:"recharts-cartesian-axis-tick",key:"tick-".concat(J.value,"-").concat(J.coordinate,"-").concat(J.tickCoord)},Rb(D,J,ae)),n&&T.createElement("line",Fm({},H,se,{className:Zn("recharts-cartesian-axis-tick-line",Om(n,"className"))})),r&&T.createElement($xe,{option:r,tickProps:fe,value:"".concat(typeof i=="function"?i(J.value,ae):J.value).concat(l||"")}))});return K.length>0?T.createElement("g",{className:"recharts-cartesian-axis-ticks"},K):null}var Wxe=T.forwardRef((e,t)=>{var{axisLine:r,width:n,height:a,className:i,hide:l,ticks:o}=e,c=vS(e,Ixe),[d,f]=T.useState(""),[p,y]=T.useState(""),g=T.useRef(null);T.useImperativeHandle(t,()=>({getCalculatedWidth:()=>{var w;return Pxe({ticks:g.current,label:(w=e.labelRef)===null||w===void 0?void 0:w.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var N=T.useCallback(w=>{if(w){var k=w.getElementsByClassName("recharts-cartesian-axis-tick-value");g.current=k;var S=k[0];if(S){var O=window.getComputedStyle(S),E=O.fontSize,D=O.letterSpacing;(E!==d||D!==p)&&(f(E),y(D))}}},[d,p]);return l||n!=null&&n<=0||a!=null&&a<=0?null:T.createElement(ci,{className:Zn("recharts-cartesian-axis",i),ref:N},T.createElement(Uxe,{x:e.x,y:e.y,width:n,height:a,orientation:e.orientation,mirror:e.mirror,axisLine:r,otherSvgProps:Ao(e)}),T.createElement(Vxe,{ticks:o,tick:e.tick,tickLine:e.tickLine,stroke:e.stroke,tickFormatter:e.tickFormatter,unit:e.unit,padding:e.padding,tickTextProps:e.tickTextProps,orientation:e.orientation,mirror:e.mirror,x:e.x,y:e.y,width:e.width,height:e.height,tickSize:e.tickSize,tickMargin:e.tickMargin,fontSize:d,letterSpacing:p,getTicksConfig:e,events:c}),T.createElement(X0e,{x:e.x,y:e.y,width:e.width,height:e.height},T.createElement(she,{label:e.label,labelRef:e.labelRef}),e.children))}),Kxe=T.memo(Wxe,(e,t)=>{var{viewBox:r}=e,n=vS(e,Dxe),{viewBox:a}=t,i=vS(t,Mxe);return W1(r,a)&&W1(n,i)}),jC=T.forwardRef((e,t)=>{var r=Qi(e,SC);return T.createElement(Kxe,Fm({},r,{ref:t}))});jC.displayName="CartesianAxis";var Gxe=["x1","y1","x2","y2","key"],Xxe=["offset"],Yxe=["xAxisId","yAxisId"],Zxe=["xAxisId","yAxisId"];function uI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function eo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?uI(Object(r),!0).forEach(function(n){Qxe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Qxe(e,t,r){return(t=Jxe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Jxe(e){var t=e1e(e,"string");return typeof t=="symbol"?t:t+""}function e1e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function tm(){return tm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},tm.apply(null,arguments)}function rw(e,t){if(e==null)return{};var r,n,a=t1e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function t1e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var r1e=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:r,x:n,y:a,width:i,height:l,ry:o}=e;return T.createElement("rect",{x:n,y:a,ry:o,width:i,height:l,stroke:"none",fill:t,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function Hq(e,t){var r;if(T.isValidElement(e))r=T.cloneElement(e,t);else if(typeof e=="function")r=e(t);else{var{x1:n,y1:a,x2:i,y2:l,key:o}=t,c=rw(t,Gxe),d=Ao(c),{offset:f}=d,p=rw(d,Xxe);r=T.createElement("line",tm({},p,{x1:n,y1:a,x2:i,y2:l,fill:"none",key:o}))}return r}function n1e(e){var{x:t,width:r,horizontal:n=!0,horizontalPoints:a}=e;if(!n||!a||!a.length)return null;var{xAxisId:i,yAxisId:l}=e,o=rw(e,Yxe),c=a.map((d,f)=>{var p=eo(eo({},o),{},{x1:t,y1:d,x2:t+r,y2:d,key:"line-".concat(f),index:f});return Hq(n,p)});return T.createElement("g",{className:"recharts-cartesian-grid-horizontal"},c)}function a1e(e){var{y:t,height:r,vertical:n=!0,verticalPoints:a}=e;if(!n||!a||!a.length)return null;var{xAxisId:i,yAxisId:l}=e,o=rw(e,Zxe),c=a.map((d,f)=>{var p=eo(eo({},o),{},{x1:d,y1:t,x2:d,y2:t+r,key:"line-".concat(f),index:f});return Hq(n,p)});return T.createElement("g",{className:"recharts-cartesian-grid-vertical"},c)}function s1e(e){var{horizontalFill:t,fillOpacity:r,x:n,y:a,width:i,height:l,horizontalPoints:o,horizontal:c=!0}=e;if(!c||!t||!t.length)return null;var d=o.map(p=>Math.round(p+a-a)).sort((p,y)=>p-y);a!==d[0]&&d.unshift(0);var f=d.map((p,y)=>{var g=!d[y+1],N=g?a+l-p:d[y+1]-p;if(N<=0)return null;var w=y%t.length;return T.createElement("rect",{key:"react-".concat(y),y:p,x:n,height:N,width:i,stroke:"none",fill:t[w],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return T.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},f)}function i1e(e){var{vertical:t=!0,verticalFill:r,fillOpacity:n,x:a,y:i,width:l,height:o,verticalPoints:c}=e;if(!t||!r||!r.length)return null;var d=c.map(p=>Math.round(p+a-a)).sort((p,y)=>p-y);a!==d[0]&&d.unshift(0);var f=d.map((p,y)=>{var g=!d[y+1],N=g?a+l-p:d[y+1]-p;if(N<=0)return null;var w=y%r.length;return T.createElement("rect",{key:"react-".concat(y),x:p,y:i,width:N,height:o,stroke:"none",fill:r[w],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return T.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},f)}var l1e=(e,t)=>{var{xAxis:r,width:n,height:a,offset:i}=e;return zB(_C(eo(eo(eo({},SC),r),{},{ticks:qB(r),viewBox:{x:0,y:0,width:n,height:a}})),i.left,i.left+i.width,t)},o1e=(e,t)=>{var{yAxis:r,width:n,height:a,offset:i}=e;return zB(_C(eo(eo(eo({},SC),r),{},{ticks:qB(r),viewBox:{x:0,y:0,width:n,height:a}})),i.top,i.top+i.height,t)},c1e={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0};function Du(e){var t=Q6(),r=J6(),n=YB(),a=eo(eo({},Qi(e,c1e)),{},{x:Zr(e.x)?e.x:n.left,y:Zr(e.y)?e.y:n.top,width:Zr(e.width)?e.width:n.width,height:Zr(e.height)?e.height:n.height}),{xAxisId:i,yAxisId:l,x:o,y:c,width:d,height:f,syncWithTicks:p,horizontalValues:y,verticalValues:g}=a,N=Ml(),w=Jr(z=>cP(z,"xAxis",i,N)),k=Jr(z=>cP(z,"yAxis",l,N));if(!Zr(d)||d<=0||!Zr(f)||f<=0||!Zr(o)||o!==+o||!Zr(c)||c!==+c)return null;var S=a.verticalCoordinatesGenerator||l1e,O=a.horizontalCoordinatesGenerator||o1e,{horizontalPoints:E,verticalPoints:D}=a;if((!E||!E.length)&&typeof O=="function"){var q=y&&y.length,W=O({yAxis:k?eo(eo({},k),{},{ticks:q?y:k.ticks}):void 0,width:t,height:r,offset:n},q?!0:p);Dy(Array.isArray(W),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof W,"]")),Array.isArray(W)&&(E=W)}if((!D||!D.length)&&typeof S=="function"){var R=g&&g.length,U=S({xAxis:w?eo(eo({},w),{},{ticks:R?g:w.ticks}):void 0,width:t,height:r,offset:n},R?!0:p);Dy(Array.isArray(U),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof U,"]")),Array.isArray(U)&&(D=U)}return T.createElement("g",{className:"recharts-cartesian-grid"},T.createElement(r1e,{fill:a.fill,fillOpacity:a.fillOpacity,x:a.x,y:a.y,width:a.width,height:a.height,ry:a.ry}),T.createElement(s1e,tm({},a,{horizontalPoints:E})),T.createElement(i1e,tm({},a,{verticalPoints:D})),T.createElement(n1e,tm({},a,{offset:n,horizontalPoints:E,xAxis:w,yAxis:k})),T.createElement(a1e,tm({},a,{offset:n,verticalPoints:D,xAxis:w,yAxis:k})))}Du.displayName="CartesianGrid";var $q=(e,t,r,n)=>$u(e,"xAxis",t,n),Vq=(e,t,r,n)=>Hu(e,"xAxis",t,n),Wq=(e,t,r,n)=>$u(e,"yAxis",r,n),Kq=(e,t,r,n)=>Hu(e,"yAxis",r,n),d1e=jt([fa,$q,Wq,Vq,Kq],(e,t,r,n,a)=>Wu(e,"xAxis")?Dm(t,n,!1):Dm(r,a,!1)),u1e=(e,t,r,n,a)=>a;function h1e(e){return e.type==="line"}var f1e=jt([Yb,u1e],(e,t)=>e.filter(h1e).find(r=>r.id===t)),m1e=jt([fa,$q,Wq,Vq,Kq,f1e,d1e,Wb],(e,t,r,n,a,i,l,o)=>{var{chartData:c,dataStartIndex:d,dataEndIndex:f}=o;if(!(i==null||t==null||r==null||n==null||a==null||n.length===0||a.length===0||l==null)){var{dataKey:p,data:y}=i,g;if(y!=null&&y.length>0?g=y:g=c==null?void 0:c.slice(d,f+1),g!=null)return L1e({layout:e,xAxis:t,yAxis:r,xAxisTicks:n,yAxisTicks:a,dataKey:p,bandSize:l,displayedData:g})}});function Gq(e){var t=Tm(e),r=3,n=2;if(t!=null){var{r:a,strokeWidth:i}=t,l=Number(a),o=Number(i);return(Number.isNaN(l)||l<0)&&(l=r),(Number.isNaN(o)||o<0)&&(o=n),{r:l,strokeWidth:o}}return{r,strokeWidth:n}}var x1e=["id"],p1e=["type","layout","connectNulls","needClip"],g1e=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function hI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function vc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?hI(Object(r),!0).forEach(function(n){b1e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function b1e(e,t,r){return(t=v1e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function v1e(e){var t=y1e(e,"string");return typeof t=="symbol"?t:t+""}function y1e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function CC(e,t){if(e==null)return{};var r,n,a=w1e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function w1e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Bm(){return Bm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Bm.apply(null,arguments)}var k1e=e=>{var{dataKey:t,name:r,stroke:n,legendType:a,hide:i}=e;return[{inactive:i,dataKey:t,type:a,color:n,value:xf(r,t),payload:e}]};function N1e(e){var{dataKey:t,data:r,stroke:n,strokeWidth:a,fill:i,name:l,hide:o,unit:c}=e;return{dataDefinedOnItem:r,positions:void 0,settings:{stroke:n,strokeWidth:a,fill:i,dataKey:t,nameKey:void 0,name:xf(l,t),hide:o,type:e.tooltipType,color:e.stroke,unit:c}}}var Xq=(e,t)=>"".concat(t,"px ").concat(e-t,"px");function _1e(e,t){for(var r=e.length%2!==0?[...e,0]:e,n=[],a=0;a<t;++a)n=[...n,...r];return n}var S1e=(e,t,r)=>{var n=r.reduce((p,y)=>p+y);if(!n)return Xq(t,e);for(var a=Math.floor(e/n),i=e%n,l=t-e,o=[],c=0,d=0;c<r.length;d+=r[c],++c)if(d+r[c]>i){o=[...r.slice(0,c),i-d];break}var f=o.length%2===0?[0,l]:[l];return[..._1e(r,a),...o,...f].map(p=>"".concat(p,"px")).join(", ")};function j1e(e,t){var r;if(T.isValidElement(e))r=T.cloneElement(e,t);else if(typeof e=="function")r=e(t);else{var n=Zn("recharts-line-dot",typeof e!="boolean"?e.className:"");r=T.createElement(dC,Bm({},t,{className:n}))}return r}function C1e(e,t){return e==null?!1:t?!0:e.length===1}function A1e(e){var{clipPathId:t,points:r,props:n}=e,{dot:a,dataKey:i,needClip:l}=n;if(!C1e(r,a))return null;var{id:o}=n,c=CC(n,x1e),d=_k(a),f=Ao(c),p=TF(a),y=r.map((N,w)=>{var k=vc(vc(vc({key:"dot-".concat(w),r:3},f),p),{},{index:w,cx:N.x,cy:N.y,dataKey:i,value:N.value,payload:N.payload,points:r});return j1e(a,k)}),g={clipPath:l?"url(#clipPath-".concat(d?"":"dots-").concat(t,")"):void 0};return T.createElement(ci,Bm({className:"recharts-line-dots",key:"dots"},g),y)}function E1e(e){var{showLabels:t,children:r,points:n}=e,a=T.useMemo(()=>n==null?void 0:n.map(i=>{var l={x:i.x,y:i.y,width:0,height:0};return vc(vc({},l),{},{value:i.value,payload:i.payload,viewBox:l,parentViewBox:void 0,fill:void 0})}),[n]);return T.createElement(cC,{value:t?a:null},r)}function fI(e){var{clipPathId:t,pathRef:r,points:n,strokeDasharray:a,props:i}=e,{type:l,layout:o,connectNulls:c,needClip:d}=i,f=CC(i,p1e),p=vc(vc({},Eo(f)),{},{fill:"none",className:"recharts-line-curve",clipPath:d?"url(#clipPath-".concat(t,")"):void 0,points:n,type:l,layout:o,connectNulls:c,strokeDasharray:a??i.strokeDasharray});return T.createElement(T.Fragment,null,(n==null?void 0:n.length)>1&&T.createElement(m1,Bm({},p,{pathRef:r})),T.createElement(A1e,{points:n,clipPathId:t,props:i}))}function T1e(e){try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch{return 0}}function O1e(e){var{clipPathId:t,props:r,pathRef:n,previousPointsRef:a,longestAnimatedLengthRef:i}=e,{points:l,strokeDasharray:o,isAnimationActive:c,animationBegin:d,animationDuration:f,animationEasing:p,animateNewValues:y,width:g,height:N,onAnimationEnd:w,onAnimationStart:k}=r,S=a.current,O=np(r,"recharts-line-"),[E,D]=T.useState(!1),q=!E,W=T.useCallback(()=>{typeof w=="function"&&w(),D(!1)},[w]),R=T.useCallback(()=>{typeof k=="function"&&k(),D(!0)},[k]),U=T1e(n.current),z=i.current;return T.createElement(E1e,{points:l,showLabels:q},r.children,T.createElement(rp,{animationId:O,begin:d,duration:f,isActive:c,easing:p,onAnimationEnd:W,onAnimationStart:R,key:O},Z=>{var H=rs(z,U+z,Z),K=Math.min(H,U),J;if(c)if(o){var ae="".concat(o).split(/[,\s]+/gim).map(fe=>parseFloat(fe));J=S1e(K,U,ae)}else J=Xq(U,K);else J=o==null?void 0:String(o);if(S){var se=S.length/l.length,ue=Z===1?l:l.map((fe,ke)=>{var _e=Math.floor(ke*se);if(S[_e]){var Le=S[_e];return vc(vc({},fe),{},{x:rs(Le.x,fe.x,Z),y:rs(Le.y,fe.y,Z)})}return y?vc(vc({},fe),{},{x:rs(g*2,fe.x,Z),y:rs(N/2,fe.y,Z)}):vc(vc({},fe),{},{x:fe.x,y:fe.y})});return a.current=ue,T.createElement(fI,{props:r,points:ue,clipPathId:t,pathRef:n,strokeDasharray:J})}return Z>0&&U>0&&(a.current=l,i.current=K),T.createElement(fI,{props:r,points:l,clipPathId:t,pathRef:n,strokeDasharray:J})}),T.createElement(wk,{label:r.label}))}function P1e(e){var{clipPathId:t,props:r}=e,n=T.useRef(null),a=T.useRef(0),i=T.useRef(null);return T.createElement(O1e,{props:r,clipPathId:t,previousPointsRef:n,longestAnimatedLengthRef:a,pathRef:i})}var I1e=(e,t)=>({x:e.x,y:e.y,value:e.value,errorVal:ns(e.payload,t)});class D1e extends T.Component{render(){var{hide:t,dot:r,points:n,className:a,xAxisId:i,yAxisId:l,top:o,left:c,width:d,height:f,id:p,needClip:y}=this.props;if(t)return null;var g=Zn("recharts-line",a),N=p,{r:w,strokeWidth:k}=Gq(r),S=_k(r),O=w*2+k;return T.createElement(T.Fragment,null,T.createElement(ci,{className:g},y&&T.createElement("defs",null,T.createElement(kC,{clipPathId:N,xAxisId:i,yAxisId:l}),!S&&T.createElement("clipPath",{id:"clipPath-dots-".concat(N)},T.createElement("rect",{x:c-O/2,y:o-O/2,width:d+O,height:f+O}))),T.createElement(Lq,{xAxisId:i,yAxisId:l,data:n,dataPointFormatter:I1e,errorBarOffset:0},T.createElement(P1e,{props:this.props,clipPathId:N}))),T.createElement(gS,{activeDot:this.props.activeDot,points:n,mainColor:this.props.stroke,itemDataKey:this.props.dataKey}))}}var Yq={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:!eh.isSsr,label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0};function M1e(e){var t=Qi(e,Yq),{activeDot:r,animateNewValues:n,animationBegin:a,animationDuration:i,animationEasing:l,connectNulls:o,dot:c,hide:d,isAnimationActive:f,label:p,legendType:y,xAxisId:g,yAxisId:N,id:w}=t,k=CC(t,g1e),{needClip:S}=Ak(g,N),O=Ck(),E=zb(),D=Ml(),q=Jr(Z=>m1e(Z,g,N,D,w));if(E!=="horizontal"&&E!=="vertical"||q==null||O==null)return null;var{height:W,width:R,x:U,y:z}=O;return T.createElement(D1e,Bm({},k,{id:w,connectNulls:o,dot:c,activeDot:r,animateNewValues:n,animationBegin:a,animationDuration:i,animationEasing:l,isAnimationActive:f,hide:d,label:p,legendType:y,xAxisId:g,yAxisId:N,points:q,layout:E,height:W,width:R,left:U,top:z,needClip:S}))}function L1e(e){var{layout:t,xAxis:r,yAxis:n,xAxisTicks:a,yAxisTicks:i,dataKey:l,bandSize:o,displayedData:c}=e;return c.map((d,f)=>{var p=ns(d,l);if(t==="horizontal"){var y=Iy({axis:r,ticks:a,bandSize:o,entry:d,index:f}),g=Cs(p)?null:n.scale(p);return{x:y,y:g,value:p,payload:d}}var N=Cs(p)?null:r.scale(p),w=Iy({axis:n,ticks:i,bandSize:o,entry:d,index:f});return N==null||w==null?null:{x:N,y:w,value:p,payload:d}}).filter(Boolean)}function R1e(e){var t=Qi(e,Yq),r=Ml();return T.createElement(jk,{id:t.id,type:"line"},n=>T.createElement(T.Fragment,null,T.createElement(gC,{legendPayload:k1e(t)}),T.createElement(Sk,{fn:N1e,args:t}),T.createElement(bC,{type:"line",id:n,data:t.data,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,hide:t.hide,isPanorama:r}),T.createElement(M1e,Bm({},t,{id:n}))))}var nf=T.memo(R1e);nf.displayName="Line";var Zq=(e,t,r,n)=>$u(e,"xAxis",t,n),Qq=(e,t,r,n)=>Hu(e,"xAxis",t,n),Jq=(e,t,r,n)=>$u(e,"yAxis",r,n),eH=(e,t,r,n)=>Hu(e,"yAxis",r,n),F1e=jt([fa,Zq,Jq,Qq,eH],(e,t,r,n,a)=>Wu(e,"xAxis")?Dm(t,n,!1):Dm(r,a,!1)),B1e=(e,t,r,n,a)=>a,tH=jt([Yb,B1e],(e,t)=>e.filter(r=>r.type==="area").find(r=>r.id===t)),U1e=(e,t,r,n,a)=>{var i,l=tH(e,t,r,n,a);if(l!=null){var o=fa(e),c=Wu(o,"xAxis"),d;if(c?d=ib(e,"yAxis",r,n):d=ib(e,"xAxis",t,n),d!=null){var{stackId:f}=l,p=uk(l);if(!(f==null||p==null)){var y=(i=d[f])===null||i===void 0?void 0:i.stackedData;return y==null?void 0:y.find(g=>g.key===p)}}}},z1e=jt([fa,Zq,Jq,Qq,eH,U1e,Wb,F1e,tH],(e,t,r,n,a,i,l,o,c)=>{var{chartData:d,dataStartIndex:f,dataEndIndex:p}=l;if(!(c==null||e!=="horizontal"&&e!=="vertical"||t==null||r==null||n==null||a==null||n.length===0||a.length===0||o==null)){var{data:y}=c,g;if(y&&y.length>0?g=y:g=d==null?void 0:d.slice(f,p+1),g!=null){var N=void 0;return ope({layout:e,xAxis:t,yAxis:r,xAxisTicks:n,yAxisTicks:a,dataStartIndex:f,areaSettings:c,stackedData:i,displayedData:g,chartBaseValue:N,bandSize:o})}}}),q1e=["id"],H1e=["activeDot","animationBegin","animationDuration","animationEasing","connectNulls","dot","fill","fillOpacity","hide","isAnimationActive","legendType","stroke","xAxisId","yAxisId"];function rH(e,t){if(e==null)return{};var r,n,a=$1e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function $1e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function mI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function T0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?mI(Object(r),!0).forEach(function(n){V1e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function V1e(e,t,r){return(t=W1e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function W1e(e){var t=K1e(e,"string");return typeof t=="symbol"?t:t+""}function K1e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function R0(){return R0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},R0.apply(null,arguments)}function nw(e,t){return e&&e!=="none"?e:t}var G1e=e=>{var{dataKey:t,name:r,stroke:n,fill:a,legendType:i,hide:l}=e;return[{inactive:l,dataKey:t,type:i,color:nw(n,a),value:xf(r,t),payload:e}]};function X1e(e){var{dataKey:t,data:r,stroke:n,strokeWidth:a,fill:i,name:l,hide:o,unit:c}=e;return{dataDefinedOnItem:r,positions:void 0,settings:{stroke:n,strokeWidth:a,fill:i,dataKey:t,nameKey:void 0,name:xf(l,t),hide:o,type:e.tooltipType,color:nw(n,i),unit:c}}}var Y1e=(e,t)=>{var r;if(T.isValidElement(e))r=T.cloneElement(e,t);else if(typeof e=="function")r=e(t);else{var n=Zn("recharts-area-dot",typeof e!="boolean"?e.className:"");r=T.createElement(dC,R0({},t,{className:n}))}return r};function Z1e(e,t){return e==null?!1:t?!0:e.length===1}function Q1e(e){var{clipPathId:t,points:r,props:n}=e,{needClip:a,dot:i,dataKey:l}=n;if(!Z1e(r,i))return null;var o=_k(i),c=Ao(n),d=TF(i),f=r.map((y,g)=>{var N=T0(T0(T0({key:"dot-".concat(g),r:3},c),d),{},{index:g,cx:y.x,cy:y.y,dataKey:l,value:y.value,payload:y.payload,points:r});return Y1e(i,N)}),p={clipPath:a?"url(#clipPath-".concat(o?"":"dots-").concat(t,")"):void 0};return T.createElement(ci,R0({className:"recharts-area-dots"},p),f)}function J1e(e){var{showLabels:t,children:r,points:n}=e,a=n.map(i=>{var l={x:i.x,y:i.y,width:0,height:0};return T0(T0({},l),{},{value:i.value,payload:i.payload,parentViewBox:void 0,viewBox:l,fill:void 0})});return T.createElement(cC,{value:t?a:null},r)}function xI(e){var{points:t,baseLine:r,needClip:n,clipPathId:a,props:i}=e,{layout:l,type:o,stroke:c,connectNulls:d,isRange:f}=i,{id:p}=i,y=rH(i,q1e),g=Ao(y);return T.createElement(T.Fragment,null,(t==null?void 0:t.length)>1&&T.createElement(ci,{clipPath:n?"url(#clipPath-".concat(a,")"):void 0},T.createElement(m1,R0({},g,{id:p,points:t,connectNulls:d,type:o,baseLine:r,layout:l,stroke:"none",className:"recharts-area-area"})),c!=="none"&&T.createElement(m1,R0({},g,{className:"recharts-area-curve",layout:l,type:o,connectNulls:d,fill:"none",points:t})),c!=="none"&&f&&T.createElement(m1,R0({},g,{className:"recharts-area-curve",layout:l,type:o,connectNulls:d,fill:"none",points:r}))),T.createElement(Q1e,{points:t,props:y,clipPathId:a}))}function epe(e){var{alpha:t,baseLine:r,points:n,strokeWidth:a}=e,i=n[0].y,l=n[n.length-1].y;if(!Bi(i)||!Bi(l))return null;var o=t*Math.abs(i-l),c=Math.max(...n.map(d=>d.x||0));return Zr(r)?c=Math.max(r,c):r&&Array.isArray(r)&&r.length&&(c=Math.max(...r.map(d=>d.x||0),c)),Zr(c)?T.createElement("rect",{x:0,y:i<l?i:i-o,width:c+(a?parseInt("".concat(a),10):1),height:Math.floor(o)}):null}function tpe(e){var{alpha:t,baseLine:r,points:n,strokeWidth:a}=e,i=n[0].x,l=n[n.length-1].x;if(!Bi(i)||!Bi(l))return null;var o=t*Math.abs(i-l),c=Math.max(...n.map(d=>d.y||0));return Zr(r)?c=Math.max(r,c):r&&Array.isArray(r)&&r.length&&(c=Math.max(...r.map(d=>d.y||0),c)),Zr(c)?T.createElement("rect",{x:i<l?i:i-o,y:0,width:o,height:Math.floor(c+(a?parseInt("".concat(a),10):1))}):null}function rpe(e){var{alpha:t,layout:r,points:n,baseLine:a,strokeWidth:i}=e;return r==="vertical"?T.createElement(epe,{alpha:t,points:n,baseLine:a,strokeWidth:i}):T.createElement(tpe,{alpha:t,points:n,baseLine:a,strokeWidth:i})}function npe(e){var{needClip:t,clipPathId:r,props:n,previousPointsRef:a,previousBaselineRef:i}=e,{points:l,baseLine:o,isAnimationActive:c,animationBegin:d,animationDuration:f,animationEasing:p,onAnimationStart:y,onAnimationEnd:g}=n,N=np(n,"recharts-area-"),[w,k]=T.useState(!1),S=!w,O=T.useCallback(()=>{typeof g=="function"&&g(),k(!1)},[g]),E=T.useCallback(()=>{typeof y=="function"&&y(),k(!0)},[y]),D=a.current,q=i.current;return T.createElement(J1e,{showLabels:S,points:l},n.children,T.createElement(rp,{animationId:N,begin:d,duration:f,isActive:c,easing:p,onAnimationEnd:O,onAnimationStart:E,key:N},W=>{if(D){var R=D.length/l.length,U=W===1?l:l.map((Z,H)=>{var K=Math.floor(H*R);if(D[K]){var J=D[K];return T0(T0({},Z),{},{x:rs(J.x,Z.x,W),y:rs(J.y,Z.y,W)})}return Z}),z;return Zr(o)?z=rs(q,o,W):Cs(o)||Oc(o)?z=rs(q,0,W):z=o.map((Z,H)=>{var K=Math.floor(H*R);if(Array.isArray(q)&&q[K]){var J=q[K];return T0(T0({},Z),{},{x:rs(J.x,Z.x,W),y:rs(J.y,Z.y,W)})}return Z}),W>0&&(a.current=U,i.current=z),T.createElement(xI,{points:U,baseLine:z,needClip:t,clipPathId:r,props:n})}return W>0&&(a.current=l,i.current=o),T.createElement(ci,null,c&&T.createElement("defs",null,T.createElement("clipPath",{id:"animationClipPath-".concat(r)},T.createElement(rpe,{alpha:W,points:l,baseLine:o,layout:n.layout,strokeWidth:n.strokeWidth}))),T.createElement(ci,{clipPath:"url(#animationClipPath-".concat(r,")")},T.createElement(xI,{points:l,baseLine:o,needClip:t,clipPathId:r,props:n})))}),T.createElement(wk,{label:n.label}))}function ape(e){var{needClip:t,clipPathId:r,props:n}=e,a=T.useRef(null),i=T.useRef();return T.createElement(npe,{needClip:t,clipPathId:r,props:n,previousPointsRef:a,previousBaselineRef:i})}class spe extends T.PureComponent{render(){var{hide:t,dot:r,points:n,className:a,top:i,left:l,needClip:o,xAxisId:c,yAxisId:d,width:f,height:p,id:y,baseLine:g}=this.props;if(t)return null;var N=Zn("recharts-area",a),w=y,{r:k,strokeWidth:S}=Gq(r),O=_k(r),E=k*2+S;return T.createElement(T.Fragment,null,T.createElement(ci,{className:N},o&&T.createElement("defs",null,T.createElement(kC,{clipPathId:w,xAxisId:c,yAxisId:d}),!O&&T.createElement("clipPath",{id:"clipPath-dots-".concat(w)},T.createElement("rect",{x:l-E/2,y:i-E/2,width:f+E,height:p+E}))),T.createElement(ape,{needClip:o,clipPathId:w,props:this.props})),T.createElement(gS,{points:n,mainColor:nw(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot}),this.props.isRange&&Array.isArray(g)&&T.createElement(gS,{points:g,mainColor:nw(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot}))}}var nH={activeDot:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!1,fill:"#3182bd",fillOpacity:.6,hide:!1,isAnimationActive:!eh.isSsr,legendType:"line",stroke:"#3182bd",xAxisId:0,yAxisId:0};function ipe(e){var t,r=Qi(e,nH),{activeDot:n,animationBegin:a,animationDuration:i,animationEasing:l,connectNulls:o,dot:c,fill:d,fillOpacity:f,hide:p,isAnimationActive:y,legendType:g,stroke:N,xAxisId:w,yAxisId:k}=r,S=rH(r,H1e),O=zb(),E=lq(),{needClip:D}=Ak(w,k),q=Ml(),{points:W,isRange:R,baseLine:U}=(t=Jr(ae=>z1e(ae,w,k,q,e.id)))!==null&&t!==void 0?t:{},z=Ck();if(O!=="horizontal"&&O!=="vertical"||z==null||E!=="AreaChart"&&E!=="ComposedChart")return null;var{height:Z,width:H,x:K,y:J}=z;return!W||!W.length?null:T.createElement(spe,R0({},S,{activeDot:n,animationBegin:a,animationDuration:i,animationEasing:l,baseLine:U,connectNulls:o,dot:c,fill:d,fillOpacity:f,height:Z,hide:p,layout:O,isAnimationActive:y,isRange:R,legendType:g,needClip:D,points:W,stroke:N,width:H,left:K,top:J,xAxisId:w,yAxisId:k}))}var lpe=(e,t,r,n,a)=>{var i=r??t;if(Zr(i))return i;var l=e==="horizontal"?a:n,o=l.scale.domain();if(l.type==="number"){var c=Math.max(o[0],o[1]),d=Math.min(o[0],o[1]);return i==="dataMin"?d:i==="dataMax"||c<0?c:Math.max(Math.min(o[0],o[1]),0)}return i==="dataMin"?o[0]:i==="dataMax"?o[1]:o[0]};function ope(e){var{areaSettings:{connectNulls:t,baseValue:r,dataKey:n},stackedData:a,layout:i,chartBaseValue:l,xAxis:o,yAxis:c,displayedData:d,dataStartIndex:f,xAxisTicks:p,yAxisTicks:y,bandSize:g}=e,N=a&&a.length,w=lpe(i,l,r,o,c),k=i==="horizontal",S=!1,O=d.map((D,q)=>{var W;N?W=a[f+q]:(W=ns(D,n),Array.isArray(W)?S=!0:W=[w,W]);var R=W[1]==null||N&&!t&&ns(D,n)==null;return k?{x:Iy({axis:o,ticks:p,bandSize:g,entry:D,index:q}),y:R?null:c.scale(W[1]),value:W,payload:D}:{x:R?null:o.scale(W[1]),y:Iy({axis:c,ticks:y,bandSize:g,entry:D,index:q}),value:W,payload:D}}),E;return N||S?E=O.map(D=>{var q=Array.isArray(D.value)?D.value[0]:null;return k?{x:D.x,y:q!=null&&D.y!=null?c.scale(q):null,payload:D.payload}:{x:q!=null?o.scale(q):null,y:D.y,payload:D.payload}}):E=k?c.scale(w):o.scale(w),{points:O,baseLine:E,isRange:S}}function cpe(e){var t=Qi(e,nH),r=Ml();return T.createElement(jk,{id:t.id,type:"area"},n=>T.createElement(T.Fragment,null,T.createElement(gC,{legendPayload:G1e(t)}),T.createElement(Sk,{fn:X1e,args:t}),T.createElement(bC,{type:"area",id:n,data:t.data,dataKey:t.dataKey,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,stackId:HB(t.stackId),hide:t.hide,barSize:void 0,baseValue:t.baseValue,isPanorama:r,connectNulls:t.connectNulls}),T.createElement(ipe,R0({},t,{id:n}))))}var aH=T.memo(cpe);aH.displayName="Area";var dpe=["dangerouslySetInnerHTML","ticks"],upe=["id"],hpe=["domain"],fpe=["domain"];function yS(){return yS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},yS.apply(null,arguments)}function aw(e,t){if(e==null)return{};var r,n,a=mpe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function mpe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function xpe(e){var t=Us();return T.useLayoutEffect(()=>(t(qfe(e)),()=>{t(Hfe(e))}),[e,t]),null}var ppe=e=>{var{xAxisId:t,className:r}=e,n=Jr(Y6),a=Ml(),i="xAxis",l=Jr(k=>up(k,i,t,a)),o=Jr(k=>Fz(k,i,t,a)),c=Jr(k=>Dz(k,t)),d=Jr(k=>Tde(k,t)),f=Jr(k=>xz(k,t));if(c==null||d==null||f==null)return null;var{dangerouslySetInnerHTML:p,ticks:y}=e,g=aw(e,dpe),{id:N}=f,w=aw(f,upe);return T.createElement(jC,yS({},g,w,{scale:l,x:d.x,y:d.y,width:c.width,height:c.height,className:Zn("recharts-".concat(i," ").concat(i),r),viewBox:n,ticks:o}))},gpe={allowDataOverflow:mc.allowDataOverflow,allowDecimals:mc.allowDecimals,allowDuplicatedCategory:mc.allowDuplicatedCategory,height:mc.height,hide:!1,mirror:mc.mirror,orientation:mc.orientation,padding:mc.padding,reversed:mc.reversed,scale:mc.scale,tickCount:mc.tickCount,type:mc.type,xAxisId:0},bpe=e=>{var t,r,n,a,i,l=Qi(e,gpe);return T.createElement(T.Fragment,null,T.createElement(xpe,{interval:(t=l.interval)!==null&&t!==void 0?t:"preserveEnd",id:l.xAxisId,scale:l.scale,type:l.type,padding:l.padding,allowDataOverflow:l.allowDataOverflow,domain:l.domain,dataKey:l.dataKey,allowDuplicatedCategory:l.allowDuplicatedCategory,allowDecimals:l.allowDecimals,tickCount:l.tickCount,includeHidden:(r=l.includeHidden)!==null&&r!==void 0?r:!1,reversed:l.reversed,ticks:l.ticks,height:l.height,orientation:l.orientation,mirror:l.mirror,hide:l.hide,unit:l.unit,name:l.name,angle:(n=l.angle)!==null&&n!==void 0?n:0,minTickGap:(a=l.minTickGap)!==null&&a!==void 0?a:5,tick:(i=l.tick)!==null&&i!==void 0?i:!0,tickFormatter:l.tickFormatter}),T.createElement(ppe,l))},vpe=(e,t)=>{var{domain:r}=e,n=aw(e,hpe),{domain:a}=t,i=aw(t,fpe);return W1(n,i)?Array.isArray(r)&&r.length===2&&Array.isArray(a)&&a.length===2?r[0]===a[0]&&r[1]===a[1]:W1({domain:r},{domain:a}):!1},Mu=T.memo(bpe,vpe);Mu.displayName="XAxis";var ype=["dangerouslySetInnerHTML","ticks"],wpe=["id"],kpe=["domain"],Npe=["domain"];function wS(){return wS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},wS.apply(null,arguments)}function sw(e,t){if(e==null)return{};var r,n,a=_pe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function _pe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Spe(e){var t=Us();return T.useLayoutEffect(()=>(t($fe(e)),()=>{t(Vfe(e))}),[e,t]),null}var jpe=e=>{var{yAxisId:t,className:r,width:n,label:a}=e,i=T.useRef(null),l=T.useRef(null),o=Jr(Y6),c=Ml(),d=Us(),f="yAxis",p=Jr(q=>up(q,f,t,c)),y=Jr(q=>Mz(q,t)),g=Jr(q=>Pde(q,t)),N=Jr(q=>Fz(q,f,t,c)),w=Jr(q=>pz(q,t));if(T.useLayoutEffect(()=>{if(!(n!=="auto"||!y||oC(a)||T.isValidElement(a)||w==null)){var q=i.current;if(q){var W=q.getCalculatedWidth();Math.round(y.width)!==Math.round(W)&&d(Wfe({id:t,width:W}))}}},[N,y,d,a,t,n,w]),y==null||g==null||w==null)return null;var{dangerouslySetInnerHTML:k,ticks:S}=e,O=sw(e,ype),{id:E}=w,D=sw(w,wpe);return T.createElement(jC,wS({},O,D,{ref:i,labelRef:l,scale:p,x:g.x,y:g.y,tickTextProps:n==="auto"?{width:void 0}:{width:n},width:y.width,height:y.height,className:Zn("recharts-".concat(f," ").concat(f),r),viewBox:o,ticks:N}))},Cpe={allowDataOverflow:xc.allowDataOverflow,allowDecimals:xc.allowDecimals,allowDuplicatedCategory:xc.allowDuplicatedCategory,hide:!1,mirror:xc.mirror,orientation:xc.orientation,padding:xc.padding,reversed:xc.reversed,scale:xc.scale,tickCount:xc.tickCount,type:xc.type,width:xc.width,yAxisId:0},Ape=e=>{var t,r,n,a,i,l=Qi(e,Cpe);return T.createElement(T.Fragment,null,T.createElement(Spe,{interval:(t=l.interval)!==null&&t!==void 0?t:"preserveEnd",id:l.yAxisId,scale:l.scale,type:l.type,domain:l.domain,allowDataOverflow:l.allowDataOverflow,dataKey:l.dataKey,allowDuplicatedCategory:l.allowDuplicatedCategory,allowDecimals:l.allowDecimals,tickCount:l.tickCount,padding:l.padding,includeHidden:(r=l.includeHidden)!==null&&r!==void 0?r:!1,reversed:l.reversed,ticks:l.ticks,width:l.width,orientation:l.orientation,mirror:l.mirror,hide:l.hide,unit:l.unit,name:l.name,angle:(n=l.angle)!==null&&n!==void 0?n:0,minTickGap:(a=l.minTickGap)!==null&&a!==void 0?a:5,tick:(i=l.tick)!==null&&i!==void 0?i:!0,tickFormatter:l.tickFormatter}),T.createElement(jpe,l))},Epe=(e,t)=>{var{domain:r}=e,n=sw(e,kpe),{domain:a}=t,i=sw(t,Npe);return W1(n,i)?Array.isArray(r)&&r.length===2&&Array.isArray(a)&&a.length===2?r[0]===a[0]&&r[1]===a[1]:W1({domain:r},{domain:a}):!1},Yd=T.memo(Ape,Epe);Yd.displayName="YAxis";var Z3={exports:{}},Q3={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pI;function Tpe(){if(pI)return Q3;pI=1;var e=Y1();function t(c,d){return c===d&&(c!==0||1/c===1/d)||c!==c&&d!==d}var r=typeof Object.is=="function"?Object.is:t,n=e.useSyncExternalStore,a=e.useRef,i=e.useEffect,l=e.useMemo,o=e.useDebugValue;return Q3.useSyncExternalStoreWithSelector=function(c,d,f,p,y){var g=a(null);if(g.current===null){var N={hasValue:!1,value:null};g.current=N}else N=g.current;g=l(function(){function k(q){if(!S){if(S=!0,O=q,q=p(q),y!==void 0&&N.hasValue){var W=N.value;if(y(W,q))return E=W}return E=q}if(W=E,r(O,q))return W;var R=p(q);return y!==void 0&&y(W,R)?(O=q,W):(O=q,E=R)}var S=!1,O,E,D=f===void 0?null:f;return[function(){return k(d())},D===null?void 0:function(){return k(D())}]},[d,f,p,y]);var w=n(c,g[0],g[1]);return i(function(){N.hasValue=!0,N.value=w},[w]),o(w),w},Q3}var gI;function Ope(){return gI||(gI=1,Z3.exports=Tpe()),Z3.exports}Ope();function Ppe(e){e()}function Ipe(){let e=null,t=null;return{clear(){e=null,t=null},notify(){Ppe(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=e;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const a=t={callback:r,next:null,prev:t};return a.prev?a.prev.next=a:e=a,function(){!n||e===null||(n=!1,a.next?a.next.prev=a.prev:t=a.prev,a.prev?a.prev.next=a.next:e=a.next)}}}}var bI={notify(){},get:()=>[]};function Dpe(e,t){let r,n=bI,a=0,i=!1;function l(w){f();const k=n.subscribe(w);let S=!1;return()=>{S||(S=!0,k(),p())}}function o(){n.notify()}function c(){N.onStateChange&&N.onStateChange()}function d(){return i}function f(){a++,r||(r=e.subscribe(c),n=Ipe())}function p(){a--,r&&a===0&&(r(),r=void 0,n.clear(),n=bI)}function y(){i||(i=!0,f())}function g(){i&&(i=!1,p())}const N={addNestedSub:l,notifyNestedSubs:o,handleChangeWrapper:c,isSubscribed:d,trySubscribe:y,tryUnsubscribe:g,getListeners:()=>n};return N}var Mpe=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Lpe=Mpe(),Rpe=()=>typeof navigator<"u"&&navigator.product==="ReactNative",Fpe=Rpe(),Bpe=()=>Lpe||Fpe?T.useLayoutEffect:T.useEffect,Upe=Bpe(),J3=Symbol.for("react-redux-context"),eN=typeof globalThis<"u"?globalThis:{};function zpe(){if(!T.createContext)return{};const e=eN[J3]??(eN[J3]=new Map);let t=e.get(T.createContext);return t||(t=T.createContext(null),e.set(T.createContext,t)),t}var qpe=zpe();function Hpe(e){const{children:t,context:r,serverState:n,store:a}=e,i=T.useMemo(()=>{const c=Dpe(a);return{store:a,subscription:c,getServerState:n?()=>n:void 0}},[a,n]),l=T.useMemo(()=>a.getState(),[a]);Upe(()=>{const{subscription:c}=i;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),l!==a.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[i,l]);const o=r||qpe;return T.createElement(o.Provider,{value:i},t)}var $pe=Hpe,Vpe=(e,t)=>t,AC=jt([Vpe,fa,hz,el,tq,ah,Lue,Zi],zue),EC=e=>{var t=e.currentTarget.getBoundingClientRect(),r=t.width/e.currentTarget.offsetWidth,n=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/r),chartY:Math.round((e.clientY-t.top)/n)}},sH=fd("mouseClick"),iH=Bb();iH.startListening({actionCreator:sH,effect:(e,t)=>{var r=e.payload,n=AC(t.getState(),EC(r));(n==null?void 0:n.activeIndex)!=null&&t.dispatch(Vde({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var kS=fd("mouseMove"),lH=Bb();lH.startListening({actionCreator:kS,effect:(e,t)=>{var r=e.payload,n=t.getState(),a=Jj(n,n.tooltip.settings.shared),i=AC(n,EC(r));a==="axis"&&((i==null?void 0:i.activeIndex)!=null?t.dispatch(Wz({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate})):t.dispatch(Vz()))}});var vI={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},oH=Mc({name:"rootProps",initialState:vI,reducers:{updateOptions:(e,t)=>{var r;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(r=t.payload.barGap)!==null&&r!==void 0?r:vI.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className}}}),Wpe=oH.reducer,{updateOptions:Kpe}=oH.actions,cH=Mc({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:Gpe}=cH.actions,Xpe=cH.reducer,dH=fd("keyDown"),uH=fd("focus"),TC=Bb();TC.startListening({actionCreator:dH,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:a}=r.tooltip,i=e.payload;if(!(i!=="ArrowRight"&&i!=="ArrowLeft"&&i!=="Enter")){var l=Number(eC(a,fp(r))),o=ah(r);if(i==="Enter"){var c=Yy(r,"axis","hover",String(a.index));t.dispatch(hS({active:!a.active,activeIndex:a.index,activeDataKey:a.dataKey,activeCoordinate:c}));return}var d=Lde(r),f=d==="left-to-right"?1:-1,p=i==="ArrowRight"?1:-1,y=l+p*f;if(!(o==null||y>=o.length||y<0)){var g=Yy(r,"axis","hover",String(y));t.dispatch(hS({active:!0,activeIndex:y.toString(),activeDataKey:void 0,activeCoordinate:g}))}}}}});TC.startListening({actionCreator:uH,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:a}=r.tooltip;if(!a.active&&a.index==null){var i="0",l=Yy(r,"axis","hover",String(i));t.dispatch(hS({activeDataKey:void 0,active:!0,activeIndex:i,activeCoordinate:l}))}}}});var ed=fd("externalEvent"),hH=Bb();hH.startListening({actionCreator:ed,effect:(e,t)=>{if(e.payload.handler!=null){var r=t.getState(),n={activeCoordinate:Cue(r),activeDataKey:sq(r),activeIndex:af(r),activeLabel:aq(r),activeTooltipIndex:af(r),isTooltipActive:Aue(r)};e.payload.handler(n,e.payload.reactEvent)}}});var Ype=jt([hp],e=>e.tooltipItemPayloads),Zpe=jt([Ype,Jb,(e,t,r)=>t,(e,t,r)=>r],(e,t,r,n)=>{var a=e.find(o=>o.settings.dataKey===n);if(a!=null){var{positions:i}=a;if(i!=null){var l=t(i,r);return l}}}),fH=fd("touchMove"),mH=Bb();mH.startListening({actionCreator:fH,effect:(e,t)=>{var r=e.payload,n=t.getState(),a=Jj(n,n.tooltip.settings.shared);if(a==="axis"){var i=AC(n,EC({clientX:r.touches[0].clientX,clientY:r.touches[0].clientY,currentTarget:r.currentTarget}));(i==null?void 0:i.activeIndex)!=null&&t.dispatch(Wz({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate}))}else if(a==="item"){var l,o=r.touches[0],c=document.elementFromPoint(o.clientX,o.clientY);if(!c||!c.getAttribute)return;var d=c.getAttribute(VB),f=(l=c.getAttribute(WB))!==null&&l!==void 0?l:void 0,p=Zpe(t.getState(),d,f);t.dispatch($z({activeDataKey:f,activeIndex:d,activeCoordinate:p}))}}});var Qpe=mB({brush:fxe,cartesianAxis:Kfe,chartData:n0e,errorBars:hme,graphicalItems:hfe,layout:pae,legend:wse,options:Que,polarAxis:jhe,polarOptions:Xpe,referenceElements:yxe,rootProps:Wpe,tooltip:Wde}),Jpe=function(t){return zne({reducer:Qpe,preloadedState:t,middleware:r=>r({serializableCheck:!1}).concat([iH.middleware,lH.middleware,TC.middleware,hH.middleware,mH.middleware]),enhancers:r=>{var n=r;return typeof r=="function"&&(n=r()),n.concat(jB({type:"raf"}))},devTools:eh.devToolsEnabled})};function xH(e){var{preloadedState:t,children:r,reduxStoreName:n}=e,a=Ml(),i=T.useRef(null);if(a)return r;i.current==null&&(i.current=Jpe(t));var l=$6;return T.createElement($pe,{context:l,store:i.current},r)}function pH(e){var{layout:t,margin:r}=e,n=Us(),a=Ml();return T.useEffect(()=>{a||(n(fae(t)),n(hae(r)))},[n,a,t,r]),null}function gH(e){var t=Us();return T.useEffect(()=>{t(Kpe(e))},[t,e]),null}var ege=["children"];function tge(e,t){if(e==null)return{};var r,n,a=rge(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function rge(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function iw(){return iw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},iw.apply(null,arguments)}var nge={width:"100%",height:"100%",display:"block"},age=T.forwardRef((e,t)=>{var r=Q6(),n=J6(),a=eU();if(!z1(r)||!z1(n))return null;var{children:i,otherAttributes:l,title:o,desc:c}=e,d,f;return typeof l.tabIndex=="number"?d=l.tabIndex:d=a?0:void 0,typeof l.role=="string"?f=l.role:f=a?"application":void 0,T.createElement(P6,iw({},l,{title:o,desc:c,role:f,tabIndex:d,width:r,height:n,style:nge,ref:t}),i)}),sge=e=>{var{children:t}=e,r=Jr(Jw);if(!r)return null;var{width:n,height:a,y:i,x:l}=r;return T.createElement(P6,{width:n,height:a,x:l,y:i},t)},yI=T.forwardRef((e,t)=>{var{children:r}=e,n=tge(e,ege),a=Ml();return a?T.createElement(sge,null,r):T.createElement(age,iw({ref:t},n),r)});function ige(){var e=Us(),[t,r]=T.useState(null),n=Jr($ae);return T.useEffect(()=>{if(t!=null){var a=t.getBoundingClientRect(),i=a.width/t.offsetWidth;Bi(i)&&i!==n&&e(xae(i))}},[t,e,n]),r}function wI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function lge(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?wI(Object(r),!0).forEach(function(n){oge(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function oge(e,t,r){return(t=cge(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cge(e){var t=dge(e,"string");return typeof t=="symbol"?t:t+""}function dge(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Um(){return Um=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Um.apply(null,arguments)}var uge=()=>(h0e(),null);function lw(e){if(typeof e=="number")return e;if(typeof e=="string"){var t=parseFloat(e);if(!Number.isNaN(t))return t}return 0}var hge=T.forwardRef((e,t)=>{var r,n,a=T.useRef(null),[i,l]=T.useState({containerWidth:lw((r=e.style)===null||r===void 0?void 0:r.width),containerHeight:lw((n=e.style)===null||n===void 0?void 0:n.height)}),o=T.useCallback((d,f)=>{l(p=>{var y=Math.round(d),g=Math.round(f);return p.containerWidth===y&&p.containerHeight===g?p:{containerWidth:y,containerHeight:g}})},[]),c=T.useCallback(d=>{if(typeof t=="function"&&t(d),d!=null){var{width:f,height:p}=d.getBoundingClientRect();o(f,p);var y=N=>{var{width:w,height:k}=N[0].contentRect;o(w,k)},g=new ResizeObserver(y);g.observe(d),a.current=g}},[t,o]);return T.useEffect(()=>()=>{var d=a.current;d!=null&&d.disconnect()},[o]),T.createElement(T.Fragment,null,T.createElement(tk,{width:i.containerWidth,height:i.containerHeight}),T.createElement("div",Um({ref:c},e)))}),fge=T.forwardRef((e,t)=>{var{width:r,height:n}=e,[a,i]=T.useState({containerWidth:lw(r),containerHeight:lw(n)}),l=T.useCallback((c,d)=>{i(f=>{var p=Math.round(c),y=Math.round(d);return f.containerWidth===p&&f.containerHeight===y?f:{containerWidth:p,containerHeight:y}})},[]),o=T.useCallback(c=>{if(typeof t=="function"&&t(c),c!=null){var{width:d,height:f}=c.getBoundingClientRect();l(d,f)}},[t,l]);return T.createElement(T.Fragment,null,T.createElement(tk,{width:a.containerWidth,height:a.containerHeight}),T.createElement("div",Um({ref:o},e)))}),mge=T.forwardRef((e,t)=>{var{width:r,height:n}=e;return T.createElement(T.Fragment,null,T.createElement(tk,{width:r,height:n}),T.createElement("div",Um({ref:t},e)))}),xge=T.forwardRef((e,t)=>{var{width:r,height:n}=e;return V0(r)||V0(n)?T.createElement(fge,Um({},e,{ref:t})):T.createElement(mge,Um({},e,{ref:t}))});function pge(e){return e===!0?hge:xge}var gge=T.forwardRef((e,t)=>{var{children:r,className:n,height:a,onClick:i,onContextMenu:l,onDoubleClick:o,onMouseDown:c,onMouseEnter:d,onMouseLeave:f,onMouseMove:p,onMouseUp:y,onTouchEnd:g,onTouchMove:N,onTouchStart:w,style:k,width:S,responsive:O,dispatchTouchEvents:E=!0}=e,D=T.useRef(null),q=Us(),[W,R]=T.useState(null),[U,z]=T.useState(null),Z=ige(),H=Z6(),K=(H==null?void 0:H.width)>0?H.width:S,J=(H==null?void 0:H.height)>0?H.height:a,ae=T.useCallback(ie=>{Z(ie),typeof t=="function"&&t(ie),R(ie),z(ie),ie!=null&&(D.current=ie)},[Z,t,R,z]),se=T.useCallback(ie=>{q(sH(ie)),q(ed({handler:i,reactEvent:ie}))},[q,i]),ue=T.useCallback(ie=>{q(kS(ie)),q(ed({handler:d,reactEvent:ie}))},[q,d]),fe=T.useCallback(ie=>{q(Vz()),q(ed({handler:f,reactEvent:ie}))},[q,f]),ke=T.useCallback(ie=>{q(kS(ie)),q(ed({handler:p,reactEvent:ie}))},[q,p]),_e=T.useCallback(()=>{q(uH())},[q]),Le=T.useCallback(ie=>{q(dH(ie.key))},[q]),xe=T.useCallback(ie=>{q(ed({handler:l,reactEvent:ie}))},[q,l]),B=T.useCallback(ie=>{q(ed({handler:o,reactEvent:ie}))},[q,o]),ee=T.useCallback(ie=>{q(ed({handler:c,reactEvent:ie}))},[q,c]),Y=T.useCallback(ie=>{q(ed({handler:y,reactEvent:ie}))},[q,y]),re=T.useCallback(ie=>{q(ed({handler:w,reactEvent:ie}))},[q,w]),Q=T.useCallback(ie=>{E&&q(fH(ie)),q(ed({handler:N,reactEvent:ie}))},[q,E,N]),Ce=T.useCallback(ie=>{q(ed({handler:g,reactEvent:ie}))},[q,g]),me=pge(O);return T.createElement(hq.Provider,{value:W},T.createElement(OF.Provider,{value:U},T.createElement(me,{width:K??(k==null?void 0:k.width),height:J??(k==null?void 0:k.height),className:Zn("recharts-wrapper",n),style:lge({position:"relative",cursor:"default",width:K,height:J},k),onClick:se,onContextMenu:xe,onDoubleClick:B,onFocus:_e,onKeyDown:Le,onMouseDown:ee,onMouseEnter:ue,onMouseLeave:fe,onMouseMove:ke,onMouseUp:Y,onTouchEnd:Ce,onTouchMove:Q,onTouchStart:re,ref:ae},T.createElement(uge,null),r)))}),bge=["width","height","responsive","children","className","style","compact","title","desc"];function vge(e,t){if(e==null)return{};var r,n,a=yge(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function yge(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var bH=T.forwardRef((e,t)=>{var{width:r,height:n,responsive:a,children:i,className:l,style:o,compact:c,title:d,desc:f}=e,p=vge(e,bge),y=Ao(p);return c?T.createElement(T.Fragment,null,T.createElement(tk,{width:r,height:n}),T.createElement(yI,{otherAttributes:y,title:d,desc:f},i)):T.createElement(gge,{className:l,style:o,width:r,height:n,responsive:a,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},T.createElement(yI,{otherAttributes:y,title:d,desc:f,ref:t},T.createElement(kxe,null,i)))});function NS(){return NS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},NS.apply(null,arguments)}var wge={top:5,right:5,bottom:5,left:5},kge={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:wge,reverseStackOrder:!1,syncMethod:"index",responsive:!1},Ek=T.forwardRef(function(t,r){var n,a=Qi(t.categoricalChartProps,kge),{chartName:i,defaultTooltipEventType:l,validateTooltipEventTypes:o,tooltipPayloadSearcher:c,categoricalChartProps:d}=t,f={chartName:i,defaultTooltipEventType:l,validateTooltipEventTypes:o,tooltipPayloadSearcher:c,eventEmitter:void 0};return T.createElement(xH,{preloadedState:{options:f},reduxStoreName:(n=d.id)!==null&&n!==void 0?n:i},T.createElement(Bq,{chartData:d.data}),T.createElement(pH,{layout:a.layout,margin:a.margin}),T.createElement(gH,{accessibilityLayer:a.accessibilityLayer,barCategoryGap:a.barCategoryGap,maxBarSize:a.maxBarSize,stackOffset:a.stackOffset,barGap:a.barGap,barSize:a.barSize,syncId:a.syncId,syncMethod:a.syncMethod,className:a.className}),T.createElement(bH,NS({},a,{ref:r})))}),Nge=["axis"],OC=T.forwardRef((e,t)=>T.createElement(Ek,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Nge,tooltipPayloadSearcher:tv,categoricalChartProps:e,ref:t})),_ge=["axis","item"],ny=T.forwardRef((e,t)=>T.createElement(Ek,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:_ge,tooltipPayloadSearcher:tv,categoricalChartProps:e,ref:t}));function Sge(e){var t=Us();return T.useEffect(()=>{t(Gpe(e))},[t,e]),null}var jge=["layout"];function _S(){return _S=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_S.apply(null,arguments)}function Cge(e,t){if(e==null)return{};var r,n,a=Age(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Age(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Ege={top:5,right:5,bottom:5,left:5},Tge={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:Ege,reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1},Oge=T.forwardRef(function(t,r){var n,a=Qi(t.categoricalChartProps,Tge),{layout:i}=a,l=Cge(a,jge),{chartName:o,defaultTooltipEventType:c,validateTooltipEventTypes:d,tooltipPayloadSearcher:f}=t,p={chartName:o,defaultTooltipEventType:c,validateTooltipEventTypes:d,tooltipPayloadSearcher:f,eventEmitter:void 0};return T.createElement(xH,{preloadedState:{options:p},reduxStoreName:(n=a.id)!==null&&n!==void 0?n:o},T.createElement(Bq,{chartData:a.data}),T.createElement(pH,{layout:i,margin:a.margin}),T.createElement(gH,{accessibilityLayer:a.accessibilityLayer,barCategoryGap:a.barCategoryGap,maxBarSize:a.maxBarSize,stackOffset:a.stackOffset,barGap:a.barGap,barSize:a.barSize,syncId:a.syncId,syncMethod:a.syncMethod,className:a.className}),T.createElement(Sge,{cx:a.cx,cy:a.cy,startAngle:a.startAngle,endAngle:a.endAngle,innerRadius:a.innerRadius,outerRadius:a.outerRadius}),T.createElement(bH,_S({},l,{ref:r})))}),Pge=["item"],Ige={layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},vH=T.forwardRef((e,t)=>{var r=Qi(e,Ige);return T.createElement(Oge,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:Pge,tooltipPayloadSearcher:tv,categoricalChartProps:r,ref:t})}),Dge=["axis"],Mge=T.forwardRef((e,t)=>T.createElement(Ek,{chartName:"AreaChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Dge,tooltipPayloadSearcher:tv,categoricalChartProps:e,ref:t})),Lge=["axis"],Rge=T.forwardRef((e,t)=>T.createElement(Ek,{chartName:"ComposedChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Lge,tooltipPayloadSearcher:tv,categoricalChartProps:e,ref:t}));const Fge={blue:{card:"bg-white dark:bg-slate-800 border border-blue-100 dark:border-blue-900/40",icon:"bg-blue-500/15 text-blue-600 dark:text-blue-400",accent:"text-blue-600 dark:text-blue-400"},emerald:{card:"bg-white dark:bg-slate-800 border border-emerald-100 dark:border-emerald-900/40",icon:"bg-emerald-500/15 text-emerald-600 dark:text-emerald-400",accent:"text-emerald-600 dark:text-emerald-400"},amber:{card:"bg-white dark:bg-slate-800 border border-amber-100 dark:border-amber-900/40",icon:"bg-amber-500/15 text-amber-600 dark:text-amber-400",accent:"text-amber-600 dark:text-amber-400"},violet:{card:"bg-white dark:bg-slate-800 border border-violet-100 dark:border-violet-900/40",icon:"bg-violet-500/15 text-violet-600 dark:text-violet-400",accent:"text-violet-600 dark:text-violet-400"}},Gx=({title:e,value:t,subtitle:r,colorKey:n,icon:a})=>{const i=Fge[n];return s.jsxs("div",{className:`${i.card} rounded-xl p-5 shadow-sm hover:shadow-md transition-shadow`,children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm font-medium mb-1",children:e}),s.jsx("h3",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:t})]}),s.jsx("div",{className:`w-10 h-10 rounded-lg ${i.icon} flex items-center justify-center`,children:a})]}),s.jsx("p",{className:`text-sm ${i.accent}`,children:r})]})},ug=({icon:e,label:t,count:r,color:n})=>{const a={blue:"text-blue-600 dark:text-blue-400",green:"text-green-600 dark:text-green-400",amber:"text-amber-600 dark:text-amber-400",slate:"text-slate-600 dark:text-slate-400",red:"text-red-600 dark:text-red-400"};return s.jsxs(Uu,{to:"/service",className:"flex items-center justify-between p-3 bg-slate-50 dark:bg-slate-700/50 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 transition group",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:a[n],children:e}),s.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:t})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-lg font-bold text-slate-900 dark:text-white",children:r}),s.jsx(XJ,{className:"w-4 h-4 text-slate-400 group-hover:text-blue-500 transition"})]})]})},kI={purple:{text:"text-purple-600 dark:text-purple-400",bg:"bg-purple-50 dark:bg-purple-900/20"},orange:{text:"text-orange-600 dark:text-orange-400",bg:"bg-orange-50 dark:bg-orange-900/20"},emerald:{text:"text-emerald-600 dark:text-emerald-400",bg:"bg-emerald-50 dark:bg-emerald-900/20"},cyan:{text:"text-cyan-600 dark:text-cyan-400",bg:"bg-cyan-50 dark:bg-cyan-900/20"},blue:{text:"text-blue-600 dark:text-blue-400",bg:"bg-blue-50 dark:bg-blue-900/20"},amber:{text:"text-amber-600 dark:text-amber-400",bg:"bg-amber-50 dark:bg-amber-900/20"},rose:{text:"text-rose-600 dark:text-rose-400",bg:"bg-rose-50 dark:bg-rose-900/20"},violet:{text:"text-violet-600 dark:text-violet-400",bg:"bg-violet-50 dark:bg-violet-900/20"},slate:{text:"text-slate-600 dark:text-slate-400",bg:"bg-slate-50 dark:bg-slate-800"}},Qc=({to:e,icon:t,label:r,color:n,labelClassName:a})=>{const i=kI[n]||kI.purple;return s.jsxs(Uu,{to:e,className:"flex flex-col items-center justify-center gap-2 p-2 rounded-xl hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-all duration-200 group",children:[s.jsx("div",{className:`w-12 h-12 rounded-2xl ${i.bg} ${i.text} flex items-center justify-center shadow-sm group-hover:scale-110 transition-transform duration-200`,children:t}),s.jsx("span",{className:`text-[11px] font-medium text-center leading-tight text-slate-700 dark:text-slate-300 ${a||""}`,children:r})]})},Bge=()=>{var Le,xe,B;const{profile:e}=Dc(),{data:t=[],isLoading:r}=Mb(),{data:n=[],isLoading:a}=mf(),{data:i=[],isLoading:l}=_F(),{data:o=[],isLoading:c}=jF(),{data:d=[],isLoading:f}=Jee(),{data:p=[],isLoading:y}=T6(),{data:g=[],isLoading:N}=CF(),{data:w=[],isLoading:k}=Qee(),{currentBranchId:S}=Ba(),O=r||a||l||c||f||y||N||k,[E,D]=T.useState(!1),q=T.useMemo(()=>new Date().toISOString().slice(0,10),[]),W=T.useMemo(()=>n.reduce((ee,Y)=>{var Q;const re=((Q=Y.stock)==null?void 0:Q[S])||0;return ee+re},0),[n,S]),R=T.useMemo(()=>n.reduce((ee,Y)=>{var Ce,me;const re=((Ce=Y.stock)==null?void 0:Ce[S])||0,Q=((me=Y.retailPrice)==null?void 0:me[S])||0;return ee+re*Q},0),[n,S]),U=()=>{bte(),window.location.reload()},z=()=>{confirm("Bn c chc mun xa ton b d liu demo khng?")&&(vte(),window.location.reload())},Z=T.useMemo(()=>{const ee=t.filter(Ce=>Ce.date.slice(0,10)===q),Y=ee.reduce((Ce,me)=>Ce+me.total,0),re=ee.reduce((Ce,me)=>{const ie=me.items.reduce((je,be)=>je+(be.costPrice||0)*be.quantity,0);return Ce+(me.total-ie)},0),Q=new Set(ee.map(Ce=>Ce.customer.phone||Ce.customer.name)).size;return{revenue:Y,profit:re,customerCount:Q,orderCount:ee.length}},[t,q]),H=T.useMemo(()=>{const ee=[];for(let Y=6;Y>=0;Y--){const re=new Date;re.setDate(re.getDate()-Y);const Q=re.toISOString().slice(0,10),me=t.filter(je=>je.date.slice(0,10)===Q).reduce((je,be)=>je+be.total,0),ie=i.filter(je=>je.type==="expense"&&je.date.slice(0,10)===Q).reduce((je,be)=>je+be.amount,0);ee.push({date:re.toLocaleDateString("vi-VN",{day:"2-digit",month:"2-digit"}),revenue:me,expense:ie,profit:me-ie})}return ee},[t,i]),K=T.useMemo(()=>{const ee=i.filter(re=>re.type==="income").reduce((re,Q)=>re+Q.amount,0),Y=i.filter(re=>re.type==="expense").reduce((re,Q)=>re+Q.amount,0);return[{name:"Thu",value:ee,color:"#10b981"},{name:"Chi",value:Y,color:"#ef4444"}]},[i]),J=T.useMemo(()=>{const ee={};return t.forEach(Y=>{Y.items.forEach(re=>{ee[re.partId]||(ee[re.partId]={name:re.partName,quantity:0}),ee[re.partId].quantity+=re.quantity})}),Object.values(ee).sort((Y,re)=>re.quantity-Y.quantity).slice(0,5)},[t]),ae=((Le=d.find(ee=>ee.id==="cash"))==null?void 0:Le.balance[S])||0,se=((xe=d.find(ee=>ee.id==="bank"))==null?void 0:xe.balance[S])||0,ue=T.useMemo(()=>{const ee=(w||[]).filter(me=>me.status==="Tip nhn").length,Y=(w||[]).filter(me=>me.status==="ang sa").length,re=(w||[]).filter(me=>me.status===" sa xong").length,Q=(w||[]).filter(me=>me.status==="Tr my").length,Ce=(w||[]).filter(me=>me.status===" hy").length;return{newOrders:ee,inProgress:Y,completed:re,cancelled:Q,notRepairable:Ce}},[w]),fe=T.useMemo(()=>{const ee=[],Y=n.filter(Q=>(Q.stock[S]||0)<10);Y.length>0&&ee.push({type:"Tn kho thp",message:`${Y.length} sn phm sp ht hng`,color:"text-orange-600 dark:text-orange-400"});const re=g.filter(Q=>{const Ce=Math.ceil((new Date(Q.endDate).getTime()-Date.now())/864e5);return Ce<=30&&Ce>0&&Q.status==="active"});return re.length>0&&ee.push({type:"N n hn",message:`${re.length} khon vay sp n hn`,color:"text-red-600 dark:text-red-400"}),ae+se<1e7&&ee.push({type:"S d thp",message:"S d ti khon di 10 triu",color:"text-amber-600 dark:text-amber-400"}),ee},[n,g,ae,se,S]),ke=T.useMemo(()=>{const ee={};return t.forEach(Y=>{const re=Y.customer.phone||Y.customer.name;ee[re]||(ee[re]={name:Y.customer.name,phone:Y.customer.phone,total:0}),ee[re].total+=Y.total}),Object.values(ee).sort((Y,re)=>re.total-Y.total).slice(0,10)},[t]),_e=T.useMemo(()=>{const ee=[],Y=new Date;for(let re=2;re>=0;re--){const Q=new Date(Y.getFullYear(),Y.getMonth()-re,1),Ce=Q.toISOString().slice(0,7),me=Q.toLocaleDateString("vi-VN",{month:"short",year:"numeric"}),ie=t.filter(le=>le.date.startsWith(Ce)),je=ie.reduce((le,Ee)=>le+Ee.total,0),be=ie.length;ee.push({month:me,revenue:je,orders:be})}return ee},[t]);return O?s.jsx("div",{className:"flex items-center justify-center h-96",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):s.jsxs("div",{className:"space-y-4 md:space-y-6",children:[s.jsx("div",{className:"md:hidden bg-gradient-to-r from-blue-600 to-violet-600 dark:from-blue-700 dark:to-violet-800 rounded-2xl p-4 md:p-6 text-white shadow-lg",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("h1",{className:"text-lg md:text-xl font-semibold mb-1",children:["Xin cho, ",(e==null?void 0:e.full_name)||((B=e==null?void 0:e.email)==null?void 0:B.split("@")[0])||"Ngi dng"," ",""]}),s.jsx("p",{className:"text-sm md:text-base text-blue-100 dark:text-violet-100",children:new Date().toLocaleDateString("vi-VN",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),s.jsxs("div",{className:"mt-4 flex flex-wrap gap-3",children:[s.jsxs("div",{className:"bg-white/20 backdrop-blur-sm rounded-lg px-3 py-2 flex items-center gap-2",children:[s.jsx(dee,{className:"w-4 h-4"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs opacity-90",children:"Tin mt"}),s.jsx("p",{className:"text-sm font-semibold",children:Oe(ae)})]})]}),s.jsxs("div",{className:"bg-white/20 backdrop-blur-sm rounded-lg px-3 py-2 flex items-center gap-2",children:[s.jsx(tf,{className:"w-4 h-4"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs opacity-90",children:"Qun l"}),s.jsx("p",{className:"text-sm font-semibold",children:p.filter(ee=>ee.status==="active").length})]})]})]})]}),s.jsx(ZJ,{className:"w-6 h-6 md:w-7 md:h-7 opacity-80 hover:opacity-100 cursor-pointer transition"})]})}),s.jsxs("div",{className:"md:hidden bg-white dark:bg-slate-800 rounded-xl p-4 md:p-5 shadow-sm border border-slate-200 dark:border-slate-700",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h2",{className:"text-base md:text-lg font-bold text-slate-900 dark:text-white",children:"Bo co"}),s.jsxs("select",{className:"text-sm bg-slate-50 dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg px-3 py-1.5 text-slate-700 dark:text-slate-200 focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{children:"Thng ny"}),s.jsx("option",{children:"Hm nay"}),s.jsx("option",{children:"Tun ny"}),s.jsx("option",{children:"Nm nay"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3 md:gap-4",children:[s.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 rounded-lg p-3 md:p-4",children:[s.jsx("p",{className:"text-xs md:text-sm text-slate-600 dark:text-slate-400 mb-1",children:"Doanh thu"}),s.jsx("p",{className:"text-lg md:text-2xl font-bold text-blue-600 dark:text-blue-400",children:Oe(Z.revenue)})]}),s.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 rounded-lg p-3 md:p-4",children:[s.jsx("p",{className:"text-xs md:text-sm text-slate-600 dark:text-slate-400 mb-1",children:"Li nhun"}),s.jsx("p",{className:`text-lg md:text-2xl font-bold ${Z.profit>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:Oe(Z.profit)})]})]})]}),s.jsxs("div",{className:"md:hidden bg-white dark:bg-slate-800 rounded-xl p-4 md:p-5 shadow-sm border border-slate-200 dark:border-slate-700",children:[s.jsx("h3",{className:"text-sm md:text-base font-semibold text-slate-900 dark:text-white mb-3",children:"Trng thi phiu sa cha"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ug,{icon:s.jsx(Zf,{className:"w-5 h-5"}),label:"Bin nhn mi",count:ue.newOrders,color:"blue"}),s.jsx(ug,{icon:s.jsx(YT,{className:"w-5 h-5"}),label:" sa xong",count:ue.completed,color:"green"}),s.jsx(ug,{icon:s.jsx(vy,{className:"w-5 h-5"}),label:"ang sa",count:ue.inProgress,color:"amber"}),s.jsx(ug,{icon:s.jsx(see,{className:"w-5 h-5"}),label:" hy",count:ue.cancelled,color:"slate"}),s.jsx(ug,{icon:s.jsx(hF,{className:"w-5 h-5"}),label:"Khng sa c",count:ue.notRepairable,color:"red"})]})]}),s.jsxs("div",{className:"md:hidden bg-white dark:bg-slate-800 rounded-xl p-4 md:p-5 shadow-sm border border-slate-200 dark:border-slate-700",children:[s.jsx("h3",{className:"text-sm md:text-base font-semibold text-slate-900 dark:text-white mb-4",children:"Truy cp nhanh"}),s.jsxs("div",{className:"grid grid-cols-4 gap-3 md:gap-4",children:[s.jsx(Qc,{to:"/sales",icon:s.jsx(Qf,{className:"w-6 h-6 md:w-7 md:h-7"}),label:"Bn hng",color:"emerald"}),s.jsx(Qc,{to:"/service",icon:s.jsx(Em,{className:"w-6 h-6 md:w-7 md:h-7"}),label:"Sa cha",color:"blue"}),s.jsx(Qc,{to:"/inventory",icon:s.jsx(Gi,{className:"w-6 h-6 md:w-7 md:h-7"}),label:"Kho hng",color:"orange"}),s.jsx(Qc,{to:"/customers",icon:s.jsx(tf,{className:"w-6 h-6 md:w-7 md:h-7"}),label:"Khch hng",color:"cyan"}),s.jsx(Qc,{to:"/finance",icon:s.jsx(Kg,{className:"w-6 h-6 md:w-7 md:h-7"}),label:"Ti chnh",color:"violet"}),s.jsx(Qc,{to:"/debt",icon:s.jsx(Wg,{className:"w-6 h-6 md:w-7 md:h-7"}),label:"Cng n",color:"rose"}),s.jsx(Qc,{to:"/cashbook",icon:s.jsx(mm,{className:"w-6 h-6 md:w-7 md:h-7"}),label:"S qu",color:"amber"}),s.jsx(Qc,{to:"/reports",icon:s.jsx(dd,{className:"w-6 h-6 md:w-7 md:h-7"}),label:"Bo co",color:"slate"}),s.jsx(Qc,{to:"/employees",icon:s.jsx(Am,{className:"w-6 h-6 md:w-7 md:h-7"}),label:"Nhn vin",color:"purple"}),s.jsx(Qc,{to:"/categories",icon:s.jsx(mF,{className:"w-6 h-6 md:w-7 md:h-7"}),label:"Danh mc",color:"slate"}),s.jsx(Qc,{to:"/lookup",icon:s.jsx(Pu,{className:"w-6 h-6 md:w-7 md:h-7"}),label:"Tra cu",color:"slate"}),s.jsx(Qc,{to:"/settings",icon:s.jsx(Gg,{className:"w-6 h-6 md:w-7 md:h-7"}),label:"Ci t",color:"slate"})]})]}),s.jsxs("div",{className:"md:hidden bg-white dark:bg-slate-800 rounded-xl p-4 md:p-5 shadow-sm border border-slate-200 dark:border-slate-700",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-sm md:text-base font-semibold text-slate-900 dark:text-white",children:"Bin nhn"}),s.jsx("div",{className:"flex items-center gap-2 text-xs text-slate-600 dark:text-slate-400",children:s.jsx("span",{children:"Sa cha / Bo hnh / Dng mi"})})]}),s.jsx(Kd,{width:"100%",height:200,children:s.jsxs(ny,{data:[{name:"Cha sa (0)",value:0},{name:"ang sa (0)",value:0},{name:"Sa xong (0)",value:0}],children:[s.jsx(Du,{strokeDasharray:"3 3",stroke:"#e2e8f0"}),s.jsx(Mu,{dataKey:"name",tick:{fontSize:11},stroke:"#94a3b8"}),s.jsx(Yd,{tick:{fontSize:11},stroke:"#94a3b8"}),s.jsx(Xd,{}),s.jsx(Yh,{dataKey:"value",fill:"#8b5cf6",radius:[6,6,0,0]})]})})]}),s.jsxs("div",{className:"md:hidden grid grid-cols-3 gap-3",children:[s.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-xl p-4 border border-blue-200 dark:border-blue-800",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h4",{className:"text-sm font-semibold text-blue-900 dark:text-blue-100",children:"Cha sa"}),s.jsx(vy,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})]}),s.jsx("p",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400",children:"0"}),s.jsxs("div",{className:"mt-2 text-xs text-blue-700 dark:text-blue-300 space-y-0.5",children:[s.jsx("p",{children:"C gi: 0"}),s.jsx("p",{children:"BH: 0"}),s.jsx("p",{children:"Dng: 0"})]})]}),s.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/20 rounded-xl p-4 border border-amber-200 dark:border-amber-800",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h4",{className:"text-sm font-semibold text-amber-900 dark:text-amber-100",children:"ang sa"}),s.jsx(Em,{className:"w-5 h-5 text-amber-600 dark:text-amber-400"})]}),s.jsx("p",{className:"text-3xl font-bold text-amber-600 dark:text-amber-400",children:"0"}),s.jsxs("div",{className:"mt-2 text-xs text-amber-700 dark:text-amber-300 space-y-0.5",children:[s.jsx("p",{children:"C gi: 0"}),s.jsx("p",{children:"BH: 0"}),s.jsx("p",{children:"Dng: 0"})]})]}),s.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-xl p-4 border border-green-200 dark:border-green-800",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h4",{className:"text-sm font-semibold text-green-900 dark:text-green-100",children:"Sa xong"}),s.jsx(YT,{className:"w-5 h-5 text-green-600 dark:text-green-400"})]}),s.jsx("p",{className:"text-3xl font-bold text-green-600 dark:text-green-400",children:"0"}),s.jsxs("div",{className:"mt-2 text-xs text-green-700 dark:text-green-300 space-y-0.5",children:[s.jsx("p",{children:"C gi: 0"}),s.jsx("p",{children:"BH: 0"}),s.jsx("p",{children:"Dng: 0"})]})]})]}),s.jsxs("div",{className:"hidden",children:[E&&s.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-slate-800 dark:to-slate-700 border-2 border-blue-200 dark:border-blue-800 rounded-xl p-6 shadow-lg",children:s.jsxs("div",{className:"flex items-start justify-between gap-4",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-xl font-bold text-blue-900 dark:text-blue-100 mb-2",children:" Cha c d liu"}),s.jsx("p",{className:"text-slate-600 dark:text-slate-300 mb-4",children:"H thng cha c d liu. Bn c th ti d liu mu  khm ph cc tnh nng hoc bt u nhp d liu thc t."}),s.jsxs("div",{className:"flex gap-3",children:[s.jsxs("button",{onClick:U,className:"px-6 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg font-medium shadow-md hover:shadow-xl hover:from-blue-700 hover:to-indigo-700 transition-all duration-200 flex items-center gap-2",children:[s.jsx(Zf,{className:"w-5 h-5"})," Ti d liu mu"]}),s.jsx("button",{onClick:()=>D(!1),className:"px-6 py-3 bg-white dark:bg-slate-700 text-slate-700 dark:text-slate-200 border-2 border-slate-300 dark:border-slate-600 rounded-lg font-medium hover:bg-slate-50 dark:hover:bg-slate-600 transition-all duration-200",children:"B qua"})]})]}),s.jsx("div",{className:"hidden md:block text-6xl",children:s.jsx(Vg,{className:"w-16 h-16 text-blue-600 dark:text-blue-400"})})]})}),t.length>0&&s.jsx("div",{className:"flex justify-end",children:s.jsxs("button",{onClick:z,className:"px-4 py-2 text-sm bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300 border border-red-300 dark:border-red-700 rounded-lg hover:bg-red-200 dark:hover:bg-red-900/50 transition-colors inline-flex items-center gap-2",children:[s.jsx(Xg,{className:"w-4 h-4"})," Xa tt c d liu"]})})]}),s.jsxs("div",{className:"hidden lg:grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsx(Gx,{title:"Doanh thu hm nay",value:Oe(Z.revenue),subtitle:`${Z.orderCount} n hng`,colorKey:"blue",icon:s.jsx(C0,{className:"w-5 h-5"})}),s.jsx(Gx,{title:"Li nhun hm nay",value:Oe(Z.profit),subtitle:`${Z.customerCount} khch hng`,colorKey:"emerald",icon:s.jsx(F1,{className:"w-5 h-5"})}),s.jsx(Gx,{title:"Tin mt",value:Oe(ae),subtitle:"Qu tin mt",colorKey:"amber",icon:s.jsx(mm,{className:"w-5 h-5"})}),s.jsx(Gx,{title:"Ngn hng",value:Oe(se),subtitle:"Ti khon ngn hng",colorKey:"violet",icon:s.jsx(Kg,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsx(Gx,{title:"Tng SL tn kho",value:O?"...":`${W}`,subtitle:"Gp tt c chi nhnh",colorKey:"blue",icon:s.jsx(Gi,{className:"w-5 h-5"})}),s.jsx(Gx,{title:"Tng gi tr tn kho",value:O?"...":Oe(R),subtitle:"Theo gi bn l hin ti",colorKey:"violet",icon:s.jsx(Zf,{className:"w-5 h-5"})})]}),fe.length>0&&s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-4",children:[s.jsxs("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-3 flex items-center gap-2",children:[s.jsx(bF,{className:"w-5 h-5 text-amber-500"})," Cnh bo"]}),s.jsx("div",{className:"space-y-2",children:fe.map((ee,Y)=>s.jsxs("div",{className:"flex items-center justify-between py-2 px-3 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:[s.jsxs("div",{children:[s.jsxs("span",{className:"font-medium text-slate-900 dark:text-white",children:[ee.type,":"]})," ",s.jsx("span",{className:ee.color,children:ee.message})]}),s.jsx("button",{className:"text-blue-600 hover:text-blue-700 dark:text-blue-400 text-sm font-medium",children:"Xem chi tit "})]},Y))})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"Doanh thu & Chi ph 7 ngy gn y"}),s.jsx(Kd,{width:"100%",height:250,children:s.jsxs(OC,{data:H,children:[s.jsx(Du,{strokeDasharray:"3 3",stroke:"#334155"}),s.jsx(Mu,{dataKey:"date",stroke:"#94a3b8"}),s.jsx(Yd,{stroke:"#94a3b8"}),s.jsx(Xd,{contentStyle:{backgroundColor:"#1e293b",border:"1px solid #334155",borderRadius:"8px"},formatter:ee=>Oe(ee)}),s.jsx(Mm,{}),s.jsx(nf,{type:"monotone",dataKey:"revenue",stroke:"#10b981",strokeWidth:2,name:"Doanh thu"}),s.jsx(nf,{type:"monotone",dataKey:"expense",stroke:"#ef4444",strokeWidth:2,name:"Chi ph"}),s.jsx(nf,{type:"monotone",dataKey:"profit",stroke:"#3b82f6",strokeWidth:2,name:"Li nhun"})]})})]}),s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"T l Thu/Chi"}),s.jsx(Kd,{width:"100%",height:250,children:s.jsxs(vH,{children:[s.jsx(yC,{data:K,cx:"50%",cy:"50%",labelLine:!1,label:({name:ee,percent:Y})=>`${ee}: ${(Y*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:K.map((ee,Y)=>s.jsx(mp,{fill:ee.color},`cell-${Y}`))}),s.jsx(Xd,{formatter:ee=>Oe(ee)})]})}),s.jsx("div",{className:"mt-4 flex justify-center gap-6"})]}),s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"Top 5 sn phm bn chy"}),s.jsx(Kd,{width:"100%",height:250,children:s.jsxs(ny,{data:J,children:[s.jsx(Du,{strokeDasharray:"3 3",stroke:"#334155"}),s.jsx(Mu,{dataKey:"name",stroke:"#94a3b8"}),s.jsx(Yd,{stroke:"#94a3b8"}),s.jsx(Xd,{contentStyle:{backgroundColor:"#1e293b",border:"1px solid #334155",borderRadius:"8px"}}),s.jsx(Yh,{dataKey:"quantity",fill:"#3b82f6",name:"S lng bn"})]})})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-6",children:[s.jsxs("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4 flex items-center gap-2",children:[s.jsx(Eee,{className:"w-5 h-5 text-yellow-500"}),"Top 10 Khch hng VIP"]}),s.jsx("div",{className:"space-y-3",children:ke.map((ee,Y)=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 dark:bg-slate-700/50 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-gradient-to-br from-blue-500 to-blue-600 text-white font-bold text-sm",children:Y+1}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-slate-900 dark:text-white",children:ee.name}),ee.phone&&s.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:ee.phone})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"font-semibold text-green-600 dark:text-green-400",children:Oe(ee.total)}),s.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Tng chi tiu"})]})]},Y))})]}),s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-6",children:[s.jsxs("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4 flex items-center gap-2",children:[s.jsx(Vg,{className:"w-5 h-5 text-blue-500"}),"So snh 3 thng gn y"]}),s.jsx(Kd,{width:"100%",height:300,children:s.jsxs(ny,{data:_e,children:[s.jsx(Du,{strokeDasharray:"3 3",stroke:"#334155"}),s.jsx(Mu,{dataKey:"month",stroke:"#94a3b8"}),s.jsx(Yd,{yAxisId:"left",stroke:"#3b82f6"}),s.jsx(Yd,{yAxisId:"right",orientation:"right",stroke:"#10b981"}),s.jsx(Xd,{contentStyle:{backgroundColor:"#1e293b",border:"1px solid #334155",borderRadius:"8px"},formatter:(ee,Y)=>Y==="revenue"?Oe(ee):ee}),s.jsx(Mm,{}),s.jsx(Yh,{yAxisId:"left",dataKey:"revenue",fill:"#3b82f6",name:"Doanh thu"}),s.jsx(Yh,{yAxisId:"right",dataKey:"orders",fill:"#10b981",name:"S n"})]})})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h3",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:"Tng khch hng"}),s.jsx(tf,{className:"w-5 h-5 text-slate-500"})]}),s.jsx("div",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:o.length}),s.jsxs("div",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:[o.filter(ee=>ee.segment==="VIP").length," VIP"]})]}),s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h3",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:"Tng nhn vin"}),s.jsx(Am,{className:"w-5 h-5 text-slate-500"})]}),s.jsx("div",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:p.filter(ee=>ee.status==="active").length}),s.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:"ang lm vic"})]}),s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h3",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:"Tng sn phm"}),s.jsx(Gi,{className:"w-5 h-5 text-slate-500"})]}),s.jsx("div",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:n.reduce((ee,Y)=>ee+(Y.stock[S]||0),0)}),s.jsxs("div",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:[n.length," loi sn phm"]})]})]})]})},Uge={"sale.delete":["owner","manager"],"part.update_price":["owner","manager"],"settings.update":["owner","manager"],"finance.view":["owner","manager"],"payroll.view":["owner","manager"],"analytics.view":["owner","manager"],"reports.view":["owner","manager","staff"],"employees.view":["owner","manager"],"debt.view":["owner","manager"]};function yH(e,t){return e?Uge[t].includes(e):!1}function zge(e,t,r=5){return T.useMemo(()=>{const n=Array.isArray(e)?e:[],a=t||"",i=n.filter(o=>{var c;return(((c=o.stock)==null?void 0:c[a])??0)<=0}),l=n.filter(o=>{var d;const c=((d=o.stock)==null?void 0:d[a])??0;return c>0&&c<=r});return{lowStock:l,outOfStock:i,lowStockCount:l.length,outOfStockCount:i.length}},[e,t,r])}function ow(e){const t=document.getElementById(e);if(!t)return;const r=window.open("","_blank","width=800,height=600");r&&(r.document.write(`<!doctype html><html><head><title>Print</title>
  <style>
    body{font-family: Arial, Helvetica, sans-serif;}
    @media print{ .no-print{ display:none } }
  </style>
  </head><body>${t.outerHTML}</body></html>`),r.document.close(),r.focus(),r.print(),r.close())}const qge=e=>s.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.5,...e,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19.128a9.38 9.38 0 002.625.372 9.337 9.337 0 004.121-.952 4.125 4.125 0 00-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 018.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0111.964-4.663M12 6.375a3.375 3.375 0 11-6.75 0 3.375 3.375 0 016.75 0z"})}),Ac=e=>s.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.5,...e,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})}),wH=e=>s.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.5,...e,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"})}),xp=e=>s.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.5,...e,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})});async function Hge(){try{const{data:e,error:t}=await Ot.from("customer_debts").select("*").order("created_at",{ascending:!1});if(t)return Ct({code:"supabase",message:"Khng th ti danh sch cng n khch hng",cause:t});const r=(e||[]).filter(i=>i.sale_id).map(i=>i.sale_id);let n=new Map;if(r.length>0){const{data:i}=await Ot.from("sales").select("id, sale_code").in("id",r);i&&i.forEach(l=>{l.sale_code&&n.set(l.id,l.sale_code)})}const a=(e||[]).map(i=>{let l=i.description;if(i.sale_id&&n.has(i.sale_id)){const o=n.get(i.sale_id);l=l.replace(/Ha n SALE-\d+/g,`Ha n ${o}`).replace(/Ha n #\d+/g,`Ha n ${o}`)}return{id:i.id,customerId:i.customer_id,customerName:i.customer_name,phone:i.phone,licensePlate:i.license_plate,description:l,totalAmount:i.total_amount,paidAmount:i.paid_amount,remainingAmount:i.remaining_amount,createdDate:i.created_date,branchId:i.branch_id}});return _n(a)}catch(e){return Ct({code:"network",message:"Li kt ni ti my ch",cause:e})}}async function $ge(e){try{const r={id:e.workOrderId?`CDEBT-WO-${e.workOrderId}`:e.saleId?`CDEBT-SALE-${e.saleId}`:`CDEBT-${Date.now()}`,customer_id:e.customerId,customer_name:e.customerName,phone:e.phone,license_plate:e.licensePlate,description:e.description,total_amount:e.totalAmount,paid_amount:e.paidAmount||0,remaining_amount:e.totalAmount-(e.paidAmount||0),created_date:e.createdDate,branch_id:e.branchId||"CN1",work_order_id:e.workOrderId||null,sale_id:e.saleId||null};console.log("[debtsRepository] Upserting debt:",r);let n;if(e.saleId){const{data:l,error:o}=await Ot.from("customer_debts").select("id").eq("sale_id",e.saleId).eq("branch_id",r.branch_id).maybeSingle();l&&!o?(console.log("[debtsRepository] Updating existing sale debt:",l.id),n=await Ot.from("customer_debts").update(r).eq("id",l.id).select().single()):(console.log("[debtsRepository] Inserting new sale debt"),n=await Ot.from("customer_debts").insert(r).select().single())}else if(e.workOrderId){const{data:l,error:o}=await Ot.from("customer_debts").select("id").eq("work_order_id",e.workOrderId).eq("branch_id",r.branch_id).maybeSingle();l&&!o?(console.log("[debtsRepository] Updating existing work order debt:",l.id),n=await Ot.from("customer_debts").update(r).eq("id",l.id).select().single()):(console.log("[debtsRepository] Inserting new work order debt"),n=await Ot.from("customer_debts").insert(r).select().single())}else console.log("[debtsRepository] Inserting generic debt"),n=await Ot.from("customer_debts").insert(r).select().single();const{data:a,error:i}=n;return i||!a?Ct({code:"supabase",message:(i==null?void 0:i.message)||"Khng th thm/cp nht cng n",cause:i||new Error("No data returned")}):_n({id:a.id,customerId:a.customer_id,customerName:a.customer_name,phone:a.phone,licensePlate:a.license_plate,description:a.description,totalAmount:a.total_amount,paidAmount:a.paid_amount,remainingAmount:a.remaining_amount,createdDate:a.created_date,branchId:a.branch_id})}catch(t){return Ct({code:"network",message:"Li kt ni khi thm/cp nht cng n",cause:t})}}async function Vge(e,t){try{const r={};t.customerName!==void 0&&(r.customer_name=t.customerName),t.phone!==void 0&&(r.phone=t.phone),t.licensePlate!==void 0&&(r.license_plate=t.licensePlate),t.description!==void 0&&(r.description=t.description),t.totalAmount!==void 0&&(r.total_amount=t.totalAmount),t.paidAmount!==void 0&&(r.paid_amount=t.paidAmount,r.remaining_amount=(t.totalAmount||0)-t.paidAmount),r.updated_at=new Date().toISOString();const{data:n,error:a}=await Ot.from("customer_debts").update(r).eq("id",e).select().single();return a||!n?Ct({code:"supabase",message:"Khng th cp nht cng n",cause:a}):_n({id:n.id,customerId:n.customer_id,customerName:n.customer_name,phone:n.phone,licensePlate:n.license_plate,description:n.description,totalAmount:n.total_amount,paidAmount:n.paid_amount,remainingAmount:n.remaining_amount,createdDate:n.created_date,branchId:n.branch_id})}catch(r){return Ct({code:"network",message:"Li kt ni khi cp nht cng n",cause:r})}}async function Wge(e){try{const{error:t}=await Ot.from("customer_debts").delete().eq("id",e);return t?Ct({code:"supabase",message:"Khng th xa cng n",cause:t}):_n(void 0)}catch(t){return Ct({code:"network",message:"Li kt ni khi xa cng n",cause:t})}}async function Kge(){try{const{data:e,error:t}=await Ot.from("supplier_debts").select("*").order("created_at",{ascending:!1});if(t)return Ct({code:"supabase",message:"Khng th ti danh sch cng n nh cung cp",cause:t});const r=(e||[]).map(n=>({id:n.id,supplierId:n.supplier_id,supplierName:n.supplier_name,description:n.description,totalAmount:n.total_amount,paidAmount:n.paid_amount,remainingAmount:n.remaining_amount,createdDate:n.created_date,branchId:n.branch_id}));return _n(r)}catch(e){return Ct({code:"network",message:"Li kt ni ti my ch",cause:e})}}async function Gge(e){try{const t={id:`SDEBT-${Date.now()}`,supplier_id:e.supplierId,supplier_name:e.supplierName,description:e.description,total_amount:e.totalAmount,paid_amount:e.paidAmount||0,remaining_amount:e.totalAmount-(e.paidAmount||0),created_date:e.createdDate,branch_id:e.branchId||"CN1"},{data:r,error:n}=await Ot.from("supplier_debts").insert(t).select().single();return n||!r?Ct({code:"supabase",message:(n==null?void 0:n.message)||"Khng th thm cng n",cause:n||new Error("No data returned")}):_n({id:r.id,supplierId:r.supplier_id,supplierName:r.supplier_name,description:r.description,totalAmount:r.total_amount,paidAmount:r.paid_amount,remainingAmount:r.remaining_amount,createdDate:r.created_date,branchId:r.branch_id})}catch(t){return Ct({code:"network",message:"Li kt ni khi thm cng n",cause:t})}}async function Xge(e,t){try{const r={};t.supplierName!==void 0&&(r.supplier_name=t.supplierName),t.description!==void 0&&(r.description=t.description),t.totalAmount!==void 0&&(r.total_amount=t.totalAmount),t.paidAmount!==void 0&&(r.paid_amount=t.paidAmount,r.remaining_amount=(t.totalAmount||0)-t.paidAmount),r.updated_at=new Date().toISOString();const{data:n,error:a}=await Ot.from("supplier_debts").update(r).eq("id",e).select().single();return a||!n?Ct({code:"supabase",message:"Khng th cp nht cng n",cause:a}):_n({id:n.id,supplierId:n.supplier_id,supplierName:n.supplier_name,description:n.description,totalAmount:n.total_amount,paidAmount:n.paid_amount,remainingAmount:n.remaining_amount,createdDate:n.created_date,branchId:n.branch_id})}catch(r){return Ct({code:"network",message:"Li kt ni khi cp nht cng n",cause:r})}}async function Yge(e){try{const{error:t}=await Ot.from("supplier_debts").delete().eq("id",e);return t?Ct({code:"supabase",message:"Khng th xa cng n",cause:t}):_n(void 0)}catch(t){return Ct({code:"network",message:"Li kt ni khi xa cng n",cause:t})}}function PC(){return Ts({queryKey:["customer_debts"],queryFn:async()=>{const e=await Hge();if(!e.ok)throw new Error(va(e.error));return e.data}})}function Tk(){const e=qn();return ha({mutationFn:async t=>{const r=await $ge(t);if(!r.ok){const n=r.error?va(r.error):"Khng th thm cng n";throw new Error(n)}return r.data},onSuccess:(t,r)=>{e.invalidateQueries({queryKey:["customer_debts"]}),r.saleId||Xe.success("Thm cng n thnh cng!")},onError:(t,r)=>{r.saleId||Xe.error((t==null?void 0:t.message)||"C li xy ra")}})}function kH(){const e=qn();return ha({mutationFn:async({id:t,updates:r})=>{const n=await Vge(t,r);if(!n.ok)throw new Error(va(n.error));return n.data},onSuccess:()=>{e.invalidateQueries({queryKey:["customer_debts"]}),Xe.success("Cp nht cng n thnh cng!")},onError:t=>{Xe.error((t==null?void 0:t.message)||"C li xy ra")}})}function Zge(){const e=qn();return ha({mutationFn:async t=>{const r=await Wge(t);if(!r.ok)throw new Error(va(r.error));return r.data},onSuccess:()=>{e.invalidateQueries({queryKey:["customer_debts"]}),Xe.success("Xa cng n thnh cng!")},onError:t=>{Xe.error((t==null?void 0:t.message)||"C li xy ra")}})}function Ok(){return Ts({queryKey:["supplier_debts"],queryFn:async()=>{const e=await Kge();if(!e.ok)throw new Error(va(e.error));return e.data}})}function Qge(){const e=qn();return ha({mutationFn:async t=>{const r=await Gge(t);if(!r.ok){const n=r.error?va(r.error):"Khng th thm cng n";throw new Error(n)}return r.data},onSuccess:()=>{e.invalidateQueries({queryKey:["supplier_debts"]}),Xe.success("Thm cng n thnh cng!")},onError:t=>{Xe.error((t==null?void 0:t.message)||"C li xy ra")}})}function Jge(){const e=qn();return ha({mutationFn:async({id:t,updates:r})=>{const n=await Xge(t,r);if(!n.ok)throw new Error(va(n.error));return n.data},onSuccess:()=>{e.invalidateQueries({queryKey:["supplier_debts"]}),Xe.success("Cp nht cng n thnh cng!")},onError:t=>{Xe.error((t==null?void 0:t.message)||"C li xy ra")}})}function ebe(){const e=qn();return ha({mutationFn:async t=>{const r=await Yge(t);if(!r.ok)throw new Error(va(r.error));return r.data},onSuccess:()=>{e.invalidateQueries({queryKey:["supplier_debts"]}),Xe.success("Xa cng n thnh cng!")},onError:t=>{Xe.error((t==null?void 0:t.message)||"C li xy ra")}})}const T2=5,tbe=({isOpen:e,onClose:t,sale:r,onPrint:n})=>{if(!e||!r)return null;const a=r.items.reduce((l,o)=>l+o.quantity*o.sellingPrice,0),i=a-r.total;return s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[60] p-4",children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg w-full max-w-2xl max-h-[90vh] overflow-hidden flex flex-col",children:[s.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-slate-200 dark:border-slate-700",children:[s.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:"Chi tit n hng"}),s.jsx("button",{onClick:t,className:"text-slate-500 hover:text-slate-700 dark:hover:text-slate-300 text-2xl",children:""})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-500 dark:text-slate-400",children:"M n hng"}),s.jsx("div",{className:"text-base font-semibold text-slate-900 dark:text-slate-100",children:r.sale_code||B1(r.id)||r.id})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Ngy to"}),s.jsxs("div",{className:"text-base font-semibold text-slate-900 dark:text-slate-100",children:[Bn(new Date(r.date),!1)," ",new Date(r.date).toLocaleTimeString("vi-VN",{hour:"2-digit",minute:"2-digit"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Khch hng"}),s.jsx("div",{className:"text-base font-semibold text-slate-900 dark:text-slate-100",children:r.customer.name}),r.customer.phone&&s.jsx("div",{className:"text-sm text-slate-500",children:r.customer.phone})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Nhn vin bn hng"}),s.jsx("div",{className:"text-base font-semibold text-slate-900 dark:text-slate-100",children:r.username||r.userName||"N/A"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Phng thc thanh ton"}),s.jsx("div",{className:"text-base font-semibold text-slate-900 dark:text-slate-100",children:r.paymentMethod==="cash"?"Tin mt":"Chuyn khon"})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-3",children:"Sn phm"}),s.jsx("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg overflow-hidden",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:s.jsxs("tr",{children:[s.jsx("th",{className:"text-left px-4 py-3 text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Tn sn phm"}),s.jsx("th",{className:"text-right px-4 py-3 text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"SL"}),s.jsx("th",{className:"text-right px-4 py-3 text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"n gi"}),s.jsx("th",{className:"text-right px-4 py-3 text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Thnh tin"})]})}),s.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:r.items.map((l,o)=>s.jsxs("tr",{children:[s.jsxs("td",{className:"px-4 py-3 text-sm text-slate-900 dark:text-slate-100",children:[l.partName,l.sku&&s.jsxs("div",{className:"text-xs text-slate-500",children:["SKU: ",l.sku]})]}),s.jsx("td",{className:"px-4 py-3 text-sm text-right text-slate-900 dark:text-slate-100",children:l.quantity}),s.jsx("td",{className:"px-4 py-3 text-sm text-right text-slate-900 dark:text-slate-100",children:Oe(l.sellingPrice)}),s.jsx("td",{className:"px-4 py-3 text-sm text-right font-semibold text-slate-900 dark:text-slate-100",children:Oe(l.quantity*l.sellingPrice)})]},o))})]})})]}),s.jsx("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-4",children:s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Tm tnh:"}),s.jsx("span",{className:"font-semibold text-slate-900 dark:text-slate-100",children:Oe(a)})]}),i>0&&s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Gim gi:"}),s.jsxs("span",{className:"font-semibold text-red-600 dark:text-red-400",children:["-",Oe(i)]})]}),s.jsxs("div",{className:"flex justify-between text-lg font-bold border-t border-slate-200 dark:border-slate-700 pt-2",children:[s.jsx("span",{className:"text-slate-900 dark:text-slate-100",children:"Tng cng:"}),s.jsx("span",{className:"text-green-600 dark:text-green-400",children:Oe(r.total)})]})]})})]}),s.jsxs("div",{className:"flex justify-end gap-3 p-6 border-t border-slate-200 dark:border-slate-700",children:[s.jsx("button",{onClick:t,className:"px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-700 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:"ng"}),s.jsxs("button",{onClick:()=>{n(r),t()},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})}),"In ha n"]})]})]})})},rbe=({isOpen:e,onClose:t,sale:r,onSave:n})=>{const{customers:a,upsertCustomer:i}=Ba(),{data:l=[]}=mf(),o=qn(),{profile:c}=Dc(),[d,f]=T.useState([]),[p,y]=T.useState({id:"",name:"",phone:""}),[g,N]=T.useState("cash"),[w,k]=T.useState(0),[S,O]=T.useState(""),[E,D]=T.useState(!1),[q,W]=T.useState(!1),[R,U]=T.useState(""),[z,Z]=T.useState(""),[H,K]=T.useState(""),[J,ae]=T.useState(!1);if(T.useEffect(()=>{r&&(f([...r.items]),y({id:r.customer.id||"",name:r.customer.name,phone:r.customer.phone||""}),K(r.customer.name),N(r.paymentMethod),k(r.discount||0))},[r]),!e||!r)return null;const se=d.reduce((Q,Ce)=>Q+Ce.quantity*Ce.sellingPrice,0),ue=se-w,fe=l.filter(Q=>Q.name.toLowerCase().includes(S.toLowerCase())||Q.sku.toLowerCase().includes(S.toLowerCase())),ke=a.filter(Q=>Q.name.toLowerCase().includes(H.toLowerCase())),_e=Q=>{const Ce=typeof Q.stock=="object"?Q.stock[r.branchId]||0:Q.stock,me=typeof Q.retailPrice=="object"?Q.retailPrice[r.branchId]||0:Q.retailPrice||0,ie=d.find(je=>je.partId===Q.id);f(ie?d.map(je=>je.partId===Q.id?{...je,quantity:je.quantity+1}:je):[...d,{partId:Q.id,partName:Q.name,sku:Q.sku,quantity:1,sellingPrice:me,stockSnapshot:typeof Ce=="number"?Ce:0}]),O(""),D(!1)},Le=Q=>{y({id:Q.id,name:Q.name,phone:Q.phone||""}),K(Q.name),ae(!1)},xe=async()=>{if(!R.trim()){Xe.error("Vui lng nhp tn khch hng");return}try{const Q={id:crypto.randomUUID(),name:R,phone:z||void 0,email:"",created_at:new Date().toISOString()};await i(Q),y({id:Q.id,name:Q.name,phone:Q.phone||""}),K(Q.name),W(!1),U(""),Z(""),Xe.success("Thm khch hng thnh cng")}catch(Q){console.error("Error adding customer:",Q),Xe.error("Li khi thm khch hng")}},B=(Q,Ce)=>{Ce<=0?f(d.filter(me=>me.partId!==Q)):f(d.map(me=>me.partId===Q?{...me,quantity:Ce}:me))},ee=(Q,Ce)=>{f(d.map(me=>me.partId===Q?{...me,sellingPrice:Ce}:me))},Y=Q=>{f(d.filter(Ce=>Ce.partId!==Q))},re=async()=>{if(d.length===0){Xe.error("Vui lng c t nht mt sn phm");return}if(!p.name){Xe.error("Vui lng nhp tn khch hng");return}try{await n({id:r.id,items:d,customer:p,paymentMethod:g,discount:w}),o.invalidateQueries({queryKey:["salesRepoPaged"]}),t()}catch(Q){console.error("Error saving sale:",Q)}};return s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[60] p-4",children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg w-full max-w-2xl max-h-[95vh] overflow-hidden flex flex-col",children:[s.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-slate-200 dark:border-slate-700",children:[s.jsxs("h2",{className:"text-lg font-bold text-slate-900 dark:text-slate-100",children:[" [Chnh sa] n Xut Bn ",r.sale_code||B1(r.id)]}),s.jsx("button",{onClick:t,className:"text-slate-500 hover:text-slate-700 dark:hover:text-slate-300 text-2xl leading-none",children:""})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Thi gian bn hng:"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"text",value:Bn(new Date(r.date),!1),disabled:!0,className:"flex-1 px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-slate-50 dark:bg-slate-700 text-slate-900 dark:text-slate-100"}),s.jsx("input",{type:"text",value:new Date(r.date).toLocaleTimeString("vi-VN",{hour:"2-digit",minute:"2-digit"}),disabled:!0,className:"w-24 px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-slate-50 dark:bg-slate-700 text-slate-900 dark:text-slate-100 text-center"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Khch hng: "}),q?s.jsxs("div",{className:"border border-slate-300 dark:border-slate-600 rounded-lg p-3 space-y-2",children:[s.jsx("input",{type:"text",value:R,onChange:Q=>U(Q.target.value),placeholder:"Tn khch hng",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"}),s.jsx("input",{type:"tel",value:z,onChange:Q=>Z(Q.target.value),placeholder:"S in thoi (ty chn)",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:xe,className:"flex-1 px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Lu"}),s.jsx("button",{onClick:()=>{W(!1),U(""),Z("")},className:"px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-700 dark:text-slate-300",children:"Hy"})]})]}):s.jsx(s.Fragment,{children:s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx("input",{type:"text",value:H,onChange:Q=>{K(Q.target.value),ae(!0)},onFocus:()=>ae(!0),placeholder:"Tm kim v chn mt khch hng",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"}),J&&ke.length>0&&s.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg shadow-lg max-h-48 overflow-y-auto z-10",children:ke.slice(0,10).map(Q=>s.jsxs("button",{onClick:()=>Le(Q),className:"w-full px-3 py-2 text-left hover:bg-slate-100 dark:hover:bg-slate-600 text-sm",children:[s.jsx("div",{className:"font-medium text-slate-900 dark:text-slate-100",children:Q.name}),Q.phone&&s.jsx("div",{className:"text-xs text-slate-500",children:Q.phone})]},Q.id))})]}),s.jsxs("button",{onClick:()=>W(!0),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2",children:[s.jsx(Ac,{className:"w-4 h-4"}),"Thm mi"]})]})})]}),s.jsxs("div",{children:[s.jsx("div",{className:"flex items-center justify-between mb-2",children:s.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Chi tit sn phm:"})}),s.jsxs("div",{className:"relative mb-3",children:[s.jsx("input",{type:"text",value:S,onChange:Q=>{O(Q.target.value),D(!0)},onFocus:()=>D(!0),placeholder:"Tm kim v thm sn phm...",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"}),E&&S&&fe.length>0&&s.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg shadow-lg max-h-60 overflow-y-auto z-10",children:fe.slice(0,10).map(Q=>s.jsxs("button",{onClick:()=>_e(Q),className:"w-full px-3 py-2 text-left hover:bg-slate-100 dark:hover:bg-slate-600 text-sm",children:[s.jsx("div",{className:"font-medium text-slate-900 dark:text-slate-100",children:Q.name}),s.jsxs("div",{className:"text-xs text-slate-500",children:["SKU: ",Q.sku]})]},Q.id))})]}),s.jsx("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg overflow-hidden",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:s.jsxs("tr",{children:[s.jsx("th",{className:"text-center px-2 py-2 text-xs font-medium text-slate-500 dark:text-slate-400 w-8",children:"-"}),s.jsx("th",{className:"text-left px-3 py-2 text-xs font-medium text-slate-500 dark:text-slate-400",children:"Tn"}),s.jsx("th",{className:"text-center px-3 py-2 text-xs font-medium text-slate-500 dark:text-slate-400 w-20",children:"SL"}),s.jsx("th",{className:"text-right px-3 py-2 text-xs font-medium text-slate-500 dark:text-slate-400 w-24",children:"n gi"}),s.jsx("th",{className:"text-right px-3 py-2 text-xs font-medium text-slate-500 dark:text-slate-400 w-28",children:"Thnh tin"}),s.jsx("th",{className:"w-10"})]})}),s.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:d.map((Q,Ce)=>s.jsxs("tr",{children:[s.jsx("td",{className:"px-2 py-2 text-center text-sm text-slate-900 dark:text-slate-100",children:Ce+1}),s.jsxs("td",{className:"px-3 py-2 text-sm",children:[s.jsx("div",{className:"font-medium text-slate-900 dark:text-slate-100",children:Q.partName}),s.jsx("div",{className:"text-xs text-slate-500",children:Q.sku})]}),s.jsx("td",{className:"px-3 py-2",children:s.jsx("input",{type:"number",value:Q.quantity,onChange:me=>B(Q.partId,parseInt(me.target.value)||0),min:"1",className:"w-full px-2 py-1 border border-slate-300 dark:border-slate-600 rounded text-center text-sm bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})}),s.jsx("td",{className:"px-3 py-2",children:s.jsx("input",{type:"number",value:Q.sellingPrice,onChange:me=>ee(Q.partId,parseFloat(me.target.value)||0),min:"0",step:"1000",className:"w-full px-2 py-1 border border-slate-300 dark:border-slate-600 rounded text-right text-sm bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})}),s.jsx("td",{className:"px-3 py-2 text-right text-sm font-semibold text-slate-900 dark:text-slate-100",children:Oe(Q.quantity*Q.sellingPrice)}),s.jsx("td",{className:"px-2 py-2 text-center",children:s.jsx("button",{onClick:()=>Y(Q.partId),className:"text-slate-400 hover:text-red-600 transition-colors",children:s.jsx(xp,{className:"w-5 h-5"})})})]},Q.partId))})]})}),d.length===0&&s.jsx("div",{className:"text-center py-8 text-slate-400 text-sm",children:"Cha c sn phm no"}),d.length>0&&s.jsxs("div",{className:"mt-2 text-right",children:[s.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:"TNG:"}),s.jsx("div",{className:"text-lg font-bold text-slate-900 dark:text-slate-100",children:Oe(se)})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Chn nhn vin bn hng"}),s.jsx("select",{disabled:!0,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-slate-50 dark:bg-slate-700 text-slate-900 dark:text-slate-100",children:s.jsx("option",{children:r.username||r.userName})})]}),s.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-4",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Cng n:"}),s.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 mb-3",children:"Khch hng phi thanh ton"}),s.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-3 mb-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm font-medium text-green-700 dark:text-green-400",children:"TNG PHI THU:"}),s.jsx("span",{className:"text-lg font-bold text-green-700 dark:text-green-400",children:Oe(ue)})]}),s.jsxs("div",{className:"mt-2 flex items-center gap-2 text-xs text-green-600 dark:text-green-400",children:[s.jsx("input",{type:"checkbox",checked:!0,readOnly:!0}),s.jsx("span",{children:" thanh ton "})]})]}),s.jsxs("div",{className:"mb-3",children:[s.jsx("label",{className:"block text-xs text-slate-500 dark:text-slate-400 mb-2",children:"- Thi gian Ngi thu - Ghi ch"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>N("cash"),className:`flex-1 py-2 rounded-lg border transition-colors text-sm font-medium ${g==="cash"?"bg-green-600 text-white border-green-600":"border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:"Tin mt"}),s.jsx("button",{onClick:()=>N("bank"),className:`flex-1 py-2 rounded-lg border transition-colors text-sm font-medium ${g==="bank"?"bg-blue-600 text-white border-blue-600":"border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:"Chuyn khon"})]})]}),s.jsx("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg overflow-hidden",children:s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:s.jsxs("tr",{children:[s.jsx("th",{className:"text-center px-2 py-2 text-xs font-medium text-slate-500 dark:text-slate-400",children:"-"}),s.jsx("th",{className:"text-left px-3 py-2 text-xs font-medium text-slate-500 dark:text-slate-400",children:"Thi gian"}),s.jsx("th",{className:"text-left px-3 py-2 text-xs font-medium text-slate-500 dark:text-slate-400",children:"Ngi thu - Ghi ch"}),s.jsx("th",{className:"text-right px-3 py-2 text-xs font-medium text-slate-500 dark:text-slate-400",children:"S tin"}),s.jsx("th",{className:"w-10"})]})}),s.jsx("tbody",{className:"bg-white dark:bg-slate-800",children:s.jsxs("tr",{children:[s.jsx("td",{className:"px-2 py-2 text-center text-slate-900 dark:text-slate-100",children:"1"}),s.jsxs("td",{className:"px-3 py-2",children:[s.jsxs("div",{className:"text-slate-900 dark:text-slate-100",children:[new Date(r.date).toLocaleTimeString("vi-VN",{hour:"2-digit",minute:"2-digit"})," ",Bn(new Date(r.date),!1)]}),s.jsx("div",{className:"text-xs text-slate-500",children:"(Tin mt)"})]}),s.jsx("td",{className:"px-3 py-2 text-slate-900 dark:text-slate-100",children:r.username||r.userName}),s.jsx("td",{className:"px-3 py-2 text-right text-slate-900 dark:text-slate-100",children:Oe(ue)}),s.jsx("td",{})]})})]})}),s.jsxs("div",{className:"mt-2 text-right",children:[s.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Tng  thu"}),s.jsx("div",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:Oe(ue)})]})]})]}),s.jsxs("div",{className:"flex items-center justify-end gap-3 p-4 border-t border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-700",children:[s.jsx("button",{onClick:t,className:"px-6 py-2 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-600 transition-colors font-medium",children:"NG"}),s.jsx("button",{onClick:re,disabled:d.length===0,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed font-semibold",children:"LU"})]})]})})},nbe=({isOpen:e,onClose:t,sales:r,currentBranchId:n,onPrintReceipt:a,onEditSale:i,onDeleteSale:l,page:o,totalPages:c,total:d,hasMore:f,pageSize:p,onPrevPage:y,onNextPage:g,onPageSizeChange:N,search:w,onSearchChange:k,fromDate:S,toDate:O,onDateRangeChange:E,status:D="all",onStatusChange:q,paymentMethodFilter:W="all",onPaymentMethodFilterChange:R,keysetMode:U=!1,onToggleKeyset:z,customerDebts:Z=[]})=>{const[H,K]=T.useState("7days"),[J,ae]=T.useState(""),[se,ue]=T.useState(""),[fe,ke]=T.useState(""),[_e,Le]=T.useState(null),[xe,B]=T.useState(!1),[ee,Y]=T.useState(!1),[re,Q]=T.useState(null);T.useEffect(()=>{const ie=new Date,je=new Date(ie.getFullYear(),ie.getMonth(),ie.getDate()),be=new Date(ie.getFullYear(),ie.getMonth(),ie.getDate(),23,59,59,999);let le,Ee;switch(H){case"today":le=je,Ee=be;break;case"week":{const Me=ie.getDay(),ye=Me===0?-6:1-Me,at=new Date(ie);at.setDate(ie.getDate()+ye),le=new Date(at.getFullYear(),at.getMonth(),at.getDate()),Ee=be;break}case"month":{le=new Date(ie.getFullYear(),ie.getMonth(),1),Ee=be;break}case"7days":{const Me=new Date(ie);Me.setDate(Me.getDate()-6),le=new Date(Me.getFullYear(),Me.getMonth(),Me.getDate()),Ee=be;break}case"30days":{const Me=new Date(ie);Me.setDate(Me.getDate()-29),le=new Date(Me.getFullYear(),Me.getMonth(),Me.getDate()),Ee=be;break}case"custom":{se&&fe&&(le=new Date(se),Ee=new Date(fe+"T23:59:59"));break}case"all":le=void 0,Ee=void 0;break}E(le?le.toISOString():void 0,Ee?Ee.toISOString():void 0)},[H,se,fe,E]);const Ce=T.useMemo(()=>{let ie=r.filter(je=>je.branchId===n||je.branchid===n);return J&&(ie=ie.filter(je=>je.id.toLowerCase().includes(J.toLowerCase())||(je.sale_code||"").toLowerCase().includes(J.toLowerCase())||je.customer.name.toLowerCase().includes(J.toLowerCase())||(je.username||je.userName||"").toLowerCase().includes(J.toLowerCase()))),ie.sort((je,be)=>new Date(be.date).getTime()-new Date(je.date).getTime()),ie},[r,n,J]),me=T.useMemo(()=>Ce.reduce((ie,je)=>ie+je.total,0),[Ce]);return T.useEffect(()=>{const ie=je=>{je.target.closest(".dropdown-menu-container")||Q(null)};if(re)return document.addEventListener("mousedown",ie),()=>document.removeEventListener("mousedown",ie)},[re]),e?s.jsxs(ua.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex md:items-center md:justify-center items-end justify-center p-0 md:p-4",children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 w-full md:max-w-7xl max-h-[95vh] md:rounded-2xl rounded-t-3xl shadow-2xl overflow-hidden flex flex-col animate-slide-up-bottom",children:[s.jsxs("div",{className:"p-4 border-b border-slate-200 dark:border-slate-700 bg-white/95 dark:bg-slate-900/70 backdrop-blur",children:[s.jsxs("div",{className:"flex items-start justify-between gap-3 mb-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-400 dark:text-slate-500",children:"Lch s bn hng"}),s.jsx("p",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:"Theo di giao dch gn y"})]}),s.jsx("button",{onClick:t,className:"text-slate-500 hover:text-slate-900 dark:hover:text-white text-2xl leading-none px-2","aria-label":"ng lch s bn hng",children:""})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"flex gap-2 overflow-x-auto pb-1 -mx-4 px-4 md:mx-0 md:px-0 scrollbar-thin",children:[{key:"7days",label:"7 ngy qua"},{key:"week",label:"Tun"},{key:"month",label:"Thng"},{key:"30days",label:"30 ngy qua"},{key:"custom",label:"Ty chn"},{key:"all",label:"Tt c"}].map(ie=>s.jsx("button",{onClick:()=>K(ie.key),className:`px-4 py-2 rounded-2xl text-sm font-medium whitespace-nowrap border transition-all min-w-[96px] ${H===ie.key?"bg-blue-600 text-white border-blue-600 shadow-lg shadow-blue-500/30":"bg-slate-100 dark:bg-slate-800/80 text-slate-700 dark:text-slate-200 border-transparent"}`,children:ie.label},ie.key))}),s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-3",children:[s.jsxs("div",{className:"w-full md:flex-1 relative",children:[s.jsx("input",{type:"text",value:J,onChange:ie=>ae(ie.target.value),placeholder:"Tm ha n, khch hng hoc m phiu",className:"w-full pl-10 pr-4 py-2.5 rounded-xl border border-slate-200 dark:border-slate-600 bg-slate-50 dark:bg-slate-800 text-sm text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500"}),s.jsxs("svg",{className:"w-5 h-5 text-slate-400 absolute left-3 top-1/2 -translate-y-1/2",fill:"none",stroke:"currentColor",strokeWidth:"1.5",viewBox:"0 0 24 24",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11 19a8 8 0 100-16 8 8 0 000 16z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-4.3-4.3"})]})]}),s.jsx("div",{className:"flex items-center justify-between md:justify-end gap-4 w-full md:w-auto",children:s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Tng doanh thu"}),s.jsx("div",{className:"text-xl font-bold text-green-600 dark:text-green-400",children:Oe(me)})]})})]}),H==="custom"&&s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-3",children:[s.jsxs("label",{className:"text-sm text-slate-600 dark:text-slate-400 flex items-center gap-2",children:["T",s.jsx("input",{type:"date",value:se,onChange:ie=>ue(ie.target.value),className:"px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100 text-sm"})]}),s.jsxs("label",{className:"text-sm text-slate-600 dark:text-slate-400 flex items-center gap-2",children:["n",s.jsx("input",{type:"date",value:fe,onChange:ie=>ke(ie.target.value),className:"px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100 text-sm"})]})]})]})]}),s.jsx("div",{className:"flex-1 overflow-y-auto",children:Ce.length===0?s.jsx("div",{className:"text-center py-12 text-slate-400",children:"Khng c ha n no"}):s.jsxs("div",{children:[s.jsxs("div",{className:"hidden md:grid grid-cols-12 gap-4 px-4 py-3 bg-slate-100 dark:bg-slate-700 border-b border-slate-200 dark:border-slate-600 sticky top-0 z-10",children:[s.jsx("div",{className:"col-span-1 text-xs font-semibold text-slate-600 dark:text-slate-300"}),s.jsx("div",{className:"col-span-2 text-xs font-semibold text-slate-600 dark:text-slate-300",children:"M phiu"}),s.jsx("div",{className:"col-span-2 text-xs font-semibold text-slate-600 dark:text-slate-300",children:"Khch hng"}),s.jsx("div",{className:"col-span-4 text-xs font-semibold text-slate-600 dark:text-slate-300",children:"Chi tit"}),s.jsx("div",{className:"col-span-2 text-xs font-semibold text-slate-600 dark:text-slate-300",children:"Thanh ton"}),s.jsx("div",{className:"col-span-1 text-xs font-semibold text-slate-600 dark:text-slate-300",children:"Thao tc"})]}),s.jsx("div",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:Ce.map(ie=>{var Kt,Dt,fr,xr,nr,Mr;const je=new Date(ie.date);ie.items.reduce((rr,Gt)=>rr+Gt.quantity*Gt.sellingPrice,0);const be=(Z||[]).find(rr=>{var Gt;return(Gt=rr.description)==null?void 0:Gt.includes(ie.sale_code||ie.id)}),le=be?be.totalAmount-be.remainingAmount:ie.total,Ee=(be==null?void 0:be.remainingAmount)||0,Me=Ee>0,at=ie.items.slice(0,3),lt=ie.items.length-at.length,ut=je.toLocaleDateString("vi-VN",{day:"2-digit",month:"2-digit",year:"numeric"}),nt=je.toLocaleTimeString("vi-VN",{hour:"2-digit",minute:"2-digit"}),ot=(((Dt=(Kt=ie.customer)==null?void 0:Kt.name)==null?void 0:Dt.charAt(0))||"K").toUpperCase(),We=ie.paymentMethod==="cash"?"Tin mt":"Chuyn khon";return s.jsxs("div",{className:"p-4 hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors",children:[s.jsxs("div",{className:"md:hidden flex flex-col gap-3 bg-white dark:bg-slate-800/60 rounded-2xl border border-slate-200 dark:border-slate-700 p-4 shadow-sm",children:[s.jsxs("div",{className:"flex items-start justify-between gap-3",children:[s.jsxs("div",{children:[ie.sale_code&&s.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-blue-600 dark:text-blue-300",children:[s.jsx(Nee,{className:"w-4 h-4"}),ie.sale_code]}),s.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400 flex items-center gap-1 mt-1",children:[s.jsx(eee,{className:"w-3.5 h-3.5"}),s.jsxs("span",{children:[ut,"  ",nt]})]}),s.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400 flex items-center gap-1 mt-1",children:[s.jsx("span",{className:"font-medium text-slate-600 dark:text-slate-300",children:"NV"}),s.jsx("span",{children:ie.userName||ie.username||"N/A"})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Tng tin"}),s.jsx("div",{className:"text-lg font-bold text-slate-900 dark:text-white",children:Oe(ie.total)}),s.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400 flex items-center gap-1 justify-end mt-1",children:[ie.paymentMethod==="cash"?s.jsx(S6,{className:"w-4 h-4"}):s.jsx(fF,{className:"w-4 h-4"}),s.jsx("span",{children:We})]})]})]}),s.jsxs("div",{className:"flex items-center gap-3 bg-slate-50 dark:bg-slate-900/30 rounded-2xl p-3",children:[s.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center text-blue-600 dark:text-blue-200 font-semibold",children:ot}),s.jsxs("div",{children:[s.jsx("div",{className:"text-base font-semibold text-slate-900 dark:text-white",children:((fr=ie.customer)==null?void 0:fr.name)||"Khch vng lai"}),((xr=ie.customer)==null?void 0:xr.phone)&&s.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400 flex items-center gap-1",children:[s.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",strokeWidth:"1.5",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2 5.5C2 4.119 3.12 3 4.5 3h1.76c.636 0 1.197.4 1.39 1.005l.8 2.47a1.5 1.5 0 01-.35 1.46L7.11 8.94a12.044 12.044 0 005.95 5.95l1.006-1.002a1.5 1.5 0 011.46-.349l2.469.8c.606.193 1.005.754 1.005 1.39V19.5c0 1.38-1.119 2.5-2.5 2.5h-.25C8.268 22 2 15.732 2 7.75v-.25z"})}),ie.customer.phone]})]})]}),s.jsxs("div",{className:"space-y-2",children:[at.map((rr,Gt)=>s.jsxs("div",{className:"flex items-start justify-between text-sm text-slate-700 dark:text-slate-200",children:[s.jsxs("div",{children:[s.jsxs("span",{className:"font-semibold",children:[rr.quantity," x ",rr.partName]}),s.jsxs("div",{className:"text-xs text-slate-400",children:[Oe(rr.sellingPrice||0)," ","/ sn phm"]})]}),s.jsx("span",{className:"font-bold text-slate-900 dark:text-white",children:Oe(rr.quantity*(rr.sellingPrice||0))})]},Gt)),lt>0&&s.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:["+",lt," sn phm khc"]})]}),s.jsxs("div",{className:"flex flex-wrap gap-2",children:[Me?s.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-semibold bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-200",children:[" Cn n ",Oe(Ee)]}):s.jsx("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-semibold bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-200",children:"  thanh ton"}),s.jsx("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-medium bg-slate-100 text-slate-700 dark:bg-slate-800 dark:text-slate-200",children:We})]}),s.jsxs("div",{className:"flex flex-wrap gap-2 pt-3 border-t border-dashed border-slate-200 dark:border-slate-700",children:[s.jsx("button",{onClick:()=>a(ie),className:"flex-1 min-w-[120px] px-3 py-2 rounded-xl bg-slate-100 dark:bg-slate-800 text-slate-700 dark:text-slate-200 text-sm font-medium",children:"In ho n"}),s.jsx("button",{onClick:()=>{Le(ie),B(!0)},className:"flex-1 min-w-[120px] px-3 py-2 rounded-xl bg-slate-100 dark:bg-slate-800 text-slate-700 dark:text-slate-200 text-sm font-medium",children:"Xem chi tit"}),s.jsx("button",{onClick:()=>{Le(ie),Y(!0)},className:"flex-1 min-w-[120px] px-3 py-2 rounded-xl bg-slate-100 dark:bg-slate-800 text-slate-700 dark:text-slate-200 text-sm font-medium",children:"Chnh sa"}),s.jsx("button",{onClick:()=>l(ie.id),className:"flex-1 min-w-[120px] px-3 py-2 rounded-xl bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-300 text-sm font-medium",children:"Xa n"})]})]}),s.jsxs("div",{className:"hidden md:grid grid-cols-12 gap-4 items-start",children:[s.jsx("div",{className:"col-span-1 flex items-start pt-1",children:s.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded border-slate-300"})}),s.jsx("div",{className:"col-span-2",children:s.jsxs("div",{className:"space-y-1",children:[ie.sale_code&&s.jsx("div",{className:"text-sm font-bold text-blue-600 dark:text-blue-400",children:ie.sale_code}),s.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:[je.getDate(),"/",je.getMonth()+1,"/",je.getFullYear()," ",String(je.getHours()).padStart(2,"0"),":",String(je.getMinutes()).padStart(2,"0")]}),s.jsxs("div",{className:"text-xs text-slate-600 dark:text-slate-300",children:[s.jsx("span",{className:"font-medium",children:"NV:"})," ",ie.userName||ie.username||"N/A"]})]})}),s.jsx("div",{className:"col-span-2",children:s.jsxs("div",{className:"space-y-1",children:[s.jsx("div",{className:"text-sm font-semibold text-slate-900 dark:text-slate-100",children:((nr=ie.customer)==null?void 0:nr.name)||"Khch vng lai"}),((Mr=ie.customer)==null?void 0:Mr.phone)&&s.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:[" ",ie.customer.phone]})]})}),s.jsx("div",{className:"col-span-4",children:s.jsx("div",{className:"space-y-1",children:ie.items.map((rr,Gt)=>s.jsxs("div",{className:"text-xs text-slate-700 dark:text-slate-300",children:[s.jsxs("span",{className:"font-medium",children:[rr.quantity," x"]})," ",rr.partName,s.jsxs("span",{className:"text-slate-400 ml-1",children:["(",Oe(rr.sellingPrice||0),")"]})," = ",s.jsx("span",{className:"font-semibold text-slate-900 dark:text-slate-100",children:Oe(rr.quantity*(rr.sellingPrice||0))})]},Gt))})}),s.jsx("div",{className:"col-span-2",children:s.jsxs("div",{className:"space-y-1",children:[s.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:"Tng tin:"}),s.jsx("div",{className:"text-base font-bold text-slate-900 dark:text-slate-100",children:Oe(ie.total)}),Me?s.jsxs("div",{className:"mt-2 space-y-1",children:[s.jsxs("div",{className:"text-xs text-green-600 dark:text-green-400",children:[" tr: ",Oe(le)]}),s.jsxs("div",{className:"text-xs font-semibold text-red-600 dark:text-red-400",children:["Cn n: ",Oe(Ee)]}),s.jsx("div",{className:"inline-flex items-center gap-1 px-2 py-1 rounded text-xs font-medium bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-300",children:" Cn n"})]}):s.jsx("div",{className:"mt-2",children:s.jsx("div",{className:"inline-flex items-center gap-1 px-2 py-1 rounded text-xs font-medium bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-300",children:"  thanh ton"})}),s.jsx("div",{className:"text-xs text-slate-500 mt-1",children:ie.paymentMethod==="cash"?" Tin mt":" Chuyn khon"})]})}),s.jsxs("div",{className:"col-span-1 flex items-start justify-end gap-2 pt-1",children:[s.jsx("button",{onClick:()=>{Le(ie),Y(!0)},className:"p-1.5 text-slate-400 hover:text-amber-600 dark:hover:text-amber-400 transition-colors",title:"Chnh sa",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),s.jsxs("div",{className:"relative dropdown-menu-container",children:[s.jsx("button",{onClick:()=>Q(re===ie.id?null:ie.id),className:"p-1.5 text-slate-400 hover:text-slate-600 dark:hover:text-slate-300 transition-colors",title:"Ty chn",children:s.jsxs("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:[s.jsx("circle",{cx:"12",cy:"5",r:"2"}),s.jsx("circle",{cx:"12",cy:"12",r:"2"}),s.jsx("circle",{cx:"12",cy:"19",r:"2"})]})}),re===ie.id&&s.jsxs("div",{className:"absolute right-0 mt-1 w-48 bg-white dark:bg-slate-800 rounded-lg shadow-lg border border-slate-200 dark:border-slate-700 z-50",children:[s.jsxs("button",{onClick:()=>{a(ie),Q(null)},className:"w-full text-left px-4 py-2 text-sm text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700 flex items-center gap-2 rounded-t-lg",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})}),"In li ha n"]}),s.jsxs("button",{onClick:()=>{Le(ie),B(!0),Q(null)},className:"w-full text-left px-4 py-2 text-sm text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700 flex items-center gap-2",children:[s.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),"Xem chi tit"]}),s.jsxs("button",{onClick:()=>{l&&l(ie.id),Q(null)},className:"w-full text-left px-4 py-2 text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 flex items-center gap-2 rounded-b-lg",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Xa ha n"]})]})]})]})]})]},ie.id)})})]})}),s.jsx("div",{className:"p-4 border-t border-slate-200 dark:border-slate-700 flex items-center justify-between",children:s.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:["Hin th ",Ce.length," n hng"]})})]})}),s.jsx(tbe,{isOpen:xe,onClose:()=>{B(!1),Le(null)},sale:_e,onPrint:a}),s.jsx(rbe,{isOpen:ee,onClose:()=>{Y(!1),Le(null)},sale:_e,onSave:async ie=>{try{const{supabase:je}=await hm(async()=>{const{supabase:ye}=await Promise.resolve().then(()=>TJ);return{supabase:ye}},[]),{profile:be}=await hm(async()=>{const{profile:ye}=await Promise.resolve().then(()=>$J);return{profile:ye}},void 0).then(ye=>({profile:null})),Ee=ie.items.reduce((ye,at)=>ye+at.quantity*at.sellingPrice,0)-ie.discount,{error:Me}=await je.from("sales").update({items:ie.items,customer:ie.customer,paymentmethod:ie.paymentMethod,discount:ie.discount,total:Ee}).eq("id",ie.id);if(Me)throw Me;await Bs(null,{action:"sale_update",tableName:"sales",recordId:ie.id,newData:{items:ie.items,customer:ie.customer,paymentMethod:ie.paymentMethod,discount:ie.discount,total:Ee}}),Xe.success(" cp nht n hng thnh cng"),Y(!1),Le(null)}catch(je){console.error("Error updating sale:",je),Xe.error("Li khi cp nht n hng: "+je.message)}}})]}):null},abe=()=>{const{customers:e,upsertCustomer:t,cartItems:r,setCartItems:n,clearCart:a,deleteSale:i,currentBranchId:l,finalizeSale:o,setCashTransactions:c,setPaymentSources:d}=Ba(),f=qn(),{data:p=[],isLoading:y,error:g}=mf(),{data:N=[]}=PC(),[w,k]=T.useState(1),[S,O]=T.useState(20),[E,D]=T.useState(""),[q,W]=T.useState(""),[R,U]=T.useState(),[z,Z]=T.useState(),[H,K]=T.useState("all"),[J,ae]=T.useState("all"),[se,ue]=T.useState(!1),[fe,ke]=T.useState(null),_e={branchId:l,page:se?void 0:w,pageSize:S,search:q||void 0,fromDate:R,toDate:z,mode:se?"keyset":"offset",afterDate:se?fe==null?void 0:fe.afterDate:void 0,afterId:se?fe==null?void 0:fe.afterId:void 0,status:H==="all"?void 0:H==="cancelled"?"refunded":H==="completed"?"completed":H,paymentMethod:J==="all"?void 0:J},{data:Le,isLoading:xe,error:B}=$ee(_e),ee=(Le==null?void 0:Le.data)||[],Y=(Le==null?void 0:Le.meta)||{page:1,totalPages:1,total:ee.length,hasMore:!1};T.useEffect(()=>{var Je;se&&((Je=Le==null?void 0:Le.meta)==null?void 0:Je.mode)==="keyset"&&ke({afterDate:Le.meta.nextAfterDate,afterId:Le.meta.nextAfterId})},[se,Le]);const{mutateAsync:re}=Vee(),Q=Tk(),Ce=T.useCallback(()=>k(Je=>Math.max(1,Je-1)),[]),me=T.useCallback(()=>k(Je=>Je+1),[]),ie=T.useCallback(Je=>{O(Je),k(1),se&&ke(null)},[]);T.useEffect(()=>{const Je=setTimeout(()=>{W(E),k(1)},300);return()=>clearTimeout(Je)},[E]);const[je,be]=T.useState(""),[le,Ee]=T.useState("all"),[Me,ye]=T.useState(""),[at,lt]=T.useState(!1),ut=T.useRef(null),[nt,ot]=T.useState(""),[We,Kt]=T.useState("products"),[Dt,fr]=T.useState(null),[xr,nr]=T.useState(!1),[Mr,rr]=T.useState(0),[Gt,Vt]=T.useState("amount"),[cr,br]=T.useState(0),[ar,xt]=T.useState(!1),[yr,Ge]=T.useState(!1),[vt,$t]=T.useState({name:"",phone:"",vehicleModel:"",licensePlate:""}),[Yt,Er]=T.useState(""),[wr,Ke]=T.useState(""),[Et,ur]=T.useState(""),[Br,Tr]=T.useState([]),[Zt,Pr]=T.useState(0),[sr,Or]=T.useState(null),[qr,Lr]=T.useState(null),[An,Ir]=T.useState(0),[Nn,we]=T.useState(!1);T.useEffect(()=>{var Je;at&&((Je=ut.current)==null||Je.focus())},[at]);const[Ne,De]=T.useState(!1),[Ie,oe]=T.useState(null),[ne,ze]=T.useState(null);T.useEffect(()=>{(async()=>{try{const{data:dr,error:kr}=await Ot.from("store_settings").select("store_name, address, phone, email, logo_url, bank_qr_url, bank_name, bank_account_number, bank_account_holder, bank_branch").order("created_at",{ascending:!1}).limit(1).single();if(kr){console.error("Error fetching store settings:",kr);return}ze(dr)}catch(dr){console.error("Failed to fetch store settings:",dr)}})()},[]);const st=T.useCallback(Je=>{var dn,ht;const dr=((dn=Je.retailPrice)==null?void 0:dn[l])??0,kr=((ht=Je.stock)==null?void 0:ht[l])??0,pr=r.find(Be=>Be.partId===Je.id);if(pr){const Be=pr.quantity+1;if(Be>kr){Xe.error(`Khng  hng! Tn kho: ${kr}`);return}n(vr=>vr.map(Pn=>Pn.partId===Je.id?{...Pn,quantity:Be}:Pn))}else{if(kr<1){Xe.error("Sn phm  ht hng!");return}const Be={partId:Je.id,partName:Je.name,sku:Je.sku,quantity:1,sellingPrice:dr,stockSnapshot:kr,discount:0};n(vr=>[...vr,Be])}},[r,n,l]),Ze=T.useCallback(Je=>{n(dr=>dr.filter(kr=>kr.partId!==Je))},[n]),mt=T.useCallback((Je,dr)=>{if(dr<=0){Ze(Je);return}const kr=r.find(pr=>pr.partId===Je);if(kr&&dr>kr.stockSnapshot){Xe.error(`Khng  hng! Tn kho: ${kr.stockSnapshot}`);return}n(pr=>pr.map(dn=>dn.partId===Je?{...dn,quantity:dr}:dn))},[r,n,Ze]),ct=T.useMemo(()=>r.reduce((Je,dr)=>Je+dr.sellingPrice*dr.quantity,0),[r]),Rt=T.useMemo(()=>Math.max(0,ct-Mr),[ct,Mr]),Xt=T.useMemo(()=>{const Je=new Map;return r.forEach(dr=>Je.set(dr.partId,dr)),Je},[r]),Jt=T.useMemo(()=>Br.reduce((Je,dr)=>Je+dr.sellingPrice*dr.quantity,0),[Br]),ir=T.useMemo(()=>Math.max(0,Jt-Zt),[Jt,Zt]),mr=T.useMemo(()=>Br.reduce((Je,dr)=>Je+dr.quantity,0),[Br]),Sr=T.useMemo(()=>{if(y||g)return[];let Je=p;return je&&(Je=Je.filter(dr=>dr.name.toLowerCase().includes(je.toLowerCase())||dr.sku.toLowerCase().includes(je.toLowerCase()))),Je},[p,je,y,g]),Pt=T.useMemo(()=>{if(!Sr.length)return[];const Je=Sr.filter(kr=>{var dn;const pr=Number(((dn=kr.stock)==null?void 0:dn[l])??0);return le==="low"?pr>0&&pr<=T2:le==="out"?pr<=0:!0}),dr=kr=>kr<=0?2:kr<=T2?1:0;return Je.slice().sort((kr,pr)=>{var vr,Pn;const dn=Number(((vr=kr.stock)==null?void 0:vr[l])??0),ht=Number(((Pn=pr.stock)==null?void 0:Pn[l])??0),Be=dr(dn)-dr(ht);return Be!==0?Be:kr.name.localeCompare(pr.name)}).slice(0,36)},[Sr,le,l]),Un=Je=>{if(Je.preventDefault(),!Me.trim())return;const dr=Me.trim(),kr=Sr.find(pr=>{var dn,ht;return((dn=pr.sku)==null?void 0:dn.toLowerCase())===dr.toLowerCase()||((ht=pr.name)==null?void 0:ht.toLowerCase().includes(dr.toLowerCase()))});kr?(st(kr),Xe.success(` thm ${kr.name} vo gi hng`),ye(""),setTimeout(()=>{var pr;return(pr=ut.current)==null?void 0:pr.focus()},100)):(Xe.error(`Khng tm thy sn phm c m: ${dr}`),ye(""))},{lowStockCount:en,outOfStockCount:Na}=zge(p,l,T2),Ci=[{key:"all",label:"Tt c",count:Sr.length,activeClass:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white border-transparent shadow-blue-500/30",inactiveClass:"bg-white/80 dark:bg-slate-900/50 text-slate-700 dark:text-slate-200 border border-slate-200 dark:border-slate-700"},{key:"low",label:"Tn thp",count:en,activeClass:"bg-gradient-to-r from-amber-500 to-orange-500 text-white border-transparent shadow-amber-500/30",inactiveClass:"bg-white/80 dark:bg-slate-900/50 text-amber-700 dark:text-amber-200 border border-amber-200/70 dark:border-amber-800/60"},{key:"out",label:"Ht hng",count:Na,activeClass:"bg-gradient-to-r from-rose-500 to-red-500 text-white border-transparent shadow-rose-500/30",inactiveClass:"bg-white/80 dark:bg-slate-900/50 text-rose-700 dark:text-rose-200 border border-rose-200/70 dark:border-rose-800/60"}],tn=T.useRef(!1);T.useEffect(()=>{if(!tn.current&&(en>0||Na>0)){const Je=[];Na>0&&Je.push(`Ht hng: ${Na}`),en>0&&Je.push(`Tn thp: ${en}`),Xe.info(Je.join("  ")),tn.current=!0}},[en,Na]);const an=T.useMemo(()=>nt?e.filter(Je=>{var dr;return Je.name.toLowerCase().includes(nt.toLowerCase())||((dr=Je.phone)==null?void 0:dr.includes(nt))||!1}).slice(0,10):e.slice(0,10),[e,nt]),On=()=>{if(!vt.name||!vt.phone){alert("Vui lng nhp tn v s in thoi");return}if(e.find(kr=>kr.phone===vt.phone)){alert("S in thoi ny  tn ti!");return}const dr={id:`CUST-${Date.now()}`,name:vt.name,phone:vt.phone,vehicleModel:vt.vehicleModel,licensePlate:vt.licensePlate,status:"active",segment:"New",loyaltyPoints:0,totalSpent:0,visitCount:1,lastVisit:new Date().toISOString(),created_at:new Date().toISOString()};t(dr),fr(dr),ot(dr.name),$t({name:"",phone:"",vehicleModel:"",licensePlate:""}),Ge(!1)},ss=Je=>{oe(Je),De(!0)},To=()=>{if(!Ie)return;Er(Ie.sale_code||B1(Ie.id)||Ie.id),Ke(Ie.customer.name),ur(Ie.customer.phone||"");const Je=Ie.items.map(dr=>({partId:dr.partId||dr.partid||"",partName:dr.partName||dr.partname||"",sku:dr.sku||"",quantity:dr.quantity||0,sellingPrice:dr.sellingPrice||dr.sellingprice||dr.price||0,stockSnapshot:dr.stockSnapshot||0,discount:dr.discount||0}));Tr(Je),Pr(Ie.discount||0),setTimeout(()=>{ow("last-receipt"),De(!1),oe(null)},100)},{profile:cn}=Dc(),ta=async Je=>{var dr;if(!yH(cn==null?void 0:cn.role,"sale.delete")){Xe.error("Bn khng c quyn xa ha n");return}if(confirm("Xc nhn xa ha n ny? Hnh ng ny khng th hon tc."))try{const{deleteSaleById:kr}=await hm(async()=>{const{deleteSaleById:dn}=await Promise.resolve().then(()=>Hee);return{deleteSaleById:dn}},void 0),pr=await kr(Je);if(!pr.ok){Xe.error(((dr=pr.error)==null?void 0:dr.message)||"Xa ha n tht bi!");return}f.invalidateQueries({queryKey:["sales"]}),Xe.success(" xa ha n thnh cng!"),Bs((cn==null?void 0:cn.id)||null,{action:"sale.delete",tableName:"sales",recordId:Je,oldData:null,newData:null})}catch(kr){Xe.error("Xa ha n tht bi!"),console.error("Delete sale error:",kr)}},rl=Je=>{if(confirm("M li ha n ny  chnh sa? Gi hng hin ti s b xa.")){if(a(),Je.items.forEach(dr=>{const kr=p.find(pr=>pr.id===dr.partId);if(kr)for(let pr=0;pr<dr.quantity;pr++)st(kr)}),Je.customer.id){const dr=e.find(kr=>kr.id===Je.customer.id);dr&&(fr(dr),ot(dr.name))}else Ke(Je.customer.name),ur(Je.customer.phone||"");rr(Je.discount||0),xt(!1),alert("Ha n  c ti vo gi hng  chnh sa")}},lo=async(Je,dr,kr,pr)=>{var dn;if(!(dr<=0)){console.log("[createCustomerDebtIfNeeded] CALLED with:",{saleId:Je.id,totalAmount:kr,paidAmount:pr,remainingAmount:dr,customerName:Je.customer.name,timestamp:new Date().toISOString()});try{const ht=Je.customer.id||Je.customer.phone||`CUST-ANON-${Date.now()}`,Be=((dn=Je.customer.name)==null?void 0:dn.trim())||Je.customer.phone||"Khch l";let Pn=`Bn hng - Ha n ${Je.sale_code||Je.id}`;Je.items&&Je.items.length>0&&(Pn+=`

Sn phm  mua:`,Je.items.forEach(Qn=>{const Dr=Qn.quantity*Qn.sellingPrice,na=Qn.discount||0;Pn+=`
   ${Qn.quantity} x ${Qn.partName} - ${Oe(Dr)}`,na>0&&(Pn+=` (Gim: ${Oe(na)})`)})),Je.discount&&Je.discount>0&&(Pn+=`

Gim gi n hng: -${Oe(Je.discount)}`);const za=Je.paymentMethod==="cash"?"Tin mt":"Chuyn khon";Pn+=`

Phng thc: ${za}`,Pn+=`

NV: ${Je.userName||"N/A"}`;const is={customerId:ht,customerName:Be,phone:Je.customer.phone||null,licensePlate:null,description:Pn,totalAmount:kr,paidAmount:pr,remainingAmount:dr,createdDate:new Date().toISOString().split("T")[0],branchId:l,saleId:Je.id};console.log("[SalesManager] createCustomerDebt payload:",is);const Ai=await Q.mutateAsync(is);console.log("[SalesManager] createCustomerDebt result:",Ai),Xe.success(` to cng n ${Oe(dr)} cho ${Be}`)}catch(ht){console.error("Error creating customer debt:",ht),console.error("Error details:",{message:ht==null?void 0:ht.message,cause:ht==null?void 0:ht.cause,stack:ht==null?void 0:ht.stack}),Xe.error(`Khng th to cng n t ng: ${(ht==null?void 0:ht.message)||"Li khng xc nh"}`)}}},pa=async()=>{var Je,dr,kr,pr;if(r.length===0){alert("Vui lng thm sn phm vo gi hng");return}if(!sr){alert("Vui lng chn phng thc thanh ton");return}if(!qr){alert("Vui lng chn hnh thc thanh ton");return}if(qr==="partial"&&An<=0){alert("Vui lng nhp s tin khch tr");return}try{for(const Qn of r){const Dr=p.find(oo=>oo.id===Qn.partId);if(!Dr){Xe.error(`Khng tm thy sn phm: ${Qn.partName}`);return}const na=((Je=Dr.stock)==null?void 0:Je[l])??0;if(Qn.quantity>na){Xe.error(`Khng  hng cho ${Dr.name}. Tn kho: ${na}`);return}}const dn=`SALE-${Date.now()}`,ht=r.reduce((Qn,Dr)=>Qn+Dr.sellingPrice*Dr.quantity,0),Be=r.reduce((Qn,Dr)=>Qn+(Dr.discount||0),0),vr=Math.max(0,ht-Be-Mr),Pn={id:Dt==null?void 0:Dt.id,name:(Dt==null?void 0:Dt.name)||wr||"Khch l",phone:(Dt==null?void 0:Dt.phone)||Et};Er(dn),Ke(Pn.name),ur(Pn.phone||""),Tr([...r]),Pr(Mr+Be),!Dt&&Et&&wr&&(e.find(Dr=>Dr.phone===Et)||t({id:`CUST-${Date.now()}`,name:wr,phone:Et,status:"active",segment:"New",loyaltyPoints:0,totalSpent:0,visitCount:1,lastVisit:new Date().toISOString(),created_at:new Date().toISOString()}));const za=await re({id:dn,items:r,discount:Mr+Be,customer:Pn,paymentMethod:sr,userId:(cn==null?void 0:cn.id)||"local-user",userName:(cn==null?void 0:cn.email)||(cn==null?void 0:cn.full_name)||"Local User",branchId:l});if(za!=null&&za.error)throw za.error;const is=qr==="full"?vr:qr==="partial"?An:0,Ai=vr-is;if(console.log("[SalesManager] Payment details:",{paymentType:qr,total:vr,paidAmount:is,partialAmount:An,remainingAmount:Ai,hasCustomer:!!(Dt||wr||Et)}),Ai>0){console.log("[SalesManager] Creating debt because remaining > 0");const{data:Qn,error:Dr}=await Ot.from("sales").select(`
            *,
            user:userid(
              full_name,
              display_name,
              email
            )
          `).eq("id",dn).single();Dr&&console.error("[SalesManager] Error fetching sale:",Dr);const oo=(Qn?{...Qn,userName:((dr=Qn.user)==null?void 0:dr.full_name)||((kr=Qn.user)==null?void 0:kr.display_name)||((pr=Qn.user)==null?void 0:pr.email)||"N/A"}:null)||{id:dn,sale_code:void 0,date:new Date().toISOString(),items:r,subtotal:ct,discount:Mr+Be,total:vr,customer:Pn,paymentMethod:sr,userName:(cn==null?void 0:cn.email)||(cn==null?void 0:cn.full_name)||"Local User",userId:(cn==null?void 0:cn.id)||"",branchId:l||""};console.log("[SalesManager] Sale data for debt:",oo),await lo(oo,Ai,vr,is)}else console.log("[SalesManager] No debt needed, paid in full");fr(null),ot(""),rr(0),br(0),Vt("amount"),Or(null),Lr(null),Ir(0),a(),Nn&&setTimeout(()=>{ow("last-receipt")},100)}catch(dn){console.error("Error finalizing sale (atomic):",dn),Xe.error((dn==null?void 0:dn.message)||"C li khi to ha n (atomic)")}};return T.useEffect(()=>{const Je=dr=>{dr.target.closest(".customer-dropdown-container")||nr(!1)};return document.addEventListener("mousedown",Je),()=>document.removeEventListener("mousedown",Je)},[]),s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50/20 to-indigo-50/30 dark:from-slate-900 dark:via-slate-900 dark:to-slate-800",children:[s.jsx("div",{className:"md:hidden sticky top-0 z-10 bg-white/95 dark:bg-slate-800/95 backdrop-blur-sm border-b border-slate-200/50 dark:border-slate-700/50 shadow-sm",children:s.jsxs("div",{className:"grid grid-cols-2",children:[s.jsxs("button",{onClick:()=>Kt("products"),className:`py-3.5 px-4 font-bold transition-all relative ${We==="products"?"text-blue-600 dark:text-blue-400 bg-blue-50/50 dark:bg-blue-900/20":"text-slate-600 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-700/50"}`,children:[s.jsxs("div",{className:"flex items-center justify-center gap-2",children:[s.jsx(Gi,{className:"w-5 h-5"}),s.jsx("span",{className:"text-sm",children:"Sn phm"})]}),We==="products"&&s.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-gradient-to-r from-blue-500 to-indigo-500 rounded-t-full"})]}),s.jsxs("button",{onClick:()=>Kt("cart"),className:`py-3.5 px-4 font-bold transition-all relative ${We==="cart"?"text-blue-600 dark:text-blue-400 bg-blue-50/50 dark:bg-blue-900/20":"text-slate-600 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-700/50"}`,children:[s.jsxs("div",{className:"flex items-center justify-center gap-2",children:[s.jsx(Qf,{className:"w-5 h-5"}),s.jsx("span",{className:"text-sm",children:"Gi hng"}),r.length>0&&s.jsx("span",{className:"ml-1 px-2 py-0.5 text-xs font-bold rounded-full bg-gradient-to-r from-orange-500 to-red-500 text-white shadow-lg",children:r.length})]}),We==="cart"&&s.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-gradient-to-r from-blue-500 to-indigo-500 rounded-t-full"})]})]})}),s.jsxs("div",{className:"flex h-[calc(100vh-57px)] md:h-screen",children:[s.jsxs("div",{className:`flex-1 flex flex-col transition-all duration-300 ${We==="cart"?"hidden md:flex":"animate-fade-in"}`,children:[s.jsx("div",{className:"bg-white/80 dark:bg-slate-800/80 backdrop-blur-sm border-b border-slate-200/50 dark:border-slate-700/50 p-3 md:p-4 shadow-sm",children:s.jsxs("div",{className:"flex flex-col md:flex-row items-stretch md:items-center gap-3",children:[s.jsxs("div",{className:"flex-1 space-y-2",children:[s.jsxs("div",{className:"flex items-stretch gap-2",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),s.jsx("input",{type:"text",placeholder:"Tm kim sn phm...",value:je,onChange:Je=>be(Je.target.value),className:"w-full pl-10 pr-4 py-2.5 border-2 border-slate-300/50 dark:border-slate-600/50 rounded-xl bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm md:text-base transition-all placeholder:text-slate-400"})]}),s.jsxs("button",{type:"button",onClick:()=>lt(Je=>!Je),className:`px-4 py-2 rounded-xl border-2 font-semibold text-sm flex items-center gap-2 transition-all ${at?"border-blue-500 text-blue-600 bg-blue-50 dark:bg-blue-900/20":"border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-200 bg-white dark:bg-slate-800"}`,children:[s.jsx(See,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden md:inline",children:at?"ng qut":"Qut m"})]})]}),at&&s.jsxs("form",{onSubmit:Un,className:"relative",children:[s.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-blue-500",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"})})}),s.jsx("input",{ref:ut,type:"text",placeholder:"Nhp hoc qut m vch...",value:Me,onChange:Je=>ye(Je.target.value),className:"w-full pl-10 pr-10 py-2.5 border-2 border-blue-400 dark:border-blue-600 rounded-xl bg-blue-50/50 dark:bg-blue-900/20 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm md:text-base transition-all placeholder:text-blue-500/70 font-mono"}),Me&&s.jsx("button",{type:"button",onClick:()=>ye(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600 dark:hover:text-slate-300",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),s.jsx("div",{className:"flex items-center gap-2",children:s.jsxs("button",{onClick:()=>xt(!0),className:"px-3 md:px-4 py-2.5 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white rounded-xl whitespace-nowrap transition-all inline-flex items-center gap-2 text-sm font-bold shadow-lg hover:shadow-xl hover:scale-105 active:scale-95",children:[s.jsx(Vg,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Lch s"})]})})]})}),s.jsxs("div",{className:"bg-white/80 dark:bg-slate-800/80 border-b border-slate-200/60 dark:border-slate-700/60 px-3 md:px-6 py-3 flex flex-col md:flex-row md:items-center md:justify-between gap-2",children:[s.jsxs("div",{className:"text-xs md:text-sm text-slate-600 dark:text-slate-400 font-medium",children:["Hin th ",Pt.length," / ",Sr.length||0," sn phm",je&&" theo t kha"]}),s.jsx("div",{className:"flex items-center gap-2 overflow-x-auto pb-1",children:Ci.map(Je=>{const dr=le===Je.key;return s.jsxs("button",{type:"button","aria-pressed":dr,onClick:()=>Ee(Je.key),className:`flex items-center gap-1.5 px-3 py-1.5 rounded-full text-xs font-semibold transition-all whitespace-nowrap ${dr?Je.activeClass:Je.inactiveClass}`,children:[s.jsx("span",{children:Je.label}),s.jsx("span",{className:`px-1.5 py-0.5 rounded-full text-[10px] font-black ${dr?"bg-white/30":"bg-slate-100 dark:bg-slate-800"}`,children:Je.count})]},Je.key)})})]}),s.jsx("div",{className:"flex-1 p-0 md:p-6 overflow-y-auto bg-slate-50 dark:bg-slate-900 pb-24 md:pb-6",children:Pt.length===0?s.jsxs("div",{className:"text-center text-slate-400 mt-20",children:[s.jsx("div",{className:"mb-4 flex items-center justify-center",children:s.jsx(Gi,{className:"w-16 h-16 text-slate-300"})}),s.jsx("div",{className:"text-xl font-medium mb-2",children:Sr.length===0?je?"Khng tm thy sn phm no":"Cha c sn phm":le==="low"?"Khng c sn phm tn thp":"Khng c sn phm ht hng"}),s.jsx("div",{className:"text-sm",children:Sr.length===0?je?"Hy th mt t kha tm kim khc":"Vui lng thm sn phm vo h thng":"Hy chn b lc khc  xem thm sn phm"})]}):s.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-2.5 md:gap-3",children:Pt.map(Je=>{var is,Ai;const dr=Number(((is=Je.retailPrice)==null?void 0:is[l])??0),kr=Number(((Ai=Je.stock)==null?void 0:Ai[l])??0),pr=kr<=0,dn=kr>0&&kr<=T2,ht=Xt.get(Je.id),Be=!!ht,vr=pr?"Ht hng":dn?"Tn thp":"Sn hng",Pn=pr?"bg-rose-50 text-rose-600 dark:bg-rose-900/20 dark:text-rose-200":dn?"bg-amber-50 text-amber-600 dark:bg-amber-900/20 dark:text-amber-200":"bg-emerald-50 text-emerald-600 dark:bg-emerald-900/20 dark:text-emerald-200",za=pr?"bg-gradient-to-r from-rose-500 to-red-500 text-white":dn?"bg-gradient-to-r from-amber-500 to-orange-500 text-white":"bg-gradient-to-r from-emerald-500 to-green-500 text-white";return s.jsx("button",{type:"button",onClick:()=>!pr&&st(Je),disabled:pr,className:`group relative text-left p-3 md:p-4 rounded-2xl border transition-all duration-200 h-full ${pr?"bg-slate-50/70 dark:bg-slate-900/30 border-slate-200 dark:border-slate-800 cursor-not-allowed":"bg-white dark:bg-slate-800/70 border-slate-200/70 dark:border-slate-700 hover:border-blue-400 dark:hover:border-blue-500 hover:shadow-xl"} ${Be?"ring-2 ring-blue-200 dark:ring-blue-500/40":""}`,children:s.jsxs("div",{className:"flex flex-col h-full",children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center ${pr?"bg-slate-100 dark:bg-slate-700":"bg-slate-100 text-orange-500 dark:bg-slate-700/70"}`,children:s.jsx(Gi,{className:`w-6 h-6 ${pr?"text-slate-400":"text-orange-500 dark:text-orange-300"}`})}),s.jsx("span",{className:`px-2 py-0.5 rounded-full text-[11px] font-semibold ${Pn}`,children:vr})]}),Be&&s.jsxs("span",{className:"text-[10px] font-semibold px-2 py-0.5 rounded-full bg-blue-50 text-blue-700 dark:bg-blue-900/30 dark:text-blue-200",children:[" chn ",ht==null?void 0:ht.quantity]})]}),s.jsxs("div",{className:"space-y-1 mb-4",children:[s.jsx("h3",{className:"font-semibold text-xs md:text-sm text-slate-900 dark:text-slate-100 line-clamp-2",title:Je.name,children:Je.name}),s.jsx("div",{className:"text-[11px] text-slate-500 dark:text-slate-400 font-mono truncate",children:Je.sku})]}),s.jsxs("div",{className:"flex items-center justify-between mt-auto pt-3 border-t border-slate-100 dark:border-slate-700",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-[11px] uppercase tracking-wide text-slate-400 dark:text-slate-500 font-semibold",children:"Gi bn"}),s.jsx("p",{className:`text-sm md:text-base font-bold ${pr?"text-slate-400 dark:text-slate-500":"text-blue-600 dark:text-blue-300"}`,children:Oe(dr)})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"text-[11px] uppercase tracking-wide text-slate-400 dark:text-slate-500 font-semibold",children:"Tn kho"}),s.jsx("span",{className:`inline-flex items-center justify-center min-w-[2.75rem] px-2.5 py-1 text-[11px] font-black rounded-lg ${za}`,children:Math.max(0,Math.floor(kr))})]})]})]})},Je.id)})})})]}),s.jsxs("div",{className:`w-full md:w-[40%] bg-white dark:bg-slate-800 md:border-l border-slate-200 dark:border-slate-700 flex flex-col transition-all duration-300 overflow-y-auto ${We==="products"?"hidden md:flex":"animate-fade-in"}`,children:[s.jsx("div",{className:"p-3 md:p-4 border-b border-slate-200 md:border-slate-200/50 dark:border-slate-700/50 bg-slate-50 md:bg-gradient-to-r md:from-emerald-50/30 md:via-teal-50/20 md:to-cyan-50/30 dark:from-slate-800/50 dark:via-slate-800/30 dark:to-slate-800/50",children:s.jsxs("div",{className:"customer-dropdown-container",children:[s.jsxs("label",{className:"flex items-center gap-2 text-sm font-semibold md:font-bold text-slate-900 dark:text-slate-100 mb-2 md:mb-3",children:[s.jsx("div",{className:"w-7 h-7 md:w-8 md:h-8 bg-emerald-500 md:bg-gradient-to-br md:from-emerald-500 md:to-teal-500 rounded-lg flex items-center justify-center md:shadow-lg",children:s.jsx("svg",{className:"w-4 h-4 md:w-5 md:h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),s.jsx("span",{children:"Khch hng"})]}),s.jsxs("div",{className:"relative flex flex-col md:flex-row gap-2",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),s.jsx("input",{type:"text",placeholder:"Tm tn, s in thoi...",value:nt,onChange:Je=>ot(Je.target.value),onFocus:()=>nr(!0),className:"w-full pl-10 pr-4 py-2 md:py-2.5 border md:border-2 border-slate-300 md:border-slate-300/50 dark:border-slate-600/50 rounded-lg md:rounded-xl bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 text-sm focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 transition-all placeholder:text-slate-400"})]}),s.jsxs("button",{onClick:()=>Ge(!0),className:"px-3 py-2 md:px-4 md:py-2.5 bg-emerald-500 md:bg-gradient-to-r md:from-emerald-500 md:to-teal-500 hover:bg-emerald-600 md:hover:from-emerald-600 md:hover:to-teal-600 text-white rounded-lg md:rounded-xl flex items-center justify-center gap-2 transition-all md:shadow-lg md:hover:shadow-xl md:hover:scale-105 md:active:scale-95 font-semibold md:font-bold",title:"Thm khch hng mi",children:[s.jsx(Ac,{className:"w-4 h-4 md:w-5 md:h-5"}),s.jsx("span",{className:"hidden sm:inline text-sm",children:"Thm"})]}),xr&&an.length>0&&s.jsx("div",{className:"absolute top-full left-0 right-0 z-10 mt-1 max-h-40 overflow-y-auto bg-white dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg shadow-lg",children:an.map(Je=>s.jsxs("button",{onClick:()=>{fr(Je),ot(Je.name),nr(!1)},className:"w-full text-left px-3 py-2 hover:bg-slate-50 dark:hover:bg-slate-600 border-b border-slate-100 dark:border-slate-600 last:border-b-0",children:[s.jsx("div",{className:"font-medium text-slate-900 dark:text-slate-100",children:Je.name}),Je.phone&&s.jsx("div",{className:"text-sm text-slate-500",children:Je.phone})]},Je.id))})]}),Dt&&s.jsx("div",{className:"mt-2 md:mt-3 p-2 md:p-3.5 bg-blue-50 md:bg-gradient-to-r md:from-emerald-50 md:to-teal-50 dark:from-emerald-900/20 dark:to-teal-900/20 rounded-lg md:rounded-xl border md:border-2 border-blue-200 md:border-emerald-200 dark:border-emerald-800 md:shadow-sm",children:s.jsxs("div",{className:"flex items-start justify-between gap-2",children:[s.jsxs("div",{className:"flex items-center gap-2 md:gap-2.5 flex-1 min-w-0",children:[s.jsx("div",{className:"hidden md:flex w-10 h-10 bg-gradient-to-br from-emerald-500 to-teal-500 rounded-lg items-center justify-center shadow-lg flex-shrink-0",children:s.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"font-medium md:font-bold text-blue-900 md:text-emerald-900 dark:text-emerald-100 truncate text-sm md:text-base",children:Dt.name}),Dt.phone&&s.jsxs("div",{className:"text-xs text-blue-700 md:text-emerald-700 dark:text-emerald-300 flex items-center gap-1 mt-0.5",children:[s.jsx("svg",{className:"w-3 h-3 flex-shrink-0 hidden md:inline",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),s.jsx("span",{className:"truncate",children:Dt.phone})]})]})]}),s.jsx("button",{onClick:()=>{fr(null),ot("")},className:"w-7 h-7 md:w-8 md:h-8 bg-red-100 dark:bg-red-900/30 hover:bg-red-200 dark:hover:bg-red-900/50 text-red-600 dark:text-red-400 rounded-md md:rounded-lg flex items-center justify-center transition-all flex-shrink-0 md:shadow-sm md:hover:shadow-md text-lg",title:"Xa",children:""})]})})]})}),s.jsxs("div",{className:"p-3 md:p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3 md:mb-4 pb-2 md:pb-3 border-b md:border-b-2 border-slate-200 md:border-slate-200/50 dark:border-slate-700/50",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"hidden md:flex w-8 h-8 bg-gradient-to-br from-blue-500 to-indigo-500 rounded-lg items-center justify-center shadow-lg",children:s.jsx(Qf,{className:"w-4 h-4 text-white"})}),s.jsx("h3",{className:"text-base md:text-lg font-semibold md:font-black text-slate-900 dark:text-slate-100",children:"Gi hng"})]}),s.jsx("span",{className:"px-2 py-0.5 md:px-3 md:py-1 bg-blue-100 md:bg-gradient-to-r md:from-blue-100 md:to-indigo-100 dark:from-blue-900/30 dark:to-indigo-900/30 text-blue-700 dark:text-blue-300 rounded-full text-xs font-semibold md:font-bold md:shadow-sm",children:r.length})]}),r.length===0?s.jsxs("div",{className:"text-center py-12 md:py-16 mb-3",children:[s.jsx("div",{className:"mb-3 md:mb-4 flex items-center justify-center",children:s.jsx("div",{className:"w-16 h-16 md:w-20 md:h-20 bg-slate-100 md:bg-gradient-to-br md:from-slate-100 md:to-slate-200 dark:from-slate-800 dark:to-slate-700 rounded-2xl md:rounded-3xl flex items-center justify-center md:shadow-lg",children:s.jsx(Qf,{className:"w-8 h-8 md:w-10 md:h-10 text-slate-400 dark:text-slate-500"})})}),s.jsx("div",{className:"text-sm md:text-base font-semibold md:font-bold text-slate-600 dark:text-slate-400 mb-1",children:"Gi hng trng"}),s.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-500",children:"Chn sn phm  thm vo gi"})]}):s.jsx("div",{className:"space-y-2 md:space-y-2.5",children:r.map(Je=>s.jsxs("div",{className:"group p-2.5 md:p-3 border md:border-2 border-slate-200 md:border-slate-200/50 dark:border-slate-700/50 rounded-xl md:rounded-xl bg-white dark:bg-slate-800 md:hover:border-blue-400 dark:hover:border-blue-600 transition-all duration-200 md:hover:shadow-lg md:hover:shadow-blue-500/10",children:[s.jsxs("div",{className:"md:hidden",children:[s.jsxs("div",{className:"flex items-start gap-2.5 mb-2",children:[s.jsx("div",{className:"w-10 h-10 bg-orange-50 dark:bg-orange-900/30 rounded-lg flex items-center justify-center flex-shrink-0",children:s.jsx(Gi,{className:"w-5 h-5 text-orange-500 dark:text-orange-400"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"font-semibold text-sm text-slate-900 dark:text-slate-100 leading-tight mb-1",title:Je.partName,children:Je.partName}),s.jsx("div",{className:"inline-flex items-center gap-1 px-1.5 py-0.5 bg-slate-100 dark:bg-slate-700 rounded-md",children:s.jsx("span",{className:"text-[10px] text-slate-500 dark:text-slate-400 font-medium",children:Je.sku})})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{className:"text-sm font-bold text-blue-600 dark:text-blue-400",children:Oe(Je.sellingPrice)}),s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx("button",{onClick:()=>mt(Je.partId,Math.max(1,Je.quantity-1)),className:"w-8 h-8 flex items-center justify-center bg-slate-100 dark:bg-slate-700 rounded-lg text-slate-700 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-600 transition-all font-bold text-lg",children:"-"}),s.jsx("span",{className:"w-8 text-center font-bold text-sm text-slate-900 dark:text-slate-100 px-1 py-1 bg-slate-50 dark:bg-slate-700 rounded-lg",children:Je.quantity}),s.jsx("button",{onClick:()=>mt(Je.partId,Je.quantity+1),className:"w-8 h-8 flex items-center justify-center bg-blue-500 dark:bg-blue-600 rounded-lg text-white hover:bg-blue-600 dark:hover:bg-blue-700 transition-all font-bold text-lg",children:"+"}),s.jsx("button",{onClick:()=>Ze(Je.partId),className:"w-8 h-8 flex items-center justify-center bg-red-500 hover:bg-red-600 rounded-lg text-white transition-all ml-1 font-bold text-lg",children:""})]})]})]}),s.jsxs("div",{className:"hidden md:flex items-center gap-3",children:[s.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-orange-100 to-amber-100 dark:from-orange-900/30 dark:to-amber-900/30 rounded-xl flex items-center justify-center flex-shrink-0 shadow-sm group-hover:scale-110 transition-transform",children:s.jsx(Gi,{className:"w-6 h-6 text-orange-500 dark:text-orange-400"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"font-bold text-sm text-slate-900 dark:text-slate-100 line-clamp-1 mb-1",title:Je.partName,children:Je.partName}),s.jsx("div",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-slate-100 dark:bg-slate-700 rounded-md mb-1",children:s.jsx("span",{className:"text-[10px] text-slate-500 dark:text-slate-400 font-semibold",children:Je.sku})}),s.jsx("div",{className:"text-sm font-black bg-gradient-to-r from-blue-600 to-indigo-600 dark:from-blue-400 dark:to-indigo-400 bg-clip-text text-transparent",children:Oe(Je.sellingPrice)})]}),s.jsxs("div",{className:"flex items-center gap-1.5 flex-shrink-0",children:[s.jsx("button",{onClick:()=>mt(Je.partId,Math.max(1,Je.quantity-1)),className:"w-8 h-8 flex items-center justify-center bg-gradient-to-r from-slate-100 to-slate-200 dark:from-slate-700 dark:to-slate-600 rounded-lg text-slate-700 dark:text-slate-300 hover:from-slate-200 hover:to-slate-300 dark:hover:from-slate-600 dark:hover:to-slate-500 transition-all shadow-sm hover:shadow-md font-bold",children:"-"}),s.jsx("span",{className:"w-10 text-center font-black text-sm text-slate-900 dark:text-slate-100 px-2 py-1 bg-slate-50 dark:bg-slate-700 rounded-lg",children:Je.quantity}),s.jsx("button",{onClick:()=>mt(Je.partId,Je.quantity+1),className:"w-8 h-8 flex items-center justify-center bg-gradient-to-r from-blue-500 to-indigo-500 dark:from-blue-600 dark:to-indigo-600 rounded-lg text-white hover:from-blue-600 hover:to-indigo-600 dark:hover:from-blue-700 dark:hover:to-indigo-700 transition-all shadow-md hover:shadow-lg font-bold",children:"+"}),s.jsx("button",{onClick:()=>Ze(Je.partId),className:"w-8 h-8 flex items-center justify-center bg-gradient-to-r from-red-500 to-pink-500 hover:from-red-600 hover:to-pink-600 rounded-lg text-white transition-all ml-1 shadow-md hover:shadow-lg font-bold text-lg",children:""})]})]})]},Je.partId))})]}),r.length>0&&s.jsxs("div",{className:"border-t md:border-t-2 border-slate-200 md:border-slate-200/50 dark:border-slate-700/50 bg-slate-50 md:bg-gradient-to-br md:from-slate-50 md:to-blue-50/30 dark:from-slate-800 dark:to-slate-800/50",children:[s.jsxs("div",{className:"p-3 md:p-4 space-y-2 md:space-y-3 pb-20 md:pb-3",children:[s.jsxs("div",{className:"flex justify-between text-xs md:text-sm",children:[s.jsx("span",{className:"text-slate-600 dark:text-slate-400 font-medium",children:"Tng tin hng"}),s.jsx("span",{className:"font-semibold md:font-bold text-slate-900 dark:text-slate-100",children:Oe(ct)})]}),s.jsxs("div",{className:"space-y-2 md:space-y-2.5",children:[s.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between text-xs md:text-sm gap-1.5 md:gap-2",children:[s.jsx("span",{className:"text-slate-600 dark:text-slate-400 font-medium",children:"Gim gi:"}),s.jsxs("div",{className:"flex items-center gap-1.5 md:gap-2 w-full md:w-auto",children:[s.jsx("input",{type:"number",value:Gt==="amount"?Mr:cr,onChange:Je=>{const dr=Number(Je.target.value)||0;if(Gt==="amount")rr(Math.min(dr,ct));else{const kr=Math.min(dr,100);br(kr),rr(Math.round(ct*kr/100))}},className:"flex-1 md:w-24 px-2 md:px-3 py-1.5 md:py-2 text-right text-xs md:text-sm border md:border-2 border-slate-300 md:border-slate-300 dark:border-slate-600 rounded-lg md:rounded-xl bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all font-medium md:font-semibold",placeholder:"0",min:"0",max:Gt==="amount"?ct:100}),s.jsxs("select",{value:Gt,onChange:Je=>{const dr=Je.target.value;Vt(dr),rr(0),br(0)},className:"px-2 md:px-3 py-1.5 md:py-2 border md:border-2 border-slate-300 md:border-slate-300 dark:border-slate-600 rounded-lg md:rounded-xl bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 text-xs md:text-sm font-semibold md:font-bold focus:ring-2 focus:ring-purple-500 transition-all",children:[s.jsx("option",{value:"amount",children:""}),s.jsx("option",{value:"percent",children:"%"})]})]})]}),Gt==="percent"&&s.jsx("div",{className:"flex gap-1.5 md:gap-2 justify-end flex-wrap",children:[5,10,15,20].map(Je=>s.jsxs("button",{onClick:()=>{br(Je),rr(Math.round(ct*Je/100))},className:"px-2 md:px-3 py-1 md:py-1.5 text-[10px] md:text-xs font-semibold md:font-bold bg-purple-100 md:bg-gradient-to-r md:from-purple-100 md:to-pink-100 dark:from-purple-900/30 dark:to-pink-900/30 hover:bg-purple-200 md:hover:from-purple-200 md:hover:to-pink-200 dark:hover:from-purple-900/50 dark:hover:to-pink-900/50 text-purple-700 dark:text-purple-300 rounded-md md:rounded-lg transition-all md:shadow-sm md:hover:shadow-md",children:[Je,"%"]},Je))}),Gt==="percent"&&cr>0&&s.jsxs("div",{className:"text-[10px] md:text-xs text-slate-500 dark:text-slate-400 text-right",children:["= ",Oe(Mr)]})]}),s.jsxs("div",{className:"flex justify-between items-center pt-2 md:pt-3 mt-2 md:mt-3 border-t md:border-t-2 border-slate-200 dark:border-slate-700 p-2 md:p-3 -mx-3 md:-mx-4 bg-blue-600 md:bg-gradient-to-r md:from-blue-600 md:to-indigo-600 dark:from-blue-700 dark:to-indigo-700 rounded-b-lg md:rounded-b-xl md:shadow-lg",children:[s.jsx("span",{className:"font-semibold md:font-bold text-white text-xs md:text-sm",children:"Khch phi tr"}),s.jsx("span",{className:"font-black text-lg md:text-2xl text-white",children:Oe(Math.max(0,Rt-Mr))})]})]}),s.jsxs("div",{className:"px-3 md:px-4 pb-3 md:pb-4",children:[s.jsxs("label",{className:"flex items-center gap-2 text-xs md:text-sm font-semibold md:font-bold text-slate-900 dark:text-slate-100 mb-2 md:mb-3",children:[s.jsx("span",{children:"Phng thc thanh ton"}),s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-2 md:gap-3",children:[s.jsxs("button",{onClick:()=>Or("cash"),className:`flex items-center justify-center gap-1.5 md:gap-2 px-3 md:px-4 py-2 md:py-3 rounded-lg md:rounded-xl border md:border-2 transition-all font-semibold md:font-bold md:shadow-sm md:hover:shadow-md ${sr==="cash"?"border-emerald-500 bg-emerald-50 md:bg-gradient-to-r md:from-emerald-50 md:to-green-50 dark:from-emerald-900/30 dark:to-green-900/30 text-emerald-700 dark:text-emerald-400 md:shadow-lg":"border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-700 dark:text-slate-300 hover:border-emerald-400"}`,children:[s.jsx(S6,{className:"w-4 h-4 md:w-5 md:h-5"}),s.jsx("span",{className:"text-xs md:text-sm",children:"Tin mt"})]}),s.jsxs("button",{onClick:()=>Or("bank"),className:`flex items-center justify-center gap-1.5 md:gap-2 px-3 md:px-4 py-2 md:py-3 rounded-lg md:rounded-xl border md:border-2 transition-all font-semibold md:font-bold md:shadow-sm md:hover:shadow-md ${sr==="bank"?"border-blue-500 bg-blue-50 md:bg-gradient-to-r md:from-blue-50 md:to-cyan-50 dark:from-blue-900/30 dark:to-cyan-900/30 text-blue-700 dark:text-blue-400 md:shadow-lg":"border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-700 dark:text-slate-300 hover:border-blue-400"}`,children:[s.jsx(fF,{className:"w-4 h-4 md:w-5 md:h-5"}),s.jsx("span",{className:"text-xs md:text-sm",children:"Chuyn khon"})]})]})]}),sr&&s.jsxs("div",{className:"px-3 md:px-4 pb-3 md:pb-4",children:[s.jsx("label",{className:"block text-xs md:text-sm font-semibold md:font-bold text-slate-900 dark:text-slate-100 mb-2 md:mb-3",children:"Hnh thc"}),s.jsxs("div",{className:"grid grid-cols-3 gap-1.5 md:gap-2",children:[s.jsx("button",{onClick:()=>{Lr("full"),Ir(0)},className:`px-2 md:px-3 py-2 md:py-2.5 text-[10px] md:text-xs rounded-lg md:rounded-xl border md:border-2 transition-all font-semibold md:font-bold md:shadow-sm ${qr==="full"?"border-orange-500 bg-orange-50 md:bg-gradient-to-r md:from-orange-50 md:to-amber-50 dark:from-orange-900/30 dark:to-amber-900/30 text-orange-700 dark:text-orange-400 md:shadow-lg":"border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-600 dark:text-slate-400 hover:border-orange-400"}`,children:""}),s.jsx("button",{onClick:()=>Lr("partial"),className:`px-2 md:px-3 py-2 md:py-2.5 text-[10px] md:text-xs rounded-lg md:rounded-xl border md:border-2 transition-all font-semibold md:font-bold md:shadow-sm ${qr==="partial"?"border-orange-500 bg-orange-50 md:bg-gradient-to-r md:from-orange-50 md:to-amber-50 dark:from-orange-900/30 dark:to-amber-900/30 text-orange-700 dark:text-orange-400 md:shadow-lg":"border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-600 dark:text-slate-400 hover:border-orange-400"}`,children:"1 phn"}),s.jsx("button",{onClick:()=>{Lr("note"),Ir(0)},className:`px-2 md:px-3 py-2 md:py-2.5 text-[10px] md:text-xs rounded-lg md:rounded-xl border md:border-2 transition-all font-semibold md:font-bold md:shadow-sm ${qr==="note"?"border-orange-500 bg-orange-50 md:bg-gradient-to-r md:from-orange-50 md:to-amber-50 dark:from-orange-900/30 dark:to-amber-900/30 text-orange-700 dark:text-orange-400 md:shadow-lg":"border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-600 dark:text-slate-400 hover:border-orange-400"}`,children:"Ghi n"})]})]}),qr==="partial"&&s.jsxs("div",{className:"px-4 pb-3",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-900 dark:text-slate-100 mb-2",children:"S tin khch tr"}),s.jsx("input",{type:"number",value:An,onChange:Je=>Ir(Number(Je.target.value)||0),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700",placeholder:"0"}),s.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:["Cn li:"," ",Oe(Math.max(0,Rt-Mr-An))," ",""]})]}),s.jsxs("div",{className:"px-3 md:px-4 pb-2 md:pb-3 space-y-1.5 md:space-y-2",children:[s.jsx("div",{className:"text-xs md:text-sm font-semibold md:font-medium text-slate-900 dark:text-slate-100 mb-1.5 md:mb-2",children:"Thi gian bn hng"}),s.jsxs("label",{className:"flex items-center gap-1.5 md:gap-2 cursor-pointer",children:[s.jsx("input",{type:"radio",name:"salesTime",defaultChecked:!0,className:"w-3 h-3 md:w-3.5 md:h-3.5 text-pink-600 focus:ring-pink-500"}),s.jsx("span",{className:"text-xs md:text-sm text-slate-700 dark:text-slate-300",children:"Thi gian hin ti"})]}),s.jsxs("label",{className:"flex items-center gap-1.5 md:gap-2 cursor-pointer",children:[s.jsx("input",{type:"radio",name:"salesTime",className:"w-3 h-3 md:w-3.5 md:h-3.5 text-blue-600 focus:ring-blue-500"}),s.jsx("span",{className:"text-xs md:text-sm text-slate-700 dark:text-slate-300",children:"Ty chnh"})]}),s.jsxs("label",{className:"flex items-center gap-1.5 cursor-pointer",children:[s.jsx("input",{type:"checkbox",className:"w-3 h-3 md:w-3.5 md:h-3.5 rounded border-slate-300 text-blue-600 focus:ring-blue-500"}),s.jsx("span",{className:"text-sm md:text-sm text-slate-700 dark:text-slate-300",children:"Ghi ch ring cho n hng"})]}),s.jsxs("label",{className:"flex items-center gap-1.5 md:gap-2 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:Nn,onChange:Je=>we(Je.target.checked),className:"w-3 h-3 md:w-3.5 md:h-3.5 rounded border-slate-300 text-blue-600 focus:ring-blue-500"}),s.jsx("span",{className:"text-xs md:text-sm text-slate-700 dark:text-slate-300",children:"ng thi in ho n"})]})]}),s.jsxs("div",{className:"p-3 md:p-4 pt-0 flex flex-col md:flex-row gap-2 md:gap-3",children:[s.jsx("button",{onClick:a,className:"flex-1 px-3 md:px-4 py-2 md:py-3 bg-white dark:bg-slate-700 border md:border-2 border-slate-300 dark:border-slate-600 hover:border-slate-400 dark:hover:border-slate-500 hover:bg-slate-50 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-300 font-semibold md:font-bold rounded-lg md:rounded-xl transition-all md:shadow-sm md:hover:shadow-md text-sm md:text-base",children:"LU NHP"}),s.jsx("button",{onClick:pa,disabled:!sr||!qr,className:`flex-1 px-3 md:px-4 py-2 md:py-3 font-bold md:font-black rounded-lg md:rounded-xl transition-all md:shadow-lg text-sm md:text-base ${sr&&qr?"bg-orange-500 md:bg-gradient-to-r md:from-orange-500 md:to-red-500 hover:bg-orange-600 md:hover:from-orange-600 md:hover:to-red-600 text-white md:shadow-orange-500/30 md:hover:shadow-xl md:hover:shadow-orange-500/40 md:hover:scale-105 md:active:scale-95":"bg-slate-300 dark:bg-slate-700 text-slate-500 dark:text-slate-500 cursor-not-allowed opacity-60"}`,children:"XUT BN"})]})]})]})]}),s.jsx(nbe,{isOpen:ar,onClose:()=>xt(!1),sales:ee,currentBranchId:l,onPrintReceipt:ss,onEditSale:rl,onDeleteSale:ta,page:Y.page,totalPages:Y.totalPages,total:Y.total,hasMore:Y.hasMore,pageSize:S,onPrevPage:Ce,onNextPage:()=>{var Je,dr;if(se){const kr=(Je=Le==null?void 0:Le.meta)==null?void 0:Je.nextAfterDate,pr=(dr=Le==null?void 0:Le.meta)==null?void 0:dr.nextAfterId;(kr||pr)&&ke({afterDate:kr,afterId:pr})}else me()},onPageSizeChange:ie,search:E,onSearchChange:Je=>{D(Je),Je||k(1)},fromDate:R,toDate:z,onDateRangeChange:(Je,dr)=>{U(Je),Z(dr),k(1),se&&ke(null)},status:H,onStatusChange:Je=>{K(Je),k(1),se&&ke(null)},paymentMethodFilter:J,onPaymentMethodFilterChange:Je=>{ae(Je),k(1),se&&ke(null)},keysetMode:se,onToggleKeyset:Je=>{ue(Je),k(1),ke(null)},customerDebts:N}),Yt&&s.jsx("div",{id:"last-receipt",className:"hidden print:block",children:s.jsxs("div",{style:{width:"148mm",minHeight:"210mm",margin:"0 auto",padding:"15mm",fontFamily:"Arial, sans-serif",fontSize:"12px",backgroundColor:"white",color:"#000",boxSizing:"border-box"},children:[s.jsxs("div",{style:{textAlign:"center",marginBottom:"20px",borderBottom:"2px solid #333",paddingBottom:"15px"},children:[s.jsx("img",{src:"https://raw.githubusercontent.com/Nhan-Lam-SmartCare/Motocare/main/public/logo.png",alt:"Nhn-Lm SmartCare",style:{width:"120px",height:"120px",margin:"0 auto 10px",display:"block"},onError:Je=>{Je.currentTarget.style.display="none"}}),s.jsx("h1",{style:{fontSize:"24px",fontWeight:"bold",margin:"0 0 8px 0",color:"#c92a2a"},children:"Nhn-Lm SmartCare"}),s.jsxs("div",{style:{fontSize:"11px",lineHeight:"1.6"},children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(vee,{className:"w-4 h-4","aria-hidden":"true"}),s.jsx("span",{children:"a ch: 4p Ph Li B, Ph Thun B, Hng Ng, ng Thp"})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"w-4 h-4",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 6.75c0 8.284 6.716 15 15 15 .828 0 1.5-.672 1.5-1.5v-2.25a1.5 1.5 0 00-1.5-1.5h-1.158a1.5 1.5 0 00-1.092.468l-.936.996a1.5 1.5 0 01-1.392.444 12.035 12.035 0 01-7.29-7.29 1.5 1.5 0 01.444-1.392l.996-.936a1.5 1.5 0 00.468-1.092V6.75A1.5 1.5 0 006.75 5.25H4.5c-.828 0-1.5.672-1.5 1.5z"})}),s.jsx("span",{children:"in thoi: 0947747907"})]})]})]}),s.jsxs("div",{style:{backgroundColor:"#f8f9fa",border:"1px solid #dee2e6",borderRadius:"6px",padding:"10px 12px",marginBottom:"20px",fontSize:"11px"},children:[s.jsx("div",{style:{fontWeight:"bold",marginBottom:"6px"},children:" Thng tin chuyn khon:"}),s.jsxs("div",{style:{lineHeight:"1.6"},children:[s.jsxs("div",{children:[" Ngn hng: ",s.jsx("strong",{children:"NH Lin Vit (LPBank)"})]}),s.jsxs("div",{children:[" S ti khon: ",s.jsx("strong",{children:"LAMVOT"})]}),s.jsxs("div",{children:[" Ch ti khon: ",s.jsx("strong",{children:"VO THANH LAM"})]})]})]}),s.jsxs("div",{style:{textAlign:"center",marginBottom:"15px"},children:[s.jsx("h2",{style:{fontSize:"18px",fontWeight:"bold",margin:"0 0 8px 0",textTransform:"uppercase",letterSpacing:"1px"},children:"HA N BN HNG"}),s.jsxs("div",{style:{fontSize:"11px",color:"#666"},children:["S: ",s.jsx("strong",{style:{color:"#000"},children:Yt})," - Ngy:"," ",s.jsx("strong",{style:{color:"#000"},children:Bn(new Date,!0)})]})]}),s.jsx("div",{style:{marginBottom:"15px",padding:"10px",backgroundColor:"#f8f9fa",borderRadius:"4px"},children:s.jsxs("div",{style:{fontSize:"12px",lineHeight:"1.8"},children:[s.jsxs("div",{children:[s.jsx("strong",{children:"Khch hng:"})," ",wr||"Khch l"]}),Et&&s.jsxs("div",{children:[s.jsx("strong",{children:"in thoi:"})," ",Et]})]})}),s.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",marginBottom:"15px",fontSize:"11px"},children:[s.jsx("thead",{children:s.jsxs("tr",{style:{backgroundColor:"#f1f3f5",borderTop:"2px solid #333",borderBottom:"2px solid #333"},children:[s.jsx("th",{style:{textAlign:"center",padding:"8px 4px",width:"8%",fontWeight:"bold"},children:"STT"}),s.jsx("th",{style:{textAlign:"left",padding:"8px 6px",width:"37%",fontWeight:"bold"},children:"Tn sn phm"}),s.jsx("th",{style:{textAlign:"center",padding:"8px 4px",width:"10%",fontWeight:"bold"},children:"SL"}),s.jsx("th",{style:{textAlign:"right",padding:"8px 6px",width:"20%",fontWeight:"bold"},children:"n gi"}),s.jsx("th",{style:{textAlign:"right",padding:"8px 6px",width:"25%",fontWeight:"bold"},children:"Thnh tin"})]})}),s.jsx("tbody",{children:Br.map((Je,dr)=>s.jsx(ua.Fragment,{children:s.jsxs("tr",{style:{borderBottom:"1px solid #e9ecef"},children:[s.jsx("td",{style:{textAlign:"center",padding:"10px 4px",verticalAlign:"top"},children:dr+1}),s.jsxs("td",{style:{padding:"10px 6px",verticalAlign:"top"},children:[s.jsx("div",{style:{fontWeight:"600",marginBottom:"3px"},children:Je.partName}),Je.sku&&s.jsxs("div",{style:{fontSize:"9px",color:"#868e96"},children:["SKU: ",Je.sku]})]}),s.jsx("td",{style:{textAlign:"center",padding:"10px 4px",verticalAlign:"top",fontWeight:"600"},children:Je.quantity}),s.jsx("td",{style:{textAlign:"right",padding:"10px 6px",verticalAlign:"top"},children:Oe(Je.sellingPrice)}),s.jsx("td",{style:{textAlign:"right",padding:"10px 6px",verticalAlign:"top",fontWeight:"600"},children:Oe(Je.sellingPrice*Je.quantity)})]})},Je.partId))})]}),s.jsx("div",{style:{borderTop:"2px solid #333",paddingTop:"12px",marginBottom:"15px"},children:s.jsx("table",{style:{width:"100%",fontSize:"12px"},children:s.jsxs("tbody",{children:[s.jsxs("tr",{children:[s.jsxs("td",{style:{padding:"6px 0",textAlign:"right"},children:["Tng cng (",mr," sn phm):"]}),s.jsx("td",{style:{padding:"6px 0 6px 20px",textAlign:"right",width:"30%",fontWeight:"600"},children:Oe(Jt)})]}),Zt>0&&s.jsxs("tr",{children:[s.jsx("td",{style:{padding:"6px 0",textAlign:"right",color:"#c92a2a"},children:"Gim gi:"}),s.jsxs("td",{style:{padding:"6px 0 6px 20px",textAlign:"right",fontWeight:"600",color:"#c92a2a"},children:["-",Oe(Zt)]})]}),s.jsxs("tr",{style:{borderTop:"1px solid #dee2e6",fontSize:"14px"},children:[s.jsx("td",{style:{padding:"10px 0",textAlign:"right",fontWeight:"bold"},children:"TNG THANH TON:"}),s.jsx("td",{style:{padding:"10px 0 10px 20px",textAlign:"right",fontWeight:"bold",fontSize:"16px",color:"#2f9e44"},children:Oe(ir)})]})]})})}),s.jsxs("div",{style:{marginBottom:"20px",padding:"10px 12px",backgroundColor:"#f8f9fa",borderRadius:"4px",fontSize:"11px"},children:[s.jsxs("div",{style:{marginBottom:"4px"},children:[s.jsx("strong",{children:"Hnh thc thanh ton:"})," ",sr==="cash"?"Tin mt":"Chuyn khon"]}),s.jsx("div",{style:{fontStyle:"italic",color:"#495057"},children:qr==="full"?"  thanh ton ":qr==="partial"?`Thanh ton mt phn: ${Oe(An)}`:"Ghi n"})]}),s.jsx("div",{style:{marginTop:"30px",borderTop:"1px solid #dee2e6",paddingTop:"20px"},children:s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"11px"},children:[s.jsxs("div",{style:{textAlign:"center",width:"40%"},children:[s.jsx("div",{style:{fontWeight:"bold",marginBottom:"50px",fontSize:"12px"},children:"Khch hng"}),s.jsx("div",{style:{fontStyle:"italic",color:"#868e96"},children:"(K v ghi r h tn)"})]}),s.jsxs("div",{style:{textAlign:"center",width:"40%"},children:[s.jsx("div",{style:{fontWeight:"bold",marginBottom:"50px",fontSize:"12px"},children:"Ngi bn hng"}),s.jsx("div",{style:{fontStyle:"italic",color:"#868e96"},children:"(K v ghi r h tn)"})]})]})}),s.jsxs("div",{style:{textAlign:"center",marginTop:"25px",paddingTop:"15px",borderTop:"1px dashed #adb5bd",fontSize:"11px",fontStyle:"italic",color:"#495057"},children:[s.jsxs("div",{style:{marginBottom:"5px",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},children:[s.jsx("span",{style:{display:"inline-flex"},children:"*"}),"Cm n qu khch  s dng dch v",s.jsx("span",{style:{display:"inline-flex"},children:"*"})]}),s.jsx("div",{children:"Hn gp li qu khch!"})]})]})}),yr&&s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl w-full max-w-md mx-4",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-slate-200 dark:border-slate-700",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Thm khch hng mi"}),s.jsx("button",{onClick:()=>{Ge(!1),$t({name:"",phone:"",vehicleModel:"",licensePlate:""})},className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-200",children:s.jsx(xp,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"p-4 space-y-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:["Tn khch hng ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",value:vt.name,onChange:Je=>$t({...vt,name:Je.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500",placeholder:"Nhp tn khch hng"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:["S in thoi ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"tel",value:vt.phone,onChange:Je=>$t({...vt,phone:Je.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500",placeholder:"Nhp s in thoi"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Dng xe"}),s.jsx("input",{type:"text",value:vt.vehicleModel,onChange:Je=>$t({...vt,vehicleModel:Je.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500",placeholder:"VD: Honda SH 2023"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Bin s xe"}),s.jsx("input",{type:"text",value:vt.licensePlate,onChange:Je=>$t({...vt,licensePlate:Je.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500",placeholder:"VD: 30A-12345"})]})]}),s.jsxs("div",{className:"flex gap-2 p-4 border-t border-slate-200 dark:border-slate-700",children:[s.jsx("button",{onClick:()=>{Ge(!1),$t({name:"",phone:"",vehicleModel:"",licensePlate:""})},className:"flex-1 px-4 py-2 bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-200 dark:hover:bg-slate-600",children:"Hy"}),s.jsx("button",{onClick:On,className:"flex-1 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600",children:"Lu"})]})]})}),Ne&&Ie&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl w-full max-w-4xl max-h-[90vh] flex flex-col",children:[s.jsxs("div",{className:"bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 px-6 py-4 flex items-center justify-between rounded-t-xl flex-shrink-0",children:[s.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:"Xem trc ha n"}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("button",{onClick:To,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg flex items-center gap-2 transition",children:[s.jsx(fm,{className:"w-4 h-4"}),"In ha n"]}),s.jsx("button",{onClick:()=>{De(!1),oe(null)},className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-300","aria-label":"ng",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"w-5 h-5",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]})]}),s.jsx("div",{className:"flex-1 overflow-y-auto p-6 bg-slate-100 dark:bg-slate-900",children:s.jsx("div",{className:"bg-white shadow-lg mx-auto",style:{width:"80mm",minHeight:"100mm",color:"#000"},children:s.jsxs("div",{style:{padding:"5mm"},children:[s.jsx("div",{style:{borderBottom:"2px solid #3b82f6",paddingBottom:"2mm",marginBottom:"3mm"},children:s.jsxs("div",{style:{textAlign:"center"},children:[(ne==null?void 0:ne.logo_url)&&s.jsx("img",{src:ne.logo_url,alt:"Logo",style:{height:"12mm",width:"auto",objectFit:"contain",margin:"0 auto 2mm"}}),s.jsx("div",{style:{fontWeight:"bold",fontSize:"11pt",color:"#1e40af"},children:(ne==null?void 0:ne.store_name)||"Nhn Lm SmartCare"}),s.jsx("div",{style:{fontSize:"8pt",color:"#000",marginTop:"1mm"},children:(ne==null?void 0:ne.address)&&` ${ne.address}`}),s.jsx("div",{style:{fontSize:"8pt",color:"#000"},children:(ne==null?void 0:ne.phone)&&` ${ne.phone}`})]})}),s.jsxs("div",{style:{textAlign:"center",marginBottom:"3mm"},children:[s.jsx("h1",{style:{fontSize:"14pt",fontWeight:"bold",margin:"0",color:"#1e40af"},children:"HA N BN HNG"}),s.jsx("div",{style:{fontSize:"8pt",color:"#666",marginTop:"1mm"},children:new Date(Ie.date).toLocaleString("vi-VN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}),s.jsxs("div",{style:{fontSize:"8pt",fontWeight:"bold",marginTop:"0.5mm"},children:["M: ",B1(Ie.id)||Ie.id]})]}),s.jsxs("div",{style:{border:"1px solid #ddd",padding:"2mm",marginBottom:"3mm",borderRadius:"2mm",backgroundColor:"#f8fafc",fontSize:"8.5pt"},children:[s.jsxs("div",{style:{marginBottom:"1mm"},children:[s.jsx("span",{style:{fontWeight:"bold"},children:"KH:"})," ",Ie.customer.name]}),Ie.customer.phone&&s.jsxs("div",{children:[s.jsx("span",{style:{fontWeight:"bold"},children:"ST:"})," ",Ie.customer.phone]})]}),s.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",marginBottom:"3mm",fontSize:"8.5pt"},children:[s.jsx("thead",{children:s.jsxs("tr",{style:{borderBottom:"1px solid #ddd"},children:[s.jsx("th",{style:{textAlign:"left",padding:"1mm",fontSize:"8pt"},children:"Sn phm"}),s.jsx("th",{style:{textAlign:"center",padding:"1mm",width:"15%",fontSize:"8pt"},children:"SL"}),s.jsx("th",{style:{textAlign:"right",padding:"1mm",width:"28%",fontSize:"8pt"},children:"Thnh tin"})]})}),s.jsx("tbody",{children:Ie.items.map((Je,dr)=>{const kr=Je.sellingPrice||Je.sellingprice||Je.price||0,pr=Je.quantity||0;return s.jsxs("tr",{style:{borderBottom:"1px dashed #ddd"},children:[s.jsx("td",{style:{padding:"1.5mm 1mm",fontSize:"8.5pt"},children:Je.partName||Je.partname}),s.jsx("td",{style:{textAlign:"center",padding:"1.5mm 1mm",fontSize:"8.5pt"},children:pr}),s.jsx("td",{style:{textAlign:"right",padding:"1.5mm 1mm",fontSize:"8.5pt",fontWeight:"bold"},children:Oe(kr*pr)})]},dr)})})]}),s.jsxs("div",{style:{borderTop:"2px solid #333",paddingTop:"2mm",marginBottom:"3mm",fontSize:"9pt"},children:[Ie.discount>0&&s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"1mm",color:"#e74c3c"},children:[s.jsx("span",{children:"Gim gi:"}),s.jsxs("span",{children:["-",Oe(Ie.discount)]})]}),s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontWeight:"bold",fontSize:"11pt"},children:[s.jsx("span",{children:"TNG CNG:"}),s.jsxs("span",{style:{color:"#2563eb"},children:[Oe(Ie.total)," "]})]})]}),(ne==null?void 0:ne.bank_name)&&s.jsxs("div",{style:{borderTop:"1px dashed #999",paddingTop:"2mm",marginBottom:"3mm",fontSize:"7.5pt",textAlign:"center"},children:[s.jsxs("div",{style:{fontWeight:"bold",marginBottom:"1mm"},children:["Chuyn khon: ",ne.bank_name]}),ne.bank_account_number&&s.jsxs("div",{children:["STK: ",ne.bank_account_number]}),ne.bank_account_holder&&s.jsx("div",{style:{fontSize:"7pt"},children:ne.bank_account_holder}),ne.bank_qr_url&&s.jsx("div",{style:{marginTop:"2mm"},children:s.jsx("img",{src:ne.bank_qr_url,alt:"QR Banking",style:{height:"20mm",width:"20mm",objectFit:"contain",margin:"0 auto"}})})]}),s.jsxs("div",{style:{textAlign:"center",fontSize:"7.5pt",color:"#666",borderTop:"1px dashed #999",paddingTop:"2mm"},children:[s.jsx("div",{children:"Cm n qu khch!"}),s.jsx("div",{children:"Hn gp li"})]})]})})})]})}),We==="products"&&r.length>0&&s.jsxs("button",{onClick:()=>Kt("cart"),className:"md:hidden fixed bottom-24 right-4 z-50 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white rounded-full shadow-2xl p-3 transition-all duration-200 hover:scale-105 active:scale-95","aria-label":"M gi hng",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Qf,{className:"w-5 h-5"}),r.length>0&&s.jsx("span",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-[11px] font-bold rounded-full w-5 h-5 flex items-center justify-center animate-pulse",children:r.length})]}),s.jsx("div",{className:"absolute -top-1 -right-1 w-2.5 h-2.5 bg-red-500 rounded-full animate-ping"})]})]})};/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var cw={};cw.version="0.18.5";var NH=1252,sbe=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],IC={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},DC=function(e){sbe.indexOf(e)!=-1&&(NH=IC[0]=e)};function ibe(){DC(1252)}var Zd=function(e){DC(e)};function MC(){Zd(1200),ibe()}function NI(e){for(var t=[],r=0,n=e.length;r<n;++r)t[r]=e.charCodeAt(r);return t}function lbe(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r)+(e.charCodeAt(2*r+1)<<8));return t.join("")}function _H(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r+1)+(e.charCodeAt(2*r)<<8));return t.join("")}var vg=function(e){var t=e.charCodeAt(0),r=e.charCodeAt(1);return t==255&&r==254?lbe(e.slice(2)):t==254&&r==255?_H(e.slice(2)):t==65279?e.slice(1):e},O2=function(t){return String.fromCharCode(t)},_I=function(t){return String.fromCharCode(t)},ob,Zh="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function cb(e){for(var t="",r=0,n=0,a=0,i=0,l=0,o=0,c=0,d=0;d<e.length;)r=e.charCodeAt(d++),i=r>>2,n=e.charCodeAt(d++),l=(r&3)<<4|n>>4,a=e.charCodeAt(d++),o=(n&15)<<2|a>>6,c=a&63,isNaN(n)?o=c=64:isNaN(a)&&(c=64),t+=Zh.charAt(i)+Zh.charAt(l)+Zh.charAt(o)+Zh.charAt(c);return t}function Ic(e){var t="",r=0,n=0,a=0,i=0,l=0,o=0,c=0;e=e.replace(/[^\w\+\/\=]/g,"");for(var d=0;d<e.length;)i=Zh.indexOf(e.charAt(d++)),l=Zh.indexOf(e.charAt(d++)),r=i<<2|l>>4,t+=String.fromCharCode(r),o=Zh.indexOf(e.charAt(d++)),n=(l&15)<<4|o>>2,o!==64&&(t+=String.fromCharCode(n)),c=Zh.indexOf(e.charAt(d++)),a=(o&3)<<6|c,c!==64&&(t+=String.fromCharCode(a));return t}var ra=(function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node})(),sh=(function(){if(typeof Buffer<"u"){var e=!Buffer.from;if(!e)try{Buffer.from("foo","utf8")}catch{e=!0}return e?function(t,r){return r?new Buffer(t,r):new Buffer(t)}:Buffer.from.bind(Buffer)}return function(){}})();function of(e){return ra?Buffer.alloc?Buffer.alloc(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}function SI(e){return ra?Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}var jc=function(t){return ra?sh(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)&255})};function Pk(e){if(typeof ArrayBuffer>"u")return jc(e);for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),n=0;n!=e.length;++n)r[n]=e.charCodeAt(n)&255;return t}function vf(e){if(Array.isArray(e))return e.map(function(n){return String.fromCharCode(n)}).join("");for(var t=[],r=0;r<e.length;++r)t[r]=String.fromCharCode(e[r]);return t.join("")}function obe(e){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(e)}function LC(e){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(e instanceof ArrayBuffer)return LC(new Uint8Array(e));for(var t=new Array(e.length),r=0;r<e.length;++r)t[r]=e[r];return t}var bl=ra?function(e){return Buffer.concat(e.map(function(t){return Buffer.isBuffer(t)?t:sh(t)}))}:function(e){if(typeof Uint8Array<"u"){var t=0,r=0;for(t=0;t<e.length;++t)r+=e[t].length;var n=new Uint8Array(r),a=0;for(t=0,r=0;t<e.length;r+=a,++t)if(a=e[t].length,e[t]instanceof Uint8Array)n.set(e[t],r);else{if(typeof e[t]=="string")throw"wtf";n.set(new Uint8Array(e[t]),r)}return n}return[].concat.apply([],e.map(function(i){return Array.isArray(i)?i:[].slice.call(i)}))};function cbe(e){for(var t=[],r=0,n=e.length+250,a=of(e.length+255),i=0;i<e.length;++i){var l=e.charCodeAt(i);if(l<128)a[r++]=l;else if(l<2048)a[r++]=192|l>>6&31,a[r++]=128|l&63;else if(l>=55296&&l<57344){l=(l&1023)+64;var o=e.charCodeAt(++i)&1023;a[r++]=240|l>>8&7,a[r++]=128|l>>2&63,a[r++]=128|o>>6&15|(l&3)<<4,a[r++]=128|o&63}else a[r++]=224|l>>12&15,a[r++]=128|l>>6&63,a[r++]=128|l&63;r>n&&(t.push(a.slice(0,r)),r=0,a=of(65535),n=65530)}return t.push(a.slice(0,r)),bl(t)}var Co=/\u0000/g,yg=/[\u0001-\u0006]/g;function p1(e){for(var t="",r=e.length-1;r>=0;)t+=e.charAt(r--);return t}function Qd(e,t){var r=""+e;return r.length>=t?r:li("0",t-r.length)+r}function RC(e,t){var r=""+e;return r.length>=t?r:li(" ",t-r.length)+r}function dw(e,t){var r=""+e;return r.length>=t?r:r+li(" ",t-r.length)}function dbe(e,t){var r=""+Math.round(e);return r.length>=t?r:li("0",t-r.length)+r}function ube(e,t){var r=""+e;return r.length>=t?r:li("0",t-r.length)+r}var jI=Math.pow(2,32);function Xx(e,t){if(e>jI||e<-jI)return dbe(e,t);var r=Math.round(e);return ube(r,t)}function uw(e,t){return t=t||0,e.length>=7+t&&(e.charCodeAt(t)|32)===103&&(e.charCodeAt(t+1)|32)===101&&(e.charCodeAt(t+2)|32)===110&&(e.charCodeAt(t+3)|32)===101&&(e.charCodeAt(t+4)|32)===114&&(e.charCodeAt(t+5)|32)===97&&(e.charCodeAt(t+6)|32)===108}var CI=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],tN=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function hbe(e){return e||(e={}),e[0]="General",e[1]="0",e[2]="0.00",e[3]="#,##0",e[4]="#,##0.00",e[9]="0%",e[10]="0.00%",e[11]="0.00E+00",e[12]="# ?/?",e[13]="# ??/??",e[14]="m/d/yy",e[15]="d-mmm-yy",e[16]="d-mmm",e[17]="mmm-yy",e[18]="h:mm AM/PM",e[19]="h:mm:ss AM/PM",e[20]="h:mm",e[21]="h:mm:ss",e[22]="m/d/yy h:mm",e[37]="#,##0 ;(#,##0)",e[38]="#,##0 ;[Red](#,##0)",e[39]="#,##0.00;(#,##0.00)",e[40]="#,##0.00;[Red](#,##0.00)",e[45]="mm:ss",e[46]="[h]:mm:ss",e[47]="mmss.0",e[48]="##0.0E+0",e[49]="@",e[56]='"/ "hh""mm""ss" "',e}var En={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},AI={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},fbe={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function hw(e,t,r){for(var n=e<0?-1:1,a=e*n,i=0,l=1,o=0,c=1,d=0,f=0,p=Math.floor(a);d<t&&(p=Math.floor(a),o=p*l+i,f=p*d+c,!(a-p<5e-8));)a=1/(a-p),i=l,l=o,c=d,d=f;if(f>t&&(d>t?(f=c,o=i):(f=d,o=l)),!r)return[0,n*o,f];var y=Math.floor(n*o/f);return[y,n*o-y*f,f]}function rm(e,t,r){if(e>2958465||e<0)return null;var n=e|0,a=Math.floor(86400*(e-n)),i=0,l=[],o={D:n,T:a,u:86400*(e-n)-a,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(o.u)<1e-6&&(o.u=0),t&&t.date1904&&(n+=1462),o.u>.9999&&(o.u=0,++a==86400&&(o.T=a=0,++n,++o.D)),n===60)l=r?[1317,10,29]:[1900,2,29],i=3;else if(n===0)l=r?[1317,8,29]:[1900,1,0],i=6;else{n>60&&--n;var c=new Date(1900,0,1);c.setDate(c.getDate()+n-1),l=[c.getFullYear(),c.getMonth()+1,c.getDate()],i=c.getDay(),n<60&&(i=(i+6)%7),r&&(i=vbe(c,l))}return o.y=l[0],o.m=l[1],o.d=l[2],o.S=a%60,a=Math.floor(a/60),o.M=a%60,a=Math.floor(a/60),o.H=a,o.q=i,o}var SH=new Date(1899,11,31,0,0,0),mbe=SH.getTime(),xbe=new Date(1900,2,1,0,0,0);function jH(e,t){var r=e.getTime();return t?r-=1461*24*60*60*1e3:e>=xbe&&(r+=1440*60*1e3),(r-(mbe+(e.getTimezoneOffset()-SH.getTimezoneOffset())*6e4))/(1440*60*1e3)}function FC(e){return e.indexOf(".")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function pbe(e){return e.indexOf("E")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function gbe(e){var t=e<0?12:11,r=FC(e.toFixed(12));return r.length<=t||(r=e.toPrecision(10),r.length<=t)?r:e.toExponential(5)}function bbe(e){var t=FC(e.toFixed(11));return t.length>(e<0?12:11)||t==="0"||t==="-0"?e.toPrecision(6):t}function db(e){var t=Math.floor(Math.log(Math.abs(e))*Math.LOG10E),r;return t>=-4&&t<=-1?r=e.toPrecision(10+t):Math.abs(t)<=9?r=gbe(e):t===10?r=e.toFixed(10).substr(0,12):r=bbe(e),FC(pbe(r.toUpperCase()))}function zm(e,t){switch(typeof e){case"string":return e;case"boolean":return e?"TRUE":"FALSE";case"number":return(e|0)===e?e.toString(10):db(e);case"undefined":return"";case"object":if(e==null)return"";if(e instanceof Date)return xd(14,jH(e,t&&t.date1904),t)}throw new Error("unsupported value in General format: "+e)}function vbe(e,t){t[0]-=581;var r=e.getDay();return e<60&&(r=(r+6)%7),r}function ybe(e,t,r,n){var a="",i=0,l=0,o=r.y,c,d=0;switch(e){case 98:o=r.y+543;case 121:switch(t.length){case 1:case 2:c=o%100,d=2;break;default:c=o%1e4,d=4;break}break;case 109:switch(t.length){case 1:case 2:c=r.m,d=t.length;break;case 3:return tN[r.m-1][1];case 5:return tN[r.m-1][0];default:return tN[r.m-1][2]}break;case 100:switch(t.length){case 1:case 2:c=r.d,d=t.length;break;case 3:return CI[r.q][0];default:return CI[r.q][1]}break;case 104:switch(t.length){case 1:case 2:c=1+(r.H+11)%12,d=t.length;break;default:throw"bad hour format: "+t}break;case 72:switch(t.length){case 1:case 2:c=r.H,d=t.length;break;default:throw"bad hour format: "+t}break;case 77:switch(t.length){case 1:case 2:c=r.M,d=t.length;break;default:throw"bad minute format: "+t}break;case 115:if(t!="s"&&t!="ss"&&t!=".0"&&t!=".00"&&t!=".000")throw"bad second format: "+t;return r.u===0&&(t=="s"||t=="ss")?Qd(r.S,t.length):(n>=2?l=n===3?1e3:100:l=n===1?10:1,i=Math.round(l*(r.S+r.u)),i>=60*l&&(i=0),t==="s"?i===0?"0":""+i/l:(a=Qd(i,2+n),t==="ss"?a.substr(0,2):"."+a.substr(2,t.length-1)));case 90:switch(t){case"[h]":case"[hh]":c=r.D*24+r.H;break;case"[m]":case"[mm]":c=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":c=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+t}d=t.length===3?1:2;break;case 101:c=o,d=1;break}var f=d>0?Qd(c,d):"";return f}function Qh(e){var t=3;if(e.length<=t)return e;for(var r=e.length%t,n=e.substr(0,r);r!=e.length;r+=t)n+=(n.length>0?",":"")+e.substr(r,t);return n}var CH=/%/g;function wbe(e,t,r){var n=t.replace(CH,""),a=t.length-n.length;return F0(e,n,r*Math.pow(10,2*a))+li("%",a)}function kbe(e,t,r){for(var n=t.length-1;t.charCodeAt(n-1)===44;)--n;return F0(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}function AH(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+AH(e,-t);var a=e.indexOf(".");a===-1&&(a=e.indexOf("E"));var i=Math.floor(Math.log(t)*Math.LOG10E)%a;if(i<0&&(i+=a),r=(t/Math.pow(10,i)).toPrecision(n+1+(a+i)%a),r.indexOf("e")===-1){var l=Math.floor(Math.log(t)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(l-r.length+i):r+="E+"+(l-i);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,a)+"."+r.substr(2+a),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,c,d,f){return c+d+f.substr(0,(a+i)%a)+"."+f.substr(i)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var EH=/# (\?+)( ?)\/( ?)(\d+)/;function Nbe(e,t,r){var n=parseInt(e[4],10),a=Math.round(t*n),i=Math.floor(a/n),l=a-i*n,o=n;return r+(i===0?"":""+i)+" "+(l===0?li(" ",e[1].length+1+e[4].length):RC(l,e[1].length)+e[2]+"/"+e[3]+Qd(o,e[4].length))}function _be(e,t,r){return r+(t===0?"":""+t)+li(" ",e[1].length+2+e[4].length)}var TH=/^#*0*\.([0#]+)/,OH=/\).*[0#]/,PH=/\(###\) ###\\?-####/;function wo(e){for(var t="",r,n=0;n!=e.length;++n)switch(r=e.charCodeAt(n)){case 35:break;case 63:t+=" ";break;case 48:t+="0";break;default:t+=String.fromCharCode(r)}return t}function EI(e,t){var r=Math.pow(10,t);return""+Math.round(e*r)/r}function TI(e,t){var r=e-Math.floor(e),n=Math.pow(10,t);return t<(""+Math.round(r*n)).length?0:Math.round(r*n)}function Sbe(e,t){return t<(""+Math.round((e-Math.floor(e))*Math.pow(10,t))).length?1:0}function jbe(e){return e<2147483647&&e>-2147483648?""+(e>=0?e|0:e-1|0):""+Math.floor(e)}function td(e,t,r){if(e.charCodeAt(0)===40&&!t.match(OH)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?td("n",n,r):"("+td("n",n,-r)+")"}if(t.charCodeAt(t.length-1)===44)return kbe(e,t,r);if(t.indexOf("%")!==-1)return wbe(e,t,r);if(t.indexOf("E")!==-1)return AH(t,r);if(t.charCodeAt(0)===36)return"$"+td(e,t.substr(t.charAt(1)==" "?2:1),r);var a,i,l,o,c=Math.abs(r),d=r<0?"-":"";if(t.match(/^00+$/))return d+Xx(c,t.length);if(t.match(/^[#?]+$/))return a=Xx(r,0),a==="0"&&(a=""),a.length>t.length?a:wo(t.substr(0,t.length-a.length))+a;if(i=t.match(EH))return Nbe(i,c,d);if(t.match(/^#+0+$/))return d+Xx(c,t.length-t.indexOf("0"));if(i=t.match(TH))return a=EI(r,i[1].length).replace(/^([^\.]+)$/,"$1."+wo(i[1])).replace(/\.$/,"."+wo(i[1])).replace(/\.(\d*)$/,function(N,w){return"."+w+li("0",wo(i[1]).length-w.length)}),t.indexOf("0.")!==-1?a:a.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),i=t.match(/^(0*)\.(#*)$/))return d+EI(c,i[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=t.match(/^#{1,3},##0(\.?)$/))return d+Qh(Xx(c,0));if(i=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+td(e,t,-r):Qh(""+(Math.floor(r)+Sbe(r,i[1].length)))+"."+Qd(TI(r,i[1].length),i[1].length);if(i=t.match(/^#,#*,#0/))return td(e,t.replace(/^#,#*,/,""),r);if(i=t.match(/^([0#]+)(\\?-([0#]+))+$/))return a=p1(td(e,t.replace(/[\\-]/g,""),r)),l=0,p1(p1(t.replace(/\\/g,"")).replace(/[0#]/g,function(N){return l<a.length?a.charAt(l++):N==="0"?"0":""}));if(t.match(PH))return a=td(e,"##########",r),"("+a.substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var f="";if(i=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return l=Math.min(i[4].length,7),o=hw(c,Math.pow(10,l)-1,!1),a=""+d,f=F0("n",i[1],o[1]),f.charAt(f.length-1)==" "&&(f=f.substr(0,f.length-1)+"0"),a+=f+i[2]+"/"+i[3],f=dw(o[2],l),f.length<i[4].length&&(f=wo(i[4].substr(i[4].length-f.length))+f),a+=f,a;if(i=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return l=Math.min(Math.max(i[1].length,i[4].length),7),o=hw(c,Math.pow(10,l)-1,!0),d+(o[0]||(o[1]?"":"0"))+" "+(o[1]?RC(o[1],l)+i[2]+"/"+i[3]+dw(o[2],l):li(" ",2*l+1+i[2].length+i[3].length));if(i=t.match(/^[#0?]+$/))return a=Xx(r,0),t.length<=a.length?a:wo(t.substr(0,t.length-a.length))+a;if(i=t.match(/^([#0?]+)\.([#0]+)$/)){a=""+r.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),l=a.indexOf(".");var p=t.indexOf(".")-l,y=t.length-a.length-p;return wo(t.substr(0,p)+a+t.substr(t.length-y))}if(i=t.match(/^00,000\.([#0]*0)$/))return l=TI(r,i[1].length),r<0?"-"+td(e,t,-r):Qh(jbe(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(N){return"00,"+(N.length<3?Qd(0,3-N.length):"")+N})+"."+Qd(l,i[1].length);switch(t){case"###,##0.00":return td(e,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var g=Qh(Xx(c,0));return g!=="0"?d+g:"";case"###,###.00":return td(e,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return td(e,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+t+"|")}function Cbe(e,t,r){for(var n=t.length-1;t.charCodeAt(n-1)===44;)--n;return F0(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}function Abe(e,t,r){var n=t.replace(CH,""),a=t.length-n.length;return F0(e,n,r*Math.pow(10,2*a))+li("%",a)}function IH(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+IH(e,-t);var a=e.indexOf(".");a===-1&&(a=e.indexOf("E"));var i=Math.floor(Math.log(t)*Math.LOG10E)%a;if(i<0&&(i+=a),r=(t/Math.pow(10,i)).toPrecision(n+1+(a+i)%a),!r.match(/[Ee]/)){var l=Math.floor(Math.log(t)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(l-r.length+i):r+="E+"+(l-i),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,c,d,f){return c+d+f.substr(0,(a+i)%a)+"."+f.substr(i)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function _u(e,t,r){if(e.charCodeAt(0)===40&&!t.match(OH)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?_u("n",n,r):"("+_u("n",n,-r)+")"}if(t.charCodeAt(t.length-1)===44)return Cbe(e,t,r);if(t.indexOf("%")!==-1)return Abe(e,t,r);if(t.indexOf("E")!==-1)return IH(t,r);if(t.charCodeAt(0)===36)return"$"+_u(e,t.substr(t.charAt(1)==" "?2:1),r);var a,i,l,o,c=Math.abs(r),d=r<0?"-":"";if(t.match(/^00+$/))return d+Qd(c,t.length);if(t.match(/^[#?]+$/))return a=""+r,r===0&&(a=""),a.length>t.length?a:wo(t.substr(0,t.length-a.length))+a;if(i=t.match(EH))return _be(i,c,d);if(t.match(/^#+0+$/))return d+Qd(c,t.length-t.indexOf("0"));if(i=t.match(TH))return a=(""+r).replace(/^([^\.]+)$/,"$1."+wo(i[1])).replace(/\.$/,"."+wo(i[1])),a=a.replace(/\.(\d*)$/,function(N,w){return"."+w+li("0",wo(i[1]).length-w.length)}),t.indexOf("0.")!==-1?a:a.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),i=t.match(/^(0*)\.(#*)$/))return d+(""+c).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=t.match(/^#{1,3},##0(\.?)$/))return d+Qh(""+c);if(i=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+_u(e,t,-r):Qh(""+r)+"."+li("0",i[1].length);if(i=t.match(/^#,#*,#0/))return _u(e,t.replace(/^#,#*,/,""),r);if(i=t.match(/^([0#]+)(\\?-([0#]+))+$/))return a=p1(_u(e,t.replace(/[\\-]/g,""),r)),l=0,p1(p1(t.replace(/\\/g,"")).replace(/[0#]/g,function(N){return l<a.length?a.charAt(l++):N==="0"?"0":""}));if(t.match(PH))return a=_u(e,"##########",r),"("+a.substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var f="";if(i=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return l=Math.min(i[4].length,7),o=hw(c,Math.pow(10,l)-1,!1),a=""+d,f=F0("n",i[1],o[1]),f.charAt(f.length-1)==" "&&(f=f.substr(0,f.length-1)+"0"),a+=f+i[2]+"/"+i[3],f=dw(o[2],l),f.length<i[4].length&&(f=wo(i[4].substr(i[4].length-f.length))+f),a+=f,a;if(i=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return l=Math.min(Math.max(i[1].length,i[4].length),7),o=hw(c,Math.pow(10,l)-1,!0),d+(o[0]||(o[1]?"":"0"))+" "+(o[1]?RC(o[1],l)+i[2]+"/"+i[3]+dw(o[2],l):li(" ",2*l+1+i[2].length+i[3].length));if(i=t.match(/^[#0?]+$/))return a=""+r,t.length<=a.length?a:wo(t.substr(0,t.length-a.length))+a;if(i=t.match(/^([#0]+)\.([#0]+)$/)){a=""+r.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),l=a.indexOf(".");var p=t.indexOf(".")-l,y=t.length-a.length-p;return wo(t.substr(0,p)+a+t.substr(t.length-y))}if(i=t.match(/^00,000\.([#0]*0)$/))return r<0?"-"+_u(e,t,-r):Qh(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(N){return"00,"+(N.length<3?Qd(0,3-N.length):"")+N})+"."+Qd(0,i[1].length);switch(t){case"###,###":case"##,###":case"#,###":var g=Qh(""+c);return g!=="0"?d+g:"";default:if(t.match(/\.[0#?]*$/))return _u(e,t.slice(0,t.lastIndexOf(".")),r)+wo(t.slice(t.lastIndexOf(".")))}throw new Error("unsupported format |"+t+"|")}function F0(e,t,r){return(r|0)===r?_u(e,t,r):td(e,t,r)}function Ebe(e){for(var t=[],r=!1,n=0,a=0;n<e.length;++n)switch(e.charCodeAt(n)){case 34:r=!r;break;case 95:case 42:case 92:++n;break;case 59:t[t.length]=e.substr(a,n-a),a=n+1}if(t[t.length]=e.substr(a),r===!0)throw new Error("Format |"+e+"| unterminated string ");return t}var DH=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function pp(e){for(var t=0,r="",n="";t<e.length;)switch(r=e.charAt(t)){case"G":uw(e,t)&&(t+=6),t++;break;case'"':for(;e.charCodeAt(++t)!==34&&t<e.length;);++t;break;case"\\":t+=2;break;case"_":t+=2;break;case"@":++t;break;case"B":case"b":if(e.charAt(t+1)==="1"||e.charAt(t+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(e.substr(t,3).toUpperCase()==="A/P"||e.substr(t,5).toUpperCase()==="AM/PM"||e.substr(t,5).toUpperCase()==="/")return!0;++t;break;case"[":for(n=r;e.charAt(t++)!=="]"&&t<e.length;)n+=e.charAt(t);if(n.match(DH))return!0;break;case".":case"0":case"#":for(;t<e.length&&("0#?.,E+-%".indexOf(r=e.charAt(++t))>-1||r=="\\"&&e.charAt(t+1)=="-"&&"0#".indexOf(e.charAt(t+2))>-1););break;case"?":for(;e.charAt(++t)===r;);break;case"*":++t,(e.charAt(t)==" "||e.charAt(t)=="*")&&++t;break;case"(":case")":++t;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;t<e.length&&"0123456789".indexOf(e.charAt(++t))>-1;);break;case" ":++t;break;default:++t;break}return!1}function Tbe(e,t,r,n){for(var a=[],i="",l=0,o="",c="t",d,f,p,y="H";l<e.length;)switch(o=e.charAt(l)){case"G":if(!uw(e,l))throw new Error("unrecognized character "+o+" in "+e);a[a.length]={t:"G",v:"General"},l+=7;break;case'"':for(i="";(p=e.charCodeAt(++l))!==34&&l<e.length;)i+=String.fromCharCode(p);a[a.length]={t:"t",v:i},++l;break;case"\\":var g=e.charAt(++l),N=g==="("||g===")"?g:"t";a[a.length]={t:N,v:g},++l;break;case"_":a[a.length]={t:"t",v:" "},l+=2;break;case"@":a[a.length]={t:"T",v:t},++l;break;case"B":case"b":if(e.charAt(l+1)==="1"||e.charAt(l+1)==="2"){if(d==null&&(d=rm(t,r,e.charAt(l+1)==="2"),d==null))return"";a[a.length]={t:"X",v:e.substr(l,2)},c=o,l+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":o=o.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(t<0||d==null&&(d=rm(t,r),d==null))return"";for(i=o;++l<e.length&&e.charAt(l).toLowerCase()===o;)i+=o;o==="m"&&c.toLowerCase()==="h"&&(o="M"),o==="h"&&(o=y),a[a.length]={t:o,v:i},c=o;break;case"A":case"a":case"":var w={t:o,v:o};if(d==null&&(d=rm(t,r)),e.substr(l,3).toUpperCase()==="A/P"?(d!=null&&(w.v=d.H>=12?"P":"A"),w.t="T",y="h",l+=3):e.substr(l,5).toUpperCase()==="AM/PM"?(d!=null&&(w.v=d.H>=12?"PM":"AM"),w.t="T",l+=5,y="h"):e.substr(l,5).toUpperCase()==="/"?(d!=null&&(w.v=d.H>=12?"":""),w.t="T",l+=5,y="h"):(w.t="t",++l),d==null&&w.t==="T")return"";a[a.length]=w,c=o;break;case"[":for(i=o;e.charAt(l++)!=="]"&&l<e.length;)i+=e.charAt(l);if(i.slice(-1)!=="]")throw'unterminated "[" block: |'+i+"|";if(i.match(DH)){if(d==null&&(d=rm(t,r),d==null))return"";a[a.length]={t:"Z",v:i.toLowerCase()},c=i.charAt(1)}else i.indexOf("$")>-1&&(i=(i.match(/\$([^-\[\]]*)/)||[])[1]||"$",pp(e)||(a[a.length]={t:"t",v:i}));break;case".":if(d!=null){for(i=o;++l<e.length&&(o=e.charAt(l))==="0";)i+=o;a[a.length]={t:"s",v:i};break}case"0":case"#":for(i=o;++l<e.length&&"0#?.,E+-%".indexOf(o=e.charAt(l))>-1;)i+=o;a[a.length]={t:"n",v:i};break;case"?":for(i=o;e.charAt(++l)===o;)i+=o;a[a.length]={t:o,v:i},c=o;break;case"*":++l,(e.charAt(l)==" "||e.charAt(l)=="*")&&++l;break;case"(":case")":a[a.length]={t:n===1?"t":o,v:o},++l;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(i=o;l<e.length&&"0123456789".indexOf(e.charAt(++l))>-1;)i+=e.charAt(l);a[a.length]={t:"D",v:i};break;case" ":a[a.length]={t:o,v:o},++l;break;case"$":a[a.length]={t:"t",v:"$"},++l;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(o)===-1)throw new Error("unrecognized character "+o+" in "+e);a[a.length]={t:"t",v:o},++l;break}var k=0,S=0,O;for(l=a.length-1,c="t";l>=0;--l)switch(a[l].t){case"h":case"H":a[l].t=y,c="h",k<1&&(k=1);break;case"s":(O=a[l].v.match(/\.0+$/))&&(S=Math.max(S,O[0].length-1)),k<3&&(k=3);case"d":case"y":case"M":case"e":c=a[l].t;break;case"m":c==="s"&&(a[l].t="M",k<2&&(k=2));break;case"X":break;case"Z":k<1&&a[l].v.match(/[Hh]/)&&(k=1),k<2&&a[l].v.match(/[Mm]/)&&(k=2),k<3&&a[l].v.match(/[Ss]/)&&(k=3)}switch(k){case 0:break;case 1:d.u>=.5&&(d.u=0,++d.S),d.S>=60&&(d.S=0,++d.M),d.M>=60&&(d.M=0,++d.H);break;case 2:d.u>=.5&&(d.u=0,++d.S),d.S>=60&&(d.S=0,++d.M);break}var E="",D;for(l=0;l<a.length;++l)switch(a[l].t){case"t":case"T":case" ":case"D":break;case"X":a[l].v="",a[l].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":a[l].v=ybe(a[l].t.charCodeAt(0),a[l].v,d,S),a[l].t="t";break;case"n":case"?":for(D=l+1;a[D]!=null&&((o=a[D].t)==="?"||o==="D"||(o===" "||o==="t")&&a[D+1]!=null&&(a[D+1].t==="?"||a[D+1].t==="t"&&a[D+1].v==="/")||a[l].t==="("&&(o===" "||o==="n"||o===")")||o==="t"&&(a[D].v==="/"||a[D].v===" "&&a[D+1]!=null&&a[D+1].t=="?"));)a[l].v+=a[D].v,a[D]={v:"",t:";"},++D;E+=a[l].v,l=D-1;break;case"G":a[l].t="t",a[l].v=zm(t,r);break}var q="",W,R;if(E.length>0){E.charCodeAt(0)==40?(W=t<0&&E.charCodeAt(0)===45?-t:t,R=F0("n",E,W)):(W=t<0&&n>1?-t:t,R=F0("n",E,W),W<0&&a[0]&&a[0].t=="t"&&(R=R.substr(1),a[0].v="-"+a[0].v)),D=R.length-1;var U=a.length;for(l=0;l<a.length;++l)if(a[l]!=null&&a[l].t!="t"&&a[l].v.indexOf(".")>-1){U=l;break}var z=a.length;if(U===a.length&&R.indexOf("E")===-1){for(l=a.length-1;l>=0;--l)a[l]==null||"n?".indexOf(a[l].t)===-1||(D>=a[l].v.length-1?(D-=a[l].v.length,a[l].v=R.substr(D+1,a[l].v.length)):D<0?a[l].v="":(a[l].v=R.substr(0,D+1),D=-1),a[l].t="t",z=l);D>=0&&z<a.length&&(a[z].v=R.substr(0,D+1)+a[z].v)}else if(U!==a.length&&R.indexOf("E")===-1){for(D=R.indexOf(".")-1,l=U;l>=0;--l)if(!(a[l]==null||"n?".indexOf(a[l].t)===-1)){for(f=a[l].v.indexOf(".")>-1&&l===U?a[l].v.indexOf(".")-1:a[l].v.length-1,q=a[l].v.substr(f+1);f>=0;--f)D>=0&&(a[l].v.charAt(f)==="0"||a[l].v.charAt(f)==="#")&&(q=R.charAt(D--)+q);a[l].v=q,a[l].t="t",z=l}for(D>=0&&z<a.length&&(a[z].v=R.substr(0,D+1)+a[z].v),D=R.indexOf(".")+1,l=U;l<a.length;++l)if(!(a[l]==null||"n?(".indexOf(a[l].t)===-1&&l!==U)){for(f=a[l].v.indexOf(".")>-1&&l===U?a[l].v.indexOf(".")+1:0,q=a[l].v.substr(0,f);f<a[l].v.length;++f)D<R.length&&(q+=R.charAt(D++));a[l].v=q,a[l].t="t",z=l}}}for(l=0;l<a.length;++l)a[l]!=null&&"n?".indexOf(a[l].t)>-1&&(W=n>1&&t<0&&l>0&&a[l-1].v==="-"?-t:t,a[l].v=F0(a[l].t,a[l].v,W),a[l].t="t");var Z="";for(l=0;l!==a.length;++l)a[l]!=null&&(Z+=a[l].v);return Z}var OI=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function PI(e,t){if(t==null)return!1;var r=parseFloat(t[2]);switch(t[1]){case"=":if(e==r)return!0;break;case">":if(e>r)return!0;break;case"<":if(e<r)return!0;break;case"<>":if(e!=r)return!0;break;case">=":if(e>=r)return!0;break;case"<=":if(e<=r)return!0;break}return!1}function Obe(e,t){var r=Ebe(e),n=r.length,a=r[n-1].indexOf("@");if(n<4&&a>-1&&--n,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof t!="number")return[4,r.length===4||a>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=a>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=a>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=a>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var i=t>0?r[0]:t<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[n,i];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var l=r[0].match(OI),o=r[1].match(OI);return PI(t,l)?[n,r[0]]:PI(t,o)?[n,r[1]]:[n,r[l!=null&&o!=null?2:1]]}return[n,i]}function xd(e,t,r){r==null&&(r={});var n="";switch(typeof e){case"string":e=="m/d/yy"&&r.dateNF?n=r.dateNF:n=e;break;case"number":e==14&&r.dateNF?n=r.dateNF:n=(r.table!=null?r.table:En)[e],n==null&&(n=r.table&&r.table[AI[e]]||En[AI[e]]),n==null&&(n=fbe[e]||"General");break}if(uw(n,0))return zm(t,r);t instanceof Date&&(t=jH(t,r.date1904));var a=Obe(n,t);if(uw(a[1]))return zm(t,r);if(t===!0)t="TRUE";else if(t===!1)t="FALSE";else if(t===""||t==null)return"";return Tbe(a[1],t,r,a[0])}function B0(e,t){if(typeof t!="number"){t=+t||-1;for(var r=0;r<392;++r){if(En[r]==null){t<0&&(t=r);continue}if(En[r]==e){t=r;break}}t<0&&(t=391)}return En[t]=e,t}function Ik(e){for(var t=0;t!=392;++t)e[t]!==void 0&&B0(e[t],t)}function gp(){En=hbe()}var Pbe={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},MH=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function Ibe(e){var t=typeof e=="number"?En[e]:e;return t=t.replace(MH,"(\\d+)"),new RegExp("^"+t+"$")}function Dbe(e,t,r){var n=-1,a=-1,i=-1,l=-1,o=-1,c=-1;(t.match(MH)||[]).forEach(function(p,y){var g=parseInt(r[y+1],10);switch(p.toLowerCase().charAt(0)){case"y":n=g;break;case"d":i=g;break;case"h":l=g;break;case"s":c=g;break;case"m":l>=0?o=g:a=g;break}}),c>=0&&o==-1&&a>=0&&(o=a,a=-1);var d=(""+(n>=0?n:new Date().getFullYear())).slice(-4)+"-"+("00"+(a>=1?a:1)).slice(-2)+"-"+("00"+(i>=1?i:1)).slice(-2);d.length==7&&(d="0"+d),d.length==8&&(d="20"+d);var f=("00"+(l>=0?l:0)).slice(-2)+":"+("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(c>=0?c:0)).slice(-2);return l==-1&&o==-1&&c==-1?d:n==-1&&a==-1&&i==-1?f:d+"T"+f}var Mbe=(function(){var e={};e.version="1.2.0";function t(){for(var R=0,U=new Array(256),z=0;z!=256;++z)R=z,R=R&1?-306674912^R>>>1:R>>>1,R=R&1?-306674912^R>>>1:R>>>1,R=R&1?-306674912^R>>>1:R>>>1,R=R&1?-306674912^R>>>1:R>>>1,R=R&1?-306674912^R>>>1:R>>>1,R=R&1?-306674912^R>>>1:R>>>1,R=R&1?-306674912^R>>>1:R>>>1,R=R&1?-306674912^R>>>1:R>>>1,U[z]=R;return typeof Int32Array<"u"?new Int32Array(U):U}var r=t();function n(R){var U=0,z=0,Z=0,H=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(Z=0;Z!=256;++Z)H[Z]=R[Z];for(Z=0;Z!=256;++Z)for(z=R[Z],U=256+Z;U<4096;U+=256)z=H[U]=z>>>8^R[z&255];var K=[];for(Z=1;Z!=16;++Z)K[Z-1]=typeof Int32Array<"u"?H.subarray(Z*256,Z*256+256):H.slice(Z*256,Z*256+256);return K}var a=n(r),i=a[0],l=a[1],o=a[2],c=a[3],d=a[4],f=a[5],p=a[6],y=a[7],g=a[8],N=a[9],w=a[10],k=a[11],S=a[12],O=a[13],E=a[14];function D(R,U){for(var z=U^-1,Z=0,H=R.length;Z<H;)z=z>>>8^r[(z^R.charCodeAt(Z++))&255];return~z}function q(R,U){for(var z=U^-1,Z=R.length-15,H=0;H<Z;)z=E[R[H++]^z&255]^O[R[H++]^z>>8&255]^S[R[H++]^z>>16&255]^k[R[H++]^z>>>24]^w[R[H++]]^N[R[H++]]^g[R[H++]]^y[R[H++]]^p[R[H++]]^f[R[H++]]^d[R[H++]]^c[R[H++]]^o[R[H++]]^l[R[H++]]^i[R[H++]]^r[R[H++]];for(Z+=15;H<Z;)z=z>>>8^r[(z^R[H++])&255];return~z}function W(R,U){for(var z=U^-1,Z=0,H=R.length,K=0,J=0;Z<H;)K=R.charCodeAt(Z++),K<128?z=z>>>8^r[(z^K)&255]:K<2048?(z=z>>>8^r[(z^(192|K>>6&31))&255],z=z>>>8^r[(z^(128|K&63))&255]):K>=55296&&K<57344?(K=(K&1023)+64,J=R.charCodeAt(Z++)&1023,z=z>>>8^r[(z^(240|K>>8&7))&255],z=z>>>8^r[(z^(128|K>>2&63))&255],z=z>>>8^r[(z^(128|J>>6&15|(K&3)<<4))&255],z=z>>>8^r[(z^(128|J&63))&255]):(z=z>>>8^r[(z^(224|K>>12&15))&255],z=z>>>8^r[(z^(128|K>>6&63))&255],z=z>>>8^r[(z^(128|K&63))&255]);return~z}return e.table=r,e.bstr=D,e.buf=q,e.str=W,e})(),yn=(function(){var t={};t.version="1.2.1";function r(we,Ne){for(var De=we.split("/"),Ie=Ne.split("/"),oe=0,ne=0,ze=Math.min(De.length,Ie.length);oe<ze;++oe){if(ne=De[oe].length-Ie[oe].length)return ne;if(De[oe]!=Ie[oe])return De[oe]<Ie[oe]?-1:1}return De.length-Ie.length}function n(we){if(we.charAt(we.length-1)=="/")return we.slice(0,-1).indexOf("/")===-1?we:n(we.slice(0,-1));var Ne=we.lastIndexOf("/");return Ne===-1?we:we.slice(0,Ne+1)}function a(we){if(we.charAt(we.length-1)=="/")return a(we.slice(0,-1));var Ne=we.lastIndexOf("/");return Ne===-1?we:we.slice(Ne+1)}function i(we,Ne){typeof Ne=="string"&&(Ne=new Date(Ne));var De=Ne.getHours();De=De<<6|Ne.getMinutes(),De=De<<5|Ne.getSeconds()>>>1,we.write_shift(2,De);var Ie=Ne.getFullYear()-1980;Ie=Ie<<4|Ne.getMonth()+1,Ie=Ie<<5|Ne.getDate(),we.write_shift(2,Ie)}function l(we){var Ne=we.read_shift(2)&65535,De=we.read_shift(2)&65535,Ie=new Date,oe=De&31;De>>>=5;var ne=De&15;De>>>=4,Ie.setMilliseconds(0),Ie.setFullYear(De+1980),Ie.setMonth(ne-1),Ie.setDate(oe);var ze=Ne&31;Ne>>>=5;var st=Ne&63;return Ne>>>=6,Ie.setHours(Ne),Ie.setMinutes(st),Ie.setSeconds(ze<<1),Ie}function o(we){Il(we,0);for(var Ne={},De=0;we.l<=we.length-4;){var Ie=we.read_shift(2),oe=we.read_shift(2),ne=we.l+oe,ze={};switch(Ie){case 21589:De=we.read_shift(1),De&1&&(ze.mtime=we.read_shift(4)),oe>5&&(De&2&&(ze.atime=we.read_shift(4)),De&4&&(ze.ctime=we.read_shift(4))),ze.mtime&&(ze.mt=new Date(ze.mtime*1e3));break}we.l=ne,Ne[Ie]=ze}return Ne}var c;function d(){return c||(c={})}function f(we,Ne){if(we[0]==80&&we[1]==75)return Er(we,Ne);if((we[0]|32)==109&&(we[1]|32)==105)return sr(we,Ne);if(we.length<512)throw new Error("CFB file size "+we.length+" < 512");var De=3,Ie=512,oe=0,ne=0,ze=0,st=0,Ze=0,mt=[],ct=we.slice(0,512);Il(ct,0);var Rt=p(ct);switch(De=Rt[0],De){case 3:Ie=512;break;case 4:Ie=4096;break;case 0:if(Rt[1]==0)return Er(we,Ne);default:throw new Error("Major Version: Expected 3 or 4 saw "+De)}Ie!==512&&(ct=we.slice(0,Ie),Il(ct,28));var Xt=we.slice(0,Ie);y(ct,De);var Jt=ct.read_shift(4,"i");if(De===3&&Jt!==0)throw new Error("# Directory Sectors: Expected 0 saw "+Jt);ct.l+=4,ze=ct.read_shift(4,"i"),ct.l+=4,ct.chk("00100000","Mini Stream Cutoff Size: "),st=ct.read_shift(4,"i"),oe=ct.read_shift(4,"i"),Ze=ct.read_shift(4,"i"),ne=ct.read_shift(4,"i");for(var ir=-1,mr=0;mr<109&&(ir=ct.read_shift(4,"i"),!(ir<0));++mr)mt[mr]=ir;var Sr=g(we,Ie);k(Ze,ne,Sr,Ie,mt);var Pt=O(Sr,ze,mt,Ie);Pt[ze].name="!Directory",oe>0&&st!==J&&(Pt[st].name="!MiniFAT"),Pt[mt[0]].name="!FAT",Pt.fat_addrs=mt,Pt.ssz=Ie;var Un={},en=[],Na=[],Ci=[];E(ze,Pt,Sr,en,oe,Un,Na,st),N(Na,Ci,en),en.shift();var tn={FileIndex:Na,FullPaths:Ci};return Ne&&Ne.raw&&(tn.raw={header:Xt,sectors:Sr}),tn}function p(we){if(we[we.l]==80&&we[we.l+1]==75)return[0,0];we.chk(ae,"Header Signature: "),we.l+=16;var Ne=we.read_shift(2,"u");return[we.read_shift(2,"u"),Ne]}function y(we,Ne){var De=9;switch(we.l+=2,De=we.read_shift(2)){case 9:if(Ne!=3)throw new Error("Sector Shift: Expected 9 saw "+De);break;case 12:if(Ne!=4)throw new Error("Sector Shift: Expected 12 saw "+De);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+De)}we.chk("0600","Mini Sector Shift: "),we.chk("000000000000","Reserved: ")}function g(we,Ne){for(var De=Math.ceil(we.length/Ne)-1,Ie=[],oe=1;oe<De;++oe)Ie[oe-1]=we.slice(oe*Ne,(oe+1)*Ne);return Ie[De-1]=we.slice(De*Ne),Ie}function N(we,Ne,De){for(var Ie=0,oe=0,ne=0,ze=0,st=0,Ze=De.length,mt=[],ct=[];Ie<Ze;++Ie)mt[Ie]=ct[Ie]=Ie,Ne[Ie]=De[Ie];for(;st<ct.length;++st)Ie=ct[st],oe=we[Ie].L,ne=we[Ie].R,ze=we[Ie].C,mt[Ie]===Ie&&(oe!==-1&&mt[oe]!==oe&&(mt[Ie]=mt[oe]),ne!==-1&&mt[ne]!==ne&&(mt[Ie]=mt[ne])),ze!==-1&&(mt[ze]=Ie),oe!==-1&&Ie!=mt[Ie]&&(mt[oe]=mt[Ie],ct.lastIndexOf(oe)<st&&ct.push(oe)),ne!==-1&&Ie!=mt[Ie]&&(mt[ne]=mt[Ie],ct.lastIndexOf(ne)<st&&ct.push(ne));for(Ie=1;Ie<Ze;++Ie)mt[Ie]===Ie&&(ne!==-1&&mt[ne]!==ne?mt[Ie]=mt[ne]:oe!==-1&&mt[oe]!==oe&&(mt[Ie]=mt[oe]));for(Ie=1;Ie<Ze;++Ie)if(we[Ie].type!==0){if(st=Ie,st!=mt[st])do st=mt[st],Ne[Ie]=Ne[st]+"/"+Ne[Ie];while(st!==0&&mt[st]!==-1&&st!=mt[st]);mt[Ie]=-1}for(Ne[0]+="/",Ie=1;Ie<Ze;++Ie)we[Ie].type!==2&&(Ne[Ie]+="/")}function w(we,Ne,De){for(var Ie=we.start,oe=we.size,ne=[],ze=Ie;De&&oe>0&&ze>=0;)ne.push(Ne.slice(ze*K,ze*K+K)),oe-=K,ze=Kf(De,ze*4);return ne.length===0?Bt(0):bl(ne).slice(0,we.size)}function k(we,Ne,De,Ie,oe){var ne=J;if(we===J){if(Ne!==0)throw new Error("DIFAT chain shorter than expected")}else if(we!==-1){var ze=De[we],st=(Ie>>>2)-1;if(!ze)return;for(var Ze=0;Ze<st&&(ne=Kf(ze,Ze*4))!==J;++Ze)oe.push(ne);k(Kf(ze,Ie-4),Ne-1,De,Ie,oe)}}function S(we,Ne,De,Ie,oe){var ne=[],ze=[];oe||(oe=[]);var st=Ie-1,Ze=0,mt=0;for(Ze=Ne;Ze>=0;){oe[Ze]=!0,ne[ne.length]=Ze,ze.push(we[Ze]);var ct=De[Math.floor(Ze*4/Ie)];if(mt=Ze*4&st,Ie<4+mt)throw new Error("FAT boundary crossed: "+Ze+" 4 "+Ie);if(!we[ct])break;Ze=Kf(we[ct],mt)}return{nodes:ne,data:$I([ze])}}function O(we,Ne,De,Ie){var oe=we.length,ne=[],ze=[],st=[],Ze=[],mt=Ie-1,ct=0,Rt=0,Xt=0,Jt=0;for(ct=0;ct<oe;++ct)if(st=[],Xt=ct+Ne,Xt>=oe&&(Xt-=oe),!ze[Xt]){Ze=[];var ir=[];for(Rt=Xt;Rt>=0;){ir[Rt]=!0,ze[Rt]=!0,st[st.length]=Rt,Ze.push(we[Rt]);var mr=De[Math.floor(Rt*4/Ie)];if(Jt=Rt*4&mt,Ie<4+Jt)throw new Error("FAT boundary crossed: "+Rt+" 4 "+Ie);if(!we[mr]||(Rt=Kf(we[mr],Jt),ir[Rt]))break}ne[Xt]={nodes:st,data:$I([Ze])}}return ne}function E(we,Ne,De,Ie,oe,ne,ze,st){for(var Ze=0,mt=Ie.length?2:0,ct=Ne[we].data,Rt=0,Xt=0,Jt;Rt<ct.length;Rt+=128){var ir=ct.slice(Rt,Rt+128);Il(ir,64),Xt=ir.read_shift(2),Jt=VC(ir,0,Xt-mt),Ie.push(Jt);var mr={name:Jt,type:ir.read_shift(1),color:ir.read_shift(1),L:ir.read_shift(4,"i"),R:ir.read_shift(4,"i"),C:ir.read_shift(4,"i"),clsid:ir.read_shift(16),state:ir.read_shift(4,"i"),start:0,size:0},Sr=ir.read_shift(2)+ir.read_shift(2)+ir.read_shift(2)+ir.read_shift(2);Sr!==0&&(mr.ct=D(ir,ir.l-8));var Pt=ir.read_shift(2)+ir.read_shift(2)+ir.read_shift(2)+ir.read_shift(2);Pt!==0&&(mr.mt=D(ir,ir.l-8)),mr.start=ir.read_shift(4,"i"),mr.size=ir.read_shift(4,"i"),mr.size<0&&mr.start<0&&(mr.size=mr.type=0,mr.start=J,mr.name=""),mr.type===5?(Ze=mr.start,oe>0&&Ze!==J&&(Ne[Ze].name="!StreamData")):mr.size>=4096?(mr.storage="fat",Ne[mr.start]===void 0&&(Ne[mr.start]=S(De,mr.start,Ne.fat_addrs,Ne.ssz)),Ne[mr.start].name=mr.name,mr.content=Ne[mr.start].data.slice(0,mr.size)):(mr.storage="minifat",mr.size<0?mr.size=0:Ze!==J&&mr.start!==J&&Ne[Ze]&&(mr.content=w(mr,Ne[Ze].data,(Ne[st]||{}).data))),mr.content&&Il(mr.content,0),ne[Jt]=mr,ze.push(mr)}}function D(we,Ne){return new Date((wc(we,Ne+4)/1e7*Math.pow(2,32)+wc(we,Ne)/1e7-11644473600)*1e3)}function q(we,Ne){return d(),f(c.readFileSync(we),Ne)}function W(we,Ne){var De=Ne&&Ne.type;switch(De||ra&&Buffer.isBuffer(we)&&(De="buffer"),De||"base64"){case"file":return q(we,Ne);case"base64":return f(jc(Ic(we)),Ne);case"binary":return f(jc(we),Ne)}return f(we,Ne)}function R(we,Ne){var De=Ne||{},Ie=De.root||"Root Entry";if(we.FullPaths||(we.FullPaths=[]),we.FileIndex||(we.FileIndex=[]),we.FullPaths.length!==we.FileIndex.length)throw new Error("inconsistent CFB structure");we.FullPaths.length===0&&(we.FullPaths[0]=Ie+"/",we.FileIndex[0]={name:Ie,type:5}),De.CLSID&&(we.FileIndex[0].clsid=De.CLSID),U(we)}function U(we){var Ne="Sh33tJ5";if(!yn.find(we,"/"+Ne)){var De=Bt(4);De[0]=55,De[1]=De[3]=50,De[2]=54,we.FileIndex.push({name:Ne,type:2,content:De,size:4,L:69,R:69,C:69}),we.FullPaths.push(we.FullPaths[0]+Ne),z(we)}}function z(we,Ne){R(we);for(var De=!1,Ie=!1,oe=we.FullPaths.length-1;oe>=0;--oe){var ne=we.FileIndex[oe];switch(ne.type){case 0:Ie?De=!0:(we.FileIndex.pop(),we.FullPaths.pop());break;case 1:case 2:case 5:Ie=!0,isNaN(ne.R*ne.L*ne.C)&&(De=!0),ne.R>-1&&ne.L>-1&&ne.R==ne.L&&(De=!0);break;default:De=!0;break}}if(!(!De&&!Ne)){var ze=new Date(1987,1,19),st=0,Ze=Object.create?Object.create(null):{},mt=[];for(oe=0;oe<we.FullPaths.length;++oe)Ze[we.FullPaths[oe]]=!0,we.FileIndex[oe].type!==0&&mt.push([we.FullPaths[oe],we.FileIndex[oe]]);for(oe=0;oe<mt.length;++oe){var ct=n(mt[oe][0]);Ie=Ze[ct],Ie||(mt.push([ct,{name:a(ct).replace("/",""),type:1,clsid:ue,ct:ze,mt:ze,content:null}]),Ze[ct]=!0)}for(mt.sort(function(Jt,ir){return r(Jt[0],ir[0])}),we.FullPaths=[],we.FileIndex=[],oe=0;oe<mt.length;++oe)we.FullPaths[oe]=mt[oe][0],we.FileIndex[oe]=mt[oe][1];for(oe=0;oe<mt.length;++oe){var Rt=we.FileIndex[oe],Xt=we.FullPaths[oe];if(Rt.name=a(Xt).replace("/",""),Rt.L=Rt.R=Rt.C=-(Rt.color=1),Rt.size=Rt.content?Rt.content.length:0,Rt.start=0,Rt.clsid=Rt.clsid||ue,oe===0)Rt.C=mt.length>1?1:-1,Rt.size=0,Rt.type=5;else if(Xt.slice(-1)=="/"){for(st=oe+1;st<mt.length&&n(we.FullPaths[st])!=Xt;++st);for(Rt.C=st>=mt.length?-1:st,st=oe+1;st<mt.length&&n(we.FullPaths[st])!=n(Xt);++st);Rt.R=st>=mt.length?-1:st,Rt.type=1}else n(we.FullPaths[oe+1]||"")==n(Xt)&&(Rt.R=oe+1),Rt.type=2}}}function Z(we,Ne){var De=Ne||{};if(De.fileType=="mad")return Or(we,De);switch(z(we),De.fileType){case"zip":return Ke(we,De)}var Ie=(function(Jt){for(var ir=0,mr=0,Sr=0;Sr<Jt.FileIndex.length;++Sr){var Pt=Jt.FileIndex[Sr];if(Pt.content){var Un=Pt.content.length;Un>0&&(Un<4096?ir+=Un+63>>6:mr+=Un+511>>9)}}for(var en=Jt.FullPaths.length+3>>2,Na=ir+7>>3,Ci=ir+127>>7,tn=Na+mr+en+Ci,an=tn+127>>7,On=an<=109?0:Math.ceil((an-109)/127);tn+an+On+127>>7>an;)On=++an<=109?0:Math.ceil((an-109)/127);var ss=[1,On,an,Ci,en,mr,ir,0];return Jt.FileIndex[0].size=ir<<6,ss[7]=(Jt.FileIndex[0].start=ss[0]+ss[1]+ss[2]+ss[3]+ss[4]+ss[5])+(ss[6]+7>>3),ss})(we),oe=Bt(Ie[7]<<9),ne=0,ze=0;{for(ne=0;ne<8;++ne)oe.write_shift(1,se[ne]);for(ne=0;ne<8;++ne)oe.write_shift(2,0);for(oe.write_shift(2,62),oe.write_shift(2,3),oe.write_shift(2,65534),oe.write_shift(2,9),oe.write_shift(2,6),ne=0;ne<3;++ne)oe.write_shift(2,0);for(oe.write_shift(4,0),oe.write_shift(4,Ie[2]),oe.write_shift(4,Ie[0]+Ie[1]+Ie[2]+Ie[3]-1),oe.write_shift(4,0),oe.write_shift(4,4096),oe.write_shift(4,Ie[3]?Ie[0]+Ie[1]+Ie[2]-1:J),oe.write_shift(4,Ie[3]),oe.write_shift(-4,Ie[1]?Ie[0]-1:J),oe.write_shift(4,Ie[1]),ne=0;ne<109;++ne)oe.write_shift(-4,ne<Ie[2]?Ie[1]+ne:-1)}if(Ie[1])for(ze=0;ze<Ie[1];++ze){for(;ne<236+ze*127;++ne)oe.write_shift(-4,ne<Ie[2]?Ie[1]+ne:-1);oe.write_shift(-4,ze===Ie[1]-1?J:ze+1)}var st=function(Jt){for(ze+=Jt;ne<ze-1;++ne)oe.write_shift(-4,ne+1);Jt&&(++ne,oe.write_shift(-4,J))};for(ze=ne=0,ze+=Ie[1];ne<ze;++ne)oe.write_shift(-4,fe.DIFSECT);for(ze+=Ie[2];ne<ze;++ne)oe.write_shift(-4,fe.FATSECT);st(Ie[3]),st(Ie[4]);for(var Ze=0,mt=0,ct=we.FileIndex[0];Ze<we.FileIndex.length;++Ze)ct=we.FileIndex[Ze],ct.content&&(mt=ct.content.length,!(mt<4096)&&(ct.start=ze,st(mt+511>>9)));for(st(Ie[6]+7>>3);oe.l&511;)oe.write_shift(-4,fe.ENDOFCHAIN);for(ze=ne=0,Ze=0;Ze<we.FileIndex.length;++Ze)ct=we.FileIndex[Ze],ct.content&&(mt=ct.content.length,!(!mt||mt>=4096)&&(ct.start=ze,st(mt+63>>6)));for(;oe.l&511;)oe.write_shift(-4,fe.ENDOFCHAIN);for(ne=0;ne<Ie[4]<<2;++ne){var Rt=we.FullPaths[ne];if(!Rt||Rt.length===0){for(Ze=0;Ze<17;++Ze)oe.write_shift(4,0);for(Ze=0;Ze<3;++Ze)oe.write_shift(4,-1);for(Ze=0;Ze<12;++Ze)oe.write_shift(4,0);continue}ct=we.FileIndex[ne],ne===0&&(ct.start=ct.size?ct.start-1:J);var Xt=ne===0&&De.root||ct.name;if(mt=2*(Xt.length+1),oe.write_shift(64,Xt,"utf16le"),oe.write_shift(2,mt),oe.write_shift(1,ct.type),oe.write_shift(1,ct.color),oe.write_shift(-4,ct.L),oe.write_shift(-4,ct.R),oe.write_shift(-4,ct.C),ct.clsid)oe.write_shift(16,ct.clsid,"hex");else for(Ze=0;Ze<4;++Ze)oe.write_shift(4,0);oe.write_shift(4,ct.state||0),oe.write_shift(4,0),oe.write_shift(4,0),oe.write_shift(4,0),oe.write_shift(4,0),oe.write_shift(4,ct.start),oe.write_shift(4,ct.size),oe.write_shift(4,0)}for(ne=1;ne<we.FileIndex.length;++ne)if(ct=we.FileIndex[ne],ct.size>=4096)if(oe.l=ct.start+1<<9,ra&&Buffer.isBuffer(ct.content))ct.content.copy(oe,oe.l,0,ct.size),oe.l+=ct.size+511&-512;else{for(Ze=0;Ze<ct.size;++Ze)oe.write_shift(1,ct.content[Ze]);for(;Ze&511;++Ze)oe.write_shift(1,0)}for(ne=1;ne<we.FileIndex.length;++ne)if(ct=we.FileIndex[ne],ct.size>0&&ct.size<4096)if(ra&&Buffer.isBuffer(ct.content))ct.content.copy(oe,oe.l,0,ct.size),oe.l+=ct.size+63&-64;else{for(Ze=0;Ze<ct.size;++Ze)oe.write_shift(1,ct.content[Ze]);for(;Ze&63;++Ze)oe.write_shift(1,0)}if(ra)oe.l=oe.length;else for(;oe.l<oe.length;)oe.write_shift(1,0);return oe}function H(we,Ne){var De=we.FullPaths.map(function(Ze){return Ze.toUpperCase()}),Ie=De.map(function(Ze){var mt=Ze.split("/");return mt[mt.length-(Ze.slice(-1)=="/"?2:1)]}),oe=!1;Ne.charCodeAt(0)===47?(oe=!0,Ne=De[0].slice(0,-1)+Ne):oe=Ne.indexOf("/")!==-1;var ne=Ne.toUpperCase(),ze=oe===!0?De.indexOf(ne):Ie.indexOf(ne);if(ze!==-1)return we.FileIndex[ze];var st=!ne.match(yg);for(ne=ne.replace(Co,""),st&&(ne=ne.replace(yg,"!")),ze=0;ze<De.length;++ze)if((st?De[ze].replace(yg,"!"):De[ze]).replace(Co,"")==ne||(st?Ie[ze].replace(yg,"!"):Ie[ze]).replace(Co,"")==ne)return we.FileIndex[ze];return null}var K=64,J=-2,ae="d0cf11e0a1b11ae1",se=[208,207,17,224,161,177,26,225],ue="00000000000000000000000000000000",fe={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:J,FREESECT:-1,HEADER_SIGNATURE:ae,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:ue,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function ke(we,Ne,De){d();var Ie=Z(we,De);c.writeFileSync(Ne,Ie)}function _e(we){for(var Ne=new Array(we.length),De=0;De<we.length;++De)Ne[De]=String.fromCharCode(we[De]);return Ne.join("")}function Le(we,Ne){var De=Z(we,Ne);switch(Ne&&Ne.type||"buffer"){case"file":return d(),c.writeFileSync(Ne.filename,De),De;case"binary":return typeof De=="string"?De:_e(De);case"base64":return cb(typeof De=="string"?De:_e(De));case"buffer":if(ra)return Buffer.isBuffer(De)?De:sh(De);case"array":return typeof De=="string"?jc(De):De}return De}var xe;function B(we){try{var Ne=we.InflateRaw,De=new Ne;if(De._processChunk(new Uint8Array([3,0]),De._finishFlushFlag),De.bytesRead)xe=we;else throw new Error("zlib does not expose bytesRead")}catch(Ie){console.error("cannot use native zlib: "+(Ie.message||Ie))}}function ee(we,Ne){if(!xe)return $t(we,Ne);var De=xe.InflateRaw,Ie=new De,oe=Ie._processChunk(we.slice(we.l),Ie._finishFlushFlag);return we.l+=Ie.bytesRead,oe}function Y(we){return xe?xe.deflateRawSync(we):Vt(we)}var re=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Q=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],Ce=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function me(we){var Ne=(we<<1|we<<11)&139536|(we<<5|we<<15)&558144;return(Ne>>16|Ne>>8|Ne)&255}for(var ie=typeof Uint8Array<"u",je=ie?new Uint8Array(256):[],be=0;be<256;++be)je[be]=me(be);function le(we,Ne){var De=je[we&255];return Ne<=8?De>>>8-Ne:(De=De<<8|je[we>>8&255],Ne<=16?De>>>16-Ne:(De=De<<8|je[we>>16&255],De>>>24-Ne))}function Ee(we,Ne){var De=Ne&7,Ie=Ne>>>3;return(we[Ie]|(De<=6?0:we[Ie+1]<<8))>>>De&3}function Me(we,Ne){var De=Ne&7,Ie=Ne>>>3;return(we[Ie]|(De<=5?0:we[Ie+1]<<8))>>>De&7}function ye(we,Ne){var De=Ne&7,Ie=Ne>>>3;return(we[Ie]|(De<=4?0:we[Ie+1]<<8))>>>De&15}function at(we,Ne){var De=Ne&7,Ie=Ne>>>3;return(we[Ie]|(De<=3?0:we[Ie+1]<<8))>>>De&31}function lt(we,Ne){var De=Ne&7,Ie=Ne>>>3;return(we[Ie]|(De<=1?0:we[Ie+1]<<8))>>>De&127}function ut(we,Ne,De){var Ie=Ne&7,oe=Ne>>>3,ne=(1<<De)-1,ze=we[oe]>>>Ie;return De<8-Ie||(ze|=we[oe+1]<<8-Ie,De<16-Ie)||(ze|=we[oe+2]<<16-Ie,De<24-Ie)||(ze|=we[oe+3]<<24-Ie),ze&ne}function nt(we,Ne,De){var Ie=Ne&7,oe=Ne>>>3;return Ie<=5?we[oe]|=(De&7)<<Ie:(we[oe]|=De<<Ie&255,we[oe+1]=(De&7)>>8-Ie),Ne+3}function ot(we,Ne,De){var Ie=Ne&7,oe=Ne>>>3;return De=(De&1)<<Ie,we[oe]|=De,Ne+1}function We(we,Ne,De){var Ie=Ne&7,oe=Ne>>>3;return De<<=Ie,we[oe]|=De&255,De>>>=8,we[oe+1]=De,Ne+8}function Kt(we,Ne,De){var Ie=Ne&7,oe=Ne>>>3;return De<<=Ie,we[oe]|=De&255,De>>>=8,we[oe+1]=De&255,we[oe+2]=De>>>8,Ne+16}function Dt(we,Ne){var De=we.length,Ie=2*De>Ne?2*De:Ne+5,oe=0;if(De>=Ne)return we;if(ra){var ne=SI(Ie);if(we.copy)we.copy(ne);else for(;oe<we.length;++oe)ne[oe]=we[oe];return ne}else if(ie){var ze=new Uint8Array(Ie);if(ze.set)ze.set(we);else for(;oe<De;++oe)ze[oe]=we[oe];return ze}return we.length=Ie,we}function fr(we){for(var Ne=new Array(we),De=0;De<we;++De)Ne[De]=0;return Ne}function xr(we,Ne,De){var Ie=1,oe=0,ne=0,ze=0,st=0,Ze=we.length,mt=ie?new Uint16Array(32):fr(32);for(ne=0;ne<32;++ne)mt[ne]=0;for(ne=Ze;ne<De;++ne)we[ne]=0;Ze=we.length;var ct=ie?new Uint16Array(Ze):fr(Ze);for(ne=0;ne<Ze;++ne)mt[oe=we[ne]]++,Ie<oe&&(Ie=oe),ct[ne]=0;for(mt[0]=0,ne=1;ne<=Ie;++ne)mt[ne+16]=st=st+mt[ne-1]<<1;for(ne=0;ne<Ze;++ne)st=we[ne],st!=0&&(ct[ne]=mt[st+16]++);var Rt=0;for(ne=0;ne<Ze;++ne)if(Rt=we[ne],Rt!=0)for(st=le(ct[ne],Ie)>>Ie-Rt,ze=(1<<Ie+4-Rt)-1;ze>=0;--ze)Ne[st|ze<<Rt]=Rt&15|ne<<4;return Ie}var nr=ie?new Uint16Array(512):fr(512),Mr=ie?new Uint16Array(32):fr(32);if(!ie){for(var rr=0;rr<512;++rr)nr[rr]=0;for(rr=0;rr<32;++rr)Mr[rr]=0}(function(){for(var we=[],Ne=0;Ne<32;Ne++)we.push(5);xr(we,Mr,32);var De=[];for(Ne=0;Ne<=143;Ne++)De.push(8);for(;Ne<=255;Ne++)De.push(9);for(;Ne<=279;Ne++)De.push(7);for(;Ne<=287;Ne++)De.push(8);xr(De,nr,288)})();var Gt=(function(){for(var Ne=ie?new Uint8Array(32768):[],De=0,Ie=0;De<Ce.length-1;++De)for(;Ie<Ce[De+1];++Ie)Ne[Ie]=De;for(;Ie<32768;++Ie)Ne[Ie]=29;var oe=ie?new Uint8Array(259):[];for(De=0,Ie=0;De<Q.length-1;++De)for(;Ie<Q[De+1];++Ie)oe[Ie]=De;function ne(st,Ze){for(var mt=0;mt<st.length;){var ct=Math.min(65535,st.length-mt),Rt=mt+ct==st.length;for(Ze.write_shift(1,+Rt),Ze.write_shift(2,ct),Ze.write_shift(2,~ct&65535);ct-- >0;)Ze[Ze.l++]=st[mt++]}return Ze.l}function ze(st,Ze){for(var mt=0,ct=0,Rt=ie?new Uint16Array(32768):[];ct<st.length;){var Xt=Math.min(65535,st.length-ct);if(Xt<10){for(mt=nt(Ze,mt,+(ct+Xt==st.length)),mt&7&&(mt+=8-(mt&7)),Ze.l=mt/8|0,Ze.write_shift(2,Xt),Ze.write_shift(2,~Xt&65535);Xt-- >0;)Ze[Ze.l++]=st[ct++];mt=Ze.l*8;continue}mt=nt(Ze,mt,+(ct+Xt==st.length)+2);for(var Jt=0;Xt-- >0;){var ir=st[ct];Jt=(Jt<<5^ir)&32767;var mr=-1,Sr=0;if((mr=Rt[Jt])&&(mr|=ct&-32768,mr>ct&&(mr-=32768),mr<ct))for(;st[mr+Sr]==st[ct+Sr]&&Sr<250;)++Sr;if(Sr>2){ir=oe[Sr],ir<=22?mt=We(Ze,mt,je[ir+1]>>1)-1:(We(Ze,mt,3),mt+=5,We(Ze,mt,je[ir-23]>>5),mt+=3);var Pt=ir<8?0:ir-4>>2;Pt>0&&(Kt(Ze,mt,Sr-Q[ir]),mt+=Pt),ir=Ne[ct-mr],mt=We(Ze,mt,je[ir]>>3),mt-=3;var Un=ir<4?0:ir-2>>1;Un>0&&(Kt(Ze,mt,ct-mr-Ce[ir]),mt+=Un);for(var en=0;en<Sr;++en)Rt[Jt]=ct&32767,Jt=(Jt<<5^st[ct])&32767,++ct;Xt-=Sr-1}else ir<=143?ir=ir+48:mt=ot(Ze,mt,1),mt=We(Ze,mt,je[ir]),Rt[Jt]=ct&32767,++ct}mt=We(Ze,mt,0)-1}return Ze.l=(mt+7)/8|0,Ze.l}return function(Ze,mt){return Ze.length<8?ne(Ze,mt):ze(Ze,mt)}})();function Vt(we){var Ne=Bt(50+Math.floor(we.length*1.1)),De=Gt(we,Ne);return Ne.slice(0,De)}var cr=ie?new Uint16Array(32768):fr(32768),br=ie?new Uint16Array(32768):fr(32768),ar=ie?new Uint16Array(128):fr(128),xt=1,yr=1;function Ge(we,Ne){var De=at(we,Ne)+257;Ne+=5;var Ie=at(we,Ne)+1;Ne+=5;var oe=ye(we,Ne)+4;Ne+=4;for(var ne=0,ze=ie?new Uint8Array(19):fr(19),st=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],Ze=1,mt=ie?new Uint8Array(8):fr(8),ct=ie?new Uint8Array(8):fr(8),Rt=ze.length,Xt=0;Xt<oe;++Xt)ze[re[Xt]]=ne=Me(we,Ne),Ze<ne&&(Ze=ne),mt[ne]++,Ne+=3;var Jt=0;for(mt[0]=0,Xt=1;Xt<=Ze;++Xt)ct[Xt]=Jt=Jt+mt[Xt-1]<<1;for(Xt=0;Xt<Rt;++Xt)(Jt=ze[Xt])!=0&&(st[Xt]=ct[Jt]++);var ir=0;for(Xt=0;Xt<Rt;++Xt)if(ir=ze[Xt],ir!=0){Jt=je[st[Xt]]>>8-ir;for(var mr=(1<<7-ir)-1;mr>=0;--mr)ar[Jt|mr<<ir]=ir&7|Xt<<3}var Sr=[];for(Ze=1;Sr.length<De+Ie;)switch(Jt=ar[lt(we,Ne)],Ne+=Jt&7,Jt>>>=3){case 16:for(ne=3+Ee(we,Ne),Ne+=2,Jt=Sr[Sr.length-1];ne-- >0;)Sr.push(Jt);break;case 17:for(ne=3+Me(we,Ne),Ne+=3;ne-- >0;)Sr.push(0);break;case 18:for(ne=11+lt(we,Ne),Ne+=7;ne-- >0;)Sr.push(0);break;default:Sr.push(Jt),Ze<Jt&&(Ze=Jt);break}var Pt=Sr.slice(0,De),Un=Sr.slice(De);for(Xt=De;Xt<286;++Xt)Pt[Xt]=0;for(Xt=Ie;Xt<30;++Xt)Un[Xt]=0;return xt=xr(Pt,cr,286),yr=xr(Un,br,30),Ne}function vt(we,Ne){if(we[0]==3&&!(we[1]&3))return[of(Ne),2];for(var De=0,Ie=0,oe=SI(Ne||1<<18),ne=0,ze=oe.length>>>0,st=0,Ze=0;(Ie&1)==0;){if(Ie=Me(we,De),De+=3,Ie>>>1)Ie>>1==1?(st=9,Ze=5):(De=Ge(we,De),st=xt,Ze=yr);else{De&7&&(De+=8-(De&7));var mt=we[De>>>3]|we[(De>>>3)+1]<<8;if(De+=32,mt>0)for(!Ne&&ze<ne+mt&&(oe=Dt(oe,ne+mt),ze=oe.length);mt-- >0;)oe[ne++]=we[De>>>3],De+=8;continue}for(;;){!Ne&&ze<ne+32767&&(oe=Dt(oe,ne+32767),ze=oe.length);var ct=ut(we,De,st),Rt=Ie>>>1==1?nr[ct]:cr[ct];if(De+=Rt&15,Rt>>>=4,(Rt>>>8&255)===0)oe[ne++]=Rt;else{if(Rt==256)break;Rt-=257;var Xt=Rt<8?0:Rt-4>>2;Xt>5&&(Xt=0);var Jt=ne+Q[Rt];Xt>0&&(Jt+=ut(we,De,Xt),De+=Xt),ct=ut(we,De,Ze),Rt=Ie>>>1==1?Mr[ct]:br[ct],De+=Rt&15,Rt>>>=4;var ir=Rt<4?0:Rt-2>>1,mr=Ce[Rt];for(ir>0&&(mr+=ut(we,De,ir),De+=ir),!Ne&&ze<Jt&&(oe=Dt(oe,Jt+100),ze=oe.length);ne<Jt;)oe[ne]=oe[ne-mr],++ne}}}return Ne?[oe,De+7>>>3]:[oe.slice(0,ne),De+7>>>3]}function $t(we,Ne){var De=we.slice(we.l||0),Ie=vt(De,Ne);return we.l+=Ie[1],Ie[0]}function Yt(we,Ne){if(we)typeof console<"u"&&console.error(Ne);else throw new Error(Ne)}function Er(we,Ne){var De=we;Il(De,0);var Ie=[],oe=[],ne={FileIndex:Ie,FullPaths:oe};R(ne,{root:Ne.root});for(var ze=De.length-4;(De[ze]!=80||De[ze+1]!=75||De[ze+2]!=5||De[ze+3]!=6)&&ze>=0;)--ze;De.l=ze+4,De.l+=4;var st=De.read_shift(2);De.l+=6;var Ze=De.read_shift(4);for(De.l=Ze,ze=0;ze<st;++ze){De.l+=20;var mt=De.read_shift(4),ct=De.read_shift(4),Rt=De.read_shift(2),Xt=De.read_shift(2),Jt=De.read_shift(2);De.l+=8;var ir=De.read_shift(4),mr=o(De.slice(De.l+Rt,De.l+Rt+Xt));De.l+=Rt+Xt+Jt;var Sr=De.l;De.l=ir+4,wr(De,mt,ct,ne,mr),De.l=Sr}return ne}function wr(we,Ne,De,Ie,oe){we.l+=2;var ne=we.read_shift(2),ze=we.read_shift(2),st=l(we);if(ne&8257)throw new Error("Unsupported ZIP encryption");for(var Ze=we.read_shift(4),mt=we.read_shift(4),ct=we.read_shift(4),Rt=we.read_shift(2),Xt=we.read_shift(2),Jt="",ir=0;ir<Rt;++ir)Jt+=String.fromCharCode(we[we.l++]);if(Xt){var mr=o(we.slice(we.l,we.l+Xt));(mr[21589]||{}).mt&&(st=mr[21589].mt),((oe||{})[21589]||{}).mt&&(st=oe[21589].mt)}we.l+=Xt;var Sr=we.slice(we.l,we.l+mt);switch(ze){case 8:Sr=ee(we,ct);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+ze)}var Pt=!1;ne&8&&(Ze=we.read_shift(4),Ze==134695760&&(Ze=we.read_shift(4),Pt=!0),mt=we.read_shift(4),ct=we.read_shift(4)),mt!=Ne&&Yt(Pt,"Bad compressed size: "+Ne+" != "+mt),ct!=De&&Yt(Pt,"Bad uncompressed size: "+De+" != "+ct),Lr(Ie,Jt,Sr,{unsafe:!0,mt:st})}function Ke(we,Ne){var De=Ne||{},Ie=[],oe=[],ne=Bt(1),ze=De.compression?8:0,st=0,Ze=0,mt=0,ct=0,Rt=0,Xt=we.FullPaths[0],Jt=Xt,ir=we.FileIndex[0],mr=[],Sr=0;for(Ze=1;Ze<we.FullPaths.length;++Ze)if(Jt=we.FullPaths[Ze].slice(Xt.length),ir=we.FileIndex[Ze],!(!ir.size||!ir.content||Jt=="Sh33tJ5")){var Pt=ct,Un=Bt(Jt.length);for(mt=0;mt<Jt.length;++mt)Un.write_shift(1,Jt.charCodeAt(mt)&127);Un=Un.slice(0,Un.l),mr[Rt]=Mbe.buf(ir.content,0);var en=ir.content;ze==8&&(en=Y(en)),ne=Bt(30),ne.write_shift(4,67324752),ne.write_shift(2,20),ne.write_shift(2,st),ne.write_shift(2,ze),ir.mt?i(ne,ir.mt):ne.write_shift(4,0),ne.write_shift(-4,mr[Rt]),ne.write_shift(4,en.length),ne.write_shift(4,ir.content.length),ne.write_shift(2,Un.length),ne.write_shift(2,0),ct+=ne.length,Ie.push(ne),ct+=Un.length,Ie.push(Un),ct+=en.length,Ie.push(en),ne=Bt(46),ne.write_shift(4,33639248),ne.write_shift(2,0),ne.write_shift(2,20),ne.write_shift(2,st),ne.write_shift(2,ze),ne.write_shift(4,0),ne.write_shift(-4,mr[Rt]),ne.write_shift(4,en.length),ne.write_shift(4,ir.content.length),ne.write_shift(2,Un.length),ne.write_shift(2,0),ne.write_shift(2,0),ne.write_shift(2,0),ne.write_shift(2,0),ne.write_shift(4,0),ne.write_shift(4,Pt),Sr+=ne.l,oe.push(ne),Sr+=Un.length,oe.push(Un),++Rt}return ne=Bt(22),ne.write_shift(4,101010256),ne.write_shift(2,0),ne.write_shift(2,0),ne.write_shift(2,Rt),ne.write_shift(2,Rt),ne.write_shift(4,Sr),ne.write_shift(4,ct),ne.write_shift(2,0),bl([bl(Ie),bl(oe),ne])}var Et={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function ur(we,Ne){if(we.ctype)return we.ctype;var De=we.name||"",Ie=De.match(/\.([^\.]+)$/);return Ie&&Et[Ie[1]]||Ne&&(Ie=(De=Ne).match(/[\.\\]([^\.\\])+$/),Ie&&Et[Ie[1]])?Et[Ie[1]]:"application/octet-stream"}function Br(we){for(var Ne=cb(we),De=[],Ie=0;Ie<Ne.length;Ie+=76)De.push(Ne.slice(Ie,Ie+76));return De.join(`\r
`)+`\r
`}function Tr(we){var Ne=we.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(mt){var ct=mt.charCodeAt(0).toString(16).toUpperCase();return"="+(ct.length==1?"0"+ct:ct)});Ne=Ne.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),Ne.charAt(0)==`
`&&(Ne="=0D"+Ne.slice(1)),Ne=Ne.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var De=[],Ie=Ne.split(`\r
`),oe=0;oe<Ie.length;++oe){var ne=Ie[oe];if(ne.length==0){De.push("");continue}for(var ze=0;ze<ne.length;){var st=76,Ze=ne.slice(ze,ze+st);Ze.charAt(st-1)=="="?st--:Ze.charAt(st-2)=="="?st-=2:Ze.charAt(st-3)=="="&&(st-=3),Ze=ne.slice(ze,ze+st),ze+=st,ze<ne.length&&(Ze+="="),De.push(Ze)}}return De.join(`\r
`)}function Zt(we){for(var Ne=[],De=0;De<we.length;++De){for(var Ie=we[De];De<=we.length&&Ie.charAt(Ie.length-1)=="=";)Ie=Ie.slice(0,Ie.length-1)+we[++De];Ne.push(Ie)}for(var oe=0;oe<Ne.length;++oe)Ne[oe]=Ne[oe].replace(/[=][0-9A-Fa-f]{2}/g,function(ne){return String.fromCharCode(parseInt(ne.slice(1),16))});return jc(Ne.join(`\r
`))}function Pr(we,Ne,De){for(var Ie="",oe="",ne="",ze,st=0;st<10;++st){var Ze=Ne[st];if(!Ze||Ze.match(/^\s*$/))break;var mt=Ze.match(/^(.*?):\s*([^\s].*)$/);if(mt)switch(mt[1].toLowerCase()){case"content-location":Ie=mt[2].trim();break;case"content-type":ne=mt[2].trim();break;case"content-transfer-encoding":oe=mt[2].trim();break}}switch(++st,oe.toLowerCase()){case"base64":ze=jc(Ic(Ne.slice(st).join("")));break;case"quoted-printable":ze=Zt(Ne.slice(st));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+oe)}var ct=Lr(we,Ie.slice(De.length),ze,{unsafe:!0});ne&&(ct.ctype=ne)}function sr(we,Ne){if(_e(we.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var De=Ne&&Ne.root||"",Ie=(ra&&Buffer.isBuffer(we)?we.toString("binary"):_e(we)).split(`\r
`),oe=0,ne="";for(oe=0;oe<Ie.length;++oe)if(ne=Ie[oe],!!/^Content-Location:/i.test(ne)&&(ne=ne.slice(ne.indexOf("file")),De||(De=ne.slice(0,ne.lastIndexOf("/")+1)),ne.slice(0,De.length)!=De))for(;De.length>0&&(De=De.slice(0,De.length-1),De=De.slice(0,De.lastIndexOf("/")+1),ne.slice(0,De.length)!=De););var ze=(Ie[1]||"").match(/boundary="(.*?)"/);if(!ze)throw new Error("MAD cannot find boundary");var st="--"+(ze[1]||""),Ze=[],mt=[],ct={FileIndex:Ze,FullPaths:mt};R(ct);var Rt,Xt=0;for(oe=0;oe<Ie.length;++oe){var Jt=Ie[oe];Jt!==st&&Jt!==st+"--"||(Xt++&&Pr(ct,Ie.slice(Rt,oe),De),Rt=oe)}return ct}function Or(we,Ne){var De=Ne||{},Ie=De.boundary||"SheetJS";Ie="------="+Ie;for(var oe=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+Ie.slice(2)+'"',"","",""],ne=we.FullPaths[0],ze=ne,st=we.FileIndex[0],Ze=1;Ze<we.FullPaths.length;++Ze)if(ze=we.FullPaths[Ze].slice(ne.length),st=we.FileIndex[Ze],!(!st.size||!st.content||ze=="Sh33tJ5")){ze=ze.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(Sr){return"_x"+Sr.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(Sr){return"_u"+Sr.charCodeAt(0).toString(16)+"_"});for(var mt=st.content,ct=ra&&Buffer.isBuffer(mt)?mt.toString("binary"):_e(mt),Rt=0,Xt=Math.min(1024,ct.length),Jt=0,ir=0;ir<=Xt;++ir)(Jt=ct.charCodeAt(ir))>=32&&Jt<128&&++Rt;var mr=Rt>=Xt*4/5;oe.push(Ie),oe.push("Content-Location: "+(De.root||"file:///C:/SheetJS/")+ze),oe.push("Content-Transfer-Encoding: "+(mr?"quoted-printable":"base64")),oe.push("Content-Type: "+ur(st,ze)),oe.push(""),oe.push(mr?Tr(ct):Br(ct))}return oe.push(Ie+`--\r
`),oe.join(`\r
`)}function qr(we){var Ne={};return R(Ne,we),Ne}function Lr(we,Ne,De,Ie){var oe=Ie&&Ie.unsafe;oe||R(we);var ne=!oe&&yn.find(we,Ne);if(!ne){var ze=we.FullPaths[0];Ne.slice(0,ze.length)==ze?ze=Ne:(ze.slice(-1)!="/"&&(ze+="/"),ze=(ze+Ne).replace("//","/")),ne={name:a(Ne),type:2},we.FileIndex.push(ne),we.FullPaths.push(ze),oe||yn.utils.cfb_gc(we)}return ne.content=De,ne.size=De?De.length:0,Ie&&(Ie.CLSID&&(ne.clsid=Ie.CLSID),Ie.mt&&(ne.mt=Ie.mt),Ie.ct&&(ne.ct=Ie.ct)),ne}function An(we,Ne){R(we);var De=yn.find(we,Ne);if(De){for(var Ie=0;Ie<we.FileIndex.length;++Ie)if(we.FileIndex[Ie]==De)return we.FileIndex.splice(Ie,1),we.FullPaths.splice(Ie,1),!0}return!1}function Ir(we,Ne,De){R(we);var Ie=yn.find(we,Ne);if(Ie){for(var oe=0;oe<we.FileIndex.length;++oe)if(we.FileIndex[oe]==Ie)return we.FileIndex[oe].name=a(De),we.FullPaths[oe]=De,!0}return!1}function Nn(we){z(we,!0)}return t.find=H,t.read=W,t.parse=f,t.write=Le,t.writeFile=ke,t.utils={cfb_new:qr,cfb_add:Lr,cfb_del:An,cfb_mov:Ir,cfb_gc:Nn,ReadShift:Ag,CheckField:n$,prep_blob:Il,bconcat:bl,use_zlib:B,_deflateRaw:Vt,_inflateRaw:$t,consts:fe},t})();function Lbe(e){return typeof e=="string"?Pk(e):Array.isArray(e)?obe(e):e}function nv(e,t,r){if(typeof Deno<"u"){if(r&&typeof t=="string")switch(r){case"utf8":t=new TextEncoder(r).encode(t);break;case"binary":t=Pk(t);break;default:throw new Error("Unsupported encoding "+r)}return Deno.writeFileSync(e,t)}var n=r=="utf8"?Lu(t):t;if(typeof IE_SaveFile<"u")return IE_SaveFile(n,e);if(typeof Blob<"u"){var a=new Blob([Lbe(n)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(a,e);if(typeof saveAs<"u")return saveAs(a,e);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var i=URL.createObjectURL(a);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(i)},6e4),chrome.downloads.download({url:i,filename:e,saveAs:!0});var l=document.createElement("a");if(l.download!=null)return l.download=e,l.href=i,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(i)},6e4),i}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var o=File(e);return o.open("w"),o.encoding="binary",Array.isArray(t)&&(t=vf(t)),o.write(t),o.close(),t}catch(c){if(!c.message||!c.message.match(/onstruct/))throw c}throw new Error("cannot save file "+e)}function Rbe(e){if(typeof Deno<"u")return Deno.readFileSync(e);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var t=File(e);t.open("r"),t.encoding="binary";var r=t.read();return t.close(),r}catch(n){if(!n.message||!n.message.match(/onstruct/))throw n}throw new Error("Cannot access file "+e)}function di(e){for(var t=Object.keys(e),r=[],n=0;n<t.length;++n)Object.prototype.hasOwnProperty.call(e,t[n])&&r.push(t[n]);return r}function II(e,t){for(var r=[],n=di(e),a=0;a!==n.length;++a)r[e[n[a]][t]]==null&&(r[e[n[a]][t]]=n[a]);return r}function Dk(e){for(var t=[],r=di(e),n=0;n!==r.length;++n)t[e[r[n]]]=r[n];return t}function Mk(e){for(var t=[],r=di(e),n=0;n!==r.length;++n)t[e[r[n]]]=parseInt(r[n],10);return t}function Fbe(e){for(var t=[],r=di(e),n=0;n!==r.length;++n)t[e[r[n]]]==null&&(t[e[r[n]]]=[]),t[e[r[n]]].push(r[n]);return t}var fw=new Date(1899,11,30,0,0,0);function Yi(e,t){var r=e.getTime(),n=fw.getTime()+(e.getTimezoneOffset()-fw.getTimezoneOffset())*6e4;return(r-n)/(1440*60*1e3)}var LH=new Date,Bbe=fw.getTime()+(LH.getTimezoneOffset()-fw.getTimezoneOffset())*6e4,DI=LH.getTimezoneOffset();function Lk(e){var t=new Date;return t.setTime(e*24*60*60*1e3+Bbe),t.getTimezoneOffset()!==DI&&t.setTime(t.getTime()+(t.getTimezoneOffset()-DI)*6e4),t}function Ube(e){var t=0,r=0,n=!1,a=e.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!a)throw new Error("|"+e+"| is not an ISO8601 Duration");for(var i=1;i!=a.length;++i)if(a[i]){switch(r=1,i>3&&(n=!0),a[i].slice(a[i].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+a[i].slice(a[i].length-1));case"D":r*=24;case"H":r*=60;case"M":if(n)r*=60;else throw new Error("Unsupported ISO Duration Field: M")}t+=r*parseInt(a[i],10)}return t}var MI=new Date("2017-02-19T19:06:09.000Z"),RH=isNaN(MI.getFullYear())?new Date("2/19/17"):MI,zbe=RH.getFullYear()==2017;function As(e,t){var r=new Date(e);if(zbe)return t>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):t<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(e instanceof Date)return e;if(RH.getFullYear()==1917&&!isNaN(r.getFullYear())){var n=r.getFullYear();return e.indexOf(""+n)>-1||r.setFullYear(r.getFullYear()+100),r}var a=e.match(/\d+/g)||["2017","2","19","0","0","0"],i=new Date(+a[0],+a[1]-1,+a[2],+a[3]||0,+a[4]||0,+a[5]||0);return e.indexOf("Z")>-1&&(i=new Date(i.getTime()-i.getTimezoneOffset()*60*1e3)),i}function qm(e,t){if(ra&&Buffer.isBuffer(e)){if(t){if(e[0]==255&&e[1]==254)return Lu(e.slice(2).toString("utf16le"));if(e[1]==254&&e[2]==255)return Lu(_H(e.slice(2).toString("binary")))}return e.toString("binary")}if(typeof TextDecoder<"u")try{if(t){if(e[0]==255&&e[1]==254)return Lu(new TextDecoder("utf-16le").decode(e.slice(2)));if(e[0]==254&&e[1]==255)return Lu(new TextDecoder("utf-16be").decode(e.slice(2)))}var r={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(e)&&(e=new Uint8Array(e)),new TextDecoder("latin1").decode(e).replace(/[]/g,function(i){return r[i]||i})}catch{}for(var n=[],a=0;a!=e.length;++a)n.push(String.fromCharCode(e[a]));return n.join("")}function Es(e){if(typeof JSON<"u"&&!Array.isArray(e))return JSON.parse(JSON.stringify(e));if(typeof e!="object"||e==null)return e;if(e instanceof Date)return new Date(e.getTime());var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=Es(e[r]));return t}function li(e,t){for(var r="";r.length<t;)r+=e;return r}function Jd(e){var t=Number(e);if(!isNaN(t))return isFinite(t)?t:NaN;if(!/\d/.test(e))return t;var r=1,n=e.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(t=Number(n))||(n=n.replace(/[(](.*)[)]/,function(a,i){return r=-r,i}),!isNaN(t=Number(n)))?t/r:t}var qbe=["january","february","march","april","may","june","july","august","september","october","november","december"];function K1(e){var t=new Date(e),r=new Date(NaN),n=t.getYear(),a=t.getMonth(),i=t.getDate();if(isNaN(i))return r;var l=e.toLowerCase();if(l.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(l=l.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),l.length>3&&qbe.indexOf(l)==-1)return r}else if(l.match(/[a-z]/))return r;return n<0||n>8099?r:(a>0||i>1)&&n!=101?t:e.match(/[^-0-9:,\/\\]/)?r:t}var Hbe=(function(){var e="abacaba".split(/(:?b)/i).length==5;return function(r,n,a){if(e||typeof n=="string")return r.split(n);for(var i=r.split(n),l=[i[0]],o=1;o<i.length;++o)l.push(a),l.push(i[o]);return l}})();function FH(e){return e?e.content&&e.type?qm(e.content,!0):e.data?vg(e.data):e.asNodeBuffer&&ra?vg(e.asNodeBuffer().toString("binary")):e.asBinary?vg(e.asBinary()):e._data&&e._data.getContent?vg(qm(Array.prototype.slice.call(e._data.getContent(),0))):null:null}function BH(e){if(!e)return null;if(e.data)return NI(e.data);if(e.asNodeBuffer&&ra)return e.asNodeBuffer();if(e._data&&e._data.getContent){var t=e._data.getContent();return typeof t=="string"?NI(t):Array.prototype.slice.call(t)}return e.content&&e.type?e.content:null}function $be(e){return e&&e.name.slice(-4)===".bin"?BH(e):FH(e)}function ad(e,t){for(var r=e.FullPaths||di(e.files),n=t.toLowerCase().replace(/[\/]/g,"\\"),a=n.replace(/\\/g,"/"),i=0;i<r.length;++i){var l=r[i].replace(/^Root Entry[\/]/,"").toLowerCase();if(n==l||a==l)return e.files?e.files[r[i]]:e.FileIndex[i]}return null}function BC(e,t){var r=ad(e,t);if(r==null)throw new Error("Cannot find file "+t+" in zip");return r}function Ii(e,t,r){if(!r)return $be(BC(e,t));if(!t)return null;try{return Ii(e,t)}catch{return null}}function Cc(e,t,r){if(!r)return FH(BC(e,t));if(!t)return null;try{return Cc(e,t)}catch{return null}}function Vbe(e,t,r){return BH(BC(e,t))}function LI(e){for(var t=e.FullPaths||di(e.files),r=[],n=0;n<t.length;++n)t[n].slice(-1)!="/"&&r.push(t[n].replace(/^Root Entry[\/]/,""));return r.sort()}function Yn(e,t,r){if(e.FullPaths){if(typeof r=="string"){var n;return ra?n=sh(r):n=cbe(r),yn.utils.cfb_add(e,t,n)}yn.utils.cfb_add(e,t,r)}else e.file(t,r)}function UC(){return yn.utils.cfb_new()}function UH(e,t){switch(t.type){case"base64":return yn.read(e,{type:"base64"});case"binary":return yn.read(e,{type:"binary"});case"buffer":case"array":return yn.read(e,{type:"buffer"})}throw new Error("Unrecognized type "+t.type)}function wg(e,t){if(e.charAt(0)=="/")return e.slice(1);var r=t.split("/");t.slice(-1)!="/"&&r.pop();for(var n=e.split("/");n.length!==0;){var a=n.shift();a===".."?r.pop():a!=="."&&r.push(a)}return r.join("/")}var ji=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,Wbe=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,RI=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,Kbe=/<[^>]*>/g,io=ji.match(RI)?RI:Kbe,Gbe=/<\w*:/,Xbe=/<(\/?)\w+:/;function Mn(e,t,r){for(var n={},a=0,i=0;a!==e.length&&!((i=e.charCodeAt(a))===32||i===10||i===13);++a);if(t||(n[0]=e.slice(0,a)),a===e.length)return n;var l=e.match(Wbe),o=0,c="",d=0,f="",p="",y=1;if(l)for(d=0;d!=l.length;++d){for(p=l[d],i=0;i!=p.length&&p.charCodeAt(i)!==61;++i);for(f=p.slice(0,i).trim();p.charCodeAt(i+1)==32;)++i;for(y=(a=p.charCodeAt(i+1))==34||a==39?1:0,c=p.slice(i+1+y,p.length-y),o=0;o!=f.length&&f.charCodeAt(o)!==58;++o);if(o===f.length)f.indexOf("_")>0&&(f=f.slice(0,f.indexOf("_"))),n[f]=c,n[f.toLowerCase()]=c;else{var g=(o===5&&f.slice(0,5)==="xmlns"?"xmlns":"")+f.slice(o+1);if(n[g]&&f.slice(o-3,o)=="ext")continue;n[g]=c,n[g.toLowerCase()]=c}}return n}function Ku(e){return e.replace(Xbe,"<$1")}var zH={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},zC=Dk(zH),Ea=(function(){var e=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,t=/_x([\da-fA-F]{4})_/ig;return function r(n){var a=n+"",i=a.indexOf("<![CDATA[");if(i==-1)return a.replace(e,function(o,c){return zH[o]||String.fromCharCode(parseInt(c,o.indexOf("x")>-1?16:10))||o}).replace(t,function(o,c){return String.fromCharCode(parseInt(c,16))});var l=a.indexOf("]]>");return r(a.slice(0,i))+a.slice(i+9,l)+r(a.slice(l+3))}})(),qC=/[&<>'"]/g,Ybe=/[\u0000-\u0008\u000b-\u001f]/g;function Xa(e){var t=e+"";return t.replace(qC,function(r){return zC[r]}).replace(Ybe,function(r){return"_x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+"_"})}function FI(e){return Xa(e).replace(/ /g,"_x0020_")}var qH=/[\u0000-\u001f]/g;function HC(e){var t=e+"";return t.replace(qC,function(r){return zC[r]}).replace(/\n/g,"<br/>").replace(qH,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}function Zbe(e){var t=e+"";return t.replace(qC,function(r){return zC[r]}).replace(qH,function(r){return"&#x"+r.charCodeAt(0).toString(16).toUpperCase()+";"})}var BI=(function(){var e=/&#(\d+);/g;function t(r,n){return String.fromCharCode(parseInt(n,10))}return function(n){return n.replace(e,t)}})();function Qbe(e){return e.replace(/(\r\n|[\r\n])/g,"&#10;")}function Ss(e){switch(e){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function rN(e){for(var t="",r=0,n=0,a=0,i=0,l=0,o=0;r<e.length;){if(n=e.charCodeAt(r++),n<128){t+=String.fromCharCode(n);continue}if(a=e.charCodeAt(r++),n>191&&n<224){l=(n&31)<<6,l|=a&63,t+=String.fromCharCode(l);continue}if(i=e.charCodeAt(r++),n<240){t+=String.fromCharCode((n&15)<<12|(a&63)<<6|i&63);continue}l=e.charCodeAt(r++),o=((n&7)<<18|(a&63)<<12|(i&63)<<6|l&63)-65536,t+=String.fromCharCode(55296+(o>>>10&1023)),t+=String.fromCharCode(56320+(o&1023))}return t}function UI(e){var t=of(2*e.length),r,n,a=1,i=0,l=0,o;for(n=0;n<e.length;n+=a)a=1,(o=e.charCodeAt(n))<128?r=o:o<224?(r=(o&31)*64+(e.charCodeAt(n+1)&63),a=2):o<240?(r=(o&15)*4096+(e.charCodeAt(n+1)&63)*64+(e.charCodeAt(n+2)&63),a=3):(a=4,r=(o&7)*262144+(e.charCodeAt(n+1)&63)*4096+(e.charCodeAt(n+2)&63)*64+(e.charCodeAt(n+3)&63),r-=65536,l=55296+(r>>>10&1023),r=56320+(r&1023)),l!==0&&(t[i++]=l&255,t[i++]=l>>>8,l=0),t[i++]=r%256,t[i++]=r>>>8;return t.slice(0,i).toString("ucs2")}function zI(e){return sh(e,"binary").toString("utf8")}var P2="foo bar baz",as=ra&&(zI(P2)==rN(P2)&&zI||UI(P2)==rN(P2)&&UI)||rN,Lu=ra?function(e){return sh(e,"utf8").toString("binary")}:function(e){for(var t=[],r=0,n=0,a=0;r<e.length;)switch(n=e.charCodeAt(r++),!0){case n<128:t.push(String.fromCharCode(n));break;case n<2048:t.push(String.fromCharCode(192+(n>>6))),t.push(String.fromCharCode(128+(n&63)));break;case(n>=55296&&n<57344):n-=55296,a=e.charCodeAt(r++)-56320+(n<<10),t.push(String.fromCharCode(240+(a>>18&7))),t.push(String.fromCharCode(144+(a>>12&63))),t.push(String.fromCharCode(128+(a>>6&63))),t.push(String.fromCharCode(128+(a&63)));break;default:t.push(String.fromCharCode(224+(n>>12))),t.push(String.fromCharCode(128+(n>>6&63))),t.push(String.fromCharCode(128+(n&63)))}return t.join("")},ub=(function(){var e={};return function(r,n){var a=r+"|"+(n||"");return e[a]?e[a]:e[a]=new RegExp("<(?:\\w+:)?"+r+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+r+">",n||"")}})(),HH=(function(){var e=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(t){return[new RegExp("&"+t[0]+";","ig"),t[1]]});return function(r){for(var n=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),a=0;a<e.length;++a)n=n.replace(e[a][0],e[a][1]);return n}})(),Jbe=(function(){var e={};return function(r){return e[r]!==void 0?e[r]:e[r]=new RegExp("<(?:vt:)?"+r+">([\\s\\S]*?)</(?:vt:)?"+r+">","g")}})(),eve=/<\/?(?:vt:)?variant>/g,tve=/<(?:vt:)([^>]*)>([\s\S]*)</;function qI(e,t){var r=Mn(e),n=e.match(Jbe(r.baseType))||[],a=[];if(n.length!=r.size){if(t.WTF)throw new Error("unexpected vector length "+n.length+" != "+r.size);return a}return n.forEach(function(i){var l=i.replace(eve,"").match(tve);l&&a.push({v:as(l[2]),t:l[1]})}),a}var $H=/(^\s|\s$|\n)/;function Dl(e,t){return"<"+e+(t.match($H)?' xml:space="preserve"':"")+">"+t+"</"+e+">"}function hb(e){return di(e).map(function(t){return" "+t+'="'+e[t]+'"'}).join("")}function Nr(e,t,r){return"<"+e+(r!=null?hb(r):"")+(t!=null?(t.match($H)?' xml:space="preserve"':"")+">"+t+"</"+e:"/")+">"}function SS(e,t){try{return e.toISOString().replace(/\.\d*/,"")}catch(r){if(t)throw r}return""}function rve(e,t){switch(typeof e){case"string":var r=Nr("vt:lpwstr",Xa(e));return r=r.replace(/&quot;/g,"_x0022_"),r;case"number":return Nr((e|0)==e?"vt:i4":"vt:r8",Xa(String(e)));case"boolean":return Nr("vt:bool",e?"true":"false")}if(e instanceof Date)return Nr("vt:filetime",SS(e));throw new Error("Unable to serialize "+e)}function $C(e){if(ra&&Buffer.isBuffer(e))return e.toString("utf8");if(typeof e=="string")return e;if(typeof Uint8Array<"u"&&e instanceof Uint8Array)return as(vf(LC(e)));throw new Error("Bad input format: expected Buffer or string")}var fb=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,Xi={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},ex=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],yc={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function nve(e,t){for(var r=1-2*(e[t+7]>>>7),n=((e[t+7]&127)<<4)+(e[t+6]>>>4&15),a=e[t+6]&15,i=5;i>=0;--i)a=a*256+e[t+i];return n==2047?a==0?r*(1/0):NaN:(n==0?n=-1022:(n-=1023,a+=Math.pow(2,52)),r*Math.pow(2,n-52)*a)}function ave(e,t,r){var n=(t<0||1/t==-1/0?1:0)<<7,a=0,i=0,l=n?-t:t;isFinite(l)?l==0?a=i=0:(a=Math.floor(Math.log(l)/Math.LN2),i=l*Math.pow(2,52-a),a<=-1023&&(!isFinite(i)||i<Math.pow(2,52))?a=-1022:(i-=Math.pow(2,52),a+=1023)):(a=2047,i=isNaN(t)?26985:0);for(var o=0;o<=5;++o,i/=256)e[r+o]=i&255;e[r+6]=(a&15)<<4|i&15,e[r+7]=a>>4|n}var HI=function(e){for(var t=[],r=10240,n=0;n<e[0].length;++n)if(e[0][n])for(var a=0,i=e[0][n].length;a<i;a+=r)t.push.apply(t,e[0][n].slice(a,a+r));return t},$I=ra?function(e){return e[0].length>0&&Buffer.isBuffer(e[0][0])?Buffer.concat(e[0].map(function(t){return Buffer.isBuffer(t)?t:sh(t)})):HI(e)}:HI,VI=function(e,t,r){for(var n=[],a=t;a<r;a+=2)n.push(String.fromCharCode(O0(e,a)));return n.join("").replace(Co,"")},VC=ra?function(e,t,r){return Buffer.isBuffer(e)?e.toString("utf16le",t,r).replace(Co,""):VI(e,t,r)}:VI,WI=function(e,t,r){for(var n=[],a=t;a<t+r;++a)n.push(("0"+e[a].toString(16)).slice(-2));return n.join("")},VH=ra?function(e,t,r){return Buffer.isBuffer(e)?e.toString("hex",t,t+r):WI(e,t,r)}:WI,KI=function(e,t,r){for(var n=[],a=t;a<r;a++)n.push(String.fromCharCode(a1(e,a)));return n.join("")},av=ra?function(t,r,n){return Buffer.isBuffer(t)?t.toString("utf8",r,n):KI(t,r,n)}:KI,WH=function(e,t){var r=wc(e,t);return r>0?av(e,t+4,t+4+r-1):""},KH=WH,GH=function(e,t){var r=wc(e,t);return r>0?av(e,t+4,t+4+r-1):""},XH=GH,YH=function(e,t){var r=2*wc(e,t);return r>0?av(e,t+4,t+4+r-1):""},ZH=YH,QH=function(t,r){var n=wc(t,r);return n>0?VC(t,r+4,r+4+n):""},JH=QH,e$=function(e,t){var r=wc(e,t);return r>0?av(e,t+4,t+4+r):""},t$=e$,r$=function(e,t){return nve(e,t)},mw=r$,WC=function(t){return Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array};ra&&(KH=function(t,r){if(!Buffer.isBuffer(t))return WH(t,r);var n=t.readUInt32LE(r);return n>0?t.toString("utf8",r+4,r+4+n-1):""},XH=function(t,r){if(!Buffer.isBuffer(t))return GH(t,r);var n=t.readUInt32LE(r);return n>0?t.toString("utf8",r+4,r+4+n-1):""},ZH=function(t,r){if(!Buffer.isBuffer(t))return YH(t,r);var n=2*t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+n-1)},JH=function(t,r){if(!Buffer.isBuffer(t))return QH(t,r);var n=t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+n)},t$=function(t,r){if(!Buffer.isBuffer(t))return e$(t,r);var n=t.readUInt32LE(r);return t.toString("utf8",r+4,r+4+n)},mw=function(t,r){return Buffer.isBuffer(t)?t.readDoubleLE(r):r$(t,r)},WC=function(t){return Buffer.isBuffer(t)||Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array});var a1=function(e,t){return e[t]},O0=function(e,t){return e[t+1]*256+e[t]},sve=function(e,t){var r=e[t+1]*256+e[t];return r<32768?r:(65535-r+1)*-1},wc=function(e,t){return e[t+3]*(1<<24)+(e[t+2]<<16)+(e[t+1]<<8)+e[t]},Kf=function(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]},ive=function(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]};function Ag(e,t){var r="",n,a,i=[],l,o,c,d;switch(t){case"dbcs":if(d=this.l,ra&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*e).toString("utf16le");else for(c=0;c<e;++c)r+=String.fromCharCode(O0(this,d)),d+=2;e*=2;break;case"utf8":r=av(this,this.l,this.l+e);break;case"utf16le":e*=2,r=VC(this,this.l,this.l+e);break;case"wstr":return Ag.call(this,e,"dbcs");case"lpstr-ansi":r=KH(this,this.l),e=4+wc(this,this.l);break;case"lpstr-cp":r=XH(this,this.l),e=4+wc(this,this.l);break;case"lpwstr":r=ZH(this,this.l),e=4+2*wc(this,this.l);break;case"lpp4":e=4+wc(this,this.l),r=JH(this,this.l),e&2&&(e+=2);break;case"8lpp4":e=4+wc(this,this.l),r=t$(this,this.l),e&3&&(e+=4-(e&3));break;case"cstr":for(e=0,r="";(l=a1(this,this.l+e++))!==0;)i.push(O2(l));r=i.join("");break;case"_wstr":for(e=0,r="";(l=O0(this,this.l+e))!==0;)i.push(O2(l)),e+=2;e+=2,r=i.join("");break;case"dbcs-cont":for(r="",d=this.l,c=0;c<e;++c){if(this.lens&&this.lens.indexOf(d)!==-1)return l=a1(this,d),this.l=d+1,o=Ag.call(this,e-c,l?"dbcs-cont":"sbcs-cont"),i.join("")+o;i.push(O2(O0(this,d))),d+=2}r=i.join(""),e*=2;break;case"cpstr":case"sbcs-cont":for(r="",d=this.l,c=0;c!=e;++c){if(this.lens&&this.lens.indexOf(d)!==-1)return l=a1(this,d),this.l=d+1,o=Ag.call(this,e-c,l?"dbcs-cont":"sbcs-cont"),i.join("")+o;i.push(O2(a1(this,d))),d+=1}r=i.join("");break;default:switch(e){case 1:return n=a1(this,this.l),this.l++,n;case 2:return n=(t==="i"?sve:O0)(this,this.l),this.l+=2,n;case 4:case-4:return t==="i"||(this[this.l+3]&128)===0?(n=(e>0?Kf:ive)(this,this.l),this.l+=4,n):(a=wc(this,this.l),this.l+=4,a);case 8:case-8:if(t==="f")return e==8?a=mw(this,this.l):a=mw([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,a;e=8;case 16:r=VH(this,this.l,e);break}}return this.l+=e,r}var lve=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24&255},ove=function(e,t,r){e[r]=t&255,e[r+1]=t>>8&255,e[r+2]=t>>16&255,e[r+3]=t>>24&255},cve=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255};function dve(e,t,r){var n=0,a=0;if(r==="dbcs"){for(a=0;a!=t.length;++a)cve(this,t.charCodeAt(a),this.l+2*a);n=2*t.length}else if(r==="sbcs"){for(t=t.replace(/[^\x00-\x7F]/g,"_"),a=0;a!=t.length;++a)this[this.l+a]=t.charCodeAt(a)&255;n=t.length}else if(r==="hex"){for(;a<e;++a)this[this.l++]=parseInt(t.slice(2*a,2*a+2),16)||0;return this}else if(r==="utf16le"){var i=Math.min(this.l+e,this.length);for(a=0;a<Math.min(t.length,e);++a){var l=t.charCodeAt(a);this[this.l++]=l&255,this[this.l++]=l>>8}for(;this.l<i;)this[this.l++]=0;return this}else switch(e){case 1:n=1,this[this.l]=t&255;break;case 2:n=2,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255;break;case 3:n=3,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255,t>>>=8,this[this.l+2]=t&255;break;case 4:n=4,lve(this,t,this.l);break;case 8:if(n=8,r==="f"){ave(this,t,this.l);break}case 16:break;case-4:n=4,ove(this,t,this.l);break}return this.l+=n,this}function n$(e,t){var r=VH(this,this.l,e.length>>1);if(r!==e)throw new Error(t+"Expected "+e+" saw "+r);this.l+=e.length>>1}function Il(e,t){e.l=t,e.read_shift=Ag,e.chk=n$,e.write_shift=dve}function so(e,t){e.l+=t}function Bt(e){var t=of(e);return Il(t,0),t}function ih(e,t,r){if(e){var n,a,i;Il(e,e.l||0);for(var l=e.length,o=0,c=0;e.l<l;){o=e.read_shift(1),o&128&&(o=(o&127)+((e.read_shift(1)&127)<<7));var d=vb[o]||vb[65535];for(n=e.read_shift(1),i=n&127,a=1;a<4&&n&128;++a)i+=((n=e.read_shift(1))&127)<<7*a;c=e.l+i;var f=d.f&&d.f(e,i,r);if(e.l=c,t(f,d,o))return}}}function nc(){var e=[],t=ra?256:2048,r=function(d){var f=Bt(d);return Il(f,0),f},n=r(t),a=function(){n&&(n.length>n.l&&(n=n.slice(0,n.l),n.l=n.length),n.length>0&&e.push(n),n=null)},i=function(d){return n&&d<n.length-n.l?n:(a(),n=r(Math.max(d+1,t)))},l=function(){return a(),bl(e)},o=function(d){a(),n=d,n.l==null&&(n.l=n.length),i(t)};return{next:i,push:o,end:l,_bufs:e}}function or(e,t,r,n){var a=+t,i;if(!isNaN(a)){n||(n=vb[a].p||(r||[]).length||0),i=1+(a>=128?1:0)+1,n>=128&&++i,n>=16384&&++i,n>=2097152&&++i;var l=e.next(i);a<=127?l.write_shift(1,a):(l.write_shift(1,(a&127)+128),l.write_shift(1,a>>7));for(var o=0;o!=4;++o)if(n>=128)l.write_shift(1,(n&127)+128),n>>=7;else{l.write_shift(1,n);break}n>0&&WC(r)&&e.push(r)}}function Eg(e,t,r){var n=Es(e);if(t.s?(n.cRel&&(n.c+=t.s.c),n.rRel&&(n.r+=t.s.r)):(n.cRel&&(n.c+=t.c),n.rRel&&(n.r+=t.r)),!r||r.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function GI(e,t,r){var n=Es(e);return n.s=Eg(n.s,t.s,r),n.e=Eg(n.e,t.s,r),n}function Tg(e,t){if(e.cRel&&e.c<0)for(e=Es(e);e.c<0;)e.c+=t>8?16384:256;if(e.rRel&&e.r<0)for(e=Es(e);e.r<0;)e.r+=t>8?1048576:t>5?65536:16384;var r=Tn(e);return!e.cRel&&e.cRel!=null&&(r=fve(r)),!e.rRel&&e.rRel!=null&&(r=uve(r)),r}function nN(e,t){return e.s.r==0&&!e.s.rRel&&e.e.r==(t.biff>=12?1048575:t.biff>=8?65536:16384)&&!e.e.rRel?(e.s.cRel?"":"$")+Ws(e.s.c)+":"+(e.e.cRel?"":"$")+Ws(e.e.c):e.s.c==0&&!e.s.cRel&&e.e.c==(t.biff>=12?16383:255)&&!e.e.cRel?(e.s.rRel?"":"$")+Si(e.s.r)+":"+(e.e.rRel?"":"$")+Si(e.e.r):Tg(e.s,t.biff)+":"+Tg(e.e,t.biff)}function KC(e){return parseInt(hve(e),10)-1}function Si(e){return""+(e+1)}function uve(e){return e.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function hve(e){return e.replace(/\$(\d+)$/,"$1")}function GC(e){for(var t=mve(e),r=0,n=0;n!==t.length;++n)r=26*r+t.charCodeAt(n)-64;return r-1}function Ws(e){if(e<0)throw new Error("invalid column "+e);var t="";for(++e;e;e=Math.floor((e-1)/26))t=String.fromCharCode((e-1)%26+65)+t;return t}function fve(e){return e.replace(/^([A-Z])/,"$$$1")}function mve(e){return e.replace(/^\$([A-Z])/,"$1")}function xve(e){return e.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function Ks(e){for(var t=0,r=0,n=0;n<e.length;++n){var a=e.charCodeAt(n);a>=48&&a<=57?t=10*t+(a-48):a>=65&&a<=90&&(r=26*r+(a-64))}return{c:r-1,r:t-1}}function Tn(e){for(var t=e.c+1,r="";t;t=(t-1)/26|0)r=String.fromCharCode((t-1)%26+65)+r;return r+(e.r+1)}function ac(e){var t=e.indexOf(":");return t==-1?{s:Ks(e),e:Ks(e)}:{s:Ks(e.slice(0,t)),e:Ks(e.slice(t+1))}}function Kn(e,t){return typeof t>"u"||typeof t=="number"?Kn(e.s,e.e):(typeof e!="string"&&(e=Tn(e)),typeof t!="string"&&(t=Tn(t)),e==t?e:e+":"+t)}function Ta(e){var t={s:{c:0,r:0},e:{c:0,r:0}},r=0,n=0,a=0,i=e.length;for(r=0;n<i&&!((a=e.charCodeAt(n)-64)<1||a>26);++n)r=26*r+a;for(t.s.c=--r,r=0;n<i&&!((a=e.charCodeAt(n)-48)<0||a>9);++n)r=10*r+a;if(t.s.r=--r,n===i||a!=10)return t.e.c=t.s.c,t.e.r=t.s.r,t;for(++n,r=0;n!=i&&!((a=e.charCodeAt(n)-64)<1||a>26);++n)r=26*r+a;for(t.e.c=--r,r=0;n!=i&&!((a=e.charCodeAt(n)-48)<0||a>9);++n)r=10*r+a;return t.e.r=--r,t}function XI(e,t){var r=e.t=="d"&&t instanceof Date;if(e.z!=null)try{return e.w=xd(e.z,r?Yi(t):t)}catch{}try{return e.w=xd((e.XF||{}).numFmtId||(r?14:0),r?Yi(t):t)}catch{return""+t}}function Y0(e,t,r){return e==null||e.t==null||e.t=="z"?"":e.w!==void 0?e.w:(e.t=="d"&&!e.z&&r&&r.dateNF&&(e.z=r.dateNF),e.t=="e"?lh[e.v]||e.v:t==null?XI(e,e.v):XI(e,t))}function yf(e,t){var r=t&&t.sheet?t.sheet:"Sheet1",n={};return n[r]=e,{SheetNames:[r],Sheets:n}}function a$(e,t,r){var n=r||{},a=e?Array.isArray(e):n.dense,i=e||(a?[]:{}),l=0,o=0;if(i&&n.origin!=null){if(typeof n.origin=="number")l=n.origin;else{var c=typeof n.origin=="string"?Ks(n.origin):n.origin;l=c.r,o=c.c}i["!ref"]||(i["!ref"]="A1:A1")}var d={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(i["!ref"]){var f=Ta(i["!ref"]);d.s.c=f.s.c,d.s.r=f.s.r,d.e.c=Math.max(d.e.c,f.e.c),d.e.r=Math.max(d.e.r,f.e.r),l==-1&&(d.e.r=l=f.e.r+1)}for(var p=0;p!=t.length;++p)if(t[p]){if(!Array.isArray(t[p]))throw new Error("aoa_to_sheet expects an array of arrays");for(var y=0;y!=t[p].length;++y)if(!(typeof t[p][y]>"u")){var g={v:t[p][y]},N=l+p,w=o+y;if(d.s.r>N&&(d.s.r=N),d.s.c>w&&(d.s.c=w),d.e.r<N&&(d.e.r=N),d.e.c<w&&(d.e.c=w),t[p][y]&&typeof t[p][y]=="object"&&!Array.isArray(t[p][y])&&!(t[p][y]instanceof Date))g=t[p][y];else if(Array.isArray(g.v)&&(g.f=t[p][y][1],g.v=g.v[0]),g.v===null)if(g.f)g.t="n";else if(n.nullError)g.t="e",g.v=0;else if(n.sheetStubs)g.t="z";else continue;else typeof g.v=="number"?g.t="n":typeof g.v=="boolean"?g.t="b":g.v instanceof Date?(g.z=n.dateNF||En[14],n.cellDates?(g.t="d",g.w=xd(g.z,Yi(g.v))):(g.t="n",g.v=Yi(g.v),g.w=xd(g.z,g.v))):g.t="s";if(a)i[N]||(i[N]=[]),i[N][w]&&i[N][w].z&&(g.z=i[N][w].z),i[N][w]=g;else{var k=Tn({c:w,r:N});i[k]&&i[k].z&&(g.z=i[k].z),i[k]=g}}}return d.s.c<1e7&&(i["!ref"]=Kn(d)),i}function bp(e,t){return a$(null,e,t)}function pve(e){return e.read_shift(4,"i")}function eu(e,t){return t||(t=Bt(4)),t.write_shift(4,e),t}function ao(e){var t=e.read_shift(4);return t===0?"":e.read_shift(t,"dbcs")}function yl(e,t){var r=!1;return t==null&&(r=!0,t=Bt(4+2*e.length)),t.write_shift(4,e.length),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}function gve(e){return{ich:e.read_shift(2),ifnt:e.read_shift(2)}}function bve(e,t){return t||(t=Bt(4)),t.write_shift(2,0),t.write_shift(2,0),t}function XC(e,t){var r=e.l,n=e.read_shift(1),a=ao(e),i=[],l={t:a,h:a};if((n&1)!==0){for(var o=e.read_shift(4),c=0;c!=o;++c)i.push(gve(e));l.r=i}else l.r=[{ich:0,ifnt:0}];return e.l=r+t,l}function vve(e,t){var r=!1;return t==null&&(r=!0,t=Bt(15+4*e.t.length)),t.write_shift(1,0),yl(e.t,t),r?t.slice(0,t.l):t}var yve=XC;function wve(e,t){var r=!1;return t==null&&(r=!0,t=Bt(23+4*e.t.length)),t.write_shift(1,1),yl(e.t,t),t.write_shift(4,1),bve({},t),r?t.slice(0,t.l):t}function yd(e){var t=e.read_shift(4),r=e.read_shift(2);return r+=e.read_shift(1)<<16,e.l++,{c:t,iStyleRef:r}}function tx(e,t){return t==null&&(t=Bt(8)),t.write_shift(-4,e.c),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}function rx(e){var t=e.read_shift(2);return t+=e.read_shift(1)<<16,e.l++,{c:-1,iStyleRef:t}}function nx(e,t){return t==null&&(t=Bt(4)),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}var kve=ao,s$=yl;function YC(e){var t=e.read_shift(4);return t===0||t===4294967295?"":e.read_shift(t,"dbcs")}function xw(e,t){var r=!1;return t==null&&(r=!0,t=Bt(127)),t.write_shift(4,e.length>0?e.length:4294967295),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}var Nve=ao,jS=YC,ZC=xw;function QC(e){var t=e.slice(e.l,e.l+4),r=t[0]&1,n=t[0]&2;e.l+=4;var a=n===0?mw([0,0,0,0,t[0]&252,t[1],t[2],t[3]],0):Kf(t,0)>>2;return r?a/100:a}function i$(e,t){t==null&&(t=Bt(4));var r=0,n=0,a=e*100;if(e==(e|0)&&e>=-536870912&&e<1<<29?n=1:a==(a|0)&&a>=-536870912&&a<1<<29&&(n=1,r=1),n)t.write_shift(-4,((r?a:e)<<2)+(r+2));else throw new Error("unsupported RkNumber "+e)}function l$(e){var t={s:{},e:{}};return t.s.r=e.read_shift(4),t.e.r=e.read_shift(4),t.s.c=e.read_shift(4),t.e.c=e.read_shift(4),t}function _ve(e,t){return t||(t=Bt(16)),t.write_shift(4,e.s.r),t.write_shift(4,e.e.r),t.write_shift(4,e.s.c),t.write_shift(4,e.e.c),t}var ax=l$,vp=_ve;function ro(e){if(e.length-e.l<8)throw"XLS Xnum Buffer underflow";return e.read_shift(8,"f")}function Hm(e,t){return(t||Bt(8)).write_shift(8,e,"f")}function Sve(e){var t={},r=e.read_shift(1),n=r>>>1,a=e.read_shift(1),i=e.read_shift(2,"i"),l=e.read_shift(1),o=e.read_shift(1),c=e.read_shift(1);switch(e.l++,n){case 0:t.auto=1;break;case 1:t.index=a;var d=vm[a];d&&(t.rgb=xb(d));break;case 2:t.rgb=xb([l,o,c]);break;case 3:t.theme=a;break}return i!=0&&(t.tint=i>0?i/32767:i/32768),t}function pw(e,t){if(t||(t=Bt(8)),!e||e.auto)return t.write_shift(4,0),t.write_shift(4,0),t;e.index!=null?(t.write_shift(1,2),t.write_shift(1,e.index)):e.theme!=null?(t.write_shift(1,6),t.write_shift(1,e.theme)):(t.write_shift(1,5),t.write_shift(1,0));var r=e.tint||0;if(r>0?r*=32767:r<0&&(r*=32768),t.write_shift(2,r),!e.rgb||e.theme!=null)t.write_shift(2,0),t.write_shift(1,0),t.write_shift(1,0);else{var n=e.rgb||"FFFFFF";typeof n=="number"&&(n=("000000"+n.toString(16)).slice(-6)),t.write_shift(1,parseInt(n.slice(0,2),16)),t.write_shift(1,parseInt(n.slice(2,4),16)),t.write_shift(1,parseInt(n.slice(4,6),16)),t.write_shift(1,255)}return t}function jve(e){var t=e.read_shift(1);e.l++;var r={fBold:t&1,fItalic:t&2,fUnderline:t&4,fStrikeout:t&8,fOutline:t&16,fShadow:t&32,fCondense:t&64,fExtend:t&128};return r}function Cve(e,t){t||(t=Bt(2));var r=(e.italic?2:0)|(e.strike?8:0)|(e.outline?16:0)|(e.shadow?32:0)|(e.condense?64:0)|(e.extend?128:0);return t.write_shift(1,r),t.write_shift(1,0),t}function o$(e,t){var r={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},n=e.read_shift(4);switch(n){case 0:return"";case 4294967295:case 4294967294:return r[e.read_shift(4)]||""}if(n>400)throw new Error("Unsupported Clipboard: "+n.toString(16));return e.l-=4,e.read_shift(0,t==1?"lpstr":"lpwstr")}function Ave(e){return o$(e,1)}function Eve(e){return o$(e,2)}var JC=2,tc=3,I2=11,YI=12,gw=19,D2=64,Tve=65,Ove=71,Pve=4108,Ive=4126,pl=80,c$=81,Dve=[pl,c$],CS={1:{n:"CodePage",t:JC},2:{n:"Category",t:pl},3:{n:"PresentationFormat",t:pl},4:{n:"ByteCount",t:tc},5:{n:"LineCount",t:tc},6:{n:"ParagraphCount",t:tc},7:{n:"SlideCount",t:tc},8:{n:"NoteCount",t:tc},9:{n:"HiddenCount",t:tc},10:{n:"MultimediaClipCount",t:tc},11:{n:"ScaleCrop",t:I2},12:{n:"HeadingPairs",t:Pve},13:{n:"TitlesOfParts",t:Ive},14:{n:"Manager",t:pl},15:{n:"Company",t:pl},16:{n:"LinksUpToDate",t:I2},17:{n:"CharacterCount",t:tc},19:{n:"SharedDoc",t:I2},22:{n:"HyperlinksChanged",t:I2},23:{n:"AppVersion",t:tc,p:"version"},24:{n:"DigSig",t:Tve},26:{n:"ContentType",t:pl},27:{n:"ContentStatus",t:pl},28:{n:"Language",t:pl},29:{n:"Version",t:pl},255:{},2147483648:{n:"Locale",t:gw},2147483651:{n:"Behavior",t:gw},1919054434:{}},AS={1:{n:"CodePage",t:JC},2:{n:"Title",t:pl},3:{n:"Subject",t:pl},4:{n:"Author",t:pl},5:{n:"Keywords",t:pl},6:{n:"Comments",t:pl},7:{n:"Template",t:pl},8:{n:"LastAuthor",t:pl},9:{n:"RevNumber",t:pl},10:{n:"EditTime",t:D2},11:{n:"LastPrinted",t:D2},12:{n:"CreatedDate",t:D2},13:{n:"ModifiedDate",t:D2},14:{n:"PageCount",t:tc},15:{n:"WordCount",t:tc},16:{n:"CharCount",t:tc},17:{n:"Thumbnail",t:Ove},18:{n:"Application",t:pl},19:{n:"DocSecurity",t:tc},255:{},2147483648:{n:"Locale",t:gw},2147483651:{n:"Behavior",t:gw},1919054434:{}},ZI={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},Mve=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function Lve(e){return e.map(function(t){return[t>>16&255,t>>8&255,t&255]})}var Rve=Lve([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),vm=Es(Rve),lh={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},d$={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},ES={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},M2={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function eA(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function Fve(e){var t=eA();if(!e||!e.match)return t;var r={};if((e.match(io)||[]).forEach(function(n){var a=Mn(n);switch(a[0].replace(Gbe,"<")){case"<?xml":break;case"<Types":t.xmlns=a["xmlns"+(a[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":r[a.Extension]=a.ContentType;break;case"<Override":t[ES[a.ContentType]]!==void 0&&t[ES[a.ContentType]].push(a.PartName);break}}),t.xmlns!==Xi.CT)throw new Error("Unknown Namespace: "+t.xmlns);return t.calcchain=t.calcchains.length>0?t.calcchains[0]:"",t.sst=t.strs.length>0?t.strs[0]:"",t.style=t.styles.length>0?t.styles[0]:"",t.defaults=r,delete t.calcchains,t}function u$(e,t){var r=Fbe(ES),n=[],a;n[n.length]=ji,n[n.length]=Nr("Types",null,{xmlns:Xi.CT,"xmlns:xsd":Xi.xsd,"xmlns:xsi":Xi.xsi}),n=n.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(c){return Nr("Default",null,{Extension:c[0],ContentType:c[1]})}));var i=function(c){e[c]&&e[c].length>0&&(a=e[c][0],n[n.length]=Nr("Override",null,{PartName:(a[0]=="/"?"":"/")+a,ContentType:M2[c][t.bookType]||M2[c].xlsx}))},l=function(c){(e[c]||[]).forEach(function(d){n[n.length]=Nr("Override",null,{PartName:(d[0]=="/"?"":"/")+d,ContentType:M2[c][t.bookType]||M2[c].xlsx})})},o=function(c){(e[c]||[]).forEach(function(d){n[n.length]=Nr("Override",null,{PartName:(d[0]=="/"?"":"/")+d,ContentType:r[c][0]})})};return i("workbooks"),l("sheets"),l("charts"),o("themes"),["strs","styles"].forEach(i),["coreprops","extprops","custprops"].forEach(o),o("vba"),o("comments"),o("threadedcomments"),o("drawings"),l("metadata"),o("people"),n.length>2&&(n[n.length]="</Types>",n[1]=n[1].replace("/>",">")),n.join("")}var ia={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function mb(e){var t=e.lastIndexOf("/");return e.slice(0,t+1)+"_rels/"+e.slice(t+1)+".rels"}function Og(e,t){var r={"!id":{}};if(!e)return r;t.charAt(0)!=="/"&&(t="/"+t);var n={};return(e.match(io)||[]).forEach(function(a){var i=Mn(a);if(i[0]==="<Relationship"){var l={};l.Type=i.Type,l.Target=i.Target,l.Id=i.Id,i.TargetMode&&(l.TargetMode=i.TargetMode);var o=i.TargetMode==="External"?i.Target:wg(i.Target,t);r[o]=l,n[i.Id]=l}}),r["!id"]=n,r}function g1(e){var t=[ji,Nr("Relationships",null,{xmlns:Xi.RELS})];return di(e["!id"]).forEach(function(r){t[t.length]=Nr("Relationship",null,e["!id"][r])}),t.length>2&&(t[t.length]="</Relationships>",t[1]=t[1].replace("/>",">")),t.join("")}function Wa(e,t,r,n,a,i){if(a||(a={}),e["!id"]||(e["!id"]={}),e["!idx"]||(e["!idx"]=1),t<0)for(t=e["!idx"];e["!id"]["rId"+t];++t);if(e["!idx"]=t+1,a.Id="rId"+t,a.Type=n,a.Target=r,[ia.HLINK,ia.XPATH,ia.XMISS].indexOf(a.Type)>-1&&(a.TargetMode="External"),e["!id"][a.Id])throw new Error("Cannot rewrite rId "+t);return e["!id"][a.Id]=a,e[("/"+a.Target).replace("//","/")]=a,t}var Bve="application/vnd.oasis.opendocument.spreadsheet";function Uve(e,t){for(var r=$C(e),n,a;n=fb.exec(r);)switch(n[3]){case"manifest":break;case"file-entry":if(a=Mn(n[0],!1),a.path=="/"&&a.type!==Bve)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(t&&t.WTF)throw n}}function zve(e){var t=[ji];t.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),t.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var r=0;r<e.length;++r)t.push('  <manifest:file-entry manifest:full-path="'+e[r][0]+'" manifest:media-type="'+e[r][1]+`"/>
`);return t.push("</manifest:manifest>"),t.join("")}function QI(e,t,r){return['  <rdf:Description rdf:about="'+e+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(r||"odf")+"#"+t+`"/>
`,`  </rdf:Description>
`].join("")}function qve(e,t){return['  <rdf:Description rdf:about="'+e+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+t+`"/>
`,`  </rdf:Description>
`].join("")}function Hve(e){var t=[ji];t.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var r=0;r!=e.length;++r)t.push(QI(e[r][0],e[r][1])),t.push(qve("",e[r][0]));return t.push(QI("","Document","pkg")),t.push("</rdf:RDF>"),t.join("")}function h$(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+cw.version+"</meta:generator></office:meta></office:document-meta>"}var ud=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],$ve=(function(){for(var e=new Array(ud.length),t=0;t<ud.length;++t){var r=ud[t],n="(?:"+r[0].slice(0,r[0].indexOf(":"))+":)"+r[0].slice(r[0].indexOf(":")+1);e[t]=new RegExp("<"+n+"[^>]*>([\\s\\S]*?)</"+n+">")}return e})();function f$(e){var t={};e=as(e);for(var r=0;r<ud.length;++r){var n=ud[r],a=e.match($ve[r]);a!=null&&a.length>0&&(t[n[1]]=Ea(a[1])),n[2]==="date"&&t[n[1]]&&(t[n[1]]=As(t[n[1]]))}return t}function aN(e,t,r,n,a){a[e]!=null||t==null||t===""||(a[e]=t,t=Xa(t),n[n.length]=r?Nr(e,t,r):Dl(e,t))}function m$(e,t){var r=t||{},n=[ji,Nr("cp:coreProperties",null,{"xmlns:cp":Xi.CORE_PROPS,"xmlns:dc":Xi.dc,"xmlns:dcterms":Xi.dcterms,"xmlns:dcmitype":Xi.dcmitype,"xmlns:xsi":Xi.xsi})],a={};if(!e&&!r.Props)return n.join("");e&&(e.CreatedDate!=null&&aN("dcterms:created",typeof e.CreatedDate=="string"?e.CreatedDate:SS(e.CreatedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,a),e.ModifiedDate!=null&&aN("dcterms:modified",typeof e.ModifiedDate=="string"?e.ModifiedDate:SS(e.ModifiedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,a));for(var i=0;i!=ud.length;++i){var l=ud[i],o=r.Props&&r.Props[l[1]]!=null?r.Props[l[1]]:e?e[l[1]]:null;o===!0?o="1":o===!1?o="0":typeof o=="number"&&(o=String(o)),o!=null&&aN(l[0],o,null,n,a)}return n.length>2&&(n[n.length]="</cp:coreProperties>",n[1]=n[1].replace("/>",">")),n.join("")}var ym=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],x$=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function p$(e,t,r,n){var a=[];if(typeof e=="string")a=qI(e,n);else for(var i=0;i<e.length;++i)a=a.concat(e[i].map(function(f){return{v:f}}));var l=typeof t=="string"?qI(t,n).map(function(f){return f.v}):t,o=0,c=0;if(l.length>0)for(var d=0;d!==a.length;d+=2){switch(c=+a[d+1].v,a[d].v){case"Worksheets":case"":case"":case" ":case"":case" ":case"Arbeitsbltter":case"alma Sayfalar":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de clculo":case"Planilhas":case"Regneark":case"Hojas de clculo":case"Werkbladen":r.Worksheets=c,r.SheetNames=l.slice(o,o+c);break;case"Named Ranges":case"Rangos con nombre":case"":case"Benannte Bereiche":case"Navngivne omrder":r.NamedRanges=c,r.DefinedNames=l.slice(o,o+c);break;case"Charts":case"Diagramme":r.Chartsheets=c,r.ChartNames=l.slice(o,o+c);break}o+=c}}function Vve(e,t,r){var n={};return t||(t={}),e=as(e),ym.forEach(function(a){var i=(e.match(ub(a[0]))||[])[1];switch(a[2]){case"string":i&&(t[a[1]]=Ea(i));break;case"bool":t[a[1]]=i==="true";break;case"raw":var l=e.match(new RegExp("<"+a[0]+"[^>]*>([\\s\\S]*?)</"+a[0]+">"));l&&l.length>0&&(n[a[1]]=l[1]);break}}),n.HeadingPairs&&n.TitlesOfParts&&p$(n.HeadingPairs,n.TitlesOfParts,t,r),t}function g$(e){var t=[],r=Nr;return e||(e={}),e.Application="SheetJS",t[t.length]=ji,t[t.length]=Nr("Properties",null,{xmlns:Xi.EXT_PROPS,"xmlns:vt":Xi.vt}),ym.forEach(function(n){if(e[n[1]]!==void 0){var a;switch(n[2]){case"string":a=Xa(String(e[n[1]]));break;case"bool":a=e[n[1]]?"true":"false";break}a!==void 0&&(t[t.length]=r(n[0],a))}}),t[t.length]=r("HeadingPairs",r("vt:vector",r("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+r("vt:variant",r("vt:i4",String(e.Worksheets))),{size:2,baseType:"variant"})),t[t.length]=r("TitlesOfParts",r("vt:vector",e.SheetNames.map(function(n){return"<vt:lpstr>"+Xa(n)+"</vt:lpstr>"}).join(""),{size:e.Worksheets,baseType:"lpstr"})),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var Wve=/<[^>]+>[^<]*/g;function Kve(e,t){var r={},n="",a=e.match(Wve);if(a)for(var i=0;i!=a.length;++i){var l=a[i],o=Mn(l);switch(o[0]){case"<?xml":break;case"<Properties":break;case"<property":n=Ea(o.name);break;case"</property>":n=null;break;default:if(l.indexOf("<vt:")===0){var c=l.split(">"),d=c[0].slice(4),f=c[1];switch(d){case"lpstr":case"bstr":case"lpwstr":r[n]=Ea(f);break;case"bool":r[n]=Ss(f);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":r[n]=parseInt(f,10);break;case"r4":case"r8":case"decimal":r[n]=parseFloat(f);break;case"filetime":case"date":r[n]=As(f);break;case"cy":case"error":r[n]=Ea(f);break;default:if(d.slice(-1)=="/")break;t.WTF&&typeof console<"u"&&console.warn("Unexpected",l,d,c)}}else if(l.slice(0,2)!=="</"){if(t.WTF)throw new Error(l)}}}return r}function b$(e){var t=[ji,Nr("Properties",null,{xmlns:Xi.CUST_PROPS,"xmlns:vt":Xi.vt})];if(!e)return t.join("");var r=1;return di(e).forEach(function(a){++r,t[t.length]=Nr("property",rve(e[a]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:r,name:Xa(a)})}),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var TS={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},sN;function Gve(e,t,r){sN||(sN=Dk(TS)),t=sN[t]||t,e[t]=r}function Xve(e,t){var r=[];return di(TS).map(function(n){for(var a=0;a<ud.length;++a)if(ud[a][1]==n)return ud[a];for(a=0;a<ym.length;++a)if(ym[a][1]==n)return ym[a];throw n}).forEach(function(n){if(e[n[1]]!=null){var a=t&&t.Props&&t.Props[n[1]]!=null?t.Props[n[1]]:e[n[1]];switch(n[2]){case"date":a=new Date(a).toISOString().replace(/\.\d*Z/,"Z");break}typeof a=="number"?a=String(a):a===!0||a===!1?a=a?"1":"0":a instanceof Date&&(a=new Date(a).toISOString().replace(/\.\d*Z/,"")),r.push(Dl(TS[n[1]]||n[1],a))}}),Nr("DocumentProperties",r.join(""),{xmlns:yc.o})}function Yve(e,t){var r=["Worksheets","SheetNames"],n="CustomDocumentProperties",a=[];return e&&di(e).forEach(function(i){if(Object.prototype.hasOwnProperty.call(e,i)){for(var l=0;l<ud.length;++l)if(i==ud[l][1])return;for(l=0;l<ym.length;++l)if(i==ym[l][1])return;for(l=0;l<r.length;++l)if(i==r[l])return;var o=e[i],c="string";typeof o=="number"?(c="float",o=String(o)):o===!0||o===!1?(c="boolean",o=o?"1":"0"):o=String(o),a.push(Nr(FI(i),o,{"dt:dt":c}))}}),t&&di(t).forEach(function(i){if(Object.prototype.hasOwnProperty.call(t,i)&&!(e&&Object.prototype.hasOwnProperty.call(e,i))){var l=t[i],o="string";typeof l=="number"?(o="float",l=String(l)):l===!0||l===!1?(o="boolean",l=l?"1":"0"):l instanceof Date?(o="dateTime.tz",l=l.toISOString()):l=String(l),a.push(Nr(FI(i),l,{"dt:dt":o}))}}),"<"+n+' xmlns="'+yc.o+'">'+a.join("")+"</"+n+">"}function tA(e){var t=e.read_shift(4),r=e.read_shift(4);return new Date((r/1e7*Math.pow(2,32)+t/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function Zve(e){var t=typeof e=="string"?new Date(Date.parse(e)):e,r=t.getTime()/1e3+11644473600,n=r%Math.pow(2,32),a=(r-n)/Math.pow(2,32);n*=1e7,a*=1e7;var i=n/Math.pow(2,32)|0;i>0&&(n=n%Math.pow(2,32),a+=i);var l=Bt(8);return l.write_shift(4,n),l.write_shift(4,a),l}function v$(e,t,r){var n=e.l,a=e.read_shift(0,"lpstr-cp");if(r)for(;e.l-n&3;)++e.l;return a}function y$(e,t,r){var n=e.read_shift(0,"lpwstr");return n}function w$(e,t,r){return t===31?y$(e):v$(e,t,r)}function OS(e,t,r){return w$(e,t,r===!1?0:4)}function Qve(e,t){if(!t)throw new Error("VtUnalignedString must have positive length");return w$(e,t,0)}function Jve(e){for(var t=e.read_shift(4),r=[],n=0;n!=t;++n){var a=e.l;r[n]=e.read_shift(0,"lpwstr").replace(Co,""),e.l-a&2&&(e.l+=2)}return r}function e2e(e){for(var t=e.read_shift(4),r=[],n=0;n!=t;++n)r[n]=e.read_shift(0,"lpstr-cp").replace(Co,"");return r}function t2e(e){var t=e.l,r=bw(e,c$);e[e.l]==0&&e[e.l+1]==0&&e.l-t&2&&(e.l+=2);var n=bw(e,tc);return[r,n]}function r2e(e){for(var t=e.read_shift(4),r=[],n=0;n<t/2;++n)r.push(t2e(e));return r}function JI(e,t){for(var r=e.read_shift(4),n={},a=0;a!=r;++a){var i=e.read_shift(4),l=e.read_shift(4);n[i]=e.read_shift(l,t===1200?"utf16le":"utf8").replace(Co,"").replace(yg,"!"),t===1200&&l%2&&(e.l+=2)}return e.l&3&&(e.l=e.l>>3<<2),n}function k$(e){var t=e.read_shift(4),r=e.slice(e.l,e.l+t);return e.l+=t,(t&3)>0&&(e.l+=4-(t&3)&3),r}function n2e(e){var t={};return t.Size=e.read_shift(4),e.l+=t.Size+3-(t.Size-1)%4,t}function bw(e,t,r){var n=e.read_shift(2),a,i=r||{};if(e.l+=2,t!==YI&&n!==t&&Dve.indexOf(t)===-1&&!((t&65534)==4126&&(n&65534)==4126))throw new Error("Expected type "+t+" saw "+n);switch(t===YI?n:t){case 2:return a=e.read_shift(2,"i"),i.raw||(e.l+=2),a;case 3:return a=e.read_shift(4,"i"),a;case 11:return e.read_shift(4)!==0;case 19:return a=e.read_shift(4),a;case 30:return v$(e,n,4).replace(Co,"");case 31:return y$(e);case 64:return tA(e);case 65:return k$(e);case 71:return n2e(e);case 80:return OS(e,n,!i.raw).replace(Co,"");case 81:return Qve(e,n).replace(Co,"");case 4108:return r2e(e);case 4126:case 4127:return n==4127?Jve(e):e2e(e);default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+n)}}function eD(e,t){var r=Bt(4),n=Bt(4);switch(r.write_shift(4,e==80?31:e),e){case 3:n.write_shift(-4,t);break;case 5:n=Bt(8),n.write_shift(8,t,"f");break;case 11:n.write_shift(4,t?1:0);break;case 64:n=Zve(t);break;case 31:case 80:for(n=Bt(4+2*(t.length+1)+(t.length%2?0:2)),n.write_shift(4,t.length+1),n.write_shift(0,t,"dbcs");n.l!=n.length;)n.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+t)}return bl([r,n])}function tD(e,t){var r=e.l,n=e.read_shift(4),a=e.read_shift(4),i=[],l=0,o=0,c=-1,d={};for(l=0;l!=a;++l){var f=e.read_shift(4),p=e.read_shift(4);i[l]=[f,p+r]}i.sort(function(O,E){return O[1]-E[1]});var y={};for(l=0;l!=a;++l){if(e.l!==i[l][1]){var g=!0;if(l>0&&t)switch(t[i[l-1][0]].t){case 2:e.l+2===i[l][1]&&(e.l+=2,g=!1);break;case 80:e.l<=i[l][1]&&(e.l=i[l][1],g=!1);break;case 4108:e.l<=i[l][1]&&(e.l=i[l][1],g=!1);break}if((!t||l==0)&&e.l<=i[l][1]&&(g=!1,e.l=i[l][1]),g)throw new Error("Read Error: Expected address "+i[l][1]+" at "+e.l+" :"+l)}if(t){var N=t[i[l][0]];if(y[N.n]=bw(e,N.t,{raw:!0}),N.p==="version"&&(y[N.n]=String(y[N.n]>>16)+"."+("0000"+String(y[N.n]&65535)).slice(-4)),N.n=="CodePage")switch(y[N.n]){case 0:y[N.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:Zd(o=y[N.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+y[N.n])}}else if(i[l][0]===1){if(o=y.CodePage=bw(e,JC),Zd(o),c!==-1){var w=e.l;e.l=i[c][1],d=JI(e,o),e.l=w}}else if(i[l][0]===0){if(o===0){c=l,e.l=i[l+1][1];continue}d=JI(e,o)}else{var k=d[i[l][0]],S;switch(e[e.l]){case 65:e.l+=4,S=k$(e);break;case 30:e.l+=4,S=OS(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 31:e.l+=4,S=OS(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 3:e.l+=4,S=e.read_shift(4,"i");break;case 19:e.l+=4,S=e.read_shift(4);break;case 5:e.l+=4,S=e.read_shift(8,"f");break;case 11:e.l+=4,S=vi(e,4);break;case 64:e.l+=4,S=As(tA(e));break;default:throw new Error("unparsed value: "+e[e.l])}y[k]=S}}return e.l=r+n,y}var N$=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function a2e(e){switch(typeof e){case"boolean":return 11;case"number":return(e|0)==e?3:5;case"string":return 31;case"object":if(e instanceof Date)return 64;break}return-1}function rD(e,t,r){var n=Bt(8),a=[],i=[],l=8,o=0,c=Bt(8),d=Bt(8);if(c.write_shift(4,2),c.write_shift(4,1200),d.write_shift(4,1),i.push(c),a.push(d),l+=8+c.length,!t){d=Bt(8),d.write_shift(4,0),a.unshift(d);var f=[Bt(4)];for(f[0].write_shift(4,e.length),o=0;o<e.length;++o){var p=e[o][0];for(c=Bt(8+2*(p.length+1)+(p.length%2?0:2)),c.write_shift(4,o+2),c.write_shift(4,p.length+1),c.write_shift(0,p,"dbcs");c.l!=c.length;)c.write_shift(1,0);f.push(c)}c=bl(f),i.unshift(c),l+=8+c.length}for(o=0;o<e.length;++o)if(!(t&&!t[e[o][0]])&&!(N$.indexOf(e[o][0])>-1||x$.indexOf(e[o][0])>-1)&&e[o][1]!=null){var y=e[o][1],g=0;if(t){g=+t[e[o][0]];var N=r[g];if(N.p=="version"&&typeof y=="string"){var w=y.split(".");y=(+w[0]<<16)+(+w[1]||0)}c=eD(N.t,y)}else{var k=a2e(y);k==-1&&(k=31,y=String(y)),c=eD(k,y)}i.push(c),d=Bt(8),d.write_shift(4,t?g:2+o),a.push(d),l+=8+c.length}var S=8*(i.length+1);for(o=0;o<i.length;++o)a[o].write_shift(4,S),S+=i[o].length;return n.write_shift(4,l),n.write_shift(4,i.length),bl([n].concat(a).concat(i))}function nD(e,t,r){var n=e.content;if(!n)return{};Il(n,0);var a,i,l,o,c=0;n.chk("feff","Byte Order: "),n.read_shift(2);var d=n.read_shift(4),f=n.read_shift(16);if(f!==yn.utils.consts.HEADER_CLSID&&f!==r)throw new Error("Bad PropertySet CLSID "+f);if(a=n.read_shift(4),a!==1&&a!==2)throw new Error("Unrecognized #Sets: "+a);if(i=n.read_shift(16),o=n.read_shift(4),a===1&&o!==n.l)throw new Error("Length mismatch: "+o+" !== "+n.l);a===2&&(l=n.read_shift(16),c=n.read_shift(4));var p=tD(n,t),y={SystemIdentifier:d};for(var g in p)y[g]=p[g];if(y.FMTID=i,a===1)return y;if(c-n.l==2&&(n.l+=2),n.l!==c)throw new Error("Length mismatch 2: "+n.l+" !== "+c);var N;try{N=tD(n,null)}catch{}for(g in N)y[g]=N[g];return y.FMTID=[i,l],y}function aD(e,t,r,n,a,i){var l=Bt(a?68:48),o=[l];l.write_shift(2,65534),l.write_shift(2,0),l.write_shift(4,842412599),l.write_shift(16,yn.utils.consts.HEADER_CLSID,"hex"),l.write_shift(4,a?2:1),l.write_shift(16,t,"hex"),l.write_shift(4,a?68:48);var c=rD(e,r,n);if(o.push(c),a){var d=rD(a,null,null);l.write_shift(16,i,"hex"),l.write_shift(4,68+c.length),o.push(d)}return bl(o)}function Ih(e,t){return e.read_shift(t),null}function s2e(e,t){t||(t=Bt(e));for(var r=0;r<e;++r)t.write_shift(1,0);return t}function i2e(e,t,r){for(var n=[],a=e.l+t;e.l<a;)n.push(r(e,a-e.l));if(a!==e.l)throw new Error("Slurp error");return n}function vi(e,t){return e.read_shift(t)===1}function ko(e,t){return t||(t=Bt(2)),t.write_shift(2,+!!e),t}function Di(e){return e.read_shift(2,"u")}function id(e,t){return t||(t=Bt(2)),t.write_shift(2,e),t}function _$(e,t){return i2e(e,t,Di)}function l2e(e){var t=e.read_shift(1),r=e.read_shift(1);return r===1?t:t===1}function S$(e,t,r){return r||(r=Bt(2)),r.write_shift(1,t=="e"?+e:+!!e),r.write_shift(1,t=="e"?1:0),r}function sv(e,t,r){var n=e.read_shift(r&&r.biff>=12?2:1),a="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var i=e.read_shift(1);i&&(a="dbcs-cont")}else r.biff==12&&(a="wstr");r.biff>=2&&r.biff<=5&&(a="cpstr");var l=n?e.read_shift(n,a):"";return l}function o2e(e){var t=e.read_shift(2),r=e.read_shift(1),n=r&4,a=r&8,i=1+(r&1),l=0,o,c={};a&&(l=e.read_shift(2)),n&&(o=e.read_shift(4));var d=i==2?"dbcs-cont":"sbcs-cont",f=t===0?"":e.read_shift(t,d);return a&&(e.l+=4*l),n&&(e.l+=o),c.t=f,a||(c.raw="<t>"+c.t+"</t>",c.r=c.t),c}function c2e(e){var t=e.t||"",r=Bt(3);r.write_shift(2,t.length),r.write_shift(1,1);var n=Bt(2*t.length);n.write_shift(2*t.length,t,"utf16le");var a=[r,n];return bl(a)}function $m(e,t,r){var n;if(r){if(r.biff>=2&&r.biff<=5)return e.read_shift(t,"cpstr");if(r.biff>=12)return e.read_shift(t,"dbcs-cont")}var a=e.read_shift(1);return a===0?n=e.read_shift(t,"sbcs-cont"):n=e.read_shift(t,"dbcs-cont"),n}function iv(e,t,r){var n=e.read_shift(r&&r.biff==2?1:2);return n===0?(e.l++,""):$m(e,n,r)}function sx(e,t,r){if(r.biff>5)return iv(e,t,r);var n=e.read_shift(1);return n===0?(e.l++,""):e.read_shift(n,r.biff<=4||!e.lens?"cpstr":"sbcs-cont")}function j$(e,t,r){return r||(r=Bt(3+2*e.length)),r.write_shift(2,e.length),r.write_shift(1,1),r.write_shift(31,e,"utf16le"),r}function d2e(e){var t=e.read_shift(1);e.l++;var r=e.read_shift(2);return e.l+=2,[t,r]}function u2e(e){var t=e.read_shift(4),r=e.l,n=!1;t>24&&(e.l+=t-24,e.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(n=!0),e.l=r);var a=e.read_shift((n?t-24:t)>>1,"utf16le").replace(Co,"");return n&&(e.l+=24),a}function h2e(e){for(var t=e.read_shift(2),r="";t-- >0;)r+="../";var n=e.read_shift(0,"lpstr-ansi");if(e.l+=2,e.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var a=e.read_shift(4);if(a===0)return r+n.replace(/\\/g,"/");var i=e.read_shift(4);if(e.read_shift(2)!=3)throw new Error("Bad FileMoniker");var l=e.read_shift(i>>1,"utf16le").replace(Co,"");return r+l}function f2e(e,t){var r=e.read_shift(16);switch(r){case"e0c9ea79f9bace118c8200aa004ba90b":return u2e(e);case"0303000000000000c000000000000046":return h2e(e);default:throw new Error("Unsupported Moniker "+r)}}function L2(e){var t=e.read_shift(4),r=t>0?e.read_shift(t,"utf16le").replace(Co,""):"";return r}function sD(e,t){t||(t=Bt(6+e.length*2)),t.write_shift(4,1+e.length);for(var r=0;r<e.length;++r)t.write_shift(2,e.charCodeAt(r));return t.write_shift(2,0),t}function m2e(e,t){var r=e.l+t,n=e.read_shift(4);if(n!==2)throw new Error("Unrecognized streamVersion: "+n);var a=e.read_shift(2);e.l+=2;var i,l,o,c,d="",f,p;a&16&&(i=L2(e,r-e.l)),a&128&&(l=L2(e,r-e.l)),(a&257)===257&&(o=L2(e,r-e.l)),(a&257)===1&&(c=f2e(e,r-e.l)),a&8&&(d=L2(e,r-e.l)),a&32&&(f=e.read_shift(16)),a&64&&(p=tA(e)),e.l=r;var y=l||o||c||"";y&&d&&(y+="#"+d),y||(y="#"+d),a&2&&y.charAt(0)=="/"&&y.charAt(1)!="/"&&(y="file://"+y);var g={Target:y};return f&&(g.guid=f),p&&(g.time=p),i&&(g.Tooltip=i),g}function x2e(e){var t=Bt(512),r=0,n=e.Target;n.slice(0,7)=="file://"&&(n=n.slice(7));var a=n.indexOf("#"),i=a>-1?31:23;switch(n.charAt(0)){case"#":i=28;break;case".":i&=-3;break}t.write_shift(4,2),t.write_shift(4,i);var l=[8,6815827,6619237,4849780,83];for(r=0;r<l.length;++r)t.write_shift(4,l[r]);if(i==28)n=n.slice(1),sD(n,t);else if(i&2){for(l="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),r=0;r<l.length;++r)t.write_shift(1,parseInt(l[r],16));var o=a>-1?n.slice(0,a):n;for(t.write_shift(4,2*(o.length+1)),r=0;r<o.length;++r)t.write_shift(2,o.charCodeAt(r));t.write_shift(2,0),i&8&&sD(a>-1?n.slice(a+1):"",t)}else{for(l="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),r=0;r<l.length;++r)t.write_shift(1,parseInt(l[r],16));for(var c=0;n.slice(c*3,c*3+3)=="../"||n.slice(c*3,c*3+3)=="..\\";)++c;for(t.write_shift(2,c),t.write_shift(4,n.length-3*c+1),r=0;r<n.length-3*c;++r)t.write_shift(1,n.charCodeAt(r+3*c)&255);for(t.write_shift(1,0),t.write_shift(2,65535),t.write_shift(2,57005),r=0;r<6;++r)t.write_shift(4,0)}return t.slice(0,t.l)}function C$(e){var t=e.read_shift(1),r=e.read_shift(1),n=e.read_shift(1),a=e.read_shift(1);return[t,r,n,a]}function A$(e,t){var r=C$(e);return r[3]=0,r}function Gu(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2);return{r:t,c:r,ixfe:n}}function Vm(e,t,r,n){return n||(n=Bt(6)),n.write_shift(2,e),n.write_shift(2,t),n.write_shift(2,r||0),n}function p2e(e){var t=e.read_shift(2),r=e.read_shift(2);return e.l+=8,{type:t,flags:r}}function g2e(e,t,r){return t===0?"":sx(e,t,r)}function b2e(e,t,r){var n=r.biff>8?4:2,a=e.read_shift(n),i=e.read_shift(n,"i"),l=e.read_shift(n,"i");return[a,i,l]}function E$(e){var t=e.read_shift(2),r=QC(e);return[t,r]}function v2e(e,t,r){e.l+=4,t-=4;var n=e.l+t,a=sv(e,t,r),i=e.read_shift(2);if(n-=e.l,i!==n)throw new Error("Malformed AddinUdf: padding = "+n+" != "+i);return e.l+=i,a}function Rk(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2),a=e.read_shift(2);return{s:{c:n,r:t},e:{c:a,r}}}function T$(e,t){return t||(t=Bt(8)),t.write_shift(2,e.s.r),t.write_shift(2,e.e.r),t.write_shift(2,e.s.c),t.write_shift(2,e.e.c),t}function O$(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(1),a=e.read_shift(1);return{s:{c:n,r:t},e:{c:a,r}}}var y2e=O$;function P$(e){e.l+=4;var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2);return e.l+=12,[r,t,n]}function w2e(e){var t={};return e.l+=4,e.l+=16,t.fSharedNote=e.read_shift(2),e.l+=4,t}function k2e(e){var t={};return e.l+=4,e.cf=e.read_shift(2),t}function Vl(e){e.l+=2,e.l+=e.read_shift(2)}var N2e={0:Vl,4:Vl,5:Vl,6:Vl,7:k2e,8:Vl,9:Vl,10:Vl,11:Vl,12:Vl,13:w2e,14:Vl,15:Vl,16:Vl,17:Vl,18:Vl,19:Vl,20:Vl,21:P$};function _2e(e,t){for(var r=e.l+t,n=[];e.l<r;){var a=e.read_shift(2);e.l-=2;try{n.push(N2e[a](e,r-e.l))}catch{return e.l=r,n}}return e.l!=r&&(e.l=r),n}function R2(e,t){var r={BIFFVer:0,dt:0};switch(r.BIFFVer=e.read_shift(2),t-=2,t>=2&&(r.dt=e.read_shift(2),e.l-=2),r.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(t>6)throw new Error("Unexpected BIFF Ver "+r.BIFFVer)}return e.read_shift(t),r}function rA(e,t,r){var n=1536,a=16;switch(r.bookType){case"biff8":break;case"biff5":n=1280,a=8;break;case"biff4":n=4,a=6;break;case"biff3":n=3,a=6;break;case"biff2":n=2,a=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var i=Bt(a);return i.write_shift(2,n),i.write_shift(2,t),a>4&&i.write_shift(2,29282),a>6&&i.write_shift(2,1997),a>8&&(i.write_shift(2,49161),i.write_shift(2,1),i.write_shift(2,1798),i.write_shift(2,0)),i}function S2e(e,t){return t===0||e.read_shift(2),1200}function j2e(e,t,r){if(r.enc)return e.l+=t,"";var n=e.l,a=sx(e,0,r);return e.read_shift(t+n-e.l),a}function C2e(e,t){var r=!t||t.biff==8,n=Bt(r?112:54);for(n.write_shift(t.biff==8?2:1,7),r&&n.write_shift(1,0),n.write_shift(4,859007059),n.write_shift(4,5458548|(r?0:536870912));n.l<n.length;)n.write_shift(1,r?0:32);return n}function A2e(e,t,r){var n=r&&r.biff==8||t==2?e.read_shift(2):(e.l+=t,0);return{fDialog:n&16,fBelow:n&64,fRight:n&128}}function E2e(e,t,r){var n=e.read_shift(4),a=e.read_shift(1)&3,i=e.read_shift(1);switch(i){case 0:i="Worksheet";break;case 1:i="Macrosheet";break;case 2:i="Chartsheet";break;case 6:i="VBAModule";break}var l=sv(e,0,r);return l.length===0&&(l="Sheet1"),{pos:n,hs:a,dt:i,name:l}}function T2e(e,t){var r=!t||t.biff>=8?2:1,n=Bt(8+r*e.name.length);n.write_shift(4,e.pos),n.write_shift(1,e.hs||0),n.write_shift(1,e.dt),n.write_shift(1,e.name.length),t.biff>=8&&n.write_shift(1,1),n.write_shift(r*e.name.length,e.name,t.biff<8?"sbcs":"utf16le");var a=n.slice(0,n.l);return a.l=n.l,a}function O2e(e,t){for(var r=e.l+t,n=e.read_shift(4),a=e.read_shift(4),i=[],l=0;l!=a&&e.l<r;++l)i.push(o2e(e));return i.Count=n,i.Unique=a,i}function P2e(e,t){var r=Bt(8);r.write_shift(4,e.Count),r.write_shift(4,e.Unique);for(var n=[],a=0;a<e.length;++a)n[a]=c2e(e[a]);var i=bl([r].concat(n));return i.parts=[r.length].concat(n.map(function(l){return l.length})),i}function I2e(e,t){var r={};return r.dsst=e.read_shift(2),e.l+=t-2,r}function D2e(e){var t={};t.r=e.read_shift(2),t.c=e.read_shift(2),t.cnt=e.read_shift(2)-t.c;var r=e.read_shift(2);e.l+=4;var n=e.read_shift(1);return e.l+=3,n&7&&(t.level=n&7),n&32&&(t.hidden=!0),n&64&&(t.hpt=r/20),t}function M2e(e){var t=p2e(e);if(t.type!=2211)throw new Error("Invalid Future Record "+t.type);var r=e.read_shift(4);return r!==0}function L2e(e){return e.read_shift(2),e.read_shift(4)}function iD(e,t,r){var n=0;r&&r.biff==2||(n=e.read_shift(2));var a=e.read_shift(2);r&&r.biff==2&&(n=1-(a>>15),a&=32767);var i={Unsynced:n&1,DyZero:(n&2)>>1,ExAsc:(n&4)>>2,ExDsc:(n&8)>>3};return[i,a]}function R2e(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2),a=e.read_shift(2),i=e.read_shift(2),l=e.read_shift(2),o=e.read_shift(2),c=e.read_shift(2),d=e.read_shift(2);return{Pos:[t,r],Dim:[n,a],Flags:i,CurTab:l,FirstTab:o,Selected:c,TabRatio:d}}function F2e(){var e=Bt(18);return e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,29280),e.write_shift(2,17600),e.write_shift(2,56),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,1),e.write_shift(2,500),e}function B2e(e,t,r){if(r&&r.biff>=2&&r.biff<5)return{};var n=e.read_shift(2);return{RTL:n&64}}function U2e(e){var t=Bt(18),r=1718;return e&&e.RTL&&(r|=64),t.write_shift(2,r),t.write_shift(4,0),t.write_shift(4,64),t.write_shift(4,0),t.write_shift(4,0),t}function z2e(){}function q2e(e,t,r){var n={dyHeight:e.read_shift(2),fl:e.read_shift(2)};switch(r&&r.biff||8){case 2:break;case 3:case 4:e.l+=2;break;default:e.l+=10;break}return n.name=sv(e,0,r),n}function H2e(e,t){var r=e.name||"Arial",n=t&&t.biff==5,a=n?15+r.length:16+2*r.length,i=Bt(a);return i.write_shift(2,e.sz*20),i.write_shift(4,0),i.write_shift(2,400),i.write_shift(4,0),i.write_shift(2,0),i.write_shift(1,r.length),n||i.write_shift(1,1),i.write_shift((n?1:2)*r.length,r,n?"sbcs":"utf16le"),i}function $2e(e){var t=Gu(e);return t.isst=e.read_shift(4),t}function V2e(e,t,r,n){var a=Bt(10);return Vm(e,t,n,a),a.write_shift(4,r),a}function W2e(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=e.l+t,a=Gu(e);r.biff==2&&e.l++;var i=iv(e,n-e.l,r);return a.val=i,a}function K2e(e,t,r,n,a){var i=!a||a.biff==8,l=Bt(8+ +i+(1+i)*r.length);return Vm(e,t,n,l),l.write_shift(2,r.length),i&&l.write_shift(1,1),l.write_shift((1+i)*r.length,r,i?"utf16le":"sbcs"),l}function G2e(e,t,r){var n=e.read_shift(2),a=sx(e,0,r);return[n,a]}function X2e(e,t,r,n){var a=r&&r.biff==5;n||(n=Bt(a?3+t.length:5+2*t.length)),n.write_shift(2,e),n.write_shift(a?1:2,t.length),a||n.write_shift(1,1),n.write_shift((a?1:2)*t.length,t,a?"sbcs":"utf16le");var i=n.length>n.l?n.slice(0,n.l):n;return i.l==null&&(i.l=i.length),i}var Y2e=sx;function lD(e,t,r){var n=e.l+t,a=r.biff==8||!r.biff?4:2,i=e.read_shift(a),l=e.read_shift(a),o=e.read_shift(2),c=e.read_shift(2);return e.l=n,{s:{r:i,c:o},e:{r:l,c}}}function Z2e(e,t){var r=t.biff==8||!t.biff?4:2,n=Bt(2*r+6);return n.write_shift(r,e.s.r),n.write_shift(r,e.e.r+1),n.write_shift(2,e.s.c),n.write_shift(2,e.e.c+1),n.write_shift(2,0),n}function Q2e(e){var t=e.read_shift(2),r=e.read_shift(2),n=E$(e);return{r:t,c:r,ixfe:n[0],rknum:n[1]}}function J2e(e,t){for(var r=e.l+t-2,n=e.read_shift(2),a=e.read_shift(2),i=[];e.l<r;)i.push(E$(e));if(e.l!==r)throw new Error("MulRK read error");var l=e.read_shift(2);if(i.length!=l-a+1)throw new Error("MulRK length mismatch");return{r:n,c:a,C:l,rkrec:i}}function eye(e,t){for(var r=e.l+t-2,n=e.read_shift(2),a=e.read_shift(2),i=[];e.l<r;)i.push(e.read_shift(2));if(e.l!==r)throw new Error("MulBlank read error");var l=e.read_shift(2);if(i.length!=l-a+1)throw new Error("MulBlank length mismatch");return{r:n,c:a,C:l,ixfe:i}}function tye(e,t,r,n){var a={},i=e.read_shift(4),l=e.read_shift(4),o=e.read_shift(4),c=e.read_shift(2);return a.patternType=Mve[o>>26],n.cellStyles&&(a.alc=i&7,a.fWrap=i>>3&1,a.alcV=i>>4&7,a.fJustLast=i>>7&1,a.trot=i>>8&255,a.cIndent=i>>16&15,a.fShrinkToFit=i>>20&1,a.iReadOrder=i>>22&2,a.fAtrNum=i>>26&1,a.fAtrFnt=i>>27&1,a.fAtrAlc=i>>28&1,a.fAtrBdr=i>>29&1,a.fAtrPat=i>>30&1,a.fAtrProt=i>>31&1,a.dgLeft=l&15,a.dgRight=l>>4&15,a.dgTop=l>>8&15,a.dgBottom=l>>12&15,a.icvLeft=l>>16&127,a.icvRight=l>>23&127,a.grbitDiag=l>>30&3,a.icvTop=o&127,a.icvBottom=o>>7&127,a.icvDiag=o>>14&127,a.dgDiag=o>>21&15,a.icvFore=c&127,a.icvBack=c>>7&127,a.fsxButton=c>>14&1),a}function rye(e,t,r){var n={};return n.ifnt=e.read_shift(2),n.numFmtId=e.read_shift(2),n.flags=e.read_shift(2),n.fStyle=n.flags>>2&1,t-=6,n.data=tye(e,t,n.fStyle,r),n}function oD(e,t,r,n){var a=r&&r.biff==5;n||(n=Bt(a?16:20)),n.write_shift(2,0),e.style?(n.write_shift(2,e.numFmtId||0),n.write_shift(2,65524)):(n.write_shift(2,e.numFmtId||0),n.write_shift(2,t<<4));var i=0;return e.numFmtId>0&&a&&(i|=1024),n.write_shift(4,i),n.write_shift(4,0),a||n.write_shift(4,0),n.write_shift(2,0),n}function nye(e){e.l+=4;var t=[e.read_shift(2),e.read_shift(2)];if(t[0]!==0&&t[0]--,t[1]!==0&&t[1]--,t[0]>7||t[1]>7)throw new Error("Bad Gutters: "+t.join("|"));return t}function aye(e){var t=Bt(8);return t.write_shift(4,0),t.write_shift(2,0),t.write_shift(2,0),t}function cD(e,t,r){var n=Gu(e);(r.biff==2||t==9)&&++e.l;var a=l2e(e);return n.val=a,n.t=a===!0||a===!1?"b":"e",n}function sye(e,t,r,n,a,i){var l=Bt(8);return Vm(e,t,n,l),S$(r,i,l),l}function iye(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=Gu(e),a=ro(e);return n.val=a,n}function lye(e,t,r,n){var a=Bt(14);return Vm(e,t,n,a),Hm(r,a),a}var dD=g2e;function oye(e,t,r){var n=e.l+t,a=e.read_shift(2),i=e.read_shift(2);if(r.sbcch=i,i==1025||i==14849)return[i,a];if(i<1||i>255)throw new Error("Unexpected SupBook type: "+i);for(var l=$m(e,i),o=[];n>e.l;)o.push(iv(e));return[i,a,l,o]}function uD(e,t,r){var n=e.read_shift(2),a,i={fBuiltIn:n&1,fWantAdvise:n>>>1&1,fWantPict:n>>>2&1,fOle:n>>>3&1,fOleLink:n>>>4&1,cf:n>>>5&1023,fIcon:n>>>15&1};return r.sbcch===14849&&(a=v2e(e,t-2,r)),i.body=a||e.read_shift(t-2),typeof a=="string"&&(i.Name=a),i}var cye=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function hD(e,t,r){var n=e.l+t,a=e.read_shift(2),i=e.read_shift(1),l=e.read_shift(1),o=e.read_shift(r&&r.biff==2?1:2),c=0;(!r||r.biff>=5)&&(r.biff!=5&&(e.l+=2),c=e.read_shift(2),r.biff==5&&(e.l+=2),e.l+=4);var d=$m(e,l,r);a&32&&(d=cye[d.charCodeAt(0)]);var f=n-e.l;r&&r.biff==2&&--f;var p=n==e.l||o===0||!(f>0)?[]:_4e(e,f,r,o);return{chKey:i,Name:d,itab:c,rgce:p}}function I$(e,t,r){if(r.biff<8)return dye(e,t,r);for(var n=[],a=e.l+t,i=e.read_shift(r.biff>8?4:2);i--!==0;)n.push(b2e(e,r.biff>8?12:6,r));if(e.l!=a)throw new Error("Bad ExternSheet: "+e.l+" != "+a);return n}function dye(e,t,r){e[e.l+1]==3&&e[e.l]++;var n=sv(e,t,r);return n.charCodeAt(0)==3?n.slice(1):n}function uye(e,t,r){if(r.biff<8){e.l+=t;return}var n=e.read_shift(2),a=e.read_shift(2),i=$m(e,n,r),l=$m(e,a,r);return[i,l]}function hye(e,t,r){var n=O$(e);e.l++;var a=e.read_shift(1);return t-=8,[S4e(e,t,r),a,n]}function fD(e,t,r){var n=y2e(e);switch(r.biff){case 2:e.l++,t-=7;break;case 3:case 4:e.l+=2,t-=8;break;default:e.l+=6,t-=12}return[n,k4e(e,t,r)]}function fye(e){var t=e.read_shift(4)!==0,r=e.read_shift(4)!==0,n=e.read_shift(4);return[t,r,n]}function mye(e,t,r){if(!(r.biff<8)){var n=e.read_shift(2),a=e.read_shift(2),i=e.read_shift(2),l=e.read_shift(2),o=sx(e,0,r);return r.biff<8&&e.read_shift(1),[{r:n,c:a},o,l,i]}}function xye(e,t,r){return mye(e,t,r)}function pye(e,t){for(var r=[],n=e.read_shift(2);n--;)r.push(Rk(e));return r}function gye(e){var t=Bt(2+e.length*8);t.write_shift(2,e.length);for(var r=0;r<e.length;++r)T$(e[r],t);return t}function bye(e,t,r){if(r&&r.biff<8)return yye(e,t,r);var n=P$(e),a=_2e(e,t-22,n[1]);return{cmo:n,ft:a}}var vye={8:function(e,t){var r=e.l+t;e.l+=10;var n=e.read_shift(2);e.l+=4,e.l+=2,e.l+=2,e.l+=2,e.l+=4;var a=e.read_shift(1);return e.l+=a,e.l=r,{fmt:n}}};function yye(e,t,r){e.l+=4;var n=e.read_shift(2),a=e.read_shift(2),i=e.read_shift(2);e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=6,t-=36;var l=[];return l.push((vye[n]||so)(e,t,r)),{cmo:[a,n,i],ft:l}}function wye(e,t,r){var n=e.l,a="";try{e.l+=4;var i=(r.lastobj||{cmo:[0,0]}).cmo[1],l;[0,5,7,11,12,14].indexOf(i)==-1?e.l+=6:l=d2e(e,6,r);var o=e.read_shift(2);e.read_shift(2),Di(e,2);var c=e.read_shift(2);e.l+=c;for(var d=1;d<e.lens.length-1;++d){if(e.l-n!=e.lens[d])throw new Error("TxO: bad continue record");var f=e[e.l],p=$m(e,e.lens[d+1]-e.lens[d]-1);if(a+=p,a.length>=(f?o:2*o))break}if(a.length!==o&&a.length!==o*2)throw new Error("cchText: "+o+" != "+a.length);return e.l=n+t,{t:a}}catch{return e.l=n+t,{t:a}}}function kye(e,t){var r=Rk(e);e.l+=16;var n=m2e(e,t-24);return[r,n]}function Nye(e){var t=Bt(24),r=Ks(e[0]);t.write_shift(2,r.r),t.write_shift(2,r.r),t.write_shift(2,r.c),t.write_shift(2,r.c);for(var n="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),a=0;a<16;++a)t.write_shift(1,parseInt(n[a],16));return bl([t,x2e(e[1])])}function _ye(e,t){e.read_shift(2);var r=Rk(e),n=e.read_shift((t-10)/2,"dbcs-cont");return n=n.replace(Co,""),[r,n]}function Sye(e){var t=e[1].Tooltip,r=Bt(10+2*(t.length+1));r.write_shift(2,2048);var n=Ks(e[0]);r.write_shift(2,n.r),r.write_shift(2,n.r),r.write_shift(2,n.c),r.write_shift(2,n.c);for(var a=0;a<t.length;++a)r.write_shift(2,t.charCodeAt(a));return r.write_shift(2,0),r}function jye(e){var t=[0,0],r;return r=e.read_shift(2),t[0]=ZI[r]||r,r=e.read_shift(2),t[1]=ZI[r]||r,t}function Cye(e){return e||(e=Bt(4)),e.write_shift(2,1),e.write_shift(2,1),e}function Aye(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(A$(e));return r}function Eye(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(A$(e));return r}function Tye(e){e.l+=2;var t={cxfs:0,crc:0};return t.cxfs=e.read_shift(2),t.crc=e.read_shift(4),t}function D$(e,t,r){if(!r.cellStyles)return so(e,t);var n=r&&r.biff>=12?4:2,a=e.read_shift(n),i=e.read_shift(n),l=e.read_shift(n),o=e.read_shift(n),c=e.read_shift(2);n==2&&(e.l+=2);var d={s:a,e:i,w:l,ixfe:o,flags:c};return(r.biff>=5||!r.biff)&&(d.level=c>>8&7),d}function Oye(e,t){var r=Bt(12);r.write_shift(2,t),r.write_shift(2,t),r.write_shift(2,e.width*256),r.write_shift(2,0);var n=0;return e.hidden&&(n|=1),r.write_shift(1,n),n=e.level||0,r.write_shift(1,n),r.write_shift(2,0),r}function Pye(e,t){var r={};return t<32||(e.l+=16,r.header=ro(e),r.footer=ro(e),e.l+=2),r}function Iye(e,t,r){var n={area:!1};if(r.biff!=5)return e.l+=t,n;var a=e.read_shift(1);return e.l+=3,a&16&&(n.area=!0),n}function Dye(e){for(var t=Bt(2*e),r=0;r<e;++r)t.write_shift(2,r+1);return t}var Mye=Gu,Lye=_$,Rye=iv;function Fye(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(4),a={fmt:t,env:r,len:n,data:e.slice(e.l,e.l+n)};return e.l+=n,a}function Bye(e,t,r){r.biffguess&&r.biff==5&&(r.biff=2);var n=Gu(e);++e.l;var a=sx(e,t-7,r);return n.t="str",n.val=a,n}function Uye(e){var t=Gu(e);++e.l;var r=ro(e);return t.t="n",t.val=r,t}function zye(e,t,r){var n=Bt(15);return dv(n,e,t),n.write_shift(8,r,"f"),n}function qye(e){var t=Gu(e);++e.l;var r=e.read_shift(2);return t.t="n",t.val=r,t}function Hye(e,t,r){var n=Bt(9);return dv(n,e,t),n.write_shift(2,r),n}function $ye(e){var t=e.read_shift(1);return t===0?(e.l++,""):e.read_shift(t,"sbcs-cont")}function Vye(e,t){e.l+=6,e.l+=2,e.l+=1,e.l+=3,e.l+=1,e.l+=t-13}function Wye(e,t,r){var n=e.l+t,a=Gu(e),i=e.read_shift(2),l=$m(e,i,r);return e.l=n,a.t="str",a.val=l,a}var Kye=[2,3,48,49,131,139,140,245],PS=(function(){var e={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},t=Dk({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(o,c){var d=[],f=of(1);switch(c.type){case"base64":f=jc(Ic(o));break;case"binary":f=jc(o);break;case"buffer":case"array":f=o;break}Il(f,0);var p=f.read_shift(1),y=!!(p&136),g=!1,N=!1;switch(p){case 2:break;case 3:break;case 48:g=!0,y=!0;break;case 49:g=!0,y=!0;break;case 131:break;case 139:break;case 140:N=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+p.toString(16))}var w=0,k=521;p==2&&(w=f.read_shift(2)),f.l+=3,p!=2&&(w=f.read_shift(4)),w>1048576&&(w=1e6),p!=2&&(k=f.read_shift(2));var S=f.read_shift(2),O=c.codepage||1252;p!=2&&(f.l+=16,f.read_shift(1),f[f.l]!==0&&(O=e[f[f.l]]),f.l+=1,f.l+=2),N&&(f.l+=36);for(var E=[],D={},q=Math.min(f.length,p==2?521:k-10-(g?264:0)),W=N?32:11;f.l<q&&f[f.l]!=13;)switch(D={},D.name=ob.utils.decode(O,f.slice(f.l,f.l+W)).replace(/[\u0000\r\n].*$/g,""),f.l+=W,D.type=String.fromCharCode(f.read_shift(1)),p!=2&&!N&&(D.offset=f.read_shift(4)),D.len=f.read_shift(1),p==2&&(D.offset=f.read_shift(2)),D.dec=f.read_shift(1),D.name.length&&E.push(D),p!=2&&(f.l+=N?13:14),D.type){case"B":(!g||D.len!=8)&&c.WTF&&console.log("Skipping "+D.name+":"+D.type);break;case"G":case"P":c.WTF&&console.log("Skipping "+D.name+":"+D.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+D.type)}if(f[f.l]!==13&&(f.l=k-1),f.read_shift(1)!==13)throw new Error("DBF Terminator not found "+f.l+" "+f[f.l]);f.l=k;var R=0,U=0;for(d[0]=[],U=0;U!=E.length;++U)d[0][U]=E[U].name;for(;w-- >0;){if(f[f.l]===42){f.l+=S;continue}for(++f.l,d[++R]=[],U=0,U=0;U!=E.length;++U){var z=f.slice(f.l,f.l+E[U].len);f.l+=E[U].len,Il(z,0);var Z=ob.utils.decode(O,z);switch(E[U].type){case"C":Z.trim().length&&(d[R][U]=Z.replace(/\s+$/,""));break;case"D":Z.length===8?d[R][U]=new Date(+Z.slice(0,4),+Z.slice(4,6)-1,+Z.slice(6,8)):d[R][U]=Z;break;case"F":d[R][U]=parseFloat(Z.trim());break;case"+":case"I":d[R][U]=N?z.read_shift(-4,"i")^2147483648:z.read_shift(4,"i");break;case"L":switch(Z.trim().toUpperCase()){case"Y":case"T":d[R][U]=!0;break;case"N":case"F":d[R][U]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+Z+"|")}break;case"M":if(!y)throw new Error("DBF Unexpected MEMO for type "+p.toString(16));d[R][U]="##MEMO##"+(N?parseInt(Z.trim(),10):z.read_shift(4));break;case"N":Z=Z.replace(/\u0000/g,"").trim(),Z&&Z!="."&&(d[R][U]=+Z||0);break;case"@":d[R][U]=new Date(z.read_shift(-8,"f")-621356832e5);break;case"T":d[R][U]=new Date((z.read_shift(4)-2440588)*864e5+z.read_shift(4));break;case"Y":d[R][U]=z.read_shift(4,"i")/1e4+z.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":d[R][U]=-z.read_shift(-8,"f");break;case"B":if(g&&E[U].len==8){d[R][U]=z.read_shift(8,"f");break}case"G":case"P":z.l+=E[U].len;break;case"0":if(E[U].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+E[U].type)}}}if(p!=2&&f.l<f.length&&f[f.l++]!=26)throw new Error("DBF EOF Marker missing "+(f.l-1)+" of "+f.length+" "+f[f.l-1].toString(16));return c&&c.sheetRows&&(d=d.slice(0,c.sheetRows)),c.DBF=E,d}function n(o,c){var d=c||{};d.dateNF||(d.dateNF="yyyymmdd");var f=bp(r(o,d),d);return f["!cols"]=d.DBF.map(function(p){return{wch:p.len,DBF:p}}),delete d.DBF,f}function a(o,c){try{return yf(n(o,c),c)}catch(d){if(c&&c.WTF)throw d}return{SheetNames:[],Sheets:{}}}var i={B:8,C:250,L:1,D:8,"?":0,"":0};function l(o,c){var d=c||{};if(+d.codepage>=0&&Zd(+d.codepage),d.type=="string")throw new Error("Cannot write DBF to JS string");var f=nc(),p=ww(o,{header:1,raw:!0,cellDates:!0}),y=p[0],g=p.slice(1),N=o["!cols"]||[],w=0,k=0,S=0,O=1;for(w=0;w<y.length;++w){if(((N[w]||{}).DBF||{}).name){y[w]=N[w].DBF.name,++S;continue}if(y[w]!=null){if(++S,typeof y[w]=="number"&&(y[w]=y[w].toString(10)),typeof y[w]!="string")throw new Error("DBF Invalid column name "+y[w]+" |"+typeof y[w]+"|");if(y.indexOf(y[w])!==w){for(k=0;k<1024;++k)if(y.indexOf(y[w]+"_"+k)==-1){y[w]+="_"+k;break}}}}var E=Ta(o["!ref"]),D=[],q=[],W=[];for(w=0;w<=E.e.c-E.s.c;++w){var R="",U="",z=0,Z=[];for(k=0;k<g.length;++k)g[k][w]!=null&&Z.push(g[k][w]);if(Z.length==0||y[w]==null){D[w]="?";continue}for(k=0;k<Z.length;++k){switch(typeof Z[k]){case"number":U="B";break;case"string":U="C";break;case"boolean":U="L";break;case"object":U=Z[k]instanceof Date?"D":"C";break;default:U="C"}z=Math.max(z,String(Z[k]).length),R=R&&R!=U?"C":U}z>250&&(z=250),U=((N[w]||{}).DBF||{}).type,U=="C"&&N[w].DBF.len>z&&(z=N[w].DBF.len),R=="B"&&U=="N"&&(R="N",W[w]=N[w].DBF.dec,z=N[w].DBF.len),q[w]=R=="C"||U=="N"?z:i[R]||0,O+=q[w],D[w]=R}var H=f.next(32);for(H.write_shift(4,318902576),H.write_shift(4,g.length),H.write_shift(2,296+32*S),H.write_shift(2,O),w=0;w<4;++w)H.write_shift(4,0);for(H.write_shift(4,0|(+t[NH]||3)<<8),w=0,k=0;w<y.length;++w)if(y[w]!=null){var K=f.next(32),J=(y[w].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);K.write_shift(1,J,"sbcs"),K.write_shift(1,D[w]=="?"?"C":D[w],"sbcs"),K.write_shift(4,k),K.write_shift(1,q[w]||i[D[w]]||0),K.write_shift(1,W[w]||0),K.write_shift(1,2),K.write_shift(4,0),K.write_shift(1,0),K.write_shift(4,0),K.write_shift(4,0),k+=q[w]||i[D[w]]||0}var ae=f.next(264);for(ae.write_shift(4,13),w=0;w<65;++w)ae.write_shift(4,0);for(w=0;w<g.length;++w){var se=f.next(O);for(se.write_shift(1,0),k=0;k<y.length;++k)if(y[k]!=null)switch(D[k]){case"L":se.write_shift(1,g[w][k]==null?63:g[w][k]?84:70);break;case"B":se.write_shift(8,g[w][k]||0,"f");break;case"N":var ue="0";for(typeof g[w][k]=="number"&&(ue=g[w][k].toFixed(W[k]||0)),S=0;S<q[k]-ue.length;++S)se.write_shift(1,32);se.write_shift(1,ue,"sbcs");break;case"D":g[w][k]?(se.write_shift(4,("0000"+g[w][k].getFullYear()).slice(-4),"sbcs"),se.write_shift(2,("00"+(g[w][k].getMonth()+1)).slice(-2),"sbcs"),se.write_shift(2,("00"+g[w][k].getDate()).slice(-2),"sbcs")):se.write_shift(8,"00000000","sbcs");break;case"C":var fe=String(g[w][k]!=null?g[w][k]:"").slice(0,q[k]);for(se.write_shift(1,fe,"sbcs"),S=0;S<q[k]-fe.length;++S)se.write_shift(1,32);break}}return f.next(1).write_shift(1,26),f.end()}return{to_workbook:a,to_sheet:n,from_sheet:l}})(),M$=(function(){var e={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},t=new RegExp("\x1BN("+di(e).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(y,g){var N=e[g];return typeof N=="number"?_I(N):N},n=function(y,g,N){var w=g.charCodeAt(0)-32<<4|N.charCodeAt(0)-48;return w==59?y:_I(w)};e["|"]=254;function a(y,g){switch(g.type){case"base64":return i(Ic(y),g);case"binary":return i(y,g);case"buffer":return i(ra&&Buffer.isBuffer(y)?y.toString("binary"):vf(y),g);case"array":return i(qm(y),g)}throw new Error("Unrecognized type "+g.type)}function i(y,g){var N=y.split(/[\n\r]+/),w=-1,k=-1,S=0,O=0,E=[],D=[],q=null,W={},R=[],U=[],z=[],Z=0,H;for(+g.codepage>=0&&Zd(+g.codepage);S!==N.length;++S){Z=0;var K=N[S].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(t,r),J=K.replace(/;;/g,"\0").split(";").map(function(re){return re.replace(/\u0000/g,";")}),ae=J[0],se;if(K.length>0)switch(ae){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":J[1].charAt(0)=="P"&&D.push(K.slice(3).replace(/;;/g,";"));break;case"C":var ue=!1,fe=!1,ke=!1,_e=!1,Le=-1,xe=-1;for(O=1;O<J.length;++O)switch(J[O].charAt(0)){case"A":break;case"X":k=parseInt(J[O].slice(1))-1,fe=!0;break;case"Y":for(w=parseInt(J[O].slice(1))-1,fe||(k=0),H=E.length;H<=w;++H)E[H]=[];break;case"K":se=J[O].slice(1),se.charAt(0)==='"'?se=se.slice(1,se.length-1):se==="TRUE"?se=!0:se==="FALSE"?se=!1:isNaN(Jd(se))?isNaN(K1(se).getDate())||(se=As(se)):(se=Jd(se),q!==null&&pp(q)&&(se=Lk(se))),ue=!0;break;case"E":_e=!0;var B=b1(J[O].slice(1),{r:w,c:k});E[w][k]=[E[w][k],B];break;case"S":ke=!0,E[w][k]=[E[w][k],"S5S"];break;case"G":break;case"R":Le=parseInt(J[O].slice(1))-1;break;case"C":xe=parseInt(J[O].slice(1))-1;break;default:if(g&&g.WTF)throw new Error("SYLK bad record "+K)}if(ue&&(E[w][k]&&E[w][k].length==2?E[w][k][0]=se:E[w][k]=se,q=null),ke){if(_e)throw new Error("SYLK shared formula cannot have own formula");var ee=Le>-1&&E[Le][xe];if(!ee||!ee[1])throw new Error("SYLK shared formula cannot find base");E[w][k][1]=J$(ee[1],{r:w-Le,c:k-xe})}break;case"F":var Y=0;for(O=1;O<J.length;++O)switch(J[O].charAt(0)){case"X":k=parseInt(J[O].slice(1))-1,++Y;break;case"Y":for(w=parseInt(J[O].slice(1))-1,H=E.length;H<=w;++H)E[H]=[];break;case"M":Z=parseInt(J[O].slice(1))/20;break;case"F":break;case"G":break;case"P":q=D[parseInt(J[O].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(z=J[O].slice(1).split(" "),H=parseInt(z[0],10);H<=parseInt(z[1],10);++H)Z=parseInt(z[2],10),U[H-1]=Z===0?{hidden:!0}:{wch:Z},cf(U[H-1]);break;case"C":k=parseInt(J[O].slice(1))-1,U[k]||(U[k]={});break;case"R":w=parseInt(J[O].slice(1))-1,R[w]||(R[w]={}),Z>0?(R[w].hpt=Z,R[w].hpx=X1(Z)):Z===0&&(R[w].hidden=!0);break;default:if(g&&g.WTF)throw new Error("SYLK bad record "+K)}Y<1&&(q=null);break;default:if(g&&g.WTF)throw new Error("SYLK bad record "+K)}}return R.length>0&&(W["!rows"]=R),U.length>0&&(W["!cols"]=U),g&&g.sheetRows&&(E=E.slice(0,g.sheetRows)),[E,W]}function l(y,g){var N=a(y,g),w=N[0],k=N[1],S=bp(w,g);return di(k).forEach(function(O){S[O]=k[O]}),S}function o(y,g){return yf(l(y,g),g)}function c(y,g,N,w){var k="C;Y"+(N+1)+";X"+(w+1)+";K";switch(y.t){case"n":k+=y.v||0,y.f&&!y.F&&(k+=";E"+oA(y.f,{r:N,c:w}));break;case"b":k+=y.v?"TRUE":"FALSE";break;case"e":k+=y.w||y.v;break;case"d":k+='"'+(y.w||y.v)+'"';break;case"s":k+='"'+y.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return k}function d(y,g){g.forEach(function(N,w){var k="F;W"+(w+1)+" "+(w+1)+" ";N.hidden?k+="0":(typeof N.width=="number"&&!N.wpx&&(N.wpx=pb(N.width)),typeof N.wpx=="number"&&!N.wch&&(N.wch=gb(N.wpx)),typeof N.wch=="number"&&(k+=Math.round(N.wch))),k.charAt(k.length-1)!=" "&&y.push(k)})}function f(y,g){g.forEach(function(N,w){var k="F;";N.hidden?k+="M0;":N.hpt?k+="M"+20*N.hpt+";":N.hpx&&(k+="M"+20*bb(N.hpx)+";"),k.length>2&&y.push(k+"R"+(w+1))})}function p(y,g){var N=["ID;PWXL;N;E"],w=[],k=Ta(y["!ref"]),S,O=Array.isArray(y),E=`\r
`;N.push("P;PGeneral"),N.push("F;P0;DG0G8;M255"),y["!cols"]&&d(N,y["!cols"]),y["!rows"]&&f(N,y["!rows"]),N.push("B;Y"+(k.e.r-k.s.r+1)+";X"+(k.e.c-k.s.c+1)+";D"+[k.s.c,k.s.r,k.e.c,k.e.r].join(" "));for(var D=k.s.r;D<=k.e.r;++D)for(var q=k.s.c;q<=k.e.c;++q){var W=Tn({r:D,c:q});S=O?(y[D]||[])[q]:y[W],!(!S||S.v==null&&(!S.f||S.F))&&w.push(c(S,y,D,q))}return N.join(E)+E+w.join(E)+E+"E"+E}return{to_workbook:o,to_sheet:l,from_sheet:p}})(),L$=(function(){function e(i,l){switch(l.type){case"base64":return t(Ic(i),l);case"binary":return t(i,l);case"buffer":return t(ra&&Buffer.isBuffer(i)?i.toString("binary"):vf(i),l);case"array":return t(qm(i),l)}throw new Error("Unrecognized type "+l.type)}function t(i,l){for(var o=i.split(`
`),c=-1,d=-1,f=0,p=[];f!==o.length;++f){if(o[f].trim()==="BOT"){p[++c]=[],d=0;continue}if(!(c<0)){var y=o[f].trim().split(","),g=y[0],N=y[1];++f;for(var w=o[f]||"";(w.match(/["]/g)||[]).length&1&&f<o.length-1;)w+=`
`+o[++f];switch(w=w.trim(),+g){case-1:if(w==="BOT"){p[++c]=[],d=0;continue}else if(w!=="EOD")throw new Error("Unrecognized DIF special command "+w);break;case 0:w==="TRUE"?p[c][d]=!0:w==="FALSE"?p[c][d]=!1:isNaN(Jd(N))?isNaN(K1(N).getDate())?p[c][d]=N:p[c][d]=As(N):p[c][d]=Jd(N),++d;break;case 1:w=w.slice(1,w.length-1),w=w.replace(/""/g,'"'),w&&w.match(/^=".*"$/)&&(w=w.slice(2,-1)),p[c][d++]=w!==""?w:null;break}if(w==="EOD")break}}return l&&l.sheetRows&&(p=p.slice(0,l.sheetRows)),p}function r(i,l){return bp(e(i,l),l)}function n(i,l){return yf(r(i,l),l)}var a=(function(){var i=function(c,d,f,p,y){c.push(d),c.push(f+","+p),c.push('"'+y.replace(/"/g,'""')+'"')},l=function(c,d,f,p){c.push(d+","+f),c.push(d==1?'"'+p.replace(/"/g,'""')+'"':p)};return function(c){var d=[],f=Ta(c["!ref"]),p,y=Array.isArray(c);i(d,"TABLE",0,1,"sheetjs"),i(d,"VECTORS",0,f.e.r-f.s.r+1,""),i(d,"TUPLES",0,f.e.c-f.s.c+1,""),i(d,"DATA",0,0,"");for(var g=f.s.r;g<=f.e.r;++g){l(d,-1,0,"BOT");for(var N=f.s.c;N<=f.e.c;++N){var w=Tn({r:g,c:N});if(p=y?(c[g]||[])[N]:c[w],!p){l(d,1,0,"");continue}switch(p.t){case"n":var k=p.w;!k&&p.v!=null&&(k=p.v),k==null?p.f&&!p.F?l(d,1,0,"="+p.f):l(d,1,0,""):l(d,0,k,"V");break;case"b":l(d,0,p.v?1:0,p.v?"TRUE":"FALSE");break;case"s":l(d,1,0,isNaN(p.v)?p.v:'="'+p.v+'"');break;case"d":p.w||(p.w=xd(p.z||En[14],Yi(As(p.v)))),l(d,0,p.w,"V");break;default:l(d,1,0,"")}}}l(d,-1,0,"EOD");var S=`\r
`,O=d.join(S);return O}})();return{to_workbook:n,to_sheet:r,from_sheet:a}})(),R$=(function(){function e(p){return p.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function t(p){return p.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(p,y){for(var g=p.split(`
`),N=-1,w=-1,k=0,S=[];k!==g.length;++k){var O=g[k].trim().split(":");if(O[0]==="cell"){var E=Ks(O[1]);if(S.length<=E.r)for(N=S.length;N<=E.r;++N)S[N]||(S[N]=[]);switch(N=E.r,w=E.c,O[2]){case"t":S[N][w]=e(O[3]);break;case"v":S[N][w]=+O[3];break;case"vtf":var D=O[O.length-1];case"vtc":switch(O[3]){case"nl":S[N][w]=!!+O[4];break;default:S[N][w]=+O[4];break}O[2]=="vtf"&&(S[N][w]=[S[N][w],D])}}}return y&&y.sheetRows&&(S=S.slice(0,y.sheetRows)),S}function n(p,y){return bp(r(p,y),y)}function a(p,y){return yf(n(p,y),y)}var i=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),l=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,o=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),c="--SocialCalcSpreadsheetControlSave--";function d(p){if(!p||!p["!ref"])return"";for(var y=[],g=[],N,w="",k=ac(p["!ref"]),S=Array.isArray(p),O=k.s.r;O<=k.e.r;++O)for(var E=k.s.c;E<=k.e.c;++E)if(w=Tn({r:O,c:E}),N=S?(p[O]||[])[E]:p[w],!(!N||N.v==null||N.t==="z")){switch(g=["cell",w,"t"],N.t){case"s":case"str":g.push(t(N.v));break;case"n":N.f?(g[2]="vtf",g[3]="n",g[4]=N.v,g[5]=t(N.f)):(g[2]="v",g[3]=N.v);break;case"b":g[2]="vt"+(N.f?"f":"c"),g[3]="nl",g[4]=N.v?"1":"0",g[5]=t(N.f||(N.v?"TRUE":"FALSE"));break;case"d":var D=Yi(As(N.v));g[2]="vtc",g[3]="nd",g[4]=""+D,g[5]=N.w||xd(N.z||En[14],D);break;case"e":continue}y.push(g.join(":"))}return y.push("sheet:c:"+(k.e.c-k.s.c+1)+":r:"+(k.e.r-k.s.r+1)+":tvf:1"),y.push("valueformat:1:text-wiki"),y.join(`
`)}function f(p){return[i,l,o,l,d(p),c].join(`
`)}return{to_workbook:a,to_sheet:n,from_sheet:f}})(),G1=(function(){function e(f,p,y,g,N){N.raw?p[y][g]=f:f===""||(f==="TRUE"?p[y][g]=!0:f==="FALSE"?p[y][g]=!1:isNaN(Jd(f))?isNaN(K1(f).getDate())?p[y][g]=f:p[y][g]=As(f):p[y][g]=Jd(f))}function t(f,p){var y=p||{},g=[];if(!f||f.length===0)return g;for(var N=f.split(/[\r\n]/),w=N.length-1;w>=0&&N[w].length===0;)--w;for(var k=10,S=0,O=0;O<=w;++O)S=N[O].indexOf(" "),S==-1?S=N[O].length:S++,k=Math.max(k,S);for(O=0;O<=w;++O){g[O]=[];var E=0;for(e(N[O].slice(0,k).trim(),g,O,E,y),E=1;E<=(N[O].length-k)/10+1;++E)e(N[O].slice(k+(E-1)*10,k+E*10).trim(),g,O,E,y)}return y.sheetRows&&(g=g.slice(0,y.sheetRows)),g}var r={44:",",9:"	",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function a(f){for(var p={},y=!1,g=0,N=0;g<f.length;++g)(N=f.charCodeAt(g))==34?y=!y:!y&&N in r&&(p[N]=(p[N]||0)+1);N=[];for(g in p)Object.prototype.hasOwnProperty.call(p,g)&&N.push([p[g],g]);if(!N.length){p=n;for(g in p)Object.prototype.hasOwnProperty.call(p,g)&&N.push([p[g],g])}return N.sort(function(w,k){return w[0]-k[0]||n[w[1]]-n[k[1]]}),r[N.pop()[1]]||44}function i(f,p){var y=p||{},g="",N=y.dense?[]:{},w={s:{c:0,r:0},e:{c:0,r:0}};f.slice(0,4)=="sep="?f.charCodeAt(5)==13&&f.charCodeAt(6)==10?(g=f.charAt(4),f=f.slice(7)):f.charCodeAt(5)==13||f.charCodeAt(5)==10?(g=f.charAt(4),f=f.slice(6)):g=a(f.slice(0,1024)):y&&y.FS?g=y.FS:g=a(f.slice(0,1024));var k=0,S=0,O=0,E=0,D=0,q=g.charCodeAt(0),W=!1,R=0,U=f.charCodeAt(0);f=f.replace(/\r\n/mg,`
`);var z=y.dateNF!=null?Ibe(y.dateNF):null;function Z(){var H=f.slice(E,D),K={};if(H.charAt(0)=='"'&&H.charAt(H.length-1)=='"'&&(H=H.slice(1,-1).replace(/""/g,'"')),H.length===0)K.t="z";else if(y.raw)K.t="s",K.v=H;else if(H.trim().length===0)K.t="s",K.v=H;else if(H.charCodeAt(0)==61)H.charCodeAt(1)==34&&H.charCodeAt(H.length-1)==34?(K.t="s",K.v=H.slice(2,-1).replace(/""/g,'"')):o5e(H)?(K.t="n",K.f=H.slice(1)):(K.t="s",K.v=H);else if(H=="TRUE")K.t="b",K.v=!0;else if(H=="FALSE")K.t="b",K.v=!1;else if(!isNaN(O=Jd(H)))K.t="n",y.cellText!==!1&&(K.w=H),K.v=O;else if(!isNaN(K1(H).getDate())||z&&H.match(z)){K.z=y.dateNF||En[14];var J=0;z&&H.match(z)&&(H=Dbe(H,y.dateNF,H.match(z)||[]),J=1),y.cellDates?(K.t="d",K.v=As(H,J)):(K.t="n",K.v=Yi(As(H,J))),y.cellText!==!1&&(K.w=xd(K.z,K.v instanceof Date?Yi(K.v):K.v)),y.cellNF||delete K.z}else K.t="s",K.v=H;if(K.t=="z"||(y.dense?(N[k]||(N[k]=[]),N[k][S]=K):N[Tn({c:S,r:k})]=K),E=D+1,U=f.charCodeAt(E),w.e.c<S&&(w.e.c=S),w.e.r<k&&(w.e.r=k),R==q)++S;else if(S=0,++k,y.sheetRows&&y.sheetRows<=k)return!0}e:for(;D<f.length;++D)switch(R=f.charCodeAt(D)){case 34:U===34&&(W=!W);break;case q:case 10:case 13:if(!W&&Z())break e;break}return D-E>0&&Z(),N["!ref"]=Kn(w),N}function l(f,p){return!(p&&p.PRN)||p.FS||f.slice(0,4)=="sep="||f.indexOf("	")>=0||f.indexOf(",")>=0||f.indexOf(";")>=0?i(f,p):bp(t(f,p),p)}function o(f,p){var y="",g=p.type=="string"?[0,0,0,0]:pA(f,p);switch(p.type){case"base64":y=Ic(f);break;case"binary":y=f;break;case"buffer":p.codepage==65001?y=f.toString("utf8"):p.codepage&&typeof ob<"u"||(y=ra&&Buffer.isBuffer(f)?f.toString("binary"):vf(f));break;case"array":y=qm(f);break;case"string":y=f;break;default:throw new Error("Unrecognized type "+p.type)}return g[0]==239&&g[1]==187&&g[2]==191?y=as(y.slice(3)):p.type!="string"&&p.type!="buffer"&&p.codepage==65001?y=as(y):p.type=="binary"&&typeof ob<"u",y.slice(0,19)=="socialcalc:version:"?R$.to_sheet(p.type=="string"?y:as(y),p):l(y,p)}function c(f,p){return yf(o(f,p),p)}function d(f){for(var p=[],y=Ta(f["!ref"]),g,N=Array.isArray(f),w=y.s.r;w<=y.e.r;++w){for(var k=[],S=y.s.c;S<=y.e.c;++S){var O=Tn({r:w,c:S});if(g=N?(f[w]||[])[S]:f[O],!g||g.v==null){k.push("          ");continue}for(var E=(g.w||(Y0(g),g.w)||"").slice(0,10);E.length<10;)E+=" ";k.push(E+(S===0?" ":""))}p.push(k.join(""))}return p.join(`
`)}return{to_workbook:c,to_sheet:o,from_sheet:d}})();function Gye(e,t){var r=t||{},n=!!r.WTF;r.WTF=!0;try{var a=M$.to_workbook(e,r);return r.WTF=n,a}catch(i){if(r.WTF=n,!i.message.match(/SYLK bad record ID/)&&n)throw i;return G1.to_workbook(e,t)}}var wm=(function(){function e(B,ee,Y){if(B){Il(B,B.l||0);for(var re=Y.Enum||Le;B.l<B.length;){var Q=B.read_shift(2),Ce=re[Q]||re[65535],me=B.read_shift(2),ie=B.l+me,je=Ce.f&&Ce.f(B,me,Y);if(B.l=ie,ee(je,Ce,Q))return}}}function t(B,ee){switch(ee.type){case"base64":return r(jc(Ic(B)),ee);case"binary":return r(jc(B),ee);case"buffer":case"array":return r(B,ee)}throw"Unsupported type "+ee.type}function r(B,ee){if(!B)return B;var Y=ee||{},re=Y.dense?[]:{},Q="Sheet1",Ce="",me=0,ie={},je=[],be=[],le={s:{r:0,c:0},e:{r:0,c:0}},Ee=Y.sheetRows||0;if(B[2]==0&&(B[3]==8||B[3]==9)&&B.length>=16&&B[14]==5&&B[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(B[2]==2)Y.Enum=Le,e(B,function(lt,ut,nt){switch(nt){case 0:Y.vers=lt,lt>=4096&&(Y.qpro=!0);break;case 6:le=lt;break;case 204:lt&&(Ce=lt);break;case 222:Ce=lt;break;case 15:case 51:Y.qpro||(lt[1].v=lt[1].v.slice(1));case 13:case 14:case 16:nt==14&&(lt[2]&112)==112&&(lt[2]&15)>1&&(lt[2]&15)<15&&(lt[1].z=Y.dateNF||En[14],Y.cellDates&&(lt[1].t="d",lt[1].v=Lk(lt[1].v))),Y.qpro&&lt[3]>me&&(re["!ref"]=Kn(le),ie[Q]=re,je.push(Q),re=Y.dense?[]:{},le={s:{r:0,c:0},e:{r:0,c:0}},me=lt[3],Q=Ce||"Sheet"+(me+1),Ce="");var ot=Y.dense?(re[lt[0].r]||[])[lt[0].c]:re[Tn(lt[0])];if(ot){ot.t=lt[1].t,ot.v=lt[1].v,lt[1].z!=null&&(ot.z=lt[1].z),lt[1].f!=null&&(ot.f=lt[1].f);break}Y.dense?(re[lt[0].r]||(re[lt[0].r]=[]),re[lt[0].r][lt[0].c]=lt[1]):re[Tn(lt[0])]=lt[1];break}},Y);else if(B[2]==26||B[2]==14)Y.Enum=xe,B[2]==14&&(Y.qpro=!0,B.l=0),e(B,function(lt,ut,nt){switch(nt){case 204:Q=lt;break;case 22:lt[1].v=lt[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(lt[3]>me&&(re["!ref"]=Kn(le),ie[Q]=re,je.push(Q),re=Y.dense?[]:{},le={s:{r:0,c:0},e:{r:0,c:0}},me=lt[3],Q="Sheet"+(me+1)),Ee>0&&lt[0].r>=Ee)break;Y.dense?(re[lt[0].r]||(re[lt[0].r]=[]),re[lt[0].r][lt[0].c]=lt[1]):re[Tn(lt[0])]=lt[1],le.e.c<lt[0].c&&(le.e.c=lt[0].c),le.e.r<lt[0].r&&(le.e.r=lt[0].r);break;case 27:lt[14e3]&&(be[lt[14e3][0]]=lt[14e3][1]);break;case 1537:be[lt[0]]=lt[1],lt[0]==me&&(Q=lt[1]);break}},Y);else throw new Error("Unrecognized LOTUS BOF "+B[2]);if(re["!ref"]=Kn(le),ie[Ce||Q]=re,je.push(Ce||Q),!be.length)return{SheetNames:je,Sheets:ie};for(var Me={},ye=[],at=0;at<be.length;++at)ie[je[at]]?(ye.push(be[at]||je[at]),Me[be[at]]=ie[be[at]]||ie[je[at]]):(ye.push(be[at]),Me[be[at]]={"!ref":"A1"});return{SheetNames:ye,Sheets:Me}}function n(B,ee){var Y=ee||{};if(+Y.codepage>=0&&Zd(+Y.codepage),Y.type=="string")throw new Error("Cannot write WK1 to JS string");var re=nc(),Q=Ta(B["!ref"]),Ce=Array.isArray(B),me=[];_r(re,0,i(1030)),_r(re,6,c(Q));for(var ie=Math.min(Q.e.r,8191),je=Q.s.r;je<=ie;++je)for(var be=Si(je),le=Q.s.c;le<=Q.e.c;++le){je===Q.s.r&&(me[le]=Ws(le));var Ee=me[le]+be,Me=Ce?(B[je]||[])[le]:B[Ee];if(!(!Me||Me.t=="z"))if(Me.t=="n")(Me.v|0)==Me.v&&Me.v>=-32768&&Me.v<=32767?_r(re,13,g(je,le,Me.v)):_r(re,14,w(je,le,Me.v));else{var ye=Y0(Me);_r(re,15,p(je,le,ye.slice(0,239)))}}return _r(re,1),re.end()}function a(B,ee){var Y=ee||{};if(+Y.codepage>=0&&Zd(+Y.codepage),Y.type=="string")throw new Error("Cannot write WK3 to JS string");var re=nc();_r(re,0,l(B));for(var Q=0,Ce=0;Q<B.SheetNames.length;++Q)(B.Sheets[B.SheetNames[Q]]||{})["!ref"]&&_r(re,27,_e(B.SheetNames[Q],Ce++));var me=0;for(Q=0;Q<B.SheetNames.length;++Q){var ie=B.Sheets[B.SheetNames[Q]];if(!(!ie||!ie["!ref"])){for(var je=Ta(ie["!ref"]),be=Array.isArray(ie),le=[],Ee=Math.min(je.e.r,8191),Me=je.s.r;Me<=Ee;++Me)for(var ye=Si(Me),at=je.s.c;at<=je.e.c;++at){Me===je.s.r&&(le[at]=Ws(at));var lt=le[at]+ye,ut=be?(ie[Me]||[])[at]:ie[lt];if(!(!ut||ut.t=="z"))if(ut.t=="n")_r(re,23,Z(Me,at,me,ut.v));else{var nt=Y0(ut);_r(re,22,R(Me,at,me,nt.slice(0,239)))}}++me}}return _r(re,1),re.end()}function i(B){var ee=Bt(2);return ee.write_shift(2,B),ee}function l(B){var ee=Bt(26);ee.write_shift(2,4096),ee.write_shift(2,4),ee.write_shift(4,0);for(var Y=0,re=0,Q=0,Ce=0;Ce<B.SheetNames.length;++Ce){var me=B.SheetNames[Ce],ie=B.Sheets[me];if(!(!ie||!ie["!ref"])){++Q;var je=ac(ie["!ref"]);Y<je.e.r&&(Y=je.e.r),re<je.e.c&&(re=je.e.c)}}return Y>8191&&(Y=8191),ee.write_shift(2,Y),ee.write_shift(1,Q),ee.write_shift(1,re),ee.write_shift(2,0),ee.write_shift(2,0),ee.write_shift(1,1),ee.write_shift(1,2),ee.write_shift(4,0),ee.write_shift(4,0),ee}function o(B,ee,Y){var re={s:{c:0,r:0},e:{c:0,r:0}};return ee==8&&Y.qpro?(re.s.c=B.read_shift(1),B.l++,re.s.r=B.read_shift(2),re.e.c=B.read_shift(1),B.l++,re.e.r=B.read_shift(2),re):(re.s.c=B.read_shift(2),re.s.r=B.read_shift(2),ee==12&&Y.qpro&&(B.l+=2),re.e.c=B.read_shift(2),re.e.r=B.read_shift(2),ee==12&&Y.qpro&&(B.l+=2),re.s.c==65535&&(re.s.c=re.e.c=re.s.r=re.e.r=0),re)}function c(B){var ee=Bt(8);return ee.write_shift(2,B.s.c),ee.write_shift(2,B.s.r),ee.write_shift(2,B.e.c),ee.write_shift(2,B.e.r),ee}function d(B,ee,Y){var re=[{c:0,r:0},{t:"n",v:0},0,0];return Y.qpro&&Y.vers!=20768?(re[0].c=B.read_shift(1),re[3]=B.read_shift(1),re[0].r=B.read_shift(2),B.l+=2):(re[2]=B.read_shift(1),re[0].c=B.read_shift(2),re[0].r=B.read_shift(2)),re}function f(B,ee,Y){var re=B.l+ee,Q=d(B,ee,Y);if(Q[1].t="s",Y.vers==20768){B.l++;var Ce=B.read_shift(1);return Q[1].v=B.read_shift(Ce,"utf8"),Q}return Y.qpro&&B.l++,Q[1].v=B.read_shift(re-B.l,"cstr"),Q}function p(B,ee,Y){var re=Bt(7+Y.length);re.write_shift(1,255),re.write_shift(2,ee),re.write_shift(2,B),re.write_shift(1,39);for(var Q=0;Q<re.length;++Q){var Ce=Y.charCodeAt(Q);re.write_shift(1,Ce>=128?95:Ce)}return re.write_shift(1,0),re}function y(B,ee,Y){var re=d(B,ee,Y);return re[1].v=B.read_shift(2,"i"),re}function g(B,ee,Y){var re=Bt(7);return re.write_shift(1,255),re.write_shift(2,ee),re.write_shift(2,B),re.write_shift(2,Y,"i"),re}function N(B,ee,Y){var re=d(B,ee,Y);return re[1].v=B.read_shift(8,"f"),re}function w(B,ee,Y){var re=Bt(13);return re.write_shift(1,255),re.write_shift(2,ee),re.write_shift(2,B),re.write_shift(8,Y,"f"),re}function k(B,ee,Y){var re=B.l+ee,Q=d(B,ee,Y);if(Q[1].v=B.read_shift(8,"f"),Y.qpro)B.l=re;else{var Ce=B.read_shift(2);D(B.slice(B.l,B.l+Ce),Q),B.l+=Ce}return Q}function S(B,ee,Y){var re=ee&32768;return ee&=-32769,ee=(re?B:0)+(ee>=8192?ee-16384:ee),(re?"":"$")+(Y?Ws(ee):Si(ee))}var O={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},E=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function D(B,ee){Il(B,0);for(var Y=[],re=0,Q="",Ce="",me="",ie="";B.l<B.length;){var je=B[B.l++];switch(je){case 0:Y.push(B.read_shift(8,"f"));break;case 1:Ce=S(ee[0].c,B.read_shift(2),!0),Q=S(ee[0].r,B.read_shift(2),!1),Y.push(Ce+Q);break;case 2:{var be=S(ee[0].c,B.read_shift(2),!0),le=S(ee[0].r,B.read_shift(2),!1);Ce=S(ee[0].c,B.read_shift(2),!0),Q=S(ee[0].r,B.read_shift(2),!1),Y.push(be+le+":"+Ce+Q)}break;case 3:if(B.l<B.length){console.error("WK1 premature formula end");return}break;case 4:Y.push("("+Y.pop()+")");break;case 5:Y.push(B.read_shift(2));break;case 6:{for(var Ee="";je=B[B.l++];)Ee+=String.fromCharCode(je);Y.push('"'+Ee.replace(/"/g,'""')+'"')}break;case 8:Y.push("-"+Y.pop());break;case 23:Y.push("+"+Y.pop());break;case 22:Y.push("NOT("+Y.pop()+")");break;case 20:case 21:ie=Y.pop(),me=Y.pop(),Y.push(["AND","OR"][je-20]+"("+me+","+ie+")");break;default:if(je<32&&E[je])ie=Y.pop(),me=Y.pop(),Y.push(me+E[je]+ie);else if(O[je]){if(re=O[je][1],re==69&&(re=B[B.l++]),re>Y.length){console.error("WK1 bad formula parse 0x"+je.toString(16)+":|"+Y.join("|")+"|");return}var Me=Y.slice(-re);Y.length-=re,Y.push(O[je][0]+"("+Me.join(",")+")")}else return je<=7?console.error("WK1 invalid opcode "+je.toString(16)):je<=24?console.error("WK1 unsupported op "+je.toString(16)):je<=30?console.error("WK1 invalid opcode "+je.toString(16)):je<=115?console.error("WK1 unsupported function opcode "+je.toString(16)):console.error("WK1 unrecognized opcode "+je.toString(16))}}Y.length==1?ee[1].f=""+Y[0]:console.error("WK1 bad formula parse |"+Y.join("|")+"|")}function q(B){var ee=[{c:0,r:0},{t:"n",v:0},0];return ee[0].r=B.read_shift(2),ee[3]=B[B.l++],ee[0].c=B[B.l++],ee}function W(B,ee){var Y=q(B);return Y[1].t="s",Y[1].v=B.read_shift(ee-4,"cstr"),Y}function R(B,ee,Y,re){var Q=Bt(6+re.length);Q.write_shift(2,B),Q.write_shift(1,Y),Q.write_shift(1,ee),Q.write_shift(1,39);for(var Ce=0;Ce<re.length;++Ce){var me=re.charCodeAt(Ce);Q.write_shift(1,me>=128?95:me)}return Q.write_shift(1,0),Q}function U(B,ee){var Y=q(B);Y[1].v=B.read_shift(2);var re=Y[1].v>>1;if(Y[1].v&1)switch(re&7){case 0:re=(re>>3)*5e3;break;case 1:re=(re>>3)*500;break;case 2:re=(re>>3)/20;break;case 3:re=(re>>3)/200;break;case 4:re=(re>>3)/2e3;break;case 5:re=(re>>3)/2e4;break;case 6:re=(re>>3)/16;break;case 7:re=(re>>3)/64;break}return Y[1].v=re,Y}function z(B,ee){var Y=q(B),re=B.read_shift(4),Q=B.read_shift(4),Ce=B.read_shift(2);if(Ce==65535)return re===0&&Q===3221225472?(Y[1].t="e",Y[1].v=15):re===0&&Q===3489660928?(Y[1].t="e",Y[1].v=42):Y[1].v=0,Y;var me=Ce&32768;return Ce=(Ce&32767)-16446,Y[1].v=(1-me*2)*(Q*Math.pow(2,Ce+32)+re*Math.pow(2,Ce)),Y}function Z(B,ee,Y,re){var Q=Bt(14);if(Q.write_shift(2,B),Q.write_shift(1,Y),Q.write_shift(1,ee),re==0)return Q.write_shift(4,0),Q.write_shift(4,0),Q.write_shift(2,65535),Q;var Ce=0,me=0,ie=0,je=0;return re<0&&(Ce=1,re=-re),me=Math.log2(re)|0,re/=Math.pow(2,me-31),je=re>>>0,(je&2147483648)==0&&(re/=2,++me,je=re>>>0),re-=je,je|=2147483648,je>>>=0,re*=Math.pow(2,32),ie=re>>>0,Q.write_shift(4,ie),Q.write_shift(4,je),me+=16383+(Ce?32768:0),Q.write_shift(2,me),Q}function H(B,ee){var Y=z(B);return B.l+=ee-14,Y}function K(B,ee){var Y=q(B),re=B.read_shift(4);return Y[1].v=re>>6,Y}function J(B,ee){var Y=q(B),re=B.read_shift(8,"f");return Y[1].v=re,Y}function ae(B,ee){var Y=J(B);return B.l+=ee-10,Y}function se(B,ee){return B[B.l+ee-1]==0?B.read_shift(ee,"cstr"):""}function ue(B,ee){var Y=B[B.l++];Y>ee-1&&(Y=ee-1);for(var re="";re.length<Y;)re+=String.fromCharCode(B[B.l++]);return re}function fe(B,ee,Y){if(!(!Y.qpro||ee<21)){var re=B.read_shift(1);B.l+=17,B.l+=1,B.l+=2;var Q=B.read_shift(ee-21,"cstr");return[re,Q]}}function ke(B,ee){for(var Y={},re=B.l+ee;B.l<re;){var Q=B.read_shift(2);if(Q==14e3){for(Y[Q]=[0,""],Y[Q][0]=B.read_shift(2);B[B.l];)Y[Q][1]+=String.fromCharCode(B[B.l]),B.l++;B.l++}}return Y}function _e(B,ee){var Y=Bt(5+B.length);Y.write_shift(2,14e3),Y.write_shift(2,ee);for(var re=0;re<B.length;++re){var Q=B.charCodeAt(re);Y[Y.l++]=Q>127?95:Q}return Y[Y.l++]=0,Y}var Le={0:{n:"BOF",f:Di},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:o},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:y},14:{n:"NUMBER",f:N},15:{n:"LABEL",f},16:{n:"FORMULA",f:k},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:se},222:{n:"SHEETNAMELP",f:ue},65535:{n:""}},xe={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:W},23:{n:"NUMBER17",f:z},24:{n:"NUMBER18",f:U},25:{n:"FORMULA19",f:H},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:ke},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:K},38:{n:"??"},39:{n:"NUMBER27",f:J},40:{n:"FORMULA28",f:ae},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:se},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:fe},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:n,book_to_wk3:a,to_workbook:t}})();function Xye(e){var t={},r=e.match(io),n=0,a=!1;if(r)for(;n!=r.length;++n){var i=Mn(r[n]);switch(i[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!i.val)break;case"<shadow>":case"<shadow/>":t.shadow=1;break;case"</shadow>":break;case"<charset":if(i.val=="1")break;t.cp=IC[parseInt(i.val,10)];break;case"<outline":if(!i.val)break;case"<outline>":case"<outline/>":t.outline=1;break;case"</outline>":break;case"<rFont":t.name=i.val;break;case"<sz":t.sz=i.val;break;case"<strike":if(!i.val)break;case"<strike>":case"<strike/>":t.strike=1;break;case"</strike>":break;case"<u":if(!i.val)break;switch(i.val){case"double":t.uval="double";break;case"singleAccounting":t.uval="single-accounting";break;case"doubleAccounting":t.uval="double-accounting";break}case"<u>":case"<u/>":t.u=1;break;case"</u>":break;case"<b":if(i.val=="0")break;case"<b>":case"<b/>":t.b=1;break;case"</b>":break;case"<i":if(i.val=="0")break;case"<i>":case"<i/>":t.i=1;break;case"</i>":break;case"<color":i.rgb&&(t.color=i.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":t.family=i.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":t.valign=i.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(i[0].charCodeAt(1)!==47&&!a)throw new Error("Unrecognized rich format "+i[0])}}return t}var Yye=(function(){var e=ub("t"),t=ub("rPr");function r(i){var l=i.match(e);if(!l)return{t:"s",v:""};var o={t:"s",v:Ea(l[1])},c=i.match(t);return c&&(o.s=Xye(c[1])),o}var n=/<(?:\w+:)?r>/g,a=/<\/(?:\w+:)?r>/;return function(l){return l.replace(n,"").split(a).map(r).filter(function(o){return o.v})}})(),Zye=(function(){var t=/(\r\n|\n)/g;function r(a,i,l){var o=[];a.u&&o.push("text-decoration: underline;"),a.uval&&o.push("text-underline-style:"+a.uval+";"),a.sz&&o.push("font-size:"+a.sz+"pt;"),a.outline&&o.push("text-effect: outline;"),a.shadow&&o.push("text-shadow: auto;"),i.push('<span style="'+o.join("")+'">'),a.b&&(i.push("<b>"),l.push("</b>")),a.i&&(i.push("<i>"),l.push("</i>")),a.strike&&(i.push("<s>"),l.push("</s>"));var c=a.valign||"";return c=="superscript"||c=="super"?c="sup":c=="subscript"&&(c="sub"),c!=""&&(i.push("<"+c+">"),l.push("</"+c+">")),l.push("</span>"),a}function n(a){var i=[[],a.v,[]];return a.v?(a.s&&r(a.s,i[0],i[2]),i[0].join("")+i[1].replace(t,"<br/>")+i[2].join("")):""}return function(i){return i.map(n).join("")}})(),Qye=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,Jye=/<(?:\w+:)?r>/,ewe=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function nA(e,t){var r=t?t.cellHTML:!0,n={};return e?(e.match(/^\s*<(?:\w+:)?t[^>]*>/)?(n.t=Ea(as(e.slice(e.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),n.r=as(e),r&&(n.h=HC(n.t))):e.match(Jye)&&(n.r=as(e),n.t=Ea(as((e.replace(ewe,"").match(Qye)||[]).join("").replace(io,""))),r&&(n.h=Zye(Yye(n.r)))),n):{t:""}}var twe=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,rwe=/<(?:\w+:)?(?:si|sstItem)>/g,nwe=/<\/(?:\w+:)?(?:si|sstItem)>/;function awe(e,t){var r=[],n="";if(!e)return r;var a=e.match(twe);if(a){n=a[2].replace(rwe,"").split(nwe);for(var i=0;i!=n.length;++i){var l=nA(n[i].trim(),t);l!=null&&(r[r.length]=l)}a=Mn(a[1]),r.Count=a.count,r.Unique=a.uniqueCount}return r}var swe=/^\s|\s$|[\t\n\r]/;function F$(e,t){if(!t.bookSST)return"";var r=[ji];r[r.length]=Nr("sst",null,{xmlns:ex[0],count:e.Count,uniqueCount:e.Unique});for(var n=0;n!=e.length;++n)if(e[n]!=null){var a=e[n],i="<si>";a.r?i+=a.r:(i+="<t",a.t||(a.t=""),a.t.match(swe)&&(i+=' xml:space="preserve"'),i+=">"+Xa(a.t)+"</t>"),i+="</si>",r[r.length]=i}return r.length>2&&(r[r.length]="</sst>",r[1]=r[1].replace("/>",">")),r.join("")}function iwe(e){return[e.read_shift(4),e.read_shift(4)]}function lwe(e,t){var r=[],n=!1;return ih(e,function(i,l,o){switch(o){case 159:r.Count=i[0],r.Unique=i[1];break;case 19:r.push(i);break;case 160:return!0;case 35:n=!0;break;case 36:n=!1;break;default:if(l.T,!n||t.WTF)throw new Error("Unexpected record 0x"+o.toString(16))}}),r}function owe(e,t){return t||(t=Bt(8)),t.write_shift(4,e.Count),t.write_shift(4,e.Unique),t}var cwe=vve;function dwe(e){var t=nc();or(t,159,owe(e));for(var r=0;r<e.length;++r)or(t,19,cwe(e[r]));return or(t,160),t.end()}function B$(e){for(var t=[],r=e.split(""),n=0;n<r.length;++n)t[n]=r[n].charCodeAt(0);return t}function U0(e,t){var r={};return r.Major=e.read_shift(2),r.Minor=e.read_shift(2),t>=4&&(e.l+=t-4),r}function uwe(e){var t={};return t.id=e.read_shift(0,"lpp4"),t.R=U0(e,4),t.U=U0(e,4),t.W=U0(e,4),t}function hwe(e){for(var t=e.read_shift(4),r=e.l+t-4,n={},a=e.read_shift(4),i=[];a-- >0;)i.push({t:e.read_shift(4),v:e.read_shift(0,"lpp4")});if(n.name=e.read_shift(0,"lpp4"),n.comps=i,e.l!=r)throw new Error("Bad DataSpaceMapEntry: "+e.l+" != "+r);return n}function fwe(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(hwe(e));return t}function mwe(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(e.read_shift(0,"lpp4"));return t}function xwe(e){var t={};return e.read_shift(4),e.l+=4,t.id=e.read_shift(0,"lpp4"),t.name=e.read_shift(0,"lpp4"),t.R=U0(e,4),t.U=U0(e,4),t.W=U0(e,4),t}function pwe(e){var t=xwe(e);if(t.ename=e.read_shift(0,"8lpp4"),t.blksz=e.read_shift(4),t.cmode=e.read_shift(4),e.read_shift(4)!=4)throw new Error("Bad !Primary record");return t}function U$(e,t){var r=e.l+t,n={};n.Flags=e.read_shift(4)&63,e.l+=4,n.AlgID=e.read_shift(4);var a=!1;switch(n.AlgID){case 26126:case 26127:case 26128:a=n.Flags==36;break;case 26625:a=n.Flags==4;break;case 0:a=n.Flags==16||n.Flags==4||n.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+n.AlgID}if(!a)throw new Error("Encryption Flags/AlgID mismatch");return n.AlgIDHash=e.read_shift(4),n.KeySize=e.read_shift(4),n.ProviderType=e.read_shift(4),e.l+=8,n.CSPName=e.read_shift(r-e.l>>1,"utf16le"),e.l=r,n}function z$(e,t){var r={},n=e.l+t;return e.l+=4,r.Salt=e.slice(e.l,e.l+16),e.l+=16,r.Verifier=e.slice(e.l,e.l+16),e.l+=16,e.read_shift(4),r.VerifierHash=e.slice(e.l,n),e.l=n,r}function gwe(e){var t=U0(e);switch(t.Minor){case 2:return[t.Minor,bwe(e)];case 3:return[t.Minor,vwe()];case 4:return[t.Minor,ywe(e)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+t.Minor)}function bwe(e){var t=e.read_shift(4);if((t&63)!=36)throw new Error("EncryptionInfo mismatch");var r=e.read_shift(4),n=U$(e,r),a=z$(e,e.length-e.l);return{t:"Std",h:n,v:a}}function vwe(){throw new Error("File is password-protected: ECMA-376 Extensible")}function ywe(e){var t=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];e.l+=4;var r=e.read_shift(e.length-e.l,"utf8"),n={};return r.replace(io,function(i){var l=Mn(i);switch(Ku(l[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":t.forEach(function(o){n[o]=l[o]});break;case"<dataIntegrity":n.encryptedHmacKey=l.encryptedHmacKey,n.encryptedHmacValue=l.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":n.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":n.uri=l.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":n.encs.push(l);break;default:throw l[0]}}),n}function wwe(e,t){var r={},n=r.EncryptionVersionInfo=U0(e,4);if(t-=4,n.Minor!=2)throw new Error("unrecognized minor version code: "+n.Minor);if(n.Major>4||n.Major<2)throw new Error("unrecognized major version code: "+n.Major);r.Flags=e.read_shift(4),t-=4;var a=e.read_shift(4);return t-=4,r.EncryptionHeader=U$(e,a),t-=a,r.EncryptionVerifier=z$(e,t),r}function kwe(e){var t={},r=t.EncryptionVersionInfo=U0(e,4);if(r.Major!=1||r.Minor!=1)throw"unrecognized version code "+r.Major+" : "+r.Minor;return t.Salt=e.read_shift(16),t.EncryptedVerifier=e.read_shift(16),t.EncryptedVerifierHash=e.read_shift(16),t}function aA(e){var t=0,r,n=B$(e),a=n.length+1,i,l,o,c,d;for(r=of(a),r[0]=n.length,i=1;i!=a;++i)r[i]=n[i-1];for(i=a-1;i>=0;--i)l=r[i],o=(t&16384)===0?0:1,c=t<<1&32767,d=o|c,t=d^l;return t^52811}var q$=(function(){var e=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],t=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],r=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],n=function(l){return(l/2|l*128)&255},a=function(l,o){return n(l^o)},i=function(l){for(var o=t[l.length-1],c=104,d=l.length-1;d>=0;--d)for(var f=l[d],p=0;p!=7;++p)f&64&&(o^=r[c]),f*=2,--c;return o};return function(l){for(var o=B$(l),c=i(o),d=o.length,f=of(16),p=0;p!=16;++p)f[p]=0;var y,g,N;for((d&1)===1&&(y=c>>8,f[d]=a(e[0],y),--d,y=c&255,g=o[o.length-1],f[d]=a(g,y));d>0;)--d,y=c>>8,f[d]=a(o[d],y),--d,y=c&255,f[d]=a(o[d],y);for(d=15,N=15-o.length;N>0;)y=c>>8,f[d]=a(e[N],y),--d,--N,y=c&255,f[d]=a(o[d],y),--d,--N;return f}})(),Nwe=function(e,t,r,n,a){a||(a=t),n||(n=q$(e));var i,l;for(i=0;i!=t.length;++i)l=t[i],l^=n[r],l=(l>>5|l<<3)&255,a[i]=l,++r;return[a,r,n]},_we=function(e){var t=0,r=q$(e);return function(n){var a=Nwe("",n,t,r);return t=a[1],a[0]}};function Swe(e,t,r,n){var a={key:Di(e),verificationBytes:Di(e)};return r.password&&(a.verifier=aA(r.password)),n.valid=a.verificationBytes===a.verifier,n.valid&&(n.insitu=_we(r.password)),a}function jwe(e,t,r){var n=r||{};return n.Info=e.read_shift(2),e.l-=2,n.Info===1?n.Data=kwe(e):n.Data=wwe(e,t),n}function Cwe(e,t,r){var n={Type:r.biff>=8?e.read_shift(2):0};return n.Type?jwe(e,t-2,n):Swe(e,r.biff>=8?t:t-2,r,n),n}var H$=(function(){function e(a,i){switch(i.type){case"base64":return t(Ic(a),i);case"binary":return t(a,i);case"buffer":return t(ra&&Buffer.isBuffer(a)?a.toString("binary"):vf(a),i);case"array":return t(qm(a),i)}throw new Error("Unrecognized type "+i.type)}function t(a,i){var l=i||{},o=l.dense?[]:{},c=a.match(/\\trowd.*?\\row\b/g);if(!c.length)throw new Error("RTF missing table");var d={s:{c:0,r:0},e:{c:0,r:c.length-1}};return c.forEach(function(f,p){Array.isArray(o)&&(o[p]=[]);for(var y=/\\\w+\b/g,g=0,N,w=-1;N=y.exec(f);){switch(N[0]){case"\\cell":var k=f.slice(g,y.lastIndex-N[0].length);if(k[0]==" "&&(k=k.slice(1)),++w,k.length){var S={v:k,t:"s"};Array.isArray(o)?o[p][w]=S:o[Tn({r:p,c:w})]=S}break}g=y.lastIndex}w>d.e.c&&(d.e.c=w)}),o["!ref"]=Kn(d),o}function r(a,i){return yf(e(a,i),i)}function n(a){for(var i=["{\\rtf1\\ansi"],l=Ta(a["!ref"]),o,c=Array.isArray(a),d=l.s.r;d<=l.e.r;++d){i.push("\\trowd\\trautofit1");for(var f=l.s.c;f<=l.e.c;++f)i.push("\\cellx"+(f+1));for(i.push("\\pard\\intbl"),f=l.s.c;f<=l.e.c;++f){var p=Tn({r:d,c:f});o=c?(a[d]||[])[f]:a[p],!(!o||o.v==null&&(!o.f||o.F))&&(i.push(" "+(o.w||(Y0(o),o.w))),i.push("\\cell"))}i.push("\\pard\\intbl\\row")}return i.join("")+"}"}return{to_workbook:r,to_sheet:e,from_sheet:n}})();function Awe(e){var t=e.slice(e[0]==="#"?1:0).slice(0,6);return[parseInt(t.slice(0,2),16),parseInt(t.slice(2,4),16),parseInt(t.slice(4,6),16)]}function xb(e){for(var t=0,r=1;t!=3;++t)r=r*256+(e[t]>255?255:e[t]<0?0:e[t]);return r.toString(16).toUpperCase().slice(1)}function Ewe(e){var t=e[0]/255,r=e[1]/255,n=e[2]/255,a=Math.max(t,r,n),i=Math.min(t,r,n),l=a-i;if(l===0)return[0,0,t];var o=0,c=0,d=a+i;switch(c=l/(d>1?2-d:d),a){case t:o=((r-n)/l+6)%6;break;case r:o=(n-t)/l+2;break;case n:o=(t-r)/l+4;break}return[o/6,c,d/2]}function Twe(e){var t=e[0],r=e[1],n=e[2],a=r*2*(n<.5?n:1-n),i=n-a/2,l=[i,i,i],o=6*t,c;if(r!==0)switch(o|0){case 0:case 6:c=a*o,l[0]+=a,l[1]+=c;break;case 1:c=a*(2-o),l[0]+=c,l[1]+=a;break;case 2:c=a*(o-2),l[1]+=a,l[2]+=c;break;case 3:c=a*(4-o),l[1]+=c,l[2]+=a;break;case 4:c=a*(o-4),l[2]+=a,l[0]+=c;break;case 5:c=a*(6-o),l[2]+=c,l[0]+=a;break}for(var d=0;d!=3;++d)l[d]=Math.round(l[d]*255);return l}function vw(e,t){if(t===0)return e;var r=Ewe(Awe(e));return t<0?r[2]=r[2]*(1+t):r[2]=1-(1-r[2])*(1-t),xb(Twe(r))}var $$=6,Owe=15,Pwe=1,to=$$;function pb(e){return Math.floor((e+Math.round(128/to)/256)*to)}function gb(e){return Math.floor((e-5)/to*100+.5)/100}function yw(e){return Math.round((e*to+5)/to*256)/256}function iN(e){return yw(gb(pb(e)))}function sA(e){var t=Math.abs(e-iN(e)),r=to;if(t>.005)for(to=Pwe;to<Owe;++to)Math.abs(e-iN(e))<=t&&(t=Math.abs(e-iN(e)),r=to);to=r}function cf(e){e.width?(e.wpx=pb(e.width),e.wch=gb(e.wpx),e.MDW=to):e.wpx?(e.wch=gb(e.wpx),e.width=yw(e.wch),e.MDW=to):typeof e.wch=="number"&&(e.width=yw(e.wch),e.wpx=pb(e.width),e.MDW=to),e.customWidth&&delete e.customWidth}var Iwe=96,V$=Iwe;function bb(e){return e*96/V$}function X1(e){return e*V$/96}var Dwe={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function Mwe(e,t,r,n){t.Borders=[];var a={},i=!1;(e[0].match(io)||[]).forEach(function(l){var o=Mn(l);switch(Ku(o[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":a={},o.diagonalUp&&(a.diagonalUp=Ss(o.diagonalUp)),o.diagonalDown&&(a.diagonalDown=Ss(o.diagonalDown)),t.Borders.push(a);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(n&&n.WTF&&!i)throw new Error("unrecognized "+o[0]+" in borders")}})}function Lwe(e,t,r,n){t.Fills=[];var a={},i=!1;(e[0].match(io)||[]).forEach(function(l){var o=Mn(l);switch(Ku(o[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":a={},t.Fills.push(a);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":t.Fills.push(a),a={};break;case"<patternFill":case"<patternFill>":o.patternType&&(a.patternType=o.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":a.bgColor||(a.bgColor={}),o.indexed&&(a.bgColor.indexed=parseInt(o.indexed,10)),o.theme&&(a.bgColor.theme=parseInt(o.theme,10)),o.tint&&(a.bgColor.tint=parseFloat(o.tint)),o.rgb&&(a.bgColor.rgb=o.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":a.fgColor||(a.fgColor={}),o.theme&&(a.fgColor.theme=parseInt(o.theme,10)),o.tint&&(a.fgColor.tint=parseFloat(o.tint)),o.rgb!=null&&(a.fgColor.rgb=o.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(n&&n.WTF&&!i)throw new Error("unrecognized "+o[0]+" in fills")}})}function Rwe(e,t,r,n){t.Fonts=[];var a={},i=!1;(e[0].match(io)||[]).forEach(function(l){var o=Mn(l);switch(Ku(o[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":t.Fonts.push(a),a={};break;case"<name":o.val&&(a.name=as(o.val));break;case"<name/>":case"</name>":break;case"<b":a.bold=o.val?Ss(o.val):1;break;case"<b/>":a.bold=1;break;case"<i":a.italic=o.val?Ss(o.val):1;break;case"<i/>":a.italic=1;break;case"<u":switch(o.val){case"none":a.underline=0;break;case"single":a.underline=1;break;case"double":a.underline=2;break;case"singleAccounting":a.underline=33;break;case"doubleAccounting":a.underline=34;break}break;case"<u/>":a.underline=1;break;case"<strike":a.strike=o.val?Ss(o.val):1;break;case"<strike/>":a.strike=1;break;case"<outline":a.outline=o.val?Ss(o.val):1;break;case"<outline/>":a.outline=1;break;case"<shadow":a.shadow=o.val?Ss(o.val):1;break;case"<shadow/>":a.shadow=1;break;case"<condense":a.condense=o.val?Ss(o.val):1;break;case"<condense/>":a.condense=1;break;case"<extend":a.extend=o.val?Ss(o.val):1;break;case"<extend/>":a.extend=1;break;case"<sz":o.val&&(a.sz=+o.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":o.val&&(a.vertAlign=o.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":o.val&&(a.family=parseInt(o.val,10));break;case"<family/>":case"</family>":break;case"<scheme":o.val&&(a.scheme=o.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(o.val=="1")break;o.codepage=IC[parseInt(o.val,10)];break;case"<color":if(a.color||(a.color={}),o.auto&&(a.color.auto=Ss(o.auto)),o.rgb)a.color.rgb=o.rgb.slice(-6);else if(o.indexed){a.color.index=parseInt(o.indexed,10);var c=vm[a.color.index];a.color.index==81&&(c=vm[1]),c||(c=vm[1]),a.color.rgb=c[0].toString(16)+c[1].toString(16)+c[2].toString(16)}else o.theme&&(a.color.theme=parseInt(o.theme,10),o.tint&&(a.color.tint=parseFloat(o.tint)),o.theme&&r.themeElements&&r.themeElements.clrScheme&&(a.color.rgb=vw(r.themeElements.clrScheme[a.color.theme].rgb,a.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":i=!0;break;case"</AlternateContent>":i=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(n&&n.WTF&&!i)throw new Error("unrecognized "+o[0]+" in fonts")}})}function Fwe(e,t,r){t.NumberFmt=[];for(var n=di(En),a=0;a<n.length;++a)t.NumberFmt[n[a]]=En[n[a]];var i=e[0].match(io);if(i)for(a=0;a<i.length;++a){var l=Mn(i[a]);switch(Ku(l[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var o=Ea(as(l.formatCode)),c=parseInt(l.numFmtId,10);if(t.NumberFmt[c]=o,c>0){if(c>392){for(c=392;c>60&&t.NumberFmt[c]!=null;--c);t.NumberFmt[c]=o}B0(o,c)}}break;case"</numFmt>":break;default:if(r.WTF)throw new Error("unrecognized "+l[0]+" in numFmts")}}}function Bwe(e){var t=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var n=r[0];n<=r[1];++n)e[n]!=null&&(t[t.length]=Nr("numFmt",null,{numFmtId:n,formatCode:Xa(e[n])}))}),t.length===1?"":(t[t.length]="</numFmts>",t[0]=Nr("numFmts",null,{count:t.length-2}).replace("/>",">"),t.join(""))}var F2=["numFmtId","fillId","fontId","borderId","xfId"],B2=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function Uwe(e,t,r){t.CellXf=[];var n,a=!1;(e[0].match(io)||[]).forEach(function(i){var l=Mn(i),o=0;switch(Ku(l[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(n=l,delete n[0],o=0;o<F2.length;++o)n[F2[o]]&&(n[F2[o]]=parseInt(n[F2[o]],10));for(o=0;o<B2.length;++o)n[B2[o]]&&(n[B2[o]]=Ss(n[B2[o]]));if(t.NumberFmt&&n.numFmtId>392){for(o=392;o>60;--o)if(t.NumberFmt[n.numFmtId]==t.NumberFmt[o]){n.numFmtId=o;break}}t.CellXf.push(n);break;case"</xf>":break;case"<alignment":case"<alignment/>":var c={};l.vertical&&(c.vertical=l.vertical),l.horizontal&&(c.horizontal=l.horizontal),l.textRotation!=null&&(c.textRotation=l.textRotation),l.indent&&(c.indent=l.indent),l.wrapText&&(c.wrapText=Ss(l.wrapText)),n.alignment=c;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":a=!0;break;case"</AlternateContent>":a=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(r&&r.WTF&&!a)throw new Error("unrecognized "+l[0]+" in cellXfs")}})}function zwe(e){var t=[];return t[t.length]=Nr("cellXfs",null),e.forEach(function(r){t[t.length]=Nr("xf",null,r)}),t[t.length]="</cellXfs>",t.length===2?"":(t[0]=Nr("cellXfs",null,{count:t.length-2}).replace("/>",">"),t.join(""))}var qwe=(function(){var t=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,r=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,n=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,a=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,i=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(o,c,d){var f={};if(!o)return f;o=o.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var p;return(p=o.match(t))&&Fwe(p,f,d),(p=o.match(a))&&Rwe(p,f,c,d),(p=o.match(n))&&Lwe(p,f,c,d),(p=o.match(i))&&Mwe(p,f,c,d),(p=o.match(r))&&Uwe(p,f,d),f}})();function W$(e,t){var r=[ji,Nr("styleSheet",null,{xmlns:ex[0],"xmlns:vt":Xi.vt})],n;return e.SSF&&(n=Bwe(e.SSF))!=null&&(r[r.length]=n),r[r.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',r[r.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',r[r.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',r[r.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(n=zwe(t.cellXfs))&&(r[r.length]=n),r[r.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',r[r.length]='<dxfs count="0"/>',r[r.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',r.length>2&&(r[r.length]="</styleSheet>",r[1]=r[1].replace("/>",">")),r.join("")}function Hwe(e,t){var r=e.read_shift(2),n=ao(e);return[r,n]}function $we(e,t,r){r||(r=Bt(6+4*t.length)),r.write_shift(2,e),yl(t,r);var n=r.length>r.l?r.slice(0,r.l):r;return r.l==null&&(r.l=r.length),n}function Vwe(e,t,r){var n={};n.sz=e.read_shift(2)/20;var a=jve(e);a.fItalic&&(n.italic=1),a.fCondense&&(n.condense=1),a.fExtend&&(n.extend=1),a.fShadow&&(n.shadow=1),a.fOutline&&(n.outline=1),a.fStrikeout&&(n.strike=1);var i=e.read_shift(2);switch(i===700&&(n.bold=1),e.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript";break}var l=e.read_shift(1);l!=0&&(n.underline=l);var o=e.read_shift(1);o>0&&(n.family=o);var c=e.read_shift(1);switch(c>0&&(n.charset=c),e.l++,n.color=Sve(e),e.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor";break}return n.name=ao(e),n}function Wwe(e,t){t||(t=Bt(153)),t.write_shift(2,e.sz*20),Cve(e,t),t.write_shift(2,e.bold?700:400);var r=0;e.vertAlign=="superscript"?r=1:e.vertAlign=="subscript"&&(r=2),t.write_shift(2,r),t.write_shift(1,e.underline||0),t.write_shift(1,e.family||0),t.write_shift(1,e.charset||0),t.write_shift(1,0),pw(e.color,t);var n=0;return n=2,t.write_shift(1,n),yl(e.name,t),t.length>t.l?t.slice(0,t.l):t}var Kwe=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],lN,Gwe=so;function mD(e,t){t||(t=Bt(84)),lN||(lN=Dk(Kwe));var r=lN[e.patternType];r==null&&(r=40),t.write_shift(4,r);var n=0;if(r!=40)for(pw({auto:1},t),pw({auto:1},t);n<12;++n)t.write_shift(4,0);else{for(;n<4;++n)t.write_shift(4,0);for(;n<12;++n)t.write_shift(4,0)}return t.length>t.l?t.slice(0,t.l):t}function Xwe(e,t){var r=e.l+t,n=e.read_shift(2),a=e.read_shift(2);return e.l=r,{ixfe:n,numFmtId:a}}function K$(e,t,r){r||(r=Bt(16)),r.write_shift(2,t||0),r.write_shift(2,e.numFmtId||0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(1,0),r.write_shift(1,0);var n=0;return r.write_shift(1,n),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r}function hg(e,t){return t||(t=Bt(10)),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(4,0),t.write_shift(4,0),t}var Ywe=so;function Zwe(e,t){return t||(t=Bt(51)),t.write_shift(1,0),hg(null,t),hg(null,t),hg(null,t),hg(null,t),hg(null,t),t.length>t.l?t.slice(0,t.l):t}function Qwe(e,t){return t||(t=Bt(52)),t.write_shift(4,e.xfId),t.write_shift(2,1),t.write_shift(1,0),t.write_shift(1,0),xw(e.name||"",t),t.length>t.l?t.slice(0,t.l):t}function Jwe(e,t,r){var n=Bt(2052);return n.write_shift(4,e),xw(t,n),xw(r,n),n.length>n.l?n.slice(0,n.l):n}function eke(e,t,r){var n={};n.NumberFmt=[];for(var a in En)n.NumberFmt[a]=En[a];n.CellXf=[],n.Fonts=[];var i=[],l=!1;return ih(e,function(c,d,f){switch(f){case 44:n.NumberFmt[c[0]]=c[1],B0(c[1],c[0]);break;case 43:n.Fonts.push(c),c.color.theme!=null&&t&&t.themeElements&&t.themeElements.clrScheme&&(c.color.rgb=vw(t.themeElements.clrScheme[c.color.theme].rgb,c.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:i[i.length-1]==617&&n.CellXf.push(c);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:l=!0;break;case 36:l=!1;break;case 37:i.push(f),l=!0;break;case 38:i.pop(),l=!1;break;default:if(d.T>0)i.push(f);else if(d.T<0)i.pop();else if(!l||r.WTF&&i[i.length-1]!=37)throw new Error("Unexpected record 0x"+f.toString(16))}}),n}function tke(e,t){if(t){var r=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)t[a]!=null&&++r}),r!=0&&(or(e,615,eu(r)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)t[a]!=null&&or(e,44,$we(a,t[a]))}),or(e,616))}}function rke(e){var t=1;or(e,611,eu(t)),or(e,43,Wwe({sz:12,color:{theme:1},name:"Calibri",family:2})),or(e,612)}function nke(e){var t=2;or(e,603,eu(t)),or(e,45,mD({patternType:"none"})),or(e,45,mD({patternType:"gray125"})),or(e,604)}function ake(e){var t=1;or(e,613,eu(t)),or(e,46,Zwe()),or(e,614)}function ske(e){var t=1;or(e,626,eu(t)),or(e,47,K$({numFmtId:0},65535)),or(e,627)}function ike(e,t){or(e,617,eu(t.length)),t.forEach(function(r){or(e,47,K$(r,0))}),or(e,618)}function lke(e){var t=1;or(e,619,eu(t)),or(e,48,Qwe({xfId:0,name:"Normal"})),or(e,620)}function oke(e){var t=0;or(e,505,eu(t)),or(e,506)}function cke(e){var t=0;or(e,508,Jwe(t,"TableStyleMedium9","PivotStyleMedium4")),or(e,509)}function dke(e,t){var r=nc();return or(r,278),tke(r,e.SSF),rke(r),nke(r),ake(r),ske(r),ike(r,t.cellXfs),lke(r),oke(r),cke(r),or(r,279),r.end()}var uke=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function hke(e,t,r){t.themeElements.clrScheme=[];var n={};(e[0].match(io)||[]).forEach(function(a){var i=Mn(a);switch(i[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":n.rgb=i.val;break;case"<a:sysClr":n.rgb=i.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":i[0].charAt(1)==="/"?(t.themeElements.clrScheme[uke.indexOf(i[0])]=n,n={}):n.name=i[0].slice(3,i[0].length-1);break;default:if(r&&r.WTF)throw new Error("Unrecognized "+i[0]+" in clrScheme")}})}function fke(){}function mke(){}var xke=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,pke=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,gke=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function bke(e,t,r){t.themeElements={};var n;[["clrScheme",xke,hke],["fontScheme",pke,fke],["fmtScheme",gke,mke]].forEach(function(a){if(!(n=e.match(a[1])))throw new Error(a[0]+" not found in themeElements");a[2](n,t,r)})}var vke=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function G$(e,t){(!e||e.length===0)&&(e=iA());var r,n={};if(!(r=e.match(vke)))throw new Error("themeElements not found in theme");return bke(r[0],n,t),n.raw=e,n}function iA(e,t){if(t&&t.themeXLSX)return t.themeXLSX;if(e&&typeof e.raw=="string")return e.raw;var r=[ji];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function yke(e,t,r){var n=e.l+t,a=e.read_shift(4);if(a!==124226){if(!r.cellStyles){e.l=n;return}var i=e.slice(e.l);e.l=n;var l;try{l=UH(i,{type:"array"})}catch{return}var o=Cc(l,"theme/theme/theme1.xml",!0);if(o)return G$(o,r)}}function wke(e){return e.read_shift(4)}function kke(e){var t={};switch(t.xclrType=e.read_shift(2),t.nTintShade=e.read_shift(2),t.xclrType){case 0:e.l+=4;break;case 1:t.xclrValue=Nke(e,4);break;case 2:t.xclrValue=C$(e);break;case 3:t.xclrValue=wke(e);break;case 4:e.l+=4;break}return e.l+=8,t}function Nke(e,t){return so(e,t)}function _ke(e,t){return so(e,t)}function Ske(e){var t=e.read_shift(2),r=e.read_shift(2)-4,n=[t];switch(t){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:n[1]=kke(e);break;case 6:n[1]=_ke(e,r);break;case 14:case 15:n[1]=e.read_shift(r===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+t+" "+r)}return n}function jke(e,t){var r=e.l+t;e.l+=2;var n=e.read_shift(2);e.l+=2;for(var a=e.read_shift(2),i=[];a-- >0;)i.push(Ske(e,r-e.l));return{ixfe:n,ext:i}}function Cke(e,t){t.forEach(function(r){r[0]})}function Ake(e,t){return{flags:e.read_shift(4),version:e.read_shift(4),name:ao(e)}}function Eke(e){var t=Bt(12+2*e.name.length);return t.write_shift(4,e.flags),t.write_shift(4,e.version),yl(e.name,t),t.slice(0,t.l)}function Tke(e){for(var t=[],r=e.read_shift(4);r-- >0;)t.push([e.read_shift(4),e.read_shift(4)]);return t}function Oke(e){var t=Bt(4+8*e.length);t.write_shift(4,e.length);for(var r=0;r<e.length;++r)t.write_shift(4,e[r][0]),t.write_shift(4,e[r][1]);return t}function Pke(e,t){var r=Bt(8+2*t.length);return r.write_shift(4,e),yl(t,r),r.slice(0,r.l)}function Ike(e){return e.l+=4,e.read_shift(4)!=0}function Dke(e,t){var r=Bt(8);return r.write_shift(4,e),r.write_shift(4,1),r}function Mke(e,t,r){var n={Types:[],Cell:[],Value:[]},a=r||{},i=[],l=!1,o=2;return ih(e,function(c,d,f){switch(f){case 335:n.Types.push({name:c.name});break;case 51:c.forEach(function(p){o==1?n.Cell.push({type:n.Types[p[0]-1].name,index:p[1]}):o==0&&n.Value.push({type:n.Types[p[0]-1].name,index:p[1]})});break;case 337:o=c?1:0;break;case 338:o=2;break;case 35:i.push(f),l=!0;break;case 36:i.pop(),l=!1;break;default:if(!d.T){if(!l||a.WTF&&i[i.length-1]!=35)throw new Error("Unexpected record 0x"+f.toString(16))}}}),n}function Lke(){var e=nc();return or(e,332),or(e,334,eu(1)),or(e,335,Eke({name:"XLDAPR",version:12e4,flags:3496657072})),or(e,336),or(e,339,Pke(1,"XLDAPR")),or(e,52),or(e,35,eu(514)),or(e,4096,eu(0)),or(e,4097,id(1)),or(e,36),or(e,53),or(e,340),or(e,337,Dke(1)),or(e,51,Oke([[1,0]])),or(e,338),or(e,333),e.end()}function Rke(e,t,r){var n={Types:[],Cell:[],Value:[]};if(!e)return n;var a=!1,i=2,l;return e.replace(io,function(o){var c=Mn(o);switch(Ku(c[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":n.Types.push({name:c.name});break;case"</metadataType>":break;case"<futureMetadata":for(var d=0;d<n.Types.length;++d)n.Types[d].name==c.name&&(l=n.Types[d]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":i==1?n.Cell.push({type:n.Types[c.t-1].name,index:+c.v}):i==0&&n.Value.push({type:n.Types[c.t-1].name,index:+c.v});break;case"</rc>":break;case"<cellMetadata":i=1;break;case"</cellMetadata>":i=2;break;case"<valueMetadata":i=0;break;case"</valueMetadata>":i=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;case"<rvb":if(!l)break;l.offsets||(l.offsets=[]),l.offsets.push(+c.i);break;default:if(!a&&r.WTF)throw new Error("unrecognized "+c[0]+" in metadata")}return o}),n}function X$(){var e=[ji];return e.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),e.join("")}function Fke(e){var t=[];if(!e)return t;var r=1;return(e.match(io)||[]).forEach(function(n){var a=Mn(n);switch(a[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete a[0],a.i?r=a.i:a.i=r,t.push(a);break}}),t}function Bke(e){var t={};t.i=e.read_shift(4);var r={};r.r=e.read_shift(4),r.c=e.read_shift(4),t.r=Tn(r);var n=e.read_shift(1);return n&2&&(t.l="1"),n&8&&(t.a="1"),t}function Uke(e,t,r){var n=[];return ih(e,function(i,l,o){switch(o){case 63:n.push(i);break;default:if(!l.T)throw new Error("Unexpected record 0x"+o.toString(16))}}),n}function zke(e,t,r,n){if(!e)return e;var a=n||{},i=!1;ih(e,function(o,c,d){switch(d){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:i=!0;break;case 36:i=!1;break;default:if(!c.T){if(!i||a.WTF)throw new Error("Unexpected record 0x"+d.toString(16))}}},a)}function qke(e,t){if(!e)return"??";var r=(e.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return t["!id"][r].Target}var o1=1024;function Y$(e,t){for(var r=[21600,21600],n=["m0,0l0",r[1],r[0],r[1],r[0],"0xe"].join(","),a=[Nr("xml",null,{"xmlns:v":yc.v,"xmlns:o":yc.o,"xmlns:x":yc.x,"xmlns:mv":yc.mv}).replace(/\/>/,">"),Nr("o:shapelayout",Nr("o:idmap",null,{"v:ext":"edit",data:e}),{"v:ext":"edit"}),Nr("v:shapetype",[Nr("v:stroke",null,{joinstyle:"miter"}),Nr("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:r.join(","),path:n})];o1<e*1e3;)o1+=1e3;return t.forEach(function(i){var l=Ks(i[0]),o={color2:"#BEFF82",type:"gradient"};o.type=="gradient"&&(o.angle="-180");var c=o.type=="gradient"?Nr("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,d=Nr("v:fill",c,o),f={on:"t",obscured:"t"};++o1,a=a.concat(["<v:shape"+hb({id:"_x0000_s"+o1,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(i[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",d,Nr("v:shadow",null,f),Nr("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",Dl("x:Anchor",[l.c+1,0,l.r+1,0,l.c+3,20,l.r+5,20].join(",")),Dl("x:AutoFill","False"),Dl("x:Row",String(l.r)),Dl("x:Column",String(l.c)),i[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),a.push("</xml>"),a.join("")}function xD(e,t,r,n){var a=Array.isArray(e),i;t.forEach(function(l){var o=Ks(l.ref);if(a?(e[o.r]||(e[o.r]=[]),i=e[o.r][o.c]):i=e[l.ref],!i){i={t:"z"},a?e[o.r][o.c]=i:e[l.ref]=i;var c=Ta(e["!ref"]||"BDWGO1000001:A1");c.s.r>o.r&&(c.s.r=o.r),c.e.r<o.r&&(c.e.r=o.r),c.s.c>o.c&&(c.s.c=o.c),c.e.c<o.c&&(c.e.c=o.c);var d=Kn(c);d!==e["!ref"]&&(e["!ref"]=d)}i.c||(i.c=[]);var f={a:l.author,t:l.t,r:l.r,T:r};l.h&&(f.h=l.h);for(var p=i.c.length-1;p>=0;--p){if(!r&&i.c[p].T)return;r&&!i.c[p].T&&i.c.splice(p,1)}if(r&&n){for(p=0;p<n.length;++p)if(f.a==n[p].id){f.a=n[p].name||f.a;break}}i.c.push(f)})}function Hke(e,t){if(e.match(/<(?:\w+:)?comments *\/>/))return[];var r=[],n=[],a=e.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);a&&a[1]&&a[1].split(/<\/\w*:?author>/).forEach(function(l){if(!(l===""||l.trim()==="")){var o=l.match(/<(?:\w+:)?author[^>]*>(.*)/);o&&r.push(o[1])}});var i=e.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return i&&i[1]&&i[1].split(/<\/\w*:?comment>/).forEach(function(l){if(!(l===""||l.trim()==="")){var o=l.match(/<(?:\w+:)?comment[^>]*>/);if(o){var c=Mn(o[0]),d={author:c.authorId&&r[c.authorId]||"sheetjsghost",ref:c.ref,guid:c.guid},f=Ks(c.ref);if(!(t.sheetRows&&t.sheetRows<=f.r)){var p=l.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),y=!!p&&!!p[1]&&nA(p[1])||{r:"",t:"",h:""};d.r=y.r,y.r=="<t></t>"&&(y.t=y.h=""),d.t=(y.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.cellHTML&&(d.h=y.h),n.push(d)}}}}),n}function Z$(e){var t=[ji,Nr("comments",null,{xmlns:ex[0]})],r=[];return t.push("<authors>"),e.forEach(function(n){n[1].forEach(function(a){var i=Xa(a.a);r.indexOf(i)==-1&&(r.push(i),t.push("<author>"+i+"</author>")),a.T&&a.ID&&r.indexOf("tc="+a.ID)==-1&&(r.push("tc="+a.ID),t.push("<author>tc="+a.ID+"</author>"))})}),r.length==0&&(r.push("SheetJ5"),t.push("<author>SheetJ5</author>")),t.push("</authors>"),t.push("<commentList>"),e.forEach(function(n){var a=0,i=[];if(n[1][0]&&n[1][0].T&&n[1][0].ID?a=r.indexOf("tc="+n[1][0].ID):n[1].forEach(function(c){c.a&&(a=r.indexOf(Xa(c.a))),i.push(c.t||"")}),t.push('<comment ref="'+n[0]+'" authorId="'+a+'"><text>'),i.length<=1)t.push(Dl("t",Xa(i[0]||"")));else{for(var l=`Comment:
    `+i[0]+`
`,o=1;o<i.length;++o)l+=`Reply:
    `+i[o]+`
`;t.push(Dl("t",Xa(l)))}t.push("</text></comment>")}),t.push("</commentList>"),t.length>2&&(t[t.length]="</comments>",t[1]=t[1].replace("/>",">")),t.join("")}function $ke(e,t){var r=[],n=!1,a={},i=0;return e.replace(io,function(o,c){var d=Mn(o);switch(Ku(d[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":a={author:d.personId,guid:d.id,ref:d.ref,T:1};break;case"</threadedComment>":a.t!=null&&r.push(a);break;case"<text>":case"<text":i=c+o.length;break;case"</text>":a.t=e.slice(i,c).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":n=!0;break;case"</mentions>":n=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&t.WTF)throw new Error("unrecognized "+d[0]+" in threaded comments")}return o}),r}function Vke(e,t,r){var n=[ji,Nr("ThreadedComments",null,{xmlns:Xi.TCMNT}).replace(/[\/]>/,">")];return e.forEach(function(a){var i="";(a[1]||[]).forEach(function(l,o){if(!l.T){delete l.ID;return}l.a&&t.indexOf(l.a)==-1&&t.push(l.a);var c={ref:a[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+r.tcid++).slice(-12)+"}"};o==0?i=c.id:c.parentId=i,l.ID=c.id,l.a&&(c.personId="{54EE7950-7262-4200-6969-"+("000000000000"+t.indexOf(l.a)).slice(-12)+"}"),n.push(Nr("threadedComment",Dl("text",l.t||""),c))})}),n.push("</ThreadedComments>"),n.join("")}function Wke(e,t){var r=[],n=!1;return e.replace(io,function(i){var l=Mn(i);switch(Ku(l[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":r.push({name:l.displayname,id:l.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&t.WTF)throw new Error("unrecognized "+l[0]+" in threaded comments")}return i}),r}function Kke(e){var t=[ji,Nr("personList",null,{xmlns:Xi.TCMNT,"xmlns:x":ex[0]}).replace(/[\/]>/,">")];return e.forEach(function(r,n){t.push(Nr("person",null,{displayName:r,id:"{54EE7950-7262-4200-6969-"+("000000000000"+n).slice(-12)+"}",userId:r,providerId:"None"}))}),t.push("</personList>"),t.join("")}function Gke(e){var t={};t.iauthor=e.read_shift(4);var r=ax(e);return t.rfx=r.s,t.ref=Tn(r.s),e.l+=16,t}function Xke(e,t){return t==null&&(t=Bt(36)),t.write_shift(4,e[1].iauthor),vp(e[0],t),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t}var Yke=ao;function Zke(e){return yl(e.slice(0,54))}function Qke(e,t){var r=[],n=[],a={},i=!1;return ih(e,function(o,c,d){switch(d){case 632:n.push(o);break;case 635:a=o;break;case 637:a.t=o.t,a.h=o.h,a.r=o.r;break;case 636:if(a.author=n[a.iauthor],delete a.iauthor,t.sheetRows&&a.rfx&&t.sheetRows<=a.rfx.r)break;a.t||(a.t=""),delete a.rfx,r.push(a);break;case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:break;case 38:break;default:if(!c.T){if(!i||t.WTF)throw new Error("Unexpected record 0x"+d.toString(16))}}}),r}function Jke(e){var t=nc(),r=[];return or(t,628),or(t,630),e.forEach(function(n){n[1].forEach(function(a){r.indexOf(a.a)>-1||(r.push(a.a.slice(0,54)),or(t,632,Zke(a.a)))})}),or(t,631),or(t,633),e.forEach(function(n){n[1].forEach(function(a){a.iauthor=r.indexOf(a.a);var i={s:Ks(n[0]),e:Ks(n[0])};or(t,635,Xke([i,a])),a.t&&a.t.length>0&&or(t,637,wve(a)),or(t,636),delete a.iauthor})}),or(t,634),or(t,629),t.end()}var e5e="application/vnd.ms-office.vbaProject";function t5e(e){var t=yn.utils.cfb_new({root:"R"});return e.FullPaths.forEach(function(r,n){if(!(r.slice(-1)==="/"||!r.match(/_VBA_PROJECT_CUR/))){var a=r.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");yn.utils.cfb_add(t,a,e.FileIndex[n].content)}}),yn.write(t)}function r5e(e,t){t.FullPaths.forEach(function(r,n){if(n!=0){var a=r.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");a.slice(-1)!=="/"&&yn.utils.cfb_add(e,a,t.FileIndex[n].content)}})}var Q$=["xlsb","xlsm","xlam","biff8","xla"];function n5e(){return{"!type":"dialog"}}function a5e(){return{"!type":"dialog"}}function s5e(){return{"!type":"macro"}}function i5e(){return{"!type":"macro"}}var b1=(function(){var e=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,t={r:0,c:0};function r(n,a,i,l){var o=!1,c=!1;i.length==0?c=!0:i.charAt(0)=="["&&(c=!0,i=i.slice(1,-1)),l.length==0?o=!0:l.charAt(0)=="["&&(o=!0,l=l.slice(1,-1));var d=i.length>0?parseInt(i,10)|0:0,f=l.length>0?parseInt(l,10)|0:0;return o?f+=t.c:--f,c?d+=t.r:--d,a+(o?"":"$")+Ws(f)+(c?"":"$")+Si(d)}return function(a,i){return t=i,a.replace(e,r)}})(),lA=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,oA=(function(){return function(t,r){return t.replace(lA,function(n,a,i,l,o,c){var d=GC(l)-(i?0:r.c),f=KC(c)-(o?0:r.r),p=f==0?"":o?f+1:"["+f+"]",y=d==0?"":i?d+1:"["+d+"]";return a+"R"+p+"C"+y})}})();function J$(e,t){return e.replace(lA,function(r,n,a,i,l,o){return n+(a=="$"?a+i:Ws(GC(i)+t.c))+(l=="$"?l+o:Si(KC(o)+t.r))})}function l5e(e,t,r){var n=ac(t),a=n.s,i=Ks(r),l={r:i.r-a.r,c:i.c-a.c};return J$(e,l)}function o5e(e){return e.length!=1}function pD(e){return e.replace(/_xlfn\./g,"")}function Pi(e){e.l+=1}function df(e,t){var r=e.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function eV(e,t,r){var n=2;if(r){if(r.biff>=2&&r.biff<=5)return tV(e);r.biff==12&&(n=4)}var a=e.read_shift(n),i=e.read_shift(n),l=df(e),o=df(e);return{s:{r:a,c:l[0],cRel:l[1],rRel:l[2]},e:{r:i,c:o[0],cRel:o[1],rRel:o[2]}}}function tV(e){var t=df(e),r=df(e),n=e.read_shift(1),a=e.read_shift(1);return{s:{r:t[0],c:n,cRel:t[1],rRel:t[2]},e:{r:r[0],c:a,cRel:r[1],rRel:r[2]}}}function c5e(e,t,r){if(r.biff<8)return tV(e);var n=e.read_shift(r.biff==12?4:2),a=e.read_shift(r.biff==12?4:2),i=df(e),l=df(e);return{s:{r:n,c:i[0],cRel:i[1],rRel:i[2]},e:{r:a,c:l[0],cRel:l[1],rRel:l[2]}}}function rV(e,t,r){if(r&&r.biff>=2&&r.biff<=5)return d5e(e);var n=e.read_shift(r&&r.biff==12?4:2),a=df(e);return{r:n,c:a[0],cRel:a[1],rRel:a[2]}}function d5e(e){var t=df(e),r=e.read_shift(1);return{r:t[0],c:r,cRel:t[1],rRel:t[2]}}function u5e(e){var t=e.read_shift(2),r=e.read_shift(2);return{r:t,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function h5e(e,t,r){var n=r&&r.biff?r.biff:8;if(n>=2&&n<=5)return f5e(e);var a=e.read_shift(n>=12?4:2),i=e.read_shift(2),l=(i&16384)>>14,o=(i&32768)>>15;if(i&=16383,o==1)for(;a>524287;)a-=1048576;if(l==1)for(;i>8191;)i=i-16384;return{r:a,c:i,cRel:l,rRel:o}}function f5e(e){var t=e.read_shift(2),r=e.read_shift(1),n=(t&32768)>>15,a=(t&16384)>>14;return t&=16383,n==1&&t>=8192&&(t=t-16384),a==1&&r>=128&&(r=r-256),{r:t,c:r,cRel:a,rRel:n}}function m5e(e,t,r){var n=(e[e.l++]&96)>>5,a=eV(e,r.biff>=2&&r.biff<=5?6:8,r);return[n,a]}function x5e(e,t,r){var n=(e[e.l++]&96)>>5,a=e.read_shift(2,"i"),i=8;if(r)switch(r.biff){case 5:e.l+=12,i=6;break;case 12:i=12;break}var l=eV(e,i,r);return[n,a,l]}function p5e(e,t,r){var n=(e[e.l++]&96)>>5;return e.l+=r&&r.biff>8?12:r.biff<8?6:8,[n]}function g5e(e,t,r){var n=(e[e.l++]&96)>>5,a=e.read_shift(2),i=8;if(r)switch(r.biff){case 5:e.l+=12,i=6;break;case 12:i=12;break}return e.l+=i,[n,a]}function b5e(e,t,r){var n=(e[e.l++]&96)>>5,a=c5e(e,t-1,r);return[n,a]}function v5e(e,t,r){var n=(e[e.l++]&96)>>5;return e.l+=r.biff==2?6:r.biff==12?14:7,[n]}function gD(e){var t=e[e.l+1]&1,r=1;return e.l+=4,[t,r]}function y5e(e,t,r){e.l+=2;for(var n=e.read_shift(r&&r.biff==2?1:2),a=[],i=0;i<=n;++i)a.push(e.read_shift(r&&r.biff==2?1:2));return a}function w5e(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=2,[n,e.read_shift(r&&r.biff==2?1:2)]}function k5e(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=2,[n,e.read_shift(r&&r.biff==2?1:2)]}function N5e(e){var t=e[e.l+1]&255?1:0;return e.l+=2,[t,e.read_shift(2)]}function _5e(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=r&&r.biff==2?3:4,[n]}function nV(e){var t=e.read_shift(1),r=e.read_shift(1);return[t,r]}function S5e(e){return e.read_shift(2),nV(e)}function j5e(e){return e.read_shift(2),nV(e)}function C5e(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=rV(e,0,r);return[n,a]}function A5e(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=h5e(e,0,r);return[n,a]}function E5e(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=e.read_shift(2);r&&r.biff==5&&(e.l+=12);var i=rV(e,0,r);return[n,a,i]}function T5e(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=e.read_shift(r&&r.biff<=3?1:2);return[I4e[a],iV[a],n]}function O5e(e,t,r){var n=e[e.l++],a=e.read_shift(1),i=r&&r.biff<=3?[n==88?-1:0,e.read_shift(1)]:P5e(e);return[a,(i[0]===0?iV:P4e)[i[1]]]}function P5e(e){return[e[e.l+1]>>7,e.read_shift(2)&32767]}function I5e(e,t,r){e.l+=r&&r.biff==2?3:4}function D5e(e,t,r){if(e.l++,r&&r.biff==12)return[e.read_shift(4,"i"),0];var n=e.read_shift(2),a=e.read_shift(r&&r.biff==2?1:2);return[n,a]}function M5e(e){return e.l++,lh[e.read_shift(1)]}function L5e(e){return e.l++,e.read_shift(2)}function R5e(e){return e.l++,e.read_shift(1)!==0}function F5e(e){return e.l++,ro(e)}function B5e(e,t,r){return e.l++,sv(e,t-1,r)}function U5e(e,t){var r=[e.read_shift(1)];if(t==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=vi(e,1)?"TRUE":"FALSE",t!=12&&(e.l+=7);break;case 37:case 16:r[1]=lh[e[e.l]],e.l+=t==12?4:8;break;case 0:e.l+=8;break;case 1:r[1]=ro(e);break;case 2:r[1]=sx(e,0,{biff:t>0&&t<8?2:t});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function z5e(e,t,r){for(var n=e.read_shift(r.biff==12?4:2),a=[],i=0;i!=n;++i)a.push((r.biff==12?ax:Rk)(e));return a}function q5e(e,t,r){var n=0,a=0;r.biff==12?(n=e.read_shift(4),a=e.read_shift(4)):(a=1+e.read_shift(1),n=1+e.read_shift(2)),r.biff>=2&&r.biff<8&&(--n,--a==0&&(a=256));for(var i=0,l=[];i!=n&&(l[i]=[]);++i)for(var o=0;o!=a;++o)l[i][o]=U5e(e,r.biff);return l}function H5e(e,t,r){var n=e.read_shift(1)>>>5&3,a=!r||r.biff>=8?4:2,i=e.read_shift(a);switch(r.biff){case 2:e.l+=5;break;case 3:case 4:e.l+=8;break;case 5:e.l+=12;break}return[n,0,i]}function $5e(e,t,r){if(r.biff==5)return V5e(e);var n=e.read_shift(1)>>>5&3,a=e.read_shift(2),i=e.read_shift(4);return[n,a,i]}function V5e(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2,"i");e.l+=8;var n=e.read_shift(2);return e.l+=12,[t,r,n]}function W5e(e,t,r){var n=e.read_shift(1)>>>5&3;e.l+=r&&r.biff==2?3:4;var a=e.read_shift(r&&r.biff==2?1:2);return[n,a]}function K5e(e,t,r){var n=e.read_shift(1)>>>5&3,a=e.read_shift(r&&r.biff==2?1:2);return[n,a]}function G5e(e,t,r){var n=e.read_shift(1)>>>5&3;return e.l+=4,r.biff<8&&e.l--,r.biff==12&&(e.l+=2),[n]}function X5e(e,t,r){var n=(e[e.l++]&96)>>5,a=e.read_shift(2),i=4;if(r)switch(r.biff){case 5:i=15;break;case 12:i=6;break}return e.l+=i,[n,a]}var Y5e=so,Z5e=so,Q5e=so;function lv(e,t,r){return e.l+=2,[u5e(e)]}function cA(e){return e.l+=6,[]}var J5e=lv,e4e=cA,t4e=cA,r4e=lv;function aV(e){return e.l+=2,[Di(e),e.read_shift(2)&1]}var n4e=lv,a4e=aV,s4e=cA,i4e=lv,l4e=lv,o4e=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function c4e(e){e.l+=2;var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(4),a=e.read_shift(2),i=e.read_shift(2),l=o4e[r>>2&31];return{ixti:t,coltype:r&3,rt:l,idx:n,c:a,C:i}}function d4e(e){return e.l+=2,[e.read_shift(4)]}function u4e(e,t,r){return e.l+=5,e.l+=2,e.l+=r.biff==2?1:4,["PTGSHEET"]}function h4e(e,t,r){return e.l+=r.biff==2?4:5,["PTGENDSHEET"]}function f4e(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function m4e(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function x4e(e){return e.l+=4,[0,0]}var bD={1:{n:"PtgExp",f:D5e},2:{n:"PtgTbl",f:Q5e},3:{n:"PtgAdd",f:Pi},4:{n:"PtgSub",f:Pi},5:{n:"PtgMul",f:Pi},6:{n:"PtgDiv",f:Pi},7:{n:"PtgPower",f:Pi},8:{n:"PtgConcat",f:Pi},9:{n:"PtgLt",f:Pi},10:{n:"PtgLe",f:Pi},11:{n:"PtgEq",f:Pi},12:{n:"PtgGe",f:Pi},13:{n:"PtgGt",f:Pi},14:{n:"PtgNe",f:Pi},15:{n:"PtgIsect",f:Pi},16:{n:"PtgUnion",f:Pi},17:{n:"PtgRange",f:Pi},18:{n:"PtgUplus",f:Pi},19:{n:"PtgUminus",f:Pi},20:{n:"PtgPercent",f:Pi},21:{n:"PtgParen",f:Pi},22:{n:"PtgMissArg",f:Pi},23:{n:"PtgStr",f:B5e},26:{n:"PtgSheet",f:u4e},27:{n:"PtgEndSheet",f:h4e},28:{n:"PtgErr",f:M5e},29:{n:"PtgBool",f:R5e},30:{n:"PtgInt",f:L5e},31:{n:"PtgNum",f:F5e},32:{n:"PtgArray",f:v5e},33:{n:"PtgFunc",f:T5e},34:{n:"PtgFuncVar",f:O5e},35:{n:"PtgName",f:H5e},36:{n:"PtgRef",f:C5e},37:{n:"PtgArea",f:m5e},38:{n:"PtgMemArea",f:W5e},39:{n:"PtgMemErr",f:Y5e},40:{n:"PtgMemNoMem",f:Z5e},41:{n:"PtgMemFunc",f:K5e},42:{n:"PtgRefErr",f:G5e},43:{n:"PtgAreaErr",f:p5e},44:{n:"PtgRefN",f:A5e},45:{n:"PtgAreaN",f:b5e},46:{n:"PtgMemAreaN",f:f4e},47:{n:"PtgMemNoMemN",f:m4e},57:{n:"PtgNameX",f:$5e},58:{n:"PtgRef3d",f:E5e},59:{n:"PtgArea3d",f:x5e},60:{n:"PtgRefErr3d",f:X5e},61:{n:"PtgAreaErr3d",f:g5e},255:{}},p4e={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},g4e={1:{n:"PtgElfLel",f:aV},2:{n:"PtgElfRw",f:i4e},3:{n:"PtgElfCol",f:J5e},6:{n:"PtgElfRwV",f:l4e},7:{n:"PtgElfColV",f:r4e},10:{n:"PtgElfRadical",f:n4e},11:{n:"PtgElfRadicalS",f:s4e},13:{n:"PtgElfColS",f:e4e},15:{n:"PtgElfColSV",f:t4e},16:{n:"PtgElfRadicalLel",f:a4e},25:{n:"PtgList",f:c4e},29:{n:"PtgSxName",f:d4e},255:{}},b4e={0:{n:"PtgAttrNoop",f:x4e},1:{n:"PtgAttrSemi",f:_5e},2:{n:"PtgAttrIf",f:k5e},4:{n:"PtgAttrChoose",f:y5e},8:{n:"PtgAttrGoto",f:w5e},16:{n:"PtgAttrSum",f:I5e},32:{n:"PtgAttrBaxcel",f:gD},33:{n:"PtgAttrBaxcel",f:gD},64:{n:"PtgAttrSpace",f:S5e},65:{n:"PtgAttrSpaceSemi",f:j5e},128:{n:"PtgAttrIfError",f:N5e},255:{}};function ov(e,t,r,n){if(n.biff<8)return so(e,t);for(var a=e.l+t,i=[],l=0;l!==r.length;++l)switch(r[l][0]){case"PtgArray":r[l][1]=q5e(e,0,n),i.push(r[l][1]);break;case"PtgMemArea":r[l][2]=z5e(e,r[l][1],n),i.push(r[l][2]);break;case"PtgExp":n&&n.biff==12&&(r[l][1][1]=e.read_shift(4),i.push(r[l][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[l][0]}return t=a-e.l,t!==0&&i.push(so(e,t)),i}function cv(e,t,r){for(var n=e.l+t,a,i,l=[];n!=e.l;)t=n-e.l,i=e[e.l],a=bD[i]||bD[p4e[i]],(i===24||i===25)&&(a=(i===24?g4e:b4e)[e[e.l+1]]),!a||!a.f?so(e,t):l.push([a.n,a.f(e,t,r)]);return l}function v4e(e){for(var t=[],r=0;r<e.length;++r){for(var n=e[r],a=[],i=0;i<n.length;++i){var l=n[i];if(l)switch(l[0]){case 2:a.push('"'+l[1].replace(/"/g,'""')+'"');break;default:a.push(l[1])}else a.push("")}t.push(a.join(","))}return t.join(";")}var y4e={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function w4e(e,t){if(!e&&!(t&&t.biff<=5&&t.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(e)?"'"+e+"'":e}function sV(e,t,r){if(!e)return"SH33TJSERR0";if(r.biff>8&&(!e.XTI||!e.XTI[t]))return e.SheetNames[t];if(!e.XTI)return"SH33TJSERR6";var n=e.XTI[t];if(r.biff<8)return t>1e4&&(t-=65536),t<0&&(t=-t),t==0?"":e.XTI[t-1];if(!n)return"SH33TJSERR1";var a="";if(r.biff>8)switch(e[n[0]][0]){case 357:return a=n[1]==-1?"#REF":e.SheetNames[n[1]],n[1]==n[2]?a:a+":"+e.SheetNames[n[2]];case 358:return r.SID!=null?e.SheetNames[r.SID]:"SH33TJSSAME"+e[n[0]][0];case 355:default:return"SH33TJSSRC"+e[n[0]][0]}switch(e[n[0]][0][0]){case 1025:return a=n[1]==-1?"#REF":e.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?a:a+":"+e.SheetNames[n[2]];case 14849:return e[n[0]].slice(1).map(function(i){return i.Name}).join(";;");default:return e[n[0]][0][3]?(a=n[1]==-1?"#REF":e[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?a:a+":"+e[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function vD(e,t,r){var n=sV(e,t,r);return n=="#REF"?n:w4e(n,r)}function Jl(e,t,r,n,a){var i=a&&a.biff||8,l={s:{c:0,r:0}},o=[],c,d,f,p=0,y=0,g,N="";if(!e[0]||!e[0][0])return"";for(var w=-1,k="",S=0,O=e[0].length;S<O;++S){var E=e[0][S];switch(E[0]){case"PtgUminus":o.push("-"+o.pop());break;case"PtgUplus":o.push("+"+o.pop());break;case"PtgPercent":o.push(o.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(c=o.pop(),d=o.pop(),w>=0){switch(e[0][w][1][0]){case 0:k=li(" ",e[0][w][1][1]);break;case 1:k=li("\r",e[0][w][1][1]);break;default:if(k="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][w][1][0])}d=d+k,w=-1}o.push(d+y4e[E[0]]+c);break;case"PtgIsect":c=o.pop(),d=o.pop(),o.push(d+" "+c);break;case"PtgUnion":c=o.pop(),d=o.pop(),o.push(d+","+c);break;case"PtgRange":c=o.pop(),d=o.pop(),o.push(d+":"+c);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":f=Eg(E[1][1],l,a),o.push(Tg(f,i));break;case"PtgRefN":f=r?Eg(E[1][1],r,a):E[1][1],o.push(Tg(f,i));break;case"PtgRef3d":p=E[1][1],f=Eg(E[1][2],l,a),N=vD(n,p,a),o.push(N+"!"+Tg(f,i));break;case"PtgFunc":case"PtgFuncVar":var D=E[1][0],q=E[1][1];D||(D=0),D&=127;var W=D==0?[]:o.slice(-D);o.length-=D,q==="User"&&(q=W.shift()),o.push(q+"("+W.join(",")+")");break;case"PtgBool":o.push(E[1]?"TRUE":"FALSE");break;case"PtgInt":o.push(E[1]);break;case"PtgNum":o.push(String(E[1]));break;case"PtgStr":o.push('"'+E[1].replace(/"/g,'""')+'"');break;case"PtgErr":o.push(E[1]);break;case"PtgAreaN":g=GI(E[1][1],r?{s:r}:l,a),o.push(nN(g,a));break;case"PtgArea":g=GI(E[1][1],l,a),o.push(nN(g,a));break;case"PtgArea3d":p=E[1][1],g=E[1][2],N=vD(n,p,a),o.push(N+"!"+nN(g,a));break;case"PtgAttrSum":o.push("SUM("+o.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":y=E[1][2];var R=(n.names||[])[y-1]||(n[0]||[])[y],U=R?R.Name:"SH33TJSNAME"+String(y);U&&U.slice(0,6)=="_xlfn."&&!a.xlfn&&(U=U.slice(6)),o.push(U);break;case"PtgNameX":var z=E[1][1];y=E[1][2];var Z;if(a.biff<=5)z<0&&(z=-z),n[z]&&(Z=n[z][y]);else{var H="";if(((n[z]||[])[0]||[])[0]==14849||(((n[z]||[])[0]||[])[0]==1025?n[z][y]&&n[z][y].itab>0&&(H=n.SheetNames[n[z][y].itab-1]+"!"):H=n.SheetNames[y-1]+"!"),n[z]&&n[z][y])H+=n[z][y].Name;else if(n[0]&&n[0][y])H+=n[0][y].Name;else{var K=(sV(n,z,a)||"").split(";;");K[y-1]?H=K[y-1]:H+="SH33TJSERRX"}o.push(H);break}Z||(Z={Name:"SH33TJSERRY"}),o.push(Z.Name);break;case"PtgParen":var J="(",ae=")";if(w>=0){switch(k="",e[0][w][1][0]){case 2:J=li(" ",e[0][w][1][1])+J;break;case 3:J=li("\r",e[0][w][1][1])+J;break;case 4:ae=li(" ",e[0][w][1][1])+ae;break;case 5:ae=li("\r",e[0][w][1][1])+ae;break;default:if(a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][w][1][0])}w=-1}o.push(J+o.pop()+ae);break;case"PtgRefErr":o.push("#REF!");break;case"PtgRefErr3d":o.push("#REF!");break;case"PtgExp":f={c:E[1][1],r:E[1][0]};var se={c:r.c,r:r.r};if(n.sharedf[Tn(f)]){var ue=n.sharedf[Tn(f)];o.push(Jl(ue,l,se,n,a))}else{var fe=!1;for(c=0;c!=n.arrayf.length;++c)if(d=n.arrayf[c],!(f.c<d[0].s.c||f.c>d[0].e.c)&&!(f.r<d[0].s.r||f.r>d[0].e.r)){o.push(Jl(d[1],l,se,n,a)),fe=!0;break}fe||o.push(E[1])}break;case"PtgArray":o.push("{"+v4e(E[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":w=S;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":o.push("");break;case"PtgAreaErr":o.push("#REF!");break;case"PtgAreaErr3d":o.push("#REF!");break;case"PtgList":o.push("Table"+E[1].idx+"[#"+E[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(E));default:throw new Error("Unrecognized Formula Token: "+String(E))}var ke=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(a.biff!=3&&w>=0&&ke.indexOf(e[0][S][0])==-1){E=e[0][w];var _e=!0;switch(E[1][0]){case 4:_e=!1;case 0:k=li(" ",E[1][1]);break;case 5:_e=!1;case 1:k=li("\r",E[1][1]);break;default:if(k="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+E[1][0])}o.push((_e?k:"")+o.pop()+(_e?"":k)),w=-1}}if(o.length>1&&a.WTF)throw new Error("bad formula stack");return o[0]}function k4e(e,t,r){var n=e.l+t,a=r.biff==2?1:2,i,l=e.read_shift(a);if(l==65535)return[[],so(e,t-2)];var o=cv(e,l,r);return t!==l+a&&(i=ov(e,t-l-a,o,r)),e.l=n,[o,i]}function N4e(e,t,r){var n=e.l+t,a=r.biff==2?1:2,i,l=e.read_shift(a);if(l==65535)return[[],so(e,t-2)];var o=cv(e,l,r);return t!==l+a&&(i=ov(e,t-l-a,o,r)),e.l=n,[o,i]}function _4e(e,t,r,n){var a=e.l+t,i=cv(e,n,r),l;return a!==e.l&&(l=ov(e,a-e.l,i,r)),[i,l]}function S4e(e,t,r){var n=e.l+t,a,i=e.read_shift(2),l=cv(e,i,r);return i==65535?[[],so(e,t-2)]:(t!==i+2&&(a=ov(e,n-i-2,l,r)),[l,a])}function j4e(e){var t;if(O0(e,e.l+6)!==65535)return[ro(e),"n"];switch(e[e.l]){case 0:return e.l+=8,["String","s"];case 1:return t=e[e.l+2]===1,e.l+=8,[t,"b"];case 2:return t=e[e.l+2],e.l+=8,[t,"e"];case 3:return e.l+=8,["","s"]}return[]}function C4e(e){if(e==null){var t=Bt(8);return t.write_shift(1,3),t.write_shift(1,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,65535),t}else if(typeof e=="number")return Hm(e);return Hm(0)}function oN(e,t,r){var n=e.l+t,a=Gu(e);r.biff==2&&++e.l;var i=j4e(e),l=e.read_shift(1);r.biff!=2&&(e.read_shift(1),r.biff>=5&&e.read_shift(4));var o=N4e(e,n-e.l,r);return{cell:a,val:i[0],formula:o,shared:l>>3&1,tt:i[1]}}function A4e(e,t,r,n,a){var i=Vm(t,r,a),l=C4e(e.v),o=Bt(6),c=33;o.write_shift(2,c),o.write_shift(4,0);for(var d=Bt(e.bf.length),f=0;f<e.bf.length;++f)d[f]=e.bf[f];var p=bl([i,l,o,d]);return p}function Fk(e,t,r){var n=e.read_shift(4),a=cv(e,n,r),i=e.read_shift(4),l=i>0?ov(e,i,a,r):null;return[a,l]}var E4e=Fk,Bk=Fk,T4e=Fk,O4e=Fk,P4e={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},iV={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},I4e={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function yD(e){return e.slice(0,3)=="of:"&&(e=e.slice(3)),e.charCodeAt(0)==61&&(e=e.slice(1),e.charCodeAt(0)==61&&(e=e.slice(1))),e=e.replace(/COM\.MICROSOFT\./g,""),e=e.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(t,r){return r.replace(/\./g,"")}),e=e.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),e.replace(/[;~]/g,",").replace(/\|/g,";")}function D4e(e){var t="of:="+e.replace(lA,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return t.replace(/;/g,"|").replace(/,/g,";")}function cN(e){var t=e.split(":"),r=t[0].split(".")[0];return[r,t[0].split(".")[1]+(t.length>1?":"+(t[1].split(".")[1]||t[1].split(".")[0]):"")]}function M4e(e){return e.replace(/\./,"!")}var Pg={},v1={},Ig=typeof Map<"u";function dA(e,t,r){var n=0,a=e.length;if(r){if(Ig?r.has(t):Object.prototype.hasOwnProperty.call(r,t)){for(var i=Ig?r.get(t):r[t];n<i.length;++n)if(e[i[n]].t===t)return e.Count++,i[n]}}else for(;n<a;++n)if(e[n].t===t)return e.Count++,n;return e[a]={t},e.Count++,e.Unique++,r&&(Ig?(r.has(t)||r.set(t,[]),r.get(t).push(a)):(Object.prototype.hasOwnProperty.call(r,t)||(r[t]=[]),r[t].push(a))),a}function Uk(e,t){var r={min:e+1,max:e+1},n=-1;return t.MDW&&(to=t.MDW),t.width!=null?r.customWidth=1:t.wpx!=null?n=gb(t.wpx):t.wch!=null&&(n=t.wch),n>-1?(r.width=yw(n),r.customWidth=1):t.width!=null&&(r.width=t.width),t.hidden&&(r.hidden=!0),t.level!=null&&(r.outlineLevel=r.level=t.level),r}function km(e,t){if(e){var r=[.7,.7,.75,.75,.3,.3];t=="xlml"&&(r=[1,1,1,1,.5,.5]),e.left==null&&(e.left=r[0]),e.right==null&&(e.right=r[1]),e.top==null&&(e.top=r[2]),e.bottom==null&&(e.bottom=r[3]),e.header==null&&(e.header=r[4]),e.footer==null&&(e.footer=r[5])}}function wf(e,t,r){var n=r.revssf[t.z!=null?t.z:"General"],a=60,i=e.length;if(n==null&&r.ssf){for(;a<392;++a)if(r.ssf[a]==null){B0(t.z,a),r.ssf[a]=t.z,r.revssf[t.z]=n=a;break}}for(a=0;a!=i;++a)if(e[a].numFmtId===n)return a;return e[i]={numFmtId:n,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},i}function lV(e,t,r,n,a,i){try{n.cellNF&&(e.z=En[t])}catch(o){if(n.WTF)throw o}if(!(e.t==="z"&&!n.cellStyles)){if(e.t==="d"&&typeof e.v=="string"&&(e.v=As(e.v)),(!n||n.cellText!==!1)&&e.t!=="z")try{if(En[t]==null&&B0(Pbe[t]||"General",t),e.t==="e")e.w=e.w||lh[e.v];else if(t===0)if(e.t==="n")(e.v|0)===e.v?e.w=e.v.toString(10):e.w=db(e.v);else if(e.t==="d"){var l=Yi(e.v);(l|0)===l?e.w=l.toString(10):e.w=db(l)}else{if(e.v===void 0)return"";e.w=zm(e.v,v1)}else e.t==="d"?e.w=xd(t,Yi(e.v),v1):e.w=xd(t,e.v,v1)}catch(o){if(n.WTF)throw o}if(n.cellStyles&&r!=null)try{e.s=i.Fills[r],e.s.fgColor&&e.s.fgColor.theme&&!e.s.fgColor.rgb&&(e.s.fgColor.rgb=vw(a.themeElements.clrScheme[e.s.fgColor.theme].rgb,e.s.fgColor.tint||0),n.WTF&&(e.s.fgColor.raw_rgb=a.themeElements.clrScheme[e.s.fgColor.theme].rgb)),e.s.bgColor&&e.s.bgColor.theme&&(e.s.bgColor.rgb=vw(a.themeElements.clrScheme[e.s.bgColor.theme].rgb,e.s.bgColor.tint||0),n.WTF&&(e.s.bgColor.raw_rgb=a.themeElements.clrScheme[e.s.bgColor.theme].rgb))}catch(o){if(n.WTF&&i.Fills)throw o}}}function L4e(e,t,r){if(e&&e["!ref"]){var n=Ta(e["!ref"]);if(n.e.c<n.s.c||n.e.r<n.s.r)throw new Error("Bad range ("+r+"): "+e["!ref"])}}function R4e(e,t){var r=Ta(t);r.s.r<=r.e.r&&r.s.c<=r.e.c&&r.s.r>=0&&r.s.c>=0&&(e["!ref"]=Kn(r))}var F4e=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,B4e=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,U4e=/<(?:\w:)?hyperlink [^>]*>/mg,z4e=/"(\w*:\w*)"/,q4e=/<(?:\w:)?col\b[^>]*[\/]?>/g,H4e=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,$4e=/<(?:\w:)?pageMargins[^>]*\/>/g,oV=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,V4e=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,W4e=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function K4e(e,t,r,n,a,i,l){if(!e)return e;n||(n={"!id":{}});var o=t.dense?[]:{},c={s:{r:2e6,c:2e6},e:{r:0,c:0}},d="",f="",p=e.match(B4e);p?(d=e.slice(0,p.index),f=e.slice(p.index+p[0].length)):d=f=e;var y=d.match(oV);y?uA(y[0],o,a,r):(y=d.match(V4e))&&X4e(y[0],y[1]||"",o,a,r);var g=(d.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(g>0){var N=d.slice(g,g+50).match(z4e);N&&R4e(o,N[1])}var w=d.match(W4e);w&&w[1]&&o3e(w[1],a);var k=[];if(t.cellStyles){var S=d.match(q4e);S&&n3e(k,S)}p&&u3e(p[1],o,t,c,i,l);var O=f.match(H4e);O&&(o["!autofilter"]=s3e(O[0]));var E=[],D=f.match(F4e);if(D)for(g=0;g!=D.length;++g)E[g]=Ta(D[g].slice(D[g].indexOf('"')+1));var q=f.match(U4e);q&&e3e(o,q,n);var W=f.match($4e);if(W&&(o["!margins"]=t3e(Mn(W[0]))),!o["!ref"]&&c.e.c>=c.s.c&&c.e.r>=c.s.r&&(o["!ref"]=Kn(c)),t.sheetRows>0&&o["!ref"]){var R=Ta(o["!ref"]);t.sheetRows<=+R.e.r&&(R.e.r=t.sheetRows-1,R.e.r>c.e.r&&(R.e.r=c.e.r),R.e.r<R.s.r&&(R.s.r=R.e.r),R.e.c>c.e.c&&(R.e.c=c.e.c),R.e.c<R.s.c&&(R.s.c=R.e.c),o["!fullref"]=o["!ref"],o["!ref"]=Kn(R))}return k.length>0&&(o["!cols"]=k),E.length>0&&(o["!merges"]=E),o}function G4e(e){if(e.length===0)return"";for(var t='<mergeCells count="'+e.length+'">',r=0;r!=e.length;++r)t+='<mergeCell ref="'+Kn(e[r])+'"/>';return t+"</mergeCells>"}function uA(e,t,r,n){var a=Mn(e);r.Sheets[n]||(r.Sheets[n]={}),a.codeName&&(r.Sheets[n].CodeName=Ea(as(a.codeName)))}function X4e(e,t,r,n,a){uA(e.slice(0,e.indexOf(">")),r,n,a)}function Y4e(e,t,r,n,a){var i=!1,l={},o=null;if(n.bookType!=="xlsx"&&t.vbaraw){var c=t.SheetNames[r];try{t.Workbook&&(c=t.Workbook.Sheets[r].CodeName||c)}catch{}i=!0,l.codeName=Lu(Xa(c))}if(e&&e["!outline"]){var d={summaryBelow:1,summaryRight:1};e["!outline"].above&&(d.summaryBelow=0),e["!outline"].left&&(d.summaryRight=0),o=(o||"")+Nr("outlinePr",null,d)}!i&&!o||(a[a.length]=Nr("sheetPr",o,l))}var Z4e=["objects","scenarios","selectLockedCells","selectUnlockedCells"],Q4e=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function J4e(e){var t={sheet:1};return Z4e.forEach(function(r){e[r]!=null&&e[r]&&(t[r]="1")}),Q4e.forEach(function(r){e[r]!=null&&!e[r]&&(t[r]="0")}),e.password&&(t.password=aA(e.password).toString(16).toUpperCase()),Nr("sheetProtection",null,t)}function e3e(e,t,r){for(var n=Array.isArray(e),a=0;a!=t.length;++a){var i=Mn(as(t[a]),!0);if(!i.ref)return;var l=((r||{})["!id"]||[])[i.id];l?(i.Target=l.Target,i.location&&(i.Target+="#"+Ea(i.location))):(i.Target="#"+Ea(i.location),l={Target:i.Target,TargetMode:"Internal"}),i.Rel=l,i.tooltip&&(i.Tooltip=i.tooltip,delete i.tooltip);for(var o=Ta(i.ref),c=o.s.r;c<=o.e.r;++c)for(var d=o.s.c;d<=o.e.c;++d){var f=Tn({c:d,r:c});n?(e[c]||(e[c]=[]),e[c][d]||(e[c][d]={t:"z",v:void 0}),e[c][d].l=i):(e[f]||(e[f]={t:"z",v:void 0}),e[f].l=i)}}}function t3e(e){var t={};return["left","right","top","bottom","header","footer"].forEach(function(r){e[r]&&(t[r]=parseFloat(e[r]))}),t}function r3e(e){return km(e),Nr("pageMargins",null,e)}function n3e(e,t){for(var r=!1,n=0;n!=t.length;++n){var a=Mn(t[n],!0);a.hidden&&(a.hidden=Ss(a.hidden));var i=parseInt(a.min,10)-1,l=parseInt(a.max,10)-1;for(a.outlineLevel&&(a.level=+a.outlineLevel||0),delete a.min,delete a.max,a.width=+a.width,!r&&a.width&&(r=!0,sA(a.width)),cf(a);i<=l;)e[i++]=Es(a)}}function a3e(e,t){for(var r=["<cols>"],n,a=0;a!=t.length;++a)(n=t[a])&&(r[r.length]=Nr("col",null,Uk(a,n)));return r[r.length]="</cols>",r.join("")}function s3e(e){var t={ref:(e.match(/ref="([^"]*)"/)||[])[1]};return t}function i3e(e,t,r,n){var a=typeof e.ref=="string"?e.ref:Kn(e.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var i=r.Workbook.Names,l=ac(a);l.s.r==l.e.r&&(l.e.r=ac(t["!ref"]).e.r,a=Kn(l));for(var o=0;o<i.length;++o){var c=i[o];if(c.Name=="_xlnm._FilterDatabase"&&c.Sheet==n){c.Ref="'"+r.SheetNames[n]+"'!"+a;break}}return o==i.length&&i.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+a}),Nr("autoFilter",null,{ref:a})}var l3e=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function o3e(e,t){t.Views||(t.Views=[{}]),(e.match(l3e)||[]).forEach(function(r,n){var a=Mn(r);t.Views[n]||(t.Views[n]={}),+a.zoomScale&&(t.Views[n].zoom=+a.zoomScale),Ss(a.rightToLeft)&&(t.Views[n].RTL=!0)})}function c3e(e,t,r,n){var a={workbookViewId:"0"};return(((n||{}).Workbook||{}).Views||[])[0]&&(a.rightToLeft=n.Workbook.Views[0].RTL?"1":"0"),Nr("sheetViews",Nr("sheetView",null,a),{})}function d3e(e,t,r,n){if(e.c&&r["!comments"].push([t,e.c]),e.v===void 0&&typeof e.f!="string"||e.t==="z"&&!e.f)return"";var a="",i=e.t,l=e.v;if(e.t!=="z")switch(e.t){case"b":a=e.v?"1":"0";break;case"n":a=""+e.v;break;case"e":a=lh[e.v];break;case"d":n&&n.cellDates?a=As(e.v,-1).toISOString():(e=Es(e),e.t="n",a=""+(e.v=Yi(As(e.v)))),typeof e.z>"u"&&(e.z=En[14]);break;default:a=e.v;break}var o=Dl("v",Xa(a)),c={r:t},d=wf(n.cellXfs,e,n);switch(d!==0&&(c.s=d),e.t){case"n":break;case"d":c.t="d";break;case"b":c.t="b";break;case"e":c.t="e";break;case"z":break;default:if(e.v==null){delete e.t;break}if(e.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(n&&n.bookSST){o=Dl("v",""+dA(n.Strings,e.v,n.revStrings)),c.t="s";break}c.t="str";break}if(e.t!=i&&(e.t=i,e.v=l),typeof e.f=="string"&&e.f){var f=e.F&&e.F.slice(0,t.length)==t?{t:"array",ref:e.F}:null;o=Nr("f",Xa(e.f),f)+(e.v!=null?o:"")}return e.l&&r["!links"].push([t,e.l]),e.D&&(c.cm=1),Nr("c",o,c)}var u3e=(function(){var e=/<(?:\w+:)?c[ \/>]/,t=/<\/(?:\w+:)?row>/,r=/r=["']([^"']*)["']/,n=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,a=/ref=["']([^"']*)["']/,i=ub("v"),l=ub("f");return function(c,d,f,p,y,g){for(var N=0,w="",k=[],S=[],O=0,E=0,D=0,q="",W,R,U=0,z=0,Z,H,K=0,J=0,ae=Array.isArray(g.CellXf),se,ue=[],fe=[],ke=Array.isArray(d),_e=[],Le={},xe=!1,B=!!f.sheetStubs,ee=c.split(t),Y=0,re=ee.length;Y!=re;++Y){w=ee[Y].trim();var Q=w.length;if(Q!==0){var Ce=0;e:for(N=0;N<Q;++N)switch(w[N]){case">":if(w[N-1]!="/"){++N;break e}if(f&&f.cellStyles){if(R=Mn(w.slice(Ce,N),!0),U=R.r!=null?parseInt(R.r,10):U+1,z=-1,f.sheetRows&&f.sheetRows<U)continue;Le={},xe=!1,R.ht&&(xe=!0,Le.hpt=parseFloat(R.ht),Le.hpx=X1(Le.hpt)),R.hidden=="1"&&(xe=!0,Le.hidden=!0),R.outlineLevel!=null&&(xe=!0,Le.level=+R.outlineLevel),xe&&(_e[U-1]=Le)}break;case"<":Ce=N;break}if(Ce>=N)break;if(R=Mn(w.slice(Ce,N),!0),U=R.r!=null?parseInt(R.r,10):U+1,z=-1,!(f.sheetRows&&f.sheetRows<U)){p.s.r>U-1&&(p.s.r=U-1),p.e.r<U-1&&(p.e.r=U-1),f&&f.cellStyles&&(Le={},xe=!1,R.ht&&(xe=!0,Le.hpt=parseFloat(R.ht),Le.hpx=X1(Le.hpt)),R.hidden=="1"&&(xe=!0,Le.hidden=!0),R.outlineLevel!=null&&(xe=!0,Le.level=+R.outlineLevel),xe&&(_e[U-1]=Le)),k=w.slice(N).split(e);for(var me=0;me!=k.length&&k[me].trim().charAt(0)=="<";++me);for(k=k.slice(me),N=0;N!=k.length;++N)if(w=k[N].trim(),w.length!==0){if(S=w.match(r),O=N,E=0,D=0,w="<c "+(w.slice(0,1)=="<"?">":"")+w,S!=null&&S.length===2){for(O=0,q=S[1],E=0;E!=q.length&&!((D=q.charCodeAt(E)-64)<1||D>26);++E)O=26*O+D;--O,z=O}else++z;for(E=0;E!=w.length&&w.charCodeAt(E)!==62;++E);if(++E,R=Mn(w.slice(0,E),!0),R.r||(R.r=Tn({r:U-1,c:z})),q=w.slice(E),W={t:""},(S=q.match(i))!=null&&S[1]!==""&&(W.v=Ea(S[1])),f.cellFormula){if((S=q.match(l))!=null&&S[1]!==""){if(W.f=Ea(as(S[1])).replace(/\r\n/g,`
`),f.xlfn||(W.f=pD(W.f)),S[0].indexOf('t="array"')>-1)W.F=(q.match(a)||[])[1],W.F.indexOf(":")>-1&&ue.push([Ta(W.F),W.F]);else if(S[0].indexOf('t="shared"')>-1){H=Mn(S[0]);var ie=Ea(as(S[1]));f.xlfn||(ie=pD(ie)),fe[parseInt(H.si,10)]=[H,ie,R.r]}}else(S=q.match(/<f[^>]*\/>/))&&(H=Mn(S[0]),fe[H.si]&&(W.f=l5e(fe[H.si][1],fe[H.si][2],R.r)));var je=Ks(R.r);for(E=0;E<ue.length;++E)je.r>=ue[E][0].s.r&&je.r<=ue[E][0].e.r&&je.c>=ue[E][0].s.c&&je.c<=ue[E][0].e.c&&(W.F=ue[E][1])}if(R.t==null&&W.v===void 0)if(W.f||W.F)W.v=0,W.t="n";else if(B)W.t="z";else continue;else W.t=R.t||"n";switch(p.s.c>z&&(p.s.c=z),p.e.c<z&&(p.e.c=z),W.t){case"n":if(W.v==""||W.v==null){if(!B)continue;W.t="z"}else W.v=parseFloat(W.v);break;case"s":if(typeof W.v>"u"){if(!B)continue;W.t="z"}else Z=Pg[parseInt(W.v,10)],W.v=Z.t,W.r=Z.r,f.cellHTML&&(W.h=Z.h);break;case"str":W.t="s",W.v=W.v!=null?as(W.v):"",f.cellHTML&&(W.h=HC(W.v));break;case"inlineStr":S=q.match(n),W.t="s",S!=null&&(Z=nA(S[1]))?(W.v=Z.t,f.cellHTML&&(W.h=Z.h)):W.v="";break;case"b":W.v=Ss(W.v);break;case"d":f.cellDates?W.v=As(W.v,1):(W.v=Yi(As(W.v,1)),W.t="n");break;case"e":(!f||f.cellText!==!1)&&(W.w=W.v),W.v=d$[W.v];break}if(K=J=0,se=null,ae&&R.s!==void 0&&(se=g.CellXf[R.s],se!=null&&(se.numFmtId!=null&&(K=se.numFmtId),f.cellStyles&&se.fillId!=null&&(J=se.fillId))),lV(W,K,J,f,y,g),f.cellDates&&ae&&W.t=="n"&&pp(En[K])&&(W.t="d",W.v=Lk(W.v)),R.cm&&f.xlmeta){var be=(f.xlmeta.Cell||[])[+R.cm-1];be&&be.type=="XLDAPR"&&(W.D=!0)}if(ke){var le=Ks(R.r);d[le.r]||(d[le.r]=[]),d[le.r][le.c]=W}else d[R.r]=W}}}}_e.length>0&&(d["!rows"]=_e)}})();function h3e(e,t,r,n){var a=[],i=[],l=Ta(e["!ref"]),o="",c,d="",f=[],p=0,y=0,g=e["!rows"],N=Array.isArray(e),w={r:d},k,S=-1;for(y=l.s.c;y<=l.e.c;++y)f[y]=Ws(y);for(p=l.s.r;p<=l.e.r;++p){for(i=[],d=Si(p),y=l.s.c;y<=l.e.c;++y){c=f[y]+d;var O=N?(e[p]||[])[y]:e[c];O!==void 0&&(o=d3e(O,c,e,t))!=null&&i.push(o)}(i.length>0||g&&g[p])&&(w={r:d},g&&g[p]&&(k=g[p],k.hidden&&(w.hidden=1),S=-1,k.hpx?S=bb(k.hpx):k.hpt&&(S=k.hpt),S>-1&&(w.ht=S,w.customHeight=1),k.level&&(w.outlineLevel=k.level)),a[a.length]=Nr("row",i.join(""),w))}if(g)for(;p<g.length;++p)g&&g[p]&&(w={r:p+1},k=g[p],k.hidden&&(w.hidden=1),S=-1,k.hpx?S=bb(k.hpx):k.hpt&&(S=k.hpt),S>-1&&(w.ht=S,w.customHeight=1),k.level&&(w.outlineLevel=k.level),a[a.length]=Nr("row","",w));return a.join("")}function cV(e,t,r,n){var a=[ji,Nr("worksheet",null,{xmlns:ex[0],"xmlns:r":Xi.r})],i=r.SheetNames[e],l=0,o="",c=r.Sheets[i];c==null&&(c={});var d=c["!ref"]||"A1",f=Ta(d);if(f.e.c>16383||f.e.r>1048575){if(t.WTF)throw new Error("Range "+d+" exceeds format limit A1:XFD1048576");f.e.c=Math.min(f.e.c,16383),f.e.r=Math.min(f.e.c,1048575),d=Kn(f)}n||(n={}),c["!comments"]=[];var p=[];Y4e(c,r,e,t,a),a[a.length]=Nr("dimension",null,{ref:d}),a[a.length]=c3e(c,t,e,r),t.sheetFormat&&(a[a.length]=Nr("sheetFormatPr",null,{defaultRowHeight:t.sheetFormat.defaultRowHeight||"16",baseColWidth:t.sheetFormat.baseColWidth||"10",outlineLevelRow:t.sheetFormat.outlineLevelRow||"7"})),c["!cols"]!=null&&c["!cols"].length>0&&(a[a.length]=a3e(c,c["!cols"])),a[l=a.length]="<sheetData/>",c["!links"]=[],c["!ref"]!=null&&(o=h3e(c,t),o.length>0&&(a[a.length]=o)),a.length>l+1&&(a[a.length]="</sheetData>",a[l]=a[l].replace("/>",">")),c["!protect"]&&(a[a.length]=J4e(c["!protect"])),c["!autofilter"]!=null&&(a[a.length]=i3e(c["!autofilter"],c,r,e)),c["!merges"]!=null&&c["!merges"].length>0&&(a[a.length]=G4e(c["!merges"]));var y=-1,g,N=-1;return c["!links"].length>0&&(a[a.length]="<hyperlinks>",c["!links"].forEach(function(w){w[1].Target&&(g={ref:w[0]},w[1].Target.charAt(0)!="#"&&(N=Wa(n,-1,Xa(w[1].Target).replace(/#.*$/,""),ia.HLINK),g["r:id"]="rId"+N),(y=w[1].Target.indexOf("#"))>-1&&(g.location=Xa(w[1].Target.slice(y+1))),w[1].Tooltip&&(g.tooltip=Xa(w[1].Tooltip)),a[a.length]=Nr("hyperlink",null,g))}),a[a.length]="</hyperlinks>"),delete c["!links"],c["!margins"]!=null&&(a[a.length]=r3e(c["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&(a[a.length]=Dl("ignoredErrors",Nr("ignoredError",null,{numberStoredAsText:1,sqref:d}))),p.length>0&&(N=Wa(n,-1,"../drawings/drawing"+(e+1)+".xml",ia.DRAW),a[a.length]=Nr("drawing",null,{"r:id":"rId"+N}),c["!drawing"]=p),c["!comments"].length>0&&(N=Wa(n,-1,"../drawings/vmlDrawing"+(e+1)+".vml",ia.VML),a[a.length]=Nr("legacyDrawing",null,{"r:id":"rId"+N}),c["!legacy"]=N),a.length>1&&(a[a.length]="</worksheet>",a[1]=a[1].replace("/>",">")),a.join("")}function f3e(e,t){var r={},n=e.l+t;r.r=e.read_shift(4),e.l+=4;var a=e.read_shift(2);e.l+=1;var i=e.read_shift(1);return e.l=n,i&7&&(r.level=i&7),i&16&&(r.hidden=!0),i&32&&(r.hpt=a/20),r}function m3e(e,t,r){var n=Bt(145),a=(r["!rows"]||[])[e]||{};n.write_shift(4,e),n.write_shift(4,0);var i=320;a.hpx?i=bb(a.hpx)*20:a.hpt&&(i=a.hpt*20),n.write_shift(2,i),n.write_shift(1,0);var l=0;a.level&&(l|=a.level),a.hidden&&(l|=16),(a.hpx||a.hpt)&&(l|=32),n.write_shift(1,l),n.write_shift(1,0);var o=0,c=n.l;n.l+=4;for(var d={r:e,c:0},f=0;f<16;++f)if(!(t.s.c>f+1<<10||t.e.c<f<<10)){for(var p=-1,y=-1,g=f<<10;g<f+1<<10;++g){d.c=g;var N=Array.isArray(r)?(r[d.r]||[])[d.c]:r[Tn(d)];N&&(p<0&&(p=g),y=g)}p<0||(++o,n.write_shift(4,p),n.write_shift(4,y))}var w=n.l;return n.l=c,n.write_shift(4,o),n.l=w,n.length>n.l?n.slice(0,n.l):n}function x3e(e,t,r,n){var a=m3e(n,r,t);(a.length>17||(t["!rows"]||[])[n])&&or(e,0,a)}var p3e=ax,g3e=vp;function b3e(){}function v3e(e,t){var r={},n=e[e.l];return++e.l,r.above=!(n&64),r.left=!(n&128),e.l+=18,r.name=kve(e),r}function y3e(e,t,r){r==null&&(r=Bt(84+4*e.length));var n=192;t&&(t.above&&(n&=-65),t.left&&(n&=-129)),r.write_shift(1,n);for(var a=1;a<3;++a)r.write_shift(1,0);return pw({auto:1},r),r.write_shift(-4,-1),r.write_shift(-4,-1),s$(e,r),r.slice(0,r.l)}function w3e(e){var t=yd(e);return[t]}function k3e(e,t,r){return r==null&&(r=Bt(8)),tx(t,r)}function N3e(e){var t=rx(e);return[t]}function _3e(e,t,r){return r==null&&(r=Bt(4)),nx(t,r)}function S3e(e){var t=yd(e),r=e.read_shift(1);return[t,r,"b"]}function j3e(e,t,r){return r==null&&(r=Bt(9)),tx(t,r),r.write_shift(1,e.v?1:0),r}function C3e(e){var t=rx(e),r=e.read_shift(1);return[t,r,"b"]}function A3e(e,t,r){return r==null&&(r=Bt(5)),nx(t,r),r.write_shift(1,e.v?1:0),r}function E3e(e){var t=yd(e),r=e.read_shift(1);return[t,r,"e"]}function T3e(e,t,r){return r==null&&(r=Bt(9)),tx(t,r),r.write_shift(1,e.v),r}function O3e(e){var t=rx(e),r=e.read_shift(1);return[t,r,"e"]}function P3e(e,t,r){return r==null&&(r=Bt(8)),nx(t,r),r.write_shift(1,e.v),r.write_shift(2,0),r.write_shift(1,0),r}function I3e(e){var t=yd(e),r=e.read_shift(4);return[t,r,"s"]}function D3e(e,t,r){return r==null&&(r=Bt(12)),tx(t,r),r.write_shift(4,t.v),r}function M3e(e){var t=rx(e),r=e.read_shift(4);return[t,r,"s"]}function L3e(e,t,r){return r==null&&(r=Bt(8)),nx(t,r),r.write_shift(4,t.v),r}function R3e(e){var t=yd(e),r=ro(e);return[t,r,"n"]}function F3e(e,t,r){return r==null&&(r=Bt(16)),tx(t,r),Hm(e.v,r),r}function dV(e){var t=rx(e),r=ro(e);return[t,r,"n"]}function B3e(e,t,r){return r==null&&(r=Bt(12)),nx(t,r),Hm(e.v,r),r}function U3e(e){var t=yd(e),r=QC(e);return[t,r,"n"]}function z3e(e,t,r){return r==null&&(r=Bt(12)),tx(t,r),i$(e.v,r),r}function q3e(e){var t=rx(e),r=QC(e);return[t,r,"n"]}function H3e(e,t,r){return r==null&&(r=Bt(8)),nx(t,r),i$(e.v,r),r}function $3e(e){var t=yd(e),r=XC(e);return[t,r,"is"]}function V3e(e){var t=yd(e),r=ao(e);return[t,r,"str"]}function W3e(e,t,r){return r==null&&(r=Bt(12+4*e.v.length)),tx(t,r),yl(e.v,r),r.length>r.l?r.slice(0,r.l):r}function K3e(e){var t=rx(e),r=ao(e);return[t,r,"str"]}function G3e(e,t,r){return r==null&&(r=Bt(8+4*e.v.length)),nx(t,r),yl(e.v,r),r.length>r.l?r.slice(0,r.l):r}function X3e(e,t,r){var n=e.l+t,a=yd(e);a.r=r["!row"];var i=e.read_shift(1),l=[a,i,"b"];if(r.cellFormula){e.l+=2;var o=Bk(e,n-e.l,r);l[3]=Jl(o,null,a,r.supbooks,r)}else e.l=n;return l}function Y3e(e,t,r){var n=e.l+t,a=yd(e);a.r=r["!row"];var i=e.read_shift(1),l=[a,i,"e"];if(r.cellFormula){e.l+=2;var o=Bk(e,n-e.l,r);l[3]=Jl(o,null,a,r.supbooks,r)}else e.l=n;return l}function Z3e(e,t,r){var n=e.l+t,a=yd(e);a.r=r["!row"];var i=ro(e),l=[a,i,"n"];if(r.cellFormula){e.l+=2;var o=Bk(e,n-e.l,r);l[3]=Jl(o,null,a,r.supbooks,r)}else e.l=n;return l}function Q3e(e,t,r){var n=e.l+t,a=yd(e);a.r=r["!row"];var i=ao(e),l=[a,i,"str"];if(r.cellFormula){e.l+=2;var o=Bk(e,n-e.l,r);l[3]=Jl(o,null,a,r.supbooks,r)}else e.l=n;return l}var J3e=ax,eNe=vp;function tNe(e,t){return t==null&&(t=Bt(4)),t.write_shift(4,e),t}function rNe(e,t){var r=e.l+t,n=ax(e),a=YC(e),i=ao(e),l=ao(e),o=ao(e);e.l=r;var c={rfx:n,relId:a,loc:i,display:o};return l&&(c.Tooltip=l),c}function nNe(e,t){var r=Bt(50+4*(e[1].Target.length+(e[1].Tooltip||"").length));vp({s:Ks(e[0]),e:Ks(e[0])},r),ZC("rId"+t,r);var n=e[1].Target.indexOf("#"),a=n==-1?"":e[1].Target.slice(n+1);return yl(a||"",r),yl(e[1].Tooltip||"",r),yl("",r),r.slice(0,r.l)}function aNe(){}function sNe(e,t,r){var n=e.l+t,a=l$(e),i=e.read_shift(1),l=[a];if(l[2]=i,r.cellFormula){var o=E4e(e,n-e.l,r);l[1]=o}else e.l=n;return l}function iNe(e,t,r){var n=e.l+t,a=ax(e),i=[a];if(r.cellFormula){var l=O4e(e,n-e.l,r);i[1]=l,e.l=n}else e.l=n;return i}function lNe(e,t,r){r==null&&(r=Bt(18));var n=Uk(e,t);r.write_shift(-4,e),r.write_shift(-4,e),r.write_shift(4,(n.width||10)*256),r.write_shift(4,0);var a=0;return t.hidden&&(a|=1),typeof n.width=="number"&&(a|=2),t.level&&(a|=t.level<<8),r.write_shift(2,a),r}var uV=["left","right","top","bottom","header","footer"];function oNe(e){var t={};return uV.forEach(function(r){t[r]=ro(e)}),t}function cNe(e,t){return t==null&&(t=Bt(48)),km(e),uV.forEach(function(r){Hm(e[r],t)}),t}function dNe(e){var t=e.read_shift(2);return e.l+=28,{RTL:t&32}}function uNe(e,t,r){r==null&&(r=Bt(30));var n=924;return(((t||{}).Views||[])[0]||{}).RTL&&(n|=32),r.write_shift(2,n),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(2,0),r.write_shift(2,100),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(4,0),r}function hNe(e){var t=Bt(24);return t.write_shift(4,4),t.write_shift(4,1),vp(e,t),t}function fNe(e,t){return t==null&&(t=Bt(66)),t.write_shift(2,e.password?aA(e.password):0),t.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(r){r[1]?t.write_shift(4,e[r[0]]!=null&&!e[r[0]]?1:0):t.write_shift(4,e[r[0]]!=null&&e[r[0]]?0:1)}),t}function mNe(){}function xNe(){}function pNe(e,t,r,n,a,i,l){if(!e)return e;var o=t||{};n||(n={"!id":{}});var c=o.dense?[]:{},d,f={s:{r:2e6,c:2e6},e:{r:0,c:0}},p=!1,y=!1,g,N,w,k,S,O,E,D,q,W=[];o.biff=12,o["!row"]=0;var R=0,U=!1,z=[],Z={},H=o.supbooks||a.supbooks||[[]];if(H.sharedf=Z,H.arrayf=z,H.SheetNames=a.SheetNames||a.Sheets.map(function(ke){return ke.name}),!o.supbooks&&(o.supbooks=H,a.Names))for(var K=0;K<a.Names.length;++K)H[0][K+1]=a.Names[K];var J=[],ae=[],se=!1;vb[16]={n:"BrtShortReal",f:dV};var ue;if(ih(e,function(_e,Le,xe){if(!y)switch(xe){case 148:d=_e;break;case 0:g=_e,o.sheetRows&&o.sheetRows<=g.r&&(y=!0),D=Si(k=g.r),o["!row"]=g.r,(_e.hidden||_e.hpt||_e.level!=null)&&(_e.hpt&&(_e.hpx=X1(_e.hpt)),ae[_e.r]=_e);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(N={t:_e[2]},_e[2]){case"n":N.v=_e[1];break;case"s":E=Pg[_e[1]],N.v=E.t,N.r=E.r;break;case"b":N.v=!!_e[1];break;case"e":N.v=_e[1],o.cellText!==!1&&(N.w=lh[N.v]);break;case"str":N.t="s",N.v=_e[1];break;case"is":N.t="s",N.v=_e[1].t;break}if((w=l.CellXf[_e[0].iStyleRef])&&lV(N,w.numFmtId,null,o,i,l),S=_e[0].c==-1?S+1:_e[0].c,o.dense?(c[k]||(c[k]=[]),c[k][S]=N):c[Ws(S)+D]=N,o.cellFormula){for(U=!1,R=0;R<z.length;++R){var B=z[R];g.r>=B[0].s.r&&g.r<=B[0].e.r&&S>=B[0].s.c&&S<=B[0].e.c&&(N.F=Kn(B[0]),U=!0)}!U&&_e.length>3&&(N.f=_e[3])}if(f.s.r>g.r&&(f.s.r=g.r),f.s.c>S&&(f.s.c=S),f.e.r<g.r&&(f.e.r=g.r),f.e.c<S&&(f.e.c=S),o.cellDates&&w&&N.t=="n"&&pp(En[w.numFmtId])){var ee=rm(N.v);ee&&(N.t="d",N.v=new Date(ee.y,ee.m-1,ee.d,ee.H,ee.M,ee.S,ee.u))}ue&&(ue.type=="XLDAPR"&&(N.D=!0),ue=void 0);break;case 1:case 12:if(!o.sheetStubs||p)break;N={t:"z",v:void 0},S=_e[0].c==-1?S+1:_e[0].c,o.dense?(c[k]||(c[k]=[]),c[k][S]=N):c[Ws(S)+D]=N,f.s.r>g.r&&(f.s.r=g.r),f.s.c>S&&(f.s.c=S),f.e.r<g.r&&(f.e.r=g.r),f.e.c<S&&(f.e.c=S),ue&&(ue.type=="XLDAPR"&&(N.D=!0),ue=void 0);break;case 176:W.push(_e);break;case 49:ue=((o.xlmeta||{}).Cell||[])[_e-1];break;case 494:var Y=n["!id"][_e.relId];for(Y?(_e.Target=Y.Target,_e.loc&&(_e.Target+="#"+_e.loc),_e.Rel=Y):_e.relId==""&&(_e.Target="#"+_e.loc),k=_e.rfx.s.r;k<=_e.rfx.e.r;++k)for(S=_e.rfx.s.c;S<=_e.rfx.e.c;++S)o.dense?(c[k]||(c[k]=[]),c[k][S]||(c[k][S]={t:"z",v:void 0}),c[k][S].l=_e):(O=Tn({c:S,r:k}),c[O]||(c[O]={t:"z",v:void 0}),c[O].l=_e);break;case 426:if(!o.cellFormula)break;z.push(_e),q=o.dense?c[k][S]:c[Ws(S)+D],q.f=Jl(_e[1],f,{r:g.r,c:S},H,o),q.F=Kn(_e[0]);break;case 427:if(!o.cellFormula)break;Z[Tn(_e[0].s)]=_e[1],q=o.dense?c[k][S]:c[Ws(S)+D],q.f=Jl(_e[1],f,{r:g.r,c:S},H,o);break;case 60:if(!o.cellStyles)break;for(;_e.e>=_e.s;)J[_e.e--]={width:_e.w/256,hidden:!!(_e.flags&1),level:_e.level},se||(se=!0,sA(_e.w/256)),cf(J[_e.e+1]);break;case 161:c["!autofilter"]={ref:Kn(_e)};break;case 476:c["!margins"]=_e;break;case 147:a.Sheets[r]||(a.Sheets[r]={}),_e.name&&(a.Sheets[r].CodeName=_e.name),(_e.above||_e.left)&&(c["!outline"]={above:_e.above,left:_e.left});break;case 137:a.Views||(a.Views=[{}]),a.Views[0]||(a.Views[0]={}),_e.RTL&&(a.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:p=!0;break;case 36:p=!1;break;case 37:p=!0;break;case 38:p=!1;break;default:if(!Le.T){if(!p||o.WTF)throw new Error("Unexpected record 0x"+xe.toString(16))}}},o),delete o.supbooks,delete o["!row"],!c["!ref"]&&(f.s.r<2e6||d&&(d.e.r>0||d.e.c>0||d.s.r>0||d.s.c>0))&&(c["!ref"]=Kn(d||f)),o.sheetRows&&c["!ref"]){var fe=Ta(c["!ref"]);o.sheetRows<=+fe.e.r&&(fe.e.r=o.sheetRows-1,fe.e.r>f.e.r&&(fe.e.r=f.e.r),fe.e.r<fe.s.r&&(fe.s.r=fe.e.r),fe.e.c>f.e.c&&(fe.e.c=f.e.c),fe.e.c<fe.s.c&&(fe.s.c=fe.e.c),c["!fullref"]=c["!ref"],c["!ref"]=Kn(fe))}return W.length>0&&(c["!merges"]=W),J.length>0&&(c["!cols"]=J),ae.length>0&&(c["!rows"]=ae),c}function gNe(e,t,r,n,a,i,l){if(t.v===void 0)return!1;var o="";switch(t.t){case"b":o=t.v?"1":"0";break;case"d":t=Es(t),t.z=t.z||En[14],t.v=Yi(As(t.v)),t.t="n";break;case"n":case"e":o=""+t.v;break;default:o=t.v;break}var c={r,c:n};switch(c.s=wf(a.cellXfs,t,a),t.l&&i["!links"].push([Tn(c),t.l]),t.c&&i["!comments"].push([Tn(c),t.c]),t.t){case"s":case"str":return a.bookSST?(o=dA(a.Strings,t.v,a.revStrings),c.t="s",c.v=o,l?or(e,18,L3e(t,c)):or(e,7,D3e(t,c))):(c.t="str",l?or(e,17,G3e(t,c)):or(e,6,W3e(t,c))),!0;case"n":return t.v==(t.v|0)&&t.v>-1e3&&t.v<1e3?l?or(e,13,H3e(t,c)):or(e,2,z3e(t,c)):l?or(e,16,B3e(t,c)):or(e,5,F3e(t,c)),!0;case"b":return c.t="b",l?or(e,15,A3e(t,c)):or(e,4,j3e(t,c)),!0;case"e":return c.t="e",l?or(e,14,P3e(t,c)):or(e,3,T3e(t,c)),!0}return l?or(e,12,_3e(t,c)):or(e,1,k3e(t,c)),!0}function bNe(e,t,r,n){var a=Ta(t["!ref"]||"A1"),i,l="",o=[];or(e,145);var c=Array.isArray(t),d=a.e.r;t["!rows"]&&(d=Math.max(a.e.r,t["!rows"].length-1));for(var f=a.s.r;f<=d;++f){l=Si(f),x3e(e,t,a,f);var p=!1;if(f<=a.e.r)for(var y=a.s.c;y<=a.e.c;++y){f===a.s.r&&(o[y]=Ws(y)),i=o[y]+l;var g=c?(t[f]||[])[y]:t[i];if(!g){p=!1;continue}p=gNe(e,g,f,y,n,t,p)}}or(e,146)}function vNe(e,t){!t||!t["!merges"]||(or(e,177,tNe(t["!merges"].length)),t["!merges"].forEach(function(r){or(e,176,eNe(r))}),or(e,178))}function yNe(e,t){!t||!t["!cols"]||(or(e,390),t["!cols"].forEach(function(r,n){r&&or(e,60,lNe(n,r))}),or(e,391))}function wNe(e,t){!t||!t["!ref"]||(or(e,648),or(e,649,hNe(Ta(t["!ref"]))),or(e,650))}function kNe(e,t,r){t["!links"].forEach(function(n){if(n[1].Target){var a=Wa(r,-1,n[1].Target.replace(/#.*$/,""),ia.HLINK);or(e,494,nNe(n,a))}}),delete t["!links"]}function NNe(e,t,r,n){if(t["!comments"].length>0){var a=Wa(n,-1,"../drawings/vmlDrawing"+(r+1)+".vml",ia.VML);or(e,551,ZC("rId"+a)),t["!legacy"]=a}}function _Ne(e,t,r,n){if(t["!autofilter"]){var a=t["!autofilter"],i=typeof a.ref=="string"?a.ref:Kn(a.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var l=r.Workbook.Names,o=ac(i);o.s.r==o.e.r&&(o.e.r=ac(t["!ref"]).e.r,i=Kn(o));for(var c=0;c<l.length;++c){var d=l[c];if(d.Name=="_xlnm._FilterDatabase"&&d.Sheet==n){d.Ref="'"+r.SheetNames[n]+"'!"+i;break}}c==l.length&&l.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+i}),or(e,161,vp(Ta(i))),or(e,162)}}function SNe(e,t,r){or(e,133),or(e,137,uNe(t,r)),or(e,138),or(e,134)}function jNe(e,t){t["!protect"]&&or(e,535,fNe(t["!protect"]))}function CNe(e,t,r,n){var a=nc(),i=r.SheetNames[e],l=r.Sheets[i]||{},o=i;try{r&&r.Workbook&&(o=r.Workbook.Sheets[e].CodeName||o)}catch{}var c=Ta(l["!ref"]||"A1");if(c.e.c>16383||c.e.r>1048575){if(t.WTF)throw new Error("Range "+(l["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");c.e.c=Math.min(c.e.c,16383),c.e.r=Math.min(c.e.c,1048575)}return l["!links"]=[],l["!comments"]=[],or(a,129),(r.vbaraw||l["!outline"])&&or(a,147,y3e(o,l["!outline"])),or(a,148,g3e(c)),SNe(a,l,r.Workbook),yNe(a,l),bNe(a,l,e,t),jNe(a,l),_Ne(a,l,r,e),vNe(a,l),kNe(a,l,n),l["!margins"]&&or(a,476,cNe(l["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&wNe(a,l),NNe(a,l,e,n),or(a,130),a.end()}function ANe(e){var t=[],r=e.match(/^<c:numCache>/),n;(e.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(i){var l=i.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);l&&(t[+l[1]]=r?+l[2]:l[2])});var a=Ea((e.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(e.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(i){n=i.replace(/<.*?>/g,"")}),[t,a,n]}function ENe(e,t,r,n,a,i){var l=i||{"!type":"chart"};if(!e)return i;var o=0,c=0,d="A",f={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(e.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(p){var y=ANe(p);f.s.r=f.s.c=0,f.e.c=o,d=Ws(o),y[0].forEach(function(g,N){l[d+Si(N)]={t:"n",v:g,z:y[1]},c=N}),f.e.r<c&&(f.e.r=c),++o}),o>0&&(l["!ref"]=Kn(f)),l}function TNe(e,t,r,n,a){if(!e)return e;n||(n={"!id":{}});var i={"!type":"chart","!drawel":null,"!rel":""},l,o=e.match(oV);return o&&uA(o[0],i,a,r),(l=e.match(/drawing r:id="(.*?)"/))&&(i["!rel"]=l[1]),n["!id"][i["!rel"]]&&(i["!drawel"]=n["!id"][i["!rel"]]),i}function ONe(e,t){e.l+=10;var r=ao(e);return{name:r}}function PNe(e,t,r,n,a){if(!e)return e;n||(n={"!id":{}});var i={"!type":"chart","!drawel":null,"!rel":""},l=!1;return ih(e,function(c,d,f){switch(f){case 550:i["!rel"]=c;break;case 651:a.Sheets[r]||(a.Sheets[r]={}),c.name&&(a.Sheets[r].CodeName=c.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:l=!0;break;case 36:l=!1;break;case 37:break;case 38:break;default:if(!(d.T>0)){if(!(d.T<0)){if(!l||t.WTF)throw new Error("Unexpected record 0x"+f.toString(16))}}}},t),n["!id"][i["!rel"]]&&(i["!drawel"]=n["!id"][i["!rel"]]),i}var hA=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],INe=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],DNe=[],MNe=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function wD(e,t){for(var r=0;r!=e.length;++r)for(var n=e[r],a=0;a!=t.length;++a){var i=t[a];if(n[i[0]]==null)n[i[0]]=i[1];else switch(i[2]){case"bool":typeof n[i[0]]=="string"&&(n[i[0]]=Ss(n[i[0]]));break;case"int":typeof n[i[0]]=="string"&&(n[i[0]]=parseInt(n[i[0]],10));break}}}function kD(e,t){for(var r=0;r!=t.length;++r){var n=t[r];if(e[n[0]]==null)e[n[0]]=n[1];else switch(n[2]){case"bool":typeof e[n[0]]=="string"&&(e[n[0]]=Ss(e[n[0]]));break;case"int":typeof e[n[0]]=="string"&&(e[n[0]]=parseInt(e[n[0]],10));break}}}function hV(e){kD(e.WBProps,hA),kD(e.CalcPr,MNe),wD(e.WBView,INe),wD(e.Sheets,DNe),v1.date1904=Ss(e.WBProps.date1904)}function LNe(e){return!e.Workbook||!e.Workbook.WBProps?"false":Ss(e.Workbook.WBProps.date1904)?"true":"false"}var RNe="][*?/\\".split("");function fV(e,t){if(e.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return RNe.forEach(function(n){if(e.indexOf(n)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}function FNe(e,t,r){e.forEach(function(n,a){fV(n);for(var i=0;i<a;++i)if(n==e[i])throw new Error("Duplicate Sheet Name: "+n);if(r){var l=t&&t[a]&&t[a].CodeName||n;if(l.charCodeAt(0)==95&&l.length>22)throw new Error("Bad Code Name: Worksheet"+l)}})}function BNe(e){if(!e||!e.SheetNames||!e.Sheets)throw new Error("Invalid Workbook");if(!e.SheetNames.length)throw new Error("Workbook is empty");var t=e.Workbook&&e.Workbook.Sheets||[];FNe(e.SheetNames,t,!!e.vbaraw);for(var r=0;r<e.SheetNames.length;++r)L4e(e.Sheets[e.SheetNames[r]],e.SheetNames[r],r)}var UNe=/<\w+:workbook/;function zNe(e,t){if(!e)throw new Error("Could not find file");var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},n=!1,a="xmlns",i={},l=0;if(e.replace(io,function(c,d){var f=Mn(c);switch(Ku(f[0])){case"<?xml":break;case"<workbook":c.match(UNe)&&(a="xmlns"+c.match(/<(\w+):/)[1]),r.xmlns=f[a];break;case"</workbook>":break;case"<fileVersion":delete f[0],r.AppVersion=f;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":hA.forEach(function(p){if(f[p[0]]!=null)switch(p[2]){case"bool":r.WBProps[p[0]]=Ss(f[p[0]]);break;case"int":r.WBProps[p[0]]=parseInt(f[p[0]],10);break;default:r.WBProps[p[0]]=f[p[0]]}}),f.codeName&&(r.WBProps.CodeName=as(f.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete f[0],r.WBView.push(f);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(f.state){case"hidden":f.Hidden=1;break;case"veryHidden":f.Hidden=2;break;default:f.Hidden=0}delete f.state,f.name=Ea(as(f.name)),delete f[0],r.Sheets.push(f);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":n=!0;break;case"</definedNames>":n=!1;break;case"<definedName":i={},i.Name=as(f.name),f.comment&&(i.Comment=f.comment),f.localSheetId&&(i.Sheet=+f.localSheetId),Ss(f.hidden||"0")&&(i.Hidden=!0),l=d+c.length;break;case"</definedName>":i.Ref=Ea(as(e.slice(l,d))),r.Names.push(i);break;case"<definedName/>":break;case"<calcPr":delete f[0],r.CalcPr=f;break;case"<calcPr/>":delete f[0],r.CalcPr=f;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":n=!0;break;case"</AlternateContent>":n=!1;break;case"<revisionPtr":break;default:if(!n&&t.WTF)throw new Error("unrecognized "+f[0]+" in workbook")}return c}),ex.indexOf(r.xmlns)===-1)throw new Error("Unknown Namespace: "+r.xmlns);return hV(r),r}function mV(e){var t=[ji];t[t.length]=Nr("workbook",null,{xmlns:ex[0],"xmlns:r":Xi.r});var r=e.Workbook&&(e.Workbook.Names||[]).length>0,n={codeName:"ThisWorkbook"};e.Workbook&&e.Workbook.WBProps&&(hA.forEach(function(o){e.Workbook.WBProps[o[0]]!=null&&e.Workbook.WBProps[o[0]]!=o[1]&&(n[o[0]]=e.Workbook.WBProps[o[0]])}),e.Workbook.WBProps.CodeName&&(n.codeName=e.Workbook.WBProps.CodeName,delete n.CodeName)),t[t.length]=Nr("workbookPr",null,n);var a=e.Workbook&&e.Workbook.Sheets||[],i=0;if(a&&a[0]&&a[0].Hidden){for(t[t.length]="<bookViews>",i=0;i!=e.SheetNames.length&&!(!a[i]||!a[i].Hidden);++i);i==e.SheetNames.length&&(i=0),t[t.length]='<workbookView firstSheet="'+i+'" activeTab="'+i+'"/>',t[t.length]="</bookViews>"}for(t[t.length]="<sheets>",i=0;i!=e.SheetNames.length;++i){var l={name:Xa(e.SheetNames[i].slice(0,31))};if(l.sheetId=""+(i+1),l["r:id"]="rId"+(i+1),a[i])switch(a[i].Hidden){case 1:l.state="hidden";break;case 2:l.state="veryHidden";break}t[t.length]=Nr("sheet",null,l)}return t[t.length]="</sheets>",r&&(t[t.length]="<definedNames>",e.Workbook&&e.Workbook.Names&&e.Workbook.Names.forEach(function(o){var c={name:o.Name};o.Comment&&(c.comment=o.Comment),o.Sheet!=null&&(c.localSheetId=""+o.Sheet),o.Hidden&&(c.hidden="1"),o.Ref&&(t[t.length]=Nr("definedName",Xa(o.Ref),c))}),t[t.length]="</definedNames>"),t.length>2&&(t[t.length]="</workbook>",t[1]=t[1].replace("/>",">")),t.join("")}function qNe(e,t){var r={};return r.Hidden=e.read_shift(4),r.iTabID=e.read_shift(4),r.strRelID=jS(e),r.name=ao(e),r}function HNe(e,t){return t||(t=Bt(127)),t.write_shift(4,e.Hidden),t.write_shift(4,e.iTabID),ZC(e.strRelID,t),yl(e.name.slice(0,31),t),t.length>t.l?t.slice(0,t.l):t}function $Ne(e,t){var r={},n=e.read_shift(4);r.defaultThemeVersion=e.read_shift(4);var a=t>8?ao(e):"";return a.length>0&&(r.CodeName=a),r.autoCompressPictures=!!(n&65536),r.backupFile=!!(n&64),r.checkCompatibility=!!(n&4096),r.date1904=!!(n&1),r.filterPrivacy=!!(n&8),r.hidePivotFieldList=!!(n&1024),r.promptedSolutions=!!(n&16),r.publishItems=!!(n&2048),r.refreshAllConnections=!!(n&262144),r.saveExternalLinkValues=!!(n&128),r.showBorderUnselectedTables=!!(n&4),r.showInkAnnotation=!!(n&32),r.showObjects=["all","placeholders","none"][n>>13&3],r.showPivotChartFilter=!!(n&32768),r.updateLinks=["userSet","never","always"][n>>8&3],r}function VNe(e,t){t||(t=Bt(72));var r=0;return e&&e.filterPrivacy&&(r|=8),t.write_shift(4,r),t.write_shift(4,0),s$(e&&e.CodeName||"ThisWorkbook",t),t.slice(0,t.l)}function WNe(e,t){var r={};return e.read_shift(4),r.ArchID=e.read_shift(4),e.l+=t-8,r}function KNe(e,t,r){var n=e.l+t;e.l+=4,e.l+=1;var a=e.read_shift(4),i=Nve(e),l=T4e(e,0,r),o=YC(e);e.l=n;var c={Name:i,Ptg:l};return a<268435455&&(c.Sheet=a),o&&(c.Comment=o),c}function GNe(e,t){var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},n=[],a=!1;t||(t={}),t.biff=12;var i=[],l=[[]];return l.SheetNames=[],l.XTI=[],vb[16]={n:"BrtFRTArchID$",f:WNe},ih(e,function(c,d,f){switch(f){case 156:l.SheetNames.push(c.name),r.Sheets.push(c);break;case 153:r.WBProps=c;break;case 39:c.Sheet!=null&&(t.SID=c.Sheet),c.Ref=Jl(c.Ptg,null,null,l,t),delete t.SID,delete c.Ptg,i.push(c);break;case 1036:break;case 357:case 358:case 355:case 667:l[0].length?l.push([f,c]):l[0]=[f,c],l[l.length-1].XTI=[];break;case 362:l.length===0&&(l[0]=[],l[0].XTI=[]),l[l.length-1].XTI=l[l.length-1].XTI.concat(c),l.XTI=l.XTI.concat(c);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:n.push(f),a=!0;break;case 36:n.pop(),a=!1;break;case 37:n.push(f),a=!0;break;case 38:n.pop(),a=!1;break;case 16:break;default:if(!d.T){if(!a||t.WTF&&n[n.length-1]!=37&&n[n.length-1]!=35)throw new Error("Unexpected record 0x"+f.toString(16))}}},t),hV(r),r.Names=i,r.supbooks=l,r}function XNe(e,t){or(e,143);for(var r=0;r!=t.SheetNames.length;++r){var n=t.Workbook&&t.Workbook.Sheets&&t.Workbook.Sheets[r]&&t.Workbook.Sheets[r].Hidden||0,a={Hidden:n,iTabID:r+1,strRelID:"rId"+(r+1),name:t.SheetNames[r]};or(e,156,HNe(a))}or(e,144)}function YNe(e,t){t||(t=Bt(127));for(var r=0;r!=4;++r)t.write_shift(4,0);return yl("SheetJS",t),yl(cw.version,t),yl(cw.version,t),yl("7262",t),t.length>t.l?t.slice(0,t.l):t}function ZNe(e,t){t||(t=Bt(29)),t.write_shift(-4,0),t.write_shift(-4,460),t.write_shift(4,28800),t.write_shift(4,17600),t.write_shift(4,500),t.write_shift(4,e),t.write_shift(4,e);var r=120;return t.write_shift(1,r),t.length>t.l?t.slice(0,t.l):t}function QNe(e,t){if(!(!t.Workbook||!t.Workbook.Sheets)){for(var r=t.Workbook.Sheets,n=0,a=-1,i=-1;n<r.length;++n)!r[n]||!r[n].Hidden&&a==-1?a=n:r[n].Hidden==1&&i==-1&&(i=n);i>a||(or(e,135),or(e,158,ZNe(a)),or(e,136))}}function JNe(e,t){var r=nc();return or(r,131),or(r,128,YNe()),or(r,153,VNe(e.Workbook&&e.Workbook.WBProps||null)),QNe(r,e),XNe(r,e),or(r,132),r.end()}function e_e(e,t,r){return t.slice(-4)===".bin"?GNe(e,r):zNe(e,r)}function t_e(e,t,r,n,a,i,l,o){return t.slice(-4)===".bin"?pNe(e,n,r,a,i,l,o):K4e(e,n,r,a,i,l,o)}function r_e(e,t,r,n,a,i,l,o){return t.slice(-4)===".bin"?PNe(e,n,r,a,i):TNe(e,n,r,a,i)}function n_e(e,t,r,n,a,i,l,o){return t.slice(-4)===".bin"?s5e():i5e()}function a_e(e,t,r,n,a,i,l,o){return t.slice(-4)===".bin"?n5e():a5e()}function s_e(e,t,r,n){return t.slice(-4)===".bin"?eke(e,r,n):qwe(e,r,n)}function i_e(e,t,r){return G$(e,r)}function l_e(e,t,r){return t.slice(-4)===".bin"?lwe(e,r):awe(e,r)}function o_e(e,t,r){return t.slice(-4)===".bin"?Qke(e,r):Hke(e,r)}function c_e(e,t,r){return t.slice(-4)===".bin"?Uke(e):Fke(e)}function d_e(e,t,r,n){return r.slice(-4)===".bin"?zke(e,t,r,n):void 0}function u_e(e,t,r){return t.slice(-4)===".bin"?Mke(e,t,r):Rke(e,t,r)}function h_e(e,t,r){return(t.slice(-4)===".bin"?JNe:mV)(e)}function f_e(e,t,r,n,a){return(t.slice(-4)===".bin"?CNe:cV)(e,r,n,a)}function m_e(e,t,r){return(t.slice(-4)===".bin"?dke:W$)(e,r)}function x_e(e,t,r){return(t.slice(-4)===".bin"?dwe:F$)(e,r)}function p_e(e,t,r){return(t.slice(-4)===".bin"?Jke:Z$)(e)}function g_e(e){return(e.slice(-4)===".bin"?Lke:X$)()}var xV=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,pV=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function Rd(e,t){var r=e.split(/\s+/),n=[];if(n[0]=r[0],r.length===1)return n;var a=e.match(xV),i,l,o,c;if(a)for(c=0;c!=a.length;++c)i=a[c].match(pV),(l=i[1].indexOf(":"))===-1?n[i[1]]=i[2].slice(1,i[2].length-1):(i[1].slice(0,6)==="xmlns:"?o="xmlns"+i[1].slice(6):o=i[1].slice(l+1),n[o]=i[2].slice(1,i[2].length-1));return n}function b_e(e){var t=e.split(/\s+/),r={};if(t.length===1)return r;var n=e.match(xV),a,i,l,o;if(n)for(o=0;o!=n.length;++o)a=n[o].match(pV),(i=a[1].indexOf(":"))===-1?r[a[1]]=a[2].slice(1,a[2].length-1):(a[1].slice(0,6)==="xmlns:"?l="xmlns"+a[1].slice(6):l=a[1].slice(i+1),r[l]=a[2].slice(1,a[2].length-1));return r}var Dg;function v_e(e,t){var r=Dg[e]||Ea(e);return r==="General"?zm(t):xd(r,t)}function y_e(e,t,r,n){var a=n;switch((r[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":a=Ss(n);break;case"i2":case"int":a=parseInt(n,10);break;case"r4":case"float":a=parseFloat(n);break;case"date":case"dateTime.tz":a=As(n);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+r[0])}e[Ea(t)]=a}function w_e(e,t,r){if(e.t!=="z"){if(!r||r.cellText!==!1)try{e.t==="e"?e.w=e.w||lh[e.v]:t==="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=db(e.v):e.w=zm(e.v):e.w=v_e(t||"General",e.v)}catch(i){if(r.WTF)throw i}try{var n=Dg[t]||t||"General";if(r.cellNF&&(e.z=n),r.cellDates&&e.t=="n"&&pp(n)){var a=rm(e.v);a&&(e.t="d",e.v=new Date(a.y,a.m-1,a.d,a.H,a.M,a.S,a.u))}}catch(i){if(r.WTF)throw i}}}function k_e(e,t,r){if(r.cellStyles&&t.Interior){var n=t.Interior;n.Pattern&&(n.patternType=Dwe[n.Pattern]||n.Pattern)}e[t.ID]=t}function N_e(e,t,r,n,a,i,l,o,c,d){var f="General",p=n.StyleID,y={};d=d||{};var g=[],N=0;for(p===void 0&&o&&(p=o.StyleID),p===void 0&&l&&(p=l.StyleID);i[p]!==void 0&&(i[p].nf&&(f=i[p].nf),i[p].Interior&&g.push(i[p].Interior),!!i[p].Parent);)p=i[p].Parent;switch(r.Type){case"Boolean":n.t="b",n.v=Ss(e);break;case"String":n.t="s",n.r=BI(Ea(e)),n.v=e.indexOf("<")>-1?Ea(t||e).replace(/<.*?>/g,""):n.r;break;case"DateTime":e.slice(-1)!="Z"&&(e+="Z"),n.v=(As(e)-new Date(Date.UTC(1899,11,30)))/(1440*60*1e3),n.v!==n.v?n.v=Ea(e):n.v<60&&(n.v=n.v-1),(!f||f=="General")&&(f="yyyy-mm-dd");case"Number":n.v===void 0&&(n.v=+e),n.t||(n.t="n");break;case"Error":n.t="e",n.v=d$[e],d.cellText!==!1&&(n.w=e);break;default:e==""&&t==""?n.t="z":(n.t="s",n.v=BI(t||e));break}if(w_e(n,f,d),d.cellFormula!==!1)if(n.Formula){var w=Ea(n.Formula);w.charCodeAt(0)==61&&(w=w.slice(1)),n.f=b1(w,a),delete n.Formula,n.ArrayRange=="RC"?n.F=b1("RC:RC",a):n.ArrayRange&&(n.F=b1(n.ArrayRange,a),c.push([Ta(n.F),n.F]))}else for(N=0;N<c.length;++N)a.r>=c[N][0].s.r&&a.r<=c[N][0].e.r&&a.c>=c[N][0].s.c&&a.c<=c[N][0].e.c&&(n.F=c[N][1]);d.cellStyles&&(g.forEach(function(k){!y.patternType&&k.patternType&&(y.patternType=k.patternType)}),n.s=y),n.StyleID!==void 0&&(n.ixfe=n.StyleID)}function __e(e){e.t=e.v||"",e.t=e.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.v=e.w=e.ixfe=void 0}function dN(e,t){var r=t||{};gp();var n=vg($C(e));(r.type=="binary"||r.type=="array"||r.type=="base64")&&(n=as(n));var a=n.slice(0,1024).toLowerCase(),i=!1;if(a=a.replace(/".*?"/g,""),(a.indexOf(">")&1023)>Math.min(a.indexOf(",")&1023,a.indexOf(";")&1023)){var l=Es(r);return l.type="string",G1.to_workbook(n,l)}if(a.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(ut){a.indexOf("<"+ut)>=0&&(i=!0)}),i)return cSe(n,r);Dg={"General Number":"General","General Date":En[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":En[15],"Short Date":En[14],"Long Time":En[19],"Medium Time":En[18],"Short Time":En[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:En[2],Standard:En[4],Percent:En[10],Scientific:En[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var o,c=[],d,f={},p=[],y=r.dense?[]:{},g="",N={},w={},k=Rd('<Data ss:Type="String">'),S=0,O=0,E=0,D={s:{r:2e6,c:2e6},e:{r:0,c:0}},q={},W={},R="",U=0,z=[],Z={},H={},K=0,J=[],ae=[],se={},ue=[],fe,ke=!1,_e=[],Le=[],xe={},B=0,ee=0,Y={Sheets:[],WBProps:{date1904:!1}},re={};fb.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"");for(var Q="";o=fb.exec(n);)switch(o[3]=(Q=o[3]).toLowerCase()){case"data":if(Q=="data"){if(o[1]==="/"){if((d=c.pop())[0]!==o[3])throw new Error("Bad state: "+d.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&c.push([o[3],!0]);break}if(c[c.length-1][1])break;o[1]==="/"?N_e(n.slice(S,o.index),R,k,c[c.length-1][0]=="comment"?se:N,{c:O,r:E},q,ue[O],w,_e,r):(R="",k=Rd(o[0]),S=o.index+o[0].length);break;case"cell":if(o[1]==="/")if(ae.length>0&&(N.c=ae),(!r.sheetRows||r.sheetRows>E)&&N.v!==void 0&&(r.dense?(y[E]||(y[E]=[]),y[E][O]=N):y[Ws(O)+Si(E)]=N),N.HRef&&(N.l={Target:Ea(N.HRef)},N.HRefScreenTip&&(N.l.Tooltip=N.HRefScreenTip),delete N.HRef,delete N.HRefScreenTip),(N.MergeAcross||N.MergeDown)&&(B=O+(parseInt(N.MergeAcross,10)|0),ee=E+(parseInt(N.MergeDown,10)|0),z.push({s:{c:O,r:E},e:{c:B,r:ee}})),!r.sheetStubs)N.MergeAcross?O=B+1:++O;else if(N.MergeAcross||N.MergeDown){for(var Ce=O;Ce<=B;++Ce)for(var me=E;me<=ee;++me)(Ce>O||me>E)&&(r.dense?(y[me]||(y[me]=[]),y[me][Ce]={t:"z"}):y[Ws(Ce)+Si(me)]={t:"z"});O=B+1}else++O;else N=b_e(o[0]),N.Index&&(O=+N.Index-1),O<D.s.c&&(D.s.c=O),O>D.e.c&&(D.e.c=O),o[0].slice(-2)==="/>"&&++O,ae=[];break;case"row":o[1]==="/"||o[0].slice(-2)==="/>"?(E<D.s.r&&(D.s.r=E),E>D.e.r&&(D.e.r=E),o[0].slice(-2)==="/>"&&(w=Rd(o[0]),w.Index&&(E=+w.Index-1)),O=0,++E):(w=Rd(o[0]),w.Index&&(E=+w.Index-1),xe={},(w.AutoFitHeight=="0"||w.Height)&&(xe.hpx=parseInt(w.Height,10),xe.hpt=bb(xe.hpx),Le[E]=xe),w.Hidden=="1"&&(xe.hidden=!0,Le[E]=xe));break;case"worksheet":if(o[1]==="/"){if((d=c.pop())[0]!==o[3])throw new Error("Bad state: "+d.join("|"));p.push(g),D.s.r<=D.e.r&&D.s.c<=D.e.c&&(y["!ref"]=Kn(D),r.sheetRows&&r.sheetRows<=D.e.r&&(y["!fullref"]=y["!ref"],D.e.r=r.sheetRows-1,y["!ref"]=Kn(D))),z.length&&(y["!merges"]=z),ue.length>0&&(y["!cols"]=ue),Le.length>0&&(y["!rows"]=Le),f[g]=y}else D={s:{r:2e6,c:2e6},e:{r:0,c:0}},E=O=0,c.push([o[3],!1]),d=Rd(o[0]),g=Ea(d.Name),y=r.dense?[]:{},z=[],_e=[],Le=[],re={name:g,Hidden:0},Y.Sheets.push(re);break;case"table":if(o[1]==="/"){if((d=c.pop())[0]!==o[3])throw new Error("Bad state: "+d.join("|"))}else{if(o[0].slice(-2)=="/>")break;c.push([o[3],!1]),ue=[],ke=!1}break;case"style":o[1]==="/"?k_e(q,W,r):W=Rd(o[0]);break;case"numberformat":W.nf=Ea(Rd(o[0]).Format||"General"),Dg[W.nf]&&(W.nf=Dg[W.nf]);for(var ie=0;ie!=392&&En[ie]!=W.nf;++ie);if(ie==392){for(ie=57;ie!=392;++ie)if(En[ie]==null){B0(W.nf,ie);break}}break;case"column":if(c[c.length-1][0]!=="table")break;if(fe=Rd(o[0]),fe.Hidden&&(fe.hidden=!0,delete fe.Hidden),fe.Width&&(fe.wpx=parseInt(fe.Width,10)),!ke&&fe.wpx>10){ke=!0,to=$$;for(var je=0;je<ue.length;++je)ue[je]&&cf(ue[je])}ke&&cf(fe),ue[fe.Index-1||ue.length]=fe;for(var be=0;be<+fe.Span;++be)ue[ue.length]=Es(fe);break;case"namedrange":if(o[1]==="/")break;Y.Names||(Y.Names=[]);var le=Mn(o[0]),Ee={Name:le.Name,Ref:b1(le.RefersTo.slice(1),{r:0,c:0})};Y.Sheets.length>0&&(Ee.Sheet=Y.Sheets.length-1),Y.Names.push(Ee);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(o[0].slice(-2)==="/>")break;o[1]==="/"?R+=n.slice(U,o.index):U=o.index+o[0].length;break;case"interior":if(!r.cellStyles)break;W.Interior=Rd(o[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(o[0].slice(-2)==="/>")break;o[1]==="/"?Gve(Z,Q,n.slice(K,o.index)):K=o.index+o[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(o[1]==="/"){if((d=c.pop())[0]!==o[3])throw new Error("Bad state: "+d.join("|"))}else c.push([o[3],!1]);break;case"comment":if(o[1]==="/"){if((d=c.pop())[0]!==o[3])throw new Error("Bad state: "+d.join("|"));__e(se),ae.push(se)}else c.push([o[3],!1]),d=Rd(o[0]),se={a:d.Author};break;case"autofilter":if(o[1]==="/"){if((d=c.pop())[0]!==o[3])throw new Error("Bad state: "+d.join("|"))}else if(o[0].charAt(o[0].length-2)!=="/"){var Me=Rd(o[0]);y["!autofilter"]={ref:b1(Me.Range).replace(/\$/g,"")},c.push([o[3],!0])}break;case"name":break;case"datavalidation":if(o[1]==="/"){if((d=c.pop())[0]!==o[3])throw new Error("Bad state: "+d.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&c.push([o[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(o[1]==="/"){if((d=c.pop())[0]!==o[3])throw new Error("Bad state: "+d.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&c.push([o[3],!0]);break;case"null":break;default:if(c.length==0&&o[3]=="document"||c.length==0&&o[3]=="uof")return CD(n,r);var ye=!0;switch(c[c.length-1][0]){case"officedocumentsettings":switch(o[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:ye=!1}break;case"componentoptions":switch(o[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:ye=!1}break;case"excelworkbook":switch(o[3]){case"date1904":Y.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:ye=!1}break;case"workbookoptions":switch(o[3]){case"owcversion":break;case"height":break;case"width":break;default:ye=!1}break;case"worksheetoptions":switch(o[3]){case"visible":if(o[0].slice(-2)!=="/>")if(o[1]==="/")switch(n.slice(K,o.index)){case"SheetHidden":re.Hidden=1;break;case"SheetVeryHidden":re.Hidden=2;break}else K=o.index+o[0].length;break;case"header":y["!margins"]||km(y["!margins"]={},"xlml"),isNaN(+Mn(o[0]).Margin)||(y["!margins"].header=+Mn(o[0]).Margin);break;case"footer":y["!margins"]||km(y["!margins"]={},"xlml"),isNaN(+Mn(o[0]).Margin)||(y["!margins"].footer=+Mn(o[0]).Margin);break;case"pagemargins":var at=Mn(o[0]);y["!margins"]||km(y["!margins"]={},"xlml"),isNaN(+at.Top)||(y["!margins"].top=+at.Top),isNaN(+at.Left)||(y["!margins"].left=+at.Left),isNaN(+at.Right)||(y["!margins"].right=+at.Right),isNaN(+at.Bottom)||(y["!margins"].bottom=+at.Bottom);break;case"displayrighttoleft":Y.Views||(Y.Views=[]),Y.Views[0]||(Y.Views[0]={}),Y.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":y["!outline"]||(y["!outline"]={}),y["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":y["!outline"]||(y["!outline"]={}),y["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:ye=!1}break;case"pivottable":case"pivotcache":switch(o[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:ye=!1}break;case"pagebreaks":switch(o[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:ye=!1}break;case"autofilter":switch(o[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:ye=!1}break;case"querytable":switch(o[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:ye=!1}break;case"datavalidation":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:ye=!1}break;case"sorting":case"conditionalformatting":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:ye=!1}break;case"mapinfo":case"schema":case"data":switch(o[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:ye=!1}break;case"smarttags":break;default:ye=!1;break}if(ye||o[3].match(/!\[CDATA/))break;if(!c[c.length-1][1])throw"Unrecognized tag: "+o[3]+"|"+c.join("|");if(c[c.length-1][0]==="customdocumentproperties"){if(o[0].slice(-2)==="/>")break;o[1]==="/"?y_e(H,Q,J,n.slice(K,o.index)):(J=o,K=o.index+o[0].length);break}if(r.WTF)throw"Unrecognized tag: "+o[3]+"|"+c.join("|")}var lt={};return!r.bookSheets&&!r.bookProps&&(lt.Sheets=f),lt.SheetNames=p,lt.Workbook=Y,lt.SSF=Es(En),lt.Props=Z,lt.Custprops=H,lt}function IS(e,t){switch(mA(t=t||{}),t.type||"base64"){case"base64":return dN(Ic(e),t);case"binary":case"buffer":case"file":return dN(e,t);case"array":return dN(vf(e),t)}}function S_e(e,t){var r=[];return e.Props&&r.push(Xve(e.Props,t)),e.Custprops&&r.push(Yve(e.Props,e.Custprops)),r.join("")}function j_e(){return""}function C_e(e,t){var r=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return t.cellXfs.forEach(function(n,a){var i=[];i.push(Nr("NumberFormat",null,{"ss:Format":Xa(En[n.numFmtId])}));var l={"ss:ID":"s"+(21+a)};r.push(Nr("Style",i.join(""),l))}),Nr("Styles",r.join(""))}function gV(e){return Nr("NamedRange",null,{"ss:Name":e.Name,"ss:RefersTo":"="+oA(e.Ref,{r:0,c:0})})}function A_e(e){if(!((e||{}).Workbook||{}).Names)return"";for(var t=e.Workbook.Names,r=[],n=0;n<t.length;++n){var a=t[n];a.Sheet==null&&(a.Name.match(/^_xlfn\./)||r.push(gV(a)))}return Nr("Names",r.join(""))}function E_e(e,t,r,n){if(!e||!((n||{}).Workbook||{}).Names)return"";for(var a=n.Workbook.Names,i=[],l=0;l<a.length;++l){var o=a[l];o.Sheet==r&&(o.Name.match(/^_xlfn\./)||i.push(gV(o)))}return i.join("")}function T_e(e,t,r,n){if(!e)return"";var a=[];if(e["!margins"]&&(a.push("<PageSetup>"),e["!margins"].header&&a.push(Nr("Header",null,{"x:Margin":e["!margins"].header})),e["!margins"].footer&&a.push(Nr("Footer",null,{"x:Margin":e["!margins"].footer})),a.push(Nr("PageMargins",null,{"x:Bottom":e["!margins"].bottom||"0.75","x:Left":e["!margins"].left||"0.7","x:Right":e["!margins"].right||"0.7","x:Top":e["!margins"].top||"0.75"})),a.push("</PageSetup>")),n&&n.Workbook&&n.Workbook.Sheets&&n.Workbook.Sheets[r])if(n.Workbook.Sheets[r].Hidden)a.push(Nr("Visible",n.Workbook.Sheets[r].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var i=0;i<r&&!(n.Workbook.Sheets[i]&&!n.Workbook.Sheets[i].Hidden);++i);i==r&&a.push("<Selected/>")}return((((n||{}).Workbook||{}).Views||[])[0]||{}).RTL&&a.push("<DisplayRightToLeft/>"),e["!protect"]&&(a.push(Dl("ProtectContents","True")),e["!protect"].objects&&a.push(Dl("ProtectObjects","True")),e["!protect"].scenarios&&a.push(Dl("ProtectScenarios","True")),e["!protect"].selectLockedCells!=null&&!e["!protect"].selectLockedCells?a.push(Dl("EnableSelection","NoSelection")):e["!protect"].selectUnlockedCells!=null&&!e["!protect"].selectUnlockedCells&&a.push(Dl("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(l){e["!protect"][l[0]]&&a.push("<"+l[1]+"/>")})),a.length==0?"":Nr("WorksheetOptions",a.join(""),{xmlns:yc.x})}function O_e(e){return e.map(function(t){var r=Qbe(t.t||""),n=Nr("ss:Data",r,{xmlns:"http://www.w3.org/TR/REC-html40"});return Nr("Comment",n,{"ss:Author":t.a})}).join("")}function P_e(e,t,r,n,a,i,l){if(!e||e.v==null&&e.f==null)return"";var o={};if(e.f&&(o["ss:Formula"]="="+Xa(oA(e.f,l))),e.F&&e.F.slice(0,t.length)==t){var c=Ks(e.F.slice(t.length+1));o["ss:ArrayRange"]="RC:R"+(c.r==l.r?"":"["+(c.r-l.r)+"]")+"C"+(c.c==l.c?"":"["+(c.c-l.c)+"]")}if(e.l&&e.l.Target&&(o["ss:HRef"]=Xa(e.l.Target),e.l.Tooltip&&(o["x:HRefScreenTip"]=Xa(e.l.Tooltip))),r["!merges"])for(var d=r["!merges"],f=0;f!=d.length;++f)d[f].s.c!=l.c||d[f].s.r!=l.r||(d[f].e.c>d[f].s.c&&(o["ss:MergeAcross"]=d[f].e.c-d[f].s.c),d[f].e.r>d[f].s.r&&(o["ss:MergeDown"]=d[f].e.r-d[f].s.r));var p="",y="";switch(e.t){case"z":if(!n.sheetStubs)return"";break;case"n":p="Number",y=String(e.v);break;case"b":p="Boolean",y=e.v?"1":"0";break;case"e":p="Error",y=lh[e.v];break;case"d":p="DateTime",y=new Date(e.v).toISOString(),e.z==null&&(e.z=e.z||En[14]);break;case"s":p="String",y=Zbe(e.v||"");break}var g=wf(n.cellXfs,e,n);o["ss:StyleID"]="s"+(21+g),o["ss:Index"]=l.c+1;var N=e.v!=null?y:"",w=e.t=="z"?"":'<Data ss:Type="'+p+'">'+N+"</Data>";return(e.c||[]).length>0&&(w+=O_e(e.c)),Nr("Cell",w,o)}function I_e(e,t){var r='<Row ss:Index="'+(e+1)+'"';return t&&(t.hpt&&!t.hpx&&(t.hpx=X1(t.hpt)),t.hpx&&(r+=' ss:AutoFitHeight="0" ss:Height="'+t.hpx+'"'),t.hidden&&(r+=' ss:Hidden="1"')),r+">"}function D_e(e,t,r,n){if(!e["!ref"])return"";var a=Ta(e["!ref"]),i=e["!merges"]||[],l=0,o=[];e["!cols"]&&e["!cols"].forEach(function(k,S){cf(k);var O=!!k.width,E=Uk(S,k),D={"ss:Index":S+1};O&&(D["ss:Width"]=pb(E.width)),k.hidden&&(D["ss:Hidden"]="1"),o.push(Nr("Column",null,D))});for(var c=Array.isArray(e),d=a.s.r;d<=a.e.r;++d){for(var f=[I_e(d,(e["!rows"]||[])[d])],p=a.s.c;p<=a.e.c;++p){var y=!1;for(l=0;l!=i.length;++l)if(!(i[l].s.c>p)&&!(i[l].s.r>d)&&!(i[l].e.c<p)&&!(i[l].e.r<d)){(i[l].s.c!=p||i[l].s.r!=d)&&(y=!0);break}if(!y){var g={r:d,c:p},N=Tn(g),w=c?(e[d]||[])[p]:e[N];f.push(P_e(w,N,e,t,r,n,g))}}f.push("</Row>"),f.length>2&&o.push(f.join(""))}return o.join("")}function M_e(e,t,r){var n=[],a=r.SheetNames[e],i=r.Sheets[a],l=i?E_e(i,t,e,r):"";return l.length>0&&n.push("<Names>"+l+"</Names>"),l=i?D_e(i,t,e,r):"",l.length>0&&n.push("<Table>"+l+"</Table>"),n.push(T_e(i,t,e,r)),n.join("")}function L_e(e,t){t||(t={}),e.SSF||(e.SSF=Es(En)),e.SSF&&(gp(),Ik(e.SSF),t.revssf=Mk(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF,t.cellXfs=[],wf(t.cellXfs,{},{revssf:{General:0}}));var r=[];r.push(S_e(e,t)),r.push(j_e()),r.push(""),r.push("");for(var n=0;n<e.SheetNames.length;++n)r.push(Nr("Worksheet",M_e(n,t,e),{"ss:Name":Xa(e.SheetNames[n])}));return r[2]=C_e(e,t),r[3]=A_e(e),ji+Nr("Workbook",r.join(""),{xmlns:yc.ss,"xmlns:o":yc.o,"xmlns:x":yc.x,"xmlns:ss":yc.ss,"xmlns:dt":yc.dt,"xmlns:html":yc.html})}function R_e(e){var t={},r=e.content;if(r.l=28,t.AnsiUserType=r.read_shift(0,"lpstr-ansi"),t.AnsiClipboardFormat=Ave(r),r.length-r.l<=4)return t;var n=r.read_shift(4);if(n==0||n>40||(r.l-=4,t.Reserved1=r.read_shift(0,"lpstr-ansi"),r.length-r.l<=4)||(n=r.read_shift(4),n!==1907505652)||(t.UnicodeClipboardFormat=Eve(r),n=r.read_shift(4),n==0||n>40))return t;r.l-=4,t.Reserved2=r.read_shift(0,"lpwstr")}var F_e=[60,1084,2066,2165,2175];function B_e(e,t,r,n,a){var i=n,l=[],o=r.slice(r.l,r.l+i);if(a&&a.enc&&a.enc.insitu&&o.length>0)switch(e){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:a.enc.insitu(o)}l.push(o),r.l+=i;for(var c=O0(r,r.l),d=DS[c],f=0;d!=null&&F_e.indexOf(c)>-1;)i=O0(r,r.l+2),f=r.l+4,c==2066?f+=4:(c==2165||c==2175)&&(f+=12),o=r.slice(f,r.l+4+i),l.push(o),r.l+=4+i,d=DS[c=O0(r,r.l)];var p=bl(l);Il(p,0);var y=0;p.lens=[];for(var g=0;g<l.length;++g)p.lens.push(y),y+=l[g].length;if(p.length<n)throw"XLS Record 0x"+e.toString(16)+" Truncated: "+p.length+" < "+n;return t.f(p,p.length,a)}function yu(e,t,r){if(e.t!=="z"&&e.XF){var n=0;try{n=e.z||e.XF.numFmtId||0,t.cellNF&&(e.z=En[n])}catch(i){if(t.WTF)throw i}if(!t||t.cellText!==!1)try{e.t==="e"?e.w=e.w||lh[e.v]:n===0||n=="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=db(e.v):e.w=zm(e.v):e.w=xd(n,e.v,{date1904:!!r,dateNF:t&&t.dateNF})}catch(i){if(t.WTF)throw i}if(t.cellDates&&n&&e.t=="n"&&pp(En[n]||String(n))){var a=rm(e.v);a&&(e.t="d",e.v=new Date(a.y,a.m-1,a.d,a.H,a.M,a.S,a.u))}}}function U2(e,t,r){return{v:e,ixfe:t,t:r}}function U_e(e,t){var r={opts:{}},n={},a=t.dense?[]:{},i={},l={},o=null,c=[],d="",f={},p,y="",g,N,w,k,S={},O=[],E,D,q=[],W=[],R={Sheets:[],WBProps:{date1904:!1},Views:[{}]},U={},z=function(Vt){return Vt<8?vm[Vt]:Vt<64&&W[Vt-8]||vm[Vt]},Z=function(Vt,cr,br){var ar=cr.XF.data;if(!(!ar||!ar.patternType||!br||!br.cellStyles)){cr.s={},cr.s.patternType=ar.patternType;var xt;(xt=xb(z(ar.icvFore)))&&(cr.s.fgColor={rgb:xt}),(xt=xb(z(ar.icvBack)))&&(cr.s.bgColor={rgb:xt})}},H=function(Vt,cr,br){if(!(xe>1)&&!(br.sheetRows&&Vt.r>=br.sheetRows)){if(br.cellStyles&&cr.XF&&cr.XF.data&&Z(Vt,cr,br),delete cr.ixfe,delete cr.XF,p=Vt,y=Tn(Vt),(!l||!l.s||!l.e)&&(l={s:{r:0,c:0},e:{r:0,c:0}}),Vt.r<l.s.r&&(l.s.r=Vt.r),Vt.c<l.s.c&&(l.s.c=Vt.c),Vt.r+1>l.e.r&&(l.e.r=Vt.r+1),Vt.c+1>l.e.c&&(l.e.c=Vt.c+1),br.cellFormula&&cr.f){for(var ar=0;ar<O.length;++ar)if(!(O[ar][0].s.c>Vt.c||O[ar][0].s.r>Vt.r)&&!(O[ar][0].e.c<Vt.c||O[ar][0].e.r<Vt.r)){cr.F=Kn(O[ar][0]),(O[ar][0].s.c!=Vt.c||O[ar][0].s.r!=Vt.r)&&delete cr.f,cr.f&&(cr.f=""+Jl(O[ar][1],l,Vt,_e,K));break}}br.dense?(a[Vt.r]||(a[Vt.r]=[]),a[Vt.r][Vt.c]=cr):a[y]=cr}},K={enc:!1,sbcch:0,snames:[],sharedf:S,arrayf:O,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!t&&!!t.cellStyles,WTF:!!t&&!!t.wtf};t.password&&(K.password=t.password);var J,ae=[],se=[],ue=[],fe=[],ke=!1,_e=[];_e.SheetNames=K.snames,_e.sharedf=K.sharedf,_e.arrayf=K.arrayf,_e.names=[],_e.XTI=[];var Le=0,xe=0,B=0,ee=[],Y=[],re;K.codepage=1200,Zd(1200);for(var Q=!1;e.l<e.length-1;){var Ce=e.l,me=e.read_shift(2);if(me===0&&Le===10)break;var ie=e.l===e.length?0:e.read_shift(2),je=DS[me];if(je&&je.f){if(t.bookSheets&&Le===133&&me!==133)break;if(Le=me,je.r===2||je.r==12){var be=e.read_shift(2);if(ie-=2,!K.enc&&be!==me&&((be&255)<<8|be>>8)!==me)throw new Error("rt mismatch: "+be+"!="+me);je.r==12&&(e.l+=10,ie-=10)}var le={};if(me===10?le=je.f(e,ie,K):le=B_e(me,je,e,ie,K),xe==0&&[9,521,1033,2057].indexOf(Le)===-1)continue;switch(me){case 34:r.opts.Date1904=R.WBProps.date1904=le;break;case 134:r.opts.WriteProtect=!0;break;case 47:if(K.enc||(e.l=0),K.enc=le,!t.password)throw new Error("File is password-protected");if(le.valid==null)throw new Error("Encryption scheme unsupported");if(!le.valid)throw new Error("Password is incorrect");break;case 92:K.lastuser=le;break;case 66:var Ee=Number(le);switch(Ee){case 21010:Ee=1200;break;case 32768:Ee=1e4;break;case 32769:Ee=1252;break}Zd(K.codepage=Ee),Q=!0;break;case 317:K.rrtabid=le;break;case 25:K.winlocked=le;break;case 439:r.opts.RefreshAll=le;break;case 12:r.opts.CalcCount=le;break;case 16:r.opts.CalcDelta=le;break;case 17:r.opts.CalcIter=le;break;case 13:r.opts.CalcMode=le;break;case 14:r.opts.CalcPrecision=le;break;case 95:r.opts.CalcSaveRecalc=le;break;case 15:K.CalcRefMode=le;break;case 2211:r.opts.FullCalc=le;break;case 129:le.fDialog&&(a["!type"]="dialog"),le.fBelow||((a["!outline"]||(a["!outline"]={})).above=!0),le.fRight||((a["!outline"]||(a["!outline"]={})).left=!0);break;case 224:q.push(le);break;case 430:_e.push([le]),_e[_e.length-1].XTI=[];break;case 35:case 547:_e[_e.length-1].push(le);break;case 24:case 536:re={Name:le.Name,Ref:Jl(le.rgce,l,null,_e,K)},le.itab>0&&(re.Sheet=le.itab-1),_e.names.push(re),_e[0]||(_e[0]=[],_e[0].XTI=[]),_e[_e.length-1].push(le),le.Name=="_xlnm._FilterDatabase"&&le.itab>0&&le.rgce&&le.rgce[0]&&le.rgce[0][0]&&le.rgce[0][0][0]=="PtgArea3d"&&(Y[le.itab-1]={ref:Kn(le.rgce[0][0][1][2])});break;case 22:K.ExternCount=le;break;case 23:_e.length==0&&(_e[0]=[],_e[0].XTI=[]),_e[_e.length-1].XTI=_e[_e.length-1].XTI.concat(le),_e.XTI=_e.XTI.concat(le);break;case 2196:if(K.biff<8)break;re!=null&&(re.Comment=le[1]);break;case 18:a["!protect"]=le;break;case 19:le!==0&&K.WTF&&console.error("Password verifier: "+le);break;case 133:i[le.pos]=le,K.snames.push(le.name);break;case 10:{if(--xe)break;if(l.e){if(l.e.r>0&&l.e.c>0){if(l.e.r--,l.e.c--,a["!ref"]=Kn(l),t.sheetRows&&t.sheetRows<=l.e.r){var Me=l.e.r;l.e.r=t.sheetRows-1,a["!fullref"]=a["!ref"],a["!ref"]=Kn(l),l.e.r=Me}l.e.r++,l.e.c++}ae.length>0&&(a["!merges"]=ae),se.length>0&&(a["!objects"]=se),ue.length>0&&(a["!cols"]=ue),fe.length>0&&(a["!rows"]=fe),R.Sheets.push(U)}d===""?f=a:n[d]=a,a=t.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(K.biff===8&&(K.biff={9:2,521:3,1033:4}[me]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[le.BIFFVer]||8),K.biffguess=le.BIFFVer==0,le.BIFFVer==0&&le.dt==4096&&(K.biff=5,Q=!0,Zd(K.codepage=28591)),K.biff==8&&le.BIFFVer==0&&le.dt==16&&(K.biff=2),xe++)break;if(a=t.dense?[]:{},K.biff<8&&!Q&&(Q=!0,Zd(K.codepage=t.codepage||1252)),K.biff<5||le.BIFFVer==0&&le.dt==4096){d===""&&(d="Sheet1"),l={s:{r:0,c:0},e:{r:0,c:0}};var ye={pos:e.l-ie,name:d};i[ye.pos]=ye,K.snames.push(d)}else d=(i[Ce]||{name:""}).name;le.dt==32&&(a["!type"]="chart"),le.dt==64&&(a["!type"]="macro"),ae=[],se=[],K.arrayf=O=[],ue=[],fe=[],ke=!1,U={Hidden:(i[Ce]||{hs:0}).hs,name:d}}break;case 515:case 3:case 2:a["!type"]=="chart"&&(t.dense?(a[le.r]||[])[le.c]:a[Tn({c:le.c,r:le.r})])&&++le.c,E={ixfe:le.ixfe,XF:q[le.ixfe]||{},v:le.val,t:"n"},B>0&&(E.z=ee[E.ixfe>>8&63]),yu(E,t,r.opts.Date1904),H({c:le.c,r:le.r},E,t);break;case 5:case 517:E={ixfe:le.ixfe,XF:q[le.ixfe],v:le.val,t:le.t},B>0&&(E.z=ee[E.ixfe>>8&63]),yu(E,t,r.opts.Date1904),H({c:le.c,r:le.r},E,t);break;case 638:E={ixfe:le.ixfe,XF:q[le.ixfe],v:le.rknum,t:"n"},B>0&&(E.z=ee[E.ixfe>>8&63]),yu(E,t,r.opts.Date1904),H({c:le.c,r:le.r},E,t);break;case 189:for(var at=le.c;at<=le.C;++at){var lt=le.rkrec[at-le.c][0];E={ixfe:lt,XF:q[lt],v:le.rkrec[at-le.c][1],t:"n"},B>0&&(E.z=ee[E.ixfe>>8&63]),yu(E,t,r.opts.Date1904),H({c:at,r:le.r},E,t)}break;case 6:case 518:case 1030:{if(le.val=="String"){o=le;break}if(E=U2(le.val,le.cell.ixfe,le.tt),E.XF=q[E.ixfe],t.cellFormula){var ut=le.formula;if(ut&&ut[0]&&ut[0][0]&&ut[0][0][0]=="PtgExp"){var nt=ut[0][0][1][0],ot=ut[0][0][1][1],We=Tn({r:nt,c:ot});S[We]?E.f=""+Jl(le.formula,l,le.cell,_e,K):E.F=((t.dense?(a[nt]||[])[ot]:a[We])||{}).F}else E.f=""+Jl(le.formula,l,le.cell,_e,K)}B>0&&(E.z=ee[E.ixfe>>8&63]),yu(E,t,r.opts.Date1904),H(le.cell,E,t),o=le}break;case 7:case 519:if(o)o.val=le,E=U2(le,o.cell.ixfe,"s"),E.XF=q[E.ixfe],t.cellFormula&&(E.f=""+Jl(o.formula,l,o.cell,_e,K)),B>0&&(E.z=ee[E.ixfe>>8&63]),yu(E,t,r.opts.Date1904),H(o.cell,E,t),o=null;else throw new Error("String record expects Formula");break;case 33:case 545:{O.push(le);var Kt=Tn(le[0].s);if(g=t.dense?(a[le[0].s.r]||[])[le[0].s.c]:a[Kt],t.cellFormula&&g){if(!o||!Kt||!g)break;g.f=""+Jl(le[1],l,le[0],_e,K),g.F=Kn(le[0])}}break;case 1212:{if(!t.cellFormula)break;if(y){if(!o)break;S[Tn(o.cell)]=le[0],g=t.dense?(a[o.cell.r]||[])[o.cell.c]:a[Tn(o.cell)],(g||{}).f=""+Jl(le[0],l,p,_e,K)}}break;case 253:E=U2(c[le.isst].t,le.ixfe,"s"),c[le.isst].h&&(E.h=c[le.isst].h),E.XF=q[E.ixfe],B>0&&(E.z=ee[E.ixfe>>8&63]),yu(E,t,r.opts.Date1904),H({c:le.c,r:le.r},E,t);break;case 513:t.sheetStubs&&(E={ixfe:le.ixfe,XF:q[le.ixfe],t:"z"},B>0&&(E.z=ee[E.ixfe>>8&63]),yu(E,t,r.opts.Date1904),H({c:le.c,r:le.r},E,t));break;case 190:if(t.sheetStubs)for(var Dt=le.c;Dt<=le.C;++Dt){var fr=le.ixfe[Dt-le.c];E={ixfe:fr,XF:q[fr],t:"z"},B>0&&(E.z=ee[E.ixfe>>8&63]),yu(E,t,r.opts.Date1904),H({c:Dt,r:le.r},E,t)}break;case 214:case 516:case 4:E=U2(le.val,le.ixfe,"s"),E.XF=q[E.ixfe],B>0&&(E.z=ee[E.ixfe>>8&63]),yu(E,t,r.opts.Date1904),H({c:le.c,r:le.r},E,t);break;case 0:case 512:xe===1&&(l=le);break;case 252:c=le;break;case 1054:if(K.biff==4){ee[B++]=le[1];for(var xr=0;xr<B+163&&En[xr]!=le[1];++xr);xr>=163&&B0(le[1],B+163)}else B0(le[1],le[0]);break;case 30:{ee[B++]=le;for(var nr=0;nr<B+163&&En[nr]!=le;++nr);nr>=163&&B0(le,B+163)}break;case 229:ae=ae.concat(le);break;case 93:se[le.cmo[0]]=K.lastobj=le;break;case 438:K.lastobj.TxO=le;break;case 127:K.lastobj.ImData=le;break;case 440:for(k=le[0].s.r;k<=le[0].e.r;++k)for(w=le[0].s.c;w<=le[0].e.c;++w)g=t.dense?(a[k]||[])[w]:a[Tn({c:w,r:k})],g&&(g.l=le[1]);break;case 2048:for(k=le[0].s.r;k<=le[0].e.r;++k)for(w=le[0].s.c;w<=le[0].e.c;++w)g=t.dense?(a[k]||[])[w]:a[Tn({c:w,r:k})],g&&g.l&&(g.l.Tooltip=le[1]);break;case 28:{if(K.biff<=5&&K.biff>=2)break;g=t.dense?(a[le[0].r]||[])[le[0].c]:a[Tn(le[0])];var Mr=se[le[2]];g||(t.dense?(a[le[0].r]||(a[le[0].r]=[]),g=a[le[0].r][le[0].c]={t:"z"}):g=a[Tn(le[0])]={t:"z"},l.e.r=Math.max(l.e.r,le[0].r),l.s.r=Math.min(l.s.r,le[0].r),l.e.c=Math.max(l.e.c,le[0].c),l.s.c=Math.min(l.s.c,le[0].c)),g.c||(g.c=[]),N={a:le[1],t:Mr.TxO.t},g.c.push(N)}break;case 2173:Cke(q[le.ixfe],le.ext);break;case 125:{if(!K.cellStyles)break;for(;le.e>=le.s;)ue[le.e--]={width:le.w/256,level:le.level||0,hidden:!!(le.flags&1)},ke||(ke=!0,sA(le.w/256)),cf(ue[le.e+1])}break;case 520:{var rr={};le.level!=null&&(fe[le.r]=rr,rr.level=le.level),le.hidden&&(fe[le.r]=rr,rr.hidden=!0),le.hpt&&(fe[le.r]=rr,rr.hpt=le.hpt,rr.hpx=X1(le.hpt))}break;case 38:case 39:case 40:case 41:a["!margins"]||km(a["!margins"]={}),a["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[me]]=le;break;case 161:a["!margins"]||km(a["!margins"]={}),a["!margins"].header=le.header,a["!margins"].footer=le.footer;break;case 574:le.RTL&&(R.Views[0].RTL=!0);break;case 146:W=le;break;case 2198:J=le;break;case 140:D=le;break;case 442:d?U.CodeName=le||U.name:R.WBProps.CodeName=le||"ThisWorkbook";break}}else je||console.error("Missing Info for XLS Record 0x"+me.toString(16)),e.l+=ie}return r.SheetNames=di(i).sort(function(Gt,Vt){return Number(Gt)-Number(Vt)}).map(function(Gt){return i[Gt].name}),t.bookSheets||(r.Sheets=n),!r.SheetNames.length&&f["!ref"]?(r.SheetNames.push("Sheet1"),r.Sheets&&(r.Sheets.Sheet1=f)):r.Preamble=f,r.Sheets&&Y.forEach(function(Gt,Vt){r.Sheets[r.SheetNames[Vt]]["!autofilter"]=Gt}),r.Strings=c,r.SSF=Es(En),K.enc&&(r.Encryption=K.enc),J&&(r.Themes=J),r.Metadata={},D!==void 0&&(r.Metadata.Country=D),_e.names.length>0&&(R.Names=_e.names),r.Workbook=R,r}var Mg={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function z_e(e,t,r){var n=yn.find(e,"/!DocumentSummaryInformation");if(n&&n.size>0)try{var a=nD(n,CS,Mg.DSI);for(var i in a)t[i]=a[i]}catch(d){if(r.WTF)throw d}var l=yn.find(e,"/!SummaryInformation");if(l&&l.size>0)try{var o=nD(l,AS,Mg.SI);for(var c in o)t[c]==null&&(t[c]=o[c])}catch(d){if(r.WTF)throw d}t.HeadingPairs&&t.TitlesOfParts&&(p$(t.HeadingPairs,t.TitlesOfParts,t,r),delete t.HeadingPairs,delete t.TitlesOfParts)}function q_e(e,t){var r=[],n=[],a=[],i=0,l,o=II(CS,"n"),c=II(AS,"n");if(e.Props)for(l=di(e.Props),i=0;i<l.length;++i)(Object.prototype.hasOwnProperty.call(o,l[i])?r:Object.prototype.hasOwnProperty.call(c,l[i])?n:a).push([l[i],e.Props[l[i]]]);if(e.Custprops)for(l=di(e.Custprops),i=0;i<l.length;++i)Object.prototype.hasOwnProperty.call(e.Props||{},l[i])||(Object.prototype.hasOwnProperty.call(o,l[i])?r:Object.prototype.hasOwnProperty.call(c,l[i])?n:a).push([l[i],e.Custprops[l[i]]]);var d=[];for(i=0;i<a.length;++i)N$.indexOf(a[i][0])>-1||x$.indexOf(a[i][0])>-1||a[i][1]!=null&&d.push(a[i]);n.length&&yn.utils.cfb_add(t,"/SummaryInformation",aD(n,Mg.SI,c,AS)),(r.length||d.length)&&yn.utils.cfb_add(t,"/DocumentSummaryInformation",aD(r,Mg.DSI,o,CS,d.length?d:null,Mg.UDI))}function bV(e,t){t||(t={}),mA(t),MC(),t.codepage&&DC(t.codepage);var r,n;if(e.FullPaths){if(yn.find(e,"/encryption"))throw new Error("File is password-protected");r=yn.find(e,"!CompObj"),n=yn.find(e,"/Workbook")||yn.find(e,"/Book")}else{switch(t.type){case"base64":e=jc(Ic(e));break;case"binary":e=jc(e);break;case"buffer":break;case"array":Array.isArray(e)||(e=Array.prototype.slice.call(e));break}Il(e,0),n={content:e}}var a,i;if(r&&R_e(r),t.bookProps&&!t.bookSheets)a={};else{var l=ra?"buffer":"array";if(n&&n.content)a=U_e(n.content,t);else if((i=yn.find(e,"PerfectOffice_MAIN"))&&i.content)a=wm.to_workbook(i.content,(t.type=l,t));else if((i=yn.find(e,"NativeContent_MAIN"))&&i.content)a=wm.to_workbook(i.content,(t.type=l,t));else throw(i=yn.find(e,"MN0"))&&i.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");t.bookVBA&&e.FullPaths&&yn.find(e,"/_VBA_PROJECT_CUR/VBA/dir")&&(a.vbaraw=t5e(e))}var o={};return e.FullPaths&&z_e(e,o,t),a.Props=a.Custprops=o,t.bookFiles&&(a.cfb=e),a}function H_e(e,t){var r=t||{},n=yn.utils.cfb_new({root:"R"}),a="/Workbook";switch(r.bookType||"xls"){case"xls":r.bookType="biff8";case"xla":r.bookType||(r.bookType="xla");case"biff8":a="/Workbook",r.biff=8;break;case"biff5":a="/Book",r.biff=5;break;default:throw new Error("invalid type "+r.bookType+" for XLS CFB")}return yn.utils.cfb_add(n,a,vV(e,r)),r.biff==8&&(e.Props||e.Custprops)&&q_e(e,n),r.biff==8&&e.vbaraw&&r5e(n,yn.read(e.vbaraw,{type:typeof e.vbaraw=="string"?"binary":"buffer"})),n}var vb={0:{f:f3e},1:{f:w3e},2:{f:U3e},3:{f:E3e},4:{f:S3e},5:{f:R3e},6:{f:V3e},7:{f:I3e},8:{f:Q3e},9:{f:Z3e},10:{f:X3e},11:{f:Y3e},12:{f:N3e},13:{f:q3e},14:{f:O3e},15:{f:C3e},16:{f:dV},17:{f:K3e},18:{f:M3e},19:{f:XC},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:KNe},40:{},42:{},43:{f:Vwe},44:{f:Hwe},45:{f:Gwe},46:{f:Ywe},47:{f:Xwe},48:{},49:{f:pve},50:{},51:{f:Tke},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:D$},62:{f:$3e},63:{f:Bke},64:{f:mNe},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:so,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:dNe},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:v3e},148:{f:p3e,p:16},151:{f:aNe},152:{},153:{f:$Ne},154:{},155:{},156:{f:qNe},157:{},158:{},159:{T:1,f:iwe},160:{T:-1},161:{T:1,f:ax},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:J3e},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:Ake},336:{T:-1},337:{f:Ike,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:jS},357:{},358:{},359:{},360:{T:1},361:{},362:{f:I$},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:sNe},427:{f:iNe},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:oNe},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:b3e},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:rNe},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:jS},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:Yke},633:{T:1},634:{T:-1},635:{T:1,f:Gke},636:{T:-1},637:{f:yve},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:ONe},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:xNe},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},DS={6:{f:oN},10:{f:Ih},12:{f:Di},13:{f:Di},14:{f:vi},15:{f:vi},16:{f:ro},17:{f:vi},18:{f:vi},19:{f:Di},20:{f:dD},21:{f:dD},23:{f:I$},24:{f:hD},25:{f:vi},26:{},27:{},28:{f:xye},29:{},34:{f:vi},35:{f:uD},38:{f:ro},39:{f:ro},40:{f:ro},41:{f:ro},42:{f:vi},43:{f:vi},47:{f:Cwe},49:{f:q2e},51:{f:Di},60:{},61:{f:R2e},64:{f:vi},65:{f:z2e},66:{f:Di},77:{},80:{},81:{},82:{},85:{f:Di},89:{},90:{},91:{},92:{f:j2e},93:{f:bye},94:{},95:{f:vi},96:{},97:{},99:{f:vi},125:{f:D$},128:{f:nye},129:{f:A2e},130:{f:Di},131:{f:vi},132:{f:vi},133:{f:E2e},134:{},140:{f:jye},141:{f:Di},144:{},146:{f:Eye},151:{},152:{},153:{},154:{},155:{},156:{f:Di},157:{},158:{},160:{f:Lye},161:{f:Pye},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:J2e},190:{f:eye},193:{f:Ih},197:{},198:{},199:{},200:{},201:{},202:{f:vi},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:Di},220:{},221:{f:vi},222:{},224:{f:rye},225:{f:S2e},226:{f:Ih},227:{},229:{f:pye},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:O2e},253:{f:$2e},255:{f:I2e},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:_$},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:vi},353:{f:Ih},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:oye},431:{f:vi},432:{},433:{},434:{},437:{},438:{f:wye},439:{f:vi},440:{f:kye},441:{},442:{f:iv},443:{},444:{f:Di},445:{},446:{},448:{f:Ih},449:{f:L2e,r:2},450:{f:Ih},512:{f:lD},513:{f:Mye},515:{f:iye},516:{f:W2e},517:{f:cD},519:{f:Rye},520:{f:D2e},523:{},545:{f:fD},549:{f:iD},566:{},574:{f:B2e},638:{f:Q2e},659:{},1048:{},1054:{f:G2e},1084:{},1212:{f:hye},2048:{f:_ye},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:R2},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:Ih},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:Tye,r:12},2173:{f:jke,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:vi,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:uye,r:12},2197:{},2198:{f:yke,r:12},2199:{},2200:{},2201:{},2202:{f:fye,r:12},2203:{f:Ih},2204:{},2205:{},2206:{},2207:{},2211:{f:M2e},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:Di},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:Iye},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:Aye},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:lD},1:{},2:{f:qye},3:{f:Uye},4:{f:Bye},5:{f:cD},7:{f:$ye},8:{},9:{f:R2},11:{},22:{f:Di},30:{f:Y2e},31:{},32:{},33:{f:fD},36:{},37:{f:iD},50:{f:Vye},62:{},52:{},67:{},68:{f:Di},69:{},86:{},126:{},127:{f:Fye},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:Wye},223:{},234:{},354:{},421:{},518:{f:oN},521:{f:R2},536:{f:hD},547:{f:uD},561:{},579:{},1030:{f:oN},1033:{f:R2},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function _r(e,t,r,n){var a=t;if(!isNaN(a)){var i=n||(r||[]).length||0,l=e.next(4);l.write_shift(2,a),l.write_shift(2,i),i>0&&WC(r)&&e.push(r)}}function $_e(e,t,r,n){var a=(r||[]).length||0;if(a<=8224)return _r(e,t,r,a);var i=t;if(!isNaN(i)){for(var l=r.parts||[],o=0,c=0,d=0;d+(l[o]||8224)<=8224;)d+=l[o]||8224,o++;var f=e.next(4);for(f.write_shift(2,i),f.write_shift(2,d),e.push(r.slice(c,c+d)),c+=d;c<a;){for(f=e.next(4),f.write_shift(2,60),d=0;d+(l[o]||8224)<=8224;)d+=l[o]||8224,o++;f.write_shift(2,d),e.push(r.slice(c,c+d)),c+=d}}}function dv(e,t,r){return e||(e=Bt(7)),e.write_shift(2,t),e.write_shift(2,r),e.write_shift(2,0),e.write_shift(1,0),e}function V_e(e,t,r,n){var a=Bt(9);return dv(a,e,t),S$(r,n||"b",a),a}function W_e(e,t,r){var n=Bt(8+2*r.length);return dv(n,e,t),n.write_shift(1,r.length),n.write_shift(r.length,r,"sbcs"),n.l<n.length?n.slice(0,n.l):n}function K_e(e,t,r,n){if(t.v!=null)switch(t.t){case"d":case"n":var a=t.t=="d"?Yi(As(t.v)):t.v;a==(a|0)&&a>=0&&a<65536?_r(e,2,Hye(r,n,a)):_r(e,3,zye(r,n,a));return;case"b":case"e":_r(e,5,V_e(r,n,t.v,t.t));return;case"s":case"str":_r(e,4,W_e(r,n,(t.v||"").slice(0,255)));return}_r(e,1,dv(null,r,n))}function G_e(e,t,r,n){var a=Array.isArray(t),i=Ta(t["!ref"]||"A1"),l,o="",c=[];if(i.e.c>255||i.e.r>16383){if(n.WTF)throw new Error("Range "+(t["!ref"]||"A1")+" exceeds format limit A1:IV16384");i.e.c=Math.min(i.e.c,255),i.e.r=Math.min(i.e.c,16383),l=Kn(i)}for(var d=i.s.r;d<=i.e.r;++d){o=Si(d);for(var f=i.s.c;f<=i.e.c;++f){d===i.s.r&&(c[f]=Ws(f)),l=c[f]+o;var p=a?(t[d]||[])[f]:t[l];p&&K_e(e,p,d,f)}}}function X_e(e,t){for(var r=t||{},n=nc(),a=0,i=0;i<e.SheetNames.length;++i)e.SheetNames[i]==r.sheet&&(a=i);if(a==0&&r.sheet&&e.SheetNames[0]!=r.sheet)throw new Error("Sheet not found: "+r.sheet);return _r(n,r.biff==4?1033:r.biff==3?521:9,rA(e,16,r)),G_e(n,e.Sheets[e.SheetNames[a]],a,r),_r(n,10),n.end()}function Y_e(e,t,r){_r(e,49,H2e({sz:12,name:"Arial"},r))}function Z_e(e,t,r){t&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)t[a]!=null&&_r(e,1054,X2e(a,t[a],r))})}function Q_e(e,t){var r=Bt(19);r.write_shift(4,2151),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,1),r.write_shift(4,0),_r(e,2151,r),r=Bt(39),r.write_shift(4,2152),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,0),r.write_shift(4,0),r.write_shift(2,1),r.write_shift(4,4),r.write_shift(2,0),T$(Ta(t["!ref"]||"A1"),r),r.write_shift(4,4),_r(e,2152,r)}function J_e(e,t){for(var r=0;r<16;++r)_r(e,224,oD({numFmtId:0,style:!0},0,t));t.cellXfs.forEach(function(n){_r(e,224,oD(n,0,t))})}function eSe(e,t){for(var r=0;r<t["!links"].length;++r){var n=t["!links"][r];_r(e,440,Nye(n)),n[1].Tooltip&&_r(e,2048,Sye(n))}delete t["!links"]}function tSe(e,t){if(t){var r=0;t.forEach(function(n,a){++r<=256&&n&&_r(e,125,Oye(Uk(a,n),a))})}}function rSe(e,t,r,n,a){var i=16+wf(a.cellXfs,t,a);if(t.v==null&&!t.bf){_r(e,513,Vm(r,n,i));return}if(t.bf)_r(e,6,A4e(t,r,n,a,i));else switch(t.t){case"d":case"n":var l=t.t=="d"?Yi(As(t.v)):t.v;_r(e,515,lye(r,n,l,i));break;case"b":case"e":_r(e,517,sye(r,n,t.v,i,a,t.t));break;case"s":case"str":if(a.bookSST){var o=dA(a.Strings,t.v,a.revStrings);_r(e,253,V2e(r,n,o,i))}else _r(e,516,K2e(r,n,(t.v||"").slice(0,255),i,a));break;default:_r(e,513,Vm(r,n,i))}}function nSe(e,t,r){var n=nc(),a=r.SheetNames[e],i=r.Sheets[a]||{},l=(r||{}).Workbook||{},o=(l.Sheets||[])[e]||{},c=Array.isArray(i),d=t.biff==8,f,p="",y=[],g=Ta(i["!ref"]||"A1"),N=d?65536:16384;if(g.e.c>255||g.e.r>=N){if(t.WTF)throw new Error("Range "+(i["!ref"]||"A1")+" exceeds format limit A1:IV16384");g.e.c=Math.min(g.e.c,255),g.e.r=Math.min(g.e.c,N-1)}_r(n,2057,rA(r,16,t)),_r(n,13,id(1)),_r(n,12,id(100)),_r(n,15,ko(!0)),_r(n,17,ko(!1)),_r(n,16,Hm(.001)),_r(n,95,ko(!0)),_r(n,42,ko(!1)),_r(n,43,ko(!1)),_r(n,130,id(1)),_r(n,128,aye()),_r(n,131,ko(!1)),_r(n,132,ko(!1)),d&&tSe(n,i["!cols"]),_r(n,512,Z2e(g,t)),d&&(i["!links"]=[]);for(var w=g.s.r;w<=g.e.r;++w){p=Si(w);for(var k=g.s.c;k<=g.e.c;++k){w===g.s.r&&(y[k]=Ws(k)),f=y[k]+p;var S=c?(i[w]||[])[k]:i[f];S&&(rSe(n,S,w,k,t),d&&S.l&&i["!links"].push([f,S.l]))}}var O=o.CodeName||o.name||a;return d&&_r(n,574,U2e((l.Views||[])[0])),d&&(i["!merges"]||[]).length&&_r(n,229,gye(i["!merges"])),d&&eSe(n,i),_r(n,442,j$(O)),d&&Q_e(n,i),_r(n,10),n.end()}function aSe(e,t,r){var n=nc(),a=(e||{}).Workbook||{},i=a.Sheets||[],l=a.WBProps||{},o=r.biff==8,c=r.biff==5;if(_r(n,2057,rA(e,5,r)),r.bookType=="xla"&&_r(n,135),_r(n,225,o?id(1200):null),_r(n,193,s2e(2)),c&&_r(n,191),c&&_r(n,192),_r(n,226),_r(n,92,C2e("SheetJS",r)),_r(n,66,id(o?1200:1252)),o&&_r(n,353,id(0)),o&&_r(n,448),_r(n,317,Dye(e.SheetNames.length)),o&&e.vbaraw&&_r(n,211),o&&e.vbaraw){var d=l.CodeName||"ThisWorkbook";_r(n,442,j$(d))}_r(n,156,id(17)),_r(n,25,ko(!1)),_r(n,18,ko(!1)),_r(n,19,id(0)),o&&_r(n,431,ko(!1)),o&&_r(n,444,id(0)),_r(n,61,F2e()),_r(n,64,ko(!1)),_r(n,141,id(0)),_r(n,34,ko(LNe(e)=="true")),_r(n,14,ko(!0)),o&&_r(n,439,ko(!1)),_r(n,218,id(0)),Y_e(n,e,r),Z_e(n,e.SSF,r),J_e(n,r),o&&_r(n,352,ko(!1));var f=n.end(),p=nc();o&&_r(p,140,Cye()),o&&r.Strings&&$_e(p,252,P2e(r.Strings)),_r(p,10);var y=p.end(),g=nc(),N=0,w=0;for(w=0;w<e.SheetNames.length;++w)N+=(o?12:11)+(o?2:1)*e.SheetNames[w].length;var k=f.length+N+y.length;for(w=0;w<e.SheetNames.length;++w){var S=i[w]||{};_r(g,133,T2e({pos:k,hs:S.Hidden||0,dt:0,name:e.SheetNames[w]},r)),k+=t[w].length}var O=g.end();if(N!=O.length)throw new Error("BS8 "+N+" != "+O.length);var E=[];return f.length&&E.push(f),O.length&&E.push(O),y.length&&E.push(y),bl(E)}function sSe(e,t){var r=t||{},n=[];e&&!e.SSF&&(e.SSF=Es(En)),e&&e.SSF&&(gp(),Ik(e.SSF),r.revssf=Mk(e.SSF),r.revssf[e.SSF[65535]]=0,r.ssf=e.SSF),r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,xA(r),r.cellXfs=[],wf(r.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={});for(var a=0;a<e.SheetNames.length;++a)n[n.length]=nSe(a,r,e);return n.unshift(aSe(e,n,r)),bl(n)}function vV(e,t){for(var r=0;r<=e.SheetNames.length;++r){var n=e.Sheets[e.SheetNames[r]];if(!(!n||!n["!ref"])){var a=ac(n["!ref"]);a.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+e.SheetNames[r]+"' extends beyond column IV (255).  Data may be lost.")}}var i=t||{};switch(i.biff||2){case 8:case 5:return sSe(e,t);case 4:case 3:case 2:return X_e(e,t)}throw new Error("invalid type "+i.bookType+" for BIFF")}function ND(e,t){var r=t||{},n=r.dense?[]:{};e=e.replace(/<!--.*?-->/g,"");var a=e.match(/<table/i);if(!a)throw new Error("Invalid HTML: could not find <table>");var i=e.match(/<\/table/i),l=a.index,o=i&&i.index||e.length,c=Hbe(e.slice(l,o),/(:?<tr[^>]*>)/i,"<tr>"),d=-1,f=0,p=0,y=0,g={s:{r:1e7,c:1e7},e:{r:0,c:0}},N=[];for(l=0;l<c.length;++l){var w=c[l].trim(),k=w.slice(0,3).toLowerCase();if(k=="<tr"){if(++d,r.sheetRows&&r.sheetRows<=d){--d;break}f=0;continue}if(!(k!="<td"&&k!="<th")){var S=w.split(/<\/t[dh]>/i);for(o=0;o<S.length;++o){var O=S[o].trim();if(O.match(/<t[dh]/i)){for(var E=O,D=0;E.charAt(0)=="<"&&(D=E.indexOf(">"))>-1;)E=E.slice(D+1);for(var q=0;q<N.length;++q){var W=N[q];W.s.c==f&&W.s.r<d&&d<=W.e.r&&(f=W.e.c+1,q=-1)}var R=Mn(O.slice(0,O.indexOf(">")));y=R.colspan?+R.colspan:1,((p=+R.rowspan)>1||y>1)&&N.push({s:{r:d,c:f},e:{r:d+(p||1)-1,c:f+y-1}});var U=R.t||R["data-t"]||"";if(!E.length){f+=y;continue}if(E=HH(E),g.s.r>d&&(g.s.r=d),g.e.r<d&&(g.e.r=d),g.s.c>f&&(g.s.c=f),g.e.c<f&&(g.e.c=f),!E.length){f+=y;continue}var z={t:"s",v:E};r.raw||!E.trim().length||U=="s"||(E==="TRUE"?z={t:"b",v:!0}:E==="FALSE"?z={t:"b",v:!1}:isNaN(Jd(E))?isNaN(K1(E).getDate())||(z={t:"d",v:As(E)},r.cellDates||(z={t:"n",v:Yi(z.v)}),z.z=r.dateNF||En[14]):z={t:"n",v:Jd(E)}),r.dense?(n[d]||(n[d]=[]),n[d][f]=z):n[Tn({r:d,c:f})]=z,f+=y}}}}return n["!ref"]=Kn(g),N.length&&(n["!merges"]=N),n}function iSe(e,t,r,n){for(var a=e["!merges"]||[],i=[],l=t.s.c;l<=t.e.c;++l){for(var o=0,c=0,d=0;d<a.length;++d)if(!(a[d].s.r>r||a[d].s.c>l)&&!(a[d].e.r<r||a[d].e.c<l)){if(a[d].s.r<r||a[d].s.c<l){o=-1;break}o=a[d].e.r-a[d].s.r+1,c=a[d].e.c-a[d].s.c+1;break}if(!(o<0)){var f=Tn({r,c:l}),p=n.dense?(e[r]||[])[l]:e[f],y=p&&p.v!=null&&(p.h||HC(p.w||(Y0(p),p.w)||""))||"",g={};o>1&&(g.rowspan=o),c>1&&(g.colspan=c),n.editable?y='<span contenteditable="true">'+y+"</span>":p&&(g["data-t"]=p&&p.t||"z",p.v!=null&&(g["data-v"]=p.v),p.z!=null&&(g["data-z"]=p.z),p.l&&(p.l.Target||"#").charAt(0)!="#"&&(y='<a href="'+p.l.Target+'">'+y+"</a>")),g.id=(n.id||"sjs")+"-"+f,i.push(Nr("td",y,g))}}var N="<tr>";return N+i.join("")+"</tr>"}var lSe='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',oSe="</body></html>";function cSe(e,t){var r=e.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!r||r.length==0)throw new Error("Invalid HTML: could not find <table>");if(r.length==1)return yf(ND(r[0],t),t);var n=bA();return r.forEach(function(a,i){vA(n,ND(a,t),"Sheet"+(i+1))}),n}function dSe(e,t,r){var n=[];return n.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function yV(e,t){var r=t||{},n=r.header!=null?r.header:lSe,a=r.footer!=null?r.footer:oSe,i=[n],l=ac(e["!ref"]);r.dense=Array.isArray(e),i.push(dSe(e,l,r));for(var o=l.s.r;o<=l.e.r;++o)i.push(iSe(e,l,o,r));return i.push("</table>"+a),i.join("")}function wV(e,t,r){var n=r||{},a=0,i=0;if(n.origin!=null)if(typeof n.origin=="number")a=n.origin;else{var l=typeof n.origin=="string"?Ks(n.origin):n.origin;a=l.r,i=l.c}var o=t.getElementsByTagName("tr"),c=Math.min(n.sheetRows||1e7,o.length),d={s:{r:0,c:0},e:{r:a,c:i}};if(e["!ref"]){var f=ac(e["!ref"]);d.s.r=Math.min(d.s.r,f.s.r),d.s.c=Math.min(d.s.c,f.s.c),d.e.r=Math.max(d.e.r,f.e.r),d.e.c=Math.max(d.e.c,f.e.c),a==-1&&(d.e.r=a=f.e.r+1)}var p=[],y=0,g=e["!rows"]||(e["!rows"]=[]),N=0,w=0,k=0,S=0,O=0,E=0;for(e["!cols"]||(e["!cols"]=[]);N<o.length&&w<c;++N){var D=o[N];if(_D(D)){if(n.display)continue;g[w]={hidden:!0}}var q=D.children;for(k=S=0;k<q.length;++k){var W=q[k];if(!(n.display&&_D(W))){var R=W.hasAttribute("data-v")?W.getAttribute("data-v"):W.hasAttribute("v")?W.getAttribute("v"):HH(W.innerHTML),U=W.getAttribute("data-z")||W.getAttribute("z");for(y=0;y<p.length;++y){var z=p[y];z.s.c==S+i&&z.s.r<w+a&&w+a<=z.e.r&&(S=z.e.c+1-i,y=-1)}E=+W.getAttribute("colspan")||1,((O=+W.getAttribute("rowspan")||1)>1||E>1)&&p.push({s:{r:w+a,c:S+i},e:{r:w+a+(O||1)-1,c:S+i+(E||1)-1}});var Z={t:"s",v:R},H=W.getAttribute("data-t")||W.getAttribute("t")||"";R!=null&&(R.length==0?Z.t=H||"z":n.raw||R.trim().length==0||H=="s"||(R==="TRUE"?Z={t:"b",v:!0}:R==="FALSE"?Z={t:"b",v:!1}:isNaN(Jd(R))?isNaN(K1(R).getDate())||(Z={t:"d",v:As(R)},n.cellDates||(Z={t:"n",v:Yi(Z.v)}),Z.z=n.dateNF||En[14]):Z={t:"n",v:Jd(R)})),Z.z===void 0&&U!=null&&(Z.z=U);var K="",J=W.getElementsByTagName("A");if(J&&J.length)for(var ae=0;ae<J.length&&!(J[ae].hasAttribute("href")&&(K=J[ae].getAttribute("href"),K.charAt(0)!="#"));++ae);K&&K.charAt(0)!="#"&&(Z.l={Target:K}),n.dense?(e[w+a]||(e[w+a]=[]),e[w+a][S+i]=Z):e[Tn({c:S+i,r:w+a})]=Z,d.e.c<S+i&&(d.e.c=S+i),S+=E}}++w}return p.length&&(e["!merges"]=(e["!merges"]||[]).concat(p)),d.e.r=Math.max(d.e.r,w-1+a),e["!ref"]=Kn(d),w>=c&&(e["!fullref"]=Kn((d.e.r=o.length-N+w-1+a,d))),e}function kV(e,t){var r=t||{},n=r.dense?[]:{};return wV(n,e,t)}function uSe(e,t){return yf(kV(e,t),t)}function _D(e){var t="",r=hSe(e);return r&&(t=r(e).getPropertyValue("display")),t||(t=e.style&&e.style.display),t==="none"}function hSe(e){return e.ownerDocument.defaultView&&typeof e.ownerDocument.defaultView.getComputedStyle=="function"?e.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function fSe(e){var t=e.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(n,a){return Array(parseInt(a,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),r=Ea(t.replace(/<[^>]*>/g,""));return[r]}var SD={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function NV(e,t){var r=t||{},n=$C(e),a=[],i,l,o={name:""},c="",d=0,f,p,y={},g=[],N=r.dense?[]:{},w,k,S={value:""},O="",E=0,D=[],q=-1,W=-1,R={s:{r:1e6,c:1e7},e:{r:0,c:0}},U=0,z={},Z=[],H={},K=0,J=0,ae=[],se=1,ue=1,fe=[],ke={Names:[]},_e={},Le=["",""],xe=[],B={},ee="",Y=0,re=!1,Q=!1,Ce=0;for(fb.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");w=fb.exec(n);)switch(w[3]=w[3].replace(/_.*$/,"")){case"table":case"":w[1]==="/"?(R.e.c>=R.s.c&&R.e.r>=R.s.r?N["!ref"]=Kn(R):N["!ref"]="A1:A1",r.sheetRows>0&&r.sheetRows<=R.e.r&&(N["!fullref"]=N["!ref"],R.e.r=r.sheetRows-1,N["!ref"]=Kn(R)),Z.length&&(N["!merges"]=Z),ae.length&&(N["!rows"]=ae),f.name=f.||f.name,typeof JSON<"u"&&JSON.stringify(f),g.push(f.name),y[f.name]=N,Q=!1):w[0].charAt(w[0].length-2)!=="/"&&(f=Mn(w[0],!1),q=W=-1,R.s.r=R.s.c=1e7,R.e.r=R.e.c=0,N=r.dense?[]:{},Z=[],ae=[],Q=!0);break;case"table-row-group":w[1]==="/"?--U:++U;break;case"table-row":case"":if(w[1]==="/"){q+=se,se=1;break}if(p=Mn(w[0],!1),p.?q=p.-1:q==-1&&(q=0),se=+p["number-rows-repeated"]||1,se<10)for(Ce=0;Ce<se;++Ce)U>0&&(ae[q+Ce]={level:U});W=-1;break;case"covered-table-cell":w[1]!=="/"&&++W,r.sheetStubs&&(r.dense?(N[q]||(N[q]=[]),N[q][W]={t:"z"}):N[Tn({r:q,c:W})]={t:"z"}),O="",D=[];break;case"table-cell":case"":if(w[0].charAt(w[0].length-2)==="/")++W,S=Mn(w[0],!1),ue=parseInt(S["number-columns-repeated"]||"1",10),k={t:"z",v:null},S.formula&&r.cellFormula!=!1&&(k.f=yD(Ea(S.formula))),(S.||S["value-type"])=="string"&&(k.t="s",k.v=Ea(S["string-value"]||""),r.dense?(N[q]||(N[q]=[]),N[q][W]=k):N[Tn({r:q,c:W})]=k),W+=ue-1;else if(w[1]!=="/"){++W,O="",E=0,D=[],ue=1;var me=se?q+se-1:q;if(W>R.e.c&&(R.e.c=W),W<R.s.c&&(R.s.c=W),q<R.s.r&&(R.s.r=q),me>R.e.r&&(R.e.r=me),S=Mn(w[0],!1),xe=[],B={},k={t:S.||S["value-type"],v:null},r.cellFormula)if(S.formula&&(S.formula=Ea(S.formula)),S["number-matrix-columns-spanned"]&&S["number-matrix-rows-spanned"]&&(K=parseInt(S["number-matrix-rows-spanned"],10)||0,J=parseInt(S["number-matrix-columns-spanned"],10)||0,H={s:{r:q,c:W},e:{r:q+K-1,c:W+J-1}},k.F=Kn(H),fe.push([H,k.F])),S.formula)k.f=yD(S.formula);else for(Ce=0;Ce<fe.length;++Ce)q>=fe[Ce][0].s.r&&q<=fe[Ce][0].e.r&&W>=fe[Ce][0].s.c&&W<=fe[Ce][0].e.c&&(k.F=fe[Ce][1]);switch((S["number-columns-spanned"]||S["number-rows-spanned"])&&(K=parseInt(S["number-rows-spanned"],10)||0,J=parseInt(S["number-columns-spanned"],10)||0,H={s:{r:q,c:W},e:{r:q+K-1,c:W+J-1}},Z.push(H)),S["number-columns-repeated"]&&(ue=parseInt(S["number-columns-repeated"],10)),k.t){case"boolean":k.t="b",k.v=Ss(S["boolean-value"]);break;case"float":k.t="n",k.v=parseFloat(S.value);break;case"percentage":k.t="n",k.v=parseFloat(S.value);break;case"currency":k.t="n",k.v=parseFloat(S.value);break;case"date":k.t="d",k.v=As(S["date-value"]),r.cellDates||(k.t="n",k.v=Yi(k.v)),k.z="m/d/yy";break;case"time":k.t="n",k.v=Ube(S["time-value"])/86400,r.cellDates&&(k.t="d",k.v=Lk(k.v)),k.z="HH:MM:SS";break;case"number":k.t="n",k.v=parseFloat(S.);break;default:if(k.t==="string"||k.t==="text"||!k.t)k.t="s",S["string-value"]!=null&&(O=Ea(S["string-value"]),D=[]);else throw new Error("Unsupported value type "+k.t)}}else{if(re=!1,k.t==="s"&&(k.v=O||"",D.length&&(k.R=D),re=E==0),_e.Target&&(k.l=_e),xe.length>0&&(k.c=xe,xe=[]),O&&r.cellText!==!1&&(k.w=O),re&&(k.t="z",delete k.v),(!re||r.sheetStubs)&&!(r.sheetRows&&r.sheetRows<=q))for(var ie=0;ie<se;++ie){if(ue=parseInt(S["number-columns-repeated"]||"1",10),r.dense)for(N[q+ie]||(N[q+ie]=[]),N[q+ie][W]=ie==0?k:Es(k);--ue>0;)N[q+ie][W+ue]=Es(k);else for(N[Tn({r:q+ie,c:W})]=k;--ue>0;)N[Tn({r:q+ie,c:W+ue})]=Es(k);R.e.c<=W&&(R.e.c=W)}ue=parseInt(S["number-columns-repeated"]||"1",10),W+=ue-1,ue=0,k={},O="",D=[]}_e={};break;case"document":case"document-content":case"":case"spreadsheet":case"":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(w[1]==="/"){if((i=a.pop())[0]!==w[3])throw"Bad state: "+i}else w[0].charAt(w[0].length-2)!=="/"&&a.push([w[3],!0]);break;case"annotation":if(w[1]==="/"){if((i=a.pop())[0]!==w[3])throw"Bad state: "+i;B.t=O,D.length&&(B.R=D),B.a=ee,xe.push(B)}else w[0].charAt(w[0].length-2)!=="/"&&a.push([w[3],!1]);ee="",Y=0,O="",E=0,D=[];break;case"creator":w[1]==="/"?ee=n.slice(Y,w.index):Y=w.index+w[0].length;break;case"meta":case"":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(w[1]==="/"){if((i=a.pop())[0]!==w[3])throw"Bad state: "+i}else w[0].charAt(w[0].length-2)!=="/"&&a.push([w[3],!1]);O="",E=0,D=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(w[1]==="/"){if(z[o.name]=c,(i=a.pop())[0]!==w[3])throw"Bad state: "+i}else w[0].charAt(w[0].length-2)!=="/"&&(c="",o=Mn(w[0],!1),a.push([w[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(a[a.length-1][0]){case"time-style":case"date-style":l=Mn(w[0],!1),c+=SD[w[3]][l.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(a[a.length-1][0]){case"time-style":case"date-style":l=Mn(w[0],!1),c+=SD[w[3]][l.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(w[0].slice(-2)==="/>")break;if(w[1]==="/")switch(a[a.length-1][0]){case"number-style":case"date-style":case"time-style":c+=n.slice(d,w.index);break}else d=w.index+w[0].length;break;case"named-range":l=Mn(w[0],!1),Le=cN(l["cell-range-address"]);var je={Name:l.name,Ref:Le[0]+"!"+Le[1]};Q&&(je.Sheet=g.length),ke.Names.push(je);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"":if(["master-styles"].indexOf(a[a.length-1][0])>-1)break;if(w[1]==="/"&&(!S||!S["string-value"])){var be=fSe(n.slice(E,w.index));O=(O.length>0?O+`
`:"")+be[0]}else Mn(w[0],!1),E=w.index+w[0].length;break;case"s":break;case"database-range":if(w[1]==="/")break;try{Le=cN(Mn(w[0])["target-range-address"]),y[Le[0]]["!autofilter"]={ref:Le[1]}}catch{}break;case"date":break;case"object":break;case"title":case"":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(w[1]!=="/"){if(_e=Mn(w[0],!1),!_e.href)break;_e.Target=Ea(_e.href),delete _e.href,_e.Target.charAt(0)=="#"&&_e.Target.indexOf(".")>-1?(Le=cN(_e.Target.slice(1)),_e.Target="#"+Le[0]+"!"+Le[1]):_e.Target.match(/^\.\.[\\\/]/)&&(_e.Target=_e.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(w[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case":":case":":break;default:if(r.WTF)throw new Error(w)}}var le={Sheets:y,SheetNames:g,Workbook:ke};return r.bookSheets&&delete le.Sheets,le}function jD(e,t){t=t||{},ad(e,"META-INF/manifest.xml")&&Uve(Ii(e,"META-INF/manifest.xml"),t);var r=Cc(e,"content.xml");if(!r)throw new Error("Missing content.xml in ODS / UOF file");var n=NV(as(r),t);return ad(e,"meta.xml")&&(n.Props=f$(Ii(e,"meta.xml"))),n}function CD(e,t){return NV(e,t)}var mSe=(function(){var e=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),t="<office:document-styles "+hb({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+e+"</office:document-styles>";return function(){return ji+t}})(),AD=(function(){var e=function(i){return Xa(i).replace(/  +/g,function(l){return'<text:s text:c="'+l.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},t=`          <table:table-cell />
`,r=`          <table:covered-table-cell/>
`,n=function(i,l,o){var c=[];c.push('      <table:table table:name="'+Xa(l.SheetNames[o])+`" table:style-name="ta1">
`);var d=0,f=0,p=ac(i["!ref"]||"A1"),y=i["!merges"]||[],g=0,N=Array.isArray(i);if(i["!cols"])for(f=0;f<=p.e.c;++f)c.push("        <table:table-column"+(i["!cols"][f]?' table:style-name="co'+i["!cols"][f].ods+'"':"")+`></table:table-column>
`);var w="",k=i["!rows"]||[];for(d=0;d<p.s.r;++d)w=k[d]?' table:style-name="ro'+k[d].ods+'"':"",c.push("        <table:table-row"+w+`></table:table-row>
`);for(;d<=p.e.r;++d){for(w=k[d]?' table:style-name="ro'+k[d].ods+'"':"",c.push("        <table:table-row"+w+`>
`),f=0;f<p.s.c;++f)c.push(t);for(;f<=p.e.c;++f){var S=!1,O={},E="";for(g=0;g!=y.length;++g)if(!(y[g].s.c>f)&&!(y[g].s.r>d)&&!(y[g].e.c<f)&&!(y[g].e.r<d)){(y[g].s.c!=f||y[g].s.r!=d)&&(S=!0),O["table:number-columns-spanned"]=y[g].e.c-y[g].s.c+1,O["table:number-rows-spanned"]=y[g].e.r-y[g].s.r+1;break}if(S){c.push(r);continue}var D=Tn({r:d,c:f}),q=N?(i[d]||[])[f]:i[D];if(q&&q.f&&(O["table:formula"]=Xa(D4e(q.f)),q.F&&q.F.slice(0,D.length)==D)){var W=ac(q.F);O["table:number-matrix-columns-spanned"]=W.e.c-W.s.c+1,O["table:number-matrix-rows-spanned"]=W.e.r-W.s.r+1}if(!q){c.push(t);continue}switch(q.t){case"b":E=q.v?"TRUE":"FALSE",O["office:value-type"]="boolean",O["office:boolean-value"]=q.v?"true":"false";break;case"n":E=q.w||String(q.v||0),O["office:value-type"]="float",O["office:value"]=q.v||0;break;case"s":case"str":E=q.v==null?"":q.v,O["office:value-type"]="string";break;case"d":E=q.w||As(q.v).toISOString(),O["office:value-type"]="date",O["office:date-value"]=As(q.v).toISOString(),O["table:style-name"]="ce1";break;default:c.push(t);continue}var R=e(E);if(q.l&&q.l.Target){var U=q.l.Target;U=U.charAt(0)=="#"?"#"+M4e(U.slice(1)):U,U.charAt(0)!="#"&&!U.match(/^\w+:/)&&(U="../"+U),R=Nr("text:a",R,{"xlink:href":U.replace(/&/g,"&amp;")})}c.push("          "+Nr("table:table-cell",Nr("text:p",R,{}),O)+`
`)}c.push(`        </table:table-row>
`)}return c.push(`      </table:table>
`),c.join("")},a=function(i,l){i.push(` <office:automatic-styles>
`),i.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),i.push(`   <number:month number:style="long"/>
`),i.push(`   <number:text>/</number:text>
`),i.push(`   <number:day number:style="long"/>
`),i.push(`   <number:text>/</number:text>
`),i.push(`   <number:year/>
`),i.push(`  </number:date-style>
`);var o=0;l.SheetNames.map(function(d){return l.Sheets[d]}).forEach(function(d){if(d&&d["!cols"]){for(var f=0;f<d["!cols"].length;++f)if(d["!cols"][f]){var p=d["!cols"][f];if(p.width==null&&p.wpx==null&&p.wch==null)continue;cf(p),p.ods=o;var y=d["!cols"][f].wpx+"px";i.push('  <style:style style:name="co'+o+`" style:family="table-column">
`),i.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+y+`"/>
`),i.push(`  </style:style>
`),++o}}});var c=0;l.SheetNames.map(function(d){return l.Sheets[d]}).forEach(function(d){if(d&&d["!rows"]){for(var f=0;f<d["!rows"].length;++f)if(d["!rows"][f]){d["!rows"][f].ods=c;var p=d["!rows"][f].hpx+"px";i.push('  <style:style style:name="ro'+c+`" style:family="table-row">
`),i.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+p+`"/>
`),i.push(`  </style:style>
`),++c}}}),i.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),i.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),i.push(`  </style:style>
`),i.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),i.push(` </office:automatic-styles>
`)};return function(l,o){var c=[ji],d=hb({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),f=hb({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});o.bookType=="fods"?(c.push("<office:document"+d+f+`>
`),c.push(h$().replace(/office:document-meta/g,"office:meta"))):c.push("<office:document-content"+d+`>
`),a(c,l),c.push(`  <office:body>
`),c.push(`    <office:spreadsheet>
`);for(var p=0;p!=l.SheetNames.length;++p)c.push(n(l.Sheets[l.SheetNames[p]],l,p));return c.push(`    </office:spreadsheet>
`),c.push(`  </office:body>
`),o.bookType=="fods"?c.push("</office:document>"):c.push("</office:document-content>"),c.join("")}})();function _V(e,t){if(t.bookType=="fods")return AD(e,t);var r=UC(),n="",a=[],i=[];return n="mimetype",Yn(r,n,"application/vnd.oasis.opendocument.spreadsheet"),n="content.xml",Yn(r,n,AD(e,t)),a.push([n,"text/xml"]),i.push([n,"ContentFile"]),n="styles.xml",Yn(r,n,mSe(e,t)),a.push([n,"text/xml"]),i.push([n,"StylesFile"]),n="meta.xml",Yn(r,n,ji+h$()),a.push([n,"text/xml"]),i.push([n,"MetadataFile"]),n="manifest.rdf",Yn(r,n,Hve(i)),a.push([n,"application/rdf+xml"]),n="META-INF/manifest.xml",Yn(r,n,zve(a)),r}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function Wm(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function MS(e){return typeof TextDecoder<"u"?new TextDecoder().decode(e):as(vf(e))}function xSe(e){return typeof TextEncoder<"u"?new TextEncoder().encode(e):jc(Lu(e))}function pSe(e,t){e:for(var r=0;r<=e.length-t.length;++r){for(var n=0;n<t.length;++n)if(e[r+n]!=t[n])continue e;return!0}return!1}function uf(e){var t=e.reduce(function(a,i){return a+i.length},0),r=new Uint8Array(t),n=0;return e.forEach(function(a){r.set(a,n),n+=a.length}),r}function ED(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),(e+(e>>4)&252645135)*16843009>>>24}function gSe(e,t){for(var r=(e[t+15]&127)<<7|e[t+14]>>1,n=e[t+14]&1,a=t+13;a>=t;--a)n=n*256+e[a];return(e[t+15]&128?-n:n)*Math.pow(10,r-6176)}function bSe(e,t,r){var n=Math.floor(r==0?0:Math.LOG10E*Math.log(Math.abs(r)))+6176-20,a=r/Math.pow(10,n-6176);e[t+15]|=n>>7,e[t+14]|=(n&127)<<1;for(var i=0;a>=1;++i,a/=256)e[t+i]=a&255;e[t+15]|=r>=0?0:128}function yb(e,t){var r=t?t[0]:0,n=e[r]&127;e:if(e[r++]>=128&&(n|=(e[r]&127)<<7,e[r++]<128||(n|=(e[r]&127)<<14,e[r++]<128)||(n|=(e[r]&127)<<21,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,28),++r,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,35),++r,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,42),++r,e[r++]<128)))break e;return t&&(t[0]=r),n}function Va(e){var t=new Uint8Array(7);t[0]=e&127;var r=1;e:if(e>127){if(t[r-1]|=128,t[r]=e>>7&127,++r,e<=16383||(t[r-1]|=128,t[r]=e>>14&127,++r,e<=2097151)||(t[r-1]|=128,t[r]=e>>21&127,++r,e<=268435455)||(t[r-1]|=128,t[r]=e/256>>>21&127,++r,e<=34359738367)||(t[r-1]|=128,t[r]=e/65536>>>21&127,++r,e<=4398046511103))break e;t[r-1]|=128,t[r]=e/16777216>>>21&127,++r}return t.slice(0,r)}function oi(e){var t=0,r=e[t]&127;e:if(e[t++]>=128){if(r|=(e[t]&127)<<7,e[t++]<128||(r|=(e[t]&127)<<14,e[t++]<128)||(r|=(e[t]&127)<<21,e[t++]<128))break e;r|=(e[t]&127)<<28}return r}function Ia(e){for(var t=[],r=[0];r[0]<e.length;){var n=r[0],a=yb(e,r),i=a&7;a=Math.floor(a/8);var l=0,o;if(a==0)break;switch(i){case 0:{for(var c=r[0];e[r[0]++]>=128;);o=e.slice(c,r[0])}break;case 5:l=4,o=e.slice(r[0],r[0]+l),r[0]+=l;break;case 1:l=8,o=e.slice(r[0],r[0]+l),r[0]+=l;break;case 2:l=yb(e,r),o=e.slice(r[0],r[0]+l),r[0]+=l;break;case 3:case 4:default:throw new Error("PB Type ".concat(i," for Field ").concat(a," at offset ").concat(n))}var d={data:o,type:i};t[a]==null?t[a]=[d]:t[a].push(d)}return t}function Tl(e){var t=[];return e.forEach(function(r,n){r.forEach(function(a){a.data&&(t.push(Va(n*8+a.type)),a.type==2&&t.push(Va(a.data.length)),t.push(a.data))})}),uf(t)}function fA(e,t){return(e==null?void 0:e.map(function(r){return t(r.data)}))||[]}function rd(e){for(var t,r=[],n=[0];n[0]<e.length;){var a=yb(e,n),i=Ia(e.slice(n[0],n[0]+a));n[0]+=a;var l={id:oi(i[1][0].data),messages:[]};i[2].forEach(function(o){var c=Ia(o.data),d=oi(c[3][0].data);l.messages.push({meta:c,data:e.slice(n[0],n[0]+d)}),n[0]+=d}),(t=i[3])!=null&&t[0]&&(l.merge=oi(i[3][0].data)>>>0>0),r.push(l)}return r}function Yx(e){var t=[];return e.forEach(function(r){var n=[];n[1]=[{data:Va(r.id),type:0}],n[2]=[],r.merge!=null&&(n[3]=[{data:Va(+!!r.merge),type:0}]);var a=[];r.messages.forEach(function(l){a.push(l.data),l.meta[3]=[{type:0,data:Va(l.data.length)}],n[2].push({data:Tl(l.meta),type:2})});var i=Tl(n);t.push(Va(i.length)),t.push(i),a.forEach(function(l){return t.push(l)})}),uf(t)}function vSe(e,t){if(e!=0)throw new Error("Unexpected Snappy chunk type ".concat(e));for(var r=[0],n=yb(t,r),a=[];r[0]<t.length;){var i=t[r[0]]&3;if(i==0){var l=t[r[0]++]>>2;if(l<60)++l;else{var o=l-59;l=t[r[0]],o>1&&(l|=t[r[0]+1]<<8),o>2&&(l|=t[r[0]+2]<<16),o>3&&(l|=t[r[0]+3]<<24),l>>>=0,l++,r[0]+=o}a.push(t.slice(r[0],r[0]+l)),r[0]+=l;continue}else{var c=0,d=0;if(i==1?(d=(t[r[0]]>>2&7)+4,c=(t[r[0]++]&224)<<3,c|=t[r[0]++]):(d=(t[r[0]++]>>2)+1,i==2?(c=t[r[0]]|t[r[0]+1]<<8,r[0]+=2):(c=(t[r[0]]|t[r[0]+1]<<8|t[r[0]+2]<<16|t[r[0]+3]<<24)>>>0,r[0]+=4)),a=[uf(a)],c==0)throw new Error("Invalid offset 0");if(c>a[0].length)throw new Error("Invalid offset beyond length");if(d>=c)for(a.push(a[0].slice(-c)),d-=c;d>=a[a.length-1].length;)a.push(a[a.length-1]),d-=a[a.length-1].length;a.push(a[0].slice(-c,-c+d))}}var f=uf(a);if(f.length!=n)throw new Error("Unexpected length: ".concat(f.length," != ").concat(n));return f}function nd(e){for(var t=[],r=0;r<e.length;){var n=e[r++],a=e[r]|e[r+1]<<8|e[r+2]<<16;r+=3,t.push(vSe(n,e.slice(r,r+a))),r+=a}if(r!==e.length)throw new Error("data is not a valid framed stream!");return uf(t)}function Zx(e){for(var t=[],r=0;r<e.length;){var n=Math.min(e.length-r,268435455),a=new Uint8Array(4);t.push(a);var i=Va(n),l=i.length;t.push(i),n<=60?(l++,t.push(new Uint8Array([n-1<<2]))):n<=256?(l+=2,t.push(new Uint8Array([240,n-1&255]))):n<=65536?(l+=3,t.push(new Uint8Array([244,n-1&255,n-1>>8&255]))):n<=16777216?(l+=4,t.push(new Uint8Array([248,n-1&255,n-1>>8&255,n-1>>16&255]))):n<=4294967296&&(l+=5,t.push(new Uint8Array([252,n-1&255,n-1>>8&255,n-1>>16&255,n-1>>>24&255]))),t.push(e.slice(r,r+n)),l+=n,a[0]=0,a[1]=l&255,a[2]=l>>8&255,a[3]=l>>16&255,r+=n}return uf(t)}function ySe(e,t,r,n){var a=Wm(e),i=a.getUint32(4,!0),l=(n>1?12:8)+ED(i&(n>1?3470:398))*4,o=-1,c=-1,d=NaN,f=new Date(2001,0,1);i&512&&(o=a.getUint32(l,!0),l+=4),l+=ED(i&(n>1?12288:4096))*4,i&16&&(c=a.getUint32(l,!0),l+=4),i&32&&(d=a.getFloat64(l,!0),l+=8),i&64&&(f.setTime(f.getTime()+a.getFloat64(l,!0)*1e3),l+=8);var p;switch(e[2]){case 0:break;case 2:p={t:"n",v:d};break;case 3:p={t:"s",v:t[c]};break;case 5:p={t:"d",v:f};break;case 6:p={t:"b",v:d>0};break;case 7:p={t:"n",v:d/86400};break;case 8:p={t:"e",v:0};break;case 9:if(o>-1)p={t:"s",v:r[o]};else if(c>-1)p={t:"s",v:t[c]};else if(!isNaN(d))p={t:"n",v:d};else throw new Error("Unsupported cell type ".concat(e.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(e.slice(0,4)))}return p}function wSe(e,t,r){var n=Wm(e),a=n.getUint32(8,!0),i=12,l=-1,o=-1,c=NaN,d=NaN,f=new Date(2001,0,1);a&1&&(c=gSe(e,i),i+=16),a&2&&(d=n.getFloat64(i,!0),i+=8),a&4&&(f.setTime(f.getTime()+n.getFloat64(i,!0)*1e3),i+=8),a&8&&(o=n.getUint32(i,!0),i+=4),a&16&&(l=n.getUint32(i,!0),i+=4);var p;switch(e[1]){case 0:break;case 2:p={t:"n",v:c};break;case 3:p={t:"s",v:t[o]};break;case 5:p={t:"d",v:f};break;case 6:p={t:"b",v:d>0};break;case 7:p={t:"n",v:d/86400};break;case 8:p={t:"e",v:0};break;case 9:if(l>-1)p={t:"s",v:r[l]};else throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(a&31," : ").concat(e.slice(0,4)));break;case 10:p={t:"n",v:c};break;default:throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(a&31," : ").concat(e.slice(0,4)))}return p}function uN(e,t){var r=new Uint8Array(32),n=Wm(r),a=12,i=0;switch(r[0]=5,e.t){case"n":r[1]=2,bSe(r,a,e.v),i|=1,a+=16;break;case"b":r[1]=6,n.setFloat64(a,e.v?1:0,!0),i|=2,a+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[1]=3,n.setUint32(a,t.indexOf(e.v),!0),i|=8,a+=4;break;default:throw"unsupported cell type "+e.t}return n.setUint32(8,i,!0),r.slice(0,a)}function hN(e,t){var r=new Uint8Array(32),n=Wm(r),a=12,i=0;switch(r[0]=3,e.t){case"n":r[2]=2,n.setFloat64(a,e.v,!0),i|=32,a+=8;break;case"b":r[2]=6,n.setFloat64(a,e.v?1:0,!0),i|=32,a+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[2]=3,n.setUint32(a,t.indexOf(e.v),!0),i|=16,a+=4;break;default:throw"unsupported cell type "+e.t}return n.setUint32(4,i,!0),r.slice(0,a)}function kSe(e,t,r){switch(e[0]){case 0:case 1:case 2:case 3:return ySe(e,t,r,e[0]);case 5:return wSe(e,t,r);default:throw new Error("Unsupported payload version ".concat(e[0]))}}function Ql(e){var t=Ia(e);return yb(t[1][0].data)}function TD(e,t){var r=Ia(t.data),n=oi(r[1][0].data),a=r[3],i=[];return(a||[]).forEach(function(l){var o=Ia(l.data),c=oi(o[1][0].data)>>>0;switch(n){case 1:i[c]=MS(o[3][0].data);break;case 8:{var d=e[Ql(o[9][0].data)][0],f=Ia(d.data),p=e[Ql(f[1][0].data)][0],y=oi(p.meta[1][0].data);if(y!=2001)throw new Error("2000 unexpected reference to ".concat(y));var g=Ia(p.data);i[c]=g[3].map(function(N){return MS(N.data)}).join("")}break}}),i}function NSe(e,t){var r,n,a,i,l,o,c,d,f,p,y,g,N,w,k=Ia(e),S=oi(k[1][0].data)>>>0,O=oi(k[2][0].data)>>>0,E=((n=(r=k[8])==null?void 0:r[0])==null?void 0:n.data)&&oi(k[8][0].data)>0||!1,D,q;if((i=(a=k[7])==null?void 0:a[0])!=null&&i.data&&t!=0)D=(o=(l=k[7])==null?void 0:l[0])==null?void 0:o.data,q=(d=(c=k[6])==null?void 0:c[0])==null?void 0:d.data;else if((p=(f=k[4])==null?void 0:f[0])!=null&&p.data&&t!=1)D=(g=(y=k[4])==null?void 0:y[0])==null?void 0:g.data,q=(w=(N=k[3])==null?void 0:N[0])==null?void 0:w.data;else throw"NUMBERS Tile missing ".concat(t," cell storage");for(var W=E?4:1,R=Wm(D),U=[],z=0;z<D.length/2;++z){var Z=R.getUint16(z*2,!0);Z<65535&&U.push([z,Z])}if(U.length!=O)throw"Expected ".concat(O," cells, found ").concat(U.length);var H=[];for(z=0;z<U.length-1;++z)H[U[z][0]]=q.subarray(U[z][1]*W,U[z+1][1]*W);return U.length>=1&&(H[U[U.length-1][0]]=q.subarray(U[U.length-1][1]*W)),{R:S,cells:H}}function _Se(e,t){var r,n=Ia(t.data),a=(r=n==null?void 0:n[7])!=null&&r[0]?oi(n[7][0].data)>>>0>0?1:0:-1,i=fA(n[5],function(l){return NSe(l,a)});return{nrows:oi(n[4][0].data)>>>0,data:i.reduce(function(l,o){return l[o.R]||(l[o.R]=[]),o.cells.forEach(function(c,d){if(l[o.R][d])throw new Error("Duplicate cell r=".concat(o.R," c=").concat(d));l[o.R][d]=c}),l},[])}}function SSe(e,t,r){var n,a=Ia(t.data),i={s:{r:0,c:0},e:{r:0,c:0}};if(i.e.r=(oi(a[6][0].data)>>>0)-1,i.e.r<0)throw new Error("Invalid row varint ".concat(a[6][0].data));if(i.e.c=(oi(a[7][0].data)>>>0)-1,i.e.c<0)throw new Error("Invalid col varint ".concat(a[7][0].data));r["!ref"]=Kn(i);var l=Ia(a[4][0].data),o=TD(e,e[Ql(l[4][0].data)][0]),c=(n=l[17])!=null&&n[0]?TD(e,e[Ql(l[17][0].data)][0]):[],d=Ia(l[3][0].data),f=0;d[1].forEach(function(p){var y=Ia(p.data),g=e[Ql(y[2][0].data)][0],N=oi(g.meta[1][0].data);if(N!=6002)throw new Error("6001 unexpected reference to ".concat(N));var w=_Se(e,g);w.data.forEach(function(k,S){k.forEach(function(O,E){var D=Tn({r:f+S,c:E}),q=kSe(O,o,c);q&&(r[D]=q)})}),f+=w.nrows})}function jSe(e,t){var r=Ia(t.data),n={"!ref":"A1"},a=e[Ql(r[2][0].data)],i=oi(a[0].meta[1][0].data);if(i!=6001)throw new Error("6000 unexpected reference to ".concat(i));return SSe(e,a[0],n),n}function CSe(e,t){var r,n=Ia(t.data),a={name:(r=n[1])!=null&&r[0]?MS(n[1][0].data):"",sheets:[]},i=fA(n[2],Ql);return i.forEach(function(l){e[l].forEach(function(o){var c=oi(o.meta[1][0].data);c==6e3&&a.sheets.push(jSe(e,o))})}),a}function ASe(e,t){var r=bA(),n=Ia(t.data),a=fA(n[1],Ql);if(a.forEach(function(i){e[i].forEach(function(l){var o=oi(l.meta[1][0].data);if(o==2){var c=CSe(e,l);c.sheets.forEach(function(d,f){vA(r,d,f==0?c.name:c.name+"_"+f,!0)})}})}),r.SheetNames.length==0)throw new Error("Empty NUMBERS file");return r}function fN(e){var t,r,n,a,i={},l=[];if(e.FullPaths.forEach(function(c){if(c.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),e.FileIndex.forEach(function(c){if(c.name.match(/\.iwa$/)){var d;try{d=nd(c.content)}catch(p){return console.log("?? "+c.content.length+" "+(p.message||p))}var f;try{f=rd(d)}catch(p){return console.log("## "+(p.message||p))}f.forEach(function(p){i[p.id]=p.messages,l.push(p.id)})}}),!l.length)throw new Error("File has no messages");var o=((a=(n=(r=(t=i==null?void 0:i[1])==null?void 0:t[0])==null?void 0:r.meta)==null?void 0:n[1])==null?void 0:a[0].data)&&oi(i[1][0].meta[1][0].data)==1&&i[1][0];if(o||l.forEach(function(c){i[c].forEach(function(d){var f=oi(d.meta[1][0].data)>>>0;if(f==1)if(!o)o=d;else throw new Error("Document has multiple roots")})}),!o)throw new Error("Cannot find Document root");return ASe(i,o)}function ESe(e,t,r){var n,a,i,l;if(!((n=e[6])!=null&&n[0])||!((a=e[7])!=null&&a[0]))throw"Mutation only works on post-BNC storages!";var o=((l=(i=e[8])==null?void 0:i[0])==null?void 0:l.data)&&oi(e[8][0].data)>0||!1;if(o)throw"Math only works with normal offsets";for(var c=0,d=Wm(e[7][0].data),f=0,p=[],y=Wm(e[4][0].data),g=0,N=[],w=0;w<t.length;++w){if(t[w]==null){d.setUint16(w*2,65535,!0),y.setUint16(w*2,65535);continue}d.setUint16(w*2,f,!0),y.setUint16(w*2,g,!0);var k,S;switch(typeof t[w]){case"string":k=uN({t:"s",v:t[w]},r),S=hN({t:"s",v:t[w]},r);break;case"number":k=uN({t:"n",v:t[w]},r),S=hN({t:"n",v:t[w]},r);break;case"boolean":k=uN({t:"b",v:t[w]},r),S=hN({t:"b",v:t[w]},r);break;default:throw new Error("Unsupported value "+t[w])}p.push(k),f+=k.length,N.push(S),g+=S.length,++c}for(e[2][0].data=Va(c);w<e[7][0].data.length/2;++w)d.setUint16(w*2,65535,!0),y.setUint16(w*2,65535,!0);return e[6][0].data=uf(p),e[3][0].data=uf(N),c}function TSe(e,t){if(!t||!t.numbers)throw new Error("Must pass a `numbers` option -- check the README");var r=e.Sheets[e.SheetNames[0]];e.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var n=ac(r["!ref"]);n.s.r=n.s.c=0;var a=!1;n.e.c>9&&(a=!0,n.e.c=9),n.e.r>49&&(a=!0,n.e.r=49),a&&console.error("The Numbers writer is currently limited to ".concat(Kn(n)));var i=ww(r,{range:n,header:1}),l=["~Sh33tJ5~"];i.forEach(function(ee){return ee.forEach(function(Y){typeof Y=="string"&&l.push(Y)})});var o={},c=[],d=yn.read(t.numbers,{type:"base64"});d.FileIndex.map(function(ee,Y){return[ee,d.FullPaths[Y]]}).forEach(function(ee){var Y=ee[0],re=ee[1];if(Y.type==2&&Y.name.match(/\.iwa/)){var Q=Y.content,Ce=nd(Q),me=rd(Ce);me.forEach(function(ie){c.push(ie.id),o[ie.id]={deps:[],location:re,type:oi(ie.messages[0].meta[1][0].data)}})}}),c.sort(function(ee,Y){return ee-Y});var f=c.filter(function(ee){return ee>1}).map(function(ee){return[ee,Va(ee)]});d.FileIndex.map(function(ee,Y){return[ee,d.FullPaths[Y]]}).forEach(function(ee){var Y=ee[0];if(ee[1],!!Y.name.match(/\.iwa/)){var re=rd(nd(Y.content));re.forEach(function(Q){Q.messages.forEach(function(Ce){f.forEach(function(me){Q.messages.some(function(ie){return oi(ie.meta[1][0].data)!=11006&&pSe(ie.data,me[1])})&&o[me[0]].deps.push(Q.id)})})})}});for(var p=yn.find(d,o[1].location),y=rd(nd(p.content)),g,N=0;N<y.length;++N){var w=y[N];w.id==1&&(g=w)}var k=Ql(Ia(g.messages[0].data)[1][0].data);for(p=yn.find(d,o[k].location),y=rd(nd(p.content)),N=0;N<y.length;++N)w=y[N],w.id==k&&(g=w);for(k=Ql(Ia(g.messages[0].data)[2][0].data),p=yn.find(d,o[k].location),y=rd(nd(p.content)),N=0;N<y.length;++N)w=y[N],w.id==k&&(g=w);for(k=Ql(Ia(g.messages[0].data)[2][0].data),p=yn.find(d,o[k].location),y=rd(nd(p.content)),N=0;N<y.length;++N)w=y[N],w.id==k&&(g=w);var S=Ia(g.messages[0].data);{S[6][0].data=Va(n.e.r+1),S[7][0].data=Va(n.e.c+1);var O=Ql(S[46][0].data),E=yn.find(d,o[O].location),D=rd(nd(E.content));{for(var q=0;q<D.length&&D[q].id!=O;++q);if(D[q].id!=O)throw"Bad ColumnRowUIDMapArchive";var W=Ia(D[q].messages[0].data);W[1]=[],W[2]=[],W[3]=[];for(var R=0;R<=n.e.c;++R){var U=[];U[1]=U[2]=[{type:0,data:Va(R+420690)}],W[1].push({type:2,data:Tl(U)}),W[2].push({type:0,data:Va(R)}),W[3].push({type:0,data:Va(R)})}W[4]=[],W[5]=[],W[6]=[];for(var z=0;z<=n.e.r;++z)U=[],U[1]=U[2]=[{type:0,data:Va(z+726270)}],W[4].push({type:2,data:Tl(U)}),W[5].push({type:0,data:Va(z)}),W[6].push({type:0,data:Va(z)});D[q].messages[0].data=Tl(W)}E.content=Zx(Yx(D)),E.size=E.content.length,delete S[46];var Z=Ia(S[4][0].data);{Z[7][0].data=Va(n.e.r+1);var H=Ia(Z[1][0].data),K=Ql(H[2][0].data);E=yn.find(d,o[K].location),D=rd(nd(E.content));{if(D[0].id!=K)throw"Bad HeaderStorageBucket";var J=Ia(D[0].messages[0].data);for(z=0;z<i.length;++z){var ae=Ia(J[2][0].data);ae[1][0].data=Va(z),ae[4][0].data=Va(i[z].length),J[2][z]={type:J[2][0].type,data:Tl(ae)}}D[0].messages[0].data=Tl(J)}E.content=Zx(Yx(D)),E.size=E.content.length;var se=Ql(Z[2][0].data);E=yn.find(d,o[se].location),D=rd(nd(E.content));{if(D[0].id!=se)throw"Bad HeaderStorageBucket";for(J=Ia(D[0].messages[0].data),R=0;R<=n.e.c;++R)ae=Ia(J[2][0].data),ae[1][0].data=Va(R),ae[4][0].data=Va(n.e.r+1),J[2][R]={type:J[2][0].type,data:Tl(ae)};D[0].messages[0].data=Tl(J)}E.content=Zx(Yx(D)),E.size=E.content.length;var ue=Ql(Z[4][0].data);(function(){for(var ee=yn.find(d,o[ue].location),Y=rd(nd(ee.content)),re,Q=0;Q<Y.length;++Q){var Ce=Y[Q];Ce.id==ue&&(re=Ce)}var me=Ia(re.messages[0].data);{me[3]=[];var ie=[];l.forEach(function(le,Ee){ie[1]=[{type:0,data:Va(Ee)}],ie[2]=[{type:0,data:Va(1)}],ie[3]=[{type:2,data:xSe(le)}],me[3].push({type:2,data:Tl(ie)})})}re.messages[0].data=Tl(me);var je=Yx(Y),be=Zx(je);ee.content=be,ee.size=ee.content.length})();var fe=Ia(Z[3][0].data);{var ke=fe[1][0];delete fe[2];var _e=Ia(ke.data);{var Le=Ql(_e[2][0].data);(function(){for(var ee=yn.find(d,o[Le].location),Y=rd(nd(ee.content)),re,Q=0;Q<Y.length;++Q){var Ce=Y[Q];Ce.id==Le&&(re=Ce)}var me=Ia(re.messages[0].data);{delete me[6],delete fe[7];var ie=new Uint8Array(me[5][0].data);me[5]=[];for(var je=0,be=0;be<=n.e.r;++be){var le=Ia(ie);je+=ESe(le,i[be],l),le[1][0].data=Va(be),me[5].push({data:Tl(le),type:2})}me[1]=[{type:0,data:Va(n.e.c+1)}],me[2]=[{type:0,data:Va(n.e.r+1)}],me[3]=[{type:0,data:Va(je)}],me[4]=[{type:0,data:Va(n.e.r+1)}]}re.messages[0].data=Tl(me);var Ee=Yx(Y),Me=Zx(Ee);ee.content=Me,ee.size=ee.content.length})()}ke.data=Tl(_e)}Z[3][0].data=Tl(fe)}S[4][0].data=Tl(Z)}g.messages[0].data=Tl(S);var xe=Yx(y),B=Zx(xe);return p.content=B,p.size=p.content.length,d}function SV(e){return function(r){for(var n=0;n!=e.length;++n){var a=e[n];r[a[0]]===void 0&&(r[a[0]]=a[1]),a[2]==="n"&&(r[a[0]]=Number(r[a[0]]))}}}function mA(e){SV([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(e)}function xA(e){SV([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(e)}function OSe(e){return ia.WS.indexOf(e)>-1?"sheet":e==ia.CS?"chart":e==ia.DS?"dialog":e==ia.MS?"macro":e&&e.length?e:"sheet"}function PSe(e,t){if(!e)return 0;try{e=t.map(function(n){return n.id||(n.id=n.strRelID),[n.name,e["!id"][n.id].Target,OSe(e["!id"][n.id].Type)]})}catch{return null}return!e||e.length===0?null:e}function ISe(e,t,r,n,a,i,l,o,c,d,f,p){try{i[n]=Og(Cc(e,r,!0),t);var y=Ii(e,t),g;switch(o){case"sheet":g=t_e(y,t,a,c,i[n],d,f,p);break;case"chart":if(g=r_e(y,t,a,c,i[n],d,f,p),!g||!g["!drawel"])break;var N=wg(g["!drawel"].Target,t),w=mb(N),k=qke(Cc(e,N,!0),Og(Cc(e,w,!0),N)),S=wg(k,N),O=mb(S);g=ENe(Cc(e,S,!0),S,c,Og(Cc(e,O,!0),S),d,g);break;case"macro":g=n_e(y,t,a,c,i[n],d,f,p);break;case"dialog":g=a_e(y,t,a,c,i[n],d,f,p);break;default:throw new Error("Unrecognized sheet type "+o)}l[n]=g;var E=[];i&&i[n]&&di(i[n]).forEach(function(D){var q="";if(i[n][D].Type==ia.CMNT){q=wg(i[n][D].Target,t);var W=o_e(Ii(e,q,!0),q,c);if(!W||!W.length)return;xD(g,W,!1)}i[n][D].Type==ia.TCMNT&&(q=wg(i[n][D].Target,t),E=E.concat($ke(Ii(e,q,!0),c)))}),E&&E.length&&xD(g,E,!0,c.people||[])}catch(D){if(c.WTF)throw D}}function Jc(e){return e.charAt(0)=="/"?e.slice(1):e}function DSe(e,t){if(gp(),t=t||{},mA(t),ad(e,"META-INF/manifest.xml")||ad(e,"objectdata.xml"))return jD(e,t);if(ad(e,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof fN<"u"){if(e.FileIndex)return fN(e);var r=yn.utils.cfb_new();return LI(e).forEach(function(ae){Yn(r,ae,Vbe(e,ae))}),fN(r)}throw new Error("Unsupported NUMBERS file")}if(!ad(e,"[Content_Types].xml"))throw ad(e,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):ad(e,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var n=LI(e),a=Fve(Cc(e,"[Content_Types].xml")),i=!1,l,o;if(a.workbooks.length===0&&(o="xl/workbook.xml",Ii(e,o,!0)&&a.workbooks.push(o)),a.workbooks.length===0){if(o="xl/workbook.bin",!Ii(e,o,!0))throw new Error("Could not find workbook");a.workbooks.push(o),i=!0}a.workbooks[0].slice(-3)=="bin"&&(i=!0);var c={},d={};if(!t.bookSheets&&!t.bookProps){if(Pg=[],a.sst)try{Pg=l_e(Ii(e,Jc(a.sst)),a.sst,t)}catch(ae){if(t.WTF)throw ae}t.cellStyles&&a.themes.length&&(c=i_e(Cc(e,a.themes[0].replace(/^\//,""),!0)||"",a.themes[0],t)),a.style&&(d=s_e(Ii(e,Jc(a.style)),a.style,c,t))}a.links.map(function(ae){try{var se=Og(Cc(e,mb(Jc(ae))),ae);return d_e(Ii(e,Jc(ae)),se,ae,t)}catch{}});var f=e_e(Ii(e,Jc(a.workbooks[0])),a.workbooks[0],t),p={},y="";a.coreprops.length&&(y=Ii(e,Jc(a.coreprops[0]),!0),y&&(p=f$(y)),a.extprops.length!==0&&(y=Ii(e,Jc(a.extprops[0]),!0),y&&Vve(y,p,t)));var g={};(!t.bookSheets||t.bookProps)&&a.custprops.length!==0&&(y=Cc(e,Jc(a.custprops[0]),!0),y&&(g=Kve(y,t)));var N={};if((t.bookSheets||t.bookProps)&&(f.Sheets?l=f.Sheets.map(function(se){return se.name}):p.Worksheets&&p.SheetNames.length>0&&(l=p.SheetNames),t.bookProps&&(N.Props=p,N.Custprops=g),t.bookSheets&&typeof l<"u"&&(N.SheetNames=l),t.bookSheets?N.SheetNames:t.bookProps))return N;l={};var w={};t.bookDeps&&a.calcchain&&(w=c_e(Ii(e,Jc(a.calcchain)),a.calcchain));var k=0,S={},O,E;{var D=f.Sheets;p.Worksheets=D.length,p.SheetNames=[];for(var q=0;q!=D.length;++q)p.SheetNames[q]=D[q].name}var W=i?"bin":"xml",R=a.workbooks[0].lastIndexOf("/"),U=(a.workbooks[0].slice(0,R+1)+"_rels/"+a.workbooks[0].slice(R+1)+".rels").replace(/^\//,"");ad(e,U)||(U="xl/_rels/workbook."+W+".rels");var z=Og(Cc(e,U,!0),U.replace(/_rels.*/,"s5s"));(a.metadata||[]).length>=1&&(t.xlmeta=u_e(Ii(e,Jc(a.metadata[0])),a.metadata[0],t)),(a.people||[]).length>=1&&(t.people=Wke(Ii(e,Jc(a.people[0])),t)),z&&(z=PSe(z,f.Sheets));var Z=Ii(e,"xl/worksheets/sheet.xml",!0)?1:0;e:for(k=0;k!=p.Worksheets;++k){var H="sheet";if(z&&z[k]?(O="xl/"+z[k][1].replace(/[\/]?xl\//,""),ad(e,O)||(O=z[k][1]),ad(e,O)||(O=U.replace(/_rels\/.*$/,"")+z[k][1]),H=z[k][2]):(O="xl/worksheets/sheet"+(k+1-Z)+"."+W,O=O.replace(/sheet0\./,"sheet.")),E=O.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),t&&t.sheets!=null)switch(typeof t.sheets){case"number":if(k!=t.sheets)continue e;break;case"string":if(p.SheetNames[k].toLowerCase()!=t.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(t.sheets)){for(var K=!1,J=0;J!=t.sheets.length;++J)typeof t.sheets[J]=="number"&&t.sheets[J]==k&&(K=1),typeof t.sheets[J]=="string"&&t.sheets[J].toLowerCase()==p.SheetNames[k].toLowerCase()&&(K=1);if(!K)continue e}}ISe(e,O,E,p.SheetNames[k],k,S,l,H,t,f,c,d)}return N={Directory:a,Workbook:f,Props:p,Custprops:g,Deps:w,Sheets:l,SheetNames:p.SheetNames,Strings:Pg,Styles:d,Themes:c,SSF:Es(En)},t&&t.bookFiles&&(e.files?(N.keys=n,N.files=e.files):(N.keys=[],N.files={},e.FullPaths.forEach(function(ae,se){ae=ae.replace(/^Root Entry[\/]/,""),N.keys.push(ae),N.files[ae]=e.FileIndex[se]}))),t&&t.bookVBA&&(a.vba.length>0?N.vbaraw=Ii(e,Jc(a.vba[0]),!0):a.defaults&&a.defaults.bin===e5e&&(N.vbaraw=Ii(e,"xl/vbaProject.bin",!0))),N}function MSe(e,t){var r=t||{},n="Workbook",a=yn.find(e,n);try{if(n="/!DataSpaces/Version",a=yn.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(uwe(a.content),n="/!DataSpaces/DataSpaceMap",a=yn.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var i=fwe(a.content);if(i.length!==1||i[0].comps.length!==1||i[0].comps[0].t!==0||i[0].name!=="StrongEncryptionDataSpace"||i[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",a=yn.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var l=mwe(a.content);if(l.length!=1||l[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",a=yn.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);pwe(a.content)}catch{}if(n="/EncryptionInfo",a=yn.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var o=gwe(a.content);if(n="/EncryptedPackage",a=yn.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(o[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(o[1],a.content,r.password||"",r);if(o[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(o[1],a.content,r.password||"",r);throw new Error("File is password-protected")}function LSe(e,t){return t.bookType=="ods"?_V(e,t):t.bookType=="numbers"?TSe(e,t):t.bookType=="xlsb"?RSe(e,t):FSe(e,t)}function RSe(e,t){o1=1024,e&&!e.SSF&&(e.SSF=Es(En)),e&&e.SSF&&(gp(),Ik(e.SSF),t.revssf=Mk(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,Ig?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r=t.bookType=="xlsb"?"bin":"xml",n=Q$.indexOf(t.bookType)>-1,a=eA();xA(t=t||{});var i=UC(),l="",o=0;if(t.cellXfs=[],wf(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),l="docProps/core.xml",Yn(i,l,m$(e.Props,t)),a.coreprops.push(l),Wa(t.rels,2,l,ia.CORE_PROPS),l="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var c=[],d=0;d<e.SheetNames.length;++d)(e.Workbook.Sheets[d]||{}).Hidden!=2&&c.push(e.SheetNames[d]);e.Props.SheetNames=c}for(e.Props.Worksheets=e.Props.SheetNames.length,Yn(i,l,g$(e.Props)),a.extprops.push(l),Wa(t.rels,3,l,ia.EXT_PROPS),e.Custprops!==e.Props&&di(e.Custprops||{}).length>0&&(l="docProps/custom.xml",Yn(i,l,b$(e.Custprops)),a.custprops.push(l),Wa(t.rels,4,l,ia.CUST_PROPS)),o=1;o<=e.SheetNames.length;++o){var f={"!id":{}},p=e.Sheets[e.SheetNames[o-1]],y=(p||{})["!type"]||"sheet";switch(y){case"chart":default:l="xl/worksheets/sheet"+o+"."+r,Yn(i,l,f_e(o-1,l,t,e,f)),a.sheets.push(l),Wa(t.wbrels,-1,"worksheets/sheet"+o+"."+r,ia.WS[0])}if(p){var g=p["!comments"],N=!1,w="";g&&g.length>0&&(w="xl/comments"+o+"."+r,Yn(i,w,p_e(g,w)),a.comments.push(w),Wa(f,-1,"../comments"+o+"."+r,ia.CMNT),N=!0),p["!legacy"]&&N&&Yn(i,"xl/drawings/vmlDrawing"+o+".vml",Y$(o,p["!comments"])),delete p["!comments"],delete p["!legacy"]}f["!id"].rId1&&Yn(i,mb(l),g1(f))}return t.Strings!=null&&t.Strings.length>0&&(l="xl/sharedStrings."+r,Yn(i,l,x_e(t.Strings,l,t)),a.strs.push(l),Wa(t.wbrels,-1,"sharedStrings."+r,ia.SST)),l="xl/workbook."+r,Yn(i,l,h_e(e,l)),a.workbooks.push(l),Wa(t.rels,1,l,ia.WB),l="xl/theme/theme1.xml",Yn(i,l,iA(e.Themes,t)),a.themes.push(l),Wa(t.wbrels,-1,"theme/theme1.xml",ia.THEME),l="xl/styles."+r,Yn(i,l,m_e(e,l,t)),a.styles.push(l),Wa(t.wbrels,-1,"styles."+r,ia.STY),e.vbaraw&&n&&(l="xl/vbaProject.bin",Yn(i,l,e.vbaraw),a.vba.push(l),Wa(t.wbrels,-1,"vbaProject.bin",ia.VBA)),l="xl/metadata."+r,Yn(i,l,g_e(l)),a.metadata.push(l),Wa(t.wbrels,-1,"metadata."+r,ia.XLMETA),Yn(i,"[Content_Types].xml",u$(a,t)),Yn(i,"_rels/.rels",g1(t.rels)),Yn(i,"xl/_rels/workbook."+r+".rels",g1(t.wbrels)),delete t.revssf,delete t.ssf,i}function FSe(e,t){o1=1024,e&&!e.SSF&&(e.SSF=Es(En)),e&&e.SSF&&(gp(),Ik(e.SSF),t.revssf=Mk(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,Ig?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r="xml",n=Q$.indexOf(t.bookType)>-1,a=eA();xA(t=t||{});var i=UC(),l="",o=0;if(t.cellXfs=[],wf(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),l="docProps/core.xml",Yn(i,l,m$(e.Props,t)),a.coreprops.push(l),Wa(t.rels,2,l,ia.CORE_PROPS),l="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var c=[],d=0;d<e.SheetNames.length;++d)(e.Workbook.Sheets[d]||{}).Hidden!=2&&c.push(e.SheetNames[d]);e.Props.SheetNames=c}e.Props.Worksheets=e.Props.SheetNames.length,Yn(i,l,g$(e.Props)),a.extprops.push(l),Wa(t.rels,3,l,ia.EXT_PROPS),e.Custprops!==e.Props&&di(e.Custprops||{}).length>0&&(l="docProps/custom.xml",Yn(i,l,b$(e.Custprops)),a.custprops.push(l),Wa(t.rels,4,l,ia.CUST_PROPS));var f=["SheetJ5"];for(t.tcid=0,o=1;o<=e.SheetNames.length;++o){var p={"!id":{}},y=e.Sheets[e.SheetNames[o-1]],g=(y||{})["!type"]||"sheet";switch(g){case"chart":default:l="xl/worksheets/sheet"+o+"."+r,Yn(i,l,cV(o-1,t,e,p)),a.sheets.push(l),Wa(t.wbrels,-1,"worksheets/sheet"+o+"."+r,ia.WS[0])}if(y){var N=y["!comments"],w=!1,k="";if(N&&N.length>0){var S=!1;N.forEach(function(O){O[1].forEach(function(E){E.T==!0&&(S=!0)})}),S&&(k="xl/threadedComments/threadedComment"+o+"."+r,Yn(i,k,Vke(N,f,t)),a.threadedcomments.push(k),Wa(p,-1,"../threadedComments/threadedComment"+o+"."+r,ia.TCMNT)),k="xl/comments"+o+"."+r,Yn(i,k,Z$(N)),a.comments.push(k),Wa(p,-1,"../comments"+o+"."+r,ia.CMNT),w=!0}y["!legacy"]&&w&&Yn(i,"xl/drawings/vmlDrawing"+o+".vml",Y$(o,y["!comments"])),delete y["!comments"],delete y["!legacy"]}p["!id"].rId1&&Yn(i,mb(l),g1(p))}return t.Strings!=null&&t.Strings.length>0&&(l="xl/sharedStrings."+r,Yn(i,l,F$(t.Strings,t)),a.strs.push(l),Wa(t.wbrels,-1,"sharedStrings."+r,ia.SST)),l="xl/workbook."+r,Yn(i,l,mV(e)),a.workbooks.push(l),Wa(t.rels,1,l,ia.WB),l="xl/theme/theme1.xml",Yn(i,l,iA(e.Themes,t)),a.themes.push(l),Wa(t.wbrels,-1,"theme/theme1.xml",ia.THEME),l="xl/styles."+r,Yn(i,l,W$(e,t)),a.styles.push(l),Wa(t.wbrels,-1,"styles."+r,ia.STY),e.vbaraw&&n&&(l="xl/vbaProject.bin",Yn(i,l,e.vbaraw),a.vba.push(l),Wa(t.wbrels,-1,"vbaProject.bin",ia.VBA)),l="xl/metadata."+r,Yn(i,l,X$()),a.metadata.push(l),Wa(t.wbrels,-1,"metadata."+r,ia.XLMETA),f.length>1&&(l="xl/persons/person.xml",Yn(i,l,Kke(f)),a.people.push(l),Wa(t.wbrels,-1,"persons/person.xml",ia.PEOPLE)),Yn(i,"[Content_Types].xml",u$(a,t)),Yn(i,"_rels/.rels",g1(t.rels)),Yn(i,"xl/_rels/workbook."+r+".rels",g1(t.wbrels)),delete t.revssf,delete t.ssf,i}function pA(e,t){var r="";switch((t||{}).type||"base64"){case"buffer":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];case"base64":r=Ic(e.slice(0,12));break;case"binary":r=e;break;case"array":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];default:throw new Error("Unrecognized type "+(t&&t.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function BSe(e,t){return yn.find(e,"EncryptedPackage")?MSe(e,t):bV(e,t)}function USe(e,t){var r,n=e,a=t||{};return a.type||(a.type=ra&&Buffer.isBuffer(e)?"buffer":"base64"),r=UH(n,a),DSe(r,a)}function jV(e,t){var r=0;e:for(;r<e.length;)switch(e.charCodeAt(r)){case 10:case 13:case 32:++r;break;case 60:return IS(e.slice(r),t);default:break e}return G1.to_workbook(e,t)}function zSe(e,t){var r="",n=pA(e,t);switch(t.type){case"base64":r=Ic(e);break;case"binary":r=e;break;case"buffer":r=e.toString("binary");break;case"array":r=qm(e);break;default:throw new Error("Unrecognized type "+t.type)}return n[0]==239&&n[1]==187&&n[2]==191&&(r=as(r)),t.type="binary",jV(r,t)}function qSe(e,t){var r=e;return t.type=="base64"&&(r=Ic(r)),r=ob.utils.decode(1200,r.slice(2),"str"),t.type="binary",jV(r,t)}function HSe(e){return e.match(/[^\x00-\x7F]/)?Lu(e):e}function mN(e,t,r,n){return n?(r.type="string",G1.to_workbook(e,r)):G1.to_workbook(t,r)}function LS(e,t){MC();var r=t||{};if(typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer)return LS(new Uint8Array(e),(r=Es(r),r.type="array",r));typeof Uint8Array<"u"&&e instanceof Uint8Array&&!r.type&&(r.type=typeof Deno<"u"?"buffer":"array");var n=e,a=[0,0,0,0],i=!1;if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),v1={},r.dateNF&&(v1.dateNF=r.dateNF),r.type||(r.type=ra&&Buffer.isBuffer(e)?"buffer":"base64"),r.type=="file"&&(r.type=ra?"buffer":"binary",n=Rbe(e),typeof Uint8Array<"u"&&!ra&&(r.type="array")),r.type=="string"&&(i=!0,r.type="binary",r.codepage=65001,n=HSe(e)),r.type=="array"&&typeof Uint8Array<"u"&&e instanceof Uint8Array&&typeof ArrayBuffer<"u"){var l=new ArrayBuffer(3),o=new Uint8Array(l);if(o.foo="bar",!o.foo)return r=Es(r),r.type="array",LS(LC(n),r)}switch((a=pA(n,r))[0]){case 208:if(a[1]===207&&a[2]===17&&a[3]===224&&a[4]===161&&a[5]===177&&a[6]===26&&a[7]===225)return BSe(yn.read(n,r),r);break;case 9:if(a[1]<=8)return bV(n,r);break;case 60:return IS(n,r);case 73:if(a[1]===73&&a[2]===42&&a[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(a[1]===68)return Gye(n,r);break;case 84:if(a[1]===65&&a[2]===66&&a[3]===76)return L$.to_workbook(n,r);break;case 80:return a[1]===75&&a[2]<9&&a[3]<9?USe(n,r):mN(e,n,r,i);case 239:return a[3]===60?IS(n,r):mN(e,n,r,i);case 255:if(a[1]===254)return qSe(n,r);if(a[1]===0&&a[2]===2&&a[3]===0)return wm.to_workbook(n,r);break;case 0:if(a[1]===0&&(a[2]>=2&&a[3]===0||a[2]===0&&(a[3]===8||a[3]===9)))return wm.to_workbook(n,r);break;case 3:case 131:case 139:case 140:return PS.to_workbook(n,r);case 123:if(a[1]===92&&a[2]===114&&a[3]===116)return H$.to_workbook(n,r);break;case 10:case 13:case 32:return zSe(n,r);case 137:if(a[1]===80&&a[2]===78&&a[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return Kye.indexOf(a[0])>-1&&a[2]<=12&&a[3]<=31?PS.to_workbook(n,r):mN(e,n,r,i)}function CV(e,t){switch(t.type){case"base64":case"binary":break;case"buffer":case"array":t.type="";break;case"file":return nv(t.file,yn.write(e,{type:ra?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");default:throw new Error("Unrecognized type "+t.type)}return yn.write(e,t)}function $Se(e,t){var r=Es(t||{}),n=LSe(e,r);return VSe(n,r)}function VSe(e,t){var r={},n=ra?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(t.compression&&(r.compression="DEFLATE"),t.password)r.type=n;else switch(t.type){case"base64":r.type="base64";break;case"binary":r.type="string";break;case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");case"buffer":case"file":r.type=n;break;default:throw new Error("Unrecognized type "+t.type)}var a=e.FullPaths?yn.write(e,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[r.type]||r.type,compression:!!t.compression}):e.generate(r);if(typeof Deno<"u"&&typeof a=="string"){if(t.type=="binary"||t.type=="base64")return a;a=new Uint8Array(Pk(a))}return t.password&&typeof encrypt_agile<"u"?CV(encrypt_agile(a,t.password),t):t.type==="file"?nv(t.file,a):t.type=="string"?as(a):a}function WSe(e,t){var r=t||{},n=H_e(e,r);return CV(n,r)}function Su(e,t,r){r||(r="");var n=r+e;switch(t.type){case"base64":return cb(Lu(n));case"binary":return Lu(n);case"string":return e;case"file":return nv(t.file,n,"utf8");case"buffer":return ra?sh(n,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(n):Su(n,{type:"binary"}).split("").map(function(a){return a.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function KSe(e,t){switch(t.type){case"base64":return cb(e);case"binary":return e;case"string":return e;case"file":return nv(t.file,e,"binary");case"buffer":return ra?sh(e,"binary"):e.split("").map(function(r){return r.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function z2(e,t){switch(t.type){case"string":case"base64":case"binary":for(var r="",n=0;n<e.length;++n)r+=String.fromCharCode(e[n]);return t.type=="base64"?cb(r):t.type=="string"?as(r):r;case"file":return nv(t.file,e);case"buffer":return e;default:throw new Error("Unrecognized type "+t.type)}}function AV(e,t){MC(),BNe(e);var r=Es(t||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),r.type=="array"){r.type="binary";var n=AV(e,r);return r.type="array",Pk(n)}var a=0;if(r.sheet&&(typeof r.sheet=="number"?a=r.sheet:a=e.SheetNames.indexOf(r.sheet),!e.SheetNames[a]))throw new Error("Sheet not found: "+r.sheet+" : "+typeof r.sheet);switch(r.bookType||"xlsb"){case"xml":case"xlml":return Su(L_e(e,r),r);case"slk":case"sylk":return Su(M$.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"htm":case"html":return Su(yV(e.Sheets[e.SheetNames[a]],r),r);case"txt":return KSe(EV(e.Sheets[e.SheetNames[a]],r),r);case"csv":return Su(gA(e.Sheets[e.SheetNames[a]],r),r,"\uFEFF");case"dif":return Su(L$.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"dbf":return z2(PS.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"prn":return Su(G1.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"rtf":return Su(H$.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"eth":return Su(R$.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"fods":return Su(_V(e,r),r);case"wk1":return z2(wm.sheet_to_wk1(e.Sheets[e.SheetNames[a]],r),r);case"wk3":return z2(wm.book_to_wk3(e,r),r);case"biff2":r.biff||(r.biff=2);case"biff3":r.biff||(r.biff=3);case"biff4":return r.biff||(r.biff=4),z2(vV(e,r),r);case"biff5":r.biff||(r.biff=5);case"biff8":case"xla":case"xls":return r.biff||(r.biff=8),WSe(e,r);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return $Se(e,r);default:throw new Error("Unrecognized bookType |"+r.bookType+"|")}}function GSe(e){if(!e.bookType){var t={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},r=e.file.slice(e.file.lastIndexOf(".")).toLowerCase();r.match(/^\.[a-z]+$/)&&(e.bookType=r.slice(1)),e.bookType=t[e.bookType]||e.bookType}}function Xu(e,t,r){var n={};return n.type="file",n.file=t,GSe(n),AV(e,n)}function XSe(e,t,r,n,a,i,l,o){var c=Si(r),d=o.defval,f=o.raw||!Object.prototype.hasOwnProperty.call(o,"raw"),p=!0,y=a===1?[]:{};if(a!==1)if(Object.defineProperty)try{Object.defineProperty(y,"__rowNum__",{value:r,enumerable:!1})}catch{y.__rowNum__=r}else y.__rowNum__=r;if(!l||e[r])for(var g=t.s.c;g<=t.e.c;++g){var N=l?e[r][g]:e[n[g]+c];if(N===void 0||N.t===void 0){if(d===void 0)continue;i[g]!=null&&(y[i[g]]=d);continue}var w=N.v;switch(N.t){case"z":if(w==null)break;continue;case"e":w=w==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+N.t)}if(i[g]!=null){if(w==null)if(N.t=="e"&&w===null)y[i[g]]=null;else if(d!==void 0)y[i[g]]=d;else if(f&&w===null)y[i[g]]=null;else continue;else y[i[g]]=f&&(N.t!=="n"||N.t==="n"&&o.rawNumbers!==!1)?w:Y0(N,w,o);w!=null&&(p=!1)}}return{row:y,isempty:p}}function ww(e,t){if(e==null||e["!ref"]==null)return[];var r={t:"n",v:0},n=0,a=1,i=[],l=0,o="",c={s:{r:0,c:0},e:{r:0,c:0}},d=t||{},f=d.range!=null?d.range:e["!ref"];switch(d.header===1?n=1:d.header==="A"?n=2:Array.isArray(d.header)?n=3:d.header==null&&(n=0),typeof f){case"string":c=Ta(f);break;case"number":c=Ta(e["!ref"]),c.s.r=f;break;default:c=f}n>0&&(a=0);var p=Si(c.s.r),y=[],g=[],N=0,w=0,k=Array.isArray(e),S=c.s.r,O=0,E={};k&&!e[S]&&(e[S]=[]);var D=d.skipHidden&&e["!cols"]||[],q=d.skipHidden&&e["!rows"]||[];for(O=c.s.c;O<=c.e.c;++O)if(!(D[O]||{}).hidden)switch(y[O]=Ws(O),r=k?e[S][O]:e[y[O]+p],n){case 1:i[O]=O-c.s.c;break;case 2:i[O]=y[O];break;case 3:i[O]=d.header[O-c.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),o=l=Y0(r,null,d),w=E[l]||0,!w)E[l]=1;else{do o=l+"_"+w++;while(E[o]);E[l]=w,E[o]=1}i[O]=o}for(S=c.s.r+a;S<=c.e.r;++S)if(!(q[S]||{}).hidden){var W=XSe(e,c,S,y,n,i,k,d);(W.isempty===!1||(n===1?d.blankrows!==!1:d.blankrows))&&(g[N++]=W.row)}return g.length=N,g}var OD=/"/g;function YSe(e,t,r,n,a,i,l,o){for(var c=!0,d=[],f="",p=Si(r),y=t.s.c;y<=t.e.c;++y)if(n[y]){var g=o.dense?(e[r]||[])[y]:e[n[y]+p];if(g==null)f="";else if(g.v!=null){c=!1,f=""+(o.rawNumbers&&g.t=="n"?g.v:Y0(g,null,o));for(var N=0,w=0;N!==f.length;++N)if((w=f.charCodeAt(N))===a||w===i||w===34||o.forceQuotes){f='"'+f.replace(OD,'""')+'"';break}f=="ID"&&(f='"ID"')}else g.f!=null&&!g.F?(c=!1,f="="+g.f,f.indexOf(",")>=0&&(f='"'+f.replace(OD,'""')+'"')):f="";d.push(f)}return o.blankrows===!1&&c?null:d.join(l)}function gA(e,t){var r=[],n=t??{};if(e==null||e["!ref"]==null)return"";var a=Ta(e["!ref"]),i=n.FS!==void 0?n.FS:",",l=i.charCodeAt(0),o=n.RS!==void 0?n.RS:`
`,c=o.charCodeAt(0),d=new RegExp((i=="|"?"\\|":i)+"+$"),f="",p=[];n.dense=Array.isArray(e);for(var y=n.skipHidden&&e["!cols"]||[],g=n.skipHidden&&e["!rows"]||[],N=a.s.c;N<=a.e.c;++N)(y[N]||{}).hidden||(p[N]=Ws(N));for(var w=0,k=a.s.r;k<=a.e.r;++k)(g[k]||{}).hidden||(f=YSe(e,a,k,p,l,c,i,n),f!=null&&(n.strip&&(f=f.replace(d,"")),(f||n.blankrows!==!1)&&r.push((w++?o:"")+f)));return delete n.dense,r.join("")}function EV(e,t){t||(t={}),t.FS="	",t.RS=`
`;var r=gA(e,t);return r}function ZSe(e){var t="",r,n="";if(e==null||e["!ref"]==null)return[];var a=Ta(e["!ref"]),i="",l=[],o,c=[],d=Array.isArray(e);for(o=a.s.c;o<=a.e.c;++o)l[o]=Ws(o);for(var f=a.s.r;f<=a.e.r;++f)for(i=Si(f),o=a.s.c;o<=a.e.c;++o)if(t=l[o]+i,r=d?(e[f]||[])[o]:e[t],n="",r!==void 0){if(r.F!=null){if(t=r.F,!r.f)continue;n=r.f,t.indexOf(":")==-1&&(t=t+":"+t)}if(r.f!=null)n=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)n=""+r.v;else if(r.t=="b")n=r.v?"TRUE":"FALSE";else if(r.w!==void 0)n="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?n="'"+r.v:n=""+r.v}}c[c.length]=t+"="+n}return c}function TV(e,t,r){var n=r||{},a=+!n.skipHeader,i=e||{},l=0,o=0;if(i&&n.origin!=null)if(typeof n.origin=="number")l=n.origin;else{var c=typeof n.origin=="string"?Ks(n.origin):n.origin;l=c.r,o=c.c}var d,f={s:{c:0,r:0},e:{c:o,r:l+t.length-1+a}};if(i["!ref"]){var p=Ta(i["!ref"]);f.e.c=Math.max(f.e.c,p.e.c),f.e.r=Math.max(f.e.r,p.e.r),l==-1&&(l=p.e.r+1,f.e.r=l+t.length-1+a)}else l==-1&&(l=0,f.e.r=t.length-1+a);var y=n.header||[],g=0;t.forEach(function(w,k){di(w).forEach(function(S){(g=y.indexOf(S))==-1&&(y[g=y.length]=S);var O=w[S],E="z",D="",q=Tn({c:o+g,r:l+k+a});d=wb(i,q),O&&typeof O=="object"&&!(O instanceof Date)?i[q]=O:(typeof O=="number"?E="n":typeof O=="boolean"?E="b":typeof O=="string"?E="s":O instanceof Date?(E="d",n.cellDates||(E="n",O=Yi(O)),D=n.dateNF||En[14]):O===null&&n.nullError&&(E="e",O=0),d?(d.t=E,d.v=O,delete d.w,delete d.R,D&&(d.z=D)):i[q]=d={t:E,v:O},D&&(d.z=D))})}),f.e.c=Math.max(f.e.c,o+y.length-1);var N=Si(l);if(a)for(g=0;g<y.length;++g)i[Ws(g+o)+N]={t:"s",v:y[g]};return i["!ref"]=Kn(f),i}function QSe(e,t){return TV(null,e,t)}function wb(e,t,r){if(typeof t=="string"){if(Array.isArray(e)){var n=Ks(t);return e[n.r]||(e[n.r]=[]),e[n.r][n.c]||(e[n.r][n.c]={t:"z"})}return e[t]||(e[t]={t:"z"})}return typeof t!="number"?wb(e,Tn(t)):wb(e,Tn({r:t,c:r||0}))}function JSe(e,t){if(typeof t=="number"){if(t>=0&&e.SheetNames.length>t)return t;throw new Error("Cannot find sheet # "+t)}else if(typeof t=="string"){var r=e.SheetNames.indexOf(t);if(r>-1)return r;throw new Error("Cannot find sheet name |"+t+"|")}else throw new Error("Cannot find sheet |"+t+"|")}function bA(){return{SheetNames:[],Sheets:{}}}function vA(e,t,r,n){var a=1;if(!r)for(;a<=65535&&e.SheetNames.indexOf(r="Sheet"+a)!=-1;++a,r=void 0);if(!r||e.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&e.SheetNames.indexOf(r)>=0){var i=r.match(/(^.*?)(\d+)$/);a=i&&+i[2]||0;var l=i&&i[1]||r;for(++a;a<=65535&&e.SheetNames.indexOf(r=l+a)!=-1;++a);}if(fV(r),e.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return e.SheetNames.push(r),e.Sheets[r]=t,r}function e6e(e,t,r){e.Workbook||(e.Workbook={}),e.Workbook.Sheets||(e.Workbook.Sheets=[]);var n=JSe(e,t);switch(e.Workbook.Sheets[n]||(e.Workbook.Sheets[n]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}e.Workbook.Sheets[n].Hidden=r}function t6e(e,t){return e.z=t,e}function OV(e,t,r){return t?(e.l={Target:t},r&&(e.l.Tooltip=r)):delete e.l,e}function r6e(e,t,r){return OV(e,"#"+t,r)}function n6e(e,t,r){e.c||(e.c=[]),e.c.push({t,a:r||"SheetJS"})}function a6e(e,t,r,n){for(var a=typeof t!="string"?t:Ta(t),i=typeof t=="string"?t:Kn(t),l=a.s.r;l<=a.e.r;++l)for(var o=a.s.c;o<=a.e.c;++o){var c=wb(e,l,o);c.t="n",c.F=i,delete c.v,l==a.s.r&&o==a.s.c&&(c.f=r,n&&(c.D=!0))}return e}var wn={encode_col:Ws,encode_row:Si,encode_cell:Tn,encode_range:Kn,decode_col:GC,decode_row:KC,split_cell:xve,decode_cell:Ks,decode_range:ac,format_cell:Y0,sheet_add_aoa:a$,sheet_add_json:TV,sheet_add_dom:wV,aoa_to_sheet:bp,json_to_sheet:QSe,table_to_sheet:kV,table_to_book:uSe,sheet_to_csv:gA,sheet_to_txt:EV,sheet_to_json:ww,sheet_to_html:yV,sheet_to_formulae:ZSe,sheet_to_row_object_array:ww,sheet_get_cell:wb,book_new:bA,book_append_sheet:vA,book_set_sheet_visibility:e6e,cell_set_number_format:t6e,cell_set_hyperlink:OV,cell_set_internal_link:r6e,cell_add_comment:n6e,sheet_set_array_formula:a6e,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const s6e=(e,t,r="inventory-export.xlsx")=>{const n=e.map((l,o)=>{var c;return{STT:o+1,"Tn sn phm":l.name,SKU:l.sku,"Danh mc":l.category||"","Tn kho":l.stock[t]||0,"Gi bn l":l.retailPrice[t]||0,"Gi bn s":((c=l.wholesalePrice)==null?void 0:c[t])||0,"Gi tr tn":(l.stock[t]||0)*(l.retailPrice[t]||0),"M t":l.description||""}}),a=wn.json_to_sheet(n);a["!cols"]=[{wch:5},{wch:30},{wch:15},{wch:20},{wch:10},{wch:15},{wch:15},{wch:15},{wch:40}];const i=wn.book_new();wn.book_append_sheet(i,a,"Tn kho"),Xu(i,r)},i6e=(e="inventory-template.xlsx")=>{const t=[{"Tn sn phm":"VD: Nht Motul 7100 10W40",SKU:"A3B7K9M2 (hoc  trng - h thng t to)","Danh mc":"Nht ng c","S lng nhp":50,"Gi bn l":18e4,"Gi bn s":15e4,"M t":"Nht cao cp cho xe cn tay"}],r=wn.json_to_sheet(t);r["!cols"]=[{wch:30},{wch:15},{wch:20},{wch:15},{wch:15},{wch:15},{wch:40}];const n=wn.book_new();wn.book_append_sheet(n,r,"Template"),Xu(n,e)},l6e=(e,t)=>new Promise((r,n)=>{const a=new FileReader;a.onload=i=>{var l;try{const o=(l=i.target)==null?void 0:l.result,c=/\.csv$/i.test(e.name),d=LS(o,{type:c?"string":"binary"}),f=d.SheetNames[0],p=d.Sheets[f],y=wn.sheet_to_json(p,{defval:"",blankrows:!1}),g=E=>E.normalize("NFD").replace(new RegExp("\\p{Diacritic}","gu"),"").replace(//gi,D=>D===""?"d":"D"),N=E=>g(String(E).toLowerCase().trim()).replace(/[^a-z0-9]+/g,""),w=E=>{if(E==null||E==="")return 0;if(typeof E=="number")return E;let D=String(E).trim();D=D.replace(/\s+/g,""),D.includes(".")&&D.includes(",")?D=D.replace(/\./g,"").replace(/,/g,"."):D.includes(",")&&!D.includes(".")?D=D.replace(/,/g,"."):D=D.replace(/,/g,"");const q=parseFloat(D);return isNaN(q)?0:q},k={name:["tensanpham","ten","productname","name","tenhang","tenmh"],sku:["sku","mahang","mah","code","ma","masp","mavt"],category:["danhmuc","nhom","loai","category"],quantity:["soluongnhap","soluong","ton","tonkho","sl","qty"],costPrice:["dongianhap","gianhap","costprice","giavon"],retailPrice:["giabanle","giale","giaban","gia","retailprice","giabanra","dongiabanle"],wholesalePrice:["giabansi","giasi","wholesaleprice","giabuon","dongiabansi"],description:["mota","ghichu","note","description"]},S=[],O=y.map((E,D)=>{const q=E||{},W={};Object.keys(q).forEach(ue=>{W[N(ue)]=q[ue]});const R=(ue,fe)=>{for(const ke of k[ue]){const _e=W[ke];if(_e!=null&&_e!=="")return _e}return fe},U=String(R("name","")).trim();let z=String(R("sku","")).trim().toUpperCase();(!z||!Pee(z))&&(z=yF(),console.log(` Generated SKU for "${U}": ${z}`));const Z=R("category"),H=w(R("quantity",0)),K=w(R("costPrice",0)),J=w(R("retailPrice",0)),ae=w(R("wholesalePrice",0)),se=R("description");if(!U&&Object.values(q).some(ue=>ue!=="")){const ue=Object.values(q).map(fe=>String(fe).trim()).filter(fe=>fe!=="");if(ue.length>0&&ue[0].length>0)return S.push(`Hng ${D+2}: Thiu tn sn phm, to SKU: ${z}`),null}return U?{name:U,sku:z,category:Z,quantity:H,costPrice:K,retailPrice:J,wholesalePrice:ae,description:se}:null}).filter(Boolean);r({items:O,errors:S})}catch(o){const c=o instanceof Error?o.message:"Khng c c d liu";n(new Error(c))}},a.onerror=()=>{n(new Error("Li c file"))},/\.csv$/i.test(e.name)?a.readAsText(e,"utf-8"):a.readAsBinaryString(e)}),PV=()=>{const[e,t]=T.useState({isOpen:!1,title:"",message:"",confirmText:"Xc nhn",cancelText:"Hy",confirmColor:"blue",resolve:null}),r=T.useCallback(i=>new Promise(l=>{t({isOpen:!0,...i,resolve:l})}),[]),n=T.useCallback(()=>{var i;(i=e.resolve)==null||i.call(e,!0),t(l=>({...l,isOpen:!1,resolve:null}))},[e.resolve]),a=T.useCallback(()=>{var i;(i=e.resolve)==null||i.call(e,!1),t(l=>({...l,isOpen:!1,resolve:null}))},[e.resolve]);return{confirm:r,confirmState:e,handleConfirm:n,handleCancel:a}},IV=({isOpen:e,title:t,message:r,confirmText:n="Xc nhn",cancelText:a="Hy",confirmColor:i="blue",onConfirm:l,onCancel:o})=>{if(!e)return null;const c={red:"bg-red-600 hover:bg-red-700",blue:"bg-blue-600 hover:bg-blue-700",green:"bg-emerald-600 hover:bg-emerald-700"};return s.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-[100] p-4 animate-fadeIn",children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-2xl max-w-md w-full animate-scaleIn",children:[s.jsx("div",{className:"p-6 border-b border-slate-200 dark:border-slate-700",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${i==="red"?"bg-red-100 dark:bg-red-900/30":i==="green"?"bg-emerald-100 dark:bg-emerald-900/30":"bg-blue-100 dark:bg-blue-900/30"}`,children:i==="red"?s.jsx("svg",{className:"w-6 h-6 text-red-600 dark:text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}):i==="green"?s.jsx("svg",{className:"w-6 h-6 text-emerald-600 dark:text-emerald-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}):s.jsx("svg",{className:"w-6 h-6 text-blue-600 dark:text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),s.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100",children:t})]})}),s.jsx("div",{className:"p-6",children:s.jsx("p",{className:"text-slate-700 dark:text-slate-300 leading-relaxed",children:r})}),s.jsxs("div",{className:"flex justify-end gap-3 p-6 bg-slate-50 dark:bg-slate-900/50 rounded-b-lg",children:[s.jsx("button",{onClick:o,className:"px-4 py-2.5 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors font-medium",children:a}),s.jsx("button",{onClick:l,className:`px-4 py-2.5 text-white rounded-lg transition-colors font-medium ${c[i]}`,children:n})]})]})})},z0="categories";async function o6e(){try{const{data:e,error:t}=await Ot.from(z0).select("*").order("name");return t?Ct({code:"supabase",message:"Khng th ti danh mc",cause:t}):_n(e||[])}catch(e){return Ct({code:"network",message:"Li kt ni ti my ch",cause:e})}}async function c6e(e){var t;try{if(!e.name)return Ct({code:"validation",message:"Thiu tn danh mc"});const r={id:typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():`${Math.random().toString(36).slice(2)}-${Date.now()}`,name:e.name,icon:e.icon,color:e.color,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{data:n,error:a}=await Ot.from(z0).insert([r]).select().single();if(a||!n)return Ct({code:"supabase",message:"To danh mc tht bi",cause:a});let i=null;try{const{data:l}=await Ot.auth.getUser();i=((t=l==null?void 0:l.user)==null?void 0:t.id)||null}catch{}return await Bs(i,{action:"category.create",tableName:z0,recordId:n.id,oldData:null,newData:n}),_n(n)}catch(r){return Ct({code:"network",message:"Li kt ni khi to danh mc",cause:r})}}async function d6e(e,t){var r;try{let n=null;try{const c=await Ot.from(z0).select("*").eq("id",e).single();n=(c==null?void 0:c.data)??null}catch{}const{data:a,error:i}=await Ot.from(z0).update({...t,updated_at:new Date().toISOString()}).eq("id",e).select().single();let l=a;if((!a||i)&&!i&&(l={id:e,...n||{},...t}),i&&a==null)return Ct({code:"supabase",message:"Cp nht danh mc tht bi",cause:i});let o=null;try{const{data:c}=await Ot.auth.getUser();o=((r=c==null?void 0:c.user)==null?void 0:r.id)||null}catch{}return await Bs(o,{action:"category.update",tableName:z0,recordId:e,oldData:n,newData:a}),_n(l)}catch(n){return Ct({code:"network",message:"Li kt ni khi cp nht danh mc",cause:n})}}async function u6e(e){var t;try{let r=null;try{const i=await Ot.from(z0).select("*").eq("id",e).single();r=(i==null?void 0:i.data)??null}catch{}const{error:n}=await Ot.from(z0).delete().eq("id",e);if(n)return Ct({code:"supabase",message:"Xa danh mc tht bi",cause:n});let a=null;try{const{data:i}=await Ot.auth.getUser();a=((t=i==null?void 0:i.user)==null?void 0:t.id)||null}catch{}return await Bs(a,{action:"category.delete",tableName:z0,recordId:e,oldData:r,newData:null}),_n({id:e})}catch(r){return Ct({code:"network",message:"Li kt ni khi xa danh mc",cause:r})}}const zk=()=>Ts({queryKey:["categories"],queryFn:async()=>{const e=await o6e();if(!e.ok)throw e.error;return e.data}}),yA=()=>{const e=qn();return ha({mutationFn:async t=>{const r=await c6e(t);if(!r.ok)throw r.error;return r.data},onSuccess:()=>{e.invalidateQueries({queryKey:["categories"]}),Xe.success(" to danh mc")},onError:t=>Xe.error((t==null?void 0:t.message)||"Li to danh mc")})},h6e=()=>{const e=qn();return ha({mutationFn:async({id:t,updates:r})=>{const n=await d6e(t,r);if(!n.ok)throw n.error;return n.data},onSuccess:()=>{e.invalidateQueries({queryKey:["categories"]}),Xe.success(" cp nht danh mc")},onError:t=>Xe.error((t==null?void 0:t.message)||"Li cp nht danh mc")})},f6e=()=>{const e=qn();return ha({mutationFn:async({id:t})=>{const r=await u6e(t);if(!r.ok)throw r.error;return r.data},onSuccess:()=>{e.invalidateQueries({queryKey:["categories"]}),Xe.success(" xa danh mc")},onError:t=>Xe.error((t==null?void 0:t.message)||"Li xa danh mc")})},DV=()=>{const{data:e=[]}=Zee(),{data:t=[],isLoading:r,isError:n,refetch:a}=zk(),i=yA(),l=h6e(),o=f6e(),[c,d]=T.useState(!1),[f,p]=T.useState(null),[y,g]=T.useState(""),[N,w]=T.useState("#3b82f6"),[k,S]=T.useState("package"),{confirm:O,confirmState:E,handleConfirm:D,handleCancel:q}=PV(),W=T.useMemo(()=>t.map(J=>({id:J.id,name:J.name,icon:J.icon||"package",color:J.color||"#3b82f6",count:e.filter(ae=>ae.category===J.name).length})),[t,e]),R=async()=>{if(!y.trim()){Xe.warning("Vui lng nhp tn danh mc");return}if(W.some(ae=>ae.name.toLowerCase()===y.toLowerCase())){Xe.warning("Danh mc ny  tn ti");return}try{await i.mutateAsync({name:y,icon:k,color:N}),g(""),d(!1)}catch(ae){Xe.error(va(ae))}},U=async(J,ae)=>{if(!ae.trim()){Xe.warning("Vui lng nhp tn danh mc mi");return}const se=t.find(ue=>ue.name===J);if(!se){Xe.error("Khng tm thy danh mc  i tn");return}try{await l.mutateAsync({id:se.id,updates:{name:ae}}),p(null)}catch(ue){Xe.error(va(ue))}},z=async J=>{const ae=e.filter(fe=>fe.category===J).length;if(!await O({title:"Xc nhn xa danh mc",message:`Bn c chc chn mun xa danh mc "${J}"? ${ae} sn phm trong danh mc ny s khng cn danh mc.`,confirmText:"Xa",cancelText:"Hy",confirmColor:"red"}))return;const ue=t.find(fe=>fe.name===J);if(!ue){Xe.error("Khng tm thy danh mc");return}try{await o.mutateAsync({id:ue.id})}catch(fe){Xe.error(va(fe))}},Z=[{value:"#3b82f6",label:"Xanh dng"},{value:"#10b981",label:"Xanh l"},{value:"#f59e0b",label:"Vng"},{value:"#ef4444",label:""},{value:"#8b5cf6",label:"Tm"},{value:"#ec4899",label:"Hng"},{value:"#06b6d4",label:"Cyan"},{value:"#f97316",label:"Cam"}],H={package:s.jsx(Gi,{className:"w-5 h-5"}),wrench:s.jsx(Em,{className:"w-5 h-5"}),settings:s.jsx(Gg,{className:"w-5 h-5"}),hammer:s.jsx(hee,{className:"w-5 h-5"}),cog:s.jsx(oee,{className:"w-5 h-5"}),bolt:s.jsx(QJ,{className:"w-5 h-5"}),bike:s.jsx(j6,{className:"w-5 h-5"}),car:s.jsx(ree,{className:"w-5 h-5"}),disc:s.jsx(cee,{className:"w-5 h-5"}),battery:s.jsx(YJ,{className:"w-5 h-5"}),lightbulb:s.jsx(xee,{className:"w-5 h-5"}),palette:s.jsx(xF,{className:"w-5 h-5"})},K=Object.keys(H);return s.jsxs("div",{className:"h-full flex flex-col bg-slate-50 dark:bg-[#0f172a]",children:[s.jsx("div",{className:"bg-white dark:bg-[#1e293b] shadow-sm border-b border-slate-200 dark:border-slate-700 px-6 py-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-slate-100",children:"Danh mc sn phm"}),s.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Qun l cc danh mc phn loi sn phm"})]}),s.jsxs("button",{onClick:()=>d(!0),className:"flex items-center gap-2 px-4 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors font-medium",children:[s.jsx(Ac,{className:"w-5 h-5"}),"Thm danh mc"]})]})}),r&&s.jsx("div",{className:"p-6 text-sm text-slate-500 dark:text-slate-400",children:"ang ti danh mc..."}),n&&s.jsxs("div",{className:"p-6 text-sm text-red-500",children:["Li ti d liu."," ",s.jsx("button",{onClick:()=>a(),className:"underline",children:"Th li"})]}),s.jsx("div",{className:"px-6 py-4 bg-white dark:bg-[#1e293b] border-b border-slate-200 dark:border-slate-700",children:s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 p-4 rounded-lg border border-blue-200 dark:border-blue-700",children:[s.jsx("div",{className:"text-sm font-medium text-blue-600 dark:text-blue-400",children:"Tng danh mc"}),s.jsx("div",{className:"text-2xl font-bold text-blue-900 dark:text-blue-100 mt-1",children:W.length})]}),s.jsxs("div",{className:"bg-gradient-to-br from-emerald-50 to-emerald-100 dark:from-emerald-900/20 dark:to-emerald-800/20 p-4 rounded-lg border border-emerald-200 dark:border-emerald-700",children:[s.jsx("div",{className:"text-sm font-medium text-emerald-600 dark:text-emerald-400",children:"Tng sn phm"}),s.jsx("div",{className:"text-2xl font-bold text-emerald-900 dark:text-emerald-100 mt-1",children:e.length})]}),s.jsxs("div",{className:"bg-gradient-to-br from-amber-50 to-amber-100 dark:from-amber-900/20 dark:to-amber-800/20 p-4 rounded-lg border border-amber-200 dark:border-amber-700",children:[s.jsx("div",{className:"text-sm font-medium text-amber-600 dark:text-amber-400",children:"Cha phn loi"}),s.jsx("div",{className:"text-2xl font-bold text-amber-900 dark:text-amber-100 mt-1",children:e.filter(J=>!J.category).length})]})]})}),s.jsx("div",{className:"flex-1 overflow-auto p-6",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:[W.map(J=>s.jsxs("div",{className:"bg-white dark:bg-[#1e293b] rounded-lg shadow-sm border border-slate-200 dark:border-slate-700 p-5 hover:shadow-md transition-shadow",children:[s.jsx("div",{className:"flex items-start justify-between mb-3",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"text-3xl",children:J.icon}),s.jsxs("div",{children:[f===J.name?s.jsx("input",{type:"text",defaultValue:J.name,onKeyDown:ae=>{ae.key==="Enter"?U(J.name,ae.currentTarget.value):ae.key==="Escape"&&p(null)},onBlur:ae=>U(J.name,ae.target.value),autoFocus:!0,className:"px-2 py-1 border border-blue-500 rounded text-sm font-semibold text-slate-900 dark:text-slate-100 dark:bg-[#0f172a]"}):s.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:J.name}),s.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400 mt-0.5",children:[J.count," sn phm"]})]})]})}),s.jsxs("div",{className:"flex gap-2 mt-4",children:[s.jsx("button",{onClick:()=>p(J.name),className:"flex-1 px-3 py-1.5 text-sm border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:"i tn"}),s.jsx("button",{onClick:()=>z(J.name),className:"flex-1 px-3 py-1.5 text-sm border border-red-300 dark:border-red-700 text-red-600 dark:text-red-400 rounded hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",children:"Xa"})]})]},J.name)),W.length===0&&s.jsxs("div",{className:"col-span-full flex flex-col items-center justify-center py-16 text-center",children:[s.jsx("div",{className:"mb-4 text-slate-400 dark:text-slate-500",children:s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"w-16 h-16",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 7.5l9-4.5 9 4.5v9l-9 4.5-9-4.5v-9z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 7.5l9 4.5 9-4.5"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 12v9"})]})}),s.jsx("h3",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100 mb-2",children:"Cha c danh mc no"}),s.jsx("p",{className:"text-slate-600 dark:text-slate-400 mb-4",children:"Thm danh mc u tin  phn loi sn phm"}),s.jsx("button",{onClick:()=>d(!0),className:"px-6 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors font-medium",children:"Thm danh mc"})]})]})}),c&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl max-w-md w-full",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200 dark:border-slate-700",children:[s.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100",children:"Thm danh mc mi"}),s.jsx("button",{onClick:()=>d(!1),className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-200",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsxs("div",{className:"p-6 space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Tn danh mc"}),s.jsx("input",{type:"text",value:y,onChange:J=>g(J.target.value),placeholder:"VD: Ph tng xe my",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg dark:bg-slate-700 dark:text-slate-100",autoFocus:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Biu tng"}),s.jsx("div",{className:"grid grid-cols-6 gap-2",children:K.map(J=>s.jsx("button",{onClick:()=>S(J),className:`p-3 border rounded-lg transition-colors flex items-center justify-center ${k===J?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-slate-300 dark:border-slate-600 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:H[J]},J))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Mu sc"}),s.jsx("div",{className:"grid grid-cols-4 gap-2",children:Z.map(J=>s.jsx("button",{onClick:()=>w(J.value),className:`p-3 rounded-lg border-2 transition-all ${N===J.value?"border-slate-900 dark:border-slate-100 scale-110":"border-transparent"}`,style:{backgroundColor:J.value},title:J.label,children:s.jsx("div",{className:"w-full h-6"})},J.value))})]})]}),s.jsxs("div",{className:"flex justify-end gap-3 p-6 border-t border-slate-200 dark:border-slate-700",children:[s.jsx("button",{onClick:()=>d(!1),className:"px-4 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:"Hy"}),s.jsx("button",{onClick:R,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:"Thm danh mc"})]})]})}),s.jsx(IV,{isOpen:E.isOpen,title:E.title,message:E.message,confirmText:E.confirmText,cancelText:E.cancelText,confirmColor:E.confirmColor,onConfirm:D,onCancel:q})]})},MV=()=>{var z;const{sales:e,workOrders:t,currentBranchId:r}=Ba(),[n,a]=T.useState(1),[i]=T.useState(20),{data:l,isLoading:o}=A6({page:n,pageSize:i}),c=(l==null?void 0:l.data)||[],d=((z=l==null?void 0:l.meta)==null?void 0:z.total)||0,f=Math.max(1,Math.ceil(d/i)),[p,y]=T.useState(""),[g,N]=T.useState("all"),[w,k]=T.useState(null),[S,O]=T.useState("all"),[E,D]=T.useState(null),q=T.useMemo(()=>{const Z=new Set;return c.forEach(H=>{H.category&&Z.add(H.category)}),Array.from(Z).sort()},[c]),W=T.useMemo(()=>c.filter(Z=>{var K,J;if(p){const ae=p.toLowerCase(),se=Z.name.toLowerCase().includes(ae),ue=(K=Z.sku)==null?void 0:K.toLowerCase().includes(ae),fe=(J=Z.description)==null?void 0:J.toLowerCase().includes(ae);if(!se&&!ue&&!fe)return!1}if(g!=="all"&&Z.category!==g)return!1;if(w){const ae=Z.retailPrice[r]||0;if(ae<w.min||ae>w.max)return!1}const H=Z.stock[r]||0;return!(S==="in-stock"&&H<=0||S==="low-stock"&&H>10||S==="out-of-stock"&&H>0)}),[c,p,g,w,S,r]),U=E?(Z=>{const H=c.find(ue=>ue.id===Z);if(!H)return null;const K=e.filter(ue=>ue.items.some(fe=>fe.partId===Z)),J=t.filter(ue=>{var fe;return(fe=ue.partsUsed)==null?void 0:fe.some(ke=>ke.partId===Z)}),ae=K.reduce((ue,fe)=>{const ke=fe.items.find(_e=>_e.partId===Z);return ue+((ke==null?void 0:ke.quantity)||0)},0),se=K.reduce((ue,fe)=>{const ke=fe.items.find(_e=>_e.partId===Z);return ue+((ke==null?void 0:ke.sellingPrice)||0)*((ke==null?void 0:ke.quantity)||0)},0);return{part:H,salesCount:K.length,totalSold:ae,revenue:se,lastSold:K.length>0?K.sort((ue,fe)=>new Date(fe.date).getTime()-new Date(ue.date).getTime())[0].date:null,workOrdersCount:J.length}})(E):null;return s.jsxs("div",{className:"h-full flex bg-slate-50 dark:bg-[#0f172a]",children:[s.jsxs("div",{className:"w-96 bg-white dark:bg-[#1e293b] border-r border-slate-200 dark:border-slate-700 flex flex-col",children:[s.jsxs("div",{className:"p-6 border-b border-slate-200 dark:border-slate-700",children:[s.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-slate-100 mb-2",children:"Tra cu sn phm"}),s.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Tm kim v xem chi tit sn phm"})]}),s.jsx("div",{className:"p-4 border-b border-slate-200 dark:border-slate-700",children:s.jsx("input",{type:"text",value:p,onChange:Z=>y(Z.target.value),placeholder:"Tm theo tn, SKU, m t...",className:"w-full px-4 py-2.5 border border-slate-300 dark:border-slate-600 rounded-lg dark:bg-slate-700 dark:text-slate-100 placeholder-slate-400"})}),s.jsxs("div",{className:"flex-1 overflow-auto p-4 space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Danh mc"}),s.jsxs("select",{value:g,onChange:Z=>N(Z.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg dark:bg-slate-700 dark:text-slate-100",children:[s.jsx("option",{value:"all",children:"Tt c danh mc"}),q.map(Z=>s.jsx("option",{value:Z,children:Z},Z))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Tn kho"}),s.jsx("div",{className:"space-y-2",children:[{value:"all",label:"Tt c"},{value:"in-stock",label:"Cn hng"},{value:"low-stock",label:"Sp ht (10)"},{value:"out-of-stock",label:"Ht hng"}].map(Z=>s.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[s.jsx("input",{type:"radio",name:"stock",value:Z.value,checked:S===Z.value,onChange:H=>O(H.target.value),className:"w-4 h-4 text-blue-600"}),s.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:Z.label})]},Z.value))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Khong gi"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"number",placeholder:"T",onChange:Z=>k(H=>({min:Number(Z.target.value)||0,max:(H==null?void 0:H.max)||999999999})),className:"flex-1 px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg dark:bg-slate-700 dark:text-slate-100 text-sm"}),s.jsx("input",{type:"number",placeholder:"n",onChange:Z=>k(H=>({min:(H==null?void 0:H.min)||0,max:Number(Z.target.value)||999999999})),className:"flex-1 px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg dark:bg-slate-700 dark:text-slate-100 text-sm"})]}),w&&s.jsx("button",{onClick:()=>k(null),className:"text-xs text-blue-600 dark:text-blue-400 hover:underline",children:"Xa b lc gi"})]})]}),s.jsx("div",{className:"pt-4 border-t border-slate-200 dark:border-slate-700",children:s.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:["Tm thy"," ",s.jsx("span",{className:"font-semibold text-slate-900 dark:text-slate-100",children:W.length})," ","sn phm"]})})]})]}),s.jsxs("div",{className:"flex-1 flex flex-col",children:[s.jsxs("div",{className:"flex-1 overflow-auto p-6",children:[s.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-4",children:W.map(Z=>{const H=Z.stock[r]||0,K=Z.retailPrice[r]||0;return s.jsx("div",{onClick:()=>D(Z.id),className:`bg-white dark:bg-[#1e293b] rounded-lg shadow-sm border-2 transition-all cursor-pointer ${E===Z.id?"border-blue-500 shadow-md":"border-slate-200 dark:border-slate-700 hover:shadow-md"}`,children:s.jsxs("div",{className:"p-4",children:[s.jsxs("div",{className:"flex items-start justify-between mb-2",children:[s.jsx("h3",{className:"font-semibold text-slate-900 dark:text-slate-100",children:Z.name}),H<=0?s.jsx("span",{className:"px-2 py-0.5 bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400 text-xs rounded",children:"Ht hng"}):H<=10?s.jsx("span",{className:"px-2 py-0.5 bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-400 text-xs rounded",children:"Sp ht"}):s.jsx("span",{className:"px-2 py-0.5 bg-emerald-100 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-400 text-xs rounded",children:"Cn hng"})]}),s.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-400 mb-3",children:["SKU: ",Z.sku]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Tn kho"}),s.jsx("div",{className:"text-lg font-bold text-slate-900 dark:text-slate-100",children:H})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Gi bn"}),s.jsx("div",{className:"text-lg font-bold text-blue-600 dark:text-blue-400",children:Oe(K)})]})]}),Z.category&&s.jsx("div",{className:"mt-3 pt-3 border-t border-slate-200 dark:border-slate-700",children:s.jsxs("span",{className:"text-xs text-slate-600 dark:text-slate-400 flex items-center gap-1",children:[s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"w-3.5 h-3.5",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 7.5l9-4.5 9 4.5v9l-9 4.5-9-4.5v-9z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 7.5l9 4.5 9-4.5"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 12v9"})]}),Z.category]})})]})},Z.id)})}),W.length===0&&s.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[s.jsx("div",{className:"mb-4 text-slate-400 dark:text-slate-500",children:s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"w-16 h-16",children:[s.jsx("circle",{cx:"11",cy:"11",r:"7"}),s.jsx("path",{d:"m21 21-4.35-4.35"})]})}),s.jsx("h3",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100 mb-2",children:"Khng tm thy sn phm"}),s.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Th thay i b lc hoc t kha tm kim"})]})]}),s.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-t border-slate-200 dark:border-slate-700 bg-white dark:bg-[#1e293b]",children:[s.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:["Trang ",n,"/",f,"  Tng ",d," sn phm"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{disabled:n===1||o,onClick:()=>a(Z=>Math.max(1,Z-1)),className:"px-3 py-1.5 border border-slate-300 dark:border-slate-600 rounded disabled:opacity-40 hover:bg-slate-50 dark:hover:bg-slate-700",children:" Trc"}),s.jsx("button",{disabled:n>=f||o,onClick:()=>a(Z=>Math.min(f,Z+1)),className:"px-3 py-1.5 border border-slate-300 dark:border-slate-600 rounded disabled:opacity-40 hover:bg-slate-50 dark:hover:bg-slate-700",children:"Sau "})]})]})]}),U&&s.jsxs("div",{className:"w-96 bg-white dark:bg-[#1e293b] border-l border-slate-200 dark:border-slate-700 flex flex-col",children:[s.jsxs("div",{className:"p-6 border-b border-slate-200 dark:border-slate-700",children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:"Chi tit sn phm"}),s.jsx("button",{onClick:()=>D(null),className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-200",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:U.part.name}),s.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:["SKU: ",U.part.sku]})]}),U.part.description&&s.jsxs("div",{children:[s.jsx("div",{className:"text-xs font-medium text-slate-500 dark:text-slate-400 mb-1",children:"M t"}),s.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300",children:U.part.description})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-xs font-medium text-slate-500 dark:text-slate-400 mb-1",children:"Tn kho"}),s.jsx("div",{className:"text-2xl font-bold text-slate-900 dark:text-slate-100",children:U.part.stock[r]||0})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs font-medium text-slate-500 dark:text-slate-400 mb-1",children:"Gi bn l"}),s.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:Oe(U.part.retailPrice[r]||0)})]})]})]})]}),s.jsxs("div",{className:"flex-1 overflow-auto p-6",children:[s.jsx("h3",{className:"font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Thng k bn hng"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 p-4 rounded-lg",children:[s.jsx("div",{className:"text-sm text-blue-600 dark:text-blue-400 mb-1",children:"Tng  bn"}),s.jsx("div",{className:"text-3xl font-bold text-blue-900 dark:text-blue-100",children:U.totalSold})]}),s.jsxs("div",{className:"bg-gradient-to-br from-emerald-50 to-emerald-100 dark:from-emerald-900/20 dark:to-emerald-800/20 p-4 rounded-lg",children:[s.jsx("div",{className:"text-sm text-emerald-600 dark:text-emerald-400 mb-1",children:"Doanh thu"}),s.jsx("div",{className:"text-2xl font-bold text-emerald-900 dark:text-emerald-100",children:Oe(U.revenue)})]}),s.jsxs("div",{className:"bg-gradient-to-br from-amber-50 to-amber-100 dark:from-amber-900/20 dark:to-amber-800/20 p-4 rounded-lg",children:[s.jsx("div",{className:"text-sm text-amber-600 dark:text-amber-400 mb-1",children:"S n hng"}),s.jsx("div",{className:"text-3xl font-bold text-amber-900 dark:text-amber-100",children:U.salesCount})]}),U.lastSold&&s.jsxs("div",{children:[s.jsx("div",{className:"text-xs font-medium text-slate-500 dark:text-slate-400 mb-1",children:"Bn gn nht"}),s.jsx("div",{className:"text-sm text-slate-700 dark:text-slate-300",children:Bn(U.lastSold)})]}),U.workOrdersCount>0&&s.jsxs("div",{children:[s.jsx("div",{className:"text-xs font-medium text-slate-500 dark:text-slate-400 mb-1",children:"Lnh sa cha"}),s.jsx("div",{className:"text-2xl font-bold text-slate-900 dark:text-slate-100",children:U.workOrdersCount})]})]})]})]})]})},m6e=()=>{const{sales:e,workOrders:t,currentBranchId:r}=Ba(),{data:n,isLoading:a}=A6({page:1,pageSize:20}),i=(n==null?void 0:n.data)||[],[l,o]=T.useState(""),[c,d]=T.useState("all"),[f,p]=T.useState(null),[y,g]=T.useState("all"),[N,w]=T.useState(null),[k,S]=T.useState(!1),[O,E]=T.useState(!1),D=T.useMemo(()=>{const U=new Set;return i.forEach(z=>{z.category&&U.add(z.category)}),Array.from(U).sort()},[i]),q=T.useMemo(()=>i.filter(U=>{var Z,H;if(l){const K=l.toLowerCase(),J=U.name.toLowerCase().includes(K),ae=(Z=U.sku)==null?void 0:Z.toLowerCase().includes(K),se=(H=U.description)==null?void 0:H.toLowerCase().includes(K);if(!J&&!ae&&!se)return!1}if(c!=="all"&&U.category!==c)return!1;if(f){const K=U.retailPrice[r]||0;if(K<f.min||K>f.max)return!1}const z=U.stock[r]||0;return!(y==="in-stock"&&z<=0||y==="low-stock"&&z>10||y==="out-of-stock"&&z>0)}),[i,l,c,f,y,r]),R=N?(U=>{const z=i.find(ae=>ae.id===U);if(!z)return null;const Z=e.filter(ae=>ae.items.some(se=>se.partId===U)),H=t.filter(ae=>{var se;return(se=ae.partsUsed)==null?void 0:se.some(ue=>ue.partId===U)}),K=Z.reduce((ae,se)=>{const ue=se.items.find(fe=>fe.partId===U);return ae+((ue==null?void 0:ue.quantity)||0)},0),J=Z.reduce((ae,se)=>{const ue=se.items.find(fe=>fe.partId===U);return ae+((ue==null?void 0:ue.sellingPrice)||0)*((ue==null?void 0:ue.quantity)||0)},0);return{part:z,salesCount:Z.length,totalSold:K,revenue:J,lastSold:Z.length>0?Z.sort((ae,se)=>new Date(se.date).getTime()-new Date(ae.date).getTime())[0].date:null,workOrdersCount:H.length}})(N):null;return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex flex-col h-full bg-slate-50 dark:bg-[#0f172a]",children:[s.jsxs("div",{className:"sticky top-0 z-10 bg-white dark:bg-[#1e293b] border-b border-slate-200 dark:border-slate-700 p-3 space-y-2",children:[s.jsx("input",{type:"text",value:l,onChange:U=>o(U.target.value),placeholder:"Tm sn phm...",className:"w-full px-4 py-2.5 border border-slate-300 dark:border-slate-600 rounded-lg dark:bg-slate-700 dark:text-slate-100 placeholder-slate-400 text-sm"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("button",{onClick:()=>S(!0),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg text-sm font-medium",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})}),"B lc"]}),s.jsxs("div",{className:"px-4 py-2 bg-slate-100 dark:bg-slate-700 rounded-lg text-sm font-medium text-slate-700 dark:text-slate-300",children:[q.length," sp"]})]})]}),s.jsx("div",{className:"flex-1 overflow-auto",children:q.length===0?s.jsxs("div",{className:"flex flex-col items-center justify-center h-full p-8 text-center",children:[s.jsxs("svg",{className:"w-16 h-16 text-slate-300 dark:text-slate-600 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[s.jsx("circle",{cx:"11",cy:"11",r:"7"}),s.jsx("path",{d:"m21 21-4.35-4.35"})]}),s.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-2",children:"Khng tm thy sn phm"}),s.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Th thay i b lc hoc t kha tm kim"})]}):s.jsx("div",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:q.map(U=>{const z=U.stock[r]||0,Z=U.retailPrice[r]||0;return s.jsxs("button",{onClick:()=>{w(U.id),E(!0)},className:"w-full p-4 flex items-center gap-3 bg-white dark:bg-[#1e293b] hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors text-left",children:[s.jsx("div",{className:"w-12 h-12 rounded-lg bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center flex-shrink-0",children:s.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h3",{className:"font-semibold text-slate-900 dark:text-slate-100 truncate",children:U.name}),s.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:["SKU: ",U.sku]}),U.category&&s.jsx("p",{className:"text-xs text-slate-400 dark:text-slate-500 mt-0.5",children:U.category})]}),s.jsxs("div",{className:"text-right flex-shrink-0",children:[s.jsx("div",{className:"text-base font-bold text-blue-600 dark:text-blue-400",children:Oe(Z)}),s.jsx("div",{className:"flex items-center gap-1 justify-end mt-1",children:z<=0?s.jsx("span",{className:"px-2 py-0.5 bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400 text-xs rounded",children:"Ht"}):z<=10?s.jsx("span",{className:"px-2 py-0.5 bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-400 text-xs rounded",children:z}):s.jsx("span",{className:"px-2 py-0.5 bg-emerald-100 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-400 text-xs rounded",children:z})})]})]},U.id)})})})]}),k&&s.jsxs("div",{className:"fixed inset-0 z-50 flex items-end",children:[s.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>S(!1)}),s.jsxs("div",{className:"relative bg-white dark:bg-[#1e293b] rounded-t-2xl w-full max-h-[80vh] overflow-hidden flex flex-col",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-slate-200 dark:border-slate-700",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"B lc tm kim"}),s.jsx("button",{onClick:()=>S(!1),className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsxs("div",{className:"flex-1 overflow-auto p-4 space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Danh mc"}),s.jsxs("select",{value:c,onChange:U=>d(U.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg dark:bg-slate-700 dark:text-slate-100",children:[s.jsx("option",{value:"all",children:"Tt c danh mc"}),D.map(U=>s.jsx("option",{value:U,children:U},U))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Tn kho"}),s.jsx("div",{className:"space-y-2",children:[{value:"all",label:"Tt c"},{value:"in-stock",label:"Cn hng"},{value:"low-stock",label:"Sp ht (10)"},{value:"out-of-stock",label:"Ht hng"}].map(U=>s.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[s.jsx("input",{type:"radio",name:"stock",value:U.value,checked:y===U.value,onChange:z=>g(z.target.value),className:"w-4 h-4 text-blue-600"}),s.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:U.label})]},U.value))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Khong gi"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"number",placeholder:"T",onChange:U=>p(z=>({min:Number(U.target.value)||0,max:(z==null?void 0:z.max)||999999999})),className:"flex-1 px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg dark:bg-slate-700 dark:text-slate-100 text-sm"}),s.jsx("input",{type:"number",placeholder:"n",onChange:U=>p(z=>({min:(z==null?void 0:z.min)||0,max:Number(U.target.value)||999999999})),className:"flex-1 px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg dark:bg-slate-700 dark:text-slate-100 text-sm"})]}),f&&s.jsx("button",{onClick:()=>p(null),className:"text-xs text-blue-600 dark:text-blue-400 hover:underline",children:"Xa b lc gi"})]})]})]}),s.jsxs("div",{className:"p-4 border-t border-slate-200 dark:border-slate-700 flex gap-2",children:[s.jsx("button",{onClick:()=>{d("all"),g("all"),p(null)},className:"flex-1 px-4 py-2.5 border border-slate-300 dark:border-slate-600 rounded-lg text-sm font-medium text-slate-700 dark:text-slate-300",children:"t li"}),s.jsx("button",{onClick:()=>S(!1),className:"flex-1 px-4 py-2.5 bg-blue-600 text-white rounded-lg text-sm font-medium",children:"p dng"})]})]})]}),O&&R&&s.jsxs("div",{className:"fixed inset-0 z-50 flex items-end",children:[s.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>E(!1)}),s.jsxs("div",{className:"relative bg-white dark:bg-[#1e293b] rounded-t-2xl w-full max-h-[85vh] overflow-hidden flex flex-col",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-slate-200 dark:border-slate-700",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Chi tit sn phm"}),s.jsx("button",{onClick:()=>E(!1),className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsxs("div",{className:"flex-1 overflow-auto p-4 space-y-4",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-100 mb-1",children:R.part.name}),s.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:["SKU: ",R.part.sku]}),R.part.category&&s.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:["Danh mc: ",R.part.category]})]}),R.part.description&&s.jsxs("div",{children:[s.jsx("div",{className:"text-xs font-medium text-slate-500 dark:text-slate-400 mb-1",children:"M t"}),s.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300",children:R.part.description})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-800 rounded-lg",children:[s.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"Tn kho"}),s.jsx("div",{className:"text-2xl font-bold text-slate-900 dark:text-slate-100",children:R.part.stock[r]||0})]}),s.jsxs("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[s.jsx("div",{className:"text-xs text-blue-600 dark:text-blue-400 mb-1",children:"Gi bn l"}),s.jsx("div",{className:"text-xl font-bold text-blue-600 dark:text-blue-400",children:Oe(R.part.retailPrice[r]||0)})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-slate-900 dark:text-slate-100 mb-3",children:"Thng k bn hng"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 p-3 rounded-lg",children:[s.jsx("div",{className:"text-sm text-blue-600 dark:text-blue-400 mb-1",children:"Tng  bn"}),s.jsx("div",{className:"text-2xl font-bold text-blue-900 dark:text-blue-100",children:R.totalSold})]}),s.jsxs("div",{className:"bg-gradient-to-br from-emerald-50 to-emerald-100 dark:from-emerald-900/20 dark:to-emerald-800/20 p-3 rounded-lg",children:[s.jsx("div",{className:"text-sm text-emerald-600 dark:text-emerald-400 mb-1",children:"Doanh thu"}),s.jsx("div",{className:"text-xl font-bold text-emerald-900 dark:text-emerald-100",children:Oe(R.revenue)})]}),s.jsxs("div",{className:"bg-gradient-to-br from-amber-50 to-amber-100 dark:from-amber-900/20 dark:to-amber-800/20 p-3 rounded-lg",children:[s.jsx("div",{className:"text-sm text-amber-600 dark:text-amber-400 mb-1",children:"S n hng"}),s.jsx("div",{className:"text-2xl font-bold text-amber-900 dark:text-amber-100",children:R.salesCount})]}),R.lastSold&&s.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-800 rounded-lg",children:[s.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"Bn gn nht"}),s.jsx("div",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:Bn(R.lastSold)})]})]})]})]})]})]})]})},wA=e=>Ts({queryKey:["inventoryTxRepo",e],queryFn:async()=>{const t=await Fee(e);if(!t.ok)throw t.error;return t.data}}),x6e=()=>{const e=qn();return ha({mutationFn:async t=>{console.log(" ang gi createInventoryTransaction vi input:",t);const r=await Bee(t);if(console.log(" Kt qu createInventoryTransaction:",r),!r.ok)throw r.error||new Error("Li khng xc nh");return r.data},onSuccess:()=>{console.log(" Lu lch s thnh cng!"),e.invalidateQueries({queryKey:["inventoryTxRepo"]}),Xe.success(" ghi lch s kho")},onError:t=>{console.error(" Li lu lch s:",t),Xe.error(va(t))}})},RS="suppliers";async function p6e(){try{const{data:e,error:t}=await Ot.from(RS).select("*").order("name");return t?Ct({code:"supabase",message:"Khng th ti nh cung cp",cause:t}):_n(e||[])}catch(e){return Ct({code:"network",message:"Li kt ni",cause:e})}}async function g6e(e){var t;try{if(!e.name)return Ct({code:"validation",message:"Thiu tn nh cung cp"});const r={id:typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():`${Math.random().toString(36).slice(2)}-${Date.now()}`,name:e.name,phone:e.phone,address:e.address,created_at:new Date().toISOString()},{data:n,error:a}=await Ot.from(RS).insert([r]).select().single();if(a||!n){const l=(a==null?void 0:a.message)||(a==null?void 0:a.details)||"To nh cung cp tht bi";return Ct({code:"supabase",message:l,cause:a})}let i=null;try{const{data:l}=await Ot.auth.getUser();i=((t=l==null?void 0:l.user)==null?void 0:t.id)||null}catch{}return await Bs(i,{action:"supplier.create",tableName:RS,recordId:n.id,oldData:null,newData:n}),_n(n)}catch(r){return Ct({code:"network",message:"Li kt ni khi to nh cung cp",cause:r})}}const kA=()=>Ts({queryKey:["suppliers"],queryFn:async()=>{const e=await p6e();if(!e.ok)throw e.error;return e.data}}),LV=()=>{const e=qn();return ha({mutationFn:async t=>{const r=await g6e(t);if(!r.ok)throw r.error;return r.data},onSuccess:()=>{e.invalidateQueries({queryKey:["suppliers"]}),Xe.success(" thm nh cung cp")},onError:t=>Xe.error((t==null?void 0:t.message)||"Li thm nh cung cp")})},xN=new Intl.NumberFormat("vi-VN",{minimumFractionDigits:0,maximumFractionDigits:2});function b6e(e){let t=e.replace(/[^0-9.,-]/g,"");const r=t.includes("."),n=t.includes(",");r&&n?t=t.replace(/\./g,"").replace(",","."):n&&!r&&(t=t.replace(",","."));const a=Number(t);return Number.isFinite(a)?a:0}const P0=({value:e,onValue:t,placeholder:r,className:n,min:a,max:i,disabled:l,ariaLabel:o})=>{const[c,d]=ua.useState(e?xN.format(e):""),[f,p]=ua.useState(!1);ua.useEffect(()=>{f||d(e?xN.format(e):"")},[e,f]);const y=N=>{const w=N.target.value;d(w);const k=b6e(w);if(a!==void 0&&k<a){t(a);return}if(i!==void 0&&k>i){t(i);return}t(k)},g=()=>{p(!1),d(e?xN.format(e):"")};return s.jsx("input",{type:"text",inputMode:"decimal",value:c,onChange:y,onFocus:()=>p(!0),onBlur:g,placeholder:r,className:n,disabled:l,"aria-label":o})},PD=5e7,ID=1e4;function FS(e,t){const r=[];let n=Math.max(0,Math.round(e)),a=Math.max(0,Math.round(t));return n>PD&&(r.push("Gi nhp qu ln (>50 triu)  c gii hn."),n=PD),a>ID&&(r.push("S lng qu ln (>10,000)  c gii hn."),a=ID),{ok:!0,warnings:r,clean:{importPrice:n,quantity:a}}}function v6e(e){if(!e||!e.trim())return{ok:!1,error:"S in thoi khng c  trng"};const t=e.trim().replace(/\s+/g,"");return/^(0|\+84)[0-9]{9,10}$/.test(t)?{ok:!0}:{ok:!1,error:"S in thoi khng hp l. Vui lng nhp 10-11 s (VD: 0912345678)"}}const y6e=({isOpen:e,onClose:t,selectedSupplierId:r,onSelectSupplier:n})=>{const[a,i]=T.useState(""),[l,o]=T.useState(!1),{data:c=[]}=kA(),d=LV(),[f,p]=T.useState({name:"",phone:"",address:"",note:""}),y=c.filter(N=>{var k,S;const w=a.toLowerCase();return((k=N.name)==null?void 0:k.toLowerCase().includes(w))||((S=N.phone)==null?void 0:S.toLowerCase().includes(w))}),g=async()=>{if(!f.name.trim()){Xe.error("Vui lng nhp tn nh cung cp");return}try{const N=await d.mutateAsync(f);Xe.success(" thm nh cung cp"),n(N.id),p({name:"",phone:"",address:"",note:""}),o(!1),t()}catch(N){Xe.error((N==null?void 0:N.message)||"Li thm nh cung cp")}};return e?s.jsx("div",{className:"fixed inset-0 bg-black/50 z-[110] flex items-end sm:items-center justify-center",onClick:t,children:s.jsxs("div",{onClick:N=>N.stopPropagation(),className:"bg-white dark:bg-slate-800 w-full sm:max-w-md h-[85vh] sm:h-auto sm:max-h-[80vh] rounded-t-3xl sm:rounded-xl overflow-hidden flex flex-col",children:[s.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 p-4 flex items-center justify-between flex-shrink-0",children:[s.jsx("h3",{className:"text-lg font-bold text-white",children:l?"Thm NCC mi":"Chn nh cung cp"}),s.jsx("button",{onClick:t,className:"text-white text-2xl leading-none",children:""})]}),l?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["Tn nh cung cp ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",value:f.name,onChange:N=>p({...f,name:N.target.value}),placeholder:"Nhp tn NCC",className:"w-full px-4 py-3 border border-slate-300 dark:border-slate-600 rounded-xl bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"S in thoi"}),s.jsx("input",{type:"tel",inputMode:"numeric",value:f.phone,onChange:N=>p({...f,phone:N.target.value}),placeholder:"Nhp ST",className:"w-full px-4 py-3 border border-slate-300 dark:border-slate-600 rounded-xl bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"a ch"}),s.jsx("textarea",{value:f.address,onChange:N=>p({...f,address:N.target.value}),placeholder:"Nhp a ch",rows:3,className:"w-full px-4 py-3 border border-slate-300 dark:border-slate-600 rounded-xl bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 resize-none"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Ghi ch"}),s.jsx("textarea",{value:f.note,onChange:N=>p({...f,note:N.target.value}),placeholder:"Ghi ch thm",rows:2,className:"w-full px-4 py-3 border border-slate-300 dark:border-slate-600 rounded-xl bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 resize-none"})]})]}),s.jsxs("div",{className:"p-3 border-t border-slate-200 dark:border-slate-700 flex gap-2 flex-shrink-0",children:[s.jsx("button",{onClick:()=>{o(!1),p({name:"",phone:"",address:"",note:""})},className:"flex-1 py-3 border-2 border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-xl font-medium active:scale-98 transition-transform",children:"Hy"}),s.jsx("button",{onClick:g,disabled:!f.name.trim()||d.isPending,className:"flex-1 py-3 bg-blue-600 hover:bg-blue-700 disabled:bg-slate-300 dark:disabled:bg-slate-600 text-white rounded-xl font-bold active:scale-98 transition-transform disabled:cursor-not-allowed",children:d.isPending?"ang thm...":"Thm NCC"})]})]}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"p-3 border-b border-slate-200 dark:border-slate-700 flex-shrink-0",children:s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"text",placeholder:"Tm theo tn, ST...",value:a,onChange:N=>i(N.target.value),className:"w-full px-4 py-3 pl-10 border border-slate-300 dark:border-slate-600 rounded-xl bg-slate-50 dark:bg-slate-900 text-slate-900 dark:text-slate-100"}),s.jsx("svg",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})}),s.jsx("div",{className:"flex-1 overflow-y-auto p-3 space-y-2",children:y.length===0?s.jsxs("div",{className:"text-center text-slate-500 py-12",children:[s.jsx("div",{className:"text-5xl mb-3",children:""}),s.jsx("div",{children:"Khng tm thy nh cung cp"})]}):y.map(N=>s.jsxs("div",{onClick:()=>{n(N.id),t()},className:`p-4 rounded-xl border-2 cursor-pointer transition-all ${r===N.id?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 active:scale-98"}`,children:[s.jsx("div",{className:"font-bold text-slate-900 dark:text-slate-100",children:N.name}),N.phone&&s.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:[" ",N.phone]}),N.address&&s.jsxs("div",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:[" ",N.address]})]},N.id))}),s.jsx("div",{className:"p-3 border-t border-slate-200 dark:border-slate-700 flex-shrink-0",children:s.jsxs("button",{onClick:()=>o(!0),className:"w-full py-4 bg-green-600 hover:bg-green-700 active:scale-98 text-white rounded-xl font-bold flex items-center justify-center gap-2 transition-transform",children:[s.jsx("span",{className:"text-xl",children:"+"}),s.jsx("span",{children:"Thm nh cung cp mi"})]})})]})]})}):null};var Vr;(function(e){e[e.QR_CODE=0]="QR_CODE",e[e.AZTEC=1]="AZTEC",e[e.CODABAR=2]="CODABAR",e[e.CODE_39=3]="CODE_39",e[e.CODE_93=4]="CODE_93",e[e.CODE_128=5]="CODE_128",e[e.DATA_MATRIX=6]="DATA_MATRIX",e[e.MAXICODE=7]="MAXICODE",e[e.ITF=8]="ITF",e[e.EAN_13=9]="EAN_13",e[e.EAN_8=10]="EAN_8",e[e.PDF_417=11]="PDF_417",e[e.RSS_14=12]="RSS_14",e[e.RSS_EXPANDED=13]="RSS_EXPANDED",e[e.UPC_A=14]="UPC_A",e[e.UPC_E=15]="UPC_E",e[e.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Vr||(Vr={}));var DD=new Map([[Vr.QR_CODE,"QR_CODE"],[Vr.AZTEC,"AZTEC"],[Vr.CODABAR,"CODABAR"],[Vr.CODE_39,"CODE_39"],[Vr.CODE_93,"CODE_93"],[Vr.CODE_128,"CODE_128"],[Vr.DATA_MATRIX,"DATA_MATRIX"],[Vr.MAXICODE,"MAXICODE"],[Vr.ITF,"ITF"],[Vr.EAN_13,"EAN_13"],[Vr.EAN_8,"EAN_8"],[Vr.PDF_417,"PDF_417"],[Vr.RSS_14,"RSS_14"],[Vr.RSS_EXPANDED,"RSS_EXPANDED"],[Vr.UPC_A,"UPC_A"],[Vr.UPC_E,"UPC_E"],[Vr.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),MD;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.URL=1]="URL"})(MD||(MD={}));function w6e(e){return Object.values(Vr).includes(e)}var kw;(function(e){e[e.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",e[e.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(kw||(kw={}));var k6e=(function(){function e(){}return e.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",e.SCAN_DEFAULT_FPS=2,e.DEFAULT_DISABLE_FLIP=!1,e.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,e.DEFAULT_SUPPORTED_SCAN_TYPE=[kw.SCAN_TYPE_CAMERA,kw.SCAN_TYPE_FILE],e})(),RV=(function(){function e(t,r){this.format=t,this.formatName=r}return e.prototype.toString=function(){return this.formatName},e.create=function(t){if(!DD.has(t))throw"".concat(t," not in html5QrcodeSupportedFormatsTextMap");return new e(t,DD.get(t))},e})(),LD=(function(){function e(){}return e.createFromText=function(t){var r={text:t};return{decodedText:t,result:r}},e.createFromQrcodeResult=function(t){return{decodedText:t.text,result:t}},e})(),BS;(function(e){e[e.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",e[e.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",e[e.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(BS||(BS={}));var N6e=(function(){function e(){}return e.createFrom=function(t){return{errorMessage:t,type:BS.UNKWOWN_ERROR}},e})(),_6e=(function(){function e(t){this.verbose=t}return e.prototype.log=function(t){this.verbose&&console.log(t)},e.prototype.warn=function(t){this.verbose&&console.warn(t)},e.prototype.logError=function(t,r){(this.verbose||r===!0)&&console.error(t)},e.prototype.logErrors=function(t){if(t.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(t)},e})();function b0(e){return typeof e>"u"||e===null}var c1=(function(){function e(){}return e.codeParseError=function(t){return"QR code parse error, error = ".concat(t)},e.errorGettingUserMedia=function(t){return"Error getting userMedia, error = ".concat(t)},e.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},e.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},e.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},e.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},e.scannerPaused=function(){return"Scanner paused"},e})(),FV=(function(){function e(){}return e.isMediaStreamConstraintsValid=function(t,r){if(typeof t!="object"){var n=typeof t;return r.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(n,"."),!0),!1}for(var a=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],i=new Set(a),l=Object.keys(t),o=0,c=l;o<c.length;o++){var d=c[o];if(i.has(d))return r.logError("".concat(d," is not supported videoConstaints."),!0),!1}return!0},e})(),kg={exports:{}},S6e=kg.exports,RD;function j6e(){return RD||(RD=1,(function(e,t){(function(r,n){n(t)})(S6e,(function(r){function n(pe){return pe==null}var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(pe,h){pe.__proto__=h}||function(pe,h){for(var x in h)h.hasOwnProperty(x)&&(pe[x]=h[x])};function i(pe,h){a(pe,h);function x(){this.constructor=pe}pe.prototype=h===null?Object.create(h):(x.prototype=h.prototype,new x)}function l(pe,h){var x=Object.setPrototypeOf;x?x(pe,h):pe.__proto__=h}function o(pe,h){h===void 0&&(h=pe.constructor);var x=Error.captureStackTrace;x&&x(pe,h)}var c=(function(pe){i(h,pe);function h(x){var b=this.constructor,_=pe.call(this,x)||this;return Object.defineProperty(_,"name",{value:b.name,enumerable:!1}),l(_,b.prototype),o(_),_}return h})(Error);class d extends c{constructor(h=void 0){super(h),this.message=h}getKind(){return this.constructor.kind}}d.kind="Exception";class f extends d{}f.kind="ArgumentException";class p extends d{}p.kind="IllegalArgumentException";class y{constructor(h){if(this.binarizer=h,h===null)throw new p("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(h,x){return this.binarizer.getBlackRow(h,x)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(h,x,b,_){const j=this.binarizer.getLuminanceSource().crop(h,x,b,_);return new y(this.binarizer.createBinarizer(j))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const h=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new y(this.binarizer.createBinarizer(h))}rotateCounterClockwise45(){const h=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new y(this.binarizer.createBinarizer(h))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class g extends d{static getChecksumInstance(){return new g}}g.kind="ChecksumException";class N{constructor(h){this.source=h}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class w{static arraycopy(h,x,b,_,j){for(;j--;)b[_++]=h[x++]}static currentTimeMillis(){return Date.now()}}class k extends d{}k.kind="IndexOutOfBoundsException";class S extends k{constructor(h=void 0,x=void 0){super(x),this.index=h,this.message=x}}S.kind="ArrayIndexOutOfBoundsException";class O{static fill(h,x){for(let b=0,_=h.length;b<_;b++)h[b]=x}static fillWithin(h,x,b,_){O.rangeCheck(h.length,x,b);for(let j=x;j<b;j++)h[j]=_}static rangeCheck(h,x,b){if(x>b)throw new p("fromIndex("+x+") > toIndex("+b+")");if(x<0)throw new S(x);if(b>h)throw new S(b)}static asList(...h){return h}static create(h,x,b){return Array.from({length:h}).map(j=>Array.from({length:x}).fill(b))}static createInt32Array(h,x,b){return Array.from({length:h}).map(j=>Int32Array.from({length:x}).fill(b))}static equals(h,x){if(!h||!x||!h.length||!x.length||h.length!==x.length)return!1;for(let b=0,_=h.length;b<_;b++)if(h[b]!==x[b])return!1;return!0}static hashCode(h){if(h===null)return 0;let x=1;for(const b of h)x=31*x+b;return x}static fillUint8Array(h,x){for(let b=0;b!==h.length;b++)h[b]=x}static copyOf(h,x){return h.slice(0,x)}static copyOfUint8Array(h,x){if(h.length<=x){const b=new Uint8Array(x);return b.set(h),b}return h.slice(0,x)}static copyOfRange(h,x,b){const _=b-x,j=new Int32Array(_);return w.arraycopy(h,x,j,0,_),j}static binarySearch(h,x,b){b===void 0&&(b=O.numberComparator);let _=0,j=h.length-1;for(;_<=j;){const A=j+_>>1,I=b(x,h[A]);if(I>0)_=A+1;else if(I<0)j=A-1;else return A}return-_-1}static numberComparator(h,x){return h-x}}class E{static numberOfTrailingZeros(h){let x;if(h===0)return 32;let b=31;return x=h<<16,x!==0&&(b-=16,h=x),x=h<<8,x!==0&&(b-=8,h=x),x=h<<4,x!==0&&(b-=4,h=x),x=h<<2,x!==0&&(b-=2,h=x),b-(h<<1>>>31)}static numberOfLeadingZeros(h){if(h===0)return 32;let x=1;return h>>>16||(x+=16,h<<=16),h>>>24||(x+=8,h<<=8),h>>>28||(x+=4,h<<=4),h>>>30||(x+=2,h<<=2),x-=h>>>31,x}static toHexString(h){return h.toString(16)}static toBinaryString(h){return String(parseInt(String(h),2))}static bitCount(h){return h=h-(h>>>1&1431655765),h=(h&858993459)+(h>>>2&858993459),h=h+(h>>>4)&252645135,h=h+(h>>>8),h=h+(h>>>16),h&63}static truncDivision(h,x){return Math.trunc(h/x)}static parseInt(h,x=void 0){return parseInt(h,x)}}E.MIN_VALUE_32_BITS=-2147483648,E.MAX_VALUE=Number.MAX_SAFE_INTEGER;class D{constructor(h,x){h===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=h,x==null?this.bits=D.makeArray(h):this.bits=x)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(h){if(h>this.bits.length*32){const x=D.makeArray(h);w.arraycopy(this.bits,0,x,0,this.bits.length),this.bits=x}}get(h){return(this.bits[Math.floor(h/32)]&1<<(h&31))!==0}set(h){this.bits[Math.floor(h/32)]|=1<<(h&31)}flip(h){this.bits[Math.floor(h/32)]^=1<<(h&31)}getNextSet(h){const x=this.size;if(h>=x)return x;const b=this.bits;let _=Math.floor(h/32),j=b[_];j&=~((1<<(h&31))-1);const A=b.length;for(;j===0;){if(++_===A)return x;j=b[_]}const I=_*32+E.numberOfTrailingZeros(j);return I>x?x:I}getNextUnset(h){const x=this.size;if(h>=x)return x;const b=this.bits;let _=Math.floor(h/32),j=~b[_];j&=~((1<<(h&31))-1);const A=b.length;for(;j===0;){if(++_===A)return x;j=~b[_]}const I=_*32+E.numberOfTrailingZeros(j);return I>x?x:I}setBulk(h,x){this.bits[Math.floor(h/32)]=x}setRange(h,x){if(x<h||h<0||x>this.size)throw new p;if(x===h)return;x--;const b=Math.floor(h/32),_=Math.floor(x/32),j=this.bits;for(let A=b;A<=_;A++){const I=A>b?0:h&31,X=(2<<(A<_?31:x&31))-(1<<I);j[A]|=X}}clear(){const h=this.bits.length,x=this.bits;for(let b=0;b<h;b++)x[b]=0}isRange(h,x,b){if(x<h||h<0||x>this.size)throw new p;if(x===h)return!0;x--;const _=Math.floor(h/32),j=Math.floor(x/32),A=this.bits;for(let I=_;I<=j;I++){const F=I>_?0:h&31,ce=(2<<(I<j?31:x&31))-(1<<F)&4294967295;if((A[I]&ce)!==(b?ce:0))return!1}return!0}appendBit(h){this.ensureCapacity(this.size+1),h&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(h,x){if(x<0||x>32)throw new p("Num bits must be between 0 and 32");this.ensureCapacity(this.size+x);for(let b=x;b>0;b--)this.appendBit((h>>b-1&1)===1)}appendBitArray(h){const x=h.size;this.ensureCapacity(this.size+x);for(let b=0;b<x;b++)this.appendBit(h.get(b))}xor(h){if(this.size!==h.size)throw new p("Sizes don't match");const x=this.bits;for(let b=0,_=x.length;b<_;b++)x[b]^=h.bits[b]}toBytes(h,x,b,_){for(let j=0;j<_;j++){let A=0;for(let I=0;I<8;I++)this.get(h)&&(A|=1<<7-I),h++;x[b+j]=A}}getBitArray(){return this.bits}reverse(){const h=new Int32Array(this.bits.length),x=Math.floor((this.size-1)/32),b=x+1,_=this.bits;for(let j=0;j<b;j++){let A=_[j];A=A>>1&1431655765|(A&1431655765)<<1,A=A>>2&858993459|(A&858993459)<<2,A=A>>4&252645135|(A&252645135)<<4,A=A>>8&16711935|(A&16711935)<<8,A=A>>16&65535|(A&65535)<<16,h[x-j]=A}if(this.size!==b*32){const j=b*32-this.size;let A=h[0]>>>j;for(let I=1;I<b;I++){const F=h[I];A|=F<<32-j,h[I-1]=A,A=F>>>j}h[b-1]=A}this.bits=h}static makeArray(h){return new Int32Array(Math.floor((h+31)/32))}equals(h){if(!(h instanceof D))return!1;const x=h;return this.size===x.size&&O.equals(this.bits,x.bits)}hashCode(){return 31*this.size+O.hashCode(this.bits)}toString(){let h="";for(let x=0,b=this.size;x<b;x++)(x&7)===0&&(h+=" "),h+=this.get(x)?"X":".";return h}clone(){return new D(this.size,this.bits.slice())}}var q;(function(pe){pe[pe.OTHER=0]="OTHER",pe[pe.PURE_BARCODE=1]="PURE_BARCODE",pe[pe.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",pe[pe.TRY_HARDER=3]="TRY_HARDER",pe[pe.CHARACTER_SET=4]="CHARACTER_SET",pe[pe.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",pe[pe.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",pe[pe.ASSUME_GS1=7]="ASSUME_GS1",pe[pe.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",pe[pe.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",pe[pe.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(q||(q={}));var W=q;class R extends d{static getFormatInstance(){return new R}}R.kind="FormatException";var U;(function(pe){pe[pe.Cp437=0]="Cp437",pe[pe.ISO8859_1=1]="ISO8859_1",pe[pe.ISO8859_2=2]="ISO8859_2",pe[pe.ISO8859_3=3]="ISO8859_3",pe[pe.ISO8859_4=4]="ISO8859_4",pe[pe.ISO8859_5=5]="ISO8859_5",pe[pe.ISO8859_6=6]="ISO8859_6",pe[pe.ISO8859_7=7]="ISO8859_7",pe[pe.ISO8859_8=8]="ISO8859_8",pe[pe.ISO8859_9=9]="ISO8859_9",pe[pe.ISO8859_10=10]="ISO8859_10",pe[pe.ISO8859_11=11]="ISO8859_11",pe[pe.ISO8859_13=12]="ISO8859_13",pe[pe.ISO8859_14=13]="ISO8859_14",pe[pe.ISO8859_15=14]="ISO8859_15",pe[pe.ISO8859_16=15]="ISO8859_16",pe[pe.SJIS=16]="SJIS",pe[pe.Cp1250=17]="Cp1250",pe[pe.Cp1251=18]="Cp1251",pe[pe.Cp1252=19]="Cp1252",pe[pe.Cp1256=20]="Cp1256",pe[pe.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",pe[pe.UTF8=22]="UTF8",pe[pe.ASCII=23]="ASCII",pe[pe.Big5=24]="Big5",pe[pe.GB18030=25]="GB18030",pe[pe.EUC_KR=26]="EUC_KR"})(U||(U={}));class z{constructor(h,x,b,..._){this.valueIdentifier=h,this.name=b,typeof x=="number"?this.values=Int32Array.from([x]):this.values=x,this.otherEncodingNames=_,z.VALUE_IDENTIFIER_TO_ECI.set(h,this),z.NAME_TO_ECI.set(b,this);const j=this.values;for(let A=0,I=j.length;A!==I;A++){const F=j[A];z.VALUES_TO_ECI.set(F,this)}for(const A of _)z.NAME_TO_ECI.set(A,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(h){if(h<0||h>=900)throw new R("incorect value");const x=z.VALUES_TO_ECI.get(h);if(x===void 0)throw new R("incorect value");return x}static getCharacterSetECIByName(h){const x=z.NAME_TO_ECI.get(h);if(x===void 0)throw new R("incorect value");return x}equals(h){if(!(h instanceof z))return!1;const x=h;return this.getName()===x.getName()}}z.VALUE_IDENTIFIER_TO_ECI=new Map,z.VALUES_TO_ECI=new Map,z.NAME_TO_ECI=new Map,z.Cp437=new z(U.Cp437,Int32Array.from([0,2]),"Cp437"),z.ISO8859_1=new z(U.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),z.ISO8859_2=new z(U.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),z.ISO8859_3=new z(U.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),z.ISO8859_4=new z(U.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),z.ISO8859_5=new z(U.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),z.ISO8859_6=new z(U.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),z.ISO8859_7=new z(U.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),z.ISO8859_8=new z(U.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),z.ISO8859_9=new z(U.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),z.ISO8859_10=new z(U.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),z.ISO8859_11=new z(U.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),z.ISO8859_13=new z(U.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),z.ISO8859_14=new z(U.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),z.ISO8859_15=new z(U.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),z.ISO8859_16=new z(U.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),z.SJIS=new z(U.SJIS,20,"SJIS","Shift_JIS"),z.Cp1250=new z(U.Cp1250,21,"Cp1250","windows-1250"),z.Cp1251=new z(U.Cp1251,22,"Cp1251","windows-1251"),z.Cp1252=new z(U.Cp1252,23,"Cp1252","windows-1252"),z.Cp1256=new z(U.Cp1256,24,"Cp1256","windows-1256"),z.UnicodeBigUnmarked=new z(U.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),z.UTF8=new z(U.UTF8,26,"UTF8","UTF-8"),z.ASCII=new z(U.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),z.Big5=new z(U.Big5,28,"Big5"),z.GB18030=new z(U.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),z.EUC_KR=new z(U.EUC_KR,30,"EUC_KR","EUC-KR");class Z extends d{}Z.kind="UnsupportedOperationException";class H{static decode(h,x){const b=this.encodingName(x);return this.customDecoder?this.customDecoder(h,b):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(b)?this.decodeFallback(h,b):new TextDecoder(b).decode(h)}static shouldDecodeOnFallback(h){return!H.isBrowser()&&h==="ISO-8859-1"}static encode(h,x){const b=this.encodingName(x);return this.customEncoder?this.customEncoder(h,b):typeof TextEncoder>"u"?this.encodeFallback(h):new TextEncoder().encode(h)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(h){return typeof h=="string"?h:h.getName()}static encodingCharacterSet(h){return h instanceof z?h:z.getCharacterSetECIByName(h)}static decodeFallback(h,x){const b=this.encodingCharacterSet(x);if(H.isDecodeFallbackSupported(b)){let _="";for(let j=0,A=h.length;j<A;j++){let I=h[j].toString(16);I.length<2&&(I="0"+I),_+="%"+I}return decodeURIComponent(_)}if(b.equals(z.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(h.buffer));throw new Z(`Encoding ${this.encodingName(x)} not supported by fallback.`)}static isDecodeFallbackSupported(h){return h.equals(z.UTF8)||h.equals(z.ISO8859_1)||h.equals(z.ASCII)}static encodeFallback(h){const b=btoa(unescape(encodeURIComponent(h))).split(""),_=[];for(let j=0;j<b.length;j++)_.push(b[j].charCodeAt(0));return new Uint8Array(_)}}class K{static castAsNonUtf8Char(h,x=null){const b=x?x.getName():this.ISO88591;return H.decode(new Uint8Array([h]),b)}static guessEncoding(h,x){if(x!=null&&x.get(W.CHARACTER_SET)!==void 0)return x.get(W.CHARACTER_SET).toString();const b=h.length;let _=!0,j=!0,A=!0,I=0,F=0,X=0,ce=0,ge=0,Ae=0,qe=0,Ye=0,rt=0,pt=0,St=0;const zt=h.length>3&&h[0]===239&&h[1]===187&&h[2]===191;for(let qt=0;qt<b&&(_||j||A);qt++){const Ft=h[qt]&255;A&&(I>0?(Ft&128)===0?A=!1:I--:(Ft&128)!==0&&((Ft&64)===0?A=!1:(I++,(Ft&32)===0?F++:(I++,(Ft&16)===0?X++:(I++,(Ft&8)===0?ce++:A=!1))))),_&&(Ft>127&&Ft<160?_=!1:Ft>159&&(Ft<192||Ft===215||Ft===247)&&St++),j&&(ge>0?Ft<64||Ft===127||Ft>252?j=!1:ge--:Ft===128||Ft===160||Ft>239?j=!1:Ft>160&&Ft<224?(Ae++,Ye=0,qe++,qe>rt&&(rt=qe)):Ft>127?(ge++,qe=0,Ye++,Ye>pt&&(pt=Ye)):(qe=0,Ye=0))}return A&&I>0&&(A=!1),j&&ge>0&&(j=!1),A&&(zt||F+X+ce>0)?K.UTF8:j&&(K.ASSUME_SHIFT_JIS||rt>=3||pt>=3)?K.SHIFT_JIS:_&&j?rt===2&&Ae===2||St*10>=b?K.SHIFT_JIS:K.ISO88591:_?K.ISO88591:j?K.SHIFT_JIS:A?K.UTF8:K.PLATFORM_DEFAULT_ENCODING}static format(h,...x){let b=-1;function _(A,I,F,X,ce,ge){if(A==="%%")return"%";if(x[++b]===void 0)return;A=X?parseInt(X.substr(1)):void 0;let Ae=ce?parseInt(ce.substr(1)):void 0,qe;switch(ge){case"s":qe=x[b];break;case"c":qe=x[b][0];break;case"f":qe=parseFloat(x[b]).toFixed(A);break;case"p":qe=parseFloat(x[b]).toPrecision(A);break;case"e":qe=parseFloat(x[b]).toExponential(A);break;case"x":qe=parseInt(x[b]).toString(Ae||16);break;case"d":qe=parseFloat(parseInt(x[b],Ae||10).toPrecision(A)).toFixed(0);break}qe=typeof qe=="object"?JSON.stringify(qe):(+qe).toString(Ae);let Ye=parseInt(F),rt=F&&F[0]+""=="0"?"0":" ";for(;qe.length<Ye;)qe=I!==void 0?qe+rt:rt+qe;return qe}let j=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return h.replace(j,_)}static getBytes(h,x){return H.encode(h,x)}static getCharCode(h,x=0){return h.charCodeAt(x)}static getCharAt(h){return String.fromCharCode(h)}}K.SHIFT_JIS=z.SJIS.getName(),K.GB2312="GB2312",K.ISO88591=z.ISO8859_1.getName(),K.EUC_JP="EUC_JP",K.UTF8=z.UTF8.getName(),K.PLATFORM_DEFAULT_ENCODING=K.UTF8,K.ASSUME_SHIFT_JIS=!1;class J{constructor(h=""){this.value=h}enableDecoding(h){return this.encoding=h,this}append(h){return typeof h=="string"?this.value+=h.toString():this.encoding?this.value+=K.castAsNonUtf8Char(h,this.encoding):this.value+=String.fromCharCode(h),this}appendChars(h,x,b){for(let _=x;x<x+b;_++)this.append(h[_]);return this}length(){return this.value.length}charAt(h){return this.value.charAt(h)}deleteCharAt(h){this.value=this.value.substr(0,h)+this.value.substring(h+1)}setCharAt(h,x){this.value=this.value.substr(0,h)+x+this.value.substr(h+1)}substring(h,x){return this.value.substring(h,x)}setLengthToZero(){this.value=""}toString(){return this.value}insert(h,x){this.value=this.value.substr(0,h)+x+this.value.substr(h+x.length)}}class ae{constructor(h,x,b,_){if(this.width=h,this.height=x,this.rowSize=b,this.bits=_,x==null&&(x=h),this.height=x,h<1||x<1)throw new p("Both dimensions must be greater than 0");b==null&&(b=Math.floor((h+31)/32)),this.rowSize=b,_==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(h){const x=h.length,b=h[0].length,_=new ae(b,x);for(let j=0;j<x;j++){const A=h[j];for(let I=0;I<b;I++)A[I]&&_.set(I,j)}return _}static parseFromString(h,x,b){if(h===null)throw new p("stringRepresentation cannot be null");const _=new Array(h.length);let j=0,A=0,I=-1,F=0,X=0;for(;X<h.length;)if(h.charAt(X)===`
`||h.charAt(X)==="\r"){if(j>A){if(I===-1)I=j-A;else if(j-A!==I)throw new p("row lengths do not match");A=j,F++}X++}else if(h.substring(X,X+x.length)===x)X+=x.length,_[j]=!0,j++;else if(h.substring(X,X+b.length)===b)X+=b.length,_[j]=!1,j++;else throw new p("illegal character encountered: "+h.substring(X));if(j>A){if(I===-1)I=j-A;else if(j-A!==I)throw new p("row lengths do not match");F++}const ce=new ae(I,F);for(let ge=0;ge<j;ge++)_[ge]&&ce.set(Math.floor(ge%I),Math.floor(ge/I));return ce}get(h,x){const b=x*this.rowSize+Math.floor(h/32);return(this.bits[b]>>>(h&31)&1)!==0}set(h,x){const b=x*this.rowSize+Math.floor(h/32);this.bits[b]|=1<<(h&31)&4294967295}unset(h,x){const b=x*this.rowSize+Math.floor(h/32);this.bits[b]&=~(1<<(h&31)&4294967295)}flip(h,x){const b=x*this.rowSize+Math.floor(h/32);this.bits[b]^=1<<(h&31)&4294967295}xor(h){if(this.width!==h.getWidth()||this.height!==h.getHeight()||this.rowSize!==h.getRowSize())throw new p("input matrix dimensions do not match");const x=new D(Math.floor(this.width/32)+1),b=this.rowSize,_=this.bits;for(let j=0,A=this.height;j<A;j++){const I=j*b,F=h.getRow(j,x).getBitArray();for(let X=0;X<b;X++)_[I+X]^=F[X]}}clear(){const h=this.bits,x=h.length;for(let b=0;b<x;b++)h[b]=0}setRegion(h,x,b,_){if(x<0||h<0)throw new p("Left and top must be nonnegative");if(_<1||b<1)throw new p("Height and width must be at least 1");const j=h+b,A=x+_;if(A>this.height||j>this.width)throw new p("The region must fit inside the matrix");const I=this.rowSize,F=this.bits;for(let X=x;X<A;X++){const ce=X*I;for(let ge=h;ge<j;ge++)F[ce+Math.floor(ge/32)]|=1<<(ge&31)&4294967295}}getRow(h,x){x==null||x.getSize()<this.width?x=new D(this.width):x.clear();const b=this.rowSize,_=this.bits,j=h*b;for(let A=0;A<b;A++)x.setBulk(A*32,_[j+A]);return x}setRow(h,x){w.arraycopy(x.getBitArray(),0,this.bits,h*this.rowSize,this.rowSize)}rotate180(){const h=this.getWidth(),x=this.getHeight();let b=new D(h),_=new D(h);for(let j=0,A=Math.floor((x+1)/2);j<A;j++)b=this.getRow(j,b),_=this.getRow(x-1-j,_),b.reverse(),_.reverse(),this.setRow(j,_),this.setRow(x-1-j,b)}getEnclosingRectangle(){const h=this.width,x=this.height,b=this.rowSize,_=this.bits;let j=h,A=x,I=-1,F=-1;for(let X=0;X<x;X++)for(let ce=0;ce<b;ce++){const ge=_[X*b+ce];if(ge!==0){if(X<A&&(A=X),X>F&&(F=X),ce*32<j){let Ae=0;for(;(ge<<31-Ae&4294967295)===0;)Ae++;ce*32+Ae<j&&(j=ce*32+Ae)}if(ce*32+31>I){let Ae=31;for(;!(ge>>>Ae);)Ae--;ce*32+Ae>I&&(I=ce*32+Ae)}}}return I<j||F<A?null:Int32Array.from([j,A,I-j+1,F-A+1])}getTopLeftOnBit(){const h=this.rowSize,x=this.bits;let b=0;for(;b<x.length&&x[b]===0;)b++;if(b===x.length)return null;const _=b/h;let j=b%h*32;const A=x[b];let I=0;for(;(A<<31-I&4294967295)===0;)I++;return j+=I,Int32Array.from([j,_])}getBottomRightOnBit(){const h=this.rowSize,x=this.bits;let b=x.length-1;for(;b>=0&&x[b]===0;)b--;if(b<0)return null;const _=Math.floor(b/h);let j=Math.floor(b%h)*32;const A=x[b];let I=31;for(;!(A>>>I);)I--;return j+=I,Int32Array.from([j,_])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(h){if(!(h instanceof ae))return!1;const x=h;return this.width===x.width&&this.height===x.height&&this.rowSize===x.rowSize&&O.equals(this.bits,x.bits)}hashCode(){let h=this.width;return h=31*h+this.width,h=31*h+this.height,h=31*h+this.rowSize,h=31*h+O.hashCode(this.bits),h}toString(h="X ",x="  ",b=`
`){return this.buildToString(h,x,b)}buildToString(h,x,b){let _=new J;for(let j=0,A=this.height;j<A;j++){for(let I=0,F=this.width;I<F;I++)_.append(this.get(I,j)?h:x);_.append(b)}return _.toString()}clone(){return new ae(this.width,this.height,this.rowSize,this.bits.slice())}}class se extends d{static getNotFoundInstance(){return new se}}se.kind="NotFoundException";class ue extends N{constructor(h){super(h),this.luminances=ue.EMPTY,this.buckets=new Int32Array(ue.LUMINANCE_BUCKETS)}getBlackRow(h,x){const b=this.getLuminanceSource(),_=b.getWidth();x==null||x.getSize()<_?x=new D(_):x.clear(),this.initArrays(_);const j=b.getRow(h,this.luminances),A=this.buckets;for(let F=0;F<_;F++)A[(j[F]&255)>>ue.LUMINANCE_SHIFT]++;const I=ue.estimateBlackPoint(A);if(_<3)for(let F=0;F<_;F++)(j[F]&255)<I&&x.set(F);else{let F=j[0]&255,X=j[1]&255;for(let ce=1;ce<_-1;ce++){const ge=j[ce+1]&255;(X*4-F-ge)/2<I&&x.set(ce),F=X,X=ge}}return x}getBlackMatrix(){const h=this.getLuminanceSource(),x=h.getWidth(),b=h.getHeight(),_=new ae(x,b);this.initArrays(x);const j=this.buckets;for(let F=1;F<5;F++){const X=Math.floor(b*F/5),ce=h.getRow(X,this.luminances),ge=Math.floor(x*4/5);for(let Ae=Math.floor(x/5);Ae<ge;Ae++){const qe=ce[Ae]&255;j[qe>>ue.LUMINANCE_SHIFT]++}}const A=ue.estimateBlackPoint(j),I=h.getMatrix();for(let F=0;F<b;F++){const X=F*x;for(let ce=0;ce<x;ce++)(I[X+ce]&255)<A&&_.set(ce,F)}return _}createBinarizer(h){return new ue(h)}initArrays(h){this.luminances.length<h&&(this.luminances=new Uint8ClampedArray(h));const x=this.buckets;for(let b=0;b<ue.LUMINANCE_BUCKETS;b++)x[b]=0}static estimateBlackPoint(h){const x=h.length;let b=0,_=0,j=0;for(let ce=0;ce<x;ce++)h[ce]>j&&(_=ce,j=h[ce]),h[ce]>b&&(b=h[ce]);let A=0,I=0;for(let ce=0;ce<x;ce++){const ge=ce-_,Ae=h[ce]*ge*ge;Ae>I&&(A=ce,I=Ae)}if(_>A){const ce=_;_=A,A=ce}if(A-_<=x/16)throw new se;let F=A-1,X=-1;for(let ce=A-1;ce>_;ce--){const ge=ce-_,Ae=ge*ge*(A-ce)*(b-h[ce]);Ae>X&&(F=ce,X=Ae)}return F<<ue.LUMINANCE_SHIFT}}ue.LUMINANCE_BITS=5,ue.LUMINANCE_SHIFT=8-ue.LUMINANCE_BITS,ue.LUMINANCE_BUCKETS=1<<ue.LUMINANCE_BITS,ue.EMPTY=Uint8ClampedArray.from([0]);class fe extends ue{constructor(h){super(h),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const h=this.getLuminanceSource(),x=h.getWidth(),b=h.getHeight();if(x>=fe.MINIMUM_DIMENSION&&b>=fe.MINIMUM_DIMENSION){const _=h.getMatrix();let j=x>>fe.BLOCK_SIZE_POWER;(x&fe.BLOCK_SIZE_MASK)!==0&&j++;let A=b>>fe.BLOCK_SIZE_POWER;(b&fe.BLOCK_SIZE_MASK)!==0&&A++;const I=fe.calculateBlackPoints(_,j,A,x,b),F=new ae(x,b);fe.calculateThresholdForBlock(_,j,A,x,b,I,F),this.matrix=F}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(h){return new fe(h)}static calculateThresholdForBlock(h,x,b,_,j,A,I){const F=j-fe.BLOCK_SIZE,X=_-fe.BLOCK_SIZE;for(let ce=0;ce<b;ce++){let ge=ce<<fe.BLOCK_SIZE_POWER;ge>F&&(ge=F);const Ae=fe.cap(ce,2,b-3);for(let qe=0;qe<x;qe++){let Ye=qe<<fe.BLOCK_SIZE_POWER;Ye>X&&(Ye=X);const rt=fe.cap(qe,2,x-3);let pt=0;for(let zt=-2;zt<=2;zt++){const qt=A[Ae+zt];pt+=qt[rt-2]+qt[rt-1]+qt[rt]+qt[rt+1]+qt[rt+2]}const St=pt/25;fe.thresholdBlock(h,Ye,ge,St,_,I)}}}static cap(h,x,b){return h<x?x:h>b?b:h}static thresholdBlock(h,x,b,_,j,A){for(let I=0,F=b*j+x;I<fe.BLOCK_SIZE;I++,F+=j)for(let X=0;X<fe.BLOCK_SIZE;X++)(h[F+X]&255)<=_&&A.set(x+X,b+I)}static calculateBlackPoints(h,x,b,_,j){const A=j-fe.BLOCK_SIZE,I=_-fe.BLOCK_SIZE,F=new Array(b);for(let X=0;X<b;X++){F[X]=new Int32Array(x);let ce=X<<fe.BLOCK_SIZE_POWER;ce>A&&(ce=A);for(let ge=0;ge<x;ge++){let Ae=ge<<fe.BLOCK_SIZE_POWER;Ae>I&&(Ae=I);let qe=0,Ye=255,rt=0;for(let St=0,zt=ce*_+Ae;St<fe.BLOCK_SIZE;St++,zt+=_){for(let qt=0;qt<fe.BLOCK_SIZE;qt++){const Ft=h[zt+qt]&255;qe+=Ft,Ft<Ye&&(Ye=Ft),Ft>rt&&(rt=Ft)}if(rt-Ye>fe.MIN_DYNAMIC_RANGE)for(St++,zt+=_;St<fe.BLOCK_SIZE;St++,zt+=_)for(let qt=0;qt<fe.BLOCK_SIZE;qt++)qe+=h[zt+qt]&255}let pt=qe>>fe.BLOCK_SIZE_POWER*2;if(rt-Ye<=fe.MIN_DYNAMIC_RANGE&&(pt=Ye/2,X>0&&ge>0)){const St=(F[X-1][ge]+2*F[X][ge-1]+F[X-1][ge-1])/4;Ye<St&&(pt=St)}F[X][ge]=pt}}return F}}fe.BLOCK_SIZE_POWER=3,fe.BLOCK_SIZE=1<<fe.BLOCK_SIZE_POWER,fe.BLOCK_SIZE_MASK=fe.BLOCK_SIZE-1,fe.MINIMUM_DIMENSION=fe.BLOCK_SIZE*5,fe.MIN_DYNAMIC_RANGE=24;class ke{constructor(h,x){this.width=h,this.height=x}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(h,x,b,_){throw new Z("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new Z("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new Z("This luminance source does not support rotation by 45 degrees.")}toString(){const h=new Uint8ClampedArray(this.width);let x=new J;for(let b=0;b<this.height;b++){const _=this.getRow(b,h);for(let j=0;j<this.width;j++){const A=_[j]&255;let I;A<64?I="#":A<128?I="+":A<192?I=".":I=" ",x.append(I)}x.append(`
`)}return x.toString()}}class _e extends ke{constructor(h){super(h.getWidth(),h.getHeight()),this.delegate=h}getRow(h,x){const b=this.delegate.getRow(h,x),_=this.getWidth();for(let j=0;j<_;j++)b[j]=255-(b[j]&255);return b}getMatrix(){const h=this.delegate.getMatrix(),x=this.getWidth()*this.getHeight(),b=new Uint8ClampedArray(x);for(let _=0;_<x;_++)b[_]=255-(h[_]&255);return b}isCropSupported(){return this.delegate.isCropSupported()}crop(h,x,b,_){return new _e(this.delegate.crop(h,x,b,_))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new _e(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new _e(this.delegate.rotateCounterClockwise45())}}class Le extends ke{constructor(h){super(h.width,h.height),this.canvas=h,this.tempCanvasElement=null,this.buffer=Le.makeBufferFromCanvasImageData(h)}static makeBufferFromCanvasImageData(h){const x=h.getContext("2d").getImageData(0,0,h.width,h.height);return Le.toGrayscaleBuffer(x.data,h.width,h.height)}static toGrayscaleBuffer(h,x,b){const _=new Uint8ClampedArray(x*b);for(let j=0,A=0,I=h.length;j<I;j+=4,A++){let F;if(h[j+3]===0)F=255;else{const ce=h[j],ge=h[j+1],Ae=h[j+2];F=306*ce+601*ge+117*Ae+512>>10}_[A]=F}return _}getRow(h,x){if(h<0||h>=this.getHeight())throw new p("Requested row is outside the image: "+h);const b=this.getWidth(),_=h*b;return x===null?x=this.buffer.slice(_,_+b):(x.length<b&&(x=new Uint8ClampedArray(b)),x.set(this.buffer.slice(_,_+b))),x}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(h,x,b,_){return super.crop(h,x,b,_),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const h=this.canvas.ownerDocument.createElement("canvas");h.width=this.canvas.width,h.height=this.canvas.height,this.tempCanvasElement=h}return this.tempCanvasElement}rotate(h){const x=this.getTempCanvasElement(),b=x.getContext("2d"),_=h*Le.DEGREE_TO_RADIANS,j=this.canvas.width,A=this.canvas.height,I=Math.ceil(Math.abs(Math.cos(_))*j+Math.abs(Math.sin(_))*A),F=Math.ceil(Math.abs(Math.sin(_))*j+Math.abs(Math.cos(_))*A);return x.width=I,x.height=F,b.translate(I/2,F/2),b.rotate(_),b.drawImage(this.canvas,j/-2,A/-2),this.buffer=Le.makeBufferFromCanvasImageData(x),this}invert(){return new _e(this)}}Le.DEGREE_TO_RADIANS=Math.PI/180;class xe{constructor(h,x,b){this.deviceId=h,this.label=x,this.kind="videoinput",this.groupId=b||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var B=(globalThis||r2||self||window||void 0)&&(globalThis||r2||self||window||void 0).__awaiter||function(pe,h,x,b){function _(j){return j instanceof x?j:new x(function(A){A(j)})}return new(x||(x=Promise))(function(j,A){function I(ce){try{X(b.next(ce))}catch(ge){A(ge)}}function F(ce){try{X(b.throw(ce))}catch(ge){A(ge)}}function X(ce){ce.done?j(ce.value):_(ce.value).then(I,F)}X((b=b.apply(pe,h||[])).next())})};class ee{constructor(h,x=500,b){this.reader=h,this.timeBetweenScansMillis=x,this._hints=b,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(h){this._timeBetweenDecodingAttempts=h<0?0:h}set hints(h){this._hints=h||null}get hints(){return this._hints}listVideoInputDevices(){return B(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const h=yield navigator.mediaDevices.enumerateDevices(),x=[];for(const b of h){const _=b.kind==="video"?"videoinput":b.kind;if(_!=="videoinput")continue;const j=b.deviceId||b.id,A=b.label||`Video device ${x.length+1}`,I=b.groupId,F={deviceId:j,label:A,kind:_,groupId:I};x.push(F)}return x})}getVideoInputDevices(){return B(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(x=>new xe(x.deviceId,x.label))})}findDeviceById(h){return B(this,void 0,void 0,function*(){const x=yield this.listVideoInputDevices();return x?x.find(b=>b.deviceId===h):null})}decodeFromInputVideoDevice(h,x){return B(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(h,x)})}decodeOnceFromVideoDevice(h,x){return B(this,void 0,void 0,function*(){this.reset();let b;h?b={deviceId:{exact:h}}:b={facingMode:"environment"};const _={video:b};return yield this.decodeOnceFromConstraints(_,x)})}decodeOnceFromConstraints(h,x){return B(this,void 0,void 0,function*(){const b=yield navigator.mediaDevices.getUserMedia(h);return yield this.decodeOnceFromStream(b,x)})}decodeOnceFromStream(h,x){return B(this,void 0,void 0,function*(){this.reset();const b=yield this.attachStreamToVideo(h,x);return yield this.decodeOnce(b)})}decodeFromInputVideoDeviceContinuously(h,x,b){return B(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(h,x,b)})}decodeFromVideoDevice(h,x,b){return B(this,void 0,void 0,function*(){let _;h?_={deviceId:{exact:h}}:_={facingMode:"environment"};const j={video:_};return yield this.decodeFromConstraints(j,x,b)})}decodeFromConstraints(h,x,b){return B(this,void 0,void 0,function*(){const _=yield navigator.mediaDevices.getUserMedia(h);return yield this.decodeFromStream(_,x,b)})}decodeFromStream(h,x,b){return B(this,void 0,void 0,function*(){this.reset();const _=yield this.attachStreamToVideo(h,x);return yield this.decodeContinuously(_,b)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(h,x){return B(this,void 0,void 0,function*(){const b=this.prepareVideoElement(x);return this.addVideoSource(b,h),this.videoElement=b,this.stream=h,yield this.playVideoOnLoadAsync(b),b})}playVideoOnLoadAsync(h){return new Promise((x,b)=>this.playVideoOnLoad(h,()=>x()))}playVideoOnLoad(h,x){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(h),h.addEventListener("ended",this.videoEndedListener),h.addEventListener("canplay",this.videoCanPlayListener),h.addEventListener("playing",x),this.tryPlayVideo(h)}isVideoPlaying(h){return h.currentTime>0&&!h.paused&&!h.ended&&h.readyState>2}tryPlayVideo(h){return B(this,void 0,void 0,function*(){if(this.isVideoPlaying(h)){console.warn("Trying to play video that is already playing.");return}try{yield h.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(h,x){const b=document.getElementById(h);if(!b)throw new f(`element with id '${h}' not found`);if(b.nodeName.toLowerCase()!==x.toLowerCase())throw new f(`element with id '${h}' must be an ${x} element`);return b}decodeFromImage(h,x){if(!h&&!x)throw new f("either imageElement with a src set or an url must be provided");return x&&!h?this.decodeFromImageUrl(x):this.decodeFromImageElement(h)}decodeFromVideo(h,x){if(!h&&!x)throw new f("Either an element with a src set or an URL must be provided");return x&&!h?this.decodeFromVideoUrl(x):this.decodeFromVideoElement(h)}decodeFromVideoContinuously(h,x,b){if(h===void 0&&x===void 0)throw new f("Either an element with a src set or an URL must be provided");return x&&!h?this.decodeFromVideoUrlContinuously(x,b):this.decodeFromVideoElementContinuously(h,b)}decodeFromImageElement(h){if(!h)throw new f("An image element must be provided.");this.reset();const x=this.prepareImageElement(h);this.imageElement=x;let b;return this.isImageLoaded(x)?b=this.decodeOnce(x,!1,!0):b=this._decodeOnLoadImage(x),b}decodeFromVideoElement(h){const x=this._decodeFromVideoElementSetup(h);return this._decodeOnLoadVideo(x)}decodeFromVideoElementContinuously(h,x){const b=this._decodeFromVideoElementSetup(h);return this._decodeOnLoadVideoContinuously(b,x)}_decodeFromVideoElementSetup(h){if(!h)throw new f("A video element must be provided.");this.reset();const x=this.prepareVideoElement(h);return this.videoElement=x,x}decodeFromImageUrl(h){if(!h)throw new f("An URL must be provided.");this.reset();const x=this.prepareImageElement();this.imageElement=x;const b=this._decodeOnLoadImage(x);return x.src=h,b}decodeFromVideoUrl(h){if(!h)throw new f("An URL must be provided.");this.reset();const x=this.prepareVideoElement(),b=this.decodeFromVideoElement(x);return x.src=h,b}decodeFromVideoUrlContinuously(h,x){if(!h)throw new f("An URL must be provided.");this.reset();const b=this.prepareVideoElement(),_=this.decodeFromVideoElementContinuously(b,x);return b.src=h,_}_decodeOnLoadImage(h){return new Promise((x,b)=>{this.imageLoadedListener=()=>this.decodeOnce(h,!1,!0).then(x,b),h.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(h){return B(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(h),yield this.decodeOnce(h)})}_decodeOnLoadVideoContinuously(h,x){return B(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(h),this.decodeContinuously(h,x)})}isImageLoaded(h){return!(!h.complete||h.naturalWidth===0)}prepareImageElement(h){let x;return typeof h>"u"&&(x=document.createElement("img"),x.width=200,x.height=200),typeof h=="string"&&(x=this.getMediaElement(h,"img")),h instanceof HTMLImageElement&&(x=h),x}prepareVideoElement(h){let x;return!h&&typeof document<"u"&&(x=document.createElement("video"),x.width=200,x.height=200),typeof h=="string"&&(x=this.getMediaElement(h,"video")),h instanceof HTMLVideoElement&&(x=h),x.setAttribute("autoplay","true"),x.setAttribute("muted","true"),x.setAttribute("playsinline","true"),x}decodeOnce(h,x=!0,b=!0){this._stopAsyncDecode=!1;const _=(j,A)=>{if(this._stopAsyncDecode){A(new se("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const I=this.decode(h);j(I)}catch(I){const F=x&&I instanceof se,ce=(I instanceof g||I instanceof R)&&b;if(F||ce)return setTimeout(_,this._timeBetweenDecodingAttempts,j,A);A(I)}};return new Promise((j,A)=>_(j,A))}decodeContinuously(h,x){this._stopContinuousDecode=!1;const b=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const _=this.decode(h);x(_,null),setTimeout(b,this.timeBetweenScansMillis)}catch(_){x(null,_);const j=_ instanceof g||_ instanceof R,A=_ instanceof se;(j||A)&&setTimeout(b,this._timeBetweenDecodingAttempts)}};b()}decode(h){const x=this.createBinaryBitmap(h);return this.decodeBitmap(x)}_isHTMLVideoElement(h){return h.videoWidth!==0}drawFrameOnCanvas(h,x,b){x||(x={sx:0,sy:0,sWidth:h.videoWidth,sHeight:h.videoHeight,dx:0,dy:0,dWidth:h.videoWidth,dHeight:h.videoHeight}),b||(b=this.captureCanvasContext),b.drawImage(h,x.sx,x.sy,x.sWidth,x.sHeight,x.dx,x.dy,x.dWidth,x.dHeight)}drawImageOnCanvas(h,x,b=this.captureCanvasContext){x||(x={sx:0,sy:0,sWidth:h.naturalWidth,sHeight:h.naturalHeight,dx:0,dy:0,dWidth:h.naturalWidth,dHeight:h.naturalHeight}),b||(b=this.captureCanvasContext),b.drawImage(h,x.sx,x.sy,x.sWidth,x.sHeight,x.dx,x.dy,x.dWidth,x.dHeight)}createBinaryBitmap(h){this.getCaptureCanvasContext(h),this._isHTMLVideoElement(h)?this.drawFrameOnCanvas(h):this.drawImageOnCanvas(h);const x=this.getCaptureCanvas(h),b=new Le(x),_=new fe(b);return new y(_)}getCaptureCanvasContext(h){if(!this.captureCanvasContext){const b=this.getCaptureCanvas(h).getContext("2d");this.captureCanvasContext=b}return this.captureCanvasContext}getCaptureCanvas(h){if(!this.captureCanvas){const x=this.createCaptureCanvas(h);this.captureCanvas=x}return this.captureCanvas}decodeBitmap(h){return this.reader.decode(h,this._hints)}createCaptureCanvas(h){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const x=document.createElement("canvas");let b,_;return typeof h<"u"&&(h instanceof HTMLVideoElement?(b=h.videoWidth,_=h.videoHeight):h instanceof HTMLImageElement&&(b=h.naturalWidth||h.width,_=h.naturalHeight||h.height)),x.style.width=b+"px",x.style.height=_+"px",x.width=b,x.height=_,x}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(h=>h.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(h,x){try{h.srcObject=x}catch{h.src=URL.createObjectURL(x)}}cleanVideoSource(h){try{h.srcObject=null}catch{h.src=""}this.videoElement.removeAttribute("src")}}class Y{constructor(h,x,b=x==null?0:8*x.length,_,j,A=w.currentTimeMillis()){this.text=h,this.rawBytes=x,this.numBits=b,this.resultPoints=_,this.format=j,this.timestamp=A,this.text=h,this.rawBytes=x,b==null?this.numBits=x==null?0:8*x.length:this.numBits=b,this.resultPoints=_,this.format=j,this.resultMetadata=null,A==null?this.timestamp=w.currentTimeMillis():this.timestamp=A}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(h,x){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(h,x)}putAllMetadata(h){h!==null&&(this.resultMetadata===null?this.resultMetadata=h:this.resultMetadata=new Map(h))}addResultPoints(h){const x=this.resultPoints;if(x===null)this.resultPoints=h;else if(h!==null&&h.length>0){const b=new Array(x.length+h.length);w.arraycopy(x,0,b,0,x.length),w.arraycopy(h,0,b,x.length,h.length),this.resultPoints=b}}getTimestamp(){return this.timestamp}toString(){return this.text}}var re;(function(pe){pe[pe.AZTEC=0]="AZTEC",pe[pe.CODABAR=1]="CODABAR",pe[pe.CODE_39=2]="CODE_39",pe[pe.CODE_93=3]="CODE_93",pe[pe.CODE_128=4]="CODE_128",pe[pe.DATA_MATRIX=5]="DATA_MATRIX",pe[pe.EAN_8=6]="EAN_8",pe[pe.EAN_13=7]="EAN_13",pe[pe.ITF=8]="ITF",pe[pe.MAXICODE=9]="MAXICODE",pe[pe.PDF_417=10]="PDF_417",pe[pe.QR_CODE=11]="QR_CODE",pe[pe.RSS_14=12]="RSS_14",pe[pe.RSS_EXPANDED=13]="RSS_EXPANDED",pe[pe.UPC_A=14]="UPC_A",pe[pe.UPC_E=15]="UPC_E",pe[pe.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(re||(re={}));var Q=re,Ce;(function(pe){pe[pe.OTHER=0]="OTHER",pe[pe.ORIENTATION=1]="ORIENTATION",pe[pe.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",pe[pe.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",pe[pe.ISSUE_NUMBER=4]="ISSUE_NUMBER",pe[pe.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",pe[pe.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",pe[pe.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",pe[pe.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",pe[pe.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",pe[pe.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(Ce||(Ce={}));var me=Ce;class ie{constructor(h,x,b,_,j=-1,A=-1){this.rawBytes=h,this.text=x,this.byteSegments=b,this.ecLevel=_,this.structuredAppendSequenceNumber=j,this.structuredAppendParity=A,this.numBits=h==null?0:8*h.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(h){this.numBits=h}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(h){this.errorsCorrected=h}getErasures(){return this.erasures}setErasures(h){this.erasures=h}getOther(){return this.other}setOther(h){this.other=h}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class je{exp(h){return this.expTable[h]}log(h){if(h===0)throw new p;return this.logTable[h]}static addOrSubtract(h,x){return h^x}}class be{constructor(h,x){if(x.length===0)throw new p;this.field=h;const b=x.length;if(b>1&&x[0]===0){let _=1;for(;_<b&&x[_]===0;)_++;_===b?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(b-_),w.arraycopy(x,_,this.coefficients,0,this.coefficients.length))}else this.coefficients=x}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(h){return this.coefficients[this.coefficients.length-1-h]}evaluateAt(h){if(h===0)return this.getCoefficient(0);const x=this.coefficients;let b;if(h===1){b=0;for(let A=0,I=x.length;A!==I;A++){const F=x[A];b=je.addOrSubtract(b,F)}return b}b=x[0];const _=x.length,j=this.field;for(let A=1;A<_;A++)b=je.addOrSubtract(j.multiply(h,b),x[A]);return b}addOrSubtract(h){if(!this.field.equals(h.field))throw new p("GenericGFPolys do not have same GenericGF field");if(this.isZero())return h;if(h.isZero())return this;let x=this.coefficients,b=h.coefficients;if(x.length>b.length){const A=x;x=b,b=A}let _=new Int32Array(b.length);const j=b.length-x.length;w.arraycopy(b,0,_,0,j);for(let A=j;A<b.length;A++)_[A]=je.addOrSubtract(x[A-j],b[A]);return new be(this.field,_)}multiply(h){if(!this.field.equals(h.field))throw new p("GenericGFPolys do not have same GenericGF field");if(this.isZero()||h.isZero())return this.field.getZero();const x=this.coefficients,b=x.length,_=h.coefficients,j=_.length,A=new Int32Array(b+j-1),I=this.field;for(let F=0;F<b;F++){const X=x[F];for(let ce=0;ce<j;ce++)A[F+ce]=je.addOrSubtract(A[F+ce],I.multiply(X,_[ce]))}return new be(I,A)}multiplyScalar(h){if(h===0)return this.field.getZero();if(h===1)return this;const x=this.coefficients.length,b=this.field,_=new Int32Array(x),j=this.coefficients;for(let A=0;A<x;A++)_[A]=b.multiply(j[A],h);return new be(b,_)}multiplyByMonomial(h,x){if(h<0)throw new p;if(x===0)return this.field.getZero();const b=this.coefficients,_=b.length,j=new Int32Array(_+h),A=this.field;for(let I=0;I<_;I++)j[I]=A.multiply(b[I],x);return new be(A,j)}divide(h){if(!this.field.equals(h.field))throw new p("GenericGFPolys do not have same GenericGF field");if(h.isZero())throw new p("Divide by 0");const x=this.field;let b=x.getZero(),_=this;const j=h.getCoefficient(h.getDegree()),A=x.inverse(j);for(;_.getDegree()>=h.getDegree()&&!_.isZero();){const I=_.getDegree()-h.getDegree(),F=x.multiply(_.getCoefficient(_.getDegree()),A),X=h.multiplyByMonomial(I,F),ce=x.buildMonomial(I,F);b=b.addOrSubtract(ce),_=_.addOrSubtract(X)}return[b,_]}toString(){let h="";for(let x=this.getDegree();x>=0;x--){let b=this.getCoefficient(x);if(b!==0){if(b<0?(h+=" - ",b=-b):h.length>0&&(h+=" + "),x===0||b!==1){const _=this.field.log(b);_===0?h+="1":_===1?h+="a":(h+="a^",h+=_)}x!==0&&(x===1?h+="x":(h+="x^",h+=x))}}return h}}class le extends d{}le.kind="ArithmeticException";class Ee extends je{constructor(h,x,b){super(),this.primitive=h,this.size=x,this.generatorBase=b;const _=new Int32Array(x);let j=1;for(let I=0;I<x;I++)_[I]=j,j*=2,j>=x&&(j^=h,j&=x-1);this.expTable=_;const A=new Int32Array(x);for(let I=0;I<x-1;I++)A[_[I]]=I;this.logTable=A,this.zero=new be(this,Int32Array.from([0])),this.one=new be(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(h,x){if(h<0)throw new p;if(x===0)return this.zero;const b=new Int32Array(h+1);return b[0]=x,new be(this,b)}inverse(h){if(h===0)throw new le;return this.expTable[this.size-this.logTable[h]-1]}multiply(h,x){return h===0||x===0?0:this.expTable[(this.logTable[h]+this.logTable[x])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+E.toHexString(this.primitive)+","+this.size+")"}equals(h){return h===this}}Ee.AZTEC_DATA_12=new Ee(4201,4096,1),Ee.AZTEC_DATA_10=new Ee(1033,1024,1),Ee.AZTEC_DATA_6=new Ee(67,64,1),Ee.AZTEC_PARAM=new Ee(19,16,1),Ee.QR_CODE_FIELD_256=new Ee(285,256,0),Ee.DATA_MATRIX_FIELD_256=new Ee(301,256,1),Ee.AZTEC_DATA_8=Ee.DATA_MATRIX_FIELD_256,Ee.MAXICODE_FIELD_64=Ee.AZTEC_DATA_6;class Me extends d{}Me.kind="ReedSolomonException";class ye extends d{}ye.kind="IllegalStateException";class at{constructor(h){this.field=h}decode(h,x){const b=this.field,_=new be(b,h),j=new Int32Array(x);let A=!0;for(let qe=0;qe<x;qe++){const Ye=_.evaluateAt(b.exp(qe+b.getGeneratorBase()));j[j.length-1-qe]=Ye,Ye!==0&&(A=!1)}if(A)return;const I=new be(b,j),F=this.runEuclideanAlgorithm(b.buildMonomial(x,1),I,x),X=F[0],ce=F[1],ge=this.findErrorLocations(X),Ae=this.findErrorMagnitudes(ce,ge);for(let qe=0;qe<ge.length;qe++){const Ye=h.length-1-b.log(ge[qe]);if(Ye<0)throw new Me("Bad error location");h[Ye]=Ee.addOrSubtract(h[Ye],Ae[qe])}}runEuclideanAlgorithm(h,x,b){if(h.getDegree()<x.getDegree()){const qe=h;h=x,x=qe}const _=this.field;let j=h,A=x,I=_.getZero(),F=_.getOne();for(;A.getDegree()>=(b/2|0);){let qe=j,Ye=I;if(j=A,I=F,j.isZero())throw new Me("r_{i-1} was zero");A=qe;let rt=_.getZero();const pt=j.getCoefficient(j.getDegree()),St=_.inverse(pt);for(;A.getDegree()>=j.getDegree()&&!A.isZero();){const zt=A.getDegree()-j.getDegree(),qt=_.multiply(A.getCoefficient(A.getDegree()),St);rt=rt.addOrSubtract(_.buildMonomial(zt,qt)),A=A.addOrSubtract(j.multiplyByMonomial(zt,qt))}if(F=rt.multiply(I).addOrSubtract(Ye),A.getDegree()>=j.getDegree())throw new ye("Division algorithm failed to reduce polynomial?")}const X=F.getCoefficient(0);if(X===0)throw new Me("sigmaTilde(0) was zero");const ce=_.inverse(X),ge=F.multiplyScalar(ce),Ae=A.multiplyScalar(ce);return[ge,Ae]}findErrorLocations(h){const x=h.getDegree();if(x===1)return Int32Array.from([h.getCoefficient(1)]);const b=new Int32Array(x);let _=0;const j=this.field;for(let A=1;A<j.getSize()&&_<x;A++)h.evaluateAt(A)===0&&(b[_]=j.inverse(A),_++);if(_!==x)throw new Me("Error locator degree does not match number of roots");return b}findErrorMagnitudes(h,x){const b=x.length,_=new Int32Array(b),j=this.field;for(let A=0;A<b;A++){const I=j.inverse(x[A]);let F=1;for(let X=0;X<b;X++)if(A!==X){const ce=j.multiply(x[X],I),ge=(ce&1)===0?ce|1:ce&-2;F=j.multiply(F,ge)}_[A]=j.multiply(h.evaluateAt(I),j.inverse(F)),j.getGeneratorBase()!==0&&(_[A]=j.multiply(_[A],I))}return _}}var lt;(function(pe){pe[pe.UPPER=0]="UPPER",pe[pe.LOWER=1]="LOWER",pe[pe.MIXED=2]="MIXED",pe[pe.DIGIT=3]="DIGIT",pe[pe.PUNCT=4]="PUNCT",pe[pe.BINARY=5]="BINARY"})(lt||(lt={}));class ut{decode(h){this.ddata=h;let x=h.getBits(),b=this.extractBits(x),_=this.correctBits(b),j=ut.convertBoolArrayToByteArray(_),A=ut.getEncodedData(_),I=new ie(j,A,null,null);return I.setNumBits(_.length),I}static highLevelDecode(h){return this.getEncodedData(h)}static getEncodedData(h){let x=h.length,b=lt.UPPER,_=lt.UPPER,j="",A=0;for(;A<x;)if(_===lt.BINARY){if(x-A<5)break;let I=ut.readCode(h,A,5);if(A+=5,I===0){if(x-A<11)break;I=ut.readCode(h,A,11)+31,A+=11}for(let F=0;F<I;F++){if(x-A<8){A=x;break}const X=ut.readCode(h,A,8);j+=K.castAsNonUtf8Char(X),A+=8}_=b}else{let I=_===lt.DIGIT?4:5;if(x-A<I)break;let F=ut.readCode(h,A,I);A+=I;let X=ut.getCharacter(_,F);X.startsWith("CTRL_")?(b=_,_=ut.getTable(X.charAt(5)),X.charAt(6)==="L"&&(b=_)):(j+=X,_=b)}return j}static getTable(h){switch(h){case"L":return lt.LOWER;case"P":return lt.PUNCT;case"M":return lt.MIXED;case"D":return lt.DIGIT;case"B":return lt.BINARY;case"U":default:return lt.UPPER}}static getCharacter(h,x){switch(h){case lt.UPPER:return ut.UPPER_TABLE[x];case lt.LOWER:return ut.LOWER_TABLE[x];case lt.MIXED:return ut.MIXED_TABLE[x];case lt.PUNCT:return ut.PUNCT_TABLE[x];case lt.DIGIT:return ut.DIGIT_TABLE[x];default:throw new ye("Bad table")}}correctBits(h){let x,b;this.ddata.getNbLayers()<=2?(b=6,x=Ee.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(b=8,x=Ee.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(b=10,x=Ee.AZTEC_DATA_10):(b=12,x=Ee.AZTEC_DATA_12);let _=this.ddata.getNbDatablocks(),j=h.length/b;if(j<_)throw new R;let A=h.length%b,I=new Int32Array(j);for(let Ae=0;Ae<j;Ae++,A+=b)I[Ae]=ut.readCode(h,A,b);try{new at(x).decode(I,j-_)}catch(Ae){throw new R(Ae)}let F=(1<<b)-1,X=0;for(let Ae=0;Ae<_;Ae++){let qe=I[Ae];if(qe===0||qe===F)throw new R;(qe===1||qe===F-1)&&X++}let ce=new Array(_*b-X),ge=0;for(let Ae=0;Ae<_;Ae++){let qe=I[Ae];if(qe===1||qe===F-1)ce.fill(qe>1,ge,ge+b-1),ge+=b-1;else for(let Ye=b-1;Ye>=0;--Ye)ce[ge++]=(qe&1<<Ye)!==0}return ce}extractBits(h){let x=this.ddata.isCompact(),b=this.ddata.getNbLayers(),_=(x?11:14)+b*4,j=new Int32Array(_),A=new Array(this.totalBitsInLayer(b,x));if(x)for(let I=0;I<j.length;I++)j[I]=I;else{let I=_+1+2*E.truncDivision(E.truncDivision(_,2)-1,15),F=_/2,X=E.truncDivision(I,2);for(let ce=0;ce<F;ce++){let ge=ce+E.truncDivision(ce,15);j[F-ce-1]=X-ge-1,j[F+ce]=X+ge+1}}for(let I=0,F=0;I<b;I++){let X=(b-I)*4+(x?9:12),ce=I*2,ge=_-1-ce;for(let Ae=0;Ae<X;Ae++){let qe=Ae*2;for(let Ye=0;Ye<2;Ye++)A[F+qe+Ye]=h.get(j[ce+Ye],j[ce+Ae]),A[F+2*X+qe+Ye]=h.get(j[ce+Ae],j[ge-Ye]),A[F+4*X+qe+Ye]=h.get(j[ge-Ye],j[ge-Ae]),A[F+6*X+qe+Ye]=h.get(j[ge-Ae],j[ce+Ye])}F+=X*8}return A}static readCode(h,x,b){let _=0;for(let j=x;j<x+b;j++)_<<=1,h[j]&&(_|=1);return _}static readByte(h,x){let b=h.length-x;return b>=8?ut.readCode(h,x,8):ut.readCode(h,x,b)<<8-b}static convertBoolArrayToByteArray(h){let x=new Uint8Array((h.length+7)/8);for(let b=0;b<x.length;b++)x[b]=ut.readByte(h,8*b);return x}totalBitsInLayer(h,x){return((x?88:112)+16*h)*h}}ut.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],ut.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],ut.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],ut.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],ut.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class nt{constructor(){}static round(h){return h===NaN?0:h<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:h>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:h+(h<0?-.5:.5)|0}static distance(h,x,b,_){const j=h-b,A=x-_;return Math.sqrt(j*j+A*A)}static sum(h){let x=0;for(let b=0,_=h.length;b!==_;b++){const j=h[b];x+=j}return x}}class ot{static floatToIntBits(h){return h}}ot.MAX_VALUE=Number.MAX_SAFE_INTEGER;class We{constructor(h,x){this.x=h,this.y=x}getX(){return this.x}getY(){return this.y}equals(h){if(h instanceof We){const x=h;return this.x===x.x&&this.y===x.y}return!1}hashCode(){return 31*ot.floatToIntBits(this.x)+ot.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(h){const x=this.distance(h[0],h[1]),b=this.distance(h[1],h[2]),_=this.distance(h[0],h[2]);let j,A,I;if(b>=x&&b>=_?(A=h[0],j=h[1],I=h[2]):_>=b&&_>=x?(A=h[1],j=h[0],I=h[2]):(A=h[2],j=h[0],I=h[1]),this.crossProductZ(j,A,I)<0){const F=j;j=I,I=F}h[0]=j,h[1]=A,h[2]=I}static distance(h,x){return nt.distance(h.x,h.y,x.x,x.y)}static crossProductZ(h,x,b){const _=x.x,j=x.y;return(b.x-_)*(h.y-j)-(b.y-j)*(h.x-_)}}class Kt{constructor(h,x){this.bits=h,this.points=x}getBits(){return this.bits}getPoints(){return this.points}}class Dt extends Kt{constructor(h,x,b,_,j){super(h,x),this.compact=b,this.nbDatablocks=_,this.nbLayers=j}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class fr{constructor(h,x,b,_){this.image=h,this.height=h.getHeight(),this.width=h.getWidth(),x==null&&(x=fr.INIT_SIZE),b==null&&(b=h.getWidth()/2|0),_==null&&(_=h.getHeight()/2|0);const j=x/2|0;if(this.leftInit=b-j,this.rightInit=b+j,this.upInit=_-j,this.downInit=_+j,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new se}detect(){let h=this.leftInit,x=this.rightInit,b=this.upInit,_=this.downInit,j=!1,A=!0,I=!1,F=!1,X=!1,ce=!1,ge=!1;const Ae=this.width,qe=this.height;for(;A;){A=!1;let Ye=!0;for(;(Ye||!F)&&x<Ae;)Ye=this.containsBlackPoint(b,_,x,!1),Ye?(x++,A=!0,F=!0):F||x++;if(x>=Ae){j=!0;break}let rt=!0;for(;(rt||!X)&&_<qe;)rt=this.containsBlackPoint(h,x,_,!0),rt?(_++,A=!0,X=!0):X||_++;if(_>=qe){j=!0;break}let pt=!0;for(;(pt||!ce)&&h>=0;)pt=this.containsBlackPoint(b,_,h,!1),pt?(h--,A=!0,ce=!0):ce||h--;if(h<0){j=!0;break}let St=!0;for(;(St||!ge)&&b>=0;)St=this.containsBlackPoint(h,x,b,!0),St?(b--,A=!0,ge=!0):ge||b--;if(b<0){j=!0;break}A&&(I=!0)}if(!j&&I){const Ye=x-h;let rt=null;for(let qt=1;rt===null&&qt<Ye;qt++)rt=this.getBlackPointOnSegment(h,_-qt,h+qt,_);if(rt==null)throw new se;let pt=null;for(let qt=1;pt===null&&qt<Ye;qt++)pt=this.getBlackPointOnSegment(h,b+qt,h+qt,b);if(pt==null)throw new se;let St=null;for(let qt=1;St===null&&qt<Ye;qt++)St=this.getBlackPointOnSegment(x,b+qt,x-qt,b);if(St==null)throw new se;let zt=null;for(let qt=1;zt===null&&qt<Ye;qt++)zt=this.getBlackPointOnSegment(x,_-qt,x-qt,_);if(zt==null)throw new se;return this.centerEdges(zt,rt,St,pt)}else throw new se}getBlackPointOnSegment(h,x,b,_){const j=nt.round(nt.distance(h,x,b,_)),A=(b-h)/j,I=(_-x)/j,F=this.image;for(let X=0;X<j;X++){const ce=nt.round(h+X*A),ge=nt.round(x+X*I);if(F.get(ce,ge))return new We(ce,ge)}return null}centerEdges(h,x,b,_){const j=h.getX(),A=h.getY(),I=x.getX(),F=x.getY(),X=b.getX(),ce=b.getY(),ge=_.getX(),Ae=_.getY(),qe=fr.CORR;return j<this.width/2?[new We(ge-qe,Ae+qe),new We(I+qe,F+qe),new We(X-qe,ce-qe),new We(j+qe,A-qe)]:[new We(ge+qe,Ae+qe),new We(I+qe,F-qe),new We(X-qe,ce+qe),new We(j-qe,A-qe)]}containsBlackPoint(h,x,b,_){const j=this.image;if(_){for(let A=h;A<=x;A++)if(j.get(A,b))return!0}else for(let A=h;A<=x;A++)if(j.get(b,A))return!0;return!1}}fr.INIT_SIZE=10,fr.CORR=1;class xr{static checkAndNudgePoints(h,x){const b=h.getWidth(),_=h.getHeight();let j=!0;for(let A=0;A<x.length&&j;A+=2){const I=Math.floor(x[A]),F=Math.floor(x[A+1]);if(I<-1||I>b||F<-1||F>_)throw new se;j=!1,I===-1?(x[A]=0,j=!0):I===b&&(x[A]=b-1,j=!0),F===-1?(x[A+1]=0,j=!0):F===_&&(x[A+1]=_-1,j=!0)}j=!0;for(let A=x.length-2;A>=0&&j;A-=2){const I=Math.floor(x[A]),F=Math.floor(x[A+1]);if(I<-1||I>b||F<-1||F>_)throw new se;j=!1,I===-1?(x[A]=0,j=!0):I===b&&(x[A]=b-1,j=!0),F===-1?(x[A+1]=0,j=!0):F===_&&(x[A+1]=_-1,j=!0)}}}class nr{constructor(h,x,b,_,j,A,I,F,X){this.a11=h,this.a21=x,this.a31=b,this.a12=_,this.a22=j,this.a32=A,this.a13=I,this.a23=F,this.a33=X}static quadrilateralToQuadrilateral(h,x,b,_,j,A,I,F,X,ce,ge,Ae,qe,Ye,rt,pt){const St=nr.quadrilateralToSquare(h,x,b,_,j,A,I,F);return nr.squareToQuadrilateral(X,ce,ge,Ae,qe,Ye,rt,pt).times(St)}transformPoints(h){const x=h.length,b=this.a11,_=this.a12,j=this.a13,A=this.a21,I=this.a22,F=this.a23,X=this.a31,ce=this.a32,ge=this.a33;for(let Ae=0;Ae<x;Ae+=2){const qe=h[Ae],Ye=h[Ae+1],rt=j*qe+F*Ye+ge;h[Ae]=(b*qe+A*Ye+X)/rt,h[Ae+1]=(_*qe+I*Ye+ce)/rt}}transformPointsWithValues(h,x){const b=this.a11,_=this.a12,j=this.a13,A=this.a21,I=this.a22,F=this.a23,X=this.a31,ce=this.a32,ge=this.a33,Ae=h.length;for(let qe=0;qe<Ae;qe++){const Ye=h[qe],rt=x[qe],pt=j*Ye+F*rt+ge;h[qe]=(b*Ye+A*rt+X)/pt,x[qe]=(_*Ye+I*rt+ce)/pt}}static squareToQuadrilateral(h,x,b,_,j,A,I,F){const X=h-b+j-I,ce=x-_+A-F;if(X===0&&ce===0)return new nr(b-h,j-b,h,_-x,A-_,x,0,0,1);{const ge=b-j,Ae=I-j,qe=_-A,Ye=F-A,rt=ge*Ye-Ae*qe,pt=(X*Ye-Ae*ce)/rt,St=(ge*ce-X*qe)/rt;return new nr(b-h+pt*b,I-h+St*I,h,_-x+pt*_,F-x+St*F,x,pt,St,1)}}static quadrilateralToSquare(h,x,b,_,j,A,I,F){return nr.squareToQuadrilateral(h,x,b,_,j,A,I,F).buildAdjoint()}buildAdjoint(){return new nr(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(h){return new nr(this.a11*h.a11+this.a21*h.a12+this.a31*h.a13,this.a11*h.a21+this.a21*h.a22+this.a31*h.a23,this.a11*h.a31+this.a21*h.a32+this.a31*h.a33,this.a12*h.a11+this.a22*h.a12+this.a32*h.a13,this.a12*h.a21+this.a22*h.a22+this.a32*h.a23,this.a12*h.a31+this.a22*h.a32+this.a32*h.a33,this.a13*h.a11+this.a23*h.a12+this.a33*h.a13,this.a13*h.a21+this.a23*h.a22+this.a33*h.a23,this.a13*h.a31+this.a23*h.a32+this.a33*h.a33)}}class Mr extends xr{sampleGrid(h,x,b,_,j,A,I,F,X,ce,ge,Ae,qe,Ye,rt,pt,St,zt,qt){const Ft=nr.quadrilateralToQuadrilateral(_,j,A,I,F,X,ce,ge,Ae,qe,Ye,rt,pt,St,zt,qt);return this.sampleGridWithTransform(h,x,b,Ft)}sampleGridWithTransform(h,x,b,_){if(x<=0||b<=0)throw new se;const j=new ae(x,b),A=new Float32Array(2*x);for(let I=0;I<b;I++){const F=A.length,X=I+.5;for(let ce=0;ce<F;ce+=2)A[ce]=ce/2+.5,A[ce+1]=X;_.transformPoints(A),xr.checkAndNudgePoints(h,A);try{for(let ce=0;ce<F;ce+=2)h.get(Math.floor(A[ce]),Math.floor(A[ce+1]))&&j.set(ce/2,I)}catch{throw new se}}return j}}class rr{static setGridSampler(h){rr.gridSampler=h}static getInstance(){return rr.gridSampler}}rr.gridSampler=new Mr;class Gt{constructor(h,x){this.x=h,this.y=x}toResultPoint(){return new We(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class Vt{constructor(h){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=h}detect(){return this.detectMirror(!1)}detectMirror(h){let x=this.getMatrixCenter(),b=this.getBullsEyeCorners(x);if(h){let A=b[0];b[0]=b[2],b[2]=A}this.extractParameters(b);let _=this.sampleGrid(this.image,b[this.shift%4],b[(this.shift+1)%4],b[(this.shift+2)%4],b[(this.shift+3)%4]),j=this.getMatrixCornerPoints(b);return new Dt(_,j,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(h){if(!this.isValidPoint(h[0])||!this.isValidPoint(h[1])||!this.isValidPoint(h[2])||!this.isValidPoint(h[3]))throw new se;let x=2*this.nbCenterLayers,b=new Int32Array([this.sampleLine(h[0],h[1],x),this.sampleLine(h[1],h[2],x),this.sampleLine(h[2],h[3],x),this.sampleLine(h[3],h[0],x)]);this.shift=this.getRotation(b,x);let _=0;for(let A=0;A<4;A++){let I=b[(this.shift+A)%4];this.compact?(_<<=7,_+=I>>1&127):(_<<=10,_+=(I>>2&992)+(I>>1&31))}let j=this.getCorrectedParameterData(_,this.compact);this.compact?(this.nbLayers=(j>>6)+1,this.nbDataBlocks=(j&63)+1):(this.nbLayers=(j>>11)+1,this.nbDataBlocks=(j&2047)+1)}getRotation(h,x){let b=0;h.forEach((_,j,A)=>{let I=(_>>x-2<<1)+(_&1);b=(b<<3)+I}),b=((b&1)<<11)+(b>>1);for(let _=0;_<4;_++)if(E.bitCount(b^this.EXPECTED_CORNER_BITS[_])<=2)return _;throw new se}getCorrectedParameterData(h,x){let b,_;x?(b=7,_=2):(b=10,_=4);let j=b-_,A=new Int32Array(b);for(let F=b-1;F>=0;--F)A[F]=h&15,h>>=4;try{new at(Ee.AZTEC_PARAM).decode(A,j)}catch{throw new se}let I=0;for(let F=0;F<_;F++)I=(I<<4)+A[F];return I}getBullsEyeCorners(h){let x=h,b=h,_=h,j=h,A=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let ge=this.getFirstDifferent(x,A,1,-1),Ae=this.getFirstDifferent(b,A,1,1),qe=this.getFirstDifferent(_,A,-1,1),Ye=this.getFirstDifferent(j,A,-1,-1);if(this.nbCenterLayers>2){let rt=this.distancePoint(Ye,ge)*this.nbCenterLayers/(this.distancePoint(j,x)*(this.nbCenterLayers+2));if(rt<.75||rt>1.25||!this.isWhiteOrBlackRectangle(ge,Ae,qe,Ye))break}x=ge,b=Ae,_=qe,j=Ye,A=!A}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new se;this.compact=this.nbCenterLayers===5;let I=new We(x.getX()+.5,x.getY()-.5),F=new We(b.getX()+.5,b.getY()+.5),X=new We(_.getX()-.5,_.getY()+.5),ce=new We(j.getX()-.5,j.getY()-.5);return this.expandSquare([I,F,X,ce],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let h,x,b,_;try{let I=new fr(this.image).detect();h=I[0],x=I[1],b=I[2],_=I[3]}catch{let F=this.image.getWidth()/2,X=this.image.getHeight()/2;h=this.getFirstDifferent(new Gt(F+7,X-7),!1,1,-1).toResultPoint(),x=this.getFirstDifferent(new Gt(F+7,X+7),!1,1,1).toResultPoint(),b=this.getFirstDifferent(new Gt(F-7,X+7),!1,-1,1).toResultPoint(),_=this.getFirstDifferent(new Gt(F-7,X-7),!1,-1,-1).toResultPoint()}let j=nt.round((h.getX()+_.getX()+x.getX()+b.getX())/4),A=nt.round((h.getY()+_.getY()+x.getY()+b.getY())/4);try{let I=new fr(this.image,15,j,A).detect();h=I[0],x=I[1],b=I[2],_=I[3]}catch{h=this.getFirstDifferent(new Gt(j+7,A-7),!1,1,-1).toResultPoint(),x=this.getFirstDifferent(new Gt(j+7,A+7),!1,1,1).toResultPoint(),b=this.getFirstDifferent(new Gt(j-7,A+7),!1,-1,1).toResultPoint(),_=this.getFirstDifferent(new Gt(j-7,A-7),!1,-1,-1).toResultPoint()}return j=nt.round((h.getX()+_.getX()+x.getX()+b.getX())/4),A=nt.round((h.getY()+_.getY()+x.getY()+b.getY())/4),new Gt(j,A)}getMatrixCornerPoints(h){return this.expandSquare(h,2*this.nbCenterLayers,this.getDimension())}sampleGrid(h,x,b,_,j){let A=rr.getInstance(),I=this.getDimension(),F=I/2-this.nbCenterLayers,X=I/2+this.nbCenterLayers;return A.sampleGrid(h,I,I,F,F,X,F,X,X,F,X,x.getX(),x.getY(),b.getX(),b.getY(),_.getX(),_.getY(),j.getX(),j.getY())}sampleLine(h,x,b){let _=0,j=this.distanceResultPoint(h,x),A=j/b,I=h.getX(),F=h.getY(),X=A*(x.getX()-h.getX())/j,ce=A*(x.getY()-h.getY())/j;for(let ge=0;ge<b;ge++)this.image.get(nt.round(I+ge*X),nt.round(F+ge*ce))&&(_|=1<<b-ge-1);return _}isWhiteOrBlackRectangle(h,x,b,_){let j=3;h=new Gt(h.getX()-j,h.getY()+j),x=new Gt(x.getX()-j,x.getY()-j),b=new Gt(b.getX()+j,b.getY()-j),_=new Gt(_.getX()+j,_.getY()+j);let A=this.getColor(_,h);if(A===0)return!1;let I=this.getColor(h,x);return I!==A||(I=this.getColor(x,b),I!==A)?!1:(I=this.getColor(b,_),I===A)}getColor(h,x){let b=this.distancePoint(h,x),_=(x.getX()-h.getX())/b,j=(x.getY()-h.getY())/b,A=0,I=h.getX(),F=h.getY(),X=this.image.get(h.getX(),h.getY()),ce=Math.ceil(b);for(let Ae=0;Ae<ce;Ae++)I+=_,F+=j,this.image.get(nt.round(I),nt.round(F))!==X&&A++;let ge=A/b;return ge>.1&&ge<.9?0:ge<=.1===X?1:-1}getFirstDifferent(h,x,b,_){let j=h.getX()+b,A=h.getY()+_;for(;this.isValid(j,A)&&this.image.get(j,A)===x;)j+=b,A+=_;for(j-=b,A-=_;this.isValid(j,A)&&this.image.get(j,A)===x;)j+=b;for(j-=b;this.isValid(j,A)&&this.image.get(j,A)===x;)A+=_;return A-=_,new Gt(j,A)}expandSquare(h,x,b){let _=b/(2*x),j=h[0].getX()-h[2].getX(),A=h[0].getY()-h[2].getY(),I=(h[0].getX()+h[2].getX())/2,F=(h[0].getY()+h[2].getY())/2,X=new We(I+_*j,F+_*A),ce=new We(I-_*j,F-_*A);j=h[1].getX()-h[3].getX(),A=h[1].getY()-h[3].getY(),I=(h[1].getX()+h[3].getX())/2,F=(h[1].getY()+h[3].getY())/2;let ge=new We(I+_*j,F+_*A),Ae=new We(I-_*j,F-_*A);return[X,ge,ce,Ae]}isValid(h,x){return h>=0&&h<this.image.getWidth()&&x>0&&x<this.image.getHeight()}isValidPoint(h){let x=nt.round(h.getX()),b=nt.round(h.getY());return this.isValid(x,b)}distancePoint(h,x){return nt.distance(h.getX(),h.getY(),x.getX(),x.getY())}distanceResultPoint(h,x){return nt.distance(h.getX(),h.getY(),x.getX(),x.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(E.truncDivision(this.nbLayers-4,8)+1)+15}}class cr{decode(h,x=null){let b=null,_=new Vt(h.getBlackMatrix()),j=null,A=null;try{let ce=_.detectMirror(!1);j=ce.getPoints(),this.reportFoundResultPoints(x,j),A=new ut().decode(ce)}catch(ce){b=ce}if(A==null)try{let ce=_.detectMirror(!0);j=ce.getPoints(),this.reportFoundResultPoints(x,j),A=new ut().decode(ce)}catch(ce){throw b??ce}let I=new Y(A.getText(),A.getRawBytes(),A.getNumBits(),j,Q.AZTEC,w.currentTimeMillis()),F=A.getByteSegments();F!=null&&I.putMetadata(me.BYTE_SEGMENTS,F);let X=A.getECLevel();return X!=null&&I.putMetadata(me.ERROR_CORRECTION_LEVEL,X),I}reportFoundResultPoints(h,x){if(h!=null){let b=h.get(W.NEED_RESULT_POINT_CALLBACK);b!=null&&x.forEach((_,j,A)=>{b.foundPossibleResultPoint(_)})}}reset(){}}class br extends ee{constructor(h=500){super(new cr,h)}}class ar{decode(h,x){try{return this.doDecode(h,x)}catch{if(x&&x.get(W.TRY_HARDER)===!0&&h.isRotateSupported()){const j=h.rotateCounterClockwise(),A=this.doDecode(j,x),I=A.getResultMetadata();let F=270;I!==null&&I.get(me.ORIENTATION)===!0&&(F=F+I.get(me.ORIENTATION)%360),A.putMetadata(me.ORIENTATION,F);const X=A.getResultPoints();if(X!==null){const ce=j.getHeight();for(let ge=0;ge<X.length;ge++)X[ge]=new We(ce-X[ge].getY()-1,X[ge].getX())}return A}else throw new se}}reset(){}doDecode(h,x){const b=h.getWidth(),_=h.getHeight();let j=new D(b);const A=x&&x.get(W.TRY_HARDER)===!0,I=Math.max(1,_>>(A?8:5));let F;A?F=_:F=15;const X=Math.trunc(_/2);for(let ce=0;ce<F;ce++){const ge=Math.trunc((ce+1)/2),Ae=(ce&1)===0,qe=X+I*(Ae?ge:-ge);if(qe<0||qe>=_)break;try{j=h.getBlackRow(qe,j)}catch{continue}for(let Ye=0;Ye<2;Ye++){if(Ye===1&&(j.reverse(),x&&x.get(W.NEED_RESULT_POINT_CALLBACK)===!0)){const rt=new Map;x.forEach((pt,St)=>rt.set(St,pt)),rt.delete(W.NEED_RESULT_POINT_CALLBACK),x=rt}try{const rt=this.decodeRow(qe,j,x);if(Ye===1){rt.putMetadata(me.ORIENTATION,180);const pt=rt.getResultPoints();pt!==null&&(pt[0]=new We(b-pt[0].getX()-1,pt[0].getY()),pt[1]=new We(b-pt[1].getX()-1,pt[1].getY()))}return rt}catch{}}}throw new se}static recordPattern(h,x,b){const _=b.length;for(let X=0;X<_;X++)b[X]=0;const j=h.getSize();if(x>=j)throw new se;let A=!h.get(x),I=0,F=x;for(;F<j;){if(h.get(F)!==A)b[I]++;else{if(++I===_)break;b[I]=1,A=!A}F++}if(!(I===_||I===_-1&&F===j))throw new se}static recordPatternInReverse(h,x,b){let _=b.length,j=h.get(x);for(;x>0&&_>=0;)h.get(--x)!==j&&(_--,j=!j);if(_>=0)throw new se;ar.recordPattern(h,x+1,b)}static patternMatchVariance(h,x,b){const _=h.length;let j=0,A=0;for(let X=0;X<_;X++)j+=h[X],A+=x[X];if(j<A)return Number.POSITIVE_INFINITY;const I=j/A;b*=I;let F=0;for(let X=0;X<_;X++){const ce=h[X],ge=x[X]*I,Ae=ce>ge?ce-ge:ge-ce;if(Ae>b)return Number.POSITIVE_INFINITY;F+=Ae}return F/j}}class xt extends ar{static findStartPattern(h){const x=h.getSize(),b=h.getNextSet(0);let _=0,j=Int32Array.from([0,0,0,0,0,0]),A=b,I=!1;const F=6;for(let X=b;X<x;X++)if(h.get(X)!==I)j[_]++;else{if(_===F-1){let ce=xt.MAX_AVG_VARIANCE,ge=-1;for(let Ae=xt.CODE_START_A;Ae<=xt.CODE_START_C;Ae++){const qe=ar.patternMatchVariance(j,xt.CODE_PATTERNS[Ae],xt.MAX_INDIVIDUAL_VARIANCE);qe<ce&&(ce=qe,ge=Ae)}if(ge>=0&&h.isRange(Math.max(0,A-(X-A)/2),A,!1))return Int32Array.from([A,X,ge]);A+=j[0]+j[1],j=j.slice(2,j.length-1),j[_-1]=0,j[_]=0,_--}else _++;j[_]=1,I=!I}throw new se}static decodeCode(h,x,b){ar.recordPattern(h,b,x);let _=xt.MAX_AVG_VARIANCE,j=-1;for(let A=0;A<xt.CODE_PATTERNS.length;A++){const I=xt.CODE_PATTERNS[A],F=this.patternMatchVariance(x,I,xt.MAX_INDIVIDUAL_VARIANCE);F<_&&(_=F,j=A)}if(j>=0)return j;throw new se}decodeRow(h,x,b){const _=b&&b.get(W.ASSUME_GS1)===!0,j=xt.findStartPattern(x),A=j[2];let I=0;const F=new Uint8Array(20);F[I++]=A;let X;switch(A){case xt.CODE_START_A:X=xt.CODE_CODE_A;break;case xt.CODE_START_B:X=xt.CODE_CODE_B;break;case xt.CODE_START_C:X=xt.CODE_CODE_C;break;default:throw new R}let ce=!1,ge=!1,Ae="",qe=j[0],Ye=j[1];const rt=Int32Array.from([0,0,0,0,0,0]);let pt=0,St=0,zt=A,qt=0,Ft=!0,sn=!1,gn=!1;for(;!ce;){const Hc=ge;switch(ge=!1,pt=St,St=xt.decodeCode(x,rt,Ye),F[I++]=St,St!==xt.CODE_STOP&&(Ft=!0),St!==xt.CODE_STOP&&(qt++,zt+=qt*St),qe=Ye,Ye+=rt.reduce((kf,Ad)=>kf+Ad,0),St){case xt.CODE_START_A:case xt.CODE_START_B:case xt.CODE_START_C:throw new R}switch(X){case xt.CODE_CODE_A:if(St<64)gn===sn?Ae+=String.fromCharCode(32+St):Ae+=String.fromCharCode(32+St+128),gn=!1;else if(St<96)gn===sn?Ae+=String.fromCharCode(St-64):Ae+=String.fromCharCode(St+64),gn=!1;else switch(St!==xt.CODE_STOP&&(Ft=!1),St){case xt.CODE_FNC_1:_&&(Ae.length===0?Ae+="]C1":Ae+="");break;case xt.CODE_FNC_2:case xt.CODE_FNC_3:break;case xt.CODE_FNC_4_A:!sn&&gn?(sn=!0,gn=!1):sn&&gn?(sn=!1,gn=!1):gn=!0;break;case xt.CODE_SHIFT:ge=!0,X=xt.CODE_CODE_B;break;case xt.CODE_CODE_B:X=xt.CODE_CODE_B;break;case xt.CODE_CODE_C:X=xt.CODE_CODE_C;break;case xt.CODE_STOP:ce=!0;break}break;case xt.CODE_CODE_B:if(St<96)gn===sn?Ae+=String.fromCharCode(32+St):Ae+=String.fromCharCode(32+St+128),gn=!1;else switch(St!==xt.CODE_STOP&&(Ft=!1),St){case xt.CODE_FNC_1:_&&(Ae.length===0?Ae+="]C1":Ae+="");break;case xt.CODE_FNC_2:case xt.CODE_FNC_3:break;case xt.CODE_FNC_4_B:!sn&&gn?(sn=!0,gn=!1):sn&&gn?(sn=!1,gn=!1):gn=!0;break;case xt.CODE_SHIFT:ge=!0,X=xt.CODE_CODE_A;break;case xt.CODE_CODE_A:X=xt.CODE_CODE_A;break;case xt.CODE_CODE_C:X=xt.CODE_CODE_C;break;case xt.CODE_STOP:ce=!0;break}break;case xt.CODE_CODE_C:if(St<100)St<10&&(Ae+="0"),Ae+=St;else switch(St!==xt.CODE_STOP&&(Ft=!1),St){case xt.CODE_FNC_1:_&&(Ae.length===0?Ae+="]C1":Ae+="");break;case xt.CODE_CODE_A:X=xt.CODE_CODE_A;break;case xt.CODE_CODE_B:X=xt.CODE_CODE_B;break;case xt.CODE_STOP:ce=!0;break}break}Hc&&(X=X===xt.CODE_CODE_A?xt.CODE_CODE_B:xt.CODE_CODE_A)}const Ya=Ye-qe;if(Ye=x.getNextUnset(Ye),!x.isRange(Ye,Math.min(x.getSize(),Ye+(Ye-qe)/2),!1))throw new se;if(zt-=qt*pt,zt%103!==pt)throw new g;const pi=Ae.length;if(pi===0)throw new se;pi>0&&Ft&&(X===xt.CODE_CODE_C?Ae=Ae.substring(0,pi-2):Ae=Ae.substring(0,pi-1));const Xs=(j[1]+j[0])/2,ja=qe+Ya/2,Ys=F.length,ol=new Uint8Array(Ys);for(let Hc=0;Hc<Ys;Hc++)ol[Hc]=F[Hc];const Cd=[new We(Xs,h),new We(ja,h)];return new Y(Ae,ol,0,Cd,Q.CODE_128,new Date().getTime())}}xt.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],xt.MAX_AVG_VARIANCE=.25,xt.MAX_INDIVIDUAL_VARIANCE=.7,xt.CODE_SHIFT=98,xt.CODE_CODE_C=99,xt.CODE_CODE_B=100,xt.CODE_CODE_A=101,xt.CODE_FNC_1=102,xt.CODE_FNC_2=97,xt.CODE_FNC_3=96,xt.CODE_FNC_4_A=101,xt.CODE_FNC_4_B=100,xt.CODE_START_A=103,xt.CODE_START_B=104,xt.CODE_START_C=105,xt.CODE_STOP=106;class yr extends ar{constructor(h=!1,x=!1){super(),this.usingCheckDigit=h,this.extendedMode=x,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(h,x,b){let _=this.counters;_.fill(0),this.decodeRowResult="";let j=yr.findAsteriskPattern(x,_),A=x.getNextSet(j[1]),I=x.getSize(),F,X;do{yr.recordPattern(x,A,_);let rt=yr.toNarrowWidePattern(_);if(rt<0)throw new se;F=yr.patternToChar(rt),this.decodeRowResult+=F,X=A;for(let pt of _)A+=pt;A=x.getNextSet(A)}while(F!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let ce=0;for(let rt of _)ce+=rt;let ge=A-X-ce;if(A!==I&&ge*2<ce)throw new se;if(this.usingCheckDigit){let rt=this.decodeRowResult.length-1,pt=0;for(let St=0;St<rt;St++)pt+=yr.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(St));if(this.decodeRowResult.charAt(rt)!==yr.ALPHABET_STRING.charAt(pt%43))throw new g;this.decodeRowResult=this.decodeRowResult.substring(0,rt)}if(this.decodeRowResult.length===0)throw new se;let Ae;this.extendedMode?Ae=yr.decodeExtended(this.decodeRowResult):Ae=this.decodeRowResult;let qe=(j[1]+j[0])/2,Ye=X+ce/2;return new Y(Ae,null,0,[new We(qe,h),new We(Ye,h)],Q.CODE_39,new Date().getTime())}static findAsteriskPattern(h,x){let b=h.getSize(),_=h.getNextSet(0),j=0,A=_,I=!1,F=x.length;for(let X=_;X<b;X++)if(h.get(X)!==I)x[j]++;else{if(j===F-1){if(this.toNarrowWidePattern(x)===yr.ASTERISK_ENCODING&&h.isRange(Math.max(0,A-Math.floor((X-A)/2)),A,!1))return[A,X];A+=x[0]+x[1],x.copyWithin(0,2,2+j-1),x[j-1]=0,x[j]=0,j--}else j++;x[j]=1,I=!I}throw new se}static toNarrowWidePattern(h){let x=h.length,b=0,_;do{let j=2147483647;for(let F of h)F<j&&F>b&&(j=F);b=j,_=0;let A=0,I=0;for(let F=0;F<x;F++){let X=h[F];X>b&&(I|=1<<x-1-F,_++,A+=X)}if(_===3){for(let F=0;F<x&&_>0;F++){let X=h[F];if(X>b&&(_--,X*2>=A))return-1}return I}}while(_>3);return-1}static patternToChar(h){for(let x=0;x<yr.CHARACTER_ENCODINGS.length;x++)if(yr.CHARACTER_ENCODINGS[x]===h)return yr.ALPHABET_STRING.charAt(x);if(h===yr.ASTERISK_ENCODING)return"*";throw new se}static decodeExtended(h){let x=h.length,b="";for(let _=0;_<x;_++){let j=h.charAt(_);if(j==="+"||j==="$"||j==="%"||j==="/"){let A=h.charAt(_+1),I="\0";switch(j){case"+":if(A>="A"&&A<="Z")I=String.fromCharCode(A.charCodeAt(0)+32);else throw new R;break;case"$":if(A>="A"&&A<="Z")I=String.fromCharCode(A.charCodeAt(0)-64);else throw new R;break;case"%":if(A>="A"&&A<="E")I=String.fromCharCode(A.charCodeAt(0)-38);else if(A>="F"&&A<="J")I=String.fromCharCode(A.charCodeAt(0)-11);else if(A>="K"&&A<="O")I=String.fromCharCode(A.charCodeAt(0)+16);else if(A>="P"&&A<="T")I=String.fromCharCode(A.charCodeAt(0)+43);else if(A==="U")I="\0";else if(A==="V")I="@";else if(A==="W")I="`";else if(A==="X"||A==="Y"||A==="Z")I="";else throw new R;break;case"/":if(A>="A"&&A<="O")I=String.fromCharCode(A.charCodeAt(0)-32);else if(A==="Z")I=":";else throw new R;break}b+=I,_++}else b+=j}return b}}yr.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",yr.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],yr.ASTERISK_ENCODING=148;class Ge extends ar{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(h,x,b){let _=this.decodeStart(x),j=this.decodeEnd(x),A=new J;Ge.decodeMiddle(x,_[1],j[0],A);let I=A.toString(),F=null;b!=null&&(F=b.get(W.ALLOWED_LENGTHS)),F==null&&(F=Ge.DEFAULT_ALLOWED_LENGTHS);let X=I.length,ce=!1,ge=0;for(let Ye of F){if(X===Ye){ce=!0;break}Ye>ge&&(ge=Ye)}if(!ce&&X>ge&&(ce=!0),!ce)throw new R;const Ae=[new We(_[1],h),new We(j[0],h)];return new Y(I,null,0,Ae,Q.ITF,new Date().getTime())}static decodeMiddle(h,x,b,_){let j=new Int32Array(10),A=new Int32Array(5),I=new Int32Array(5);for(j.fill(0),A.fill(0),I.fill(0);x<b;){ar.recordPattern(h,x,j);for(let X=0;X<5;X++){let ce=2*X;A[X]=j[ce],I[X]=j[ce+1]}let F=Ge.decodeDigit(A);_.append(F.toString()),F=this.decodeDigit(I),_.append(F.toString()),j.forEach(function(X){x+=X})}}decodeStart(h){let x=Ge.skipWhiteSpace(h),b=Ge.findGuardPattern(h,x,Ge.START_PATTERN);return this.narrowLineWidth=(b[1]-b[0])/4,this.validateQuietZone(h,b[0]),b}validateQuietZone(h,x){let b=this.narrowLineWidth*10;b=b<x?b:x;for(let _=x-1;b>0&&_>=0&&!h.get(_);_--)b--;if(b!==0)throw new se}static skipWhiteSpace(h){const x=h.getSize(),b=h.getNextSet(0);if(b===x)throw new se;return b}decodeEnd(h){h.reverse();try{let x=Ge.skipWhiteSpace(h),b;try{b=Ge.findGuardPattern(h,x,Ge.END_PATTERN_REVERSED[0])}catch(j){j instanceof se&&(b=Ge.findGuardPattern(h,x,Ge.END_PATTERN_REVERSED[1]))}this.validateQuietZone(h,b[0]);let _=b[0];return b[0]=h.getSize()-b[1],b[1]=h.getSize()-_,b}finally{h.reverse()}}static findGuardPattern(h,x,b){let _=b.length,j=new Int32Array(_),A=h.getSize(),I=!1,F=0,X=x;j.fill(0);for(let ce=x;ce<A;ce++)if(h.get(ce)!==I)j[F]++;else{if(F===_-1){if(ar.patternMatchVariance(j,b,Ge.MAX_INDIVIDUAL_VARIANCE)<Ge.MAX_AVG_VARIANCE)return[X,ce];X+=j[0]+j[1],w.arraycopy(j,2,j,0,F-1),j[F-1]=0,j[F]=0,F--}else F++;j[F]=1,I=!I}throw new se}static decodeDigit(h){let x=Ge.MAX_AVG_VARIANCE,b=-1,_=Ge.PATTERNS.length;for(let j=0;j<_;j++){let A=Ge.PATTERNS[j],I=ar.patternMatchVariance(h,A,Ge.MAX_INDIVIDUAL_VARIANCE);I<x?(x=I,b=j):I===x&&(b=-1)}if(b>=0)return b%10;throw new se}}Ge.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],Ge.MAX_AVG_VARIANCE=.38,Ge.MAX_INDIVIDUAL_VARIANCE=.5,Ge.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],Ge.START_PATTERN=Int32Array.from([1,1,1,1]),Ge.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class vt extends ar{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(h){let x=!1,b,_=0,j=Int32Array.from([0,0,0]);for(;!x;){j=Int32Array.from([0,0,0]),b=vt.findGuardPattern(h,_,!1,this.START_END_PATTERN,j);let A=b[0];_=b[1];let I=A-(_-A);I>=0&&(x=h.isRange(I,A,!1))}return b}static checkChecksum(h){return vt.checkStandardUPCEANChecksum(h)}static checkStandardUPCEANChecksum(h){let x=h.length;if(x===0)return!1;let b=parseInt(h.charAt(x-1),10);return vt.getStandardUPCEANChecksum(h.substring(0,x-1))===b}static getStandardUPCEANChecksum(h){let x=h.length,b=0;for(let _=x-1;_>=0;_-=2){let j=h.charAt(_).charCodeAt(0)-48;if(j<0||j>9)throw new R;b+=j}b*=3;for(let _=x-2;_>=0;_-=2){let j=h.charAt(_).charCodeAt(0)-48;if(j<0||j>9)throw new R;b+=j}return(1e3-b)%10}static decodeEnd(h,x){return vt.findGuardPattern(h,x,!1,vt.START_END_PATTERN,new Int32Array(vt.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(h,x,b,_){return this.findGuardPattern(h,x,b,_,new Int32Array(_.length))}static findGuardPattern(h,x,b,_,j){let A=h.getSize();x=b?h.getNextUnset(x):h.getNextSet(x);let I=0,F=x,X=_.length,ce=b;for(let ge=x;ge<A;ge++)if(h.get(ge)!==ce)j[I]++;else{if(I===X-1){if(ar.patternMatchVariance(j,_,vt.MAX_INDIVIDUAL_VARIANCE)<vt.MAX_AVG_VARIANCE)return Int32Array.from([F,ge]);F+=j[0]+j[1];let Ae=j.slice(2,j.length-1);for(let qe=0;qe<I-1;qe++)j[qe]=Ae[qe];j[I-1]=0,j[I]=0,I--}else I++;j[I]=1,ce=!ce}throw new se}static decodeDigit(h,x,b,_){this.recordPattern(h,b,x);let j=this.MAX_AVG_VARIANCE,A=-1,I=_.length;for(let F=0;F<I;F++){let X=_[F],ce=ar.patternMatchVariance(x,X,vt.MAX_INDIVIDUAL_VARIANCE);ce<j&&(j=ce,A=F)}if(A>=0)return A;throw new se}}vt.MAX_AVG_VARIANCE=.48,vt.MAX_INDIVIDUAL_VARIANCE=.7,vt.START_END_PATTERN=Int32Array.from([1,1,1]),vt.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),vt.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),vt.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class $t{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(h,x,b){let _=this.decodeRowStringBuffer,j=this.decodeMiddle(x,b,_),A=_.toString(),I=$t.parseExtensionString(A),F=[new We((b[0]+b[1])/2,h),new We(j,h)],X=new Y(A,null,0,F,Q.UPC_EAN_EXTENSION,new Date().getTime());return I!=null&&X.putAllMetadata(I),X}decodeMiddle(h,x,b){let _=this.decodeMiddleCounters;_[0]=0,_[1]=0,_[2]=0,_[3]=0;let j=h.getSize(),A=x[1],I=0;for(let X=0;X<5&&A<j;X++){let ce=vt.decodeDigit(h,_,A,vt.L_AND_G_PATTERNS);b+=String.fromCharCode(48+ce%10);for(let ge of _)A+=ge;ce>=10&&(I|=1<<4-X),X!==4&&(A=h.getNextSet(A),A=h.getNextUnset(A))}if(b.length!==5)throw new se;let F=this.determineCheckDigit(I);if($t.extensionChecksum(b.toString())!==F)throw new se;return A}static extensionChecksum(h){let x=h.length,b=0;for(let _=x-2;_>=0;_-=2)b+=h.charAt(_).charCodeAt(0)-48;b*=3;for(let _=x-1;_>=0;_-=2)b+=h.charAt(_).charCodeAt(0)-48;return b*=3,b%10}determineCheckDigit(h){for(let x=0;x<10;x++)if(h===this.CHECK_DIGIT_ENCODINGS[x])return x;throw new se}static parseExtensionString(h){if(h.length!==5)return null;let x=$t.parseExtension5String(h);return x==null?null:new Map([[me.SUGGESTED_PRICE,x]])}static parseExtension5String(h){let x;switch(h.charAt(0)){case"0":x="";break;case"5":x="$";break;case"9":switch(h){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}x="";break;default:x="";break}let b=parseInt(h.substring(1)),_=(b/100).toString(),j=b%100,A=j<10?"0"+j:j.toString();return x+_+"."+A}}class Yt{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(h,x,b){let _=this.decodeRowStringBuffer,j=this.decodeMiddle(x,b,_),A=_.toString(),I=Yt.parseExtensionString(A),F=[new We((b[0]+b[1])/2,h),new We(j,h)],X=new Y(A,null,0,F,Q.UPC_EAN_EXTENSION,new Date().getTime());return I!=null&&X.putAllMetadata(I),X}decodeMiddle(h,x,b){let _=this.decodeMiddleCounters;_[0]=0,_[1]=0,_[2]=0,_[3]=0;let j=h.getSize(),A=x[1],I=0;for(let F=0;F<2&&A<j;F++){let X=vt.decodeDigit(h,_,A,vt.L_AND_G_PATTERNS);b+=String.fromCharCode(48+X%10);for(let ce of _)A+=ce;X>=10&&(I|=1<<1-F),F!==1&&(A=h.getNextSet(A),A=h.getNextUnset(A))}if(b.length!==2)throw new se;if(parseInt(b.toString())%4!==I)throw new se;return A}static parseExtensionString(h){return h.length!==2?null:new Map([[me.ISSUE_NUMBER,parseInt(h)]])}}class Er{static decodeRow(h,x,b){let _=vt.findGuardPattern(x,b,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new $t().decodeRow(h,x,_)}catch{return new Yt().decodeRow(h,x,_)}}}Er.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class wr extends vt{constructor(){super(),this.decodeRowStringBuffer="",wr.L_AND_G_PATTERNS=wr.L_PATTERNS.map(h=>Int32Array.from(h));for(let h=10;h<20;h++){let x=wr.L_PATTERNS[h-10],b=new Int32Array(x.length);for(let _=0;_<x.length;_++)b[_]=x[x.length-_-1];wr.L_AND_G_PATTERNS[h]=b}}decodeRow(h,x,b){let _=wr.findStartGuardPattern(x),j=b==null?null:b.get(W.NEED_RESULT_POINT_CALLBACK);if(j!=null){const Ft=new We((_[0]+_[1])/2,h);j.foundPossibleResultPoint(Ft)}let A=this.decodeMiddle(x,_,this.decodeRowStringBuffer),I=A.rowOffset,F=A.resultString;if(j!=null){const Ft=new We(I,h);j.foundPossibleResultPoint(Ft)}let X=this.decodeEnd(x,I);if(j!=null){const Ft=new We((X[0]+X[1])/2,h);j.foundPossibleResultPoint(Ft)}let ce=X[1],ge=ce+(ce-X[0]);if(ge>=x.getSize()||!x.isRange(ce,ge,!1))throw new se;let Ae=F.toString();if(Ae.length<8)throw new R;if(!wr.checkChecksum(Ae))throw new g;let qe=(_[1]+_[0])/2,Ye=(X[1]+X[0])/2,rt=this.getBarcodeFormat(),pt=[new We(qe,h),new We(Ye,h)],St=new Y(Ae,null,0,pt,rt,new Date().getTime()),zt=0;try{let Ft=Er.decodeRow(h,x,X[1]);St.putMetadata(me.UPC_EAN_EXTENSION,Ft.getText()),St.putAllMetadata(Ft.getResultMetadata()),St.addResultPoints(Ft.getResultPoints()),zt=Ft.getText().length}catch{}let qt=b==null?null:b.get(W.ALLOWED_EAN_EXTENSIONS);if(qt!=null){let Ft=!1;for(let sn in qt)if(zt.toString()===sn){Ft=!0;break}if(!Ft)throw new se}return St}decodeEnd(h,x){return wr.findGuardPattern(h,x,!1,wr.START_END_PATTERN,new Int32Array(wr.START_END_PATTERN.length).fill(0))}static checkChecksum(h){return wr.checkStandardUPCEANChecksum(h)}static checkStandardUPCEANChecksum(h){let x=h.length;if(x===0)return!1;let b=parseInt(h.charAt(x-1),10);return wr.getStandardUPCEANChecksum(h.substring(0,x-1))===b}static getStandardUPCEANChecksum(h){let x=h.length,b=0;for(let _=x-1;_>=0;_-=2){let j=h.charAt(_).charCodeAt(0)-48;if(j<0||j>9)throw new R;b+=j}b*=3;for(let _=x-2;_>=0;_-=2){let j=h.charAt(_).charCodeAt(0)-48;if(j<0||j>9)throw new R;b+=j}return(1e3-b)%10}}class Ke extends wr{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(h,x,b){let _=this.decodeMiddleCounters;_[0]=0,_[1]=0,_[2]=0,_[3]=0;let j=h.getSize(),A=x[1],I=0;for(let X=0;X<6&&A<j;X++){let ce=wr.decodeDigit(h,_,A,wr.L_AND_G_PATTERNS);b+=String.fromCharCode(48+ce%10);for(let ge of _)A+=ge;ce>=10&&(I|=1<<5-X)}b=Ke.determineFirstDigit(b,I),A=wr.findGuardPattern(h,A,!0,wr.MIDDLE_PATTERN,new Int32Array(wr.MIDDLE_PATTERN.length).fill(0))[1];for(let X=0;X<6&&A<j;X++){let ce=wr.decodeDigit(h,_,A,wr.L_PATTERNS);b+=String.fromCharCode(48+ce);for(let ge of _)A+=ge}return{rowOffset:A,resultString:b}}getBarcodeFormat(){return Q.EAN_13}static determineFirstDigit(h,x){for(let b=0;b<10;b++)if(x===this.FIRST_DIGIT_ENCODINGS[b])return h=String.fromCharCode(48+b)+h,h;throw new se}}Ke.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class Et extends wr{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(h,x,b){const _=this.decodeMiddleCounters;_[0]=0,_[1]=0,_[2]=0,_[3]=0;let j=h.getSize(),A=x[1];for(let F=0;F<4&&A<j;F++){let X=wr.decodeDigit(h,_,A,wr.L_PATTERNS);b+=String.fromCharCode(48+X);for(let ce of _)A+=ce}A=wr.findGuardPattern(h,A,!0,wr.MIDDLE_PATTERN,new Int32Array(wr.MIDDLE_PATTERN.length).fill(0))[1];for(let F=0;F<4&&A<j;F++){let X=wr.decodeDigit(h,_,A,wr.L_PATTERNS);b+=String.fromCharCode(48+X);for(let ce of _)A+=ce}return{rowOffset:A,resultString:b}}getBarcodeFormat(){return Q.EAN_8}}class ur extends wr{constructor(){super(...arguments),this.ean13Reader=new Ke}getBarcodeFormat(){return Q.UPC_A}decode(h,x){return this.maybeReturnResult(this.ean13Reader.decode(h))}decodeRow(h,x,b){return this.maybeReturnResult(this.ean13Reader.decodeRow(h,x,b))}decodeMiddle(h,x,b){return this.ean13Reader.decodeMiddle(h,x,b)}maybeReturnResult(h){let x=h.getText();if(x.charAt(0)==="0"){let b=new Y(x.substring(1),null,null,h.getResultPoints(),Q.UPC_A);return h.getResultMetadata()!=null&&b.putAllMetadata(h.getResultMetadata()),b}else throw new se}reset(){this.ean13Reader.reset()}}class Br extends wr{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(h,x,b){const _=this.decodeMiddleCounters.map(X=>X);_[0]=0,_[1]=0,_[2]=0,_[3]=0;const j=h.getSize();let A=x[1],I=0;for(let X=0;X<6&&A<j;X++){const ce=Br.decodeDigit(h,_,A,Br.L_AND_G_PATTERNS);b+=String.fromCharCode(48+ce%10);for(let ge of _)A+=ge;ce>=10&&(I|=1<<5-X)}let F=Br.determineNumSysAndCheckDigit(b,I);return{rowOffset:A,resultString:F}}decodeEnd(h,x){return Br.findGuardPatternWithoutCounters(h,x,!0,Br.MIDDLE_END_PATTERN)}checkChecksum(h){return wr.checkChecksum(Br.convertUPCEtoUPCA(h))}static determineNumSysAndCheckDigit(h,x){for(let b=0;b<=1;b++)for(let _=0;_<10;_++)if(x===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[b][_]){let j=String.fromCharCode(48+b),A=String.fromCharCode(48+_);return j+h+A}throw se.getNotFoundInstance()}getBarcodeFormat(){return Q.UPC_E}static convertUPCEtoUPCA(h){const x=h.slice(1,7).split("").map(j=>j.charCodeAt(0)),b=new J;b.append(h.charAt(0));let _=x[5];switch(_){case 0:case 1:case 2:b.appendChars(x,0,2),b.append(_),b.append("0000"),b.appendChars(x,2,3);break;case 3:b.appendChars(x,0,3),b.append("00000"),b.appendChars(x,3,2);break;case 4:b.appendChars(x,0,4),b.append("00000"),b.append(x[4]);break;default:b.appendChars(x,0,5),b.append("0000"),b.append(_);break}return h.length>=8&&b.append(h.charAt(7)),b.toString()}}Br.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Br.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class Tr extends ar{constructor(h){super();let x=h==null?null:h.get(W.POSSIBLE_FORMATS),b=[];n(x)?(b.push(new Ke),b.push(new ur),b.push(new Et),b.push(new Br)):(x.indexOf(Q.EAN_13)>-1&&b.push(new Ke),x.indexOf(Q.UPC_A)>-1&&b.push(new ur),x.indexOf(Q.EAN_8)>-1&&b.push(new Et),x.indexOf(Q.UPC_E)>-1&&b.push(new Br)),this.readers=b}decodeRow(h,x,b){for(let _ of this.readers)try{const j=_.decodeRow(h,x,b),A=j.getBarcodeFormat()===Q.EAN_13&&j.getText().charAt(0)==="0",I=b==null?null:b.get(W.POSSIBLE_FORMATS),F=I==null||I.includes(Q.UPC_A);if(A&&F){const X=j.getRawBytes(),ce=new Y(j.getText().substring(1),X,X?X.length:null,j.getResultPoints(),Q.UPC_A);return ce.putAllMetadata(j.getResultMetadata()),ce}return j}catch{}throw new se}reset(){for(let h of this.readers)h.reset()}}class Zt extends ar{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(h,x){for(let b=0;b<x.length;b++)if(ar.patternMatchVariance(h,x[b],Zt.MAX_INDIVIDUAL_VARIANCE)<Zt.MAX_AVG_VARIANCE)return b;throw new se}static count(h){return nt.sum(new Int32Array(h))}static increment(h,x){let b=0,_=x[0];for(let j=1;j<h.length;j++)x[j]>_&&(_=x[j],b=j);h[b]++}static decrement(h,x){let b=0,_=x[0];for(let j=1;j<h.length;j++)x[j]<_&&(_=x[j],b=j);h[b]--}static isFinderPattern(h){let x=h[0]+h[1],b=x+h[2]+h[3],_=x/b;if(_>=Zt.MIN_FINDER_PATTERN_RATIO&&_<=Zt.MAX_FINDER_PATTERN_RATIO){let j=Number.MAX_SAFE_INTEGER,A=Number.MIN_SAFE_INTEGER;for(let I of h)I>A&&(A=I),I<j&&(j=I);return A<10*j}return!1}}Zt.MAX_AVG_VARIANCE=.2,Zt.MAX_INDIVIDUAL_VARIANCE=.45,Zt.MIN_FINDER_PATTERN_RATIO=9.5/12,Zt.MAX_FINDER_PATTERN_RATIO=12.5/14;class Pr{constructor(h,x){this.value=h,this.checksumPortion=x}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(h){if(!(h instanceof Pr))return!1;const x=h;return this.value===x.value&&this.checksumPortion===x.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class sr{constructor(h,x,b,_,j){this.value=h,this.startEnd=x,this.value=h,this.startEnd=x,this.resultPoints=new Array,this.resultPoints.push(new We(b,j)),this.resultPoints.push(new We(_,j))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(h){if(!(h instanceof sr))return!1;const x=h;return this.value===x.value}hashCode(){return this.value}}class Or{constructor(){}static getRSSvalue(h,x,b){let _=0;for(let F of h)_+=F;let j=0,A=0,I=h.length;for(let F=0;F<I-1;F++){let X;for(X=1,A|=1<<F;X<h[F];X++,A&=~(1<<F)){let ce=Or.combins(_-X-1,I-F-2);if(b&&A===0&&_-X-(I-F-1)>=I-F-1&&(ce-=Or.combins(_-X-(I-F),I-F-2)),I-F-1>1){let ge=0;for(let Ae=_-X-(I-F-2);Ae>x;Ae--)ge+=Or.combins(_-X-Ae-1,I-F-3);ce-=ge*(I-1-F)}else _-X>x&&ce--;j+=ce}_-=X}return j}static combins(h,x){let b,_;h-x>x?(_=x,b=h-x):(_=h-x,b=x);let j=1,A=1;for(let I=h;I>b;I--)j*=I,A<=_&&(j/=A,A++);for(;A<=_;)j/=A,A++;return j}}class qr{static buildBitArray(h){let x=h.length*2-1;h[h.length-1].getRightChar()==null&&(x-=1);let b=12*x,_=new D(b),j=0,I=h[0].getRightChar().getValue();for(let F=11;F>=0;--F)(I&1<<F)!=0&&_.set(j),j++;for(let F=1;F<h.length;++F){let X=h[F],ce=X.getLeftChar().getValue();for(let ge=11;ge>=0;--ge)(ce&1<<ge)!=0&&_.set(j),j++;if(X.getRightChar()!=null){let ge=X.getRightChar().getValue();for(let Ae=11;Ae>=0;--Ae)(ge&1<<Ae)!=0&&_.set(j),j++}}return _}}class Lr{constructor(h,x){x?this.decodedInformation=null:(this.finished=h,this.decodedInformation=x)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class An{constructor(h){this.newPosition=h}getNewPosition(){return this.newPosition}}class Ir extends An{constructor(h,x){super(h),this.value=x}getValue(){return this.value}isFNC1(){return this.value===Ir.FNC1}}Ir.FNC1="$";class Nn extends An{constructor(h,x,b){super(h),b?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=x}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class we extends An{constructor(h,x,b){if(super(h),x<0||x>10||b<0||b>10)throw new R;this.firstDigit=x,this.secondDigit=b}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===we.FNC1}isSecondDigitFNC1(){return this.secondDigit===we.FNC1}isAnyFNC1(){return this.firstDigit===we.FNC1||this.secondDigit===we.FNC1}}we.FNC1=10;class Ne{constructor(){}static parseFieldsInGeneralPurpose(h){if(!h)return null;if(h.length<2)throw new se;let x=h.substring(0,2);for(let j of Ne.TWO_DIGIT_DATA_LENGTH)if(j[0]===x)return j[1]===Ne.VARIABLE_LENGTH?Ne.processVariableAI(2,j[2],h):Ne.processFixedAI(2,j[1],h);if(h.length<3)throw new se;let b=h.substring(0,3);for(let j of Ne.THREE_DIGIT_DATA_LENGTH)if(j[0]===b)return j[1]===Ne.VARIABLE_LENGTH?Ne.processVariableAI(3,j[2],h):Ne.processFixedAI(3,j[1],h);for(let j of Ne.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(j[0]===b)return j[1]===Ne.VARIABLE_LENGTH?Ne.processVariableAI(4,j[2],h):Ne.processFixedAI(4,j[1],h);if(h.length<4)throw new se;let _=h.substring(0,4);for(let j of Ne.FOUR_DIGIT_DATA_LENGTH)if(j[0]===_)return j[1]===Ne.VARIABLE_LENGTH?Ne.processVariableAI(4,j[2],h):Ne.processFixedAI(4,j[1],h);throw new se}static processFixedAI(h,x,b){if(b.length<h)throw new se;let _=b.substring(0,h);if(b.length<h+x)throw new se;let j=b.substring(h,h+x),A=b.substring(h+x),I="("+_+")"+j,F=Ne.parseFieldsInGeneralPurpose(A);return F==null?I:I+F}static processVariableAI(h,x,b){let _=b.substring(0,h),j;b.length<h+x?j=b.length:j=h+x;let A=b.substring(h,j),I=b.substring(j),F="("+_+")"+A,X=Ne.parseFieldsInGeneralPurpose(I);return X==null?F:F+X}}Ne.VARIABLE_LENGTH=[],Ne.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",Ne.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",Ne.VARIABLE_LENGTH,20],["22",Ne.VARIABLE_LENGTH,29],["30",Ne.VARIABLE_LENGTH,8],["37",Ne.VARIABLE_LENGTH,8],["90",Ne.VARIABLE_LENGTH,30],["91",Ne.VARIABLE_LENGTH,30],["92",Ne.VARIABLE_LENGTH,30],["93",Ne.VARIABLE_LENGTH,30],["94",Ne.VARIABLE_LENGTH,30],["95",Ne.VARIABLE_LENGTH,30],["96",Ne.VARIABLE_LENGTH,30],["97",Ne.VARIABLE_LENGTH,3],["98",Ne.VARIABLE_LENGTH,30],["99",Ne.VARIABLE_LENGTH,30]],Ne.THREE_DIGIT_DATA_LENGTH=[["240",Ne.VARIABLE_LENGTH,30],["241",Ne.VARIABLE_LENGTH,30],["242",Ne.VARIABLE_LENGTH,6],["250",Ne.VARIABLE_LENGTH,30],["251",Ne.VARIABLE_LENGTH,30],["253",Ne.VARIABLE_LENGTH,17],["254",Ne.VARIABLE_LENGTH,20],["400",Ne.VARIABLE_LENGTH,30],["401",Ne.VARIABLE_LENGTH,30],["402",17],["403",Ne.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",Ne.VARIABLE_LENGTH,20],["421",Ne.VARIABLE_LENGTH,15],["422",3],["423",Ne.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],Ne.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",Ne.VARIABLE_LENGTH,15],["391",Ne.VARIABLE_LENGTH,18],["392",Ne.VARIABLE_LENGTH,15],["393",Ne.VARIABLE_LENGTH,18],["703",Ne.VARIABLE_LENGTH,30]],Ne.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",Ne.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",Ne.VARIABLE_LENGTH,20],["8003",Ne.VARIABLE_LENGTH,30],["8004",Ne.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",Ne.VARIABLE_LENGTH,30],["8008",Ne.VARIABLE_LENGTH,12],["8018",18],["8020",Ne.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",Ne.VARIABLE_LENGTH,70],["8200",Ne.VARIABLE_LENGTH,70]];class De{constructor(h){this.buffer=new J,this.information=h}decodeAllCodes(h,x){let b=x,_=null;do{let j=this.decodeGeneralPurposeField(b,_),A=Ne.parseFieldsInGeneralPurpose(j.getNewString());if(A!=null&&h.append(A),j.isRemaining()?_=""+j.getRemainingValue():_=null,b===j.getNewPosition())break;b=j.getNewPosition()}while(!0);return h.toString()}isStillNumeric(h){if(h+7>this.information.getSize())return h+4<=this.information.getSize();for(let x=h;x<h+3;++x)if(this.information.get(x))return!0;return this.information.get(h+3)}decodeNumeric(h){if(h+7>this.information.getSize()){let j=this.extractNumericValueFromBitArray(h,4);return j===0?new we(this.information.getSize(),we.FNC1,we.FNC1):new we(this.information.getSize(),j-1,we.FNC1)}let x=this.extractNumericValueFromBitArray(h,7),b=(x-8)/11,_=(x-8)%11;return new we(h+7,b,_)}extractNumericValueFromBitArray(h,x){return De.extractNumericValueFromBitArray(this.information,h,x)}static extractNumericValueFromBitArray(h,x,b){let _=0;for(let j=0;j<b;++j)h.get(x+j)&&(_|=1<<b-j-1);return _}decodeGeneralPurposeField(h,x){this.buffer.setLengthToZero(),x!=null&&this.buffer.append(x),this.current.setPosition(h);let b=this.parseBlocks();return b!=null&&b.isRemaining()?new Nn(this.current.getPosition(),this.buffer.toString(),b.getRemainingValue()):new Nn(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let h,x;do{let b=this.current.getPosition();if(this.current.isAlpha()?(x=this.parseAlphaBlock(),h=x.isFinished()):this.current.isIsoIec646()?(x=this.parseIsoIec646Block(),h=x.isFinished()):(x=this.parseNumericBlock(),h=x.isFinished()),!(b!==this.current.getPosition())&&!h)break}while(!h);return x.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let h=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(h.getNewPosition()),h.isFirstDigitFNC1()){let x;return h.isSecondDigitFNC1()?x=new Nn(this.current.getPosition(),this.buffer.toString()):x=new Nn(this.current.getPosition(),this.buffer.toString(),h.getSecondDigit()),new Lr(!0,x)}if(this.buffer.append(h.getFirstDigit()),h.isSecondDigitFNC1()){let x=new Nn(this.current.getPosition(),this.buffer.toString());return new Lr(!0,x)}this.buffer.append(h.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Lr(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let h=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(h.getNewPosition()),h.isFNC1()){let x=new Nn(this.current.getPosition(),this.buffer.toString());return new Lr(!0,x)}this.buffer.append(h.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Lr(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let h=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(h.getNewPosition()),h.isFNC1()){let x=new Nn(this.current.getPosition(),this.buffer.toString());return new Lr(!0,x)}this.buffer.append(h.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Lr(!1)}isStillIsoIec646(h){if(h+5>this.information.getSize())return!1;let x=this.extractNumericValueFromBitArray(h,5);if(x>=5&&x<16)return!0;if(h+7>this.information.getSize())return!1;let b=this.extractNumericValueFromBitArray(h,7);if(b>=64&&b<116)return!0;if(h+8>this.information.getSize())return!1;let _=this.extractNumericValueFromBitArray(h,8);return _>=232&&_<253}decodeIsoIec646(h){let x=this.extractNumericValueFromBitArray(h,5);if(x===15)return new Ir(h+5,Ir.FNC1);if(x>=5&&x<15)return new Ir(h+5,"0"+(x-5));let b=this.extractNumericValueFromBitArray(h,7);if(b>=64&&b<90)return new Ir(h+7,""+(b+1));if(b>=90&&b<116)return new Ir(h+7,""+(b+7));let _=this.extractNumericValueFromBitArray(h,8),j;switch(_){case 232:j="!";break;case 233:j='"';break;case 234:j="%";break;case 235:j="&";break;case 236:j="'";break;case 237:j="(";break;case 238:j=")";break;case 239:j="*";break;case 240:j="+";break;case 241:j=",";break;case 242:j="-";break;case 243:j=".";break;case 244:j="/";break;case 245:j=":";break;case 246:j=";";break;case 247:j="<";break;case 248:j="=";break;case 249:j=">";break;case 250:j="?";break;case 251:j="_";break;case 252:j=" ";break;default:throw new R}return new Ir(h+8,j)}isStillAlpha(h){if(h+5>this.information.getSize())return!1;let x=this.extractNumericValueFromBitArray(h,5);if(x>=5&&x<16)return!0;if(h+6>this.information.getSize())return!1;let b=this.extractNumericValueFromBitArray(h,6);return b>=16&&b<63}decodeAlphanumeric(h){let x=this.extractNumericValueFromBitArray(h,5);if(x===15)return new Ir(h+5,Ir.FNC1);if(x>=5&&x<15)return new Ir(h+5,"0"+(x-5));let b=this.extractNumericValueFromBitArray(h,6);if(b>=32&&b<58)return new Ir(h+6,""+(b+33));let _;switch(b){case 58:_="*";break;case 59:_=",";break;case 60:_="-";break;case 61:_=".";break;case 62:_="/";break;default:throw new ye("Decoding invalid alphanumeric value: "+b)}return new Ir(h+6,_)}isAlphaTo646ToAlphaLatch(h){if(h+1>this.information.getSize())return!1;for(let x=0;x<5&&x+h<this.information.getSize();++x)if(x===2){if(!this.information.get(h+2))return!1}else if(this.information.get(h+x))return!1;return!0}isAlphaOr646ToNumericLatch(h){if(h+3>this.information.getSize())return!1;for(let x=h;x<h+3;++x)if(this.information.get(x))return!1;return!0}isNumericToAlphaNumericLatch(h){if(h+1>this.information.getSize())return!1;for(let x=0;x<4&&x+h<this.information.getSize();++x)if(this.information.get(h+x))return!1;return!0}}class Ie{constructor(h){this.information=h,this.generalDecoder=new De(h)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class oe extends Ie{constructor(h){super(h)}encodeCompressedGtin(h,x){h.append("(01)");let b=h.length();h.append("9"),this.encodeCompressedGtinWithoutAI(h,x,b)}encodeCompressedGtinWithoutAI(h,x,b){for(let _=0;_<4;++_){let j=this.getGeneralDecoder().extractNumericValueFromBitArray(x+10*_,10);j/100===0&&h.append("0"),j/10===0&&h.append("0"),h.append(j)}oe.appendCheckDigit(h,b)}static appendCheckDigit(h,x){let b=0;for(let _=0;_<13;_++){let j=h.charAt(_+x).charCodeAt(0)-48;b+=(_&1)===0?3*j:j}b=10-b%10,b===10&&(b=0),h.append(b)}}oe.GTIN_SIZE=40;class ne extends oe{constructor(h){super(h)}parseInformation(){let h=new J;h.append("(01)");let x=h.length(),b=this.getGeneralDecoder().extractNumericValueFromBitArray(ne.HEADER_SIZE,4);return h.append(b),this.encodeCompressedGtinWithoutAI(h,ne.HEADER_SIZE+4,x),this.getGeneralDecoder().decodeAllCodes(h,ne.HEADER_SIZE+44)}}ne.HEADER_SIZE=4;class ze extends Ie{constructor(h){super(h)}parseInformation(){let h=new J;return this.getGeneralDecoder().decodeAllCodes(h,ze.HEADER_SIZE)}}ze.HEADER_SIZE=5;class st extends oe{constructor(h){super(h)}encodeCompressedWeight(h,x,b){let _=this.getGeneralDecoder().extractNumericValueFromBitArray(x,b);this.addWeightCode(h,_);let j=this.checkWeight(_),A=1e5;for(let I=0;I<5;++I)j/A===0&&h.append("0"),A/=10;h.append(j)}}class Ze extends st{constructor(h){super(h)}parseInformation(){if(this.getInformation().getSize()!=Ze.HEADER_SIZE+st.GTIN_SIZE+Ze.WEIGHT_SIZE)throw new se;let h=new J;return this.encodeCompressedGtin(h,Ze.HEADER_SIZE),this.encodeCompressedWeight(h,Ze.HEADER_SIZE+st.GTIN_SIZE,Ze.WEIGHT_SIZE),h.toString()}}Ze.HEADER_SIZE=5,Ze.WEIGHT_SIZE=15;class mt extends Ze{constructor(h){super(h)}addWeightCode(h,x){h.append("(3103)")}checkWeight(h){return h}}class ct extends Ze{constructor(h){super(h)}addWeightCode(h,x){x<1e4?h.append("(3202)"):h.append("(3203)")}checkWeight(h){return h<1e4?h:h-1e4}}class Rt extends oe{constructor(h){super(h)}parseInformation(){if(this.getInformation().getSize()<Rt.HEADER_SIZE+oe.GTIN_SIZE)throw new se;let h=new J;this.encodeCompressedGtin(h,Rt.HEADER_SIZE);let x=this.getGeneralDecoder().extractNumericValueFromBitArray(Rt.HEADER_SIZE+oe.GTIN_SIZE,Rt.LAST_DIGIT_SIZE);h.append("(392"),h.append(x),h.append(")");let b=this.getGeneralDecoder().decodeGeneralPurposeField(Rt.HEADER_SIZE+oe.GTIN_SIZE+Rt.LAST_DIGIT_SIZE,null);return h.append(b.getNewString()),h.toString()}}Rt.HEADER_SIZE=8,Rt.LAST_DIGIT_SIZE=2;class Xt extends oe{constructor(h){super(h)}parseInformation(){if(this.getInformation().getSize()<Xt.HEADER_SIZE+oe.GTIN_SIZE)throw new se;let h=new J;this.encodeCompressedGtin(h,Xt.HEADER_SIZE);let x=this.getGeneralDecoder().extractNumericValueFromBitArray(Xt.HEADER_SIZE+oe.GTIN_SIZE,Xt.LAST_DIGIT_SIZE);h.append("(393"),h.append(x),h.append(")");let b=this.getGeneralDecoder().extractNumericValueFromBitArray(Xt.HEADER_SIZE+oe.GTIN_SIZE+Xt.LAST_DIGIT_SIZE,Xt.FIRST_THREE_DIGITS_SIZE);b/100==0&&h.append("0"),b/10==0&&h.append("0"),h.append(b);let _=this.getGeneralDecoder().decodeGeneralPurposeField(Xt.HEADER_SIZE+oe.GTIN_SIZE+Xt.LAST_DIGIT_SIZE+Xt.FIRST_THREE_DIGITS_SIZE,null);return h.append(_.getNewString()),h.toString()}}Xt.HEADER_SIZE=8,Xt.LAST_DIGIT_SIZE=2,Xt.FIRST_THREE_DIGITS_SIZE=10;class Jt extends st{constructor(h,x,b){super(h),this.dateCode=b,this.firstAIdigits=x}parseInformation(){if(this.getInformation().getSize()!=Jt.HEADER_SIZE+Jt.GTIN_SIZE+Jt.WEIGHT_SIZE+Jt.DATE_SIZE)throw new se;let h=new J;return this.encodeCompressedGtin(h,Jt.HEADER_SIZE),this.encodeCompressedWeight(h,Jt.HEADER_SIZE+Jt.GTIN_SIZE,Jt.WEIGHT_SIZE),this.encodeCompressedDate(h,Jt.HEADER_SIZE+Jt.GTIN_SIZE+Jt.WEIGHT_SIZE),h.toString()}encodeCompressedDate(h,x){let b=this.getGeneralDecoder().extractNumericValueFromBitArray(x,Jt.DATE_SIZE);if(b==38400)return;h.append("("),h.append(this.dateCode),h.append(")");let _=b%32;b/=32;let j=b%12+1;b/=12;let A=b;A/10==0&&h.append("0"),h.append(A),j/10==0&&h.append("0"),h.append(j),_/10==0&&h.append("0"),h.append(_)}addWeightCode(h,x){h.append("("),h.append(this.firstAIdigits),h.append(x/1e5),h.append(")")}checkWeight(h){return h%1e5}}Jt.HEADER_SIZE=8,Jt.WEIGHT_SIZE=20,Jt.DATE_SIZE=16;function ir(pe){try{if(pe.get(1))return new ne(pe);if(!pe.get(2))return new ze(pe);switch(De.extractNumericValueFromBitArray(pe,1,4)){case 4:return new mt(pe);case 5:return new ct(pe)}switch(De.extractNumericValueFromBitArray(pe,1,5)){case 12:return new Rt(pe);case 13:return new Xt(pe)}switch(De.extractNumericValueFromBitArray(pe,1,7)){case 56:return new Jt(pe,"310","11");case 57:return new Jt(pe,"320","11");case 58:return new Jt(pe,"310","13");case 59:return new Jt(pe,"320","13");case 60:return new Jt(pe,"310","15");case 61:return new Jt(pe,"320","15");case 62:return new Jt(pe,"310","17");case 63:return new Jt(pe,"320","17")}}catch(h){throw console.log(h),new ye("unknown decoder: "+pe)}}class mr{constructor(h,x,b,_){this.leftchar=h,this.rightchar=x,this.finderpattern=b,this.maybeLast=_}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(h,x){return h instanceof mr?mr.equalsOrNull(h.leftchar,x.leftchar)&&mr.equalsOrNull(h.rightchar,x.rightchar)&&mr.equalsOrNull(h.finderpattern,x.finderpattern):!1}static equalsOrNull(h,x){return h===null?x===null:mr.equals(h,x)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class Sr{constructor(h,x,b){this.pairs=h,this.rowNumber=x,this.wasReversed=b}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(h){return this.checkEqualitity(this,h)}toString(){return"{ "+this.pairs+" }"}equals(h,x){return h instanceof Sr?this.checkEqualitity(h,x)&&h.wasReversed===x.wasReversed:!1}checkEqualitity(h,x){if(!h||!x)return;let b;return h.forEach((_,j)=>{x.forEach(A=>{_.getLeftChar().getValue()===A.getLeftChar().getValue()&&_.getRightChar().getValue()===A.getRightChar().getValue()&&_.getFinderPatter().getValue()===A.getFinderPatter().getValue()&&(b=!0)})}),b}}class Pt extends Zt{constructor(h){super(...arguments),this.pairs=new Array(Pt.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=h===!0}decodeRow(h,x,b){this.pairs.length=0,this.startFromEven=!1;try{return Pt.constructResult(this.decodeRow2pairs(h,x))}catch(_){this.verbose&&console.log(_)}return this.pairs.length=0,this.startFromEven=!0,Pt.constructResult(this.decodeRow2pairs(h,x))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(h,x){let b=!1;for(;!b;)try{this.pairs.push(this.retrieveNextPair(x,this.pairs,h))}catch(j){if(j instanceof se){if(!this.pairs.length)throw new se;b=!0}}if(this.checkChecksum())return this.pairs;let _;if(this.rows.length?_=!0:_=!1,this.storeRow(h,!1),_){let j=this.checkRowsBoolean(!1);if(j!=null||(j=this.checkRowsBoolean(!0),j!=null))return j}throw new se}checkRowsBoolean(h){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,h&&(this.rows=this.rows.reverse());let x=null;try{x=this.checkRows(new Array,0)}catch(b){this.verbose&&console.log(b)}return h&&(this.rows=this.rows.reverse()),x}checkRows(h,x){for(let b=x;b<this.rows.length;b++){let _=this.rows[b];this.pairs.length=0;for(let A of h)this.pairs.push(A.getPairs());if(this.pairs.push(_.getPairs()),!Pt.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let j=new Array(h);j.push(_);try{return this.checkRows(j,b+1)}catch(A){this.verbose&&console.log(A)}}throw new se}static isValidSequence(h){for(let x of Pt.FINDER_PATTERN_SEQUENCES){if(h.length>x.length)continue;let b=!0;for(let _=0;_<h.length;_++)if(h[_].getFinderPattern().getValue()!=x[_]){b=!1;break}if(b)return!0}return!1}storeRow(h,x){let b=0,_=!1,j=!1;for(;b<this.rows.length;){let A=this.rows[b];if(A.getRowNumber()>h){j=A.isEquivalent(this.pairs);break}_=A.isEquivalent(this.pairs),b++}j||_||Pt.isPartialRow(this.pairs,this.rows)||(this.rows.push(b,new Sr(this.pairs,h,x)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(h,x){for(let b of x)if(b.getPairs().length!==h.length){for(let _ of b.getPairs())for(let j of h)if(mr.equals(_,j))break}}static isPartialRow(h,x){for(let b of x){let _=!0;for(let j of h){let A=!1;for(let I of b.getPairs())if(j.equals(I)){A=!0;break}if(!A){_=!1;break}}if(_)return!0}return!1}getRows(){return this.rows}static constructResult(h){let x=qr.buildBitArray(h),_=ir(x).parseInformation(),j=h[0].getFinderPattern().getResultPoints(),A=h[h.length-1].getFinderPattern().getResultPoints(),I=[j[0],j[1],A[0],A[1]];return new Y(_,null,null,I,Q.RSS_EXPANDED,null)}checkChecksum(){let h=this.pairs.get(0),x=h.getLeftChar(),b=h.getRightChar();if(b==null)return!1;let _=b.getChecksumPortion(),j=2;for(let I=1;I<this.pairs.size();++I){let F=this.pairs.get(I);_+=F.getLeftChar().getChecksumPortion(),j++;let X=F.getRightChar();X!=null&&(_+=X.getChecksumPortion(),j++)}return _%=211,211*(j-4)+_==x.getValue()}static getNextSecondBar(h,x){let b;return h.get(x)?(b=h.getNextUnset(x),b=h.getNextSet(b)):(b=h.getNextSet(x),b=h.getNextUnset(b)),b}retrieveNextPair(h,x,b){let _=x.length%2==0;this.startFromEven&&(_=!_);let j,A=!0,I=-1;do this.findNextPair(h,x,I),j=this.parseFoundFinderPattern(h,b,_),j==null?I=Pt.getNextSecondBar(h,this.startEnd[0]):A=!1;while(A);let F=this.decodeDataCharacter(h,j,_,!0);if(!this.isEmptyPair(x)&&x[x.length-1].mustBeLast())throw new se;let X;try{X=this.decodeDataCharacter(h,j,_,!1)}catch(ce){X=null,this.verbose&&console.log(ce)}return new mr(F,X,j,!0)}isEmptyPair(h){return h.length===0}findNextPair(h,x,b){let _=this.getDecodeFinderCounters();_[0]=0,_[1]=0,_[2]=0,_[3]=0;let j=h.getSize(),A;b>=0?A=b:this.isEmptyPair(x)?A=0:A=x[x.length-1].getFinderPattern().getStartEnd()[1];let I=x.length%2!=0;this.startFromEven&&(I=!I);let F=!1;for(;A<j&&(F=!h.get(A),!!F);)A++;let X=0,ce=A;for(let ge=A;ge<j;ge++)if(h.get(ge)!=F)_[X]++;else{if(X==3){if(I&&Pt.reverseCounters(_),Pt.isFinderPattern(_)){this.startEnd[0]=ce,this.startEnd[1]=ge;return}I&&Pt.reverseCounters(_),ce+=_[0]+_[1],_[0]=_[2],_[1]=_[3],_[2]=0,_[3]=0,X--}else X++;_[X]=1,F=!F}throw new se}static reverseCounters(h){let x=h.length;for(let b=0;b<x/2;++b){let _=h[b];h[b]=h[x-b-1],h[x-b-1]=_}}parseFoundFinderPattern(h,x,b){let _,j,A;if(b){let X=this.startEnd[0]-1;for(;X>=0&&!h.get(X);)X--;X++,_=this.startEnd[0]-X,j=X,A=this.startEnd[1]}else j=this.startEnd[0],A=h.getNextUnset(this.startEnd[1]+1),_=A-this.startEnd[1];let I=this.getDecodeFinderCounters();w.arraycopy(I,0,I,1,I.length-1),I[0]=_;let F;try{F=this.parseFinderValue(I,Pt.FINDER_PATTERNS)}catch{return null}return new sr(F,[j,A],j,A,x)}decodeDataCharacter(h,x,b,_){let j=this.getDataCharacterCounters();for(let ja=0;ja<j.length;ja++)j[ja]=0;if(_)Pt.recordPatternInReverse(h,x.getStartEnd()[0],j);else{Pt.recordPattern(h,x.getStartEnd()[1],j);for(let ja=0,Ys=j.length-1;ja<Ys;ja++,Ys--){let ol=j[ja];j[ja]=j[Ys],j[Ys]=ol}}let A=17,I=nt.sum(new Int32Array(j))/A,F=(x.getStartEnd()[1]-x.getStartEnd()[0])/15;if(Math.abs(I-F)/F>.3)throw new se;let X=this.getOddCounts(),ce=this.getEvenCounts(),ge=this.getOddRoundingErrors(),Ae=this.getEvenRoundingErrors();for(let ja=0;ja<j.length;ja++){let Ys=1*j[ja]/I,ol=Ys+.5;if(ol<1){if(Ys<.3)throw new se;ol=1}else if(ol>8){if(Ys>8.7)throw new se;ol=8}let Cd=ja/2;(ja&1)==0?(X[Cd]=ol,ge[Cd]=Ys-ol):(ce[Cd]=ol,Ae[Cd]=Ys-ol)}this.adjustOddEvenCounts(A);let qe=4*x.getValue()+(b?0:2)+(_?0:1)-1,Ye=0,rt=0;for(let ja=X.length-1;ja>=0;ja--){if(Pt.isNotA1left(x,b,_)){let Ys=Pt.WEIGHTS[qe][2*ja];rt+=X[ja]*Ys}Ye+=X[ja]}let pt=0;for(let ja=ce.length-1;ja>=0;ja--)if(Pt.isNotA1left(x,b,_)){let Ys=Pt.WEIGHTS[qe][2*ja+1];pt+=ce[ja]*Ys}let St=rt+pt;if((Ye&1)!=0||Ye>13||Ye<4)throw new se;let zt=(13-Ye)/2,qt=Pt.SYMBOL_WIDEST[zt],Ft=9-qt,sn=Or.getRSSvalue(X,qt,!0),gn=Or.getRSSvalue(ce,Ft,!1),Ya=Pt.EVEN_TOTAL_SUBSET[zt],pi=Pt.GSUM[zt],Xs=sn*Ya+gn+pi;return new Pr(Xs,St)}static isNotA1left(h,x,b){return!(h.getValue()==0&&x&&b)}adjustOddEvenCounts(h){let x=nt.sum(new Int32Array(this.getOddCounts())),b=nt.sum(new Int32Array(this.getEvenCounts())),_=!1,j=!1;x>13?j=!0:x<4&&(_=!0);let A=!1,I=!1;b>13?I=!0:b<4&&(A=!0);let F=x+b-h,X=(x&1)==1,ce=(b&1)==0;if(F==1)if(X){if(ce)throw new se;j=!0}else{if(!ce)throw new se;I=!0}else if(F==-1)if(X){if(ce)throw new se;_=!0}else{if(!ce)throw new se;A=!0}else if(F==0){if(X){if(!ce)throw new se;x<b?(_=!0,I=!0):(j=!0,A=!0)}else if(ce)throw new se}else throw new se;if(_){if(j)throw new se;Pt.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(j&&Pt.decrement(this.getOddCounts(),this.getOddRoundingErrors()),A){if(I)throw new se;Pt.increment(this.getEvenCounts(),this.getOddRoundingErrors())}I&&Pt.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Pt.SYMBOL_WIDEST=[7,5,4,3,1],Pt.EVEN_TOTAL_SUBSET=[4,20,52,104,204],Pt.GSUM=[0,348,1388,2948,3988],Pt.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],Pt.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],Pt.FINDER_PAT_A=0,Pt.FINDER_PAT_B=1,Pt.FINDER_PAT_C=2,Pt.FINDER_PAT_D=3,Pt.FINDER_PAT_E=4,Pt.FINDER_PAT_F=5,Pt.FINDER_PATTERN_SEQUENCES=[[Pt.FINDER_PAT_A,Pt.FINDER_PAT_A],[Pt.FINDER_PAT_A,Pt.FINDER_PAT_B,Pt.FINDER_PAT_B],[Pt.FINDER_PAT_A,Pt.FINDER_PAT_C,Pt.FINDER_PAT_B,Pt.FINDER_PAT_D],[Pt.FINDER_PAT_A,Pt.FINDER_PAT_E,Pt.FINDER_PAT_B,Pt.FINDER_PAT_D,Pt.FINDER_PAT_C],[Pt.FINDER_PAT_A,Pt.FINDER_PAT_E,Pt.FINDER_PAT_B,Pt.FINDER_PAT_D,Pt.FINDER_PAT_D,Pt.FINDER_PAT_F],[Pt.FINDER_PAT_A,Pt.FINDER_PAT_E,Pt.FINDER_PAT_B,Pt.FINDER_PAT_D,Pt.FINDER_PAT_E,Pt.FINDER_PAT_F,Pt.FINDER_PAT_F],[Pt.FINDER_PAT_A,Pt.FINDER_PAT_A,Pt.FINDER_PAT_B,Pt.FINDER_PAT_B,Pt.FINDER_PAT_C,Pt.FINDER_PAT_C,Pt.FINDER_PAT_D,Pt.FINDER_PAT_D],[Pt.FINDER_PAT_A,Pt.FINDER_PAT_A,Pt.FINDER_PAT_B,Pt.FINDER_PAT_B,Pt.FINDER_PAT_C,Pt.FINDER_PAT_C,Pt.FINDER_PAT_D,Pt.FINDER_PAT_E,Pt.FINDER_PAT_E],[Pt.FINDER_PAT_A,Pt.FINDER_PAT_A,Pt.FINDER_PAT_B,Pt.FINDER_PAT_B,Pt.FINDER_PAT_C,Pt.FINDER_PAT_C,Pt.FINDER_PAT_D,Pt.FINDER_PAT_E,Pt.FINDER_PAT_F,Pt.FINDER_PAT_F],[Pt.FINDER_PAT_A,Pt.FINDER_PAT_A,Pt.FINDER_PAT_B,Pt.FINDER_PAT_B,Pt.FINDER_PAT_C,Pt.FINDER_PAT_D,Pt.FINDER_PAT_D,Pt.FINDER_PAT_E,Pt.FINDER_PAT_E,Pt.FINDER_PAT_F,Pt.FINDER_PAT_F]],Pt.MAX_PAIRS=11;class Un extends Pr{constructor(h,x,b){super(h,x),this.count=0,this.finderPattern=b}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class en extends Zt{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(h,x,b){const _=this.decodePair(x,!1,h,b);en.addOrTally(this.possibleLeftPairs,_),x.reverse();let j=this.decodePair(x,!0,h,b);en.addOrTally(this.possibleRightPairs,j),x.reverse();for(let A of this.possibleLeftPairs)if(A.getCount()>1){for(let I of this.possibleRightPairs)if(I.getCount()>1&&en.checkChecksum(A,I))return en.constructResult(A,I)}throw new se}static addOrTally(h,x){if(x==null)return;let b=!1;for(let _ of h)if(_.getValue()===x.getValue()){_.incrementCount(),b=!0;break}b||h.push(x)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(h,x){let b=4537077*h.getValue()+x.getValue(),_=new String(b).toString(),j=new J;for(let X=13-_.length;X>0;X--)j.append("0");j.append(_);let A=0;for(let X=0;X<13;X++){let ce=j.charAt(X).charCodeAt(0)-48;A+=(X&1)===0?3*ce:ce}A=10-A%10,A===10&&(A=0),j.append(A.toString());let I=h.getFinderPattern().getResultPoints(),F=x.getFinderPattern().getResultPoints();return new Y(j.toString(),null,0,[I[0],I[1],F[0],F[1]],Q.RSS_14,new Date().getTime())}static checkChecksum(h,x){let b=(h.getChecksumPortion()+16*x.getChecksumPortion())%79,_=9*h.getFinderPattern().getValue()+x.getFinderPattern().getValue();return _>72&&_--,_>8&&_--,b===_}decodePair(h,x,b,_){try{let j=this.findFinderPattern(h,x),A=this.parseFoundFinderPattern(h,b,x,j),I=_==null?null:_.get(W.NEED_RESULT_POINT_CALLBACK);if(I!=null){let ce=(j[0]+j[1])/2;x&&(ce=h.getSize()-1-ce),I.foundPossibleResultPoint(new We(ce,b))}let F=this.decodeDataCharacter(h,A,!0),X=this.decodeDataCharacter(h,A,!1);return new Un(1597*F.getValue()+X.getValue(),F.getChecksumPortion()+4*X.getChecksumPortion(),A)}catch{return null}}decodeDataCharacter(h,x,b){let _=this.getDataCharacterCounters();for(let pt=0;pt<_.length;pt++)_[pt]=0;if(b)ar.recordPatternInReverse(h,x.getStartEnd()[0],_);else{ar.recordPattern(h,x.getStartEnd()[1]+1,_);for(let pt=0,St=_.length-1;pt<St;pt++,St--){let zt=_[pt];_[pt]=_[St],_[St]=zt}}let j=b?16:15,A=nt.sum(new Int32Array(_))/j,I=this.getOddCounts(),F=this.getEvenCounts(),X=this.getOddRoundingErrors(),ce=this.getEvenRoundingErrors();for(let pt=0;pt<_.length;pt++){let St=_[pt]/A,zt=Math.floor(St+.5);zt<1?zt=1:zt>8&&(zt=8);let qt=Math.floor(pt/2);(pt&1)===0?(I[qt]=zt,X[qt]=St-zt):(F[qt]=zt,ce[qt]=St-zt)}this.adjustOddEvenCounts(b,j);let ge=0,Ae=0;for(let pt=I.length-1;pt>=0;pt--)Ae*=9,Ae+=I[pt],ge+=I[pt];let qe=0,Ye=0;for(let pt=F.length-1;pt>=0;pt--)qe*=9,qe+=F[pt],Ye+=F[pt];let rt=Ae+3*qe;if(b){if((ge&1)!==0||ge>12||ge<4)throw new se;let pt=(12-ge)/2,St=en.OUTSIDE_ODD_WIDEST[pt],zt=9-St,qt=Or.getRSSvalue(I,St,!1),Ft=Or.getRSSvalue(F,zt,!0),sn=en.OUTSIDE_EVEN_TOTAL_SUBSET[pt],gn=en.OUTSIDE_GSUM[pt];return new Pr(qt*sn+Ft+gn,rt)}else{if((Ye&1)!==0||Ye>10||Ye<4)throw new se;let pt=(10-Ye)/2,St=en.INSIDE_ODD_WIDEST[pt],zt=9-St,qt=Or.getRSSvalue(I,St,!0),Ft=Or.getRSSvalue(F,zt,!1),sn=en.INSIDE_ODD_TOTAL_SUBSET[pt],gn=en.INSIDE_GSUM[pt];return new Pr(Ft*sn+qt+gn,rt)}}findFinderPattern(h,x){let b=this.getDecodeFinderCounters();b[0]=0,b[1]=0,b[2]=0,b[3]=0;let _=h.getSize(),j=!1,A=0;for(;A<_&&(j=!h.get(A),x!==j);)A++;let I=0,F=A;for(let X=A;X<_;X++)if(h.get(X)!==j)b[I]++;else{if(I===3){if(Zt.isFinderPattern(b))return[F,X];F+=b[0]+b[1],b[0]=b[2],b[1]=b[3],b[2]=0,b[3]=0,I--}else I++;b[I]=1,j=!j}throw new se}parseFoundFinderPattern(h,x,b,_){let j=h.get(_[0]),A=_[0]-1;for(;A>=0&&j!==h.get(A);)A--;A++;const I=_[0]-A,F=this.getDecodeFinderCounters(),X=new Int32Array(F.length);w.arraycopy(F,0,X,1,F.length-1),X[0]=I;const ce=this.parseFinderValue(X,en.FINDER_PATTERNS);let ge=A,Ae=_[1];return b&&(ge=h.getSize()-1-ge,Ae=h.getSize()-1-Ae),new sr(ce,[A,_[1]],ge,Ae,x)}adjustOddEvenCounts(h,x){let b=nt.sum(new Int32Array(this.getOddCounts())),_=nt.sum(new Int32Array(this.getEvenCounts())),j=!1,A=!1,I=!1,F=!1;h?(b>12?A=!0:b<4&&(j=!0),_>12?F=!0:_<4&&(I=!0)):(b>11?A=!0:b<5&&(j=!0),_>10?F=!0:_<4&&(I=!0));let X=b+_-x,ce=(b&1)===(h?1:0),ge=(_&1)===1;if(X===1)if(ce){if(ge)throw new se;A=!0}else{if(!ge)throw new se;F=!0}else if(X===-1)if(ce){if(ge)throw new se;j=!0}else{if(!ge)throw new se;I=!0}else if(X===0){if(ce){if(!ge)throw new se;b<_?(j=!0,F=!0):(A=!0,I=!0)}else if(ge)throw new se}else throw new se;if(j){if(A)throw new se;Zt.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(A&&Zt.decrement(this.getOddCounts(),this.getOddRoundingErrors()),I){if(F)throw new se;Zt.increment(this.getEvenCounts(),this.getOddRoundingErrors())}F&&Zt.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}en.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],en.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],en.OUTSIDE_GSUM=[0,161,961,2015,2715],en.INSIDE_GSUM=[0,336,1036,1516],en.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],en.INSIDE_ODD_WIDEST=[2,4,6,8],en.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class Na extends ar{constructor(h,x){super(),this.readers=[],this.verbose=x===!0;const b=h?h.get(W.POSSIBLE_FORMATS):null,_=h&&h.get(W.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;b?((b.includes(Q.EAN_13)||b.includes(Q.UPC_A)||b.includes(Q.EAN_8)||b.includes(Q.UPC_E))&&this.readers.push(new Tr(h)),b.includes(Q.CODE_39)&&this.readers.push(new yr(_)),b.includes(Q.CODE_128)&&this.readers.push(new xt),b.includes(Q.ITF)&&this.readers.push(new Ge),b.includes(Q.RSS_14)&&this.readers.push(new en),b.includes(Q.RSS_EXPANDED)&&this.readers.push(new Pt(this.verbose))):(this.readers.push(new Tr(h)),this.readers.push(new yr),this.readers.push(new Tr(h)),this.readers.push(new xt),this.readers.push(new Ge),this.readers.push(new en),this.readers.push(new Pt(this.verbose)))}decodeRow(h,x,b){for(let _=0;_<this.readers.length;_++)try{return this.readers[_].decodeRow(h,x,b)}catch{}throw new se}reset(){this.readers.forEach(h=>h.reset())}}class Ci extends ee{constructor(h=500,x){super(new Na(x),h,x)}}class tn{constructor(h,x,b){this.ecCodewords=h,this.ecBlocks=[x],b&&this.ecBlocks.push(b)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class an{constructor(h,x){this.count=h,this.dataCodewords=x}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class On{constructor(h,x,b,_,j,A){this.versionNumber=h,this.symbolSizeRows=x,this.symbolSizeColumns=b,this.dataRegionSizeRows=_,this.dataRegionSizeColumns=j,this.ecBlocks=A;let I=0;const F=A.getECCodewords(),X=A.getECBlocks();for(let ce of X)I+=ce.getCount()*(ce.getDataCodewords()+F);this.totalCodewords=I}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(h,x){if((h&1)!==0||(x&1)!==0)throw new R;for(let b of On.VERSIONS)if(b.symbolSizeRows===h&&b.symbolSizeColumns===x)return b;throw new R}toString(){return""+this.versionNumber}static buildVersions(){return[new On(1,10,10,8,8,new tn(5,new an(1,3))),new On(2,12,12,10,10,new tn(7,new an(1,5))),new On(3,14,14,12,12,new tn(10,new an(1,8))),new On(4,16,16,14,14,new tn(12,new an(1,12))),new On(5,18,18,16,16,new tn(14,new an(1,18))),new On(6,20,20,18,18,new tn(18,new an(1,22))),new On(7,22,22,20,20,new tn(20,new an(1,30))),new On(8,24,24,22,22,new tn(24,new an(1,36))),new On(9,26,26,24,24,new tn(28,new an(1,44))),new On(10,32,32,14,14,new tn(36,new an(1,62))),new On(11,36,36,16,16,new tn(42,new an(1,86))),new On(12,40,40,18,18,new tn(48,new an(1,114))),new On(13,44,44,20,20,new tn(56,new an(1,144))),new On(14,48,48,22,22,new tn(68,new an(1,174))),new On(15,52,52,24,24,new tn(42,new an(2,102))),new On(16,64,64,14,14,new tn(56,new an(2,140))),new On(17,72,72,16,16,new tn(36,new an(4,92))),new On(18,80,80,18,18,new tn(48,new an(4,114))),new On(19,88,88,20,20,new tn(56,new an(4,144))),new On(20,96,96,22,22,new tn(68,new an(4,174))),new On(21,104,104,24,24,new tn(56,new an(6,136))),new On(22,120,120,18,18,new tn(68,new an(6,175))),new On(23,132,132,20,20,new tn(62,new an(8,163))),new On(24,144,144,22,22,new tn(62,new an(8,156),new an(2,155))),new On(25,8,18,6,16,new tn(7,new an(1,5))),new On(26,8,32,6,14,new tn(11,new an(1,10))),new On(27,12,26,10,24,new tn(14,new an(1,16))),new On(28,12,36,10,16,new tn(18,new an(1,22))),new On(29,16,36,14,16,new tn(24,new an(1,32))),new On(30,16,48,14,22,new tn(28,new an(1,49)))]}}On.VERSIONS=On.buildVersions();class ss{constructor(h){const x=h.getHeight();if(x<8||x>144||(x&1)!==0)throw new R;this.version=ss.readVersion(h),this.mappingBitMatrix=this.extractDataRegion(h),this.readMappingMatrix=new ae(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(h){const x=h.getHeight(),b=h.getWidth();return On.getVersionForDimensions(x,b)}readCodewords(){const h=new Int8Array(this.version.getTotalCodewords());let x=0,b=4,_=0;const j=this.mappingBitMatrix.getHeight(),A=this.mappingBitMatrix.getWidth();let I=!1,F=!1,X=!1,ce=!1;do if(b===j&&_===0&&!I)h[x++]=this.readCorner1(j,A)&255,b-=2,_+=2,I=!0;else if(b===j-2&&_===0&&(A&3)!==0&&!F)h[x++]=this.readCorner2(j,A)&255,b-=2,_+=2,F=!0;else if(b===j+4&&_===2&&(A&7)===0&&!X)h[x++]=this.readCorner3(j,A)&255,b-=2,_+=2,X=!0;else if(b===j-2&&_===0&&(A&7)===4&&!ce)h[x++]=this.readCorner4(j,A)&255,b-=2,_+=2,ce=!0;else{do b<j&&_>=0&&!this.readMappingMatrix.get(_,b)&&(h[x++]=this.readUtah(b,_,j,A)&255),b-=2,_+=2;while(b>=0&&_<A);b+=1,_+=3;do b>=0&&_<A&&!this.readMappingMatrix.get(_,b)&&(h[x++]=this.readUtah(b,_,j,A)&255),b+=2,_-=2;while(b<j&&_>=0);b+=3,_+=1}while(b<j||_<A);if(x!==this.version.getTotalCodewords())throw new R;return h}readModule(h,x,b,_){return h<0&&(h+=b,x+=4-(b+4&7)),x<0&&(x+=_,h+=4-(_+4&7)),this.readMappingMatrix.set(x,h),this.mappingBitMatrix.get(x,h)}readUtah(h,x,b,_){let j=0;return this.readModule(h-2,x-2,b,_)&&(j|=1),j<<=1,this.readModule(h-2,x-1,b,_)&&(j|=1),j<<=1,this.readModule(h-1,x-2,b,_)&&(j|=1),j<<=1,this.readModule(h-1,x-1,b,_)&&(j|=1),j<<=1,this.readModule(h-1,x,b,_)&&(j|=1),j<<=1,this.readModule(h,x-2,b,_)&&(j|=1),j<<=1,this.readModule(h,x-1,b,_)&&(j|=1),j<<=1,this.readModule(h,x,b,_)&&(j|=1),j}readCorner1(h,x){let b=0;return this.readModule(h-1,0,h,x)&&(b|=1),b<<=1,this.readModule(h-1,1,h,x)&&(b|=1),b<<=1,this.readModule(h-1,2,h,x)&&(b|=1),b<<=1,this.readModule(0,x-2,h,x)&&(b|=1),b<<=1,this.readModule(0,x-1,h,x)&&(b|=1),b<<=1,this.readModule(1,x-1,h,x)&&(b|=1),b<<=1,this.readModule(2,x-1,h,x)&&(b|=1),b<<=1,this.readModule(3,x-1,h,x)&&(b|=1),b}readCorner2(h,x){let b=0;return this.readModule(h-3,0,h,x)&&(b|=1),b<<=1,this.readModule(h-2,0,h,x)&&(b|=1),b<<=1,this.readModule(h-1,0,h,x)&&(b|=1),b<<=1,this.readModule(0,x-4,h,x)&&(b|=1),b<<=1,this.readModule(0,x-3,h,x)&&(b|=1),b<<=1,this.readModule(0,x-2,h,x)&&(b|=1),b<<=1,this.readModule(0,x-1,h,x)&&(b|=1),b<<=1,this.readModule(1,x-1,h,x)&&(b|=1),b}readCorner3(h,x){let b=0;return this.readModule(h-1,0,h,x)&&(b|=1),b<<=1,this.readModule(h-1,x-1,h,x)&&(b|=1),b<<=1,this.readModule(0,x-3,h,x)&&(b|=1),b<<=1,this.readModule(0,x-2,h,x)&&(b|=1),b<<=1,this.readModule(0,x-1,h,x)&&(b|=1),b<<=1,this.readModule(1,x-3,h,x)&&(b|=1),b<<=1,this.readModule(1,x-2,h,x)&&(b|=1),b<<=1,this.readModule(1,x-1,h,x)&&(b|=1),b}readCorner4(h,x){let b=0;return this.readModule(h-3,0,h,x)&&(b|=1),b<<=1,this.readModule(h-2,0,h,x)&&(b|=1),b<<=1,this.readModule(h-1,0,h,x)&&(b|=1),b<<=1,this.readModule(0,x-2,h,x)&&(b|=1),b<<=1,this.readModule(0,x-1,h,x)&&(b|=1),b<<=1,this.readModule(1,x-1,h,x)&&(b|=1),b<<=1,this.readModule(2,x-1,h,x)&&(b|=1),b<<=1,this.readModule(3,x-1,h,x)&&(b|=1),b}extractDataRegion(h){const x=this.version.getSymbolSizeRows(),b=this.version.getSymbolSizeColumns();if(h.getHeight()!==x)throw new p("Dimension of bitMatrix must match the version size");const _=this.version.getDataRegionSizeRows(),j=this.version.getDataRegionSizeColumns(),A=x/_|0,I=b/j|0,F=A*_,X=I*j,ce=new ae(X,F);for(let ge=0;ge<A;++ge){const Ae=ge*_;for(let qe=0;qe<I;++qe){const Ye=qe*j;for(let rt=0;rt<_;++rt){const pt=ge*(_+2)+1+rt,St=Ae+rt;for(let zt=0;zt<j;++zt){const qt=qe*(j+2)+1+zt;if(h.get(qt,pt)){const Ft=Ye+zt;ce.set(Ft,St)}}}}}return ce}}class To{constructor(h,x){this.numDataCodewords=h,this.codewords=x}static getDataBlocks(h,x){const b=x.getECBlocks();let _=0;const j=b.getECBlocks();for(let rt of j)_+=rt.getCount();const A=new Array(_);let I=0;for(let rt of j)for(let pt=0;pt<rt.getCount();pt++){const St=rt.getDataCodewords(),zt=b.getECCodewords()+St;A[I++]=new To(St,new Uint8Array(zt))}const X=A[0].codewords.length-b.getECCodewords(),ce=X-1;let ge=0;for(let rt=0;rt<ce;rt++)for(let pt=0;pt<I;pt++)A[pt].codewords[rt]=h[ge++];const Ae=x.getVersionNumber()===24,qe=Ae?8:I;for(let rt=0;rt<qe;rt++)A[rt].codewords[X-1]=h[ge++];const Ye=A[0].codewords.length;for(let rt=X;rt<Ye;rt++)for(let pt=0;pt<I;pt++){const St=Ae?(pt+8)%I:pt,zt=Ae&&St>7?rt-1:rt;A[St].codewords[zt]=h[ge++]}if(ge!==h.length)throw new p;return A}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class cn{constructor(h){this.bytes=h,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(h){if(h<1||h>32||h>this.available())throw new p(""+h);let x=0,b=this.bitOffset,_=this.byteOffset;const j=this.bytes;if(b>0){const A=8-b,I=h<A?h:A,F=A-I,X=255>>8-I<<F;x=(j[_]&X)>>F,h-=I,b+=I,b===8&&(b=0,_++)}if(h>0){for(;h>=8;)x=x<<8|j[_]&255,_++,h-=8;if(h>0){const A=8-h,I=255>>A<<A;x=x<<h|(j[_]&I)>>A,b+=h}}return this.bitOffset=b,this.byteOffset=_,x}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var ta;(function(pe){pe[pe.PAD_ENCODE=0]="PAD_ENCODE",pe[pe.ASCII_ENCODE=1]="ASCII_ENCODE",pe[pe.C40_ENCODE=2]="C40_ENCODE",pe[pe.TEXT_ENCODE=3]="TEXT_ENCODE",pe[pe.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",pe[pe.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",pe[pe.BASE256_ENCODE=6]="BASE256_ENCODE"})(ta||(ta={}));class rl{static decode(h){const x=new cn(h),b=new J,_=new J,j=new Array;let A=ta.ASCII_ENCODE;do if(A===ta.ASCII_ENCODE)A=this.decodeAsciiSegment(x,b,_);else{switch(A){case ta.C40_ENCODE:this.decodeC40Segment(x,b);break;case ta.TEXT_ENCODE:this.decodeTextSegment(x,b);break;case ta.ANSIX12_ENCODE:this.decodeAnsiX12Segment(x,b);break;case ta.EDIFACT_ENCODE:this.decodeEdifactSegment(x,b);break;case ta.BASE256_ENCODE:this.decodeBase256Segment(x,b,j);break;default:throw new R}A=ta.ASCII_ENCODE}while(A!==ta.PAD_ENCODE&&x.available()>0);return _.length()>0&&b.append(_.toString()),new ie(h,b.toString(),j.length===0?null:j,null)}static decodeAsciiSegment(h,x,b){let _=!1;do{let j=h.readBits(8);if(j===0)throw new R;if(j<=128)return _&&(j+=128),x.append(String.fromCharCode(j-1)),ta.ASCII_ENCODE;if(j===129)return ta.PAD_ENCODE;if(j<=229){const A=j-130;A<10&&x.append("0"),x.append(""+A)}else switch(j){case 230:return ta.C40_ENCODE;case 231:return ta.BASE256_ENCODE;case 232:x.append("");break;case 233:case 234:break;case 235:_=!0;break;case 236:x.append("[)>05"),b.insert(0,"");break;case 237:x.append("[)>06"),b.insert(0,"");break;case 238:return ta.ANSIX12_ENCODE;case 239:return ta.TEXT_ENCODE;case 240:return ta.EDIFACT_ENCODE;case 241:break;default:if(j!==254||h.available()!==0)throw new R;break}}while(h.available()>0);return ta.ASCII_ENCODE}static decodeC40Segment(h,x){let b=!1;const _=[];let j=0;do{if(h.available()===8)return;const A=h.readBits(8);if(A===254)return;this.parseTwoBytes(A,h.readBits(8),_);for(let I=0;I<3;I++){const F=_[I];switch(j){case 0:if(F<3)j=F+1;else if(F<this.C40_BASIC_SET_CHARS.length){const X=this.C40_BASIC_SET_CHARS[F];b?(x.append(String.fromCharCode(X.charCodeAt(0)+128)),b=!1):x.append(X)}else throw new R;break;case 1:b?(x.append(String.fromCharCode(F+128)),b=!1):x.append(String.fromCharCode(F)),j=0;break;case 2:if(F<this.C40_SHIFT2_SET_CHARS.length){const X=this.C40_SHIFT2_SET_CHARS[F];b?(x.append(String.fromCharCode(X.charCodeAt(0)+128)),b=!1):x.append(X)}else switch(F){case 27:x.append("");break;case 30:b=!0;break;default:throw new R}j=0;break;case 3:b?(x.append(String.fromCharCode(F+224)),b=!1):x.append(String.fromCharCode(F+96)),j=0;break;default:throw new R}}}while(h.available()>0)}static decodeTextSegment(h,x){let b=!1,_=[],j=0;do{if(h.available()===8)return;const A=h.readBits(8);if(A===254)return;this.parseTwoBytes(A,h.readBits(8),_);for(let I=0;I<3;I++){const F=_[I];switch(j){case 0:if(F<3)j=F+1;else if(F<this.TEXT_BASIC_SET_CHARS.length){const X=this.TEXT_BASIC_SET_CHARS[F];b?(x.append(String.fromCharCode(X.charCodeAt(0)+128)),b=!1):x.append(X)}else throw new R;break;case 1:b?(x.append(String.fromCharCode(F+128)),b=!1):x.append(String.fromCharCode(F)),j=0;break;case 2:if(F<this.TEXT_SHIFT2_SET_CHARS.length){const X=this.TEXT_SHIFT2_SET_CHARS[F];b?(x.append(String.fromCharCode(X.charCodeAt(0)+128)),b=!1):x.append(X)}else switch(F){case 27:x.append("");break;case 30:b=!0;break;default:throw new R}j=0;break;case 3:if(F<this.TEXT_SHIFT3_SET_CHARS.length){const X=this.TEXT_SHIFT3_SET_CHARS[F];b?(x.append(String.fromCharCode(X.charCodeAt(0)+128)),b=!1):x.append(X),j=0}else throw new R;break;default:throw new R}}}while(h.available()>0)}static decodeAnsiX12Segment(h,x){const b=[];do{if(h.available()===8)return;const _=h.readBits(8);if(_===254)return;this.parseTwoBytes(_,h.readBits(8),b);for(let j=0;j<3;j++){const A=b[j];switch(A){case 0:x.append("\r");break;case 1:x.append("*");break;case 2:x.append(">");break;case 3:x.append(" ");break;default:if(A<14)x.append(String.fromCharCode(A+44));else if(A<40)x.append(String.fromCharCode(A+51));else throw new R;break}}}while(h.available()>0)}static parseTwoBytes(h,x,b){let _=(h<<8)+x-1,j=Math.floor(_/1600);b[0]=j,_-=j*1600,j=Math.floor(_/40),b[1]=j,b[2]=_-j*40}static decodeEdifactSegment(h,x){do{if(h.available()<=16)return;for(let b=0;b<4;b++){let _=h.readBits(6);if(_===31){const j=8-h.getBitOffset();j!==8&&h.readBits(j);return}(_&32)===0&&(_|=64),x.append(String.fromCharCode(_))}}while(h.available()>0)}static decodeBase256Segment(h,x,b){let _=1+h.getByteOffset();const j=this.unrandomize255State(h.readBits(8),_++);let A;if(j===0?A=h.available()/8|0:j<250?A=j:A=250*(j-249)+this.unrandomize255State(h.readBits(8),_++),A<0)throw new R;const I=new Uint8Array(A);for(let F=0;F<A;F++){if(h.available()<8)throw new R;I[F]=this.unrandomize255State(h.readBits(8),_++)}b.push(I);try{x.append(H.decode(I,K.ISO88591))}catch(F){throw new ye("Platform does not support required encoding: "+F.message)}}static unrandomize255State(h,x){const b=149*x%255+1,_=h-b;return _>=0?_:_+256}}rl.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],rl.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],rl.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],rl.TEXT_SHIFT2_SET_CHARS=rl.C40_SHIFT2_SET_CHARS,rl.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class lo{constructor(){this.rsDecoder=new at(Ee.DATA_MATRIX_FIELD_256)}decode(h){const x=new ss(h),b=x.getVersion(),_=x.readCodewords(),j=To.getDataBlocks(_,b);let A=0;for(let X of j)A+=X.getNumDataCodewords();const I=new Uint8Array(A),F=j.length;for(let X=0;X<F;X++){const ce=j[X],ge=ce.getCodewords(),Ae=ce.getNumDataCodewords();this.correctErrors(ge,Ae);for(let qe=0;qe<Ae;qe++)I[qe*F+X]=ge[qe]}return rl.decode(I)}correctErrors(h,x){const b=new Int32Array(h);try{this.rsDecoder.decode(b,h.length-x)}catch{throw new g}for(let _=0;_<x;_++)h[_]=b[_]}}class pa{constructor(h){this.image=h,this.rectangleDetector=new fr(this.image)}detect(){const h=this.rectangleDetector.detect();let x=this.detectSolid1(h);if(x=this.detectSolid2(x),x[3]=this.correctTopRight(x),!x[3])throw new se;x=this.shiftToModuleCenter(x);const b=x[0],_=x[1],j=x[2],A=x[3];let I=this.transitionsBetween(b,A)+1,F=this.transitionsBetween(j,A)+1;(I&1)===1&&(I+=1),(F&1)===1&&(F+=1),4*I<7*F&&4*F<7*I&&(I=F=Math.max(I,F));let X=pa.sampleGrid(this.image,b,_,j,A,I,F);return new Kt(X,[b,_,j,A])}static shiftPoint(h,x,b){let _=(x.getX()-h.getX())/(b+1),j=(x.getY()-h.getY())/(b+1);return new We(h.getX()+_,h.getY()+j)}static moveAway(h,x,b){let _=h.getX(),j=h.getY();return _<x?_-=1:_+=1,j<b?j-=1:j+=1,new We(_,j)}detectSolid1(h){let x=h[0],b=h[1],_=h[3],j=h[2],A=this.transitionsBetween(x,b),I=this.transitionsBetween(b,_),F=this.transitionsBetween(_,j),X=this.transitionsBetween(j,x),ce=A,ge=[j,x,b,_];return ce>I&&(ce=I,ge[0]=x,ge[1]=b,ge[2]=_,ge[3]=j),ce>F&&(ce=F,ge[0]=b,ge[1]=_,ge[2]=j,ge[3]=x),ce>X&&(ge[0]=_,ge[1]=j,ge[2]=x,ge[3]=b),ge}detectSolid2(h){let x=h[0],b=h[1],_=h[2],j=h[3],A=this.transitionsBetween(x,j),I=pa.shiftPoint(b,_,(A+1)*4),F=pa.shiftPoint(_,b,(A+1)*4),X=this.transitionsBetween(I,x),ce=this.transitionsBetween(F,j);return X<ce?(h[0]=x,h[1]=b,h[2]=_,h[3]=j):(h[0]=b,h[1]=_,h[2]=j,h[3]=x),h}correctTopRight(h){let x=h[0],b=h[1],_=h[2],j=h[3],A=this.transitionsBetween(x,j),I=this.transitionsBetween(b,j),F=pa.shiftPoint(x,b,(I+1)*4),X=pa.shiftPoint(_,b,(A+1)*4);A=this.transitionsBetween(F,j),I=this.transitionsBetween(X,j);let ce=new We(j.getX()+(_.getX()-b.getX())/(A+1),j.getY()+(_.getY()-b.getY())/(A+1)),ge=new We(j.getX()+(x.getX()-b.getX())/(I+1),j.getY()+(x.getY()-b.getY())/(I+1));if(!this.isValid(ce))return this.isValid(ge)?ge:null;if(!this.isValid(ge))return ce;let Ae=this.transitionsBetween(F,ce)+this.transitionsBetween(X,ce),qe=this.transitionsBetween(F,ge)+this.transitionsBetween(X,ge);return Ae>qe?ce:ge}shiftToModuleCenter(h){let x=h[0],b=h[1],_=h[2],j=h[3],A=this.transitionsBetween(x,j)+1,I=this.transitionsBetween(_,j)+1,F=pa.shiftPoint(x,b,I*4),X=pa.shiftPoint(_,b,A*4);A=this.transitionsBetween(F,j)+1,I=this.transitionsBetween(X,j)+1,(A&1)===1&&(A+=1),(I&1)===1&&(I+=1);let ce=(x.getX()+b.getX()+_.getX()+j.getX())/4,ge=(x.getY()+b.getY()+_.getY()+j.getY())/4;x=pa.moveAway(x,ce,ge),b=pa.moveAway(b,ce,ge),_=pa.moveAway(_,ce,ge),j=pa.moveAway(j,ce,ge);let Ae,qe;return F=pa.shiftPoint(x,b,I*4),F=pa.shiftPoint(F,j,A*4),Ae=pa.shiftPoint(b,x,I*4),Ae=pa.shiftPoint(Ae,_,A*4),X=pa.shiftPoint(_,j,I*4),X=pa.shiftPoint(X,b,A*4),qe=pa.shiftPoint(j,_,I*4),qe=pa.shiftPoint(qe,x,A*4),[F,Ae,X,qe]}isValid(h){return h.getX()>=0&&h.getX()<this.image.getWidth()&&h.getY()>0&&h.getY()<this.image.getHeight()}static sampleGrid(h,x,b,_,j,A,I){return rr.getInstance().sampleGrid(h,A,I,.5,.5,A-.5,.5,A-.5,I-.5,.5,I-.5,x.getX(),x.getY(),j.getX(),j.getY(),_.getX(),_.getY(),b.getX(),b.getY())}transitionsBetween(h,x){let b=Math.trunc(h.getX()),_=Math.trunc(h.getY()),j=Math.trunc(x.getX()),A=Math.trunc(x.getY()),I=Math.abs(A-_)>Math.abs(j-b);if(I){let rt=b;b=_,_=rt,rt=j,j=A,A=rt}let F=Math.abs(j-b),X=Math.abs(A-_),ce=-F/2,ge=_<A?1:-1,Ae=b<j?1:-1,qe=0,Ye=this.image.get(I?_:b,I?b:_);for(let rt=b,pt=_;rt!==j;rt+=Ae){let St=this.image.get(I?pt:rt,I?rt:pt);if(St!==Ye&&(qe++,Ye=St),ce+=X,ce>0){if(pt===A)break;pt+=ge,ce-=F}}return qe}}class Je{constructor(){this.decoder=new lo}decode(h,x=null){let b,_;if(x!=null&&x.has(W.PURE_BARCODE)){const X=Je.extractPureBits(h.getBlackMatrix());b=this.decoder.decode(X),_=Je.NO_POINTS}else{const X=new pa(h.getBlackMatrix()).detect();b=this.decoder.decode(X.getBits()),_=X.getPoints()}const j=b.getRawBytes(),A=new Y(b.getText(),j,8*j.length,_,Q.DATA_MATRIX,w.currentTimeMillis()),I=b.getByteSegments();I!=null&&A.putMetadata(me.BYTE_SEGMENTS,I);const F=b.getECLevel();return F!=null&&A.putMetadata(me.ERROR_CORRECTION_LEVEL,F),A}reset(){}static extractPureBits(h){const x=h.getTopLeftOnBit(),b=h.getBottomRightOnBit();if(x==null||b==null)throw new se;const _=this.moduleSize(x,h);let j=x[1];const A=b[1];let I=x[0];const X=(b[0]-I+1)/_,ce=(A-j+1)/_;if(X<=0||ce<=0)throw new se;const ge=_/2;j+=ge,I+=ge;const Ae=new ae(X,ce);for(let qe=0;qe<ce;qe++){const Ye=j+qe*_;for(let rt=0;rt<X;rt++)h.get(I+rt*_,Ye)&&Ae.set(rt,qe)}return Ae}static moduleSize(h,x){const b=x.getWidth();let _=h[0];const j=h[1];for(;_<b&&x.get(_,j);)_++;if(_===b)throw new se;const A=_-h[0];if(A===0)throw new se;return A}}Je.NO_POINTS=[];class dr extends ee{constructor(h=500){super(new Je,h)}}var kr;(function(pe){pe[pe.L=0]="L",pe[pe.M=1]="M",pe[pe.Q=2]="Q",pe[pe.H=3]="H"})(kr||(kr={}));class pr{constructor(h,x,b){this.value=h,this.stringValue=x,this.bits=b,pr.FOR_BITS.set(b,this),pr.FOR_VALUE.set(h,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(h){switch(h){case"L":return pr.L;case"M":return pr.M;case"Q":return pr.Q;case"H":return pr.H;default:throw new f(h+"not available")}}toString(){return this.stringValue}equals(h){if(!(h instanceof pr))return!1;const x=h;return this.value===x.value}static forBits(h){if(h<0||h>=pr.FOR_BITS.size)throw new p;return pr.FOR_BITS.get(h)}}pr.FOR_BITS=new Map,pr.FOR_VALUE=new Map,pr.L=new pr(kr.L,"L",1),pr.M=new pr(kr.M,"M",0),pr.Q=new pr(kr.Q,"Q",3),pr.H=new pr(kr.H,"H",2);class dn{constructor(h){this.errorCorrectionLevel=pr.forBits(h>>3&3),this.dataMask=h&7}static numBitsDiffering(h,x){return E.bitCount(h^x)}static decodeFormatInformation(h,x){const b=dn.doDecodeFormatInformation(h,x);return b!==null?b:dn.doDecodeFormatInformation(h^dn.FORMAT_INFO_MASK_QR,x^dn.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(h,x){let b=Number.MAX_SAFE_INTEGER,_=0;for(const j of dn.FORMAT_INFO_DECODE_LOOKUP){const A=j[0];if(A===h||A===x)return new dn(j[1]);let I=dn.numBitsDiffering(h,A);I<b&&(_=j[1],b=I),h!==x&&(I=dn.numBitsDiffering(x,A),I<b&&(_=j[1],b=I))}return b<=3?new dn(_):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(h){if(!(h instanceof dn))return!1;const x=h;return this.errorCorrectionLevel===x.errorCorrectionLevel&&this.dataMask===x.dataMask}}dn.FORMAT_INFO_MASK_QR=21522,dn.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class ht{constructor(h,...x){this.ecCodewordsPerBlock=h,this.ecBlocks=x}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let h=0;const x=this.ecBlocks;for(const b of x)h+=b.getCount();return h}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class Be{constructor(h,x){this.count=h,this.dataCodewords=x}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class vr{constructor(h,x,...b){this.versionNumber=h,this.alignmentPatternCenters=x,this.ecBlocks=b;let _=0;const j=b[0].getECCodewordsPerBlock(),A=b[0].getECBlocks();for(const I of A)_+=I.getCount()*(I.getDataCodewords()+j);this.totalCodewords=_}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(h){return this.ecBlocks[h.getValue()]}static getProvisionalVersionForDimension(h){if(h%4!==1)throw new R;try{return this.getVersionForNumber((h-17)/4)}catch{throw new R}}static getVersionForNumber(h){if(h<1||h>40)throw new p;return vr.VERSIONS[h-1]}static decodeVersionInformation(h){let x=Number.MAX_SAFE_INTEGER,b=0;for(let _=0;_<vr.VERSION_DECODE_INFO.length;_++){const j=vr.VERSION_DECODE_INFO[_];if(j===h)return vr.getVersionForNumber(_+7);const A=dn.numBitsDiffering(h,j);A<x&&(b=_+7,x=A)}return x<=3?vr.getVersionForNumber(b):null}buildFunctionPattern(){const h=this.getDimensionForVersion(),x=new ae(h);x.setRegion(0,0,9,9),x.setRegion(h-8,0,8,9),x.setRegion(0,h-8,9,8);const b=this.alignmentPatternCenters.length;for(let _=0;_<b;_++){const j=this.alignmentPatternCenters[_]-2;for(let A=0;A<b;A++)_===0&&(A===0||A===b-1)||_===b-1&&A===0||x.setRegion(this.alignmentPatternCenters[A]-2,j,5,5)}return x.setRegion(6,9,1,h-17),x.setRegion(9,6,h-17,1),this.versionNumber>6&&(x.setRegion(h-11,0,3,6),x.setRegion(0,h-11,6,3)),x}toString(){return""+this.versionNumber}}vr.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),vr.VERSIONS=[new vr(1,new Int32Array(0),new ht(7,new Be(1,19)),new ht(10,new Be(1,16)),new ht(13,new Be(1,13)),new ht(17,new Be(1,9))),new vr(2,Int32Array.from([6,18]),new ht(10,new Be(1,34)),new ht(16,new Be(1,28)),new ht(22,new Be(1,22)),new ht(28,new Be(1,16))),new vr(3,Int32Array.from([6,22]),new ht(15,new Be(1,55)),new ht(26,new Be(1,44)),new ht(18,new Be(2,17)),new ht(22,new Be(2,13))),new vr(4,Int32Array.from([6,26]),new ht(20,new Be(1,80)),new ht(18,new Be(2,32)),new ht(26,new Be(2,24)),new ht(16,new Be(4,9))),new vr(5,Int32Array.from([6,30]),new ht(26,new Be(1,108)),new ht(24,new Be(2,43)),new ht(18,new Be(2,15),new Be(2,16)),new ht(22,new Be(2,11),new Be(2,12))),new vr(6,Int32Array.from([6,34]),new ht(18,new Be(2,68)),new ht(16,new Be(4,27)),new ht(24,new Be(4,19)),new ht(28,new Be(4,15))),new vr(7,Int32Array.from([6,22,38]),new ht(20,new Be(2,78)),new ht(18,new Be(4,31)),new ht(18,new Be(2,14),new Be(4,15)),new ht(26,new Be(4,13),new Be(1,14))),new vr(8,Int32Array.from([6,24,42]),new ht(24,new Be(2,97)),new ht(22,new Be(2,38),new Be(2,39)),new ht(22,new Be(4,18),new Be(2,19)),new ht(26,new Be(4,14),new Be(2,15))),new vr(9,Int32Array.from([6,26,46]),new ht(30,new Be(2,116)),new ht(22,new Be(3,36),new Be(2,37)),new ht(20,new Be(4,16),new Be(4,17)),new ht(24,new Be(4,12),new Be(4,13))),new vr(10,Int32Array.from([6,28,50]),new ht(18,new Be(2,68),new Be(2,69)),new ht(26,new Be(4,43),new Be(1,44)),new ht(24,new Be(6,19),new Be(2,20)),new ht(28,new Be(6,15),new Be(2,16))),new vr(11,Int32Array.from([6,30,54]),new ht(20,new Be(4,81)),new ht(30,new Be(1,50),new Be(4,51)),new ht(28,new Be(4,22),new Be(4,23)),new ht(24,new Be(3,12),new Be(8,13))),new vr(12,Int32Array.from([6,32,58]),new ht(24,new Be(2,92),new Be(2,93)),new ht(22,new Be(6,36),new Be(2,37)),new ht(26,new Be(4,20),new Be(6,21)),new ht(28,new Be(7,14),new Be(4,15))),new vr(13,Int32Array.from([6,34,62]),new ht(26,new Be(4,107)),new ht(22,new Be(8,37),new Be(1,38)),new ht(24,new Be(8,20),new Be(4,21)),new ht(22,new Be(12,11),new Be(4,12))),new vr(14,Int32Array.from([6,26,46,66]),new ht(30,new Be(3,115),new Be(1,116)),new ht(24,new Be(4,40),new Be(5,41)),new ht(20,new Be(11,16),new Be(5,17)),new ht(24,new Be(11,12),new Be(5,13))),new vr(15,Int32Array.from([6,26,48,70]),new ht(22,new Be(5,87),new Be(1,88)),new ht(24,new Be(5,41),new Be(5,42)),new ht(30,new Be(5,24),new Be(7,25)),new ht(24,new Be(11,12),new Be(7,13))),new vr(16,Int32Array.from([6,26,50,74]),new ht(24,new Be(5,98),new Be(1,99)),new ht(28,new Be(7,45),new Be(3,46)),new ht(24,new Be(15,19),new Be(2,20)),new ht(30,new Be(3,15),new Be(13,16))),new vr(17,Int32Array.from([6,30,54,78]),new ht(28,new Be(1,107),new Be(5,108)),new ht(28,new Be(10,46),new Be(1,47)),new ht(28,new Be(1,22),new Be(15,23)),new ht(28,new Be(2,14),new Be(17,15))),new vr(18,Int32Array.from([6,30,56,82]),new ht(30,new Be(5,120),new Be(1,121)),new ht(26,new Be(9,43),new Be(4,44)),new ht(28,new Be(17,22),new Be(1,23)),new ht(28,new Be(2,14),new Be(19,15))),new vr(19,Int32Array.from([6,30,58,86]),new ht(28,new Be(3,113),new Be(4,114)),new ht(26,new Be(3,44),new Be(11,45)),new ht(26,new Be(17,21),new Be(4,22)),new ht(26,new Be(9,13),new Be(16,14))),new vr(20,Int32Array.from([6,34,62,90]),new ht(28,new Be(3,107),new Be(5,108)),new ht(26,new Be(3,41),new Be(13,42)),new ht(30,new Be(15,24),new Be(5,25)),new ht(28,new Be(15,15),new Be(10,16))),new vr(21,Int32Array.from([6,28,50,72,94]),new ht(28,new Be(4,116),new Be(4,117)),new ht(26,new Be(17,42)),new ht(28,new Be(17,22),new Be(6,23)),new ht(30,new Be(19,16),new Be(6,17))),new vr(22,Int32Array.from([6,26,50,74,98]),new ht(28,new Be(2,111),new Be(7,112)),new ht(28,new Be(17,46)),new ht(30,new Be(7,24),new Be(16,25)),new ht(24,new Be(34,13))),new vr(23,Int32Array.from([6,30,54,78,102]),new ht(30,new Be(4,121),new Be(5,122)),new ht(28,new Be(4,47),new Be(14,48)),new ht(30,new Be(11,24),new Be(14,25)),new ht(30,new Be(16,15),new Be(14,16))),new vr(24,Int32Array.from([6,28,54,80,106]),new ht(30,new Be(6,117),new Be(4,118)),new ht(28,new Be(6,45),new Be(14,46)),new ht(30,new Be(11,24),new Be(16,25)),new ht(30,new Be(30,16),new Be(2,17))),new vr(25,Int32Array.from([6,32,58,84,110]),new ht(26,new Be(8,106),new Be(4,107)),new ht(28,new Be(8,47),new Be(13,48)),new ht(30,new Be(7,24),new Be(22,25)),new ht(30,new Be(22,15),new Be(13,16))),new vr(26,Int32Array.from([6,30,58,86,114]),new ht(28,new Be(10,114),new Be(2,115)),new ht(28,new Be(19,46),new Be(4,47)),new ht(28,new Be(28,22),new Be(6,23)),new ht(30,new Be(33,16),new Be(4,17))),new vr(27,Int32Array.from([6,34,62,90,118]),new ht(30,new Be(8,122),new Be(4,123)),new ht(28,new Be(22,45),new Be(3,46)),new ht(30,new Be(8,23),new Be(26,24)),new ht(30,new Be(12,15),new Be(28,16))),new vr(28,Int32Array.from([6,26,50,74,98,122]),new ht(30,new Be(3,117),new Be(10,118)),new ht(28,new Be(3,45),new Be(23,46)),new ht(30,new Be(4,24),new Be(31,25)),new ht(30,new Be(11,15),new Be(31,16))),new vr(29,Int32Array.from([6,30,54,78,102,126]),new ht(30,new Be(7,116),new Be(7,117)),new ht(28,new Be(21,45),new Be(7,46)),new ht(30,new Be(1,23),new Be(37,24)),new ht(30,new Be(19,15),new Be(26,16))),new vr(30,Int32Array.from([6,26,52,78,104,130]),new ht(30,new Be(5,115),new Be(10,116)),new ht(28,new Be(19,47),new Be(10,48)),new ht(30,new Be(15,24),new Be(25,25)),new ht(30,new Be(23,15),new Be(25,16))),new vr(31,Int32Array.from([6,30,56,82,108,134]),new ht(30,new Be(13,115),new Be(3,116)),new ht(28,new Be(2,46),new Be(29,47)),new ht(30,new Be(42,24),new Be(1,25)),new ht(30,new Be(23,15),new Be(28,16))),new vr(32,Int32Array.from([6,34,60,86,112,138]),new ht(30,new Be(17,115)),new ht(28,new Be(10,46),new Be(23,47)),new ht(30,new Be(10,24),new Be(35,25)),new ht(30,new Be(19,15),new Be(35,16))),new vr(33,Int32Array.from([6,30,58,86,114,142]),new ht(30,new Be(17,115),new Be(1,116)),new ht(28,new Be(14,46),new Be(21,47)),new ht(30,new Be(29,24),new Be(19,25)),new ht(30,new Be(11,15),new Be(46,16))),new vr(34,Int32Array.from([6,34,62,90,118,146]),new ht(30,new Be(13,115),new Be(6,116)),new ht(28,new Be(14,46),new Be(23,47)),new ht(30,new Be(44,24),new Be(7,25)),new ht(30,new Be(59,16),new Be(1,17))),new vr(35,Int32Array.from([6,30,54,78,102,126,150]),new ht(30,new Be(12,121),new Be(7,122)),new ht(28,new Be(12,47),new Be(26,48)),new ht(30,new Be(39,24),new Be(14,25)),new ht(30,new Be(22,15),new Be(41,16))),new vr(36,Int32Array.from([6,24,50,76,102,128,154]),new ht(30,new Be(6,121),new Be(14,122)),new ht(28,new Be(6,47),new Be(34,48)),new ht(30,new Be(46,24),new Be(10,25)),new ht(30,new Be(2,15),new Be(64,16))),new vr(37,Int32Array.from([6,28,54,80,106,132,158]),new ht(30,new Be(17,122),new Be(4,123)),new ht(28,new Be(29,46),new Be(14,47)),new ht(30,new Be(49,24),new Be(10,25)),new ht(30,new Be(24,15),new Be(46,16))),new vr(38,Int32Array.from([6,32,58,84,110,136,162]),new ht(30,new Be(4,122),new Be(18,123)),new ht(28,new Be(13,46),new Be(32,47)),new ht(30,new Be(48,24),new Be(14,25)),new ht(30,new Be(42,15),new Be(32,16))),new vr(39,Int32Array.from([6,26,54,82,110,138,166]),new ht(30,new Be(20,117),new Be(4,118)),new ht(28,new Be(40,47),new Be(7,48)),new ht(30,new Be(43,24),new Be(22,25)),new ht(30,new Be(10,15),new Be(67,16))),new vr(40,Int32Array.from([6,30,58,86,114,142,170]),new ht(30,new Be(19,118),new Be(6,119)),new ht(28,new Be(18,47),new Be(31,48)),new ht(30,new Be(34,24),new Be(34,25)),new ht(30,new Be(20,15),new Be(61,16)))];var Pn;(function(pe){pe[pe.DATA_MASK_000=0]="DATA_MASK_000",pe[pe.DATA_MASK_001=1]="DATA_MASK_001",pe[pe.DATA_MASK_010=2]="DATA_MASK_010",pe[pe.DATA_MASK_011=3]="DATA_MASK_011",pe[pe.DATA_MASK_100=4]="DATA_MASK_100",pe[pe.DATA_MASK_101=5]="DATA_MASK_101",pe[pe.DATA_MASK_110=6]="DATA_MASK_110",pe[pe.DATA_MASK_111=7]="DATA_MASK_111"})(Pn||(Pn={}));class za{constructor(h,x){this.value=h,this.isMasked=x}unmaskBitMatrix(h,x){for(let b=0;b<x;b++)for(let _=0;_<x;_++)this.isMasked(b,_)&&h.flip(_,b)}}za.values=new Map([[Pn.DATA_MASK_000,new za(Pn.DATA_MASK_000,(pe,h)=>(pe+h&1)===0)],[Pn.DATA_MASK_001,new za(Pn.DATA_MASK_001,(pe,h)=>(pe&1)===0)],[Pn.DATA_MASK_010,new za(Pn.DATA_MASK_010,(pe,h)=>h%3===0)],[Pn.DATA_MASK_011,new za(Pn.DATA_MASK_011,(pe,h)=>(pe+h)%3===0)],[Pn.DATA_MASK_100,new za(Pn.DATA_MASK_100,(pe,h)=>(Math.floor(pe/2)+Math.floor(h/3)&1)===0)],[Pn.DATA_MASK_101,new za(Pn.DATA_MASK_101,(pe,h)=>pe*h%6===0)],[Pn.DATA_MASK_110,new za(Pn.DATA_MASK_110,(pe,h)=>pe*h%6<3)],[Pn.DATA_MASK_111,new za(Pn.DATA_MASK_111,(pe,h)=>(pe+h+pe*h%3&1)===0)]]);class is{constructor(h){const x=h.getHeight();if(x<21||(x&3)!==1)throw new R;this.bitMatrix=h}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let h=0;for(let j=0;j<6;j++)h=this.copyBit(j,8,h);h=this.copyBit(7,8,h),h=this.copyBit(8,8,h),h=this.copyBit(8,7,h);for(let j=5;j>=0;j--)h=this.copyBit(8,j,h);const x=this.bitMatrix.getHeight();let b=0;const _=x-7;for(let j=x-1;j>=_;j--)b=this.copyBit(8,j,b);for(let j=x-8;j<x;j++)b=this.copyBit(j,8,b);if(this.parsedFormatInfo=dn.decodeFormatInformation(h,b),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new R}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const h=this.bitMatrix.getHeight(),x=Math.floor((h-17)/4);if(x<=6)return vr.getVersionForNumber(x);let b=0;const _=h-11;for(let A=5;A>=0;A--)for(let I=h-9;I>=_;I--)b=this.copyBit(I,A,b);let j=vr.decodeVersionInformation(b);if(j!==null&&j.getDimensionForVersion()===h)return this.parsedVersion=j,j;b=0;for(let A=5;A>=0;A--)for(let I=h-9;I>=_;I--)b=this.copyBit(A,I,b);if(j=vr.decodeVersionInformation(b),j!==null&&j.getDimensionForVersion()===h)return this.parsedVersion=j,j;throw new R}copyBit(h,x,b){return(this.isMirror?this.bitMatrix.get(x,h):this.bitMatrix.get(h,x))?b<<1|1:b<<1}readCodewords(){const h=this.readFormatInformation(),x=this.readVersion(),b=za.values.get(h.getDataMask()),_=this.bitMatrix.getHeight();b.unmaskBitMatrix(this.bitMatrix,_);const j=x.buildFunctionPattern();let A=!0;const I=new Uint8Array(x.getTotalCodewords());let F=0,X=0,ce=0;for(let ge=_-1;ge>0;ge-=2){ge===6&&ge--;for(let Ae=0;Ae<_;Ae++){const qe=A?_-1-Ae:Ae;for(let Ye=0;Ye<2;Ye++)j.get(ge-Ye,qe)||(ce++,X<<=1,this.bitMatrix.get(ge-Ye,qe)&&(X|=1),ce===8&&(I[F++]=X,ce=0,X=0))}A=!A}if(F!==x.getTotalCodewords())throw new R;return I}remask(){if(this.parsedFormatInfo===null)return;const h=za.values[this.parsedFormatInfo.getDataMask()],x=this.bitMatrix.getHeight();h.unmaskBitMatrix(this.bitMatrix,x)}setMirror(h){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=h}mirror(){const h=this.bitMatrix;for(let x=0,b=h.getWidth();x<b;x++)for(let _=x+1,j=h.getHeight();_<j;_++)h.get(x,_)!==h.get(_,x)&&(h.flip(_,x),h.flip(x,_))}}class Ai{constructor(h,x){this.numDataCodewords=h,this.codewords=x}static getDataBlocks(h,x,b){if(h.length!==x.getTotalCodewords())throw new p;const _=x.getECBlocksForLevel(b);let j=0;const A=_.getECBlocks();for(const Ye of A)j+=Ye.getCount();const I=new Array(j);let F=0;for(const Ye of A)for(let rt=0;rt<Ye.getCount();rt++){const pt=Ye.getDataCodewords(),St=_.getECCodewordsPerBlock()+pt;I[F++]=new Ai(pt,new Uint8Array(St))}const X=I[0].codewords.length;let ce=I.length-1;for(;ce>=0&&I[ce].codewords.length!==X;)ce--;ce++;const ge=X-_.getECCodewordsPerBlock();let Ae=0;for(let Ye=0;Ye<ge;Ye++)for(let rt=0;rt<F;rt++)I[rt].codewords[Ye]=h[Ae++];for(let Ye=ce;Ye<F;Ye++)I[Ye].codewords[ge]=h[Ae++];const qe=I[0].codewords.length;for(let Ye=ge;Ye<qe;Ye++)for(let rt=0;rt<F;rt++){const pt=rt<ce?Ye:Ye+1;I[rt].codewords[pt]=h[Ae++]}return I}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var Qn;(function(pe){pe[pe.TERMINATOR=0]="TERMINATOR",pe[pe.NUMERIC=1]="NUMERIC",pe[pe.ALPHANUMERIC=2]="ALPHANUMERIC",pe[pe.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",pe[pe.BYTE=4]="BYTE",pe[pe.ECI=5]="ECI",pe[pe.KANJI=6]="KANJI",pe[pe.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",pe[pe.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",pe[pe.HANZI=9]="HANZI"})(Qn||(Qn={}));class Dr{constructor(h,x,b,_){this.value=h,this.stringValue=x,this.characterCountBitsForVersions=b,this.bits=_,Dr.FOR_BITS.set(_,this),Dr.FOR_VALUE.set(h,this)}static forBits(h){const x=Dr.FOR_BITS.get(h);if(x===void 0)throw new p;return x}getCharacterCountBits(h){const x=h.getVersionNumber();let b;return x<=9?b=0:x<=26?b=1:b=2,this.characterCountBitsForVersions[b]}getValue(){return this.value}getBits(){return this.bits}equals(h){if(!(h instanceof Dr))return!1;const x=h;return this.value===x.value}toString(){return this.stringValue}}Dr.FOR_BITS=new Map,Dr.FOR_VALUE=new Map,Dr.TERMINATOR=new Dr(Qn.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),Dr.NUMERIC=new Dr(Qn.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),Dr.ALPHANUMERIC=new Dr(Qn.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),Dr.STRUCTURED_APPEND=new Dr(Qn.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),Dr.BYTE=new Dr(Qn.BYTE,"BYTE",Int32Array.from([8,16,16]),4),Dr.ECI=new Dr(Qn.ECI,"ECI",Int32Array.from([0,0,0]),7),Dr.KANJI=new Dr(Qn.KANJI,"KANJI",Int32Array.from([8,10,12]),8),Dr.FNC1_FIRST_POSITION=new Dr(Qn.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),Dr.FNC1_SECOND_POSITION=new Dr(Qn.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),Dr.HANZI=new Dr(Qn.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class na{static decode(h,x,b,_){const j=new cn(h);let A=new J;const I=new Array;let F=-1,X=-1;try{let ce=null,ge=!1,Ae;do{if(j.available()<4)Ae=Dr.TERMINATOR;else{const qe=j.readBits(4);Ae=Dr.forBits(qe)}switch(Ae){case Dr.TERMINATOR:break;case Dr.FNC1_FIRST_POSITION:case Dr.FNC1_SECOND_POSITION:ge=!0;break;case Dr.STRUCTURED_APPEND:if(j.available()<16)throw new R;F=j.readBits(8),X=j.readBits(8);break;case Dr.ECI:const qe=na.parseECIValue(j);if(ce=z.getCharacterSetECIByValue(qe),ce===null)throw new R;break;case Dr.HANZI:const Ye=j.readBits(4),rt=j.readBits(Ae.getCharacterCountBits(x));Ye===na.GB2312_SUBSET&&na.decodeHanziSegment(j,A,rt);break;default:const pt=j.readBits(Ae.getCharacterCountBits(x));switch(Ae){case Dr.NUMERIC:na.decodeNumericSegment(j,A,pt);break;case Dr.ALPHANUMERIC:na.decodeAlphanumericSegment(j,A,pt,ge);break;case Dr.BYTE:na.decodeByteSegment(j,A,pt,ce,I,_);break;case Dr.KANJI:na.decodeKanjiSegment(j,A,pt);break;default:throw new R}break}}while(Ae!==Dr.TERMINATOR)}catch{throw new R}return new ie(h,A.toString(),I.length===0?null:I,b===null?null:b.toString(),F,X)}static decodeHanziSegment(h,x,b){if(b*13>h.available())throw new R;const _=new Uint8Array(2*b);let j=0;for(;b>0;){const A=h.readBits(13);let I=A/96<<8&4294967295|A%96;I<959?I+=41377:I+=42657,_[j]=I>>8&255,_[j+1]=I&255,j+=2,b--}try{x.append(H.decode(_,K.GB2312))}catch(A){throw new R(A)}}static decodeKanjiSegment(h,x,b){if(b*13>h.available())throw new R;const _=new Uint8Array(2*b);let j=0;for(;b>0;){const A=h.readBits(13);let I=A/192<<8&4294967295|A%192;I<7936?I+=33088:I+=49472,_[j]=I>>8,_[j+1]=I,j+=2,b--}try{x.append(H.decode(_,K.SHIFT_JIS))}catch(A){throw new R(A)}}static decodeByteSegment(h,x,b,_,j,A){if(8*b>h.available())throw new R;const I=new Uint8Array(b);for(let X=0;X<b;X++)I[X]=h.readBits(8);let F;_===null?F=K.guessEncoding(I,A):F=_.getName();try{x.append(H.decode(I,F))}catch(X){throw new R(X)}j.push(I)}static toAlphaNumericChar(h){if(h>=na.ALPHANUMERIC_CHARS.length)throw new R;return na.ALPHANUMERIC_CHARS[h]}static decodeAlphanumericSegment(h,x,b,_){const j=x.length();for(;b>1;){if(h.available()<11)throw new R;const A=h.readBits(11);x.append(na.toAlphaNumericChar(Math.floor(A/45))),x.append(na.toAlphaNumericChar(A%45)),b-=2}if(b===1){if(h.available()<6)throw new R;x.append(na.toAlphaNumericChar(h.readBits(6)))}if(_)for(let A=j;A<x.length();A++)x.charAt(A)==="%"&&(A<x.length()-1&&x.charAt(A+1)==="%"?x.deleteCharAt(A+1):x.setCharAt(A,""))}static decodeNumericSegment(h,x,b){for(;b>=3;){if(h.available()<10)throw new R;const _=h.readBits(10);if(_>=1e3)throw new R;x.append(na.toAlphaNumericChar(Math.floor(_/100))),x.append(na.toAlphaNumericChar(Math.floor(_/10)%10)),x.append(na.toAlphaNumericChar(_%10)),b-=3}if(b===2){if(h.available()<7)throw new R;const _=h.readBits(7);if(_>=100)throw new R;x.append(na.toAlphaNumericChar(Math.floor(_/10))),x.append(na.toAlphaNumericChar(_%10))}else if(b===1){if(h.available()<4)throw new R;const _=h.readBits(4);if(_>=10)throw new R;x.append(na.toAlphaNumericChar(_))}}static parseECIValue(h){const x=h.readBits(8);if((x&128)===0)return x&127;if((x&192)===128){const b=h.readBits(8);return(x&63)<<8&4294967295|b}if((x&224)===192){const b=h.readBits(16);return(x&31)<<16&4294967295|b}throw new R}}na.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",na.GB2312_SUBSET=1;class oo{constructor(h){this.mirrored=h}isMirrored(){return this.mirrored}applyMirroredCorrection(h){if(!this.mirrored||h===null||h.length<3)return;const x=h[0];h[0]=h[2],h[2]=x}}class wd{constructor(){this.rsDecoder=new at(Ee.QR_CODE_FIELD_256)}decodeBooleanArray(h,x){return this.decodeBitMatrix(ae.parseFromBooleanArray(h),x)}decodeBitMatrix(h,x){const b=new is(h);let _=null;try{return this.decodeBitMatrixParser(b,x)}catch(j){_=j}try{b.remask(),b.setMirror(!0),b.readVersion(),b.readFormatInformation(),b.mirror();const j=this.decodeBitMatrixParser(b,x);return j.setOther(new oo(!0)),j}catch(j){throw _!==null?_:j}}decodeBitMatrixParser(h,x){const b=h.readVersion(),_=h.readFormatInformation().getErrorCorrectionLevel(),j=h.readCodewords(),A=Ai.getDataBlocks(j,b,_);let I=0;for(const ce of A)I+=ce.getNumDataCodewords();const F=new Uint8Array(I);let X=0;for(const ce of A){const ge=ce.getCodewords(),Ae=ce.getNumDataCodewords();this.correctErrors(ge,Ae);for(let qe=0;qe<Ae;qe++)F[X++]=ge[qe]}return na.decode(F,b,_,x)}correctErrors(h,x){const b=new Int32Array(h);try{this.rsDecoder.decode(b,h.length-x)}catch{throw new g}for(let _=0;_<x;_++)h[_]=b[_]}}class kl extends We{constructor(h,x,b){super(h,x),this.estimatedModuleSize=b}aboutEquals(h,x,b){if(Math.abs(x-this.getY())<=h&&Math.abs(b-this.getX())<=h){const _=Math.abs(h-this.estimatedModuleSize);return _<=1||_<=this.estimatedModuleSize}return!1}combineEstimate(h,x,b){const _=(this.getX()+x)/2,j=(this.getY()+h)/2,A=(this.estimatedModuleSize+b)/2;return new kl(_,j,A)}}class nl{constructor(h,x,b,_,j,A,I){this.image=h,this.startX=x,this.startY=b,this.width=_,this.height=j,this.moduleSize=A,this.resultPointCallback=I,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const h=this.startX,x=this.height,b=this.width,_=h+b,j=this.startY+x/2,A=new Int32Array(3),I=this.image;for(let F=0;F<x;F++){const X=j+((F&1)===0?Math.floor((F+1)/2):-Math.floor((F+1)/2));A[0]=0,A[1]=0,A[2]=0;let ce=h;for(;ce<_&&!I.get(ce,X);)ce++;let ge=0;for(;ce<_;){if(I.get(ce,X))if(ge===1)A[1]++;else if(ge===2){if(this.foundPatternCross(A)){const Ae=this.handlePossibleCenter(A,X,ce);if(Ae!==null)return Ae}A[0]=A[2],A[1]=1,A[2]=0,ge=1}else A[++ge]++;else ge===1&&ge++,A[ge]++;ce++}if(this.foundPatternCross(A)){const Ae=this.handlePossibleCenter(A,X,_);if(Ae!==null)return Ae}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new se}static centerFromEnd(h,x){return x-h[2]-h[1]/2}foundPatternCross(h){const x=this.moduleSize,b=x/2;for(let _=0;_<3;_++)if(Math.abs(x-h[_])>=b)return!1;return!0}crossCheckVertical(h,x,b,_){const j=this.image,A=j.getHeight(),I=this.crossCheckStateCount;I[0]=0,I[1]=0,I[2]=0;let F=h;for(;F>=0&&j.get(x,F)&&I[1]<=b;)I[1]++,F--;if(F<0||I[1]>b)return NaN;for(;F>=0&&!j.get(x,F)&&I[0]<=b;)I[0]++,F--;if(I[0]>b)return NaN;for(F=h+1;F<A&&j.get(x,F)&&I[1]<=b;)I[1]++,F++;if(F===A||I[1]>b)return NaN;for(;F<A&&!j.get(x,F)&&I[2]<=b;)I[2]++,F++;if(I[2]>b)return NaN;const X=I[0]+I[1]+I[2];return 5*Math.abs(X-_)>=2*_?NaN:this.foundPatternCross(I)?nl.centerFromEnd(I,F):NaN}handlePossibleCenter(h,x,b){const _=h[0]+h[1]+h[2],j=nl.centerFromEnd(h,b),A=this.crossCheckVertical(x,j,2*h[1],_);if(!isNaN(A)){const I=(h[0]+h[1]+h[2])/3;for(const X of this.possibleCenters)if(X.aboutEquals(I,A,j))return X.combineEstimate(A,j,I);const F=new kl(j,A,I);this.possibleCenters.push(F),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(F)}return null}}class co extends We{constructor(h,x,b,_){super(h,x),this.estimatedModuleSize=b,this.count=_,_===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(h,x,b){if(Math.abs(x-this.getY())<=h&&Math.abs(b-this.getX())<=h){const _=Math.abs(h-this.estimatedModuleSize);return _<=1||_<=this.estimatedModuleSize}return!1}combineEstimate(h,x,b){const _=this.count+1,j=(this.count*this.getX()+x)/_,A=(this.count*this.getY()+h)/_,I=(this.count*this.estimatedModuleSize+b)/_;return new co(j,A,I,_)}}class kd{constructor(h){this.bottomLeft=h[0],this.topLeft=h[1],this.topRight=h[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class Fr{constructor(h,x){this.image=h,this.resultPointCallback=x,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=x}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(h){const x=h!=null&&h.get(W.TRY_HARDER)!==void 0,b=h!=null&&h.get(W.PURE_BARCODE)!==void 0,_=this.image,j=_.getHeight(),A=_.getWidth();let I=Math.floor(3*j/(4*Fr.MAX_MODULES));(I<Fr.MIN_SKIP||x)&&(I=Fr.MIN_SKIP);let F=!1;const X=new Int32Array(5);for(let ge=I-1;ge<j&&!F;ge+=I){X[0]=0,X[1]=0,X[2]=0,X[3]=0,X[4]=0;let Ae=0;for(let qe=0;qe<A;qe++)if(_.get(qe,ge))(Ae&1)===1&&Ae++,X[Ae]++;else if((Ae&1)===0)if(Ae===4)if(Fr.foundPatternCross(X)){if(this.handlePossibleCenter(X,ge,qe,b)===!0)if(I=2,this.hasSkipped===!0)F=this.haveMultiplyConfirmedCenters();else{const rt=this.findRowSkip();rt>X[2]&&(ge+=rt-X[2]-I,qe=A-1)}else{X[0]=X[2],X[1]=X[3],X[2]=X[4],X[3]=1,X[4]=0,Ae=3;continue}Ae=0,X[0]=0,X[1]=0,X[2]=0,X[3]=0,X[4]=0}else X[0]=X[2],X[1]=X[3],X[2]=X[4],X[3]=1,X[4]=0,Ae=3;else X[++Ae]++;else X[Ae]++;Fr.foundPatternCross(X)&&this.handlePossibleCenter(X,ge,A,b)===!0&&(I=X[0],this.hasSkipped&&(F=this.haveMultiplyConfirmedCenters()))}const ce=this.selectBestPatterns();return We.orderBestPatterns(ce),new kd(ce)}static centerFromEnd(h,x){return x-h[4]-h[3]-h[2]/2}static foundPatternCross(h){let x=0;for(let j=0;j<5;j++){const A=h[j];if(A===0)return!1;x+=A}if(x<7)return!1;const b=x/7,_=b/2;return Math.abs(b-h[0])<_&&Math.abs(b-h[1])<_&&Math.abs(3*b-h[2])<3*_&&Math.abs(b-h[3])<_&&Math.abs(b-h[4])<_}getCrossCheckStateCount(){const h=this.crossCheckStateCount;return h[0]=0,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h}crossCheckDiagonal(h,x,b,_){const j=this.getCrossCheckStateCount();let A=0;const I=this.image;for(;h>=A&&x>=A&&I.get(x-A,h-A);)j[2]++,A++;if(h<A||x<A)return!1;for(;h>=A&&x>=A&&!I.get(x-A,h-A)&&j[1]<=b;)j[1]++,A++;if(h<A||x<A||j[1]>b)return!1;for(;h>=A&&x>=A&&I.get(x-A,h-A)&&j[0]<=b;)j[0]++,A++;if(j[0]>b)return!1;const F=I.getHeight(),X=I.getWidth();for(A=1;h+A<F&&x+A<X&&I.get(x+A,h+A);)j[2]++,A++;if(h+A>=F||x+A>=X)return!1;for(;h+A<F&&x+A<X&&!I.get(x+A,h+A)&&j[3]<b;)j[3]++,A++;if(h+A>=F||x+A>=X||j[3]>=b)return!1;for(;h+A<F&&x+A<X&&I.get(x+A,h+A)&&j[4]<b;)j[4]++,A++;if(j[4]>=b)return!1;const ce=j[0]+j[1]+j[2]+j[3]+j[4];return Math.abs(ce-_)<2*_&&Fr.foundPatternCross(j)}crossCheckVertical(h,x,b,_){const j=this.image,A=j.getHeight(),I=this.getCrossCheckStateCount();let F=h;for(;F>=0&&j.get(x,F);)I[2]++,F--;if(F<0)return NaN;for(;F>=0&&!j.get(x,F)&&I[1]<=b;)I[1]++,F--;if(F<0||I[1]>b)return NaN;for(;F>=0&&j.get(x,F)&&I[0]<=b;)I[0]++,F--;if(I[0]>b)return NaN;for(F=h+1;F<A&&j.get(x,F);)I[2]++,F++;if(F===A)return NaN;for(;F<A&&!j.get(x,F)&&I[3]<b;)I[3]++,F++;if(F===A||I[3]>=b)return NaN;for(;F<A&&j.get(x,F)&&I[4]<b;)I[4]++,F++;if(I[4]>=b)return NaN;const X=I[0]+I[1]+I[2]+I[3]+I[4];return 5*Math.abs(X-_)>=2*_?NaN:Fr.foundPatternCross(I)?Fr.centerFromEnd(I,F):NaN}crossCheckHorizontal(h,x,b,_){const j=this.image,A=j.getWidth(),I=this.getCrossCheckStateCount();let F=h;for(;F>=0&&j.get(F,x);)I[2]++,F--;if(F<0)return NaN;for(;F>=0&&!j.get(F,x)&&I[1]<=b;)I[1]++,F--;if(F<0||I[1]>b)return NaN;for(;F>=0&&j.get(F,x)&&I[0]<=b;)I[0]++,F--;if(I[0]>b)return NaN;for(F=h+1;F<A&&j.get(F,x);)I[2]++,F++;if(F===A)return NaN;for(;F<A&&!j.get(F,x)&&I[3]<b;)I[3]++,F++;if(F===A||I[3]>=b)return NaN;for(;F<A&&j.get(F,x)&&I[4]<b;)I[4]++,F++;if(I[4]>=b)return NaN;const X=I[0]+I[1]+I[2]+I[3]+I[4];return 5*Math.abs(X-_)>=_?NaN:Fr.foundPatternCross(I)?Fr.centerFromEnd(I,F):NaN}handlePossibleCenter(h,x,b,_){const j=h[0]+h[1]+h[2]+h[3]+h[4];let A=Fr.centerFromEnd(h,b),I=this.crossCheckVertical(x,Math.floor(A),h[2],j);if(!isNaN(I)&&(A=this.crossCheckHorizontal(Math.floor(A),Math.floor(I),h[2],j),!isNaN(A)&&(!_||this.crossCheckDiagonal(Math.floor(I),Math.floor(A),h[2],j)))){const F=j/7;let X=!1;const ce=this.possibleCenters;for(let ge=0,Ae=ce.length;ge<Ae;ge++){const qe=ce[ge];if(qe.aboutEquals(F,I,A)){ce[ge]=qe.combineEstimate(I,A,F),X=!0;break}}if(!X){const ge=new co(A,I,F);ce.push(ge),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(ge)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let x=null;for(const b of this.possibleCenters)if(b.getCount()>=Fr.CENTER_QUORUM)if(x==null)x=b;else return this.hasSkipped=!0,Math.floor((Math.abs(x.getX()-b.getX())-Math.abs(x.getY()-b.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let h=0,x=0;const b=this.possibleCenters.length;for(const A of this.possibleCenters)A.getCount()>=Fr.CENTER_QUORUM&&(h++,x+=A.getEstimatedModuleSize());if(h<3)return!1;const _=x/b;let j=0;for(const A of this.possibleCenters)j+=Math.abs(A.getEstimatedModuleSize()-_);return j<=.05*x}selectBestPatterns(){const h=this.possibleCenters.length;if(h<3)throw new se;const x=this.possibleCenters;let b;if(h>3){let _=0,j=0;for(const F of this.possibleCenters){const X=F.getEstimatedModuleSize();_+=X,j+=X*X}b=_/h;let A=Math.sqrt(j/h-b*b);x.sort((F,X)=>{const ce=Math.abs(X.getEstimatedModuleSize()-b),ge=Math.abs(F.getEstimatedModuleSize()-b);return ce<ge?-1:ce>ge?1:0});const I=Math.max(.2*b,A);for(let F=0;F<x.length&&x.length>3;F++){const X=x[F];Math.abs(X.getEstimatedModuleSize()-b)>I&&(x.splice(F,1),F--)}}if(x.length>3){let _=0;for(const j of x)_+=j.getEstimatedModuleSize();b=_/x.length,x.sort((j,A)=>{if(A.getCount()===j.getCount()){const I=Math.abs(A.getEstimatedModuleSize()-b),F=Math.abs(j.getEstimatedModuleSize()-b);return I<F?1:I>F?-1:0}else return A.getCount()-j.getCount()}),x.splice(3)}return[x[0],x[1],x[2]]}}Fr.CENTER_QUORUM=2,Fr.MIN_SKIP=3,Fr.MAX_MODULES=57;class Ll{constructor(h){this.image=h}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(h){this.resultPointCallback=h==null?null:h.get(W.NEED_RESULT_POINT_CALLBACK);const b=new Fr(this.image,this.resultPointCallback).find(h);return this.processFinderPatternInfo(b)}processFinderPatternInfo(h){const x=h.getTopLeft(),b=h.getTopRight(),_=h.getBottomLeft(),j=this.calculateModuleSize(x,b,_);if(j<1)throw new se("No pattern found in proccess finder.");const A=Ll.computeDimension(x,b,_,j),I=vr.getProvisionalVersionForDimension(A),F=I.getDimensionForVersion()-7;let X=null;if(I.getAlignmentPatternCenters().length>0){const qe=b.getX()-x.getX()+_.getX(),Ye=b.getY()-x.getY()+_.getY(),rt=1-3/F,pt=Math.floor(x.getX()+rt*(qe-x.getX())),St=Math.floor(x.getY()+rt*(Ye-x.getY()));for(let zt=4;zt<=16;zt<<=1)try{X=this.findAlignmentInRegion(j,pt,St,zt);break}catch(qt){if(!(qt instanceof se))throw qt}}const ce=Ll.createTransform(x,b,_,X,A),ge=Ll.sampleGrid(this.image,ce,A);let Ae;return X===null?Ae=[_,x,b]:Ae=[_,x,b,X],new Kt(ge,Ae)}static createTransform(h,x,b,_,j){const A=j-3.5;let I,F,X,ce;return _!==null?(I=_.getX(),F=_.getY(),X=A-3,ce=X):(I=x.getX()-h.getX()+b.getX(),F=x.getY()-h.getY()+b.getY(),X=A,ce=A),nr.quadrilateralToQuadrilateral(3.5,3.5,A,3.5,X,ce,3.5,A,h.getX(),h.getY(),x.getX(),x.getY(),I,F,b.getX(),b.getY())}static sampleGrid(h,x,b){return rr.getInstance().sampleGridWithTransform(h,b,b,x)}static computeDimension(h,x,b,_){const j=nt.round(We.distance(h,x)/_),A=nt.round(We.distance(h,b)/_);let I=Math.floor((j+A)/2)+7;switch(I&3){case 0:I++;break;case 2:I--;break;case 3:throw new se("Dimensions could be not found.")}return I}calculateModuleSize(h,x,b){return(this.calculateModuleSizeOneWay(h,x)+this.calculateModuleSizeOneWay(h,b))/2}calculateModuleSizeOneWay(h,x){const b=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(h.getX()),Math.floor(h.getY()),Math.floor(x.getX()),Math.floor(x.getY())),_=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(x.getX()),Math.floor(x.getY()),Math.floor(h.getX()),Math.floor(h.getY()));return isNaN(b)?_/7:isNaN(_)?b/7:(b+_)/14}sizeOfBlackWhiteBlackRunBothWays(h,x,b,_){let j=this.sizeOfBlackWhiteBlackRun(h,x,b,_),A=1,I=h-(b-h);I<0?(A=h/(h-I),I=0):I>=this.image.getWidth()&&(A=(this.image.getWidth()-1-h)/(I-h),I=this.image.getWidth()-1);let F=Math.floor(x-(_-x)*A);return A=1,F<0?(A=x/(x-F),F=0):F>=this.image.getHeight()&&(A=(this.image.getHeight()-1-x)/(F-x),F=this.image.getHeight()-1),I=Math.floor(h+(I-h)*A),j+=this.sizeOfBlackWhiteBlackRun(h,x,I,F),j-1}sizeOfBlackWhiteBlackRun(h,x,b,_){const j=Math.abs(_-x)>Math.abs(b-h);if(j){let qe=h;h=x,x=qe,qe=b,b=_,_=qe}const A=Math.abs(b-h),I=Math.abs(_-x);let F=-A/2;const X=h<b?1:-1,ce=x<_?1:-1;let ge=0;const Ae=b+X;for(let qe=h,Ye=x;qe!==Ae;qe+=X){const rt=j?Ye:qe,pt=j?qe:Ye;if(ge===1===this.image.get(rt,pt)){if(ge===2)return nt.distance(qe,Ye,h,x);ge++}if(F+=I,F>0){if(Ye===_)break;Ye+=ce,F-=A}}return ge===2?nt.distance(b+X,_,h,x):NaN}findAlignmentInRegion(h,x,b,_){const j=Math.floor(_*h),A=Math.max(0,x-j),I=Math.min(this.image.getWidth()-1,x+j);if(I-A<h*3)throw new se("Alignment top exceeds estimated module size.");const F=Math.max(0,b-j),X=Math.min(this.image.getHeight()-1,b+j);if(X-F<h*3)throw new se("Alignment bottom exceeds estimated module size.");return new nl(this.image,A,F,I-A,X-F,h,this.resultPointCallback).find()}}class uo{constructor(){this.decoder=new wd}getDecoder(){return this.decoder}decode(h,x){let b,_;if(x!=null&&x.get(W.PURE_BARCODE)!==void 0){const F=uo.extractPureBits(h.getBlackMatrix());b=this.decoder.decodeBitMatrix(F,x),_=uo.NO_POINTS}else{const F=new Ll(h.getBlackMatrix()).detect(x);b=this.decoder.decodeBitMatrix(F.getBits(),x),_=F.getPoints()}b.getOther()instanceof oo&&b.getOther().applyMirroredCorrection(_);const j=new Y(b.getText(),b.getRawBytes(),void 0,_,Q.QR_CODE,void 0),A=b.getByteSegments();A!==null&&j.putMetadata(me.BYTE_SEGMENTS,A);const I=b.getECLevel();return I!==null&&j.putMetadata(me.ERROR_CORRECTION_LEVEL,I),b.hasStructuredAppend()&&(j.putMetadata(me.STRUCTURED_APPEND_SEQUENCE,b.getStructuredAppendSequenceNumber()),j.putMetadata(me.STRUCTURED_APPEND_PARITY,b.getStructuredAppendParity())),j}reset(){}static extractPureBits(h){const x=h.getTopLeftOnBit(),b=h.getBottomRightOnBit();if(x===null||b===null)throw new se;const _=this.moduleSize(x,h);let j=x[1],A=b[1],I=x[0],F=b[0];if(I>=F||j>=A)throw new se;if(A-j!==F-I&&(F=I+(A-j),F>=h.getWidth()))throw new se;const X=Math.round((F-I+1)/_),ce=Math.round((A-j+1)/_);if(X<=0||ce<=0)throw new se;if(ce!==X)throw new se;const ge=Math.floor(_/2);j+=ge,I+=ge;const Ae=I+Math.floor((X-1)*_)-F;if(Ae>0){if(Ae>ge)throw new se;I-=Ae}const qe=j+Math.floor((ce-1)*_)-A;if(qe>0){if(qe>ge)throw new se;j-=qe}const Ye=new ae(X,ce);for(let rt=0;rt<ce;rt++){const pt=j+Math.floor(rt*_);for(let St=0;St<X;St++)h.get(I+Math.floor(St*_),pt)&&Ye.set(St,rt)}return Ye}static moduleSize(h,x){const b=x.getHeight(),_=x.getWidth();let j=h[0],A=h[1],I=!0,F=0;for(;j<_&&A<b;){if(I!==x.get(j,A)){if(++F===5)break;I=!I}j++,A++}if(j===_||A===b)throw new se;return(j-h[0])/7}}uo.NO_POINTS=new Array;class un{PDF417Common(){}static getBitCountSum(h){return nt.sum(h)}static toIntArray(h){if(h==null||!h.length)return un.EMPTY_INT_ARRAY;const x=new Int32Array(h.length);let b=0;for(const _ of h)x[b++]=_;return x}static getCodeword(h){const x=O.binarySearch(un.SYMBOL_TABLE,h&262143);return x<0?-1:(un.CODEWORD_TABLE[x]-1)%un.NUMBER_OF_CODEWORDS}}un.NUMBER_OF_CODEWORDS=929,un.MAX_CODEWORDS_IN_BARCODE=un.NUMBER_OF_CODEWORDS-1,un.MIN_ROWS_IN_BARCODE=3,un.MAX_ROWS_IN_BARCODE=90,un.MODULES_IN_CODEWORD=17,un.MODULES_IN_STOP_PATTERN=18,un.BARS_IN_MODULE=8,un.EMPTY_INT_ARRAY=new Int32Array([]),un.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),un.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class oh{constructor(h,x){this.bits=h,this.points=x}getBits(){return this.bits}getPoints(){return this.points}}class hn{static detectMultiple(h,x,b){let _=h.getBlackMatrix(),j=hn.detect(b,_);return j.length||(_=_.clone(),_.rotate180(),j=hn.detect(b,_)),new oh(_,j)}static detect(h,x){const b=new Array;let _=0,j=0,A=!1;for(;_<x.getHeight();){const I=hn.findVertices(x,_,j);if(I[0]==null&&I[3]==null){if(!A)break;A=!1,j=0;for(const F of b)F[1]!=null&&(_=Math.trunc(Math.max(_,F[1].getY()))),F[3]!=null&&(_=Math.max(_,Math.trunc(F[3].getY())));_+=hn.ROW_STEP;continue}if(A=!0,b.push(I),!h)break;I[2]!=null?(j=Math.trunc(I[2].getX()),_=Math.trunc(I[2].getY())):(j=Math.trunc(I[4].getX()),_=Math.trunc(I[4].getY()))}return b}static findVertices(h,x,b){const _=h.getHeight(),j=h.getWidth(),A=new Array(8);return hn.copyToResult(A,hn.findRowsWithPattern(h,_,j,x,b,hn.START_PATTERN),hn.INDEXES_START_PATTERN),A[4]!=null&&(b=Math.trunc(A[4].getX()),x=Math.trunc(A[4].getY())),hn.copyToResult(A,hn.findRowsWithPattern(h,_,j,x,b,hn.STOP_PATTERN),hn.INDEXES_STOP_PATTERN),A}static copyToResult(h,x,b){for(let _=0;_<b.length;_++)h[b[_]]=x[_]}static findRowsWithPattern(h,x,b,_,j,A){const I=new Array(4);let F=!1;const X=new Int32Array(A.length);for(;_<x;_+=hn.ROW_STEP){let ge=hn.findGuardPattern(h,j,_,b,!1,A,X);if(ge!=null){for(;_>0;){const Ae=hn.findGuardPattern(h,j,--_,b,!1,A,X);if(Ae!=null)ge=Ae;else{_++;break}}I[0]=new We(ge[0],_),I[1]=new We(ge[1],_),F=!0;break}}let ce=_+1;if(F){let ge=0,Ae=Int32Array.from([Math.trunc(I[0].getX()),Math.trunc(I[1].getX())]);for(;ce<x;ce++){const qe=hn.findGuardPattern(h,Ae[0],ce,b,!1,A,X);if(qe!=null&&Math.abs(Ae[0]-qe[0])<hn.MAX_PATTERN_DRIFT&&Math.abs(Ae[1]-qe[1])<hn.MAX_PATTERN_DRIFT)Ae=qe,ge=0;else{if(ge>hn.SKIPPED_ROW_COUNT_MAX)break;ge++}}ce-=ge+1,I[2]=new We(Ae[0],ce),I[3]=new We(Ae[1],ce)}return ce-_<hn.BARCODE_MIN_HEIGHT&&O.fill(I,null),I}static findGuardPattern(h,x,b,_,j,A,I){O.fillWithin(I,0,I.length,0);let F=x,X=0;for(;h.get(F,b)&&F>0&&X++<hn.MAX_PIXEL_DRIFT;)F--;let ce=F,ge=0,Ae=A.length;for(let qe=j;ce<_;ce++)if(h.get(ce,b)!==qe)I[ge]++;else{if(ge===Ae-1){if(hn.patternMatchVariance(I,A,hn.MAX_INDIVIDUAL_VARIANCE)<hn.MAX_AVG_VARIANCE)return new Int32Array([F,ce]);F+=I[0]+I[1],w.arraycopy(I,2,I,0,ge-1),I[ge-1]=0,I[ge]=0,ge--}else ge++;I[ge]=1,qe=!qe}return ge===Ae-1&&hn.patternMatchVariance(I,A,hn.MAX_INDIVIDUAL_VARIANCE)<hn.MAX_AVG_VARIANCE?new Int32Array([F,ce-1]):null}static patternMatchVariance(h,x,b){let _=h.length,j=0,A=0;for(let X=0;X<_;X++)j+=h[X],A+=x[X];if(j<A)return 1/0;let I=j/A;b*=I;let F=0;for(let X=0;X<_;X++){let ce=h[X],ge=x[X]*I,Ae=ce>ge?ce-ge:ge-ce;if(Ae>b)return 1/0;F+=Ae}return F/j}}hn.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),hn.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),hn.MAX_AVG_VARIANCE=.42,hn.MAX_INDIVIDUAL_VARIANCE=.8,hn.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),hn.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),hn.MAX_PIXEL_DRIFT=3,hn.MAX_PATTERN_DRIFT=5,hn.SKIPPED_ROW_COUNT_MAX=25,hn.ROW_STEP=5,hn.BARCODE_MIN_HEIGHT=10;class la{constructor(h,x){if(x.length===0)throw new p;this.field=h;let b=x.length;if(b>1&&x[0]===0){let _=1;for(;_<b&&x[_]===0;)_++;_===b?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(b-_),w.arraycopy(x,_,this.coefficients,0,this.coefficients.length))}else this.coefficients=x}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(h){return this.coefficients[this.coefficients.length-1-h]}evaluateAt(h){if(h===0)return this.getCoefficient(0);if(h===1){let _=0;for(let j of this.coefficients)_=this.field.add(_,j);return _}let x=this.coefficients[0],b=this.coefficients.length;for(let _=1;_<b;_++)x=this.field.add(this.field.multiply(h,x),this.coefficients[_]);return x}add(h){if(!this.field.equals(h.field))throw new p("ModulusPolys do not have same ModulusGF field");if(this.isZero())return h;if(h.isZero())return this;let x=this.coefficients,b=h.coefficients;if(x.length>b.length){let A=x;x=b,b=A}let _=new Int32Array(b.length),j=b.length-x.length;w.arraycopy(b,0,_,0,j);for(let A=j;A<b.length;A++)_[A]=this.field.add(x[A-j],b[A]);return new la(this.field,_)}subtract(h){if(!this.field.equals(h.field))throw new p("ModulusPolys do not have same ModulusGF field");return h.isZero()?this:this.add(h.negative())}multiply(h){return h instanceof la?this.multiplyOther(h):this.multiplyScalar(h)}multiplyOther(h){if(!this.field.equals(h.field))throw new p("ModulusPolys do not have same ModulusGF field");if(this.isZero()||h.isZero())return new la(this.field,new Int32Array([0]));let x=this.coefficients,b=x.length,_=h.coefficients,j=_.length,A=new Int32Array(b+j-1);for(let I=0;I<b;I++){let F=x[I];for(let X=0;X<j;X++)A[I+X]=this.field.add(A[I+X],this.field.multiply(F,_[X]))}return new la(this.field,A)}negative(){let h=this.coefficients.length,x=new Int32Array(h);for(let b=0;b<h;b++)x[b]=this.field.subtract(0,this.coefficients[b]);return new la(this.field,x)}multiplyScalar(h){if(h===0)return new la(this.field,new Int32Array([0]));if(h===1)return this;let x=this.coefficients.length,b=new Int32Array(x);for(let _=0;_<x;_++)b[_]=this.field.multiply(this.coefficients[_],h);return new la(this.field,b)}multiplyByMonomial(h,x){if(h<0)throw new p;if(x===0)return new la(this.field,new Int32Array([0]));let b=this.coefficients.length,_=new Int32Array(b+h);for(let j=0;j<b;j++)_[j]=this.field.multiply(this.coefficients[j],x);return new la(this.field,_)}toString(){let h=new J;for(let x=this.getDegree();x>=0;x--){let b=this.getCoefficient(x);b!==0&&(b<0?(h.append(" - "),b=-b):h.length()>0&&h.append(" + "),(x===0||b!==1)&&h.append(b),x!==0&&(x===1?h.append("x"):(h.append("x^"),h.append(x))))}return h.toString()}}class Zu{add(h,x){return(h+x)%this.modulus}subtract(h,x){return(this.modulus+h-x)%this.modulus}exp(h){return this.expTable[h]}log(h){if(h===0)throw new p;return this.logTable[h]}inverse(h){if(h===0)throw new le;return this.expTable[this.modulus-this.logTable[h]-1]}multiply(h,x){return h===0||x===0?0:this.expTable[(this.logTable[h]+this.logTable[x])%(this.modulus-1)]}getSize(){return this.modulus}equals(h){return h===this}}class ic extends Zu{constructor(h,x){super(),this.modulus=h,this.expTable=new Int32Array(h),this.logTable=new Int32Array(h);let b=1;for(let _=0;_<h;_++)this.expTable[_]=b,b=b*x%h;for(let _=0;_<h-1;_++)this.logTable[this.expTable[_]]=_;this.zero=new la(this,new Int32Array([0])),this.one=new la(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(h,x){if(h<0)throw new p;if(x===0)return this.zero;let b=new Int32Array(h+1);return b[0]=x,new la(this,b)}}ic.PDF417_GF=new ic(un.NUMBER_OF_CODEWORDS,3);class al{constructor(){this.field=ic.PDF417_GF}decode(h,x,b){let _=new la(this.field,h),j=new Int32Array(x),A=!1;for(let Ye=x;Ye>0;Ye--){let rt=_.evaluateAt(this.field.exp(Ye));j[x-Ye]=rt,rt!==0&&(A=!0)}if(!A)return 0;let I=this.field.getOne();if(b!=null)for(const Ye of b){let rt=this.field.exp(h.length-1-Ye),pt=new la(this.field,new Int32Array([this.field.subtract(0,rt),1]));I=I.multiply(pt)}let F=new la(this.field,j),X=this.runEuclideanAlgorithm(this.field.buildMonomial(x,1),F,x),ce=X[0],ge=X[1],Ae=this.findErrorLocations(ce),qe=this.findErrorMagnitudes(ge,ce,Ae);for(let Ye=0;Ye<Ae.length;Ye++){let rt=h.length-1-this.field.log(Ae[Ye]);if(rt<0)throw g.getChecksumInstance();h[rt]=this.field.subtract(h[rt],qe[Ye])}return Ae.length}runEuclideanAlgorithm(h,x,b){if(h.getDegree()<x.getDegree()){let Ae=h;h=x,x=Ae}let _=h,j=x,A=this.field.getZero(),I=this.field.getOne();for(;j.getDegree()>=Math.round(b/2);){let Ae=_,qe=A;if(_=j,A=I,_.isZero())throw g.getChecksumInstance();j=Ae;let Ye=this.field.getZero(),rt=_.getCoefficient(_.getDegree()),pt=this.field.inverse(rt);for(;j.getDegree()>=_.getDegree()&&!j.isZero();){let St=j.getDegree()-_.getDegree(),zt=this.field.multiply(j.getCoefficient(j.getDegree()),pt);Ye=Ye.add(this.field.buildMonomial(St,zt)),j=j.subtract(_.multiplyByMonomial(St,zt))}I=Ye.multiply(A).subtract(qe).negative()}let F=I.getCoefficient(0);if(F===0)throw g.getChecksumInstance();let X=this.field.inverse(F),ce=I.multiply(X),ge=j.multiply(X);return[ce,ge]}findErrorLocations(h){let x=h.getDegree(),b=new Int32Array(x),_=0;for(let j=1;j<this.field.getSize()&&_<x;j++)h.evaluateAt(j)===0&&(b[_]=this.field.inverse(j),_++);if(_!==x)throw g.getChecksumInstance();return b}findErrorMagnitudes(h,x,b){let _=x.getDegree(),j=new Int32Array(_);for(let X=1;X<=_;X++)j[_-X]=this.field.multiply(X,x.getCoefficient(X));let A=new la(this.field,j),I=b.length,F=new Int32Array(I);for(let X=0;X<I;X++){let ce=this.field.inverse(b[X]),ge=this.field.subtract(0,h.evaluateAt(ce)),Ae=this.field.inverse(A.evaluateAt(ce));F[X]=this.field.multiply(ge,Ae)}return F}}class Nl{constructor(h,x,b,_,j){h instanceof Nl?this.constructor_2(h):this.constructor_1(h,x,b,_,j)}constructor_1(h,x,b,_,j){const A=x==null||b==null,I=_==null||j==null;if(A&&I)throw new se;A?(x=new We(0,_.getY()),b=new We(0,j.getY())):I&&(_=new We(h.getWidth()-1,x.getY()),j=new We(h.getWidth()-1,b.getY())),this.image=h,this.topLeft=x,this.bottomLeft=b,this.topRight=_,this.bottomRight=j,this.minX=Math.trunc(Math.min(x.getX(),b.getX())),this.maxX=Math.trunc(Math.max(_.getX(),j.getX())),this.minY=Math.trunc(Math.min(x.getY(),_.getY())),this.maxY=Math.trunc(Math.max(b.getY(),j.getY()))}constructor_2(h){this.image=h.image,this.topLeft=h.getTopLeft(),this.bottomLeft=h.getBottomLeft(),this.topRight=h.getTopRight(),this.bottomRight=h.getBottomRight(),this.minX=h.getMinX(),this.maxX=h.getMaxX(),this.minY=h.getMinY(),this.maxY=h.getMaxY()}static merge(h,x){return h==null?x:x==null?h:new Nl(h.image,h.topLeft,h.bottomLeft,x.topRight,x.bottomRight)}addMissingRows(h,x,b){let _=this.topLeft,j=this.bottomLeft,A=this.topRight,I=this.bottomRight;if(h>0){let F=b?this.topLeft:this.topRight,X=Math.trunc(F.getY()-h);X<0&&(X=0);let ce=new We(F.getX(),X);b?_=ce:A=ce}if(x>0){let F=b?this.bottomLeft:this.bottomRight,X=Math.trunc(F.getY()+x);X>=this.image.getHeight()&&(X=this.image.getHeight()-1);let ce=new We(F.getX(),X);b?j=ce:I=ce}return new Nl(this.image,_,j,A,I)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class Oo{constructor(h,x,b,_){this.columnCount=h,this.errorCorrectionLevel=_,this.rowCountUpperPart=x,this.rowCountLowerPart=b,this.rowCount=x+b}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class ho{constructor(){this.buffer=""}static form(h,x){let b=-1;function _(A,I,F,X,ce,ge){if(A==="%%")return"%";if(x[++b]===void 0)return;A=X?parseInt(X.substr(1)):void 0;let Ae=ce?parseInt(ce.substr(1)):void 0,qe;switch(ge){case"s":qe=x[b];break;case"c":qe=x[b][0];break;case"f":qe=parseFloat(x[b]).toFixed(A);break;case"p":qe=parseFloat(x[b]).toPrecision(A);break;case"e":qe=parseFloat(x[b]).toExponential(A);break;case"x":qe=parseInt(x[b]).toString(Ae||16);break;case"d":qe=parseFloat(parseInt(x[b],Ae||10).toPrecision(A)).toFixed(0);break}qe=typeof qe=="object"?JSON.stringify(qe):(+qe).toString(Ae);let Ye=parseInt(F),rt=F&&F[0]+""=="0"?"0":" ";for(;qe.length<Ye;)qe=I!==void 0?qe+rt:rt+qe;return qe}let j=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return h.replace(j,_)}format(h,...x){this.buffer+=ho.form(h,x)}toString(){return this.buffer}}class _l{constructor(h){this.boundingBox=new Nl(h),this.codewords=new Array(h.getMaxY()-h.getMinY()+1)}getCodewordNearby(h){let x=this.getCodeword(h);if(x!=null)return x;for(let b=1;b<_l.MAX_NEARBY_DISTANCE;b++){let _=this.imageRowToCodewordIndex(h)-b;if(_>=0&&(x=this.codewords[_],x!=null)||(_=this.imageRowToCodewordIndex(h)+b,_<this.codewords.length&&(x=this.codewords[_],x!=null)))return x}return null}imageRowToCodewordIndex(h){return h-this.boundingBox.getMinY()}setCodeword(h,x){this.codewords[this.imageRowToCodewordIndex(h)]=x}getCodeword(h){return this.codewords[this.imageRowToCodewordIndex(h)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const h=new ho;let x=0;for(const b of this.codewords){if(b==null){h.format("%3d:    |   %n",x++);continue}h.format("%3d: %3d|%3d%n",x++,b.getRowNumber(),b.getValue())}return h.toString()}}_l.MAX_NEARBY_DISTANCE=5;class Po{constructor(){this.values=new Map}setValue(h){h=Math.trunc(h);let x=this.values.get(h);x==null&&(x=0),x++,this.values.set(h,x)}getValue(){let h=-1,x=new Array;for(const[b,_]of this.values.entries()){const j={getKey:()=>b,getValue:()=>_};j.getValue()>h?(h=j.getValue(),x=[],x.push(j.getKey())):j.getValue()===h&&x.push(j.getKey())}return un.toIntArray(x)}getConfidence(h){return this.values.get(h)}}class Nd extends _l{constructor(h,x){super(h),this._isLeft=x}setRowNumbers(){for(let h of this.getCodewords())h!=null&&h.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(h){let x=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(x,h);let b=this.getBoundingBox(),_=this._isLeft?b.getTopLeft():b.getTopRight(),j=this._isLeft?b.getBottomLeft():b.getBottomRight(),A=this.imageRowToCodewordIndex(Math.trunc(_.getY())),I=this.imageRowToCodewordIndex(Math.trunc(j.getY())),F=-1,X=1,ce=0;for(let ge=A;ge<I;ge++){if(x[ge]==null)continue;let Ae=x[ge],qe=Ae.getRowNumber()-F;if(qe===0)ce++;else if(qe===1)X=Math.max(X,ce),ce=1,F=Ae.getRowNumber();else if(qe<0||Ae.getRowNumber()>=h.getRowCount()||qe>ge)x[ge]=null;else{let Ye;X>2?Ye=(X-2)*qe:Ye=qe;let rt=Ye>=ge;for(let pt=1;pt<=Ye&&!rt;pt++)rt=x[ge-pt]!=null;rt?x[ge]=null:(F=Ae.getRowNumber(),ce=1)}}}getRowHeights(){let h=this.getBarcodeMetadata();if(h==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(h);let x=new Int32Array(h.getRowCount());for(let b of this.getCodewords())if(b!=null){let _=b.getRowNumber();if(_>=x.length)continue;x[_]++}return x}adjustIncompleteIndicatorColumnRowNumbers(h){let x=this.getBoundingBox(),b=this._isLeft?x.getTopLeft():x.getTopRight(),_=this._isLeft?x.getBottomLeft():x.getBottomRight(),j=this.imageRowToCodewordIndex(Math.trunc(b.getY())),A=this.imageRowToCodewordIndex(Math.trunc(_.getY())),I=this.getCodewords(),F=-1;for(let X=j;X<A;X++){if(I[X]==null)continue;let ce=I[X];ce.setRowNumberAsRowIndicatorColumn();let ge=ce.getRowNumber()-F;ge===0||(ge===1?F=ce.getRowNumber():ce.getRowNumber()>=h.getRowCount()?I[X]=null:F=ce.getRowNumber())}}getBarcodeMetadata(){let h=this.getCodewords(),x=new Po,b=new Po,_=new Po,j=new Po;for(let I of h){if(I==null)continue;I.setRowNumberAsRowIndicatorColumn();let F=I.getValue()%30,X=I.getRowNumber();switch(this._isLeft||(X+=2),X%3){case 0:b.setValue(F*3+1);break;case 1:j.setValue(F/3),_.setValue(F%3);break;case 2:x.setValue(F+1);break}}if(x.getValue().length===0||b.getValue().length===0||_.getValue().length===0||j.getValue().length===0||x.getValue()[0]<1||b.getValue()[0]+_.getValue()[0]<un.MIN_ROWS_IN_BARCODE||b.getValue()[0]+_.getValue()[0]>un.MAX_ROWS_IN_BARCODE)return null;let A=new Oo(x.getValue()[0],b.getValue()[0],_.getValue()[0],j.getValue()[0]);return this.removeIncorrectCodewords(h,A),A}removeIncorrectCodewords(h,x){for(let b=0;b<h.length;b++){let _=h[b];if(h[b]==null)continue;let j=_.getValue()%30,A=_.getRowNumber();if(A>x.getRowCount()){h[b]=null;continue}switch(this._isLeft||(A+=2),A%3){case 0:j*3+1!==x.getRowCountUpperPart()&&(h[b]=null);break;case 1:(Math.trunc(j/3)!==x.getErrorCorrectionLevel()||j%3!==x.getRowCountLowerPart())&&(h[b]=null);break;case 2:j+1!==x.getColumnCount()&&(h[b]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class ms{constructor(h,x){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=h,this.barcodeColumnCount=h.getColumnCount(),this.boundingBox=x,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let h=un.MAX_CODEWORDS_IN_BARCODE,x;do x=h,h=this.adjustRowNumbersAndGetCount();while(h>0&&h<x);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(h){h!=null&&h.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let h=this.adjustRowNumbersByRow();if(h===0)return 0;for(let x=1;x<this.barcodeColumnCount+1;x++){let b=this.detectionResultColumns[x].getCodewords();for(let _=0;_<b.length;_++)b[_]!=null&&(b[_].hasValidRowNumber()||this.adjustRowNumbers(x,_,b))}return h}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let h=this.detectionResultColumns[0].getCodewords(),x=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let b=0;b<h.length;b++)if(h[b]!=null&&x[b]!=null&&h[b].getRowNumber()===x[b].getRowNumber())for(let _=1;_<=this.barcodeColumnCount;_++){let j=this.detectionResultColumns[_].getCodewords()[b];j!=null&&(j.setRowNumber(h[b].getRowNumber()),j.hasValidRowNumber()||(this.detectionResultColumns[_].getCodewords()[b]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let h=0,x=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let b=0;b<x.length;b++){if(x[b]==null)continue;let _=x[b].getRowNumber(),j=0;for(let A=this.barcodeColumnCount+1;A>0&&j<this.ADJUST_ROW_NUMBER_SKIP;A--){let I=this.detectionResultColumns[A].getCodewords()[b];I!=null&&(j=ms.adjustRowNumberIfValid(_,j,I),I.hasValidRowNumber()||h++)}}return h}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let h=0,x=this.detectionResultColumns[0].getCodewords();for(let b=0;b<x.length;b++){if(x[b]==null)continue;let _=x[b].getRowNumber(),j=0;for(let A=1;A<this.barcodeColumnCount+1&&j<this.ADJUST_ROW_NUMBER_SKIP;A++){let I=this.detectionResultColumns[A].getCodewords()[b];I!=null&&(j=ms.adjustRowNumberIfValid(_,j,I),I.hasValidRowNumber()||h++)}}return h}static adjustRowNumberIfValid(h,x,b){return b==null||b.hasValidRowNumber()||(b.isValidRowNumber(h)?(b.setRowNumber(h),x=0):++x),x}adjustRowNumbers(h,x,b){if(!this.detectionResultColumns[h-1])return;let _=b[x],j=this.detectionResultColumns[h-1].getCodewords(),A=j;this.detectionResultColumns[h+1]!=null&&(A=this.detectionResultColumns[h+1].getCodewords());let I=new Array(14);I[2]=j[x],I[3]=A[x],x>0&&(I[0]=b[x-1],I[4]=j[x-1],I[5]=A[x-1]),x>1&&(I[8]=b[x-2],I[10]=j[x-2],I[11]=A[x-2]),x<b.length-1&&(I[1]=b[x+1],I[6]=j[x+1],I[7]=A[x+1]),x<b.length-2&&(I[9]=b[x+2],I[12]=j[x+2],I[13]=A[x+2]);for(let F of I)if(ms.adjustRowNumber(_,F))return}static adjustRowNumber(h,x){return x==null?!1:x.hasValidRowNumber()&&x.getBucket()===h.getBucket()?(h.setRowNumber(x.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(h){this.boundingBox=h}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(h,x){this.detectionResultColumns[h]=x}getDetectionResultColumn(h){return this.detectionResultColumns[h]}toString(){let h=this.detectionResultColumns[0];h==null&&(h=this.detectionResultColumns[this.barcodeColumnCount+1]);let x=new ho;for(let b=0;b<h.getCodewords().length;b++){x.format("CW %3d:",b);for(let _=0;_<this.barcodeColumnCount+2;_++){if(this.detectionResultColumns[_]==null){x.format("    |   ");continue}let j=this.detectionResultColumns[_].getCodewords()[b];if(j==null){x.format("    |   ");continue}x.format(" %3d|%3d",j.getRowNumber(),j.getValue())}x.format("%n")}return x.toString()}}class ui{constructor(h,x,b,_){this.rowNumber=ui.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(h),this.endX=Math.trunc(x),this.bucket=Math.trunc(b),this.value=Math.trunc(_)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(h){return h!==ui.BARCODE_ROW_UNKNOWN&&this.bucket===h%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(h){this.rowNumber=h}toString(){return this.rowNumber+"|"+this.value}}ui.BARCODE_ROW_UNKNOWN=-1;class ls{static initialize(){for(let h=0;h<un.SYMBOL_TABLE.length;h++){let x=un.SYMBOL_TABLE[h],b=x&1;for(let _=0;_<un.BARS_IN_MODULE;_++){let j=0;for(;(x&1)===b;)j+=1,x>>=1;b=x&1,ls.RATIOS_TABLE[h]||(ls.RATIOS_TABLE[h]=new Array(un.BARS_IN_MODULE)),ls.RATIOS_TABLE[h][un.BARS_IN_MODULE-_-1]=Math.fround(j/un.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(h){let x=ls.getDecodedCodewordValue(ls.sampleBitCounts(h));return x!==-1?x:ls.getClosestDecodedValue(h)}static sampleBitCounts(h){let x=nt.sum(h),b=new Int32Array(un.BARS_IN_MODULE),_=0,j=0;for(let A=0;A<un.MODULES_IN_CODEWORD;A++){let I=x/(2*un.MODULES_IN_CODEWORD)+A*x/un.MODULES_IN_CODEWORD;j+h[_]<=I&&(j+=h[_],_++),b[_]++}return b}static getDecodedCodewordValue(h){let x=ls.getBitValue(h);return un.getCodeword(x)===-1?-1:x}static getBitValue(h){let x=0;for(let b=0;b<h.length;b++)for(let _=0;_<h[b];_++)x=x<<1|(b%2===0?1:0);return Math.trunc(x)}static getClosestDecodedValue(h){let x=nt.sum(h),b=new Array(un.BARS_IN_MODULE);if(x>1)for(let A=0;A<b.length;A++)b[A]=Math.fround(h[A]/x);let _=ot.MAX_VALUE,j=-1;this.bSymbolTableReady||ls.initialize();for(let A=0;A<ls.RATIOS_TABLE.length;A++){let I=0,F=ls.RATIOS_TABLE[A];for(let X=0;X<un.BARS_IN_MODULE;X++){let ce=Math.fround(F[X]-b[X]);if(I+=Math.fround(ce*ce),I>=_)break}I<_&&(_=I,j=un.SYMBOL_TABLE[A])}return j}}ls.bSymbolTableReady=!1,ls.RATIOS_TABLE=new Array(un.SYMBOL_TABLE.length).map(pe=>new Array(un.BARS_IN_MODULE));class Io{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(h){this.segmentIndex=h}getFileId(){return this.fileId}setFileId(h){this.fileId=h}getOptionalData(){return this.optionalData}setOptionalData(h){this.optionalData=h}isLastSegment(){return this.lastSegment}setLastSegment(h){this.lastSegment=h}getSegmentCount(){return this.segmentCount}setSegmentCount(h){this.segmentCount=h}getSender(){return this.sender||null}setSender(h){this.sender=h}getAddressee(){return this.addressee||null}setAddressee(h){this.addressee=h}getFileName(){return this.fileName}setFileName(h){this.fileName=h}getFileSize(){return this.fileSize}setFileSize(h){this.fileSize=h}getChecksum(){return this.checksum}setChecksum(h){this.checksum=h}getTimestamp(){return this.timestamp}setTimestamp(h){this.timestamp=h}}class _d{static parseLong(h,x=void 0){return parseInt(h,x)}}class Lc extends d{}Lc.kind="NullPointerException";class lc{writeBytes(h){this.writeBytesOffset(h,0,h.length)}writeBytesOffset(h,x,b){if(h==null)throw new Lc;if(x<0||x>h.length||b<0||x+b>h.length||x+b<0)throw new k;if(b===0)return;for(let _=0;_<b;_++)this.write(h[x+_])}flush(){}close(){}}class Rc extends d{}class Sd extends lc{constructor(h=32){if(super(),this.count=0,h<0)throw new p("Negative initial size: "+h);this.buf=new Uint8Array(h)}ensureCapacity(h){h-this.buf.length>0&&this.grow(h)}grow(h){let b=this.buf.length<<1;if(b-h<0&&(b=h),b<0){if(h<0)throw new Rc;b=E.MAX_VALUE}this.buf=O.copyOfUint8Array(this.buf,b)}write(h){this.ensureCapacity(this.count+1),this.buf[this.count]=h,this.count+=1}writeBytesOffset(h,x,b){if(x<0||x>h.length||b<0||x+b-h.length>0)throw new k;this.ensureCapacity(this.count+b),w.arraycopy(h,x,this.buf,this.count,b),this.count+=b}writeTo(h){h.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return O.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(h){return h?typeof h=="string"?this.toString_string(h):this.toString_number(h):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(h){return new String(this.buf).toString()}toString_number(h){return new String(this.buf).toString()}close(){}}var Gn;(function(pe){pe[pe.ALPHA=0]="ALPHA",pe[pe.LOWER=1]="LOWER",pe[pe.MIXED=2]="MIXED",pe[pe.PUNCT=3]="PUNCT",pe[pe.ALPHA_SHIFT=4]="ALPHA_SHIFT",pe[pe.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Gn||(Gn={}));function Do(){if(typeof window<"u")return window.BigInt||null;if(typeof r2<"u")return r2.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let jd;function fo(pe){if(typeof jd>"u"&&(jd=Do()),jd===null)throw new Error("BigInt is not supported!");return jd(pe)}function oc(){let pe=[];pe[0]=fo(1);let h=fo(900);pe[1]=h;for(let x=2;x<16;x++)pe[x]=pe[x-1]*h;return pe}class Tt{static decode(h,x){let b=new J(""),_=z.ISO8859_1;b.enableDecoding(_);let j=1,A=h[j++],I=new Io;for(;j<h[0];){switch(A){case Tt.TEXT_COMPACTION_MODE_LATCH:j=Tt.textCompaction(h,j,b);break;case Tt.BYTE_COMPACTION_MODE_LATCH:case Tt.BYTE_COMPACTION_MODE_LATCH_6:j=Tt.byteCompaction(A,h,_,j,b);break;case Tt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:b.append(h[j++]);break;case Tt.NUMERIC_COMPACTION_MODE_LATCH:j=Tt.numericCompaction(h,j,b);break;case Tt.ECI_CHARSET:z.getCharacterSetECIByValue(h[j++]);break;case Tt.ECI_GENERAL_PURPOSE:j+=2;break;case Tt.ECI_USER_DEFINED:j++;break;case Tt.BEGIN_MACRO_PDF417_CONTROL_BLOCK:j=Tt.decodeMacroBlock(h,j,I);break;case Tt.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Tt.MACRO_PDF417_TERMINATOR:throw new R;default:j--,j=Tt.textCompaction(h,j,b);break}if(j<h.length)A=h[j++];else throw R.getFormatInstance()}if(b.length()===0)throw R.getFormatInstance();let F=new ie(null,b.toString(),null,x);return F.setOther(I),F}static decodeMacroBlock(h,x,b){if(x+Tt.NUMBER_OF_SEQUENCE_CODEWORDS>h[0])throw R.getFormatInstance();let _=new Int32Array(Tt.NUMBER_OF_SEQUENCE_CODEWORDS);for(let I=0;I<Tt.NUMBER_OF_SEQUENCE_CODEWORDS;I++,x++)_[I]=h[x];b.setSegmentIndex(E.parseInt(Tt.decodeBase900toBase10(_,Tt.NUMBER_OF_SEQUENCE_CODEWORDS)));let j=new J;x=Tt.textCompaction(h,x,j),b.setFileId(j.toString());let A=-1;for(h[x]===Tt.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(A=x+1);x<h[0];)switch(h[x]){case Tt.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(x++,h[x]){case Tt.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let I=new J;x=Tt.textCompaction(h,x+1,I),b.setFileName(I.toString());break;case Tt.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let F=new J;x=Tt.textCompaction(h,x+1,F),b.setSender(F.toString());break;case Tt.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let X=new J;x=Tt.textCompaction(h,x+1,X),b.setAddressee(X.toString());break;case Tt.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let ce=new J;x=Tt.numericCompaction(h,x+1,ce),b.setSegmentCount(E.parseInt(ce.toString()));break;case Tt.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let ge=new J;x=Tt.numericCompaction(h,x+1,ge),b.setTimestamp(_d.parseLong(ge.toString()));break;case Tt.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let Ae=new J;x=Tt.numericCompaction(h,x+1,Ae),b.setChecksum(E.parseInt(Ae.toString()));break;case Tt.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let qe=new J;x=Tt.numericCompaction(h,x+1,qe),b.setFileSize(_d.parseLong(qe.toString()));break;default:throw R.getFormatInstance()}break;case Tt.MACRO_PDF417_TERMINATOR:x++,b.setLastSegment(!0);break;default:throw R.getFormatInstance()}if(A!==-1){let I=x-A;b.isLastSegment()&&I--,b.setOptionalData(O.copyOfRange(h,A,A+I))}return x}static textCompaction(h,x,b){let _=new Int32Array((h[0]-x)*2),j=new Int32Array((h[0]-x)*2),A=0,I=!1;for(;x<h[0]&&!I;){let F=h[x++];if(F<Tt.TEXT_COMPACTION_MODE_LATCH)_[A]=F/30,_[A+1]=F%30,A+=2;else switch(F){case Tt.TEXT_COMPACTION_MODE_LATCH:_[A++]=Tt.TEXT_COMPACTION_MODE_LATCH;break;case Tt.BYTE_COMPACTION_MODE_LATCH:case Tt.BYTE_COMPACTION_MODE_LATCH_6:case Tt.NUMERIC_COMPACTION_MODE_LATCH:case Tt.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Tt.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Tt.MACRO_PDF417_TERMINATOR:x--,I=!0;break;case Tt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:_[A]=Tt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,F=h[x++],j[A]=F,A++;break}}return Tt.decodeTextCompaction(_,j,A,b),x}static decodeTextCompaction(h,x,b,_){let j=Gn.ALPHA,A=Gn.ALPHA,I=0;for(;I<b;){let F=h[I],X="";switch(j){case Gn.ALPHA:if(F<26)X=String.fromCharCode(65+F);else switch(F){case 26:X=" ";break;case Tt.LL:j=Gn.LOWER;break;case Tt.ML:j=Gn.MIXED;break;case Tt.PS:A=j,j=Gn.PUNCT_SHIFT;break;case Tt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:_.append(x[I]);break;case Tt.TEXT_COMPACTION_MODE_LATCH:j=Gn.ALPHA;break}break;case Gn.LOWER:if(F<26)X=String.fromCharCode(97+F);else switch(F){case 26:X=" ";break;case Tt.AS:A=j,j=Gn.ALPHA_SHIFT;break;case Tt.ML:j=Gn.MIXED;break;case Tt.PS:A=j,j=Gn.PUNCT_SHIFT;break;case Tt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:_.append(x[I]);break;case Tt.TEXT_COMPACTION_MODE_LATCH:j=Gn.ALPHA;break}break;case Gn.MIXED:if(F<Tt.PL)X=Tt.MIXED_CHARS[F];else switch(F){case Tt.PL:j=Gn.PUNCT;break;case 26:X=" ";break;case Tt.LL:j=Gn.LOWER;break;case Tt.AL:j=Gn.ALPHA;break;case Tt.PS:A=j,j=Gn.PUNCT_SHIFT;break;case Tt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:_.append(x[I]);break;case Tt.TEXT_COMPACTION_MODE_LATCH:j=Gn.ALPHA;break}break;case Gn.PUNCT:if(F<Tt.PAL)X=Tt.PUNCT_CHARS[F];else switch(F){case Tt.PAL:j=Gn.ALPHA;break;case Tt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:_.append(x[I]);break;case Tt.TEXT_COMPACTION_MODE_LATCH:j=Gn.ALPHA;break}break;case Gn.ALPHA_SHIFT:if(j=A,F<26)X=String.fromCharCode(65+F);else switch(F){case 26:X=" ";break;case Tt.TEXT_COMPACTION_MODE_LATCH:j=Gn.ALPHA;break}break;case Gn.PUNCT_SHIFT:if(j=A,F<Tt.PAL)X=Tt.PUNCT_CHARS[F];else switch(F){case Tt.PAL:j=Gn.ALPHA;break;case Tt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:_.append(x[I]);break;case Tt.TEXT_COMPACTION_MODE_LATCH:j=Gn.ALPHA;break}break}X!==""&&_.append(X),I++}}static byteCompaction(h,x,b,_,j){let A=new Sd,I=0,F=0,X=!1;switch(h){case Tt.BYTE_COMPACTION_MODE_LATCH:let ce=new Int32Array(6),ge=x[_++];for(;_<x[0]&&!X;)switch(ce[I++]=ge,F=900*F+ge,ge=x[_++],ge){case Tt.TEXT_COMPACTION_MODE_LATCH:case Tt.BYTE_COMPACTION_MODE_LATCH:case Tt.NUMERIC_COMPACTION_MODE_LATCH:case Tt.BYTE_COMPACTION_MODE_LATCH_6:case Tt.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Tt.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Tt.MACRO_PDF417_TERMINATOR:_--,X=!0;break;default:if(I%5===0&&I>0){for(let Ae=0;Ae<6;++Ae)A.write(Number(fo(F)>>fo(8*(5-Ae))));F=0,I=0}break}_===x[0]&&ge<Tt.TEXT_COMPACTION_MODE_LATCH&&(ce[I++]=ge);for(let Ae=0;Ae<I;Ae++)A.write(ce[Ae]);break;case Tt.BYTE_COMPACTION_MODE_LATCH_6:for(;_<x[0]&&!X;){let Ae=x[_++];if(Ae<Tt.TEXT_COMPACTION_MODE_LATCH)I++,F=900*F+Ae;else switch(Ae){case Tt.TEXT_COMPACTION_MODE_LATCH:case Tt.BYTE_COMPACTION_MODE_LATCH:case Tt.NUMERIC_COMPACTION_MODE_LATCH:case Tt.BYTE_COMPACTION_MODE_LATCH_6:case Tt.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Tt.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Tt.MACRO_PDF417_TERMINATOR:_--,X=!0;break}if(I%5===0&&I>0){for(let qe=0;qe<6;++qe)A.write(Number(fo(F)>>fo(8*(5-qe))));F=0,I=0}}break}return j.append(H.decode(A.toByteArray(),b)),_}static numericCompaction(h,x,b){let _=0,j=!1,A=new Int32Array(Tt.MAX_NUMERIC_CODEWORDS);for(;x<h[0]&&!j;){let I=h[x++];if(x===h[0]&&(j=!0),I<Tt.TEXT_COMPACTION_MODE_LATCH)A[_]=I,_++;else switch(I){case Tt.TEXT_COMPACTION_MODE_LATCH:case Tt.BYTE_COMPACTION_MODE_LATCH:case Tt.BYTE_COMPACTION_MODE_LATCH_6:case Tt.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Tt.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Tt.MACRO_PDF417_TERMINATOR:x--,j=!0;break}(_%Tt.MAX_NUMERIC_CODEWORDS===0||I===Tt.NUMERIC_COMPACTION_MODE_LATCH||j)&&_>0&&(b.append(Tt.decodeBase900toBase10(A,_)),_=0)}return x}static decodeBase900toBase10(h,x){let b=fo(0);for(let j=0;j<x;j++)b+=Tt.EXP900[x-j-1]*fo(h[j]);let _=b.toString();if(_.charAt(0)!=="1")throw new R;return _.substring(1)}}Tt.TEXT_COMPACTION_MODE_LATCH=900,Tt.BYTE_COMPACTION_MODE_LATCH=901,Tt.NUMERIC_COMPACTION_MODE_LATCH=902,Tt.BYTE_COMPACTION_MODE_LATCH_6=924,Tt.ECI_USER_DEFINED=925,Tt.ECI_GENERAL_PURPOSE=926,Tt.ECI_CHARSET=927,Tt.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,Tt.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,Tt.MACRO_PDF417_TERMINATOR=922,Tt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,Tt.MAX_NUMERIC_CODEWORDS=15,Tt.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,Tt.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,Tt.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,Tt.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,Tt.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,Tt.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,Tt.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,Tt.PL=25,Tt.LL=27,Tt.AS=27,Tt.ML=28,Tt.AL=28,Tt.PS=29,Tt.PAL=29,Tt.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,Tt.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",Tt.EXP900=Do()?oc():[],Tt.NUMBER_OF_SEQUENCE_CODEWORDS=2;class G{constructor(){}static decode(h,x,b,_,j,A,I){let F=new Nl(h,x,b,_,j),X=null,ce=null,ge;for(let Ye=!0;;Ye=!1){if(x!=null&&(X=G.getRowIndicatorColumn(h,F,x,!0,A,I)),_!=null&&(ce=G.getRowIndicatorColumn(h,F,_,!1,A,I)),ge=G.merge(X,ce),ge==null)throw se.getNotFoundInstance();let rt=ge.getBoundingBox();if(Ye&&rt!=null&&(rt.getMinY()<F.getMinY()||rt.getMaxY()>F.getMaxY()))F=rt;else break}ge.setBoundingBox(F);let Ae=ge.getBarcodeColumnCount()+1;ge.setDetectionResultColumn(0,X),ge.setDetectionResultColumn(Ae,ce);let qe=X!=null;for(let Ye=1;Ye<=Ae;Ye++){let rt=qe?Ye:Ae-Ye;if(ge.getDetectionResultColumn(rt)!==void 0)continue;let pt;rt===0||rt===Ae?pt=new Nd(F,rt===0):pt=new _l(F),ge.setDetectionResultColumn(rt,pt);let St=-1,zt=St;for(let qt=F.getMinY();qt<=F.getMaxY();qt++){if(St=G.getStartColumn(ge,rt,qt,qe),St<0||St>F.getMaxX()){if(zt===-1)continue;St=zt}let Ft=G.detectCodeword(h,F.getMinX(),F.getMaxX(),qe,St,qt,A,I);Ft!=null&&(pt.setCodeword(qt,Ft),zt=St,A=Math.min(A,Ft.getWidth()),I=Math.max(I,Ft.getWidth()))}}return G.createDecoderResult(ge)}static merge(h,x){if(h==null&&x==null)return null;let b=G.getBarcodeMetadata(h,x);if(b==null)return null;let _=Nl.merge(G.adjustBoundingBox(h),G.adjustBoundingBox(x));return new ms(b,_)}static adjustBoundingBox(h){if(h==null)return null;let x=h.getRowHeights();if(x==null)return null;let b=G.getMax(x),_=0;for(let I of x)if(_+=b-I,I>0)break;let j=h.getCodewords();for(let I=0;_>0&&j[I]==null;I++)_--;let A=0;for(let I=x.length-1;I>=0&&(A+=b-x[I],!(x[I]>0));I--);for(let I=j.length-1;A>0&&j[I]==null;I--)A--;return h.getBoundingBox().addMissingRows(_,A,h.isLeft())}static getMax(h){let x=-1;for(let b of h)x=Math.max(x,b);return x}static getBarcodeMetadata(h,x){let b;if(h==null||(b=h.getBarcodeMetadata())==null)return x==null?null:x.getBarcodeMetadata();let _;return x==null||(_=x.getBarcodeMetadata())==null?b:b.getColumnCount()!==_.getColumnCount()&&b.getErrorCorrectionLevel()!==_.getErrorCorrectionLevel()&&b.getRowCount()!==_.getRowCount()?null:b}static getRowIndicatorColumn(h,x,b,_,j,A){let I=new Nd(x,_);for(let F=0;F<2;F++){let X=F===0?1:-1,ce=Math.trunc(Math.trunc(b.getX()));for(let ge=Math.trunc(Math.trunc(b.getY()));ge<=x.getMaxY()&&ge>=x.getMinY();ge+=X){let Ae=G.detectCodeword(h,0,h.getWidth(),_,ce,ge,j,A);Ae!=null&&(I.setCodeword(ge,Ae),_?ce=Ae.getStartX():ce=Ae.getEndX())}}return I}static adjustCodewordCount(h,x){let b=x[0][1],_=b.getValue(),j=h.getBarcodeColumnCount()*h.getBarcodeRowCount()-G.getNumberOfECCodeWords(h.getBarcodeECLevel());if(_.length===0){if(j<1||j>un.MAX_CODEWORDS_IN_BARCODE)throw se.getNotFoundInstance();b.setValue(j)}else _[0]!==j&&b.setValue(j)}static createDecoderResult(h){let x=G.createBarcodeMatrix(h);G.adjustCodewordCount(h,x);let b=new Array,_=new Int32Array(h.getBarcodeRowCount()*h.getBarcodeColumnCount()),j=[],A=new Array;for(let F=0;F<h.getBarcodeRowCount();F++)for(let X=0;X<h.getBarcodeColumnCount();X++){let ce=x[F][X+1].getValue(),ge=F*h.getBarcodeColumnCount()+X;ce.length===0?b.push(ge):ce.length===1?_[ge]=ce[0]:(A.push(ge),j.push(ce))}let I=new Array(j.length);for(let F=0;F<I.length;F++)I[F]=j[F];return G.createDecoderResultFromAmbiguousValues(h.getBarcodeECLevel(),_,un.toIntArray(b),un.toIntArray(A),I)}static createDecoderResultFromAmbiguousValues(h,x,b,_,j){let A=new Int32Array(_.length),I=100;for(;I-- >0;){for(let F=0;F<A.length;F++)x[_[F]]=j[F][A[F]];try{return G.decodeCodewords(x,h,b)}catch(F){if(!(F instanceof g))throw F}if(A.length===0)throw g.getChecksumInstance();for(let F=0;F<A.length;F++)if(A[F]<j[F].length-1){A[F]++;break}else if(A[F]=0,F===A.length-1)throw g.getChecksumInstance()}throw g.getChecksumInstance()}static createBarcodeMatrix(h){let x=Array.from({length:h.getBarcodeRowCount()},()=>new Array(h.getBarcodeColumnCount()+2));for(let _=0;_<x.length;_++)for(let j=0;j<x[_].length;j++)x[_][j]=new Po;let b=0;for(let _ of h.getDetectionResultColumns()){if(_!=null){for(let j of _.getCodewords())if(j!=null){let A=j.getRowNumber();if(A>=0){if(A>=x.length)continue;x[A][b].setValue(j.getValue())}}}b++}return x}static isValidBarcodeColumn(h,x){return x>=0&&x<=h.getBarcodeColumnCount()+1}static getStartColumn(h,x,b,_){let j=_?1:-1,A=null;if(G.isValidBarcodeColumn(h,x-j)&&(A=h.getDetectionResultColumn(x-j).getCodeword(b)),A!=null)return _?A.getEndX():A.getStartX();if(A=h.getDetectionResultColumn(x).getCodewordNearby(b),A!=null)return _?A.getStartX():A.getEndX();if(G.isValidBarcodeColumn(h,x-j)&&(A=h.getDetectionResultColumn(x-j).getCodewordNearby(b)),A!=null)return _?A.getEndX():A.getStartX();let I=0;for(;G.isValidBarcodeColumn(h,x-j);){x-=j;for(let F of h.getDetectionResultColumn(x).getCodewords())if(F!=null)return(_?F.getEndX():F.getStartX())+j*I*(F.getEndX()-F.getStartX());I++}return _?h.getBoundingBox().getMinX():h.getBoundingBox().getMaxX()}static detectCodeword(h,x,b,_,j,A,I,F){j=G.adjustCodewordStartColumn(h,x,b,_,j,A);let X=G.getModuleBitCount(h,x,b,_,j,A);if(X==null)return null;let ce,ge=nt.sum(X);if(_)ce=j+ge;else{for(let Ye=0;Ye<X.length/2;Ye++){let rt=X[Ye];X[Ye]=X[X.length-1-Ye],X[X.length-1-Ye]=rt}ce=j,j=ce-ge}if(!G.checkCodewordSkew(ge,I,F))return null;let Ae=ls.getDecodedValue(X),qe=un.getCodeword(Ae);return qe===-1?null:new ui(j,ce,G.getCodewordBucketNumber(Ae),qe)}static getModuleBitCount(h,x,b,_,j,A){let I=j,F=new Int32Array(8),X=0,ce=_?1:-1,ge=_;for(;(_?I<b:I>=x)&&X<F.length;)h.get(I,A)===ge?(F[X]++,I+=ce):(X++,ge=!ge);return X===F.length||I===(_?b:x)&&X===F.length-1?F:null}static getNumberOfECCodeWords(h){return 2<<h}static adjustCodewordStartColumn(h,x,b,_,j,A){let I=j,F=_?-1:1;for(let X=0;X<2;X++){for(;(_?I>=x:I<b)&&_===h.get(I,A);){if(Math.abs(j-I)>G.CODEWORD_SKEW_SIZE)return j;I+=F}F=-F,_=!_}return I}static checkCodewordSkew(h,x,b){return x-G.CODEWORD_SKEW_SIZE<=h&&h<=b+G.CODEWORD_SKEW_SIZE}static decodeCodewords(h,x,b){if(h.length===0)throw R.getFormatInstance();let _=1<<x+1,j=G.correctErrors(h,b,_);G.verifyCodewordCount(h,_);let A=Tt.decode(h,""+x);return A.setErrorsCorrected(j),A.setErasures(b.length),A}static correctErrors(h,x,b){if(x!=null&&x.length>b/2+G.MAX_ERRORS||b<0||b>G.MAX_EC_CODEWORDS)throw g.getChecksumInstance();return G.errorCorrection.decode(h,b,x)}static verifyCodewordCount(h,x){if(h.length<4)throw R.getFormatInstance();let b=h[0];if(b>h.length)throw R.getFormatInstance();if(b===0)if(x<h.length)h[0]=h.length-x;else throw R.getFormatInstance()}static getBitCountForCodeword(h){let x=new Int32Array(8),b=0,_=x.length-1;for(;!((h&1)!==b&&(b=h&1,_--,_<0));)x[_]++,h>>=1;return x}static getCodewordBucketNumber(h){return h instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(h):this.getCodewordBucketNumber_number(h)}static getCodewordBucketNumber_number(h){return G.getCodewordBucketNumber(G.getBitCountForCodeword(h))}static getCodewordBucketNumber_Int32Array(h){return(h[0]-h[2]+h[4]-h[6]+9)%9}static toString(h){let x=new ho;for(let b=0;b<h.length;b++){x.format("Row %2d: ",b);for(let _=0;_<h[b].length;_++){let j=h[b][_];j.getValue().length===0?x.format("        ",null):x.format("%4d(%2d)",j.getValue()[0],j.getConfidence(j.getValue()[0]))}x.format("%n")}return x.toString()}}G.CODEWORD_SKEW_SIZE=2,G.MAX_ERRORS=3,G.MAX_EC_CODEWORDS=512,G.errorCorrection=new al;class ve{decode(h,x=null){let b=ve.decode(h,x,!1);if(b==null||b.length===0||b[0]==null)throw se.getNotFoundInstance();return b[0]}decodeMultiple(h,x=null){try{return ve.decode(h,x,!0)}catch(b){throw b instanceof R||b instanceof g?se.getNotFoundInstance():b}}static decode(h,x,b){const _=new Array,j=hn.detectMultiple(h,x,b);for(const A of j.getPoints()){const I=G.decode(j.getBits(),A[4],A[5],A[6],A[7],ve.getMinCodewordWidth(A),ve.getMaxCodewordWidth(A)),F=new Y(I.getText(),I.getRawBytes(),void 0,A,Q.PDF_417);F.putMetadata(me.ERROR_CORRECTION_LEVEL,I.getECLevel());const X=I.getOther();X!=null&&F.putMetadata(me.PDF417_EXTRA_METADATA,X),_.push(F)}return _.map(A=>A)}static getMaxWidth(h,x){return h==null||x==null?0:Math.trunc(Math.abs(h.getX()-x.getX()))}static getMinWidth(h,x){return h==null||x==null?E.MAX_VALUE:Math.trunc(Math.abs(h.getX()-x.getX()))}static getMaxCodewordWidth(h){return Math.floor(Math.max(Math.max(ve.getMaxWidth(h[0],h[4]),ve.getMaxWidth(h[6],h[2])*un.MODULES_IN_CODEWORD/un.MODULES_IN_STOP_PATTERN),Math.max(ve.getMaxWidth(h[1],h[5]),ve.getMaxWidth(h[7],h[3])*un.MODULES_IN_CODEWORD/un.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(h){return Math.floor(Math.min(Math.min(ve.getMinWidth(h[0],h[4]),ve.getMinWidth(h[6],h[2])*un.MODULES_IN_CODEWORD/un.MODULES_IN_STOP_PATTERN),Math.min(ve.getMinWidth(h[1],h[5]),ve.getMinWidth(h[7],h[3])*un.MODULES_IN_CODEWORD/un.MODULES_IN_STOP_PATTERN)))}reset(){}}class He extends d{}He.kind="ReaderException";class tt{constructor(h,x){this.verbose=h===!0,x&&this.setHints(x)}decode(h,x){return x&&this.setHints(x),this.decodeInternal(h)}decodeWithState(h){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(h)}setHints(h){this.hints=h;const x=!n(h)&&h.get(W.TRY_HARDER)===!0,b=n(h)?null:h.get(W.POSSIBLE_FORMATS),_=new Array;if(!n(b)){const j=b.some(A=>A===Q.UPC_A||A===Q.UPC_E||A===Q.EAN_13||A===Q.EAN_8||A===Q.CODABAR||A===Q.CODE_39||A===Q.CODE_93||A===Q.CODE_128||A===Q.ITF||A===Q.RSS_14||A===Q.RSS_EXPANDED);j&&!x&&_.push(new Na(h,this.verbose)),b.includes(Q.QR_CODE)&&_.push(new uo),b.includes(Q.DATA_MATRIX)&&_.push(new Je),b.includes(Q.AZTEC)&&_.push(new cr),b.includes(Q.PDF_417)&&_.push(new ve),j&&x&&_.push(new Na(h,this.verbose))}_.length===0&&(x||_.push(new Na(h,this.verbose)),_.push(new uo),_.push(new Je),_.push(new cr),_.push(new ve),x&&_.push(new Na(h,this.verbose))),this.readers=_}reset(){if(this.readers!==null)for(const h of this.readers)h.reset()}decodeInternal(h){if(this.readers===null)throw new He("No readers where selected, nothing can be read.");for(const x of this.readers)try{return x.decode(h,this.hints)}catch(b){if(b instanceof He)continue}throw new se("No MultiFormat Readers were able to detect the code.")}}class gt extends ee{constructor(h=null,x=500){const b=new tt;b.setHints(h),super(b,x)}decodeBitmap(h){return this.reader.decodeWithState(h)}}class Ut extends ee{constructor(h=500){super(new ve,h)}}class lr extends ee{constructor(h=500){super(new uo,h)}}var Hr;(function(pe){pe[pe.ERROR_CORRECTION=0]="ERROR_CORRECTION",pe[pe.CHARACTER_SET=1]="CHARACTER_SET",pe[pe.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",pe[pe.MIN_SIZE=3]="MIN_SIZE",pe[pe.MAX_SIZE=4]="MAX_SIZE",pe[pe.MARGIN=5]="MARGIN",pe[pe.PDF417_COMPACT=6]="PDF417_COMPACT",pe[pe.PDF417_COMPACTION=7]="PDF417_COMPACTION",pe[pe.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",pe[pe.AZTEC_LAYERS=9]="AZTEC_LAYERS",pe[pe.QR_VERSION=10]="QR_VERSION"})(Hr||(Hr={}));var Cr=Hr;class kn{constructor(h){this.field=h,this.cachedGenerators=[],this.cachedGenerators.push(new be(h,Int32Array.from([1])))}buildGenerator(h){const x=this.cachedGenerators;if(h>=x.length){let b=x[x.length-1];const _=this.field;for(let j=x.length;j<=h;j++){const A=b.multiply(new be(_,Int32Array.from([1,_.exp(j-1+_.getGeneratorBase())])));x.push(A),b=A}}return x[h]}encode(h,x){if(x===0)throw new p("No error correction bytes");const b=h.length-x;if(b<=0)throw new p("No data bytes provided");const _=this.buildGenerator(x),j=new Int32Array(b);w.arraycopy(h,0,j,0,b);let A=new be(this.field,j);A=A.multiplyByMonomial(x,1);const F=A.divide(_)[1].getCoefficients(),X=x-F.length;for(let ce=0;ce<X;ce++)h[b+ce]=0;w.arraycopy(F,0,h,b+X,F.length)}}class $r{constructor(){}static applyMaskPenaltyRule1(h){return $r.applyMaskPenaltyRule1Internal(h,!0)+$r.applyMaskPenaltyRule1Internal(h,!1)}static applyMaskPenaltyRule2(h){let x=0;const b=h.getArray(),_=h.getWidth(),j=h.getHeight();for(let A=0;A<j-1;A++){const I=b[A];for(let F=0;F<_-1;F++){const X=I[F];X===I[F+1]&&X===b[A+1][F]&&X===b[A+1][F+1]&&x++}}return $r.N2*x}static applyMaskPenaltyRule3(h){let x=0;const b=h.getArray(),_=h.getWidth(),j=h.getHeight();for(let A=0;A<j;A++)for(let I=0;I<_;I++){const F=b[A];I+6<_&&F[I]===1&&F[I+1]===0&&F[I+2]===1&&F[I+3]===1&&F[I+4]===1&&F[I+5]===0&&F[I+6]===1&&($r.isWhiteHorizontal(F,I-4,I)||$r.isWhiteHorizontal(F,I+7,I+11))&&x++,A+6<j&&b[A][I]===1&&b[A+1][I]===0&&b[A+2][I]===1&&b[A+3][I]===1&&b[A+4][I]===1&&b[A+5][I]===0&&b[A+6][I]===1&&($r.isWhiteVertical(b,I,A-4,A)||$r.isWhiteVertical(b,I,A+7,A+11))&&x++}return x*$r.N3}static isWhiteHorizontal(h,x,b){x=Math.max(x,0),b=Math.min(b,h.length);for(let _=x;_<b;_++)if(h[_]===1)return!1;return!0}static isWhiteVertical(h,x,b,_){b=Math.max(b,0),_=Math.min(_,h.length);for(let j=b;j<_;j++)if(h[j][x]===1)return!1;return!0}static applyMaskPenaltyRule4(h){let x=0;const b=h.getArray(),_=h.getWidth(),j=h.getHeight();for(let F=0;F<j;F++){const X=b[F];for(let ce=0;ce<_;ce++)X[ce]===1&&x++}const A=h.getHeight()*h.getWidth();return Math.floor(Math.abs(x*2-A)*10/A)*$r.N4}static getDataMaskBit(h,x,b){let _,j;switch(h){case 0:_=b+x&1;break;case 1:_=b&1;break;case 2:_=x%3;break;case 3:_=(b+x)%3;break;case 4:_=Math.floor(b/2)+Math.floor(x/3)&1;break;case 5:j=b*x,_=(j&1)+j%3;break;case 6:j=b*x,_=(j&1)+j%3&1;break;case 7:j=b*x,_=j%3+(b+x&1)&1;break;default:throw new p("Invalid mask pattern: "+h)}return _===0}static applyMaskPenaltyRule1Internal(h,x){let b=0;const _=x?h.getHeight():h.getWidth(),j=x?h.getWidth():h.getHeight(),A=h.getArray();for(let I=0;I<_;I++){let F=0,X=-1;for(let ce=0;ce<j;ce++){const ge=x?A[I][ce]:A[ce][I];ge===X?F++:(F>=5&&(b+=$r.N1+(F-5)),F=1,X=ge)}F>=5&&(b+=$r.N1+(F-5))}return b}}$r.N1=3,$r.N2=3,$r.N3=40,$r.N4=10;class aa{constructor(h,x){this.width=h,this.height=x;const b=new Array(x);for(let _=0;_!==x;_++)b[_]=new Uint8Array(h);this.bytes=b}getHeight(){return this.height}getWidth(){return this.width}get(h,x){return this.bytes[x][h]}getArray(){return this.bytes}setNumber(h,x,b){this.bytes[x][h]=b}setBoolean(h,x,b){this.bytes[x][h]=b?1:0}clear(h){for(const x of this.bytes)O.fill(x,h)}equals(h){if(!(h instanceof aa))return!1;const x=h;if(this.width!==x.width||this.height!==x.height)return!1;for(let b=0,_=this.height;b<_;++b){const j=this.bytes[b],A=x.bytes[b];for(let I=0,F=this.width;I<F;++I)if(j[I]!==A[I])return!1}return!0}toString(){const h=new J;for(let x=0,b=this.height;x<b;++x){const _=this.bytes[x];for(let j=0,A=this.width;j<A;++j)switch(_[j]){case 0:h.append(" 0");break;case 1:h.append(" 1");break;default:h.append("  ");break}h.append(`
`)}return h.toString()}}class _a{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const h=new J;return h.append(`<<
`),h.append(" mode: "),h.append(this.mode?this.mode.toString():"null"),h.append(`
 ecLevel: `),h.append(this.ecLevel?this.ecLevel.toString():"null"),h.append(`
 version: `),h.append(this.version?this.version.toString():"null"),h.append(`
 maskPattern: `),h.append(this.maskPattern.toString()),this.matrix?(h.append(`
 matrix:
`),h.append(this.matrix.toString())):h.append(`
 matrix: null
`),h.append(`>>
`),h.toString()}setMode(h){this.mode=h}setECLevel(h){this.ecLevel=h}setVersion(h){this.version=h}setMaskPattern(h){this.maskPattern=h}setMatrix(h){this.matrix=h}static isValidMaskPattern(h){return h>=0&&h<_a.NUM_MASK_PATTERNS}}_a.NUM_MASK_PATTERNS=8;class jn extends d{}jn.kind="WriterException";class Ar{constructor(){}static clearMatrix(h){h.clear(255)}static buildMatrix(h,x,b,_,j){Ar.clearMatrix(j),Ar.embedBasicPatterns(b,j),Ar.embedTypeInfo(x,_,j),Ar.maybeEmbedVersionInfo(b,j),Ar.embedDataBits(h,_,j)}static embedBasicPatterns(h,x){Ar.embedPositionDetectionPatternsAndSeparators(x),Ar.embedDarkDotAtLeftBottomCorner(x),Ar.maybeEmbedPositionAdjustmentPatterns(h,x),Ar.embedTimingPatterns(x)}static embedTypeInfo(h,x,b){const _=new D;Ar.makeTypeInfoBits(h,x,_);for(let j=0,A=_.getSize();j<A;++j){const I=_.get(_.getSize()-1-j),F=Ar.TYPE_INFO_COORDINATES[j],X=F[0],ce=F[1];if(b.setBoolean(X,ce,I),j<8){const ge=b.getWidth()-j-1;b.setBoolean(ge,8,I)}else{const Ae=b.getHeight()-7+(j-8);b.setBoolean(8,Ae,I)}}}static maybeEmbedVersionInfo(h,x){if(h.getVersionNumber()<7)return;const b=new D;Ar.makeVersionInfoBits(h,b);let _=17;for(let j=0;j<6;++j)for(let A=0;A<3;++A){const I=b.get(_);_--,x.setBoolean(j,x.getHeight()-11+A,I),x.setBoolean(x.getHeight()-11+A,j,I)}}static embedDataBits(h,x,b){let _=0,j=-1,A=b.getWidth()-1,I=b.getHeight()-1;for(;A>0;){for(A===6&&(A-=1);I>=0&&I<b.getHeight();){for(let F=0;F<2;++F){const X=A-F;if(!Ar.isEmpty(b.get(X,I)))continue;let ce;_<h.getSize()?(ce=h.get(_),++_):ce=!1,x!==255&&$r.getDataMaskBit(x,X,I)&&(ce=!ce),b.setBoolean(X,I,ce)}I+=j}j=-j,I+=j,A-=2}if(_!==h.getSize())throw new jn("Not all bits consumed: "+_+"/"+h.getSize())}static findMSBSet(h){return 32-E.numberOfLeadingZeros(h)}static calculateBCHCode(h,x){if(x===0)throw new p("0 polynomial");const b=Ar.findMSBSet(x);for(h<<=b-1;Ar.findMSBSet(h)>=b;)h^=x<<Ar.findMSBSet(h)-b;return h}static makeTypeInfoBits(h,x,b){if(!_a.isValidMaskPattern(x))throw new jn("Invalid mask pattern");const _=h.getBits()<<3|x;b.appendBits(_,5);const j=Ar.calculateBCHCode(_,Ar.TYPE_INFO_POLY);b.appendBits(j,10);const A=new D;if(A.appendBits(Ar.TYPE_INFO_MASK_PATTERN,15),b.xor(A),b.getSize()!==15)throw new jn("should not happen but we got: "+b.getSize())}static makeVersionInfoBits(h,x){x.appendBits(h.getVersionNumber(),6);const b=Ar.calculateBCHCode(h.getVersionNumber(),Ar.VERSION_INFO_POLY);if(x.appendBits(b,12),x.getSize()!==18)throw new jn("should not happen but we got: "+x.getSize())}static isEmpty(h){return h===255}static embedTimingPatterns(h){for(let x=8;x<h.getWidth()-8;++x){const b=(x+1)%2;Ar.isEmpty(h.get(x,6))&&h.setNumber(x,6,b),Ar.isEmpty(h.get(6,x))&&h.setNumber(6,x,b)}}static embedDarkDotAtLeftBottomCorner(h){if(h.get(8,h.getHeight()-8)===0)throw new jn;h.setNumber(8,h.getHeight()-8,1)}static embedHorizontalSeparationPattern(h,x,b){for(let _=0;_<8;++_){if(!Ar.isEmpty(b.get(h+_,x)))throw new jn;b.setNumber(h+_,x,0)}}static embedVerticalSeparationPattern(h,x,b){for(let _=0;_<7;++_){if(!Ar.isEmpty(b.get(h,x+_)))throw new jn;b.setNumber(h,x+_,0)}}static embedPositionAdjustmentPattern(h,x,b){for(let _=0;_<5;++_){const j=Ar.POSITION_ADJUSTMENT_PATTERN[_];for(let A=0;A<5;++A)b.setNumber(h+A,x+_,j[A])}}static embedPositionDetectionPattern(h,x,b){for(let _=0;_<7;++_){const j=Ar.POSITION_DETECTION_PATTERN[_];for(let A=0;A<7;++A)b.setNumber(h+A,x+_,j[A])}}static embedPositionDetectionPatternsAndSeparators(h){const x=Ar.POSITION_DETECTION_PATTERN[0].length;Ar.embedPositionDetectionPattern(0,0,h),Ar.embedPositionDetectionPattern(h.getWidth()-x,0,h),Ar.embedPositionDetectionPattern(0,h.getWidth()-x,h);const b=8;Ar.embedHorizontalSeparationPattern(0,b-1,h),Ar.embedHorizontalSeparationPattern(h.getWidth()-b,b-1,h),Ar.embedHorizontalSeparationPattern(0,h.getWidth()-b,h);const _=7;Ar.embedVerticalSeparationPattern(_,0,h),Ar.embedVerticalSeparationPattern(h.getHeight()-_-1,0,h),Ar.embedVerticalSeparationPattern(_,h.getHeight()-_,h)}static maybeEmbedPositionAdjustmentPatterns(h,x){if(h.getVersionNumber()<2)return;const b=h.getVersionNumber()-1,_=Ar.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[b];for(let j=0,A=_.length;j!==A;j++){const I=_[j];if(I>=0)for(let F=0;F!==A;F++){const X=_[F];X>=0&&Ar.isEmpty(x.get(X,I))&&Ar.embedPositionAdjustmentPattern(X-2,I-2,x)}}}}Ar.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),Ar.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),Ar.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),Ar.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),Ar.VERSION_INFO_POLY=7973,Ar.TYPE_INFO_POLY=1335,Ar.TYPE_INFO_MASK_PATTERN=21522;class qs{constructor(h,x){this.dataBytes=h,this.errorCorrectionBytes=x}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class In{constructor(){}static calculateMaskPenalty(h){return $r.applyMaskPenaltyRule1(h)+$r.applyMaskPenaltyRule2(h)+$r.applyMaskPenaltyRule3(h)+$r.applyMaskPenaltyRule4(h)}static encode(h,x,b=null){let _=In.DEFAULT_BYTE_MODE_ENCODING;const j=b!==null&&b.get(Cr.CHARACTER_SET)!==void 0;j&&(_=b.get(Cr.CHARACTER_SET).toString());const A=this.chooseMode(h,_),I=new D;if(A===Dr.BYTE&&(j||In.DEFAULT_BYTE_MODE_ENCODING!==_)){const qt=z.getCharacterSetECIByName(_);qt!==void 0&&this.appendECI(qt,I)}this.appendModeInfo(A,I);const F=new D;this.appendBytes(h,A,F,_);let X;if(b!==null&&b.get(Cr.QR_VERSION)!==void 0){const qt=Number.parseInt(b.get(Cr.QR_VERSION).toString(),10);X=vr.getVersionForNumber(qt);const Ft=this.calculateBitsNeeded(A,I,F,X);if(!this.willFit(Ft,X,x))throw new jn("Data too big for requested version")}else X=this.recommendVersion(x,A,I,F);const ce=new D;ce.appendBitArray(I);const ge=A===Dr.BYTE?F.getSizeInBytes():h.length;this.appendLengthInfo(ge,X,A,ce),ce.appendBitArray(F);const Ae=X.getECBlocksForLevel(x),qe=X.getTotalCodewords()-Ae.getTotalECCodewords();this.terminateBits(qe,ce);const Ye=this.interleaveWithECBytes(ce,X.getTotalCodewords(),qe,Ae.getNumBlocks()),rt=new _a;rt.setECLevel(x),rt.setMode(A),rt.setVersion(X);const pt=X.getDimensionForVersion(),St=new aa(pt,pt),zt=this.chooseMaskPattern(Ye,x,X,St);return rt.setMaskPattern(zt),Ar.buildMatrix(Ye,x,X,zt,St),rt.setMatrix(St),rt}static recommendVersion(h,x,b,_){const j=this.calculateBitsNeeded(x,b,_,vr.getVersionForNumber(1)),A=this.chooseVersion(j,h),I=this.calculateBitsNeeded(x,b,_,A);return this.chooseVersion(I,h)}static calculateBitsNeeded(h,x,b,_){return x.getSize()+h.getCharacterCountBits(_)+b.getSize()}static getAlphanumericCode(h){return h<In.ALPHANUMERIC_TABLE.length?In.ALPHANUMERIC_TABLE[h]:-1}static chooseMode(h,x=null){if(z.SJIS.getName()===x&&this.isOnlyDoubleByteKanji(h))return Dr.KANJI;let b=!1,_=!1;for(let j=0,A=h.length;j<A;++j){const I=h.charAt(j);if(In.isDigit(I))b=!0;else if(this.getAlphanumericCode(I.charCodeAt(0))!==-1)_=!0;else return Dr.BYTE}return _?Dr.ALPHANUMERIC:b?Dr.NUMERIC:Dr.BYTE}static isOnlyDoubleByteKanji(h){let x;try{x=H.encode(h,z.SJIS)}catch{return!1}const b=x.length;if(b%2!==0)return!1;for(let _=0;_<b;_+=2){const j=x[_]&255;if((j<129||j>159)&&(j<224||j>235))return!1}return!0}static chooseMaskPattern(h,x,b,_){let j=Number.MAX_SAFE_INTEGER,A=-1;for(let I=0;I<_a.NUM_MASK_PATTERNS;I++){Ar.buildMatrix(h,x,b,I,_);let F=this.calculateMaskPenalty(_);F<j&&(j=F,A=I)}return A}static chooseVersion(h,x){for(let b=1;b<=40;b++){const _=vr.getVersionForNumber(b);if(In.willFit(h,_,x))return _}throw new jn("Data too big")}static willFit(h,x,b){const _=x.getTotalCodewords(),A=x.getECBlocksForLevel(b).getTotalECCodewords(),I=_-A,F=(h+7)/8;return I>=F}static terminateBits(h,x){const b=h*8;if(x.getSize()>b)throw new jn("data bits cannot fit in the QR Code"+x.getSize()+" > "+b);for(let A=0;A<4&&x.getSize()<b;++A)x.appendBit(!1);const _=x.getSize()&7;if(_>0)for(let A=_;A<8;A++)x.appendBit(!1);const j=h-x.getSizeInBytes();for(let A=0;A<j;++A)x.appendBits((A&1)===0?236:17,8);if(x.getSize()!==b)throw new jn("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(h,x,b,_,j,A){if(_>=b)throw new jn("Block ID too large");const I=h%b,F=b-I,X=Math.floor(h/b),ce=X+1,ge=Math.floor(x/b),Ae=ge+1,qe=X-ge,Ye=ce-Ae;if(qe!==Ye)throw new jn("EC bytes mismatch");if(b!==F+I)throw new jn("RS blocks mismatch");if(h!==(ge+qe)*F+(Ae+Ye)*I)throw new jn("Total bytes mismatch");_<F?(j[0]=ge,A[0]=qe):(j[0]=Ae,A[0]=Ye)}static interleaveWithECBytes(h,x,b,_){if(h.getSizeInBytes()!==b)throw new jn("Number of bits and data bytes does not match");let j=0,A=0,I=0;const F=new Array;for(let ce=0;ce<_;++ce){const ge=new Int32Array(1),Ae=new Int32Array(1);In.getNumDataBytesAndNumECBytesForBlockID(x,b,_,ce,ge,Ae);const qe=ge[0],Ye=new Uint8Array(qe);h.toBytes(8*j,Ye,0,qe);const rt=In.generateECBytes(Ye,Ae[0]);F.push(new qs(Ye,rt)),A=Math.max(A,qe),I=Math.max(I,rt.length),j+=ge[0]}if(b!==j)throw new jn("Data bytes does not match offset");const X=new D;for(let ce=0;ce<A;++ce)for(const ge of F){const Ae=ge.getDataBytes();ce<Ae.length&&X.appendBits(Ae[ce],8)}for(let ce=0;ce<I;++ce)for(const ge of F){const Ae=ge.getErrorCorrectionBytes();ce<Ae.length&&X.appendBits(Ae[ce],8)}if(x!==X.getSizeInBytes())throw new jn("Interleaving error: "+x+" and "+X.getSizeInBytes()+" differ.");return X}static generateECBytes(h,x){const b=h.length,_=new Int32Array(b+x);for(let A=0;A<b;A++)_[A]=h[A]&255;new kn(Ee.QR_CODE_FIELD_256).encode(_,x);const j=new Uint8Array(x);for(let A=0;A<x;A++)j[A]=_[b+A];return j}static appendModeInfo(h,x){x.appendBits(h.getBits(),4)}static appendLengthInfo(h,x,b,_){const j=b.getCharacterCountBits(x);if(h>=1<<j)throw new jn(h+" is bigger than "+((1<<j)-1));_.appendBits(h,j)}static appendBytes(h,x,b,_){switch(x){case Dr.NUMERIC:In.appendNumericBytes(h,b);break;case Dr.ALPHANUMERIC:In.appendAlphanumericBytes(h,b);break;case Dr.BYTE:In.append8BitBytes(h,b,_);break;case Dr.KANJI:In.appendKanjiBytes(h,b);break;default:throw new jn("Invalid mode: "+x)}}static getDigit(h){return h.charCodeAt(0)-48}static isDigit(h){const x=In.getDigit(h);return x>=0&&x<=9}static appendNumericBytes(h,x){const b=h.length;let _=0;for(;_<b;){const j=In.getDigit(h.charAt(_));if(_+2<b){const A=In.getDigit(h.charAt(_+1)),I=In.getDigit(h.charAt(_+2));x.appendBits(j*100+A*10+I,10),_+=3}else if(_+1<b){const A=In.getDigit(h.charAt(_+1));x.appendBits(j*10+A,7),_+=2}else x.appendBits(j,4),_++}}static appendAlphanumericBytes(h,x){const b=h.length;let _=0;for(;_<b;){const j=In.getAlphanumericCode(h.charCodeAt(_));if(j===-1)throw new jn;if(_+1<b){const A=In.getAlphanumericCode(h.charCodeAt(_+1));if(A===-1)throw new jn;x.appendBits(j*45+A,11),_+=2}else x.appendBits(j,6),_++}}static append8BitBytes(h,x,b){let _;try{_=H.encode(h,b)}catch(j){throw new jn(j)}for(let j=0,A=_.length;j!==A;j++){const I=_[j];x.appendBits(I,8)}}static appendKanjiBytes(h,x){let b;try{b=H.encode(h,z.SJIS)}catch(j){throw new jn(j)}const _=b.length;for(let j=0;j<_;j+=2){const A=b[j]&255,I=b[j+1]&255,F=A<<8&4294967295|I;let X=-1;if(F>=33088&&F<=40956?X=F-33088:F>=57408&&F<=60351&&(X=F-49472),X===-1)throw new jn("Invalid byte sequence");const ce=(X>>8)*192+(X&255);x.appendBits(ce,13)}}static appendECI(h,x){x.appendBits(Dr.ECI.getBits(),4),x.appendBits(h.getValue(),8)}}In.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),In.DEFAULT_BYTE_MODE_ENCODING=z.UTF8.getName();class os{write(h,x,b,_=null){if(h.length===0)throw new p("Found empty contents");if(x<0||b<0)throw new p("Requested dimensions are too small: "+x+"x"+b);let j=pr.L,A=os.QUIET_ZONE_SIZE;_!==null&&(_.get(Cr.ERROR_CORRECTION)!==void 0&&(j=pr.fromString(_.get(Cr.ERROR_CORRECTION).toString())),_.get(Cr.MARGIN)!==void 0&&(A=Number.parseInt(_.get(Cr.MARGIN).toString(),10)));const I=In.encode(h,j,_);return this.renderResult(I,x,b,A)}writeToDom(h,x,b,_,j=null){typeof h=="string"&&(h=document.querySelector(h));const A=this.write(x,b,_,j);h&&h.appendChild(A)}renderResult(h,x,b,_){const j=h.getMatrix();if(j===null)throw new ye;const A=j.getWidth(),I=j.getHeight(),F=A+_*2,X=I+_*2,ce=Math.max(x,F),ge=Math.max(b,X),Ae=Math.min(Math.floor(ce/F),Math.floor(ge/X)),qe=Math.floor((ce-A*Ae)/2),Ye=Math.floor((ge-I*Ae)/2),rt=this.createSVGElement(ce,ge);for(let pt=0,St=Ye;pt<I;pt++,St+=Ae)for(let zt=0,qt=qe;zt<A;zt++,qt+=Ae)if(j.get(zt,pt)===1){const Ft=this.createSvgRectElement(qt,St,Ae,Ae);rt.appendChild(Ft)}return rt}createSVGElement(h,x){const b=document.createElementNS(os.SVG_NS,"svg");return b.setAttributeNS(null,"height",h.toString()),b.setAttributeNS(null,"width",x.toString()),b}createSvgRectElement(h,x,b,_){const j=document.createElementNS(os.SVG_NS,"rect");return j.setAttributeNS(null,"x",h.toString()),j.setAttributeNS(null,"y",x.toString()),j.setAttributeNS(null,"height",b.toString()),j.setAttributeNS(null,"width",_.toString()),j.setAttributeNS(null,"fill","#000000"),j}}os.QUIET_ZONE_SIZE=4,os.SVG_NS="http://www.w3.org/2000/svg";class hi{encode(h,x,b,_,j){if(h.length===0)throw new p("Found empty contents");if(x!==Q.QR_CODE)throw new p("Can only encode QR_CODE, but got "+x);if(b<0||_<0)throw new p(`Requested dimensions are too small: ${b}x${_}`);let A=pr.L,I=hi.QUIET_ZONE_SIZE;j!==null&&(j.get(Cr.ERROR_CORRECTION)!==void 0&&(A=pr.fromString(j.get(Cr.ERROR_CORRECTION).toString())),j.get(Cr.MARGIN)!==void 0&&(I=Number.parseInt(j.get(Cr.MARGIN).toString(),10)));const F=In.encode(h,A,j);return hi.renderResult(F,b,_,I)}static renderResult(h,x,b,_){const j=h.getMatrix();if(j===null)throw new ye;const A=j.getWidth(),I=j.getHeight(),F=A+_*2,X=I+_*2,ce=Math.max(x,F),ge=Math.max(b,X),Ae=Math.min(Math.floor(ce/F),Math.floor(ge/X)),qe=Math.floor((ce-A*Ae)/2),Ye=Math.floor((ge-I*Ae)/2),rt=new ae(ce,ge);for(let pt=0,St=Ye;pt<I;pt++,St+=Ae)for(let zt=0,qt=qe;zt<A;zt++,qt+=Ae)j.get(zt,pt)===1&&rt.setRegion(qt,St,Ae,Ae);return rt}}hi.QUIET_ZONE_SIZE=4;class sl{encode(h,x,b,_,j){let A;switch(x){case Q.QR_CODE:A=new hi;break;default:throw new p("No encoder available for format "+x)}return A.encode(h,x,b,_,j)}}class Sl extends ke{constructor(h,x,b,_,j,A,I,F){if(super(A,I),this.yuvData=h,this.dataWidth=x,this.dataHeight=b,this.left=_,this.top=j,_+A>x||j+I>b)throw new p("Crop rectangle does not fit within image data.");F&&this.reverseHorizontal(A,I)}getRow(h,x){if(h<0||h>=this.getHeight())throw new p("Requested row is outside the image: "+h);const b=this.getWidth();(x==null||x.length<b)&&(x=new Uint8ClampedArray(b));const _=(h+this.top)*this.dataWidth+this.left;return w.arraycopy(this.yuvData,_,x,0,b),x}getMatrix(){const h=this.getWidth(),x=this.getHeight();if(h===this.dataWidth&&x===this.dataHeight)return this.yuvData;const b=h*x,_=new Uint8ClampedArray(b);let j=this.top*this.dataWidth+this.left;if(h===this.dataWidth)return w.arraycopy(this.yuvData,j,_,0,b),_;for(let A=0;A<x;A++){const I=A*h;w.arraycopy(this.yuvData,j,_,I,h),j+=this.dataWidth}return _}isCropSupported(){return!0}crop(h,x,b,_){return new Sl(this.yuvData,this.dataWidth,this.dataHeight,this.left+h,this.top+x,b,_,!1)}renderThumbnail(){const h=this.getWidth()/Sl.THUMBNAIL_SCALE_FACTOR,x=this.getHeight()/Sl.THUMBNAIL_SCALE_FACTOR,b=new Int32Array(h*x),_=this.yuvData;let j=this.top*this.dataWidth+this.left;for(let A=0;A<x;A++){const I=A*h;for(let F=0;F<h;F++){const X=_[j+F*Sl.THUMBNAIL_SCALE_FACTOR]&255;b[I+F]=4278190080|X*65793}j+=this.dataWidth*Sl.THUMBNAIL_SCALE_FACTOR}return b}getThumbnailWidth(){return this.getWidth()/Sl.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/Sl.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(h,x){const b=this.yuvData;for(let _=0,j=this.top*this.dataWidth+this.left;_<x;_++,j+=this.dataWidth){const A=j+h/2;for(let I=j,F=j+h-1;I<A;I++,F--){const X=b[I];b[I]=b[F],b[F]=X}}}invert(){return new _e(this)}}Sl.THUMBNAIL_SCALE_FACTOR=2;class Fc extends ke{constructor(h,x,b,_,j,A,I){if(super(x,b),this.dataWidth=_,this.dataHeight=j,this.left=A,this.top=I,h.BYTES_PER_ELEMENT===4){const F=x*b,X=new Uint8ClampedArray(F);for(let ce=0;ce<F;ce++){const ge=h[ce],Ae=ge>>16&255,qe=ge>>7&510,Ye=ge&255;X[ce]=(Ae+qe+Ye)/4&255}this.luminances=X}else this.luminances=h;if(_===void 0&&(this.dataWidth=x),j===void 0&&(this.dataHeight=b),A===void 0&&(this.left=0),I===void 0&&(this.top=0),this.left+x>this.dataWidth||this.top+b>this.dataHeight)throw new p("Crop rectangle does not fit within image data.")}getRow(h,x){if(h<0||h>=this.getHeight())throw new p("Requested row is outside the image: "+h);const b=this.getWidth();(x==null||x.length<b)&&(x=new Uint8ClampedArray(b));const _=(h+this.top)*this.dataWidth+this.left;return w.arraycopy(this.luminances,_,x,0,b),x}getMatrix(){const h=this.getWidth(),x=this.getHeight();if(h===this.dataWidth&&x===this.dataHeight)return this.luminances;const b=h*x,_=new Uint8ClampedArray(b);let j=this.top*this.dataWidth+this.left;if(h===this.dataWidth)return w.arraycopy(this.luminances,j,_,0,b),_;for(let A=0;A<x;A++){const I=A*h;w.arraycopy(this.luminances,j,_,I,h),j+=this.dataWidth}return _}isCropSupported(){return!0}crop(h,x,b,_){return new Fc(this.luminances,b,_,this.dataWidth,this.dataHeight,this.left+h,this.top+x)}invert(){return new _e(this)}}class Bc extends z{static forName(h){return this.getCharacterSetECIByName(h)}}class Rl{}Rl.ISO_8859_1=z.ISO8859_1;class Fl{isCompact(){return this.compact}setCompact(h){this.compact=h}getSize(){return this.size}setSize(h){this.size=h}getLayers(){return this.layers}setLayers(h){this.layers=h}getCodeWords(){return this.codeWords}setCodeWords(h){this.codeWords=h}getMatrix(){return this.matrix}setMatrix(h){this.matrix=h}}class Uc{static singletonList(h){return[h]}static min(h,x){return h.sort(x)[0]}}class zc{constructor(h){this.previous=h}getPrevious(){return this.previous}}class xs extends zc{constructor(h,x,b){super(h),this.value=x,this.bitCount=b}appendTo(h,x){h.appendBits(this.value,this.bitCount)}add(h,x){return new xs(this,h,x)}addBinaryShift(h,x){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new xs(this,h,x)}toString(){let h=this.value&(1<<this.bitCount)-1;return h|=1<<this.bitCount,"<"+E.toBinaryString(h|1<<this.bitCount).substring(1)+">"}}class Mo extends xs{constructor(h,x,b){super(h,0,0),this.binaryShiftStart=x,this.binaryShiftByteCount=b}appendTo(h,x){for(let b=0;b<this.binaryShiftByteCount;b++)(b===0||b===31&&this.binaryShiftByteCount<=62)&&(h.appendBits(31,5),this.binaryShiftByteCount>62?h.appendBits(this.binaryShiftByteCount-31,16):b===0?h.appendBits(Math.min(this.binaryShiftByteCount,31),5):h.appendBits(this.binaryShiftByteCount-31,5)),h.appendBits(x[this.binaryShiftStart+b],8)}addBinaryShift(h,x){return new Mo(this,h,x)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function qc(pe,h,x){return new Mo(pe,h,x)}function Lo(pe,h,x){return new xs(pe,h,x)}const Ro=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Sa=0,Bl=1,fi=2,iu=3,ps=4,mo=new xs(null,0,0),xo=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function Qu(pe){for(let h of pe)O.fill(h,-1);return pe[Sa][ps]=0,pe[Bl][ps]=0,pe[Bl][Sa]=28,pe[iu][ps]=0,pe[fi][ps]=0,pe[fi][Sa]=15,pe}const Ul=Qu(O.createInt32Array(6,6));class mi{constructor(h,x,b,_){this.token=h,this.mode=x,this.binaryShiftByteCount=b,this.bitCount=_}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(h,x){let b=this.bitCount,_=this.token;if(h!==this.mode){let A=xo[this.mode][h];_=Lo(_,A&65535,A>>16),b+=A>>16}let j=h===fi?4:5;return _=Lo(_,x,j),new mi(_,h,0,b+j)}shiftAndAppend(h,x){let b=this.token,_=this.mode===fi?4:5;return b=Lo(b,Ul[this.mode][h],_),b=Lo(b,x,5),new mi(b,this.mode,0,this.bitCount+_+5)}addBinaryShiftChar(h){let x=this.token,b=this.mode,_=this.bitCount;if(this.mode===ps||this.mode===fi){let I=xo[b][Sa];x=Lo(x,I&65535,I>>16),_+=I>>16,b=Sa}let j=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,A=new mi(x,b,this.binaryShiftByteCount+1,_+j);return A.binaryShiftByteCount===2078&&(A=A.endBinaryShift(h+1)),A}endBinaryShift(h){if(this.binaryShiftByteCount===0)return this;let x=this.token;return x=qc(x,h-this.binaryShiftByteCount,this.binaryShiftByteCount),new mi(x,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(h){let x=this.bitCount+(xo[this.mode][h.mode]>>16);return this.binaryShiftByteCount<h.binaryShiftByteCount?x+=mi.calculateBinaryShiftCost(h)-mi.calculateBinaryShiftCost(this):this.binaryShiftByteCount>h.binaryShiftByteCount&&h.binaryShiftByteCount>0&&(x+=10),x<=h.bitCount}toBitArray(h){let x=[];for(let _=this.endBinaryShift(h.length).token;_!==null;_=_.getPrevious())x.unshift(_);let b=new D;for(const _ of x)_.appendTo(b,h);return b}toString(){return K.format("%s bits=%d bytes=%d",Ro[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(h){return h.binaryShiftByteCount>62?21:h.binaryShiftByteCount>31?20:h.binaryShiftByteCount>0?10:0}}mi.INITIAL_STATE=new mi(mo,Sa,0,0);function il(pe){const h=K.getCharCode(" "),x=K.getCharCode("."),b=K.getCharCode(",");pe[Sa][h]=1;const _=K.getCharCode("Z"),j=K.getCharCode("A");for(let Ae=j;Ae<=_;Ae++)pe[Sa][Ae]=Ae-j+2;pe[Bl][h]=1;const A=K.getCharCode("z"),I=K.getCharCode("a");for(let Ae=I;Ae<=A;Ae++)pe[Bl][Ae]=Ae-I+2;pe[fi][h]=1;const F=K.getCharCode("9"),X=K.getCharCode("0");for(let Ae=X;Ae<=F;Ae++)pe[fi][Ae]=Ae-X+2;pe[fi][b]=12,pe[fi][x]=13;const ce=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let Ae=0;Ae<ce.length;Ae++)pe[iu][K.getCharCode(ce[Ae])]=Ae;const ge=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let Ae=0;Ae<ge.length;Ae++)K.getCharCode(ge[Ae])>0&&(pe[ps][K.getCharCode(ge[Ae])]=Ae);return pe}const xi=il(O.createInt32Array(5,256));class ll{constructor(h){this.text=h}encode(){const h=K.getCharCode(" "),x=K.getCharCode(`
`);let b=Uc.singletonList(mi.INITIAL_STATE);for(let j=0;j<this.text.length;j++){let A,I=j+1<this.text.length?this.text[j+1]:0;switch(this.text[j]){case K.getCharCode("\r"):A=I===x?2:0;break;case K.getCharCode("."):A=I===h?3:0;break;case K.getCharCode(","):A=I===h?4:0;break;case K.getCharCode(":"):A=I===h?5:0;break;default:A=0}A>0?(b=ll.updateStateListForPair(b,j,A),j++):b=this.updateStateListForChar(b,j)}return Uc.min(b,(j,A)=>j.getBitCount()-A.getBitCount()).toBitArray(this.text)}updateStateListForChar(h,x){const b=[];for(let _ of h)this.updateStateForChar(_,x,b);return ll.simplifyStates(b)}updateStateForChar(h,x,b){let _=this.text[x]&255,j=xi[h.getMode()][_]>0,A=null;for(let I=0;I<=ps;I++){let F=xi[I][_];if(F>0){if(A==null&&(A=h.endBinaryShift(x)),!j||I===h.getMode()||I===fi){const X=A.latchAndAppend(I,F);b.push(X)}if(!j&&Ul[h.getMode()][I]>=0){const X=A.shiftAndAppend(I,F);b.push(X)}}}if(h.getBinaryShiftByteCount()>0||xi[h.getMode()][_]===0){let I=h.addBinaryShiftChar(x);b.push(I)}}static updateStateListForPair(h,x,b){const _=[];for(let j of h)this.updateStateForPair(j,x,b,_);return this.simplifyStates(_)}static updateStateForPair(h,x,b,_){let j=h.endBinaryShift(x);if(_.push(j.latchAndAppend(ps,b)),h.getMode()!==ps&&_.push(j.shiftAndAppend(ps,b)),b===3||b===4){let A=j.latchAndAppend(fi,16-b).latchAndAppend(fi,1);_.push(A)}if(h.getBinaryShiftByteCount()>0){let A=h.addBinaryShiftChar(x).addBinaryShiftChar(x+1);_.push(A)}}static simplifyStates(h){let x=[];for(const b of h){let _=!0;for(const j of x){if(j.isBetterThanOrEqualTo(b)){_=!1;break}b.isBetterThanOrEqualTo(j)&&(x=x.filter(A=>A!==j))}_&&x.push(b)}return x}}class zn{constructor(){}static encodeBytes(h){return zn.encode(h,zn.DEFAULT_EC_PERCENT,zn.DEFAULT_AZTEC_LAYERS)}static encode(h,x,b){let _=new ll(h).encode(),j=E.truncDivision(_.getSize()*x,100)+11,A=_.getSize()+j,I,F,X,ce,ge;if(b!==zn.DEFAULT_AZTEC_LAYERS){if(I=b<0,F=Math.abs(b),F>(I?zn.MAX_NB_BITS_COMPACT:zn.MAX_NB_BITS))throw new p(K.format("Illegal value %s for layers",b));X=zn.totalBitsInLayer(F,I),ce=zn.WORD_SIZE[F];let Ft=X-X%ce;if(ge=zn.stuffBits(_,ce),ge.getSize()+j>Ft)throw new p("Data to large for user specified layer");if(I&&ge.getSize()>ce*64)throw new p("Data to large for user specified layer")}else{ce=0,ge=null;for(let Ft=0;;Ft++){if(Ft>zn.MAX_NB_BITS)throw new p("Data too large for an Aztec code");if(I=Ft<=3,F=I?Ft+1:Ft,X=zn.totalBitsInLayer(F,I),A>X)continue;(ge==null||ce!==zn.WORD_SIZE[F])&&(ce=zn.WORD_SIZE[F],ge=zn.stuffBits(_,ce));let sn=X-X%ce;if(!(I&&ge.getSize()>ce*64)&&ge.getSize()+j<=sn)break}}let Ae=zn.generateCheckWords(ge,X,ce),qe=ge.getSize()/ce,Ye=zn.generateModeMessage(I,F,qe),rt=(I?11:14)+F*4,pt=new Int32Array(rt),St;if(I){St=rt;for(let Ft=0;Ft<pt.length;Ft++)pt[Ft]=Ft}else{St=rt+1+2*E.truncDivision(E.truncDivision(rt,2)-1,15);let Ft=E.truncDivision(rt,2),sn=E.truncDivision(St,2);for(let gn=0;gn<Ft;gn++){let Ya=gn+E.truncDivision(gn,15);pt[Ft-gn-1]=sn-Ya-1,pt[Ft+gn]=sn+Ya+1}}let zt=new ae(St);for(let Ft=0,sn=0;Ft<F;Ft++){let gn=(F-Ft)*4+(I?9:12);for(let Ya=0;Ya<gn;Ya++){let pi=Ya*2;for(let Xs=0;Xs<2;Xs++)Ae.get(sn+pi+Xs)&&zt.set(pt[Ft*2+Xs],pt[Ft*2+Ya]),Ae.get(sn+gn*2+pi+Xs)&&zt.set(pt[Ft*2+Ya],pt[rt-1-Ft*2-Xs]),Ae.get(sn+gn*4+pi+Xs)&&zt.set(pt[rt-1-Ft*2-Xs],pt[rt-1-Ft*2-Ya]),Ae.get(sn+gn*6+pi+Xs)&&zt.set(pt[rt-1-Ft*2-Ya],pt[Ft*2+Xs])}sn+=gn*8}if(zn.drawModeMessage(zt,I,St,Ye),I)zn.drawBullsEye(zt,E.truncDivision(St,2),5);else{zn.drawBullsEye(zt,E.truncDivision(St,2),7);for(let Ft=0,sn=0;Ft<E.truncDivision(rt,2)-1;Ft+=15,sn+=16)for(let gn=E.truncDivision(St,2)&1;gn<St;gn+=2)zt.set(E.truncDivision(St,2)-sn,gn),zt.set(E.truncDivision(St,2)+sn,gn),zt.set(gn,E.truncDivision(St,2)-sn),zt.set(gn,E.truncDivision(St,2)+sn)}let qt=new Fl;return qt.setCompact(I),qt.setSize(St),qt.setLayers(F),qt.setCodeWords(qe),qt.setMatrix(zt),qt}static drawBullsEye(h,x,b){for(let _=0;_<b;_+=2)for(let j=x-_;j<=x+_;j++)h.set(j,x-_),h.set(j,x+_),h.set(x-_,j),h.set(x+_,j);h.set(x-b,x-b),h.set(x-b+1,x-b),h.set(x-b,x-b+1),h.set(x+b,x-b),h.set(x+b,x-b+1),h.set(x+b,x+b-1)}static generateModeMessage(h,x,b){let _=new D;return h?(_.appendBits(x-1,2),_.appendBits(b-1,6),_=zn.generateCheckWords(_,28,4)):(_.appendBits(x-1,5),_.appendBits(b-1,11),_=zn.generateCheckWords(_,40,4)),_}static drawModeMessage(h,x,b,_){let j=E.truncDivision(b,2);if(x)for(let A=0;A<7;A++){let I=j-3+A;_.get(A)&&h.set(I,j-5),_.get(A+7)&&h.set(j+5,I),_.get(20-A)&&h.set(I,j+5),_.get(27-A)&&h.set(j-5,I)}else for(let A=0;A<10;A++){let I=j-5+A+E.truncDivision(A,5);_.get(A)&&h.set(I,j-7),_.get(A+10)&&h.set(j+7,I),_.get(29-A)&&h.set(I,j+7),_.get(39-A)&&h.set(j-7,I)}}static generateCheckWords(h,x,b){let _=h.getSize()/b,j=new kn(zn.getGF(b)),A=E.truncDivision(x,b),I=zn.bitsToWords(h,b,A);j.encode(I,A-_);let F=x%b,X=new D;X.appendBits(0,F);for(const ce of Array.from(I))X.appendBits(ce,b);return X}static bitsToWords(h,x,b){let _=new Int32Array(b),j,A;for(j=0,A=h.getSize()/x;j<A;j++){let I=0;for(let F=0;F<x;F++)I|=h.get(j*x+F)?1<<x-F-1:0;_[j]=I}return _}static getGF(h){switch(h){case 4:return Ee.AZTEC_PARAM;case 6:return Ee.AZTEC_DATA_6;case 8:return Ee.AZTEC_DATA_8;case 10:return Ee.AZTEC_DATA_10;case 12:return Ee.AZTEC_DATA_12;default:throw new p("Unsupported word size "+h)}}static stuffBits(h,x){let b=new D,_=h.getSize(),j=(1<<x)-2;for(let A=0;A<_;A+=x){let I=0;for(let F=0;F<x;F++)(A+F>=_||h.get(A+F))&&(I|=1<<x-1-F);(I&j)===j?(b.appendBits(I&j,x),A--):(I&j)===0?(b.appendBits(I|1,x),A--):b.appendBits(I,x)}return b}static totalBitsInLayer(h,x){return((x?88:112)+16*h)*h}}zn.DEFAULT_EC_PERCENT=33,zn.DEFAULT_AZTEC_LAYERS=0,zn.MAX_NB_BITS=32,zn.MAX_NB_BITS_COMPACT=4,zn.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class zl{encode(h,x,b,_){return this.encodeWithHints(h,x,b,_,null)}encodeWithHints(h,x,b,_,j){let A=Rl.ISO_8859_1,I=zn.DEFAULT_EC_PERCENT,F=zn.DEFAULT_AZTEC_LAYERS;return j!=null&&(j.has(Cr.CHARACTER_SET)&&(A=Bc.forName(j.get(Cr.CHARACTER_SET).toString())),j.has(Cr.ERROR_CORRECTION)&&(I=E.parseInt(j.get(Cr.ERROR_CORRECTION).toString())),j.has(Cr.AZTEC_LAYERS)&&(F=E.parseInt(j.get(Cr.AZTEC_LAYERS).toString()))),zl.encodeLayers(h,x,b,_,A,I,F)}static encodeLayers(h,x,b,_,j,A,I){if(x!==Q.AZTEC)throw new p("Can only encode AZTEC, but got "+x);let F=zn.encode(K.getBytes(h,j),A,I);return zl.renderResult(F,b,_)}static renderResult(h,x,b){let _=h.getMatrix();if(_==null)throw new ye;let j=_.getWidth(),A=_.getHeight(),I=Math.max(x,j),F=Math.max(b,A),X=Math.min(I/j,F/A),ce=(I-j*X)/2,ge=(F-A*X)/2,Ae=new ae(I,F);for(let qe=0,Ye=ge;qe<A;qe++,Ye+=X)for(let rt=0,pt=ce;rt<j;rt++,pt+=X)_.get(rt,qe)&&Ae.setRegion(pt,Ye,X,X);return Ae}}r.AbstractExpandedDecoder=Ie,r.ArgumentException=f,r.ArithmeticException=le,r.AztecCode=Fl,r.AztecCodeReader=cr,r.AztecCodeWriter=zl,r.AztecDecoder=ut,r.AztecDetector=Vt,r.AztecDetectorResult=Dt,r.AztecEncoder=zn,r.AztecHighLevelEncoder=ll,r.AztecPoint=Gt,r.BarcodeFormat=Q,r.Binarizer=N,r.BinaryBitmap=y,r.BitArray=D,r.BitMatrix=ae,r.BitSource=cn,r.BrowserAztecCodeReader=br,r.BrowserBarcodeReader=Ci,r.BrowserCodeReader=ee,r.BrowserDatamatrixCodeReader=dr,r.BrowserMultiFormatReader=gt,r.BrowserPDF417Reader=Ut,r.BrowserQRCodeReader=lr,r.BrowserQRCodeSvgWriter=os,r.CharacterSetECI=z,r.ChecksumException=g,r.Code128Reader=xt,r.Code39Reader=yr,r.DataMatrixDecodedBitStreamParser=rl,r.DataMatrixReader=Je,r.DecodeHintType=W,r.DecoderResult=ie,r.DefaultGridSampler=Mr,r.DetectorResult=Kt,r.EAN13Reader=Ke,r.EncodeHintType=Cr,r.Exception=d,r.FormatException=R,r.GenericGF=Ee,r.GenericGFPoly=be,r.GlobalHistogramBinarizer=ue,r.GridSampler=xr,r.GridSamplerInstance=rr,r.HTMLCanvasElementLuminanceSource=Le,r.HybridBinarizer=fe,r.ITFReader=Ge,r.IllegalArgumentException=p,r.IllegalStateException=ye,r.InvertedLuminanceSource=_e,r.LuminanceSource=ke,r.MathUtils=nt,r.MultiFormatOneDReader=Na,r.MultiFormatReader=tt,r.MultiFormatWriter=sl,r.NotFoundException=se,r.OneDReader=ar,r.PDF417DecodedBitStreamParser=Tt,r.PDF417DecoderErrorCorrection=al,r.PDF417Reader=ve,r.PDF417ResultMetadata=Io,r.PerspectiveTransform=nr,r.PlanarYUVLuminanceSource=Sl,r.QRCodeByteMatrix=aa,r.QRCodeDataMask=za,r.QRCodeDecodedBitStreamParser=na,r.QRCodeDecoderErrorCorrectionLevel=pr,r.QRCodeDecoderFormatInformation=dn,r.QRCodeEncoder=In,r.QRCodeEncoderQRCode=_a,r.QRCodeMaskUtil=$r,r.QRCodeMatrixUtil=Ar,r.QRCodeMode=Dr,r.QRCodeReader=uo,r.QRCodeVersion=vr,r.QRCodeWriter=hi,r.RGBLuminanceSource=Fc,r.RSS14Reader=en,r.RSSExpandedReader=Pt,r.ReaderException=He,r.ReedSolomonDecoder=at,r.ReedSolomonEncoder=kn,r.ReedSolomonException=Me,r.Result=Y,r.ResultMetadataType=me,r.ResultPoint=We,r.StringUtils=K,r.UnsupportedOperationException=Z,r.VideoInputDevice=xe,r.WhiteRectangleDetector=fr,r.WriterException=jn,r.ZXingArrays=O,r.ZXingCharset=Bc,r.ZXingInteger=E,r.ZXingStandardCharsets=Rl,r.ZXingStringBuilder=J,r.ZXingStringEncoding=H,r.ZXingSystem=w,r.createAbstractExpandedDecoder=ir,Object.defineProperty(r,"__esModule",{value:!0})}))})(kg,kg.exports)),kg.exports}var Ns=j6e();const C6e=gd(Ns),A6e=r6({__proto__:null,default:C6e},[Ns]);var FD=(function(){function e(t,r,n){if(this.formatMap=new Map([[Vr.QR_CODE,Ns.BarcodeFormat.QR_CODE],[Vr.AZTEC,Ns.BarcodeFormat.AZTEC],[Vr.CODABAR,Ns.BarcodeFormat.CODABAR],[Vr.CODE_39,Ns.BarcodeFormat.CODE_39],[Vr.CODE_93,Ns.BarcodeFormat.CODE_93],[Vr.CODE_128,Ns.BarcodeFormat.CODE_128],[Vr.DATA_MATRIX,Ns.BarcodeFormat.DATA_MATRIX],[Vr.MAXICODE,Ns.BarcodeFormat.MAXICODE],[Vr.ITF,Ns.BarcodeFormat.ITF],[Vr.EAN_13,Ns.BarcodeFormat.EAN_13],[Vr.EAN_8,Ns.BarcodeFormat.EAN_8],[Vr.PDF_417,Ns.BarcodeFormat.PDF_417],[Vr.RSS_14,Ns.BarcodeFormat.RSS_14],[Vr.RSS_EXPANDED,Ns.BarcodeFormat.RSS_EXPANDED],[Vr.UPC_A,Ns.BarcodeFormat.UPC_A],[Vr.UPC_E,Ns.BarcodeFormat.UPC_E],[Vr.UPC_EAN_EXTENSION,Ns.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!A6e)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=r,this.logger=n;var a=this.createZXingFormats(t),i=new Map;i.set(Ns.DecodeHintType.POSSIBLE_FORMATS,a),i.set(Ns.DecodeHintType.TRY_HARDER,!1),this.hints=i}return e.prototype.decodeAsync=function(t){var r=this;return new Promise(function(n,a){try{n(r.decode(t))}catch(i){a(i)}})},e.prototype.decode=function(t){var r=new Ns.MultiFormatReader(this.verbose,this.hints),n=new Ns.HTMLCanvasElementLuminanceSource(t),a=new Ns.BinaryBitmap(new Ns.HybridBinarizer(n)),i=r.decode(a);return{text:i.text,format:RV.create(this.toHtml5QrcodeSupportedFormats(i.format)),debugData:this.createDebugData()}},e.prototype.createReverseFormatMap=function(){var t=new Map;return this.formatMap.forEach(function(r,n,a){t.set(r,n)}),t},e.prototype.toHtml5QrcodeSupportedFormats=function(t){if(!this.reverseFormatMap.has(t))throw"reverseFormatMap doesn't have ".concat(t);return this.reverseFormatMap.get(t)},e.prototype.createZXingFormats=function(t){for(var r=[],n=0,a=t;n<a.length;n++){var i=a[n];this.formatMap.has(i)?r.push(this.formatMap.get(i)):this.logger.logError("".concat(i," is not supported by")+"ZXingHtml5QrcodeShim")}return r},e.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},e})(),E6e=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function o(f){try{d(n.next(f))}catch(p){l(p)}}function c(f){try{d(n.throw(f))}catch(p){l(p)}}function d(f){f.done?i(f.value):a(f.value).then(o,c)}d((n=n.apply(e,t||[])).next())})},T6e=function(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,a,i,l;return l={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function o(d){return function(f){return c([d,f])}}function c(d){if(n)throw new TypeError("Generator is already executing.");for(;l&&(l=0,d[0]&&(r=0)),r;)try{if(n=1,a&&(i=d[0]&2?a.return:d[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,d[1])).done)return i;switch(a=0,i&&(d=[d[0]&2,i.value]),d[0]){case 0:case 1:i=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,a=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!i||d[1]>i[0]&&d[1]<i[3])){r.label=d[1];break}if(d[0]===6&&r.label<i[1]){r.label=i[1],i=d;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(d);break}i[2]&&r.ops.pop(),r.trys.pop();continue}d=t.call(e,r)}catch(f){d=[6,f],a=0}finally{n=i=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},BD=(function(){function e(t,r,n){if(this.formatMap=new Map([[Vr.QR_CODE,"qr_code"],[Vr.AZTEC,"aztec"],[Vr.CODABAR,"codabar"],[Vr.CODE_39,"code_39"],[Vr.CODE_93,"code_93"],[Vr.CODE_128,"code_128"],[Vr.DATA_MATRIX,"data_matrix"],[Vr.ITF,"itf"],[Vr.EAN_13,"ean_13"],[Vr.EAN_8,"ean_8"],[Vr.PDF_417,"pdf417"],[Vr.UPC_A,"upc_a"],[Vr.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!e.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=r,this.logger=n;var a=this.createBarcodeDetectorFormats(t);if(this.detector=new BarcodeDetector(a),!this.detector)throw"BarcodeDetector detector not supported"}return e.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var t=new BarcodeDetector({formats:["qr_code"]});return typeof t<"u"},e.prototype.decodeAsync=function(t){return E6e(this,void 0,void 0,function(){var r,n;return T6e(this,function(a){switch(a.label){case 0:return[4,this.detector.detect(t)];case 1:if(r=a.sent(),!r||r.length===0)throw"No barcode or QR code detected.";return n=this.selectLargestBarcode(r),[2,{text:n.rawValue,format:RV.create(this.toHtml5QrcodeSupportedFormats(n.format)),debugData:this.createDebugData()}]}})})},e.prototype.selectLargestBarcode=function(t){for(var r=null,n=0,a=0,i=t;a<i.length;a++){var l=i[a],o=l.boundingBox.width*l.boundingBox.height;o>n&&(n=o,r=l)}if(!r)throw"No largest barcode found";return r},e.prototype.createBarcodeDetectorFormats=function(t){for(var r=[],n=0,a=t;n<a.length;n++){var i=a[n];this.formatMap.has(i)?r.push(this.formatMap.get(i)):this.logger.warn("".concat(i," is not supported by")+"BarcodeDetectorDelegate")}return{formats:r}},e.prototype.toHtml5QrcodeSupportedFormats=function(t){if(!this.reverseFormatMap.has(t))throw"reverseFormatMap doesn't have ".concat(t);return this.reverseFormatMap.get(t)},e.prototype.createReverseFormatMap=function(){var t=new Map;return this.formatMap.forEach(function(r,n,a){t.set(r,n)}),t},e.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},e})(),UD=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function o(f){try{d(n.next(f))}catch(p){l(p)}}function c(f){try{d(n.throw(f))}catch(p){l(p)}}function d(f){f.done?i(f.value):a(f.value).then(o,c)}d((n=n.apply(e,t||[])).next())})},zD=function(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,a,i,l;return l={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function o(d){return function(f){return c([d,f])}}function c(d){if(n)throw new TypeError("Generator is already executing.");for(;l&&(l=0,d[0]&&(r=0)),r;)try{if(n=1,a&&(i=d[0]&2?a.return:d[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,d[1])).done)return i;switch(a=0,i&&(d=[d[0]&2,i.value]),d[0]){case 0:case 1:i=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,a=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!i||d[1]>i[0]&&d[1]<i[3])){r.label=d[1];break}if(d[0]===6&&r.label<i[1]){r.label=i[1],i=d;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(d);break}i[2]&&r.ops.pop(),r.trys.pop();continue}d=t.call(e,r)}catch(f){d=[6,f],a=0}finally{n=i=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},O6e=(function(){function e(t,r,n,a){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=n,r&&BD.isSupported()?(this.primaryDecoder=new BD(t,n,a),this.secondaryDecoder=new FD(t,n,a)):this.primaryDecoder=new FD(t,n,a)}return e.prototype.decodeAsync=function(t){return UD(this,void 0,void 0,function(){var r;return zD(this,function(n){switch(n.label){case 0:r=performance.now(),n.label=1;case 1:return n.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(t)];case 2:return[2,n.sent()];case 3:return this.possiblyLogPerformance(r),[7];case 4:return[2]}})})},e.prototype.decodeRobustlyAsync=function(t){return UD(this,void 0,void 0,function(){var r,n;return zD(this,function(a){switch(a.label){case 0:r=performance.now(),a.label=1;case 1:return a.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(t)];case 2:return[2,a.sent()];case 3:if(n=a.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(t)];throw n;case 4:return this.possiblyLogPerformance(r),[7];case 5:return[2]}})})},e.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},e.prototype.possiblyLogPerformance=function(t){if(this.verbose){var r=performance.now()-t;this.executionResults.push(r),this.executions++,this.possiblyFlushPerformanceReport()}},e.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var t=0,r=0,n=this.executionResults;r<n.length;r++){var a=n[r];t+=a}var i=t/this.executionResults.length;console.log("".concat(i," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},e})(),NA=(function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),Nw=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function o(f){try{d(n.next(f))}catch(p){l(p)}}function c(f){try{d(n.throw(f))}catch(p){l(p)}}function d(f){f.done?i(f.value):a(f.value).then(o,c)}d((n=n.apply(e,t||[])).next())})},_w=function(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,a,i,l;return l={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function o(d){return function(f){return c([d,f])}}function c(d){if(n)throw new TypeError("Generator is already executing.");for(;l&&(l=0,d[0]&&(r=0)),r;)try{if(n=1,a&&(i=d[0]&2?a.return:d[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,d[1])).done)return i;switch(a=0,i&&(d=[d[0]&2,i.value]),d[0]){case 0:case 1:i=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,a=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!i||d[1]>i[0]&&d[1]<i[3])){r.label=d[1];break}if(d[0]===6&&r.label<i[1]){r.label=i[1],i=d;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(d);break}i[2]&&r.ops.pop(),r.trys.pop();continue}d=t.call(e,r)}catch(f){d=[6,f],a=0}finally{n=i=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},BV=(function(){function e(t,r){this.name=t,this.track=r}return e.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},e.prototype.apply=function(t){var r={};r[this.name]=t;var n={advanced:[r]};return this.track.applyConstraints(n)},e.prototype.value=function(){var t=this.track.getSettings();if(this.name in t){var r=t[this.name];return r}return null},e})(),P6e=(function(e){NA(t,e);function t(r,n){return e.call(this,r,n)||this}return t.prototype.min=function(){return this.getCapabilities().min},t.prototype.max=function(){return this.getCapabilities().max},t.prototype.step=function(){return this.getCapabilities().step},t.prototype.apply=function(r){var n={};n[this.name]=r;var a={advanced:[n]};return this.track.applyConstraints(a)},t.prototype.getCapabilities=function(){this.failIfNotSupported();var r=this.track.getCapabilities(),n=r[this.name];return{min:n.min,max:n.max,step:n.step}},t.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},t})(BV),I6e=(function(e){NA(t,e);function t(r){return e.call(this,"zoom",r)||this}return t})(P6e),D6e=(function(e){NA(t,e);function t(r){return e.call(this,"torch",r)||this}return t})(BV),M6e=(function(){function e(t){this.track=t}return e.prototype.zoomFeature=function(){return new I6e(this.track)},e.prototype.torchFeature=function(){return new D6e(this.track)},e})(),L6e=(function(){function e(t,r,n){this.isClosed=!1,this.parentElement=t,this.mediaStream=r,this.callbacks=n,this.surface=this.createVideoElement(this.parentElement.clientWidth),t.append(this.surface)}return e.prototype.createVideoElement=function(t){var r=document.createElement("video");return r.style.width="".concat(t,"px"),r.style.display="block",r.muted=!0,r.setAttribute("muted","true"),r.playsInline=!0,r},e.prototype.setupSurface=function(){var t=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var r=function(){var n=t.surface.clientWidth,a=t.surface.clientHeight;t.callbacks.onRenderSurfaceReady(n,a),t.surface.removeEventListener("playing",r)};this.surface.addEventListener("playing",r),this.surface.srcObject=this.mediaStream,this.surface.play()},e.create=function(t,r,n,a){return Nw(this,void 0,void 0,function(){var i,l;return _w(this,function(o){switch(o.label){case 0:return i=new e(t,r,a),n.aspectRatio?(l={aspectRatio:n.aspectRatio},[4,i.getFirstTrackOrFail().applyConstraints(l)]):[3,2];case 1:o.sent(),o.label=2;case 2:return i.setupSurface(),[2,i]}})})},e.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},e.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},e.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},e.prototype.resume=function(t){this.failIfClosed();var r=this,n=function(){setTimeout(t,200),r.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.play()},e.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},e.prototype.getSurface=function(){return this.failIfClosed(),this.surface},e.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},e.prototype.applyVideoConstraints=function(t){return Nw(this,void 0,void 0,function(){return _w(this,function(r){if("aspectRatio"in t)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(t)]})})},e.prototype.close=function(){if(this.isClosed)return Promise.resolve();var t=this;return new Promise(function(r,n){var a=t.mediaStream.getVideoTracks(),i=a.length,l=0;t.mediaStream.getVideoTracks().forEach(function(o){t.mediaStream.removeTrack(o),o.stop(),++l,l>=i&&(t.isClosed=!0,t.parentElement.removeChild(t.surface),r())})})},e.prototype.getCapabilities=function(){return new M6e(this.getFirstTrackOrFail())},e})(),R6e=(function(){function e(t){this.mediaStream=t}return e.prototype.render=function(t,r,n){return Nw(this,void 0,void 0,function(){return _w(this,function(a){return[2,L6e.create(t,this.mediaStream,r,n)]})})},e.create=function(t){return Nw(this,void 0,void 0,function(){var r,n;return _w(this,function(a){switch(a.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return r={audio:!1,video:t},[4,navigator.mediaDevices.getUserMedia(r)];case 1:return n=a.sent(),[2,new e(n)]}})})},e})(),qD=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function o(f){try{d(n.next(f))}catch(p){l(p)}}function c(f){try{d(n.throw(f))}catch(p){l(p)}}function d(f){f.done?i(f.value):a(f.value).then(o,c)}d((n=n.apply(e,t||[])).next())})},HD=function(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,a,i,l;return l={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function o(d){return function(f){return c([d,f])}}function c(d){if(n)throw new TypeError("Generator is already executing.");for(;l&&(l=0,d[0]&&(r=0)),r;)try{if(n=1,a&&(i=d[0]&2?a.return:d[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,d[1])).done)return i;switch(a=0,i&&(d=[d[0]&2,i.value]),d[0]){case 0:case 1:i=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,a=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!i||d[1]>i[0]&&d[1]<i[3])){r.label=d[1];break}if(d[0]===6&&r.label<i[1]){r.label=i[1],i=d;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(d);break}i[2]&&r.ops.pop(),r.trys.pop();continue}d=t.call(e,r)}catch(f){d=[6,f],a=0}finally{n=i=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},F6e=(function(){function e(){}return e.failIfNotSupported=function(){return qD(this,void 0,void 0,function(){return HD(this,function(t){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new e]})})},e.prototype.create=function(t){return qD(this,void 0,void 0,function(){return HD(this,function(r){return[2,R6e.create(t)]})})},e})(),B6e=function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function o(f){try{d(n.next(f))}catch(p){l(p)}}function c(f){try{d(n.throw(f))}catch(p){l(p)}}function d(f){f.done?i(f.value):a(f.value).then(o,c)}d((n=n.apply(e,t||[])).next())})},U6e=function(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,a,i,l;return l={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function o(d){return function(f){return c([d,f])}}function c(d){if(n)throw new TypeError("Generator is already executing.");for(;l&&(l=0,d[0]&&(r=0)),r;)try{if(n=1,a&&(i=d[0]&2?a.return:d[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,d[1])).done)return i;switch(a=0,i&&(d=[d[0]&2,i.value]),d[0]){case 0:case 1:i=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,a=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!i||d[1]>i[0]&&d[1]<i[3])){r.label=d[1];break}if(d[0]===6&&r.label<i[1]){r.label=i[1],i=d;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(d);break}i[2]&&r.ops.pop(),r.trys.pop();continue}d=t.call(e,r)}catch(f){d=[6,f],a=0}finally{n=i=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},z6e=(function(){function e(){}return e.retrieve=function(){if(navigator.mediaDevices)return e.getCamerasFromMediaDevices();var t=MediaStreamTrack;return MediaStreamTrack&&t.getSources?e.getCamerasFromMediaStreamTrack():e.rejectWithError()},e.rejectWithError=function(){var t=c1.unableToQuerySupportedDevices();return e.isHttpsOrLocalhost()||(t=c1.insecureContextCameraQueryError()),Promise.reject(t)},e.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var t=location.host.split(":")[0];return t==="127.0.0.1"||t==="localhost"},e.getCamerasFromMediaDevices=function(){return B6e(this,void 0,void 0,function(){var t,r,n,a,i,l,o;return U6e(this,function(c){switch(c.label){case 0:return t=function(d){for(var f=d.getVideoTracks(),p=0,y=f;p<y.length;p++){var g=y[p];g.enabled=!1,g.stop(),d.removeTrack(g)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return r=c.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(n=c.sent(),a=[],i=0,l=n;i<l.length;i++)o=l[i],o.kind==="videoinput"&&a.push({id:o.deviceId,label:o.label});return t(r),[2,a]}})})},e.getCamerasFromMediaStreamTrack=function(){return new Promise(function(t,r){var n=function(i){for(var l=[],o=0,c=i;o<c.length;o++){var d=c[o];d.kind==="video"&&l.push({id:d.id,label:d.label})}t(l)},a=MediaStreamTrack;a.getSources(n)})},e})(),si;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.NOT_STARTED=1]="NOT_STARTED",e[e.SCANNING=2]="SCANNING",e[e.PAUSED=3]="PAUSED"})(si||(si={}));var q6e=(function(){function e(){this.state=si.NOT_STARTED,this.onGoingTransactionNewState=si.UNKNOWN}return e.prototype.directTransition=function(t){this.failIfTransitionOngoing(),this.validateTransition(t),this.state=t},e.prototype.startTransition=function(t){return this.failIfTransitionOngoing(),this.validateTransition(t),this.onGoingTransactionNewState=t,this},e.prototype.execute=function(){if(this.onGoingTransactionNewState===si.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var t=this.onGoingTransactionNewState;this.onGoingTransactionNewState=si.UNKNOWN,this.directTransition(t)},e.prototype.cancel=function(){if(this.onGoingTransactionNewState===si.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=si.UNKNOWN},e.prototype.getState=function(){return this.state},e.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==si.UNKNOWN)throw"Cannot transition to a new state, already under transition"},e.prototype.validateTransition=function(t){switch(this.state){case si.UNKNOWN:throw"Transition from unknown is not allowed";case si.NOT_STARTED:this.failIfNewStateIs(t,[si.PAUSED]);break;case si.SCANNING:break;case si.PAUSED:break}},e.prototype.failIfNewStateIs=function(t,r){for(var n=0,a=r;n<a.length;n++){var i=a[n];if(t===i)throw"Cannot transition from ".concat(this.state," to ").concat(t)}},e})(),H6e=(function(){function e(t){this.stateManager=t}return e.prototype.startTransition=function(t){return this.stateManager.startTransition(t)},e.prototype.directTransition=function(t){this.stateManager.directTransition(t)},e.prototype.getState=function(){return this.stateManager.getState()},e.prototype.canScanFile=function(){return this.stateManager.getState()===si.NOT_STARTED},e.prototype.isScanning=function(){return this.stateManager.getState()!==si.NOT_STARTED},e.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===si.SCANNING},e.prototype.isPaused=function(){return this.stateManager.getState()===si.PAUSED},e})(),$6e=(function(){function e(){}return e.create=function(){return new H6e(new q6e)},e})(),V6e=(function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),pc=(function(e){V6e(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.DEFAULT_WIDTH=300,t.DEFAULT_WIDTH_OFFSET=2,t.FILE_SCAN_MIN_HEIGHT=300,t.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,t.MIN_QR_BOX_SIZE=50,t.SHADED_LEFT=1,t.SHADED_RIGHT=2,t.SHADED_TOP=3,t.SHADED_BOTTOM=4,t.SHADED_REGION_ELEMENT_ID="qr-shaded-region",t.VERBOSE=!1,t.BORDER_SHADER_DEFAULT_COLOR="#ffffff",t.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",t})(k6e),W6e=(function(){function e(t,r){this.logger=r,this.fps=pc.SCAN_DEFAULT_FPS,t?(t.fps&&(this.fps=t.fps),this.disableFlip=t.disableFlip===!0,this.qrbox=t.qrbox,this.aspectRatio=t.aspectRatio,this.videoConstraints=t.videoConstraints):this.disableFlip=pc.DEFAULT_DISABLE_FLIP}return e.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?FV.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},e.prototype.isShadedBoxEnabled=function(){return!b0(this.qrbox)},e.create=function(t,r){return new e(t,r)},e})(),K6e=(function(){function e(t,r){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(t))throw"HTML Element with id=".concat(t," not found");this.elementId=t,this.verbose=!1;var n;typeof r=="boolean"?this.verbose=r===!0:r&&(n=r,this.verbose=n.verbose===!0,n.experimentalFeatures),this.logger=new _6e(this.verbose),this.qrcode=new O6e(this.getSupportedFormats(r),this.getUseBarCodeDetectorIfSupported(n),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=$6e.create()}return e.prototype.start=function(t,r,n,a){var i=this;if(!t)throw"cameraIdOrConfig is required";if(!n||typeof n!="function")throw"qrCodeSuccessCallback is required and should be a function.";var l;a?l=a:l=this.verbose?this.logger.log:function(){};var o=W6e.create(r,this.logger);this.clearElement();var c=!1;o.videoConstraints&&(o.isMediaStreamConstraintsValid()?c=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var d=c,f=document.getElementById(this.elementId);f.clientWidth?f.clientWidth:pc.DEFAULT_WIDTH,f.style.position="relative",this.shouldScan=!0,this.element=f;var p=this,y=this.stateManagerProxy.startTransition(si.SCANNING);return new Promise(function(g,N){var w=d?o.videoConstraints:p.createVideoConstraints(t);if(!w){y.cancel(),N("videoConstraints should be defined");return}var k={};(!d||o.aspectRatio)&&(k.aspectRatio=o.aspectRatio);var S={onRenderSurfaceReady:function(O,E){p.setupUi(O,E,o),p.isScanning=!0,p.foreverScan(o,n,l)}};F6e.failIfNotSupported().then(function(O){O.create(w).then(function(E){return E.render(i.element,k,S).then(function(D){p.renderedCamera=D,y.execute(),g(null)}).catch(function(D){y.cancel(),N(D)})}).catch(function(E){y.cancel(),N(c1.errorGettingUserMedia(E))})}).catch(function(O){y.cancel(),N(c1.cameraStreamingNotSupported())})})},e.prototype.pause=function(t){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(si.PAUSED),this.showPausedState(),(b0(t)||t!==!0)&&(t=!1),t&&this.renderedCamera&&this.renderedCamera.pause()},e.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var t=this,r=function(){t.stateManagerProxy.directTransition(si.SCANNING),t.hidePausedState()};if(!this.renderedCamera.isPaused()){r();return}this.renderedCamera.resume(function(){r()})},e.prototype.getState=function(){return this.stateManagerProxy.getState()},e.prototype.stop=function(){var t=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var r=this.stateManagerProxy.startTransition(si.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var n=function(){if(t.element){var i=document.getElementById(pc.SHADED_REGION_ELEMENT_ID);i&&t.element.removeChild(i)}},a=this;return this.renderedCamera.close().then(function(){return a.renderedCamera=null,a.element&&(a.element.removeChild(a.canvasElement),a.canvasElement=null),n(),a.qrRegion&&(a.qrRegion=null),a.context&&(a.context=null),r.execute(),a.hidePausedState(),a.isScanning=!1,Promise.resolve()})},e.prototype.scanFile=function(t,r){return this.scanFileV2(t,r).then(function(n){return n.decodedText})},e.prototype.scanFileV2=function(t,r){var n=this;if(!t||!(t instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(b0(r)&&(r=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(a,i){n.possiblyCloseLastScanImageFile(),n.clearElement(),n.lastScanImageFile=URL.createObjectURL(t);var l=new Image;l.onload=function(){var o=l.width,c=l.height,d=document.getElementById(n.elementId),f=d.clientWidth?d.clientWidth:pc.DEFAULT_WIDTH,p=Math.max(d.clientHeight?d.clientHeight:c,pc.FILE_SCAN_MIN_HEIGHT),y=n.computeCanvasDrawConfig(o,c,f,p);if(r){var g=n.createCanvasElement(f,p,"qr-canvas-visible");g.style.display="inline-block",d.appendChild(g);var N=g.getContext("2d");if(!N)throw"Unable to get 2d context from canvas";N.canvas.width=f,N.canvas.height=p,N.drawImage(l,0,0,o,c,y.x,y.y,y.width,y.height)}var w=pc.FILE_SCAN_HIDDEN_CANVAS_PADDING,k=Math.max(l.width,y.width),S=Math.max(l.height,y.height),O=k+2*w,E=S+2*w,D=n.createCanvasElement(O,E);d.appendChild(D);var q=D.getContext("2d");if(!q)throw"Unable to get 2d context from canvas";q.canvas.width=O,q.canvas.height=E,q.drawImage(l,0,0,o,c,w,w,k,S);try{n.qrcode.decodeRobustlyAsync(D).then(function(W){a(LD.createFromQrcodeResult(W))}).catch(i)}catch(W){i("QR code parse error, error = ".concat(W))}},l.onerror=i,l.onabort=i,l.onstalled=i,l.onsuspend=i,l.src=URL.createObjectURL(t)})},e.prototype.clear=function(){this.clearElement()},e.getCameras=function(){return z6e.retrieve()},e.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},e.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},e.prototype.applyVideoConstraints=function(t){if(t){if(!FV.isMediaStreamConstraintsValid(t,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(t)},e.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},e.prototype.getSupportedFormats=function(t){var r=[Vr.QR_CODE,Vr.AZTEC,Vr.CODABAR,Vr.CODE_39,Vr.CODE_93,Vr.CODE_128,Vr.DATA_MATRIX,Vr.MAXICODE,Vr.ITF,Vr.EAN_13,Vr.EAN_8,Vr.PDF_417,Vr.RSS_14,Vr.RSS_EXPANDED,Vr.UPC_A,Vr.UPC_E,Vr.UPC_EAN_EXTENSION];if(!t||typeof t=="boolean"||!t.formatsToSupport)return r;if(!Array.isArray(t.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(t.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var n=[],a=0,i=t.formatsToSupport;a<i.length;a++){var l=i[a];w6e(l)?n.push(l):this.logger.warn("Invalid format: ".concat(l," passed in config, ignoring."))}if(n.length===0)throw"None of formatsToSupport match supported values.";return n},e.prototype.getUseBarCodeDetectorIfSupported=function(t){if(b0(t))return!0;if(!b0(t.useBarCodeDetectorIfSupported))return t.useBarCodeDetectorIfSupported!==!1;if(b0(t.experimentalFeatures))return!0;var r=t.experimentalFeatures;return b0(r.useBarCodeDetectorIfSupported)?!0:r.useBarCodeDetectorIfSupported!==!1},e.prototype.validateQrboxSize=function(t,r,n){var a=this,i=n.qrbox;this.validateQrboxConfig(i);var l=this.toQrdimensions(t,r,i),o=function(d){if(d<pc.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(pc.MIN_QR_BOX_SIZE,"px.")},c=function(d){return d>t&&(a.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),d=t),d};o(l.width),o(l.height),l.width=c(l.width)},e.prototype.validateQrboxConfig=function(t){if(typeof t!="number"&&typeof t!="function"&&(t.width===void 0||t.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},e.prototype.toQrdimensions=function(t,r,n){if(typeof n=="number")return{width:n,height:n};if(typeof n=="function")try{return n(t,r)}catch(a){throw new Error("qrbox config was passed as a function but it failed with unknown error"+a)}return n},e.prototype.setupUi=function(t,r,n){n.isShadedBoxEnabled()&&this.validateQrboxSize(t,r,n);var a=b0(n.qrbox)?{width:t,height:r}:n.qrbox;this.validateQrboxConfig(a);var i=this.toQrdimensions(t,r,a);i.height>r&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var l=n.isShadedBoxEnabled()&&i.height<=r,o={x:0,y:0,width:t,height:r},c=l?this.getShadedRegionBounds(t,r,i):o,d=this.createCanvasElement(c.width,c.height),f={willReadFrequently:!0},p=d.getContext("2d",f);p.canvas.width=c.width,p.canvas.height=c.height,this.element.append(d),l&&this.possiblyInsertShadingElement(this.element,t,r,i),this.createScannerPausedUiElement(this.element),this.qrRegion=c,this.context=p,this.canvasElement=d},e.prototype.createScannerPausedUiElement=function(t){var r=document.createElement("div");r.innerText=c1.scannerPaused(),r.style.display="none",r.style.position="absolute",r.style.top="0px",r.style.zIndex="1",r.style.background="rgba(9, 9, 9, 0.46)",r.style.color="#FFECEC",r.style.textAlign="center",r.style.width="100%",t.appendChild(r),this.scannerPausedUiElement=r},e.prototype.scanContext=function(t,r){var n=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(a){return t(a.text,LD.createFromQrcodeResult(a)),n.possiblyUpdateShaders(!0),!0}).catch(function(a){n.possiblyUpdateShaders(!1);var i=c1.codeParseError(a);return r(i,N6e.createFrom(i)),!1})},e.prototype.foreverScan=function(t,r,n){var a=this;if(this.shouldScan&&this.renderedCamera){var i=this.renderedCamera.getSurface(),l=i.videoWidth/i.clientWidth,o=i.videoHeight/i.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var c=this.qrRegion.width*l,d=this.qrRegion.height*o,f=this.qrRegion.x*l,p=this.qrRegion.y*o;this.context.drawImage(i,f,p,c,d,0,0,this.qrRegion.width,this.qrRegion.height);var y=function(){a.foreverScanTimeout=setTimeout(function(){a.foreverScan(t,r,n)},a.getTimeoutFps(t.fps))};this.scanContext(r,n).then(function(g){!g&&t.disableFlip!==!0?(a.context.translate(a.context.canvas.width,0),a.context.scale(-1,1),a.scanContext(r,n).finally(function(){y()})):y()}).catch(function(g){a.logger.logError("Error happend while scanning context",g),y()})}},e.prototype.createVideoConstraints=function(t){if(typeof t=="string")return{deviceId:{exact:t}};if(typeof t=="object"){var r="facingMode",n="deviceId",a={user:!0,environment:!0},i="exact",l=function(N){if(N in a)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(N,"'")},o=Object.keys(t);if(o.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(o.length," keys");var c=Object.keys(t)[0];if(c!==r&&c!==n)throw"Only '".concat(r,"' and '").concat(n,"' ")+" are supported for 'cameraIdOrConfig'";if(c===r){var d=t.facingMode;if(typeof d=="string"){if(l(d))return{facingMode:d}}else if(typeof d=="object")if(i in d){if(l(d["".concat(i)]))return{facingMode:{exact:d["".concat(i)]}}}else throw"'facingMode' should be string or object with"+" ".concat(i," as key.");else{var f=typeof d;throw"Invalid type of 'facingMode' = ".concat(f)}}else{var p=t.deviceId;if(typeof p=="string")return{deviceId:p};if(typeof p=="object"){if(i in p)return{deviceId:{exact:p["".concat(i)]}};throw"'deviceId' should be string or object with"+" ".concat(i," as key.")}else{var y=typeof p;throw"Invalid type of 'deviceId' = ".concat(y)}}}var g=typeof t;throw"Invalid type of 'cameraIdOrConfig' = ".concat(g)},e.prototype.computeCanvasDrawConfig=function(t,r,n,a){if(t<=n&&r<=a){var i=(n-t)/2,l=(a-r)/2;return{x:i,y:l,width:t,height:r}}else{var o=t,c=r;return t>n&&(r=n/t*r,t=n),r>a&&(t=a/r*t,r=a),this.logger.log("Image downsampled from "+"".concat(o,"X").concat(c)+" to ".concat(t,"X").concat(r,".")),this.computeCanvasDrawConfig(t,r,n,a)}},e.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var t=document.getElementById(this.elementId);t&&(t.innerHTML="")},e.prototype.possiblyUpdateShaders=function(t){this.qrMatch!==t&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(r){r.style.backgroundColor=t?pc.BORDER_SHADER_MATCH_COLOR:pc.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=t)},e.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},e.prototype.createCanvasElement=function(t,r,n){var a=t,i=r,l=document.createElement("canvas");return l.style.width="".concat(a,"px"),l.style.height="".concat(i,"px"),l.style.display="none",l.id=b0(n)?"qr-canvas":n,l},e.prototype.getShadedRegionBounds=function(t,r,n){if(n.width>t||n.height>r)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(t-n.width)/2,y:(r-n.height)/2,width:n.width,height:n.height}},e.prototype.possiblyInsertShadingElement=function(t,r,n,a){if(!(r-a.width<1||n-a.height<1)){var i=document.createElement("div");i.style.position="absolute";var l=(r-a.width)/2,o=(n-a.height)/2;if(i.style.borderLeft="".concat(l,"px solid rgba(0, 0, 0, 0.48)"),i.style.borderRight="".concat(l,"px solid rgba(0, 0, 0, 0.48)"),i.style.borderTop="".concat(o,"px solid rgba(0, 0, 0, 0.48)"),i.style.borderBottom="".concat(o,"px solid rgba(0, 0, 0, 0.48)"),i.style.boxSizing="border-box",i.style.top="0px",i.style.bottom="0px",i.style.left="0px",i.style.right="0px",i.id="".concat(pc.SHADED_REGION_ELEMENT_ID),r-a.width<11||n-a.height<11)this.hasBorderShaders=!1;else{var c=5,d=40;this.insertShaderBorders(i,d,c,-c,null,0,!0),this.insertShaderBorders(i,d,c,-c,null,0,!1),this.insertShaderBorders(i,d,c,null,-c,0,!0),this.insertShaderBorders(i,d,c,null,-c,0,!1),this.insertShaderBorders(i,c,d+c,-c,null,-c,!0),this.insertShaderBorders(i,c,d+c,null,-c,-c,!0),this.insertShaderBorders(i,c,d+c,-c,null,-c,!1),this.insertShaderBorders(i,c,d+c,null,-c,-c,!1),this.hasBorderShaders=!0}t.append(i)}},e.prototype.insertShaderBorders=function(t,r,n,a,i,l,o){var c=document.createElement("div");c.style.position="absolute",c.style.backgroundColor=pc.BORDER_SHADER_DEFAULT_COLOR,c.style.width="".concat(r,"px"),c.style.height="".concat(n,"px"),a!==null&&(c.style.top="".concat(a,"px")),i!==null&&(c.style.bottom="".concat(i,"px")),o?c.style.left="".concat(l,"px"):c.style.right="".concat(l,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(c),t.appendChild(c)},e.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},e.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},e.prototype.getTimeoutFps=function(t){return 1e3/t},e})(),$D;(function(e){e[e.STATUS_DEFAULT=0]="STATUS_DEFAULT",e[e.STATUS_SUCCESS=1]="STATUS_SUCCESS",e[e.STATUS_WARNING=2]="STATUS_WARNING",e[e.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})($D||($D={}));const G6e=({isOpen:e,onClose:t,onScan:r})=>{const n=T.useRef(null),[a,i]=T.useState(!1),[l,o]=T.useState("");return T.useEffect(()=>{if(!e)return;const c=async()=>{try{const f=new K6e("barcode-reader");n.current=f,await f.start({facingMode:"environment"},{fps:10,qrbox:{width:250,height:250}},p=>{r(p),d()},p=>{}),i(!0),o("")}catch(f){console.error("Error starting scanner:",f),o("Khng th truy cp camera. Vui lng cp quyn camera trong ci t trnh duyt.")}},d=async()=>{if(n.current&&a)try{await n.current.stop(),n.current.clear()}catch(f){console.error("Error stopping scanner:",f)}i(!1),t()};return c(),()=>{n.current&&a&&n.current.stop().then(()=>{var f;(f=n.current)==null||f.clear()}).catch(console.error)}},[e]),e?s.jsxs("div",{className:"fixed inset-0 bg-black/90 z-[200] flex flex-col items-center justify-center p-4",children:[s.jsxs("div",{className:"w-full max-w-md mb-4 flex items-center justify-between",children:[s.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[s.jsx(tee,{className:"w-6 h-6"}),"Qut m vch"]}),s.jsx("button",{onClick:t,className:"w-10 h-10 flex items-center justify-center bg-white/10 hover:bg-white/20 rounded-full text-white transition-colors",children:s.jsx(Ou,{className:"w-6 h-6"})})]}),s.jsx("div",{className:"w-full max-w-md bg-white rounded-2xl overflow-hidden shadow-2xl",children:s.jsx("div",{id:"barcode-reader",className:"w-full"})}),l&&s.jsxs("div",{className:"mt-4 p-4 bg-red-500/20 border border-red-500 rounded-xl text-white text-sm max-w-md",children:[s.jsx("p",{className:"font-semibold mb-1",children:" Li camera"}),s.jsx("p",{children:l})]}),s.jsxs("div",{className:"mt-6 text-center text-white/70 text-sm max-w-md",children:[s.jsx("p",{children:" a camera vo m vch  qut t ng"}),s.jsx("p",{className:"mt-2",children:"M vch s c thm vo gi hng ngay lp tc"})]})]}):null},X6e=({isOpen:e,onClose:t,parts:r,receiptItems:n,setReceiptItems:a,selectedSupplier:i,setSelectedSupplier:l,searchTerm:o,setSearchTerm:c,onSave:d,discount:f,setDiscount:p,discountType:y,setDiscountType:g,paymentMethod:N,setPaymentMethod:w,paymentType:k,setPaymentType:S,partialAmount:O,setPartialAmount:E,showAddProductModal:D,setShowAddProductModal:q,onAddNewProduct:W,currentBranchId:R})=>{var me,ie,je;const[U,z]=T.useState(1),[Z,H]=T.useState(!1),[K,J]=T.useState(""),ae=T.useRef(null),[se,ue]=T.useState(!1),{data:fe=[]}=kA();console.log(" GoodsReceiptMobileModal - parts:",(r==null?void 0:r.length)||0,r==null?void 0:r.slice(0,2)),console.log(" searchTerm:",o);const ke=(r==null?void 0:r.filter(be=>{var Ee,Me;if(!o||o.trim()==="")return!0;const le=o.toLowerCase().trim();return((Ee=be.name)==null?void 0:Ee.toLowerCase().includes(le))||((Me=be.sku)==null?void 0:Me.toLowerCase().includes(le))}))||[];console.log(" filteredParts:",(ke==null?void 0:ke.length)||0);const _e=be=>{n.find(Ee=>Ee.partId===be.id)?(a(Ee=>Ee.map(Me=>Me.partId===be.id?{...Me,quantity:Me.quantity+1}:Me)),Xe.success(` tng s lng ${be.name}`)):(a(Ee=>{var Me,ye,at;return[...Ee,{partId:be.id,partName:be.name,sku:be.sku,quantity:1,importPrice:((Me=be.costPrice)==null?void 0:Me[R])||0,sellingPrice:((ye=be.retailPrice)==null?void 0:ye[R])||0,wholesalePrice:((at=be.wholesalePrice)==null?void 0:at[R])||0}]}),Xe.success(` thm ${be.name} vo phiu nhp`)),c(""),setTimeout(()=>{var Ee;return(Ee=ae.current)==null?void 0:Ee.focus()},100)},Le=be=>{if(be.preventDefault(),!K.trim())return;const le=K.trim(),Ee=r.find(Me=>{var ye,at;return((ye=Me.sku)==null?void 0:ye.toLowerCase())===le.toLowerCase()||((at=Me.name)==null?void 0:at.toLowerCase().includes(le.toLowerCase()))});Ee?(_e(Ee),J("")):(Xe.info(`Sn phm m ${le} cha c. Vui lng thm thng tin sn phm mi.`,{autoClose:3e3}),setTimeout(()=>{q(!0)},500))},xe=be=>{const le=r.find(Ee=>{var Me,ye;return((Me=Ee.sku)==null?void 0:Me.toLowerCase())===be.toLowerCase()||((ye=Ee.name)==null?void 0:ye.toLowerCase().includes(be.toLowerCase()))});ue(!1),le?_e(le):(Xe.info(`Sn phm m ${be} cha c. Vui lng thm thng tin sn phm mi.`),J(be),setTimeout(()=>{q(!0)},500))};T.useEffect(()=>{e&&U===1&&setTimeout(()=>{var be;return(be=ae.current)==null?void 0:be.focus()},300)},[e,U]);const B=be=>{a(le=>le.filter((Ee,Me)=>Me!==be))},ee=n.reduce((be,le)=>be+le.quantity*le.importPrice,0),Y=y==="percent"?Math.round(ee*f/100):f,re=Math.max(0,ee-Y),Q=()=>{if(!i){alert("Vui lng chn nh cung cp");return}z(2)},Ce=()=>{alert("Chc nng lu nhp ang pht trin")};return e?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 bg-black/50 z-[100] flex items-end justify-center sm:hidden",children:s.jsx("div",{className:"bg-white dark:bg-slate-800 w-full h-[95vh] rounded-t-3xl overflow-hidden flex flex-col",children:U===1?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 p-4 flex items-center justify-between flex-shrink-0",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("button",{onClick:t,className:"text-white text-2xl leading-none",children:""}),s.jsx("h2",{className:"text-lg font-bold text-white",children:"To phiu nhp kho"})]})}),s.jsx("div",{className:"p-3 bg-slate-50 dark:bg-slate-900 border-b border-slate-200 dark:border-slate-700 flex-shrink-0",children:s.jsx("div",{onClick:()=>H(!0),className:`p-4 rounded-xl border-2 cursor-pointer active:scale-98 transition-transform ${i?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-dashed border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800"}`,children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{className:"flex-1",children:i?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"NH CUNG CP"}),s.jsx("div",{className:"font-bold text-slate-900 dark:text-slate-100",children:((me=fe.find(be=>be.id===i))==null?void 0:me.name)||""}),((ie=fe.find(be=>be.id===i))==null?void 0:ie.phone)&&s.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:(je=fe.find(be=>be.id===i))==null?void 0:je.phone})]}):s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-2xl",children:""}),s.jsx("span",{className:"text-slate-500 dark:text-slate-400",children:"Chn nh cung cp"})]})}),s.jsx("svg",{className:"w-5 h-5 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})})}),s.jsxs("div",{className:"p-3 bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 sticky top-0 z-10 flex-shrink-0 space-y-2",children:[s.jsxs("form",{onSubmit:Le,className:"flex gap-2",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx("svg",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"})}),s.jsx("input",{ref:ae,type:"text",placeholder:"Nhp SKU hoc qut...",value:K,onChange:be=>J(be.target.value),className:"w-full px-4 py-3 pl-11 border-2 border-blue-400 dark:border-blue-600 rounded-xl bg-blue-50 dark:bg-blue-900/20 text-slate-900 dark:text-slate-100 text-base font-mono placeholder:text-blue-500/70"}),K&&s.jsx("button",{type:"button",onClick:()=>J(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600 dark:hover:text-slate-300",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsx("button",{type:"button",onClick:()=>ue(!0),className:"w-14 h-[50px] flex items-center justify-center bg-gradient-to-br from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white rounded-xl shadow-lg transition-all active:scale-95",children:s.jsxs("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]})})]}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"text",placeholder:"Hoc tm kim th cng...",value:o,onChange:be=>c(be.target.value),className:"w-full px-4 py-3 pl-10 border border-slate-300 dark:border-slate-600 rounded-xl bg-slate-50 dark:bg-slate-900 text-slate-900 dark:text-slate-100"}),s.jsx("svg",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-3 bg-slate-50 dark:bg-slate-900",children:[!r||r.length===0?s.jsxs("div",{className:"text-center text-slate-500 py-12",children:[s.jsx("div",{className:"text-5xl mb-3",children:""}),s.jsx("div",{children:"ang ti danh sch sn phm..."})]}):ke.length===0?s.jsxs("div",{className:"text-center text-slate-500 py-12",children:[s.jsx("div",{className:"text-5xl mb-3",children:""}),s.jsx("div",{children:"Khng tm thy sn phm"}),o&&s.jsxs("div",{className:"text-sm mt-2",children:['Tm kim: "',o,'"']})]}):s.jsx("div",{className:"space-y-2",children:ke.map(be=>{var Ee,Me;const le=n.find(ye=>ye.partId===be.id);return s.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl p-4 border border-slate-200 dark:border-slate-700",children:s.jsxs("div",{className:"flex items-start justify-between gap-3",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"font-bold text-slate-900 dark:text-slate-100 text-base leading-tight mb-1",children:be.name}),s.jsxs("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:["SKU: ",be.sku]}),s.jsxs("div",{className:"mt-2 flex gap-3 text-xs",children:[s.jsxs("div",{children:[s.jsxs("span",{className:"text-slate-500 dark:text-slate-400",children:["Nhp:"," "]}),s.jsx("span",{className:"font-medium text-orange-600 dark:text-orange-400",children:Oe(((Ee=be.costPrice)==null?void 0:Ee[R])||0)})]}),s.jsxs("div",{children:[s.jsxs("span",{className:"text-slate-500 dark:text-slate-400",children:["Bn:"," "]}),s.jsx("span",{className:"font-medium text-green-600 dark:text-green-400",children:Oe(((Me=be.retailPrice)==null?void 0:Me[R])||0)})]})]}),le&&s.jsx("div",{className:"mt-2 text-sm",children:s.jsxs("span",{className:"text-blue-600 dark:text-blue-400 font-medium",children:[" thm: ",le.quantity," "," ",Oe(le.importPrice)]})})]}),s.jsx("button",{onClick:()=>_e(be),className:"flex-shrink-0 w-10 h-10 rounded-full bg-blue-600 text-white flex items-center justify-center text-2xl leading-none active:scale-95 transition-transform",children:"+"})]})},be.id)})}),s.jsxs("button",{onClick:()=>q(!0),className:"w-full mt-3 py-4 border-2 border-dashed border-slate-300 dark:border-slate-600 rounded-xl text-slate-500 dark:text-slate-400 hover:border-blue-400 hover:text-blue-600 transition-colors flex items-center justify-center gap-2",children:[s.jsx("span",{className:"text-2xl",children:"+"}),s.jsx("span",{className:"font-medium",children:"To sn phm mi"})]})]}),n.length>0&&s.jsx("div",{className:"flex-shrink-0 bg-gradient-to-t from-white via-white dark:from-slate-800 dark:via-slate-800 to-transparent pt-6 pb-safe pb-4 px-3",children:s.jsxs("button",{onClick:Q,className:"w-full bg-blue-600 hover:bg-blue-700 active:scale-98 text-white py-4 rounded-xl font-bold text-lg flex items-center justify-between px-6 shadow-lg transition-transform",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"bg-white/20 rounded-full w-8 h-8 flex items-center justify-center font-bold",children:n.reduce((be,le)=>be+le.quantity,0)}),s.jsx("span",{children:"Tip tc"})]}),s.jsx("span",{className:"font-bold",children:Oe(ee)})]})})]}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 p-4 flex items-center justify-between flex-shrink-0",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("button",{onClick:()=>z(1),className:"text-white text-xl leading-none",children:""}),s.jsx("h2",{className:"text-lg font-bold text-white",children:"Xc nhn nhp kho"})]})}),s.jsxs("div",{className:"flex-1 overflow-y-auto bg-slate-50 dark:bg-slate-900",children:[s.jsx("div",{className:"p-3 space-y-2",children:n.map((be,le)=>s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl p-4 border border-slate-200 dark:border-slate-700",children:[s.jsxs("div",{className:"flex items-start justify-between gap-3 mb-3",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-bold text-slate-900 dark:text-slate-100 leading-tight",children:be.partName}),s.jsxs("div",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:["SKU: ",be.sku]})]}),s.jsx("button",{onClick:()=>B(le),className:"text-red-500 hover:text-red-600 text-xl",children:""})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>{if(be.quantity>1){const Ee=[...n];Ee[le].quantity-=1,a(Ee)}},className:"w-8 h-8 rounded-lg border-2 border-slate-300 dark:border-slate-600 flex items-center justify-center text-slate-600 dark:text-slate-400 font-bold active:scale-95 transition-transform",children:""}),s.jsx("div",{className:"w-12 text-center font-bold text-lg text-slate-900 dark:text-slate-100",children:be.quantity}),s.jsx("button",{onClick:()=>{const Ee=[...n];Ee[le].quantity+=1,a(Ee)},className:"w-8 h-8 rounded-lg border-2 border-blue-500 flex items-center justify-center text-blue-600 font-bold active:scale-95 transition-transform",children:"+"})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:[Oe(be.importPrice)," / ci"]}),s.jsx("div",{className:"font-bold text-orange-600 dark:text-orange-400",children:Oe(be.quantity*be.importPrice)})]})]})]},le))}),s.jsx("div",{className:"p-3",children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl p-4 border border-slate-200 dark:border-slate-700 space-y-3",children:[s.jsxs("div",{className:"flex justify-between text-slate-700 dark:text-slate-300",children:[s.jsx("span",{children:"Tng tin hng"}),s.jsx("span",{className:"font-medium",children:Oe(ee)})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:"Gim gi"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"number",inputMode:"numeric",value:f,onChange:be=>p(Number(be.target.value)),placeholder:"0",className:"w-24 px-3 py-1.5 border border-slate-300 dark:border-slate-600 rounded-lg text-right bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"}),s.jsxs("select",{value:y,onChange:be=>g(be.target.value),className:"px-2 py-1.5 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 text-sm",children:[s.jsx("option",{value:"amount",children:""}),s.jsx("option",{value:"percent",children:"%"})]})]})]}),s.jsxs("div",{className:"flex justify-between items-center pt-3 border-t-2 border-slate-200 dark:border-slate-700",children:[s.jsx("span",{className:"text-lg font-bold text-slate-900 dark:text-slate-100",children:"CN THANH TON"}),s.jsx("span",{className:"text-xl font-bold text-red-600 dark:text-red-400",children:Oe(re)})]})]})}),s.jsxs("div",{className:"p-3",children:[s.jsx("div",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Phng thc thanh ton"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>w("cash"),className:`flex-1 py-3 rounded-xl font-medium transition-all ${N==="cash"?"bg-green-600 text-white shadow-lg":"bg-white dark:bg-slate-800 text-slate-700 dark:text-slate-300 border border-slate-300 dark:border-slate-600"}`,children:" Tin mt"}),s.jsx("button",{onClick:()=>w("bank"),className:`flex-1 py-3 rounded-xl font-medium transition-all ${N==="bank"?"bg-blue-600 text-white shadow-lg":"bg-white dark:bg-slate-800 text-slate-700 dark:text-slate-300 border border-slate-300 dark:border-slate-600"}`,children:" Chuyn khon"})]})]}),s.jsx("div",{className:"p-3",children:s.jsxs("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-xl p-1 flex gap-1",children:[s.jsx("button",{onClick:()=>{S("full"),E(0)},className:`flex-1 py-2.5 rounded-lg font-medium transition-all ${k==="full"?"bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100 shadow":"text-slate-600 dark:text-slate-400"}`,children:""}),s.jsx("button",{onClick:()=>S("partial"),className:`flex-1 py-2.5 rounded-lg font-medium transition-all ${k==="partial"?"bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100 shadow":"text-slate-600 dark:text-slate-400"}`,children:"1 Phn"}),s.jsx("button",{onClick:()=>{S("note"),E(0)},className:`flex-1 py-2.5 rounded-lg font-medium transition-all ${k==="note"?"bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100 shadow":"text-slate-600 dark:text-slate-400"}`,children:"N"})]})}),k==="partial"&&s.jsx("div",{className:"p-3",children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl p-4 border border-slate-300 dark:border-slate-600",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Tin tr NCC"}),s.jsx("input",{type:"number",inputMode:"numeric",value:O,onChange:be=>{const le=Number(be.target.value);le<=re?E(le):alert("S tin tr khng c vt qu tng tin")},placeholder:"Nhp s tin",className:"w-full px-4 py-3 border border-slate-300 dark:border-slate-600 rounded-lg text-right text-lg font-bold bg-slate-50 dark:bg-slate-900 text-slate-900 dark:text-slate-100"}),s.jsxs("div",{className:"mt-2 text-sm text-red-600 dark:text-red-400",children:["Cn n: ",Oe(re-O)]})]})}),k==="note"&&s.jsx("div",{className:"p-3",children:s.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl p-4",children:[s.jsx("div",{className:"text-sm text-red-700 dark:text-red-400 mb-1",children:"S tin n"}),s.jsx("div",{className:"text-2xl font-bold text-red-600 dark:text-red-400",children:Oe(re)})]})})]}),s.jsx("div",{className:"p-3 bg-white dark:bg-slate-800 border-t border-slate-200 dark:border-slate-700 space-y-2 flex-shrink-0",children:s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:Ce,className:"flex-1 py-3 border-2 border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-xl font-medium active:scale-98 transition-transform",children:" Lu Nhp"}),s.jsx("button",{onClick:d,disabled:!i||n.length===0,className:"flex-1 py-3 bg-blue-600 hover:bg-blue-700 disabled:bg-slate-300 dark:disabled:bg-slate-600 text-white rounded-xl font-bold active:scale-98 transition-transform disabled:cursor-not-allowed",children:" NHP KHO"})]})})]})})}),s.jsx(y6e,{isOpen:Z,onClose:()=>H(!1),selectedSupplierId:i,onSelectSupplier:l}),s.jsx(G6e,{isOpen:se,onClose:()=>ue(!1),onScan:xe})]}):null},Y6e=({transactions:e})=>{const{currentBranchId:t}=Ba(),{data:r=[]}=Ok(),[n,a]=T.useState("7days"),[i,l]=T.useState(Bn(new Date,!0)),[o,c]=T.useState(Bn(new Date,!0)),[d,f]=T.useState(""),[p,y]=T.useState(!1),[g,N]=T.useState(null),w=T.useMemo(()=>{let O=e.filter(D=>D.type==="Nhp kho");const E=new Date;switch(n){case"7days":const D=new Date(E.getTime()-6048e5);O=O.filter(R=>new Date(R.date)>=D);break;case"30days":const q=new Date(E.getTime()-720*60*60*1e3);O=O.filter(R=>new Date(R.date)>=q);break;case"thisMonth":const W=new Date(E.getFullYear(),E.getMonth(),1);O=O.filter(R=>new Date(R.date)>=W);break;case"custom":O=O.filter(R=>{const U=new Date(R.date);return U>=new Date(i)&&U<=new Date(o)});break}if(d){const D=d.toLowerCase();O=O.filter(q=>q.partName.toLowerCase().includes(D)||q.notes&&q.notes.toLowerCase().includes(D))}return O.sort((D,q)=>new Date(q.date).getTime()-new Date(D.date).getTime())},[e,n,i,o,d]),k=T.useMemo(()=>w.reduce((O,E)=>O+E.totalPrice,0),[w]),S=T.useMemo(()=>{const O=new Map;return w.forEach(E=>{var U,z;const D=new Date(E.date),q=`${D.getFullYear()}-${String(D.getMonth()+1).padStart(2,"0")}-${String(D.getDate()).padStart(2,"0")}`,W=(U=E.notes)!=null&&U.includes("NCC:")?(z=E.notes.split("NCC:")[1])==null?void 0:z.trim():"Khng xc nh",R=`${q}_${W}_${D.getHours()}_${D.getMinutes()}`;O.has(R)||O.set(R,[]),O.get(R).push(E)}),Array.from(O.entries()).map(([E,D],q)=>{var z,Z,H;const W=D[0],R=new Date(W.date);let U="";if(W.notes){const K=W.notes.match(/NH-\d{8}-\d{3}/);K&&(U=K[0])}return U||(U=`NH-${`${R.getFullYear()}${String(R.getMonth()+1).padStart(2,"0")}${String(R.getDate()).padStart(2,"0")}`}-${String(O.size-q).padStart(3,"0")}`),{receiptCode:U,date:W.date,supplier:(z=W.notes)!=null&&z.includes("NCC:")?(H=(Z=W.notes.split("NCC:")[1])==null?void 0:Z.split("|")[0])==null?void 0:H.trim():"Khng xc nh",items:D,total:D.reduce((K,J)=>K+J.totalPrice,0)}}).sort((E,D)=>new Date(D.date).getTime()-new Date(E.date).getTime())},[w]);return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex flex-col h-full bg-slate-50 dark:bg-[#0f172a]",children:[s.jsxs("div",{className:"sticky top-0 z-10 bg-white dark:bg-[#1e293b] border-b border-slate-200 dark:border-slate-700 p-3 space-y-2",children:[s.jsx("input",{type:"text",value:d,onChange:O=>f(O.target.value),placeholder:"Tm NCC, ph tng...",className:"w-full px-4 py-2.5 border border-slate-300 dark:border-slate-600 rounded-lg dark:bg-slate-700 dark:text-slate-100 placeholder-slate-400 text-sm"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("button",{onClick:()=>y(!0),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg text-sm font-medium",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})}),"B lc"]}),s.jsx("div",{className:"px-4 py-2 bg-slate-100 dark:bg-slate-700 rounded-lg text-sm font-medium text-slate-700 dark:text-slate-300",children:S.length})]})]}),s.jsx("div",{className:"px-3 py-3 bg-blue-50 dark:bg-blue-900/20 border-b border-blue-100 dark:border-blue-800",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("div",{className:"text-xs text-blue-600 dark:text-blue-400",children:"Tng gi tr nhp"}),s.jsx("div",{className:"text-xl font-bold text-blue-600 dark:text-blue-400",children:Oe(k)})]})}),s.jsx("div",{className:"flex-1 overflow-auto",children:S.length===0?s.jsxs("div",{className:"flex flex-col items-center justify-center h-full p-8 text-center",children:[s.jsx("div",{className:"text-6xl mb-4",children:""}),s.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-2",children:"Khng c d liu"}),s.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Th thay i b lc hoc thi gian"})]}):s.jsx("div",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:S.map(O=>{const E=new Date(O.date),D=E.toLocaleDateString("vi-VN",{day:"2-digit",month:"2-digit",year:"numeric"}),q=E.toLocaleTimeString("vi-VN",{hour:"2-digit",minute:"2-digit"}),W=r.find(z=>{var Z;return(Z=z.description)==null?void 0:Z.includes(O.receiptCode)}),R=(W==null?void 0:W.remainingAmount)||0,U=R>0;return s.jsxs("button",{onClick:()=>N({...O,date:new Date(O.date)}),className:"w-full p-4 bg-white dark:bg-[#1e293b] hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors text-left",children:[s.jsxs("div",{className:"flex items-start justify-between gap-3 mb-3",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-bold text-cyan-600 dark:text-cyan-400",children:O.receiptCode}),s.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400 mt-0.5",children:[D,"  ",q]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Tng tin"}),s.jsx("div",{className:"text-base font-bold text-slate-900 dark:text-white",children:Oe(O.total)})]})]}),s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("div",{className:"w-8 h-8 rounded-full bg-orange-100 dark:bg-orange-900/30 flex items-center justify-center text-lg",children:""}),s.jsx("div",{className:"text-sm font-medium text-slate-900 dark:text-white",children:O.supplier})]}),s.jsxs("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:[O.items.length," sn phm"]}),U&&s.jsx("div",{className:"mt-2",children:s.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-200",children:[" Cn n ",Oe(R)]})})]},O.receiptCode)})})})]}),p&&s.jsxs("div",{className:"fixed inset-0 z-50 flex items-end",children:[s.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>y(!1)}),s.jsxs("div",{className:"relative bg-white dark:bg-[#1e293b] rounded-t-2xl w-full max-h-[80vh] overflow-hidden flex flex-col",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-slate-200 dark:border-slate-700",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"B lc thi gian"}),s.jsx("button",{onClick:()=>y(!1),className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsxs("div",{className:"flex-1 overflow-auto p-4 space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Thi gian"}),s.jsx("div",{className:"grid grid-cols-2 gap-2",children:[{key:"7days",label:"7 ngy qua"},{key:"30days",label:"30 ngy qua"},{key:"thisMonth",label:"Thng ny"},{key:"custom",label:"Ty chn"}].map(O=>s.jsx("button",{onClick:()=>a(O.key),className:`px-4 py-2.5 rounded-lg text-sm font-medium transition-colors ${n===O.key?"bg-blue-600 text-white":"bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300"}`,children:O.label},O.key))})]}),n==="custom"&&s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"T ngy"}),s.jsx("input",{type:"date",value:i,onChange:O=>l(O.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg dark:bg-slate-700 dark:text-slate-100"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"n ngy"}),s.jsx("input",{type:"date",value:o,onChange:O=>c(O.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg dark:bg-slate-700 dark:text-slate-100"})]})]})]}),s.jsx("div",{className:"p-4 border-t border-slate-200 dark:border-slate-700",children:s.jsx("button",{onClick:()=>y(!1),className:"w-full px-4 py-2.5 bg-blue-600 text-white rounded-lg text-sm font-medium",children:"p dng"})})]})]}),g&&s.jsxs("div",{className:"fixed inset-0 z-50 flex items-end",children:[s.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>N(null)}),s.jsxs("div",{className:"relative bg-white dark:bg-[#1e293b] rounded-t-2xl w-full max-h-[85vh] overflow-hidden flex flex-col",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-slate-200 dark:border-slate-700",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Chi tit phiu nhp"}),s.jsx("button",{onClick:()=>N(null),className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsxs("div",{className:"flex-1 overflow-auto p-4 space-y-4",children:[s.jsxs("div",{className:"bg-cyan-50 dark:bg-cyan-900/20 rounded-lg p-3",children:[s.jsx("div",{className:"text-xs text-cyan-600 dark:text-cyan-400 mb-1",children:"M phiu"}),s.jsx("div",{className:"text-lg font-bold text-cyan-600 dark:text-cyan-400",children:g.receiptCode})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 rounded-lg p-3",children:[s.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"Ngy nhp"}),s.jsx("div",{className:"text-sm font-medium text-slate-900 dark:text-white",children:Bn(new Date(g.date))})]}),s.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-3",children:[s.jsx("div",{className:"text-xs text-blue-600 dark:text-blue-400 mb-1",children:"Tng tin"}),s.jsx("div",{className:"text-lg font-bold text-blue-600 dark:text-blue-400",children:Oe(g.total)})]})]}),s.jsxs("div",{className:"bg-orange-50 dark:bg-orange-900/20 rounded-lg p-3",children:[s.jsx("div",{className:"text-xs text-orange-600 dark:text-orange-400 mb-1",children:"Nh cung cp"}),s.jsx("div",{className:"text-base font-semibold text-orange-900 dark:text-orange-100",children:g.supplier})]}),s.jsxs("div",{children:[s.jsxs("h4",{className:"text-sm font-semibold text-slate-900 dark:text-slate-100 mb-2",children:["Danh sch sn phm (",g.items.length,")"]}),s.jsx("div",{className:"space-y-2",children:g.items.map(O=>s.jsxs("div",{className:"flex items-start justify-between p-3 bg-slate-50 dark:bg-slate-800 rounded-lg",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"text-sm font-medium text-slate-900 dark:text-white",children:[O.quantity," x ",O.partName]}),s.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400 mt-0.5",children:[Oe(O.unitPrice||0)," / SP"]})]}),s.jsx("div",{className:"text-sm font-bold text-slate-900 dark:text-white",children:Oe(O.quantity*(O.unitPrice||0))})]},O.id))})]})]})]})]})]})},Bf=5,VD={neutral:{buttonActive:"border-blue-500 bg-blue-500/10 shadow-[0_5px_25px_rgba(59,130,246,0.15)] text-primary-text",buttonInactive:"border-primary-border bg-primary-bg hover:border-blue-300/70",badgeActive:"border-blue-500 text-blue-600 bg-white/60 dark:bg-slate-900/40 dark:text-blue-400",badgeInactive:"border-secondary-border text-secondary-text"},success:{buttonActive:"border-emerald-500 bg-emerald-50 shadow-[0_5px_25px_rgba(16,185,129,0.2)] text-emerald-900 dark:bg-emerald-950/50 dark:text-emerald-200",buttonInactive:"border-emerald-200 bg-emerald-50/40 hover:border-emerald-400/70 dark:border-emerald-800 dark:bg-emerald-950/20",badgeActive:"border-emerald-500 text-emerald-700 bg-emerald-50 dark:bg-emerald-950/50 dark:text-emerald-300 dark:border-emerald-600",badgeInactive:"border-emerald-200 text-emerald-600 dark:border-emerald-700 dark:text-emerald-400"},warning:{buttonActive:"border-amber-500 bg-amber-50 shadow-[0_5px_25px_rgba(245,158,11,0.25)] text-amber-900 dark:bg-amber-950/50 dark:text-amber-200",buttonInactive:"border-amber-200 bg-amber-50/40 hover:border-amber-400/70 dark:border-amber-800 dark:bg-amber-950/20",badgeActive:"border-amber-500 text-amber-700 bg-amber-50 dark:bg-amber-950/50 dark:text-amber-300 dark:border-amber-600",badgeInactive:"border-amber-200 text-amber-600 dark:border-amber-700 dark:text-amber-400"},danger:{buttonActive:"border-red-500 bg-red-50 shadow-[0_5px_25px_rgba(239,68,68,0.25)] text-red-900 dark:bg-red-950/50 dark:text-red-200",buttonInactive:"border-red-200 bg-red-50/40 hover:border-red-400/70 dark:border-red-800 dark:bg-red-950/20",badgeActive:"border-red-500 text-red-700 bg-red-50 dark:bg-red-950/50 dark:text-red-300 dark:border-red-700",badgeInactive:"border-red-200 text-red-600 dark:border-red-700 dark:text-red-400"}},UV=({isOpen:e,onClose:t,onSave:r})=>{const[n,a]=T.useState(""),[i,l]=T.useState(""),[o,c]=T.useState(""),[d,f]=T.useState(1),[p,y]=T.useState(0),[g,N]=T.useState(0),[w,k]=T.useState(1),[S,O]=T.useState("thng"),[E,D]=T.useState(!1),{data:q=[]}=zk(),W=yA(),[R,U]=T.useState(!1),[z,Z]=T.useState(""),H=()=>{if(!n.trim()){Xe.warning("Vui lng nhp tn sn phm");return}r({name:n.trim(),description:i.trim(),category:o||"Cha phn loi",quantity:Number(d)||1,importPrice:Number(p)||0,retailPrice:Number(g)||0,warranty:Number(w)||0,warrantyUnit:S}),a(""),l(""),c(""),f(1),y(0),N(0),k(1),D(!1),O("thng")};return e?s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[60] p-4",children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg w-full max-w-2xl max-h-[90vh] overflow-hidden flex flex-col",children:[s.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-slate-200 dark:border-slate-700",children:[s.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:"Thm sn phm mi"}),s.jsx("button",{onClick:t,className:"text-slate-500 hover:text-slate-700 dark:hover:text-slate-300 text-2xl",children:""})]}),s.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:["Tn sn phm ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",value:n,onChange:K=>a(K.target.value),className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",placeholder:"Nhp tn sn phm"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"M t"}),s.jsx("textarea",{value:i,onChange:K=>l(K.target.value),rows:3,className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",placeholder:"M t sn phm"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Danh mc sn phm"}),s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("select",{value:o,onChange:K=>c(K.target.value),className:"flex-1 px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",children:[s.jsx("option",{value:"",children:"-- Chn hoc to mi --"}),q.map(K=>s.jsx("option",{value:K.name,children:K.name},K.id))]}),s.jsx("button",{type:"button",onClick:()=>U(!0),className:"w-10 h-10 flex items-center justify-center bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-600","aria-label":"Thm danh mc mi",children:s.jsx("span",{className:"text-xl text-slate-600 dark:text-slate-300",children:"+"})})]}),R&&s.jsxs("form",{onSubmit:async K=>{K.preventDefault();const J=z.trim();if(!J){Xe.warning("Vui lng nhp tn danh mc");return}if(J.length<2){Xe.warning("Tn qu ngn");return}try{const ae=await W.mutateAsync({name:J});c(ae.name),Z(""),U(!1)}catch(ae){Xe.error((ae==null?void 0:ae.message)||"Li to danh mc")}},className:"flex gap-2",children:[s.jsx("input",{autoFocus:!0,type:"text",value:z,onChange:K=>Z(K.target.value),placeholder:"Nhp tn danh mc mi",className:"flex-1 px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-sm text-slate-900 dark:text-slate-100"}),s.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm font-medium",children:"Lu"}),s.jsx("button",{type:"button",onClick:()=>{U(!1),Z("")},className:"px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg text-sm bg-white dark:bg-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-600",children:"Hy"})]})]})]}),s.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-4",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-3",children:"Thng tin nhp kho:"}),s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-slate-600 dark:text-slate-400 mb-1",children:"S lng:"}),s.jsx(P0,{value:d,onValue:K=>{const J=FS(p,K);J.warnings.length&&J.warnings.forEach(ae=>Xe.warning(ae)),f(Math.max(1,J.clean.quantity))},className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 text-right"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-slate-600 dark:text-slate-400 mb-1",children:"Gi nhp:"}),s.jsx(P0,{value:p,onValue:K=>{const J=FS(K,d);J.warnings.length&&J.warnings.forEach(ae=>Xe.warning(ae)),y(J.clean.importPrice),E||N(Math.round(J.clean.importPrice*1.5))},className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 text-right"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-slate-600 dark:text-slate-400 mb-1",children:"Gi bn l:"}),s.jsx(P0,{value:g,onValue:K=>{N(Math.max(0,Math.round(K))),D(!0)},className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 text-right"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Bo hnh"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(P0,{value:w,onValue:K=>k(Math.max(0,Math.floor(K))),className:"w-24 px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 text-right"}),s.jsxs("select",{value:S,onChange:K=>O(K.target.value),className:"px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",children:[s.jsx("option",{value:"thng",children:"thng"}),s.jsx("option",{value:"nm",children:"nm"}),s.jsx("option",{value:"ngy",children:"ngy"})]})]})]})]})}),s.jsx("div",{className:"p-6 border-t border-slate-200 dark:border-slate-700",children:s.jsx("button",{onClick:H,className:"w-full bg-orange-500 hover:bg-orange-600 text-white px-4 py-3 rounded-lg font-medium",children:"Lu v Thm vo gi hng"})})]})}):null},Z6e=({isOpen:e,onClose:t,parts:r,currentBranchId:n,onSave:a})=>{const[i,l]=T.useState([]),[o,c]=T.useState(""),[d,f]=T.useState(""),[p,y]=T.useState(0),[g,N]=T.useState("amount"),[w,k]=T.useState("cash"),[S,O]=T.useState("full"),[E,D]=T.useState(0),[q,W]=T.useState(!1),R=E6();console.log(" GoodsReceiptMobileWrapper - parts received:",(r==null?void 0:r.length)||0,r==null?void 0:r.slice(0,2)),console.log(" currentBranchId:",n),T.useEffect(()=>{e||(l([]),c(""),f(""),y(0),N("amount"),k("cash"),O("full"),D(0))},[e]);const U=Z=>{(async()=>{var H;try{const K=await R.mutateAsync({name:Z.name,sku:Z.sku||`SKU-${Date.now()}`,category:Z.category,stock:{[n]:Z.quantity},costPrice:{[n]:Z.importPrice},retailPrice:{[n]:Z.retailPrice},wholesalePrice:{[n]:Z.wholesalePrice||0}});if(!K.ok)throw new Error(((H=K.error)==null?void 0:H.message)||"Failed to create part");l(J=>[...J,{partId:K.data.id,partName:Z.name,sku:Z.sku||`SKU-${Date.now()}`,quantity:Z.quantity,importPrice:Z.importPrice,sellingPrice:Z.retailPrice,wholesalePrice:Z.wholesalePrice||0}]),Xe.success(" to ph tng mi v thm vo phiu nhp")}catch(K){Xe.error((K==null?void 0:K.message)||"Li to ph tng mi")}finally{W(!1)}})()},z=()=>{if(!o){Xe.error("Vui lng chn nh cung cp");return}if(i.length===0){Xe.error("Vui lng thm sn phm");return}const Z=i.reduce((ae,se)=>ae+se.quantity*se.importPrice,0),H=g==="percent"?Math.round(Z*p/100):p,K=Math.max(0,Z-H);let J=0;S==="full"?J=K:S==="partial"&&(J=E),a(i,o,K,"",{paymentMethod:w,paymentType:S,paidAmount:J,discount:H}),t()};return s.jsxs(s.Fragment,{children:[s.jsx(X6e,{isOpen:e,onClose:t,parts:r,receiptItems:i,setReceiptItems:l,selectedSupplier:o,setSelectedSupplier:c,searchTerm:d,setSearchTerm:f,onSave:z,discount:p,setDiscount:y,discountType:g,setDiscountType:N,paymentMethod:w,setPaymentMethod:k,paymentType:S,setPaymentType:O,partialAmount:E,setPartialAmount:D,showAddProductModal:q,setShowAddProductModal:W,onAddNewProduct:U,currentBranchId:n}),s.jsx(UV,{isOpen:q,onClose:()=>W(!1),onSave:U})]})},Q6e=({isOpen:e,onClose:t,parts:r,currentBranchId:n,onSave:a})=>{const[i,l]=T.useState(""),[o,c]=T.useState(""),d=T.useRef(null),[f,p]=T.useState(""),[y,g]=T.useState(1),{data:N=[]}=kA(),w=LV(),[k,S]=T.useState(!1),[O,E]=T.useState({name:"",phone:"",address:"",note:""}),D=E6(),[q,W]=T.useState(!1),[R,U]=T.useState([]),[z,Z]=T.useState(null),[H,K]=T.useState(null),[J,ae]=T.useState(0),[se,ue]=T.useState(0),[fe,ke]=T.useState("amount"),[_e,Le]=T.useState(0),xe=T.useMemo(()=>{if(console.log(" Desktop Modal - parts:",(r==null?void 0:r.length)||0,r==null?void 0:r.slice(0,2)),console.log(" Desktop Modal - searchTerm:",i),!r||r.length===0)return console.log(" parts is empty or undefined"),[];if(!i||i.trim()==="")return console.log(" Showing all parts:",r.length),r;const be=i.toLowerCase().trim(),le=r.filter(Ee=>{var Me,ye;return((Me=Ee.name)==null?void 0:Me.toLowerCase().includes(be))||((ye=Ee.sku)==null?void 0:ye.toLowerCase().includes(be))});return console.log(" Filtered results:",le.length),le},[r,i]),B=be=>{var Ee,Me;R.find(ye=>ye.partId===be.id)?(U(ye=>ye.map(at=>at.partId===be.id?{...at,quantity:at.quantity+1}:at)),Xe.success(` tng s lng ${be.name}`)):(U([...R,{partId:be.id,partName:be.name,sku:be.sku,quantity:1,importPrice:((Ee=be.costPrice)==null?void 0:Ee[n])||0,sellingPrice:be.retailPrice[n]||0,wholesalePrice:((Me=be.wholesalePrice)==null?void 0:Me[n])||0}]),Xe.success(` thm ${be.name} vo phiu nhp`)),l(""),setTimeout(()=>{var ye;return(ye=d.current)==null?void 0:ye.focus()},100)},ee=be=>{if(be.preventDefault(),!o.trim())return;const le=o.trim(),Ee=r.find(Me=>{var ye,at;return((ye=Me.sku)==null?void 0:ye.toLowerCase())===le.toLowerCase()||((at=Me.name)==null?void 0:at.toLowerCase().includes(le.toLowerCase()))});Ee?(B(Ee),c("")):(Xe.error(`Khng tm thy sn phm c m: ${le}`),c(""))};T.useEffect(()=>{e&&setTimeout(()=>{var be;return(be=d.current)==null?void 0:be.focus()},300)},[e]);const Y=(be,le,Ee)=>{U(Me=>Me.map(ye=>ye.partId===be?{...ye,[le]:Ee}:ye))},re=be=>{U(le=>le.filter(Ee=>Ee.partId!==be))},Q=T.useMemo(()=>R.reduce((be,le)=>be+le.importPrice*le.quantity,0),[R]),Ce=T.useMemo(()=>Math.max(0,Q-se),[Q,se]),{profile:me}=Dc(),ie=()=>{var le;if(!yH(me==null?void 0:me.role,"part.update_price")){Xe.error("Bn khng c quyn cp nht gi");return}if(R.length===0){Xe.warning("Vui lng chn sn phm nhp kho");return}(le=N.find(Ee=>Ee.id===f))!=null&&le.name,a(R,f,Ce,"",{paymentMethod:z||"cash",paymentType:H||"full",paidAmount:H==="full"?Ce:H==="partial"?J:0,discount:se}),U([]),p(""),l(""),ue(0),Le(0),ke("amount")},je=be=>{(async()=>{try{const le=await D.mutateAsync({name:be.name,sku:`SKU-${Date.now()}`,category:be.category,description:be.description,stock:{[n]:be.quantity},retailPrice:{[n]:be.retailPrice},wholesalePrice:{[n]:Math.round(be.retailPrice*.9)}});U(Ee=>[...Ee,{partId:le.id,partName:be.name,sku:le.sku,quantity:be.quantity,importPrice:be.importPrice,sellingPrice:be.retailPrice,wholesalePrice:be.wholesalePrice||0}]),Xe.success(" to ph tng mi v thm vo phiu nhp")}catch(le){Xe.error((le==null?void 0:le.message)||"Li to ph tng mi")}finally{W(!1)}})()};return e?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-900 dark:to-slate-800 w-full max-w-7xl h-[92vh] rounded-2xl shadow-2xl overflow-hidden flex",children:[s.jsxs("div",{className:"w-1/2 flex flex-col bg-white/80 dark:bg-slate-900/80 backdrop-blur-sm border-r border-slate-200/50 dark:border-slate-700/50",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-slate-200/50 dark:border-slate-700/50 bg-gradient-to-r from-blue-50/50 to-indigo-50/50 dark:from-slate-800/50 dark:to-slate-800/50",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("button",{onClick:t,className:"w-9 h-9 flex items-center justify-center hover:bg-white/80 dark:hover:bg-slate-700/80 rounded-lg text-slate-600 dark:text-slate-400 transition-all hover:scale-105",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-base font-bold text-slate-900 dark:text-slate-100",children:"Danh mc sn phm"}),s.jsx("p",{className:"text-[10px] text-slate-500 dark:text-slate-400",children:"Chn  thm vo gi"})]})]}),s.jsxs("button",{onClick:()=>W(!0),className:"flex items-center gap-2 bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white px-3 py-2 rounded-lg text-xs font-semibold shadow-lg shadow-blue-500/30 transition-all hover:scale-105",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),s.jsx("span",{children:"Thm mi"})]})]}),s.jsxs("div",{className:"p-3 bg-white/50 dark:bg-slate-800/50 space-y-2",children:[s.jsx("form",{onSubmit:ee,children:s.jsxs("div",{className:"relative",children:[s.jsx("svg",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"})}),s.jsx("input",{ref:d,type:"text",placeholder:"Qut m vch hoc nhp SKU  thm nhanh...",value:o,onChange:be=>c(be.target.value),className:"w-full pl-10 pr-4 py-2.5 border-2 border-blue-300 dark:border-blue-600 rounded-xl bg-blue-50/50 dark:bg-blue-900/20 text-slate-900 dark:text-slate-100 text-sm placeholder:text-blue-500/60 dark:placeholder:text-blue-400/60 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all font-mono"}),o&&s.jsx("button",{type:"button",onClick:()=>c(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600 dark:hover:text-slate-300",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),s.jsxs("div",{className:"relative",children:[s.jsx("svg",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),s.jsx("input",{type:"text",placeholder:"Hoc tm kim th cng...",value:i,onChange:be=>l(be.target.value),className:"w-full pl-10 pr-4 py-2.5 border border-slate-300 dark:border-slate-600 rounded-xl bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 text-sm placeholder:text-slate-400 focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500 transition-all"})]})]}),s.jsx("div",{className:"flex-1 overflow-y-auto p-3",children:xe.length===0?s.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-slate-400",children:[s.jsx("svg",{className:"w-16 h-16 mb-3 opacity-30",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})}),s.jsx("p",{className:"text-sm font-medium",children:"Khng tm thy sn phm"}),s.jsx("p",{className:"text-xs mt-1",children:"Th tm kim vi t kha khc"})]}):s.jsx("div",{className:"space-y-2",children:xe.map(be=>s.jsx("div",{onClick:()=>B(be),className:"group p-3 bg-white dark:bg-slate-800 rounded-xl hover:shadow-lg hover:shadow-blue-500/10 cursor-pointer border border-slate-200 dark:border-slate-700 hover:border-blue-400 dark:hover:border-blue-600 transition-all duration-200 hover:scale-[1.02]",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-100 to-indigo-100 dark:from-blue-900/30 dark:to-indigo-900/30 rounded-lg flex items-center justify-center flex-shrink-0 group-hover:scale-110 transition-transform",children:s.jsx("svg",{className:"w-5 h-5 text-blue-600 dark:text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"font-semibold text-sm text-slate-900 dark:text-slate-100 line-clamp-1 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors",children:be.name}),s.jsxs("div",{className:"text-[10px] text-slate-500 dark:text-slate-400 mt-0.5",children:["SKU: ",s.jsx("span",{className:"font-mono",children:be.sku})]})]}),s.jsx("svg",{className:"w-5 h-5 text-slate-300 dark:text-slate-600 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})},be.id))})})]}),s.jsxs("div",{className:"w-1/2 bg-white dark:bg-slate-800 flex flex-col",children:[s.jsxs("div",{className:"p-4 border-b border-slate-200 dark:border-slate-700 bg-gradient-to-r from-emerald-50/30 to-teal-50/30 dark:from-slate-800/50 dark:to-slate-800/50",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("svg",{className:"w-4 h-4 text-emerald-600 dark:text-emerald-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),s.jsx("label",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300",children:"Nh cung cp"}),s.jsxs("button",{onClick:()=>{E({name:"",phone:"",address:"",note:""}),S(!0)},className:"ml-auto flex items-center gap-1 text-xs px-2 py-1 rounded-lg bg-emerald-100 text-emerald-700 hover:bg-emerald-200 dark:bg-emerald-900/30 dark:text-emerald-400 dark:hover:bg-emerald-900/50 font-medium transition-all",children:[s.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Thm NCC"]})]}),s.jsxs("select",{value:f,onChange:be=>p(be.target.value),className:"w-full px-4 py-2.5 border border-slate-300 dark:border-slate-600 rounded-xl bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 text-sm font-medium focus:ring-2 focus:ring-emerald-500/50 focus:border-emerald-500 transition-all",children:[s.jsx("option",{value:"",children:"Chn nh cung cp..."}),N.map(be=>s.jsxs("option",{value:be.id,children:[be.name," ",be.phone?` ${be.phone}`:""]},be.id))]})]}),k&&s.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/50",children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl w-full max-w-md p-6 space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-800 dark:text-slate-100",children:"Thm nh cung cp"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium mb-1 text-slate-600 dark:text-slate-400",children:"Tn *"}),s.jsx("input",{autoFocus:!0,value:O.name,onChange:be=>E(le=>({...le,name:be.target.value})),className:"w-full px-3 py-2 rounded border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-sm",placeholder:"Tn nh cung cp"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium mb-1 text-slate-600 dark:text-slate-400",children:"in thoi"}),s.jsx("input",{value:O.phone,onChange:be=>E(le=>({...le,phone:be.target.value})),className:"w-full px-3 py-2 rounded border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-sm",placeholder:"ST"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium mb-1 text-slate-600 dark:text-slate-400",children:"a ch"}),s.jsx("textarea",{rows:2,value:O.address,onChange:be=>E(le=>({...le,address:be.target.value})),className:"w-full px-3 py-2 rounded border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-sm resize-none",placeholder:"a ch nh cung cp"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium mb-1 text-slate-600 dark:text-slate-400",children:"Ghi ch"}),s.jsx("textarea",{rows:2,value:O.note,onChange:be=>E(le=>({...le,note:be.target.value})),className:"w-full px-3 py-2 rounded border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-sm resize-none",placeholder:"Thng tin thm (ty chn)"})]})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[s.jsx("button",{onClick:()=>S(!1),className:"px-4 py-2 text-sm rounded border border-slate-300 dark:border-slate-600 hover:bg-slate-100 dark:hover:bg-slate-700",children:"Hy"}),s.jsx("button",{onClick:async()=>{var be,le;if(!O.name.trim()){Xe.warning("Nhp tn nh cung cp");return}try{const Ee=await w.mutateAsync({name:O.name.trim(),phone:((be=O.phone)==null?void 0:be.trim())||void 0,address:((le=O.address)==null?void 0:le.trim())||void 0});p(Ee.id),S(!1)}catch{}},className:"px-4 py-2 text-sm rounded bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-60",disabled:w.isPending,children:w.isPending?"ang lu...":"Lu"})]})]})}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("svg",{className:"w-5 h-5 text-blue-600 dark:text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})}),s.jsx("h3",{className:"text-base font-bold text-slate-900 dark:text-slate-100",children:"Gi hng nhp"})]}),s.jsxs("span",{className:"text-xs text-white bg-gradient-to-r from-blue-600 to-indigo-600 px-3 py-1 rounded-full font-semibold shadow-lg",children:[R.length," sn phm"]})]}),R.length===0?s.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-slate-400",children:[s.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-slate-100 to-slate-200 dark:from-slate-800 dark:to-slate-700 rounded-2xl flex items-center justify-center mb-4",children:s.jsx("svg",{className:"w-12 h-12 text-slate-300 dark:text-slate-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})})}),s.jsx("p",{className:"text-sm font-semibold text-slate-500 dark:text-slate-400",children:"Gi hng trng"}),s.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Chn sn phm bn tri  thm vo"})]}):s.jsx("div",{className:"space-y-3",children:R.map((be,le)=>s.jsxs("div",{className:"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg p-2.5 hover:shadow-md transition-shadow",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("div",{className:"w-6 h-6 bg-blue-600 rounded flex items-center justify-center flex-shrink-0",children:s.jsxs("span",{className:"text-xs font-bold text-white",children:["#",le+1]})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"font-medium text-xs text-slate-900 dark:text-slate-100 truncate",children:be.partName}),s.jsxs("div",{className:"text-[9px] text-slate-500 dark:text-slate-400",children:["SKU: ",be.sku]})]}),s.jsx("button",{onClick:()=>re(be.partId),className:"w-6 h-6 flex items-center justify-center bg-red-100 dark:bg-red-900/30 rounded text-red-600 dark:text-red-400 hover:bg-red-200 flex-shrink-0",title:"Xa",children:""})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("button",{onClick:()=>Y(be.partId,"quantity",Math.max(1,be.quantity-1)),className:"w-6 h-6 flex items-center justify-center bg-slate-100 dark:bg-slate-700 rounded text-slate-600 dark:text-slate-300 hover:bg-blue-50 text-sm",children:"-"}),s.jsx("input",{type:"number",value:be.quantity,onChange:Ee=>{const Me=parseInt(Ee.target.value)||1;Y(be.partId,"quantity",Math.max(1,Me))},className:"w-10 px-1 py-1 text-center border border-blue-300 dark:border-blue-700 rounded bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 text-xs font-semibold",min:"1"}),s.jsx("button",{onClick:()=>Y(be.partId,"quantity",be.quantity+1),className:"w-6 h-6 flex items-center justify-center bg-slate-100 dark:bg-slate-700 rounded text-slate-600 dark:text-slate-300 hover:bg-blue-50 text-sm",children:"+"})]}),s.jsx(P0,{value:be.importPrice,onValue:Ee=>{const{clean:Me}=FS(Ee,be.quantity),ye=Me.importPrice,at=Math.round(ye*1.5);U(lt=>lt.map(ut=>ut.partId===be.partId?{...ut,importPrice:ye,sellingPrice:ut.sellingPrice===0||ut.sellingPrice===Math.round((ut.importPrice||0)*1.5)?at:ut.sellingPrice}:ut))},className:"flex-1 px-2 py-1 border border-slate-300 dark:border-slate-600 rounded bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 text-right text-xs font-medium focus:border-blue-500",placeholder:"Gi nhp"}),s.jsx(P0,{value:be.sellingPrice,onValue:Ee=>Y(be.partId,"sellingPrice",Math.max(0,Math.round(Ee))),className:"flex-1 px-2 py-1 border border-slate-300 dark:border-slate-600 rounded bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 text-right text-xs font-medium focus:border-emerald-500",placeholder:"Gi bn"}),s.jsx("div",{className:"w-20 text-right",children:s.jsx("div",{className:"text-xs font-bold text-blue-600 dark:text-blue-400",children:Oe(be.importPrice*be.quantity)})})]})]},be.partId))})]}),s.jsxs("div",{className:"p-3 border-t-2 border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800",children:[s.jsx("div",{className:"mb-3 p-3 bg-gradient-to-r from-blue-600 to-indigo-600 rounded-lg shadow",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-xs font-semibold text-white uppercase",children:"Tng thanh ton"}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-xl font-black text-white",children:Oe(Ce)}),s.jsxs("div",{className:"text-[10px] text-white/70",children:[R.length," SP"]})]})]})}),s.jsxs("div",{className:"mb-3",children:[s.jsxs("label",{className:"block text-[10px] font-bold text-slate-700 dark:text-slate-300 mb-1.5",children:["Phng thc thanh ton ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsx("button",{onClick:()=>Z("cash"),className:`flex items-center justify-center gap-1.5 px-3 py-2 border-2 rounded-lg text-xs font-bold transition-all ${z==="cash"?"border-emerald-500 bg-emerald-50 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-400":"border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300"}`,children:" Tin mt"}),s.jsx("button",{onClick:()=>Z("bank"),className:`flex items-center justify-center gap-1.5 px-3 py-2 border-2 rounded-lg text-xs font-bold transition-all ${z==="bank"?"border-blue-500 bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400":"border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300"}`,children:" Chuyn khon"})]})]}),z&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"mb-3",children:[s.jsx("label",{className:"block text-[10px] font-bold text-slate-700 dark:text-slate-300 mb-1.5",children:"Hnh thc thanh ton"}),s.jsxs("div",{className:"grid grid-cols-3 gap-1.5",children:[s.jsx("button",{onClick:()=>{K("full"),ae(0)},className:`px-2 py-1.5 border-2 rounded-lg text-[10px] font-bold transition-all ${H==="full"?"border-blue-500 bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400":"border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300"}`,children:""}),s.jsx("button",{onClick:()=>K("partial"),className:`px-2 py-1.5 border-2 rounded-lg text-[10px] font-bold transition-all ${H==="partial"?"border-orange-500 bg-orange-50 dark:bg-orange-900/30 text-orange-700 dark:text-orange-400":"border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300"}`,children:"1 phn"}),s.jsx("button",{onClick:()=>{K("note"),ae(0)},className:`px-2 py-1.5 border-2 rounded-lg text-[10px] font-bold transition-all ${H==="note"?"border-purple-500 bg-purple-50 dark:bg-purple-900/30 text-purple-700 dark:text-purple-400":"border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300"}`,children:"Cng n"})]})]}),H==="partial"&&s.jsxs("div",{className:"mb-3",children:[s.jsx("label",{className:"block text-[10px] font-bold text-slate-700 dark:text-slate-300 mb-1.5",children:"S tin khch tr"}),s.jsx(P0,{value:J,onValue:be=>ae(Math.max(0,Math.round(be))),className:"w-full px-3 py-2 border-2 border-orange-300 dark:border-orange-700 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 text-right text-sm font-bold focus:border-orange-500",placeholder:"Nhp s tin..."}),s.jsxs("div",{className:"mt-1.5 flex items-center justify-between text-[10px]",children:[s.jsx("span",{className:"text-slate-500",children:"Cn li:"}),s.jsx("span",{className:"font-bold text-red-600 dark:text-red-400",children:Oe(Math.max(0,Ce-J))})]})]}),H&&s.jsxs("div",{className:"mb-3",children:[s.jsx("label",{className:"block text-[10px] font-bold text-slate-700 dark:text-slate-300 mb-1.5",children:"Loi hch ton"}),s.jsxs("select",{className:"w-full px-3 py-2 border-2 border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 text-xs font-semibold focus:border-blue-500",children:[s.jsx("option",{children:"Mua hng/nhp kho"}),s.jsx("option",{children:"Nhp tr hng"}),s.jsx("option",{children:"Khc"})]})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:t,className:"flex-1 bg-slate-200 hover:bg-slate-300 dark:bg-slate-700 dark:hover:bg-slate-600 text-slate-900 dark:text-slate-100 px-3 py-2.5 rounded-lg font-bold text-xs transition-all",children:s.jsxs("div",{className:"flex items-center justify-center gap-2",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})}),"LU NHP"]})}),s.jsx("button",{onClick:()=>{if(!z){Xe.warning("Vui lng chn phng thc thanh ton");return}if(!H){Xe.warning("Vui lng chn hnh thc thanh ton");return}if(H==="partial"&&J<=0){Xe.warning("Vui lng nhp s tin khch tr");return}ie()},disabled:!z||!H||H==="partial"&&J<=0,className:"flex-1 bg-orange-500 hover:bg-orange-600 text-white px-3 py-2.5 rounded-lg font-bold text-xs transition-all disabled:bg-slate-300 disabled:text-slate-500 disabled:cursor-not-allowed dark:disabled:bg-slate-600 dark:disabled:text-slate-400",children:s.jsxs("div",{className:"flex items-center justify-center gap-2",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"})}),"NHP KHO"]})})]})]})]})]})}),s.jsx(UV,{isOpen:q,onClose:()=>W(!1),onSave:je})]}):null},J6e=({isOpen:e,onClose:t,onSave:r,initialData:n,mode:a})=>{const[i,l]=T.useState((n==null?void 0:n.name)||""),[o,c]=T.useState((n==null?void 0:n.phone)||""),[d,f]=T.useState((n==null?void 0:n.address)||""),[p,y]=T.useState((n==null?void 0:n.email)||"");T.useEffect(()=>{n&&(l(n.name),c(n.phone),f(n.address),y(n.email))},[n]);const g=N=>{if(N.preventDefault(),!i.trim()){Xe.error("Vui lng nhp tn nh cung cp");return}r({name:i.trim(),phone:o.trim(),address:d.trim(),email:p.trim()})};return e?s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[60] p-4",children:s.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg w-full max-w-md",children:s.jsxs("form",{onSubmit:g,children:[s.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-slate-200 dark:border-slate-700",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:a==="add"?"Thm nh cung cp mi":"Chnh sa nh cung cp"}),s.jsx("button",{type:"button",onClick:t,className:"text-slate-500 hover:text-slate-700 dark:hover:text-slate-300 text-2xl",children:""})]}),s.jsxs("div",{className:"p-4 space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Tn nh cung cp *"}),s.jsx("input",{type:"text",value:i,onChange:N=>l(N.target.value),placeholder:"Nhp tn nh cung cp",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",required:!0,autoFocus:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"S in thoi"}),s.jsx("input",{type:"tel",value:o,onChange:N=>c(N.target.value),placeholder:"Nhp s in thoi",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Email"}),s.jsx("input",{type:"email",value:p,onChange:N=>y(N.target.value),placeholder:"Nhp email",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"a ch"}),s.jsx("textarea",{value:d,onChange:N=>f(N.target.value),placeholder:"Nhp a ch",rows:3,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]})]}),s.jsxs("div",{className:"flex justify-end gap-3 p-4 border-t border-slate-200 dark:border-slate-700",children:[s.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700",children:"Hy"}),s.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium",children:a==="add"?"Thm":"Lu"})]})]})})}):null},eje=({isOpen:e,onClose:t,onAdd:r,currentBranchId:n})=>{const[a,i]=T.useState(""),[l,o]=T.useState(null),[c,d]=T.useState(1),[f,p]=T.useState(0),{data:y=[]}=Ts({queryKey:["allPartsForReceipt"],queryFn:async()=>{const{data:k,error:S}=await Ot.from("parts").select("*").order("name");if(S)throw S;return k||[]}}),g=T.useMemo(()=>{if(!a)return[];const k=a.toLowerCase();return y.filter(S=>{var O,E;return S.name.toLowerCase().includes(k)||((O=S.sku)==null?void 0:O.toLowerCase().includes(k))||((E=S.description)==null?void 0:E.toLowerCase().includes(k))})},[y,a]),N=k=>{var S;o(k),p(((S=k.costPrice)==null?void 0:S[n])||0),i(k.name)},w=k=>{if(k.preventDefault(),!l){Xe.error("Vui lng chn sn phm");return}if(c<=0){Xe.error("S lng phi ln hn 0");return}if(f<0){Xe.error("n gi khng c m");return}r({partId:l.id,partName:l.name,sku:l.sku||"",quantity:c,unitPrice:f}),i(""),o(null),d(1),p(0)};return e?s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[60] p-4",children:s.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg w-full max-w-lg",children:s.jsxs("form",{onSubmit:w,children:[s.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-slate-200 dark:border-slate-700",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Thm sn phm vo phiu"}),s.jsx("button",{type:"button",onClick:t,className:"text-slate-500 hover:text-slate-700 dark:hover:text-slate-300 text-2xl",children:""})]}),s.jsxs("div",{className:"p-4 space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Tm kim sn phm *"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"text",value:a,onChange:k=>{i(k.target.value),o(null)},placeholder:"Nhp tn hoc SKU sn phm...",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",autoFocus:!0}),a&&!l&&g.length>0&&s.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:g.map(k=>{var S;return s.jsxs("button",{type:"button",onClick:()=>N(k),className:"w-full px-3 py-2 text-left hover:bg-slate-100 dark:hover:bg-slate-700 border-b border-slate-200 dark:border-slate-700 last:border-0",children:[s.jsx("div",{className:"text-sm font-medium text-slate-900 dark:text-slate-100",children:k.name}),s.jsxs("div",{className:"text-xs text-slate-500",children:["SKU: ",k.sku||"N/A"," | Gi nhp:"," ",Oe(((S=k.costPrice)==null?void 0:S[n])||0)]})]},k.id)})})]}),l&&s.jsxs("div",{className:"mt-2 p-2 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded text-sm text-green-800 dark:text-green-200",children:["  chn: ",l.name," (",l.sku,")"]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"S lng *"}),s.jsx("input",{type:"number",value:c,onChange:k=>d(Number(k.target.value)),min:"1",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"n gi nhp *"}),s.jsx(P0,{value:f,onValue:p,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",placeholder:"0"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Thnh tin"}),s.jsx("input",{type:"text",value:Oe(c*f),readOnly:!0,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-slate-100 font-bold"})]})]}),s.jsxs("div",{className:"flex justify-end gap-3 p-4 border-t border-slate-200 dark:border-slate-700",children:[s.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700",children:"Hy"}),s.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium",children:"Thm sn phm"})]})]})})}):null},tje=({receipt:e,onClose:t,onSave:r,currentBranchId:n})=>{const[a,i]=T.useState(e.supplier),[l,o]=T.useState(""),[c,d]=T.useState(e.supplier),[f,p]=T.useState(!1),[y,g]=T.useState(!1),[N,w]=T.useState("add"),[k,S]=T.useState(!1),[O,E]=T.useState(null),{data:D=[]}=Ts({queryKey:["suppliers"],queryFn:async()=>{const{data:Y,error:re}=await Ot.from("suppliers").select("*").order("name");if(re)throw re;return Y||[]}}),q=T.useMemo(()=>{if(!c)return D;const Y=c.toLowerCase();return D.filter(re=>re.name.toLowerCase().includes(Y))},[D,c]),[W,R]=T.useState(e.items.map(Y=>({id:Y.id,partName:Y.partName,quantity:Y.quantity,unitPrice:Y.unitPrice||0,totalPrice:Y.quantity*(Y.unitPrice||0),notes:Y.notes||""}))),[U,z]=T.useState([{time:"15:31",date:e.date,payer:"Xun Nhan",cashier:"(Tin mt)",amount:e.total}]),[Z,H]=T.useState(!0);ua.useEffect(()=>{var re,Q,Ce;const Y=e.items[0];if((re=Y==null?void 0:Y.notes)!=null&&re.includes("Phone:")){const me=(Ce=(Q=Y.notes.split("Phone:")[1])==null?void 0:Q.split("NV:")[0])==null?void 0:Ce.trim();me&&o(me)}},[e.items]),ua.useEffect(()=>{const Y=re=>{re.target.closest(".supplier-dropdown-container")||p(!1)};return document.addEventListener("mousedown",Y),()=>document.removeEventListener("mousedown",Y)},[]);const K=W.reduce((Y,re)=>Y+re.totalPrice,0),J=U.reduce((Y,re)=>Y+re.amount,0),ae=(Y,re)=>{const Q=[...W];Q[Y].quantity=re,Q[Y].totalPrice=re*Q[Y].unitPrice,R(Q)},se=(Y,re)=>{const Q=[...W];Q[Y].unitPrice=re,Q[Y].totalPrice=Q[Y].quantity*re,R(Q)},ue=Y=>{if(W.length===1){Xe.error("Phi c t nht 1 sn phm");return}const re=W.filter((Q,Ce)=>Ce!==Y);R(re),Xe.success(" xa sn phm")},fe=Y=>{const re={id:`new-${Date.now()}`,partId:Y.partId,partName:Y.partName,quantity:Y.quantity,unitPrice:Y.unitPrice,totalPrice:Y.quantity*Y.unitPrice,notes:"",sku:Y.sku};R([...W,re]),S(!1),Xe.success(` thm ${Y.partName} (s lu khi bm LU)`)},ke=Y=>{i(Y.name),o(Y.phone),g(!1),Xe.success(N==="add"?" thm nh cung cp":" cp nht nh cung cp")},_e=()=>{w("edit"),g(!0)},Le=()=>{w("add"),g(!0)},xe=Y=>{E(Y),Xe.info("Click vo  s lng hoc n gi  chnh sa")},B=Y=>{confirm("Bn c mun xa sn phm ny?")&&ue(Y)},ee=Y=>{if(Y.preventDefault(),!a){Xe.error("Vui lng chn nh cung cp");return}if(W.some(re=>re.quantity<=0)){Xe.error("S lng phi ln hn 0");return}r({supplier:a,supplierPhone:l,items:W,payments:U,isPaid:Z})};return s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg w-full max-w-3xl max-h-[90vh] overflow-y-auto",children:[s.jsxs("form",{onSubmit:ee,children:[s.jsxs("div",{className:"sticky top-0 bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 p-4 flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),s.jsxs("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:["[Chnh sa] Phiu Nhp Kho ",e.receiptCode]})]}),s.jsxs("div",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:[new Date(e.date).toLocaleDateString("vi-VN",{day:"2-digit",month:"2-digit",year:"numeric"})," ",new Date(e.date).toLocaleTimeString("vi-VN",{hour:"2-digit",minute:"2-digit"})]})]}),s.jsx("button",{type:"button",onClick:t,className:"text-slate-500 hover:text-slate-700 dark:hover:text-slate-300 text-2xl w-8 h-8 flex items-center justify-center rounded hover:bg-slate-100 dark:hover:bg-slate-700",children:""})]}),s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-base font-medium text-teal-600 dark:text-teal-400 mb-2",children:"Nh cung cp:"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("div",{className:"flex-1 relative supplier-dropdown-container",children:[s.jsx("input",{type:"text",value:c,onChange:Y=>{d(Y.target.value),p(!0)},onFocus:()=>p(!0),placeholder:"Tm kim v chn mt nh cung cp",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"}),c&&s.jsx("button",{type:"button",onClick:()=>{d(""),i(""),o("")},className:"absolute right-2 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600",children:""}),f&&q.length>0&&s.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:q.map(Y=>s.jsxs("button",{type:"button",onClick:()=>{i(Y.name),d(Y.name),o(Y.phone||""),p(!1)},className:"w-full px-3 py-2 text-left hover:bg-slate-100 dark:hover:bg-slate-700 border-b border-slate-200 dark:border-slate-700 last:border-0",children:[s.jsx("div",{className:"text-sm font-medium text-slate-900 dark:text-slate-100",children:Y.name}),Y.phone&&s.jsxs("div",{className:"text-xs text-slate-500",children:["Phone: ",Y.phone]})]},Y.id))})]}),s.jsxs("button",{type:"button",onClick:_e,className:"px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700 flex items-center gap-2",children:[s.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Chnh sa"]}),s.jsxs("button",{type:"button",onClick:Le,className:"px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg flex items-center gap-2",children:[s.jsx("span",{className:"text-xl",children:"+"}),"Thm mi"]})]})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsx("label",{className:"block text-base font-medium text-teal-600 dark:text-teal-400",children:"Chi tit sn phm nhp kho:"}),s.jsxs("button",{type:"button",onClick:()=>S(!0),className:"text-sm text-teal-600 hover:text-teal-700 dark:text-teal-400 flex items-center gap-1",children:[s.jsx("span",{className:"text-lg",children:"+"}),"Thm sn phm"]})]}),s.jsx("div",{className:"border border-slate-300 dark:border-slate-600 rounded-lg overflow-hidden",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-slate-700 dark:text-slate-300",children:"-"}),s.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-slate-700 dark:text-slate-300",children:"Tn"}),s.jsx("th",{className:"px-3 py-2 text-center text-sm font-medium text-slate-700 dark:text-slate-300",children:"SL"}),s.jsx("th",{className:"px-3 py-2 text-right text-sm font-medium text-slate-700 dark:text-slate-300",children:"n gi nhp"}),s.jsx("th",{className:"px-3 py-2 text-right text-sm font-medium text-slate-700 dark:text-slate-300",children:"Thnh tin"}),s.jsx("th",{className:"px-3 py-2 text-center text-sm font-medium text-slate-700 dark:text-slate-300 w-20"})]})}),s.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:W.map((Y,re)=>s.jsxs("tr",{className:`hover:bg-slate-50 dark:hover:bg-slate-700/30 transition-colors ${O===re?"bg-blue-50 dark:bg-blue-900/20":""}`,children:[s.jsx("td",{className:"px-3 py-3 text-sm text-slate-900 dark:text-slate-100",children:re+1}),s.jsxs("td",{className:"px-3 py-3",children:[s.jsx("div",{className:"text-sm text-slate-900 dark:text-slate-100",children:Y.partName}),s.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"[Khc]"}),s.jsxs("div",{className:"text-xs text-slate-500",children:["- G Bn l: ",Oe(7e4)]}),s.jsxs("div",{className:"text-xs text-slate-500",children:["- G Bn s: ",Oe(0)]}),s.jsx("div",{className:"text-xs text-red-500",children:"( xut kho)"})]}),s.jsx("td",{className:"px-3 py-3 text-center",children:s.jsx("input",{type:"number",value:Y.quantity,onChange:Q=>ae(re,Number(Q.target.value)),onFocus:()=>E(re),onBlur:()=>E(null),min:"1",className:"w-16 px-2 py-1 border border-slate-300 dark:border-slate-600 rounded text-center bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:border-blue-500 focus:ring-1 focus:ring-blue-500"})}),s.jsx("td",{className:"px-3 py-3 text-right",children:s.jsx(P0,{value:Y.unitPrice,onValue:Q=>se(re,Q),className:"w-28 px-2 py-1 border border-slate-300 dark:border-slate-600 rounded text-right bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:border-blue-500 focus:ring-1 focus:ring-blue-500"})}),s.jsx("td",{className:"px-3 py-3 text-right text-sm font-medium text-slate-900 dark:text-slate-100",children:Oe(Y.totalPrice)}),s.jsx("td",{className:"px-3 py-3 text-center",children:s.jsxs("div",{className:"flex justify-center gap-1",children:[s.jsx("button",{type:"button",onClick:()=>xe(re),className:"p-1 text-blue-400 hover:bg-blue-500/20 rounded",title:"Chnh sa",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),s.jsx("button",{type:"button",onClick:()=>B(re),className:"p-1 text-slate-400 hover:bg-slate-500/20 rounded",title:"Xa sn phm",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"})})})]})})]},Y.id))}),s.jsx("tfoot",{className:"bg-slate-50 dark:bg-slate-700",children:s.jsxs("tr",{children:[s.jsx("td",{colSpan:4,className:"px-3 py-2 text-right font-bold text-slate-900 dark:text-slate-100",children:"TNG:"}),s.jsx("td",{className:"px-3 py-2 text-right font-bold text-slate-900 dark:text-slate-100",children:Oe(K)}),s.jsx("td",{})]})})]})})]}),s.jsxs("div",{className:"border border-slate-300 dark:border-slate-600 rounded-lg p-4",children:[s.jsx("label",{className:"block text-base font-medium text-teal-600 dark:text-teal-400 mb-3",children:"Cng n:"}),s.jsxs("div",{className:"flex items-center justify-between mb-3 p-3 bg-red-50 dark:bg-red-900/20 rounded-lg",children:[s.jsxs("span",{className:"text-lg font-bold text-red-600 dark:text-red-400",children:["TNG PHI CHI: ",Oe(K)]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("span",{className:"text-sm text-green-600 dark:text-green-400 flex items-center gap-1",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})," thanh ton "]}),s.jsxs("button",{type:"button",className:"px-3 py-1 bg-red-600 hover:bg-red-700 text-white rounded text-sm flex items-center gap-1",children:[s.jsx("span",{className:"text-lg",children:"+"}),"To phiu chi"]})]})]}),s.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400 mb-3 flex items-start gap-1",children:[s.jsx("svg",{className:"w-4 h-4 mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Tng phi chi l ph cha phi tr cho i tc sa cha"]}),s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{className:"border-b border-slate-200 dark:border-slate-700",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-2 py-2 text-left text-slate-700 dark:text-slate-300",children:"-"}),s.jsx("th",{className:"px-2 py-2 text-left text-slate-700 dark:text-slate-300",children:"Thi gian"}),s.jsx("th",{className:"px-2 py-2 text-left text-slate-700 dark:text-slate-300",children:"Ngi chi - Ghi ch"}),s.jsx("th",{className:"px-2 py-2 text-right text-slate-700 dark:text-slate-300",children:"S tin"})]})}),s.jsx("tbody",{children:U.map((Y,re)=>s.jsxs("tr",{className:"border-b border-slate-200 dark:border-slate-700",children:[s.jsx("td",{className:"px-2 py-2 text-slate-900 dark:text-slate-100",children:re+1}),s.jsxs("td",{className:"px-2 py-2 text-slate-900 dark:text-slate-100",children:[Y.time," ",new Date(Y.date).toLocaleDateString("vi-VN",{day:"2-digit",month:"2-digit",year:"numeric"})]}),s.jsxs("td",{className:"px-2 py-2",children:[s.jsx("div",{className:"text-slate-900 dark:text-slate-100",children:Y.payer}),s.jsx("div",{className:"text-xs text-slate-500",children:Y.cashier})]}),s.jsx("td",{className:"px-2 py-2 text-right text-slate-900 dark:text-slate-100",children:Oe(Y.amount)})]},re))}),s.jsx("tfoot",{className:"bg-slate-50 dark:bg-slate-700",children:s.jsxs("tr",{children:[s.jsx("td",{colSpan:3,className:"px-2 py-2 text-right font-bold text-slate-900 dark:text-slate-100",children:"Tng  chi"}),s.jsx("td",{className:"px-2 py-2 text-right font-bold text-slate-900 dark:text-slate-100",children:Oe(J)})]})})]})]})]}),s.jsxs("div",{className:"sticky bottom-0 bg-white dark:bg-slate-800 border-t border-slate-200 dark:border-slate-700 p-4 flex justify-end gap-3",children:[s.jsx("button",{type:"button",onClick:t,className:"px-6 py-2 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700",children:"NG"}),s.jsx("button",{type:"submit",className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium",children:"LU"})]})]}),s.jsx(J6e,{isOpen:y,onClose:()=>g(!1),onSave:ke,initialData:N==="edit"?{name:a,phone:l,address:"",email:""}:void 0,mode:N}),s.jsx(eje,{isOpen:k,onClose:()=>S(!1),onAdd:fe,currentBranchId:n})]})})},rje=({transactions:e})=>{const t=qn(),{data:r=[]}=Ok(),[n,a]=T.useState("7days"),[i,l]=T.useState(Bn(new Date,!0)),[o,c]=T.useState(Bn(new Date,!0)),[d,f]=T.useState(""),[p,y]=T.useState(null),{currentBranchId:g}=Ba(),N=T.useMemo(()=>{console.log(" [InventoryHistorySection] Tng s giao dch:",e.length);let E=e.filter(q=>q.type==="Nhp kho");console.log(" [InventoryHistorySection] Giao dch 'Nhp kho':",E.length);const D=new Date;switch(n){case"7days":const q=new Date(D.getTime()-6048e5);E=E.filter(U=>new Date(U.date)>=q);break;case"30days":const W=new Date(D.getTime()-720*60*60*1e3);E=E.filter(U=>new Date(U.date)>=W);break;case"thisMonth":const R=new Date(D.getFullYear(),D.getMonth(),1);E=E.filter(U=>new Date(U.date)>=R);break;case"custom":E=E.filter(U=>{const z=new Date(U.date);return z>=new Date(i)&&z<=new Date(o)});break}if(d){const q=d.toLowerCase();E=E.filter(W=>W.partName.toLowerCase().includes(q)||W.notes&&W.notes.toLowerCase().includes(q))}return E.sort((q,W)=>new Date(W.date).getTime()-new Date(q.date).getTime())},[e,n,i,o,d]),w=T.useMemo(()=>N.reduce((E,D)=>E+D.totalPrice,0),[N]),k=T.useMemo(()=>{const E=new Map;return N.forEach(D=>{var z,Z;const q=new Date(D.date),W=`${q.getFullYear()}-${String(q.getMonth()+1).padStart(2,"0")}-${String(q.getDate()).padStart(2,"0")}`,R=(z=D.notes)!=null&&z.includes("NCC:")?(Z=D.notes.split("NCC:")[1])==null?void 0:Z.trim():"Khng xc nh",U=`${W}_${R}_${q.getHours()}_${q.getMinutes()}`;E.has(U)||E.set(U,[]),E.get(U).push(D)}),Array.from(E.entries()).map(([D,q],W)=>{var Z,H,K;const R=q[0],U=new Date(R.date);let z="";if(R.notes){const J=R.notes.match(/NH-\d{8}-\d{3}/);J&&(z=J[0])}return z||(z=`NH-${`${U.getFullYear()}${String(U.getMonth()+1).padStart(2,"0")}${String(U.getDate()).padStart(2,"0")}`}-${String(E.size-W).padStart(3,"0")}`),{receiptCode:z,date:R.date,supplier:(Z=R.notes)!=null&&Z.includes("NCC:")?(K=(H=R.notes.split("NCC:")[1])==null?void 0:H.split("|")[0])==null?void 0:K.trim():"Khng xc nh",items:q,total:q.reduce((J,ae)=>J+ae.totalPrice,0)}}).sort((D,q)=>new Date(q.date).getTime()-new Date(D.date).getTime())},[N]),[S,O]=T.useState(new Set);return s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-sm border border-slate-200 dark:border-slate-700",children:[s.jsxs("div",{className:"p-3 sm:p-6 border-b border-slate-200 dark:border-slate-700",children:[s.jsx("h2",{className:"text-lg sm:text-xl font-bold text-slate-900 dark:text-slate-100 mb-3 sm:mb-4",children:"Lch s nhp kho"}),s.jsx("div",{className:"flex flex-wrap gap-2 mb-3 sm:mb-4",children:[{key:"7days",label:"7 ngy qua"},{key:"30days",label:"30 ngy qua"},{key:"thisMonth",label:"Thng ny"},{key:"custom",label:"Ty chn"}].map(E=>s.jsx("button",{onClick:()=>a(E.key),className:`px-3 py-1.5 sm:px-4 sm:py-2 rounded-lg text-sm sm:text-base font-medium transition-colors ${n===E.key?"bg-blue-600 text-white":"bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-600"}`,children:E.label},E.key))}),n==="custom"&&s.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 mb-3 sm:mb-4",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("label",{className:"block text-xs sm:text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"T ngy"}),s.jsx("input",{type:"date",value:i,onChange:E=>l(E.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 text-sm sm:text-base"})]}),s.jsxs("div",{className:"flex-1",children:[s.jsx("label",{className:"block text-xs sm:text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"n ngy"}),s.jsx("input",{type:"date",value:o,onChange:E=>c(E.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 text-sm sm:text-base"})]})]}),s.jsx("input",{type:"text",placeholder:"Nh cung cp, SKU, tn ph tng...",value:d,onChange:E=>f(E.target.value),className:"w-full px-3 py-2 sm:px-4 sm:py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 text-sm sm:text-base"})]}),s.jsx("div",{className:"px-3 py-3 sm:px-6 sm:py-4 bg-slate-50 dark:bg-slate-900 border-b border-slate-200 dark:border-slate-700",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{className:"text-xs sm:text-sm text-slate-600 dark:text-slate-400",children:["Tng s tin:"," ",s.jsx("span",{className:"text-base sm:text-lg font-bold text-slate-900 dark:text-slate-100",children:k.length})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-xs sm:text-sm text-slate-600 dark:text-slate-400",children:"Tng gi tr"}),s.jsx("div",{className:"text-base sm:text-lg font-bold text-blue-600",children:Oe(w)})]})]})}),s.jsxs("div",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:[k.length>0&&s.jsxs("div",{className:"hidden md:grid grid-cols-12 gap-4 px-4 py-3 bg-slate-100 dark:bg-slate-700 border-b border-slate-200 dark:border-slate-600 sticky top-0 z-10",children:[s.jsx("div",{className:"col-span-1 text-xs font-semibold text-slate-600 dark:text-slate-300"}),s.jsx("div",{className:"col-span-2 text-xs font-semibold text-slate-600 dark:text-slate-300",children:"M phiu"}),s.jsx("div",{className:"col-span-2 text-xs font-semibold text-slate-600 dark:text-slate-300",children:"Nh cung cp"}),s.jsx("div",{className:"col-span-4 text-xs font-semibold text-slate-600 dark:text-slate-300",children:"Chi tit"}),s.jsx("div",{className:"col-span-2 text-xs font-semibold text-slate-600 dark:text-slate-300",children:"Thanh ton"}),s.jsx("div",{className:"col-span-1 text-xs font-semibold text-slate-600 dark:text-slate-300",children:"Thao tc"})]}),k.length===0?s.jsxs("div",{className:"px-3 py-8 sm:px-6 sm:py-12 text-center text-slate-500",children:[s.jsx("div",{className:"text-4xl sm:text-6xl mb-4",children:""}),s.jsx("div",{className:"text-sm sm:text-base",children:"Khng c d liu"})]}):k.map(E=>{var H,K,J,ae,se,ue,fe;const D=new Date(E.date),q=D.toLocaleDateString("vi-VN",{day:"2-digit",month:"2-digit",year:"numeric"}),W=D.toLocaleTimeString("vi-VN",{hour:"2-digit",minute:"2-digit"}),R=r.find(ke=>{var _e;return(_e=ke.description)==null?void 0:_e.includes(E.receiptCode)}),U=R?R.totalAmount-R.remainingAmount:E.total,z=(R==null?void 0:R.remainingAmount)||0,Z=z>0;return s.jsxs("div",{className:"p-4 hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors",children:[s.jsxs("div",{className:"md:hidden flex flex-col gap-3 bg-white dark:bg-slate-800/60 rounded-2xl border border-slate-200 dark:border-slate-700 p-4 shadow-sm",children:[s.jsxs("div",{className:"flex items-start justify-between gap-3",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-cyan-600 dark:text-cyan-300",children:[" ",E.receiptCode]}),s.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400 flex items-center gap-1 mt-1",children:[""," ",s.jsxs("span",{children:[q,"  ",W]})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Tng tin"}),s.jsx("div",{className:"text-lg font-bold text-slate-900 dark:text-white",children:Oe(E.total)})]})]}),s.jsxs("div",{className:"flex items-center gap-3 bg-slate-50 dark:bg-slate-900/30 rounded-2xl p-3",children:[s.jsx("div",{className:"w-12 h-12 rounded-full bg-orange-100 dark:bg-orange-900/30 flex items-center justify-center text-orange-600 dark:text-orange-200 font-semibold text-lg",children:""}),s.jsxs("div",{children:[s.jsx("div",{className:"text-base font-semibold text-slate-900 dark:text-white",children:E.supplier}),((H=E.items[0].notes)==null?void 0:H.includes("Phone:"))&&s.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:[" ",(K=E.items[0].notes.split("Phone:")[1])==null?void 0:K.trim()]})]})]}),s.jsx("div",{className:"space-y-2",children:E.items.map((ke,_e)=>s.jsxs("div",{className:"flex items-start justify-between text-sm text-slate-700 dark:text-slate-200",children:[s.jsxs("div",{children:[s.jsxs("span",{className:"font-semibold",children:[ke.quantity," x ",ke.partName]}),s.jsxs("div",{className:"text-xs text-slate-400",children:[Oe(ke.unitPrice||0)," / sn phm"]})]}),s.jsx("span",{className:"font-bold text-slate-900 dark:text-white",children:Oe(ke.quantity*(ke.unitPrice||0))})]},ke.id))}),s.jsx("div",{className:"flex flex-wrap gap-2",children:Z?s.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-semibold bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-200",children:[" Cn n ",Oe(z)]}):s.jsx("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-semibold bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-200",children:"  thanh ton"})}),s.jsx("div",{className:"flex flex-wrap gap-2 pt-3 border-t border-dashed border-slate-200 dark:border-slate-700",children:s.jsx("button",{onClick:()=>y({...E,date:new Date(E.date)}),className:"flex-1 min-w-[120px] px-3 py-2 rounded-xl bg-slate-100 dark:bg-slate-800 text-slate-700 dark:text-slate-200 text-sm font-medium",children:"Chnh sa"})})]}),s.jsxs("div",{className:"hidden md:grid grid-cols-12 gap-4 items-start",children:[s.jsx("div",{className:"col-span-1 flex items-start pt-1",children:s.jsx("input",{type:"checkbox",checked:S.has(E.receiptCode),onChange:ke=>{const _e=new Set(S);ke.target.checked?_e.add(E.receiptCode):_e.delete(E.receiptCode),O(_e)},className:"w-4 h-4 rounded border-slate-300"})}),s.jsx("div",{className:"col-span-2",children:s.jsxs("div",{className:"space-y-1",children:[s.jsx("div",{className:"text-sm font-bold text-cyan-600 dark:text-cyan-400",children:E.receiptCode}),s.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:[q," ",W]}),s.jsxs("div",{className:"text-xs text-slate-600 dark:text-slate-300",children:[s.jsx("span",{className:"font-medium",children:"NV:"})," ",((se=(ae=(J=E.items[0].notes)==null?void 0:J.split("NV:")[1])==null?void 0:ae.split("NCC:")[0])==null?void 0:se.trim())||"Xun Nhan"]})]})}),s.jsx("div",{className:"col-span-2",children:s.jsxs("div",{className:"space-y-1",children:[s.jsx("div",{className:"text-sm font-semibold text-slate-900 dark:text-slate-100",children:E.supplier}),((ue=E.items[0].notes)==null?void 0:ue.includes("Phone:"))&&s.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:[" ",(fe=E.items[0].notes.split("Phone:")[1])==null?void 0:fe.trim()]})]})}),s.jsx("div",{className:"col-span-4",children:s.jsx("div",{className:"space-y-1",children:E.items.map((ke,_e)=>s.jsxs("div",{className:"text-xs text-slate-700 dark:text-slate-300",children:[s.jsxs("span",{className:"font-medium",children:[ke.quantity," x"]})," ",ke.partName,s.jsxs("span",{className:"text-slate-400 ml-1",children:["(",Oe(ke.unitPrice||0),")"]})]},ke.id))})}),s.jsx("div",{className:"col-span-2",children:s.jsxs("div",{className:"space-y-1",children:[s.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:"Tng tin:"}),s.jsx("div",{className:"text-base font-bold text-slate-900 dark:text-white",children:Oe(E.total)}),Z?s.jsxs("div",{className:"mt-2 space-y-1",children:[s.jsxs("div",{className:"text-xs text-green-600 dark:text-green-400",children:[" tr: ",Oe(U)]}),s.jsxs("div",{className:"text-xs font-semibold text-red-600 dark:text-red-400",children:["Cn n: ",Oe(z)]}),s.jsx("div",{className:"inline-flex items-center gap-1 px-2 py-1 rounded text-xs font-medium bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-300",children:" Cn n"})]}):s.jsx("div",{className:"mt-2",children:s.jsx("div",{className:"inline-flex items-center gap-1 px-2 py-1 rounded text-xs font-medium bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-300",children:"  thanh ton"})})]})}),s.jsx("div",{className:"col-span-1",children:s.jsx("button",{onClick:()=>y({...E,date:new Date(E.date)}),className:"p-1.5 text-blue-400 hover:bg-blue-500/20 rounded transition-colors",title:"Chnh sa",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})})})]})]},E.receiptCode)})]}),s.jsx("div",{className:"px-6 py-4 border-t border-slate-200 dark:border-slate-700",children:s.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:["Hin th ",k.length," phiu nhp"]})}),p&&s.jsx(tje,{receipt:p,onClose:()=>y(null),onSave:async E=>{var D,q,W,R,U,z,Z,H,K;try{const J=new Set(p.items.map(fe=>fe.id)),ae=new Set(E.items.filter(fe=>!fe.id.startsWith("new-")).map(fe=>fe.id)),se=Array.from(J).filter(fe=>!ae.has(fe));for(const fe of se){const ke=p.items.find(B=>B.id===fe);if(!ke)continue;const{data:_e,error:Le}=await Ot.from("parts").select("stock").eq("id",ke.partId).single();if(Le)throw new Error(`Khng th ly thng tin ph tng: ${Le.message}`);if(_e){const ee=(((D=_e.stock)==null?void 0:D[g])||0)-ke.quantity;if(ee<0)throw new Error(`Khng th xa sn phm "${ke.partName}" v s lm tn kho m`);const{error:Y}=await Ot.from("parts").update({stock:{..._e.stock,[g]:ee}}).eq("id",ke.partId);if(Y)throw new Error(`Khng th cp nht tn kho: ${Y.message}`)}const{error:xe}=await Ot.from("inventory_transactions").delete().eq("id",fe);if(xe)throw new Error(`Khng th xa giao dch: ${xe.message}`)}for(const fe of E.items){if(fe.id.startsWith("new-"))continue;const ke=p.items.find(Le=>Le.id===fe.id),{error:_e}=await Ot.from("inventory_transactions").update({quantity:fe.quantity,unitPrice:fe.unitPrice,totalPrice:fe.totalPrice,notes:`NV:${((R=(W=(q=E.items[0].notes)==null?void 0:q.split("NV:")[1])==null?void 0:W.split("NCC:")[0])==null?void 0:R.trim())||"Xun Nhan"} NCC:${E.supplier}${E.supplierPhone?` Phone:${E.supplierPhone}`:""}`}).eq("id",fe.id);if(_e)throw _e;if(ke&&ke.quantity!==fe.quantity){const Le=fe.quantity-ke.quantity,{data:xe,error:B}=await Ot.from("parts").select("stock, id").eq("id",ke.partId).single();if(B)throw new Error(`Khng th ly thng tin ph tng: ${B.message}`);if(xe){const ee=((U=xe.stock)==null?void 0:U[g])||0,Y=ee+Le;if(Y<0)throw new Error(`Khng th gim s lng v s lm tn kho m (hin c: ${ee})`);const{error:re}=await Ot.from("parts").update({stock:{...xe.stock,[g]:Y}}).eq("id",xe.id);if(re)throw new Error(`Khng th cp nht tn kho: ${re.message}`)}}}const ue=E.items.filter(fe=>fe.id.startsWith("new-"));for(const fe of ue){const{data:ke,error:_e}=await Ot.from("parts").select("stock, id").eq("id",fe.partId).single();if(_e)throw new Error(`Khng th ly thng tin ph tng: ${_e.message}`);if(ke){const B=(((z=ke.stock)==null?void 0:z[g])||0)+fe.quantity,{error:ee}=await Ot.from("parts").update({stock:{...ke.stock,[g]:B}}).eq("id",ke.id);if(ee)throw new Error(`Khng th cp nht tn kho: ${ee.message}`)}const{error:Le}=await Ot.from("inventory_transactions").insert({type:"Nhp kho",partId:fe.partId,partName:fe.partName,quantity:fe.quantity,date:p.date.toISOString(),unitPrice:fe.unitPrice,totalPrice:fe.totalPrice,branchId:g,notes:`NV:${((K=(H=(Z=E.items[0].notes)==null?void 0:Z.split("NV:")[1])==null?void 0:H.split("NCC:")[0])==null?void 0:K.trim())||"Xun Nhan"} NCC:${E.supplier}${E.supplierPhone?` Phone:${E.supplierPhone}`:""}`});if(Le)throw new Error(`Khng th to giao dch mi: ${Le.message}`)}Xe.success(` cp nht phiu nhp kho (${E.items.length} sn phm)`),t.invalidateQueries({queryKey:["inventoryTransactions"]}),t.invalidateQueries({queryKey:["partsRepo"]}),t.invalidateQueries({queryKey:["partsRepoPaged"]}),y(null)}catch(J){Xe.error(`Li cp nht: ${J.message||"Khng r"}`)}},currentBranchId:g})]})},nje=()=>{var yr;const{currentBranchId:e}=Ba(),{mutateAsync:t}=x6e(),r=zee(),{data:n=[]}=wA({branchId:e}),[a,i]=T.useState("stock"),[l,o]=T.useState(!1),[c,d]=T.useState(""),[f,p]=T.useState("all"),[y,g]=T.useState("all"),[N,w]=T.useState(!1),[k,S]=T.useState(1),[O,E]=T.useState(20),[D,q]=T.useState([]),[W,R]=T.useState(null),[U,z]=T.useState(!1),[Z,H]=T.useState(null),[K,J]=T.useState(!1),[ae,se]=T.useState(null),ue=Ge=>{if(!Ge)return"#94a3b8";let vt=0;for(let Yt=0;Yt<Ge.length;Yt++)vt=Ge.charCodeAt(Yt)+((vt<<5)-vt);const $t=(vt&16777215).toString(16).toUpperCase();return`#${"00000".substring(0,6-$t.length)+$t}`},{confirm:fe,confirmState:ke,handleConfirm:_e,handleCancel:Le}=PV(),{data:xe,isLoading:B,isError:ee}=A6({page:k,pageSize:O,search:c,category:f==="all"?void 0:f}),Y=(xe==null?void 0:xe.data)||[],re=((yr=xe==null?void 0:xe.meta)==null?void 0:yr.total)||0,Q=Math.max(1,Math.ceil(re/O)),{data:Ce,refetch:me}=Ts({queryKey:["allPartsForTotals",e,c,f],queryFn:async()=>{console.log(" Fetching allPartsForTotals...");let Ge=Ot.from("parts").select("id, name, sku, stock, costPrice, retailPrice").order("name");if(f&&f!=="all"&&(Ge=Ge.eq("category",f)),c&&c.trim()){const Yt=c.trim();Ge=Ge.or(`name.ilike.%${Yt}%,sku.ilike.%${Yt}%`)}const{data:vt,error:$t}=await Ge;if($t)throw $t;return console.log(` Fetched ${(vt==null?void 0:vt.length)||0} parts`),vt||[]},staleTime:5e3}),ie=T.useMemo(()=>{if(!Ce)return{totalProducts:0,inStock:0,lowStock:0,outOfStock:0};const Ge={totalProducts:Ce.length,inStock:0,lowStock:0,outOfStock:0},vt=e||"";return Ce.forEach($t=>{var Er;const Yt=((Er=$t.stock)==null?void 0:Er[vt])||0;Yt>0&&(Ge.inStock+=1),Yt===0&&(Ge.outOfStock+=1),Yt>0&&Yt<=Bf&&(Ge.lowStock+=1)}),Ge},[Ce,e]),je=T.useMemo(()=>[{id:"all",label:"Tt c",description:"Ton b kho",count:ie.totalProducts,variant:"neutral"},{id:"in-stock",label:"Cn hng",description:"> 0",count:ie.inStock,variant:"success"},{id:"low-stock",label:"Sp ht",description:`<= ${Bf}`,count:ie.lowStock,variant:"warning"},{id:"out-of-stock",label:"Ht hng",description:"= 0",count:ie.outOfStock,variant:"danger"}],[ie]),be=T.useMemo(()=>{if(!Ce)return new Set;const Ge=new Map;Ce.forEach($t=>{const Yt=Ge.get($t.name)||0;Ge.set($t.name,Yt+1)});const vt=new Set(Array.from(Ge.entries()).filter(([$t,Yt])=>Yt>1).map(([$t,Yt])=>$t));return console.log(` Detected ${vt.size} duplicate product names from ${Ce.length} parts`),vt.size>0&&console.log("Duplicate names:",Array.from(vt).slice(0,5)),vt},[Ce]),le=T.useCallback(Ge=>be.has(Ge),[be]),{data:Ee}=Ts({queryKey:["duplicateParts",e,Array.from(be)],queryFn:async()=>{if(be.size===0)return[];console.log(` Fetching all duplicate parts for ${be.size} names...`);const{data:Ge,error:vt}=await Ot.from("parts").select("*").in("name",Array.from(be)).order("name");if(vt)throw vt;return console.log(` Found ${(Ge==null?void 0:Ge.length)||0} parts with duplicate names`),Ge||[]},enabled:N&&be.size>0,staleTime:5e3}),Me=T.useMemo(()=>{const Ge=N&&be.size>0?Ee||[]:Y;if(y==="all")return Ge;const vt=e||"";return Ge.filter($t=>{var Er;const Yt=((Er=$t.stock)==null?void 0:Er[vt])||0;return y==="in-stock"?Yt>0:y==="low-stock"?Yt>0&&Yt<=Bf:y==="out-of-stock"?Yt===0:!0})},[Y,N,be,Ee,y,e]);T.useEffect(()=>{N&&be.size===0&&w(!1)},[N,be.size]);const ye=T.useMemo(()=>Ce?Ce.reduce((Ge,vt)=>{var $t;return Ge+((($t=vt.stock)==null?void 0:$t[e])||0)},0):0,[Ce,e]),at=T.useMemo(()=>Ce?Ce.reduce((Ge,vt)=>{var Er,wr;const $t=((Er=vt.stock)==null?void 0:Er[e])||0,Yt=((wr=vt.costPrice)==null?void 0:wr[e])||0;return Ge+$t*Yt},0):0,[Ce,e]),lt=qn(),ut=Wee();E6();const nt=Kee(),{data:ot=[]}=zk(),{profile:We}=Dc(),Kt=T.useCallback(async(Ge,vt,$t,Yt,Er)=>{const wr=new Date,Ke=wr.toISOString().split("T")[0].replace(/-/g,""),Et=`NH-${Ke}-${Math.floor(Math.random()*1e3).toString().padStart(3,"0")}`;console.log(" Saving goods receipt:",{receiptCode:Et,supplierId:vt,totalAmount:$t,paymentInfo:Er,itemCount:Ge.length});const{data:ur}=await Ot.from("suppliers").select("name").eq("id",vt).single(),Br=(ur==null?void 0:ur.name)||"Khng xc nh",Tr=(Er==null?void 0:Er.paidAmount)||0,Zt=$t-Tr;try{if(await r.mutateAsync({items:Ge.map(Pr=>({partId:Pr.partId,partName:Pr.partName,quantity:Pr.quantity,importPrice:Pr.importPrice,sellingPrice:Pr.sellingPrice,wholesalePrice:Pr.wholesalePrice||0})),supplierId:vt,branchId:e,userId:(We==null?void 0:We.id)||"unknown",notes:`${Et} | NCC: ${Br}${Yt?" | "+Yt:""}`}),Zt>0&&Er){const Pr=`DEBT-${Ke}-${Math.random().toString(36).substring(2,5).toUpperCase()}`,{error:sr}=await Ot.from("supplier_debts").insert({id:Pr,supplier_id:vt,supplier_name:Br,branch_id:e,total_amount:Zt,paid_amount:0,remaining_amount:Zt,description:`Nhp kho ${Et} - Thanh ton ${Tr.toLocaleString()}/${$t.toLocaleString()} `,created_date:wr.toISOString().split("T")[0],created_at:wr.toISOString()});sr?(console.error(" Error creating debt:",sr),Xe.error("Li to cng n: "+sr.message)):console.log(` Created supplier debt: ${Zt.toLocaleString()} `)}o(!1),Xe.success(`Nhp kho thnh cng! M phiu: ${Et}`),Bs((We==null?void 0:We.id)||null,{action:"inventory.receipt",tableName:"inventory_transactions",oldData:null,newData:{receiptCode:Et,supplierId:vt,supplierName:Br,items:Ge.map(Pr=>({partId:Pr.partId,quantity:Pr.quantity,importPrice:Pr.importPrice,sellingPrice:Pr.sellingPrice})),totalAmount:$t,paidAmount:Tr,debtAmount:Zt,paymentInfo:Er}})}catch(Pr){console.error(" Li lu phiu nhp kho:",Pr),Xe.error(`Li: ${Pr.message||"Khng r"}`)}},[Ce,e,ut,t,We==null?void 0:We.id]),Dt=Ge=>{q(Ge?Me.map(vt=>vt.id):[])},fr=(Ge,vt)=>{q(vt?[...D,Ge]:D.filter($t=>$t!==Ge))},xr=async Ge=>{const vt=Y.find(Yt=>Yt.id===Ge);!vt||!await fe({title:"Xc nhn xa",message:`Bn c chc chn mun xa sn phm "${vt.name}"?`,confirmText:"Xa",cancelText:"Hy",confirmColor:"red"})||nt.mutate({id:Ge},{onSuccess:async()=>{q(Yt=>Yt.filter(Er=>Er!==Ge)),await me(),console.log(" Refetched allPartsForTotals after delete"),Xe.success(` xa ph tng "${vt.name}"`)},onError:Yt=>{console.error("Delete error:",Yt),Xe.error(`Khng th xa: ${Yt.message}`)}})},nr=async()=>{if(D.length===0){Xe.warning("Vui lng chn t nht mt sn phm");return}if(!await fe({title:"Xc nhn xa",message:`Bn c chc chn mun xa ${D.length} sn phm  chn? Hnh ng ny khng th hon tc.`,confirmText:"Xa",cancelText:"Hy",confirmColor:"red"}))return;let vt=0,$t=0;const Yt=D.length;D.forEach((Er,wr)=>{nt.mutate({id:Er},{onSuccess:async()=>{vt++,vt+$t===Yt&&(await me(),console.log(" Refetched allPartsForTotals after bulk delete"),$t===0?Xe.success(` xa ${vt} ph tng`):Xe.warning(` xa ${vt}/${Yt} ph tng (${$t} li)`))},onError:Ke=>{console.error(`Delete error for item ${Er}:`,Ke),$t++,vt+$t===Yt&&(vt===0?Xe.error(`Khng th xa ${Yt} ph tng`):Xe.warning(` xa ${vt}/${Yt} ph tng (${$t} li)`))}})}),q([])},Mr=Ge=>{S(1),g(Ge)},rr=Ge=>{S(1),p(Ge)},Gt=()=>{g("all"),p("all"),w(!1),S(1),J(!1)},Vt=y!=="all"||f!=="all"||N,cr=ie.lowStock>0&&y!=="low-stock",br=ie.totalProducts>0?Math.round(ie.lowStock/ie.totalProducts*100):0,ar=()=>{try{const Ge=new Date,vt=`ton-kho-${Ge.getDate()}-${Ge.getMonth()+1}-${Ge.getFullYear()}.xlsx`;s6e(Y,e,vt),Xe.success("Xut file Excel thnh cng!")}catch(Ge){console.error("Export error:",Ge),Xe.error("C li khi xut file Excel")}},xt=()=>{try{i6e(),Xe.success("Ti template thnh cng! Vui lng in thng tin v import li.")}catch(Ge){console.error("Template download error:",Ge),Xe.error("C li khi ti template")}};return T.useEffect(()=>{if(typeof document>"u")return;const Ge=()=>se(null);return document.addEventListener("click",Ge),()=>document.removeEventListener("click",Ge)},[]),s.jsxs("div",{className:"h-full flex flex-col bg-slate-50 dark:bg-slate-900 sm:bg-[#1e293b]",children:[s.jsx("div",{className:"hidden sm:block bg-primary-bg border-b border-primary-border px-4 py-3",children:s.jsxs("div",{className:"flex items-center justify-between gap-4",children:[s.jsx("div",{className:"flex gap-2",children:[{key:"stock",label:"Tn kho",icon:s.jsx(Gi,{className:"w-4 h-4"})},{key:"categories",label:"Danh mc",icon:s.jsx(Zf,{className:"w-4 h-4"})},{key:"lookup",label:"Tra cu",icon:s.jsx(Pu,{className:"w-4 h-4"})},{key:"history",label:"Lch s",icon:s.jsx(dd,{className:"w-4 h-4"})}].map(Ge=>s.jsx("button",{onClick:()=>i(Ge.key),className:`px-4 py-2 rounded-lg font-medium transition-colors ${a===Ge.key?"bg-blue-600 text-white":"text-secondary-text hover:bg-tertiary-bg"}`,children:s.jsxs("span",{className:"inline-flex items-center gap-1",children:[Ge.icon,Ge.label]})},Ge.key))}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("button",{onClick:()=>o(!0),className:"flex items-center gap-2 px-5 py-2.5 rounded-xl bg-gradient-to-r from-blue-600 to-blue-500 text-white font-semibold shadow-lg shadow-blue-500/30 hover:brightness-110 transition",children:[s.jsx(_c,{className:"w-4 h-4"}),"To phiu nhp"]}),s.jsxs("div",{className:"flex items-center gap-1 rounded-2xl border border-primary-border bg-tertiary-bg px-1.5 py-1",children:[s.jsxs("button",{onClick:()=>{Xe.info("Tnh nng chuyn kho ang pht trin")},className:"p-2 rounded-xl text-secondary-text hover:text-blue-600 hover:bg-primary-bg transition",title:"Chuyn kho",children:[s.jsx(i7,{className:"w-4 h-4"}),s.jsx("span",{className:"sr-only",children:"Chuyn kho"})]}),s.jsxs("button",{onClick:ar,className:"p-2 rounded-xl text-secondary-text hover:text-emerald-600 hover:bg-primary-bg transition",title:"Xut Excel",children:[s.jsx(lee,{className:"w-4 h-4"}),s.jsx("span",{className:"sr-only",children:"Xut Excel"})]}),s.jsxs("button",{onClick:()=>z(!0),className:"p-2 rounded-xl text-secondary-text hover:text-blue-600 hover:bg-primary-bg transition",title:"Nhp CSV",children:[s.jsx(iee,{className:"w-4 h-4"}),s.jsx("span",{className:"sr-only",children:"Nhp CSV"})]}),s.jsxs("button",{onClick:xt,className:"p-2 rounded-xl text-secondary-text hover:text-amber-600 hover:bg-primary-bg transition",title:"Ti mu import",children:[s.jsx(dd,{className:"w-4 h-4"}),s.jsx("span",{className:"sr-only",children:"Ti template"})]})]})]})]})}),s.jsxs("div",{className:"sm:hidden bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 px-3 py-3",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(Pu,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),s.jsx("input",{type:"text",placeholder:"Tm kim theo tn hoc SKU...",value:c,onChange:Ge=>{S(1),d(Ge.target.value)},className:"w-full pl-10 pr-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("button",{onClick:()=>o(!0),className:"flex items-center gap-1.5 px-3 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg text-sm font-medium transition whitespace-nowrap",children:[s.jsx(_c,{className:"w-4 h-4"}),"To phiu"]})]}),s.jsx("div",{className:"flex items-center justify-between text-xs",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Tng:"}),s.jsxs("span",{className:"font-semibold text-blue-600 dark:text-blue-400",children:[ye.toLocaleString()," sp"]})]}),s.jsx("div",{className:"h-3 w-px bg-slate-300 dark:bg-slate-600"}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Gi tr:"}),s.jsx("span",{className:"font-semibold text-green-600 dark:text-green-400",children:Oe(at)})]})]})})]}),a==="stock"&&s.jsx("div",{className:"hidden sm:block bg-primary-bg border-b border-primary-border px-5 py-5",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid gap-4 lg:grid-cols-[minmax(0,1fr)_320px]",children:[s.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[s.jsx("div",{className:"rounded-2xl border border-blue-500/20 bg-gradient-to-r from-blue-500/15 via-blue-500/5 to-transparent p-4 shadow-inner",children:s.jsxs("div",{className:"flex items-center justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs font-semibold uppercase tracking-wider text-blue-600 dark:text-blue-300",children:"Tng s lng tn"}),s.jsxs("p",{className:"mt-2 text-3xl font-bold text-primary-text",children:[ye.toLocaleString()," sp"]}),s.jsxs("p",{className:"text-xs text-secondary-text mt-1",children:[ie.inStock," sn phm cn hng "," ",ie.outOfStock," ht hng"]})]}),s.jsx("div",{className:"p-3 rounded-2xl bg-white/70 dark:bg-slate-900/40 text-blue-600",children:s.jsx(Gi,{className:"w-6 h-6"})})]})}),s.jsx("div",{className:"rounded-2xl border border-emerald-500/20 bg-gradient-to-r from-emerald-500/15 via-emerald-500/5 to-transparent p-4 shadow-inner",children:s.jsxs("div",{className:"flex items-center justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs font-semibold uppercase tracking-wider text-emerald-600 dark:text-emerald-300",children:"Tng gi tr tn"}),s.jsx("p",{className:"mt-2 text-3xl font-bold text-primary-text",children:Oe(at)}),s.jsxs("p",{className:"text-xs text-secondary-text mt-1",children:["Trung bnh"," ",Oe(ye>0?at/ye:0)," ","/ sn phm"]})]}),s.jsx("div",{className:"p-3 rounded-2xl bg-white/70 dark:bg-slate-900/40 text-emerald-600",children:s.jsx(Zf,{className:"w-6 h-6"})})]})})]}),s.jsxs("div",{className:"flex flex-col gap-3",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Pu,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),s.jsx("input",{type:"text",placeholder:"Tm kim theo tn hoc SKU...",value:c,onChange:Ge=>{S(1),d(Ge.target.value)},className:"w-full pl-10 pr-12 py-2.5 border border-primary-border rounded-xl bg-primary-bg text-primary-text focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),s.jsxs("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-xs text-secondary-text",children:[Me.length,"/",re]})]}),s.jsxs("div",{className:"flex items-center justify-end gap-2",children:[s.jsxs("button",{onClick:()=>J(Ge=>!Ge),className:`flex items-center gap-2 px-3 py-2 text-sm font-medium rounded-xl border transition ${K?"border-blue-500 text-blue-600 bg-blue-50 dark:bg-blue-900/20":"border-primary-border text-secondary-text hover:text-primary-text"}`,children:[s.jsx(uee,{className:"w-4 h-4"}),"B lc nng cao",Vt&&s.jsx("span",{className:"h-2 w-2 rounded-full bg-blue-500 animate-pulse"})]}),Vt&&s.jsx("button",{onClick:Gt,className:"px-3 py-2 text-sm font-medium text-red-500 hover:text-red-600",children:"Xa b lc"})]})]})]}),cr&&s.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3 rounded-2xl border border-amber-200 bg-amber-50 px-4 py-3 text-amber-900 dark:border-amber-800 dark:bg-amber-950/50 dark:text-amber-200",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"text-xl",children:""}),s.jsxs("div",{children:[s.jsxs("p",{className:"font-semibold",children:[ie.lowStock," sn phm sp ht hng"]}),s.jsxs("p",{className:"text-xs text-amber-700 dark:text-amber-400",children:["Chim ",br,"% danh mc hin ti"]})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>Mr("low-stock"),className:"px-3 py-1.5 rounded-lg bg-amber-600 text-white text-sm font-semibold hover:bg-amber-700 transition dark:bg-amber-700 dark:hover:bg-amber-600",children:"Lc nhanh"}),s.jsx("button",{onClick:()=>o(!0),className:"px-3 py-1.5 rounded-lg border border-amber-400 text-sm font-medium text-amber-800 hover:bg-amber-100 transition dark:border-amber-600 dark:text-amber-300 dark:hover:bg-amber-950/30",children:"To phiu nhp"})]})]}),s.jsx("div",{className:"grid gap-3 md:grid-cols-2 lg:grid-cols-4",children:je.map(Ge=>{const vt=y===Ge.id,$t=VD[Ge.variant??"neutral"]||VD.neutral,Yt=`text-left rounded-2xl border px-4 py-3 transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 ${vt?$t.buttonActive:$t.buttonInactive}`,Er=`inline-flex items-center justify-center rounded-xl border px-3 py-1 text-xs font-semibold ${vt?$t.badgeActive:$t.badgeInactive}`;return s.jsxs("button",{onClick:()=>Mr(Ge.id),className:Yt,children:[s.jsxs("div",{className:"flex items-center justify-between gap-3",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs font-semibold uppercase tracking-wider text-secondary-text",children:Ge.label}),s.jsx("p",{className:"mt-1 text-2xl font-bold text-primary-text",children:(Ge.count||0).toLocaleString()})]}),s.jsx("span",{className:Er,children:Ge.description})]}),s.jsx("p",{className:"mt-2 text-xs text-tertiary-text",children:"Trng thi kho tng ng"})]},Ge.id)})}),K&&s.jsxs("div",{className:"rounded-2xl border border-primary-border bg-white/70 dark:bg-slate-900/40 p-4 grid gap-4 md:grid-cols-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-semibold uppercase tracking-wide text-secondary-text",children:"Trng thi tn kho"}),s.jsxs("select",{value:y,onChange:Ge=>Mr(Ge.target.value),className:"mt-2 w-full rounded-xl border border-secondary-border bg-primary-bg px-4 py-2.5 text-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500/40",children:[s.jsx("option",{value:"all",children:"Tt c tn kho"}),s.jsx("option",{value:"in-stock",children:"Cn hng"}),s.jsx("option",{value:"low-stock",children:"Sp ht"}),s.jsx("option",{value:"out-of-stock",children:"Ht hng"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-semibold uppercase tracking-wide text-secondary-text",children:"Danh mc"}),s.jsxs("select",{value:f,onChange:Ge=>rr(Ge.target.value),className:"mt-2 w-full rounded-xl border border-secondary-border bg-primary-bg px-4 py-2.5 text-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500/40",children:[s.jsx("option",{value:"all",children:"Tt c danh mc"}),ot.map(Ge=>s.jsx("option",{value:Ge.id,children:Ge.name},Ge.id))]})]}),s.jsxs("div",{className:"flex flex-col justify-end",children:[s.jsx("label",{className:"text-xs font-semibold uppercase tracking-wide text-secondary-text",children:"Pht hin trng tn"}),s.jsx("button",{onClick:()=>w(Ge=>!Ge),className:`mt-2 rounded-xl border px-4 py-2.5 text-sm font-medium transition ${N?"border-orange-500 text-orange-600 bg-orange-50 dark:bg-orange-900/20":"border-secondary-border text-secondary-text hover:text-primary-text"}`,children:N?"ang hin th sn phm trng tn":"Lc sn phm trng tn"})]})]})]})}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-3 sm:p-4",children:[a==="stock"&&s.jsxs("div",{className:"space-y-3",children:[be.size>0&&s.jsx("div",{className:"bg-orange-50 dark:bg-orange-900/20 border-l-4 border-orange-500 p-3 rounded-lg",children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"text-lg",children:""}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("h3",{className:"text-xs font-semibold text-orange-800 dark:text-orange-300 mb-1",children:["Pht hin ",be.size," sn phm trng tn"]}),s.jsx("button",{onClick:()=>w(!N),className:`mt-1 px-2 py-1 rounded text-xs font-medium transition ${N?"bg-orange-600 text-white":"bg-orange-100 dark:bg-orange-900/40 text-orange-800 dark:text-orange-300"}`,children:N?" ang lc":" Lc"})]})]})}),s.jsxs("div",{className:"rounded-lg overflow-hidden border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800",children:[D.length>0&&s.jsxs("div",{className:"px-6 py-3 bg-blue-100 dark:bg-blue-900/30 border-b border-primary-border flex items-center justify-between",children:[s.jsxs("div",{className:"text-sm font-medium text-blue-900 dark:text-blue-100",children:[" chn ",D.length," sn phm"]}),s.jsxs("button",{onClick:nr,className:"flex items-center gap-2 px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg text-sm font-medium transition-colors",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Xa  chn"]})]}),s.jsx("div",{className:"block sm:hidden",children:s.jsx("div",{className:"space-y-3 p-3",children:Me.map((Ge,vt)=>{const $t=Ge.stock[e]||0,Yt=Ge.retailPrice[e]||0,Er=$t*Yt,wr=le(Ge.name);return s.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-xl bg-[#2d3748] border border-slate-600 transition ${wr?"border-l-4 border-l-orange-500":""}`,role:"listitem",children:[s.jsx("div",{className:"w-14 h-14 bg-slate-600 rounded-lg overflow-hidden flex items-center justify-center flex-shrink-0",children:Ge.imageUrl?s.jsx("img",{src:Ge.imageUrl,alt:Ge.name,className:"w-full h-full object-cover"}):s.jsx("div",{className:"w-full h-full flex items-center justify-center",style:{backgroundColor:ue(Ge.category)},children:s.jsx(Zf,{className:"w-6 h-6 text-white opacity-90"})})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-start justify-between gap-2",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"text-[15px] font-medium text-white truncate",children:Ge.name}),s.jsxs("div",{className:"text-[13px] text-slate-400 mt-0.5",children:["SKU: ",Ge.sku,"  ",Ge.category]})]}),s.jsx("div",{className:"text-right flex-shrink-0",children:s.jsxs("div",{className:"text-[13px] text-slate-300",children:[Oe(Er)," "]})})]}),s.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[s.jsx("span",{className:`inline-flex px-2 py-0.5 text-sm font-bold rounded ${$t===0?"text-red-400 bg-red-900/30":$t<10?"text-yellow-400 bg-yellow-900/30":"text-emerald-400 bg-emerald-900/30"}`,children:$t}),s.jsxs("div",{className:"relative",children:[s.jsx("button",{onClick:()=>H(Z===vt?null:vt),"aria-haspopup":"true","aria-expanded":Z===vt,"aria-label":"Thm hnh ng",className:"p-1.5 text-slate-400 hover:bg-slate-600 rounded transition",children:s.jsx(JT,{className:"w-5 h-5"})}),Z===vt&&s.jsxs("div",{className:"absolute right-0 mt-2 w-40 bg-slate-800 border border-slate-700 rounded-lg shadow-xl z-50",children:[s.jsxs("button",{onClick:()=>{R(Ge),H(null)},className:"w-full text-left px-3 py-2 text-sm hover:bg-slate-700 flex items-center gap-2 text-white","aria-label":`Chnh sa ${Ge.name}`,children:[s.jsx(o7,{className:"w-4 h-4 text-blue-400"}),s.jsx("span",{children:"Chnh sa"})]}),s.jsxs("button",{onClick:()=>{xr(Ge.id),H(null)},className:"w-full text-left px-3 py-2 text-sm hover:bg-slate-700 flex items-center gap-2 text-red-400","aria-label":`Xa ${Ge.name}`,children:[s.jsx(Xg,{className:"w-4 h-4"}),s.jsx("span",{children:"Xa"})]})]})]})]})]})]},Ge.id)})})}),s.jsx("div",{className:"hidden sm:block overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-tertiary-bg",children:s.jsxs("tr",{className:"border-b border-primary-border text-xs font-semibold uppercase tracking-wider text-secondary-text",children:[s.jsx("th",{className:"px-6 py-4 text-center w-12",children:s.jsx("input",{type:"checkbox",checked:D.length===Me.length&&Me.length>0,onChange:Ge=>Dt(Ge.target.checked),className:"w-4 h-4 text-blue-600 rounded border-secondary-border focus:ring-blue-500"})}),s.jsx("th",{className:"px-6 py-4 text-left",children:"Sn phm"}),s.jsx("th",{className:"px-6 py-4 text-center",children:"Tn kho"}),s.jsx("th",{className:"px-6 py-4 text-right",children:"Gi nhp"}),s.jsx("th",{className:"px-6 py-4 text-right",children:"Gi bn l"}),s.jsx("th",{className:"px-6 py-4 text-right",children:"Gi bn s"}),s.jsx("th",{className:"px-6 py-4 text-right",children:"Gi tr tn"}),s.jsx("th",{className:"px-6 py-4 text-center w-16",children:"Hnh ng"})]})}),s.jsx("tbody",{className:"bg-primary-bg divide-y divide-primary-border",children:Me.length===0?s.jsx("tr",{children:s.jsxs("td",{colSpan:8,className:"px-6 py-8 text-center text-tertiary-text",children:[s.jsx("div",{className:"text-6xl mb-4",children:""}),s.jsx("div",{className:"text-lg",children:"Khng c sn phm no"}),s.jsx("div",{className:"text-sm",children:"Hy th mt b lc khc hoc thm sn phm mi"})]})}):Me.map(Ge=>{var Or,qr,Lr,An,Ir,Nn;const vt=e||"",$t=((Or=Ge.stock)==null?void 0:Or[vt])||0,Yt=((qr=Ge.retailPrice)==null?void 0:qr[vt])||0,Er=((Lr=Ge.wholesalePrice)==null?void 0:Lr[vt])||0,wr=((An=Ge.costPrice)==null?void 0:An[vt])||0,Ke=$t*Yt,Et=D.includes(Ge.id),ur=le(Ge.name),Br=$t===0?"border-red-300 bg-red-50 text-red-700 dark:border-red-700 dark:bg-red-950/50 dark:text-red-300":$t<=Bf?"border-amber-300 bg-amber-50 text-amber-700 dark:border-amber-600 dark:bg-amber-950/50 dark:text-amber-300":"border-emerald-300 bg-emerald-50 text-emerald-700 dark:border-emerald-600 dark:bg-emerald-950/50 dark:text-emerald-300",Tr=$t===0?"Ht hng":$t<=Bf?"Sp ht":"n nh",Zt=$t===0?"text-red-600 dark:text-red-400":$t<=Bf?"text-amber-600 dark:text-amber-400":"text-emerald-700 dark:text-emerald-400",Pr=((Nn=(Ir=Ge.name)==null?void 0:Ir.charAt(0))==null?void 0:Nn.toUpperCase())||"?",sr=Et?"bg-blue-900/20 dark:bg-blue-900/20":ur?"bg-orange-500/10 border-l-4 border-l-orange-500":"";return s.jsxs("tr",{className:`border-b border-primary-border hover:bg-tertiary-bg transition-colors ${sr}`,children:[s.jsx("td",{className:"px-6 py-4 text-center",children:s.jsx("input",{type:"checkbox",checked:Et,onChange:we=>fr(Ge.id,we.target.checked),className:"w-4 h-4 text-blue-600 rounded border-secondary-border focus:ring-blue-500"})}),s.jsx("td",{className:"px-6 py-4 min-w-[220px]",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"h-12 w-12 rounded-xl overflow-hidden flex items-center justify-center text-base font-semibold text-white",style:Ge.imageUrl?void 0:{backgroundColor:ue(Ge.category)},children:Ge.imageUrl?s.jsx("img",{src:Ge.imageUrl,alt:Ge.name,className:"h-full w-full object-cover"}):s.jsx("span",{children:Pr})}),s.jsxs("div",{className:"flex flex-col gap-1",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-primary-text",children:[Ge.name,ur&&s.jsx("span",{className:"inline-flex items-center gap-1 rounded-full border border-orange-300 bg-orange-50 px-2 py-0.5 text-[11px] font-semibold text-orange-700 dark:bg-orange-900/30",title:"Sn phm c tn trng lp",children:" Trng"})]}),s.jsxs("div",{className:"text-xs text-tertiary-text",children:["SKU: ",Ge.sku||"N/A"]}),s.jsx("div",{className:"text-xs text-tertiary-text",children:Ge.category||"Cha phn loi"})]})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:s.jsxs("div",{className:"flex flex-col items-center gap-1",children:[s.jsx("span",{className:`text-lg font-semibold ${Zt}`,children:$t.toLocaleString()}),s.jsxs("span",{className:`inline-flex items-center gap-1 rounded-full border px-2 py-0.5 text-xs font-semibold ${Br}`,children:[s.jsx("span",{className:`h-1.5 w-1.5 rounded-full ${$t===0?"bg-red-500":$t<=Bf?"bg-amber-500":"bg-emerald-500"}`}),Tr]})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm text-secondary-text",children:Oe(wr)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium text-primary-text",children:Oe(Yt)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm text-secondary-text",children:Oe(Er)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-semibold text-primary-text",children:Oe(Ke)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:s.jsxs("div",{className:"relative flex justify-end",children:[s.jsx("button",{onClick:we=>{we.stopPropagation(),se(Ne=>Ne===Ge.id?null:Ge.id)},className:"rounded-full border border-transparent p-2 text-secondary-text hover:border-secondary-border hover:text-primary-text transition","aria-haspopup":"menu","aria-expanded":ae===Ge.id,title:"Thao tc nhanh",children:s.jsx(JT,{className:"w-5 h-5"})}),ae===Ge.id&&s.jsxs("div",{className:"absolute right-0 top-full z-10 mt-2 w-44 overflow-hidden rounded-xl border border-primary-border bg-white shadow-xl dark:bg-slate-800",onClick:we=>we.stopPropagation(),children:[s.jsxs("button",{onClick:we=>{we.stopPropagation(),R(Ge),se(null)},className:"flex w-full items-center gap-2 px-4 py-2 text-left text-sm hover:bg-blue-50 dark:hover:bg-slate-700",children:[s.jsx(o7,{className:"h-4 w-4 text-blue-500"}),"Chnh sa"]}),s.jsxs("button",{onClick:we=>{we.stopPropagation(),se(null),xr(Ge.id)},className:"flex w-full items-center gap-2 px-4 py-2 text-left text-sm text-red-500 hover:bg-red-50 dark:hover:bg-slate-700/70",children:[s.jsx(Xg,{className:"h-4 w-4"}),"Xa"]})]})]})})]},Ge.id)})})]})}),s.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-t border-primary-border bg-primary-bg",children:[s.jsxs("div",{className:"text-sm text-secondary-text",children:["Trang ",k,"/",Q,"  Tng ",re," ph tng"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{disabled:k===1||B,onClick:()=>S(Ge=>Math.max(1,Ge-1)),className:"px-3 py-1.5 border border-secondary-border rounded disabled:opacity-40",children:" Trc"}),s.jsx("button",{disabled:k>=Q||B,onClick:()=>S(Ge=>Math.min(Q,Ge+1)),className:"px-3 py-1.5 border border-secondary-border rounded disabled:opacity-40",children:"Sau "}),s.jsx("select",{value:O,onChange:Ge=>{const vt=Number(Ge.target.value)||20;E(vt),S(1)},className:"px-2 py-1.5 border border-secondary-border rounded",children:[10,20,50,100].map(Ge=>s.jsxs("option",{value:Ge,children:[Ge,"/trang"]},Ge))})]})]})]})]}),a==="history"&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"hidden sm:block",children:s.jsx(rje,{transactions:n})}),s.jsx("div",{className:"sm:hidden",children:s.jsx(Y6e,{transactions:n})})]}),a==="categories"&&s.jsx("div",{className:"bg-[#0f172a] -m-3 sm:-m-6",children:s.jsx(DV,{})}),a==="lookup"&&s.jsxs("div",{className:"bg-[#0f172a] -m-3 sm:-m-6",children:[s.jsx("div",{className:"hidden sm:block",children:s.jsx(MV,{})}),s.jsx("div",{className:"sm:hidden",children:s.jsx(m6e,{})})]})]}),s.jsx("div",{className:"hidden sm:block",children:s.jsx(Q6e,{isOpen:l,onClose:()=>o(!1),parts:Ce||[],currentBranchId:e,onSave:Kt})}),s.jsx(Z6e,{isOpen:l,onClose:()=>o(!1),parts:Ce||[],currentBranchId:e,onSave:Kt}),W&&s.jsx(sje,{part:W,onClose:()=>R(null),onSave:Ge=>{console.log(" Saving part updates:",Ge);const vt={name:Ge.name,category:Ge.category,stock:Ge.stock,retailPrice:Ge.retailPrice,wholesalePrice:Ge.wholesalePrice};Ge.costPrice&&(vt.costPrice=Ge.costPrice),console.log(" Sending updates:",vt),ut.mutate({id:Ge.id,updates:vt}),R(null)},currentBranchId:e}),U&&s.jsx(aje,{onClose:()=>z(!1),onDownloadTemplate:xt,onImport:async Ge=>{var vt,$t;try{const{items:Yt,errors:Er}=await l6e(Ge,e);if(Yt.length===0){const Ne=Er.length?`Khng import c: ${Er.slice(0,3).join("; ")}`:"File khng c d liu hp l";throw new Error(Ne)}const wr=Yt.map(Ne=>Ne.sku);console.log(` Checking ${wr.length} SKUs...`);const Ke=new Map;wr.forEach(Ne=>{Ke.set(Ne,(Ke.get(Ne)||0)+1)});const Et=Array.from(Ke.entries()).filter(([Ne,De])=>De>1).map(([Ne,De])=>`${Ne}(${De}x)`);Et.length>0&&console.warn(` Duplicate SKUs in file: ${Et.slice(0,5).join(", ")}`);const ur=Array.from(new Set(wr)),Br=100,Tr=[];for(let Ne=0;Ne<ur.length;Ne+=Br){const De=ur.slice(Ne,Ne+Br),{data:Ie,error:oe}=await Ot.from("parts").select("*").in("sku",De);if(oe)throw console.error(` Fetch chunk ${Ne/Br+1} error:`,oe),new Error(`Li kim tra ph tng: ${oe.message}`);Ie&&Tr.push(...Ie)}console.log(` Found ${Tr.length} existing parts`);const Zt=new Map(Tr.map(Ne=>[Ne.sku,Ne])),Pr=[],sr=[],Or=[],qr=new Set;let Lr=0,An=0,Ir=0;const Nn=new Date().toISOString();for(const Ne of Yt){if(qr.has(Ne.sku)){console.warn(` Skipping duplicate SKU in file: ${Ne.sku}`),Ir++;continue}qr.add(Ne.sku);const De=Zt.get(Ne.sku);if(De)An+=1,sr.push({id:De.id,stock:{...De.stock,[e]:(De.stock[e]||0)+Ne.quantity},costPrice:{...De.costPrice,[e]:Ne.costPrice},retailPrice:{...De.retailPrice,[e]:Ne.retailPrice},wholesalePrice:{...De.wholesalePrice,[e]:Ne.wholesalePrice}}),Or.push({type:"Nhp kho",date:Nn,branchId:e,partId:De.id,partName:Ne.name,quantity:Ne.quantity,unitPrice:Ne.retailPrice,totalPrice:Ne.quantity*Ne.retailPrice,notes:"Nhp kho t file Excel"});else{Lr+=1;const Ie=((vt=crypto==null?void 0:crypto.randomUUID)==null?void 0:vt.call(crypto))||`${Math.random().toString(36).slice(2)}-${Date.now()}`;Pr.push({id:Ie,name:Ne.name,sku:Ne.sku,category:Ne.category,description:Ne.description,stock:{[e]:Ne.quantity},costPrice:{[e]:Ne.costPrice},retailPrice:{[e]:Ne.retailPrice},wholesalePrice:{[e]:Ne.wholesalePrice}}),Or.push({type:"Nhp kho",date:Nn,branchId:e,partId:Ie,partName:Ne.name,quantity:Ne.quantity,unitPrice:Ne.retailPrice,totalPrice:Ne.quantity*Ne.retailPrice,notes:"Nhp kho t file Excel"})}}if(Pr.length>0){const{data:Ne,error:De}=await Ot.from("parts").insert(Pr).select();if(De)throw console.error(" Batch create error:",De),new Error(`Li to ph tng: ${De.message}`);console.log(` Created ${(Ne==null?void 0:Ne.length)||0} parts`)}if(sr.length>0){let Ne=0,De=0;for(const Ie of sr){const{error:oe}=await Ot.from("parts").update({stock:Ie.stock,costPrice:Ie.costPrice,retailPrice:Ie.retailPrice,wholesalePrice:Ie.wholesalePrice}).eq("id",Ie.id);oe?(console.error(` Update error for part ${Ie.id}:`,oe),De++):Ne++}console.log(` Updated ${Ne}/${sr.length} parts`)}if(Or.length>0){const{error:Ne}=await Ot.from("inventory_transactions").insert(Or);Ne&&console.warn(" Inventory transactions error:",Ne)}lt.invalidateQueries({queryKey:["partsRepo"]}),lt.invalidateQueries({queryKey:["partsRepoPaged"]});try{const{data:Ne}=await Ot.auth.getUser();await Bs((($t=Ne==null?void 0:Ne.user)==null?void 0:$t.id)||null,{action:"inventory.import",tableName:"inventory_transactions",oldData:null,newData:{totalRows:Yt.length+Er.length,created:Lr,updated:An,skipped:Er.length,sampleErrors:Er.slice(0,10),branchId:e,at:Nn}})}catch{}z(!1);let we=`Import: to mi ${Lr}, cp nht ${An}`;Ir>0&&(we+=`, b qua ${Ir} SKU trng`),Er.length>0&&(we+=`, ${Er.length} dng li`),Xe.success(we)}catch(Yt){console.error(" Import error:",Yt),Xe.error(`Li import: ${Yt}`)}}}),s.jsx(IV,{isOpen:ke.isOpen,title:ke.title,message:ke.message,confirmText:ke.confirmText,cancelText:ke.cancelText,confirmColor:ke.confirmColor,onConfirm:_e,onCancel:Le}),s.jsxs("div",{className:"sm:hidden fixed bottom-24 right-4 z-40 flex flex-col gap-2",children:[s.jsx("button",{onClick:()=>o(!0),className:"w-12 h-12 bg-green-600 hover:bg-green-700 text-white rounded-full shadow-lg flex items-center justify-center transition-all transform hover:scale-105","aria-label":"To phiu nhp",children:s.jsx(_c,{className:"w-4 h-4"})}),s.jsx("button",{onClick:ar,className:"w-12 h-12 bg-orange-600 hover:bg-orange-700 text-white rounded-full shadow-lg flex items-center justify-center transition-all transform hover:scale-105","aria-label":"Xut Excel",children:s.jsx(i7,{className:"w-4 h-4"})})]}),s.jsx("div",{className:"sm:hidden fixed bottom-0 left-0 right-0 bg-white dark:bg-slate-800 border-t border-slate-200 dark:border-slate-700 z-50 safe-area-bottom",children:s.jsxs("div",{className:"grid grid-cols-4 gap-0.5 px-1 py-1",children:[s.jsxs("button",{onClick:()=>i("stock"),className:`flex flex-col items-center gap-0.5 px-1 py-1 rounded-lg transition ${a==="stock"?"bg-amber-50 dark:bg-amber-900/30 text-amber-600 dark:text-amber-400":"text-slate-600 dark:text-slate-400"}`,children:[s.jsx(Gi,{className:"w-4 h-4"}),s.jsx("span",{className:"text-[9px] font-medium",children:"Tn kho"})]}),s.jsxs("button",{onClick:()=>i("categories"),className:`flex flex-col items-center gap-0.5 px-1 py-1 rounded-lg transition ${a==="categories"?"bg-purple-50 dark:bg-purple-900/30 text-purple-600 dark:text-purple-400":"text-slate-600 dark:text-slate-400"}`,children:[s.jsx(Zf,{className:"w-4 h-4"}),s.jsx("span",{className:"text-[9px] font-medium",children:"Danh mc"})]}),s.jsxs("button",{onClick:()=>i("lookup"),className:`flex flex-col items-center gap-0.5 px-1 py-1 rounded-lg transition ${a==="lookup"?"bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400":"text-slate-600 dark:text-slate-400"}`,children:[s.jsx(Pu,{className:"w-4 h-4"}),s.jsx("span",{className:"text-[9px] font-medium",children:"Tra cu"})]}),s.jsxs("button",{onClick:()=>i("history"),className:`flex flex-col items-center gap-0.5 px-1 py-1 rounded-lg transition ${a==="history"?"bg-green-50 dark:bg-green-900/30 text-green-600 dark:text-green-400":"text-slate-600 dark:text-slate-400"}`,children:[s.jsx(dd,{className:"w-4 h-4"}),s.jsx("span",{className:"text-[9px] font-medium",children:"Lch s"})]})]})})]})},aje=({onClose:e,onDownloadTemplate:t,onImport:r})=>{const[n,a]=T.useState(null),[i,l]=T.useState(!1),o=d=>{var p,y;const f=(p=d.target.files)==null?void 0:p[0];if(f){const g=(y=f.name.split(".").pop())==null?void 0:y.toLowerCase();g==="xlsx"||g==="xls"||g==="csv"?a(f):Xe.warning("Vui lng chn file Excel (.xlsx, .xls) hoc CSV (.csv)")}},c=async()=>{if(!n){Xe.warning("Vui lng chn file  import");return}l(!0);try{await r(n)}finally{l(!1)}};return s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl max-w-2xl w-full",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200 dark:border-slate-700",children:[s.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100",children:"Nhp tn kho t Excel/CSV"}),s.jsx("button",{onClick:e,disabled:i,className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-200 disabled:opacity-50",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("svg",{className:"w-6 h-6 text-blue-600 dark:text-blue-400 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-medium text-blue-900 dark:text-blue-100 mb-2",children:"Hng dn s dng"}),s.jsxs("ol",{className:"text-sm text-blue-800 dark:text-blue-200 space-y-1 list-decimal list-inside",children:[s.jsx("li",{children:"Ti file template mu"}),s.jsx("li",{children:"in thng tin sn phm vo file"}),s.jsx("li",{children:"Lu file v chn  import"})]}),s.jsx("button",{onClick:t,className:"mt-3 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm font-medium transition-colors",children:" Ti Template Excel"})]})]})}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Chn file  import"}),s.jsxs("div",{className:"border-2 border-dashed border-slate-300 dark:border-slate-600 rounded-lg p-6 text-center",children:[s.jsx("input",{type:"file",accept:".xlsx,.xls,.csv",onChange:o,disabled:i,className:"hidden",id:"file-upload"}),s.jsxs("label",{htmlFor:"file-upload",className:"cursor-pointer inline-flex flex-col items-center",children:[s.jsx("svg",{className:"w-12 h-12 text-slate-400 mb-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),s.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Click  chn file Excel hoc CSV"}),n&&s.jsxs("span",{className:"mt-2 text-sm font-medium text-blue-600 dark:text-blue-400",children:[" ",n.name]})]})]})]}),s.jsxs("div",{className:"flex justify-end gap-3",children:[s.jsx("button",{type:"button",onClick:e,disabled:i,className:"px-4 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors disabled:opacity-50",children:"Hy"}),s.jsx("button",{onClick:c,disabled:!n||i,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:i?"ang x l...":"Import"})]})]})]})})},sje=({part:e,onClose:t,onSave:r,currentBranchId:n})=>{var g,N;const[a,i]=T.useState({name:e.name,category:e.category||"",retailPrice:e.retailPrice[n]||0,wholesalePrice:((g=e.wholesalePrice)==null?void 0:g[n])||0,costPrice:((N=e.costPrice)==null?void 0:N[n])||0,stock:e.stock[n]||0}),{data:l=[]}=zk(),o=yA(),[c,d]=T.useState(!1),[f,p]=T.useState(""),y=w=>{if(w.preventDefault(),!a.name.trim()){Xe.warning("Vui lng nhp tn sn phm");return}r({id:e.id,name:a.name.trim(),category:a.category.trim()||void 0,stock:{...e.stock,[n]:a.stock},costPrice:{...e.costPrice,[n]:a.costPrice},retailPrice:{...e.retailPrice,[n]:a.retailPrice},wholesalePrice:{...e.wholesalePrice,[n]:a.wholesalePrice}})};return s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200 dark:border-slate-700",children:[s.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100",children:"Chnh sa sn phm"}),s.jsx("button",{onClick:t,className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-200",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsxs("form",{onSubmit:y,className:"p-6 space-y-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:["Tn sn phm ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",value:a.name,onChange:w=>i({...a,name:w.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Danh mc"}),s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("select",{value:a.category,onChange:w=>i({...a,category:w.target.value}),className:"flex-1 px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",children:[s.jsx("option",{value:"",children:"-- Chn hoc to mi --"}),l.map(w=>s.jsx("option",{value:w.name,children:w.name},w.id))]}),s.jsx("button",{type:"button",onClick:()=>d(!0),className:"px-3 py-2 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-600",title:"Thm danh mc mi",children:"+"})]}),c&&s.jsxs("form",{onSubmit:async w=>{w.preventDefault();const k=f.trim();if(!k)return Xe.warning("Vui lng nhp tn danh mc");try{const S=await o.mutateAsync({name:k});i({...a,category:S.name}),p(""),d(!1)}catch(S){Xe.error((S==null?void 0:S.message)||"Li to danh mc")}},className:"flex gap-2",children:[s.jsx("input",{autoFocus:!0,type:"text",value:f,onChange:w=>p(w.target.value),placeholder:"Nhp tn danh mc mi",className:"flex-1 px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-sm text-slate-900 dark:text-slate-100"}),s.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm font-medium",children:"Lu"}),s.jsx("button",{type:"button",onClick:()=>{d(!1),p("")},className:"px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg text-sm bg-white dark:bg-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-600",children:"Hy"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Gi nhp"}),s.jsx("input",{type:"number",value:a.costPrice||0,onChange:w=>i({...a,costPrice:Number(w.target.value)}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",min:"0"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Gi bn l"}),s.jsx("input",{type:"number",value:a.retailPrice,onChange:w=>i({...a,retailPrice:Number(w.target.value)}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",min:"0"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Gi bn s"}),s.jsx("input",{type:"number",value:a.wholesalePrice,onChange:w=>i({...a,wholesalePrice:Number(w.target.value)}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",min:"0"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Tn kho hin ti"}),s.jsx("input",{type:"number",value:a.stock,onChange:w=>i({...a,stock:Number(w.target.value)}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",min:"0"}),s.jsx("p",{className:"mt-1 text-xs text-slate-500 dark:text-slate-400",children:"S lng tn kho ti chi nhnh hin ti"})]}),s.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:s.jsxs("div",{className:"text-sm text-blue-800 dark:text-blue-300",children:[s.jsx("div",{className:"font-medium mb-1",children:"Lu :"}),s.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[s.jsx("li",{children:"Bn c th chnh sa trc tip gi nhp, gi bn v tn kho"}),s.jsx("li",{children:'Hoc s dng "To phiu nhp"  ghi nhn lch s nhp kho chi tit'})]})]})}),s.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[s.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:"Hy"}),s.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:"Lu thay i"})]})]})]})})},kb="work_orders";function US(e){return{id:e.id,creationDate:e.creationdate||e.creationDate,customerName:e.customername||e.customerName,customerPhone:e.customerphone||e.customerPhone,vehicleModel:e.vehiclemodel||e.vehicleModel,licensePlate:e.licenseplate||e.licensePlate,issueDescription:e.issuedescript||e.issueDescription,technicianName:e.technicianname||e.technicianName,status:e.status,laborCost:e.laborcost||e.laborCost||0,discount:e.discount,partsUsed:e.partsused||e.partsUsed,additionalServices:e.additionalservices||e.additionalServices,notes:e.notes,total:e.total,branchId:e.branchid||e.branchId,depositAmount:e.depositamount||e.depositAmount,depositDate:e.depositdate||e.depositDate,depositTransactionId:e.deposittransactionid||e.depositTransactionId,paymentStatus:e.paymentstatus||e.paymentStatus,paymentMethod:e.paymentmethod||e.paymentMethod,additionalPayment:e.additionalpayment||e.additionalPayment,totalPaid:e.totalpaid||e.totalPaid,remainingAmount:e.remainingamount||e.remainingAmount,paymentDate:e.paymentdate||e.paymentDate,cashTransactionId:e.cashtransactionid||e.cashTransactionId,refunded:e.refunded,refunded_at:e.refunded_at||e.refundedAt,refund_transaction_id:e.refund_transaction_id||e.refundTransactionId,refund_reason:e.refund_reason||e.refundReason}}async function ije(){try{const{data:e,error:t}=await Ot.from(kb).select("*").order("creationdate",{ascending:!1});return console.log("[fetchWorkOrders] Raw data from DB:",e),console.log("[fetchWorkOrders] Status values:",e==null?void 0:e.map(r=>({id:r.id,status:r.status}))),t?Ct({code:"supabase",message:"Khng th ti danh sch phiu sa cha",cause:t}):_n((e||[]).map(US))}catch(e){return Ct({code:"network",message:"Li kt ni ti my ch",cause:e})}}async function lje(e){var t;try{if(!e.id)return Ct({code:"validation",message:"Thiu ID phiu sa cha"});const r={p_order_id:e.id,p_customer_name:e.customerName||"",p_customer_phone:e.customerPhone||"",p_vehicle_model:e.vehicleModel||"",p_license_plate:e.licensePlate||"",p_issue_description:e.issueDescription||"",p_technician_name:e.technicianName||"",p_status:e.status||"Tip nhn",p_labor_cost:e.laborCost||0,p_discount:e.discount||0,p_parts_used:e.partsUsed||[],p_additional_services:e.additionalServices||null,p_total:e.total||0,p_branch_id:e.branchId||"CN1",p_payment_status:e.paymentStatus||"unpaid",p_payment_method:e.paymentMethod||null,p_deposit_amount:e.depositAmount||0,p_additional_payment:e.additionalPayment||0,p_user_id:null};console.log("[DEBUG] Creating work order with payload:",JSON.stringify(r,null,2));const{data:n,error:a}=await Ot.rpc("work_order_create_atomic",r);if(console.log("[DEBUG] RPC Response - data:",n,"error:",a),a&&console.error("[DEBUG] RPC Error Details:",{code:a.code,message:a.message,details:a.details,hint:a.hint,fullError:JSON.stringify(a,null,2)}),a||!n){const y=(a==null?void 0:a.details)||(a==null?void 0:a.message)||"",g=y.toUpperCase();if(g.includes("INSUFFICIENT_STOCK")){let N=[];const w=y.indexOf(":");if(w!==-1){const S=y.slice(w+1).trim();try{N=JSON.parse(S)}catch{}}const k=Array.isArray(N)?N.map(S=>`${S.partName||S.partId||"?"} (cn ${S.available}, cn ${S.requested})`).join(", "):"";return Ct({code:"validation",message:k?`Thiu tn kho: ${k}`:"Tn kho khng  cho mt hoc nhiu ph tng",cause:a})}return g.includes("PART_NOT_FOUND")?Ct({code:"validation",message:"Khng tm thy ph tng trong kho",cause:a}):g.includes("INVALID_PART")?Ct({code:"validation",message:"D liu ph tng khng hp l",cause:a}):g.includes("INVALID_STATUS")?Ct({code:"validation",message:"Trng thi khng hp l",cause:a}):g.includes("INVALID_PAYMENT_STATUS")?Ct({code:"validation",message:"Trng thi thanh ton khng hp l",cause:a}):g.includes("UNAUTHORIZED")?Ct({code:"supabase",message:"Bn khng c quyn to phiu sa cha",cause:a}):g.includes("BRANCH_MISMATCH")?Ct({code:"validation",message:"Chi nhnh khng khp vi quyn hin ti",cause:a}):Ct({code:"supabase",message:"To phiu sa cha (atomic) tht bi",cause:a})}const i=n.workOrder,l=n.orderId,o=n.depositTransactionId,c=n.paymentTransactionId,d=n.inventoryTxCount;if(!i&&!l)return Ct({code:"unknown",message:"Kt qu RPC khng hp l"});let f=null;if(i)f=US(i);else if(l){const{data:y,error:g}=await Ot.from(kb).select("*").eq("id",l).single();g?console.error("[createWorkOrderAtomic] Cannot fetch order by ID",{orderId:l,fetchError:g}):y&&(f=US(y))}if(!f)return Ct({code:"supabase",message:"Khng th ti d liu phiu sa cha va to"});let p=null;try{const{data:y}=await Ot.auth.getUser();p=((t=y==null?void 0:y.user)==null?void 0:t.id)||null}catch{}return await Bs(p,{action:"work_order.create",tableName:kb,recordId:f.id,oldData:null,newData:f}),_n({...f,depositTransactionId:o,paymentTransactionId:c,inventoryTxCount:d})}catch(r){return Ct({code:"network",message:"Li kt ni khi to phiu sa cha (atomic)",cause:r})}}async function oje(e){var t;try{if(!e.id)return Ct({code:"validation",message:"Thiu ID phiu sa cha"});const r={p_order_id:e.id,p_customer_name:e.customerName||"",p_customer_phone:e.customerPhone||"",p_vehicle_model:e.vehicleModel||"",p_license_plate:e.licensePlate||"",p_issue_description:e.issueDescription||"",p_technician_name:e.technicianName||"",p_status:e.status||"Tip nhn",p_labor_cost:e.laborCost||0,p_discount:e.discount||0,p_parts_used:e.partsUsed||[],p_additional_services:e.additionalServices||null,p_total:e.total||0,p_payment_status:e.paymentStatus||"unpaid",p_payment_method:e.paymentMethod||null,p_deposit_amount:e.depositAmount||0,p_additional_payment:e.additionalPayment||0,p_user_id:null},{data:n,error:a}=await Ot.rpc("work_order_update_atomic",r);if(a||!n){const d=(a==null?void 0:a.details)||(a==null?void 0:a.message)||"",f=d.toUpperCase();if(f.includes("INSUFFICIENT_STOCK")){let p=[];const y=d.indexOf(":");if(y!==-1){const N=d.slice(y+1).trim();try{p=JSON.parse(N)}catch{}}const g=Array.isArray(p)?p.map(N=>`${N.partName||N.partId||"?"} (cn ${N.available}, cn ${N.requested})`).join(", "):"";return Ct({code:"validation",message:g?`Thiu tn kho: ${g}`:"Tn kho khng  cho mt hoc nhiu ph tng",cause:a})}return f.includes("ORDER_NOT_FOUND")?Ct({code:"validation",message:"Khng tm thy phiu sa cha",cause:a}):f.includes("PART_NOT_FOUND")?Ct({code:"validation",message:"Khng tm thy ph tng trong kho",cause:a}):f.includes("INVALID_PART")?Ct({code:"validation",message:"D liu ph tng khng hp l",cause:a}):f.includes("UNAUTHORIZED")?Ct({code:"supabase",message:"Bn khng c quyn cp nht phiu sa cha",cause:a}):f.includes("BRANCH_MISMATCH")?Ct({code:"validation",message:"Chi nhnh khng khp vi quyn hin ti",cause:a}):Ct({code:"supabase",message:"Cp nht phiu sa cha (atomic) tht bi",cause:a})}const i=n.workOrder,l=n.depositTransactionId,o=n.paymentTransactionId;if(!i)return Ct({code:"unknown",message:"Kt qu RPC khng hp l"});let c=null;try{const{data:d}=await Ot.auth.getUser();c=((t=d==null?void 0:d.user)==null?void 0:t.id)||null}catch{}return await Bs(c,{action:"work_order.update",tableName:kb,recordId:i.id,oldData:null,newData:i}),_n({...i,depositTransactionId:l,paymentTransactionId:o})}catch(r){return Ct({code:"network",message:"Li kt ni khi cp nht phiu sa cha (atomic)",cause:r})}}async function cje(e,t){var r;try{let n=null;try{const{data:d}=await Ot.auth.getUser();n=((r=d==null?void 0:d.user)==null?void 0:r.id)||null}catch{}const{data:a,error:i}=await Ot.rpc("work_order_refund_atomic",{p_order_id:e,p_refund_reason:t,p_user_id:n||"unknown"});if(i||!a){console.error("[refundWorkOrder] RPC error:",i),console.error("[refundWorkOrder] Error code:",i==null?void 0:i.code),console.error("[refundWorkOrder] Error message:",i==null?void 0:i.message),console.error("[refundWorkOrder] Error details:",i==null?void 0:i.details);const f=((i==null?void 0:i.details)||(i==null?void 0:i.message)||"").toUpperCase();return f.includes("ORDER_NOT_FOUND")?Ct({code:"validation",message:"Khng tm thy phiu sa cha",cause:i}):f.includes("ALREADY_REFUNDED")?Ct({code:"validation",message:"Phiu ny  c hon tin ri",cause:i}):f.includes("UNAUTHORIZED")?Ct({code:"supabase",message:"Bn khng c quyn hon tin",cause:i}):f.includes("BRANCH_MISMATCH")?Ct({code:"validation",message:"Chi nhnh khng khp vi quyn hin ti",cause:i}):Ct({code:"supabase",message:`Hon tin tht bi: ${(i==null?void 0:i.message)||"Unknown error"}`,cause:i})}const l=a.workOrder,o=a.refund_transaction_id,c=a.refundAmount;return l?(await Bs(n,{action:"work_order.refund",tableName:kb,recordId:e,oldData:null,newData:l}),_n({...l,refund_transaction_id:o,refundAmount:c})):Ct({code:"unknown",message:"Kt qu RPC khng hp l"})}catch(n){return Ct({code:"network",message:"Li kt ni khi hon tin",cause:n})}}const zV=()=>Ts({queryKey:["workOrdersRepo"],queryFn:async()=>{const e=await ije();if(!e.ok)throw e.error;return e.data}}),dje=()=>{const e=qn();return ha({mutationFn:async t=>{const r=await lje(t);if(!r.ok)throw r.error;return r.data},onSuccess:t=>{e.invalidateQueries({queryKey:["workOrdersRepo"]}),e.invalidateQueries({queryKey:["partsRepo"]}),e.invalidateQueries({queryKey:["partsRepoPaged"]}),e.invalidateQueries({queryKey:["inventoryTxRepo"]}),Xe.success(" to phiu sa cha (atomic)"),t!=null&&t.inventoryTxCount&&Xe.info(`Xut kho: ${t.inventoryTxCount} ph tng`)},onError:t=>Xe.error(va(t))})},uje=()=>{const e=qn();return ha({mutationFn:async t=>{const r=await oje(t);if(!r.ok)throw r.error;return r.data},onSuccess:()=>{e.invalidateQueries({queryKey:["workOrdersRepo"]}),e.invalidateQueries({queryKey:["partsRepo"]}),e.invalidateQueries({queryKey:["partsRepoPaged"]}),e.invalidateQueries({queryKey:["inventoryTxRepo"]}),Xe.success(" cp nht lnh sa cha")},onError:t=>Xe.error(va(t))})},hje=()=>{const e=qn();return ha({mutationFn:({orderId:t,refundReason:r})=>cje(t,r),onSuccess:t=>{e.invalidateQueries({queryKey:["workOrdersRepo"]}),e.invalidateQueries({queryKey:["partsRepo"]}),e.invalidateQueries({queryKey:["partsRepoPaged"]}),e.invalidateQueries({queryKey:["inventoryTxRepo"]}),Xe.success(" hon tin phiu sa cha"),t.ok&&t.data.refundAmount&&Xe.info(`Hon tin: ${new Intl.NumberFormat("vi-VN").format(t.data.refundAmount)}`)},onError:t=>Xe.error(va(t))})},WD=({isOpen:e,onClose:t,onSave:r,workOrder:n,customers:a,parts:i,employees:l,currentBranchId:o,upsertCustomer:c})=>{var De,Ie,oe;const d=T.useMemo(()=>{var ze;if(!n)return null;const ne=a.find(st=>st.phone===n.customerPhone||st.name===n.customerName);return!ne&&n.customerName?{id:`temp-${Date.now()}`,name:n.customerName,phone:n.customerPhone||"",vehicles:n.licensePlate?[{id:`temp-veh-${Date.now()}`,licensePlate:n.licensePlate,model:n.vehicleModel||""}]:[]}:ne&&n.licensePlate&&!((ze=ne.vehicles)==null?void 0:ze.some(Ze=>Ze.licensePlate===n.licensePlate))?{...ne,vehicles:[...ne.vehicles||[],{id:`temp-veh-${Date.now()}`,licensePlate:n.licensePlate,model:n.vehicleModel||""}]}:ne||null},[n,a]),f=T.useMemo(()=>d!=null&&d.vehicles?d.vehicles:[],[d]),p=T.useMemo(()=>{if(!n||!f.length)return null;let ne=f.find(ze=>ze.licensePlate===n.licensePlate);return!ne&&n.vehicleModel&&(ne=f.find(ze=>ze.model===n.vehicleModel)),ne||(n.licensePlate||n.vehicleModel?{id:`temp-veh-${Date.now()}`,licensePlate:n.licensePlate||"",model:n.vehicleModel||"",customerId:(d==null?void 0:d.id)||""}:f[0]||null)},[n,f,d]),[y,g]=T.useState((n==null?void 0:n.status)||"Tip nhn"),[N,w]=T.useState(((De=l.find(ne=>ne.name===(n==null?void 0:n.technicianName)))==null?void 0:De.id)||""),[k,S]=T.useState(null),[O,E]=T.useState(null);T.useEffect(()=>{console.log("[WorkOrderMobileModal] workOrder:",n),console.log("[WorkOrderMobileModal] initialCustomer:",d),console.log("[WorkOrderMobileModal] initialVehicle:",p),n?(S(d),E(p),re(!d)):(S(null),E(null),re(!0))},[n,d,p]);const[D,q]=T.useState(""),[W,R]=T.useState((n==null?void 0:n.issueDescription)||""),[U,z]=T.useState(((Ie=n==null?void 0:n.partsUsed)==null?void 0:Ie.map(ne=>({partId:ne.partId||"",partName:ne.partName,quantity:ne.quantity,sellingPrice:ne.price||0})))||[]),[Z,H]=T.useState(((oe=n==null?void 0:n.additionalServices)==null?void 0:oe.map(ne=>({id:ne.id||`srv-${Date.now()}-${Math.random()}`,name:ne.description||"",costPrice:ne.costPrice||0,sellingPrice:ne.price||0})))||[]),[K,J]=T.useState((n==null?void 0:n.laborCost)||0),[ae,se]=T.useState((n==null?void 0:n.discount)||0),[ue,fe]=T.useState("amount"),[ke,_e]=T.useState(!1),[Le,xe]=T.useState(0),[B,ee]=T.useState("cash"),[Y,re]=T.useState(!d),[Q,Ce]=T.useState(""),[me,ie]=T.useState(!1),[je,be]=T.useState(""),[le,Ee]=T.useState(!1),[Me,ye]=T.useState(""),[at,lt]=T.useState(0),[ut,nt]=T.useState(0),[ot,We]=T.useState(1),[Kt,Dt]=T.useState(!1),[fr,xr]=T.useState(""),[nr,Mr]=T.useState(""),[rr,Gt]=T.useState(!1),[Vt,cr]=T.useState(""),[br,ar]=T.useState(""),[xt,yr]=T.useState(""),[Ge,vt]=T.useState(""),$t=ne=>{if(ne===0||ne==="0")return"0";if(!ne)return"";const ze=ne.toString().replace(/\D/g,"");return ze?ze.replace(/\B(?=(\d{3})+(?!\d))/g,"."):""},Yt=ne=>{const ze=ne.replace(/\./g,"");return ze?Number(ze):0},Er=T.useMemo(()=>{if(console.log("[WorkOrderMobileModal] Total customers:",a==null?void 0:a.length,a),!Q)return a;const ne=Q.toLowerCase(),ze=a.filter(st=>{var Ze;return st.name.toLowerCase().includes(ne)||((Ze=st.phone)==null?void 0:Ze.toLowerCase().includes(ne))});return console.log("[WorkOrderMobileModal] Filtered customers:",ze.length,"Search term:",Q),ze},[a,Q]),wr=T.useMemo(()=>{if(!je)return i;const ne=je.toLowerCase();return i.filter(ze=>{var st;return ze.name.toLowerCase().includes(ne)||((st=ze.sku)==null?void 0:st.toLowerCase().includes(ne))})},[i,je]),Ke=T.useMemo(()=>{if(!k)return[];const ne=k.vehicles||[];return O&&!ne.find(ze=>ze.id===O.id)?[...ne,O]:ne},[k,O]);ua.useEffect(()=>{Ke.length===1&&!O&&E(Ke[0])},[Ke,O]);const Et=T.useMemo(()=>U.reduce((ne,ze)=>ne+ze.quantity*ze.sellingPrice,0),[U]),ur=T.useMemo(()=>Z.reduce((ne,ze)=>ne+ze.sellingPrice,0),[Z]),Br=Et+ur+K,Tr=T.useMemo(()=>ue==="percent"?Br*ae/100:ae,[Br,ae,ue]),Zt=Math.max(0,Br-Tr),Pr=ne=>{S(ne),re(!1),Ce(""),E(null)},sr=ne=>{E(ne)},Or=ne=>{var st;const ze=U.find(Ze=>Ze.partId===ne.id);z(ze?U.map(Ze=>Ze.partId===ne.id?{...Ze,quantity:Ze.quantity+1}:Ze):[...U,{partId:ne.id,partName:ne.name,quantity:1,sellingPrice:((st=ne.retailPrice)==null?void 0:st[o])||0}]),ie(!1),be("")},qr=(ne,ze)=>{z(st=>st.map(Ze=>Ze.partId===ne?{...Ze,quantity:Ze.quantity+ze}:Ze).filter(Ze=>Ze.quantity>0))},Lr=()=>{!Me||ut<=0||(H([...Z,{id:`srv-${Date.now()}`,name:Me,costPrice:at,sellingPrice:ut}]),ye(""),lt(0),nt(0),Ee(!1))},An=ne=>{H(Z.filter(ze=>ze.id!==ne))},Ir=()=>{if(!fr||!nr)return;const ne={id:`veh-${Date.now()}`,licensePlate:fr,model:nr};k&&(k.vehicles=[...k.vehicles||[],ne],E(ne)),xr(""),Mr(""),Dt(!1)},Nn=()=>{if(!Vt||!br)return;const ne=`CUST-${Date.now()}`,ze=`VEH-${Date.now()}`,st=[];(xt||Ge)&&st.push({id:ze,model:xt||"",licensePlate:Ge||"",isPrimary:!0});const Ze={id:ne,name:Vt,phone:br,vehicles:st,vehicleModel:xt,licensePlate:Ge,status:"active",segment:"New",loyaltyPoints:0,totalSpent:0,visitCount:1,lastVisit:new Date().toISOString(),created_at:new Date().toISOString()};c&&c(Ze),S(Ze),st.length>0&&E(st[0]),re(!1),Gt(!1),cr(""),ar(""),yr(""),vt(""),Ce("")},we=()=>{if(!k||!O){alert("Vui lng chn khch hng v xe");return}const ne={status:y,technicianId:N,customer:k,vehicle:O,currentKm:parseInt(D)||0,issueDescription:W,parts:U,additionalServices:Z,laborCost:K,discount:Tr,total:Zt,depositAmount:ke?Le:0,paymentMethod:B};r(ne)},Ne=ne=>{switch(ne){case"Tip nhn":return"bg-blue-500";case"ang sa":return"bg-yellow-500";case"Ch vt t":return"bg-red-500";case"Tr my":return"bg-green-500";default:return"bg-gray-500"}};return T.useEffect(()=>(e?document.body.classList.add("hide-bottom-nav"):document.body.classList.remove("hide-bottom-nav"),()=>{document.body.classList.remove("hide-bottom-nav")}),[e]),e?s.jsxs("div",{className:"fixed inset-0 bg-black/50 z-[100] flex items-end md:items-center justify-center",children:[s.jsxs("div",{className:"md:hidden w-full h-full bg-[#151521] flex flex-col",children:[s.jsxs("div",{className:"flex-shrink-0 bg-[#1e1e2d] px-3 py-2.5 flex items-center justify-between border-b border-slate-700",children:[s.jsx("button",{onClick:t,className:"text-slate-400",children:s.jsx(Ou,{className:"w-4 h-4"})}),s.jsx("h2",{className:"text-sm font-semibold text-white",children:n?`Phiu #${Li(n.id)}`:"To phiu sa cha"}),s.jsx("div",{className:"w-8"})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto pb-32",children:[s.jsx("div",{className:"p-3 space-y-2",children:s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsxs("div",{className:"relative",children:[s.jsxs("select",{value:y,onChange:ne=>g(ne.target.value),className:`w-full px-2.5 py-2 rounded-lg text-white text-xs font-medium appearance-none pr-7 ${Ne(y)}`,children:[s.jsx("option",{value:"Tip nhn",children:" Tip nhn"}),s.jsx("option",{value:"ang sa",children:" ang sa"}),s.jsx("option",{value:"Ch vt t",children:" Ch vt t"}),s.jsx("option",{value:"Tr my",children:" Tr my"})]}),s.jsx(__,{className:"absolute right-2 top-1/2 -translate-y-1/2 w-3.5 h-3.5 text-white pointer-events-none"})]}),s.jsxs("div",{className:"relative",children:[s.jsxs("select",{value:N,onChange:ne=>w(ne.target.value),className:"w-full px-2.5 py-2 bg-[#2b2b40] rounded-lg text-white text-xs appearance-none pr-7",children:[s.jsx("option",{value:"",children:" Chn KTV"}),l.map(ne=>s.jsx("option",{value:ne.id,children:ne.name},ne.id))]}),s.jsx(__,{className:"absolute right-2 top-1/2 -translate-y-1/2 w-3.5 h-3.5 text-slate-400 pointer-events-none"})]})]})}),s.jsxs("div",{className:"px-3 pb-3 space-y-2",children:[s.jsx("h3",{className:"text-xs font-semibold text-white uppercase tracking-wide",children:"Khch hng"}),Y?s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Pu,{className:"absolute left-2.5 top-1/2 -translate-y-1/2 w-3.5 h-3.5 text-slate-400"}),s.jsx("input",{type:"text",value:Q,onChange:ne=>Ce(ne.target.value),placeholder:" Tm tn hoc ST khch...",className:"w-full pl-9 pr-3 py-2 bg-[#2b2b40] rounded-lg text-white text-xs placeholder-slate-500",autoFocus:!0})]}),s.jsxs("div",{className:"max-h-48 overflow-y-auto space-y-2",children:[Er.slice(0,5).map(ne=>s.jsxs("div",{onClick:()=>Pr(ne),className:"p-3 bg-[#1e1e2d] rounded-lg cursor-pointer hover:bg-[#2b2b40] transition-colors",children:[s.jsx("div",{className:"text-white font-medium",children:ne.name}),s.jsx("div",{className:"text-xs text-slate-400",children:ne.phone})]},ne.id)),Q&&Er.length===0&&s.jsx("div",{className:"text-center py-3 text-slate-400 text-xs",children:"Khng tm thy khch hng"}),s.jsxs("button",{type:"button",onClick:()=>{Gt(!0),/^[0-9]+$/.test(Q)?(ar(Q),cr("")):(cr(Q),ar(""))},className:"w-full p-3 bg-green-500/20 border-2 border-dashed border-green-500/50 rounded-lg text-green-400 font-medium flex items-center justify-center gap-2 hover:bg-green-500/30 transition-colors",children:[s.jsx(_c,{className:"w-4 h-4"}),"Thm khch hng mi"]})]})]}):k?s.jsxs("div",{className:"p-2.5 bg-[#1e1e2d] rounded-lg flex items-start justify-between",children:[s.jsxs("div",{className:"flex items-start gap-2.5",children:[s.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-500/20 flex items-center justify-center text-blue-400 font-semibold text-xs",children:k.name.charAt(0)}),s.jsxs("div",{children:[s.jsx("div",{className:"text-white font-medium text-xs",children:k.name}),s.jsxs("div",{className:"text-xs text-slate-400",children:[" ",k.phone]})]})]}),s.jsx("button",{onClick:()=>{S(null),E(null),re(!0)},className:"p-1 text-slate-400 hover:text-white",children:s.jsx(Ou,{className:"w-4 h-4"})})]}):null,k&&s.jsxs(s.Fragment,{children:[s.jsx("h3",{className:"text-xs font-semibold text-white mt-3 uppercase tracking-wide",children:"XE CA KHCH (Chn 1):"}),s.jsxs("div",{className:"space-y-2",children:[Ke.map(ne=>{const ze=(O==null?void 0:O.id)===ne.id;return s.jsx("div",{onClick:()=>sr(ne),className:`p-3 rounded-lg cursor-pointer transition-all ${ze?"bg-blue-500/20 border-2 border-blue-500":"bg-[#1e1e2d] border-2 border-transparent"}`,children:s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{className:"flex items-center gap-2.5",children:[s.jsx("div",{className:"text-2xl",children:ze?s.jsx(by,{className:"w-4 h-4 text-blue-400"}):""}),s.jsxs("div",{children:[s.jsxs("div",{className:`font-semibold ${ze?"text-blue-400":"text-white"}`,children:[ne.model,ze&&" (ANG CHN)"]}),s.jsxs("div",{className:"text-xs text-slate-400",children:["BKS: ",ne.licensePlate]})]})]})})},ne.id)}),s.jsxs("button",{onClick:()=>Dt(!0),className:"w-full py-1.5 border border-dashed border-slate-600 rounded-lg text-slate-400 hover:border-blue-500 hover:text-blue-400 transition-colors flex items-center justify-center gap-1.5 text-xs",children:[s.jsx(_c,{className:"w-3.5 h-3.5"}),"Thm xe mi"]})]})]}),O&&s.jsxs("div",{className:"space-y-2 mt-2.5",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:"S KM hin ti"}),s.jsx("input",{type:"number",value:D,onChange:ne=>q(ne.target.value),placeholder:"Nhp s KM",className:"w-full px-2.5 py-1.5 bg-[#2b2b40] rounded-lg text-white text-xs"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:"M t s c"}),s.jsx("textarea",{value:W,onChange:ne=>R(ne.target.value),placeholder:"Thay nht, ku c...",rows:3,className:"w-full px-2.5 py-1.5 bg-[#2b2b40] rounded-lg text-white text-xs resize-none"})]})]})]}),k&&O&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"px-3 pb-3 space-y-2.5",children:[s.jsx("h3",{className:"text-xs font-semibold text-white uppercase tracking-wide",children:"PH TNG S DNG"}),U.length>0&&s.jsx("div",{className:"space-y-2",children:U.map((ne,ze)=>s.jsxs("div",{className:"p-3 bg-[#1e1e2d] rounded-lg",children:[s.jsxs("div",{className:"flex items-start justify-between mb-2",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"text-white text-xs font-medium",children:[ze+1,". ",ne.partName]}),s.jsxs("div",{className:"text-xs text-slate-400",children:[Oe(ne.sellingPrice)," / ci"]})]}),s.jsx("div",{className:"text-[#50cd89] font-bold",children:Oe(ne.quantity*ne.sellingPrice)})]}),s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>qr(ne.partId,-1),className:"w-8 h-8 bg-[#2b2b40] rounded-lg flex items-center justify-center text-white hover:bg-red-500/20 hover:text-red-400",children:s.jsx(wee,{className:"w-4 h-4"})}),s.jsx("span",{className:"w-8 text-center text-white font-semibold",children:ne.quantity}),s.jsx("button",{onClick:()=>qr(ne.partId,1),className:"w-8 h-8 bg-[#2b2b40] rounded-lg flex items-center justify-center text-white hover:bg-blue-500/20 hover:text-blue-400",children:s.jsx(_c,{className:"w-4 h-4"})})]})})]},ne.partId))}),s.jsxs("button",{onClick:()=>ie(!0),className:"w-full py-2 bg-blue-600 hover:bg-blue-700 rounded-lg text-white font-medium flex items-center justify-center gap-1.5 transition-colors text-xs",children:[s.jsx(_c,{className:"w-4 h-4"}),"+ THM PH TNG"]})]}),s.jsxs("div",{className:"px-3 pb-3 space-y-2.5",children:[s.jsx("h3",{className:"text-xs font-semibold text-white uppercase tracking-wide",children:"BO GI (GIA CNG, T NGOI)"}),Z.length>0&&s.jsx("div",{className:"space-y-2",children:Z.map((ne,ze)=>s.jsxs("div",{className:"p-3 bg-[#1e1e2d] rounded-lg border border-slate-700/50",children:[s.jsxs("div",{className:"flex items-start gap-2 mb-2",children:[s.jsx("span",{className:"text-lg",children:""}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"text-white text-sm font-medium",children:ne.name}),s.jsxs("div",{className:"text-xs text-slate-400 mt-0.5",children:["1 x ",Oe(ne.sellingPrice)]})]})]}),s.jsxs("div",{className:"border-t border-slate-700 pt-2 mt-2 flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-slate-500",children:"Thnh tin:"}),s.jsxs("div",{className:"text-[#50cd89] font-bold text-sm",children:[" ",Oe(ne.sellingPrice)]}),ne.costPrice>0&&s.jsxs("div",{className:"text-[10px] text-slate-600 mt-0.5",children:["(Vn: ",Oe(ne.costPrice),")"]})]}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx("button",{onClick:()=>{Ee(!0)},className:"p-1.5 text-blue-400 hover:bg-blue-500/20 rounded-lg",children:""}),s.jsx("button",{onClick:()=>An(ne.id),className:"p-1.5 text-red-400 hover:bg-red-500/20 rounded-lg",children:""})]})]})]},ne.id))}),s.jsxs("button",{onClick:()=>Ee(!0),className:"w-full py-3 border border-dashed border-[#009ef7] rounded-lg text-[#009ef7] font-medium flex items-center justify-center gap-2 transition-all hover:bg-[#009ef7]/10 text-xs",children:[s.jsx(_c,{className:"w-4 h-4"}),"THM CNG VIC KHC (GIA CNG)"]})]}),s.jsxs("div",{className:"px-3 pb-3 space-y-2.5",children:[s.jsx("h3",{className:"text-xs font-semibold text-white uppercase tracking-wide",children:"THANH TON"}),s.jsxs("div",{className:"p-4 bg-[#1e1e2d] rounded-lg space-y-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:"Tin cng"}),s.jsx("input",{type:"text",value:$t(K),onChange:ne=>J(Yt(ne.target.value)),placeholder:"0",className:"w-full px-2.5 py-1.5 bg-[#2b2b40] rounded-lg text-white text-xs"})]}),s.jsxs("div",{className:"pt-2",children:[s.jsxs("div",{className:"flex items-center justify-between p-3 bg-[#2b2b40] rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-8 h-8 rounded-lg bg-blue-500/20 flex items-center justify-center",children:s.jsx("span",{className:"text-lg",children:""})}),s.jsx("span",{className:"text-white font-medium text-sm",children:"t cc trc"})]}),s.jsx("button",{onClick:()=>_e(!ke),className:`relative w-12 h-6 rounded-full transition-colors ${ke?"bg-[#009ef7]":"bg-slate-600"}`,children:s.jsx("div",{className:`absolute top-0.5 w-5 h-5 bg-white rounded-full shadow-md transition-transform ${ke?"right-0.5":"left-0.5"}`,children:ke&&s.jsx("span",{className:"absolute inset-0 flex items-center justify-center text-[#009ef7] text-[10px] font-bold",children:"ON"})})})]}),ke&&s.jsxs("div",{className:"mt-3 p-3 bg-[#151521] border-2 border-[#009ef7] rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("span",{className:"text-lg",children:""}),s.jsx("span",{className:"text-slate-400 text-xs",children:"Nhp s tin cc..."})]}),s.jsx("input",{type:"text",value:$t(Le),onChange:ne=>xe(Yt(ne.target.value)),placeholder:"0",className:"w-full px-3 py-2.5 bg-[#2b2b40] border border-slate-600 rounded-lg text-white text-sm focus:border-[#009ef7] focus:outline-none transition-colors"})]})]}),s.jsxs("div",{className:"pt-2",children:[s.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-2",children:"Phng thc thanh ton"}),s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsxs("button",{onClick:()=>ee("cash"),className:`relative p-3 rounded-lg transition-all border-2 ${B==="cash"?"bg-emerald-500/10 border-emerald-500 shadow-lg shadow-emerald-500/20":"bg-[#2b2b40] border-transparent hover:border-slate-600"}`,children:[s.jsxs("div",{className:"flex flex-col items-center gap-1",children:[s.jsx("div",{className:`text-xl ${B==="cash"?"scale-110":""} transition-transform`,children:""}),s.jsx("span",{className:`text-xs font-medium ${B==="cash"?"text-emerald-400":"text-slate-400"}`,children:"Tin mt"})]}),B==="cash"&&s.jsx("div",{className:"absolute top-1 right-1 w-4 h-4 bg-emerald-500 rounded-full flex items-center justify-center",children:s.jsx("svg",{className:"w-2.5 h-2.5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})})]}),s.jsxs("button",{onClick:()=>ee("bank"),className:`relative p-3 rounded-lg transition-all border-2 ${B==="bank"?"bg-blue-500/10 border-blue-500 shadow-lg shadow-blue-500/20":"bg-[#2b2b40] border-transparent hover:border-slate-600"}`,children:[s.jsxs("div",{className:"flex flex-col items-center gap-1",children:[s.jsx("div",{className:`text-xl ${B==="bank"?"scale-110":""} transition-transform`,children:""}),s.jsx("span",{className:`text-xs font-medium ${B==="bank"?"text-blue-400":"text-slate-400"}`,children:"Chuyn khon"})]}),B==="bank"&&s.jsx("div",{className:"absolute top-1 right-1 w-4 h-4 bg-blue-500 rounded-full flex items-center justify-center",children:s.jsx("svg",{className:"w-2.5 h-2.5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})})]})]}),s.jsxs("div",{className:"mt-3 p-3 bg-blue-500/10 border border-blue-500/30 rounded-lg flex items-start gap-2",children:[s.jsx("div",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-blue-500/20 flex items-center justify-center mt-0.5",children:s.jsx("span",{className:"text-blue-400 text-xs",children:""})}),s.jsxs("p",{className:"text-blue-300 text-xs leading-relaxed",children:[s.jsx("span",{className:"font-semibold",children:"Lu :"}),' Ch thanh ton khi tr xe, ch kh dng khi trng thi "Tr my"']})]})]}),s.jsxs("div",{className:"pt-2 border-t border-slate-700 space-y-1",children:[s.jsxs("div",{className:"flex justify-between text-xs",children:[s.jsx("span",{className:"text-slate-400",children:"Tin cng:"}),s.jsx("span",{className:"text-white",children:Oe(K)})]}),s.jsxs("div",{className:"flex justify-between text-xs",children:[s.jsx("span",{className:"text-slate-400",children:"Tin ph tng:"}),s.jsx("span",{className:"text-white",children:Oe(Et)})]}),s.jsxs("div",{className:"flex justify-between text-xs",children:[s.jsx("span",{className:"text-slate-400",children:"Tin gia cng:"}),s.jsx("span",{className:"text-white",children:Oe(ur)})]}),s.jsxs("div",{className:"flex gap-2 items-center",children:[s.jsx("label",{className:"text-slate-400 text-xs flex-shrink-0",children:"Gim gi:"}),s.jsx("input",{type:"text",value:$t(ae),onChange:ne=>se(Yt(ne.target.value)),placeholder:"0",className:"flex-1 px-2 py-1 bg-[#2b2b40] rounded text-white text-xs"}),s.jsxs("select",{value:ue,onChange:ne=>fe(ne.target.value),className:"px-2 py-1 bg-[#2b2b40] rounded text-white text-xs",children:[s.jsx("option",{value:"amount",children:""}),s.jsx("option",{value:"percent",children:"%"})]})]}),s.jsxs("div",{className:"flex justify-between text-sm font-bold pt-2 border-t border-slate-700",children:[s.jsx("span",{className:"text-white",children:"TNG CNG:"}),s.jsx("span",{className:"text-[#50cd89]",children:Oe(Zt)})]})]})]})]})]})]}),s.jsx("div",{className:"flex-shrink-0 bg-[#1e1e2d] border-t border-slate-700 p-3",children:s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:t,className:"px-4 py-2 bg-[#2b2b40] text-slate-300 rounded-lg font-medium hover:bg-slate-700 transition-colors text-xs",children:"Hy"}),s.jsx("button",{onClick:we,className:`flex-1 py-2 rounded-lg font-medium text-white transition-colors text-xs ${y==="Tr my"?"bg-green-600 hover:bg-green-700":ke?"bg-purple-600 hover:bg-purple-700":"bg-blue-600 hover:bg-blue-700"}`,children:y==="Tr my"?" THANH TON & TR XE":ke?" LU & T CC":" LU PHIU"})]})})]}),s.jsx("div",{className:"hidden md:block"}),me&&s.jsx("div",{className:"fixed inset-0 bg-black/70 z-[110] flex items-end",children:s.jsxs("div",{className:"w-full bg-[#151521] rounded-t-2xl max-h-[80vh] flex flex-col",children:[s.jsxs("div",{className:"flex-shrink-0 p-3 border-b border-slate-700 flex items-center justify-between",children:[s.jsx("h3",{className:"text-white font-semibold text-sm",children:"Chn ph tng"}),s.jsx("button",{onClick:()=>{ie(!1),be("")},className:"p-1.5 text-slate-400",children:s.jsx(Ou,{className:"w-4 h-4"})})]}),s.jsx("div",{className:"p-3",children:s.jsxs("div",{className:"relative",children:[s.jsx(Pu,{className:"absolute left-2.5 top-1/2 -translate-y-1/2 w-3.5 h-3.5 text-slate-400"}),s.jsx("input",{type:"text",value:je,onChange:ne=>be(ne.target.value),placeholder:"Tm tn hoc SKU...",className:"w-full pl-9 pr-3 py-2 bg-[#2b2b40] rounded-lg text-white text-xs",autoFocus:!0})]})}),s.jsx("div",{className:"flex-1 overflow-y-auto px-3 pb-3",children:s.jsx("div",{className:"space-y-2",children:wr.slice(0,20).map(ne=>{var Ze,mt;const ze=((Ze=ne.stock)==null?void 0:Ze[o])||0,st=((mt=ne.retailPrice)==null?void 0:mt[o])||0;return s.jsx("div",{onClick:()=>Or(ne),className:"p-2.5 bg-[#1e1e2d] rounded-lg cursor-pointer hover:bg-[#2b2b40] transition-colors",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"text-white font-medium text-xs",children:ne.name}),s.jsxs("div",{className:"text-xs text-slate-400",children:["SKU: ",ne.sku,"  Tn: ",ze]})]}),s.jsx("div",{className:"text-[#50cd89] font-bold text-xs",children:Oe(st)})]})},ne.id)})})})]})}),le&&s.jsx("div",{className:"fixed inset-0 bg-black/70 z-[110] flex items-end md:items-center md:justify-center",children:s.jsxs("div",{className:"w-full md:max-w-md bg-[#1e1e2d] rounded-t-2xl md:rounded-xl overflow-hidden",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-slate-700",children:[s.jsx("h3",{className:"text-white font-semibold text-base",children:"THM DCH V GIA CNG"}),s.jsx("button",{onClick:()=>{Ee(!1),ye(""),lt(0),nt(0),We(1)},className:"p-1.5 text-slate-400 hover:text-white",children:s.jsx(Ou,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"p-4 space-y-4 max-h-[70vh] overflow-y-auto",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Tn cng vic / M t:"}),s.jsx("input",{type:"text",value:Me,onChange:ne=>ye(ne.target.value),placeholder:"Nhp tn (VD: Hn ym, Sn...)",className:"w-full px-4 py-3 bg-[#151521] border border-slate-700 rounded-lg text-white placeholder-slate-500 focus:border-[#009ef7] focus:outline-none transition-colors",autoFocus:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"S lng:"}),s.jsxs("div",{className:"flex items-center justify-center gap-4",children:[s.jsx("button",{onClick:()=>We(Math.max(1,ot-1)),className:"w-12 h-12 bg-[#2b2b40] hover:bg-slate-700 rounded-lg flex items-center justify-center text-white text-2xl font-bold transition-colors",children:""}),s.jsx("div",{className:"w-20 h-12 bg-[#151521] border border-slate-700 rounded-lg flex items-center justify-center",children:s.jsx("span",{className:"text-white text-xl font-bold",children:ot})}),s.jsx("button",{onClick:()=>We(ot+1),className:"w-12 h-12 bg-[#2b2b40] hover:bg-slate-700 rounded-lg flex items-center justify-center text-white text-2xl font-bold transition-colors",children:"+"})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-semibold text-slate-300 mb-3 uppercase tracking-wide",children:"CHI PH & GI BN"}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-slate-500 mb-1.5",children:"Gi nhp (Vn):"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"text",value:$t(at),onChange:ne=>lt(Yt(ne.target.value)),placeholder:"0",className:"w-full px-3 py-3 pr-8 bg-[#151521] border border-slate-700 rounded-lg text-slate-400 text-sm focus:border-slate-600 focus:outline-none transition-colors"}),s.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-500 text-xs",children:""})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-[#ffc700] mb-1.5 font-medium",children:"n gi (Bo khch):"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"text",value:$t(ut),onChange:ne=>nt(Yt(ne.target.value)),placeholder:"0",className:"w-full px-3 py-3 pr-8 bg-gradient-to-br from-[#009ef7]/10 to-purple-600/10 border-2 border-[#009ef7] rounded-lg text-white text-sm font-semibold focus:border-[#0077c7] focus:outline-none transition-colors"}),s.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-[#009ef7] text-xs font-bold",children:""})]})]})]})]}),s.jsx("div",{className:"p-4 bg-[#151521] border border-slate-700 rounded-lg",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-slate-400 text-sm",children:"Thnh tin (T tnh):"}),s.jsx("span",{className:"text-[#50cd89] text-xl font-bold",children:Oe(ut*ot)})]})})]}),s.jsx("div",{className:"p-4 border-t border-slate-700",children:s.jsx("button",{onClick:Lr,disabled:!Me.trim()||ut<=0,className:"w-full py-4 bg-gradient-to-r from-[#009ef7] to-purple-600 hover:from-[#0077c7] hover:to-purple-700 disabled:from-slate-700 disabled:to-slate-700 disabled:cursor-not-allowed text-white font-bold text-sm rounded-lg transition-all shadow-lg",children:"LU VO PHIU"})})]})}),Kt&&s.jsx("div",{className:"fixed inset-0 bg-black/70 z-[110] flex items-center justify-center p-4",children:s.jsxs("div",{className:"w-full max-w-md bg-[#1e1e2d] rounded-xl p-3",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("h3",{className:"text-white font-semibold text-sm",children:"Thm xe mi"}),s.jsx("button",{onClick:()=>Dt(!1),className:"p-1.5 text-slate-400",children:s.jsx(Ou,{className:"w-4 h-4"})})]}),s.jsxs("div",{className:"space-y-2.5",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:"Bin s xe"}),s.jsx("input",{type:"text",value:fr,onChange:ne=>xr(ne.target.value),placeholder:"59G1-123.45",className:"w-full px-2.5 py-1.5 bg-[#2b2b40] rounded-lg text-white text-xs"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:"Tn xe"}),s.jsx("input",{type:"text",value:nr,onChange:ne=>Mr(ne.target.value),placeholder:"Honda Wave RSX",className:"w-full px-2.5 py-1.5 bg-[#2b2b40] rounded-lg text-white text-xs"})]}),s.jsxs("div",{className:"flex gap-2 pt-1.5",children:[s.jsx("button",{onClick:()=>Dt(!1),className:"flex-1 py-2 bg-[#2b2b40] text-slate-300 rounded-lg font-medium text-xs",children:"Hy"}),s.jsx("button",{onClick:Ir,className:"flex-1 py-2 bg-blue-600 text-white rounded-lg font-medium text-xs",children:"Thm xe"})]})]})]})}),rr&&s.jsx("div",{className:"fixed inset-0 bg-black/70 z-[110] flex items-center justify-center p-4",children:s.jsxs("div",{className:"w-full max-w-md bg-[#1e1e2d] rounded-xl p-4 max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-white font-semibold",children:"Thm khch hng mi"}),s.jsx("button",{onClick:()=>{Gt(!1),cr(""),ar(""),yr(""),vt("")},className:"p-1.5 text-slate-400",children:s.jsx(Ou,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"bg-[#2b2b40]/50 rounded-lg p-3 space-y-3",children:[s.jsx("h4",{className:"text-xs font-semibold text-blue-400 uppercase tracking-wide",children:"Thng tin khch hng"}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:["Tn khch hng ",s.jsx("span",{className:"text-red-400",children:"*"})]}),s.jsx("input",{type:"text",value:Vt,onChange:ne=>cr(ne.target.value),placeholder:"Nguyn Vn A",className:"w-full px-3 py-2.5 bg-[#2b2b40] rounded-lg text-white text-sm",autoFocus:!0})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:["S in thoi ",s.jsx("span",{className:"text-red-400",children:"*"})]}),s.jsx("input",{type:"tel",value:br,onChange:ne=>ar(ne.target.value),placeholder:"0901234567",className:"w-full px-3 py-2.5 bg-[#2b2b40] rounded-lg text-white text-sm"})]})]}),s.jsxs("div",{className:"bg-[#2b2b40]/50 rounded-lg p-3 space-y-3",children:[s.jsx("h4",{className:"text-xs font-semibold text-green-400 uppercase tracking-wide",children:" Thng tin xe"}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:"Loi xe"}),s.jsx("input",{type:"text",value:xt,onChange:ne=>yr(ne.target.value),placeholder:"Wave, Exciter, Vision...",className:"w-full px-3 py-2.5 bg-[#2b2b40] rounded-lg text-white text-sm"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:"Bin s xe"}),s.jsx("input",{type:"text",value:Ge,onChange:ne=>vt(ne.target.value.toUpperCase()),placeholder:"59G1-12345",className:"w-full px-3 py-2.5 bg-[#2b2b40] rounded-lg text-white text-sm uppercase"})]})]}),s.jsxs("div",{className:"flex gap-2 pt-2",children:[s.jsx("button",{onClick:()=>{Gt(!1),cr(""),ar(""),yr(""),vt("")},className:"flex-1 py-2.5 bg-[#2b2b40] text-slate-300 rounded-lg font-medium text-sm",children:"Hy"}),s.jsx("button",{onClick:Nn,disabled:!Vt||!br,className:"flex-1 py-2.5 bg-green-600 text-white rounded-lg font-medium text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:" Lu khch hng"})]})]})]})})]}):null};function fje({workOrders:e,onCreateWorkOrder:t,onEditWorkOrder:r,onDeleteWorkOrder:n,onCallCustomer:a,onPrintWorkOrder:i,currentBranchId:l}){const[o,c]=T.useState(""),[d,f]=T.useState("all"),[p,y]=T.useState(!1),g=T.useMemo(()=>{const S=e.filter(U=>U.status==="Tip nhn").length,O=e.filter(U=>U.status==="ang sa").length,E=e.filter(U=>U.status===" sa xong").length,D=e.filter(U=>U.status==="Tr my").length,q=e.filter(U=>U.status===" sa xong"||U.status==="Tr my"),W=q.reduce((U,z)=>U+(z.total||0),0),R=q.reduce((U,z)=>U+(z.total||0),0);return{tiepNhan:S,dangSua:O,daHoanThanh:E,traMay:D,doanhThu:W,loiNhuan:R}},[e]),N=T.useMemo(()=>{let S=e;if(d!=="all"&&(S=S.filter(O=>O.status===d)),o.trim()){const O=o.toLowerCase();S=S.filter(E=>{var D,q,W,R;return((D=E.customerName)==null?void 0:D.toLowerCase().includes(O))||((q=E.customerPhone)==null?void 0:q.toLowerCase().includes(O))||((W=E.licensePlate)==null?void 0:W.toLowerCase().includes(O))||((R=E.id)==null?void 0:R.toLowerCase().includes(O))})}return S.sort((O,E)=>{const D=new Date(O.creationDate||0).getTime();return new Date(E.creationDate||0).getTime()-D})},[e,d,o]),w=S=>{switch(S){case"Tip nhn":return"bg-[#009ef7]/10 text-[#009ef7] border-[#009ef7]/30";case"ang sa":return"bg-[#f1416c]/10 text-[#f1416c] border-[#f1416c]/30";case" sa xong":return"bg-[#50cd89]/10 text-[#50cd89] border-[#50cd89]/30";case"Tr my":return"bg-purple-500/10 text-purple-500 border-purple-500/30";default:return"bg-gray-500/10 text-gray-500 border-gray-500/30"}},k=S=>{switch(S){case"Tip nhn":return s.jsx(dd,{className:"w-4 h-4"});case"ang sa":return s.jsx(Em,{className:"w-4 h-4"});case" hon thnh":return s.jsx(by,{className:"w-4 h-4"});case"Tr my":return s.jsx(r7,{className:"w-4 h-4"});default:return s.jsx(dd,{className:"w-4 h-4"})}};return s.jsxs("div",{className:"md:hidden flex flex-col h-screen bg-[#151521]",children:[s.jsxs("div",{className:"bg-[#1e1e2d] border-b border-gray-800 p-3",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsxs("button",{onClick:()=>f(d==="Tip nhn"?"all":"Tip nhn"),className:`p-3 rounded-xl text-left transition-all ${d==="Tip nhn"?"bg-gradient-to-br from-[#009ef7]/20 to-[#009ef7]/10 border-2 border-[#009ef7] shadow-lg shadow-[#009ef7]/20":"bg-[#2b2b40] border border-gray-700 hover:border-[#009ef7]/50"}`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("span",{className:"text-[10px] text-gray-400 font-medium",children:"Tip nhn"}),s.jsx(dd,{className:"w-4 h-4 text-[#009ef7]"})]}),s.jsx("div",{className:"text-2xl font-black text-white",children:g.tiepNhan})]}),s.jsxs("button",{onClick:()=>f(d==="ang sa"?"all":"ang sa"),className:`p-3 rounded-xl text-left transition-all ${d==="ang sa"?"bg-gradient-to-br from-[#f1416c]/20 to-[#f1416c]/10 border-2 border-[#f1416c] shadow-lg shadow-[#f1416c]/20":"bg-[#2b2b40] border border-gray-700 hover:border-[#f1416c]/50"}`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("span",{className:"text-[10px] text-gray-400 font-medium",children:"ang sa"}),s.jsx(Em,{className:"w-4 h-4 text-[#f1416c]"})]}),s.jsx("div",{className:"text-2xl font-black text-white",children:g.dangSua})]}),s.jsxs("button",{onClick:()=>f(d===" sa xong"?"all":" sa xong"),className:`p-3 rounded-xl text-left transition-all ${d===" sa xong"?"bg-gradient-to-br from-[#50cd89]/20 to-[#50cd89]/10 border-2 border-[#50cd89] shadow-lg shadow-[#50cd89]/20":"bg-[#2b2b40] border border-gray-700 hover:border-[#50cd89]/50"}`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("span",{className:"text-[10px] text-gray-400 font-medium",children:" sa xong"}),s.jsx(by,{className:"w-4 h-4 text-[#50cd89]"})]}),s.jsx("div",{className:"text-2xl font-black text-white",children:g.daHoanThanh})]}),s.jsxs("button",{onClick:()=>f(d==="Tr my"?"all":"Tr my"),className:`p-3 rounded-xl text-left transition-all ${d==="Tr my"?"bg-gradient-to-br from-purple-500/20 to-purple-500/10 border-2 border-purple-500 shadow-lg shadow-purple-500/20":"bg-[#2b2b40] border border-gray-700 hover:border-purple-500/50"}`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("span",{className:"text-[10px] text-gray-400 font-medium",children:"Tr my"}),s.jsx(r7,{className:"w-4 h-4 text-purple-500"})]}),s.jsx("div",{className:"text-2xl font-black text-white",children:g.traMay})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-2",children:[s.jsxs("div",{className:"p-3 rounded-xl bg-gradient-to-br from-emerald-900/30 to-emerald-800/20 border border-emerald-700",children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("span",{className:"text-[10px] text-emerald-400 font-medium",children:"Doanh thu hm nay"}),s.jsx(C0,{className:"w-4 h-4 text-emerald-400"})]}),s.jsx("div",{className:"text-base font-black text-emerald-300",children:Oe(g.doanhThu)})]}),s.jsxs("div",{className:"p-3 rounded-xl bg-gradient-to-br from-blue-900/30 to-blue-800/20 border border-blue-700",children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("span",{className:"text-[10px] text-blue-400 font-medium",children:"Li nhun hm nay"}),s.jsx(F1,{className:"w-4 h-4 text-blue-400"})]}),s.jsx("div",{className:"text-base font-black text-blue-300",children:Oe(g.loiNhuan)})]})]})]}),s.jsx("div",{className:"bg-[#1e1e2d] border-b border-gray-800 px-3 py-2",children:s.jsxs("div",{className:"relative",children:[s.jsx(Pu,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500"}),s.jsx("input",{type:"text",placeholder:"Tm tn, ST, bin s...",value:o,onChange:S=>c(S.target.value),className:"w-full pl-10 pr-3 py-2.5 bg-[#2b2b40] border border-gray-700 rounded-xl text-white placeholder-gray-500 text-sm focus:outline-none focus:border-[#009ef7]"})]})}),s.jsx("div",{className:"flex-1 overflow-y-auto py-2 space-y-2 pb-20 scrollbar-hide",children:N.length===0?s.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center px-6",children:[s.jsx("div",{className:"w-32 h-32 mb-6 flex items-center justify-center",children:s.jsx("svg",{className:"w-full h-full text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),s.jsx("h3",{className:"text-xl font-semibold text-gray-300 mb-2",children:"Cha c phiu sa cha no!"}),s.jsx("p",{className:"text-gray-500 mb-6",children:"Hy to phiu u tin  qun l dch v sa cha"}),s.jsx("button",{onClick:t,className:"px-6 py-3 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-xl font-medium hover:from-blue-600 hover:to-blue-700 transition-all shadow-lg shadow-blue-500/30",children:"+ To phiu mi"})]}):N.map(S=>s.jsxs("div",{onClick:()=>r(S),className:"bg-[#1e1e2d] rounded-xl border border-gray-800 overflow-hidden active:scale-[0.99] transition-transform",children:[s.jsxs("div",{className:"p-3",children:[s.jsxs("div",{className:"flex items-start justify-between mb-2",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"text-[#009ef7] font-mono text-sm font-semibold mb-0.5",children:Li(S.id)}),s.jsx("div",{className:"text-xs text-gray-500",children:Bn(S.creationDate)})]}),s.jsxs("div",{className:`inline-flex items-center gap-1.5 px-3 py-1 rounded-lg border text-xs font-semibold ${w(S.status)}`,children:[k(S.status),S.status]})]}),s.jsxs("div",{className:"space-y-2 mb-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-lg",children:""}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"text-white font-medium text-sm truncate",children:S.customerName}),s.jsx("div",{className:"text-gray-400 text-xs",children:S.customerPhone})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-lg",children:""}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"text-gray-300 text-sm truncate",children:S.vehicleModel}),s.jsx("div",{className:"text-[#009ef7] text-xs font-mono",children:S.licensePlate})]})]})]}),s.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-gray-800",children:[s.jsxs("div",{className:"text-xs text-gray-400",children:["KTV:"," ",s.jsx("span",{className:"text-gray-300",children:S.technicianName||"Cha phn"})]}),s.jsx("div",{className:"text-white font-bold text-base",children:Oe(S.total||0)})]})]}),s.jsxs("div",{className:"grid grid-cols-4 border-t border-gray-800",children:[s.jsxs("button",{onClick:O=>{O.stopPropagation(),a(S.customerPhone||"")},className:"flex items-center justify-center gap-1 py-3 bg-green-500/10 hover:bg-green-500/20 transition-colors border-r border-gray-800",children:[s.jsx(gF,{className:"w-4 h-4 text-green-500"}),s.jsx("span",{className:"text-[11px] font-semibold text-green-500",children:"Gi"})]}),s.jsxs("button",{onClick:O=>{O.stopPropagation(),i(S)},className:"flex items-center justify-center gap-1 py-3 bg-purple-500/10 hover:bg-purple-500/20 transition-colors border-r border-gray-800",children:[s.jsx(fm,{className:"w-4 h-4 text-purple-500"}),s.jsx("span",{className:"text-[11px] font-semibold text-purple-500",children:"In"})]}),s.jsxs("button",{onClick:O=>{O.stopPropagation(),r(S)},className:"flex items-center justify-center gap-1 py-3 bg-[#009ef7]/10 hover:bg-[#009ef7]/20 transition-colors border-r border-gray-800",children:[s.jsx(pF,{className:"w-4 h-4 text-[#009ef7]"}),s.jsx("span",{className:"text-[11px] font-semibold text-[#009ef7]",children:"Sa"})]}),s.jsxs("button",{onClick:O=>{O.stopPropagation(),n(S)},className:"flex items-center justify-center gap-1 py-3 bg-[#f1416c]/10 hover:bg-[#f1416c]/20 transition-colors",children:[s.jsx(Xg,{className:"w-4 h-4 text-[#f1416c]"}),s.jsx("span",{className:"text-[11px] font-semibold text-[#f1416c]",children:"Xa"})]})]})]},S.id))}),s.jsx("button",{onClick:t,className:"fixed bottom-20 right-4 w-12 h-12 bg-gradient-to-br from-[#009ef7] to-[#0077b6] rounded-full shadow-xl shadow-[#009ef7]/50 flex items-center justify-center hover:from-[#0077b6] hover:to-[#005a8a] transition-all z-[60] active:scale-95","aria-label":"To phiu mi",children:s.jsx(_c,{className:"w-5 h-5 text-white"})}),p&&s.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-end md:items-center md:justify-center",children:s.jsxs("div",{className:"bg-[#1e1e2d] rounded-t-3xl md:rounded-2xl w-full md:max-w-md p-6 space-y-4 animate-slide-up",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-white",children:"B lc nng cao"}),s.jsx("button",{onClick:()=>y(!1),className:"text-gray-500 hover:text-gray-300",children:""})]}),s.jsx("div",{className:"text-gray-400 text-sm text-center py-8",children:"Cc ty chn lc s c b sung..."})]})}),s.jsx("style",{children:`
        .scrollbar-hide::-webkit-scrollbar {
          display: none;
        }
        .scrollbar-hide {
          -ms-overflow-style: none;
          scrollbar-width: none;
        }
        @keyframes slide-up {
          from {
            transform: translateY(100%);
          }
          to {
            transform: translateY(0);
          }
        }
        .animate-slide-up {
          animation: slide-up 0.3s ease-out;
        }
      `})]})}function mje(){var Ir,Nn,we,Ne,De,Ie;const{parts:e,customers:t,employees:r,upsertCustomer:n,setCashTransactions:a,setPaymentSources:i,paymentSources:l,currentBranchId:o,workOrders:c,setWorkOrders:d}=Ba(),{data:f,isLoading:p}=mf(),{data:y,isLoading:g}=T6(),{data:N,isLoading:w}=zV(),[k,S]=T.useState([]);T.useEffect(()=>{(async()=>{const{data:ne,error:ze}=await Ot.from("customers").select("*").order("created_at",{ascending:!1});!ze&&ne&&S(ne)})()},[]);const O=f||e,E=k.length>0?k:t,D=y||r,q=N||c;T.useEffect(()=>{console.log("[ServiceManager] fetchedWorkOrders:",N==null?void 0:N.length,N),console.log("[ServiceManager] workOrders from context:",c==null?void 0:c.length,c),N&&d(N)},[N,d]);const[W,R]=T.useState(!1),[U,z]=T.useState(!1),[Z,H]=T.useState(!1),[K,J]=T.useState(void 0),[ae,se]=T.useState(""),[ue,fe]=T.useState("all"),[ke,_e]=T.useState("all"),[Le,xe]=T.useState(null),[B,ee]=T.useState(null),[Y,re]=T.useState(!1),[Q,Ce]=T.useState(null),[me,ie]=T.useState(null),[je,be]=T.useState(!1),[le,Ee]=T.useState(""),[Me,ye]=T.useState(null),[at,lt]=T.useState(!1),[ut,nt]=T.useState({id:"",name:"",description:"",duration:30,laborCost:0,parts:[]}),[ot,We]=T.useState(null),[Kt,Dt]=T.useState("");T.useEffect(()=>{if(!Le)return;const oe=ne=>{ne.target.closest(".service-row-menu")||xe(null)};return document.addEventListener("mousedown",oe),()=>document.removeEventListener("mousedown",oe)},[Le]);const fr=[{id:"oil-change",name:"Thay du ng c",description:"Thay du v lc du ng c",duration:30,laborCost:3e5,parts:[{name:"Du ng c 10W40",quantity:1,price:12e4,unit:"chai"},{name:"Lc du",quantity:1,price:3e4,unit:"ci"}]},{id:"brake-service",name:"Sa phanh",description:"Thay m phanh v bo dng h thng phanh",duration:45,laborCost:505e3,parts:[{name:"M phanh trc",quantity:2,price:16e4,unit:"ci"},{name:"M phanh sau",quantity:2,price:12e4,unit:"ci"},{name:"Du phanh",quantity:1,price:25e3,unit:"chai"}]},{id:"cleaning",name:"V sinh kim phun",description:"V sinh v hiu chnh kim phun xng",duration:60,laborCost:15e4,parts:[{name:"Dung dch v sinh kim phun",quantity:1,price:5e4,unit:"chai"}]},{id:"oil-box",name:"Thay nht hp s",description:"Thay du hp s v kim tra",duration:25,laborCost:14e4,parts:[{name:"Du hp s",quantity:1,price:6e4,unit:"chai"}]},{id:"bug-check",name:"Thay bugi",description:"Thay bugi v kim tra h thng nh la",duration:20,laborCost:85e3,parts:[{name:"Bugi",quantity:1,price:35e3,unit:"ci"}]},{id:"full-maintenance",name:"Bo dng tng qut",description:"Bo dng nh k y ",duration:90,laborCost:57e4,parts:[{name:"Du ng c 10W40",quantity:1,price:12e4,unit:"chai"},{name:"Lc du",quantity:1,price:3e4,unit:"ci"},{name:"Lc khng kh",quantity:1,price:25e3,unit:"ci"},{name:"Bugi",quantity:1,price:35e3,unit:"ci"},{name:"Du hp s",quantity:1,price:6e4,unit:"chai"}]}],xr=T.useMemo(()=>{let oe=q.filter(ne=>!ne.refunded);return console.log("[ServiceManager] Total displayWorkOrders:",q.length),console.log("[ServiceManager] Work orders status:",q.map(ne=>({id:ne.id,status:ne.status}))),ke==="delivered"?oe=oe.filter(ne=>ne.status==="Tr my"):(oe=oe.filter(ne=>ne.status!=="Tr my"),ke==="pending"?oe=oe.filter(ne=>ne.status==="Tip nhn"):ke==="inProgress"?oe=oe.filter(ne=>ne.status==="ang sa"):ke==="done"&&(oe=oe.filter(ne=>ne.status===" sa xong"))),console.log("[ServiceManager] After tab filter:",ke,oe.length),ae&&(oe=oe.filter(ne=>{var ze,st;return ne.customerName.toLowerCase().includes(ae.toLowerCase())||((ze=ne.vehicleModel)==null?void 0:ze.toLowerCase().includes(ae.toLowerCase()))||((st=ne.licensePlate)==null?void 0:st.toLowerCase().includes(ae.toLowerCase()))})),oe.sort((ne,ze)=>{const st=ne.creationDate||ne.creationdate,Ze=ze.creationDate||ze.creationdate;return!st||!Ze?0:new Date(Ze).getTime()-new Date(st).getTime()})},[q,ke,ae]),nr=T.useMemo(()=>{const oe=q.filter(ct=>ct.status==="Tip nhn").length,ne=q.filter(ct=>ct.status==="ang sa").length,ze=q.filter(ct=>ct.status===" sa xong").length,st=q.filter(ct=>ct.status==="Tr my").length,Ze=q.filter(ct=>ct.paymentStatus==="paid"&&new Date(ct.creationDate).toDateString()===new Date().toDateString()).reduce((ct,Rt)=>ct+Rt.total,0),mt=q.filter(ct=>ct.paymentStatus==="paid"&&new Date(ct.creationDate).toDateString()===new Date().toDateString()).reduce((ct,Rt)=>{var Xt;return ct+(Rt.total-(((Xt=Rt.partsUsed)==null?void 0:Xt.reduce((Jt,ir)=>Jt+ir.price*ir.quantity,0))||0))},0);return{pending:oe,inProgress:ne,done:ze,delivered:st,todayRevenue:Ze,todayProfit:mt}},[q]),Mr=nr.pending+nr.inProgress+nr.done,rr=nr.pending+nr.inProgress,Gt=Mr?Math.round(rr/Mr*100):0,Vt=Mr?Math.round(nr.done/Mr*100):0,cr=nr.todayRevenue?Math.round(nr.todayProfit/nr.todayRevenue*100):0,br={slate:"bg-slate-100 text-slate-600 dark:bg-slate-900/30 dark:text-slate-200",blue:"bg-blue-100 text-blue-600 dark:bg-blue-900/30 dark:text-blue-300",orange:"bg-orange-100 text-orange-600 dark:bg-orange-900/30 dark:text-orange-300",green:"bg-emerald-100 text-emerald-600 dark:bg-emerald-900/30 dark:text-emerald-300",purple:"bg-purple-100 text-purple-600 dark:bg-purple-900/30 dark:text-purple-300"},ar="px-4 py-2 bg-slate-50 dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-sm text-slate-700 dark:text-slate-200",xt=T.useMemo(()=>[{key:"all",label:"Tt c",color:"slate",count:q.filter(oe=>oe.status!=="Tr my"&&!oe.refunded).length},{key:"pending",label:"Tip nhn",color:"blue",count:nr.pending},{key:"inProgress",label:"ang sa",color:"orange",count:nr.inProgress},{key:"done",label:" sa xong",color:"green",count:nr.done},{key:"delivered",label:" tr my",color:"purple",count:nr.delivered}],[q,nr.delivered,nr.done,nr.inProgress,nr.pending]),yr=[{key:"pending",label:"Tip nhn",value:nr.pending,subtitle:"Ch phn cng",accent:"from-sky-50 via-sky-50 to-white dark:from-sky-900/30 dark:via-sky-900/10",dot:"bg-sky-500"},{key:"inProgress",label:"ang sa",value:nr.inProgress,subtitle:"ang thi cng",accent:"from-amber-50 via-amber-50 to-white dark:from-amber-900/30 dark:via-amber-900/10",dot:"bg-amber-500"},{key:"done",label:" sa xong",value:nr.done,subtitle:"Ch giao khch",accent:"from-emerald-50 via-emerald-50 to-white dark:from-emerald-900/30 dark:via-emerald-900/10",dot:"bg-emerald-500"},{key:"delivered",label:"Tr my",value:nr.delivered,subtitle:"Hon tt",accent:"from-purple-50 via-purple-50 to-white dark:from-purple-900/30 dark:via-purple-900/10",dot:"bg-purple-500"}],Ge=oe=>{J(oe||{id:"",customerName:"",customerPhone:"",vehicleModel:"",licensePlate:"",issueDescription:"",technicianName:"",status:"Tip nhn",laborCost:0,discount:0,partsUsed:[],total:0,branchId:o,paymentStatus:"unpaid",creationDate:new Date().toISOString()}),R(!0)},vt=oe=>{const ne={id:"",customerName:"",customerPhone:"",vehicleModel:"",licensePlate:"",issueDescription:oe.description,laborCost:oe.laborCost,partsUsed:oe.parts.map((ze,st)=>({partId:`TEMPLATE-${st}`,partName:ze.name,sku:"",quantity:ze.quantity,price:ze.price})),status:"Tip nhn",paymentStatus:"unpaid",discount:0,total:0,creationDate:new Date().toISOString(),branchId:o,technicianName:""};J(ne),H(!1),R(!0)},$t=()=>{ye(null),nt({id:"",name:"",description:"",duration:30,laborCost:0,parts:[]}),lt(!0)},Yt=oe=>{ye(oe),nt({id:oe.id,name:oe.name,description:oe.description,duration:oe.duration,laborCost:oe.laborCost,parts:[...oe.parts]}),lt(!0)},Er=()=>{if(!ut.name.trim()){Xe.error("Vui lng nhp tn mu");return}if(ut.laborCost<=0){Xe.error("Vui lng nhp chi ph cng");return}Me?Xe.success(` cp nht mu "${ut.name}"`):Xe.success(` to mu "${ut.name}"`),lt(!1),ye(null)},wr=()=>{nt({...ut,parts:[...ut.parts,{name:"",quantity:1,price:0,unit:"ci"}]})},Ke=oe=>{nt({...ut,parts:ut.parts.filter((ne,ze)=>ze!==oe)})},Et=(oe,ne,ze)=>{const st=[...ut.parts];st[oe]={...st[oe],[ne]:ze},nt({...ut,parts:st}),ne==="name"&&(We(oe),Dt(ze))},ur=(oe,ne)=>{var st;const ze=[...ut.parts];ze[oe]={...ze[oe],name:ne.name,price:((st=ne.retailPrice)==null?void 0:st[o||""])||0,unit:"ci"},nt({...ut,parts:ze}),We(null),Dt("")},Br=T.useMemo(()=>{if(ot===null)return[];const oe=f||[];console.log("[DEBUG] fetchedParts available:",oe.length);const ne=Kt.toLowerCase();if(!ne){const st=oe.slice(0,5);return console.log("[DEBUG] No search term, showing first 5 parts:",st.map(Ze=>{var mt,ct;return{name:Ze.name,stock:(mt=Ze.stock)==null?void 0:mt[o||""],price:(ct=Ze.retailPrice)==null?void 0:ct[o||""]}})),st}const ze=oe.filter(st=>st.name.toLowerCase().includes(ne));return console.log("[DEBUG] Search term:",ne,"Found:",ze.length,"Sample:",ze.slice(0,2).map(st=>{var Ze,mt;return{name:st.name,stock:(Ze=st.stock)==null?void 0:Ze[o||""],price:(mt=st.retailPrice)==null?void 0:mt[o||""]}})),ze.slice(0,5)},[f,Kt,ot]),Tr=async oe=>{ee(oe);try{const{data:ne,error:ze}=await Ot.from("store_settings").select("*").limit(1).single();!ze&&ne&&Ce(ne)}catch(ne){console.error("Error loading store settings:",ne)}re(!0)},Zt=()=>{setTimeout(()=>{ow("work-order-receipt")},100)},{mutateAsync:Pr}=hje();Tk(),kH();const sr=oe=>{ie(oe),Ee(""),be(!0)},Or=async()=>{if(me){if(!le.trim()){Xe.error("Vui lng nhp l do hy");return}try{console.log("[handleConfirmRefund] Starting refund for order:",me.id),console.log("[handleConfirmRefund] Refund reason:",le);const oe=await Pr({orderId:me.id,refundReason:le});if(console.log("[handleConfirmRefund] Refund result:",oe),!oe||oe.error){console.error("[handleConfirmRefund] Refund failed:",oe),Xe.error("Khng th hy n sa cha");return}if(oe&&"refund_transaction_id"in oe&&"refundAmount"in oe&&oe.refund_transaction_id&&oe.refundAmount){const ne=oe.refundAmount;a(ze=>[...ze,{id:oe.refund_transaction_id,type:"refund",category:"refund",amount:-ne,date:new Date().toISOString(),description:`Hon tin hy phiu #${(Li(me.id,Q==null?void 0:Q.work_order_prefix)||"").split("-").pop()} - ${le}`,branchId:o,paymentSource:me.paymentMethod,reference:me.id}]),me.paymentMethod&&i(ze=>ze.map(st=>st.id===me.paymentMethod?{...st,balance:{...st.balance,[o]:(st.balance[o]||0)-ne}}:st))}d(ne=>ne.map(ze=>ze.id===me.id?{...ze,refunded:!0,status:" hy"}:ze)),Xe.success(" hy n sa cha thnh cng"),be(!1),ie(null),Ee("")}catch(oe){console.error("Error refunding work order:",oe),Xe.error("Li khi hy n sa cha")}}},qr=oe=>{oe&&(window.location.href=`tel:${oe}`)},Lr=async oe=>{if(confirm(`Xc nhn xa phiu ${Li(oe.id)}?`))try{const{error:ne}=await Ot.from("work_orders").delete().eq("id",oe.id);if(ne)throw ne;d(ze=>ze.filter(st=>st.id!==oe.id)),Xe.success(" xa phiu sa cha")}catch(ne){console.error("Error deleting work order:",ne),Xe.error("Li khi xa phiu sa cha")}};return window.innerWidth<768?s.jsxs(s.Fragment,{children:[s.jsx(fje,{workOrders:q||[],onCreateWorkOrder:()=>{J(void 0),z(!0)},onEditWorkOrder:oe=>{J(oe),z(!0)},onDeleteWorkOrder:Lr,onCallCustomer:qr,onPrintWorkOrder:Tr,currentBranchId:o}),U&&s.jsx(WD,{isOpen:U,onClose:()=>{z(!1),J(void 0)},onSave:oe=>{console.log("Mobile Work Order Data:",oe),z(!1),J(void 0)},workOrder:K,customers:E,parts:f||[],employees:D,currentBranchId:o,upsertCustomer:n}),Y&&B&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[200] p-2",children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl w-full max-w-full max-h-[95vh] flex flex-col",children:[s.jsxs("div",{className:"bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 px-4 py-3 flex items-center justify-between rounded-t-xl flex-shrink-0",children:[s.jsx("h2",{className:"text-base font-bold text-slate-900 dark:text-slate-100",children:"Xem trc phiu"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("button",{onClick:async()=>{try{Xe.info("ang to hnh nh...");const oe=(await hm(async()=>{const{default:mt}=await import("./html2canvas.esm-QH1iLAAe.js");return{default:mt}},[])).default,ne=document.getElementById("mobile-print-preview-content");if(!ne){Xe.error("Khng tm thy ni dung phiu!");return}const ze=await oe(ne,{scale:2,backgroundColor:"#ffffff",useCORS:!0,logging:!1}),st=await new Promise(mt=>{ze.toBlob(ct=>mt(ct),"image/png",1)}),Ze=`Phieu_${Li(B.id,Q==null?void 0:Q.work_order_prefix)}.png`;if(navigator.share&&navigator.canShare){const ct={files:[new File([st],Ze,{type:"image/png"})],title:`Phiu sa cha - ${Li(B.id,Q==null?void 0:Q.work_order_prefix)}`};if(navigator.canShare(ct))await navigator.share(ct),Xe.success("Chia s thnh cng!");else{const Rt=URL.createObjectURL(st),Xt=document.createElement("a");Xt.href=Rt,Xt.download=Ze,Xt.click(),URL.revokeObjectURL(Rt),Xe.success(" ti hnh nh!")}}else{const mt=URL.createObjectURL(st),ct=document.createElement("a");ct.href=mt,ct.download=Ze,ct.click(),URL.revokeObjectURL(mt),Xe.success(" ti hnh nh!")}}catch(oe){console.error("Share failed:",oe),Xe.error("Khng th chia s. Vui lng th li!")}},className:"px-3 py-1.5 bg-green-600 hover:bg-green-700 text-white rounded-lg flex items-center gap-1.5 transition text-sm",children:[s.jsx(jee,{className:"w-4 h-4"}),"Chia s"]}),s.jsxs("button",{onClick:Zt,className:"px-3 py-1.5 bg-blue-600 hover:bg-blue-700 text-white rounded-lg flex items-center gap-1.5 transition text-sm",children:[s.jsx(fm,{className:"w-4 h-4"}),"In"]}),s.jsx("button",{onClick:()=>{re(!1),ee(null)},className:"p-1.5 text-slate-400 hover:text-slate-600 dark:hover:text-slate-300 bg-slate-100 dark:bg-slate-700 rounded-lg","aria-label":"ng",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"w-5 h-5",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]})]}),s.jsx("div",{className:"flex-1 overflow-y-auto p-3 bg-slate-100 dark:bg-slate-900",children:s.jsxs("div",{id:"mobile-print-preview-content",className:"bg-white shadow-lg mx-auto",style:{maxWidth:"100%",color:"#000",padding:"4mm"},children:[s.jsxs("div",{style:{display:"flex",gap:"3mm",marginBottom:"3mm",borderBottom:"2px solid #3b82f6",paddingBottom:"2mm",alignItems:"flex-start"},children:[(Q==null?void 0:Q.logo_url)&&s.jsx("div",{style:{flexShrink:0},children:s.jsx("img",{src:Q.logo_url,alt:"Logo",style:{height:"15mm",width:"auto",objectFit:"contain"},crossOrigin:"anonymous"})}),s.jsxs("div",{style:{flex:1,fontSize:"9pt"},children:[s.jsx("div",{style:{fontWeight:"bold",fontSize:"12pt",color:"#1e40af",marginBottom:"1mm"},children:(Q==null?void 0:Q.store_name)||"Nhn Lm SmartCare"}),s.jsxs("div",{style:{color:"#000"},children:[" ",(Q==null?void 0:Q.address)||"p Ph Li B, X Long Ph Thun, ng Thp"]}),s.jsxs("div",{style:{color:"#000"},children:[" ",(Q==null?void 0:Q.phone)||"0947.747.907"]})]})]}),s.jsxs("div",{style:{textAlign:"center",marginBottom:"3mm"},children:[s.jsx("h1",{style:{fontSize:"14pt",fontWeight:"bold",margin:"0",color:"#1e40af"},children:"PHIU DCH V SA CHA"}),s.jsxs("div",{style:{fontSize:"9pt",color:"#666",marginTop:"1mm"},children:["M: ",Li(B.id,Q==null?void 0:Q.work_order_prefix)]}),s.jsx("div",{style:{fontSize:"8pt",color:"#666"},children:new Date(B.creationDate).toLocaleString("vi-VN")})]}),s.jsxs("div",{style:{border:"1px solid #ddd",padding:"2mm",marginBottom:"2mm",borderRadius:"2mm",backgroundColor:"#f8fafc",fontSize:"9pt"},children:[s.jsxs("div",{children:[s.jsx("strong",{children:"Khch hng:"})," ",B.customerName," - ",B.customerPhone]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Xe:"})," ",B.vehicleModel," - ",s.jsx("span",{style:{color:"#3b82f6"},children:B.licensePlate})]})]}),B.issueDescription&&s.jsxs("div",{style:{border:"1px solid #ddd",padding:"2mm",marginBottom:"2mm",borderRadius:"2mm",fontSize:"9pt"},children:[s.jsx("strong",{children:"M t s c:"})," ",B.issueDescription]}),B.partsUsed&&B.partsUsed.length>0&&s.jsxs("div",{style:{marginBottom:"2mm"},children:[s.jsx("p",{style:{fontWeight:"bold",margin:"0 0 1mm 0",fontSize:"10pt"},children:"Ph tng:"}),s.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",border:"1px solid #ddd",fontSize:"9pt"},children:[s.jsx("thead",{children:s.jsxs("tr",{style:{backgroundColor:"#f5f5f5"},children:[s.jsx("th",{style:{border:"1px solid #ddd",padding:"1.5mm",textAlign:"left"},children:"Tn"}),s.jsx("th",{style:{border:"1px solid #ddd",padding:"1.5mm",textAlign:"center",width:"12%"},children:"SL"}),s.jsx("th",{style:{border:"1px solid #ddd",padding:"1.5mm",textAlign:"right",width:"28%"},children:"Thnh tin"})]})}),s.jsx("tbody",{children:B.partsUsed.map((oe,ne)=>s.jsxs("tr",{children:[s.jsx("td",{style:{border:"1px solid #ddd",padding:"1.5mm"},children:oe.partName}),s.jsx("td",{style:{border:"1px solid #ddd",padding:"1.5mm",textAlign:"center"},children:oe.quantity}),s.jsx("td",{style:{border:"1px solid #ddd",padding:"1.5mm",textAlign:"right",fontWeight:"bold"},children:Oe(oe.price*oe.quantity)})]},ne))})]})]}),B.additionalServices&&B.additionalServices.length>0&&s.jsxs("div",{style:{marginBottom:"2mm",fontSize:"9pt"},children:[s.jsx("p",{style:{fontWeight:"bold",margin:"0 0 1mm 0",fontSize:"10pt"},children:"Dch v b sung:"}),B.additionalServices.map((oe,ne)=>s.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[s.jsx("span",{children:oe.description}),s.jsx("span",{style:{fontWeight:"bold"},children:Oe(oe.price*(oe.quantity||1))})]},ne))]}),s.jsxs("div",{style:{border:"1px solid #ddd",padding:"2mm",borderRadius:"2mm",backgroundColor:"#f9f9f9",fontSize:"9pt"},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"1mm"},children:[s.jsx("span",{children:"Tin ph tng:"}),s.jsx("span",{children:Oe(((Ir=B.partsUsed)==null?void 0:Ir.reduce((oe,ne)=>oe+ne.price*ne.quantity,0))||0)})]}),s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"1mm"},children:[s.jsx("span",{children:"Ph dch v:"}),s.jsx("span",{children:Oe(B.laborCost||0)})]}),B.additionalServices&&B.additionalServices.length>0&&s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"1mm"},children:[s.jsx("span",{children:"Gi cng/t hng:"}),s.jsx("span",{children:Oe(B.additionalServices.reduce((oe,ne)=>oe+(ne.price||0)*(ne.quantity||1),0))})]}),B.discount!=null&&B.discount>0&&s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"1mm",color:"#e74c3c"},children:[s.jsx("span",{children:"Gim gi:"}),s.jsxs("span",{children:["-",Oe(B.discount)]})]}),s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",paddingTop:"2mm",borderTop:"2px solid #3b82f6",fontSize:"12pt",fontWeight:"bold",color:"#1e40af"},children:[s.jsx("span",{children:"TNG CNG:"}),s.jsx("span",{children:Oe(B.total||0)})]}),B.depositAmount!=null&&B.depositAmount>0&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"1mm",color:"#16a34a"},children:[s.jsx("span",{children:" t cc:"}),s.jsx("span",{children:Oe(B.depositAmount)})]}),s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontWeight:"bold",color:"#dc2626"},children:[s.jsx("span",{children:"Cn li:"}),s.jsx("span",{children:Oe(B.remainingAmount||B.total-B.depositAmount)})]})]})]}),(Q==null?void 0:Q.bank_name)&&s.jsx("div",{style:{marginTop:"3mm",border:"1px solid #ddd",padding:"2mm",borderRadius:"2mm",backgroundColor:"#f0f9ff",fontSize:"9pt"},children:s.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"3mm"},children:[s.jsxs("div",{style:{flex:1},children:[s.jsx("div",{style:{fontWeight:"bold",marginBottom:"1mm",color:"#1e40af"},children:" Thng tin thanh ton"}),s.jsxs("div",{style:{color:"#000"},children:["Ngn hng: ",Q.bank_name]}),Q.bank_account_number&&s.jsxs("div",{style:{color:"#000"},children:["STK: ",s.jsx("strong",{children:Q.bank_account_number})]}),Q.bank_account_holder&&s.jsxs("div",{style:{color:"#000"},children:["Ch TK: ",Q.bank_account_holder]}),Q.bank_branch&&s.jsxs("div",{style:{color:"#666",fontSize:"8pt"},children:["Chi nhnh: ",Q.bank_branch]})]}),Q.bank_qr_url&&s.jsx("div",{style:{flexShrink:0},children:s.jsx("img",{src:Q.bank_qr_url,alt:"QR Banking",style:{height:"20mm",width:"20mm",objectFit:"contain"},crossOrigin:"anonymous"})})]})}),s.jsxs("div",{style:{marginTop:"3mm",padding:"2mm",backgroundColor:"#fff9e6",border:"1px solid #ffd700",borderRadius:"2mm",fontSize:"8pt",textAlign:"center"},children:[s.jsx("p",{style:{margin:"0",fontStyle:"italic"},children:"Cm n qu khch  s dng dch v!"}),s.jsx("p",{style:{margin:"1mm 0 0 0",fontStyle:"italic"},children:"Vui lng gi phiu ny  i chiu khi nhn xe"})]}),s.jsxs("div",{style:{marginTop:"2mm",fontSize:"9pt",textAlign:"right",color:"#666"},children:["KTV: ",B.technicianName||"Cha phn cng"]})]})})]})})]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid gap-4 xl:grid-cols-[2fr,1fr]",children:[s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl border border-slate-200 dark:border-slate-700 p-6",children:[s.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-400",children:"Phiu cn x l"}),s.jsx("p",{className:"text-3xl font-bold text-slate-900 dark:text-slate-100",children:rr}),s.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Chim ",Gt,"% ca ",Mr||0," phiu ang m"]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-400",children:"Hon thnh"}),s.jsxs("p",{className:"text-2xl font-semibold text-emerald-600 dark:text-emerald-400",children:[Vt,"%"]}),s.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:[nr.done," phiu ch giao"]})]})]}),s.jsx("div",{className:"mt-6 grid gap-3 sm:grid-cols-2 lg:grid-cols-4",children:yr.map(oe=>s.jsx("button",{onClick:()=>_e(ke===oe.key?"all":oe.key),className:`text-left rounded-xl border p-4 transition focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500/50 ${ke===oe.key?"border-blue-500 bg-blue-50/60 dark:bg-blue-900/20":"border-slate-200 dark:border-slate-700"}`,children:s.jsxs("div",{className:`rounded-lg bg-gradient-to-br ${oe.accent} p-3`,children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500 dark:text-slate-400",children:oe.label}),s.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-slate-100",children:oe.value})]}),s.jsx("span",{className:`h-2.5 w-2.5 rounded-full ${oe.dot}`})]}),s.jsx("p",{className:"mt-2 text-xs text-slate-500 dark:text-slate-400",children:oe.subtitle})]})},oe.key))})]}),s.jsxs("div",{className:"grid gap-4",children:[s.jsxs("div",{className:"rounded-2xl bg-gradient-to-br from-blue-500 via-blue-600 to-indigo-600 p-6 text-white shadow-lg",children:[s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-white/80",children:"Doanh thu hm nay"}),s.jsx("p",{className:"mt-3 text-3xl font-semibold",children:Oe(nr.todayRevenue)})]}),s.jsx(Wg,{className:"w-10 h-10 text-white/80"})]}),s.jsx("p",{className:"mt-4 text-sm text-white/80",children:"Bao gm cc phiu  thanh ton trong ngy"})]}),s.jsxs("div",{className:"rounded-2xl bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 p-6",children:[s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-400",children:"Li nhun hm nay"}),s.jsx("p",{className:"mt-3 text-3xl font-semibold text-slate-900 dark:text-slate-100",children:Oe(nr.todayProfit)})]}),s.jsx(F1,{className:"w-10 h-10 text-blue-500"})]}),s.jsxs("div",{className:"mt-4 flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-slate-500 dark:text-slate-400",children:"Bin li nhun"}),s.jsxs("span",{className:"font-semibold text-emerald-600 dark:text-emerald-400",children:[cr,"%"]})]})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-2xl p-4 flex flex-wrap items-center gap-3",children:[s.jsx("span",{className:"text-xs font-semibold uppercase tracking-wide text-slate-400",children:"Trng thi nhanh"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:xt.map(oe=>s.jsxs("button",{onClick:()=>_e(ke===oe.key?"all":oe.key),className:`inline-flex items-center gap-2 rounded-full border px-3 py-1.5 text-sm transition ${ke===oe.key?"border-blue-500 bg-blue-50 text-blue-600 dark:bg-blue-900/20":"border-slate-200 text-slate-600 hover:border-slate-300 dark:border-slate-700 dark:text-slate-300"}`,children:[s.jsx("span",{children:oe.label}),s.jsx("span",{className:`text-xs font-semibold px-2 py-0.5 rounded-full ${br[oe.color]}`,children:oe.count})]},oe.key))})]}),s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl p-5 border border-slate-200 dark:border-slate-700 space-y-4",children:[s.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[s.jsxs("div",{className:"flex-1 min-w-[260px]",children:[s.jsx("label",{className:"text-xs font-semibold uppercase tracking-wide text-slate-400",children:"Tm kim nhanh"}),s.jsxs("div",{className:"relative mt-1",children:[s.jsx("input",{type:"text",placeholder:"M phiu, tn khch, ST, xe, bin s...",value:ae,onChange:oe=>se(oe.target.value),className:"w-full pl-10 pr-4 py-2 bg-slate-50 dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-sm text-slate-900 dark:text-slate-100 placeholder-slate-400"}),s.jsx(Pu,{className:"absolute left-3 top-2.5 w-4 h-4 text-slate-400","aria-hidden":"true"})]})]}),s.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[s.jsxs("button",{className:"px-4 py-2 bg-white text-slate-600 dark:bg-slate-900/40 dark:text-slate-100 border border-slate-200 dark:border-slate-700 rounded-lg text-sm font-medium flex items-center gap-2","aria-label":"Xem bo co",children:[s.jsx(F1,{className:"w-4 h-4"})," Bo co"]}),s.jsxs("button",{onClick:()=>H(!0),className:"px-4 py-2 bg-purple-500 hover:bg-purple-600 text-white rounded-lg text-sm font-medium flex items-center gap-2","aria-label":"M danh sch mu sa cha",children:[s.jsx(dd,{className:"w-4 h-4"})," Mu SC"]}),s.jsxs(Uu,{to:"/service-history",className:"px-4 py-2 bg-cyan-500 hover:bg-cyan-600 text-white rounded-lg text-sm font-medium flex items-center gap-2 transition-colors",children:[s.jsx(S_,{className:"w-4 h-4"})," Lch s SC"]}),s.jsxs("button",{onClick:()=>{window.innerWidth<768?z(!0):Ge()},className:"px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg text-sm font-medium flex items-center gap-2","aria-label":"To phiu sa cha mi",children:[s.jsx(_c,{className:"w-4 h-4"})," Thm Phiu"]}),s.jsxs("button",{className:"px-4 py-2 bg-orange-500 hover:bg-orange-600 text-white rounded-lg text-sm font-medium flex items-center gap-2","aria-label":"Gi SMS nhc khch hng",children:[s.jsx(l7,{className:"w-4 h-4"})," SMS QH"]})]})]}),s.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[s.jsx("span",{className:"text-xs font-semibold uppercase tracking-wide text-slate-400",children:"B lc nng cao"}),s.jsxs("div",{className:"flex flex-wrap gap-2 flex-1 min-w-[240px]",children:[s.jsx("div",{className:"min-w-[160px]",children:s.jsxs("select",{className:ar,children:[s.jsx("option",{children:"Tt c ngy"}),s.jsx("option",{children:"Hm nay"}),s.jsx("option",{children:"7 ngy qua"}),s.jsx("option",{children:"30 ngy qua"})]})}),s.jsx("div",{className:"min-w-[160px]",children:s.jsxs("select",{className:ar,children:[s.jsx("option",{children:"Tt c KTV"}),s.jsx("option",{children:"KTV 1"}),s.jsx("option",{children:"KTV 2"})]})}),s.jsx("div",{className:"min-w-[160px]",children:s.jsxs("select",{className:ar,children:[s.jsx("option",{children:"Tt c thanh ton"}),s.jsx("option",{children:" thanh ton"}),s.jsx("option",{children:"Cha thanh ton"})]})})]})]})]}),s.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700/50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-2 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 w-12",children:s.jsx("input",{type:"checkbox",className:"rounded"})}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300",children:"M phiu"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300",children:"Khch hng"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300",children:"Chi tit"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300",children:"Thanh ton & trng thi"}),s.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-600 dark:text-slate-300",children:"Thao tc"})]})}),s.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700 bg-white dark:bg-slate-800",children:xr.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:6,className:"px-4 py-12 text-center text-slate-400",children:"Khng c phiu sa cha no."})}):xr.map(oe=>{var Sr,Pt,Un,en,Na,Ci;const ne=((Sr=oe.partsUsed)==null?void 0:Sr.reduce((tn,an)=>tn+an.quantity*an.price,0))||0,ze=((Pt=oe.additionalServices)==null?void 0:Pt.reduce((tn,an)=>tn+(an.price||0)*(an.quantity||1),0))||0,st=oe.laborCost||0,Ze=oe.total||0,mt=Ze-(oe.remainingAmount||0),ct=Ze?Math.min(100,Math.round(mt/Ze*100)):0,Rt=oe.paymentStatus==="paid"?"bg-emerald-50 text-emerald-600 dark:bg-emerald-900/30 dark:text-emerald-300":"bg-amber-50 text-amber-600 dark:bg-amber-900/30 dark:text-amber-300",Xt=((Un=oe.partsUsed)==null?void 0:Un.slice(0,2))||[],Jt=(((en=oe.partsUsed)==null?void 0:en.length)||0)-Xt.length,ir=((Na=oe.additionalServices)==null?void 0:Na.slice(0,2))||[],mr=(((Ci=oe.additionalServices)==null?void 0:Ci.length)||0)-ir.length;return s.jsxs("tr",{onClick:()=>Ge(oe),className:"bg-white dark:bg-slate-800 hover:bg-slate-50 dark:hover:bg-slate-700/30 cursor-pointer transition-colors",children:[s.jsx("td",{className:"px-2 py-4 align-top",onClick:tn=>tn.stopPropagation(),children:s.jsx("input",{type:"checkbox",className:"rounded"})}),s.jsx("td",{className:"px-4 py-4 align-top",children:s.jsxs("div",{className:"space-y-0.5",children:[s.jsx("div",{className:"font-mono font-bold text-blue-600 dark:text-blue-400 text-sm",children:Li(oe.id,Q==null?void 0:Q.work_order_prefix)}),s.jsxs("div",{className:"text-xs text-slate-500",children:[s.jsx("span",{children:"Ngy: "}),s.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:Bn(oe.creationDate,!0)})]}),s.jsxs("div",{className:"text-xs text-cyan-600 dark:text-cyan-400",children:["NV: ",oe.technicianName||"Cha phn cng"]})]})}),s.jsx("td",{className:"px-4 py-4 align-top",children:s.jsxs("div",{className:"space-y-0.5",children:[s.jsx("div",{className:"font-semibold text-base text-slate-900 dark:text-slate-100",children:oe.customerName}),s.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:oe.customerPhone}),s.jsxs("div",{className:"text-xs text-slate-500",children:[s.jsx("span",{className:"font-medium",children:"Xe: "}),s.jsx("span",{children:oe.vehicleModel||"N/A"}),oe.licensePlate&&s.jsxs("span",{className:"ml-1",children:["- ",oe.licensePlate]})]}),s.jsx("div",{className:"text-xs text-slate-500 italic mt-1",children:oe.issueDescription||"Khng c m t"})]})}),s.jsx("td",{className:"px-4 py-4 align-top",children:s.jsxs("div",{className:"space-y-2",children:[Xt.length>0&&s.jsxs("div",{children:[s.jsx("div",{className:"text-xs font-medium text-slate-600 dark:text-slate-400 mb-0.5",children:"Ph tng"}),s.jsxs("div",{className:"space-y-0.5",children:[Xt.map((tn,an)=>s.jsxs("div",{className:"text-xs text-slate-700 dark:text-slate-300",children:[" ",tn.partName," x",tn.quantity]},an)),Jt>0&&s.jsxs("div",{className:"text-xs text-slate-400",children:["+",Jt," hng mc khc"]})]})]}),ir.length>0&&s.jsxs("div",{children:[s.jsx("div",{className:"text-xs font-medium text-slate-600 dark:text-slate-400 mb-0.5",children:"Gia cng/t hng"}),s.jsxs("div",{className:"space-y-0.5",children:[ir.map((tn,an)=>s.jsxs("div",{className:"text-xs text-slate-700 dark:text-slate-300",children:[" ",tn.description," x",tn.quantity||1]},an)),mr>0&&s.jsxs("div",{className:"text-xs text-slate-400",children:["+",mr," dch v khc"]})]})]}),Xt.length===0&&ir.length===0&&s.jsx("div",{className:"text-xs text-slate-500 italic",children:"Cha c chi tit"})]})}),s.jsx("td",{className:"px-4 py-4 align-top",children:s.jsxs("div",{className:"space-y-3 min-w-[220px]",children:[s.jsxs("div",{className:"flex flex-wrap gap-2 text-xs",children:[st>0&&s.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-slate-100 dark:bg-slate-700 px-2 py-0.5 text-slate-600 dark:text-slate-200",children:["DV ",Oe(st)]}),ne>0&&s.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-slate-100 dark:bg-slate-700 px-2 py-0.5 text-slate-600 dark:text-slate-200",children:["P/tng ",Oe(ne)]}),ze>0&&s.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-slate-100 dark:bg-slate-700 px-2 py-0.5 text-slate-600 dark:text-slate-200",children:["Cng ",Oe(ze)]}),oe.discount&&oe.discount>0&&s.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-red-50 dark:bg-red-900/30 px-2 py-0.5 text-red-600 dark:text-red-400",children:["Gim ",Oe(oe.discount)]})]}),Ze>0&&s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex items-center justify-between text-xs text-slate-500 dark:text-slate-400",children:[s.jsx("span",{children:" thu"}),s.jsxs("span",{className:"font-semibold text-slate-700 dark:text-slate-200",children:[Oe(Math.max(0,mt))," /"," ",Oe(Ze)]})]}),s.jsx("div",{className:"h-2 w-full rounded-full bg-slate-100 dark:bg-slate-700",children:s.jsx("div",{className:`h-full rounded-full ${ct>=100?"bg-emerald-500":"bg-blue-500"}`,style:{width:`${ct}%`}})})]}),s.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-xs font-medium",children:[s.jsx(pje,{status:oe.status}),s.jsx("span",{className:`px-2 py-0.5 rounded-full ${Rt}`,children:oe.paymentStatus==="paid"?" thanh ton":"Cha thanh ton"}),oe.remainingAmount!==void 0&&oe.remainingAmount>0&&s.jsxs("span",{className:"text-red-500",children:["Cn ",Oe(oe.remainingAmount)]})]})]})}),s.jsx("td",{className:"px-4 py-4 align-top",onClick:tn=>tn.stopPropagation(),children:s.jsx("div",{className:"flex items-center justify-end gap-2",children:s.jsxs("div",{className:"relative service-row-menu",children:[s.jsx("button",{onClick:()=>xe(Le===oe.id?null:oe.id),"aria-haspopup":"menu","aria-expanded":Le===oe.id,className:"px-3 py-2 border border-slate-200 dark:border-slate-600 rounded-lg text-slate-500 hover:text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700",children:s.jsx(__,{className:"w-4 h-4"})}),Le===oe.id&&s.jsxs("div",{className:"absolute right-0 mt-2 w-48 rounded-lg border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-800 shadow-xl z-10",children:[s.jsxs("button",{onClick:()=>{Tr(oe),xe(null)},className:"w-full flex items-center gap-2 px-4 py-2 text-sm text-slate-600 dark:text-slate-200 hover:bg-blue-50 dark:hover:bg-slate-700",children:[s.jsx(fm,{className:"w-4 h-4"})," In phiu"]}),s.jsxs("button",{onClick:()=>{qr(oe.customerPhone||""),xe(null)},className:"w-full flex items-center gap-2 px-4 py-2 text-sm text-slate-600 dark:text-slate-200 hover:bg-blue-50 dark:hover:bg-slate-700",children:[s.jsx(l7,{className:"w-4 h-4"})," Gi khch"]}),!oe.refunded&&s.jsx("button",{onClick:()=>{sr(oe),xe(null)},className:"w-full flex items-center gap-2 px-4 py-2 text-sm text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20",children:"Hy/Hon tin"})]})]})})})]},oe.id)})})]})})}),Z&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"sticky top-0 bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 px-6 py-4 flex items-center justify-between",children:[s.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:"Mu sa cha thng dng"}),s.jsx("button",{onClick:()=>H(!1),className:"text-slate-400 hover:text-slate-600","aria-label":"ng",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"w-5 h-5",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsxs("div",{className:"p-6",children:[s.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-4",children:"Chn mu sa cha  t ng in thng tin vo phiu sa cha"}),s.jsx("div",{className:"grid gap-4 sm:grid-cols-2",children:fr.map(oe=>s.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg p-4 hover:shadow-md transition",children:[s.jsxs("div",{className:"flex items-start justify-between mb-2",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-slate-900 dark:text-slate-100",children:oe.name}),s.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:oe.description}),s.jsxs("p",{className:"text-xs text-slate-400 mt-1",children:[oe.duration," pht"]})]}),s.jsx("div",{className:"text-right",children:s.jsx("p",{className:"text-lg font-bold text-blue-600 dark:text-blue-400",children:Oe(oe.laborCost+oe.parts.reduce((ne,ze)=>ne+ze.price*ze.quantity,0))})})]}),s.jsxs("div",{className:"mt-3 pt-3 border-t border-slate-200 dark:border-slate-700",children:[s.jsx("p",{className:"text-xs font-medium text-slate-600 dark:text-slate-300 mb-2",children:"Ph tng cn thit:"}),oe.parts.map((ne,ze)=>s.jsxs("div",{className:"flex justify-between text-xs text-slate-500 dark:text-slate-400",children:[s.jsxs("span",{children:[ne.name," x",ne.quantity," ",ne.unit]}),s.jsx("span",{children:Oe(ne.price*ne.quantity)})]},ze)),s.jsxs("div",{className:"flex gap-2 mt-3",children:[s.jsx("button",{onClick:()=>vt(oe),className:"flex-1 px-3 py-1.5 bg-blue-500 hover:bg-blue-600 text-white rounded text-sm",children:"p dng mu"}),s.jsx("button",{onClick:$t,className:"px-3 py-1.5 bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-200 rounded text-sm",children:"To mi"}),s.jsx("button",{onClick:()=>Yt(oe),className:"px-3 py-1.5 bg-purple-50 dark:bg-purple-900/20 hover:bg-purple-100 dark:hover:bg-purple-900/30 text-purple-600 dark:text-purple-400 rounded text-sm",children:"Sa mu"})]})]})]},oe.id))})]})]})}),W&&K&&s.jsx(xje,{order:K,onClose:()=>{R(!1),J(void 0)},onSave:oe=>{if(oe.id&&(K!=null&&K.id))d(ne=>ne.map(ze=>ze.id===oe.id?oe:ze));else{const ne={...oe,id:`${(Q==null?void 0:Q.work_order_prefix)||"SC"}-${Date.now()}`};d(ze=>[...ze,ne])}R(!1),J(void 0)},parts:O,partsLoading:p,customers:E,employees:D,upsertCustomer:n,setCashTransactions:a,setPaymentSources:i,paymentSources:l,currentBranchId:o,storeSettings:Q}),s.jsx(WD,{isOpen:U,onClose:()=>{z(!1),J(void 0)},onSave:oe=>{console.log("Mobile Work Order Data:",oe),z(!1),J(void 0)},workOrder:K,customers:E,parts:f||[],employees:D||[],currentBranchId:o}),Y&&B&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl w-full max-w-4xl max-h-[90vh] flex flex-col",children:[s.jsxs("div",{className:"bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 px-6 py-4 flex items-center justify-between rounded-t-xl flex-shrink-0",children:[s.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:"Xem trc phiu in"}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("button",{onClick:Zt,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg flex items-center gap-2 transition",children:[s.jsx(fm,{className:"w-4 h-4"}),"In phiu"]}),s.jsx("button",{onClick:()=>{re(!1),ee(null)},className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-300","aria-label":"ng",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"w-5 h-5",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]})]}),s.jsx("div",{className:"flex-1 overflow-y-auto p-6 bg-slate-100 dark:bg-slate-900",children:s.jsx("div",{className:"bg-white shadow-lg mx-auto",style:{width:"148mm",minHeight:"210mm",color:"#000"},children:s.jsxs("div",{style:{padding:"10mm"},children:[s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr auto 1fr",gap:"3mm",marginBottom:"4mm",alignItems:"start",borderBottom:"2px solid #3b82f6",paddingBottom:"3mm"},children:[(Q==null?void 0:Q.logo_url)&&s.jsx("div",{style:{marginRight:"4mm"},children:s.jsx("img",{src:Q.logo_url,alt:"Logo",style:{height:"18mm",width:"auto",objectFit:"contain"}})}),s.jsxs("div",{style:{fontSize:"8.5pt",lineHeight:"1.4",flex:1},children:[s.jsx("div",{style:{fontWeight:"bold",fontSize:"11pt",marginBottom:"1mm",color:"#1e40af"},children:(Q==null?void 0:Q.store_name)||"Nhn Lm SmartCare"}),s.jsxs("div",{style:{color:"#000"},children:[""," ",(Q==null?void 0:Q.address)||"p Ph Li B, X Long Ph Thun, ng Thp"]}),s.jsxs("div",{style:{color:"#000"},children:[" ",(Q==null?void 0:Q.phone)||"0947.747.907"]}),(Q==null?void 0:Q.email)&&s.jsxs("div",{style:{color:"#000"},children:[" ",Q.email]})]}),s.jsx("div",{style:{fontSize:"8pt",lineHeight:"1.4",textAlign:"right"},children:(Q==null?void 0:Q.bank_name)&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{style:{fontWeight:"bold",marginBottom:"1mm",color:"#000"},children:[" ",Q.bank_name]}),Q.bank_account_number&&s.jsxs("div",{style:{color:"#000"},children:["STK: ",Q.bank_account_number]}),Q.bank_account_holder&&s.jsx("div",{style:{color:"#000",fontSize:"7.5pt"},children:Q.bank_account_holder}),Q.bank_qr_url&&s.jsx("div",{style:{marginTop:"2mm",display:"inline-block"},children:s.jsx("img",{src:Q.bank_qr_url,alt:"QR Banking",style:{height:"15mm",width:"15mm",objectFit:"contain"}})})]})})]}),s.jsxs("div",{style:{marginBottom:"4mm"},children:[s.jsx("div",{style:{textAlign:"center",marginBottom:"2mm"},children:s.jsx("h1",{style:{fontSize:"16pt",fontWeight:"bold",margin:"0",textTransform:"uppercase",color:"#1e40af"},children:"PHIU DCH V SA CHA"})}),s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"9pt",color:"#666"},children:[s.jsx("div",{children:new Date(B.creationDate).toLocaleString("vi-VN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}),s.jsxs("div",{style:{fontWeight:"bold"},children:["M:"," ",Li(B.id,Q==null?void 0:Q.work_order_prefix)]})]})]}),s.jsxs("div",{style:{border:"1px solid #ddd",padding:"3mm",marginBottom:"3mm",borderRadius:"2mm",backgroundColor:"#f8fafc",color:"#000",fontSize:"9pt"},children:[s.jsxs("div",{style:{display:"flex",gap:"4mm",marginBottom:"1.5mm"},children:[s.jsxs("div",{style:{flex:1},children:[s.jsx("span",{style:{fontWeight:"bold"},children:"Khch hng:"})," ",B.customerName]}),s.jsxs("div",{style:{flex:"0 0 auto"},children:[s.jsx("span",{style:{fontWeight:"bold"},children:"ST:"})," ",B.customerPhone]})]}),s.jsxs("div",{style:{display:"flex",gap:"4mm"},children:[s.jsxs("div",{style:{flex:1},children:[s.jsx("span",{style:{fontWeight:"bold"},children:"Loi xe:"})," ",B.vehicleModel]}),s.jsxs("div",{style:{flex:"0 0 auto"},children:[s.jsx("span",{style:{fontWeight:"bold"},children:"Bin s:"})," ",B.licensePlate]})]})]}),s.jsx("div",{style:{border:"1px solid #ddd",padding:"4mm",marginBottom:"4mm",borderRadius:"2mm",color:"#000"},children:s.jsxs("div",{style:{display:"flex",gap:"3mm"},children:[s.jsx("div",{style:{fontWeight:"bold",minWidth:"20%",flexShrink:0},children:"M t s c:"}),s.jsx("div",{style:{flex:1,whiteSpace:"pre-wrap"},children:B.issueDescription||"Khng c m t"})]})}),B.partsUsed&&B.partsUsed.length>0&&s.jsxs("div",{style:{marginBottom:"4mm",color:"#000"},children:[s.jsx("p",{style:{fontWeight:"bold",margin:"0 0 2mm 0",fontSize:"11pt"},children:"Ph tng s dng:"}),s.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",border:"1px solid #ddd"},children:[s.jsx("thead",{children:s.jsxs("tr",{style:{backgroundColor:"#f5f5f5"},children:[s.jsx("th",{style:{border:"1px solid #ddd",padding:"2mm",textAlign:"left",fontSize:"10pt"},children:"Tn ph tng"}),s.jsx("th",{style:{border:"1px solid #ddd",padding:"2mm",textAlign:"center",fontSize:"10pt",width:"15%"},children:"SL"}),s.jsx("th",{style:{border:"1px solid #ddd",padding:"2mm",textAlign:"right",fontSize:"10pt",width:"25%"},children:"n gi"}),s.jsx("th",{style:{border:"1px solid #ddd",padding:"2mm",textAlign:"right",fontSize:"10pt",width:"25%"},children:"Thnh tin"})]})}),s.jsx("tbody",{children:B.partsUsed.map((oe,ne)=>s.jsxs("tr",{children:[s.jsx("td",{style:{border:"1px solid #ddd",padding:"2mm",fontSize:"10pt"},children:oe.partName}),s.jsx("td",{style:{border:"1px solid #ddd",padding:"2mm",textAlign:"center",fontSize:"10pt"},children:oe.quantity}),s.jsx("td",{style:{border:"1px solid #ddd",padding:"2mm",textAlign:"right",fontSize:"10pt"},children:Oe(oe.price)}),s.jsx("td",{style:{border:"1px solid #ddd",padding:"2mm",textAlign:"right",fontSize:"10pt",fontWeight:"bold"},children:Oe(oe.price*oe.quantity)})]},ne))})]})]}),B.additionalServices&&B.additionalServices.length>0&&s.jsxs("div",{style:{marginBottom:"4mm",color:"#000"},children:[s.jsx("p",{style:{fontWeight:"bold",margin:"0 0 2mm 0",fontSize:"11pt",color:"#000"},children:"Dch v b sung:"}),s.jsx("ul",{style:{margin:"0",paddingLeft:"5mm",color:"#000"},children:B.additionalServices.map((oe,ne)=>s.jsxs("li",{style:{marginBottom:"1mm"},children:[oe.description," -"," ",Oe(oe.price)," x"," ",oe.quantity]},ne))})]}),s.jsx("div",{style:{border:"1px solid #ddd",padding:"4mm",marginBottom:"4mm",borderRadius:"2mm",backgroundColor:"#f9f9f9",color:"#000"},children:s.jsx("table",{style:{width:"100%",borderSpacing:"0",color:"#000"},children:s.jsxs("tbody",{children:[s.jsxs("tr",{children:[s.jsx("td",{style:{fontWeight:"bold",paddingBottom:"2mm",fontSize:"10pt"},children:"Tin ph tng:"}),s.jsx("td",{style:{textAlign:"right",paddingBottom:"2mm",fontSize:"10pt"},children:Oe(((Nn=B.partsUsed)==null?void 0:Nn.reduce((oe,ne)=>oe+ne.price*ne.quantity,0))||0)})]}),s.jsxs("tr",{children:[s.jsx("td",{style:{fontWeight:"bold",paddingBottom:"2mm",fontSize:"10pt"},children:"Ph dch v:"}),s.jsx("td",{style:{textAlign:"right",paddingBottom:"2mm",fontSize:"10pt"},children:Oe(B.laborCost||0)})]}),s.jsxs("tr",{children:[s.jsx("td",{style:{fontWeight:"bold",paddingBottom:"2mm",fontSize:"10pt"},children:"Gi cng/t hng:"}),s.jsx("td",{style:{textAlign:"right",paddingBottom:"2mm",fontSize:"10pt"},children:Oe(((we=B.additionalServices)==null?void 0:we.reduce((oe,ne)=>oe+(ne.price||0)*(ne.quantity||1),0))||0)})]}),B.discount!=null&&B.discount>0&&s.jsxs("tr",{children:[s.jsx("td",{style:{fontWeight:"bold",paddingBottom:"2mm",fontSize:"10pt",color:"#e74c3c"},children:"Gim gi:"}),s.jsxs("td",{style:{textAlign:"right",paddingBottom:"2mm",fontSize:"10pt",color:"#e74c3c"},children:["-",Oe(B.discount)]})]}),s.jsxs("tr",{style:{borderTop:"2px solid #333"},children:[s.jsx("td",{style:{fontWeight:"bold",paddingTop:"2mm",fontSize:"12pt"},children:"TNG CNG:"}),s.jsxs("td",{style:{textAlign:"right",paddingTop:"2mm",fontSize:"12pt",fontWeight:"bold",color:"#2563eb"},children:[Oe(B.total)," "]})]}),B.totalPaid!=null&&B.totalPaid>0&&s.jsxs("tr",{children:[s.jsx("td",{style:{fontWeight:"bold",paddingTop:"2mm",fontSize:"10pt",color:"#16a34a"},children:" thanh ton:"}),s.jsx("td",{style:{textAlign:"right",paddingTop:"2mm",fontSize:"10pt",color:"#16a34a"},children:Oe(B.totalPaid)})]}),B.remainingAmount!=null&&B.remainingAmount>0&&s.jsxs("tr",{children:[s.jsx("td",{style:{fontWeight:"bold",fontSize:"11pt",color:"#dc2626"},children:"Cn li:"}),s.jsx("td",{style:{textAlign:"right",fontSize:"11pt",fontWeight:"bold",color:"#dc2626"},children:Oe(B.remainingAmount)})]}),B.paymentMethod&&s.jsxs("tr",{children:[s.jsx("td",{style:{paddingTop:"2mm",fontSize:"9pt",color:"#666"},children:"Hnh thc thanh ton:"}),s.jsx("td",{style:{textAlign:"right",paddingTop:"2mm",fontSize:"9pt",color:"#666"},children:B.paymentMethod==="cash"?"Tin mt":B.paymentMethod==="bank"?"Chuyn khon":B.paymentMethod})]})]})})}),s.jsx("div",{style:{marginTop:"8mm",paddingTop:"4mm",borderTop:"1px dashed #999",color:"#000"},children:s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"10pt"},children:[s.jsxs("div",{style:{textAlign:"center",width:"45%"},children:[s.jsx("p",{style:{fontWeight:"bold",margin:"0 0 10mm 0",color:"#000"},children:"Khch hng"}),s.jsx("p",{style:{margin:"0",fontSize:"9pt",color:"#666"},children:"(K v ghi r h tn)"})]}),s.jsxs("div",{style:{textAlign:"center",width:"45%"},children:[s.jsx("p",{style:{fontWeight:"bold",margin:"0 0 10mm 0",color:"#000"},children:"Nhn vin"}),s.jsx("p",{style:{margin:"0",fontSize:"9pt",color:"#666"},children:B.technicianName||"(K v ghi r h tn)"})]})]})}),s.jsxs("div",{style:{marginTop:"4mm",padding:"3mm",backgroundColor:"#fff9e6",border:"1px solid #ffd700",borderRadius:"2mm",fontSize:"9pt",textAlign:"center",color:"#000"},children:[s.jsx("p",{style:{margin:"0",fontStyle:"italic",color:"#000"},children:"Cm n qu khch  s dng dch v!"}),s.jsx("p",{style:{margin:"1mm 0 0 0",fontStyle:"italic",color:"#000"},children:"Vui lng gi phiu ny  i chiu khi nhn xe"})]}),s.jsxs("div",{style:{marginTop:"3mm",padding:"2mm",fontSize:"8pt",color:"#666",borderTop:"1px solid #e5e7eb",lineHeight:"1.4"},children:[s.jsx("p",{style:{margin:"0 0 1mm 0",fontWeight:"bold"},children:"Chnh sch bo hnh:"}),s.jsxs("ul",{style:{margin:"0",paddingLeft:"5mm",listStyleType:"disc"},children:[s.jsx("li",{children:"Bo hnh p dng cho ph tng chnh hng v li k thut do th"}),s.jsx("li",{children:"Khng bo hnh i vi va chm, ng xe, ngp nc sau khi nhn xe"}),s.jsx("li",{children:"Mang theo phiu ny khi n bo hnh. Lin h hotline nu c thc mc"})]})]})]})})})]})}),B&&s.jsxs("div",{id:"work-order-receipt",className:"hidden print:block",style:{width:"148mm",margin:"0 auto",padding:"10mm",fontFamily:"Arial, sans-serif",fontSize:"11pt",color:"#000",backgroundColor:"#fff"},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start",borderBottom:"2px solid #3b82f6",paddingBottom:"3mm",marginBottom:"4mm"},children:[(Q==null?void 0:Q.logo_url)&&s.jsx("div",{style:{marginRight:"4mm"},children:s.jsx("img",{src:Q.logo_url,alt:"Logo",style:{height:"18mm",width:"auto",objectFit:"contain"}})}),s.jsxs("div",{style:{fontSize:"8.5pt",lineHeight:"1.4",flex:1},children:[s.jsx("div",{style:{fontWeight:"bold",fontSize:"11pt",marginBottom:"1mm",color:"#1e40af"},children:(Q==null?void 0:Q.store_name)||"Nhn Lm SmartCare"}),s.jsxs("div",{style:{color:"#000"},children:[""," ",(Q==null?void 0:Q.address)||"p Ph Li B, X Long Ph Thun, ng Thp"]}),s.jsxs("div",{style:{color:"#000"},children:[" ",(Q==null?void 0:Q.phone)||"0947.747.907"]}),(Q==null?void 0:Q.email)&&s.jsxs("div",{style:{color:"#000"},children:[" ",Q.email]})]}),s.jsx("div",{style:{fontSize:"8pt",lineHeight:"1.4",textAlign:"right"},children:(Q==null?void 0:Q.bank_name)&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{style:{fontWeight:"bold",marginBottom:"1mm",color:"#000"},children:[" ",Q.bank_name]}),Q.bank_account_number&&s.jsxs("div",{style:{color:"#000"},children:["STK: ",Q.bank_account_number]}),Q.bank_account_holder&&s.jsx("div",{style:{color:"#000",fontSize:"7.5pt"},children:Q.bank_account_holder}),Q.bank_qr_url&&s.jsx("div",{style:{marginTop:"2mm",display:"inline-block"},children:s.jsx("img",{src:Q.bank_qr_url,alt:"QR Banking",style:{height:"15mm",width:"15mm",objectFit:"contain"}})})]})})]}),s.jsxs("div",{style:{marginBottom:"4mm"},children:[s.jsx("div",{style:{textAlign:"center",marginBottom:"2mm"},children:s.jsx("h1",{style:{fontSize:"16pt",fontWeight:"bold",margin:"0",textTransform:"uppercase",color:"#1e40af"},children:"PHIU DCH V SA CHA"})}),s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"9pt",color:"#666"},children:[s.jsx("div",{children:new Date(B.creationDate).toLocaleString("vi-VN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}),s.jsxs("div",{style:{fontWeight:"bold"},children:["M:"," ",Li(B.id,Q==null?void 0:Q.work_order_prefix)]})]})]}),s.jsx("div",{style:{border:"1px solid #ddd",padding:"4mm",marginBottom:"4mm",borderRadius:"2mm"},children:s.jsx("table",{style:{width:"100%",borderSpacing:"0"},children:s.jsxs("tbody",{children:[s.jsxs("tr",{children:[s.jsx("td",{style:{fontWeight:"bold",width:"20%",paddingBottom:"2mm"},children:"Khch hng:"}),s.jsx("td",{style:{paddingBottom:"2mm",width:"30%"},children:B.customerName}),s.jsx("td",{style:{fontWeight:"bold",width:"15%",paddingBottom:"2mm",paddingLeft:"3mm"},children:"Thanh Lc"}),s.jsx("td",{style:{paddingBottom:"2mm"},children:B.customerPhone})]}),s.jsxs("tr",{children:[s.jsx("td",{style:{fontWeight:"bold",paddingBottom:"2mm"},children:"Loi xe:"}),s.jsx("td",{style:{paddingBottom:"2mm"},colSpan:3,children:B.vehicleModel})]}),s.jsxs("tr",{children:[s.jsx("td",{style:{fontWeight:"bold"},children:"Bin s:"}),s.jsx("td",{colSpan:3,children:B.licensePlate})]})]})})}),s.jsx("div",{style:{border:"1px solid #ddd",padding:"4mm",marginBottom:"4mm",borderRadius:"2mm"},children:s.jsxs("div",{style:{display:"flex",gap:"3mm"},children:[s.jsx("div",{style:{fontWeight:"bold",minWidth:"20%",flexShrink:0},children:"M t s c:"}),s.jsx("div",{style:{flex:1,whiteSpace:"pre-wrap"},children:B.issueDescription||"Khng c m t"})]})}),B.partsUsed&&B.partsUsed.length>0&&s.jsxs("div",{style:{marginBottom:"4mm"},children:[s.jsx("p",{style:{fontWeight:"bold",margin:"0 0 2mm 0",fontSize:"11pt"},children:"Ph tng s dng:"}),s.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",border:"1px solid #ddd"},children:[s.jsx("thead",{children:s.jsxs("tr",{style:{backgroundColor:"#f5f5f5"},children:[s.jsx("th",{style:{border:"1px solid #ddd",padding:"2mm",textAlign:"left",fontSize:"10pt"},children:"Tn ph tng"}),s.jsx("th",{style:{border:"1px solid #ddd",padding:"2mm",textAlign:"center",fontSize:"10pt",width:"15%"},children:"SL"}),s.jsx("th",{style:{border:"1px solid #ddd",padding:"2mm",textAlign:"right",fontSize:"10pt",width:"25%"},children:"n gi"}),s.jsx("th",{style:{border:"1px solid #ddd",padding:"2mm",textAlign:"right",fontSize:"10pt",width:"25%"},children:"Thnh tin"})]})}),s.jsx("tbody",{children:B.partsUsed.map((oe,ne)=>s.jsxs("tr",{children:[s.jsx("td",{style:{border:"1px solid #ddd",padding:"2mm",fontSize:"10pt"},children:oe.partName}),s.jsx("td",{style:{border:"1px solid #ddd",padding:"2mm",textAlign:"center",fontSize:"10pt"},children:oe.quantity}),s.jsx("td",{style:{border:"1px solid #ddd",padding:"2mm",textAlign:"right",fontSize:"10pt"},children:Oe(oe.price)}),s.jsx("td",{style:{border:"1px solid #ddd",padding:"2mm",textAlign:"right",fontSize:"10pt",fontWeight:"bold"},children:Oe(oe.price*oe.quantity)})]},ne))})]})]}),B.additionalServices&&B.additionalServices.length>0&&s.jsxs("div",{style:{marginBottom:"4mm"},children:[s.jsx("p",{style:{fontWeight:"bold",margin:"0 0 2mm 0",fontSize:"11pt"},children:"Dch v b sung:"}),s.jsx("ul",{style:{margin:"0",paddingLeft:"5mm"},children:B.additionalServices.map((oe,ne)=>s.jsxs("li",{style:{marginBottom:"1mm"},children:[oe.description," - ",Oe(oe.price)," x"," ",oe.quantity]},ne))})]}),s.jsx("div",{style:{border:"1px solid #ddd",padding:"4mm",marginBottom:"4mm",borderRadius:"2mm",backgroundColor:"#f9f9f9"},children:s.jsx("table",{style:{width:"100%",borderSpacing:"0"},children:s.jsxs("tbody",{children:[s.jsxs("tr",{children:[s.jsx("td",{style:{fontWeight:"bold",paddingBottom:"2mm",fontSize:"10pt"},children:"Tin ph tng:"}),s.jsx("td",{style:{textAlign:"right",paddingBottom:"2mm",fontSize:"10pt"},children:Oe(((Ne=B.partsUsed)==null?void 0:Ne.reduce((oe,ne)=>oe+ne.price*ne.quantity,0))||0)})]}),s.jsxs("tr",{children:[s.jsx("td",{style:{fontWeight:"bold",paddingBottom:"2mm",fontSize:"10pt"},children:"Gi cng/t hng:"}),s.jsx("td",{style:{textAlign:"right",paddingBottom:"2mm",fontSize:"10pt"},children:Oe(((De=B.additionalServices)==null?void 0:De.reduce((oe,ne)=>oe+(ne.price||0)*(ne.quantity||1),0))||0)})]}),B.discount!=null&&B.discount>0&&s.jsxs("tr",{children:[s.jsx("td",{style:{fontWeight:"bold",paddingBottom:"2mm",fontSize:"10pt",color:"#e74c3c"},children:"Gim gi:"}),s.jsxs("td",{style:{textAlign:"right",paddingBottom:"2mm",fontSize:"10pt",color:"#e74c3c"},children:["-",Oe(B.discount)]})]}),s.jsxs("tr",{style:{borderTop:"2px solid #333"},children:[s.jsx("td",{style:{fontWeight:"bold",paddingTop:"2mm",fontSize:"12pt"},children:"TNG CNG:"}),s.jsxs("td",{style:{textAlign:"right",paddingTop:"2mm",fontSize:"12pt",fontWeight:"bold",color:"#2563eb"},children:[Oe(B.total)," "]})]}),B.totalPaid!=null&&B.totalPaid>0&&s.jsxs("tr",{children:[s.jsx("td",{style:{fontWeight:"bold",paddingTop:"2mm",fontSize:"10pt",color:"#16a34a"},children:" thanh ton:"}),s.jsx("td",{style:{textAlign:"right",paddingTop:"2mm",fontSize:"10pt",color:"#16a34a"},children:Oe(B.totalPaid)})]}),B.remainingAmount!=null&&B.remainingAmount>0&&s.jsxs("tr",{children:[s.jsx("td",{style:{fontWeight:"bold",fontSize:"11pt",color:"#dc2626"},children:"Cn li:"}),s.jsx("td",{style:{textAlign:"right",fontSize:"11pt",fontWeight:"bold",color:"#dc2626"},children:Oe(B.remainingAmount)})]}),B.paymentMethod&&s.jsxs("tr",{children:[s.jsx("td",{style:{paddingTop:"2mm",fontSize:"9pt",color:"#666"},children:"Hnh thc thanh ton:"}),s.jsx("td",{style:{textAlign:"right",paddingTop:"2mm",fontSize:"9pt",color:"#666"},children:B.paymentMethod==="cash"?"Tin mt":B.paymentMethod==="bank"?"Chuyn khon":B.paymentMethod})]})]})})}),s.jsx("div",{style:{marginTop:"8mm",paddingTop:"4mm",borderTop:"1px dashed #999"},children:s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"10pt"},children:[s.jsxs("div",{style:{textAlign:"center",width:"45%"},children:[s.jsx("p",{style:{fontWeight:"bold",margin:"0 0 10mm 0"},children:"Khch hng"}),s.jsx("p",{style:{margin:"0",fontSize:"9pt",color:"#666"},children:"(K v ghi r h tn)"})]}),s.jsxs("div",{style:{textAlign:"center",width:"45%"},children:[s.jsx("p",{style:{fontWeight:"bold",margin:"0 0 10mm 0"},children:"Nhn vin"}),s.jsx("p",{style:{margin:"0",fontSize:"9pt",color:"#666"},children:B.technicianName||"(K v ghi r h tn)"})]})]})}),s.jsxs("div",{style:{marginTop:"4mm",padding:"3mm",backgroundColor:"#fff9e6",border:"1px solid #ffd700",borderRadius:"2mm",fontSize:"9pt",textAlign:"center"},children:[s.jsx("p",{style:{margin:"0",fontStyle:"italic"},children:"Cm n qu khch  s dng dch v!"}),s.jsx("p",{style:{margin:"1mm 0 0 0",fontStyle:"italic"},children:"Vui lng gi phiu ny  i chiu khi nhn xe"})]}),s.jsxs("div",{style:{marginTop:"3mm",padding:"2mm",fontSize:"8pt",color:"#666",borderTop:"1px solid #e5e7eb",lineHeight:"1.4"},children:[s.jsx("p",{style:{margin:"0 0 1mm 0",fontWeight:"bold"},children:"Chnh sch bo hnh:"}),s.jsxs("ul",{style:{margin:"0",paddingLeft:"5mm",listStyleType:"disc"},children:[s.jsx("li",{children:"Bo hnh p dng cho ph tng chnh hng v li k thut do th"}),s.jsx("li",{children:"Khng bo hnh i vi va chm, ng xe, ngp nc sau khi nhn xe"}),s.jsx("li",{children:"Mang theo phiu ny khi n bo hnh. Lin h hotline nu c thc mc"})]})]})]}),je&&me&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl w-full max-w-md",children:[s.jsxs("div",{className:"bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 px-6 py-4 flex items-center justify-between rounded-t-xl",children:[s.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:"Xc nhn hy phiu"}),s.jsx("button",{onClick:()=>{be(!1),ie(null)},className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-300","aria-label":"ng",children:""})]}),s.jsxs("div",{className:"p-6 space-y-4",children:[s.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4",children:[s.jsxs("p",{className:"text-sm text-yellow-800 dark:text-yellow-200",children:[" ",s.jsx("strong",{children:"Cnh bo:"})," Hnh ng ny s:"]}),s.jsxs("ul",{className:"mt-2 text-sm text-yellow-700 dark:text-yellow-300 list-disc list-inside space-y-1",children:[s.jsx("li",{children:"Hon tr tn kho cc ph tng  s dng"}),s.jsxs("li",{children:["Hon tin ",Oe(me.totalPaid||0)," ","cho khch"]}),s.jsx("li",{children:'nh du phiu l " hy"'})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["L do hy phiu ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("textarea",{value:le,onChange:oe=>Ee(oe.target.value),placeholder:"Vd: Khch hng khng ng  chi ph, sa nhm xe...",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 resize-none",rows:3})]}),s.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 rounded-lg p-3 space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Phiu:"}),s.jsxs("span",{className:"font-medium text-slate-900 dark:text-slate-100",children:["#",Li(me.id,Q==null?void 0:Q.work_order_prefix).split("-").pop()]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Khch hng:"}),s.jsx("span",{className:"font-medium text-slate-900 dark:text-slate-100",children:me.customerName})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Ph tng:"}),s.jsxs("span",{className:"font-medium text-slate-900 dark:text-slate-100",children:[((Ie=me.partsUsed)==null?void 0:Ie.length)||0," mn"]})]}),s.jsxs("div",{className:"flex justify-between border-t border-slate-200 dark:border-slate-600 pt-2",children:[s.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"S tin hon:"}),s.jsx("span",{className:"font-bold text-red-600 dark:text-red-400",children:Oe(me.totalPaid||0)})]})]})]}),s.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 flex justify-end gap-3 rounded-b-xl",children:[s.jsx("button",{onClick:()=>{be(!1),ie(null)},className:"px-4 py-2 text-slate-700 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-600 rounded-lg font-medium",children:"Hy b"}),s.jsx("button",{onClick:Or,disabled:!le.trim(),className:"px-4 py-2 bg-red-600 hover:bg-red-700 disabled:bg-red-300 dark:disabled:bg-red-900 text-white rounded-lg font-medium disabled:cursor-not-allowed",children:"Xc nhn hy phiu"})]})]})}),at&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl w-full max-w-3xl max-h-[90vh] overflow-hidden flex flex-col",children:[s.jsxs("div",{className:"px-6 py-4 border-b border-slate-200 dark:border-slate-700 flex items-center justify-between",children:[s.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:Me?"Sa mu sa cha":"To mu sa cha mi"}),s.jsx("button",{onClick:()=>{lt(!1),ye(null)},className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-300",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsx("div",{className:"flex-1 overflow-y-auto px-6 py-4",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:["Tn mu ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",placeholder:"VD: Thay du ng c",value:ut.name,onChange:oe=>nt({...ut,name:oe.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"M t"}),s.jsx("textarea",{rows:2,placeholder:"M t chi tit dch v...",value:ut.description,onChange:oe=>nt({...ut,description:oe.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 resize-none"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Thi gian (pht)"}),s.jsx("input",{type:"number",min:"5",step:"5",value:ut.duration,onChange:oe=>nt({...ut,duration:Number(oe.target.value)}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:["Chi ph cng ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"number",min:"0",step:"10000",placeholder:"0",value:ut.laborCost||"",onChange:oe=>nt({...ut,laborCost:Number(oe.target.value)}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Ph tng cn thit"}),s.jsxs("button",{onClick:wr,className:"px-3 py-1 bg-blue-500 hover:bg-blue-600 text-white rounded text-sm flex items-center gap-1",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Thm ph tng"]})]}),ut.parts.length===0?s.jsx("div",{className:"text-center py-8 text-slate-500 dark:text-slate-400 text-sm",children:'Cha c ph tng no. Nhn "Thm ph tng"  thm.'}):s.jsx("div",{className:"space-y-2",children:ut.parts.map((oe,ne)=>s.jsxs("div",{className:"flex gap-2 items-start p-3 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:[s.jsxs("div",{className:"flex-1 grid grid-cols-4 gap-2",children:[s.jsxs("div",{className:"col-span-2 relative template-part-input",children:[s.jsx("input",{type:"text",placeholder:"Tn ph tng",value:oe.name,onChange:ze=>Et(ne,"name",ze.target.value),onFocus:()=>{We(ne),Dt(oe.name)},className:"w-full px-2 py-1.5 border border-slate-300 dark:border-slate-600 rounded bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 text-sm"}),ot===ne&&s.jsx("div",{className:"absolute z-[60] top-full left-0 right-0 mt-1 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded-lg shadow-lg max-h-[200px] overflow-y-auto",children:Br.length>0?Br.map(ze=>{var st,Ze;return s.jsx("button",{type:"button",onClick:()=>ur(ne,ze),className:"w-full px-3 py-2 text-left hover:bg-slate-100 dark:hover:bg-slate-700 border-b border-slate-200 dark:border-slate-700 last:border-b-0",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-medium text-slate-900 dark:text-slate-100 text-sm",children:ze.name}),s.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:["Tn kho:"," ",((st=ze.stock)==null?void 0:st[o||""])||0," ","ci"]})]}),s.jsx("div",{className:"text-sm font-medium text-blue-600 dark:text-blue-400",children:Oe(((Ze=ze.retailPrice)==null?void 0:Ze[o||""])||0)})]})},ze.id)}):s.jsx("div",{className:"px-3 py-4 text-center text-sm text-slate-500 dark:text-slate-400",children:!f||f.length===0?"Khng c ph tng trong kho. Vui lng thm ph tng trc.":"Khng tm thy ph tng ph hp"})})]}),s.jsx("input",{type:"number",min:"1",placeholder:"SL",value:oe.quantity,onChange:ze=>Et(ne,"quantity",Number(ze.target.value)),className:"px-2 py-1.5 border border-slate-300 dark:border-slate-600 rounded bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 text-sm"}),s.jsx("input",{type:"number",min:"0",step:"1000",placeholder:"n gi",value:oe.price||"",onChange:ze=>Et(ne,"price",Number(ze.target.value)),className:"px-2 py-1.5 border border-slate-300 dark:border-slate-600 rounded bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 text-sm"})]}),s.jsx("button",{onClick:()=>Ke(ne),className:"p-1.5 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded",title:"Xa",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},ne))})]}),(ut.laborCost>0||ut.parts.length>0)&&s.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:s.jsxs("div",{className:"text-sm space-y-1",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Chi ph cng:"}),s.jsx("span",{className:"font-medium text-slate-900 dark:text-slate-100",children:Oe(ut.laborCost)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Ph tng:"}),s.jsx("span",{className:"font-medium text-slate-900 dark:text-slate-100",children:Oe(ut.parts.reduce((oe,ne)=>oe+ne.price*ne.quantity,0))})]}),s.jsxs("div",{className:"flex justify-between pt-2 border-t border-blue-200 dark:border-blue-700",children:[s.jsx("span",{className:"font-medium text-slate-900 dark:text-slate-100",children:"Tng c tnh:"}),s.jsx("span",{className:"font-bold text-blue-600 dark:text-blue-400",children:Oe(ut.laborCost+ut.parts.reduce((oe,ne)=>oe+ne.price*ne.quantity,0))})]})]})})]})}),s.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-700 px-6 py-4 flex justify-end gap-3 bg-slate-50 dark:bg-slate-800/50",children:[s.jsx("button",{onClick:()=>{lt(!1),ye(null)},className:"px-4 py-2 bg-slate-200 dark:bg-slate-700 hover:bg-slate-300 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-200 rounded-lg",children:"Hy"}),s.jsx("button",{onClick:Er,className:"px-6 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg font-medium",children:Me?"Cp nht":"To mu"})]})]})})]})}const xje=({order:e,onClose:t,onSave:r,parts:n,partsLoading:a,customers:i,employees:l,upsertCustomer:o,setCashTransactions:c,setPaymentSources:d,paymentSources:f,currentBranchId:p,storeSettings:y})=>{const g=["Honda Wave RSX","Honda Wave Alpha","Honda Blade","Honda Future","Honda Winner X","Honda Vision","Honda Air Blade","Honda SH Mode","Honda SH 125i","Honda SH 150i","Honda SH 160i","Honda SH 350i","Honda Vario","Honda Lead","Honda PCX","Honda ADV","Yamaha Exciter","Yamaha Sirius","Yamaha Jupiter","Yamaha Grande","Yamaha Janus","Yamaha FreeGo","Yamaha Latte","Yamaha NVX","Yamaha XSR","Suzuki Raider","Suzuki Axelo","Suzuki Satria","Suzuki GD110","Suzuki Impulse","Suzuki Address","Suzuki Revo","SYM Elite","SYM Galaxy","SYM Star","SYM Attila","SYM Angela","SYM Passing","Piaggio Liberty","Piaggio Medley","Vespa Sprint","Vespa Primavera","Vespa GTS","VinFast Klara","VinFast Evo200","VinFast Ludo","VinFast Impes","VinFast Theon","Khc"],{profile:N}=Dc(),{mutateAsync:w}=dje(),{mutateAsync:k}=uje(),[S,O]=T.useState(()=>e!=null&&e.id?e:{id:(e==null?void 0:e.id)||"",customerName:(e==null?void 0:e.customerName)||"",customerPhone:(e==null?void 0:e.customerPhone)||"",vehicleModel:(e==null?void 0:e.vehicleModel)||"",licensePlate:(e==null?void 0:e.licensePlate)||"",vehicleId:(e==null?void 0:e.vehicleId)||"",issueDescription:(e==null?void 0:e.issueDescription)||"",technicianName:(e==null?void 0:e.technicianName)||"",status:(e==null?void 0:e.status)||"Tip nhn",laborCost:(e==null?void 0:e.laborCost)||0,discount:(e==null?void 0:e.discount)||0,partsUsed:(e==null?void 0:e.partsUsed)||[],total:(e==null?void 0:e.total)||0,branchId:(e==null?void 0:e.branchId)||p,paymentStatus:(e==null?void 0:e.paymentStatus)||"unpaid",creationDate:(e==null?void 0:e.creationDate)||new Date().toISOString()}),[E,D]=T.useState(""),[q,W]=T.useState([]),[R,U]=T.useState(!1),[z,Z]=T.useState(0),[H,K]=T.useState(!1),[J,ae]=T.useState(!1),[se,ue]=T.useState(0),[fe,ke]=T.useState(!1),[_e,Le]=T.useState(!1),[xe,B]=T.useState({name:"",phone:"",vehicleModel:"",licensePlate:""}),[ee,Y]=T.useState(""),[re,Q]=T.useState(!1),[Ce,me]=T.useState(!1),[ie,je]=T.useState({model:"",licensePlate:""}),be=i.find(Ke=>Ke.phone===S.customerPhone),le=(be==null?void 0:be.vehicles)||[];le.length>1;const[Ee,Me]=T.useState("amount"),[ye,at]=T.useState(0),[lt,ut]=T.useState(!1),[nt,ot]=T.useState([]),[We,Kt]=T.useState({description:"",quantity:1,price:0,costPrice:0});T.useEffect(()=>{e!=null&&e.partsUsed?W(e.partsUsed):W([]),e!=null&&e.customerName?Y(e.customerName):Y(""),e!=null&&e.additionalServices?ot(e.additionalServices):ot([]),e!=null&&e.depositAmount?(ue(e.depositAmount),ke(!0)):(ue(0),ke(!1)),e!=null&&e.additionalPayment?(Z(e.additionalPayment),K(!0)):(Z(0),K(!1)),Me("amount"),at(0)},[e]);const Dt=T.useMemo(()=>ee.trim()?i.filter(Ke=>{var Et;return Ke.name.toLowerCase().includes(ee.toLowerCase())||((Et=Ke.phone)==null?void 0:Et.toLowerCase().includes(ee.toLowerCase()))}):i.slice(0,10),[i,ee]);T.useEffect(()=>{const Ke=Et=>{const ur=Et.target;ur.closest(".customer-search-container")||Q(!1),ur.closest(".vehicle-search-container")||ae(!1)};return document.addEventListener("mousedown",Ke),()=>document.removeEventListener("mousedown",Ke)},[]);const fr=Ke=>{O({...S,vehicleId:Ke.id,vehicleModel:Ke.model,licensePlate:Ke.licensePlate}),ae(!1)},xr=()=>{if(!be)return;if(!ie.model.trim()||!ie.licensePlate.trim()){Xe.error("Vui lng nhp y  loi xe v bin s");return}const Ke=`VEH-${Date.now()}`,Et=be.vehicles||[],ur=[...Et,{id:Ke,model:ie.model.trim(),licensePlate:ie.licensePlate.trim(),isPrimary:Et.length===0}];o({...be,vehicles:ur}),O({...S,vehicleId:Ke,vehicleModel:ie.model.trim(),licensePlate:ie.licensePlate.trim()}),je({model:"",licensePlate:""}),me(!1),Xe.success(" thm xe mi")},nr=q.reduce((Ke,Et)=>Ke+(Et.price||0)*(Et.quantity||0),0),Mr=nt.reduce((Ke,Et)=>Ke+(Et.price||0)*(Et.quantity||0),0),rr=(S.laborCost||0)+nr+Mr,Gt=S.discount||0,Vt=Math.max(0,rr-Gt);console.log("Tinh toan:",{laborCost:S.laborCost,partsTotal:nr,servicesTotal:Mr,subtotal:rr,discount:Gt,total:Vt});const cr=se||0,br=H?z:0,ar=cr+br,xt=Math.max(0,Vt-ar),yr=Tk(),Ge=async(Ke,Et,ur,Br)=>{var Tr;if(!(Et<=0)){console.log("[createCustomerDebtIfNeeded] CALLED with:",{workOrderId:Ke.id,totalAmount:ur,paidAmount:Br,remainingAmount:Et,customerName:Ke.customerName,timestamp:new Date().toISOString()});try{const Zt=Ke.customerPhone||Ke.id||`CUST-ANON-${Date.now()}`,Pr=((Tr=Ke.customerName)==null?void 0:Tr.trim())||Ke.customerPhone||"Khch vng lai",sr=Li(Ke.id,y==null?void 0:y.work_order_prefix).split("-").pop()||"";let Or=`${Ke.vehicleModel||"Xe"} (Phiu sa cha #${sr})`;Ke.issueDescription&&(Or+=`
Vn : ${Ke.issueDescription}`),Ke.partsUsed&&Ke.partsUsed.length>0&&(Or+=`

Ph tng  thay:`,Ke.partsUsed.forEach(Ir=>{Or+=`
   ${Ir.quantity} x ${Ir.partName} - ${Oe(Ir.price*Ir.quantity)}`})),Ke.additionalServices&&Ke.additionalServices.length>0&&(Or+=`

Dch v:`,Ke.additionalServices.forEach(Ir=>{Or+=`
   ${Ir.quantity} x ${Ir.description} - ${Oe(Ir.price*Ir.quantity)}`})),Ke.laborCost&&Ke.laborCost>0&&(Or+=`

Cng lao ng: ${Oe(Ke.laborCost)}`),Ke.discount&&Ke.discount>0&&(Or+=`
Gim gi: -${Oe(Ke.discount)}`);const qr=(N==null?void 0:N.full_name)||"N/A";Or+=`

NV: ${qr}`,Ke.technicianName&&(Or+=`
NVK thut: ${Ke.technicianName}`);const Lr={customerId:Zt,customerName:Pr,phone:Ke.customerPhone||null,licensePlate:Ke.licensePlate||null,description:Or,totalAmount:ur,paidAmount:Br,remainingAmount:Et,createdDate:new Date().toISOString().split("T")[0],branchId:p,workOrderId:Ke.id};console.log("[ServiceManager] createCustomerDebt payload:",Lr);const An=await yr.mutateAsync(Lr);console.log("[ServiceManager] createCustomerDebt result:",An),Xe.success(` to/cp nht cng n ${Et.toLocaleString()} (M: ${(An==null?void 0:An.id)||"N/A"})`)}catch(Zt){console.error("Error creating/updating customer debt:",Zt),Xe.error("Khng th to/cp nht cng n t ng")}}},vt=async()=>{var Br,Tr;if(!((Br=S.customerName)!=null&&Br.trim())){Xe.error("Vui lng nhp tn khch hng");return}if(!((Tr=S.customerPhone)!=null&&Tr.trim())){Xe.error("Vui lng nhp s in thoi");return}if(!/^[0-9]{10,11}$/.test(S.customerPhone.trim())){Xe.error("S in thoi khng hp l (cn 10-11 ch s)");return}if(S.customerName&&S.customerPhone&&!i.find(Pr=>Pr.phone===S.customerPhone)){const Pr=i.find(qr=>qr.phone===S.customerPhone&&S.customerName&&qr.name.toLowerCase()!==S.customerName.toLowerCase());Pr&&Xe.warning(`ST  tn ti cho khch "${Pr.name}". C th trng lp?`);const sr=`VEH-${Date.now()}`,Or=[];(S.vehicleModel||S.licensePlate)&&Or.push({id:sr,model:S.vehicleModel||"",licensePlate:S.licensePlate||"",isPrimary:!0}),o({id:`CUST-${Date.now()}`,name:S.customerName,phone:S.customerPhone,vehicles:Or.length>0?Or:void 0,vehicleModel:S.vehicleModel,licensePlate:S.licensePlate,status:"active",segment:"New",loyaltyPoints:0,totalSpent:0,visitCount:1,lastVisit:new Date().toISOString(),created_at:new Date().toISOString()})}let Et="unpaid";const ur=((e==null?void 0:e.depositAmount)||0)+((e==null?void 0:e.additionalPayment)||0);ur>=Vt?Et="paid":ur>0&&(Et="partial");try{const Pr={id:(e==null?void 0:e.id)||`${(y==null?void 0:y.work_order_prefix)||"SC"}-${Date.now()}`,customername:S.customerName||"",customerphone:S.customerPhone||"",vehicleid:S.vehicleId,vehiclemodel:S.vehicleModel||"",licenseplate:S.licensePlate||"",issuedescription:S.issueDescription||"",technicianname:S.technicianName||"",status:S.status||"Tip nhn",laborcost:S.laborCost||0,discount:Gt,partsused:q,additionalservices:nt.length>0?nt:void 0,total:Vt,branchid:p,paymentstatus:Et,paymentmethod:S.paymentMethod||null,depositamount:(e==null?void 0:e.depositAmount)||null,totalpaid:ur>0?ur:null,remainingamount:Vt-ur,creationdate:(e==null?void 0:e.creationDate)||new Date().toISOString()};if(e!=null&&e.id){const{data:sr,error:Or}=await Ot.from("work_orders").update(Pr).eq("id",e.id).select();if(Or)throw console.error("[UPDATE ERROR]",Or),Or;console.log("[UPDATE SUCCESS]",sr)}else{console.log("[INSERT] Attempting to insert:",Pr);const{data:sr,error:Or}=await Ot.from("work_orders").insert(Pr).select();if(Or)throw console.error("[INSERT ERROR]",Or),console.error("[INSERT ERROR DETAILS]",JSON.stringify(Or,null,2)),Or;console.log("[INSERT SUCCESS]",sr)}r(Pr),Xe.success(e!=null&&e.id?" cp nht phiu":" lu phiu thnh cng"),t()}catch(Zt){console.error("Error saving work order:",Zt),Xe.error("Li khi lu phiu: "+(Zt.message||Zt.hint||"Khng xc nh"))}},$t=async()=>{var Ke,Et;if(lt){console.log("[handleSave] Already submitting, skipping...");return}ut(!0);try{if(!((Ke=S.customerName)!=null&&Ke.trim())){Xe.error("Vui lng nhp tn khch hng");return}if(!((Et=S.customerPhone)!=null&&Et.trim())){Xe.error("Vui lng nhp s in thoi");return}if(!/^[0-9]{10,11}$/.test(S.customerPhone.trim())){Xe.error("S in thoi khng hp l (cn 10-11 ch s)");return}if(Vt<=0){Xe.error("Tng tin phi ln hn 0");return}if(S.customerName&&S.customerPhone&&!i.find(Zt=>Zt.phone===S.customerPhone)){const Zt=i.find(Or=>Or.phone===S.customerPhone&&S.customerName&&Or.name.toLowerCase()!==S.customerName.toLowerCase());Zt&&Xe.warning(`ST  tn ti cho khch "${Zt.name}". C th trng lp?`);const Pr=`VEH-${Date.now()}`,sr=[];(S.vehicleModel||S.licensePlate)&&sr.push({id:Pr,model:S.vehicleModel||"",licensePlate:S.licensePlate||"",isPrimary:!0}),o({id:`CUST-${Date.now()}`,name:S.customerName,phone:S.customerPhone,vehicles:sr.length>0?sr:void 0,vehicleModel:S.vehicleModel,licensePlate:S.licensePlate,status:"active",segment:"New",loyaltyPoints:0,totalSpent:0,visitCount:1,lastVisit:new Date().toISOString(),created_at:new Date().toISOString()})}let Br="unpaid";if(ar>=Vt?Br="paid":ar>0&&(Br="partial"),!(e!=null&&e.id)&&(q.length>0||nt.length>0||se>0)){try{const Tr=`${(y==null?void 0:y.work_order_prefix)||"SC"}-${Date.now()}`,Zt=await w({id:Tr,customerName:S.customerName||"",customerPhone:S.customerPhone||"",vehicleModel:S.vehicleModel||"",licensePlate:S.licensePlate||"",issueDescription:S.issueDescription||"",technicianName:S.technicianName||"",status:S.status||"Tip nhn",laborCost:S.laborCost||0,discount:Gt,partsUsed:q,additionalServices:nt.length>0?nt:void 0,total:Vt,branchId:p,paymentStatus:Br,paymentMethod:S.paymentMethod,depositAmount:se>0?se:void 0,additionalPayment:br>0?br:void 0,totalPaid:ar>0?ar:void 0,remainingAmount:xt,creationDate:new Date().toISOString()}),Pr=Zt==null?void 0:Zt.depositTransactionId,sr=Zt==null?void 0:Zt.paymentTransactionId,Or={id:Tr,customerName:S.customerName||"",customerPhone:S.customerPhone||"",vehicleModel:S.vehicleModel||"",licensePlate:S.licensePlate||"",issueDescription:S.issueDescription||"",technicianName:S.technicianName||"",status:S.status||"Tip nhn",laborCost:S.laborCost||0,discount:Gt,partsUsed:q,additionalServices:nt.length>0?nt:void 0,total:Vt,branchId:p,depositAmount:se>0?se:void 0,depositDate:se>0?new Date().toISOString():void 0,depositTransactionId:Pr,paymentStatus:Br,paymentMethod:S.paymentMethod,additionalPayment:br>0?br:void 0,totalPaid:ar>0?ar:void 0,remainingAmount:xt,cashTransactionId:sr,paymentDate:sr?new Date().toISOString():void 0,creationDate:new Date().toISOString()};if(Pr&&se>0&&(c(qr=>[...qr,{id:Pr,type:"deposit",category:"service_deposit",amount:se,date:new Date().toISOString(),description:`t cc sa cha #${(Li(Tr,y==null?void 0:y.work_order_prefix)||"").split("-").pop()} - ${S.customerName}`,branchId:p,paymentSource:S.paymentMethod,reference:Tr}]),d(qr=>qr.map(Lr=>Lr.id===S.paymentMethod?{...Lr,balance:{...Lr.balance,[p]:(Lr.balance[p]||0)+se}}:Lr))),sr&&br>0&&(c(qr=>[...qr,{id:sr,type:"income",category:"service_income",amount:br,date:new Date().toISOString(),description:`Thu tin sa cha #${(Li(Tr,y==null?void 0:y.work_order_prefix)||"").split("-").pop()} - ${S.customerName}`,branchId:p,paymentSource:S.paymentMethod,reference:Tr}]),d(qr=>qr.map(Lr=>Lr.id===S.paymentMethod?{...Lr,balance:{...Lr.balance,[p]:(Lr.balance[p]||0)+br}}:Lr))),nt.length>0){const qr=nt.reduce((Lr,An)=>Lr+(An.costPrice||0)*An.quantity,0);if(qr>0){const Lr=`EXPENSE-${Date.now()}`;try{const{error:An}=await Ot.from("cash_transactions").insert({id:Lr,type:"expense",category:"outsourcing",amount:-qr,date:new Date().toISOString(),description:`Chi ph gia cng bn ngoi - Phiu #${Tr.split("-").pop()} - ${nt.map(Ir=>Ir.description).join(", ")}`,branchid:p,paymentsource:"cash",reference:Tr});An||(c(Ir=>[...Ir,{id:Lr,type:"expense",category:"outsourcing",amount:-qr,date:new Date().toISOString(),description:`Chi ph gia cng bn ngoi - Phiu #${Tr.split("-").pop()}`,branchId:p,paymentSource:"cash",reference:Tr}]),d(Ir=>Ir.map(Nn=>Nn.id==="cash"?{...Nn,balance:{...Nn.balance,[p]:(Nn.balance[p]||0)-qr}}:Nn)),Xe.info(` to phiu chi ${Oe(qr)} cho gia cng bn ngoi`))}catch(An){console.error("Error creating outsourcing expense:",An)}}}r(Or),S.status==="Tr my"&&xt>0&&(console.log("[handleSave] Creating debt with finalOrder:",{id:Or.id,customerName:Or.customerName,customerPhone:Or.customerPhone,licensePlate:Or.licensePlate,vehicleModel:Or.vehicleModel}),await Ge(Or,xt,Vt,ar)),t()}catch(Tr){console.error("Error creating work order (atomic):",Tr)}return}if(e!=null&&e.id){console.log("[handleSave] UPDATE block - Order ID:",e.id,"Status:",S.status);try{console.log("[handleSave] Calling updateWorkOrderAtomicAsync...");const Tr=await k({id:e.id,customerName:S.customerName||"",customerPhone:S.customerPhone||"",vehicleModel:S.vehicleModel||"",licensePlate:S.licensePlate||"",issueDescription:S.issueDescription||"",technicianName:S.technicianName||"",status:S.status||"Tip nhn",laborCost:S.laborCost||0,discount:Gt,partsUsed:q,additionalServices:nt.length>0?nt:void 0,total:Vt,branchId:p,paymentStatus:Br,paymentMethod:S.paymentMethod,depositAmount:se>0?se:void 0,additionalPayment:br>0?br:void 0,totalPaid:ar>0?ar:void 0,remainingAmount:xt}),Zt=Tr.workOrder,Pr=Tr==null?void 0:Tr.depositTransactionId,sr=Tr==null?void 0:Tr.paymentTransactionId,Or=Zt?{id:Zt.id||e.id,customerName:Zt.customername||Zt.customerName||e.customerName,customerPhone:Zt.customerphone||Zt.customerPhone||e.customerPhone,vehicleModel:Zt.vehiclemodel||Zt.vehicleModel||e.vehicleModel,licensePlate:Zt.licenseplate||Zt.licensePlate||e.licensePlate,issueDescription:Zt.issuedescription||Zt.issueDescription||e.issueDescription||"",technicianName:Zt.technicianname||Zt.technicianName||e.technicianName||"",status:Zt.status||e.status,laborCost:Zt.laborcost||Zt.laborCost||e.laborCost||0,discount:Zt.discount||e.discount||0,partsUsed:Zt.partsused||Zt.partsUsed||e.partsUsed||[],additionalServices:Zt.additionalservices||Zt.additionalServices||e.additionalServices,total:Zt.total||e.total,branchId:Zt.branchid||Zt.branchId||e.branchId,depositAmount:Zt.depositamount||Zt.depositAmount||e.depositAmount,depositDate:Zt.depositdate||Zt.depositDate||e.depositDate,depositTransactionId:Pr||e.depositTransactionId,paymentStatus:Zt.paymentstatus||Zt.paymentStatus||e.paymentStatus,paymentMethod:Zt.paymentmethod||Zt.paymentMethod||e.paymentMethod,additionalPayment:Zt.additionalpayment||Zt.additionalPayment||e.additionalPayment,totalPaid:Zt.totalpaid||Zt.totalPaid||e.totalPaid,remainingAmount:Zt.remainingamount||Zt.remainingAmount||e.remainingAmount,cashTransactionId:sr||e.cashTransactionId,paymentDate:Zt.paymentdate||Zt.paymentDate||e.paymentDate,creationDate:Zt.creationdate||Zt.creationDate||e.creationDate}:{...e,customerName:S.customerName||e.customerName,customerPhone:S.customerPhone||e.customerPhone,vehicleModel:S.vehicleModel||e.vehicleModel,licensePlate:S.licensePlate||e.licensePlate,issueDescription:S.issueDescription||e.issueDescription,technicianName:S.technicianName||e.technicianName,status:S.status||e.status,laborCost:S.laborCost||e.laborCost,discount:Gt,partsUsed:q,additionalServices:nt.length>0?nt:e.additionalServices,total:Vt,depositAmount:se,depositTransactionId:Pr||e.depositTransactionId,paymentStatus:Br,paymentMethod:S.paymentMethod||e.paymentMethod,additionalPayment:br,totalPaid:ar,remainingAmount:xt,cashTransactionId:sr||e.cashTransactionId,paymentDate:sr?new Date().toISOString():e.paymentDate};Pr&&se>e.depositAmount&&(c(qr=>[...qr,{id:Pr,type:"deposit",category:"service_deposit",amount:se-(e.depositAmount||0),date:new Date().toISOString(),description:`t cc b sung #${(Li(e.id,y==null?void 0:y.work_order_prefix)||"").split("-").pop()} - ${S.customerName}`,branchId:p,paymentSource:S.paymentMethod,reference:e.id}]),d(qr=>qr.map(Lr=>Lr.id===S.paymentMethod?{...Lr,balance:{...Lr.balance,[p]:(Lr.balance[p]||0)+(se-(e.depositAmount||0))}}:Lr))),sr&&br>(e.additionalPayment||0)&&(c(qr=>[...qr,{id:sr,type:"income",category:"service_income",amount:br-(e.additionalPayment||0),date:new Date().toISOString(),description:`Thu tin b sung #${(Li(e.id,y==null?void 0:y.work_order_prefix)||"").split("-").pop()} - ${S.customerName}`,branchId:p,paymentSource:S.paymentMethod,reference:e.id}]),d(qr=>qr.map(Lr=>Lr.id===S.paymentMethod?{...Lr,balance:{...Lr.balance,[p]:(Lr.balance[p]||0)+(br-(e.additionalPayment||0))}}:Lr))),console.log("[handleSave] updateWorkOrderAtomicAsync SUCCESS - Response:",Tr),r(Or),S.status==="Tr my"&&xt>0&&await Ge(Or,xt,Vt,ar),t()}catch(Tr){console.error("[handleSave] Error updating work order (atomic):",Tr)}return}console.warn("[handleSave] Unexpected code path - no atomic create/update was called")}finally{ut(!1)}},Yt=Ke=>{const Et=q.find(ur=>ur.partId===Ke.id);W(Et?q.map(ur=>ur.partId===Ke.id?{...ur,quantity:ur.quantity+1}:ur):[...q,{partId:Ke.id,partName:Ke.name,sku:Ke.sku||"",quantity:1,price:Ke.retailPrice[p]||0}]),U(!1),D("")},Er=T.useMemo(()=>n.filter(Ke=>{var ur;return(((ur=Ke.stock)==null?void 0:ur[p])||0)>0}),[n,p]),wr=T.useMemo(()=>E.trim()?Er.filter(Ke=>{var Et;return Ke.name.toLowerCase().includes(E.toLowerCase())||((Et=Ke.sku)==null?void 0:Et.toLowerCase().includes(E.toLowerCase()))}):Er,[Er,E]);return s.jsxs("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-end md:items-center justify-center p-0 md:p-4",children:[s.jsxs("div",{className:"bg-white dark:bg-slate-800 w-full h-full md:h-auto md:max-h-[90vh] md:max-w-5xl rounded-t-3xl md:rounded-xl shadow-2xl md:shadow-lg flex flex-col overflow-hidden",children:[s.jsxs("div",{className:"bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 px-4 py-3 md:px-6 md:py-4 flex items-center justify-between rounded-t-3xl md:rounded-t-xl flex-shrink-0",children:[s.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:S.id?`Chi tit phiu sa cha - ${Li(S.id,y==null?void 0:y.work_order_prefix)}`:"To phiu sa cha mi"}),s.jsx("button",{onClick:t,className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-300","aria-label":"ng",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"w-5 h-5",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsxs("div",{className:"px-4 py-5 md:px-6 md:py-6 space-y-6 overflow-y-auto flex-1 pb-24 md:pb-6",children:[s.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300",children:"Thng tin Khch hng & S c"}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:["Khch hng ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("div",{className:"flex-1 relative customer-search-container",children:[s.jsx("input",{type:"text",placeholder:"Tm khch hng...",value:ee,onChange:Ke=>{Y(Ke.target.value),Q(!0),O({...S,customerName:Ke.target.value})},onFocus:()=>Q(!0),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"}),re&&s.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:Dt.length>0?Dt.map(Ke=>s.jsx("button",{type:"button",onClick:()=>{var ur,Br;const Et=((ur=Ke.vehicles)==null?void 0:ur.find(Tr=>Tr.isPrimary))||((Br=Ke.vehicles)==null?void 0:Br[0]);O({...S,customerName:Ke.name,customerPhone:Ke.phone,vehicleId:Et==null?void 0:Et.id,vehicleModel:(Et==null?void 0:Et.model)||Ke.vehicleModel||"",licensePlate:(Et==null?void 0:Et.licensePlate)||Ke.licensePlate||""}),Y(Ke.name),Q(!1)},className:"w-full text-left px-3 py-2 hover:bg-slate-100 dark:hover:bg-slate-600 border-b border-slate-200 dark:border-slate-600 last:border-0",children:s.jsx("div",{className:"flex items-start justify-between gap-2",children:s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"font-medium text-slate-900 dark:text-slate-100 text-sm truncate",children:Ke.name}),s.jsxs("div",{className:"text-xs text-slate-600 dark:text-slate-400 mt-0.5",children:[" ",Ke.phone]}),(Ke.vehicleModel||Ke.licensePlate)&&s.jsxs("div",{className:"text-xs text-blue-600 dark:text-blue-400 mt-0.5 flex items-center gap-1",children:[s.jsxs("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[s.jsx("circle",{cx:"6",cy:"17",r:"2"}),s.jsx("circle",{cx:"18",cy:"17",r:"2"}),s.jsx("path",{d:"M4 17h2l4-6h2l2 3h4"})]}),Ke.vehicleModel&&s.jsx("span",{children:Ke.vehicleModel}),Ke.licensePlate&&s.jsxs("span",{className:"font-mono font-medium",children:[Ke.vehicleModel&&""," ",Ke.licensePlate]})]})]})})},Ke.id)):s.jsx("div",{className:"px-3 py-4 text-center text-sm text-slate-500 dark:text-slate-400",children:i.length===0?"Cha c khch hng no. Nhn '+'  thm khch hng mi.":"Khng tm thy khch hng ph hp"})})]}),s.jsx("button",{type:"button",onClick:()=>Le(!0),className:"px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg font-medium text-xl",title:"Thm khch hng mi",children:"+"})]}),S.customerName&&S.customerPhone&&s.jsx("div",{className:"mt-2 p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx("div",{className:"text-sm font-medium text-slate-900 dark:text-slate-100",children:S.customerName}),s.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:s.jsxs("span",{className:"inline-flex items-center gap-1",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"w-3.5 h-3.5",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 6.75c0 8.284 6.716 15 15 15 .828 0 1.5-.672 1.5-1.5v-2.25a1.5 1.5 0 00-1.5-1.5h-1.158a1.5 1.5 0 00-1.092.468l-.936.996a1.5 1.5 0 01-1.392.444 12.035 12.035 0 01-7.29-7.29 1.5 1.5 0 01.444-1.392l.996-.936a1.5 1.5 0 00.468-1.092V6.75A1.5 1.5 0 006.75 5.25H4.5c-.828 0-1.5.672-1.5 1.5z"})}),S.customerPhone]})}),(S.vehicleModel||S.licensePlate)&&s.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:s.jsxs("span",{className:"inline-flex items-center gap-1",children:[s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"w-3.5 h-3.5",children:[s.jsx("circle",{cx:"6",cy:"17",r:"2"}),s.jsx("circle",{cx:"18",cy:"17",r:"2"}),s.jsx("path",{d:"M4 17h2l4-6h2l2 3h4"})]}),S.vehicleModel," ",S.licensePlate&&`- ${S.licensePlate}`]})})]}),s.jsx("button",{type:"button",onClick:()=>{Y(""),O({...S,customerName:"",customerPhone:"",vehicleId:void 0,vehicleModel:"",licensePlate:""})},className:"text-slate-400 hover:text-red-500 text-sm flex items-center",title:"Xa khch hng",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"w-4 h-4","aria-hidden":"true",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]})}),be&&s.jsxs("div",{className:"mt-3 space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:[le.length>0?"Chn xe":"Xe ca khch hng",le.length>0&&s.jsxs("span",{className:"text-xs text-slate-500 ml-1",children:["(",le.length," xe)"]})]}),s.jsx("button",{type:"button",onClick:()=>me(!0),className:"px-3 py-1 bg-blue-500 hover:bg-blue-600 text-white rounded text-sm font-medium",title:"Thm xe mi",children:"+ Thm xe"})]}),le.length>0?s.jsx("div",{className:"space-y-2",children:le.map(Ke=>{const Et=S.vehicleId===Ke.id,ur=Ke.isPrimary;return s.jsx("button",{type:"button",onClick:()=>fr(Ke),className:`w-full text-left px-3 py-2.5 rounded-lg border-2 transition-all ${Et?"border-blue-500 bg-blue-50 dark:bg-blue-900/30":"border-slate-200 dark:border-slate-600 hover:border-blue-300 dark:hover:border-blue-700 bg-white dark:bg-slate-700"}`,children:s.jsxs("div",{className:"flex items-center gap-2",children:[ur&&s.jsx("span",{className:"text-yellow-500",title:"Xe chnh",children:""}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-medium text-sm text-slate-900 dark:text-slate-100",children:Ke.model}),s.jsx("div",{className:"text-xs font-mono text-slate-600 dark:text-slate-400 mt-0.5",children:Ke.licensePlate})]}),Et&&s.jsx("svg",{className:"w-5 h-5 text-blue-500",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})]})},Ke.id)})}):s.jsx("div",{className:"text-center py-4 px-3 bg-slate-50 dark:bg-slate-700/50 rounded-lg border border-dashed border-slate-300 dark:border-slate-600",children:s.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:'Cha c xe no. Click "+ Thm xe"  thm.'})})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"S KM hin ti"}),s.jsx("input",{type:"number",placeholder:"15000",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"M t s c"}),s.jsx("textarea",{rows:4,placeholder:"Bo dng nh k, thay nht...",value:S.issueDescription||"",onChange:Ke=>O({...S,issueDescription:Ke.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 resize-none"})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300",children:"Chi tit Dch v"}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Trng thi"}),s.jsxs("select",{value:S.status||"Tip nhn",onChange:Ke=>O({...S,status:Ke.target.value}),className:`w-full px-3 py-2 border rounded-lg font-medium ${S.status==="Tip nhn"?"bg-blue-100 dark:bg-blue-900/30 border-blue-300 dark:border-blue-700 text-blue-700 dark:text-blue-300":S.status==="ang sa"?"bg-orange-100 dark:bg-orange-900/30 border-orange-300 dark:border-orange-700 text-orange-700 dark:text-orange-300":S.status===" sa xong"?"bg-purple-100 dark:bg-purple-900/30 border-purple-300 dark:border-purple-700 text-purple-700 dark:text-purple-300":"bg-green-100 dark:bg-green-900/30 border-green-300 dark:border-green-700 text-green-700 dark:text-green-300"}`,children:[s.jsx("option",{value:"Tip nhn",className:"bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100",children:"Tip nhn"}),s.jsx("option",{value:"ang sa",className:"bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100",children:"ang sa"}),s.jsx("option",{value:" sa xong",className:"bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100",children:" sa xong"}),s.jsx("option",{value:"Tr my",className:"bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100",children:"Tr my"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"K thut vin"}),s.jsxs("select",{value:S.technicianName||"",onChange:Ke=>O({...S,technicianName:Ke.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",children:[s.jsx("option",{value:"",children:"-- Chn k thut vin --"}),l.filter(Ke=>{var Et,ur;return Ke.status==="active"&&(((Et=Ke.department)==null?void 0:Et.toLowerCase().includes("k thut"))||((ur=Ke.position)==null?void 0:ur.toLowerCase().includes("k thut")))}).map(Ke=>s.jsx("option",{value:Ke.name,children:Ke.name},Ke.id))]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Ph dch v (Cng th)"}),s.jsx("input",{type:"number",placeholder:"100.000",value:S.laborCost||"",onChange:Ke=>O({...S,laborCost:Number(Ke.target.value)}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Ghi ch ni b"}),s.jsx("textarea",{rows:4,placeholder:"VD: Khch yu cu kim tra thm h thng in",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 resize-none"})]})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300",children:"Ph tng s dng"}),s.jsx("button",{onClick:()=>U(!R),className:"px-3 py-1.5 bg-blue-500 hover:bg-blue-600 text-white rounded text-sm flex items-center gap-1",children:" Thm ph tng"})]}),R&&s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"text",placeholder:"Tm kim ph tng theo tn hoc SKU...",value:E,onChange:Ke=>D(Ke.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",autoFocus:!0}),s.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg shadow-lg max-h-60 overflow-y-auto z-10",children:a?s.jsx("div",{className:"px-4 py-3 text-sm text-slate-500",children:"ang ti ph tng..."}):wr.length===0?s.jsx("div",{className:"px-4 py-3 text-sm text-slate-500",children:"Khng tm thy ph tng"}):wr.slice(0,10).map(Ke=>s.jsxs("button",{onClick:()=>Yt(Ke),className:"w-full px-4 py-2 text-left hover:bg-slate-100 dark:hover:bg-slate-600 flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-slate-900 dark:text-slate-100",children:Ke.name}),s.jsx("div",{className:"text-xs text-slate-500",children:Ke.sku})]}),s.jsx("div",{className:"text-sm font-semibold text-slate-900 dark:text-slate-100",children:Oe(Ke.retailPrice[p]||0)})]},Ke.id))})]}),s.jsx("div",{className:"border border-slate-300 dark:border-slate-600 rounded-lg overflow-hidden",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-600 dark:text-slate-300",children:"Tn"}),s.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-slate-600 dark:text-slate-300",children:"SL"}),s.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-slate-600 dark:text-slate-300",children:".Gi"}),s.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-slate-600 dark:text-slate-300",children:"T.Tin"}),s.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-slate-600 dark:text-slate-300"})]})}),s.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-600",children:q.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:5,className:"px-4 py-6 text-center text-sm text-slate-400",children:"Cha c ph tng no"})}):q.map((Ke,Et)=>s.jsxs("tr",{className:"bg-white dark:bg-slate-800",children:[s.jsx("td",{className:"px-4 py-2 text-sm text-slate-900 dark:text-slate-100",children:Ke.partName}),s.jsx("td",{className:"px-4 py-2 text-center",children:s.jsx("input",{type:"number",min:"1",value:Ke.quantity,onChange:ur=>{const Br=Number(ur.target.value);W(q.map((Tr,Zt)=>Zt===Et?{...Tr,quantity:Br}:Tr))},className:"w-16 px-2 py-1 border border-slate-300 dark:border-slate-600 rounded text-center bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})}),s.jsx("td",{className:"px-4 py-2 text-right text-sm text-slate-900 dark:text-slate-100",children:Oe(Ke.price)}),s.jsx("td",{className:"px-4 py-2 text-right text-sm font-semibold text-slate-900 dark:text-slate-100",children:Oe(Ke.price*Ke.quantity)}),s.jsx("td",{className:"px-4 py-2 text-center",children:s.jsx("button",{onClick:()=>W(q.filter((ur,Br)=>Br!==Et)),className:"text-red-500 hover:text-red-700","aria-label":"Xa ph tng",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"w-4 h-4",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 6h18M9 6V4h6v2m-7 4v8m4-8v8m4-8v8"})})})})]},Et))})]})})]}),s.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-4",children:[s.jsx("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-3",children:"Bo gi (Gia cng, t hng)"}),s.jsx("div",{className:"border border-slate-300 dark:border-slate-600 rounded-lg overflow-hidden",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-600 dark:text-slate-300",children:"M t"}),s.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-slate-600 dark:text-slate-300",children:"SL"}),s.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-slate-600 dark:text-slate-300",children:"Gi nhp"}),s.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-slate-600 dark:text-slate-300",children:"n gi"}),s.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-slate-600 dark:text-slate-300",children:"Thnh tin"}),s.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-slate-600 dark:text-slate-300",children:s.jsx("button",{onClick:()=>{We.description&&We.price>0&&(ot([...nt,{...We,id:`SRV-${Date.now()}`}]),Kt({description:"",quantity:1,price:0,costPrice:0}))},className:"px-2 py-1 bg-blue-500 hover:bg-blue-600 text-white rounded text-xs",children:"Thm"})})]})}),s.jsxs("tbody",{children:[nt.map(Ke=>s.jsxs("tr",{className:"border-b border-slate-200 dark:border-slate-700",children:[s.jsx("td",{className:"px-4 py-2 text-sm text-slate-900 dark:text-slate-100",children:Ke.description}),s.jsx("td",{className:"px-4 py-2 text-center text-sm text-slate-900 dark:text-slate-100",children:Ke.quantity}),s.jsx("td",{className:"px-4 py-2 text-right text-sm text-orange-600 dark:text-orange-400",children:Ke.costPrice?Oe(Ke.costPrice):"-"}),s.jsx("td",{className:"px-4 py-2 text-right text-sm text-slate-900 dark:text-slate-100",children:Oe(Ke.price)}),s.jsx("td",{className:"px-4 py-2 text-right text-sm font-semibold text-slate-900 dark:text-slate-100",children:Oe(Ke.price*Ke.quantity)}),s.jsx("td",{className:"px-4 py-2 text-center",children:s.jsx("button",{onClick:()=>ot(nt.filter(Et=>Et.id!==Ke.id)),className:"text-red-500 hover:text-red-700 text-sm","aria-label":"Xa dch v",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"w-4 h-4",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 6h18M9 6V4h6v2m-7 4v8m4-8v8m4-8v8"})})})})]},Ke.id)),s.jsxs("tr",{className:"bg-white dark:bg-slate-800",children:[s.jsx("td",{className:"px-4 py-2",children:s.jsx("input",{type:"text",placeholder:"M t...",value:We.description,onChange:Ke=>Kt({...We,description:Ke.target.value}),className:"w-full px-2 py-1 border border-slate-300 dark:border-slate-600 rounded bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 text-sm"})}),s.jsx("td",{className:"px-4 py-2",children:s.jsx("input",{type:"number",value:We.quantity,onChange:Ke=>Kt({...We,quantity:Number(Ke.target.value)}),className:"w-16 px-2 py-1 border border-slate-300 dark:border-slate-600 rounded text-center bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 text-sm"})}),s.jsx("td",{className:"px-4 py-2",children:s.jsx("input",{type:"number",placeholder:"Gi nhp",value:We.costPrice||"",onChange:Ke=>Kt({...We,costPrice:Number(Ke.target.value)}),className:"w-full px-2 py-1 border border-orange-300 dark:border-orange-600 rounded text-right bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 text-sm"})}),s.jsx("td",{className:"px-4 py-2",children:s.jsx("input",{type:"number",placeholder:"n gi",value:We.price||"",onChange:Ke=>Kt({...We,price:Number(Ke.target.value)}),className:"w-full px-2 py-1 border border-slate-300 dark:border-slate-600 rounded text-right bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 text-sm"})}),s.jsx("td",{className:"px-4 py-2 text-right text-sm text-slate-400",children:We.price>0?Oe(We.price*We.quantity):"Thnh tin"}),s.jsx("td",{className:"px-4 py-2 text-center"})]})]})]})})]}),s.jsx("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-4 mt-4",children:s.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[s.jsxs("div",{className:"space-y-4 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg p-4",children:[s.jsx("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300",children:"Thanh ton"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("label",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",checked:fe,onChange:Ke=>{ke(Ke.target.checked),Ke.target.checked||ue(0)},disabled:!!(e!=null&&e.depositAmount),className:"w-4 h-4"}),s.jsxs("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:["t cc"," ",e!=null&&e.depositAmount?`( cc: ${Oe(e.depositAmount)})`:""]})]}),fe&&!(e!=null&&e.depositAmount)&&s.jsx("div",{className:"pl-6",children:s.jsx("input",{type:"number",placeholder:"S tin t cc",value:se||"",onChange:Ke=>ue(Number(Ke.target.value)),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})}),s.jsx("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-3"}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 mb-2 block",children:"Phng thc thanh ton:"}),s.jsxs("div",{className:"flex items-center gap-4 pl-2",children:[s.jsxs("label",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"radio",name:"paymentMethod",value:"cash",checked:S.paymentMethod==="cash",onChange:Ke=>O({...S,paymentMethod:"cash"}),className:"w-4 h-4"}),s.jsxs("span",{className:"inline-flex items-center gap-1 text-sm text-slate-700 dark:text-slate-300",children:[s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"w-4 h-4",children:[s.jsx("rect",{x:"2",y:"6",width:"20",height:"12",rx:"2",ry:"2"}),s.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),"Tin mt"]})]}),s.jsxs("label",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"radio",name:"paymentMethod",value:"bank",checked:S.paymentMethod==="bank",onChange:Ke=>O({...S,paymentMethod:"bank"}),className:"w-4 h-4"}),s.jsxs("span",{className:"inline-flex items-center gap-1 text-sm text-slate-700 dark:text-slate-300",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"w-4 h-4",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 21h18M3 10h18M7 6h10l2 4H5l2-4Zm2 4v11m6-11v11"})}),"Chuyn khon"]})]})]})]}),s.jsx("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-3"}),S.status==="Tr my"&&s.jsxs(s.Fragment,{children:[s.jsxs("label",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",checked:H,onChange:Ke=>{K(Ke.target.checked),Ke.target.checked||Z(0)},className:"w-4 h-4"}),s.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:"Thanh ton khi tr xe"})]}),H&&s.jsxs("div",{className:"pl-6 space-y-2",children:[s.jsx("label",{className:"text-xs text-slate-600 dark:text-slate-400",children:"S tin thanh ton thm:"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"number",placeholder:"0",value:z||"",onChange:Ke=>Z(Number(Ke.target.value)),className:"flex-1 px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"}),s.jsx("button",{onClick:()=>Z(0),className:"px-3 py-1.5 bg-slate-200 dark:bg-slate-600 hover:bg-slate-300 dark:hover:bg-slate-500 text-slate-700 dark:text-slate-200 rounded text-xs font-medium",children:"0%"}),s.jsx("button",{onClick:()=>Z(Math.round(xt*.5)),className:"px-3 py-1.5 bg-slate-200 dark:bg-slate-600 hover:bg-slate-300 dark:hover:bg-slate-500 text-slate-700 dark:text-slate-200 rounded text-xs font-medium",children:"50%"}),s.jsx("button",{onClick:()=>Z(xt),className:"px-3 py-1.5 bg-slate-200 dark:bg-slate-600 hover:bg-slate-300 dark:hover:bg-slate-500 text-slate-700 dark:text-slate-200 rounded text-xs font-medium",children:"100%"})]})]})]})]}),S.status!=="Tr my"&&s.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 italic",children:'* Thanh ton khi tr xe ch kh dng khi trng thi l "Tr my"'})]}),s.jsxs("div",{className:"space-y-3 bg-slate-50 dark:bg-slate-700/30 border border-slate-200 dark:border-slate-700 rounded-lg p-4",children:[s.jsx("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Tng kt"}),s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Ph dch v:"}),s.jsx("span",{className:"font-medium text-slate-900 dark:text-slate-100",children:Oe(S.laborCost||0)})]}),s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Tin ph tng:"}),s.jsx("span",{className:"font-medium text-slate-900 dark:text-slate-100",children:Oe(nr)})]}),s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Gia cng/t hng:"}),s.jsx("span",{className:"font-medium text-slate-900 dark:text-slate-100",children:Oe(Mr)})]}),s.jsxs("div",{className:"pt-2 border-t border-slate-300 dark:border-slate-600",children:[s.jsxs("div",{className:"flex justify-between items-center text-sm",children:[s.jsx("span",{className:"text-red-600 font-medium",children:"Gim gi:"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"number",placeholder:"0",value:Ee==="amount"?S.discount||"":ye,onChange:Ke=>{const Et=Number(Ke.target.value)||0;if(Ee==="amount")O({...S,discount:Math.min(Et,rr)});else{const ur=Math.min(Et,100);at(ur),O({...S,discount:Math.round(rr*ur/100)})}},className:"w-20 px-2 py-1 border border-slate-300 dark:border-slate-600 rounded text-right bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 text-sm",min:"0",max:Ee==="amount"?rr:100}),s.jsxs("select",{value:Ee,onChange:Ke=>{const Et=Ke.target.value;Me(Et),O({...S,discount:0}),at(0)},className:"px-2 py-1 border border-slate-300 dark:border-slate-600 rounded bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 text-sm",children:[s.jsx("option",{value:"amount",children:""}),s.jsx("option",{value:"percent",children:"%"})]})]})]}),Ee==="percent"&&s.jsx("div",{className:"flex gap-1 justify-end mt-2",children:[5,10,15,20].map(Ke=>s.jsxs("button",{onClick:()=>{at(Ke),O({...S,discount:Math.round(rr*Ke/100)})},className:"px-2 py-1 text-xs bg-slate-100 dark:bg-slate-700 hover:bg-blue-100 dark:hover:bg-blue-900/30 text-slate-700 dark:text-slate-300 rounded transition-colors",children:[Ke,"%"]},Ke))}),Ee==="percent"&&ye>0&&s.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400 text-right mt-1",children:["= ",Oe(S.discount||0)]})]}),s.jsxs("div",{className:"pt-2 border-t-2 border-slate-400 dark:border-slate-500",children:[s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsx("span",{className:"text-base font-bold text-slate-900 dark:text-slate-100",children:"Tng cng:"}),s.jsx("span",{className:"text-lg font-bold text-blue-600 dark:text-blue-400",children:Oe(Vt)})]}),(cr>0||br>0)&&s.jsxs("div",{className:"space-y-1 pt-2 border-t border-slate-300 dark:border-slate-600",children:[cr>0&&s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-green-600 dark:text-green-400",children:" t cc:"}),s.jsxs("span",{className:"font-medium text-green-600 dark:text-green-400",children:["-",Oe(cr)]})]}),br>0&&s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-green-600 dark:text-green-400",children:"Thanh ton thm:"}),s.jsxs("span",{className:"font-medium text-green-600 dark:text-green-400",children:["-",Oe(br)]})]}),s.jsxs("div",{className:"flex justify-between items-center pt-2 border-t border-slate-300 dark:border-slate-600",children:[s.jsx("span",{className:"text-base font-bold text-slate-900 dark:text-slate-100",children:xt>0?"Cn phi thu:":" thanh ton "}),s.jsx("span",{className:`text-lg font-bold ${xt>0?"text-red-600 dark:text-red-400":"text-green-600 dark:text-green-400"}`,children:Oe(xt)})]})]})]})]})]})})]}),s.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-700 px-4 py-4 md:px-6 flex items-center justify-end gap-3 bg-white md:bg-slate-50 dark:bg-slate-800/70 md:dark:bg-slate-800/50 rounded-b-3xl md:rounded-b-xl flex-shrink-0",children:[s.jsx("button",{onClick:t,className:"px-4 py-2 bg-slate-200 dark:bg-slate-700 hover:bg-slate-300 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-200 rounded-lg",children:"Hy"}),s.jsx("button",{onClick:vt,className:"px-6 py-2 bg-slate-500 hover:bg-slate-600 text-white rounded-lg font-medium",children:"Lu Phiu"}),S.status!=="Tr my"&&fe&&s.jsxs("button",{onClick:$t,className:"px-6 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg font-medium flex items-center gap-2",children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"t cc"]}),S.status==="Tr my"&&s.jsxs("button",{onClick:$t,className:"px-6 py-2 bg-green-500 hover:bg-green-600 text-white rounded-lg font-medium flex items-center gap-2",children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"})}),"Thanh ton"]})]})]}),_e&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[60]",children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl w-full max-w-md p-6 m-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-slate-100",children:"Thm khch hng"}),s.jsx("button",{onClick:()=>{Le(!1),B({name:"",phone:"",vehicleModel:"",licensePlate:""})},className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-300","aria-label":"ng",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"w-5 h-5",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Tn khch"}),s.jsx("input",{type:"text",placeholder:"Nhp tn khch",value:xe.name,onChange:Ke=>B({...xe,name:Ke.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"S in thoi"}),s.jsx("input",{type:"tel",placeholder:"VD: 09xxxx",value:xe.phone,onChange:Ke=>B({...xe,phone:Ke.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{className:"relative vehicle-search-container",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Dng xe"}),s.jsx("input",{type:"text",placeholder:"Chn hoc nhp dng xe",value:xe.vehicleModel,onChange:Ke=>{B({...xe,vehicleModel:Ke.target.value}),ae(!0)},onFocus:()=>ae(!0),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"}),J&&s.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg shadow-lg max-h-[200px] overflow-y-auto",children:g.filter(Ke=>Ke.toLowerCase().includes(xe.vehicleModel.toLowerCase())).map(Ke=>s.jsx("button",{type:"button",onClick:()=>{B({...xe,vehicleModel:Ke}),ae(!1)},className:"w-full text-left px-3 py-2 hover:bg-slate-100 dark:hover:bg-slate-600 text-sm border-b border-slate-200 dark:border-slate-600 last:border-0 text-slate-900 dark:text-slate-100",children:Ke},Ke))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Bin s"}),s.jsx("input",{type:"text",placeholder:"VD: 59A1-123.45",value:xe.licensePlate,onChange:Ke=>B({...xe,licensePlate:Ke.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]})]})]}),s.jsxs("div",{className:"flex items-center justify-end gap-3 mt-6",children:[s.jsx("button",{onClick:()=>{Le(!1),B({name:"",phone:"",vehicleModel:"",licensePlate:""})},className:"px-4 py-2 text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg",children:"Hy"}),s.jsx("button",{onClick:()=>{if(xe.name&&xe.phone){const Ke=`CUST-${Date.now()}`,Et=`VEH-${Date.now()}`,ur=[];(xe.vehicleModel||xe.licensePlate)&&ur.push({id:Et,model:xe.vehicleModel||"",licensePlate:xe.licensePlate||"",isPrimary:!0}),o({id:Ke,name:xe.name,phone:xe.phone,vehicles:ur.length>0?ur:void 0,vehicleModel:xe.vehicleModel,licensePlate:xe.licensePlate,status:"active",segment:"New",loyaltyPoints:0,totalSpent:0,visitCount:1,lastVisit:new Date().toISOString(),created_at:new Date().toISOString()}),O({...S,customerName:xe.name,customerPhone:xe.phone,vehicleId:ur.length>0?Et:void 0,vehicleModel:xe.vehicleModel,licensePlate:xe.licensePlate}),Y(xe.name),Le(!1),B({name:"",phone:"",vehicleModel:"",licensePlate:""})}},className:"px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg font-medium",disabled:!xe.name||!xe.phone,children:"Lu"})]})]})}),Ce&&be&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl max-w-md w-full p-6",children:[s.jsxs("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-4",children:["Thm xe cho ",be.name]}),s.jsxs("div",{className:"space-y-4 mb-6",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:["Loi xe ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",placeholder:"VD: Exciter, Vision, Wave...",value:ie.model,onChange:Ke=>je({...ie,model:Ke.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",autoFocus:!0})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:["Bin s ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",placeholder:"VD: 29A 12345",value:ie.licensePlate,onChange:Ke=>je({...ie,licensePlate:Ke.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]}),s.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 bg-blue-50 dark:bg-blue-900/20 p-3 rounded",children:" Xe mi s t ng c chn sau khi thm"})]}),s.jsxs("div",{className:"flex gap-3 justify-end",children:[s.jsx("button",{onClick:()=>{me(!1),je({model:"",licensePlate:""})},className:"px-4 py-2 text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg",children:"Hy"}),s.jsx("button",{onClick:xr,className:"px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg font-medium",disabled:!ie.model.trim()||!ie.licensePlate.trim(),children:"Thm xe"})]})]})})]})},pje=({status:e})=>{const t={"Tip nhn":"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400","ang sa":"bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-400"," sa xong":"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400","Tr my":"bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-400"};return s.jsx("span",{className:`inline-flex px-2 py-1 rounded-full text-xs font-medium ${t[e]}`,children:e})},gje=({currentBranchId:e})=>{var Q,Ce;const{workOrders:t}=Ba(),r=Pw(),[n,a]=T.useState(""),[i,l]=T.useState("all"),[o,c]=T.useState("all"),[d,f]=T.useState("all"),[p,y]=T.useState("quick"),[g,N]=T.useState("7days"),[w,k]=T.useState(()=>{const me=new Date,ie=String(me.getMonth()+1).padStart(2,"0");return`${me.getFullYear()}-${ie}`}),[S,O]=T.useState(""),[E,D]=T.useState(""),[q,W]=T.useState(!1),R=()=>{const me=new Date,ie=String(me.getMonth()+1).padStart(2,"0"),je=me.getFullYear();return`Thng ${ie}/${je}`},[U,z]=T.useState(R()),[Z,H]=T.useState(null),[K,J]=T.useState(!1),[ae,se]=T.useState(null);T.useEffect(()=>{(async()=>{try{const{data:ie,error:je}=await Ot.from("store_settings").select("store_name, address, phone, email, logo_url, bank_qr_url, bank_name, bank_account_number, bank_account_holder, bank_branch").order("created_at",{ascending:!1}).limit(1).single();if(je){console.error("Error fetching store settings:",je);return}se(ie)}catch(ie){console.error("Failed to fetch store settings:",ie)}})()},[]);const ue=()=>{const me=new Date,ie=new Date(me.getFullYear(),me.getMonth(),me.getDate());if(p==="quick")switch(g){case"today":return{start:ie,end:new Date(ie.getFullYear(),ie.getMonth(),ie.getDate(),23,59,59)};case"yesterday":const je=new Date(ie);return je.setDate(je.getDate()-1),{start:je,end:new Date(je.getFullYear(),je.getMonth(),je.getDate(),23,59,59)};case"3days":const be=new Date(ie);return be.setDate(be.getDate()-2),{start:be,end:new Date(me.getFullYear(),me.getMonth(),me.getDate(),23,59,59)};case"7days":const le=new Date(ie);return le.setDate(le.getDate()-6),{start:le,end:new Date(me.getFullYear(),me.getMonth(),me.getDate(),23,59,59)};case"thisWeek":const Ee=new Date(ie),Me=Ee.getDay(),ye=Ee.getDate()-Me+(Me===0?-6:1);return Ee.setDate(ye),{start:Ee,end:new Date(me.getFullYear(),me.getMonth(),me.getDate(),23,59,59)};case"lastWeek":const at=new Date(ie),lt=at.getDay(),ut=at.getDate()-lt-6;at.setDate(ut);const nt=new Date(at);return nt.setDate(nt.getDate()+6),nt.setHours(23,59,59),{start:at,end:nt};default:return{start:ie,end:new Date(me.getFullYear(),me.getMonth(),me.getDate(),23,59,59)}}else if(p==="month"){const[je,be]=w.split("-").map(Number),le=new Date(je,be-1,1),Ee=new Date(je,be,0,23,59,59);return{start:le,end:Ee}}else if(p==="custom"&&S&&E){const je=new Date(S),be=new Date(E);return be.setHours(23,59,59),{start:je,end:be}}return{start:new Date(me.getFullYear(),me.getMonth(),1),end:new Date(me.getFullYear(),me.getMonth()+1,0,23,59,59)}},fe=()=>{if(p==="quick")switch(g){case"today":return"Hm nay";case"yesterday":return"Hm qua";case"3days":return"3 ngy qua";case"7days":return"7 ngy qua";case"thisWeek":return"Tun ny";case"lastWeek":return"Tun trc";default:return"Chn thi gian"}else if(p==="month"){const[me,ie]=w.split("-");return`Thng ${ie}/${me}`}else if(p==="custom"){if(S&&E){const me=new Date(S).toLocaleDateString("vi-VN"),ie=new Date(E).toLocaleDateString("vi-VN");return`${me} - ${ie}`}return"Ty chnh"}return"Chn thi gian"},ke=T.useMemo(()=>{const{start:me,end:ie}=ue();return t.filter(je=>{var be,le,Ee,Me,ye;if(je.status!=="Tr my"||je.branchId!==e)return!1;if(n){const at=n.toLowerCase();if(![(be=je.id)==null?void 0:be.toLowerCase(),(le=je.customerName)==null?void 0:le.toLowerCase(),(Ee=je.customerPhone)==null?void 0:Ee.toLowerCase(),(Me=je.vehicleModel)==null?void 0:Me.toLowerCase(),(ye=je.licensePlate)==null?void 0:ye.toLowerCase()].some(ut=>ut==null?void 0:ut.includes(at)))return!1}if(i!=="all"&&je.status!==i||o!=="all"&&je.technicianName!==o||d!=="all"&&(d==="paid"&&je.paymentStatus!=="paid"||d==="unpaid"&&je.paymentStatus!=="unpaid"))return!1;if(je.creationDate){const at=new Date(je.creationDate);if(at<me||at>ie)return!1}return!0}).sort((je,be)=>new Date(be.creationDate||0).getTime()-new Date(je.creationDate||0).getTime())},[t,n,i,p,g,w,S,E,o,d,e]),_e=ke.reduce((me,ie)=>me+(ie.total||0),0),Le=()=>{const ie=[["M Phiu","Ngy to","Khch hng","Xe","Bin s","Trng thi","Tng chi ph"].join(","),...ke.map(le=>{var Ee;return[Li(le.id,ae==null?void 0:ae.work_order_prefix)||"",Bn(le.creationDate,!0),le.customerName||"",le.vehicleModel||"",le.licensePlate||"",le.status||"",((Ee=le.total)==null?void 0:Ee.toString())||"0"].join(",")})].join(`
`),je=new Blob([ie],{type:"text/csv;charset=utf-8;"}),be=document.createElement("a");if(be.download!==void 0){const le=URL.createObjectURL(je);be.setAttribute("href",le),be.setAttribute("download",`lich-su-sua-chua-${new Date().toISOString().split("T")[0]}.csv`),be.style.visibility="hidden",document.body.appendChild(be),be.click(),document.body.removeChild(be)}},xe=me=>{H(me),J(!0)},B=me=>{r("/service",{state:{editOrder:me}})},ee=()=>{setTimeout(()=>{ow("work-order-receipt")},100)},Y=({status:me})=>{const ie={"Tip nhn":{icon:"",color:"text-blue-600 dark:text-blue-400"},"ang sa":{icon:"",color:"text-orange-600 dark:text-orange-400"}," sa xong":{icon:"",color:"text-purple-600 dark:text-purple-400"},"Tr my":{icon:"",color:"text-green-600 dark:text-green-400"}},je=ie[me]||ie["Tip nhn"];return s.jsxs("span",{className:`flex items-center gap-1 text-sm ${je.color}`,children:[s.jsx("span",{children:je.icon}),s.jsx("span",{children:me})]})},re=({status:me})=>me==="paid"?s.jsx("span",{className:"text-xs text-green-600 dark:text-green-400",children:"  thanh ton"}):s.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:" Cha thanh ton"});return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:[s.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl p-4 border border-slate-200 dark:border-slate-700",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Tng phiu"}),s.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-slate-100",children:ke.length})]}),s.jsx("div",{className:"p-3 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:s.jsx(N4,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})})]})}),s.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl p-4 border border-slate-200 dark:border-slate-700",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Tng doanh thu"}),s.jsx("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:Oe(_e)})]}),s.jsx("div",{className:"p-3 bg-green-100 dark:bg-green-900/30 rounded-lg",children:s.jsx(QT,{className:"w-6 h-6 text-green-600 dark:text-green-400"})})]})}),s.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl p-4 border border-slate-200 dark:border-slate-700",children:s.jsxs("button",{onClick:Le,className:"w-full px-4 py-2 bg-cyan-500 hover:bg-cyan-600 text-white rounded-lg text-sm font-medium flex items-center justify-center gap-2 transition-colors",children:[s.jsx(QT,{className:"w-4 h-4"}),"Xut Excel"]})})]}),s.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl p-4 border border-slate-200 dark:border-slate-700",children:s.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[s.jsx("div",{className:"flex-1 min-w-[200px]",children:s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"text",placeholder:"Tm theo m, tn, ST, xe, bin s...",value:n,onChange:me=>a(me.target.value),className:"w-full pl-10 pr-4 py-2 bg-slate-50 dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-sm text-slate-900 dark:text-slate-100 placeholder-slate-400"}),s.jsx(Pu,{className:"absolute left-3 top-2.5 w-4 h-4 text-slate-400","aria-hidden":"true"})]})}),s.jsxs("button",{onClick:()=>W(!0),className:"px-4 py-2 bg-slate-50 dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-sm text-slate-700 dark:text-slate-200 hover:bg-slate-100 dark:hover:bg-slate-600 transition-colors flex items-center gap-2",children:[s.jsx(N4,{className:"w-4 h-4"}),fe()]}),s.jsxs("select",{value:o,onChange:me=>c(me.target.value),className:"px-4 py-2 bg-slate-50 dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-sm text-slate-700 dark:text-slate-200",children:[s.jsx("option",{value:"all",children:"Tt c KTV"}),s.jsx("option",{value:"KTV 1",children:"KTV 1"}),s.jsx("option",{value:"KTV 2",children:"KTV 2"})]}),s.jsxs("select",{value:d,onChange:me=>f(me.target.value),className:"px-4 py-2 bg-slate-50 dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-sm text-slate-700 dark:text-slate-200",children:[s.jsx("option",{value:"all",children:"Tt c thanh ton"}),s.jsx("option",{value:"paid",children:" thanh ton"}),s.jsx("option",{value:"unpaid",children:"Cha thanh ton"})]})]})}),q&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl w-full max-w-lg shadow-2xl",children:[s.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700 px-6 py-4",children:s.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-slate-100",children:"Chn thi gian:"})}),s.jsxs("div",{className:"p-6 space-y-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 mb-3",children:"Theo ngy:"}),s.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[s.jsx("button",{onClick:()=>{y("quick"),N("today")},className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${p==="quick"&&g==="today"?"bg-blue-500 text-white":"bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-600"}`,children:"Hm nay"}),s.jsx("button",{onClick:()=>{y("quick"),N("yesterday")},className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${p==="quick"&&g==="yesterday"?"bg-blue-500 text-white":"bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-600"}`,children:"Hm qua"}),s.jsx("button",{onClick:()=>{y("quick"),N("3days")},className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${p==="quick"&&g==="3days"?"bg-blue-500 text-white":"bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-600"}`,children:"3 ngy qua"}),s.jsx("button",{onClick:()=>{y("quick"),N("thisWeek")},className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${p==="quick"&&g==="thisWeek"?"bg-blue-500 text-white":"bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-600"}`,children:"Tun ny"}),s.jsx("button",{onClick:()=>{y("quick"),N("lastWeek")},className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${p==="quick"&&g==="lastWeek"?"bg-blue-500 text-white":"bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-600"}`,children:"Tun trc"}),s.jsx("button",{onClick:()=>{y("quick"),N("7days")},className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${p==="quick"&&g==="7days"?"bg-blue-500 text-white":"bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-600"}`,children:" 7 ngy qua"})]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 mb-3",children:"Theo thng:"}),s.jsx("div",{className:"grid grid-cols-3 gap-2",children:[0,1,2,3,4,5].map(me=>{const ie=new Date;ie.setMonth(ie.getMonth()-me);const je=ie.getFullYear(),be=String(ie.getMonth()+1).padStart(2,"0"),le=`${je}-${be}`,Ee=`Thng ${be}/${je}`;return s.jsx("button",{onClick:()=>{y("month"),k(le)},className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${p==="month"&&w===le?"bg-slate-600 text-white":"bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-600"}`,children:Ee},le)})})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 mb-3",children:"Ty chnh:"}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("input",{type:"date",value:S,onChange:me=>{O(me.target.value),me.target.value&&E&&y("custom")},className:"flex-1 px-3 py-2 bg-slate-50 dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-sm text-slate-900 dark:text-slate-100"}),s.jsx("span",{className:"text-slate-500",children:"-"}),s.jsx("input",{type:"date",value:E,onChange:me=>{D(me.target.value),S&&me.target.value&&y("custom")},className:"flex-1 px-3 py-2 bg-slate-50 dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-sm text-slate-900 dark:text-slate-100"})]})]})]}),s.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-700 px-6 py-4 flex justify-end gap-3",children:[s.jsx("button",{onClick:()=>W(!1),className:"px-4 py-2 bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-300 rounded-lg text-sm font-medium transition-colors",children:"Hy"}),s.jsx("button",{onClick:()=>W(!1),className:"px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg text-sm font-medium transition-colors",children:"p dng"})]})]})}),s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700",children:[s.jsx("div",{className:"px-4 py-3 bg-slate-50 dark:bg-slate-700/50 border-b border-slate-200 dark:border-slate-600",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-16 text-center",children:s.jsx("input",{type:"checkbox",className:"rounded border-slate-400"})}),s.jsx("div",{className:"flex-1 min-w-[180px]",children:s.jsx("span",{className:"text-xs font-semibold text-slate-600 dark:text-slate-300 uppercase",children:"M phiu"})}),s.jsx("div",{className:"flex-1 min-w-[180px]",children:s.jsx("span",{className:"text-xs font-semibold text-slate-600 dark:text-slate-300 uppercase",children:"Khch hng"})}),s.jsx("div",{className:"flex-1 min-w-[200px]",children:s.jsx("span",{className:"text-xs font-semibold text-slate-600 dark:text-slate-300 uppercase",children:"Chi tit"})}),s.jsx("div",{className:"w-56",children:s.jsx("span",{className:"text-xs font-semibold text-slate-600 dark:text-slate-300 uppercase",children:"Hn tr"})}),s.jsx("div",{className:"w-24 text-center",children:s.jsx("span",{className:"text-xs font-semibold text-slate-600 dark:text-slate-300 uppercase",children:"Thao tc"})})]})}),ke.length===0?s.jsx("div",{className:"px-4 py-12 text-center text-slate-400",children:"Khng c phiu sa cha no."}):s.jsx("div",{className:"divide-y divide-slate-700",children:ke.map(me=>{var le,Ee;const ie=((le=me.partsUsed)==null?void 0:le.reduce((Me,ye)=>Me+ye.quantity*ye.price,0))||0,je=((Ee=me.additionalServices)==null?void 0:Ee.reduce((Me,ye)=>Me+(ye.price||0)*(ye.quantity||1),0))||0,be=me.laborCost||0;return s.jsx("div",{className:"px-4 py-4 bg-slate-900 dark:bg-slate-950 hover:bg-slate-800 dark:hover:bg-slate-900 transition-colors",children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsxs("div",{className:"w-16 flex flex-col items-center gap-2 pt-1",children:[s.jsx("input",{type:"checkbox",className:"rounded border-slate-600"}),s.jsx("div",{className:"w-10 h-10 bg-slate-800 dark:bg-slate-700 rounded flex items-center justify-center flex-shrink-0",children:s.jsx(N4,{className:"w-5 h-5 text-slate-400"})})]}),s.jsxs("div",{className:"flex-1 min-w-[180px]",children:[s.jsx("div",{className:"font-mono font-bold text-blue-400 text-sm mb-1",children:Li(me.id,ae==null?void 0:ae.work_order_prefix)}),s.jsxs("div",{className:"text-xs text-slate-400",children:[s.jsx("span",{children:"Ngy: "}),s.jsx("span",{className:"text-slate-300",children:Bn(me.creationDate,!0)})]}),s.jsxs("div",{className:"text-xs text-cyan-400",children:["NV: ",me.technicianName||"Cha phn cng"]})]}),s.jsxs("div",{className:"flex-1 min-w-[180px]",children:[s.jsx("div",{className:"font-semibold text-base text-white mb-1",children:me.customerName}),s.jsx("div",{className:"text-xs text-slate-400",children:me.customerPhone}),s.jsxs("div",{className:"text-xs text-slate-400",children:[s.jsx("span",{className:"font-medium",children:"Xe: "}),s.jsx("span",{children:me.vehicleModel||"N/A"}),me.licensePlate&&s.jsxs("span",{className:"ml-1",children:["- ",me.licensePlate]})]}),s.jsx("div",{className:"text-xs text-slate-500 italic mt-1",children:me.issueDescription||"Khng c m t"})]}),s.jsx("div",{className:"flex-1 min-w-[200px]",children:s.jsxs("div",{className:"space-y-1",children:[me.partsUsed&&me.partsUsed.length>0&&s.jsxs("div",{className:"mb-2",children:[s.jsx("div",{className:"text-xs font-medium text-slate-400 mb-0.5",children:"Ph tng:"}),s.jsx("div",{className:"space-y-0.5",children:me.partsUsed.map((Me,ye)=>s.jsxs("div",{className:"text-xs text-slate-300",children:[" ",Me.partName," x",Me.quantity]},ye))})]}),me.additionalServices&&me.additionalServices.length>0&&s.jsxs("div",{className:"mb-2",children:[s.jsx("div",{className:"text-xs font-medium text-slate-400 mb-0.5",children:"Gia cng/t hng:"}),s.jsx("div",{className:"space-y-0.5",children:me.additionalServices.map((Me,ye)=>s.jsxs("div",{className:"text-xs text-slate-300",children:[" ",Me.description," x",Me.quantity||1]},ye))})]}),s.jsx("div",{className:"mt-2",children:s.jsx(Y,{status:me.status||"Tip nhn"})}),(!me.partsUsed||me.partsUsed.length===0)&&(!me.additionalServices||me.additionalServices.length===0)&&s.jsx("div",{className:"text-xs text-slate-500 italic mb-2",children:"Cha c chi tit"})]})}),s.jsxs("div",{className:"w-56",children:[s.jsxs("div",{className:"space-y-1 text-xs text-right mb-3",children:[be>0&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-500",children:"Tin cng:"}),s.jsx("span",{className:"text-slate-300",children:Oe(be)})]}),ie>0&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-500",children:"Tin ph tng:"}),s.jsx("span",{className:"text-blue-400 font-medium",children:Oe(ie)})]}),je>0&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-slate-500",children:"Gi cng/t hng:"}),s.jsx("span",{className:"text-slate-300",children:Oe(je)})]}),me.total>0&&s.jsxs("div",{className:"flex justify-between pt-2 border-t border-slate-700 text-sm",children:[s.jsx("span",{className:"text-slate-300 font-bold",children:"Tng cng:"}),s.jsx("span",{className:"text-blue-400 font-bold text-sm",children:Oe(me.total)})]}),me.discount&&me.discount>0&&s.jsxs("div",{className:"flex justify-between text-right text-xs",children:[s.jsx("span",{className:"text-red-500",children:"Gim gi:"}),s.jsx("span",{className:"text-red-500",children:Oe(me.discount)})]}),me.additionalPayment&&me.additionalPayment>0&&s.jsxs("div",{className:"flex justify-between text-right text-xs text-green-500",children:[s.jsx("span",{children:"Thanh ton trc:"}),s.jsxs("span",{children:["-",Oe(me.additionalPayment)]})]}),me.remainingAmount!==void 0&&me.remainingAmount>0&&s.jsxs("div",{className:"flex justify-between text-right text-xs mt-1",children:[s.jsx("span",{children:"Cn phi thu:"}),s.jsx("span",{className:`font-bold ${me.remainingAmount>0?"text-red-500":"text-green-500"}`,children:Oe(me.remainingAmount)})]})]}),s.jsx("div",{className:"mt-2",children:s.jsx(re,{status:me.paymentStatus})})]}),s.jsxs("div",{className:"w-24 flex flex-col items-center gap-2",children:[s.jsxs("button",{onClick:()=>B(me),className:"px-4 py-1.5 bg-cyan-500 hover:bg-cyan-600 text-white text-sm rounded-md transition-colors min-w-[70px] flex items-center justify-center gap-1",title:"Chnh sa phiu",children:[s.jsx(pF,{className:"w-3.5 h-3.5"}),s.jsx("span",{children:"Sa"})]}),s.jsxs("button",{onClick:()=>xe(me),className:"px-4 py-1.5 bg-blue-500 hover:bg-blue-600 text-white text-sm rounded-md transition-colors min-w-[70px] flex items-center justify-center gap-1",children:[s.jsx("span",{children:""}),s.jsx("span",{children:"Xem"})]}),s.jsx("button",{onClick:()=>xe(me),className:"p-2 text-slate-400 hover:text-blue-500 hover:bg-blue-50 dark:hover:bg-blue-900/20 dark:hover:text-blue-400 rounded transition-colors",title:"In phiu dch v",children:s.jsx(fm,{className:"w-4 h-4"})})]})]})},me.id)})})]}),K&&Z&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl w-full max-w-4xl max-h-[90vh] flex flex-col",children:[s.jsxs("div",{className:"bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 px-6 py-4 flex items-center justify-between rounded-t-xl flex-shrink-0",children:[s.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:"Xem trc phiu in"}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("button",{onClick:ee,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg flex items-center gap-2 transition",children:[s.jsx(fm,{className:"w-4 h-4"}),"In phiu"]}),s.jsx("button",{onClick:()=>{J(!1),H(null)},className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-300","aria-label":"ng",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"w-5 h-5",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]})]}),s.jsx("div",{className:"flex-1 overflow-y-auto p-6 bg-slate-100 dark:bg-slate-900",children:s.jsx("div",{className:"bg-white shadow-lg mx-auto",style:{width:"148mm",minHeight:"210mm",color:"#000"},children:s.jsxs("div",{style:{padding:"10mm"},children:[s.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr auto 1fr",gap:"3mm",marginBottom:"4mm",alignItems:"start",borderBottom:"2px solid #3b82f6",paddingBottom:"3mm"},children:[s.jsxs("div",{style:{fontSize:"8.5pt",lineHeight:"1.4"},children:[s.jsx("div",{style:{fontWeight:"bold",fontSize:"11pt",marginBottom:"1mm",color:"#1e40af"},children:(ae==null?void 0:ae.store_name)||"Nhn Lm SmartCare"}),s.jsxs("div",{style:{color:"#000"},children:[""," ",(ae==null?void 0:ae.address)||"p Ph Li B, X Long Ph Thun, ng Thp"]}),s.jsxs("div",{style:{color:"#000"},children:[" ",(ae==null?void 0:ae.phone)||"0947.747.907"]}),(ae==null?void 0:ae.email)&&s.jsxs("div",{style:{color:"#000"},children:[" ",ae.email]})]}),(ae==null?void 0:ae.logo_url)&&s.jsx("div",{style:{textAlign:"center"},children:s.jsx("img",{src:ae.logo_url,alt:"Logo",style:{height:"15mm",width:"auto",objectFit:"contain"}})}),s.jsx("div",{style:{fontSize:"8pt",lineHeight:"1.4",textAlign:"right"},children:(ae==null?void 0:ae.bank_name)&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{style:{fontWeight:"bold",marginBottom:"1mm",color:"#000"},children:[" ",ae.bank_name]}),ae.bank_account_number&&s.jsxs("div",{style:{color:"#000"},children:["STK: ",ae.bank_account_number]}),ae.bank_account_holder&&s.jsx("div",{style:{color:"#000",fontSize:"7.5pt"},children:ae.bank_account_holder}),ae.bank_qr_url&&s.jsx("div",{style:{marginTop:"2mm",display:"inline-block"},children:s.jsx("img",{src:ae.bank_qr_url,alt:"QR Banking",style:{height:"15mm",width:"15mm",objectFit:"contain"}})})]})})]}),s.jsxs("div",{style:{marginBottom:"4mm"},children:[s.jsx("div",{style:{textAlign:"center",marginBottom:"2mm"},children:s.jsx("h1",{style:{fontSize:"16pt",fontWeight:"bold",margin:"0",textTransform:"uppercase",color:"#1e40af"},children:"PHIU DCH V SA CHA"})}),s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"9pt",color:"#666"},children:[s.jsx("div",{children:new Date(Z.creationDate).toLocaleString("vi-VN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}),s.jsxs("div",{style:{fontWeight:"bold"},children:["M:"," ",Li(Z.id,ae==null?void 0:ae.work_order_prefix)]})]})]}),s.jsxs("div",{style:{border:"1px solid #ddd",padding:"3mm",marginBottom:"3mm",borderRadius:"2mm",backgroundColor:"#f8fafc",color:"#000",fontSize:"9pt"},children:[s.jsxs("div",{style:{display:"flex",gap:"4mm",marginBottom:"1.5mm"},children:[s.jsxs("div",{style:{flex:1},children:[s.jsx("span",{style:{fontWeight:"bold"},children:"Khch hng:"})," ",Z.customerName]}),s.jsxs("div",{style:{flex:"0 0 auto"},children:[s.jsx("span",{style:{fontWeight:"bold"},children:"ST:"})," ",Z.customerPhone]})]}),s.jsxs("div",{style:{display:"flex",gap:"4mm"},children:[s.jsxs("div",{style:{flex:1},children:[s.jsx("span",{style:{fontWeight:"bold"},children:"Loi xe:"})," ",Z.vehicleModel]}),s.jsxs("div",{style:{flex:"0 0 auto"},children:[s.jsx("span",{style:{fontWeight:"bold"},children:"Bin s:"})," ",Z.licensePlate]})]})]}),s.jsx("div",{style:{border:"1px solid #ddd",padding:"4mm",marginBottom:"4mm",borderRadius:"2mm",color:"#000"},children:s.jsxs("div",{style:{display:"flex",gap:"3mm"},children:[s.jsx("div",{style:{fontWeight:"bold",minWidth:"20%",flexShrink:0},children:"M t s c:"}),s.jsx("div",{style:{flex:1,whiteSpace:"pre-wrap"},children:Z.issueDescription||"Khng c m t"})]})}),Z.partsUsed&&Z.partsUsed.length>0&&s.jsxs("div",{style:{marginBottom:"4mm",color:"#000"},children:[s.jsx("p",{style:{fontWeight:"bold",margin:"0 0 2mm 0",fontSize:"11pt"},children:"Ph tng s dng:"}),s.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",border:"1px solid #ddd"},children:[s.jsx("thead",{children:s.jsxs("tr",{style:{backgroundColor:"#f5f5f5"},children:[s.jsx("th",{style:{border:"1px solid #ddd",padding:"2mm",textAlign:"left",fontSize:"10pt"},children:"Tn ph tng"}),s.jsx("th",{style:{border:"1px solid #ddd",padding:"2mm",textAlign:"center",fontSize:"10pt",width:"15%"},children:"SL"}),s.jsx("th",{style:{border:"1px solid #ddd",padding:"2mm",textAlign:"right",fontSize:"10pt",width:"25%"},children:"n gi"}),s.jsx("th",{style:{border:"1px solid #ddd",padding:"2mm",textAlign:"right",fontSize:"10pt",width:"25%"},children:"Thnh tin"})]})}),s.jsx("tbody",{children:Z.partsUsed.map((me,ie)=>s.jsxs("tr",{children:[s.jsx("td",{style:{border:"1px solid #ddd",padding:"2mm",fontSize:"10pt"},children:me.partName}),s.jsx("td",{style:{border:"1px solid #ddd",padding:"2mm",textAlign:"center",fontSize:"10pt"},children:me.quantity}),s.jsx("td",{style:{border:"1px solid #ddd",padding:"2mm",textAlign:"right",fontSize:"10pt"},children:Oe(me.price)}),s.jsx("td",{style:{border:"1px solid #ddd",padding:"2mm",textAlign:"right",fontSize:"10pt",fontWeight:"bold"},children:Oe(me.price*me.quantity)})]},ie))})]})]}),s.jsx("div",{style:{border:"1px solid #ddd",padding:"4mm",marginBottom:"4mm",borderRadius:"2mm",backgroundColor:"#f9f9f9",color:"#000"},children:s.jsx("table",{style:{width:"100%",borderSpacing:"0",color:"#000"},children:s.jsxs("tbody",{children:[s.jsxs("tr",{children:[s.jsx("td",{style:{fontWeight:"bold",paddingBottom:"2mm",fontSize:"10pt"},children:"Tin ph tng:"}),s.jsx("td",{style:{textAlign:"right",paddingBottom:"2mm",fontSize:"10pt"},children:Oe(((Q=Z.partsUsed)==null?void 0:Q.reduce((me,ie)=>me+ie.price*ie.quantity,0))||0)})]}),s.jsxs("tr",{children:[s.jsx("td",{style:{fontWeight:"bold",paddingBottom:"2mm",fontSize:"10pt"},children:"Ph dch v:"}),s.jsx("td",{style:{textAlign:"right",paddingBottom:"2mm",fontSize:"10pt"},children:Oe(Z.laborCost||0)})]}),s.jsxs("tr",{children:[s.jsx("td",{style:{fontWeight:"bold",paddingBottom:"2mm",fontSize:"10pt"},children:"Gi cng/t hng:"}),s.jsx("td",{style:{textAlign:"right",paddingBottom:"2mm",fontSize:"10pt"},children:Oe(((Ce=Z.additionalServices)==null?void 0:Ce.reduce((me,ie)=>me+(ie.price||0)*(ie.quantity||1),0))||0)})]}),s.jsxs("tr",{style:{borderTop:"2px solid #333"},children:[s.jsx("td",{style:{fontWeight:"bold",paddingTop:"2mm",fontSize:"12pt"},children:"TNG CNG:"}),s.jsxs("td",{style:{textAlign:"right",paddingTop:"2mm",fontSize:"12pt",fontWeight:"bold",color:"#2563eb"},children:[Oe(Z.total)," "]})]})]})})}),s.jsx("div",{style:{marginTop:"8mm",paddingTop:"4mm",borderTop:"1px dashed #999",color:"#000"},children:s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"10pt"},children:[s.jsxs("div",{style:{textAlign:"center",width:"45%"},children:[s.jsx("p",{style:{fontWeight:"bold",margin:"0 0 10mm 0",color:"#000"},children:"Khch hng"}),s.jsx("p",{style:{margin:"0",fontSize:"9pt",color:"#666"},children:"(K v ghi r h tn)"})]}),s.jsxs("div",{style:{textAlign:"center",width:"45%"},children:[s.jsx("p",{style:{fontWeight:"bold",margin:"0 0 10mm 0",color:"#000"},children:"Nhn vin"}),s.jsx("p",{style:{margin:"0",fontSize:"9pt",color:"#666"},children:"(K v ghi r h tn)"})]})]})}),s.jsxs("div",{style:{marginTop:"4mm",padding:"3mm",backgroundColor:"#fff9e6",border:"1px solid #ffd700",borderRadius:"2mm",fontSize:"9pt",textAlign:"center",color:"#000"},children:[s.jsx("p",{style:{margin:"0",fontStyle:"italic",color:"#000"},children:"Cm n qu khch  s dng dch v!"}),s.jsx("p",{style:{margin:"1mm 0 0 0",fontStyle:"italic",color:"#000"},children:"Vui lng gi phiu ny  i chiu khi nhn xe"})]})]})})})]})}),s.jsx("div",{id:"work-order-receipt",className:"hidden"})]})},bje=({isOpen:e,onClose:t,customer:r,sales:n,workOrders:a})=>{const[i,l]=T.useState("sales");if(!e||!r)return null;const o=n.filter(k=>{var S,O;return((S=k.customer)==null?void 0:S.id)===r.id||((O=k.customer)==null?void 0:O.phone)===r.phone}),c=a.filter(k=>k.customerPhone===r.phone),d=o.reduce((k,S)=>k+(S.total||0),0),f=c.reduce((k,S)=>k+(S.total||0),0),p=d+f,y=[...o.map(k=>new Date(k.date).toDateString()),...c.map(k=>new Date(k.creationDate||k.id).toDateString())],N=new Set(y).size,w=Math.floor(p/1e4);return s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[70] p-4 backdrop-blur-sm",children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg w-full max-w-5xl max-h-[90vh] overflow-hidden flex flex-col shadow-2xl",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200 dark:border-slate-700",children:[s.jsxs("div",{children:[s.jsxs("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:["Lch s: ",r.name]}),s.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[" ",r.phone]})]}),s.jsx("button",{onClick:t,className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg transition-colors",children:s.jsx(xp,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 p-6 bg-slate-50 dark:bg-slate-900/50 border-b border-slate-200 dark:border-slate-700",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:o.length}),s.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:"Ha n"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:c.length}),s.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:"Phiu SC"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:Oe(p)}),s.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:"Tng chi"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-orange-600 dark:text-orange-400",children:N}),s.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:"Ln n"})]}),s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400",children:[" ",w.toLocaleString()]}),s.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:"im TL"})]})]}),s.jsxs("div",{className:"flex gap-4 px-6 pt-4 border-b border-slate-200 dark:border-slate-700 overflow-x-auto no-scrollbar",children:[s.jsxs("button",{onClick:()=>l("sales"),className:`px-4 py-2 font-medium transition-colors ${i==="sales"?"text-blue-600 dark:text-blue-400 border-b-2 border-blue-600":"text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-slate-100"}`,children:[" Ha n (",o.length,")"]}),s.jsxs("button",{onClick:()=>l("workorders"),className:`px-4 py-2 font-medium transition-colors ${i==="workorders"?"text-blue-600 dark:text-blue-400 border-b-2 border-blue-600":"text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-slate-100"}`,children:[" Phiu sa cha (",c.length,")"]})]}),s.jsx("div",{className:"flex-1 overflow-auto p-6 custom-scrollbar",children:i==="sales"?s.jsx("div",{className:"space-y-3",children:o.length===0?s.jsx("div",{className:"text-center py-12 text-slate-500",children:"Cha c ha n no"}):o.map(k=>s.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg p-4 hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors",children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-bold text-blue-600 dark:text-blue-400",children:k.sale_code||k.id}),s.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:Bn(k.date)})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-lg font-bold text-slate-900 dark:text-slate-100",children:Oe(k.total)}),s.jsx("div",{className:"text-xs text-slate-500",children:k.paymentMethod==="cash"?" Tin mt":" CK"})]})]}),s.jsx("div",{className:"space-y-1",children:k.items.map((S,O)=>s.jsxs("div",{className:"text-sm text-slate-700 dark:text-slate-300 flex justify-between",children:[s.jsxs("span",{children:[S.quantity," x ",S.partName]}),s.jsx("span",{className:"font-medium",children:Oe(S.quantity*S.sellingPrice)})]},O))})]},k.id))}):s.jsx("div",{className:"space-y-3",children:c.length===0?s.jsx("div",{className:"text-center py-12 text-slate-500",children:"Cha c phiu sa cha no"}):c.map(k=>{const S=k.status==="Tr my"||k.status===" sa xong",O=k.status==="ang sa",E=S?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-300":O?"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300":"bg-slate-100 text-slate-700 dark:bg-slate-700 dark:text-slate-300",D=S?"Hon thnh":O?"ang SC":"Ch x l";return s.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg p-4 hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors",children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-bold text-green-600 dark:text-green-400",children:B1(k.id)}),s.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:[k.vehicleModel," - ",k.licensePlate]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-lg font-bold text-slate-900 dark:text-slate-100",children:Oe(k.total)}),s.jsx("div",{className:`text-xs px-2 py-1 rounded inline-block ${E}`,children:D})]})]}),s.jsxs("div",{className:"text-sm text-slate-700 dark:text-slate-300",children:[s.jsxs("div",{className:"mb-2",children:[s.jsx("span",{className:"font-medium",children:"Vn :"})," ",k.issueDescription]}),k.partsUsed&&k.partsUsed.length>0&&s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Ph tng:"}),s.jsx("div",{className:"ml-4 space-y-1 mt-1",children:k.partsUsed.map((q,W)=>s.jsxs("div",{className:"text-xs flex justify-between",children:[s.jsxs("span",{children:[q.quantity," x ",q.name]}),s.jsx("span",{children:Oe(q.price*q.quantity)})]},W))})]})]})]},k.id)})})}),s.jsx("div",{className:"p-4 border-t border-slate-200 dark:border-slate-700 flex justify-end",children:s.jsx("button",{onClick:t,className:"px-4 py-2 bg-slate-600 hover:bg-slate-700 text-white rounded-lg transition-colors",children:"ng"})})]})})},vje=e=>{const t=e.loyaltyPoints||0,r=e.totalSpent||0,n=e.visitCount||0,a=e.lastVisit?new Date(e.lastVisit):new Date,i=Math.floor((Date.now()-a.getTime())/(1e3*60*60*24));return t>=5e3||r>=2e7||n>=20?"VIP":t>=2e3||r>=1e7||n>=10?"Loyal":i>180&&n>0?"Lost":i>90&&n>0?"At Risk":n>=2&&n<10?"Potential":"New"},yje=()=>{const{data:e=[],isLoading:t,refetch:r}=jF(),n=Gee(),a=Yee(),[i,l]=T.useState(20),o=async Le=>{if(Le.id)await a.mutateAsync({id:Le.id,updates:Le});else{const xe={...Le,id:`CUS-${Date.now()}-${Math.random().toString(16).slice(2)}`};await n.mutateAsync(xe)}r(),p(null)},[c,d]=T.useState(""),[f,p]=T.useState(null),[y,g]=T.useState(!1),[N,w]=T.useState(!1),[k,S]=T.useState("customers"),[O,E]=T.useState("all"),[D,q]=T.useState(null),[W,R]=T.useState("grid"),[U,z]=T.useState(!1),{data:Z=[]}=Mb(),{data:H=[]}=zV();T.useEffect(()=>{l(20)},[c,O]);const K=Le=>{const xe=Z.filter(Q=>{var Ce,me;return((Ce=Q.customer)==null?void 0:Ce.id)===Le.id||((me=Q.customer)==null?void 0:me.phone)===Le.phone}),B=H.filter(Q=>Q.customerPhone===Le.phone),ee=xe.reduce((Q,Ce)=>Q+(Ce.total||0),0),Y=B.reduce((Q,Ce)=>Q+(Ce.total||0),0),re=ee+Y;return Math.floor(re/1e4)};T.useEffect(()=>{e.forEach(Le=>{if(!Le.segment){const xe=vje(Le);a.mutate({id:Le.id,updates:{segment:xe}})}})},[e.length]);const J=T.useMemo(()=>{const Le=c.toLowerCase();let xe=e.filter(B=>B.name.toLowerCase().includes(Le)||B.phone&&B.phone.includes(Le));if(O!=="all"){const ee={vip:"VIP",loyal:"Loyal",potential:"Potential","at-risk":"At Risk",lost:"Lost",new:"New"}[O];xe=xe.filter(Y=>Y.segment===ee)}return xe},[e,c,O]),ae=T.useMemo(()=>J.slice(0,i),[J,i]),se=async Le=>{confirm("Xc nhn xo khch hng ny?")&&(await a.mutateAsync({id:Le,updates:{status:"inactive"}}),r())},ue=T.useMemo(()=>{const Le=e.length,xe=e.filter(B=>B.status==="active").length;return{total:Le,active:xe,newThisMonth:e.filter(B=>{if(!B.created_at)return!1;const ee=new Date(B.created_at),Y=new Date;return ee.getMonth()===Y.getMonth()&&ee.getFullYear()===Y.getFullYear()}).length,revenue:0,vip:e.filter(B=>B.segment==="VIP").length,loyal:e.filter(B=>B.segment==="Loyal").length,potential:e.filter(B=>B.segment==="Potential").length,atRisk:e.filter(B=>B.segment==="At Risk").length,lost:e.filter(B=>B.segment==="Lost").length,new:e.filter(B=>B.segment==="New").length}},[e]),fe=T.useMemo(()=>[{id:"all",label:"Tt c",hint:"Ton b danh sch",count:ue.total,icon:"",activeClasses:"border-slate-300 bg-slate-100/80 text-slate-900 shadow-sm"},{id:"vip",label:"VIP",hint:" 5.000 im",count:ue.vip,icon:"",activeClasses:"border-purple-200 bg-purple-50 text-purple-700 shadow-sm"},{id:"loyal",label:"Trung thnh",hint:"10+ lt",count:ue.loyal,icon:"",activeClasses:"border-blue-200 bg-blue-50 text-blue-700 shadow-sm"},{id:"potential",label:"Tim nng",hint:"2-9 lt",count:ue.potential,icon:"",activeClasses:"border-green-200 bg-green-50 text-green-700 shadow-sm"},{id:"at-risk",label:"Cn chm sc",hint:">90 ngy cha n",count:ue.atRisk,icon:"",activeClasses:"border-orange-200 bg-orange-50 text-orange-700 shadow-sm"},{id:"lost",label:" mt",hint:"Khng quay li",count:ue.lost,icon:"",activeClasses:"border-red-200 bg-red-50 text-red-700 shadow-sm"},{id:"new",label:"Khch mi",hint:"Thng ny",count:ue.new,icon:"",activeClasses:"border-cyan-200 bg-cyan-50 text-cyan-700 shadow-sm"}],[ue]),ke=T.useMemo(()=>[{id:"total",title:"Tng KH",value:ue.total.toLocaleString(),subLabel:`${ue.active} hot ng`,gradient:"from-blue-50 to-blue-100 dark:from-blue-900/30 dark:to-blue-800/20",border:"border-blue-200 dark:border-blue-800",labelClass:"text-blue-700 dark:text-blue-300",valueClass:"text-blue-900 dark:text-blue-100"},{id:"new",title:"Khch mi",value:ue.newThisMonth.toLocaleString(),subLabel:" 0% thng ny",gradient:"from-green-50 to-emerald-100 dark:from-green-900/30 dark:to-emerald-800/20",border:"border-green-200 dark:border-green-800",labelClass:"text-green-700 dark:text-green-300",valueClass:"text-green-900 dark:text-green-100"},{id:"avg",title:"DT TB",value:"0 ",subLabel:"/ khch hng",gradient:"from-purple-50 to-violet-100 dark:from-purple-900/30 dark:to-violet-800/20",border:"border-purple-200 dark:border-purple-800",labelClass:"text-purple-700 dark:text-purple-300",valueClass:"text-purple-900 dark:text-purple-100"},{id:"atRisk",title:"Cn CS",value:ue.atRisk.toLocaleString(),subLabel:"0 tim nng",gradient:"from-orange-50 to-amber-100 dark:from-orange-900/30 dark:to-amber-800/20",border:"border-orange-200 dark:border-orange-800",labelClass:"text-orange-700 dark:text-orange-300",valueClass:"text-orange-900 dark:text-orange-100"}],[ue]),_e={VIP:{label:"VIP",badgeClass:"bg-purple-100 text-purple-700 border border-purple-200 dark:bg-purple-900/30 dark:text-purple-200 dark:border-purple-700",avatarClass:"bg-purple-50 text-purple-700 dark:bg-purple-900/40",icon:""},Loyal:{label:"Trung thnh",badgeClass:"bg-blue-100 text-blue-700 border border-blue-200 dark:bg-blue-900/30 dark:text-blue-200 dark:border-blue-700",avatarClass:"bg-blue-50 text-blue-700 dark:bg-blue-900/40",icon:""},Potential:{label:"Tim nng",badgeClass:"bg-green-100 text-green-700 border border-green-200 dark:bg-green-900/30 dark:text-green-200 dark:border-green-700",avatarClass:"bg-green-50 text-green-700 dark:bg-green-900/40",icon:""},"At Risk":{label:"Cn chm sc",badgeClass:"bg-orange-100 text-orange-700 border border-orange-200 dark:bg-orange-900/30 dark:text-orange-200 dark:border-orange-700",avatarClass:"bg-orange-50 text-orange-700 dark:bg-orange-900/40",icon:""},Lost:{label:" mt",badgeClass:"bg-red-100 text-red-600 border border-red-200 dark:bg-red-900/30 dark:text-red-200 dark:border-red-700",avatarClass:"bg-red-50 text-red-600 dark:bg-red-900/40",icon:""},New:{label:"Khch mi",badgeClass:"bg-cyan-100 text-cyan-700 border border-cyan-200 dark:bg-cyan-900/30 dark:text-cyan-200 dark:border-cyan-700",avatarClass:"bg-cyan-50 text-cyan-700 dark:bg-cyan-900/40",icon:""},default:{label:"Khch hng",badgeClass:"bg-slate-100 text-slate-700 border border-slate-200 dark:bg-slate-800 dark:text-slate-200 dark:border-slate-600",avatarClass:"bg-slate-100 text-slate-600 dark:bg-slate-800",icon:""}};return s.jsxs("div",{className:"h-full flex flex-col bg-slate-50 dark:bg-slate-900 overflow-hidden",children:[s.jsx("div",{className:"bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 flex-none z-20 shadow-sm",children:s.jsxs("div",{className:"flex items-center px-6 overflow-x-auto no-scrollbar",children:[s.jsxs("button",{onClick:()=>S("customers"),className:`flex items-center gap-2 px-4 py-3 md:py-4 border-b-2 font-medium text-sm transition-colors whitespace-nowrap ${k==="customers"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-slate-200"}`,children:[s.jsx(qge,{className:"w-5 h-5"}),s.jsxs("span",{children:["Khch hng (",ue.total,")"]})]}),s.jsxs("button",{onClick:()=>S("suppliers"),className:`flex items-center gap-2 px-4 py-3 md:py-4 border-b-2 font-medium text-sm transition-colors whitespace-nowrap ${k==="suppliers"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-slate-200"}`,children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),s.jsx("span",{children:"Nh cung cp (0)"})]})]})}),k==="customers"?s.jsxs("div",{className:"flex-1 overflow-y-auto p-6 custom-scrollbar relative",children:[s.jsxs("div",{className:"sticky top-0 z-10 pb-4 -mt-2 pt-2 bg-slate-50/95 dark:bg-slate-900/95 backdrop-blur-sm transition-all",children:[s.jsxs("div",{className:"flex flex-col md:flex-row gap-3 mb-4",children:[s.jsxs("div",{className:"flex-1 relative w-full",children:[s.jsx("svg",{className:"w-5 h-5 absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),s.jsx("input",{type:"text",placeholder:"Tm theo tn, ST, bin s xe...",value:c,onChange:Le=>d(Le.target.value),className:"w-full pl-10 pr-14 md:pr-4 py-2.5 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 shadow-sm"}),s.jsxs("button",{onClick:()=>z(!0),className:"md:hidden absolute right-2 top-1/2 -translate-y-1/2 inline-flex items-center gap-1 rounded-full border border-slate-200 bg-white px-3 py-1.5 text-[11px] font-semibold text-slate-600 shadow-sm transition-colors hover:text-slate-900 dark:border-slate-700 dark:bg-slate-800 dark:text-slate-300",children:[s.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.75a.75.75 0 100-1.5.75.75 0 000 1.5zm0 6a.75.75 0 100-1.5.75.75 0 000 1.5zm0 6a.75.75 0 100-1.5.75.75 0 000 1.5z"})}),s.jsx("span",{children:"Tc v"})]})]}),s.jsxs("div",{className:"hidden md:flex gap-2 overflow-x-auto pb-2 md:pb-0 no-scrollbar",children:[s.jsxs("button",{onClick:()=>w(!0),className:"flex items-center gap-2 px-4 py-2.5 bg-green-600 hover:bg-green-700 text-white rounded-lg font-medium transition-colors whitespace-nowrap shadow-sm",children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),s.jsx("span",{children:"Upload DS"})]}),s.jsxs("button",{className:"flex items-center gap-2 px-4 py-2.5 bg-orange-500 hover:bg-orange-600 text-white rounded-lg font-medium transition-colors whitespace-nowrap shadow-sm",onClick:()=>alert("Tnh nng ang pht trin"),children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),s.jsx("span",{children:"Nhc BD"})]}),s.jsxs("button",{onClick:()=>p({}),className:"flex items-center gap-2 px-4 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors whitespace-nowrap shadow-sm",children:[s.jsx(Ac,{className:"w-5 h-5"}),s.jsx("span",{children:"Thm KH"})]})]})]}),s.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white/80 p-4 shadow-sm dark:border-slate-700 dark:bg-slate-800/60 md:border-none md:bg-transparent md:p-0 md:shadow-none",children:[s.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-[11px] font-semibold uppercase tracking-wide text-slate-500",children:"Phn khc khch hng"}),s.jsx("p",{className:"text-xs text-slate-400",children:"Chm  lc nhanh"})]}),s.jsxs("div",{className:"hidden sm:inline-flex rounded-2xl border border-slate-200 bg-white p-1 text-xs font-semibold dark:border-slate-600 dark:bg-slate-900/40",children:[s.jsxs("button",{onClick:()=>R("grid"),className:`flex flex-1 items-center justify-center gap-1 rounded-xl px-3 py-2 transition-colors sm:flex-none ${W==="grid"?"bg-slate-900 text-white dark:bg-slate-100 dark:text-slate-900":"text-slate-500 hover:text-slate-900 dark:text-slate-400 dark:hover:text-white"}`,children:[s.jsx(mee,{className:"h-4 w-4"}),s.jsx("span",{children:"Th"})]}),s.jsxs("button",{onClick:()=>R("list"),className:`flex flex-1 items-center justify-center gap-1 rounded-xl px-3 py-2 transition-colors sm:flex-none ${W==="list"?"bg-slate-900 text-white dark:bg-slate-100 dark:text-slate-900":"text-slate-500 hover:text-slate-900 dark:text-slate-400 dark:hover:text-white"}`,children:[s.jsx(mF,{className:"h-4 w-4"}),s.jsx("span",{children:"Danh sch"})]})]})]}),s.jsx("div",{className:"mt-3 flex gap-3 overflow-x-auto pb-1 no-scrollbar snap-x snap-mandatory md:mt-4 md:snap-none",children:fe.map(Le=>s.jsx("button",{onClick:()=>E(Le.id),className:`min-w-[190px] snap-start rounded-2xl border px-4 py-3 text-left transition-all md:min-w-0 ${O===Le.id?`${Le.activeClasses} dark:bg-slate-800/80 dark:border-slate-600 dark:text-white`:"bg-white dark:bg-slate-800 text-slate-600 dark:text-slate-300 border-slate-200 dark:border-slate-700 hover:border-slate-300"}`,children:s.jsxs("div",{className:"flex items-center justify-between gap-3",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"text-lg",children:Le.icon}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-semibold",children:Le.label}),s.jsx("p",{className:"text-[11px] text-slate-500",children:Le.hint})]})]}),s.jsx("div",{className:"text-lg font-black text-slate-900 dark:text-slate-100",children:Le.count})]})},Le.id))})]})]}),s.jsxs("div",{className:"mb-6 mt-2",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx("svg",{className:"w-5 h-5 text-slate-600 dark:text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),s.jsx("h2",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Thng k tng quan"})]}),s.jsx("div",{className:"flex gap-3 overflow-x-auto pb-2 snap-x snap-mandatory md:grid md:grid-cols-4 md:gap-4 md:overflow-visible md:snap-none",children:ke.map(Le=>s.jsxs("div",{className:`snap-start min-w-[170px] rounded-lg border bg-gradient-to-br p-3 md:p-4 ${Le.gradient} ${Le.border}`,children:[s.jsx("div",{className:`text-[10px] md:text-sm font-semibold mb-1 uppercase ${Le.labelClass}`,children:Le.title}),s.jsx("div",{className:`text-2xl md:text-3xl font-black ${Le.valueClass}`,children:Le.value}),s.jsx("div",{className:"text-[10px] md:text-xs mt-0.5 text-slate-600 dark:text-slate-300",children:Le.subLabel})]},Le.id))})]}),J.length===0?s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-12 text-center",children:[s.jsx("div",{className:"flex justify-center mb-4",children:s.jsx("svg",{className:"w-16 h-16 text-slate-300 dark:text-slate-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})})}),s.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg",children:"Khng tm thy khch hng no."})]}):s.jsxs(s.Fragment,{children:[W==="grid"?s.jsx("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3",children:ae.map(Le=>{const xe=Le.segment&&_e[Le.segment]||_e.default,B=K(Le),ee=Math.min(B/1e4*100,100),Y=Le.totalSpent||0,re=Le.visitCount||0,Q=Le.vehicles||[];Q.find(me=>me.isPrimary)||Q[0];const Ce=Q.length>2;return s.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-5 shadow-sm transition-shadow hover:shadow-lg dark:border-slate-700 dark:bg-slate-800",children:[s.jsxs("div",{className:"flex items-start justify-between gap-3",children:[s.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[s.jsx("div",{className:`flex h-12 w-12 items-center justify-center rounded-2xl text-2xl ${xe.avatarClass}`,children:xe.icon}),s.jsxs("div",{className:"min-w-0",children:[s.jsx("p",{className:"text-base font-semibold text-slate-900 dark:text-slate-100 truncate",children:Le.name||"Cha t tn"}),s.jsxs("p",{className:"mt-0.5 flex flex-wrap items-center gap-2 text-xs text-slate-500 dark:text-slate-400",children:[s.jsx("span",{children:Le.phone||"Cha c s"}),Le.lastVisit&&s.jsxs("span",{className:"text-slate-400",children:[" Ln cui ",Bn(Le.lastVisit)]})]})]})]}),s.jsx("span",{className:`text-[10px] font-semibold uppercase px-3 py-1 rounded-full ${xe.badgeClass}`,children:xe.label})]}),Q.length>0?s.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[Q.slice(0,2).map(me=>s.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full border border-slate-200 bg-slate-50 px-3 py-1 text-xs font-medium text-slate-600 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-200",children:[me.isPrimary&&s.jsx("span",{className:"text-amber-500",children:""}),s.jsx("span",{children:me.model||"Khng r"}),me.licensePlate&&s.jsxs("span",{className:"text-[10px] text-slate-400",children:[" ",me.licensePlate]})]},me.id)),Ce&&s.jsxs("span",{className:"rounded-full bg-slate-100 px-3 py-1 text-xs text-slate-500 dark:bg-slate-700 dark:text-slate-300",children:["+",Q.length-2," xe na"]})]}):Le.vehicleModel?s.jsxs("div",{className:"mt-4 inline-flex items-center gap-2 rounded-full border border-slate-200 bg-slate-50 px-3 py-1 text-xs text-slate-600 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-200",children:[s.jsx(j6,{className:"h-3.5 w-3.5"}),s.jsxs("span",{children:[Le.vehicleModel,Le.licensePlate?`  ${Le.licensePlate}`:""]})]}):null,s.jsxs("div",{className:"mt-4 grid grid-cols-3 gap-3 text-sm",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-[11px] uppercase text-slate-500",children:"Tng chi"}),s.jsx("p",{className:"text-base font-semibold text-slate-900 dark:text-slate-100",children:Oe(Y)})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-[11px] uppercase text-slate-500",children:"Ln n"}),s.jsx("p",{className:"text-base font-semibold text-slate-900 dark:text-slate-100",children:re})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-[11px] uppercase text-slate-500",children:"Cui cng"}),s.jsx("p",{className:"text-base font-semibold text-slate-900 dark:text-slate-100",children:Le.lastVisit?Bn(Le.lastVisit):""})]})]}),s.jsxs("div",{className:"mt-3",children:[s.jsxs("div",{className:"flex items-center justify-between text-[11px] font-semibold text-amber-700 dark:text-amber-300",children:[s.jsx("span",{children:"im tch lu"}),s.jsx("span",{children:B.toLocaleString()})]}),s.jsx("div",{className:"mt-1 h-1.5 rounded-full bg-amber-100 dark:bg-amber-900/50",children:s.jsx("div",{className:"h-full rounded-full bg-gradient-to-r from-amber-500 via-yellow-400 to-orange-500",style:{width:`${ee}%`}})})]}),"Chm  lc nhanh",s.jsxs("div",{className:"mt-4 flex flex-wrap items-center gap-2 border-t border-dashed border-slate-200 pt-3 dark:border-slate-700",children:[s.jsx("button",{onClick:()=>q(Le),className:"rounded-full bg-blue-50 px-3 py-1.5 text-xs font-semibold text-blue-600 transition-colors hover:bg-blue-100 dark:bg-blue-900/30 dark:text-blue-300",children:"Xem lch s"}),s.jsx("button",{onClick:()=>p(Le),className:"rounded-full bg-slate-100 px-3 py-1.5 text-xs font-semibold text-slate-700 transition-colors hover:bg-slate-200 dark:bg-slate-700 dark:text-slate-200",children:"Chnh sa"}),s.jsx("button",{onClick:()=>se(Le.id),className:"rounded-full bg-red-50 px-3 py-1.5 text-xs font-semibold text-red-600 transition-colors hover:bg-red-100 dark:bg-red-900/30 dark:text-red-300",children:"Xa"})]})]},Le.id)})}):s.jsx("div",{className:"overflow-x-auto rounded-2xl border border-slate-200 bg-white shadow-sm dark:border-slate-700 dark:bg-slate-800",children:s.jsxs("table",{className:"min-w-full text-sm",children:[s.jsx("thead",{className:"bg-slate-50 text-left text-[11px] font-semibold uppercase tracking-wide text-slate-500 dark:bg-slate-900/40 dark:text-slate-300",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3",children:"Khch hng"}),s.jsx("th",{className:"px-4 py-3",children:"Lin h"}),s.jsx("th",{className:"px-4 py-3",children:"Xe"}),s.jsx("th",{className:"px-4 py-3",children:"Tng chi"}),s.jsx("th",{className:"px-4 py-3",children:"Ln n"}),s.jsx("th",{className:"px-4 py-3",children:"Ln cui"}),s.jsx("th",{className:"px-4 py-3 text-right",children:"Tc v"})]})}),s.jsx("tbody",{children:ae.map(Le=>{const xe=Le.segment&&_e[Le.segment]||_e.default,B=Le.vehicles||[],ee=B.find(re=>re.isPrimary)||B[0],Y=ee?`${ee.model||"Khng r"}${ee.licensePlate?`  ${ee.licensePlate}`:""}`:Le.vehicleModel?`${Le.vehicleModel}${Le.licensePlate?`  ${Le.licensePlate}`:""}`:"";return s.jsxs("tr",{className:"border-t border-slate-100 text-slate-600 dark:border-slate-700/60 dark:text-slate-300",children:[s.jsxs("td",{className:"px-4 py-3 align-top",children:[s.jsx("div",{className:"font-semibold text-slate-900 dark:text-slate-100",children:Le.name||"Cha t tn"}),s.jsxs("span",{className:`mt-1 inline-flex items-center gap-1 rounded-full px-2 py-0.5 text-[10px] font-semibold ${xe.badgeClass}`,children:[xe.icon," ",xe.label]})]}),s.jsxs("td",{className:"px-4 py-3 align-top",children:[s.jsx("div",{className:"font-medium text-slate-900 dark:text-slate-100",children:Le.phone||""}),s.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:["im:"," ",K(Le).toLocaleString()]})]}),s.jsx("td",{className:"px-4 py-3 align-top text-slate-900 dark:text-slate-100",children:Y}),s.jsx("td",{className:"px-4 py-3 align-top font-semibold text-slate-900 dark:text-slate-100",children:Oe(Le.totalSpent||0)}),s.jsx("td",{className:"px-4 py-3 align-top text-slate-900 dark:text-slate-100",children:Le.visitCount||0}),s.jsx("td",{className:"px-4 py-3 align-top text-slate-900 dark:text-slate-100",children:Le.lastVisit?Bn(Le.lastVisit):""}),s.jsx("td",{className:"px-4 py-3 align-top",children:s.jsxs("div",{className:"flex items-center justify-end gap-2",children:[s.jsx("button",{onClick:()=>q(Le),className:"rounded-lg border border-slate-200 p-2 text-slate-500 transition-colors hover:border-blue-500 hover:text-blue-600 dark:border-slate-600 dark:text-slate-400 dark:hover:border-blue-500",title:"Xem lch s",children:s.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),s.jsx("button",{onClick:()=>p(Le),className:"rounded-lg border border-slate-200 p-2 text-slate-500 transition-colors hover:border-blue-500 hover:text-blue-600 dark:border-slate-600 dark:text-slate-400 dark:hover:border-blue-500",title:"Chnh sa",children:s.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),s.jsx("button",{onClick:()=>se(Le.id),className:"rounded-lg border border-red-200 p-2 text-red-500 transition-colors hover:bg-red-50 dark:border-red-900/60 dark:text-red-300 dark:hover:bg-red-900/40",title:"Xa",children:s.jsx(wH,{className:"h-4 w-4"})})]})})]},Le.id)})})]})}),i<J.length&&s.jsx("div",{className:"flex justify-center pb-4 pt-8",children:s.jsxs("button",{onClick:()=>l(Le=>Le+20),className:"group flex items-center gap-2 rounded-full border border-slate-200 bg-white px-6 py-3 text-sm font-semibold text-slate-600 shadow-sm transition hover:border-blue-500 hover:text-blue-600 hover:shadow-md dark:border-slate-600 dark:bg-slate-800 dark:text-slate-200",children:[s.jsxs("span",{children:["Hin th thm"," ",Math.min(20,J.length-i)," khch hng"]}),s.jsx("svg",{className:"h-4 w-4 transition-transform group-hover:translate-y-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})})]}),s.jsxs("button",{onClick:()=>p({}),className:"md:hidden fixed bottom-28 right-5 z-40 inline-flex items-center justify-center rounded-full bg-blue-600 p-4 text-white shadow-lg transition hover:bg-blue-700",children:[s.jsx(Ac,{className:"h-6 w-6"}),s.jsx("span",{className:"sr-only",children:"Thm khch hng"})]}),U&&s.jsxs("div",{className:"md:hidden fixed inset-0 z-30",children:[s.jsx("button",{onClick:()=>z(!1),className:"absolute inset-0 bg-black/40","aria-label":"ng"}),s.jsxs("div",{className:"absolute inset-x-0 bottom-0 rounded-t-3xl bg-white p-5 shadow-2xl dark:bg-slate-800",children:[s.jsx("div",{className:"mx-auto mb-4 h-1.5 w-12 rounded-full bg-slate-200 dark:bg-slate-600"}),s.jsx("h3",{className:"mb-4 text-sm font-semibold text-slate-600 dark:text-slate-300",children:"Tc v nhanh"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("button",{onClick:()=>{z(!1),w(!0)},className:"flex w-full items-center gap-3 rounded-2xl border border-slate-200 bg-slate-50 px-4 py-3 text-left text-sm font-semibold text-slate-700 transition hover:border-blue-500 dark:border-slate-700 dark:bg-slate-700/40 dark:text-slate-200",children:[s.jsx("svg",{className:"h-5 w-5 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),"Upload danh sch"]}),s.jsxs("button",{onClick:()=>{z(!1),alert("Tnh nng ang pht trin")},className:"flex w-full items-center gap-3 rounded-2xl border border-slate-200 bg-slate-50 px-4 py-3 text-left text-sm font-semibold text-slate-700 transition hover:border-blue-500 dark:border-slate-700 dark:bg-slate-700/40 dark:text-slate-200",children:[s.jsx("svg",{className:"h-5 w-5 text-orange-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),"Nhc bo dng"]}),s.jsxs("button",{onClick:()=>{z(!1),p({})},className:"flex w-full items-center gap-3 rounded-2xl bg-blue-600 px-4 py-3 text-left text-sm font-semibold text-white shadow-lg transition hover:bg-blue-700",children:[s.jsx(Ac,{className:"h-5 w-5"})," Thm khch hng"]})]})]})]})]}):s.jsxs("div",{className:"flex-1 overflow-auto p-6 custom-scrollbar",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx("svg",{className:"w-5 h-5 absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),s.jsx("input",{type:"text",placeholder:"Tm theo tn hoc s in thoi...",className:"w-full pl-10 pr-4 py-2.5 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{className:"text-slate-600 dark:text-slate-400 text-sm font-medium",children:["Tng: ",s.jsx("span",{className:"font-bold",children:"0"})," nh cung cp"]}),s.jsxs("button",{onClick:()=>w(!0),className:"flex items-center gap-2 px-4 py-2.5 bg-green-600 hover:bg-green-700 text-white rounded-lg font-medium transition-colors",children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),s.jsx("span",{children:"Upload CSV"})]}),s.jsxs("button",{onClick:()=>g(!0),className:"flex items-center gap-2 px-4 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors",children:[s.jsx(Ac,{className:"w-5 h-5"}),s.jsx("span",{children:"Thm mi"})]})]}),s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-12 text-center",children:[s.jsx("div",{className:"flex justify-center mb-4",children:s.jsx("svg",{className:"w-16 h-16 text-slate-300 dark:text-slate-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),s.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg",children:"Cha c nh cung cp."})]})]}),s.jsx(bje,{isOpen:!!D,onClose:()=>q(null),customer:D,sales:Z,workOrders:H}),f&&s.jsx(wje,{customer:f,onSave:o,onClose:()=>p(null)}),y&&s.jsx(kje,{onClose:()=>g(!1)}),N&&s.jsx(Nje,{onClose:()=>w(!1),type:k})]})},wje=({customer:e,onSave:t,onClose:r})=>{const[n,a]=T.useState(e.name||""),[i,l]=T.useState(e.phone||""),o=()=>e.vehicles&&e.vehicles.length>0?e.vehicles:e.vehicleModel||e.licensePlate?[{id:`VEH-${Date.now()}`,model:e.vehicleModel||"",licensePlate:e.licensePlate||"",isPrimary:!0}]:[],[c,d]=T.useState(o()),[f,p]=T.useState({model:"",licensePlate:""}),y=()=>{if(!f.model.trim()&&!f.licensePlate.trim())return;const k={id:`VEH-${Date.now()}`,model:f.model.trim(),licensePlate:f.licensePlate.trim(),isPrimary:c.length===0};d([...c,k]),p({model:"",licensePlate:""})},g=k=>{d(c.filter(S=>S.id!==k))},N=k=>{d(c.map(S=>({...S,isPrimary:S.id===k})))},w=k=>{if(k.preventDefault(),!n.trim()){Xe.error("Vui lng nhp tn khch hng");return}if(i.trim()){const O=v6e(i.trim());if(!O.ok){Xe.error(O.error||"S in thoi khng hp l");return}}const S=c.find(O=>O.isPrimary)||c[0];t({id:e.id,name:n.trim(),phone:i.trim(),vehicles:c,vehicleModel:(S==null?void 0:S.model)||"",licensePlate:(S==null?void 0:S.licensePlate)||""}),r()};return s.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:s.jsxs("div",{className:"bg-slate-800 rounded-xl shadow-2xl max-w-md w-full p-6 border border-slate-700",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-white",children:e.id?"Sa khch hng":"Thm khch hng"}),s.jsx("button",{onClick:r,className:"text-slate-400 hover:text-white transition-colors",children:s.jsx(xp,{className:"w-6 h-6"})})]}),s.jsxs("form",{onSubmit:w,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Tn khch"}),s.jsx("input",{type:"text",placeholder:"Nhp tn khch",required:!0,value:n,onChange:k=>a(k.target.value),className:"w-full px-4 py-3 bg-slate-900 border border-slate-600 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"S in thoi"}),s.jsx("input",{type:"text",placeholder:"VD: 09xxxx",value:i,onChange:k=>l(k.target.value),className:"w-full px-4 py-3 bg-slate-900 border border-slate-600 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Danh sch xe"}),c.length>0&&s.jsx("div",{className:"space-y-2 mb-3",children:c.map(k=>s.jsxs("div",{className:"flex items-center gap-2 p-2 bg-slate-700 rounded-lg",children:[s.jsx("button",{type:"button",onClick:()=>N(k.id),className:`flex-shrink-0 ${k.isPrimary?"text-yellow-400":"text-slate-500 hover:text-yellow-400"}`,title:k.isPrimary?"Xe chnh":"t lm xe chnh",children:s.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})})}),s.jsx(j6,{className:"w-4 h-4 text-blue-400 flex-shrink-0"}),s.jsxs("div",{className:"flex-1 text-sm text-white",children:[s.jsx("span",{className:"font-medium",children:k.model||""}),k.licensePlate&&s.jsxs("span",{className:"text-slate-400 ml-2",children:[" ",k.licensePlate]})]}),s.jsx("button",{type:"button",onClick:()=>g(k.id),className:"flex-shrink-0 text-red-400 hover:text-red-300",title:"Xa xe",children:s.jsx(wH,{className:"w-4 h-4"})})]},k.id))}),s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsx("input",{type:"text",placeholder:"Dng xe",value:f.model,onChange:k=>p({...f,model:k.target.value}),className:"px-3 py-2 bg-slate-900 border border-slate-600 rounded-lg text-white placeholder-slate-500 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"}),s.jsx("input",{type:"text",placeholder:"Bin s",value:f.licensePlate,onChange:k=>p({...f,licensePlate:k.target.value}),className:"px-3 py-2 bg-slate-900 border border-slate-600 rounded-lg text-white placeholder-slate-500 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("button",{type:"button",onClick:y,className:"mt-2 w-full px-3 py-2 bg-green-600 hover:bg-green-700 text-white text-sm rounded-lg font-medium transition-colors flex items-center justify-center gap-2",children:[s.jsx(Ac,{className:"w-4 h-4"}),"Thm xe"]})]}),s.jsxs("div",{className:"flex gap-3 justify-end pt-2",children:[s.jsx("button",{type:"button",onClick:r,className:"px-6 py-2.5 bg-slate-700 hover:bg-slate-600 text-white border border-slate-600 rounded-lg font-medium transition-colors",children:"Hy"}),s.jsx("button",{type:"submit",className:"px-6 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors",children:"Lu"})]})]})]})})},kje=({onClose:e})=>{const[t,r]=T.useState(""),[n,a]=T.useState(""),[i,l]=T.useState(""),[o,c]=T.useState(""),d=f=>{f.preventDefault(),t.trim()&&(alert(`[M phng]  lu nh cung cp: ${t}`),e())};return s.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:s.jsxs("div",{className:"bg-slate-800 rounded-xl shadow-2xl max-w-md w-full p-6 border border-slate-700",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-white",children:"Thm nh cung cp"}),s.jsx("button",{onClick:e,className:"text-slate-400 hover:text-white transition-colors",children:s.jsx(xp,{className:"w-6 h-6"})})]}),s.jsxs("form",{onSubmit:d,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:["Tn nh cung cp ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",placeholder:"Nhp tn NCC",required:!0,value:t,onChange:f=>r(f.target.value),className:"w-full px-4 py-3 bg-slate-900 border border-slate-600 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"S in thoi"}),s.jsx("input",{type:"text",placeholder:"VD: 09xxxx",value:n,onChange:f=>a(f.target.value),className:"w-full px-4 py-3 bg-slate-900 border border-slate-600 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"a ch"}),s.jsx("input",{type:"text",placeholder:"a ch lin h",value:i,onChange:f=>l(f.target.value),className:"w-full px-4 py-3 bg-slate-900 border border-slate-600 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Ghi ch"}),s.jsx("textarea",{rows:3,placeholder:"Ghi ch thm...",value:o,onChange:f=>c(f.target.value),className:"w-full px-4 py-3 bg-slate-900 border border-slate-600 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all resize-none"})]}),s.jsxs("div",{className:"flex gap-3 justify-end pt-2",children:[s.jsx("button",{type:"button",onClick:e,className:"px-6 py-2.5 bg-slate-700 hover:bg-slate-600 text-white border border-slate-600 rounded-lg font-medium transition-colors",children:"Hy"}),s.jsx("button",{type:"submit",className:"px-6 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors",children:"Lu"})]})]})]})})},Nje=({onClose:e,type:t})=>{const r=Xee(),n=T.useRef(null),[a,i]=T.useState([]),[l,o]=T.useState(""),[c,d]=T.useState(!1),f=g=>{var k;const N=(k=g.target.files)==null?void 0:k[0];if(!N)return;o("");const w=new FileReader;w.onload=S=>{var U;const O=(U=S.target)==null?void 0:U.result;if(!O)return;const E=O.split(`
`).map(z=>z.trim()).filter(Boolean);if(E.length===0){o("File CSV trng.");return}const D=E[0].toLowerCase(),W=D.includes("name")||D.includes("phone")||D.includes("tn")||D.includes("st")?E.slice(1):E,R=[];for(const z of W){const Z=z.split(",").map(H=>H.trim());Z.length===0||!Z[0]||R.push({name:Z[0],phone:Z[1]||void 0})}if(R.length===0){o("Khng tm thy d liu hp l trong CSV.");return}i(R)},w.readAsText(N)},p=async()=>{if(a.length!==0){d(!0);try{if(t==="customers"){const g=a.map(N=>({id:typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():`CUS-${Date.now()}-${Math.random().toString(16).slice(2)}`,name:N.name,phone:N.phone||"",created_at:new Date().toISOString()}));await r.mutateAsync(g),alert(` import thnh cng ${g.length} khch hng!`)}else alert("Chc nng import Nh cung cp ang c pht trin. Vui lng thm hook useCreateSuppliersBulk  kch hot.");e()}catch(g){console.error("Import error:",g),o("C li xy ra khi import. Vui lng th li.")}finally{d(!1)}}},y=t==="customers";return s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("h2",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:["Import ",y?"khch hng":"nh cung cp"," t CSV"]}),s.jsx("button",{onClick:e,className:"text-slate-500 hover:text-slate-700",children:s.jsx(xp,{className:"w-6 h-6"})})]}),s.jsxs("div",{className:"space-y-3 text-sm",children:[s.jsxs("p",{className:"text-slate-600 dark:text-slate-300",children:["Chn file CSV vi ct u tin l"," ",s.jsxs("strong",{children:["tn ",y?"khch hng":"nh cung cp"]}),", ct th hai l ",s.jsx("strong",{children:"s in thoi"})," (ty chn)."]}),s.jsx("input",{ref:n,type:"file",accept:".csv",onChange:f,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"}),l&&s.jsx("div",{className:"text-red-600 text-xs",children:l}),a.length>0&&s.jsxs("div",{className:"border rounded p-3 bg-slate-50 dark:bg-slate-900 max-h-64 overflow-y-auto custom-scrollbar",children:[s.jsxs("div",{className:"font-semibold mb-2 text-slate-900 dark:text-slate-100",children:["Xem trc (",a.length," mc):"]}),s.jsxs("table",{className:"w-full text-xs text-slate-700 dark:text-slate-300",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"text-left border-b dark:border-slate-700",children:[s.jsx("th",{className:"p-1",children:"Tn"}),s.jsx("th",{className:"p-1",children:"ST"})]})}),s.jsx("tbody",{children:a.slice(0,20).map((g,N)=>s.jsxs("tr",{className:"border-b dark:border-slate-700",children:[s.jsx("td",{className:"p-1",children:g.name}),s.jsx("td",{className:"p-1",children:g.phone||"--"})]},N))})]})]}),s.jsxs("div",{className:"flex gap-2 justify-end pt-2",children:[s.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 border rounded hover:bg-slate-50 dark:border-slate-600 dark:hover:bg-slate-700 dark:text-slate-300",children:"Hu"}),s.jsx("button",{disabled:a.length===0||c,onClick:p,className:"px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded disabled:opacity-50 disabled:cursor-not-allowed",children:c?"ang import...":`Import ${a.length>0?`(${a.length})`:""}`})]})]})]})})},_je=()=>{const{customers:e,suppliers:t,currentBranchId:r,setCashTransactions:n,cashTransactions:a,setPaymentSources:i,paymentSources:l}=Ba(),{data:o=[],isLoading:c}=PC(),{data:d=[],isLoading:f}=Ok(),p=Tk(),y=kH(),g=Zge(),N=Qge(),w=Jge(),k=ebe(),[S,O]=T.useState(null);T.useEffect(()=>{(async()=>{const{data:We}=await Ot.from("store_settings").select("*").single();We&&O(We)})()},[]);const[E,D]=T.useState("customer"),[q,W]=T.useState(""),[R,U]=T.useState(!1),[z,Z]=T.useState(!1),[H,K]=T.useState([]),[J,ae]=T.useState([]),[se,ue]=T.useState(!1),[fe,ke]=T.useState(null),[_e,Le]=T.useState(!1),[xe,B]=T.useState(!1),[ee,Y]=T.useState(!1),[re,Q]=T.useState(!1),[Ce,me]=T.useState(null),ie=T.useMemo(()=>o.filter(ot=>ot.branchId===r),[o,r]),je=T.useMemo(()=>d.filter(ot=>ot.branchId===r),[d,r]),be=T.useMemo(()=>{if(!q)return ie;const ot=q.toLowerCase();return ie.filter(We=>{var Kt,Dt;return We.customerName.toLowerCase().includes(ot)||((Kt=We.phone)==null?void 0:Kt.includes(ot))||((Dt=We.licensePlate)==null?void 0:Dt.toLowerCase().includes(ot))})},[ie,q]);T.useEffect(()=>{console.log("[DebtManager] branchCustomerDebts count:",ie.length,"branchId:",r)},[ie,r]),T.useEffect(()=>{const ot=We=>{We.target.closest(".debt-menu-dropdown")||ke(null)};return document.addEventListener("mousedown",ot),()=>document.removeEventListener("mousedown",ot)},[]);const le=T.useMemo(()=>{if(!q)return je;const ot=q.toLowerCase();return je.filter(We=>We.supplierName.toLowerCase().includes(ot))},[je,q]),Ee=T.useMemo(()=>ie.reduce((ot,We)=>ot+We.remainingAmount,0),[ie]),Me=T.useMemo(()=>je.reduce((ot,We)=>ot+We.remainingAmount,0),[je]),ye=T.useMemo(()=>H.reduce((ot,We)=>{const Kt=ie.find(Dt=>Dt.customerId===We);return ot+((Kt==null?void 0:Kt.remainingAmount)||0)},0),[H,ie]),at=T.useMemo(()=>J.reduce((ot,We)=>{const Kt=je.find(Dt=>Dt.supplierId===We);return ot+((Kt==null?void 0:Kt.remainingAmount)||0)},0),[J,je]),lt=(ot,We)=>{K(We?[...H,ot]:H.filter(Kt=>Kt!==ot))},ut=(ot,We)=>{ae(We?[...J,ot]:J.filter(Kt=>Kt!==ot))},nt=()=>{ue(!0)};return s.jsxs("div",{className:"h-full flex flex-col bg-secondary-bg",children:[s.jsx("div",{className:"bg-primary-bg border-b border-primary-border",children:s.jsx("div",{className:"flex items-center justify-between px-6",children:s.jsxs("div",{className:"flex items-center w-full md:w-auto",children:[s.jsx("button",{onClick:()=>D("customer"),className:`flex-1 md:flex-none px-6 py-4 font-medium text-sm transition-all text-center ${E==="customer"?"text-cyan-600 dark:text-cyan-400 border-b-2 border-cyan-600 dark:border-cyan-400":"text-secondary-text hover:text-primary-text"}`,children:"Cng n khch hng"}),s.jsx("button",{onClick:()=>D("supplier"),className:`flex-1 md:flex-none px-6 py-4 font-medium text-sm transition-all text-center ${E==="supplier"?"text-cyan-600 dark:text-cyan-400 border-b-2 border-cyan-600 dark:border-cyan-400":"text-secondary-text hover:text-primary-text"}`,children:"Cng n nh cung cp"})]})})}),s.jsx("div",{className:"bg-primary-bg px-6 py-4 border-b border-primary-border",children:c||f?s.jsxs("div",{className:"flex items-center justify-center py-8",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-cyan-600"}),s.jsx("span",{className:"ml-3 text-secondary-text",children:"ang ti d liu..."})]}):s.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center gap-4",children:[s.jsxs("div",{className:"w-full md:flex-1 relative",children:[s.jsx("svg",{className:"w-5 h-5 absolute left-3 top-1/2 -translate-y-1/2 text-tertiary-text",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),s.jsx("input",{type:"text",placeholder:E==="customer"?"Tm ST / Tn KH / Tn sn phm / IMEI":"Tm tn / ST nh cung cp",value:q,onChange:ot=>W(ot.target.value),className:"w-full pl-10 pr-4 py-2.5 bg-primary-bg border border-secondary-border rounded-lg text-primary-text placeholder-tertiary-text focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:border-transparent"})]}),s.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-4 w-full md:w-auto",children:[s.jsxs("div",{className:"text-secondary-text text-sm whitespace-nowrap",children:["Tng cng n:"," ",s.jsx("span",{className:"font-bold text-red-600 dark:text-red-400",children:Oe(E==="customer"?Ee:Me)})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3 w-full md:w-auto",children:[s.jsxs("button",{onClick:()=>Le(!0),className:"flex items-center justify-center gap-2 px-4 py-2.5 bg-green-600 hover:bg-green-700 text-white rounded-lg font-medium transition-colors whitespace-nowrap",children:[s.jsx(Ac,{className:"w-5 h-5"}),s.jsx("span",{children:"Thm cng n"})]}),s.jsxs("button",{onClick:()=>E==="customer"?U(!0):Z(!0),className:"flex items-center justify-center gap-2 px-4 py-2.5 bg-cyan-600 hover:bg-cyan-700 text-white rounded-lg font-medium transition-colors whitespace-nowrap",children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),s.jsx("span",{children:E==="customer"?"Thu n":"Chi tr n"})]})]}),s.jsx("button",{className:"hidden md:block p-2.5 text-secondary-text hover:text-primary-text transition-colors",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"})})})]})]})}),s.jsx("div",{className:"flex-1 overflow-auto",children:E==="customer"?s.jsx("div",{className:"p-6",children:be.length===0?s.jsx("div",{className:"text-center py-12 text-tertiary-text",children:"Khng c cng n."}):s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"hidden md:grid grid-cols-12 gap-4 px-4 py-2 bg-slate-100 dark:bg-slate-700 rounded-lg text-sm font-semibold text-slate-700 dark:text-slate-300",children:[s.jsx("div",{className:"col-span-4",children:"Khch hng n"}),s.jsx("div",{className:"col-span-3",children:"Ni dung"}),s.jsx("div",{className:"col-span-1 text-right",children:"S tin"}),s.jsx("div",{className:"col-span-1 text-right",children:" tr"}),s.jsx("div",{className:"col-span-2 text-right",children:"Cn n"}),s.jsx("div",{className:"col-span-1"})]}),be.map(ot=>{var We,Kt,Dt,fr;return s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-4 items-start bg-primary-bg border border-primary-border rounded-lg p-4 hover:border-cyan-500 hover:shadow-md transition-all cursor-pointer group",onClick:()=>{me(ot),Y(!0)},children:[s.jsxs("div",{className:"col-span-1 md:col-span-4 flex items-start gap-3",children:[s.jsx("input",{type:"checkbox",checked:H.includes(ot.customerId),onChange:xr=>{xr.stopPropagation(),lt(ot.customerId,xr.target.checked)},onClick:xr=>xr.stopPropagation(),className:"mt-1 w-4 h-4 rounded border-secondary-border text-cyan-600 focus:ring-cyan-500"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h3",{className:"text-primary-text font-semibold text-base mb-1 truncate",children:ot.customerName}),s.jsxs("div",{className:"space-y-0.5 text-xs text-secondary-text",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),s.jsx("span",{children:ot.phone||"--"})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsxs("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2V9z M9 22V12h6v10"}),s.jsx("rect",{x:"7",y:"5",width:"10",height:"4",rx:"1",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2})]}),s.jsx("span",{className:"font-mono text-xs font-semibold",children:ot.licensePlate||"--"})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),s.jsx("span",{children:Bn(new Date(ot.createdDate))})]}),s.jsxs("div",{className:"flex items-center gap-1 text-cyan-600 dark:text-cyan-400",children:[s.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),s.jsxs("span",{children:["NV:"," ",((Kt=(We=ot.description.match(/NVK thut:([^\n]+)/))==null?void 0:We[1])==null?void 0:Kt.trim())||((fr=(Dt=ot.description.match(/NV:([^\n]+)/))==null?void 0:Dt[1])==null?void 0:fr.trim())||"N/A"]})]})]})]})]}),s.jsx("div",{className:"col-span-1 md:col-span-3",children:s.jsx("div",{className:"text-sm text-primary-text space-y-1",children:(()=>{const xr=ot.description.split(`
`),nr=xr[0],Mr=xr.find(br=>br.includes("Ph tng  thay:")),rr=Mr?xr.slice(xr.indexOf(Mr)+1,xr.findIndex((br,ar)=>ar>xr.indexOf(Mr)&&(br.includes("Dch v:")||br.includes("Cng lao ng:")))||xr.length).filter(br=>br.trim().startsWith("")):[],Gt=xr.find(br=>br.includes("Dch v:")),Vt=Gt?xr.slice(xr.indexOf(Gt)+1,xr.findIndex((br,ar)=>ar>xr.indexOf(Gt)&&br.includes("Cng lao ng:"))||xr.length).filter(br=>br.trim().startsWith("")):[],cr=xr.find(br=>br.includes("Cng lao ng:"));return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"font-medium",children:nr}),rr.length>0&&s.jsxs("div",{className:"text-xs text-secondary-text",children:[s.jsx("span",{className:"font-semibold",children:"Ph tng:"})," ",rr.length," mn"]}),Vt.length>0&&s.jsxs("div",{className:"text-xs text-secondary-text",children:[s.jsx("span",{className:"font-semibold",children:"Dch v:"})," ",Vt.length," mn"]}),cr&&s.jsx("div",{className:"text-xs text-cyan-600 dark:text-cyan-400",children:cr})]})})()})}),s.jsxs("div",{className:"col-span-1 text-right md:text-right flex justify-between md:block",children:[s.jsx("span",{className:"md:hidden text-sm text-secondary-text",children:"S tin:"}),s.jsx("div",{className:"text-sm font-semibold text-primary-text",children:Oe(ot.totalAmount)})]}),s.jsxs("div",{className:"col-span-1 text-right md:text-right flex justify-between md:block",children:[s.jsx("span",{className:"md:hidden text-sm text-secondary-text",children:" tr:"}),s.jsx("div",{className:"text-sm font-semibold text-green-600 dark:text-green-400",children:Oe(ot.paidAmount)})]}),s.jsxs("div",{className:"col-span-1 md:col-span-2 text-right md:text-right flex justify-between md:block",children:[s.jsx("span",{className:"md:hidden text-sm font-bold text-secondary-text",children:"Cn n:"}),s.jsx("div",{className:"text-lg font-bold text-red-600 dark:text-red-400",children:Oe(ot.remainingAmount)})]}),s.jsx("div",{className:"col-span-1 flex justify-end hidden md:flex",children:s.jsxs("div",{className:"relative debt-menu-dropdown",children:[s.jsx("button",{onClick:()=>ke(fe===ot.id?null:ot.id),className:"p-2 text-secondary-text hover:text-primary-text transition-colors",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"})})}),fe===ot.id&&s.jsxs("div",{className:"absolute right-0 mt-1 w-48 bg-white dark:bg-slate-800 rounded-lg shadow-lg border border-slate-200 dark:border-slate-700 py-1 z-10",children:[s.jsxs("button",{onClick:()=>{me(ot),Y(!0),ke(null)},className:"w-full px-4 py-2 text-left text-sm text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700 flex items-center gap-2",children:[s.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),"Xem chi tit"]}),s.jsxs("button",{onClick:()=>{me(ot),B(!0),ke(null)},className:"w-full px-4 py-2 text-left text-sm text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700 flex items-center gap-2",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Sa"]}),s.jsxs("button",{onClick:()=>{me(ot),Q(!0),ke(null)},className:"w-full px-4 py-2 text-left text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 flex items-center gap-2",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Xa"]})]})]})})]},ot.id)})]})}):s.jsx("div",{className:"p-6",children:le.length===0?s.jsx("div",{className:"text-center py-12 text-tertiary-text",children:"Khng c cng n."}):s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"hidden md:grid grid-cols-12 gap-4 px-4 py-2 bg-slate-100 dark:bg-slate-700 rounded-lg text-sm font-semibold text-slate-700 dark:text-slate-300",children:[s.jsx("div",{className:"col-span-4",children:"Nh cung cp"}),s.jsx("div",{className:"col-span-3",children:"Ni dung"}),s.jsx("div",{className:"col-span-1 text-right",children:"S tin"}),s.jsx("div",{className:"col-span-1 text-right",children:" tr"}),s.jsx("div",{className:"col-span-2 text-right",children:"Cn n"}),s.jsx("div",{className:"col-span-1"})]}),le.map(ot=>s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-4 items-start bg-primary-bg border border-primary-border rounded-lg p-4 hover:border-cyan-500 hover:shadow-md transition-all cursor-pointer group",onClick:()=>{me(ot),Y(!0)},children:[s.jsxs("div",{className:"col-span-1 md:col-span-4 flex items-start gap-3",children:[s.jsx("input",{type:"checkbox",checked:J.includes(ot.supplierId),onChange:We=>{We.stopPropagation(),ut(ot.supplierId,We.target.checked)},onClick:We=>We.stopPropagation(),className:"mt-1 w-4 h-4 rounded border-secondary-border text-cyan-600 focus:ring-cyan-500"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h3",{className:"text-primary-text font-semibold text-base mb-1 truncate",children:ot.supplierName}),s.jsx("div",{className:"space-y-0.5 text-xs text-secondary-text",children:s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),s.jsx("span",{children:Bn(new Date(ot.createdDate))})]})})]})]}),s.jsx("div",{className:"col-span-1 md:col-span-3",children:s.jsx("div",{className:"text-sm text-primary-text",children:ot.description})}),s.jsxs("div",{className:"col-span-1 text-right md:text-right flex justify-between md:block",children:[s.jsx("span",{className:"md:hidden text-sm text-secondary-text",children:"S tin:"}),s.jsx("div",{className:"text-sm text-primary-text font-semibold",children:Oe(ot.totalAmount)})]}),s.jsxs("div",{className:"col-span-1 text-right md:text-right flex justify-between md:block",children:[s.jsx("span",{className:"md:hidden text-sm text-secondary-text",children:" tr:"}),s.jsx("div",{className:"text-sm text-green-600 dark:text-green-400 font-semibold",children:Oe(ot.paidAmount)})]}),s.jsxs("div",{className:"col-span-1 md:col-span-2 text-right md:text-right flex justify-between md:block",children:[s.jsx("span",{className:"md:hidden text-sm font-bold text-secondary-text",children:"Cn n:"}),s.jsx("div",{className:"text-base text-red-600 dark:text-red-400 font-bold",children:Oe(ot.remainingAmount)})]}),s.jsxs("div",{className:"col-span-1 flex justify-end relative debt-menu-dropdown hidden md:flex",children:[s.jsx("button",{onClick:We=>{We.stopPropagation(),ke(fe===ot.id?null:ot.id)},className:"p-1 text-secondary-text hover:text-primary-text transition-colors opacity-0 group-hover:opacity-100",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"})})}),fe===ot.id&&s.jsxs("div",{className:"absolute right-0 top-8 w-48 bg-white dark:bg-slate-800 rounded-lg shadow-lg border border-slate-200 dark:border-slate-700 py-1 z-10",children:[s.jsxs("button",{onClick:We=>{We.stopPropagation(),me(ot),Y(!0),ke(null)},className:"w-full px-4 py-2 text-left text-sm text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700 flex items-center gap-2",children:[s.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),"Xem chi tit"]}),s.jsxs("button",{onClick:We=>{We.stopPropagation(),me(ot),B(!0),ke(null)},className:"w-full px-4 py-2 text-left text-sm text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700 flex items-center gap-2",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Sa"]}),s.jsxs("button",{onClick:We=>{We.stopPropagation(),me(ot),Q(!0),ke(null)},className:"w-full px-4 py-2 text-left text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 flex items-center gap-2",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Xa"]})]})]})]},ot.id))]})})}),(E==="customer"&&H.length>0||E==="supplier"&&J.length>0)&&s.jsx("div",{className:"fixed bottom-6 left-1/2 transform -translate-x-1/2 z-50",children:s.jsxs("button",{onClick:nt,className:"flex items-center gap-3 px-6 py-3 bg-red-600 hover:bg-red-700 text-white rounded-lg font-semibold shadow-2xl transition-all hover:scale-105",children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),s.jsxs("span",{children:[" chn"," ",E==="customer"?H.length:J.length," ","n"]}),s.jsx("span",{className:"mx-2",children:"|"}),s.jsxs("span",{className:"text-xl font-bold",children:["Tr ht n (",Oe(E==="customer"?ye:at),")"]})]})}),R&&s.jsx(Sje,{customers:e,customerDebts:o,onClose:()=>U(!1),onCollect:ot=>{const Kt={id:`CT-${Date.now()}`,type:"income",date:ot.timestamp,amount:ot.amount,recipient:ot.customerName,notes:`Thu n khch hng - ${ot.customerName}`,paymentSourceId:ot.paymentMethod,branchId:r,category:"debt_collection"};n([Kt,...a]),i(l.map(Dt=>Dt.id===ot.paymentMethod?{...Dt,balance:{...Dt.balance,[r]:(Dt.balance[r]||0)+ot.amount}}:Dt)),U(!1)}}),se&&s.jsx(Cje,{isOpen:se,onClose:()=>{ue(!1)},selectedDebts:E==="customer"?ie.filter(ot=>H.includes(ot.customerId)):je.filter(ot=>J.includes(ot.supplierId)),totalAmount:E==="customer"?ye:at,debtType:E,onConfirm:async(ot,We)=>{try{if(E==="customer"){for(const Kt of H){const Dt=ie.find(fr=>fr.customerId===Kt);Dt&&await y.mutateAsync({id:Dt.id,updates:{paidAmount:Dt.totalAmount,remainingAmount:0}})}K([])}else{for(const Kt of J){const Dt=je.find(fr=>fr.supplierId===Kt);Dt&&await w.mutateAsync({id:Dt.id,updates:{paidAmount:Dt.totalAmount,remainingAmount:0}})}ae([])}ue(!1),Xe.success(` thanh ton thnh cng ${Oe(E==="customer"?ye:at)} qua ${ot==="cash"?"Tin mt":"Chuyn khon"}`)}catch(Kt){Xe.error(Kt.message||"Khng th thanh ton")}}}),z&&s.jsx(jje,{suppliers:t,supplierDebts:d,onClose:()=>Z(!1),onPay:ot=>{const Kt={id:`CT-${Date.now()}`,type:"expense",date:ot.timestamp,amount:ot.amount,recipient:ot.supplierName,notes:`Tr n nh cung cp - ${ot.supplierName}`,paymentSourceId:ot.paymentMethod,branchId:r,category:"debt_payment"};n([Kt,...a]),i(l.map(Dt=>Dt.id===ot.paymentMethod?{...Dt,balance:{...Dt.balance,[r]:(Dt.balance[r]||0)-ot.amount}}:Dt)),Z(!1)}}),_e&&s.jsx(Aje,{activeTab:E,customers:e,suppliers:t,currentBranchId:r,onClose:()=>Le(!1),onSave:async ot=>{E==="customer"?await p.mutateAsync(ot):await N.mutateAsync(ot),Le(!1)}}),xe&&Ce&&s.jsx(Eje,{debt:Ce,activeTab:E,customers:e,suppliers:t,onClose:()=>{B(!1),me(null)},onSave:async ot=>{E==="customer"?await y.mutateAsync({id:Ce.id,updates:ot}):await w.mutateAsync({id:Ce.id,updates:ot}),B(!1),me(null)}}),ee&&Ce&&s.jsx(Tje,{debt:Ce,activeTab:E,storeSettings:S,onClose:()=>{Y(!1),me(null)}}),re&&Ce&&s.jsx(Oje,{debt:Ce,activeTab:E,onClose:()=>{Q(!1),me(null)},onConfirm:async()=>{E==="customer"?await g.mutateAsync(Ce.id):await k.mutateAsync(Ce.id),Q(!1),me(null)}})]})},Sje=({customers:e,customerDebts:t,onClose:r,onCollect:n})=>{const[a,i]=T.useState(""),[l,o]=T.useState("0"),[c,d]=T.useState("cash"),[f,p]=T.useState(new Date().toLocaleString("sv-SE",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).replace(" "," ")),y=T.useMemo(()=>t.find(w=>w.customerId===a),[a,t]),g=(y==null?void 0:y.remainingAmount)||0,N=w=>{w.preventDefault();const k=parseFloat(l);if(k<=0){Xe.error("S tin thanh ton phi ln hn 0");return}if(k>g){Xe.error(`S tin thanh ton khng c vt qu s n cn li (${Oe(g)})`);return}const S=e.find(O=>O.id===a);S&&n&&n({customerName:S.name,amount:k,paymentMethod:c,timestamp:f}),r()};return s.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:s.jsxs("div",{className:"bg-secondary-bg rounded-xl shadow-2xl max-w-lg w-full border border-primary-border",children:[s.jsx("div",{className:"px-6 py-4 border-b border-primary-border",children:s.jsx("h2",{className:"text-xl font-semibold text-primary-text",children:"Thu n khch hng"})}),s.jsxs("form",{onSubmit:N,className:"p-6 space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-secondary-text mb-2",children:"Tm kim v chn mt khch hng ang n"}),s.jsxs("select",{value:a,onChange:w=>i(w.target.value),className:"w-full px-4 py-3 bg-primary-bg border border-secondary-border rounded-lg text-primary-text focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:border-transparent",children:[s.jsx("option",{value:"",children:"Chn khch hng..."}),t.map(w=>s.jsxs("option",{value:w.customerId,children:[w.customerName," - ",Oe(w.remainingAmount)]},w.customerId))]})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("label",{className:"block text-sm font-medium text-secondary-text",children:"Nhp s tin thanh ton"}),s.jsx("span",{className:"text-cyan-600 dark:text-cyan-400 text-sm",children:Oe(parseFloat(l)||0)})]}),s.jsx("input",{type:"number",value:l,onChange:w=>o(w.target.value),className:"w-full px-4 py-3 bg-primary-bg border border-secondary-border rounded-lg text-primary-text focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-tertiary-text",children:"Cn n:"}),s.jsx("span",{className:"text-red-600 dark:text-red-400 font-bold text-base",children:Oe(g)})]}),s.jsx("button",{type:"button",onClick:()=>o(g.toString()),className:"text-cyan-600 dark:text-cyan-400 hover:text-cyan-700 dark:hover:text-cyan-300 text-sm mt-1",children:"in s cn n"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-secondary-text mb-3",children:"Hnh thc thanh ton:"}),s.jsxs("div",{className:"flex gap-6",children:[s.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[s.jsx("input",{type:"radio",name:"paymentMethod",value:"cash",checked:c==="cash",onChange:w=>d(w.target.value),className:"w-4 h-4 text-cyan-600 bg-primary-bg border-secondary-border focus:ring-cyan-500"}),s.jsx("span",{className:"text-primary-text",children:"Tin mt"})]}),s.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[s.jsx("input",{type:"radio",name:"paymentMethod",value:"bank",checked:c==="bank",onChange:w=>d(w.target.value),className:"w-4 h-4 text-cyan-600 bg-primary-bg border-secondary-border focus:ring-cyan-500"}),s.jsx("span",{className:"text-primary-text",children:"Chuyn khon"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-secondary-text mb-2",children:"Thi gian to phiu thu"}),s.jsx("input",{type:"text",value:f,onChange:w=>p(w.target.value),className:"w-full px-4 py-3 bg-primary-bg border border-secondary-border rounded-lg text-primary-text focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:border-transparent"})]}),s.jsx("button",{type:"submit",disabled:!a||parseFloat(l)<=0,className:"w-full py-3 bg-primary-bg hover:bg-tertiary-bg text-primary-text rounded-lg font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"To phiu thu"})]}),s.jsx("div",{className:"px-6 py-4 border-t border-primary-border flex justify-end",children:s.jsx("button",{onClick:r,className:"px-6 py-2 text-secondary-text hover:text-primary-text transition-colors",children:"ng"})})]})})},jje=({suppliers:e,supplierDebts:t,onClose:r,onPay:n})=>{const[a,i]=T.useState(""),[l,o]=T.useState("0"),[c,d]=T.useState("cash"),[f,p]=T.useState(new Date().toLocaleString("sv-SE",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).replace(" "," ")),y=T.useMemo(()=>t.find(w=>w.supplierId===a),[a,t]),g=(y==null?void 0:y.remainingAmount)||0,N=w=>{w.preventDefault();const k=parseFloat(l);if(k<=0){Xe.error("S tin thanh ton phi ln hn 0");return}if(k>g){Xe.error(`S tin thanh ton khng c vt qu s n cn li (${Oe(g)})`);return}const S=e.find(O=>O.id===a);S&&n&&n({supplierName:S.name,amount:k,paymentMethod:c,timestamp:f}),r()};return s.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:s.jsxs("div",{className:"bg-secondary-bg rounded-xl shadow-2xl max-w-lg w-full border border-primary-border",children:[s.jsx("div",{className:"px-6 py-4 border-b border-primary-border",children:s.jsx("h2",{className:"text-xl font-semibold text-primary-text",children:"Chi tr n nh cung cp"})}),s.jsxs("form",{onSubmit:N,className:"p-6 space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-secondary-text mb-2",children:"Tm kim v chn mt nh cung cp ang n"}),s.jsxs("select",{value:a,onChange:w=>i(w.target.value),className:"w-full px-4 py-3 bg-primary-bg border border-secondary-border rounded-lg text-primary-text focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:border-transparent",children:[s.jsx("option",{value:"",children:"Chn nh cung cp..."}),t.map(w=>s.jsxs("option",{value:w.supplierId,children:[w.supplierName," - ",Oe(w.remainingAmount)]},w.supplierId))]})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("label",{className:"block text-sm font-medium text-secondary-text",children:"Nhp s tin thanh ton"}),s.jsx("span",{className:"text-cyan-600 dark:text-cyan-400 text-sm",children:Oe(parseFloat(l)||0)})]}),s.jsx("input",{type:"number",value:l,onChange:w=>o(w.target.value),className:"w-full px-4 py-3 bg-primary-bg border border-secondary-border rounded-lg text-primary-text focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-tertiary-text",children:"Cn n:"}),s.jsx("span",{className:"text-red-600 dark:text-red-400 font-bold text-base",children:Oe(g)})]}),s.jsx("button",{type:"button",onClick:()=>o(g.toString()),className:"text-cyan-600 dark:text-cyan-400 hover:text-cyan-700 dark:hover:text-cyan-300 text-sm mt-1",children:"in s cn n"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-secondary-text mb-3",children:"Hnh thc thanh ton:"}),s.jsxs("div",{className:"flex gap-6",children:[s.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[s.jsx("input",{type:"radio",name:"paymentMethod",value:"cash",checked:c==="cash",onChange:w=>d(w.target.value),className:"w-4 h-4 text-cyan-600 bg-primary-bg border-secondary-border focus:ring-cyan-500"}),s.jsx("span",{className:"text-primary-text",children:"Tin mt"})]}),s.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[s.jsx("input",{type:"radio",name:"paymentMethod",value:"bank",checked:c==="bank",onChange:w=>d(w.target.value),className:"w-4 h-4 text-cyan-600 bg-primary-bg border-secondary-border focus:ring-cyan-500"}),s.jsx("span",{className:"text-primary-text",children:"Chuyn khon"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-secondary-text mb-2",children:"Thi gian to phiu chi"}),s.jsx("input",{type:"text",value:f,onChange:w=>p(w.target.value),className:"w-full px-4 py-3 bg-primary-bg border border-secondary-border rounded-lg text-primary-text focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:border-transparent"})]}),s.jsx("button",{type:"submit",disabled:!a||parseFloat(l)<=0,className:"w-full py-3 bg-primary-bg hover:bg-tertiary-bg text-primary-text rounded-lg font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"To phiu chi"})]}),s.jsx("div",{className:"px-6 py-4 border-t border-primary-border flex justify-end",children:s.jsx("button",{onClick:r,className:"px-6 py-2 text-secondary-text hover:text-primary-text transition-colors",children:"ng"})})]})})},Cje=({isOpen:e,onClose:t,selectedDebts:r,totalAmount:n,debtType:a,onConfirm:i})=>{const[l,o]=T.useState(null),[c,d]=T.useState(()=>{const p=new Date,y=String(p.getDate()).padStart(2,"0"),g=String(p.getMonth()+1).padStart(2,"0"),N=p.getFullYear(),w=String(p.getHours()).padStart(2,"0"),k=String(p.getMinutes()).padStart(2,"0");return`${y}-${g}-${N} ${w}:${k}`});if(!e)return null;const f=p=>{if(p.preventDefault(),!l){Xe.warning("Vui lng chn hnh thc thanh ton");return}const[y,g]=c.split(" "),[N,w,k]=y.split("-"),[S,O]=g.split(":"),E=new Date(parseInt(k),parseInt(w)-1,parseInt(N),parseInt(S),parseInt(O)).toISOString();i(l,E)};return s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-secondary-bg rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-primary-border",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("svg",{className:"w-6 h-6 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),s.jsxs("h2",{className:"text-xl font-semibold text-primary-text",children:["Tr ht n (",a==="customer"?"nhiu n hng":"nhiu nh cung cp",")"]})]}),s.jsx("button",{onClick:t,className:"text-secondary-text hover:text-primary-text transition-colors",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsxs("form",{onSubmit:f,className:"p-6",children:[s.jsxs("div",{className:"mb-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("span",{className:"text-sm font-medium text-secondary-text",children:"-"}),s.jsx("span",{className:"text-sm font-medium text-secondary-text",children:"Chi tit"}),s.jsx("span",{className:"text-sm font-medium text-secondary-text",children:"S tin"})]}),s.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:r.map((p,y)=>{const g="customerName"in p,N=g?p.customerName:p.supplierName,w=p.description;return s.jsxs("div",{className:"flex items-center justify-between py-2 px-3 bg-tertiary-bg rounded",children:[s.jsx("span",{className:"text-sm text-tertiary-text",children:y+1}),s.jsxs("div",{className:"flex-1 mx-3",children:[s.jsx("div",{className:"text-sm font-medium text-primary-text",children:w}),s.jsx("div",{className:"text-xs text-tertiary-text",children:N})]}),s.jsx("span",{className:"text-sm font-semibold text-primary-text",children:Oe(p.remainingAmount)})]},y)})}),s.jsxs("div",{className:"flex items-center justify-between mt-3 pt-3 border-t border-primary-border",children:[s.jsx("span",{className:"font-semibold text-primary-text",children:"TNG"}),s.jsx("span",{className:"text-lg font-bold text-red-500",children:Oe(n)})]})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("label",{className:"block text-sm font-medium text-secondary-text mb-3",children:"Hnh thc thanh ton:"}),s.jsxs("div",{className:"flex gap-6",children:[s.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[s.jsx("input",{type:"radio",name:"paymentMethod",value:"cash",checked:l==="cash",onChange:p=>o(p.target.value),className:"w-4 h-4 text-blue-600 focus:ring-blue-500"}),s.jsx("span",{className:"text-primary-text",children:"Tin mt"})]}),s.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[s.jsx("input",{type:"radio",name:"paymentMethod",value:"bank",checked:l==="bank",onChange:p=>o(p.target.value),className:"w-4 h-4 text-blue-600 focus:ring-blue-500"}),s.jsx("span",{className:"text-primary-text",children:"Chuyn khon"})]})]})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("label",{className:"block text-sm font-medium text-secondary-text mb-2",children:"Thi gian to phiu thu"}),s.jsxs("div",{className:"flex items-center gap-2 px-4 py-3 bg-primary-bg border border-secondary-border rounded-lg",children:[s.jsx("input",{type:"text",value:c,onChange:p=>d(p.target.value),className:"flex-1 bg-transparent text-primary-text outline-none"}),s.jsx("svg",{className:"w-5 h-5 text-tertiary-text",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),s.jsx("svg",{className:"w-5 h-5 text-tertiary-text",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})]})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{type:"button",onClick:t,className:"flex-1 px-4 py-3 border border-secondary-border text-secondary-text rounded-lg hover:bg-primary-bg transition-colors font-medium",children:"NG"}),s.jsx("button",{type:"submit",disabled:!l,className:"flex-1 px-4 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-blue-600",children:"TO PHIU THU"})]})]})]})})},Aje=({activeTab:e,customers:t,suppliers:r,currentBranchId:n,onClose:a,onSave:i})=>{const[l,o]=T.useState({customerId:"",supplierId:"",description:"",totalAmount:0,phone:"",licensePlate:""}),c=d=>{if(d.preventDefault(),e==="customer"){const f=t.find(p=>p.id===l.customerId);if(!f){Xe.error("Vui lng chn khch hng");return}i({customerId:l.customerId,customerName:f.name,phone:l.phone||f.phone,licensePlate:l.licensePlate||f.licensePlate,description:l.description,totalAmount:l.totalAmount,paidAmount:0,remainingAmount:l.totalAmount,createdDate:new Date().toISOString(),branchId:n})}else{const f=r.find(p=>p.id===l.supplierId);if(!f){Xe.error("Vui lng chn nh cung cp");return}i({supplierId:l.supplierId,supplierName:f.name,description:l.description,totalAmount:l.totalAmount,paidAmount:0,remainingAmount:l.totalAmount,createdDate:new Date().toISOString(),branchId:n})}};return s.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl max-w-lg w-full border border-slate-200 dark:border-slate-700",children:[s.jsx("div",{className:"px-6 py-4 border-b border-slate-200 dark:border-slate-700",children:s.jsxs("h2",{className:"text-xl font-semibold text-slate-900 dark:text-white",children:["Thm cng n"," ",e==="customer"?"khch hng":"nh cung cp"]})}),s.jsxs("form",{onSubmit:c,className:"p-6 space-y-4",children:[e==="customer"?s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["Khch hng ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("select",{value:l.customerId,onChange:d=>o({...l,customerId:d.target.value}),required:!0,className:"w-full px-4 py-3 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white",children:[s.jsx("option",{value:"",children:"Chn khch hng..."}),t.map(d=>s.jsxs("option",{value:d.id,children:[d.name," - ",d.phone]},d.id))]})]}):s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["Nh cung cp ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("select",{value:l.supplierId,onChange:d=>o({...l,supplierId:d.target.value}),required:!0,className:"w-full px-4 py-3 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white",children:[s.jsx("option",{value:"",children:"Chn nh cung cp..."}),r.map(d=>s.jsx("option",{value:d.id,children:d.name},d.id))]})]}),e==="customer"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"S in thoi"}),s.jsx("input",{type:"text",value:l.phone,onChange:d=>o({...l,phone:d.target.value}),className:"w-full px-4 py-3 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Bin s xe"}),s.jsx("input",{type:"text",value:l.licensePlate,onChange:d=>o({...l,licensePlate:d.target.value}),className:"w-full px-4 py-3 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white"})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["Ni dung cng n ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("textarea",{value:l.description,onChange:d=>o({...l,description:d.target.value}),required:!0,rows:3,className:"w-full px-4 py-3 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white",placeholder:"M t chi tit cng n..."})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["S tin ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"number",value:l.totalAmount||"",onChange:d=>o({...l,totalAmount:Number(d.target.value)}),required:!0,min:"0",className:"w-full px-4 py-3 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white",placeholder:"0"}),s.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:Oe(l.totalAmount||0)})]}),s.jsxs("div",{className:"flex gap-3 pt-4",children:[s.jsx("button",{type:"button",onClick:a,className:"flex-1 px-4 py-3 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors font-medium",children:"Hy"}),s.jsx("button",{type:"submit",className:"flex-1 px-4 py-3 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors font-medium",children:"Thm cng n"})]})]})]})})},Eje=({debt:e,activeTab:t,customers:r,suppliers:n,onClose:a,onSave:i})=>{const l="customerName"in e,[o,c]=T.useState({description:e.description,totalAmount:e.totalAmount,paidAmount:e.paidAmount,phone:l?e.phone:"",licensePlate:l?e.licensePlate:""}),d=f=>{f.preventDefault();const p=o.totalAmount-o.paidAmount;if(o.paidAmount>o.totalAmount){Xe.error("S tin  tr khng c ln hn tng tin!");return}i({description:o.description,totalAmount:o.totalAmount,paidAmount:o.paidAmount,remainingAmount:p,...l&&{phone:o.phone,licensePlate:o.licensePlate}})};return s.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl max-w-lg w-full border border-slate-200 dark:border-slate-700",children:[s.jsx("div",{className:"px-6 py-4 border-b border-slate-200 dark:border-slate-700",children:s.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-white",children:"Sa cng n"})}),s.jsxs("form",{onSubmit:d,className:"p-6 space-y-4",children:[s.jsx("div",{className:"bg-slate-100 dark:bg-slate-700 rounded-lg p-3",children:s.jsx("p",{className:"text-sm font-medium text-slate-900 dark:text-white",children:l?e.customerName:e.supplierName})}),l&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"S in thoi"}),s.jsx("input",{type:"text",value:o.phone,onChange:f=>c({...o,phone:f.target.value}),className:"w-full px-4 py-3 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Bin s xe"}),s.jsx("input",{type:"text",value:o.licensePlate,onChange:f=>c({...o,licensePlate:f.target.value}),className:"w-full px-4 py-3 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Ni dung cng n"}),s.jsx("textarea",{value:o.description,onChange:f=>c({...o,description:f.target.value}),rows:3,className:"w-full px-4 py-3 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Tng tin"}),s.jsx("input",{type:"number",value:o.totalAmount,onChange:f=>c({...o,totalAmount:Number(f.target.value)}),min:"0",className:"w-full px-4 py-3 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:" tr"}),s.jsx("input",{type:"number",value:o.paidAmount,onChange:f=>c({...o,paidAmount:Number(f.target.value)}),min:"0",max:o.totalAmount,className:"w-full px-4 py-3 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white"})]}),s.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-3",children:s.jsxs("p",{className:"text-sm text-blue-800 dark:text-blue-300",children:["Cn n:"," ",s.jsx("span",{className:"font-bold",children:Oe(o.totalAmount-o.paidAmount)})]})}),s.jsxs("div",{className:"flex gap-3 pt-4",children:[s.jsx("button",{type:"button",onClick:a,className:"flex-1 px-4 py-3 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors font-medium",children:"Hy"}),s.jsx("button",{type:"submit",className:"flex-1 px-4 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors font-medium",children:"Lu thay i"})]})]})]})})},Tje=({debt:e,activeTab:t,storeSettings:r,onClose:n})=>{const a="customerName"in e;return s.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl max-w-2xl w-full border border-slate-200 dark:border-slate-700",children:[s.jsxs("div",{className:"px-6 py-4 border-b border-slate-200 dark:border-slate-700 flex items-center justify-between",children:[s.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-white",children:"Chi tit cng n"}),s.jsx("button",{onClick:n,className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-300",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:a?"Khch hng":"Nh cung cp"}),s.jsx("p",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:a?e.customerName:e.supplierName})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Ngy to"}),s.jsx("p",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:Bn(new Date(e.createdDate))})]})]}),a&&s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"S in thoi"}),s.jsx("p",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:e.phone||"--"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Bin s xe"}),s.jsx("p",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:e.licensePlate||"--"})]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-2",children:"Ni dung"}),s.jsx("div",{className:"bg-slate-100 dark:bg-slate-700 rounded-lg p-4",children:s.jsx("p",{className:"text-slate-900 dark:text-white",children:e.description})})]}),s.jsx("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-4",children:s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-1",children:"Tng tin"}),s.jsx("p",{className:"text-xl font-bold text-slate-900 dark:text-white",children:Oe(e.totalAmount)})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-1",children:" tr"}),s.jsx("p",{className:"text-xl font-bold text-green-600 dark:text-green-400",children:Oe(e.paidAmount)})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-1",children:"Cn n"}),s.jsx("p",{className:"text-2xl font-bold text-red-600 dark:text-red-400",children:Oe(e.remainingAmount)})]})]})}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between text-sm text-slate-600 dark:text-slate-400 mb-2",children:[s.jsx("span",{children:"Tin  thanh ton"}),s.jsxs("span",{children:[Math.round(e.paidAmount/e.totalAmount*100),"%"]})]}),s.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-3",children:s.jsx("div",{className:"bg-green-600 h-3 rounded-full transition-all",style:{width:`${e.paidAmount/e.totalAmount*100}%`}})})]})]}),s.jsxs("div",{className:"px-6 py-4 border-t border-slate-200 dark:border-slate-700 flex justify-between",children:[s.jsxs("button",{onClick:()=>{const i=document.getElementById("debt-print-area");if(i){const l=window.open("","_blank");l&&(l.document.write(`
                    <html>
                      <head>
                        <title>Phiu Cng N - ${a?e.customerName:e.supplierName}</title>
                        <style>
                          body { font-family: Arial, sans-serif; padding: 20px; max-width: 800px; margin: 0 auto; }
                          .store-header { text-align: center; margin-bottom: 30px; padding-bottom: 20px; border-bottom: 2px solid #ddd; }
                          .store-header h2 { margin: 0 0 10px 0; font-size: 24px; color: #0ea5e9; }
                          .store-header p { margin: 5px 0; color: #666; }
                          h1 { text-align: center; margin-bottom: 20px; }
                          .info { margin-bottom: 15px; }
                          .info label { font-weight: bold; }
                          .description { white-space: pre-line; margin: 20px 0; padding: 15px; background: #f5f5f5; border-radius: 8px; }
                          .amounts { display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; margin: 20px 0; }
                          .amount-box { padding: 15px; border: 1px solid #ddd; border-radius: 8px; text-align: center; }
                          .amount-box label { display: block; font-size: 12px; color: #666; margin-bottom: 5px; }
                          .amount-box .value { font-size: 20px; font-weight: bold; }
                          .total { color: #1e40af; }
                          .paid { color: #16a34a; }
                          .remaining { color: #dc2626; }
                          .bank-info { margin-top: 30px; padding: 20px; background: #f0f9ff; border: 2px solid #0ea5e9; border-radius: 8px; }
                          .bank-info h3 { margin: 0 0 15px 0; color: #0369a1; text-align: center; }
                          .bank-info p { margin: 8px 0; }
                          .bank-info strong { display: inline-block; min-width: 150px; }
                          .bank-qr { text-align: center; margin-top: 15px; }
                          .bank-qr img { max-width: 200px; border: 1px solid #ddd; padding: 10px; background: white; }
                          @media print { button { display: none; } }
                        </style>
                      </head>
                      <body>
                        ${r?`
                        <div class="store-header">
                          <h2>${r.store_name||"MOTOCARE"}</h2>
                          ${r.address?`<p> ${r.address}</p>`:""}
                          ${r.phone?`<p> ${r.phone}</p>`:""}
                        </div>
                        `:""}
                        ${i.innerHTML}
                        ${r&&(r.bank_name||r.bank_account_number)?`
                        <div class="bank-info">
                          <h3> THNG TIN CHUYN KHON</h3>
                          ${r.bank_name?`<p><strong>Ngn hng:</strong> ${r.bank_name}</p>`:""}
                          ${r.bank_account_number?`<p><strong>S ti khon:</strong> ${r.bank_account_number}</p>`:""}
                          ${r.bank_account_holder?`<p><strong>Ch ti khon:</strong> ${r.bank_account_holder}</p>`:""}
                          ${r.bank_branch?`<p><strong>Chi nhnh:</strong> ${r.bank_branch}</p>`:""}
                          ${r.bank_qr_url?`<div class="bank-qr"><img src="${r.bank_qr_url}" alt="QR Code" /></div>`:""}
                        </div>
                        `:""}
                        <div style="margin-top: 30px; text-align: center;">
                          <button onclick="window.print()" style="padding: 10px 20px; background: #0ea5e9; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 16px;">In Phiu</button>
                        </div>
                      </body>
                    </html>
                  `),l.document.close())}},className:"px-6 py-2 bg-cyan-600 hover:bg-cyan-700 text-white rounded-lg transition-colors font-medium flex items-center gap-2",children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})}),"In phiu"]}),s.jsx("button",{onClick:n,className:"px-6 py-2 bg-slate-600 hover:bg-slate-700 text-white rounded-lg transition-colors font-medium",children:"ng"})]}),s.jsxs("div",{id:"debt-print-area",style:{display:"none"},children:[s.jsx("h1",{children:"PHIU CNG N"}),s.jsxs("div",{className:"info",children:[s.jsx("label",{children:a?"Khch hng:":"Nh cung cp:"})," ",a?e.customerName:e.supplierName]}),a&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"info",children:[s.jsx("label",{children:"S in thoi:"})," ",e.phone||"Cha c"]}),s.jsxs("div",{className:"info",children:[s.jsx("label",{children:"Bin s xe:"})," ",e.licensePlate||"Cha c"]})]}),s.jsxs("div",{className:"info",children:[s.jsx("label",{children:"Ngy to:"})," ",Bn(new Date(e.createdDate))]}),s.jsxs("div",{className:"description",children:[s.jsx("strong",{children:"Ni dung:"}),s.jsx("br",{}),e.description]}),s.jsxs("div",{className:"amounts",children:[s.jsxs("div",{className:"amount-box",children:[s.jsx("label",{children:"Tng tin"}),s.jsx("div",{className:"value total",children:Oe(e.totalAmount)})]}),s.jsxs("div",{className:"amount-box",children:[s.jsx("label",{children:" tr"}),s.jsx("div",{className:"value paid",children:Oe(e.paidAmount)})]}),s.jsxs("div",{className:"amount-box",children:[s.jsx("label",{children:"Cn n"}),s.jsx("div",{className:"value remaining",children:Oe(e.remainingAmount)})]})]})]})]})})},Oje=({debt:e,activeTab:t,onClose:r,onConfirm:n})=>{const i="customerName"in e?e.customerName:e.supplierName;return s.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:s.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl max-w-md w-full border border-slate-200 dark:border-slate-700",children:s.jsxs("div",{className:"p-6",children:[s.jsx("div",{className:"flex items-center justify-center w-12 h-12 mx-auto bg-red-100 dark:bg-red-900/20 rounded-full mb-4",children:s.jsx("svg",{className:"w-6 h-6 text-red-600 dark:text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),s.jsx("h3",{className:"text-lg font-semibold text-center text-slate-900 dark:text-white mb-2",children:"Xc nhn xa cng n"}),s.jsxs("p",{className:"text-center text-slate-600 dark:text-slate-400 mb-6",children:["Bn c chc chn mun xa cng n ca"," ",s.jsx("span",{className:"font-semibold",children:i}),"?",s.jsx("br",{}),s.jsxs("span",{className:"text-red-600 dark:text-red-400 font-medium",children:["S tin: ",Oe(e.remainingAmount)]}),s.jsx("br",{}),s.jsx("span",{className:"text-sm",children:"Hnh ng ny khng th hon tc!"})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:r,className:"flex-1 px-4 py-3 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors font-medium",children:"Hy"}),s.jsx("button",{onClick:n,className:"flex-1 px-4 py-3 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors font-medium",children:"Xa"})]})]})})})},qV=()=>{const e=qn();return ha({mutationFn:({id:t,branchId:r,delta:n})=>N_(t,r,n),onSuccess:()=>{e.invalidateQueries({queryKey:["paymentSourcesRepo"]})},onError:t=>Xe.error(va(t))})},HV=()=>{const{cashTransactions:e,paymentSources:t,currentBranchId:r,setCashTransactions:n,setPaymentSources:a}=Ba();Dc();const i=SF(),l=qV(),[o,c]=T.useState("all"),[d,f]=T.useState("all"),[p,y]=T.useState("month"),[g,N]=T.useState(!1),w=T.useMemo(()=>{let S=e.filter(D=>D.branchId===r);o!=="all"&&(S=S.filter(D=>D.type===o)),d!=="all"&&(S=S.filter(D=>D.paymentSourceId===d));const O=new Date,E=new Date(O.getFullYear(),O.getMonth(),O.getDate());switch(p){case"today":S=S.filter(W=>new Date(W.date)>=E);break;case"week":const D=new Date(E);D.setDate(D.getDate()-7),S=S.filter(W=>new Date(W.date)>=D);break;case"month":const q=new Date(E);q.setMonth(q.getMonth()-1),S=S.filter(W=>new Date(W.date)>=q);break}return S.sort((D,q)=>new Date(q.date).getTime()-new Date(D.date).getTime())},[e,r,o,d,p]),k=T.useMemo(()=>{var W,R;const S=w.filter(U=>U.type==="income").reduce((U,z)=>U+z.amount,0),O=w.filter(U=>U.type==="expense").reduce((U,z)=>U+z.amount,0),E=S-O,D=((W=t.find(U=>U.id==="cash"))==null?void 0:W.balance[r])||0,q=((R=t.find(U=>U.id==="bank"))==null?void 0:R.balance[r])||0;return{income:S,expense:O,balance:E,cashBalance:D,bankBalance:q,totalBalance:D+q}},[w,t,r]);return s.jsxs("div",{className:"h-full flex flex-col bg-slate-50 dark:bg-slate-900",children:[s.jsx("div",{className:"bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 px-6 py-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"S qu"}),s.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:"Theo di thu chi tin mt v chuyn khon"})]}),s.jsxs("button",{onClick:()=>N(!0),className:"flex items-center gap-2 px-4 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors",children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),s.jsx("span",{children:"Thm giao dch"})]})]})}),s.jsxs("div",{className:"p-4 md:p-6",children:[s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-3 md:gap-4 mb-6",children:[s.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-4 border-2 border-green-200 dark:border-green-800",children:[s.jsxs("div",{className:"flex items-center gap-2 text-green-600 dark:text-green-400 text-sm font-medium mb-2",children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 11l5-5m0 0l5 5m-5-5v12"})}),s.jsx("span",{children:"Thu"})]}),s.jsx("div",{className:"text-green-900 dark:text-green-100 text-2xl font-bold",children:Oe(k.income)})]}),s.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 rounded-lg p-4 border-2 border-red-200 dark:border-red-800",children:[s.jsxs("div",{className:"flex items-center gap-2 text-red-600 dark:text-red-400 text-sm font-medium mb-2",children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 13l-5 5m0 0l-5-5m5 5V6"})}),s.jsx("span",{children:"Chi"})]}),s.jsx("div",{className:"text-red-900 dark:text-red-100 text-2xl font-bold",children:Oe(k.expense)})]}),s.jsxs("div",{className:"col-span-2 md:col-span-1 bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4 border-2 border-blue-200 dark:border-blue-800",children:[s.jsx("div",{className:"text-blue-600 dark:text-blue-400 text-sm font-medium mb-2",children:"Chnh lch"}),s.jsx("div",{className:`text-2xl font-bold ${k.balance>=0?"text-blue-900 dark:text-blue-100":"text-red-600 dark:text-red-400"}`,children:Oe(k.balance)})]}),s.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/20 rounded-lg p-4 border-2 border-amber-200 dark:border-amber-800",children:[s.jsx("div",{className:"text-amber-600 dark:text-amber-400 text-sm font-medium mb-2",children:"Tin mt"}),s.jsx("div",{className:"text-amber-900 dark:text-amber-100 text-2xl font-bold",children:Oe(k.cashBalance)})]}),s.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 rounded-lg p-4 border-2 border-purple-200 dark:border-purple-800",children:[s.jsx("div",{className:"text-purple-600 dark:text-purple-400 text-sm font-medium mb-2",children:"Ngn hng"}),s.jsx("div",{className:"text-purple-900 dark:text-purple-100 text-2xl font-bold",children:Oe(k.bankBalance)})]})]}),s.jsxs("div",{className:"md:hidden space-y-3 mb-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-medium text-slate-500 dark:text-slate-400 mb-1 block",children:"Loi"}),s.jsxs("select",{value:o,onChange:S=>c(S.target.value),className:"w-full p-2 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg text-sm",children:[s.jsx("option",{value:"all",children:"Tt c"}),s.jsx("option",{value:"income",children:"Thu"}),s.jsx("option",{value:"expense",children:"Chi"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-medium text-slate-500 dark:text-slate-400 mb-1 block",children:"Ngun tin"}),s.jsxs("select",{value:d,onChange:S=>f(S.target.value),className:"w-full p-2 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg text-sm",children:[s.jsx("option",{value:"all",children:"Tt c"}),s.jsx("option",{value:"cash",children:"Tin mt"}),s.jsx("option",{value:"bank",children:"Ngn hng"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-medium text-slate-500 dark:text-slate-400 mb-1 block",children:"Thi gian"}),s.jsxs("select",{value:p,onChange:S=>y(S.target.value),className:"w-full p-2 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg text-sm",children:[s.jsx("option",{value:"today",children:"Hm nay"}),s.jsx("option",{value:"week",children:"7 ngy qua"}),s.jsx("option",{value:"month",children:"30 ngy qua"}),s.jsx("option",{value:"all",children:"Tt c"})]})]})]}),s.jsx("div",{className:"hidden md:block bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-4 mb-4",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Loi:"}),s.jsx("div",{className:"flex gap-2",children:[{value:"all",label:"Tt c"},{value:"income",label:"Thu"},{value:"expense",label:"Chi"}].map(S=>s.jsx("button",{onClick:()=>c(S.value),className:`px-3 py-1.5 rounded-md text-sm font-medium transition-colors ${o===S.value?"bg-blue-600 text-white":"bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-600"}`,children:S.label},S.value))})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Ngun tin:"}),s.jsxs("select",{value:d,onChange:S=>f(S.target.value),className:"px-3 py-1.5 bg-slate-100 dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-md text-sm text-slate-900 dark:text-white",children:[s.jsx("option",{value:"all",children:"Tt c"}),s.jsx("option",{value:"cash",children:"Tin mt"}),s.jsx("option",{value:"bank",children:"Ngn hng"})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Thi gian:"}),s.jsx("div",{className:"flex gap-2",children:[{value:"today",label:"Hm nay"},{value:"week",label:"7 ngy"},{value:"month",label:"30 ngy"},{value:"all",label:"Tt c"}].map(S=>s.jsx("button",{onClick:()=>y(S.value),className:`px-3 py-1.5 rounded-md text-sm font-medium transition-colors ${p===S.value?"bg-blue-600 text-white":"bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-600"}`,children:S.label},S.value))})]})]})}),s.jsx("div",{className:"md:hidden space-y-3",children:w.length===0?s.jsx("div",{className:"text-center py-8 text-slate-500 dark:text-slate-400 bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700",children:"Khng c giao dch no"}):w.map(S=>s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg border border-slate-200 dark:border-slate-700 shadow-sm",children:[s.jsxs("div",{className:"flex justify-between items-start mb-2",children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-slate-900 dark:text-white",children:KD(S.category)}),s.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 mt-0.5",children:Bn(new Date(S.date))})]}),s.jsxs("div",{className:`font-bold ${S.type==="income"?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:[S.type==="income"?"+":"-",Oe(S.amount)]})]}),s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-slate-600 dark:text-slate-400 truncate max-w-[60%]",children:S.notes||"--"}),s.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-medium bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300",children:S.paymentSourceId==="cash"?"Tin mt":"Ngn hng"})]})]},S.id))}),s.jsx("div",{className:"hidden md:block bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 overflow-hidden",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Ngy"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Loi"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Danh mc"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"i tng"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Ni dung"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Ngun tin"}),s.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"S tin"}),s.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Thao tc"})]})}),s.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:w.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:8,className:"px-4 py-8 text-center text-slate-500 dark:text-slate-400",children:"Khng c giao dch no"})}):w.map(S=>s.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[s.jsx("td",{className:"px-4 py-3 text-sm text-slate-900 dark:text-slate-100",children:Bn(new Date(S.date))}),s.jsx("td",{className:"px-4 py-3",children:s.jsx("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium ${S.type==="income"?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400"}`,children:S.type==="income"?" Thu":" Chi"})}),s.jsx("td",{className:"px-4 py-3 text-sm text-slate-600 dark:text-slate-400",children:KD(S.category)}),s.jsx("td",{className:"px-4 py-3 text-sm text-slate-900 dark:text-slate-100 font-medium",children:S.recipient||"--"}),s.jsx("td",{className:"px-4 py-3 text-sm text-slate-600 dark:text-slate-400",children:S.notes||"--"}),s.jsx("td",{className:"px-4 py-3 text-sm text-slate-600 dark:text-slate-400",children:S.paymentSourceId==="cash"?"Tin mt":"Ngn hng"}),s.jsxs("td",{className:`px-4 py-3 text-right text-sm font-semibold ${S.type==="income"?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:[S.type==="income"?"+":"-",Oe(S.amount)]}),s.jsx("td",{className:"px-4 py-3 text-center",children:s.jsx("button",{className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-300",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"})})})})]},S.id))})]})})]}),g&&s.jsx(Pje,{onClose:()=>N(!1),onSave:async S=>{if(!S.amount||S.amount<=0){Xe.warning("S tin phi > 0");return}try{const O=await i.mutateAsync({type:S.type,amount:S.amount,branchId:r,paymentSourceId:S.paymentSourceId,date:S.date,notes:S.notes,category:S.category,recipient:S.recipient});if(O!=null&&O.ok){n(D=>[O.data,...D]);const E=S.type==="income"?S.amount:-S.amount;await l.mutateAsync({id:S.paymentSourceId,branchId:r,delta:E}),a(D=>D.map(q=>q.id===S.paymentSourceId?{...q,balance:{...q.balance,[r]:(q.balance[r]||0)+E}}:q)),Xe.success(" thm giao dch s qu"),N(!1)}else O!=null&&O.error&&Xe.error(O.error.message||"Ghi giao dch tht bi")}catch(O){Xe.error((O==null?void 0:O.message)||"Li khng xc nh")}}})]})},KD=e=>e?{sale_income:"Bn hng",service_income:"Dch v",other_income:"Thu khc",inventory_purchase:"Mua hng",salary:"Lng nhn vin",loan_payment:"Tr n vay",debt_collection:"Thu n khch hng",debt_payment:"Tr n nh cung cp",sale_refund:"Hon tr",other_expense:"Chi khc"}[e]||e:"--",Pje=({onClose:e,onSave:t})=>{const[r,n]=T.useState("income"),[a,i]=T.useState("0"),[l,o]=T.useState(""),[c,d]=T.useState("cash"),[f,p]=T.useState(""),[y,g]=T.useState(""),[N,w]=T.useState(new Date().toISOString().split("T")[0]),k=E=>{E.preventDefault(),t({type:r,amount:parseFloat(a),category:l,paymentSourceId:c,recipient:f,notes:y,date:new Date(N).toISOString()})},S=[{value:"sale_income",label:"Tin bn hng"},{value:"service_income",label:"Tin dch v"},{value:"other_income",label:"Thu nhp khc"}],O=[{value:"inventory_purchase",label:"Mua hng"},{value:"salary",label:"Lng nhn vin"},{value:"rent",label:"Tin thu mt bng"},{value:"utilities",label:"in nc"},{value:"sale_refund",label:"Hon tr khch hng"},{value:"other_expense",label:"Chi ph khc"}];return s.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl max-w-lg w-full border border-slate-200 dark:border-slate-700",children:[s.jsx("div",{className:"px-6 py-4 border-b border-slate-200 dark:border-slate-700",children:s.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-white",children:"Thm giao dch"})}),s.jsxs("form",{onSubmit:k,className:"p-6 space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Loi giao dch"}),s.jsxs("div",{className:"flex gap-4",children:[s.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[s.jsx("input",{type:"radio",value:"income",checked:r==="income",onChange:E=>n(E.target.value),className:"w-4 h-4 text-blue-600"}),s.jsx("span",{className:"text-slate-900 dark:text-white",children:"Thu tin"})]}),s.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[s.jsx("input",{type:"radio",value:"expense",checked:r==="expense",onChange:E=>n(E.target.value),className:"w-4 h-4 text-blue-600"}),s.jsx("span",{className:"text-slate-900 dark:text-white",children:"Chi tin"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"S tin"}),s.jsx("input",{type:"number",value:a,onChange:E=>i(E.target.value),className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Danh mc"}),s.jsxs("select",{value:l,onChange:E=>o(E.target.value),className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white",required:!0,children:[s.jsx("option",{value:"",children:"Chn danh mc"}),(r==="income"?S:O).map(E=>s.jsx("option",{value:E.value,children:E.label},E.value))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"i tng"}),s.jsx("input",{type:"text",value:f,onChange:E=>p(E.target.value),placeholder:r==="income"?"Thu tin t ai?":"Chi tin cho ai?",className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Ngun tin"}),s.jsxs("div",{className:"flex gap-4",children:[s.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[s.jsx("input",{type:"radio",value:"cash",checked:c==="cash",onChange:E=>d(E.target.value),className:"w-4 h-4 text-blue-600"}),s.jsx("span",{className:"text-slate-900 dark:text-white",children:"Tin mt"})]}),s.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[s.jsx("input",{type:"radio",value:"bank",checked:c==="bank",onChange:E=>d(E.target.value),className:"w-4 h-4 text-blue-600"}),s.jsx("span",{className:"text-slate-900 dark:text-white",children:"Ngn hng"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Ngy giao dch"}),s.jsx("input",{type:"date",value:N,onChange:E=>w(E.target.value),className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Ni dung"}),s.jsx("textarea",{value:y,onChange:E=>g(E.target.value),rows:3,className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white",placeholder:"Ghi ch v giao dch..."})]}),s.jsxs("div",{className:"flex gap-3 pt-2",children:[s.jsx("button",{type:"button",onClick:e,className:"flex-1 px-4 py-2.5 bg-slate-200 dark:bg-slate-700 hover:bg-slate-300 dark:hover:bg-slate-600 text-slate-900 dark:text-white rounded-lg font-medium transition-colors",children:"Hy"}),s.jsx("button",{type:"submit",className:"flex-1 px-4 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors",children:"Lu giao dch"})]})]})]})})},$V=()=>{const{currentBranchId:e,setCashTransactions:t,cashTransactions:r,setPaymentSources:n,paymentSources:a}=Ba(),{data:i=[],isLoading:l}=CF(),{data:o=[],isLoading:c}=pte(),d=fte(),f=mte();xte();const p=gte(),[y,g]=T.useState(!1),[N,w]=T.useState(!1),[k,S]=T.useState(!1),[O,E]=T.useState(null),[D,q]=T.useState(null),W=T.useMemo(()=>{const U=i.reduce((J,ae)=>J+ae.principal,0),z=i.reduce((J,ae)=>J+ae.remainingAmount,0),Z=U-z,H=i.filter(J=>J.status==="active").length,K=i.filter(J=>J.status==="overdue").length;return{totalLoans:U,totalRemaining:z,totalPaid:Z,activeLoans:H,overdueLoans:K}},[i]),R=T.useMemo(()=>({active:i.filter(U=>U.status==="active"),overdue:i.filter(U=>U.status==="overdue"),paid:i.filter(U=>U.status==="paid")}),[i]);return s.jsxs("div",{className:"h-full flex flex-col bg-slate-50 dark:bg-slate-900",children:[s.jsx("div",{className:"bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 px-6 py-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Qun l vn & vay"}),s.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:"Theo di cc khon vay v lch tr n"})]}),s.jsxs("button",{onClick:()=>g(!0),className:"flex items-center gap-2 px-4 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors",children:[s.jsx(Ac,{className:"w-5 h-5"}),s.jsx("span",{children:"Thm khon vay"})]})]})}),s.jsx("div",{className:"p-4 md:p-6",children:l||c?s.jsxs("div",{className:"flex items-center justify-center py-12",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-cyan-600"}),s.jsx("span",{className:"ml-3 text-secondary-text",children:"ang ti d liu..."})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-3 md:gap-4 mb-6",children:[s.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4 border-2 border-blue-200 dark:border-blue-800",children:[s.jsx("div",{className:"text-blue-600 dark:text-blue-400 text-sm font-medium mb-2",children:"Tng vay"}),s.jsx("div",{className:"text-blue-900 dark:text-blue-100 text-xl md:text-2xl font-bold truncate",children:Oe(W.totalLoans)})]}),s.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 rounded-lg p-4 border-2 border-red-200 dark:border-red-800",children:[s.jsx("div",{className:"text-red-600 dark:text-red-400 text-sm font-medium mb-2",children:"Cn n"}),s.jsx("div",{className:"text-red-900 dark:text-red-100 text-xl md:text-2xl font-bold truncate",children:Oe(W.totalRemaining)})]}),s.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-4 border-2 border-green-200 dark:border-green-800",children:[s.jsx("div",{className:"text-green-600 dark:text-green-400 text-sm font-medium mb-2",children:" tr"}),s.jsx("div",{className:"text-green-900 dark:text-green-100 text-xl md:text-2xl font-bold truncate",children:Oe(W.totalPaid)})]}),s.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/20 rounded-lg p-4 border-2 border-amber-200 dark:border-amber-800",children:[s.jsx("div",{className:"text-amber-600 dark:text-amber-400 text-sm font-medium mb-2",children:"ang vay"}),s.jsx("div",{className:"text-amber-900 dark:text-amber-100 text-xl md:text-2xl font-bold",children:W.activeLoans}),s.jsx("div",{className:"text-amber-600 dark:text-amber-400 text-xs mt-1",children:"khon"})]}),s.jsxs("div",{className:"col-span-2 md:col-span-1 bg-orange-50 dark:bg-orange-900/20 rounded-lg p-4 border-2 border-orange-200 dark:border-orange-800",children:[s.jsx("div",{className:"text-orange-600 dark:text-orange-400 text-sm font-medium mb-2",children:"Qu hn"}),s.jsx("div",{className:"text-orange-900 dark:text-orange-100 text-xl md:text-2xl font-bold",children:W.overdueLoans}),s.jsx("div",{className:"text-orange-600 dark:text-orange-400 text-xs mt-1",children:"khon"})]})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"Cc khon vay ang hot ng"}),R.active.length===0?s.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-8 text-center text-slate-500 dark:text-slate-400",children:"Khng c khon vay no ang hot ng"}):s.jsx("div",{className:"grid gap-4",children:R.active.map(U=>s.jsx(pN,{loan:U,onPayment:()=>{E(U),S(!0)},onEdit:()=>{q(U),w(!0)}},U.id))})]}),R.overdue.length>0&&s.jsxs("div",{className:"mb-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-orange-600 dark:text-orange-400 mb-4",children:"Cc khon vay qu hn"}),s.jsx("div",{className:"grid gap-4",children:R.overdue.map(U=>s.jsx(pN,{loan:U,onPayment:()=>{E(U),S(!0)},onEdit:()=>{q(U),w(!0)},isOverdue:!0},U.id))})]}),R.paid.length>0&&s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"Cc khon vay  thanh ton"}),s.jsx("div",{className:"grid gap-4",children:R.paid.map(U=>s.jsx(pN,{loan:U,isPaid:!0},U.id))})]})]})}),y&&s.jsx(Ije,{onClose:()=>g(!1),onSave:async U=>{try{await d.mutateAsync(U),Xe.success(" thm khon vay thnh cng"),g(!1)}catch(z){Xe.error(z.message||"Khng th thm khon vay")}}}),N&&D&&s.jsx(Dje,{loan:D,onClose:()=>{w(!1),q(null)},onSave:async U=>{try{await f.mutateAsync({id:D.id,updates:U}),Xe.success(" cp nht khon vay thnh cng"),w(!1),q(null)}catch(z){Xe.error(z.message||"Khng th cp nht khon vay")}}}),k&&O&&s.jsx(Mje,{loan:O,onClose:()=>{S(!1),E(null)},onSave:async U=>{try{await f.mutateAsync({id:O.id,updates:{remainingAmount:U.remainingAmount,status:U.remainingAmount===0?"paid":O.status}}),await p.mutateAsync(U),Xe.success(" ghi nhn thanh ton thnh cng");const Z={id:`CT-${Date.now()}`,type:"expense",date:U.paymentDate,amount:U.totalAmount,recipient:O.lenderName,notes:`Tr n vay - ${O.lenderName} (Gc: ${Oe(U.principalAmount)}, Li: ${Oe(U.interestAmount)})`,paymentSourceId:U.paymentMethod,branchId:e,category:"loan_payment"};t([Z,...r]),n(a.map(H=>H.id===U.paymentMethod?{...H,balance:{...H.balance,[e]:(H.balance[e]||0)-U.totalAmount}}:H)),S(!1),E(null)}catch(z){Xe.error(z.message||"Khng th ghi nhn thanh ton")}}})]})},pN=({loan:e,onPayment:t,onEdit:r,isOverdue:n,isPaid:a})=>{const i=(e.principal-e.remainingAmount)/e.principal*100,l=Math.ceil((new Date(e.endDate).getTime()-new Date().getTime())/(1e3*60*60*24));return s.jsxs("div",{className:`bg-white dark:bg-slate-800 rounded-lg border-2 p-6 ${n?"border-orange-300 dark:border-orange-700":a?"border-green-300 dark:border-green-700":"border-slate-200 dark:border-slate-700"}`,children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:e.lenderName}),s.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${e.loanType==="bank"?"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400":e.loanType==="personal"?"bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-400":"bg-slate-100 text-slate-800 dark:bg-slate-700 dark:text-slate-400"}`,children:e.loanType==="bank"?"Ngn hng":e.loanType==="personal"?"C nhn":"Khc"})]}),s.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:e.purpose})]}),!a&&s.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[s.jsx("button",{onClick:r,className:"px-4 py-2 bg-amber-500 hover:bg-amber-600 text-white rounded-lg text-sm font-medium transition-colors whitespace-nowrap",children:" Sa"}),s.jsx("button",{onClick:t,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm font-medium transition-colors whitespace-nowrap",children:" Tr n"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"S tin vay"}),s.jsx("div",{className:"text-sm font-semibold text-slate-900 dark:text-white truncate",children:Oe(e.principal)})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"Cn n"}),s.jsx("div",{className:"text-sm font-semibold text-red-600 dark:text-red-400 truncate",children:Oe(e.remainingAmount)})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"Li sut"}),s.jsxs("div",{className:"text-sm font-semibold text-slate-900 dark:text-white",children:[e.interestRate,"%/nm"]})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"Tr hng thng"}),s.jsx("div",{className:"text-sm font-semibold text-slate-900 dark:text-white truncate",children:Oe(e.monthlyPayment)})]})]}),s.jsxs("div",{className:"mb-4",children:[s.jsxs("div",{className:"flex justify-between text-xs text-slate-500 dark:text-slate-400 mb-2",children:[s.jsxs("span",{children:[" tr ",i.toFixed(1),"%"]}),s.jsx("span",{children:!a&&(n?"Qu hn":l>0?`Cn ${l} ngy`:"n hn hm nay")})]}),s.jsx("div",{className:"h-2 bg-slate-200 dark:bg-slate-700 rounded-full overflow-hidden",children:s.jsx("div",{className:`h-full transition-all ${n?"bg-orange-500":a?"bg-green-500":"bg-blue-500"}`,style:{width:`${i}%`}})})]}),s.jsxs("div",{className:"flex items-center justify-between text-xs text-slate-500 dark:text-slate-400",children:[s.jsxs("span",{children:["Ngy vay: ",Bn(new Date(e.startDate))]}),s.jsxs("span",{children:["n hn: ",Bn(new Date(e.endDate))]})]})]})},Ije=({onClose:e,onSave:t})=>{const[r,n]=T.useState(""),[a,i]=T.useState("bank"),[l,o]=T.useState("0"),[c,d]=T.useState("0"),[f,p]=T.useState("12"),[y,g]=T.useState(new Date().toISOString().split("T")[0]),[N,w]=T.useState(""),[k,S]=T.useState(""),O=E=>{E.preventDefault();const D=parseFloat(l),q=parseFloat(c),W=parseInt(f),R=q/100/12,U=D*(R*Math.pow(1+R,W))/(Math.pow(1+R,W)-1),z=new Date(y),Z=new Date(z);Z.setMonth(Z.getMonth()+W);const H={lenderName:r,loanType:a,principal:D,interestRate:q,term:W,startDate:z.toISOString(),endDate:Z.toISOString(),remainingAmount:D,monthlyPayment:isNaN(U)?0:U,status:"active",purpose:N,collateral:k};t(H)};return s.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl max-w-2xl w-full border border-slate-200 dark:border-slate-700 max-h-[90vh] overflow-y-auto",children:[s.jsx("div",{className:"px-6 py-4 border-b border-slate-200 dark:border-slate-700 sticky top-0 bg-white dark:bg-slate-800",children:s.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-white",children:"Thm khon vay mi"})}),s.jsxs("form",{onSubmit:O,className:"p-6 space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Tn ngn hng/Ngi cho vay *"}),s.jsx("input",{type:"text",value:r,onChange:E=>n(E.target.value),className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Loi vay *"}),s.jsxs("select",{value:a,onChange:E=>i(E.target.value),className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white",children:[s.jsx("option",{value:"bank",children:"Ngn hng"}),s.jsx("option",{value:"personal",children:"C nhn"}),s.jsx("option",{value:"other",children:"Khc"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"S tin vay *"}),s.jsx("input",{type:"number",value:l,onChange:E=>o(E.target.value),className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Li sut (%/nm) *"}),s.jsx("input",{type:"number",step:"0.1",value:c,onChange:E=>d(E.target.value),className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"K hn (thng) *"}),s.jsx("input",{type:"number",value:f,onChange:E=>p(E.target.value),className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white",required:!0})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Ngy vay *"}),s.jsx("input",{type:"date",value:y,onChange:E=>g(E.target.value),className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Mc ch vay"}),s.jsx("input",{type:"text",value:N,onChange:E=>w(E.target.value),placeholder:"V d: M rng ca hng, mua thit b...",className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Ti sn th chp"}),s.jsx("input",{type:"text",value:k,onChange:E=>S(E.target.value),placeholder:"V d: S  nh, giy t xe...",className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white"})]}),s.jsxs("div",{className:"flex gap-3 pt-4",children:[s.jsx("button",{type:"button",onClick:e,className:"flex-1 px-4 py-2.5 bg-slate-200 dark:bg-slate-700 hover:bg-slate-300 dark:hover:bg-slate-600 text-slate-900 dark:text-white rounded-lg font-medium transition-colors",children:"Hy"}),s.jsx("button",{type:"submit",className:"flex-1 px-4 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors",children:"Thm khon vay"})]})]})]})})},Dje=({loan:e,onClose:t,onSave:r})=>{const[n,a]=T.useState(e.lenderName),[i,l]=T.useState(e.loanType),[o,c]=T.useState(e.principal.toString()),[d,f]=T.useState(e.interestRate.toString()),[p,y]=T.useState(e.term.toString()),[g,N]=T.useState(e.startDate.split("T")[0]),[w,k]=T.useState(e.purpose||""),[S,O]=T.useState(e.collateral||""),E=D=>{D.preventDefault();const q=parseFloat(o),W=parseFloat(d),R=parseInt(p),U=W/100/12,z=q*(U*Math.pow(1+U,R))/(Math.pow(1+U,R)-1),Z=new Date(g),H=new Date(Z);H.setMonth(H.getMonth()+R);const K={lenderName:n,loanType:i,principal:q,interestRate:W,term:R,startDate:Z.toISOString(),endDate:H.toISOString(),monthlyPayment:isNaN(z)?0:z,purpose:w,collateral:S};r(K)};return s.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl max-w-2xl w-full border border-slate-200 dark:border-slate-700 max-h-[90vh] overflow-y-auto",children:[s.jsx("div",{className:"px-6 py-4 border-b border-slate-200 dark:border-slate-700 sticky top-0 bg-white dark:bg-slate-800",children:s.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-white",children:"Chnh sa khon vay"})}),s.jsxs("form",{onSubmit:E,className:"p-6 space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Tn ngn hng/Ngi cho vay *"}),s.jsx("input",{type:"text",value:n,onChange:D=>a(D.target.value),className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Loi vay *"}),s.jsxs("select",{value:i,onChange:D=>l(D.target.value),className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white",children:[s.jsx("option",{value:"bank",children:"Ngn hng"}),s.jsx("option",{value:"personal",children:"C nhn"}),s.jsx("option",{value:"other",children:"Khc"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"S tin vay *"}),s.jsx("input",{type:"number",value:o,onChange:D=>c(D.target.value),className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Li sut (%/nm) *"}),s.jsx("input",{type:"number",step:"0.1",value:d,onChange:D=>f(D.target.value),className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"K hn (thng) *"}),s.jsx("input",{type:"number",value:p,onChange:D=>y(D.target.value),className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white",required:!0})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Ngy vay *"}),s.jsx("input",{type:"date",value:g,onChange:D=>N(D.target.value),className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Mc ch vay"}),s.jsx("input",{type:"text",value:w,onChange:D=>k(D.target.value),placeholder:"V d: M rng ca hng, mua thit b...",className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Ti sn th chp"}),s.jsx("input",{type:"text",value:S,onChange:D=>O(D.target.value),placeholder:"V d: S  nh, giy t xe...",className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white"})]}),s.jsxs("div",{className:"flex gap-3 pt-4",children:[s.jsx("button",{type:"button",onClick:t,className:"flex-1 px-4 py-2.5 bg-slate-200 dark:bg-slate-700 hover:bg-slate-300 dark:hover:bg-slate-600 text-slate-900 dark:text-white rounded-lg font-medium transition-colors",children:"Hy"}),s.jsx("button",{type:"submit",className:"flex-1 px-4 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors",children:"Cp nht"})]})]})]})})},Mje=({loan:e,onClose:t,onSave:r})=>{const[n,a]=T.useState(e.monthlyPayment.toString()),[i,l]=T.useState("0"),[o,c]=T.useState("bank"),[d,f]=T.useState(new Date().toISOString().split("T")[0]),[p,y]=T.useState(""),g=parseFloat(n)+parseFloat(i),N=e.remainingAmount-parseFloat(n),w=k=>{k.preventDefault();const S={id:`LOANPAY-${Date.now()}`,loanId:e.id,paymentDate:new Date(d).toISOString(),principalAmount:parseFloat(n),interestAmount:parseFloat(i),totalAmount:g,remainingAmount:Math.max(0,N),paymentMethod:o,notes:p,branchId:e.branchId};r(S)};return s.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl max-w-lg w-full border border-slate-200 dark:border-slate-700",children:[s.jsxs("div",{className:"px-6 py-4 border-b border-slate-200 dark:border-slate-700",children:[s.jsxs("h2",{className:"text-xl font-semibold text-slate-900 dark:text-white",children:["Tr n - ",e.lenderName]}),s.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:["Cn n: ",Oe(e.remainingAmount)]})]}),s.jsxs("form",{onSubmit:w,className:"p-6 space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Tin gc *"}),s.jsx("input",{type:"number",value:n,onChange:k=>a(k.target.value),className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Tin li"}),s.jsx("input",{type:"number",value:i,onChange:k=>l(k.target.value),className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white"})]}),s.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4 border border-blue-200 dark:border-blue-800",children:[s.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[s.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Tng tin tr:"}),s.jsx("span",{className:"font-semibold text-slate-900 dark:text-white",children:Oe(g)})]}),s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Cn li sau khi tr:"}),s.jsx("span",{className:"font-semibold text-red-600 dark:text-red-400",children:Oe(Math.max(0,N))})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Hnh thc thanh ton"}),s.jsxs("div",{className:"flex gap-4",children:[s.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[s.jsx("input",{type:"radio",value:"cash",checked:o==="cash",onChange:k=>c(k.target.value),className:"w-4 h-4 text-blue-600"}),s.jsx("span",{className:"text-slate-900 dark:text-white",children:"Tin mt"})]}),s.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[s.jsx("input",{type:"radio",value:"bank",checked:o==="bank",onChange:k=>c(k.target.value),className:"w-4 h-4 text-blue-600"}),s.jsx("span",{className:"text-slate-900 dark:text-white",children:"Chuyn khon"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Ngy tr"}),s.jsx("input",{type:"date",value:d,onChange:k=>f(k.target.value),className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Ghi ch"}),s.jsx("textarea",{value:p,onChange:k=>y(k.target.value),rows:2,className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white"})]}),s.jsxs("div",{className:"flex gap-3 pt-2",children:[s.jsx("button",{type:"button",onClick:t,className:"flex-1 px-4 py-2.5 bg-slate-200 dark:bg-slate-700 hover:bg-slate-300 dark:hover:bg-slate-600 text-slate-900 dark:text-white rounded-lg font-medium transition-colors",children:"Hy"}),s.jsx("button",{type:"submit",className:"flex-1 px-4 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors",children:"Xc nhn tr n"})]})]})]})})};async function Lje(){try{const{data:e,error:t}=await Ot.from("fixed_assets").select("*").order("purchase_date",{ascending:!1});if(t)return Ct({code:"supabase",message:"Khng th ti danh sch ti sn c nh",cause:t});const r=(e||[]).map(n=>({id:n.id,name:n.name,assetType:n.asset_type,purchasePrice:parseFloat(n.purchase_price),currentValue:parseFloat(n.current_value),purchaseDate:n.purchase_date,depreciationRate:parseFloat(n.depreciation_rate),depreciationMethod:n.depreciation_method,usefulLife:n.useful_life,status:n.status,serialNumber:n.serial_number,location:n.location,supplier:n.supplier,warranty:n.warranty,notes:n.notes,branchId:n.branch_id,created_at:n.created_at,updated_at:n.updated_at}));return _n(r)}catch(e){return Ct({code:"network",message:"Li kt ni khi ti ti sn c nh",cause:e})}}async function Rje(e){try{const{data:t,error:r}=await Ot.from("fixed_assets").insert({name:e.name,asset_type:e.assetType,purchase_price:e.purchasePrice,current_value:e.currentValue,purchase_date:e.purchaseDate,depreciation_rate:e.depreciationRate,depreciation_method:e.depreciationMethod,useful_life:e.usefulLife,status:e.status,serial_number:e.serialNumber,location:e.location,supplier:e.supplier,warranty:e.warranty,notes:e.notes,branch_id:e.branchId}).select().single();return r||!t?Ct({code:"supabase",message:"Khng th thm ti sn c nh",cause:r}):_n({id:t.id,name:t.name,assetType:t.asset_type,purchasePrice:parseFloat(t.purchase_price),currentValue:parseFloat(t.current_value),purchaseDate:t.purchase_date,depreciationRate:parseFloat(t.depreciation_rate),depreciationMethod:t.depreciation_method,usefulLife:t.useful_life,status:t.status,serialNumber:t.serial_number,location:t.location,supplier:t.supplier,warranty:t.warranty,notes:t.notes,branchId:t.branch_id,created_at:t.created_at,updated_at:t.updated_at})}catch(t){return Ct({code:"network",message:"Li kt ni khi thm ti sn c nh",cause:t})}}async function Fje(e,t){try{const r={};t.name!==void 0&&(r.name=t.name),t.assetType!==void 0&&(r.asset_type=t.assetType),t.purchasePrice!==void 0&&(r.purchase_price=t.purchasePrice),t.currentValue!==void 0&&(r.current_value=t.currentValue),t.purchaseDate!==void 0&&(r.purchase_date=t.purchaseDate),t.depreciationRate!==void 0&&(r.depreciation_rate=t.depreciationRate),t.depreciationMethod!==void 0&&(r.depreciation_method=t.depreciationMethod),t.usefulLife!==void 0&&(r.useful_life=t.usefulLife),t.status!==void 0&&(r.status=t.status),t.serialNumber!==void 0&&(r.serial_number=t.serialNumber),t.location!==void 0&&(r.location=t.location),t.supplier!==void 0&&(r.supplier=t.supplier),t.warranty!==void 0&&(r.warranty=t.warranty),t.notes!==void 0&&(r.notes=t.notes);const{data:n,error:a}=await Ot.from("fixed_assets").update(r).eq("id",e).select().single();return a||!n?Ct({code:"supabase",message:"Khng th cp nht ti sn c nh",cause:a}):_n({id:n.id,name:n.name,assetType:n.asset_type,purchasePrice:parseFloat(n.purchase_price),currentValue:parseFloat(n.current_value),purchaseDate:n.purchase_date,depreciationRate:parseFloat(n.depreciation_rate),depreciationMethod:n.depreciation_method,usefulLife:n.useful_life,status:n.status,serialNumber:n.serial_number,location:n.location,supplier:n.supplier,warranty:n.warranty,notes:n.notes,branchId:n.branch_id,created_at:n.created_at,updated_at:n.updated_at})}catch(r){return Ct({code:"network",message:"Li kt ni khi cp nht ti sn c nh",cause:r})}}async function Bje(e){try{const{error:t}=await Ot.from("fixed_assets").delete().eq("id",e);return t?Ct({code:"supabase",message:"Khng th xa ti sn c nh",cause:t}):_n(void 0)}catch(t){return Ct({code:"network",message:"Li kt ni khi xa ti sn c nh",cause:t})}}function Uje(){const{currentBranchId:e}=Ba();return Ts({queryKey:["fixed-assets",e],queryFn:async()=>{const t=await Lje();if(!t.ok)throw new Error(t.error.message);return t.data.filter(r=>r.branchId===e)},staleTime:3e4})}function zje(){const e=qn(),{currentBranchId:t}=Ba();return ha({mutationFn:async r=>{const n=await Rje(r);if(!n.ok)throw new Error(n.error.message);return n.data},onSuccess:()=>{e.invalidateQueries({queryKey:["fixed-assets",t]})}})}function qje(){const e=qn(),{currentBranchId:t}=Ba();return ha({mutationFn:async({id:r,updates:n})=>{const a=await Fje(r,n);if(!a.ok)throw new Error(a.error.message);return a.data},onSuccess:()=>{e.invalidateQueries({queryKey:["fixed-assets",t]})}})}function Hje(){const e=qn(),{currentBranchId:t}=Ba();return ha({mutationFn:async r=>{const n=await Bje(r);if(!n.ok)throw new Error(n.error.message)},onSuccess:()=>{e.invalidateQueries({queryKey:["fixed-assets",t]})}})}const $je=()=>{const{currentBranchId:e}=Ba(),{data:t=[],isLoading:r}=Uje(),n=zje(),a=qje(),i=Hje(),[l,o]=T.useState(!1),[c,d]=T.useState(!1),[f,p]=T.useState(null),[y,g]=T.useState("all"),[N,w]=T.useState("all"),k=T.useMemo(()=>{const q=t.reduce((z,Z)=>z+Z.purchasePrice,0),W=t.reduce((z,Z)=>z+Z.currentValue,0),R=t.filter(z=>z.status==="active").length,U=q-W;return{totalValue:q,currentValue:W,activeAssets:R,totalDepreciation:U}},[t]),S=T.useMemo(()=>t.filter(q=>!(y!=="all"&&q.assetType!==y||N!=="all"&&q.status!==N)),[t,y,N]),O=async q=>{try{await n.mutateAsync({...q,branchId:e}),Xe.success(" thm ti sn c nh"),o(!1)}catch(W){Xe.error(W.message||"Khng th thm ti sn")}},E=async q=>{if(f)try{await a.mutateAsync({id:f.id,updates:q}),Xe.success(" cp nht ti sn"),d(!1),p(null)}catch(W){Xe.error(W.message||"Khng th cp nht ti sn")}},D=async q=>{if(window.confirm("Bn c chc mun xa ti sn ny?"))try{await i.mutateAsync(q),Xe.success(" xa ti sn")}catch(W){Xe.error(W.message||"Khng th xa ti sn")}};return r?s.jsx("div",{className:"h-full flex items-center justify-center",children:s.jsx("div",{className:"text-slate-500 dark:text-slate-400",children:"ang ti..."})}):s.jsxs("div",{className:"h-full flex flex-col bg-slate-50 dark:bg-slate-900",children:[s.jsx("div",{className:"bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 px-6 py-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Ti sn c nh"}),s.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:"Qun l ti sn v theo di khu hao"})]}),s.jsxs("button",{onClick:()=>o(!0),className:"flex items-center gap-2 px-4 py-2.5 bg-green-600 hover:bg-green-700 text-white rounded-lg font-medium transition-colors",children:[s.jsx(Ac,{className:"w-5 h-5"}),s.jsx("span",{children:"Thm ti sn"})]})]})}),s.jsxs("div",{className:"p-4 md:p-6",children:[s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-4",children:[s.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"Tng gi tr mua"}),s.jsx("div",{className:"text-xl font-bold text-slate-900 dark:text-white",children:Oe(k.totalValue)})]}),s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-4",children:[s.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"Gi tr hin ti"}),s.jsx("div",{className:"text-xl font-bold text-blue-600 dark:text-blue-400",children:Oe(k.currentValue)})]}),s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-4",children:[s.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"Khu hao ly k"}),s.jsx("div",{className:"text-xl font-bold text-orange-600 dark:text-orange-400",children:Oe(k.totalDepreciation)})]}),s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-4",children:[s.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"Ti sn ang dng"}),s.jsx("div",{className:"text-xl font-bold text-green-600 dark:text-green-400",children:k.activeAssets})]})]}),s.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-4 mb-4",children:s.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Loi:"}),s.jsxs("select",{value:y,onChange:q=>g(q.target.value),className:"px-3 py-1.5 bg-slate-100 dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-sm",children:[s.jsx("option",{value:"all",children:"Tt c"}),s.jsx("option",{value:"equipment",children:"Thit b"}),s.jsx("option",{value:"vehicle",children:"Xe c"}),s.jsx("option",{value:"building",children:"Nh xng"}),s.jsx("option",{value:"furniture",children:"Ni tht"}),s.jsx("option",{value:"other",children:"Khc"})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Trng thi:"}),s.jsxs("select",{value:N,onChange:q=>w(q.target.value),className:"px-3 py-1.5 bg-slate-100 dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-sm",children:[s.jsx("option",{value:"all",children:"Tt c"}),s.jsx("option",{value:"active",children:"ang dng"}),s.jsx("option",{value:"maintenance",children:"Bo tr"}),s.jsx("option",{value:"disposed",children:" thanh l"})]})]})]})}),S.length===0?s.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-8 text-center text-slate-500 dark:text-slate-400",children:t.length===0?"Cha c ti sn c nh no":"Khng tm thy ti sn ph hp"}):s.jsx("div",{className:"grid gap-4",children:S.map(q=>s.jsx(Vje,{asset:q,onEdit:()=>{p(q),d(!0)},onDelete:()=>D(q.id)},q.id))})]}),l&&s.jsx(GD,{onClose:()=>o(!1),onSave:O,branchId:e}),c&&f&&s.jsx(GD,{asset:f,onClose:()=>{d(!1),p(null)},onSave:E,branchId:e})]})},Vje=({asset:e,onEdit:t,onDelete:r})=>{const n=(e.purchasePrice-e.currentValue)/e.purchasePrice*100,a=o=>({equipment:"Thit b",vehicle:"Xe c",building:"Nh xng",furniture:"Ni tht",other:"Khc"})[o]||o,i=o=>{const c={active:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400",maintenance:"bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-400",disposed:"bg-slate-100 text-slate-800 dark:bg-slate-700 dark:text-slate-400"};return c[o]||c.active},l=o=>({active:"ang dng",maintenance:"Bo tr",disposed:" thanh l"})[o]||o;return s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-6",children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:e.name}),s.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400",children:a(e.assetType)}),s.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${i(e.status)}`,children:l(e.status)})]}),e.serialNumber&&s.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:["Serial: ",e.serialNumber]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:t,className:"px-3 py-1.5 bg-amber-500 hover:bg-amber-600 text-white rounded-lg text-sm font-medium transition-colors",children:" Sa"}),s.jsx("button",{onClick:r,className:"px-3 py-1.5 bg-red-500 hover:bg-red-600 text-white rounded-lg text-sm font-medium transition-colors",children:" Xa"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"Gi mua"}),s.jsx("div",{className:"text-sm font-semibold text-slate-900 dark:text-white",children:Oe(e.purchasePrice)})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"Gi tr hin ti"}),s.jsx("div",{className:"text-sm font-semibold text-blue-600 dark:text-blue-400",children:Oe(e.currentValue)})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"Khu hao/nm"}),s.jsxs("div",{className:"text-sm font-semibold text-slate-900 dark:text-white",children:[e.depreciationRate,"%"]})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"Thi gian SD"}),s.jsxs("div",{className:"text-sm font-semibold text-slate-900 dark:text-white",children:[e.usefulLife," nm"]})]})]}),s.jsxs("div",{className:"mb-3",children:[s.jsxs("div",{className:"flex justify-between text-xs text-slate-500 dark:text-slate-400 mb-2",children:[s.jsxs("span",{children:["Khu hao: ",n.toFixed(1),"%"]}),s.jsxs("span",{children:["Cn li: ",(100-n).toFixed(1),"%"]})]}),s.jsx("div",{className:"h-2 bg-slate-200 dark:bg-slate-700 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-orange-500 transition-all",style:{width:`${n}%`}})})]}),s.jsxs("div",{className:"flex items-center justify-between text-xs text-slate-500 dark:text-slate-400",children:[s.jsxs("span",{children:["Ngy mua: ",Bn(new Date(e.purchaseDate))]}),e.location&&s.jsxs("span",{children:["V tr: ",e.location]})]})]})},GD=({asset:e,onClose:t,onSave:r,branchId:n})=>{const[a,i]=T.useState((e==null?void 0:e.name)||""),[l,o]=T.useState((e==null?void 0:e.assetType)||"equipment"),[c,d]=T.useState((e==null?void 0:e.purchaseDate.split("T")[0])||new Date().toISOString().split("T")[0]),[f,p]=T.useState((e==null?void 0:e.purchasePrice.toString())||"0"),[y,g]=T.useState((e==null?void 0:e.depreciationRate.toString())||"10"),[N,w]=T.useState((e==null?void 0:e.usefulLife.toString())||"5"),[k,S]=T.useState((e==null?void 0:e.status)||"active"),[O,E]=T.useState((e==null?void 0:e.location)||""),[D,q]=T.useState((e==null?void 0:e.serialNumber)||""),[W,R]=T.useState((e==null?void 0:e.supplier)||""),[U,z]=T.useState((e==null?void 0:e.warranty)||""),[Z,H]=T.useState((e==null?void 0:e.notes)||""),K=J=>{J.preventDefault();const ae=parseFloat(f),se=parseFloat(y),ue=parseFloat(N),fe=(new Date().getTime()-new Date(c).getTime())/(1e3*60*60*24*365),ke=ae*se/100,_e=Math.min(ke*fe,ae),Le=Math.max(0,ae-_e),xe={name:a,assetType:l,purchaseDate:new Date(c).toISOString(),purchasePrice:ae,currentValue:Le,depreciationRate:se,depreciationMethod:"straight-line",usefulLife:ue,status:k,location:O,serialNumber:D,supplier:W,warranty:U,notes:Z,branchId:n};r(xe)};return s.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl max-w-3xl w-full border border-slate-200 dark:border-slate-700 max-h-[90vh] overflow-y-auto",children:[s.jsx("div",{className:"px-6 py-4 border-b border-slate-200 dark:border-slate-700 sticky top-0 bg-white dark:bg-slate-800",children:s.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-white",children:e?"Chnh sa ti sn":"Thm ti sn c nh"})}),s.jsxs("form",{onSubmit:K,className:"p-6 space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Tn ti sn *"}),s.jsx("input",{type:"text",value:a,onChange:J=>i(J.target.value),className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Loi ti sn *"}),s.jsxs("select",{value:l,onChange:J=>o(J.target.value),className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white",children:[s.jsx("option",{value:"equipment",children:"Thit b"}),s.jsx("option",{value:"vehicle",children:"Xe c"}),s.jsx("option",{value:"building",children:"Nh xng"}),s.jsx("option",{value:"furniture",children:"Ni tht"}),s.jsx("option",{value:"other",children:"Khc"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Trng thi"}),s.jsxs("select",{value:k,onChange:J=>S(J.target.value),className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white",children:[s.jsx("option",{value:"active",children:"ang dng"}),s.jsx("option",{value:"maintenance",children:"Bo tr"}),s.jsx("option",{value:"disposed",children:" thanh l"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Ngy mua *"}),s.jsx("input",{type:"date",value:c,onChange:J=>d(J.target.value),className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Gi mua *"}),s.jsx("input",{type:"number",value:f,onChange:J=>p(J.target.value),className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"T l khu hao (%/nm) *"}),s.jsx("input",{type:"number",step:"0.1",value:y,onChange:J=>g(J.target.value),className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Thi gian s dng (nm) *"}),s.jsx("input",{type:"number",value:N,onChange:J=>w(J.target.value),className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"S Serial"}),s.jsx("input",{type:"text",value:D,onChange:J=>q(J.target.value),className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"V tr"}),s.jsx("input",{type:"text",value:O,onChange:J=>E(J.target.value),className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Nh cung cp"}),s.jsx("input",{type:"text",value:W,onChange:J=>R(J.target.value),className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Bo hnh n"}),s.jsx("input",{type:"date",value:U,onChange:J=>z(J.target.value),className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white"})]}),s.jsxs("div",{className:"col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Ghi ch"}),s.jsx("textarea",{value:Z,onChange:J=>H(J.target.value),rows:3,className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white"})]})]}),s.jsxs("div",{className:"flex gap-3 pt-4",children:[s.jsx("button",{type:"button",onClick:t,className:"flex-1 px-4 py-2.5 bg-slate-200 dark:bg-slate-700 hover:bg-slate-300 dark:hover:bg-slate-600 text-slate-900 dark:text-white rounded-lg font-medium transition-colors",children:"Hy"}),s.jsx("button",{type:"submit",className:"flex-1 px-4 py-2.5 bg-green-600 hover:bg-green-700 text-white rounded-lg font-medium transition-colors",children:e?"Cp nht":"Thm ti sn"})]})]})]})})};async function Wje(){try{const{data:e,error:t}=await Ot.from("capital").select("*").order("date",{ascending:!1});if(t)return Ct({code:"supabase",message:"Khng th ti danh sch ngun vn",cause:t});const r=(e||[]).map(n=>({id:n.id,type:n.type,sourceName:n.source_name,amount:parseFloat(n.amount),date:n.date,notes:n.notes,interestRate:n.interest_rate?parseFloat(n.interest_rate):void 0,interestType:n.interest_type,paymentFrequency:n.payment_frequency,maturityDate:n.maturity_date,branchId:n.branch_id,created_at:n.created_at}));return _n(r)}catch(e){return Ct({code:"network",message:"Li kt ni khi ti ngun vn",cause:e})}}async function Kje(e){try{const{data:t,error:r}=await Ot.from("capital").insert({type:e.type,source_name:e.sourceName,amount:e.amount,date:e.date,notes:e.notes,interest_rate:e.interestRate,interest_type:e.interestType,payment_frequency:e.paymentFrequency,maturity_date:e.maturityDate,branch_id:e.branchId}).select().single();return r||!t?Ct({code:"supabase",message:"Khng th thm ngun vn",cause:r}):_n({id:t.id,type:t.type,sourceName:t.source_name,amount:parseFloat(t.amount),date:t.date,notes:t.notes,interestRate:t.interest_rate?parseFloat(t.interest_rate):void 0,interestType:t.interest_type,paymentFrequency:t.payment_frequency,maturityDate:t.maturity_date,branchId:t.branch_id,created_at:t.created_at})}catch(t){return Ct({code:"network",message:"Li kt ni khi thm ngun vn",cause:t})}}async function Gje(e,t){try{const r={};t.type!==void 0&&(r.type=t.type),t.sourceName!==void 0&&(r.source_name=t.sourceName),t.amount!==void 0&&(r.amount=t.amount),t.date!==void 0&&(r.date=t.date),t.notes!==void 0&&(r.notes=t.notes),t.interestRate!==void 0&&(r.interest_rate=t.interestRate),t.interestType!==void 0&&(r.interest_type=t.interestType),t.paymentFrequency!==void 0&&(r.payment_frequency=t.paymentFrequency),t.maturityDate!==void 0&&(r.maturity_date=t.maturityDate);const{data:n,error:a}=await Ot.from("capital").update(r).eq("id",e).select().single();return a||!n?Ct({code:"supabase",message:"Khng th cp nht ngun vn",cause:a}):_n({id:n.id,type:n.type,sourceName:n.source_name,amount:parseFloat(n.amount),date:n.date,notes:n.notes,interestRate:n.interest_rate?parseFloat(n.interest_rate):void 0,interestType:n.interest_type,paymentFrequency:n.payment_frequency,maturityDate:n.maturity_date,branchId:n.branch_id,created_at:n.created_at})}catch(r){return Ct({code:"network",message:"Li kt ni khi cp nht ngun vn",cause:r})}}async function Xje(e){try{const{error:t}=await Ot.from("capital").delete().eq("id",e);return t?Ct({code:"supabase",message:"Khng th xa ngun vn",cause:t}):_n(void 0)}catch(t){return Ct({code:"network",message:"Li kt ni khi xa ngun vn",cause:t})}}function Yje(){const{currentBranchId:e}=Ba();return Ts({queryKey:["capitals",e],queryFn:async()=>{const t=await Wje();if(!t.ok)throw new Error(t.error.message);return t.data.filter(r=>r.branchId===e)},staleTime:3e4})}function Zje(){const e=qn(),{currentBranchId:t}=Ba();return ha({mutationFn:async r=>{const n=await Kje(r);if(!n.ok)throw new Error(n.error.message);return n.data},onSuccess:()=>{e.invalidateQueries({queryKey:["capitals",t]})}})}function Qje(){const e=qn(),{currentBranchId:t}=Ba();return ha({mutationFn:async({id:r,updates:n})=>{const a=await Gje(r,n);if(!a.ok)throw new Error(a.error.message);return a.data},onSuccess:()=>{e.invalidateQueries({queryKey:["capitals",t]})}})}function Jje(){const e=qn(),{currentBranchId:t}=Ba();return ha({mutationFn:async r=>{const n=await Xje(r);if(!n.ok)throw new Error(n.error.message)},onSuccess:()=>{e.invalidateQueries({queryKey:["capitals",t]})}})}const eCe=()=>{const{currentBranchId:e}=Ba(),{data:t=[],isLoading:r}=Yje(),n=Zje(),a=Qje(),i=Jje(),[l,o]=T.useState(!1),[c,d]=T.useState(!1),[f,p]=T.useState(null),[y,g]=T.useState("all"),N=T.useMemo(()=>{const E=t.reduce((R,U)=>R+U.amount,0),D=t.filter(R=>R.type==="owner").reduce((R,U)=>R+U.amount,0),q=t.filter(R=>R.type==="investor").reduce((R,U)=>R+U.amount,0),W=t.filter(R=>R.type==="loan").reduce((R,U)=>R+U.amount,0);return{totalCapital:E,ownerCapital:D,investorCapital:q,loanCapital:W}},[t]),w=T.useMemo(()=>y==="all"?t:t.filter(E=>E.type===y),[t,y]),k=async E=>{try{await n.mutateAsync({...E,branchId:e}),Xe.success(" thm ngun vn"),o(!1)}catch(D){Xe.error(D.message||"Khng th thm ngun vn")}},S=async E=>{if(f)try{await a.mutateAsync({id:f.id,updates:E}),Xe.success(" cp nht ngun vn"),d(!1),p(null)}catch(D){Xe.error(D.message||"Khng th cp nht ngun vn")}},O=async E=>{if(window.confirm("Bn c chc mun xa ngun vn ny?"))try{await i.mutateAsync(E),Xe.success(" xa ngun vn")}catch(D){Xe.error(D.message||"Khng th xa ngun vn")}};return r?s.jsx("div",{className:"h-full flex items-center justify-center",children:s.jsx("div",{className:"text-slate-500 dark:text-slate-400",children:"ang ti..."})}):s.jsxs("div",{className:"h-full flex flex-col bg-slate-50 dark:bg-slate-900",children:[s.jsx("div",{className:"bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 px-6 py-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Vn u t"}),s.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:"Qun l vn ch s hu, vn u t v vn vay"})]}),s.jsxs("button",{onClick:()=>o(!0),className:"flex items-center gap-2 px-4 py-2.5 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-medium transition-colors",children:[s.jsx(Ac,{className:"w-5 h-5"}),s.jsx("span",{children:"Thm ngun vn"})]})]})}),s.jsxs("div",{className:"p-4 md:p-6",children:[s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[s.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20 rounded-lg border-2 border-purple-200 dark:border-purple-700 p-4",children:[s.jsx("div",{className:"text-xs text-purple-700 dark:text-purple-300 mb-1 font-medium",children:"Tng vn"}),s.jsx("div",{className:"text-xl font-bold text-purple-900 dark:text-purple-100",children:Oe(N.totalCapital)})]}),s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-4",children:[s.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"Vn ch"}),s.jsx("div",{className:"text-xl font-bold text-blue-600 dark:text-blue-400",children:Oe(N.ownerCapital)})]}),s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-4",children:[s.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"Vn u t"}),s.jsx("div",{className:"text-xl font-bold text-green-600 dark:text-green-400",children:Oe(N.investorCapital)})]}),s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-4",children:[s.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"Vn vay"}),s.jsx("div",{className:"text-xl font-bold text-orange-600 dark:text-orange-400",children:Oe(N.loanCapital)})]})]}),s.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-4 mb-4",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Loi ngun vn:"}),s.jsx("div",{className:"flex gap-2",children:[{value:"all",label:"Tt c"},{value:"owner",label:"Vn ch"},{value:"investor",label:"u t"},{value:"loan",label:"Vn vay"}].map(E=>s.jsx("button",{onClick:()=>g(E.value),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${y===E.value?"bg-purple-600 text-white":"bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-600"}`,children:E.label},E.value))})]})}),w.length===0?s.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-8 text-center text-slate-500 dark:text-slate-400",children:t.length===0?"Cha c ngun vn no":"Khng tm thy ngun vn ph hp"}):s.jsx("div",{className:"grid gap-4",children:w.map(E=>s.jsx(tCe,{capital:E,onEdit:()=>{p(E),d(!0)},onDelete:()=>O(E.id)},E.id))})]}),l&&s.jsx(XD,{onClose:()=>o(!1),onSave:k,branchId:e}),c&&f&&s.jsx(XD,{capital:f,onClose:()=>{d(!1),p(null)},onSave:S,branchId:e})]})},tCe=({capital:e,onEdit:t,onDelete:r})=>{const a=(i=>{const l={owner:{label:"Vn ch s hu",color:"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400",icon:""},investor:{label:"Vn u t",color:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400",icon:""},loan:{label:"Vn vay",color:"bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-400",icon:""}};return l[i]||l.owner})(e.type);return s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-6",children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsx("div",{className:"flex-1",children:s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.jsx("span",{className:"text-2xl",children:a.icon}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:e.sourceName}),s.jsx("span",{className:`inline-block px-2 py-1 rounded-full text-xs font-medium ${a.color} mt-1`,children:a.label})]})]})}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:t,className:"px-3 py-1.5 bg-amber-500 hover:bg-amber-600 text-white rounded-lg text-sm font-medium transition-colors",children:" Sa"}),s.jsx("button",{onClick:r,className:"px-3 py-1.5 bg-red-500 hover:bg-red-600 text-white rounded-lg text-sm font-medium transition-colors",children:" Xa"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-3",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"S tin"}),s.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:Oe(e.amount)})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"Ngy nhn"}),s.jsx("div",{className:"text-sm font-semibold text-slate-900 dark:text-white",children:Bn(new Date(e.date))})]})]}),(e.type==="investor"||e.type==="loan")&&e.interestRate&&s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-3 p-3 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"Li sut"}),s.jsxs("div",{className:"text-sm font-bold text-orange-600 dark:text-orange-400",children:[e.interestRate,"%/nm"]})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"Loi li"}),s.jsx("div",{className:"text-sm font-semibold text-slate-900 dark:text-white",children:e.interestType==="simple"?"Li n":"Li kp"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"K tr li"}),s.jsx("div",{className:"text-sm font-semibold text-slate-900 dark:text-white",children:e.paymentFrequency==="monthly"?"Hng thng":e.paymentFrequency==="quarterly"?"Hng qu":"Hng nm"})]}),e.maturityDate&&s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"n hn"}),s.jsx("div",{className:"text-sm font-semibold text-slate-900 dark:text-white",children:Bn(new Date(e.maturityDate))})]})]}),e.notes&&s.jsxs("div",{className:"mt-3 pt-3 border-t border-slate-200 dark:border-slate-700",children:[s.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"Ghi ch"}),s.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300",children:e.notes})]})]})},XD=({capital:e,onClose:t,onSave:r,branchId:n})=>{var R,U;const[a,i]=T.useState((e==null?void 0:e.type)||"owner"),[l,o]=T.useState((e==null?void 0:e.sourceName)||""),[c,d]=T.useState((e==null?void 0:e.amount.toString())||"0"),[f,p]=T.useState((e==null?void 0:e.date.split("T")[0])||new Date().toISOString().split("T")[0]),[y,g]=T.useState((e==null?void 0:e.notes)||""),[N,w]=T.useState(((R=e==null?void 0:e.interestRate)==null?void 0:R.toString())||"0"),[k,S]=T.useState((e==null?void 0:e.interestType)||"simple"),[O,E]=T.useState((e==null?void 0:e.paymentFrequency)||"monthly"),[D,q]=T.useState(((U=e==null?void 0:e.maturityDate)==null?void 0:U.split("T")[0])||""),W=z=>{if(z.preventDefault(),!l.trim()){Xe.error("Vui lng nhp tn ngun vn");return}const Z={type:a,sourceName:l.trim(),amount:parseFloat(c),date:new Date(f).toISOString(),notes:y.trim(),branchId:n};(a==="investor"||a==="loan")&&(Z.interestRate=parseFloat(N),Z.interestType=k,Z.paymentFrequency=O,D&&(Z.maturityDate=new Date(D).toISOString())),r(Z)};return s.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl max-w-2xl w-full border border-slate-200 dark:border-slate-700",children:[s.jsx("div",{className:"px-6 py-4 border-b border-slate-200 dark:border-slate-700",children:s.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-white",children:e?"Chnh sa ngun vn":"Thm ngun vn"})}),s.jsxs("form",{onSubmit:W,className:"p-6 space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Loi ngun vn *"}),s.jsx("div",{className:"grid grid-cols-3 gap-3",children:[{value:"owner",label:" Vn ch",color:"blue"},{value:"investor",label:" u t",color:"green"},{value:"loan",label:" Vay",color:"orange"}].map(z=>s.jsx("button",{type:"button",onClick:()=>i(z.value),className:`px-4 py-3 rounded-lg border-2 font-medium transition-all ${a===z.value?`border-${z.color}-500 bg-${z.color}-50 dark:bg-${z.color}-900/20 text-${z.color}-700 dark:text-${z.color}-300`:"border-slate-300 dark:border-slate-600 hover:border-slate-400 dark:hover:border-slate-500"}`,children:z.label},z.value))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Tn ngun vn *"}),s.jsx("input",{type:"text",value:l,onChange:z=>o(z.target.value),placeholder:a==="owner"?"VD: Vn ch - Nguyn Vn A":a==="investor"?"VD: Nh u t ABC":"VD: Ngn hng Vietcombank",className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white",required:!0})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"S tin *"}),s.jsx("input",{type:"number",value:c,onChange:z=>d(z.target.value),className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white",required:!0,min:"0"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Ngy nhn *"}),s.jsx("input",{type:"date",value:f,onChange:z=>p(z.target.value),className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white",required:!0})]})]}),(a==="investor"||a==="loan")&&s.jsxs("div",{className:"p-4 bg-orange-50 dark:bg-orange-900/10 rounded-lg border-2 border-orange-200 dark:border-orange-800 space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.jsx("span",{className:"text-lg",children:""}),s.jsx("h3",{className:"text-sm font-semibold text-slate-900 dark:text-white",children:"Thng tin li sut"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Li sut (%/nm)"}),s.jsx("input",{type:"number",step:"0.1",value:N,onChange:z=>w(z.target.value),className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white",min:"0"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Loi li"}),s.jsxs("select",{value:k,onChange:z=>S(z.target.value),className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white",children:[s.jsx("option",{value:"simple",children:"Li n"}),s.jsx("option",{value:"compound",children:"Li kp"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"K tr li"}),s.jsxs("select",{value:O,onChange:z=>E(z.target.value),className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white",children:[s.jsx("option",{value:"monthly",children:"Hng thng"}),s.jsx("option",{value:"quarterly",children:"Hng qu"}),s.jsx("option",{value:"yearly",children:"Hng nm"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Ngy n hn"}),s.jsx("input",{type:"date",value:D,onChange:z=>q(z.target.value),className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Ghi ch"}),s.jsx("textarea",{value:y,onChange:z=>g(z.target.value),rows:3,placeholder:"Thm ghi ch v ngun vn...",className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white"})]}),s.jsxs("div",{className:"flex gap-3 pt-4",children:[s.jsx("button",{type:"button",onClick:t,className:"flex-1 px-4 py-2.5 bg-slate-200 dark:bg-slate-700 hover:bg-slate-300 dark:hover:bg-slate-600 text-slate-900 dark:text-white rounded-lg font-medium transition-colors",children:"Hy"}),s.jsx("button",{type:"submit",className:"flex-1 px-4 py-2.5 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-medium transition-colors",children:e?"Cp nht":"Thm ngun vn"})]})]})]})})},YD={cashbook:{label:"S qu",Icon:mm,activeClass:"bg-gradient-to-r from-blue-600 to-indigo-500 text-white border-transparent shadow-lg shadow-blue-500/40",inactiveClass:"bg-white/90 dark:bg-slate-900/60 text-blue-700 dark:text-blue-200 border border-blue-200 dark:border-blue-700 hover:bg-blue-50/80 dark:hover:bg-blue-900/20",dotClass:"bg-blue-400"},loans:{label:"Khon vay",Icon:S6,activeClass:"bg-gradient-to-r from-cyan-500 to-teal-500 text-white border-transparent shadow-lg shadow-cyan-500/40",inactiveClass:"bg-white/90 dark:bg-slate-900/60 text-cyan-800 dark:text-cyan-200 border border-cyan-200 dark:border-cyan-800 hover:bg-cyan-50/80 dark:hover:bg-cyan-900/20",dotClass:"bg-cyan-400"},assets:{label:"TSC",Icon:JJ,activeClass:"bg-gradient-to-r from-emerald-500 to-lime-500 text-white border-transparent shadow-lg shadow-emerald-500/40",inactiveClass:"bg-white/90 dark:bg-slate-900/60 text-emerald-700 dark:text-emerald-200 border border-emerald-200 dark:border-emerald-800 hover:bg-emerald-50/80 dark:hover:bg-emerald-900/20",dotClass:"bg-emerald-400"},capital:{label:"Vn",Icon:aee,activeClass:"bg-gradient-to-r from-fuchsia-500 to-purple-500 text-white border-transparent shadow-lg shadow-fuchsia-500/40",inactiveClass:"bg-white/90 dark:bg-slate-900/60 text-fuchsia-700 dark:text-fuchsia-200 border border-fuchsia-200 dark:border-fuchsia-800 hover:bg-fuchsia-50/80 dark:hover:bg-fuchsia-900/20",dotClass:"bg-fuchsia-400"}},rCe=()=>{const[e,t]=T.useState("cashbook");return s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-slate-800 dark:to-slate-900 rounded-lg shadow-lg border border-primary-border p-4 md:p-6",children:s.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"flex items-center gap-2 text-2xl font-bold text-primary-text mb-2",children:[s.jsx(kee,{className:"w-7 h-7 text-blue-600 dark:text-blue-400"}),"Qun l Ti chnh"]}),s.jsx("p",{className:"text-secondary-text",children:"Qun l s qu, khon vay v cc giao dch ti chnh"})]}),s.jsx("div",{className:"flex flex-col md:flex-row gap-3 w-full md:w-auto mt-4 md:mt-0",children:s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 w-full md:w-auto",children:Object.keys(YD).map(r=>{const n=YD[r],a=e===r,i=n.Icon;return s.jsxs("button",{type:"button","aria-pressed":a,onClick:()=>t(r),className:`px-4 md:px-6 py-2 md:py-3 rounded-xl font-medium transition-all flex items-center justify-center gap-2 border ${a?`${n.activeClass} scale-[1.03]`:n.inactiveClass}`,children:[s.jsx("span",{"aria-hidden":!0,className:`w-2.5 h-2.5 rounded-full ${a?"bg-white/90":n.dotClass}`}),s.jsx(i,{className:"w-4 h-4"}),s.jsx("span",{className:"whitespace-nowrap",children:n.label})]},r)})})})]})}),s.jsxs("div",{children:[e==="cashbook"&&s.jsx(HV,{}),e==="loans"&&s.jsx($V,{}),e==="assets"&&s.jsx($je,{}),e==="capital"&&s.jsx(eCe,{})]})]})},VV=()=>{const{employees:e,payrollRecords:t,upsertEmployee:r,upsertPayrollRecord:n,currentBranchId:a}=Ba(),{mutateAsync:i}=SF(),{mutateAsync:l}=qV(),[o,c]=T.useState(new Date().toISOString().slice(0,7)),[d,f]=T.useState("employees"),[p,y]=T.useState(!1),[g,N]=T.useState(!1),w=T.useMemo(()=>t.filter(S=>S.month===o),[t,o]),k=T.useMemo(()=>{const S=e.filter(W=>W.status==="active").length,O=w.reduce((W,R)=>W+R.baseSalary,0),E=w.reduce((W,R)=>W+R.netSalary,0),D=w.filter(W=>W.paymentStatus==="paid").length,q=w.filter(W=>W.paymentStatus==="pending").length;return{totalEmployees:S,totalBaseSalary:O,totalNetSalary:E,paidCount:D,pendingCount:q}},[e,w]);return s.jsxs("div",{className:"h-full flex flex-col bg-slate-50 dark:bg-slate-900",children:[s.jsx("div",{className:"bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700",children:s.jsxs("div",{className:"px-6 py-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Qun l lng"}),s.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:"Qun l nhn vin v tnh lng"})]}),s.jsxs("button",{onClick:()=>d==="employees"?y(!0):N(!0),className:"flex items-center gap-2 px-4 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors",children:[s.jsx(Ac,{className:"w-5 h-5"}),s.jsx("span",{children:d==="employees"?"Thm nhn vin":"Tnh lng thng"})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{onClick:()=>f("employees"),className:`px-4 py-2 rounded-t-lg font-medium text-sm transition-colors ${d==="employees"?"bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 border-b-2 border-blue-600":"text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-slate-200"}`,children:["Danh sch nhn vin (",e.filter(S=>S.status==="active").length,")"]}),s.jsx("button",{onClick:()=>f("payroll"),className:`px-4 py-2 rounded-t-lg font-medium text-sm transition-colors ${d==="payroll"?"bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 border-b-2 border-blue-600":"text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-slate-200"}`,children:"Bng lng"})]})]})}),s.jsx("div",{className:"flex-1 overflow-auto p-6",children:d==="employees"?s.jsx(nCe,{employees:e,onEdit:S=>console.log("Edit",S)}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"mb-6",children:[s.jsx("div",{className:"flex items-center justify-between mb-4",children:s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Chn thng"}),s.jsx("input",{type:"month",value:o,onChange:S=>c(S.target.value),className:"px-4 py-2 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white"})]})}),s.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[s.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4 border border-blue-200 dark:border-blue-800",children:[s.jsx("div",{className:"text-blue-600 dark:text-blue-400 text-sm font-medium mb-2",children:"Tng lng c bn"}),s.jsx("div",{className:"text-blue-900 dark:text-blue-100 text-2xl font-bold",children:Oe(k.totalBaseSalary)})]}),s.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-4 border border-green-200 dark:border-green-800",children:[s.jsx("div",{className:"text-green-600 dark:text-green-400 text-sm font-medium mb-2",children:"Tng lng thc nhn"}),s.jsx("div",{className:"text-green-900 dark:text-green-100 text-2xl font-bold",children:Oe(k.totalNetSalary)})]}),s.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/20 rounded-lg p-4 border border-amber-200 dark:border-amber-800",children:[s.jsx("div",{className:"text-amber-600 dark:text-amber-400 text-sm font-medium mb-2",children:" tr lng"}),s.jsx("div",{className:"text-amber-900 dark:text-amber-100 text-2xl font-bold",children:k.paidCount}),s.jsx("div",{className:"text-amber-600 dark:text-amber-400 text-xs mt-1",children:"nhn vin"})]}),s.jsxs("div",{className:"bg-orange-50 dark:bg-orange-900/20 rounded-lg p-4 border border-orange-200 dark:border-orange-800",children:[s.jsx("div",{className:"text-orange-600 dark:text-orange-400 text-sm font-medium mb-2",children:"Cha tr"}),s.jsx("div",{className:"text-orange-900 dark:text-orange-100 text-2xl font-bold",children:k.pendingCount}),s.jsx("div",{className:"text-orange-600 dark:text-orange-400 text-xs mt-1",children:"nhn vin"})]})]})]}),s.jsx(aCe,{payroll:w,onMarkAsPaid:async(S,O)=>{const E=t.find(D=>D.id===S);E&&(n({...E,paymentStatus:"paid",paymentDate:new Date().toISOString(),paymentMethod:O}),await i({type:"expense",amount:E.netSalary,branchId:a,paymentSourceId:O,category:"salary",payrollRecordId:E.id,recipient:E.employeeName,notes:`Tr lng thng ${o} - ${E.employeeName}`,date:new Date().toISOString()}),await l({id:O,branchId:a,delta:-E.netSalary}))}})]})}),p&&s.jsx(sCe,{onClose:()=>y(!1),onSave:S=>{r(S),y(!1)}}),g&&s.jsx(iCe,{employees:e.filter(S=>S.status==="active"),month:o,onClose:()=>N(!1),onSave:S=>{S.forEach(O=>n(O)),N(!1)}})]})},nCe=({employees:e,onEdit:t})=>e.length===0?s.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-12 text-center",children:s.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Cha c nhn vin no"})}):s.jsx("div",{className:"grid gap-4",children:e.map(r=>s.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-4 hover:border-blue-300 dark:hover:border-blue-700 transition-colors",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:r.name}),s.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${r.status==="active"?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":"bg-slate-100 text-slate-800 dark:bg-slate-700 dark:text-slate-400"}`,children:r.status==="active"?"ang lm":"Ngh vic"})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsxs("span",{className:"text-slate-500 dark:text-slate-400",children:["Chc v:"," "]}),s.jsx("span",{className:"text-slate-900 dark:text-white font-medium",children:r.position})]}),s.jsxs("div",{children:[s.jsxs("span",{className:"text-slate-500 dark:text-slate-400",children:["Lng:"," "]}),s.jsx("span",{className:"text-slate-900 dark:text-white font-medium",children:Oe(r.baseSalary)})]}),s.jsxs("div",{children:[s.jsxs("span",{className:"text-slate-500 dark:text-slate-400",children:["ST:"," "]}),s.jsx("span",{className:"text-slate-900 dark:text-white font-medium",children:r.phone||"--"})]})]})]}),s.jsx("button",{onClick:()=>t(r),className:"px-4 py-2 text-blue-600 hover:bg-blue-50 dark:text-blue-400 dark:hover:bg-blue-900/30 rounded-lg text-sm font-medium transition-colors",children:"Sa"})]})},r.id))}),aCe=({payroll:e,onMarkAsPaid:t})=>{const[r,n]=T.useState(!1),[a,i]=T.useState(null);return e.length===0?s.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-12 text-center",children:s.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Cha c bng lng cho thng ny"})}):s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 overflow-hidden",children:[s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Nhn vin"}),s.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Lng CB"}),s.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Thng"}),s.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Pht"}),s.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"BHXH"}),s.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Thu"}),s.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Thc nhn"}),s.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Trng thi"}),s.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Thao tc"})]})}),s.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:e.map(l=>s.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[s.jsx("td",{className:"px-4 py-3 text-slate-900 dark:text-white font-medium",children:l.employeeName}),s.jsx("td",{className:"px-4 py-3 text-right text-slate-900 dark:text-white",children:Oe(l.baseSalary)}),s.jsxs("td",{className:"px-4 py-3 text-right text-green-600 dark:text-green-400",children:["+",Oe(l.bonus)]}),s.jsxs("td",{className:"px-4 py-3 text-right text-red-600 dark:text-red-400",children:["-",Oe(l.deduction)]}),s.jsx("td",{className:"px-4 py-3 text-right text-slate-600 dark:text-slate-400",children:Oe(l.socialInsurance)}),s.jsx("td",{className:"px-4 py-3 text-right text-slate-600 dark:text-slate-400",children:Oe(l.personalIncomeTax)}),s.jsx("td",{className:"px-4 py-3 text-right text-blue-600 dark:text-blue-400 font-bold",children:Oe(l.netSalary)}),s.jsx("td",{className:"px-4 py-3 text-center",children:s.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${l.paymentStatus==="paid"?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":"bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-400"}`,children:l.paymentStatus==="paid"?" tr":"Cha tr"})}),s.jsx("td",{className:"px-4 py-3 text-center",children:l.paymentStatus==="pending"&&t&&s.jsx("button",{onClick:()=>{i(l),n(!0)},className:"px-3 py-1.5 bg-green-600 hover:bg-green-700 text-white rounded-md text-xs font-medium transition-colors",children:" tr lng"})})]},l.id))})]}),r&&a&&s.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl max-w-md w-full border border-slate-200 dark:border-slate-700",children:[s.jsx("div",{className:"px-6 py-4 border-b border-slate-200 dark:border-slate-700",children:s.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:"Xc nhn tr lng"})}),s.jsxs("div",{className:"p-6 space-y-4",children:[s.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4 border border-blue-200 dark:border-blue-800",children:[s.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 mb-1",children:"Nhn vin"}),s.jsx("div",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:a.employeeName}),s.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400 mt-2",children:Oe(a.netSalary)})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Hnh thc thanh ton"}),s.jsxs("div",{className:"flex gap-4",children:[s.jsxs("button",{onClick:()=>{t&&t(a.id,"cash"),n(!1),i(null)},className:"flex-1 px-4 py-3 bg-green-600 hover:bg-green-700 text-white rounded-lg font-medium transition-colors flex items-center justify-center gap-2",children:[s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"w-5 h-5",children:[s.jsx("rect",{x:"2",y:"6",width:"20",height:"12",rx:"2",ry:"2"}),s.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),"Tin mt"]}),s.jsxs("button",{onClick:()=>{t&&t(a.id,"bank"),n(!1),i(null)},className:"flex-1 px-4 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors flex items-center justify-center gap-2",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"w-5 h-5",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 21h18M3 10h18M7 6h10l2 4H5l2-4Zm2 4v11m6-11v11"})}),"Chuyn khon"]})]})]})]}),s.jsx("div",{className:"px-6 py-4 border-t border-slate-200 dark:border-slate-700",children:s.jsx("button",{onClick:()=>{n(!1),i(null)},className:"w-full px-4 py-2 bg-slate-200 dark:bg-slate-700 hover:bg-slate-300 dark:hover:bg-slate-600 text-slate-900 dark:text-white rounded-lg font-medium transition-colors",children:"Hy"})})]})})]})},sCe=({onClose:e,onSave:t})=>{const[r,n]=T.useState(""),[a,i]=T.useState(""),[l,o]=T.useState(""),[c,d]=T.useState("0"),[f,p]=T.useState(new Date().toISOString().split("T")[0]),y=g=>{g.preventDefault();const N={name:r,phone:a,position:l,baseSalary:parseFloat(c),startDate:new Date(f).toISOString(),status:"active"};t(N)};return s.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl max-w-lg w-full border border-slate-200 dark:border-slate-700",children:[s.jsx("div",{className:"px-6 py-4 border-b border-slate-200 dark:border-slate-700",children:s.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-white",children:"Thm nhn vin mi"})}),s.jsxs("form",{onSubmit:y,className:"p-6 space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"H v tn *"}),s.jsx("input",{type:"text",value:r,onChange:g=>n(g.target.value),className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"S in thoi"}),s.jsx("input",{type:"tel",value:a,onChange:g=>i(g.target.value),className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Chc v *"}),s.jsx("input",{type:"text",value:l,onChange:g=>o(g.target.value),placeholder:"V d: K thut vin, Nhn vin bn hng...",className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Lng c bn *"}),s.jsx("input",{type:"number",value:c,onChange:g=>d(g.target.value),className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Ngy vo lm *"}),s.jsx("input",{type:"date",value:f,onChange:g=>p(g.target.value),className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white",required:!0})]}),s.jsxs("div",{className:"flex gap-3 pt-4",children:[s.jsx("button",{type:"button",onClick:e,className:"flex-1 px-4 py-2.5 bg-slate-200 dark:bg-slate-700 hover:bg-slate-300 dark:hover:bg-slate-600 text-slate-900 dark:text-white rounded-lg font-medium transition-colors",children:"Hy"}),s.jsx("button",{type:"submit",className:"flex-1 px-4 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors",children:"Thm nhn vin"})]})]})]})})},iCe=({employees:e,month:t,onClose:r,onSave:n})=>{const[a,i]=T.useState(e.map(N=>({employeeId:N.id,employeeName:N.name,baseSalary:N.baseSalary,bonus:0,deduction:0}))),l=(N,w)=>{i(k=>k.map(S=>S.employeeId===N?{...S,bonus:parseFloat(w)||0}:S))},o=(N,w)=>{i(k=>k.map(S=>S.employeeId===N?{...S,deduction:parseFloat(w)||0}:S))},c=(N,w,k)=>N+w-k,d=N=>{N.preventDefault();const w=a.map(k=>({id:`PAY-${t}-${k.employeeId}`,employeeId:k.employeeId,employeeName:k.employeeName,month:t,baseSalary:k.baseSalary,allowances:0,bonus:k.bonus,deduction:k.deduction,workDays:26,standardWorkDays:26,socialInsurance:0,healthInsurance:0,unemploymentInsurance:0,personalIncomeTax:0,netSalary:c(k.baseSalary,k.bonus,k.deduction),paymentStatus:"pending",paymentDate:void 0,notes:"",branchId:"main",created_at:new Date().toISOString()}));n(w)},f=a.reduce((N,w)=>N+w.baseSalary,0),p=a.reduce((N,w)=>N+w.bonus,0),y=a.reduce((N,w)=>N+w.deduction,0),g=a.reduce((N,w)=>N+c(w.baseSalary,w.bonus,w.deduction),0);return s.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl max-w-5xl w-full border border-slate-200 dark:border-slate-700 max-h-[90vh] flex flex-col",children:[s.jsxs("div",{className:"px-6 py-4 border-b border-slate-200 dark:border-slate-700",children:[s.jsxs("h2",{className:"text-xl font-semibold text-slate-900 dark:text-white",children:["Tnh lng thng ",t]}),s.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:[e.length," nhn vin"]})]}),s.jsxs("form",{onSubmit:d,className:"flex-1 flex flex-col",children:[s.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:s.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 overflow-hidden",children:s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Nhn vin"}),s.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Lng CB"}),s.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Thng"}),s.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Pht"}),s.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Thc nhn"})]})}),s.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:a.map(N=>s.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[s.jsx("td",{className:"px-4 py-3 text-slate-900 dark:text-white font-medium",children:N.employeeName}),s.jsx("td",{className:"px-4 py-3 text-right text-slate-900 dark:text-white",children:Oe(N.baseSalary)}),s.jsx("td",{className:"px-4 py-3",children:s.jsx("input",{type:"number",value:N.bonus,onChange:w=>l(N.employeeId,w.target.value),className:"w-full px-2 py-1.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded text-right text-slate-900 dark:text-white",min:"0"})}),s.jsx("td",{className:"px-4 py-3",children:s.jsx("input",{type:"number",value:N.deduction,onChange:w=>o(N.employeeId,w.target.value),className:"w-full px-2 py-1.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded text-right text-slate-900 dark:text-white",min:"0"})}),s.jsx("td",{className:"px-4 py-3 text-right text-blue-600 dark:text-blue-400 font-bold",children:Oe(c(N.baseSalary,N.bonus,N.deduction))})]},N.employeeId))}),s.jsx("tfoot",{className:"bg-slate-50 dark:bg-slate-700 border-t-2 border-slate-300 dark:border-slate-600",children:s.jsxs("tr",{children:[s.jsx("td",{className:"px-4 py-3 text-slate-900 dark:text-white font-bold",children:"TNG CNG"}),s.jsx("td",{className:"px-4 py-3 text-right text-slate-900 dark:text-white font-bold",children:Oe(f)}),s.jsx("td",{className:"px-4 py-3 text-right text-green-600 dark:text-green-400 font-bold",children:Oe(p)}),s.jsx("td",{className:"px-4 py-3 text-right text-red-600 dark:text-red-400 font-bold",children:Oe(y)}),s.jsx("td",{className:"px-4 py-3 text-right text-blue-600 dark:text-blue-400 font-bold text-lg",children:Oe(g)})]})})]})})}),s.jsxs("div",{className:"px-6 py-4 border-t border-slate-200 dark:border-slate-700 flex gap-3",children:[s.jsx("button",{type:"button",onClick:r,className:"flex-1 px-4 py-2.5 bg-slate-200 dark:bg-slate-700 hover:bg-slate-300 dark:hover:bg-slate-600 text-slate-900 dark:text-white rounded-lg font-medium transition-colors",children:"Hy"}),s.jsx("button",{type:"submit",className:"flex-1 px-4 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors",children:"To bng lng"})]})]})]})})},lCe=(e,t,r)=>{const n=wn.book_new(),a=e.reduce((g,N)=>g+N.total,0),i=e.reduce((g,N)=>g+N.items.reduce((w,k)=>w+(k.costPrice||0)*k.quantity,0),0),l=a-i,o=a>0?l/a*100:0,c=[["BO CO DOANH THU"],[`T ${Bn(t)} n ${Bn(r)}`],[],["Ch tiu","Gi tr"],["Tng doanh thu",Oe(a)],["Tng chi ph",Oe(i)],["Li nhun",Oe(l)],["Bin li nhun",`${o.toFixed(2)}%`]],d=wn.aoa_to_sheet(c);wn.book_append_sheet(n,d,"Tng quan");const f=[["M n","Ngy","Khch hng","ST","Sn phm","S lng","n gi","Thnh tin","Gim gi","Tng","Phng thc"]];e.forEach(g=>{g.items.forEach((N,w)=>{f.push([w===0?B1(g.id):"",w===0?Bn(g.date):"",w===0?g.customer.name:"",w===0&&g.customer.phone||"",N.partName,N.quantity,N.sellingPrice,N.sellingPrice*N.quantity,w===0?g.discount:"",w===0?g.total:"",w===0?g.paymentMethod==="cash"?"Tin mt":"Ngn hng":""])})});const p=wn.aoa_to_sheet(f);wn.book_append_sheet(n,p,"Chi tit bn hng");const y=`BaoCaoDoanhThu_${t}_${r}.xlsx`;Xu(n,y)},oCe=(e,t,r)=>{const n=wn.book_new(),a=e.filter(w=>w.type==="income").reduce((w,k)=>w+k.amount,0),i=e.filter(w=>w.type==="expense").reduce((w,k)=>w+k.amount,0),l=a-i,o=[["BO CO THU CHI"],[`T ${Bn(t)} n ${Bn(r)}`],[],["Ch tiu","Gi tr"],["Tng thu",Oe(a)],["Tng chi",Oe(i)],["Thu chi rng",Oe(l)]],c=wn.aoa_to_sheet(o);wn.book_append_sheet(n,c,"Tng quan");const d=[["Ngy","Loi","Danh mc","S tin","i tng","Ngun thanh ton","Ghi ch"]];e.forEach(w=>{d.push([Bn(w.date),w.type==="income"?"Thu":"Chi",w.category||"",w.amount,w.recipient||"",w.paymentSourceId,w.notes])});const f=wn.aoa_to_sheet(d);wn.book_append_sheet(n,f,"Chi tit giao dch");const p={};e.forEach(w=>{const k=w.category||"Khc";p[k]||(p[k]={income:0,expense:0}),w.type==="income"?p[k].income+=w.amount:p[k].expense+=w.amount});const y=[["Danh mc","Thu","Chi","Chnh lch"]];Object.entries(p).forEach(([w,k])=>{y.push([w,k.income,k.expense,k.income-k.expense])});const g=wn.aoa_to_sheet(y);wn.book_append_sheet(n,g,"Theo danh mc");const N=`BaoCaoThuChi_${t}_${r}.xlsx`;Xu(n,N)},cCe=(e,t,r,n)=>{const a=wn.book_new(),i=e.reduce((g,N)=>{var w;return g+(N.stock[t]||0)*(((w=N.wholesalePrice)==null?void 0:w[t])||0)},0),l=e.filter(g=>(g.stock[t]||0)<10).length,o=[["BO CO TN KHO"],[`Ngy: ${Bn(n)}`],[],["Ch tiu","Gi tr"],["Tng gi tr tn kho",Oe(i)],["S loi sn phm",e.length],["Sn phm tn kho thp",l]],c=wn.aoa_to_sheet(o);wn.book_append_sheet(a,c,"Tng quan");const d=[["M SKU","Tn sn phm","Danh mc","Tn kho","Gi nhp","Gi bn","Gi tr tn","Trng thi"]];e.forEach(g=>{var E;const N=g.stock[t]||0,w=((E=g.wholesalePrice)==null?void 0:E[t])||0,k=g.retailPrice[t]||0,S=N*w,O=N<10?"Thp":N<50?"Trung bnh":"";d.push([g.sku,g.name,g.category||"",N,w,k,S,O])});const f=wn.aoa_to_sheet(d);wn.book_append_sheet(a,f,"Chi tit tn kho");const p=e.filter(g=>(g.stock[t]||0)<10);if(p.length>0){const g=[["M SKU","Tn sn phm","Tn kho","Ghi ch"]];p.forEach(w=>{g.push([w.sku,w.name,w.stock[t]||0,"Cn nhp thm hng"])});const N=wn.aoa_to_sheet(g);wn.book_append_sheet(a,N,"Cnh bo tn kho")}const y=`BaoCaoTonKho_${n}.xlsx`;Xu(a,y)},dCe=(e,t,r)=>{const n=wn.book_new(),a=e.reduce((k,S)=>k+S.baseSalary,0),i=e.reduce((k,S)=>k+S.netSalary,0),l=e.filter(k=>k.paymentStatus==="paid").length,o=e.filter(k=>k.paymentStatus==="pending").length,c=[["BO CO LNG"],[`T ${t} n ${r}`],[],["Ch tiu","Gi tr"],["Tng lng c bn",Oe(a)],["Tng lng thc nhn",Oe(i)],["S bng lng  tr",l],["S bng lng cha tr",o]],d=wn.aoa_to_sheet(c);wn.book_append_sheet(n,d,"Tng quan");const f=[["Nhn vin","Thng","Lng c bn","Ph cp","Thng","Khu tr","BHXH","BHYT","BHTN","Thu TNCN","Thc nhn","Trng thi","Ngy tr"]];e.forEach(k=>{f.push([k.employeeName,k.month,k.baseSalary,k.allowances,k.bonus,k.deduction,k.socialInsurance,k.healthInsurance,k.unemploymentInsurance,k.personalIncomeTax,k.netSalary,k.paymentStatus==="paid"?" tr":"Cha tr",k.paymentDate?Bn(k.paymentDate):""])});const p=wn.aoa_to_sheet(f);wn.book_append_sheet(n,p,"Chi tit lng");const y={};e.forEach(k=>{y[k.employeeName]||(y[k.employeeName]={totalBase:0,totalNet:0,months:0}),y[k.employeeName].totalBase+=k.baseSalary,y[k.employeeName].totalNet+=k.netSalary,y[k.employeeName].months+=1});const g=[["Nhn vin","S thng","Tng lng c bn","Tng thc nhn","TB/thng"]];Object.entries(y).forEach(([k,S])=>{g.push([k,S.months,S.totalBase,S.totalNet,Math.round(S.totalNet/S.months)])});const N=wn.aoa_to_sheet(g);wn.book_append_sheet(n,N,"Theo nhn vin");const w=`BaoCaoLuong_${t}_${r}.xlsx`;Xu(n,w)},uCe=(e,t,r,n,a)=>{const i=wn.book_new(),l=[["BO CO CNG N"],[`T ${Bn(n)} n ${Bn(a)}`],[],["Loi","S lng"],["Khch hng",e.length],["Nh cung cp",t.length]],o=wn.aoa_to_sheet(l);wn.book_append_sheet(i,o,"Tng quan");const c=[["Tn khch hng","ST","Xe","Bin s","Phn khc"]];e.forEach(g=>{c.push([g.name,g.phone||"",g.vehicleModel||"",g.licensePlate||"",g.segment||""])});const d=wn.aoa_to_sheet(c);wn.book_append_sheet(i,d,"Khch hng");const f=[["Tn nh cung cp","ST","Email","a ch"]];t.forEach(g=>{f.push([g.name,g.phone||"",g.email||"",g.address||""])});const p=wn.aoa_to_sheet(f);wn.book_append_sheet(i,p,"Nh cung cp");const y=`BaoCaoCongNo_${n}_${a}.xlsx`;Xu(i,y)},hCe=(e,t,r,n=20)=>{const a=wn.book_new(),i=new Map;e.forEach(g=>{g.items.forEach(N=>{const w=i.get(N.partId);w?(w.quantity+=N.quantity,w.revenue+=N.sellingPrice*N.quantity,w.orders+=1):i.set(N.partId,{name:N.partName,sku:N.sku||"",quantity:N.quantity,revenue:N.sellingPrice*N.quantity,orders:1})})});const l=Array.from(i.values()).sort((g,N)=>N.quantity-g.quantity).slice(0,n),o=[["TOP SN PHM BN CHY"],[`T ${Bn(t)} n ${Bn(r)}`],[],["STT","Tn sn phm","SKU","S lng bn","Doanh thu","S n","Trung bnh/n"]];l.forEach((g,N)=>{o.push([String(N+1),g.name,g.sku,String(g.quantity),Oe(g.revenue),String(g.orders),Oe(g.revenue/g.orders)])});const c=l.reduce((g,N)=>g+N.quantity,0),d=l.reduce((g,N)=>g+N.revenue,0),f=l.reduce((g,N)=>g+N.orders,0);o.push([]),o.push(["TNG","","",String(c),Oe(d),String(f),Oe(d/f)]);const p=wn.aoa_to_sheet(o);wn.book_append_sheet(a,p,"Top sn phm");const y=`TopSanPhamBanChay_${t}_${r}.xlsx`;Xu(a,y)},fCe=(e,t,r)=>{const n=wn.book_new(),a=new Map;e.forEach(N=>{N.items.forEach(w=>{const k=(w.costPrice||0)*w.quantity,S=w.sellingPrice*w.quantity,O=S-k,E=a.get(w.partId);E?(E.quantity+=w.quantity,E.revenue+=S,E.cost+=k,E.profit+=O,E.margin=E.revenue>0?E.profit/E.revenue*100:0):a.set(w.partId,{name:w.partName,sku:w.sku||"",quantity:w.quantity,revenue:S,cost:k,profit:O,margin:S>0?O/S*100:0})})});const i=Array.from(a.values()).sort((N,w)=>w.profit-N.profit),l=[["BO CO LI NHUN THEO SN PHM"],[`T ${Bn(t)} n ${Bn(r)}`],[],["STT","Tn sn phm","SKU","SL","Doanh thu","Gi vn","Li nhun","Bin LN (%)"]];i.forEach((N,w)=>{l.push([String(w+1),N.name,N.sku,String(N.quantity),Oe(N.revenue),Oe(N.cost),Oe(N.profit),N.margin.toFixed(2)+"%"])});const o=i.reduce((N,w)=>N+w.quantity,0),c=i.reduce((N,w)=>N+w.revenue,0),d=i.reduce((N,w)=>N+w.cost,0),f=i.reduce((N,w)=>N+w.profit,0),p=c>0?f/c*100:0;l.push([]),l.push(["TNG","","",String(o),Oe(c),Oe(d),Oe(f),p.toFixed(2)+"%"]);const y=wn.aoa_to_sheet(l);wn.book_append_sheet(n,y,"Li nhun sn phm");const g=`LoiNhuanTheoSanPham_${t}_${r}.xlsx`;Xu(n,g)},mCe=(e,t,r,n)=>{const a=wn.book_new(),i=e.length,l=e.reduce((w,k)=>{var S;return w+(((S=k.stock)==null?void 0:S[t])||0)},0),o=e.reduce((w,k)=>{var E,D;const S=((E=k.stock)==null?void 0:E[t])||0,O=typeof k.costPrice=="number"?k.costPrice:((D=k.retailPrice)==null?void 0:D[t])||0;return w+S*O},0),c=e.filter(w=>{var S;const k=((S=w.stock)==null?void 0:S[t])||0;return k>0&&k<=5}),d=e.filter(w=>{var k;return(((k=w.stock)==null?void 0:k[t])||0)===0}),f=[["BO CO TN KHO CHI TIT"],[`Ngy: ${Bn(new Date().toISOString())}`],[`Chi nhnh: ${t}`],[],["Ch tiu","Gi tr"],["Tng s mt hng",i],["Tng s lng tn",l],["Gi tr tn kho",Oe(o)],["Sn phm tn thp (5)",c.length],["Sn phm ht hng",d.length]],p=wn.aoa_to_sheet(f);wn.book_append_sheet(a,p,"Tng quan");const y=[["SKU","Tn sn phm","Danh mc","Tn kho","Gi vn","Gi bn","Gi tr tn","Trng thi"]];e.forEach(w=>{var q,W;const k=((q=w.stock)==null?void 0:q[t])||0,S=typeof w.costPrice=="number"?w.costPrice:0,O=((W=w.retailPrice)==null?void 0:W[t])||0,E=k*S;let D="Bnh thng";k===0?D="Ht hng":k<=5&&(D="Tn thp"),y.push([w.sku||"",w.name,w.category||"",String(k),Oe(S),Oe(O),Oe(E),D])});const g=wn.aoa_to_sheet(y);if(wn.book_append_sheet(a,g,"Tt c sn phm"),c.length>0){const w=[["SKU","Tn sn phm","Tn kho","Cn nhp"]];c.forEach(S=>{var D;const O=((D=S.stock)==null?void 0:D[t])||0,E=Math.max(10-O,0);w.push([S.sku||"",S.name,String(O),String(E)])});const k=wn.aoa_to_sheet(w);wn.book_append_sheet(a,k,"Tn thp")}if(d.length>0){const w=[["SKU","Tn sn phm","Gi bn"," xut"]];d.forEach(S=>{var E;const O=((E=S.retailPrice)==null?void 0:E[t])||0;w.push([S.sku||"",S.name,Oe(O),"Cn nhp ngay"])});const k=wn.aoa_to_sheet(w);wn.book_append_sheet(a,k,"Ht hng")}const N=`TonKhoChiTiet_${t}_${Bn(new Date().toISOString())}.xlsx`;Xu(a,N)},xCe=[{key:"revenue",label:"Doanh thu",icon:s.jsx(C0,{className:"w-4 h-4"}),activeClass:"bg-gradient-to-r from-blue-600 to-sky-500 text-white border-transparent shadow-lg shadow-blue-500/30",inactiveClass:"bg-white dark:bg-slate-900/60 text-blue-700 dark:text-blue-200 border-blue-200 dark:border-blue-700 hover:bg-blue-50/80 dark:hover:bg-blue-900/20",dotClass:"bg-blue-400"},{key:"cashflow",label:"Thu chi",icon:s.jsx(mm,{className:"w-4 h-4"}),activeClass:"bg-gradient-to-r from-emerald-500 to-lime-500 text-white border-transparent shadow-lg shadow-emerald-500/30",inactiveClass:"bg-white dark:bg-slate-900/60 text-emerald-700 dark:text-emerald-200 border-emerald-200 dark:border-emerald-800 hover:bg-emerald-50/70 dark:hover:bg-emerald-900/20",dotClass:"bg-emerald-400"},{key:"inventory",label:"Tn kho",icon:s.jsx(Gi,{className:"w-4 h-4"}),activeClass:"bg-gradient-to-r from-amber-500 to-orange-500 text-white border-transparent shadow-lg shadow-orange-500/30",inactiveClass:"bg-white dark:bg-slate-900/60 text-amber-700 dark:text-amber-200 border-amber-200 dark:border-amber-800 hover:bg-amber-50/70 dark:hover:bg-amber-900/20",dotClass:"bg-amber-400"},{key:"payroll",label:"Lng",icon:s.jsx(Am,{className:"w-4 h-4"}),activeClass:"bg-gradient-to-r from-violet-500 to-fuchsia-500 text-white border-transparent shadow-lg shadow-violet-500/30",inactiveClass:"bg-white dark:bg-slate-900/60 text-violet-700 dark:text-violet-200 border-violet-200 dark:border-violet-800 hover:bg-violet-50/70 dark:hover:bg-violet-900/20",dotClass:"bg-violet-400"},{key:"debt",label:"Cng n",icon:s.jsx(C6,{className:"w-4 h-4"}),activeClass:"bg-gradient-to-r from-rose-500 to-red-500 text-white border-transparent shadow-lg shadow-rose-500/30",inactiveClass:"bg-white dark:bg-slate-900/60 text-rose-700 dark:text-rose-200 border-rose-200 dark:border-rose-800 hover:bg-rose-50/70 dark:hover:bg-rose-900/20",dotClass:"bg-rose-400"}],pCe=()=>{const{payrollRecords:e,customers:t,suppliers:r,currentBranchId:n,employees:a}=Ba(),{data:i=[],isLoading:l}=Mb(),{data:o=[],isLoading:c}=mf(),[d,f]=T.useState("revenue"),[p,y]=T.useState("month"),[g,N]=T.useState(""),[w,k]=T.useState(""),{start:S,end:O}=T.useMemo(()=>{const H=new Date;let K=new Date,J=new Date;if(p==="custom"&&g&&w)return{start:new Date(g),end:new Date(w)};switch(p){case"today":K=new Date(H.setHours(0,0,0,0)),J=new Date(H.setHours(23,59,59,999));break;case"week":K=new Date(H.setDate(H.getDate()-7));break;case"month":K=new Date(H.setMonth(H.getMonth()-1));break;case"quarter":K=new Date(H.setMonth(H.getMonth()-3));break;case"year":K=new Date(H.setFullYear(H.getFullYear()-1));break}return{start:K,end:J}},[p,g,w]),E=T.useMemo(()=>{const H=i.filter(fe=>{const ke=new Date(fe.date);return ke>=S&&ke<=O}),K=H.reduce((fe,ke)=>fe+ke.total,0),J=H.reduce((fe,ke)=>{const _e=ke.items.reduce((Le,xe)=>Le+(xe.costPrice||0)*xe.quantity,0);return fe+_e},0),ae=K-J,se=new Map;H.forEach(fe=>{const ke=new Date(fe.date).toISOString().split("T")[0];se.has(ke)||se.set(ke,{date:ke,sales:[],totalRevenue:0,totalCost:0,totalProfit:0,orderCount:0});const _e=se.get(ke),Le=fe.items.reduce((xe,B)=>xe+(B.costPrice||0)*B.quantity,0);_e.sales.push(fe),_e.totalRevenue+=fe.total,_e.totalCost+=Le,_e.totalProfit+=fe.total-Le,_e.orderCount+=1});const ue=Array.from(se.values()).sort((fe,ke)=>new Date(fe.date).getTime()-new Date(ke.date).getTime());return{sales:H,dailyReport:ue,totalRevenue:K,totalCost:J,totalProfit:ae,profitMargin:K>0?(ae/K*100).toFixed(1):0,orderCount:H.length}},[i,S,O]),{data:D=[],isLoading:q}=_F({branchId:n,startDate:S.toISOString(),endDate:O.toISOString()}),W=T.useMemo(()=>{const H=D.filter(se=>{const ue=new Date(se.date);return ue>=S&&ue<=O}),K=H.filter(se=>se.type==="income").reduce((se,ue)=>se+ue.amount,0),J=H.filter(se=>se.type==="expense").reduce((se,ue)=>se+ue.amount,0),ae={};return H.forEach(se=>{const ue=se.category||"other";ae[ue]||(ae[ue]={income:0,expense:0}),se.type==="income"?ae[ue].income+=se.amount:ae[ue].expense+=se.amount}),{transactions:H,totalIncome:K,totalExpense:J,netCashFlow:K-J,byCategory:ae}},[D,S,O]),R=T.useMemo(()=>{const H=o.map(ae=>({...ae,stock:ae.stock[n]||0,price:ae.retailPrice[n]||0,value:(ae.stock[n]||0)*(ae.retailPrice[n]||0)})),K=H.reduce((ae,se)=>ae+se.value,0),J=H.filter(ae=>ae.stock<10);return{parts:H,totalValue:K,lowStockCount:J.length,lowStockItems:J}},[o,n]),U=T.useMemo(()=>{const H=e.filter(se=>{const ue=new Date(se.month);return ue>=S&&ue<=O}),K=H.reduce((se,ue)=>se+ue.netSalary,0),J=H.filter(se=>se.paymentStatus==="paid").reduce((se,ue)=>se+ue.netSalary,0),ae=K-J;return{records:H,totalSalary:K,paidSalary:J,unpaidSalary:ae,employeeCount:new Set(H.map(se=>se.employeeId)).size}},[e,S,O]),z=T.useMemo(()=>{const H=t.map(se=>{const fe=i.filter(ke=>(ke.customer.name===se.name||ke.customer.phone===se.phone)&&ke.paymentStatus!=="paid").reduce((ke,_e)=>ke+_e.total,0);return{name:se.name,debt:fe}}),K=r.map(se=>({name:se.name,debt:0})),J=H.reduce((se,ue)=>se+ue.debt,0),ae=K.reduce((se,ue)=>se+ue.debt,0);return{customerDebts:H.filter(se=>se.debt>0),supplierDebts:K.filter(se=>se.debt>0),totalCustomerDebt:J,totalSupplierDebt:ae,netDebt:J-ae}},[t,r]),Z=()=>{const H=S.toISOString().split("T")[0],K=O.toISOString().split("T")[0];try{switch(d){case"revenue":lCe(E.sales,H,K);break;case"cashflow":oCe(W.transactions,H,K);break;case"inventory":cCe(o,n,H,K);break;case"payroll":const J=S.toISOString().slice(0,7),ae=O.toISOString().slice(0,7);dCe(U.records,J,ae);break;case"debt":uCe(t,r,E.sales,H,K);break}Xe.success("Xut Excel thnh cng! File  c ti xung.")}catch(J){console.error("Export error:",J),Xe.error("C li khi xut Excel. Vui lng th li.")}};return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"md:hidden space-y-3 mb-4",children:[s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-3 rounded-lg border border-slate-200 dark:border-slate-700 shadow-sm",children:[s.jsx("label",{className:"text-xs font-medium text-slate-500 dark:text-slate-400 mb-2 block uppercase tracking-wider",children:"Loi bo co"}),s.jsxs("div",{className:"relative",children:[s.jsxs("select",{value:d,onChange:H=>f(H.target.value),className:"w-full appearance-none p-3 pl-10 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white font-medium focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all",children:[s.jsx("option",{value:"revenue",children:"Doanh thu"}),s.jsx("option",{value:"cashflow",children:"Thu chi"}),s.jsx("option",{value:"inventory",children:"Tn kho"}),s.jsx("option",{value:"payroll",children:"Lng nhn vin"}),s.jsx("option",{value:"debt",children:"Cng n"})]}),s.jsxs("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-500 dark:text-slate-400 pointer-events-none",children:[d==="revenue"&&s.jsx(C0,{className:"w-5 h-5"}),d==="cashflow"&&s.jsx(mm,{className:"w-5 h-5"}),d==="inventory"&&s.jsx(Gi,{className:"w-5 h-5"}),d==="payroll"&&s.jsx(Am,{className:"w-5 h-5"}),d==="debt"&&s.jsx(C6,{className:"w-5 h-5"})]}),s.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-500 dark:text-slate-400 pointer-events-none",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:s.jsx("path",{d:"m6 9 6 6 6-6"})})})]})]}),s.jsxs("div",{className:"bg-white dark:bg-slate-800 p-3 rounded-lg border border-slate-200 dark:border-slate-700 shadow-sm",children:[s.jsx("label",{className:"text-xs font-medium text-slate-500 dark:text-slate-400 mb-2 block uppercase tracking-wider",children:"Thi gian"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsxs("select",{value:p,onChange:H=>y(H.target.value),className:"w-full appearance-none p-3 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white font-medium focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all",children:[s.jsx("option",{value:"today",children:"Hm nay"}),s.jsx("option",{value:"week",children:"7 ngy qua"}),s.jsx("option",{value:"month",children:"Thng ny"}),s.jsx("option",{value:"quarter",children:"Qu ny"}),s.jsx("option",{value:"year",children:"Nm nay"}),s.jsx("option",{value:"custom",children:"Ty chnh"})]}),s.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-500 dark:text-slate-400 pointer-events-none",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:s.jsx("path",{d:"m6 9 6 6 6-6"})})})]}),s.jsx("button",{onClick:Z,className:"px-4 bg-emerald-600 text-white rounded-lg shadow-sm hover:bg-emerald-700 active:scale-95 transition-all flex items-center justify-center","aria-label":"Xut Excel",children:s.jsx(e7,{className:"w-5 h-5"})})]}),p==="custom"&&s.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3 animate-in fade-in slide-in-from-top-2 duration-200",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] text-slate-500 dark:text-slate-400 mb-1 block",children:"T ngy"}),s.jsx("input",{type:"date",value:g,onChange:H=>N(H.target.value),className:"w-full p-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg text-sm text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] text-slate-500 dark:text-slate-400 mb-1 block",children:"n ngy"}),s.jsx("input",{type:"date",value:w,onChange:H=>k(H.target.value),className:"w-full p-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg text-sm text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none"})]})]})]})]}),s.jsxs("div",{className:"hidden md:flex items-center gap-3 flex-wrap",children:[xCe.map(H=>{const K=d===H.key;return s.jsx("button",{type:"button","aria-pressed":K,onClick:()=>f(H.key),className:`px-6 py-2 rounded-xl font-medium whitespace-nowrap transition-all border ${K?H.activeClass:H.inactiveClass}`,children:s.jsxs("span",{className:"inline-flex items-center gap-2",children:[s.jsx("span",{"aria-hidden":!0,className:`w-2.5 h-2.5 rounded-full ${K?"bg-white/90":H.dotClass}`}),H.icon,H.label]})},H.key)}),s.jsx("div",{className:"h-8 w-px bg-slate-300 dark:bg-slate-600 mx-2"}),["today","week","month","quarter","year","custom"].map(H=>s.jsx("button",{onClick:()=>y(H),className:`px-4 py-2 rounded-lg font-medium text-sm transition-all ${p===H?"bg-blue-600 text-white shadow-md":"bg-slate-100 dark:bg-slate-700/50 text-slate-700 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:H==="today"?"Hm nay":H==="week"?"7 ngy":H==="month"?"Thng":H==="quarter"?"Qu":H==="year"?"Nm":"Ty chnh"},H)),p==="custom"&&s.jsxs(s.Fragment,{children:[s.jsx("input",{type:"date",value:g,onChange:H=>N(H.target.value),className:"px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white text-sm"}),s.jsx("span",{className:"text-slate-500 dark:text-slate-400",children:""}),s.jsx("input",{type:"date",value:w,onChange:H=>k(H.target.value),className:"px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white text-sm"})]}),s.jsxs("div",{className:"ml-auto flex gap-2",children:[s.jsxs("button",{onClick:Z,className:"px-5 py-2 bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-lg font-medium shadow-md hover:shadow-lg hover:from-green-700 hover:to-emerald-700 transition-all duration-200 flex items-center gap-2",children:[s.jsx(e7,{className:"w-4 h-4"})," Xut Excel"]}),d==="revenue"&&s.jsxs("div",{className:"relative group",children:[s.jsxs("button",{className:"px-4 py-2 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg font-medium shadow-md hover:shadow-lg hover:from-blue-700 hover:to-indigo-700 transition-all duration-200 flex items-center gap-2",children:[s.jsx(F1,{className:"w-4 h-4"})," Bo co nng cao"]}),s.jsxs("div",{className:"absolute right-0 top-full mt-2 w-64 bg-white dark:bg-slate-800 rounded-lg shadow-xl border border-slate-200 dark:border-slate-700 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50",children:[s.jsxs("button",{onClick:()=>{const H=S.toISOString().split("T")[0],K=O.toISOString().split("T")[0];hCe(E.sales,H,K,20),Xe.success("Xut Top sn phm thnh cng!")},className:"w-full px-4 py-3 text-left hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors flex items-center gap-3 text-sm text-slate-700 dark:text-slate-300 rounded-t-lg",children:[s.jsx(d7,{className:"w-4 h-4 text-blue-600"}),s.jsx("span",{children:"Top sn phm bn chy"})]}),s.jsxs("button",{onClick:()=>{const H=S.toISOString().split("T")[0],K=O.toISOString().split("T")[0];fCe(E.sales,H,K),Xe.success("Xut li nhun sn phm thnh cng!")},className:"w-full px-4 py-3 text-left hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors flex items-center gap-3 text-sm text-slate-700 dark:text-slate-300 rounded-b-lg",children:[s.jsx(XT,{className:"w-4 h-4 text-green-600"}),s.jsx("span",{children:"Li nhun theo sn phm"})]})]})]}),d==="inventory"&&s.jsxs("button",{onClick:()=>{S.toISOString().split("T")[0],O.toISOString().split("T")[0],mCe(o,n),Xe.success("Xut bo co tn kho chi tit thnh cng!")},className:"px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg font-medium shadow-md hover:shadow-lg hover:from-purple-700 hover:to-pink-700 transition-all duration-200 flex items-center gap-2",children:[s.jsx(Gi,{className:"w-4 h-4"})," Tn kho chi tit"]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-6",children:[d==="revenue"&&s.jsxs("div",{className:"space-y-6",children:[l&&s.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:"ang ti doanh thu..."}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-lg p-6 border border-blue-200 dark:border-blue-800",children:[s.jsxs("div",{className:"flex items-center gap-1 text-sm font-medium text-blue-700 dark:text-blue-400 mb-2",children:[s.jsx(C0,{className:"w-4 h-4"})," Tng doanh thu"]}),s.jsx("div",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400",children:Oe(E.totalRevenue).replace("","")}),s.jsx("div",{className:"text-xs text-blue-600 dark:text-blue-400 mt-1",children:""})]}),s.jsxs("div",{className:"bg-gradient-to-br from-red-50 to-rose-50 dark:from-red-900/20 dark:to-rose-900/20 rounded-lg p-6 border border-red-200 dark:border-red-800",children:[s.jsxs("div",{className:"flex items-center gap-1 text-sm font-medium text-red-700 dark:text-red-400 mb-2",children:[s.jsx(mm,{className:"w-4 h-4"})," Tng chi ph"]}),s.jsx("div",{className:"text-3xl font-bold text-red-600 dark:text-red-400",children:Oe(E.totalCost).replace("","")}),s.jsx("div",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:""})]}),s.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 rounded-lg p-6 border border-green-200 dark:border-green-800",children:[s.jsxs("div",{className:"flex items-center gap-1 text-sm font-medium text-green-700 dark:text-green-400 mb-2",children:[s.jsx(F1,{className:"w-4 h-4"})," Li nhun"]}),s.jsx("div",{className:"text-3xl font-bold text-green-600 dark:text-green-400",children:Oe(E.totalProfit).replace("","")}),s.jsx("div",{className:"text-xs text-green-600 dark:text-green-400 mt-1",children:""})]}),s.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-fuchsia-50 dark:from-purple-900/20 dark:to-fuchsia-900/20 rounded-lg p-6 border border-purple-200 dark:border-purple-800",children:[s.jsxs("div",{className:"flex items-center gap-1 text-sm font-medium text-purple-700 dark:text-purple-400 mb-2",children:[s.jsx(XT,{className:"w-4 h-4"})," T sut li nhun"]}),s.jsx("div",{className:"text-3xl font-bold text-purple-600 dark:text-purple-400",children:E.profitMargin}),s.jsx("div",{className:"text-xs text-purple-600 dark:text-purple-400 mt-1",children:"%"})]})]}),s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700",children:[s.jsx("div",{className:"px-6 py-4 border-b border-slate-200 dark:border-slate-700",children:s.jsxs("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:["Chi tit n hng theo ngy (",E.dailyReport.length," ngy)"]})}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-blue-600 text-white",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3 text-center text-xs font-bold uppercase",children:"#"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold uppercase",children:"Ngy"}),s.jsxs("th",{className:"px-4 py-3 text-right text-xs font-bold uppercase",children:["Vn nhp kho",s.jsx("br",{}),"(1)"]}),s.jsxs("th",{className:"px-4 py-3 text-right text-xs font-bold uppercase",children:["Tin hng",s.jsx("br",{}),"(2)"]}),s.jsxs("th",{className:"px-4 py-3 text-right text-xs font-bold uppercase",children:["Vn sa cha",s.jsx("br",{}),"(3)"]}),s.jsxs("th",{className:"px-4 py-3 text-right text-xs font-bold uppercase",children:["Cng sa cha",s.jsx("br",{}),"(4)"]}),s.jsxs("th",{className:"px-4 py-3 text-right text-xs font-bold uppercase",children:["Doanh thu",s.jsx("br",{}),"(5 = 2 + 3 + 4)"]}),s.jsxs("th",{className:"px-4 py-3 text-right text-xs font-bold uppercase",children:["Li nhun",s.jsx("br",{}),"(6 = 2 - 1 - 4)"]}),s.jsxs("th",{className:"px-4 py-3 text-right text-xs font-bold uppercase",children:["Thu khc",s.jsx("br",{}),"(7)"]}),s.jsxs("th",{className:"px-4 py-3 text-right text-xs font-bold uppercase",children:["Chi khc",s.jsx("br",{}),"(8)"]}),s.jsxs("th",{className:"px-4 py-3 text-right text-xs font-bold uppercase bg-green-700",children:["Li nhun rng",s.jsx("br",{}),"(9 = (6 + 7) - 8)"]})]})}),s.jsxs("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:[E.dailyReport.map((H,K)=>{const ae=H.totalRevenue,se=0,ue=0,fe=ae+se+ue,ke=ae-0-ue,_e=0,Le=0,xe=ke+_e-Le;return s.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/30",children:[s.jsx("td",{className:"px-4 py-3 text-center text-sm font-medium text-slate-900 dark:text-white",children:K+1}),s.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-slate-900 dark:text-white",children:new Date(H.date).toLocaleDateString("vi-VN")}),s.jsx("td",{className:"px-4 py-3 text-right text-sm text-slate-900 dark:text-white",children:Oe(0)}),s.jsx("td",{className:"px-4 py-3 text-right text-sm font-semibold text-blue-600 dark:text-blue-400",children:Oe(ae)}),s.jsx("td",{className:"px-4 py-3 text-right text-sm text-slate-900 dark:text-white",children:Oe(se)}),s.jsx("td",{className:"px-4 py-3 text-right text-sm text-slate-900 dark:text-white",children:Oe(ue)}),s.jsx("td",{className:"px-4 py-3 text-right text-sm font-bold text-blue-600 dark:text-blue-400",children:Oe(fe)}),s.jsx("td",{className:"px-4 py-3 text-right text-sm font-bold text-orange-600 dark:text-orange-400",children:Oe(ke)}),s.jsx("td",{className:"px-4 py-3 text-right text-sm text-slate-900 dark:text-white",children:Oe(_e)}),s.jsx("td",{className:"px-4 py-3 text-right text-sm text-red-600 dark:text-red-400",children:Oe(Le)}),s.jsx("td",{className:"px-4 py-3 text-right text-sm font-black text-green-700 dark:text-green-400 bg-green-50 dark:bg-green-900/20",children:Oe(xe)})]},H.date)}),E.dailyReport.length>0&&s.jsxs("tr",{className:"bg-blue-50 dark:bg-blue-900/20 font-bold border-t-2 border-blue-600",children:[s.jsx("td",{colSpan:2,className:"px-4 py-3 text-left text-sm font-black text-slate-900 dark:text-white",children:"Tng:"}),s.jsx("td",{className:"px-4 py-3 text-right text-sm text-slate-900 dark:text-white",children:Oe(0)}),s.jsx("td",{className:"px-4 py-3 text-right text-sm font-black text-blue-600 dark:text-blue-400",children:Oe(E.totalRevenue)}),s.jsx("td",{className:"px-4 py-3 text-right text-sm text-slate-900 dark:text-white",children:Oe(0)}),s.jsx("td",{className:"px-4 py-3 text-right text-sm text-slate-900 dark:text-white",children:Oe(0)}),s.jsx("td",{className:"px-4 py-3 text-right text-sm font-black text-blue-600 dark:text-blue-400",children:Oe(E.totalRevenue)}),s.jsx("td",{className:"px-4 py-3 text-right text-sm font-black text-orange-600 dark:text-orange-400",children:Oe(E.totalProfit)}),s.jsx("td",{className:"px-4 py-3 text-right text-sm text-slate-900 dark:text-white",children:Oe(0)}),s.jsx("td",{className:"px-4 py-3 text-right text-sm text-red-600 dark:text-red-400",children:Oe(0)}),s.jsx("td",{className:"px-4 py-3 text-right text-sm font-black text-green-700 dark:text-green-400 bg-green-100 dark:bg-green-900/30",children:Oe(E.totalProfit)})]})]})]})})]}),!1]}),d==="cashflow"&&s.jsxs("div",{className:"space-y-6",children:[q&&s.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:"ang ti s qu..."}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 rounded-lg p-6 border border-green-200 dark:border-green-800",children:[s.jsx("div",{className:"text-sm font-medium text-green-700 dark:text-green-400 mb-2",children:s.jsxs("span",{className:"inline-flex items-center gap-1",children:[s.jsx(mm,{className:"w-4 h-4"})," Tng thu"]})}),s.jsx("div",{className:"text-3xl font-bold text-green-600 dark:text-green-400",children:Oe(W.totalIncome).replace("","")}),s.jsx("div",{className:"text-xs text-green-600 dark:text-green-400 mt-1",children:""})]}),s.jsxs("div",{className:"bg-gradient-to-br from-red-50 to-rose-50 dark:from-red-900/20 dark:to-rose-900/20 rounded-lg p-6 border border-red-200 dark:border-red-800",children:[s.jsxs("div",{className:"text-sm font-medium text-red-700 dark:text-red-400 mb-2 inline-flex items-center gap-1",children:[s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"w-4 h-4",children:[s.jsx("rect",{x:"2",y:"6",width:"20",height:"12",rx:"2",ry:"2"}),s.jsx("circle",{cx:"12",cy:"12",r:"2"}),s.jsx("path",{d:"M6 12h.01M18 12h.01"})]}),"Tng chi"]}),s.jsx("div",{className:"text-3xl font-bold text-red-600 dark:text-red-400",children:Oe(W.totalExpense).replace("","")}),s.jsx("div",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:""})]}),s.jsxs("div",{className:`bg-gradient-to-br rounded-lg p-6 border ${W.netCashFlow>=0?"from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 border-blue-200 dark:border-blue-800":"from-orange-50 to-amber-50 dark:from-orange-900/20 dark:to-amber-900/20 border-orange-200 dark:border-orange-800"}`,children:[s.jsx("div",{className:`text-sm font-medium mb-2 ${W.netCashFlow>=0?"text-blue-700 dark:text-blue-400":"text-orange-700 dark:text-orange-400"}`,children:s.jsxs("span",{className:"inline-flex items-center gap-1",children:[s.jsx(C0,{className:"w-4 h-4"})," Dng tin rng"]})}),s.jsx("div",{className:`text-3xl font-bold ${W.netCashFlow>=0?"text-blue-600 dark:text-blue-400":"text-orange-600 dark:text-orange-400"}`,children:Oe(W.netCashFlow).replace("","")}),s.jsx("div",{className:`text-xs mt-1 ${W.netCashFlow>=0?"text-blue-600 dark:text-blue-400":"text-orange-600 dark:text-orange-400"}`,children:""})]})]}),s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"Thu chi theo danh mc"}),s.jsx("div",{className:"space-y-3",children:Object.entries(W.byCategory).map(([H,K])=>s.jsxs("div",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-slate-50 to-slate-100 dark:from-slate-700 dark:to-slate-800 rounded-lg hover:shadow-md transition-shadow",children:[s.jsx("span",{className:"font-semibold text-slate-900 dark:text-white capitalize",children:H}),s.jsxs("div",{className:"flex gap-6",children:[s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"Thu"}),s.jsx("div",{className:"text-green-600 dark:text-green-400 font-bold",children:Oe(K.income)})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"Chi"}),s.jsx("div",{className:"text-red-600 dark:text-red-400 font-bold",children:Oe(K.expense)})]})]})]},H))})]})]}),d==="inventory"&&s.jsxs("div",{className:"space-y-6",children:[c&&s.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:"ang ti tn kho..."}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-lg p-6 border border-blue-200 dark:border-blue-800",children:[s.jsx("div",{className:"text-sm font-medium text-blue-700 dark:text-blue-400 mb-2",children:s.jsxs("span",{className:"inline-flex items-center gap-1",children:[s.jsx(Gi,{className:"w-4 h-4"})," Tng gi tr tn kho"]})}),s.jsx("div",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400",children:Oe(R.totalValue).replace("","")}),s.jsx("div",{className:"text-xs text-blue-600 dark:text-blue-400 mt-1",children:""})]}),s.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-fuchsia-50 dark:from-purple-900/20 dark:to-fuchsia-900/20 rounded-lg p-6 border border-purple-200 dark:border-purple-800",children:[s.jsx("div",{className:"text-sm font-medium text-purple-700 dark:text-purple-400 mb-2",children:s.jsxs("span",{className:"inline-flex items-center gap-1",children:[s.jsx(d7,{className:"w-4 h-4"})," Tng sn phm"]})}),s.jsx("div",{className:"text-3xl font-bold text-purple-600 dark:text-purple-400",children:R.parts.length}),s.jsx("div",{className:"text-xs text-purple-600 dark:text-purple-400 mt-1",children:"sn phm"})]}),s.jsxs("div",{className:"bg-gradient-to-br from-red-50 to-rose-50 dark:from-red-900/20 dark:to-rose-900/20 rounded-lg p-6 border border-red-200 dark:border-red-800",children:[s.jsx("div",{className:"text-sm font-medium text-red-700 dark:text-red-400 mb-2",children:s.jsxs("span",{className:"inline-flex items-center gap-1",children:[s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"w-4 h-4 text-amber-500",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v4m0 4h.01"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.29 3.86 1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0Z"})]}),"Sn phm sp ht"]})}),s.jsx("div",{className:"text-3xl font-bold text-red-600 dark:text-red-400",children:R.lowStockCount}),s.jsx("div",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:"sn phm"})]})]}),R.lowStockCount>0&&s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:s.jsxs("span",{className:"inline-flex items-center gap-1",children:[s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"w-4 h-4 text-amber-500",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v4m0 4h.01"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.29 3.86 1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0Z"})]}),"Cnh bo hng sp ht"]})}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-slate-700 dark:text-slate-300",children:"Sn phm"}),s.jsx("th",{className:"px-4 py-2 text-right text-sm font-medium text-slate-700 dark:text-slate-300",children:"Tn kho"}),s.jsx("th",{className:"px-4 py-2 text-right text-sm font-medium text-slate-700 dark:text-slate-300",children:"n gi"}),s.jsx("th",{className:"px-4 py-2 text-right text-sm font-medium text-slate-700 dark:text-slate-300",children:"Gi tr"})]})}),s.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:R.lowStockItems.map(H=>s.jsxs("tr",{children:[s.jsx("td",{className:"px-4 py-2 text-sm text-slate-900 dark:text-white",children:H.name}),s.jsx("td",{className:"px-4 py-2 text-sm text-right text-red-600 dark:text-red-400 font-medium",children:H.stock}),s.jsx("td",{className:"px-4 py-2 text-sm text-right text-slate-900 dark:text-white",children:Oe(H.price)}),s.jsx("td",{className:"px-4 py-2 text-sm text-right font-medium text-slate-900 dark:text-white",children:Oe(H.value)})]},H.id))})]})})]})]}),d==="payroll"&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-lg p-6 border border-blue-200 dark:border-blue-800",children:[s.jsx("div",{className:"text-sm font-medium text-blue-700 dark:text-blue-400 mb-2",children:s.jsxs("span",{className:"inline-flex items-center gap-1",children:[s.jsx(C0,{className:"w-4 h-4"})," Tng lng"]})}),s.jsx("div",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400",children:Oe(U.totalSalary).replace("","")}),s.jsx("div",{className:"text-xs text-blue-600 dark:text-blue-400 mt-1",children:""})]}),s.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 rounded-lg p-6 border border-green-200 dark:border-green-800",children:[s.jsx("div",{className:"text-sm font-medium text-green-700 dark:text-green-400 mb-2",children:s.jsxs("span",{className:"inline-flex items-center gap-1",children:[s.jsx(by,{className:"w-4 h-4"}),"  thanh ton"]})}),s.jsx("div",{className:"text-3xl font-bold text-green-600 dark:text-green-400",children:Oe(U.paidSalary).replace("","")}),s.jsx("div",{className:"text-xs text-green-600 dark:text-green-400 mt-1",children:""})]}),s.jsxs("div",{className:"bg-gradient-to-br from-red-50 to-rose-50 dark:from-red-900/20 dark:to-rose-900/20 rounded-lg p-6 border border-red-200 dark:border-red-800",children:[s.jsx("div",{className:"text-sm font-medium text-red-700 dark:text-red-400 mb-2",children:" Cha thanh ton"}),s.jsx("div",{className:"text-3xl font-bold text-red-600 dark:text-red-400",children:Oe(U.unpaidSalary).replace("","")}),s.jsx("div",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:""})]}),s.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-fuchsia-50 dark:from-purple-900/20 dark:to-fuchsia-900/20 rounded-lg p-6 border border-purple-200 dark:border-purple-800",children:[s.jsx("div",{className:"text-sm font-medium text-purple-700 dark:text-purple-400 mb-2",children:s.jsxs("span",{className:"inline-flex items-center gap-1",children:[s.jsx(Am,{className:"w-4 h-4"})," S nhn vin"]})}),s.jsx("div",{className:"text-3xl font-bold text-purple-600 dark:text-purple-400",children:U.employeeCount}),s.jsx("div",{className:"text-xs text-purple-600 dark:text-purple-400 mt-1",children:"nhn vin"})]})]}),s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700",children:[s.jsx("div",{className:"px-6 py-4 border-b border-slate-200 dark:border-slate-700",children:s.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:"Chi tit lng"})}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700/50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-slate-700 dark:text-slate-300",children:"Thng"}),s.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-slate-700 dark:text-slate-300",children:"Nhn vin"}),s.jsx("th",{className:"px-4 py-2 text-right text-sm font-medium text-slate-700 dark:text-slate-300",children:"Lng thc nhn"}),s.jsx("th",{className:"px-4 py-2 text-center text-sm font-medium text-slate-700 dark:text-slate-300",children:"Trng thi"})]})}),s.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:U.records.map(H=>{const K=a.find(J=>J.id===H.employeeId);return s.jsxs("tr",{children:[s.jsx("td",{className:"px-4 py-2 text-sm text-slate-900 dark:text-white",children:H.month}),s.jsx("td",{className:"px-4 py-2 text-sm text-slate-900 dark:text-white",children:(K==null?void 0:K.name)||"N/A"}),s.jsx("td",{className:"px-4 py-2 text-sm text-right font-medium text-slate-900 dark:text-white",children:Oe(H.netSalary)}),s.jsx("td",{className:"px-4 py-2 text-center",children:s.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${H.paymentStatus==="paid"?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400"}`,children:H.paymentStatus==="paid"?" tr":"Cha tr"})})]},H.id)})})]})})]})]}),d==="debt"&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 rounded-lg p-6 border border-green-200 dark:border-green-800",children:[s.jsx("div",{className:"text-sm font-medium text-green-700 dark:text-green-400 mb-2",children:"N khch hng"}),s.jsx("div",{className:"text-3xl font-bold text-green-600 dark:text-green-400",children:z.customerDebts.length}),s.jsx("div",{className:"text-xs text-green-600 dark:text-green-400 mt-1",children:""})]}),s.jsxs("div",{className:"bg-gradient-to-br from-red-50 to-rose-50 dark:from-red-900/20 dark:to-rose-900/20 rounded-lg p-6 border border-red-200 dark:border-red-800",children:[s.jsx("div",{className:"text-sm font-medium text-red-700 dark:text-red-400 mb-2",children:"N nh cung cp"}),s.jsx("div",{className:"text-3xl font-bold text-red-600 dark:text-red-400",children:z.supplierDebts.length}),s.jsx("div",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:""})]}),s.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-lg p-6 border border-blue-200 dark:border-blue-800",children:[s.jsx("div",{className:"text-sm font-medium text-blue-700 dark:text-blue-400 mb-2",children:"Cng n rng"}),s.jsx("div",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400",children:"0"}),s.jsx("div",{className:"text-xs text-blue-600 dark:text-blue-400 mt-1",children:""})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-800 dark:to-slate-900 rounded-lg p-6 border border-slate-200 dark:border-slate-700",children:[s.jsxs("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4 flex items-center gap-2",children:[s.jsx(tf,{className:"w-4 h-4 text-green-600 dark:text-green-400"}),"Cng n khch hng"]}),s.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:z.customerDebts.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"text-4xl mb-3",children:""}),s.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Khng c cng n"})]}):z.customerDebts.map((H,K)=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-white dark:bg-slate-700 rounded-lg hover:shadow-md transition-shadow",children:[s.jsx("span",{className:"font-medium text-slate-900 dark:text-white",children:H.name}),s.jsx("span",{className:"text-green-600 dark:text-green-400 font-bold",children:Oe(H.debt)})]},K))})]}),s.jsxs("div",{className:"bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-800 dark:to-slate-900 rounded-lg p-6 border border-slate-200 dark:border-slate-700",children:[s.jsxs("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4 flex items-center gap-2",children:[s.jsx("span",{className:"text-red-600 dark:text-red-400",children:""}),"Cng n nh cung cp"]}),s.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:z.supplierDebts.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"text-4xl mb-3",children:""}),s.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Khng c cng n"})]}):z.supplierDebts.map((H,K)=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-white dark:bg-slate-700 rounded-lg hover:shadow-md transition-shadow",children:[s.jsx("span",{className:"font-medium text-slate-900 dark:text-white",children:H.name}),s.jsx("span",{className:"text-red-600 dark:text-red-400 font-bold",children:Oe(H.debt)})]},K))})]})]})]})]})]})},gCe=()=>{const{employees:e,setEmployees:t}=Ba(),{data:r,isLoading:n}=T6(),{mutateAsync:a}=ate(),{mutateAsync:i}=ste(),{mutateAsync:l}=ite(),o=r||e;T.useEffect(()=>{r&&t(r)},[r,t]);const[c,d]=T.useState("list"),[f,p]=T.useState(!1),[y,g]=T.useState(null),[N,w]=T.useState(""),[k,S]=T.useState({name:"",phone:"",email:"",position:"",department:"",baseSalary:0,allowances:0,status:"active",startDate:new Date().toISOString().split("T")[0]}),O=T.useMemo(()=>o.filter(U=>{var z;return U.name.toLowerCase().includes(N.toLowerCase())||((z=U.phone)==null?void 0:z.toLowerCase().includes(N.toLowerCase()))||U.position.toLowerCase().includes(N.toLowerCase())}),[o,N]),E=async U=>{if(U.preventDefault(),!k.name||!k.position||!k.baseSalary){Xe.error("Vui lng in y  thng tin bt buc!");return}try{y?await i({id:y.id,updates:k}):await a(k),D()}catch{}},D=()=>{S({name:"",phone:"",email:"",position:"",department:"",baseSalary:0,allowances:0,status:"active",startDate:new Date().toISOString().split("T")[0]}),g(null),p(!1)},q=U=>{g(U),S(U),p(!0)},W=async U=>{if(confirm(`Bn c chc mun xa nhn vin "${U.name}" khng?`))try{await l(U.id)}catch{}},R=T.useMemo(()=>{const U=o.filter(Z=>Z.status==="active").length,z=o.filter(Z=>Z.status==="active").reduce((Z,H)=>Z+H.baseSalary+(H.allowances||0),0);return{active:U,totalSalary:z,total:o.length}},[o]);return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[s.jsx(tf,{className:"w-8 h-8 text-blue-600 dark:text-blue-400"}),"Qun l nhn vin"]}),s.jsxs("button",{onClick:()=>p(!0),className:"px-6 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg font-medium shadow-md hover:shadow-xl hover:from-blue-700 hover:to-indigo-700 transition-all duration-200 flex items-center gap-2",children:[s.jsx(_c,{className:"w-5 h-5"})," Thm nhn vin"]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg p-6 text-white shadow-lg",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-white/80 text-sm font-medium",children:"Tng nhn vin"}),s.jsx(tf,{className:"w-8 h-8"})]}),s.jsx("div",{className:"text-3xl font-bold",children:R.total}),s.jsxs("div",{className:"text-white/70 text-sm mt-1",children:[R.active," ang lm vic"]})]}),s.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-green-600 rounded-lg p-6 text-white shadow-lg",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-white/80 text-sm font-medium",children:"ang hot ng"}),s.jsx(Oee,{className:"w-8 h-8"})]}),s.jsx("div",{className:"text-3xl font-bold",children:R.active}),s.jsx("div",{className:"text-white/70 text-sm mt-1",children:"Nhn vin active"})]}),s.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-lg p-6 text-white shadow-lg",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-white/80 text-sm font-medium",children:"Tng lng thng"}),s.jsx(C0,{className:"w-8 h-8"})]}),s.jsx("div",{className:"text-2xl font-bold",children:Oe(R.totalSalary)}),s.jsx("div",{className:"text-white/70 text-sm mt-1",children:"c tnh"})]})]}),s.jsx("div",{className:"flex gap-2 border-b border-slate-200 dark:border-slate-700",children:[{key:"list",label:"Danh sch",icon:s.jsx(C6,{className:"w-4 h-4"})},{key:"attendance",label:"Chm cng",icon:s.jsx(vy,{className:"w-4 h-4"})},{key:"payroll",label:"Qun l lng",icon:s.jsx(C0,{className:"w-4 h-4"})},{key:"history",label:"Lch s",icon:s.jsx(S_,{className:"w-4 h-4"})}].map(U=>s.jsx("button",{onClick:()=>d(U.key),className:`px-6 py-3 font-medium transition-all ${c===U.key?"text-blue-600 dark:text-blue-400 border-b-2 border-blue-600 dark:border-blue-400":"text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-slate-200"}`,children:s.jsxs("span",{className:"inline-flex items-center gap-1",children:[U.icon,U.label]})},U.key))}),c==="list"&&s.jsx("div",{className:"flex gap-4",children:s.jsx("input",{type:"text",placeholder:"Tm kim nhn vin (tn, ST, chc v)...",value:N,onChange:U=>w(U.target.value),className:"flex-1 px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500"})}),c==="list"&&s.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 overflow-hidden",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-slate-50 dark:bg-slate-900/50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Nhn vin"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Chc v"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Phng ban"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Lng CB"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Ph cp"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Ngy vo"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Trng thi"}),s.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Thao tc"})]})}),s.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:O.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:8,className:"px-6 py-8 text-center text-slate-500 dark:text-slate-400",children:"Khng tm thy nhn vin no"})}):O.map(U=>s.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors",children:[s.jsx("td",{className:"px-6 py-4",children:s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-slate-900 dark:text-white",children:U.name}),U.phone&&s.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:s.jsxs("span",{className:"inline-flex items-center gap-1",children:[s.jsx(gF,{className:"w-3 h-3"})," ",U.phone]})}),U.email&&s.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:s.jsxs("span",{className:"inline-flex items-center gap-1",children:[s.jsx(bee,{className:"w-3 h-3"})," ",U.email]})})]})}),s.jsx("td",{className:"px-6 py-4 text-slate-700 dark:text-slate-300",children:U.position}),s.jsx("td",{className:"px-6 py-4 text-slate-700 dark:text-slate-300",children:U.department||"-"}),s.jsx("td",{className:"px-6 py-4 font-medium text-slate-900 dark:text-white",children:Oe(U.baseSalary)}),s.jsx("td",{className:"px-6 py-4 text-slate-700 dark:text-slate-300",children:Oe(U.allowances||0)}),s.jsx("td",{className:"px-6 py-4 text-slate-700 dark:text-slate-300",children:Bn(U.startDate)}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${U.status==="active"?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":U.status==="inactive"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400":"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400"}`,children:U.status==="active"?"Hot ng":U.status==="inactive"?"Tm ngh":"Ngh vic"})}),s.jsxs("td",{className:"px-6 py-4 text-right space-x-2",children:[s.jsxs("button",{onClick:()=>q(U),className:"inline-flex items-center gap-1 text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 font-medium text-sm",children:[s.jsx(s7,{className:"w-4 h-4"})," Sa"]}),s.jsxs("button",{onClick:()=>W(U),className:"inline-flex items-center gap-1 text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-300 font-medium text-sm",children:[s.jsx(Xg,{className:"w-4 h-4"})," Xa"]})]})]},U.id))})]})})}),c==="attendance"&&s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-8 text-center",children:[s.jsx(vy,{className:"w-16 h-16 mb-4 text-slate-400"}),s.jsx("h3",{className:"text-xl font-semibold text-slate-900 dark:text-white mb-2",children:"Chc nng chm cng"}),s.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Tnh nng qun l chm cng ang c pht trin..."})]}),c==="payroll"&&s.jsx(VV,{}),c==="history"&&s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-8 text-center",children:[s.jsx(S_,{className:"w-16 h-16 mb-4 text-slate-400"}),s.jsx("h3",{className:"text-xl font-semibold text-slate-900 dark:text-white mb-2",children:"Lch s lm vic"}),s.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Tnh nng xem lch s lm vic ang c pht trin..."})]}),f&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"sticky top-0 bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 px-6 py-4 flex items-center justify-between",children:[s.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white",children:y?s.jsxs("span",{className:"inline-flex items-center gap-2",children:[s.jsx(s7,{className:"w-5 h-5"})," Sa nhn vin"]}):s.jsxs("span",{className:"inline-flex items-center gap-2",children:[s.jsx(_c,{className:"w-5 h-5"})," Thm nhn vin mi"]})}),s.jsx("button",{onClick:D,className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-300 text-2xl",children:""})]}),s.jsxs("form",{onSubmit:E,className:"p-6 space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:["H tn ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",value:k.name,onChange:U=>S({...k,name:U.target.value}),className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"S in thoi"}),s.jsx("input",{type:"tel",value:k.phone,onChange:U=>S({...k,phone:U.target.value}),className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Email"}),s.jsx("input",{type:"email",value:k.email,onChange:U=>S({...k,email:U.target.value}),className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:["Chc v ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",value:k.position,onChange:U=>S({...k,position:U.target.value}),className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Phng ban"}),s.jsx("input",{type:"text",value:k.department,onChange:U=>S({...k,department:U.target.value}),className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:["Lng c bn ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"number",value:k.baseSalary,onChange:U=>S({...k,baseSalary:Number(U.target.value)}),className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Ph cp"}),s.jsx("input",{type:"number",value:k.allowances,onChange:U=>S({...k,allowances:Number(U.target.value)}),className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:["Ngy vo lm ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"date",value:k.startDate,onChange:U=>S({...k,startDate:U.target.value}),className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Trng thi"}),s.jsxs("select",{value:k.status,onChange:U=>S({...k,status:U.target.value}),className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white",children:[s.jsx("option",{value:"active",children:"Hot ng"}),s.jsx("option",{value:"inactive",children:"Tm ngh"}),s.jsx("option",{value:"terminated",children:"Ngh vic"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"S ti khon"}),s.jsx("input",{type:"text",value:k.bankAccount,onChange:U=>S({...k,bankAccount:U.target.value}),className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Ngn hng"}),s.jsx("input",{type:"text",value:k.bankName,onChange:U=>S({...k,bankName:U.target.value}),className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"M s thu"}),s.jsx("input",{type:"text",value:k.taxCode,onChange:U=>S({...k,taxCode:U.target.value}),className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white"})]})]}),s.jsxs("div",{className:"flex gap-3 pt-4",children:[s.jsx("button",{type:"submit",className:"flex-1 px-6 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg font-medium shadow-md hover:shadow-xl hover:from-blue-700 hover:to-indigo-700 transition-all inline-flex items-center justify-center gap-2",children:y?s.jsxs(s.Fragment,{children:[s.jsx(C_,{className:"w-5 h-5"})," Lu thay i"]}):s.jsxs(s.Fragment,{children:[s.jsx(_c,{className:"w-5 h-5"})," Thm nhn vin"]})}),s.jsxs("button",{type:"button",onClick:D,className:"px-6 py-3 bg-slate-200 dark:bg-slate-700 text-slate-700 dark:text-slate-300 rounded-lg font-medium hover:bg-slate-300 dark:hover:bg-slate-600 transition-colors inline-flex items-center gap-2",children:[s.jsx(Ou,{className:"w-5 h-5"})," Hy"]})]})]})]})})]})},bCe=()=>{const{currentBranchId:e}=Ba(),{data:t=[],isLoading:r}=mf(),{data:n=[],isLoading:a}=wA(),i=r||a,l=T.useMemo(()=>{const N=new Map;return t.forEach(w=>{const k=w.category||"Khng phn loi",S=w.stock[e]||0,O=w.retailPrice[e]||0,E=S*O,D=N.get(k);D?(D.value+=E,D.count+=1,D.stock+=S):N.set(k,{value:E,count:1,stock:S})}),Array.from(N.entries()).map(([w,k])=>({name:w,value:Math.round(k.value),count:k.count,stock:k.stock})).sort((w,k)=>k.value-w.value)},[t,e]),o=T.useMemo(()=>t.filter(N=>{const w=N.stock[e]||0;return w>0&&w<=10}).sort((N,w)=>{const k=N.stock[e]||0,S=w.stock[e]||0;return k-S}).slice(0,10),[t,e]),c=T.useMemo(()=>t.filter(N=>(N.stock[e]||0)===0).length,[t,e]),d=T.useMemo(()=>t.map(N=>{const w=N.stock[e]||0,k=N.retailPrice[e]||0;return{...N,totalValue:w*k}}).filter(N=>N.totalValue>0).sort((N,w)=>w.totalValue-N.totalValue).slice(0,10),[t,e]),f=T.useMemo(()=>t.reduce((N,w)=>{const k=w.stock[e]||0,S=w.retailPrice[e]||0;return N+k*S},0),[t,e]),p=T.useMemo(()=>t.reduce((N,w)=>{const k=w.stock[e]||0;return N+k},0),[t,e]),y=T.useMemo(()=>{const N=new Date;N.setDate(N.getDate()-30);const w=new Map;return n.filter(k=>new Date(k.date)>=N).forEach(k=>{const S=k.date.slice(0,10),O=w.get(S)||{in:0,out:0};k.type==="Nhp kho"?O.in+=k.quantity:O.out+=k.quantity,w.set(S,O)}),Array.from(w.entries()).map(([k,S])=>({date:new Date(k).toLocaleDateString("vi-VN",{day:"2-digit",month:"2-digit"}),"Nhp kho":S.in,"Xut kho":S.out})).slice(-14)},[n]),g=["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6","#ec4899","#06b6d4","#f97316"];return i?s.jsx("div",{className:"flex items-center justify-center h-96",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 p-6 rounded-lg border border-blue-200 dark:border-blue-700",children:[s.jsx("div",{className:"text-sm font-medium text-blue-600 dark:text-blue-400 mb-2",children:"Tng gi tr tn kho"}),s.jsx("div",{className:"text-3xl font-bold text-blue-900 dark:text-blue-100",children:Oe(f)})]}),s.jsxs("div",{className:"bg-gradient-to-br from-emerald-50 to-emerald-100 dark:from-emerald-900/20 dark:to-emerald-800/20 p-6 rounded-lg border border-emerald-200 dark:border-emerald-700",children:[s.jsx("div",{className:"text-sm font-medium text-emerald-600 dark:text-emerald-400 mb-2",children:"Tng SL tn kho"}),s.jsx("div",{className:"text-3xl font-bold text-emerald-900 dark:text-emerald-100",children:p}),s.jsxs("div",{className:"text-xs text-emerald-700 dark:text-emerald-300 mt-1",children:[t.length," m sn phm"]})]}),s.jsxs("div",{className:"bg-gradient-to-br from-amber-50 to-amber-100 dark:from-amber-900/20 dark:to-amber-800/20 p-6 rounded-lg border border-amber-200 dark:border-amber-700",children:[s.jsx("div",{className:"text-sm font-medium text-amber-600 dark:text-amber-400 mb-2",children:"Sp ht hng"}),s.jsx("div",{className:"text-3xl font-bold text-amber-900 dark:text-amber-100",children:o.length})]}),s.jsxs("div",{className:"bg-gradient-to-br from-red-50 to-red-100 dark:from-red-900/20 dark:to-red-800/20 p-6 rounded-lg border border-red-200 dark:border-red-700",children:[s.jsx("div",{className:"text-sm font-medium text-red-600 dark:text-red-400 mb-2",children:"Ht hng"}),s.jsx("div",{className:"text-3xl font-bold text-red-900 dark:text-red-100",children:c})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-white dark:bg-[#1e293b] p-6 rounded-lg shadow-sm border border-slate-200 dark:border-slate-700",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Gi tr theo danh mc"}),s.jsx(Kd,{width:"100%",height:300,children:s.jsxs(vH,{children:[s.jsx(yC,{data:l,cx:"50%",cy:"50%",labelLine:!1,label:N=>`${N.name}: ${(N.percent*100).toFixed(0)}%`,outerRadius:100,fill:"#8884d8",dataKey:"value",children:l.map((N,w)=>s.jsx(mp,{fill:g[w%g.length]},`cell-${w}`))}),s.jsx(Xd,{formatter:N=>Oe(N),contentStyle:{backgroundColor:"rgba(15, 23, 42, 0.95)",border:"none",borderRadius:"8px",color:"#fff"}})]})})]}),s.jsxs("div",{className:"bg-white dark:bg-[#1e293b] p-6 rounded-lg shadow-sm border border-slate-200 dark:border-slate-700",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Nhp/Xut kho (14 ngy gn nht)"}),s.jsx(Kd,{width:"100%",height:300,children:s.jsxs(OC,{data:y,children:[s.jsx(Du,{strokeDasharray:"3 3",stroke:"#334155"}),s.jsx(Mu,{dataKey:"date",stroke:"#94a3b8"}),s.jsx(Yd,{stroke:"#94a3b8"}),s.jsx(Xd,{contentStyle:{backgroundColor:"rgba(15, 23, 42, 0.95)",border:"none",borderRadius:"8px",color:"#fff"}}),s.jsx(Mm,{}),s.jsx(nf,{type:"monotone",dataKey:"Nhp kho",stroke:"#10b981",strokeWidth:2}),s.jsx(nf,{type:"monotone",dataKey:"Xut kho",stroke:"#ef4444",strokeWidth:2})]})})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-white dark:bg-[#1e293b] p-6 rounded-lg shadow-sm border border-slate-200 dark:border-slate-700",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Top 10 sn phm gi tr cao"}),s.jsx("div",{className:"space-y-3",children:d.map((N,w)=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 dark:bg-slate-800 rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center text-sm font-bold text-blue-600 dark:text-blue-400",children:w+1}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-slate-900 dark:text-slate-100",children:N.name}),s.jsxs("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:["Tn: ",N.stock[e]||0]})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"font-semibold text-slate-900 dark:text-slate-100",children:Oe(N.totalValue)}),s.jsxs("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:[Oe(N.retailPrice[e]||0),"/sp"]})]})]},N.id))})]}),s.jsxs("div",{className:"bg-white dark:bg-[#1e293b] p-6 rounded-lg shadow-sm border border-slate-200 dark:border-slate-700",children:[s.jsxs("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-4 flex items-center gap-2",children:[s.jsx("span",{className:"inline-flex",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5 text-amber-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v4m0 4h.01M10.29 3.86 1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0Z"})})}),"Cnh bo tn kho thp"]}),s.jsxs("div",{className:"space-y-3",children:[o.map(N=>{const w=N.stock[e]||0,k=w<=3?"critical":w<=5?"warning":"low";return s.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg ${k==="critical"?"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800":k==="warning"?"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800":"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800"}`,children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-slate-900 dark:text-slate-100",children:N.name}),s.jsxs("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:["SKU: ",N.sku]})]}),s.jsx("div",{className:"flex items-center gap-2",children:s.jsxs("div",{className:`px-3 py-1 rounded-full text-sm font-semibold ${k==="critical"?"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400":k==="warning"?"bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-400":"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400"}`,children:[w," cn li"]})})]},N.id)}),o.length===0&&s.jsxs("div",{className:"text-center py-8 text-slate-600 dark:text-slate-400 flex items-center justify-center gap-2",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5 text-green-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})}),"Tt c sn phm u cn  hng"]})]})]})]})]})},vCe=()=>{const{currentBranchId:e}=Ba(),{data:t=[],isLoading:r}=Mb(),{data:n=[],isLoading:a}=mf(),[i,l]=T.useState("30days"),o=r||a,c=T.useMemo(()=>{if(i==="all")return t;const N=i==="7days"?7:i==="30days"?30:90,w=new Date;return w.setDate(w.getDate()-N),t.filter(k=>new Date(k.date)>=w)},[t,i]),d=T.useMemo(()=>{const N=c.reduce((O,E)=>O+E.total,0),w=c.length,k=c.reduce((O,E)=>O+E.items.reduce((D,q)=>D+q.quantity,0),0),S=w>0?N/w:0;return{totalRevenue:N,totalOrders:w,totalItems:k,avgOrderValue:S}},[c]),f=T.useMemo(()=>{const N=new Map;return c.forEach(w=>{const k=w.date.slice(0,10);N.set(k,(N.get(k)||0)+w.total)}),Array.from(N.entries()).map(([w,k])=>({date:new Date(w).toLocaleDateString("vi-VN",{day:"2-digit",month:"2-digit"}),revenue:Math.round(k)})).sort((w,k)=>w.date.localeCompare(k.date)).slice(-30)},[c]),p=T.useMemo(()=>{const N=new Map;return c.forEach(w=>{w.items.forEach(k=>{const S=N.get(k.partId),O=n.find(D=>D.id===k.partId),E=(O==null?void 0:O.name)||"Sn phm khng xc nh";S?(S.quantity+=k.quantity,S.revenue+=k.sellingPrice*k.quantity):N.set(k.partId,{quantity:k.quantity,revenue:k.sellingPrice*k.quantity,partName:E})})}),Array.from(N.entries()).map(([w,k])=>({id:w,name:k.partName,quantity:k.quantity,revenue:Math.round(k.revenue)})).sort((w,k)=>k.revenue-w.revenue).slice(0,10)},[c,n]),y=T.useMemo(()=>{const N=new Map;return c.forEach(w=>{N.set(w.paymentMethod,(N.get(w.paymentMethod)||0)+w.total)}),Array.from(N.entries()).map(([w,k])=>({method:w,revenue:Math.round(k)})).sort((w,k)=>k.revenue-w.revenue)},[c]),g=T.useMemo(()=>{const N=new Map;return c.forEach(w=>{const k=new Date(w.date).getHours();N.set(k,(N.get(k)||0)+1)}),Array.from({length:24},(w,k)=>({hour:`${k}h`,orders:N.get(k)||0}))},[c]);return o?s.jsx("div",{className:"flex items-center justify-center h-96",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"flex gap-2",children:[{value:"7days",label:"7 ngy"},{value:"30days",label:"30 ngy"},{value:"90days",label:"90 ngy"},{value:"all",label:"Tt c"}].map(N=>s.jsx("button",{onClick:()=>l(N.value),className:`px-4 py-2 rounded-lg font-medium transition-colors ${i===N.value?"bg-blue-600 text-white":"bg-slate-100 dark:bg-slate-800 text-slate-700 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:N.label},N.value))}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 p-6 rounded-lg border border-blue-200 dark:border-blue-700",children:[s.jsx("div",{className:"text-sm font-medium text-blue-600 dark:text-blue-400 mb-2",children:"Doanh thu"}),s.jsx("div",{className:"text-3xl font-bold text-blue-900 dark:text-blue-100",children:Oe(d.totalRevenue)})]}),s.jsxs("div",{className:"bg-gradient-to-br from-emerald-50 to-emerald-100 dark:from-emerald-900/20 dark:to-emerald-800/20 p-6 rounded-lg border border-emerald-200 dark:border-emerald-700",children:[s.jsx("div",{className:"text-sm font-medium text-emerald-600 dark:text-emerald-400 mb-2",children:"n hng"}),s.jsx("div",{className:"text-3xl font-bold text-emerald-900 dark:text-emerald-100",children:d.totalOrders})]}),s.jsxs("div",{className:"bg-gradient-to-br from-amber-50 to-amber-100 dark:from-amber-900/20 dark:to-amber-800/20 p-6 rounded-lg border border-amber-200 dark:border-amber-700",children:[s.jsx("div",{className:"text-sm font-medium text-amber-600 dark:text-amber-400 mb-2",children:"Sn phm bn"}),s.jsx("div",{className:"text-3xl font-bold text-amber-900 dark:text-amber-100",children:d.totalItems})]}),s.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20 p-6 rounded-lg border border-purple-200 dark:border-purple-700",children:[s.jsx("div",{className:"text-sm font-medium text-purple-600 dark:text-purple-400 mb-2",children:"Gi tr TB/n"}),s.jsx("div",{className:"text-3xl font-bold text-purple-900 dark:text-purple-100",children:Oe(d.avgOrderValue)})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-white dark:bg-[#1e293b] p-6 rounded-lg shadow-sm border border-slate-200 dark:border-slate-700",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Xu hng doanh thu"}),s.jsx(Kd,{width:"100%",height:300,children:s.jsxs(Mge,{data:f,children:[s.jsx("defs",{children:s.jsxs("linearGradient",{id:"colorRevenue",x1:"0",y1:"0",x2:"0",y2:"1",children:[s.jsx("stop",{offset:"5%",stopColor:"#3b82f6",stopOpacity:.8}),s.jsx("stop",{offset:"95%",stopColor:"#3b82f6",stopOpacity:0})]})}),s.jsx(Du,{strokeDasharray:"3 3",stroke:"#334155"}),s.jsx(Mu,{dataKey:"date",stroke:"#94a3b8"}),s.jsx(Yd,{stroke:"#94a3b8"}),s.jsx(Xd,{formatter:N=>Oe(N),contentStyle:{backgroundColor:"rgba(15, 23, 42, 0.95)",border:"none",borderRadius:"8px",color:"#fff"}}),s.jsx(aH,{type:"monotone",dataKey:"revenue",stroke:"#3b82f6",fillOpacity:1,fill:"url(#colorRevenue)"})]})})]}),s.jsxs("div",{className:"bg-white dark:bg-[#1e293b] p-6 rounded-lg shadow-sm border border-slate-200 dark:border-slate-700",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Phng thc thanh ton"}),s.jsx(Kd,{width:"100%",height:300,children:s.jsxs(ny,{data:y,children:[s.jsx(Du,{strokeDasharray:"3 3",stroke:"#334155"}),s.jsx(Mu,{dataKey:"method",stroke:"#94a3b8"}),s.jsx(Yd,{stroke:"#94a3b8"}),s.jsx(Xd,{formatter:N=>Oe(N),contentStyle:{backgroundColor:"rgba(15, 23, 42, 0.95)",border:"none",borderRadius:"8px",color:"#fff"}}),s.jsx(Yh,{dataKey:"revenue",fill:"#10b981",radius:[8,8,0,0]})]})})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-white dark:bg-[#1e293b] p-6 rounded-lg shadow-sm border border-slate-200 dark:border-slate-700",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Phn b theo gi"}),s.jsx(Kd,{width:"100%",height:300,children:s.jsxs(OC,{data:g,children:[s.jsx(Du,{strokeDasharray:"3 3",stroke:"#334155"}),s.jsx(Mu,{dataKey:"hour",stroke:"#94a3b8"}),s.jsx(Yd,{stroke:"#94a3b8"}),s.jsx(Xd,{contentStyle:{backgroundColor:"rgba(15, 23, 42, 0.95)",border:"none",borderRadius:"8px",color:"#fff"}}),s.jsx(nf,{type:"monotone",dataKey:"orders",stroke:"#f59e0b",strokeWidth:2})]})})]}),s.jsxs("div",{className:"bg-white dark:bg-[#1e293b] p-6 rounded-lg shadow-sm border border-slate-200 dark:border-slate-700",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Top 10 sn phm bn chy"}),s.jsxs("div",{className:"space-y-3",children:[p.map((N,w)=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 dark:bg-slate-800 rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-8 h-8 rounded-full bg-emerald-100 dark:bg-emerald-900/30 flex items-center justify-center text-sm font-bold text-emerald-600 dark:text-emerald-400",children:w+1}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-slate-900 dark:text-slate-100",children:N.name}),s.jsxs("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:[" bn: ",N.quantity]})]})]}),s.jsx("div",{className:"text-right",children:s.jsx("div",{className:"font-semibold text-slate-900 dark:text-slate-100",children:Oe(N.revenue)})})]},N.id)),p.length===0&&s.jsx("div",{className:"text-center py-8 text-slate-600 dark:text-slate-400",children:"Cha c d liu bn hng"})]})]})]})]})},yCe=()=>{const{currentBranchId:e}=Ba(),{data:t=[],isLoading:r}=Mb(),{data:n=[],isLoading:a}=mf(),{data:i=[],isLoading:l}=wA(),{data:o=[],isLoading:c}=PC(),{data:d=[],isLoading:f}=Ok(),p=r||a||l||c||f,[y,g]=T.useState("30days"),N=()=>{if(y==="all")return new Date(0);const U=y==="7days"?7:y==="30days"?30:90,z=new Date;return z.setDate(z.getDate()-U),z},w=T.useMemo(()=>{const U=N();return t.filter(z=>new Date(z.date)>=U).reduce((z,Z)=>z+Z.total,0)},[t,y]),k=T.useMemo(()=>{const U=N();return i.filter(z=>z.type==="Nhp kho"&&new Date(z.date)>=U).reduce((z,Z)=>{var J;const H=n.find(ae=>ae.id===Z.partId),K=((J=H==null?void 0:H.wholesalePrice)==null?void 0:J[e])||0;return z+K*Z.quantity},0)},[i,n,e,y]),S=w-k,O=w>0?S/w*100:0,E=T.useMemo(()=>{const U=N(),z=new Map;return t.filter(Z=>new Date(Z.date)>=U).forEach(Z=>{const H=Z.date.slice(0,10),K=z.get(H)||{income:0,expense:0};K.income+=Z.total,z.set(H,K)}),i.filter(Z=>Z.type==="Nhp kho"&&new Date(Z.date)>=U).forEach(Z=>{var se;const H=Z.date.slice(0,10),K=n.find(ue=>ue.id===Z.partId),J=((se=K==null?void 0:K.wholesalePrice)==null?void 0:se[e])||0,ae=z.get(H)||{income:0,expense:0};ae.expense+=J*Z.quantity,z.set(H,ae)}),Array.from(z.entries()).map(([Z,H])=>({date:new Date(Z).toLocaleDateString("vi-VN",{day:"2-digit",month:"2-digit"}),income:Math.round(H.income),expense:Math.round(H.expense),profit:Math.round(H.income-H.expense)})).sort((Z,H)=>Z.date.localeCompare(H.date)).slice(-30)},[t,i,n,e,y]),D=T.useMemo(()=>{const U=o.reduce((Z,H)=>Z+H.remainingAmount,0),z=o.filter(Z=>Z.remainingAmount>0).length;return{totalDebt:U,overdueCount:z,count:o.length}},[o]),q=T.useMemo(()=>{const U=d.reduce((Z,H)=>Z+H.remainingAmount,0),z=d.filter(Z=>Z.remainingAmount>0).length;return{totalDebt:U,overdueCount:z,count:d.length}},[d]),W=T.useMemo(()=>[...o].filter(U=>U.remainingAmount>0).sort((U,z)=>z.remainingAmount-U.remainingAmount).slice(0,5),[o]),R=T.useMemo(()=>n.reduce((U,z)=>{const Z=z.stock[e]||0,H=z.retailPrice[e]||0;return U+Z*H},0),[n,e]);return p?s.jsx("div",{className:"flex items-center justify-center h-96",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"flex gap-2",children:[{value:"7days",label:"7 ngy"},{value:"30days",label:"30 ngy"},{value:"90days",label:"90 ngy"},{value:"all",label:"Tt c"}].map(U=>s.jsx("button",{onClick:()=>g(U.value),className:`px-4 py-2 rounded-lg font-medium transition-colors ${y===U.value?"bg-blue-600 text-white":"bg-slate-100 dark:bg-slate-800 text-slate-700 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:U.label},U.value))}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"bg-gradient-to-br from-emerald-50 to-emerald-100 dark:from-emerald-900/20 dark:to-emerald-800/20 p-6 rounded-lg border border-emerald-200 dark:border-emerald-700",children:[s.jsx("div",{className:"text-sm font-medium text-emerald-600 dark:text-emerald-400 mb-2",children:"Thu nhp"}),s.jsx("div",{className:"text-3xl font-bold text-emerald-900 dark:text-emerald-100",children:Oe(w)})]}),s.jsxs("div",{className:"bg-gradient-to-br from-red-50 to-red-100 dark:from-red-900/20 dark:to-red-800/20 p-6 rounded-lg border border-red-200 dark:border-red-700",children:[s.jsx("div",{className:"text-sm font-medium text-red-600 dark:text-red-400 mb-2",children:"Chi ph"}),s.jsx("div",{className:"text-3xl font-bold text-red-900 dark:text-red-100",children:Oe(k)})]}),s.jsxs("div",{className:`bg-gradient-to-br p-6 rounded-lg border ${S>=0?"from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 border-blue-200 dark:border-blue-700":"from-red-50 to-red-100 dark:from-red-900/20 dark:to-red-800/20 border-red-200 dark:border-red-700"}`,children:[s.jsx("div",{className:`text-sm font-medium mb-2 ${S>=0?"text-blue-600 dark:text-blue-400":"text-red-600 dark:text-red-400"}`,children:"Li nhun"}),s.jsx("div",{className:`text-3xl font-bold ${S>=0?"text-blue-900 dark:text-blue-100":"text-red-900 dark:text-red-100"}`,children:Oe(S)}),s.jsxs("div",{className:`text-xs mt-1 ${S>=0?"text-blue-600 dark:text-blue-400":"text-red-600 dark:text-red-400"}`,children:["Bin li nhun: ",O.toFixed(1),"%"]})]}),s.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20 p-6 rounded-lg border border-purple-200 dark:border-purple-700",children:[s.jsx("div",{className:"text-sm font-medium text-purple-600 dark:text-purple-400 mb-2",children:"Gi tr tn kho"}),s.jsx("div",{className:"text-3xl font-bold text-purple-900 dark:text-purple-100",children:Oe(R)})]})]}),s.jsxs("div",{className:"bg-white dark:bg-[#1e293b] p-6 rounded-lg shadow-sm border border-slate-200 dark:border-slate-700",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Thu - Chi - Li nhun"}),s.jsx(Kd,{width:"100%",height:350,children:s.jsxs(Rge,{data:E,children:[s.jsx(Du,{strokeDasharray:"3 3",stroke:"#334155"}),s.jsx(Mu,{dataKey:"date",stroke:"#94a3b8"}),s.jsx(Yd,{stroke:"#94a3b8"}),s.jsx(Xd,{formatter:U=>Oe(U),contentStyle:{backgroundColor:"rgba(15, 23, 42, 0.95)",border:"none",borderRadius:"8px",color:"#fff"}}),s.jsx(Mm,{}),s.jsx(Yh,{dataKey:"income",fill:"#10b981",name:"Thu nhp"}),s.jsx(Yh,{dataKey:"expense",fill:"#ef4444",name:"Chi ph"}),s.jsx(nf,{type:"monotone",dataKey:"profit",stroke:"#3b82f6",strokeWidth:3,name:"Li nhun"})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-white dark:bg-[#1e293b] p-6 rounded-lg shadow-sm border border-slate-200 dark:border-slate-700",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Cng n khch hng"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 bg-amber-50 dark:bg-amber-900/20 rounded-lg border border-amber-200 dark:border-amber-700",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-amber-600 dark:text-amber-400",children:"Tng cng n"}),s.jsx("div",{className:"text-2xl font-bold text-amber-900 dark:text-amber-100",children:Oe(D.totalDebt)})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-sm text-amber-600 dark:text-amber-400",children:"Qu hn"}),s.jsx("div",{className:"text-2xl font-bold text-amber-900 dark:text-amber-100",children:D.overdueCount})]})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Top 5 khch n nhiu nht"}),s.jsxs("div",{className:"space-y-2",children:[W.map(U=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 dark:bg-slate-800 rounded-lg",children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-slate-900 dark:text-slate-100",children:U.customerName}),s.jsxs("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:["Ngy to:"," ",new Date(U.createdDate).toLocaleDateString("vi-VN")]})]}),s.jsx("div",{className:"text-right",children:s.jsx("div",{className:"font-semibold text-amber-600 dark:text-amber-400",children:Oe(U.remainingAmount)})})]},U.id)),W.length===0&&s.jsxs("div",{className:"text-center py-4 text-slate-600 dark:text-slate-400 inline-flex items-center justify-center gap-2",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-4 h-4 text-green-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})}),"Khng c cng n"]})]})]})]})]}),s.jsxs("div",{className:"bg-white dark:bg-[#1e293b] p-6 rounded-lg shadow-sm border border-slate-200 dark:border-slate-700",children:[s.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Cng n nh cung cp"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 bg-red-50 dark:bg-red-900/20 rounded-lg border border-red-200 dark:border-red-700",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-red-600 dark:text-red-400",children:"Tng cng n"}),s.jsx("div",{className:"text-2xl font-bold text-red-900 dark:text-red-100",children:Oe(q.totalDebt)})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-sm text-red-600 dark:text-red-400",children:"Qu hn"}),s.jsx("div",{className:"text-2xl font-bold text-red-900 dark:text-red-100",children:q.overdueCount})]})]}),s.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-700",children:[s.jsxs("div",{className:"text-sm text-blue-600 dark:text-blue-400 mb-2 inline-flex items-center gap-2",children:[s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-4 h-4",viewBox:"0 0 24 24",fill:"currentColor",children:[s.jsx("path",{d:"M11 2a1 1 0 011 1v1.07A7.002 7.002 0 0119 11a6.97 6.97 0 01-2.05 4.95A3.5 3.5 0 0014 19.5V20a1 1 0 11-2 0v-.5a3.5 3.5 0 00-2.95-3.45A6.97 6.97 0 017 11a7.002 7.002 0 016-6.93V3a1 1 0 011-1z"}),s.jsx("path",{d:"M13 22a1 1 0 11-2 0 1 1 0 012 0z"})]}),"Mo qun l ti chnh"]}),s.jsxs("ul",{className:"text-xs text-blue-700 dark:text-blue-300 space-y-1",children:[s.jsx("li",{children:" Theo di bin li nhun hng thng"}),s.jsx("li",{children:" Gi tn kho  mc hp l"}),s.jsx("li",{children:" Thu hi cng n ng hn"}),s.jsx("li",{children:" m phn iu khon vi nh cung cp"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-800 rounded-lg text-center",children:[s.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:"Khch hng n"}),s.jsx("div",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:D.count})]}),s.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-800 rounded-lg text-center",children:[s.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:"NCC cn tr"}),s.jsx("div",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:q.count})]})]})]})]})]})]})};function Ga(e){"@babel/helpers - typeof";return Ga=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ga(e)}var tu=Uint8Array,Ec=Uint16Array,_A=Int32Array,SA=new tu([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),jA=new tu([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),ZD=new tu([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),WV=function(e,t){for(var r=new Ec(31),n=0;n<31;++n)r[n]=t+=1<<e[n-1];for(var a=new _A(r[30]),n=1;n<30;++n)for(var i=r[n];i<r[n+1];++i)a[i]=i-r[n]<<5|n;return{b:r,r:a}},KV=WV(SA,2),wCe=KV.b,zS=KV.r;wCe[28]=258,zS[258]=28;var kCe=WV(jA,0),QD=kCe.r,qS=new Ec(32768);for(var js=0;js<32768;++js){var Dh=(js&43690)>>1|(js&21845)<<1;Dh=(Dh&52428)>>2|(Dh&13107)<<2,Dh=(Dh&61680)>>4|(Dh&3855)<<4,qS[js]=((Dh&65280)>>8|(Dh&255)<<8)>>1}var Lg=(function(e,t,r){for(var n=e.length,a=0,i=new Ec(t);a<n;++a)e[a]&&++i[e[a]-1];var l=new Ec(t);for(a=1;a<t;++a)l[a]=l[a-1]+i[a-1]<<1;var o;if(r){o=new Ec(1<<t);var c=15-t;for(a=0;a<n;++a)if(e[a])for(var d=a<<4|e[a],f=t-e[a],p=l[e[a]-1]++<<f,y=p|(1<<f)-1;p<=y;++p)o[qS[p]>>c]=d}else for(o=new Ec(n),a=0;a<n;++a)e[a]&&(o[a]=qS[l[e[a]-1]++]>>15-e[a]);return o}),Km=new tu(288);for(var js=0;js<144;++js)Km[js]=8;for(var js=144;js<256;++js)Km[js]=9;for(var js=256;js<280;++js)Km[js]=7;for(var js=280;js<288;++js)Km[js]=8;var Sw=new tu(32);for(var js=0;js<32;++js)Sw[js]=5;var NCe=Lg(Km,9,0),_Ce=Lg(Sw,5,0),GV=function(e){return(e+7)/8|0},SCe=function(e,t,r){return(r==null||r>e.length)&&(r=e.length),new tu(e.subarray(t,r))},x0=function(e,t,r){r<<=t&7;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8},fg=function(e,t,r){r<<=t&7;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8,e[n+2]|=r>>16},gN=function(e,t){for(var r=[],n=0;n<e.length;++n)e[n]&&r.push({s:n,f:e[n]});var a=r.length,i=r.slice();if(!a)return{t:YV,l:0};if(a==1){var l=new tu(r[0].s+1);return l[r[0].s]=1,{t:l,l:1}}r.sort(function(q,W){return q.f-W.f}),r.push({s:-1,f:25001});var o=r[0],c=r[1],d=0,f=1,p=2;for(r[0]={s:-1,f:o.f+c.f,l:o,r:c};f!=a-1;)o=r[r[d].f<r[p].f?d++:p++],c=r[d!=f&&r[d].f<r[p].f?d++:p++],r[f++]={s:-1,f:o.f+c.f,l:o,r:c};for(var y=i[0].s,n=1;n<a;++n)i[n].s>y&&(y=i[n].s);var g=new Ec(y+1),N=HS(r[f-1],g,0);if(N>t){var n=0,w=0,k=N-t,S=1<<k;for(i.sort(function(W,R){return g[R.s]-g[W.s]||W.f-R.f});n<a;++n){var O=i[n].s;if(g[O]>t)w+=S-(1<<N-g[O]),g[O]=t;else break}for(w>>=k;w>0;){var E=i[n].s;g[E]<t?w-=1<<t-g[E]++-1:++n}for(;n>=0&&w;--n){var D=i[n].s;g[D]==t&&(--g[D],++w)}N=t}return{t:new tu(g),l:N}},HS=function(e,t,r){return e.s==-1?Math.max(HS(e.l,t,r+1),HS(e.r,t,r+1)):t[e.s]=r},JD=function(e){for(var t=e.length;t&&!e[--t];);for(var r=new Ec(++t),n=0,a=e[0],i=1,l=function(c){r[n++]=c},o=1;o<=t;++o)if(e[o]==a&&o!=t)++i;else{if(!a&&i>2){for(;i>138;i-=138)l(32754);i>2&&(l(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(l(a),--i;i>6;i-=6)l(8304);i>2&&(l(i-3<<5|8208),i=0)}for(;i--;)l(a);i=1,a=e[o]}return{c:r.subarray(0,n),n:t}},mg=function(e,t){for(var r=0,n=0;n<t.length;++n)r+=e[n]*t[n];return r},XV=function(e,t,r){var n=r.length,a=GV(t+2);e[a]=n&255,e[a+1]=n>>8,e[a+2]=e[a]^255,e[a+3]=e[a+1]^255;for(var i=0;i<n;++i)e[a+i+4]=r[i];return(a+4+n)*8},eM=function(e,t,r,n,a,i,l,o,c,d,f){x0(t,f++,r),++a[256];for(var p=gN(a,15),y=p.t,g=p.l,N=gN(i,15),w=N.t,k=N.l,S=JD(y),O=S.c,E=S.n,D=JD(w),q=D.c,W=D.n,R=new Ec(19),U=0;U<O.length;++U)++R[O[U]&31];for(var U=0;U<q.length;++U)++R[q[U]&31];for(var z=gN(R,7),Z=z.t,H=z.l,K=19;K>4&&!Z[ZD[K-1]];--K);var J=d+5<<3,ae=mg(a,Km)+mg(i,Sw)+l,se=mg(a,y)+mg(i,w)+l+14+3*K+mg(R,Z)+2*R[16]+3*R[17]+7*R[18];if(c>=0&&J<=ae&&J<=se)return XV(t,f,e.subarray(c,c+d));var ue,fe,ke,_e;if(x0(t,f,1+(se<ae)),f+=2,se<ae){ue=Lg(y,g,0),fe=y,ke=Lg(w,k,0),_e=w;var Le=Lg(Z,H,0);x0(t,f,E-257),x0(t,f+5,W-1),x0(t,f+10,K-4),f+=14;for(var U=0;U<K;++U)x0(t,f+3*U,Z[ZD[U]]);f+=3*K;for(var xe=[O,q],B=0;B<2;++B)for(var ee=xe[B],U=0;U<ee.length;++U){var Y=ee[U]&31;x0(t,f,Le[Y]),f+=Z[Y],Y>15&&(x0(t,f,ee[U]>>5&127),f+=ee[U]>>12)}}else ue=NCe,fe=Km,ke=_Ce,_e=Sw;for(var U=0;U<o;++U){var re=n[U];if(re>255){var Y=re>>18&31;fg(t,f,ue[Y+257]),f+=fe[Y+257],Y>7&&(x0(t,f,re>>23&31),f+=SA[Y]);var Q=re&31;fg(t,f,ke[Q]),f+=_e[Q],Q>3&&(fg(t,f,re>>5&8191),f+=jA[Q])}else fg(t,f,ue[re]),f+=fe[re]}return fg(t,f,ue[256]),f+fe[256]},jCe=new _A([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),YV=new tu(0),CCe=function(e,t,r,n,a,i){var l=i.z||e.length,o=new tu(n+l+5*(1+Math.ceil(l/7e3))+a),c=o.subarray(n,o.length-a),d=i.l,f=(i.r||0)&7;if(t){f&&(c[0]=i.r>>3);for(var p=jCe[t-1],y=p>>13,g=p&8191,N=(1<<r)-1,w=i.p||new Ec(32768),k=i.h||new Ec(N+1),S=Math.ceil(r/3),O=2*S,E=function(Me){return(e[Me]^e[Me+1]<<S^e[Me+2]<<O)&N},D=new _A(25e3),q=new Ec(288),W=new Ec(32),R=0,U=0,z=i.i||0,Z=0,H=i.w||0,K=0;z+2<l;++z){var J=E(z),ae=z&32767,se=k[J];if(w[ae]=se,k[J]=ae,H<=z){var ue=l-z;if((R>7e3||Z>24576)&&(ue>423||!d)){f=eM(e,c,0,D,q,W,U,Z,K,z-K,f),Z=R=U=0,K=z;for(var fe=0;fe<286;++fe)q[fe]=0;for(var fe=0;fe<30;++fe)W[fe]=0}var ke=2,_e=0,Le=g,xe=ae-se&32767;if(ue>2&&J==E(z-xe))for(var B=Math.min(y,ue)-1,ee=Math.min(32767,z),Y=Math.min(258,ue);xe<=ee&&--Le&&ae!=se;){if(e[z+ke]==e[z+ke-xe]){for(var re=0;re<Y&&e[z+re]==e[z+re-xe];++re);if(re>ke){if(ke=re,_e=xe,re>B)break;for(var Q=Math.min(xe,re-2),Ce=0,fe=0;fe<Q;++fe){var me=z-xe+fe&32767,ie=w[me],je=me-ie&32767;je>Ce&&(Ce=je,se=me)}}}ae=se,se=w[ae],xe+=ae-se&32767}if(_e){D[Z++]=268435456|zS[ke]<<18|QD[_e];var be=zS[ke]&31,le=QD[_e]&31;U+=SA[be]+jA[le],++q[257+be],++W[le],H=z+ke,++R}else D[Z++]=e[z],++q[e[z]]}}for(z=Math.max(z,H);z<l;++z)D[Z++]=e[z],++q[e[z]];f=eM(e,c,d,D,q,W,U,Z,K,z-K,f),d||(i.r=f&7|c[f/8|0]<<3,f-=7,i.h=k,i.p=w,i.i=z,i.w=H)}else{for(var z=i.w||0;z<l+d;z+=65535){var Ee=z+65535;Ee>=l&&(c[f/8|0]=d,Ee=l),f=XV(c,f+1,e.subarray(z,Ee))}i.i=l}return SCe(o,0,n+GV(f)+a)},ZV=function(){var e=1,t=0;return{p:function(r){for(var n=e,a=t,i=r.length|0,l=0;l!=i;){for(var o=Math.min(l+2655,i);l<o;++l)a+=n+=r[l];n=(n&65535)+15*(n>>16),a=(a&65535)+15*(a>>16)}e=n,t=a},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},ACe=function(e,t,r,n,a){if(!a&&(a={l:1},t.dictionary)){var i=t.dictionary.subarray(-32768),l=new tu(i.length+e.length);l.set(i),l.set(e,i.length),e=l,a.w=i.length}return CCe(e,t.level==null?6:t.level,t.mem==null?a.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,r,n,a)},QV=function(e,t,r){for(;r;++t)e[t]=r,r>>>=8},ECe=function(e,t){var r=t.level,n=r==0?0:r<6?1:r==9?3:2;if(e[0]=120,e[1]=n<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var a=ZV();a.p(t.dictionary),QV(e,2,a.d())}};function $S(e,t){t||(t={});var r=ZV();r.p(e);var n=ACe(e,t,t.dictionary?6:2,4);return ECe(n,t),QV(n,n.length-4,r.d()),n}var TCe=typeof TextDecoder<"u"&&new TextDecoder,OCe=0;try{TCe.decode(YV,{stream:!0}),OCe=1}catch{}function PCe(e){if(Array.isArray(e))return e}function ICe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,l,o=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(o.push(n.value),o.length!==t);c=!0);}catch(f){d=!0,a=f}finally{try{if(!c&&r.return!=null&&(l=r.return(),Object(l)!==l))return}finally{if(d)throw a}}return o}}function tM(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function DCe(e,t){if(e){if(typeof e=="string")return tM(e,t);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?tM(e,t):void 0}}function MCe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rM(e,t){return PCe(e)||ICe(e,t)||DCe(e,t)||MCe()}function nM(e,t="utf8"){return new TextDecoder(t).decode(e)}const LCe=new TextEncoder;function RCe(e){return LCe.encode(e)}const FCe=1024*8,BCe=(()=>{const e=new Uint8Array(4),t=new Uint32Array(e.buffer);return!((t[0]=1)&e[0])})(),bN={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class CA{constructor(t=FCe,r={}){Aa(this,"buffer");Aa(this,"byteLength");Aa(this,"byteOffset");Aa(this,"length");Aa(this,"offset");Aa(this,"lastWrittenByte");Aa(this,"littleEndian");Aa(this,"_data");Aa(this,"_mark");Aa(this,"_marks");let n=!1;typeof t=="number"?t=new ArrayBuffer(t):(n=!0,this.lastWrittenByte=t.byteLength);const a=r.offset?r.offset>>>0:0,i=t.byteLength-a;let l=a;(ArrayBuffer.isView(t)||t instanceof CA)&&(t.byteLength!==t.buffer.byteLength&&(l=t.byteOffset+a),t=t.buffer),n?this.lastWrittenByte=i:this.lastWrittenByte=0,this.buffer=t,this.length=i,this.byteLength=i,this.byteOffset=l,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,l,i),this._mark=0,this._marks=[]}available(t=1){return this.offset+t<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(t=1){return this.offset+=t,this}back(t=1){return this.offset-=t,this}seek(t){return this.offset=t,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const t=this._marks.pop();if(t===void 0)throw new Error("Mark stack empty");return this.seek(t),this}rewind(){return this.offset=0,this}ensureAvailable(t=1){if(!this.available(t)){const n=(this.offset+t)*2,a=new Uint8Array(n);a.set(new Uint8Array(this.buffer)),this.buffer=a.buffer,this.length=n,this.byteLength=n,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(t=1){return this.readArray(t,"uint8")}readArray(t,r){const n=bN[r].BYTES_PER_ELEMENT*t,a=this.byteOffset+this.offset,i=this.buffer.slice(a,a+n);if(this.littleEndian===BCe&&r!=="uint8"&&r!=="int8"){const o=new Uint8Array(this.buffer.slice(a,a+n));o.reverse();const c=new bN[r](o.buffer);return this.offset+=n,c.reverse(),c}const l=new bN[r](i);return this.offset+=n,l}readInt16(){const t=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,t}readUint16(){const t=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,t}readInt32(){const t=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,t}readUint32(){const t=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat32(){const t=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat64(){const t=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,t}readBigInt64(){const t=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,t}readBigUint64(){const t=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,t}readChar(){return String.fromCharCode(this.readInt8())}readChars(t=1){let r="";for(let n=0;n<t;n++)r+=this.readChar();return r}readUtf8(t=1){return nM(this.readBytes(t))}decodeText(t=1,r="utf8"){return nM(this.readBytes(t),r)}writeBoolean(t){return this.writeUint8(t?255:0),this}writeInt8(t){return this.ensureAvailable(1),this._data.setInt8(this.offset++,t),this._updateLastWrittenByte(),this}writeUint8(t){return this.ensureAvailable(1),this._data.setUint8(this.offset++,t),this._updateLastWrittenByte(),this}writeByte(t){return this.writeUint8(t)}writeBytes(t){this.ensureAvailable(t.length);for(let r=0;r<t.length;r++)this._data.setUint8(this.offset++,t[r]);return this._updateLastWrittenByte(),this}writeInt16(t){return this.ensureAvailable(2),this._data.setInt16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(t){return this.ensureAvailable(2),this._data.setUint16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(t){return this.ensureAvailable(4),this._data.setInt32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(t){return this.ensureAvailable(4),this._data.setUint32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(t){return this.ensureAvailable(4),this._data.setFloat32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(t){return this.ensureAvailable(8),this._data.setFloat64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(t){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(t){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(t){return this.writeUint8(t.charCodeAt(0))}writeChars(t){for(let r=0;r<t.length;r++)this.writeUint8(t.charCodeAt(r));return this}writeUtf8(t){return this.writeBytes(RCe(t))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function yp(e){let t=e.length;for(;--t>=0;)e[t]=0}const UCe=3,zCe=258,JV=29,qCe=256,HCe=qCe+1+JV,eW=30,$Ce=512,VCe=new Array((HCe+2)*2);yp(VCe);const WCe=new Array(eW*2);yp(WCe);const KCe=new Array($Ce);yp(KCe);const GCe=new Array(zCe-UCe+1);yp(GCe);const XCe=new Array(JV);yp(XCe);const YCe=new Array(eW);yp(YCe);const ZCe=(e,t,r,n)=>{let a=e&65535|0,i=e>>>16&65535|0,l=0;for(;r!==0;){l=r>2e3?2e3:r,r-=l;do a=a+t[n++]|0,i=i+a|0;while(--l);a%=65521,i%=65521}return a|i<<16|0};var VS=ZCe;const QCe=()=>{let e,t=[];for(var r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=e&1?3988292384^e>>>1:e>>>1;t[r]=e}return t},JCe=new Uint32Array(QCe()),eAe=(e,t,r,n)=>{const a=JCe,i=n+r;e^=-1;for(let l=n;l<i;l++)e=e>>>8^a[(e^t[l])&255];return e^-1};var wu=eAe,WS={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},tW={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const tAe=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var rAe=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const r=t.shift();if(r){if(typeof r!="object")throw new TypeError(r+"must be non-object");for(const n in r)tAe(r,n)&&(e[n]=r[n])}}return e},nAe=e=>{let t=0;for(let n=0,a=e.length;n<a;n++)t+=e[n].length;const r=new Uint8Array(t);for(let n=0,a=0,i=e.length;n<i;n++){let l=e[n];r.set(l,a),a+=l.length}return r},rW={assign:rAe,flattenChunks:nAe};let nW=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{nW=!1}const Nb=new Uint8Array(256);for(let e=0;e<256;e++)Nb[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;Nb[254]=Nb[254]=1;var aAe=e=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let t,r,n,a,i,l=e.length,o=0;for(a=0;a<l;a++)r=e.charCodeAt(a),(r&64512)===55296&&a+1<l&&(n=e.charCodeAt(a+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),a++)),o+=r<128?1:r<2048?2:r<65536?3:4;for(t=new Uint8Array(o),i=0,a=0;i<o;a++)r=e.charCodeAt(a),(r&64512)===55296&&a+1<l&&(n=e.charCodeAt(a+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),a++)),r<128?t[i++]=r:r<2048?(t[i++]=192|r>>>6,t[i++]=128|r&63):r<65536?(t[i++]=224|r>>>12,t[i++]=128|r>>>6&63,t[i++]=128|r&63):(t[i++]=240|r>>>18,t[i++]=128|r>>>12&63,t[i++]=128|r>>>6&63,t[i++]=128|r&63);return t};const sAe=(e,t)=>{if(t<65534&&e.subarray&&nW)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let r="";for(let n=0;n<t;n++)r+=String.fromCharCode(e[n]);return r};var iAe=(e,t)=>{const r=t||e.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,t));let n,a;const i=new Array(r*2);for(a=0,n=0;n<r;){let l=e[n++];if(l<128){i[a++]=l;continue}let o=Nb[l];if(o>4){i[a++]=65533,n+=o-1;continue}for(l&=o===2?31:o===3?15:7;o>1&&n<r;)l=l<<6|e[n++]&63,o--;if(o>1){i[a++]=65533;continue}l<65536?i[a++]=l:(l-=65536,i[a++]=55296|l>>10&1023,i[a++]=56320|l&1023)}return sAe(i,a)},lAe=(e,t)=>{t=t||e.length,t>e.length&&(t=e.length);let r=t-1;for(;r>=0&&(e[r]&192)===128;)r--;return r<0||r===0?t:r+Nb[e[r]]>t?r:t},KS={string2buf:aAe,buf2string:iAe,utf8border:lAe};function oAe(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var cAe=oAe;const q2=16209,dAe=16191;var uAe=function(t,r){let n,a,i,l,o,c,d,f,p,y,g,N,w,k,S,O,E,D,q,W,R,U,z,Z;const H=t.state;n=t.next_in,z=t.input,a=n+(t.avail_in-5),i=t.next_out,Z=t.output,l=i-(r-t.avail_out),o=i+(t.avail_out-257),c=H.dmax,d=H.wsize,f=H.whave,p=H.wnext,y=H.window,g=H.hold,N=H.bits,w=H.lencode,k=H.distcode,S=(1<<H.lenbits)-1,O=(1<<H.distbits)-1;e:do{N<15&&(g+=z[n++]<<N,N+=8,g+=z[n++]<<N,N+=8),E=w[g&S];t:for(;;){if(D=E>>>24,g>>>=D,N-=D,D=E>>>16&255,D===0)Z[i++]=E&65535;else if(D&16){q=E&65535,D&=15,D&&(N<D&&(g+=z[n++]<<N,N+=8),q+=g&(1<<D)-1,g>>>=D,N-=D),N<15&&(g+=z[n++]<<N,N+=8,g+=z[n++]<<N,N+=8),E=k[g&O];r:for(;;){if(D=E>>>24,g>>>=D,N-=D,D=E>>>16&255,D&16){if(W=E&65535,D&=15,N<D&&(g+=z[n++]<<N,N+=8,N<D&&(g+=z[n++]<<N,N+=8)),W+=g&(1<<D)-1,W>c){t.msg="invalid distance too far back",H.mode=q2;break e}if(g>>>=D,N-=D,D=i-l,W>D){if(D=W-D,D>f&&H.sane){t.msg="invalid distance too far back",H.mode=q2;break e}if(R=0,U=y,p===0){if(R+=d-D,D<q){q-=D;do Z[i++]=y[R++];while(--D);R=i-W,U=Z}}else if(p<D){if(R+=d+p-D,D-=p,D<q){q-=D;do Z[i++]=y[R++];while(--D);if(R=0,p<q){D=p,q-=D;do Z[i++]=y[R++];while(--D);R=i-W,U=Z}}}else if(R+=p-D,D<q){q-=D;do Z[i++]=y[R++];while(--D);R=i-W,U=Z}for(;q>2;)Z[i++]=U[R++],Z[i++]=U[R++],Z[i++]=U[R++],q-=3;q&&(Z[i++]=U[R++],q>1&&(Z[i++]=U[R++]))}else{R=i-W;do Z[i++]=Z[R++],Z[i++]=Z[R++],Z[i++]=Z[R++],q-=3;while(q>2);q&&(Z[i++]=Z[R++],q>1&&(Z[i++]=Z[R++]))}}else if((D&64)===0){E=k[(E&65535)+(g&(1<<D)-1)];continue r}else{t.msg="invalid distance code",H.mode=q2;break e}break}}else if((D&64)===0){E=w[(E&65535)+(g&(1<<D)-1)];continue t}else if(D&32){H.mode=dAe;break e}else{t.msg="invalid literal/length code",H.mode=q2;break e}break}}while(n<a&&i<o);q=N>>3,n-=q,N-=q<<3,g&=(1<<N)-1,t.next_in=n,t.next_out=i,t.avail_in=n<a?5+(a-n):5-(n-a),t.avail_out=i<o?257+(o-i):257-(i-o),H.hold=g,H.bits=N};const Qx=15,aM=852,sM=592,iM=0,vN=1,lM=2,hAe=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),fAe=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),mAe=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),xAe=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),pAe=(e,t,r,n,a,i,l,o)=>{const c=o.bits;let d=0,f=0,p=0,y=0,g=0,N=0,w=0,k=0,S=0,O=0,E,D,q,W,R,U=null,z;const Z=new Uint16Array(Qx+1),H=new Uint16Array(Qx+1);let K=null,J,ae,se;for(d=0;d<=Qx;d++)Z[d]=0;for(f=0;f<n;f++)Z[t[r+f]]++;for(g=c,y=Qx;y>=1&&Z[y]===0;y--);if(g>y&&(g=y),y===0)return a[i++]=1<<24|64<<16|0,a[i++]=1<<24|64<<16|0,o.bits=1,0;for(p=1;p<y&&Z[p]===0;p++);for(g<p&&(g=p),k=1,d=1;d<=Qx;d++)if(k<<=1,k-=Z[d],k<0)return-1;if(k>0&&(e===iM||y!==1))return-1;for(H[1]=0,d=1;d<Qx;d++)H[d+1]=H[d]+Z[d];for(f=0;f<n;f++)t[r+f]!==0&&(l[H[t[r+f]]++]=f);if(e===iM?(U=K=l,z=20):e===vN?(U=hAe,K=fAe,z=257):(U=mAe,K=xAe,z=0),O=0,f=0,d=p,R=i,N=g,w=0,q=-1,S=1<<g,W=S-1,e===vN&&S>aM||e===lM&&S>sM)return 1;for(;;){J=d-w,l[f]+1<z?(ae=0,se=l[f]):l[f]>=z?(ae=K[l[f]-z],se=U[l[f]-z]):(ae=96,se=0),E=1<<d-w,D=1<<N,p=D;do D-=E,a[R+(O>>w)+D]=J<<24|ae<<16|se|0;while(D!==0);for(E=1<<d-1;O&E;)E>>=1;if(E!==0?(O&=E-1,O+=E):O=0,f++,--Z[d]===0){if(d===y)break;d=t[r+l[f]]}if(d>g&&(O&W)!==q){for(w===0&&(w=g),R+=p,N=d-w,k=1<<N;N+w<y&&(k-=Z[N+w],!(k<=0));)N++,k<<=1;if(S+=1<<N,e===vN&&S>aM||e===lM&&S>sM)return 1;q=O&W,a[q]=g<<24|N<<16|R-i|0}}return O!==0&&(a[R+O]=d-w<<24|64<<16|0),o.bits=g,0};var Rg=pAe;const gAe=0,aW=1,sW=2,{Z_FINISH:oM,Z_BLOCK:bAe,Z_TREES:H2,Z_OK:Gm,Z_STREAM_END:vAe,Z_NEED_DICT:yAe,Z_STREAM_ERROR:pd,Z_DATA_ERROR:iW,Z_MEM_ERROR:lW,Z_BUF_ERROR:wAe,Z_DEFLATED:cM}=tW,qk=16180,dM=16181,uM=16182,hM=16183,fM=16184,mM=16185,xM=16186,pM=16187,gM=16188,bM=16189,jw=16190,p0=16191,yN=16192,vM=16193,wN=16194,yM=16195,wM=16196,kM=16197,NM=16198,$2=16199,V2=16200,_M=16201,SM=16202,jM=16203,CM=16204,AM=16205,kN=16206,EM=16207,TM=16208,Ms=16209,oW=16210,cW=16211,kAe=852,NAe=592,_Ae=15,SAe=_Ae,OM=e=>(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24);function jAe(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const ix=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<qk||t.mode>cW?1:0},dW=e=>{if(ix(e))return pd;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=t.wrap&1),t.mode=qk,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(kAe),t.distcode=t.distdyn=new Int32Array(NAe),t.sane=1,t.back=-1,Gm},uW=e=>{if(ix(e))return pd;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,dW(e)},hW=(e,t)=>{let r;if(ix(e))return pd;const n=e.state;return t<0?(r=0,t=-t):(r=(t>>4)+5,t<48&&(t&=15)),t&&(t<8||t>15)?pd:(n.window!==null&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,uW(e))},fW=(e,t)=>{if(!e)return pd;const r=new jAe;e.state=r,r.strm=e,r.window=null,r.mode=qk;const n=hW(e,t);return n!==Gm&&(e.state=null),n},CAe=e=>fW(e,SAe);let PM=!0,NN,_N;const AAe=e=>{if(PM){NN=new Int32Array(512),_N=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(Rg(aW,e.lens,0,288,NN,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;Rg(sW,e.lens,0,32,_N,0,e.work,{bits:5}),PM=!1}e.lencode=NN,e.lenbits=9,e.distcode=_N,e.distbits=5},mW=(e,t,r,n)=>{let a;const i=e.state;return i.window===null&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new Uint8Array(i.wsize)),n>=i.wsize?(i.window.set(t.subarray(r-i.wsize,r),0),i.wnext=0,i.whave=i.wsize):(a=i.wsize-i.wnext,a>n&&(a=n),i.window.set(t.subarray(r-n,r-n+a),i.wnext),n-=a,n?(i.window.set(t.subarray(r-n,r),0),i.wnext=n,i.whave=i.wsize):(i.wnext+=a,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=a))),0},EAe=(e,t)=>{let r,n,a,i,l,o,c,d,f,p,y,g,N,w,k=0,S,O,E,D,q,W,R,U;const z=new Uint8Array(4);let Z,H;const K=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(ix(e)||!e.output||!e.input&&e.avail_in!==0)return pd;r=e.state,r.mode===p0&&(r.mode=yN),l=e.next_out,a=e.output,c=e.avail_out,i=e.next_in,n=e.input,o=e.avail_in,d=r.hold,f=r.bits,p=o,y=c,U=Gm;e:for(;;)switch(r.mode){case qk:if(r.wrap===0){r.mode=yN;break}for(;f<16;){if(o===0)break e;o--,d+=n[i++]<<f,f+=8}if(r.wrap&2&&d===35615){r.wbits===0&&(r.wbits=15),r.check=0,z[0]=d&255,z[1]=d>>>8&255,r.check=wu(r.check,z,2,0),d=0,f=0,r.mode=dM;break}if(r.head&&(r.head.done=!1),!(r.wrap&1)||(((d&255)<<8)+(d>>8))%31){e.msg="incorrect header check",r.mode=Ms;break}if((d&15)!==cM){e.msg="unknown compression method",r.mode=Ms;break}if(d>>>=4,f-=4,R=(d&15)+8,r.wbits===0&&(r.wbits=R),R>15||R>r.wbits){e.msg="invalid window size",r.mode=Ms;break}r.dmax=1<<r.wbits,r.flags=0,e.adler=r.check=1,r.mode=d&512?bM:p0,d=0,f=0;break;case dM:for(;f<16;){if(o===0)break e;o--,d+=n[i++]<<f,f+=8}if(r.flags=d,(r.flags&255)!==cM){e.msg="unknown compression method",r.mode=Ms;break}if(r.flags&57344){e.msg="unknown header flags set",r.mode=Ms;break}r.head&&(r.head.text=d>>8&1),r.flags&512&&r.wrap&4&&(z[0]=d&255,z[1]=d>>>8&255,r.check=wu(r.check,z,2,0)),d=0,f=0,r.mode=uM;case uM:for(;f<32;){if(o===0)break e;o--,d+=n[i++]<<f,f+=8}r.head&&(r.head.time=d),r.flags&512&&r.wrap&4&&(z[0]=d&255,z[1]=d>>>8&255,z[2]=d>>>16&255,z[3]=d>>>24&255,r.check=wu(r.check,z,4,0)),d=0,f=0,r.mode=hM;case hM:for(;f<16;){if(o===0)break e;o--,d+=n[i++]<<f,f+=8}r.head&&(r.head.xflags=d&255,r.head.os=d>>8),r.flags&512&&r.wrap&4&&(z[0]=d&255,z[1]=d>>>8&255,r.check=wu(r.check,z,2,0)),d=0,f=0,r.mode=fM;case fM:if(r.flags&1024){for(;f<16;){if(o===0)break e;o--,d+=n[i++]<<f,f+=8}r.length=d,r.head&&(r.head.extra_len=d),r.flags&512&&r.wrap&4&&(z[0]=d&255,z[1]=d>>>8&255,r.check=wu(r.check,z,2,0)),d=0,f=0}else r.head&&(r.head.extra=null);r.mode=mM;case mM:if(r.flags&1024&&(g=r.length,g>o&&(g=o),g&&(r.head&&(R=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(n.subarray(i,i+g),R)),r.flags&512&&r.wrap&4&&(r.check=wu(r.check,n,g,i)),o-=g,i+=g,r.length-=g),r.length))break e;r.length=0,r.mode=xM;case xM:if(r.flags&2048){if(o===0)break e;g=0;do R=n[i+g++],r.head&&R&&r.length<65536&&(r.head.name+=String.fromCharCode(R));while(R&&g<o);if(r.flags&512&&r.wrap&4&&(r.check=wu(r.check,n,g,i)),o-=g,i+=g,R)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=pM;case pM:if(r.flags&4096){if(o===0)break e;g=0;do R=n[i+g++],r.head&&R&&r.length<65536&&(r.head.comment+=String.fromCharCode(R));while(R&&g<o);if(r.flags&512&&r.wrap&4&&(r.check=wu(r.check,n,g,i)),o-=g,i+=g,R)break e}else r.head&&(r.head.comment=null);r.mode=gM;case gM:if(r.flags&512){for(;f<16;){if(o===0)break e;o--,d+=n[i++]<<f,f+=8}if(r.wrap&4&&d!==(r.check&65535)){e.msg="header crc mismatch",r.mode=Ms;break}d=0,f=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=p0;break;case bM:for(;f<32;){if(o===0)break e;o--,d+=n[i++]<<f,f+=8}e.adler=r.check=OM(d),d=0,f=0,r.mode=jw;case jw:if(r.havedict===0)return e.next_out=l,e.avail_out=c,e.next_in=i,e.avail_in=o,r.hold=d,r.bits=f,yAe;e.adler=r.check=1,r.mode=p0;case p0:if(t===bAe||t===H2)break e;case yN:if(r.last){d>>>=f&7,f-=f&7,r.mode=kN;break}for(;f<3;){if(o===0)break e;o--,d+=n[i++]<<f,f+=8}switch(r.last=d&1,d>>>=1,f-=1,d&3){case 0:r.mode=vM;break;case 1:if(AAe(r),r.mode=$2,t===H2){d>>>=2,f-=2;break e}break;case 2:r.mode=wM;break;case 3:e.msg="invalid block type",r.mode=Ms}d>>>=2,f-=2;break;case vM:for(d>>>=f&7,f-=f&7;f<32;){if(o===0)break e;o--,d+=n[i++]<<f,f+=8}if((d&65535)!==(d>>>16^65535)){e.msg="invalid stored block lengths",r.mode=Ms;break}if(r.length=d&65535,d=0,f=0,r.mode=wN,t===H2)break e;case wN:r.mode=yM;case yM:if(g=r.length,g){if(g>o&&(g=o),g>c&&(g=c),g===0)break e;a.set(n.subarray(i,i+g),l),o-=g,i+=g,c-=g,l+=g,r.length-=g;break}r.mode=p0;break;case wM:for(;f<14;){if(o===0)break e;o--,d+=n[i++]<<f,f+=8}if(r.nlen=(d&31)+257,d>>>=5,f-=5,r.ndist=(d&31)+1,d>>>=5,f-=5,r.ncode=(d&15)+4,d>>>=4,f-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=Ms;break}r.have=0,r.mode=kM;case kM:for(;r.have<r.ncode;){for(;f<3;){if(o===0)break e;o--,d+=n[i++]<<f,f+=8}r.lens[K[r.have++]]=d&7,d>>>=3,f-=3}for(;r.have<19;)r.lens[K[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,Z={bits:r.lenbits},U=Rg(gAe,r.lens,0,19,r.lencode,0,r.work,Z),r.lenbits=Z.bits,U){e.msg="invalid code lengths set",r.mode=Ms;break}r.have=0,r.mode=NM;case NM:for(;r.have<r.nlen+r.ndist;){for(;k=r.lencode[d&(1<<r.lenbits)-1],S=k>>>24,O=k>>>16&255,E=k&65535,!(S<=f);){if(o===0)break e;o--,d+=n[i++]<<f,f+=8}if(E<16)d>>>=S,f-=S,r.lens[r.have++]=E;else{if(E===16){for(H=S+2;f<H;){if(o===0)break e;o--,d+=n[i++]<<f,f+=8}if(d>>>=S,f-=S,r.have===0){e.msg="invalid bit length repeat",r.mode=Ms;break}R=r.lens[r.have-1],g=3+(d&3),d>>>=2,f-=2}else if(E===17){for(H=S+3;f<H;){if(o===0)break e;o--,d+=n[i++]<<f,f+=8}d>>>=S,f-=S,R=0,g=3+(d&7),d>>>=3,f-=3}else{for(H=S+7;f<H;){if(o===0)break e;o--,d+=n[i++]<<f,f+=8}d>>>=S,f-=S,R=0,g=11+(d&127),d>>>=7,f-=7}if(r.have+g>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=Ms;break}for(;g--;)r.lens[r.have++]=R}}if(r.mode===Ms)break;if(r.lens[256]===0){e.msg="invalid code -- missing end-of-block",r.mode=Ms;break}if(r.lenbits=9,Z={bits:r.lenbits},U=Rg(aW,r.lens,0,r.nlen,r.lencode,0,r.work,Z),r.lenbits=Z.bits,U){e.msg="invalid literal/lengths set",r.mode=Ms;break}if(r.distbits=6,r.distcode=r.distdyn,Z={bits:r.distbits},U=Rg(sW,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,Z),r.distbits=Z.bits,U){e.msg="invalid distances set",r.mode=Ms;break}if(r.mode=$2,t===H2)break e;case $2:r.mode=V2;case V2:if(o>=6&&c>=258){e.next_out=l,e.avail_out=c,e.next_in=i,e.avail_in=o,r.hold=d,r.bits=f,uAe(e,y),l=e.next_out,a=e.output,c=e.avail_out,i=e.next_in,n=e.input,o=e.avail_in,d=r.hold,f=r.bits,r.mode===p0&&(r.back=-1);break}for(r.back=0;k=r.lencode[d&(1<<r.lenbits)-1],S=k>>>24,O=k>>>16&255,E=k&65535,!(S<=f);){if(o===0)break e;o--,d+=n[i++]<<f,f+=8}if(O&&(O&240)===0){for(D=S,q=O,W=E;k=r.lencode[W+((d&(1<<D+q)-1)>>D)],S=k>>>24,O=k>>>16&255,E=k&65535,!(D+S<=f);){if(o===0)break e;o--,d+=n[i++]<<f,f+=8}d>>>=D,f-=D,r.back+=D}if(d>>>=S,f-=S,r.back+=S,r.length=E,O===0){r.mode=AM;break}if(O&32){r.back=-1,r.mode=p0;break}if(O&64){e.msg="invalid literal/length code",r.mode=Ms;break}r.extra=O&15,r.mode=_M;case _M:if(r.extra){for(H=r.extra;f<H;){if(o===0)break e;o--,d+=n[i++]<<f,f+=8}r.length+=d&(1<<r.extra)-1,d>>>=r.extra,f-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=SM;case SM:for(;k=r.distcode[d&(1<<r.distbits)-1],S=k>>>24,O=k>>>16&255,E=k&65535,!(S<=f);){if(o===0)break e;o--,d+=n[i++]<<f,f+=8}if((O&240)===0){for(D=S,q=O,W=E;k=r.distcode[W+((d&(1<<D+q)-1)>>D)],S=k>>>24,O=k>>>16&255,E=k&65535,!(D+S<=f);){if(o===0)break e;o--,d+=n[i++]<<f,f+=8}d>>>=D,f-=D,r.back+=D}if(d>>>=S,f-=S,r.back+=S,O&64){e.msg="invalid distance code",r.mode=Ms;break}r.offset=E,r.extra=O&15,r.mode=jM;case jM:if(r.extra){for(H=r.extra;f<H;){if(o===0)break e;o--,d+=n[i++]<<f,f+=8}r.offset+=d&(1<<r.extra)-1,d>>>=r.extra,f-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=Ms;break}r.mode=CM;case CM:if(c===0)break e;if(g=y-c,r.offset>g){if(g=r.offset-g,g>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=Ms;break}g>r.wnext?(g-=r.wnext,N=r.wsize-g):N=r.wnext-g,g>r.length&&(g=r.length),w=r.window}else w=a,N=l-r.offset,g=r.length;g>c&&(g=c),c-=g,r.length-=g;do a[l++]=w[N++];while(--g);r.length===0&&(r.mode=V2);break;case AM:if(c===0)break e;a[l++]=r.length,c--,r.mode=V2;break;case kN:if(r.wrap){for(;f<32;){if(o===0)break e;o--,d|=n[i++]<<f,f+=8}if(y-=c,e.total_out+=y,r.total+=y,r.wrap&4&&y&&(e.adler=r.check=r.flags?wu(r.check,a,y,l-y):VS(r.check,a,y,l-y)),y=c,r.wrap&4&&(r.flags?d:OM(d))!==r.check){e.msg="incorrect data check",r.mode=Ms;break}d=0,f=0}r.mode=EM;case EM:if(r.wrap&&r.flags){for(;f<32;){if(o===0)break e;o--,d+=n[i++]<<f,f+=8}if(r.wrap&4&&d!==(r.total&4294967295)){e.msg="incorrect length check",r.mode=Ms;break}d=0,f=0}r.mode=TM;case TM:U=vAe;break e;case Ms:U=iW;break e;case oW:return lW;case cW:default:return pd}return e.next_out=l,e.avail_out=c,e.next_in=i,e.avail_in=o,r.hold=d,r.bits=f,(r.wsize||y!==e.avail_out&&r.mode<Ms&&(r.mode<kN||t!==oM))&&mW(e,e.output,e.next_out,y-e.avail_out),p-=e.avail_in,y-=e.avail_out,e.total_in+=p,e.total_out+=y,r.total+=y,r.wrap&4&&y&&(e.adler=r.check=r.flags?wu(r.check,a,y,e.next_out-y):VS(r.check,a,y,e.next_out-y)),e.data_type=r.bits+(r.last?64:0)+(r.mode===p0?128:0)+(r.mode===$2||r.mode===wN?256:0),(p===0&&y===0||t===oM)&&U===Gm&&(U=wAe),U},TAe=e=>{if(ix(e))return pd;let t=e.state;return t.window&&(t.window=null),e.state=null,Gm},OAe=(e,t)=>{if(ix(e))return pd;const r=e.state;return(r.wrap&2)===0?pd:(r.head=t,t.done=!1,Gm)},PAe=(e,t)=>{const r=t.length;let n,a,i;return ix(e)||(n=e.state,n.wrap!==0&&n.mode!==jw)?pd:n.mode===jw&&(a=1,a=VS(a,t,r,0),a!==n.check)?iW:(i=mW(e,t,r,r),i?(n.mode=oW,lW):(n.havedict=1,Gm))};var IAe=uW,DAe=hW,MAe=dW,LAe=CAe,RAe=fW,FAe=EAe,BAe=TAe,UAe=OAe,zAe=PAe,qAe="pako inflate (from Nodeca project)",y0={inflateReset:IAe,inflateReset2:DAe,inflateResetKeep:MAe,inflateInit:LAe,inflateInit2:RAe,inflate:FAe,inflateEnd:BAe,inflateGetHeader:UAe,inflateSetDictionary:zAe,inflateInfo:qAe};function HAe(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var $Ae=HAe;const xW=Object.prototype.toString,{Z_NO_FLUSH:VAe,Z_FINISH:WAe,Z_OK:_b,Z_STREAM_END:SN,Z_NEED_DICT:jN,Z_STREAM_ERROR:KAe,Z_DATA_ERROR:IM,Z_MEM_ERROR:GAe}=tW;function uv(e){this.options=rW.assign({chunkSize:1024*64,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15)===0&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new cAe,this.strm.avail_out=0;let r=y0.inflateInit2(this.strm,t.windowBits);if(r!==_b)throw new Error(WS[r]);if(this.header=new $Ae,y0.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=KS.string2buf(t.dictionary):xW.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(r=y0.inflateSetDictionary(this.strm,t.dictionary),r!==_b)))throw new Error(WS[r])}uv.prototype.push=function(e,t){const r=this.strm,n=this.options.chunkSize,a=this.options.dictionary;let i,l,o;if(this.ended)return!1;for(t===~~t?l=t:l=t===!0?WAe:VAe,xW.call(e)==="[object ArrayBuffer]"?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;;){for(r.avail_out===0&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),i=y0.inflate(r,l),i===jN&&a&&(i=y0.inflateSetDictionary(r,a),i===_b?i=y0.inflate(r,l):i===IM&&(i=jN));r.avail_in>0&&i===SN&&r.state.wrap>0&&e[r.next_in]!==0;)y0.inflateReset(r),i=y0.inflate(r,l);switch(i){case KAe:case IM:case jN:case GAe:return this.onEnd(i),this.ended=!0,!1}if(o=r.avail_out,r.next_out&&(r.avail_out===0||i===SN))if(this.options.to==="string"){let c=KS.utf8border(r.output,r.next_out),d=r.next_out-c,f=KS.buf2string(r.output,c);r.next_out=d,r.avail_out=n-d,d&&r.output.set(r.output.subarray(c,c+d),0),this.onData(f)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(!(i===_b&&o===0)){if(i===SN)return i=y0.inflateEnd(this.strm),this.onEnd(i),this.ended=!0,!0;if(r.avail_in===0)break}}return!0};uv.prototype.onData=function(e){this.chunks.push(e)};uv.prototype.onEnd=function(e){e===_b&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=rW.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function XAe(e,t){const r=new uv(t);if(r.push(e),r.err)throw r.msg||WS[r.err];return r.result}var YAe=uv,ZAe=XAe,QAe={Inflate:YAe,inflate:ZAe};const{Inflate:JAe,inflate:eEe}=QAe;var DM=JAe,tEe=eEe;const pW=[];for(let e=0;e<256;e++){let t=e;for(let r=0;r<8;r++)t&1?t=3988292384^t>>>1:t=t>>>1;pW[e]=t}const MM=4294967295;function rEe(e,t,r){let n=e;for(let a=0;a<r;a++)n=pW[(n^t[a])&255]^n>>>8;return n}function nEe(e,t){return(rEe(MM,e,t)^MM)>>>0}function LM(e,t,r){const n=e.readUint32(),a=nEe(new Uint8Array(e.buffer,e.byteOffset+e.offset-t-4,t),t);if(a!==n)throw new Error(`CRC mismatch for chunk ${r}. Expected ${n}, found ${a}`)}function gW(e,t,r){for(let n=0;n<r;n++)t[n]=e[n]}function bW(e,t,r,n){let a=0;for(;a<n;a++)t[a]=e[a];for(;a<r;a++)t[a]=e[a]+t[a-n]&255}function vW(e,t,r,n){let a=0;if(r.length===0)for(;a<n;a++)t[a]=e[a];else for(;a<n;a++)t[a]=e[a]+r[a]&255}function yW(e,t,r,n,a){let i=0;if(r.length===0){for(;i<a;i++)t[i]=e[i];for(;i<n;i++)t[i]=e[i]+(t[i-a]>>1)&255}else{for(;i<a;i++)t[i]=e[i]+(r[i]>>1)&255;for(;i<n;i++)t[i]=e[i]+(t[i-a]+r[i]>>1)&255}}function wW(e,t,r,n,a){let i=0;if(r.length===0){for(;i<a;i++)t[i]=e[i];for(;i<n;i++)t[i]=e[i]+t[i-a]&255}else{for(;i<a;i++)t[i]=e[i]+r[i]&255;for(;i<n;i++)t[i]=e[i]+aEe(t[i-a],r[i],r[i-a])&255}}function aEe(e,t,r){const n=e+t-r,a=Math.abs(n-e),i=Math.abs(n-t),l=Math.abs(n-r);return a<=i&&a<=l?e:i<=l?t:r}function sEe(e,t,r,n,a,i){switch(e){case 0:gW(t,r,a);break;case 1:bW(t,r,a,i);break;case 2:vW(t,r,n,a);break;case 3:yW(t,r,n,a,i);break;case 4:wW(t,r,n,a,i);break;default:throw new Error(`Unsupported filter: ${e}`)}}const iEe=new Uint16Array([255]),lEe=new Uint8Array(iEe.buffer),oEe=lEe[0]===255;function cEe(e){const{data:t,width:r,height:n,channels:a,depth:i}=e,l=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],o=Math.ceil(i/8)*a,c=new Uint8Array(n*r*o);let d=0;for(let f=0;f<7;f++){const p=l[f],y=Math.ceil((r-p.x)/p.xStep),g=Math.ceil((n-p.y)/p.yStep);if(y<=0||g<=0)continue;const N=y*o,w=new Uint8Array(N);for(let k=0;k<g;k++){const S=t[d++],O=t.subarray(d,d+N);d+=N;const E=new Uint8Array(N);sEe(S,O,E,w,N,o),w.set(E);for(let D=0;D<y;D++){const q=p.x+D*p.xStep,W=p.y+k*p.yStep;if(!(q>=r||W>=n))for(let R=0;R<o;R++)c[(W*r+q)*o+R]=E[D*o+R]}}}if(i===16){const f=new Uint16Array(c.buffer);if(oEe)for(let p=0;p<f.length;p++)f[p]=dEe(f[p]);return f}else return c}function dEe(e){return(e&255)<<8|e>>8&255}const uEe=new Uint16Array([255]),hEe=new Uint8Array(uEe.buffer),fEe=hEe[0]===255,mEe=new Uint8Array(0);function RM(e){const{data:t,width:r,height:n,channels:a,depth:i}=e,l=Math.ceil(i/8)*a,o=Math.ceil(i/8*a*r),c=new Uint8Array(n*o);let d=mEe,f=0,p,y;for(let g=0;g<n;g++){switch(p=t.subarray(f+1,f+1+o),y=c.subarray(g*o,(g+1)*o),t[f]){case 0:gW(p,y,o);break;case 1:bW(p,y,o,l);break;case 2:vW(p,y,d,o);break;case 3:yW(p,y,d,o,l);break;case 4:wW(p,y,d,o,l);break;default:throw new Error(`Unsupported filter: ${t[f]}`)}d=y,f+=o+1}if(i===16){const g=new Uint16Array(c.buffer);if(fEe)for(let N=0;N<g.length;N++)g[N]=xEe(g[N]);return g}else return c}function xEe(e){return(e&255)<<8|e>>8&255}const ay=Uint8Array.of(137,80,78,71,13,10,26,10);function FM(e){if(!pEe(e.readBytes(ay.length)))throw new Error("wrong PNG signature")}function pEe(e){if(e.length<ay.length)return!1;for(let t=0;t<ay.length;t++)if(e[t]!==ay[t])return!1;return!0}const gEe="tEXt",bEe=0,kW=new TextDecoder("latin1");function vEe(e){if(wEe(e),e.length===0||e.length>79)throw new Error("keyword length must be between 1 and 79")}const yEe=/^[\u0000-\u00FF]*$/;function wEe(e){if(!yEe.test(e))throw new Error("invalid latin1 text")}function kEe(e,t,r){const n=NW(t);e[n]=NEe(t,r-n.length-1)}function NW(e){for(e.mark();e.readByte()!==bEe;);const t=e.offset;e.reset();const r=kW.decode(e.readBytes(t-e.offset-1));return e.skip(1),vEe(r),r}function NEe(e,t){return kW.decode(e.readBytes(t))}const fc={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},CN={UNKNOWN:-1,DEFLATE:0},BM={UNKNOWN:-1,ADAPTIVE:0},AN={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},W2={NONE:0,BACKGROUND:1,PREVIOUS:2},EN={SOURCE:0,OVER:1};class _Ee extends CA{constructor(r,n={}){super(r);Aa(this,"_checkCrc");Aa(this,"_inflator");Aa(this,"_png");Aa(this,"_apng");Aa(this,"_end");Aa(this,"_hasPalette");Aa(this,"_palette");Aa(this,"_hasTransparency");Aa(this,"_transparency");Aa(this,"_compressionMethod");Aa(this,"_filterMethod");Aa(this,"_interlaceMethod");Aa(this,"_colorType");Aa(this,"_isAnimated");Aa(this,"_numberOfFrames");Aa(this,"_numberOfPlays");Aa(this,"_frames");Aa(this,"_writingDataChunks");const{checkCrc:a=!1}=n;this._checkCrc=a,this._inflator=new DM,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=CN.UNKNOWN,this._filterMethod=BM.UNKNOWN,this._interlaceMethod=AN.UNKNOWN,this._colorType=fc.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(FM(this);!this._end;){const r=this.readUint32(),n=this.readChars(4);this.decodeChunk(r,n)}return this.decodeImage(),this._png}decodeApng(){for(FM(this);!this._end;){const r=this.readUint32(),n=this.readChars(4);this.decodeApngChunk(r,n)}return this.decodeApngImage(),this._apng}decodeChunk(r,n){const a=this.offset;switch(n){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(r);break;case"IDAT":this.decodeIDAT(r);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(r);break;case"iCCP":this.decodeiCCP(r);break;case gEe:kEe(this._png.text,this,r);break;case"pHYs":this.decodepHYs();break;default:this.skip(r);break}if(this.offset-a!==r)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?LM(this,r+4,n):this.skip(4)}decodeApngChunk(r,n){const a=this.offset;switch(n!=="fdAT"&&n!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),n){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(r);break;default:this.decodeChunk(r,n),this.offset=a+r;break}if(this.offset-a!==r)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?LM(this,r+4,n):this.skip(4)}decodeIHDR(){const r=this._png;r.width=this.readUint32(),r.height=this.readUint32(),r.depth=SEe(this.readUint8());const n=this.readUint8();this._colorType=n;let a;switch(n){case fc.GREYSCALE:a=1;break;case fc.TRUECOLOUR:a=3;break;case fc.INDEXED_COLOUR:a=1;break;case fc.GREYSCALE_ALPHA:a=2;break;case fc.TRUECOLOUR_ALPHA:a=4;break;case fc.UNKNOWN:default:throw new Error(`Unknown color type: ${n}`)}if(this._png.channels=a,this._compressionMethod=this.readUint8(),this._compressionMethod!==CN.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const r={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(r)}decodePLTE(r){if(r%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${r}`);const n=r/3;this._hasPalette=!0;const a=[];this._palette=a;for(let i=0;i<n;i++)a.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(r){this._writingDataChunks=!0;const n=r,a=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,a,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(r)}decodeFDAT(r){this._writingDataChunks=!0;let n=r,a=this.offset+this.byteOffset;if(a+=4,n-=4,this._inflator.push(new Uint8Array(this.buffer,a,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(r)}decodetRNS(r){switch(this._colorType){case fc.GREYSCALE:case fc.TRUECOLOUR:{if(r%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${r}`);if(r/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${r/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(r/2);for(let n=0;n<r/2;n++)this._transparency[n]=this.readUint16();break}case fc.INDEXED_COLOUR:{if(r>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${r} vs ${this._palette.length})`);let n=0;for(;n<r;n++){const a=this.readByte();this._palette[n].push(a)}for(;n<this._palette.length;n++)this._palette[n].push(255);break}case fc.UNKNOWN:case fc.GREYSCALE_ALPHA:case fc.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(r){const n=NW(this),a=this.readUint8();if(a!==CN.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${a}`);const i=this.readBytes(r-n.length-2);this._png.iccEmbeddedProfile={name:n,profile:tEe(i)}}decodepHYs(){const r=this.readUint32(),n=this.readUint32(),a=this.readByte();this._png.resolution={x:r,y:n,unit:a}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let r=0;r<this._numberOfFrames;r++){const n={sequenceNumber:this._frames[r].sequenceNumber,delayNumber:this._frames[r].delayNumber,delayDenominator:this._frames[r].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},a=this._frames.at(r);if(a){if(a.data=RM({data:a.data,width:a.width,height:a.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),r===0||a.xOffset===0&&a.yOffset===0&&a.width===this._png.width&&a.height===this._png.height)n.data=a.data;else{const i=this._apng.frames.at(r-1);this.disposeFrame(a,i,n),this.addFrameDataToCanvas(n,a)}this._apng.frames.push(n)}}return this._apng}disposeFrame(r,n,a){switch(r.disposeOp){case W2.NONE:break;case W2.BACKGROUND:for(let i=0;i<this._png.height;i++)for(let l=0;l<this._png.width;l++){const o=(i*r.width+l)*this._png.channels;for(let c=0;c<this._png.channels;c++)a.data[o+c]=0}break;case W2.PREVIOUS:a.data.set(n.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(r,n){const a=1<<this._png.depth,i=(l,o)=>{const c=((l+n.yOffset)*this._png.width+n.xOffset+o)*this._png.channels,d=(l*n.width+o)*this._png.channels;return{index:c,frameIndex:d}};switch(n.blendOp){case EN.SOURCE:for(let l=0;l<n.height;l++)for(let o=0;o<n.width;o++){const{index:c,frameIndex:d}=i(l,o);for(let f=0;f<this._png.channels;f++)r.data[c+f]=n.data[d+f]}break;case EN.OVER:for(let l=0;l<n.height;l++)for(let o=0;o<n.width;o++){const{index:c,frameIndex:d}=i(l,o);for(let f=0;f<this._png.channels;f++){const p=n.data[d+this._png.channels-1]/a,y=f%(this._png.channels-1)===0?1:n.data[d+f],g=Math.floor(p*y+(1-p)*r.data[c+f]);r.data[c+f]+=g}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){var n;if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const r=this._isAnimated?((n=this._frames)==null?void 0:n.at(0)).data:this._inflator.result;if(this._filterMethod!==BM.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===AN.NO_INTERLACE)this._png.data=RM({data:r,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===AN.ADAM7)this._png.data=cEe({data:r,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const r=this._inflator.result,n=this._frames.at(-1);n?n.data=r:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:W2.NONE,blendOp:EN.SOURCE,data:r}),this._inflator=new DM,this._writingDataChunks=!1}}function SEe(e){if(e!==1&&e!==2&&e!==4&&e!==8&&e!==16)throw new Error(`invalid bit depth: ${e}`);return e}var UM;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.METRE=1]="METRE"})(UM||(UM={}));function jEe(e,t){return new _Ee(e,t).decode()}var Fn=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function TN(){Fn.console&&typeof Fn.console.log=="function"&&Fn.console.log.apply(Fn.console,arguments)}var hs={log:TN,warn:function(e){Fn.console&&(typeof Fn.console.warn=="function"?Fn.console.warn.apply(Fn.console,arguments):TN.call(null,arguments))},error:function(e){Fn.console&&(typeof Fn.console.error=="function"?Fn.console.error.apply(Fn.console,arguments):TN(e))}};function ON(e,t,r){var n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){$f(n.response,t,r)},n.onerror=function(){hs.error("could not download file")},n.send()}function zM(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function K2(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var $f=Fn.saveAs||((typeof window>"u"?"undefined":Ga(window))!=="object"||window!==Fn?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,r){var n=Fn.URL||Fn.webkitURL,a=document.createElement("a");t=t||e.name||"download",a.download=t,a.rel="noopener",typeof e=="string"?(a.href=e,a.origin!==location.origin?zM(a.href)?ON(e,t,r):K2(a,a.target="_blank"):K2(a)):(a.href=n.createObjectURL(e),setTimeout(function(){n.revokeObjectURL(a.href)},4e4),setTimeout(function(){K2(a)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,r){if(t=t||e.name||"download",typeof e=="string")if(zM(e))ON(e,t,r);else{var n=document.createElement("a");n.href=e,n.target="_blank",setTimeout(function(){K2(n)})}else navigator.msSaveOrOpenBlob((function(a,i){return i===void 0?i={autoBom:!1}:Ga(i)!=="object"&&(hs.warn("Deprecated: Expected third argument to be a object"),i={autoBom:!i}),i.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a})(e,r),t)}:function(e,t,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof e=="string")return ON(e,t,r);var a=e.type==="application/octet-stream",i=/constructor/i.test(Fn.HTMLElement)||Fn.safari,l=/CriOS\/[\d]+/.test(navigator.userAgent);if((l||a&&i)&&(typeof FileReader>"u"?"undefined":Ga(FileReader))==="object"){var o=new FileReader;o.onloadend=function(){var f=o.result;f=l?f:f.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=f:location=f,n=null},o.readAsDataURL(e)}else{var c=Fn.URL||Fn.webkitURL,d=c.createObjectURL(e);n?n.location=d:location.href=d,n=null,setTimeout(function(){c.revokeObjectURL(d)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function _W(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(o){return[parseInt(o[1]),parseInt(o[2]),parseInt(o[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(o){return[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(o){return[parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16)]}}],n=0;n<r.length;n++){var a=r[n].re,i=r[n].process,l=a.exec(e);l&&(t=i(l),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var o=this.r.toString(16),c=this.g.toString(16),d=this.b.toString(16);return o.length==1&&(o="0"+o),c.length==1&&(c="0"+c),d.length==1&&(d="0"+d),"#"+o+c+d}}var sy=Fn.atob.bind(Fn),qM=Fn.btoa.bind(Fn);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function PN(e,t){var r=e[0],n=e[1],a=e[2],i=e[3];r=Wl(r,n,a,i,t[0],7,-680876936),i=Wl(i,r,n,a,t[1],12,-389564586),a=Wl(a,i,r,n,t[2],17,606105819),n=Wl(n,a,i,r,t[3],22,-1044525330),r=Wl(r,n,a,i,t[4],7,-176418897),i=Wl(i,r,n,a,t[5],12,1200080426),a=Wl(a,i,r,n,t[6],17,-1473231341),n=Wl(n,a,i,r,t[7],22,-45705983),r=Wl(r,n,a,i,t[8],7,1770035416),i=Wl(i,r,n,a,t[9],12,-1958414417),a=Wl(a,i,r,n,t[10],17,-42063),n=Wl(n,a,i,r,t[11],22,-1990404162),r=Wl(r,n,a,i,t[12],7,1804603682),i=Wl(i,r,n,a,t[13],12,-40341101),a=Wl(a,i,r,n,t[14],17,-1502002290),r=Kl(r,n=Wl(n,a,i,r,t[15],22,1236535329),a,i,t[1],5,-165796510),i=Kl(i,r,n,a,t[6],9,-1069501632),a=Kl(a,i,r,n,t[11],14,643717713),n=Kl(n,a,i,r,t[0],20,-373897302),r=Kl(r,n,a,i,t[5],5,-701558691),i=Kl(i,r,n,a,t[10],9,38016083),a=Kl(a,i,r,n,t[15],14,-660478335),n=Kl(n,a,i,r,t[4],20,-405537848),r=Kl(r,n,a,i,t[9],5,568446438),i=Kl(i,r,n,a,t[14],9,-1019803690),a=Kl(a,i,r,n,t[3],14,-187363961),n=Kl(n,a,i,r,t[8],20,1163531501),r=Kl(r,n,a,i,t[13],5,-1444681467),i=Kl(i,r,n,a,t[2],9,-51403784),a=Kl(a,i,r,n,t[7],14,1735328473),r=Gl(r,n=Kl(n,a,i,r,t[12],20,-1926607734),a,i,t[5],4,-378558),i=Gl(i,r,n,a,t[8],11,-2022574463),a=Gl(a,i,r,n,t[11],16,1839030562),n=Gl(n,a,i,r,t[14],23,-35309556),r=Gl(r,n,a,i,t[1],4,-1530992060),i=Gl(i,r,n,a,t[4],11,1272893353),a=Gl(a,i,r,n,t[7],16,-155497632),n=Gl(n,a,i,r,t[10],23,-1094730640),r=Gl(r,n,a,i,t[13],4,681279174),i=Gl(i,r,n,a,t[0],11,-358537222),a=Gl(a,i,r,n,t[3],16,-722521979),n=Gl(n,a,i,r,t[6],23,76029189),r=Gl(r,n,a,i,t[9],4,-640364487),i=Gl(i,r,n,a,t[12],11,-421815835),a=Gl(a,i,r,n,t[15],16,530742520),r=Xl(r,n=Gl(n,a,i,r,t[2],23,-995338651),a,i,t[0],6,-198630844),i=Xl(i,r,n,a,t[7],10,1126891415),a=Xl(a,i,r,n,t[14],15,-1416354905),n=Xl(n,a,i,r,t[5],21,-57434055),r=Xl(r,n,a,i,t[12],6,1700485571),i=Xl(i,r,n,a,t[3],10,-1894986606),a=Xl(a,i,r,n,t[10],15,-1051523),n=Xl(n,a,i,r,t[1],21,-2054922799),r=Xl(r,n,a,i,t[8],6,1873313359),i=Xl(i,r,n,a,t[15],10,-30611744),a=Xl(a,i,r,n,t[6],15,-1560198380),n=Xl(n,a,i,r,t[13],21,1309151649),r=Xl(r,n,a,i,t[4],6,-145523070),i=Xl(i,r,n,a,t[11],10,-1120210379),a=Xl(a,i,r,n,t[2],15,718787259),n=Xl(n,a,i,r,t[9],21,-343485551),e[0]=Jh(r,e[0]),e[1]=Jh(n,e[1]),e[2]=Jh(a,e[2]),e[3]=Jh(i,e[3])}function Hk(e,t,r,n,a,i){return t=Jh(Jh(t,e),Jh(n,i)),Jh(t<<a|t>>>32-a,r)}function Wl(e,t,r,n,a,i,l){return Hk(t&r|~t&n,e,t,a,i,l)}function Kl(e,t,r,n,a,i,l){return Hk(t&n|r&~n,e,t,a,i,l)}function Gl(e,t,r,n,a,i,l){return Hk(t^r^n,e,t,a,i,l)}function Xl(e,t,r,n,a,i,l){return Hk(r^(t|~n),e,t,a,i,l)}function SW(e){var t,r=e.length,n=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)PN(n,CEe(e.substring(t-64,t)));e=e.substring(t-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)a[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(a[t>>2]|=128<<(t%4<<3),t>55)for(PN(n,a),t=0;t<16;t++)a[t]=0;return a[14]=8*r,PN(n,a),n}function CEe(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return r}var HM="0123456789abcdef".split("");function AEe(e){for(var t="",r=0;r<4;r++)t+=HM[e>>8*r+4&15]+HM[e>>8*r&15];return t}function EEe(e){return String.fromCharCode(255&e,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function GS(e){return SW(e).map(EEe).join("")}var TEe=(function(e){for(var t=0;t<e.length;t++)e[t]=AEe(e[t]);return e.join("")})(SW("hello"))!="5d41402abc4b2a76b9719d911017c592";function Jh(e,t){if(TEe){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}return e+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function XS(e,t){var r,n,a,i;if(e!==r){for(var l=(a=e,i=1+(256/e.length|0),new Array(i+1).join(a)),o=[],c=0;c<256;c++)o[c]=c;var d=0;for(c=0;c<256;c++){var f=o[c];d=(d+f+l.charCodeAt(c))%256,o[c]=o[d],o[d]=f}r=e,n=o}else o=n;var p=t.length,y=0,g=0,N="";for(c=0;c<p;c++)g=(g+(f=o[y=(y+1)%256]))%256,o[y]=o[g],o[g]=f,l=o[(o[y]+o[g])%256],N+=String.fromCharCode(t.charCodeAt(c)^l);return N}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var $M={print:4,modify:8,copy:16,"annot-forms":32};function s1(e,t,r,n){this.v=1,this.r=2;var a=192;e.forEach(function(o){if($M.perm!==void 0)throw new Error("Invalid permission: "+o);a+=$M[o]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var i=(t+this.padding).substr(0,32),l=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(i,l),this.P=-(1+(255^a)),this.encryptionKey=GS(i+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=XS(this.encryptionKey,this.padding)}function i1(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",r=e.length,n=0;n<r;n++){var a=e.charCodeAt(n);t+=a<33||a===35||a===37||a===40||a===41||a===47||a===60||a===62||a===91||a===93||a===123||a===125||a>126?"#"+("0"+a.toString(16)).slice(-2):e[n]}return t}function VM(e){if(Ga(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(r,n,a){if(a=a||!1,typeof r!="string"||typeof n!="function"||typeof a!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(r)||(t[r]={});var i=Math.random().toString(35);return t[r][i]=[n,!!a],i},this.unsubscribe=function(r){for(var n in t)if(t[n][r])return delete t[n][r],Object.keys(t[n]).length===0&&delete t[n],!0;return!1},this.publish=function(r){if(t.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),a=[];for(var i in t[r]){var l=t[r][i];try{l[0].apply(e,n)}catch(o){Fn.console&&hs.error("jsPDF PubSub Error",o.message,o)}l[1]&&a.push(i)}a.length&&a.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function Cw(e){if(!(this instanceof Cw))return new Cw(e);var t="opacity,stroke-opacity".split(",");for(var r in e)e.hasOwnProperty(r)&&t.indexOf(r)>=0&&(this[r]=e[r]);this.id="",this.objectNumber=-1}function jW(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function Gf(e,t,r,n,a){if(!(this instanceof Gf))return new Gf(e,t,r,n,a);this.type=e==="axial"?2:3,this.coords=t,this.colors=r,jW.call(this,n,a)}function d1(e,t,r,n,a){if(!(this instanceof d1))return new d1(e,t,r,n,a);this.boundingBox=e,this.xStep=t,this.yStep=r,this.stream="",this.cloneIndex=0,jW.call(this,n,a)}function nn(e){var t,r=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],a=arguments[2],i=arguments[3],l=[],o=1,c=16,d="S",f=null;Ga(e=e||{})==="object"&&(r=e.orientation,n=e.unit||n,a=e.format||a,i=e.compress||e.compressPdf||i,(f=e.encryption||null)!==null&&(f.userPassword=f.userPassword||"",f.ownerPassword=f.ownerPassword||"",f.userPermissions=f.userPermissions||[]),o=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(c=e.floatPrecision),d=e.defaultPathOperation||"S"),l=e.filters||(i===!0?["FlateEncode"]:l),n=n||"mm",r=(""+(r||"P")).toLowerCase();var p=e.putOnlyUsedFonts||!1,y={},g={internal:{},__private__:{}};g.__private__.PubSub=VM;var N="1.3",w=g.__private__.getPdfVersion=function(){return N};g.__private__.setPdfVersion=function(G){N=G};var k={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};g.__private__.getPageFormats=function(){return k};var S=g.__private__.getPageFormat=function(G){return k[G]};a=a||"a4";var O="compat",E="advanced",D=O;function q(){this.saveGraphicsState(),ye(new sr(Vt,0,0,-Vt,0,oc()*Vt).toString()+" cm"),this.setFontSize(this.getFontSize()/Vt),d="n",D=E}function W(){this.restoreGraphicsState(),d="S",D=O}var R=g.__private__.combineFontStyleAndFontWeight=function(G,ve){if(G=="bold"&&ve=="normal"||G=="bold"&&ve==400||G=="normal"&&ve=="italic"||G=="bold"&&ve=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return ve&&(G=ve==400||ve==="normal"?G==="italic"?"italic":"normal":ve!=700&&ve!=="bold"||G!=="normal"?(ve==700?"bold":ve)+""+G:"bold"),G};g.advancedAPI=function(G){var ve=D===O;return ve&&q.call(this),typeof G!="function"||(G(this),ve&&W.call(this)),this},g.compatAPI=function(G){var ve=D===E;return ve&&W.call(this),typeof G!="function"||(G(this),ve&&q.call(this)),this},g.isAdvancedAPI=function(){return D===E};var U,z=function(G){if(D!==E)throw new Error(G+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},Z=g.roundToPrecision=g.__private__.roundToPrecision=function(G,ve){var He=t||ve;if(isNaN(G)||isNaN(He))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return G.toFixed(He).replace(/0+$/,"")};U=g.hpf=g.__private__.hpf=typeof c=="number"?function(G){if(isNaN(G))throw new Error("Invalid argument passed to jsPDF.hpf");return Z(G,c)}:c==="smart"?function(G){if(isNaN(G))throw new Error("Invalid argument passed to jsPDF.hpf");return Z(G,G>-1&&G<1?16:5)}:function(G){if(isNaN(G))throw new Error("Invalid argument passed to jsPDF.hpf");return Z(G,16)};var H=g.f2=g.__private__.f2=function(G){if(isNaN(G))throw new Error("Invalid argument passed to jsPDF.f2");return Z(G,2)},K=g.__private__.f3=function(G){if(isNaN(G))throw new Error("Invalid argument passed to jsPDF.f3");return Z(G,3)},J=g.scale=g.__private__.scale=function(G){if(isNaN(G))throw new Error("Invalid argument passed to jsPDF.scale");return D===O?G*Vt:D===E?G:void 0},ae=function(G){return J((function(ve){return D===O?oc()-ve:D===E?ve:void 0})(G))};g.__private__.setPrecision=g.setPrecision=function(G){typeof parseInt(G,10)=="number"&&(t=parseInt(G,10))};var se,ue="00000000000000000000000000000000",fe=g.__private__.getFileId=function(){return ue},ke=g.__private__.setFileId=function(G){return ue=G!==void 0&&/^[a-fA-F0-9]{32}$/.test(G)?G.toUpperCase():ue.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),f!==null&&(kr=new s1(f.userPermissions,f.userPassword,f.ownerPassword,ue)),ue};g.setFileId=function(G){return ke(G),this},g.getFileId=function(){return fe()};var _e=g.__private__.convertDateToPDFDate=function(G){var ve=G.getTimezoneOffset(),He=ve<0?"+":"-",tt=Math.floor(Math.abs(ve/60)),gt=Math.abs(ve%60),Ut=[He,Y(tt),"'",Y(gt),"'"].join("");return["D:",G.getFullYear(),Y(G.getMonth()+1),Y(G.getDate()),Y(G.getHours()),Y(G.getMinutes()),Y(G.getSeconds()),Ut].join("")},Le=g.__private__.convertPDFDateToDate=function(G){var ve=parseInt(G.substr(2,4),10),He=parseInt(G.substr(6,2),10)-1,tt=parseInt(G.substr(8,2),10),gt=parseInt(G.substr(10,2),10),Ut=parseInt(G.substr(12,2),10),lr=parseInt(G.substr(14,2),10);return new Date(ve,He,tt,gt,Ut,lr,0)},xe=g.__private__.setCreationDate=function(G){var ve;if(G===void 0&&(G=new Date),G instanceof Date)ve=_e(G);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(G))throw new Error("Invalid argument passed to jsPDF.setCreationDate");ve=G}return se=ve},B=g.__private__.getCreationDate=function(G){var ve=se;return G==="jsDate"&&(ve=Le(se)),ve};g.setCreationDate=function(G){return xe(G),this},g.getCreationDate=function(G){return B(G)};var ee,Y=g.__private__.padd2=function(G){return("0"+parseInt(G)).slice(-2)},re=g.__private__.padd2Hex=function(G){return("00"+(G=G.toString())).substr(G.length)},Q=0,Ce=[],me=[],ie=0,je=[],be=[],le=!1,Ee=me;g.__private__.setCustomOutputDestination=function(G){le=!0,Ee=G};var Me=function(G){le||(Ee=G)};g.__private__.resetCustomOutputDestination=function(){le=!1,Ee=me};var ye=g.__private__.out=function(G){return G=G.toString(),ie+=G.length+1,Ee.push(G),Ee},at=g.__private__.write=function(G){return ye(arguments.length===1?G.toString():Array.prototype.join.call(arguments," "))},lt=g.__private__.getArrayBuffer=function(G){for(var ve=G.length,He=new ArrayBuffer(ve),tt=new Uint8Array(He);ve--;)tt[ve]=G.charCodeAt(ve);return He},ut=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];g.__private__.getStandardFonts=function(){return ut};var nt=e.fontSize||16;g.__private__.setFontSize=g.setFontSize=function(G){return nt=D===E?G/Vt:G,this};var ot,We=g.__private__.getFontSize=g.getFontSize=function(){return D===O?nt:nt*Vt},Kt=e.R2L||!1;g.__private__.setR2L=g.setR2L=function(G){return Kt=G,this},g.__private__.getR2L=g.getR2L=function(){return Kt};var Dt,fr=g.__private__.setZoomMode=function(G){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(G))ot=G;else if(isNaN(G)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(G)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+G+'" is not recognized.');ot=G}else ot=parseInt(G,10)};g.__private__.getZoomMode=function(){return ot};var xr,nr=g.__private__.setPageMode=function(G){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(G)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+G+'" is not recognized.');Dt=G};g.__private__.getPageMode=function(){return Dt};var Mr=g.__private__.setLayoutMode=function(G){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(G)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+G+'" is not recognized.');xr=G};g.__private__.getLayoutMode=function(){return xr},g.__private__.setDisplayMode=g.setDisplayMode=function(G,ve,He){return fr(G),Mr(ve),nr(He),this};var rr={title:"",subject:"",author:"",keywords:"",creator:""};g.__private__.getDocumentProperty=function(G){if(Object.keys(rr).indexOf(G)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return rr[G]},g.__private__.getDocumentProperties=function(){return rr},g.__private__.setDocumentProperties=g.setProperties=g.setDocumentProperties=function(G){for(var ve in rr)rr.hasOwnProperty(ve)&&G[ve]&&(rr[ve]=G[ve]);return this},g.__private__.setDocumentProperty=function(G,ve){if(Object.keys(rr).indexOf(G)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return rr[G]=ve};var Gt,Vt,cr,br,ar,xt={},yr={},Ge=[],vt={},$t={},Yt={},Er={},wr=null,Ke=0,Et=[],ur=new VM(g),Br=e.hotfixes||[],Tr={},Zt={},Pr=[],sr=function G(ve,He,tt,gt,Ut,lr){if(!(this instanceof G))return new G(ve,He,tt,gt,Ut,lr);isNaN(ve)&&(ve=1),isNaN(He)&&(He=0),isNaN(tt)&&(tt=0),isNaN(gt)&&(gt=1),isNaN(Ut)&&(Ut=0),isNaN(lr)&&(lr=0),this._matrix=[ve,He,tt,gt,Ut,lr]};Object.defineProperty(sr.prototype,"sx",{get:function(){return this._matrix[0]},set:function(G){this._matrix[0]=G}}),Object.defineProperty(sr.prototype,"shy",{get:function(){return this._matrix[1]},set:function(G){this._matrix[1]=G}}),Object.defineProperty(sr.prototype,"shx",{get:function(){return this._matrix[2]},set:function(G){this._matrix[2]=G}}),Object.defineProperty(sr.prototype,"sy",{get:function(){return this._matrix[3]},set:function(G){this._matrix[3]=G}}),Object.defineProperty(sr.prototype,"tx",{get:function(){return this._matrix[4]},set:function(G){this._matrix[4]=G}}),Object.defineProperty(sr.prototype,"ty",{get:function(){return this._matrix[5]},set:function(G){this._matrix[5]=G}}),Object.defineProperty(sr.prototype,"a",{get:function(){return this._matrix[0]},set:function(G){this._matrix[0]=G}}),Object.defineProperty(sr.prototype,"b",{get:function(){return this._matrix[1]},set:function(G){this._matrix[1]=G}}),Object.defineProperty(sr.prototype,"c",{get:function(){return this._matrix[2]},set:function(G){this._matrix[2]=G}}),Object.defineProperty(sr.prototype,"d",{get:function(){return this._matrix[3]},set:function(G){this._matrix[3]=G}}),Object.defineProperty(sr.prototype,"e",{get:function(){return this._matrix[4]},set:function(G){this._matrix[4]=G}}),Object.defineProperty(sr.prototype,"f",{get:function(){return this._matrix[5]},set:function(G){this._matrix[5]=G}}),Object.defineProperty(sr.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(sr.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(sr.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(sr.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),sr.prototype.join=function(G){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(U).join(G)},sr.prototype.multiply=function(G){var ve=G.sx*this.sx+G.shy*this.shx,He=G.sx*this.shy+G.shy*this.sy,tt=G.shx*this.sx+G.sy*this.shx,gt=G.shx*this.shy+G.sy*this.sy,Ut=G.tx*this.sx+G.ty*this.shx+this.tx,lr=G.tx*this.shy+G.ty*this.sy+this.ty;return new sr(ve,He,tt,gt,Ut,lr)},sr.prototype.decompose=function(){var G=this.sx,ve=this.shy,He=this.shx,tt=this.sy,gt=this.tx,Ut=this.ty,lr=Math.sqrt(G*G+ve*ve),Hr=(G/=lr)*He+(ve/=lr)*tt;He-=G*Hr,tt-=ve*Hr;var Cr=Math.sqrt(He*He+tt*tt);return Hr/=Cr,G*(tt/=Cr)<ve*(He/=Cr)&&(G=-G,ve=-ve,Hr=-Hr,lr=-lr),{scale:new sr(lr,0,0,Cr,0,0),translate:new sr(1,0,0,1,gt,Ut),rotate:new sr(G,ve,-ve,G,0,0),skew:new sr(1,0,Hr,1,0,0)}},sr.prototype.toString=function(G){return this.join(" ")},sr.prototype.inversed=function(){var G=this.sx,ve=this.shy,He=this.shx,tt=this.sy,gt=this.tx,Ut=this.ty,lr=1/(G*tt-ve*He),Hr=tt*lr,Cr=-ve*lr,kn=-He*lr,$r=G*lr;return new sr(Hr,Cr,kn,$r,-Hr*gt-kn*Ut,-Cr*gt-$r*Ut)},sr.prototype.applyToPoint=function(G){var ve=G.x*this.sx+G.y*this.shx+this.tx,He=G.x*this.shy+G.y*this.sy+this.ty;return new ls(ve,He)},sr.prototype.applyToRectangle=function(G){var ve=this.applyToPoint(G),He=this.applyToPoint(new ls(G.x+G.w,G.y+G.h));return new Io(ve.x,ve.y,He.x-ve.x,He.y-ve.y)},sr.prototype.clone=function(){var G=this.sx,ve=this.shy,He=this.shx,tt=this.sy,gt=this.tx,Ut=this.ty;return new sr(G,ve,He,tt,gt,Ut)},g.Matrix=sr;var Or=g.matrixMult=function(G,ve){return ve.multiply(G)},qr=new sr(1,0,0,1,0,0);g.unitMatrix=g.identityMatrix=qr;var Lr=function(G,ve){if(!$t[G]){var He=(ve instanceof Gf?"Sh":"P")+(Object.keys(vt).length+1).toString(10);ve.id=He,$t[G]=He,vt[He]=ve,ur.publish("addPattern",ve)}};g.ShadingPattern=Gf,g.TilingPattern=d1,g.addShadingPattern=function(G,ve){return z("addShadingPattern()"),Lr(G,ve),this},g.beginTilingPattern=function(G){z("beginTilingPattern()"),Lc(G.boundingBox[0],G.boundingBox[1],G.boundingBox[2]-G.boundingBox[0],G.boundingBox[3]-G.boundingBox[1],G.matrix)},g.endTilingPattern=function(G,ve){z("endTilingPattern()"),ve.stream=be[ee].join(`
`),Lr(G,ve),ur.publish("endTilingPattern",ve),Pr.pop().restore()};var An,Ir=g.__private__.newObject=function(){var G=Nn();return we(G,!0),G},Nn=g.__private__.newObjectDeferred=function(){return Q++,Ce[Q]=function(){return ie},Q},we=function(G,ve){return ve=typeof ve=="boolean"&&ve,Ce[G]=ie,ve&&ye(G+" 0 obj"),G},Ne=g.__private__.newAdditionalObject=function(){var G={objId:Nn(),content:""};return je.push(G),G},De=Nn(),Ie=Nn(),oe=g.__private__.decodeColorString=function(G){var ve=G.split(" ");if(ve.length!==2||ve[1]!=="g"&&ve[1]!=="G")ve.length!==5||ve[4]!=="k"&&ve[4]!=="K"||(ve=[(1-ve[0])*(1-ve[3]),(1-ve[1])*(1-ve[3]),(1-ve[2])*(1-ve[3]),"r"]);else{var He=parseFloat(ve[0]);ve=[He,He,He,"r"]}for(var tt="#",gt=0;gt<3;gt++)tt+=("0"+Math.floor(255*parseFloat(ve[gt])).toString(16)).slice(-2);return tt},ne=g.__private__.encodeColorString=function(G){var ve;typeof G=="string"&&(G={ch1:G});var He=G.ch1,tt=G.ch2,gt=G.ch3,Ut=G.ch4,lr=G.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof He=="string"&&He.charAt(0)!=="#"){var Hr=new _W(He);if(Hr.ok)He=Hr.toHex();else if(!/^\d*\.?\d*$/.test(He))throw new Error('Invalid color "'+He+'" passed to jsPDF.encodeColorString.')}if(typeof He=="string"&&/^#[0-9A-Fa-f]{3}$/.test(He)&&(He="#"+He[1]+He[1]+He[2]+He[2]+He[3]+He[3]),typeof He=="string"&&/^#[0-9A-Fa-f]{6}$/.test(He)){var Cr=parseInt(He.substr(1),16);He=Cr>>16&255,tt=Cr>>8&255,gt=255&Cr}if(tt===void 0||Ut===void 0&&He===tt&&tt===gt)ve=typeof He=="string"?He+" "+lr[0]:G.precision===2?H(He/255)+" "+lr[0]:K(He/255)+" "+lr[0];else if(Ut===void 0||Ga(Ut)==="object"){if(Ut&&!isNaN(Ut.a)&&Ut.a===0)return["1.","1.","1.",lr[1]].join(" ");ve=typeof He=="string"?[He,tt,gt,lr[1]].join(" "):G.precision===2?[H(He/255),H(tt/255),H(gt/255),lr[1]].join(" "):[K(He/255),K(tt/255),K(gt/255),lr[1]].join(" ")}else ve=typeof He=="string"?[He,tt,gt,Ut,lr[2]].join(" "):G.precision===2?[H(He),H(tt),H(gt),H(Ut),lr[2]].join(" "):[K(He),K(tt),K(gt),K(Ut),lr[2]].join(" ");return ve},ze=g.__private__.getFilters=function(){return l},st=g.__private__.putStream=function(G){var ve=(G=G||{}).data||"",He=G.filters||ze(),tt=G.alreadyAppliedFilters||[],gt=G.addLength1||!1,Ut=ve.length,lr=G.objectId,Hr=function(qs){return qs};if(f!==null&&lr===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");f!==null&&(Hr=kr.encryptor(lr,0));var Cr={};He===!0&&(He=["FlateEncode"]);var kn=G.additionalKeyValues||[],$r=(Cr=nn.API.processDataByFilters!==void 0?nn.API.processDataByFilters(ve,He):{data:ve,reverseChain:[]}).reverseChain+(Array.isArray(tt)?tt.join(" "):tt.toString());if(Cr.data.length!==0&&(kn.push({key:"Length",value:Cr.data.length}),gt===!0&&kn.push({key:"Length1",value:Ut})),$r.length!=0)if($r.split("/").length-1==1)kn.push({key:"Filter",value:$r});else{kn.push({key:"Filter",value:"["+$r+"]"});for(var aa=0;aa<kn.length;aa+=1)if(kn[aa].key==="DecodeParms"){for(var _a=[],jn=0;jn<Cr.reverseChain.split("/").length-1;jn+=1)_a.push("null");_a.push(kn[aa].value),kn[aa].value="["+_a.join(" ")+"]"}}ye("<<");for(var Ar=0;Ar<kn.length;Ar++)ye("/"+kn[Ar].key+" "+kn[Ar].value);ye(">>"),Cr.data.length!==0&&(ye("stream"),ye(Hr(Cr.data)),ye("endstream"))},Ze=g.__private__.putPage=function(G){var ve=G.number,He=G.data,tt=G.objId,gt=G.contentsObjId;we(tt,!0),ye("<</Type /Page"),ye("/Parent "+G.rootDictionaryObjId+" 0 R"),ye("/Resources "+G.resourceDictionaryObjId+" 0 R"),ye("/MediaBox ["+parseFloat(U(G.mediaBox.bottomLeftX))+" "+parseFloat(U(G.mediaBox.bottomLeftY))+" "+U(G.mediaBox.topRightX)+" "+U(G.mediaBox.topRightY)+"]"),G.cropBox!==null&&ye("/CropBox ["+U(G.cropBox.bottomLeftX)+" "+U(G.cropBox.bottomLeftY)+" "+U(G.cropBox.topRightX)+" "+U(G.cropBox.topRightY)+"]"),G.bleedBox!==null&&ye("/BleedBox ["+U(G.bleedBox.bottomLeftX)+" "+U(G.bleedBox.bottomLeftY)+" "+U(G.bleedBox.topRightX)+" "+U(G.bleedBox.topRightY)+"]"),G.trimBox!==null&&ye("/TrimBox ["+U(G.trimBox.bottomLeftX)+" "+U(G.trimBox.bottomLeftY)+" "+U(G.trimBox.topRightX)+" "+U(G.trimBox.topRightY)+"]"),G.artBox!==null&&ye("/ArtBox ["+U(G.artBox.bottomLeftX)+" "+U(G.artBox.bottomLeftY)+" "+U(G.artBox.topRightX)+" "+U(G.artBox.topRightY)+"]"),typeof G.userUnit=="number"&&G.userUnit!==1&&ye("/UserUnit "+G.userUnit),ur.publish("putPage",{objId:tt,pageContext:Et[ve],pageNumber:ve,page:He}),ye("/Contents "+gt+" 0 R"),ye(">>"),ye("endobj");var Ut=He.join(`
`);return D===E&&(Ut+=`
Q`),we(gt,!0),st({data:Ut,filters:ze(),objectId:gt}),ye("endobj"),tt},mt=g.__private__.putPages=function(){var G,ve,He=[];for(G=1;G<=Ke;G++)Et[G].objId=Nn(),Et[G].contentsObjId=Nn();for(G=1;G<=Ke;G++)He.push(Ze({number:G,data:be[G],objId:Et[G].objId,contentsObjId:Et[G].contentsObjId,mediaBox:Et[G].mediaBox,cropBox:Et[G].cropBox,bleedBox:Et[G].bleedBox,trimBox:Et[G].trimBox,artBox:Et[G].artBox,userUnit:Et[G].userUnit,rootDictionaryObjId:De,resourceDictionaryObjId:Ie}));we(De,!0),ye("<</Type /Pages");var tt="/Kids [";for(ve=0;ve<Ke;ve++)tt+=He[ve]+" 0 R ";ye(tt+"]"),ye("/Count "+Ke),ye(">>"),ye("endobj"),ur.publish("postPutPages")},ct=function(G){ur.publish("putFont",{font:G,out:ye,newObject:Ir,putStream:st}),G.isAlreadyPutted!==!0&&(G.objectNumber=Ir(),ye("<<"),ye("/Type /Font"),ye("/BaseFont /"+i1(G.postScriptName)),ye("/Subtype /Type1"),typeof G.encoding=="string"&&ye("/Encoding /"+G.encoding),ye("/FirstChar 32"),ye("/LastChar 255"),ye(">>"),ye("endobj"))},Rt=function(G){G.objectNumber=Ir();var ve=[];ve.push({key:"Type",value:"/XObject"}),ve.push({key:"Subtype",value:"/Form"}),ve.push({key:"BBox",value:"["+[U(G.x),U(G.y),U(G.x+G.width),U(G.y+G.height)].join(" ")+"]"}),ve.push({key:"Matrix",value:"["+G.matrix.toString()+"]"});var He=G.pages[1].join(`
`);st({data:He,additionalKeyValues:ve,objectId:G.objectNumber}),ye("endobj")},Xt=function(G,ve){ve||(ve=21);var He=Ir(),tt=(function(lr,Hr){var Cr,kn=[],$r=1/(Hr-1);for(Cr=0;Cr<1;Cr+=$r)kn.push(Cr);if(kn.push(1),lr[0].offset!=0){var aa={offset:0,color:lr[0].color};lr.unshift(aa)}if(lr[lr.length-1].offset!=1){var _a={offset:1,color:lr[lr.length-1].color};lr.push(_a)}for(var jn="",Ar=0,qs=0;qs<kn.length;qs++){for(Cr=kn[qs];Cr>lr[Ar+1].offset;)Ar++;var In=lr[Ar].offset,os=(Cr-In)/(lr[Ar+1].offset-In),hi=lr[Ar].color,sl=lr[Ar+1].color;jn+=re(Math.round((1-os)*hi[0]+os*sl[0]).toString(16))+re(Math.round((1-os)*hi[1]+os*sl[1]).toString(16))+re(Math.round((1-os)*hi[2]+os*sl[2]).toString(16))}return jn.trim()})(G.colors,ve),gt=[];gt.push({key:"FunctionType",value:"0"}),gt.push({key:"Domain",value:"[0.0 1.0]"}),gt.push({key:"Size",value:"["+ve+"]"}),gt.push({key:"BitsPerSample",value:"8"}),gt.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),gt.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),st({data:tt,additionalKeyValues:gt,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:He}),ye("endobj"),G.objectNumber=Ir(),ye("<< /ShadingType "+G.type),ye("/ColorSpace /DeviceRGB");var Ut="/Coords ["+U(parseFloat(G.coords[0]))+" "+U(parseFloat(G.coords[1]))+" ";G.type===2?Ut+=U(parseFloat(G.coords[2]))+" "+U(parseFloat(G.coords[3])):Ut+=U(parseFloat(G.coords[2]))+" "+U(parseFloat(G.coords[3]))+" "+U(parseFloat(G.coords[4]))+" "+U(parseFloat(G.coords[5])),ye(Ut+="]"),G.matrix&&ye("/Matrix ["+G.matrix.toString()+"]"),ye("/Function "+He+" 0 R"),ye("/Extend [true true]"),ye(">>"),ye("endobj")},Jt=function(G,ve){var He=Nn(),tt=Ir();ve.push({resourcesOid:He,objectOid:tt}),G.objectNumber=tt;var gt=[];gt.push({key:"Type",value:"/Pattern"}),gt.push({key:"PatternType",value:"1"}),gt.push({key:"PaintType",value:"1"}),gt.push({key:"TilingType",value:"1"}),gt.push({key:"BBox",value:"["+G.boundingBox.map(U).join(" ")+"]"}),gt.push({key:"XStep",value:U(G.xStep)}),gt.push({key:"YStep",value:U(G.yStep)}),gt.push({key:"Resources",value:He+" 0 R"}),G.matrix&&gt.push({key:"Matrix",value:"["+G.matrix.toString()+"]"}),st({data:G.stream,additionalKeyValues:gt,objectId:G.objectNumber}),ye("endobj")},ir=function(G){for(var ve in G.objectNumber=Ir(),ye("<<"),G)switch(ve){case"opacity":ye("/ca "+H(G[ve]));break;case"stroke-opacity":ye("/CA "+H(G[ve]))}ye(">>"),ye("endobj")},mr=function(G){we(G.resourcesOid,!0),ye("<<"),ye("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),(function(){for(var ve in ye("/Font <<"),xt)xt.hasOwnProperty(ve)&&(p===!1||p===!0&&y.hasOwnProperty(ve))&&ye("/"+ve+" "+xt[ve].objectNumber+" 0 R");ye(">>")})(),(function(){if(Object.keys(vt).length>0){for(var ve in ye("/Shading <<"),vt)vt.hasOwnProperty(ve)&&vt[ve]instanceof Gf&&vt[ve].objectNumber>=0&&ye("/"+ve+" "+vt[ve].objectNumber+" 0 R");ur.publish("putShadingPatternDict"),ye(">>")}})(),(function(ve){if(Object.keys(vt).length>0){for(var He in ye("/Pattern <<"),vt)vt.hasOwnProperty(He)&&vt[He]instanceof g.TilingPattern&&vt[He].objectNumber>=0&&vt[He].objectNumber<ve&&ye("/"+He+" "+vt[He].objectNumber+" 0 R");ur.publish("putTilingPatternDict"),ye(">>")}})(G.objectOid),(function(){if(Object.keys(Yt).length>0){var ve;for(ve in ye("/ExtGState <<"),Yt)Yt.hasOwnProperty(ve)&&Yt[ve].objectNumber>=0&&ye("/"+ve+" "+Yt[ve].objectNumber+" 0 R");ur.publish("putGStateDict"),ye(">>")}})(),(function(){for(var ve in ye("/XObject <<"),Tr)Tr.hasOwnProperty(ve)&&Tr[ve].objectNumber>=0&&ye("/"+ve+" "+Tr[ve].objectNumber+" 0 R");ur.publish("putXobjectDict"),ye(">>")})(),ye(">>"),ye("endobj")},Sr=function(G){yr[G.fontName]=yr[G.fontName]||{},yr[G.fontName][G.fontStyle]=G.id},Pt=function(G,ve,He,tt,gt){var Ut={id:"F"+(Object.keys(xt).length+1).toString(10),postScriptName:G,fontName:ve,fontStyle:He,encoding:tt,isStandardFont:gt||!1,metadata:{}};return ur.publish("addFont",{font:Ut,instance:this}),xt[Ut.id]=Ut,Sr(Ut),Ut.id},Un=g.__private__.pdfEscape=g.pdfEscape=function(G,ve){return(function(He,tt){var gt,Ut,lr,Hr,Cr,kn,$r,aa,_a;if(lr=(tt=tt||{}).sourceEncoding||"Unicode",Cr=tt.outputEncoding,(tt.autoencode||Cr)&&xt[Gt].metadata&&xt[Gt].metadata[lr]&&xt[Gt].metadata[lr].encoding&&(Hr=xt[Gt].metadata[lr].encoding,!Cr&&xt[Gt].encoding&&(Cr=xt[Gt].encoding),!Cr&&Hr.codePages&&(Cr=Hr.codePages[0]),typeof Cr=="string"&&(Cr=Hr[Cr]),Cr)){for($r=!1,kn=[],gt=0,Ut=He.length;gt<Ut;gt++)(aa=Cr[He.charCodeAt(gt)])?kn.push(String.fromCharCode(aa)):kn.push(He[gt]),kn[gt].charCodeAt(0)>>8&&($r=!0);He=kn.join("")}for(gt=He.length;$r===void 0&&gt!==0;)He.charCodeAt(gt-1)>>8&&($r=!0),gt--;if(!$r)return He;for(kn=tt.noBOM?[]:[254,255],gt=0,Ut=He.length;gt<Ut;gt++){if((_a=(aa=He.charCodeAt(gt))>>8)>>8)throw new Error("Character at position "+gt+" of string '"+He+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");kn.push(_a),kn.push(aa-(_a<<8))}return String.fromCharCode.apply(void 0,kn)})(G,ve).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},en=g.__private__.beginPage=function(G){be[++Ke]=[],Et[Ke]={objId:0,contentsObjId:0,userUnit:Number(o),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(G[0]),topRightY:Number(G[1])}},tn(Ke),Me(be[ee])},Na=function(G,ve){var He,tt,gt;switch(r=ve||r,typeof G=="string"&&(He=S(G.toLowerCase()),Array.isArray(He)&&(tt=He[0],gt=He[1])),Array.isArray(G)&&(tt=G[0]*Vt,gt=G[1]*Vt),isNaN(tt)&&(tt=a[0],gt=a[1]),(tt>14400||gt>14400)&&(hs.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),tt=Math.min(14400,tt),gt=Math.min(14400,gt)),a=[tt,gt],r.substr(0,1)){case"l":gt>tt&&(a=[gt,tt]);break;case"p":tt>gt&&(a=[gt,tt])}en(a),Ll(kd),ye(al),Nd!==0&&ye(Nd+" J"),ms!==0&&ye(ms+" j"),ur.publish("addPage",{pageNumber:Ke})},Ci=function(G){G>0&&G<=Ke&&(be.splice(G,1),Et.splice(G,1),Ke--,ee>Ke&&(ee=Ke),this.setPage(ee))},tn=function(G){G>0&&G<=Ke&&(ee=G)},an=g.__private__.getNumberOfPages=g.getNumberOfPages=function(){return be.length-1},On=function(G,ve,He){var tt,gt=void 0;return He=He||{},G=G!==void 0?G:xt[Gt].fontName,ve=ve!==void 0?ve:xt[Gt].fontStyle,tt=G.toLowerCase(),yr[tt]!==void 0&&yr[tt][ve]!==void 0?gt=yr[tt][ve]:yr[G]!==void 0&&yr[G][ve]!==void 0?gt=yr[G][ve]:He.disableWarning===!1&&hs.warn("Unable to look up font label for font '"+G+"', '"+ve+"'. Refer to getFontList() for available fonts."),gt||He.noFallback||(gt=yr.times[ve])==null&&(gt=yr.times.normal),gt},ss=g.__private__.putInfo=function(){var G=Ir(),ve=function(tt){return tt};for(var He in f!==null&&(ve=kr.encryptor(G,0)),ye("<<"),ye("/Producer ("+Un(ve("jsPDF "+nn.version))+")"),rr)rr.hasOwnProperty(He)&&rr[He]&&ye("/"+He.substr(0,1).toUpperCase()+He.substr(1)+" ("+Un(ve(rr[He]))+")");ye("/CreationDate ("+Un(ve(se))+")"),ye(">>"),ye("endobj")},To=g.__private__.putCatalog=function(G){var ve=(G=G||{}).rootDictionaryObjId||De;switch(Ir(),ye("<<"),ye("/Type /Catalog"),ye("/Pages "+ve+" 0 R"),ot||(ot="fullwidth"),ot){case"fullwidth":ye("/OpenAction [3 0 R /FitH null]");break;case"fullheight":ye("/OpenAction [3 0 R /FitV null]");break;case"fullpage":ye("/OpenAction [3 0 R /Fit]");break;case"original":ye("/OpenAction [3 0 R /XYZ null null 1]");break;default:var He=""+ot;He.substr(He.length-1)==="%"&&(ot=parseInt(ot)/100),typeof ot=="number"&&ye("/OpenAction [3 0 R /XYZ null null "+H(ot)+"]")}switch(xr||(xr="continuous"),xr){case"continuous":ye("/PageLayout /OneColumn");break;case"single":ye("/PageLayout /SinglePage");break;case"two":case"twoleft":ye("/PageLayout /TwoColumnLeft");break;case"tworight":ye("/PageLayout /TwoColumnRight")}Dt&&ye("/PageMode /"+Dt),ur.publish("putCatalog"),ye(">>"),ye("endobj")},cn=g.__private__.putTrailer=function(){ye("trailer"),ye("<<"),ye("/Size "+(Q+1)),ye("/Root "+Q+" 0 R"),ye("/Info "+(Q-1)+" 0 R"),f!==null&&ye("/Encrypt "+kr.oid+" 0 R"),ye("/ID [ <"+ue+"> <"+ue+"> ]"),ye(">>")},ta=g.__private__.putHeader=function(){ye("%PDF-"+N),ye("%")},rl=g.__private__.putXRef=function(){var G="0000000000";ye("xref"),ye("0 "+(Q+1)),ye("0000000000 65535 f ");for(var ve=1;ve<=Q;ve++)typeof Ce[ve]=="function"?ye((G+Ce[ve]()).slice(-10)+" 00000 n "):Ce[ve]!==void 0?ye((G+Ce[ve]).slice(-10)+" 00000 n "):ye("0000000000 00000 n ")},lo=g.__private__.buildDocument=function(){var G;Q=0,ie=0,me=[],Ce=[],je=[],De=Nn(),Ie=Nn(),Me(me),ur.publish("buildDocument"),ta(),mt(),(function(){ur.publish("putAdditionalObjects");for(var He=0;He<je.length;He++){var tt=je[He];we(tt.objId,!0),ye(tt.content),ye("endobj")}ur.publish("postPutAdditionalObjects")})(),G=[],(function(){for(var He in xt)xt.hasOwnProperty(He)&&(p===!1||p===!0&&y.hasOwnProperty(He))&&ct(xt[He])})(),(function(){var He;for(He in Yt)Yt.hasOwnProperty(He)&&ir(Yt[He])})(),(function(){for(var He in Tr)Tr.hasOwnProperty(He)&&Rt(Tr[He])})(),(function(He){var tt;for(tt in vt)vt.hasOwnProperty(tt)&&(vt[tt]instanceof Gf?Xt(vt[tt]):vt[tt]instanceof d1&&Jt(vt[tt],He))})(G),ur.publish("putResources"),G.forEach(mr),mr({resourcesOid:Ie,objectOid:Number.MAX_SAFE_INTEGER}),ur.publish("postPutResources"),f!==null&&(kr.oid=Ir(),ye("<<"),ye("/Filter /Standard"),ye("/V "+kr.v),ye("/R "+kr.r),ye("/U <"+kr.toHexString(kr.U)+">"),ye("/O <"+kr.toHexString(kr.O)+">"),ye("/P "+kr.P),ye(">>"),ye("endobj")),ss(),To();var ve=ie;return rl(),cn(),ye("startxref"),ye(""+ve),ye("%%EOF"),Me(be[ee]),me.join(`
`)},pa=g.__private__.getBlob=function(G){return new Blob([lt(G)],{type:"application/pdf"})},Je=g.output=g.__private__.output=(An=function(G,ve){switch(typeof(ve=ve||{})=="string"?ve={filename:ve}:ve.filename=ve.filename||"generated.pdf",G){case void 0:return lo();case"save":g.save(ve.filename);break;case"arraybuffer":return lt(lo());case"blob":return pa(lo());case"bloburi":case"bloburl":if(Fn.URL!==void 0&&typeof Fn.URL.createObjectURL=="function")return Fn.URL&&Fn.URL.createObjectURL(pa(lo()))||void 0;hs.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var He="",tt=lo();try{He=qM(tt)}catch{He=qM(unescape(encodeURIComponent(tt)))}return"data:application/pdf;filename="+ve.filename+";base64,"+He;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Fn)==="[object Window]"){var gt="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Ut=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';ve.pdfObjectUrl&&(gt=ve.pdfObjectUrl,Ut="");var lr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+gt+'"'+Ut+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(ve)+");<\/script></body></html>",Hr=Fn.open();return Hr!==null&&Hr.document.write(lr),Hr}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Fn)==="[object Window]"){var Cr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(ve.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+ve.filename+'" width="500px" height="400px" /></body></html>',kn=Fn.open();if(kn!==null){kn.document.write(Cr);var $r=this;kn.document.documentElement.querySelector("#pdfViewer").onload=function(){kn.document.title=ve.filename,kn.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open($r.output("bloburl"))}}return kn}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Fn)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var aa='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",ve)+'"></iframe></body></html>',_a=Fn.open();if(_a!==null&&(_a.document.write(aa),_a.document.title=ve.filename),_a||typeof safari>"u")return _a;break;case"datauri":case"dataurl":return Fn.document.location.href=this.output("datauristring",ve);default:return null}},An.foo=function(){try{return An.apply(this,arguments)}catch(He){var G=He.stack||"";~G.indexOf(" at ")&&(G=G.split(" at ")[1]);var ve="Error in function "+G.split(`
`)[0].split("<")[0]+": "+He.message;if(!Fn.console)throw new Error(ve);Fn.console.error(ve,He),Fn.alert&&alert(ve)}},An.foo.bar=An,An.foo),dr=function(G){return Array.isArray(Br)===!0&&Br.indexOf(G)>-1};switch(n){case"pt":Vt=1;break;case"mm":Vt=72/25.4;break;case"cm":Vt=72/2.54;break;case"in":Vt=72;break;case"px":Vt=dr("px_scaling")==1?.75:96/72;break;case"pc":case"em":Vt=12;break;case"ex":Vt=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);Vt=n}var kr=null;xe(),ke();var pr=g.__private__.getPageInfo=g.getPageInfo=function(G){if(isNaN(G)||G%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Et[G].objId,pageNumber:G,pageContext:Et[G]}},dn=g.__private__.getPageInfoByObjId=function(G){if(isNaN(G)||G%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var ve in Et)if(Et[ve].objId===G)break;return pr(ve)},ht=g.__private__.getCurrentPageInfo=g.getCurrentPageInfo=function(){return{objId:Et[ee].objId,pageNumber:ee,pageContext:Et[ee]}};g.addPage=function(){return Na.apply(this,arguments),this},g.setPage=function(){return tn.apply(this,arguments),Me.call(this,be[ee]),this},g.insertPage=function(G){return this.addPage(),this.movePage(ee,G),this},g.movePage=function(G,ve){var He,tt;if(G>ve){He=be[G],tt=Et[G];for(var gt=G;gt>ve;gt--)be[gt]=be[gt-1],Et[gt]=Et[gt-1];be[ve]=He,Et[ve]=tt,this.setPage(ve)}else if(G<ve){He=be[G],tt=Et[G];for(var Ut=G;Ut<ve;Ut++)be[Ut]=be[Ut+1],Et[Ut]=Et[Ut+1];be[ve]=He,Et[ve]=tt,this.setPage(ve)}return this},g.deletePage=function(){return Ci.apply(this,arguments),this},g.__private__.text=g.text=function(G,ve,He,tt,gt){var Ut,lr,Hr,Cr,kn,$r,aa,_a,jn,Ar=(tt=tt||{}).scope||this;if(typeof G=="number"&&typeof ve=="number"&&(typeof He=="string"||Array.isArray(He))){var qs=He;He=ve,ve=G,G=qs}if(arguments[3]instanceof sr==0?(Hr=arguments[4],Cr=arguments[5],Ga(aa=arguments[3])==="object"&&aa!==null||(typeof Hr=="string"&&(Cr=Hr,Hr=null),typeof aa=="string"&&(Cr=aa,aa=null),typeof aa=="number"&&(Hr=aa,aa=null),tt={flags:aa,angle:Hr,align:Cr})):(z("The transform parameter of text() with a Matrix value"),jn=gt),isNaN(ve)||isNaN(He)||G==null)throw new Error("Invalid arguments passed to jsPDF.text");if(G.length===0)return Ar;var In,os="",hi=typeof tt.lineHeightFactor=="number"?tt.lineHeightFactor:co,sl=Ar.internal.scaleFactor;function Sl(zt){return zt=zt.split("	").join(Array(tt.TabLen||9).join(" ")),Un(zt,aa)}function Fc(zt){for(var qt,Ft=zt.concat(),sn=[],gn=Ft.length;gn--;)typeof(qt=Ft.shift())=="string"?sn.push(qt):Array.isArray(zt)&&(qt.length===1||qt[1]===void 0&&qt[2]===void 0)?sn.push(qt[0]):sn.push([qt[0],qt[1],qt[2]]);return sn}function Bc(zt,qt){var Ft;if(typeof zt=="string")Ft=qt(zt)[0];else if(Array.isArray(zt)){for(var sn,gn,Ya=zt.concat(),pi=[],Xs=Ya.length;Xs--;)typeof(sn=Ya.shift())=="string"?pi.push(qt(sn)[0]):Array.isArray(sn)&&typeof sn[0]=="string"&&(gn=qt(sn[0],sn[1],sn[2]),pi.push([gn[0],gn[1],gn[2]]));Ft=pi}return Ft}var Rl=!1,Fl=!0;if(typeof G=="string")Rl=!0;else if(Array.isArray(G)){var Uc=G.concat();lr=[];for(var zc,xs=Uc.length;xs--;)(typeof(zc=Uc.shift())!="string"||Array.isArray(zc)&&typeof zc[0]!="string")&&(Fl=!1);Rl=Fl}if(Rl===!1)throw new Error('Type of text must be string or Array. "'+G+'" is not recognized.');typeof G=="string"&&(G=G.match(/[\r?\n]/)?G.split(/\r\n|\r|\n/g):[G]);var Mo=nt/Ar.internal.scaleFactor,qc=Mo*(hi-1);switch(tt.baseline){case"bottom":He-=qc;break;case"top":He+=Mo-qc;break;case"hanging":He+=Mo-2*qc;break;case"middle":He+=Mo/2-qc}if(($r=tt.maxWidth||0)>0&&(typeof G=="string"?G=Ar.splitTextToSize(G,$r):Object.prototype.toString.call(G)==="[object Array]"&&(G=G.reduce(function(zt,qt){return zt.concat(Ar.splitTextToSize(qt,$r))},[]))),Ut={text:G,x:ve,y:He,options:tt,mutex:{pdfEscape:Un,activeFontKey:Gt,fonts:xt,activeFontSize:nt}},ur.publish("preProcessText",Ut),G=Ut.text,Hr=(tt=Ut.options).angle,jn instanceof sr==0&&Hr&&typeof Hr=="number"){Hr*=Math.PI/180,tt.rotationDirection===0&&(Hr=-Hr),D===E&&(Hr=-Hr);var Lo=Math.cos(Hr),Ro=Math.sin(Hr);jn=new sr(Lo,Ro,-Ro,Lo,0,0)}else Hr&&Hr instanceof sr&&(jn=Hr);D!==E||jn||(jn=qr),(kn=tt.charSpace||_l)!==void 0&&(os+=U(J(kn))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(_a=tt.horizontalScale)!==void 0&&(os+=U(100*_a)+` Tz
`),tt.lang;var Sa=-1,Bl=tt.renderingMode!==void 0?tt.renderingMode:tt.stroke,fi=Ar.internal.getCurrentPageInfo().pageContext;switch(Bl){case 0:case!1:case"fill":Sa=0;break;case 1:case!0:case"stroke":Sa=1;break;case 2:case"fillThenStroke":Sa=2;break;case 3:case"invisible":Sa=3;break;case 4:case"fillAndAddForClipping":Sa=4;break;case 5:case"strokeAndAddPathForClipping":Sa=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Sa=6;break;case 7:case"addToPathForClipping":Sa=7}var iu=fi.usedRenderingMode!==void 0?fi.usedRenderingMode:-1;Sa!==-1?os+=Sa+` Tr
`:iu!==-1&&(os+=`0 Tr
`),Sa!==-1&&(fi.usedRenderingMode=Sa),Cr=tt.align||"left";var ps,mo=nt*hi,xo=Ar.internal.pageSize.getWidth(),Qu=xt[Gt];kn=tt.charSpace||_l,$r=tt.maxWidth||0,aa=Object.assign({autoencode:!0,noBOM:!0},tt.flags);var Ul=[],mi=function(zt){return Ar.getStringUnitWidth(zt,{font:Qu,charSpace:kn,fontSize:nt,doKerning:!1})*nt/sl};if(Object.prototype.toString.call(G)==="[object Array]"){var il;lr=Fc(G),Cr!=="left"&&(ps=lr.map(mi));var xi,ll=0;if(Cr==="right"){ve-=ps[0],G=[],xs=lr.length;for(var zn=0;zn<xs;zn++)zn===0?(xi=hn(ve),il=la(He)):(xi=J(ll-ps[zn]),il=-mo),G.push([lr[zn],xi,il]),ll=ps[zn]}else if(Cr==="center"){ve-=ps[0]/2,G=[],xs=lr.length;for(var zl=0;zl<xs;zl++)zl===0?(xi=hn(ve),il=la(He)):(xi=J((ll-ps[zl])/2),il=-mo),G.push([lr[zl],xi,il]),ll=ps[zl]}else if(Cr==="left"){G=[],xs=lr.length;for(var pe=0;pe<xs;pe++)G.push(lr[pe])}else if(Cr==="justify"&&Qu.encoding==="Identity-H"){G=[],xs=lr.length,$r=$r!==0?$r:xo;for(var h=0,x=0;x<xs;x++)if(il=x===0?la(He):-mo,xi=x===0?hn(ve):h,x<xs-1){var b=J(($r-ps[x])/(lr[x].split(" ").length-1)),_=lr[x].split(" ");G.push([_[0]+" ",xi,il]),h=0;for(var j=1;j<_.length;j++){var A=(mi(_[j-1]+" "+_[j])-mi(_[j]))*sl+b;j==_.length-1?G.push([_[j],A,0]):G.push([_[j]+" ",A,0]),h-=A}}else G.push([lr[x],xi,il]);G.push(["",h,0])}else{if(Cr!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(G=[],xs=lr.length,$r=$r!==0?$r:xo,x=0;x<xs;x++){il=x===0?la(He):-mo,xi=x===0?hn(ve):0;var I=lr[x].split(" ").length-1,F=I>0?($r-ps[x])/I:0;x<xs-1?Ul.push(U(J(F))):Ul.push(0),G.push([lr[x],xi,il])}}}(typeof tt.R2L=="boolean"?tt.R2L:Kt)===!0&&(G=Bc(G,function(zt,qt,Ft){return[zt.split("").reverse().join(""),qt,Ft]})),Ut={text:G,x:ve,y:He,options:tt,mutex:{pdfEscape:Un,activeFontKey:Gt,fonts:xt,activeFontSize:nt}},ur.publish("postProcessText",Ut),G=Ut.text,In=Ut.mutex.isHex||!1;var X=xt[Gt].encoding;X!=="WinAnsiEncoding"&&X!=="StandardEncoding"||(G=Bc(G,function(zt,qt,Ft){return[Sl(zt),qt,Ft]})),lr=Fc(G),G=[];for(var ce,ge,Ae,qe=Array.isArray(lr[0])?1:0,Ye="",rt=function(zt,qt,Ft){var sn="";return Ft instanceof sr?(Ft=typeof tt.angle=="number"?Or(Ft,new sr(1,0,0,1,zt,qt)):Or(new sr(1,0,0,1,zt,qt),Ft),D===E&&(Ft=Or(new sr(1,0,0,-1,0,0),Ft)),sn=Ft.join(" ")+` Tm
`):sn=U(zt)+" "+U(qt)+` Td
`,sn},pt=0;pt<lr.length;pt++){switch(Ye="",qe){case 1:Ae=(In?"<":"(")+lr[pt][0]+(In?">":")"),ce=parseFloat(lr[pt][1]),ge=parseFloat(lr[pt][2]);break;case 0:Ae=(In?"<":"(")+lr[pt]+(In?">":")"),ce=hn(ve),ge=la(He)}Ul!==void 0&&Ul[pt]!==void 0&&(Ye=Ul[pt]+` Tw
`),pt===0?G.push(Ye+rt(ce,ge,jn)+Ae):qe===0?G.push(Ye+Ae):qe===1&&G.push(Ye+rt(ce,ge,jn)+Ae)}G=qe===0?G.join(` Tj
T* `):G.join(` Tj
`),G+=` Tj
`;var St=`BT
/`;return St+=Gt+" "+nt+` Tf
`,St+=U(nt*hi)+` TL
`,St+=Oo+`
`,St+=os,St+=G,ye(St+="ET"),y[Gt]=!0,Ar};var Be=g.__private__.clip=g.clip=function(G){return ye(G==="evenodd"?"W*":"W"),this};g.clipEvenOdd=function(){return Be("evenodd")},g.__private__.discardPath=g.discardPath=function(){return ye("n"),this};var vr=g.__private__.isValidStyle=function(G){var ve=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(G)!==-1&&(ve=!0),ve};g.__private__.setDefaultPathOperation=g.setDefaultPathOperation=function(G){return vr(G)&&(d=G),this};var Pn=g.__private__.getStyle=g.getStyle=function(G){var ve=d;switch(G){case"D":case"S":ve="S";break;case"F":ve="f";break;case"FD":case"DF":ve="B";break;case"f":case"f*":case"B":case"B*":ve=G}return ve},za=g.close=function(){return ye("h"),this};g.stroke=function(){return ye("S"),this},g.fill=function(G){return is("f",G),this},g.fillEvenOdd=function(G){return is("f*",G),this},g.fillStroke=function(G){return is("B",G),this},g.fillStrokeEvenOdd=function(G){return is("B*",G),this};var is=function(G,ve){Ga(ve)==="object"?Dr(ve,G):ye(G)},Ai=function(G){G===null||D===E&&G===void 0||(G=Pn(G),ye(G))};function Qn(G,ve,He,tt,gt){var Ut=new d1(ve||this.boundingBox,He||this.xStep,tt||this.yStep,this.gState,gt||this.matrix);Ut.stream=this.stream;var lr=G+"$$"+this.cloneIndex+++"$$";return Lr(lr,Ut),Ut}var Dr=function(G,ve){var He=$t[G.key],tt=vt[He];if(tt instanceof Gf)ye("q"),ye(na(ve)),tt.gState&&g.setGState(tt.gState),ye(G.matrix.toString()+" cm"),ye("/"+He+" sh"),ye("Q");else if(tt instanceof d1){var gt=new sr(1,0,0,-1,0,oc());G.matrix&&(gt=gt.multiply(G.matrix||qr),He=Qn.call(tt,G.key,G.boundingBox,G.xStep,G.yStep,gt).id),ye("q"),ye("/Pattern cs"),ye("/"+He+" scn"),tt.gState&&g.setGState(tt.gState),ye(ve),ye("Q")}},na=function(G){switch(G){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},oo=g.moveTo=function(G,ve){return ye(U(J(G))+" "+U(ae(ve))+" m"),this},wd=g.lineTo=function(G,ve){return ye(U(J(G))+" "+U(ae(ve))+" l"),this},kl=g.curveTo=function(G,ve,He,tt,gt,Ut){return ye([U(J(G)),U(ae(ve)),U(J(He)),U(ae(tt)),U(J(gt)),U(ae(Ut)),"c"].join(" ")),this};g.__private__.line=g.line=function(G,ve,He,tt,gt){if(isNaN(G)||isNaN(ve)||isNaN(He)||isNaN(tt)||!vr(gt))throw new Error("Invalid arguments passed to jsPDF.line");return D===O?this.lines([[He-G,tt-ve]],G,ve,[1,1],gt||"S"):this.lines([[He-G,tt-ve]],G,ve,[1,1]).stroke()},g.__private__.lines=g.lines=function(G,ve,He,tt,gt,Ut){var lr,Hr,Cr,kn,$r,aa,_a,jn,Ar,qs,In,os;if(typeof G=="number"&&(os=He,He=ve,ve=G,G=os),tt=tt||[1,1],Ut=Ut||!1,isNaN(ve)||isNaN(He)||!Array.isArray(G)||!Array.isArray(tt)||!vr(gt)||typeof Ut!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(oo(ve,He),lr=tt[0],Hr=tt[1],kn=G.length,qs=ve,In=He,Cr=0;Cr<kn;Cr++)($r=G[Cr]).length===2?(qs=$r[0]*lr+qs,In=$r[1]*Hr+In,wd(qs,In)):(aa=$r[0]*lr+qs,_a=$r[1]*Hr+In,jn=$r[2]*lr+qs,Ar=$r[3]*Hr+In,qs=$r[4]*lr+qs,In=$r[5]*Hr+In,kl(aa,_a,jn,Ar,qs,In));return Ut&&za(),Ai(gt),this},g.path=function(G){for(var ve=0;ve<G.length;ve++){var He=G[ve],tt=He.c;switch(He.op){case"m":oo(tt[0],tt[1]);break;case"l":wd(tt[0],tt[1]);break;case"c":kl.apply(this,tt);break;case"h":za()}}return this},g.__private__.rect=g.rect=function(G,ve,He,tt,gt){if(isNaN(G)||isNaN(ve)||isNaN(He)||isNaN(tt)||!vr(gt))throw new Error("Invalid arguments passed to jsPDF.rect");return D===O&&(tt=-tt),ye([U(J(G)),U(ae(ve)),U(J(He)),U(J(tt)),"re"].join(" ")),Ai(gt),this},g.__private__.triangle=g.triangle=function(G,ve,He,tt,gt,Ut,lr){if(isNaN(G)||isNaN(ve)||isNaN(He)||isNaN(tt)||isNaN(gt)||isNaN(Ut)||!vr(lr))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[He-G,tt-ve],[gt-He,Ut-tt],[G-gt,ve-Ut]],G,ve,[1,1],lr,!0),this},g.__private__.roundedRect=g.roundedRect=function(G,ve,He,tt,gt,Ut,lr){if(isNaN(G)||isNaN(ve)||isNaN(He)||isNaN(tt)||isNaN(gt)||isNaN(Ut)||!vr(lr))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Hr=4/3*(Math.SQRT2-1);return gt=Math.min(gt,.5*He),Ut=Math.min(Ut,.5*tt),this.lines([[He-2*gt,0],[gt*Hr,0,gt,Ut-Ut*Hr,gt,Ut],[0,tt-2*Ut],[0,Ut*Hr,-gt*Hr,Ut,-gt,Ut],[2*gt-He,0],[-gt*Hr,0,-gt,-Ut*Hr,-gt,-Ut],[0,2*Ut-tt],[0,-Ut*Hr,gt*Hr,-Ut,gt,-Ut]],G+gt,ve,[1,1],lr,!0),this},g.__private__.ellipse=g.ellipse=function(G,ve,He,tt,gt){if(isNaN(G)||isNaN(ve)||isNaN(He)||isNaN(tt)||!vr(gt))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Ut=4/3*(Math.SQRT2-1)*He,lr=4/3*(Math.SQRT2-1)*tt;return oo(G+He,ve),kl(G+He,ve-lr,G+Ut,ve-tt,G,ve-tt),kl(G-Ut,ve-tt,G-He,ve-lr,G-He,ve),kl(G-He,ve+lr,G-Ut,ve+tt,G,ve+tt),kl(G+Ut,ve+tt,G+He,ve+lr,G+He,ve),Ai(gt),this},g.__private__.circle=g.circle=function(G,ve,He,tt){if(isNaN(G)||isNaN(ve)||isNaN(He)||!vr(tt))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(G,ve,He,He,tt)},g.setFont=function(G,ve,He){return He&&(ve=R(ve,He)),Gt=On(G,ve,{disableWarning:!1}),this};var nl=g.__private__.getFont=g.getFont=function(){return xt[On.apply(g,arguments)]};g.__private__.getFontList=g.getFontList=function(){var G,ve,He={};for(G in yr)if(yr.hasOwnProperty(G))for(ve in He[G]=[],yr[G])yr[G].hasOwnProperty(ve)&&He[G].push(ve);return He},g.addFont=function(G,ve,He,tt,gt){var Ut=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Ut.indexOf(arguments[3])!==-1?gt=arguments[3]:arguments[3]&&Ut.indexOf(arguments[3])==-1&&(He=R(He,tt)),Pt.call(this,G,ve,He,gt=gt||"Identity-H")};var co,kd=e.lineWidth||.200025,Fr=g.__private__.getLineWidth=g.getLineWidth=function(){return kd},Ll=g.__private__.setLineWidth=g.setLineWidth=function(G){return kd=G,ye(U(J(G))+" w"),this};g.__private__.setLineDash=nn.API.setLineDash=nn.API.setLineDashPattern=function(G,ve){if(G=G||[],ve=ve||0,isNaN(ve)||!Array.isArray(G))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return G=G.map(function(He){return U(J(He))}).join(" "),ve=U(J(ve)),ye("["+G+"] "+ve+" d"),this};var uo=g.__private__.getLineHeight=g.getLineHeight=function(){return nt*co};g.__private__.getLineHeight=g.getLineHeight=function(){return nt*co};var un=g.__private__.setLineHeightFactor=g.setLineHeightFactor=function(G){return typeof(G=G||1.15)=="number"&&(co=G),this},oh=g.__private__.getLineHeightFactor=g.getLineHeightFactor=function(){return co};un(e.lineHeight);var hn=g.__private__.getHorizontalCoordinate=function(G){return J(G)},la=g.__private__.getVerticalCoordinate=function(G){return D===E?G:Et[ee].mediaBox.topRightY-Et[ee].mediaBox.bottomLeftY-J(G)},Zu=g.__private__.getHorizontalCoordinateString=g.getHorizontalCoordinateString=function(G){return U(hn(G))},ic=g.__private__.getVerticalCoordinateString=g.getVerticalCoordinateString=function(G){return U(la(G))},al=e.strokeColor||"0 G";g.__private__.getStrokeColor=g.getDrawColor=function(){return oe(al)},g.__private__.setStrokeColor=g.setDrawColor=function(G,ve,He,tt){return al=ne({ch1:G,ch2:ve,ch3:He,ch4:tt,pdfColorType:"draw",precision:2}),ye(al),this};var Nl=e.fillColor||"0 g";g.__private__.getFillColor=g.getFillColor=function(){return oe(Nl)},g.__private__.setFillColor=g.setFillColor=function(G,ve,He,tt){return Nl=ne({ch1:G,ch2:ve,ch3:He,ch4:tt,pdfColorType:"fill",precision:2}),ye(Nl),this};var Oo=e.textColor||"0 g",ho=g.__private__.getTextColor=g.getTextColor=function(){return oe(Oo)};g.__private__.setTextColor=g.setTextColor=function(G,ve,He,tt){return Oo=ne({ch1:G,ch2:ve,ch3:He,ch4:tt,pdfColorType:"text",precision:3}),this};var _l=e.charSpace,Po=g.__private__.getCharSpace=g.getCharSpace=function(){return parseFloat(_l||0)};g.__private__.setCharSpace=g.setCharSpace=function(G){if(isNaN(G))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return _l=G,this};var Nd=0;g.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},g.__private__.setLineCap=g.setLineCap=function(G){var ve=g.CapJoinStyles[G];if(ve===void 0)throw new Error("Line cap style of '"+G+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Nd=ve,ye(ve+" J"),this};var ms=0;g.__private__.setLineJoin=g.setLineJoin=function(G){var ve=g.CapJoinStyles[G];if(ve===void 0)throw new Error("Line join style of '"+G+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return ms=ve,ye(ve+" j"),this},g.__private__.setLineMiterLimit=g.__private__.setMiterLimit=g.setLineMiterLimit=g.setMiterLimit=function(G){if(G=G||0,isNaN(G))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return ye(U(J(G))+" M"),this},g.GState=Cw,g.setGState=function(G){(G=typeof G=="string"?Yt[Er[G]]:ui(null,G)).equals(wr)||(ye("/"+G.id+" gs"),wr=G)};var ui=function(G,ve){if(!G||!Er[G]){var He=!1;for(var tt in Yt)if(Yt.hasOwnProperty(tt)&&Yt[tt].equals(ve)){He=!0;break}if(He)ve=Yt[tt];else{var gt="GS"+(Object.keys(Yt).length+1).toString(10);Yt[gt]=ve,ve.id=gt}return G&&(Er[G]=ve.id),ur.publish("addGState",ve),ve}};g.addGState=function(G,ve){return ui(G,ve),this},g.saveGraphicsState=function(){return ye("q"),Ge.push({key:Gt,size:nt,color:Oo}),this},g.restoreGraphicsState=function(){ye("Q");var G=Ge.pop();return Gt=G.key,nt=G.size,Oo=G.color,wr=null,this},g.setCurrentTransformationMatrix=function(G){return ye(G.toString()+" cm"),this},g.comment=function(G){return ye("#"+G),this};var ls=function(G,ve){var He=G||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return He},set:function(Ut){isNaN(Ut)||(He=parseFloat(Ut))}});var tt=ve||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return tt},set:function(Ut){isNaN(Ut)||(tt=parseFloat(Ut))}});var gt="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return gt},set:function(Ut){gt=Ut.toString()}}),this},Io=function(G,ve,He,tt){ls.call(this,G,ve),this.type="rect";var gt=He||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return gt},set:function(lr){isNaN(lr)||(gt=parseFloat(lr))}});var Ut=tt||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Ut},set:function(lr){isNaN(lr)||(Ut=parseFloat(lr))}}),this},_d=function(){this.page=Ke,this.currentPage=ee,this.pages=be.slice(0),this.pagesContext=Et.slice(0),this.x=cr,this.y=br,this.matrix=ar,this.width=Rc(ee),this.height=Gn(ee),this.outputDestination=Ee,this.id="",this.objectNumber=-1};_d.prototype.restore=function(){Ke=this.page,ee=this.currentPage,Et=this.pagesContext,be=this.pages,cr=this.x,br=this.y,ar=this.matrix,Sd(ee,this.width),Do(ee,this.height),Ee=this.outputDestination};var Lc=function(G,ve,He,tt,gt){Pr.push(new _d),Ke=ee=0,be=[],cr=G,br=ve,ar=gt,en([He,tt])};for(var lc in g.beginFormObject=function(G,ve,He,tt,gt){return Lc(G,ve,He,tt,gt),this},g.endFormObject=function(G){return(function(ve){if(Zt[ve])Pr.pop().restore();else{var He=new _d,tt="Xo"+(Object.keys(Tr).length+1).toString(10);He.id=tt,Zt[ve]=tt,Tr[tt]=He,ur.publish("addFormObject",He),Pr.pop().restore()}})(G),this},g.doFormObject=function(G,ve){var He=Tr[Zt[G]];return ye("q"),ye(ve.toString()+" cm"),ye("/"+He.id+" Do"),ye("Q"),this},g.getFormObject=function(G){var ve=Tr[Zt[G]];return{x:ve.x,y:ve.y,width:ve.width,height:ve.height,matrix:ve.matrix}},g.save=function(G,ve){return G=G||"generated.pdf",(ve=ve||{}).returnPromise=ve.returnPromise||!1,ve.returnPromise===!1?($f(pa(lo()),G),typeof $f.unload=="function"&&Fn.setTimeout&&setTimeout($f.unload,911),this):new Promise(function(He,tt){try{var gt=$f(pa(lo()),G);typeof $f.unload=="function"&&Fn.setTimeout&&setTimeout($f.unload,911),He(gt)}catch(Ut){tt(Ut.message)}})},nn.API)nn.API.hasOwnProperty(lc)&&(lc==="events"&&nn.API.events.length?(function(G,ve){var He,tt,gt;for(gt=ve.length-1;gt!==-1;gt--)He=ve[gt][0],tt=ve[gt][1],G.subscribe.apply(G,[He].concat(typeof tt=="function"?[tt]:tt))})(ur,nn.API.events):g[lc]=nn.API[lc]);function Rc(G){return Et[G].mediaBox.topRightX-Et[G].mediaBox.bottomLeftX}function Sd(G,ve){Et[G].mediaBox.topRightX=ve+Et[G].mediaBox.bottomLeftX}function Gn(G){return Et[G].mediaBox.topRightY-Et[G].mediaBox.bottomLeftY}function Do(G,ve){Et[G].mediaBox.topRightY=ve+Et[G].mediaBox.bottomLeftY}var jd=g.getPageWidth=function(G){return Rc(G=G||ee)/Vt},fo=g.setPageWidth=function(G,ve){Sd(G,ve*Vt)},oc=g.getPageHeight=function(G){return Gn(G=G||ee)/Vt},Tt=g.setPageHeight=function(G,ve){Do(G,ve*Vt)};return g.internal={pdfEscape:Un,getStyle:Pn,getFont:nl,getFontSize:We,getCharSpace:Po,getTextColor:ho,getLineHeight:uo,getLineHeightFactor:oh,getLineWidth:Fr,write:at,getHorizontalCoordinate:hn,getVerticalCoordinate:la,getCoordinateString:Zu,getVerticalCoordinateString:ic,collections:{},newObject:Ir,newAdditionalObject:Ne,newObjectDeferred:Nn,newObjectDeferredBegin:we,getFilters:ze,putStream:st,events:ur,scaleFactor:Vt,pageSize:{getWidth:function(){return jd(ee)},setWidth:function(G){fo(ee,G)},getHeight:function(){return oc(ee)},setHeight:function(G){Tt(ee,G)}},encryptionOptions:f,encryption:kr,getEncryptor:function(G){return f!==null?kr.encryptor(G,0):function(ve){return ve}},output:Je,getNumberOfPages:an,pages:be,out:ye,f2:H,f3:K,getPageInfo:pr,getPageInfoByObjId:dn,getCurrentPageInfo:ht,getPDFVersion:w,Point:ls,Rectangle:Io,Matrix:sr,hasHotfix:dr},Object.defineProperty(g.internal.pageSize,"width",{get:function(){return jd(ee)},set:function(G){fo(ee,G)},enumerable:!0,configurable:!0}),Object.defineProperty(g.internal.pageSize,"height",{get:function(){return oc(ee)},set:function(G){Tt(ee,G)},enumerable:!0,configurable:!0}),(function(G){for(var ve=0,He=ut.length;ve<He;ve++){var tt=Pt.call(this,G[ve][0],G[ve][1],G[ve][2],ut[ve][3],!0);p===!1&&(y[tt]=!0);var gt=G[ve][0].split("-");Sr({id:tt,fontName:gt[0],fontStyle:gt[1]||""})}ur.publish("addFonts",{fonts:xt,dictionary:yr})}).call(g,ut),Gt="F1",Na(a,r),ur.publish("initialized"),g}s1.prototype.lsbFirstWord=function(e){return String.fromCharCode(255&e,e>>8&255,e>>16&255,e>>24&255)},s1.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},s1.prototype.hexToBytes=function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(String.fromCharCode(parseInt(e.substr(r,2),16)));return t.join("")},s1.prototype.processOwnerPassword=function(e,t){return XS(GS(t).substr(0,5),e)},s1.prototype.encryptor=function(e,t){var r=GS(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(n){return XS(r,n)}},Cw.prototype.equals=function(e){var t,r="id,objectNumber,equals";if(!e||Ga(e)!==Ga(this))return!1;var n=0;for(t in this)if(!(r.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;n++}for(t in e)e.hasOwnProperty(t)&&r.indexOf(t)<0&&n--;return n===0},nn.API={events:[]},nn.version="3.0.3";var ii=nn.API,AA=1,lx=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Jx=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Vn=function(e){return e.toFixed(2)},Mh=function(e){return e.toFixed(5)};ii.__acroform__={};var sc=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},WM=function(e){return e*AA},ju=function(e){var t=new AW,r=Yr.internal.getHeight(e)||0,n=Yr.internal.getWidth(e)||0;return t.BBox=[0,0,Number(Vn(n)),Number(Vn(r))],t},OEe=ii.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|1<<t},PEe=ii.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&~(1<<t)},IEe=ii.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return e&1<<t?1:0},ki=ii.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return IEe(e,t-1)},Ni=ii.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return OEe(e,t-1)},_i=ii.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return PEe(e,t-1)},DEe=ii.__acroform__.calculateCoordinates=function(e,t){var r=t.internal.getHorizontalCoordinate,n=t.internal.getVerticalCoordinate,a=e[0],i=e[1],l=e[2],o=e[3],c={};return c.lowerLeft_X=r(a)||0,c.lowerLeft_Y=n(i+o)||0,c.upperRight_X=r(a+l)||0,c.upperRight_Y=n(i)||0,[Number(Vn(c.lowerLeft_X)),Number(Vn(c.lowerLeft_Y)),Number(Vn(c.upperRight_X)),Number(Vn(c.upperRight_Y))]},MEe=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],r=e._V||e.DV,n=YS(e,r),a=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+a+" "+Vn(n.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(n.text),t.push("ET"),t.push("Q"),t.push("EMC");var i=ju(e);return i.scope=e.scope,i.stream=t.join(`
`),i}},YS=function(e,t){var r=e.fontSize===0?e.maxFontSize:e.fontSize,n={text:"",fontSize:""},a=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");a=e.multiline?a.map(function(H){return H.split(`
`)}):a.map(function(H){return[H]});var i=r,l=Yr.internal.getHeight(e)||0;l=l<0?-l:l;var o=Yr.internal.getWidth(e)||0;o=o<0?-o:o;var c=function(H,K,J){if(H+1<a.length){var ae=K+" "+a[H+1][0];return G2(ae,e,J).width<=o-4}return!1};i++;e:for(;i>0;){t="",i--;var d,f,p=G2("3",e,i).height,y=e.multiline?l-i:(l-p)/2,g=y+=2,N=0,w=0,k=0;if(i<=0){t=`(...) Tj
`,t+="% Width of Text: "+G2(t,e,i=12).width+", FieldWidth:"+o+`
`;break}for(var S="",O=0,E=0;E<a.length;E++)if(a.hasOwnProperty(E)){var D=!1;if(a[E].length!==1&&k!==a[E].length-1){if((p+2)*(O+2)+2>l)continue e;S+=a[E][k],D=!0,w=E,E--}else{S=(S+=a[E][k]+" ").substr(S.length-1)==" "?S.substr(0,S.length-1):S;var q=parseInt(E),W=c(q,S,i),R=E>=a.length-1;if(W&&!R){S+=" ",k=0;continue}if(W||R){if(R)w=q;else if(e.multiline&&(p+2)*(O+2)+2>l)continue e}else{if(!e.multiline||(p+2)*(O+2)+2>l)continue e;w=q}}for(var U="",z=N;z<=w;z++){var Z=a[z];if(e.multiline){if(z===w){U+=Z[k]+" ",k=(k+1)%Z.length;continue}if(z===N){U+=Z[Z.length-1]+" ";continue}}U+=Z[0]+" "}switch(U=U.substr(U.length-1)==" "?U.substr(0,U.length-1):U,f=G2(U,e,i).width,e.textAlign){case"right":d=o-f-2;break;case"center":d=(o-f)/2;break;default:d=2}t+=Vn(d)+" "+Vn(g)+` Td
`,t+="("+lx(U)+`) Tj
`,t+=-Vn(d)+` 0 Td
`,g=-(i+2),f=0,N=D?w:w+1,O++,S=""}break}return n.text=t,n.fontSize=i,n},G2=function(e,t,r){var n=t.scope.internal.getFont(t.fontName,t.fontStyle),a=t.scope.getStringUnitWidth(e,{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:t.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:a}},LEe={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},REe=function(e,t){var r={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(n){return n.type===r.type&&n.object===r.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(r)},FEe=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(au.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(LEe)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");AA=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new EW,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var a in n)if(n.hasOwnProperty(a)){var i=n[a];i.objId=void 0,i.hasAnnotation&&REe(i,r)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(r){(function(n,a){var i=!n;for(var l in n||(a.internal.newObjectDeferredBegin(a.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),a.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||a.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(l)){var o=n[l],c=[],d=o.Rect;if(o.Rect&&(o.Rect=DEe(o.Rect,a)),a.internal.newObjectDeferredBegin(o.objId,!0),o.DA=Yr.createDefaultAppearanceStream(o),Ga(o)==="object"&&typeof o.getKeyValueListForStream=="function"&&(c=o.getKeyValueListForStream()),o.Rect=d,o.hasAppearanceStream&&!o.appearanceStreamContent){var f=MEe(o);c.push({key:"AP",value:"<</N "+f+">>"}),a.internal.acroformPlugin.xForms.push(f)}if(o.appearanceStreamContent){var p="";for(var y in o.appearanceStreamContent)if(o.appearanceStreamContent.hasOwnProperty(y)){var g=o.appearanceStreamContent[y];if(p+="/"+y+" ",p+="<<",Object.keys(g).length>=1||Array.isArray(g)){for(var l in g)if(g.hasOwnProperty(l)){var N=g[l];typeof N=="function"&&(N=N.call(a,o)),p+="/"+l+" "+N+" ",a.internal.acroformPlugin.xForms.indexOf(N)>=0||a.internal.acroformPlugin.xForms.push(N)}}else typeof(N=g)=="function"&&(N=N.call(a,o)),p+="/"+l+" "+N,a.internal.acroformPlugin.xForms.indexOf(N)>=0||a.internal.acroformPlugin.xForms.push(N);p+=">>"}c.push({key:"AP",value:`<<
`+p+">>"})}a.internal.putStream({additionalKeyValues:c,objectId:o.objId}),a.internal.out("endobj")}i&&(function(w,k){for(var S in w)if(w.hasOwnProperty(S)){var O=S,E=w[S];k.internal.newObjectDeferredBegin(E.objId,!0),Ga(E)==="object"&&typeof E.putStream=="function"&&E.putStream(),delete w[O]}})(a.internal.acroformPlugin.xForms,a)})(r,e)}),e.internal.acroformPlugin.isInitialized=!0}},CW=ii.__acroform__.arrayToPdfArray=function(e,t,r){var n=function(l){return l};if(Array.isArray(e)){for(var a="[",i=0;i<e.length;i++)switch(i!==0&&(a+=" "),Ga(e[i])){case"boolean":case"number":case"object":a+=e[i].toString();break;case"string":e[i].substr(0,1)!=="/"?(t!==void 0&&r&&(n=r.internal.getEncryptor(t)),a+="("+lx(n(e[i].toString()))+")"):a+=e[i].toString()}return a+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},IN=function(e,t,r){var n=function(a){return a};return t!==void 0&&r&&(n=r.internal.getEncryptor(t)),(e=e||"").toString(),"("+lx(n(e))+")"},Ru=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Ru.prototype.toString=function(){return this.objId+" 0 R"},Ru.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},Ru.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(i){return i!="content"&&i!="appearanceStreamContent"&&i!="scope"&&i!="objId"&&i.substring(0,1)!="_"});for(var r in t)if(Object.getOwnPropertyDescriptor(this,t[r]).configurable===!1){var n=t[r],a=this[n];a&&(Array.isArray(a)?e.push({key:n,value:CW(a,this.objId,this.scope)}):a instanceof Ru?(a.scope=this.scope,e.push({key:n,value:a.objId+" 0 R"})):typeof a!="function"&&e.push({key:n,value:a}))}return e};var AW=function(){Ru.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){e=r.trim()},get:function(){return e||null}})};sc(AW,Ru);var EW=function(){Ru.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var r=function(n){return n};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+lx(r(e))+")"}},set:function(r){e=r}})};sc(EW,Ru);var au=function e(){Ru.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(S){if(isNaN(S))throw new Error('Invalid value "'+S+'" for attribute F supplied.');t=S}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!ki(t,3)},set:function(S){S?this.F=Ni(t,3):this.F=_i(t,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(S){if(isNaN(S))throw new Error('Invalid value "'+S+'" for attribute Ff supplied.');r=S}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(S){n=S!==void 0?S:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(S){n[0]=S}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(S){n[1]=S}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(S){n[2]=S}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(S){n[3]=S}});var a="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return a},set:function(S){switch(S){case"/Btn":case"/Tx":case"/Ch":case"/Sig":a=S;break;default:throw new Error('Invalid value "'+S+'" for attribute FT supplied.')}}});var i=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!i||i.length<1){if(this instanceof Aw)return;i="FieldObject"+e.FieldNum++}var S=function(O){return O};return this.scope&&(S=this.scope.internal.getEncryptor(this.objId)),"("+lx(S(i))+")"},set:function(S){i=S.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return i},set:function(S){i=S}});var l="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return l},set:function(S){l=S}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(S){o=S}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(S){c=S}});var d=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return d===void 0?50/AA:d},set:function(S){d=S}});var f="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return f},set:function(S){f=S}});var p="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!p||this instanceof Aw||this instanceof Nm))return IN(p,this.objId,this.scope)},set:function(S){S=S.toString(),p=S}});var y=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(y)return this instanceof gl==0?IN(y,this.objId,this.scope):y},set:function(S){S=S.toString(),y=this instanceof gl==0?S.substr(0,1)==="("?Jx(S.substr(1,S.length-2)):Jx(S):S}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof gl==1?Jx(y.substr(1,y.length-1)):y},set:function(S){S=S.toString(),y=this instanceof gl==1?"/"+S:S}});var g=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(g)return g},set:function(S){this.V=S}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(g)return this instanceof gl==0?IN(g,this.objId,this.scope):g},set:function(S){S=S.toString(),g=this instanceof gl==0?S.substr(0,1)==="("?Jx(S.substr(1,S.length-2)):Jx(S):S}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof gl==1?Jx(g.substr(1,g.length-1)):g},set:function(S){S=S.toString(),g=this instanceof gl==1?"/"+S:S}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var N,w=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return w},set:function(S){S=!!S,w=S}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(N)return N},set:function(S){N=S}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!ki(this.Ff,1)},set:function(S){S?this.Ff=Ni(this.Ff,1):this.Ff=_i(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!ki(this.Ff,2)},set:function(S){S?this.Ff=Ni(this.Ff,2):this.Ff=_i(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!ki(this.Ff,3)},set:function(S){S?this.Ff=Ni(this.Ff,3):this.Ff=_i(this.Ff,3)}});var k=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(k!==null)return k},set:function(S){if([0,1,2].indexOf(S)===-1)throw new Error('Invalid value "'+S+'" for attribute Q supplied.');k=S}}),Object.defineProperty(this,"textAlign",{get:function(){var S;switch(k){case 0:default:S="left";break;case 1:S="center";break;case 2:S="right"}return S},configurable:!0,enumerable:!0,set:function(S){switch(S){case"right":case 2:k=2;break;case"center":case 1:k=1;break;default:k=0}}})};sc(au,Ru);var y1=function(){au.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(r){e=r}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return CW(t,this.objId,this.scope)},set:function(r){var n,a;a=[],typeof(n=r)=="string"&&(a=(function(i,l,o){o||(o=1);for(var c,d=[];c=l.exec(i);)d.push(c[o]);return d})(n,/\((.*?)\)/g)),t=a}}),this.getOptions=function(){return t},this.setOptions=function(r){t=r,this.sort&&t.sort()},this.addOption=function(r){r=(r=r||"").toString(),t.push(r),this.sort&&t.sort()},this.removeOption=function(r,n){for(n=n||!1,r=(r=r||"").toString();t.indexOf(r)!==-1&&(t.splice(t.indexOf(r),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!ki(this.Ff,18)},set:function(r){r?this.Ff=Ni(this.Ff,18):this.Ff=_i(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!ki(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=Ni(this.Ff,19):this.Ff=_i(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!ki(this.Ff,20)},set:function(r){r?(this.Ff=Ni(this.Ff,20),t.sort()):this.Ff=_i(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!ki(this.Ff,22)},set:function(r){r?this.Ff=Ni(this.Ff,22):this.Ff=_i(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ki(this.Ff,23)},set:function(r){r?this.Ff=Ni(this.Ff,23):this.Ff=_i(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!ki(this.Ff,27)},set:function(r){r?this.Ff=Ni(this.Ff,27):this.Ff=_i(this.Ff,27)}}),this.hasAppearanceStream=!1};sc(y1,au);var w1=function(){y1.call(this),this.fontName="helvetica",this.combo=!1};sc(w1,y1);var k1=function(){w1.call(this),this.combo=!0};sc(k1,w1);var iy=function(){k1.call(this),this.edit=!0};sc(iy,k1);var gl=function(){au.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!ki(this.Ff,15)},set:function(r){r?this.Ff=Ni(this.Ff,15):this.Ff=_i(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!ki(this.Ff,16)},set:function(r){r?this.Ff=Ni(this.Ff,16):this.Ff=_i(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!ki(this.Ff,17)},set:function(r){r?this.Ff=Ni(this.Ff,17):this.Ff=_i(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!ki(this.Ff,26)},set:function(r){r?this.Ff=Ni(this.Ff,26):this.Ff=_i(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(i){return i};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var n,a=[];for(n in a.push("<<"),t)a.push("/"+n+" ("+lx(r(t[n]))+")");return a.push(">>"),a.join(`
`)}},set:function(r){Ga(r)==="object"&&(t=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(r){typeof r=="string"&&(t.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(r){e="/"+r}})};sc(gl,au);var ly=function(){gl.call(this),this.pushButton=!0};sc(ly,gl);var N1=function(){gl.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};sc(N1,gl);var Aw=function(){var e,t;au.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(a){e=a}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(a){t=a}});var r,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var a=function(o){return o};this.scope&&(a=this.scope.internal.getEncryptor(this.objId));var i,l=[];for(i in l.push("<<"),n)l.push("/"+i+" ("+lx(a(n[i]))+")");return l.push(">>"),l.join(`
`)},set:function(a){Ga(a)==="object"&&(n=a)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(a){typeof a=="string"&&(n.CA=a)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(a){r=a}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(a){r="/"+a}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Yr.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};sc(Aw,au),N1.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var r=this.Kids[t];r.appearanceStreamContent=e.createAppearanceStream(r.optionName),r.caption=e.getCA()}},N1.prototype.createOption=function(e){var t=new Aw;return t.Parent=this,t.optionName=e,this.Kids.push(t),BEe.call(this.scope,t),t};var oy=function(){gl.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Yr.CheckBox.createAppearanceStream()};sc(oy,gl);var Nm=function(){au.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!ki(this.Ff,13)},set:function(t){t?this.Ff=Ni(this.Ff,13):this.Ff=_i(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!ki(this.Ff,21)},set:function(t){t?this.Ff=Ni(this.Ff,21):this.Ff=_i(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ki(this.Ff,23)},set:function(t){t?this.Ff=Ni(this.Ff,23):this.Ff=_i(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!ki(this.Ff,24)},set:function(t){t?this.Ff=Ni(this.Ff,24):this.Ff=_i(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!ki(this.Ff,25)},set:function(t){t?this.Ff=Ni(this.Ff,25):this.Ff=_i(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!ki(this.Ff,26)},set:function(t){t?this.Ff=Ni(this.Ff,26):this.Ff=_i(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};sc(Nm,au);var cy=function(){Nm.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!ki(this.Ff,14)},set:function(e){e?this.Ff=Ni(this.Ff,14):this.Ff=_i(this.Ff,14)}}),this.password=!0};sc(cy,Nm);var Yr={CheckBox:{createAppearanceStream:function(){return{N:{On:Yr.CheckBox.YesNormal},D:{On:Yr.CheckBox.YesPushDown,Off:Yr.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=ju(e);t.scope=e.scope;var r=[],n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,a=e.scope.__private__.encodeColorString(e.color),i=YS(e,e.caption);return r.push("0.749023 g"),r.push("0 0 "+Vn(Yr.internal.getWidth(e))+" "+Vn(Yr.internal.getHeight(e))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+n+" "+Vn(i.fontSize)+" Tf "+a),r.push("BT"),r.push(i.text),r.push("ET"),r.push("Q"),r.push("EMC"),t.stream=r.join(`
`),t},YesNormal:function(e){var t=ju(e);t.scope=e.scope;var r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color),a=[],i=Yr.internal.getHeight(e),l=Yr.internal.getWidth(e),o=YS(e,e.caption);return a.push("1 g"),a.push("0 0 "+Vn(l)+" "+Vn(i)+" re"),a.push("f"),a.push("q"),a.push("0 0 1 rg"),a.push("0 0 "+Vn(l-1)+" "+Vn(i-1)+" re"),a.push("W"),a.push("n"),a.push("0 g"),a.push("BT"),a.push("/"+r+" "+Vn(o.fontSize)+" Tf "+n),a.push(o.text),a.push("ET"),a.push("Q"),t.stream=a.join(`
`),t},OffPushDown:function(e){var t=ju(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Vn(Yr.internal.getWidth(e))+" "+Vn(Yr.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:Yr.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=Yr.RadioButton.Circle.YesNormal,t.D[e]=Yr.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=ju(e);t.scope=e.scope;var r=[],n=Yr.internal.getWidth(e)<=Yr.internal.getHeight(e)?Yr.internal.getWidth(e)/4:Yr.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var a=Yr.internal.Bezier_C,i=Number((n*a).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+Mh(Yr.internal.getWidth(e)/2)+" "+Mh(Yr.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+i+" "+i+" "+n+" 0 "+n+" c"),r.push("-"+i+" "+n+" -"+n+" "+i+" -"+n+" 0 c"),r.push("-"+n+" -"+i+" -"+i+" -"+n+" 0 -"+n+" c"),r.push(i+" -"+n+" "+n+" -"+i+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=ju(e);t.scope=e.scope;var r=[],n=Yr.internal.getWidth(e)<=Yr.internal.getHeight(e)?Yr.internal.getWidth(e)/4:Yr.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),i=Number((a*Yr.internal.Bezier_C).toFixed(5)),l=Number((n*Yr.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Mh(Yr.internal.getWidth(e)/2)+" "+Mh(Yr.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+i+" "+i+" "+a+" 0 "+a+" c"),r.push("-"+i+" "+a+" -"+a+" "+i+" -"+a+" 0 c"),r.push("-"+a+" -"+i+" -"+i+" -"+a+" 0 -"+a+" c"),r.push(i+" -"+a+" "+a+" -"+i+" "+a+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+Mh(Yr.internal.getWidth(e)/2)+" "+Mh(Yr.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+l+" "+l+" "+n+" 0 "+n+" c"),r.push("-"+l+" "+n+" -"+n+" "+l+" -"+n+" 0 c"),r.push("-"+n+" -"+l+" -"+l+" -"+n+" 0 -"+n+" c"),r.push(l+" -"+n+" "+n+" -"+l+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(e){var t=ju(e);t.scope=e.scope;var r=[],n=Yr.internal.getWidth(e)<=Yr.internal.getHeight(e)?Yr.internal.getWidth(e)/4:Yr.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),i=Number((a*Yr.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Mh(Yr.internal.getWidth(e)/2)+" "+Mh(Yr.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+i+" "+i+" "+a+" 0 "+a+" c"),r.push("-"+i+" "+a+" -"+a+" "+i+" -"+a+" 0 c"),r.push("-"+a+" -"+i+" -"+i+" -"+a+" 0 -"+a+" c"),r.push(i+" -"+a+" "+a+" -"+i+" "+a+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:Yr.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=Yr.RadioButton.Cross.YesNormal,t.D[e]=Yr.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=ju(e);t.scope=e.scope;var r=[],n=Yr.internal.calculateCross(e);return r.push("q"),r.push("1 1 "+Vn(Yr.internal.getWidth(e)-2)+" "+Vn(Yr.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(Vn(n.x1.x)+" "+Vn(n.x1.y)+" m"),r.push(Vn(n.x2.x)+" "+Vn(n.x2.y)+" l"),r.push(Vn(n.x4.x)+" "+Vn(n.x4.y)+" m"),r.push(Vn(n.x3.x)+" "+Vn(n.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=ju(e);t.scope=e.scope;var r=Yr.internal.calculateCross(e),n=[];return n.push("0.749023 g"),n.push("0 0 "+Vn(Yr.internal.getWidth(e))+" "+Vn(Yr.internal.getHeight(e))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+Vn(Yr.internal.getWidth(e)-2)+" "+Vn(Yr.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(Vn(r.x1.x)+" "+Vn(r.x1.y)+" m"),n.push(Vn(r.x2.x)+" "+Vn(r.x2.y)+" l"),n.push(Vn(r.x4.x)+" "+Vn(r.x4.y)+" m"),n.push(Vn(r.x3.x)+" "+Vn(r.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(e){var t=ju(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Vn(Yr.internal.getWidth(e))+" "+Vn(Yr.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+r}};Yr.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=Yr.internal.getWidth(e),r=Yr.internal.getHeight(e),n=Math.min(t,r);return{x1:{x:(t-n)/2,y:(r-n)/2+n},x2:{x:(t-n)/2+n,y:(r-n)/2},x3:{x:(t-n)/2,y:(r-n)/2},x4:{x:(t-n)/2+n,y:(r-n)/2+n}}}},Yr.internal.getWidth=function(e){var t=0;return Ga(e)==="object"&&(t=WM(e.Rect[2])),t},Yr.internal.getHeight=function(e){var t=0;return Ga(e)==="object"&&(t=WM(e.Rect[3])),t};var BEe=ii.addField=function(e){if(FEe(this,e),!(e instanceof au))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};ii.AcroFormChoiceField=y1,ii.AcroFormListBox=w1,ii.AcroFormComboBox=k1,ii.AcroFormEditBox=iy,ii.AcroFormButton=gl,ii.AcroFormPushButton=ly,ii.AcroFormRadioButton=N1,ii.AcroFormCheckBox=oy,ii.AcroFormTextField=Nm,ii.AcroFormPasswordField=cy,ii.AcroFormAppearance=Yr,ii.AcroForm={ChoiceField:y1,ListBox:w1,ComboBox:k1,EditBox:iy,Button:gl,PushButton:ly,RadioButton:N1,CheckBox:oy,TextField:Nm,PasswordField:cy,Appearance:Yr},nn.AcroForm={ChoiceField:y1,ListBox:w1,ComboBox:k1,EditBox:iy,Button:gl,PushButton:ly,RadioButton:N1,CheckBox:oy,TextField:Nm,PasswordField:cy,Appearance:Yr};nn.AcroForm;function TW(e){return e.reduce(function(t,r,n){return t[r]=n,t},{})}(function(e){var t="addImage_";e.__addimage__={};var r="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},a=e.__addimage__.getImageFileTypeByImageData=function(H,K){var J,ae,se,ue,fe,ke=r;if((K=K||r)==="RGBA"||H.data!==void 0&&H.data instanceof Uint8ClampedArray&&"height"in H&&"width"in H)return"RGBA";if(W(H))for(fe in n)for(se=n[fe],J=0;J<se.length;J+=1){for(ue=!0,ae=0;ae<se[J].length;ae+=1)if(se[J][ae]!==void 0&&se[J][ae]!==H[ae]){ue=!1;break}if(ue===!0){ke=fe;break}}else for(fe in n)for(se=n[fe],J=0;J<se.length;J+=1){for(ue=!0,ae=0;ae<se[J].length;ae+=1)if(se[J][ae]!==void 0&&se[J][ae]!==H.charCodeAt(ae)){ue=!1;break}if(ue===!0){ke=fe;break}}return ke===r&&K!==r&&(ke=K),ke},i=function H(K){for(var J=this.internal.write,ae=this.internal.putStream,se=(0,this.internal.getFilters)();se.indexOf("FlateEncode")!==-1;)se.splice(se.indexOf("FlateEncode"),1);K.objectId=this.internal.newObject();var ue=[];if(ue.push({key:"Type",value:"/XObject"}),ue.push({key:"Subtype",value:"/Image"}),ue.push({key:"Width",value:K.width}),ue.push({key:"Height",value:K.height}),K.colorSpace===S.INDEXED?ue.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(K.palette.length/3-1)+" "+("sMask"in K&&K.sMask!==void 0?K.objectId+2:K.objectId+1)+" 0 R]"}):(ue.push({key:"ColorSpace",value:"/"+K.colorSpace}),K.colorSpace===S.DEVICE_CMYK&&ue.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),ue.push({key:"BitsPerComponent",value:K.bitsPerComponent}),"decodeParameters"in K&&K.decodeParameters!==void 0&&ue.push({key:"DecodeParms",value:"<<"+K.decodeParameters+">>"}),"transparency"in K&&Array.isArray(K.transparency)&&K.transparency.length>0){for(var fe="",ke=0,_e=K.transparency.length;ke<_e;ke++)fe+=K.transparency[ke]+" "+K.transparency[ke]+" ";ue.push({key:"Mask",value:"["+fe+"]"})}K.sMask!==void 0&&ue.push({key:"SMask",value:K.objectId+1+" 0 R"});var Le=K.filter!==void 0?["/"+K.filter]:void 0;if(ae({data:K.data,additionalKeyValues:ue,alreadyAppliedFilters:Le,objectId:K.objectId}),J("endobj"),"sMask"in K&&K.sMask!==void 0){var xe,B=(xe=K.sMaskBitsPerComponent)!==null&&xe!==void 0?xe:K.bitsPerComponent,ee={width:K.width,height:K.height,colorSpace:"DeviceGray",bitsPerComponent:B,data:K.sMask};"filter"in K&&(ee.decodeParameters="/Predictor ".concat(K.predictor," /Colors 1 /BitsPerComponent ").concat(B," /Columns ").concat(K.width),ee.filter=K.filter),H.call(this,ee)}if(K.colorSpace===S.INDEXED){var Y=this.internal.newObject();ae({data:U(new Uint8Array(K.palette)),objectId:Y}),J("endobj")}},l=function(){var H=this.internal.collections[t+"images"];for(var K in H)i.call(this,H[K])},o=function(){var H,K=this.internal.collections[t+"images"],J=this.internal.write;for(var ae in K)J("/I"+(H=K[ae]).index,H.objectId,"0","R")},c=function(){this.internal.collections[t+"images"]||(this.internal.collections[t+"images"]={},this.internal.events.subscribe("putResources",l),this.internal.events.subscribe("putXobjectDict",o))},d=function(){var H=this.internal.collections[t+"images"];return c.call(this),H},f=function(){return Object.keys(this.internal.collections[t+"images"]).length},p=function(H){return typeof e["process"+H.toUpperCase()]=="function"},y=function(H){return Ga(H)==="object"&&H.nodeType===1},g=function(H,K){if(H.nodeName==="IMG"&&H.hasAttribute("src")){var J=""+H.getAttribute("src");if(J.indexOf("data:image/")===0)return sy(unescape(J).split("base64,").pop());var ae=e.loadFile(J,!0);if(ae!==void 0)return ae}if(H.nodeName==="CANVAS"){if(H.width===0||H.height===0)throw new Error("Given canvas must have data. Canvas width: "+H.width+", height: "+H.height);var se;switch(K){case"PNG":se="image/png";break;case"WEBP":se="image/webp";break;default:se="image/jpeg"}return sy(H.toDataURL(se,1).split("base64,").pop())}},N=function(H){var K=this.internal.collections[t+"images"];if(K){for(var J in K)if(H===K[J].alias)return K[J]}},w=function(H,K,J){return H||K||(H=-96,K=-96),H<0&&(H=-1*J.width*72/H/this.internal.scaleFactor),K<0&&(K=-1*J.height*72/K/this.internal.scaleFactor),H===0&&(H=K*J.width/J.height),K===0&&(K=H*J.height/J.width),[H,K]},k=function(H,K,J,ae,se,ue){var fe=w.call(this,J,ae,se),ke=this.internal.getCoordinateString,_e=this.internal.getVerticalCoordinateString,Le=d.call(this);if(J=fe[0],ae=fe[1],Le[se.index]=se,ue){ue*=Math.PI/180;var xe=Math.cos(ue),B=Math.sin(ue),ee=function(re){return re.toFixed(4)},Y=[ee(xe),ee(B),ee(-1*B),ee(xe),0,0,"cm"]}this.internal.write("q"),ue?(this.internal.write([1,"0","0",1,ke(H),_e(K+ae),"cm"].join(" ")),this.internal.write(Y.join(" ")),this.internal.write([ke(J),"0","0",ke(ae),"0","0","cm"].join(" "))):this.internal.write([ke(J),"0","0",ke(ae),ke(H),_e(K+ae),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+se.index+" Do"),this.internal.write("Q")},S=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var O=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},E=e.__addimage__.sHashCode=function(H){var K,J,ae=0;if(typeof H=="string")for(J=H.length,K=0;K<J;K++)ae=(ae<<5)-ae+H.charCodeAt(K),ae|=0;else if(W(H))for(J=H.byteLength/2,K=0;K<J;K++)ae=(ae<<5)-ae+H[K],ae|=0;return ae},D=e.__addimage__.validateStringAsBase64=function(H){(H=H||"").toString().trim();var K=!0;return H.length===0&&(K=!1),H.length%4!=0&&(K=!1),/^[A-Za-z0-9+/]+$/.test(H.substr(0,H.length-2))===!1&&(K=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(H.substr(-2))===!1&&(K=!1),K},q=e.__addimage__.extractImageFromDataUrl=function(H){if(H==null||!(H=H.trim()).startsWith("data:"))return null;var K=H.indexOf(",");return K<0?null:H.substring(0,K).trim().endsWith("base64")?H.substring(K+1):null};e.__addimage__.isArrayBuffer=function(H){return H instanceof ArrayBuffer};var W=e.__addimage__.isArrayBufferView=function(H){return H instanceof Int8Array||H instanceof Uint8Array||H instanceof Uint8ClampedArray||H instanceof Int16Array||H instanceof Uint16Array||H instanceof Int32Array||H instanceof Uint32Array||H instanceof Float32Array||H instanceof Float64Array},R=e.__addimage__.binaryStringToUint8Array=function(H){for(var K=H.length,J=new Uint8Array(K),ae=0;ae<K;ae++)J[ae]=H.charCodeAt(ae);return J},U=e.__addimage__.arrayBufferToBinaryString=function(H){for(var K="",J=W(H)?H:new Uint8Array(H),ae=0;ae<J.length;ae+=8192)K+=String.fromCharCode.apply(null,J.subarray(ae,ae+8192));return K};e.addImage=function(){var H,K,J,ae,se,ue,fe,ke,_e;if(typeof arguments[1]=="number"?(K=r,J=arguments[1],ae=arguments[2],se=arguments[3],ue=arguments[4],fe=arguments[5],ke=arguments[6],_e=arguments[7]):(K=arguments[1],J=arguments[2],ae=arguments[3],se=arguments[4],ue=arguments[5],fe=arguments[6],ke=arguments[7],_e=arguments[8]),Ga(H=arguments[0])==="object"&&!y(H)&&"imageData"in H){var Le=H;H=Le.imageData,K=Le.format||K||r,J=Le.x||J||0,ae=Le.y||ae||0,se=Le.w||Le.width||se,ue=Le.h||Le.height||ue,fe=Le.alias||fe,ke=Le.compression||ke,_e=Le.rotation||Le.angle||_e}var xe=this.internal.getFilters();if(ke===void 0&&xe.indexOf("FlateEncode")!==-1&&(ke="SLOW"),isNaN(J)||isNaN(ae))throw new Error("Invalid coordinates passed to jsPDF.addImage");c.call(this);var B=z.call(this,H,K,fe,ke);return k.call(this,J,ae,se,ue,B,_e),this};var z=function(H,K,J,ae){var se,ue,fe;if(typeof H=="string"&&a(H)===r){H=unescape(H);var ke=Z(H,!1);(ke!==""||(ke=e.loadFile(H,!0))!==void 0)&&(H=ke)}if(y(H)&&(H=g(H,K)),K=a(H,K),!p(K))throw new Error("addImage does not support files of type '"+K+"', please ensure that a plugin for '"+K+"' support is added.");if(((fe=J)==null||fe.length===0)&&(J=(function(_e){return typeof _e=="string"||W(_e)?E(_e):W(_e.data)?E(_e.data):null})(H)),(se=N.call(this,J))||(H instanceof Uint8Array||K==="RGBA"||(ue=H,H=R(H)),se=this["process"+K.toUpperCase()](H,f.call(this),J,(function(_e){return _e&&typeof _e=="string"&&(_e=_e.toUpperCase()),_e in e.image_compression?_e:O.NONE})(ae),ue)),!se)throw new Error("An unknown error occurred whilst processing the image.");return se},Z=e.__addimage__.convertBase64ToBinaryString=function(H,K){K=typeof K!="boolean"||K;var J,ae="";if(typeof H=="string"){var se;J=(se=q(H))!==null&&se!==void 0?se:H;try{ae=sy(J)}catch(ue){if(K)throw D(J)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+ue.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return ae};e.getImageProperties=function(H){var K,J,ae="";if(y(H)&&(H=g(H)),typeof H=="string"&&a(H)===r&&((ae=Z(H,!1))===""&&(ae=e.loadFile(H)||""),H=ae),J=a(H),!p(J))throw new Error("addImage does not support files of type '"+J+"', please ensure that a plugin for '"+J+"' support is added.");if(H instanceof Uint8Array||(H=R(H)),!(K=this["process"+J.toUpperCase()](H)))throw new Error("An unknown error occurred whilst processing the image");return K.fileType=J,K}})(nn.API),(function(e){var t=function(r){if(r!==void 0&&r!="")return!0};nn.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(r){for(var n,a,i,l=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(r.objId),d=r.pageContext.annotations,f=!1,p=0;p<d.length&&!f;p++)switch((n=d[p]).type){case"link":(t(n.options.url)||t(n.options.pageNumber))&&(f=!0);break;case"reference":case"text":case"freetext":f=!0}if(f!=0){this.internal.write("/Annots [");for(var y=0;y<d.length;y++){n=d[y];var g=this.internal.pdfEscape,N=this.internal.getEncryptor(r.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var w=this.internal.newAdditionalObject(),k=this.internal.newAdditionalObject(),S=this.internal.getEncryptor(w.objId),O=n.title||"Note";i="<</Type /Annot /Subtype /Text "+(a="/Rect ["+l(n.bounds.x)+" "+o(n.bounds.y+n.bounds.h)+" "+l(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y)+"] ")+"/Contents ("+g(S(n.contents))+")",i+=" /Popup "+k.objId+" 0 R",i+=" /P "+c.objId+" 0 R",i+=" /T ("+g(S(O))+") >>",w.content=i;var E=w.objId+" 0 R";i="<</Type /Annot /Subtype /Popup "+(a="/Rect ["+l(n.bounds.x+30)+" "+o(n.bounds.y+n.bounds.h)+" "+l(n.bounds.x+n.bounds.w+30)+" "+o(n.bounds.y)+"] ")+" /Parent "+E,n.open&&(i+=" /Open true"),i+=" >>",k.content=i,this.internal.write(w.objId,"0 R",k.objId,"0 R");break;case"freetext":a="/Rect ["+l(n.bounds.x)+" "+o(n.bounds.y)+" "+l(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y+n.bounds.h)+"] ";var D=n.color||"#000000";i="<</Type /Annot /Subtype /FreeText "+a+"/Contents ("+g(N(n.contents))+")",i+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+D+")",i+=" /Border [0 0 0]",i+=" >>",this.internal.write(i);break;case"link":if(n.options.name){var q=this.annotations._nameMap[n.options.name];n.options.pageNumber=q.page,n.options.top=q.y}else n.options.top||(n.options.top=0);if(a="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",i="",n.options.url)i="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /A <</S /URI /URI ("+g(N(n.options.url))+") >>";else if(n.options.pageNumber)switch(i="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":i+=" /Fit]";break;case"FitH":i+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,i+=" /FitV "+n.options.left+"]";break;default:var W=o(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),i+=" /XYZ "+n.options.left+" "+W+" "+n.options.zoom+"]"}i!=""&&(i+=" >>",this.internal.write(i))}}this.internal.write("]")}}]),e.createAnnotation=function(r){var n=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":n.pageContext.annotations.push(r)}},e.link=function(r,n,a,i,l){var o=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,d=this.internal.getVerticalCoordinateString;o.pageContext.annotations.push({finalBounds:{x:c(r),y:d(n),w:c(r+a),h:d(n+i)},options:l,type:"link"})},e.textWithLink=function(r,n,a,i){var l,o,c=this.getTextWidth(r),d=this.internal.getLineHeight()/this.internal.scaleFactor;if(i.maxWidth!==void 0){o=i.maxWidth;var f=this.splitTextToSize(r,o).length;l=Math.ceil(d*f)}else o=c,l=d;return this.text(r,n,a,i),a+=.2*d,i.align==="center"&&(n-=c/2),i.align==="right"&&(n-=c),this.link(n,a-d,o,l,i),c},e.getTextWidth=function(r){var n=this.internal.getFontSize();return this.getStringUnitWidth(r)*n/this.internal.scaleFactor}})(nn.API),(function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},a=[1570,1571,1573,1575];e.__arabicParser__={};var i=e.__arabicParser__.isInArabicSubstitutionA=function(w){return t[w.charCodeAt(0)]!==void 0},l=e.__arabicParser__.isArabicLetter=function(w){return typeof w=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(w)},o=e.__arabicParser__.isArabicEndLetter=function(w){return l(w)&&i(w)&&t[w.charCodeAt(0)].length<=2},c=e.__arabicParser__.isArabicAlfLetter=function(w){return l(w)&&a.indexOf(w.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(w){return l(w)&&i(w)&&t[w.charCodeAt(0)].length>=1};var d=e.__arabicParser__.arabicLetterHasFinalForm=function(w){return l(w)&&i(w)&&t[w.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(w){return l(w)&&i(w)&&t[w.charCodeAt(0)].length>=3};var f=e.__arabicParser__.arabicLetterHasMedialForm=function(w){return l(w)&&i(w)&&t[w.charCodeAt(0)].length==4},p=e.__arabicParser__.resolveLigatures=function(w){var k=0,S=r,O="",E=0;for(k=0;k<w.length;k+=1)S[w.charCodeAt(k)]!==void 0?(E++,typeof(S=S[w.charCodeAt(k)])=="number"&&(O+=String.fromCharCode(S),S=r,E=0),k===w.length-1&&(S=r,O+=w.charAt(k-(E-1)),k-=E-1,E=0)):(S=r,O+=w.charAt(k-E),k-=E,E=0);return O};e.__arabicParser__.isArabicDiacritic=function(w){return w!==void 0&&n[w.charCodeAt(0)]!==void 0};var y=e.__arabicParser__.getCorrectForm=function(w,k,S){return l(w)?i(w)===!1?-1:!d(w)||!l(k)&&!l(S)||!l(S)&&o(k)||o(w)&&!l(k)||o(w)&&c(k)||o(w)&&o(k)?0:f(w)&&l(k)&&!o(k)&&l(S)&&d(S)?3:o(w)||!l(S)?1:2:-1},g=function(w){var k=0,S=0,O=0,E="",D="",q="",W=(w=w||"").split("\\s+"),R=[];for(k=0;k<W.length;k+=1){for(R.push(""),S=0;S<W[k].length;S+=1)E=W[k][S],D=W[k][S-1],q=W[k][S+1],l(E)?(O=y(E,D,q),R[k]+=O!==-1?String.fromCharCode(t[E.charCodeAt(0)][O]):E):R[k]+=E;R[k]=p(R[k])}return R.join(" ")},N=e.__arabicParser__.processArabic=e.processArabic=function(){var w,k=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,S=[];if(Array.isArray(k)){var O=0;for(S=[],O=0;O<k.length;O+=1)Array.isArray(k[O])?S.push([g(k[O][0]),k[O][1],k[O][2]]):S.push([g(k[O])]);w=S}else w=g(k);return typeof arguments[0]=="string"?w:(arguments[0].text=w,arguments[0])};e.events.push(["preProcessText",N])})(nn.API),nn.API.autoPrint=function(e){var t;return(e=e||{}).variant=e.variant||"non-conform",e.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})),this},(function(e){var t=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(o){r=o}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(o){n=isNaN(o)||Number.isInteger(o)===!1||o<0?150:o,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var a=300;Object.defineProperty(this,"height",{get:function(){return a},set:function(o){a=isNaN(o)||Number.isInteger(o)===!1||o<0?300:o,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=a+1)}});var i=[];Object.defineProperty(this,"childNodes",{get:function(){return i},set:function(o){i=o}});var l={};Object.defineProperty(this,"style",{get:function(){return l},set:function(o){l=o}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(r,n){var a;if((r=r||"2d")!=="2d")return null;for(a in n)this.pdf.context2d.hasOwnProperty(a)&&(this.pdf.context2d[a]=n[a]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])})(nn.API),(function(e){var t={left:0,top:0,bottom:0,right:0},r=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),a.call(this))},a=function(){this.internal.__cell__.lastCell=new i,this.internal.__cell__.pages=1},i=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(w){c=w}});var d=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return d},set:function(w){d=w}});var f=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return f},set:function(w){f=w}});var p=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return p},set:function(w){p=w}});var y=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return y},set:function(w){y=w}});var g=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return g},set:function(w){g=w}});var N=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return N},set:function(w){N=w}}),this};i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},i.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(c){return n.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},e.getTextDimensions=function(c,d){n.call(this);var f=(d=d||{}).fontSize||this.getFontSize(),p=d.font||this.getFont(),y=d.scaleFactor||this.internal.scaleFactor,g=0,N=0,w=0,k=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var S=d.maxWidth;S>0?typeof c=="string"?c=this.splitTextToSize(c,S):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(E,D){return E.concat(k.splitTextToSize(D,S))},[])):c=Array.isArray(c)?c:[c];for(var O=0;O<c.length;O++)g<(w=this.getStringUnitWidth(c[O],{font:p})*f)&&(g=w);return g!==0&&(N=c.length),{w:g/=y,h:Math.max((N*f*this.getLineHeightFactor()-f*(this.getLineHeightFactor()-1))/y,0)}},e.cellAddPage=function(){n.call(this),this.addPage();var c=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new i(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var l=e.cell=function(){var c;c=arguments[0]instanceof i?arguments[0]:new i(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),n.call(this);var d=this.internal.__cell__.lastCell,f=this.internal.__cell__.padding,p=this.internal.__cell__.margins||t,y=this.internal.__cell__.tableHeaderRow,g=this.internal.__cell__.printHeaders;return d.lineNumber!==void 0&&(d.lineNumber===c.lineNumber?(c.x=(d.x||0)+(d.width||0),c.y=d.y||0):d.y+d.height+c.height+p.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=p.top,g&&y&&(this.printHeaderRow(c.lineNumber,!0),c.y+=y[0].height)):c.y=d.y+d.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,r===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-f,c.y+f,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+f,{align:"center",baseline:"top",maxWidth:c.width-f-f}):this.text(c.text,c.x+f,c.y+f,{align:"left",baseline:"top",maxWidth:c.width-f-f})),this.internal.__cell__.lastCell=c,this};e.table=function(c,d,f,p,y){if(n.call(this),!f)throw new Error("No data for PDF table.");var g,N,w,k,S=[],O=[],E=[],D={},q={},W=[],R=[],U=(y=y||{}).autoSize||!1,z=y.printHeaders!==!1,Z=y.css&&y.css["font-size"]!==void 0?16*y.css["font-size"]:y.fontSize||12,H=y.margins||Object.assign({width:this.getPageWidth()},t),K=typeof y.padding=="number"?y.padding:3,J=y.headerBackgroundColor||"#c8c8c8",ae=y.headerTextColor||"#000";if(a.call(this),this.internal.__cell__.printHeaders=z,this.internal.__cell__.margins=H,this.internal.__cell__.table_font_size=Z,this.internal.__cell__.padding=K,this.internal.__cell__.headerBackgroundColor=J,this.internal.__cell__.headerTextColor=ae,this.setFontSize(Z),p==null)O=S=Object.keys(f[0]),E=S.map(function(){return"left"});else if(Array.isArray(p)&&Ga(p[0])==="object")for(S=p.map(function(Le){return Le.name}),O=p.map(function(Le){return Le.prompt||Le.name||""}),E=p.map(function(Le){return Le.align||"left"}),g=0;g<p.length;g+=1)q[p[g].name]=.7499990551181103*p[g].width;else Array.isArray(p)&&typeof p[0]=="string"&&(O=S=p,E=S.map(function(){return"left"}));if(U||Array.isArray(p)&&typeof p[0]=="string")for(g=0;g<S.length;g+=1){for(D[k=S[g]]=f.map(function(Le){return Le[k]}),this.setFont(void 0,"bold"),W.push(this.getTextDimensions(O[g],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),N=D[k],this.setFont(void 0,"normal"),w=0;w<N.length;w+=1)W.push(this.getTextDimensions(N[w],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);q[k]=Math.max.apply(null,W)+K+K,W=[]}if(z){var se={};for(g=0;g<S.length;g+=1)se[S[g]]={},se[S[g]].text=O[g],se[S[g]].align=E[g];var ue=o.call(this,se,q);R=S.map(function(Le){return new i(c,d,q[Le],ue,se[Le].text,void 0,se[Le].align)}),this.setTableHeaderRow(R),this.printHeaderRow(1,!1)}var fe=p.reduce(function(Le,xe){return Le[xe.name]=xe.align,Le},{});for(g=0;g<f.length;g+=1){"rowStart"in y&&y.rowStart instanceof Function&&y.rowStart({row:g,data:f[g]},this);var ke=o.call(this,f[g],q);for(w=0;w<S.length;w+=1){var _e=f[g][S[w]];"cellStart"in y&&y.cellStart instanceof Function&&y.cellStart({row:g,col:w,data:_e},this),l.call(this,new i(c,d,q[S[w]],ke,_e,g+2,fe[S[w]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=d,this};var o=function(c,d){var f=this.internal.__cell__.padding,p=this.internal.__cell__.table_font_size,y=this.internal.scaleFactor;return Object.keys(c).map(function(g){var N=c[g];return this.splitTextToSize(N.hasOwnProperty("text")?N.text:N,d[g]-f-f)},this).map(function(g){return this.getLineHeightFactor()*g.length*p/y+f+f},this).reduce(function(g,N){return Math.max(g,N)},0)};e.setTableHeaderRow=function(c){n.call(this),this.internal.__cell__.tableHeaderRow=c},e.printHeaderRow=function(c,d){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var f;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var p=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new i(p[0],p[1],p[2],p[3],void 0,-1)}this.setFont(void 0,"bold");for(var y=[],g=0;g<this.internal.__cell__.tableHeaderRow.length;g+=1){f=this.internal.__cell__.tableHeaderRow[g].clone(),d&&(f.y=this.internal.__cell__.margins.top||0,y.push(f)),f.lineNumber=c;var N=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),l.call(this,f),this.setTextColor(N)}y.length>0&&this.setTableHeaderRow(y),this.setFont(void 0,"normal"),r=!1}})(nn.API);var OW={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},PW=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],ZS=TW(PW),IW=[100,200,300,400,500,600,700,800,900],UEe=TW(IW);function DN(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),r=(function(i){return OW[i=i||"normal"]?i:"normal"})(e.style),n=(function(i){return i?typeof i=="number"?i>=100&&i<=900&&i%100==0?i:400:/^\d00$/.test(i)?parseInt(i):i==="bold"?700:400:400})(e.weight),a=(function(i){return typeof ZS[i=i||"normal"]=="number"?i:"normal"})(e.stretch);return{family:t,style:r,weight:n,stretch:a,src:e.src||[],ref:e.ref||{name:t,style:[a,r,n].join(" ")}}}function KM(e,t,r,n){var a;for(a=r;a>=0&&a<t.length;a+=n)if(e[t[a]])return e[t[a]];for(a=r;a>=0&&a<t.length;a-=n)if(e[t[a]])return e[t[a]]}var zEe={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},GM={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function XM(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function YM(e){return e.trimLeft()}function qEe(e,t){for(var r=0;r<e.length;){if(e.charAt(r)===t)return[e.substring(0,r),e.substring(r+1)];r+=1}return null}function HEe(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var X2,ZM,QM,e1,Y2,JM,eL,tL,MN=["times"];function rL(e,t,r,n,a){var i=4,l=aL;switch(a){case nn.API.image_compression.FAST:i=1,l=nL;break;case nn.API.image_compression.MEDIUM:i=6,l=sL;break;case nn.API.image_compression.SLOW:i=9,l=iL}e=(function(c,d,f,p){for(var y,g=c.length/d,N=new Uint8Array(c.length+g),w=[$Ee,nL,aL,sL,iL],k=0;k<g;k+=1){var S=k*d,O=c.subarray(S,S+d);if(p)N.set(p(O,f,y),S+k);else{for(var E=w.length,D=[],q=0;q<E;q+=1)D[q]=w[q](O,f,y);var W=WEe(D.concat());N.set(D[W],S+k)}y=O}return N})(e,t,Math.ceil(r*n/8),l);var o=$S(e,{level:i});return nn.API.__addimage__.arrayBufferToBinaryString(o)}function $Ee(e){var t=Array.apply([],e);return t.unshift(0),t}function nL(e,t){var r=e.length,n=[];n[0]=1;for(var a=0;a<r;a+=1){var i=e[a-t]||0;n[a+1]=e[a]-i+256&255}return n}function aL(e,t,r){var n=e.length,a=[];a[0]=2;for(var i=0;i<n;i+=1){var l=r&&r[i]||0;a[i+1]=e[i]-l+256&255}return a}function sL(e,t,r){var n=e.length,a=[];a[0]=3;for(var i=0;i<n;i+=1){var l=e[i-t]||0,o=r&&r[i]||0;a[i+1]=e[i]+256-(l+o>>>1)&255}return a}function iL(e,t,r){var n=e.length,a=[];a[0]=4;for(var i=0;i<n;i+=1){var l=VEe(e[i-t]||0,r&&r[i]||0,r&&r[i-t]||0);a[i+1]=e[i]-l+256&255}return a}function VEe(e,t,r){if(e===t&&t===r)return e;var n=Math.abs(t-r),a=Math.abs(e-r),i=Math.abs(e+t-r-r);return n<=a&&n<=i?e:a<=i?t:r}function WEe(e){var t=e.map(function(r){return r.reduce(function(n,a){return n+Math.abs(a)},0)});return t.indexOf(Math.min.apply(null,t))}function LN(e,t,r){var n=t*r,a=Math.floor(n/8),i=16-(n-8*a+r),l=(1<<r)-1;return DW(e,a)>>i&l}function lL(e,t,r,n){var a=r*n,i=Math.floor(a/8),l=16-(a-8*i+n),o=(1<<n)-1,c=(t&o)<<l;(function(d,f,p){if(f+1<d.byteLength)d.setUint16(f,p,!1);else{var y=p>>8&255;d.setUint8(f,y)}})(e,i,DW(e,i)&~(o<<l)&65535|c)}function DW(e,t){return t+1<e.byteLength?e.getUint16(t,!1):e.getUint8(t)<<8}function KEe(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=e[t++]|e[t++]<<8,n=e[t++]|e[t++]<<8,a=e[t++],i=a>>7,l=1<<1+(7&a);e[t++],e[t++];var o=null,c=null;i&&(o=t,c=l,t+=3*l);var d=!0,f=[],p=0,y=null,g=0,N=null;for(this.width=r,this.height=n;d&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,N=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((H=e[t++])>=0))throw Error("Invalid block size");if(H===0)break;t+=H}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var w=e[t++];p=e[t++]|e[t++]<<8,y=e[t++],1&w||(y=null),g=w>>2&7,t++;break;case 254:for(;;){if(!((H=e[t++])>=0))throw Error("Invalid block size");if(H===0)break;t+=H}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var k=e[t++]|e[t++]<<8,S=e[t++]|e[t++]<<8,O=e[t++]|e[t++]<<8,E=e[t++]|e[t++]<<8,D=e[t++],q=D>>6&1,W=1<<1+(7&D),R=o,U=c,z=!1;D>>7&&(z=!0,R=t,U=W,t+=3*W);var Z=t;for(t++;;){var H;if(!((H=e[t++])>=0))throw Error("Invalid block size");if(H===0)break;t+=H}f.push({x:k,y:S,width:O,height:E,has_local_palette:z,palette_offset:R,palette_size:U,data_offset:Z,data_length:t-Z,transparent_index:y,interlaced:!!q,delay:p,disposal:g});break;case 59:d=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return f.length},this.loopCount=function(){return N},this.frameInfo=function(K){if(K<0||K>=f.length)throw new Error("Frame index out of range.");return f[K]},this.decodeAndBlitFrameBGRA=function(K,J){var ae=this.frameInfo(K),se=ae.width*ae.height,ue=new Uint8Array(se);oL(e,ae.data_offset,ue,se);var fe=ae.palette_offset,ke=ae.transparent_index;ke===null&&(ke=256);var _e=ae.width,Le=r-_e,xe=_e,B=4*(ae.y*r+ae.x),ee=4*((ae.y+ae.height)*r+ae.x),Y=B,re=4*Le;ae.interlaced===!0&&(re+=4*r*7);for(var Q=8,Ce=0,me=ue.length;Ce<me;++Ce){var ie=ue[Ce];if(xe===0&&(xe=_e,(Y+=re)>=ee&&(re=4*Le+4*r*(Q-1),Y=B+(_e+Le)*(Q<<1),Q>>=1)),ie===ke)Y+=4;else{var je=e[fe+3*ie],be=e[fe+3*ie+1],le=e[fe+3*ie+2];J[Y++]=le,J[Y++]=be,J[Y++]=je,J[Y++]=255}--xe}},this.decodeAndBlitFrameRGBA=function(K,J){var ae=this.frameInfo(K),se=ae.width*ae.height,ue=new Uint8Array(se);oL(e,ae.data_offset,ue,se);var fe=ae.palette_offset,ke=ae.transparent_index;ke===null&&(ke=256);var _e=ae.width,Le=r-_e,xe=_e,B=4*(ae.y*r+ae.x),ee=4*((ae.y+ae.height)*r+ae.x),Y=B,re=4*Le;ae.interlaced===!0&&(re+=4*r*7);for(var Q=8,Ce=0,me=ue.length;Ce<me;++Ce){var ie=ue[Ce];if(xe===0&&(xe=_e,(Y+=re)>=ee&&(re=4*Le+4*r*(Q-1),Y=B+(_e+Le)*(Q<<1),Q>>=1)),ie===ke)Y+=4;else{var je=e[fe+3*ie],be=e[fe+3*ie+1],le=e[fe+3*ie+2];J[Y++]=je,J[Y++]=be,J[Y++]=le,J[Y++]=255}--xe}}}function oL(e,t,r,n){for(var a=e[t++],i=1<<a,l=i+1,o=l+1,c=a+1,d=(1<<c)-1,f=0,p=0,y=0,g=e[t++],N=new Int32Array(4096),w=null;;){for(;f<16&&g!==0;)p|=e[t++]<<f,f+=8,g===1?g=e[t++]:--g;if(f<c)break;var k=p&d;if(p>>=c,f-=c,k!==i){if(k===l)break;for(var S=k<o?k:w,O=0,E=S;E>i;)E=N[E]>>8,++O;var D=E;if(y+O+(S!==k?1:0)>n)return void hs.log("Warning, gif stream longer than expected.");r[y++]=D;var q=y+=O;for(S!==k&&(r[y++]=D),E=S;O--;)E=N[E],r[--q]=255&E,E>>=8;w!==null&&o<4096&&(N[o++]=w<<8|D,o>=d+1&&c<12&&(++c,d=d<<1|1)),w=k}else o=l+1,d=(1<<(c=a+1))-1,w=null}return y!==n&&hs.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function RN(e){var t,r,n,a,i,l=Math.floor,o=new Array(64),c=new Array(64),d=new Array(64),f=new Array(64),p=new Array(65535),y=new Array(65535),g=new Array(64),N=new Array(64),w=[],k=0,S=7,O=new Array(64),E=new Array(64),D=new Array(64),q=new Array(256),W=new Array(2048),R=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],U=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],z=[0,1,2,3,4,5,6,7,8,9,10,11],Z=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],H=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],K=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],J=[0,1,2,3,4,5,6,7,8,9,10,11],ae=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],se=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function ue(B,ee){for(var Y=0,re=0,Q=new Array,Ce=1;Ce<=16;Ce++){for(var me=1;me<=B[Ce];me++)Q[ee[re]]=[],Q[ee[re]][0]=Y,Q[ee[re]][1]=Ce,re++,Y++;Y*=2}return Q}function fe(B){for(var ee=B[0],Y=B[1]-1;Y>=0;)ee&1<<Y&&(k|=1<<S),Y--,--S<0&&(k==255?(ke(255),ke(0)):ke(k),S=7,k=0)}function ke(B){w.push(B)}function _e(B){ke(B>>8&255),ke(255&B)}function Le(B,ee,Y,re,Q){for(var Ce,me=Q[0],ie=Q[240],je=(function(nt,ot){var We,Kt,Dt,fr,xr,nr,Mr,rr,Gt,Vt,cr=0;for(Gt=0;Gt<8;++Gt){We=nt[cr],Kt=nt[cr+1],Dt=nt[cr+2],fr=nt[cr+3],xr=nt[cr+4],nr=nt[cr+5],Mr=nt[cr+6];var br=We+(rr=nt[cr+7]),ar=We-rr,xt=Kt+Mr,yr=Kt-Mr,Ge=Dt+nr,vt=Dt-nr,$t=fr+xr,Yt=fr-xr,Er=br+$t,wr=br-$t,Ke=xt+Ge,Et=xt-Ge;nt[cr]=Er+Ke,nt[cr+4]=Er-Ke;var ur=.707106781*(Et+wr);nt[cr+2]=wr+ur,nt[cr+6]=wr-ur;var Br=.382683433*((Er=Yt+vt)-(Et=yr+ar)),Tr=.5411961*Er+Br,Zt=1.306562965*Et+Br,Pr=.707106781*(Ke=vt+yr),sr=ar+Pr,Or=ar-Pr;nt[cr+5]=Or+Tr,nt[cr+3]=Or-Tr,nt[cr+1]=sr+Zt,nt[cr+7]=sr-Zt,cr+=8}for(cr=0,Gt=0;Gt<8;++Gt){We=nt[cr],Kt=nt[cr+8],Dt=nt[cr+16],fr=nt[cr+24],xr=nt[cr+32],nr=nt[cr+40],Mr=nt[cr+48];var qr=We+(rr=nt[cr+56]),Lr=We-rr,An=Kt+Mr,Ir=Kt-Mr,Nn=Dt+nr,we=Dt-nr,Ne=fr+xr,De=fr-xr,Ie=qr+Ne,oe=qr-Ne,ne=An+Nn,ze=An-Nn;nt[cr]=Ie+ne,nt[cr+32]=Ie-ne;var st=.707106781*(ze+oe);nt[cr+16]=oe+st,nt[cr+48]=oe-st;var Ze=.382683433*((Ie=De+we)-(ze=Ir+Lr)),mt=.5411961*Ie+Ze,ct=1.306562965*ze+Ze,Rt=.707106781*(ne=we+Ir),Xt=Lr+Rt,Jt=Lr-Rt;nt[cr+40]=Jt+mt,nt[cr+24]=Jt-mt,nt[cr+8]=Xt+ct,nt[cr+56]=Xt-ct,cr++}for(Gt=0;Gt<64;++Gt)Vt=nt[Gt]*ot[Gt],g[Gt]=Vt>0?Vt+.5|0:Vt-.5|0;return g})(B,ee),be=0;be<64;++be)N[R[be]]=je[be];var le=N[0]-Y;Y=N[0],le==0?fe(re[0]):(fe(re[y[Ce=32767+le]]),fe(p[Ce]));for(var Ee=63;Ee>0&&N[Ee]==0;)Ee--;if(Ee==0)return fe(me),Y;for(var Me,ye=1;ye<=Ee;){for(var at=ye;N[ye]==0&&ye<=Ee;)++ye;var lt=ye-at;if(lt>=16){Me=lt>>4;for(var ut=1;ut<=Me;++ut)fe(ie);lt&=15}Ce=32767+N[ye],fe(Q[(lt<<4)+y[Ce]]),fe(p[Ce]),ye++}return Ee!=63&&fe(me),Y}function xe(B){B=Math.min(Math.max(B,1),100),i!=B&&((function(ee){for(var Y=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],re=0;re<64;re++){var Q=l((Y[re]*ee+50)/100);Q=Math.min(Math.max(Q,1),255),o[R[re]]=Q}for(var Ce=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],me=0;me<64;me++){var ie=l((Ce[me]*ee+50)/100);ie=Math.min(Math.max(ie,1),255),c[R[me]]=ie}for(var je=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],be=0,le=0;le<8;le++)for(var Ee=0;Ee<8;Ee++)d[be]=1/(o[R[be]]*je[le]*je[Ee]*8),f[be]=1/(c[R[be]]*je[le]*je[Ee]*8),be++})(B<50?Math.floor(5e3/B):Math.floor(200-2*B)),i=B)}this.encode=function(B,ee){ee&&xe(ee),w=new Array,k=0,S=7,_e(65496),_e(65504),_e(16),ke(74),ke(70),ke(73),ke(70),ke(0),ke(1),ke(1),ke(0),_e(1),_e(1),ke(0),ke(0),(function(){_e(65499),_e(132),ke(0);for(var Kt=0;Kt<64;Kt++)ke(o[Kt]);ke(1);for(var Dt=0;Dt<64;Dt++)ke(c[Dt])})(),(function(Kt,Dt){_e(65472),_e(17),ke(8),_e(Dt),_e(Kt),ke(3),ke(1),ke(17),ke(0),ke(2),ke(17),ke(1),ke(3),ke(17),ke(1)})(B.width,B.height),(function(){_e(65476),_e(418),ke(0);for(var Kt=0;Kt<16;Kt++)ke(U[Kt+1]);for(var Dt=0;Dt<=11;Dt++)ke(z[Dt]);ke(16);for(var fr=0;fr<16;fr++)ke(Z[fr+1]);for(var xr=0;xr<=161;xr++)ke(H[xr]);ke(1);for(var nr=0;nr<16;nr++)ke(K[nr+1]);for(var Mr=0;Mr<=11;Mr++)ke(J[Mr]);ke(17);for(var rr=0;rr<16;rr++)ke(ae[rr+1]);for(var Gt=0;Gt<=161;Gt++)ke(se[Gt])})(),_e(65498),_e(12),ke(3),ke(1),ke(0),ke(2),ke(17),ke(3),ke(17),ke(0),ke(63),ke(0);var Y=0,re=0,Q=0;k=0,S=7,this.encode.displayName="_encode_";for(var Ce,me,ie,je,be,le,Ee,Me,ye,at=B.data,lt=B.width,ut=B.height,nt=4*lt,ot=0;ot<ut;){for(Ce=0;Ce<nt;){for(be=nt*ot+Ce,Ee=-1,Me=0,ye=0;ye<64;ye++)le=be+(Me=ye>>3)*nt+(Ee=4*(7&ye)),ot+Me>=ut&&(le-=nt*(ot+1+Me-ut)),Ce+Ee>=nt&&(le-=Ce+Ee-nt+4),me=at[le++],ie=at[le++],je=at[le++],O[ye]=(W[me]+W[ie+256|0]+W[je+512|0]>>16)-128,E[ye]=(W[me+768|0]+W[ie+1024|0]+W[je+1280|0]>>16)-128,D[ye]=(W[me+1280|0]+W[ie+1536|0]+W[je+1792|0]>>16)-128;Y=Le(O,d,Y,t,n),re=Le(E,f,re,r,a),Q=Le(D,f,Q,r,a),Ce+=32}ot+=8}if(S>=0){var We=[];We[1]=S+1,We[0]=(1<<S+1)-1,fe(We)}return _e(65497),new Uint8Array(w)},e=e||50,(function(){for(var B=String.fromCharCode,ee=0;ee<256;ee++)q[ee]=B(ee)})(),t=ue(U,z),r=ue(K,J),n=ue(Z,H),a=ue(ae,se),(function(){for(var B=1,ee=2,Y=1;Y<=15;Y++){for(var re=B;re<ee;re++)y[32767+re]=Y,p[32767+re]=[],p[32767+re][1]=Y,p[32767+re][0]=re;for(var Q=-(ee-1);Q<=-B;Q++)y[32767+Q]=Y,p[32767+Q]=[],p[32767+Q][1]=Y,p[32767+Q][0]=ee-1+Q;B<<=1,ee<<=1}})(),(function(){for(var B=0;B<256;B++)W[B]=19595*B,W[B+256|0]=38470*B,W[B+512|0]=7471*B+32768,W[B+768|0]=-11059*B,W[B+1024|0]=-21709*B,W[B+1280|0]=32768*B+8421375,W[B+1536|0]=-27439*B,W[B+1792|0]=-5329*B})(),xe(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Fd(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function cL(e){function t(z){if(!z)throw Error("assert :P")}function r(z,Z,H){for(var K=0;4>K;K++)if(z[Z+K]!=H.charCodeAt(K))return!0;return!1}function n(z,Z,H,K,J){for(var ae=0;ae<J;ae++)z[Z+ae]=H[K+ae]}function a(z,Z,H,K){for(var J=0;J<K;J++)z[Z+J]=H}function i(z){return new Int32Array(z)}function l(z,Z){for(var H=[],K=0;K<z;K++)H.push(new Z);return H}function o(z,Z){var H=[];return(function K(J,ae,se){for(var ue=se[ae],fe=0;fe<ue&&(J.push(se.length>ae+1?[]:new Z),!(se.length<ae+1));fe++)K(J[fe],ae+1,se)})(H,0,z),H}var c=function(){var z=this;function Z(P,L){for(var te=1<<L-1>>>0;P&te;)te>>>=1;return te?(P&te-1)+te:P}function H(P,L,te,de,Se){t(!(de%te));do P[L+(de-=te)]=Se;while(0<de)}function K(P,L,te,de,Se){if(t(2328>=Se),512>=Se)var Te=i(512);else if((Te=i(Se))==null)return 0;return(function(Pe,Fe,Ue,Ve,it,kt){var $e,ft,yt=Fe,Lt=1<<Ue,wt=i(16),Mt=i(16);for(t(it!=0),t(Ve!=null),t(Pe!=null),t(0<Ue),ft=0;ft<it;++ft){if(15<Ve[ft])return 0;++wt[Ve[ft]]}if(wt[0]==it)return 0;for(Mt[1]=0,$e=1;15>$e;++$e){if(wt[$e]>1<<$e)return 0;Mt[$e+1]=Mt[$e]+wt[$e]}for(ft=0;ft<it;++ft)$e=Ve[ft],0<Ve[ft]&&(kt[Mt[$e]++]=ft);if(Mt[15]==1)return(Ve=new J).g=0,Ve.value=kt[0],H(Pe,yt,1,Lt,Ve),Lt;var Wt,hr=-1,tr=Lt-1,Xr=0,Ur=1,Rn=1,Wr=1<<Ue;for(ft=0,$e=1,it=2;$e<=Ue;++$e,it<<=1){if(Ur+=Rn<<=1,0>(Rn-=wt[$e]))return 0;for(;0<wt[$e];--wt[$e])(Ve=new J).g=$e,Ve.value=kt[ft++],H(Pe,yt+Xr,it,Wr,Ve),Xr=Z(Xr,$e)}for($e=Ue+1,it=2;15>=$e;++$e,it<<=1){if(Ur+=Rn<<=1,0>(Rn-=wt[$e]))return 0;for(;0<wt[$e];--wt[$e]){if(Ve=new J,(Xr&tr)!=hr){for(yt+=Wr,Wt=1<<(hr=$e)-Ue;15>hr&&!(0>=(Wt-=wt[hr]));)++hr,Wt<<=1;Lt+=Wr=1<<(Wt=hr-Ue),Pe[Fe+(hr=Xr&tr)].g=Wt+Ue,Pe[Fe+hr].value=yt-Fe-hr}Ve.g=$e-Ue,Ve.value=kt[ft++],H(Pe,yt+(Xr>>Ue),it,Wr,Ve),Xr=Z(Xr,$e)}}return Ur!=2*Mt[15]-1?0:Lt})(P,L,te,de,Se,Te)}function J(){this.value=this.g=0}function ae(){this.value=this.g=0}function se(){this.G=l(5,J),this.H=i(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=l(mi,ae)}function ue(P,L,te,de){t(P!=null),t(L!=null),t(2147483648>de),P.Ca=254,P.I=0,P.b=-8,P.Ka=0,P.oa=L,P.pa=te,P.Jd=L,P.Yc=te+de,P.Zc=4<=de?te+de-4+1:te,me(P)}function fe(P,L){for(var te=0;0<L--;)te|=je(P,128)<<L;return te}function ke(P,L){var te=fe(P,L);return ie(P)?-te:te}function _e(P,L,te,de){var Se,Te=0;for(t(P!=null),t(L!=null),t(4294967288>de),P.Sb=de,P.Ra=0,P.u=0,P.h=0,4<de&&(de=4),Se=0;Se<de;++Se)Te+=L[te+Se]<<8*Se;P.Ra=Te,P.bb=de,P.oa=L,P.pa=te}function Le(P){for(;8<=P.u&&P.bb<P.Sb;)P.Ra>>>=8,P.Ra+=P.oa[P.pa+P.bb]<<ll-8>>>0,++P.bb,P.u-=8;re(P)&&(P.h=1,P.u=0)}function xe(P,L){if(t(0<=L),!P.h&&L<=xi){var te=Y(P)&il[L];return P.u+=L,Le(P),te}return P.h=1,P.u=0}function B(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function ee(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function Y(P){return P.Ra>>>(P.u&ll-1)>>>0}function re(P){return t(P.bb<=P.Sb),P.h||P.bb==P.Sb&&P.u>ll}function Q(P,L){P.u=L,P.h=re(P)}function Ce(P){P.u>=zn&&(t(P.u>=zn),Le(P))}function me(P){t(P!=null&&P.oa!=null),P.pa<P.Zc?(P.I=(P.oa[P.pa++]|P.I<<8)>>>0,P.b+=8):(t(P!=null&&P.oa!=null),P.pa<P.Yc?(P.b+=8,P.I=P.oa[P.pa++]|P.I<<8):P.Ka?P.b=0:(P.I<<=8,P.b+=8,P.Ka=1))}function ie(P){return fe(P,1)}function je(P,L){var te=P.Ca;0>P.b&&me(P);var de=P.b,Se=te*L>>>8,Te=(P.I>>>de>Se)+0;for(Te?(te-=Se,P.I-=Se+1<<de>>>0):te=Se+1,de=te,Se=0;256<=de;)Se+=8,de>>=8;return de=7^Se+zl[de],P.b-=de,P.Ca=(te<<de)-1,Te}function be(P,L,te){P[L+0]=te>>24&255,P[L+1]=te>>16&255,P[L+2]=te>>8&255,P[L+3]=255&te}function le(P,L){return P[L+0]|P[L+1]<<8}function Ee(P,L){return le(P,L)|P[L+2]<<16}function Me(P,L){return le(P,L)|le(P,L+2)<<16}function ye(P,L){var te=1<<L;return t(P!=null),t(0<L),P.X=i(te),P.X==null?0:(P.Mb=32-L,P.Xa=L,1)}function at(P,L){t(P!=null),t(L!=null),t(P.Xa==L.Xa),n(L.X,0,P.X,0,1<<L.Xa)}function lt(){this.X=[],this.Xa=this.Mb=0}function ut(P,L,te,de){t(te!=null),t(de!=null);var Se=te[0],Te=de[0];return Se==0&&(Se=(P*Te+L/2)/L),Te==0&&(Te=(L*Se+P/2)/P),0>=Se||0>=Te?0:(te[0]=Se,de[0]=Te,1)}function nt(P,L){return P+(1<<L)-1>>>L}function ot(P,L){return((4278255360&P)+(4278255360&L)>>>0&4278255360)+((16711935&P)+(16711935&L)>>>0&16711935)>>>0}function We(P,L){z[L]=function(te,de,Se,Te,Pe,Fe,Ue){var Ve;for(Ve=0;Ve<Pe;++Ve){var it=z[P](Fe[Ue+Ve-1],Se,Te+Ve);Fe[Ue+Ve]=ot(te[de+Ve],it)}}}function Kt(){this.ud=this.hd=this.jd=0}function Dt(P,L){return((4278124286&(P^L))>>>1)+(P&L)>>>0}function fr(P){return 0<=P&&256>P?P:0>P?0:255<P?255:void 0}function xr(P,L){return fr(P+(P-L+.5>>1))}function nr(P,L,te){return Math.abs(L-te)-Math.abs(P-te)}function Mr(P,L,te,de,Se,Te,Pe){for(de=Te[Pe-1],te=0;te<Se;++te)Te[Pe+te]=de=ot(P[L+te],de)}function rr(P,L,te,de,Se){var Te;for(Te=0;Te<te;++Te){var Pe=P[L+Te],Fe=Pe>>8&255,Ue=16711935&(Ue=(Ue=16711935&Pe)+((Fe<<16)+Fe));de[Se+Te]=(4278255360&Pe)+Ue>>>0}}function Gt(P,L){L.jd=255&P,L.hd=P>>8&255,L.ud=P>>16&255}function Vt(P,L,te,de,Se,Te){var Pe;for(Pe=0;Pe<de;++Pe){var Fe=L[te+Pe],Ue=Fe>>>8,Ve=Fe,it=255&(it=(it=Fe>>>16)+((P.jd<<24>>24)*(Ue<<24>>24)>>>5));Ve=255&(Ve=(Ve+=(P.hd<<24>>24)*(Ue<<24>>24)>>>5)+((P.ud<<24>>24)*(it<<24>>24)>>>5)),Se[Te+Pe]=(4278255360&Fe)+(it<<16)+Ve}}function cr(P,L,te,de,Se){z[L]=function(Te,Pe,Fe,Ue,Ve,it,kt,$e,ft){for(Ue=kt;Ue<$e;++Ue)for(kt=0;kt<ft;++kt)Ve[it++]=Se(Fe[de(Te[Pe++])])},z[P]=function(Te,Pe,Fe,Ue,Ve,it,kt){var $e=8>>Te.b,ft=Te.Ea,yt=Te.K[0],Lt=Te.w;if(8>$e)for(Te=(1<<Te.b)-1,Lt=(1<<$e)-1;Pe<Fe;++Pe){var wt,Mt=0;for(wt=0;wt<ft;++wt)wt&Te||(Mt=de(Ue[Ve++])),it[kt++]=Se(yt[Mt&Lt]),Mt>>=$e}else z["VP8LMapColor"+te](Ue,Ve,yt,Lt,it,kt,Pe,Fe,ft)}}function br(P,L,te,de,Se){for(te=L+te;L<te;){var Te=P[L++];de[Se++]=Te>>16&255,de[Se++]=Te>>8&255,de[Se++]=255&Te}}function ar(P,L,te,de,Se){for(te=L+te;L<te;){var Te=P[L++];de[Se++]=Te>>16&255,de[Se++]=Te>>8&255,de[Se++]=255&Te,de[Se++]=Te>>24&255}}function xt(P,L,te,de,Se){for(te=L+te;L<te;){var Te=(Pe=P[L++])>>16&240|Pe>>12&15,Pe=240&Pe|Pe>>28&15;de[Se++]=Te,de[Se++]=Pe}}function yr(P,L,te,de,Se){for(te=L+te;L<te;){var Te=(Pe=P[L++])>>16&248|Pe>>13&7,Pe=Pe>>5&224|Pe>>3&31;de[Se++]=Te,de[Se++]=Pe}}function Ge(P,L,te,de,Se){for(te=L+te;L<te;){var Te=P[L++];de[Se++]=255&Te,de[Se++]=Te>>8&255,de[Se++]=Te>>16&255}}function vt(P,L,te,de,Se,Te){if(Te==0)for(te=L+te;L<te;)be(de,((Te=P[L++])[0]>>24|Te[1]>>8&65280|Te[2]<<8&16711680|Te[3]<<24)>>>0),Se+=32;else n(de,Se,P,L,te)}function $t(P,L){z[L][0]=z[P+"0"],z[L][1]=z[P+"1"],z[L][2]=z[P+"2"],z[L][3]=z[P+"3"],z[L][4]=z[P+"4"],z[L][5]=z[P+"5"],z[L][6]=z[P+"6"],z[L][7]=z[P+"7"],z[L][8]=z[P+"8"],z[L][9]=z[P+"9"],z[L][10]=z[P+"10"],z[L][11]=z[P+"11"],z[L][12]=z[P+"12"],z[L][13]=z[P+"13"],z[L][14]=z[P+"0"],z[L][15]=z[P+"0"]}function Yt(P){return P==Af||P==hx||P==dh||P==fx}function Er(){this.eb=[],this.size=this.A=this.fb=0}function wr(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Ke(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Er,this.f.kb=new wr,this.sd=null}function Et(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function ur(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Br(P){return alert("todo:WebPSamplerProcessPlane"),P.T}function Tr(P,L){var te=P.T,de=L.ba.f.RGBA,Se=de.eb,Te=de.fb+P.ka*de.A,Pe=qi[L.ba.S],Fe=P.y,Ue=P.O,Ve=P.f,it=P.N,kt=P.ea,$e=P.W,ft=L.cc,yt=L.dc,Lt=L.Mc,wt=L.Nc,Mt=P.ka,Wt=P.ka+P.T,hr=P.U,tr=hr+1>>1;for(Mt==0?Pe(Fe,Ue,null,null,Ve,it,kt,$e,Ve,it,kt,$e,Se,Te,null,null,hr):(Pe(L.ec,L.fc,Fe,Ue,ft,yt,Lt,wt,Ve,it,kt,$e,Se,Te-de.A,Se,Te,hr),++te);Mt+2<Wt;Mt+=2)ft=Ve,yt=it,Lt=kt,wt=$e,it+=P.Rc,$e+=P.Rc,Te+=2*de.A,Pe(Fe,(Ue+=2*P.fa)-P.fa,Fe,Ue,ft,yt,Lt,wt,Ve,it,kt,$e,Se,Te-de.A,Se,Te,hr);return Ue+=P.fa,P.j+Wt<P.o?(n(L.ec,L.fc,Fe,Ue,hr),n(L.cc,L.dc,Ve,it,tr),n(L.Mc,L.Nc,kt,$e,tr),te--):1&Wt||Pe(Fe,Ue,null,null,Ve,it,kt,$e,Ve,it,kt,$e,Se,Te+de.A,null,null,hr),te}function Zt(P,L,te){var de=P.F,Se=[P.J];if(de!=null){var Te=P.U,Pe=L.ba.S,Fe=Pe==Cf||Pe==dh;L=L.ba.f.RGBA;var Ue=[0],Ve=P.ka;Ue[0]=P.T,P.Kb&&(Ve==0?--Ue[0]:(--Ve,Se[0]-=P.width),P.j+P.ka+P.T==P.o&&(Ue[0]=P.o-P.j-Ve));var it=L.eb;Ve=L.fb+Ve*L.A,P=Nf(de,Se[0],P.width,Te,Ue,it,Ve+(Fe?0:3),L.A),t(te==Ue),P&&Yt(Pe)&&Ad(it,Ve,Fe,Te,Ue,L.A)}return 0}function Pr(P){var L=P.ma,te=L.ba.S,de=11>te,Se=te==dl||te==Bo||te==Cf||te==ch||te==12||Yt(te);if(L.memory=null,L.Ib=null,L.Jb=null,L.Nd=null,!xo(L.Oa,P,Se?11:12))return 0;if(Se&&Yt(te)&&Sl(),P.da)alert("todo:use_scaling");else{if(de){if(L.Ib=Br,P.Kb){if(te=P.U+1>>1,L.memory=i(P.U+2*te),L.memory==null)return 0;L.ec=L.memory,L.fc=0,L.cc=L.ec,L.dc=L.fc+P.U,L.Mc=L.cc,L.Nc=L.dc+te,L.Ib=Tr,Sl()}}else alert("todo:EmitYUV");Se&&(L.Jb=Zt,de&&hi())}if(de&&!fu){for(P=0;256>P;++P)Hi[P]=89858*(P-128)+fh>>Vo,Kk[P]=-22014*(P-128)+fh,mv[P]=-45773*(P-128),bx[P]=113618*(P-128)+fh>>Vo;for(P=r0;P<hu;++P)L=76283*(P-16)+fh>>Vo,Gk[P-r0]=Sa(L,255),Xk[P-r0]=Sa(L+8>>4,15);fu=1}return 1}function sr(P){var L=P.ma,te=P.U,de=P.T;return t(!(1&P.ka)),0>=te||0>=de?0:(te=L.Ib(P,L),L.Jb!=null&&L.Jb(P,L,te),L.Dc+=te,1)}function Or(P){P.ma.memory=null}function qr(P,L,te,de){return xe(P,8)!=47?0:(L[0]=xe(P,14)+1,te[0]=xe(P,14)+1,de[0]=xe(P,1),xe(P,3)!=0?0:!P.h)}function Lr(P,L){if(4>P)return P+1;var te=P-2>>1;return(2+(1&P)<<te)+xe(L,te)+1}function An(P,L){return 120<L?L-120:1<=(te=((te=zo[L-1])>>4)*P+(8-(15&te)))?te:1;var te}function Ir(P,L,te){var de=Y(te),Se=P[L+=255&de].g-8;return 0<Se&&(Q(te,te.u+8),de=Y(te),L+=P[L].value,L+=de&(1<<Se)-1),Q(te,te.u+P[L].g),P[L].value}function Nn(P,L,te){return te.g+=P.g,te.value+=P.value<<L>>>0,t(8>=te.g),P.g}function we(P,L,te){var de=P.xc;return t((L=de==0?0:P.vc[P.md*(te>>de)+(L>>de)])<P.Wb),P.Ya[L]}function Ne(P,L,te,de){var Se=P.ab,Te=P.c*L,Pe=P.C;L=Pe+L;var Fe=te,Ue=de;for(de=P.Ta,te=P.Ua;0<Se--;){var Ve=P.gc[Se],it=Pe,kt=L,$e=Fe,ft=Ue,yt=(Ue=de,Fe=te,Ve.Ea);switch(t(it<kt),t(kt<=Ve.nc),Ve.hc){case 2:x($e,ft,(kt-it)*yt,Ue,Fe);break;case 0:var Lt=it,wt=kt,Mt=Ue,Wt=Fe,hr=(Wr=Ve).Ea;Lt==0&&(pe($e,ft,null,null,1,Mt,Wt),Mr($e,ft+1,0,0,hr-1,Mt,Wt+1),ft+=hr,Wt+=hr,++Lt);for(var tr=1<<Wr.b,Xr=tr-1,Ur=nt(hr,Wr.b),Rn=Wr.K,Wr=Wr.w+(Lt>>Wr.b)*Ur;Lt<wt;){var sa=Rn,ds=Wr,Hn=1;for(h($e,ft,Mt,Wt-hr,1,Mt,Wt);Hn<hr;){var zr=(Hn&~Xr)+tr;zr>hr&&(zr=hr),(0,I[sa[ds++]>>8&15])($e,ft+ +Hn,Mt,Wt+Hn-hr,zr-Hn,Mt,Wt+Hn),Hn=zr}ft+=hr,Wt+=hr,++Lt&Xr||(Wr+=Ur)}kt!=Ve.nc&&n(Ue,Fe-yt,Ue,Fe+(kt-it-1)*yt,yt);break;case 1:for(yt=$e,wt=ft,hr=($e=Ve.Ea)-(Wt=$e&~(Mt=(ft=1<<Ve.b)-1)),Lt=nt($e,Ve.b),tr=Ve.K,Ve=Ve.w+(it>>Ve.b)*Lt;it<kt;){for(Xr=tr,Ur=Ve,Rn=new Kt,Wr=wt+Wt,sa=wt+$e;wt<Wr;)Gt(Xr[Ur++],Rn),F(Rn,yt,wt,ft,Ue,Fe),wt+=ft,Fe+=ft;wt<sa&&(Gt(Xr[Ur++],Rn),F(Rn,yt,wt,hr,Ue,Fe),wt+=hr,Fe+=hr),++it&Mt||(Ve+=Lt)}break;case 3:if($e==Ue&&ft==Fe&&0<Ve.b){for(wt=Ue,$e=yt=Fe+(kt-it)*yt-(Wt=(kt-it)*nt(Ve.Ea,Ve.b)),ft=Ue,Mt=Fe,Lt=[],Wt=(hr=Wt)-1;0<=Wt;--Wt)Lt[Wt]=ft[Mt+Wt];for(Wt=hr-1;0<=Wt;--Wt)wt[$e+Wt]=Lt[Wt];b(Ve,it,kt,Ue,yt,Ue,Fe)}else b(Ve,it,kt,$e,ft,Ue,Fe)}Fe=de,Ue=te}Ue!=te&&n(de,te,Fe,Ue,Te)}function De(P,L){var te=P.V,de=P.Ba+P.c*P.C,Se=L-P.C;if(t(L<=P.l.o),t(16>=Se),0<Se){var Te=P.l,Pe=P.Ta,Fe=P.Ua,Ue=Te.width;if(Ne(P,Se,te,de),Se=Fe=[Fe],t((te=P.C)<(de=L)),t(Te.v<Te.va),de>Te.o&&(de=Te.o),te<Te.j){var Ve=Te.j-te;te=Te.j,Se[0]+=Ve*Ue}if(te>=de?te=0:(Se[0]+=4*Te.v,Te.ka=te-Te.j,Te.U=Te.va-Te.v,Te.T=de-te,te=1),te){if(Fe=Fe[0],11>(te=P.ca).S){var it=te.f.RGBA,kt=(de=te.S,Se=Te.U,Te=Te.T,Ve=it.eb,it.A),$e=Te;for(it=it.fb+P.Ma*it.A;0<$e--;){var ft=Pe,yt=Fe,Lt=Se,wt=Ve,Mt=it;switch(de){case dx:X(ft,yt,Lt,wt,Mt);break;case dl:ce(ft,yt,Lt,wt,Mt);break;case Af:ce(ft,yt,Lt,wt,Mt),Ad(wt,Mt,0,Lt,1,0);break;case ux:qe(ft,yt,Lt,wt,Mt);break;case Bo:vt(ft,yt,Lt,wt,Mt,1);break;case hx:vt(ft,yt,Lt,wt,Mt,1),Ad(wt,Mt,0,Lt,1,0);break;case Cf:vt(ft,yt,Lt,wt,Mt,0);break;case dh:vt(ft,yt,Lt,wt,Mt,0),Ad(wt,Mt,1,Lt,1,0);break;case ch:ge(ft,yt,Lt,wt,Mt);break;case fx:ge(ft,yt,Lt,wt,Mt),Fo(wt,Mt,Lt,1,0);break;case lu:Ae(ft,yt,Lt,wt,Mt);break;default:t(0)}Fe+=Ue,it+=kt}P.Ma+=Te}else alert("todo:EmitRescaledRowsYUVA");t(P.Ma<=te.height)}}P.C=L,t(P.C<=P.i)}function Ie(P){var L;if(0<P.ua)return 0;for(L=0;L<P.Wb;++L){var te=P.Ya[L].G,de=P.Ya[L].H;if(0<te[1][de[1]+0].g||0<te[2][de[2]+0].g||0<te[3][de[3]+0].g)return 0}return 1}function oe(P,L,te,de,Se,Te){if(P.Z!=0){var Pe=P.qd,Fe=P.rd;for(t(Td[P.Z]!=null);L<te;++L)Td[P.Z](Pe,Fe,de,Se,de,Se,Te),Pe=de,Fe=Se,Se+=Te;P.qd=Pe,P.rd=Fe}}function ne(P,L){var te=P.l.ma,de=te.Z==0||te.Z==1?P.l.j:P.C;if(de=P.C<de?de:P.C,t(L<=P.l.o),L>de){var Se=P.l.width,Te=te.ca,Pe=te.tb+Se*de,Fe=P.V,Ue=P.Ba+P.c*de,Ve=P.gc;t(P.ab==1),t(Ve[0].hc==3),j(Ve[0],de,L,Fe,Ue,Te,Pe),oe(te,de,L,Te,Pe,Se)}P.C=P.Ma=L}function ze(P,L,te,de,Se,Te,Pe){var Fe=P.$/de,Ue=P.$%de,Ve=P.m,it=P.s,kt=te+P.$,$e=kt;Se=te+de*Se;var ft=te+de*Te,yt=280+it.ua,Lt=P.Pb?Fe:16777216,wt=0<it.ua?it.Wa:null,Mt=it.wc,Wt=kt<ft?we(it,Ue,Fe):null;t(P.C<Te),t(ft<=Se);var hr=!1;e:for(;;){for(;hr||kt<ft;){var tr=0;if(Fe>=Lt){var Xr=kt-te;t((Lt=P).Pb),Lt.wd=Lt.m,Lt.xd=Xr,0<Lt.s.ua&&at(Lt.s.Wa,Lt.s.vb),Lt=Fe+ou}if(Ue&Mt||(Wt=we(it,Ue,Fe)),t(Wt!=null),Wt.Qb&&(L[kt]=Wt.qb,hr=!0),!hr)if(Ce(Ve),Wt.jc){tr=Ve,Xr=L;var Ur=kt,Rn=Wt.pd[Y(tr)&mi-1];t(Wt.jc),256>Rn.g?(Q(tr,tr.u+Rn.g),Xr[Ur]=Rn.value,tr=0):(Q(tr,tr.u+Rn.g-256),t(256<=Rn.value),tr=Rn.value),tr==0&&(hr=!0)}else tr=Ir(Wt.G[0],Wt.H[0],Ve);if(Ve.h)break;if(hr||256>tr){if(!hr)if(Wt.nd)L[kt]=(Wt.qb|tr<<8)>>>0;else{if(Ce(Ve),hr=Ir(Wt.G[1],Wt.H[1],Ve),Ce(Ve),Xr=Ir(Wt.G[2],Wt.H[2],Ve),Ur=Ir(Wt.G[3],Wt.H[3],Ve),Ve.h)break;L[kt]=(Ur<<24|hr<<16|tr<<8|Xr)>>>0}if(hr=!1,++kt,++Ue>=de&&(Ue=0,++Fe,Pe!=null&&Fe<=Te&&!(Fe%16)&&Pe(P,Fe),wt!=null))for(;$e<kt;)tr=L[$e++],wt.X[(506832829*tr&4294967295)>>>wt.Mb]=tr}else if(280>tr){if(tr=Lr(tr-256,Ve),Xr=Ir(Wt.G[4],Wt.H[4],Ve),Ce(Ve),Xr=An(de,Xr=Lr(Xr,Ve)),Ve.h)break;if(kt-te<Xr||Se-kt<tr)break e;for(Ur=0;Ur<tr;++Ur)L[kt+Ur]=L[kt+Ur-Xr];for(kt+=tr,Ue+=tr;Ue>=de;)Ue-=de,++Fe,Pe!=null&&Fe<=Te&&!(Fe%16)&&Pe(P,Fe);if(t(kt<=Se),Ue&Mt&&(Wt=we(it,Ue,Fe)),wt!=null)for(;$e<kt;)tr=L[$e++],wt.X[(506832829*tr&4294967295)>>>wt.Mb]=tr}else{if(!(tr<yt))break e;for(hr=tr-280,t(wt!=null);$e<kt;)tr=L[$e++],wt.X[(506832829*tr&4294967295)>>>wt.Mb]=tr;tr=kt,t(!(hr>>>(Xr=wt).Xa)),L[tr]=Xr.X[hr],hr=!0}hr||t(Ve.h==re(Ve))}if(P.Pb&&Ve.h&&kt<Se)t(P.m.h),P.a=5,P.m=P.wd,P.$=P.xd,0<P.s.ua&&at(P.s.vb,P.s.Wa);else{if(Ve.h)break e;Pe!=null&&Pe(P,Fe>Te?Te:Fe),P.a=0,P.$=kt-te}return 1}return P.a=3,0}function st(P){t(P!=null),P.vc=null,P.yc=null,P.Ya=null;var L=P.Wa;L!=null&&(L.X=null),P.vb=null,t(P!=null)}function Ze(){var P=new Cr;return P==null?null:(P.a=0,P.xb=kp,$t("Predictor","VP8LPredictors"),$t("Predictor","VP8LPredictors_C"),$t("PredictorAdd","VP8LPredictorsAdd"),$t("PredictorAdd","VP8LPredictorsAdd_C"),x=rr,F=Vt,X=br,ce=ar,ge=xt,Ae=yr,qe=Ge,z.VP8LMapColor32b=_,z.VP8LMapColor8b=A,P)}function mt(P,L,te,de,Se){var Te=1,Pe=[P],Fe=[L],Ue=de.m,Ve=de.s,it=null,kt=0;e:for(;;){if(te)for(;Te&&xe(Ue,1);){var $e=Pe,ft=Fe,yt=de,Lt=1,wt=yt.m,Mt=yt.gc[yt.ab],Wt=xe(wt,2);if(yt.Oc&1<<Wt)Te=0;else{switch(yt.Oc|=1<<Wt,Mt.hc=Wt,Mt.Ea=$e[0],Mt.nc=ft[0],Mt.K=[null],++yt.ab,t(4>=yt.ab),Wt){case 0:case 1:Mt.b=xe(wt,3)+2,Lt=mt(nt(Mt.Ea,Mt.b),nt(Mt.nc,Mt.b),0,yt,Mt.K),Mt.K=Mt.K[0];break;case 3:var hr,tr=xe(wt,8)+1,Xr=16<tr?0:4<tr?1:2<tr?2:3;if($e[0]=nt(Mt.Ea,Xr),Mt.b=Xr,hr=Lt=mt(tr,1,0,yt,Mt.K)){var Ur,Rn=tr,Wr=Mt,sa=1<<(8>>Wr.b),ds=i(sa);if(ds==null)hr=0;else{var Hn=Wr.K[0],zr=Wr.w;for(ds[0]=Wr.K[0][0],Ur=1;Ur<1*Rn;++Ur)ds[Ur]=ot(Hn[zr+Ur],ds[Ur-1]);for(;Ur<4*sa;++Ur)ds[Ur]=0;Wr.K[0]=null,Wr.K[0]=ds,hr=1}}Lt=hr;break;case 2:break;default:t(0)}Te=Lt}}if(Pe=Pe[0],Fe=Fe[0],Te&&xe(Ue,1)&&!(Te=1<=(kt=xe(Ue,4))&&11>=kt)){de.a=3;break e}var jr;if(jr=Te)t:{var vs,Sn,Wn,La=de,gi=Pe,$i=Fe,Za=kt,Zs=te,ul=La.m,Qs=La.s,Jn=[null],ya=1,ys=0,Ca=qo[Za];r:for(;;){if(Zs&&xe(ul,1)){var bi=xe(ul,3)+2,ws=nt(gi,bi),wa=nt($i,bi),$s=ws*wa;if(!mt(ws,wa,0,La,Jn))break r;for(Jn=Jn[0],Qs.xc=bi,vs=0;vs<$s;++vs){var Ra=Jn[vs]>>8&65535;Jn[vs]=Ra,Ra>=ya&&(ya=Ra+1)}}if(ul.h)break r;for(Sn=0;5>Sn;++Sn){var Js=e0[Sn];!Sn&&0<Za&&(Js+=1<<Za),ys<Js&&(ys=Js)}var ei=l(ya*Ca,J),qa=ya,ga=l(qa,se);if(ga==null)var hl=null;else t(65536>=qa),hl=ga;var Ps=i(ys);if(hl==null||Ps==null||ei==null){La.a=1;break r}var fn=ei;for(vs=Wn=0;vs<ya;++vs){var bn=hl[vs],ka=bn.G,ql=bn.H,Wo=0,Cl=1,ti=0;for(Sn=0;5>Sn;++Sn){Js=e0[Sn],ka[Sn]=fn,ql[Sn]=Wn,!Sn&&0<Za&&(Js+=1<<Za);a:{var mu,xu=Js,yx=La,Qa=Ps,_p=fn,Sp=Wn,wx=0,Od=yx.m,Yk=xe(Od,1);if(a(Qa,0,0,xu),Yk){var jp=xe(Od,1)+1,Cp=xe(Od,1),kx=xe(Od,Cp==0?1:8);Qa[kx]=1,jp==2&&(Qa[kx=xe(Od,8)]=1);var Ei=1}else{var Is=i(19),Pf=xe(Od,4)+4;if(19<Pf){yx.a=3;var pu=0;break a}for(mu=0;mu<Pf;++mu)Is[Ef[mu]]=xe(Od,3);var xh=void 0,n0=void 0,Vc=yx,Nx=Is,ph=xu,_x=Qa,Sx=0,Pd=Vc.m,Ap=8,Ep=l(128,J);n:for(;K(Ep,0,7,Nx,19);){if(xe(Pd,1)){var xv=2+2*xe(Pd,3);if((xh=2+xe(Pd,xv))>ph)break n}else xh=ph;for(n0=0;n0<ph&&xh--;){Ce(Pd);var Tp=Ep[0+(127&Y(Pd))];Q(Pd,Pd.u+Tp.g);var gu=Tp.value;if(16>gu)_x[n0++]=gu,gu!=0&&(Ap=gu);else{var pv=gu==16,gv=gu-16,bv=uh[gv],Op=xe(Pd,Uo[gv])+bv;if(n0+Op>ph)break n;for(var vv=pv?Ap:0;0<Op--;)_x[n0++]=vv}}Sx=1;break n}Sx||(Vc.a=3),Ei=Sx}(Ei=Ei&&!Od.h)&&(wx=K(_p,Sp,8,Qa,xu)),Ei&&wx!=0?pu=wx:(yx.a=3,pu=0)}if(pu==0)break r;if(Cl&&mx[Sn]==1&&(Cl=fn[Wn].g==0),Wo+=fn[Wn].g,Wn+=pu,3>=Sn){var a0,jx=Ps[0];for(a0=1;a0<Js;++a0)Ps[a0]>jx&&(jx=Ps[a0]);ti+=jx}}if(bn.nd=Cl,bn.Qb=0,Cl&&(bn.qb=(ka[3][ql[3]+0].value<<24|ka[1][ql[1]+0].value<<16|ka[2][ql[2]+0].value)>>>0,Wo==0&&256>ka[0][ql[0]+0].value&&(bn.Qb=1,bn.qb+=ka[0][ql[0]+0].value<<8)),bn.jc=!bn.Qb&&6>ti,bn.jc){var If,Wc=bn;for(If=0;If<mi;++If){var Id=If,Dd=Wc.pd[Id],Cx=Wc.G[0][Wc.H[0]+Id];256<=Cx.value?(Dd.g=Cx.g+256,Dd.value=Cx.value):(Dd.g=0,Dd.value=0,Id>>=Nn(Cx,8,Dd),Id>>=Nn(Wc.G[1][Wc.H[1]+Id],16,Dd),Id>>=Nn(Wc.G[2][Wc.H[2]+Id],0,Dd),Nn(Wc.G[3][Wc.H[3]+Id],24,Dd))}}}Qs.vc=Jn,Qs.Wb=ya,Qs.Ya=hl,Qs.yc=ei,jr=1;break t}jr=0}if(!(Te=jr)){de.a=3;break e}if(0<kt){if(Ve.ua=1<<kt,!ye(Ve.Wa,kt)){de.a=1,Te=0;break e}}else Ve.ua=0;var Ax=de,s0=Pe,yv=Fe,gh=Ax.s,bh=gh.xc;if(Ax.c=s0,Ax.i=yv,gh.md=nt(s0,bh),gh.wc=bh==0?-1:(1<<bh)-1,te){de.xb=cu;break e}if((it=i(Pe*Fe))==null){de.a=1,Te=0;break e}Te=(Te=ze(de,it,0,Pe,Fe,Fe,null))&&!Ue.h;break e}return Te?(Se!=null?Se[0]=it:(t(it==null),t(te)),de.$=0,te||st(Ve)):st(Ve),Te}function ct(P,L){var te=P.c*P.i,de=te+L+16*L;return t(P.c<=L),P.V=i(de),P.V==null?(P.Ta=null,P.Ua=0,P.a=1,0):(P.Ta=P.V,P.Ua=P.Ba+te+L,1)}function Rt(P,L){var te=P.C,de=L-te,Se=P.V,Te=P.Ba+P.c*te;for(t(L<=P.l.o);0<de;){var Pe=16<de?16:de,Fe=P.l.ma,Ue=P.l.width,Ve=Ue*Pe,it=Fe.ca,kt=Fe.tb+Ue*te,$e=P.Ta,ft=P.Ua;Ne(P,Pe,Se,Te),po($e,ft,it,kt,Ve),oe(Fe,te,te+Pe,it,kt,Ue),de-=Pe,Se+=Pe*P.c,te+=Pe}t(te==L),P.C=P.Ma=L}function Xt(){this.ub=this.yd=this.td=this.Rb=0}function Jt(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function ir(){this.Fb=this.Bb=this.Cb=0,this.Zb=i(4),this.Lb=i(4)}function mr(){this.Yb=(function(){var P=[];return(function L(te,de,Se){for(var Te=Se[de],Pe=0;Pe<Te&&(te.push(Se.length>de+1?[]:0),!(Se.length<de+1));Pe++)L(te[Pe],de+1,Se)})(P,0,[3,11]),P})()}function Sr(){this.jb=i(3),this.Wc=o([4,8],mr),this.Xc=o([4,17],mr)}function Pt(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new i(4),this.od=new i(4)}function Un(){this.ld=this.La=this.dd=this.tc=0}function en(){this.Na=this.la=0}function Na(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Ci(){this.ad=i(384),this.Za=0,this.Ob=i(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function tn(){this.uc=this.M=this.Nb=0,this.wa=Array(new Un),this.Y=0,this.ya=Array(new Ci),this.aa=0,this.l=new ss}function an(){this.y=i(16),this.f=i(8),this.ea=i(8)}function On(){this.cb=this.a=0,this.sc="",this.m=new B,this.Od=new Xt,this.Kc=new Jt,this.ed=new Pt,this.Qa=new ir,this.Ic=this.$c=this.Aa=0,this.D=new tn,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=l(8,B),this.ia=0,this.pb=l(4,Na),this.Pa=new Sr,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new an),this.Hd=0,this.rb=Array(new en),this.sb=0,this.wa=Array(new Un),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Ci),this.L=this.aa=0,this.gd=o([4,2],Un),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function ss(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function To(){var P=new On;return P!=null&&(P.a=0,P.sc="OK",P.cb=0,P.Xb=0,go||(go=lo)),P}function cn(P,L,te){return P.a==0&&(P.a=L,P.sc=te,P.cb=0),0}function ta(P,L,te){return 3<=te&&P[L+0]==157&&P[L+1]==1&&P[L+2]==42}function rl(P,L){if(P==null)return 0;if(P.a=0,P.sc="OK",L==null)return cn(P,2,"null VP8Io passed to VP8GetHeaders()");var te=L.data,de=L.w,Se=L.ha;if(4>Se)return cn(P,7,"Truncated header.");var Te=te[de+0]|te[de+1]<<8|te[de+2]<<16,Pe=P.Od;if(Pe.Rb=!(1&Te),Pe.td=Te>>1&7,Pe.yd=Te>>4&1,Pe.ub=Te>>5,3<Pe.td)return cn(P,3,"Incorrect keyframe parameters.");if(!Pe.yd)return cn(P,4,"Frame not displayable.");de+=3,Se-=3;var Fe=P.Kc;if(Pe.Rb){if(7>Se)return cn(P,7,"cannot parse picture header");if(!ta(te,de,Se))return cn(P,3,"Bad code word");Fe.c=16383&(te[de+4]<<8|te[de+3]),Fe.Td=te[de+4]>>6,Fe.i=16383&(te[de+6]<<8|te[de+5]),Fe.Ud=te[de+6]>>6,de+=7,Se-=7,P.za=Fe.c+15>>4,P.Ub=Fe.i+15>>4,L.width=Fe.c,L.height=Fe.i,L.Da=0,L.j=0,L.v=0,L.va=L.width,L.o=L.height,L.da=0,L.ib=L.width,L.hb=L.height,L.U=L.width,L.T=L.height,a((Te=P.Pa).jb,0,255,Te.jb.length),t((Te=P.Qa)!=null),Te.Cb=0,Te.Bb=0,Te.Fb=1,a(Te.Zb,0,0,Te.Zb.length),a(Te.Lb,0,0,Te.Lb)}if(Pe.ub>Se)return cn(P,7,"bad partition length");ue(Te=P.m,te,de,Pe.ub),de+=Pe.ub,Se-=Pe.ub,Pe.Rb&&(Fe.Ld=ie(Te),Fe.Kd=ie(Te)),Fe=P.Qa;var Ue,Ve=P.Pa;if(t(Te!=null),t(Fe!=null),Fe.Cb=ie(Te),Fe.Cb){if(Fe.Bb=ie(Te),ie(Te)){for(Fe.Fb=ie(Te),Ue=0;4>Ue;++Ue)Fe.Zb[Ue]=ie(Te)?ke(Te,7):0;for(Ue=0;4>Ue;++Ue)Fe.Lb[Ue]=ie(Te)?ke(Te,6):0}if(Fe.Bb)for(Ue=0;3>Ue;++Ue)Ve.jb[Ue]=ie(Te)?fe(Te,8):255}else Fe.Bb=0;if(Te.Ka)return cn(P,3,"cannot parse segment header");if((Fe=P.ed).zd=ie(Te),Fe.Tb=fe(Te,6),Fe.wb=fe(Te,3),Fe.Pc=ie(Te),Fe.Pc&&ie(Te)){for(Ve=0;4>Ve;++Ve)ie(Te)&&(Fe.vd[Ve]=ke(Te,6));for(Ve=0;4>Ve;++Ve)ie(Te)&&(Fe.od[Ve]=ke(Te,6))}if(P.L=Fe.Tb==0?0:Fe.zd?1:2,Te.Ka)return cn(P,3,"cannot parse filter header");var it=Se;if(Se=Ue=de,de=Ue+it,Fe=it,P.Xb=(1<<fe(P.m,2))-1,it<3*(Ve=P.Xb))te=7;else{for(Ue+=3*Ve,Fe-=3*Ve,it=0;it<Ve;++it){var kt=te[Se+0]|te[Se+1]<<8|te[Se+2]<<16;kt>Fe&&(kt=Fe),ue(P.Jc[+it],te,Ue,kt),Ue+=kt,Fe-=kt,Se+=3}ue(P.Jc[+Ve],te,Ue,Fe),te=Ue<de?0:5}if(te!=0)return cn(P,te,"cannot parse partitions");for(te=fe(Ue=P.m,7),Se=ie(Ue)?ke(Ue,4):0,de=ie(Ue)?ke(Ue,4):0,Fe=ie(Ue)?ke(Ue,4):0,Ve=ie(Ue)?ke(Ue,4):0,Ue=ie(Ue)?ke(Ue,4):0,it=P.Qa,kt=0;4>kt;++kt){if(it.Cb){var $e=it.Zb[kt];it.Fb||($e+=te)}else{if(0<kt){P.pb[kt]=P.pb[0];continue}$e=te}var ft=P.pb[kt];ft.Sc[0]=Ho[Sa($e+Se,127)],ft.Sc[1]=$o[Sa($e+0,127)],ft.Eb[0]=2*Ho[Sa($e+de,127)],ft.Eb[1]=101581*$o[Sa($e+Fe,127)]>>16,8>ft.Eb[1]&&(ft.Eb[1]=8),ft.Qc[0]=Ho[Sa($e+Ve,117)],ft.Qc[1]=$o[Sa($e+Ue,127)],ft.lc=$e+Ue}if(!Pe.Rb)return cn(P,4,"Not a key frame.");for(ie(Te),Pe=P.Pa,te=0;4>te;++te){for(Se=0;8>Se;++Se)for(de=0;3>de;++de)for(Fe=0;11>Fe;++Fe)Ve=je(Te,cs[te][Se][de][Fe])?fe(Te,8):fv[te][Se][de][Fe],Pe.Wc[te][Se].Yb[de][Fe]=Ve;for(Se=0;17>Se;++Se)Pe.Xc[te][Se]=Pe.Wc[te][oa[Se]]}return P.kc=ie(Te),P.kc&&(P.Bd=fe(Te,8)),P.cb=1}function lo(P,L,te,de,Se,Te,Pe){var Fe=L[Se].Yb[te];for(te=0;16>Se;++Se){if(!je(P,Fe[te+0]))return Se;for(;!je(P,Fe[te+1]);)if(Fe=L[++Se].Yb[0],te=0,Se==16)return 16;var Ue=L[Se+1].Yb;if(je(P,Fe[te+2])){var Ve=P,it=0;if(je(Ve,($e=Fe)[(kt=te)+3]))if(je(Ve,$e[kt+6])){for(Fe=0,kt=2*(it=je(Ve,$e[kt+8]))+($e=je(Ve,$e[kt+9+it])),it=0,$e=hv[kt];$e[Fe];++Fe)it+=it+je(Ve,$e[Fe]);it+=3+(8<<kt)}else je(Ve,$e[kt+7])?(it=7+2*je(Ve,165),it+=je(Ve,145)):it=5+je(Ve,159);else it=je(Ve,$e[kt+4])?3+je(Ve,$e[kt+5]):2;Fe=Ue[2]}else it=1,Fe=Ue[1];Ue=Pe+wp[Se],0>(Ve=P).b&&me(Ve);var kt,$e=Ve.b,ft=(kt=Ve.Ca>>1)-(Ve.I>>$e)>>31;--Ve.b,Ve.Ca+=ft,Ve.Ca|=1,Ve.I-=(kt+1&ft)<<$e,Te[Ue]=((it^ft)-ft)*de[(0<Se)+0]}return 16}function pa(P){var L=P.rb[P.sb-1];L.la=0,L.Na=0,a(P.zc,0,0,P.zc.length),P.ja=0}function Je(P,L,te,de,Se){Se=P[L+te+32*de]+(Se>>3),P[L+te+32*de]=-256&Se?0>Se?0:255:Se}function dr(P,L,te,de,Se,Te){Je(P,L,0,te,de+Se),Je(P,L,1,te,de+Te),Je(P,L,2,te,de-Te),Je(P,L,3,te,de-Se)}function kr(P){return(20091*P>>16)+P}function pr(P,L,te,de){var Se,Te=0,Pe=i(16);for(Se=0;4>Se;++Se){var Fe=P[L+0]+P[L+8],Ue=P[L+0]-P[L+8],Ve=(35468*P[L+4]>>16)-kr(P[L+12]),it=kr(P[L+4])+(35468*P[L+12]>>16);Pe[Te+0]=Fe+it,Pe[Te+1]=Ue+Ve,Pe[Te+2]=Ue-Ve,Pe[Te+3]=Fe-it,Te+=4,L++}for(Se=Te=0;4>Se;++Se)Fe=(P=Pe[Te+0]+4)+Pe[Te+8],Ue=P-Pe[Te+8],Ve=(35468*Pe[Te+4]>>16)-kr(Pe[Te+12]),Je(te,de,0,0,Fe+(it=kr(Pe[Te+4])+(35468*Pe[Te+12]>>16))),Je(te,de,1,0,Ue+Ve),Je(te,de,2,0,Ue-Ve),Je(te,de,3,0,Fe-it),Te++,de+=32}function dn(P,L,te,de){var Se=P[L+0]+4,Te=35468*P[L+4]>>16,Pe=kr(P[L+4]),Fe=35468*P[L+1]>>16;dr(te,de,0,Se+Pe,P=kr(P[L+1]),Fe),dr(te,de,1,Se+Te,P,Fe),dr(te,de,2,Se-Te,P,Fe),dr(te,de,3,Se-Pe,P,Fe)}function ht(P,L,te,de,Se){pr(P,L,te,de),Se&&pr(P,L+16,te,de+4)}function Be(P,L,te,de){rt(P,L+0,te,de,1),rt(P,L+32,te,de+128,1)}function vr(P,L,te,de){var Se;for(P=P[L+0]+4,Se=0;4>Se;++Se)for(L=0;4>L;++L)Je(te,de,L,Se,P)}function Pn(P,L,te,de){P[L+0]&&zt(P,L+0,te,de),P[L+16]&&zt(P,L+16,te,de+4),P[L+32]&&zt(P,L+32,te,de+128),P[L+48]&&zt(P,L+48,te,de+128+4)}function za(P,L,te,de){var Se,Te=i(16);for(Se=0;4>Se;++Se){var Pe=P[L+0+Se]+P[L+12+Se],Fe=P[L+4+Se]+P[L+8+Se],Ue=P[L+4+Se]-P[L+8+Se],Ve=P[L+0+Se]-P[L+12+Se];Te[0+Se]=Pe+Fe,Te[8+Se]=Pe-Fe,Te[4+Se]=Ve+Ue,Te[12+Se]=Ve-Ue}for(Se=0;4>Se;++Se)Pe=(P=Te[0+4*Se]+3)+Te[3+4*Se],Fe=Te[1+4*Se]+Te[2+4*Se],Ue=Te[1+4*Se]-Te[2+4*Se],Ve=P-Te[3+4*Se],te[de+0]=Pe+Fe>>3,te[de+16]=Ve+Ue>>3,te[de+32]=Pe-Fe>>3,te[de+48]=Ve-Ue>>3,de+=64}function is(P,L,te){var de,Se=L-32,Te=cl,Pe=255-P[Se-1];for(de=0;de<te;++de){var Fe,Ue=Te,Ve=Pe+P[L-1];for(Fe=0;Fe<te;++Fe)P[L+Fe]=Ue[Ve+P[Se+Fe]];L+=32}}function Ai(P,L){is(P,L,4)}function Qn(P,L){is(P,L,8)}function Dr(P,L){is(P,L,16)}function na(P,L){var te;for(te=0;16>te;++te)n(P,L+32*te,P,L-32,16)}function oo(P,L){var te;for(te=16;0<te;--te)a(P,L,P[L-1],16),L+=32}function wd(P,L,te){var de;for(de=0;16>de;++de)a(L,te+32*de,P,16)}function kl(P,L){var te,de=16;for(te=0;16>te;++te)de+=P[L-1+32*te]+P[L+te-32];wd(de>>5,P,L)}function nl(P,L){var te,de=8;for(te=0;16>te;++te)de+=P[L-1+32*te];wd(de>>4,P,L)}function co(P,L){var te,de=8;for(te=0;16>te;++te)de+=P[L+te-32];wd(de>>4,P,L)}function kd(P,L){wd(128,P,L)}function Fr(P,L,te){return P+2*L+te+2>>2}function Ll(P,L){var te,de=L-32;for(de=new Uint8Array([Fr(P[de-1],P[de+0],P[de+1]),Fr(P[de+0],P[de+1],P[de+2]),Fr(P[de+1],P[de+2],P[de+3]),Fr(P[de+2],P[de+3],P[de+4])]),te=0;4>te;++te)n(P,L+32*te,de,0,de.length)}function uo(P,L){var te=P[L-1],de=P[L-1+32],Se=P[L-1+64],Te=P[L-1+96];be(P,L+0,16843009*Fr(P[L-1-32],te,de)),be(P,L+32,16843009*Fr(te,de,Se)),be(P,L+64,16843009*Fr(de,Se,Te)),be(P,L+96,16843009*Fr(Se,Te,Te))}function un(P,L){var te,de=4;for(te=0;4>te;++te)de+=P[L+te-32]+P[L-1+32*te];for(de>>=3,te=0;4>te;++te)a(P,L+32*te,de,4)}function oh(P,L){var te=P[L-1+0],de=P[L-1+32],Se=P[L-1+64],Te=P[L-1-32],Pe=P[L+0-32],Fe=P[L+1-32],Ue=P[L+2-32],Ve=P[L+3-32];P[L+0+96]=Fr(de,Se,P[L-1+96]),P[L+1+96]=P[L+0+64]=Fr(te,de,Se),P[L+2+96]=P[L+1+64]=P[L+0+32]=Fr(Te,te,de),P[L+3+96]=P[L+2+64]=P[L+1+32]=P[L+0+0]=Fr(Pe,Te,te),P[L+3+64]=P[L+2+32]=P[L+1+0]=Fr(Fe,Pe,Te),P[L+3+32]=P[L+2+0]=Fr(Ue,Fe,Pe),P[L+3+0]=Fr(Ve,Ue,Fe)}function hn(P,L){var te=P[L+1-32],de=P[L+2-32],Se=P[L+3-32],Te=P[L+4-32],Pe=P[L+5-32],Fe=P[L+6-32],Ue=P[L+7-32];P[L+0+0]=Fr(P[L+0-32],te,de),P[L+1+0]=P[L+0+32]=Fr(te,de,Se),P[L+2+0]=P[L+1+32]=P[L+0+64]=Fr(de,Se,Te),P[L+3+0]=P[L+2+32]=P[L+1+64]=P[L+0+96]=Fr(Se,Te,Pe),P[L+3+32]=P[L+2+64]=P[L+1+96]=Fr(Te,Pe,Fe),P[L+3+64]=P[L+2+96]=Fr(Pe,Fe,Ue),P[L+3+96]=Fr(Fe,Ue,Ue)}function la(P,L){var te=P[L-1+0],de=P[L-1+32],Se=P[L-1+64],Te=P[L-1-32],Pe=P[L+0-32],Fe=P[L+1-32],Ue=P[L+2-32],Ve=P[L+3-32];P[L+0+0]=P[L+1+64]=Te+Pe+1>>1,P[L+1+0]=P[L+2+64]=Pe+Fe+1>>1,P[L+2+0]=P[L+3+64]=Fe+Ue+1>>1,P[L+3+0]=Ue+Ve+1>>1,P[L+0+96]=Fr(Se,de,te),P[L+0+64]=Fr(de,te,Te),P[L+0+32]=P[L+1+96]=Fr(te,Te,Pe),P[L+1+32]=P[L+2+96]=Fr(Te,Pe,Fe),P[L+2+32]=P[L+3+96]=Fr(Pe,Fe,Ue),P[L+3+32]=Fr(Fe,Ue,Ve)}function Zu(P,L){var te=P[L+0-32],de=P[L+1-32],Se=P[L+2-32],Te=P[L+3-32],Pe=P[L+4-32],Fe=P[L+5-32],Ue=P[L+6-32],Ve=P[L+7-32];P[L+0+0]=te+de+1>>1,P[L+1+0]=P[L+0+64]=de+Se+1>>1,P[L+2+0]=P[L+1+64]=Se+Te+1>>1,P[L+3+0]=P[L+2+64]=Te+Pe+1>>1,P[L+0+32]=Fr(te,de,Se),P[L+1+32]=P[L+0+96]=Fr(de,Se,Te),P[L+2+32]=P[L+1+96]=Fr(Se,Te,Pe),P[L+3+32]=P[L+2+96]=Fr(Te,Pe,Fe),P[L+3+64]=Fr(Pe,Fe,Ue),P[L+3+96]=Fr(Fe,Ue,Ve)}function ic(P,L){var te=P[L-1+0],de=P[L-1+32],Se=P[L-1+64],Te=P[L-1+96];P[L+0+0]=te+de+1>>1,P[L+2+0]=P[L+0+32]=de+Se+1>>1,P[L+2+32]=P[L+0+64]=Se+Te+1>>1,P[L+1+0]=Fr(te,de,Se),P[L+3+0]=P[L+1+32]=Fr(de,Se,Te),P[L+3+32]=P[L+1+64]=Fr(Se,Te,Te),P[L+3+64]=P[L+2+64]=P[L+0+96]=P[L+1+96]=P[L+2+96]=P[L+3+96]=Te}function al(P,L){var te=P[L-1+0],de=P[L-1+32],Se=P[L-1+64],Te=P[L-1+96],Pe=P[L-1-32],Fe=P[L+0-32],Ue=P[L+1-32],Ve=P[L+2-32];P[L+0+0]=P[L+2+32]=te+Pe+1>>1,P[L+0+32]=P[L+2+64]=de+te+1>>1,P[L+0+64]=P[L+2+96]=Se+de+1>>1,P[L+0+96]=Te+Se+1>>1,P[L+3+0]=Fr(Fe,Ue,Ve),P[L+2+0]=Fr(Pe,Fe,Ue),P[L+1+0]=P[L+3+32]=Fr(te,Pe,Fe),P[L+1+32]=P[L+3+64]=Fr(de,te,Pe),P[L+1+64]=P[L+3+96]=Fr(Se,de,te),P[L+1+96]=Fr(Te,Se,de)}function Nl(P,L){var te;for(te=0;8>te;++te)n(P,L+32*te,P,L-32,8)}function Oo(P,L){var te;for(te=0;8>te;++te)a(P,L,P[L-1],8),L+=32}function ho(P,L,te){var de;for(de=0;8>de;++de)a(L,te+32*de,P,8)}function _l(P,L){var te,de=8;for(te=0;8>te;++te)de+=P[L+te-32]+P[L-1+32*te];ho(de>>4,P,L)}function Po(P,L){var te,de=4;for(te=0;8>te;++te)de+=P[L+te-32];ho(de>>3,P,L)}function Nd(P,L){var te,de=4;for(te=0;8>te;++te)de+=P[L-1+32*te];ho(de>>3,P,L)}function ms(P,L){ho(128,P,L)}function ui(P,L,te){var de=P[L-te],Se=P[L+0],Te=3*(Se-de)+Ed[1020+P[L-2*te]-P[L+te]],Pe=jf[112+(Te+4>>3)];P[L-te]=cl[255+de+jf[112+(Te+3>>3)]],P[L+0]=cl[255+Se-Pe]}function ls(P,L,te,de){var Se=P[L+0],Te=P[L+te];return Ui[255+P[L-2*te]-P[L-te]]>de||Ui[255+Te-Se]>de}function Io(P,L,te,de){return 4*Ui[255+P[L-te]-P[L+0]]+Ui[255+P[L-2*te]-P[L+te]]<=de}function _d(P,L,te,de,Se){var Te=P[L-3*te],Pe=P[L-2*te],Fe=P[L-te],Ue=P[L+0],Ve=P[L+te],it=P[L+2*te],kt=P[L+3*te];return 4*Ui[255+Fe-Ue]+Ui[255+Pe-Ve]>de?0:Ui[255+P[L-4*te]-Te]<=Se&&Ui[255+Te-Pe]<=Se&&Ui[255+Pe-Fe]<=Se&&Ui[255+kt-it]<=Se&&Ui[255+it-Ve]<=Se&&Ui[255+Ve-Ue]<=Se}function Lc(P,L,te,de){var Se=2*de+1;for(de=0;16>de;++de)Io(P,L+de,te,Se)&&ui(P,L+de,te)}function lc(P,L,te,de){var Se=2*de+1;for(de=0;16>de;++de)Io(P,L+de*te,1,Se)&&ui(P,L+de*te,1)}function Rc(P,L,te,de){var Se;for(Se=3;0<Se;--Se)Lc(P,L+=4*te,te,de)}function Sd(P,L,te,de){var Se;for(Se=3;0<Se;--Se)lc(P,L+=4,te,de)}function Gn(P,L,te,de,Se,Te,Pe,Fe){for(Te=2*Te+1;0<Se--;){if(_d(P,L,te,Te,Pe))if(ls(P,L,te,Fe))ui(P,L,te);else{var Ue=P,Ve=L,it=te,kt=Ue[Ve-2*it],$e=Ue[Ve-it],ft=Ue[Ve+0],yt=Ue[Ve+it],Lt=Ue[Ve+2*it],wt=27*(Wt=Ed[1020+3*(ft-$e)+Ed[1020+kt-yt]])+63>>7,Mt=18*Wt+63>>7,Wt=9*Wt+63>>7;Ue[Ve-3*it]=cl[255+Ue[Ve-3*it]+Wt],Ue[Ve-2*it]=cl[255+kt+Mt],Ue[Ve-it]=cl[255+$e+wt],Ue[Ve+0]=cl[255+ft-wt],Ue[Ve+it]=cl[255+yt-Mt],Ue[Ve+2*it]=cl[255+Lt-Wt]}L+=de}}function Do(P,L,te,de,Se,Te,Pe,Fe){for(Te=2*Te+1;0<Se--;){if(_d(P,L,te,Te,Pe))if(ls(P,L,te,Fe))ui(P,L,te);else{var Ue=P,Ve=L,it=te,kt=Ue[Ve-it],$e=Ue[Ve+0],ft=Ue[Ve+it],yt=jf[112+(4+(Lt=3*($e-kt))>>3)],Lt=jf[112+(Lt+3>>3)],wt=yt+1>>1;Ue[Ve-2*it]=cl[255+Ue[Ve-2*it]+wt],Ue[Ve-it]=cl[255+kt+Lt],Ue[Ve+0]=cl[255+$e-yt],Ue[Ve+it]=cl[255+ft-wt]}L+=de}}function jd(P,L,te,de,Se,Te){Gn(P,L,te,1,16,de,Se,Te)}function fo(P,L,te,de,Se,Te){Gn(P,L,1,te,16,de,Se,Te)}function oc(P,L,te,de,Se,Te){var Pe;for(Pe=3;0<Pe;--Pe)Do(P,L+=4*te,te,1,16,de,Se,Te)}function Tt(P,L,te,de,Se,Te){var Pe;for(Pe=3;0<Pe;--Pe)Do(P,L+=4,1,te,16,de,Se,Te)}function G(P,L,te,de,Se,Te,Pe,Fe){Gn(P,L,Se,1,8,Te,Pe,Fe),Gn(te,de,Se,1,8,Te,Pe,Fe)}function ve(P,L,te,de,Se,Te,Pe,Fe){Gn(P,L,1,Se,8,Te,Pe,Fe),Gn(te,de,1,Se,8,Te,Pe,Fe)}function He(P,L,te,de,Se,Te,Pe,Fe){Do(P,L+4*Se,Se,1,8,Te,Pe,Fe),Do(te,de+4*Se,Se,1,8,Te,Pe,Fe)}function tt(P,L,te,de,Se,Te,Pe,Fe){Do(P,L+4,1,Se,8,Te,Pe,Fe),Do(te,de+4,1,Se,8,Te,Pe,Fe)}function gt(){this.ba=new Ke,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new ur,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Ut(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function lr(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Hr(){this.ua=0,this.Wa=new lt,this.vb=new lt,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new se,this.yc=new J}function Cr(){this.xb=this.a=0,this.l=new ss,this.ca=new Ke,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new ee,this.Pb=0,this.wd=new ee,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Hr,this.ab=0,this.gc=l(4,lr),this.Oc=0}function kn(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new ss,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function $r(P,L,te,de,Se,Te,Pe){for(P=P==null?0:P[L+0],L=0;L<Pe;++L)Se[Te+L]=P+te[de+L]&255,P=Se[Te+L]}function aa(P,L,te,de,Se,Te,Pe){var Fe;if(P==null)$r(null,null,te,de,Se,Te,Pe);else for(Fe=0;Fe<Pe;++Fe)Se[Te+Fe]=P[L+Fe]+te[de+Fe]&255}function _a(P,L,te,de,Se,Te,Pe){if(P==null)$r(null,null,te,de,Se,Te,Pe);else{var Fe,Ue=P[L+0],Ve=Ue,it=Ue;for(Fe=0;Fe<Pe;++Fe)Ve=it+(Ue=P[L+Fe])-Ve,it=te[de+Fe]+(-256&Ve?0>Ve?0:255:Ve)&255,Ve=Ue,Se[Te+Fe]=it}}function jn(P,L,te,de){var Se=L.width,Te=L.o;if(t(P!=null&&L!=null),0>te||0>=de||te+de>Te)return null;if(!P.Cc){if(P.ga==null){var Pe;if(P.ga=new kn,(Pe=P.ga==null)||(Pe=L.width*L.o,t(P.Gb.length==0),P.Gb=i(Pe),P.Uc=0,P.Gb==null?Pe=0:(P.mb=P.Gb,P.nb=P.Uc,P.rc=null,Pe=1),Pe=!Pe),!Pe){Pe=P.ga;var Fe=P.Fa,Ue=P.P,Ve=P.qc,it=P.mb,kt=P.nb,$e=Ue+1,ft=Ve-1,yt=Pe.l;if(t(Fe!=null&&it!=null&&L!=null),Td[0]=null,Td[1]=$r,Td[2]=aa,Td[3]=_a,Pe.ca=it,Pe.tb=kt,Pe.c=L.width,Pe.i=L.height,t(0<Pe.c&&0<Pe.i),1>=Ve)L=0;else if(Pe.$a=3&Fe[Ue+0],Pe.Z=Fe[Ue+0]>>2&3,Pe.Lc=Fe[Ue+0]>>4&3,Ue=Fe[Ue+0]>>6&3,0>Pe.$a||1<Pe.$a||4<=Pe.Z||1<Pe.Lc||Ue)L=0;else if(yt.put=sr,yt.ac=Pr,yt.bc=Or,yt.ma=Pe,yt.width=L.width,yt.height=L.height,yt.Da=L.Da,yt.v=L.v,yt.va=L.va,yt.j=L.j,yt.o=L.o,Pe.$a)e:{t(Pe.$a==1),L=Ze();t:for(;;){if(L==null){L=0;break e}if(t(Pe!=null),Pe.mc=L,L.c=Pe.c,L.i=Pe.i,L.l=Pe.l,L.l.ma=Pe,L.l.width=Pe.c,L.l.height=Pe.i,L.a=0,_e(L.m,Fe,$e,ft),!mt(Pe.c,Pe.i,1,L,null)||(L.ab==1&&L.gc[0].hc==3&&Ie(L.s)?(Pe.ic=1,Fe=L.c*L.i,L.Ta=null,L.Ua=0,L.V=i(Fe),L.Ba=0,L.V==null?(L.a=1,L=0):L=1):(Pe.ic=0,L=ct(L,Pe.c)),!L))break t;L=1;break e}Pe.mc=null,L=0}else L=ft>=Pe.c*Pe.i;Pe=!L}if(Pe)return null;P.ga.Lc!=1?P.Ga=0:de=Te-te}t(P.ga!=null),t(te+de<=Te);e:{if(L=(Fe=P.ga).c,Te=Fe.l.o,Fe.$a==0){if($e=P.rc,ft=P.Vc,yt=P.Fa,Ue=P.P+1+te*L,Ve=P.mb,it=P.nb+te*L,t(Ue<=P.P+P.qc),Fe.Z!=0)for(t(Td[Fe.Z]!=null),Pe=0;Pe<de;++Pe)Td[Fe.Z]($e,ft,yt,Ue,Ve,it,L),$e=Ve,ft=it,it+=L,Ue+=L;else for(Pe=0;Pe<de;++Pe)n(Ve,it,yt,Ue,L),$e=Ve,ft=it,it+=L,Ue+=L;P.rc=$e,P.Vc=ft}else{if(t(Fe.mc!=null),L=te+de,t((Pe=Fe.mc)!=null),t(L<=Pe.i),Pe.C>=L)L=1;else if(Fe.ic||hi(),Fe.ic){Fe=Pe.V,$e=Pe.Ba,ft=Pe.c;var Lt=Pe.i,wt=(yt=1,Ue=Pe.$/ft,Ve=Pe.$%ft,it=Pe.m,kt=Pe.s,Pe.$),Mt=ft*Lt,Wt=ft*L,hr=kt.wc,tr=wt<Wt?we(kt,Ve,Ue):null;t(wt<=Mt),t(L<=Lt),t(Ie(kt));t:for(;;){for(;!it.h&&wt<Wt;){if(Ve&hr||(tr=we(kt,Ve,Ue)),t(tr!=null),Ce(it),256>(Lt=Ir(tr.G[0],tr.H[0],it)))Fe[$e+wt]=Lt,++wt,++Ve>=ft&&(Ve=0,++Ue<=L&&!(Ue%16)&&ne(Pe,Ue));else{if(!(280>Lt)){yt=0;break t}Lt=Lr(Lt-256,it);var Xr,Ur=Ir(tr.G[4],tr.H[4],it);if(Ce(it),!(wt>=(Ur=An(ft,Ur=Lr(Ur,it)))&&Mt-wt>=Lt)){yt=0;break t}for(Xr=0;Xr<Lt;++Xr)Fe[$e+wt+Xr]=Fe[$e+wt+Xr-Ur];for(wt+=Lt,Ve+=Lt;Ve>=ft;)Ve-=ft,++Ue<=L&&!(Ue%16)&&ne(Pe,Ue);wt<Wt&&Ve&hr&&(tr=we(kt,Ve,Ue))}t(it.h==re(it))}ne(Pe,Ue>L?L:Ue);break t}!yt||it.h&&wt<Mt?(yt=0,Pe.a=it.h?5:3):Pe.$=wt,L=yt}else L=ze(Pe,Pe.V,Pe.Ba,Pe.c,Pe.i,L,Rt);if(!L){de=0;break e}}te+de>=Te&&(P.Cc=1),de=1}if(!de)return null;if(P.Cc&&((de=P.ga)!=null&&(de.mc=null),P.ga=null,0<P.Ga))return alert("todo:WebPDequantizeLevels"),null}return P.nb+te*Se}function Ar(P,L,te,de,Se,Te){for(;0<Se--;){var Pe,Fe=P,Ue=L+(te?1:0),Ve=P,it=L+(te?0:3);for(Pe=0;Pe<de;++Pe){var kt=Ve[it+4*Pe];kt!=255&&(kt*=32897,Fe[Ue+4*Pe+0]=Fe[Ue+4*Pe+0]*kt>>23,Fe[Ue+4*Pe+1]=Fe[Ue+4*Pe+1]*kt>>23,Fe[Ue+4*Pe+2]=Fe[Ue+4*Pe+2]*kt>>23)}L+=Te}}function qs(P,L,te,de,Se){for(;0<de--;){var Te;for(Te=0;Te<te;++Te){var Pe=P[L+2*Te+0],Fe=15&(Ve=P[L+2*Te+1]),Ue=4369*Fe,Ve=(240&Ve|Ve>>4)*Ue>>16;P[L+2*Te+0]=(240&Pe|Pe>>4)*Ue>>16&240|(15&Pe|Pe<<4)*Ue>>16>>4&15,P[L+2*Te+1]=240&Ve|Fe}L+=Se}}function In(P,L,te,de,Se,Te,Pe,Fe){var Ue,Ve,it=255;for(Ve=0;Ve<Se;++Ve){for(Ue=0;Ue<de;++Ue){var kt=P[L+Ue];Te[Pe+4*Ue]=kt,it&=kt}L+=te,Pe+=Fe}return it!=255}function os(P,L,te,de,Se){var Te;for(Te=0;Te<Se;++Te)te[de+Te]=P[L+Te]>>8}function hi(){Ad=Ar,Fo=qs,Nf=In,po=os}function sl(P,L,te){z[P]=function(de,Se,Te,Pe,Fe,Ue,Ve,it,kt,$e,ft,yt,Lt,wt,Mt,Wt,hr){var tr,Xr=hr-1>>1,Ur=Fe[Ue+0]|Ve[it+0]<<16,Rn=kt[$e+0]|ft[yt+0]<<16;t(de!=null);var Wr=3*Ur+Rn+131074>>2;for(L(de[Se+0],255&Wr,Wr>>16,Lt,wt),Te!=null&&(Wr=3*Rn+Ur+131074>>2,L(Te[Pe+0],255&Wr,Wr>>16,Mt,Wt)),tr=1;tr<=Xr;++tr){var sa=Fe[Ue+tr]|Ve[it+tr]<<16,ds=kt[$e+tr]|ft[yt+tr]<<16,Hn=Ur+sa+Rn+ds+524296,zr=Hn+2*(sa+Rn)>>3;Wr=zr+Ur>>1,Ur=(Hn=Hn+2*(Ur+ds)>>3)+sa>>1,L(de[Se+2*tr-1],255&Wr,Wr>>16,Lt,wt+(2*tr-1)*te),L(de[Se+2*tr-0],255&Ur,Ur>>16,Lt,wt+(2*tr-0)*te),Te!=null&&(Wr=Hn+Rn>>1,Ur=zr+ds>>1,L(Te[Pe+2*tr-1],255&Wr,Wr>>16,Mt,Wt+(2*tr-1)*te),L(Te[Pe+2*tr+0],255&Ur,Ur>>16,Mt,Wt+(2*tr+0)*te)),Ur=sa,Rn=ds}1&hr||(Wr=3*Ur+Rn+131074>>2,L(de[Se+hr-1],255&Wr,Wr>>16,Lt,wt+(hr-1)*te),Te!=null&&(Wr=3*Rn+Ur+131074>>2,L(Te[Pe+hr-1],255&Wr,Wr>>16,Mt,Wt+(hr-1)*te)))}}function Sl(){qi[dx]=t0,qi[dl]=hh,qi[ux]=Np,qi[Bo]=px,qi[Cf]=du,qi[ch]=$c,qi[lu]=uu,qi[Af]=hh,qi[hx]=px,qi[dh]=du,qi[fx]=$c}function Fc(P){return P&-16384?0>P?0:255:P>>gx}function Bc(P,L){return Fc((19077*P>>8)+(26149*L>>8)-14234)}function Rl(P,L,te){return Fc((19077*P>>8)-(6419*L>>8)-(13320*te>>8)+8708)}function Fl(P,L){return Fc((19077*P>>8)+(33050*L>>8)-17685)}function Uc(P,L,te,de,Se){de[Se+0]=Bc(P,te),de[Se+1]=Rl(P,L,te),de[Se+2]=Fl(P,L)}function zc(P,L,te,de,Se){de[Se+0]=Fl(P,L),de[Se+1]=Rl(P,L,te),de[Se+2]=Bc(P,te)}function xs(P,L,te,de,Se){var Te=Rl(P,L,te);L=Te<<3&224|Fl(P,L)>>3,de[Se+0]=248&Bc(P,te)|Te>>5,de[Se+1]=L}function Mo(P,L,te,de,Se){var Te=240&Fl(P,L)|15;de[Se+0]=240&Bc(P,te)|Rl(P,L,te)>>4,de[Se+1]=Te}function qc(P,L,te,de,Se){de[Se+0]=255,Uc(P,L,te,de,Se+1)}function Lo(P,L,te,de,Se){zc(P,L,te,de,Se),de[Se+3]=255}function Ro(P,L,te,de,Se){Uc(P,L,te,de,Se),de[Se+3]=255}function Sa(P,L){return 0>P?0:P>L?L:P}function Bl(P,L,te){z[P]=function(de,Se,Te,Pe,Fe,Ue,Ve,it,kt){for(var $e=it+(-2&kt)*te;it!=$e;)L(de[Se+0],Te[Pe+0],Fe[Ue+0],Ve,it),L(de[Se+1],Te[Pe+0],Fe[Ue+0],Ve,it+te),Se+=2,++Pe,++Ue,it+=2*te;1&kt&&L(de[Se+0],Te[Pe+0],Fe[Ue+0],Ve,it)}}function fi(P,L,te){return te==0?P==0?L==0?6:5:L==0?4:0:te}function iu(P,L,te,de,Se){switch(P>>>30){case 3:rt(L,te,de,Se,0);break;case 2:pt(L,te,de,Se);break;case 1:zt(L,te,de,Se)}}function ps(P,L){var te,de,Se=L.M,Te=L.Nb,Pe=P.oc,Fe=P.pc+40,Ue=P.oc,Ve=P.pc+584,it=P.oc,kt=P.pc+600;for(te=0;16>te;++te)Pe[Fe+32*te-1]=129;for(te=0;8>te;++te)Ue[Ve+32*te-1]=129,it[kt+32*te-1]=129;for(0<Se?Pe[Fe-1-32]=Ue[Ve-1-32]=it[kt-1-32]=129:(a(Pe,Fe-32-1,127,21),a(Ue,Ve-32-1,127,9),a(it,kt-32-1,127,9)),de=0;de<P.za;++de){var $e=L.ya[L.aa+de];if(0<de){for(te=-1;16>te;++te)n(Pe,Fe+32*te-4,Pe,Fe+32*te+12,4);for(te=-1;8>te;++te)n(Ue,Ve+32*te-4,Ue,Ve+32*te+4,4),n(it,kt+32*te-4,it,kt+32*te+4,4)}var ft=P.Gd,yt=P.Hd+de,Lt=$e.ad,wt=$e.Hc;if(0<Se&&(n(Pe,Fe-32,ft[yt].y,0,16),n(Ue,Ve-32,ft[yt].f,0,8),n(it,kt-32,ft[yt].ea,0,8)),$e.Za){var Mt=Pe,Wt=Fe-32+16;for(0<Se&&(de>=P.za-1?a(Mt,Wt,ft[yt].y[15],4):n(Mt,Wt,ft[yt+1].y,0,4)),te=0;4>te;te++)Mt[Wt+128+te]=Mt[Wt+256+te]=Mt[Wt+384+te]=Mt[Wt+0+te];for(te=0;16>te;++te,wt<<=2)Mt=Pe,Wt=Fe+Hs[te],Os[$e.Ob[te]](Mt,Wt),iu(wt,Lt,16*+te,Mt,Wt)}else if(Mt=fi(de,Se,$e.Ob[0]),jl[Mt](Pe,Fe),wt!=0)for(te=0;16>te;++te,wt<<=2)iu(wt,Lt,16*+te,Pe,Fe+Hs[te]);for(te=$e.Gc,Mt=fi(de,Se,$e.Dd),cc[Mt](Ue,Ve),cc[Mt](it,kt),wt=Lt,Mt=Ue,Wt=Ve,255&($e=0|te)&&(170&$e?St(wt,256,Mt,Wt):qt(wt,256,Mt,Wt)),$e=it,wt=kt,255&(te>>=8)&&(170&te?St(Lt,320,$e,wt):qt(Lt,320,$e,wt)),Se<P.Ub-1&&(n(ft[yt].y,0,Pe,Fe+480,16),n(ft[yt].f,0,Ue,Ve+224,8),n(ft[yt].ea,0,it,kt+224,8)),te=8*Te*P.B,ft=P.sa,yt=P.ta+16*de+16*Te*P.R,Lt=P.qa,$e=P.ra+8*de+te,wt=P.Ha,Mt=P.Ia+8*de+te,te=0;16>te;++te)n(ft,yt+te*P.R,Pe,Fe+32*te,16);for(te=0;8>te;++te)n(Lt,$e+te*P.B,Ue,Ve+32*te,8),n(wt,Mt+te*P.B,it,kt+32*te,8)}}function mo(P,L,te,de,Se,Te,Pe,Fe,Ue){var Ve=[0],it=[0],kt=0,$e=Ue!=null?Ue.kd:0,ft=Ue??new Ut;if(P==null||12>te)return 7;ft.data=P,ft.w=L,ft.ha=te,L=[L],te=[te],ft.gb=[ft.gb];e:{var yt=L,Lt=te,wt=ft.gb;if(t(P!=null),t(Lt!=null),t(wt!=null),wt[0]=0,12<=Lt[0]&&!r(P,yt[0],"RIFF")){if(r(P,yt[0]+8,"WEBP")){wt=3;break e}var Mt=Me(P,yt[0]+4);if(12>Mt||4294967286<Mt){wt=3;break e}if($e&&Mt>Lt[0]-8){wt=7;break e}wt[0]=Mt,yt[0]+=12,Lt[0]-=12}wt=0}if(wt!=0)return wt;for(Mt=0<ft.gb[0],te=te[0];;){e:{var Wt=P;Lt=L,wt=te;var hr=Ve,tr=it,Xr=yt=[0];if((Wr=kt=[kt])[0]=0,8>wt[0])wt=7;else{if(!r(Wt,Lt[0],"VP8X")){if(Me(Wt,Lt[0]+4)!=10){wt=3;break e}if(18>wt[0]){wt=7;break e}var Ur=Me(Wt,Lt[0]+8),Rn=1+Ee(Wt,Lt[0]+12);if(2147483648<=Rn*(Wt=1+Ee(Wt,Lt[0]+15))){wt=3;break e}Xr!=null&&(Xr[0]=Ur),hr!=null&&(hr[0]=Rn),tr!=null&&(tr[0]=Wt),Lt[0]+=18,wt[0]-=18,Wr[0]=1}wt=0}}if(kt=kt[0],yt=yt[0],wt!=0)return wt;if(Lt=!!(2&yt),!Mt&&kt)return 3;if(Te!=null&&(Te[0]=!!(16&yt)),Pe!=null&&(Pe[0]=Lt),Fe!=null&&(Fe[0]=0),Pe=Ve[0],yt=it[0],kt&&Lt&&Ue==null){wt=0;break}if(4>te){wt=7;break}if(Mt&&kt||!Mt&&!kt&&!r(P,L[0],"ALPH")){te=[te],ft.na=[ft.na],ft.P=[ft.P],ft.Sa=[ft.Sa];e:{Ur=P,wt=L,Mt=te;var Wr=ft.gb;hr=ft.na,tr=ft.P,Xr=ft.Sa,Rn=22,t(Ur!=null),t(Mt!=null),Wt=wt[0];var sa=Mt[0];for(t(hr!=null),t(Xr!=null),hr[0]=null,tr[0]=null,Xr[0]=0;;){if(wt[0]=Wt,Mt[0]=sa,8>sa){wt=7;break e}var ds=Me(Ur,Wt+4);if(4294967286<ds){wt=3;break e}var Hn=8+ds+1&-2;if(Rn+=Hn,0<Wr&&Rn>Wr){wt=3;break e}if(!r(Ur,Wt,"VP8 ")||!r(Ur,Wt,"VP8L")){wt=0;break e}if(sa[0]<Hn){wt=7;break e}r(Ur,Wt,"ALPH")||(hr[0]=Ur,tr[0]=Wt+8,Xr[0]=ds),Wt+=Hn,sa-=Hn}}if(te=te[0],ft.na=ft.na[0],ft.P=ft.P[0],ft.Sa=ft.Sa[0],wt!=0)break}te=[te],ft.Ja=[ft.Ja],ft.xa=[ft.xa];e:if(Wr=P,wt=L,Mt=te,hr=ft.gb[0],tr=ft.Ja,Xr=ft.xa,Ur=wt[0],Wt=!r(Wr,Ur,"VP8 "),Rn=!r(Wr,Ur,"VP8L"),t(Wr!=null),t(Mt!=null),t(tr!=null),t(Xr!=null),8>Mt[0])wt=7;else{if(Wt||Rn){if(Wr=Me(Wr,Ur+4),12<=hr&&Wr>hr-12){wt=3;break e}if($e&&Wr>Mt[0]-8){wt=7;break e}tr[0]=Wr,wt[0]+=8,Mt[0]-=8,Xr[0]=Rn}else Xr[0]=5<=Mt[0]&&Wr[Ur+0]==47&&!(Wr[Ur+4]>>5),tr[0]=Mt[0];wt=0}if(te=te[0],ft.Ja=ft.Ja[0],ft.xa=ft.xa[0],L=L[0],wt!=0)break;if(4294967286<ft.Ja)return 3;if(Fe==null||Lt||(Fe[0]=ft.xa?2:1),Pe=[Pe],yt=[yt],ft.xa){if(5>te){wt=7;break}Fe=Pe,$e=yt,Lt=Te,P==null||5>te?P=0:5<=te&&P[L+0]==47&&!(P[L+4]>>5)?(Mt=[0],Wr=[0],hr=[0],_e(tr=new ee,P,L,te),qr(tr,Mt,Wr,hr)?(Fe!=null&&(Fe[0]=Mt[0]),$e!=null&&($e[0]=Wr[0]),Lt!=null&&(Lt[0]=hr[0]),P=1):P=0):P=0}else{if(10>te){wt=7;break}Fe=yt,P==null||10>te||!ta(P,L+3,te-3)?P=0:($e=P[L+0]|P[L+1]<<8|P[L+2]<<16,Lt=16383&(P[L+7]<<8|P[L+6]),P=16383&(P[L+9]<<8|P[L+8]),1&$e||3<($e>>1&7)||!($e>>4&1)||$e>>5>=ft.Ja||!Lt||!P?P=0:(Pe&&(Pe[0]=Lt),Fe&&(Fe[0]=P),P=1))}if(!P||(Pe=Pe[0],yt=yt[0],kt&&(Ve[0]!=Pe||it[0]!=yt)))return 3;Ue!=null&&(Ue[0]=ft,Ue.offset=L-Ue.w,t(4294967286>L-Ue.w),t(Ue.offset==Ue.ha-te));break}return wt==0||wt==7&&kt&&Ue==null?(Te!=null&&(Te[0]|=ft.na!=null&&0<ft.na.length),de!=null&&(de[0]=Pe),Se!=null&&(Se[0]=yt),0):wt}function xo(P,L,te){var de=L.width,Se=L.height,Te=0,Pe=0,Fe=de,Ue=Se;if(L.Da=P!=null&&0<P.Da,L.Da&&(Fe=P.cd,Ue=P.bd,Te=P.v,Pe=P.j,11>te||(Te&=-2,Pe&=-2),0>Te||0>Pe||0>=Fe||0>=Ue||Te+Fe>de||Pe+Ue>Se))return 0;if(L.v=Te,L.j=Pe,L.va=Te+Fe,L.o=Pe+Ue,L.U=Fe,L.T=Ue,L.da=P!=null&&0<P.da,L.da){if(!ut(Fe,Ue,te=[P.ib],Te=[P.hb]))return 0;L.ib=te[0],L.hb=Te[0]}return L.ob=P!=null&&P.ob,L.Kb=P==null||!P.Sd,L.da&&(L.ob=L.ib<3*de/4&&L.hb<3*Se/4,L.Kb=0),1}function Qu(P){if(P==null)return 2;if(11>P.S){var L=P.f.RGBA;L.fb+=(P.height-1)*L.A,L.A=-L.A}else L=P.f.kb,P=P.height,L.O+=(P-1)*L.fa,L.fa=-L.fa,L.N+=(P-1>>1)*L.Ab,L.Ab=-L.Ab,L.W+=(P-1>>1)*L.Db,L.Db=-L.Db,L.F!=null&&(L.J+=(P-1)*L.lb,L.lb=-L.lb);return 0}function Ul(P,L,te,de){if(de==null||0>=P||0>=L)return 2;if(te!=null){if(te.Da){var Se=te.cd,Te=te.bd,Pe=-2&te.v,Fe=-2&te.j;if(0>Pe||0>Fe||0>=Se||0>=Te||Pe+Se>P||Fe+Te>L)return 2;P=Se,L=Te}if(te.da){if(!ut(P,L,Se=[te.ib],Te=[te.hb]))return 2;P=Se[0],L=Te[0]}}de.width=P,de.height=L;e:{var Ue=de.width,Ve=de.height;if(P=de.S,0>=Ue||0>=Ve||!(P>=dx&&13>P))P=2;else{if(0>=de.Rd&&de.sd==null){Pe=Te=Se=L=0;var it=(Fe=Ue*vx[P])*Ve;if(11>P||(Te=(Ve+1)/2*(L=(Ue+1)/2),P==12&&(Pe=(Se=Ue)*Ve)),(Ve=i(it+2*Te+Pe))==null){P=1;break e}de.sd=Ve,11>P?((Ue=de.f.RGBA).eb=Ve,Ue.fb=0,Ue.A=Fe,Ue.size=it):((Ue=de.f.kb).y=Ve,Ue.O=0,Ue.fa=Fe,Ue.Fd=it,Ue.f=Ve,Ue.N=0+it,Ue.Ab=L,Ue.Cd=Te,Ue.ea=Ve,Ue.W=0+it+Te,Ue.Db=L,Ue.Ed=Te,P==12&&(Ue.F=Ve,Ue.J=0+it+2*Te),Ue.Tc=Pe,Ue.lb=Se)}if(L=1,Se=de.S,Te=de.width,Pe=de.height,Se>=dx&&13>Se)if(11>Se)P=de.f.RGBA,L&=(Fe=Math.abs(P.A))*(Pe-1)+Te<=P.size,L&=Fe>=Te*vx[Se],L&=P.eb!=null;else{P=de.f.kb,Fe=(Te+1)/2,it=(Pe+1)/2,Ue=Math.abs(P.fa),Ve=Math.abs(P.Ab);var kt=Math.abs(P.Db),$e=Math.abs(P.lb),ft=$e*(Pe-1)+Te;L&=Ue*(Pe-1)+Te<=P.Fd,L&=Ve*(it-1)+Fe<=P.Cd,L=(L&=kt*(it-1)+Fe<=P.Ed)&Ue>=Te&Ve>=Fe&kt>=Fe,L&=P.y!=null,L&=P.f!=null,L&=P.ea!=null,Se==12&&(L&=$e>=Te,L&=ft<=P.Tc,L&=P.F!=null)}else L=0;P=L?0:2}}return P!=0||te!=null&&te.fd&&(P=Qu(de)),P}var mi=64,il=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],xi=24,ll=32,zn=8,zl=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];We("Predictor0","PredictorAdd0"),z.Predictor0=function(){return 4278190080},z.Predictor1=function(P){return P},z.Predictor2=function(P,L,te){return L[te+0]},z.Predictor3=function(P,L,te){return L[te+1]},z.Predictor4=function(P,L,te){return L[te-1]},z.Predictor5=function(P,L,te){return Dt(Dt(P,L[te+1]),L[te+0])},z.Predictor6=function(P,L,te){return Dt(P,L[te-1])},z.Predictor7=function(P,L,te){return Dt(P,L[te+0])},z.Predictor8=function(P,L,te){return Dt(L[te-1],L[te+0])},z.Predictor9=function(P,L,te){return Dt(L[te+0],L[te+1])},z.Predictor10=function(P,L,te){return Dt(Dt(P,L[te-1]),Dt(L[te+0],L[te+1]))},z.Predictor11=function(P,L,te){var de=L[te+0];return 0>=nr(de>>24&255,P>>24&255,(L=L[te-1])>>24&255)+nr(de>>16&255,P>>16&255,L>>16&255)+nr(de>>8&255,P>>8&255,L>>8&255)+nr(255&de,255&P,255&L)?de:P},z.Predictor12=function(P,L,te){var de=L[te+0];return(fr((P>>24&255)+(de>>24&255)-((L=L[te-1])>>24&255))<<24|fr((P>>16&255)+(de>>16&255)-(L>>16&255))<<16|fr((P>>8&255)+(de>>8&255)-(L>>8&255))<<8|fr((255&P)+(255&de)-(255&L)))>>>0},z.Predictor13=function(P,L,te){var de=L[te-1];return(xr((P=Dt(P,L[te+0]))>>24&255,de>>24&255)<<24|xr(P>>16&255,de>>16&255)<<16|xr(P>>8&255,de>>8&255)<<8|xr(255&P,255&de))>>>0};var pe=z.PredictorAdd0;z.PredictorAdd1=Mr,We("Predictor2","PredictorAdd2"),We("Predictor3","PredictorAdd3"),We("Predictor4","PredictorAdd4"),We("Predictor5","PredictorAdd5"),We("Predictor6","PredictorAdd6"),We("Predictor7","PredictorAdd7"),We("Predictor8","PredictorAdd8"),We("Predictor9","PredictorAdd9"),We("Predictor10","PredictorAdd10"),We("Predictor11","PredictorAdd11"),We("Predictor12","PredictorAdd12"),We("Predictor13","PredictorAdd13");var h=z.PredictorAdd2;cr("ColorIndexInverseTransform","MapARGB","32b",function(P){return P>>8&255},function(P){return P}),cr("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(P){return P},function(P){return P>>8&255});var x,b=z.ColorIndexInverseTransform,_=z.MapARGB,j=z.VP8LColorIndexInverseTransformAlpha,A=z.MapAlpha,I=z.VP8LPredictorsAdd=[];I.length=16,(z.VP8LPredictors=[]).length=16,(z.VP8LPredictorsAdd_C=[]).length=16,(z.VP8LPredictors_C=[]).length=16;var F,X,ce,ge,Ae,qe,Ye,rt,pt,St,zt,qt,Ft,sn,gn,Ya,pi,Xs,ja,Ys,ol,Cd,Hc,kf,Ad,Fo,Nf,po,Ju=i(511),ox=i(2041),_f=i(225),Sf=i(767),cx=0,Ed=ox,jf=_f,cl=Sf,Ui=Ju,dx=0,dl=1,ux=2,Bo=3,Cf=4,ch=5,lu=6,Af=7,hx=8,dh=9,fx=10,Uo=[2,3,7],uh=[3,3,11],e0=[280,256,256,256,40],mx=[0,1,1,1,0],Ef=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],zo=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],qo=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],ou=8,Ho=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],$o=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],go=null,hv=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],wp=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],xx=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],fv=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],zi=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],cs=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],oa=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],jl=[],Os=[],cc=[],cu=1,kp=2,Td=[],qi=[];sl("UpsampleRgbLinePair",Uc,3),sl("UpsampleBgrLinePair",zc,3),sl("UpsampleRgbaLinePair",Ro,4),sl("UpsampleBgraLinePair",Lo,4),sl("UpsampleArgbLinePair",qc,4),sl("UpsampleRgba4444LinePair",Mo,2),sl("UpsampleRgb565LinePair",xs,2);var t0=z.UpsampleRgbLinePair,Np=z.UpsampleBgrLinePair,hh=z.UpsampleRgbaLinePair,px=z.UpsampleBgraLinePair,du=z.UpsampleArgbLinePair,$c=z.UpsampleRgba4444LinePair,uu=z.UpsampleRgb565LinePair,Vo=16,fh=1<<Vo-1,r0=-227,hu=482,gx=6,fu=0,Hi=i(256),bx=i(256),mv=i(256),Kk=i(256),Gk=i(hu-r0),Xk=i(hu-r0);Bl("YuvToRgbRow",Uc,3),Bl("YuvToBgrRow",zc,3),Bl("YuvToRgbaRow",Ro,4),Bl("YuvToBgraRow",Lo,4),Bl("YuvToArgbRow",qc,4),Bl("YuvToRgba4444Row",Mo,2),Bl("YuvToRgb565Row",xs,2);var Hs=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],mh=[0,2,8],Tf=[8,7,6,4,4,2,2,2,1,1,1,1],Of=1;this.WebPDecodeRGBA=function(P,L,te,de,Se){var Te=dl,Pe=new gt,Fe=new Ke;Pe.ba=Fe,Fe.S=Te,Fe.width=[Fe.width],Fe.height=[Fe.height];var Ue=Fe.width,Ve=Fe.height,it=new Et;if(it==null||P==null)var kt=2;else t(it!=null),kt=mo(P,L,te,it.width,it.height,it.Pd,it.Qd,it.format,null);if(kt!=0?Ue=0:(Ue!=null&&(Ue[0]=it.width[0]),Ve!=null&&(Ve[0]=it.height[0]),Ue=1),Ue){Fe.width=Fe.width[0],Fe.height=Fe.height[0],de!=null&&(de[0]=Fe.width),Se!=null&&(Se[0]=Fe.height);e:{if(de=new ss,(Se=new Ut).data=P,Se.w=L,Se.ha=te,Se.kd=1,L=[0],t(Se!=null),((P=mo(Se.data,Se.w,Se.ha,null,null,null,L,null,Se))==0||P==7)&&L[0]&&(P=4),(L=P)==0){if(t(Pe!=null),de.data=Se.data,de.w=Se.w+Se.offset,de.ha=Se.ha-Se.offset,de.put=sr,de.ac=Pr,de.bc=Or,de.ma=Pe,Se.xa){if((P=Ze())==null){Pe=1;break e}if((function($e,ft){var yt=[0],Lt=[0],wt=[0];t:for(;;){if($e==null)return 0;if(ft==null)return $e.a=2,0;if($e.l=ft,$e.a=0,_e($e.m,ft.data,ft.w,ft.ha),!qr($e.m,yt,Lt,wt)){$e.a=3;break t}if($e.xb=kp,ft.width=yt[0],ft.height=Lt[0],!mt(yt[0],Lt[0],1,$e,null))break t;return 1}return t($e.a!=0),0})(P,de)){if(de=(L=Ul(de.width,de.height,Pe.Oa,Pe.ba))==0){t:{de=P;r:for(;;){if(de==null){de=0;break t}if(t(de.s.yc!=null),t(de.s.Ya!=null),t(0<de.s.Wb),t((te=de.l)!=null),t((Se=te.ma)!=null),de.xb!=0){if(de.ca=Se.ba,de.tb=Se.tb,t(de.ca!=null),!xo(Se.Oa,te,Bo)){de.a=2;break r}if(!ct(de,te.width)||te.da)break r;if((te.da||Yt(de.ca.S))&&hi(),11>de.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),de.ca.f.kb.F!=null&&hi()),de.Pb&&0<de.s.ua&&de.s.vb.X==null&&!ye(de.s.vb,de.s.Wa.Xa)){de.a=1;break r}de.xb=0}if(!ze(de,de.V,de.Ba,de.c,de.i,te.o,De))break r;Se.Dc=de.Ma,de=1;break t}t(de.a!=0),de=0}de=!de}de&&(L=P.a)}else L=P.a}else{if((P=new To)==null){Pe=1;break e}if(P.Fa=Se.na,P.P=Se.P,P.qc=Se.Sa,rl(P,de)){if((L=Ul(de.width,de.height,Pe.Oa,Pe.ba))==0){if(P.Aa=0,te=Pe.Oa,t((Se=P)!=null),te!=null){if(0<(Ue=0>(Ue=te.Md)?0:100<Ue?255:255*Ue/100)){for(Ve=it=0;4>Ve;++Ve)12>(kt=Se.pb[Ve]).lc&&(kt.ia=Ue*Tf[0>kt.lc?0:kt.lc]>>3),it|=kt.ia;it&&(alert("todo:VP8InitRandom"),Se.ia=1)}Se.Ga=te.Id,100<Se.Ga?Se.Ga=100:0>Se.Ga&&(Se.Ga=0)}(function($e,ft){if($e==null)return 0;if(ft==null)return cn($e,2,"NULL VP8Io parameter in VP8Decode().");if(!$e.cb&&!rl($e,ft))return 0;if(t($e.cb),ft.ac==null||ft.ac(ft)){ft.ob&&($e.L=0);var yt=mh[$e.L];if($e.L==2?($e.yb=0,$e.zb=0):($e.yb=ft.v-yt>>4,$e.zb=ft.j-yt>>4,0>$e.yb&&($e.yb=0),0>$e.zb&&($e.zb=0)),$e.Va=ft.o+15+yt>>4,$e.Hb=ft.va+15+yt>>4,$e.Hb>$e.za&&($e.Hb=$e.za),$e.Va>$e.Ub&&($e.Va=$e.Ub),0<$e.L){var Lt=$e.ed;for(yt=0;4>yt;++yt){var wt;if($e.Qa.Cb){var Mt=$e.Qa.Lb[yt];$e.Qa.Fb||(Mt+=Lt.Tb)}else Mt=Lt.Tb;for(wt=0;1>=wt;++wt){var Wt=$e.gd[yt][wt],hr=Mt;if(Lt.Pc&&(hr+=Lt.vd[0],wt&&(hr+=Lt.od[0])),0<(hr=0>hr?0:63<hr?63:hr)){var tr=hr;0<Lt.wb&&(tr=4<Lt.wb?tr>>2:tr>>1)>9-Lt.wb&&(tr=9-Lt.wb),1>tr&&(tr=1),Wt.dd=tr,Wt.tc=2*hr+tr,Wt.ld=40<=hr?2:15<=hr?1:0}else Wt.tc=0;Wt.La=wt}}}yt=0}else cn($e,6,"Frame setup failed"),yt=$e.a;if(yt=yt==0){if(yt){$e.$c=0,0<$e.Aa||($e.Ic=Of);t:{yt=$e.Ic,Lt=4*(tr=$e.za);var Xr=32*tr,Ur=tr+1,Rn=0<$e.L?tr*(0<$e.Aa?2:1):0,Wr=($e.Aa==2?2:1)*tr;if((Wt=Lt+832+(wt=3*(16*yt+mh[$e.L])/2*Xr)+(Mt=$e.Fa!=null&&0<$e.Fa.length?$e.Kc.c*$e.Kc.i:0))!=Wt)yt=0;else{if(Wt>$e.Vb){if($e.Vb=0,$e.Ec=i(Wt),$e.Fc=0,$e.Ec==null){yt=cn($e,1,"no memory during frame initialization.");break t}$e.Vb=Wt}Wt=$e.Ec,hr=$e.Fc,$e.Ac=Wt,$e.Bc=hr,hr+=Lt,$e.Gd=l(Xr,an),$e.Hd=0,$e.rb=l(Ur+1,en),$e.sb=1,$e.wa=Rn?l(Rn,Un):null,$e.Y=0,$e.D.Nb=0,$e.D.wa=$e.wa,$e.D.Y=$e.Y,0<$e.Aa&&($e.D.Y+=tr),t(!0),$e.oc=Wt,$e.pc=hr,hr+=832,$e.ya=l(Wr,Ci),$e.aa=0,$e.D.ya=$e.ya,$e.D.aa=$e.aa,$e.Aa==2&&($e.D.aa+=tr),$e.R=16*tr,$e.B=8*tr,tr=(Xr=mh[$e.L])*$e.R,Xr=Xr/2*$e.B,$e.sa=Wt,$e.ta=hr+tr,$e.qa=$e.sa,$e.ra=$e.ta+16*yt*$e.R+Xr,$e.Ha=$e.qa,$e.Ia=$e.ra+8*yt*$e.B+Xr,$e.$c=0,hr+=wt,$e.mb=Mt?Wt:null,$e.nb=Mt?hr:null,t(hr+Mt<=$e.Fc+$e.Vb),pa($e),a($e.Ac,$e.Bc,0,Lt),yt=1}}if(yt){if(ft.ka=0,ft.y=$e.sa,ft.O=$e.ta,ft.f=$e.qa,ft.N=$e.ra,ft.ea=$e.Ha,ft.Vd=$e.Ia,ft.fa=$e.R,ft.Rc=$e.B,ft.F=null,ft.J=0,!cx){for(yt=-255;255>=yt;++yt)Ju[255+yt]=0>yt?-yt:yt;for(yt=-1020;1020>=yt;++yt)ox[1020+yt]=-128>yt?-128:127<yt?127:yt;for(yt=-112;112>=yt;++yt)_f[112+yt]=-16>yt?-16:15<yt?15:yt;for(yt=-255;510>=yt;++yt)Sf[255+yt]=0>yt?0:255<yt?255:yt;cx=1}Ye=za,rt=ht,St=Be,zt=vr,qt=Pn,pt=dn,Ft=jd,sn=fo,gn=G,Ya=ve,pi=oc,Xs=Tt,ja=He,Ys=tt,ol=Lc,Cd=lc,Hc=Rc,kf=Sd,Os[0]=un,Os[1]=Ai,Os[2]=Ll,Os[3]=uo,Os[4]=oh,Os[5]=la,Os[6]=hn,Os[7]=Zu,Os[8]=al,Os[9]=ic,jl[0]=kl,jl[1]=Dr,jl[2]=na,jl[3]=oo,jl[4]=nl,jl[5]=co,jl[6]=kd,cc[0]=_l,cc[1]=Qn,cc[2]=Nl,cc[3]=Oo,cc[4]=Nd,cc[5]=Po,cc[6]=ms,yt=1}else yt=0}yt&&(yt=(function(sa,ds){for(sa.M=0;sa.M<sa.Va;++sa.M){var Hn,zr=sa.Jc[sa.M&sa.Xb],jr=sa.m,vs=sa;for(Hn=0;Hn<vs.za;++Hn){var Sn=jr,Wn=vs,La=Wn.Ac,gi=Wn.Bc+4*Hn,$i=Wn.zc,Za=Wn.ya[Wn.aa+Hn];if(Wn.Qa.Bb?Za.$b=je(Sn,Wn.Pa.jb[0])?2+je(Sn,Wn.Pa.jb[2]):je(Sn,Wn.Pa.jb[1]):Za.$b=0,Wn.kc&&(Za.Ad=je(Sn,Wn.Bd)),Za.Za=!je(Sn,145)+0,Za.Za){var Zs=Za.Ob,ul=0;for(Wn=0;4>Wn;++Wn){var Qs,Jn=$i[0+Wn];for(Qs=0;4>Qs;++Qs){Jn=zi[La[gi+Qs]][Jn];for(var ya=xx[je(Sn,Jn[0])];0<ya;)ya=xx[2*ya+je(Sn,Jn[ya])];Jn=-ya,La[gi+Qs]=Jn}n(Zs,ul,La,gi,4),ul+=4,$i[0+Wn]=Jn}}else Jn=je(Sn,156)?je(Sn,128)?1:3:je(Sn,163)?2:0,Za.Ob[0]=Jn,a(La,gi,Jn,4),a($i,0,Jn,4);Za.Dd=je(Sn,142)?je(Sn,114)?je(Sn,183)?1:3:2:0}if(vs.m.Ka)return cn(sa,7,"Premature end-of-partition0 encountered.");for(;sa.ja<sa.za;++sa.ja){if(vs=zr,Sn=(jr=sa).rb[jr.sb-1],La=jr.rb[jr.sb+jr.ja],Hn=jr.ya[jr.aa+jr.ja],gi=jr.kc?Hn.Ad:0)Sn.la=La.la=0,Hn.Za||(Sn.Na=La.Na=0),Hn.Hc=0,Hn.Gc=0,Hn.ia=0;else{var ys,Ca;if(Sn=La,La=vs,gi=jr.Pa.Xc,$i=jr.ya[jr.aa+jr.ja],Za=jr.pb[$i.$b],Wn=$i.ad,Zs=0,ul=jr.rb[jr.sb-1],Jn=Qs=0,a(Wn,Zs,0,384),$i.Za)var bi=0,ws=gi[3];else{ya=i(16);var wa=Sn.Na+ul.Na;if(wa=go(La,gi[1],wa,Za.Eb,0,ya,0),Sn.Na=ul.Na=(0<wa)+0,1<wa)Ye(ya,0,Wn,Zs);else{var $s=ya[0]+3>>3;for(ya=0;256>ya;ya+=16)Wn[Zs+ya]=$s}bi=1,ws=gi[0]}var Ra=15&Sn.la,Js=15&ul.la;for(ya=0;4>ya;++ya){var ei=1&Js;for($s=Ca=0;4>$s;++$s)Ra=Ra>>1|(ei=(wa=go(La,ws,wa=ei+(1&Ra),Za.Sc,bi,Wn,Zs))>bi)<<7,Ca=Ca<<2|(3<wa?3:1<wa?2:Wn[Zs+0]!=0),Zs+=16;Ra>>=4,Js=Js>>1|ei<<7,Qs=(Qs<<8|Ca)>>>0}for(ws=Ra,bi=Js>>4,ys=0;4>ys;ys+=2){for(Ca=0,Ra=Sn.la>>4+ys,Js=ul.la>>4+ys,ya=0;2>ya;++ya){for(ei=1&Js,$s=0;2>$s;++$s)wa=ei+(1&Ra),Ra=Ra>>1|(ei=0<(wa=go(La,gi[2],wa,Za.Qc,0,Wn,Zs)))<<3,Ca=Ca<<2|(3<wa?3:1<wa?2:Wn[Zs+0]!=0),Zs+=16;Ra>>=2,Js=Js>>1|ei<<5}Jn|=Ca<<4*ys,ws|=Ra<<4<<ys,bi|=(240&Js)<<ys}Sn.la=ws,ul.la=bi,$i.Hc=Qs,$i.Gc=Jn,$i.ia=43690&Jn?0:Za.ia,gi=!(Qs|Jn)}if(0<jr.L&&(jr.wa[jr.Y+jr.ja]=jr.gd[Hn.$b][Hn.Za],jr.wa[jr.Y+jr.ja].La|=!gi),vs.Ka)return cn(sa,7,"Premature end-of-file encountered.")}if(pa(sa),jr=ds,vs=1,Hn=(zr=sa).D,Sn=0<zr.L&&zr.M>=zr.zb&&zr.M<=zr.Va,zr.Aa==0)t:{if(Hn.M=zr.M,Hn.uc=Sn,ps(zr,Hn),vs=1,Hn=(Ca=zr.D).Nb,Sn=(Jn=mh[zr.L])*zr.R,La=Jn/2*zr.B,ya=16*Hn*zr.R,$s=8*Hn*zr.B,gi=zr.sa,$i=zr.ta-Sn+ya,Za=zr.qa,Wn=zr.ra-La+$s,Zs=zr.Ha,ul=zr.Ia-La+$s,Js=(Ra=Ca.M)==0,Qs=Ra>=zr.Va-1,zr.Aa==2&&ps(zr,Ca),Ca.uc)for(ei=(wa=zr).D.M,t(wa.D.uc),Ca=wa.yb;Ca<wa.Hb;++Ca){bi=Ca,ws=ei;var qa=(ga=(ti=wa).D).Nb;ys=ti.R;var ga=ga.wa[ga.Y+bi],hl=ti.sa,Ps=ti.ta+16*qa*ys+16*bi,fn=ga.dd,bn=ga.tc;if(bn!=0)if(t(3<=bn),ti.L==1)0<bi&&Cd(hl,Ps,ys,bn+4),ga.La&&kf(hl,Ps,ys,bn),0<ws&&ol(hl,Ps,ys,bn+4),ga.La&&Hc(hl,Ps,ys,bn);else{var ka=ti.B,ql=ti.qa,Wo=ti.ra+8*qa*ka+8*bi,Cl=ti.Ha,ti=ti.Ia+8*qa*ka+8*bi;qa=ga.ld,0<bi&&(sn(hl,Ps,ys,bn+4,fn,qa),Ya(ql,Wo,Cl,ti,ka,bn+4,fn,qa)),ga.La&&(Xs(hl,Ps,ys,bn,fn,qa),Ys(ql,Wo,Cl,ti,ka,bn,fn,qa)),0<ws&&(Ft(hl,Ps,ys,bn+4,fn,qa),gn(ql,Wo,Cl,ti,ka,bn+4,fn,qa)),ga.La&&(pi(hl,Ps,ys,bn,fn,qa),ja(ql,Wo,Cl,ti,ka,bn,fn,qa))}}if(zr.ia&&alert("todo:DitherRow"),jr.put!=null){if(Ca=16*Ra,Ra=16*(Ra+1),Js?(jr.y=zr.sa,jr.O=zr.ta+ya,jr.f=zr.qa,jr.N=zr.ra+$s,jr.ea=zr.Ha,jr.W=zr.Ia+$s):(Ca-=Jn,jr.y=gi,jr.O=$i,jr.f=Za,jr.N=Wn,jr.ea=Zs,jr.W=ul),Qs||(Ra-=Jn),Ra>jr.o&&(Ra=jr.o),jr.F=null,jr.J=null,zr.Fa!=null&&0<zr.Fa.length&&Ca<Ra&&(jr.J=jn(zr,jr,Ca,Ra-Ca),jr.F=zr.mb,jr.F==null&&jr.F.length==0)){vs=cn(zr,3,"Could not decode alpha data.");break t}Ca<jr.j&&(Jn=jr.j-Ca,Ca=jr.j,t(!(1&Jn)),jr.O+=zr.R*Jn,jr.N+=zr.B*(Jn>>1),jr.W+=zr.B*(Jn>>1),jr.F!=null&&(jr.J+=jr.width*Jn)),Ca<Ra&&(jr.O+=jr.v,jr.N+=jr.v>>1,jr.W+=jr.v>>1,jr.F!=null&&(jr.J+=jr.v),jr.ka=Ca-jr.j,jr.U=jr.va-jr.v,jr.T=Ra-Ca,vs=jr.put(jr))}Hn+1!=zr.Ic||Qs||(n(zr.sa,zr.ta-Sn,gi,$i+16*zr.R,Sn),n(zr.qa,zr.ra-La,Za,Wn+8*zr.B,La),n(zr.Ha,zr.Ia-La,Zs,ul+8*zr.B,La))}if(!vs)return cn(sa,6,"Output aborted.")}return 1})($e,ft)),ft.bc!=null&&ft.bc(ft),yt&=1}return yt?($e.cb=0,yt):0})(P,de)||(L=P.a)}}else L=P.a}L==0&&Pe.Oa!=null&&Pe.Oa.fd&&(L=Qu(Pe.ba))}Pe=L}Te=Pe!=0?null:11>Te?Fe.f.RGBA.eb:Fe.f.kb.y}else Te=null;return Te};var vx=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function d(z,Z){for(var H="",K=0;K<4;K++)H+=String.fromCharCode(z[Z++]);return H}function f(z,Z){return z[Z+0]|z[Z+1]<<8}function p(z,Z){return(z[Z+0]|z[Z+1]<<8|z[Z+2]<<16)>>>0}function y(z,Z){return(z[Z+0]|z[Z+1]<<8|z[Z+2]<<16|z[Z+3]<<24)>>>0}new c;var g=[0],N=[0],w=[],k=new c,S=e,O=(function(z,Z){var H={},K=0,J=!1,ae=0,se=0;if(H.frames=[],!(function(B,ee){for(var Y=0;Y<4;Y++)if(B[ee+Y]!="RIFF".charCodeAt(Y))return!0;return!1})(z,Z)){for(y(z,Z+=4),Z+=8;Z<z.length;){var ue=d(z,Z),fe=y(z,Z+=4);Z+=4;var ke=fe+(1&fe);switch(ue){case"VP8 ":case"VP8L":H.frames[K]===void 0&&(H.frames[K]={}),(xe=H.frames[K]).src_off=J?se:Z-8,xe.src_size=ae+fe+8,K++,J&&(J=!1,ae=0,se=0);break;case"VP8X":(xe=H.header={}).feature_flags=z[Z];var _e=Z+4;xe.canvas_width=1+p(z,_e),_e+=3,xe.canvas_height=1+p(z,_e),_e+=3;break;case"ALPH":J=!0,ae=ke+8,se=Z-8;break;case"ANIM":(xe=H.header).bgcolor=y(z,Z),_e=Z+4,xe.loop_count=f(z,_e),_e+=2;break;case"ANMF":var Le,xe;(xe=H.frames[K]={}).offset_x=2*p(z,Z),Z+=3,xe.offset_y=2*p(z,Z),Z+=3,xe.width=1+p(z,Z),Z+=3,xe.height=1+p(z,Z),Z+=3,xe.duration=p(z,Z),Z+=3,Le=z[Z++],xe.dispose=1&Le,xe.blend=Le>>1&1}ue!="ANMF"&&(Z+=ke)}return H}})(S,0);O.response=S,O.rgbaoutput=!0,O.dataurl=!1;var E=O.header?O.header:null,D=O.frames?O.frames:null;if(E){E.loop_counter=E.loop_count,g=[E.canvas_height],N=[E.canvas_width];for(var q=0;q<D.length&&D[q].blend!=0;q++);}var W=D[0],R=k.WebPDecodeRGBA(S,W.src_off,W.src_size,N,g);W.rgba=R,W.imgwidth=N[0],W.imgheight=g[0];for(var U=0;U<N[0]*g[0]*4;U++)w[U]=R[U];return this.width=N,this.height=g,this.data=w,this}(function(e){var t,r,n,a,i,l,o,c,d,f=function(B){return B=B||{},this.isStrokeTransparent=B.isStrokeTransparent||!1,this.strokeOpacity=B.strokeOpacity||1,this.strokeStyle=B.strokeStyle||"#000000",this.fillStyle=B.fillStyle||"#000000",this.isFillTransparent=B.isFillTransparent||!1,this.fillOpacity=B.fillOpacity||1,this.font=B.font||"10px sans-serif",this.textBaseline=B.textBaseline||"alphabetic",this.textAlign=B.textAlign||"left",this.lineWidth=B.lineWidth||1,this.lineJoin=B.lineJoin||"miter",this.lineCap=B.lineCap||"butt",this.path=B.path||[],this.transform=B.transform!==void 0?B.transform.clone():new c,this.globalCompositeOperation=B.globalCompositeOperation||"normal",this.globalAlpha=B.globalAlpha||1,this.clip_path=B.clip_path||[],this.currentPoint=B.currentPoint||new l,this.miterLimit=B.miterLimit||10,this.lastPoint=B.lastPoint||new l,this.lineDashOffset=B.lineDashOffset||0,this.lineDash=B.lineDash||[],this.margin=B.margin||[0,0,0,0],this.prevPageLastElemOffset=B.prevPageLastElemOffset||0,this.ignoreClearRect=typeof B.ignoreClearRect!="boolean"||B.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new p(this),t=this.internal.f2,r=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,a=this.internal.getHorizontalCoordinate,i=this.internal.getVerticalCoordinate,l=this.internal.Point,o=this.internal.Rectangle,c=this.internal.Matrix,d=new f}]);var p=function(B){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var ee=B;Object.defineProperty(this,"pdf",{get:function(){return ee}});var Y=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return Y},set:function(Me){Y=!!Me}});var re=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return re},set:function(Me){re=!!Me}});var Q=0;Object.defineProperty(this,"posX",{get:function(){return Q},set:function(Me){isNaN(Me)||(Q=Me)}});var Ce=0;Object.defineProperty(this,"posY",{get:function(){return Ce},set:function(Me){isNaN(Me)||(Ce=Me)}}),Object.defineProperty(this,"margin",{get:function(){return d.margin},set:function(Me){var ye;typeof Me=="number"?ye=[Me,Me,Me,Me]:((ye=new Array(4))[0]=Me[0],ye[1]=Me.length>=2?Me[1]:ye[0],ye[2]=Me.length>=3?Me[2]:ye[0],ye[3]=Me.length>=4?Me[3]:ye[1]),d.margin=ye}});var me=!1;Object.defineProperty(this,"autoPaging",{get:function(){return me},set:function(Me){me=Me}});var ie=0;Object.defineProperty(this,"lastBreak",{get:function(){return ie},set:function(Me){ie=Me}});var je=[];Object.defineProperty(this,"pageBreaks",{get:function(){return je},set:function(Me){je=Me}}),Object.defineProperty(this,"ctx",{get:function(){return d},set:function(Me){Me instanceof f&&(d=Me)}}),Object.defineProperty(this,"path",{get:function(){return d.path},set:function(Me){d.path=Me}});var be=[];Object.defineProperty(this,"ctxStack",{get:function(){return be},set:function(Me){be=Me}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Me){var ye;ye=y(Me),this.ctx.fillStyle=ye.style,this.ctx.isFillTransparent=ye.a===0,this.ctx.fillOpacity=ye.a,this.pdf.setFillColor(ye.r,ye.g,ye.b,{a:ye.a}),this.pdf.setTextColor(ye.r,ye.g,ye.b,{a:ye.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Me){var ye=y(Me);this.ctx.strokeStyle=ye.style,this.ctx.isStrokeTransparent=ye.a===0,this.ctx.strokeOpacity=ye.a,ye.a===0?this.pdf.setDrawColor(255,255,255):(ye.a,this.pdf.setDrawColor(ye.r,ye.g,ye.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Me){["butt","round","square"].indexOf(Me)!==-1&&(this.ctx.lineCap=Me,this.pdf.setLineCap(Me))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Me){isNaN(Me)||(this.ctx.lineWidth=Me,this.pdf.setLineWidth(Me))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Me){["bevel","round","miter"].indexOf(Me)!==-1&&(this.ctx.lineJoin=Me,this.pdf.setLineJoin(Me))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Me){isNaN(Me)||(this.ctx.miterLimit=Me,this.pdf.setMiterLimit(Me))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Me){this.ctx.textBaseline=Me}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Me){["right","end","center","left","start"].indexOf(Me)!==-1&&(this.ctx.textAlign=Me)}});var le=null,Ee=null;Object.defineProperty(this,"fontFaces",{get:function(){return Ee},set:function(Me){le=null,Ee=Me}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Me){var ye;if(this.ctx.font=Me,(ye=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Me))!==null){var at=ye[1];ye[2];var lt=ye[3],ut=ye[4];ye[5];var nt=ye[6],ot=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(ut)[2];ut=Math.floor(ot==="px"?parseFloat(ut)*this.pdf.internal.scaleFactor:ot==="em"?parseFloat(ut)*this.pdf.getFontSize():parseFloat(ut)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(ut);var We=(function(Vt){var cr,br,ar=[],xt=Vt.trim();if(xt==="")return MN;if(xt in GM)return[GM[xt]];for(;xt!=="";){switch(br=null,cr=(xt=YM(xt)).charAt(0)){case'"':case"'":br=qEe(xt.substring(1),cr);break;default:br=HEe(xt)}if(br===null||(ar.push(br[0]),(xt=YM(br[1]))!==""&&xt.charAt(0)!==","))return MN;xt=xt.replace(/^,/,"")}return ar})(nt);if(this.fontFaces){var Kt=(function(Vt,cr){if(le===null){var br=(function(ar){var xt=[];return Object.keys(ar).forEach(function(yr){ar[yr].forEach(function(Ge){var vt=null;switch(Ge){case"bold":vt={family:yr,weight:"bold"};break;case"italic":vt={family:yr,style:"italic"};break;case"bolditalic":vt={family:yr,weight:"bold",style:"italic"};break;case"":case"normal":vt={family:yr}}vt!==null&&(vt.ref={name:yr,style:Ge},xt.push(vt))})}),xt})(Vt.getFontList());le=(function(ar){for(var xt={},yr=0;yr<ar.length;++yr){var Ge=DN(ar[yr]),vt=Ge.family,$t=Ge.stretch,Yt=Ge.style,Er=Ge.weight;xt[vt]=xt[vt]||{},xt[vt][$t]=xt[vt][$t]||{},xt[vt][$t][Yt]=xt[vt][$t][Yt]||{},xt[vt][$t][Yt][Er]=Ge}return xt})(br.concat(cr))}return le})(this.pdf,this.fontFaces),Dt=We.map(function(Vt){return{family:Vt,stretch:"normal",weight:lt,style:at}}),fr=(function(Vt,cr,br){for(var ar=(br=br||{}).defaultFontFamily||"times",xt=Object.assign({},zEe,br.genericFontFamilies||{}),yr=null,Ge=null,vt=0;vt<cr.length;++vt)if(xt[(yr=DN(cr[vt])).family]&&(yr.family=xt[yr.family]),Vt.hasOwnProperty(yr.family)){Ge=Vt[yr.family];break}if(!(Ge=Ge||Vt[ar]))throw new Error("Could not find a font-family for the rule '"+XM(yr)+"' and default family '"+ar+"'.");if(Ge=(function($t,Yt){if(Yt[$t])return Yt[$t];var Er=ZS[$t],wr=Er<=ZS.normal?-1:1,Ke=KM(Yt,PW,Er,wr);if(!Ke)throw new Error("Could not find a matching font-stretch value for "+$t);return Ke})(yr.stretch,Ge),Ge=(function($t,Yt){if(Yt[$t])return Yt[$t];for(var Er=OW[$t],wr=0;wr<Er.length;++wr)if(Yt[Er[wr]])return Yt[Er[wr]];throw new Error("Could not find a matching font-style for "+$t)})(yr.style,Ge),!(Ge=(function($t,Yt){if(Yt[$t])return Yt[$t];if($t===400&&Yt[500])return Yt[500];if($t===500&&Yt[400])return Yt[400];var Er=UEe[$t],wr=KM(Yt,IW,Er,$t<400?-1:1);if(!wr)throw new Error("Could not find a matching font-weight for value "+$t);return wr})(yr.weight,Ge)))throw new Error("Failed to resolve a font for the rule '"+XM(yr)+"'.");return Ge})(Kt,Dt);this.pdf.setFont(fr.ref.name,fr.ref.style)}else{var xr="";(lt==="bold"||parseInt(lt,10)>=700||at==="bold")&&(xr="bold"),at==="italic"&&(xr+="italic"),xr.length===0&&(xr="normal");for(var nr="",Mr={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},rr=0;rr<We.length;rr++){if(this.pdf.internal.getFont(We[rr],xr,{noFallback:!0,disableWarning:!0})!==void 0){nr=We[rr];break}if(xr==="bolditalic"&&this.pdf.internal.getFont(We[rr],"bold",{noFallback:!0,disableWarning:!0})!==void 0)nr=We[rr],xr="bold";else if(this.pdf.internal.getFont(We[rr],"normal",{noFallback:!0,disableWarning:!0})!==void 0){nr=We[rr],xr="normal";break}}if(nr===""){for(var Gt=0;Gt<We.length;Gt++)if(Mr[We[Gt]]){nr=Mr[We[Gt]];break}}nr=nr===""?"Times":nr,this.pdf.setFont(nr,xr)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Me){this.ctx.globalCompositeOperation=Me}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Me){this.ctx.globalAlpha=Me}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Me){this.ctx.lineDashOffset=Me,xe.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Me){this.ctx.lineDash=Me,xe.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Me){this.ctx.ignoreClearRect=!!Me}})};p.prototype.setLineDash=function(B){this.lineDash=B},p.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},p.prototype.fill=function(){D.call(this,"fill",!1)},p.prototype.stroke=function(){D.call(this,"stroke",!1)},p.prototype.beginPath=function(){this.path=[{type:"begin"}]},p.prototype.moveTo=function(B,ee){if(isNaN(B)||isNaN(ee))throw hs.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var Y=this.ctx.transform.applyToPoint(new l(B,ee));this.path.push({type:"mt",x:Y.x,y:Y.y}),this.ctx.lastPoint=new l(B,ee)},p.prototype.closePath=function(){var B=new l(0,0),ee=0;for(ee=this.path.length-1;ee!==-1;ee--)if(this.path[ee].type==="begin"&&Ga(this.path[ee+1])==="object"&&typeof this.path[ee+1].x=="number"){B=new l(this.path[ee+1].x,this.path[ee+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new l(B.x,B.y)},p.prototype.lineTo=function(B,ee){if(isNaN(B)||isNaN(ee))throw hs.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var Y=this.ctx.transform.applyToPoint(new l(B,ee));this.path.push({type:"lt",x:Y.x,y:Y.y}),this.ctx.lastPoint=new l(Y.x,Y.y)},p.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),D.call(this,null,!0)},p.prototype.quadraticCurveTo=function(B,ee,Y,re){if(isNaN(Y)||isNaN(re)||isNaN(B)||isNaN(ee))throw hs.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var Q=this.ctx.transform.applyToPoint(new l(Y,re)),Ce=this.ctx.transform.applyToPoint(new l(B,ee));this.path.push({type:"qct",x1:Ce.x,y1:Ce.y,x:Q.x,y:Q.y}),this.ctx.lastPoint=new l(Q.x,Q.y)},p.prototype.bezierCurveTo=function(B,ee,Y,re,Q,Ce){if(isNaN(Q)||isNaN(Ce)||isNaN(B)||isNaN(ee)||isNaN(Y)||isNaN(re))throw hs.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var me=this.ctx.transform.applyToPoint(new l(Q,Ce)),ie=this.ctx.transform.applyToPoint(new l(B,ee)),je=this.ctx.transform.applyToPoint(new l(Y,re));this.path.push({type:"bct",x1:ie.x,y1:ie.y,x2:je.x,y2:je.y,x:me.x,y:me.y}),this.ctx.lastPoint=new l(me.x,me.y)},p.prototype.arc=function(B,ee,Y,re,Q,Ce){if(isNaN(B)||isNaN(ee)||isNaN(Y)||isNaN(re)||isNaN(Q))throw hs.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(Ce=!!Ce,!this.ctx.transform.isIdentity){var me=this.ctx.transform.applyToPoint(new l(B,ee));B=me.x,ee=me.y;var ie=this.ctx.transform.applyToPoint(new l(0,Y)),je=this.ctx.transform.applyToPoint(new l(0,0));Y=Math.sqrt(Math.pow(ie.x-je.x,2)+Math.pow(ie.y-je.y,2))}Math.abs(Q-re)>=2*Math.PI&&(re=0,Q=2*Math.PI),this.path.push({type:"arc",x:B,y:ee,radius:Y,startAngle:re,endAngle:Q,counterclockwise:Ce})},p.prototype.arcTo=function(B,ee,Y,re,Q){throw new Error("arcTo not implemented.")},p.prototype.rect=function(B,ee,Y,re){if(isNaN(B)||isNaN(ee)||isNaN(Y)||isNaN(re))throw hs.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(B,ee),this.lineTo(B+Y,ee),this.lineTo(B+Y,ee+re),this.lineTo(B,ee+re),this.lineTo(B,ee),this.lineTo(B+Y,ee),this.lineTo(B,ee)},p.prototype.fillRect=function(B,ee,Y,re){if(isNaN(B)||isNaN(ee)||isNaN(Y)||isNaN(re))throw hs.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!g.call(this)){var Q={};this.lineCap!=="butt"&&(Q.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(Q.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(B,ee,Y,re),this.fill(),Q.hasOwnProperty("lineCap")&&(this.lineCap=Q.lineCap),Q.hasOwnProperty("lineJoin")&&(this.lineJoin=Q.lineJoin)}},p.prototype.strokeRect=function(B,ee,Y,re){if(isNaN(B)||isNaN(ee)||isNaN(Y)||isNaN(re))throw hs.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");N.call(this)||(this.beginPath(),this.rect(B,ee,Y,re),this.stroke())},p.prototype.clearRect=function(B,ee,Y,re){if(isNaN(B)||isNaN(ee)||isNaN(Y)||isNaN(re))throw hs.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(B,ee,Y,re))},p.prototype.save=function(B){B=typeof B!="boolean"||B;for(var ee=this.pdf.internal.getCurrentPageInfo().pageNumber,Y=0;Y<this.pdf.internal.getNumberOfPages();Y++)this.pdf.setPage(Y+1),this.pdf.internal.out("q");if(this.pdf.setPage(ee),B){this.ctx.fontSize=this.pdf.internal.getFontSize();var re=new f(this.ctx);this.ctxStack.push(this.ctx),this.ctx=re}},p.prototype.restore=function(B){B=typeof B!="boolean"||B;for(var ee=this.pdf.internal.getCurrentPageInfo().pageNumber,Y=0;Y<this.pdf.internal.getNumberOfPages();Y++)this.pdf.setPage(Y+1),this.pdf.internal.out("Q");this.pdf.setPage(ee),B&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},p.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var y=function(B){var ee,Y,re,Q;if(B.isCanvasGradient===!0&&(B=B.getColor()),!B)return{r:0,g:0,b:0,a:0,style:B};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(B))ee=0,Y=0,re=0,Q=0;else{var Ce=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(B);if(Ce!==null)ee=parseInt(Ce[1]),Y=parseInt(Ce[2]),re=parseInt(Ce[3]),Q=1;else if((Ce=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(B))!==null)ee=parseInt(Ce[1]),Y=parseInt(Ce[2]),re=parseInt(Ce[3]),Q=parseFloat(Ce[4]);else{if(Q=1,typeof B=="string"&&B.charAt(0)!=="#"){var me=new _W(B);B=me.ok?me.toHex():"#000000"}B.length===4?(ee=B.substring(1,2),ee+=ee,Y=B.substring(2,3),Y+=Y,re=B.substring(3,4),re+=re):(ee=B.substring(1,3),Y=B.substring(3,5),re=B.substring(5,7)),ee=parseInt(ee,16),Y=parseInt(Y,16),re=parseInt(re,16)}}return{r:ee,g:Y,b:re,a:Q,style:B}},g=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},N=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};p.prototype.fillText=function(B,ee,Y,re){if(isNaN(ee)||isNaN(Y)||typeof B!="string")throw hs.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(re=isNaN(re)?void 0:re,!g.call(this)){var Q=ke(this.ctx.transform.rotation),Ce=this.ctx.transform.scaleX;K.call(this,{text:B,x:ee,y:Y,scale:Ce,angle:Q,align:this.textAlign,maxWidth:re})}},p.prototype.strokeText=function(B,ee,Y,re){if(isNaN(ee)||isNaN(Y)||typeof B!="string")throw hs.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!N.call(this)){re=isNaN(re)?void 0:re;var Q=ke(this.ctx.transform.rotation),Ce=this.ctx.transform.scaleX;K.call(this,{text:B,x:ee,y:Y,scale:Ce,renderingMode:"stroke",angle:Q,align:this.textAlign,maxWidth:re})}},p.prototype.measureText=function(B){if(typeof B!="string")throw hs.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var ee=this.pdf,Y=this.pdf.internal.scaleFactor,re=ee.internal.getFontSize(),Q=ee.getStringUnitWidth(B)*re/ee.internal.scaleFactor;return new function(Ce){var me=(Ce=Ce||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return me}}),this}({width:Q*=Math.round(96*Y/72*1e4)/1e4})},p.prototype.scale=function(B,ee){if(isNaN(B)||isNaN(ee))throw hs.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var Y=new c(B,0,0,ee,0,0);this.ctx.transform=this.ctx.transform.multiply(Y)},p.prototype.rotate=function(B){if(isNaN(B))throw hs.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var ee=new c(Math.cos(B),Math.sin(B),-Math.sin(B),Math.cos(B),0,0);this.ctx.transform=this.ctx.transform.multiply(ee)},p.prototype.translate=function(B,ee){if(isNaN(B)||isNaN(ee))throw hs.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var Y=new c(1,0,0,1,B,ee);this.ctx.transform=this.ctx.transform.multiply(Y)},p.prototype.transform=function(B,ee,Y,re,Q,Ce){if(isNaN(B)||isNaN(ee)||isNaN(Y)||isNaN(re)||isNaN(Q)||isNaN(Ce))throw hs.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var me=new c(B,ee,Y,re,Q,Ce);this.ctx.transform=this.ctx.transform.multiply(me)},p.prototype.setTransform=function(B,ee,Y,re,Q,Ce){B=isNaN(B)?1:B,ee=isNaN(ee)?0:ee,Y=isNaN(Y)?0:Y,re=isNaN(re)?1:re,Q=isNaN(Q)?0:Q,Ce=isNaN(Ce)?0:Ce,this.ctx.transform=new c(B,ee,Y,re,Q,Ce)};var w=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};p.prototype.drawImage=function(B,ee,Y,re,Q,Ce,me,ie,je){var be=this.pdf.getImageProperties(B),le=1,Ee=1,Me=1,ye=1;re!==void 0&&ie!==void 0&&(Me=ie/re,ye=je/Q,le=be.width/re*ie/re,Ee=be.height/Q*je/Q),Ce===void 0&&(Ce=ee,me=Y,ee=0,Y=0),re!==void 0&&ie===void 0&&(ie=re,je=Q),re===void 0&&ie===void 0&&(ie=be.width,je=be.height);for(var at,lt=this.ctx.transform.decompose(),ut=ke(lt.rotate.shx),nt=new c,ot=(nt=(nt=(nt=nt.multiply(lt.translate)).multiply(lt.skew)).multiply(lt.scale)).applyToRectangle(new o(Ce-ee*Me,me-Y*ye,re*le,Q*Ee)),We=k.call(this,ot),Kt=[],Dt=0;Dt<We.length;Dt+=1)Kt.indexOf(We[Dt])===-1&&Kt.push(We[Dt]);if(E(Kt),this.autoPaging)for(var fr=Kt[0],xr=Kt[Kt.length-1],nr=fr;nr<xr+1;nr++){this.pdf.setPage(nr);var Mr=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],rr=nr===1?this.posY+this.margin[0]:this.margin[0],Gt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Vt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],cr=nr===1?0:Gt+(nr-2)*Vt;if(this.ctx.clip_path.length!==0){var br=this.path;at=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=O(at,this.posX+this.margin[3],-cr+rr+this.ctx.prevPageLastElemOffset),q.call(this,"fill",!0),this.path=br}var ar=JSON.parse(JSON.stringify(ot));ar=O([ar],this.posX+this.margin[3],-cr+rr+this.ctx.prevPageLastElemOffset)[0];var xt=(nr>fr||nr<xr)&&w.call(this);xt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Mr,Vt,null).clip().discardPath()),this.pdf.addImage(B,"JPEG",ar.x,ar.y,ar.w,ar.h,null,null,ut),xt&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(B,"JPEG",ot.x,ot.y,ot.w,ot.h,null,null,ut)};var k=function(B,ee,Y){var re=[];ee=ee||this.pdf.internal.pageSize.width,Y=Y||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var Q=this.posY+this.ctx.prevPageLastElemOffset;switch(B.type){default:case"mt":case"lt":re.push(Math.floor((B.y+Q)/Y)+1);break;case"arc":re.push(Math.floor((B.y+Q-B.radius)/Y)+1),re.push(Math.floor((B.y+Q+B.radius)/Y)+1);break;case"qct":var Ce=_e(this.ctx.lastPoint.x,this.ctx.lastPoint.y,B.x1,B.y1,B.x,B.y);re.push(Math.floor((Ce.y+Q)/Y)+1),re.push(Math.floor((Ce.y+Ce.h+Q)/Y)+1);break;case"bct":var me=Le(this.ctx.lastPoint.x,this.ctx.lastPoint.y,B.x1,B.y1,B.x2,B.y2,B.x,B.y);re.push(Math.floor((me.y+Q)/Y)+1),re.push(Math.floor((me.y+me.h+Q)/Y)+1);break;case"rect":re.push(Math.floor((B.y+Q)/Y)+1),re.push(Math.floor((B.y+B.h+Q)/Y)+1)}for(var ie=0;ie<re.length;ie+=1)for(;this.pdf.internal.getNumberOfPages()<re[ie];)S.call(this);return re},S=function(){var B=this.fillStyle,ee=this.strokeStyle,Y=this.font,re=this.lineCap,Q=this.lineWidth,Ce=this.lineJoin;this.pdf.addPage(),this.fillStyle=B,this.strokeStyle=ee,this.font=Y,this.lineCap=re,this.lineWidth=Q,this.lineJoin=Ce},O=function(B,ee,Y){for(var re=0;re<B.length;re++)switch(B[re].type){case"bct":B[re].x2+=ee,B[re].y2+=Y;case"qct":B[re].x1+=ee,B[re].y1+=Y;default:B[re].x+=ee,B[re].y+=Y}return B},E=function(B){return B.sort(function(ee,Y){return ee-Y})},D=function(B,ee){for(var Y,re,Q=this.fillStyle,Ce=this.strokeStyle,me=this.lineCap,ie=this.lineWidth,je=Math.abs(ie*this.ctx.transform.scaleX),be=this.lineJoin,le=JSON.parse(JSON.stringify(this.path)),Ee=JSON.parse(JSON.stringify(this.path)),Me=[],ye=0;ye<Ee.length;ye++)if(Ee[ye].x!==void 0)for(var at=k.call(this,Ee[ye]),lt=0;lt<at.length;lt+=1)Me.indexOf(at[lt])===-1&&Me.push(at[lt]);for(var ut=0;ut<Me.length;ut++)for(;this.pdf.internal.getNumberOfPages()<Me[ut];)S.call(this);if(E(Me),this.autoPaging)for(var nt=Me[0],ot=Me[Me.length-1],We=nt;We<ot+1;We++){this.pdf.setPage(We),this.fillStyle=Q,this.strokeStyle=Ce,this.lineCap=me,this.lineWidth=je,this.lineJoin=be;var Kt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Dt=We===1?this.posY+this.margin[0]:this.margin[0],fr=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],xr=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],nr=We===1?0:fr+(We-2)*xr;if(this.ctx.clip_path.length!==0){var Mr=this.path;Y=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=O(Y,this.posX+this.margin[3],-nr+Dt+this.ctx.prevPageLastElemOffset),q.call(this,B,!0),this.path=Mr}if(re=JSON.parse(JSON.stringify(le)),this.path=O(re,this.posX+this.margin[3],-nr+Dt+this.ctx.prevPageLastElemOffset),ee===!1||We===0){var rr=(We>nt||We<ot)&&w.call(this);rr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Kt,xr,null).clip().discardPath()),q.call(this,B,ee),rr&&this.pdf.restoreGraphicsState()}this.lineWidth=ie}else this.lineWidth=je,q.call(this,B,ee),this.lineWidth=ie;this.path=le},q=function(B,ee){if((B!=="stroke"||ee||!N.call(this))&&(B==="stroke"||ee||!g.call(this))){for(var Y,re,Q=[],Ce=this.path,me=0;me<Ce.length;me++){var ie=Ce[me];switch(ie.type){case"begin":Q.push({begin:!0});break;case"close":Q.push({close:!0});break;case"mt":Q.push({start:ie,deltas:[],abs:[]});break;case"lt":var je=Q.length;if(Ce[me-1]&&!isNaN(Ce[me-1].x)&&(Y=[ie.x-Ce[me-1].x,ie.y-Ce[me-1].y],je>0)){for(;je>=0;je--)if(Q[je-1].close!==!0&&Q[je-1].begin!==!0){Q[je-1].deltas.push(Y),Q[je-1].abs.push(ie);break}}break;case"bct":Y=[ie.x1-Ce[me-1].x,ie.y1-Ce[me-1].y,ie.x2-Ce[me-1].x,ie.y2-Ce[me-1].y,ie.x-Ce[me-1].x,ie.y-Ce[me-1].y],Q[Q.length-1].deltas.push(Y);break;case"qct":var be=Ce[me-1].x+2/3*(ie.x1-Ce[me-1].x),le=Ce[me-1].y+2/3*(ie.y1-Ce[me-1].y),Ee=ie.x+2/3*(ie.x1-ie.x),Me=ie.y+2/3*(ie.y1-ie.y),ye=ie.x,at=ie.y;Y=[be-Ce[me-1].x,le-Ce[me-1].y,Ee-Ce[me-1].x,Me-Ce[me-1].y,ye-Ce[me-1].x,at-Ce[me-1].y],Q[Q.length-1].deltas.push(Y);break;case"arc":Q.push({deltas:[],abs:[],arc:!0}),Array.isArray(Q[Q.length-1].abs)&&Q[Q.length-1].abs.push(ie)}}re=ee?null:B==="stroke"?"stroke":"fill";for(var lt=!1,ut=0;ut<Q.length;ut++)if(Q[ut].arc)for(var nt=Q[ut].abs,ot=0;ot<nt.length;ot++){var We=nt[ot];We.type==="arc"?U.call(this,We.x,We.y,We.radius,We.startAngle,We.endAngle,We.counterclockwise,void 0,ee,!lt):J.call(this,We.x,We.y),lt=!0}else if(Q[ut].close===!0)this.pdf.internal.out("h"),lt=!1;else if(Q[ut].begin!==!0){var Kt=Q[ut].start.x,Dt=Q[ut].start.y;ae.call(this,Q[ut].deltas,Kt,Dt),lt=!0}re&&z.call(this,re),ee&&Z.call(this)}},W=function(B){var ee=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,Y=ee*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return B-Y;case"top":return B+ee-Y;case"hanging":return B+ee-2*Y;case"middle":return B+ee/2-Y;default:return B}},R=function(B){return B+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};p.prototype.createLinearGradient=function(){var B=function(){};return B.colorStops=[],B.addColorStop=function(ee,Y){this.colorStops.push([ee,Y])},B.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},B.isCanvasGradient=!0,B},p.prototype.createPattern=function(){return this.createLinearGradient()},p.prototype.createRadialGradient=function(){return this.createLinearGradient()};var U=function(B,ee,Y,re,Q,Ce,me,ie,je){for(var be=ue.call(this,Y,re,Q,Ce),le=0;le<be.length;le++){var Ee=be[le];le===0&&(je?H.call(this,Ee.x1+B,Ee.y1+ee):J.call(this,Ee.x1+B,Ee.y1+ee)),se.call(this,B,ee,Ee.x2,Ee.y2,Ee.x3,Ee.y3,Ee.x4,Ee.y4)}ie?Z.call(this):z.call(this,me)},z=function(B){switch(B){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},Z=function(){this.pdf.clip(),this.pdf.discardPath()},H=function(B,ee){this.pdf.internal.out(r(B)+" "+n(ee)+" m")},K=function(B){var ee;switch(B.align){case"right":case"end":ee="right";break;case"center":ee="center";break;default:ee="left"}var Y=this.pdf.getTextDimensions(B.text),re=W.call(this,B.y),Q=R.call(this,re)-Y.h,Ce=this.ctx.transform.applyToPoint(new l(B.x,re)),me=this.ctx.transform.decompose(),ie=new c;ie=(ie=(ie=ie.multiply(me.translate)).multiply(me.skew)).multiply(me.scale);for(var je,be,le,Ee=this.ctx.transform.applyToRectangle(new o(B.x,re,Y.w,Y.h)),Me=ie.applyToRectangle(new o(B.x,Q,Y.w,Y.h)),ye=k.call(this,Me),at=[],lt=0;lt<ye.length;lt+=1)at.indexOf(ye[lt])===-1&&at.push(ye[lt]);if(E(at),this.autoPaging)for(var ut=at[0],nt=at[at.length-1],ot=ut;ot<nt+1;ot++){this.pdf.setPage(ot);var We=ot===1?this.posY+this.margin[0]:this.margin[0],Kt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Dt=this.pdf.internal.pageSize.height-this.margin[2],fr=Dt-this.margin[0],xr=this.pdf.internal.pageSize.width-this.margin[1],nr=xr-this.margin[3],Mr=ot===1?0:Kt+(ot-2)*fr;if(this.ctx.clip_path.length!==0){var rr=this.path;je=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=O(je,this.posX+this.margin[3],-1*Mr+We),q.call(this,"fill",!0),this.path=rr}var Gt=O([JSON.parse(JSON.stringify(Me))],this.posX+this.margin[3],-Mr+We+this.ctx.prevPageLastElemOffset)[0];B.scale>=.01&&(be=this.pdf.internal.getFontSize(),this.pdf.setFontSize(be*B.scale),le=this.lineWidth,this.lineWidth=le*B.scale);var Vt=this.autoPaging!=="text";if(Vt||Gt.y+Gt.h<=Dt){if(Vt||Gt.y>=We&&Gt.x<=xr){var cr=Vt?B.text:this.pdf.splitTextToSize(B.text,B.maxWidth||xr-Gt.x)[0],br=O([JSON.parse(JSON.stringify(Ee))],this.posX+this.margin[3],-Mr+We+this.ctx.prevPageLastElemOffset)[0],ar=Vt&&(ot>ut||ot<nt)&&w.call(this);ar&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],nr,fr,null).clip().discardPath()),this.pdf.text(cr,br.x,br.y,{angle:B.angle,align:ee,renderingMode:B.renderingMode}),ar&&this.pdf.restoreGraphicsState()}}else Gt.y<Dt&&(this.ctx.prevPageLastElemOffset+=Dt-Gt.y);B.scale>=.01&&(this.pdf.setFontSize(be),this.lineWidth=le)}else B.scale>=.01&&(be=this.pdf.internal.getFontSize(),this.pdf.setFontSize(be*B.scale),le=this.lineWidth,this.lineWidth=le*B.scale),this.pdf.text(B.text,Ce.x+this.posX,Ce.y+this.posY,{angle:B.angle,align:ee,renderingMode:B.renderingMode,maxWidth:B.maxWidth}),B.scale>=.01&&(this.pdf.setFontSize(be),this.lineWidth=le)},J=function(B,ee,Y,re){Y=Y||0,re=re||0,this.pdf.internal.out(r(B+Y)+" "+n(ee+re)+" l")},ae=function(B,ee,Y){return this.pdf.lines(B,ee,Y,null,null)},se=function(B,ee,Y,re,Q,Ce,me,ie){this.pdf.internal.out([t(a(Y+B)),t(i(re+ee)),t(a(Q+B)),t(i(Ce+ee)),t(a(me+B)),t(i(ie+ee)),"c"].join(" "))},ue=function(B,ee,Y,re){for(var Q=2*Math.PI,Ce=Math.PI/2;ee>Y;)ee-=Q;var me=Math.abs(Y-ee);me<Q&&re&&(me=Q-me);for(var ie=[],je=re?-1:1,be=ee;me>1e-5;){var le=be+je*Math.min(me,Ce);ie.push(fe.call(this,B,be,le)),me-=Math.abs(le-be),be=le}return ie},fe=function(B,ee,Y){var re=(Y-ee)/2,Q=B*Math.cos(re),Ce=B*Math.sin(re),me=Q,ie=-Ce,je=me*me+ie*ie,be=je+me*Q+ie*Ce,le=4/3*(Math.sqrt(2*je*be)-be)/(me*Ce-ie*Q),Ee=me-le*ie,Me=ie+le*me,ye=Ee,at=-Me,lt=re+ee,ut=Math.cos(lt),nt=Math.sin(lt);return{x1:B*Math.cos(ee),y1:B*Math.sin(ee),x2:Ee*ut-Me*nt,y2:Ee*nt+Me*ut,x3:ye*ut-at*nt,y3:ye*nt+at*ut,x4:B*Math.cos(Y),y4:B*Math.sin(Y)}},ke=function(B){return 180*B/Math.PI},_e=function(B,ee,Y,re,Q,Ce){var me=B+.5*(Y-B),ie=ee+.5*(re-ee),je=Q+.5*(Y-Q),be=Ce+.5*(re-Ce),le=Math.min(B,Q,me,je),Ee=Math.max(B,Q,me,je),Me=Math.min(ee,Ce,ie,be),ye=Math.max(ee,Ce,ie,be);return new o(le,Me,Ee-le,ye-Me)},Le=function(B,ee,Y,re,Q,Ce,me,ie){var je,be,le,Ee,Me,ye,at,lt,ut,nt,ot,We,Kt,Dt,fr=Y-B,xr=re-ee,nr=Q-Y,Mr=Ce-re,rr=me-Q,Gt=ie-Ce;for(be=0;be<41;be++)ut=(at=(le=B+(je=be/40)*fr)+je*((Me=Y+je*nr)-le))+je*(Me+je*(Q+je*rr-Me)-at),nt=(lt=(Ee=ee+je*xr)+je*((ye=re+je*Mr)-Ee))+je*(ye+je*(Ce+je*Gt-ye)-lt),be==0?(ot=ut,We=nt,Kt=ut,Dt=nt):(ot=Math.min(ot,ut),We=Math.min(We,nt),Kt=Math.max(Kt,ut),Dt=Math.max(Dt,nt));return new o(Math.round(ot),Math.round(We),Math.round(Kt-ot),Math.round(Dt-We))},xe=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var B,ee,Y=(B=this.ctx.lineDash,ee=this.ctx.lineDashOffset,JSON.stringify({lineDash:B,lineDashOffset:ee}));this.prevLineDash!==Y&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=Y)}}})(nn.API),(function(e){var t=function(l){var o,c,d,f,p,y,g,N,w,k;for(c=[],d=0,f=(l+=o="\0\0\0\0".slice(l.length%4||4)).length;f>d;d+=4)(p=(l.charCodeAt(d)<<24)+(l.charCodeAt(d+1)<<16)+(l.charCodeAt(d+2)<<8)+l.charCodeAt(d+3))!==0?(y=(p=((p=((p=((p=(p-(k=p%85))/85)-(w=p%85))/85)-(N=p%85))/85)-(g=p%85))/85)%85,c.push(y+33,g+33,N+33,w+33,k+33)):c.push(122);return(function(S,O){for(var E=O;E>0;E--)S.pop()})(c,o.length),String.fromCharCode.apply(String,c)+"~>"},r=function(l){var o,c,d,f,p,y=String,g="length",N=255,w="charCodeAt",k="slice",S="replace";for(l[k](-2),l=l[k](0,-2)[S](/\s/g,"")[S]("z","!!!!!"),d=[],f=0,p=(l+=o="uuuuu"[k](l[g]%5||5))[g];p>f;f+=5)c=52200625*(l[w](f)-33)+614125*(l[w](f+1)-33)+7225*(l[w](f+2)-33)+85*(l[w](f+3)-33)+(l[w](f+4)-33),d.push(N&c>>24,N&c>>16,N&c>>8,N&c);return(function(O,E){for(var D=E;D>0;D--)O.pop()})(d,o[g]),y.fromCharCode.apply(y,d)},n=function(l){return l.split("").map(function(o){return("0"+o.charCodeAt().toString(16)).slice(-2)}).join("")+">"},a=function(l){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((l=l.replace(/\s/g,"")).indexOf(">")!==-1&&(l=l.substr(0,l.indexOf(">"))),l.length%2&&(l+="0"),o.test(l)===!1)return"";for(var c="",d=0;d<l.length;d+=2)c+=String.fromCharCode("0x"+(l[d]+l[d+1]));return c},i=function(l){for(var o=new Uint8Array(l.length),c=l.length;c--;)o[c]=l.charCodeAt(c);return(o=$S(o)).reduce(function(d,f){return d+String.fromCharCode(f)},"")};e.processDataByFilters=function(l,o){var c=0,d=l||"",f=[];for(typeof(o=o||[])=="string"&&(o=[o]),c=0;c<o.length;c+=1)switch(o[c]){case"ASCII85Decode":case"/ASCII85Decode":d=r(d),f.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":d=t(d),f.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":d=a(d),f.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":d=n(d),f.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":d=i(d),f.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[c]+'" is not implemented')}return{data:d,reverseChain:f.reverse().join(" ")}}})(nn.API),(function(e){e.loadFile=function(t,r,n){return(function(a,i,l){i=i!==!1,l=typeof l=="function"?l:function(){};var o=void 0;try{o=(function(c,d,f){var p=new XMLHttpRequest,y=0,g=function(N){var w=N.length,k=[],S=String.fromCharCode;for(y=0;y<w;y+=1)k.push(S(255&N.charCodeAt(y)));return k.join("")};if(p.open("GET",c,!d),p.overrideMimeType("text/plain; charset=x-user-defined"),d===!1&&(p.onload=function(){p.status===200?f(g(this.responseText)):f(void 0)}),p.send(null),d&&p.status===200)return g(p.responseText)})(a,i,l)}catch{}return o})(t,r,n)},e.loadImageFile=e.loadFile})(nn.API),(function(e){function t(){return(Fn.html2canvas?Promise.resolve(Fn.html2canvas):hm(()=>import("./html2canvas.esm-QH1iLAAe.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function r(){return(Fn.DOMPurify?Promise.resolve(Fn.DOMPurify):hm(()=>import("./purify.es-B6FQ9oRL.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var n=function(o){var c=Ga(o);return c==="undefined"?"undefined":c==="string"||o instanceof String?"string":c==="number"||o instanceof Number?"number":c==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":c==="object"?"object":"unknown"},a=function(o,c){var d=document.createElement(o);for(var f in c.className&&(d.className=c.className),c.innerHTML&&c.dompurify&&(d.innerHTML=c.dompurify.sanitize(c.innerHTML)),c.style)d.style[f]=c.style[f];return d},i=function o(c,d){for(var f=c.nodeType===3?document.createTextNode(c.nodeValue):c.cloneNode(!1),p=c.firstChild;p;p=p.nextSibling)d!==!0&&p.nodeType===1&&p.nodeName==="SCRIPT"||f.appendChild(o(p,d));return c.nodeType===1&&(c.nodeName==="CANVAS"?(f.width=c.width,f.height=c.height,f.getContext("2d").drawImage(c,0,0)):c.nodeName!=="TEXTAREA"&&c.nodeName!=="SELECT"||(f.value=c.value),f.addEventListener("load",function(){f.scrollTop=c.scrollTop,f.scrollLeft=c.scrollLeft},!0)),f},l=function o(c){var d=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),f=o.convert(Promise.resolve(),d);return(f=f.setProgress(1,o,1,[o])).set(c)};(l.prototype=Object.create(Promise.prototype)).constructor=l,l.convert=function(o,c){return o.__proto__=c||l.prototype,o},l.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},l.prototype.from=function(o,c){return this.then(function(){switch(c=c||(function(d){switch(n(d)){case"string":return"string";case"element":return d.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(o),c){case"string":return this.then(r).then(function(d){return this.set({src:a("div",{innerHTML:o,dompurify:d})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},l.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},l.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},c=i(this.prop.src,this.opt.html2canvas.javascriptEnabled);c.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=a("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=a("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(c),this.prop.container.firstChild.appendChild(a("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},l.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then(function(c){var d=Object.assign({},this.opt.html2canvas);return delete d.onrendered,c(this.prop.container,d)}).then(function(c){(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},l.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then(function(c){var d=this.opt.jsPDF,f=this.opt.fontFaces,p=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,y=Object.assign({async:!0,allowTaint:!0,scale:p,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete y.onrendered,d.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,d.context2d.posX=this.opt.x,d.context2d.posY=this.opt.y,d.context2d.margin=this.opt.margin,d.context2d.fontFaces=f,f)for(var g=0;g<f.length;++g){var N=f[g],w=N.src.find(function(k){return k.format==="truetype"});w&&d.addFont(w.url,N.ref.name,N.ref.style)}return y.windowHeight=y.windowHeight||0,y.windowHeight=y.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):y.windowHeight,d.context2d.save(!0),c(this.prop.container,y)}).then(function(c){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},l.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},l.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},l.prototype.output=function(o,c,d){return(d=d||"pdf").toLowerCase()==="img"||d.toLowerCase()==="image"?this.outputImg(o,c):this.outputPdf(o,c)},l.prototype.outputPdf=function(o,c){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,c)})},l.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},l.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},l.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},l.prototype.set=function(o){if(n(o)!=="object")return this;var c=Object.keys(o||{}).map(function(d){if(d in l.template.prop)return function(){this.prop[d]=o[d]};switch(d){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[d]=o[d]}}},this);return this.then(function(){return this.thenList(c)})},l.prototype.get=function(o,c){return this.then(function(){var d=o in l.template.prop?this.prop[o]:this.opt[o];return c?c(d):d})},l.prototype.setMargin=function(o){return this.then(function(){switch(n(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},l.prototype.setPageSize=function(o){function c(d,f){return Math.floor(d*f/72*96)}return this.then(function(){(o=o||nn.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:c(o.inner.width,o.k),height:c(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},l.prototype.setProgress=function(o,c,d,f){return o!=null&&(this.progress.val=o),c!=null&&(this.progress.state=c),d!=null&&(this.progress.n=d),f!=null&&(this.progress.stack=f),this.progress.ratio=this.progress.val/this.progress.state,this},l.prototype.updateProgress=function(o,c,d,f){return this.setProgress(o?this.progress.val+o:null,c||null,d?this.progress.n+d:null,f?this.progress.stack.concat(f):null)},l.prototype.then=function(o,c){var d=this;return this.thenCore(o,c,function(f,p){return d.updateProgress(null,null,1,[f]),Promise.prototype.then.call(this,function(y){return d.updateProgress(null,f),y}).then(f,p).then(function(y){return d.updateProgress(1),y})})},l.prototype.thenCore=function(o,c,d){d=d||Promise.prototype.then;var f=this;o&&(o=o.bind(f)),c&&(c=c.bind(f));var p=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?f:l.convert(Object.assign({},f),Promise.prototype),y=d.call(p,o,c);return l.convert(y,f.__proto__)},l.prototype.thenExternal=function(o,c){return Promise.prototype.then.call(this,o,c)},l.prototype.thenList=function(o){var c=this;return o.forEach(function(d){c=c.thenCore(d)}),c},l.prototype.catch=function(o){o&&(o=o.bind(this));var c=Promise.prototype.catch.call(this,o);return l.convert(c,this)},l.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},l.prototype.error=function(o){return this.then(function(){throw new Error(o)})},l.prototype.using=l.prototype.set,l.prototype.saveAs=l.prototype.save,l.prototype.export=l.prototype.output,l.prototype.run=l.prototype.then,nn.getPageSize=function(o,c,d){if(Ga(o)==="object"){var f=o;o=f.orientation,c=f.unit||c,d=f.format||d}c=c||"mm",d=d||"a4",o=(""+(o||"P")).toLowerCase();var p,y=(""+d).toLowerCase(),g={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(c){case"pt":p=1;break;case"mm":p=72/25.4;break;case"cm":p=72/2.54;break;case"in":p=72;break;case"px":p=.75;break;case"pc":case"em":p=12;break;case"ex":p=6;break;default:throw"Invalid unit: "+c}var N,w=0,k=0;if(g.hasOwnProperty(y))w=g[y][1]/p,k=g[y][0]/p;else try{w=d[1],k=d[0]}catch{throw new Error("Invalid format: "+d)}if(o==="p"||o==="portrait")o="p",k>w&&(N=k,k=w,w=N);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",w>k&&(N=k,k=w,w=N)}return{width:k,height:w,unit:c,k:p,orientation:o}},e.html=function(o,c){(c=c||{}).callback=c.callback||function(){},c.html2canvas=c.html2canvas||{},c.html2canvas.canvas=c.html2canvas.canvas||this.canvas,c.jsPDF=c.jsPDF||this,c.fontFaces=c.fontFaces?c.fontFaces.map(DN):null;var d=new l(c);return c.worker?d:d.from(o).doCallback()}})(nn.API),nn.API.addJS=function(e){return QM=e,this.internal.events.subscribe("postPutResources",function(){X2=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(X2+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),ZM=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+QM+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){X2!==void 0&&ZM!==void 0&&this.internal.out("/Names <</JavaScript "+X2+" 0 R>>")}),this},(function(e){var t;e.events.push(["postPutResources",function(){var r=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var a=r.outline.render().split(/\r\n/),i=0;i<a.length;i++){var l=a[i],o=n.exec(l);if(o!=null){var c=o[1];r.internal.newObjectDeferredBegin(c,!1)}r.internal.write(l)}if(this.outline.createNamedDestinations){var d=this.internal.pages.length,f=[];for(i=0;i<d;i++){var p=r.internal.newObject();f.push(p);var y=r.internal.getPageInfo(i+1);r.internal.write("<< /D["+y.objId+" 0 R /XYZ null null null]>> endobj")}var g=r.internal.newObject();for(r.internal.write("<< /Names [ "),i=0;i<f.length;i++)r.internal.write("(page_"+(i+1)+")"+f[i]+" 0 R");r.internal.write(" ] >>","endobj"),t=r.internal.newObject(),r.internal.write("<< /Dests "+g+" 0 R"),r.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){var r=this;r.outline.root.children.length>0&&(r.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&r.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(n,a,i){var l={title:a,options:i,children:[]};return n==null&&(n=this.root),n.children.push(l),l},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(n){n.id=r.internal.newObjectDeferred();for(var a=0;a<n.children.length;a++)this.genIds_r(n.children[a])},r.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},r.outline.renderItems=function(n){for(var a=this.ctx.pdf.internal.getVerticalCoordinateString,i=0;i<n.children.length;i++){var l=n.children[i];this.objStart(l),this.line("/Title "+this.makeString(l.title)),this.line("/Parent "+this.makeRef(n)),i>0&&this.line("/Prev "+this.makeRef(n.children[i-1])),i<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[i+1])),l.children.length>0&&(this.line("/First "+this.makeRef(l.children[0])),this.line("/Last "+this.makeRef(l.children[l.children.length-1])));var o=this.count=this.count_r({count:0},l);if(o>0&&this.line("/Count "+o),l.options&&l.options.pageNumber){var c=r.internal.getPageInfo(l.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+a(0)+" 0]")}this.objEnd()}for(var d=0;d<n.children.length;d++)this.renderItems(n.children[d])},r.outline.line=function(n){this.ctx.val+=n+`\r
`},r.outline.makeRef=function(n){return n.id+" 0 R"},r.outline.makeString=function(n){return"("+r.internal.pdfEscape(n)+")"},r.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(n,a){for(var i=0;i<a.children.length;i++)n.count++,this.count_r(n,a.children[i]);return n.count}}])})(nn.API),(function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(r,n,a,i,l,o){var c,d=this.decode.DCT_DECODE,f=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=l||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,c=(function(p){for(var y,g=256*p.charCodeAt(4)+p.charCodeAt(5),N=p.length,w={width:0,height:0,numcomponents:1},k=4;k<N;k+=2){if(k+=g,t.indexOf(p.charCodeAt(k+1))!==-1){y=256*p.charCodeAt(k+5)+p.charCodeAt(k+6),w={width:256*p.charCodeAt(k+7)+p.charCodeAt(k+8),height:y,numcomponents:p.charCodeAt(k+9)};break}g=256*p.charCodeAt(k+2)+p.charCodeAt(k+3)}return w})(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r),c.numcomponents){case 1:o=this.color_spaces.DEVICE_GRAY;break;case 4:o=this.color_spaces.DEVICE_CMYK;break;case 3:o=this.color_spaces.DEVICE_RGB}f={data:r,width:c.width,height:c.height,colorSpace:o,bitsPerComponent:8,filter:d,index:n,alias:a}}return f}})(nn.API),nn.API.processPNG=function(e,t,r,n){if(this.__addimage__.isArrayBuffer(e)&&(e=new Uint8Array(e)),this.__addimage__.isArrayBufferView(e)){var a,i=jEe(e,{checkCrc:!0}),l=i.width,o=i.height,c=i.channels,d=i.palette,f=i.depth;a=d&&c===1?(function(U){for(var z=U.width,Z=U.height,H=U.data,K=U.palette,J=U.depth,ae=!1,se=[],ue=[],fe=void 0,ke=!1,_e=0,Le=0;Le<K.length;Le++){var xe=rM(K[Le],4),B=xe[0],ee=xe[1],Y=xe[2],re=xe[3];se.push(B,ee,Y),re!=null&&(re===0?(_e++,ue.length<1&&ue.push(Le)):re<255&&(ke=!0))}if(ke||_e>1){ae=!0,ue=void 0;var Q=z*Z;fe=new Uint8Array(Q);for(var Ce=new DataView(H.buffer),me=0;me<Q;me++){var ie=LN(Ce,me,J),je=rM(K[ie],4)[3];fe[me]=je}}else _e===0&&(ue=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:ae?8:void 0,colorBytes:H,alphaBytes:fe,needSMask:ae,palette:se,mask:ue}})(i):c===2||c===4?(function(U){for(var z=U.data,Z=U.width,H=U.height,K=U.channels,J=U.depth,ae=K===2?"DeviceGray":"DeviceRGB",se=K-1,ue=Z*H,fe=se,ke=ue*fe,_e=1*ue,Le=Math.ceil(ke*J/8),xe=Math.ceil(_e*J/8),B=new Uint8Array(Le),ee=new Uint8Array(xe),Y=new DataView(z.buffer),re=new DataView(B.buffer),Q=new DataView(ee.buffer),Ce=!1,me=0;me<ue;me++){for(var ie=me*K,je=0;je<fe;je++)lL(re,LN(Y,ie+je,J),me*fe+je,J);var be=LN(Y,ie+fe,J);be<(1<<J)-1&&(Ce=!0),lL(Q,be,1*me,J)}return{colorSpace:ae,colorsPerPixel:se,sMaskBitsPerComponent:Ce?J:void 0,colorBytes:B,alphaBytes:ee,needSMask:Ce}})(i):(function(U){var z=U.data,Z=U.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:Z,colorsPerPixel:Z==="DeviceGray"?1:3,colorBytes:z instanceof Uint16Array?(function(H){for(var K=H.length,J=new Uint8Array(2*K),ae=new DataView(J.buffer,J.byteOffset,J.byteLength),se=0;se<K;se++)ae.setUint16(2*se,H[se],!1);return J})(z):z,needSMask:!1}})(i);var p,y,g,N=a,w=N.colorSpace,k=N.colorsPerPixel,S=N.sMaskBitsPerComponent,O=N.colorBytes,E=N.alphaBytes,D=N.needSMask,q=N.palette,W=N.mask,R=null;return n!==nn.API.image_compression.NONE&&typeof $S=="function"?(R=(function(U){var z;switch(U){case nn.API.image_compression.FAST:z=11;break;case nn.API.image_compression.MEDIUM:z=13;break;case nn.API.image_compression.SLOW:z=14;break;default:z=12}return z})(n),p=this.decode.FLATE_DECODE,y="/Predictor ".concat(R," /Colors ").concat(k," /BitsPerComponent ").concat(f," /Columns ").concat(l),e=rL(O,Math.ceil(l*k*f/8),k,f,n),D&&(g=rL(E,Math.ceil(l*S/8),1,S,n))):(p=void 0,y=void 0,e=O,D&&(g=E)),(this.__addimage__.isArrayBuffer(e)||this.__addimage__.isArrayBufferView(e))&&(e=this.__addimage__.arrayBufferToBinaryString(e)),(g&&this.__addimage__.isArrayBuffer(g)||this.__addimage__.isArrayBufferView(g))&&(g=this.__addimage__.arrayBufferToBinaryString(g)),{alias:r,data:e,index:t,filter:p,decodeParameters:y,transparency:W,palette:q,sMask:g,predictor:R,width:l,height:o,bitsPerComponent:f,sMaskBitsPerComponent:S,colorSpace:w}}},(function(e){e.processGIF89A=function(t,r,n,a){var i=new KEe(t),l=i.width,o=i.height,c=[];i.decodeAndBlitFrameRGBA(0,c);var d={data:c,width:l,height:o},f=new RN(100).encode(d,100);return e.processJPEG.call(this,f,r,n,a)},e.processGIF87A=e.processGIF89A})(nn.API),Fd.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:a,green:n,blue:r,quad:i}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Fd.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(r){hs.log("bit decode error:"+r)}},Fd.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),r=t%4;for(e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,a=0;a<t;a++)for(var i=this.datav.getUint8(this.pos++,!0),l=n*this.width*4+8*a*4,o=0;o<8&&8*a+o<this.width;o++){var c=this.palette[i>>7-o&1];this.data[l+4*o]=c.blue,this.data[l+4*o+1]=c.green,this.data[l+4*o+2]=c.red,this.data[l+4*o+3]=255}r!==0&&(this.pos+=4-r)}},Fd.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<e;a++){var i=this.datav.getUint8(this.pos++,!0),l=n*this.width*4+2*a*4,o=i>>4,c=15&i,d=this.palette[o];if(this.data[l]=d.blue,this.data[l+1]=d.green,this.data[l+2]=d.red,this.data[l+3]=255,2*a+1>=this.width)break;d=this.palette[c],this.data[l+4]=d.blue,this.data[l+4+1]=d.green,this.data[l+4+2]=d.red,this.data[l+4+3]=255}t!==0&&(this.pos+=4-t)}},Fd.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var a=this.datav.getUint8(this.pos++,!0),i=r*this.width*4+4*n;if(a<this.palette.length){var l=this.palette[a];this.data[i]=l.red,this.data[i+1]=l.green,this.data[i+2]=l.blue,this.data[i+3]=255}else this.data[i]=255,this.data[i+1]=255,this.data[i+2]=255,this.data[i+3]=255}e!==0&&(this.pos+=4-e)}},Fd.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<this.width;a++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(i&t)/t*255|0,o=(i>>5&t)/t*255|0,c=(i>>10&t)/t*255|0,d=i>>15?255:0,f=n*this.width*4+4*a;this.data[f]=c,this.data[f+1]=o,this.data[f+2]=l,this.data[f+3]=d}this.pos+=e}},Fd.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),r=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var a=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var l=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(l&t)/t*255|0,c=(l>>5&r)/r*255|0,d=(l>>11)/t*255|0,f=a*this.width*4+4*i;this.data[f]=d,this.data[f+1]=c,this.data[f+2]=o,this.data[f+3]=255}this.pos+=e}},Fd.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),l=t*this.width*4+4*r;this.data[l]=i,this.data[l+1]=a,this.data[l+2]=n,this.data[l+3]=255}this.pos+=this.width%4}},Fd.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*r;this.data[o]=i,this.data[o+1]=a,this.data[o+2]=n,this.data[o+3]=l}},Fd.prototype.getData=function(){return this.data},(function(e){e.processBMP=function(t,r,n,a){var i=new Fd(t,!1),l=i.width,o=i.height,c={data:i.getData(),width:l,height:o},d=new RN(100).encode(c,100);return e.processJPEG.call(this,d,r,n,a)}})(nn.API),cL.prototype.getData=function(){return this.data},(function(e){e.processWEBP=function(t,r,n,a){var i=new cL(t),l=i.width,o=i.height,c={data:i.getData(),width:l,height:o},d=new RN(100).encode(c,100);return e.processJPEG.call(this,d,r,n,a)}})(nn.API),nn.API.processRGBA=function(e,t,r){for(var n=e.data,a=n.length,i=new Uint8Array(a/4*3),l=new Uint8Array(a/4),o=0,c=0,d=0;d<a;d+=4){var f=n[d],p=n[d+1],y=n[d+2],g=n[d+3];i[o++]=f,i[o++]=p,i[o++]=y,l[c++]=g}var N=this.__addimage__.arrayBufferToBinaryString(i);return{alpha:this.__addimage__.arrayBufferToBinaryString(l),data:N,index:t,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},nn.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},e1=nn.API,Y2=e1.getCharWidthsArray=function(e,t){var r,n,a=(t=t||{}).font||this.internal.getFont(),i=t.fontSize||this.internal.getFontSize(),l=t.charSpace||this.internal.getCharSpace(),o=t.widths?t.widths:a.metadata.Unicode.widths,c=o.fof?o.fof:1,d=t.kerning?t.kerning:a.metadata.Unicode.kerning,f=d.fof?d.fof:1,p=t.doKerning!==!1,y=0,g=e.length,N=0,w=o[0]||c,k=[];for(r=0;r<g;r++)n=e.charCodeAt(r),typeof a.metadata.widthOfString=="function"?k.push((a.metadata.widthOfGlyph(a.metadata.characterToGlyph(n))+l*(1e3/i)||0)/1e3):(y=p&&Ga(d[n])==="object"&&!isNaN(parseInt(d[n][N],10))?d[n][N]/f:0,k.push((o[n]||w)/c+y)),N=n;return k},JM=e1.getStringUnitWidth=function(e,t){var r=(t=t||{}).fontSize||this.internal.getFontSize(),n=t.font||this.internal.getFont(),a=t.charSpace||this.internal.getCharSpace();return e1.processArabic&&(e=e1.processArabic(e)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(e,r,a)/r:Y2.apply(this,arguments).reduce(function(i,l){return i+l},0)},eL=function(e,t,r,n){for(var a=[],i=0,l=e.length,o=0;i!==l&&o+t[i]<r;)o+=t[i],i++;a.push(e.slice(0,i));var c=i;for(o=0;i!==l;)o+t[i]>n&&(a.push(e.slice(c,i)),o=0,c=i),o+=t[i],i++;return c!==i&&a.push(e.slice(c,i)),a},tL=function(e,t,r){r||(r={});var n,a,i,l,o,c,d,f=[],p=[f],y=r.textIndent||0,g=0,N=0,w=e.split(" "),k=Y2.apply(this,[" ",r])[0];if(c=r.lineIndent===-1?w[0].length+2:r.lineIndent||0){var S=Array(c).join(" "),O=[];w.map(function(D){(D=D.split(/\s*\n/)).length>1?O=O.concat(D.map(function(q,W){return(W&&q.length?`
`:"")+q})):O.push(D[0])}),w=O,c=JM.apply(this,[S,r])}for(i=0,l=w.length;i<l;i++){var E=0;if(n=w[i],c&&n[0]==`
`&&(n=n.substr(1),E=1),y+g+(N=(a=Y2.apply(this,[n,r])).reduce(function(D,q){return D+q},0))>t||E){if(N>t){for(o=eL.apply(this,[n,a,t-(y+g),t]),f.push(o.shift()),f=[o.pop()];o.length;)p.push([o.shift()]);N=a.slice(n.length-(f[0]?f[0].length:0)).reduce(function(D,q){return D+q},0)}else f=[n];p.push(f),y=N+c,g=k}else f.push(n),y+=g+N,g=k}return d=c?function(D,q){return(q?S:"")+D.join(" ")}:function(D){return D.join(" ")},p.map(d)},e1.splitTextToSize=function(e,t,r){var n,a=(r=r||{}).fontSize||this.internal.getFontSize(),i=(function(f){if(f.widths&&f.kerning)return{widths:f.widths,kerning:f.kerning};var p=this.internal.getFont(f.fontName,f.fontStyle),y="Unicode";return p.metadata[y]?{widths:p.metadata[y].widths||{0:1},kerning:p.metadata[y].kerning||{}}:{font:p.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);n=Array.isArray(e)?e:String(e).split(/\r?\n/);var l=1*this.internal.scaleFactor*t/a;i.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/a:0,i.lineIndent=r.lineIndent;var o,c,d=[];for(o=0,c=n.length;o<c;o++)d=d.concat(tL.apply(this,[n[o],l,i]));return d},(function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="0123456789abcdef",r="klmnopqrstuvwxyz",n={},a={},i=0;i<16;i++)n[r[i]]=t[i],a[t[i]]=r[i];var l=function(y){return"0x"+parseInt(y,10).toString(16)},o=e.__fontmetrics__.compress=function(y){var g,N,w,k,S=["{"];for(var O in y){if(g=y[O],isNaN(parseInt(O,10))?N="'"+O+"'":(O=parseInt(O,10),N=(N=l(O).slice(2)).slice(0,-1)+a[N.slice(-1)]),typeof g=="number")g<0?(w=l(g).slice(3),k="-"):(w=l(g).slice(2),k=""),w=k+w.slice(0,-1)+a[w.slice(-1)];else{if(Ga(g)!=="object")throw new Error("Don't know what to do with value type "+Ga(g)+".");w=o(g)}S.push(N+w)}return S.push("}"),S.join("")},c=e.__fontmetrics__.uncompress=function(y){if(typeof y!="string")throw new Error("Invalid argument passed to uncompress.");for(var g,N,w,k,S={},O=1,E=S,D=[],q="",W="",R=y.length-1,U=1;U<R;U+=1)(k=y[U])=="'"?g?(w=g.join(""),g=void 0):g=[]:g?g.push(k):k=="{"?(D.push([E,w]),E={},w=void 0):k=="}"?((N=D.pop())[0][N[1]]=E,w=void 0,E=N[0]):k=="-"?O=-1:w===void 0?n.hasOwnProperty(k)?(q+=n[k],w=parseInt(q,16)*O,O=1,q=""):q+=k:n.hasOwnProperty(k)?(W+=n[k],E[w]=parseInt(W,16)*O,O=1,w=void 0,W=""):W+=k;return S},d={codePages:["WinAnsiEncoding"],WinAnsiEncoding:c("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},f={Unicode:{Courier:d,"Courier-Bold":d,"Courier-BoldOblique":d,"Courier-Oblique":d,Helvetica:d,"Helvetica-Bold":d,"Helvetica-BoldOblique":d,"Helvetica-Oblique":d,"Times-Roman":d,"Times-Bold":d,"Times-BoldItalic":d,"Times-Italic":d}},p={Unicode:{"Courier-Oblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":c("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":c("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:c("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:c("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":c("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":c("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(y){var g=y.font,N=p.Unicode[g.postScriptName];N&&(g.metadata.Unicode={},g.metadata.Unicode.widths=N.widths,g.metadata.Unicode.kerning=N.kerning);var w=f.Unicode[g.postScriptName];w&&(g.metadata.Unicode.encoding=w,g.encoding=w.codePages[0])}])})(nn.API),(function(e){var t=function(r){for(var n=r.length,a=new Uint8Array(n),i=0;i<n;i++)a[i]=r.charCodeAt(i);return a};e.API.events.push(["addFont",function(r){var n=void 0,a=r.font,i=r.instance;if(!a.isStandardFont){if(i===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");if(typeof(n=i.existsFileInVFS(a.postScriptName)===!1?i.loadFile(a.postScriptName):i.getFileFromVFS(a.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");(function(l,o){o=/^\x00\x01\x00\x00/.test(o)?t(o):t(sy(o)),l.metadata=e.API.TTFFont.open(o),l.metadata.Unicode=l.metadata.Unicode||{encoding:{},kerning:{},widths:[]},l.metadata.glyIdsUsed=[0]})(a,n)}}])})(nn),nn.API.addSvgAsImage=function(e,t,r,n,a,i,l,o){if(isNaN(t)||isNaN(r))throw hs.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(n)||isNaN(a))throw hs.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var c=document.createElement("canvas");c.width=n,c.height=a;var d=c.getContext("2d");d.fillStyle="#fff",d.fillRect(0,0,c.width,c.height);var f={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},p=this;return(Fn.canvg?Promise.resolve(Fn.canvg):hm(()=>import("./index.es-DWZx0qC8.js"),[])).catch(function(y){return Promise.reject(new Error("Could not load canvg: "+y))}).then(function(y){return y.default?y.default:y}).then(function(y){return y.fromString(d,e,f)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(y){return y.render(f)}).then(function(){p.addImage(c.toDataURL("image/jpeg",1),t,r,n,a,l,o)})},nn.API.putTotalPages=function(e){var t,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),r=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var a=0;a<this.internal.pages[n].length;a++)this.internal.pages[n][a]=this.internal.pages[n][a].replace(t,r);return this},nn.API.viewerPreferences=function(e,t){var r;e=e||{},t=t||!1;var n,a,i,l={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},o=Object.keys(l),c=[],d=0,f=0,p=0;function y(N,w){var k,S=!1;for(k=0;k<N.length;k+=1)N[k]===w&&(S=!0);return S}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(l)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var g=o.length;for(p=0;p<g;p+=1)r[o[p]].value=r[o[p]].defaultValue,r[o[p]].explicitSet=!1}if(Ga(e)==="object"){for(a in e)if(i=e[a],y(o,a)&&i!==void 0){if(r[a].type==="boolean"&&typeof i=="boolean")r[a].value=i;else if(r[a].type==="name"&&y(r[a].valueSet,i))r[a].value=i;else if(r[a].type==="integer"&&Number.isInteger(i))r[a].value=i;else if(r[a].type==="array"){for(d=0;d<i.length;d+=1)if(n=!0,i[d].length===1&&typeof i[d][0]=="number")c.push(String(i[d]-1));else if(i[d].length>1){for(f=0;f<i[d].length;f+=1)typeof i[d][f]!="number"&&(n=!1);n===!0&&c.push([i[d][0]-1,i[d][1]-1].join(" "))}r[a].value="["+c.join(" ")+"]"}else r[a].value=r[a].defaultValue;r[a].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var N,w=[];for(N in r)r[N].explicitSet===!0&&(r[N].type==="name"?w.push("/"+N+" /"+r[N].value):w.push("/"+N+" "+r[N].value));w.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+w.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},(function(e){var t=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',a=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),i=unescape(encodeURIComponent(n)),l=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),o=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),d=i.length+l.length+o.length+a.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+d+" >>"),this.internal.write("stream"),this.internal.write(a+i+l+o+c),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(n,a){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:a||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",t)),this}})(nn.API),(function(e){var t=e.API,r=t.pdfEscape16=function(i,l){for(var o,c=l.metadata.Unicode.widths,d=["","0","00","000","0000"],f=[""],p=0,y=i.length;p<y;++p){if(o=l.metadata.characterToGlyph(i.charCodeAt(p)),l.metadata.glyIdsUsed.push(o),l.metadata.toUnicode[o]=i.charCodeAt(p),c.indexOf(o)==-1&&(c.push(o),c.push([parseInt(l.metadata.widthOfGlyph(o),10)])),o=="0")return f.join("");o=o.toString(16),f.push(d[4-o.length],o)}return f.join("")},n=function(i){var l,o,c,d,f,p,y;for(f=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],p=0,y=(o=Object.keys(i).sort(function(g,N){return g-N})).length;p<y;p++)l=o[p],c.length>=100&&(f+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),i[l]!==void 0&&i[l]!==null&&typeof i[l].toString=="function"&&(d=("0000"+i[l].toString(16)).slice(-4),l=("0000"+(+l).toString(16)).slice(-4),c.push("<"+l+"><"+d+">"));return c.length&&(f+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),f+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(i){(function(l){var o=l.font,c=l.out,d=l.newObject,f=l.putStream;if(o.metadata instanceof e.API.TTFFont&&o.encoding==="Identity-H"){for(var p=o.metadata.Unicode.widths,y=o.metadata.subset.encode(o.metadata.glyIdsUsed,1),g="",N=0;N<y.length;N++)g+=String.fromCharCode(y[N]);var w=d();f({data:g,addLength1:!0,objectId:w}),c("endobj");var k=d();f({data:n(o.metadata.toUnicode),addLength1:!0,objectId:k}),c("endobj");var S=d();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+i1(o.fontName)),c("/FontFile2 "+w+" 0 R"),c("/FontBBox "+e.API.PDFObject.convert(o.metadata.bbox)),c("/Flags "+o.metadata.flags),c("/StemV "+o.metadata.stemV),c("/ItalicAngle "+o.metadata.italicAngle),c("/Ascent "+o.metadata.ascender),c("/Descent "+o.metadata.decender),c("/CapHeight "+o.metadata.capHeight),c(">>"),c("endobj");var O=d();c("<<"),c("/Type /Font"),c("/BaseFont /"+i1(o.fontName)),c("/FontDescriptor "+S+" 0 R"),c("/W "+e.API.PDFObject.convert(p)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+o.encoding+")"),c(">>"),c(">>"),c("endobj"),o.objectNumber=d(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+k+" 0 R"),c("/BaseFont /"+i1(o.fontName)),c("/Encoding /"+o.encoding),c("/DescendantFonts ["+O+" 0 R]"),c(">>"),c("endobj"),o.isAlreadyPutted=!0}})(i)}]),t.events.push(["putFont",function(i){(function(l){var o=l.font,c=l.out,d=l.newObject,f=l.putStream;if(o.metadata instanceof e.API.TTFFont&&o.encoding==="WinAnsiEncoding"){for(var p=o.metadata.rawData,y="",g=0;g<p.length;g++)y+=String.fromCharCode(p[g]);var N=d();f({data:y,addLength1:!0,objectId:N}),c("endobj");var w=d();f({data:n(o.metadata.toUnicode),addLength1:!0,objectId:w}),c("endobj");var k=d();c("<<"),c("/Descent "+o.metadata.decender),c("/CapHeight "+o.metadata.capHeight),c("/StemV "+o.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+N+" 0 R"),c("/Flags 96"),c("/FontBBox "+e.API.PDFObject.convert(o.metadata.bbox)),c("/FontName /"+i1(o.fontName)),c("/ItalicAngle "+o.metadata.italicAngle),c("/Ascent "+o.metadata.ascender),c(">>"),c("endobj"),o.objectNumber=d();for(var S=0;S<o.metadata.hmtx.widths.length;S++)o.metadata.hmtx.widths[S]=parseInt(o.metadata.hmtx.widths[S]*(1e3/o.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+w+" 0 R/BaseFont/"+i1(o.fontName)+"/FontDescriptor "+k+" 0 R/Encoding/"+o.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(o.metadata.hmtx.widths)+">>"),c("endobj"),o.isAlreadyPutted=!0}})(i)}]);var a=function(i){var l,o=i.text||"",c=i.x,d=i.y,f=i.options||{},p=i.mutex||{},y=p.pdfEscape,g=p.activeFontKey,N=p.fonts,w=g,k="",S=0,O="",E=N[w].encoding;if(N[w].encoding!=="Identity-H")return{text:o,x:c,y:d,options:f,mutex:p};for(O=o,w=g,Array.isArray(o)&&(O=o[0]),S=0;S<O.length;S+=1)N[w].metadata.hasOwnProperty("cmap")&&(l=N[w].metadata.cmap.unicode.codeMap[O[S].charCodeAt(0)]),l||O[S].charCodeAt(0)<256&&N[w].metadata.hasOwnProperty("Unicode")?k+=O[S]:k+="";var D="";return parseInt(w.slice(1))<14||E==="WinAnsiEncoding"?D=y(k,w).split("").map(function(q){return q.charCodeAt(0).toString(16)}).join(""):E==="Identity-H"&&(D=r(k,N[w])),p.isHex=!0,{text:D,x:c,y:d,options:f,mutex:p}};t.events.push(["postProcessText",function(i){var l=i.text||"",o=[],c={text:l,x:i.x,y:i.y,options:i.options,mutex:i.mutex};if(Array.isArray(l)){var d=0;for(d=0;d<l.length;d+=1)Array.isArray(l[d])&&l[d].length===3?o.push([a(Object.assign({},c,{text:l[d][0]})).text,l[d][1],l[d][2]]):o.push(a(Object.assign({},c,{text:l[d]})).text);i.text=o}else i.text=a(Object.assign({},c,{text:l})).text}])})(nn),(function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0},e.addFileToVFS=function(r,n){return t.call(this),this.internal.vFS[r]=n,this},e.getFileFromVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}})(nn.API),(function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(n){var a,i,l,o,c,d,f,p=t,y=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],g=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],N={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},w={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},k=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],S=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),O=!1,E=0;this.__bidiEngine__={};var D=function(H){var K=H.charCodeAt(),J=K>>8,ae=w[J];return ae!==void 0?p[256*ae+(255&K)]:J===252||J===253?"AL":S.test(J)?"L":J===8?"R":"N"},q=function(H){for(var K,J=0;J<H.length;J++){if((K=D(H.charAt(J)))==="L")return!1;if(K==="R")return!0}return!1},W=function(H,K,J,ae){var se,ue,fe,ke,_e=K[ae];switch(_e){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":O=!1;break;case"N":case"AN":break;case"EN":O&&(_e="AN");break;case"AL":O=!0,_e="R";break;case"WS":case"BN":_e="N";break;case"CS":ae<1||ae+1>=K.length||(se=J[ae-1])!=="EN"&&se!=="AN"||(ue=K[ae+1])!=="EN"&&ue!=="AN"?_e="N":O&&(ue="AN"),_e=ue===se?ue:"N";break;case"ES":_e=(se=ae>0?J[ae-1]:"B")==="EN"&&ae+1<K.length&&K[ae+1]==="EN"?"EN":"N";break;case"ET":if(ae>0&&J[ae-1]==="EN"){_e="EN";break}if(O){_e="N";break}for(fe=ae+1,ke=K.length;fe<ke&&K[fe]==="ET";)fe++;_e=fe<ke&&K[fe]==="EN"?"EN":"N";break;case"NSM":if(l&&!o){for(ke=K.length,fe=ae+1;fe<ke&&K[fe]==="NSM";)fe++;if(fe<ke){var Le=H[ae],xe=Le>=1425&&Le<=2303||Le===64286;if(se=K[fe],xe&&(se==="R"||se==="AL")){_e="R";break}}}_e=ae<1||(se=K[ae-1])==="B"?"N":J[ae-1];break;case"B":O=!1,a=!0,_e=E;break;case"S":i=!0,_e="N"}return _e},R=function(H,K,J){var ae=H.split("");return J&&U(ae,J,{hiLevel:E}),ae.reverse(),K&&K.reverse(),ae.join("")},U=function(H,K,J){var ae,se,ue,fe,ke,_e=-1,Le=H.length,xe=0,B=[],ee=E?g:y,Y=[];for(O=!1,a=!1,i=!1,se=0;se<Le;se++)Y[se]=D(H[se]);for(ue=0;ue<Le;ue++){if(ke=xe,B[ue]=W(H,Y,B,ue),ae=240&(xe=ee[ke][N[B[ue]]]),xe&=15,K[ue]=fe=ee[xe][5],ae>0)if(ae===16){for(se=_e;se<ue;se++)K[se]=1;_e=-1}else _e=-1;if(ee[xe][6])_e===-1&&(_e=ue);else if(_e>-1){for(se=_e;se<ue;se++)K[se]=fe;_e=-1}Y[ue]==="B"&&(K[ue]=0),J.hiLevel|=fe}i&&(function(re,Q,Ce){for(var me=0;me<Ce;me++)if(re[me]==="S"){Q[me]=E;for(var ie=me-1;ie>=0&&re[ie]==="WS";ie--)Q[ie]=E}})(Y,K,Le)},z=function(H,K,J,ae,se){if(!(se.hiLevel<H)){if(H===1&&E===1&&!a)return K.reverse(),void(J&&J.reverse());for(var ue,fe,ke,_e,Le=K.length,xe=0;xe<Le;){if(ae[xe]>=H){for(ke=xe+1;ke<Le&&ae[ke]>=H;)ke++;for(_e=xe,fe=ke-1;_e<fe;_e++,fe--)ue=K[_e],K[_e]=K[fe],K[fe]=ue,J&&(ue=J[_e],J[_e]=J[fe],J[fe]=ue);xe=ke}xe++}}},Z=function(H,K,J){var ae=H.split(""),se={hiLevel:E};return J||(J=[]),U(ae,J,se),(function(ue,fe,ke){if(ke.hiLevel!==0&&f)for(var _e,Le=0;Le<ue.length;Le++)fe[Le]===1&&(_e=k.indexOf(ue[Le]))>=0&&(ue[Le]=k[_e+1])})(ae,J,se),z(2,ae,K,J,se),z(1,ae,K,J,se),ae.join("")};return this.__bidiEngine__.doBidiReorder=function(H,K,J){if((function(se,ue){if(ue)for(var fe=0;fe<se.length;fe++)ue[fe]=fe;o===void 0&&(o=q(se)),d===void 0&&(d=q(se))})(H,K),l||!c||d)if(l&&c&&o^d)E=o?1:0,H=R(H,K,J);else if(!l&&c&&d)E=o?1:0,H=Z(H,K,J),H=R(H,K);else if(!l||o||c||d){if(l&&!c&&o^d)H=R(H,K),o?(E=0,H=Z(H,K,J)):(E=1,H=Z(H,K,J),H=R(H,K));else if(l&&o&&!c&&d)E=1,H=Z(H,K,J),H=R(H,K);else if(!l&&!c&&o^d){var ae=f;o?(E=1,H=Z(H,K,J),E=0,f=!1,H=Z(H,K,J),f=ae):(E=0,H=Z(H,K,J),H=R(H,K),E=1,f=!1,H=Z(H,K,J),f=ae,H=R(H,K))}}else E=0,H=Z(H,K,J);else E=o?1:0,H=Z(H,K,J);return H},this.__bidiEngine__.setOptions=function(H){H&&(l=H.isInputVisual,c=H.isOutputVisual,o=H.isInputRtl,d=H.isOutputRtl,f=H.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(n){var a=n.text;n.x,n.y;var i=n.options||{};n.mutex,i.lang;var l=[];if(i.isInputVisual=typeof i.isInputVisual!="boolean"||i.isInputVisual,r.setOptions(i),Object.prototype.toString.call(a)==="[object Array]"){var o=0;for(l=[],o=0;o<a.length;o+=1)Object.prototype.toString.call(a[o])==="[object Array]"?l.push([r.doBidiReorder(a[o][0]),a[o][1],a[o][2]]):l.push([r.doBidiReorder(a[o])]);n.text=l}else n.text=r.doBidiReorder(a);r.setOptions({isInputVisual:!0})}])})(nn),nn.API.TTFFont=(function(){function e(t){var r;if(this.rawData=t,r=this.contents=new hf(t),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new o8e(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new GEe(this.contents),this.head=new YEe(this),this.name=new t8e(this),this.cmap=new MW(this),this.toUnicode={},this.hhea=new ZEe(this),this.maxp=new r8e(this),this.hmtx=new n8e(this),this.post=new JEe(this),this.os2=new QEe(this),this.loca=new l8e(this),this.glyf=new a8e(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,r,n,a,i;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var l,o,c,d;for(d=[],l=0,o=(c=this.bbox).length;l<o;l++)t=c[l],d.push(Math.round(t*this.scaleFactor));return d}).call(this),this.stemV=0,this.post.exists?(n=255&(a=this.post.italic_angle),32768&(r=a>>16)&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(i=this.familyClass)===1||i===2||i===3||i===4||i===5||i===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var r;return((r=this.cmap.unicode)!=null?r.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*r},e.prototype.widthOfString=function(t,r,n){var a,i,l,o;for(l=0,i=0,o=(t=""+t).length;0<=o?i<o:i>o;i=0<=o?++i:--i)a=t.charCodeAt(i),l+=this.widthOfGlyph(this.characterToGlyph(a))+n*(1e3/r)||0;return l*(r/1e3)},e.prototype.lineHeight=function(t,r){var n;return r==null&&(r=!1),n=r?this.lineGap:0,(this.ascender+n-this.decender)/1e3*t},e})();var su,hf=(function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var r,n;for(n=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)n[r]=String.fromCharCode(this.readByte());return n.join("")},e.prototype.writeString=function(t){var r,n,a;for(a=[],r=0,n=t.length;0<=n?r<n:r>n;r=0<=n?++r:--r)a.push(this.writeByte(t.charCodeAt(r)));return a},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,r,n,a,i,l,o,c;return t=this.readByte(),r=this.readByte(),n=this.readByte(),a=this.readByte(),i=this.readByte(),l=this.readByte(),o=this.readByte(),c=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^r)+1099511627776*(255^n)+4294967296*(255^a)+16777216*(255^i)+65536*(255^l)+256*(255^o)+(255^c)+1):72057594037927940*t+281474976710656*r+1099511627776*n+4294967296*a+16777216*i+65536*l+256*o+c},e.prototype.writeLongLong=function(t){var r,n;return r=Math.floor(t/4294967296),n=4294967295&t,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var r,n;for(r=[],n=0;0<=t?n<t:n>t;n=0<=t?++n:--n)r.push(this.readByte());return r},e.prototype.write=function(t){var r,n,a,i;for(i=[],n=0,a=t.length;n<a;n++)r=t[n],i.push(this.writeByte(r));return i},e})(),GEe=(function(){var e;function t(r){var n,a,i;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},a=0,i=this.tableCount;0<=i?a<i:a>i;a=0<=i?++a:--a)n={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[n.tag]=n}return t.prototype.encode=function(r){var n,a,i,l,o,c,d,f,p,y,g,N,w;for(w in g=Object.keys(r).length,c=Math.log(2),p=16*Math.floor(Math.log(g)/c),l=Math.floor(p/c),f=16*g-p,(a=new hf).writeInt(this.scalarType),a.writeShort(g),a.writeShort(p),a.writeShort(l),a.writeShort(f),i=16*g,d=a.pos+i,o=null,N=[],r)for(y=r[w],a.writeString(w),a.writeInt(e(y)),a.writeInt(d),a.writeInt(y.length),N=N.concat(y),w==="head"&&(o=d),d+=y.length;d%4;)N.push(0),d++;return a.write(N),n=2981146554-e(a.data),a.pos=o+8,a.writeUInt32(n),a.data},e=function(r){var n,a,i,l;for(r=LW.call(r);r.length%4;)r.push(0);for(i=new hf(r),a=0,n=0,l=r.length;n<l;n=n+=4)a+=i.readUInt32();return 4294967295&a},t})(),XEe={}.hasOwnProperty,Yu=function(e,t){for(var r in t)XEe.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};su=(function(){function e(t){var r;this.file=t,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e})();var YEe=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Yu(e,su),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var r;return(r=new hf).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(t),r.writeShort(this.glyphDataFormat),r.data},e})(),dL=(function(){function e(t,r){var n,a,i,l,o,c,d,f,p,y,g,N,w,k,S,O,E;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=r+t.readInt(),p=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=t.readByte();break;case 4:for(g=t.readUInt16(),y=g/2,t.pos+=6,i=(function(){var D,q;for(q=[],c=D=0;0<=y?D<y:D>y;c=0<=y?++D:--D)q.push(t.readUInt16());return q})(),t.pos+=2,w=(function(){var D,q;for(q=[],c=D=0;0<=y?D<y:D>y;c=0<=y?++D:--D)q.push(t.readUInt16());return q})(),d=(function(){var D,q;for(q=[],c=D=0;0<=y?D<y:D>y;c=0<=y?++D:--D)q.push(t.readUInt16());return q})(),f=(function(){var D,q;for(q=[],c=D=0;0<=y?D<y:D>y;c=0<=y?++D:--D)q.push(t.readUInt16());return q})(),a=(this.length-t.pos+this.offset)/2,o=(function(){var D,q;for(q=[],c=D=0;0<=a?D<a:D>a;c=0<=a?++D:--D)q.push(t.readUInt16());return q})(),c=S=0,E=i.length;S<E;c=++S)for(k=i[c],n=O=N=w[c];N<=k?O<=k:O>=k;n=N<=k?++O:--O)f[c]===0?l=n+d[c]:(l=o[f[c]/2+(n-N)-(y-c)]||0)!==0&&(l+=d[c]),this.codeMap[n]=65535&l}t.pos=p}return e.encode=function(t,r){var n,a,i,l,o,c,d,f,p,y,g,N,w,k,S,O,E,D,q,W,R,U,z,Z,H,K,J,ae,se,ue,fe,ke,_e,Le,xe,B,ee,Y,re,Q,Ce,me,ie,je,be,le;switch(ae=new hf,l=Object.keys(t).sort(function(Ee,Me){return Ee-Me}),r){case"macroman":for(w=0,k=(function(){var Ee=[];for(N=0;N<256;++N)Ee.push(0);return Ee})(),O={0:0},i={},se=0,_e=l.length;se<_e;se++)O[ie=t[a=l[se]]]==null&&(O[ie]=++w),i[a]={old:t[a],new:O[t[a]]},k[a]=O[t[a]];return ae.writeUInt16(1),ae.writeUInt16(0),ae.writeUInt32(12),ae.writeUInt16(0),ae.writeUInt16(262),ae.writeUInt16(0),ae.write(k),{charMap:i,subtable:ae.data,maxGlyphID:w+1};case"unicode":for(K=[],p=[],E=0,O={},n={},S=d=null,ue=0,Le=l.length;ue<Le;ue++)O[q=t[a=l[ue]]]==null&&(O[q]=++E),n[a]={old:q,new:O[q]},o=O[q]-a,S!=null&&o===d||(S&&p.push(S),K.push(a),d=o),S=a;for(S&&p.push(S),p.push(65535),K.push(65535),Z=2*(z=K.length),U=2*Math.pow(Math.log(z)/Math.LN2,2),y=Math.log(U/2)/Math.LN2,R=2*z-U,c=[],W=[],g=[],N=fe=0,xe=K.length;fe<xe;N=++fe){if(H=K[N],f=p[N],H===65535){c.push(0),W.push(0);break}if(H-(J=n[H].new)>=32768)for(c.push(0),W.push(2*(g.length+z-N)),a=ke=H;H<=f?ke<=f:ke>=f;a=H<=f?++ke:--ke)g.push(n[a].new);else c.push(J-H),W.push(0)}for(ae.writeUInt16(3),ae.writeUInt16(1),ae.writeUInt32(12),ae.writeUInt16(4),ae.writeUInt16(16+8*z+2*g.length),ae.writeUInt16(0),ae.writeUInt16(Z),ae.writeUInt16(U),ae.writeUInt16(y),ae.writeUInt16(R),Ce=0,B=p.length;Ce<B;Ce++)a=p[Ce],ae.writeUInt16(a);for(ae.writeUInt16(0),me=0,ee=K.length;me<ee;me++)a=K[me],ae.writeUInt16(a);for(je=0,Y=c.length;je<Y;je++)o=c[je],ae.writeUInt16(o);for(be=0,re=W.length;be<re;be++)D=W[be],ae.writeUInt16(D);for(le=0,Q=g.length;le<Q;le++)w=g[le],ae.writeUInt16(w);return{charMap:n,subtable:ae.data,maxGlyphID:E+1}}},e})(),MW=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Yu(e,su),e.prototype.tag="cmap",e.prototype.parse=function(t){var r,n,a;for(t.pos=this.offset,this.version=t.readUInt16(),a=t.readUInt16(),this.tables=[],this.unicode=null,n=0;0<=a?n<a:n>a;n=0<=a?++n:--n)r=new dL(t,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(t,r){var n,a;return r==null&&(r="macroman"),n=dL.encode(t,r),(a=new hf).writeUInt16(0),a.writeUInt16(1),n.table=a.data.concat(n.subtable),n},e})(),ZEe=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Yu(e,su),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e})(),QEe=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Yu(e,su),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=(function(){var r,n;for(n=[],r=0;r<10;++r)n.push(t.readByte());return n})(),this.charRange=(function(){var r,n;for(n=[],r=0;r<4;++r)n.push(t.readInt());return n})(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=(function(){var r,n;for(n=[],r=0;r<2;r=++r)n.push(t.readInt());return n})(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e})(),JEe=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Yu(e,su),e.prototype.tag="post",e.prototype.parse=function(t){var r,n,a;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:case 196608:break;case 131072:var i;for(n=t.readUInt16(),this.glyphNameIndex=[],i=0;0<=n?i<n:i>n;i=0<=n?++i:--i)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],a=[];t.pos<this.offset+this.length;)r=t.readByte(),a.push(this.names.push(t.readString(r)));return a;case 151552:return n=t.readUInt16(),this.offsets=t.read(n);case 262144:return this.map=(function(){var l,o,c;for(c=[],i=l=0,o=this.file.maxp.numGlyphs;0<=o?l<o:l>o;i=0<=o?++l:--l)c.push(t.readUInt32());return c}).call(this)}},e})(),e8e=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},t8e=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Yu(e,su),e.prototype.tag="name",e.prototype.parse=function(t){var r,n,a,i,l,o,c,d,f,p,y;for(t.pos=this.offset,t.readShort(),r=t.readShort(),o=t.readShort(),n=[],i=0;0<=r?i<r:i>r;i=0<=r?++i:--i)n.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+o+t.readShort()});for(c={},i=f=0,p=n.length;f<p;i=++f)a=n[i],t.pos=a.offset,d=t.readString(a.length),l=new e8e(d,a),c[y=a.nameID]==null&&(c[y]=[]),c[a.nameID].push(l);this.strings=c,this.copyright=c[0],this.fontFamily=c[1],this.fontSubfamily=c[2],this.uniqueSubfamily=c[3],this.fontName=c[4],this.version=c[5];try{this.postscriptName=c[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=c[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=c[7],this.manufacturer=c[8],this.designer=c[9],this.description=c[10],this.vendorUrl=c[11],this.designerUrl=c[12],this.license=c[13],this.licenseUrl=c[14],this.preferredFamily=c[15],this.preferredSubfamily=c[17],this.compatibleFull=c[18],this.sampleText=c[19]},e})(),r8e=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Yu(e,su),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e})(),n8e=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Yu(e,su),e.prototype.tag="hmtx",e.prototype.parse=function(t){var r,n,a,i,l,o,c;for(t.pos=this.offset,this.metrics=[],r=0,o=this.file.hhea.numberOfMetrics;0<=o?r<o:r>o;r=0<=o?++r:--r)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(a=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var d,f;for(f=[],r=d=0;0<=a?d<a:d>a;r=0<=a?++d:--d)f.push(t.readInt16());return f})(),this.widths=(function(){var d,f,p,y;for(y=[],d=0,f=(p=this.metrics).length;d<f;d++)i=p[d],y.push(i.advance);return y}).call(this),n=this.widths[this.widths.length-1],c=[],r=l=0;0<=a?l<a:l>a;r=0<=a?++l:--l)c.push(this.widths.push(n));return c},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e})(),LW=[].slice,a8e=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Yu(e,su),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var r,n,a,i,l,o,c,d,f,p;return t in this.cache?this.cache[t]:(i=this.file.loca,r=this.file.contents,n=i.indexOf(t),(a=i.lengthOf(t))===0?this.cache[t]=null:(r.pos=this.offset+n,l=(o=new hf(r.read(a))).readShort(),d=o.readShort(),p=o.readShort(),c=o.readShort(),f=o.readShort(),this.cache[t]=l===-1?new i8e(o,d,p,c,f):new s8e(o,l,d,p,c,f),this.cache[t]))},e.prototype.encode=function(t,r,n){var a,i,l,o,c;for(l=[],i=[],o=0,c=r.length;o<c;o++)a=t[r[o]],i.push(l.length),a&&(l=l.concat(a.encode(n)));return i.push(l.length),{table:l,offsets:i}},e})(),s8e=(function(){function e(t,r,n,a,i,l){this.raw=t,this.numberOfContours=r,this.xMin=n,this.yMin=a,this.xMax=i,this.yMax=l,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e})(),i8e=(function(){function e(t,r,n,a,i){var l,o;for(this.raw=t,this.xMin=r,this.yMin=n,this.xMax=a,this.yMax=i,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],l=this.raw;o=l.readShort(),this.glyphOffsets.push(l.pos),this.glyphIDs.push(l.readUInt16()),32&o;)l.pos+=1&o?4:2,128&o?l.pos+=8:64&o?l.pos+=4:8&o&&(l.pos+=2)}return e.prototype.encode=function(){var t,r,n;for(r=new hf(LW.call(this.raw.data)),t=0,n=this.glyphIDs.length;t<n;++t)r.pos=this.glyphOffsets[t];return r.data},e})(),l8e=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Yu(e,su),e.prototype.tag="loca",e.prototype.parse=function(t){var r,n;return t.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var a,i;for(i=[],n=0,a=this.length;n<a;n+=2)i.push(2*t.readUInt16());return i}).call(this):(function(){var a,i;for(i=[],n=0,a=this.length;n<a;n+=4)i.push(t.readUInt32());return i}).call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,r){for(var n=new Uint32Array(this.offsets.length),a=0,i=0,l=0;l<n.length;++l)if(n[l]=a,i<r.length&&r[i]==l){++i,n[l]=a;var o=this.offsets[l],c=this.offsets[l+1]-o;c>0&&(a+=c)}for(var d=new Array(4*n.length),f=0;f<n.length;++f)d[4*f+3]=255&n[f],d[4*f+2]=(65280&n[f])>>8,d[4*f+1]=(16711680&n[f])>>16,d[4*f]=(4278190080&n[f])>>24;return d},e})(),o8e=(function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,r,n,a,i;for(r in a=this.font.cmap.tables[0].codeMap,t={},i=this.subset)n=i[r],t[r]=a[n];return t},e.prototype.glyphsFor=function(t){var r,n,a,i,l,o,c;for(a={},l=0,o=t.length;l<o;l++)a[i=t[l]]=this.font.glyf.glyphFor(i);for(i in r=[],a)(n=a[i])!=null&&n.compound&&r.push.apply(r,n.glyphIDs);if(r.length>0)for(i in c=this.glyphsFor(r))n=c[i],a[i]=n;return a},e.prototype.encode=function(t,r){var n,a,i,l,o,c,d,f,p,y,g,N,w,k,S;for(a in n=MW.encode(this.generateCmap(),"unicode"),l=this.glyphsFor(t),g={0:0},S=n.charMap)g[(c=S[a]).old]=c.new;for(N in y=n.maxGlyphID,l)N in g||(g[N]=y++);return f=(function(O){var E,D;for(E in D={},O)D[O[E]]=E;return D})(g),p=Object.keys(f).sort(function(O,E){return O-E}),w=(function(){var O,E,D;for(D=[],O=0,E=p.length;O<E;O++)o=p[O],D.push(f[o]);return D})(),i=this.font.glyf.encode(l,w,g),d=this.font.loca.encode(i.offsets,w),k={cmap:this.font.cmap.raw(),glyf:i.table,loca:d,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(k["OS/2"]=this.font.os2.raw()),this.font.directory.encode(k)},e})();nn.API.PDFObject=(function(){var e;function t(){}return e=function(r,n){return(Array(n+1).join("0")+r).slice(-n)},t.convert=function(r){var n,a,i,l;if(Array.isArray(r))return"["+(function(){var o,c,d;for(d=[],o=0,c=r.length;o<c;o++)n=r[o],d.push(t.convert(n));return d})().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+e(r.getUTCFullYear(),4)+e(r.getUTCMonth(),2)+e(r.getUTCDate(),2)+e(r.getUTCHours(),2)+e(r.getUTCMinutes(),2)+e(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(a in i=["<<"],r)l=r[a],i.push("/"+a+" "+t.convert(l));return i.push(">>"),i.join(`
`)}return""+r},t})();function RW(e,t,r,n,a){n=n||{};var i=1.15,l=a.internal.scaleFactor,o=a.internal.getFontSize()/l,c=a.getLineHeightFactor?a.getLineHeightFactor():i,d=o*c,f=/\r\n|\r|\n/g,p="",y=1;if((n.valign==="middle"||n.valign==="bottom"||n.halign==="center"||n.halign==="right")&&(p=typeof e=="string"?e.split(f):e,y=p.length||1),r+=o*(2-i),n.valign==="middle"?r-=y/2*d:n.valign==="bottom"&&(r-=y*d),n.halign==="center"||n.halign==="right"){var g=o;if(n.halign==="center"&&(g*=.5),p&&y>=1){for(var N=0;N<p.length;N++)a.text(p[N],t-a.getStringUnitWidth(p[N])*g,r),r+=d;return a}t-=a.getStringUnitWidth(e)*g}return n.halign==="justify"?a.text(e,t,r,{maxWidth:n.maxWidth||100,align:"justify"}):a.text(e,t,r),a}var uL={},_1=(function(){function e(t){this.jsPDFDocument=t,this.userStyles={textColor:t.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:t.internal.getFontSize(),fontStyle:t.internal.getFont().fontStyle,font:t.internal.getFont().fontName,lineWidth:t.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:t.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return e.setDefaults=function(t,r){r===void 0&&(r=null),r?r.__autoTableDocumentDefaults=t:uL=t},e.unifyColor=function(t){return Array.isArray(t)?t:typeof t=="number"?[t,t,t]:typeof t=="string"?[t]:null},e.prototype.applyStyles=function(t,r){var n,a,i;r===void 0&&(r=!1),t.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(t.fontStyle);var l=this.jsPDFDocument.internal.getFont(),o=l.fontStyle,c=l.fontName;if(t.font&&(c=t.font),t.fontStyle){o=t.fontStyle;var d=this.getFontList()[c];d&&d.indexOf(o)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(d[0]),o=d[0])}if(this.jsPDFDocument.setFont(c,o),t.fontSize&&this.jsPDFDocument.setFontSize(t.fontSize),!r){var f=e.unifyColor(t.fillColor);f&&(n=this.jsPDFDocument).setFillColor.apply(n,f),f=e.unifyColor(t.textColor),f&&(a=this.jsPDFDocument).setTextColor.apply(a,f),f=e.unifyColor(t.lineColor),f&&(i=this.jsPDFDocument).setDrawColor.apply(i,f),typeof t.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(t.lineWidth)}},e.prototype.splitTextToSize=function(t,r,n){return this.jsPDFDocument.splitTextToSize(t,r,n)},e.prototype.rect=function(t,r,n,a,i){return this.jsPDFDocument.rect(t,r,n,a,i)},e.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},e.prototype.getTextWidth=function(t){return this.jsPDFDocument.getTextWidth(t)},e.prototype.getDocument=function(){return this.jsPDFDocument},e.prototype.setPage=function(t){this.jsPDFDocument.setPage(t)},e.prototype.addPage=function(){return this.jsPDFDocument.addPage()},e.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},e.prototype.getGlobalOptions=function(){return uL||{}},e.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},e.prototype.pageSize=function(){var t=this.jsPDFDocument.internal.pageSize;return t.width==null&&(t={width:t.getWidth(),height:t.getHeight()}),t},e.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},e.prototype.getLineHeightFactor=function(){var t=this.jsPDFDocument;return t.getLineHeightFactor?t.getLineHeightFactor():1.15},e.prototype.getLineHeight=function(t){return t/this.scaleFactor()*this.getLineHeightFactor()},e.prototype.pageNumber=function(){var t=this.jsPDFDocument.internal.getCurrentPageInfo();return t?t.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},e})(),QS=function(e,t){return QS=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])},QS(e,t)};function FW(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");QS(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var BW=(function(e){FW(t,e);function t(r){var n=e.call(this)||this;return n._element=r,n}return t})(Array);function c8e(e){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/e,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function d8e(e){var t={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return t[e]}function Ew(e,t,r){r.applyStyles(t,!0);var n=Array.isArray(e)?e:[e],a=n.map(function(i){return r.getTextWidth(i)}).reduce(function(i,l){return Math.max(i,l)},0);return a}function UW(e,t,r,n){var a=t.settings.tableLineWidth,i=t.settings.tableLineColor;e.applyStyles({lineWidth:a,lineColor:i});var l=zW(a,!1);l&&e.rect(r.x,r.y,t.getWidth(e.pageSize().width),n.y-r.y,l)}function zW(e,t){var r=e>0,n=t||t===0;return r&&n?"DF":r?"S":n?"F":null}function $k(e,t){var r,n,a,i;if(e=e||t,Array.isArray(e)){if(e.length>=4)return{top:e[0],right:e[1],bottom:e[2],left:e[3]};if(e.length===3)return{top:e[0],right:e[1],bottom:e[2],left:e[1]};if(e.length===2)return{top:e[0],right:e[1],bottom:e[0],left:e[1]};e.length===1?e=e[0]:e=t}return typeof e=="object"?(typeof e.vertical=="number"&&(e.top=e.vertical,e.bottom=e.vertical),typeof e.horizontal=="number"&&(e.right=e.horizontal,e.left=e.horizontal),{left:(r=e.left)!==null&&r!==void 0?r:t,top:(n=e.top)!==null&&n!==void 0?n:t,right:(a=e.right)!==null&&a!==void 0?a:t,bottom:(i=e.bottom)!==null&&i!==void 0?i:t}):(typeof e!="number"&&(e=t),{top:e,right:e,bottom:e,left:e})}function qW(e,t){var r=$k(t.settings.margin,0);return e.pageSize().width-(r.left+r.right)}function u8e(e,t,r,n,a){var i={},l=1.3333333333333333,o=FN(t,function(E){return a.getComputedStyle(E).backgroundColor});o!=null&&(i.fillColor=o);var c=FN(t,function(E){return a.getComputedStyle(E).color});c!=null&&(i.textColor=c);var d=f8e(n,r);d&&(i.cellPadding=d);var f="borderTopColor",p=l*r,y=n.borderTopWidth;if(n.borderBottomWidth===y&&n.borderRightWidth===y&&n.borderLeftWidth===y){var g=(parseFloat(y)||0)/p;g&&(i.lineWidth=g)}else i.lineWidth={top:(parseFloat(n.borderTopWidth)||0)/p,right:(parseFloat(n.borderRightWidth)||0)/p,bottom:(parseFloat(n.borderBottomWidth)||0)/p,left:(parseFloat(n.borderLeftWidth)||0)/p},i.lineWidth.top||(i.lineWidth.right?f="borderRightColor":i.lineWidth.bottom?f="borderBottomColor":i.lineWidth.left&&(f="borderLeftColor"));var N=FN(t,function(E){return a.getComputedStyle(E)[f]});N!=null&&(i.lineColor=N);var w=["left","right","center","justify"];w.indexOf(n.textAlign)!==-1&&(i.halign=n.textAlign),w=["middle","bottom","top"],w.indexOf(n.verticalAlign)!==-1&&(i.valign=n.verticalAlign);var k=parseInt(n.fontSize||"");isNaN(k)||(i.fontSize=k/l);var S=h8e(n);S&&(i.fontStyle=S);var O=(n.fontFamily||"").toLowerCase();return e.indexOf(O)!==-1&&(i.font=O),i}function h8e(e){var t="";return(e.fontWeight==="bold"||e.fontWeight==="bolder"||parseInt(e.fontWeight)>=700)&&(t="bold"),(e.fontStyle==="italic"||e.fontStyle==="oblique")&&(t+="italic"),t}function FN(e,t){var r=HW(e,t);if(!r)return null;var n=r.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!n||!Array.isArray(n))return null;var a=[parseInt(n[1]),parseInt(n[2]),parseInt(n[3])],i=parseInt(n[4]);return i===0||isNaN(a[0])||isNaN(a[1])||isNaN(a[2])?null:a}function HW(e,t){var r=t(e);return r==="rgba(0, 0, 0, 0)"||r==="transparent"||r==="initial"||r==="inherit"?e.parentElement==null?null:HW(e.parentElement,t):r}function f8e(e,t){var r=[e.paddingTop,e.paddingRight,e.paddingBottom,e.paddingLeft],n=96/(72/t),a=(parseInt(e.lineHeight)-parseInt(e.fontSize))/t/2,i=r.map(function(o){return parseInt(o||"0")/n}),l=$k(i,0);return a>l.top&&(l.top=a),a>l.bottom&&(l.bottom=a),l}function $W(e,t,r,n,a){var i,l;n===void 0&&(n=!1),a===void 0&&(a=!1);var o;typeof t=="string"?o=r.document.querySelector(t):o=t;var c=Object.keys(e.getFontList()),d=e.scaleFactor(),f=[],p=[],y=[];if(!o)return console.error("Html table could not be found with input: ",t),{head:f,body:p,foot:y};for(var g=0;g<o.rows.length;g++){var N=o.rows[g],w=(l=(i=N==null?void 0:N.parentElement)===null||i===void 0?void 0:i.tagName)===null||l===void 0?void 0:l.toLowerCase(),k=m8e(c,d,r,N,n,a);k&&(w==="thead"?f.push(k):w==="tfoot"?y.push(k):p.push(k))}return{head:f,body:p,foot:y}}function m8e(e,t,r,n,a,i){for(var l=new BW(n),o=0;o<n.cells.length;o++){var c=n.cells[o],d=r.getComputedStyle(c);if(a||d.display!=="none"){var f=void 0;i&&(f=u8e(e,c,t,d,r)),l.push({rowSpan:c.rowSpan,colSpan:c.colSpan,styles:f,_element:c,content:x8e(c)})}}var p=r.getComputedStyle(n);if(l.length>0&&(a||p.display!=="none"))return l}function x8e(e){var t=e.cloneNode(!0);return t.innerHTML=t.innerHTML.replace(/\n/g,"").replace(/ +/g," "),t.innerHTML=t.innerHTML.split(/<br.*?>/).map(function(r){return r.trim()}).join(`
`),t.innerText||t.textContent||""}function p8e(e,t,r){for(var n=0,a=[e,t,r];n<a.length;n++){var i=a[n];i&&typeof i!="object"&&console.error("The options parameter should be of type object, is: "+typeof i),i.startY&&typeof i.startY!="number"&&(console.error("Invalid value for startY option",i.startY),delete i.startY)}}function I0(e,t,r,n,a){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(e),l=1;l<arguments.length;l++){var o=arguments[l];if(o!=null)for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(i[c]=o[c])}return i}function VW(e,t){var r=new _1(e),n=r.getDocumentOptions(),a=r.getGlobalOptions();p8e(a,n,t);var i=I0({},a,n,t),l;typeof window<"u"&&(l=window);var o=g8e(a,n,t),c=b8e(a,n,t),d=v8e(r,i),f=w8e(r,i,l);return{id:t.tableId,content:f,hooks:c,styles:o,settings:d}}function g8e(e,t,r){for(var n={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},a=function(c){if(c==="columnStyles"){var d=e[c],f=t[c],p=r[c];n.columnStyles=I0({},d,f,p)}else{var y=[e,t,r],g=y.map(function(N){return N[c]||{}});n[c]=I0({},g[0],g[1],g[2])}},i=0,l=Object.keys(n);i<l.length;i++){var o=l[i];a(o)}return n}function b8e(e,t,r){for(var n=[e,t,r],a={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},i=0,l=n;i<l.length;i++){var o=l[i];o.didParseCell&&a.didParseCell.push(o.didParseCell),o.willDrawCell&&a.willDrawCell.push(o.willDrawCell),o.didDrawCell&&a.didDrawCell.push(o.didDrawCell),o.willDrawPage&&a.willDrawPage.push(o.willDrawPage),o.didDrawPage&&a.didDrawPage.push(o.didDrawPage)}return a}function v8e(e,t){var r,n,a,i,l,o,c,d,f,p,y,g,N=$k(t.margin,40/e.scaleFactor()),w=(r=y8e(e,t.startY))!==null&&r!==void 0?r:N.top,k;t.showFoot===!0?k="everyPage":t.showFoot===!1?k="never":k=(n=t.showFoot)!==null&&n!==void 0?n:"everyPage";var S;t.showHead===!0?S="everyPage":t.showHead===!1?S="never":S=(a=t.showHead)!==null&&a!==void 0?a:"everyPage";var O=(i=t.useCss)!==null&&i!==void 0?i:!1,E=t.theme||(O?"plain":"striped"),D=!!t.horizontalPageBreak,q=(l=t.horizontalPageBreakRepeat)!==null&&l!==void 0?l:null;return{includeHiddenHtml:(o=t.includeHiddenHtml)!==null&&o!==void 0?o:!1,useCss:O,theme:E,startY:w,margin:N,pageBreak:(c=t.pageBreak)!==null&&c!==void 0?c:"auto",rowPageBreak:(d=t.rowPageBreak)!==null&&d!==void 0?d:"auto",tableWidth:(f=t.tableWidth)!==null&&f!==void 0?f:"auto",showHead:S,showFoot:k,tableLineWidth:(p=t.tableLineWidth)!==null&&p!==void 0?p:0,tableLineColor:(y=t.tableLineColor)!==null&&y!==void 0?y:200,horizontalPageBreak:D,horizontalPageBreakRepeat:q,horizontalPageBreakBehaviour:(g=t.horizontalPageBreakBehaviour)!==null&&g!==void 0?g:"afterAllRows"}}function y8e(e,t){var r=e.getLastAutoTable(),n=e.scaleFactor(),a=e.pageNumber(),i=!1;if(r&&r.startPageNumber){var l=r.startPageNumber+r.pageNumber-1;i=l===a}return typeof t=="number"?t:(t==null||t===!1)&&i&&(r==null?void 0:r.finalY)!=null?r.finalY+20/n:null}function w8e(e,t,r){var n=t.head||[],a=t.body||[],i=t.foot||[];if(t.html){var l=t.includeHiddenHtml;if(r){var o=$W(e,t.html,r,l,t.useCss)||{};n=o.head||n,a=o.body||n,i=o.foot||n}else console.error("Cannot parse html in non browser environment")}var c=t.columns||k8e(n,a,i);return{columns:c,head:n,body:a,foot:i}}function k8e(e,t,r){var n=e[0]||t[0]||r[0]||[],a=[];return Object.keys(n).filter(function(i){return i!=="_element"}).forEach(function(i){var l=1,o;Array.isArray(n)?o=n[parseInt(i)]:o=n[i],typeof o=="object"&&!Array.isArray(o)&&(l=(o==null?void 0:o.colSpan)||1);for(var c=0;c<l;c++){var d=void 0;Array.isArray(n)?d=a.length:d=i+(c>0?"_".concat(c):"");var f={dataKey:d};a.push(f)}}),a}var JS=(function(){function e(t,r,n){this.table=r,this.pageNumber=r.pageNumber,this.settings=r.settings,this.cursor=n,this.doc=t.getDocument()}return e})(),N8e=(function(e){FW(t,e);function t(r,n,a,i,l,o){var c=e.call(this,r,n,o)||this;return c.cell=a,c.row=i,c.column=l,c.section=i.section,c}return t})(JS),_8e=(function(){function e(t,r){this.pageNumber=1,this.id=t.id,this.settings=t.settings,this.styles=t.styles,this.hooks=t.hooks,this.columns=r.columns,this.head=r.head,this.body=r.body,this.foot=r.foot}return e.prototype.getHeadHeight=function(t){return this.head.reduce(function(r,n){return r+n.getMaxCellHeight(t)},0)},e.prototype.getFootHeight=function(t){return this.foot.reduce(function(r,n){return r+n.getMaxCellHeight(t)},0)},e.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},e.prototype.callCellHooks=function(t,r,n,a,i,l){for(var o=0,c=r;o<c.length;o++){var d=c[o],f=new N8e(t,this,n,a,i,l),p=d(f)===!1;if(n.text=Array.isArray(n.text)?n.text:[n.text],p)return!1}return!0},e.prototype.callEndPageHooks=function(t,r){t.applyStyles(t.userStyles);for(var n=0,a=this.hooks.didDrawPage;n<a.length;n++){var i=a[n];i(new JS(t,this,r))}},e.prototype.callWillDrawPageHooks=function(t,r){for(var n=0,a=this.hooks.willDrawPage;n<a.length;n++){var i=a[n];i(new JS(t,this,r))}},e.prototype.getWidth=function(t){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var r=this.columns.reduce(function(a,i){return a+i.wrappedWidth},0);return r}else{var n=this.settings.margin;return t-n.left-n.right}},e})(),WW=(function(){function e(t,r,n,a,i){i===void 0&&(i=!1),this.height=0,this.raw=t,t instanceof BW&&(this.raw=t._element,this.element=t._element),this.index=r,this.section=n,this.cells=a,this.spansMultiplePages=i}return e.prototype.getMaxCellHeight=function(t){var r=this;return t.reduce(function(n,a){var i;return Math.max(n,((i=r.cells[a.index])===null||i===void 0?void 0:i.height)||0)},0)},e.prototype.hasRowSpan=function(t){var r=this;return t.filter(function(n){var a=r.cells[n.index];return a?a.rowSpan>1:!1}).length>0},e.prototype.canEntireRowFit=function(t,r){return this.getMaxCellHeight(r)<=t},e.prototype.getMinimumRowHeight=function(t,r){var n=this;return t.reduce(function(a,i){var l=n.cells[i.index];if(!l)return 0;var o=r.getLineHeight(l.styles.fontSize),c=l.padding("vertical"),d=c+o;return d>a?d:a},0)},e})(),KW=(function(){function e(t,r,n){var a;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=r,this.section=n,this.raw=t;var i=t;t!=null&&typeof t=="object"&&!Array.isArray(t)?(this.rowSpan=t.rowSpan||1,this.colSpan=t.colSpan||1,i=(a=t.content)!==null&&a!==void 0?a:t,t._element&&(this.raw=t._element)):(this.rowSpan=1,this.colSpan=1);var l=i!=null?""+i:"",o=/\r\n|\r|\n/g;this.text=l.split(o)}return e.prototype.getTextPos=function(){var t;if(this.styles.valign==="top")t=this.y+this.padding("top");else if(this.styles.valign==="bottom")t=this.y+this.height-this.padding("bottom");else{var r=this.height-this.padding("vertical");t=this.y+r/2+this.padding("top")}var n;if(this.styles.halign==="right")n=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var a=this.width-this.padding("horizontal");n=this.x+a/2+this.padding("left")}else n=this.x+this.padding("left");return{x:n,y:t}},e.prototype.getContentHeight=function(t,r){r===void 0&&(r=1.15);var n=Array.isArray(this.text)?this.text.length:1,a=this.styles.fontSize/t*r,i=n*a+this.padding("vertical");return Math.max(i,this.styles.minCellHeight)},e.prototype.padding=function(t){var r=$k(this.styles.cellPadding,0);return t==="vertical"?r.top+r.bottom:t==="horizontal"?r.left+r.right:r[t]},e})(),S8e=(function(){function e(t,r,n){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=t,this.raw=r,this.index=n}return e.prototype.getMaxCustomCellWidth=function(t){for(var r=0,n=0,a=t.allRows();n<a.length;n++){var i=a[n],l=i.cells[this.index];l&&typeof l.styles.cellWidth=="number"&&(r=Math.max(r,l.styles.cellWidth))}return r},e})();function j8e(e,t){C8e(e,t);var r=[],n=0;t.columns.forEach(function(i){var l=i.getMaxCustomCellWidth(t);l?i.width=l:(i.width=i.wrappedWidth,r.push(i)),n+=i.width});var a=t.getWidth(e.pageSize().width)-n;a&&(a=e6(r,a,function(i){return Math.max(i.minReadableWidth,i.minWidth)})),a&&(a=e6(r,a,function(i){return i.minWidth})),a=Math.abs(a),!t.settings.horizontalPageBreak&&a>.1/e.scaleFactor()&&(a=a<1?a:Math.round(a),console.warn("Of the table content, ".concat(a," units width could not fit page"))),E8e(t),T8e(t,e),A8e(t)}function C8e(e,t){var r=e.scaleFactor(),n=t.settings.horizontalPageBreak,a=qW(e,t);t.allRows().forEach(function(i){for(var l=0,o=t.columns;l<o.length;l++){var c=o[l],d=i.cells[c.index];if(d){var f=t.hooks.didParseCell;t.callCellHooks(e,f,d,i,c,null);var p=d.padding("horizontal");d.contentWidth=Ew(d.text,d.styles,e)+p;var y=Ew(d.text.join(" ").split(/[^\S\u00A0]+/),d.styles,e);if(d.minReadableWidth=y+d.padding("horizontal"),typeof d.styles.cellWidth=="number")d.minWidth=d.styles.cellWidth,d.wrappedWidth=d.styles.cellWidth;else if(d.styles.cellWidth==="wrap"||n===!0)d.contentWidth>a?(d.minWidth=a,d.wrappedWidth=a):(d.minWidth=d.contentWidth,d.wrappedWidth=d.contentWidth);else{var g=10/r;d.minWidth=d.styles.minCellWidth||g,d.wrappedWidth=d.contentWidth,d.minWidth>d.wrappedWidth&&(d.wrappedWidth=d.minWidth)}}}}),t.allRows().forEach(function(i){for(var l=0,o=t.columns;l<o.length;l++){var c=o[l],d=i.cells[c.index];if(d&&d.colSpan===1)c.wrappedWidth=Math.max(c.wrappedWidth,d.wrappedWidth),c.minWidth=Math.max(c.minWidth,d.minWidth),c.minReadableWidth=Math.max(c.minReadableWidth,d.minReadableWidth);else{var f=t.styles.columnStyles[c.dataKey]||t.styles.columnStyles[c.index]||{},p=f.cellWidth||f.minCellWidth;p&&typeof p=="number"&&(c.minWidth=p,c.wrappedWidth=p)}d&&(d.colSpan>1&&!c.minWidth&&(c.minWidth=d.minWidth),d.colSpan>1&&!c.wrappedWidth&&(c.wrappedWidth=d.minWidth))}})}function e6(e,t,r){for(var n=t,a=e.reduce(function(g,N){return g+N.wrappedWidth},0),i=0;i<e.length;i++){var l=e[i],o=l.wrappedWidth/a,c=n*o,d=l.width+c,f=r(l),p=d<f?f:d;t-=p-l.width,l.width=p}if(t=Math.round(t*1e10)/1e10,t){var y=e.filter(function(g){return t<0?g.width>r(g):!0});y.length&&(t=e6(y,t,r))}return t}function A8e(e){for(var t={},r=1,n=e.allRows(),a=0;a<n.length;a++)for(var i=n[a],l=0,o=e.columns;l<o.length;l++){var c=o[l],d=t[c.index];if(r>1)r--,delete i.cells[c.index];else if(d)d.cell.height+=i.height,r=d.cell.colSpan,delete i.cells[c.index],d.left--,d.left<=1&&delete t[c.index];else{var f=i.cells[c.index];if(!f)continue;if(f.height=i.height,f.rowSpan>1){var p=n.length-a,y=f.rowSpan>p?p:f.rowSpan;t[c.index]={cell:f,left:y,row:i}}}}}function E8e(e){for(var t=e.allRows(),r=0;r<t.length;r++)for(var n=t[r],a=null,i=0,l=0,o=0;o<e.columns.length;o++){var c=e.columns[o];if(l-=1,l>1&&e.columns[o+1])i+=c.width,delete n.cells[c.index];else if(a){var d=a;delete n.cells[c.index],a=null,d.width=c.width+i}else{var d=n.cells[c.index];if(!d)continue;if(l=d.colSpan,i=0,d.colSpan>1){a=d,i+=c.width;continue}d.width=c.width+i}}}function T8e(e,t){for(var r={count:0,height:0},n=0,a=e.allRows();n<a.length;n++){for(var i=a[n],l=0,o=e.columns;l<o.length;l++){var c=o[l],d=i.cells[c.index];if(d){t.applyStyles(d.styles,!0);var f=d.width-d.padding("horizontal");if(d.styles.overflow==="linebreak")d.text=t.splitTextToSize(d.text,f+1/t.scaleFactor(),{fontSize:d.styles.fontSize});else if(d.styles.overflow==="ellipsize")d.text=hL(d.text,f,d.styles,t,"...");else if(d.styles.overflow==="hidden")d.text=hL(d.text,f,d.styles,t,"");else if(typeof d.styles.overflow=="function"){var p=d.styles.overflow(d.text,f);typeof p=="string"?d.text=[p]:d.text=p}d.contentHeight=d.getContentHeight(t.scaleFactor(),t.getLineHeightFactor());var y=d.contentHeight/d.rowSpan;d.rowSpan>1&&r.count*r.height<y*d.rowSpan?r={height:y,count:d.rowSpan}:r&&r.count>0&&r.height>y&&(y=r.height),y>i.height&&(i.height=y)}}r.count--}}function hL(e,t,r,n,a){return e.map(function(i){return O8e(i,t,r,n,a)})}function O8e(e,t,r,n,a){var i=1e4*n.scaleFactor();if(t=Math.ceil(t*i)/i,t>=Ew(e,r,n))return e;for(;t<Ew(e+a,r,n)&&!(e.length<=1);)e=e.substring(0,e.length-1);return e.trim()+a}function GW(e,t){var r=new _1(e),n=P8e(t,r.scaleFactor()),a=new _8e(t,n);return j8e(r,a),r.applyStyles(r.userStyles),a}function P8e(e,t){var r=e.content,n=D8e(r.columns);if(r.head.length===0){var a=fL(n,"head");a&&r.head.push(a)}if(r.foot.length===0){var a=fL(n,"foot");a&&r.foot.push(a)}var i=e.settings.theme,l=e.styles;return{columns:n,head:BN("head",r.head,n,l,i,t),body:BN("body",r.body,n,l,i,t),foot:BN("foot",r.foot,n,l,i,t)}}function BN(e,t,r,n,a,i){var l={},o=t.map(function(c,d){for(var f=0,p={},y=0,g=0,N=0,w=r;N<w.length;N++){var k=w[N];if(l[k.index]==null||l[k.index].left===0)if(g===0){var S=void 0;Array.isArray(c)?S=c[k.index-y-f]:S=c[k.dataKey];var O={};typeof S=="object"&&!Array.isArray(S)&&(O=(S==null?void 0:S.styles)||{});var E=M8e(e,k,d,a,n,i,O),D=new KW(S,E,e);p[k.dataKey]=D,p[k.index]=D,g=D.colSpan-1,l[k.index]={left:D.rowSpan-1,times:g}}else g--,y++;else l[k.index].left--,g=l[k.index].times,f++}return new WW(c,d,e,p)});return o}function fL(e,t){var r={};return e.forEach(function(n){if(n.raw!=null){var a=I8e(t,n.raw);a!=null&&(r[n.dataKey]=a)}}),Object.keys(r).length>0?r:null}function I8e(e,t){if(e==="head"){if(typeof t=="object")return t.header||null;if(typeof t=="string"||typeof t=="number")return t}else if(e==="foot"&&typeof t=="object")return t.footer;return null}function D8e(e){return e.map(function(t,r){var n,a;return typeof t=="object"?a=(n=t.dataKey)!==null&&n!==void 0?n:r:a=r,new S8e(a,t,r)})}function M8e(e,t,r,n,a,i,l){var o=d8e(n),c;e==="head"?c=a.headStyles:e==="body"?c=a.bodyStyles:e==="foot"&&(c=a.footStyles);var d=I0({},o.table,o[e],a.styles,c),f=a.columnStyles[t.dataKey]||a.columnStyles[t.index]||{},p=e==="body"?f:{},y=e==="body"&&r%2===0?I0({},o.alternateRow,a.alternateRowStyles):{},g=c8e(i),N=I0({},g,d,y,p);return I0(N,l)}function L8e(e,t,r){var n;r===void 0&&(r={});var a=qW(e,t),i=new Map,l=[],o=[],c=[];Array.isArray(t.settings.horizontalPageBreakRepeat)?c=t.settings.horizontalPageBreakRepeat:(typeof t.settings.horizontalPageBreakRepeat=="string"||typeof t.settings.horizontalPageBreakRepeat=="number")&&(c=[t.settings.horizontalPageBreakRepeat]),c.forEach(function(y){var g=t.columns.find(function(N){return N.dataKey===y||N.index===y});g&&!i.has(g.index)&&(i.set(g.index,!0),l.push(g.index),o.push(t.columns[g.index]),a-=g.wrappedWidth)});for(var d=!0,f=(n=r==null?void 0:r.start)!==null&&n!==void 0?n:0;f<t.columns.length;){if(i.has(f)){f++;continue}var p=t.columns[f].wrappedWidth;if(d||a>=p)d=!1,l.push(f),o.push(t.columns[f]),a-=p;else break;f++}return{colIndexes:l,columns:o,lastIndex:f-1}}function R8e(e,t){for(var r=[],n=0;n<t.columns.length;n++){var a=L8e(e,t,{start:n});a.columns.length&&(r.push(a),n=a.lastIndex)}return r}function XW(e,t){var r=t.settings,n=r.startY,a=r.margin,i={x:a.left,y:n},l=t.getHeadHeight(t.columns)+t.getFootHeight(t.columns),o=n+a.bottom+l;if(r.pageBreak==="avoid"){var c=t.body,d=c.reduce(function(y,g){return y+g.height},0);o+=d}var f=new _1(e);(r.pageBreak==="always"||r.startY!=null&&o>f.pageSize().height)&&(ZW(f),i.y=a.top),t.callWillDrawPageHooks(f,i);var p=I0({},i);t.startPageNumber=f.pageNumber(),r.horizontalPageBreak?F8e(f,t,p,i):(f.applyStyles(f.userStyles),(r.showHead==="firstPage"||r.showHead==="everyPage")&&t.head.forEach(function(y){return Z0(f,t,y,i,t.columns)}),f.applyStyles(f.userStyles),t.body.forEach(function(y,g){var N=g===t.body.length-1;Tw(f,t,y,N,p,i,t.columns)}),f.applyStyles(f.userStyles),(r.showFoot==="lastPage"||r.showFoot==="everyPage")&&t.foot.forEach(function(y){return Z0(f,t,y,i,t.columns)})),UW(f,t,p,i),t.callEndPageHooks(f,i),t.finalY=i.y,e.lastAutoTable=t,f.applyStyles(f.userStyles)}function F8e(e,t,r,n){var a=R8e(e,t),i=t.settings;if(i.horizontalPageBreakBehaviour==="afterAllRows")a.forEach(function(d,f){e.applyStyles(e.userStyles),f>0?Fg(e,t,r,n,d.columns,!0):mL(e,t,n,d.columns),B8e(e,t,r,n,d.columns),UN(e,t,n,d.columns)});else for(var l=-1,o=a[0],c=function(){var d=l;if(o){e.applyStyles(e.userStyles);var f=o.columns;l>=0?Fg(e,t,r,n,f,!0):mL(e,t,n,f),d=xL(e,t,l+1,n,f),UN(e,t,n,f)}var p=d-l;a.slice(1).forEach(function(y){e.applyStyles(e.userStyles),Fg(e,t,r,n,y.columns,!0),xL(e,t,l+1,n,y.columns,p),UN(e,t,n,y.columns)}),l=d};l<t.body.length-1;)c()}function mL(e,t,r,n){var a=t.settings;e.applyStyles(e.userStyles),(a.showHead==="firstPage"||a.showHead==="everyPage")&&t.head.forEach(function(i){return Z0(e,t,i,r,n)})}function B8e(e,t,r,n,a){e.applyStyles(e.userStyles),t.body.forEach(function(i,l){var o=l===t.body.length-1;Tw(e,t,i,o,r,n,a)})}function xL(e,t,r,n,a,i){e.applyStyles(e.userStyles),i=i??t.body.length;var l=Math.min(r+i,t.body.length),o=-1;return t.body.slice(r,l).forEach(function(c,d){var f=r+d===t.body.length-1,p=YW(e,t,f,n);c.canEntireRowFit(p,a)&&(Z0(e,t,c,n,a),o=r+d)}),o}function UN(e,t,r,n){var a=t.settings;e.applyStyles(e.userStyles),(a.showFoot==="lastPage"||a.showFoot==="everyPage")&&t.foot.forEach(function(i){return Z0(e,t,i,r,n)})}function U8e(e,t,r){var n=r.getLineHeight(e.styles.fontSize),a=e.padding("vertical"),i=Math.floor((t-a)/n);return Math.max(0,i)}function z8e(e,t,r,n){var a={};e.spansMultiplePages=!0,e.height=0;for(var i=0,l=0,o=r.columns;l<o.length;l++){var c=o[l],d=e.cells[c.index];if(d){Array.isArray(d.text)||(d.text=[d.text]);var f=new KW(d.raw,d.styles,d.section);f=I0(f,d),f.text=[];var p=U8e(d,t,n);d.text.length>p&&(f.text=d.text.splice(p,d.text.length));var y=n.scaleFactor(),g=n.getLineHeightFactor();d.contentHeight=d.getContentHeight(y,g),d.contentHeight>=t&&(d.contentHeight=t,f.styles.minCellHeight-=t),d.contentHeight>e.height&&(e.height=d.contentHeight),f.contentHeight=f.getContentHeight(y,g),f.contentHeight>i&&(i=f.contentHeight),a[c.index]=f}}var N=new WW(e.raw,-1,e.section,a,!0);N.height=i;for(var w=0,k=r.columns;w<k.length;w++){var c=k[w],f=N.cells[c.index];f&&(f.height=N.height);var d=e.cells[c.index];d&&(d.height=e.height)}return N}function q8e(e,t,r,n){var a=e.pageSize().height,i=n.settings.margin,l=i.top+i.bottom,o=a-l;t.section==="body"&&(o-=n.getHeadHeight(n.columns)+n.getFootHeight(n.columns));var c=t.getMinimumRowHeight(n.columns,e),d=c<r;if(c>o)return console.error("Will not be able to print row ".concat(t.index," correctly since it's minimum height is larger than page height")),!0;if(!d)return!1;var f=t.hasRowSpan(n.columns),p=t.getMaxCellHeight(n.columns)>o;return p?(f&&console.error("The content of row ".concat(t.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(f||n.settings.rowPageBreak==="avoid")}function Tw(e,t,r,n,a,i,l){var o=YW(e,t,n,i);if(r.canEntireRowFit(o,l))Z0(e,t,r,i,l);else if(q8e(e,r,o,t)){var c=z8e(r,o,t,e);Z0(e,t,r,i,l),Fg(e,t,a,i,l),Tw(e,t,c,n,a,i,l)}else Fg(e,t,a,i,l),Tw(e,t,r,n,a,i,l)}function Z0(e,t,r,n,a){n.x=t.settings.margin.left;for(var i=0,l=a;i<l.length;i++){var o=l[i],c=r.cells[o.index];if(!c){n.x+=o.width;continue}e.applyStyles(c.styles),c.x=n.x,c.y=n.y;var d=t.callCellHooks(e,t.hooks.willDrawCell,c,r,o,n);if(d===!1){n.x+=o.width;continue}H8e(e,c,n);var f=c.getTextPos();RW(c.text,f.x,f.y,{halign:c.styles.halign,valign:c.styles.valign,maxWidth:Math.ceil(c.width-c.padding("left")-c.padding("right"))},e.getDocument()),t.callCellHooks(e,t.hooks.didDrawCell,c,r,o,n),n.x+=o.width}n.y+=r.height}function H8e(e,t,r){var n=t.styles;if(e.getDocument().setFillColor(e.getDocument().getFillColor()),typeof n.lineWidth=="number"){var a=zW(n.lineWidth,n.fillColor);a&&e.rect(t.x,r.y,t.width,t.height,a)}else typeof n.lineWidth=="object"&&(n.fillColor&&e.rect(t.x,r.y,t.width,t.height,"F"),$8e(e,t,r,n.lineWidth))}function $8e(e,t,r,n){var a,i,l,o;n.top&&(a=r.x,i=r.y,l=r.x+t.width,o=r.y,n.right&&(l+=.5*n.right),n.left&&(a-=.5*n.left),c(n.top,a,i,l,o)),n.bottom&&(a=r.x,i=r.y+t.height,l=r.x+t.width,o=r.y+t.height,n.right&&(l+=.5*n.right),n.left&&(a-=.5*n.left),c(n.bottom,a,i,l,o)),n.left&&(a=r.x,i=r.y,l=r.x,o=r.y+t.height,n.top&&(i-=.5*n.top),n.bottom&&(o+=.5*n.bottom),c(n.left,a,i,l,o)),n.right&&(a=r.x+t.width,i=r.y,l=r.x+t.width,o=r.y+t.height,n.top&&(i-=.5*n.top),n.bottom&&(o+=.5*n.bottom),c(n.right,a,i,l,o));function c(d,f,p,y,g){e.getDocument().setLineWidth(d),e.getDocument().line(f,p,y,g,"S")}}function YW(e,t,r,n){var a=t.settings.margin.bottom,i=t.settings.showFoot;return(i==="everyPage"||i==="lastPage"&&r)&&(a+=t.getFootHeight(t.columns)),e.pageSize().height-n.y-a}function Fg(e,t,r,n,a,i){a===void 0&&(a=[]),i===void 0&&(i=!1),e.applyStyles(e.userStyles),t.settings.showFoot==="everyPage"&&!i&&t.foot.forEach(function(o){return Z0(e,t,o,n,a)}),t.callEndPageHooks(e,n);var l=t.settings.margin;UW(e,t,r,n),ZW(e),t.pageNumber++,n.x=l.left,n.y=l.top,r.y=l.top,t.callWillDrawPageHooks(e,n),t.settings.showHead==="everyPage"&&(t.head.forEach(function(o){return Z0(e,t,o,n,a)}),e.applyStyles(e.userStyles))}function ZW(e){var t=e.pageNumber();e.setPage(t+1);var r=e.pageNumber();return r===t?(e.addPage(),!0):!1}function V8e(e){e.API.autoTable=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=t[0],a=VW(this,n),i=GW(this,a);return XW(this,i),this},e.API.lastAutoTable=!1,e.API.autoTableText=function(t,r,n,a){RW(t,r,n,a,this)},e.API.autoTableSetDefaults=function(t){return _1.setDefaults(t,this),this},e.autoTableSetDefaults=function(t,r){_1.setDefaults(t,r)},e.API.autoTableHtmlToJson=function(t,r){var n;if(r===void 0&&(r=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var a=new _1(this),i=$W(a,t,window,r,!1),l=i.head,o=i.body,c=((n=l[0])===null||n===void 0?void 0:n.map(function(d){return d.content}))||[];return{columns:c,rows:o,data:o}}}var zN;function Xm(e,t){var r=VW(e,t),n=GW(e,r);XW(e,n)}try{if(typeof window<"u"&&window){var pL=window,gL=pL.jsPDF||((zN=pL.jspdf)===null||zN===void 0?void 0:zN.jsPDF);gL&&V8e(gL)}}catch(e){console.error("Could not apply autoTable plugin",e)}const Vk=(e,t,r)=>(e.setFontSize(20),e.setFont("helvetica","bold"),e.text(t,14,20),r&&(e.setFontSize(10),e.setFont("helvetica","normal"),e.text(r,14,28)),e.setFontSize(9),e.setTextColor(100),e.text(`Generated: ${new Date().toLocaleString("vi-VN")}`,14,r?35:28),e.setTextColor(0),r?42:35),Wk=e=>{const t=e.internal.getNumberOfPages();e.setFontSize(8),e.setTextColor(100);for(let r=1;r<=t;r++)e.setPage(r),e.text(`Page ${r} of ${t}`,e.internal.pageSize.width/2,e.internal.pageSize.height-10,{align:"center"})},W8e=(e,t)=>{const r=new nn,n=Vk(r,"INVENTORY REPORT",`Total Products: ${e.length}`),a=e.reduce((d,f)=>{const p=f.stock[t]||0,y=f.retailPrice[t]||0;return d+p*y},0),i=e.reduce((d,f)=>d+(f.stock[t]||0),0),l=e.filter(d=>(d.stock[t]||0)>0&&(d.stock[t]||0)<=10).length,o=e.filter(d=>(d.stock[t]||0)===0).length;Xm(r,{startY:n,head:[["Metric","Value"]],body:[["Total Inventory Value",Oe(a)],["Total Products",e.length.toString()],["Total Stock Units",i.toString()],["Low Stock Items",l.toString()],["Out of Stock",o.toString()]],theme:"grid",headStyles:{fillColor:[59,130,246]}});const c=e.map(d=>{const f=d.stock[t]||0,p=d.retailPrice[t]||0,y=f*p;return[d.sku||"N/A",d.name,d.category||"Uncategorized",f.toString(),Oe(p),Oe(y)]});Xm(r,{startY:r.lastAutoTable.finalY+10,head:[["SKU","Name","Category","Stock","Price","Value"]],body:c,theme:"striped",headStyles:{fillColor:[59,130,246]},styles:{fontSize:8},columnStyles:{1:{cellWidth:50},3:{halign:"center"},4:{halign:"right"},5:{halign:"right"}}}),Wk(r),r.save(`Inventory_Report_${new Date().toISOString().slice(0,10)}.pdf`)},K8e=(e,t,r={})=>{var g;const n=new nn;let a=e;(r.start||r.end)&&(a=e.filter(N=>{const w=new Date(N.date);return!(r.start&&w<r.start||r.end&&w>r.end)}));const i=r.start?`Period: ${r.start.toLocaleDateString("vi-VN")} - ${((g=r.end)==null?void 0:g.toLocaleDateString("vi-VN"))||"Now"}`:`Total Orders: ${a.length}`,l=Vk(n,"SALES REPORT",i),o=a.reduce((N,w)=>N+w.total,0),c=a.length,d=a.reduce((N,w)=>N+w.items.reduce((k,S)=>k+S.quantity,0),0),f=c>0?o/c:0;Xm(n,{startY:l,head:[["Metric","Value"]],body:[["Total Revenue",Oe(o)],["Total Orders",c.toString()],["Total Items Sold",d.toString()],["Average Order Value",Oe(f)]],theme:"grid",headStyles:{fillColor:[16,185,129]}});const p=new Map;a.forEach(N=>{N.items.forEach(w=>{const k=p.get(w.partId),S=t.find(E=>E.id===w.partId),O=(S==null?void 0:S.name)||"Unknown Product";k?(k.quantity+=w.quantity,k.revenue+=w.sellingPrice*w.quantity):p.set(w.partId,{quantity:w.quantity,revenue:w.sellingPrice*w.quantity,name:O})})});const y=Array.from(p.entries()).map(([N,w])=>({name:w.name,quantity:w.quantity,revenue:w.revenue})).sort((N,w)=>w.revenue-N.revenue).slice(0,20);Xm(n,{startY:n.lastAutoTable.finalY+10,head:[["Product","Quantity Sold","Revenue"]],body:y.map(N=>[N.name,N.quantity.toString(),Oe(N.revenue)]),theme:"striped",headStyles:{fillColor:[16,185,129]},styles:{fontSize:8},columnStyles:{0:{cellWidth:80},1:{halign:"center"},2:{halign:"right"}}}),Wk(n),n.save(`Sales_Report_${new Date().toISOString().slice(0,10)}.pdf`)},G8e=(e,t,r,n,a,i,l={})=>{var q;const o=new nn;let c=e,d=t;(l.start||l.end)&&(c=e.filter(W=>{const R=new Date(W.date);return!(l.start&&R<l.start||l.end&&R>l.end)}),d=t.filter(W=>{const R=new Date(W.date);return!(l.start&&R<l.start||l.end&&R>l.end)}));const f=l.start?`Period: ${l.start.toLocaleDateString("vi-VN")} - ${((q=l.end)==null?void 0:q.toLocaleDateString("vi-VN"))||"Now"}`:"All Time",p=Vk(o,"FINANCIAL REPORT",f),y=c.reduce((W,R)=>W+R.total,0),g=d.filter(W=>W.type==="Nhp kho").reduce((W,R)=>{var Z;const U=r.find(H=>H.id===R.partId),z=((Z=U==null?void 0:U.wholesalePrice)==null?void 0:Z[n])||0;return W+z*R.quantity},0),N=y-g,w=y>0?N/y*100:0,k=r.reduce((W,R)=>{const U=R.stock[n]||0,z=R.retailPrice[n]||0;return W+U*z},0),S=a.reduce((W,R)=>W+R.amount,0),O=i.reduce((W,R)=>W+R.amount,0);Xm(o,{startY:p,head:[["Metric","Amount"]],body:[["Total Income",Oe(y)],["Total Expenses",Oe(g)],["Net Profit",Oe(N)],["Profit Margin",`${w.toFixed(2)}%`],["Inventory Value",Oe(k)],["Customer Debts",Oe(S)],["Supplier Debts",Oe(O)],["Net Position",Oe(N+k+S-O)]],theme:"grid",headStyles:{fillColor:[139,92,246]},didParseCell:W=>{W.row.index===2&&(W.cell.styles.fillColor=N>=0?[220,252,231]:[254,226,226],W.cell.styles.textColor=N>=0?[22,101,52]:[127,29,29],W.cell.styles.fontStyle="bold")}});const E=o.lastAutoTable.finalY+10;o.setFontSize(10),o.setFont("helvetica","bold"),o.text("Notes:",14,E),o.setFontSize(9),o.setFont("helvetica","normal"),[" Income includes all sales revenue"," Expenses include inventory purchase costs"," Profit margin = (Net Profit / Income)  100%"," Net Position = Profit + Inventory + Customer Debts - Supplier Debts"].forEach((W,R)=>{o.text(W,14,E+7+R*5)}),Wk(o),o.save(`Financial_Report_${new Date().toISOString().slice(0,10)}.pdf`)},X8e=(e,t)=>{const r=new nn,n=e.filter(l=>{const o=l.stock[t]||0;return o>0&&o<=10}),a=e.filter(l=>(l.stock[t]||0)===0),i=Vk(r,"LOW STOCK ALERT",`Low Stock: ${n.length} | Out of Stock: ${a.length}`);if(n.length>0){r.setFontSize(12),r.setFont("helvetica","bold"),r.text("Low Stock Items ( 10 units)",14,i);const l=n.sort((o,c)=>(o.stock[t]||0)-(c.stock[t]||0)).map(o=>{const c=o.stock[t]||0,d=c<=3?"Critical":c<=5?"Warning":"Low";return[o.sku||"N/A",o.name,o.category||"Uncategorized",c.toString(),d]});Xm(r,{startY:i+5,head:[["SKU","Name","Category","Stock","Status"]],body:l,theme:"striped",headStyles:{fillColor:[245,158,11]},styles:{fontSize:8},columnStyles:{1:{cellWidth:60},3:{halign:"center"},4:{halign:"center"}},didParseCell:o=>{if(o.column.index===4&&o.row.section==="body"){const c=o.cell.raw;c==="Critical"?(o.cell.styles.fillColor=[254,226,226],o.cell.styles.textColor=[127,29,29]):c==="Warning"&&(o.cell.styles.fillColor=[254,243,199],o.cell.styles.textColor=[146,64,14])}}})}if(a.length>0){const l=n.length>0?r.lastAutoTable.finalY+15:i;r.setFontSize(12),r.setFont("helvetica","bold"),r.text("Out of Stock Items",14,l);const o=a.map(c=>[c.sku||"N/A",c.name,c.category||"Uncategorized"]);Xm(r,{startY:l+5,head:[["SKU","Name","Category"]],body:o,theme:"striped",headStyles:{fillColor:[239,68,68]},styles:{fontSize:8},columnStyles:{1:{cellWidth:80}}})}n.length===0&&a.length===0&&(r.setFontSize(12),r.text("All products are in stock!",14,i)),Wk(r),r.save(`Low_Stock_Alert_${new Date().toISOString().slice(0,10)}.pdf`)},Y8e=()=>{const[e,t]=T.useState("inventory"),{parts:r,sales:n,inventoryTransactions:a,customerDebts:i,supplierDebts:l,currentBranchId:o}=Ba(),c=()=>{try{switch(e){case"inventory":W8e(r,o),Xe.success(" xut bo co tn kho thnh cng!");break;case"sales":K8e(n,r),Xe.success(" xut bo co bn hng thnh cng!");break;case"financial":G8e(n,a,r,o,i,l),Xe.success(" xut bo co ti chnh thnh cng!");break}}catch(p){console.error("Export error:",p),Xe.error("Li khi xut bo co PDF")}},d=()=>{try{X8e(r,o),Xe.success(" xut bo co cnh bo tn kho!")}catch(p){console.error("Export error:",p),Xe.error("Li khi xut bo co")}},f=[{id:"inventory",label:"Tn kho",icon:s.jsx(Gi,{className:"w-4 h-4"})},{id:"sales",label:"Bn hng",icon:s.jsx(Wg,{className:"w-4 h-4"})},{id:"financial",label:"Ti chnh",icon:s.jsx(nee,{className:"w-4 h-4"})}];return s.jsxs("div",{className:"p-6 max-w-[1600px] mx-auto",children:[s.jsxs("div",{className:"mb-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-slate-100",children:"Bo co & Phn tch"}),s.jsx("p",{className:"text-slate-600 dark:text-slate-400 mt-1",children:"Theo di v phn tch hiu sut kinh doanh"})]}),s.jsxs("div",{className:"flex gap-2",children:[e==="inventory"&&s.jsxs("button",{onClick:d,className:"px-4 py-2 bg-amber-600 hover:bg-amber-700 text-white rounded-lg font-medium transition-colors flex items-center gap-2",children:[s.jsx(bF,{className:"w-4 h-4"})," Cnh bo tn kho"]}),s.jsxs("button",{onClick:c,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors flex items-center gap-2",children:[s.jsx(dd,{className:"w-4 h-4"})," Xut PDF"]})]})]}),s.jsx("div",{className:"flex gap-2 border-b border-slate-200 dark:border-slate-700",children:f.map(p=>s.jsxs("button",{onClick:()=>t(p.id),className:`px-6 py-3 font-medium transition-all relative ${e===p.id?"text-blue-600 dark:text-blue-400":"text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-slate-200"}`,children:[s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx("span",{children:p.icon}),s.jsx("span",{children:p.label})]}),e===p.id&&s.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-blue-600 dark:bg-blue-400"})]},p.id))})]}),s.jsxs("div",{className:"animate-fadeIn",children:[e==="inventory"&&s.jsx(bCe,{}),e==="sales"&&s.jsx(vCe,{}),e==="financial"&&s.jsx(yCe,{})]})]})},Z8e=e=>Ts({queryKey:["auditLogs",e],queryFn:async()=>{const t=await BJ(e);if(!t.ok)throw t.error;return t}}),bL={"auth.login":"ng nhp","auth.logout":"ng xut","sale.create":"To ha n","sale.delete":"Xa ha n","part.update_price":"Cp nht gi ph tng","inventory.receipt":"Nhp kho","settings.update":"Cp nht ci t","debt.customer_pay":"Thu n khch hng","debt.supplier_pay":"Tr n nh cung cp","cash.manual":"Giao dch qu th cng"},Q8e=()=>{var S;const{profile:e}=Dc(),[t,r]=T.useState(""),[n,a]=T.useState(50),[i,l]=T.useState(""),[o,c]=T.useState(""),[d,f]=T.useState(1),{data:p,isLoading:y,refetch:g}=Z8e({action:t||void 0,page:d,pageSize:n,includeUser:!0,startDate:i?new Date(i).toISOString():void 0,endDate:o?new Date(o+"T23:59:59").toISOString():void 0}),N=(p==null?void 0:p.data)||[],w=((S=p==null?void 0:p.meta)==null?void 0:S.total)||0,k=Math.max(1,Math.ceil(w/n));return!e||e.role!=="owner"?s.jsxs("div",{className:"flex items-center justify-center h-96 text-slate-500 dark:text-slate-400",children:[s.jsx(Cee,{className:"w-5 h-5 mr-2"})," Ch ch ca hng c xem nht k h thng."]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Nht k h thng"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("select",{value:t,onChange:O=>r(O.target.value),className:"px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-sm",children:[s.jsx("option",{value:"",children:"Tt c hnh ng"}),Object.entries(bL).map(([O,E])=>s.jsx("option",{value:O,children:E},O))]}),s.jsx("input",{type:"date",value:i,onChange:O=>l(O.target.value),className:"px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-sm"}),s.jsx("input",{type:"date",value:o,onChange:O=>c(O.target.value),className:"px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-sm"}),s.jsx("select",{value:n,onChange:O=>a(parseInt(O.target.value)),className:"px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-sm",children:[25,50,100].map(O=>s.jsxs("option",{value:O,children:[O," dng"]},O))}),s.jsxs("button",{onClick:()=>g(),className:"px-3 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg flex items-center gap-2 text-sm",children:[s.jsx(_ee,{className:"w-4 h-4"})," Ti li"]}),s.jsx("button",{onClick:()=>J8e(N),className:"px-3 py-2 bg-emerald-600 hover:bg-emerald-700 text-white rounded-lg flex items-center gap-2 text-sm",children:"JSON"}),s.jsx("button",{onClick:()=>eTe(N),className:"px-3 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg flex items-center gap-2 text-sm",children:"CSV"})]})]}),s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 shadow divide-y divide-slate-200 dark:divide-slate-700",children:[s.jsxs("div",{className:"p-4 flex items-center justify-between",children:[s.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:y?"ang ti...":`Hin th ${N.length} dng  Trang ${d}/${k}  Tng ${w}`}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>f(O=>Math.max(1,O-1)),disabled:d<=1,className:"px-3 py-1.5 bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-200 rounded disabled:opacity-50",children:"Trang trc"}),s.jsx("button",{onClick:()=>f(O=>Math.min(k,O+1)),disabled:d>=k,className:"px-3 py-1.5 bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-200 rounded disabled:opacity-50",children:"Trang sau"})]})]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"bg-slate-50 dark:bg-slate-700/50 text-slate-600 dark:text-slate-300",children:[s.jsx("th",{className:"text-left px-4 py-2 font-medium",children:"Thi gian"}),s.jsx("th",{className:"text-left px-4 py-2 font-medium",children:"Hnh ng"}),s.jsx("th",{className:"text-left px-4 py-2 font-medium",children:"Bng"}),s.jsx("th",{className:"text-left px-4 py-2 font-medium",children:"ID bn ghi"}),s.jsx("th",{className:"text-left px-4 py-2 font-medium",children:"D liu"}),s.jsx("th",{className:"text-left px-4 py-2 font-medium",children:"User"})]})}),s.jsxs("tbody",{children:[y&&s.jsx("tr",{children:s.jsx("td",{colSpan:6,className:"px-4 py-6 text-center",children:s.jsx(pee,{className:"w-6 h-6 animate-spin mx-auto text-slate-400"})})}),!y&&N.length===0&&s.jsx("tr",{children:s.jsx("td",{colSpan:6,className:"px-4 py-6 text-center text-slate-500",children:"Khng c d liu"})}),!y&&N.map(O=>{var D;const E=bL[O.action]||O.action;return s.jsxs("tr",{className:"border-t border-slate-100 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-700/40",children:[s.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-slate-700 dark:text-slate-300",children:new Date(O.created_at).toLocaleString("vi-VN")}),s.jsx("td",{className:"px-4 py-2 text-slate-700 dark:text-slate-300",children:E}),s.jsx("td",{className:"px-4 py-2 text-slate-600 dark:text-slate-400",children:O.table_name||"-"}),s.jsx("td",{className:"px-4 py-2 text-slate-600 dark:text-slate-400",children:O.record_id||"-"}),s.jsx("td",{className:"px-4 py-2 max-w-[280px]",children:s.jsx("pre",{className:"text-xs whitespace-pre-wrap break-all bg-slate-50 dark:bg-slate-900/40 p-2 rounded border border-slate-200 dark:border-slate-700 max-h-32 overflow-y-auto",children:O.new_data||O.old_data?JSON.stringify({old:O.old_data?vL(O.old_data):void 0,new:O.new_data?vL(O.new_data):void 0},null,2):"-"})}),s.jsx("td",{className:"px-4 py-2 text-slate-600 dark:text-slate-400",children:O.user_email||O.user_name?`${O.user_name||""} ${O.user_email?"<"+O.user_email+">":""}`.trim():((D=O.user_id)==null?void 0:D.slice(0,8))||"-"})]},O.id)})]})]})})]})]})};function vL(e){try{return typeof e=="string"?JSON.parse(e):e}catch{return e}}function J8e(e){try{const t=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),r=URL.createObjectURL(t),n=document.createElement("a");n.href=r,n.download=`audit-logs-${new Date().toISOString()}.json`,n.click(),URL.revokeObjectURL(r)}catch{}}function eTe(e){try{const r=[["created_at","action","table_name","record_id","user_id","old_data","new_data"].join(",")];for(const l of e){const o=[l.created_at,l.action,l.table_name??"",l.record_id??"",l.user_id??"",JSON.stringify(l.old_data??""),JSON.stringify(l.new_data??"")].map(c=>`"${String(c).replace(/"/g,'""')}"`).join(",");r.push(o)}const n=new Blob([r.join(`
`)],{type:"text/csv;charset=utf-8;"}),a=URL.createObjectURL(n),i=document.createElement("a");i.href=a,i.download=`audit-logs-${new Date().toISOString()}.csv`,i.click(),URL.revokeObjectURL(a)}catch{}}const tTe=()=>{const{profile:e,hasRole:t}=Dc(),[r,n]=T.useState(null),[a,i]=T.useState(!0),[l,o]=T.useState(!1),[c,d]=T.useState(!1),[f,p]=T.useState(!1),[y,g]=T.useState("general");T.useEffect(()=>{N()},[]);const N=async()=>{try{const{data:D,error:q}=await Ot.from("store_settings").select("*").order("created_at",{ascending:!1}).limit(1).single();if(q)throw q;n(D)}catch(D){console.error("Error loading settings:",D),Xe.error("Khng th ti ci t")}finally{i(!1)}},w=async()=>{if(r){o(!0);try{const D={...r};console.log("Saving settings:",r);const{error:q,data:W}=await Ot.from("store_settings").update(r).eq("id",r.id).select();if(q)throw console.error("Update error:",q),q;console.log("Update result:",W),await N(),Xe.success(" lu ci t thnh cng!"),Bs((e==null?void 0:e.id)||null,{action:"settings.update",tableName:"store_settings",recordId:r.id,oldData:D,newData:r})}catch(D){console.error("Error saving settings:",D),Xe.error(D.message||"Khng th lu ci t")}finally{o(!1)}}},k=(D,q)=>{r&&n({...r,[D]:q})},S=async D=>{var W;const q=(W=D.target.files)==null?void 0:W[0];if(q){if(!q.type.startsWith("image/")){Xe.error("Vui lng chn file nh");return}if(q.size>2*1024*1024){Xe.error("Kch thc nh khng c vt qu 2MB");return}d(!0);try{const R=q.name.split(".").pop(),z=`store-assets/${`logo-${Date.now()}.${R}`}`,{error:Z}=await Ot.storage.from("public-assets").upload(z,q);if(Z)throw Z;const{data:H}=Ot.storage.from("public-assets").getPublicUrl(z);k("logo_url",H.publicUrl),Xe.success(" ti logo ln thnh cng!")}catch(R){console.error("Error uploading logo:",R),Xe.error(R.message||"Khng th ti logo ln")}finally{d(!1)}}},O=async D=>{var W;const q=(W=D.target.files)==null?void 0:W[0];if(q){if(!q.type.startsWith("image/")){Xe.error("Vui lng chn file nh");return}if(q.size>2*1024*1024){Xe.error("Kch thc nh khng c vt qu 2MB");return}p(!0);try{const R=q.name.split(".").pop(),z=`store-assets/${`bank-qr-${Date.now()}.${R}`}`,{error:Z}=await Ot.storage.from("public-assets").upload(z,q);if(Z)throw Z;const{data:H}=Ot.storage.from("public-assets").getPublicUrl(z);k("bank_qr_url",H.publicUrl),Xe.success(" ti m QR ngn hng ln thnh cng!")}catch(R){console.error("Error uploading QR:",R),Xe.error(R.message||"Khng th ti m QR ln")}finally{p(!1)}}};if(!t(["owner","manager"]))return s.jsx("div",{className:"flex items-center justify-center h-96",children:s.jsxs("div",{className:"text-center flex items-center gap-2 text-slate-600 dark:text-slate-400",children:[s.jsx(gee,{className:"w-5 h-5","aria-hidden":"true"}),s.jsx("p",{className:"text-lg",children:"Ch ch ca hng v qun l mi c quyn truy cp ci t"})]})});if(a||!r)return s.jsx("div",{className:"flex items-center justify-center h-96",children:s.jsx(vF,{size:"lg"})});const E=t(["owner"]);return s.jsxs("div",{className:"space-y-4 md:space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-xl md:text-2xl font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[s.jsx(Gg,{className:"w-6 h-6 md:w-7 md:h-7 text-blue-600","aria-hidden":"true"}),s.jsx("span",{children:"Ci t h thng"})]}),s.jsx("p",{className:"text-xs md:text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Qun l thng tin ca hng v cu hnh h thng"})]}),E&&s.jsx("button",{onClick:w,disabled:l,className:"w-full sm:w-auto px-4 py-2 md:px-6 md:py-2.5 bg-blue-600 hover:bg-blue-700 disabled:bg-slate-400 text-white rounded-lg text-sm md:text-base font-semibold transition-colors inline-flex items-center justify-center gap-2","aria-label":"Lu thay i",children:l?s.jsx("span",{children:"ang lu..."}):s.jsxs(s.Fragment,{children:[s.jsx(C_,{className:"w-4 h-4 md:w-5 md:h-5","aria-hidden":"true"}),s.jsx("span",{children:"Lu thay i"})]})})]}),!E&&s.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-3 md:p-4 flex items-start gap-2",children:[s.jsx(t7,{className:"w-4 h-4 md:w-5 md:h-5 text-yellow-700 dark:text-yellow-300 mt-0.5 flex-shrink-0","aria-hidden":"true"}),s.jsx("p",{className:"text-xs md:text-sm text-yellow-800 dark:text-yellow-200",children:"Bn ch c quyn xem. Ch ch ca hng mi c th chnh sa ci t."})]}),s.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700 -mx-4 px-4 md:mx-0 md:px-0",children:s.jsx("div",{className:"flex gap-2 md:gap-4 overflow-x-auto pb-px",children:[{id:"general",label:"Thng tin chung",shortLabel:"Thng tin",icon:s.jsx(Aee,{className:"w-3.5 h-3.5 md:w-4 md:h-4","aria-hidden":"true"})},{id:"branding",label:"Thng hiu",shortLabel:"Thng hiu",icon:s.jsx(xF,{className:"w-3.5 h-3.5 md:w-4 md:h-4","aria-hidden":"true"})},{id:"banking",label:"Ngn hng",shortLabel:"Ngn hng",icon:s.jsx(Kg,{className:"w-3.5 h-3.5 md:w-4 md:h-4","aria-hidden":"true"})},{id:"invoice",label:"Ha n",shortLabel:"Ha n",icon:s.jsx(dd,{className:"w-3.5 h-3.5 md:w-4 md:h-4","aria-hidden":"true"})}].map(D=>s.jsxs("button",{onClick:()=>g(D.id),className:`px-2.5 py-2 md:px-4 md:py-3 text-xs md:text-sm font-medium border-b-2 transition-colors inline-flex items-center gap-1.5 md:gap-2 whitespace-nowrap ${y===D.id?"border-blue-600 text-blue-600 dark:text-blue-400":"border-transparent text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-slate-200"}`,children:[D.icon,s.jsx("span",{className:"hidden sm:inline",children:D.label}),s.jsx("span",{className:"inline sm:hidden",children:D.shortLabel})]},D.id))})}),s.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-lg border border-slate-200 dark:border-slate-700 p-4 md:p-6",children:[y==="general"&&s.jsxs("div",{className:"space-y-4 md:space-y-6",children:[s.jsx("h2",{className:"text-base md:text-lg font-semibold text-slate-900 dark:text-white mb-3 md:mb-4",children:"Thng tin ca hng"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs md:text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5 md:mb-2",children:"Tn ca hng *"}),s.jsx("input",{type:"text",value:r.store_name||"",onChange:D=>k("store_name",D.target.value),disabled:!E,className:"w-full px-3 py-2 md:px-4 md:py-2.5 text-sm md:text-base border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white disabled:opacity-50"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs md:text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5 md:mb-2",children:"Tn ting Anh"}),s.jsx("input",{type:"text",value:r.store_name_en||"",onChange:D=>k("store_name_en",D.target.value),disabled:!E,className:"w-full px-3 py-2 md:px-4 md:py-2.5 text-sm md:text-base border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white disabled:opacity-50"})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-xs md:text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5 md:mb-2",children:"Slogan"}),s.jsx("input",{type:"text",value:r.slogan||"",onChange:D=>k("slogan",D.target.value),disabled:!E,placeholder:"Chm sc xe my chuyn nghip",className:"w-full px-3 py-2 md:px-4 md:py-2.5 text-sm md:text-base border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white disabled:opacity-50"})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-xs md:text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5 md:mb-2",children:"a ch"}),s.jsx("input",{type:"text",value:r.address||"",onChange:D=>k("address",D.target.value),disabled:!E,className:"w-full px-3 py-2 md:px-4 md:py-2.5 text-sm md:text-base border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white disabled:opacity-50"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs md:text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5 md:mb-2",children:"S in thoi"}),s.jsx("input",{type:"tel",value:r.phone||"",onChange:D=>k("phone",D.target.value),disabled:!E,className:"w-full px-3 py-2 md:px-4 md:py-2.5 text-sm md:text-base border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white disabled:opacity-50"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs md:text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5 md:mb-2",children:"Email"}),s.jsx("input",{type:"email",value:r.email||"",onChange:D=>k("email",D.target.value),disabled:!E,className:"w-full px-3 py-2 md:px-4 md:py-2.5 text-sm md:text-base border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white disabled:opacity-50"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs md:text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5 md:mb-2",children:"Website"}),s.jsx("input",{type:"url",value:r.website||"",onChange:D=>k("website",D.target.value),disabled:!E,placeholder:"https://...",className:"w-full px-3 py-2 md:px-4 md:py-2.5 text-sm md:text-base border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white disabled:opacity-50"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs md:text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5 md:mb-2",children:"M s thu"}),s.jsx("input",{type:"text",value:r.tax_code||"",onChange:D=>k("tax_code",D.target.value),disabled:!E,className:"w-full px-3 py-2 md:px-4 md:py-2.5 text-sm md:text-base border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white disabled:opacity-50"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs md:text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5 md:mb-2",children:"Gi m ca"}),s.jsx("input",{type:"text",value:r.business_hours||"",onChange:D=>k("business_hours",D.target.value),disabled:!E,placeholder:"8:00 - 18:00 (T2-T7)",className:"w-full px-3 py-2 md:px-4 md:py-2.5 text-sm md:text-base border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white disabled:opacity-50"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs md:text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5 md:mb-2",children:"Nm thnh lp"}),s.jsx("input",{type:"number",value:r.established_year||"",onChange:D=>k("established_year",Number(D.target.value)),disabled:!E,placeholder:"2020",className:"w-full px-3 py-2 md:px-4 md:py-2.5 text-sm md:text-base border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white disabled:opacity-50"})]})]})]}),y==="branding"&&s.jsxs("div",{className:"space-y-4 md:space-y-6",children:[s.jsx("h2",{className:"text-base md:text-lg font-semibold text-slate-900 dark:text-white mb-3 md:mb-4",children:"Thng hiu & Hnh nh"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs md:text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5 md:mb-2",children:"Logo ca hng"}),s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("label",{className:`flex items-center justify-center gap-2 px-4 py-3 border-2 border-dashed border-slate-300 dark:border-slate-600 rounded-lg hover:border-blue-500 dark:hover:border-blue-400 transition-colors ${E?"cursor-pointer":"opacity-50 cursor-not-allowed"}`,children:[s.jsx(Tee,{className:"w-4 h-4 md:w-5 md:h-5 text-slate-500"}),s.jsx("span",{className:"text-xs md:text-sm text-slate-600 dark:text-slate-400",children:c?"ang ti ln...":"Chn nh logo"}),s.jsx("input",{type:"file",accept:"image/*",onChange:S,disabled:!E||c,className:"hidden"})]}),s.jsx("p",{className:"text-[10px] md:text-xs text-slate-500 dark:text-slate-400 mt-1",children:"Kch thc ti a: 2MB. nh dng: JPG, PNG, SVG"})]}),r.logo_url&&s.jsx("div",{className:"w-24 h-24 md:w-32 md:h-32 border-2 border-slate-300 dark:border-slate-600 rounded-lg overflow-hidden bg-white dark:bg-slate-700 flex items-center justify-center",children:s.jsx("img",{src:r.logo_url,alt:"Store Logo",className:"max-w-full max-h-full object-contain"})})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs md:text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5 md:mb-2",children:"Hoc nhp URL Logo"}),s.jsx("input",{type:"url",value:r.logo_url||"",onChange:D=>k("logo_url",D.target.value),disabled:!E,placeholder:"https://...",className:"w-full px-3 py-2 md:px-4 md:py-2.5 text-sm md:text-base border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white disabled:opacity-50"})]})]}),s.jsxs("div",{className:"space-y-4 pt-4 md:pt-6 border-t border-slate-200 dark:border-slate-700",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs md:text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5 md:mb-2",children:"M QR ngn hng"}),s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("label",{className:`flex items-center justify-center gap-2 px-4 py-3 border-2 border-dashed border-slate-300 dark:border-slate-600 rounded-lg hover:border-blue-500 dark:hover:border-blue-400 transition-colors ${E?"cursor-pointer":"opacity-50 cursor-not-allowed"}`,children:[s.jsx(fee,{className:"w-4 h-4 md:w-5 md:h-5 text-slate-500"}),s.jsx("span",{className:"text-xs md:text-sm text-slate-600 dark:text-slate-400",children:f?"ang ti ln...":"Chn nh QR Code"}),s.jsx("input",{type:"file",accept:"image/*",onChange:O,disabled:!E||f,className:"hidden"})]}),s.jsx("p",{className:"text-[10px] md:text-xs text-slate-500 dark:text-slate-400 mt-1",children:"Kch thc ti a: 2MB. nh dng: JPG, PNG"})]}),r.bank_qr_url&&s.jsx("div",{className:"w-24 h-24 md:w-32 md:h-32 border-2 border-slate-300 dark:border-slate-600 rounded-lg overflow-hidden bg-white dark:bg-slate-700 flex items-center justify-center",children:s.jsx("img",{src:r.bank_qr_url,alt:"Bank QR Code",className:"max-w-full max-h-full object-contain"})})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs md:text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5 md:mb-2",children:"Hoc nhp URL m QR"}),s.jsx("input",{type:"url",value:r.bank_qr_url||"",onChange:D=>k("bank_qr_url",D.target.value),disabled:!E,placeholder:"https://...",className:"w-full px-3 py-2 md:px-4 md:py-2.5 text-sm md:text-base border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white disabled:opacity-50"})]})]}),s.jsx("div",{className:"pt-4 md:pt-6 border-t border-slate-200 dark:border-slate-700",children:s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs md:text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5 md:mb-2",children:"Mu ch o"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"color",value:r.primary_color||"#3B82F6",onChange:D=>k("primary_color",D.target.value),disabled:!E,className:"w-12 h-10 md:w-16 md:h-12 rounded border border-slate-300 dark:border-slate-600 cursor-pointer disabled:opacity-50"}),s.jsx("input",{type:"text",value:r.primary_color||"#3B82F6",onChange:D=>k("primary_color",D.target.value),disabled:!E,placeholder:"#3B82F6",className:"flex-1 px-3 py-2 md:px-4 md:py-2.5 text-sm md:text-base border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white disabled:opacity-50"})]}),s.jsx("p",{className:"text-[10px] md:text-xs text-slate-500 dark:text-slate-400 mt-1",children:"Mu ny s c s dng trong giao din h thng"})]})})]}),y==="banking"&&s.jsxs("div",{className:"space-y-4 md:space-y-6",children:[s.jsx("h2",{className:"text-base md:text-lg font-semibold text-slate-900 dark:text-white mb-3 md:mb-4",children:"Thng tin ngn hng"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-xs md:text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5 md:mb-2",children:"Tn ngn hng *"}),s.jsx("input",{type:"text",value:r.bank_name||"",onChange:D=>k("bank_name",D.target.value),disabled:!E,placeholder:"VD: Vietcombank, Techcombank, MB Bank...",className:"w-full px-3 py-2 md:px-4 md:py-2.5 text-sm md:text-base border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white disabled:opacity-50"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs md:text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5 md:mb-2",children:"S ti khon *"}),s.jsx("input",{type:"text",value:r.bank_account_number||"",onChange:D=>k("bank_account_number",D.target.value),disabled:!E,className:"w-full px-3 py-2 md:px-4 md:py-2.5 text-sm md:text-base border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white disabled:opacity-50"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs md:text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5 md:mb-2",children:"Ch ti khon *"}),s.jsx("input",{type:"text",value:r.bank_account_holder||"",onChange:D=>k("bank_account_holder",D.target.value),disabled:!E,placeholder:"VD: NGUYEN VAN A",className:"w-full px-3 py-2 md:px-4 md:py-2.5 text-sm md:text-base border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white disabled:opacity-50"})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-xs md:text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5 md:mb-2",children:"Chi nhnh"}),s.jsx("input",{type:"text",value:r.bank_branch||"",onChange:D=>k("bank_branch",D.target.value),disabled:!E,placeholder:"VD: Chi nhnh Qun 1, TP.HCM",className:"w-full px-3 py-2 md:px-4 md:py-2.5 text-sm md:text-base border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white disabled:opacity-50"})]})]}),s.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-3 md:p-4",children:s.jsxs("div",{className:"flex gap-2 md:gap-3",children:[s.jsx(t7,{className:"w-4 h-4 md:w-5 md:h-5 text-blue-600 dark:text-blue-400 flex-shrink-0 mt-0.5"}),s.jsxs("div",{className:"text-xs md:text-sm text-blue-800 dark:text-blue-300",children:[s.jsx("p",{className:"font-medium mb-1",children:"Thng tin ngn hng"}),s.jsx("p",{children:"Thng tin ny s c hin th trn cc ha n, bin nhn v phiu dch v. Khch hng c th qut m QR hoc chuyn khon theo thng tin ny."})]})]})})]}),y==="invoice"&&s.jsxs("div",{className:"space-y-4 md:space-y-6",children:[s.jsx("h2",{className:"text-base md:text-lg font-semibold text-slate-900 dark:text-white mb-3 md:mb-4",children:"Cu hnh ha n"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 md:gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs md:text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5 md:mb-2",children:"M ha n bn"}),s.jsx("input",{type:"text",value:r.invoice_prefix||"HD",onChange:D=>k("invoice_prefix",D.target.value),disabled:!E,placeholder:"HD",className:"w-full px-3 py-2 md:px-4 md:py-2.5 text-sm md:text-base border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white disabled:opacity-50"}),s.jsx("p",{className:"text-[10px] md:text-xs text-slate-500 dark:text-slate-400 mt-1",children:"VD: HD-001, HD-002"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs md:text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5 md:mb-2",children:"M phiu nhp"}),s.jsx("input",{type:"text",value:r.receipt_prefix||"PN",onChange:D=>k("receipt_prefix",D.target.value),disabled:!E,placeholder:"PN",className:"w-full px-3 py-2 md:px-4 md:py-2.5 text-sm md:text-base border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white disabled:opacity-50"}),s.jsx("p",{className:"text-[10px] md:text-xs text-slate-500 dark:text-slate-400 mt-1",children:"VD: PN-001, PN-002"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs md:text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5 md:mb-2",children:"M phiu sa cha"}),s.jsx("input",{type:"text",value:r.work_order_prefix||"SC",onChange:D=>k("work_order_prefix",D.target.value),disabled:!E,placeholder:"SC",className:"w-full px-3 py-2 md:px-4 md:py-2.5 text-sm md:text-base border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white disabled:opacity-50"}),s.jsx("p",{className:"text-[10px] md:text-xs text-slate-500 dark:text-slate-400 mt-1",children:"VD: SC-001, SC-002"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs md:text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5 md:mb-2",children:"Ghi ch cui ha n"}),s.jsx("textarea",{rows:3,value:r.invoice_footer_note||"",onChange:D=>k("invoice_footer_note",D.target.value),disabled:!E,placeholder:"Cm n qu khch  tin tng v s dng dch v!",className:"w-full px-3 py-2 md:px-4 md:py-2.5 text-sm md:text-base border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white disabled:opacity-50"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 md:gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs md:text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5 md:mb-2",children:"nh dng ngy"}),s.jsxs("select",{value:r.date_format||"DD/MM/YYYY",onChange:D=>k("date_format",D.target.value),disabled:!E,className:"w-full px-3 py-2 md:px-4 md:py-2.5 text-sm md:text-base border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white disabled:opacity-50",children:[s.jsx("option",{value:"DD/MM/YYYY",children:"DD/MM/YYYY"}),s.jsx("option",{value:"MM/DD/YYYY",children:"MM/DD/YYYY"}),s.jsx("option",{value:"YYYY-MM-DD",children:"YYYY-MM-DD"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs md:text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5 md:mb-2",children:"n v tin t"}),s.jsxs("select",{value:r.currency||"VND",onChange:D=>k("currency",D.target.value),disabled:!E,className:"w-full px-3 py-2 md:px-4 md:py-2.5 text-sm md:text-base border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white disabled:opacity-50",children:[s.jsx("option",{value:"VND",children:"VND - Vit Nam ng"}),s.jsx("option",{value:"USD",children:"USD - US Dollar"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs md:text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5 md:mb-2",children:"Mi gi"}),s.jsxs("select",{value:r.timezone||"Asia/Ho_Chi_Minh",onChange:D=>k("timezone",D.target.value),disabled:!E,className:"w-full px-3 py-2 md:px-4 md:py-2.5 text-sm md:text-base border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white disabled:opacity-50",children:[s.jsx("option",{value:"Asia/Ho_Chi_Minh",children:"H Ch Minh (GMT+7)"}),s.jsx("option",{value:"Asia/Bangkok",children:"Bangkok (GMT+7)"}),s.jsx("option",{value:"Asia/Singapore",children:"Singapore (GMT+8)"})]})]})]})]})]}),E&&s.jsx("div",{className:"flex justify-end",children:s.jsx("button",{onClick:w,disabled:l,className:"w-full sm:w-auto px-4 py-2 md:px-6 md:py-2.5 bg-blue-600 hover:bg-blue-700 disabled:bg-slate-400 text-white rounded-lg text-sm md:text-base font-semibold transition-colors inline-flex items-center justify-center gap-2","aria-label":"Lu tt c thay i",children:l?s.jsx("span",{children:"ang lu..."}):s.jsxs(s.Fragment,{children:[s.jsx(C_,{className:"w-4 h-4 md:w-5 md:h-5","aria-hidden":"true"}),s.jsx("span",{children:"Lu tt c thay i"})]})})})]})},rTe=()=>s.jsx(abe,{}),nTe=()=>s.jsx(nje,{}),aTe=()=>s.jsx(mje,{}),sTe=()=>s.jsx(gje,{currentBranchId:Ba().currentBranchId}),iTe=()=>s.jsx(yje,{}),lTe=()=>s.jsx(_je,{}),oTe=()=>s.jsx(HV,{}),cTe=()=>s.jsx($V,{}),dTe=()=>s.jsx(rCe,{}),uTe=()=>s.jsx(VV,{}),hTe=()=>s.jsx(pCe,{}),fTe=()=>s.jsx(gCe,{}),mTe=()=>s.jsx(DV,{}),xTe=()=>s.jsx(MV,{}),pTe=()=>s.jsx(Y8e,{}),gTe=()=>s.jsx(tTe,{});function bTe(){var N,w,k,S,O,E,D,q,W,R,U,z,Z;const[e,t]=T.useState(!1),[r,n]=T.useState(!1),{theme:a,toggleTheme:i}=HJ(),{profile:l,user:o,signOut:c}=Dc(),d=l==null?void 0:l.role,f=((N=l==null?void 0:l.full_name)==null?void 0:N.trim())||((k=(w=o==null?void 0:o.user_metadata)==null?void 0:w.full_name)==null?void 0:k.trim())||((O=(S=o==null?void 0:o.user_metadata)==null?void 0:S.name)==null?void 0:O.trim())||((D=(E=o==null?void 0:o.user_metadata)==null?void 0:E.display_name)==null?void 0:D.trim()),p=f&&f.length>0?f:(l==null?void 0:l.email)||(o==null?void 0:o.email)||"Ti khon",y=((q=f==null?void 0:f.charAt(0))==null?void 0:q.toUpperCase())||((R=(W=l==null?void 0:l.email)==null?void 0:W.charAt(0))==null?void 0:R.toUpperCase())||((z=(U=o==null?void 0:o.email)==null?void 0:U.charAt(0))==null?void 0:z.toUpperCase())||"N",g={viewFinance:d==="owner"||d==="manager",viewAnalytics:d==="owner"||d==="manager",viewDebt:d==="owner"||d==="manager",viewEmployees:d==="owner"||d==="manager",viewSettings:d==="owner"||d==="manager"};return s.jsx("nav",{className:"bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 sticky top-0 z-50",children:s.jsxs("div",{className:"max-w-[1600px] mx-auto px-2 md:px-6 py-2 md:py-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2 md:gap-4",children:[s.jsx("button",{onClick:()=>n(!r),className:"md:hidden p-2 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg transition","aria-label":"Menu",children:s.jsx(yee,{className:"w-6 h-6 text-slate-600 dark:text-slate-300"})}),s.jsxs("div",{className:"relative",children:[s.jsxs("button",{onClick:()=>t(!e),className:"group flex items-center gap-3 focus:outline-none","aria-label":"M ci t v ti khon",children:[s.jsx("img",{src:"/logo-smartcare.png",alt:"SmartCare Logo",className:"w-9 h-9 md:w-14 md:h-14 rounded-xl shadow-sm ring-1 ring-slate-200 dark:ring-slate-700 group-hover:shadow-md group-hover:ring-emerald-400/60 dark:group-hover:ring-emerald-500/60 transition"}),s.jsx("span",{className:"font-bold text-lg md:text-xl tracking-tight bg-gradient-to-r from-emerald-600 to-blue-600 text-transparent bg-clip-text dark:from-emerald-400 dark:to-blue-400 hidden lg:inline",children:"Nhn Lm SmartCare"})]}),e&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>t(!1)}),s.jsxs("div",{className:"absolute top-full left-0 mt-2 w-80 bg-white dark:bg-slate-800 rounded-xl shadow-xl border border-slate-200 dark:border-slate-700 py-2 z-50",children:[s.jsxs("div",{className:"px-5 py-4 border-b border-slate-200 dark:border-slate-700 flex items-center justify-between",children:[s.jsx("p",{className:"text-sm font-semibold text-slate-700 dark:text-slate-200",children:"Ci t & ti khon"}),s.jsx("button",{onClick:()=>t(!1),className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-300 transition","aria-label":"ng",children:s.jsx(Ou,{className:"w-4 h-4"})})]}),l&&s.jsxs("div",{className:"px-5 py-4 border-b border-slate-200 dark:border-slate-700 flex items-center gap-3",children:[s.jsx("div",{className:"w-9 h-9 bg-blue-600 rounded-full flex items-center justify-center text-white font-semibold",children:y}),s.jsxs("div",{className:"min-w-0",children:[s.jsx("div",{className:"text-sm font-medium text-slate-900 dark:text-white truncate",children:p}),s.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400 truncate flex items-center gap-1",children:[l.role==="owner"&&s.jsx(ZT,{className:"w-3.5 h-3.5 text-yellow-500"}),l.role==="manager"&&s.jsx(u7,{className:"w-3.5 h-3.5 text-indigo-500"}),l.role==="staff"&&s.jsx(h7,{className:"w-3.5 h-3.5 text-slate-500"}),s.jsx("span",{children:l.role==="owner"?"Ch ca hng":l.role==="manager"?"Qun l":"Nhn vin"})]})]})]}),s.jsxs("button",{onClick:()=>{i(),t(!1)},className:"w-full px-4 py-2 text-left hover:bg-slate-100 dark:hover:bg-slate-700 flex items-center justify-between text-sm text-slate-700 dark:text-slate-200",children:[s.jsxs("span",{className:"flex items-center gap-2",children:[a==="dark"?s.jsx(a7,{className:"w-4 h-4"}):s.jsx(c7,{className:"w-4 h-4"}),s.jsxs("span",{children:["Ch  ",a==="dark"?"ti":"sng"]})]}),s.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:a==="dark"?"Chuyn sang sng":"Chuyn sang ti"})]}),g.viewSettings&&s.jsx(Uu,{to:"/settings",onClick:()=>t(!1),className:"block w-full px-4 py-2 text-left hover:bg-slate-100 dark:hover:bg-slate-700 text-sm text-slate-700 dark:text-slate-200",children:s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx(Gg,{className:"w-4 h-4"}),s.jsx("span",{children:"Ci t h thng"})]})}),l&&s.jsx("button",{onClick:async()=>{try{await c()}finally{t(!1)}},className:"w-full px-4 py-2 text-left text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20",children:s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx(n7,{className:"w-4 h-4"}),s.jsx("span",{children:"ng xut"})]})})]})]})]})]}),s.jsxs("div",{className:"hidden md:flex items-center gap-2",children:[s.jsx(ku,{to:"/dashboard",colorKey:"blue",icon:s.jsx(j_,{className:"w-5 h-5"}),label:"Tng quan"}),s.jsx(ku,{to:"/service",colorKey:"violet",icon:s.jsx(Em,{className:"w-5 h-5"}),label:"Sa cha"}),s.jsx(ku,{to:"/sales",colorKey:"emerald",icon:s.jsx(Qf,{className:"w-5 h-5"}),label:"Bn hng"}),s.jsx(ku,{to:"/inventory",colorKey:"amber",icon:s.jsx(Gi,{className:"w-5 h-5"}),label:"Qun l kho"}),s.jsx(ku,{to:"/customers",colorKey:"cyan",icon:s.jsx(tf,{className:"w-5 h-5"}),label:"Khch hng"}),g.viewEmployees&&s.jsx(ku,{to:"/employees",colorKey:"indigo",icon:s.jsx(Am,{className:"w-5 h-5"}),label:"Nhn vin"}),g.viewFinance&&s.jsx(ku,{to:"/finance",colorKey:"rose",icon:s.jsx(Kg,{className:"w-5 h-5"}),label:"Ti chnh"}),g.viewDebt&&s.jsx(ku,{to:"/debt",colorKey:"orange",icon:s.jsx(Wg,{className:"w-5 h-5"}),label:"Cng n"}),g.viewAnalytics&&s.jsx(ku,{to:"/analytics",colorKey:"teal",icon:s.jsx(Vg,{className:"w-5 h-5"}),label:"Phn tch"}),s.jsx(ku,{to:"/reports",colorKey:"fuchsia",icon:s.jsx(dd,{className:"w-5 h-5"}),label:"Bo co"})]}),s.jsx("div",{className:"flex items-center",children:s.jsx(Uu,{to:"/dashboard",className:"p-2 text-slate-500 hover:text-blue-600 dark:text-slate-400 dark:hover:text-blue-400 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg transition-colors",title:"Trang ch",children:s.jsx(j_,{className:"w-6 h-6"})})})]}),r&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 md:hidden",onClick:()=>n(!1)}),s.jsxs("div",{className:"fixed inset-y-0 left-0 w-80 bg-gradient-to-br from-white to-slate-50 dark:from-slate-800 dark:to-slate-900 z-50 shadow-2xl md:hidden overflow-y-auto animate-slide-in-left",children:[s.jsxs("div",{className:"relative p-6 pb-8 bg-gradient-to-br from-blue-600 to-violet-600 dark:from-blue-700 dark:to-violet-800",children:[s.jsx("button",{onClick:()=>n(!1),className:"absolute top-4 right-4 p-2 hover:bg-white/10 rounded-lg transition text-white",children:s.jsx(Ou,{className:"w-5 h-5"})}),l&&s.jsxs("div",{className:"flex items-center gap-3 text-white mt-2",children:[s.jsx("div",{className:"w-14 h-14 bg-white/20 backdrop-blur rounded-full flex items-center justify-center text-xl font-bold border-2 border-white/30",children:((Z=l.full_name)==null?void 0:Z[0])||l.email[0].toUpperCase()}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"font-semibold text-base truncate",children:l.full_name||l.email}),s.jsxs("div",{className:"text-xs text-white/80 flex items-center gap-1 mt-0.5",children:[l.role==="owner"&&s.jsx(ZT,{className:"w-3 h-3"}),l.role==="manager"&&s.jsx(u7,{className:"w-3 h-3"}),l.role==="staff"&&s.jsx(h7,{className:"w-3 h-3"}),s.jsx("span",{children:l.role==="owner"?"Ch ca hng":l.role==="manager"?"Qun l":"Nhn vin"})]})]})]})]}),s.jsxs("div",{className:"p-4 space-y-6",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider px-3 mb-2",children:"Qun l"}),s.jsxs("div",{className:"space-y-1",children:[g.viewEmployees&&s.jsx(t1,{to:"/employees",icon:s.jsx(Am,{className:"w-5 h-5"}),label:"Nhn vin",color:"indigo",onClick:()=>n(!1)}),g.viewDebt&&s.jsx(t1,{to:"/debt",icon:s.jsx(Wg,{className:"w-5 h-5"}),label:"Cng n",color:"orange",onClick:()=>n(!1)})]})]}),(g.viewFinance||g.viewAnalytics)&&s.jsxs("div",{children:[s.jsx("div",{className:"text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider px-3 mb-2",children:"Ti chnh & Bo co"}),s.jsxs("div",{className:"space-y-1",children:[g.viewFinance&&s.jsx(t1,{to:"/finance",icon:s.jsx(Kg,{className:"w-5 h-5"}),label:"Ti chnh",color:"rose",onClick:()=>n(!1)}),g.viewAnalytics&&s.jsx(t1,{to:"/analytics",icon:s.jsx(Vg,{className:"w-5 h-5"}),label:"Phn tch",color:"teal",onClick:()=>n(!1)}),s.jsx(t1,{to:"/reports",icon:s.jsx(dd,{className:"w-5 h-5"}),label:"Bo co",color:"fuchsia",onClick:()=>n(!1)})]})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider px-3 mb-2",children:"H thng"}),s.jsxs("div",{className:"space-y-1",children:[s.jsxs("button",{onClick:()=>{i(),n(!1)},className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl hover:bg-slate-100 dark:hover:bg-slate-700/50 transition text-slate-700 dark:text-slate-300",children:[a==="dark"?s.jsx(a7,{className:"w-5 h-5"}):s.jsx(c7,{className:"w-5 h-5"}),s.jsxs("span",{className:"font-medium",children:["Ch  ",a==="dark"?"ti":"sng"]})]}),g.viewSettings&&s.jsx(t1,{to:"/settings",icon:s.jsx(Gg,{className:"w-5 h-5"}),label:"Ci t",color:"slate",onClick:()=>n(!1)})]})]})]}),s.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-4 bg-white dark:bg-slate-800 border-t border-slate-200 dark:border-slate-700",children:s.jsxs("button",{onClick:async()=>{try{await c()}finally{n(!1)}},className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-red-500 hover:bg-red-600 text-white rounded-xl font-medium transition shadow-lg shadow-red-500/20",children:[s.jsx(n7,{className:"w-5 h-5"}),s.jsx("span",{children:"ng xut"})]})})]})]})]})})}const _m={blue:{text:"text-blue-600 dark:text-blue-400",bg:"bg-blue-50 dark:bg-blue-900/30",hoverBg:"hover:bg-blue-50 dark:hover:bg-blue-900/20"},violet:{text:"text-violet-600 dark:text-violet-400",bg:"bg-violet-50 dark:bg-violet-900/30",hoverBg:"hover:bg-violet-50 dark:hover:bg-violet-900/20"},emerald:{text:"text-emerald-600 dark:text-emerald-400",bg:"bg-emerald-50 dark:bg-emerald-900/30",hoverBg:"hover:bg-emerald-50 dark:hover:bg-emerald-900/20"},amber:{text:"text-amber-600 dark:text-amber-400",bg:"bg-amber-50 dark:bg-amber-900/30",hoverBg:"hover:bg-amber-50 dark:hover:bg-amber-900/20"},cyan:{text:"text-cyan-600 dark:text-cyan-400",bg:"bg-cyan-50 dark:bg-cyan-900/30",hoverBg:"hover:bg-cyan-50 dark:hover:bg-cyan-900/20"},indigo:{text:"text-indigo-600 dark:text-indigo-400",bg:"bg-indigo-50 dark:bg-indigo-900/30",hoverBg:"hover:bg-indigo-50 dark:hover:bg-indigo-900/20"},rose:{text:"text-rose-600 dark:text-rose-400",bg:"bg-rose-50 dark:bg-rose-900/30",hoverBg:"hover:bg-rose-50 dark:hover:bg-rose-900/20"},orange:{text:"text-orange-600 dark:text-orange-400",bg:"bg-orange-50 dark:bg-orange-900/30",hoverBg:"hover:bg-orange-50 dark:hover:bg-orange-900/20"},teal:{text:"text-teal-600 dark:text-teal-400",bg:"bg-teal-50 dark:bg-teal-900/30",hoverBg:"hover:bg-teal-50 dark:hover:bg-teal-900/20"},fuchsia:{text:"text-fuchsia-600 dark:text-fuchsia-400",bg:"bg-fuchsia-50 dark:bg-fuchsia-900/30",hoverBg:"hover:bg-fuchsia-50 dark:hover:bg-fuchsia-900/20"},slate:{text:"text-slate-600 dark:text-slate-400",bg:"bg-slate-50 dark:bg-slate-900/30",hoverBg:"hover:bg-slate-50 dark:hover:bg-slate-900/20"}},t1=({to:e,icon:t,label:r,color:n,onClick:a})=>{const l=bd().pathname===e,o=_m[n]||_m.slate;return s.jsxs(Uu,{to:e,onClick:a,className:`flex items-center gap-3 px-4 py-3 rounded-xl transition ${l?`${o.bg} ${o.text} shadow-sm`:"text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700/50"}`,children:[s.jsx("div",{className:`${l?o.text:""}`,children:t}),s.jsx("span",{className:"font-medium text-sm",children:r})]})},ku=({to:e,icon:t,label:r,colorKey:n})=>{const i=bd().pathname===e;return s.jsxs(Uu,{to:e,className:`flex flex-col items-center gap-1 px-4 py-2 rounded-lg transition ${i?`${_m[n].bg} ${_m[n].text}`:`text-slate-600 dark:text-slate-300 ${_m[n].hoverBg}`}`,children:[s.jsx("span",{className:"flex items-center justify-center",children:t}),s.jsx("span",{className:"text-xs font-medium whitespace-nowrap",children:r})]})},vTe=()=>{const e=bd();if(e.pathname==="/inventory")return null;const t=[{to:"/dashboard",icon:s.jsx(j_,{className:"w-6 h-6"}),label:"Tng quan",color:"blue"},{to:"/service",icon:s.jsx(Em,{className:"w-6 h-6"}),label:"Sa cha",color:"violet"},{to:"/sales",icon:s.jsx(Qf,{className:"w-6 h-6"}),label:"Bn hng",color:"emerald"},{to:"/inventory",icon:s.jsx(Gi,{className:"w-6 h-6"}),label:"Kho",color:"amber"},{to:"/customers",icon:s.jsx(tf,{className:"w-6 h-6"}),label:"Khch hng",color:"cyan"}];return s.jsxs("div",{className:"md:hidden fixed bottom-0 left-0 right-0 z-50 bg-white dark:bg-slate-800 border-t border-slate-200 dark:border-slate-700 safe-area-bottom",children:[s.jsx("div",{className:"absolute inset-0 bg-white/80 dark:bg-slate-800/80 backdrop-blur-lg -z-10"}),s.jsx("div",{className:"grid grid-cols-5 gap-1 px-2 py-1.5",children:t.map(r=>{const n=e.pathname===r.to,a=r.color;return s.jsxs(Uu,{to:r.to,className:`flex flex-col items-center gap-0.5 px-1 py-1 rounded-lg transition-all duration-200 ${n?`${_m[a].bg} ${_m[a].text}`:"text-slate-600 dark:text-slate-400 active:scale-95"}`,children:[s.jsx("div",{className:`transition-transform ${n?"scale-105":""}`,children:ua.cloneElement(r.icon,{className:"w-5 h-5"})}),s.jsx("span",{className:`text-[9px] font-medium truncate w-full text-center ${n?"font-semibold":""}`,children:r.label})]},r.to)})})]})};function yTe(){const[e,t]=T.useState(!1);return T.useEffect(()=>{t(!0)},[]),{ready:e}}const wTe=new oY({defaultOptions:{queries:{staleTime:120*1e3,gcTime:300*1e3,refetchOnWindowFocus:!1,refetchOnReconnect:"always",retry:2}}}),kTe=()=>{const t=bd().pathname==="/sales";return s.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 transition-colors pb-20 md:pb-0",children:[s.jsx(bTe,{}),s.jsx("main",{className:`max-w-[1600px] mx-auto ${t?"p-0":"p-0 md:p-6"}`,children:s.jsxs(qL,{children:[s.jsx(ni,{path:"/",element:s.jsx(zL,{to:"/dashboard",replace:!0})}),s.jsx(ni,{path:"/dashboard",element:s.jsx(Bge,{})}),s.jsx(ni,{path:"/sales",element:s.jsx(rTe,{})}),s.jsx(ni,{path:"/audit-logs",element:s.jsx(Nu,{requiredRoles:["owner"],children:s.jsx(Q8e,{})})}),s.jsx(ni,{path:"/inventory",element:s.jsx(nTe,{})}),s.jsx(ni,{path:"/categories",element:s.jsx(mTe,{})}),s.jsx(ni,{path:"/lookup",element:s.jsx(xTe,{})}),s.jsx(ni,{path:"/service",element:s.jsx(aTe,{})}),s.jsx(ni,{path:"/service-history",element:s.jsx(sTe,{})}),s.jsx(ni,{path:"/customers",element:s.jsx(iTe,{})}),s.jsx(ni,{path:"/debt",element:s.jsx(Nu,{requiredRoles:["owner","manager"],children:s.jsx(lTe,{})})}),s.jsx(ni,{path:"/cashbook",element:s.jsx(Nu,{requiredRoles:["owner","manager"],children:s.jsx(oTe,{})})}),s.jsx(ni,{path:"/loans",element:s.jsx(Nu,{requiredRoles:["owner","manager"],children:s.jsx(cTe,{})})}),s.jsx(ni,{path:"/payroll",element:s.jsx(Nu,{requiredRoles:["owner","manager"],children:s.jsx(uTe,{})})}),s.jsx(ni,{path:"/employees",element:s.jsx(Nu,{requiredRoles:["owner","manager"],children:s.jsx(fTe,{})})}),s.jsx(ni,{path:"/finance",element:s.jsx(Nu,{requiredRoles:["owner","manager"],children:s.jsx(dTe,{})})}),s.jsx(ni,{path:"/analytics",element:s.jsx(Nu,{requiredRoles:["owner","manager"],children:s.jsx(pTe,{})})}),s.jsx(ni,{path:"/reports",element:s.jsx(hTe,{})}),s.jsx(ni,{path:"/settings",element:s.jsx(Nu,{requiredRoles:["owner","manager"],children:s.jsx(gTe,{})})})]})}),s.jsx(vTe,{})]})};function NTe(){const{ready:e}=yTe();return e?s.jsx(cY,{client:wTe,children:s.jsx(qJ,{children:s.jsx(dF,{children:s.jsx(zJ,{children:s.jsx(TX,{children:s.jsxs(sZ,{children:[s.jsx(iZ,{}),s.jsxs(qL,{children:[s.jsx(ni,{path:"/login",element:s.jsx(VJ,{})}),s.jsx(ni,{path:"/*",element:s.jsx(Nu,{children:s.jsx(kTe,{})})})]}),s.jsx(cZ,{initialIsOpen:!1}),!1]})})})})})}):null}bG.createRoot(document.getElementById("root")).render(s.jsxs(ua.StrictMode,{children:[s.jsx(NTe,{}),s.jsx(aZ,{position:"top-right",autoClose:3e3,hideProgressBar:!1,newestOnTop:!0,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"colored"})]}));export{Ga as _,r2 as c,gd as g};
