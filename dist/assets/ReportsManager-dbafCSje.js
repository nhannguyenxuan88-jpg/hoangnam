import{c as z,l as O,i as o,m as se,u as ae,a1 as re,e as ne,r as q,ae as oe,j as e,Q as F,a6 as A,B as V,af as X,U as Y,s as G,C as le,ag as de}from"./index-B2tLSL14.js";import{u as c,w as $}from"./xlsx-BBWTpfDg.js";import{C as te}from"./clipboard-list-CXGn1dMi.js";/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=z("BadgePercent",[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"M9 9h.01",key:"1q5me6"}],["path",{d:"M15 15h.01",key:"lqbp3k"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=z("FileSpreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=z("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]),ie=(h,x,D)=>{const p=c.book_new(),u=h.reduce((r,n)=>r+n.total,0),b=h.reduce((r,n)=>r+n.items.reduce((t,a)=>t+(a.costPrice||0)*a.quantity,0),0),y=u-b,S=u>0?y/u*100:0,C=[["B√ÅO C√ÅO DOANH THU"],[`T·ª´ ${O(x)} ƒë·∫øn ${O(D)}`],[],["Ch·ªâ ti√™u","Gi√° tr·ªã"],["T·ªïng doanh thu",o(u)],["T·ªïng chi ph√≠",o(b)],["L·ª£i nhu·∫≠n",o(y)],["Bi√™n l·ª£i nhu·∫≠n",`${S.toFixed(2)}%`]],g=c.aoa_to_sheet(C);c.book_append_sheet(p,g,"T·ªïng quan");const T=[["M√£ ƒë∆°n","Ng√†y","Kh√°ch h√†ng","SƒêT","S·∫£n ph·∫©m","S·ªë l∆∞·ª£ng","ƒê∆°n gi√°","Th√†nh ti·ªÅn","Gi·∫£m gi√°","T·ªïng","Ph∆∞∆°ng th·ª©c"]];h.forEach(r=>{r.items.forEach((n,t)=>{T.push([t===0?se(r.id):"",t===0?O(r.date):"",t===0?r.customer.name:"",t===0&&r.customer.phone||"",n.partName,n.quantity,n.sellingPrice,n.sellingPrice*n.quantity,t===0?r.discount:"",t===0?r.total:"",t===0?r.paymentMethod==="cash"?"Ti·ªÅn m·∫∑t":"Ng√¢n h√†ng":""])})});const N=c.aoa_to_sheet(T);c.book_append_sheet(p,N,"Chi ti·∫øt b√°n h√†ng");const j=`BaoCaoDoanhThu_${x}_${D}.xlsx`;$(p,j)},ce=(h,x,D)=>{const p=c.book_new(),u=h.filter(t=>t.type==="income").reduce((t,a)=>t+a.amount,0),b=h.filter(t=>t.type==="expense").reduce((t,a)=>t+a.amount,0),y=u-b,S=[["B√ÅO C√ÅO THU CHI"],[`T·ª´ ${O(x)} ƒë·∫øn ${O(D)}`],[],["Ch·ªâ ti√™u","Gi√° tr·ªã"],["T·ªïng thu",o(u)],["T·ªïng chi",o(b)],["Thu chi r√≤ng",o(y)]],C=c.aoa_to_sheet(S);c.book_append_sheet(p,C,"T·ªïng quan");const g=[["Ng√†y","Lo·∫°i","Danh m·ª•c","S·ªë ti·ªÅn","ƒê·ªëi t∆∞·ª£ng","Ngu·ªìn thanh to√°n","Ghi ch√∫"]];h.forEach(t=>{g.push([O(t.date),t.type==="income"?"Thu":"Chi",t.category||"",t.amount,t.recipient||"",t.paymentSourceId,t.notes])});const T=c.aoa_to_sheet(g);c.book_append_sheet(p,T,"Chi ti·∫øt giao d·ªãch");const N={};h.forEach(t=>{const a=t.category||"Kh√°c";N[a]||(N[a]={income:0,expense:0}),t.type==="income"?N[a].income+=t.amount:N[a].expense+=t.amount});const j=[["Danh m·ª•c","Thu","Chi","Ch√™nh l·ªách"]];Object.entries(N).forEach(([t,a])=>{j.push([t,a.income,a.expense,a.income-a.expense])});const r=c.aoa_to_sheet(j);c.book_append_sheet(p,r,"Theo danh m·ª•c");const n=`BaoCaoThuChi_${x}_${D}.xlsx`;$(p,n)},xe=(h,x,D,p)=>{const u=c.book_new(),b=h.reduce((r,n)=>{var t;return r+(n.stock[x]||0)*(((t=n.wholesalePrice)==null?void 0:t[x])||0)},0),y=h.filter(r=>(r.stock[x]||0)<10).length,S=[["B√ÅO C√ÅO T·ªíN KHO"],[`Ng√†y: ${O(p)}`],[],["Ch·ªâ ti√™u","Gi√° tr·ªã"],["T·ªïng gi√° tr·ªã t·ªìn kho",o(b)],["S·ªë lo·∫°i s·∫£n ph·∫©m",h.length],["S·∫£n ph·∫©m t·ªìn kho th·∫•p",y]],C=c.aoa_to_sheet(S);c.book_append_sheet(u,C,"T·ªïng quan");const g=[["M√£ SKU","T√™n s·∫£n ph·∫©m","Danh m·ª•c","T·ªìn kho","Gi√° nh·∫≠p","Gi√° b√°n","Gi√° tr·ªã t·ªìn","Tr·∫°ng th√°i"]];h.forEach(r=>{var m;const n=r.stock[x]||0,t=((m=r.wholesalePrice)==null?void 0:m[x])||0,a=r.retailPrice[x]||0,l=n*t,v=n<10?"Th·∫•p":n<50?"Trung b√¨nh":"ƒê·ªß";g.push([r.sku,r.name,r.category||"",n,t,a,l,v])});const T=c.aoa_to_sheet(g);c.book_append_sheet(u,T,"Chi ti·∫øt t·ªìn kho");const N=h.filter(r=>(r.stock[x]||0)<10);if(N.length>0){const r=[["M√£ SKU","T√™n s·∫£n ph·∫©m","T·ªìn kho","Ghi ch√∫"]];N.forEach(t=>{r.push([t.sku,t.name,t.stock[x]||0,"C·∫ßn nh·∫≠p th√™m h√†ng"])});const n=c.aoa_to_sheet(r);c.book_append_sheet(u,n,"C·∫£nh b√°o t·ªìn kho")}const j=`BaoCaoTonKho_${p}.xlsx`;$(u,j)},he=(h,x,D)=>{const p=c.book_new(),u=h.reduce((a,l)=>a+l.baseSalary,0),b=h.reduce((a,l)=>a+l.netSalary,0),y=h.filter(a=>a.paymentStatus==="paid").length,S=h.filter(a=>a.paymentStatus==="pending").length,C=[["B√ÅO C√ÅO L∆Ø∆†NG"],[`T·ª´ ${x} ƒë·∫øn ${D}`],[],["Ch·ªâ ti√™u","Gi√° tr·ªã"],["T·ªïng l∆∞∆°ng c∆° b·∫£n",o(u)],["T·ªïng l∆∞∆°ng th·ª±c nh·∫≠n",o(b)],["S·ªë b·∫£ng l∆∞∆°ng ƒë√£ tr·∫£",y],["S·ªë b·∫£ng l∆∞∆°ng ch∆∞a tr·∫£",S]],g=c.aoa_to_sheet(C);c.book_append_sheet(p,g,"T·ªïng quan");const T=[["Nh√¢n vi√™n","Th√°ng","L∆∞∆°ng c∆° b·∫£n","Ph·ª• c·∫•p","Th∆∞·ªüng","Kh·∫•u tr·ª´","BHXH","BHYT","BHTN","Thu·∫ø TNCN","Th·ª±c nh·∫≠n","Tr·∫°ng th√°i","Ng√†y tr·∫£"]];h.forEach(a=>{T.push([a.employeeName,a.month,a.baseSalary,a.allowances,a.bonus,a.deduction,a.socialInsurance,a.healthInsurance,a.unemploymentInsurance,a.personalIncomeTax,a.netSalary,a.paymentStatus==="paid"?"ƒê√£ tr·∫£":"Ch∆∞a tr·∫£",a.paymentDate?O(a.paymentDate):""])});const N=c.aoa_to_sheet(T);c.book_append_sheet(p,N,"Chi ti·∫øt l∆∞∆°ng");const j={};h.forEach(a=>{j[a.employeeName]||(j[a.employeeName]={totalBase:0,totalNet:0,months:0}),j[a.employeeName].totalBase+=a.baseSalary,j[a.employeeName].totalNet+=a.netSalary,j[a.employeeName].months+=1});const r=[["Nh√¢n vi√™n","S·ªë th√°ng","T·ªïng l∆∞∆°ng c∆° b·∫£n","T·ªïng th·ª±c nh·∫≠n","TB/th√°ng"]];Object.entries(j).forEach(([a,l])=>{r.push([a,l.months,l.totalBase,l.totalNet,Math.round(l.totalNet/l.months)])});const n=c.aoa_to_sheet(r);c.book_append_sheet(p,n,"Theo nh√¢n vi√™n");const t=`BaoCaoLuong_${x}_${D}.xlsx`;$(p,t)},me=(h,x,D,p,u)=>{const b=c.book_new(),y=[["B√ÅO C√ÅO C√îNG N·ª¢"],[`T·ª´ ${O(p)} ƒë·∫øn ${O(u)}`],[],["Lo·∫°i","S·ªë l∆∞·ª£ng"],["Kh√°ch h√†ng",h.length],["Nh√† cung c·∫•p",x.length]],S=c.aoa_to_sheet(y);c.book_append_sheet(b,S,"T·ªïng quan");const C=[["T√™n kh√°ch h√†ng","SƒêT","Xe","Bi·ªÉn s·ªë","Ph√¢n kh√∫c"]];h.forEach(r=>{C.push([r.name,r.phone||"",r.vehicleModel||"",r.licensePlate||"",r.segment||""])});const g=c.aoa_to_sheet(C);c.book_append_sheet(b,g,"Kh√°ch h√†ng");const T=[["T√™n nh√† cung c·∫•p","SƒêT","Email","ƒê·ªãa ch·ªâ"]];x.forEach(r=>{T.push([r.name,r.phone||"",r.email||"",r.address||""])});const N=c.aoa_to_sheet(T);c.book_append_sheet(b,N,"Nh√† cung c·∫•p");const j=`BaoCaoCongNo_${p}_${u}.xlsx`;$(b,j)},ge=(h,x,D,p=20)=>{const u=c.book_new(),b=new Map;h.forEach(r=>{r.items.forEach(n=>{const t=b.get(n.partId);t?(t.quantity+=n.quantity,t.revenue+=n.sellingPrice*n.quantity,t.orders+=1):b.set(n.partId,{name:n.partName,sku:n.sku||"",quantity:n.quantity,revenue:n.sellingPrice*n.quantity,orders:1})})});const y=Array.from(b.values()).sort((r,n)=>n.quantity-r.quantity).slice(0,p),S=[["TOP S·∫¢N PH·∫®M B√ÅN CH·∫†Y"],[`T·ª´ ${O(x)} ƒë·∫øn ${O(D)}`],[],["STT","T√™n s·∫£n ph·∫©m","SKU","S·ªë l∆∞·ª£ng b√°n","Doanh thu","S·ªë ƒë∆°n","Trung b√¨nh/ƒë∆°n"]];y.forEach((r,n)=>{S.push([String(n+1),r.name,r.sku,String(r.quantity),o(r.revenue),String(r.orders),o(r.revenue/r.orders)])});const C=y.reduce((r,n)=>r+n.quantity,0),g=y.reduce((r,n)=>r+n.revenue,0),T=y.reduce((r,n)=>r+n.orders,0);S.push([]),S.push(["T·ªîNG","","",String(C),o(g),String(T),o(g/T)]);const N=c.aoa_to_sheet(S);c.book_append_sheet(u,N,"Top s·∫£n ph·∫©m");const j=`TopSanPhamBanChay_${x}_${D}.xlsx`;$(u,j)},pe=(h,x,D)=>{const p=c.book_new(),u=new Map;h.forEach(n=>{n.items.forEach(t=>{const a=(t.costPrice||0)*t.quantity,l=t.sellingPrice*t.quantity,v=l-a,m=u.get(t.partId);m?(m.quantity+=t.quantity,m.revenue+=l,m.cost+=a,m.profit+=v,m.margin=m.revenue>0?m.profit/m.revenue*100:0):u.set(t.partId,{name:t.partName,sku:t.sku||"",quantity:t.quantity,revenue:l,cost:a,profit:v,margin:l>0?v/l*100:0})})});const b=Array.from(u.values()).sort((n,t)=>t.profit-n.profit),y=[["B√ÅO C√ÅO L·ª¢I NHU·∫¨N THEO S·∫¢N PH·∫®M"],[`T·ª´ ${O(x)} ƒë·∫øn ${O(D)}`],[],["STT","T√™n s·∫£n ph·∫©m","SKU","SL","Doanh thu","Gi√° v·ªën","L·ª£i nhu·∫≠n","Bi√™n LN (%)"]];b.forEach((n,t)=>{y.push([String(t+1),n.name,n.sku,String(n.quantity),o(n.revenue),o(n.cost),o(n.profit),n.margin.toFixed(2)+"%"])});const S=b.reduce((n,t)=>n+t.quantity,0),C=b.reduce((n,t)=>n+t.revenue,0),g=b.reduce((n,t)=>n+t.cost,0),T=b.reduce((n,t)=>n+t.profit,0),N=C>0?T/C*100:0;y.push([]),y.push(["T·ªîNG","","",String(S),o(C),o(g),o(T),N.toFixed(2)+"%"]);const j=c.aoa_to_sheet(y);c.book_append_sheet(p,j,"L·ª£i nhu·∫≠n s·∫£n ph·∫©m");const r=`LoiNhuanTheoSanPham_${x}_${D}.xlsx`;$(p,r)},ue=(h,x,D,p)=>{const u=c.book_new(),b=h.length,y=h.reduce((t,a)=>{var l;return t+(((l=a.stock)==null?void 0:l[x])||0)},0),S=h.reduce((t,a)=>{var m,L;const l=((m=a.stock)==null?void 0:m[x])||0,v=typeof a.costPrice=="number"?a.costPrice:((L=a.retailPrice)==null?void 0:L[x])||0;return t+l*v},0),C=h.filter(t=>{var l;const a=((l=t.stock)==null?void 0:l[x])||0;return a>0&&a<=5}),g=h.filter(t=>{var a;return(((a=t.stock)==null?void 0:a[x])||0)===0}),T=[["B√ÅO C√ÅO T·ªíN KHO CHI TI·∫æT"],[`Ng√†y: ${O(new Date().toISOString())}`],[`Chi nh√°nh: ${x}`],[],["Ch·ªâ ti√™u","Gi√° tr·ªã"],["T·ªïng s·ªë m·∫∑t h√†ng",b],["T·ªïng s·ªë l∆∞·ª£ng t·ªìn",y],["Gi√° tr·ªã t·ªìn kho",o(S)],["S·∫£n ph·∫©m t·ªìn th·∫•p (‚â§5)",C.length],["S·∫£n ph·∫©m h·∫øt h√†ng",g.length]],N=c.aoa_to_sheet(T);c.book_append_sheet(u,N,"T·ªïng quan");const j=[["SKU","T√™n s·∫£n ph·∫©m","Danh m·ª•c","T·ªìn kho","Gi√° v·ªën","Gi√° b√°n","Gi√° tr·ªã t·ªìn","Tr·∫°ng th√°i"]];h.forEach(t=>{var U,M;const a=((U=t.stock)==null?void 0:U[x])||0,l=typeof t.costPrice=="number"?t.costPrice:0,v=((M=t.retailPrice)==null?void 0:M[x])||0,m=a*l;let L="B√¨nh th∆∞·ªùng";a===0?L="H·∫øt h√†ng":a<=5&&(L="T·ªìn th·∫•p"),j.push([t.sku||"",t.name,t.category||"",String(a),o(l),o(v),o(m),L])});const r=c.aoa_to_sheet(j);if(c.book_append_sheet(u,r,"T·∫•t c·∫£ s·∫£n ph·∫©m"),C.length>0){const t=[["SKU","T√™n s·∫£n ph·∫©m","T·ªìn kho","C·∫ßn nh·∫≠p"]];C.forEach(l=>{var L;const v=((L=l.stock)==null?void 0:L[x])||0,m=Math.max(10-v,0);t.push([l.sku||"",l.name,String(v),String(m)])});const a=c.aoa_to_sheet(t);c.book_append_sheet(u,a,"T·ªìn th·∫•p")}if(g.length>0){const t=[["SKU","T√™n s·∫£n ph·∫©m","Gi√° b√°n","ƒê·ªÅ xu·∫•t"]];g.forEach(l=>{var m;const v=((m=l.retailPrice)==null?void 0:m[x])||0;t.push([l.sku||"",l.name,o(v),"C·∫ßn nh·∫≠p ngay"])});const a=c.aoa_to_sheet(t);c.book_append_sheet(u,a,"H·∫øt h√†ng")}const n=`TonKhoChiTiet_${x}_${O(new Date().toISOString())}.xlsx`;$(u,n)},be=[{key:"revenue",label:"Doanh thu",icon:e.jsx(F,{className:"w-4 h-4"}),activeClass:"bg-gradient-to-r from-blue-600 to-sky-500 text-white border-transparent shadow-lg shadow-blue-500/30",inactiveClass:"bg-white dark:bg-slate-900/60 text-blue-700 dark:text-blue-200 border-blue-200 dark:border-blue-700 hover:bg-blue-50/80 dark:hover:bg-blue-900/20",dotClass:"bg-blue-400"},{key:"cashflow",label:"Thu chi",icon:e.jsx(A,{className:"w-4 h-4"}),activeClass:"bg-gradient-to-r from-emerald-500 to-lime-500 text-white border-transparent shadow-lg shadow-emerald-500/30",inactiveClass:"bg-white dark:bg-slate-900/60 text-emerald-700 dark:text-emerald-200 border-emerald-200 dark:border-emerald-800 hover:bg-emerald-50/70 dark:hover:bg-emerald-900/20",dotClass:"bg-emerald-400"},{key:"inventory",label:"T·ªìn kho",icon:e.jsx(V,{className:"w-4 h-4"}),activeClass:"bg-gradient-to-r from-amber-500 to-orange-500 text-white border-transparent shadow-lg shadow-orange-500/30",inactiveClass:"bg-white dark:bg-slate-900/60 text-amber-700 dark:text-amber-200 border-amber-200 dark:border-amber-800 hover:bg-amber-50/70 dark:hover:bg-amber-900/20",dotClass:"bg-amber-400"},{key:"payroll",label:"L∆∞∆°ng",icon:e.jsx(X,{className:"w-4 h-4"}),activeClass:"bg-gradient-to-r from-violet-500 to-fuchsia-500 text-white border-transparent shadow-lg shadow-violet-500/30",inactiveClass:"bg-white dark:bg-slate-900/60 text-violet-700 dark:text-violet-200 border-violet-200 dark:border-violet-800 hover:bg-violet-50/70 dark:hover:bg-violet-900/20",dotClass:"bg-violet-400"},{key:"debt",label:"C√¥ng n·ª£",icon:e.jsx(te,{className:"w-4 h-4"}),activeClass:"bg-gradient-to-r from-rose-500 to-red-500 text-white border-transparent shadow-lg shadow-rose-500/30",inactiveClass:"bg-white dark:bg-slate-900/60 text-rose-700 dark:text-rose-200 border-rose-200 dark:border-rose-800 hover:bg-rose-50/70 dark:hover:bg-rose-900/20",dotClass:"bg-rose-400"}],ve=()=>{const{payrollRecords:h,customers:x,suppliers:D,currentBranchId:p,employees:u}=ae(),{data:b=[],isLoading:y}=re(),{data:S=[],isLoading:C}=ne(),[g,T]=q.useState("revenue"),[N,j]=q.useState("month"),[r,n]=q.useState(""),[t,a]=q.useState(""),{start:l,end:v}=q.useMemo(()=>{const s=new Date;let d=new Date,w=new Date;if(N==="custom"&&r&&t)return{start:new Date(r),end:new Date(t)};switch(N){case"today":d=new Date(s.setHours(0,0,0,0)),w=new Date(s.setHours(23,59,59,999));break;case"week":d=new Date(s.setDate(s.getDate()-7));break;case"month":d=new Date(s.setMonth(s.getMonth()-1));break;case"quarter":d=new Date(s.setMonth(s.getMonth()-3));break;case"year":d=new Date(s.setFullYear(s.getFullYear()-1));break}return{start:d,end:w}},[N,r,t]),m=q.useMemo(()=>{const s=b.filter(P=>{const _=new Date(P.date);return _>=l&&_<=v}),d=s.reduce((P,_)=>P+_.total,0),w=s.reduce((P,_)=>{const B=_.items.reduce((E,K)=>E+(K.costPrice||0)*K.quantity,0);return P+B},0),k=d-w,i=new Map;s.forEach(P=>{const _=new Date(P.date).toISOString().split("T")[0];i.has(_)||i.set(_,{date:_,sales:[],totalRevenue:0,totalCost:0,totalProfit:0,orderCount:0});const B=i.get(_),E=P.items.reduce((K,Q)=>K+(Q.costPrice||0)*Q.quantity,0);B.sales.push(P),B.totalRevenue+=P.total,B.totalCost+=E,B.totalProfit+=P.total-E,B.orderCount+=1});const f=Array.from(i.values()).sort((P,_)=>new Date(P.date).getTime()-new Date(_.date).getTime());return{sales:s,dailyReport:f,totalRevenue:d,totalCost:w,totalProfit:k,profitMargin:d>0?(k/d*100).toFixed(1):0,orderCount:s.length}},[b,l,v]),{data:L=[],isLoading:U}=oe({branchId:p,startDate:l.toISOString(),endDate:v.toISOString()}),M=q.useMemo(()=>{const s=L.filter(i=>{const f=new Date(i.date);return f>=l&&f<=v}),d=s.filter(i=>i.type==="income").reduce((i,f)=>i+f.amount,0),w=s.filter(i=>i.type==="expense").reduce((i,f)=>i+f.amount,0),k={};return s.forEach(i=>{const f=i.category||"other";k[f]||(k[f]={income:0,expense:0}),i.type==="income"?k[f].income+=i.amount:k[f].expense+=i.amount}),{transactions:s,totalIncome:d,totalExpense:w,netCashFlow:d-w,byCategory:k}},[L,l,v]),I=q.useMemo(()=>{const s=S.map(k=>({...k,stock:k.stock[p]||0,price:k.retailPrice[p]||0,value:(k.stock[p]||0)*(k.retailPrice[p]||0)})),d=s.reduce((k,i)=>k+i.value,0),w=s.filter(k=>k.stock<10);return{parts:s,totalValue:d,lowStockCount:w.length,lowStockItems:w}},[S,p]),R=q.useMemo(()=>{const s=h.filter(i=>{const f=new Date(i.month);return f>=l&&f<=v}),d=s.reduce((i,f)=>i+f.netSalary,0),w=s.filter(i=>i.paymentStatus==="paid").reduce((i,f)=>i+f.netSalary,0),k=d-w;return{records:s,totalSalary:d,paidSalary:w,unpaidSalary:k,employeeCount:new Set(s.map(i=>i.employeeId)).size}},[h,l,v]),H=q.useMemo(()=>{const s=x.map(i=>{const P=b.filter(_=>(_.customer.name===i.name||_.customer.phone===i.phone)&&_.paymentStatus!=="paid").reduce((_,B)=>_+B.total,0);return{name:i.name,debt:P}}),d=D.map(i=>({name:i.name,debt:0})),w=s.reduce((i,f)=>i+f.debt,0),k=d.reduce((i,f)=>i+f.debt,0);return{customerDebts:s.filter(i=>i.debt>0),supplierDebts:d.filter(i=>i.debt>0),totalCustomerDebt:w,totalSupplierDebt:k,netDebt:w-k}},[x,D]),W=()=>{const s=l.toISOString().split("T")[0],d=v.toISOString().split("T")[0];try{switch(g){case"revenue":ie(m.sales,s,d);break;case"cashflow":ce(M.transactions,s,d);break;case"inventory":xe(S,p,s,d);break;case"payroll":const w=l.toISOString().slice(0,7),k=v.toISOString().slice(0,7);he(R.records,w,k);break;case"debt":me(x,D,m.sales,s,d);break}G.success("Xu·∫•t Excel th√†nh c√¥ng! File ƒë√£ ƒë∆∞·ª£c t·∫£i xu·ªëng.")}catch(w){console.error("Export error:",w),G.error("C√≥ l·ªói khi xu·∫•t Excel. Vui l√≤ng th·ª≠ l·∫°i.")}};return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"md:hidden space-y-2 mb-3",children:[e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-2 rounded-lg border border-slate-200 dark:border-slate-700 shadow-sm",children:[e.jsx("label",{className:"text-[10px] font-medium text-slate-500 dark:text-slate-400 mb-1.5 block uppercase tracking-wider",children:"Lo·∫°i b√°o c√°o"}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:g,onChange:s=>T(s.target.value),className:"w-full appearance-none p-2 pl-8 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white font-medium text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all",children:[e.jsx("option",{value:"revenue",children:"Doanh thu"}),e.jsx("option",{value:"cashflow",children:"Thu chi"}),e.jsx("option",{value:"inventory",children:"T·ªìn kho"}),e.jsx("option",{value:"payroll",children:"L∆∞∆°ng nh√¢n vi√™n"}),e.jsx("option",{value:"debt",children:"C√¥ng n·ª£"})]}),e.jsxs("div",{className:"absolute left-2 top-1/2 -translate-y-1/2 text-slate-500 dark:text-slate-400 pointer-events-none",children:[g==="revenue"&&e.jsx(F,{className:"w-4 h-4"}),g==="cashflow"&&e.jsx(A,{className:"w-4 h-4"}),g==="inventory"&&e.jsx(V,{className:"w-4 h-4"}),g==="payroll"&&e.jsx(X,{className:"w-4 h-4"}),g==="debt"&&e.jsx(te,{className:"w-4 h-4"})]}),e.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-500 dark:text-slate-400 pointer-events-none",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"m6 9 6 6 6-6"})})})]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 p-2 rounded-lg border border-slate-200 dark:border-slate-700 shadow-sm",children:[e.jsx("label",{className:"text-[10px] font-medium text-slate-500 dark:text-slate-400 mb-1.5 block uppercase tracking-wider",children:"Th·ªùi gian"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsxs("select",{value:N,onChange:s=>j(s.target.value),className:"w-full appearance-none p-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white font-medium text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all",children:[e.jsx("option",{value:"today",children:"H√¥m nay"}),e.jsx("option",{value:"week",children:"7 ng√†y qua"}),e.jsx("option",{value:"month",children:"Th√°ng n√†y"}),e.jsx("option",{value:"quarter",children:"Qu√Ω n√†y"}),e.jsx("option",{value:"year",children:"NƒÉm nay"}),e.jsx("option",{value:"custom",children:"T√πy ch·ªânh"})]}),e.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-500 dark:text-slate-400 pointer-events-none",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"m6 9 6 6 6-6"})})})]}),e.jsx("button",{onClick:W,className:"px-4 bg-emerald-600 text-white rounded-lg shadow-sm hover:bg-emerald-700 active:scale-95 transition-all flex items-center justify-center","aria-label":"Xu·∫•t Excel",children:e.jsx(J,{className:"w-5 h-5"})})]}),N==="custom"&&e.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3 animate-in fade-in slide-in-from-top-2 duration-200",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] text-slate-500 dark:text-slate-400 mb-1 block",children:"T·ª´ ng√†y"}),e.jsx("input",{type:"date",value:r,onChange:s=>n(s.target.value),className:"w-full p-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg text-sm text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] text-slate-500 dark:text-slate-400 mb-1 block",children:"ƒê·∫øn ng√†y"}),e.jsx("input",{type:"date",value:t,onChange:s=>a(s.target.value),className:"w-full p-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg text-sm text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none"})]})]})]})]}),e.jsxs("div",{className:"hidden md:flex items-center gap-2 flex-wrap",children:[be.map(s=>{const d=g===s.key;return e.jsx("button",{type:"button","aria-pressed":d,onClick:()=>T(s.key),className:`px-4 py-1.5 rounded-xl font-medium whitespace-nowrap transition-all border text-sm ${d?s.activeClass:s.inactiveClass}`,children:e.jsxs("span",{className:"inline-flex items-center gap-1.5",children:[e.jsx("span",{"aria-hidden":!0,className:`w-2 h-2 rounded-full ${d?"bg-white/90":s.dotClass}`}),s.icon,s.label]})},s.key)}),e.jsx("div",{className:"h-6 w-px bg-slate-300 dark:bg-slate-600 mx-1"}),["today","week","month","quarter","year","custom"].map(s=>e.jsx("button",{onClick:()=>j(s),className:`px-3 py-1.5 rounded-lg font-medium text-xs transition-all ${N===s?"bg-blue-600 text-white shadow-md":"bg-slate-100 dark:bg-slate-700/50 text-slate-700 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:s==="today"?"H√¥m nay":s==="week"?"7 ng√†y":s==="month"?"Th√°ng":s==="quarter"?"Qu√Ω":s==="year"?"NƒÉm":"T√πy ch·ªânh"},s)),N==="custom"&&e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"date",value:r,onChange:s=>n(s.target.value),className:"px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white text-sm"}),e.jsx("span",{className:"text-slate-500 dark:text-slate-400",children:"‚Üí"}),e.jsx("input",{type:"date",value:t,onChange:s=>a(s.target.value),className:"px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white text-sm"})]}),e.jsxs("div",{className:"ml-auto flex gap-2",children:[e.jsxs("button",{onClick:W,className:"px-3 py-1.5 bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-lg font-medium shadow-md hover:shadow-lg hover:from-green-700 hover:to-emerald-700 transition-all duration-200 flex items-center gap-1.5 text-sm",children:[e.jsx(J,{className:"w-4 h-4"})," Xu·∫•t Excel"]}),g==="revenue"&&e.jsxs("div",{className:"relative group",children:[e.jsxs("button",{className:"px-3 py-1.5 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg font-medium shadow-md hover:shadow-lg hover:from-blue-700 hover:to-indigo-700 transition-all duration-200 flex items-center gap-1.5 text-sm",children:[e.jsx(Y,{className:"w-4 h-4"})," B√°o c√°o n√¢ng cao"]}),e.jsxs("div",{className:"absolute right-0 top-full mt-2 w-64 bg-white dark:bg-slate-800 rounded-lg shadow-xl border border-slate-200 dark:border-slate-700 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50",children:[e.jsxs("button",{onClick:()=>{const s=l.toISOString().split("T")[0],d=v.toISOString().split("T")[0];ge(m.sales,s,d,20),G.success("Xu·∫•t Top s·∫£n ph·∫©m th√†nh c√¥ng!")},className:"w-full px-4 py-3 text-left hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors flex items-center gap-3 text-sm text-slate-700 dark:text-slate-300 rounded-t-lg",children:[e.jsx(ee,{className:"w-4 h-4 text-blue-600"}),e.jsx("span",{children:"Top s·∫£n ph·∫©m b√°n ch·∫°y"})]}),e.jsxs("button",{onClick:()=>{const s=l.toISOString().split("T")[0],d=v.toISOString().split("T")[0];pe(m.sales,s,d),G.success("Xu·∫•t l·ª£i nhu·∫≠n s·∫£n ph·∫©m th√†nh c√¥ng!")},className:"w-full px-4 py-3 text-left hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors flex items-center gap-3 text-sm text-slate-700 dark:text-slate-300 rounded-b-lg",children:[e.jsx(Z,{className:"w-4 h-4 text-green-600"}),e.jsx("span",{children:"L·ª£i nhu·∫≠n theo s·∫£n ph·∫©m"})]})]})]}),g==="inventory"&&e.jsxs("button",{onClick:()=>{l.toISOString().split("T")[0],v.toISOString().split("T")[0],ue(S,p),G.success("Xu·∫•t b√°o c√°o t·ªìn kho chi ti·∫øt th√†nh c√¥ng!")},className:"px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg font-medium shadow-md hover:shadow-lg hover:from-purple-700 hover:to-pink-700 transition-all duration-200 flex items-center gap-2",children:[e.jsx(V,{className:"w-4 h-4"})," T·ªìn kho chi ti·∫øt"]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-4",children:[g==="revenue"&&e.jsxs("div",{className:"space-y-4",children:[y&&e.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:"ƒêang t·∫£i doanh thu..."}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-lg p-4 border border-blue-200 dark:border-blue-800",children:[e.jsxs("div",{className:"flex items-center gap-1 text-xs font-medium text-blue-700 dark:text-blue-400 mb-1.5",children:[e.jsx(F,{className:"w-3.5 h-3.5"})," T·ªïng doanh thu"]}),e.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:o(m.totalRevenue).replace("‚Ç´","")}),e.jsx("div",{className:"text-[10px] text-blue-600 dark:text-blue-400 mt-0.5",children:"ƒë"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-red-50 to-rose-50 dark:from-red-900/20 dark:to-rose-900/20 rounded-lg p-4 border border-red-200 dark:border-red-800",children:[e.jsxs("div",{className:"flex items-center gap-1 text-xs font-medium text-red-700 dark:text-red-400 mb-1.5",children:[e.jsx(A,{className:"w-3.5 h-3.5"})," T·ªïng chi ph√≠"]}),e.jsx("div",{className:"text-2xl font-bold text-red-600 dark:text-red-400",children:o(m.totalCost).replace("‚Ç´","")}),e.jsx("div",{className:"text-[10px] text-red-600 dark:text-red-400 mt-0.5",children:"ƒë"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 rounded-lg p-4 border border-green-200 dark:border-green-800",children:[e.jsxs("div",{className:"flex items-center gap-1 text-xs font-medium text-green-700 dark:text-green-400 mb-1.5",children:[e.jsx(Y,{className:"w-3.5 h-3.5"})," L·ª£i nhu·∫≠n"]}),e.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:o(m.totalProfit).replace("‚Ç´","")}),e.jsx("div",{className:"text-[10px] text-green-600 dark:text-green-400 mt-0.5",children:"ƒë"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-fuchsia-50 dark:from-purple-900/20 dark:to-fuchsia-900/20 rounded-lg p-4 border border-purple-200 dark:border-purple-800",children:[e.jsxs("div",{className:"flex items-center gap-1 text-xs font-medium text-purple-700 dark:text-purple-400 mb-1.5",children:[e.jsx(Z,{className:"w-3.5 h-3.5"})," T·ª∑ su·∫•t l·ª£i nhu·∫≠n"]}),e.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:m.profitMargin}),e.jsx("div",{className:"text-[10px] text-purple-600 dark:text-purple-400 mt-0.5",children:"%"})]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700",children:[e.jsx("div",{className:"px-4 py-3 border-b border-slate-200 dark:border-slate-700",children:e.jsxs("h3",{className:"text-base font-semibold text-slate-900 dark:text-white",children:["Chi ti·∫øt ƒë∆°n h√†ng theo ng√†y (",m.dailyReport.length," ng√†y)"]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-blue-600 text-white",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-2 py-2 text-center text-[10px] font-bold uppercase",children:"#"}),e.jsx("th",{className:"px-2 py-2 text-left text-[10px] font-bold uppercase",children:"Ng√†y"}),e.jsxs("th",{className:"px-2 py-2 text-right text-[10px] font-bold uppercase",children:["V·ªën NK",e.jsx("br",{}),"(1)"]}),e.jsxs("th",{className:"px-2 py-2 text-right text-[10px] font-bold uppercase",children:["Ti·ªÅn h√†ng",e.jsx("br",{}),"(2)"]}),e.jsxs("th",{className:"px-2 py-2 text-right text-[10px] font-bold uppercase",children:["V·ªën SC",e.jsx("br",{}),"(3)"]}),e.jsxs("th",{className:"px-2 py-2 text-right text-[10px] font-bold uppercase",children:["C√¥ng SC",e.jsx("br",{}),"(4)"]}),e.jsxs("th",{className:"px-2 py-2 text-right text-[10px] font-bold uppercase",children:["Doanh thu",e.jsx("br",{}),"(5=2+3+4)"]}),e.jsxs("th",{className:"px-2 py-2 text-right text-[10px] font-bold uppercase",children:["L·ª£i nhu·∫≠n",e.jsx("br",{}),"(6=2-1-4)"]}),e.jsxs("th",{className:"px-2 py-2 text-right text-[10px] font-bold uppercase",children:["Thu kh√°c",e.jsx("br",{}),"(7)"]}),e.jsxs("th",{className:"px-2 py-2 text-right text-[10px] font-bold uppercase",children:["Chi kh√°c",e.jsx("br",{}),"(8)"]}),e.jsxs("th",{className:"px-2 py-2 text-right text-[10px] font-bold uppercase bg-green-700",children:["LN r√≤ng",e.jsx("br",{}),"(9=(6+7)-8)"]})]})}),e.jsxs("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:[m.dailyReport.map((s,d)=>{const k=s.totalRevenue,i=0,f=0,P=k+i+f,_=k-0-f,B=0,E=0,K=_+B-E;return e.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/30",children:[e.jsx("td",{className:"px-2 py-2 text-center text-xs font-medium text-slate-900 dark:text-white",children:d+1}),e.jsx("td",{className:"px-2 py-2 whitespace-nowrap text-xs text-slate-900 dark:text-white",children:new Date(s.date).toLocaleDateString("vi-VN")}),e.jsx("td",{className:"px-2 py-2 text-right text-xs text-slate-900 dark:text-white",children:o(0)}),e.jsx("td",{className:"px-2 py-2 text-right text-xs font-semibold text-blue-600 dark:text-blue-400",children:o(k)}),e.jsx("td",{className:"px-2 py-2 text-right text-xs text-slate-900 dark:text-white",children:o(i)}),e.jsx("td",{className:"px-2 py-2 text-right text-xs text-slate-900 dark:text-white",children:o(f)}),e.jsx("td",{className:"px-2 py-2 text-right text-xs font-bold text-blue-600 dark:text-blue-400",children:o(P)}),e.jsx("td",{className:"px-2 py-2 text-right text-xs font-bold text-orange-600 dark:text-orange-400",children:o(_)}),e.jsx("td",{className:"px-2 py-2 text-right text-xs text-slate-900 dark:text-white",children:o(B)}),e.jsx("td",{className:"px-2 py-2 text-right text-xs text-red-600 dark:text-red-400",children:o(E)}),e.jsx("td",{className:"px-2 py-2 text-right text-xs font-black text-green-700 dark:text-green-400 bg-green-50 dark:bg-green-900/20",children:o(K)})]},s.date)}),m.dailyReport.length>0&&e.jsxs("tr",{className:"bg-blue-50 dark:bg-blue-900/20 font-bold border-t-2 border-blue-600",children:[e.jsx("td",{colSpan:2,className:"px-2 py-2 text-left text-xs font-black text-slate-900 dark:text-white",children:"T·ªïng:"}),e.jsx("td",{className:"px-2 py-2 text-right text-xs text-slate-900 dark:text-white",children:o(0)}),e.jsx("td",{className:"px-2 py-2 text-right text-xs font-black text-blue-600 dark:text-blue-400",children:o(m.totalRevenue)}),e.jsx("td",{className:"px-2 py-2 text-right text-xs text-slate-900 dark:text-white",children:o(0)}),e.jsx("td",{className:"px-2 py-2 text-right text-xs text-slate-900 dark:text-white",children:o(0)}),e.jsx("td",{className:"px-2 py-2 text-right text-xs font-black text-blue-600 dark:text-blue-400",children:o(m.totalRevenue)}),e.jsx("td",{className:"px-2 py-2 text-right text-xs font-black text-orange-600 dark:text-orange-400",children:o(m.totalProfit)}),e.jsx("td",{className:"px-2 py-2 text-right text-xs text-slate-900 dark:text-white",children:o(0)}),e.jsx("td",{className:"px-2 py-2 text-right text-xs text-red-600 dark:text-red-400",children:o(0)}),e.jsx("td",{className:"px-2 py-2 text-right text-xs font-black text-green-700 dark:text-green-400 bg-green-100 dark:bg-green-900/30",children:o(m.totalProfit)})]})]})]})})]}),!1]}),g==="cashflow"&&e.jsxs("div",{className:"space-y-4",children:[U&&e.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:"ƒêang t·∫£i s·ªï qu·ªπ..."}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 rounded-lg p-4 border border-green-200 dark:border-green-800",children:[e.jsx("div",{className:"text-xs font-medium text-green-700 dark:text-green-400 mb-1.5",children:e.jsxs("span",{className:"inline-flex items-center gap-1",children:[e.jsx(A,{className:"w-3.5 h-3.5"})," T·ªïng thu"]})}),e.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:o(M.totalIncome).replace("‚Ç´","")}),e.jsx("div",{className:"text-[10px] text-green-600 dark:text-green-400 mt-0.5",children:"ƒë"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-red-50 to-rose-50 dark:from-red-900/20 dark:to-rose-900/20 rounded-lg p-4 border border-red-200 dark:border-red-800",children:[e.jsxs("div",{className:"text-xs font-medium text-red-700 dark:text-red-400 mb-1.5 inline-flex items-center gap-1",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"w-3.5 h-3.5",children:[e.jsx("rect",{x:"2",y:"6",width:"20",height:"12",rx:"2",ry:"2"}),e.jsx("circle",{cx:"12",cy:"12",r:"2"}),e.jsx("path",{d:"M6 12h.01M18 12h.01"})]}),"T·ªïng chi"]}),e.jsx("div",{className:"text-2xl font-bold text-red-600 dark:text-red-400",children:o(M.totalExpense).replace("‚Ç´","")}),e.jsx("div",{className:"text-[10px] text-red-600 dark:text-red-400 mt-0.5",children:"ƒë"})]}),e.jsxs("div",{className:`bg-gradient-to-br rounded-lg p-4 border ${M.netCashFlow>=0?"from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 border-blue-200 dark:border-blue-800":"from-orange-50 to-amber-50 dark:from-orange-900/20 dark:to-amber-900/20 border-orange-200 dark:border-orange-800"}`,children:[e.jsx("div",{className:`text-sm font-medium mb-2 ${M.netCashFlow>=0?"text-blue-700 dark:text-blue-400":"text-orange-700 dark:text-orange-400"}`,children:e.jsxs("span",{className:"inline-flex items-center gap-1",children:[e.jsx(F,{className:"w-4 h-4"})," D√≤ng ti·ªÅn r√≤ng"]})}),e.jsx("div",{className:`text-3xl font-bold ${M.netCashFlow>=0?"text-blue-600 dark:text-blue-400":"text-orange-600 dark:text-orange-400"}`,children:o(M.netCashFlow).replace("‚Ç´","")}),e.jsx("div",{className:`text-xs mt-1 ${M.netCashFlow>=0?"text-blue-600 dark:text-blue-400":"text-orange-600 dark:text-orange-400"}`,children:"ƒë"})]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"Thu chi theo danh m·ª•c"}),e.jsx("div",{className:"space-y-3",children:Object.entries(M.byCategory).map(([s,d])=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-slate-50 to-slate-100 dark:from-slate-700 dark:to-slate-800 rounded-lg hover:shadow-md transition-shadow",children:[e.jsx("span",{className:"font-semibold text-slate-900 dark:text-white capitalize",children:s}),e.jsxs("div",{className:"flex gap-6",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"Thu"}),e.jsx("div",{className:"text-green-600 dark:text-green-400 font-bold",children:o(d.income)})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"Chi"}),e.jsx("div",{className:"text-red-600 dark:text-red-400 font-bold",children:o(d.expense)})]})]})]},s))})]})]}),g==="inventory"&&e.jsxs("div",{className:"space-y-6",children:[C&&e.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:"ƒêang t·∫£i t·ªìn kho..."}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-lg p-6 border border-blue-200 dark:border-blue-800",children:[e.jsx("div",{className:"text-sm font-medium text-blue-700 dark:text-blue-400 mb-2",children:e.jsxs("span",{className:"inline-flex items-center gap-1",children:[e.jsx(V,{className:"w-4 h-4"})," T·ªïng gi√° tr·ªã t·ªìn kho"]})}),e.jsx("div",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400",children:o(I.totalValue).replace("‚Ç´","")}),e.jsx("div",{className:"text-xs text-blue-600 dark:text-blue-400 mt-1",children:"ƒë"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-fuchsia-50 dark:from-purple-900/20 dark:to-fuchsia-900/20 rounded-lg p-6 border border-purple-200 dark:border-purple-800",children:[e.jsx("div",{className:"text-sm font-medium text-purple-700 dark:text-purple-400 mb-2",children:e.jsxs("span",{className:"inline-flex items-center gap-1",children:[e.jsx(ee,{className:"w-4 h-4"})," T·ªïng s·∫£n ph·∫©m"]})}),e.jsx("div",{className:"text-3xl font-bold text-purple-600 dark:text-purple-400",children:I.parts.length}),e.jsx("div",{className:"text-xs text-purple-600 dark:text-purple-400 mt-1",children:"s·∫£n ph·∫©m"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-red-50 to-rose-50 dark:from-red-900/20 dark:to-rose-900/20 rounded-lg p-6 border border-red-200 dark:border-red-800",children:[e.jsx("div",{className:"text-sm font-medium text-red-700 dark:text-red-400 mb-2",children:e.jsxs("span",{className:"inline-flex items-center gap-1",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"w-4 h-4 text-amber-500",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v4m0 4h.01"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.29 3.86 1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0Z"})]}),"S·∫£n ph·∫©m s·∫Øp h·∫øt"]})}),e.jsx("div",{className:"text-3xl font-bold text-red-600 dark:text-red-400",children:I.lowStockCount}),e.jsx("div",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:"s·∫£n ph·∫©m"})]})]}),I.lowStockCount>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:e.jsxs("span",{className:"inline-flex items-center gap-1",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"w-4 h-4 text-amber-500",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v4m0 4h.01"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.29 3.86 1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0Z"})]}),"C·∫£nh b√°o h√†ng s·∫Øp h·∫øt"]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-slate-700 dark:text-slate-300",children:"S·∫£n ph·∫©m"}),e.jsx("th",{className:"px-4 py-2 text-right text-sm font-medium text-slate-700 dark:text-slate-300",children:"T·ªìn kho"}),e.jsx("th",{className:"px-4 py-2 text-right text-sm font-medium text-slate-700 dark:text-slate-300",children:"ƒê∆°n gi√°"}),e.jsx("th",{className:"px-4 py-2 text-right text-sm font-medium text-slate-700 dark:text-slate-300",children:"Gi√° tr·ªã"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:I.lowStockItems.map(s=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-2 text-sm text-slate-900 dark:text-white",children:s.name}),e.jsx("td",{className:"px-4 py-2 text-sm text-right text-red-600 dark:text-red-400 font-medium",children:s.stock}),e.jsx("td",{className:"px-4 py-2 text-sm text-right text-slate-900 dark:text-white",children:o(s.price)}),e.jsx("td",{className:"px-4 py-2 text-sm text-right font-medium text-slate-900 dark:text-white",children:o(s.value)})]},s.id))})]})})]})]}),g==="payroll"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-lg p-6 border border-blue-200 dark:border-blue-800",children:[e.jsx("div",{className:"text-sm font-medium text-blue-700 dark:text-blue-400 mb-2",children:e.jsxs("span",{className:"inline-flex items-center gap-1",children:[e.jsx(F,{className:"w-4 h-4"})," T·ªïng l∆∞∆°ng"]})}),e.jsx("div",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400",children:o(R.totalSalary).replace("‚Ç´","")}),e.jsx("div",{className:"text-xs text-blue-600 dark:text-blue-400 mt-1",children:"ƒë"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 rounded-lg p-6 border border-green-200 dark:border-green-800",children:[e.jsx("div",{className:"text-sm font-medium text-green-700 dark:text-green-400 mb-2",children:e.jsxs("span",{className:"inline-flex items-center gap-1",children:[e.jsx(le,{className:"w-4 h-4"})," ƒê√£ thanh to√°n"]})}),e.jsx("div",{className:"text-3xl font-bold text-green-600 dark:text-green-400",children:o(R.paidSalary).replace("‚Ç´","")}),e.jsx("div",{className:"text-xs text-green-600 dark:text-green-400 mt-1",children:"ƒë"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-red-50 to-rose-50 dark:from-red-900/20 dark:to-rose-900/20 rounded-lg p-6 border border-red-200 dark:border-red-800",children:[e.jsx("div",{className:"text-sm font-medium text-red-700 dark:text-red-400 mb-2",children:"‚è≥ Ch∆∞a thanh to√°n"}),e.jsx("div",{className:"text-3xl font-bold text-red-600 dark:text-red-400",children:o(R.unpaidSalary).replace("‚Ç´","")}),e.jsx("div",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:"ƒë"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-fuchsia-50 dark:from-purple-900/20 dark:to-fuchsia-900/20 rounded-lg p-6 border border-purple-200 dark:border-purple-800",children:[e.jsx("div",{className:"text-sm font-medium text-purple-700 dark:text-purple-400 mb-2",children:e.jsxs("span",{className:"inline-flex items-center gap-1",children:[e.jsx(X,{className:"w-4 h-4"})," S·ªë nh√¢n vi√™n"]})}),e.jsx("div",{className:"text-3xl font-bold text-purple-600 dark:text-purple-400",children:R.employeeCount}),e.jsx("div",{className:"text-xs text-purple-600 dark:text-purple-400 mt-1",children:"nh√¢n vi√™n"})]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700",children:[e.jsx("div",{className:"px-6 py-4 border-b border-slate-200 dark:border-slate-700",children:e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:"Chi ti·∫øt l∆∞∆°ng"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-slate-700 dark:text-slate-300",children:"Th√°ng"}),e.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-slate-700 dark:text-slate-300",children:"Nh√¢n vi√™n"}),e.jsx("th",{className:"px-4 py-2 text-right text-sm font-medium text-slate-700 dark:text-slate-300",children:"L∆∞∆°ng th·ª±c nh·∫≠n"}),e.jsx("th",{className:"px-4 py-2 text-center text-sm font-medium text-slate-700 dark:text-slate-300",children:"Tr·∫°ng th√°i"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:R.records.map(s=>{const d=u.find(w=>w.id===s.employeeId);return e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-2 text-sm text-slate-900 dark:text-white",children:s.month}),e.jsx("td",{className:"px-4 py-2 text-sm text-slate-900 dark:text-white",children:(d==null?void 0:d.name)||"N/A"}),e.jsx("td",{className:"px-4 py-2 text-sm text-right font-medium text-slate-900 dark:text-white",children:o(s.netSalary)}),e.jsx("td",{className:"px-4 py-2 text-center",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${s.paymentStatus==="paid"?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400"}`,children:s.paymentStatus==="paid"?"ƒê√£ tr·∫£":"Ch∆∞a tr·∫£"})})]},s.id)})})]})})]})]}),g==="debt"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 rounded-lg p-6 border border-green-200 dark:border-green-800",children:[e.jsx("div",{className:"text-sm font-medium text-green-700 dark:text-green-400 mb-2",children:"N·ª£ kh√°ch h√†ng"}),e.jsx("div",{className:"text-3xl font-bold text-green-600 dark:text-green-400",children:H.customerDebts.length}),e.jsx("div",{className:"text-xs text-green-600 dark:text-green-400 mt-1",children:"ƒë"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-red-50 to-rose-50 dark:from-red-900/20 dark:to-rose-900/20 rounded-lg p-6 border border-red-200 dark:border-red-800",children:[e.jsx("div",{className:"text-sm font-medium text-red-700 dark:text-red-400 mb-2",children:"N·ª£ nh√† cung c·∫•p"}),e.jsx("div",{className:"text-3xl font-bold text-red-600 dark:text-red-400",children:H.supplierDebts.length}),e.jsx("div",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:"ƒë"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-lg p-6 border border-blue-200 dark:border-blue-800",children:[e.jsx("div",{className:"text-sm font-medium text-blue-700 dark:text-blue-400 mb-2",children:"C√¥ng n·ª£ r√≤ng"}),e.jsx("div",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400",children:"0"}),e.jsx("div",{className:"text-xs text-blue-600 dark:text-blue-400 mt-1",children:"ƒë"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-800 dark:to-slate-900 rounded-lg p-6 border border-slate-200 dark:border-slate-700",children:[e.jsxs("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4 flex items-center gap-2",children:[e.jsx(de,{className:"w-4 h-4 text-green-600 dark:text-green-400"}),"C√¥ng n·ª£ kh√°ch h√†ng"]}),e.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:H.customerDebts.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-4xl mb-3",children:"‚úì"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Kh√¥ng c√≥ c√¥ng n·ª£"})]}):H.customerDebts.map((s,d)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white dark:bg-slate-700 rounded-lg hover:shadow-md transition-shadow",children:[e.jsx("span",{className:"font-medium text-slate-900 dark:text-white",children:s.name}),e.jsx("span",{className:"text-green-600 dark:text-green-400 font-bold",children:o(s.debt)})]},d))})]}),e.jsxs("div",{className:"bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-800 dark:to-slate-900 rounded-lg p-6 border border-slate-200 dark:border-slate-700",children:[e.jsxs("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"text-red-600 dark:text-red-400",children:"üè¢"}),"C√¥ng n·ª£ nh√† cung c·∫•p"]}),e.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:H.supplierDebts.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-4xl mb-3",children:"‚úì"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Kh√¥ng c√≥ c√¥ng n·ª£"})]}):H.supplierDebts.map((s,d)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white dark:bg-slate-700 rounded-lg hover:shadow-md transition-shadow",children:[e.jsx("span",{className:"font-medium text-slate-900 dark:text-white",children:s.name}),e.jsx("span",{className:"text-red-600 dark:text-red-400 font-bold",children:o(s.debt)})]},d))})]})]})]})]})]})};export{ve as default};
