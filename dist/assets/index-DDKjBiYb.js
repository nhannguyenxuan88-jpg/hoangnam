var sG=Object.defineProperty;var $8=e=>{throw TypeError(e)};var iG=(e,t,r)=>t in e?sG(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var Aa=(e,t,r)=>iG(e,typeof t!="symbol"?t+"":t,r),a4=(e,t,r)=>t.has(e)||$8("Cannot "+r);var Qe=(e,t,r)=>(a4(e,t,"read from private field"),r?r.call(e):t.get(e)),fn=(e,t,r)=>t.has(e)?$8("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),Fr=(e,t,r,n)=>(a4(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),ea=(e,t,r)=>(a4(e,t,"access private method"),r);var t2=(e,t,r,n)=>({set _(a){Fr(e,t,a,r)},get _(){return Qe(e,t,n)}});function r6(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in e)){const s=Object.getOwnPropertyDescriptor(n,a);s&&Object.defineProperty(e,a,s.get?s:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function r(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(a){if(a.ep)return;a.ep=!0;const s=r(a);fetch(a.href,s)}})();var r2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function gd(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function lG(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var a=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,a.get?a:{enumerable:!0,get:function(){return e[n]}})}),r}var s4={exports:{}},Qp={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var V8;function oG(){if(V8)return Qp;V8=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(n,a,s){var l=null;if(s!==void 0&&(l=""+s),a.key!==void 0&&(l=""+a.key),"key"in a){s={};for(var o in a)o!=="key"&&(s[o]=a[o])}else s=a;return a=s.ref,{$$typeof:e,type:n,key:l,ref:a!==void 0?a:null,props:s}}return Qp.Fragment=t,Qp.jsx=r,Qp.jsxs=r,Qp}var W8;function cG(){return W8||(W8=1,s4.exports=oG()),s4.exports}var i=cG(),i4={exports:{}},$n={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var K8;function dG(){if(K8)return $n;K8=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),l=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),p=Symbol.for("react.activity"),y=Symbol.iterator;function g(fe){return fe===null||typeof fe!="object"?null:(fe=y&&fe[y]||fe["@@iterator"],typeof fe=="function"?fe:null)}var N={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,k={};function S(fe,F,te){this.props=fe,this.context=F,this.refs=k,this.updater=te||N}S.prototype.isReactComponent={},S.prototype.setState=function(fe,F){if(typeof fe!="object"&&typeof fe!="function"&&fe!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,fe,F,"setState")},S.prototype.forceUpdate=function(fe){this.updater.enqueueForceUpdate(this,fe,"forceUpdate")};function O(){}O.prototype=S.prototype;function E(fe,F,te){this.props=fe,this.context=F,this.refs=k,this.updater=te||N}var D=E.prototype=new O;D.constructor=E,w(D,S.prototype),D.isPureReactComponent=!0;var H=Array.isArray;function W(){}var R={H:null,A:null,T:null,S:null},z=Object.prototype.hasOwnProperty;function U(fe,F,te){var Y=te.ref;return{$$typeof:e,type:fe,key:F,ref:Y!==void 0?Y:null,props:te}}function Z(fe,F){return U(fe.type,F,fe.props)}function q(fe){return typeof fe=="object"&&fe!==null&&fe.$$typeof===e}function K(fe){var F={"=":"=0",":":"=2"};return"$"+fe.replace(/[=:]/g,function(te){return F[te]})}var Q=/\/+/g;function re(fe,F){return typeof fe=="object"&&fe!==null&&fe.key!=null?K(""+fe.key):F.toString(36)}function ae(fe){switch(fe.status){case"fulfilled":return fe.value;case"rejected":throw fe.reason;default:switch(typeof fe.status=="string"?fe.then(W,W):(fe.status="pending",fe.then(function(F){fe.status==="pending"&&(fe.status="fulfilled",fe.value=F)},function(F){fe.status==="pending"&&(fe.status="rejected",fe.reason=F)})),fe.status){case"fulfilled":return fe.value;case"rejected":throw fe.reason}}throw fe}function de(fe,F,te,Y,ne){var ee=typeof fe;(ee==="undefined"||ee==="boolean")&&(fe=null);var Ce=!1;if(fe===null)Ce=!0;else switch(ee){case"bigint":case"string":case"number":Ce=!0;break;case"object":switch(fe.$$typeof){case e:case t:Ce=!0;break;case f:return Ce=fe._init,de(Ce(fe._payload),F,te,Y,ne)}}if(Ce)return ne=ne(fe),Ce=Y===""?"."+re(fe,0):Y,H(ne)?(te="",Ce!=null&&(te=Ce.replace(Q,"$&/")+"/"),de(ne,F,te,"",function(je){return je})):ne!=null&&(q(ne)&&(ne=Z(ne,te+(ne.key==null||fe&&fe.key===ne.key?"":(""+ne.key).replace(Q,"$&/")+"/")+Ce)),F.push(ne)),1;Ce=0;var me=Y===""?".":Y+":";if(H(fe))for(var se=0;se<fe.length;se++)Y=fe[se],ee=me+re(Y,se),Ce+=de(Y,F,te,ee,ne);else if(se=g(fe),typeof se=="function")for(fe=se.call(fe),se=0;!(Y=fe.next()).done;)Y=Y.value,ee=me+re(Y,se++),Ce+=de(Y,F,te,ee,ne);else if(ee==="object"){if(typeof fe.then=="function")return de(ae(fe),F,te,Y,ne);throw F=String(fe),Error("Objects are not valid as a React child (found: "+(F==="[object Object]"?"object with keys {"+Object.keys(fe).join(", ")+"}":F)+"). If you meant to render a collection of children, use an array instead.")}return Ce}function he(fe,F,te){if(fe==null)return fe;var Y=[],ne=0;return de(fe,Y,"","",function(ee){return F.call(te,ee,ne++)}),Y}function Se(fe){if(fe._status===-1){var F=fe._result;F=F(),F.then(function(te){(fe._status===0||fe._status===-1)&&(fe._status=1,fe._result=te)},function(te){(fe._status===0||fe._status===-1)&&(fe._status=2,fe._result=te)}),fe._status===-1&&(fe._status=0,fe._result=F)}if(fe._status===1)return fe._result.default;throw fe._result}var ke=typeof reportError=="function"?reportError:function(fe){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var F=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof fe=="object"&&fe!==null&&typeof fe.message=="string"?String(fe.message):String(fe),error:fe});if(!window.dispatchEvent(F))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",fe);return}console.error(fe)},Le={map:he,forEach:function(fe,F,te){he(fe,function(){F.apply(this,arguments)},te)},count:function(fe){var F=0;return he(fe,function(){F++}),F},toArray:function(fe){return he(fe,function(F){return F})||[]},only:function(fe){if(!q(fe))throw Error("React.Children.only expected to receive a single React element child.");return fe}};return $n.Activity=p,$n.Children=Le,$n.Component=S,$n.Fragment=r,$n.Profiler=a,$n.PureComponent=E,$n.StrictMode=n,$n.Suspense=c,$n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,$n.__COMPILER_RUNTIME={__proto__:null,c:function(fe){return R.H.useMemoCache(fe)}},$n.cache=function(fe){return function(){return fe.apply(null,arguments)}},$n.cacheSignal=function(){return null},$n.cloneElement=function(fe,F,te){if(fe==null)throw Error("The argument must be a React element, but you passed "+fe+".");var Y=w({},fe.props),ne=fe.key;if(F!=null)for(ee in F.key!==void 0&&(ne=""+F.key),F)!z.call(F,ee)||ee==="key"||ee==="__self"||ee==="__source"||ee==="ref"&&F.ref===void 0||(Y[ee]=F[ee]);var ee=arguments.length-2;if(ee===1)Y.children=te;else if(1<ee){for(var Ce=Array(ee),me=0;me<ee;me++)Ce[me]=arguments[me+2];Y.children=Ce}return U(fe.type,ne,Y)},$n.createContext=function(fe){return fe={$$typeof:l,_currentValue:fe,_currentValue2:fe,_threadCount:0,Provider:null,Consumer:null},fe.Provider=fe,fe.Consumer={$$typeof:s,_context:fe},fe},$n.createElement=function(fe,F,te){var Y,ne={},ee=null;if(F!=null)for(Y in F.key!==void 0&&(ee=""+F.key),F)z.call(F,Y)&&Y!=="key"&&Y!=="__self"&&Y!=="__source"&&(ne[Y]=F[Y]);var Ce=arguments.length-2;if(Ce===1)ne.children=te;else if(1<Ce){for(var me=Array(Ce),se=0;se<Ce;se++)me[se]=arguments[se+2];ne.children=me}if(fe&&fe.defaultProps)for(Y in Ce=fe.defaultProps,Ce)ne[Y]===void 0&&(ne[Y]=Ce[Y]);return U(fe,ee,ne)},$n.createRef=function(){return{current:null}},$n.forwardRef=function(fe){return{$$typeof:o,render:fe}},$n.isValidElement=q,$n.lazy=function(fe){return{$$typeof:f,_payload:{_status:-1,_result:fe},_init:Se}},$n.memo=function(fe,F){return{$$typeof:d,type:fe,compare:F===void 0?null:F}},$n.startTransition=function(fe){var F=R.T,te={};R.T=te;try{var Y=fe(),ne=R.S;ne!==null&&ne(te,Y),typeof Y=="object"&&Y!==null&&typeof Y.then=="function"&&Y.then(W,ke)}catch(ee){ke(ee)}finally{F!==null&&te.types!==null&&(F.types=te.types),R.T=F}},$n.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},$n.use=function(fe){return R.H.use(fe)},$n.useActionState=function(fe,F,te){return R.H.useActionState(fe,F,te)},$n.useCallback=function(fe,F){return R.H.useCallback(fe,F)},$n.useContext=function(fe){return R.H.useContext(fe)},$n.useDebugValue=function(){},$n.useDeferredValue=function(fe,F){return R.H.useDeferredValue(fe,F)},$n.useEffect=function(fe,F){return R.H.useEffect(fe,F)},$n.useEffectEvent=function(fe){return R.H.useEffectEvent(fe)},$n.useId=function(){return R.H.useId()},$n.useImperativeHandle=function(fe,F,te){return R.H.useImperativeHandle(fe,F,te)},$n.useInsertionEffect=function(fe,F){return R.H.useInsertionEffect(fe,F)},$n.useLayoutEffect=function(fe,F){return R.H.useLayoutEffect(fe,F)},$n.useMemo=function(fe,F){return R.H.useMemo(fe,F)},$n.useOptimistic=function(fe,F){return R.H.useOptimistic(fe,F)},$n.useReducer=function(fe,F,te){return R.H.useReducer(fe,F,te)},$n.useRef=function(fe){return R.H.useRef(fe)},$n.useState=function(fe){return R.H.useState(fe)},$n.useSyncExternalStore=function(fe,F,te){return R.H.useSyncExternalStore(fe,F,te)},$n.useTransition=function(){return R.H.useTransition()},$n.version="19.2.0",$n}var G8;function X1(){return G8||(G8=1,i4.exports=dG()),i4.exports}var T=X1();const ua=gd(T),uG=r6({__proto__:null,default:ua},[T]);var l4={exports:{}},Jp={},o4={exports:{}},c4={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var X8;function hG(){return X8||(X8=1,(function(e){function t(de,he){var Se=de.length;de.push(he);e:for(;0<Se;){var ke=Se-1>>>1,Le=de[ke];if(0<a(Le,he))de[ke]=he,de[Se]=Le,Se=ke;else break e}}function r(de){return de.length===0?null:de[0]}function n(de){if(de.length===0)return null;var he=de[0],Se=de.pop();if(Se!==he){de[0]=Se;e:for(var ke=0,Le=de.length,fe=Le>>>1;ke<fe;){var F=2*(ke+1)-1,te=de[F],Y=F+1,ne=de[Y];if(0>a(te,Se))Y<Le&&0>a(ne,te)?(de[ke]=ne,de[Y]=Se,ke=Y):(de[ke]=te,de[F]=Se,ke=F);else if(Y<Le&&0>a(ne,Se))de[ke]=ne,de[Y]=Se,ke=Y;else break e}}return he}function a(de,he){var Se=de.sortIndex-he.sortIndex;return Se!==0?Se:de.id-he.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var l=Date,o=l.now();e.unstable_now=function(){return l.now()-o}}var c=[],d=[],f=1,p=null,y=3,g=!1,N=!1,w=!1,k=!1,S=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;function D(de){for(var he=r(d);he!==null;){if(he.callback===null)n(d);else if(he.startTime<=de)n(d),he.sortIndex=he.expirationTime,t(c,he);else break;he=r(d)}}function H(de){if(w=!1,D(de),!N)if(r(c)!==null)N=!0,W||(W=!0,K());else{var he=r(d);he!==null&&ae(H,he.startTime-de)}}var W=!1,R=-1,z=5,U=-1;function Z(){return k?!0:!(e.unstable_now()-U<z)}function q(){if(k=!1,W){var de=e.unstable_now();U=de;var he=!0;try{e:{N=!1,w&&(w=!1,O(R),R=-1),g=!0;var Se=y;try{t:{for(D(de),p=r(c);p!==null&&!(p.expirationTime>de&&Z());){var ke=p.callback;if(typeof ke=="function"){p.callback=null,y=p.priorityLevel;var Le=ke(p.expirationTime<=de);if(de=e.unstable_now(),typeof Le=="function"){p.callback=Le,D(de),he=!0;break t}p===r(c)&&n(c),D(de)}else n(c);p=r(c)}if(p!==null)he=!0;else{var fe=r(d);fe!==null&&ae(H,fe.startTime-de),he=!1}}break e}finally{p=null,y=Se,g=!1}he=void 0}}finally{he?K():W=!1}}}var K;if(typeof E=="function")K=function(){E(q)};else if(typeof MessageChannel<"u"){var Q=new MessageChannel,re=Q.port2;Q.port1.onmessage=q,K=function(){re.postMessage(null)}}else K=function(){S(q,0)};function ae(de,he){R=S(function(){de(e.unstable_now())},he)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(de){de.callback=null},e.unstable_forceFrameRate=function(de){0>de||125<de?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<de?Math.floor(1e3/de):5},e.unstable_getCurrentPriorityLevel=function(){return y},e.unstable_next=function(de){switch(y){case 1:case 2:case 3:var he=3;break;default:he=y}var Se=y;y=he;try{return de()}finally{y=Se}},e.unstable_requestPaint=function(){k=!0},e.unstable_runWithPriority=function(de,he){switch(de){case 1:case 2:case 3:case 4:case 5:break;default:de=3}var Se=y;y=de;try{return he()}finally{y=Se}},e.unstable_scheduleCallback=function(de,he,Se){var ke=e.unstable_now();switch(typeof Se=="object"&&Se!==null?(Se=Se.delay,Se=typeof Se=="number"&&0<Se?ke+Se:ke):Se=ke,de){case 1:var Le=-1;break;case 2:Le=250;break;case 5:Le=1073741823;break;case 4:Le=1e4;break;default:Le=5e3}return Le=Se+Le,de={id:f++,callback:he,priorityLevel:de,startTime:Se,expirationTime:Le,sortIndex:-1},Se>ke?(de.sortIndex=Se,t(d,de),r(c)===null&&de===r(d)&&(w?(O(R),R=-1):w=!0,ae(H,Se-ke))):(de.sortIndex=Le,t(c,de),N||g||(N=!0,W||(W=!0,K()))),de},e.unstable_shouldYield=Z,e.unstable_wrapCallback=function(de){var he=y;return function(){var Se=y;y=he;try{return de.apply(this,arguments)}finally{y=Se}}}})(c4)),c4}var Y8;function fG(){return Y8||(Y8=1,o4.exports=hG()),o4.exports}var d4={exports:{}},Hl={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Z8;function mG(){if(Z8)return Hl;Z8=1;var e=X1();function t(c){var d="https://react.dev/errors/"+c;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)d+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+c+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var n={d:{f:r,r:function(){throw Error(t(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},a=Symbol.for("react.portal");function s(c,d,f){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:p==null?null:""+p,children:c,containerInfo:d,implementation:f}}var l=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(c,d){if(c==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return Hl.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,Hl.createPortal=function(c,d){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(t(299));return s(c,d,null,f)},Hl.flushSync=function(c){var d=l.T,f=n.p;try{if(l.T=null,n.p=2,c)return c()}finally{l.T=d,n.p=f,n.d.f()}},Hl.preconnect=function(c,d){typeof c=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,n.d.C(c,d))},Hl.prefetchDNS=function(c){typeof c=="string"&&n.d.D(c)},Hl.preinit=function(c,d){if(typeof c=="string"&&d&&typeof d.as=="string"){var f=d.as,p=o(f,d.crossOrigin),y=typeof d.integrity=="string"?d.integrity:void 0,g=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;f==="style"?n.d.S(c,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:p,integrity:y,fetchPriority:g}):f==="script"&&n.d.X(c,{crossOrigin:p,integrity:y,fetchPriority:g,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},Hl.preinitModule=function(c,d){if(typeof c=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var f=o(d.as,d.crossOrigin);n.d.M(c,{crossOrigin:f,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&n.d.M(c)},Hl.preload=function(c,d){if(typeof c=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var f=d.as,p=o(f,d.crossOrigin);n.d.L(c,f,{crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},Hl.preloadModule=function(c,d){if(typeof c=="string")if(d){var f=o(d.as,d.crossOrigin);n.d.m(c,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:f,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else n.d.m(c)},Hl.requestFormReset=function(c){n.d.r(c)},Hl.unstable_batchedUpdates=function(c,d){return c(d)},Hl.useFormState=function(c,d,f){return l.H.useFormState(c,d,f)},Hl.useFormStatus=function(){return l.H.useHostTransitionStatus()},Hl.version="19.2.0",Hl}var Q8;function OL(){if(Q8)return d4.exports;Q8=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),d4.exports=mG(),d4.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var J8;function xG(){if(J8)return Jp;J8=1;var e=fG(),t=X1(),r=OL();function n(u){var m="https://react.dev/errors/"+u;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)m+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+u+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(u){return!(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)}function s(u){var m=u,v=u;if(u.alternate)for(;m.return;)m=m.return;else{u=m;do m=u,(m.flags&4098)!==0&&(v=m.return),u=m.return;while(u)}return m.tag===3?v:null}function l(u){if(u.tag===13){var m=u.memoizedState;if(m===null&&(u=u.alternate,u!==null&&(m=u.memoizedState)),m!==null)return m.dehydrated}return null}function o(u){if(u.tag===31){var m=u.memoizedState;if(m===null&&(u=u.alternate,u!==null&&(m=u.memoizedState)),m!==null)return m.dehydrated}return null}function c(u){if(s(u)!==u)throw Error(n(188))}function d(u){var m=u.alternate;if(!m){if(m=s(u),m===null)throw Error(n(188));return m!==u?null:u}for(var v=u,C=m;;){var M=v.return;if(M===null)break;var V=M.alternate;if(V===null){if(C=M.return,C!==null){v=C;continue}break}if(M.child===V.child){for(V=M.child;V;){if(V===v)return c(M),u;if(V===C)return c(M),m;V=V.sibling}throw Error(n(188))}if(v.return!==C.return)v=M,C=V;else{for(var ue=!1,Re=M.child;Re;){if(Re===v){ue=!0,v=M,C=V;break}if(Re===C){ue=!0,C=M,v=V;break}Re=Re.sibling}if(!ue){for(Re=V.child;Re;){if(Re===v){ue=!0,v=V,C=M;break}if(Re===C){ue=!0,C=V,v=M;break}Re=Re.sibling}if(!ue)throw Error(n(189))}}if(v.alternate!==C)throw Error(n(190))}if(v.tag!==3)throw Error(n(188));return v.stateNode.current===v?u:m}function f(u){var m=u.tag;if(m===5||m===26||m===27||m===6)return u;for(u=u.child;u!==null;){if(m=f(u),m!==null)return m;u=u.sibling}return null}var p=Object.assign,y=Symbol.for("react.element"),g=Symbol.for("react.transitional.element"),N=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),O=Symbol.for("react.consumer"),E=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),H=Symbol.for("react.suspense"),W=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),z=Symbol.for("react.lazy"),U=Symbol.for("react.activity"),Z=Symbol.for("react.memo_cache_sentinel"),q=Symbol.iterator;function K(u){return u===null||typeof u!="object"?null:(u=q&&u[q]||u["@@iterator"],typeof u=="function"?u:null)}var Q=Symbol.for("react.client.reference");function re(u){if(u==null)return null;if(typeof u=="function")return u.$$typeof===Q?null:u.displayName||u.name||null;if(typeof u=="string")return u;switch(u){case w:return"Fragment";case S:return"Profiler";case k:return"StrictMode";case H:return"Suspense";case W:return"SuspenseList";case U:return"Activity"}if(typeof u=="object")switch(u.$$typeof){case N:return"Portal";case E:return u.displayName||"Context";case O:return(u._context.displayName||"Context")+".Consumer";case D:var m=u.render;return u=u.displayName,u||(u=m.displayName||m.name||"",u=u!==""?"ForwardRef("+u+")":"ForwardRef"),u;case R:return m=u.displayName||null,m!==null?m:re(u.type)||"Memo";case z:m=u._payload,u=u._init;try{return re(u(m))}catch{}}return null}var ae=Array.isArray,de=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,he=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Se={pending:!1,data:null,method:null,action:null},ke=[],Le=-1;function fe(u){return{current:u}}function F(u){0>Le||(u.current=ke[Le],ke[Le]=null,Le--)}function te(u,m){Le++,ke[Le]=u.current,u.current=m}var Y=fe(null),ne=fe(null),ee=fe(null),Ce=fe(null);function me(u,m){switch(te(ee,m),te(ne,u),te(Y,null),m.nodeType){case 9:case 11:u=(u=m.documentElement)&&(u=u.namespaceURI)?f8(u):0;break;default:if(u=m.tagName,m=m.namespaceURI)m=f8(m),u=m8(m,u);else switch(u){case"svg":u=1;break;case"math":u=2;break;default:u=0}}F(Y),te(Y,u)}function se(){F(Y),F(ne),F(ee)}function je(u){u.memoizedState!==null&&te(Ce,u);var m=Y.current,v=m8(m,u.type);m!==v&&(te(ne,u),te(Y,v))}function be(u){ne.current===u&&(F(Y),F(ne)),Ce.current===u&&(F(Ce),Gp._currentValue=Se)}var ie,Te;function De(u){if(ie===void 0)try{throw Error()}catch(v){var m=v.stack.trim().match(/\n( *(at )?)/);ie=m&&m[1]||"",Te=-1<v.stack.indexOf(`
    at`)?" (<anonymous>)":-1<v.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ie+u+Te}var ye=!1;function rt(u,m){if(!u||ye)return"";ye=!0;var v=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var C={DetermineComponentFrameRoot:function(){try{if(m){var nr=function(){throw Error()};if(Object.defineProperty(nr.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(nr,[])}catch(Dt){var Et=Dt}Reflect.construct(u,[],nr)}else{try{nr.call()}catch(Dt){Et=Dt}u.call(nr.prototype)}}else{try{throw Error()}catch(Dt){Et=Dt}(nr=u())&&typeof nr.catch=="function"&&nr.catch(function(){})}}catch(Dt){if(Dt&&Et&&typeof Dt.stack=="string")return[Dt.stack,Et.stack]}return[null,null]}};C.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var M=Object.getOwnPropertyDescriptor(C.DetermineComponentFrameRoot,"name");M&&M.configurable&&Object.defineProperty(C.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var V=C.DetermineComponentFrameRoot(),ue=V[0],Re=V[1];if(ue&&Re){var Ze=ue.split(`
`),St=Re.split(`
`);for(M=C=0;C<Ze.length&&!Ze[C].includes("DetermineComponentFrameRoot");)C++;for(;M<St.length&&!St[M].includes("DetermineComponentFrameRoot");)M++;if(C===Ze.length||M===St.length)for(C=Ze.length-1,M=St.length-1;1<=C&&0<=M&&Ze[C]!==St[M];)M--;for(;1<=C&&0<=M;C--,M--)if(Ze[C]!==St[M]){if(C!==1||M!==1)do if(C--,M--,0>M||Ze[C]!==St[M]){var $t=`
`+Ze[C].replace(" at new "," at ");return u.displayName&&$t.includes("<anonymous>")&&($t=$t.replace("<anonymous>",u.displayName)),$t}while(1<=C&&0<=M);break}}}finally{ye=!1,Error.prepareStackTrace=v}return(v=u?u.displayName||u.name:"")?De(v):""}function st(u,m){switch(u.tag){case 26:case 27:case 5:return De(u.type);case 16:return De("Lazy");case 13:return u.child!==m&&m!==null?De("Suspense Fallback"):De("Suspense");case 19:return De("SuspenseList");case 0:case 15:return rt(u.type,!1);case 11:return rt(u.type.render,!1);case 1:return rt(u.type,!0);case 31:return De("Activity");default:return""}}function dt(u){try{var m="",v=null;do m+=st(u,v),v=u,u=u.return;while(u);return m}catch(C){return`
Error generating stack: `+C.message+`
`+C.stack}}var et=Object.prototype.hasOwnProperty,lt=e.unstable_scheduleCallback,Ve=e.unstable_cancelCallback,Vt=e.unstable_shouldYield,Mt=e.unstable_requestPaint,mr=e.unstable_now,xr=e.unstable_getCurrentPriorityLevel,sr=e.unstable_ImmediatePriority,Ir=e.unstable_UserBlockingPriority,er=e.unstable_NormalPriority,Xt=e.unstable_LowPriority,Gt=e.unstable_IdlePriority,ur=e.log,wr=e.unstable_setDisableYieldValue,lr=null,mt=null;function kr(u){if(typeof ur=="function"&&wr(u),mt&&typeof mt.setStrictMode=="function")try{mt.setStrictMode(lr,u)}catch{}}var Ke=Math.clz32?Math.clz32:tr,vt=Math.log,Kt=Math.LN2;function tr(u){return u>>>=0,u===0?32:31-(vt(u)/Kt|0)|0}var Pr=256,Nr=262144,Ge=4194304;function Ot(u){var m=u&42;if(m!==0)return m;switch(u&-u){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return u&261888;case 262144:case 524288:case 1048576:case 2097152:return u&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return u&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return u}}function hr(u,m,v){var C=u.pendingLanes;if(C===0)return 0;var M=0,V=u.suspendedLanes,ue=u.pingedLanes;u=u.warmLanes;var Re=C&134217727;return Re!==0?(C=Re&~V,C!==0?M=Ot(C):(ue&=Re,ue!==0?M=Ot(ue):v||(v=Re&~u,v!==0&&(M=Ot(v))))):(Re=C&~V,Re!==0?M=Ot(Re):ue!==0?M=Ot(ue):v||(v=C&~u,v!==0&&(M=Ot(v)))),M===0?0:m!==0&&m!==M&&(m&V)===0&&(V=M&-M,v=m&-m,V>=v||V===32&&(v&4194048)!==0)?m:M}function $r(u,m){return(u.pendingLanes&~(u.suspendedLanes&~u.pingedLanes)&m)===0}function Dr(u,m){switch(u){case 1:case 2:case 4:case 8:case 64:return m+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return m+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Yt(){var u=Ge;return Ge<<=1,(Ge&62914560)===0&&(Ge=4194304),u}function Mr(u){for(var m=[],v=0;31>v;v++)m.push(u);return m}function We(u,m){u.pendingLanes|=m,m!==268435456&&(u.suspendedLanes=0,u.pingedLanes=0,u.warmLanes=0)}function Qt(u,m,v,C,M,V){var ue=u.pendingLanes;u.pendingLanes=v,u.suspendedLanes=0,u.pingedLanes=0,u.warmLanes=0,u.expiredLanes&=v,u.entangledLanes&=v,u.errorRecoveryDisabledLanes&=v,u.shellSuspendCounter=0;var Re=u.entanglements,Ze=u.expirationTimes,St=u.hiddenUpdates;for(v=ue&~v;0<v;){var $t=31-Ke(v),nr=1<<$t;Re[$t]=0,Ze[$t]=-1;var Et=St[$t];if(Et!==null)for(St[$t]=null,$t=0;$t<Et.length;$t++){var Dt=Et[$t];Dt!==null&&(Dt.lane&=-536870913)}v&=~nr}C!==0&&Cr(u,C,0),V!==0&&M===0&&u.tag!==0&&(u.suspendedLanes|=V&~(ue&~m))}function Cr(u,m,v){u.pendingLanes|=m,u.suspendedLanes&=~m;var C=31-Ke(m);u.entangledLanes|=m,u.entanglements[C]=u.entanglements[C]|1073741824|v&261930}function gr(u,m){var v=u.entangledLanes|=m;for(u=u.entanglements;v;){var C=31-Ke(v),M=1<<C;M&m|u[C]&m&&(u[C]|=m),v&=~M}}function _n(u,m){var v=m&-m;return v=(v&42)!==0?1:Rr(v),(v&(u.suspendedLanes|m))!==0?0:v}function Rr(u){switch(u){case 2:u=1;break;case 8:u=4;break;case 32:u=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:u=128;break;case 268435456:u=134217728;break;default:u=0}return u}function Sn(u){return u&=-u,2<u?8<u?(u&134217727)!==0?32:268435456:8:2}function we(){var u=he.p;return u!==0?u:(u=window.event,u===void 0?32:R8(u.type))}function Ne(u,m){var v=he.p;try{return he.p=u,m()}finally{he.p=v}}var Me=Math.random().toString(36).slice(2),le="__reactFiber$"+Me,ve="__reactProps$"+Me,Oe="__reactContainer$"+Me,nt="__reactEvents$"+Me,wt="__reactListeners$"+Me,ft="__reactHandles$"+Me,ht="__reactResources$"+Me,bt="__reactMarker$"+Me;function Ut(u){delete u[le],delete u[ve],delete u[nt],delete u[wt],delete u[ft]}function rr(u){var m=u[le];if(m)return m;for(var v=u.parentNode;v;){if(m=v[Oe]||v[le]){if(v=m.alternate,m.child!==null||v!==null&&v.child!==null)for(u=w8(u);u!==null;){if(v=u[le])return v;u=w8(u)}return m}u=v,v=u.parentNode}return null}function Jt(u){if(u=u[le]||u[Oe]){var m=u.tag;if(m===5||m===6||m===13||m===31||m===26||m===27||m===3)return u}return null}function dr(u){var m=u.tag;if(m===5||m===26||m===27||m===6)return u.stateNode;throw Error(n(33))}function pr(u){var m=u[ht];return m||(m=u[ht]={hoistableStyles:new Map,hoistableScripts:new Map}),m}function Ar(u){u[bt]=!0}var It=new Set,Un={};function en(u,m){Na(u,m),Na(u+"Capture",m)}function Na(u,m){for(Un[u]=m,u=0;u<m.length;u++)It.add(m[u])}var La=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),cn={},An={};function On(u){return et.call(An,u)?!0:et.call(cn,u)?!1:La.test(u)?An[u]=!0:(cn[u]=!0,!1)}function is(u,m,v){if(On(m))if(v===null)u.removeAttribute(m);else{switch(typeof v){case"undefined":case"function":case"symbol":u.removeAttribute(m);return;case"boolean":var C=m.toLowerCase().slice(0,5);if(C!=="data-"&&C!=="aria-"){u.removeAttribute(m);return}}u.setAttribute(m,""+v)}}function To(u,m,v){if(v===null)u.removeAttribute(m);else{switch(typeof v){case"undefined":case"function":case"symbol":case"boolean":u.removeAttribute(m);return}u.setAttribute(m,""+v)}}function ln(u,m,v,C){if(C===null)u.removeAttribute(v);else{switch(typeof C){case"undefined":case"function":case"symbol":case"boolean":u.removeAttribute(v);return}u.setAttributeNS(m,v,""+C)}}function ta(u){switch(typeof u){case"bigint":case"boolean":case"number":case"string":case"undefined":return u;case"object":return u;default:return""}}function el(u){var m=u.type;return(u=u.nodeName)&&u.toLowerCase()==="input"&&(m==="checkbox"||m==="radio")}function lo(u,m,v){var C=Object.getOwnPropertyDescriptor(u.constructor.prototype,m);if(!u.hasOwnProperty(m)&&typeof C<"u"&&typeof C.get=="function"&&typeof C.set=="function"){var M=C.get,V=C.set;return Object.defineProperty(u,m,{configurable:!0,get:function(){return M.call(this)},set:function(ue){v=""+ue,V.call(this,ue)}}),Object.defineProperty(u,m,{enumerable:C.enumerable}),{getValue:function(){return v},setValue:function(ue){v=""+ue},stopTracking:function(){u._valueTracker=null,delete u[m]}}}}function pa(u){if(!u._valueTracker){var m=el(u)?"checked":"value";u._valueTracker=lo(u,m,""+u[m])}}function at(u){if(!u)return!1;var m=u._valueTracker;if(!m)return!0;var v=m.getValue(),C="";return u&&(C=el(u)?u.checked?"true":"false":u.value),u=C,u!==v?(m.setValue(u),!0):!1}function cr(u){if(u=u||(typeof document<"u"?document:void 0),typeof u>"u")return null;try{return u.activeElement||u.body}catch{return u.body}}var _r=/[\n"\\]/g;function br(u){return u.replace(_r,function(m){return"\\"+m.charCodeAt(0).toString(16)+" "})}function on(u,m,v,C,M,V,ue,Re){u.name="",ue!=null&&typeof ue!="function"&&typeof ue!="symbol"&&typeof ue!="boolean"?u.type=ue:u.removeAttribute("type"),m!=null?ue==="number"?(m===0&&u.value===""||u.value!=m)&&(u.value=""+ta(m)):u.value!==""+ta(m)&&(u.value=""+ta(m)):ue!=="submit"&&ue!=="reset"||u.removeAttribute("value"),m!=null?Be(u,ue,ta(m)):v!=null?Be(u,ue,ta(v)):C!=null&&u.removeAttribute("value"),M==null&&V!=null&&(u.defaultChecked=!!V),M!=null&&(u.checked=M&&typeof M!="function"&&typeof M!="symbol"),Re!=null&&typeof Re!="function"&&typeof Re!="symbol"&&typeof Re!="boolean"?u.name=""+ta(Re):u.removeAttribute("name")}function ct(u,m,v,C,M,V,ue,Re){if(V!=null&&typeof V!="function"&&typeof V!="symbol"&&typeof V!="boolean"&&(u.type=V),m!=null||v!=null){if(!(V!=="submit"&&V!=="reset"||m!=null)){pa(u);return}v=v!=null?""+ta(v):"",m=m!=null?""+ta(m):v,Re||m===u.value||(u.value=m),u.defaultValue=m}C=C??M,C=typeof C!="function"&&typeof C!="symbol"&&!!C,u.checked=Re?u.checked:!!C,u.defaultChecked=!!C,ue!=null&&typeof ue!="function"&&typeof ue!="symbol"&&typeof ue!="boolean"&&(u.name=ue),pa(u)}function Be(u,m,v){m==="number"&&cr(u.ownerDocument)===u||u.defaultValue===""+v||(u.defaultValue=""+v)}function vr(u,m,v,C){if(u=u.options,m){m={};for(var M=0;M<v.length;M++)m["$"+v[M]]=!0;for(v=0;v<u.length;v++)M=m.hasOwnProperty("$"+u[v].value),u[v].selected!==M&&(u[v].selected=M),M&&C&&(u[v].defaultSelected=!0)}else{for(v=""+ta(v),m=null,M=0;M<u.length;M++){if(u[M].value===v){u[M].selected=!0,C&&(u[M].defaultSelected=!0);return}m!==null||u[M].disabled||(m=u[M])}m!==null&&(m.selected=!0)}}function Pn(u,m,v){if(m!=null&&(m=""+ta(m),m!==u.value&&(u.value=m),v==null)){u.defaultValue!==m&&(u.defaultValue=m);return}u.defaultValue=v!=null?""+ta(v):""}function qa(u,m,v,C){if(m==null){if(C!=null){if(v!=null)throw Error(n(92));if(ae(C)){if(1<C.length)throw Error(n(93));C=C[0]}v=C}v==null&&(v=""),m=v}v=ta(m),u.defaultValue=v,C=u.textContent,C===v&&C!==""&&C!==null&&(u.value=C),pa(u)}function ls(u,m){if(m){var v=u.firstChild;if(v&&v===u.lastChild&&v.nodeType===3){v.nodeValue=m;return}}u.textContent=m}var Ai=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Qn(u,m,v){var C=m.indexOf("--")===0;v==null||typeof v=="boolean"||v===""?C?u.setProperty(m,""):m==="float"?u.cssFloat="":u[m]="":C?u.setProperty(m,v):typeof v!="number"||v===0||Ai.has(m)?m==="float"?u.cssFloat=v:u[m]=(""+v).trim():u[m]=v+"px"}function Lr(u,m,v){if(m!=null&&typeof m!="object")throw Error(n(62));if(u=u.style,v!=null){for(var C in v)!v.hasOwnProperty(C)||m!=null&&m.hasOwnProperty(C)||(C.indexOf("--")===0?u.setProperty(C,""):C==="float"?u.cssFloat="":u[C]="");for(var M in m)C=m[M],m.hasOwnProperty(M)&&v[M]!==C&&Qn(u,M,C)}else for(var V in m)m.hasOwnProperty(V)&&Qn(u,V,m[V])}function na(u){if(u.indexOf("-")===-1)return!1;switch(u){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var oo=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),wd=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function wl(u){return wd.test(""+u)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":u}function tl(){}var co=null;function kd(u){return u=u.target||u.srcElement||window,u.correspondingUseElement&&(u=u.correspondingUseElement),u.nodeType===3?u.parentNode:u}var Br=null,Ll=null;function uo(u){var m=Jt(u);if(m&&(u=m.stateNode)){var v=u[ve]||null;e:switch(u=m.stateNode,m.type){case"input":if(on(u,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name),m=v.name,v.type==="radio"&&m!=null){for(v=u;v.parentNode;)v=v.parentNode;for(v=v.querySelectorAll('input[name="'+br(""+m)+'"][type="radio"]'),m=0;m<v.length;m++){var C=v[m];if(C!==u&&C.form===u.form){var M=C[ve]||null;if(!M)throw Error(n(90));on(C,M.value,M.defaultValue,M.defaultValue,M.checked,M.defaultChecked,M.type,M.name)}}for(m=0;m<v.length;m++)C=v[m],C.form===u.form&&at(C)}break e;case"textarea":Pn(u,v.value,v.defaultValue);break e;case"select":m=v.value,m!=null&&vr(u,!!v.multiple,m,!1)}}}var dn=!1;function oh(u,m,v){if(dn)return u(m,v);dn=!0;try{var C=u(m);return C}finally{if(dn=!1,(Br!==null||Ll!==null)&&(Iv(),Br&&(m=Br,u=Ll,Ll=Br=null,uo(m),u)))for(m=0;m<u.length;m++)uo(u[m])}}function un(u,m){var v=u.stateNode;if(v===null)return null;var C=v[ve]||null;if(C===null)return null;v=C[m];e:switch(m){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(C=!C.disabled)||(u=u.type,C=!(u==="button"||u==="input"||u==="select"||u==="textarea")),u=!C;break e;default:u=!1}if(u)return null;if(v&&typeof v!="function")throw Error(n(231,m,typeof v));return v}var la=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Yu=!1;if(la)try{var ic={};Object.defineProperty(ic,"passive",{get:function(){Yu=!0}}),window.addEventListener("test",ic,ic),window.removeEventListener("test",ic,ic)}catch{Yu=!1}var rl=null,kl=null,Oo=null;function ho(){if(Oo)return Oo;var u,m=kl,v=m.length,C,M="value"in rl?rl.value:rl.textContent,V=M.length;for(u=0;u<v&&m[u]===M[u];u++);var ue=v-u;for(C=1;C<=ue&&m[v-C]===M[V-C];C++);return Oo=M.slice(u,1<C?1-C:void 0)}function Nl(u){var m=u.keyCode;return"charCode"in u?(u=u.charCode,u===0&&m===13&&(u=13)):u=m,u===10&&(u=13),32<=u||u===13?u:0}function Po(){return!0}function Nd(){return!1}function xs(u){function m(v,C,M,V,ue){this._reactName=v,this._targetInst=M,this.type=C,this.nativeEvent=V,this.target=ue,this.currentTarget=null;for(var Re in u)u.hasOwnProperty(Re)&&(v=u[Re],this[Re]=v?v(V):V[Re]);return this.isDefaultPrevented=(V.defaultPrevented!=null?V.defaultPrevented:V.returnValue===!1)?Po:Nd,this.isPropagationStopped=Nd,this}return p(m.prototype,{preventDefault:function(){this.defaultPrevented=!0;var v=this.nativeEvent;v&&(v.preventDefault?v.preventDefault():typeof v.returnValue!="unknown"&&(v.returnValue=!1),this.isDefaultPrevented=Po)},stopPropagation:function(){var v=this.nativeEvent;v&&(v.stopPropagation?v.stopPropagation():typeof v.cancelBubble!="unknown"&&(v.cancelBubble=!0),this.isPropagationStopped=Po)},persist:function(){},isPersistent:Po}),m}var hi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(u){return u.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},os=xs(hi),Io=p({},hi,{view:0,detail:0}),_d=xs(Io),Mc,lc,Lc,Sd=p({},Io,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:wn,button:0,buttons:0,relatedTarget:function(u){return u.relatedTarget===void 0?u.fromElement===u.srcElement?u.toElement:u.fromElement:u.relatedTarget},movementX:function(u){return"movementX"in u?u.movementX:(u!==Lc&&(Lc&&u.type==="mousemove"?(Mc=u.screenX-Lc.screenX,lc=u.screenY-Lc.screenY):lc=Mc=0,Lc=u),Mc)},movementY:function(u){return"movementY"in u?u.movementY:lc}}),Gn=xs(Sd),Do=p({},Sd,{dataTransfer:0}),jd=xs(Do),fo=p({},Io,{relatedTarget:0}),oc=xs(fo),Tt=p({},hi,{animationName:0,elapsedTime:0,pseudoElement:0}),G=xs(Tt),ge=p({},hi,{clipboardData:function(u){return"clipboardData"in u?u.clipboardData:window.clipboardData}}),qe=xs(ge),Je=p({},hi,{data:0}),pt=xs(Je),zt={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ir={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},qr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Tr(u){var m=this.nativeEvent;return m.getModifierState?m.getModifierState(u):(u=qr[u])?!!m[u]:!1}function wn(){return Tr}var Hr=p({},Io,{key:function(u){if(u.key){var m=zt[u.key]||u.key;if(m!=="Unidentified")return m}return u.type==="keypress"?(u=Nl(u),u===13?"Enter":String.fromCharCode(u)):u.type==="keydown"||u.type==="keyup"?ir[u.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:wn,charCode:function(u){return u.type==="keypress"?Nl(u):0},keyCode:function(u){return u.type==="keydown"||u.type==="keyup"?u.keyCode:0},which:function(u){return u.type==="keypress"?Nl(u):u.type==="keydown"||u.type==="keyup"?u.keyCode:0}}),aa=xs(Hr),_a=p({},Sd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),jn=xs(_a),Or=p({},Io,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:wn}),Hs=xs(Or),In=p({},hi,{propertyName:0,elapsedTime:0,pseudoElement:0}),cs=xs(In),fi=p({},Sd,{deltaX:function(u){return"deltaX"in u?u.deltaX:"wheelDeltaX"in u?-u.wheelDeltaX:0},deltaY:function(u){return"deltaY"in u?u.deltaY:"wheelDeltaY"in u?-u.wheelDeltaY:"wheelDelta"in u?-u.wheelDelta:0},deltaZ:0,deltaMode:0}),nl=xs(fi),_l=p({},hi,{newState:0,oldState:0}),Rc=xs(_l),Fc=[9,13,27,32],Rl=la&&"CompositionEvent"in window,Fl=null;la&&"documentMode"in document&&(Fl=document.documentMode);var Bc=la&&"TextEvent"in window&&!Fl,Uc=la&&(!Rl||Fl&&8<Fl&&11>=Fl),ps=" ",Mo=!1;function zc(u,m){switch(u){case"keyup":return Fc.indexOf(m.keyCode)!==-1;case"keydown":return m.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Lo(u){return u=u.detail,typeof u=="object"&&"data"in u?u.data:null}var Ro=!1;function Sa(u,m){switch(u){case"compositionend":return Lo(m);case"keypress":return m.which!==32?null:(Mo=!0,ps);case"textInput":return u=m.data,u===ps&&Mo?null:u;default:return null}}function Bl(u,m){if(Ro)return u==="compositionend"||!Rl&&zc(u,m)?(u=ho(),Oo=kl=rl=null,Ro=!1,u):null;switch(u){case"paste":return null;case"keypress":if(!(m.ctrlKey||m.altKey||m.metaKey)||m.ctrlKey&&m.altKey){if(m.char&&1<m.char.length)return m.char;if(m.which)return String.fromCharCode(m.which)}return null;case"compositionend":return Uc&&m.locale!=="ko"?null:m.data;default:return null}}var mi={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function iu(u){var m=u&&u.nodeName&&u.nodeName.toLowerCase();return m==="input"?!!mi[u.type]:m==="textarea"}function gs(u,m,v,C){Br?Ll?Ll.push(C):Ll=[C]:Br=C,m=Uv(m,"onChange"),0<m.length&&(v=new os("onChange","change",null,v,C),u.push({event:v,listeners:m}))}var mo=null,xo=null;function Zu(u){l8(u,0)}function Ul(u){var m=dr(u);if(at(m))return u}function xi(u,m){if(u==="change")return m}var al=!1;if(la){var pi;if(la){var sl="oninput"in document;if(!sl){var zn=document.createElement("div");zn.setAttribute("oninput","return;"),sl=typeof zn.oninput=="function"}pi=sl}else pi=!1;al=pi&&(!document.documentMode||9<document.documentMode)}function zl(){mo&&(mo.detachEvent("onpropertychange",xe),xo=mo=null)}function xe(u){if(u.propertyName==="value"&&Ul(xo)){var m=[];gs(m,xo,u,kd(u)),oh(Zu,m)}}function h(u,m,v){u==="focusin"?(zl(),mo=m,xo=v,mo.attachEvent("onpropertychange",xe)):u==="focusout"&&zl()}function x(u){if(u==="selectionchange"||u==="keyup"||u==="keydown")return Ul(xo)}function b(u,m){if(u==="click")return Ul(m)}function _(u,m){if(u==="input"||u==="change")return Ul(m)}function j(u,m){return u===m&&(u!==0||1/u===1/m)||u!==u&&m!==m}var A=typeof Object.is=="function"?Object.is:j;function I(u,m){if(A(u,m))return!0;if(typeof u!="object"||u===null||typeof m!="object"||m===null)return!1;var v=Object.keys(u),C=Object.keys(m);if(v.length!==C.length)return!1;for(C=0;C<v.length;C++){var M=v[C];if(!et.call(m,M)||!A(u[M],m[M]))return!1}return!0}function B(u){for(;u&&u.firstChild;)u=u.firstChild;return u}function X(u,m){var v=B(u);u=0;for(var C;v;){if(v.nodeType===3){if(C=u+v.textContent.length,u<=m&&C>=m)return{node:v,offset:m-u};u=C}e:{for(;v;){if(v.nextSibling){v=v.nextSibling;break e}v=v.parentNode}v=void 0}v=B(v)}}function oe(u,m){return u&&m?u===m?!0:u&&u.nodeType===3?!1:m&&m.nodeType===3?oe(u,m.parentNode):"contains"in u?u.contains(m):u.compareDocumentPosition?!!(u.compareDocumentPosition(m)&16):!1:!1}function pe(u){u=u!=null&&u.ownerDocument!=null&&u.ownerDocument.defaultView!=null?u.ownerDocument.defaultView:window;for(var m=cr(u.document);m instanceof u.HTMLIFrameElement;){try{var v=typeof m.contentWindow.location.href=="string"}catch{v=!1}if(v)u=m.contentWindow;else break;m=cr(u.document)}return m}function Ae(u){var m=u&&u.nodeName&&u.nodeName.toLowerCase();return m&&(m==="input"&&(u.type==="text"||u.type==="search"||u.type==="tel"||u.type==="url"||u.type==="password")||m==="textarea"||u.contentEditable==="true")}var ze=la&&"documentMode"in document&&11>=document.documentMode,Xe=null,tt=null,xt=null,jt=!1;function qt(u,m,v){var C=v.window===v?v.document:v.nodeType===9?v:v.ownerDocument;jt||Xe==null||Xe!==cr(C)||(C=Xe,"selectionStart"in C&&Ae(C)?C={start:C.selectionStart,end:C.selectionEnd}:(C=(C.ownerDocument&&C.ownerDocument.defaultView||window).getSelection(),C={anchorNode:C.anchorNode,anchorOffset:C.anchorOffset,focusNode:C.focusNode,focusOffset:C.focusOffset}),xt&&I(xt,C)||(xt=C,C=Uv(tt,"onSelect"),0<C.length&&(m=new os("onSelect","select",null,m,v),u.push({event:m,listeners:C}),m.target=Xe)))}function Ht(u,m){var v={};return v[u.toLowerCase()]=m.toLowerCase(),v["Webkit"+u]="webkit"+m,v["Moz"+u]="moz"+m,v}var Ft={animationend:Ht("Animation","AnimationEnd"),animationiteration:Ht("Animation","AnimationIteration"),animationstart:Ht("Animation","AnimationStart"),transitionrun:Ht("Transition","TransitionRun"),transitionstart:Ht("Transition","TransitionStart"),transitioncancel:Ht("Transition","TransitionCancel"),transitionend:Ht("Transition","TransitionEnd")},nn={},pn={};la&&(pn=document.createElement("div").style,"AnimationEvent"in window||(delete Ft.animationend.animation,delete Ft.animationiteration.animation,delete Ft.animationstart.animation),"TransitionEvent"in window||delete Ft.transitionend.transition);function Za(u){if(nn[u])return nn[u];if(!Ft[u])return u;var m=Ft[u],v;for(v in m)if(m.hasOwnProperty(v)&&v in pn)return nn[u]=m[v];return u}var gi=Za("animationend"),Ys=Za("animationiteration"),ja=Za("animationstart"),Zs=Za("transitionrun"),il=Za("transitionstart"),Cd=Za("transitioncancel"),qc=Za("transitionend"),kf=new Map,Ad="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ad.push("scrollEnd");function Fo(u,m){kf.set(u,m),en(m,[u])}var Nf=typeof reportError=="function"?reportError:function(u){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var m=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof u=="object"&&u!==null&&typeof u.message=="string"?String(u.message):String(u),error:u});if(!window.dispatchEvent(m))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",u);return}console.error(u)},po=[],Qu=0,ix=0;function _f(){for(var u=Qu,m=ix=Qu=0;m<u;){var v=po[m];po[m++]=null;var C=po[m];po[m++]=null;var M=po[m];po[m++]=null;var V=po[m];if(po[m++]=null,C!==null&&M!==null){var ue=C.pending;ue===null?M.next=M:(M.next=ue.next,ue.next=M),C.pending=M}V!==0&&jf(v,M,V)}}function Sf(u,m,v,C){po[Qu++]=u,po[Qu++]=m,po[Qu++]=v,po[Qu++]=C,ix|=C,u.lanes|=C,u=u.alternate,u!==null&&(u.lanes|=C)}function lx(u,m,v,C){return Sf(u,m,v,C),ll(u)}function Ed(u,m){return Sf(u,null,null,m),ll(u)}function jf(u,m,v){u.lanes|=v;var C=u.alternate;C!==null&&(C.lanes|=v);for(var M=!1,V=u.return;V!==null;)V.childLanes|=v,C=V.alternate,C!==null&&(C.childLanes|=v),V.tag===22&&(u=V.stateNode,u===null||u._visibility&1||(M=!0)),u=V,V=V.return;return u.tag===3?(V=u.stateNode,M&&m!==null&&(M=31-Ke(v),u=V.hiddenUpdates,C=u[M],C===null?u[M]=[m]:C.push(m),m.lane=v|536870912),V):null}function ll(u){if(50<zp)throw zp=0,A5=null,Error(n(185));for(var m=u.return;m!==null;)u=m,m=u.return;return u.tag===3?u.stateNode:null}var Bi={};function ox(u,m,v,C){this.tag=u,this.key=v,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=m,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=C,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ol(u,m,v,C){return new ox(u,m,v,C)}function cx(u){return u=u.prototype,!(!u||!u.isReactComponent)}function Bo(u,m){var v=u.alternate;return v===null?(v=ol(u.tag,m,u.key,u.mode),v.elementType=u.elementType,v.type=u.type,v.stateNode=u.stateNode,v.alternate=u,u.alternate=v):(v.pendingProps=m,v.type=u.type,v.flags=0,v.subtreeFlags=0,v.deletions=null),v.flags=u.flags&65011712,v.childLanes=u.childLanes,v.lanes=u.lanes,v.child=u.child,v.memoizedProps=u.memoizedProps,v.memoizedState=u.memoizedState,v.updateQueue=u.updateQueue,m=u.dependencies,v.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext},v.sibling=u.sibling,v.index=u.index,v.ref=u.ref,v.refCleanup=u.refCleanup,v}function Cf(u,m){u.flags&=65011714;var v=u.alternate;return v===null?(u.childLanes=0,u.lanes=m,u.child=null,u.subtreeFlags=0,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=v.childLanes,u.lanes=v.lanes,u.child=v.child,u.subtreeFlags=0,u.deletions=null,u.memoizedProps=v.memoizedProps,u.memoizedState=v.memoizedState,u.updateQueue=v.updateQueue,u.type=v.type,m=v.dependencies,u.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext}),u}function ch(u,m,v,C,M,V){var ue=0;if(C=u,typeof u=="function")cx(u)&&(ue=1);else if(typeof u=="string")ue=KK(u,v,Y.current)?26:u==="html"||u==="head"||u==="body"?27:5;else e:switch(u){case U:return u=ol(31,v,m,M),u.elementType=U,u.lanes=V,u;case w:return lu(v.children,M,V,m);case k:ue=8,M|=24;break;case S:return u=ol(12,v,m,M|2),u.elementType=S,u.lanes=V,u;case H:return u=ol(13,v,m,M),u.elementType=H,u.lanes=V,u;case W:return u=ol(19,v,m,M),u.elementType=W,u.lanes=V,u;default:if(typeof u=="object"&&u!==null)switch(u.$$typeof){case E:ue=10;break e;case O:ue=9;break e;case D:ue=11;break e;case R:ue=14;break e;case z:ue=16,C=null;break e}ue=29,v=Error(n(130,u===null?"null":typeof u,"")),C=null}return m=ol(ue,v,m,M),m.elementType=u,m.type=C,m.lanes=V,m}function lu(u,m,v,C){return u=ol(7,u,C,m),u.lanes=v,u}function Af(u,m,v){return u=ol(6,u,null,m),u.lanes=v,u}function dx(u){var m=ol(18,null,null,0);return m.stateNode=u,m}function dh(u,m,v){return m=ol(4,u.children!==null?u.children:[],u.key,m),m.lanes=v,m.stateNode={containerInfo:u.containerInfo,pendingChildren:null,implementation:u.implementation},m}var ux=new WeakMap;function Uo(u,m){if(typeof u=="object"&&u!==null){var v=ux.get(u);return v!==void 0?v:(m={value:u,source:m,stack:dt(m)},ux.set(u,m),m)}return{value:u,source:m,stack:dt(m)}}var uh=[],Ju=0,hx=null,Ef=0,zo=[],qo=0,ou=null,Ho=1,$o="";function go(u,m){uh[Ju++]=Ef,uh[Ju++]=hx,hx=u,Ef=m}function hv(u,m,v){zo[qo++]=Ho,zo[qo++]=$o,zo[qo++]=ou,ou=u;var C=Ho;u=$o;var M=32-Ke(C)-1;C&=~(1<<M),v+=1;var V=32-Ke(m)+M;if(30<V){var ue=M-M%5;V=(C&(1<<ue)-1).toString(32),C>>=ue,M-=ue,Ho=1<<32-Ke(m)+M|v<<M|C,$o=V+u}else Ho=1<<V|v<<M|C,$o=u}function yp(u){u.return!==null&&(go(u,1),hv(u,1,0))}function fx(u){for(;u===hx;)hx=uh[--Ju],uh[Ju]=null,Ef=uh[--Ju],uh[Ju]=null;for(;u===ou;)ou=zo[--qo],zo[qo]=null,$o=zo[--qo],zo[qo]=null,Ho=zo[--qo],zo[qo]=null}function fv(u,m){zo[qo++]=Ho,zo[qo++]=$o,zo[qo++]=ou,Ho=m.id,$o=m.overflow,ou=u}var Ui=null,ds=null,oa=!1,Sl=null,Ps=!1,cc=Error(n(519));function cu(u){var m=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw hh(Uo(m,u)),cc}function wp(u){var m=u.stateNode,v=u.type,C=u.memoizedProps;switch(m[le]=u,m[ve]=C,v){case"dialog":da("cancel",m),da("close",m);break;case"iframe":case"object":case"embed":da("load",m);break;case"video":case"audio":for(v=0;v<Hp.length;v++)da(Hp[v],m);break;case"source":da("error",m);break;case"img":case"image":case"link":da("error",m),da("load",m);break;case"details":da("toggle",m);break;case"input":da("invalid",m),ct(m,C.value,C.defaultValue,C.checked,C.defaultChecked,C.type,C.name,!0);break;case"select":da("invalid",m);break;case"textarea":da("invalid",m),qa(m,C.value,C.defaultValue,C.children)}v=C.children,typeof v!="string"&&typeof v!="number"&&typeof v!="bigint"||m.textContent===""+v||C.suppressHydrationWarning===!0||u8(m.textContent,v)?(C.popover!=null&&(da("beforetoggle",m),da("toggle",m)),C.onScroll!=null&&da("scroll",m),C.onScrollEnd!=null&&da("scrollend",m),C.onClick!=null&&(m.onclick=tl),m=!0):m=!1,m||cu(u,!0)}function Td(u){for(Ui=u.return;Ui;)switch(Ui.tag){case 5:case 31:case 13:Ps=!1;return;case 27:case 3:Ps=!0;return;default:Ui=Ui.return}}function zi(u){if(u!==Ui)return!1;if(!oa)return Td(u),oa=!0,!1;var m=u.tag,v;if((v=m!==3&&m!==27)&&((v=m===5)&&(v=u.type,v=!(v!=="form"&&v!=="button")||H5(u.type,u.memoizedProps)),v=!v),v&&ds&&cu(u),Td(u),m===13){if(u=u.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(n(317));ds=y8(u)}else if(m===31){if(u=u.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(n(317));ds=y8(u)}else m===27?(m=ds,jh(u.type)?(u=G5,G5=null,ds=u):ds=m):ds=Ui?Wc(u.stateNode.nextSibling):null;return!0}function e0(){ds=Ui=null,oa=!1}function kp(){var u=Sl;return u!==null&&(Yo===null?Yo=u:Yo.push.apply(Yo,u),Sl=null),u}function hh(u){Sl===null?Sl=[u]:Sl.push(u)}var mx=fe(null),du=null,Hc=null;function uu(u,m,v){te(mx,m._currentValue),m._currentValue=v}function Vo(u){u._currentValue=mx.current,F(mx)}function fh(u,m,v){for(;u!==null;){var C=u.alternate;if((u.childLanes&m)!==m?(u.childLanes|=m,C!==null&&(C.childLanes|=m)):C!==null&&(C.childLanes&m)!==m&&(C.childLanes|=m),u===v)break;u=u.return}}function t0(u,m,v,C){var M=u.child;for(M!==null&&(M.return=u);M!==null;){var V=M.dependencies;if(V!==null){var ue=M.child;V=V.firstContext;e:for(;V!==null;){var Re=V;V=M;for(var Ze=0;Ze<m.length;Ze++)if(Re.context===m[Ze]){V.lanes|=v,Re=V.alternate,Re!==null&&(Re.lanes|=v),fh(V.return,v,u),C||(ue=null);break e}V=Re.next}}else if(M.tag===18){if(ue=M.return,ue===null)throw Error(n(341));ue.lanes|=v,V=ue.alternate,V!==null&&(V.lanes|=v),fh(ue,v,u),ue=null}else ue=M.child;if(ue!==null)ue.return=M;else for(ue=M;ue!==null;){if(ue===u){ue=null;break}if(M=ue.sibling,M!==null){M.return=ue.return,ue=M;break}ue=ue.return}M=ue}}function hu(u,m,v,C){u=null;for(var M=m,V=!1;M!==null;){if(!V){if((M.flags&524288)!==0)V=!0;else if((M.flags&262144)!==0)break}if(M.tag===10){var ue=M.alternate;if(ue===null)throw Error(n(387));if(ue=ue.memoizedProps,ue!==null){var Re=M.type;A(M.pendingProps.value,ue.value)||(u!==null?u.push(Re):u=[Re])}}else if(M===Ce.current){if(ue=M.alternate,ue===null)throw Error(n(387));ue.memoizedState.memoizedState!==M.memoizedState.memoizedState&&(u!==null?u.push(Gp):u=[Gp])}M=M.return}u!==null&&t0(m,u,v,C),m.flags|=262144}function xx(u){for(u=u.firstContext;u!==null;){if(!A(u.context._currentValue,u.memoizedValue))return!0;u=u.next}return!1}function fu(u){du=u,Hc=null,u=u.dependencies,u!==null&&(u.firstContext=null)}function qi(u){return mv(du,u)}function px(u,m){return du===null&&fu(u),mv(u,m)}function mv(u,m){var v=m._currentValue;if(m={context:m,memoizedValue:v,next:null},Hc===null){if(u===null)throw Error(n(308));Hc=m,u.dependencies={lanes:0,firstContext:m},u.flags|=524288}else Hc=Hc.next=m;return v}var Kk=typeof AbortController<"u"?AbortController:function(){var u=[],m=this.signal={aborted:!1,addEventListener:function(v,C){u.push(C)}};this.abort=function(){m.aborted=!0,u.forEach(function(v){return v()})}},Gk=e.unstable_scheduleCallback,Xk=e.unstable_NormalPriority,$s={$$typeof:E,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function mh(){return{controller:new Kk,data:new Map,refCount:0}}function Tf(u){u.refCount--,u.refCount===0&&Gk(Xk,function(){u.controller.abort()})}var Of=null,gx=0,P=0,L=null;function J(u,m){if(Of===null){var v=Of=[];gx=0,P=D5(),L={status:"pending",value:void 0,then:function(C){v.push(C)}}}return gx++,m.then(ce,ce),m}function ce(){if(--gx===0&&Of!==null){L!==null&&(L.status="fulfilled");var u=Of;Of=null,P=0,L=null;for(var m=0;m<u.length;m++)(0,u[m])()}}function _e(u,m){var v=[],C={status:"pending",value:null,reason:null,then:function(M){v.push(M)}};return u.then(function(){C.status="fulfilled",C.value=m;for(var M=0;M<v.length;M++)(0,v[M])(m)},function(M){for(C.status="rejected",C.reason=M,M=0;M<v.length;M++)(0,v[M])(void 0)}),C}var Ee=de.S;de.S=function(u,m){ME=mr(),typeof m=="object"&&m!==null&&typeof m.then=="function"&&J(u,m),Ee!==null&&Ee(u,m)};var Pe=fe(null);function Fe(){var u=Pe.current;return u!==null?u:hs.pooledCache}function Ue(u,m){m===null?te(Pe,Pe.current):te(Pe,m.pool)}function $e(){var u=Fe();return u===null?null:{parent:$s._currentValue,pool:u}}var it=Error(n(460)),Nt=Error(n(474)),He=Error(n(542)),ut={then:function(){}};function yt(u){return u=u.status,u==="fulfilled"||u==="rejected"}function Rt(u,m,v){switch(v=u[v],v===void 0?u.push(m):v!==m&&(m.then(tl,tl),m=v),m.status){case"fulfilled":return m.value;case"rejected":throw u=m.reason,fr(u),u;default:if(typeof m.status=="string")m.then(tl,tl);else{if(u=hs,u!==null&&100<u.shellSuspendCounter)throw Error(n(482));u=m,u.status="pending",u.then(function(C){if(m.status==="pending"){var M=m;M.status="fulfilled",M.value=C}},function(C){if(m.status==="pending"){var M=m;M.status="rejected",M.reason=C}})}switch(m.status){case"fulfilled":return m.value;case"rejected":throw u=m.reason,fr(u),u}throw Lt=m,it}}function kt(u){try{var m=u._init;return m(u._payload)}catch(v){throw v!==null&&typeof v=="object"&&typeof v.then=="function"?(Lt=v,it):v}}var Lt=null;function Wt(){if(Lt===null)throw Error(n(459));var u=Lt;return Lt=null,u}function fr(u){if(u===it||u===He)throw Error(n(483))}var ar=null,Xr=0;function Ur(u){var m=Xr;return Xr+=1,ar===null&&(ar=[]),Rt(ar,u,m)}function Rn(u,m){m=m.props.ref,u.ref=m!==void 0?m:null}function Wr(u,m){throw m.$$typeof===y?Error(n(525)):(u=Object.prototype.toString.call(m),Error(n(31,u==="[object Object]"?"object with keys {"+Object.keys(m).join(", ")+"}":u)))}function sa(u){function m(gt,ot){if(u){var _t=gt.deletions;_t===null?(gt.deletions=[ot],gt.flags|=16):_t.push(ot)}}function v(gt,ot){if(!u)return null;for(;ot!==null;)m(gt,ot),ot=ot.sibling;return null}function C(gt){for(var ot=new Map;gt!==null;)gt.key!==null?ot.set(gt.key,gt):ot.set(gt.index,gt),gt=gt.sibling;return ot}function M(gt,ot){return gt=Bo(gt,ot),gt.index=0,gt.sibling=null,gt}function V(gt,ot,_t){return gt.index=_t,u?(_t=gt.alternate,_t!==null?(_t=_t.index,_t<ot?(gt.flags|=67108866,ot):_t):(gt.flags|=67108866,ot)):(gt.flags|=1048576,ot)}function ue(gt){return u&&gt.alternate===null&&(gt.flags|=67108866),gt}function Re(gt,ot,_t,Zt){return ot===null||ot.tag!==6?(ot=Af(_t,gt.mode,Zt),ot.return=gt,ot):(ot=M(ot,_t),ot.return=gt,ot)}function Ze(gt,ot,_t,Zt){var bn=_t.type;return bn===w?$t(gt,ot,_t.props.children,Zt,_t.key):ot!==null&&(ot.elementType===bn||typeof bn=="object"&&bn!==null&&bn.$$typeof===z&&kt(bn)===ot.type)?(ot=M(ot,_t.props),Rn(ot,_t),ot.return=gt,ot):(ot=ch(_t.type,_t.key,_t.props,null,gt.mode,Zt),Rn(ot,_t),ot.return=gt,ot)}function St(gt,ot,_t,Zt){return ot===null||ot.tag!==4||ot.stateNode.containerInfo!==_t.containerInfo||ot.stateNode.implementation!==_t.implementation?(ot=dh(_t,gt.mode,Zt),ot.return=gt,ot):(ot=M(ot,_t.children||[]),ot.return=gt,ot)}function $t(gt,ot,_t,Zt,bn){return ot===null||ot.tag!==7?(ot=lu(_t,gt.mode,Zt,bn),ot.return=gt,ot):(ot=M(ot,_t),ot.return=gt,ot)}function nr(gt,ot,_t){if(typeof ot=="string"&&ot!==""||typeof ot=="number"||typeof ot=="bigint")return ot=Af(""+ot,gt.mode,_t),ot.return=gt,ot;if(typeof ot=="object"&&ot!==null){switch(ot.$$typeof){case g:return _t=ch(ot.type,ot.key,ot.props,null,gt.mode,_t),Rn(_t,ot),_t.return=gt,_t;case N:return ot=dh(ot,gt.mode,_t),ot.return=gt,ot;case z:return ot=kt(ot),nr(gt,ot,_t)}if(ae(ot)||K(ot))return ot=lu(ot,gt.mode,_t,null),ot.return=gt,ot;if(typeof ot.then=="function")return nr(gt,Ur(ot),_t);if(ot.$$typeof===E)return nr(gt,px(gt,ot),_t);Wr(gt,ot)}return null}function Et(gt,ot,_t,Zt){var bn=ot!==null?ot.key:null;if(typeof _t=="string"&&_t!==""||typeof _t=="number"||typeof _t=="bigint")return bn!==null?null:Re(gt,ot,""+_t,Zt);if(typeof _t=="object"&&_t!==null){switch(_t.$$typeof){case g:return _t.key===bn?Ze(gt,ot,_t,Zt):null;case N:return _t.key===bn?St(gt,ot,_t,Zt):null;case z:return _t=kt(_t),Et(gt,ot,_t,Zt)}if(ae(_t)||K(_t))return bn!==null?null:$t(gt,ot,_t,Zt,null);if(typeof _t.then=="function")return Et(gt,ot,Ur(_t),Zt);if(_t.$$typeof===E)return Et(gt,ot,px(gt,_t),Zt);Wr(gt,_t)}return null}function Dt(gt,ot,_t,Zt,bn){if(typeof Zt=="string"&&Zt!==""||typeof Zt=="number"||typeof Zt=="bigint")return gt=gt.get(_t)||null,Re(ot,gt,""+Zt,bn);if(typeof Zt=="object"&&Zt!==null){switch(Zt.$$typeof){case g:return gt=gt.get(Zt.key===null?_t:Zt.key)||null,Ze(ot,gt,Zt,bn);case N:return gt=gt.get(Zt.key===null?_t:Zt.key)||null,St(ot,gt,Zt,bn);case z:return Zt=kt(Zt),Dt(gt,ot,_t,Zt,bn)}if(ae(Zt)||K(Zt))return gt=gt.get(_t)||null,$t(ot,gt,Zt,bn,null);if(typeof Zt.then=="function")return Dt(gt,ot,_t,Ur(Zt),bn);if(Zt.$$typeof===E)return Dt(gt,ot,_t,px(ot,Zt),bn);Wr(ot,Zt)}return null}function Gr(gt,ot,_t,Zt){for(var bn=null,Oa=null,tn=ot,Xn=ot=0,xa=null;tn!==null&&Xn<_t.length;Xn++){tn.index>Xn?(xa=tn,tn=null):xa=tn.sibling;var Pa=Et(gt,tn,_t[Xn],Zt);if(Pa===null){tn===null&&(tn=xa);break}u&&tn&&Pa.alternate===null&&m(gt,tn),ot=V(Pa,ot,Xn),Oa===null?bn=Pa:Oa.sibling=Pa,Oa=Pa,tn=xa}if(Xn===_t.length)return v(gt,tn),oa&&go(gt,Xn),bn;if(tn===null){for(;Xn<_t.length;Xn++)tn=nr(gt,_t[Xn],Zt),tn!==null&&(ot=V(tn,ot,Xn),Oa===null?bn=tn:Oa.sibling=tn,Oa=tn);return oa&&go(gt,Xn),bn}for(tn=C(tn);Xn<_t.length;Xn++)xa=Dt(tn,gt,Xn,_t[Xn],Zt),xa!==null&&(u&&xa.alternate!==null&&tn.delete(xa.key===null?Xn:xa.key),ot=V(xa,ot,Xn),Oa===null?bn=xa:Oa.sibling=xa,Oa=xa);return u&&tn.forEach(function(Oh){return m(gt,Oh)}),oa&&go(gt,Xn),bn}function Cn(gt,ot,_t,Zt){if(_t==null)throw Error(n(151));for(var bn=null,Oa=null,tn=ot,Xn=ot=0,xa=null,Pa=_t.next();tn!==null&&!Pa.done;Xn++,Pa=_t.next()){tn.index>Xn?(xa=tn,tn=null):xa=tn.sibling;var Oh=Et(gt,tn,Pa.value,Zt);if(Oh===null){tn===null&&(tn=xa);break}u&&tn&&Oh.alternate===null&&m(gt,tn),ot=V(Oh,ot,Xn),Oa===null?bn=Oh:Oa.sibling=Oh,Oa=Oh,tn=xa}if(Pa.done)return v(gt,tn),oa&&go(gt,Xn),bn;if(tn===null){for(;!Pa.done;Xn++,Pa=_t.next())Pa=nr(gt,Pa.value,Zt),Pa!==null&&(ot=V(Pa,ot,Xn),Oa===null?bn=Pa:Oa.sibling=Pa,Oa=Pa);return oa&&go(gt,Xn),bn}for(tn=C(tn);!Pa.done;Xn++,Pa=_t.next())Pa=Dt(tn,gt,Xn,Pa.value,Zt),Pa!==null&&(u&&Pa.alternate!==null&&tn.delete(Pa.key===null?Xn:Pa.key),ot=V(Pa,ot,Xn),Oa===null?bn=Pa:Oa.sibling=Pa,Oa=Pa);return u&&tn.forEach(function(aG){return m(gt,aG)}),oa&&go(gt,Xn),bn}function ts(gt,ot,_t,Zt){if(typeof _t=="object"&&_t!==null&&_t.type===w&&_t.key===null&&(_t=_t.props.children),typeof _t=="object"&&_t!==null){switch(_t.$$typeof){case g:e:{for(var bn=_t.key;ot!==null;){if(ot.key===bn){if(bn=_t.type,bn===w){if(ot.tag===7){v(gt,ot.sibling),Zt=M(ot,_t.props.children),Zt.return=gt,gt=Zt;break e}}else if(ot.elementType===bn||typeof bn=="object"&&bn!==null&&bn.$$typeof===z&&kt(bn)===ot.type){v(gt,ot.sibling),Zt=M(ot,_t.props),Rn(Zt,_t),Zt.return=gt,gt=Zt;break e}v(gt,ot);break}else m(gt,ot);ot=ot.sibling}_t.type===w?(Zt=lu(_t.props.children,gt.mode,Zt,_t.key),Zt.return=gt,gt=Zt):(Zt=ch(_t.type,_t.key,_t.props,null,gt.mode,Zt),Rn(Zt,_t),Zt.return=gt,gt=Zt)}return ue(gt);case N:e:{for(bn=_t.key;ot!==null;){if(ot.key===bn)if(ot.tag===4&&ot.stateNode.containerInfo===_t.containerInfo&&ot.stateNode.implementation===_t.implementation){v(gt,ot.sibling),Zt=M(ot,_t.children||[]),Zt.return=gt,gt=Zt;break e}else{v(gt,ot);break}else m(gt,ot);ot=ot.sibling}Zt=dh(_t,gt.mode,Zt),Zt.return=gt,gt=Zt}return ue(gt);case z:return _t=kt(_t),ts(gt,ot,_t,Zt)}if(ae(_t))return Gr(gt,ot,_t,Zt);if(K(_t)){if(bn=K(_t),typeof bn!="function")throw Error(n(150));return _t=bn.call(_t),Cn(gt,ot,_t,Zt)}if(typeof _t.then=="function")return ts(gt,ot,Ur(_t),Zt);if(_t.$$typeof===E)return ts(gt,ot,px(gt,_t),Zt);Wr(gt,_t)}return typeof _t=="string"&&_t!==""||typeof _t=="number"||typeof _t=="bigint"?(_t=""+_t,ot!==null&&ot.tag===6?(v(gt,ot.sibling),Zt=M(ot,_t),Zt.return=gt,gt=Zt):(v(gt,ot),Zt=Af(_t,gt.mode,Zt),Zt.return=gt,gt=Zt),ue(gt)):v(gt,ot)}return function(gt,ot,_t,Zt){try{Xr=0;var bn=ts(gt,ot,_t,Zt);return ar=null,bn}catch(tn){if(tn===it||tn===He)throw tn;var Oa=ol(29,tn,null,gt.mode);return Oa.lanes=Zt,Oa.return=gt,Oa}finally{}}}var us=sa(!0),Hn=sa(!1),zr=!1;function Er(u){u.updateQueue={baseState:u.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ys(u,m){u=u.updateQueue,m.updateQueue===u&&(m.updateQueue={baseState:u.baseState,firstBaseUpdate:u.firstBaseUpdate,lastBaseUpdate:u.lastBaseUpdate,shared:u.shared,callbacks:null})}function Nn(u){return{lane:u,tag:0,payload:null,callback:null,next:null}}function Wn(u,m,v){var C=u.updateQueue;if(C===null)return null;if(C=C.shared,(Ba&2)!==0){var M=C.pending;return M===null?m.next=m:(m.next=M.next,M.next=m),C.pending=m,m=ll(u),jf(u,null,v),m}return Sf(u,C,m,v),ll(u)}function Ra(u,m,v){if(m=m.updateQueue,m!==null&&(m=m.shared,(v&4194048)!==0)){var C=m.lanes;C&=u.pendingLanes,v|=C,m.lanes=v,gr(u,v)}}function bi(u,m){var v=u.updateQueue,C=u.alternate;if(C!==null&&(C=C.updateQueue,v===C)){var M=null,V=null;if(v=v.firstBaseUpdate,v!==null){do{var ue={lane:v.lane,tag:v.tag,payload:v.payload,callback:null,next:null};V===null?M=V=ue:V=V.next=ue,v=v.next}while(v!==null);V===null?M=V=m:V=V.next=m}else M=V=m;v={baseState:C.baseState,firstBaseUpdate:M,lastBaseUpdate:V,shared:C.shared,callbacks:C.callbacks},u.updateQueue=v;return}u=v.lastBaseUpdate,u===null?v.firstBaseUpdate=m:u.next=m,v.lastBaseUpdate=m}var Hi=!1;function Qa(){if(Hi){var u=L;if(u!==null)throw u}}function Qs(u,m,v,C){Hi=!1;var M=u.updateQueue;zr=!1;var V=M.firstBaseUpdate,ue=M.lastBaseUpdate,Re=M.shared.pending;if(Re!==null){M.shared.pending=null;var Ze=Re,St=Ze.next;Ze.next=null,ue===null?V=St:ue.next=St,ue=Ze;var $t=u.alternate;$t!==null&&($t=$t.updateQueue,Re=$t.lastBaseUpdate,Re!==ue&&(Re===null?$t.firstBaseUpdate=St:Re.next=St,$t.lastBaseUpdate=Ze))}if(V!==null){var nr=M.baseState;ue=0,$t=St=Ze=null,Re=V;do{var Et=Re.lane&-536870913,Dt=Et!==Re.lane;if(Dt?(ma&Et)===Et:(C&Et)===Et){Et!==0&&Et===P&&(Hi=!0),$t!==null&&($t=$t.next={lane:0,tag:Re.tag,payload:Re.payload,callback:null,next:null});e:{var Gr=u,Cn=Re;Et=m;var ts=v;switch(Cn.tag){case 1:if(Gr=Cn.payload,typeof Gr=="function"){nr=Gr.call(ts,nr,Et);break e}nr=Gr;break e;case 3:Gr.flags=Gr.flags&-65537|128;case 0:if(Gr=Cn.payload,Et=typeof Gr=="function"?Gr.call(ts,nr,Et):Gr,Et==null)break e;nr=p({},nr,Et);break e;case 2:zr=!0}}Et=Re.callback,Et!==null&&(u.flags|=64,Dt&&(u.flags|=8192),Dt=M.callbacks,Dt===null?M.callbacks=[Et]:Dt.push(Et))}else Dt={lane:Et,tag:Re.tag,payload:Re.payload,callback:Re.callback,next:null},$t===null?(St=$t=Dt,Ze=nr):$t=$t.next=Dt,ue|=Et;if(Re=Re.next,Re===null){if(Re=M.shared.pending,Re===null)break;Dt=Re,Re=Dt.next,Dt.next=null,M.lastBaseUpdate=Dt,M.shared.pending=null}}while(!0);$t===null&&(Ze=nr),M.baseState=Ze,M.firstBaseUpdate=St,M.lastBaseUpdate=$t,V===null&&(M.shared.lanes=0),wh|=ue,u.lanes=ue,u.memoizedState=nr}}function cl(u,m){if(typeof u!="function")throw Error(n(191,u));u.call(m)}function Js(u,m){var v=u.callbacks;if(v!==null)for(u.callbacks=null,u=0;u<v.length;u++)cl(v[u],m)}var Jn=fe(null),ya=fe(0);function ws(u,m){u=u0,te(ya,u),te(Jn,m),u0=u|m.baseLanes}function Ca(){te(ya,u0),te(Jn,Jn.current)}function vi(){u0=ya.current,F(Jn),F(ya)}var ks=fe(null),wa=null;function Vs(u){var m=u.alternate;te(ga,ga.current&1),te(ks,u),wa===null&&(m===null||Jn.current!==null||m.memoizedState!==null)&&(wa=u)}function Fa(u){te(ga,ga.current),te(ks,u),wa===null&&(wa=u)}function ei(u){u.tag===22?(te(ga,ga.current),te(ks,u),wa===null&&(wa=u)):ti()}function ti(){te(ga,ga.current),te(ks,ks.current)}function Ha(u){F(ks),wa===u&&(wa=null),F(ga)}var ga=fe(0);function dl(u){for(var m=u;m!==null;){if(m.tag===13){var v=m.memoizedState;if(v!==null&&(v=v.dehydrated,v===null||W5(v)||K5(v)))return m}else if(m.tag===19&&(m.memoizedProps.revealOrder==="forwards"||m.memoizedProps.revealOrder==="backwards"||m.memoizedProps.revealOrder==="unstable_legacy-backwards"||m.memoizedProps.revealOrder==="together")){if((m.flags&128)!==0)return m}else if(m.child!==null){m.child.return=m,m=m.child;continue}if(m===u)break;for(;m.sibling===null;){if(m.return===null||m.return===u)return null;m=m.return}m.sibling.return=m.return,m=m.sibling}return null}var Is=0,hn=null,gn=null,ka=null,ql=!1,Wo=!1,jl=!1,ri=0,mu=0,xu=null,bx=0;function Ja(){throw Error(n(321))}function Np(u,m){if(m===null)return!1;for(var v=0;v<m.length&&v<u.length;v++)if(!A(u[v],m[v]))return!1;return!0}function _p(u,m,v,C,M,V){return Is=V,hn=m,m.memoizedState=null,m.updateQueue=null,m.lanes=0,de.H=u===null||u.memoizedState===null?WA:n5,jl=!1,V=v(C,M),jl=!1,Wo&&(V=Od(m,v,C,M)),vx(u),V}function vx(u){de.H=Pp;var m=gn!==null&&gn.next!==null;if(Is=0,ka=gn=hn=null,ql=!1,mu=0,xu=null,m)throw Error(n(300));u===null||Ti||(u=u.dependencies,u!==null&&xx(u)&&(Ti=!0))}function Od(u,m,v,C){hn=u;var M=0;do{if(Wo&&(xu=null),mu=0,Wo=!1,25<=M)throw Error(n(301));if(M+=1,ka=gn=null,u.updateQueue!=null){var V=u.updateQueue;V.lastEffect=null,V.events=null,V.stores=null,V.memoCache!=null&&(V.memoCache.index=0)}de.H=KA,V=m(v,C)}while(Wo);return V}function Yk(){var u=de.H,m=u.useState()[0];return m=typeof m.then=="function"?pu(m):m,u=u.useState()[0],(gn!==null?gn.memoizedState:null)!==u&&(hn.flags|=1024),m}function Sp(){var u=ri!==0;return ri=0,u}function jp(u,m,v){m.updateQueue=u.updateQueue,m.flags&=-2053,u.lanes&=~v}function yx(u){if(ql){for(u=u.memoizedState;u!==null;){var m=u.queue;m!==null&&(m.pending=null),u=u.next}ql=!1}Is=0,ka=gn=hn=null,Wo=!1,mu=ri=0,xu=null}function Ei(){var u={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ka===null?hn.memoizedState=ka=u:ka=ka.next=u,ka}function Ds(){if(gn===null){var u=hn.alternate;u=u!==null?u.memoizedState:null}else u=gn.next;var m=ka===null?hn.memoizedState:ka.next;if(m!==null)ka=m,gn=u;else{if(u===null)throw hn.alternate===null?Error(n(467)):Error(n(310));gn=u,u={memoizedState:gn.memoizedState,baseState:gn.baseState,baseQueue:gn.baseQueue,queue:gn.queue,next:null},ka===null?hn.memoizedState=ka=u:ka=ka.next=u}return ka}function Pf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function pu(u){var m=mu;return mu+=1,xu===null&&(xu=[]),u=Rt(xu,u,m),m=hn,(ka===null?m.memoizedState:ka.next)===null&&(m=m.alternate,de.H=m===null||m.memoizedState===null?WA:n5),u}function xh(u){if(u!==null&&typeof u=="object"){if(typeof u.then=="function")return pu(u);if(u.$$typeof===E)return qi(u)}throw Error(n(438,String(u)))}function r0(u){var m=null,v=hn.updateQueue;if(v!==null&&(m=v.memoCache),m==null){var C=hn.alternate;C!==null&&(C=C.updateQueue,C!==null&&(C=C.memoCache,C!=null&&(m={data:C.data.map(function(M){return M.slice()}),index:0})))}if(m==null&&(m={data:[],index:0}),v===null&&(v=Pf(),hn.updateQueue=v),v.memoCache=m,v=m.data[m.index],v===void 0)for(v=m.data[m.index]=Array(u),C=0;C<u;C++)v[C]=Z;return m.index++,v}function $c(u,m){return typeof m=="function"?m(u):m}function wx(u){var m=Ds();return ph(m,gn,u)}function ph(u,m,v){var C=u.queue;if(C===null)throw Error(n(311));C.lastRenderedReducer=v;var M=u.baseQueue,V=C.pending;if(V!==null){if(M!==null){var ue=M.next;M.next=V.next,V.next=ue}m.baseQueue=M=V,C.pending=null}if(V=u.baseState,M===null)u.memoizedState=V;else{m=M.next;var Re=ue=null,Ze=null,St=m,$t=!1;do{var nr=St.lane&-536870913;if(nr!==St.lane?(ma&nr)===nr:(Is&nr)===nr){var Et=St.revertLane;if(Et===0)Ze!==null&&(Ze=Ze.next={lane:0,revertLane:0,gesture:null,action:St.action,hasEagerState:St.hasEagerState,eagerState:St.eagerState,next:null}),nr===P&&($t=!0);else if((Is&Et)===Et){St=St.next,Et===P&&($t=!0);continue}else nr={lane:0,revertLane:St.revertLane,gesture:null,action:St.action,hasEagerState:St.hasEagerState,eagerState:St.eagerState,next:null},Ze===null?(Re=Ze=nr,ue=V):Ze=Ze.next=nr,hn.lanes|=Et,wh|=Et;nr=St.action,jl&&v(V,nr),V=St.hasEagerState?St.eagerState:v(V,nr)}else Et={lane:nr,revertLane:St.revertLane,gesture:St.gesture,action:St.action,hasEagerState:St.hasEagerState,eagerState:St.eagerState,next:null},Ze===null?(Re=Ze=Et,ue=V):Ze=Ze.next=Et,hn.lanes|=nr,wh|=nr;St=St.next}while(St!==null&&St!==m);if(Ze===null?ue=V:Ze.next=Re,!A(V,u.memoizedState)&&(Ti=!0,$t&&(v=L,v!==null)))throw v;u.memoizedState=V,u.baseState=ue,u.baseQueue=Ze,C.lastRenderedState=V}return M===null&&(C.lanes=0),[u.memoizedState,C.dispatch]}function kx(u){var m=Ds(),v=m.queue;if(v===null)throw Error(n(311));v.lastRenderedReducer=u;var C=v.dispatch,M=v.pending,V=m.memoizedState;if(M!==null){v.pending=null;var ue=M=M.next;do V=u(V,ue.action),ue=ue.next;while(ue!==M);A(V,m.memoizedState)||(Ti=!0),m.memoizedState=V,m.baseQueue===null&&(m.baseState=V),v.lastRenderedState=V}return[V,C]}function Nx(u,m,v){var C=hn,M=Ds(),V=oa;if(V){if(v===void 0)throw Error(n(407));v=v()}else v=m();var ue=!A((gn||M).memoizedState,v);if(ue&&(M.memoizedState=v,Ti=!0),M=M.queue,Zk(Ap.bind(null,C,M,u),[u]),M.getSnapshot!==m||ue||ka!==null&&ka.memoizedState.tag&1){if(C.flags|=2048,a0(9,{destroy:void 0},Cp.bind(null,C,M,v,m),null),hs===null)throw Error(n(349));V||(Is&127)!==0||Pd(C,m,v)}return v}function Pd(u,m,v){u.flags|=16384,u={getSnapshot:m,value:v},m=hn.updateQueue,m===null?(m=Pf(),hn.updateQueue=m,m.stores=[u]):(v=m.stores,v===null?m.stores=[u]:v.push(u))}function Cp(u,m,v,C){m.value=v,m.getSnapshot=C,xv(m)&&Ep(u)}function Ap(u,m,v){return v(function(){xv(m)&&Ep(u)})}function xv(u){var m=u.getSnapshot;u=u.value;try{var v=m();return!A(u,v)}catch{return!0}}function Ep(u){var m=Ed(u,2);m!==null&&Zo(m,u,2)}function gu(u){var m=Ei();if(typeof u=="function"){var v=u;if(u=v(),jl){kr(!0);try{v()}finally{kr(!1)}}}return m.memoizedState=m.baseState=u,m.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:$c,lastRenderedState:u},m}function pv(u,m,v,C){return u.baseState=v,ph(u,gn,typeof C=="function"?C:$c)}function gv(u,m,v,C,M){if(wv(u))throw Error(n(485));if(u=m.action,u!==null){var V={payload:M,action:u,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(ue){V.listeners.push(ue)}};de.T!==null?v(!0):V.isTransition=!1,C(V),v=m.pending,v===null?(V.next=m.pending=V,bv(m,V)):(V.next=v.next,m.pending=v.next=V)}}function bv(u,m){var v=m.action,C=m.payload,M=u.state;if(m.isTransition){var V=de.T,ue={};de.T=ue;try{var Re=v(M,C),Ze=de.S;Ze!==null&&Ze(ue,Re),Tp(u,m,Re)}catch(St){n0(u,m,St)}finally{V!==null&&ue.types!==null&&(V.types=ue.types),de.T=V}}else try{V=v(M,C),Tp(u,m,V)}catch(St){n0(u,m,St)}}function Tp(u,m,v){v!==null&&typeof v=="object"&&typeof v.then=="function"?v.then(function(C){vv(u,m,C)},function(C){return n0(u,m,C)}):vv(u,m,v)}function vv(u,m,v){m.status="fulfilled",m.value=v,_x(m),u.state=v,m=u.pending,m!==null&&(v=m.next,v===m?u.pending=null:(v=v.next,m.next=v,bv(u,v)))}function n0(u,m,v){var C=u.pending;if(u.pending=null,C!==null){C=C.next;do m.status="rejected",m.reason=v,_x(m),m=m.next;while(m!==C)}u.action=null}function _x(u){u=u.listeners;for(var m=0;m<u.length;m++)(0,u[m])()}function If(u,m){return m}function Vc(u,m){if(oa){var v=hs.formState;if(v!==null){e:{var C=hn;if(oa){if(ds){t:{for(var M=ds,V=Ps;M.nodeType!==8;){if(!V){M=null;break t}if(M=Wc(M.nextSibling),M===null){M=null;break t}}V=M.data,M=V==="F!"||V==="F"?M:null}if(M){ds=Wc(M.nextSibling),C=M.data==="F!";break e}}cu(C)}C=!1}C&&(m=v[0])}}return v=Ei(),v.memoizedState=v.baseState=m,C={pending:null,lanes:0,dispatch:null,lastRenderedReducer:If,lastRenderedState:m},v.queue=C,v=HA.bind(null,hn,C),C.dispatch=v,C=gu(!1),V=r5.bind(null,hn,!1,C.queue),C=Ei(),M={state:m,dispatch:null,action:u,pending:null},C.queue=M,v=gv.bind(null,hn,M,V,v),M.dispatch=v,C.memoizedState=u,[m,v,!1]}function Id(u){var m=Ds();return Dd(m,gn,u)}function Dd(u,m,v){if(m=ph(u,m,If)[0],u=wx($c)[0],typeof m=="object"&&m!==null&&typeof m.then=="function")try{var C=pu(m)}catch(ue){throw ue===it?He:ue}else C=m;m=Ds();var M=m.queue,V=M.dispatch;return v!==m.memoizedState&&(hn.flags|=2048,a0(9,{destroy:void 0},Sx.bind(null,M,v),null)),[C,V,u]}function Sx(u,m){u.action=m}function jx(u){var m=Ds(),v=gn;if(v!==null)return Dd(m,v,u);Ds(),m=m.memoizedState,v=Ds();var C=v.queue.dispatch;return v.memoizedState=u,[m,C,!1]}function a0(u,m,v,C){return u={tag:u,create:v,deps:C,inst:m,next:null},m=hn.updateQueue,m===null&&(m=Pf(),hn.updateQueue=m),v=m.lastEffect,v===null?m.lastEffect=u.next=u:(C=v.next,v.next=u,u.next=C,m.lastEffect=u),u}function yv(){return Ds().memoizedState}function gh(u,m,v,C){var M=Ei();hn.flags|=u,M.memoizedState=a0(1|m,{destroy:void 0},v,C===void 0?null:C)}function bh(u,m,v,C){var M=Ds();C=C===void 0?null:C;var V=M.memoizedState.inst;gn!==null&&C!==null&&Np(C,gn.memoizedState.deps)?M.memoizedState=a0(m,V,v,C):(hn.flags|=u,M.memoizedState=a0(1|m,V,v,C))}function EA(u,m){gh(8390656,8,u,m)}function Zk(u,m){bh(2048,8,u,m)}function QW(u){hn.flags|=4;var m=hn.updateQueue;if(m===null)m=Pf(),hn.updateQueue=m,m.events=[u];else{var v=m.events;v===null?m.events=[u]:v.push(u)}}function TA(u){var m=Ds().memoizedState;return QW({ref:m,nextImpl:u}),function(){if((Ba&2)!==0)throw Error(n(440));return m.impl.apply(void 0,arguments)}}function OA(u,m){return bh(4,2,u,m)}function PA(u,m){return bh(4,4,u,m)}function IA(u,m){if(typeof m=="function"){u=u();var v=m(u);return function(){typeof v=="function"?v():m(null)}}if(m!=null)return u=u(),m.current=u,function(){m.current=null}}function DA(u,m,v){v=v!=null?v.concat([u]):null,bh(4,4,IA.bind(null,m,u),v)}function Qk(){}function MA(u,m){var v=Ds();m=m===void 0?null:m;var C=v.memoizedState;return m!==null&&Np(m,C[1])?C[0]:(v.memoizedState=[u,m],u)}function LA(u,m){var v=Ds();m=m===void 0?null:m;var C=v.memoizedState;if(m!==null&&Np(m,C[1]))return C[0];if(C=u(),jl){kr(!0);try{u()}finally{kr(!1)}}return v.memoizedState=[C,m],C}function Jk(u,m,v){return v===void 0||(Is&1073741824)!==0&&(ma&261930)===0?u.memoizedState=m:(u.memoizedState=v,u=RE(),hn.lanes|=u,wh|=u,v)}function RA(u,m,v,C){return A(v,m)?v:Jn.current!==null?(u=Jk(u,v,C),A(u,m)||(Ti=!0),u):(Is&42)===0||(Is&1073741824)!==0&&(ma&261930)===0?(Ti=!0,u.memoizedState=v):(u=RE(),hn.lanes|=u,wh|=u,m)}function FA(u,m,v,C,M){var V=he.p;he.p=V!==0&&8>V?V:8;var ue=de.T,Re={};de.T=Re,r5(u,!1,m,v);try{var Ze=M(),St=de.S;if(St!==null&&St(Re,Ze),Ze!==null&&typeof Ze=="object"&&typeof Ze.then=="function"){var $t=_e(Ze,C);Op(u,m,$t,hc(u))}else Op(u,m,C,hc(u))}catch(nr){Op(u,m,{then:function(){},status:"rejected",reason:nr},hc())}finally{he.p=V,ue!==null&&Re.types!==null&&(ue.types=Re.types),de.T=ue}}function JW(){}function e5(u,m,v,C){if(u.tag!==5)throw Error(n(476));var M=BA(u).queue;FA(u,M,m,Se,v===null?JW:function(){return UA(u),v(C)})}function BA(u){var m=u.memoizedState;if(m!==null)return m;m={memoizedState:Se,baseState:Se,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:$c,lastRenderedState:Se},next:null};var v={};return m.next={memoizedState:v,baseState:v,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:$c,lastRenderedState:v},next:null},u.memoizedState=m,u=u.alternate,u!==null&&(u.memoizedState=m),m}function UA(u){var m=BA(u);m.next===null&&(m=u.alternate.memoizedState),Op(u,m.next.queue,{},hc())}function t5(){return qi(Gp)}function zA(){return Ds().memoizedState}function qA(){return Ds().memoizedState}function eK(u){for(var m=u.return;m!==null;){switch(m.tag){case 24:case 3:var v=hc();u=Nn(v);var C=Wn(m,u,v);C!==null&&(Zo(C,m,v),Ra(C,m,v)),m={cache:mh()},u.payload=m;return}m=m.return}}function tK(u,m,v){var C=hc();v={lane:C,revertLane:0,gesture:null,action:v,hasEagerState:!1,eagerState:null,next:null},wv(u)?$A(m,v):(v=lx(u,m,v,C),v!==null&&(Zo(v,u,C),VA(v,m,C)))}function HA(u,m,v){var C=hc();Op(u,m,v,C)}function Op(u,m,v,C){var M={lane:C,revertLane:0,gesture:null,action:v,hasEagerState:!1,eagerState:null,next:null};if(wv(u))$A(m,M);else{var V=u.alternate;if(u.lanes===0&&(V===null||V.lanes===0)&&(V=m.lastRenderedReducer,V!==null))try{var ue=m.lastRenderedState,Re=V(ue,v);if(M.hasEagerState=!0,M.eagerState=Re,A(Re,ue))return Sf(u,m,M,0),hs===null&&_f(),!1}catch{}finally{}if(v=lx(u,m,M,C),v!==null)return Zo(v,u,C),VA(v,m,C),!0}return!1}function r5(u,m,v,C){if(C={lane:2,revertLane:D5(),gesture:null,action:C,hasEagerState:!1,eagerState:null,next:null},wv(u)){if(m)throw Error(n(479))}else m=lx(u,v,C,2),m!==null&&Zo(m,u,2)}function wv(u){var m=u.alternate;return u===hn||m!==null&&m===hn}function $A(u,m){Wo=ql=!0;var v=u.pending;v===null?m.next=m:(m.next=v.next,v.next=m),u.pending=m}function VA(u,m,v){if((v&4194048)!==0){var C=m.lanes;C&=u.pendingLanes,v|=C,m.lanes=v,gr(u,v)}}var Pp={readContext:qi,use:xh,useCallback:Ja,useContext:Ja,useEffect:Ja,useImperativeHandle:Ja,useLayoutEffect:Ja,useInsertionEffect:Ja,useMemo:Ja,useReducer:Ja,useRef:Ja,useState:Ja,useDebugValue:Ja,useDeferredValue:Ja,useTransition:Ja,useSyncExternalStore:Ja,useId:Ja,useHostTransitionStatus:Ja,useFormState:Ja,useActionState:Ja,useOptimistic:Ja,useMemoCache:Ja,useCacheRefresh:Ja};Pp.useEffectEvent=Ja;var WA={readContext:qi,use:xh,useCallback:function(u,m){return Ei().memoizedState=[u,m===void 0?null:m],u},useContext:qi,useEffect:EA,useImperativeHandle:function(u,m,v){v=v!=null?v.concat([u]):null,gh(4194308,4,IA.bind(null,m,u),v)},useLayoutEffect:function(u,m){return gh(4194308,4,u,m)},useInsertionEffect:function(u,m){gh(4,2,u,m)},useMemo:function(u,m){var v=Ei();m=m===void 0?null:m;var C=u();if(jl){kr(!0);try{u()}finally{kr(!1)}}return v.memoizedState=[C,m],C},useReducer:function(u,m,v){var C=Ei();if(v!==void 0){var M=v(m);if(jl){kr(!0);try{v(m)}finally{kr(!1)}}}else M=m;return C.memoizedState=C.baseState=M,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:u,lastRenderedState:M},C.queue=u,u=u.dispatch=tK.bind(null,hn,u),[C.memoizedState,u]},useRef:function(u){var m=Ei();return u={current:u},m.memoizedState=u},useState:function(u){u=gu(u);var m=u.queue,v=HA.bind(null,hn,m);return m.dispatch=v,[u.memoizedState,v]},useDebugValue:Qk,useDeferredValue:function(u,m){var v=Ei();return Jk(v,u,m)},useTransition:function(){var u=gu(!1);return u=FA.bind(null,hn,u.queue,!0,!1),Ei().memoizedState=u,[!1,u]},useSyncExternalStore:function(u,m,v){var C=hn,M=Ei();if(oa){if(v===void 0)throw Error(n(407));v=v()}else{if(v=m(),hs===null)throw Error(n(349));(ma&127)!==0||Pd(C,m,v)}M.memoizedState=v;var V={value:v,getSnapshot:m};return M.queue=V,EA(Ap.bind(null,C,V,u),[u]),C.flags|=2048,a0(9,{destroy:void 0},Cp.bind(null,C,V,v,m),null),v},useId:function(){var u=Ei(),m=hs.identifierPrefix;if(oa){var v=$o,C=Ho;v=(C&~(1<<32-Ke(C)-1)).toString(32)+v,m="_"+m+"R_"+v,v=ri++,0<v&&(m+="H"+v.toString(32)),m+="_"}else v=bx++,m="_"+m+"r_"+v.toString(32)+"_";return u.memoizedState=m},useHostTransitionStatus:t5,useFormState:Vc,useActionState:Vc,useOptimistic:function(u){var m=Ei();m.memoizedState=m.baseState=u;var v={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return m.queue=v,m=r5.bind(null,hn,!0,v),v.dispatch=m,[u,m]},useMemoCache:r0,useCacheRefresh:function(){return Ei().memoizedState=eK.bind(null,hn)},useEffectEvent:function(u){var m=Ei(),v={impl:u};return m.memoizedState=v,function(){if((Ba&2)!==0)throw Error(n(440));return v.impl.apply(void 0,arguments)}}},n5={readContext:qi,use:xh,useCallback:MA,useContext:qi,useEffect:Zk,useImperativeHandle:DA,useInsertionEffect:OA,useLayoutEffect:PA,useMemo:LA,useReducer:wx,useRef:yv,useState:function(){return wx($c)},useDebugValue:Qk,useDeferredValue:function(u,m){var v=Ds();return RA(v,gn.memoizedState,u,m)},useTransition:function(){var u=wx($c)[0],m=Ds().memoizedState;return[typeof u=="boolean"?u:pu(u),m]},useSyncExternalStore:Nx,useId:zA,useHostTransitionStatus:t5,useFormState:Id,useActionState:Id,useOptimistic:function(u,m){var v=Ds();return pv(v,gn,u,m)},useMemoCache:r0,useCacheRefresh:qA};n5.useEffectEvent=TA;var KA={readContext:qi,use:xh,useCallback:MA,useContext:qi,useEffect:Zk,useImperativeHandle:DA,useInsertionEffect:OA,useLayoutEffect:PA,useMemo:LA,useReducer:kx,useRef:yv,useState:function(){return kx($c)},useDebugValue:Qk,useDeferredValue:function(u,m){var v=Ds();return gn===null?Jk(v,u,m):RA(v,gn.memoizedState,u,m)},useTransition:function(){var u=kx($c)[0],m=Ds().memoizedState;return[typeof u=="boolean"?u:pu(u),m]},useSyncExternalStore:Nx,useId:zA,useHostTransitionStatus:t5,useFormState:jx,useActionState:jx,useOptimistic:function(u,m){var v=Ds();return gn!==null?pv(v,gn,u,m):(v.baseState=u,[u,v.queue.dispatch])},useMemoCache:r0,useCacheRefresh:qA};KA.useEffectEvent=TA;function a5(u,m,v,C){m=u.memoizedState,v=v(C,m),v=v==null?m:p({},m,v),u.memoizedState=v,u.lanes===0&&(u.updateQueue.baseState=v)}var s5={enqueueSetState:function(u,m,v){u=u._reactInternals;var C=hc(),M=Nn(C);M.payload=m,v!=null&&(M.callback=v),m=Wn(u,M,C),m!==null&&(Zo(m,u,C),Ra(m,u,C))},enqueueReplaceState:function(u,m,v){u=u._reactInternals;var C=hc(),M=Nn(C);M.tag=1,M.payload=m,v!=null&&(M.callback=v),m=Wn(u,M,C),m!==null&&(Zo(m,u,C),Ra(m,u,C))},enqueueForceUpdate:function(u,m){u=u._reactInternals;var v=hc(),C=Nn(v);C.tag=2,m!=null&&(C.callback=m),m=Wn(u,C,v),m!==null&&(Zo(m,u,v),Ra(m,u,v))}};function GA(u,m,v,C,M,V,ue){return u=u.stateNode,typeof u.shouldComponentUpdate=="function"?u.shouldComponentUpdate(C,V,ue):m.prototype&&m.prototype.isPureReactComponent?!I(v,C)||!I(M,V):!0}function XA(u,m,v,C){u=m.state,typeof m.componentWillReceiveProps=="function"&&m.componentWillReceiveProps(v,C),typeof m.UNSAFE_componentWillReceiveProps=="function"&&m.UNSAFE_componentWillReceiveProps(v,C),m.state!==u&&s5.enqueueReplaceState(m,m.state,null)}function Df(u,m){var v=m;if("ref"in m){v={};for(var C in m)C!=="ref"&&(v[C]=m[C])}if(u=u.defaultProps){v===m&&(v=p({},v));for(var M in u)v[M]===void 0&&(v[M]=u[M])}return v}function YA(u){Nf(u)}function ZA(u){console.error(u)}function QA(u){Nf(u)}function kv(u,m){try{var v=u.onUncaughtError;v(m.value,{componentStack:m.stack})}catch(C){setTimeout(function(){throw C})}}function JA(u,m,v){try{var C=u.onCaughtError;C(v.value,{componentStack:v.stack,errorBoundary:m.tag===1?m.stateNode:null})}catch(M){setTimeout(function(){throw M})}}function i5(u,m,v){return v=Nn(v),v.tag=3,v.payload={element:null},v.callback=function(){kv(u,m)},v}function eE(u){return u=Nn(u),u.tag=3,u}function tE(u,m,v,C){var M=v.type.getDerivedStateFromError;if(typeof M=="function"){var V=C.value;u.payload=function(){return M(V)},u.callback=function(){JA(m,v,C)}}var ue=v.stateNode;ue!==null&&typeof ue.componentDidCatch=="function"&&(u.callback=function(){JA(m,v,C),typeof M!="function"&&(kh===null?kh=new Set([this]):kh.add(this));var Re=C.stack;this.componentDidCatch(C.value,{componentStack:Re!==null?Re:""})})}function rK(u,m,v,C,M){if(v.flags|=32768,C!==null&&typeof C=="object"&&typeof C.then=="function"){if(m=v.alternate,m!==null&&hu(m,v,M,!0),v=ks.current,v!==null){switch(v.tag){case 31:case 13:return wa===null?Dv():v.alternate===null&&ni===0&&(ni=3),v.flags&=-257,v.flags|=65536,v.lanes=M,C===ut?v.flags|=16384:(m=v.updateQueue,m===null?v.updateQueue=new Set([C]):m.add(C),O5(u,C,M)),!1;case 22:return v.flags|=65536,C===ut?v.flags|=16384:(m=v.updateQueue,m===null?(m={transitions:null,markerInstances:null,retryQueue:new Set([C])},v.updateQueue=m):(v=m.retryQueue,v===null?m.retryQueue=new Set([C]):v.add(C)),O5(u,C,M)),!1}throw Error(n(435,v.tag))}return O5(u,C,M),Dv(),!1}if(oa)return m=ks.current,m!==null?((m.flags&65536)===0&&(m.flags|=256),m.flags|=65536,m.lanes=M,C!==cc&&(u=Error(n(422),{cause:C}),hh(Uo(u,v)))):(C!==cc&&(m=Error(n(423),{cause:C}),hh(Uo(m,v))),u=u.current.alternate,u.flags|=65536,M&=-M,u.lanes|=M,C=Uo(C,v),M=i5(u.stateNode,C,M),bi(u,M),ni!==4&&(ni=2)),!1;var V=Error(n(520),{cause:C});if(V=Uo(V,v),Up===null?Up=[V]:Up.push(V),ni!==4&&(ni=2),m===null)return!0;C=Uo(C,v),v=m;do{switch(v.tag){case 3:return v.flags|=65536,u=M&-M,v.lanes|=u,u=i5(v.stateNode,C,u),bi(v,u),!1;case 1:if(m=v.type,V=v.stateNode,(v.flags&128)===0&&(typeof m.getDerivedStateFromError=="function"||V!==null&&typeof V.componentDidCatch=="function"&&(kh===null||!kh.has(V))))return v.flags|=65536,M&=-M,v.lanes|=M,M=eE(M),tE(M,u,v,C),bi(v,M),!1}v=v.return}while(v!==null);return!1}var l5=Error(n(461)),Ti=!1;function Cl(u,m,v,C){m.child=u===null?Hn(m,null,v,C):us(m,u.child,v,C)}function rE(u,m,v,C,M){v=v.render;var V=m.ref;if("ref"in C){var ue={};for(var Re in C)Re!=="ref"&&(ue[Re]=C[Re])}else ue=C;return fu(m),C=_p(u,m,v,ue,V,M),Re=Sp(),u!==null&&!Ti?(jp(u,m,M),s0(u,m,M)):(oa&&Re&&yp(m),m.flags|=1,Cl(u,m,C,M),m.child)}function nE(u,m,v,C,M){if(u===null){var V=v.type;return typeof V=="function"&&!cx(V)&&V.defaultProps===void 0&&v.compare===null?(m.tag=15,m.type=V,aE(u,m,V,C,M)):(u=ch(v.type,null,C,m,m.mode,M),u.ref=m.ref,u.return=m,m.child=u)}if(V=u.child,!x5(u,M)){var ue=V.memoizedProps;if(v=v.compare,v=v!==null?v:I,v(ue,C)&&u.ref===m.ref)return s0(u,m,M)}return m.flags|=1,u=Bo(V,C),u.ref=m.ref,u.return=m,m.child=u}function aE(u,m,v,C,M){if(u!==null){var V=u.memoizedProps;if(I(V,C)&&u.ref===m.ref)if(Ti=!1,m.pendingProps=C=V,x5(u,M))(u.flags&131072)!==0&&(Ti=!0);else return m.lanes=u.lanes,s0(u,m,M)}return o5(u,m,v,C,M)}function sE(u,m,v,C){var M=C.children,V=u!==null?u.memoizedState:null;if(u===null&&m.stateNode===null&&(m.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),C.mode==="hidden"){if((m.flags&128)!==0){if(V=V!==null?V.baseLanes|v:v,u!==null){for(C=m.child=u.child,M=0;C!==null;)M=M|C.lanes|C.childLanes,C=C.sibling;C=M&~V}else C=0,m.child=null;return iE(u,m,V,v,C)}if((v&536870912)!==0)m.memoizedState={baseLanes:0,cachePool:null},u!==null&&Ue(m,V!==null?V.cachePool:null),V!==null?ws(m,V):Ca(),ei(m);else return C=m.lanes=536870912,iE(u,m,V!==null?V.baseLanes|v:v,v,C)}else V!==null?(Ue(m,V.cachePool),ws(m,V),ti(),m.memoizedState=null):(u!==null&&Ue(m,null),Ca(),ti());return Cl(u,m,M,v),m.child}function Ip(u,m){return u!==null&&u.tag===22||m.stateNode!==null||(m.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),m.sibling}function iE(u,m,v,C,M){var V=Fe();return V=V===null?null:{parent:$s._currentValue,pool:V},m.memoizedState={baseLanes:v,cachePool:V},u!==null&&Ue(m,null),Ca(),ei(m),u!==null&&hu(u,m,C,!0),m.childLanes=M,null}function Nv(u,m){return m=Sv({mode:m.mode,children:m.children},u.mode),m.ref=u.ref,u.child=m,m.return=u,m}function lE(u,m,v){return us(m,u.child,null,v),u=Nv(m,m.pendingProps),u.flags|=2,Ha(m),m.memoizedState=null,u}function nK(u,m,v){var C=m.pendingProps,M=(m.flags&128)!==0;if(m.flags&=-129,u===null){if(oa){if(C.mode==="hidden")return u=Nv(m,C),m.lanes=536870912,Ip(null,u);if(Fa(m),(u=ds)?(u=v8(u,Ps),u=u!==null&&u.data==="&"?u:null,u!==null&&(m.memoizedState={dehydrated:u,treeContext:ou!==null?{id:Ho,overflow:$o}:null,retryLane:536870912,hydrationErrors:null},v=dx(u),v.return=m,m.child=v,Ui=m,ds=null)):u=null,u===null)throw cu(m);return m.lanes=536870912,null}return Nv(m,C)}var V=u.memoizedState;if(V!==null){var ue=V.dehydrated;if(Fa(m),M)if(m.flags&256)m.flags&=-257,m=lE(u,m,v);else if(m.memoizedState!==null)m.child=u.child,m.flags|=128,m=null;else throw Error(n(558));else if(Ti||hu(u,m,v,!1),M=(v&u.childLanes)!==0,Ti||M){if(C=hs,C!==null&&(ue=_n(C,v),ue!==0&&ue!==V.retryLane))throw V.retryLane=ue,Ed(u,ue),Zo(C,u,ue),l5;Dv(),m=lE(u,m,v)}else u=V.treeContext,ds=Wc(ue.nextSibling),Ui=m,oa=!0,Sl=null,Ps=!1,u!==null&&fv(m,u),m=Nv(m,C),m.flags|=4096;return m}return u=Bo(u.child,{mode:C.mode,children:C.children}),u.ref=m.ref,m.child=u,u.return=m,u}function _v(u,m){var v=m.ref;if(v===null)u!==null&&u.ref!==null&&(m.flags|=4194816);else{if(typeof v!="function"&&typeof v!="object")throw Error(n(284));(u===null||u.ref!==v)&&(m.flags|=4194816)}}function o5(u,m,v,C,M){return fu(m),v=_p(u,m,v,C,void 0,M),C=Sp(),u!==null&&!Ti?(jp(u,m,M),s0(u,m,M)):(oa&&C&&yp(m),m.flags|=1,Cl(u,m,v,M),m.child)}function oE(u,m,v,C,M,V){return fu(m),m.updateQueue=null,v=Od(m,C,v,M),vx(u),C=Sp(),u!==null&&!Ti?(jp(u,m,V),s0(u,m,V)):(oa&&C&&yp(m),m.flags|=1,Cl(u,m,v,V),m.child)}function cE(u,m,v,C,M){if(fu(m),m.stateNode===null){var V=Bi,ue=v.contextType;typeof ue=="object"&&ue!==null&&(V=qi(ue)),V=new v(C,V),m.memoizedState=V.state!==null&&V.state!==void 0?V.state:null,V.updater=s5,m.stateNode=V,V._reactInternals=m,V=m.stateNode,V.props=C,V.state=m.memoizedState,V.refs={},Er(m),ue=v.contextType,V.context=typeof ue=="object"&&ue!==null?qi(ue):Bi,V.state=m.memoizedState,ue=v.getDerivedStateFromProps,typeof ue=="function"&&(a5(m,v,ue,C),V.state=m.memoizedState),typeof v.getDerivedStateFromProps=="function"||typeof V.getSnapshotBeforeUpdate=="function"||typeof V.UNSAFE_componentWillMount!="function"&&typeof V.componentWillMount!="function"||(ue=V.state,typeof V.componentWillMount=="function"&&V.componentWillMount(),typeof V.UNSAFE_componentWillMount=="function"&&V.UNSAFE_componentWillMount(),ue!==V.state&&s5.enqueueReplaceState(V,V.state,null),Qs(m,C,V,M),Qa(),V.state=m.memoizedState),typeof V.componentDidMount=="function"&&(m.flags|=4194308),C=!0}else if(u===null){V=m.stateNode;var Re=m.memoizedProps,Ze=Df(v,Re);V.props=Ze;var St=V.context,$t=v.contextType;ue=Bi,typeof $t=="object"&&$t!==null&&(ue=qi($t));var nr=v.getDerivedStateFromProps;$t=typeof nr=="function"||typeof V.getSnapshotBeforeUpdate=="function",Re=m.pendingProps!==Re,$t||typeof V.UNSAFE_componentWillReceiveProps!="function"&&typeof V.componentWillReceiveProps!="function"||(Re||St!==ue)&&XA(m,V,C,ue),zr=!1;var Et=m.memoizedState;V.state=Et,Qs(m,C,V,M),Qa(),St=m.memoizedState,Re||Et!==St||zr?(typeof nr=="function"&&(a5(m,v,nr,C),St=m.memoizedState),(Ze=zr||GA(m,v,Ze,C,Et,St,ue))?($t||typeof V.UNSAFE_componentWillMount!="function"&&typeof V.componentWillMount!="function"||(typeof V.componentWillMount=="function"&&V.componentWillMount(),typeof V.UNSAFE_componentWillMount=="function"&&V.UNSAFE_componentWillMount()),typeof V.componentDidMount=="function"&&(m.flags|=4194308)):(typeof V.componentDidMount=="function"&&(m.flags|=4194308),m.memoizedProps=C,m.memoizedState=St),V.props=C,V.state=St,V.context=ue,C=Ze):(typeof V.componentDidMount=="function"&&(m.flags|=4194308),C=!1)}else{V=m.stateNode,ys(u,m),ue=m.memoizedProps,$t=Df(v,ue),V.props=$t,nr=m.pendingProps,Et=V.context,St=v.contextType,Ze=Bi,typeof St=="object"&&St!==null&&(Ze=qi(St)),Re=v.getDerivedStateFromProps,(St=typeof Re=="function"||typeof V.getSnapshotBeforeUpdate=="function")||typeof V.UNSAFE_componentWillReceiveProps!="function"&&typeof V.componentWillReceiveProps!="function"||(ue!==nr||Et!==Ze)&&XA(m,V,C,Ze),zr=!1,Et=m.memoizedState,V.state=Et,Qs(m,C,V,M),Qa();var Dt=m.memoizedState;ue!==nr||Et!==Dt||zr||u!==null&&u.dependencies!==null&&xx(u.dependencies)?(typeof Re=="function"&&(a5(m,v,Re,C),Dt=m.memoizedState),($t=zr||GA(m,v,$t,C,Et,Dt,Ze)||u!==null&&u.dependencies!==null&&xx(u.dependencies))?(St||typeof V.UNSAFE_componentWillUpdate!="function"&&typeof V.componentWillUpdate!="function"||(typeof V.componentWillUpdate=="function"&&V.componentWillUpdate(C,Dt,Ze),typeof V.UNSAFE_componentWillUpdate=="function"&&V.UNSAFE_componentWillUpdate(C,Dt,Ze)),typeof V.componentDidUpdate=="function"&&(m.flags|=4),typeof V.getSnapshotBeforeUpdate=="function"&&(m.flags|=1024)):(typeof V.componentDidUpdate!="function"||ue===u.memoizedProps&&Et===u.memoizedState||(m.flags|=4),typeof V.getSnapshotBeforeUpdate!="function"||ue===u.memoizedProps&&Et===u.memoizedState||(m.flags|=1024),m.memoizedProps=C,m.memoizedState=Dt),V.props=C,V.state=Dt,V.context=Ze,C=$t):(typeof V.componentDidUpdate!="function"||ue===u.memoizedProps&&Et===u.memoizedState||(m.flags|=4),typeof V.getSnapshotBeforeUpdate!="function"||ue===u.memoizedProps&&Et===u.memoizedState||(m.flags|=1024),C=!1)}return V=C,_v(u,m),C=(m.flags&128)!==0,V||C?(V=m.stateNode,v=C&&typeof v.getDerivedStateFromError!="function"?null:V.render(),m.flags|=1,u!==null&&C?(m.child=us(m,u.child,null,M),m.child=us(m,null,v,M)):Cl(u,m,v,M),m.memoizedState=V.state,u=m.child):u=s0(u,m,M),u}function dE(u,m,v,C){return e0(),m.flags|=256,Cl(u,m,v,C),m.child}var c5={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function d5(u){return{baseLanes:u,cachePool:$e()}}function u5(u,m,v){return u=u!==null?u.childLanes&~v:0,m&&(u|=uc),u}function uE(u,m,v){var C=m.pendingProps,M=!1,V=(m.flags&128)!==0,ue;if((ue=V)||(ue=u!==null&&u.memoizedState===null?!1:(ga.current&2)!==0),ue&&(M=!0,m.flags&=-129),ue=(m.flags&32)!==0,m.flags&=-33,u===null){if(oa){if(M?Vs(m):ti(),(u=ds)?(u=v8(u,Ps),u=u!==null&&u.data!=="&"?u:null,u!==null&&(m.memoizedState={dehydrated:u,treeContext:ou!==null?{id:Ho,overflow:$o}:null,retryLane:536870912,hydrationErrors:null},v=dx(u),v.return=m,m.child=v,Ui=m,ds=null)):u=null,u===null)throw cu(m);return K5(u)?m.lanes=32:m.lanes=536870912,null}var Re=C.children;return C=C.fallback,M?(ti(),M=m.mode,Re=Sv({mode:"hidden",children:Re},M),C=lu(C,M,v,null),Re.return=m,C.return=m,Re.sibling=C,m.child=Re,C=m.child,C.memoizedState=d5(v),C.childLanes=u5(u,ue,v),m.memoizedState=c5,Ip(null,C)):(Vs(m),h5(m,Re))}var Ze=u.memoizedState;if(Ze!==null&&(Re=Ze.dehydrated,Re!==null)){if(V)m.flags&256?(Vs(m),m.flags&=-257,m=f5(u,m,v)):m.memoizedState!==null?(ti(),m.child=u.child,m.flags|=128,m=null):(ti(),Re=C.fallback,M=m.mode,C=Sv({mode:"visible",children:C.children},M),Re=lu(Re,M,v,null),Re.flags|=2,C.return=m,Re.return=m,C.sibling=Re,m.child=C,us(m,u.child,null,v),C=m.child,C.memoizedState=d5(v),C.childLanes=u5(u,ue,v),m.memoizedState=c5,m=Ip(null,C));else if(Vs(m),K5(Re)){if(ue=Re.nextSibling&&Re.nextSibling.dataset,ue)var St=ue.dgst;ue=St,C=Error(n(419)),C.stack="",C.digest=ue,hh({value:C,source:null,stack:null}),m=f5(u,m,v)}else if(Ti||hu(u,m,v,!1),ue=(v&u.childLanes)!==0,Ti||ue){if(ue=hs,ue!==null&&(C=_n(ue,v),C!==0&&C!==Ze.retryLane))throw Ze.retryLane=C,Ed(u,C),Zo(ue,u,C),l5;W5(Re)||Dv(),m=f5(u,m,v)}else W5(Re)?(m.flags|=192,m.child=u.child,m=null):(u=Ze.treeContext,ds=Wc(Re.nextSibling),Ui=m,oa=!0,Sl=null,Ps=!1,u!==null&&fv(m,u),m=h5(m,C.children),m.flags|=4096);return m}return M?(ti(),Re=C.fallback,M=m.mode,Ze=u.child,St=Ze.sibling,C=Bo(Ze,{mode:"hidden",children:C.children}),C.subtreeFlags=Ze.subtreeFlags&65011712,St!==null?Re=Bo(St,Re):(Re=lu(Re,M,v,null),Re.flags|=2),Re.return=m,C.return=m,C.sibling=Re,m.child=C,Ip(null,C),C=m.child,Re=u.child.memoizedState,Re===null?Re=d5(v):(M=Re.cachePool,M!==null?(Ze=$s._currentValue,M=M.parent!==Ze?{parent:Ze,pool:Ze}:M):M=$e(),Re={baseLanes:Re.baseLanes|v,cachePool:M}),C.memoizedState=Re,C.childLanes=u5(u,ue,v),m.memoizedState=c5,Ip(u.child,C)):(Vs(m),v=u.child,u=v.sibling,v=Bo(v,{mode:"visible",children:C.children}),v.return=m,v.sibling=null,u!==null&&(ue=m.deletions,ue===null?(m.deletions=[u],m.flags|=16):ue.push(u)),m.child=v,m.memoizedState=null,v)}function h5(u,m){return m=Sv({mode:"visible",children:m},u.mode),m.return=u,u.child=m}function Sv(u,m){return u=ol(22,u,null,m),u.lanes=0,u}function f5(u,m,v){return us(m,u.child,null,v),u=h5(m,m.pendingProps.children),u.flags|=2,m.memoizedState=null,u}function hE(u,m,v){u.lanes|=m;var C=u.alternate;C!==null&&(C.lanes|=m),fh(u.return,m,v)}function m5(u,m,v,C,M,V){var ue=u.memoizedState;ue===null?u.memoizedState={isBackwards:m,rendering:null,renderingStartTime:0,last:C,tail:v,tailMode:M,treeForkCount:V}:(ue.isBackwards=m,ue.rendering=null,ue.renderingStartTime=0,ue.last=C,ue.tail=v,ue.tailMode=M,ue.treeForkCount=V)}function fE(u,m,v){var C=m.pendingProps,M=C.revealOrder,V=C.tail;C=C.children;var ue=ga.current,Re=(ue&2)!==0;if(Re?(ue=ue&1|2,m.flags|=128):ue&=1,te(ga,ue),Cl(u,m,C,v),C=oa?Ef:0,!Re&&u!==null&&(u.flags&128)!==0)e:for(u=m.child;u!==null;){if(u.tag===13)u.memoizedState!==null&&hE(u,v,m);else if(u.tag===19)hE(u,v,m);else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===m)break e;for(;u.sibling===null;){if(u.return===null||u.return===m)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}switch(M){case"forwards":for(v=m.child,M=null;v!==null;)u=v.alternate,u!==null&&dl(u)===null&&(M=v),v=v.sibling;v=M,v===null?(M=m.child,m.child=null):(M=v.sibling,v.sibling=null),m5(m,!1,M,v,V,C);break;case"backwards":case"unstable_legacy-backwards":for(v=null,M=m.child,m.child=null;M!==null;){if(u=M.alternate,u!==null&&dl(u)===null){m.child=M;break}u=M.sibling,M.sibling=v,v=M,M=u}m5(m,!0,v,null,V,C);break;case"together":m5(m,!1,null,null,void 0,C);break;default:m.memoizedState=null}return m.child}function s0(u,m,v){if(u!==null&&(m.dependencies=u.dependencies),wh|=m.lanes,(v&m.childLanes)===0)if(u!==null){if(hu(u,m,v,!1),(v&m.childLanes)===0)return null}else return null;if(u!==null&&m.child!==u.child)throw Error(n(153));if(m.child!==null){for(u=m.child,v=Bo(u,u.pendingProps),m.child=v,v.return=m;u.sibling!==null;)u=u.sibling,v=v.sibling=Bo(u,u.pendingProps),v.return=m;v.sibling=null}return m.child}function x5(u,m){return(u.lanes&m)!==0?!0:(u=u.dependencies,!!(u!==null&&xx(u)))}function aK(u,m,v){switch(m.tag){case 3:me(m,m.stateNode.containerInfo),uu(m,$s,u.memoizedState.cache),e0();break;case 27:case 5:je(m);break;case 4:me(m,m.stateNode.containerInfo);break;case 10:uu(m,m.type,m.memoizedProps.value);break;case 31:if(m.memoizedState!==null)return m.flags|=128,Fa(m),null;break;case 13:var C=m.memoizedState;if(C!==null)return C.dehydrated!==null?(Vs(m),m.flags|=128,null):(v&m.child.childLanes)!==0?uE(u,m,v):(Vs(m),u=s0(u,m,v),u!==null?u.sibling:null);Vs(m);break;case 19:var M=(u.flags&128)!==0;if(C=(v&m.childLanes)!==0,C||(hu(u,m,v,!1),C=(v&m.childLanes)!==0),M){if(C)return fE(u,m,v);m.flags|=128}if(M=m.memoizedState,M!==null&&(M.rendering=null,M.tail=null,M.lastEffect=null),te(ga,ga.current),C)break;return null;case 22:return m.lanes=0,sE(u,m,v,m.pendingProps);case 24:uu(m,$s,u.memoizedState.cache)}return s0(u,m,v)}function mE(u,m,v){if(u!==null)if(u.memoizedProps!==m.pendingProps)Ti=!0;else{if(!x5(u,v)&&(m.flags&128)===0)return Ti=!1,aK(u,m,v);Ti=(u.flags&131072)!==0}else Ti=!1,oa&&(m.flags&1048576)!==0&&hv(m,Ef,m.index);switch(m.lanes=0,m.tag){case 16:e:{var C=m.pendingProps;if(u=kt(m.elementType),m.type=u,typeof u=="function")cx(u)?(C=Df(u,C),m.tag=1,m=cE(null,m,u,C,v)):(m.tag=0,m=o5(null,m,u,C,v));else{if(u!=null){var M=u.$$typeof;if(M===D){m.tag=11,m=rE(null,m,u,C,v);break e}else if(M===R){m.tag=14,m=nE(null,m,u,C,v);break e}}throw m=re(u)||u,Error(n(306,m,""))}}return m;case 0:return o5(u,m,m.type,m.pendingProps,v);case 1:return C=m.type,M=Df(C,m.pendingProps),cE(u,m,C,M,v);case 3:e:{if(me(m,m.stateNode.containerInfo),u===null)throw Error(n(387));C=m.pendingProps;var V=m.memoizedState;M=V.element,ys(u,m),Qs(m,C,null,v);var ue=m.memoizedState;if(C=ue.cache,uu(m,$s,C),C!==V.cache&&t0(m,[$s],v,!0),Qa(),C=ue.element,V.isDehydrated)if(V={element:C,isDehydrated:!1,cache:ue.cache},m.updateQueue.baseState=V,m.memoizedState=V,m.flags&256){m=dE(u,m,C,v);break e}else if(C!==M){M=Uo(Error(n(424)),m),hh(M),m=dE(u,m,C,v);break e}else{switch(u=m.stateNode.containerInfo,u.nodeType){case 9:u=u.body;break;default:u=u.nodeName==="HTML"?u.ownerDocument.body:u}for(ds=Wc(u.firstChild),Ui=m,oa=!0,Sl=null,Ps=!0,v=Hn(m,null,C,v),m.child=v;v;)v.flags=v.flags&-3|4096,v=v.sibling}else{if(e0(),C===M){m=s0(u,m,v);break e}Cl(u,m,C,v)}m=m.child}return m;case 26:return _v(u,m),u===null?(v=S8(m.type,null,m.pendingProps,null))?m.memoizedState=v:oa||(v=m.type,u=m.pendingProps,C=zv(ee.current).createElement(v),C[le]=m,C[ve]=u,Al(C,v,u),Ar(C),m.stateNode=C):m.memoizedState=S8(m.type,u.memoizedProps,m.pendingProps,u.memoizedState),null;case 27:return je(m),u===null&&oa&&(C=m.stateNode=k8(m.type,m.pendingProps,ee.current),Ui=m,Ps=!0,M=ds,jh(m.type)?(G5=M,ds=Wc(C.firstChild)):ds=M),Cl(u,m,m.pendingProps.children,v),_v(u,m),u===null&&(m.flags|=4194304),m.child;case 5:return u===null&&oa&&((M=C=ds)&&(C=DK(C,m.type,m.pendingProps,Ps),C!==null?(m.stateNode=C,Ui=m,ds=Wc(C.firstChild),Ps=!1,M=!0):M=!1),M||cu(m)),je(m),M=m.type,V=m.pendingProps,ue=u!==null?u.memoizedProps:null,C=V.children,H5(M,V)?C=null:ue!==null&&H5(M,ue)&&(m.flags|=32),m.memoizedState!==null&&(M=_p(u,m,Yk,null,null,v),Gp._currentValue=M),_v(u,m),Cl(u,m,C,v),m.child;case 6:return u===null&&oa&&((u=v=ds)&&(v=MK(v,m.pendingProps,Ps),v!==null?(m.stateNode=v,Ui=m,ds=null,u=!0):u=!1),u||cu(m)),null;case 13:return uE(u,m,v);case 4:return me(m,m.stateNode.containerInfo),C=m.pendingProps,u===null?m.child=us(m,null,C,v):Cl(u,m,C,v),m.child;case 11:return rE(u,m,m.type,m.pendingProps,v);case 7:return Cl(u,m,m.pendingProps,v),m.child;case 8:return Cl(u,m,m.pendingProps.children,v),m.child;case 12:return Cl(u,m,m.pendingProps.children,v),m.child;case 10:return C=m.pendingProps,uu(m,m.type,C.value),Cl(u,m,C.children,v),m.child;case 9:return M=m.type._context,C=m.pendingProps.children,fu(m),M=qi(M),C=C(M),m.flags|=1,Cl(u,m,C,v),m.child;case 14:return nE(u,m,m.type,m.pendingProps,v);case 15:return aE(u,m,m.type,m.pendingProps,v);case 19:return fE(u,m,v);case 31:return nK(u,m,v);case 22:return sE(u,m,v,m.pendingProps);case 24:return fu(m),C=qi($s),u===null?(M=Fe(),M===null&&(M=hs,V=mh(),M.pooledCache=V,V.refCount++,V!==null&&(M.pooledCacheLanes|=v),M=V),m.memoizedState={parent:C,cache:M},Er(m),uu(m,$s,M)):((u.lanes&v)!==0&&(ys(u,m),Qs(m,null,null,v),Qa()),M=u.memoizedState,V=m.memoizedState,M.parent!==C?(M={parent:C,cache:C},m.memoizedState=M,m.lanes===0&&(m.memoizedState=m.updateQueue.baseState=M),uu(m,$s,C)):(C=V.cache,uu(m,$s,C),C!==M.cache&&t0(m,[$s],v,!0))),Cl(u,m,m.pendingProps.children,v),m.child;case 29:throw m.pendingProps}throw Error(n(156,m.tag))}function i0(u){u.flags|=4}function p5(u,m,v,C,M){if((m=(u.mode&32)!==0)&&(m=!1),m){if(u.flags|=16777216,(M&335544128)===M)if(u.stateNode.complete)u.flags|=8192;else if(zE())u.flags|=8192;else throw Lt=ut,Nt}else u.flags&=-16777217}function xE(u,m){if(m.type!=="stylesheet"||(m.state.loading&4)!==0)u.flags&=-16777217;else if(u.flags|=16777216,!T8(m))if(zE())u.flags|=8192;else throw Lt=ut,Nt}function jv(u,m){m!==null&&(u.flags|=4),u.flags&16384&&(m=u.tag!==22?Yt():536870912,u.lanes|=m,Tx|=m)}function Dp(u,m){if(!oa)switch(u.tailMode){case"hidden":m=u.tail;for(var v=null;m!==null;)m.alternate!==null&&(v=m),m=m.sibling;v===null?u.tail=null:v.sibling=null;break;case"collapsed":v=u.tail;for(var C=null;v!==null;)v.alternate!==null&&(C=v),v=v.sibling;C===null?m||u.tail===null?u.tail=null:u.tail.sibling=null:C.sibling=null}}function Ns(u){var m=u.alternate!==null&&u.alternate.child===u.child,v=0,C=0;if(m)for(var M=u.child;M!==null;)v|=M.lanes|M.childLanes,C|=M.subtreeFlags&65011712,C|=M.flags&65011712,M.return=u,M=M.sibling;else for(M=u.child;M!==null;)v|=M.lanes|M.childLanes,C|=M.subtreeFlags,C|=M.flags,M.return=u,M=M.sibling;return u.subtreeFlags|=C,u.childLanes=v,m}function sK(u,m,v){var C=m.pendingProps;switch(fx(m),m.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ns(m),null;case 1:return Ns(m),null;case 3:return v=m.stateNode,C=null,u!==null&&(C=u.memoizedState.cache),m.memoizedState.cache!==C&&(m.flags|=2048),Vo($s),se(),v.pendingContext&&(v.context=v.pendingContext,v.pendingContext=null),(u===null||u.child===null)&&(zi(m)?i0(m):u===null||u.memoizedState.isDehydrated&&(m.flags&256)===0||(m.flags|=1024,kp())),Ns(m),null;case 26:var M=m.type,V=m.memoizedState;return u===null?(i0(m),V!==null?(Ns(m),xE(m,V)):(Ns(m),p5(m,M,null,C,v))):V?V!==u.memoizedState?(i0(m),Ns(m),xE(m,V)):(Ns(m),m.flags&=-16777217):(u=u.memoizedProps,u!==C&&i0(m),Ns(m),p5(m,M,u,C,v)),null;case 27:if(be(m),v=ee.current,M=m.type,u!==null&&m.stateNode!=null)u.memoizedProps!==C&&i0(m);else{if(!C){if(m.stateNode===null)throw Error(n(166));return Ns(m),null}u=Y.current,zi(m)?wp(m):(u=k8(M,C,v),m.stateNode=u,i0(m))}return Ns(m),null;case 5:if(be(m),M=m.type,u!==null&&m.stateNode!=null)u.memoizedProps!==C&&i0(m);else{if(!C){if(m.stateNode===null)throw Error(n(166));return Ns(m),null}if(V=Y.current,zi(m))wp(m);else{var ue=zv(ee.current);switch(V){case 1:V=ue.createElementNS("http://www.w3.org/2000/svg",M);break;case 2:V=ue.createElementNS("http://www.w3.org/1998/Math/MathML",M);break;default:switch(M){case"svg":V=ue.createElementNS("http://www.w3.org/2000/svg",M);break;case"math":V=ue.createElementNS("http://www.w3.org/1998/Math/MathML",M);break;case"script":V=ue.createElement("div"),V.innerHTML="<script><\/script>",V=V.removeChild(V.firstChild);break;case"select":V=typeof C.is=="string"?ue.createElement("select",{is:C.is}):ue.createElement("select"),C.multiple?V.multiple=!0:C.size&&(V.size=C.size);break;default:V=typeof C.is=="string"?ue.createElement(M,{is:C.is}):ue.createElement(M)}}V[le]=m,V[ve]=C;e:for(ue=m.child;ue!==null;){if(ue.tag===5||ue.tag===6)V.appendChild(ue.stateNode);else if(ue.tag!==4&&ue.tag!==27&&ue.child!==null){ue.child.return=ue,ue=ue.child;continue}if(ue===m)break e;for(;ue.sibling===null;){if(ue.return===null||ue.return===m)break e;ue=ue.return}ue.sibling.return=ue.return,ue=ue.sibling}m.stateNode=V;e:switch(Al(V,M,C),M){case"button":case"input":case"select":case"textarea":C=!!C.autoFocus;break e;case"img":C=!0;break e;default:C=!1}C&&i0(m)}}return Ns(m),p5(m,m.type,u===null?null:u.memoizedProps,m.pendingProps,v),null;case 6:if(u&&m.stateNode!=null)u.memoizedProps!==C&&i0(m);else{if(typeof C!="string"&&m.stateNode===null)throw Error(n(166));if(u=ee.current,zi(m)){if(u=m.stateNode,v=m.memoizedProps,C=null,M=Ui,M!==null)switch(M.tag){case 27:case 5:C=M.memoizedProps}u[le]=m,u=!!(u.nodeValue===v||C!==null&&C.suppressHydrationWarning===!0||u8(u.nodeValue,v)),u||cu(m,!0)}else u=zv(u).createTextNode(C),u[le]=m,m.stateNode=u}return Ns(m),null;case 31:if(v=m.memoizedState,u===null||u.memoizedState!==null){if(C=zi(m),v!==null){if(u===null){if(!C)throw Error(n(318));if(u=m.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(n(557));u[le]=m}else e0(),(m.flags&128)===0&&(m.memoizedState=null),m.flags|=4;Ns(m),u=!1}else v=kp(),u!==null&&u.memoizedState!==null&&(u.memoizedState.hydrationErrors=v),u=!0;if(!u)return m.flags&256?(Ha(m),m):(Ha(m),null);if((m.flags&128)!==0)throw Error(n(558))}return Ns(m),null;case 13:if(C=m.memoizedState,u===null||u.memoizedState!==null&&u.memoizedState.dehydrated!==null){if(M=zi(m),C!==null&&C.dehydrated!==null){if(u===null){if(!M)throw Error(n(318));if(M=m.memoizedState,M=M!==null?M.dehydrated:null,!M)throw Error(n(317));M[le]=m}else e0(),(m.flags&128)===0&&(m.memoizedState=null),m.flags|=4;Ns(m),M=!1}else M=kp(),u!==null&&u.memoizedState!==null&&(u.memoizedState.hydrationErrors=M),M=!0;if(!M)return m.flags&256?(Ha(m),m):(Ha(m),null)}return Ha(m),(m.flags&128)!==0?(m.lanes=v,m):(v=C!==null,u=u!==null&&u.memoizedState!==null,v&&(C=m.child,M=null,C.alternate!==null&&C.alternate.memoizedState!==null&&C.alternate.memoizedState.cachePool!==null&&(M=C.alternate.memoizedState.cachePool.pool),V=null,C.memoizedState!==null&&C.memoizedState.cachePool!==null&&(V=C.memoizedState.cachePool.pool),V!==M&&(C.flags|=2048)),v!==u&&v&&(m.child.flags|=8192),jv(m,m.updateQueue),Ns(m),null);case 4:return se(),u===null&&F5(m.stateNode.containerInfo),Ns(m),null;case 10:return Vo(m.type),Ns(m),null;case 19:if(F(ga),C=m.memoizedState,C===null)return Ns(m),null;if(M=(m.flags&128)!==0,V=C.rendering,V===null)if(M)Dp(C,!1);else{if(ni!==0||u!==null&&(u.flags&128)!==0)for(u=m.child;u!==null;){if(V=dl(u),V!==null){for(m.flags|=128,Dp(C,!1),u=V.updateQueue,m.updateQueue=u,jv(m,u),m.subtreeFlags=0,u=v,v=m.child;v!==null;)Cf(v,u),v=v.sibling;return te(ga,ga.current&1|2),oa&&go(m,C.treeForkCount),m.child}u=u.sibling}C.tail!==null&&mr()>Ov&&(m.flags|=128,M=!0,Dp(C,!1),m.lanes=4194304)}else{if(!M)if(u=dl(V),u!==null){if(m.flags|=128,M=!0,u=u.updateQueue,m.updateQueue=u,jv(m,u),Dp(C,!0),C.tail===null&&C.tailMode==="hidden"&&!V.alternate&&!oa)return Ns(m),null}else 2*mr()-C.renderingStartTime>Ov&&v!==536870912&&(m.flags|=128,M=!0,Dp(C,!1),m.lanes=4194304);C.isBackwards?(V.sibling=m.child,m.child=V):(u=C.last,u!==null?u.sibling=V:m.child=V,C.last=V)}return C.tail!==null?(u=C.tail,C.rendering=u,C.tail=u.sibling,C.renderingStartTime=mr(),u.sibling=null,v=ga.current,te(ga,M?v&1|2:v&1),oa&&go(m,C.treeForkCount),u):(Ns(m),null);case 22:case 23:return Ha(m),vi(),C=m.memoizedState!==null,u!==null?u.memoizedState!==null!==C&&(m.flags|=8192):C&&(m.flags|=8192),C?(v&536870912)!==0&&(m.flags&128)===0&&(Ns(m),m.subtreeFlags&6&&(m.flags|=8192)):Ns(m),v=m.updateQueue,v!==null&&jv(m,v.retryQueue),v=null,u!==null&&u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(v=u.memoizedState.cachePool.pool),C=null,m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(C=m.memoizedState.cachePool.pool),C!==v&&(m.flags|=2048),u!==null&&F(Pe),null;case 24:return v=null,u!==null&&(v=u.memoizedState.cache),m.memoizedState.cache!==v&&(m.flags|=2048),Vo($s),Ns(m),null;case 25:return null;case 30:return null}throw Error(n(156,m.tag))}function iK(u,m){switch(fx(m),m.tag){case 1:return u=m.flags,u&65536?(m.flags=u&-65537|128,m):null;case 3:return Vo($s),se(),u=m.flags,(u&65536)!==0&&(u&128)===0?(m.flags=u&-65537|128,m):null;case 26:case 27:case 5:return be(m),null;case 31:if(m.memoizedState!==null){if(Ha(m),m.alternate===null)throw Error(n(340));e0()}return u=m.flags,u&65536?(m.flags=u&-65537|128,m):null;case 13:if(Ha(m),u=m.memoizedState,u!==null&&u.dehydrated!==null){if(m.alternate===null)throw Error(n(340));e0()}return u=m.flags,u&65536?(m.flags=u&-65537|128,m):null;case 19:return F(ga),null;case 4:return se(),null;case 10:return Vo(m.type),null;case 22:case 23:return Ha(m),vi(),u!==null&&F(Pe),u=m.flags,u&65536?(m.flags=u&-65537|128,m):null;case 24:return Vo($s),null;case 25:return null;default:return null}}function pE(u,m){switch(fx(m),m.tag){case 3:Vo($s),se();break;case 26:case 27:case 5:be(m);break;case 4:se();break;case 31:m.memoizedState!==null&&Ha(m);break;case 13:Ha(m);break;case 19:F(ga);break;case 10:Vo(m.type);break;case 22:case 23:Ha(m),vi(),u!==null&&F(Pe);break;case 24:Vo($s)}}function Mp(u,m){try{var v=m.updateQueue,C=v!==null?v.lastEffect:null;if(C!==null){var M=C.next;v=M;do{if((v.tag&u)===u){C=void 0;var V=v.create,ue=v.inst;C=V(),ue.destroy=C}v=v.next}while(v!==M)}}catch(Re){Va(m,m.return,Re)}}function vh(u,m,v){try{var C=m.updateQueue,M=C!==null?C.lastEffect:null;if(M!==null){var V=M.next;C=V;do{if((C.tag&u)===u){var ue=C.inst,Re=ue.destroy;if(Re!==void 0){ue.destroy=void 0,M=m;var Ze=v,St=Re;try{St()}catch($t){Va(M,Ze,$t)}}}C=C.next}while(C!==V)}}catch($t){Va(m,m.return,$t)}}function gE(u){var m=u.updateQueue;if(m!==null){var v=u.stateNode;try{Js(m,v)}catch(C){Va(u,u.return,C)}}}function bE(u,m,v){v.props=Df(u.type,u.memoizedProps),v.state=u.memoizedState;try{v.componentWillUnmount()}catch(C){Va(u,m,C)}}function Lp(u,m){try{var v=u.ref;if(v!==null){switch(u.tag){case 26:case 27:case 5:var C=u.stateNode;break;case 30:C=u.stateNode;break;default:C=u.stateNode}typeof v=="function"?u.refCleanup=v(C):v.current=C}}catch(M){Va(u,m,M)}}function bu(u,m){var v=u.ref,C=u.refCleanup;if(v!==null)if(typeof C=="function")try{C()}catch(M){Va(u,m,M)}finally{u.refCleanup=null,u=u.alternate,u!=null&&(u.refCleanup=null)}else if(typeof v=="function")try{v(null)}catch(M){Va(u,m,M)}else v.current=null}function vE(u){var m=u.type,v=u.memoizedProps,C=u.stateNode;try{e:switch(m){case"button":case"input":case"select":case"textarea":v.autoFocus&&C.focus();break e;case"img":v.src?C.src=v.src:v.srcSet&&(C.srcset=v.srcSet)}}catch(M){Va(u,u.return,M)}}function g5(u,m,v){try{var C=u.stateNode;AK(C,u.type,v,m),C[ve]=m}catch(M){Va(u,u.return,M)}}function yE(u){return u.tag===5||u.tag===3||u.tag===26||u.tag===27&&jh(u.type)||u.tag===4}function b5(u){e:for(;;){for(;u.sibling===null;){if(u.return===null||yE(u.return))return null;u=u.return}for(u.sibling.return=u.return,u=u.sibling;u.tag!==5&&u.tag!==6&&u.tag!==18;){if(u.tag===27&&jh(u.type)||u.flags&2||u.child===null||u.tag===4)continue e;u.child.return=u,u=u.child}if(!(u.flags&2))return u.stateNode}}function v5(u,m,v){var C=u.tag;if(C===5||C===6)u=u.stateNode,m?(v.nodeType===9?v.body:v.nodeName==="HTML"?v.ownerDocument.body:v).insertBefore(u,m):(m=v.nodeType===9?v.body:v.nodeName==="HTML"?v.ownerDocument.body:v,m.appendChild(u),v=v._reactRootContainer,v!=null||m.onclick!==null||(m.onclick=tl));else if(C!==4&&(C===27&&jh(u.type)&&(v=u.stateNode,m=null),u=u.child,u!==null))for(v5(u,m,v),u=u.sibling;u!==null;)v5(u,m,v),u=u.sibling}function Cv(u,m,v){var C=u.tag;if(C===5||C===6)u=u.stateNode,m?v.insertBefore(u,m):v.appendChild(u);else if(C!==4&&(C===27&&jh(u.type)&&(v=u.stateNode),u=u.child,u!==null))for(Cv(u,m,v),u=u.sibling;u!==null;)Cv(u,m,v),u=u.sibling}function wE(u){var m=u.stateNode,v=u.memoizedProps;try{for(var C=u.type,M=m.attributes;M.length;)m.removeAttributeNode(M[0]);Al(m,C,v),m[le]=u,m[ve]=v}catch(V){Va(u,u.return,V)}}var l0=!1,Oi=!1,y5=!1,kE=typeof WeakSet=="function"?WeakSet:Set,ul=null;function lK(u,m){if(u=u.containerInfo,z5=Gv,u=pe(u),Ae(u)){if("selectionStart"in u)var v={start:u.selectionStart,end:u.selectionEnd};else e:{v=(v=u.ownerDocument)&&v.defaultView||window;var C=v.getSelection&&v.getSelection();if(C&&C.rangeCount!==0){v=C.anchorNode;var M=C.anchorOffset,V=C.focusNode;C=C.focusOffset;try{v.nodeType,V.nodeType}catch{v=null;break e}var ue=0,Re=-1,Ze=-1,St=0,$t=0,nr=u,Et=null;t:for(;;){for(var Dt;nr!==v||M!==0&&nr.nodeType!==3||(Re=ue+M),nr!==V||C!==0&&nr.nodeType!==3||(Ze=ue+C),nr.nodeType===3&&(ue+=nr.nodeValue.length),(Dt=nr.firstChild)!==null;)Et=nr,nr=Dt;for(;;){if(nr===u)break t;if(Et===v&&++St===M&&(Re=ue),Et===V&&++$t===C&&(Ze=ue),(Dt=nr.nextSibling)!==null)break;nr=Et,Et=nr.parentNode}nr=Dt}v=Re===-1||Ze===-1?null:{start:Re,end:Ze}}else v=null}v=v||{start:0,end:0}}else v=null;for(q5={focusedElem:u,selectionRange:v},Gv=!1,ul=m;ul!==null;)if(m=ul,u=m.child,(m.subtreeFlags&1028)!==0&&u!==null)u.return=m,ul=u;else for(;ul!==null;){switch(m=ul,V=m.alternate,u=m.flags,m.tag){case 0:if((u&4)!==0&&(u=m.updateQueue,u=u!==null?u.events:null,u!==null))for(v=0;v<u.length;v++)M=u[v],M.ref.impl=M.nextImpl;break;case 11:case 15:break;case 1:if((u&1024)!==0&&V!==null){u=void 0,v=m,M=V.memoizedProps,V=V.memoizedState,C=v.stateNode;try{var Gr=Df(v.type,M);u=C.getSnapshotBeforeUpdate(Gr,V),C.__reactInternalSnapshotBeforeUpdate=u}catch(Cn){Va(v,v.return,Cn)}}break;case 3:if((u&1024)!==0){if(u=m.stateNode.containerInfo,v=u.nodeType,v===9)V5(u);else if(v===1)switch(u.nodeName){case"HEAD":case"HTML":case"BODY":V5(u);break;default:u.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((u&1024)!==0)throw Error(n(163))}if(u=m.sibling,u!==null){u.return=m.return,ul=u;break}ul=m.return}}function NE(u,m,v){var C=v.flags;switch(v.tag){case 0:case 11:case 15:c0(u,v),C&4&&Mp(5,v);break;case 1:if(c0(u,v),C&4)if(u=v.stateNode,m===null)try{u.componentDidMount()}catch(ue){Va(v,v.return,ue)}else{var M=Df(v.type,m.memoizedProps);m=m.memoizedState;try{u.componentDidUpdate(M,m,u.__reactInternalSnapshotBeforeUpdate)}catch(ue){Va(v,v.return,ue)}}C&64&&gE(v),C&512&&Lp(v,v.return);break;case 3:if(c0(u,v),C&64&&(u=v.updateQueue,u!==null)){if(m=null,v.child!==null)switch(v.child.tag){case 27:case 5:m=v.child.stateNode;break;case 1:m=v.child.stateNode}try{Js(u,m)}catch(ue){Va(v,v.return,ue)}}break;case 27:m===null&&C&4&&wE(v);case 26:case 5:c0(u,v),m===null&&C&4&&vE(v),C&512&&Lp(v,v.return);break;case 12:c0(u,v);break;case 31:c0(u,v),C&4&&jE(u,v);break;case 13:c0(u,v),C&4&&CE(u,v),C&64&&(u=v.memoizedState,u!==null&&(u=u.dehydrated,u!==null&&(v=pK.bind(null,v),LK(u,v))));break;case 22:if(C=v.memoizedState!==null||l0,!C){m=m!==null&&m.memoizedState!==null||Oi,M=l0;var V=Oi;l0=C,(Oi=m)&&!V?d0(u,v,(v.subtreeFlags&8772)!==0):c0(u,v),l0=M,Oi=V}break;case 30:break;default:c0(u,v)}}function _E(u){var m=u.alternate;m!==null&&(u.alternate=null,_E(m)),u.child=null,u.deletions=null,u.sibling=null,u.tag===5&&(m=u.stateNode,m!==null&&Ut(m)),u.stateNode=null,u.return=null,u.dependencies=null,u.memoizedProps=null,u.memoizedState=null,u.pendingProps=null,u.stateNode=null,u.updateQueue=null}var Ms=null,Ko=!1;function o0(u,m,v){for(v=v.child;v!==null;)SE(u,m,v),v=v.sibling}function SE(u,m,v){if(mt&&typeof mt.onCommitFiberUnmount=="function")try{mt.onCommitFiberUnmount(lr,v)}catch{}switch(v.tag){case 26:Oi||bu(v,m),o0(u,m,v),v.memoizedState?v.memoizedState.count--:v.stateNode&&(v=v.stateNode,v.parentNode.removeChild(v));break;case 27:Oi||bu(v,m);var C=Ms,M=Ko;jh(v.type)&&(Ms=v.stateNode,Ko=!1),o0(u,m,v),Vp(v.stateNode),Ms=C,Ko=M;break;case 5:Oi||bu(v,m);case 6:if(C=Ms,M=Ko,Ms=null,o0(u,m,v),Ms=C,Ko=M,Ms!==null)if(Ko)try{(Ms.nodeType===9?Ms.body:Ms.nodeName==="HTML"?Ms.ownerDocument.body:Ms).removeChild(v.stateNode)}catch(V){Va(v,m,V)}else try{Ms.removeChild(v.stateNode)}catch(V){Va(v,m,V)}break;case 18:Ms!==null&&(Ko?(u=Ms,g8(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,v.stateNode),Fx(u)):g8(Ms,v.stateNode));break;case 4:C=Ms,M=Ko,Ms=v.stateNode.containerInfo,Ko=!0,o0(u,m,v),Ms=C,Ko=M;break;case 0:case 11:case 14:case 15:vh(2,v,m),Oi||vh(4,v,m),o0(u,m,v);break;case 1:Oi||(bu(v,m),C=v.stateNode,typeof C.componentWillUnmount=="function"&&bE(v,m,C)),o0(u,m,v);break;case 21:o0(u,m,v);break;case 22:Oi=(C=Oi)||v.memoizedState!==null,o0(u,m,v),Oi=C;break;default:o0(u,m,v)}}function jE(u,m){if(m.memoizedState===null&&(u=m.alternate,u!==null&&(u=u.memoizedState,u!==null))){u=u.dehydrated;try{Fx(u)}catch(v){Va(m,m.return,v)}}}function CE(u,m){if(m.memoizedState===null&&(u=m.alternate,u!==null&&(u=u.memoizedState,u!==null&&(u=u.dehydrated,u!==null))))try{Fx(u)}catch(v){Va(m,m.return,v)}}function oK(u){switch(u.tag){case 31:case 13:case 19:var m=u.stateNode;return m===null&&(m=u.stateNode=new kE),m;case 22:return u=u.stateNode,m=u._retryCache,m===null&&(m=u._retryCache=new kE),m;default:throw Error(n(435,u.tag))}}function Av(u,m){var v=oK(u);m.forEach(function(C){if(!v.has(C)){v.add(C);var M=gK.bind(null,u,C);C.then(M,M)}})}function Go(u,m){var v=m.deletions;if(v!==null)for(var C=0;C<v.length;C++){var M=v[C],V=u,ue=m,Re=ue;e:for(;Re!==null;){switch(Re.tag){case 27:if(jh(Re.type)){Ms=Re.stateNode,Ko=!1;break e}break;case 5:Ms=Re.stateNode,Ko=!1;break e;case 3:case 4:Ms=Re.stateNode.containerInfo,Ko=!0;break e}Re=Re.return}if(Ms===null)throw Error(n(160));SE(V,ue,M),Ms=null,Ko=!1,V=M.alternate,V!==null&&(V.return=null),M.return=null}if(m.subtreeFlags&13886)for(m=m.child;m!==null;)AE(m,u),m=m.sibling}var Md=null;function AE(u,m){var v=u.alternate,C=u.flags;switch(u.tag){case 0:case 11:case 14:case 15:Go(m,u),Xo(u),C&4&&(vh(3,u,u.return),Mp(3,u),vh(5,u,u.return));break;case 1:Go(m,u),Xo(u),C&512&&(Oi||v===null||bu(v,v.return)),C&64&&l0&&(u=u.updateQueue,u!==null&&(C=u.callbacks,C!==null&&(v=u.shared.hiddenCallbacks,u.shared.hiddenCallbacks=v===null?C:v.concat(C))));break;case 26:var M=Md;if(Go(m,u),Xo(u),C&512&&(Oi||v===null||bu(v,v.return)),C&4){var V=v!==null?v.memoizedState:null;if(C=u.memoizedState,v===null)if(C===null)if(u.stateNode===null){e:{C=u.type,v=u.memoizedProps,M=M.ownerDocument||M;t:switch(C){case"title":V=M.getElementsByTagName("title")[0],(!V||V[bt]||V[le]||V.namespaceURI==="http://www.w3.org/2000/svg"||V.hasAttribute("itemprop"))&&(V=M.createElement(C),M.head.insertBefore(V,M.querySelector("head > title"))),Al(V,C,v),V[le]=u,Ar(V),C=V;break e;case"link":var ue=A8("link","href",M).get(C+(v.href||""));if(ue){for(var Re=0;Re<ue.length;Re++)if(V=ue[Re],V.getAttribute("href")===(v.href==null||v.href===""?null:v.href)&&V.getAttribute("rel")===(v.rel==null?null:v.rel)&&V.getAttribute("title")===(v.title==null?null:v.title)&&V.getAttribute("crossorigin")===(v.crossOrigin==null?null:v.crossOrigin)){ue.splice(Re,1);break t}}V=M.createElement(C),Al(V,C,v),M.head.appendChild(V);break;case"meta":if(ue=A8("meta","content",M).get(C+(v.content||""))){for(Re=0;Re<ue.length;Re++)if(V=ue[Re],V.getAttribute("content")===(v.content==null?null:""+v.content)&&V.getAttribute("name")===(v.name==null?null:v.name)&&V.getAttribute("property")===(v.property==null?null:v.property)&&V.getAttribute("http-equiv")===(v.httpEquiv==null?null:v.httpEquiv)&&V.getAttribute("charset")===(v.charSet==null?null:v.charSet)){ue.splice(Re,1);break t}}V=M.createElement(C),Al(V,C,v),M.head.appendChild(V);break;default:throw Error(n(468,C))}V[le]=u,Ar(V),C=V}u.stateNode=C}else E8(M,u.type,u.stateNode);else u.stateNode=C8(M,C,u.memoizedProps);else V!==C?(V===null?v.stateNode!==null&&(v=v.stateNode,v.parentNode.removeChild(v)):V.count--,C===null?E8(M,u.type,u.stateNode):C8(M,C,u.memoizedProps)):C===null&&u.stateNode!==null&&g5(u,u.memoizedProps,v.memoizedProps)}break;case 27:Go(m,u),Xo(u),C&512&&(Oi||v===null||bu(v,v.return)),v!==null&&C&4&&g5(u,u.memoizedProps,v.memoizedProps);break;case 5:if(Go(m,u),Xo(u),C&512&&(Oi||v===null||bu(v,v.return)),u.flags&32){M=u.stateNode;try{ls(M,"")}catch(Gr){Va(u,u.return,Gr)}}C&4&&u.stateNode!=null&&(M=u.memoizedProps,g5(u,M,v!==null?v.memoizedProps:M)),C&1024&&(y5=!0);break;case 6:if(Go(m,u),Xo(u),C&4){if(u.stateNode===null)throw Error(n(162));C=u.memoizedProps,v=u.stateNode;try{v.nodeValue=C}catch(Gr){Va(u,u.return,Gr)}}break;case 3:if($v=null,M=Md,Md=qv(m.containerInfo),Go(m,u),Md=M,Xo(u),C&4&&v!==null&&v.memoizedState.isDehydrated)try{Fx(m.containerInfo)}catch(Gr){Va(u,u.return,Gr)}y5&&(y5=!1,EE(u));break;case 4:C=Md,Md=qv(u.stateNode.containerInfo),Go(m,u),Xo(u),Md=C;break;case 12:Go(m,u),Xo(u);break;case 31:Go(m,u),Xo(u),C&4&&(C=u.updateQueue,C!==null&&(u.updateQueue=null,Av(u,C)));break;case 13:Go(m,u),Xo(u),u.child.flags&8192&&u.memoizedState!==null!=(v!==null&&v.memoizedState!==null)&&(Tv=mr()),C&4&&(C=u.updateQueue,C!==null&&(u.updateQueue=null,Av(u,C)));break;case 22:M=u.memoizedState!==null;var Ze=v!==null&&v.memoizedState!==null,St=l0,$t=Oi;if(l0=St||M,Oi=$t||Ze,Go(m,u),Oi=$t,l0=St,Xo(u),C&8192)e:for(m=u.stateNode,m._visibility=M?m._visibility&-2:m._visibility|1,M&&(v===null||Ze||l0||Oi||Mf(u)),v=null,m=u;;){if(m.tag===5||m.tag===26){if(v===null){Ze=v=m;try{if(V=Ze.stateNode,M)ue=V.style,typeof ue.setProperty=="function"?ue.setProperty("display","none","important"):ue.display="none";else{Re=Ze.stateNode;var nr=Ze.memoizedProps.style,Et=nr!=null&&nr.hasOwnProperty("display")?nr.display:null;Re.style.display=Et==null||typeof Et=="boolean"?"":(""+Et).trim()}}catch(Gr){Va(Ze,Ze.return,Gr)}}}else if(m.tag===6){if(v===null){Ze=m;try{Ze.stateNode.nodeValue=M?"":Ze.memoizedProps}catch(Gr){Va(Ze,Ze.return,Gr)}}}else if(m.tag===18){if(v===null){Ze=m;try{var Dt=Ze.stateNode;M?b8(Dt,!0):b8(Ze.stateNode,!1)}catch(Gr){Va(Ze,Ze.return,Gr)}}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===u)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===u)break e;for(;m.sibling===null;){if(m.return===null||m.return===u)break e;v===m&&(v=null),m=m.return}v===m&&(v=null),m.sibling.return=m.return,m=m.sibling}C&4&&(C=u.updateQueue,C!==null&&(v=C.retryQueue,v!==null&&(C.retryQueue=null,Av(u,v))));break;case 19:Go(m,u),Xo(u),C&4&&(C=u.updateQueue,C!==null&&(u.updateQueue=null,Av(u,C)));break;case 30:break;case 21:break;default:Go(m,u),Xo(u)}}function Xo(u){var m=u.flags;if(m&2){try{for(var v,C=u.return;C!==null;){if(yE(C)){v=C;break}C=C.return}if(v==null)throw Error(n(160));switch(v.tag){case 27:var M=v.stateNode,V=b5(u);Cv(u,V,M);break;case 5:var ue=v.stateNode;v.flags&32&&(ls(ue,""),v.flags&=-33);var Re=b5(u);Cv(u,Re,ue);break;case 3:case 4:var Ze=v.stateNode.containerInfo,St=b5(u);v5(u,St,Ze);break;default:throw Error(n(161))}}catch($t){Va(u,u.return,$t)}u.flags&=-3}m&4096&&(u.flags&=-4097)}function EE(u){if(u.subtreeFlags&1024)for(u=u.child;u!==null;){var m=u;EE(m),m.tag===5&&m.flags&1024&&m.stateNode.reset(),u=u.sibling}}function c0(u,m){if(m.subtreeFlags&8772)for(m=m.child;m!==null;)NE(u,m.alternate,m),m=m.sibling}function Mf(u){for(u=u.child;u!==null;){var m=u;switch(m.tag){case 0:case 11:case 14:case 15:vh(4,m,m.return),Mf(m);break;case 1:bu(m,m.return);var v=m.stateNode;typeof v.componentWillUnmount=="function"&&bE(m,m.return,v),Mf(m);break;case 27:Vp(m.stateNode);case 26:case 5:bu(m,m.return),Mf(m);break;case 22:m.memoizedState===null&&Mf(m);break;case 30:Mf(m);break;default:Mf(m)}u=u.sibling}}function d0(u,m,v){for(v=v&&(m.subtreeFlags&8772)!==0,m=m.child;m!==null;){var C=m.alternate,M=u,V=m,ue=V.flags;switch(V.tag){case 0:case 11:case 15:d0(M,V,v),Mp(4,V);break;case 1:if(d0(M,V,v),C=V,M=C.stateNode,typeof M.componentDidMount=="function")try{M.componentDidMount()}catch(St){Va(C,C.return,St)}if(C=V,M=C.updateQueue,M!==null){var Re=C.stateNode;try{var Ze=M.shared.hiddenCallbacks;if(Ze!==null)for(M.shared.hiddenCallbacks=null,M=0;M<Ze.length;M++)cl(Ze[M],Re)}catch(St){Va(C,C.return,St)}}v&&ue&64&&gE(V),Lp(V,V.return);break;case 27:wE(V);case 26:case 5:d0(M,V,v),v&&C===null&&ue&4&&vE(V),Lp(V,V.return);break;case 12:d0(M,V,v);break;case 31:d0(M,V,v),v&&ue&4&&jE(M,V);break;case 13:d0(M,V,v),v&&ue&4&&CE(M,V);break;case 22:V.memoizedState===null&&d0(M,V,v),Lp(V,V.return);break;case 30:break;default:d0(M,V,v)}m=m.sibling}}function w5(u,m){var v=null;u!==null&&u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(v=u.memoizedState.cachePool.pool),u=null,m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(u=m.memoizedState.cachePool.pool),u!==v&&(u!=null&&u.refCount++,v!=null&&Tf(v))}function k5(u,m){u=null,m.alternate!==null&&(u=m.alternate.memoizedState.cache),m=m.memoizedState.cache,m!==u&&(m.refCount++,u!=null&&Tf(u))}function Ld(u,m,v,C){if(m.subtreeFlags&10256)for(m=m.child;m!==null;)TE(u,m,v,C),m=m.sibling}function TE(u,m,v,C){var M=m.flags;switch(m.tag){case 0:case 11:case 15:Ld(u,m,v,C),M&2048&&Mp(9,m);break;case 1:Ld(u,m,v,C);break;case 3:Ld(u,m,v,C),M&2048&&(u=null,m.alternate!==null&&(u=m.alternate.memoizedState.cache),m=m.memoizedState.cache,m!==u&&(m.refCount++,u!=null&&Tf(u)));break;case 12:if(M&2048){Ld(u,m,v,C),u=m.stateNode;try{var V=m.memoizedProps,ue=V.id,Re=V.onPostCommit;typeof Re=="function"&&Re(ue,m.alternate===null?"mount":"update",u.passiveEffectDuration,-0)}catch(Ze){Va(m,m.return,Ze)}}else Ld(u,m,v,C);break;case 31:Ld(u,m,v,C);break;case 13:Ld(u,m,v,C);break;case 23:break;case 22:V=m.stateNode,ue=m.alternate,m.memoizedState!==null?V._visibility&2?Ld(u,m,v,C):Rp(u,m):V._visibility&2?Ld(u,m,v,C):(V._visibility|=2,Cx(u,m,v,C,(m.subtreeFlags&10256)!==0||!1)),M&2048&&w5(ue,m);break;case 24:Ld(u,m,v,C),M&2048&&k5(m.alternate,m);break;default:Ld(u,m,v,C)}}function Cx(u,m,v,C,M){for(M=M&&((m.subtreeFlags&10256)!==0||!1),m=m.child;m!==null;){var V=u,ue=m,Re=v,Ze=C,St=ue.flags;switch(ue.tag){case 0:case 11:case 15:Cx(V,ue,Re,Ze,M),Mp(8,ue);break;case 23:break;case 22:var $t=ue.stateNode;ue.memoizedState!==null?$t._visibility&2?Cx(V,ue,Re,Ze,M):Rp(V,ue):($t._visibility|=2,Cx(V,ue,Re,Ze,M)),M&&St&2048&&w5(ue.alternate,ue);break;case 24:Cx(V,ue,Re,Ze,M),M&&St&2048&&k5(ue.alternate,ue);break;default:Cx(V,ue,Re,Ze,M)}m=m.sibling}}function Rp(u,m){if(m.subtreeFlags&10256)for(m=m.child;m!==null;){var v=u,C=m,M=C.flags;switch(C.tag){case 22:Rp(v,C),M&2048&&w5(C.alternate,C);break;case 24:Rp(v,C),M&2048&&k5(C.alternate,C);break;default:Rp(v,C)}m=m.sibling}}var Fp=8192;function Ax(u,m,v){if(u.subtreeFlags&Fp)for(u=u.child;u!==null;)OE(u,m,v),u=u.sibling}function OE(u,m,v){switch(u.tag){case 26:Ax(u,m,v),u.flags&Fp&&u.memoizedState!==null&&GK(v,Md,u.memoizedState,u.memoizedProps);break;case 5:Ax(u,m,v);break;case 3:case 4:var C=Md;Md=qv(u.stateNode.containerInfo),Ax(u,m,v),Md=C;break;case 22:u.memoizedState===null&&(C=u.alternate,C!==null&&C.memoizedState!==null?(C=Fp,Fp=16777216,Ax(u,m,v),Fp=C):Ax(u,m,v));break;default:Ax(u,m,v)}}function PE(u){var m=u.alternate;if(m!==null&&(u=m.child,u!==null)){m.child=null;do m=u.sibling,u.sibling=null,u=m;while(u!==null)}}function Bp(u){var m=u.deletions;if((u.flags&16)!==0){if(m!==null)for(var v=0;v<m.length;v++){var C=m[v];ul=C,DE(C,u)}PE(u)}if(u.subtreeFlags&10256)for(u=u.child;u!==null;)IE(u),u=u.sibling}function IE(u){switch(u.tag){case 0:case 11:case 15:Bp(u),u.flags&2048&&vh(9,u,u.return);break;case 3:Bp(u);break;case 12:Bp(u);break;case 22:var m=u.stateNode;u.memoizedState!==null&&m._visibility&2&&(u.return===null||u.return.tag!==13)?(m._visibility&=-3,Ev(u)):Bp(u);break;default:Bp(u)}}function Ev(u){var m=u.deletions;if((u.flags&16)!==0){if(m!==null)for(var v=0;v<m.length;v++){var C=m[v];ul=C,DE(C,u)}PE(u)}for(u=u.child;u!==null;){switch(m=u,m.tag){case 0:case 11:case 15:vh(8,m,m.return),Ev(m);break;case 22:v=m.stateNode,v._visibility&2&&(v._visibility&=-3,Ev(m));break;default:Ev(m)}u=u.sibling}}function DE(u,m){for(;ul!==null;){var v=ul;switch(v.tag){case 0:case 11:case 15:vh(8,v,m);break;case 23:case 22:if(v.memoizedState!==null&&v.memoizedState.cachePool!==null){var C=v.memoizedState.cachePool.pool;C!=null&&C.refCount++}break;case 24:Tf(v.memoizedState.cache)}if(C=v.child,C!==null)C.return=v,ul=C;else e:for(v=u;ul!==null;){C=ul;var M=C.sibling,V=C.return;if(_E(C),C===v){ul=null;break e}if(M!==null){M.return=V,ul=M;break e}ul=V}}}var cK={getCacheForType:function(u){var m=qi($s),v=m.data.get(u);return v===void 0&&(v=u(),m.data.set(u,v)),v},cacheSignal:function(){return qi($s).controller.signal}},dK=typeof WeakMap=="function"?WeakMap:Map,Ba=0,hs=null,ca=null,ma=0,$a=0,dc=null,yh=!1,Ex=!1,N5=!1,u0=0,ni=0,wh=0,Lf=0,_5=0,uc=0,Tx=0,Up=null,Yo=null,S5=!1,Tv=0,ME=0,Ov=1/0,Pv=null,kh=null,$i=0,Nh=null,Ox=null,h0=0,j5=0,C5=null,LE=null,zp=0,A5=null;function hc(){return(Ba&2)!==0&&ma!==0?ma&-ma:de.T!==null?D5():we()}function RE(){if(uc===0)if((ma&536870912)===0||oa){var u=Nr;Nr<<=1,(Nr&3932160)===0&&(Nr=262144),uc=u}else uc=536870912;return u=ks.current,u!==null&&(u.flags|=32),uc}function Zo(u,m,v){(u===hs&&($a===2||$a===9)||u.cancelPendingCommit!==null)&&(Px(u,0),_h(u,ma,uc,!1)),We(u,v),((Ba&2)===0||u!==hs)&&(u===hs&&((Ba&2)===0&&(Lf|=v),ni===4&&_h(u,ma,uc,!1)),vu(u))}function FE(u,m,v){if((Ba&6)!==0)throw Error(n(327));var C=!v&&(m&127)===0&&(m&u.expiredLanes)===0||$r(u,m),M=C?fK(u,m):T5(u,m,!0),V=C;do{if(M===0){Ex&&!C&&_h(u,m,0,!1);break}else{if(v=u.current.alternate,V&&!uK(v)){M=T5(u,m,!1),V=!1;continue}if(M===2){if(V=m,u.errorRecoveryDisabledLanes&V)var ue=0;else ue=u.pendingLanes&-536870913,ue=ue!==0?ue:ue&536870912?536870912:0;if(ue!==0){m=ue;e:{var Re=u;M=Up;var Ze=Re.current.memoizedState.isDehydrated;if(Ze&&(Px(Re,ue).flags|=256),ue=T5(Re,ue,!1),ue!==2){if(N5&&!Ze){Re.errorRecoveryDisabledLanes|=V,Lf|=V,M=4;break e}V=Yo,Yo=M,V!==null&&(Yo===null?Yo=V:Yo.push.apply(Yo,V))}M=ue}if(V=!1,M!==2)continue}}if(M===1){Px(u,0),_h(u,m,0,!0);break}e:{switch(C=u,V=M,V){case 0:case 1:throw Error(n(345));case 4:if((m&4194048)!==m)break;case 6:_h(C,m,uc,!yh);break e;case 2:Yo=null;break;case 3:case 5:break;default:throw Error(n(329))}if((m&62914560)===m&&(M=Tv+300-mr(),10<M)){if(_h(C,m,uc,!yh),hr(C,0,!0)!==0)break e;h0=m,C.timeoutHandle=x8(BE.bind(null,C,v,Yo,Pv,S5,m,uc,Lf,Tx,yh,V,"Throttled",-0,0),M);break e}BE(C,v,Yo,Pv,S5,m,uc,Lf,Tx,yh,V,null,-0,0)}}break}while(!0);vu(u)}function BE(u,m,v,C,M,V,ue,Re,Ze,St,$t,nr,Et,Dt){if(u.timeoutHandle=-1,nr=m.subtreeFlags,nr&8192||(nr&16785408)===16785408){nr={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:tl},OE(m,V,nr);var Gr=(V&62914560)===V?Tv-mr():(V&4194048)===V?ME-mr():0;if(Gr=XK(nr,Gr),Gr!==null){h0=V,u.cancelPendingCommit=Gr(KE.bind(null,u,m,V,v,C,M,ue,Re,Ze,$t,nr,null,Et,Dt)),_h(u,V,ue,!St);return}}KE(u,m,V,v,C,M,ue,Re,Ze)}function uK(u){for(var m=u;;){var v=m.tag;if((v===0||v===11||v===15)&&m.flags&16384&&(v=m.updateQueue,v!==null&&(v=v.stores,v!==null)))for(var C=0;C<v.length;C++){var M=v[C],V=M.getSnapshot;M=M.value;try{if(!A(V(),M))return!1}catch{return!1}}if(v=m.child,m.subtreeFlags&16384&&v!==null)v.return=m,m=v;else{if(m===u)break;for(;m.sibling===null;){if(m.return===null||m.return===u)return!0;m=m.return}m.sibling.return=m.return,m=m.sibling}}return!0}function _h(u,m,v,C){m&=~_5,m&=~Lf,u.suspendedLanes|=m,u.pingedLanes&=~m,C&&(u.warmLanes|=m),C=u.expirationTimes;for(var M=m;0<M;){var V=31-Ke(M),ue=1<<V;C[V]=-1,M&=~ue}v!==0&&Cr(u,v,m)}function Iv(){return(Ba&6)===0?(qp(0),!1):!0}function E5(){if(ca!==null){if($a===0)var u=ca.return;else u=ca,Hc=du=null,yx(u),ar=null,Xr=0,u=ca;for(;u!==null;)pE(u.alternate,u),u=u.return;ca=null}}function Px(u,m){var v=u.timeoutHandle;v!==-1&&(u.timeoutHandle=-1,OK(v)),v=u.cancelPendingCommit,v!==null&&(u.cancelPendingCommit=null,v()),h0=0,E5(),hs=u,ca=v=Bo(u.current,null),ma=m,$a=0,dc=null,yh=!1,Ex=$r(u,m),N5=!1,Tx=uc=_5=Lf=wh=ni=0,Yo=Up=null,S5=!1,(m&8)!==0&&(m|=m&32);var C=u.entangledLanes;if(C!==0)for(u=u.entanglements,C&=m;0<C;){var M=31-Ke(C),V=1<<M;m|=u[M],C&=~V}return u0=m,_f(),v}function UE(u,m){hn=null,de.H=Pp,m===it||m===He?(m=Wt(),$a=3):m===Nt?(m=Wt(),$a=4):$a=m===l5?8:m!==null&&typeof m=="object"&&typeof m.then=="function"?6:1,dc=m,ca===null&&(ni=1,kv(u,Uo(m,u.current)))}function zE(){var u=ks.current;return u===null?!0:(ma&4194048)===ma?wa===null:(ma&62914560)===ma||(ma&536870912)!==0?u===wa:!1}function qE(){var u=de.H;return de.H=Pp,u===null?Pp:u}function HE(){var u=de.A;return de.A=cK,u}function Dv(){ni=4,yh||(ma&4194048)!==ma&&ks.current!==null||(Ex=!0),(wh&134217727)===0&&(Lf&134217727)===0||hs===null||_h(hs,ma,uc,!1)}function T5(u,m,v){var C=Ba;Ba|=2;var M=qE(),V=HE();(hs!==u||ma!==m)&&(Pv=null,Px(u,m)),m=!1;var ue=ni;e:do try{if($a!==0&&ca!==null){var Re=ca,Ze=dc;switch($a){case 8:E5(),ue=6;break e;case 3:case 2:case 9:case 6:ks.current===null&&(m=!0);var St=$a;if($a=0,dc=null,Ix(u,Re,Ze,St),v&&Ex){ue=0;break e}break;default:St=$a,$a=0,dc=null,Ix(u,Re,Ze,St)}}hK(),ue=ni;break}catch($t){UE(u,$t)}while(!0);return m&&u.shellSuspendCounter++,Hc=du=null,Ba=C,de.H=M,de.A=V,ca===null&&(hs=null,ma=0,_f()),ue}function hK(){for(;ca!==null;)$E(ca)}function fK(u,m){var v=Ba;Ba|=2;var C=qE(),M=HE();hs!==u||ma!==m?(Pv=null,Ov=mr()+500,Px(u,m)):Ex=$r(u,m);e:do try{if($a!==0&&ca!==null){m=ca;var V=dc;t:switch($a){case 1:$a=0,dc=null,Ix(u,m,V,1);break;case 2:case 9:if(yt(V)){$a=0,dc=null,VE(m);break}m=function(){$a!==2&&$a!==9||hs!==u||($a=7),vu(u)},V.then(m,m);break e;case 3:$a=7;break e;case 4:$a=5;break e;case 7:yt(V)?($a=0,dc=null,VE(m)):($a=0,dc=null,Ix(u,m,V,7));break;case 5:var ue=null;switch(ca.tag){case 26:ue=ca.memoizedState;case 5:case 27:var Re=ca;if(ue?T8(ue):Re.stateNode.complete){$a=0,dc=null;var Ze=Re.sibling;if(Ze!==null)ca=Ze;else{var St=Re.return;St!==null?(ca=St,Mv(St)):ca=null}break t}}$a=0,dc=null,Ix(u,m,V,5);break;case 6:$a=0,dc=null,Ix(u,m,V,6);break;case 8:E5(),ni=6;break e;default:throw Error(n(462))}}mK();break}catch($t){UE(u,$t)}while(!0);return Hc=du=null,de.H=C,de.A=M,Ba=v,ca!==null?0:(hs=null,ma=0,_f(),ni)}function mK(){for(;ca!==null&&!Vt();)$E(ca)}function $E(u){var m=mE(u.alternate,u,u0);u.memoizedProps=u.pendingProps,m===null?Mv(u):ca=m}function VE(u){var m=u,v=m.alternate;switch(m.tag){case 15:case 0:m=oE(v,m,m.pendingProps,m.type,void 0,ma);break;case 11:m=oE(v,m,m.pendingProps,m.type.render,m.ref,ma);break;case 5:yx(m);default:pE(v,m),m=ca=Cf(m,u0),m=mE(v,m,u0)}u.memoizedProps=u.pendingProps,m===null?Mv(u):ca=m}function Ix(u,m,v,C){Hc=du=null,yx(m),ar=null,Xr=0;var M=m.return;try{if(rK(u,M,m,v,ma)){ni=1,kv(u,Uo(v,u.current)),ca=null;return}}catch(V){if(M!==null)throw ca=M,V;ni=1,kv(u,Uo(v,u.current)),ca=null;return}m.flags&32768?(oa||C===1?u=!0:Ex||(ma&536870912)!==0?u=!1:(yh=u=!0,(C===2||C===9||C===3||C===6)&&(C=ks.current,C!==null&&C.tag===13&&(C.flags|=16384))),WE(m,u)):Mv(m)}function Mv(u){var m=u;do{if((m.flags&32768)!==0){WE(m,yh);return}u=m.return;var v=sK(m.alternate,m,u0);if(v!==null){ca=v;return}if(m=m.sibling,m!==null){ca=m;return}ca=m=u}while(m!==null);ni===0&&(ni=5)}function WE(u,m){do{var v=iK(u.alternate,u);if(v!==null){v.flags&=32767,ca=v;return}if(v=u.return,v!==null&&(v.flags|=32768,v.subtreeFlags=0,v.deletions=null),!m&&(u=u.sibling,u!==null)){ca=u;return}ca=u=v}while(u!==null);ni=6,ca=null}function KE(u,m,v,C,M,V,ue,Re,Ze){u.cancelPendingCommit=null;do Lv();while($i!==0);if((Ba&6)!==0)throw Error(n(327));if(m!==null){if(m===u.current)throw Error(n(177));if(V=m.lanes|m.childLanes,V|=ix,Qt(u,v,V,ue,Re,Ze),u===hs&&(ca=hs=null,ma=0),Ox=m,Nh=u,h0=v,j5=V,C5=M,LE=C,(m.subtreeFlags&10256)!==0||(m.flags&10256)!==0?(u.callbackNode=null,u.callbackPriority=0,bK(er,function(){return QE(),null})):(u.callbackNode=null,u.callbackPriority=0),C=(m.flags&13878)!==0,(m.subtreeFlags&13878)!==0||C){C=de.T,de.T=null,M=he.p,he.p=2,ue=Ba,Ba|=4;try{lK(u,m,v)}finally{Ba=ue,he.p=M,de.T=C}}$i=1,GE(),XE(),YE()}}function GE(){if($i===1){$i=0;var u=Nh,m=Ox,v=(m.flags&13878)!==0;if((m.subtreeFlags&13878)!==0||v){v=de.T,de.T=null;var C=he.p;he.p=2;var M=Ba;Ba|=4;try{AE(m,u);var V=q5,ue=pe(u.containerInfo),Re=V.focusedElem,Ze=V.selectionRange;if(ue!==Re&&Re&&Re.ownerDocument&&oe(Re.ownerDocument.documentElement,Re)){if(Ze!==null&&Ae(Re)){var St=Ze.start,$t=Ze.end;if($t===void 0&&($t=St),"selectionStart"in Re)Re.selectionStart=St,Re.selectionEnd=Math.min($t,Re.value.length);else{var nr=Re.ownerDocument||document,Et=nr&&nr.defaultView||window;if(Et.getSelection){var Dt=Et.getSelection(),Gr=Re.textContent.length,Cn=Math.min(Ze.start,Gr),ts=Ze.end===void 0?Cn:Math.min(Ze.end,Gr);!Dt.extend&&Cn>ts&&(ue=ts,ts=Cn,Cn=ue);var gt=X(Re,Cn),ot=X(Re,ts);if(gt&&ot&&(Dt.rangeCount!==1||Dt.anchorNode!==gt.node||Dt.anchorOffset!==gt.offset||Dt.focusNode!==ot.node||Dt.focusOffset!==ot.offset)){var _t=nr.createRange();_t.setStart(gt.node,gt.offset),Dt.removeAllRanges(),Cn>ts?(Dt.addRange(_t),Dt.extend(ot.node,ot.offset)):(_t.setEnd(ot.node,ot.offset),Dt.addRange(_t))}}}}for(nr=[],Dt=Re;Dt=Dt.parentNode;)Dt.nodeType===1&&nr.push({element:Dt,left:Dt.scrollLeft,top:Dt.scrollTop});for(typeof Re.focus=="function"&&Re.focus(),Re=0;Re<nr.length;Re++){var Zt=nr[Re];Zt.element.scrollLeft=Zt.left,Zt.element.scrollTop=Zt.top}}Gv=!!z5,q5=z5=null}finally{Ba=M,he.p=C,de.T=v}}u.current=m,$i=2}}function XE(){if($i===2){$i=0;var u=Nh,m=Ox,v=(m.flags&8772)!==0;if((m.subtreeFlags&8772)!==0||v){v=de.T,de.T=null;var C=he.p;he.p=2;var M=Ba;Ba|=4;try{NE(u,m.alternate,m)}finally{Ba=M,he.p=C,de.T=v}}$i=3}}function YE(){if($i===4||$i===3){$i=0,Mt();var u=Nh,m=Ox,v=h0,C=LE;(m.subtreeFlags&10256)!==0||(m.flags&10256)!==0?$i=5:($i=0,Ox=Nh=null,ZE(u,u.pendingLanes));var M=u.pendingLanes;if(M===0&&(kh=null),Sn(v),m=m.stateNode,mt&&typeof mt.onCommitFiberRoot=="function")try{mt.onCommitFiberRoot(lr,m,void 0,(m.current.flags&128)===128)}catch{}if(C!==null){m=de.T,M=he.p,he.p=2,de.T=null;try{for(var V=u.onRecoverableError,ue=0;ue<C.length;ue++){var Re=C[ue];V(Re.value,{componentStack:Re.stack})}}finally{de.T=m,he.p=M}}(h0&3)!==0&&Lv(),vu(u),M=u.pendingLanes,(v&261930)!==0&&(M&42)!==0?u===A5?zp++:(zp=0,A5=u):zp=0,qp(0)}}function ZE(u,m){(u.pooledCacheLanes&=m)===0&&(m=u.pooledCache,m!=null&&(u.pooledCache=null,Tf(m)))}function Lv(){return GE(),XE(),YE(),QE()}function QE(){if($i!==5)return!1;var u=Nh,m=j5;j5=0;var v=Sn(h0),C=de.T,M=he.p;try{he.p=32>v?32:v,de.T=null,v=C5,C5=null;var V=Nh,ue=h0;if($i=0,Ox=Nh=null,h0=0,(Ba&6)!==0)throw Error(n(331));var Re=Ba;if(Ba|=4,IE(V.current),TE(V,V.current,ue,v),Ba=Re,qp(0,!1),mt&&typeof mt.onPostCommitFiberRoot=="function")try{mt.onPostCommitFiberRoot(lr,V)}catch{}return!0}finally{he.p=M,de.T=C,ZE(u,m)}}function JE(u,m,v){m=Uo(v,m),m=i5(u.stateNode,m,2),u=Wn(u,m,2),u!==null&&(We(u,2),vu(u))}function Va(u,m,v){if(u.tag===3)JE(u,u,v);else for(;m!==null;){if(m.tag===3){JE(m,u,v);break}else if(m.tag===1){var C=m.stateNode;if(typeof m.type.getDerivedStateFromError=="function"||typeof C.componentDidCatch=="function"&&(kh===null||!kh.has(C))){u=Uo(v,u),v=eE(2),C=Wn(m,v,2),C!==null&&(tE(v,C,m,u),We(C,2),vu(C));break}}m=m.return}}function O5(u,m,v){var C=u.pingCache;if(C===null){C=u.pingCache=new dK;var M=new Set;C.set(m,M)}else M=C.get(m),M===void 0&&(M=new Set,C.set(m,M));M.has(v)||(N5=!0,M.add(v),u=xK.bind(null,u,m,v),m.then(u,u))}function xK(u,m,v){var C=u.pingCache;C!==null&&C.delete(m),u.pingedLanes|=u.suspendedLanes&v,u.warmLanes&=~v,hs===u&&(ma&v)===v&&(ni===4||ni===3&&(ma&62914560)===ma&&300>mr()-Tv?(Ba&2)===0&&Px(u,0):_5|=v,Tx===ma&&(Tx=0)),vu(u)}function e8(u,m){m===0&&(m=Yt()),u=Ed(u,m),u!==null&&(We(u,m),vu(u))}function pK(u){var m=u.memoizedState,v=0;m!==null&&(v=m.retryLane),e8(u,v)}function gK(u,m){var v=0;switch(u.tag){case 31:case 13:var C=u.stateNode,M=u.memoizedState;M!==null&&(v=M.retryLane);break;case 19:C=u.stateNode;break;case 22:C=u.stateNode._retryCache;break;default:throw Error(n(314))}C!==null&&C.delete(m),e8(u,v)}function bK(u,m){return lt(u,m)}var Rv=null,Dx=null,P5=!1,Fv=!1,I5=!1,Sh=0;function vu(u){u!==Dx&&u.next===null&&(Dx===null?Rv=Dx=u:Dx=Dx.next=u),Fv=!0,P5||(P5=!0,yK())}function qp(u,m){if(!I5&&Fv){I5=!0;do for(var v=!1,C=Rv;C!==null;){if(u!==0){var M=C.pendingLanes;if(M===0)var V=0;else{var ue=C.suspendedLanes,Re=C.pingedLanes;V=(1<<31-Ke(42|u)+1)-1,V&=M&~(ue&~Re),V=V&201326741?V&201326741|1:V?V|2:0}V!==0&&(v=!0,a8(C,V))}else V=ma,V=hr(C,C===hs?V:0,C.cancelPendingCommit!==null||C.timeoutHandle!==-1),(V&3)===0||$r(C,V)||(v=!0,a8(C,V));C=C.next}while(v);I5=!1}}function vK(){t8()}function t8(){Fv=P5=!1;var u=0;Sh!==0&&TK()&&(u=Sh);for(var m=mr(),v=null,C=Rv;C!==null;){var M=C.next,V=r8(C,m);V===0?(C.next=null,v===null?Rv=M:v.next=M,M===null&&(Dx=v)):(v=C,(u!==0||(V&3)!==0)&&(Fv=!0)),C=M}$i!==0&&$i!==5||qp(u),Sh!==0&&(Sh=0)}function r8(u,m){for(var v=u.suspendedLanes,C=u.pingedLanes,M=u.expirationTimes,V=u.pendingLanes&-62914561;0<V;){var ue=31-Ke(V),Re=1<<ue,Ze=M[ue];Ze===-1?((Re&v)===0||(Re&C)!==0)&&(M[ue]=Dr(Re,m)):Ze<=m&&(u.expiredLanes|=Re),V&=~Re}if(m=hs,v=ma,v=hr(u,u===m?v:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),C=u.callbackNode,v===0||u===m&&($a===2||$a===9)||u.cancelPendingCommit!==null)return C!==null&&C!==null&&Ve(C),u.callbackNode=null,u.callbackPriority=0;if((v&3)===0||$r(u,v)){if(m=v&-v,m===u.callbackPriority)return m;switch(C!==null&&Ve(C),Sn(v)){case 2:case 8:v=Ir;break;case 32:v=er;break;case 268435456:v=Gt;break;default:v=er}return C=n8.bind(null,u),v=lt(v,C),u.callbackPriority=m,u.callbackNode=v,m}return C!==null&&C!==null&&Ve(C),u.callbackPriority=2,u.callbackNode=null,2}function n8(u,m){if($i!==0&&$i!==5)return u.callbackNode=null,u.callbackPriority=0,null;var v=u.callbackNode;if(Lv()&&u.callbackNode!==v)return null;var C=ma;return C=hr(u,u===hs?C:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),C===0?null:(FE(u,C,m),r8(u,mr()),u.callbackNode!=null&&u.callbackNode===v?n8.bind(null,u):null)}function a8(u,m){if(Lv())return null;FE(u,m,!0)}function yK(){PK(function(){(Ba&6)!==0?lt(sr,vK):t8()})}function D5(){if(Sh===0){var u=P;u===0&&(u=Pr,Pr<<=1,(Pr&261888)===0&&(Pr=256)),Sh=u}return Sh}function s8(u){return u==null||typeof u=="symbol"||typeof u=="boolean"?null:typeof u=="function"?u:wl(""+u)}function i8(u,m){var v=m.ownerDocument.createElement("input");return v.name=m.name,v.value=m.value,u.id&&v.setAttribute("form",u.id),m.parentNode.insertBefore(v,m),u=new FormData(u),v.parentNode.removeChild(v),u}function wK(u,m,v,C,M){if(m==="submit"&&v&&v.stateNode===M){var V=s8((M[ve]||null).action),ue=C.submitter;ue&&(m=(m=ue[ve]||null)?s8(m.formAction):ue.getAttribute("formAction"),m!==null&&(V=m,ue=null));var Re=new os("action","action",null,C,M);u.push({event:Re,listeners:[{instance:null,listener:function(){if(C.defaultPrevented){if(Sh!==0){var Ze=ue?i8(M,ue):new FormData(M);e5(v,{pending:!0,data:Ze,method:M.method,action:V},null,Ze)}}else typeof V=="function"&&(Re.preventDefault(),Ze=ue?i8(M,ue):new FormData(M),e5(v,{pending:!0,data:Ze,method:M.method,action:V},V,Ze))},currentTarget:M}]})}}for(var M5=0;M5<Ad.length;M5++){var L5=Ad[M5],kK=L5.toLowerCase(),NK=L5[0].toUpperCase()+L5.slice(1);Fo(kK,"on"+NK)}Fo(gi,"onAnimationEnd"),Fo(Ys,"onAnimationIteration"),Fo(ja,"onAnimationStart"),Fo("dblclick","onDoubleClick"),Fo("focusin","onFocus"),Fo("focusout","onBlur"),Fo(Zs,"onTransitionRun"),Fo(il,"onTransitionStart"),Fo(Cd,"onTransitionCancel"),Fo(qc,"onTransitionEnd"),Na("onMouseEnter",["mouseout","mouseover"]),Na("onMouseLeave",["mouseout","mouseover"]),Na("onPointerEnter",["pointerout","pointerover"]),Na("onPointerLeave",["pointerout","pointerover"]),en("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),en("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),en("onBeforeInput",["compositionend","keypress","textInput","paste"]),en("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),en("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),en("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Hp="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_K=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Hp));function l8(u,m){m=(m&4)!==0;for(var v=0;v<u.length;v++){var C=u[v],M=C.event;C=C.listeners;e:{var V=void 0;if(m)for(var ue=C.length-1;0<=ue;ue--){var Re=C[ue],Ze=Re.instance,St=Re.currentTarget;if(Re=Re.listener,Ze!==V&&M.isPropagationStopped())break e;V=Re,M.currentTarget=St;try{V(M)}catch($t){Nf($t)}M.currentTarget=null,V=Ze}else for(ue=0;ue<C.length;ue++){if(Re=C[ue],Ze=Re.instance,St=Re.currentTarget,Re=Re.listener,Ze!==V&&M.isPropagationStopped())break e;V=Re,M.currentTarget=St;try{V(M)}catch($t){Nf($t)}M.currentTarget=null,V=Ze}}}}function da(u,m){var v=m[nt];v===void 0&&(v=m[nt]=new Set);var C=u+"__bubble";v.has(C)||(o8(m,u,2,!1),v.add(C))}function R5(u,m,v){var C=0;m&&(C|=4),o8(v,u,C,m)}var Bv="_reactListening"+Math.random().toString(36).slice(2);function F5(u){if(!u[Bv]){u[Bv]=!0,It.forEach(function(v){v!=="selectionchange"&&(_K.has(v)||R5(v,!1,u),R5(v,!0,u))});var m=u.nodeType===9?u:u.ownerDocument;m===null||m[Bv]||(m[Bv]=!0,R5("selectionchange",!1,m))}}function o8(u,m,v,C){switch(R8(m)){case 2:var M=QK;break;case 8:M=JK;break;default:M=J5}v=M.bind(null,m,v,u),M=void 0,!Yu||m!=="touchstart"&&m!=="touchmove"&&m!=="wheel"||(M=!0),C?M!==void 0?u.addEventListener(m,v,{capture:!0,passive:M}):u.addEventListener(m,v,!0):M!==void 0?u.addEventListener(m,v,{passive:M}):u.addEventListener(m,v,!1)}function B5(u,m,v,C,M){var V=C;if((m&1)===0&&(m&2)===0&&C!==null)e:for(;;){if(C===null)return;var ue=C.tag;if(ue===3||ue===4){var Re=C.stateNode.containerInfo;if(Re===M)break;if(ue===4)for(ue=C.return;ue!==null;){var Ze=ue.tag;if((Ze===3||Ze===4)&&ue.stateNode.containerInfo===M)return;ue=ue.return}for(;Re!==null;){if(ue=rr(Re),ue===null)return;if(Ze=ue.tag,Ze===5||Ze===6||Ze===26||Ze===27){C=V=ue;continue e}Re=Re.parentNode}}C=C.return}oh(function(){var St=V,$t=kd(v),nr=[];e:{var Et=kf.get(u);if(Et!==void 0){var Dt=os,Gr=u;switch(u){case"keypress":if(Nl(v)===0)break e;case"keydown":case"keyup":Dt=aa;break;case"focusin":Gr="focus",Dt=oc;break;case"focusout":Gr="blur",Dt=oc;break;case"beforeblur":case"afterblur":Dt=oc;break;case"click":if(v.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Dt=Gn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Dt=jd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Dt=Hs;break;case gi:case Ys:case ja:Dt=G;break;case qc:Dt=cs;break;case"scroll":case"scrollend":Dt=_d;break;case"wheel":Dt=nl;break;case"copy":case"cut":case"paste":Dt=qe;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Dt=jn;break;case"toggle":case"beforetoggle":Dt=Rc}var Cn=(m&4)!==0,ts=!Cn&&(u==="scroll"||u==="scrollend"),gt=Cn?Et!==null?Et+"Capture":null:Et;Cn=[];for(var ot=St,_t;ot!==null;){var Zt=ot;if(_t=Zt.stateNode,Zt=Zt.tag,Zt!==5&&Zt!==26&&Zt!==27||_t===null||gt===null||(Zt=un(ot,gt),Zt!=null&&Cn.push($p(ot,Zt,_t))),ts)break;ot=ot.return}0<Cn.length&&(Et=new Dt(Et,Gr,null,v,$t),nr.push({event:Et,listeners:Cn}))}}if((m&7)===0){e:{if(Et=u==="mouseover"||u==="pointerover",Dt=u==="mouseout"||u==="pointerout",Et&&v!==co&&(Gr=v.relatedTarget||v.fromElement)&&(rr(Gr)||Gr[Oe]))break e;if((Dt||Et)&&(Et=$t.window===$t?$t:(Et=$t.ownerDocument)?Et.defaultView||Et.parentWindow:window,Dt?(Gr=v.relatedTarget||v.toElement,Dt=St,Gr=Gr?rr(Gr):null,Gr!==null&&(ts=s(Gr),Cn=Gr.tag,Gr!==ts||Cn!==5&&Cn!==27&&Cn!==6)&&(Gr=null)):(Dt=null,Gr=St),Dt!==Gr)){if(Cn=Gn,Zt="onMouseLeave",gt="onMouseEnter",ot="mouse",(u==="pointerout"||u==="pointerover")&&(Cn=jn,Zt="onPointerLeave",gt="onPointerEnter",ot="pointer"),ts=Dt==null?Et:dr(Dt),_t=Gr==null?Et:dr(Gr),Et=new Cn(Zt,ot+"leave",Dt,v,$t),Et.target=ts,Et.relatedTarget=_t,Zt=null,rr($t)===St&&(Cn=new Cn(gt,ot+"enter",Gr,v,$t),Cn.target=_t,Cn.relatedTarget=ts,Zt=Cn),ts=Zt,Dt&&Gr)t:{for(Cn=SK,gt=Dt,ot=Gr,_t=0,Zt=gt;Zt;Zt=Cn(Zt))_t++;Zt=0;for(var bn=ot;bn;bn=Cn(bn))Zt++;for(;0<_t-Zt;)gt=Cn(gt),_t--;for(;0<Zt-_t;)ot=Cn(ot),Zt--;for(;_t--;){if(gt===ot||ot!==null&&gt===ot.alternate){Cn=gt;break t}gt=Cn(gt),ot=Cn(ot)}Cn=null}else Cn=null;Dt!==null&&c8(nr,Et,Dt,Cn,!1),Gr!==null&&ts!==null&&c8(nr,ts,Gr,Cn,!0)}}e:{if(Et=St?dr(St):window,Dt=Et.nodeName&&Et.nodeName.toLowerCase(),Dt==="select"||Dt==="input"&&Et.type==="file")var Oa=xi;else if(iu(Et))if(al)Oa=_;else{Oa=x;var tn=h}else Dt=Et.nodeName,!Dt||Dt.toLowerCase()!=="input"||Et.type!=="checkbox"&&Et.type!=="radio"?St&&na(St.elementType)&&(Oa=xi):Oa=b;if(Oa&&(Oa=Oa(u,St))){gs(nr,Oa,v,$t);break e}tn&&tn(u,Et,St),u==="focusout"&&St&&Et.type==="number"&&St.memoizedProps.value!=null&&Be(Et,"number",Et.value)}switch(tn=St?dr(St):window,u){case"focusin":(iu(tn)||tn.contentEditable==="true")&&(Xe=tn,tt=St,xt=null);break;case"focusout":xt=tt=Xe=null;break;case"mousedown":jt=!0;break;case"contextmenu":case"mouseup":case"dragend":jt=!1,qt(nr,v,$t);break;case"selectionchange":if(ze)break;case"keydown":case"keyup":qt(nr,v,$t)}var Xn;if(Rl)e:{switch(u){case"compositionstart":var xa="onCompositionStart";break e;case"compositionend":xa="onCompositionEnd";break e;case"compositionupdate":xa="onCompositionUpdate";break e}xa=void 0}else Ro?zc(u,v)&&(xa="onCompositionEnd"):u==="keydown"&&v.keyCode===229&&(xa="onCompositionStart");xa&&(Uc&&v.locale!=="ko"&&(Ro||xa!=="onCompositionStart"?xa==="onCompositionEnd"&&Ro&&(Xn=ho()):(rl=$t,kl="value"in rl?rl.value:rl.textContent,Ro=!0)),tn=Uv(St,xa),0<tn.length&&(xa=new pt(xa,u,null,v,$t),nr.push({event:xa,listeners:tn}),Xn?xa.data=Xn:(Xn=Lo(v),Xn!==null&&(xa.data=Xn)))),(Xn=Bc?Sa(u,v):Bl(u,v))&&(xa=Uv(St,"onBeforeInput"),0<xa.length&&(tn=new pt("onBeforeInput","beforeinput",null,v,$t),nr.push({event:tn,listeners:xa}),tn.data=Xn)),wK(nr,u,St,v,$t)}l8(nr,m)})}function $p(u,m,v){return{instance:u,listener:m,currentTarget:v}}function Uv(u,m){for(var v=m+"Capture",C=[];u!==null;){var M=u,V=M.stateNode;if(M=M.tag,M!==5&&M!==26&&M!==27||V===null||(M=un(u,v),M!=null&&C.unshift($p(u,M,V)),M=un(u,m),M!=null&&C.push($p(u,M,V))),u.tag===3)return C;u=u.return}return[]}function SK(u){if(u===null)return null;do u=u.return;while(u&&u.tag!==5&&u.tag!==27);return u||null}function c8(u,m,v,C,M){for(var V=m._reactName,ue=[];v!==null&&v!==C;){var Re=v,Ze=Re.alternate,St=Re.stateNode;if(Re=Re.tag,Ze!==null&&Ze===C)break;Re!==5&&Re!==26&&Re!==27||St===null||(Ze=St,M?(St=un(v,V),St!=null&&ue.unshift($p(v,St,Ze))):M||(St=un(v,V),St!=null&&ue.push($p(v,St,Ze)))),v=v.return}ue.length!==0&&u.push({event:m,listeners:ue})}var jK=/\r\n?/g,CK=/\u0000|\uFFFD/g;function d8(u){return(typeof u=="string"?u:""+u).replace(jK,`
`).replace(CK,"")}function u8(u,m){return m=d8(m),d8(u)===m}function es(u,m,v,C,M,V){switch(v){case"children":typeof C=="string"?m==="body"||m==="textarea"&&C===""||ls(u,C):(typeof C=="number"||typeof C=="bigint")&&m!=="body"&&ls(u,""+C);break;case"className":To(u,"class",C);break;case"tabIndex":To(u,"tabindex",C);break;case"dir":case"role":case"viewBox":case"width":case"height":To(u,v,C);break;case"style":Lr(u,C,V);break;case"data":if(m!=="object"){To(u,"data",C);break}case"src":case"href":if(C===""&&(m!=="a"||v!=="href")){u.removeAttribute(v);break}if(C==null||typeof C=="function"||typeof C=="symbol"||typeof C=="boolean"){u.removeAttribute(v);break}C=wl(""+C),u.setAttribute(v,C);break;case"action":case"formAction":if(typeof C=="function"){u.setAttribute(v,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof V=="function"&&(v==="formAction"?(m!=="input"&&es(u,m,"name",M.name,M,null),es(u,m,"formEncType",M.formEncType,M,null),es(u,m,"formMethod",M.formMethod,M,null),es(u,m,"formTarget",M.formTarget,M,null)):(es(u,m,"encType",M.encType,M,null),es(u,m,"method",M.method,M,null),es(u,m,"target",M.target,M,null)));if(C==null||typeof C=="symbol"||typeof C=="boolean"){u.removeAttribute(v);break}C=wl(""+C),u.setAttribute(v,C);break;case"onClick":C!=null&&(u.onclick=tl);break;case"onScroll":C!=null&&da("scroll",u);break;case"onScrollEnd":C!=null&&da("scrollend",u);break;case"dangerouslySetInnerHTML":if(C!=null){if(typeof C!="object"||!("__html"in C))throw Error(n(61));if(v=C.__html,v!=null){if(M.children!=null)throw Error(n(60));u.innerHTML=v}}break;case"multiple":u.multiple=C&&typeof C!="function"&&typeof C!="symbol";break;case"muted":u.muted=C&&typeof C!="function"&&typeof C!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(C==null||typeof C=="function"||typeof C=="boolean"||typeof C=="symbol"){u.removeAttribute("xlink:href");break}v=wl(""+C),u.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",v);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":C!=null&&typeof C!="function"&&typeof C!="symbol"?u.setAttribute(v,""+C):u.removeAttribute(v);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":C&&typeof C!="function"&&typeof C!="symbol"?u.setAttribute(v,""):u.removeAttribute(v);break;case"capture":case"download":C===!0?u.setAttribute(v,""):C!==!1&&C!=null&&typeof C!="function"&&typeof C!="symbol"?u.setAttribute(v,C):u.removeAttribute(v);break;case"cols":case"rows":case"size":case"span":C!=null&&typeof C!="function"&&typeof C!="symbol"&&!isNaN(C)&&1<=C?u.setAttribute(v,C):u.removeAttribute(v);break;case"rowSpan":case"start":C==null||typeof C=="function"||typeof C=="symbol"||isNaN(C)?u.removeAttribute(v):u.setAttribute(v,C);break;case"popover":da("beforetoggle",u),da("toggle",u),is(u,"popover",C);break;case"xlinkActuate":ln(u,"http://www.w3.org/1999/xlink","xlink:actuate",C);break;case"xlinkArcrole":ln(u,"http://www.w3.org/1999/xlink","xlink:arcrole",C);break;case"xlinkRole":ln(u,"http://www.w3.org/1999/xlink","xlink:role",C);break;case"xlinkShow":ln(u,"http://www.w3.org/1999/xlink","xlink:show",C);break;case"xlinkTitle":ln(u,"http://www.w3.org/1999/xlink","xlink:title",C);break;case"xlinkType":ln(u,"http://www.w3.org/1999/xlink","xlink:type",C);break;case"xmlBase":ln(u,"http://www.w3.org/XML/1998/namespace","xml:base",C);break;case"xmlLang":ln(u,"http://www.w3.org/XML/1998/namespace","xml:lang",C);break;case"xmlSpace":ln(u,"http://www.w3.org/XML/1998/namespace","xml:space",C);break;case"is":is(u,"is",C);break;case"innerText":case"textContent":break;default:(!(2<v.length)||v[0]!=="o"&&v[0]!=="O"||v[1]!=="n"&&v[1]!=="N")&&(v=oo.get(v)||v,is(u,v,C))}}function U5(u,m,v,C,M,V){switch(v){case"style":Lr(u,C,V);break;case"dangerouslySetInnerHTML":if(C!=null){if(typeof C!="object"||!("__html"in C))throw Error(n(61));if(v=C.__html,v!=null){if(M.children!=null)throw Error(n(60));u.innerHTML=v}}break;case"children":typeof C=="string"?ls(u,C):(typeof C=="number"||typeof C=="bigint")&&ls(u,""+C);break;case"onScroll":C!=null&&da("scroll",u);break;case"onScrollEnd":C!=null&&da("scrollend",u);break;case"onClick":C!=null&&(u.onclick=tl);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Un.hasOwnProperty(v))e:{if(v[0]==="o"&&v[1]==="n"&&(M=v.endsWith("Capture"),m=v.slice(2,M?v.length-7:void 0),V=u[ve]||null,V=V!=null?V[v]:null,typeof V=="function"&&u.removeEventListener(m,V,M),typeof C=="function")){typeof V!="function"&&V!==null&&(v in u?u[v]=null:u.hasAttribute(v)&&u.removeAttribute(v)),u.addEventListener(m,C,M);break e}v in u?u[v]=C:C===!0?u.setAttribute(v,""):is(u,v,C)}}}function Al(u,m,v){switch(m){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":da("error",u),da("load",u);var C=!1,M=!1,V;for(V in v)if(v.hasOwnProperty(V)){var ue=v[V];if(ue!=null)switch(V){case"src":C=!0;break;case"srcSet":M=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,m));default:es(u,m,V,ue,v,null)}}M&&es(u,m,"srcSet",v.srcSet,v,null),C&&es(u,m,"src",v.src,v,null);return;case"input":da("invalid",u);var Re=V=ue=M=null,Ze=null,St=null;for(C in v)if(v.hasOwnProperty(C)){var $t=v[C];if($t!=null)switch(C){case"name":M=$t;break;case"type":ue=$t;break;case"checked":Ze=$t;break;case"defaultChecked":St=$t;break;case"value":V=$t;break;case"defaultValue":Re=$t;break;case"children":case"dangerouslySetInnerHTML":if($t!=null)throw Error(n(137,m));break;default:es(u,m,C,$t,v,null)}}ct(u,V,Re,Ze,St,ue,M,!1);return;case"select":da("invalid",u),C=ue=V=null;for(M in v)if(v.hasOwnProperty(M)&&(Re=v[M],Re!=null))switch(M){case"value":V=Re;break;case"defaultValue":ue=Re;break;case"multiple":C=Re;default:es(u,m,M,Re,v,null)}m=V,v=ue,u.multiple=!!C,m!=null?vr(u,!!C,m,!1):v!=null&&vr(u,!!C,v,!0);return;case"textarea":da("invalid",u),V=M=C=null;for(ue in v)if(v.hasOwnProperty(ue)&&(Re=v[ue],Re!=null))switch(ue){case"value":C=Re;break;case"defaultValue":M=Re;break;case"children":V=Re;break;case"dangerouslySetInnerHTML":if(Re!=null)throw Error(n(91));break;default:es(u,m,ue,Re,v,null)}qa(u,C,M,V);return;case"option":for(Ze in v)if(v.hasOwnProperty(Ze)&&(C=v[Ze],C!=null))switch(Ze){case"selected":u.selected=C&&typeof C!="function"&&typeof C!="symbol";break;default:es(u,m,Ze,C,v,null)}return;case"dialog":da("beforetoggle",u),da("toggle",u),da("cancel",u),da("close",u);break;case"iframe":case"object":da("load",u);break;case"video":case"audio":for(C=0;C<Hp.length;C++)da(Hp[C],u);break;case"image":da("error",u),da("load",u);break;case"details":da("toggle",u);break;case"embed":case"source":case"link":da("error",u),da("load",u);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(St in v)if(v.hasOwnProperty(St)&&(C=v[St],C!=null))switch(St){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,m));default:es(u,m,St,C,v,null)}return;default:if(na(m)){for($t in v)v.hasOwnProperty($t)&&(C=v[$t],C!==void 0&&U5(u,m,$t,C,v,void 0));return}}for(Re in v)v.hasOwnProperty(Re)&&(C=v[Re],C!=null&&es(u,m,Re,C,v,null))}function AK(u,m,v,C){switch(m){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var M=null,V=null,ue=null,Re=null,Ze=null,St=null,$t=null;for(Dt in v){var nr=v[Dt];if(v.hasOwnProperty(Dt)&&nr!=null)switch(Dt){case"checked":break;case"value":break;case"defaultValue":Ze=nr;default:C.hasOwnProperty(Dt)||es(u,m,Dt,null,C,nr)}}for(var Et in C){var Dt=C[Et];if(nr=v[Et],C.hasOwnProperty(Et)&&(Dt!=null||nr!=null))switch(Et){case"type":V=Dt;break;case"name":M=Dt;break;case"checked":St=Dt;break;case"defaultChecked":$t=Dt;break;case"value":ue=Dt;break;case"defaultValue":Re=Dt;break;case"children":case"dangerouslySetInnerHTML":if(Dt!=null)throw Error(n(137,m));break;default:Dt!==nr&&es(u,m,Et,Dt,C,nr)}}on(u,ue,Re,Ze,St,$t,V,M);return;case"select":Dt=ue=Re=Et=null;for(V in v)if(Ze=v[V],v.hasOwnProperty(V)&&Ze!=null)switch(V){case"value":break;case"multiple":Dt=Ze;default:C.hasOwnProperty(V)||es(u,m,V,null,C,Ze)}for(M in C)if(V=C[M],Ze=v[M],C.hasOwnProperty(M)&&(V!=null||Ze!=null))switch(M){case"value":Et=V;break;case"defaultValue":Re=V;break;case"multiple":ue=V;default:V!==Ze&&es(u,m,M,V,C,Ze)}m=Re,v=ue,C=Dt,Et!=null?vr(u,!!v,Et,!1):!!C!=!!v&&(m!=null?vr(u,!!v,m,!0):vr(u,!!v,v?[]:"",!1));return;case"textarea":Dt=Et=null;for(Re in v)if(M=v[Re],v.hasOwnProperty(Re)&&M!=null&&!C.hasOwnProperty(Re))switch(Re){case"value":break;case"children":break;default:es(u,m,Re,null,C,M)}for(ue in C)if(M=C[ue],V=v[ue],C.hasOwnProperty(ue)&&(M!=null||V!=null))switch(ue){case"value":Et=M;break;case"defaultValue":Dt=M;break;case"children":break;case"dangerouslySetInnerHTML":if(M!=null)throw Error(n(91));break;default:M!==V&&es(u,m,ue,M,C,V)}Pn(u,Et,Dt);return;case"option":for(var Gr in v)if(Et=v[Gr],v.hasOwnProperty(Gr)&&Et!=null&&!C.hasOwnProperty(Gr))switch(Gr){case"selected":u.selected=!1;break;default:es(u,m,Gr,null,C,Et)}for(Ze in C)if(Et=C[Ze],Dt=v[Ze],C.hasOwnProperty(Ze)&&Et!==Dt&&(Et!=null||Dt!=null))switch(Ze){case"selected":u.selected=Et&&typeof Et!="function"&&typeof Et!="symbol";break;default:es(u,m,Ze,Et,C,Dt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Cn in v)Et=v[Cn],v.hasOwnProperty(Cn)&&Et!=null&&!C.hasOwnProperty(Cn)&&es(u,m,Cn,null,C,Et);for(St in C)if(Et=C[St],Dt=v[St],C.hasOwnProperty(St)&&Et!==Dt&&(Et!=null||Dt!=null))switch(St){case"children":case"dangerouslySetInnerHTML":if(Et!=null)throw Error(n(137,m));break;default:es(u,m,St,Et,C,Dt)}return;default:if(na(m)){for(var ts in v)Et=v[ts],v.hasOwnProperty(ts)&&Et!==void 0&&!C.hasOwnProperty(ts)&&U5(u,m,ts,void 0,C,Et);for($t in C)Et=C[$t],Dt=v[$t],!C.hasOwnProperty($t)||Et===Dt||Et===void 0&&Dt===void 0||U5(u,m,$t,Et,C,Dt);return}}for(var gt in v)Et=v[gt],v.hasOwnProperty(gt)&&Et!=null&&!C.hasOwnProperty(gt)&&es(u,m,gt,null,C,Et);for(nr in C)Et=C[nr],Dt=v[nr],!C.hasOwnProperty(nr)||Et===Dt||Et==null&&Dt==null||es(u,m,nr,Et,C,Dt)}function h8(u){switch(u){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function EK(){if(typeof performance.getEntriesByType=="function"){for(var u=0,m=0,v=performance.getEntriesByType("resource"),C=0;C<v.length;C++){var M=v[C],V=M.transferSize,ue=M.initiatorType,Re=M.duration;if(V&&Re&&h8(ue)){for(ue=0,Re=M.responseEnd,C+=1;C<v.length;C++){var Ze=v[C],St=Ze.startTime;if(St>Re)break;var $t=Ze.transferSize,nr=Ze.initiatorType;$t&&h8(nr)&&(Ze=Ze.responseEnd,ue+=$t*(Ze<Re?1:(Re-St)/(Ze-St)))}if(--C,m+=8*(V+ue)/(M.duration/1e3),u++,10<u)break}}if(0<u)return m/u/1e6}return navigator.connection&&(u=navigator.connection.downlink,typeof u=="number")?u:5}var z5=null,q5=null;function zv(u){return u.nodeType===9?u:u.ownerDocument}function f8(u){switch(u){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function m8(u,m){if(u===0)switch(m){case"svg":return 1;case"math":return 2;default:return 0}return u===1&&m==="foreignObject"?0:u}function H5(u,m){return u==="textarea"||u==="noscript"||typeof m.children=="string"||typeof m.children=="number"||typeof m.children=="bigint"||typeof m.dangerouslySetInnerHTML=="object"&&m.dangerouslySetInnerHTML!==null&&m.dangerouslySetInnerHTML.__html!=null}var $5=null;function TK(){var u=window.event;return u&&u.type==="popstate"?u===$5?!1:($5=u,!0):($5=null,!1)}var x8=typeof setTimeout=="function"?setTimeout:void 0,OK=typeof clearTimeout=="function"?clearTimeout:void 0,p8=typeof Promise=="function"?Promise:void 0,PK=typeof queueMicrotask=="function"?queueMicrotask:typeof p8<"u"?function(u){return p8.resolve(null).then(u).catch(IK)}:x8;function IK(u){setTimeout(function(){throw u})}function jh(u){return u==="head"}function g8(u,m){var v=m,C=0;do{var M=v.nextSibling;if(u.removeChild(v),M&&M.nodeType===8)if(v=M.data,v==="/$"||v==="/&"){if(C===0){u.removeChild(M),Fx(m);return}C--}else if(v==="$"||v==="$?"||v==="$~"||v==="$!"||v==="&")C++;else if(v==="html")Vp(u.ownerDocument.documentElement);else if(v==="head"){v=u.ownerDocument.head,Vp(v);for(var V=v.firstChild;V;){var ue=V.nextSibling,Re=V.nodeName;V[bt]||Re==="SCRIPT"||Re==="STYLE"||Re==="LINK"&&V.rel.toLowerCase()==="stylesheet"||v.removeChild(V),V=ue}}else v==="body"&&Vp(u.ownerDocument.body);v=M}while(v);Fx(m)}function b8(u,m){var v=u;u=0;do{var C=v.nextSibling;if(v.nodeType===1?m?(v._stashedDisplay=v.style.display,v.style.display="none"):(v.style.display=v._stashedDisplay||"",v.getAttribute("style")===""&&v.removeAttribute("style")):v.nodeType===3&&(m?(v._stashedText=v.nodeValue,v.nodeValue=""):v.nodeValue=v._stashedText||""),C&&C.nodeType===8)if(v=C.data,v==="/$"){if(u===0)break;u--}else v!=="$"&&v!=="$?"&&v!=="$~"&&v!=="$!"||u++;v=C}while(v)}function V5(u){var m=u.firstChild;for(m&&m.nodeType===10&&(m=m.nextSibling);m;){var v=m;switch(m=m.nextSibling,v.nodeName){case"HTML":case"HEAD":case"BODY":V5(v),Ut(v);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(v.rel.toLowerCase()==="stylesheet")continue}u.removeChild(v)}}function DK(u,m,v,C){for(;u.nodeType===1;){var M=v;if(u.nodeName.toLowerCase()!==m.toLowerCase()){if(!C&&(u.nodeName!=="INPUT"||u.type!=="hidden"))break}else if(C){if(!u[bt])switch(m){case"meta":if(!u.hasAttribute("itemprop"))break;return u;case"link":if(V=u.getAttribute("rel"),V==="stylesheet"&&u.hasAttribute("data-precedence"))break;if(V!==M.rel||u.getAttribute("href")!==(M.href==null||M.href===""?null:M.href)||u.getAttribute("crossorigin")!==(M.crossOrigin==null?null:M.crossOrigin)||u.getAttribute("title")!==(M.title==null?null:M.title))break;return u;case"style":if(u.hasAttribute("data-precedence"))break;return u;case"script":if(V=u.getAttribute("src"),(V!==(M.src==null?null:M.src)||u.getAttribute("type")!==(M.type==null?null:M.type)||u.getAttribute("crossorigin")!==(M.crossOrigin==null?null:M.crossOrigin))&&V&&u.hasAttribute("async")&&!u.hasAttribute("itemprop"))break;return u;default:return u}}else if(m==="input"&&u.type==="hidden"){var V=M.name==null?null:""+M.name;if(M.type==="hidden"&&u.getAttribute("name")===V)return u}else return u;if(u=Wc(u.nextSibling),u===null)break}return null}function MK(u,m,v){if(m==="")return null;for(;u.nodeType!==3;)if((u.nodeType!==1||u.nodeName!=="INPUT"||u.type!=="hidden")&&!v||(u=Wc(u.nextSibling),u===null))return null;return u}function v8(u,m){for(;u.nodeType!==8;)if((u.nodeType!==1||u.nodeName!=="INPUT"||u.type!=="hidden")&&!m||(u=Wc(u.nextSibling),u===null))return null;return u}function W5(u){return u.data==="$?"||u.data==="$~"}function K5(u){return u.data==="$!"||u.data==="$?"&&u.ownerDocument.readyState!=="loading"}function LK(u,m){var v=u.ownerDocument;if(u.data==="$~")u._reactRetry=m;else if(u.data!=="$?"||v.readyState!=="loading")m();else{var C=function(){m(),v.removeEventListener("DOMContentLoaded",C)};v.addEventListener("DOMContentLoaded",C),u._reactRetry=C}}function Wc(u){for(;u!=null;u=u.nextSibling){var m=u.nodeType;if(m===1||m===3)break;if(m===8){if(m=u.data,m==="$"||m==="$!"||m==="$?"||m==="$~"||m==="&"||m==="F!"||m==="F")break;if(m==="/$"||m==="/&")return null}}return u}var G5=null;function y8(u){u=u.nextSibling;for(var m=0;u;){if(u.nodeType===8){var v=u.data;if(v==="/$"||v==="/&"){if(m===0)return Wc(u.nextSibling);m--}else v!=="$"&&v!=="$!"&&v!=="$?"&&v!=="$~"&&v!=="&"||m++}u=u.nextSibling}return null}function w8(u){u=u.previousSibling;for(var m=0;u;){if(u.nodeType===8){var v=u.data;if(v==="$"||v==="$!"||v==="$?"||v==="$~"||v==="&"){if(m===0)return u;m--}else v!=="/$"&&v!=="/&"||m++}u=u.previousSibling}return null}function k8(u,m,v){switch(m=zv(v),u){case"html":if(u=m.documentElement,!u)throw Error(n(452));return u;case"head":if(u=m.head,!u)throw Error(n(453));return u;case"body":if(u=m.body,!u)throw Error(n(454));return u;default:throw Error(n(451))}}function Vp(u){for(var m=u.attributes;m.length;)u.removeAttributeNode(m[0]);Ut(u)}var Kc=new Map,N8=new Set;function qv(u){return typeof u.getRootNode=="function"?u.getRootNode():u.nodeType===9?u:u.ownerDocument}var f0=he.d;he.d={f:RK,r:FK,D:BK,C:UK,L:zK,m:qK,X:$K,S:HK,M:VK};function RK(){var u=f0.f(),m=Iv();return u||m}function FK(u){var m=Jt(u);m!==null&&m.tag===5&&m.type==="form"?UA(m):f0.r(u)}var Mx=typeof document>"u"?null:document;function _8(u,m,v){var C=Mx;if(C&&typeof m=="string"&&m){var M=br(m);M='link[rel="'+u+'"][href="'+M+'"]',typeof v=="string"&&(M+='[crossorigin="'+v+'"]'),N8.has(M)||(N8.add(M),u={rel:u,crossOrigin:v,href:m},C.querySelector(M)===null&&(m=C.createElement("link"),Al(m,"link",u),Ar(m),C.head.appendChild(m)))}}function BK(u){f0.D(u),_8("dns-prefetch",u,null)}function UK(u,m){f0.C(u,m),_8("preconnect",u,m)}function zK(u,m,v){f0.L(u,m,v);var C=Mx;if(C&&u&&m){var M='link[rel="preload"][as="'+br(m)+'"]';m==="image"&&v&&v.imageSrcSet?(M+='[imagesrcset="'+br(v.imageSrcSet)+'"]',typeof v.imageSizes=="string"&&(M+='[imagesizes="'+br(v.imageSizes)+'"]')):M+='[href="'+br(u)+'"]';var V=M;switch(m){case"style":V=Lx(u);break;case"script":V=Rx(u)}Kc.has(V)||(u=p({rel:"preload",href:m==="image"&&v&&v.imageSrcSet?void 0:u,as:m},v),Kc.set(V,u),C.querySelector(M)!==null||m==="style"&&C.querySelector(Wp(V))||m==="script"&&C.querySelector(Kp(V))||(m=C.createElement("link"),Al(m,"link",u),Ar(m),C.head.appendChild(m)))}}function qK(u,m){f0.m(u,m);var v=Mx;if(v&&u){var C=m&&typeof m.as=="string"?m.as:"script",M='link[rel="modulepreload"][as="'+br(C)+'"][href="'+br(u)+'"]',V=M;switch(C){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":V=Rx(u)}if(!Kc.has(V)&&(u=p({rel:"modulepreload",href:u},m),Kc.set(V,u),v.querySelector(M)===null)){switch(C){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(v.querySelector(Kp(V)))return}C=v.createElement("link"),Al(C,"link",u),Ar(C),v.head.appendChild(C)}}}function HK(u,m,v){f0.S(u,m,v);var C=Mx;if(C&&u){var M=pr(C).hoistableStyles,V=Lx(u);m=m||"default";var ue=M.get(V);if(!ue){var Re={loading:0,preload:null};if(ue=C.querySelector(Wp(V)))Re.loading=5;else{u=p({rel:"stylesheet",href:u,"data-precedence":m},v),(v=Kc.get(V))&&X5(u,v);var Ze=ue=C.createElement("link");Ar(Ze),Al(Ze,"link",u),Ze._p=new Promise(function(St,$t){Ze.onload=St,Ze.onerror=$t}),Ze.addEventListener("load",function(){Re.loading|=1}),Ze.addEventListener("error",function(){Re.loading|=2}),Re.loading|=4,Hv(ue,m,C)}ue={type:"stylesheet",instance:ue,count:1,state:Re},M.set(V,ue)}}}function $K(u,m){f0.X(u,m);var v=Mx;if(v&&u){var C=pr(v).hoistableScripts,M=Rx(u),V=C.get(M);V||(V=v.querySelector(Kp(M)),V||(u=p({src:u,async:!0},m),(m=Kc.get(M))&&Y5(u,m),V=v.createElement("script"),Ar(V),Al(V,"link",u),v.head.appendChild(V)),V={type:"script",instance:V,count:1,state:null},C.set(M,V))}}function VK(u,m){f0.M(u,m);var v=Mx;if(v&&u){var C=pr(v).hoistableScripts,M=Rx(u),V=C.get(M);V||(V=v.querySelector(Kp(M)),V||(u=p({src:u,async:!0,type:"module"},m),(m=Kc.get(M))&&Y5(u,m),V=v.createElement("script"),Ar(V),Al(V,"link",u),v.head.appendChild(V)),V={type:"script",instance:V,count:1,state:null},C.set(M,V))}}function S8(u,m,v,C){var M=(M=ee.current)?qv(M):null;if(!M)throw Error(n(446));switch(u){case"meta":case"title":return null;case"style":return typeof v.precedence=="string"&&typeof v.href=="string"?(m=Lx(v.href),v=pr(M).hoistableStyles,C=v.get(m),C||(C={type:"style",instance:null,count:0,state:null},v.set(m,C)),C):{type:"void",instance:null,count:0,state:null};case"link":if(v.rel==="stylesheet"&&typeof v.href=="string"&&typeof v.precedence=="string"){u=Lx(v.href);var V=pr(M).hoistableStyles,ue=V.get(u);if(ue||(M=M.ownerDocument||M,ue={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},V.set(u,ue),(V=M.querySelector(Wp(u)))&&!V._p&&(ue.instance=V,ue.state.loading=5),Kc.has(u)||(v={rel:"preload",as:"style",href:v.href,crossOrigin:v.crossOrigin,integrity:v.integrity,media:v.media,hrefLang:v.hrefLang,referrerPolicy:v.referrerPolicy},Kc.set(u,v),V||WK(M,u,v,ue.state))),m&&C===null)throw Error(n(528,""));return ue}if(m&&C!==null)throw Error(n(529,""));return null;case"script":return m=v.async,v=v.src,typeof v=="string"&&m&&typeof m!="function"&&typeof m!="symbol"?(m=Rx(v),v=pr(M).hoistableScripts,C=v.get(m),C||(C={type:"script",instance:null,count:0,state:null},v.set(m,C)),C):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,u))}}function Lx(u){return'href="'+br(u)+'"'}function Wp(u){return'link[rel="stylesheet"]['+u+"]"}function j8(u){return p({},u,{"data-precedence":u.precedence,precedence:null})}function WK(u,m,v,C){u.querySelector('link[rel="preload"][as="style"]['+m+"]")?C.loading=1:(m=u.createElement("link"),C.preload=m,m.addEventListener("load",function(){return C.loading|=1}),m.addEventListener("error",function(){return C.loading|=2}),Al(m,"link",v),Ar(m),u.head.appendChild(m))}function Rx(u){return'[src="'+br(u)+'"]'}function Kp(u){return"script[async]"+u}function C8(u,m,v){if(m.count++,m.instance===null)switch(m.type){case"style":var C=u.querySelector('style[data-href~="'+br(v.href)+'"]');if(C)return m.instance=C,Ar(C),C;var M=p({},v,{"data-href":v.href,"data-precedence":v.precedence,href:null,precedence:null});return C=(u.ownerDocument||u).createElement("style"),Ar(C),Al(C,"style",M),Hv(C,v.precedence,u),m.instance=C;case"stylesheet":M=Lx(v.href);var V=u.querySelector(Wp(M));if(V)return m.state.loading|=4,m.instance=V,Ar(V),V;C=j8(v),(M=Kc.get(M))&&X5(C,M),V=(u.ownerDocument||u).createElement("link"),Ar(V);var ue=V;return ue._p=new Promise(function(Re,Ze){ue.onload=Re,ue.onerror=Ze}),Al(V,"link",C),m.state.loading|=4,Hv(V,v.precedence,u),m.instance=V;case"script":return V=Rx(v.src),(M=u.querySelector(Kp(V)))?(m.instance=M,Ar(M),M):(C=v,(M=Kc.get(V))&&(C=p({},v),Y5(C,M)),u=u.ownerDocument||u,M=u.createElement("script"),Ar(M),Al(M,"link",C),u.head.appendChild(M),m.instance=M);case"void":return null;default:throw Error(n(443,m.type))}else m.type==="stylesheet"&&(m.state.loading&4)===0&&(C=m.instance,m.state.loading|=4,Hv(C,v.precedence,u));return m.instance}function Hv(u,m,v){for(var C=v.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),M=C.length?C[C.length-1]:null,V=M,ue=0;ue<C.length;ue++){var Re=C[ue];if(Re.dataset.precedence===m)V=Re;else if(V!==M)break}V?V.parentNode.insertBefore(u,V.nextSibling):(m=v.nodeType===9?v.head:v,m.insertBefore(u,m.firstChild))}function X5(u,m){u.crossOrigin==null&&(u.crossOrigin=m.crossOrigin),u.referrerPolicy==null&&(u.referrerPolicy=m.referrerPolicy),u.title==null&&(u.title=m.title)}function Y5(u,m){u.crossOrigin==null&&(u.crossOrigin=m.crossOrigin),u.referrerPolicy==null&&(u.referrerPolicy=m.referrerPolicy),u.integrity==null&&(u.integrity=m.integrity)}var $v=null;function A8(u,m,v){if($v===null){var C=new Map,M=$v=new Map;M.set(v,C)}else M=$v,C=M.get(v),C||(C=new Map,M.set(v,C));if(C.has(u))return C;for(C.set(u,null),v=v.getElementsByTagName(u),M=0;M<v.length;M++){var V=v[M];if(!(V[bt]||V[le]||u==="link"&&V.getAttribute("rel")==="stylesheet")&&V.namespaceURI!=="http://www.w3.org/2000/svg"){var ue=V.getAttribute(m)||"";ue=u+ue;var Re=C.get(ue);Re?Re.push(V):C.set(ue,[V])}}return C}function E8(u,m,v){u=u.ownerDocument||u,u.head.insertBefore(v,m==="title"?u.querySelector("head > title"):null)}function KK(u,m,v){if(v===1||m.itemProp!=null)return!1;switch(u){case"meta":case"title":return!0;case"style":if(typeof m.precedence!="string"||typeof m.href!="string"||m.href==="")break;return!0;case"link":if(typeof m.rel!="string"||typeof m.href!="string"||m.href===""||m.onLoad||m.onError)break;switch(m.rel){case"stylesheet":return u=m.disabled,typeof m.precedence=="string"&&u==null;default:return!0}case"script":if(m.async&&typeof m.async!="function"&&typeof m.async!="symbol"&&!m.onLoad&&!m.onError&&m.src&&typeof m.src=="string")return!0}return!1}function T8(u){return!(u.type==="stylesheet"&&(u.state.loading&3)===0)}function GK(u,m,v,C){if(v.type==="stylesheet"&&(typeof C.media!="string"||matchMedia(C.media).matches!==!1)&&(v.state.loading&4)===0){if(v.instance===null){var M=Lx(C.href),V=m.querySelector(Wp(M));if(V){m=V._p,m!==null&&typeof m=="object"&&typeof m.then=="function"&&(u.count++,u=Vv.bind(u),m.then(u,u)),v.state.loading|=4,v.instance=V,Ar(V);return}V=m.ownerDocument||m,C=j8(C),(M=Kc.get(M))&&X5(C,M),V=V.createElement("link"),Ar(V);var ue=V;ue._p=new Promise(function(Re,Ze){ue.onload=Re,ue.onerror=Ze}),Al(V,"link",C),v.instance=V}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(v,m),(m=v.state.preload)&&(v.state.loading&3)===0&&(u.count++,v=Vv.bind(u),m.addEventListener("load",v),m.addEventListener("error",v))}}var Z5=0;function XK(u,m){return u.stylesheets&&u.count===0&&Kv(u,u.stylesheets),0<u.count||0<u.imgCount?function(v){var C=setTimeout(function(){if(u.stylesheets&&Kv(u,u.stylesheets),u.unsuspend){var V=u.unsuspend;u.unsuspend=null,V()}},6e4+m);0<u.imgBytes&&Z5===0&&(Z5=62500*EK());var M=setTimeout(function(){if(u.waitingForImages=!1,u.count===0&&(u.stylesheets&&Kv(u,u.stylesheets),u.unsuspend)){var V=u.unsuspend;u.unsuspend=null,V()}},(u.imgBytes>Z5?50:800)+m);return u.unsuspend=v,function(){u.unsuspend=null,clearTimeout(C),clearTimeout(M)}}:null}function Vv(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Kv(this,this.stylesheets);else if(this.unsuspend){var u=this.unsuspend;this.unsuspend=null,u()}}}var Wv=null;function Kv(u,m){u.stylesheets=null,u.unsuspend!==null&&(u.count++,Wv=new Map,m.forEach(YK,u),Wv=null,Vv.call(u))}function YK(u,m){if(!(m.state.loading&4)){var v=Wv.get(u);if(v)var C=v.get(null);else{v=new Map,Wv.set(u,v);for(var M=u.querySelectorAll("link[data-precedence],style[data-precedence]"),V=0;V<M.length;V++){var ue=M[V];(ue.nodeName==="LINK"||ue.getAttribute("media")!=="not all")&&(v.set(ue.dataset.precedence,ue),C=ue)}C&&v.set(null,C)}M=m.instance,ue=M.getAttribute("data-precedence"),V=v.get(ue)||C,V===C&&v.set(null,M),v.set(ue,M),this.count++,C=Vv.bind(this),M.addEventListener("load",C),M.addEventListener("error",C),V?V.parentNode.insertBefore(M,V.nextSibling):(u=u.nodeType===9?u.head:u,u.insertBefore(M,u.firstChild)),m.state.loading|=4}}var Gp={$$typeof:E,Provider:null,Consumer:null,_currentValue:Se,_currentValue2:Se,_threadCount:0};function ZK(u,m,v,C,M,V,ue,Re,Ze){this.tag=1,this.containerInfo=u,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Mr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Mr(0),this.hiddenUpdates=Mr(null),this.identifierPrefix=C,this.onUncaughtError=M,this.onCaughtError=V,this.onRecoverableError=ue,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Ze,this.incompleteTransitions=new Map}function O8(u,m,v,C,M,V,ue,Re,Ze,St,$t,nr){return u=new ZK(u,m,v,ue,Ze,St,$t,nr,Re),m=1,V===!0&&(m|=24),V=ol(3,null,null,m),u.current=V,V.stateNode=u,m=mh(),m.refCount++,u.pooledCache=m,m.refCount++,V.memoizedState={element:C,isDehydrated:v,cache:m},Er(V),u}function P8(u){return u?(u=Bi,u):Bi}function I8(u,m,v,C,M,V){M=P8(M),C.context===null?C.context=M:C.pendingContext=M,C=Nn(m),C.payload={element:v},V=V===void 0?null:V,V!==null&&(C.callback=V),v=Wn(u,C,m),v!==null&&(Zo(v,u,m),Ra(v,u,m))}function D8(u,m){if(u=u.memoizedState,u!==null&&u.dehydrated!==null){var v=u.retryLane;u.retryLane=v!==0&&v<m?v:m}}function Q5(u,m){D8(u,m),(u=u.alternate)&&D8(u,m)}function M8(u){if(u.tag===13||u.tag===31){var m=Ed(u,67108864);m!==null&&Zo(m,u,67108864),Q5(u,67108864)}}function L8(u){if(u.tag===13||u.tag===31){var m=hc();m=Rr(m);var v=Ed(u,m);v!==null&&Zo(v,u,m),Q5(u,m)}}var Gv=!0;function QK(u,m,v,C){var M=de.T;de.T=null;var V=he.p;try{he.p=2,J5(u,m,v,C)}finally{he.p=V,de.T=M}}function JK(u,m,v,C){var M=de.T;de.T=null;var V=he.p;try{he.p=8,J5(u,m,v,C)}finally{he.p=V,de.T=M}}function J5(u,m,v,C){if(Gv){var M=e4(C);if(M===null)B5(u,m,C,Xv,v),F8(u,C);else if(tG(M,u,m,v,C))C.stopPropagation();else if(F8(u,C),m&4&&-1<eG.indexOf(u)){for(;M!==null;){var V=Jt(M);if(V!==null)switch(V.tag){case 3:if(V=V.stateNode,V.current.memoizedState.isDehydrated){var ue=Ot(V.pendingLanes);if(ue!==0){var Re=V;for(Re.pendingLanes|=2,Re.entangledLanes|=2;ue;){var Ze=1<<31-Ke(ue);Re.entanglements[1]|=Ze,ue&=~Ze}vu(V),(Ba&6)===0&&(Ov=mr()+500,qp(0))}}break;case 31:case 13:Re=Ed(V,2),Re!==null&&Zo(Re,V,2),Iv(),Q5(V,2)}if(V=e4(C),V===null&&B5(u,m,C,Xv,v),V===M)break;M=V}M!==null&&C.stopPropagation()}else B5(u,m,C,null,v)}}function e4(u){return u=kd(u),t4(u)}var Xv=null;function t4(u){if(Xv=null,u=rr(u),u!==null){var m=s(u);if(m===null)u=null;else{var v=m.tag;if(v===13){if(u=l(m),u!==null)return u;u=null}else if(v===31){if(u=o(m),u!==null)return u;u=null}else if(v===3){if(m.stateNode.current.memoizedState.isDehydrated)return m.tag===3?m.stateNode.containerInfo:null;u=null}else m!==u&&(u=null)}}return Xv=u,null}function R8(u){switch(u){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(xr()){case sr:return 2;case Ir:return 8;case er:case Xt:return 32;case Gt:return 268435456;default:return 32}default:return 32}}var r4=!1,Ch=null,Ah=null,Eh=null,Xp=new Map,Yp=new Map,Th=[],eG="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function F8(u,m){switch(u){case"focusin":case"focusout":Ch=null;break;case"dragenter":case"dragleave":Ah=null;break;case"mouseover":case"mouseout":Eh=null;break;case"pointerover":case"pointerout":Xp.delete(m.pointerId);break;case"gotpointercapture":case"lostpointercapture":Yp.delete(m.pointerId)}}function Zp(u,m,v,C,M,V){return u===null||u.nativeEvent!==V?(u={blockedOn:m,domEventName:v,eventSystemFlags:C,nativeEvent:V,targetContainers:[M]},m!==null&&(m=Jt(m),m!==null&&M8(m)),u):(u.eventSystemFlags|=C,m=u.targetContainers,M!==null&&m.indexOf(M)===-1&&m.push(M),u)}function tG(u,m,v,C,M){switch(m){case"focusin":return Ch=Zp(Ch,u,m,v,C,M),!0;case"dragenter":return Ah=Zp(Ah,u,m,v,C,M),!0;case"mouseover":return Eh=Zp(Eh,u,m,v,C,M),!0;case"pointerover":var V=M.pointerId;return Xp.set(V,Zp(Xp.get(V)||null,u,m,v,C,M)),!0;case"gotpointercapture":return V=M.pointerId,Yp.set(V,Zp(Yp.get(V)||null,u,m,v,C,M)),!0}return!1}function B8(u){var m=rr(u.target);if(m!==null){var v=s(m);if(v!==null){if(m=v.tag,m===13){if(m=l(v),m!==null){u.blockedOn=m,Ne(u.priority,function(){L8(v)});return}}else if(m===31){if(m=o(v),m!==null){u.blockedOn=m,Ne(u.priority,function(){L8(v)});return}}else if(m===3&&v.stateNode.current.memoizedState.isDehydrated){u.blockedOn=v.tag===3?v.stateNode.containerInfo:null;return}}}u.blockedOn=null}function Yv(u){if(u.blockedOn!==null)return!1;for(var m=u.targetContainers;0<m.length;){var v=e4(u.nativeEvent);if(v===null){v=u.nativeEvent;var C=new v.constructor(v.type,v);co=C,v.target.dispatchEvent(C),co=null}else return m=Jt(v),m!==null&&M8(m),u.blockedOn=v,!1;m.shift()}return!0}function U8(u,m,v){Yv(u)&&v.delete(m)}function rG(){r4=!1,Ch!==null&&Yv(Ch)&&(Ch=null),Ah!==null&&Yv(Ah)&&(Ah=null),Eh!==null&&Yv(Eh)&&(Eh=null),Xp.forEach(U8),Yp.forEach(U8)}function Zv(u,m){u.blockedOn===m&&(u.blockedOn=null,r4||(r4=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,rG)))}var Qv=null;function z8(u){Qv!==u&&(Qv=u,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Qv===u&&(Qv=null);for(var m=0;m<u.length;m+=3){var v=u[m],C=u[m+1],M=u[m+2];if(typeof C!="function"){if(t4(C||v)===null)continue;break}var V=Jt(v);V!==null&&(u.splice(m,3),m-=3,e5(V,{pending:!0,data:M,method:v.method,action:C},C,M))}}))}function Fx(u){function m(Ze){return Zv(Ze,u)}Ch!==null&&Zv(Ch,u),Ah!==null&&Zv(Ah,u),Eh!==null&&Zv(Eh,u),Xp.forEach(m),Yp.forEach(m);for(var v=0;v<Th.length;v++){var C=Th[v];C.blockedOn===u&&(C.blockedOn=null)}for(;0<Th.length&&(v=Th[0],v.blockedOn===null);)B8(v),v.blockedOn===null&&Th.shift();if(v=(u.ownerDocument||u).$$reactFormReplay,v!=null)for(C=0;C<v.length;C+=3){var M=v[C],V=v[C+1],ue=M[ve]||null;if(typeof V=="function")ue||z8(v);else if(ue){var Re=null;if(V&&V.hasAttribute("formAction")){if(M=V,ue=V[ve]||null)Re=ue.formAction;else if(t4(M)!==null)continue}else Re=ue.action;typeof Re=="function"?v[C+1]=Re:(v.splice(C,3),C-=3),z8(v)}}}function q8(){function u(V){V.canIntercept&&V.info==="react-transition"&&V.intercept({handler:function(){return new Promise(function(ue){return M=ue})},focusReset:"manual",scroll:"manual"})}function m(){M!==null&&(M(),M=null),C||setTimeout(v,20)}function v(){if(!C&&!navigation.transition){var V=navigation.currentEntry;V&&V.url!=null&&navigation.navigate(V.url,{state:V.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var C=!1,M=null;return navigation.addEventListener("navigate",u),navigation.addEventListener("navigatesuccess",m),navigation.addEventListener("navigateerror",m),setTimeout(v,100),function(){C=!0,navigation.removeEventListener("navigate",u),navigation.removeEventListener("navigatesuccess",m),navigation.removeEventListener("navigateerror",m),M!==null&&(M(),M=null)}}}function n4(u){this._internalRoot=u}Jv.prototype.render=n4.prototype.render=function(u){var m=this._internalRoot;if(m===null)throw Error(n(409));var v=m.current,C=hc();I8(v,C,u,m,null,null)},Jv.prototype.unmount=n4.prototype.unmount=function(){var u=this._internalRoot;if(u!==null){this._internalRoot=null;var m=u.containerInfo;I8(u.current,2,null,u,null,null),Iv(),m[Oe]=null}};function Jv(u){this._internalRoot=u}Jv.prototype.unstable_scheduleHydration=function(u){if(u){var m=we();u={blockedOn:null,target:u,priority:m};for(var v=0;v<Th.length&&m!==0&&m<Th[v].priority;v++);Th.splice(v,0,u),v===0&&B8(u)}};var H8=t.version;if(H8!=="19.2.0")throw Error(n(527,H8,"19.2.0"));he.findDOMNode=function(u){var m=u._reactInternals;if(m===void 0)throw typeof u.render=="function"?Error(n(188)):(u=Object.keys(u).join(","),Error(n(268,u)));return u=d(m),u=u!==null?f(u):null,u=u===null?null:u.stateNode,u};var nG={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:de,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var e2=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!e2.isDisabled&&e2.supportsFiber)try{lr=e2.inject(nG),mt=e2}catch{}}return Jp.createRoot=function(u,m){if(!a(u))throw Error(n(299));var v=!1,C="",M=YA,V=ZA,ue=QA;return m!=null&&(m.unstable_strictMode===!0&&(v=!0),m.identifierPrefix!==void 0&&(C=m.identifierPrefix),m.onUncaughtError!==void 0&&(M=m.onUncaughtError),m.onCaughtError!==void 0&&(V=m.onCaughtError),m.onRecoverableError!==void 0&&(ue=m.onRecoverableError)),m=O8(u,1,!1,null,null,v,C,null,M,V,ue,q8),u[Oe]=m.current,F5(u),new n4(m)},Jp.hydrateRoot=function(u,m,v){if(!a(u))throw Error(n(299));var C=!1,M="",V=YA,ue=ZA,Re=QA,Ze=null;return v!=null&&(v.unstable_strictMode===!0&&(C=!0),v.identifierPrefix!==void 0&&(M=v.identifierPrefix),v.onUncaughtError!==void 0&&(V=v.onUncaughtError),v.onCaughtError!==void 0&&(ue=v.onCaughtError),v.onRecoverableError!==void 0&&(Re=v.onRecoverableError),v.formState!==void 0&&(Ze=v.formState)),m=O8(u,1,!0,m,v??null,C,M,Ze,V,ue,Re,q8),m.context=P8(null),v=m.current,C=hc(),C=Rr(C),M=Nn(C),M.callback=null,Wn(v,M,C),v=C,m.current.lanes=v,We(m,v),vu(m),u[Oe]=m.current,F5(u),new Jv(m)},Jp.version="19.2.0",Jp}var eT;function pG(){if(eT)return l4.exports;eT=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),l4.exports=xG(),l4.exports}var gG=pG();const bG=gd(gG);/**
 * react-router v7.9.5
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var tT="popstate";function vG(e={}){function t(a,s){let{pathname:l="/",search:o="",hash:c=""}=Gm(a.location.hash.substring(1));return!l.startsWith("/")&&!l.startsWith(".")&&(l="/"+l),qN("",{pathname:l,search:o,hash:c},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(a,s){let l=a.document.querySelector("base"),o="";if(l&&l.getAttribute("href")){let c=a.location.href,d=c.indexOf("#");o=d===-1?c:c.slice(0,d)}return o+"#"+(typeof s=="string"?s:Fg(s))}function n(a,s){hd(a.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(s)})`)}return wG(t,r,n,e)}function Bs(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function hd(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function yG(){return Math.random().toString(36).substring(2,10)}function rT(e,t){return{usr:e.state,key:e.key,idx:t}}function qN(e,t,r=null,n){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?Gm(t):t,state:r,key:t&&t.key||n||yG()}}function Fg({pathname:e="/",search:t="",hash:r=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Gm(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substring(n),e=e.substring(0,n)),e&&(t.pathname=e)}return t}function wG(e,t,r,n={}){let{window:a=document.defaultView,v5Compat:s=!1}=n,l=a.history,o="POP",c=null,d=f();d==null&&(d=0,l.replaceState({...l.state,idx:d},""));function f(){return(l.state||{idx:null}).idx}function p(){o="POP";let k=f(),S=k==null?null:k-d;d=k,c&&c({action:o,location:w.location,delta:S})}function y(k,S){o="PUSH";let O=qN(w.location,k,S);r&&r(O,k),d=f()+1;let E=rT(O,d),D=w.createHref(O);try{l.pushState(E,"",D)}catch(H){if(H instanceof DOMException&&H.name==="DataCloneError")throw H;a.location.assign(D)}s&&c&&c({action:o,location:w.location,delta:1})}function g(k,S){o="REPLACE";let O=qN(w.location,k,S);r&&r(O,k),d=f();let E=rT(O,d),D=w.createHref(O);l.replaceState(E,"",D),s&&c&&c({action:o,location:w.location,delta:0})}function N(k){return kG(k)}let w={get action(){return o},get location(){return e(a,l)},listen(k){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(tT,p),c=k,()=>{a.removeEventListener(tT,p),c=null}},createHref(k){return t(a,k)},createURL:N,encodeLocation(k){let S=N(k);return{pathname:S.pathname,search:S.search,hash:S.hash}},push:y,replace:g,go(k){return l.go(k)}};return w}function kG(e,t=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),Bs(r,"No window.location.(origin|href) available to create URL");let n=typeof e=="string"?e:Fg(e);return n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=r+n),new URL(n,r)}function PL(e,t,r="/"){return NG(e,t,r,!1)}function NG(e,t,r,n){let a=typeof t=="string"?Gm(t):t,s=H0(a.pathname||"/",r);if(s==null)return null;let l=IL(e);_G(l);let o=null;for(let c=0;o==null&&c<l.length;++c){let d=MG(s);o=IG(l[c],d,n)}return o}function IL(e,t=[],r=[],n="",a=!1){let s=(l,o,c=a,d)=>{let f={relativePath:d===void 0?l.path||"":d,caseSensitive:l.caseSensitive===!0,childrenIndex:o,route:l};if(f.relativePath.startsWith("/")){if(!f.relativePath.startsWith(n)&&c)return;Bs(f.relativePath.startsWith(n),`Absolute route path "${f.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),f.relativePath=f.relativePath.slice(n.length)}let p=D0([n,f.relativePath]),y=r.concat(f);l.children&&l.children.length>0&&(Bs(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),IL(l.children,t,y,p,c)),!(l.path==null&&!l.index)&&t.push({path:p,score:OG(p,l.index),routesMeta:y})};return e.forEach((l,o)=>{var c;if(l.path===""||!((c=l.path)!=null&&c.includes("?")))s(l,o);else for(let d of DL(l.path))s(l,o,!0,d)}),t}function DL(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,a=r.endsWith("?"),s=r.replace(/\?$/,"");if(n.length===0)return a?[s,""]:[s];let l=DL(n.join("/")),o=[];return o.push(...l.map(c=>c===""?s:[s,c].join("/"))),a&&o.push(...l),o.map(c=>e.startsWith("/")&&c===""?"/":c)}function _G(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:PG(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var SG=/^:[\w-]+$/,jG=3,CG=2,AG=1,EG=10,TG=-2,nT=e=>e==="*";function OG(e,t){let r=e.split("/"),n=r.length;return r.some(nT)&&(n+=TG),t&&(n+=CG),r.filter(a=>!nT(a)).reduce((a,s)=>a+(SG.test(s)?jG:s===""?AG:EG),n)}function PG(e,t){return e.length===t.length&&e.slice(0,-1).every((n,a)=>n===t[a])?e[e.length-1]-t[t.length-1]:0}function IG(e,t,r=!1){let{routesMeta:n}=e,a={},s="/",l=[];for(let o=0;o<n.length;++o){let c=n[o],d=o===n.length-1,f=s==="/"?t:t.slice(s.length)||"/",p=dy({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},f),y=c.route;if(!p&&d&&r&&!n[n.length-1].route.index&&(p=dy({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},f)),!p)return null;Object.assign(a,p.params),l.push({params:a,pathname:D0([s,p.pathname]),pathnameBase:BG(D0([s,p.pathnameBase])),route:y}),p.pathnameBase!=="/"&&(s=D0([s,p.pathnameBase]))}return l}function dy(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=DG(e.path,e.caseSensitive,e.end),a=t.match(r);if(!a)return null;let s=a[0],l=s.replace(/(.)\/+$/,"$1"),o=a.slice(1);return{params:n.reduce((d,{paramName:f,isOptional:p},y)=>{if(f==="*"){let N=o[y]||"";l=s.slice(0,s.length-N.length).replace(/(.)\/+$/,"$1")}const g=o[y];return p&&!g?d[f]=void 0:d[f]=(g||"").replace(/%2F/g,"/"),d},{}),pathname:s,pathnameBase:l,pattern:e}}function DG(e,t=!1,r=!0){hd(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let n=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,o,c)=>(n.push({paramName:o,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(n.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),n]}function MG(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return hd(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function H0(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function LG(e,t="/"){let{pathname:r,search:n="",hash:a=""}=typeof e=="string"?Gm(e):e;return{pathname:r?r.startsWith("/")?r:RG(r,t):t,search:UG(n),hash:zG(a)}}function RG(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function u4(e,t,r,n){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function FG(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function n6(e){let t=FG(e);return t.map((r,n)=>n===t.length-1?r.pathname:r.pathnameBase)}function a6(e,t,r,n=!1){let a;typeof e=="string"?a=Gm(e):(a={...e},Bs(!a.pathname||!a.pathname.includes("?"),u4("?","pathname","search",a)),Bs(!a.pathname||!a.pathname.includes("#"),u4("#","pathname","hash",a)),Bs(!a.search||!a.search.includes("#"),u4("#","search","hash",a)));let s=e===""||a.pathname==="",l=s?"/":a.pathname,o;if(l==null)o=r;else{let p=t.length-1;if(!n&&l.startsWith("..")){let y=l.split("/");for(;y[0]==="..";)y.shift(),p-=1;a.pathname=y.join("/")}o=p>=0?t[p]:"/"}let c=LG(a,o),d=l&&l!=="/"&&l.endsWith("/"),f=(s||l===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(d||f)&&(c.pathname+="/"),c}var D0=e=>e.join("/").replace(/\/\/+/g,"/"),BG=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),UG=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,zG=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function qG(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var ML=["POST","PUT","PATCH","DELETE"];new Set(ML);var HG=["GET",...ML];new Set(HG);var Y1=T.createContext(null);Y1.displayName="DataRouter";var Ow=T.createContext(null);Ow.displayName="DataRouterState";T.createContext(!1);var LL=T.createContext({isTransitioning:!1});LL.displayName="ViewTransition";var $G=T.createContext(new Map);$G.displayName="Fetchers";var VG=T.createContext(null);VG.displayName="Await";var ru=T.createContext(null);ru.displayName="Navigation";var Tb=T.createContext(null);Tb.displayName="Location";var $u=T.createContext({outlet:null,matches:[],isDataRoute:!1});$u.displayName="Route";var s6=T.createContext(null);s6.displayName="RouteError";function WG(e,{relative:t}={}){Bs(Z1(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=T.useContext(ru),{hash:a,pathname:s,search:l}=Ob(e,{relative:t}),o=s;return r!=="/"&&(o=s==="/"?r:D0([r,s])),n.createHref({pathname:o,search:l,hash:a})}function Z1(){return T.useContext(Tb)!=null}function bd(){return Bs(Z1(),"useLocation() may be used only in the context of a <Router> component."),T.useContext(Tb).location}var RL="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function FL(e){T.useContext(ru).static||T.useLayoutEffect(e)}function Pw(){let{isDataRoute:e}=T.useContext($u);return e?sX():KG()}function KG(){Bs(Z1(),"useNavigate() may be used only in the context of a <Router> component.");let e=T.useContext(Y1),{basename:t,navigator:r}=T.useContext(ru),{matches:n}=T.useContext($u),{pathname:a}=bd(),s=JSON.stringify(n6(n)),l=T.useRef(!1);return FL(()=>{l.current=!0}),T.useCallback((c,d={})=>{if(hd(l.current,RL),!l.current)return;if(typeof c=="number"){r.go(c);return}let f=a6(c,JSON.parse(s),a,d.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:D0([t,f.pathname])),(d.replace?r.replace:r.push)(f,d.state,d)},[t,r,s,a,e])}T.createContext(null);function Ob(e,{relative:t}={}){let{matches:r}=T.useContext($u),{pathname:n}=bd(),a=JSON.stringify(n6(r));return T.useMemo(()=>a6(e,JSON.parse(a),n,t==="path"),[e,a,n,t])}function GG(e,t){return BL(e,t)}function BL(e,t,r,n,a){var O;Bs(Z1(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=T.useContext(ru),{matches:l}=T.useContext($u),o=l[l.length-1],c=o?o.params:{},d=o?o.pathname:"/",f=o?o.pathnameBase:"/",p=o&&o.route;{let E=p&&p.path||"";UL(d,!p||E.endsWith("*")||E.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${E}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${E}"> to <Route path="${E==="/"?"*":`${E}/*`}">.`)}let y=bd(),g;if(t){let E=typeof t=="string"?Gm(t):t;Bs(f==="/"||((O=E.pathname)==null?void 0:O.startsWith(f)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${E.pathname}" was given in the \`location\` prop.`),g=E}else g=y;let N=g.pathname||"/",w=N;if(f!=="/"){let E=f.replace(/^\//,"").split("/");w="/"+N.replace(/^\//,"").split("/").slice(E.length).join("/")}let k=PL(e,{pathname:w});hd(p||k!=null,`No routes matched location "${g.pathname}${g.search}${g.hash}" `),hd(k==null||k[k.length-1].route.element!==void 0||k[k.length-1].route.Component!==void 0||k[k.length-1].route.lazy!==void 0,`Matched leaf route at location "${g.pathname}${g.search}${g.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let S=JG(k&&k.map(E=>Object.assign({},E,{params:Object.assign({},c,E.params),pathname:D0([f,s.encodeLocation?s.encodeLocation(E.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?f:D0([f,s.encodeLocation?s.encodeLocation(E.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:E.pathnameBase])})),l,r,n,a);return t&&S?T.createElement(Tb.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...g},navigationType:"POP"}},S):S}function XG(){let e=aX(),t=qG(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:n},s={padding:"2px 4px",backgroundColor:n},l=null;return console.error("Error handled by React Router default ErrorBoundary:",e),l=T.createElement(T.Fragment,null,T.createElement("p",null," Hey developer "),T.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",T.createElement("code",{style:s},"ErrorBoundary")," or"," ",T.createElement("code",{style:s},"errorElement")," prop on your route.")),T.createElement(T.Fragment,null,T.createElement("h2",null,"Unexpected Application Error!"),T.createElement("h3",{style:{fontStyle:"italic"}},t),r?T.createElement("pre",{style:a},r):null,l)}var YG=T.createElement(XG,null),ZG=class extends T.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.unstable_onError?this.props.unstable_onError(e,t):console.error("React Router caught the following error during render",e)}render(){return this.state.error!==void 0?T.createElement($u.Provider,{value:this.props.routeContext},T.createElement(s6.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function QG({routeContext:e,match:t,children:r}){let n=T.useContext(Y1);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),T.createElement($u.Provider,{value:e},r)}function JG(e,t=[],r=null,n=null,a=null){if(e==null){if(!r)return null;if(r.errors)e=r.matches;else if(t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let s=e,l=r==null?void 0:r.errors;if(l!=null){let d=s.findIndex(f=>f.route.id&&(l==null?void 0:l[f.route.id])!==void 0);Bs(d>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),s=s.slice(0,Math.min(s.length,d+1))}let o=!1,c=-1;if(r)for(let d=0;d<s.length;d++){let f=s[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(c=d),f.route.id){let{loaderData:p,errors:y}=r,g=f.route.loader&&!p.hasOwnProperty(f.route.id)&&(!y||y[f.route.id]===void 0);if(f.route.lazy||g){o=!0,c>=0?s=s.slice(0,c+1):s=[s[0]];break}}}return s.reduceRight((d,f,p)=>{let y,g=!1,N=null,w=null;r&&(y=l&&f.route.id?l[f.route.id]:void 0,N=f.route.errorElement||YG,o&&(c<0&&p===0?(UL("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),g=!0,w=null):c===p&&(g=!0,w=f.route.hydrateFallbackElement||null)));let k=t.concat(s.slice(0,p+1)),S=()=>{let O;return y?O=N:g?O=w:f.route.Component?O=T.createElement(f.route.Component,null):f.route.element?O=f.route.element:O=d,T.createElement(QG,{match:f,routeContext:{outlet:d,matches:k,isDataRoute:r!=null},children:O})};return r&&(f.route.ErrorBoundary||f.route.errorElement||p===0)?T.createElement(ZG,{location:r.location,revalidation:r.revalidation,component:N,error:y,children:S(),routeContext:{outlet:null,matches:k,isDataRoute:!0},unstable_onError:n}):S()},null)}function i6(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function eX(e){let t=T.useContext(Y1);return Bs(t,i6(e)),t}function tX(e){let t=T.useContext(Ow);return Bs(t,i6(e)),t}function rX(e){let t=T.useContext($u);return Bs(t,i6(e)),t}function l6(e){let t=rX(e),r=t.matches[t.matches.length-1];return Bs(r.route.id,`${e} can only be used on routes that contain a unique "id"`),r.route.id}function nX(){return l6("useRouteId")}function aX(){var n;let e=T.useContext(s6),t=tX("useRouteError"),r=l6("useRouteError");return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function sX(){let{router:e}=eX("useNavigate"),t=l6("useNavigate"),r=T.useRef(!1);return FL(()=>{r.current=!0}),T.useCallback(async(a,s={})=>{hd(r.current,RL),r.current&&(typeof a=="number"?e.navigate(a):await e.navigate(a,{fromRouteId:t,...s}))},[e,t])}var aT={};function UL(e,t,r){!t&&!aT[e]&&(aT[e]=!0,hd(!1,r))}T.memo(iX);function iX({routes:e,future:t,state:r,unstable_onError:n}){return BL(e,void 0,r,n,t)}function zL({to:e,replace:t,state:r,relative:n}){Bs(Z1(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=T.useContext(ru);hd(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=T.useContext($u),{pathname:l}=bd(),o=Pw(),c=a6(e,n6(s),l,n==="path"),d=JSON.stringify(c);return T.useEffect(()=>{o(JSON.parse(d),{replace:t,state:r,relative:n})},[o,d,n,t,r]),null}function ai(e){Bs(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function lX({basename:e="/",children:t=null,location:r,navigationType:n="POP",navigator:a,static:s=!1}){Bs(!Z1(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=e.replace(/^\/*/,"/"),o=T.useMemo(()=>({basename:l,navigator:a,static:s,future:{}}),[l,a,s]);typeof r=="string"&&(r=Gm(r));let{pathname:c="/",search:d="",hash:f="",state:p=null,key:y="default"}=r,g=T.useMemo(()=>{let N=H0(c,l);return N==null?null:{location:{pathname:N,search:d,hash:f,state:p,key:y},navigationType:n}},[l,c,d,f,p,y,n]);return hd(g!=null,`<Router basename="${l}"> is not able to match the URL "${c}${d}${f}" because it does not start with the basename, so the <Router> won't render anything.`),g==null?null:T.createElement(ru.Provider,{value:o},T.createElement(Tb.Provider,{children:t,value:g}))}function qL({children:e,location:t}){return GG(HN(e),t)}function HN(e,t=[]){let r=[];return T.Children.forEach(e,(n,a)=>{if(!T.isValidElement(n))return;let s=[...t,a];if(n.type===T.Fragment){r.push.apply(r,HN(n.props.children,s));return}Bs(n.type===ai,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Bs(!n.props.index||!n.props.children,"An index route cannot have child routes.");let l={id:n.props.id||s.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(l.children=HN(n.props.children,s)),r.push(l)}),r}var Z2="get",Q2="application/x-www-form-urlencoded";function Iw(e){return e!=null&&typeof e.tagName=="string"}function oX(e){return Iw(e)&&e.tagName.toLowerCase()==="button"}function cX(e){return Iw(e)&&e.tagName.toLowerCase()==="form"}function dX(e){return Iw(e)&&e.tagName.toLowerCase()==="input"}function uX(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function hX(e,t){return e.button===0&&(!t||t==="_self")&&!uX(e)}var n2=null;function fX(){if(n2===null)try{new FormData(document.createElement("form"),0),n2=!1}catch{n2=!0}return n2}var mX=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function h4(e){return e!=null&&!mX.has(e)?(hd(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Q2}"`),null):e}function xX(e,t){let r,n,a,s,l;if(cX(e)){let o=e.getAttribute("action");n=o?H0(o,t):null,r=e.getAttribute("method")||Z2,a=h4(e.getAttribute("enctype"))||Q2,s=new FormData(e)}else if(oX(e)||dX(e)&&(e.type==="submit"||e.type==="image")){let o=e.form;if(o==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=e.getAttribute("formaction")||o.getAttribute("action");if(n=c?H0(c,t):null,r=e.getAttribute("formmethod")||o.getAttribute("method")||Z2,a=h4(e.getAttribute("formenctype"))||h4(o.getAttribute("enctype"))||Q2,s=new FormData(o,e),!fX()){let{name:d,type:f,value:p}=e;if(f==="image"){let y=d?`${d}.`:"";s.append(`${y}x`,"0"),s.append(`${y}y`,"0")}else d&&s.append(d,p)}}else{if(Iw(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=Z2,n=null,a=Q2,l=e}return s&&a==="text/plain"&&(l=s,s=void 0),{action:n,method:r.toLowerCase(),encType:a,formData:s,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function o6(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function pX(e,t,r){let n=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return n.pathname==="/"?n.pathname=`_root.${r}`:t&&H0(n.pathname,t)==="/"?n.pathname=`${t.replace(/\/$/,"")}/_root.${r}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${r}`,n}async function gX(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(r){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function bX(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function vX(e,t,r){let n=await Promise.all(e.map(async a=>{let s=t.routes[a.route.id];if(s){let l=await gX(s,r);return l.links?l.links():[]}return[]}));return NX(n.flat(1).filter(bX).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function sT(e,t,r,n,a,s){let l=(c,d)=>r[d]?c.route.id!==r[d].route.id:!0,o=(c,d)=>{var f;return r[d].pathname!==c.pathname||((f=r[d].route.path)==null?void 0:f.endsWith("*"))&&r[d].params["*"]!==c.params["*"]};return s==="assets"?t.filter((c,d)=>l(c,d)||o(c,d)):s==="data"?t.filter((c,d)=>{var p;let f=n.routes[c.route.id];if(!f||!f.hasLoader)return!1;if(l(c,d)||o(c,d))return!0;if(c.route.shouldRevalidate){let y=c.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((p=r[0])==null?void 0:p.params)||{},nextUrl:new URL(e,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof y=="boolean")return y}return!0}):[]}function yX(e,t,{includeHydrateFallback:r}={}){return wX(e.map(n=>{let a=t.routes[n.route.id];if(!a)return[];let s=[a.module];return a.clientActionModule&&(s=s.concat(a.clientActionModule)),a.clientLoaderModule&&(s=s.concat(a.clientLoaderModule)),r&&a.hydrateFallbackModule&&(s=s.concat(a.hydrateFallbackModule)),a.imports&&(s=s.concat(a.imports)),s}).flat(1))}function wX(e){return[...new Set(e)]}function kX(e){let t={},r=Object.keys(e).sort();for(let n of r)t[n]=e[n];return t}function NX(e,t){let r=new Set;return new Set(t),e.reduce((n,a)=>{let s=JSON.stringify(kX(a));return r.has(s)||(r.add(s),n.push({key:s,link:a})),n},[])}function HL(){let e=T.useContext(Y1);return o6(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function _X(){let e=T.useContext(Ow);return o6(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var c6=T.createContext(void 0);c6.displayName="FrameworkContext";function $L(){let e=T.useContext(c6);return o6(e,"You must render this element inside a <HydratedRouter> element"),e}function SX(e,t){let r=T.useContext(c6),[n,a]=T.useState(!1),[s,l]=T.useState(!1),{onFocus:o,onBlur:c,onMouseEnter:d,onMouseLeave:f,onTouchStart:p}=t,y=T.useRef(null);T.useEffect(()=>{if(e==="render"&&l(!0),e==="viewport"){let w=S=>{S.forEach(O=>{l(O.isIntersecting)})},k=new IntersectionObserver(w,{threshold:.5});return y.current&&k.observe(y.current),()=>{k.disconnect()}}},[e]),T.useEffect(()=>{if(n){let w=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(w)}}},[n]);let g=()=>{a(!0)},N=()=>{a(!1),l(!1)};return r?e!=="intent"?[s,y,{}]:[s,y,{onFocus:eg(o,g),onBlur:eg(c,N),onMouseEnter:eg(d,g),onMouseLeave:eg(f,N),onTouchStart:eg(p,g)}]:[!1,y,{}]}function eg(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function jX({page:e,...t}){let{router:r}=HL(),n=T.useMemo(()=>PL(r.routes,e,r.basename),[r.routes,e,r.basename]);return n?T.createElement(AX,{page:e,matches:n,...t}):null}function CX(e){let{manifest:t,routeModules:r}=$L(),[n,a]=T.useState([]);return T.useEffect(()=>{let s=!1;return vX(e,t,r).then(l=>{s||a(l)}),()=>{s=!0}},[e,t,r]),n}function AX({page:e,matches:t,...r}){let n=bd(),{manifest:a,routeModules:s}=$L(),{basename:l}=HL(),{loaderData:o,matches:c}=_X(),d=T.useMemo(()=>sT(e,t,c,a,n,"data"),[e,t,c,a,n]),f=T.useMemo(()=>sT(e,t,c,a,n,"assets"),[e,t,c,a,n]),p=T.useMemo(()=>{if(e===n.pathname+n.search+n.hash)return[];let N=new Set,w=!1;if(t.forEach(S=>{var E;let O=a.routes[S.route.id];!O||!O.hasLoader||(!d.some(D=>D.route.id===S.route.id)&&S.route.id in o&&((E=s[S.route.id])!=null&&E.shouldRevalidate)||O.hasClientLoader?w=!0:N.add(S.route.id))}),N.size===0)return[];let k=pX(e,l,"data");return w&&N.size>0&&k.searchParams.set("_routes",t.filter(S=>N.has(S.route.id)).map(S=>S.route.id).join(",")),[k.pathname+k.search]},[l,o,n,a,d,t,e,s]),y=T.useMemo(()=>yX(f,a),[f,a]),g=CX(f);return T.createElement(T.Fragment,null,p.map(N=>T.createElement("link",{key:N,rel:"prefetch",as:"fetch",href:N,...r})),y.map(N=>T.createElement("link",{key:N,rel:"modulepreload",href:N,...r})),g.map(({key:N,link:w})=>T.createElement("link",{key:N,nonce:r.nonce,...w})))}function EX(...e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var VL=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{VL&&(window.__reactRouterVersion="7.9.5")}catch{}function TX({basename:e,children:t,window:r}){let n=T.useRef();n.current==null&&(n.current=vG({window:r,v5Compat:!0}));let a=n.current,[s,l]=T.useState({action:a.action,location:a.location}),o=T.useCallback(c=>{T.startTransition(()=>l(c))},[l]);return T.useLayoutEffect(()=>a.listen(o),[a,o]),T.createElement(lX,{basename:e,children:t,location:s.location,navigationType:s.action,navigator:a})}var WL=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Bu=T.forwardRef(function({onClick:t,discover:r="render",prefetch:n="none",relative:a,reloadDocument:s,replace:l,state:o,target:c,to:d,preventScrollReset:f,viewTransition:p,...y},g){let{basename:N}=T.useContext(ru),w=typeof d=="string"&&WL.test(d),k,S=!1;if(typeof d=="string"&&w&&(k=d,VL))try{let U=new URL(window.location.href),Z=d.startsWith("//")?new URL(U.protocol+d):new URL(d),q=H0(Z.pathname,N);Z.origin===U.origin&&q!=null?d=q+Z.search+Z.hash:S=!0}catch{hd(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let O=WG(d,{relative:a}),[E,D,H]=SX(n,y),W=DX(d,{replace:l,state:o,target:c,preventScrollReset:f,relative:a,viewTransition:p});function R(U){t&&t(U),U.defaultPrevented||W(U)}let z=T.createElement("a",{...y,...H,href:k||O,onClick:S||s?t:R,ref:EX(g,D),target:c,"data-discover":!w&&r==="render"?"true":void 0});return E&&!w?T.createElement(T.Fragment,null,z,T.createElement(jX,{page:O})):z});Bu.displayName="Link";var OX=T.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:n="",end:a=!1,style:s,to:l,viewTransition:o,children:c,...d},f){let p=Ob(l,{relative:d.relative}),y=bd(),g=T.useContext(Ow),{navigator:N,basename:w}=T.useContext(ru),k=g!=null&&BX(p)&&o===!0,S=N.encodeLocation?N.encodeLocation(p).pathname:p.pathname,O=y.pathname,E=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;r||(O=O.toLowerCase(),E=E?E.toLowerCase():null,S=S.toLowerCase()),E&&w&&(E=H0(E,w)||E);const D=S!=="/"&&S.endsWith("/")?S.length-1:S.length;let H=O===S||!a&&O.startsWith(S)&&O.charAt(D)==="/",W=E!=null&&(E===S||!a&&E.startsWith(S)&&E.charAt(S.length)==="/"),R={isActive:H,isPending:W,isTransitioning:k},z=H?t:void 0,U;typeof n=="function"?U=n(R):U=[n,H?"active":null,W?"pending":null,k?"transitioning":null].filter(Boolean).join(" ");let Z=typeof s=="function"?s(R):s;return T.createElement(Bu,{...d,"aria-current":z,className:U,ref:f,style:Z,to:l,viewTransition:o},typeof c=="function"?c(R):c)});OX.displayName="NavLink";var PX=T.forwardRef(({discover:e="render",fetcherKey:t,navigate:r,reloadDocument:n,replace:a,state:s,method:l=Z2,action:o,onSubmit:c,relative:d,preventScrollReset:f,viewTransition:p,...y},g)=>{let N=RX(),w=FX(o,{relative:d}),k=l.toLowerCase()==="get"?"get":"post",S=typeof o=="string"&&WL.test(o),O=E=>{if(c&&c(E),E.defaultPrevented)return;E.preventDefault();let D=E.nativeEvent.submitter,H=(D==null?void 0:D.getAttribute("formmethod"))||l;N(D||E.currentTarget,{fetcherKey:t,method:H,navigate:r,replace:a,state:s,relative:d,preventScrollReset:f,viewTransition:p})};return T.createElement("form",{ref:g,method:k,action:w,onSubmit:n?c:O,...y,"data-discover":!S&&e==="render"?"true":void 0})});PX.displayName="Form";function IX(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function KL(e){let t=T.useContext(Y1);return Bs(t,IX(e)),t}function DX(e,{target:t,replace:r,state:n,preventScrollReset:a,relative:s,viewTransition:l}={}){let o=Pw(),c=bd(),d=Ob(e,{relative:s});return T.useCallback(f=>{if(hX(f,t)){f.preventDefault();let p=r!==void 0?r:Fg(c)===Fg(d);o(e,{replace:p,state:n,preventScrollReset:a,relative:s,viewTransition:l})}},[c,o,d,r,n,t,e,a,s,l])}var MX=0,LX=()=>`__${String(++MX)}__`;function RX(){let{router:e}=KL("useSubmit"),{basename:t}=T.useContext(ru),r=nX();return T.useCallback(async(n,a={})=>{let{action:s,method:l,encType:o,formData:c,body:d}=xX(n,t);if(a.navigate===!1){let f=a.fetcherKey||LX();await e.fetch(f,r,a.action||s,{preventScrollReset:a.preventScrollReset,formData:c,body:d,formMethod:a.method||l,formEncType:a.encType||o,flushSync:a.flushSync})}else await e.navigate(a.action||s,{preventScrollReset:a.preventScrollReset,formData:c,body:d,formMethod:a.method||l,formEncType:a.encType||o,replace:a.replace,state:a.state,fromRouteId:r,flushSync:a.flushSync,viewTransition:a.viewTransition})},[e,t,r])}function FX(e,{relative:t}={}){let{basename:r}=T.useContext(ru),n=T.useContext($u);Bs(n,"useFormAction must be used inside a RouteContext");let[a]=n.matches.slice(-1),s={...Ob(e||".",{relative:t})},l=bd();if(e==null){s.search=l.search;let o=new URLSearchParams(s.search),c=o.getAll("index");if(c.some(f=>f==="")){o.delete("index"),c.filter(p=>p).forEach(p=>o.append("index",p));let f=o.toString();s.search=f?`?${f}`:""}}return(!e||e===".")&&a.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(s.pathname=s.pathname==="/"?r:D0([r,s.pathname])),Fg(s)}function BX(e,{relative:t}={}){let r=T.useContext(LL);Bs(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=KL("useViewTransitionState"),a=Ob(e,{relative:t});if(!r.isTransitioning)return!1;let s=H0(r.currentLocation.pathname,n)||r.currentLocation.pathname,l=H0(r.nextLocation.pathname,n)||r.nextLocation.pathname;return dy(a.pathname,l)!=null||dy(a.pathname,s)!=null}var GL=OL(),Q1=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},UX={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},zh,t6,yL,zX=(yL=class{constructor(){fn(this,zh,UX);fn(this,t6,!1)}setTimeoutProvider(e){Fr(this,zh,e)}setTimeout(e,t){return Qe(this,zh).setTimeout(e,t)}clearTimeout(e){Qe(this,zh).clearTimeout(e)}setInterval(e,t){return Qe(this,zh).setInterval(e,t)}clearInterval(e){Qe(this,zh).clearInterval(e)}},zh=new WeakMap,t6=new WeakMap,yL),Xf=new zX;function qX(e){setTimeout(e,0)}var Nm=typeof window>"u"||"Deno"in globalThis;function yo(){}function HX(e,t){return typeof e=="function"?e(t):e}function $N(e){return typeof e=="number"&&e>=0&&e!==1/0}function XL(e,t){return Math.max(e+(t||0)-Date.now(),0)}function ef(e,t){return typeof e=="function"?e(t):e}function id(e,t){return typeof e=="function"?e(t):e}function iT(e,t){const{type:r="all",exact:n,fetchStatus:a,predicate:s,queryKey:l,stale:o}=e;if(l){if(n){if(t.queryHash!==d6(l,t.options))return!1}else if(!Bg(t.queryKey,l))return!1}if(r!=="all"){const c=t.isActive();if(r==="active"&&!c||r==="inactive"&&c)return!1}return!(typeof o=="boolean"&&t.isStale()!==o||a&&a!==t.state.fetchStatus||s&&!s(t))}function lT(e,t){const{exact:r,status:n,predicate:a,mutationKey:s}=e;if(s){if(!t.options.mutationKey)return!1;if(r){if(_m(t.options.mutationKey)!==_m(s))return!1}else if(!Bg(t.options.mutationKey,s))return!1}return!(n&&t.state.status!==n||a&&!a(t))}function d6(e,t){return((t==null?void 0:t.queryKeyHashFn)||_m)(e)}function _m(e){return JSON.stringify(e,(t,r)=>VN(r)?Object.keys(r).sort().reduce((n,a)=>(n[a]=r[a],n),{}):r)}function Bg(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(r=>Bg(e[r],t[r])):!1}var $X=Object.prototype.hasOwnProperty;function u6(e,t){if(e===t)return e;const r=oT(e)&&oT(t);if(!r&&!(VN(e)&&VN(t)))return t;const a=(r?e:Object.keys(e)).length,s=r?t:Object.keys(t),l=s.length,o=r?new Array(l):{};let c=0;for(let d=0;d<l;d++){const f=r?d:s[d],p=e[f],y=t[f];if(p===y){o[f]=p,(r?d<a:$X.call(e,f))&&c++;continue}if(p===null||y===null||typeof p!="object"||typeof y!="object"){o[f]=y;continue}const g=u6(p,y);o[f]=g,g===p&&c++}return a===l&&c===a?e:o}function uy(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}function oT(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function VN(e){if(!cT(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!cT(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function cT(e){return Object.prototype.toString.call(e)==="[object Object]"}function VX(e){return new Promise(t=>{Xf.setTimeout(t,e)})}function WN(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?u6(e,t):t}function WX(e,t,r=0){const n=[...e,t];return r&&n.length>r?n.slice(1):n}function KX(e,t,r=0){const n=[t,...e];return r&&n.length>r?n.slice(0,-1):n}var h6=Symbol();function YL(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===h6?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function ZL(e,t){return typeof e=="function"?e(...t):!!e}var nm,qh,_1,wL,GX=(wL=class extends Q1{constructor(){super();fn(this,nm);fn(this,qh);fn(this,_1);Fr(this,_1,t=>{if(!Nm&&window.addEventListener){const r=()=>t();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){Qe(this,qh)||this.setEventListener(Qe(this,_1))}onUnsubscribe(){var t;this.hasListeners()||((t=Qe(this,qh))==null||t.call(this),Fr(this,qh,void 0))}setEventListener(t){var r;Fr(this,_1,t),(r=Qe(this,qh))==null||r.call(this),Fr(this,qh,t(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(t){Qe(this,nm)!==t&&(Fr(this,nm,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(r=>{r(t)})}isFocused(){var t;return typeof Qe(this,nm)=="boolean"?Qe(this,nm):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},nm=new WeakMap,qh=new WeakMap,_1=new WeakMap,wL),f6=new GX;function KN(){let e,t;const r=new Promise((a,s)=>{e=a,t=s});r.status="pending",r.catch(()=>{});function n(a){Object.assign(r,a),delete r.resolve,delete r.reject}return r.resolve=a=>{n({status:"fulfilled",value:a}),e(a)},r.reject=a=>{n({status:"rejected",reason:a}),t(a)},r}var XX=qX;function YX(){let e=[],t=0,r=o=>{o()},n=o=>{o()},a=XX;const s=o=>{t?e.push(o):a(()=>{r(o)})},l=()=>{const o=e;e=[],o.length&&a(()=>{n(()=>{o.forEach(c=>{r(c)})})})};return{batch:o=>{let c;t++;try{c=o()}finally{t--,t||l()}return c},batchCalls:o=>(...c)=>{s(()=>{o(...c)})},schedule:s,setNotifyFunction:o=>{r=o},setBatchNotifyFunction:o=>{n=o},setScheduler:o=>{a=o}}}var ki=YX(),S1,Hh,j1,kL,ZX=(kL=class extends Q1{constructor(){super();fn(this,S1,!0);fn(this,Hh);fn(this,j1);Fr(this,j1,t=>{if(!Nm&&window.addEventListener){const r=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){Qe(this,Hh)||this.setEventListener(Qe(this,j1))}onUnsubscribe(){var t;this.hasListeners()||((t=Qe(this,Hh))==null||t.call(this),Fr(this,Hh,void 0))}setEventListener(t){var r;Fr(this,j1,t),(r=Qe(this,Hh))==null||r.call(this),Fr(this,Hh,t(this.setOnline.bind(this)))}setOnline(t){Qe(this,S1)!==t&&(Fr(this,S1,t),this.listeners.forEach(n=>{n(t)}))}isOnline(){return Qe(this,S1)}},S1=new WeakMap,Hh=new WeakMap,j1=new WeakMap,kL),hy=new ZX;function QX(e){return Math.min(1e3*2**e,3e4)}function QL(e){return(e??"online")==="online"?hy.isOnline():!0}var GN=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function JL(e){let t=!1,r=0,n;const a=KN(),s=()=>a.status!=="pending",l=w=>{var k;if(!s()){const S=new GN(w);y(S),(k=e.onCancel)==null||k.call(e,S)}},o=()=>{t=!0},c=()=>{t=!1},d=()=>f6.isFocused()&&(e.networkMode==="always"||hy.isOnline())&&e.canRun(),f=()=>QL(e.networkMode)&&e.canRun(),p=w=>{s()||(n==null||n(),a.resolve(w))},y=w=>{s()||(n==null||n(),a.reject(w))},g=()=>new Promise(w=>{var k;n=S=>{(s()||d())&&w(S)},(k=e.onPause)==null||k.call(e)}).then(()=>{var w;n=void 0,s()||(w=e.onContinue)==null||w.call(e)}),N=()=>{if(s())return;let w;const k=r===0?e.initialPromise:void 0;try{w=k??e.fn()}catch(S){w=Promise.reject(S)}Promise.resolve(w).then(p).catch(S=>{var W;if(s())return;const O=e.retry??(Nm?0:3),E=e.retryDelay??QX,D=typeof E=="function"?E(r,S):E,H=O===!0||typeof O=="number"&&r<O||typeof O=="function"&&O(r,S);if(t||!H){y(S);return}r++,(W=e.onFail)==null||W.call(e,r,S),VX(D).then(()=>d()?void 0:g()).then(()=>{t?y(S):N()})})};return{promise:a,status:()=>a.status,cancel:l,continue:()=>(n==null||n(),a),cancelRetry:o,continueRetry:c,canStart:f,start:()=>(f()?N():g().then(N),a)}}var am,NL,eR=(NL=class{constructor(){fn(this,am)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),$N(this.gcTime)&&Fr(this,am,Xf.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Nm?1/0:300*1e3))}clearGcTimeout(){Qe(this,am)&&(Xf.clearTimeout(Qe(this,am)),Fr(this,am,void 0))}},am=new WeakMap,NL),sm,C1,ad,im,hl,Sb,lm,qd,p0,_L,JX=(_L=class extends eR{constructor(t){super();fn(this,qd);fn(this,sm);fn(this,C1);fn(this,ad);fn(this,im);fn(this,hl);fn(this,Sb);fn(this,lm);Fr(this,lm,!1),Fr(this,Sb,t.defaultOptions),this.setOptions(t.options),this.observers=[],Fr(this,im,t.client),Fr(this,ad,Qe(this,im).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,Fr(this,sm,uT(this.options)),this.state=t.state??Qe(this,sm),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=Qe(this,hl))==null?void 0:t.promise}setOptions(t){if(this.options={...Qe(this,Sb),...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const r=uT(this.options);r.data!==void 0&&(this.setState(dT(r.data,r.dataUpdatedAt)),Fr(this,sm,r))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&Qe(this,ad).remove(this)}setData(t,r){const n=WN(this.state.data,t,this.options);return ea(this,qd,p0).call(this,{data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(t,r){ea(this,qd,p0).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var n,a;const r=(n=Qe(this,hl))==null?void 0:n.promise;return(a=Qe(this,hl))==null||a.cancel(t),r?r.then(yo).catch(yo):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(Qe(this,sm))}isActive(){return this.observers.some(t=>id(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===h6||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>ef(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!XL(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(n=>n.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=Qe(this,hl))==null||r.continue()}onOnline(){var r;const t=this.observers.find(n=>n.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=Qe(this,hl))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),Qe(this,ad).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(Qe(this,hl)&&(Qe(this,lm)?Qe(this,hl).cancel({revert:!0}):Qe(this,hl).cancelRetry()),this.scheduleGc()),Qe(this,ad).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||ea(this,qd,p0).call(this,{type:"invalidate"})}async fetch(t,r){var c,d,f,p,y,g,N,w,k,S,O,E;if(this.state.fetchStatus!=="idle"&&((c=Qe(this,hl))==null?void 0:c.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(Qe(this,hl))return Qe(this,hl).continueRetry(),Qe(this,hl).promise}if(t&&this.setOptions(t),!this.options.queryFn){const D=this.observers.find(H=>H.options.queryFn);D&&this.setOptions(D.options)}const n=new AbortController,a=D=>{Object.defineProperty(D,"signal",{enumerable:!0,get:()=>(Fr(this,lm,!0),n.signal)})},s=()=>{const D=YL(this.options,r),W=(()=>{const R={client:Qe(this,im),queryKey:this.queryKey,meta:this.meta};return a(R),R})();return Fr(this,lm,!1),this.options.persister?this.options.persister(D,W,this):D(W)},o=(()=>{const D={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:Qe(this,im),state:this.state,fetchFn:s};return a(D),D})();(d=this.options.behavior)==null||d.onFetch(o,this),Fr(this,C1,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((f=o.fetchOptions)==null?void 0:f.meta))&&ea(this,qd,p0).call(this,{type:"fetch",meta:(p=o.fetchOptions)==null?void 0:p.meta}),Fr(this,hl,JL({initialPromise:r==null?void 0:r.initialPromise,fn:o.fetchFn,onCancel:D=>{D instanceof GN&&D.revert&&this.setState({...Qe(this,C1),fetchStatus:"idle"}),n.abort()},onFail:(D,H)=>{ea(this,qd,p0).call(this,{type:"failed",failureCount:D,error:H})},onPause:()=>{ea(this,qd,p0).call(this,{type:"pause"})},onContinue:()=>{ea(this,qd,p0).call(this,{type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0}));try{const D=await Qe(this,hl).start();if(D===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(D),(g=(y=Qe(this,ad).config).onSuccess)==null||g.call(y,D,this),(w=(N=Qe(this,ad).config).onSettled)==null||w.call(N,D,this.state.error,this),D}catch(D){if(D instanceof GN){if(D.silent)return Qe(this,hl).promise;if(D.revert){if(this.state.data===void 0)throw D;return this.state.data}}throw ea(this,qd,p0).call(this,{type:"error",error:D}),(S=(k=Qe(this,ad).config).onError)==null||S.call(k,D,this),(E=(O=Qe(this,ad).config).onSettled)==null||E.call(O,this.state.data,D,this),D}finally{this.scheduleGc()}}},sm=new WeakMap,C1=new WeakMap,ad=new WeakMap,im=new WeakMap,hl=new WeakMap,Sb=new WeakMap,lm=new WeakMap,qd=new WeakSet,p0=function(t){const r=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...tR(n.data,this.options),fetchMeta:t.meta??null};case"success":const a={...n,...dT(t.data,t.dataUpdatedAt),dataUpdateCount:n.dataUpdateCount+1,...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return Fr(this,C1,t.manual?a:void 0),a;case"error":const s=t.error;return{...n,error:s,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=r(this.state),ki.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),Qe(this,ad).notify({query:this,type:"updated",action:t})})},_L);function tR(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:QL(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function dT(e,t){return{data:e,dataUpdatedAt:t??Date.now(),error:null,isInvalidated:!1,status:"success"}}function uT(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,n=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var Qo,ba,jb,bo,om,A1,y0,$h,Cb,E1,T1,cm,dm,Vh,O1,za,mg,XN,YN,ZN,QN,JN,e_,t_,rR,SL,eY=(SL=class extends Q1{constructor(t,r){super();fn(this,za);fn(this,Qo);fn(this,ba);fn(this,jb);fn(this,bo);fn(this,om);fn(this,A1);fn(this,y0);fn(this,$h);fn(this,Cb);fn(this,E1);fn(this,T1);fn(this,cm);fn(this,dm);fn(this,Vh);fn(this,O1,new Set);this.options=r,Fr(this,Qo,t),Fr(this,$h,null),Fr(this,y0,KN()),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(Qe(this,ba).addObserver(this),hT(Qe(this,ba),this.options)?ea(this,za,mg).call(this):this.updateResult(),ea(this,za,QN).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return r_(Qe(this,ba),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return r_(Qe(this,ba),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,ea(this,za,JN).call(this),ea(this,za,e_).call(this),Qe(this,ba).removeObserver(this)}setOptions(t){const r=this.options,n=Qe(this,ba);if(this.options=Qe(this,Qo).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof id(this.options.enabled,Qe(this,ba))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");ea(this,za,t_).call(this),Qe(this,ba).setOptions(this.options),r._defaulted&&!uy(this.options,r)&&Qe(this,Qo).getQueryCache().notify({type:"observerOptionsUpdated",query:Qe(this,ba),observer:this});const a=this.hasListeners();a&&fT(Qe(this,ba),n,this.options,r)&&ea(this,za,mg).call(this),this.updateResult(),a&&(Qe(this,ba)!==n||id(this.options.enabled,Qe(this,ba))!==id(r.enabled,Qe(this,ba))||ef(this.options.staleTime,Qe(this,ba))!==ef(r.staleTime,Qe(this,ba)))&&ea(this,za,XN).call(this);const s=ea(this,za,YN).call(this);a&&(Qe(this,ba)!==n||id(this.options.enabled,Qe(this,ba))!==id(r.enabled,Qe(this,ba))||s!==Qe(this,Vh))&&ea(this,za,ZN).call(this,s)}getOptimisticResult(t){const r=Qe(this,Qo).getQueryCache().build(Qe(this,Qo),t),n=this.createResult(r,t);return rY(this,n)&&(Fr(this,bo,n),Fr(this,A1,this.options),Fr(this,om,Qe(this,ba).state)),n}getCurrentResult(){return Qe(this,bo)}trackResult(t,r){return new Proxy(t,{get:(n,a)=>(this.trackProp(a),r==null||r(a),a==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&Qe(this,y0).status==="pending"&&Qe(this,y0).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(n,a))})}trackProp(t){Qe(this,O1).add(t)}getCurrentQuery(){return Qe(this,ba)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const r=Qe(this,Qo).defaultQueryOptions(t),n=Qe(this,Qo).getQueryCache().build(Qe(this,Qo),r);return n.fetch().then(()=>this.createResult(n,r))}fetch(t){return ea(this,za,mg).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),Qe(this,bo)))}createResult(t,r){var U;const n=Qe(this,ba),a=this.options,s=Qe(this,bo),l=Qe(this,om),o=Qe(this,A1),d=t!==n?t.state:Qe(this,jb),{state:f}=t;let p={...f},y=!1,g;if(r._optimisticResults){const Z=this.hasListeners(),q=!Z&&hT(t,r),K=Z&&fT(t,n,r,a);(q||K)&&(p={...p,...tR(f.data,t.options)}),r._optimisticResults==="isRestoring"&&(p.fetchStatus="idle")}let{error:N,errorUpdatedAt:w,status:k}=p;g=p.data;let S=!1;if(r.placeholderData!==void 0&&g===void 0&&k==="pending"){let Z;s!=null&&s.isPlaceholderData&&r.placeholderData===(o==null?void 0:o.placeholderData)?(Z=s.data,S=!0):Z=typeof r.placeholderData=="function"?r.placeholderData((U=Qe(this,T1))==null?void 0:U.state.data,Qe(this,T1)):r.placeholderData,Z!==void 0&&(k="success",g=WN(s==null?void 0:s.data,Z,r),y=!0)}if(r.select&&g!==void 0&&!S)if(s&&g===(l==null?void 0:l.data)&&r.select===Qe(this,Cb))g=Qe(this,E1);else try{Fr(this,Cb,r.select),g=r.select(g),g=WN(s==null?void 0:s.data,g,r),Fr(this,E1,g),Fr(this,$h,null)}catch(Z){Fr(this,$h,Z)}Qe(this,$h)&&(N=Qe(this,$h),g=Qe(this,E1),w=Date.now(),k="error");const O=p.fetchStatus==="fetching",E=k==="pending",D=k==="error",H=E&&O,W=g!==void 0,z={status:k,fetchStatus:p.fetchStatus,isPending:E,isSuccess:k==="success",isError:D,isInitialLoading:H,isLoading:H,data:g,dataUpdatedAt:p.dataUpdatedAt,error:N,errorUpdatedAt:w,failureCount:p.fetchFailureCount,failureReason:p.fetchFailureReason,errorUpdateCount:p.errorUpdateCount,isFetched:p.dataUpdateCount>0||p.errorUpdateCount>0,isFetchedAfterMount:p.dataUpdateCount>d.dataUpdateCount||p.errorUpdateCount>d.errorUpdateCount,isFetching:O,isRefetching:O&&!E,isLoadingError:D&&!W,isPaused:p.fetchStatus==="paused",isPlaceholderData:y,isRefetchError:D&&W,isStale:m6(t,r),refetch:this.refetch,promise:Qe(this,y0),isEnabled:id(r.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const Z=Q=>{z.status==="error"?Q.reject(z.error):z.data!==void 0&&Q.resolve(z.data)},q=()=>{const Q=Fr(this,y0,z.promise=KN());Z(Q)},K=Qe(this,y0);switch(K.status){case"pending":t.queryHash===n.queryHash&&Z(K);break;case"fulfilled":(z.status==="error"||z.data!==K.value)&&q();break;case"rejected":(z.status!=="error"||z.error!==K.reason)&&q();break}}return z}updateResult(){const t=Qe(this,bo),r=this.createResult(Qe(this,ba),this.options);if(Fr(this,om,Qe(this,ba).state),Fr(this,A1,this.options),Qe(this,om).data!==void 0&&Fr(this,T1,Qe(this,ba)),uy(r,t))return;Fr(this,bo,r);const n=()=>{if(!t)return!0;const{notifyOnChangeProps:a}=this.options,s=typeof a=="function"?a():a;if(s==="all"||!s&&!Qe(this,O1).size)return!0;const l=new Set(s??Qe(this,O1));return this.options.throwOnError&&l.add("error"),Object.keys(Qe(this,bo)).some(o=>{const c=o;return Qe(this,bo)[c]!==t[c]&&l.has(c)})};ea(this,za,rR).call(this,{listeners:n()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&ea(this,za,QN).call(this)}},Qo=new WeakMap,ba=new WeakMap,jb=new WeakMap,bo=new WeakMap,om=new WeakMap,A1=new WeakMap,y0=new WeakMap,$h=new WeakMap,Cb=new WeakMap,E1=new WeakMap,T1=new WeakMap,cm=new WeakMap,dm=new WeakMap,Vh=new WeakMap,O1=new WeakMap,za=new WeakSet,mg=function(t){ea(this,za,t_).call(this);let r=Qe(this,ba).fetch(this.options,t);return t!=null&&t.throwOnError||(r=r.catch(yo)),r},XN=function(){ea(this,za,JN).call(this);const t=ef(this.options.staleTime,Qe(this,ba));if(Nm||Qe(this,bo).isStale||!$N(t))return;const n=XL(Qe(this,bo).dataUpdatedAt,t)+1;Fr(this,cm,Xf.setTimeout(()=>{Qe(this,bo).isStale||this.updateResult()},n))},YN=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(Qe(this,ba)):this.options.refetchInterval)??!1},ZN=function(t){ea(this,za,e_).call(this),Fr(this,Vh,t),!(Nm||id(this.options.enabled,Qe(this,ba))===!1||!$N(Qe(this,Vh))||Qe(this,Vh)===0)&&Fr(this,dm,Xf.setInterval(()=>{(this.options.refetchIntervalInBackground||f6.isFocused())&&ea(this,za,mg).call(this)},Qe(this,Vh)))},QN=function(){ea(this,za,XN).call(this),ea(this,za,ZN).call(this,ea(this,za,YN).call(this))},JN=function(){Qe(this,cm)&&(Xf.clearTimeout(Qe(this,cm)),Fr(this,cm,void 0))},e_=function(){Qe(this,dm)&&(Xf.clearInterval(Qe(this,dm)),Fr(this,dm,void 0))},t_=function(){const t=Qe(this,Qo).getQueryCache().build(Qe(this,Qo),this.options);if(t===Qe(this,ba))return;const r=Qe(this,ba);Fr(this,ba,t),Fr(this,jb,t.state),this.hasListeners()&&(r==null||r.removeObserver(this),t.addObserver(this))},rR=function(t){ki.batch(()=>{t.listeners&&this.listeners.forEach(r=>{r(Qe(this,bo))}),Qe(this,Qo).getQueryCache().notify({query:Qe(this,ba),type:"observerResultsUpdated"})})},SL);function tY(e,t){return id(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function hT(e,t){return tY(e,t)||e.state.data!==void 0&&r_(e,t,t.refetchOnMount)}function r_(e,t,r){if(id(t.enabled,e)!==!1&&ef(t.staleTime,e)!=="static"){const n=typeof r=="function"?r(e):r;return n==="always"||n!==!1&&m6(e,t)}return!1}function fT(e,t,r,n){return(e!==t||id(n.enabled,e)===!1)&&(!r.suspense||e.state.status!=="error")&&m6(e,r)}function m6(e,t){return id(t.enabled,e)!==!1&&e.isStaleByTime(ef(t.staleTime,e))}function rY(e,t){return!uy(e.getCurrentResult(),t)}function mT(e){return{onFetch:(t,r)=>{var f,p,y,g,N;const n=t.options,a=(y=(p=(f=t.fetchOptions)==null?void 0:f.meta)==null?void 0:p.fetchMore)==null?void 0:y.direction,s=((g=t.state.data)==null?void 0:g.pages)||[],l=((N=t.state.data)==null?void 0:N.pageParams)||[];let o={pages:[],pageParams:[]},c=0;const d=async()=>{let w=!1;const k=E=>{Object.defineProperty(E,"signal",{enumerable:!0,get:()=>(t.signal.aborted?w=!0:t.signal.addEventListener("abort",()=>{w=!0}),t.signal)})},S=YL(t.options,t.fetchOptions),O=async(E,D,H)=>{if(w)return Promise.reject();if(D==null&&E.pages.length)return Promise.resolve(E);const R=(()=>{const q={client:t.client,queryKey:t.queryKey,pageParam:D,direction:H?"backward":"forward",meta:t.options.meta};return k(q),q})(),z=await S(R),{maxPages:U}=t.options,Z=H?KX:WX;return{pages:Z(E.pages,z,U),pageParams:Z(E.pageParams,D,U)}};if(a&&s.length){const E=a==="backward",D=E?nY:xT,H={pages:s,pageParams:l},W=D(n,H);o=await O(H,W,E)}else{const E=e??s.length;do{const D=c===0?l[0]??n.initialPageParam:xT(n,o);if(c>0&&D==null)break;o=await O(o,D),c++}while(c<E)}return o};t.options.persister?t.fetchFn=()=>{var w,k;return(k=(w=t.options).persister)==null?void 0:k.call(w,d,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r)}:t.fetchFn=d}}}function xT(e,{pages:t,pageParams:r}){const n=t.length-1;return t.length>0?e.getNextPageParam(t[n],t,r[n],r):void 0}function nY(e,{pages:t,pageParams:r}){var n;return t.length>0?(n=e.getPreviousPageParam)==null?void 0:n.call(e,t[0],t,r[0],r):void 0}var Ab,Au,vo,um,Eu,Lh,jL,aY=(jL=class extends eR{constructor(t){super();fn(this,Eu);fn(this,Ab);fn(this,Au);fn(this,vo);fn(this,um);Fr(this,Ab,t.client),this.mutationId=t.mutationId,Fr(this,vo,t.mutationCache),Fr(this,Au,[]),this.state=t.state||nR(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){Qe(this,Au).includes(t)||(Qe(this,Au).push(t),this.clearGcTimeout(),Qe(this,vo).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){Fr(this,Au,Qe(this,Au).filter(r=>r!==t)),this.scheduleGc(),Qe(this,vo).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){Qe(this,Au).length||(this.state.status==="pending"?this.scheduleGc():Qe(this,vo).remove(this))}continue(){var t;return((t=Qe(this,um))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var l,o,c,d,f,p,y,g,N,w,k,S,O,E,D,H,W,R,z,U;const r=()=>{ea(this,Eu,Lh).call(this,{type:"continue"})},n={client:Qe(this,Ab),meta:this.options.meta,mutationKey:this.options.mutationKey};Fr(this,um,JL({fn:()=>this.options.mutationFn?this.options.mutationFn(t,n):Promise.reject(new Error("No mutationFn found")),onFail:(Z,q)=>{ea(this,Eu,Lh).call(this,{type:"failed",failureCount:Z,error:q})},onPause:()=>{ea(this,Eu,Lh).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>Qe(this,vo).canRun(this)}));const a=this.state.status==="pending",s=!Qe(this,um).canStart();try{if(a)r();else{ea(this,Eu,Lh).call(this,{type:"pending",variables:t,isPaused:s}),await((o=(l=Qe(this,vo).config).onMutate)==null?void 0:o.call(l,t,this,n));const q=await((d=(c=this.options).onMutate)==null?void 0:d.call(c,t,n));q!==this.state.context&&ea(this,Eu,Lh).call(this,{type:"pending",context:q,variables:t,isPaused:s})}const Z=await Qe(this,um).start();return await((p=(f=Qe(this,vo).config).onSuccess)==null?void 0:p.call(f,Z,t,this.state.context,this,n)),await((g=(y=this.options).onSuccess)==null?void 0:g.call(y,Z,t,this.state.context,n)),await((w=(N=Qe(this,vo).config).onSettled)==null?void 0:w.call(N,Z,null,this.state.variables,this.state.context,this,n)),await((S=(k=this.options).onSettled)==null?void 0:S.call(k,Z,null,t,this.state.context,n)),ea(this,Eu,Lh).call(this,{type:"success",data:Z}),Z}catch(Z){try{throw await((E=(O=Qe(this,vo).config).onError)==null?void 0:E.call(O,Z,t,this.state.context,this,n)),await((H=(D=this.options).onError)==null?void 0:H.call(D,Z,t,this.state.context,n)),await((R=(W=Qe(this,vo).config).onSettled)==null?void 0:R.call(W,void 0,Z,this.state.variables,this.state.context,this,n)),await((U=(z=this.options).onSettled)==null?void 0:U.call(z,void 0,Z,t,this.state.context,n)),Z}finally{ea(this,Eu,Lh).call(this,{type:"error",error:Z})}}finally{Qe(this,vo).runNext(this)}}},Ab=new WeakMap,Au=new WeakMap,vo=new WeakMap,um=new WeakMap,Eu=new WeakSet,Lh=function(t){const r=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),ki.batch(()=>{Qe(this,Au).forEach(n=>{n.onMutationUpdate(t)}),Qe(this,vo).notify({mutation:this,type:"updated",action:t})})},jL);function nR(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var w0,Hd,Eb,CL,sY=(CL=class extends Q1{constructor(t={}){super();fn(this,w0);fn(this,Hd);fn(this,Eb);this.config=t,Fr(this,w0,new Set),Fr(this,Hd,new Map),Fr(this,Eb,0)}build(t,r,n){const a=new aY({client:t,mutationCache:this,mutationId:++t2(this,Eb)._,options:t.defaultMutationOptions(r),state:n});return this.add(a),a}add(t){Qe(this,w0).add(t);const r=a2(t);if(typeof r=="string"){const n=Qe(this,Hd).get(r);n?n.push(t):Qe(this,Hd).set(r,[t])}this.notify({type:"added",mutation:t})}remove(t){if(Qe(this,w0).delete(t)){const r=a2(t);if(typeof r=="string"){const n=Qe(this,Hd).get(r);if(n)if(n.length>1){const a=n.indexOf(t);a!==-1&&n.splice(a,1)}else n[0]===t&&Qe(this,Hd).delete(r)}}this.notify({type:"removed",mutation:t})}canRun(t){const r=a2(t);if(typeof r=="string"){const n=Qe(this,Hd).get(r),a=n==null?void 0:n.find(s=>s.state.status==="pending");return!a||a===t}else return!0}runNext(t){var n;const r=a2(t);if(typeof r=="string"){const a=(n=Qe(this,Hd).get(r))==null?void 0:n.find(s=>s!==t&&s.state.isPaused);return(a==null?void 0:a.continue())??Promise.resolve()}else return Promise.resolve()}clear(){ki.batch(()=>{Qe(this,w0).forEach(t=>{this.notify({type:"removed",mutation:t})}),Qe(this,w0).clear(),Qe(this,Hd).clear()})}getAll(){return Array.from(Qe(this,w0))}find(t){const r={exact:!0,...t};return this.getAll().find(n=>lT(r,n))}findAll(t={}){return this.getAll().filter(r=>lT(t,r))}notify(t){ki.batch(()=>{this.listeners.forEach(r=>{r(t)})})}resumePausedMutations(){const t=this.getAll().filter(r=>r.state.isPaused);return ki.batch(()=>Promise.all(t.map(r=>r.continue().catch(yo))))}},w0=new WeakMap,Hd=new WeakMap,Eb=new WeakMap,CL);function a2(e){var t;return(t=e.options.scope)==null?void 0:t.id}var k0,Wh,Jo,N0,q0,J2,n_,AL,iY=(AL=class extends Q1{constructor(r,n){super();fn(this,q0);fn(this,k0);fn(this,Wh);fn(this,Jo);fn(this,N0);Fr(this,k0,r),this.setOptions(n),this.bindMethods(),ea(this,q0,J2).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(r){var a;const n=this.options;this.options=Qe(this,k0).defaultMutationOptions(r),uy(this.options,n)||Qe(this,k0).getMutationCache().notify({type:"observerOptionsUpdated",mutation:Qe(this,Jo),observer:this}),n!=null&&n.mutationKey&&this.options.mutationKey&&_m(n.mutationKey)!==_m(this.options.mutationKey)?this.reset():((a=Qe(this,Jo))==null?void 0:a.state.status)==="pending"&&Qe(this,Jo).setOptions(this.options)}onUnsubscribe(){var r;this.hasListeners()||(r=Qe(this,Jo))==null||r.removeObserver(this)}onMutationUpdate(r){ea(this,q0,J2).call(this),ea(this,q0,n_).call(this,r)}getCurrentResult(){return Qe(this,Wh)}reset(){var r;(r=Qe(this,Jo))==null||r.removeObserver(this),Fr(this,Jo,void 0),ea(this,q0,J2).call(this),ea(this,q0,n_).call(this)}mutate(r,n){var a;return Fr(this,N0,n),(a=Qe(this,Jo))==null||a.removeObserver(this),Fr(this,Jo,Qe(this,k0).getMutationCache().build(Qe(this,k0),this.options)),Qe(this,Jo).addObserver(this),Qe(this,Jo).execute(r)}},k0=new WeakMap,Wh=new WeakMap,Jo=new WeakMap,N0=new WeakMap,q0=new WeakSet,J2=function(){var n;const r=((n=Qe(this,Jo))==null?void 0:n.state)??nR();Fr(this,Wh,{...r,isPending:r.status==="pending",isSuccess:r.status==="success",isError:r.status==="error",isIdle:r.status==="idle",mutate:this.mutate,reset:this.reset})},n_=function(r){ki.batch(()=>{var n,a,s,l,o,c,d,f;if(Qe(this,N0)&&this.hasListeners()){const p=Qe(this,Wh).variables,y=Qe(this,Wh).context,g={client:Qe(this,k0),meta:this.options.meta,mutationKey:this.options.mutationKey};(r==null?void 0:r.type)==="success"?((a=(n=Qe(this,N0)).onSuccess)==null||a.call(n,r.data,p,y,g),(l=(s=Qe(this,N0)).onSettled)==null||l.call(s,r.data,null,p,y,g)):(r==null?void 0:r.type)==="error"&&((c=(o=Qe(this,N0)).onError)==null||c.call(o,r.error,p,y,g),(f=(d=Qe(this,N0)).onSettled)==null||f.call(d,void 0,r.error,p,y,g))}this.listeners.forEach(p=>{p(Qe(this,Wh))})})},AL),Tu,EL,lY=(EL=class extends Q1{constructor(t={}){super();fn(this,Tu);this.config=t,Fr(this,Tu,new Map)}build(t,r,n){const a=r.queryKey,s=r.queryHash??d6(a,r);let l=this.get(s);return l||(l=new JX({client:t,queryKey:a,queryHash:s,options:t.defaultQueryOptions(r),state:n,defaultOptions:t.getQueryDefaults(a)}),this.add(l)),l}add(t){Qe(this,Tu).has(t.queryHash)||(Qe(this,Tu).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const r=Qe(this,Tu).get(t.queryHash);r&&(t.destroy(),r===t&&Qe(this,Tu).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){ki.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return Qe(this,Tu).get(t)}getAll(){return[...Qe(this,Tu).values()]}find(t){const r={exact:!0,...t};return this.getAll().find(n=>iT(r,n))}findAll(t={}){const r=this.getAll();return Object.keys(t).length>0?r.filter(n=>iT(t,n)):r}notify(t){ki.batch(()=>{this.listeners.forEach(r=>{r(t)})})}onFocus(){ki.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){ki.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Tu=new WeakMap,EL),si,Kh,Gh,P1,I1,Xh,D1,M1,TL,oY=(TL=class{constructor(e={}){fn(this,si);fn(this,Kh);fn(this,Gh);fn(this,P1);fn(this,I1);fn(this,Xh);fn(this,D1);fn(this,M1);Fr(this,si,e.queryCache||new lY),Fr(this,Kh,e.mutationCache||new sY),Fr(this,Gh,e.defaultOptions||{}),Fr(this,P1,new Map),Fr(this,I1,new Map),Fr(this,Xh,0)}mount(){t2(this,Xh)._++,Qe(this,Xh)===1&&(Fr(this,D1,f6.subscribe(async e=>{e&&(await this.resumePausedMutations(),Qe(this,si).onFocus())})),Fr(this,M1,hy.subscribe(async e=>{e&&(await this.resumePausedMutations(),Qe(this,si).onOnline())})))}unmount(){var e,t;t2(this,Xh)._--,Qe(this,Xh)===0&&((e=Qe(this,D1))==null||e.call(this),Fr(this,D1,void 0),(t=Qe(this,M1))==null||t.call(this),Fr(this,M1,void 0))}isFetching(e){return Qe(this,si).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return Qe(this,Kh).findAll({...e,status:"pending"}).length}getQueryData(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=Qe(this,si).get(t.queryHash))==null?void 0:r.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),r=Qe(this,si).build(this,t),n=r.state.data;return n===void 0?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(ef(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(n))}getQueriesData(e){return Qe(this,si).findAll(e).map(({queryKey:t,state:r})=>{const n=r.data;return[t,n]})}setQueryData(e,t,r){const n=this.defaultQueryOptions({queryKey:e}),a=Qe(this,si).get(n.queryHash),s=a==null?void 0:a.state.data,l=HX(t,s);if(l!==void 0)return Qe(this,si).build(this,n).setData(l,{...r,manual:!0})}setQueriesData(e,t,r){return ki.batch(()=>Qe(this,si).findAll(e).map(({queryKey:n})=>[n,this.setQueryData(n,t,r)]))}getQueryState(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=Qe(this,si).get(t.queryHash))==null?void 0:r.state}removeQueries(e){const t=Qe(this,si);ki.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=Qe(this,si);return ki.batch(()=>(r.findAll(e).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const r={revert:!0,...t},n=ki.batch(()=>Qe(this,si).findAll(e).map(a=>a.cancel(r)));return Promise.all(n).then(yo).catch(yo)}invalidateQueries(e,t={}){return ki.batch(()=>(Qe(this,si).findAll(e).forEach(r=>{r.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},n=ki.batch(()=>Qe(this,si).findAll(e).filter(a=>!a.isDisabled()&&!a.isStatic()).map(a=>{let s=a.fetch(void 0,r);return r.throwOnError||(s=s.catch(yo)),a.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(n).then(yo)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=Qe(this,si).build(this,t);return r.isStaleByTime(ef(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(yo).catch(yo)}fetchInfiniteQuery(e){return e.behavior=mT(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(yo).catch(yo)}ensureInfiniteQueryData(e){return e.behavior=mT(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return hy.isOnline()?Qe(this,Kh).resumePausedMutations():Promise.resolve()}getQueryCache(){return Qe(this,si)}getMutationCache(){return Qe(this,Kh)}getDefaultOptions(){return Qe(this,Gh)}setDefaultOptions(e){Fr(this,Gh,e)}setQueryDefaults(e,t){Qe(this,P1).set(_m(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...Qe(this,P1).values()],r={};return t.forEach(n=>{Bg(e,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(e,t){Qe(this,I1).set(_m(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...Qe(this,I1).values()],r={};return t.forEach(n=>{Bg(e,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...Qe(this,Gh).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=d6(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===h6&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...Qe(this,Gh).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){Qe(this,si).clear(),Qe(this,Kh).clear()}},si=new WeakMap,Kh=new WeakMap,Gh=new WeakMap,P1=new WeakMap,I1=new WeakMap,Xh=new WeakMap,D1=new WeakMap,M1=new WeakMap,TL),aR=T.createContext(void 0),qn=e=>{const t=T.useContext(aR);if(e)return e;if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},cY=({client:e,children:t})=>(T.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),i.jsx(aR.Provider,{value:e,children:t})),sR=T.createContext(!1),dY=()=>T.useContext(sR);sR.Provider;function uY(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var hY=T.createContext(uY()),fY=()=>T.useContext(hY),mY=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},xY=e=>{T.useEffect(()=>{e.clearReset()},[e])},pY=({result:e,errorResetBoundary:t,throwOnError:r,query:n,suspense:a})=>e.isError&&!t.isReset()&&!e.isFetching&&n&&(a&&e.data===void 0||ZL(r,[e.error,n])),gY=e=>{if(e.suspense){const r=a=>a==="static"?a:Math.max(a??1e3,1e3),n=e.staleTime;e.staleTime=typeof n=="function"?(...a)=>r(n(...a)):r(n),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},bY=(e,t)=>e.isLoading&&e.isFetching&&!t,vY=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,pT=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()});function yY(e,t,r){var p,y,g,N,w;const n=dY(),a=fY(),s=qn(r),l=s.defaultQueryOptions(e);(y=(p=s.getDefaultOptions().queries)==null?void 0:p._experimental_beforeQuery)==null||y.call(p,l),l._optimisticResults=n?"isRestoring":"optimistic",gY(l),mY(l,a),xY(a);const o=!s.getQueryCache().get(l.queryHash),[c]=T.useState(()=>new t(s,l)),d=c.getOptimisticResult(l),f=!n&&e.subscribed!==!1;if(T.useSyncExternalStore(T.useCallback(k=>{const S=f?c.subscribe(ki.batchCalls(k)):yo;return c.updateResult(),S},[c,f]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),T.useEffect(()=>{c.setOptions(l)},[l,c]),vY(l,d))throw pT(l,c,a);if(pY({result:d,errorResetBoundary:a,throwOnError:l.throwOnError,query:s.getQueryCache().get(l.queryHash),suspense:l.suspense}))throw d.error;if((N=(g=s.getDefaultOptions().queries)==null?void 0:g._experimental_afterQuery)==null||N.call(g,l,d),l.experimental_prefetchInRender&&!Nm&&bY(d,n)){const k=o?pT(l,c,a):(w=s.getQueryCache().get(l.queryHash))==null?void 0:w.promise;k==null||k.catch(yo).finally(()=>{c.updateResult()})}return l.notifyOnChangeProps?d:c.trackResult(d)}function Os(e,t){return yY(e,eY,t)}function wY(e,t){const r=qn(t),n=r.getQueryCache();return T.useSyncExternalStore(T.useCallback(a=>n.subscribe(ki.batchCalls(a)),[n]),()=>r.isFetching(e),()=>r.isFetching(e))}function kY(e,t){const r=qn(t);return NY({filters:{...e,status:"pending"}},r).length}function gT(e,t){return e.findAll(t.filters).map(r=>t.select?t.select(r):r.state)}function NY(e={},t){const r=qn(t).getMutationCache(),n=T.useRef(e),a=T.useRef(null);return a.current===null&&(a.current=gT(r,e)),T.useEffect(()=>{n.current=e}),T.useSyncExternalStore(T.useCallback(s=>r.subscribe(()=>{const l=u6(a.current,gT(r,n.current));a.current!==l&&(a.current=l,ki.schedule(s))}),[r]),()=>a.current,()=>a.current)}function ha(e,t){const r=qn(t),[n]=T.useState(()=>new iY(r,e));T.useEffect(()=>{n.setOptions(e)},[n,e]);const a=T.useSyncExternalStore(T.useCallback(l=>n.subscribe(ki.batchCalls(l)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),s=T.useCallback((l,o)=>{n.mutate(l,o).catch(yo)},[n]);if(a.error&&ZL(n.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:s,mutateAsync:a.mutate}}function iR(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=iR(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function Zn(){for(var e,t,r=0,n="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=iR(e))&&(n&&(n+=" "),n+=t);return n}function _Y(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",t.firstChild?t.insertBefore(r,t.firstChild):t.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}_Y(`:root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
`);var Pb=e=>typeof e=="number"&&!isNaN(e),Sm=e=>typeof e=="string",$0=e=>typeof e=="function",SY=e=>Sm(e)||Pb(e),a_=e=>Sm(e)||$0(e)?e:null,jY=(e,t)=>e===!1||Pb(e)&&e>0?e:t,s_=e=>T.isValidElement(e)||Sm(e)||$0(e)||Pb(e);function CY(e,t,r=300){let{scrollHeight:n,style:a}=e;requestAnimationFrame(()=>{a.minHeight="initial",a.height=n+"px",a.transition=`all ${r}ms`,requestAnimationFrame(()=>{a.height="0",a.padding="0",a.margin="0",setTimeout(t,r)})})}function AY({enter:e,exit:t,appendPosition:r=!1,collapse:n=!0,collapseDuration:a=300}){return function({children:s,position:l,preventExitTransition:o,done:c,nodeRef:d,isIn:f,playToast:p}){let y=r?`${e}--${l}`:e,g=r?`${t}--${l}`:t,N=T.useRef(0);return T.useLayoutEffect(()=>{let w=d.current,k=y.split(" "),S=O=>{O.target===d.current&&(p(),w.removeEventListener("animationend",S),w.removeEventListener("animationcancel",S),N.current===0&&O.type!=="animationcancel"&&w.classList.remove(...k))};w.classList.add(...k),w.addEventListener("animationend",S),w.addEventListener("animationcancel",S)},[]),T.useEffect(()=>{let w=d.current,k=()=>{w.removeEventListener("animationend",k),n?CY(w,c,a):c()};f||(o?k():(N.current=1,w.className+=` ${g}`,w.addEventListener("animationend",k)))},[f]),ua.createElement(ua.Fragment,null,s)}}function bT(e,t){return{content:lR(e.content,e.props),containerId:e.props.containerId,id:e.props.toastId,theme:e.props.theme,type:e.props.type,data:e.props.data||{},isLoading:e.props.isLoading,icon:e.props.icon,reason:e.removalReason,status:t}}function lR(e,t,r=!1){return T.isValidElement(e)&&!Sm(e.type)?T.cloneElement(e,{closeToast:t.closeToast,toastProps:t,data:t.data,isPaused:r}):$0(e)?e({closeToast:t.closeToast,toastProps:t,data:t.data,isPaused:r}):e}function EY({closeToast:e,theme:t,ariaLabel:r="close"}){return ua.createElement("button",{className:`Toastify__close-button Toastify__close-button--${t}`,type:"button",onClick:n=>{n.stopPropagation(),e(!0)},"aria-label":r},ua.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},ua.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function TY({delay:e,isRunning:t,closeToast:r,type:n="default",hide:a,className:s,controlledProgress:l,progress:o,rtl:c,isIn:d,theme:f}){let p=a||l&&o===0,y={animationDuration:`${e}ms`,animationPlayState:t?"running":"paused"};l&&(y.transform=`scaleX(${o})`);let g=Zn("Toastify__progress-bar",l?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${f}`,`Toastify__progress-bar--${n}`,{"Toastify__progress-bar--rtl":c}),N=$0(s)?s({rtl:c,type:n,defaultClassName:g}):Zn(g,s),w={[l&&o>=1?"onTransitionEnd":"onAnimationEnd"]:l&&o<1?null:()=>{d&&r()}};return ua.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":p},ua.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${f} Toastify__progress-bar--${n}`}),ua.createElement("div",{role:"progressbar","aria-hidden":p?"true":"false","aria-label":"notification timer",className:N,style:y,...w}))}var OY=1,oR=()=>`${OY++}`;function PY(e,t,r){let n=1,a=0,s=[],l=[],o=t,c=new Map,d=new Set,f=O=>(d.add(O),()=>d.delete(O)),p=()=>{l=Array.from(c.values()),d.forEach(O=>O())},y=({containerId:O,toastId:E,updateId:D})=>{let H=O?O!==e:e!==1,W=c.has(E)&&D==null;return H||W},g=(O,E)=>{c.forEach(D=>{var H;(E==null||E===D.props.toastId)&&((H=D.toggle)==null||H.call(D,O))})},N=O=>{var E,D;(D=(E=O.props)==null?void 0:E.onClose)==null||D.call(E,O.removalReason),O.isActive=!1},w=O=>{if(O==null)c.forEach(N);else{let E=c.get(O);E&&N(E)}p()},k=()=>{a-=s.length,s=[]},S=O=>{var E,D;let{toastId:H,updateId:W}=O.props,R=W==null;O.staleId&&c.delete(O.staleId),O.isActive=!0,c.set(H,O),p(),r(bT(O,R?"added":"updated")),R&&((D=(E=O.props).onOpen)==null||D.call(E))};return{id:e,props:o,observe:f,toggle:g,removeToast:w,toasts:c,clearQueue:k,buildToast:(O,E)=>{if(y(E))return;let{toastId:D,updateId:H,data:W,staleId:R,delay:z}=E,U=H==null;U&&a++;let Z={...o,style:o.toastStyle,key:n++,...Object.fromEntries(Object.entries(E).filter(([K,Q])=>Q!=null)),toastId:D,updateId:H,data:W,isIn:!1,className:a_(E.className||o.toastClassName),progressClassName:a_(E.progressClassName||o.progressClassName),autoClose:E.isLoading?!1:jY(E.autoClose,o.autoClose),closeToast(K){c.get(D).removalReason=K,w(D)},deleteToast(){let K=c.get(D);if(K!=null){if(r(bT(K,"removed")),c.delete(D),a--,a<0&&(a=0),s.length>0){S(s.shift());return}p()}}};Z.closeButton=o.closeButton,E.closeButton===!1||s_(E.closeButton)?Z.closeButton=E.closeButton:E.closeButton===!0&&(Z.closeButton=s_(o.closeButton)?o.closeButton:!0);let q={content:O,props:Z,staleId:R};o.limit&&o.limit>0&&a>o.limit&&U?s.push(q):Pb(z)?setTimeout(()=>{S(q)},z):S(q)},setProps(O){o=O},setToggle:(O,E)=>{let D=c.get(O);D&&(D.toggle=E)},isToastActive:O=>{var E;return(E=c.get(O))==null?void 0:E.isActive},getSnapshot:()=>l}}var So=new Map,Ug=[],i_=new Set,IY=e=>i_.forEach(t=>t(e)),cR=()=>So.size>0;function DY(){Ug.forEach(e=>uR(e.content,e.options)),Ug=[]}var MY=(e,{containerId:t})=>{var r;return(r=So.get(t||1))==null?void 0:r.toasts.get(e)};function dR(e,t){var r;if(t)return!!((r=So.get(t))!=null&&r.isToastActive(e));let n=!1;return So.forEach(a=>{a.isToastActive(e)&&(n=!0)}),n}function LY(e){if(!cR()){Ug=Ug.filter(t=>e!=null&&t.options.toastId!==e);return}if(e==null||SY(e))So.forEach(t=>{t.removeToast(e)});else if(e&&("containerId"in e||"id"in e)){let t=So.get(e.containerId);t?t.removeToast(e.id):So.forEach(r=>{r.removeToast(e.id)})}}var RY=(e={})=>{So.forEach(t=>{t.props.limit&&(!e.containerId||t.id===e.containerId)&&t.clearQueue()})};function uR(e,t){s_(e)&&(cR()||Ug.push({content:e,options:t}),So.forEach(r=>{r.buildToast(e,t)}))}function FY(e){var t;(t=So.get(e.containerId||1))==null||t.setToggle(e.id,e.fn)}function hR(e,t){So.forEach(r=>{(t==null||!(t!=null&&t.containerId)||(t==null?void 0:t.containerId)===r.id)&&r.toggle(e,t==null?void 0:t.id)})}function BY(e){let t=e.containerId||1;return{subscribe(r){let n=PY(t,e,IY);So.set(t,n);let a=n.observe(r);return DY(),()=>{a(),So.delete(t)}},setProps(r){var n;(n=So.get(t))==null||n.setProps(r)},getSnapshot(){var r;return(r=So.get(t))==null?void 0:r.getSnapshot()}}}function UY(e){return i_.add(e),()=>{i_.delete(e)}}function zY(e){return e&&(Sm(e.toastId)||Pb(e.toastId))?e.toastId:oR()}function Ib(e,t){return uR(e,t),t.toastId}function Dw(e,t){return{...t,type:t&&t.type||e,toastId:zY(t)}}function Mw(e){return(t,r)=>Ib(t,Dw(e,r))}function Da(e,t){return Ib(e,Dw("default",t))}Da.loading=(e,t)=>Ib(e,Dw("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...t}));function qY(e,{pending:t,error:r,success:n},a){let s;t&&(s=Sm(t)?Da.loading(t,a):Da.loading(t.render,{...a,...t}));let l={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},o=(d,f,p)=>{if(f==null){Da.dismiss(s);return}let y={type:d,...l,...a,data:p},g=Sm(f)?{render:f}:f;return s?Da.update(s,{...y,...g}):Da(g.render,{...y,...g}),p},c=$0(e)?e():e;return c.then(d=>o("success",n,d)).catch(d=>o("error",r,d)),c}Da.promise=qY;Da.success=Mw("success");Da.info=Mw("info");Da.error=Mw("error");Da.warning=Mw("warning");Da.warn=Da.warning;Da.dark=(e,t)=>Ib(e,Dw("default",{theme:"dark",...t}));function HY(e){LY(e)}Da.dismiss=HY;Da.clearWaitingQueue=RY;Da.isActive=dR;Da.update=(e,t={})=>{let r=MY(e,t);if(r){let{props:n,content:a}=r,s={delay:100,...n,...t,toastId:t.toastId||e,updateId:oR()};s.toastId!==e&&(s.staleId=e);let l=s.render||a;delete s.render,Ib(l,s)}};Da.done=e=>{Da.update(e,{progress:1})};Da.onChange=UY;Da.play=e=>hR(!0,e);Da.pause=e=>hR(!1,e);function $Y(e){var t;let{subscribe:r,getSnapshot:n,setProps:a}=T.useRef(BY(e)).current;a(e);let s=(t=T.useSyncExternalStore(r,n,n))==null?void 0:t.slice();function l(o){if(!s)return[];let c=new Map;return e.newestOnTop&&s.reverse(),s.forEach(d=>{let{position:f}=d.props;c.has(f)||c.set(f,[]),c.get(f).push(d)}),Array.from(c,d=>o(d[0],d[1]))}return{getToastToRender:l,isToastActive:dR,count:s==null?void 0:s.length}}function VY(e){let[t,r]=T.useState(!1),[n,a]=T.useState(!1),s=T.useRef(null),l=T.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:o,pauseOnHover:c,closeToast:d,onClick:f,closeOnClick:p}=e;FY({id:e.toastId,containerId:e.containerId,fn:r}),T.useEffect(()=>{if(e.pauseOnFocusLoss)return y(),()=>{g()}},[e.pauseOnFocusLoss]);function y(){document.hasFocus()||S(),window.addEventListener("focus",k),window.addEventListener("blur",S)}function g(){window.removeEventListener("focus",k),window.removeEventListener("blur",S)}function N(R){if(e.draggable===!0||e.draggable===R.pointerType){O();let z=s.current;l.canCloseOnClick=!0,l.canDrag=!0,z.style.transition="none",e.draggableDirection==="x"?(l.start=R.clientX,l.removalDistance=z.offsetWidth*(e.draggablePercent/100)):(l.start=R.clientY,l.removalDistance=z.offsetHeight*(e.draggablePercent===80?e.draggablePercent*1.5:e.draggablePercent)/100)}}function w(R){let{top:z,bottom:U,left:Z,right:q}=s.current.getBoundingClientRect();R.nativeEvent.type!=="touchend"&&e.pauseOnHover&&R.clientX>=Z&&R.clientX<=q&&R.clientY>=z&&R.clientY<=U?S():k()}function k(){r(!0)}function S(){r(!1)}function O(){l.didMove=!1,document.addEventListener("pointermove",D),document.addEventListener("pointerup",H)}function E(){document.removeEventListener("pointermove",D),document.removeEventListener("pointerup",H)}function D(R){let z=s.current;if(l.canDrag&&z){l.didMove=!0,t&&S(),e.draggableDirection==="x"?l.delta=R.clientX-l.start:l.delta=R.clientY-l.start,l.start!==R.clientX&&(l.canCloseOnClick=!1);let U=e.draggableDirection==="x"?`${l.delta}px, var(--y)`:`0, calc(${l.delta}px + var(--y))`;z.style.transform=`translate3d(${U},0)`,z.style.opacity=`${1-Math.abs(l.delta/l.removalDistance)}`}}function H(){E();let R=s.current;if(l.canDrag&&l.didMove&&R){if(l.canDrag=!1,Math.abs(l.delta)>l.removalDistance){a(!0),e.closeToast(!0),e.collapseAll();return}R.style.transition="transform 0.2s, opacity 0.2s",R.style.removeProperty("transform"),R.style.removeProperty("opacity")}}let W={onPointerDown:N,onPointerUp:w};return o&&c&&(W.onMouseEnter=S,e.stacked||(W.onMouseLeave=k)),p&&(W.onClick=R=>{f&&f(R),l.canCloseOnClick&&d(!0)}),{playToast:k,pauseToast:S,isRunning:t,preventExitTransition:n,toastRef:s,eventHandlers:W}}var WY=typeof window<"u"?T.useLayoutEffect:T.useEffect,Lw=({theme:e,type:t,isLoading:r,...n})=>ua.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:e==="colored"?"currentColor":`var(--toastify-icon-color-${t})`,...n});function KY(e){return ua.createElement(Lw,{...e},ua.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))}function GY(e){return ua.createElement(Lw,{...e},ua.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))}function XY(e){return ua.createElement(Lw,{...e},ua.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))}function YY(e){return ua.createElement(Lw,{...e},ua.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))}function ZY(){return ua.createElement("div",{className:"Toastify__spinner"})}var l_={info:GY,warning:KY,success:XY,error:YY,spinner:ZY},QY=e=>e in l_;function JY({theme:e,type:t,isLoading:r,icon:n}){let a=null,s={theme:e,type:t};return n===!1||($0(n)?a=n({...s,isLoading:r}):T.isValidElement(n)?a=T.cloneElement(n,s):r?a=l_.spinner():QY(t)&&(a=l_[t](s))),a}var eZ=e=>{let{isRunning:t,preventExitTransition:r,toastRef:n,eventHandlers:a,playToast:s}=VY(e),{closeButton:l,children:o,autoClose:c,onClick:d,type:f,hideProgressBar:p,closeToast:y,transition:g,position:N,className:w,style:k,progressClassName:S,updateId:O,role:E,progress:D,rtl:H,toastId:W,deleteToast:R,isIn:z,isLoading:U,closeOnClick:Z,theme:q,ariaLabel:K}=e,Q=Zn("Toastify__toast",`Toastify__toast-theme--${q}`,`Toastify__toast--${f}`,{"Toastify__toast--rtl":H},{"Toastify__toast--close-on-click":Z}),re=$0(w)?w({rtl:H,position:N,type:f,defaultClassName:Q}):Zn(Q,w),ae=JY(e),de=!!D||!c,he={closeToast:y,type:f,theme:q},Se=null;return l===!1||($0(l)?Se=l(he):T.isValidElement(l)?Se=T.cloneElement(l,he):Se=EY(he)),ua.createElement(g,{isIn:z,done:R,position:N,preventExitTransition:r,nodeRef:n,playToast:s},ua.createElement("div",{id:W,tabIndex:0,onClick:d,"data-in":z,className:re,...a,style:k,ref:n,...z&&{role:E,"aria-label":K}},ae!=null&&ua.createElement("div",{className:Zn("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!U})},ae),lR(o,e,!t),Se,!e.customProgressBar&&ua.createElement(TY,{...O&&!de?{key:`p-${O}`}:{},rtl:H,theme:q,delay:c,isRunning:t,isIn:z,closeToast:y,hide:p,type:f,className:S,controlledProgress:de,progress:D||0})))},tZ=(e,t=!1)=>({enter:`Toastify--animate Toastify__${e}-enter`,exit:`Toastify--animate Toastify__${e}-exit`,appendPosition:t}),rZ=AY(tZ("bounce",!0)),nZ={position:"top-right",transition:rZ,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light","aria-label":"Notifications Alt+T",hotKeys:e=>e.altKey&&e.code==="KeyT"};function aZ(e){let t={...nZ,...e},r=e.stacked,[n,a]=T.useState(!0),s=T.useRef(null),{getToastToRender:l,isToastActive:o,count:c}=$Y(t),{className:d,style:f,rtl:p,containerId:y,hotKeys:g}=t;function N(k){let S=Zn("Toastify__toast-container",`Toastify__toast-container--${k}`,{"Toastify__toast-container--rtl":p});return $0(d)?d({position:k,rtl:p,defaultClassName:S}):Zn(S,a_(d))}function w(){r&&(a(!0),Da.play())}return WY(()=>{var k;if(r){let S=s.current.querySelectorAll('[data-in="true"]'),O=12,E=(k=t.position)==null?void 0:k.includes("top"),D=0,H=0;Array.from(S).reverse().forEach((W,R)=>{let z=W;z.classList.add("Toastify__toast--stacked"),R>0&&(z.dataset.collapsed=`${n}`),z.dataset.pos||(z.dataset.pos=E?"top":"bot");let U=D*(n?.2:1)+(n?0:O*R);z.style.setProperty("--y",`${E?U:U*-1}px`),z.style.setProperty("--g",`${O}`),z.style.setProperty("--s",`${1-(n?H:0)}`),D+=z.offsetHeight,H+=.025})}},[n,c,r]),T.useEffect(()=>{function k(S){var O;let E=s.current;g(S)&&((O=E.querySelector('[tabIndex="0"]'))==null||O.focus(),a(!1),Da.pause()),S.key==="Escape"&&(document.activeElement===E||E!=null&&E.contains(document.activeElement))&&(a(!0),Da.play())}return document.addEventListener("keydown",k),()=>{document.removeEventListener("keydown",k)}},[g]),ua.createElement("section",{ref:s,className:"Toastify",id:y,onMouseEnter:()=>{r&&(a(!1),Da.pause())},onMouseLeave:w,"aria-live":"polite","aria-atomic":"false","aria-relevant":"additions text","aria-label":t["aria-label"]},l((k,S)=>{let O=S.length?{...f}:{...f,pointerEvents:"none"};return ua.createElement("div",{tabIndex:-1,className:N(k),"data-stacked":r,style:O,key:`c-${k}`},S.map(({content:E,props:D})=>ua.createElement(eZ,{...D,stacked:r,collapseAll:w,isIn:o(D.toastId,D.containerId),key:`t-${D.key}`},E)))}))}const tg={position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0},Ye={success:(e,t)=>{Da.success(e,{...tg,...t})},error:(e,t)=>{Da.error(e,{...tg,...t})},warning:(e,t)=>{Da.warning(e,{...tg,...t})},info:(e,t)=>{Da.info(e,{...tg,...t})},promise:(e,t,r)=>Da.promise(e,{pending:t.pending,success:t.success,error:t.error},{...tg,...r})};class sZ extends ua.Component{constructor(){super(...arguments);Aa(this,"state",{hasError:!1});Aa(this,"handleReload",()=>{this.setState({hasError:!1,error:void 0}),window.location.reload()})}static getDerivedStateFromError(r){return{hasError:!0,error:r}}componentDidCatch(r,n){console.error("Unhandled UI error:",r,n),Ye.error(" xy ra li khng mong mun. Vui lng th li.")}render(){return this.state.hasError?this.props.fallback||i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-50 dark:bg-slate-900",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-xl text-center max-w-md",children:[i.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-white mb-2",children:"C li xy ra"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400 mb-4",children:"Vui lng ti li trang hoc quay li sau."}),i.jsx("button",{onClick:this.handleReload,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg",children:"Ti li trang"})]})}):this.props.children}}const iZ=()=>{const e=wY(),t=kY(),r=e+t>0,[n,a]=T.useState(!1);return T.useEffect(()=>{if(r)a(!0);else{const s=setTimeout(()=>a(!1),300);return()=>clearTimeout(s)}},[r]),i.jsxs("div",{"aria-hidden":!n,className:"fixed top-0 left-0 right-0 z-[60] pointer-events-none",style:{opacity:n?1:0,transition:"opacity 0.2s ease"},children:[i.jsx("div",{className:"h-1 bg-gradient-to-r from-emerald-500 via-blue-500 to-fuchsia-500 animate-[progress_1.2s_linear_infinite]"}),i.jsx("style",{children:`
        @keyframes progress {
          0% { transform: translateX(-100%); }
          100% { transform: translateX(100%); }
        }
        .animate-[progress_1.2s_linear_infinite] {
          background-size: 200% 100%;
        }
      `})]})},lZ="modulepreload",oZ=function(e){return"/"+e},vT={},c1=function(t,r,n){let a=Promise.resolve();if(r&&r.length>0){let l=function(d){return Promise.all(d.map(f=>Promise.resolve(f).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),c=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));a=l(r.map(d=>{if(d=oZ(d),d in vT)return;vT[d]=!0;const f=d.endsWith(".css"),p=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${p}`))return;const y=document.createElement("link");if(y.rel=f?"stylesheet":lZ,f||(y.as="script"),y.crossOrigin="",y.href=d,c&&y.setAttribute("nonce",c),document.head.appendChild(y),f)return new Promise((g,N)=>{y.addEventListener("load",g),y.addEventListener("error",()=>N(new Error(`Unable to preload CSS for ${d}`)))})}))}function s(l){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=l,window.dispatchEvent(o),!o.defaultPrevented)throw l}return a.then(l=>{for(const o of l||[])o.status==="rejected"&&s(o.reason);return t().catch(s)})};var cZ=function(){return null},o_=function(e,t){return o_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])},o_(e,t)};function fR(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");o_(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var fy=function(){return fy=Object.assign||function(t){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},fy.apply(this,arguments)};function J1(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r}function mR(e,t,r,n){var a=arguments.length,s=a<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(e,t,r,n);else for(var o=e.length-1;o>=0;o--)(l=e[o])&&(s=(a<3?l(s):a>3?l(t,r,s):l(t,r))||s);return a>3&&s&&Object.defineProperty(t,r,s),s}function xR(e,t){return function(r,n){t(r,n,e)}}function pR(e,t,r,n,a,s){function l(S){if(S!==void 0&&typeof S!="function")throw new TypeError("Function expected");return S}for(var o=n.kind,c=o==="getter"?"get":o==="setter"?"set":"value",d=!t&&e?n.static?e:e.prototype:null,f=t||(d?Object.getOwnPropertyDescriptor(d,n.name):{}),p,y=!1,g=r.length-1;g>=0;g--){var N={};for(var w in n)N[w]=w==="access"?{}:n[w];for(var w in n.access)N.access[w]=n.access[w];N.addInitializer=function(S){if(y)throw new TypeError("Cannot add initializers after decoration has completed");s.push(l(S||null))};var k=(0,r[g])(o==="accessor"?{get:f.get,set:f.set}:f[c],N);if(o==="accessor"){if(k===void 0)continue;if(k===null||typeof k!="object")throw new TypeError("Object expected");(p=l(k.get))&&(f.get=p),(p=l(k.set))&&(f.set=p),(p=l(k.init))&&a.unshift(p)}else(p=l(k))&&(o==="field"?a.unshift(p):f[c]=p)}d&&Object.defineProperty(d,n.name,f),y=!0}function gR(e,t,r){for(var n=arguments.length>2,a=0;a<t.length;a++)r=n?t[a].call(e,r):t[a].call(e);return n?r:void 0}function bR(e){return typeof e=="symbol"?e:"".concat(e)}function vR(e,t,r){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:r?"".concat(r," ",t):t})}function yR(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function sn(e,t,r,n){function a(s){return s instanceof r?s:new r(function(l){l(s)})}return new(r||(r=Promise))(function(s,l){function o(f){try{d(n.next(f))}catch(p){l(p)}}function c(f){try{d(n.throw(f))}catch(p){l(p)}}function d(f){f.done?s(f.value):a(f.value).then(o,c)}d((n=n.apply(e,t||[])).next())})}function wR(e,t){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,a,s,l=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return l.next=o(0),l.throw=o(1),l.return=o(2),typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function o(d){return function(f){return c([d,f])}}function c(d){if(n)throw new TypeError("Generator is already executing.");for(;l&&(l=0,d[0]&&(r=0)),r;)try{if(n=1,a&&(s=d[0]&2?a.return:d[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,d[1])).done)return s;switch(a=0,s&&(d=[d[0]&2,s.value]),d[0]){case 0:case 1:s=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,a=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!s||d[1]>s[0]&&d[1]<s[3])){r.label=d[1];break}if(d[0]===6&&r.label<s[1]){r.label=s[1],s=d;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(d);break}s[2]&&r.ops.pop(),r.trys.pop();continue}d=t.call(e,r)}catch(f){d=[6,f],a=0}finally{n=s=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}var Rw=Object.create?(function(e,t,r,n){n===void 0&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}):(function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]});function kR(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&Rw(t,e,r)}function my(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function x6(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),a,s=[],l;try{for(;(t===void 0||t-- >0)&&!(a=n.next()).done;)s.push(a.value)}catch(o){l={error:o}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(l)throw l.error}}return s}function NR(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(x6(arguments[t]));return e}function _R(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),a=0,t=0;t<r;t++)for(var s=arguments[t],l=0,o=s.length;l<o;l++,a++)n[a]=s[l];return n}function SR(e,t,r){if(r||arguments.length===2)for(var n=0,a=t.length,s;n<a;n++)(s||!(n in t))&&(s||(s=Array.prototype.slice.call(t,0,n)),s[n]=t[n]);return e.concat(s||Array.prototype.slice.call(t))}function L1(e){return this instanceof L1?(this.v=e,this):new L1(e)}function jR(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),a,s=[];return a=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),o("next"),o("throw"),o("return",l),a[Symbol.asyncIterator]=function(){return this},a;function l(g){return function(N){return Promise.resolve(N).then(g,p)}}function o(g,N){n[g]&&(a[g]=function(w){return new Promise(function(k,S){s.push([g,w,k,S])>1||c(g,w)})},N&&(a[g]=N(a[g])))}function c(g,N){try{d(n[g](N))}catch(w){y(s[0][3],w)}}function d(g){g.value instanceof L1?Promise.resolve(g.value.v).then(f,p):y(s[0][2],g)}function f(g){c("next",g)}function p(g){c("throw",g)}function y(g,N){g(N),s.shift(),s.length&&c(s[0][0],s[0][1])}}function CR(e){var t,r;return t={},n("next"),n("throw",function(a){throw a}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(a,s){t[a]=e[a]?function(l){return(r=!r)?{value:L1(e[a](l)),done:!1}:s?s(l):l}:s}}function AR(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof my=="function"?my(e):e[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(s){r[s]=e[s]&&function(l){return new Promise(function(o,c){l=e[s](l),a(o,c,l.done,l.value)})}}function a(s,l,o,c){Promise.resolve(c).then(function(d){s({value:d,done:o})},l)}}function ER(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var dZ=Object.create?(function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}):function(e,t){e.default=t},c_=function(e){return c_=Object.getOwnPropertyNames||function(t){var r=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[r.length]=n);return r},c_(e)};function TR(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r=c_(e),n=0;n<r.length;n++)r[n]!=="default"&&Rw(t,e,r[n]);return dZ(t,e),t}function OR(e){return e&&e.__esModule?e:{default:e}}function PR(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)}function IR(e,t,r,n,a){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!a)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?a.call(e,r):a?a.value=r:t.set(e,r),r}function DR(e,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e=="function"?t===e:e.has(t)}function MR(e,t,r){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var n,a;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=t[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=t[Symbol.dispose],r&&(a=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");a&&(n=function(){try{a.call(this)}catch(s){return Promise.reject(s)}}),e.stack.push({value:t,dispose:n,async:r})}else r&&e.stack.push({async:!0});return t}var uZ=typeof SuppressedError=="function"?SuppressedError:function(e,t,r){var n=new Error(r);return n.name="SuppressedError",n.error=e,n.suppressed=t,n};function LR(e){function t(s){e.error=e.hasError?new uZ(s,e.error,"An error was suppressed during disposal."):s,e.hasError=!0}var r,n=0;function a(){for(;r=e.stack.pop();)try{if(!r.async&&n===1)return n=0,e.stack.push(r),Promise.resolve().then(a);if(r.dispose){var s=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(s).then(a,function(l){return t(l),a()})}else n|=1}catch(l){t(l)}if(n===1)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}return a()}function RR(e,t){return typeof e=="string"&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(r,n,a,s,l){return n?t?".jsx":".js":a&&(!s||!l)?r:a+s+"."+l.toLowerCase()+"js"}):e}const hZ={__extends:fR,__assign:fy,__rest:J1,__decorate:mR,__param:xR,__esDecorate:pR,__runInitializers:gR,__propKey:bR,__setFunctionName:vR,__metadata:yR,__awaiter:sn,__generator:wR,__createBinding:Rw,__exportStar:kR,__values:my,__read:x6,__spread:NR,__spreadArrays:_R,__spreadArray:SR,__await:L1,__asyncGenerator:jR,__asyncDelegator:CR,__asyncValues:AR,__makeTemplateObject:ER,__importStar:TR,__importDefault:OR,__classPrivateFieldGet:PR,__classPrivateFieldSet:IR,__classPrivateFieldIn:DR,__addDisposableResource:MR,__disposeResources:LR,__rewriteRelativeImportExtension:RR},fZ=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:MR,get __assign(){return fy},__asyncDelegator:CR,__asyncGenerator:jR,__asyncValues:AR,__await:L1,__awaiter:sn,__classPrivateFieldGet:PR,__classPrivateFieldIn:DR,__classPrivateFieldSet:IR,__createBinding:Rw,__decorate:mR,__disposeResources:LR,__esDecorate:pR,__exportStar:kR,__extends:fR,__generator:wR,__importDefault:OR,__importStar:TR,__makeTemplateObject:ER,__metadata:yR,__param:xR,__propKey:bR,__read:x6,__rest:J1,__rewriteRelativeImportExtension:RR,__runInitializers:gR,__setFunctionName:vR,__spread:NR,__spreadArray:SR,__spreadArrays:_R,__values:my,default:hZ},Symbol.toStringTag,{value:"Module"})),mZ=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);class p6 extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class yT extends p6{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class wT extends p6{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class kT extends p6{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var d_;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(d_||(d_={}));class xZ{constructor(t,{headers:r={},customFetch:n,region:a=d_.Any}={}){this.url=t,this.headers=r,this.region=a,this.fetch=mZ(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return sn(this,arguments,void 0,function*(r,n={}){var a;try{const{headers:s,method:l,body:o,signal:c}=n;let d={},{region:f}=n;f||(f=this.region);const p=new URL(`${this.url}/${r}`);f&&f!=="any"&&(d["x-region"]=f,p.searchParams.set("forceFunctionRegion",f));let y;o&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)?typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(d["Content-Type"]="application/octet-stream",y=o):typeof o=="string"?(d["Content-Type"]="text/plain",y=o):typeof FormData<"u"&&o instanceof FormData?y=o:(d["Content-Type"]="application/json",y=JSON.stringify(o)):y=o;const g=yield this.fetch(p.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},d),this.headers),s),body:y,signal:c}).catch(S=>{throw S.name==="AbortError"?S:new yT(S)}),N=g.headers.get("x-relay-error");if(N&&N==="true")throw new wT(g);if(!g.ok)throw new kT(g);let w=((a=g.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),k;return w==="application/json"?k=yield g.json():w==="application/octet-stream"||w==="application/pdf"?k=yield g.blob():w==="text/event-stream"?k=g:w==="multipart/form-data"?k=yield g.formData():k=yield g.text(),{data:k,error:null,response:g}}catch(s){return s instanceof Error&&s.name==="AbortError"?{data:null,error:new yT(s)}:{data:null,error:s,response:s instanceof kT||s instanceof wT?s.context:void 0}}})}}var $l={};const ep=lG(fZ);var s2={},i2={},l2={},o2={},c2={},d2={},NT;function FR(){if(NT)return d2;NT=1,Object.defineProperty(d2,"__esModule",{value:!0});class e extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return d2.default=e,d2}var _T;function BR(){if(_T)return c2;_T=1,Object.defineProperty(c2,"__esModule",{value:!0});const t=ep.__importDefault(FR());class r{constructor(a){var s,l;this.shouldThrowOnError=!1,this.method=a.method,this.url=a.url,this.headers=new Headers(a.headers),this.schema=a.schema,this.body=a.body,this.shouldThrowOnError=(s=a.shouldThrowOnError)!==null&&s!==void 0?s:!1,this.signal=a.signal,this.isMaybeSingle=(l=a.isMaybeSingle)!==null&&l!==void 0?l:!1,a.fetch?this.fetch=a.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(a,s){return this.headers=new Headers(this.headers),this.headers.set(a,s),this}then(a,s){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const l=this.fetch;let o=l(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async c=>{var d,f,p,y;let g=null,N=null,w=null,k=c.status,S=c.statusText;if(c.ok){if(this.method!=="HEAD"){const H=await c.text();H===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((d=this.headers.get("Accept"))===null||d===void 0)&&d.includes("application/vnd.pgrst.plan+text"))?N=H:N=JSON.parse(H))}const E=(f=this.headers.get("Prefer"))===null||f===void 0?void 0:f.match(/count=(exact|planned|estimated)/),D=(p=c.headers.get("content-range"))===null||p===void 0?void 0:p.split("/");E&&D&&D.length>1&&(w=parseInt(D[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(N)&&(N.length>1?(g={code:"PGRST116",details:`Results contain ${N.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},N=null,w=null,k=406,S="Not Acceptable"):N.length===1?N=N[0]:N=null)}else{const E=await c.text();try{g=JSON.parse(E),Array.isArray(g)&&c.status===404&&(N=[],g=null,k=200,S="OK")}catch{c.status===404&&E===""?(k=204,S="No Content"):g={message:E}}if(g&&this.isMaybeSingle&&(!((y=g==null?void 0:g.details)===null||y===void 0)&&y.includes("0 rows"))&&(g=null,k=200,S="OK"),g&&this.shouldThrowOnError)throw new t.default(g)}return{error:g,data:N,count:w,status:k,statusText:S}});return this.shouldThrowOnError||(o=o.catch(c=>{var d,f,p;return{error:{message:`${(d=c==null?void 0:c.name)!==null&&d!==void 0?d:"FetchError"}: ${c==null?void 0:c.message}`,details:`${(f=c==null?void 0:c.stack)!==null&&f!==void 0?f:""}`,hint:"",code:`${(p=c==null?void 0:c.code)!==null&&p!==void 0?p:""}`},data:null,count:null,status:0,statusText:""}})),o.then(a,s)}returns(){return this}overrideTypes(){return this}}return c2.default=r,c2}var ST;function UR(){if(ST)return o2;ST=1,Object.defineProperty(o2,"__esModule",{value:!0});const t=ep.__importDefault(BR());class r extends t.default{select(a){let s=!1;const l=(a??"*").split("").map(o=>/\s/.test(o)&&!s?"":(o==='"'&&(s=!s),o)).join("");return this.url.searchParams.set("select",l),this.headers.append("Prefer","return=representation"),this}order(a,{ascending:s=!0,nullsFirst:l,foreignTable:o,referencedTable:c=o}={}){const d=c?`${c}.order`:"order",f=this.url.searchParams.get(d);return this.url.searchParams.set(d,`${f?`${f},`:""}${a}.${s?"asc":"desc"}${l===void 0?"":l?".nullsfirst":".nullslast"}`),this}limit(a,{foreignTable:s,referencedTable:l=s}={}){const o=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(o,`${a}`),this}range(a,s,{foreignTable:l,referencedTable:o=l}={}){const c=typeof o>"u"?"offset":`${o}.offset`,d=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(c,`${a}`),this.url.searchParams.set(d,`${s-a+1}`),this}abortSignal(a){return this.signal=a,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:a=!1,verbose:s=!1,settings:l=!1,buffers:o=!1,wal:c=!1,format:d="text"}={}){var f;const p=[a?"analyze":null,s?"verbose":null,l?"settings":null,o?"buffers":null,c?"wal":null].filter(Boolean).join("|"),y=(f=this.headers.get("Accept"))!==null&&f!==void 0?f:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${d}; for="${y}"; options=${p};`),d==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(a){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${a}`),this}}return o2.default=r,o2}var jT;function g6(){if(jT)return l2;jT=1,Object.defineProperty(l2,"__esModule",{value:!0});const t=ep.__importDefault(UR()),r=new RegExp("[,()]");class n extends t.default{eq(s,l){return this.url.searchParams.append(s,`eq.${l}`),this}neq(s,l){return this.url.searchParams.append(s,`neq.${l}`),this}gt(s,l){return this.url.searchParams.append(s,`gt.${l}`),this}gte(s,l){return this.url.searchParams.append(s,`gte.${l}`),this}lt(s,l){return this.url.searchParams.append(s,`lt.${l}`),this}lte(s,l){return this.url.searchParams.append(s,`lte.${l}`),this}like(s,l){return this.url.searchParams.append(s,`like.${l}`),this}likeAllOf(s,l){return this.url.searchParams.append(s,`like(all).{${l.join(",")}}`),this}likeAnyOf(s,l){return this.url.searchParams.append(s,`like(any).{${l.join(",")}}`),this}ilike(s,l){return this.url.searchParams.append(s,`ilike.${l}`),this}ilikeAllOf(s,l){return this.url.searchParams.append(s,`ilike(all).{${l.join(",")}}`),this}ilikeAnyOf(s,l){return this.url.searchParams.append(s,`ilike(any).{${l.join(",")}}`),this}is(s,l){return this.url.searchParams.append(s,`is.${l}`),this}in(s,l){const o=Array.from(new Set(l)).map(c=>typeof c=="string"&&r.test(c)?`"${c}"`:`${c}`).join(",");return this.url.searchParams.append(s,`in.(${o})`),this}contains(s,l){return typeof l=="string"?this.url.searchParams.append(s,`cs.${l}`):Array.isArray(l)?this.url.searchParams.append(s,`cs.{${l.join(",")}}`):this.url.searchParams.append(s,`cs.${JSON.stringify(l)}`),this}containedBy(s,l){return typeof l=="string"?this.url.searchParams.append(s,`cd.${l}`):Array.isArray(l)?this.url.searchParams.append(s,`cd.{${l.join(",")}}`):this.url.searchParams.append(s,`cd.${JSON.stringify(l)}`),this}rangeGt(s,l){return this.url.searchParams.append(s,`sr.${l}`),this}rangeGte(s,l){return this.url.searchParams.append(s,`nxl.${l}`),this}rangeLt(s,l){return this.url.searchParams.append(s,`sl.${l}`),this}rangeLte(s,l){return this.url.searchParams.append(s,`nxr.${l}`),this}rangeAdjacent(s,l){return this.url.searchParams.append(s,`adj.${l}`),this}overlaps(s,l){return typeof l=="string"?this.url.searchParams.append(s,`ov.${l}`):this.url.searchParams.append(s,`ov.{${l.join(",")}}`),this}textSearch(s,l,{config:o,type:c}={}){let d="";c==="plain"?d="pl":c==="phrase"?d="ph":c==="websearch"&&(d="w");const f=o===void 0?"":`(${o})`;return this.url.searchParams.append(s,`${d}fts${f}.${l}`),this}match(s){return Object.entries(s).forEach(([l,o])=>{this.url.searchParams.append(l,`eq.${o}`)}),this}not(s,l,o){return this.url.searchParams.append(s,`not.${l}.${o}`),this}or(s,{foreignTable:l,referencedTable:o=l}={}){const c=o?`${o}.or`:"or";return this.url.searchParams.append(c,`(${s})`),this}filter(s,l,o){return this.url.searchParams.append(s,`${l}.${o}`),this}}return l2.default=n,l2}var CT;function zR(){if(CT)return i2;CT=1,Object.defineProperty(i2,"__esModule",{value:!0});const t=ep.__importDefault(g6());class r{constructor(a,{headers:s={},schema:l,fetch:o}){this.url=a,this.headers=new Headers(s),this.schema=l,this.fetch=o}select(a,s){const{head:l=!1,count:o}=s??{},c=l?"HEAD":"GET";let d=!1;const f=(a??"*").split("").map(p=>/\s/.test(p)&&!d?"":(p==='"'&&(d=!d),p)).join("");return this.url.searchParams.set("select",f),o&&this.headers.append("Prefer",`count=${o}`),new t.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(a,{count:s,defaultToNull:l=!0}={}){var o;const c="POST";if(s&&this.headers.append("Prefer",`count=${s}`),l||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const d=a.reduce((f,p)=>f.concat(Object.keys(p)),[]);if(d.length>0){const f=[...new Set(d)].map(p=>`"${p}"`);this.url.searchParams.set("columns",f.join(","))}}return new t.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}upsert(a,{onConflict:s,ignoreDuplicates:l=!1,count:o,defaultToNull:c=!0}={}){var d;const f="POST";if(this.headers.append("Prefer",`resolution=${l?"ignore":"merge"}-duplicates`),s!==void 0&&this.url.searchParams.set("on_conflict",s),o&&this.headers.append("Prefer",`count=${o}`),c||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const p=a.reduce((y,g)=>y.concat(Object.keys(g)),[]);if(p.length>0){const y=[...new Set(p)].map(g=>`"${g}"`);this.url.searchParams.set("columns",y.join(","))}}return new t.default({method:f,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}update(a,{count:s}={}){var l;const o="PATCH";return s&&this.headers.append("Prefer",`count=${s}`),new t.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}delete({count:a}={}){var s;const l="DELETE";return a&&this.headers.append("Prefer",`count=${a}`),new t.default({method:l,url:this.url,headers:this.headers,schema:this.schema,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}}return i2.default=r,i2}var AT;function pZ(){if(AT)return s2;AT=1,Object.defineProperty(s2,"__esModule",{value:!0});const e=ep,t=e.__importDefault(zR()),r=e.__importDefault(g6());class n{constructor(s,{headers:l={},schema:o,fetch:c}={}){this.url=s,this.headers=new Headers(l),this.schemaName=o,this.fetch=c}from(s){const l=new URL(`${this.url}/${s}`);return new t.default(l,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(s){return new n(this.url,{headers:this.headers,schema:s,fetch:this.fetch})}rpc(s,l={},{head:o=!1,get:c=!1,count:d}={}){var f;let p;const y=new URL(`${this.url}/rpc/${s}`);let g;o||c?(p=o?"HEAD":"GET",Object.entries(l).filter(([w,k])=>k!==void 0).map(([w,k])=>[w,Array.isArray(k)?`{${k.join(",")}}`:`${k}`]).forEach(([w,k])=>{y.searchParams.append(w,k)})):(p="POST",g=l);const N=new Headers(this.headers);return d&&N.set("Prefer",`count=${d}`),new r.default({method:p,url:y,headers:N,schema:this.schemaName,body:g,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}}return s2.default=n,s2}var ET;function gZ(){if(ET)return $l;ET=1,Object.defineProperty($l,"__esModule",{value:!0}),$l.PostgrestError=$l.PostgrestBuilder=$l.PostgrestTransformBuilder=$l.PostgrestFilterBuilder=$l.PostgrestQueryBuilder=$l.PostgrestClient=void 0;const e=ep,t=e.__importDefault(pZ());$l.PostgrestClient=t.default;const r=e.__importDefault(zR());$l.PostgrestQueryBuilder=r.default;const n=e.__importDefault(g6());$l.PostgrestFilterBuilder=n.default;const a=e.__importDefault(UR());$l.PostgrestTransformBuilder=a.default;const s=e.__importDefault(BR());$l.PostgrestBuilder=s.default;const l=e.__importDefault(FR());return $l.PostgrestError=l.default,$l.default={PostgrestClient:t.default,PostgrestQueryBuilder:r.default,PostgrestFilterBuilder:n.default,PostgrestTransformBuilder:a.default,PostgrestBuilder:s.default,PostgrestError:l.default},$l}var qR=gZ();const HR=gd(qR),bZ=r6({__proto__:null,default:HR},[qR]),{PostgrestClient:vZ,PostgrestQueryBuilder:STe,PostgrestFilterBuilder:jTe,PostgrestTransformBuilder:CTe,PostgrestBuilder:ATe,PostgrestError:ETe}=HR||bZ;class yZ{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const n=r.node,a=parseInt(n.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const n=this.getWebSocketConstructor();return new n(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const wZ="2.80.0",kZ=`realtime-js/${wZ}`,NZ="1.0.0",u_=1e4,_Z=1e3,SZ=100;var kg;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(kg||(kg={}));var Vi;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Vi||(Vi={}));var $d;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})($d||($d={}));var h_;(function(e){e.websocket="websocket"})(h_||(h_={}));var Vf;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Vf||(Vf={}));class jZ{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),n=new TextDecoder;return this._decodeBroadcast(t,r,n)}_decodeBroadcast(t,r,n){const a=r.getUint8(1),s=r.getUint8(2);let l=this.HEADER_LENGTH+2;const o=n.decode(t.slice(l,l+a));l=l+a;const c=n.decode(t.slice(l,l+s));l=l+s;const d=JSON.parse(n.decode(t.slice(l,t.byteLength)));return{ref:null,topic:o,event:c,payload:d}}}class $R{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var bs;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(bs||(bs={}));const TT=(e,t,r={})=>{var n;const a=(n=r.skipTypes)!==null&&n!==void 0?n:[];return t?Object.keys(t).reduce((s,l)=>(s[l]=CZ(l,e,t,a),s),{}):{}},CZ=(e,t,r,n)=>{const a=t.find(o=>o.name===e),s=a==null?void 0:a.type,l=r[e];return s&&!n.includes(s)?VR(s,l):f_(l)},VR=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return OZ(t,r)}switch(e){case bs.bool:return AZ(t);case bs.float4:case bs.float8:case bs.int2:case bs.int4:case bs.int8:case bs.numeric:case bs.oid:return EZ(t);case bs.json:case bs.jsonb:return TZ(t);case bs.timestamp:return PZ(t);case bs.abstime:case bs.date:case bs.daterange:case bs.int4range:case bs.int8range:case bs.money:case bs.reltime:case bs.text:case bs.time:case bs.timestamptz:case bs.timetz:case bs.tsrange:case bs.tstzrange:return f_(t);default:return f_(t)}},f_=e=>e,AZ=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},EZ=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},TZ=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},OZ=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let s;const l=e.slice(1,r);try{s=JSON.parse("["+l+"]")}catch{s=l?l.split(","):[]}return s.map(o=>VR(t,o))}return e},PZ=e=>typeof e=="string"?e.replace(" ","T"):e,WR=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class f4{constructor(t,r,n={},a=u_){this.channel=t,this.event=r,this.payload=n,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var OT;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(OT||(OT={}));class Ng{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},a=>{const{onJoin:s,onLeave:l,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ng.syncState(this.state,a,s,l),this.pendingDiffs.forEach(c=>{this.state=Ng.syncDiff(this.state,c,s,l)}),this.pendingDiffs=[],o()}),this.channel._on(n.diff,{},a=>{const{onJoin:s,onLeave:l,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=Ng.syncDiff(this.state,a,s,l),o())}),this.onJoin((a,s,l)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:s,newPresences:l})}),this.onLeave((a,s,l)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:s,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,a){const s=this.cloneDeep(t),l=this.transformState(r),o={},c={};return this.map(s,(d,f)=>{l[d]||(c[d]=f)}),this.map(l,(d,f)=>{const p=s[d];if(p){const y=f.map(k=>k.presence_ref),g=p.map(k=>k.presence_ref),N=f.filter(k=>g.indexOf(k.presence_ref)<0),w=p.filter(k=>y.indexOf(k.presence_ref)<0);N.length>0&&(o[d]=N),w.length>0&&(c[d]=w)}else o[d]=f}),this.syncDiff(s,{joins:o,leaves:c},n,a)}static syncDiff(t,r,n,a){const{joins:s,leaves:l}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),a||(a=()=>{}),this.map(s,(o,c)=>{var d;const f=(d=t[o])!==null&&d!==void 0?d:[];if(t[o]=this.cloneDeep(c),f.length>0){const p=t[o].map(g=>g.presence_ref),y=f.filter(g=>p.indexOf(g.presence_ref)<0);t[o].unshift(...y)}n(o,f,c)}),this.map(l,(o,c)=>{let d=t[o];if(!d)return;const f=c.map(p=>p.presence_ref);d=d.filter(p=>f.indexOf(p.presence_ref)<0),t[o]=d,a(o,d,c),d.length===0&&delete t[o]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const a=t[n];return"metas"in a?r[n]=a.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):r[n]=a,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var PT;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(PT||(PT={}));var _g;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(_g||(_g={}));var b0;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(b0||(b0={}));class b6{constructor(t,r={config:{}},n){var a,s;if(this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=Vi.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new f4(this,$d.join,this.params,this.timeout),this.rejoinTimer=new $R(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Vi.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(l=>l.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Vi.closed,this.socket._remove(this)}),this._onError(l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=Vi.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Vi.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=Vi.errored,this.rejoinTimer.scheduleTimeout())}),this._on($d.reply,{},(l,o)=>{this._trigger(this._replyEventName(o),l)}),this.presence=new Ng(this),this.broadcastEndpointURL=WR(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((s=(a=this.params.config)===null||a===void 0?void 0:a.broadcast)===null||s===void 0)&&s.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,r=this.timeout){var n,a,s;if(this.socket.isConnected()||this.socket.connect(),this.state==Vi.closed){const{config:{broadcast:l,presence:o,private:c}}=this.params,d=(a=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(g=>g.filter))!==null&&a!==void 0?a:[],f=!!this.bindings[_g.PRESENCE]&&this.bindings[_g.PRESENCE].length>0||((s=this.params.config.presence)===null||s===void 0?void 0:s.enabled)===!0,p={},y={broadcast:l,presence:Object.assign(Object.assign({},o),{enabled:f}),postgres_changes:d,private:c};this.socket.accessTokenValue&&(p.access_token=this.socket.accessTokenValue),this._onError(g=>t==null?void 0:t(b0.CHANNEL_ERROR,g)),this._onClose(()=>t==null?void 0:t(b0.CLOSED)),this.updateJoinPayload(Object.assign({config:y},p)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:g})=>{var N;if(this.socket.setAuth(),g===void 0){t==null||t(b0.SUBSCRIBED);return}else{const w=this.bindings.postgres_changes,k=(N=w==null?void 0:w.length)!==null&&N!==void 0?N:0,S=[];for(let O=0;O<k;O++){const E=w[O],{filter:{event:D,schema:H,table:W,filter:R}}=E,z=g&&g[O];if(z&&z.event===D&&z.schema===H&&z.table===W&&z.filter===R)S.push(Object.assign(Object.assign({},E),{id:z.id}));else{this.unsubscribe(),this.state=Vi.errored,t==null||t(b0.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=S,t&&t(b0.SUBSCRIBED);return}}).receive("error",g=>{this.state=Vi.errored,t==null||t(b0.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(g).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(b0.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this.state===Vi.joined&&t===_g.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,r,n)}async httpSend(t,r,n={}){var a;const s=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(r==null)return Promise.reject("Payload is required for httpSend()");const l={method:"POST",headers:{Authorization:s,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:r,private:this.private}]})},o=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(a=n.timeout)!==null&&a!==void 0?a:this.timeout);if(o.status===202)return{success:!0};let c=o.statusText;try{const d=await o.json();c=d.error||d.message||c}catch{}return Promise.reject(new Error(c))}async send(t,r={}){var n,a;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:s,payload:l}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:l,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((a=d.body)===null||a===void 0?void 0:a.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var l,o,c;const d=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(o=(l=this.params)===null||l===void 0?void 0:l.config)===null||o===void 0?void 0:o.broadcast)===null||c===void 0)&&c.ack)&&s("ok"),d.receive("ok",()=>s("ok")),d.receive("error",()=>s("error")),d.receive("timeout",()=>s("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Vi.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger($d.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(a=>{n=new f4(this,$d.leave,{},t),n.receive("ok",()=>{r(),a("ok")}).receive("timeout",()=>{r(),a("timed out")}).receive("error",()=>{a("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Vi.closed,this.bindings={}}async _fetchWithTimeout(t,r,n){const a=new AbortController,s=setTimeout(()=>a.abort(),n),l=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:a.signal}));return clearTimeout(s),l}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new f4(this,t,r,n);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>SZ){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var a,s;const l=t.toLocaleLowerCase(),{close:o,error:c,leave:d,join:f}=$d;if(n&&[o,c,d,f].indexOf(l)>=0&&n!==this._joinRef())return;let y=this._onMessage(l,r,n);if(r&&!y)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(g=>{var N,w,k;return((N=g.filter)===null||N===void 0?void 0:N.event)==="*"||((k=(w=g.filter)===null||w===void 0?void 0:w.event)===null||k===void 0?void 0:k.toLocaleLowerCase())===l}).map(g=>g.callback(y,n)):(s=this.bindings[l])===null||s===void 0||s.filter(g=>{var N,w,k,S,O,E;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in g){const D=g.id,H=(N=g.filter)===null||N===void 0?void 0:N.event;return D&&((w=r.ids)===null||w===void 0?void 0:w.includes(D))&&(H==="*"||(H==null?void 0:H.toLocaleLowerCase())===((k=r.data)===null||k===void 0?void 0:k.type.toLocaleLowerCase()))}else{const D=(O=(S=g==null?void 0:g.filter)===null||S===void 0?void 0:S.event)===null||O===void 0?void 0:O.toLocaleLowerCase();return D==="*"||D===((E=r==null?void 0:r.event)===null||E===void 0?void 0:E.toLocaleLowerCase())}else return g.type.toLocaleLowerCase()===l}).map(g=>{if(typeof y=="object"&&"ids"in y){const N=y.data,{schema:w,table:k,commit_timestamp:S,type:O,errors:E}=N;y=Object.assign(Object.assign({},{schema:w,table:k,commit_timestamp:S,eventType:O,new:{},old:{},errors:E}),this._getPayloadRecords(N))}g.callback(y,n)})}_isClosed(){return this.state===Vi.closed}_isJoined(){return this.state===Vi.joined}_isJoining(){return this.state===Vi.joining}_isLeaving(){return this.state===Vi.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const a=t.toLocaleLowerCase(),s={type:a,filter:r,callback:n};return this.bindings[a]?this.bindings[a].push(s):this.bindings[a]=[s],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(a=>{var s;return!(((s=a.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===n&&b6.isEqual(a.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on($d.close,{},t)}_onError(t){this._on($d.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Vi.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=TT(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=TT(t.columns,t.old_record)),r}}const m4=()=>{},u2={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},IZ=[1e3,2e3,5e3,1e4],DZ=1e4,MZ=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class LZ{constructor(t,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=u_,this.transport=null,this.heartbeatIntervalMs=u2.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=m4,this.ref=0,this.reconnectTimer=null,this.logger=m4,this.conn=null,this.sendBuffer=[],this.serializer=new jZ,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>a?(...s)=>a(...s):(...s)=>fetch(...s),!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${h_.websocket}`,this.httpEndpoint=WR(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=yZ.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:NZ}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},t?this.conn.close(t,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case kg.connecting:return Vf.Connecting;case kg.open:return Vf.Open;case kg.closing:return Vf.Closing;default:return Vf.Closed}}isConnected(){return this.connectionState()===Vf.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const n=`realtime:${t}`,a=this.getChannels().find(s=>s.topic===n);if(a)return a;{const s=new b6(`realtime:${t}`,r,this);return this.channels.push(s),s}}push(t){const{topic:r,event:n,payload:a,ref:s}=t,l=()=>{this.encode(t,o=>{var c;(c=this.conn)===null||c===void 0||c.send(o)})};this.log("push",`${r} ${n} (${s})`,a),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(_Z,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},u2.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(d){this.log("error","error in heartbeat callback",d)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:a,payload:s,ref:l}=r,o=l?`(${l})`:"",c=s.status||"";this.log("receive",`${c} ${n} ${a} ${o}`.trim(),s),this.channels.filter(d=>d._isMember(n)).forEach(d=>d._trigger(a,s,l)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger($d.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",a=new URLSearchParams(r);return`${t}${n}${a}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([MZ],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r;t?r=t:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const a={access_token:r,version:kZ};r&&n.updateJoinPayload(a),n.joinedOnce&&n._isJoined()&&n._push($d.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(r)}catch(a){this.log("error",`error in ${t} callback`,a)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new $R(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},u2.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,n,a,s,l,o,c,d,f;if(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(n=t==null?void 0:t.timeout)!==null&&n!==void 0?n:u_,this.heartbeatIntervalMs=(a=t==null?void 0:t.heartbeatIntervalMs)!==null&&a!==void 0?a:u2.HEARTBEAT_INTERVAL,this.worker=(s=t==null?void 0:t.worker)!==null&&s!==void 0?s:!1,this.accessToken=(l=t==null?void 0:t.accessToken)!==null&&l!==void 0?l:null,this.heartbeatCallback=(o=t==null?void 0:t.heartbeatCallback)!==null&&o!==void 0?o:m4,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=t==null?void 0:t.reconnectAfterMs)!==null&&c!==void 0?c:(p=>IZ[p-1]||DZ),this.encode=(d=t==null?void 0:t.encode)!==null&&d!==void 0?d:((p,y)=>y(JSON.stringify(p))),this.decode=(f=t==null?void 0:t.decode)!==null&&f!==void 0?f:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class v6 extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Ws(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class RZ extends v6{constructor(t,r,n){super(t),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class m_ extends v6{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}const y6=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),FZ=()=>Response,x_=e=>{if(Array.isArray(e))return e.map(r=>x_(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const a=r.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));t[a]=x_(n)}),t},BZ=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},x4=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},UZ=(e,t,r)=>sn(void 0,void 0,void 0,function*(){const n=yield FZ();e instanceof n&&!(r!=null&&r.noResolveJson)?e.json().then(a=>{const s=e.status||500,l=(a==null?void 0:a.statusCode)||s+"";t(new RZ(x4(a),s,l))}).catch(a=>{t(new m_(x4(a),a))}):t(new m_(x4(e),e))}),zZ=(e,t,r,n)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!n?a:(BZ(n)?(a.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),a.body=JSON.stringify(n)):a.body=n,t!=null&&t.duplex&&(a.duplex=t.duplex),Object.assign(Object.assign({},a),r))};function Db(e,t,r,n,a,s){return sn(this,void 0,void 0,function*(){return new Promise((l,o)=>{e(r,zZ(t,n,a,s)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>l(c)).catch(c=>UZ(c,o,n))})})}function zg(e,t,r,n){return sn(this,void 0,void 0,function*(){return Db(e,"GET",t,r,n)})}function zd(e,t,r,n,a){return sn(this,void 0,void 0,function*(){return Db(e,"POST",t,n,a,r)})}function p_(e,t,r,n,a){return sn(this,void 0,void 0,function*(){return Db(e,"PUT",t,n,a,r)})}function qZ(e,t,r,n){return sn(this,void 0,void 0,function*(){return Db(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function w6(e,t,r,n,a){return sn(this,void 0,void 0,function*(){return Db(e,"DELETE",t,n,a,r)})}class HZ{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r}then(t,r){return this.execute().then(t,r)}execute(){return sn(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ws(t))return{data:null,error:t};throw t}})}}var KR;class $Z{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r,this[KR]="BlobDownloadBuilder",this.promise=null}asStream(){return new HZ(this.downloadFn,this.shouldThrowOnError)}then(t,r){return this.getPromise().then(t,r)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return sn(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ws(t))return{data:null,error:t};throw t}})}}KR=Symbol.toStringTag;const VZ={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},IT={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class WZ{constructor(t,r={},n,a){this.shouldThrowOnError=!1,this.url=t,this.headers=r,this.bucketId=n,this.fetch=y6(a)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,r,n,a){return sn(this,void 0,void 0,function*(){try{let s;const l=Object.assign(Object.assign({},IT),a);let o=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(l.upsert)});const c=l.metadata;typeof Blob<"u"&&n instanceof Blob?(s=new FormData,s.append("cacheControl",l.cacheControl),c&&s.append("metadata",this.encodeMetadata(c)),s.append("",n)):typeof FormData<"u"&&n instanceof FormData?(s=n,s.has("cacheControl")||s.append("cacheControl",l.cacheControl),c&&!s.has("metadata")&&s.append("metadata",this.encodeMetadata(c))):(s=n,o["cache-control"]=`max-age=${l.cacheControl}`,o["content-type"]=l.contentType,c&&(o["x-metadata"]=this.toBase64(this.encodeMetadata(c))),(typeof ReadableStream<"u"&&s instanceof ReadableStream||s&&typeof s=="object"&&"pipe"in s&&typeof s.pipe=="function")&&!l.duplex&&(l.duplex="half")),a!=null&&a.headers&&(o=Object.assign(Object.assign({},o),a.headers));const d=this._removeEmptyFolders(r),f=this._getFinalPath(d),p=yield(t=="PUT"?p_:zd)(this.fetch,`${this.url}/object/${f}`,s,Object.assign({headers:o},l!=null&&l.duplex?{duplex:l.duplex}:{}));return{data:{path:d,id:p.Id,fullPath:p.Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ws(s))return{data:null,error:s};throw s}})}upload(t,r,n){return sn(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,a){return sn(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(t),l=this._getFinalPath(s),o=new URL(this.url+`/object/upload/sign/${l}`);o.searchParams.set("token",r);try{let c;const d=Object.assign({upsert:IT.upsert},a),f=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",d.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",d.cacheControl)):(c=n,f["cache-control"]=`max-age=${d.cacheControl}`,f["content-type"]=d.contentType);const p=yield p_(this.fetch,o.toString(),c,{headers:f});return{data:{path:s,fullPath:p.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(Ws(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,r){return sn(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const a=Object.assign({},this.headers);r!=null&&r.upsert&&(a["x-upsert"]="true");const s=yield zd(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:a}),l=new URL(this.url+s.url),o=l.searchParams.get("token");if(!o)throw new v6("No token returned by API");return{data:{signedUrl:l.toString(),path:t,token:o},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ws(n))return{data:null,error:n};throw n}})}update(t,r,n){return sn(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return sn(this,void 0,void 0,function*(){try{return{data:yield zd(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Ws(a))return{data:null,error:a};throw a}})}copy(t,r,n){return sn(this,void 0,void 0,function*(){try{return{data:{path:(yield zd(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Ws(a))return{data:null,error:a};throw a}})}createSignedUrl(t,r,n){return sn(this,void 0,void 0,function*(){try{let a=this._getFinalPath(t),s=yield zd(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const l=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${l}`)},{data:s,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Ws(a))return{data:null,error:a};throw a}})}createSignedUrls(t,r,n){return sn(this,void 0,void 0,function*(){try{const a=yield zd(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),s=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:a.map(l=>Object.assign(Object.assign({},l),{signedUrl:l.signedURL?encodeURI(`${this.url}${l.signedURL}${s}`):null})),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Ws(a))return{data:null,error:a};throw a}})}download(t,r){const a=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),l=s?`?${s}`:"",o=this._getFinalPath(t),c=()=>zg(this.fetch,`${this.url}/${a}/${o}${l}`,{headers:this.headers,noResolveJson:!0});return new $Z(c,this.shouldThrowOnError)}info(t){return sn(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield zg(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:x_(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ws(n))return{data:null,error:n};throw n}})}exists(t){return sn(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield qZ(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ws(n)&&n instanceof m_){const a=n.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),a=[],s=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";s!==""&&a.push(s);const o=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});c!==""&&a.push(c);let d=a.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${n}${d}`)}}}remove(t){return sn(this,void 0,void 0,function*(){try{return{data:yield w6(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ws(r))return{data:null,error:r};throw r}})}list(t,r,n){return sn(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},VZ),r),{prefix:t||""});return{data:yield zd(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},n),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Ws(a))return{data:null,error:a};throw a}})}listV2(t,r){return sn(this,void 0,void 0,function*(){try{const n=Object.assign({},t);return{data:yield zd(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ws(n))return{data:null,error:n};throw n}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const GR="2.80.0",XR={"X-Client-Info":`storage-js/${GR}`};class KZ{constructor(t,r={},n,a){this.shouldThrowOnError=!1;const s=new URL(t);a!=null&&a.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase.")),this.url=s.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},XR),r),this.fetch=y6(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(t){return sn(this,void 0,void 0,function*(){try{const r=this.listBucketOptionsToQueryString(t);return{data:yield zg(this.fetch,`${this.url}/bucket${r}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ws(r))return{data:null,error:r};throw r}})}getBucket(t){return sn(this,void 0,void 0,function*(){try{return{data:yield zg(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ws(r))return{data:null,error:r};throw r}})}createBucket(t){return sn(this,arguments,void 0,function*(r,n={public:!1}){try{return{data:yield zd(this.fetch,`${this.url}/bucket`,{id:r,name:r,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Ws(a))return{data:null,error:a};throw a}})}updateBucket(t,r){return sn(this,void 0,void 0,function*(){try{return{data:yield p_(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ws(n))return{data:null,error:n};throw n}})}emptyBucket(t){return sn(this,void 0,void 0,function*(){try{return{data:yield zd(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ws(r))return{data:null,error:r};throw r}})}deleteBucket(t){return sn(this,void 0,void 0,function*(){try{return{data:yield w6(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ws(r))return{data:null,error:r};throw r}})}listBucketOptionsToQueryString(t){const r={};return t&&("limit"in t&&(r.limit=String(t.limit)),"offset"in t&&(r.offset=String(t.offset)),t.search&&(r.search=t.search),t.sortColumn&&(r.sortColumn=t.sortColumn),t.sortOrder&&(r.sortOrder=t.sortOrder)),Object.keys(r).length>0?"?"+new URLSearchParams(r).toString():""}}class GZ{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},XR),r),this.fetch=y6(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return sn(this,void 0,void 0,function*(){try{return{data:yield zd(this.fetch,`${this.url}/bucket`,{name:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ws(r))return{data:null,error:r};throw r}})}listBuckets(t){return sn(this,void 0,void 0,function*(){try{const r=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&r.set("limit",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&r.set("offset",t.offset.toString()),t!=null&&t.sortColumn&&r.set("sortColumn",t.sortColumn),t!=null&&t.sortOrder&&r.set("sortOrder",t.sortOrder),t!=null&&t.search&&r.set("search",t.search);const n=r.toString(),a=n?`${this.url}/bucket?${n}`:`${this.url}/bucket`;return{data:yield zg(this.fetch,a,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ws(r))return{data:null,error:r};throw r}})}deleteBucket(t){return sn(this,void 0,void 0,function*(){try{return{data:yield w6(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ws(r))return{data:null,error:r};throw r}})}}const k6={"X-Client-Info":`storage-js/${GR}`,"Content-Type":"application/json"};class YR extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function kc(e){return typeof e=="object"&&e!==null&&"__isStorageVectorsError"in e}class p4 extends YR{constructor(t,r,n){super(t),this.name="StorageVectorsApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class XZ extends YR{constructor(t,r){super(t),this.name="StorageVectorsUnknownError",this.originalError=r}}var DT;(function(e){e.InternalError="InternalError",e.S3VectorConflictException="S3VectorConflictException",e.S3VectorNotFoundException="S3VectorNotFoundException",e.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",e.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",e.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(DT||(DT={}));const N6=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),YZ=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},MT=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),ZZ=(e,t,r)=>sn(void 0,void 0,void 0,function*(){if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(r!=null&&r.noResolveJson)){const a=e.status||500,s=e;if(typeof s.json=="function")s.json().then(l=>{const o=(l==null?void 0:l.statusCode)||(l==null?void 0:l.code)||a+"";t(new p4(MT(l),a,o))}).catch(()=>{const l=a+"",o=s.statusText||`HTTP ${a} error`;t(new p4(o,a,l))});else{const l=a+"",o=s.statusText||`HTTP ${a} error`;t(new p4(o,a,l))}}else t(new XZ(MT(e),e))}),QZ=(e,t,r,n)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return n?(YZ(n)?(a.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),a.body=JSON.stringify(n)):a.body=n,Object.assign(Object.assign({},a),r)):a};function JZ(e,t,r,n,a,s){return sn(this,void 0,void 0,function*(){return new Promise((l,o)=>{e(r,QZ(t,n,a,s)).then(c=>{if(!c.ok)throw c;if(n!=null&&n.noResolveJson)return c;const d=c.headers.get("content-type");return!d||!d.includes("application/json")?{}:c.json()}).then(c=>l(c)).catch(c=>ZZ(c,o,n))})})}function Nc(e,t,r,n,a){return sn(this,void 0,void 0,function*(){return JZ(e,"POST",t,n,a,r)})}class eQ{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},k6),r),this.fetch=N6(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(t){return sn(this,void 0,void 0,function*(){try{return{data:(yield Nc(this.fetch,`${this.url}/CreateIndex`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(kc(r))return{data:null,error:r};throw r}})}getIndex(t,r){return sn(this,void 0,void 0,function*(){try{return{data:yield Nc(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:t,indexName:r},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(kc(n))return{data:null,error:n};throw n}})}listIndexes(t){return sn(this,void 0,void 0,function*(){try{return{data:yield Nc(this.fetch,`${this.url}/ListIndexes`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(kc(r))return{data:null,error:r};throw r}})}deleteIndex(t,r){return sn(this,void 0,void 0,function*(){try{return{data:(yield Nc(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:t,indexName:r},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(kc(n))return{data:null,error:n};throw n}})}}class tQ{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},k6),r),this.fetch=N6(n)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(t){return sn(this,void 0,void 0,function*(){try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Nc(this.fetch,`${this.url}/PutVectors`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(kc(r))return{data:null,error:r};throw r}})}getVectors(t){return sn(this,void 0,void 0,function*(){try{return{data:yield Nc(this.fetch,`${this.url}/GetVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(kc(r))return{data:null,error:r};throw r}})}listVectors(t){return sn(this,void 0,void 0,function*(){try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:yield Nc(this.fetch,`${this.url}/ListVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(kc(r))return{data:null,error:r};throw r}})}queryVectors(t){return sn(this,void 0,void 0,function*(){try{return{data:yield Nc(this.fetch,`${this.url}/QueryVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(kc(r))return{data:null,error:r};throw r}})}deleteVectors(t){return sn(this,void 0,void 0,function*(){try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Nc(this.fetch,`${this.url}/DeleteVectors`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(kc(r))return{data:null,error:r};throw r}})}}class rQ{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},k6),r),this.fetch=N6(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return sn(this,void 0,void 0,function*(){try{return{data:(yield Nc(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(kc(r))return{data:null,error:r};throw r}})}getBucket(t){return sn(this,void 0,void 0,function*(){try{return{data:yield Nc(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(kc(r))return{data:null,error:r};throw r}})}listBuckets(){return sn(this,arguments,void 0,function*(t={}){try{return{data:yield Nc(this.fetch,`${this.url}/ListVectorBuckets`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(kc(r))return{data:null,error:r};throw r}})}deleteBucket(t){return sn(this,void 0,void 0,function*(){try{return{data:(yield Nc(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(kc(r))return{data:null,error:r};throw r}})}}class nQ extends rQ{constructor(t,r={}){super(t,r.headers||{},r.fetch)}from(t){return new aQ(this.url,this.headers,t,this.fetch)}}class aQ extends eQ{constructor(t,r,n,a){super(t,r,a),this.vectorBucketName=n}createIndex(t){const r=Object.create(null,{createIndex:{get:()=>super.createIndex}});return sn(this,void 0,void 0,function*(){return r.createIndex.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const t=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return sn(this,arguments,void 0,function*(r={}){return t.listIndexes.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName}))})}getIndex(t){const r=Object.create(null,{getIndex:{get:()=>super.getIndex}});return sn(this,void 0,void 0,function*(){return r.getIndex.call(this,this.vectorBucketName,t)})}deleteIndex(t){const r=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return sn(this,void 0,void 0,function*(){return r.deleteIndex.call(this,this.vectorBucketName,t)})}index(t){return new sQ(this.url,this.headers,this.vectorBucketName,t,this.fetch)}}class sQ extends tQ{constructor(t,r,n,a,s){super(t,r,s),this.vectorBucketName=n,this.indexName=a}putVectors(t){const r=Object.create(null,{putVectors:{get:()=>super.putVectors}});return sn(this,void 0,void 0,function*(){return r.putVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(t){const r=Object.create(null,{getVectors:{get:()=>super.getVectors}});return sn(this,void 0,void 0,function*(){return r.getVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const t=Object.create(null,{listVectors:{get:()=>super.listVectors}});return sn(this,arguments,void 0,function*(r={}){return t.listVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(t){const r=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return sn(this,void 0,void 0,function*(){return r.queryVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(t){const r=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return sn(this,void 0,void 0,function*(){return r.deleteVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class iQ extends KZ{constructor(t,r={},n,a){super(t,r,n,a)}from(t){return new WZ(this.url,this.headers,t,this.fetch)}get vectors(){return new nQ(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new GZ(this.url+"/iceberg",this.headers,this.fetch)}}const lQ="2.80.0";let xg="";typeof Deno<"u"?xg="deno":typeof document<"u"?xg="web":typeof navigator<"u"&&navigator.product==="ReactNative"?xg="react-native":xg="node";const oQ={"X-Client-Info":`supabase-js-${xg}/${lQ}`},cQ={headers:oQ},dQ={schema:"public"},uQ={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},hQ={},fQ=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),mQ=()=>Headers,xQ=(e,t,r)=>{const n=fQ(r),a=mQ();return async(s,l)=>{var o;const c=(o=await t())!==null&&o!==void 0?o:e;let d=new a(l==null?void 0:l.headers);return d.has("apikey")||d.set("apikey",e),d.has("Authorization")||d.set("Authorization",`Bearer ${c}`),n(s,Object.assign(Object.assign({},l),{headers:d}))}};function pQ(e){return e.endsWith("/")?e:e+"/"}function gQ(e,t){var r,n;const{db:a,auth:s,realtime:l,global:o}=e,{db:c,auth:d,realtime:f,global:p}=t,y={db:Object.assign(Object.assign({},c),a),auth:Object.assign(Object.assign({},d),s),realtime:Object.assign(Object.assign({},f),l),storage:{},global:Object.assign(Object.assign(Object.assign({},p),o),{headers:Object.assign(Object.assign({},(r=p==null?void 0:p.headers)!==null&&r!==void 0?r:{}),(n=o==null?void 0:o.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return e.accessToken?y.accessToken=e.accessToken:delete y.accessToken,y}function bQ(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(pQ(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const ZR="2.80.0",e1=30*1e3,g_=3,g4=g_*e1,vQ="http://localhost:9999",yQ="supabase.auth.token",wQ={"X-Client-Info":`gotrue-js/${ZR}`},b_="X-Supabase-Api-Version",QR={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},kQ=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,NQ=600*1e3;class qg extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function xn(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class _Q extends qg{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function SQ(e){return xn(e)&&e.name==="AuthApiError"}class Wf extends qg{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class ff extends qg{constructor(t,r,n,a){super(t,n,a),this.name=r,this.status=n}}class Bd extends ff{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function jQ(e){return xn(e)&&e.name==="AuthSessionMissingError"}class Bx extends ff{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class h2 extends ff{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class f2 extends ff{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function CQ(e){return xn(e)&&e.name==="AuthImplicitGrantRedirectError"}class LT extends ff{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class v_ extends ff{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function b4(e){return xn(e)&&e.name==="AuthRetryableFetchError"}class RT extends ff{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class y_ extends ff{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const xy="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),FT=` 	
\r=`.split(""),AQ=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<FT.length;t+=1)e[FT[t].charCodeAt(0)]=-2;for(let t=0;t<xy.length;t+=1)e[xy[t].charCodeAt(0)]=t;return e})();function BT(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(xy[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(xy[n]),t.queuedBits-=6}}function JR(e,t,r){const n=AQ[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function UT(e){const t=[],r=l=>{t.push(String.fromCodePoint(l))},n={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},s=l=>{OQ(l,n,r)};for(let l=0;l<e.length;l+=1)JR(e.charCodeAt(l),a,s);return t.join("")}function EQ(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function TQ(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const a=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|a)+65536,r+=1}EQ(n,t)}}function OQ(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if((e>>7-n&1)===0){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function d1(e){const t=[],r={queue:0,queuedBits:0},n=a=>{t.push(a)};for(let a=0;a<e.length;a+=1)JR(e.charCodeAt(a),r,n);return new Uint8Array(t)}function PQ(e){const t=[];return TQ(e,r=>t.push(r)),new Uint8Array(t)}function Yf(e){const t=[],r={queue:0,queuedBits:0},n=a=>{t.push(a)};return e.forEach(a=>BT(a,r,n)),BT(null,r,n),t.join("")}function IQ(e){return Math.round(Date.now()/1e3)+e}function DQ(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const Yl=()=>typeof window<"u"&&typeof document<"u",Rf={tested:!1,writable:!1},eF=()=>{if(!Yl())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Rf.tested)return Rf.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Rf.tested=!0,Rf.writable=!0}catch{Rf.tested=!0,Rf.writable=!1}return Rf.writable};function MQ(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((a,s)=>{t[s]=a})}catch{}return r.searchParams.forEach((n,a)=>{t[a]=n}),t}const tF=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),LQ=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",t1=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},Ff=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Ph=async(e,t)=>{await e.removeItem(t)};class Fw{constructor(){this.promise=new Fw.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}Fw.promiseConstructor=Promise;function v4(e){const t=e.split(".");if(t.length!==3)throw new y_("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!kQ.test(t[n]))throw new y_("JWT not in base64url format");return{header:JSON.parse(UT(t[0])),payload:JSON.parse(UT(t[1])),signature:d1(t[2]),raw:{header:t[0],payload:t[1]}}}async function RQ(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function FQ(e,t){return new Promise((n,a)=>{(async()=>{for(let s=0;s<1/0;s++)try{const l=await e(s);if(!t(s,null,l)){n(l);return}}catch(l){if(!t(s,l)){a(l);return}}})()})}function BQ(e){return("0"+e.toString(16)).substr(-2)}function UQ(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let a="";for(let s=0;s<56;s++)a+=r.charAt(Math.floor(Math.random()*n));return a}return crypto.getRandomValues(t),Array.from(t,BQ).join("")}async function zQ(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),a=new Uint8Array(n);return Array.from(a).map(s=>String.fromCharCode(s)).join("")}async function qQ(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await zQ(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ux(e,t,r=!1){const n=UQ();let a=n;r&&(a+="/PASSWORD_RECOVERY"),await t1(e,`${t}-code-verifier`,a);const s=await qQ(n);return[s,n===s?"plain":"s256"]}const HQ=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function $Q(e){const t=e.headers.get(b_);if(!t||!t.match(HQ))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function VQ(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function WQ(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const KQ=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function zx(e){if(!KQ.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function y4(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function GQ(e,t){return new Proxy(e,{get:(r,n,a)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const s=n.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)"||s==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,n,a)}return!t.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(r,n,a)}})}function zT(e){return JSON.parse(JSON.stringify(e))}const Uf=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),XQ=[502,503,504];async function qT(e){var t;if(!LQ(e))throw new v_(Uf(e),0);if(XQ.includes(e.status))throw new v_(Uf(e),e.status);let r;try{r=await e.json()}catch(s){throw new Wf(Uf(s),s)}let n;const a=$Q(e);if(a&&a.getTime()>=QR["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new RT(Uf(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new Bd}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((s,l)=>s&&typeof l=="string",!0))throw new RT(Uf(r),e.status,r.weak_password.reasons);throw new _Q(Uf(r),e.status||500,n)}const YQ=(e,t,r,n)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),a.body=JSON.stringify(n),Object.assign(Object.assign({},a),r))};async function Dn(e,t,r,n){var a;const s=Object.assign({},n==null?void 0:n.headers);s[b_]||(s[b_]=QR["2024-01-01"].name),n!=null&&n.jwt&&(s.Authorization=`Bearer ${n.jwt}`);const l=(a=n==null?void 0:n.query)!==null&&a!==void 0?a:{};n!=null&&n.redirectTo&&(l.redirect_to=n.redirectTo);const o=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",c=await ZQ(e,t,r+o,{headers:s,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function ZQ(e,t,r,n,a,s){const l=YQ(t,n,a,s);let o;try{o=await e(r,Object.assign({},l))}catch(c){throw console.error(c),new v_(Uf(c),0)}if(o.ok||await qT(o),n!=null&&n.noResolveJson)return o;try{return await o.json()}catch(c){await qT(c)}}function Ud(e){var t;let r=null;eJ(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=IQ(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function HT(e){const t=Ud(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Bh(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function QQ(e){return{data:e,error:null}}function JQ(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:a,verification_type:s}=e,l=J1(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:t,email_otp:r,hashed_token:n,redirect_to:a,verification_type:s},c=Object.assign({},l);return{data:{properties:o,user:c},error:null}}function $T(e){return e}function eJ(e){return e.access_token&&e.refresh_token&&e.expires_in}const w4=["global","local","others"];class tJ{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=tF(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,r=w4[0]){if(w4.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${w4.join(", ")}`);try{return await Dn(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(xn(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await Dn(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Bh})}catch(n){if(xn(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=J1(t,["options"]),a=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(a.new_email=n==null?void 0:n.newEmail,delete a.newEmail),await Dn(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:JQ,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(xn(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await Dn(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Bh})}catch(r){if(xn(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,a,s,l,o,c;try{const d={nextPage:null,lastPage:0,total:0},f=await Dn(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(s=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&s!==void 0?s:""},xform:$T});if(f.error)throw f.error;const p=await f.json(),y=(l=f.headers.get("x-total-count"))!==null&&l!==void 0?l:0,g=(c=(o=f.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&c!==void 0?c:[];return g.length>0&&(g.forEach(N=>{const w=parseInt(N.split(";")[0].split("=")[1].substring(0,1)),k=JSON.parse(N.split(";")[1].split("=")[1]);d[`${k}Page`]=w}),d.total=parseInt(y)),{data:Object.assign(Object.assign({},p),d),error:null}}catch(d){if(xn(d))return{data:{users:[]},error:d};throw d}}async getUserById(t){zx(t);try{return await Dn(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Bh})}catch(r){if(xn(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){zx(t);try{return await Dn(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:Bh})}catch(n){if(xn(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){zx(t);try{return await Dn(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:Bh})}catch(n){if(xn(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){zx(t.userId);try{const{data:r,error:n}=await Dn(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:r,error:n}}catch(r){if(xn(r))return{data:null,error:r};throw r}}async _deleteFactor(t){zx(t.userId),zx(t.id);try{return{data:await Dn(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(xn(r))return{data:null,error:r};throw r}}async _listOAuthClients(t){var r,n,a,s,l,o,c;try{const d={nextPage:null,lastPage:0,total:0},f=await Dn(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(s=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&s!==void 0?s:""},xform:$T});if(f.error)throw f.error;const p=await f.json(),y=(l=f.headers.get("x-total-count"))!==null&&l!==void 0?l:0,g=(c=(o=f.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&c!==void 0?c:[];return g.length>0&&(g.forEach(N=>{const w=parseInt(N.split(";")[0].split("=")[1].substring(0,1)),k=JSON.parse(N.split(";")[1].split("=")[1]);d[`${k}Page`]=w}),d.total=parseInt(y)),{data:Object.assign(Object.assign({},p),d),error:null}}catch(d){if(xn(d))return{data:{clients:[]},error:d};throw d}}async _createOAuthClient(t){try{return await Dn(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(xn(r))return{data:null,error:r};throw r}}async _getOAuthClient(t){try{return await Dn(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(xn(r))return{data:null,error:r};throw r}}async _updateOAuthClient(t,r){try{return await Dn(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(xn(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(t){try{return await Dn(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(xn(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(t){try{return await Dn(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(xn(r))return{data:null,error:r};throw r}}}function VT(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const qx={debug:!!(globalThis&&eF()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class rF extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class rJ extends rF{}async function nJ(e,t,r){qx.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),qx.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async a=>{if(a){qx.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,a.name);try{return await r()}finally{qx.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,a.name)}}else{if(t===0)throw qx.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new rJ(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(qx.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function aJ(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function nF(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function sJ(e){return parseInt(e,16)}function iJ(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,n=>n.toString(16).padStart(2,"0")).join("")}function lJ(e){var t;const{chainId:r,domain:n,expirationTime:a,issuedAt:s=new Date,nonce:l,notBefore:o,requestId:c,resources:d,scheme:f,uri:p,version:y}=e;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(l&&l.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${l}`);if(!p)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(y!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${y}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const g=nF(e.address),N=f?`${f}://${n}`:n,w=e.statement?`${e.statement}
`:"",k=`${N} wants you to sign in with your Ethereum account:
${g}

${w}`;let S=`URI: ${p}
Version: ${y}
Chain ID: ${r}${l?`
Nonce: ${l}`:""}
Issued At: ${s.toISOString()}`;if(a&&(S+=`
Expiration Time: ${a.toISOString()}`),o&&(S+=`
Not Before: ${o.toISOString()}`),c&&(S+=`
Request ID: ${c}`),d){let O=`
Resources:`;for(const E of d){if(!E||typeof E!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${E}`);O+=`
- ${E}`}S+=O}return`${k}
${S}`}class Mi extends Error{constructor({message:t,code:r,cause:n,name:a}){var s;super(t,{cause:n}),this.__isWebAuthnError=!0,this.name=(s=a??(n instanceof Error?n.name:void 0))!==null&&s!==void 0?s:"Unknown Error",this.code=r}}class py extends Mi{constructor(t,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:t}),this.name="WebAuthnUnknownError",this.originalError=r}}function oJ({error:e,options:t}){var r,n,a;const{publicKey:s}=t;if(!s)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Mi({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((r=s.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new Mi({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((n=s.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new Mi({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((a=s.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new Mi({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new Mi({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new Mi({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return s.pubKeyCredParams.filter(o=>o.type==="public-key").length===0?new Mi({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new Mi({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const l=window.location.hostname;if(aF(l)){if(s.rp.id!==l)return new Mi({message:`The RP ID "${s.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Mi({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(s.user.id.byteLength<1||s.user.id.byteLength>64)return new Mi({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new Mi({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Mi({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function cJ({error:e,options:t}){const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Mi({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new Mi({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const n=window.location.hostname;if(aF(n)){if(r.rpId!==n)return new Mi({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Mi({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new Mi({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Mi({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class dJ{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const uJ=new dJ;function hJ(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:r,excludeCredentials:n}=e,a=J1(e,["challenge","user","excludeCredentials"]),s=d1(t).buffer,l=Object.assign(Object.assign({},r),{id:d1(r.id).buffer}),o=Object.assign(Object.assign({},a),{challenge:s,user:l});if(n&&n.length>0){o.excludeCredentials=new Array(n.length);for(let c=0;c<n.length;c++){const d=n[c];o.excludeCredentials[c]=Object.assign(Object.assign({},d),{id:d1(d.id).buffer,type:d.type||"public-key",transports:d.transports})}}return o}function fJ(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:r}=e,n=J1(e,["challenge","allowCredentials"]),a=d1(t).buffer,s=Object.assign(Object.assign({},n),{challenge:a});if(r&&r.length>0){s.allowCredentials=new Array(r.length);for(let l=0;l<r.length;l++){const o=r[l];s.allowCredentials[l]=Object.assign(Object.assign({},o),{id:d1(o.id).buffer,type:o.type||"public-key",transports:o.transports})}}return s}function mJ(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e;return{id:e.id,rawId:e.id,response:{attestationObject:Yf(new Uint8Array(e.response.attestationObject)),clientDataJSON:Yf(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function xJ(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e,n=e.getClientExtensionResults(),a=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:Yf(new Uint8Array(a.authenticatorData)),clientDataJSON:Yf(new Uint8Array(a.clientDataJSON)),signature:Yf(new Uint8Array(a.signature)),userHandle:a.userHandle?Yf(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function aF(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function WT(){var e,t;return!!(Yl()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function pJ(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new py("Browser returned unexpected credential type",t)}:{data:null,error:new py("Empty credential response",t)}}catch(t){return{data:null,error:oJ({error:t,options:e})}}}async function gJ(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new py("Browser returned unexpected credential type",t)}:{data:null,error:new py("Empty credential response",t)}}catch(t){return{data:null,error:cJ({error:t,options:e})}}}const bJ={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},vJ={userVerification:"preferred",hints:["security-key"]};function gy(...e){const t=a=>a!==null&&typeof a=="object"&&!Array.isArray(a),r=a=>a instanceof ArrayBuffer||ArrayBuffer.isView(a),n={};for(const a of e)if(a)for(const s in a){const l=a[s];if(l!==void 0)if(Array.isArray(l))n[s]=l;else if(r(l))n[s]=l;else if(t(l)){const o=n[s];t(o)?n[s]=gy(o,l):n[s]=gy(l)}else n[s]=l}return n}function yJ(e,t){return gy(bJ,e,t||{})}function wJ(e,t){return gy(vJ,e,t||{})}class kJ{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:r,friendlyName:n,signal:a},s){try{const{data:l,error:o}=await this.client.mfa.challenge({factorId:t,webauthn:r});if(!l)return{data:null,error:o};const c=a??uJ.createNewAbortSignal();if(l.webauthn.type==="create"){const{user:d}=l.webauthn.credential_options.publicKey;d.name||(d.name=`${d.id}:${n}`),d.displayName||(d.displayName=d.name)}switch(l.webauthn.type){case"create":{const d=yJ(l.webauthn.credential_options.publicKey,s==null?void 0:s.create),{data:f,error:p}=await pJ({publicKey:d,signal:c});return f?{data:{factorId:t,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:f}},error:null}:{data:null,error:p}}case"request":{const d=wJ(l.webauthn.credential_options.publicKey,s==null?void 0:s.request),{data:f,error:p}=await gJ(Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:d,signal:c}));return f?{data:{factorId:t,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:f}},error:null}:{data:null,error:p}}}}catch(l){return xn(l)?{data:null,error:l}:{data:null,error:new Wf("Unexpected error in challenge",l)}}}async _verify({challengeId:t,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:t,webauthn:n})}async _authenticate({factorId:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:a}},s){if(!r)return{data:null,error:new qg("rpId is required for WebAuthn authentication")};try{if(!WT())return{data:null,error:new Wf("Browser does not support WebAuthn",null)};const{data:l,error:o}=await this.challenge({factorId:t,webauthn:{rpId:r,rpOrigins:n},signal:a},{request:s});if(!l)return{data:null,error:o};const{webauthn:c}=l;return this._verify({factorId:t,challengeId:l.challengeId,webauthn:{type:c.type,rpId:r,rpOrigins:n,credential_response:c.credential_response}})}catch(l){return xn(l)?{data:null,error:l}:{data:null,error:new Wf("Unexpected error in authenticate",l)}}}async _register({friendlyName:t,rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:a},s){if(!r)return{data:null,error:new qg("rpId is required for WebAuthn registration")};try{if(!WT())return{data:null,error:new Wf("Browser does not support WebAuthn",null)};const{data:l,error:o}=await this._enroll({friendlyName:t});if(!l)return await this.client.mfa.listFactors().then(f=>{var p;return(p=f.data)===null||p===void 0?void 0:p.all.find(y=>y.factor_type==="webauthn"&&y.friendly_name===t&&y.status!=="unverified")}).then(f=>f?this.client.mfa.unenroll({factorId:f==null?void 0:f.id}):void 0),{data:null,error:o};const{data:c,error:d}=await this._challenge({factorId:l.id,friendlyName:l.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:a},{create:s});return c?this._verify({factorId:l.id,challengeId:c.challengeId,webauthn:{rpId:r,rpOrigins:n,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:d}}catch(l){return xn(l)?{data:null,error:l}:{data:null,error:new Wf("Unexpected error in register",l)}}}}aJ();const NJ={url:vQ,storageKey:yQ,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:wQ,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function KT(e,t,r){return await r()}const Hx={};class Hg{get jwks(){var t,r;return(r=(t=Hx[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){Hx[this.storageKey]=Object.assign(Object.assign({},Hx[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=Hx[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Hx[this.storageKey]=Object.assign(Object.assign({},Hx[this.storageKey]),{cachedAt:t})}constructor(t){var r,n,a;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const s=Object.assign(Object.assign({},NJ),t);if(this.storageKey=s.storageKey,this.instanceID=(r=Hg.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,Hg.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.instanceID>0&&Yl()){const l=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(l),this.logDebugMessages&&console.trace(l)}if(this.persistSession=s.persistSession,this.autoRefreshToken=s.autoRefreshToken,this.admin=new tJ({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=tF(s.fetch),this.lock=s.lock||KT,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,this.throwOnError=s.throwOnError,s.lock?this.lock=s.lock:Yl()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=nJ:this.lock=KT,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new kJ(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:eF()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=VT(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=VT(this.memoryStorage)),Yl()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(l){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",l)}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",async l=>{this._debug("received broadcast notification from other tab or client",l),await this._notifyAllSubscribers(l.data.event,l.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${ZR}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let r={},n="none";if(Yl()&&(r=MQ(window.location.href),this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce")),Yl()&&this.detectSessionInUrl&&n!=="none"){const{data:a,error:s}=await this._getSessionFromURL(r,n);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),CQ(s)){const c=(t=s.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:s}}return await this._removeSession(),{error:s}}const{session:l,redirectType:o}=a;return this._debug("#_initialize()","detected session in URL",l,"redirect type",o),await this._saveSession(l),setTimeout(async()=>{o==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return xn(r)?this._returnResult({error:r}):this._returnResult({error:new Wf("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,a;try{const s=await Dn(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(a=t==null?void 0:t.options)===null||a===void 0?void 0:a.captchaToken}},xform:Ud}),{data:l,error:o}=s;if(o||!l)return this._returnResult({data:{user:null,session:null},error:o});const c=l.session,d=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:d,session:c},error:null})}catch(s){if(xn(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signUp(t){var r,n,a;try{let s;if("email"in t){const{email:f,password:p,options:y}=t;let g=null,N=null;this.flowType==="pkce"&&([g,N]=await Ux(this.storage,this.storageKey)),s=await Dn(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:y==null?void 0:y.emailRedirectTo,body:{email:f,password:p,data:(r=y==null?void 0:y.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:y==null?void 0:y.captchaToken},code_challenge:g,code_challenge_method:N},xform:Ud})}else if("phone"in t){const{phone:f,password:p,options:y}=t;s=await Dn(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:f,password:p,data:(n=y==null?void 0:y.data)!==null&&n!==void 0?n:{},channel:(a=y==null?void 0:y.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:y==null?void 0:y.captchaToken}},xform:Ud})}else throw new h2("You must provide either an email or phone number and a password");const{data:l,error:o}=s;if(o||!l)return this._returnResult({data:{user:null,session:null},error:o});const c=l.session,d=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:d,session:c},error:null})}catch(s){if(xn(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithPassword(t){try{let r;if("email"in t){const{email:s,password:l,options:o}=t;r=await Dn(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:l,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:HT})}else if("phone"in t){const{phone:s,password:l,options:o}=t;r=await Dn(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:l,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:HT})}else throw new h2("You must provide either an email or phone number and a password");const{data:n,error:a}=r;if(a)return this._returnResult({data:{user:null,session:null},error:a});if(!n||!n.session||!n.user){const s=new Bx;return this._returnResult({data:{user:null,session:null},error:s})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:a})}catch(r){if(xn(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(t){var r,n,a,s;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(a=t.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(s=t.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;switch(r){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(t){var r,n,a,s,l,o,c,d,f,p,y;let g,N;if("message"in t)g=t.message,N=t.signature;else{const{chain:w,wallet:k,statement:S,options:O}=t;let E;if(Yl())if(typeof k=="object")E=k;else{const U=window;if("ethereum"in U&&typeof U.ethereum=="object"&&"request"in U.ethereum&&typeof U.ethereum.request=="function")E=U.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof k!="object"||!(O!=null&&O.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");E=k}const D=new URL((r=O==null?void 0:O.url)!==null&&r!==void 0?r:window.location.href),H=await E.request({method:"eth_requestAccounts"}).then(U=>U).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!H||H.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const W=nF(H[0]);let R=(n=O==null?void 0:O.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!R){const U=await E.request({method:"eth_chainId"});R=sJ(U)}const z={domain:D.host,address:W,statement:S,uri:D.href,version:"1",chainId:R,nonce:(a=O==null?void 0:O.signInWithEthereum)===null||a===void 0?void 0:a.nonce,issuedAt:(l=(s=O==null?void 0:O.signInWithEthereum)===null||s===void 0?void 0:s.issuedAt)!==null&&l!==void 0?l:new Date,expirationTime:(o=O==null?void 0:O.signInWithEthereum)===null||o===void 0?void 0:o.expirationTime,notBefore:(c=O==null?void 0:O.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(d=O==null?void 0:O.signInWithEthereum)===null||d===void 0?void 0:d.requestId,resources:(f=O==null?void 0:O.signInWithEthereum)===null||f===void 0?void 0:f.resources};g=lJ(z),N=await E.request({method:"personal_sign",params:[iJ(g),W]})}try{const{data:w,error:k}=await Dn(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:g,signature:N},!((p=t.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(y=t.options)===null||y===void 0?void 0:y.captchaToken}}:null),xform:Ud});if(k)throw k;if(!w||!w.session||!w.user){const S=new Bx;return this._returnResult({data:{user:null,session:null},error:S})}return w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),this._returnResult({data:Object.assign({},w),error:k})}catch(w){if(xn(w))return this._returnResult({data:{user:null,session:null},error:w});throw w}}async signInWithSolana(t){var r,n,a,s,l,o,c,d,f,p,y,g;let N,w;if("message"in t)N=t.message,w=t.signature;else{const{chain:k,wallet:S,statement:O,options:E}=t;let D;if(Yl())if(typeof S=="object")D=S;else{const W=window;if("solana"in W&&typeof W.solana=="object"&&("signIn"in W.solana&&typeof W.solana.signIn=="function"||"signMessage"in W.solana&&typeof W.solana.signMessage=="function"))D=W.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof S!="object"||!(E!=null&&E.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");D=S}const H=new URL((r=E==null?void 0:E.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in D&&D.signIn){const W=await D.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},E==null?void 0:E.signInWithSolana),{version:"1",domain:H.host,uri:H.href}),O?{statement:O}:null));let R;if(Array.isArray(W)&&W[0]&&typeof W[0]=="object")R=W[0];else if(W&&typeof W=="object"&&"signedMessage"in W&&"signature"in W)R=W;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in R&&"signature"in R&&(typeof R.signedMessage=="string"||R.signedMessage instanceof Uint8Array)&&R.signature instanceof Uint8Array)N=typeof R.signedMessage=="string"?R.signedMessage:new TextDecoder().decode(R.signedMessage),w=R.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in D)||typeof D.signMessage!="function"||!("publicKey"in D)||typeof D!="object"||!D.publicKey||!("toBase58"in D.publicKey)||typeof D.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");N=[`${H.host} wants you to sign in with your Solana account:`,D.publicKey.toBase58(),...O?["",O,""]:[""],"Version: 1",`URI: ${H.href}`,`Issued At: ${(a=(n=E==null?void 0:E.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((s=E==null?void 0:E.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${E.signInWithSolana.notBefore}`]:[],...!((l=E==null?void 0:E.signInWithSolana)===null||l===void 0)&&l.expirationTime?[`Expiration Time: ${E.signInWithSolana.expirationTime}`]:[],...!((o=E==null?void 0:E.signInWithSolana)===null||o===void 0)&&o.chainId?[`Chain ID: ${E.signInWithSolana.chainId}`]:[],...!((c=E==null?void 0:E.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${E.signInWithSolana.nonce}`]:[],...!((d=E==null?void 0:E.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${E.signInWithSolana.requestId}`]:[],...!((p=(f=E==null?void 0:E.signInWithSolana)===null||f===void 0?void 0:f.resources)===null||p===void 0)&&p.length?["Resources",...E.signInWithSolana.resources.map(R=>`- ${R}`)]:[]].join(`
`);const W=await D.signMessage(new TextEncoder().encode(N),"utf8");if(!W||!(W instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");w=W}}try{const{data:k,error:S}=await Dn(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:N,signature:Yf(w)},!((y=t.options)===null||y===void 0)&&y.captchaToken?{gotrue_meta_security:{captcha_token:(g=t.options)===null||g===void 0?void 0:g.captchaToken}}:null),xform:Ud});if(S)throw S;if(!k||!k.session||!k.user){const O=new Bx;return this._returnResult({data:{user:null,session:null},error:O})}return k.session&&(await this._saveSession(k.session),await this._notifyAllSubscribers("SIGNED_IN",k.session)),this._returnResult({data:Object.assign({},k),error:S})}catch(k){if(xn(k))return this._returnResult({data:{user:null,session:null},error:k});throw k}}async _exchangeCodeForSession(t){const r=await Ff(this.storage,`${this.storageKey}-code-verifier`),[n,a]=(r??"").split("/");try{const{data:s,error:l}=await Dn(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:Ud});if(await Ph(this.storage,`${this.storageKey}-code-verifier`),l)throw l;if(!s||!s.session||!s.user){const o=new Bx;return this._returnResult({data:{user:null,session:null,redirectType:null},error:o})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign(Object.assign({},s),{redirectType:a??null}),error:l})}catch(s){if(xn(s))return this._returnResult({data:{user:null,session:null,redirectType:null},error:s});throw s}}async signInWithIdToken(t){try{const{options:r,provider:n,token:a,access_token:s,nonce:l}=t,o=await Dn(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:a,access_token:s,nonce:l,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Ud}),{data:c,error:d}=o;if(d)return this._returnResult({data:{user:null,session:null},error:d});if(!c||!c.session||!c.user){const f=new Bx;return this._returnResult({data:{user:null,session:null},error:f})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:c,error:d})}catch(r){if(xn(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(t){var r,n,a,s,l;try{if("email"in t){const{email:o,options:c}=t;let d=null,f=null;this.flowType==="pkce"&&([d,f]=await Ux(this.storage,this.storageKey));const{error:p}=await Dn(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:d,code_challenge_method:f},redirectTo:c==null?void 0:c.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:p})}if("phone"in t){const{phone:o,options:c}=t,{data:d,error:f}=await Dn(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(a=c==null?void 0:c.data)!==null&&a!==void 0?a:{},create_user:(s=c==null?void 0:c.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(l=c==null?void 0:c.channel)!==null&&l!==void 0?l:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:f})}throw new h2("You must provide either an email or phone number.")}catch(o){if(xn(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async verifyOtp(t){var r,n;try{let a,s;"options"in t&&(a=(r=t.options)===null||r===void 0?void 0:r.redirectTo,s=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:l,error:o}=await Dn(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:s}}),redirectTo:a,xform:Ud});if(o)throw o;if(!l)throw new Error("An error occurred on token verification.");const c=l.session,d=l.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),this._returnResult({data:{user:d,session:c},error:null})}catch(a){if(xn(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithSSO(t){var r,n,a;try{let s=null,l=null;this.flowType==="pkce"&&([s,l]=await Ux(this.storage,this.storageKey));const o=await Dn(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((a=t==null?void 0:t.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:l}),headers:this.headers,xform:QQ});return this._returnResult(o)}catch(s){if(xn(s))return this._returnResult({data:null,error:s});throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new Bd;const{error:a}=await Dn(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:a})})}catch(t){if(xn(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:a,options:s}=t,{error:l}=await Dn(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:a,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:l})}else if("phone"in t){const{phone:n,type:a,options:s}=t,{data:l,error:o}=await Dn(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:a,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:o})}throw new h2("You must provide either an email or phone number and a type")}catch(r){if(xn(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await Ff(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<g4:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const l=await Ff(this.userStorage,this.storageKey+"-user");l!=null&&l.user?t.user=l.user:t.user=y4()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const l={value:this.suppressGetSessionWarning};t.user=GQ(t.user,l),l.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:a,error:s}=await this._callRefreshToken(t.refresh_token);return s?this._returnResult({data:{session:null},error:s}):this._returnResult({data:{session:a},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await Dn(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Bh}):await this._useSession(async r=>{var n,a,s;const{data:l,error:o}=r;if(o)throw o;return!(!((n=l.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Bd}:await Dn(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(a=l.session)===null||a===void 0?void 0:a.access_token)!==null&&s!==void 0?s:void 0,xform:Bh})})}catch(r){if(xn(r))return jQ(r)&&(await this._removeSession(),await Ph(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:a,error:s}=n;if(s)throw s;if(!a.session)throw new Bd;const l=a.session;let o=null,c=null;this.flowType==="pkce"&&t.email!=null&&([o,c]=await Ux(this.storage,this.storageKey));const{data:d,error:f}=await Dn(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:o,code_challenge_method:c}),jwt:l.access_token,xform:Bh});if(f)throw f;return l.user=d.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),this._returnResult({data:{user:l.user},error:null})})}catch(n){if(xn(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Bd;const r=Date.now()/1e3;let n=r,a=!0,s=null;const{payload:l}=v4(t.access_token);if(l.exp&&(n=l.exp,a=n<=r),a){const{data:o,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!o)return{data:{user:null,session:null},error:null};s=o}else{const{data:o,error:c}=await this._getUser(t.access_token);if(c)throw c;s={access_token:t.access_token,refresh_token:t.refresh_token,user:o.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return this._returnResult({data:{user:s.user,session:s},error:null})}catch(r){if(xn(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:l,error:o}=r;if(o)throw o;t=(n=l.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new Bd;const{data:a,error:s}=await this._callRefreshToken(t.refresh_token);return s?this._returnResult({data:{user:null,session:null},error:s}):a?this._returnResult({data:{user:a.user,session:a},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(xn(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(t,r){try{if(!Yl())throw new f2("No browser detected.");if(t.error||t.error_description||t.error_code)throw new f2(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new LT("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new f2("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new LT("No code detected.");const{data:O,error:E}=await this._exchangeCodeForSession(t.code);if(E)throw E;const D=new URL(window.location.href);return D.searchParams.delete("code"),window.history.replaceState(window.history.state,"",D.toString()),{data:{session:O.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:a,access_token:s,refresh_token:l,expires_in:o,expires_at:c,token_type:d}=t;if(!s||!o||!l||!d)throw new f2("No session defined in URL");const f=Math.round(Date.now()/1e3),p=parseInt(o);let y=f+p;c&&(y=parseInt(c));const g=y-f;g*1e3<=e1&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${g}s, should have been closer to ${p}s`);const N=y-p;f-N>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",N,y,f):f-N<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",N,y,f);const{data:w,error:k}=await this._getUser(s);if(k)throw k;const S={provider_token:n,provider_refresh_token:a,access_token:s,expires_in:p,expires_at:y,refresh_token:l,token_type:d,user:w.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:S,redirectType:t.type},error:null})}catch(n){if(xn(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await Ff(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:a,error:s}=r;if(s)return this._returnResult({error:s});const l=(n=a.session)===null||n===void 0?void 0:n.access_token;if(l){const{error:o}=await this.admin.signOut(l,t);if(o&&!(SQ(o)&&(o.status===404||o.status===401||o.status===403)))return this._returnResult({error:o})}return t!=="others"&&(await this._removeSession(),await Ph(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const r=DQ(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,a;try{const{data:{session:s},error:l}=r;if(l)throw l;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",t,"session",s)}catch(s){await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",s),console.error(s)}})}async resetPasswordForEmail(t,r={}){let n=null,a=null;this.flowType==="pkce"&&([n,a]=await Ux(this.storage,this.storageKey,!0));try{return await Dn(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:a,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(s){if(xn(s))return this._returnResult({data:null,error:s});throw s}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(r){if(xn(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var r;try{const{data:n,error:a}=await this._useSession(async s=>{var l,o,c,d,f;const{data:p,error:y}=s;if(y)throw y;const g=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(l=t.options)===null||l===void 0?void 0:l.redirectTo,scopes:(o=t.options)===null||o===void 0?void 0:o.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await Dn(this.fetch,"GET",g,{headers:this.headers,jwt:(f=(d=p.session)===null||d===void 0?void 0:d.access_token)!==null&&f!==void 0?f:void 0})});if(a)throw a;return Yl()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),this._returnResult({data:{provider:t.provider,url:n==null?void 0:n.url},error:null})}catch(n){if(xn(n))return this._returnResult({data:{provider:t.provider,url:null},error:n});throw n}}async linkIdentityIdToken(t){return await this._useSession(async r=>{var n;try{const{error:a,data:{session:s}}=r;if(a)throw a;const{options:l,provider:o,token:c,access_token:d,nonce:f}=t,p=await Dn(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=s==null?void 0:s.access_token)!==null&&n!==void 0?n:void 0,body:{provider:o,id_token:c,access_token:d,nonce:f,link_identity:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Ud}),{data:y,error:g}=p;return g?this._returnResult({data:{user:null,session:null},error:g}):!y||!y.session||!y.user?this._returnResult({data:{user:null,session:null},error:new Bx}):(y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("USER_UPDATED",y.session)),this._returnResult({data:y,error:g}))}catch(a){if(xn(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}})}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,a;const{data:s,error:l}=r;if(l)throw l;return await Dn(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(a=(n=s.session)===null||n===void 0?void 0:n.access_token)!==null&&a!==void 0?a:void 0})})}catch(r){if(xn(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await FQ(async a=>(a>0&&await RQ(200*Math.pow(2,a-1)),this._debug(r,"refreshing attempt",a),await Dn(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Ud})),(a,s)=>{const l=200*Math.pow(2,a);return s&&b4(s)&&Date.now()+l-n<e1})}catch(n){if(this._debug(r,"error",n),xn(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),Yl()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const a=await Ff(this.storage,this.storageKey);if(a&&this.userStorage){let l=await Ff(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!l&&(l={user:a.user},await t1(this.userStorage,this.storageKey+"-user",l)),a.user=(t=l==null?void 0:l.user)!==null&&t!==void 0?t:y4()}else if(a&&!a.user&&!a.user){const l=await Ff(this.storage,this.storageKey+"-user");l&&(l!=null&&l.user)?(a.user=l.user,await Ph(this.storage,this.storageKey+"-user"),await t1(this.storage,this.storageKey,a)):a.user=y4()}if(this._debug(n,"session from storage",a),!this._isValidSession(a)){this._debug(n,"session is not valid"),a!==null&&await this._removeSession();return}const s=((r=a.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<g4;if(this._debug(n,`session has${s?"":" not"} expired with margin of ${g4}s`),s){if(this.autoRefreshToken&&a.refresh_token){const{error:l}=await this._callRefreshToken(a.refresh_token);l&&(console.error(l),b4(l)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",l),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:l,error:o}=await this._getUser(a.access_token);!o&&(l!=null&&l.user)?(a.user=l.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(l){console.error("Error getting user data:",l),this._debug(n,"error getting user data, skipping SIGNED_IN notification",l)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(n,"error",a),console.error(a);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new Bd;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new Fw;const{data:s,error:l}=await this._refreshAccessToken(t);if(l)throw l;if(!s.session)throw new Bd;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const o={data:s.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(s){if(this._debug(a,"error",s),xn(s)){const l={data:null,error:s};return b4(s)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(l),l}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(s),s}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(t,r,n=!0){const a=`#_notifyAllSubscribers(${t})`;this._debug(a,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const s=[],l=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(t,r)}catch(c){s.push(c)}});if(await Promise.all(l),s.length>0){for(let o=0;o<s.length;o+=1)console.error(s[o]);throw s[0]}}finally{this._debug(a,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await t1(this.userStorage,this.storageKey+"-user",{user:r.user});const a=Object.assign({},r);delete a.user;const s=zT(a);await t1(this.storage,this.storageKey,s)}else{const a=zT(r);await t1(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),await Ph(this.storage,this.storageKey),await Ph(this.storage,this.storageKey+"-code-verifier"),await Ph(this.storage,this.storageKey+"-user"),this.userStorage&&await Ph(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Yl()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),e1);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((n.expires_at*1e3-t)/e1);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${e1}ms, refresh threshold is ${g_} ticks`),a<=g_&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof rF)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Yl()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const a=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&a.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&a.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[s,l]=await Ux(this.storage,this.storageKey),o=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(l)}`});a.push(o.toString())}if(n!=null&&n.queryParams){const s=new URLSearchParams(n.queryParams);a.push(s.toString())}return n!=null&&n.skipBrowserRedirect&&a.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${a.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:a,error:s}=r;return s?this._returnResult({data:null,error:s}):await Dn(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(xn(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,a;const{data:s,error:l}=r;if(l)return this._returnResult({data:null,error:l});const o=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:c,error:d}=await Dn(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return d?this._returnResult({data:null,error:d}):(t.factorType==="totp"&&c.type==="totp"&&(!((a=c==null?void 0:c.totp)===null||a===void 0)&&a.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),this._returnResult({data:c,error:null}))})}catch(r){if(xn(r))return this._returnResult({data:null,error:r});throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:a,error:s}=r;if(s)return this._returnResult({data:null,error:s});const l=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?mJ(t.webauthn.credential_response):xJ(t.webauthn.credential_response)})}:{code:t.code}),{data:o,error:c}=await Dn(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:l,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return c?this._returnResult({data:null,error:c}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),this._returnResult({data:o,error:c}))})}catch(r){if(xn(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:a,error:s}=r;if(s)return this._returnResult({data:null,error:s});const l=await Dn(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});if(l.error)return l;const{data:o}=l;if(o.type!=="webauthn")return{data:o,error:null};switch(o.webauthn.type){case"create":return{data:Object.assign(Object.assign({},o),{webauthn:Object.assign(Object.assign({},o.webauthn),{credential_options:Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:hJ(o.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},o),{webauthn:Object.assign(Object.assign({},o.webauthn),{credential_options:Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:fJ(o.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(xn(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){var t;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const a={all:[],phone:[],totp:[],webauthn:[]};for(const s of(t=r==null?void 0:r.factors)!==null&&t!==void 0?t:[])a.all.push(s),s.status==="verified"&&a[s.factor_type].push(s);return{data:a,error:null}}async _getAuthenticatorAssuranceLevel(){var t,r;const{data:{session:n},error:a}=await this.getSession();if(a)return this._returnResult({data:null,error:a});if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:s}=v4(n.access_token);let l=null;s.aal&&(l=s.aal);let o=l;((r=(t=n.user.factors)===null||t===void 0?void 0:t.filter(f=>f.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(o="aal2");const d=s.amr||[];return{data:{currentLevel:l,nextLevel:o,currentAuthenticationMethods:d},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async r=>{const{data:{session:n},error:a}=r;return a?this._returnResult({data:null,error:a}):n?await Dn(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:n.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new Bd})})}catch(r){if(xn(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:a},error:s}=n;if(s)return this._returnResult({data:null,error:s});if(!a)return this._returnResult({data:null,error:new Bd});const l=await Dn(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"approve"},xform:o=>({data:o,error:null})});return l.data&&l.data.redirect_url&&Yl()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(l.data.redirect_url),l})}catch(n){if(xn(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:a},error:s}=n;if(s)return this._returnResult({data:null,error:s});if(!a)return this._returnResult({data:null,error:new Bd});const l=await Dn(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"deny"},xform:o=>({data:o,error:null})});return l.data&&l.data.redirect_url&&Yl()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(l.data.redirect_url),l})}catch(n){if(xn(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(o=>o.kid===t);if(n)return n;const a=Date.now();if(n=this.jwks.keys.find(o=>o.kid===t),n&&this.jwks_cached_at+NQ>a)return n;const{data:s,error:l}=await Dn(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(l)throw l;return!s.keys||s.keys.length===0||(this.jwks=s,this.jwks_cached_at=a,n=s.keys.find(o=>o.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:g,error:N}=await this.getSession();if(N||!g.session)return this._returnResult({data:null,error:N});n=g.session.access_token}const{header:a,payload:s,signature:l,raw:{header:o,payload:c}}=v4(n);r!=null&&r.allowExpired||VQ(s.exp);const d=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!d){const{error:g}=await this.getUser(n);if(g)throw g;return{data:{claims:s,header:a,signature:l},error:null}}const f=WQ(a.alg),p=await crypto.subtle.importKey("jwk",d,f,!0,["verify"]);if(!await crypto.subtle.verify(f,p,l,PQ(`${o}.${c}`)))throw new y_("Invalid JWT signature");return{data:{claims:s,header:a,signature:l},error:null}}catch(n){if(xn(n))return this._returnResult({data:null,error:n});throw n}}}Hg.nextInstanceID={};const _J=Hg;class SJ extends _J{constructor(t){super(t)}}class jJ{constructor(t,r,n){var a,s,l;this.supabaseUrl=t,this.supabaseKey=r;const o=bQ(t);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",o),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",o),this.storageUrl=new URL("storage/v1",o),this.functionsUrl=new URL("functions/v1",o);const c=`sb-${o.hostname.split(".")[0]}-auth-token`,d={db:dQ,realtime:hQ,auth:Object.assign(Object.assign({},uQ),{storageKey:c}),global:cQ},f=gQ(n??{},d);this.storageKey=(a=f.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(s=f.global.headers)!==null&&s!==void 0?s:{},f.accessToken?(this.accessToken=f.accessToken,this.auth=new Proxy({},{get:(p,y)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(y)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((l=f.auth)!==null&&l!==void 0?l:{},this.headers,f.global.fetch),this.fetch=xQ(r,this._getAccessToken.bind(this),f.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},f.realtime)),this.rest=new vZ(new URL("rest/v1",o).href,{headers:this.headers,schema:f.db.schema,fetch:this.fetch}),this.storage=new iQ(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),f.accessToken||this._listenForAuthEvents()}get functions(){return new xZ(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t,r;if(this.accessToken)return await this.accessToken();const{data:n}=await this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:a,userStorage:s,storageKey:l,flowType:o,lock:c,debug:d,throwOnError:f},p,y){const g={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new SJ({url:this.authUrl.href,headers:Object.assign(Object.assign({},g),p),storageKey:l,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:a,userStorage:s,flowType:o,lock:c,debug:d,throwOnError:f,fetch:y,hasCustomAuthorizationHeader:Object.keys(this.headers).some(N=>N.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new LZ(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const CJ=(e,t,r)=>new jJ(e,t,r);function AJ(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}AJ()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const sF="https://uvaxkefgehiokxkvaqge.supabase.co",EJ="replace_with_real_anon_key_for_production",iF=sF.includes("placeholder");if(iF)throw new Error("PRODUCTION BUILD ERROR: Missing Supabase env. Set VITE_SUPABASE_URL and VITE_SUPABASE_ANON_KEY.");const Pt=CJ(sF,EJ,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0}}),TJ=Object.freeze(Object.defineProperty({__proto__:null,IS_OFFLINE:iF,supabase:Pt},Symbol.toStringTag,{value:"Module"})),kn=(e,t)=>({ok:!0,data:e,meta:t}),At=e=>{var t,r;try{typeof window<"u"&&((r=(t=import.meta)==null?void 0:t.env)!=null&&r.DEV)&&(window.__repoErrors=window.__repoErrors||[],window.__repoErrors.push(e),window.dispatchEvent(new CustomEvent("repo-error",{detail:e})))}catch{}return{ok:!1,error:e}};typeof window<"u"&&(window.__repoErrors=window.__repoErrors||[]);const OJ="audit_logs";let Sg=[],u1=null,PJ=10,IJ=2e3,GT=!1;function DJ({userId:e,input:t}){return{user_id:e,action:t.action,table_name:t.tableName??null,record_id:t.recordId??null,old_data:t.oldData?JSON.stringify(t.oldData):null,new_data:t.newData?JSON.stringify(t.newData):null,ip_address:t.ipAddress??null,user_agent:t.userAgent||(typeof navigator<"u"?navigator.userAgent:null)}}async function _6(){var t,r;if(Sg.length===0)return;const e=Sg;Sg=[];try{const n=e.map(DJ);await Pt.from(OJ).insert(n)}catch(n){(r=(t=import.meta)==null?void 0:t.env)!=null&&r.DEV&&console.warn("auditQueue flush failed",n)}}function MJ(){u1||(u1=setTimeout(async()=>{u1=null,await _6()},IJ))}function LJ(){if(GT||typeof window>"u")return;GT=!0;const e=()=>{_6()};window.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&e()}),window.addEventListener("beforeunload",e)}function RJ(e,t){if(LJ(),Sg.push({userId:e,input:t}),Sg.length>=PJ){_6(),u1&&(clearTimeout(u1),u1=null);return}MJ()}const FJ="audit_logs";async function Us(e,t){var r,n;try{RJ(e,t)}catch(a){(n=(r=import.meta)==null?void 0:r.env)!=null&&n.DEV&&console.warn("Audit log exception",a)}}async function BJ(e){try{const t=(e==null?void 0:e.pageSize)||(e==null?void 0:e.limit)||50,r=e!=null&&e.page&&e.page>0?e.page:1,n=(r-1)*t,a=n+t-1,s=e!=null&&e.includeUser?"audit_logs_with_user":FJ;let l=Pt.from(s).select("*",{count:"exact"}).order("created_at",{ascending:!1}).range(n,a);e!=null&&e.action&&(l=l.eq("action",e.action)),e!=null&&e.startDate&&(l=l.gte("created_at",e.startDate)),e!=null&&e.endDate&&(l=l.lte("created_at",e.endDate));const{data:o,error:c,count:d}=await l;return c?At({code:"supabase",message:"Khng th ti audit logs",cause:c}):kn(o||[],{total:d,page:r,pageSize:t})}catch(t){return At({code:"network",message:"Li mng khi ti audit logs",cause:t})}}const w_="cash_transactions";async function UJ(e){try{let t=Pt.from(w_).select("*").order("date",{ascending:!1});e!=null&&e.branchId&&(t=t.eq("branchId",e.branchId)),e!=null&&e.startDate&&(t=t.gte("date",e.startDate)),e!=null&&e.endDate&&(t=t.lte("date",e.endDate)),e!=null&&e.limit&&(t=t.limit(e.limit)),e!=null&&e.type&&(t=t.eq("type",e.type));const{data:r,error:n}=await t;return n?At({code:"supabase",message:"Khng th ti s qu",cause:n}):kn(r||[])}catch(t){return At({code:"network",message:"Li kt ni khi ti s qu",cause:t})}}async function k_(e){var t;try{if(!e.amount||e.amount<=0)return At({code:"validation",message:"S tin phi > 0"});if(!e.branchId)return At({code:"validation",message:"Thiu chi nhnh"});if(!e.paymentSourceId)return At({code:"validation",message:"Thiu ngun tin"});if(!e.type)return At({code:"validation",message:"Thiu loi thu/chi"});const r={amount:e.amount,branchId:e.branchId,paymentSource:e.paymentSourceId,paymentSourceId:e.paymentSourceId,category:e.category||(e.type==="income"?"general_income":"general_expense"),date:e.date||new Date().toISOString(),notes:e.notes,description:e.notes,type:e.type,saleId:e.saleId,workOrderId:e.workOrderId,payrollRecordId:e.payrollRecordId,loanPaymentId:e.loanPaymentId,supplierId:e.supplierId,customerId:e.customerId,recipient:e.recipient},{data:n,error:a}=await Pt.from(w_).insert([r]).select().single();if(a||!n)return At({code:"supabase",message:"Ghi s qu tht bi",cause:a});const s=n;try{if(!r.saleId&&!r.workOrderId&&!r.payrollRecordId&&!r.loanPaymentId){const{data:o}=await Pt.auth.getUser(),c=((t=o==null?void 0:o.user)==null?void 0:t.id)||null;Us(c,{action:"cash.manual",tableName:w_,recordId:s.id,oldData:null,newData:s})}}catch{}return kn(s)}catch(r){return At({code:"network",message:"Li kt ni khi ghi s qu",cause:r})}}const k4="payment_sources";async function N_(e,t,r){var n;try{const{data:a,error:s}=await Pt.from(k4).select("*").eq("id",e).single();if(s||!a)return At({code:"supabase",message:"Khng tm thy ngun tin",cause:s});const l=a.balance||{},o={...l,[t]:(l[t]||0)+r},{data:c,error:d}=await Pt.from(k4).update({balance:o}).eq("id",e).select().single();if(d||!c)return At({code:"supabase",message:"Cp nht s d tht bi",cause:d});let f=null;try{const{data:p}=await Pt.auth.getUser();f=((n=p==null?void 0:p.user)==null?void 0:n.id)||null}catch{}return await Us(f,{action:"payment_source.balance_adjust",tableName:k4,recordId:e,oldData:{balance:l},newData:{balance:o,delta:r,branchId:t}}),kn(c)}catch(a){return At({code:"network",message:"Li kt ni khi cp nht s d",cause:a})}}function va(e){switch(e.code){case"network":return"Mt kt ni my ch. Vui lng kim tra mng.";case"validation":return e.message;case"not_found":return"Khng tm thy bn ghi.";case"supabase":return"C li d liu. Th li hoc lin h qun tr.";default:return"Li khng xc nh."}}const lF=T.createContext(void 0),zJ=({children:e})=>{const[t]=T.useState("CN1"),n=(()=>{try{const Te=localStorage.getItem("motocare-data");if(Te)return JSON.parse(Te)}catch(Te){console.error("Error loading from localStorage:",Te)}return{}})(),[a,s]=T.useState(()=>(n==null?void 0:n.parts)||[]),[l,o]=T.useState(()=>(n==null?void 0:n.customers)||[]),[c,d]=T.useState(()=>(n==null?void 0:n.suppliers)||[]),[f,p]=T.useState(()=>(n==null?void 0:n.sales)||[]),[y,g]=T.useState(()=>(n==null?void 0:n.workOrders)||[]),[N,w]=T.useState(()=>(n==null?void 0:n.cartItems)||[]),[k,S]=T.useState(()=>(n==null?void 0:n.paymentSources)||[{id:"cash",name:"Tin mt",balance:{CN1:0},isDefault:!0},{id:"bank",name:"Ti khon ngn hng",balance:{CN1:0}}]),[O,E]=T.useState(()=>(n==null?void 0:n.cashTransactions)||[]),[D,H]=T.useState(()=>(n==null?void 0:n.inventoryTransactions)||[]),[W,R]=T.useState(()=>(n==null?void 0:n.employees)||[]),[z,U]=T.useState(()=>(n==null?void 0:n.payrollRecords)||[]),[Z,q]=T.useState(()=>(n==null?void 0:n.loans)||[]),[K,Q]=T.useState(()=>(n==null?void 0:n.loanPayments)||[]),[re,ae]=T.useState(()=>(n==null?void 0:n.customerDebts)||[]),[de,he]=T.useState(()=>(n==null?void 0:n.supplierDebts)||[]);T.useEffect(()=>{const Te={parts:a,customers:l,suppliers:c,sales:f,workOrders:y,cartItems:N,paymentSources:k,cashTransactions:O,inventoryTransactions:D,employees:W,payrollRecords:z,loans:Z,loanPayments:K,customerDebts:re,supplierDebts:de};localStorage.setItem("motocare-data",JSON.stringify(Te))},[a,l,c,f,y,N,k,O,D,W,z,Z,K,re,de]);const Se=T.useCallback(Te=>{s(De=>{if(Te.id)return De.map(st=>st.id===Te.id?{...st,...Te}:st);const ye=`PART-${Date.now()}-${Math.random().toString(16).slice(2)}`;return[{id:ye,name:Te.name||"Tn ph tng",sku:Te.sku||ye,stock:Te.stock||{[t]:0},retailPrice:Te.retailPrice||{[t]:0},wholesalePrice:Te.wholesalePrice||{[t]:0},category:Te.category,description:Te.description,warrantyPeriod:Te.warrantyPeriod,created_at:new Date().toISOString()},...De]})},[t]),ke=T.useCallback(Te=>{s(De=>De.filter(ye=>ye.id!==Te))},[]),Le=T.useCallback(Te=>{o(De=>Te.id?De.findIndex(et=>et.id===Te.id)>=0?De.map(et=>et.id===Te.id?{...et,...Te}:et):[{id:Te.id,name:Te.name||"Khch hng",phone:Te.phone,created_at:new Date().toISOString(),...Te},...De]:[{id:`CUS-${Date.now()}-${Math.random().toString(16).slice(2)}`,name:Te.name||"Khch hng",phone:Te.phone,created_at:new Date().toISOString(),...Te},...De])},[]),fe=T.useCallback(Te=>{d(De=>Te.id?De.map(st=>st.id===Te.id?{...st,...Te}:st):[{id:`SUP-${Date.now()}-${Math.random().toString(16).slice(2)}`,name:Te.name||"Nh cung cp",phone:Te.phone,email:Te.email,address:Te.address,created_at:new Date().toISOString()},...De])},[]),F=T.useCallback(Te=>{g(De=>De.find(rt=>rt.id===Te.id)?De.map(rt=>rt.id===Te.id?Te:rt):[Te,...De])},[]),te=T.useCallback(()=>w([]),[]),Y=T.useCallback(Te=>{if(!Te.items.length)return;const De=Te.items.reduce((Ve,Vt)=>Ve+Vt.sellingPrice*Vt.quantity,0),ye=Te.items.reduce((Ve,Vt)=>Ve+(Vt.discount||0),0),rt=De-ye-Te.discount,st=`SALE-${Date.now()}`,dt={id:st,date:new Date().toISOString(),items:Te.items,subtotal:De,discount:Te.discount+ye,total:rt,customer:Te.customer,paymentMethod:Te.paymentMethod,userId:"local-user",userName:"Local User",branchId:t,cashTransactionId:void 0};p(Ve=>[dt,...Ve]),s(Ve=>Ve.map(Vt=>{const Mt=Te.items.filter(mr=>mr.partId===Vt.id).reduce((mr,xr)=>mr+xr.quantity,0);return Mt?{...Vt,stock:{...Vt.stock,[t]:(Vt.stock[t]||0)-Mt}}:Vt}));const lt={id:`CT-${Date.now()}`,type:"income",date:new Date().toISOString(),amount:rt,notes:Te.note||"Thu tin bn hng",paymentSourceId:Te.paymentMethod,branchId:t,category:"sale_income",saleId:st};E(Ve=>[lt,...Ve]),S(Ve=>Ve.map(Vt=>Vt.id===Te.paymentMethod?{...Vt,balance:{...Vt.balance,[t]:(Vt.balance[t]||0)+rt}}:Vt)),te()},[te,t]),ne=T.useCallback(Te=>{const De=f.find(ye=>ye.id===Te);De&&(p(ye=>ye.filter(rt=>rt.id!==Te)),s(ye=>ye.map(rt=>{const st=De.items.filter(dt=>dt.partId===rt.id).reduce((dt,et)=>dt+et.quantity,0);return st?{...rt,stock:{...rt.stock,[t]:(rt.stock[t]||0)+st}}:rt})),E(ye=>ye.filter(rt=>rt.saleId!==Te)),S(ye=>ye.map(rt=>rt.id===De.paymentMethod?{...rt,balance:{...rt.balance,[t]:(rt.balance[t]||0)-De.total}}:rt)))},[f,t]),ee=T.useCallback(Te=>{const ye={id:`INV-${Date.now()}-${Math.random().toString(16).slice(2)}`,...Te};H(rt=>[ye,...rt])},[]),Ce=T.useCallback(Te=>{R(De=>Te.id?De.map(st=>st.id===Te.id?{...st,...Te}:st):[{id:`EMP-${Date.now()}-${Math.random().toString(16).slice(2)}`,name:Te.name||"Nhn vin",phone:Te.phone,position:Te.position||"",baseSalary:Te.baseSalary||0,startDate:Te.startDate||new Date().toISOString(),status:Te.status||"active",created_at:new Date().toISOString()},...De])},[]),me=T.useCallback(Te=>{U(De=>De.find(rt=>rt.id===Te.id)?De.map(rt=>rt.id===Te.id?Te:rt):[Te,...De])},[]),se=T.useCallback(Te=>{q(De=>Te.id?De.map(st=>st.id===Te.id?{...st,...Te}:st):[{id:`LOAN-${Date.now()}-${Math.random().toString(16).slice(2)}`,lenderName:Te.lenderName||"",loanType:Te.loanType||"bank",principal:Te.principal||0,interestRate:Te.interestRate||0,term:Te.term||0,startDate:Te.startDate||new Date().toISOString(),endDate:Te.endDate||new Date().toISOString(),monthlyPayment:Te.monthlyPayment||0,remainingAmount:Te.remainingAmount||Te.principal||0,status:Te.status||"active",purpose:Te.purpose,collateral:Te.collateral,branchId:t,created_at:new Date().toISOString()},...De])},[t]),je=T.useCallback(Te=>{Q(De=>De.find(rt=>rt.id===Te.id)?De.map(rt=>rt.id===Te.id?Te:rt):[Te,...De])},[]),be=T.useCallback((Te,De,ye)=>{let rt=0;ae(st=>st.map(dt=>{if(Te.includes(dt.customerId)&&dt.branchId===t){const et=dt.remainingAmount;return rt+=et,{...dt,paidAmount:dt.totalAmount,remainingAmount:0,status:"paid"}}return dt}).filter(dt=>dt.remainingAmount>0)),rt>0&&(async()=>{var Ve;const{data:st}=await Pt.auth.getUser(),dt=((Ve=st==null?void 0:st.user)==null?void 0:Ve.id)||null,et=await k_({type:"income",amount:rt,branchId:t,paymentSourceId:De,date:ye,category:"debt_collection",notes:`Thu ht n cho ${Te.length} khch hng`,recipient:`Thu n ${Te.length} khch hng`});if(!et.ok){Ye.error(va(et.error));return}const lt=await N_(De,t,rt);lt.ok||Ye.error(va(lt.error)),Us(dt,{action:"debt.customer_pay",tableName:"customer_debts",oldData:null,newData:{customerIds:Te,totalPaid:rt,paymentMethod:De,timestamp:ye}})})()},[t]),ie=T.useCallback((Te,De,ye)=>{let rt=0;he(st=>st.map(dt=>{if(Te.includes(dt.supplierId)&&dt.branchId===t){const et=dt.remainingAmount;return rt+=et,{...dt,paidAmount:dt.totalAmount,remainingAmount:0,status:"paid"}}return dt}).filter(dt=>dt.remainingAmount>0)),rt>0&&(async()=>{var Ve;const{data:st}=await Pt.auth.getUser(),dt=((Ve=st==null?void 0:st.user)==null?void 0:Ve.id)||null,et=await k_({type:"expense",amount:rt,branchId:t,paymentSourceId:De,date:ye,category:"debt_payment",notes:`Tr ht n cho ${Te.length} nh cung cp`,recipient:`Tr n ${Te.length} nh cung cp`});if(!et.ok){Ye.error(va(et.error));return}const lt=await N_(De,t,-rt);lt.ok||Ye.error(va(lt.error)),Us(dt,{action:"debt.supplier_pay",tableName:"supplier_debts",oldData:null,newData:{supplierIds:Te,totalPaid:rt,paymentMethod:De,timestamp:ye}})})()},[t]);return i.jsx(lF.Provider,{value:{parts:a,customers:l,suppliers:c,sales:f,workOrders:y,cartItems:N,paymentSources:k,cashTransactions:O,inventoryTransactions:D,employees:W,payrollRecords:z,loans:Z,loanPayments:K,customerDebts:re,supplierDebts:de,currentBranchId:t,setParts:s,upsertPart:Se,deletePart:ke,setCustomers:o,upsertCustomer:Le,setSuppliers:d,upsertSupplier:fe,setWorkOrders:g,upsertWorkOrder:F,setCartItems:w,clearCart:te,deleteSale:ne,finalizeSale:Y,setPaymentSources:S,setCashTransactions:E,recordInventoryTransaction:ee,setEmployees:R,upsertEmployee:Ce,setPayrollRecords:U,upsertPayrollRecord:me,setLoans:q,upsertLoan:se,setLoanPayments:Q,upsertLoanPayment:je,setCustomerDebts:ae,setSupplierDebts:he,payCustomerDebts:be,paySupplierDebts:ie},children:e})},Ua=()=>{const e=T.useContext(lF);if(!e)throw new Error("useAppContext phi dng bn trong AppProvider");return e},oF=T.createContext(void 0),qJ=({children:e})=>{const[t,r]=T.useState(()=>{const a=localStorage.getItem("theme");return a==="light"||a==="dark"?a:"light"});T.useEffect(()=>{localStorage.setItem("theme",t),t==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[t]);const n=()=>{r(a=>a==="light"?"dark":"light")};return i.jsx(oF.Provider,{value:{theme:t,toggleTheme:n},children:e})},HJ=()=>{const e=T.useContext(oF);if(!e)throw new Error("useTheme must be used within ThemeProvider");return e},cF=T.createContext(void 0),Ic=()=>{const e=T.useContext(cF);if(!e)throw new Error("useAuth must be used within AuthProvider");return e},dF=({children:e})=>{const[t,r]=T.useState(null),[n,a]=T.useState(null),[s,l]=T.useState(null),[o,c]=T.useState(!0),[d,f]=T.useState(null);T.useEffect(()=>{Pt.auth.getSession().then(({data:{session:O}})=>{l(O),r((O==null?void 0:O.user)??null),O!=null&&O.user?p(O.user.id):c(!1)});const k=async(O,E)=>{l(E),r((E==null?void 0:E.user)??null),E!=null&&E.user?p(E.user.id):(a(null),c(!1))},{data:{subscription:S}}=Pt.auth.onAuthStateChange(k);return()=>S.unsubscribe()},[]);const p=async k=>{try{let{data:S,error:O}=await Pt.from("profiles").select("*").eq("id",k).maybeSingle();if(O&&O.code!=="PGRST116")throw O;if(!S){const E=await Pt.from("user_profiles").select("*").eq("id",k).maybeSingle();if(S=E.data,O=E.error,O&&O.code!=="PGRST116")throw O}if(O)throw O;a(S||null)}catch(S){console.error("Error loading user profile:",S),a(null),f("Khng th ti h s ngi dng")}finally{c(!1)}},w={user:t,profile:n,session:s,loading:o,error:d,signIn:async(k,S)=>{var H;const{error:O,data:E}=await Pt.auth.signInWithPassword({email:k,password:S});if(O)throw O;f(null);const D=((H=E==null?void 0:E.user)==null?void 0:H.id)||null;Us(D,{action:"auth.login"})},signOut:async()=>{const k=(t==null?void 0:t.id)||null,{error:S}=await Pt.auth.signOut();if(S)throw S;f(null),Us(k,{action:"auth.logout"})},hasRole:k=>n?k.includes(n.role):!1};return i.jsx(cF.Provider,{value:w,children:e})},$J=Object.freeze(Object.defineProperty({__proto__:null,AuthProvider:dF,useAuth:Ic},Symbol.toStringTag,{value:"Module"})),VJ=()=>{const e=Pw(),{signIn:t}=Ic(),[r,n]=T.useState(""),[a,s]=T.useState(""),[l,o]=T.useState(!1),[c,d]=T.useState(""),f=async p=>{p.preventDefault(),d(""),o(!0);try{await t(r,a),Ye.success("ng nhp thnh cng!"),e("/dashboard")}catch(y){console.error("Login error:",y);const g=y.message||"ng nhp tht bi";d(g),Ye.error(g)}finally{o(!1)}};return i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-900 dark:to-slate-800 flex items-center justify-center p-4",children:i.jsxs("div",{className:"w-full max-w-md",children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-white dark:bg-slate-800 rounded-2xl mb-4 shadow-lg ring-1 ring-slate-200 dark:ring-slate-700 overflow-hidden",children:i.jsx("img",{src:"/logo-smartcare.png",alt:"Nhn-Lm SmartCare",className:"w-full h-full object-contain p-1.5",onError:p=>{const y=p.currentTarget;y.style.display="none";const g=y.parentElement;if(g){g.innerHTML="";const N=document.createElement("span");N.className="text-blue-600 dark:text-blue-400",g.appendChild(N)}}})}),i.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-white mb-2",children:"MotoCare"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"H thng qun l ca hng xe my"})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-xl border border-slate-200 dark:border-slate-700 p-8",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white mb-6",children:"ng nhp"}),c&&i.jsx("div",{className:"mb-4 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:i.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:c})}),i.jsxs("form",{onSubmit:f,className:"space-y-5",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Email"}),i.jsx("input",{type:"email",value:r,onChange:p=>n(p.target.value),placeholder:"your@email.com",required:!0,className:"w-full px-4 py-3 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white placeholder-slate-400 dark:placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Mt khu"}),i.jsx("input",{type:"password",value:a,onChange:p=>s(p.target.value),placeholder:"",required:!0,className:"w-full px-4 py-3 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white placeholder-slate-400 dark:placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"})]}),i.jsxs("div",{className:"flex items-center justify-between text-sm",children:[i.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[i.jsx("input",{type:"checkbox",className:"w-4 h-4 text-blue-600 border-slate-300 dark:border-slate-600 rounded focus:ring-2 focus:ring-blue-500"}),i.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Ghi nh ng nhp"})]}),i.jsx("a",{href:"#",className:"text-blue-600 dark:text-blue-400 hover:underline",children:"Qun mt khu?"})]}),i.jsx("button",{type:"submit",disabled:l,className:"w-full py-3 bg-blue-600 hover:bg-blue-700 disabled:bg-slate-400 text-white font-semibold rounded-lg transition-colors shadow-lg hover:shadow-xl disabled:cursor-not-allowed",children:l?i.jsxs("span",{className:"flex items-center justify-center gap-2",children:[i.jsxs("svg",{className:"animate-spin h-5 w-5",viewBox:"0 0 24 24",fill:"none",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"ang ng nhp..."]}):"ng nhp"})]})]}),i.jsx("div",{className:"text-center mt-6",children:i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:" 2025 MotoCare. Phin bn 1.0.0"})})]})})};/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WJ=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),uF=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim();/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var KJ={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GJ=T.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:a="",children:s,iconNode:l,...o},c)=>T.createElement("svg",{ref:c,...KJ,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:uF("lucide",a),...o},[...l.map(([d,f])=>T.createElement(d,f)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yr=(e,t)=>{const r=T.forwardRef(({className:n,...a},s)=>T.createElement(GJ,{ref:s,iconNode:t,className:uF(`lucide-${WJ(e)}`,n),...a}));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XJ=yr("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XT=yr("BadgePercent",[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"M9 9h.01",key:"1q5me6"}],["path",{d:"M15 15h.01",key:"lqbp3k"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hF=yr("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S6=yr("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YJ=yr("Battery",[["rect",{width:"16",height:"10",x:"2",y:"7",rx:"2",ry:"2",key:"1w10f2"}],["line",{x1:"22",x2:"22",y1:"11",y2:"13",key:"4dh1rd"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZJ=yr("Bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j6=yr("Bike",[["circle",{cx:"18.5",cy:"17.5",r:"3.5",key:"15x4ox"}],["circle",{cx:"5.5",cy:"17.5",r:"3.5",key:"1noe27"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["path",{d:"M12 17.5V14l-3-3 4-3 2 3h2",key:"1npguv"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QJ=yr("Bolt",[["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}],["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gl=yr("Boxes",[["path",{d:"M2.97 12.92A2 2 0 0 0 2 14.63v3.24a2 2 0 0 0 .97 1.71l3 1.8a2 2 0 0 0 2.06 0L12 19v-5.5l-5-3-4.03 2.42Z",key:"lc1i9w"}],["path",{d:"m7 16.5-4.74-2.85",key:"1o9zyk"}],["path",{d:"m7 16.5 5-3",key:"va8pkn"}],["path",{d:"M7 16.5v5.17",key:"jnp8gn"}],["path",{d:"M12 13.5V19l3.97 2.38a2 2 0 0 0 2.06 0l3-1.8a2 2 0 0 0 .97-1.71v-3.24a2 2 0 0 0-.97-1.71L17 10.5l-5 3Z",key:"8zsnat"}],["path",{d:"m17 16.5-5-3",key:"8arw3v"}],["path",{d:"m17 16.5 4.74-2.85",key:"8rfmw"}],["path",{d:"M17 16.5v5.17",key:"k6z78m"}],["path",{d:"M7.97 4.42A2 2 0 0 0 7 6.13v4.37l5 3 5-3V6.13a2 2 0 0 0-.97-1.71l-3-1.8a2 2 0 0 0-2.06 0l-3 1.8Z",key:"1xygjf"}],["path",{d:"M12 8 7.26 5.15",key:"1vbdud"}],["path",{d:"m12 8 4.74-2.85",key:"3rx089"}],["path",{d:"M12 13.5V8",key:"1io7kd"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jm=yr("BriefcaseBusiness",[["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M16 6V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v2",key:"1ksdt3"}],["path",{d:"M22 13a18.15 18.15 0 0 1-20 0",key:"12hx5q"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JJ=yr("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eee=yr("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N4=yr("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tee=yr("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ree=yr("Car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $g=yr("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nee=yr("ChartLine",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const by=yr("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __=yr("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YT=yr("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aee=yr("CircleDollarSign",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 18V6",key:"zqpxq5"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const see=yr("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C6=yr("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vy=yr("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iee=yr("CloudDownload",[["path",{d:"M12 13v8l-4-4",key:"1f5nwf"}],["path",{d:"m12 21 4-4",key:"1lfcce"}],["path",{d:"M4.393 15.269A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.436 8.284",key:"ui1hmy"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lee=yr("CloudUpload",[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oee=yr("Cog",[["path",{d:"M12 20a8 8 0 1 0 0-16 8 8 0 0 0 0 16Z",key:"sobvz5"}],["path",{d:"M12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z",key:"11i496"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 22v-2",key:"1osdcq"}],["path",{d:"m17 20.66-1-1.73",key:"eq3orb"}],["path",{d:"M11 10.27 7 3.34",key:"16pf9h"}],["path",{d:"m20.66 17-1.73-1",key:"sg0v6f"}],["path",{d:"m3.34 7 1.73 1",key:"1ulond"}],["path",{d:"M14 12h8",key:"4f43i9"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"m20.66 7-1.73 1",key:"1ow05n"}],["path",{d:"m3.34 17 1.73-1",key:"nuk764"}],["path",{d:"m17 3.34-1 1.73",key:"2wel8s"}],["path",{d:"m11 13.73-4 6.93",key:"794ttg"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fF=yr("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZT=yr("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cee=yr("Disc",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C0=yr("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QT=yr("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JT=yr("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dee=yr("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e7=yr("FileSpreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dd=yr("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uee=yr("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hee=yr("Hammer",[["path",{d:"m15 12-8.373 8.373a1 1 0 1 1-3-3L12 9",key:"eefl8a"}],["path",{d:"m18 15 4-4",key:"16gjal"}],["path",{d:"m21.5 11.5-1.914-1.914A2 2 0 0 1 19 8.172V7l-2.26-2.26a6 6 0 0 0-4.202-1.756L9 2.96l.92.82A6.18 6.18 0 0 1 12 8.4V10l2 2h1.172a2 2 0 0 1 1.414.586L18.5 14.5",key:"b7pghm"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vg=yr("HandCoins",[["path",{d:"M11 15h2a2 2 0 1 0 0-4h-3c-.6 0-1.1.2-1.4.6L3 17",key:"geh8rc"}],["path",{d:"m7 21 1.6-1.4c.3-.4.8-.6 1.4-.6h4c1.1 0 2.1-.4 2.8-1.2l4.6-4.4a2 2 0 0 0-2.75-2.91l-4.2 3.9",key:"1fto5m"}],["path",{d:"m2 16 6 6",key:"1pfhp9"}],["circle",{cx:"16",cy:"9",r:"2.9",key:"1n0dlu"}],["circle",{cx:"6",cy:"5",r:"3",key:"151irh"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S_=yr("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fee=yr("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t7=yr("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r7=yr("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wg=yr("Landmark",[["line",{x1:"3",x2:"21",y1:"22",y2:"22",key:"j8o0r"}],["line",{x1:"6",x2:"6",y1:"18",y2:"11",key:"10tf0k"}],["line",{x1:"10",x2:"10",y1:"18",y2:"11",key:"54lgf6"}],["line",{x1:"14",x2:"14",y1:"18",y2:"11",key:"380y"}],["line",{x1:"18",x2:"18",y1:"18",y2:"11",key:"1kevvc"}],["polygon",{points:"12 2 20 7 4 7",key:"jkujk7"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j_=yr("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mee=yr("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xee=yr("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mF=yr("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pee=yr("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gee=yr("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n7=yr("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bee=yr("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vee=yr("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yee=yr("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wee=yr("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a7=yr("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zf=yr("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xF=yr("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pF=yr("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s7=yr("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gF=yr("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kee=yr("PiggyBank",[["path",{d:"M19 5c-1.5 0-2.8 1.4-3 2-3.5-1.5-11-.3-11 5 0 1.8 0 3 2 4.5V20h4v-2h3v2h4v-4c1-.5 1.7-1 2-2h2v-4h-2c0-1-.5-1.5-1-2V5z",key:"1ivx2i"}],["path",{d:"M2 9v1c0 1.1.9 2 2 2h1",key:"nm575m"}],["path",{d:"M16 11h.01",key:"xkw8gn"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const od=yr("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kg=yr("Printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nee=yr("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _ee=yr("RefreshCcw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i7=yr("Repeat",[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C_=yr("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const See=yr("ScanLine",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M7 12h10",key:"b7w52i"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ou=yr("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gg=yr("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jee=yr("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qf=yr("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l7=yr("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o7=yr("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cee=yr("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12a2 2 0 0 1-2-2V7",key:"6c3vgh"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c7=yr("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d7=yr("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xg=yr("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R1=yr("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bF=yr("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aee=yr("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eee=yr("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tee=yr("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u7=yr("UserCog",[["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m21.7 16.4-.9-.3",key:"12j9ji"}],["path",{d:"m15.2 13.9-.9-.3",key:"1fdjdi"}],["path",{d:"m16.6 18.7.3-.9",key:"heedtr"}],["path",{d:"m19.1 12.2.3-.9",key:"1af3ki"}],["path",{d:"m19.6 18.7-.4-1",key:"1x9vze"}],["path",{d:"m16.8 12.3-.4-1",key:"vqeiwj"}],["path",{d:"m14.3 16.6 1-.4",key:"1qlj63"}],["path",{d:"m20.7 13.8 1-.4",key:"1v5t8k"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h7=yr("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tf=yr("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hm=yr("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cm=yr("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _0=yr("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),vF=({size:e="md",color:t="blue",text:r})=>{const n={sm:"w-4 h-4 border-2",md:"w-8 h-8 border-3",lg:"w-12 h-12 border-4"},a={blue:"border-blue-200 dark:border-blue-900 border-t-blue-600 dark:border-t-blue-400",white:"border-white/30 border-t-white",slate:"border-slate-200 dark:border-slate-700 border-t-slate-600 dark:border-t-slate-400"};return i.jsxs("div",{className:"flex flex-col items-center justify-center gap-3",children:[i.jsx("div",{className:`${n[e]} ${a[t]} rounded-full animate-spin`}),r&&i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 animate-pulse",children:r})]})},Nu=({children:e,requiredRoles:t})=>{const{user:r,profile:n,loading:a,error:s}=Ic();return s&&Ye.error(s),a||r&&!n?i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-50 dark:bg-slate-900",children:i.jsx(vF,{})}):r?t&&n&&!t.includes(n.role)?i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-50 dark:bg-slate-900",children:i.jsxs("div",{className:"text-center",children:[i.jsxs("h1",{className:"text-4xl font-bold text-slate-900 dark:text-white mb-4 flex items-center justify-center gap-3",children:[i.jsx(hF,{className:"w-8 h-8 text-red-600 dark:text-red-400"}),"Khng c quyn truy cp"]}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400 mb-6",children:"Bn khng c quyn truy cp trang ny."}),i.jsx("button",{onClick:()=>window.history.back(),className:"px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-semibold",children:"Quay li"})]})}):i.jsx(i.Fragment,{children:e}):i.jsx(zL,{to:"/login",replace:!0})};function yF(){const e="ABCDEFGHJKLMNPQRSTUVWXYZ23456789";let t="";for(let r=0;r<8;r++){const n=Math.floor(Math.random()*e.length);t+=e[n]}return t}function Oee(e){return/^[A-Z0-9]{8}$/.test(e)}const Ru="parts";async function Pee(){try{const{data:e,error:t}=await Pt.from(Ru).select("*").order("name");return t?At({code:"supabase",message:"Khng th ti danh sch ph tng",cause:t}):kn(e||[])}catch(e){return At({code:"network",message:"Li kt ni ti my ch",cause:e})}}async function Iee(e){try{const t=e!=null&&e.pageSize&&e.pageSize>0?e.pageSize:50,r=e!=null&&e.page&&e.page>0?e.page:1,n=(r-1)*t,a=n+t-1;let s=Pt.from(Ru).select("*",{count:"exact"}).order("name").range(n,a);if(e!=null&&e.category&&e.category!=="all"&&(s=s.eq("category",e.category)),e!=null&&e.search&&e.search.trim()){const d=e.search.trim();s=s.or(`name.ilike.%${d}%,sku.ilike.%${d}%`)}const{data:l,error:o,count:c}=await s;return o?At({code:"supabase",message:"Khng th ti danh sch ph tng (phn trang)",cause:o}):kn(l||[],{total:c,page:r,pageSize:t})}catch(t){return At({code:"network",message:"Li kt ni ti my ch khi ti ph tng (phn trang)",cause:t})}}async function Dee(e){var t;try{if(!e.name)return At({code:"validation",message:"Thiu tn ph tng"});const r=e.sku||yF(),n={id:typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():`${Math.random().toString(36).slice(2)}-${Date.now()}`,name:e.name,sku:r,stock:e.stock||{CN1:0},retailPrice:e.retailPrice||{CN1:0},wholesalePrice:e.wholesalePrice||{CN1:0},category:e.category,description:e.description,warrantyPeriod:e.warrantyPeriod},{data:a,error:s}=await Pt.from(Ru).insert([n]).select().single();if(s||!a){const o=(s==null?void 0:s.message)||(s==null?void 0:s.details)||"To ph tng tht bi";return At({code:"supabase",message:o,cause:s})}let l=null;try{const{data:o}=await Pt.auth.getUser();l=((t=o==null?void 0:o.user)==null?void 0:t.id)||null}catch{}return await Us(l,{action:"part.create",tableName:Ru,recordId:a.id,oldData:null,newData:a}),kn(a)}catch(r){return At({code:"network",message:"Li kt ni khi to ph tng",cause:r})}}async function Mee(e,t){var r;try{const{data:n,error:a}=await Pt.from(Ru).select("*").eq("id",e).single();if(a||!n)return At({code:"supabase",message:"Khng tm thy ph tng  cp nht",cause:a});const{data:s,error:l}=await Pt.from(Ru).update(t).eq("id",e).select().single();if(l||!s)return At({code:"supabase",message:"Cp nht ph tng tht bi",cause:l});let o=null;try{const{data:c}=await Pt.auth.getUser();o=((r=c==null?void 0:c.user)==null?void 0:r.id)||null}catch{}return await Us(o,{action:"part.update",tableName:Ru,recordId:e,oldData:n,newData:s}),kn(s)}catch(n){return At({code:"network",message:"Li kt ni khi cp nht ph tng",cause:n})}}async function Lee(e){var t;try{const{data:r,error:n}=await Pt.from(Ru).select("*").eq("id",e).single();if(n||!r)return At({code:"supabase",message:"Khng tm thy ph tng  xa",cause:n});const{error:a}=await Pt.from(Ru).delete().eq("id",e);if(a)return At({code:"supabase",message:"Xa ph tng tht bi",cause:a});let s=null;try{const{data:l}=await Pt.auth.getUser();s=((t=l==null?void 0:l.user)==null?void 0:t.id)||null}catch{}return await Us(s,{action:"part.delete",tableName:Ru,recordId:e,oldData:r,newData:null}),kn({id:e})}catch(r){return At({code:"network",message:"Li kt ni khi xa ph tng",cause:r})}}const A_="inventory_transactions";async function Ree(e){try{let t=Pt.from(A_).select("id,type,partId,partName,quantity,date,unitPrice,totalPrice,branchId,notes,saleId,workOrderId,created_at").order("created_at",{ascending:!1});e!=null&&e.branchId&&(t=t.eq("branchId",e.branchId)),e!=null&&e.startDate&&(t=t.gte("date",e.startDate)),e!=null&&e.endDate&&(t=t.lte("date",e.endDate)),e!=null&&e.limit&&(t=t.limit(e.limit));const{data:r,error:n}=await t;return n?At({code:"supabase",message:(n==null?void 0:n.message)||(n==null?void 0:n.details)||"Khng th ti lch s kho",cause:n}):kn(r||[])}catch(t){return At({code:"network",message:"Li kt ni khi ti lch s kho",cause:t})}}async function Fee(e){var t;try{if(!e.partId||!e.partName)return At({code:"validation",message:"Thiu thng tin ph tng"});if(!e.quantity||e.quantity<=0)return At({code:"validation",message:"S lng phi > 0"});if(!e.branchId)return At({code:"validation",message:"Thiu chi nhnh"});if(!e.type)return At({code:"validation",message:"Thiu loi giao dch kho"});const r=e.unitPrice??0,n=e.totalPrice??r*e.quantity,a={id:typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():`${Math.random().toString(36).slice(2)}-${Date.now()}`,type:e.type,partId:e.partId,partName:e.partName,quantity:e.quantity,date:e.date||new Date().toISOString(),unitPrice:r||null,totalPrice:n,branchId:e.branchId,notes:e.notes,saleId:e.saleId,workOrderId:e.workOrderId},{data:s,error:l}=await Pt.from(A_).insert([a]).select().single();if(l||!s)return At({code:"supabase",message:(l==null?void 0:l.message)||(l==null?void 0:l.details)||"Ghi lch s kho tht bi",cause:l});let o=null;try{const{data:c}=await Pt.auth.getUser();o=((t=c==null?void 0:c.user)==null?void 0:t.id)||null}catch{}return await Us(o,{action:e.type==="Nhp kho"?"inventory.receipt":"inventory.adjust",tableName:A_,recordId:s.id,oldData:null,newData:s}),kn(s)}catch(r){return At({code:"network",message:"Li kt ni khi ghi lch s kho",cause:r})}}async function Bee(e,t,r,n,a){try{const{data:s,error:l}=await Pt.rpc("receipt_create_atomic",{p_items:e,p_supplier_id:t,p_branch_id:r,p_user_id:n,p_notes:a});return l?At({code:"supabase",message:l.message,cause:l}):s&&!s.success?At({code:"validation",message:s.message}):kn(s)}catch(s){return At({code:"network",message:"Li kt ni khi to phiu nhp",cause:s})}}function Uee(){const e=qn();return ha({mutationFn:async t=>{const r=await Bee(t.items,t.supplierId,t.branchId,t.userId,t.notes);if(!r.ok)throw r.error;return r.data},onSuccess:()=>{e.invalidateQueries({queryKey:["inventoryTransactions"]}),e.invalidateQueries({queryKey:["inventoryTxRepo"]}),e.invalidateQueries({queryKey:["partsRepo"]}),e.invalidateQueries({queryKey:["partsRepoPaged"]})}})}const Bw="sales";async function wF(){try{const{data:e,error:t}=await Pt.from(Bw).select("*").order("date",{ascending:!1});if(t)return At({code:"supabase",message:"Khng th ti danh sch ha n",cause:t});const r=(e||[]).map(n=>({...n,userName:n.username||"N/A",paymentMethod:n.paymentmethod||n.paymentMethod||"cash",userId:n.userid||n.userId,branchId:n.branchid||n.branchId}));return kn(r)}catch(e){return At({code:"network",message:"Li kt ni ti my ch",cause:e})}}async function kF(e){const{branchId:t,fromDate:r,toDate:n,page:a=1,pageSize:s=20,search:l,status:o,paymentMethod:c,mode:d="offset",afterDate:f,afterId:p}=e||{};try{let y=Pt.from(Bw).select("*",{count:"exact"}).order("date",{ascending:!1});if(t&&(y=y.eq("branchid",t)),r&&(y=y.gte("date",r)),n&&(y=y.lte("date",n)),l){const N=l.replace(/[%_]/g,"");y=y.or(`id.ilike.%${N}%,customer->>name.ilike.%${N}%,sale_code.ilike.%${N}%`)}c&&(y=y.eq("paymentmethod",c)),o&&(o==="cancelled"||o==="refunded"?y=y.eq("refunded",!0):o==="completed"&&(y=y.or("refunded.is.null,refunded.eq.false")));let g={};if(d==="keyset"){f&&(p?y=y.or(`date.lt.${f},and(date.eq.${f},id.lt.${p})`):y=y.lt("date",f)),y=y.limit(s);const{data:N,error:w}=await y;if(w)return At({code:"supabase",message:"Khng th ti danh sch ha n (keyset)",cause:w});const S=(N||[]).map(O=>({...O,userName:O.username||"N/A",paymentMethod:O.paymentmethod||O.paymentMethod||"cash",userId:O.userid||O.userId,branchId:O.branchid||O.branchId}));return g={mode:"keyset",pageSize:s,hasMore:S.length===s,nextAfterDate:S.length?S[S.length-1].date:void 0,nextAfterId:S.length?S[S.length-1].id:void 0},kn(S,g)}else{const N=(a-1)*s,w=N+s-1;y=y.range(N,w);const{data:k,error:S,count:O}=await y;if(S)return At({code:"supabase",message:"Khng th ti danh sch ha n (phn trang)",cause:S});const E=(k||[]).map(W=>({...W,userName:W.username||"N/A",paymentMethod:W.paymentmethod||W.paymentMethod||"cash",userId:W.userid||W.userId,branchId:W.branchid||W.branchId})),D=O||0,H=Math.max(1,Math.ceil(D/s));return g={mode:"offset",page:a,pageSize:s,total:D,totalPages:H,hasMore:a<H},kn(E,g)}}catch(y){return At({code:"network",message:"Li kt ni khi ti ha n (phn trang)",cause:y})}}async function NF(e){var t;try{if(!e.items||!e.items.length)return At({code:"validation",message:"Thiu danh sch hng ha"});if(!e.paymentMethod)return At({code:"validation",message:"Thiu phng thc thanh ton"});if(!e.id)return At({code:"validation",message:"Thiu ID ha n"});const r={p_sale_id:e.id,p_items:e.items,p_discount:e.discount??0,p_customer:e.customer??{name:"Khch l"},p_payment_method:e.paymentMethod,p_user_id:e.userId||"unknown",p_user_name:e.userName||"Unknown",p_branch_id:e.branchId||"CN1"},{data:n,error:a}=await Pt.rpc("sale_create_atomic",r);if(a||!n){const d=(a==null?void 0:a.details)||(a==null?void 0:a.message)||"",f=d.toUpperCase();if(f.includes("INSUFFICIENT_STOCK")){let p=[];const y=d.indexOf(":");if(y!==-1){const N=d.slice(y+1).trim();try{p=JSON.parse(N)}catch{}}const g=Array.isArray(p)?p.map(N=>`${N.partName||N.partId||"?"} (cn ${N.available}, cn ${N.requested})`).join(", "):"";return At({code:"validation",message:g?`Thiu tn kho: ${g}`:"Tn kho khng  cho mt hoc nhiu sn phm",cause:a})}return f.includes("PART_NOT_FOUND")?At({code:"validation",message:"Khng tm thy ph tng trong kho",cause:a}):f.includes("INVALID_ITEM")?At({code:"validation",message:"D liu sn phm khng hp l",cause:a}):f.includes("EMPTY_ITEMS")?At({code:"validation",message:"Danh sch hng ha trng",cause:a}):f.includes("INVALID_PAYMENT_METHOD")?At({code:"validation",message:"Phng thc thanh ton khng hp l",cause:a}):f.includes("UNAUTHORIZED")?At({code:"supabase",message:"Bn khng c quyn to ha n",cause:a}):f.includes("BRANCH_MISMATCH")?At({code:"validation",message:"Chi nhnh khng khp vi quyn hin ti",cause:a}):At({code:"supabase",message:"To ha n (atomic) tht bi",cause:a})}const s=n.sale,l=n.cashTransactionId,o=n.inventoryTxCount;if(!s)return At({code:"unknown",message:"Kt qu RPC khng hp l"});let c=null;try{const{data:d}=await Pt.auth.getUser();c=((t=d==null?void 0:d.user)==null?void 0:t.id)||null}catch{}return await Us(c,{action:"sale.create",tableName:Bw,recordId:s.id,oldData:null,newData:s}),kn({...s,cashTransactionId:l,inventoryTxCount:o})}catch(r){return At({code:"network",message:"Li kt ni khi to ha n (atomic)",cause:r})}}async function zee(e){var t;try{const{data:r,error:n}=await Pt.rpc("sale_delete_atomic",{p_sale_id:e});if(n)return(n.message||"").includes("SALE_NOT_FOUND")?At({code:"not_found",message:"Khng tm thy ha n",cause:n}):At({code:"supabase",message:"Xa ha n tht bi",cause:n});let a=null;try{const{data:s}=await Pt.auth.getUser();a=((t=s==null?void 0:s.user)==null?void 0:t.id)||null}catch{}return await Us(a,{action:"sale.delete",tableName:Bw,recordId:e,oldData:null,newData:r}),kn({id:e})}catch(r){return At({code:"network",message:"Li kt ni khi xa ha n",cause:r})}}const qee=Object.freeze(Object.defineProperty({__proto__:null,createSaleAtomic:NF,deleteSaleById:zee,fetchSales:wF,fetchSalesPaged:kF},Symbol.toStringTag,{value:"Module"})),Mb=()=>Os({queryKey:["salesRepo"],queryFn:async()=>{const e=await wF();if(!e.ok)throw e.error;return e.data}}),Hee=e=>Os({queryKey:["salesRepoPaged",e],queryFn:async()=>{const{status:t,...r}=e||{},n={...r,status:t==="all"?void 0:t},a=await kF(n);if(!a.ok)throw a.error;return{data:a.data,meta:a.meta}},placeholderData:t=>t}),$ee=()=>{const e=qn();return ha({mutationFn:t=>NF(t),onSuccess:t=>{var r;e.invalidateQueries({queryKey:["salesRepo"]}),e.invalidateQueries({queryKey:["salesRepoPaged"]}),e.invalidateQueries({queryKey:["salesRepoKeyset"]}),e.invalidateQueries({queryKey:["partsRepo"]}),e.invalidateQueries({queryKey:["partsRepoPaged"]}),e.invalidateQueries({queryKey:["inventoryTxRepo"]}),Ye.success(" to ha n (atomic)"),(r=t==null?void 0:t.data)!=null&&r.inventoryTxCount&&Ye.info(`Xut kho: ${t.data.inventoryTxCount} dng`)},onError:t=>Ye.error(va(t))})},mf=()=>Os({queryKey:["partsRepo"],queryFn:async()=>{const e=await Pee();if(!e.ok)throw e.error;return e.data}}),A6=e=>Os({queryKey:["partsRepoPaged",e.page,e.pageSize,e.search||"",e.category||"all"],queryFn:async()=>{const t=await Iee(e);if(!t.ok)throw t.error;return t},staleTime:3e4}),E6=()=>{const e=qn();return ha({mutationFn:Dee,onSuccess:()=>{e.invalidateQueries({queryKey:["partsRepo"]}),e.invalidateQueries({queryKey:["partsRepoPaged"]})},onError:t=>Ye.error(va(t))})},Vee=()=>{const e=qn();return ha({mutationFn:({id:t,updates:r})=>Mee(t,r),onSuccess:()=>{e.invalidateQueries({queryKey:["partsRepo"]}),e.invalidateQueries({queryKey:["partsRepoPaged"]})},onError:t=>Ye.error(va(t))})},Wee=()=>{const e=qn();return ha({mutationFn:({id:t})=>Lee(t),onSuccess:()=>{e.invalidateQueries({queryKey:["partsRepo"]}),e.invalidateQueries({queryKey:["partsRepoPaged"]})},onError:t=>Ye.error(va(t))})},_F=e=>Os({queryKey:["cashTxRepo",e],queryFn:async()=>{const t=await UJ(e);if(!t.ok)throw t.error;return t.data}}),SF=()=>{const e=qn();return ha({mutationFn:t=>k_(t),onSuccess:()=>{e.invalidateQueries({queryKey:["cashTxRepo"]}),Ye.success(" ghi thu/chi")},onError:t=>Ye.error(va(t))})},Xm={async getCustomers(){const{data:e,error:t}=await Pt.from("customers").select("*").order("created_at",{ascending:!1});if(t)throw t;return e},async createCustomer(e){const{data:t,error:r}=await Pt.from("customers").insert([e]).select().single();if(r||r)throw r;return t},async createCustomersBulk(e){const{data:t,error:r}=await Pt.from("customers").insert(e).select();if(r)throw r;return t},async updateCustomer(e,t){const{data:r,error:n}=await Pt.from("customers").update(t).eq("id",e).select().single();if(n)throw n;return r},async getSuppliers(){const{data:e,error:t}=await Pt.from("suppliers").select("*").order("created_at",{ascending:!1});if(t)throw t;return e},async createSupplier(e){const{data:t,error:r}=await Pt.from("suppliers").insert([e]).select().single();if(r)throw r;return t},async createSuppliersBulk(e){const{data:t,error:r}=await Pt.from("suppliers").insert(e).select();if(r)throw r;return t},async updateSupplier(e,t){const{data:r,error:n}=await Pt.from("suppliers").update(t).eq("id",e).select().single();if(n)throw n;return r},async getParts(){const{data:e,error:t}=await Pt.from("parts").select("*").order("name");if(t)throw t;return e},async createPart(e){const{data:t,error:r}=await Pt.from("parts").insert([e]).select().single();if(r)throw r;return t},async updatePart(e,t){const{data:r,error:n}=await Pt.from("parts").update(t).eq("id",e).select().single();if(n)throw n;return r},async getWorkOrders(){const{data:e,error:t}=await Pt.from("work_orders").select("*").order("created_at",{ascending:!1});if(t)throw t;return e},async createWorkOrder(e){const{data:t,error:r}=await Pt.from("work_orders").insert([e]).select().single();if(r)throw r;return t},async updateWorkOrder(e,t){const{data:r,error:n}=await Pt.from("work_orders").update(t).eq("id",e).select().single();if(n)throw n;return r},async getSales(){const{data:e,error:t}=await Pt.from("sales").select("*").order("date",{ascending:!1});if(t)throw t;return e},async createSale(e){const{data:t,error:r}=await Pt.from("sales").insert([e]).select().single();if(r)throw r;return t},async getCashTransactions(){const{data:e,error:t}=await Pt.from("cash_transactions").select("*").order("date",{ascending:!1});if(t)throw t;return e},async createCashTransaction(e){const{data:t,error:r}=await Pt.from("cash_transactions").insert([e]).select().single();if(r)throw r;return t},async getPaymentSources(){const{data:e,error:t}=await Pt.from("payment_sources").select("*");if(t)throw t;return e},async updatePaymentSource(e,t){const{data:r,error:n}=await Pt.from("payment_sources").update(t).eq("id",e).select().single();if(n)throw n;return r},async getInventoryTransactions(){const{data:e,error:t}=await Pt.from("inventory_transactions").select("*").order("date",{ascending:!1});if(t)throw t;return e},async createInventoryTransaction(e){const{data:t,error:r}=await Pt.from("inventory_transactions").insert([e]).select().single();if(r)throw r;return t}},jF=()=>Os({queryKey:["customers"],queryFn:Xm.getCustomers,staleTime:300*1e3,gcTime:600*1e3}),Kee=()=>{const e=qn();return ha({mutationFn:Xm.createCustomer,onSuccess:()=>{e.invalidateQueries({queryKey:["customers"]})}})},Gee=()=>{const e=qn();return ha({mutationFn:Xm.createCustomersBulk,onSuccess:()=>{e.invalidateQueries({queryKey:["customers"]})}})},Xee=()=>{const e=qn();return ha({mutationFn:({id:t,updates:r})=>Xm.updateCustomer(t,r),onSuccess:()=>{e.invalidateQueries({queryKey:["customers"]})}})},Yee=()=>Os({queryKey:["parts"],queryFn:Xm.getParts,staleTime:300*1e3,gcTime:600*1e3}),Zee=()=>Os({queryKey:["workOrders"],queryFn:Xm.getWorkOrders,staleTime:120*1e3,gcTime:300*1e3}),Qee=()=>Os({queryKey:["paymentSources"],queryFn:Xm.getPaymentSources}),Uw="employees";async function Jee(){try{const{data:e,error:t}=await Pt.from(Uw).select("*").order("created_at",{ascending:!1});if(t)return At({code:"supabase",message:"Khng th ti danh sch nhn vin",cause:t});const r=(e||[]).map(n=>({id:n.id,name:n.name,phone:n.phone,email:n.email,position:n.position,department:n.department,baseSalary:n.base_salary,allowances:n.allowances,startDate:n.start_date,status:n.status,bankAccount:n.bank_account,bankName:n.bank_name,taxCode:n.tax_code,branchId:n.branch_id,created_at:n.created_at,updated_at:n.updated_at}));return kn(r)}catch(e){return At({code:"network",message:"Li kt ni ti my ch",cause:e})}}async function ete(e){try{console.log("Creating employee with data:",e);const{data:t,error:r}=await Pt.rpc("mc_current_branch");console.log("Branch data:",t,"Branch error:",r);const n=t||"CN1",a={id:`EMP-${Date.now()}`,name:e.name,phone:e.phone,email:e.email,position:e.position,department:e.department,base_salary:e.baseSalary,allowances:e.allowances||0,start_date:e.startDate,status:e.status||"active",bank_account:e.bankAccount,bank_name:e.bankName,tax_code:e.taxCode,branch_id:n};console.log("Inserting employee:",a);const{data:s,error:l}=await Pt.from(Uw).insert(a).select().single();if(console.log("Insert result - data:",s,"error:",l),l||!s)return console.error("Insert failed - error:",l,"data:",s),At({code:"supabase",message:(l==null?void 0:l.message)||"Khng th thm nhn vin",cause:l||new Error("No data returned from insert")});const o={id:s.id,name:s.name,phone:s.phone,email:s.email,position:s.position,department:s.department,baseSalary:s.base_salary,allowances:s.allowances,startDate:s.start_date,status:s.status,bankAccount:s.bank_account,bankName:s.bank_name,taxCode:s.tax_code,branchId:s.branch_id,created_at:s.created_at,updated_at:s.updated_at};return kn(o)}catch(t){return At({code:"network",message:"Li kt ni khi thm nhn vin",cause:t})}}async function tte(e,t){try{const r={};t.name!==void 0&&(r.name=t.name),t.phone!==void 0&&(r.phone=t.phone),t.email!==void 0&&(r.email=t.email),t.position!==void 0&&(r.position=t.position),t.department!==void 0&&(r.department=t.department),t.baseSalary!==void 0&&(r.base_salary=t.baseSalary),t.allowances!==void 0&&(r.allowances=t.allowances),t.startDate!==void 0&&(r.start_date=t.startDate),t.status!==void 0&&(r.status=t.status),t.bankAccount!==void 0&&(r.bank_account=t.bankAccount),t.bankName!==void 0&&(r.bank_name=t.bankName),t.taxCode!==void 0&&(r.tax_code=t.taxCode),r.updated_at=new Date().toISOString();const{data:n,error:a}=await Pt.from(Uw).update(r).eq("id",e).select().single();if(a||!n)return At({code:"supabase",message:"Khng th cp nht nhn vin",cause:a});const s={id:n.id,name:n.name,phone:n.phone,email:n.email,position:n.position,department:n.department,baseSalary:n.base_salary,allowances:n.allowances,startDate:n.start_date,status:n.status,bankAccount:n.bank_account,bankName:n.bank_name,taxCode:n.tax_code,branchId:n.branch_id,created_at:n.created_at,updated_at:n.updated_at};return kn(s)}catch(r){return At({code:"network",message:"Li kt ni khi cp nht nhn vin",cause:r})}}async function rte(e){try{const{error:t}=await Pt.from(Uw).delete().eq("id",e);return t?At({code:"supabase",message:"Khng th xa nhn vin",cause:t}):kn(void 0)}catch(t){return At({code:"network",message:"Li kt ni khi xa nhn vin",cause:t})}}function T6(){return Os({queryKey:["employees"],queryFn:async()=>{const e=await Jee();if(!e.ok)throw new Error(va(e.error));return e.data}})}function nte(){const e=qn();return ha({mutationFn:async t=>{console.log("Mutation called with employee:",t);const r=await ete(t);if(console.log("Repository result:",r),!r.ok){console.error("Repository failed:",r.error);const n=r.error?va(r.error):"Khng th thm nhn vin. Vui lng th li.";throw new Error(n)}return r.data},onSuccess:()=>{e.invalidateQueries({queryKey:["employees"]}),Ye.success("Thm nhn vin thnh cng!")},onError:t=>{const r=(t==null?void 0:t.message)||"C li xy ra khi thm nhn vin";Ye.error(r),console.error("Create employee error:",t)}})}function ate(){const e=qn();return ha({mutationFn:async({id:t,updates:r})=>{const n=await tte(t,r);if(!n.ok)throw new Error(va(n.error));return n.data},onSuccess:()=>{e.invalidateQueries({queryKey:["employees"]}),Ye.success("Cp nht nhn vin thnh cng!")},onError:t=>{Ye.error(`Li: ${t.message}`)}})}function ste(){const e=qn();return ha({mutationFn:async t=>{const r=await rte(t);if(!r.ok)throw new Error(va(r.error));return r.data},onSuccess:()=>{e.invalidateQueries({queryKey:["employees"]}),Ye.success("Xa nhn vin thnh cng!")},onError:t=>{Ye.error(`Li: ${t.message}`)}})}async function ite(){try{const{data:e,error:t}=await Pt.from("loans").select("*").order("created_at",{ascending:!1});if(t)return At({code:"supabase",message:"Khng th ti danh sch khon vay",cause:t});const r=(e||[]).map(n=>({id:n.id,lenderName:n.lender_name,loanType:n.loan_type,principal:n.principal,interestRate:n.interest_rate,term:n.term,startDate:n.start_date,endDate:n.end_date,remainingAmount:n.remaining_amount,monthlyPayment:n.monthly_payment,status:n.status,purpose:n.purpose,collateral:n.collateral,notes:n.notes,branchId:n.branch_id,created_at:n.created_at}));return kn(r)}catch(e){return At({code:"network",message:"Li kt ni ti my ch",cause:e})}}async function lte(e){try{const t={id:`LOAN-${Date.now()}`,lender_name:e.lenderName,loan_type:e.loanType,principal:e.principal,interest_rate:e.interestRate,term:e.term,start_date:e.startDate,end_date:e.endDate,remaining_amount:e.remainingAmount||e.principal,monthly_payment:e.monthlyPayment,status:e.status||"active",purpose:e.purpose,collateral:e.collateral,notes:e.notes,branch_id:e.branchId||"CN1"},{data:r,error:n}=await Pt.from("loans").insert(t).select().single();return n||!r?At({code:"supabase",message:(n==null?void 0:n.message)||"Khng th thm khon vay",cause:n||new Error("No data returned")}):kn({id:r.id,lenderName:r.lender_name,loanType:r.loan_type,principal:r.principal,interestRate:r.interest_rate,term:r.term,startDate:r.start_date,endDate:r.end_date,remainingAmount:r.remaining_amount,monthlyPayment:r.monthly_payment,status:r.status,purpose:r.purpose,collateral:r.collateral,notes:r.notes,branchId:r.branch_id,created_at:r.created_at})}catch(t){return At({code:"network",message:"Li kt ni khi thm khon vay",cause:t})}}async function ote(e,t){try{const r={};t.lenderName!==void 0&&(r.lender_name=t.lenderName),t.loanType!==void 0&&(r.loan_type=t.loanType),t.principal!==void 0&&(r.principal=t.principal),t.interestRate!==void 0&&(r.interest_rate=t.interestRate),t.term!==void 0&&(r.term=t.term),t.startDate!==void 0&&(r.start_date=t.startDate),t.endDate!==void 0&&(r.end_date=t.endDate),t.remainingAmount!==void 0&&(r.remaining_amount=t.remainingAmount),t.monthlyPayment!==void 0&&(r.monthly_payment=t.monthlyPayment),t.status!==void 0&&(r.status=t.status),t.purpose!==void 0&&(r.purpose=t.purpose),t.collateral!==void 0&&(r.collateral=t.collateral),t.notes!==void 0&&(r.notes=t.notes),r.updated_at=new Date().toISOString();const{data:n,error:a}=await Pt.from("loans").update(r).eq("id",e).select().single();return a||!n?At({code:"supabase",message:"Khng th cp nht khon vay",cause:a}):kn({id:n.id,lenderName:n.lender_name,loanType:n.loan_type,principal:n.principal,interestRate:n.interest_rate,term:n.term,startDate:n.start_date,endDate:n.end_date,remainingAmount:n.remaining_amount,monthlyPayment:n.monthly_payment,status:n.status,purpose:n.purpose,collateral:n.collateral,notes:n.notes,branchId:n.branch_id,created_at:n.created_at})}catch(r){return At({code:"network",message:"Li kt ni khi cp nht khon vay",cause:r})}}async function cte(e){try{const{error:t}=await Pt.from("loans").delete().eq("id",e);return t?At({code:"supabase",message:"Khng th xa khon vay",cause:t}):kn(void 0)}catch(t){return At({code:"network",message:"Li kt ni khi xa khon vay",cause:t})}}async function dte(e){try{let t=Pt.from("loan_payments").select("*").order("payment_date",{ascending:!1});const{data:r,error:n}=await t;if(n)return At({code:"supabase",message:"Khng th ti lch s tr n",cause:n});const a=(r||[]).map(s=>({id:s.id,loanId:s.loan_id,paymentDate:s.payment_date,principalAmount:s.principal_amount,interestAmount:s.interest_amount,totalAmount:s.total_amount,remainingAmount:s.remaining_amount,paymentMethod:s.payment_method,notes:s.notes,branchId:s.branch_id,cashTransactionId:s.cash_transaction_id}));return kn(a)}catch(t){return At({code:"network",message:"Li kt ni ti my ch",cause:t})}}async function ute(e){try{const t={id:`LPAY-${Date.now()}`,loan_id:e.loanId,payment_date:e.paymentDate,principal_amount:e.principalAmount,interest_amount:e.interestAmount,total_amount:e.totalAmount,remaining_amount:e.remainingAmount,payment_method:e.paymentMethod,notes:e.notes,branch_id:e.branchId||"CN1",cash_transaction_id:e.cashTransactionId},{data:r,error:n}=await Pt.from("loan_payments").insert(t).select().single();return n||!r?At({code:"supabase",message:(n==null?void 0:n.message)||"Khng th thm thanh ton",cause:n||new Error("No data returned")}):kn({id:r.id,loanId:r.loan_id,paymentDate:r.payment_date,principalAmount:r.principal_amount,interestAmount:r.interest_amount,totalAmount:r.total_amount,remainingAmount:r.remaining_amount,paymentMethod:r.payment_method,notes:r.notes,branchId:r.branch_id,cashTransactionId:r.cash_transaction_id})}catch(t){return At({code:"network",message:"Li kt ni khi thm thanh ton",cause:t})}}function CF(){return Os({queryKey:["loans"],queryFn:ite,select:e=>{if(!e.ok)throw new Error(va(e.error));return e.data}})}function hte(){const e=qn();return ha({mutationFn:t=>lte(t),onSuccess:t=>{if(t.ok)e.invalidateQueries({queryKey:["loans"]});else throw new Error(va(t.error))}})}function fte(){const e=qn();return ha({mutationFn:({id:t,updates:r})=>ote(t,r),onSuccess:t=>{if(t.ok)e.invalidateQueries({queryKey:["loans"]});else throw new Error(va(t.error))}})}function mte(){const e=qn();return ha({mutationFn:t=>cte(t),onSuccess:t=>{if(t.ok)e.invalidateQueries({queryKey:["loans"]});else throw new Error(va(t.error))}})}function xte(e){return Os({queryKey:["loanPayments",e],queryFn:()=>dte(e),select:t=>{if(!t.ok)throw new Error(va(t.error));return t.data}})}function pte(){const e=qn();return ha({mutationFn:t=>ute(t),onSuccess:t=>{if(t.ok)e.invalidateQueries({queryKey:["loanPayments"]}),e.invalidateQueries({queryKey:["loans"]});else throw new Error(va(t.error))}})}const Ie=e=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(e),Bn=(e,t=!0)=>{if(!e)return"--";const r=typeof e=="string"?new Date(e):e;if(Number.isNaN(r.getTime()))return"--";const n=String(r.getDate()).padStart(2,"0"),a=String(r.getMonth()+1).padStart(2,"0"),s=r.getFullYear();if(t)return`${n}/${a}/${s}`;const l=String(r.getHours()).padStart(2,"0"),o=String(r.getMinutes()).padStart(2,"0");return`${n}/${a}/${s} ${l}:${o}`},Il=(e,t)=>{if(!e)return"";const r=t||"SC";let n=e.match(new RegExp(`^${r}-(\\d{10,})`,"i"));if(n||(n=e.match(/WO-(\d+)/i)||e.match(/(\d{10,})/)),n&&n[1]){const a=n[1],s=Number(a);if(!Number.isNaN(s)){const l=new Date(s);if(!Number.isNaN(l.getTime())){const o=`${l.getFullYear()}${String(l.getMonth()+1).padStart(2,"0")}${String(l.getDate()).padStart(2,"0")}`,c=String(a).slice(-6).padStart(6,"0");return`${r}-${o}-${c}`}}}return e},F1=(e,t)=>{if(!e)return"";const r=e.match(/^([A-Z0-9_-]+)-(\d{10,})$/i);if(r){const a=r[1],s=r[2],l=Number(s);if(!Number.isNaN(l)){const o=new Date(l);if(!Number.isNaN(o.getTime())){const c=`${o.getFullYear()}${String(o.getMonth()+1).padStart(2,"0")}${String(o.getDate()).padStart(2,"0")}`,d=String(s).slice(-6).padStart(6,"0");return`${a}-${c}-${d}`}}}const n=e.match(/(\d{10,})/);if(n){const a=n[1],s=Number(a);if(!Number.isNaN(s)){const l=new Date(s);if(!Number.isNaN(l.getTime())){const o=`${l.getFullYear()}${String(l.getMonth()+1).padStart(2,"0")}${String(l.getDate()).padStart(2,"0")}`,c=String(a).slice(-6).padStart(6,"0");return`SC-${o}-${c}`}}}return e},Ln=()=>Math.random().toString(36).substr(2,9),Vd=new Date,Qr=e=>{const t=new Date(Vd);return t.setDate(t.getDate()-e),t.toISOString()},an=[{id:Ln(),name:"Nguyn Vn An",phone:"0901234567",email:"annv@gmail.com",vehicleModel:"Honda SH 2023",licensePlate:"30A-12345",status:"active",segment:"VIP",loyaltyPoints:5800,totalSpent:29e6,visitCount:32,lastVisit:Qr(3),created_at:Qr(180)},{id:Ln(),name:"Trn Th Bnh",phone:"0912345678",email:"binhtt@gmail.com",vehicleModel:"Yamaha Exciter 150",licensePlate:"30B-67890",status:"active",segment:"Loyal",loyaltyPoints:2500,totalSpent:125e5,visitCount:15,lastVisit:Qr(7),created_at:Qr(150)},{id:Ln(),name:"L Minh Cng",phone:"0923456789",email:"cuonglm@gmail.com",vehicleModel:"Honda Vision 2022",licensePlate:"30C-11111",status:"active",segment:"Potential",loyaltyPoints:680,totalSpent:34e5,visitCount:5,lastVisit:Qr(15),created_at:Qr(90)},{id:Ln(),name:"Phm Thu H",phone:"0934567890",email:"hapt@gmail.com",vehicleModel:"Suzuki Raider 150",licensePlate:"30D-22222",status:"active",segment:"New",loyaltyPoints:150,totalSpent:75e4,visitCount:2,lastVisit:Qr(5),created_at:Qr(30)},{id:Ln(),name:"V Thanh Tng",phone:"0945678901",email:"tungvt@gmail.com",vehicleModel:"Honda Air Blade",licensePlate:"30E-33333",status:"active",segment:"VIP",loyaltyPoints:4200,totalSpent:21e6,visitCount:28,lastVisit:Qr(2),created_at:Qr(200)}],mn=[{id:Ln(),name:"Nht Motul 7100 10W40",sku:"MOTUL-7100",retailPrice:{CN1:18e4},wholesalePrice:{CN1:15e4},stock:{CN1:50},category:"Nht ng c",description:"Nht cao cp cho xe cn tay",created_at:Qr(365)},{id:Ln(),name:"Lp Michelin Pilot Street",sku:"MICH-PS",retailPrice:{CN1:45e4},wholesalePrice:{CN1:38e4},stock:{CN1:30},category:"Lp xe",description:"Lp cht lng cao",created_at:Qr(300)},{id:Ln(),name:"Phanh ABS Honda SH",sku:"PHANH-SH",retailPrice:{CN1:35e4},wholesalePrice:{CN1:28e4},stock:{CN1:8},category:"Ph tng phanh",description:"M phanh chnh hng",created_at:Qr(250)},{id:Ln(),name:"c quy GS GTZ5S",sku:"ACQUY-GS",retailPrice:{CN1:38e4},wholesalePrice:{CN1:32e4},stock:{CN1:25},category:"c quy",description:"c quy kh, bo hnh 6 thng",created_at:Qr(200)},{id:Ln(),name:"Nht Shell Advance AX7",sku:"SHELL-AX7",retailPrice:{CN1:12e4},wholesalePrice:{CN1:95e3},stock:{CN1:80},category:"Nht ng c",description:"Nht bn tng hp",created_at:Qr(180)},{id:Ln(),name:"Lc gi K&N",sku:"KN-FILTER",retailPrice:{CN1:25e4},wholesalePrice:{CN1:2e5},stock:{CN1:15},category:"Lc",description:"Lc gi cao cp, c th ra",created_at:Qr(150)},{id:Ln(),name:"Xch MTKRACING 428",sku:"XICH-MTK",retailPrice:{CN1:28e4},wholesalePrice:{CN1:23e4},stock:{CN1:5},category:"Xch nhng",description:"Xch cht lng cao",created_at:Qr(120)}],gc=[{id:Ln(),name:"Nguyn Vn c",phone:"0987654321",email:"duc.nv@motocare.vn",position:"K thut vin chnh",department:"K thut",baseSalary:12e6,allowances:5e5,startDate:Qr(730),status:"active",branchId:"CN1",created_at:Qr(730)},{id:Ln(),name:"Trn Minh Hong",phone:"0976543210",email:"hoang.tm@motocare.vn",position:"Nhn vin bn hng",department:"Kinh doanh",baseSalary:8e6,allowances:3e5,startDate:Qr(365),status:"active",branchId:"CN1",created_at:Qr(365)},{id:Ln(),name:"L Th Mai",phone:"0965432109",email:"mai.lt@motocare.vn",position:"K ton",department:"Ti chnh",baseSalary:1e7,allowances:4e5,startDate:Qr(500),status:"active",branchId:"CN1",created_at:Qr(500)},{id:Ln(),name:"Phm Vn Sn",phone:"0954321098",email:"son.pv@motocare.vn",position:"K thut vin",department:"K thut",baseSalary:9e6,allowances:3e5,startDate:Qr(200),status:"active",branchId:"CN1",created_at:Qr(200)}],E_=[...Array.from({length:5},(e,t)=>{const r=[{partId:mn[0].id,partName:mn[0].name,sku:mn[0].sku,quantity:2,sellingPrice:mn[0].retailPrice.CN1,stockSnapshot:mn[0].stock.CN1},{partId:mn[1].id,partName:mn[1].name,sku:mn[1].sku,quantity:1,sellingPrice:mn[1].retailPrice.CN1,stockSnapshot:mn[1].stock.CN1}],n=r.reduce((a,s)=>a+s.sellingPrice*s.quantity,0);return{id:Ln(),date:Qr(t),customer:{id:an[t%an.length].id,name:an[t%an.length].name,phone:an[t%an.length].phone},items:r,subtotal:n,discount:0,total:n,paymentMethod:"cash",userId:"demo-user",userName:"Demo User",branchId:"CN1"}}),...Array.from({length:10},(e,t)=>{const r=mn[(t+1)%mn.length],n=[{partId:r.id,partName:r.name,sku:r.sku,quantity:1,sellingPrice:r.retailPrice.CN1,stockSnapshot:r.stock.CN1}],a=n.reduce((s,l)=>s+l.sellingPrice*l.quantity,0);return{id:Ln(),date:Qr(t+6),customer:{id:an[(t+2)%an.length].id,name:an[(t+2)%an.length].name,phone:an[(t+2)%an.length].phone},items:n,subtotal:a,discount:0,total:a,paymentMethod:Math.random()>.5?"cash":"bank",userId:"demo-user",userName:"Demo User",branchId:"CN1"}}),...Array.from({length:15},(e,t)=>{const r=mn[t%mn.length],n=Math.floor(Math.random()*3)+1,a=[{partId:r.id,partName:r.name,sku:r.sku,quantity:n,sellingPrice:r.retailPrice.CN1,stockSnapshot:r.stock.CN1}],s=a.reduce((l,o)=>l+o.sellingPrice*o.quantity,0);return{id:Ln(),date:Qr(t+16),customer:{id:an[(t+3)%an.length].id,name:an[(t+3)%an.length].name,phone:an[(t+3)%an.length].phone},items:a,subtotal:s,discount:0,total:s,paymentMethod:Math.random()>.5?"cash":"bank",userId:"demo-user",userName:"Demo User",branchId:"CN1"}})],f7=gc.flatMap(e=>[{id:Ln(),employeeId:e.id,employeeName:e.name,month:Vd.toISOString().slice(0,7),baseSalary:e.baseSalary,allowances:e.allowances||0,bonus:1e6,deduction:0,workDays:26,standardWorkDays:26,socialInsurance:0,healthInsurance:0,unemploymentInsurance:0,personalIncomeTax:0,netSalary:e.baseSalary+(e.allowances||0)+1e6,paymentStatus:"pending",branchId:"CN1",created_at:Vd.toISOString()},{id:Ln(),employeeId:e.id,employeeName:e.name,month:new Date(Vd.getFullYear(),Vd.getMonth()-1,1).toISOString().slice(0,7),baseSalary:e.baseSalary,allowances:e.allowances||0,bonus:8e5,deduction:0,workDays:26,standardWorkDays:26,socialInsurance:0,healthInsurance:0,unemploymentInsurance:0,personalIncomeTax:0,netSalary:e.baseSalary+(e.allowances||0)+8e5,paymentStatus:"paid",paymentDate:Qr(5),paymentMethod:"bank",branchId:"CN1",created_at:Qr(35)}]),m7=[{id:Ln(),lenderName:"Ngn hng Vietcombank",loanType:"bank",principal:1e8,interestRate:12,term:12,startDate:Qr(180),endDate:new Date(Vd.getFullYear()+1,Vd.getMonth(),Vd.getDate()).toISOString(),purpose:"M rng ca hng",remainingAmount:75e6,monthlyPayment:1e7,status:"active",branchId:"CN1",created_at:Qr(180)},{id:Ln(),lenderName:"Ngn hng Techcombank",loanType:"bank",principal:5e7,interestRate:10,term:6,startDate:Qr(90),endDate:new Date(Vd.getFullYear(),Vd.getMonth()+6,Vd.getDate()).toISOString(),purpose:"Nhp hng",remainingAmount:4e7,monthlyPayment:9e6,status:"active",branchId:"CN1",created_at:Qr(90)}],x7=[...E_.slice(0,10).map(e=>({id:Ln(),type:"income",category:"sale_income",amount:e.total,date:e.date,notes:`Bn hng cho ${e.customer.name}`,paymentSourceId:e.paymentMethod==="cash"?"cash":"bank",recipient:e.customer.name,branchId:"CN1"})),{id:Ln(),type:"expense",category:"salary",amount:125e5,date:Qr(5),notes:`Tr lng thng trc - ${gc[0].name}`,paymentSourceId:"bank",recipient:gc[0].name,branchId:"CN1"},{id:Ln(),type:"expense",category:"loan_payment",amount:1e7,date:Qr(10),notes:"Tr n vay - Vietcombank (Gc: 8000000, Li: 2000000)",paymentSourceId:"bank",recipient:"Ngn hng Vietcombank",branchId:"CN1"},{id:Ln(),type:"expense",category:"inventory_purchase",amount:15e6,date:Qr(15),notes:"Nhp ph tng",paymentSourceId:"cash",branchId:"CN1"},{id:Ln(),type:"expense",category:"other_expense",amount:3e6,date:Qr(7),notes:"Tin in, nc, internet thng ny",paymentSourceId:"cash",branchId:"CN1"}],Cu=[{id:Ln(),name:"Cng ty TNHH Ph tng Minh Anh",phone:"0281234567",email:"minhanh@parts.vn",address:"123 Nguyn Vn Linh, Q.7, TP.HCM",created_at:Qr(365)},{id:Ln(),name:"Nh phn phi Honda chnh hng",phone:"0282345678",email:"honda@distributor.vn",address:"456 Xa l H Ni, Q.9, TP.HCM",created_at:Qr(300)},{id:Ln(),name:"Yamaha Parts Vietnam",phone:"0283456789",email:"yamaha@parts.vn",address:"789 L Vn Vit, Q.9, TP.HCM",created_at:Qr(250)}],p7=[{id:Ln(),customerId:an[0].id,customerName:an[0].name,phone:an[0].phone,licensePlate:an[0].licensePlate,description:"Thay nht + lc gi + bugi (n hng #DH001)",totalAmount:85e4,paidAmount:5e5,remainingAmount:35e4,createdDate:Qr(10),branchId:"CN1"},{id:Ln(),customerId:an[1].id,customerName:an[1].name,phone:an[1].phone,licensePlate:an[1].licensePlate,description:"Thay lp Michelin Pilot Street (n hng #DH002)",totalAmount:125e4,paidAmount:0,remainingAmount:125e4,createdDate:Qr(7),branchId:"CN1"},{id:Ln(),customerId:an[2].id,customerName:an[2].name,phone:an[2].phone,licensePlate:an[2].licensePlate,description:"Thay m phanh trc/sau + du phanh (n hng #DH003)",totalAmount:98e4,paidAmount:3e5,remainingAmount:68e4,createdDate:Qr(5),branchId:"CN1"},{id:Ln(),customerId:an[3].id,customerName:an[3].name,phone:an[3].phone,licensePlate:an[3].licensePlate,description:"Thay c quy GS 12V-7Ah (n hng #DH004)",totalAmount:55e4,paidAmount:0,remainingAmount:55e4,createdDate:Qr(3),branchId:"CN1"},{id:Ln(),customerId:an[4].id,customerName:an[4].name,phone:an[4].phone,licensePlate:an[4].licensePlate,description:"Bo dng nh k 5000km (n hng #DH005)",totalAmount:185e4,paidAmount:1e6,remainingAmount:85e4,createdDate:Qr(2),branchId:"CN1"}],g7=[{id:Ln(),supplierId:Cu[0].id,supplierName:Cu[0].name,description:"Nhp 50 chai du nht Shell 10W40 (n nhp #PN001)",totalAmount:6e6,paidAmount:3e6,remainingAmount:3e6,createdDate:Qr(15),branchId:"CN1"},{id:Ln(),supplierId:Cu[1].id,supplierName:Cu[1].name,description:"Nhp l ph tng chnh hng Honda (n nhp #PN002)",totalAmount:25e6,paidAmount:15e6,remainingAmount:1e7,createdDate:Qr(12),branchId:"CN1"},{id:Ln(),supplierId:Cu[2].id,supplierName:Cu[2].name,description:"Nhp 20 b m phanh Yamaha Exciter (n nhp #PN003)",totalAmount:45e5,paidAmount:0,remainingAmount:45e5,createdDate:Qr(8),branchId:"CN1"},{id:Ln(),supplierId:Cu[0].id,supplierName:Cu[0].name,description:"Nhp 30 lc lc du + lc gi (n nhp #PN004)",totalAmount:32e5,paidAmount:32e5,remainingAmount:0,createdDate:Qr(5),branchId:"CN1"}],b7=[{id:Ln(),creationDate:Qr(1),customerName:an[0].name,customerPhone:an[0].phone,vehicleModel:an[0].vehicleModel,licensePlate:an[0].licensePlate,issueDescription:"Thay nht nh k, kim tra phanh",technicianName:gc[0].name,status:"ang sa",laborCost:15e4,partsUsed:[{partId:mn[0].id,partName:mn[0].name,sku:mn[0].sku,quantity:1,price:mn[0].retailPrice.CN1}],discount:0,total:15e4+mn[0].retailPrice.CN1,branchId:"CN1",depositAmount:2e5,depositDate:Qr(1),paymentStatus:"partial",totalPaid:2e5,remainingAmount:15e4+mn[0].retailPrice.CN1-2e5},{id:Ln(),creationDate:Qr(0),customerName:an[1].name,customerPhone:an[1].phone,vehicleModel:an[1].vehicleModel,licensePlate:an[1].licensePlate,issueDescription:"Xe kh n, kim tra h thng in",technicianName:gc[3].name,status:"Tip nhn",laborCost:3e5,partsUsed:[],discount:0,total:3e5,branchId:"CN1",paymentStatus:"unpaid"},{id:Ln(),creationDate:Qr(3),customerName:an[2].name,customerPhone:an[2].phone,vehicleModel:an[2].vehicleModel,licensePlate:an[2].licensePlate,issueDescription:"Thay lp trc, cn chnh bnh xe",technicianName:gc[0].name,status:" sa xong",laborCost:1e5,partsUsed:[{partId:mn[1].id,partName:mn[1].name,sku:mn[1].sku,quantity:1,price:mn[1].retailPrice.CN1}],discount:2e4,total:1e5+mn[1].retailPrice.CN1-2e4,branchId:"CN1",paymentStatus:"unpaid"},{id:Ln(),creationDate:Qr(5),customerName:an[3].name,customerPhone:an[3].phone,vehicleModel:an[3].vehicleModel,licensePlate:an[3].licensePlate,issueDescription:"Thay c quy, kim tra h thng sc",technicianName:gc[3].name,status:"Tr my",laborCost:5e4,partsUsed:[{partId:mn[3].id,partName:mn[3].name,sku:mn[3].sku,quantity:1,price:mn[3].retailPrice.CN1}],discount:0,total:5e4+mn[3].retailPrice.CN1,branchId:"CN1",depositAmount:1e5,depositDate:Qr(5),paymentStatus:"paid",paymentMethod:"cash",totalPaid:5e4+mn[3].retailPrice.CN1,remainingAmount:0,paymentDate:Qr(5)},{id:Ln(),creationDate:Qr(2),customerName:an[4].name,customerPhone:an[4].phone,vehicleModel:an[4].vehicleModel,licensePlate:an[4].licensePlate,issueDescription:"Thay dy xch, nhng, kim tra phanh sau",technicianName:gc[0].name,status:"ang sa",laborCost:2e5,partsUsed:[{partId:mn[6].id,partName:mn[6].name,sku:mn[6].sku,quantity:1,price:mn[6].retailPrice.CN1},{partId:mn[2].id,partName:mn[2].name,sku:mn[2].sku,quantity:2,price:mn[2].retailPrice.CN1}],discount:3e4,total:2e5+mn[6].retailPrice.CN1+mn[2].retailPrice.CN1*2-3e4,branchId:"CN1",depositAmount:3e5,depositDate:Qr(2),paymentStatus:"partial",totalPaid:3e5,remainingAmount:2e5+mn[6].retailPrice.CN1+mn[2].retailPrice.CN1*2-3e4-3e5},{id:Ln(),creationDate:Qr(0),customerName:"Phm Vn c",customerPhone:"0967890123",vehicleModel:"Honda Wave RSX",licensePlate:"30F-44444",issueDescription:"Bo dng nh k 5000km",technicianName:gc[3].name,status:"Tip nhn",laborCost:1e5,partsUsed:[],discount:0,total:1e5,branchId:"CN1",paymentStatus:"unpaid"},{id:Ln(),creationDate:Qr(4),customerName:"L Th Hng",customerPhone:"0978901234",vehicleModel:"Yamaha Sirius",licensePlate:"30G-55555",issueDescription:"Thay lc gi, kim tra bugi",technicianName:gc[0].name,status:" sa xong",laborCost:8e4,partsUsed:[{partId:mn[5].id,partName:mn[5].name,sku:mn[5].sku,quantity:1,price:mn[5].retailPrice.CN1}],discount:1e4,total:8e4+mn[5].retailPrice.CN1-1e4,branchId:"CN1",paymentStatus:"unpaid"},{id:Ln(),creationDate:Qr(7),customerName:"Nguyn Thanh Tng",customerPhone:"0989012345",vehicleModel:"Honda Future",licensePlate:"30H-66666",issueDescription:"Sa h thng phanh a, thay du phanh",technicianName:gc[3].name,status:"Tr my",laborCost:15e4,partsUsed:[{partId:mn[2].id,partName:mn[2].name,sku:mn[2].sku,quantity:2,price:mn[2].retailPrice.CN1}],discount:0,total:15e4+mn[2].retailPrice.CN1*2,branchId:"CN1",paymentStatus:"paid",paymentMethod:"bank",totalPaid:15e4+mn[2].retailPrice.CN1*2,remainingAmount:0,paymentDate:Qr(7)}],gte=()=>{const e=localStorage.getItem("motocare-data");if(e){const t=JSON.parse(e);t.customers=[...t.customers||[],...an],t.parts=[...t.parts||[],...mn],t.sales=[...t.sales||[],...E_],t.employees=[...t.employees||[],...gc],t.payrollRecords=[...t.payrollRecords||[],...f7],t.loans=[...t.loans||[],...m7],t.cashTransactions=[...t.cashTransactions||[],...x7],t.suppliers=[...t.suppliers||[],...Cu],t.workOrders=[...t.workOrders||[],...b7],t.customerDebts=[...t.customerDebts||[],...p7],t.supplierDebts=[...t.supplierDebts||[],...g7],localStorage.setItem("motocare-data",JSON.stringify(t))}else{const t={customers:an,parts:mn,sales:E_,employees:gc,payrollRecords:f7,loans:m7,cashTransactions:x7,suppliers:Cu,workOrders:b7,customerDebts:p7,supplierDebts:g7,cartItems:[],loanPayments:[],inventoryTransactions:[],paymentSources:[{id:"cash",name:"Tin mt",balance:{CN1:5e7}},{id:"bank",name:"Ngn hng",balance:{CN1:15e7}}]};localStorage.setItem("motocare-data",JSON.stringify(t))}return console.log("Demo data loaded successfully."),!0},bte=()=>{localStorage.removeItem("motocare-data"),console.log("Demo data cleared.")};var vte=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function O6(e){if(typeof e!="string")return!1;var t=vte;return t.includes(e)}var yte=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function AF(e){if(typeof e!="string")return!1;var t=yte;return t.includes(e)}function EF(e){return typeof e=="string"&&e.startsWith("data-")}function Ao(e){var t=Object.entries(e).filter(r=>{var[n]=r;return AF(n)||EF(n)});return Object.fromEntries(t)}function Am(e){if(e==null)return null;if(T.isValidElement(e)&&typeof e.props=="object"&&e.props!==null){var t=e.props;return Ao(t)}return typeof e=="object"&&!Array.isArray(e)?Ao(e):null}function Eo(e){var t=Object.entries(e).filter(r=>{var[n]=r;return AF(n)||EF(n)||O6(n)});return Object.fromEntries(t)}function TF(e){return e==null?null:T.isValidElement(e)?Eo(e.props):typeof e=="object"&&!Array.isArray(e)?Eo(e):null}var wte=["children","width","height","viewBox","className","style","title","desc"];function T_(){return T_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},T_.apply(null,arguments)}function kte(e,t){if(e==null)return{};var r,n,a=Nte(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Nte(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var P6=T.forwardRef((e,t)=>{var{children:r,width:n,height:a,viewBox:s,className:l,style:o,title:c,desc:d}=e,f=kte(e,wte),p=s||{width:n,height:a,x:0,y:0},y=Zn("recharts-surface",l);return T.createElement("svg",T_({},Eo(f),{className:y,width:n,height:a,style:o,viewBox:"".concat(p.x," ").concat(p.y," ").concat(p.width," ").concat(p.height),ref:t}),T.createElement("title",null,c),T.createElement("desc",null,d),r)}),_te=["children","className"];function O_(){return O_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},O_.apply(null,arguments)}function Ste(e,t){if(e==null)return{};var r,n,a=jte(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function jte(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var di=T.forwardRef((e,t)=>{var{children:r,className:n}=e,a=Ste(e,_te),s=Zn("recharts-layer",n);return T.createElement("g",O_({className:s},Eo(a),{ref:t}),r)}),OF=T.createContext(null),Cte=()=>T.useContext(OF);function vs(e){return function(){return e}}const PF=Math.cos,yy=Math.sin,nu=Math.sqrt,wy=Math.PI,zw=2*wy,P_=Math.PI,I_=2*P_,zf=1e-6,Ate=I_-zf;function IF(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function Ete(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return IF;const r=10**t;return function(n){this._+=n[0];for(let a=1,s=n.length;a<s;++a)this._+=Math.round(arguments[a]*r)/r+n[a]}}class Tte{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?IF:Ete(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,a){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+a}`}bezierCurveTo(t,r,n,a,s,l){this._append`C${+t},${+r},${+n},${+a},${this._x1=+s},${this._y1=+l}`}arcTo(t,r,n,a,s){if(t=+t,r=+r,n=+n,a=+a,s=+s,s<0)throw new Error(`negative radius: ${s}`);let l=this._x1,o=this._y1,c=n-t,d=a-r,f=l-t,p=o-r,y=f*f+p*p;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(y>zf)if(!(Math.abs(p*c-d*f)>zf)||!s)this._append`L${this._x1=t},${this._y1=r}`;else{let g=n-l,N=a-o,w=c*c+d*d,k=g*g+N*N,S=Math.sqrt(w),O=Math.sqrt(y),E=s*Math.tan((P_-Math.acos((w+y-k)/(2*S*O)))/2),D=E/O,H=E/S;Math.abs(D-1)>zf&&this._append`L${t+D*f},${r+D*p}`,this._append`A${s},${s},0,0,${+(p*g>f*N)},${this._x1=t+H*c},${this._y1=r+H*d}`}}arc(t,r,n,a,s,l){if(t=+t,r=+r,n=+n,l=!!l,n<0)throw new Error(`negative radius: ${n}`);let o=n*Math.cos(a),c=n*Math.sin(a),d=t+o,f=r+c,p=1^l,y=l?a-s:s-a;this._x1===null?this._append`M${d},${f}`:(Math.abs(this._x1-d)>zf||Math.abs(this._y1-f)>zf)&&this._append`L${d},${f}`,n&&(y<0&&(y=y%I_+I_),y>Ate?this._append`A${n},${n},0,1,${p},${t-o},${r-c}A${n},${n},0,1,${p},${this._x1=d},${this._y1=f}`:y>zf&&this._append`A${n},${n},0,${+(y>=P_)},${p},${this._x1=t+n*Math.cos(s)},${this._y1=r+n*Math.sin(s)}`)}rect(t,r,n,a){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+a}h${-n}Z`}toString(){return this._}}function I6(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new Tte(t)}function D6(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function DF(e){this._context=e}DF.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function qw(e){return new DF(e)}function MF(e){return e[0]}function LF(e){return e[1]}function RF(e,t){var r=vs(!0),n=null,a=qw,s=null,l=I6(o);e=typeof e=="function"?e:e===void 0?MF:vs(e),t=typeof t=="function"?t:t===void 0?LF:vs(t);function o(c){var d,f=(c=D6(c)).length,p,y=!1,g;for(n==null&&(s=a(g=l())),d=0;d<=f;++d)!(d<f&&r(p=c[d],d,c))===y&&((y=!y)?s.lineStart():s.lineEnd()),y&&s.point(+e(p,d,c),+t(p,d,c));if(g)return s=null,g+""||null}return o.x=function(c){return arguments.length?(e=typeof c=="function"?c:vs(+c),o):e},o.y=function(c){return arguments.length?(t=typeof c=="function"?c:vs(+c),o):t},o.defined=function(c){return arguments.length?(r=typeof c=="function"?c:vs(!!c),o):r},o.curve=function(c){return arguments.length?(a=c,n!=null&&(s=a(n)),o):a},o.context=function(c){return arguments.length?(c==null?n=s=null:s=a(n=c),o):n},o}function m2(e,t,r){var n=null,a=vs(!0),s=null,l=qw,o=null,c=I6(d);e=typeof e=="function"?e:e===void 0?MF:vs(+e),t=typeof t=="function"?t:vs(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?LF:vs(+r);function d(p){var y,g,N,w=(p=D6(p)).length,k,S=!1,O,E=new Array(w),D=new Array(w);for(s==null&&(o=l(O=c())),y=0;y<=w;++y){if(!(y<w&&a(k=p[y],y,p))===S)if(S=!S)g=y,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),N=y-1;N>=g;--N)o.point(E[N],D[N]);o.lineEnd(),o.areaEnd()}S&&(E[y]=+e(k,y,p),D[y]=+t(k,y,p),o.point(n?+n(k,y,p):E[y],r?+r(k,y,p):D[y]))}if(O)return o=null,O+""||null}function f(){return RF().defined(a).curve(l).context(s)}return d.x=function(p){return arguments.length?(e=typeof p=="function"?p:vs(+p),n=null,d):e},d.x0=function(p){return arguments.length?(e=typeof p=="function"?p:vs(+p),d):e},d.x1=function(p){return arguments.length?(n=p==null?null:typeof p=="function"?p:vs(+p),d):n},d.y=function(p){return arguments.length?(t=typeof p=="function"?p:vs(+p),r=null,d):t},d.y0=function(p){return arguments.length?(t=typeof p=="function"?p:vs(+p),d):t},d.y1=function(p){return arguments.length?(r=p==null?null:typeof p=="function"?p:vs(+p),d):r},d.lineX0=d.lineY0=function(){return f().x(e).y(t)},d.lineY1=function(){return f().x(e).y(r)},d.lineX1=function(){return f().x(n).y(t)},d.defined=function(p){return arguments.length?(a=typeof p=="function"?p:vs(!!p),d):a},d.curve=function(p){return arguments.length?(l=p,s!=null&&(o=l(s)),d):l},d.context=function(p){return arguments.length?(p==null?s=o=null:o=l(s=p),d):s},d}class FF{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function Ote(e){return new FF(e,!0)}function Pte(e){return new FF(e,!1)}const M6={draw(e,t){const r=nu(t/wy);e.moveTo(r,0),e.arc(0,0,r,0,zw)}},Ite={draw(e,t){const r=nu(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},BF=nu(1/3),Dte=BF*2,Mte={draw(e,t){const r=nu(t/Dte),n=r*BF;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},Lte={draw(e,t){const r=nu(t),n=-r/2;e.rect(n,n,r,r)}},Rte=.8908130915292852,UF=yy(wy/10)/yy(7*wy/10),Fte=yy(zw/10)*UF,Bte=-PF(zw/10)*UF,Ute={draw(e,t){const r=nu(t*Rte),n=Fte*r,a=Bte*r;e.moveTo(0,-r),e.lineTo(n,a);for(let s=1;s<5;++s){const l=zw*s/5,o=PF(l),c=yy(l);e.lineTo(c*r,-o*r),e.lineTo(o*n-c*a,c*n+o*a)}e.closePath()}},_4=nu(3),zte={draw(e,t){const r=-nu(t/(_4*3));e.moveTo(0,r*2),e.lineTo(-_4*r,-r),e.lineTo(_4*r,-r),e.closePath()}},Gc=-.5,Xc=nu(3)/2,D_=1/nu(12),qte=(D_/2+1)*3,Hte={draw(e,t){const r=nu(t/qte),n=r/2,a=r*D_,s=n,l=r*D_+r,o=-s,c=l;e.moveTo(n,a),e.lineTo(s,l),e.lineTo(o,c),e.lineTo(Gc*n-Xc*a,Xc*n+Gc*a),e.lineTo(Gc*s-Xc*l,Xc*s+Gc*l),e.lineTo(Gc*o-Xc*c,Xc*o+Gc*c),e.lineTo(Gc*n+Xc*a,Gc*a-Xc*n),e.lineTo(Gc*s+Xc*l,Gc*l-Xc*s),e.lineTo(Gc*o+Xc*c,Gc*c-Xc*o),e.closePath()}};function $te(e,t){let r=null,n=I6(a);e=typeof e=="function"?e:vs(e||M6),t=typeof t=="function"?t:vs(t===void 0?64:+t);function a(){let s;if(r||(r=s=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),s)return r=null,s+""||null}return a.type=function(s){return arguments.length?(e=typeof s=="function"?s:vs(s),a):e},a.size=function(s){return arguments.length?(t=typeof s=="function"?s:vs(+s),a):t},a.context=function(s){return arguments.length?(r=s??null,a):r},a}function ky(){}function Ny(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function zF(e){this._context=e}zF.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Ny(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Ny(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Vte(e){return new zF(e)}function qF(e){this._context=e}qF.prototype={areaStart:ky,areaEnd:ky,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Ny(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Wte(e){return new qF(e)}function HF(e){this._context=e}HF.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:Ny(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Kte(e){return new HF(e)}function $F(e){this._context=e}$F.prototype={areaStart:ky,areaEnd:ky,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function Gte(e){return new $F(e)}function v7(e){return e<0?-1:1}function y7(e,t,r){var n=e._x1-e._x0,a=t-e._x1,s=(e._y1-e._y0)/(n||a<0&&-0),l=(r-e._y1)/(a||n<0&&-0),o=(s*a+l*n)/(n+a);return(v7(s)+v7(l))*Math.min(Math.abs(s),Math.abs(l),.5*Math.abs(o))||0}function w7(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function S4(e,t,r){var n=e._x0,a=e._y0,s=e._x1,l=e._y1,o=(s-n)/3;e._context.bezierCurveTo(n+o,a+o*t,s-o,l-o*r,s,l)}function _y(e){this._context=e}_y.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:S4(this,this._t0,w7(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,S4(this,w7(this,r=y7(this,e,t)),r);break;default:S4(this,this._t0,r=y7(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function VF(e){this._context=new WF(e)}(VF.prototype=Object.create(_y.prototype)).point=function(e,t){_y.prototype.point.call(this,t,e)};function WF(e){this._context=e}WF.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,a,s){this._context.bezierCurveTo(t,e,n,r,s,a)}};function Xte(e){return new _y(e)}function Yte(e){return new VF(e)}function KF(e){this._context=e}KF.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=k7(e),a=k7(t),s=0,l=1;l<r;++s,++l)this._context.bezierCurveTo(n[0][s],a[0][s],n[1][s],a[1][s],e[l],t[l]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function k7(e){var t,r=e.length-1,n,a=new Array(r),s=new Array(r),l=new Array(r);for(a[0]=0,s[0]=2,l[0]=e[0]+2*e[1],t=1;t<r-1;++t)a[t]=1,s[t]=4,l[t]=4*e[t]+2*e[t+1];for(a[r-1]=2,s[r-1]=7,l[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=a[t]/s[t-1],s[t]-=n,l[t]-=n*l[t-1];for(a[r-1]=l[r-1]/s[r-1],t=r-2;t>=0;--t)a[t]=(l[t]-a[t+1])/s[t];for(s[r-1]=(e[r]+a[r-1])/2,t=0;t<r-1;++t)s[t]=2*e[t+1]-a[t+1];return[a,s]}function Zte(e){return new KF(e)}function Hw(e,t){this._context=e,this._t=t}Hw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function Qte(e){return new Hw(e,.5)}function Jte(e){return new Hw(e,0)}function ere(e){return new Hw(e,1)}function B1(e,t){if((l=e.length)>1)for(var r=1,n,a,s=e[t[0]],l,o=s.length;r<l;++r)for(a=s,s=e[t[r]],n=0;n<o;++n)s[n][1]+=s[n][0]=isNaN(a[n][1])?a[n][0]:a[n][1]}function M_(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function tre(e,t){return e[t]}function rre(e){const t=[];return t.key=e,t}function nre(){var e=vs([]),t=M_,r=B1,n=tre;function a(s){var l=Array.from(e.apply(this,arguments),rre),o,c=l.length,d=-1,f;for(const p of s)for(o=0,++d;o<c;++o)(l[o][d]=[0,+n(p,l[o].key,d,s)]).data=p;for(o=0,f=D6(t(l));o<c;++o)l[f[o]].index=o;return r(l,f),l}return a.keys=function(s){return arguments.length?(e=typeof s=="function"?s:vs(Array.from(s)),a):e},a.value=function(s){return arguments.length?(n=typeof s=="function"?s:vs(+s),a):n},a.order=function(s){return arguments.length?(t=s==null?M_:typeof s=="function"?s:vs(Array.from(s)),a):t},a.offset=function(s){return arguments.length?(r=s??B1,a):r},a}function are(e,t){if((n=e.length)>0){for(var r,n,a=0,s=e[0].length,l;a<s;++a){for(l=r=0;r<n;++r)l+=e[r][a][1]||0;if(l)for(r=0;r<n;++r)e[r][a][1]/=l}B1(e,t)}}function sre(e,t){if((a=e.length)>0){for(var r=0,n=e[t[0]],a,s=n.length;r<s;++r){for(var l=0,o=0;l<a;++l)o+=e[l][r][1]||0;n[r][1]+=n[r][0]=-o/2}B1(e,t)}}function ire(e,t){if(!(!((l=e.length)>0)||!((s=(a=e[t[0]]).length)>0))){for(var r=0,n=1,a,s,l;n<s;++n){for(var o=0,c=0,d=0;o<l;++o){for(var f=e[t[o]],p=f[n][1]||0,y=f[n-1][1]||0,g=(p-y)/2,N=0;N<o;++N){var w=e[t[N]],k=w[n][1]||0,S=w[n-1][1]||0;g+=k-S}c+=p,d+=g*p}a[n-1][1]+=a[n-1][0]=r,c&&(r-=d/c)}a[n-1][1]+=a[n-1][0]=r,B1(e,t)}}var j4={},C4={},N7;function lre(){return N7||(N7=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==="__proto__"}e.isUnsafeProperty=t})(C4)),C4}var A4={},_7;function GF(){return _7||(_7=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}e.isDeepKey=t})(A4)),A4}var E4={},S7;function L6(){return S7||(S7=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var n;return typeof r=="string"||typeof r=="symbol"?r:Object.is((n=r==null?void 0:r.valueOf)==null?void 0:n.call(r),-0)?"-0":String(r)}e.toKey=t})(E4)),E4}var T4={},O4={},j7;function ore(){return j7||(j7=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){if(r==null)return"";if(typeof r=="string")return r;if(Array.isArray(r))return r.map(t).join(",");const n=String(r);return n==="0"&&Object.is(Number(r),-0)?"-0":n}e.toString=t})(O4)),O4}var C7;function R6(){return C7||(C7=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ore(),r=L6();function n(a){if(Array.isArray(a))return a.map(r.toKey);if(typeof a=="symbol")return[a];a=t.toString(a);const s=[],l=a.length;if(l===0)return s;let o=0,c="",d="",f=!1;for(a.charCodeAt(0)===46&&(s.push(""),o++);o<l;){const p=a[o];d?p==="\\"&&o+1<l?(o++,c+=a[o]):p===d?d="":c+=p:f?p==='"'||p==="'"?d=p:p==="]"?(f=!1,s.push(c),c=""):c+=p:p==="["?(f=!0,c&&(s.push(c),c="")):p==="."?c&&(s.push(c),c=""):c+=p,o++}return c&&s.push(c),s}e.toPath=n})(T4)),T4}var A7;function F6(){return A7||(A7=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=lre(),r=GF(),n=L6(),a=R6();function s(o,c,d){if(o==null)return d;switch(typeof c){case"string":{if(t.isUnsafeProperty(c))return d;const f=o[c];return f===void 0?r.isDeepKey(c)?s(o,a.toPath(c),d):d:f}case"number":case"symbol":{typeof c=="number"&&(c=n.toKey(c));const f=o[c];return f===void 0?d:f}default:{if(Array.isArray(c))return l(o,c,d);if(Object.is(c==null?void 0:c.valueOf(),-0)?c="-0":c=String(c),t.isUnsafeProperty(c))return d;const f=o[c];return f===void 0?d:f}}}function l(o,c,d){if(c.length===0)return d;let f=o;for(let p=0;p<c.length;p++){if(f==null||t.isUnsafeProperty(c[p]))return d;f=f[c[p]]}return f===void 0?d:f}e.get=s})(j4)),j4}var P4,E7;function cre(){return E7||(E7=1,P4=F6().get),P4}var dre=cre();const Em=gd(dre);var bl=e=>e===0?0:e>0?1:-1,Tc=e=>typeof e=="number"&&e!=+e,V0=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,Zr=e=>(typeof e=="number"||e instanceof Number)&&!Tc(e),Uu=e=>Zr(e)||typeof e=="string",ure=0,Yg=e=>{var t=++ure;return"".concat(e||"").concat(t)},no=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Zr(t)&&typeof t!="string")return n;var s;if(V0(t)){if(r==null)return n;var l=t.indexOf("%");s=r*parseFloat(t.slice(0,l))/100}else s=+t;return Tc(s)&&(s=n),a&&r!=null&&s>r&&(s=r),s},XF=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,r={},n=0;n<t;n++)if(!r[e[n]])r[e[n]]=!0;else return!0;return!1};function ns(e,t,r){return Zr(e)&&Zr(t)?e+r*(t-e):t}function YF(e,t,r){if(!(!e||!e.length))return e.find(n=>n&&(typeof t=="function"?t(n):Em(n,t))===r)}var As=e=>e===null||typeof e>"u",Lb=e=>As(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1)),hre=["type","size","sizeType"];function L_(){return L_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},L_.apply(null,arguments)}function T7(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function O7(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?T7(Object(r),!0).forEach(function(n){fre(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T7(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function fre(e,t,r){return(t=mre(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mre(e){var t=xre(e,"string");return typeof t=="symbol"?t:t+""}function xre(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function pre(e,t){if(e==null)return{};var r,n,a=gre(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function gre(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var ZF={symbolCircle:M6,symbolCross:Ite,symbolDiamond:Mte,symbolSquare:Lte,symbolStar:Ute,symbolTriangle:zte,symbolWye:Hte},bre=Math.PI/180,vre=e=>{var t="symbol".concat(Lb(e));return ZF[t]||M6},yre=(e,t,r)=>{if(t==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var n=18*bre;return 1.25*e*e*(Math.tan(n)-Math.tan(n*2)*Math.tan(n)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},wre=(e,t)=>{ZF["symbol".concat(Lb(e))]=t},B6=e=>{var{type:t="circle",size:r=64,sizeType:n="area"}=e,a=pre(e,hre),s=O7(O7({},a),{},{type:t,size:r,sizeType:n}),l="circle";typeof t=="string"&&(l=t);var o=()=>{var y=vre(l),g=$te().type(y).size(yre(r,n,l)),N=g();if(N!==null)return N},{className:c,cx:d,cy:f}=s,p=Eo(s);return d===+d&&f===+f&&r===+r?T.createElement("path",L_({},p,{className:Zn("recharts-symbols",c),transform:"translate(".concat(d,", ").concat(f,")"),d:o()})):null};B6.registerSymbol=wre;var U6=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(T.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var n={};return Object.keys(r).forEach(a=>{O6(a)&&(n[a]=(s=>r[a](r,s)))}),n},kre=(e,t,r)=>n=>(e(t,r,n),null),Rb=(e,t,r)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var n=null;return Object.keys(e).forEach(a=>{var s=e[a];O6(a)&&typeof s=="function"&&(n||(n={}),n[a]=kre(s,t,r))}),n};function R_(){return R_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},R_.apply(null,arguments)}function P7(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Nre(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?P7(Object(r),!0).forEach(function(n){z6(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P7(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function z6(e,t,r){return(t=_re(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _re(e){var t=Sre(e,"string");return typeof t=="symbol"?t:t+""}function Sre(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Yc=32;class q6 extends T.PureComponent{renderIcon(t,r){var{inactiveColor:n}=this.props,a=Yc/2,s=Yc/6,l=Yc/3,o=t.inactive?n:t.color,c=r??t.type;if(c==="none")return null;if(c==="plainline")return T.createElement("line",{strokeWidth:4,fill:"none",stroke:o,strokeDasharray:t.payload.strokeDasharray,x1:0,y1:a,x2:Yc,y2:a,className:"recharts-legend-icon"});if(c==="line")return T.createElement("path",{strokeWidth:4,fill:"none",stroke:o,d:"M0,".concat(a,"h").concat(l,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(2*l,",").concat(a,`
            H`).concat(Yc,"M").concat(2*l,",").concat(a,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(l,",").concat(a),className:"recharts-legend-icon"});if(c==="rect")return T.createElement("path",{stroke:"none",fill:o,d:"M0,".concat(Yc/8,"h").concat(Yc,"v").concat(Yc*3/4,"h").concat(-Yc,"z"),className:"recharts-legend-icon"});if(T.isValidElement(t.legendIcon)){var d=Nre({},t);return delete d.legendIcon,T.cloneElement(t.legendIcon,d)}return T.createElement(B6,{fill:o,cx:a,cy:a,size:Yc,sizeType:"diameter",type:c})}renderItems(){var{payload:t,iconSize:r,layout:n,formatter:a,inactiveColor:s,iconType:l}=this.props,o={x:0,y:0,width:Yc,height:Yc},c={display:n==="horizontal"?"inline-block":"block",marginRight:10},d={display:"inline-block",verticalAlign:"middle",marginRight:4};return t.map((f,p)=>{var y=f.formatter||a,g=Zn({"recharts-legend-item":!0,["legend-item-".concat(p)]:!0,inactive:f.inactive});if(f.type==="none")return null;var N=f.inactive?s:f.color,w=y?y(f.value,f,p):f.value;return T.createElement("li",R_({className:g,style:c,key:"legend-item-".concat(p)},Rb(this.props,f,p)),T.createElement(P6,{width:r,height:r,viewBox:o,style:d,"aria-label":"".concat(w," legend icon")},this.renderIcon(f,l)),T.createElement("span",{className:"recharts-legend-item-text",style:{color:N}},w))})}render(){var{payload:t,layout:r,align:n}=this.props;if(!t||!t.length)return null;var a={padding:0,margin:0,textAlign:r==="horizontal"?n:"left"};return T.createElement("ul",{className:"recharts-default-legend",style:a},this.renderItems())}}z6(q6,"displayName","Legend");z6(q6,"defaultProps",{align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"});var I4={},D4={},I7;function jre(){return I7||(I7=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){const a=new Map;for(let s=0;s<r.length;s++){const l=r[s],o=n(l);a.has(o)||a.set(o,l)}return Array.from(a.values())}e.uniqBy=t})(D4)),D4}var M4={},D7;function QF(){return D7||(D7=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r}e.identity=t})(M4)),M4}var L4={},R4={},F4={},M7;function Cre(){return M7||(M7=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Number.isSafeInteger(r)&&r>=0}e.isLength=t})(F4)),F4}var L7;function H6(){return L7||(L7=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Cre();function r(n){return n!=null&&typeof n!="function"&&t.isLength(n.length)}e.isArrayLike=r})(R4)),R4}var B4={},R7;function Are(){return R7||(R7=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="object"&&r!==null}e.isObjectLike=t})(B4)),B4}var F7;function Ere(){return F7||(F7=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=H6(),r=Are();function n(a){return r.isObjectLike(a)&&t.isArrayLike(a)}e.isArrayLikeObject=n})(L4)),L4}var U4={},z4={},B7;function Tre(){return B7||(B7=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=F6();function r(n){return function(a){return t.get(a,n)}}e.property=r})(z4)),z4}var q4={},H4={},$4={},V4={},U7;function JF(){return U7||(U7=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r!==null&&(typeof r=="object"||typeof r=="function")}e.isObject=t})(V4)),V4}var W4={},z7;function eB(){return z7||(z7=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null||typeof r!="object"&&typeof r!="function"}e.isPrimitive=t})(W4)),W4}var K4={},q7;function tB(){return q7||(q7=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){return r===n||Number.isNaN(r)&&Number.isNaN(n)}e.eq=t})(K4)),K4}var H7;function Ore(){return H7||(H7=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=JF(),r=eB(),n=tB();function a(f,p,y){return typeof y!="function"?a(f,p,()=>{}):s(f,p,function g(N,w,k,S,O,E){const D=y(N,w,k,S,O,E);return D!==void 0?!!D:s(N,w,g,E)},new Map)}function s(f,p,y,g){if(p===f)return!0;switch(typeof p){case"object":return l(f,p,y,g);case"function":return Object.keys(p).length>0?s(f,{...p},y,g):n.eq(f,p);default:return t.isObject(f)?typeof p=="string"?p==="":!0:n.eq(f,p)}}function l(f,p,y,g){if(p==null)return!0;if(Array.isArray(p))return c(f,p,y,g);if(p instanceof Map)return o(f,p,y,g);if(p instanceof Set)return d(f,p,y,g);const N=Object.keys(p);if(f==null)return N.length===0;if(N.length===0)return!0;if(g!=null&&g.has(p))return g.get(p)===f;g==null||g.set(p,f);try{for(let w=0;w<N.length;w++){const k=N[w];if(!r.isPrimitive(f)&&!(k in f)||p[k]===void 0&&f[k]!==void 0||p[k]===null&&f[k]!==null||!y(f[k],p[k],k,f,p,g))return!1}return!0}finally{g==null||g.delete(p)}}function o(f,p,y,g){if(p.size===0)return!0;if(!(f instanceof Map))return!1;for(const[N,w]of p.entries()){const k=f.get(N);if(y(k,w,N,f,p,g)===!1)return!1}return!0}function c(f,p,y,g){if(p.length===0)return!0;if(!Array.isArray(f))return!1;const N=new Set;for(let w=0;w<p.length;w++){const k=p[w];let S=!1;for(let O=0;O<f.length;O++){if(N.has(O))continue;const E=f[O];let D=!1;if(y(E,k,w,f,p,g)&&(D=!0),D){N.add(O),S=!0;break}}if(!S)return!1}return!0}function d(f,p,y,g){return p.size===0?!0:f instanceof Set?c([...f],[...p],y,g):!1}e.isMatchWith=a,e.isSetMatch=d})($4)),$4}var $7;function rB(){return $7||($7=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Ore();function r(n,a){return t.isMatchWith(n,a,()=>{})}e.isMatch=r})(H4)),H4}var G4={},X4={},Y4={},V7;function Pre(){return V7||(V7=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Object.getOwnPropertySymbols(r).filter(n=>Object.prototype.propertyIsEnumerable.call(r,n))}e.getSymbols=t})(Y4)),Y4}var Z4={},W7;function nB(){return W7||(W7=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}e.getTag=t})(Z4)),Z4}var Q4={},K7;function aB(){return K7||(K7=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",r="[object String]",n="[object Number]",a="[object Boolean]",s="[object Arguments]",l="[object Symbol]",o="[object Date]",c="[object Map]",d="[object Set]",f="[object Array]",p="[object Function]",y="[object ArrayBuffer]",g="[object Object]",N="[object Error]",w="[object DataView]",k="[object Uint8Array]",S="[object Uint8ClampedArray]",O="[object Uint16Array]",E="[object Uint32Array]",D="[object BigUint64Array]",H="[object Int8Array]",W="[object Int16Array]",R="[object Int32Array]",z="[object BigInt64Array]",U="[object Float32Array]",Z="[object Float64Array]";e.argumentsTag=s,e.arrayBufferTag=y,e.arrayTag=f,e.bigInt64ArrayTag=z,e.bigUint64ArrayTag=D,e.booleanTag=a,e.dataViewTag=w,e.dateTag=o,e.errorTag=N,e.float32ArrayTag=U,e.float64ArrayTag=Z,e.functionTag=p,e.int16ArrayTag=W,e.int32ArrayTag=R,e.int8ArrayTag=H,e.mapTag=c,e.numberTag=n,e.objectTag=g,e.regexpTag=t,e.setTag=d,e.stringTag=r,e.symbolTag=l,e.uint16ArrayTag=O,e.uint32ArrayTag=E,e.uint8ArrayTag=k,e.uint8ClampedArrayTag=S})(Q4)),Q4}var J4={},G7;function Ire(){return G7||(G7=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}e.isTypedArray=t})(J4)),J4}var X7;function sB(){return X7||(X7=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Pre(),r=nB(),n=aB(),a=eB(),s=Ire();function l(f,p){return o(f,void 0,f,new Map,p)}function o(f,p,y,g=new Map,N=void 0){const w=N==null?void 0:N(f,p,y,g);if(w!==void 0)return w;if(a.isPrimitive(f))return f;if(g.has(f))return g.get(f);if(Array.isArray(f)){const k=new Array(f.length);g.set(f,k);for(let S=0;S<f.length;S++)k[S]=o(f[S],S,y,g,N);return Object.hasOwn(f,"index")&&(k.index=f.index),Object.hasOwn(f,"input")&&(k.input=f.input),k}if(f instanceof Date)return new Date(f.getTime());if(f instanceof RegExp){const k=new RegExp(f.source,f.flags);return k.lastIndex=f.lastIndex,k}if(f instanceof Map){const k=new Map;g.set(f,k);for(const[S,O]of f)k.set(S,o(O,S,y,g,N));return k}if(f instanceof Set){const k=new Set;g.set(f,k);for(const S of f)k.add(o(S,void 0,y,g,N));return k}if(typeof Buffer<"u"&&Buffer.isBuffer(f))return f.subarray();if(s.isTypedArray(f)){const k=new(Object.getPrototypeOf(f)).constructor(f.length);g.set(f,k);for(let S=0;S<f.length;S++)k[S]=o(f[S],S,y,g,N);return k}if(f instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&f instanceof SharedArrayBuffer)return f.slice(0);if(f instanceof DataView){const k=new DataView(f.buffer.slice(0),f.byteOffset,f.byteLength);return g.set(f,k),c(k,f,y,g,N),k}if(typeof File<"u"&&f instanceof File){const k=new File([f],f.name,{type:f.type});return g.set(f,k),c(k,f,y,g,N),k}if(typeof Blob<"u"&&f instanceof Blob){const k=new Blob([f],{type:f.type});return g.set(f,k),c(k,f,y,g,N),k}if(f instanceof Error){const k=new f.constructor;return g.set(f,k),k.message=f.message,k.name=f.name,k.stack=f.stack,k.cause=f.cause,c(k,f,y,g,N),k}if(f instanceof Boolean){const k=new Boolean(f.valueOf());return g.set(f,k),c(k,f,y,g,N),k}if(f instanceof Number){const k=new Number(f.valueOf());return g.set(f,k),c(k,f,y,g,N),k}if(f instanceof String){const k=new String(f.valueOf());return g.set(f,k),c(k,f,y,g,N),k}if(typeof f=="object"&&d(f)){const k=Object.create(Object.getPrototypeOf(f));return g.set(f,k),c(k,f,y,g,N),k}return f}function c(f,p,y=f,g,N){const w=[...Object.keys(p),...t.getSymbols(p)];for(let k=0;k<w.length;k++){const S=w[k],O=Object.getOwnPropertyDescriptor(f,S);(O==null||O.writable)&&(f[S]=o(p[S],S,y,g,N))}}function d(f){switch(r.getTag(f)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=l,e.cloneDeepWithImpl=o,e.copyProperties=c})(X4)),X4}var Y7;function Dre(){return Y7||(Y7=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=sB();function r(n){return t.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}e.cloneDeep=r})(G4)),G4}var Z7;function Mre(){return Z7||(Z7=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=rB(),r=Dre();function n(a){return a=r.cloneDeep(a),s=>t.isMatch(s,a)}e.matches=n})(q4)),q4}var e3={},t3={},r3={},Q7;function Lre(){return Q7||(Q7=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=sB(),r=aB();function n(a,s){return t.cloneDeepWith(a,(l,o,c,d)=>{const f=s==null?void 0:s(l,o,c,d);if(f!==void 0)return f;if(typeof a=="object")switch(Object.prototype.toString.call(a)){case r.numberTag:case r.stringTag:case r.booleanTag:{const p=new a.constructor(a==null?void 0:a.valueOf());return t.copyProperties(p,a),p}case r.argumentsTag:{const p={};return t.copyProperties(p,a),p.length=a.length,p[Symbol.iterator]=a[Symbol.iterator],p}default:return}})}e.cloneDeepWith=n})(r3)),r3}var J7;function Rre(){return J7||(J7=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Lre();function r(n){return t.cloneDeepWith(n)}e.cloneDeep=r})(t3)),t3}var n3={},a3={},eO;function iB(){return eO||(eO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function r(n,a=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<a;case"symbol":return!1;case"string":return t.test(n)}}e.isIndex=r})(a3)),a3}var s3={},tO;function Fre(){return tO||(tO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=nB();function r(n){return n!==null&&typeof n=="object"&&t.getTag(n)==="[object Arguments]"}e.isArguments=r})(s3)),s3}var rO;function Bre(){return rO||(rO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=GF(),r=iB(),n=Fre(),a=R6();function s(l,o){let c;if(Array.isArray(o)?c=o:typeof o=="string"&&t.isDeepKey(o)&&(l==null?void 0:l[o])==null?c=a.toPath(o):c=[o],c.length===0)return!1;let d=l;for(let f=0;f<c.length;f++){const p=c[f];if((d==null||!Object.hasOwn(d,p))&&!((Array.isArray(d)||n.isArguments(d))&&r.isIndex(p)&&p<d.length))return!1;d=d[p]}return!0}e.has=s})(n3)),n3}var nO;function Ure(){return nO||(nO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=rB(),r=L6(),n=Rre(),a=F6(),s=Bre();function l(o,c){switch(typeof o){case"object":{Object.is(o==null?void 0:o.valueOf(),-0)&&(o="-0");break}case"number":{o=r.toKey(o);break}}return c=n.cloneDeep(c),function(d){const f=a.get(d,o);return f===void 0?s.has(d,o):c===void 0?f===void 0:t.isMatch(f,c)}}e.matchesProperty=l})(e3)),e3}var aO;function zre(){return aO||(aO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=QF(),r=Tre(),n=Mre(),a=Ure();function s(l){if(l==null)return t.identity;switch(typeof l){case"function":return l;case"object":return Array.isArray(l)&&l.length===2?a.matchesProperty(l[0],l[1]):n.matches(l);case"string":case"symbol":case"number":return r.property(l)}}e.iteratee=s})(U4)),U4}var sO;function qre(){return sO||(sO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=jre(),r=QF(),n=Ere(),a=zre();function s(l,o=r.identity){return n.isArrayLikeObject(l)?t.uniqBy(Array.from(l),a.iteratee(o)):[]}e.uniqBy=s})(I4)),I4}var i3,iO;function Hre(){return iO||(iO=1,i3=qre().uniqBy),i3}var $re=Hre();const lO=gd($re);function lB(e,t,r){return t===!0?lO(e,r):typeof t=="function"?lO(e,t):e}var l3={exports:{}},o3={},c3={exports:{}},d3={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oO;function Vre(){if(oO)return d3;oO=1;var e=X1();function t(p,y){return p===y&&(p!==0||1/p===1/y)||p!==p&&y!==y}var r=typeof Object.is=="function"?Object.is:t,n=e.useState,a=e.useEffect,s=e.useLayoutEffect,l=e.useDebugValue;function o(p,y){var g=y(),N=n({inst:{value:g,getSnapshot:y}}),w=N[0].inst,k=N[1];return s(function(){w.value=g,w.getSnapshot=y,c(w)&&k({inst:w})},[p,g,y]),a(function(){return c(w)&&k({inst:w}),p(function(){c(w)&&k({inst:w})})},[p]),l(g),g}function c(p){var y=p.getSnapshot;p=p.value;try{var g=y();return!r(p,g)}catch{return!0}}function d(p,y){return y()}var f=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:o;return d3.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:f,d3}var cO;function Wre(){return cO||(cO=1,c3.exports=Vre()),c3.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dO;function Kre(){if(dO)return o3;dO=1;var e=X1(),t=Wre();function r(d,f){return d===f&&(d!==0||1/d===1/f)||d!==d&&f!==f}var n=typeof Object.is=="function"?Object.is:r,a=t.useSyncExternalStore,s=e.useRef,l=e.useEffect,o=e.useMemo,c=e.useDebugValue;return o3.useSyncExternalStoreWithSelector=function(d,f,p,y,g){var N=s(null);if(N.current===null){var w={hasValue:!1,value:null};N.current=w}else w=N.current;N=o(function(){function S(W){if(!O){if(O=!0,E=W,W=y(W),g!==void 0&&w.hasValue){var R=w.value;if(g(R,W))return D=R}return D=W}if(R=D,n(E,W))return R;var z=y(W);return g!==void 0&&g(R,z)?(E=W,R):(E=W,D=z)}var O=!1,E,D,H=p===void 0?null:p;return[function(){return S(f())},H===null?void 0:function(){return S(H())}]},[f,p,y,g]);var k=a(d,N[0],N[1]);return l(function(){w.hasValue=!0,w.value=k},[k]),c(k),k},o3}var uO;function Gre(){return uO||(uO=1,l3.exports=Kre()),l3.exports}var Xre=Gre(),$6=T.createContext(null),Yre=e=>e,zs=()=>{var e=T.useContext($6);return e?e.store.dispatch:Yre},ey=()=>{},Zre=()=>ey,Qre=(e,t)=>e===t;function Jr(e){var t=T.useContext($6);return Xre.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:Zre,t?t.store.getState:ey,t?t.store.getState:ey,t?e:ey,Qre)}function Jre(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function ene(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function tne(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(r=>typeof r=="function")){const r=e.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${t}[${r}]`)}}var hO=e=>Array.isArray(e)?e:[e];function rne(e){const t=Array.isArray(e[0])?e[0]:e;return tne(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function nne(e,t){const r=[],{length:n}=e;for(let a=0;a<n;a++)r.push(e[a].apply(null,t));return r}var ane=class{constructor(e){this.value=e}deref(){return this.value}},sne=typeof WeakRef<"u"?WeakRef:ane,ine=0,fO=1;function x2(){return{s:ine,v:void 0,o:null,p:null}}function oB(e,t={}){let r=x2();const{resultEqualityCheck:n}=t;let a,s=0;function l(){var p;let o=r;const{length:c}=arguments;for(let y=0,g=c;y<g;y++){const N=arguments[y];if(typeof N=="function"||typeof N=="object"&&N!==null){let w=o.o;w===null&&(o.o=w=new WeakMap);const k=w.get(N);k===void 0?(o=x2(),w.set(N,o)):o=k}else{let w=o.p;w===null&&(o.p=w=new Map);const k=w.get(N);k===void 0?(o=x2(),w.set(N,o)):o=k}}const d=o;let f;if(o.s===fO)f=o.v;else if(f=e.apply(null,arguments),s++,n){const y=((p=a==null?void 0:a.deref)==null?void 0:p.call(a))??a;y!=null&&n(y,f)&&(f=y,s!==0&&s--),a=typeof f=="object"&&f!==null||typeof f=="function"?new sne(f):f}return d.s=fO,d.v=f,f}return l.clearCache=()=>{r=x2(),l.resetResultsCount()},l.resultsCount=()=>s,l.resetResultsCount=()=>{s=0},l}function lne(e,...t){const r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,n=(...a)=>{let s=0,l=0,o,c={},d=a.pop();typeof d=="object"&&(c=d,d=a.pop()),Jre(d,`createSelector expects an output function after the inputs, but received: [${typeof d}]`);const f={...r,...c},{memoize:p,memoizeOptions:y=[],argsMemoize:g=oB,argsMemoizeOptions:N=[]}=f,w=hO(y),k=hO(N),S=rne(a),O=p(function(){return s++,d.apply(null,arguments)},...w),E=g(function(){l++;const H=nne(S,arguments);return o=O.apply(null,H),o},...k);return Object.assign(E,{resultFunc:d,memoizedResultFunc:O,dependencies:S,dependencyRecomputations:()=>l,resetDependencyRecomputations:()=>{l=0},lastResult:()=>o,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:p,argsMemoize:g})};return Object.assign(n,{withTypes:()=>n}),n}var Ct=lne(oB),one=Object.assign((e,t=Ct)=>{ene(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const r=Object.keys(e),n=r.map(s=>e[s]);return t(n,(...s)=>s.reduce((l,o,c)=>(l[r[c]]=o,l),{}))},{withTypes:()=>one}),u3={},h3={},f3={},mO;function cne(){return mO||(mO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const r=(n,a,s)=>{if(n!==a){const l=t(n),o=t(a);if(l===o&&l===0){if(n<a)return s==="desc"?1:-1;if(n>a)return s==="desc"?-1:1}return s==="desc"?o-l:l-o}return 0};e.compareValues=r})(f3)),f3}var m3={},x3={},xO;function cB(){return xO||(xO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"||r instanceof Symbol}e.isSymbol=t})(x3)),x3}var pO;function dne(){return pO||(pO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=cB(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function a(s,l){return Array.isArray(s)?!1:typeof s=="number"||typeof s=="boolean"||s==null||t.isSymbol(s)?!0:typeof s=="string"&&(n.test(s)||!r.test(s))||l!=null&&Object.hasOwn(l,s)}e.isKey=a})(m3)),m3}var gO;function une(){return gO||(gO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=cne(),r=dne(),n=R6();function a(s,l,o,c){if(s==null)return[];o=c?void 0:o,Array.isArray(s)||(s=Object.values(s)),Array.isArray(l)||(l=l==null?[null]:[l]),l.length===0&&(l=[null]),Array.isArray(o)||(o=o==null?[]:[o]),o=o.map(g=>String(g));const d=(g,N)=>{let w=g;for(let k=0;k<N.length&&w!=null;++k)w=w[N[k]];return w},f=(g,N)=>N==null||g==null?N:typeof g=="object"&&"key"in g?Object.hasOwn(N,g.key)?N[g.key]:d(N,g.path):typeof g=="function"?g(N):Array.isArray(g)?d(N,g):typeof N=="object"?N[g]:N,p=l.map(g=>(Array.isArray(g)&&g.length===1&&(g=g[0]),g==null||typeof g=="function"||Array.isArray(g)||r.isKey(g)?g:{key:g,path:n.toPath(g)}));return s.map(g=>({original:g,criteria:p.map(N=>f(N,g))})).slice().sort((g,N)=>{for(let w=0;w<p.length;w++){const k=t.compareValues(g.criteria[w],N.criteria[w],o[w]);if(k!==0)return k}return 0}).map(g=>g.original)}e.orderBy=a})(h3)),h3}var p3={},bO;function hne(){return bO||(bO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n=1){const a=[],s=Math.floor(n),l=(o,c)=>{for(let d=0;d<o.length;d++){const f=o[d];Array.isArray(f)&&c<s?l(f,c+1):a.push(f)}};return l(r,0),a}e.flatten=t})(p3)),p3}var g3={},vO;function dB(){return vO||(vO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=iB(),r=H6(),n=JF(),a=tB();function s(l,o,c){return n.isObject(c)&&(typeof o=="number"&&r.isArrayLike(c)&&t.isIndex(o)&&o<c.length||typeof o=="string"&&o in c)?a.eq(c[o],l):!1}e.isIterateeCall=s})(g3)),g3}var yO;function fne(){return yO||(yO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=une(),r=hne(),n=dB();function a(s,...l){const o=l.length;return o>1&&n.isIterateeCall(s,l[0],l[1])?l=[]:o>2&&n.isIterateeCall(l[0],l[1],l[2])&&(l=[l[0]]),t.orderBy(s,r.flatten(l),["asc"])}e.sortBy=a})(u3)),u3}var b3,wO;function mne(){return wO||(wO=1,b3=fne().sortBy),b3}var xne=mne();const $w=gd(xne);var uB=e=>e.legend.settings,pne=e=>e.legend.size,gne=e=>e.legend.payload,bne=Ct([gne,uB],(e,t)=>{var{itemSorter:r}=t,n=e.flat(1);return r?$w(n,r):n});function vne(){return Jr(bne)}var p2=1;function hB(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,r]=T.useState({height:0,left:0,top:0,width:0}),n=T.useCallback(a=>{if(a!=null){var s=a.getBoundingClientRect(),l={height:s.height,left:s.left,top:s.top,width:s.width};(Math.abs(l.height-t.height)>p2||Math.abs(l.left-t.left)>p2||Math.abs(l.top-t.top)>p2||Math.abs(l.width-t.width)>p2)&&r({height:l.height,left:l.left,top:l.top,width:l.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,n]}function Tl(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var yne=typeof Symbol=="function"&&Symbol.observable||"@@observable",kO=yne,v3=()=>Math.random().toString(36).substring(7).split("").join("."),wne={INIT:`@@redux/INIT${v3()}`,REPLACE:`@@redux/REPLACE${v3()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${v3()}`},Sy=wne;function V6(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function fB(e,t,r){if(typeof e!="function")throw new Error(Tl(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Tl(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Tl(1));return r(fB)(e,t)}let n=e,a=t,s=new Map,l=s,o=0,c=!1;function d(){l===s&&(l=new Map,s.forEach((k,S)=>{l.set(S,k)}))}function f(){if(c)throw new Error(Tl(3));return a}function p(k){if(typeof k!="function")throw new Error(Tl(4));if(c)throw new Error(Tl(5));let S=!0;d();const O=o++;return l.set(O,k),function(){if(S){if(c)throw new Error(Tl(6));S=!1,d(),l.delete(O),s=null}}}function y(k){if(!V6(k))throw new Error(Tl(7));if(typeof k.type>"u")throw new Error(Tl(8));if(typeof k.type!="string")throw new Error(Tl(17));if(c)throw new Error(Tl(9));try{c=!0,a=n(a,k)}finally{c=!1}return(s=l).forEach(O=>{O()}),k}function g(k){if(typeof k!="function")throw new Error(Tl(10));n=k,y({type:Sy.REPLACE})}function N(){const k=p;return{subscribe(S){if(typeof S!="object"||S===null)throw new Error(Tl(11));function O(){const D=S;D.next&&D.next(f())}return O(),{unsubscribe:k(O)}},[kO](){return this}}}return y({type:Sy.INIT}),{dispatch:y,subscribe:p,getState:f,replaceReducer:g,[kO]:N}}function kne(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:Sy.INIT})>"u")throw new Error(Tl(12));if(typeof r(void 0,{type:Sy.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Tl(13))})}function mB(e){const t=Object.keys(e),r={};for(let s=0;s<t.length;s++){const l=t[s];typeof e[l]=="function"&&(r[l]=e[l])}const n=Object.keys(r);let a;try{kne(r)}catch(s){a=s}return function(l={},o){if(a)throw a;let c=!1;const d={};for(let f=0;f<n.length;f++){const p=n[f],y=r[p],g=l[p],N=y(g,o);if(typeof N>"u")throw o&&o.type,new Error(Tl(14));d[p]=N,c=c||N!==g}return c=c||n.length!==Object.keys(l).length,c?d:l}}function jy(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function Nne(...e){return t=>(r,n)=>{const a=t(r,n);let s=()=>{throw new Error(Tl(15))};const l={getState:a.getState,dispatch:(c,...d)=>s(c,...d)},o=e.map(c=>c(l));return s=jy(...o)(a.dispatch),{...a,dispatch:s}}}function xB(e){return V6(e)&&"type"in e&&typeof e.type=="string"}var pB=Symbol.for("immer-nothing"),NO=Symbol.for("immer-draftable"),Oc=Symbol.for("immer-state");function Wd(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Zg=Object.getPrototypeOf;function Tm(e){return!!e&&!!e[Oc]}function W0(e){var t;return e?gB(e)||Array.isArray(e)||!!e[NO]||!!((t=e.constructor)!=null&&t[NO])||Fb(e)||Ww(e):!1}var _ne=Object.prototype.constructor.toString(),_O=new WeakMap;function gB(e){if(!e||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);if(t===null||t===Object.prototype)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;if(r===Object)return!0;if(typeof r!="function")return!1;let n=_O.get(r);return n===void 0&&(n=Function.toString.call(r),_O.set(r,n)),n===_ne}function Cy(e,t,r=!0){Vw(e)===0?(r?Reflect.ownKeys(e):Object.keys(e)).forEach(a=>{t(a,e[a],e)}):e.forEach((n,a)=>t(a,n,e))}function Vw(e){const t=e[Oc];return t?t.type_:Array.isArray(e)?1:Fb(e)?2:Ww(e)?3:0}function F_(e,t){return Vw(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function bB(e,t,r){const n=Vw(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function Sne(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Fb(e){return e instanceof Map}function Ww(e){return e instanceof Set}function qf(e){return e.copy_||e.base_}function B_(e,t){if(Fb(e))return new Map(e);if(Ww(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=gB(e);if(t===!0||t==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(e);delete n[Oc];let a=Reflect.ownKeys(n);for(let s=0;s<a.length;s++){const l=a[s],o=n[l];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(n[l]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[l]})}return Object.create(Zg(e),n)}else{const n=Zg(e);if(n!==null&&r)return{...e};const a=Object.create(n);return Object.assign(a,e)}}function W6(e,t=!1){return Kw(e)||Tm(e)||!W0(e)||(Vw(e)>1&&Object.defineProperties(e,{set:g2,add:g2,clear:g2,delete:g2}),Object.freeze(e),t&&Object.values(e).forEach(r=>W6(r,!0))),e}function jne(){Wd(2)}var g2={value:jne};function Kw(e){return e===null||typeof e!="object"?!0:Object.isFrozen(e)}var Cne={};function Om(e){const t=Cne[e];return t||Wd(0,e),t}var Qg;function vB(){return Qg}function Ane(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function SO(e,t){t&&(Om("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function U_(e){z_(e),e.drafts_.forEach(Ene),e.drafts_=null}function z_(e){e===Qg&&(Qg=e.parent_)}function jO(e){return Qg=Ane(Qg,e)}function Ene(e){const t=e[Oc];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function CO(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[Oc].modified_&&(U_(t),Wd(4)),W0(e)&&(e=Ay(t,e),t.parent_||Ey(t,e)),t.patches_&&Om("Patches").generateReplacementPatches_(r[Oc].base_,e,t.patches_,t.inversePatches_)):e=Ay(t,r,[]),U_(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==pB?e:void 0}function Ay(e,t,r){if(Kw(t))return t;const n=e.immer_.shouldUseStrictIteration(),a=t[Oc];if(!a)return Cy(t,(s,l)=>AO(e,a,t,s,l,r),n),t;if(a.scope_!==e)return t;if(!a.modified_)return Ey(e,a.base_,!0),a.base_;if(!a.finalized_){a.finalized_=!0,a.scope_.unfinalizedDrafts_--;const s=a.copy_;let l=s,o=!1;a.type_===3&&(l=new Set(s),s.clear(),o=!0),Cy(l,(c,d)=>AO(e,a,s,c,d,r,o),n),Ey(e,s,!1),r&&e.patches_&&Om("Patches").generatePatches_(a,r,e.patches_,e.inversePatches_)}return a.copy_}function AO(e,t,r,n,a,s,l){if(a==null||typeof a!="object"&&!l)return;const o=Kw(a);if(!(o&&!l)){if(Tm(a)){const c=s&&t&&t.type_!==3&&!F_(t.assigned_,n)?s.concat(n):void 0,d=Ay(e,a,c);if(bB(r,n,d),Tm(d))e.canAutoFreeze_=!1;else return}else l&&r.add(a);if(W0(a)&&!o){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1||t&&t.base_&&t.base_[n]===a&&o)return;Ay(e,a),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&(Fb(r)?r.has(n):Object.prototype.propertyIsEnumerable.call(r,n))&&Ey(e,a)}}}function Ey(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&W6(t,r)}function Tne(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:vB(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=n,s=K6;r&&(a=[n],s=Jg);const{revoke:l,proxy:o}=Proxy.revocable(a,s);return n.draft_=o,n.revoke_=l,o}var K6={get(e,t){if(t===Oc)return e;const r=qf(e);if(!F_(r,t))return One(e,r,t);const n=r[t];return e.finalized_||!W0(n)?n:n===y3(e.base_,t)?(w3(e),e.copy_[t]=H_(n,e)):n},has(e,t){return t in qf(e)},ownKeys(e){return Reflect.ownKeys(qf(e))},set(e,t,r){const n=yB(qf(e),t);if(n!=null&&n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const a=y3(qf(e),t),s=a==null?void 0:a[Oc];if(s&&s.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(Sne(r,a)&&(r!==void 0||F_(e.base_,t)))return!0;w3(e),q_(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return y3(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,w3(e),q_(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=qf(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){Wd(11)},getPrototypeOf(e){return Zg(e.base_)},setPrototypeOf(){Wd(12)}},Jg={};Cy(K6,(e,t)=>{Jg[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Jg.deleteProperty=function(e,t){return Jg.set.call(this,e,t,void 0)};Jg.set=function(e,t,r){return K6.set.call(this,e[0],t,r,e[0])};function y3(e,t){const r=e[Oc];return(r?qf(r):e)[t]}function One(e,t,r){var a;const n=yB(t,r);return n?"value"in n?n.value:(a=n.get)==null?void 0:a.call(e.draft_):void 0}function yB(e,t){if(!(t in e))return;let r=Zg(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Zg(r)}}function q_(e){e.modified_||(e.modified_=!0,e.parent_&&q_(e.parent_))}function w3(e){e.copy_||(e.copy_=B_(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var Pne=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){const s=r;r=t;const l=this;return function(c=s,...d){return l.produce(c,f=>r.call(this,f,...d))}}typeof r!="function"&&Wd(6),n!==void 0&&typeof n!="function"&&Wd(7);let a;if(W0(t)){const s=jO(this),l=H_(t,void 0);let o=!0;try{a=r(l),o=!1}finally{o?U_(s):z_(s)}return SO(s,n),CO(a,s)}else if(!t||typeof t!="object"){if(a=r(t),a===void 0&&(a=t),a===pB&&(a=void 0),this.autoFreeze_&&W6(a,!0),n){const s=[],l=[];Om("Patches").generateReplacementPatches_(t,a,s,l),n(s,l)}return a}else Wd(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(l,...o)=>this.produceWithPatches(l,c=>t(c,...o));let n,a;return[this.produce(t,r,(l,o)=>{n=l,a=o}),n,a]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),typeof(e==null?void 0:e.useStrictIteration)=="boolean"&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){W0(e)||Wd(8),Tm(e)&&(e=M0(e));const t=jO(this),r=H_(e,void 0);return r[Oc].isManual_=!0,z_(t),r}finishDraft(e,t){const r=e&&e[Oc];(!r||!r.isManual_)&&Wd(9);const{scope_:n}=r;return SO(n,t),CO(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const a=t[r];if(a.path.length===0&&a.op==="replace"){e=a.value;break}}r>-1&&(t=t.slice(r+1));const n=Om("Patches").applyPatches_;return Tm(e)?n(e,t):this.produce(e,a=>n(a,t))}};function H_(e,t){const r=Fb(e)?Om("MapSet").proxyMap_(e,t):Ww(e)?Om("MapSet").proxySet_(e,t):Tne(e,t);return(t?t.scope_:vB()).drafts_.push(r),r}function M0(e){return Tm(e)||Wd(10,e),wB(e)}function wB(e){if(!W0(e)||Kw(e))return e;const t=e[Oc];let r,n=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=B_(e,t.scope_.immer_.useStrictShallowCopy_),n=t.scope_.immer_.shouldUseStrictIteration()}else r=B_(e,!0);return Cy(r,(a,s)=>{bB(r,a,wB(s))},n),t&&(t.finalized_=!1),r}var $_=new Pne,kB=$_.produce,Ine=$_.setUseStrictIteration.bind($_);function NB(e){return({dispatch:r,getState:n})=>a=>s=>typeof s=="function"?s(r,n,e):a(s)}var Dne=NB(),Mne=NB,Lne=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?jy:jy.apply(null,arguments)};function fd(e,t){function r(...n){if(t){let a=t(...n);if(!a)throw new Error(Ec(0));return{type:e,payload:a.payload,..."meta"in a&&{meta:a.meta},..."error"in a&&{error:a.error}}}return{type:e,payload:n[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=n=>xB(n)&&n.type===e,r}var _B=class pg extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,pg.prototype)}static get[Symbol.species](){return pg}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new pg(...t[0].concat(this)):new pg(...t.concat(this))}};function EO(e){return W0(e)?kB(e,()=>{}):e}function b2(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function Rne(e){return typeof e=="boolean"}var Fne=()=>function(t){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:a=!0,actionCreatorCheck:s=!0}=t??{};let l=new _B;return r&&(Rne(r)?l.push(Dne):l.push(Mne(r.extraArgument))),l},SB="RTK_autoBatch",No=()=>e=>({payload:e,meta:{[SB]:!0}}),TO=e=>t=>{setTimeout(t,e)},jB=(e={type:"raf"})=>t=>(...r)=>{const n=t(...r);let a=!0,s=!1,l=!1;const o=new Set,c=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:TO(10):e.type==="callback"?e.queueNotification:TO(e.timeout),d=()=>{l=!1,s&&(s=!1,o.forEach(f=>f()))};return Object.assign({},n,{subscribe(f){const p=()=>a&&f(),y=n.subscribe(p);return o.add(f),()=>{y(),o.delete(f)}},dispatch(f){var p;try{return a=!((p=f==null?void 0:f.meta)!=null&&p[SB]),s=!a,s&&(l||(l=!0,c(d))),n.dispatch(f)}finally{a=!0}}})},Bne=e=>function(r){const{autoBatch:n=!0}=r??{};let a=new _B(e);return n&&a.push(jB(typeof n=="object"?n:void 0)),a};function Une(e){const t=Fne(),{reducer:r=void 0,middleware:n,devTools:a=!0,preloadedState:s=void 0,enhancers:l=void 0}=e||{};let o;if(typeof r=="function")o=r;else if(V6(r))o=mB(r);else throw new Error(Ec(1));let c;typeof n=="function"?c=n(t):c=t();let d=jy;a&&(d=Lne({trace:!1,...typeof a=="object"&&a}));const f=Nne(...c),p=Bne(f);let y=typeof l=="function"?l(p):p();const g=d(...y);return fB(o,s,g)}function CB(e){const t={},r=[];let n;const a={addCase(s,l){const o=typeof s=="string"?s:s.type;if(!o)throw new Error(Ec(28));if(o in t)throw new Error(Ec(29));return t[o]=l,a},addAsyncThunk(s,l){return l.pending&&(t[s.pending.type]=l.pending),l.rejected&&(t[s.rejected.type]=l.rejected),l.fulfilled&&(t[s.fulfilled.type]=l.fulfilled),l.settled&&r.push({matcher:s.settled,reducer:l.settled}),a},addMatcher(s,l){return r.push({matcher:s,reducer:l}),a},addDefaultCase(s){return n=s,a}};return e(a),[t,r,n]}Ine(!1);function zne(e){return typeof e=="function"}function qne(e,t){let[r,n,a]=CB(t),s;if(zne(e))s=()=>EO(e());else{const o=EO(e);s=()=>o}function l(o=s(),c){let d=[r[c.type],...n.filter(({matcher:f})=>f(c)).map(({reducer:f})=>f)];return d.filter(f=>!!f).length===0&&(d=[a]),d.reduce((f,p)=>{if(p)if(Tm(f)){const g=p(f,c);return g===void 0?f:g}else{if(W0(f))return kB(f,y=>p(y,c));{const y=p(f,c);if(y===void 0){if(f===null)return f;throw Error("A case reducer on a non-draftable value must not return undefined")}return y}}return f},o)}return l.getInitialState=s,l}var Hne="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",$ne=(e=21)=>{let t="",r=e;for(;r--;)t+=Hne[Math.random()*64|0];return t},Vne=Symbol.for("rtk-slice-createasyncthunk");function Wne(e,t){return`${e}/${t}`}function Kne({creators:e}={}){var r;const t=(r=e==null?void 0:e.asyncThunk)==null?void 0:r[Vne];return function(a){const{name:s,reducerPath:l=s}=a;if(!s)throw new Error(Ec(11));const o=(typeof a.reducers=="function"?a.reducers(Xne()):a.reducers)||{},c=Object.keys(o),d={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},f={addCase(D,H){const W=typeof D=="string"?D:D.type;if(!W)throw new Error(Ec(12));if(W in d.sliceCaseReducersByType)throw new Error(Ec(13));return d.sliceCaseReducersByType[W]=H,f},addMatcher(D,H){return d.sliceMatchers.push({matcher:D,reducer:H}),f},exposeAction(D,H){return d.actionCreators[D]=H,f},exposeCaseReducer(D,H){return d.sliceCaseReducersByName[D]=H,f}};c.forEach(D=>{const H=o[D],W={reducerName:D,type:Wne(s,D),createNotation:typeof a.reducers=="function"};Zne(H)?Jne(W,H,f,t):Yne(W,H,f)});function p(){const[D={},H=[],W=void 0]=typeof a.extraReducers=="function"?CB(a.extraReducers):[a.extraReducers],R={...D,...d.sliceCaseReducersByType};return qne(a.initialState,z=>{for(let U in R)z.addCase(U,R[U]);for(let U of d.sliceMatchers)z.addMatcher(U.matcher,U.reducer);for(let U of H)z.addMatcher(U.matcher,U.reducer);W&&z.addDefaultCase(W)})}const y=D=>D,g=new Map,N=new WeakMap;let w;function k(D,H){return w||(w=p()),w(D,H)}function S(){return w||(w=p()),w.getInitialState()}function O(D,H=!1){function W(z){let U=z[D];return typeof U>"u"&&H&&(U=b2(N,W,S)),U}function R(z=y){const U=b2(g,H,()=>new WeakMap);return b2(U,z,()=>{const Z={};for(const[q,K]of Object.entries(a.selectors??{}))Z[q]=Gne(K,z,()=>b2(N,z,S),H);return Z})}return{reducerPath:D,getSelectors:R,get selectors(){return R(W)},selectSlice:W}}const E={name:s,reducer:k,actions:d.actionCreators,caseReducers:d.sliceCaseReducersByName,getInitialState:S,...O(l),injectInto(D,{reducerPath:H,...W}={}){const R=H??l;return D.inject({reducerPath:R,reducer:k},W),{...E,...O(R,!0)}}};return E}}function Gne(e,t,r,n){function a(s,...l){let o=t(s);return typeof o>"u"&&n&&(o=r()),e(o,...l)}return a.unwrapped=e,a}var Dc=Kne();function Xne(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function Yne({type:e,reducerName:t,createNotation:r},n,a){let s,l;if("reducer"in n){if(r&&!Qne(n))throw new Error(Ec(17));s=n.reducer,l=n.prepare}else s=n;a.addCase(e,s).exposeCaseReducer(t,s).exposeAction(t,l?fd(e,l):fd(e))}function Zne(e){return e._reducerDefinitionType==="asyncThunk"}function Qne(e){return e._reducerDefinitionType==="reducerWithPrepare"}function Jne({type:e,reducerName:t},r,n,a){if(!a)throw new Error(Ec(18));const{payloadCreator:s,fulfilled:l,pending:o,rejected:c,settled:d,options:f}=r,p=a(e,s,f);n.exposeAction(t,p),l&&n.addCase(p.fulfilled,l),o&&n.addCase(p.pending,o),c&&n.addCase(p.rejected,c),d&&n.addMatcher(p.settled,d),n.exposeCaseReducer(t,{fulfilled:l||v2,pending:o||v2,rejected:c||v2,settled:d||v2})}function v2(){}var eae="task",AB="listener",EB="completed",G6="cancelled",tae=`task-${G6}`,rae=`task-${EB}`,V_=`${AB}-${G6}`,nae=`${AB}-${EB}`,Gw=class{constructor(e){Aa(this,"name","TaskAbortError");Aa(this,"message");this.code=e,this.message=`${eae} ${G6} (reason: ${e})`}},X6=(e,t)=>{if(typeof e!="function")throw new TypeError(Ec(32))},Ty=()=>{},TB=(e,t=Ty)=>(e.catch(t),e),OB=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),fm=(e,t)=>{const r=e.signal;r.aborted||("reason"in r||Object.defineProperty(r,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},mm=e=>{if(e.aborted){const{reason:t}=e;throw new Gw(t)}};function PB(e,t){let r=Ty;return new Promise((n,a)=>{const s=()=>a(new Gw(e.reason));if(e.aborted){s();return}r=OB(e,s),t.finally(()=>r()).then(n,a)}).finally(()=>{r=Ty})}var aae=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(r){return{status:r instanceof Gw?"cancelled":"rejected",error:r}}finally{t==null||t()}},Oy=e=>t=>TB(PB(e,t).then(r=>(mm(e),r))),IB=e=>{const t=Oy(e);return r=>t(new Promise(n=>setTimeout(n,r)))},{assign:h1}=Object,OO={},Xw="listenerMiddleware",sae=(e,t)=>{const r=n=>OB(e,()=>fm(n,e.reason));return(n,a)=>{X6(n);const s=new AbortController;r(s);const l=aae(async()=>{mm(e),mm(s.signal);const o=await n({pause:Oy(s.signal),delay:IB(s.signal),signal:s.signal});return mm(s.signal),o},()=>fm(s,rae));return a!=null&&a.autoJoin&&t.push(l.catch(Ty)),{result:Oy(e)(l),cancel(){fm(s,tae)}}}},iae=(e,t)=>{const r=async(n,a)=>{mm(t);let s=()=>{};const o=[new Promise((c,d)=>{let f=e({predicate:n,effect:(p,y)=>{y.unsubscribe(),c([p,y.getState(),y.getOriginalState()])}});s=()=>{f(),d()}})];a!=null&&o.push(new Promise(c=>setTimeout(c,a,null)));try{const c=await PB(t,Promise.race(o));return mm(t),c}finally{s()}};return(n,a)=>TB(r(n,a))},DB=e=>{let{type:t,actionCreator:r,matcher:n,predicate:a,effect:s}=e;if(t)a=fd(t).match;else if(r)t=r.type,a=r.match;else if(n)a=n;else if(!a)throw new Error(Ec(21));return X6(s),{predicate:a,type:t,effect:s}},MB=h1(e=>{const{type:t,predicate:r,effect:n}=DB(e);return{id:$ne(),effect:n,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(Ec(22))}}},{withTypes:()=>MB}),PO=(e,t)=>{const{type:r,effect:n,predicate:a}=DB(t);return Array.from(e.values()).find(s=>(typeof r=="string"?s.type===r:s.predicate===a)&&s.effect===n)},W_=e=>{e.pending.forEach(t=>{fm(t,V_)})},lae=(e,t)=>()=>{for(const r of t.keys())W_(r);e.clear()},IO=(e,t,r)=>{try{e(t,r)}catch(n){setTimeout(()=>{throw n},0)}},LB=h1(fd(`${Xw}/add`),{withTypes:()=>LB}),oae=fd(`${Xw}/removeAll`),RB=h1(fd(`${Xw}/remove`),{withTypes:()=>RB}),cae=(...e)=>{console.error(`${Xw}/error`,...e)},Bb=(e={})=>{const t=new Map,r=new Map,n=g=>{const N=r.get(g)??0;r.set(g,N+1)},a=g=>{const N=r.get(g)??1;N===1?r.delete(g):r.set(g,N-1)},{extra:s,onError:l=cae}=e;X6(l);const o=g=>(g.unsubscribe=()=>t.delete(g.id),t.set(g.id,g),N=>{g.unsubscribe(),N!=null&&N.cancelActive&&W_(g)}),c=g=>{const N=PO(t,g)??MB(g);return o(N)};h1(c,{withTypes:()=>c});const d=g=>{const N=PO(t,g);return N&&(N.unsubscribe(),g.cancelActive&&W_(N)),!!N};h1(d,{withTypes:()=>d});const f=async(g,N,w,k)=>{const S=new AbortController,O=iae(c,S.signal),E=[];try{g.pending.add(S),n(g),await Promise.resolve(g.effect(N,h1({},w,{getOriginalState:k,condition:(D,H)=>O(D,H).then(Boolean),take:O,delay:IB(S.signal),pause:Oy(S.signal),extra:s,signal:S.signal,fork:sae(S.signal,E),unsubscribe:g.unsubscribe,subscribe:()=>{t.set(g.id,g)},cancelActiveListeners:()=>{g.pending.forEach((D,H,W)=>{D!==S&&(fm(D,V_),W.delete(D))})},cancel:()=>{fm(S,V_),g.pending.delete(S)},throwIfCancelled:()=>{mm(S.signal)}})))}catch(D){D instanceof Gw||IO(l,D,{raisedBy:"effect"})}finally{await Promise.all(E),fm(S,nae),a(g),g.pending.delete(S)}},p=lae(t,r);return{middleware:g=>N=>w=>{if(!xB(w))return N(w);if(LB.match(w))return c(w.payload);if(oae.match(w)){p();return}if(RB.match(w))return d(w.payload);let k=g.getState();const S=()=>{if(k===OO)throw new Error(Ec(23));return k};let O;try{if(O=N(w),t.size>0){const E=g.getState(),D=Array.from(t.values());for(const H of D){let W=!1;try{W=H.predicate(w,E,k)}catch(R){W=!1,IO(l,R,{raisedBy:"predicate"})}W&&f(H,w,g,S)}}}finally{k=OO}return O},startListening:c,stopListening:d,clearListeners:p}};function Ec(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var dae={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},FB=Dc({name:"chartLayout",initialState:dae,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var r,n,a,s;e.margin.top=(r=t.payload.top)!==null&&r!==void 0?r:0,e.margin.right=(n=t.payload.right)!==null&&n!==void 0?n:0,e.margin.bottom=(a=t.payload.bottom)!==null&&a!==void 0?a:0,e.margin.left=(s=t.payload.left)!==null&&s!==void 0?s:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:uae,setLayout:hae,setChartSize:fae,setScale:mae}=FB.actions,xae=FB.reducer;function DO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function MO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?DO(Object(r),!0).forEach(function(n){pae(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):DO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function pae(e,t,r){return(t=gae(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gae(e){var t=bae(e,"string");return typeof t=="symbol"?t:t+""}function bae(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Py=Math.PI/180,vae=e=>e*180/Math.PI,Li=(e,t,r,n)=>({x:e+Math.cos(-Py*n)*r,y:t+Math.sin(-Py*n)*r}),BB=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},yae=(e,t)=>{var{x:r,y:n}=e,{x:a,y:s}=t;return Math.sqrt((r-a)**2+(n-s)**2)},wae=(e,t)=>{var{x:r,y:n}=e,{cx:a,cy:s}=t,l=yae({x:r,y:n},{x:a,y:s});if(l<=0)return{radius:l,angle:0};var o=(r-a)/l,c=Math.acos(o);return n>s&&(c=2*Math.PI-c),{radius:l,angle:vae(c),angleInRadian:c}},kae=e=>{var{startAngle:t,endAngle:r}=e,n=Math.floor(t/360),a=Math.floor(r/360),s=Math.min(n,a);return{startAngle:t-s*360,endAngle:r-s*360}},Nae=(e,t)=>{var{startAngle:r,endAngle:n}=t,a=Math.floor(r/360),s=Math.floor(n/360),l=Math.min(a,s);return e+l*360},_ae=(e,t)=>{var{x:r,y:n}=e,{radius:a,angle:s}=wae({x:r,y:n},t),{innerRadius:l,outerRadius:o}=t;if(a<l||a>o||a===0)return null;var{startAngle:c,endAngle:d}=kae(t),f=s,p;if(c<=d){for(;f>d;)f-=360;for(;f<c;)f+=360;p=f>=c&&f<=d}else{for(;f>c;)f-=360;for(;f<d;)f+=360;p=f>=d&&f<=c}return p?MO(MO({},t),{},{radius:a,angle:Nae(f,t)}):null};function UB(e,t,r){return Array.isArray(e)&&e&&t+r!==0?e.slice(t,r+1):e}function LO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ld(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?LO(Object(r),!0).forEach(function(n){Sae(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):LO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Sae(e,t,r){return(t=jae(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jae(e){var t=Cae(e,"string");return typeof t=="symbol"?t:t+""}function Cae(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function as(e,t,r){return As(e)||As(t)?r:Uu(t)?Em(e,t,r):typeof t=="function"?t(e):r}var Aae=(e,t,r,n,a)=>{var s,l=-1,o=(s=t==null?void 0:t.length)!==null&&s!==void 0?s:0;if(o<=1||e==null)return 0;if(n==="angleAxis"&&a!=null&&Math.abs(Math.abs(a[1]-a[0])-360)<=1e-6)for(var c=0;c<o;c++){var d=c>0?r[c-1].coordinate:r[o-1].coordinate,f=r[c].coordinate,p=c>=o-1?r[0].coordinate:r[c+1].coordinate,y=void 0;if(bl(f-d)!==bl(p-f)){var g=[];if(bl(p-f)===bl(a[1]-a[0])){y=p;var N=f+a[1]-a[0];g[0]=Math.min(N,(N+d)/2),g[1]=Math.max(N,(N+d)/2)}else{y=d;var w=p+a[1]-a[0];g[0]=Math.min(f,(w+f)/2),g[1]=Math.max(f,(w+f)/2)}var k=[Math.min(f,(y+f)/2),Math.max(f,(y+f)/2)];if(e>k[0]&&e<=k[1]||e>=g[0]&&e<=g[1]){({index:l}=r[c]);break}}else{var S=Math.min(d,p),O=Math.max(d,p);if(e>(S+f)/2&&e<=(O+f)/2){({index:l}=r[c]);break}}}else if(t){for(var E=0;E<o;E++)if(E===0&&e<=(t[E].coordinate+t[E+1].coordinate)/2||E>0&&E<o-1&&e>(t[E].coordinate+t[E-1].coordinate)/2&&e<=(t[E].coordinate+t[E+1].coordinate)/2||E===o-1&&e>(t[E].coordinate+t[E-1].coordinate)/2){({index:l}=t[E]);break}}return l},Eae=(e,t,r)=>{if(t&&r){var{width:n,height:a}=r,{align:s,verticalAlign:l,layout:o}=t;if((o==="vertical"||o==="horizontal"&&l==="middle")&&s!=="center"&&Zr(e[s]))return ld(ld({},e),{},{[s]:e[s]+(n||0)});if((o==="horizontal"||o==="vertical"&&s==="center")&&l!=="middle"&&Zr(e[l]))return ld(ld({},e),{},{[l]:e[l]+(a||0)})}return e},Vu=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",zB=(e,t,r,n)=>{if(n)return e.map(o=>o.coordinate);var a,s,l=e.map(o=>(o.coordinate===t&&(a=!0),o.coordinate===r&&(s=!0),o.coordinate));return a||l.push(t),s||l.push(r),l},qB=(e,t,r)=>{if(!e)return null;var{duplicateDomain:n,type:a,range:s,scale:l,realScaleType:o,isCategorical:c,categoricalDomain:d,tickCount:f,ticks:p,niceTicks:y,axisType:g}=e;if(!l)return null;var N=o==="scaleBand"&&l.bandwidth?l.bandwidth()/2:2,w=a==="category"&&l.bandwidth?l.bandwidth()/N:0;if(w=g==="angleAxis"&&s&&s.length>=2?bl(s[0]-s[1])*2*w:w,p||y){var k=(p||y||[]).map((S,O)=>{var E=n?n.indexOf(S):S;return{coordinate:l(E)+w,value:S,offset:w,index:O}});return k.filter(S=>!Tc(S.coordinate))}return c&&d?d.map((S,O)=>({coordinate:l(S)+w,value:S,index:O,offset:w})):l.ticks&&f!=null?l.ticks(f).map((S,O)=>({coordinate:l(S)+w,value:S,offset:w,index:O})):l.domain().map((S,O)=>({coordinate:l(S)+w,value:n?n[S]:S,index:O,offset:w}))},RO=1e-4,Tae=e=>{var t=e.domain();if(!(!t||t.length<=2)){var r=t.length,n=e.range(),a=Math.min(n[0],n[1])-RO,s=Math.max(n[0],n[1])+RO,l=e(t[0]),o=e(t[r-1]);(l<a||l>s||o<a||o>s)&&e.domain([t[0],t[r-1]])}},Oae=(e,t)=>{if(!t||t.length!==2||!Zr(t[0])||!Zr(t[1]))return e;var r=Math.min(t[0],t[1]),n=Math.max(t[0],t[1]),a=[e[0],e[1]];return(!Zr(e[0])||e[0]<r)&&(a[0]=r),(!Zr(e[1])||e[1]>n)&&(a[1]=n),a[0]>n&&(a[0]=n),a[1]<r&&(a[1]=r),a},Pae=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var a=0,s=0,l=0;l<t;++l){var o=Tc(e[l][r][1])?e[l][r][0]:e[l][r][1];o>=0?(e[l][r][0]=a,e[l][r][1]=a+o,a=e[l][r][1]):(e[l][r][0]=s,e[l][r][1]=s+o,s=e[l][r][1])}},Iae=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var a=0,s=0;s<t;++s){var l=Tc(e[s][r][1])?e[s][r][0]:e[s][r][1];l>=0?(e[s][r][0]=a,e[s][r][1]=a+l,a=e[s][r][1]):(e[s][r][0]=0,e[s][r][1]=0)}},Dae={sign:Pae,expand:are,none:B1,silhouette:sre,wiggle:ire,positive:Iae},Mae=(e,t,r)=>{var n=Dae[r],a=nre().keys(t).value((s,l)=>+as(s,l,0)).order(M_).offset(n);return a(e)};function HB(e){return e==null?void 0:String(e)}function Iy(e){var{axis:t,ticks:r,bandSize:n,entry:a,index:s,dataKey:l}=e;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!As(a[t.dataKey])){var o=YF(r,"value",a[t.dataKey]);if(o)return o.coordinate+n/2}return r[s]?r[s].coordinate+n/2:null}var c=as(a,As(l)?t.dataKey:l);return As(c)?null:t.scale(c)}var FO=e=>{var{axis:t,ticks:r,offset:n,bandSize:a,entry:s,index:l}=e;if(t.type==="category")return r[l]?r[l].coordinate+n:null;var o=as(s,t.dataKey,t.scale.domain()[l]);return As(o)?null:t.scale(o)-a/2+n},Lae=e=>{var{numericAxis:t}=e,r=t.scale.domain();if(t.type==="number"){var n=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]);return n<=0&&a>=0?0:a<0?a:n}return r[0]},Rae=e=>{var t=e.flat(2).filter(Zr);return[Math.min(...t),Math.max(...t)]},Fae=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],Bae=(e,t,r)=>{if(e!=null)return Fae(Object.keys(e).reduce((n,a)=>{var s=e[a],{stackedData:l}=s,o=l.reduce((c,d)=>{var f=UB(d,t,r),p=Rae(f);return[Math.min(c[0],p[0]),Math.max(c[1],p[1])]},[1/0,-1/0]);return[Math.min(o[0],n[0]),Math.max(o[1],n[1])]},[1/0,-1/0]))},BO=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,UO=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Pm=(e,t,r)=>{if(e&&e.scale&&e.scale.bandwidth){var n=e.scale.bandwidth();if(!r||n>0)return n}if(e&&t&&t.length>=2){for(var a=$w(t,f=>f.coordinate),s=1/0,l=1,o=a.length;l<o;l++){var c=a[l],d=a[l-1];s=Math.min((c.coordinate||0)-(d.coordinate||0),s)}return s===1/0?0:s}return r?void 0:0};function zO(e){var{tooltipEntrySettings:t,dataKey:r,payload:n,value:a,name:s}=e;return ld(ld({},t),{},{dataKey:r,payload:n,value:a,name:s})}function xf(e,t){if(e)return String(e);if(typeof t=="string")return t}function Uae(e,t,r,n,a){if(r==="horizontal"||r==="vertical"){var s=e>=a.left&&e<=a.left+a.width&&t>=a.top&&t<=a.top+a.height;return s?{x:e,y:t}:null}return n?_ae({x:e,y:t},n):null}var zae=(e,t,r,n)=>{var a=t.find(d=>d&&d.index===r);if(a){if(e==="horizontal")return{x:a.coordinate,y:n.y};if(e==="vertical")return{x:n.x,y:a.coordinate};if(e==="centric"){var s=a.coordinate,{radius:l}=n;return ld(ld(ld({},n),Li(n.cx,n.cy,l,s)),{},{angle:s,radius:l})}var o=a.coordinate,{angle:c}=n;return ld(ld(ld({},n),Li(n.cx,n.cy,o,c)),{},{angle:c,radius:o})}return{x:0,y:0}},qae=(e,t)=>t==="horizontal"?e.x:t==="vertical"?e.y:t==="centric"?e.angle:e.radius,Q0=e=>e.layout.width,J0=e=>e.layout.height,Hae=e=>e.layout.scale,$B=e=>e.layout.margin,Yw=Ct(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),Zw=Ct(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),VB="data-recharts-item-index",WB="data-recharts-item-data-key",Ub=60;function qO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function y2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qO(Object(r),!0).forEach(function(n){$ae(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function $ae(e,t,r){return(t=Vae(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Vae(e){var t=Wae(e,"string");return typeof t=="symbol"?t:t+""}function Wae(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Kae=e=>e.brush.height;function Gae(e){var t=Zw(e);return t.reduce((r,n)=>{if(n.orientation==="left"&&!n.mirror&&!n.hide){var a=typeof n.width=="number"?n.width:Ub;return r+a}return r},0)}function Xae(e){var t=Zw(e);return t.reduce((r,n)=>{if(n.orientation==="right"&&!n.mirror&&!n.hide){var a=typeof n.width=="number"?n.width:Ub;return r+a}return r},0)}function Yae(e){var t=Yw(e);return t.reduce((r,n)=>n.orientation==="top"&&!n.mirror&&!n.hide?r+n.height:r,0)}function Zae(e){var t=Yw(e);return t.reduce((r,n)=>n.orientation==="bottom"&&!n.mirror&&!n.hide?r+n.height:r,0)}var Xi=Ct([Q0,J0,$B,Kae,Gae,Xae,Yae,Zae,uB,pne],(e,t,r,n,a,s,l,o,c,d)=>{var f={left:(r.left||0)+a,right:(r.right||0)+s},p={top:(r.top||0)+l,bottom:(r.bottom||0)+o},y=y2(y2({},p),f),g=y.bottom;y.bottom+=n,y=Eae(y,c,d);var N=e-y.left-y.right,w=t-y.top-y.bottom;return y2(y2({brushBottom:g},y),{},{width:Math.max(N,0),height:Math.max(w,0)})}),Qae=Ct(Xi,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),Y6=Ct(Q0,J0,(e,t)=>({x:0,y:0,width:e,height:t})),Jae=T.createContext(null),Ml=()=>T.useContext(Jae)!=null,Qw=e=>e.brush,Jw=Ct([Qw,Xi,$B],(e,t,r)=>({height:e.height,x:Zr(e.x)?e.x:t.left,y:Zr(e.y)?e.y:t.top+t.height+t.brushBottom-((r==null?void 0:r.bottom)||0),width:Zr(e.width)?e.width:t.width})),k3={},N3={},_3={},HO;function ese(){return HO||(HO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n,{signal:a,edges:s}={}){let l,o=null;const c=s!=null&&s.includes("leading"),d=s==null||s.includes("trailing"),f=()=>{o!==null&&(r.apply(l,o),l=void 0,o=null)},p=()=>{d&&f(),w()};let y=null;const g=()=>{y!=null&&clearTimeout(y),y=setTimeout(()=>{y=null,p()},n)},N=()=>{y!==null&&(clearTimeout(y),y=null)},w=()=>{N(),l=void 0,o=null},k=()=>{f()},S=function(...O){if(a!=null&&a.aborted)return;l=this,o=O;const E=y==null;g(),c&&E&&f()};return S.schedule=g,S.cancel=w,S.flush=k,a==null||a.addEventListener("abort",w,{once:!0}),S}e.debounce=t})(_3)),_3}var $O;function tse(){return $O||($O=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ese();function r(n,a=0,s={}){typeof s!="object"&&(s={});const{leading:l=!1,trailing:o=!0,maxWait:c}=s,d=Array(2);l&&(d[0]="leading"),o&&(d[1]="trailing");let f,p=null;const y=t.debounce(function(...w){f=n.apply(this,w),p=null},a,{edges:d}),g=function(...w){return c!=null&&(p===null&&(p=Date.now()),Date.now()-p>=c)?(f=n.apply(this,w),p=Date.now(),y.cancel(),y.schedule(),f):(y.apply(this,w),f)},N=()=>(y.flush(),f);return g.cancel=y.cancel,g.flush=N,g}e.debounce=r})(N3)),N3}var VO;function rse(){return VO||(VO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=tse();function r(n,a=0,s={}){const{leading:l=!0,trailing:o=!0}=s;return t.debounce(n,a,{leading:l,maxWait:a,trailing:o})}e.throttle=r})(k3)),k3}var S3,WO;function nse(){return WO||(WO=1,S3=rse().throttle),S3}var ase=nse();const sse=gd(ase);var Dy=function(t,r){for(var n=arguments.length,a=new Array(n>2?n-2:0),s=2;s<n;s++)a[s-2]=arguments[s]},KB=(e,t,r)=>{var{width:n="100%",height:a="100%",aspect:s,maxHeight:l}=r,o=V0(n)?e:Number(n),c=V0(a)?t:Number(a);return s&&s>0&&(o?c=o/s:c&&(o=c*s),l&&c>l&&(c=l)),{calculatedWidth:o,calculatedHeight:c}},ise={width:0,height:0,overflow:"visible"},lse={width:0,overflowX:"visible"},ose={height:0,overflowY:"visible"},cse={},dse=e=>{var{width:t,height:r}=e,n=V0(t),a=V0(r);return n&&a?ise:n?lse:a?ose:cse};function use(e){var{width:t,height:r,aspect:n}=e,a=t,s=r;return a===void 0&&s===void 0?(a="100%",s="100%"):a===void 0?a=n&&n>0?void 0:"100%":s===void 0&&(s=n&&n>0?void 0:"100%"),{width:a,height:s}}function Fi(e){return Number.isFinite(e)}function U1(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function K_(){return K_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},K_.apply(null,arguments)}function KO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function GO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?KO(Object(r),!0).forEach(function(n){hse(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):KO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function hse(e,t,r){return(t=fse(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fse(e){var t=mse(e,"string");return typeof t=="symbol"?t:t+""}function mse(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var GB=T.createContext({width:-1,height:-1});function XB(e){var{children:t,width:r,height:n}=e,a=T.useMemo(()=>({width:r,height:n}),[r,n]);return r<=0||n<=0?null:T.createElement(GB.Provider,{value:a},t)}var Z6=()=>T.useContext(GB),xse=T.forwardRef((e,t)=>{var{aspect:r,initialDimension:n={width:-1,height:-1},width:a,height:s,minWidth:l=0,minHeight:o,maxHeight:c,children:d,debounce:f=0,id:p,className:y,onResize:g,style:N={}}=e,w=T.useRef(null),k=T.useRef();k.current=g,T.useImperativeHandle(t,()=>w.current);var[S,O]=T.useState({containerWidth:n.width,containerHeight:n.height}),E=T.useCallback((z,U)=>{O(Z=>{var q=Math.round(z),K=Math.round(U);return Z.containerWidth===q&&Z.containerHeight===K?Z:{containerWidth:q,containerHeight:K}})},[]);T.useEffect(()=>{var z=K=>{var Q,{width:re,height:ae}=K[0].contentRect;E(re,ae),(Q=k.current)===null||Q===void 0||Q.call(k,re,ae)};f>0&&(z=sse(z,f,{trailing:!0,leading:!1}));var U=new ResizeObserver(z),{width:Z,height:q}=w.current.getBoundingClientRect();return E(Z,q),U.observe(w.current),()=>{U.disconnect()}},[E,f]);var{containerWidth:D,containerHeight:H}=S;Dy(!r||r>0,"The aspect(%s) must be greater than zero.",r);var{calculatedWidth:W,calculatedHeight:R}=KB(D,H,{width:a,height:s,aspect:r,maxHeight:c});return Dy(W>0||R>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,W,R,a,s,l,o,r),T.createElement("div",{id:p?"".concat(p):void 0,className:Zn("recharts-responsive-container",y),style:GO(GO({},N),{},{width:a,height:s,minWidth:l,minHeight:o,maxHeight:c}),ref:w},T.createElement("div",{style:dse({width:a,height:s})},T.createElement(XB,{width:W,height:R},d)))}),Kd=T.forwardRef((e,t)=>{var r=Z6();if(U1(r.width)&&U1(r.height))return e.children;var{width:n,height:a}=use({width:e.width,height:e.height,aspect:e.aspect}),{calculatedWidth:s,calculatedHeight:l}=KB(void 0,void 0,{width:n,height:a,aspect:e.aspect,maxHeight:e.maxHeight});return Zr(s)&&Zr(l)?T.createElement(XB,{width:s,height:l},e.children):T.createElement(xse,K_({},e,{width:n,height:a,ref:t}))}),ek=()=>{var e,t=Ml(),r=Jr(Qae),n=Jr(Jw),a=(e=Jr(Qw))===null||e===void 0?void 0:e.padding;return!t||!n||!a?r:{width:n.width-a.left-a.right,height:n.height-a.top-a.bottom,x:a.left,y:a.top}},pse={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},YB=()=>{var e;return(e=Jr(Xi))!==null&&e!==void 0?e:pse},Q6=()=>Jr(Q0),J6=()=>Jr(J0),gse=()=>Jr(e=>e.layout.margin),fa=e=>e.layout.layoutType,zb=()=>Jr(fa),tk=e=>{var t=zs(),r=Ml(),{width:n,height:a}=e,s=Z6(),l=n,o=a;return s&&(l=s.width>0?s.width:n,o=s.height>0?s.height:a),T.useEffect(()=>{!r&&U1(l)&&U1(o)&&t(fae({width:l,height:o}))},[t,r,l,o]),null},bse={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},ZB=Dc({name:"legend",initialState:bse,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload:{reducer(e,t){e.payload.push(t.payload)},prepare:No()},removeLegendPayload:{reducer(e,t){var r=M0(e).payload.indexOf(t.payload);r>-1&&e.payload.splice(r,1)},prepare:No()}}}),{setLegendSize:XO,setLegendSettings:vse,addLegendPayload:QB,removeLegendPayload:JB}=ZB.actions,yse=ZB.reducer,wse=["contextPayload"];function G_(){return G_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},G_.apply(null,arguments)}function YO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function z1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?YO(Object(r),!0).forEach(function(n){ej(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):YO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ej(e,t,r){return(t=kse(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kse(e){var t=Nse(e,"string");return typeof t=="symbol"?t:t+""}function Nse(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _se(e,t){if(e==null)return{};var r,n,a=Sse(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Sse(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function jse(e){return e.value}function Cse(e){var{contextPayload:t}=e,r=_se(e,wse),n=lB(t,e.payloadUniqBy,jse),a=z1(z1({},r),{},{payload:n});return T.isValidElement(e.content)?T.cloneElement(e.content,a):typeof e.content=="function"?T.createElement(e.content,a):T.createElement(q6,a)}function Ase(e,t,r,n,a,s){var{layout:l,align:o,verticalAlign:c}=t,d,f;return(!e||(e.left===void 0||e.left===null)&&(e.right===void 0||e.right===null))&&(o==="center"&&l==="vertical"?d={left:((n||0)-s.width)/2}:d=o==="right"?{right:r&&r.right||0}:{left:r&&r.left||0}),(!e||(e.top===void 0||e.top===null)&&(e.bottom===void 0||e.bottom===null))&&(c==="middle"?f={top:((a||0)-s.height)/2}:f=c==="bottom"?{bottom:r&&r.bottom||0}:{top:r&&r.top||0}),z1(z1({},d),f)}function Ese(e){var t=zs();return T.useEffect(()=>{t(vse(e))},[t,e]),null}function Tse(e){var t=zs();return T.useEffect(()=>(t(XO(e)),()=>{t(XO({width:0,height:0}))}),[t,e]),null}function Ose(e){var t=vne(),r=Cte(),n=gse(),{width:a,height:s,wrapperStyle:l,portal:o}=e,[c,d]=hB([t]),f=Q6(),p=J6();if(f==null||p==null)return null;var y=f-(n.left||0)-(n.right||0),g=Im.getWidthOrHeight(e.layout,s,a,y),N=o?l:z1(z1({position:"absolute",width:(g==null?void 0:g.width)||a||"auto",height:(g==null?void 0:g.height)||s||"auto"},Ase(l,e,n,f,p,c)),l),w=o??r;if(w==null)return null;var k=T.createElement("div",{className:"recharts-legend-wrapper",style:N,ref:d},T.createElement(Ese,{layout:e.layout,align:e.align,verticalAlign:e.verticalAlign,itemSorter:e.itemSorter}),T.createElement(Tse,{width:c.width,height:c.height}),T.createElement(Cse,G_({},e,g,{margin:n,chartWidth:f,chartHeight:p,contextPayload:t})));return GL.createPortal(k,w)}class Im extends T.PureComponent{static getWidthOrHeight(t,r,n,a){return t==="vertical"&&Zr(r)?{height:r}:t==="horizontal"?{width:n||a}:null}render(){return T.createElement(Ose,this.props)}}ej(Im,"displayName","Legend");ej(Im,"defaultProps",{align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"});function X_(){return X_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},X_.apply(null,arguments)}function ZO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function j3(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ZO(Object(r),!0).forEach(function(n){Pse(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ZO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Pse(e,t,r){return(t=Ise(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ise(e){var t=Dse(e,"string");return typeof t=="symbol"?t:t+""}function Dse(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Mse(e){return Array.isArray(e)&&Uu(e[0])&&Uu(e[1])?e.join(" ~ "):e}var Lse=e=>{var{separator:t=" : ",contentStyle:r={},itemStyle:n={},labelStyle:a={},payload:s,formatter:l,itemSorter:o,wrapperClassName:c,labelClassName:d,label:f,labelFormatter:p,accessibilityLayer:y=!1}=e,g=()=>{if(s&&s.length){var H={padding:0,margin:0},W=(o?$w(s,o):s).map((R,z)=>{if(R.type==="none")return null;var U=R.formatter||l||Mse,{value:Z,name:q}=R,K=Z,Q=q;if(U){var re=U(Z,q,R,z,s);if(Array.isArray(re))[K,Q]=re;else if(re!=null)K=re;else return null}var ae=j3({display:"block",paddingTop:4,paddingBottom:4,color:R.color||"#000"},n);return T.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(z),style:ae},Uu(Q)?T.createElement("span",{className:"recharts-tooltip-item-name"},Q):null,Uu(Q)?T.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,T.createElement("span",{className:"recharts-tooltip-item-value"},K),T.createElement("span",{className:"recharts-tooltip-item-unit"},R.unit||""))});return T.createElement("ul",{className:"recharts-tooltip-item-list",style:H},W)}return null},N=j3({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),w=j3({margin:0},a),k=!As(f),S=k?f:"",O=Zn("recharts-default-tooltip",c),E=Zn("recharts-tooltip-label",d);k&&p&&s!==void 0&&s!==null&&(S=p(f,s));var D=y?{role:"status","aria-live":"assertive"}:{};return T.createElement("div",X_({className:O,style:N},D),T.createElement("p",{className:E,style:w},T.isValidElement(S)?S:"".concat(S)),g())},rg="recharts-tooltip-wrapper",Rse={visibility:"hidden"};function Fse(e){var{coordinate:t,translateX:r,translateY:n}=e;return Zn(rg,{["".concat(rg,"-right")]:Zr(r)&&t&&Zr(t.x)&&r>=t.x,["".concat(rg,"-left")]:Zr(r)&&t&&Zr(t.x)&&r<t.x,["".concat(rg,"-bottom")]:Zr(n)&&t&&Zr(t.y)&&n>=t.y,["".concat(rg,"-top")]:Zr(n)&&t&&Zr(t.y)&&n<t.y})}function QO(e){var{allowEscapeViewBox:t,coordinate:r,key:n,offsetTopLeft:a,position:s,reverseDirection:l,tooltipDimension:o,viewBox:c,viewBoxDimension:d}=e;if(s&&Zr(s[n]))return s[n];var f=r[n]-o-(a>0?a:0),p=r[n]+a;if(t[n])return l[n]?f:p;var y=c[n];if(y==null)return 0;if(l[n]){var g=f,N=y;return g<N?Math.max(p,y):Math.max(f,y)}if(d==null)return 0;var w=p+o,k=y+d;return w>k?Math.max(f,y):Math.max(p,y)}function Bse(e){var{translateX:t,translateY:r,useTranslate3d:n}=e;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function Use(e){var{allowEscapeViewBox:t,coordinate:r,offsetTopLeft:n,position:a,reverseDirection:s,tooltipBox:l,useTranslate3d:o,viewBox:c}=e,d,f,p;return l.height>0&&l.width>0&&r?(f=QO({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:a,reverseDirection:s,tooltipDimension:l.width,viewBox:c,viewBoxDimension:c.width}),p=QO({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:a,reverseDirection:s,tooltipDimension:l.height,viewBox:c,viewBoxDimension:c.height}),d=Bse({translateX:f,translateY:p,useTranslate3d:o})):d=Rse,{cssProperties:d,cssClasses:Fse({translateX:f,translateY:p,coordinate:r})}}function JO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function w2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?JO(Object(r),!0).forEach(function(n){Y_(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):JO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Y_(e,t,r){return(t=zse(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zse(e){var t=qse(e,"string");return typeof t=="symbol"?t:t+""}function qse(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class Hse extends T.PureComponent{constructor(){super(...arguments),Y_(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),Y_(this,"handleKeyDown",t=>{if(t.key==="Escape"){var r,n,a,s;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&r!==void 0?r:0,y:(a=(s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==null&&a!==void 0?a:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,r;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:r,animationDuration:n,animationEasing:a,children:s,coordinate:l,hasPayload:o,isAnimationActive:c,offset:d,position:f,reverseDirection:p,useTranslate3d:y,viewBox:g,wrapperStyle:N,lastBoundingBox:w,innerRef:k,hasPortalFromProps:S}=this.props,{cssClasses:O,cssProperties:E}=Use({allowEscapeViewBox:r,coordinate:l,offsetTopLeft:d,position:f,reverseDirection:p,tooltipBox:{height:w.height,width:w.width},useTranslate3d:y,viewBox:g}),D=S?{}:w2(w2({transition:c&&t?"transform ".concat(n,"ms ").concat(a):void 0},E),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&o?"visible":"hidden",position:"absolute",top:0,left:0}),H=w2(w2({},D),{},{visibility:!this.state.dismissed&&t&&o?"visible":"hidden"},N);return T.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:O,style:H,ref:k},s)}}var $se=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),eh={devToolsEnabled:!1,isSsr:$se()},eU=()=>Jr(e=>e.rootProps.accessibilityLayer);function Z_(){return Z_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Z_.apply(null,arguments)}function e9(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function t9(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?e9(Object(r),!0).forEach(function(n){Vse(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):e9(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Vse(e,t,r){return(t=Wse(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Wse(e){var t=Kse(e,"string");return typeof t=="symbol"?t:t+""}function Kse(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var r9={curveBasisClosed:Wte,curveBasisOpen:Kte,curveBasis:Vte,curveBumpX:Ote,curveBumpY:Pte,curveLinearClosed:Gte,curveLinear:qw,curveMonotoneX:Xte,curveMonotoneY:Yte,curveNatural:Zte,curveStep:Qte,curveStepAfter:ere,curveStepBefore:Jte},k2=e=>Fi(e.x)&&Fi(e.y),ng=e=>e.x,ag=e=>e.y,Gse=(e,t)=>{if(typeof e=="function")return e;var r="curve".concat(Lb(e));return(r==="curveMonotone"||r==="curveBump")&&t?r9["".concat(r).concat(t==="vertical"?"Y":"X")]:r9[r]||qw},Xse=e=>{var{type:t="linear",points:r=[],baseLine:n,layout:a,connectNulls:s=!1}=e,l=Gse(t,a),o=s?r.filter(k2):r,c;if(Array.isArray(n)){var d=s?n.filter(p=>k2(p)):n,f=o.map((p,y)=>t9(t9({},p),{},{base:d[y]}));return a==="vertical"?c=m2().y(ag).x1(ng).x0(p=>p.base.x):c=m2().x(ng).y1(ag).y0(p=>p.base.y),c.defined(k2).curve(l),c(f)}return a==="vertical"&&Zr(n)?c=m2().y(ag).x1(ng).x0(n):Zr(n)?c=m2().x(ng).y1(ag).y0(n):c=RF().x(ng).y(ag),c.defined(k2).curve(l),c(o)},f1=e=>{var{className:t,points:r,path:n,pathRef:a}=e;if((!r||!r.length)&&!n)return null;var s=r&&r.length?Xse(e):n;return T.createElement("path",Z_({},Ao(e),U6(e),{className:Zn("recharts-curve",t),d:s===null?void 0:s,ref:a}))},Yse=["x","y","top","left","width","height","className"];function Q_(){return Q_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Q_.apply(null,arguments)}function n9(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Zse(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?n9(Object(r),!0).forEach(function(n){Qse(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n9(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Qse(e,t,r){return(t=Jse(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Jse(e){var t=eie(e,"string");return typeof t=="symbol"?t:t+""}function eie(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function tie(e,t){if(e==null)return{};var r,n,a=rie(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function rie(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var nie=(e,t,r,n,a,s)=>"M".concat(e,",").concat(a,"v").concat(n,"M").concat(s,",").concat(t,"h").concat(r),aie=e=>{var{x:t=0,y:r=0,top:n=0,left:a=0,width:s=0,height:l=0,className:o}=e,c=tie(e,Yse),d=Zse({x:t,y:r,top:n,left:a,width:s,height:l},c);return!Zr(t)||!Zr(r)||!Zr(s)||!Zr(l)||!Zr(n)||!Zr(a)?null:T.createElement("path",Q_({},Eo(d),{className:Zn("recharts-cross",o),d:nie(t,r,s,l,n,a)}))};function sie(e,t,r,n){var a=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-a:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-a,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function a9(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function iie(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?a9(Object(r),!0).forEach(function(n){lie(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a9(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function lie(e,t,r){return(t=oie(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oie(e){var t=cie(e,"string");return typeof t=="symbol"?t:t+""}function cie(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Yi(e,t){var r=iie({},e),n=t,a=Object.keys(t),s=a.reduce((l,o)=>(l[o]===void 0&&n[o]!==void 0&&(l[o]=n[o]),l),r);return s}function die(){}function uie(e){return e!=null}function s9(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function i9(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?s9(Object(r),!0).forEach(function(n){hie(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s9(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function hie(e,t,r){return(t=fie(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fie(e){var t=mie(e,"string");return typeof t=="symbol"?t:t+""}function mie(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var xie=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),tU=(e,t,r)=>e.map(n=>"".concat(xie(n)," ").concat(t,"ms ").concat(r)).join(","),pie=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((r,n)=>r.filter(a=>n.includes(a))),eb=(e,t)=>Object.keys(t).reduce((r,n)=>i9(i9({},r),{},{[n]:e(n,t[n])}),{});function l9(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ol(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?l9(Object(r),!0).forEach(function(n){gie(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l9(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function gie(e,t,r){return(t=bie(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bie(e){var t=vie(e,"string");return typeof t=="symbol"?t:t+""}function vie(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var My=(e,t,r)=>e+(t-e)*r,J_=e=>{var{from:t,to:r}=e;return t!==r},rU=(e,t,r)=>{var n=eb((a,s)=>{if(J_(s)){var[l,o]=e(s.from,s.to,s.velocity);return Ol(Ol({},s),{},{from:l,velocity:o})}return s},t);return r<1?eb((a,s)=>J_(s)?Ol(Ol({},s),{},{velocity:My(s.velocity,n[a].velocity,r),from:My(s.from,n[a].from,r)}):s,t):rU(e,n,r-1)};function yie(e,t,r,n,a,s){var l,o=n.reduce((y,g)=>Ol(Ol({},y),{},{[g]:{from:e[g],velocity:0,to:t[g]}}),{}),c=()=>eb((y,g)=>g.from,o),d=()=>!Object.values(o).filter(J_).length,f=null,p=y=>{l||(l=y);var g=y-l,N=g/r.dt;o=rU(r,o,N),a(Ol(Ol(Ol({},e),t),c())),l=y,d()||(f=s.setTimeout(p))};return()=>(f=s.setTimeout(p),()=>{f()})}function wie(e,t,r,n,a,s,l){var o=null,c=a.reduce((p,y)=>Ol(Ol({},p),{},{[y]:[e[y],t[y]]}),{}),d,f=p=>{d||(d=p);var y=(p-d)/n,g=eb((w,k)=>My(...k,r(y)),c);if(s(Ol(Ol(Ol({},e),t),g)),y<1)o=l.setTimeout(f);else{var N=eb((w,k)=>My(...k,r(1)),c);s(Ol(Ol(Ol({},e),t),N))}};return()=>(o=l.setTimeout(f),()=>{o()})}const kie=(e,t,r,n,a,s)=>{var l=pie(e,t);return r.isStepper===!0?yie(e,t,r,l,a,s):wie(e,t,r,n,l,a,s)};var Ly=1e-4,nU=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],aU=(e,t)=>e.map((r,n)=>r*t**n).reduce((r,n)=>r+n),o9=(e,t)=>r=>{var n=nU(e,t);return aU(n,r)},Nie=(e,t)=>r=>{var n=nU(e,t),a=[...n.map((s,l)=>s*l).slice(1),0];return aU(a,r)},c9=function(){for(var t,r,n,a,s=arguments.length,l=new Array(s),o=0;o<s;o++)l[o]=arguments[o];if(l.length===1)switch(l[0]){case"linear":[t,n,r,a]=[0,0,1,1];break;case"ease":[t,n,r,a]=[.25,.1,.25,1];break;case"ease-in":[t,n,r,a]=[.42,0,1,1];break;case"ease-out":[t,n,r,a]=[.42,0,.58,1];break;case"ease-in-out":[t,n,r,a]=[0,0,.58,1];break;default:{var c=l[0].split("(");c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4&&([t,n,r,a]=c[1].split(")")[0].split(",").map(N=>parseFloat(N)))}}else l.length===4&&([t,n,r,a]=l);var d=o9(t,r),f=o9(n,a),p=Nie(t,r),y=N=>N>1?1:N<0?0:N,g=N=>{for(var w=N>1?1:N,k=w,S=0;S<8;++S){var O=d(k)-w,E=p(k);if(Math.abs(O-w)<Ly||E<Ly)return f(k);k=y(k-O/E)}return f(k)};return g.isStepper=!1,g},_ie=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:n=8,dt:a=17}=t,s=(l,o,c)=>{var d=-(l-o)*r,f=c*n,p=c+(d-f)*a/1e3,y=c*a/1e3+l;return Math.abs(y-o)<Ly&&Math.abs(p)<Ly?[o,0]:[y,p]};return s.isStepper=!0,s.dt=a,s},Sie=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return c9(e);case"spring":return _ie();default:if(e.split("(")[0]==="cubic-bezier")return c9(e)}return typeof e=="function"?e:null};function jie(e){var t,r=()=>null,n=!1,a=null,s=l=>{if(!n){if(Array.isArray(l)){if(!l.length)return;var o=l,[c,...d]=o;if(typeof c=="number"){a=e.setTimeout(s.bind(null,d),c);return}s(c),a=e.setTimeout(s.bind(null,d));return}typeof l=="string"&&(t=l,r(t)),typeof l=="object"&&(t=l,r(t)),typeof l=="function"&&l()}};return{stop:()=>{n=!0},start:l=>{n=!1,a&&(a(),a=null),s(l)},subscribe:l=>(r=l,()=>{r=()=>null}),getTimeoutController:()=>e}}class Cie{setTimeout(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),a=null,s=l=>{l-n>=r?t(l):typeof requestAnimationFrame=="function"&&(a=requestAnimationFrame(s))};return a=requestAnimationFrame(s),()=>{cancelAnimationFrame(a)}}}function Aie(){return jie(new Cie)}var Eie=T.createContext(Aie);function Tie(e,t){var r=T.useContext(Eie);return T.useMemo(()=>t??r(e),[e,t,r])}var Oie={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},d9={t:0},C3={t:1};function tp(e){var t=Yi(e,Oie),{isActive:r,canBegin:n,duration:a,easing:s,begin:l,onAnimationEnd:o,onAnimationStart:c,children:d}=t,f=Tie(t.animationId,t.animationManager),[p,y]=T.useState(r?d9:C3),g=T.useRef(null);return T.useEffect(()=>{r||y(C3)},[r]),T.useEffect(()=>{if(!r||!n)return die;var N=kie(d9,C3,Sie(s),a,y,f.getTimeoutController()),w=()=>{g.current=N()};return f.start([c,l,w,a,o]),()=>{f.stop(),g.current&&g.current(),o()}},[r,n,a,s,l,c,o,f]),d(p.t)}function rp(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=T.useRef(Yg(t)),n=T.useRef(e);return n.current!==e&&(r.current=Yg(t),n.current=e),r.current}var Pie=["radius"],Iie=["radius"];function u9(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function h9(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?u9(Object(r),!0).forEach(function(n){Die(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u9(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Die(e,t,r){return(t=Mie(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Mie(e){var t=Lie(e,"string");return typeof t=="symbol"?t:t+""}function Lie(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ry(){return Ry=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ry.apply(null,arguments)}function f9(e,t){if(e==null)return{};var r,n,a=Rie(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Rie(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var m9=(e,t,r,n,a)=>{var s=Math.min(Math.abs(r)/2,Math.abs(n)/2),l=n>=0?1:-1,o=r>=0?1:-1,c=n>=0&&r>=0||n<0&&r<0?1:0,d;if(s>0&&a instanceof Array){for(var f=[0,0,0,0],p=0,y=4;p<y;p++)f[p]=a[p]>s?s:a[p];d="M".concat(e,",").concat(t+l*f[0]),f[0]>0&&(d+="A ".concat(f[0],",").concat(f[0],",0,0,").concat(c,",").concat(e+o*f[0],",").concat(t)),d+="L ".concat(e+r-o*f[1],",").concat(t),f[1]>0&&(d+="A ".concat(f[1],",").concat(f[1],",0,0,").concat(c,`,
        `).concat(e+r,",").concat(t+l*f[1])),d+="L ".concat(e+r,",").concat(t+n-l*f[2]),f[2]>0&&(d+="A ".concat(f[2],",").concat(f[2],",0,0,").concat(c,`,
        `).concat(e+r-o*f[2],",").concat(t+n)),d+="L ".concat(e+o*f[3],",").concat(t+n),f[3]>0&&(d+="A ".concat(f[3],",").concat(f[3],",0,0,").concat(c,`,
        `).concat(e,",").concat(t+n-l*f[3])),d+="Z"}else if(s>0&&a===+a&&a>0){var g=Math.min(s,a);d="M ".concat(e,",").concat(t+l*g,`
            A `).concat(g,",").concat(g,",0,0,").concat(c,",").concat(e+o*g,",").concat(t,`
            L `).concat(e+r-o*g,",").concat(t,`
            A `).concat(g,",").concat(g,",0,0,").concat(c,",").concat(e+r,",").concat(t+l*g,`
            L `).concat(e+r,",").concat(t+n-l*g,`
            A `).concat(g,",").concat(g,",0,0,").concat(c,",").concat(e+r-o*g,",").concat(t+n,`
            L `).concat(e+o*g,",").concat(t+n,`
            A `).concat(g,",").concat(g,",0,0,").concat(c,",").concat(e,",").concat(t+n-l*g," Z")}else d="M ".concat(e,",").concat(t," h ").concat(r," v ").concat(n," h ").concat(-r," Z");return d},Fie={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},sU=e=>{var t=Yi(e,Fie),r=T.useRef(null),[n,a]=T.useState(-1);T.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var he=r.current.getTotalLength();he&&a(he)}catch{}},[]);var{x:s,y:l,width:o,height:c,radius:d,className:f}=t,{animationEasing:p,animationDuration:y,animationBegin:g,isAnimationActive:N,isUpdateAnimationActive:w}=t,k=T.useRef(o),S=T.useRef(c),O=T.useRef(s),E=T.useRef(l),D=T.useMemo(()=>({x:s,y:l,width:o,height:c,radius:d}),[s,l,o,c,d]),H=rp(D,"rectangle-");if(s!==+s||l!==+l||o!==+o||c!==+c||o===0||c===0)return null;var W=Zn("recharts-rectangle",f);if(!w){var R=Eo(t),{radius:z}=R,U=f9(R,Pie);return T.createElement("path",Ry({},U,{radius:typeof d=="number"?d:void 0,className:W,d:m9(s,l,o,c,d)}))}var Z=k.current,q=S.current,K=O.current,Q=E.current,re="0px ".concat(n===-1?1:n,"px"),ae="".concat(n,"px 0px"),de=tU(["strokeDasharray"],y,typeof p=="string"?p:void 0);return T.createElement(tp,{animationId:H,key:H,canBegin:n>0,duration:y,easing:p,isActive:w,begin:g},he=>{var Se=ns(Z,o,he),ke=ns(q,c,he),Le=ns(K,s,he),fe=ns(Q,l,he);r.current&&(k.current=Se,S.current=ke,O.current=Le,E.current=fe);var F;N?he>0?F={transition:de,strokeDasharray:ae}:F={strokeDasharray:re}:F={strokeDasharray:ae};var te=Eo(t),{radius:Y}=te,ne=f9(te,Iie);return T.createElement("path",Ry({},ne,{radius:typeof d=="number"?d:void 0,className:W,d:m9(Le,fe,Se,ke,d),ref:r,style:h9(h9({},F),t.style)}))})};function iU(e){var{cx:t,cy:r,radius:n,startAngle:a,endAngle:s}=e,l=Li(t,r,n,a),o=Li(t,r,n,s);return{points:[l,o],cx:t,cy:r,radius:n,startAngle:a,endAngle:s}}function eS(){return eS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},eS.apply(null,arguments)}var Bie=(e,t)=>{var r=bl(t-e),n=Math.min(Math.abs(t-e),359.999);return r*n},N2=e=>{var{cx:t,cy:r,radius:n,angle:a,sign:s,isExternal:l,cornerRadius:o,cornerIsExternal:c}=e,d=o*(l?1:-1)+n,f=Math.asin(o/d)/Py,p=c?a:a+s*f,y=Li(t,r,d,p),g=Li(t,r,n,p),N=c?a-s*f:a,w=Li(t,r,d*Math.cos(f*Py),N);return{center:y,circleTangency:g,lineTangency:w,theta:f}},lU=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:a,startAngle:s,endAngle:l}=e,o=Bie(s,l),c=s+o,d=Li(t,r,a,s),f=Li(t,r,a,c),p="M ".concat(d.x,",").concat(d.y,`
    A `).concat(a,",").concat(a,`,0,
    `).concat(+(Math.abs(o)>180),",").concat(+(s>c),`,
    `).concat(f.x,",").concat(f.y,`
  `);if(n>0){var y=Li(t,r,n,s),g=Li(t,r,n,c);p+="L ".concat(g.x,",").concat(g.y,`
            A `).concat(n,",").concat(n,`,0,
            `).concat(+(Math.abs(o)>180),",").concat(+(s<=c),`,
            `).concat(y.x,",").concat(y.y," Z")}else p+="L ".concat(t,",").concat(r," Z");return p},Uie=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:a,cornerRadius:s,forceCornerRadius:l,cornerIsExternal:o,startAngle:c,endAngle:d}=e,f=bl(d-c),{circleTangency:p,lineTangency:y,theta:g}=N2({cx:t,cy:r,radius:a,angle:c,sign:f,cornerRadius:s,cornerIsExternal:o}),{circleTangency:N,lineTangency:w,theta:k}=N2({cx:t,cy:r,radius:a,angle:d,sign:-f,cornerRadius:s,cornerIsExternal:o}),S=o?Math.abs(c-d):Math.abs(c-d)-g-k;if(S<0)return l?"M ".concat(y.x,",").concat(y.y,`
        a`).concat(s,",").concat(s,",0,0,1,").concat(s*2,`,0
        a`).concat(s,",").concat(s,",0,0,1,").concat(-s*2,`,0
      `):lU({cx:t,cy:r,innerRadius:n,outerRadius:a,startAngle:c,endAngle:d});var O="M ".concat(y.x,",").concat(y.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(f<0),",").concat(p.x,",").concat(p.y,`
    A`).concat(a,",").concat(a,",0,").concat(+(S>180),",").concat(+(f<0),",").concat(N.x,",").concat(N.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(f<0),",").concat(w.x,",").concat(w.y,`
  `);if(n>0){var{circleTangency:E,lineTangency:D,theta:H}=N2({cx:t,cy:r,radius:n,angle:c,sign:f,isExternal:!0,cornerRadius:s,cornerIsExternal:o}),{circleTangency:W,lineTangency:R,theta:z}=N2({cx:t,cy:r,radius:n,angle:d,sign:-f,isExternal:!0,cornerRadius:s,cornerIsExternal:o}),U=o?Math.abs(c-d):Math.abs(c-d)-H-z;if(U<0&&s===0)return"".concat(O,"L").concat(t,",").concat(r,"Z");O+="L".concat(R.x,",").concat(R.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(f<0),",").concat(W.x,",").concat(W.y,`
      A`).concat(n,",").concat(n,",0,").concat(+(U>180),",").concat(+(f>0),",").concat(E.x,",").concat(E.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(f<0),",").concat(D.x,",").concat(D.y,"Z")}else O+="L".concat(t,",").concat(r,"Z");return O},zie={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},oU=e=>{var t=Yi(e,zie),{cx:r,cy:n,innerRadius:a,outerRadius:s,cornerRadius:l,forceCornerRadius:o,cornerIsExternal:c,startAngle:d,endAngle:f,className:p}=t;if(s<a||d===f)return null;var y=Zn("recharts-sector",p),g=s-a,N=no(l,g,0,!0),w;return N>0&&Math.abs(d-f)<360?w=Uie({cx:r,cy:n,innerRadius:a,outerRadius:s,cornerRadius:Math.min(N,g/2),forceCornerRadius:o,cornerIsExternal:c,startAngle:d,endAngle:f}):w=lU({cx:r,cy:n,innerRadius:a,outerRadius:s,startAngle:d,endAngle:f}),T.createElement("path",eS({},Eo(t),{className:y,d:w}))};function qie(e,t,r){var n,a,s,l;if(e==="horizontal")n=t.x,s=n,a=r.top,l=r.top+r.height;else if(e==="vertical")a=t.y,l=a,n=r.left,s=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var{cx:o,cy:c,innerRadius:d,outerRadius:f,angle:p}=t,y=Li(o,c,d,p),g=Li(o,c,f,p);n=y.x,a=y.y,s=g.x,l=g.y}else return iU(t);return[{x:n,y:a},{x:s,y:l}]}var A3={},E3={},T3={},x9;function Hie(){return x9||(x9=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=cB();function r(n){return t.isSymbol(n)?NaN:Number(n)}e.toNumber=r})(T3)),T3}var p9;function $ie(){return p9||(p9=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Hie();function r(n){return n?(n=t.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}e.toFinite=r})(E3)),E3}var g9;function Vie(){return g9||(g9=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=dB(),r=$ie();function n(a,s,l){l&&typeof l!="number"&&t.isIterateeCall(a,s,l)&&(s=l=void 0),a=r.toFinite(a),s===void 0?(s=a,a=0):s=r.toFinite(s),l=l===void 0?a<s?1:-1:r.toFinite(l);const o=Math.max(Math.ceil((s-a)/(l||1)),0),c=new Array(o);for(let d=0;d<o;d++)c[d]=a,a+=l;return c}e.range=n})(A3)),A3}var O3,b9;function Wie(){return b9||(b9=1,O3=Vie().range),O3}var Kie=Wie();const cU=gd(Kie);function rf(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Gie(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function tj(e){let t,r,n;e.length!==2?(t=rf,r=(o,c)=>rf(e(o),c),n=(o,c)=>e(o)-c):(t=e===rf||e===Gie?e:Xie,r=e,n=e);function a(o,c,d=0,f=o.length){if(d<f){if(t(c,c)!==0)return f;do{const p=d+f>>>1;r(o[p],c)<0?d=p+1:f=p}while(d<f)}return d}function s(o,c,d=0,f=o.length){if(d<f){if(t(c,c)!==0)return f;do{const p=d+f>>>1;r(o[p],c)<=0?d=p+1:f=p}while(d<f)}return d}function l(o,c,d=0,f=o.length){const p=a(o,c,d,f-1);return p>d&&n(o[p-1],c)>-n(o[p],c)?p-1:p}return{left:a,center:l,right:s}}function Xie(){return 0}function dU(e){return e===null?NaN:+e}function*Yie(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const Zie=tj(rf),qb=Zie.right;tj(dU).center;class v9 extends Map{constructor(t,r=ele){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,a]of t)this.set(n,a)}get(t){return super.get(y9(this,t))}has(t){return super.has(y9(this,t))}set(t,r){return super.set(Qie(this,t),r)}delete(t){return super.delete(Jie(this,t))}}function y9({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function Qie({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function Jie({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function ele(e){return e!==null&&typeof e=="object"?e.valueOf():e}function tle(e=rf){if(e===rf)return uU;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function uU(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const rle=Math.sqrt(50),nle=Math.sqrt(10),ale=Math.sqrt(2);function Fy(e,t,r){const n=(t-e)/Math.max(0,r),a=Math.floor(Math.log10(n)),s=n/Math.pow(10,a),l=s>=rle?10:s>=nle?5:s>=ale?2:1;let o,c,d;return a<0?(d=Math.pow(10,-a)/l,o=Math.round(e*d),c=Math.round(t*d),o/d<e&&++o,c/d>t&&--c,d=-d):(d=Math.pow(10,a)*l,o=Math.round(e/d),c=Math.round(t/d),o*d<e&&++o,c*d>t&&--c),c<o&&.5<=r&&r<2?Fy(e,t,r*2):[o,c,d]}function tS(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[a,s,l]=n?Fy(t,e,r):Fy(e,t,r);if(!(s>=a))return[];const o=s-a+1,c=new Array(o);if(n)if(l<0)for(let d=0;d<o;++d)c[d]=(s-d)/-l;else for(let d=0;d<o;++d)c[d]=(s-d)*l;else if(l<0)for(let d=0;d<o;++d)c[d]=(a+d)/-l;else for(let d=0;d<o;++d)c[d]=(a+d)*l;return c}function rS(e,t,r){return t=+t,e=+e,r=+r,Fy(e,t,r)[2]}function nS(e,t,r){t=+t,e=+e,r=+r;const n=t<e,a=n?rS(t,e,r):rS(e,t,r);return(n?-1:1)*(a<0?1/-a:a)}function w9(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function k9(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function hU(e,t,r=0,n=1/0,a){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(a=a===void 0?uU:tle(a);n>r;){if(n-r>600){const c=n-r+1,d=t-r+1,f=Math.log(c),p=.5*Math.exp(2*f/3),y=.5*Math.sqrt(f*p*(c-p)/c)*(d-c/2<0?-1:1),g=Math.max(r,Math.floor(t-d*p/c+y)),N=Math.min(n,Math.floor(t+(c-d)*p/c+y));hU(e,t,g,N,a)}const s=e[t];let l=r,o=n;for(sg(e,r,t),a(e[n],s)>0&&sg(e,r,n);l<o;){for(sg(e,l,o),++l,--o;a(e[l],s)<0;)++l;for(;a(e[o],s)>0;)--o}a(e[r],s)===0?sg(e,r,o):(++o,sg(e,o,n)),o<=t&&(r=o+1),t<=o&&(n=o-1)}return e}function sg(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function sle(e,t,r){if(e=Float64Array.from(Yie(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return k9(e);if(t>=1)return w9(e);var n,a=(n-1)*t,s=Math.floor(a),l=w9(hU(e,s).subarray(0,s+1)),o=k9(e.subarray(s+1));return l+(o-l)*(a-s)}}function ile(e,t,r=dU){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,a=(n-1)*t,s=Math.floor(a),l=+r(e[s],s,e),o=+r(e[s+1],s+1,e);return l+(o-l)*(a-s)}}function lle(e,t,r){e=+e,t=+t,r=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+r;for(var n=-1,a=Math.max(0,Math.ceil((t-e)/r))|0,s=new Array(a);++n<a;)s[n]=e+n*r;return s}function vd(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function th(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const aS=Symbol("implicit");function rj(){var e=new v9,t=[],r=[],n=aS;function a(s){let l=e.get(s);if(l===void 0){if(n!==aS)return n;e.set(s,l=t.push(s)-1)}return r[l%r.length]}return a.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new v9;for(const l of s)e.has(l)||e.set(l,t.push(l)-1);return a},a.range=function(s){return arguments.length?(r=Array.from(s),a):r.slice()},a.unknown=function(s){return arguments.length?(n=s,a):n},a.copy=function(){return rj(t,r).unknown(n)},vd.apply(a,arguments),a}function nj(){var e=rj().unknown(void 0),t=e.domain,r=e.range,n=0,a=1,s,l,o=!1,c=0,d=0,f=.5;delete e.unknown;function p(){var y=t().length,g=a<n,N=g?a:n,w=g?n:a;s=(w-N)/Math.max(1,y-c+d*2),o&&(s=Math.floor(s)),N+=(w-N-s*(y-c))*f,l=s*(1-c),o&&(N=Math.round(N),l=Math.round(l));var k=lle(y).map(function(S){return N+s*S});return r(g?k.reverse():k)}return e.domain=function(y){return arguments.length?(t(y),p()):t()},e.range=function(y){return arguments.length?([n,a]=y,n=+n,a=+a,p()):[n,a]},e.rangeRound=function(y){return[n,a]=y,n=+n,a=+a,o=!0,p()},e.bandwidth=function(){return l},e.step=function(){return s},e.round=function(y){return arguments.length?(o=!!y,p()):o},e.padding=function(y){return arguments.length?(c=Math.min(1,d=+y),p()):c},e.paddingInner=function(y){return arguments.length?(c=Math.min(1,y),p()):c},e.paddingOuter=function(y){return arguments.length?(d=+y,p()):d},e.align=function(y){return arguments.length?(f=Math.max(0,Math.min(1,y)),p()):f},e.copy=function(){return nj(t(),[n,a]).round(o).paddingInner(c).paddingOuter(d).align(f)},vd.apply(p(),arguments)}function fU(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return fU(t())},e}function ole(){return fU(nj.apply(null,arguments).paddingInner(1))}function aj(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function mU(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function Hb(){}var tb=.7,By=1/tb,m1="\\s*([+-]?\\d+)\\s*",rb="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Fu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",cle=/^#([0-9a-f]{3,8})$/,dle=new RegExp(`^rgb\\(${m1},${m1},${m1}\\)$`),ule=new RegExp(`^rgb\\(${Fu},${Fu},${Fu}\\)$`),hle=new RegExp(`^rgba\\(${m1},${m1},${m1},${rb}\\)$`),fle=new RegExp(`^rgba\\(${Fu},${Fu},${Fu},${rb}\\)$`),mle=new RegExp(`^hsl\\(${rb},${Fu},${Fu}\\)$`),xle=new RegExp(`^hsla\\(${rb},${Fu},${Fu},${rb}\\)$`),N9={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};aj(Hb,nb,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:_9,formatHex:_9,formatHex8:ple,formatHsl:gle,formatRgb:S9,toString:S9});function _9(){return this.rgb().formatHex()}function ple(){return this.rgb().formatHex8()}function gle(){return xU(this).formatHsl()}function S9(){return this.rgb().formatRgb()}function nb(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=cle.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?j9(t):r===3?new rc(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?_2(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?_2(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=dle.exec(e))?new rc(t[1],t[2],t[3],1):(t=ule.exec(e))?new rc(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=hle.exec(e))?_2(t[1],t[2],t[3],t[4]):(t=fle.exec(e))?_2(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=mle.exec(e))?E9(t[1],t[2]/100,t[3]/100,1):(t=xle.exec(e))?E9(t[1],t[2]/100,t[3]/100,t[4]):N9.hasOwnProperty(e)?j9(N9[e]):e==="transparent"?new rc(NaN,NaN,NaN,0):null}function j9(e){return new rc(e>>16&255,e>>8&255,e&255,1)}function _2(e,t,r,n){return n<=0&&(e=t=r=NaN),new rc(e,t,r,n)}function ble(e){return e instanceof Hb||(e=nb(e)),e?(e=e.rgb(),new rc(e.r,e.g,e.b,e.opacity)):new rc}function sS(e,t,r,n){return arguments.length===1?ble(e):new rc(e,t,r,n??1)}function rc(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}aj(rc,sS,mU(Hb,{brighter(e){return e=e==null?By:Math.pow(By,e),new rc(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?tb:Math.pow(tb,e),new rc(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new rc(xm(this.r),xm(this.g),xm(this.b),Uy(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:C9,formatHex:C9,formatHex8:vle,formatRgb:A9,toString:A9}));function C9(){return`#${Jf(this.r)}${Jf(this.g)}${Jf(this.b)}`}function vle(){return`#${Jf(this.r)}${Jf(this.g)}${Jf(this.b)}${Jf((isNaN(this.opacity)?1:this.opacity)*255)}`}function A9(){const e=Uy(this.opacity);return`${e===1?"rgb(":"rgba("}${xm(this.r)}, ${xm(this.g)}, ${xm(this.b)}${e===1?")":`, ${e})`}`}function Uy(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function xm(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Jf(e){return e=xm(e),(e<16?"0":"")+e.toString(16)}function E9(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Gd(e,t,r,n)}function xU(e){if(e instanceof Gd)return new Gd(e.h,e.s,e.l,e.opacity);if(e instanceof Hb||(e=nb(e)),!e)return new Gd;if(e instanceof Gd)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,a=Math.min(t,r,n),s=Math.max(t,r,n),l=NaN,o=s-a,c=(s+a)/2;return o?(t===s?l=(r-n)/o+(r<n)*6:r===s?l=(n-t)/o+2:l=(t-r)/o+4,o/=c<.5?s+a:2-s-a,l*=60):o=c>0&&c<1?0:l,new Gd(l,o,c,e.opacity)}function yle(e,t,r,n){return arguments.length===1?xU(e):new Gd(e,t,r,n??1)}function Gd(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}aj(Gd,yle,mU(Hb,{brighter(e){return e=e==null?By:Math.pow(By,e),new Gd(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?tb:Math.pow(tb,e),new Gd(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,a=2*r-n;return new rc(P3(e>=240?e-240:e+120,a,n),P3(e,a,n),P3(e<120?e+240:e-120,a,n),this.opacity)},clamp(){return new Gd(T9(this.h),S2(this.s),S2(this.l),Uy(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Uy(this.opacity);return`${e===1?"hsl(":"hsla("}${T9(this.h)}, ${S2(this.s)*100}%, ${S2(this.l)*100}%${e===1?")":`, ${e})`}`}}));function T9(e){return e=(e||0)%360,e<0?e+360:e}function S2(e){return Math.max(0,Math.min(1,e||0))}function P3(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const sj=e=>()=>e;function wle(e,t){return function(r){return e+r*t}}function kle(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function Nle(e){return(e=+e)==1?pU:function(t,r){return r-t?kle(t,r,e):sj(isNaN(t)?r:t)}}function pU(e,t){var r=t-e;return r?wle(e,r):sj(isNaN(e)?t:e)}const O9=(function e(t){var r=Nle(t);function n(a,s){var l=r((a=sS(a)).r,(s=sS(s)).r),o=r(a.g,s.g),c=r(a.b,s.b),d=pU(a.opacity,s.opacity);return function(f){return a.r=l(f),a.g=o(f),a.b=c(f),a.opacity=d(f),a+""}}return n.gamma=e,n})(1);function _le(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),a;return function(s){for(a=0;a<r;++a)n[a]=e[a]*(1-s)+t[a]*s;return n}}function Sle(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function jle(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,a=new Array(n),s=new Array(r),l;for(l=0;l<n;++l)a[l]=np(e[l],t[l]);for(;l<r;++l)s[l]=t[l];return function(o){for(l=0;l<n;++l)s[l]=a[l](o);return s}}function Cle(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function zy(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function Ale(e,t){var r={},n={},a;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in e?r[a]=np(e[a],t[a]):n[a]=t[a];return function(s){for(a in r)n[a]=r[a](s);return n}}var iS=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,I3=new RegExp(iS.source,"g");function Ele(e){return function(){return e}}function Tle(e){return function(t){return e(t)+""}}function Ole(e,t){var r=iS.lastIndex=I3.lastIndex=0,n,a,s,l=-1,o=[],c=[];for(e=e+"",t=t+"";(n=iS.exec(e))&&(a=I3.exec(t));)(s=a.index)>r&&(s=t.slice(r,s),o[l]?o[l]+=s:o[++l]=s),(n=n[0])===(a=a[0])?o[l]?o[l]+=a:o[++l]=a:(o[++l]=null,c.push({i:l,x:zy(n,a)})),r=I3.lastIndex;return r<t.length&&(s=t.slice(r),o[l]?o[l]+=s:o[++l]=s),o.length<2?c[0]?Tle(c[0].x):Ele(t):(t=c.length,function(d){for(var f=0,p;f<t;++f)o[(p=c[f]).i]=p.x(d);return o.join("")})}function np(e,t){var r=typeof t,n;return t==null||r==="boolean"?sj(t):(r==="number"?zy:r==="string"?(n=nb(t))?(t=n,O9):Ole:t instanceof nb?O9:t instanceof Date?Cle:Sle(t)?_le:Array.isArray(t)?jle:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Ale:zy)(e,t)}function ij(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function Ple(e,t){t===void 0&&(t=e,e=np);for(var r=0,n=t.length-1,a=t[0],s=new Array(n<0?0:n);r<n;)s[r]=e(a,a=t[++r]);return function(l){var o=Math.max(0,Math.min(n-1,Math.floor(l*=n)));return s[o](l-o)}}function Ile(e){return function(){return e}}function qy(e){return+e}var P9=[0,1];function jo(e){return e}function lS(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:Ile(isNaN(t)?NaN:.5)}function Dle(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function Mle(e,t,r){var n=e[0],a=e[1],s=t[0],l=t[1];return a<n?(n=lS(a,n),s=r(l,s)):(n=lS(n,a),s=r(s,l)),function(o){return s(n(o))}}function Lle(e,t,r){var n=Math.min(e.length,t.length)-1,a=new Array(n),s=new Array(n),l=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++l<n;)a[l]=lS(e[l],e[l+1]),s[l]=r(t[l],t[l+1]);return function(o){var c=qb(e,o,1,n)-1;return s[c](a[c](o))}}function $b(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function rk(){var e=P9,t=P9,r=np,n,a,s,l=jo,o,c,d;function f(){var y=Math.min(e.length,t.length);return l!==jo&&(l=Dle(e[0],e[y-1])),o=y>2?Lle:Mle,c=d=null,p}function p(y){return y==null||isNaN(y=+y)?s:(c||(c=o(e.map(n),t,r)))(n(l(y)))}return p.invert=function(y){return l(a((d||(d=o(t,e.map(n),zy)))(y)))},p.domain=function(y){return arguments.length?(e=Array.from(y,qy),f()):e.slice()},p.range=function(y){return arguments.length?(t=Array.from(y),f()):t.slice()},p.rangeRound=function(y){return t=Array.from(y),r=ij,f()},p.clamp=function(y){return arguments.length?(l=y?!0:jo,f()):l!==jo},p.interpolate=function(y){return arguments.length?(r=y,f()):r},p.unknown=function(y){return arguments.length?(s=y,p):s},function(y,g){return n=y,a=g,f()}}function lj(){return rk()(jo,jo)}function Rle(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Hy(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function q1(e){return e=Hy(Math.abs(e)),e?e[1]:NaN}function Fle(e,t){return function(r,n){for(var a=r.length,s=[],l=0,o=e[0],c=0;a>0&&o>0&&(c+o+1>n&&(o=Math.max(1,n-c)),s.push(r.substring(a-=o,a+o)),!((c+=o+1)>n));)o=e[l=(l+1)%e.length];return s.reverse().join(t)}}function Ble(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var Ule=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ab(e){if(!(t=Ule.exec(e)))throw new Error("invalid format: "+e);var t;return new oj({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}ab.prototype=oj.prototype;function oj(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}oj.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function zle(e){e:for(var t=e.length,r=1,n=-1,a;r<t;++r)switch(e[r]){case".":n=a=r;break;case"0":n===0&&(n=r),a=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(a+1):e}var gU;function qle(e,t){var r=Hy(e,t);if(!r)return e+"";var n=r[0],a=r[1],s=a-(gU=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,l=n.length;return s===l?n:s>l?n+new Array(s-l+1).join("0"):s>0?n.slice(0,s)+"."+n.slice(s):"0."+new Array(1-s).join("0")+Hy(e,Math.max(0,t+s-1))[0]}function I9(e,t){var r=Hy(e,t);if(!r)return e+"";var n=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")}const D9={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:Rle,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>I9(e*100,t),r:I9,s:qle,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function M9(e){return e}var L9=Array.prototype.map,R9=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Hle(e){var t=e.grouping===void 0||e.thousands===void 0?M9:Fle(L9.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",a=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?M9:Ble(L9.call(e.numerals,String)),l=e.percent===void 0?"%":e.percent+"",o=e.minus===void 0?"":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function d(p){p=ab(p);var y=p.fill,g=p.align,N=p.sign,w=p.symbol,k=p.zero,S=p.width,O=p.comma,E=p.precision,D=p.trim,H=p.type;H==="n"?(O=!0,H="g"):D9[H]||(E===void 0&&(E=12),D=!0,H="g"),(k||y==="0"&&g==="=")&&(k=!0,y="0",g="=");var W=w==="$"?r:w==="#"&&/[boxX]/.test(H)?"0"+H.toLowerCase():"",R=w==="$"?n:/[%p]/.test(H)?l:"",z=D9[H],U=/[defgprs%]/.test(H);E=E===void 0?6:/[gprs]/.test(H)?Math.max(1,Math.min(21,E)):Math.max(0,Math.min(20,E));function Z(q){var K=W,Q=R,re,ae,de;if(H==="c")Q=z(q)+Q,q="";else{q=+q;var he=q<0||1/q<0;if(q=isNaN(q)?c:z(Math.abs(q),E),D&&(q=zle(q)),he&&+q==0&&N!=="+"&&(he=!1),K=(he?N==="("?N:o:N==="-"||N==="("?"":N)+K,Q=(H==="s"?R9[8+gU/3]:"")+Q+(he&&N==="("?")":""),U){for(re=-1,ae=q.length;++re<ae;)if(de=q.charCodeAt(re),48>de||de>57){Q=(de===46?a+q.slice(re+1):q.slice(re))+Q,q=q.slice(0,re);break}}}O&&!k&&(q=t(q,1/0));var Se=K.length+q.length+Q.length,ke=Se<S?new Array(S-Se+1).join(y):"";switch(O&&k&&(q=t(ke+q,ke.length?S-Q.length:1/0),ke=""),g){case"<":q=K+q+Q+ke;break;case"=":q=K+ke+q+Q;break;case"^":q=ke.slice(0,Se=ke.length>>1)+K+q+Q+ke.slice(Se);break;default:q=ke+K+q+Q;break}return s(q)}return Z.toString=function(){return p+""},Z}function f(p,y){var g=d((p=ab(p),p.type="f",p)),N=Math.max(-8,Math.min(8,Math.floor(q1(y)/3)))*3,w=Math.pow(10,-N),k=R9[8+N/3];return function(S){return g(w*S)+k}}return{format:d,formatPrefix:f}}var j2,cj,bU;$le({thousands:",",grouping:[3],currency:["$",""]});function $le(e){return j2=Hle(e),cj=j2.format,bU=j2.formatPrefix,j2}function Vle(e){return Math.max(0,-q1(Math.abs(e)))}function Wle(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(q1(t)/3)))*3-q1(Math.abs(e)))}function Kle(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,q1(t)-q1(e))+1}function vU(e,t,r,n){var a=nS(e,t,r),s;switch(n=ab(n??",f"),n.type){case"s":{var l=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(s=Wle(a,l))&&(n.precision=s),bU(n,l)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(s=Kle(a,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=s-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(s=Vle(a))&&(n.precision=s-(n.type==="%")*2);break}}return cj(n)}function pf(e){var t=e.domain;return e.ticks=function(r){var n=t();return tS(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var a=t();return vU(a[0],a[a.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),a=0,s=n.length-1,l=n[a],o=n[s],c,d,f=10;for(o<l&&(d=l,l=o,o=d,d=a,a=s,s=d);f-- >0;){if(d=rS(l,o,r),d===c)return n[a]=l,n[s]=o,t(n);if(d>0)l=Math.floor(l/d)*d,o=Math.ceil(o/d)*d;else if(d<0)l=Math.ceil(l*d)/d,o=Math.floor(o*d)/d;else break;c=d}return e},e}function yU(){var e=lj();return e.copy=function(){return $b(e,yU())},vd.apply(e,arguments),pf(e)}function wU(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,qy),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return wU(e).unknown(t)},e=arguments.length?Array.from(e,qy):[0,1],pf(r)}function kU(e,t){e=e.slice();var r=0,n=e.length-1,a=e[r],s=e[n],l;return s<a&&(l=r,r=n,n=l,l=a,a=s,s=l),e[r]=t.floor(a),e[n]=t.ceil(s),e}function F9(e){return Math.log(e)}function B9(e){return Math.exp(e)}function Gle(e){return-Math.log(-e)}function Xle(e){return-Math.exp(-e)}function Yle(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Zle(e){return e===10?Yle:e===Math.E?Math.exp:t=>Math.pow(e,t)}function Qle(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function U9(e){return(t,r)=>-e(-t,r)}function dj(e){const t=e(F9,B9),r=t.domain;let n=10,a,s;function l(){return a=Qle(n),s=Zle(n),r()[0]<0?(a=U9(a),s=U9(s),e(Gle,Xle)):e(F9,B9),t}return t.base=function(o){return arguments.length?(n=+o,l()):n},t.domain=function(o){return arguments.length?(r(o),l()):r()},t.ticks=o=>{const c=r();let d=c[0],f=c[c.length-1];const p=f<d;p&&([d,f]=[f,d]);let y=a(d),g=a(f),N,w;const k=o==null?10:+o;let S=[];if(!(n%1)&&g-y<k){if(y=Math.floor(y),g=Math.ceil(g),d>0){for(;y<=g;++y)for(N=1;N<n;++N)if(w=y<0?N/s(-y):N*s(y),!(w<d)){if(w>f)break;S.push(w)}}else for(;y<=g;++y)for(N=n-1;N>=1;--N)if(w=y>0?N/s(-y):N*s(y),!(w<d)){if(w>f)break;S.push(w)}S.length*2<k&&(S=tS(d,f,k))}else S=tS(y,g,Math.min(g-y,k)).map(s);return p?S.reverse():S},t.tickFormat=(o,c)=>{if(o==null&&(o=10),c==null&&(c=n===10?"s":","),typeof c!="function"&&(!(n%1)&&(c=ab(c)).precision==null&&(c.trim=!0),c=cj(c)),o===1/0)return c;const d=Math.max(1,n*o/t.ticks().length);return f=>{let p=f/s(Math.round(a(f)));return p*n<n-.5&&(p*=n),p<=d?c(f):""}},t.nice=()=>r(kU(r(),{floor:o=>s(Math.floor(a(o))),ceil:o=>s(Math.ceil(a(o)))})),t}function NU(){const e=dj(rk()).domain([1,10]);return e.copy=()=>$b(e,NU()).base(e.base()),vd.apply(e,arguments),e}function z9(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function q9(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function uj(e){var t=1,r=e(z9(t),q9(t));return r.constant=function(n){return arguments.length?e(z9(t=+n),q9(t)):t},pf(r)}function _U(){var e=uj(rk());return e.copy=function(){return $b(e,_U()).constant(e.constant())},vd.apply(e,arguments)}function H9(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Jle(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function eoe(e){return e<0?-e*e:e*e}function hj(e){var t=e(jo,jo),r=1;function n(){return r===1?e(jo,jo):r===.5?e(Jle,eoe):e(H9(r),H9(1/r))}return t.exponent=function(a){return arguments.length?(r=+a,n()):r},pf(t)}function fj(){var e=hj(rk());return e.copy=function(){return $b(e,fj()).exponent(e.exponent())},vd.apply(e,arguments),e}function toe(){return fj.apply(null,arguments).exponent(.5)}function $9(e){return Math.sign(e)*e*e}function roe(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function SU(){var e=lj(),t=[0,1],r=!1,n;function a(s){var l=roe(e(s));return isNaN(l)?n:r?Math.round(l):l}return a.invert=function(s){return e.invert($9(s))},a.domain=function(s){return arguments.length?(e.domain(s),a):e.domain()},a.range=function(s){return arguments.length?(e.range((t=Array.from(s,qy)).map($9)),a):t.slice()},a.rangeRound=function(s){return a.range(s).round(!0)},a.round=function(s){return arguments.length?(r=!!s,a):r},a.clamp=function(s){return arguments.length?(e.clamp(s),a):e.clamp()},a.unknown=function(s){return arguments.length?(n=s,a):n},a.copy=function(){return SU(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},vd.apply(a,arguments),pf(a)}function jU(){var e=[],t=[],r=[],n;function a(){var l=0,o=Math.max(1,t.length);for(r=new Array(o-1);++l<o;)r[l-1]=ile(e,l/o);return s}function s(l){return l==null||isNaN(l=+l)?n:t[qb(r,l)]}return s.invertExtent=function(l){var o=t.indexOf(l);return o<0?[NaN,NaN]:[o>0?r[o-1]:e[0],o<r.length?r[o]:e[e.length-1]]},s.domain=function(l){if(!arguments.length)return e.slice();e=[];for(let o of l)o!=null&&!isNaN(o=+o)&&e.push(o);return e.sort(rf),a()},s.range=function(l){return arguments.length?(t=Array.from(l),a()):t.slice()},s.unknown=function(l){return arguments.length?(n=l,s):n},s.quantiles=function(){return r.slice()},s.copy=function(){return jU().domain(e).range(t).unknown(n)},vd.apply(s,arguments)}function CU(){var e=0,t=1,r=1,n=[.5],a=[0,1],s;function l(c){return c!=null&&c<=c?a[qb(n,c,0,r)]:s}function o(){var c=-1;for(n=new Array(r);++c<r;)n[c]=((c+1)*t-(c-r)*e)/(r+1);return l}return l.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,o()):[e,t]},l.range=function(c){return arguments.length?(r=(a=Array.from(c)).length-1,o()):a.slice()},l.invertExtent=function(c){var d=a.indexOf(c);return d<0?[NaN,NaN]:d<1?[e,n[0]]:d>=r?[n[r-1],t]:[n[d-1],n[d]]},l.unknown=function(c){return arguments.length&&(s=c),l},l.thresholds=function(){return n.slice()},l.copy=function(){return CU().domain([e,t]).range(a).unknown(s)},vd.apply(pf(l),arguments)}function AU(){var e=[.5],t=[0,1],r,n=1;function a(s){return s!=null&&s<=s?t[qb(e,s,0,n)]:r}return a.domain=function(s){return arguments.length?(e=Array.from(s),n=Math.min(e.length,t.length-1),a):e.slice()},a.range=function(s){return arguments.length?(t=Array.from(s),n=Math.min(e.length,t.length-1),a):t.slice()},a.invertExtent=function(s){var l=t.indexOf(s);return[e[l-1],e[l]]},a.unknown=function(s){return arguments.length?(r=s,a):r},a.copy=function(){return AU().domain(e).range(t).unknown(r)},vd.apply(a,arguments)}const D3=new Date,M3=new Date;function Zi(e,t,r,n){function a(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return a.floor=s=>(e(s=new Date(+s)),s),a.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),a.round=s=>{const l=a(s),o=a.ceil(s);return s-l<o-s?l:o},a.offset=(s,l)=>(t(s=new Date(+s),l==null?1:Math.floor(l)),s),a.range=(s,l,o)=>{const c=[];if(s=a.ceil(s),o=o==null?1:Math.floor(o),!(s<l)||!(o>0))return c;let d;do c.push(d=new Date(+s)),t(s,o),e(s);while(d<s&&s<l);return c},a.filter=s=>Zi(l=>{if(l>=l)for(;e(l),!s(l);)l.setTime(l-1)},(l,o)=>{if(l>=l)if(o<0)for(;++o<=0;)for(;t(l,-1),!s(l););else for(;--o>=0;)for(;t(l,1),!s(l););}),r&&(a.count=(s,l)=>(D3.setTime(+s),M3.setTime(+l),e(D3),e(M3),Math.floor(r(D3,M3))),a.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?a.filter(n?l=>n(l)%s===0:l=>a.count(0,l)%s===0):a)),a}const $y=Zi(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);$y.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Zi(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):$y);$y.range;const A0=1e3,cd=A0*60,E0=cd*60,K0=E0*24,mj=K0*7,V9=K0*30,L3=K0*365,em=Zi(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*A0)},(e,t)=>(t-e)/A0,e=>e.getUTCSeconds());em.range;const xj=Zi(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*A0)},(e,t)=>{e.setTime(+e+t*cd)},(e,t)=>(t-e)/cd,e=>e.getMinutes());xj.range;const pj=Zi(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*cd)},(e,t)=>(t-e)/cd,e=>e.getUTCMinutes());pj.range;const gj=Zi(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*A0-e.getMinutes()*cd)},(e,t)=>{e.setTime(+e+t*E0)},(e,t)=>(t-e)/E0,e=>e.getHours());gj.range;const bj=Zi(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*E0)},(e,t)=>(t-e)/E0,e=>e.getUTCHours());bj.range;const Vb=Zi(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*cd)/K0,e=>e.getDate()-1);Vb.range;const nk=Zi(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/K0,e=>e.getUTCDate()-1);nk.range;const EU=Zi(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/K0,e=>Math.floor(e/K0));EU.range;function Ym(e){return Zi(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*cd)/mj)}const ak=Ym(0),Vy=Ym(1),noe=Ym(2),aoe=Ym(3),H1=Ym(4),soe=Ym(5),ioe=Ym(6);ak.range;Vy.range;noe.range;aoe.range;H1.range;soe.range;ioe.range;function Zm(e){return Zi(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/mj)}const sk=Zm(0),Wy=Zm(1),loe=Zm(2),ooe=Zm(3),$1=Zm(4),coe=Zm(5),doe=Zm(6);sk.range;Wy.range;loe.range;ooe.range;$1.range;coe.range;doe.range;const vj=Zi(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());vj.range;const yj=Zi(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());yj.range;const G0=Zi(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());G0.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Zi(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});G0.range;const X0=Zi(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());X0.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Zi(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});X0.range;function TU(e,t,r,n,a,s){const l=[[em,1,A0],[em,5,5*A0],[em,15,15*A0],[em,30,30*A0],[s,1,cd],[s,5,5*cd],[s,15,15*cd],[s,30,30*cd],[a,1,E0],[a,3,3*E0],[a,6,6*E0],[a,12,12*E0],[n,1,K0],[n,2,2*K0],[r,1,mj],[t,1,V9],[t,3,3*V9],[e,1,L3]];function o(d,f,p){const y=f<d;y&&([d,f]=[f,d]);const g=p&&typeof p.range=="function"?p:c(d,f,p),N=g?g.range(d,+f+1):[];return y?N.reverse():N}function c(d,f,p){const y=Math.abs(f-d)/p,g=tj(([,,k])=>k).right(l,y);if(g===l.length)return e.every(nS(d/L3,f/L3,p));if(g===0)return $y.every(Math.max(nS(d,f,p),1));const[N,w]=l[y/l[g-1][2]<l[g][2]/y?g-1:g];return N.every(w)}return[o,c]}const[uoe,hoe]=TU(X0,yj,sk,EU,bj,pj),[foe,moe]=TU(G0,vj,ak,Vb,gj,xj);function R3(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function F3(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function ig(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function xoe(e){var t=e.dateTime,r=e.date,n=e.time,a=e.periods,s=e.days,l=e.shortDays,o=e.months,c=e.shortMonths,d=lg(a),f=og(a),p=lg(s),y=og(s),g=lg(l),N=og(l),w=lg(o),k=og(o),S=lg(c),O=og(c),E={a:he,A:Se,b:ke,B:Le,c:null,d:Z9,e:Z9,f:Foe,g:Goe,G:Yoe,H:Moe,I:Loe,j:Roe,L:OU,m:Boe,M:Uoe,p:fe,q:F,Q:eP,s:tP,S:zoe,u:qoe,U:Hoe,V:$oe,w:Voe,W:Woe,x:null,X:null,y:Koe,Y:Xoe,Z:Zoe,"%":J9},D={a:te,A:Y,b:ne,B:ee,c:null,d:Q9,e:Q9,f:tce,g:uce,G:fce,H:Qoe,I:Joe,j:ece,L:IU,m:rce,M:nce,p:Ce,q:me,Q:eP,s:tP,S:ace,u:sce,U:ice,V:lce,w:oce,W:cce,x:null,X:null,y:dce,Y:hce,Z:mce,"%":J9},H={a:Z,A:q,b:K,B:Q,c:re,d:X9,e:X9,f:Ooe,g:G9,G:K9,H:Y9,I:Y9,j:Coe,L:Toe,m:joe,M:Aoe,p:U,q:Soe,Q:Ioe,s:Doe,S:Eoe,u:yoe,U:woe,V:koe,w:voe,W:Noe,x:ae,X:de,y:G9,Y:K9,Z:_oe,"%":Poe};E.x=W(r,E),E.X=W(n,E),E.c=W(t,E),D.x=W(r,D),D.X=W(n,D),D.c=W(t,D);function W(se,je){return function(be){var ie=[],Te=-1,De=0,ye=se.length,rt,st,dt;for(be instanceof Date||(be=new Date(+be));++Te<ye;)se.charCodeAt(Te)===37&&(ie.push(se.slice(De,Te)),(st=W9[rt=se.charAt(++Te)])!=null?rt=se.charAt(++Te):st=rt==="e"?" ":"0",(dt=je[rt])&&(rt=dt(be,st)),ie.push(rt),De=Te+1);return ie.push(se.slice(De,Te)),ie.join("")}}function R(se,je){return function(be){var ie=ig(1900,void 0,1),Te=z(ie,se,be+="",0),De,ye;if(Te!=be.length)return null;if("Q"in ie)return new Date(ie.Q);if("s"in ie)return new Date(ie.s*1e3+("L"in ie?ie.L:0));if(je&&!("Z"in ie)&&(ie.Z=0),"p"in ie&&(ie.H=ie.H%12+ie.p*12),ie.m===void 0&&(ie.m="q"in ie?ie.q:0),"V"in ie){if(ie.V<1||ie.V>53)return null;"w"in ie||(ie.w=1),"Z"in ie?(De=F3(ig(ie.y,0,1)),ye=De.getUTCDay(),De=ye>4||ye===0?Wy.ceil(De):Wy(De),De=nk.offset(De,(ie.V-1)*7),ie.y=De.getUTCFullYear(),ie.m=De.getUTCMonth(),ie.d=De.getUTCDate()+(ie.w+6)%7):(De=R3(ig(ie.y,0,1)),ye=De.getDay(),De=ye>4||ye===0?Vy.ceil(De):Vy(De),De=Vb.offset(De,(ie.V-1)*7),ie.y=De.getFullYear(),ie.m=De.getMonth(),ie.d=De.getDate()+(ie.w+6)%7)}else("W"in ie||"U"in ie)&&("w"in ie||(ie.w="u"in ie?ie.u%7:"W"in ie?1:0),ye="Z"in ie?F3(ig(ie.y,0,1)).getUTCDay():R3(ig(ie.y,0,1)).getDay(),ie.m=0,ie.d="W"in ie?(ie.w+6)%7+ie.W*7-(ye+5)%7:ie.w+ie.U*7-(ye+6)%7);return"Z"in ie?(ie.H+=ie.Z/100|0,ie.M+=ie.Z%100,F3(ie)):R3(ie)}}function z(se,je,be,ie){for(var Te=0,De=je.length,ye=be.length,rt,st;Te<De;){if(ie>=ye)return-1;if(rt=je.charCodeAt(Te++),rt===37){if(rt=je.charAt(Te++),st=H[rt in W9?je.charAt(Te++):rt],!st||(ie=st(se,be,ie))<0)return-1}else if(rt!=be.charCodeAt(ie++))return-1}return ie}function U(se,je,be){var ie=d.exec(je.slice(be));return ie?(se.p=f.get(ie[0].toLowerCase()),be+ie[0].length):-1}function Z(se,je,be){var ie=g.exec(je.slice(be));return ie?(se.w=N.get(ie[0].toLowerCase()),be+ie[0].length):-1}function q(se,je,be){var ie=p.exec(je.slice(be));return ie?(se.w=y.get(ie[0].toLowerCase()),be+ie[0].length):-1}function K(se,je,be){var ie=S.exec(je.slice(be));return ie?(se.m=O.get(ie[0].toLowerCase()),be+ie[0].length):-1}function Q(se,je,be){var ie=w.exec(je.slice(be));return ie?(se.m=k.get(ie[0].toLowerCase()),be+ie[0].length):-1}function re(se,je,be){return z(se,t,je,be)}function ae(se,je,be){return z(se,r,je,be)}function de(se,je,be){return z(se,n,je,be)}function he(se){return l[se.getDay()]}function Se(se){return s[se.getDay()]}function ke(se){return c[se.getMonth()]}function Le(se){return o[se.getMonth()]}function fe(se){return a[+(se.getHours()>=12)]}function F(se){return 1+~~(se.getMonth()/3)}function te(se){return l[se.getUTCDay()]}function Y(se){return s[se.getUTCDay()]}function ne(se){return c[se.getUTCMonth()]}function ee(se){return o[se.getUTCMonth()]}function Ce(se){return a[+(se.getUTCHours()>=12)]}function me(se){return 1+~~(se.getUTCMonth()/3)}return{format:function(se){var je=W(se+="",E);return je.toString=function(){return se},je},parse:function(se){var je=R(se+="",!1);return je.toString=function(){return se},je},utcFormat:function(se){var je=W(se+="",D);return je.toString=function(){return se},je},utcParse:function(se){var je=R(se+="",!0);return je.toString=function(){return se},je}}}var W9={"-":"",_:" ",0:"0"},yl=/^\s*\d+/,poe=/^%/,goe=/[\\^$*+?|[\]().{}]/g;function Ma(e,t,r){var n=e<0?"-":"",a=(n?-e:e)+"",s=a.length;return n+(s<r?new Array(r-s+1).join(t)+a:a)}function boe(e){return e.replace(goe,"\\$&")}function lg(e){return new RegExp("^(?:"+e.map(boe).join("|")+")","i")}function og(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function voe(e,t,r){var n=yl.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function yoe(e,t,r){var n=yl.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function woe(e,t,r){var n=yl.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function koe(e,t,r){var n=yl.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function Noe(e,t,r){var n=yl.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function K9(e,t,r){var n=yl.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function G9(e,t,r){var n=yl.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function _oe(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function Soe(e,t,r){var n=yl.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function joe(e,t,r){var n=yl.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function X9(e,t,r){var n=yl.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function Coe(e,t,r){var n=yl.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function Y9(e,t,r){var n=yl.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function Aoe(e,t,r){var n=yl.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function Eoe(e,t,r){var n=yl.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function Toe(e,t,r){var n=yl.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function Ooe(e,t,r){var n=yl.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function Poe(e,t,r){var n=poe.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function Ioe(e,t,r){var n=yl.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function Doe(e,t,r){var n=yl.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function Z9(e,t){return Ma(e.getDate(),t,2)}function Moe(e,t){return Ma(e.getHours(),t,2)}function Loe(e,t){return Ma(e.getHours()%12||12,t,2)}function Roe(e,t){return Ma(1+Vb.count(G0(e),e),t,3)}function OU(e,t){return Ma(e.getMilliseconds(),t,3)}function Foe(e,t){return OU(e,t)+"000"}function Boe(e,t){return Ma(e.getMonth()+1,t,2)}function Uoe(e,t){return Ma(e.getMinutes(),t,2)}function zoe(e,t){return Ma(e.getSeconds(),t,2)}function qoe(e){var t=e.getDay();return t===0?7:t}function Hoe(e,t){return Ma(ak.count(G0(e)-1,e),t,2)}function PU(e){var t=e.getDay();return t>=4||t===0?H1(e):H1.ceil(e)}function $oe(e,t){return e=PU(e),Ma(H1.count(G0(e),e)+(G0(e).getDay()===4),t,2)}function Voe(e){return e.getDay()}function Woe(e,t){return Ma(Vy.count(G0(e)-1,e),t,2)}function Koe(e,t){return Ma(e.getFullYear()%100,t,2)}function Goe(e,t){return e=PU(e),Ma(e.getFullYear()%100,t,2)}function Xoe(e,t){return Ma(e.getFullYear()%1e4,t,4)}function Yoe(e,t){var r=e.getDay();return e=r>=4||r===0?H1(e):H1.ceil(e),Ma(e.getFullYear()%1e4,t,4)}function Zoe(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Ma(t/60|0,"0",2)+Ma(t%60,"0",2)}function Q9(e,t){return Ma(e.getUTCDate(),t,2)}function Qoe(e,t){return Ma(e.getUTCHours(),t,2)}function Joe(e,t){return Ma(e.getUTCHours()%12||12,t,2)}function ece(e,t){return Ma(1+nk.count(X0(e),e),t,3)}function IU(e,t){return Ma(e.getUTCMilliseconds(),t,3)}function tce(e,t){return IU(e,t)+"000"}function rce(e,t){return Ma(e.getUTCMonth()+1,t,2)}function nce(e,t){return Ma(e.getUTCMinutes(),t,2)}function ace(e,t){return Ma(e.getUTCSeconds(),t,2)}function sce(e){var t=e.getUTCDay();return t===0?7:t}function ice(e,t){return Ma(sk.count(X0(e)-1,e),t,2)}function DU(e){var t=e.getUTCDay();return t>=4||t===0?$1(e):$1.ceil(e)}function lce(e,t){return e=DU(e),Ma($1.count(X0(e),e)+(X0(e).getUTCDay()===4),t,2)}function oce(e){return e.getUTCDay()}function cce(e,t){return Ma(Wy.count(X0(e)-1,e),t,2)}function dce(e,t){return Ma(e.getUTCFullYear()%100,t,2)}function uce(e,t){return e=DU(e),Ma(e.getUTCFullYear()%100,t,2)}function hce(e,t){return Ma(e.getUTCFullYear()%1e4,t,4)}function fce(e,t){var r=e.getUTCDay();return e=r>=4||r===0?$1(e):$1.ceil(e),Ma(e.getUTCFullYear()%1e4,t,4)}function mce(){return"+0000"}function J9(){return"%"}function eP(e){return+e}function tP(e){return Math.floor(+e/1e3)}var $x,MU,LU;xce({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function xce(e){return $x=xoe(e),MU=$x.format,$x.parse,LU=$x.utcFormat,$x.utcParse,$x}function pce(e){return new Date(e)}function gce(e){return e instanceof Date?+e:+new Date(+e)}function wj(e,t,r,n,a,s,l,o,c,d){var f=lj(),p=f.invert,y=f.domain,g=d(".%L"),N=d(":%S"),w=d("%I:%M"),k=d("%I %p"),S=d("%a %d"),O=d("%b %d"),E=d("%B"),D=d("%Y");function H(W){return(c(W)<W?g:o(W)<W?N:l(W)<W?w:s(W)<W?k:n(W)<W?a(W)<W?S:O:r(W)<W?E:D)(W)}return f.invert=function(W){return new Date(p(W))},f.domain=function(W){return arguments.length?y(Array.from(W,gce)):y().map(pce)},f.ticks=function(W){var R=y();return e(R[0],R[R.length-1],W??10)},f.tickFormat=function(W,R){return R==null?H:d(R)},f.nice=function(W){var R=y();return(!W||typeof W.range!="function")&&(W=t(R[0],R[R.length-1],W??10)),W?y(kU(R,W)):f},f.copy=function(){return $b(f,wj(e,t,r,n,a,s,l,o,c,d))},f}function bce(){return vd.apply(wj(foe,moe,G0,vj,ak,Vb,gj,xj,em,MU).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function vce(){return vd.apply(wj(uoe,hoe,X0,yj,sk,nk,bj,pj,em,LU).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function ik(){var e=0,t=1,r,n,a,s,l=jo,o=!1,c;function d(p){return p==null||isNaN(p=+p)?c:l(a===0?.5:(p=(s(p)-r)*a,o?Math.max(0,Math.min(1,p)):p))}d.domain=function(p){return arguments.length?([e,t]=p,r=s(e=+e),n=s(t=+t),a=r===n?0:1/(n-r),d):[e,t]},d.clamp=function(p){return arguments.length?(o=!!p,d):o},d.interpolator=function(p){return arguments.length?(l=p,d):l};function f(p){return function(y){var g,N;return arguments.length?([g,N]=y,l=p(g,N),d):[l(0),l(1)]}}return d.range=f(np),d.rangeRound=f(ij),d.unknown=function(p){return arguments.length?(c=p,d):c},function(p){return s=p,r=p(e),n=p(t),a=r===n?0:1/(n-r),d}}function gf(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function RU(){var e=pf(ik()(jo));return e.copy=function(){return gf(e,RU())},th.apply(e,arguments)}function FU(){var e=dj(ik()).domain([1,10]);return e.copy=function(){return gf(e,FU()).base(e.base())},th.apply(e,arguments)}function BU(){var e=uj(ik());return e.copy=function(){return gf(e,BU()).constant(e.constant())},th.apply(e,arguments)}function kj(){var e=hj(ik());return e.copy=function(){return gf(e,kj()).exponent(e.exponent())},th.apply(e,arguments)}function yce(){return kj.apply(null,arguments).exponent(.5)}function UU(){var e=[],t=jo;function r(n){if(n!=null&&!isNaN(n=+n))return t((qb(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let a of n)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(rf),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,a)=>t(a/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(a,s)=>sle(e,s/n))},r.copy=function(){return UU(t).domain(e)},th.apply(r,arguments)}function lk(){var e=0,t=.5,r=1,n=1,a,s,l,o,c,d=jo,f,p=!1,y;function g(w){return isNaN(w=+w)?y:(w=.5+((w=+f(w))-s)*(n*w<n*s?o:c),d(p?Math.max(0,Math.min(1,w)):w))}g.domain=function(w){return arguments.length?([e,t,r]=w,a=f(e=+e),s=f(t=+t),l=f(r=+r),o=a===s?0:.5/(s-a),c=s===l?0:.5/(l-s),n=s<a?-1:1,g):[e,t,r]},g.clamp=function(w){return arguments.length?(p=!!w,g):p},g.interpolator=function(w){return arguments.length?(d=w,g):d};function N(w){return function(k){var S,O,E;return arguments.length?([S,O,E]=k,d=Ple(w,[S,O,E]),g):[d(0),d(.5),d(1)]}}return g.range=N(np),g.rangeRound=N(ij),g.unknown=function(w){return arguments.length?(y=w,g):y},function(w){return f=w,a=w(e),s=w(t),l=w(r),o=a===s?0:.5/(s-a),c=s===l?0:.5/(l-s),n=s<a?-1:1,g}}function zU(){var e=pf(lk()(jo));return e.copy=function(){return gf(e,zU())},th.apply(e,arguments)}function qU(){var e=dj(lk()).domain([.1,1,10]);return e.copy=function(){return gf(e,qU()).base(e.base())},th.apply(e,arguments)}function HU(){var e=uj(lk());return e.copy=function(){return gf(e,HU()).constant(e.constant())},th.apply(e,arguments)}function Nj(){var e=hj(lk());return e.copy=function(){return gf(e,Nj()).exponent(e.exponent())},th.apply(e,arguments)}function wce(){return Nj.apply(null,arguments).exponent(.5)}const gg=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:nj,scaleDiverging:zU,scaleDivergingLog:qU,scaleDivergingPow:Nj,scaleDivergingSqrt:wce,scaleDivergingSymlog:HU,scaleIdentity:wU,scaleImplicit:aS,scaleLinear:yU,scaleLog:NU,scaleOrdinal:rj,scalePoint:ole,scalePow:fj,scaleQuantile:jU,scaleQuantize:CU,scaleRadial:SU,scaleSequential:RU,scaleSequentialLog:FU,scaleSequentialPow:kj,scaleSequentialQuantile:UU,scaleSequentialSqrt:yce,scaleSequentialSymlog:BU,scaleSqrt:toe,scaleSymlog:_U,scaleThreshold:AU,scaleTime:bce,scaleUtc:vce,tickFormat:vU},Symbol.toStringTag,{value:"Module"}));var bf=e=>e.chartData,_j=Ct([bf],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),Wb=(e,t,r,n)=>n?_j(e):bf(e);function Dm(e){if(Array.isArray(e)&&e.length===2){var[t,r]=e;if(Fi(t)&&Fi(r))return!0}return!1}function rP(e,t,r){return r?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function $U(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[r,n]=e,a,s;if(Fi(r))a=r;else if(typeof r=="function")return;if(Fi(n))s=n;else if(typeof n=="function")return;var l=[a,s];if(Dm(l))return l}}function kce(e,t,r){if(!(!r&&t==null)){if(typeof e=="function"&&t!=null)try{var n=e(t,r);if(Dm(n))return rP(n,t,r)}catch{}if(Array.isArray(e)&&e.length===2){var[a,s]=e,l,o;if(a==="auto")t!=null&&(l=Math.min(...t));else if(Zr(a))l=a;else if(typeof a=="function")try{t!=null&&(l=a(t==null?void 0:t[0]))}catch{}else if(typeof a=="string"&&BO.test(a)){var c=BO.exec(a);if(c==null||t==null)l=void 0;else{var d=+c[1];l=t[0]-d}}else l=t==null?void 0:t[0];if(s==="auto")t!=null&&(o=Math.max(...t));else if(Zr(s))o=s;else if(typeof s=="function")try{t!=null&&(o=s(t==null?void 0:t[1]))}catch{}else if(typeof s=="string"&&UO.test(s)){var f=UO.exec(s);if(f==null||t==null)o=void 0;else{var p=+f[1];o=t[1]+p}}else o=t==null?void 0:t[1];var y=[l,o];if(Dm(y))return t==null?y:rP(y,t,r)}}}var ap=1e9,Nce={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},jj,Fs=!0,md="[DecimalError] ",pm=md+"Invalid argument: ",Sj=md+"Exponent out of range: ",sp=Math.floor,Hf=Math.pow,_ce=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,_c,fl=1e7,Ss=7,VU=9007199254740991,Ky=sp(VU/Ss),Kr={};Kr.absoluteValue=Kr.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Kr.comparedTo=Kr.cmp=function(e){var t,r,n,a,s=this;if(e=new s.constructor(e),s.s!==e.s)return s.s||-e.s;if(s.e!==e.e)return s.e>e.e^s.s<0?1:-1;for(n=s.d.length,a=e.d.length,t=0,r=n<a?n:a;t<r;++t)if(s.d[t]!==e.d[t])return s.d[t]>e.d[t]^s.s<0?1:-1;return n===a?0:n>a^s.s<0?1:-1};Kr.decimalPlaces=Kr.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*Ss;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};Kr.dividedBy=Kr.div=function(e){return L0(this,new this.constructor(e))};Kr.dividedToIntegerBy=Kr.idiv=function(e){var t=this,r=t.constructor;return ms(L0(t,new r(e),0,1),r.precision)};Kr.equals=Kr.eq=function(e){return!this.cmp(e)};Kr.exponent=function(){return Ri(this)};Kr.greaterThan=Kr.gt=function(e){return this.cmp(e)>0};Kr.greaterThanOrEqualTo=Kr.gte=function(e){return this.cmp(e)>=0};Kr.isInteger=Kr.isint=function(){return this.e>this.d.length-2};Kr.isNegative=Kr.isneg=function(){return this.s<0};Kr.isPositive=Kr.ispos=function(){return this.s>0};Kr.isZero=function(){return this.s===0};Kr.lessThan=Kr.lt=function(e){return this.cmp(e)<0};Kr.lessThanOrEqualTo=Kr.lte=function(e){return this.cmp(e)<1};Kr.logarithm=Kr.log=function(e){var t,r=this,n=r.constructor,a=n.precision,s=a+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(_c))throw Error(md+"NaN");if(r.s<1)throw Error(md+(r.s?"NaN":"-Infinity"));return r.eq(_c)?new n(0):(Fs=!1,t=L0(sb(r,s),sb(e,s),s),Fs=!0,ms(t,a))};Kr.minus=Kr.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?GU(t,e):WU(t,(e.s=-e.s,e))};Kr.modulo=Kr.mod=function(e){var t,r=this,n=r.constructor,a=n.precision;if(e=new n(e),!e.s)throw Error(md+"NaN");return r.s?(Fs=!1,t=L0(r,e,0,1).times(e),Fs=!0,r.minus(t)):ms(new n(r),a)};Kr.naturalExponential=Kr.exp=function(){return KU(this)};Kr.naturalLogarithm=Kr.ln=function(){return sb(this)};Kr.negated=Kr.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Kr.plus=Kr.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?WU(t,e):GU(t,(e.s=-e.s,e))};Kr.precision=Kr.sd=function(e){var t,r,n,a=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(pm+e);if(t=Ri(a)+1,n=a.d.length-1,r=n*Ss+1,n=a.d[n],n){for(;n%10==0;n/=10)r--;for(n=a.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};Kr.squareRoot=Kr.sqrt=function(){var e,t,r,n,a,s,l,o=this,c=o.constructor;if(o.s<1){if(!o.s)return new c(0);throw Error(md+"NaN")}for(e=Ri(o),Fs=!1,a=Math.sqrt(+o),a==0||a==1/0?(t=Pu(o.d),(t.length+e)%2==0&&(t+="0"),a=Math.sqrt(t),e=sp((e+1)/2)-(e<0||e%2),a==1/0?t="5e"+e:(t=a.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new c(t)):n=new c(a.toString()),r=c.precision,a=l=r+3;;)if(s=n,n=s.plus(L0(o,s,l+2)).times(.5),Pu(s.d).slice(0,l)===(t=Pu(n.d)).slice(0,l)){if(t=t.slice(l-3,l+1),a==l&&t=="4999"){if(ms(s,r+1,0),s.times(s).eq(o)){n=s;break}}else if(t!="9999")break;l+=4}return Fs=!0,ms(n,r)};Kr.times=Kr.mul=function(e){var t,r,n,a,s,l,o,c,d,f=this,p=f.constructor,y=f.d,g=(e=new p(e)).d;if(!f.s||!e.s)return new p(0);for(e.s*=f.s,r=f.e+e.e,c=y.length,d=g.length,c<d&&(s=y,y=g,g=s,l=c,c=d,d=l),s=[],l=c+d,n=l;n--;)s.push(0);for(n=d;--n>=0;){for(t=0,a=c+n;a>n;)o=s[a]+g[n]*y[a-n-1]+t,s[a--]=o%fl|0,t=o/fl|0;s[a]=(s[a]+t)%fl|0}for(;!s[--l];)s.pop();return t?++r:s.shift(),e.d=s,e.e=r,Fs?ms(e,p.precision):e};Kr.toDecimalPlaces=Kr.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(zu(e,0,ap),t===void 0?t=n.rounding:zu(t,0,8),ms(r,e+Ri(r)+1,t))};Kr.toExponential=function(e,t){var r,n=this,a=n.constructor;return e===void 0?r=Mm(n,!0):(zu(e,0,ap),t===void 0?t=a.rounding:zu(t,0,8),n=ms(new a(n),e+1,t),r=Mm(n,!0,e+1)),r};Kr.toFixed=function(e,t){var r,n,a=this,s=a.constructor;return e===void 0?Mm(a):(zu(e,0,ap),t===void 0?t=s.rounding:zu(t,0,8),n=ms(new s(a),e+Ri(a)+1,t),r=Mm(n.abs(),!1,e+Ri(n)+1),a.isneg()&&!a.isZero()?"-"+r:r)};Kr.toInteger=Kr.toint=function(){var e=this,t=e.constructor;return ms(new t(e),Ri(e)+1,t.rounding)};Kr.toNumber=function(){return+this};Kr.toPower=Kr.pow=function(e){var t,r,n,a,s,l,o=this,c=o.constructor,d=12,f=+(e=new c(e));if(!e.s)return new c(_c);if(o=new c(o),!o.s){if(e.s<1)throw Error(md+"Infinity");return o}if(o.eq(_c))return o;if(n=c.precision,e.eq(_c))return ms(o,n);if(t=e.e,r=e.d.length-1,l=t>=r,s=o.s,l){if((r=f<0?-f:f)<=VU){for(a=new c(_c),t=Math.ceil(n/Ss+4),Fs=!1;r%2&&(a=a.times(o),aP(a.d,t)),r=sp(r/2),r!==0;)o=o.times(o),aP(o.d,t);return Fs=!0,e.s<0?new c(_c).div(a):ms(a,n)}}else if(s<0)throw Error(md+"NaN");return s=s<0&&e.d[Math.max(t,r)]&1?-1:1,o.s=1,Fs=!1,a=e.times(sb(o,n+d)),Fs=!0,a=KU(a),a.s=s,a};Kr.toPrecision=function(e,t){var r,n,a=this,s=a.constructor;return e===void 0?(r=Ri(a),n=Mm(a,r<=s.toExpNeg||r>=s.toExpPos)):(zu(e,1,ap),t===void 0?t=s.rounding:zu(t,0,8),a=ms(new s(a),e,t),r=Ri(a),n=Mm(a,e<=r||r<=s.toExpNeg,e)),n};Kr.toSignificantDigits=Kr.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(zu(e,1,ap),t===void 0?t=n.rounding:zu(t,0,8)),ms(new n(r),e,t)};Kr.toString=Kr.valueOf=Kr.val=Kr.toJSON=Kr[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Ri(e),r=e.constructor;return Mm(e,t<=r.toExpNeg||t>=r.toExpPos)};function WU(e,t){var r,n,a,s,l,o,c,d,f=e.constructor,p=f.precision;if(!e.s||!t.s)return t.s||(t=new f(e)),Fs?ms(t,p):t;if(c=e.d,d=t.d,l=e.e,a=t.e,c=c.slice(),s=l-a,s){for(s<0?(n=c,s=-s,o=d.length):(n=d,a=l,o=c.length),l=Math.ceil(p/Ss),o=l>o?l+1:o+1,s>o&&(s=o,n.length=1),n.reverse();s--;)n.push(0);n.reverse()}for(o=c.length,s=d.length,o-s<0&&(s=o,n=d,d=c,c=n),r=0;s;)r=(c[--s]=c[s]+d[s]+r)/fl|0,c[s]%=fl;for(r&&(c.unshift(r),++a),o=c.length;c[--o]==0;)c.pop();return t.d=c,t.e=a,Fs?ms(t,p):t}function zu(e,t,r){if(e!==~~e||e<t||e>r)throw Error(pm+e)}function Pu(e){var t,r,n,a=e.length-1,s="",l=e[0];if(a>0){for(s+=l,t=1;t<a;t++)n=e[t]+"",r=Ss-n.length,r&&(s+=Rh(r)),s+=n;l=e[t],n=l+"",r=Ss-n.length,r&&(s+=Rh(r))}else if(l===0)return"0";for(;l%10===0;)l/=10;return s+l}var L0=(function(){function e(n,a){var s,l=0,o=n.length;for(n=n.slice();o--;)s=n[o]*a+l,n[o]=s%fl|0,l=s/fl|0;return l&&n.unshift(l),n}function t(n,a,s,l){var o,c;if(s!=l)c=s>l?1:-1;else for(o=c=0;o<s;o++)if(n[o]!=a[o]){c=n[o]>a[o]?1:-1;break}return c}function r(n,a,s){for(var l=0;s--;)n[s]-=l,l=n[s]<a[s]?1:0,n[s]=l*fl+n[s]-a[s];for(;!n[0]&&n.length>1;)n.shift()}return function(n,a,s,l){var o,c,d,f,p,y,g,N,w,k,S,O,E,D,H,W,R,z,U=n.constructor,Z=n.s==a.s?1:-1,q=n.d,K=a.d;if(!n.s)return new U(n);if(!a.s)throw Error(md+"Division by zero");for(c=n.e-a.e,R=K.length,H=q.length,g=new U(Z),N=g.d=[],d=0;K[d]==(q[d]||0);)++d;if(K[d]>(q[d]||0)&&--c,s==null?O=s=U.precision:l?O=s+(Ri(n)-Ri(a))+1:O=s,O<0)return new U(0);if(O=O/Ss+2|0,d=0,R==1)for(f=0,K=K[0],O++;(d<H||f)&&O--;d++)E=f*fl+(q[d]||0),N[d]=E/K|0,f=E%K|0;else{for(f=fl/(K[0]+1)|0,f>1&&(K=e(K,f),q=e(q,f),R=K.length,H=q.length),D=R,w=q.slice(0,R),k=w.length;k<R;)w[k++]=0;z=K.slice(),z.unshift(0),W=K[0],K[1]>=fl/2&&++W;do f=0,o=t(K,w,R,k),o<0?(S=w[0],R!=k&&(S=S*fl+(w[1]||0)),f=S/W|0,f>1?(f>=fl&&(f=fl-1),p=e(K,f),y=p.length,k=w.length,o=t(p,w,y,k),o==1&&(f--,r(p,R<y?z:K,y))):(f==0&&(o=f=1),p=K.slice()),y=p.length,y<k&&p.unshift(0),r(w,p,k),o==-1&&(k=w.length,o=t(K,w,R,k),o<1&&(f++,r(w,R<k?z:K,k))),k=w.length):o===0&&(f++,w=[0]),N[d++]=f,o&&w[0]?w[k++]=q[D]||0:(w=[q[D]],k=1);while((D++<H||w[0]!==void 0)&&O--)}return N[0]||N.shift(),g.e=c,ms(g,l?s+Ri(g)+1:s)}})();function KU(e,t){var r,n,a,s,l,o,c=0,d=0,f=e.constructor,p=f.precision;if(Ri(e)>16)throw Error(Sj+Ri(e));if(!e.s)return new f(_c);for(Fs=!1,o=p,l=new f(.03125);e.abs().gte(.1);)e=e.times(l),d+=5;for(n=Math.log(Hf(2,d))/Math.LN10*2+5|0,o+=n,r=a=s=new f(_c),f.precision=o;;){if(a=ms(a.times(e),o),r=r.times(++c),l=s.plus(L0(a,r,o)),Pu(l.d).slice(0,o)===Pu(s.d).slice(0,o)){for(;d--;)s=ms(s.times(s),o);return f.precision=p,t==null?(Fs=!0,ms(s,p)):s}s=l}}function Ri(e){for(var t=e.e*Ss,r=e.d[0];r>=10;r/=10)t++;return t}function B3(e,t,r){if(t>e.LN10.sd())throw Fs=!0,r&&(e.precision=r),Error(md+"LN10 precision limit exceeded");return ms(new e(e.LN10),t)}function Rh(e){for(var t="";e--;)t+="0";return t}function sb(e,t){var r,n,a,s,l,o,c,d,f,p=1,y=10,g=e,N=g.d,w=g.constructor,k=w.precision;if(g.s<1)throw Error(md+(g.s?"NaN":"-Infinity"));if(g.eq(_c))return new w(0);if(t==null?(Fs=!1,d=k):d=t,g.eq(10))return t==null&&(Fs=!0),B3(w,d);if(d+=y,w.precision=d,r=Pu(N),n=r.charAt(0),s=Ri(g),Math.abs(s)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)g=g.times(e),r=Pu(g.d),n=r.charAt(0),p++;s=Ri(g),n>1?(g=new w("0."+r),s++):g=new w(n+"."+r.slice(1))}else return c=B3(w,d+2,k).times(s+""),g=sb(new w(n+"."+r.slice(1)),d-y).plus(c),w.precision=k,t==null?(Fs=!0,ms(g,k)):g;for(o=l=g=L0(g.minus(_c),g.plus(_c),d),f=ms(g.times(g),d),a=3;;){if(l=ms(l.times(f),d),c=o.plus(L0(l,new w(a),d)),Pu(c.d).slice(0,d)===Pu(o.d).slice(0,d))return o=o.times(2),s!==0&&(o=o.plus(B3(w,d+2,k).times(s+""))),o=L0(o,new w(p),d),w.precision=k,t==null?(Fs=!0,ms(o,k)):o;o=c,a+=2}}function nP(e,t){var r,n,a;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(a=t.length;t.charCodeAt(a-1)===48;)--a;if(t=t.slice(n,a),t){if(a-=n,r=r-n-1,e.e=sp(r/Ss),e.d=[],n=(r+1)%Ss,r<0&&(n+=Ss),n<a){for(n&&e.d.push(+t.slice(0,n)),a-=Ss;n<a;)e.d.push(+t.slice(n,n+=Ss));t=t.slice(n),n=Ss-t.length}else n-=a;for(;n--;)t+="0";if(e.d.push(+t),Fs&&(e.e>Ky||e.e<-Ky))throw Error(Sj+r)}else e.s=0,e.e=0,e.d=[0];return e}function ms(e,t,r){var n,a,s,l,o,c,d,f,p=e.d;for(l=1,s=p[0];s>=10;s/=10)l++;if(n=t-l,n<0)n+=Ss,a=t,d=p[f=0];else{if(f=Math.ceil((n+1)/Ss),s=p.length,f>=s)return e;for(d=s=p[f],l=1;s>=10;s/=10)l++;n%=Ss,a=n-Ss+l}if(r!==void 0&&(s=Hf(10,l-a-1),o=d/s%10|0,c=t<0||p[f+1]!==void 0||d%s,c=r<4?(o||c)&&(r==0||r==(e.s<0?3:2)):o>5||o==5&&(r==4||c||r==6&&(n>0?a>0?d/Hf(10,l-a):0:p[f-1])%10&1||r==(e.s<0?8:7))),t<1||!p[0])return c?(s=Ri(e),p.length=1,t=t-s-1,p[0]=Hf(10,(Ss-t%Ss)%Ss),e.e=sp(-t/Ss)||0):(p.length=1,p[0]=e.e=e.s=0),e;if(n==0?(p.length=f,s=1,f--):(p.length=f+1,s=Hf(10,Ss-n),p[f]=a>0?(d/Hf(10,l-a)%Hf(10,a)|0)*s:0),c)for(;;)if(f==0){(p[0]+=s)==fl&&(p[0]=1,++e.e);break}else{if(p[f]+=s,p[f]!=fl)break;p[f--]=0,s=1}for(n=p.length;p[--n]===0;)p.pop();if(Fs&&(e.e>Ky||e.e<-Ky))throw Error(Sj+Ri(e));return e}function GU(e,t){var r,n,a,s,l,o,c,d,f,p,y=e.constructor,g=y.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new y(e),Fs?ms(t,g):t;if(c=e.d,p=t.d,n=t.e,d=e.e,c=c.slice(),l=d-n,l){for(f=l<0,f?(r=c,l=-l,o=p.length):(r=p,n=d,o=c.length),a=Math.max(Math.ceil(g/Ss),o)+2,l>a&&(l=a,r.length=1),r.reverse(),a=l;a--;)r.push(0);r.reverse()}else{for(a=c.length,o=p.length,f=a<o,f&&(o=a),a=0;a<o;a++)if(c[a]!=p[a]){f=c[a]<p[a];break}l=0}for(f&&(r=c,c=p,p=r,t.s=-t.s),o=c.length,a=p.length-o;a>0;--a)c[o++]=0;for(a=p.length;a>l;){if(c[--a]<p[a]){for(s=a;s&&c[--s]===0;)c[s]=fl-1;--c[s],c[a]+=fl}c[a]-=p[a]}for(;c[--o]===0;)c.pop();for(;c[0]===0;c.shift())--n;return c[0]?(t.d=c,t.e=n,Fs?ms(t,g):t):new y(0)}function Mm(e,t,r){var n,a=Ri(e),s=Pu(e.d),l=s.length;return t?(r&&(n=r-l)>0?s=s.charAt(0)+"."+s.slice(1)+Rh(n):l>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(a<0?"e":"e+")+a):a<0?(s="0."+Rh(-a-1)+s,r&&(n=r-l)>0&&(s+=Rh(n))):a>=l?(s+=Rh(a+1-l),r&&(n=r-a-1)>0&&(s=s+"."+Rh(n))):((n=a+1)<l&&(s=s.slice(0,n)+"."+s.slice(n)),r&&(n=r-l)>0&&(a+1===l&&(s+="."),s+=Rh(n))),e.s<0?"-"+s:s}function aP(e,t){if(e.length>t)return e.length=t,!0}function XU(e){var t,r,n;function a(s){var l=this;if(!(l instanceof a))return new a(s);if(l.constructor=a,s instanceof a){l.s=s.s,l.e=s.e,l.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(pm+s);if(s>0)l.s=1;else if(s<0)s=-s,l.s=-1;else{l.s=0,l.e=0,l.d=[0];return}if(s===~~s&&s<1e7){l.e=0,l.d=[s];return}return nP(l,s.toString())}else if(typeof s!="string")throw Error(pm+s);if(s.charCodeAt(0)===45?(s=s.slice(1),l.s=-1):l.s=1,_ce.test(s))nP(l,s);else throw Error(pm+s)}if(a.prototype=Kr,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=XU,a.config=a.set=Sce,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return a.config(e),a}function Sce(e){if(!e||typeof e!="object")throw Error(md+"Object expected");var t,r,n,a=["precision",1,ap,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<a.length;t+=3)if((n=e[r=a[t]])!==void 0)if(sp(n)===n&&n>=a[t+1]&&n<=a[t+2])this[r]=n;else throw Error(pm+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(pm+r+": "+n);return this}var jj=XU(Nce);_c=new jj(1);const Ga=jj;var jce=e=>e,YU={},ZU=e=>e===YU,sP=e=>function t(){return arguments.length===0||arguments.length===1&&ZU(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},QU=(e,t)=>e===1?t:sP(function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];var s=n.filter(l=>l!==YU).length;return s>=e?t(...n):QU(e-s,sP(function(){for(var l=arguments.length,o=new Array(l),c=0;c<l;c++)o[c]=arguments[c];var d=n.map(f=>ZU(f)?o.shift():f);return t(...d,...o)}))}),ok=e=>QU(e.length,e),oS=(e,t)=>{for(var r=[],n=e;n<t;++n)r[n-e]=n;return r},Cce=ok((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(r=>t[r]).map(e)),Ace=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return jce;var a=r.reverse(),s=a[0],l=a.slice(1);return function(){return l.reduce((o,c)=>c(o),s(...arguments))}},cS=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join(""),JU=e=>{var t=null,r=null;return function(){for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return t&&a.every((l,o)=>{var c;return l===((c=t)===null||c===void 0?void 0:c[o])})||(t=a,r=e(...a)),r}};function ez(e){var t;return e===0?t=1:t=Math.floor(new Ga(e).abs().log(10).toNumber())+1,t}function tz(e,t,r){for(var n=new Ga(e),a=0,s=[];n.lt(t)&&a<1e5;)s.push(n.toNumber()),n=n.add(r),a++;return s}ok((e,t,r)=>{var n=+e,a=+t;return n+r*(a-n)});ok((e,t,r)=>{var n=t-+e;return n=n||1/0,(r-e)/n});ok((e,t,r)=>{var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});var rz=e=>{var[t,r]=e,[n,a]=[t,r];return t>r&&([n,a]=[r,t]),[n,a]},nz=(e,t,r)=>{if(e.lte(0))return new Ga(0);var n=ez(e.toNumber()),a=new Ga(10).pow(n),s=e.div(a),l=n!==1?.05:.1,o=new Ga(Math.ceil(s.div(l).toNumber())).add(r).mul(l),c=o.mul(a);return t?new Ga(c.toNumber()):new Ga(Math.ceil(c.toNumber()))},Ece=(e,t,r)=>{var n=new Ga(1),a=new Ga(e);if(!a.isint()&&r){var s=Math.abs(e);s<1?(n=new Ga(10).pow(ez(e)-1),a=new Ga(Math.floor(a.div(n).toNumber())).mul(n)):s>1&&(a=new Ga(Math.floor(e)))}else e===0?a=new Ga(Math.floor((t-1)/2)):r||(a=new Ga(Math.floor(e)));var l=Math.floor((t-1)/2),o=Ace(Cce(c=>a.add(new Ga(c-l).mul(n)).toNumber()),oS);return o(0,t)},az=function(t,r,n,a){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-t)/(n-1)))return{step:new Ga(0),tickMin:new Ga(0),tickMax:new Ga(0)};var l=nz(new Ga(r).sub(t).div(n-1),a,s),o;t<=0&&r>=0?o=new Ga(0):(o=new Ga(t).add(r).div(2),o=o.sub(new Ga(o).mod(l)));var c=Math.ceil(o.sub(t).div(l).toNumber()),d=Math.ceil(new Ga(r).sub(o).div(l).toNumber()),f=c+d+1;return f>n?az(t,r,n,a,s+1):(f<n&&(d=r>0?d+(n-f):d,c=r>0?c:c+(n-f)),{step:l,tickMin:o.sub(new Ga(c).mul(l)),tickMax:o.add(new Ga(d).mul(l))})};function Tce(e){var[t,r]=e,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(n,2),[l,o]=rz([t,r]);if(l===-1/0||o===1/0){var c=o===1/0?[l,...oS(0,n-1).map(()=>1/0)]:[...oS(0,n-1).map(()=>-1/0),o];return t>r?cS(c):c}if(l===o)return Ece(l,n,a);var{step:d,tickMin:f,tickMax:p}=az(l,o,s,a,0),y=tz(f,p.add(new Ga(.1).mul(d)),d);return t>r?cS(y):y}function Oce(e,t){var[r,n]=e,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[s,l]=rz([r,n]);if(s===-1/0||l===1/0)return[r,n];if(s===l)return[s];var o=Math.max(t,2),c=nz(new Ga(l).sub(s).div(o-1),a,0),d=[...tz(new Ga(s),new Ga(l),c),l];return a===!1&&(d=d.map(f=>Math.round(f))),r>n?cS(d):d}var Pce=JU(Tce),Ice=JU(Oce),sz=e=>e.rootProps.maxBarSize,Dce=e=>e.rootProps.barGap,iz=e=>e.rootProps.barCategoryGap,Mce=e=>e.rootProps.barSize,Kb=e=>e.rootProps.stackOffset,Cj=e=>e.options.chartName,Aj=e=>e.rootProps.syncId,lz=e=>e.rootProps.syncMethod,Ej=e=>e.options.eventEmitter,S0={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},bc={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},ck=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},Lce={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:S0.angleAxisId,includeHidden:!1,name:void 0,reversed:S0.reversed,scale:S0.scale,tick:S0.tick,tickCount:void 0,ticks:void 0,type:S0.type,unit:void 0},Rce={allowDataOverflow:bc.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:bc.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:bc.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:bc.scale,tick:bc.tick,tickCount:bc.tickCount,ticks:void 0,type:bc.type,unit:void 0},Fce={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:S0.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:S0.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:S0.scale,tick:S0.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},Bce={allowDataOverflow:bc.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:bc.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:bc.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:bc.scale,tick:bc.tick,tickCount:bc.tickCount,ticks:void 0,type:"category",unit:void 0},Tj=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?Fce:Lce,Oj=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?Bce:Rce,dk=e=>e.polarOptions,Pj=Ct([Q0,J0,Xi],BB),oz=Ct([dk,Pj],(e,t)=>{if(e!=null)return no(e.innerRadius,t,0)}),cz=Ct([dk,Pj],(e,t)=>{if(e!=null)return no(e.outerRadius,t,t*.8)}),Uce=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:r}=e;return[t,r]},dz=Ct([dk],Uce);Ct([Tj,dz],ck);var uz=Ct([Pj,oz,cz],(e,t,r)=>{if(!(e==null||t==null||r==null))return[t,r]});Ct([Oj,uz],ck);var hz=Ct([fa,dk,oz,cz,Q0,J0],(e,t,r,n,a,s)=>{if(!(e!=="centric"&&e!=="radial"||t==null||r==null||n==null)){var{cx:l,cy:o,startAngle:c,endAngle:d}=t;return{cx:no(l,a,a/2),cy:no(o,s,s/2),innerRadius:r,outerRadius:n,startAngle:c,endAngle:d,clockWise:!1}}}),qs=(e,t)=>t,Gb=(e,t,r)=>r;function uk(e){return e==null?void 0:e.id}var Qi=e=>{var t=fa(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},ip=e=>e.tooltip.settings.axisId,Ji=e=>{var t=Qi(e),r=ip(e);return Xb(e,t,r)},fz=Ct([Ji],e=>e==null?void 0:e.dataKey);function mz(e,t,r){var{chartData:n=[]}=t,{allowDuplicatedCategory:a,dataKey:s}=r,l=new Map;return e.forEach(o=>{var c,d=(c=o.data)!==null&&c!==void 0?c:n;if(!(d==null||d.length===0)){var f=uk(o);d.forEach((p,y)=>{var g=s==null||a?y:String(as(p,s,null)),N=as(p,o.dataKey,0),w;l.has(g)?w=l.get(g):w={},Object.assign(w,{[f]:N}),l.set(g,w)})}}),Array.from(l.values())}function hk(e){return e.stackId!=null&&e.dataKey!=null}var fk=(e,t)=>e===t?!0:e==null||t==null?!1:e[0]===t[0]&&e[1]===t[1];function mk(e,t){return Array.isArray(e)&&Array.isArray(t)&&e.length===0&&t.length===0?!0:e===t}function iP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Gy(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?iP(Object(r),!0).forEach(function(n){zce(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):iP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function zce(e,t,r){return(t=qce(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qce(e){var t=Hce(e,"string");return typeof t=="symbol"?t:t+""}function Hce(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var dS=[0,"auto"],mc={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},xz=(e,t)=>e.cartesianAxis.xAxis[t],rh=(e,t)=>{var r=xz(e,t);return r??mc},xc={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:dS,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Ub},pz=(e,t)=>e.cartesianAxis.yAxis[t],nh=(e,t)=>{var r=pz(e,t);return r??xc},$ce={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},Ij=(e,t)=>{var r=e.cartesianAxis.zAxis[t];return r??$ce},Xs=(e,t,r)=>{switch(t){case"xAxis":return rh(e,r);case"yAxis":return nh(e,r);case"zAxis":return Ij(e,r);case"angleAxis":return Tj(e,r);case"radiusAxis":return Oj(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},Vce=(e,t,r)=>{switch(t){case"xAxis":return rh(e,r);case"yAxis":return nh(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},Xb=(e,t,r)=>{switch(t){case"xAxis":return rh(e,r);case"yAxis":return nh(e,r);case"angleAxis":return Tj(e,r);case"radiusAxis":return Oj(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},gz=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function Dj(e,t){return r=>{switch(e){case"xAxis":return"xAxisId"in r&&r.xAxisId===t;case"yAxis":return"yAxisId"in r&&r.yAxisId===t;case"zAxis":return"zAxisId"in r&&r.zAxisId===t;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===t;default:return!1}}}var Yb=e=>e.graphicalItems.cartesianItems,Wce=Ct([qs,Gb],Dj),Mj=(e,t,r)=>e.filter(r).filter(n=>(t==null?void 0:t.includeHidden)===!0?!0:!n.hide),Zb=Ct([Yb,Xs,Wce],Mj,{memoizeOptions:{resultEqualityCheck:mk}}),bz=Ct([Zb],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(hk)),vz=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),Kce=Ct([Zb],vz),Lj=e=>e.map(t=>t.data).filter(Boolean).flat(1),Gce=Ct([Zb],Lj,{memoizeOptions:{resultEqualityCheck:mk}}),Rj=(e,t)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:a}=t;return e.length>0?e:r.slice(n,a+1)},Fj=Ct([Gce,Wb],Rj),Bj=(e,t,r)=>(t==null?void 0:t.dataKey)!=null?e.map(n=>({value:as(n,t.dataKey)})):r.length>0?r.map(n=>n.dataKey).flatMap(n=>e.map(a=>({value:as(a,n)}))):e.map(n=>({value:n})),xk=Ct([Fj,Xs,Zb],Bj);function yz(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function ty(e){if(Uu(e)||e instanceof Date){var t=Number(e);if(Fi(t))return t}}function lP(e){if(Array.isArray(e)){var t=[ty(e[0]),ty(e[1])];return Dm(t)?t:void 0}var r=ty(e);if(r!=null)return[r,r]}function lp(e){return e.map(ty).filter(uie)}function Xce(e,t,r){return!r||typeof t!="number"||Tc(t)?[]:r.length?lp(r.flatMap(n=>{var a=as(e,n.dataKey),s,l;if(Array.isArray(a)?[s,l]=a:s=l=a,!(!Fi(s)||!Fi(l)))return[t-s,t+l]})):[]}var Yce=Ct([bz,Wb,Ji],mz),wz=(e,t,r)=>{var n={},a=t.reduce((s,l)=>(l.stackId==null||(s[l.stackId]==null&&(s[l.stackId]=[]),s[l.stackId].push(l)),s),n);return Object.fromEntries(Object.entries(a).map(s=>{var[l,o]=s,c=o.map(uk);return[l,{stackedData:Mae(e,c,r),graphicalItems:o}]}))},ib=Ct([Yce,bz,Kb],wz),kz=(e,t,r,n)=>{var{dataStartIndex:a,dataEndIndex:s}=t;if(n==null&&r!=="zAxis"){var l=Bae(e,a,s);if(!(l!=null&&l[0]===0&&l[1]===0))return l}},Zce=Ct([Xs],e=>e.allowDataOverflow),Uj=e=>{var t;if(e==null||!("domain"in e))return dS;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var r=lp(e.ticks);return[Math.min(...r),Math.max(...r)]}if(e.type==="category")return e.ticks.map(String)}return(t=e==null?void 0:e.domain)!==null&&t!==void 0?t:dS},zj=Ct([Xs],Uj),qj=Ct([zj,Zce],$U),Qce=Ct([ib,bf,qs,qj],kz,{memoizeOptions:{resultEqualityCheck:fk}}),pk=e=>e.errorBars,Jce=(e,t,r)=>e.flatMap(n=>t[n.id]).filter(Boolean).filter(n=>yz(r,n)),Xy=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var a=r.filter(Boolean);if(a.length!==0){var s=a.flat(),l=Math.min(...s),o=Math.max(...s);return[l,o]}},Hj=(e,t,r,n,a)=>{var s,l;if(r.length>0&&e.forEach(o=>{r.forEach(c=>{var d,f,p=(d=n[c.id])===null||d===void 0?void 0:d.filter(S=>yz(a,S)),y=as(o,(f=t.dataKey)!==null&&f!==void 0?f:c.dataKey),g=Xce(o,y,p);if(g.length>=2){var N=Math.min(...g),w=Math.max(...g);(s==null||N<s)&&(s=N),(l==null||w>l)&&(l=w)}var k=lP(y);k!=null&&(s=s==null?k[0]:Math.min(s,k[0]),l=l==null?k[1]:Math.max(l,k[1]))})}),(t==null?void 0:t.dataKey)!=null&&e.forEach(o=>{var c=lP(as(o,t.dataKey));c!=null&&(s=s==null?c[0]:Math.min(s,c[0]),l=l==null?c[1]:Math.max(l,c[1]))}),Fi(s)&&Fi(l))return[s,l]},ede=Ct([Fj,Xs,Kce,pk,qs],Hj,{memoizeOptions:{resultEqualityCheck:fk}});function tde(e){var{value:t}=e;if(Uu(t)||t instanceof Date)return t}var rde=(e,t,r)=>{var n=e.map(tde).filter(a=>a!=null);return r&&(t.dataKey==null||t.allowDuplicatedCategory&&XF(n))?cU(0,e.length):t.allowDuplicatedCategory?n:Array.from(new Set(n))},Nz=e=>e.referenceElements.dots,op=(e,t,r)=>e.filter(n=>n.ifOverflow==="extendDomain").filter(n=>t==="xAxis"?n.xAxisId===r:n.yAxisId===r),nde=Ct([Nz,qs,Gb],op),_z=e=>e.referenceElements.areas,ade=Ct([_z,qs,Gb],op),Sz=e=>e.referenceElements.lines,sde=Ct([Sz,qs,Gb],op),jz=(e,t)=>{var r=lp(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},ide=Ct(nde,qs,jz),Cz=(e,t)=>{var r=lp(e.flatMap(n=>[t==="xAxis"?n.x1:n.y1,t==="xAxis"?n.x2:n.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},lde=Ct([ade,qs],Cz),Az=(e,t)=>{var r=lp(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},ode=Ct(sde,qs,Az),cde=Ct(ide,ode,lde,(e,t,r)=>Xy(e,r,t)),$j=(e,t,r,n,a,s,l,o)=>{if(r!=null)return r;var c=l==="vertical"&&o==="xAxis"||l==="horizontal"&&o==="yAxis",d=c?Xy(n,s,a):Xy(s,a);return kce(t,d,e.allowDataOverflow)},dde=Ct([Xs,zj,qj,Qce,ede,cde,fa,qs],$j,{memoizeOptions:{resultEqualityCheck:fk}}),ude=[0,1],Vj=(e,t,r,n,a,s,l)=>{if(!((e==null||r==null||r.length===0)&&l===void 0)){var{dataKey:o,type:c}=e,d=Vu(t,s);return d&&o==null?cU(0,r.length):c==="category"?rde(n,e,d):a==="expand"?ude:l}},Wj=Ct([Xs,fa,Fj,xk,Kb,qs,dde],Vj),Ez=(e,t,r,n,a)=>{if(e!=null){var{scale:s,type:l}=e;if(s==="auto")return t==="radial"&&a==="radiusAxis"?"band":t==="radial"&&a==="angleAxis"?"linear":l==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?"point":l==="category"?"band":"linear";if(typeof s=="string"){var o="scale".concat(Lb(s));return o in gg?o:"point"}}},cp=Ct([Xs,fa,gz,Cj,qs],Ez);function hde(e){if(e!=null){if(e in gg)return gg[e]();var t="scale".concat(Lb(e));if(t in gg)return gg[t]()}}function Kj(e,t,r,n){if(!(r==null||n==null)){if(typeof e.scale=="function")return e.scale.copy().domain(r).range(n);var a=hde(t);if(a!=null){var s=a.domain(r).range(n);return Tae(s),s}}}var Gj=(e,t,r)=>{var n=Uj(t);if(!(r!=="auto"&&r!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&Dm(e))return Pce(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&Dm(e))return Ice(e,t.tickCount,t.allowDecimals)}},Xj=Ct([Wj,Xb,cp],Gj),Yj=(e,t,r,n)=>{if(n!=="angleAxis"&&(e==null?void 0:e.type)==="number"&&Dm(t)&&Array.isArray(r)&&r.length>0){var a=t[0],s=r[0],l=t[1],o=r[r.length-1];return[Math.min(a,s),Math.max(l,o)]}return t},fde=Ct([Xs,Wj,Xj,qs],Yj),mde=Ct(xk,Xs,(e,t)=>{if(!(!t||t.type!=="number")){var r=1/0,n=Array.from(lp(e.map(o=>o.value))).sort((o,c)=>o-c);if(n.length<2)return 1/0;var a=n[n.length-1]-n[0];if(a===0)return 1/0;for(var s=0;s<n.length-1;s++){var l=n[s+1]-n[s];r=Math.min(r,l)}return r/a}}),Tz=Ct(mde,fa,iz,Xi,(e,t,r,n)=>n,(e,t,r,n,a)=>{if(!Fi(e))return 0;var s=t==="vertical"?n.height:n.width;if(a==="gap")return e*s/2;if(a==="no-gap"){var l=no(r,e*s),o=e*s/2;return o-l-(o-l)/s*l}return 0}),xde=(e,t)=>{var r=rh(e,t);return r==null||typeof r.padding!="string"?0:Tz(e,"xAxis",t,r.padding)},pde=(e,t)=>{var r=nh(e,t);return r==null||typeof r.padding!="string"?0:Tz(e,"yAxis",t,r.padding)},gde=Ct(rh,xde,(e,t)=>{var r,n;if(e==null)return{left:0,right:0};var{padding:a}=e;return typeof a=="string"?{left:t,right:t}:{left:((r=a.left)!==null&&r!==void 0?r:0)+t,right:((n=a.right)!==null&&n!==void 0?n:0)+t}}),bde=Ct(nh,pde,(e,t)=>{var r,n;if(e==null)return{top:0,bottom:0};var{padding:a}=e;return typeof a=="string"?{top:t,bottom:t}:{top:((r=a.top)!==null&&r!==void 0?r:0)+t,bottom:((n=a.bottom)!==null&&n!==void 0?n:0)+t}}),vde=Ct([Xi,gde,Jw,Qw,(e,t,r)=>r],(e,t,r,n,a)=>{var{padding:s}=n;return a?[s.left,r.width-s.right]:[e.left+t.left,e.left+e.width-t.right]}),yde=Ct([Xi,fa,bde,Jw,Qw,(e,t,r)=>r],(e,t,r,n,a,s)=>{var{padding:l}=a;return s?[n.height-l.bottom,l.top]:t==="horizontal"?[e.top+e.height-r.bottom,e.top+r.top]:[e.top+r.top,e.top+e.height-r.bottom]}),Qb=(e,t,r,n)=>{var a;switch(t){case"xAxis":return vde(e,r,n);case"yAxis":return yde(e,r,n);case"zAxis":return(a=Ij(e,r))===null||a===void 0?void 0:a.range;case"angleAxis":return dz(e);case"radiusAxis":return uz(e,r);default:return}},Oz=Ct([Xs,Qb],ck),dp=Ct([Xs,cp,fde,Oz],Kj);Ct([Zb,pk,qs],Jce);function Pz(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var gk=(e,t)=>t,bk=(e,t,r)=>r,wde=Ct(Yw,gk,bk,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(Pz)),kde=Ct(Zw,gk,bk,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(Pz)),Iz=(e,t)=>({width:e.width,height:t.height}),Nde=(e,t)=>{var r=typeof t.width=="number"?t.width:Ub;return{width:r,height:e.height}},Dz=Ct(Xi,rh,Iz),_de=(e,t,r)=>{switch(t){case"top":return e.top;case"bottom":return r-e.bottom;default:return 0}},Sde=(e,t,r)=>{switch(t){case"left":return e.left;case"right":return r-e.right;default:return 0}},jde=Ct(J0,Xi,wde,gk,bk,(e,t,r,n,a)=>{var s={},l;return r.forEach(o=>{var c=Iz(t,o);l==null&&(l=_de(t,n,e));var d=n==="top"&&!a||n==="bottom"&&a;s[o.id]=l-Number(d)*c.height,l+=(d?-1:1)*c.height}),s}),Cde=Ct(Q0,Xi,kde,gk,bk,(e,t,r,n,a)=>{var s={},l;return r.forEach(o=>{var c=Nde(t,o);l==null&&(l=Sde(t,n,e));var d=n==="left"&&!a||n==="right"&&a;s[o.id]=l-Number(d)*c.width,l+=(d?-1:1)*c.width}),s}),Ade=(e,t)=>{var r=rh(e,t);if(r!=null)return jde(e,r.orientation,r.mirror)},Ede=Ct([Xi,rh,Ade,(e,t)=>t],(e,t,r,n)=>{if(t!=null){var a=r==null?void 0:r[n];return a==null?{x:e.left,y:0}:{x:e.left,y:a}}}),Tde=(e,t)=>{var r=nh(e,t);if(r!=null)return Cde(e,r.orientation,r.mirror)},Ode=Ct([Xi,nh,Tde,(e,t)=>t],(e,t,r,n)=>{if(t!=null){var a=r==null?void 0:r[n];return a==null?{x:0,y:e.top}:{x:a,y:e.top}}}),Mz=Ct(Xi,nh,(e,t)=>{var r=typeof t.width=="number"?t.width:Ub;return{width:r,height:e.height}}),oP=(e,t,r)=>{switch(t){case"xAxis":return Dz(e,r).width;case"yAxis":return Mz(e,r).height;default:return}},Lz=(e,t,r,n)=>{if(r!=null){var{allowDuplicatedCategory:a,type:s,dataKey:l}=r,o=Vu(e,n),c=t.map(d=>d.value);if(l&&o&&s==="category"&&a&&XF(c))return c}},Zj=Ct([fa,xk,Xs,qs],Lz),Rz=(e,t,r,n)=>{if(!(r==null||r.dataKey==null)){var{type:a,scale:s}=r,l=Vu(e,n);if(l&&(a==="number"||s!=="auto"))return t.map(o=>o.value)}},Qj=Ct([fa,xk,Xb,qs],Rz),cP=Ct([fa,Vce,cp,dp,Zj,Qj,Qb,Xj,qs],(e,t,r,n,a,s,l,o,c)=>{if(t==null)return null;var d=Vu(e,c);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:c,categoricalDomain:s,duplicateDomain:a,isCategorical:d,niceTicks:o,range:l,realScaleType:r,scale:n}}),Pde=(e,t,r,n,a,s,l,o,c)=>{if(!(t==null||n==null)){var d=Vu(e,c),{type:f,ticks:p,tickCount:y}=t,g=r==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,N=f==="category"&&n.bandwidth?n.bandwidth()/g:0;N=c==="angleAxis"&&s!=null&&s.length>=2?bl(s[0]-s[1])*2*N:N;var w=p||a;if(w){var k=w.map((S,O)=>{var E=l?l.indexOf(S):S;return{index:O,coordinate:n(E)+N,value:S,offset:N}});return k.filter(S=>!Tc(S.coordinate))}return d&&o?o.map((S,O)=>({coordinate:n(S)+N,value:S,index:O,offset:N})):n.ticks?n.ticks(y).map(S=>({coordinate:n(S)+N,value:S,offset:N})):n.domain().map((S,O)=>({coordinate:n(S)+N,value:l?l[S]:S,index:O,offset:N}))}},Fz=Ct([fa,Xb,cp,dp,Xj,Qb,Zj,Qj,qs],Pde),Ide=(e,t,r,n,a,s,l)=>{if(!(t==null||r==null||n==null||n[0]===n[1])){var o=Vu(e,l),{tickCount:c}=t,d=0;return d=l==="angleAxis"&&(n==null?void 0:n.length)>=2?bl(n[0]-n[1])*2*d:d,o&&s?s.map((f,p)=>({coordinate:r(f)+d,value:f,index:p,offset:d})):r.ticks?r.ticks(c).map(f=>({coordinate:r(f)+d,value:f,offset:d})):r.domain().map((f,p)=>({coordinate:r(f)+d,value:a?a[f]:f,index:p,offset:d}))}},qu=Ct([fa,Xb,dp,Qb,Zj,Qj,qs],Ide),Hu=Ct(Xs,dp,(e,t)=>{if(!(e==null||t==null))return Gy(Gy({},e),{},{scale:t})}),Dde=Ct([Xs,cp,Wj,Oz],Kj);Ct((e,t,r)=>Ij(e,r),Dde,(e,t)=>{if(!(e==null||t==null))return Gy(Gy({},e),{},{scale:t})});var Mde=Ct([fa,Yw,Zw],(e,t,r)=>{switch(e){case"horizontal":return t.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),Bz=e=>e.options.defaultTooltipEventType,Uz=e=>e.options.validateTooltipEventTypes;function zz(e,t,r){if(e==null)return t;var n=e?"axis":"item";return r==null?t:r.includes(n)?n:t}function Jj(e,t){var r=Bz(e),n=Uz(e);return zz(t,r,n)}function Lde(e){return Jr(t=>Jj(t,e))}var qz=(e,t)=>{var r,n=Number(t);if(!(Tc(n)||t==null))return n>=0?e==null||(r=e[n])===null||r===void 0?void 0:r.value:void 0},Rde=e=>e.tooltip.settings,Uh={active:!1,index:null,dataKey:void 0,coordinate:void 0},Fde={itemInteraction:{click:Uh,hover:Uh},axisInteraction:{click:Uh,hover:Uh},keyboardInteraction:Uh,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},Hz=Dc({name:"tooltip",initialState:Fde,reducers:{addTooltipEntrySettings:{reducer(e,t){e.tooltipItemPayloads.push(t.payload)},prepare:No()},removeTooltipEntrySettings:{reducer(e,t){var r=M0(e).tooltipItemPayloads.indexOf(t.payload);r>-1&&e.tooltipItemPayloads.splice(r,1)},prepare:No()},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:Bde,removeTooltipEntrySettings:Ude,setTooltipSettingsState:zde,setActiveMouseOverItemIndex:$z,mouseLeaveItem:qde,mouseLeaveChart:Vz,setActiveClickItemIndex:Hde,setMouseOverAxisIndex:Wz,setMouseClickAxisIndex:$de,setSyncInteraction:uS,setKeyboardInteraction:hS}=Hz.actions,Vde=Hz.reducer;function dP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function C2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?dP(Object(r),!0).forEach(function(n){Wde(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Wde(e,t,r){return(t=Kde(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Kde(e){var t=Gde(e,"string");return typeof t=="symbol"?t:t+""}function Gde(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Xde(e,t,r){return t==="axis"?r==="click"?e.axisInteraction.click:e.axisInteraction.hover:r==="click"?e.itemInteraction.click:e.itemInteraction.hover}function Yde(e){return e.index!=null}var Kz=(e,t,r,n)=>{if(t==null)return Uh;var a=Xde(e,t,r);if(a==null)return Uh;if(a.active)return a;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var s=e.settings.active===!0;if(Yde(a)){if(s)return C2(C2({},a),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n};return C2(C2({},Uh),{},{coordinate:a.coordinate})},eC=(e,t)=>{var r=e==null?void 0:e.index;if(r==null)return null;var n=Number(r);if(!Fi(n))return r;var a=0,s=1/0;return t.length>0&&(s=t.length-1),String(Math.max(a,Math.min(n,s)))},Gz=(e,t,r,n,a,s,l,o)=>{if(!(s==null||o==null)){var c=l[0],d=c==null?void 0:o(c.positions,s);if(d!=null)return d;var f=a==null?void 0:a[Number(s)];if(f)switch(r){case"horizontal":return{x:f.coordinate,y:(n.top+t)/2};default:return{x:(n.left+e)/2,y:f.coordinate}}}},Xz=(e,t,r,n)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var a;return r==="hover"?a=e.itemInteraction.hover.dataKey:a=e.itemInteraction.click.dataKey,a==null&&n!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(s=>{var l;return((l=s.settings)===null||l===void 0?void 0:l.dataKey)===a})},Jb=e=>e.options.tooltipPayloadSearcher,up=e=>e.tooltip;function uP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function hP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?uP(Object(r),!0).forEach(function(n){Zde(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Zde(e,t,r){return(t=Qde(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Qde(e){var t=Jde(e,"string");return typeof t=="symbol"?t:t+""}function Jde(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function eue(e,t){return e??t}var Yz=(e,t,r,n,a,s,l)=>{if(!(t==null||s==null)){var{chartData:o,computedData:c,dataStartIndex:d,dataEndIndex:f}=r,p=[];return e.reduce((y,g)=>{var N,{dataDefinedOnItem:w,settings:k}=g,S=eue(w,o),O=Array.isArray(S)?UB(S,d,f):S,E=(N=k==null?void 0:k.dataKey)!==null&&N!==void 0?N:n,D=k==null?void 0:k.nameKey,H;if(n&&Array.isArray(O)&&!Array.isArray(O[0])&&l==="axis"?H=YF(O,n,a):H=s(O,t,c,D),Array.isArray(H))H.forEach(R=>{var z=hP(hP({},k),{},{name:R.name,unit:R.unit,color:void 0,fill:void 0});y.push(zO({tooltipEntrySettings:z,dataKey:R.dataKey,payload:R.payload,value:as(R.payload,R.dataKey),name:R.name}))});else{var W;y.push(zO({tooltipEntrySettings:k,dataKey:E,payload:H,value:as(H,E),name:(W=as(H,D))!==null&&W!==void 0?W:k==null?void 0:k.name}))}return y},p)}},tC=Ct([Ji,fa,gz,Cj,Qi],Ez),tue=Ct([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),rue=Ct([Qi,ip],Dj),ev=Ct([tue,Ji,rue],Mj,{memoizeOptions:{resultEqualityCheck:mk}}),nue=Ct([ev],e=>e.filter(hk)),aue=Ct([ev],Lj,{memoizeOptions:{resultEqualityCheck:mk}}),hp=Ct([aue,bf],Rj),sue=Ct([nue,bf,Ji],mz),rC=Ct([hp,Ji,ev],Bj),Zz=Ct([Ji],Uj),iue=Ct([Ji],e=>e.allowDataOverflow),Qz=Ct([Zz,iue],$U),lue=Ct([ev],e=>e.filter(hk)),oue=Ct([sue,lue,Kb],wz),cue=Ct([oue,bf,Qi,Qz],kz),due=Ct([ev],vz),uue=Ct([hp,Ji,due,pk,Qi],Hj,{memoizeOptions:{resultEqualityCheck:fk}}),hue=Ct([Nz,Qi,ip],op),fue=Ct([hue,Qi],jz),mue=Ct([_z,Qi,ip],op),xue=Ct([mue,Qi],Cz),pue=Ct([Sz,Qi,ip],op),gue=Ct([pue,Qi],Az),bue=Ct([fue,gue,xue],Xy),vue=Ct([Ji,Zz,Qz,cue,uue,bue,fa,Qi],$j),Jz=Ct([Ji,fa,hp,rC,Kb,Qi,vue],Vj),yue=Ct([Jz,Ji,tC],Gj),wue=Ct([Ji,Jz,yue,Qi],Yj),eq=e=>{var t=Qi(e),r=ip(e),n=!1;return Qb(e,t,r,n)},tq=Ct([Ji,eq],ck),rq=Ct([Ji,tC,wue,tq],Kj),kue=Ct([fa,rC,Ji,Qi],Lz),Nue=Ct([fa,rC,Ji,Qi],Rz),_ue=(e,t,r,n,a,s,l,o)=>{if(t){var{type:c}=t,d=Vu(e,o);if(n){var f=r==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,p=c==="category"&&n.bandwidth?n.bandwidth()/f:0;return p=o==="angleAxis"&&a!=null&&(a==null?void 0:a.length)>=2?bl(a[0]-a[1])*2*p:p,d&&l?l.map((y,g)=>({coordinate:n(y)+p,value:y,index:g,offset:p})):n.domain().map((y,g)=>({coordinate:n(y)+p,value:s?s[y]:y,index:g,offset:p}))}}},ah=Ct([fa,Ji,tC,rq,eq,kue,Nue,Qi],_ue),nC=Ct([Bz,Uz,Rde],(e,t,r)=>zz(r.shared,e,t)),nq=e=>e.tooltip.settings.trigger,aC=e=>e.tooltip.settings.defaultIndex,vk=Ct([up,nC,nq,aC],Kz),af=Ct([vk,hp],eC),aq=Ct([ah,af],qz),sq=Ct([vk],e=>{if(e)return e.dataKey}),iq=Ct([up,nC,nq,aC],Xz),Sue=Ct([Q0,J0,fa,Xi,ah,aC,iq,Jb],Gz),jue=Ct([vk,Sue],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),Cue=Ct([vk],e=>e.active),Aue=Ct([iq,af,bf,fz,aq,Jb,nC],Yz),Eue=Ct([Aue],e=>{if(e!=null){var t=e.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(t))}});function fP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function mP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?fP(Object(r),!0).forEach(function(n){Tue(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Tue(e,t,r){return(t=Oue(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Oue(e){var t=Pue(e,"string");return typeof t=="symbol"?t:t+""}function Pue(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Iue=()=>Jr(Ji),Due=()=>{var e=Iue(),t=Jr(ah),r=Jr(rq);return Pm(mP(mP({},e),{},{scale:r}),t)},lq=()=>Jr(Cj),sC=(e,t)=>t,oq=(e,t,r)=>r,iC=(e,t,r,n)=>n,Mue=Ct(ah,e=>$w(e,t=>t.coordinate)),lC=Ct([up,sC,oq,iC],Kz),cq=Ct([lC,hp],eC),Lue=(e,t,r)=>{if(t!=null){var n=up(e);return t==="axis"?r==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:r==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},dq=Ct([up,sC,oq,iC],Xz),Yy=Ct([Q0,J0,fa,Xi,ah,iC,dq,Jb],Gz),Rue=Ct([lC,Yy],(e,t)=>{var r;return(r=e.coordinate)!==null&&r!==void 0?r:t}),uq=Ct(ah,cq,qz),Fue=Ct([dq,cq,bf,fz,uq,Jb,sC],Yz),Bue=Ct([lC],e=>({isActive:e.active,activeIndex:e.index})),Uue=(e,t,r,n,a,s,l,o)=>{if(!(!e||!t||!n||!a||!s)){var c=Uae(e.chartX,e.chartY,t,r,o);if(c){var d=qae(c,t),f=Aae(d,l,s,n,a),p=zae(t,s,f,c);return{activeIndex:String(f),activeCoordinate:p}}}};function fS(){return fS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},fS.apply(null,arguments)}function xP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function A2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xP(Object(r),!0).forEach(function(n){zue(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function zue(e,t,r){return(t=que(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function que(e){var t=Hue(e,"string");return typeof t=="symbol"?t:t+""}function Hue(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $ue(e){var{coordinate:t,payload:r,index:n,offset:a,tooltipAxisBandSize:s,layout:l,cursor:o,tooltipEventType:c,chartName:d}=e,f=t,p=r,y=n;if(!o||!f||d!=="ScatterChart"&&c!=="axis")return null;var g,N;if(d==="ScatterChart")g=f,N=aie;else if(d==="BarChart")g=sie(l,f,a,s),N=sU;else if(l==="radial"){var{cx:w,cy:k,radius:S,startAngle:O,endAngle:E}=iU(f);g={cx:w,cy:k,startAngle:O,endAngle:E,innerRadius:S,outerRadius:S},N=oU}else g={points:qie(l,f,a)},N=f1;var D=typeof o=="object"&&"className"in o?o.className:void 0,H=A2(A2(A2(A2({stroke:"#ccc",pointerEvents:"none"},a),g),Am(o)),{},{payload:p,payloadIndex:y,className:Zn("recharts-tooltip-cursor",D)});return T.isValidElement(o)?T.cloneElement(o,H):T.createElement(N,H)}function Vue(e){var t=Due(),r=YB(),n=zb(),a=lq();return T.createElement($ue,fS({},e,{coordinate:e.coordinate,index:e.index,payload:e.payload,offset:r,layout:n,tooltipAxisBandSize:t,chartName:a}))}var hq=T.createContext(null),Wue=()=>T.useContext(hq),U3={exports:{}},pP;function Kue(){return pP||(pP=1,(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function a(c,d,f){this.fn=c,this.context=d,this.once=f||!1}function s(c,d,f,p,y){if(typeof f!="function")throw new TypeError("The listener must be a function");var g=new a(f,p||c,y),N=r?r+d:d;return c._events[N]?c._events[N].fn?c._events[N]=[c._events[N],g]:c._events[N].push(g):(c._events[N]=g,c._eventsCount++),c}function l(c,d){--c._eventsCount===0?c._events=new n:delete c._events[d]}function o(){this._events=new n,this._eventsCount=0}o.prototype.eventNames=function(){var d=[],f,p;if(this._eventsCount===0)return d;for(p in f=this._events)t.call(f,p)&&d.push(r?p.slice(1):p);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(f)):d},o.prototype.listeners=function(d){var f=r?r+d:d,p=this._events[f];if(!p)return[];if(p.fn)return[p.fn];for(var y=0,g=p.length,N=new Array(g);y<g;y++)N[y]=p[y].fn;return N},o.prototype.listenerCount=function(d){var f=r?r+d:d,p=this._events[f];return p?p.fn?1:p.length:0},o.prototype.emit=function(d,f,p,y,g,N){var w=r?r+d:d;if(!this._events[w])return!1;var k=this._events[w],S=arguments.length,O,E;if(k.fn){switch(k.once&&this.removeListener(d,k.fn,void 0,!0),S){case 1:return k.fn.call(k.context),!0;case 2:return k.fn.call(k.context,f),!0;case 3:return k.fn.call(k.context,f,p),!0;case 4:return k.fn.call(k.context,f,p,y),!0;case 5:return k.fn.call(k.context,f,p,y,g),!0;case 6:return k.fn.call(k.context,f,p,y,g,N),!0}for(E=1,O=new Array(S-1);E<S;E++)O[E-1]=arguments[E];k.fn.apply(k.context,O)}else{var D=k.length,H;for(E=0;E<D;E++)switch(k[E].once&&this.removeListener(d,k[E].fn,void 0,!0),S){case 1:k[E].fn.call(k[E].context);break;case 2:k[E].fn.call(k[E].context,f);break;case 3:k[E].fn.call(k[E].context,f,p);break;case 4:k[E].fn.call(k[E].context,f,p,y);break;default:if(!O)for(H=1,O=new Array(S-1);H<S;H++)O[H-1]=arguments[H];k[E].fn.apply(k[E].context,O)}}return!0},o.prototype.on=function(d,f,p){return s(this,d,f,p,!1)},o.prototype.once=function(d,f,p){return s(this,d,f,p,!0)},o.prototype.removeListener=function(d,f,p,y){var g=r?r+d:d;if(!this._events[g])return this;if(!f)return l(this,g),this;var N=this._events[g];if(N.fn)N.fn===f&&(!y||N.once)&&(!p||N.context===p)&&l(this,g);else{for(var w=0,k=[],S=N.length;w<S;w++)(N[w].fn!==f||y&&!N[w].once||p&&N[w].context!==p)&&k.push(N[w]);k.length?this._events[g]=k.length===1?k[0]:k:l(this,g)}return this},o.prototype.removeAllListeners=function(d){var f;return d?(f=r?r+d:d,this._events[f]&&l(this,f)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=r,o.EventEmitter=o,e.exports=o})(U3)),U3.exports}var Gue=Kue();const Xue=gd(Gue);var lb=new Xue,mS="recharts.syncEvent.tooltip",gP="recharts.syncEvent.brush";function tv(e,t){if(t){var r=Number.parseInt(t,10);if(!Tc(r))return e==null?void 0:e[r]}}var Yue={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},fq=Dc({name:"options",initialState:Yue,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),Zue=fq.reducer,{createEventEmitter:Que}=fq.actions;function Jue(e){return e.tooltip.syncInteraction}var e0e={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},mq=Dc({name:"chartData",initialState:e0e,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:r,endIndex:n}=t.payload;r!=null&&(e.dataStartIndex=r),n!=null&&(e.dataEndIndex=n)}}}),{setChartData:bP,setDataStartEndIndexes:t0e,setComputedData:TTe}=mq.actions,r0e=mq.reducer,n0e=["x","y"];function vP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Vx(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?vP(Object(r),!0).forEach(function(n){a0e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function a0e(e,t,r){return(t=s0e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s0e(e){var t=i0e(e,"string");return typeof t=="symbol"?t:t+""}function i0e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function l0e(e,t){if(e==null)return{};var r,n,a=o0e(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function o0e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var xq=()=>{};function c0e(){var e=Jr(Aj),t=Jr(Ej),r=zs(),n=Jr(lz),a=Jr(ah),s=zb(),l=ek(),o=Jr(c=>c.rootProps.className);T.useEffect(()=>{if(e==null)return xq;var c=(d,f,p)=>{if(t!==p&&e===d){if(n==="index"){var y;if(l&&f!==null&&f!==void 0&&(y=f.payload)!==null&&y!==void 0&&y.coordinate&&f.payload.sourceViewBox){var g=f.payload.coordinate,{x:N,y:w}=g,k=l0e(g,n0e),{x:S,y:O,width:E,height:D}=f.payload.sourceViewBox,H=Vx(Vx({},k),{},{x:l.x+(E?(N-S)/E:0)*l.width,y:l.y+(D?(w-O)/D:0)*l.height});r(Vx(Vx({},f),{},{payload:Vx(Vx({},f.payload),{},{coordinate:H})}))}else r(f);return}if(a!=null){var W;if(typeof n=="function"){var R={activeTooltipIndex:f.payload.index==null?void 0:Number(f.payload.index),isTooltipActive:f.payload.active,activeIndex:f.payload.index==null?void 0:Number(f.payload.index),activeLabel:f.payload.label,activeDataKey:f.payload.dataKey,activeCoordinate:f.payload.coordinate},z=n(a,R);W=a[z]}else n==="value"&&(W=a.find(de=>String(de.value)===f.payload.label));var{coordinate:U}=f.payload;if(W==null||f.payload.active===!1||U==null||l==null){r(uS({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0}));return}var{x:Z,y:q}=U,K=Math.min(Z,l.x+l.width),Q=Math.min(q,l.y+l.height),re={x:s==="horizontal"?W.coordinate:K,y:s==="horizontal"?Q:W.coordinate},ae=uS({active:f.payload.active,coordinate:re,dataKey:f.payload.dataKey,index:String(W.index),label:f.payload.label,sourceViewBox:f.payload.sourceViewBox});r(ae)}}};return lb.on(mS,c),()=>{lb.off(mS,c)}},[o,r,t,e,n,a,s,l])}function d0e(){var e=Jr(Aj),t=Jr(Ej),r=zs();T.useEffect(()=>{if(e==null)return xq;var n=(a,s,l)=>{t!==l&&e===a&&r(t0e(s))};return lb.on(gP,n),()=>{lb.off(gP,n)}},[r,t,e])}function u0e(){var e=zs();T.useEffect(()=>{e(Que())},[e]),c0e(),d0e()}function h0e(e,t,r,n,a,s){var l=Jr(g=>Lue(g,e,t)),o=Jr(Ej),c=Jr(Aj),d=Jr(lz),f=Jr(Jue),p=f==null?void 0:f.active,y=ek();T.useEffect(()=>{if(!p&&c!=null&&o!=null){var g=uS({active:s,coordinate:r,dataKey:l,index:a,label:typeof n=="number"?String(n):n,sourceViewBox:y});lb.emit(mS,c,g,o)}},[p,r,l,a,n,o,c,d,s,y])}function yP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function wP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?yP(Object(r),!0).forEach(function(n){f0e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function f0e(e,t,r){return(t=m0e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function m0e(e){var t=x0e(e,"string");return typeof t=="symbol"?t:t+""}function x0e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function p0e(e){return e.dataKey}function g0e(e,t){return T.isValidElement(e)?T.cloneElement(e,t):typeof e=="function"?T.createElement(e,t):T.createElement(Lse,t)}var kP=[],b0e={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!eh.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function Xd(e){var t=Yi(e,b0e),{active:r,allowEscapeViewBox:n,animationDuration:a,animationEasing:s,content:l,filterNull:o,isAnimationActive:c,offset:d,payloadUniqBy:f,position:p,reverseDirection:y,useTranslate3d:g,wrapperStyle:N,cursor:w,shared:k,trigger:S,defaultIndex:O,portal:E,axisId:D}=t,H=zs(),W=typeof O=="number"?String(O):O;T.useEffect(()=>{H(zde({shared:k,trigger:S,axisId:D,active:r,defaultIndex:W}))},[H,k,S,D,r,W]);var R=ek(),z=eU(),U=Lde(k),{activeIndex:Z,isActive:q}=Jr(ne=>Bue(ne,U,S,W)),K=Jr(ne=>Fue(ne,U,S,W)),Q=Jr(ne=>uq(ne,U,S,W)),re=Jr(ne=>Rue(ne,U,S,W)),ae=K,de=Wue(),he=r??q,[Se,ke]=hB([ae,he]),Le=U==="axis"?Q:void 0;h0e(U,S,re,Le,Z,he);var fe=E??de;if(fe==null)return null;var F=ae??kP;he||(F=kP),o&&F.length&&(F=lB(ae.filter(ne=>ne.value!=null&&(ne.hide!==!0||t.includeHidden)),f,p0e));var te=F.length>0,Y=T.createElement(Hse,{allowEscapeViewBox:n,animationDuration:a,animationEasing:s,isAnimationActive:c,active:he,coordinate:re,hasPayload:te,offset:d,position:p,reverseDirection:y,useTranslate3d:g,viewBox:R,wrapperStyle:N,lastBoundingBox:Se,innerRef:ke,hasPortalFromProps:!!E},g0e(l,wP(wP({},t),{},{payload:F,label:Le,active:he,coordinate:re,accessibilityLayer:z})));return T.createElement(T.Fragment,null,GL.createPortal(Y,fe),he&&T.createElement(Vue,{cursor:w,tooltipEventType:U,coordinate:re,payload:ae,index:Z}))}var fp=e=>null;fp.displayName="Cell";function v0e(e,t,r){return(t=y0e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function y0e(e){var t=w0e(e,"string");return typeof t=="symbol"?t:t+""}function w0e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class k0e{constructor(t){v0e(this,"cache",new Map),this.maxSize=t}get(t){var r=this.cache.get(t);return r!==void 0&&(this.cache.delete(t),this.cache.set(t,r)),r}set(t,r){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var n=this.cache.keys().next().value;this.cache.delete(n)}this.cache.set(t,r)}clear(){this.cache.clear()}size(){return this.cache.size}}function NP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function N0e(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?NP(Object(r),!0).forEach(function(n){_0e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):NP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function _0e(e,t,r){return(t=S0e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function S0e(e){var t=j0e(e,"string");return typeof t=="symbol"?t:t+""}function j0e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var C0e={cacheSize:2e3,enableCache:!0},pq=N0e({},C0e),_P=new k0e(pq.cacheSize),A0e={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},SP="recharts_measurement_span";function E0e(e,t){var r=t.fontSize||"",n=t.fontFamily||"",a=t.fontWeight||"",s=t.fontStyle||"",l=t.letterSpacing||"",o=t.textTransform||"";return"".concat(e,"|").concat(r,"|").concat(n,"|").concat(a,"|").concat(s,"|").concat(l,"|").concat(o)}var jP=(e,t)=>{try{var r=document.getElementById(SP);r||(r=document.createElement("span"),r.setAttribute("id",SP),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,A0e,t),r.textContent="".concat(e);var n=r.getBoundingClientRect();return{width:n.width,height:n.height}}catch{return{width:0,height:0}}},jg=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||eh.isSsr)return{width:0,height:0};if(!pq.enableCache)return jP(t,r);var n=E0e(t,r),a=_P.get(n);if(a)return a;var s=jP(t,r);return _P.set(n,s),s},CP=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,AP=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,T0e=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,O0e=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,gq={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},P0e=Object.keys(gq),s1="NaN";function I0e(e,t){return e*gq[t]}class ec{static parse(t){var r,[,n,a]=(r=O0e.exec(t))!==null&&r!==void 0?r:[];return new ec(parseFloat(n),a??"")}constructor(t,r){this.num=t,this.unit=r,this.num=t,this.unit=r,Tc(t)&&(this.unit=""),r!==""&&!T0e.test(r)&&(this.num=NaN,this.unit=""),P0e.includes(r)&&(this.num=I0e(t,r),this.unit="px")}add(t){return this.unit!==t.unit?new ec(NaN,""):new ec(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new ec(NaN,""):new ec(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new ec(NaN,""):new ec(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new ec(NaN,""):new ec(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Tc(this.num)}}function bq(e){if(e.includes(s1))return s1;for(var t=e;t.includes("*")||t.includes("/");){var r,[,n,a,s]=(r=CP.exec(t))!==null&&r!==void 0?r:[],l=ec.parse(n??""),o=ec.parse(s??""),c=a==="*"?l.multiply(o):l.divide(o);if(c.isNaN())return s1;t=t.replace(CP,c.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var d,[,f,p,y]=(d=AP.exec(t))!==null&&d!==void 0?d:[],g=ec.parse(f??""),N=ec.parse(y??""),w=p==="+"?g.add(N):g.subtract(N);if(w.isNaN())return s1;t=t.replace(AP,w.toString())}return t}var EP=/\(([^()]*)\)/;function D0e(e){for(var t=e,r;(r=EP.exec(t))!=null;){var[,n]=r;t=t.replace(EP,bq(n))}return t}function M0e(e){var t=e.replace(/\s+/g,"");return t=D0e(t),t=bq(t),t}function L0e(e){try{return M0e(e)}catch{return s1}}function z3(e){var t=L0e(e.slice(5,-1));return t===s1?"":t}var R0e=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],F0e=["dx","dy","angle","className","breakAll"];function xS(){return xS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},xS.apply(null,arguments)}function TP(e,t){if(e==null)return{};var r,n,a=B0e(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function B0e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var vq=/[ \f\n\r\t\v\u2028\u2029]+/,yq=e=>{var{children:t,breakAll:r,style:n}=e;try{var a=[];As(t)||(r?a=t.toString().split(""):a=t.toString().split(vq));var s=a.map(o=>({word:o,width:jg(o,n).width})),l=r?0:jg("",n).width;return{wordsWithComputedWidth:s,spaceWidth:l}}catch{return null}},U0e=(e,t,r,n,a)=>{var{maxLines:s,children:l,style:o,breakAll:c}=e,d=Zr(s),f=l,p=function(){var q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return q.reduce((K,Q)=>{var{word:re,width:ae}=Q,de=K[K.length-1];if(de&&(n==null||a||de.width+ae+r<Number(n)))de.words.push(re),de.width+=ae+r;else{var he={words:[re],width:ae};K.push(he)}return K},[])},y=p(t),g=Z=>Z.reduce((q,K)=>q.width>K.width?q:K);if(!d||a)return y;var N=y.length>s||g(y).width>Number(n);if(!N)return y;for(var w="",k=Z=>{var q=f.slice(0,Z),K=yq({breakAll:c,style:o,children:q+w}).wordsWithComputedWidth,Q=p(K),re=Q.length>s||g(Q).width>Number(n);return[re,Q]},S=0,O=f.length-1,E=0,D;S<=O&&E<=f.length-1;){var H=Math.floor((S+O)/2),W=H-1,[R,z]=k(W),[U]=k(H);if(!R&&!U&&(S=H+1),R&&U&&(O=H-1),!R&&U){D=z;break}E++}return D||y},OP=e=>{var t=As(e)?[]:e.toString().split(vq);return[{words:t}]},z0e=e=>{var{width:t,scaleToFit:r,children:n,style:a,breakAll:s,maxLines:l}=e;if((t||r)&&!eh.isSsr){var o,c,d=yq({breakAll:s,children:n,style:a});if(d){var{wordsWithComputedWidth:f,spaceWidth:p}=d;o=f,c=p}else return OP(n);return U0e({breakAll:s,children:n,maxLines:l,style:a},o,c,t,r)}return OP(n)},PP="#808080",yk=T.forwardRef((e,t)=>{var{x:r=0,y:n=0,lineHeight:a="1em",capHeight:s="0.71em",scaleToFit:l=!1,textAnchor:o="start",verticalAnchor:c="end",fill:d=PP}=e,f=TP(e,R0e),p=T.useMemo(()=>z0e({breakAll:f.breakAll,children:f.children,maxLines:f.maxLines,scaleToFit:l,style:f.style,width:f.width}),[f.breakAll,f.children,f.maxLines,l,f.style,f.width]),{dx:y,dy:g,angle:N,className:w,breakAll:k}=f,S=TP(f,F0e);if(!Uu(r)||!Uu(n)||p.length===0)return null;var O=r+(Zr(y)?y:0),E=n+(Zr(g)?g:0),D;switch(c){case"start":D=z3("calc(".concat(s,")"));break;case"middle":D=z3("calc(".concat((p.length-1)/2," * -").concat(a," + (").concat(s," / 2))"));break;default:D=z3("calc(".concat(p.length-1," * -").concat(a,")"));break}var H=[];if(l){var W=p[0].width,{width:R}=f;H.push("scale(".concat(Zr(R)?R/W:1,")"))}return N&&H.push("rotate(".concat(N,", ").concat(O,", ").concat(E,")")),H.length&&(S.transform=H.join(" ")),T.createElement("text",xS({},Eo(S),{ref:t,x:O,y:E,className:Zn("recharts-text",w),textAnchor:o,fill:d.includes("url")?PP:d}),p.map((z,U)=>{var Z=z.words.join(k?"":" ");return T.createElement("tspan",{x:O,dy:U===0?D:a,key:"".concat(Z,"-").concat(U)},Z)}))});yk.displayName="Text";var q0e=["labelRef"];function H0e(e,t){if(e==null)return{};var r,n,a=$0e(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function $0e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function IP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function wi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?IP(Object(r),!0).forEach(function(n){V0e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):IP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function V0e(e,t,r){return(t=W0e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function W0e(e){var t=K0e(e,"string");return typeof t=="symbol"?t:t+""}function K0e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function j0(){return j0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},j0.apply(null,arguments)}var wq=T.createContext(null),G0e=e=>{var{x:t,y:r,width:n,height:a,children:s}=e,l=T.useMemo(()=>({x:t,y:r,width:n,height:a}),[t,r,n,a]);return T.createElement(wq.Provider,{value:l},s)},kq=()=>{var e=T.useContext(wq),t=ek();return e||t},X0e=T.createContext(null),Y0e=()=>{var e=T.useContext(X0e),t=Jr(hz);return e||t},Z0e=e=>{var{value:t,formatter:r}=e,n=As(e.children)?t:e.children;return typeof r=="function"?r(n):n},oC=e=>e!=null&&typeof e=="function",Q0e=(e,t)=>{var r=bl(t-e),n=Math.min(Math.abs(t-e),360);return r*n},J0e=(e,t,r,n,a)=>{var{offset:s,className:l}=e,{cx:o,cy:c,innerRadius:d,outerRadius:f,startAngle:p,endAngle:y,clockWise:g}=a,N=(d+f)/2,w=Q0e(p,y),k=w>=0?1:-1,S,O;switch(t){case"insideStart":S=p+k*s,O=g;break;case"insideEnd":S=y-k*s,O=!g;break;case"end":S=y+k*s,O=g;break;default:throw new Error("Unsupported position ".concat(t))}O=w<=0?O:!O;var E=Li(o,c,N,S),D=Li(o,c,N,S+(O?1:-1)*359),H="M".concat(E.x,",").concat(E.y,`
    A`).concat(N,",").concat(N,",0,1,").concat(O?0:1,`,
    `).concat(D.x,",").concat(D.y),W=As(e.id)?Yg("recharts-radial-line-"):e.id;return T.createElement("text",j0({},n,{dominantBaseline:"central",className:Zn("recharts-radial-bar-label",l)}),T.createElement("defs",null,T.createElement("path",{id:W,d:H})),T.createElement("textPath",{xlinkHref:"#".concat(W)},r))},ehe=(e,t,r)=>{var{cx:n,cy:a,innerRadius:s,outerRadius:l,startAngle:o,endAngle:c}=e,d=(o+c)/2;if(r==="outside"){var{x:f,y:p}=Li(n,a,l+t,d);return{x:f,y:p,textAnchor:f>=n?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"end"};var y=(s+l)/2,{x:g,y:N}=Li(n,a,y,d);return{x:g,y:N,textAnchor:"middle",verticalAnchor:"middle"}},Nq=e=>"cx"in e&&Zr(e.cx),the=(e,t)=>{var{parentViewBox:r,offset:n,position:a}=e,s;r!=null&&!Nq(r)&&(s=r);var{x:l,y:o,width:c,height:d}=t,f=d>=0?1:-1,p=f*n,y=f>0?"end":"start",g=f>0?"start":"end",N=c>=0?1:-1,w=N*n,k=N>0?"end":"start",S=N>0?"start":"end";if(a==="top"){var O={x:l+c/2,y:o-f*n,textAnchor:"middle",verticalAnchor:y};return wi(wi({},O),s?{height:Math.max(o-s.y,0),width:c}:{})}if(a==="bottom"){var E={x:l+c/2,y:o+d+p,textAnchor:"middle",verticalAnchor:g};return wi(wi({},E),s?{height:Math.max(s.y+s.height-(o+d),0),width:c}:{})}if(a==="left"){var D={x:l-w,y:o+d/2,textAnchor:k,verticalAnchor:"middle"};return wi(wi({},D),s?{width:Math.max(D.x-s.x,0),height:d}:{})}if(a==="right"){var H={x:l+c+w,y:o+d/2,textAnchor:S,verticalAnchor:"middle"};return wi(wi({},H),s?{width:Math.max(s.x+s.width-H.x,0),height:d}:{})}var W=s?{width:c,height:d}:{};return a==="insideLeft"?wi({x:l+w,y:o+d/2,textAnchor:S,verticalAnchor:"middle"},W):a==="insideRight"?wi({x:l+c-w,y:o+d/2,textAnchor:k,verticalAnchor:"middle"},W):a==="insideTop"?wi({x:l+c/2,y:o+p,textAnchor:"middle",verticalAnchor:g},W):a==="insideBottom"?wi({x:l+c/2,y:o+d-p,textAnchor:"middle",verticalAnchor:y},W):a==="insideTopLeft"?wi({x:l+w,y:o+p,textAnchor:S,verticalAnchor:g},W):a==="insideTopRight"?wi({x:l+c-w,y:o+p,textAnchor:k,verticalAnchor:g},W):a==="insideBottomLeft"?wi({x:l+w,y:o+d-p,textAnchor:S,verticalAnchor:y},W):a==="insideBottomRight"?wi({x:l+c-w,y:o+d-p,textAnchor:k,verticalAnchor:y},W):a&&typeof a=="object"&&(Zr(a.x)||V0(a.x))&&(Zr(a.y)||V0(a.y))?wi({x:l+no(a.x,c),y:o+no(a.y,d),textAnchor:"end",verticalAnchor:"end"},W):wi({x:l+c/2,y:o+d/2,textAnchor:"middle",verticalAnchor:"middle"},W)},rhe={offset:5};function Fh(e){var t=Yi(e,rhe),{viewBox:r,position:n,value:a,children:s,content:l,className:o="",textBreakAll:c,labelRef:d}=t,f=Y0e(),p=kq(),y=n==="center"?p:f??p,g=r||y;if(!g||As(a)&&As(s)&&!T.isValidElement(l)&&typeof l!="function")return null;var N=wi(wi({},t),{},{viewBox:g});if(T.isValidElement(l)){var{labelRef:w}=N,k=H0e(N,q0e);return T.cloneElement(l,k)}var S;if(typeof l=="function"){if(S=T.createElement(l,N),T.isValidElement(S))return S}else S=Z0e(t);var O=Nq(g),E=Eo(t);if(O&&(n==="insideStart"||n==="insideEnd"||n==="end"))return J0e(t,n,S,E,g);var D=O?ehe(g,t.offset,t.position):the(t,g);return T.createElement(yk,j0({ref:d,className:Zn("recharts-label",o)},E,D,{breakAll:c}),S)}Fh.displayName="Label";var nhe=(e,t,r)=>{if(!e)return null;var n={viewBox:t,labelRef:r};return e===!0?T.createElement(Fh,j0({key:"label-implicit"},n)):Uu(e)?T.createElement(Fh,j0({key:"label-implicit",value:e},n)):T.isValidElement(e)?e.type===Fh?T.cloneElement(e,wi({key:"label-implicit"},n)):T.createElement(Fh,j0({key:"label-implicit",content:e},n)):oC(e)?T.createElement(Fh,j0({key:"label-implicit",content:e},n)):e&&typeof e=="object"?T.createElement(Fh,j0({},e,{key:"label-implicit"},n)):null};function ahe(e){var{label:t,labelRef:r}=e,n=kq();return nhe(t,n,r)||null}var q3={},H3={},DP;function she(){return DP||(DP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r[r.length-1]}e.last=t})(H3)),H3}var $3={},MP;function ihe(){return MP||(MP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Array.isArray(r)?r:Array.from(r)}e.toArray=t})($3)),$3}var LP;function lhe(){return LP||(LP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=she(),r=ihe(),n=H6();function a(s){if(n.isArrayLike(s))return t.last(r.toArray(s))}e.last=a})(q3)),q3}var V3,RP;function ohe(){return RP||(RP=1,V3=lhe().last),V3}var che=ohe();const dhe=gd(che);var uhe=["valueAccessor"],hhe=["dataKey","clockWise","id","textBreakAll"];function Zy(){return Zy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Zy.apply(null,arguments)}function FP(e,t){if(e==null)return{};var r,n,a=fhe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function fhe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var mhe=e=>Array.isArray(e.value)?dhe(e.value):e.value,_q=T.createContext(void 0),cC=_q.Provider,Sq=T.createContext(void 0),xhe=Sq.Provider;function phe(){return T.useContext(_q)}function ghe(){return T.useContext(Sq)}function ry(e){var{valueAccessor:t=mhe}=e,r=FP(e,uhe),{dataKey:n,clockWise:a,id:s,textBreakAll:l}=r,o=FP(r,hhe),c=phe(),d=ghe(),f=c||d;return!f||!f.length?null:T.createElement(di,{className:"recharts-label-list"},f.map((p,y)=>{var g,N=As(n)?t(p,y):as(p&&p.payload,n),w=As(s)?{}:{id:"".concat(s,"-").concat(y)};return T.createElement(Fh,Zy({key:"label-".concat(y)},Eo(p),o,w,{fill:(g=r.fill)!==null&&g!==void 0?g:p.fill,parentViewBox:p.parentViewBox,value:N,textBreakAll:l,viewBox:p.viewBox,index:y}))}))}ry.displayName="LabelList";function wk(e){var{label:t}=e;return t?t===!0?T.createElement(ry,{key:"labelList-implicit"}):T.isValidElement(t)||oC(t)?T.createElement(ry,{key:"labelList-implicit",content:t}):typeof t=="object"?T.createElement(ry,Zy({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}function pS(){return pS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},pS.apply(null,arguments)}var dC=e=>{var{cx:t,cy:r,r:n,className:a}=e,s=Zn("recharts-dot",a);return t===+t&&r===+r&&n===+n?T.createElement("circle",pS({},Ao(e),U6(e),{className:s,cx:t,cy:r,r:n})):null},jq=e=>e.graphicalItems.polarItems,bhe=Ct([qs,Gb],Dj),kk=Ct([jq,Xs,bhe],Mj),vhe=Ct([kk],Lj),Nk=Ct([vhe,_j],Rj),yhe=Ct([Nk,Xs,kk],Bj);Ct([Nk,Xs,kk],(e,t,r)=>r.length>0?e.flatMap(n=>r.flatMap(a=>{var s,l=as(n,(s=t.dataKey)!==null&&s!==void 0?s:a.dataKey);return{value:l,errorDomain:[]}})).filter(Boolean):(t==null?void 0:t.dataKey)!=null?e.map(n=>({value:as(n,t.dataKey),errorDomain:[]})):e.map(n=>({value:n,errorDomain:[]})));var BP=()=>{},whe=Ct([Nk,Xs,kk,pk,qs],Hj),khe=Ct([Xs,zj,qj,BP,whe,BP,fa,qs],$j),Cq=Ct([Xs,fa,Nk,yhe,Kb,qs,khe],Vj),Nhe=Ct([Cq,Xs,cp],Gj);Ct([Xs,Cq,Nhe,qs],Yj);var _he={radiusAxis:{},angleAxis:{}},Aq=Dc({name:"polarAxis",initialState:_he,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:OTe,removeRadiusAxis:PTe,addAngleAxis:ITe,removeAngleAxis:DTe}=Aq.actions,She=Aq.reducer;function UP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function zP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?UP(Object(r),!0).forEach(function(n){jhe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):UP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function jhe(e,t,r){return(t=Che(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Che(e){var t=Ahe(e,"string");return typeof t=="symbol"?t:t+""}function Ahe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ehe=(e,t)=>t,uC=Ct([jq,Ehe],(e,t)=>e.filter(r=>r.type==="pie").find(r=>r.id===t)),The=[],hC=(e,t,r)=>(r==null?void 0:r.length)===0?The:r,Eq=Ct([_j,uC,hC],(e,t,r)=>{var{chartData:n}=e;if(t!=null){var a;if((t==null?void 0:t.data)!=null&&t.data.length>0?a=t.data:a=n,(!a||!a.length)&&r!=null&&(a=r.map(s=>zP(zP({},t.presentationProps),s.props))),a!=null)return a}}),Ohe=Ct([Eq,uC,hC],(e,t,r)=>{if(!(e==null||t==null))return e.map((n,a)=>{var s,l=as(n,t.nameKey,t.name),o;return r!=null&&(s=r[a])!==null&&s!==void 0&&(s=s.props)!==null&&s!==void 0&&s.fill?o=r[a].props.fill:typeof n=="object"&&n!=null&&"fill"in n?o=n.fill:o=t.fill,{value:xf(l,t.dataKey),color:o,payload:n,type:t.legendType}})}),Phe=Ct([Eq,uC,hC,Xi],(e,t,r,n)=>{if(!(t==null||e==null))return Pfe({offset:n,pieSettings:t,displayedData:e,cells:r})}),W3={exports:{}},rs={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qP;function Ihe(){if(qP)return rs;qP=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),l=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),y=Symbol.for("react.view_transition"),g=Symbol.for("react.client.reference");function N(w){if(typeof w=="object"&&w!==null){var k=w.$$typeof;switch(k){case e:switch(w=w.type,w){case r:case a:case n:case c:case d:case y:return w;default:switch(w=w&&w.$$typeof,w){case l:case o:case p:case f:return w;case s:return w;default:return k}}case t:return k}}}return rs.ContextConsumer=s,rs.ContextProvider=l,rs.Element=e,rs.ForwardRef=o,rs.Fragment=r,rs.Lazy=p,rs.Memo=f,rs.Portal=t,rs.Profiler=a,rs.StrictMode=n,rs.Suspense=c,rs.SuspenseList=d,rs.isContextConsumer=function(w){return N(w)===s},rs.isContextProvider=function(w){return N(w)===l},rs.isElement=function(w){return typeof w=="object"&&w!==null&&w.$$typeof===e},rs.isForwardRef=function(w){return N(w)===o},rs.isFragment=function(w){return N(w)===r},rs.isLazy=function(w){return N(w)===p},rs.isMemo=function(w){return N(w)===f},rs.isPortal=function(w){return N(w)===t},rs.isProfiler=function(w){return N(w)===a},rs.isStrictMode=function(w){return N(w)===n},rs.isSuspense=function(w){return N(w)===c},rs.isSuspenseList=function(w){return N(w)===d},rs.isValidElementType=function(w){return typeof w=="string"||typeof w=="function"||w===r||w===a||w===n||w===c||w===d||typeof w=="object"&&w!==null&&(w.$$typeof===p||w.$$typeof===f||w.$$typeof===l||w.$$typeof===s||w.$$typeof===o||w.$$typeof===g||w.getModuleId!==void 0)},rs.typeOf=N,rs}var HP;function Dhe(){return HP||(HP=1,W3.exports=Ihe()),W3.exports}var Mhe=Dhe(),$P=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",VP=null,K3=null,Tq=e=>{if(e===VP&&Array.isArray(K3))return K3;var t=[];return T.Children.forEach(e,r=>{As(r)||(Mhe.isFragment(r)?t=t.concat(Tq(r.props.children)):t.push(r))}),K3=t,VP=e,t};function fC(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(a=>$P(a)):n=[$P(t)],Tq(e).forEach(a=>{var s=Em(a,"type.displayName")||Em(a,"type.name");n.indexOf(s)!==-1&&r.push(a)}),r}var _k=e=>e&&typeof e=="object"&&"clipDot"in e?!!e.clipDot:!0,G3={},WP;function Lhe(){return WP||(WP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var a;if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){const s=r[Symbol.toStringTag];return s==null||!((a=Object.getOwnPropertyDescriptor(r,Symbol.toStringTag))!=null&&a.writable)?!1:r.toString()===`[object ${s}]`}let n=r;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(r)===n}e.isPlainObject=t})(G3)),G3}var X3,KP;function Rhe(){return KP||(KP=1,X3=Lhe().isPlainObject),X3}var Fhe=Rhe();const Bhe=gd(Fhe);function GP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function XP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?GP(Object(r),!0).forEach(function(n){Uhe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):GP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Uhe(e,t,r){return(t=zhe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zhe(e){var t=qhe(e,"string");return typeof t=="symbol"?t:t+""}function qhe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Qy(){return Qy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Qy.apply(null,arguments)}var YP=(e,t,r,n,a)=>{var s=r-n,l;return l="M ".concat(e,",").concat(t),l+="L ".concat(e+r,",").concat(t),l+="L ".concat(e+r-s/2,",").concat(t+a),l+="L ".concat(e+r-s/2-n,",").concat(t+a),l+="L ".concat(e,",").concat(t," Z"),l},Hhe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},$he=e=>{var t=Yi(e,Hhe),{x:r,y:n,upperWidth:a,lowerWidth:s,height:l,className:o}=t,{animationEasing:c,animationDuration:d,animationBegin:f,isUpdateAnimationActive:p}=t,y=T.useRef(null),[g,N]=T.useState(-1),w=T.useRef(a),k=T.useRef(s),S=T.useRef(l),O=T.useRef(r),E=T.useRef(n),D=rp(e,"trapezoid-");if(T.useEffect(()=>{if(y.current&&y.current.getTotalLength)try{var re=y.current.getTotalLength();re&&N(re)}catch{}},[]),r!==+r||n!==+n||a!==+a||s!==+s||l!==+l||a===0&&s===0||l===0)return null;var H=Zn("recharts-trapezoid",o);if(!p)return T.createElement("g",null,T.createElement("path",Qy({},Eo(t),{className:H,d:YP(r,n,a,s,l)})));var W=w.current,R=k.current,z=S.current,U=O.current,Z=E.current,q="0px ".concat(g===-1?1:g,"px"),K="".concat(g,"px 0px"),Q=tU(["strokeDasharray"],d,c);return T.createElement(tp,{animationId:D,key:D,canBegin:g>0,duration:d,easing:c,isActive:p,begin:f},re=>{var ae=ns(W,a,re),de=ns(R,s,re),he=ns(z,l,re),Se=ns(U,r,re),ke=ns(Z,n,re);y.current&&(w.current=ae,k.current=de,S.current=he,O.current=Se,E.current=ke);var Le=re>0?{transition:Q,strokeDasharray:K}:{strokeDasharray:q};return T.createElement("path",Qy({},Eo(t),{className:H,d:YP(Se,ke,ae,de,he),ref:y,style:XP(XP({},Le),t.style)}))})},Vhe=["option","shapeType","propTransformer","activeClassName","isActive"];function Whe(e,t){if(e==null)return{};var r,n,a=Khe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Khe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function ZP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Jy(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ZP(Object(r),!0).forEach(function(n){Ghe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ZP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ghe(e,t,r){return(t=Xhe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Xhe(e){var t=Yhe(e,"string");return typeof t=="symbol"?t:t+""}function Yhe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Zhe(e,t){return Jy(Jy({},t),e)}function Qhe(e,t){return e==="symbols"}function QP(e){var{shapeType:t,elementProps:r}=e;switch(t){case"rectangle":return T.createElement(sU,r);case"trapezoid":return T.createElement($he,r);case"sector":return T.createElement(oU,r);case"symbols":if(Qhe(t))return T.createElement(B6,r);break;default:return null}}function Jhe(e){return T.isValidElement(e)?e.props:e}function Oq(e){var{option:t,shapeType:r,propTransformer:n=Zhe,activeClassName:a="recharts-active-shape",isActive:s}=e,l=Whe(e,Vhe),o;if(T.isValidElement(t))o=T.cloneElement(t,Jy(Jy({},l),Jhe(t)));else if(typeof t=="function")o=t(l);else if(Bhe(t)&&typeof t!="boolean"){var c=n(t,l);o=T.createElement(QP,{shapeType:r,elementProps:c})}else{var d=l;o=T.createElement(QP,{shapeType:r,elementProps:d})}return s?T.createElement(di,{className:a},o):o}var mC=(e,t)=>{var r=zs();return(n,a)=>s=>{e==null||e(n,a,s),r($z({activeIndex:String(a),activeDataKey:t,activeCoordinate:n.tooltipPosition}))}},xC=e=>{var t=zs();return(r,n)=>a=>{e==null||e(r,n,a),t(qde())}},pC=(e,t)=>{var r=zs();return(n,a)=>s=>{e==null||e(n,a,s),r(Hde({activeIndex:String(a),activeDataKey:t,activeCoordinate:n.tooltipPosition}))}};function Sk(e){var{fn:t,args:r}=e,n=zs(),a=Ml();return T.useLayoutEffect(()=>{if(!a){var s=t(r);return n(Bde(s)),()=>{n(Ude(s))}}},[t,r,n,a]),null}var Pq=()=>{};function gC(e){var{legendPayload:t}=e,r=zs(),n=Ml();return T.useLayoutEffect(()=>n?Pq:(r(QB(t)),()=>{r(JB(t))}),[r,n,t]),null}function efe(e){var{legendPayload:t}=e,r=zs(),n=Jr(fa);return T.useLayoutEffect(()=>n!=="centric"&&n!=="radial"?Pq:(r(QB(t)),()=>{r(JB(t))}),[r,n,t]),null}var Y3,tfe=()=>{var[e]=T.useState(()=>Yg("uid-"));return e},rfe=(Y3=uG.useId)!==null&&Y3!==void 0?Y3:tfe;function nfe(e,t){var r=rfe();return t||(e?"".concat(e,"-").concat(r):r)}var afe=T.createContext(void 0),jk=e=>{var{id:t,type:r,children:n}=e,a=nfe("recharts-".concat(r),t);return T.createElement(afe.Provider,{value:a},n(a))},sfe={cartesianItems:[],polarItems:[]},Iq=Dc({name:"graphicalItems",initialState:sfe,reducers:{addCartesianGraphicalItem:{reducer(e,t){e.cartesianItems.push(t.payload)},prepare:No()},replaceCartesianGraphicalItem:{reducer(e,t){var{prev:r,next:n}=t.payload,a=M0(e).cartesianItems.indexOf(r);a>-1&&(e.cartesianItems[a]=n)},prepare:No()},removeCartesianGraphicalItem:{reducer(e,t){var r=M0(e).cartesianItems.indexOf(t.payload);r>-1&&e.cartesianItems.splice(r,1)},prepare:No()},addPolarGraphicalItem:{reducer(e,t){e.polarItems.push(t.payload)},prepare:No()},removePolarGraphicalItem:{reducer(e,t){var r=M0(e).polarItems.indexOf(t.payload);r>-1&&e.polarItems.splice(r,1)},prepare:No()}}}),{addCartesianGraphicalItem:ife,replaceCartesianGraphicalItem:lfe,removeCartesianGraphicalItem:ofe,addPolarGraphicalItem:cfe,removePolarGraphicalItem:dfe}=Iq.actions,ufe=Iq.reducer;function bC(e){var t=zs(),r=T.useRef(null);return T.useLayoutEffect(()=>{r.current===null?t(ife(e)):r.current!==e&&t(lfe({prev:r.current,next:e})),r.current=e},[t,e]),T.useLayoutEffect(()=>()=>{r.current&&(t(ofe(r.current)),r.current=null)},[t]),null}function hfe(e){var t=zs();return T.useLayoutEffect(()=>(t(cfe(e)),()=>{t(dfe(e))}),[t,e]),null}var ffe=["onMouseEnter","onClick","onMouseLeave"],mfe=["id"],xfe=["id"];function vC(e,t){if(e==null)return{};var r,n,a=pfe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function pfe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function JP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Rs(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?JP(Object(r),!0).forEach(function(n){gfe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):JP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function gfe(e,t,r){return(t=bfe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bfe(e){var t=vfe(e,"string");return typeof t=="symbol"?t:t+""}function vfe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function sf(){return sf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},sf.apply(null,arguments)}function yfe(e){var t=T.useMemo(()=>fC(e.children,fp),[e.children]),r=Jr(n=>Ohe(n,e.id,t));return r==null?null:T.createElement(efe,{legendPayload:r})}function wfe(e){var{dataKey:t,nameKey:r,sectors:n,stroke:a,strokeWidth:s,fill:l,name:o,hide:c,tooltipType:d}=e;return{dataDefinedOnItem:n.map(f=>f.tooltipPayload),positions:n.map(f=>f.tooltipPosition),settings:{stroke:a,strokeWidth:s,fill:l,dataKey:t,nameKey:r,name:xf(o,t),hide:c,type:d,color:l,unit:""}}}var kfe=(e,t)=>e>t?"start":e<t?"end":"middle",Nfe=(e,t,r)=>no(typeof t=="function"?t(e):t,r,r*.8),_fe=(e,t,r)=>{var{top:n,left:a,width:s,height:l}=t,o=BB(s,l),c=a+no(e.cx,s,s/2),d=n+no(e.cy,l,l/2),f=no(e.innerRadius,o,0),p=Nfe(r,e.outerRadius,o),y=e.maxRadius||Math.sqrt(s*s+l*l)/2;return{cx:c,cy:d,innerRadius:f,outerRadius:p,maxRadius:y}},Sfe=(e,t)=>{var r=bl(t-e),n=Math.min(Math.abs(t-e),360);return r*n};function jfe(e){return e&&typeof e=="object"&&"className"in e&&typeof e.className=="string"?e.className:""}var Cfe=(e,t)=>{if(T.isValidElement(e))return T.cloneElement(e,t);if(typeof e=="function")return e(t);var r=Zn("recharts-pie-label-line",typeof e!="boolean"?e.className:"");return T.createElement(f1,sf({},t,{type:"linear",className:r}))},Afe=(e,t,r)=>{if(T.isValidElement(e))return T.cloneElement(e,t);var n=r;if(typeof e=="function"&&(n=e(t),T.isValidElement(n)))return n;var a=Zn("recharts-pie-label-text",jfe(e));return T.createElement(yk,sf({},t,{alignmentBaseline:"middle",className:a}),n)};function Efe(e){var{sectors:t,props:r,showLabels:n}=e,{label:a,labelLine:s,dataKey:l}=r;if(!n||!a||!t)return null;var o=Ao(r),c=Am(a),d=Am(s),f=typeof a=="object"&&"offsetRadius"in a&&typeof a.offsetRadius=="number"&&a.offsetRadius||20,p=t.map((y,g)=>{var N=(y.startAngle+y.endAngle)/2,w=Li(y.cx,y.cy,y.outerRadius+f,N),k=Rs(Rs(Rs(Rs({},o),y),{},{stroke:"none"},c),{},{index:g,textAnchor:kfe(w.x,y.cx)},w),S=Rs(Rs(Rs(Rs({},o),y),{},{fill:"none",stroke:y.fill},d),{},{index:g,points:[Li(y.cx,y.cy,y.outerRadius,N),w],key:"line"});return T.createElement(di,{key:"label-".concat(y.startAngle,"-").concat(y.endAngle,"-").concat(y.midAngle,"-").concat(g)},s&&Cfe(s,S),Afe(a,k,as(y,l)))});return T.createElement(di,{className:"recharts-pie-labels"},p)}function Tfe(e){var{sectors:t,props:r,showLabels:n}=e,{label:a}=r;return typeof a=="object"&&a!=null&&"position"in a?T.createElement(wk,{label:a}):T.createElement(Efe,{sectors:t,props:r,showLabels:n})}function Ofe(e){var{sectors:t,activeShape:r,inactiveShape:n,allOtherPieProps:a}=e,s=Jr(af),{onMouseEnter:l,onClick:o,onMouseLeave:c}=a,d=vC(a,ffe),f=mC(l,a.dataKey),p=xC(c),y=pC(o,a.dataKey);return t==null||t.length===0?null:T.createElement(T.Fragment,null,t.map((g,N)=>{if((g==null?void 0:g.startAngle)===0&&(g==null?void 0:g.endAngle)===0&&t.length!==1)return null;var w=r&&String(N)===s,k=s?n:null,S=w?r:k,O=Rs(Rs({},g),{},{stroke:g.stroke,tabIndex:-1,[VB]:N,[WB]:a.dataKey});return T.createElement(di,sf({key:"sector-".concat(g==null?void 0:g.startAngle,"-").concat(g==null?void 0:g.endAngle,"-").concat(g.midAngle,"-").concat(N),tabIndex:-1,className:"recharts-pie-sector"},Rb(d,g,N),{onMouseEnter:f(g,N),onMouseLeave:p(g,N),onClick:y(g,N)}),T.createElement(Oq,sf({option:S,isActive:w,shapeType:"sector"},O)))}))}function Pfe(e){var t,{pieSettings:r,displayedData:n,cells:a,offset:s}=e,{cornerRadius:l,startAngle:o,endAngle:c,dataKey:d,nameKey:f,tooltipType:p}=r,y=Math.abs(r.minAngle),g=Sfe(o,c),N=Math.abs(g),w=n.length<=1?0:(t=r.paddingAngle)!==null&&t!==void 0?t:0,k=n.filter(W=>as(W,d,0)!==0).length,S=(N>=360?k:k-1)*w,O=N-k*y-S,E=n.reduce((W,R)=>{var z=as(R,d,0);return W+(Zr(z)?z:0)},0),D;if(E>0){var H;D=n.map((W,R)=>{var z=as(W,d,0),U=as(W,f,R),Z=_fe(r,s,W),q=(Zr(z)?z:0)/E,K,Q=Rs(Rs({},W),a&&a[R]&&a[R].props);R?K=H.endAngle+bl(g)*w*(z!==0?1:0):K=o;var re=K+bl(g)*((z!==0?y:0)+q*O),ae=(K+re)/2,de=(Z.innerRadius+Z.outerRadius)/2,he=[{name:U,value:z,payload:Q,dataKey:d,type:p}],Se=Li(Z.cx,Z.cy,de,ae);return H=Rs(Rs(Rs(Rs({},r.presentationProps),{},{percent:q,cornerRadius:l,name:U,tooltipPayload:he,midAngle:ae,middleRadius:de,tooltipPosition:Se},Q),Z),{},{value:z,startAngle:K,endAngle:re,payload:Q,paddingAngle:bl(g)*w}),H})}return D}function Ife(e){var{showLabels:t,sectors:r,children:n}=e,a=T.useMemo(()=>!t||!r?[]:r.map(s=>({value:s.value,payload:s.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:s.cx,cy:s.cy,innerRadius:s.innerRadius,outerRadius:s.outerRadius,startAngle:s.startAngle,endAngle:s.endAngle,clockWise:!1},fill:s.fill})),[r,t]);return T.createElement(xhe,{value:t?a:void 0},n)}function Dfe(e){var{props:t,previousSectorsRef:r}=e,{sectors:n,isAnimationActive:a,animationBegin:s,animationDuration:l,animationEasing:o,activeShape:c,inactiveShape:d,onAnimationStart:f,onAnimationEnd:p}=t,y=rp(t,"recharts-pie-"),g=r.current,[N,w]=T.useState(!1),k=T.useCallback(()=>{typeof p=="function"&&p(),w(!1)},[p]),S=T.useCallback(()=>{typeof f=="function"&&f(),w(!0)},[f]);return T.createElement(Ife,{showLabels:!N,sectors:n},T.createElement(tp,{animationId:y,begin:s,duration:l,isActive:a,easing:o,onAnimationStart:S,onAnimationEnd:k,key:y},O=>{var E=[],D=n&&n[0],H=D==null?void 0:D.startAngle;return n==null||n.forEach((W,R)=>{var z=g&&g[R],U=R>0?Em(W,"paddingAngle",0):0;if(z){var Z=ns(z.endAngle-z.startAngle,W.endAngle-W.startAngle,O),q=Rs(Rs({},W),{},{startAngle:H+U,endAngle:H+Z+U});E.push(q),H=q.endAngle}else{var{endAngle:K,startAngle:Q}=W,re=ns(0,K-Q,O),ae=Rs(Rs({},W),{},{startAngle:H+U,endAngle:H+re+U});E.push(ae),H=ae.endAngle}}),r.current=E,T.createElement(di,null,T.createElement(Ofe,{sectors:E,activeShape:c,inactiveShape:d,allOtherPieProps:t}))}),T.createElement(Tfe,{showLabels:!N,sectors:n,props:t}),t.children)}var Mfe={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:!eh.isSsr,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff"};function Lfe(e){var{id:t}=e,r=vC(e,mfe),{hide:n,className:a,rootTabIndex:s}=e,l=T.useMemo(()=>fC(e.children,fp),[e.children]),o=Jr(f=>Phe(f,t,l)),c=T.useRef(null),d=Zn("recharts-pie",a);return n||o==null?(c.current=null,T.createElement(di,{tabIndex:s,className:d})):T.createElement(T.Fragment,null,T.createElement(Sk,{fn:wfe,args:Rs(Rs({},e),{},{sectors:o})}),T.createElement(di,{tabIndex:s,className:d},T.createElement(Dfe,{props:Rs(Rs({},r),{},{sectors:o}),previousSectorsRef:c})))}function yC(e){var t=Yi(e,Mfe),{id:r}=t,n=vC(t,xfe),a=Ao(n);return T.createElement(jk,{id:r,type:"pie"},s=>T.createElement(T.Fragment,null,T.createElement(hfe,{type:"pie",id:s,data:n.data,dataKey:n.dataKey,hide:n.hide,angleAxisId:0,radiusAxisId:0,name:n.name,nameKey:n.nameKey,tooltipType:n.tooltipType,legendType:n.legendType,fill:n.fill,cx:n.cx,cy:n.cy,startAngle:n.startAngle,endAngle:n.endAngle,paddingAngle:n.paddingAngle,minAngle:n.minAngle,innerRadius:n.innerRadius,outerRadius:n.outerRadius,cornerRadius:n.cornerRadius,presentationProps:a,maxRadius:t.maxRadius}),T.createElement(yfe,sf({},n,{id:s})),T.createElement(Lfe,sf({},n,{id:s}))))}yC.displayName="Pie";function eI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function tI(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?eI(Object(r),!0).forEach(function(n){Rfe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Rfe(e,t,r){return(t=Ffe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ffe(e){var t=Bfe(e,"string");return typeof t=="symbol"?t:t+""}function Bfe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ufe={xAxis:{},yAxis:{},zAxis:{}},Dq=Dc({name:"cartesianAxis",initialState:Ufe,reducers:{addXAxis:{reducer(e,t){e.xAxis[t.payload.id]=t.payload},prepare:No()},removeXAxis:{reducer(e,t){delete e.xAxis[t.payload.id]},prepare:No()},addYAxis:{reducer(e,t){e.yAxis[t.payload.id]=t.payload},prepare:No()},removeYAxis:{reducer(e,t){delete e.yAxis[t.payload.id]},prepare:No()},addZAxis:{reducer(e,t){e.zAxis[t.payload.id]=t.payload},prepare:No()},removeZAxis:{reducer(e,t){delete e.zAxis[t.payload.id]},prepare:No()},updateYAxisWidth(e,t){var{id:r,width:n}=t.payload,a=e.yAxis[r];if(a){var s=a.widthHistory||[];if(s.length===3&&s[0]===s[2]&&n===s[1]&&n!==a.width&&Math.abs(n-s[0])<=1)return;var l=[...s,n].slice(-3);e.yAxis[r]=tI(tI({},e.yAxis[r]),{},{width:n,widthHistory:l})}}}}),{addXAxis:zfe,removeXAxis:qfe,addYAxis:Hfe,removeYAxis:$fe,addZAxis:MTe,removeZAxis:LTe,updateYAxisWidth:Vfe}=Dq.actions,Wfe=Dq.reducer,Kfe=Ct([Xi],e=>{if(e)return{top:e.top,bottom:e.bottom,left:e.left,right:e.right}}),Gfe=Ct([Kfe,Q0,J0],(e,t,r)=>{if(!(!e||t==null||r==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,r-e.top-e.bottom)}}),Ck=()=>Jr(Gfe),Xfe=()=>Jr(Eue);function rI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function nI(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?rI(Object(r),!0).forEach(function(n){Yfe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Yfe(e,t,r){return(t=Zfe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Zfe(e){var t=Qfe(e,"string");return typeof t=="symbol"?t:t+""}function Qfe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Jfe=e=>{var{point:t,childIndex:r,mainColor:n,activeDot:a,dataKey:s}=e;if(a===!1||t.x==null||t.y==null)return null;var l=nI(nI({index:r,dataKey:s,cx:t.x,cy:t.y,r:4,fill:n??"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},Am(a)),U6(a)),o;return T.isValidElement(a)?o=T.cloneElement(a,l):typeof a=="function"?o=a(l):o=T.createElement(dC,l),T.createElement(di,{className:"recharts-active-dot"},o)};function gS(e){var{points:t,mainColor:r,activeDot:n,itemDataKey:a}=e,s=Jr(af),l=Xfe();if(t==null||l==null)return null;var o=t.find(c=>l.includes(c.payload));return As(o)?null:Jfe({point:o,childIndex:Number(s),mainColor:r,dataKey:a,activeDot:n})}var eme="Invariant failed";function tme(e,t){throw new Error(eme)}var rme=["x","y"];function bS(){return bS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},bS.apply(null,arguments)}function aI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function cg(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?aI(Object(r),!0).forEach(function(n){nme(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):aI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function nme(e,t,r){return(t=ame(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ame(e){var t=sme(e,"string");return typeof t=="symbol"?t:t+""}function sme(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ime(e,t){if(e==null)return{};var r,n,a=lme(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function lme(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function ome(e,t){var{x:r,y:n}=e,a=ime(e,rme),s="".concat(r),l=parseInt(s,10),o="".concat(n),c=parseInt(o,10),d="".concat(t.height||a.height),f=parseInt(d,10),p="".concat(t.width||a.width),y=parseInt(p,10);return cg(cg(cg(cg(cg({},t),a),l?{x:l}:{}),c?{y:c}:{}),{},{height:f,width:y,name:t.name,radius:t.radius})}function wC(e){return T.createElement(Oq,bS({shapeType:"rectangle",propTransformer:ome,activeClassName:"recharts-active-bar"},e))}var cme=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(n,a)=>{if(Zr(t))return t;var s=Zr(n)||As(n);return s?t(n,a):(s||tme(),r)}},dme={},Mq=Dc({name:"errorBars",initialState:dme,reducers:{addErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]||(e[r]=[]),e[r].push(n)},replaceErrorBar:(e,t)=>{var{itemId:r,prev:n,next:a}=t.payload;e[r]&&(e[r]=e[r].map(s=>s.dataKey===n.dataKey&&s.direction===n.direction?a:s))},removeErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]&&(e[r]=e[r].filter(a=>a.dataKey!==n.dataKey||a.direction!==n.direction))}}}),{addErrorBar:RTe,replaceErrorBar:FTe,removeErrorBar:BTe}=Mq.actions,ume=Mq.reducer,hme=["children"];function fme(e,t){if(e==null)return{};var r,n,a=mme(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function mme(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var xme={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},pme=T.createContext(xme);function Lq(e){var{children:t}=e,r=fme(e,hme);return T.createElement(pme.Provider,{value:r},t)}function Ak(e,t){var r,n,a=Jr(d=>rh(d,e)),s=Jr(d=>nh(d,t)),l=(r=a==null?void 0:a.allowDataOverflow)!==null&&r!==void 0?r:mc.allowDataOverflow,o=(n=s==null?void 0:s.allowDataOverflow)!==null&&n!==void 0?n:xc.allowDataOverflow,c=l||o;return{needClip:c,needClipX:l,needClipY:o}}function kC(e){var{xAxisId:t,yAxisId:r,clipPathId:n}=e,a=Ck(),{needClipX:s,needClipY:l,needClip:o}=Ak(t,r);if(!o)return null;var{x:c,y:d,width:f,height:p}=a;return T.createElement("clipPath",{id:"clipPath-".concat(n)},T.createElement("rect",{x:s?c:c-f/2,y:l?d:d-p/2,width:s?f:f*2,height:l?p:p*2}))}var gme=["onMouseEnter","onMouseLeave","onClick"],bme=["value","background","tooltipPosition"],vme=["id"],yme=["onMouseEnter","onClick","onMouseLeave"];function lf(){return lf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},lf.apply(null,arguments)}function sI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function _o(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?sI(Object(r),!0).forEach(function(n){wme(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function wme(e,t,r){return(t=kme(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kme(e){var t=Nme(e,"string");return typeof t=="symbol"?t:t+""}function Nme(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ew(e,t){if(e==null)return{};var r,n,a=_me(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function _me(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Sme=e=>{var{dataKey:t,name:r,fill:n,legendType:a,hide:s}=e;return[{inactive:s,dataKey:t,type:a,color:n,value:xf(r,t),payload:e}]};function jme(e){var{dataKey:t,stroke:r,strokeWidth:n,fill:a,name:s,hide:l,unit:o}=e;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:n,fill:a,dataKey:t,nameKey:void 0,name:xf(s,t),hide:l,type:e.tooltipType,color:e.fill,unit:o}}}function Cme(e){var t=Jr(af),{data:r,dataKey:n,background:a,allOtherBarProps:s}=e,{onMouseEnter:l,onMouseLeave:o,onClick:c}=s,d=ew(s,gme),f=mC(l,n),p=xC(o),y=pC(c,n);if(!a||r==null)return null;var g=Am(a);return T.createElement(T.Fragment,null,r.map((N,w)=>{var{value:k,background:S,tooltipPosition:O}=N,E=ew(N,bme);if(!S)return null;var D=f(N,w),H=p(N,w),W=y(N,w),R=_o(_o(_o(_o(_o({option:a,isActive:String(w)===t},E),{},{fill:"#eee"},S),g),Rb(d,N,w)),{},{onMouseEnter:D,onMouseLeave:H,onClick:W,dataKey:n,index:w,className:"recharts-bar-background-rectangle"});return T.createElement(wC,lf({key:"background-bar-".concat(w)},R))}))}function Ame(e){var{showLabels:t,children:r,rects:n}=e,a=n==null?void 0:n.map(s=>{var l={x:s.x,y:s.y,width:s.width,height:s.height};return _o(_o({},l),{},{value:s.value,payload:s.payload,parentViewBox:s.parentViewBox,viewBox:l,fill:s.fill})});return T.createElement(cC,{value:t?a:void 0},r)}function Eme(e){var{shape:t,activeBar:r,baseProps:n,entry:a,index:s,dataKey:l}=e,o=Jr(af),c=Jr(sq),d=r&&String(s)===o&&(c==null||l===c),f=d?r:t;return T.createElement(wC,lf({},n,{name:String(n.name)},a,{isActive:d,option:f,index:s,dataKey:l}))}function Tme(e){var{shape:t,baseProps:r,entry:n,index:a,dataKey:s}=e;return T.createElement(wC,lf({},r,{name:String(r.name)},n,{isActive:!1,option:t,index:a,dataKey:s}))}function Ome(e){var{data:t,props:r}=e,n=Ao(r),{id:a}=n,s=ew(n,vme),{shape:l,dataKey:o,activeBar:c}=r,{onMouseEnter:d,onClick:f,onMouseLeave:p}=r,y=ew(r,yme),g=mC(d,o),N=xC(p),w=pC(f,o);return t?T.createElement(T.Fragment,null,t.map((k,S)=>T.createElement(di,lf({key:"rectangle-".concat(k==null?void 0:k.x,"-").concat(k==null?void 0:k.y,"-").concat(k==null?void 0:k.value,"-").concat(S),className:"recharts-bar-rectangle"},Rb(y,k,S),{onMouseEnter:g(k,S),onMouseLeave:N(k,S),onClick:w(k,S)}),c?T.createElement(Eme,{shape:l,activeBar:c,baseProps:s,entry:k,index:S,dataKey:o}):T.createElement(Tme,{shape:l,baseProps:s,entry:k,index:S,dataKey:o})))):null}function Pme(e){var{props:t,previousRectanglesRef:r}=e,{data:n,layout:a,isAnimationActive:s,animationBegin:l,animationDuration:o,animationEasing:c,onAnimationEnd:d,onAnimationStart:f}=t,p=r.current,y=rp(t,"recharts-bar-"),[g,N]=T.useState(!1),w=!g,k=T.useCallback(()=>{typeof d=="function"&&d(),N(!1)},[d]),S=T.useCallback(()=>{typeof f=="function"&&f(),N(!0)},[f]);return T.createElement(Ame,{showLabels:w,rects:n},T.createElement(tp,{animationId:y,begin:l,duration:o,isActive:s,easing:c,onAnimationEnd:k,onAnimationStart:S,key:y},O=>{var E=O===1?n:n==null?void 0:n.map((D,H)=>{var W=p&&p[H];if(W)return _o(_o({},D),{},{x:ns(W.x,D.x,O),y:ns(W.y,D.y,O),width:ns(W.width,D.width,O),height:ns(W.height,D.height,O)});if(a==="horizontal"){var R=ns(0,D.height,O);return _o(_o({},D),{},{y:D.y+D.height-R,height:R})}var z=ns(0,D.width,O);return _o(_o({},D),{},{width:z})});return O>0&&(r.current=E??null),E==null?null:T.createElement(di,null,T.createElement(Ome,{props:t,data:E}))}),T.createElement(wk,{label:t.label}),t.children)}function Ime(e){var t=T.useRef(null);return T.createElement(Pme,{previousRectanglesRef:t,props:e})}var Rq=0,Dme=(e,t)=>{var r=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:r,errorVal:as(e,t)}};class Mme extends T.PureComponent{render(){var{hide:t,data:r,dataKey:n,className:a,xAxisId:s,yAxisId:l,needClip:o,background:c,id:d}=this.props;if(t||r==null)return null;var f=Zn("recharts-bar",a),p=d;return T.createElement(di,{className:f,id:d},o&&T.createElement("defs",null,T.createElement(kC,{clipPathId:p,xAxisId:s,yAxisId:l})),T.createElement(di,{className:"recharts-bar-rectangles",clipPath:o?"url(#clipPath-".concat(p,")"):void 0},T.createElement(Cme,{data:r,dataKey:n,background:c,allOtherBarProps:this.props}),T.createElement(Ime,this.props)))}}var Lme={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!eh.isSsr,legendType:"rect",minPointSize:Rq,xAxisId:0,yAxisId:0};function Rme(e){var{xAxisId:t,yAxisId:r,hide:n,legendType:a,minPointSize:s,activeBar:l,animationBegin:o,animationDuration:c,animationEasing:d,isAnimationActive:f}=e,{needClip:p}=Ak(t,r),y=zb(),g=Ml(),N=fC(e.children,fp),w=Jr(O=>uxe(O,t,r,g,e.id,N));if(y!=="vertical"&&y!=="horizontal")return null;var k,S=w==null?void 0:w[0];return S==null||S.height==null||S.width==null?k=0:k=y==="vertical"?S.height/2:S.width/2,T.createElement(Lq,{xAxisId:t,yAxisId:r,data:w,dataPointFormatter:Dme,errorBarOffset:k},T.createElement(Mme,lf({},e,{layout:y,needClip:p,data:w,xAxisId:t,yAxisId:r,hide:n,legendType:a,minPointSize:s,activeBar:l,animationBegin:o,animationDuration:c,animationEasing:d,isAnimationActive:f})))}function Fme(e){var{layout:t,barSettings:{dataKey:r,minPointSize:n},pos:a,bandSize:s,xAxis:l,yAxis:o,xAxisTicks:c,yAxisTicks:d,stackedData:f,displayedData:p,offset:y,cells:g,parentViewBox:N}=e,w=t==="horizontal"?o:l,k=f?w.scale.domain():null,S=Lae({numericAxis:w});return p.map((O,E)=>{var D,H,W,R,z,U;f?D=Oae(f[E],k):(D=as(O,r),Array.isArray(D)||(D=[S,D]));var Z=cme(n,Rq)(D[1],E);if(t==="horizontal"){var q,[K,Q]=[o.scale(D[0]),o.scale(D[1])];H=FO({axis:l,ticks:c,bandSize:s,offset:a.offset,entry:O,index:E}),W=(q=Q??K)!==null&&q!==void 0?q:void 0,R=a.size;var re=K-Q;if(z=Tc(re)?0:re,U={x:H,y:y.top,width:R,height:y.height},Math.abs(Z)>0&&Math.abs(z)<Math.abs(Z)){var ae=bl(z||Z)*(Math.abs(Z)-Math.abs(z));W-=ae,z+=ae}}else{var[de,he]=[l.scale(D[0]),l.scale(D[1])];if(H=de,W=FO({axis:o,ticks:d,bandSize:s,offset:a.offset,entry:O,index:E}),R=he-de,z=a.size,U={x:y.left,y:W,width:y.width,height:z},Math.abs(Z)>0&&Math.abs(R)<Math.abs(Z)){var Se=bl(R||Z)*(Math.abs(Z)-Math.abs(R));R+=Se}}if(H==null||W==null||R==null||z==null)return null;var ke=_o(_o({},O),{},{x:H,y:W,width:R,height:z,value:f?D:D[1],payload:O,background:U,tooltipPosition:{x:H+R/2,y:W+z/2},parentViewBox:N},g&&g[E]&&g[E].props);return ke}).filter(Boolean)}function Bme(e){var t=Yi(e,Lme),r=Ml();return T.createElement(jk,{id:t.id,type:"bar"},n=>T.createElement(T.Fragment,null,T.createElement(gC,{legendPayload:Sme(t)}),T.createElement(Sk,{fn:jme,args:t}),T.createElement(bC,{type:"bar",id:n,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:HB(t.stackId),hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:r}),T.createElement(Rme,lf({},t,{id:n}))))}var Yh=T.memo(Bme);Yh.displayName="Bar";function iI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function E2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?iI(Object(r),!0).forEach(function(n){Ume(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):iI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ume(e,t,r){return(t=zme(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zme(e){var t=qme(e,"string");return typeof t=="symbol"?t:t+""}function qme(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Hme=(e,t)=>t,$me=(e,t,r)=>r,Vme=(e,t,r,n)=>n,Wme=(e,t,r,n,a)=>a,rv=Ct([Yb,Wme],(e,t)=>e.filter(r=>r.type==="bar").find(r=>r.id===t)),Kme=Ct([rv],e=>e==null?void 0:e.maxBarSize),Gme=(e,t,r,n,a,s)=>s,lI=(e,t,r)=>{var n=r??e;if(!As(n))return no(n,t,0)},Xme=Ct([fa,Yb,Hme,$me,Vme],(e,t,r,n,a)=>t.filter(s=>e==="horizontal"?s.xAxisId===r:s.yAxisId===n).filter(s=>s.isPanorama===a).filter(s=>s.hide===!1).filter(s=>s.type==="bar")),Yme=(e,t,r,n)=>{var a=fa(e);return a==="horizontal"?ib(e,"yAxis",r,n):ib(e,"xAxis",t,n)},Zme=(e,t,r)=>{var n=fa(e);return n==="horizontal"?oP(e,"xAxis",t):oP(e,"yAxis",r)},Qme=(e,t,r)=>{var n={},a=e.filter(hk),s=e.filter(d=>d.stackId==null),l=a.reduce((d,f)=>(d[f.stackId]||(d[f.stackId]=[]),d[f.stackId].push(f),d),n),o=Object.entries(l).map(d=>{var[f,p]=d,y=p.map(N=>N.dataKey),g=lI(t,r,p[0].barSize);return{stackId:f,dataKeys:y,barSize:g}}),c=s.map(d=>{var f=[d.dataKey].filter(y=>y!=null),p=lI(t,r,d.barSize);return{stackId:void 0,dataKeys:f,barSize:p}});return[...o,...c]},Jme=Ct([Xme,Mce,Zme],Qme),exe=(e,t,r,n,a)=>{var s,l,o=rv(e,t,r,n,a);if(o!=null){var c=fa(e),d=sz(e),{maxBarSize:f}=o,p=As(f)?d:f,y,g;return c==="horizontal"?(y=Hu(e,"xAxis",t,n),g=qu(e,"xAxis",t,n)):(y=Hu(e,"yAxis",r,n),g=qu(e,"yAxis",r,n)),(s=(l=Pm(y,g,!0))!==null&&l!==void 0?l:p)!==null&&s!==void 0?s:0}},Fq=(e,t,r,n)=>{var a=fa(e),s,l;return a==="horizontal"?(s=Hu(e,"xAxis",t,n),l=qu(e,"xAxis",t,n)):(s=Hu(e,"yAxis",r,n),l=qu(e,"yAxis",r,n)),Pm(s,l)};function txe(e,t,r,n,a){var s=n.length;if(!(s<1)){var l=no(e,r,0,!0),o,c=[];if(Fi(n[0].barSize)){var d=!1,f=r/s,p=n.reduce((S,O)=>S+(O.barSize||0),0);p+=(s-1)*l,p>=r&&(p-=(s-1)*l,l=0),p>=r&&f>0&&(d=!0,f*=.9,p=s*f);var y=(r-p)/2>>0,g={offset:y-l,size:0};o=n.reduce((S,O)=>{var E,D={stackId:O.stackId,dataKeys:O.dataKeys,position:{offset:g.offset+g.size+l,size:d?f:(E=O.barSize)!==null&&E!==void 0?E:0}},H=[...S,D];return g=H[H.length-1].position,H},c)}else{var N=no(t,r,0,!0);r-2*N-(s-1)*l<=0&&(l=0);var w=(r-2*N-(s-1)*l)/s;w>1&&(w>>=0);var k=Fi(a)?Math.min(w,a):w;o=n.reduce((S,O,E)=>[...S,{stackId:O.stackId,dataKeys:O.dataKeys,position:{offset:N+(w+l)*E+(w-k)/2,size:k}}],c)}return o}}var rxe=(e,t,r,n,a,s,l)=>{var o=As(l)?t:l,c=txe(r,n,a!==s?a:s,e,o);return a!==s&&c!=null&&(c=c.map(d=>E2(E2({},d),{},{position:E2(E2({},d.position),{},{offset:d.position.offset-a/2})}))),c},nxe=Ct([Jme,sz,Dce,iz,exe,Fq,Kme],rxe),axe=(e,t,r,n)=>Hu(e,"xAxis",t,n),sxe=(e,t,r,n)=>Hu(e,"yAxis",r,n),ixe=(e,t,r,n)=>qu(e,"xAxis",t,n),lxe=(e,t,r,n)=>qu(e,"yAxis",r,n),oxe=Ct([nxe,rv],(e,t)=>{if(!(e==null||t==null)){var r=e.find(n=>n.stackId===t.stackId&&t.dataKey!=null&&n.dataKeys.includes(t.dataKey));if(r!=null)return r.position}}),cxe=(e,t)=>{var r=uk(t);if(!(!e||r==null||t==null)){var{stackId:n}=t;if(n!=null){var a=e[n];if(a){var{stackedData:s}=a;if(s)return s.find(l=>l.key===r)}}}},dxe=Ct([Yme,rv],cxe),uxe=Ct([Xi,Y6,axe,sxe,ixe,lxe,oxe,fa,Wb,Fq,dxe,rv,Gme],(e,t,r,n,a,s,l,o,c,d,f,p,y)=>{var{chartData:g,dataStartIndex:N,dataEndIndex:w}=c;if(!(p==null||l==null||t==null||o!=="horizontal"&&o!=="vertical"||r==null||n==null||a==null||s==null||d==null)){var{data:k}=p,S;if(k!=null&&k.length>0?S=k:S=g==null?void 0:g.slice(N,w+1),S!=null)return Fme({layout:o,barSettings:p,pos:l,parentViewBox:t,bandSize:d,xAxis:r,yAxis:n,xAxisTicks:a,yAxisTicks:s,stackedData:f,displayedData:S,offset:e,cells:y})}}),Bq=e=>{var{chartData:t}=e,r=zs(),n=Ml();return T.useEffect(()=>n?()=>{}:(r(bP(t)),()=>{r(bP(void 0))}),[t,r,n]),null},oI={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},Uq=Dc({name:"brush",initialState:oI,reducers:{setBrushSettings(e,t){return t.payload==null?oI:t.payload}}}),{setBrushSettings:UTe}=Uq.actions,hxe=Uq.reducer;function fxe(e,t,r){return(t=mxe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mxe(e){var t=xxe(e,"string");return typeof t=="symbol"?t:t+""}function xxe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class NC{static create(t){return new NC(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:r,position:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(n)switch(n){case"start":return this.scale(t);case"middle":{var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+a}case"end":{var s=this.bandwidth?this.bandwidth():0;return this.scale(t)+s}default:return this.scale(t)}if(r){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+l}return this.scale(t)}}isInRange(t){var r=this.range(),n=r[0],a=r[r.length-1];return n<=a?t>=n&&t<=a:t>=a&&t<=n}}fxe(NC,"EPS",1e-4);function pxe(e){return(e%180+180)%180}var gxe=function(t){var{width:r,height:n}=t,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=pxe(a),l=s*Math.PI/180,o=Math.atan(n/r),c=l>o&&l<Math.PI-o?n/Math.sin(l):r/Math.cos(l);return Math.abs(c)},bxe={dots:[],areas:[],lines:[]},zq=Dc({name:"referenceElements",initialState:bxe,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var r=M0(e).dots.findIndex(n=>n===t.payload);r!==-1&&e.dots.splice(r,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var r=M0(e).areas.findIndex(n=>n===t.payload);r!==-1&&e.areas.splice(r,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var r=M0(e).lines.findIndex(n=>n===t.payload);r!==-1&&e.lines.splice(r,1)}}}),{addDot:zTe,removeDot:qTe,addArea:HTe,removeArea:$Te,addLine:VTe,removeLine:WTe}=zq.actions,vxe=zq.reducer,yxe=T.createContext(void 0),wxe=e=>{var{children:t}=e,[r]=T.useState("".concat(Yg("recharts"),"-clip")),n=Ck();if(n==null)return null;var{x:a,y:s,width:l,height:o}=n;return T.createElement(yxe.Provider,{value:r},T.createElement("defs",null,T.createElement("clipPath",{id:r},T.createElement("rect",{x:a,y:s,height:o,width:l}))),t)};function V1(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function qq(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var n=[],a=0;a<e.length;a+=t)n.push(e[a]);return n}function kxe(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return gxe(n,r)}function Nxe(e,t,r){var n=r==="width",{x:a,y:s,width:l,height:o}=e;return t===1?{start:n?a:s,end:n?a+l:s+o}:{start:n?a+l:s+o,end:n?a:s}}function tw(e,t,r,n,a){if(e*t<e*n||e*t>e*a)return!1;var s=r();return e*(t-e*s/2-n)>=0&&e*(t+e*s/2-a)<=0}function _xe(e,t){return qq(e,t+1)}function Sxe(e,t,r,n,a){for(var s=(n||[]).slice(),{start:l,end:o}=t,c=0,d=1,f=l,p=function(){var N=n==null?void 0:n[c];if(N===void 0)return{v:qq(n,d)};var w=c,k,S=()=>(k===void 0&&(k=r(N,w)),k),O=N.coordinate,E=c===0||tw(e,O,S,f,o);E||(c=0,f=l,d+=1),E&&(f=O+e*(S()/2+a),c+=d)},y;d<=s.length;)if(y=p(),y)return y.v;return[]}function cI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Zl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?cI(Object(r),!0).forEach(function(n){jxe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function jxe(e,t,r){return(t=Cxe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Cxe(e){var t=Axe(e,"string");return typeof t=="symbol"?t:t+""}function Axe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Exe(e,t,r,n,a){for(var s=(n||[]).slice(),l=s.length,{start:o}=t,{end:c}=t,d=function(y){var g=s[y],N,w=()=>(N===void 0&&(N=r(g,y)),N);if(y===l-1){var k=e*(g.coordinate+e*w()/2-c);s[y]=g=Zl(Zl({},g),{},{tickCoord:k>0?g.coordinate-k*e:g.coordinate})}else s[y]=g=Zl(Zl({},g),{},{tickCoord:g.coordinate});var S=tw(e,g.tickCoord,w,o,c);S&&(c=g.tickCoord-e*(w()/2+a),s[y]=Zl(Zl({},g),{},{isShow:!0}))},f=l-1;f>=0;f--)d(f);return s}function Txe(e,t,r,n,a,s){var l=(n||[]).slice(),o=l.length,{start:c,end:d}=t;if(s){var f=n[o-1],p=r(f,o-1),y=e*(f.coordinate+e*p/2-d);l[o-1]=f=Zl(Zl({},f),{},{tickCoord:y>0?f.coordinate-y*e:f.coordinate});var g=tw(e,f.tickCoord,()=>p,c,d);g&&(d=f.tickCoord-e*(p/2+a),l[o-1]=Zl(Zl({},f),{},{isShow:!0}))}for(var N=s?o-1:o,w=function(O){var E=l[O],D,H=()=>(D===void 0&&(D=r(E,O)),D);if(O===0){var W=e*(E.coordinate-e*H()/2-c);l[O]=E=Zl(Zl({},E),{},{tickCoord:W<0?E.coordinate-W*e:E.coordinate})}else l[O]=E=Zl(Zl({},E),{},{tickCoord:E.coordinate});var R=tw(e,E.tickCoord,H,c,d);R&&(c=E.tickCoord+e*(H()/2+a),l[O]=Zl(Zl({},E),{},{isShow:!0}))},k=0;k<N;k++)w(k);return l}function _C(e,t,r){var{tick:n,ticks:a,viewBox:s,minTickGap:l,orientation:o,interval:c,tickFormatter:d,unit:f,angle:p}=e;if(!a||!a.length||!n)return[];if(Zr(c)||eh.isSsr){var y;return(y=_xe(a,Zr(c)?c:0))!==null&&y!==void 0?y:[]}var g=[],N=o==="top"||o==="bottom"?"width":"height",w=f&&N==="width"?jg(f,{fontSize:t,letterSpacing:r}):{width:0,height:0},k=(E,D)=>{var H=typeof d=="function"?d(E.value,D):E.value;return N==="width"?kxe(jg(H,{fontSize:t,letterSpacing:r}),w,p):jg(H,{fontSize:t,letterSpacing:r})[N]},S=a.length>=2?bl(a[1].coordinate-a[0].coordinate):1,O=Nxe(s,S,N);return c==="equidistantPreserveStart"?Sxe(S,O,k,a,l):(c==="preserveStart"||c==="preserveStartEnd"?g=Txe(S,O,k,a,l,c==="preserveStartEnd"):g=Exe(S,O,k,a,l),g.filter(E=>E.isShow))}var Oxe=e=>{var{ticks:t,label:r,labelGapWithTick:n=5,tickSize:a=0,tickMargin:s=0}=e,l=0;if(t){Array.from(t).forEach(f=>{if(f){var p=f.getBoundingClientRect();p.width>l&&(l=p.width)}});var o=r?r.getBoundingClientRect().width:0,c=a+s,d=l+c+o+(r?n:0);return Math.round(d)}return 0},Pxe=["axisLine","width","height","className","hide","ticks"],Ixe=["viewBox"],Dxe=["viewBox"];function vS(e,t){if(e==null)return{};var r,n,a=Mxe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Mxe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Lm(){return Lm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Lm.apply(null,arguments)}function dI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Wi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?dI(Object(r),!0).forEach(function(n){Lxe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Lxe(e,t,r){return(t=Rxe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Rxe(e){var t=Fxe(e,"string");return typeof t=="symbol"?t:t+""}function Fxe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var SC={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"};function Bxe(e){var{x:t,y:r,width:n,height:a,orientation:s,mirror:l,axisLine:o,otherSvgProps:c}=e;if(!o)return null;var d=Wi(Wi(Wi({},c),Ao(o)),{},{fill:"none"});if(s==="top"||s==="bottom"){var f=+(s==="top"&&!l||s==="bottom"&&l);d=Wi(Wi({},d),{},{x1:t,y1:r+f*a,x2:t+n,y2:r+f*a})}else{var p=+(s==="left"&&!l||s==="right"&&l);d=Wi(Wi({},d),{},{x1:t+p*n,y1:r,x2:t+p*n,y2:r+a})}return T.createElement("line",Lm({},d,{className:Zn("recharts-cartesian-axis-line",Em(o,"className"))}))}function Uxe(e,t,r,n,a,s,l,o,c){var d,f,p,y,g,N,w=o?-1:1,k=e.tickSize||l,S=Zr(e.tickCoord)?e.tickCoord:e.coordinate;switch(s){case"top":d=f=e.coordinate,y=r+ +!o*a,p=y-w*k,N=p-w*c,g=S;break;case"left":p=y=e.coordinate,f=t+ +!o*n,d=f-w*k,g=d-w*c,N=S;break;case"right":p=y=e.coordinate,f=t+ +o*n,d=f+w*k,g=d+w*c,N=S;break;default:d=f=e.coordinate,y=r+ +o*a,p=y+w*k,N=p+w*c,g=S;break}return{line:{x1:d,y1:p,x2:f,y2:y},tick:{x:g,y:N}}}function zxe(e,t){switch(e){case"left":return t?"start":"end";case"right":return t?"end":"start";default:return"middle"}}function qxe(e,t){switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}function Hxe(e){var{option:t,tickProps:r,value:n}=e,a,s=Zn(r.className,"recharts-cartesian-axis-tick-value");if(T.isValidElement(t))a=T.cloneElement(t,Wi(Wi({},r),{},{className:s}));else if(typeof t=="function")a=t(Wi(Wi({},r),{},{className:s}));else{var l="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(l=Zn(l,t==null?void 0:t.className)),a=T.createElement(yk,Lm({},r,{className:l}),n)}return a}function $xe(e){var{ticks:t=[],tick:r,tickLine:n,stroke:a,tickFormatter:s,unit:l,padding:o,tickTextProps:c,orientation:d,mirror:f,x:p,y,width:g,height:N,tickSize:w,tickMargin:k,fontSize:S,letterSpacing:O,getTicksConfig:E,events:D}=e,H=_C(Wi(Wi({},E),{},{ticks:t}),S,O),W=zxe(d,f),R=qxe(d,f),z=Ao(E),U=Am(r),Z={};typeof n=="object"&&(Z=n);var q=Wi(Wi({},z),{},{fill:"none"},Z),K=H.map((Q,re)=>{var{line:ae,tick:de}=Uxe(Q,p,y,g,N,d,w,f,k),he=Wi(Wi(Wi(Wi({textAnchor:W,verticalAnchor:R},z),{},{stroke:"none",fill:a},U),de),{},{index:re,payload:Q,visibleTicksCount:H.length,tickFormatter:s,padding:o},c);return T.createElement(di,Lm({className:"recharts-cartesian-axis-tick",key:"tick-".concat(Q.value,"-").concat(Q.coordinate,"-").concat(Q.tickCoord)},Rb(D,Q,re)),n&&T.createElement("line",Lm({},q,ae,{className:Zn("recharts-cartesian-axis-tick-line",Em(n,"className"))})),r&&T.createElement(Hxe,{option:r,tickProps:he,value:"".concat(typeof s=="function"?s(Q.value,re):Q.value).concat(l||"")}))});return K.length>0?T.createElement("g",{className:"recharts-cartesian-axis-ticks"},K):null}var Vxe=T.forwardRef((e,t)=>{var{axisLine:r,width:n,height:a,className:s,hide:l,ticks:o}=e,c=vS(e,Pxe),[d,f]=T.useState(""),[p,y]=T.useState(""),g=T.useRef(null);T.useImperativeHandle(t,()=>({getCalculatedWidth:()=>{var w;return Oxe({ticks:g.current,label:(w=e.labelRef)===null||w===void 0?void 0:w.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var N=T.useCallback(w=>{if(w){var k=w.getElementsByClassName("recharts-cartesian-axis-tick-value");g.current=k;var S=k[0];if(S){var O=window.getComputedStyle(S),E=O.fontSize,D=O.letterSpacing;(E!==d||D!==p)&&(f(E),y(D))}}},[d,p]);return l||n!=null&&n<=0||a!=null&&a<=0?null:T.createElement(di,{className:Zn("recharts-cartesian-axis",s),ref:N},T.createElement(Bxe,{x:e.x,y:e.y,width:n,height:a,orientation:e.orientation,mirror:e.mirror,axisLine:r,otherSvgProps:Ao(e)}),T.createElement($xe,{ticks:o,tick:e.tick,tickLine:e.tickLine,stroke:e.stroke,tickFormatter:e.tickFormatter,unit:e.unit,padding:e.padding,tickTextProps:e.tickTextProps,orientation:e.orientation,mirror:e.mirror,x:e.x,y:e.y,width:e.width,height:e.height,tickSize:e.tickSize,tickMargin:e.tickMargin,fontSize:d,letterSpacing:p,getTicksConfig:e,events:c}),T.createElement(G0e,{x:e.x,y:e.y,width:e.width,height:e.height},T.createElement(ahe,{label:e.label,labelRef:e.labelRef}),e.children))}),Wxe=T.memo(Vxe,(e,t)=>{var{viewBox:r}=e,n=vS(e,Ixe),{viewBox:a}=t,s=vS(t,Dxe);return V1(r,a)&&V1(n,s)}),jC=T.forwardRef((e,t)=>{var r=Yi(e,SC);return T.createElement(Wxe,Lm({},r,{ref:t}))});jC.displayName="CartesianAxis";var Kxe=["x1","y1","x2","y2","key"],Gxe=["offset"],Xxe=["xAxisId","yAxisId"],Yxe=["xAxisId","yAxisId"];function uI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function eo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?uI(Object(r),!0).forEach(function(n){Zxe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Zxe(e,t,r){return(t=Qxe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Qxe(e){var t=Jxe(e,"string");return typeof t=="symbol"?t:t+""}function Jxe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function tm(){return tm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},tm.apply(null,arguments)}function rw(e,t){if(e==null)return{};var r,n,a=e1e(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function e1e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var t1e=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:r,x:n,y:a,width:s,height:l,ry:o}=e;return T.createElement("rect",{x:n,y:a,ry:o,width:s,height:l,stroke:"none",fill:t,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function Hq(e,t){var r;if(T.isValidElement(e))r=T.cloneElement(e,t);else if(typeof e=="function")r=e(t);else{var{x1:n,y1:a,x2:s,y2:l,key:o}=t,c=rw(t,Kxe),d=Ao(c),{offset:f}=d,p=rw(d,Gxe);r=T.createElement("line",tm({},p,{x1:n,y1:a,x2:s,y2:l,fill:"none",key:o}))}return r}function r1e(e){var{x:t,width:r,horizontal:n=!0,horizontalPoints:a}=e;if(!n||!a||!a.length)return null;var{xAxisId:s,yAxisId:l}=e,o=rw(e,Xxe),c=a.map((d,f)=>{var p=eo(eo({},o),{},{x1:t,y1:d,x2:t+r,y2:d,key:"line-".concat(f),index:f});return Hq(n,p)});return T.createElement("g",{className:"recharts-cartesian-grid-horizontal"},c)}function n1e(e){var{y:t,height:r,vertical:n=!0,verticalPoints:a}=e;if(!n||!a||!a.length)return null;var{xAxisId:s,yAxisId:l}=e,o=rw(e,Yxe),c=a.map((d,f)=>{var p=eo(eo({},o),{},{x1:d,y1:t,x2:d,y2:t+r,key:"line-".concat(f),index:f});return Hq(n,p)});return T.createElement("g",{className:"recharts-cartesian-grid-vertical"},c)}function a1e(e){var{horizontalFill:t,fillOpacity:r,x:n,y:a,width:s,height:l,horizontalPoints:o,horizontal:c=!0}=e;if(!c||!t||!t.length)return null;var d=o.map(p=>Math.round(p+a-a)).sort((p,y)=>p-y);a!==d[0]&&d.unshift(0);var f=d.map((p,y)=>{var g=!d[y+1],N=g?a+l-p:d[y+1]-p;if(N<=0)return null;var w=y%t.length;return T.createElement("rect",{key:"react-".concat(y),y:p,x:n,height:N,width:s,stroke:"none",fill:t[w],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return T.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},f)}function s1e(e){var{vertical:t=!0,verticalFill:r,fillOpacity:n,x:a,y:s,width:l,height:o,verticalPoints:c}=e;if(!t||!r||!r.length)return null;var d=c.map(p=>Math.round(p+a-a)).sort((p,y)=>p-y);a!==d[0]&&d.unshift(0);var f=d.map((p,y)=>{var g=!d[y+1],N=g?a+l-p:d[y+1]-p;if(N<=0)return null;var w=y%r.length;return T.createElement("rect",{key:"react-".concat(y),x:p,y:s,width:N,height:o,stroke:"none",fill:r[w],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return T.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},f)}var i1e=(e,t)=>{var{xAxis:r,width:n,height:a,offset:s}=e;return zB(_C(eo(eo(eo({},SC),r),{},{ticks:qB(r),viewBox:{x:0,y:0,width:n,height:a}})),s.left,s.left+s.width,t)},l1e=(e,t)=>{var{yAxis:r,width:n,height:a,offset:s}=e;return zB(_C(eo(eo(eo({},SC),r),{},{ticks:qB(r),viewBox:{x:0,y:0,width:n,height:a}})),s.top,s.top+s.height,t)},o1e={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0};function Iu(e){var t=Q6(),r=J6(),n=YB(),a=eo(eo({},Yi(e,o1e)),{},{x:Zr(e.x)?e.x:n.left,y:Zr(e.y)?e.y:n.top,width:Zr(e.width)?e.width:n.width,height:Zr(e.height)?e.height:n.height}),{xAxisId:s,yAxisId:l,x:o,y:c,width:d,height:f,syncWithTicks:p,horizontalValues:y,verticalValues:g}=a,N=Ml(),w=Jr(U=>cP(U,"xAxis",s,N)),k=Jr(U=>cP(U,"yAxis",l,N));if(!Zr(d)||d<=0||!Zr(f)||f<=0||!Zr(o)||o!==+o||!Zr(c)||c!==+c)return null;var S=a.verticalCoordinatesGenerator||i1e,O=a.horizontalCoordinatesGenerator||l1e,{horizontalPoints:E,verticalPoints:D}=a;if((!E||!E.length)&&typeof O=="function"){var H=y&&y.length,W=O({yAxis:k?eo(eo({},k),{},{ticks:H?y:k.ticks}):void 0,width:t,height:r,offset:n},H?!0:p);Dy(Array.isArray(W),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof W,"]")),Array.isArray(W)&&(E=W)}if((!D||!D.length)&&typeof S=="function"){var R=g&&g.length,z=S({xAxis:w?eo(eo({},w),{},{ticks:R?g:w.ticks}):void 0,width:t,height:r,offset:n},R?!0:p);Dy(Array.isArray(z),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof z,"]")),Array.isArray(z)&&(D=z)}return T.createElement("g",{className:"recharts-cartesian-grid"},T.createElement(t1e,{fill:a.fill,fillOpacity:a.fillOpacity,x:a.x,y:a.y,width:a.width,height:a.height,ry:a.ry}),T.createElement(a1e,tm({},a,{horizontalPoints:E})),T.createElement(s1e,tm({},a,{verticalPoints:D})),T.createElement(r1e,tm({},a,{offset:n,horizontalPoints:E,xAxis:w,yAxis:k})),T.createElement(n1e,tm({},a,{offset:n,verticalPoints:D,xAxis:w,yAxis:k})))}Iu.displayName="CartesianGrid";var $q=(e,t,r,n)=>Hu(e,"xAxis",t,n),Vq=(e,t,r,n)=>qu(e,"xAxis",t,n),Wq=(e,t,r,n)=>Hu(e,"yAxis",r,n),Kq=(e,t,r,n)=>qu(e,"yAxis",r,n),c1e=Ct([fa,$q,Wq,Vq,Kq],(e,t,r,n,a)=>Vu(e,"xAxis")?Pm(t,n,!1):Pm(r,a,!1)),d1e=(e,t,r,n,a)=>a;function u1e(e){return e.type==="line"}var h1e=Ct([Yb,d1e],(e,t)=>e.filter(u1e).find(r=>r.id===t)),f1e=Ct([fa,$q,Wq,Vq,Kq,h1e,c1e,Wb],(e,t,r,n,a,s,l,o)=>{var{chartData:c,dataStartIndex:d,dataEndIndex:f}=o;if(!(s==null||t==null||r==null||n==null||a==null||n.length===0||a.length===0||l==null)){var{dataKey:p,data:y}=s,g;if(y!=null&&y.length>0?g=y:g=c==null?void 0:c.slice(d,f+1),g!=null)return M1e({layout:e,xAxis:t,yAxis:r,xAxisTicks:n,yAxisTicks:a,dataKey:p,bandSize:l,displayedData:g})}});function Gq(e){var t=Am(e),r=3,n=2;if(t!=null){var{r:a,strokeWidth:s}=t,l=Number(a),o=Number(s);return(Number.isNaN(l)||l<0)&&(l=r),(Number.isNaN(o)||o<0)&&(o=n),{r:l,strokeWidth:o}}return{r,strokeWidth:n}}var m1e=["id"],x1e=["type","layout","connectNulls","needClip"],p1e=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function hI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function vc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?hI(Object(r),!0).forEach(function(n){g1e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function g1e(e,t,r){return(t=b1e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function b1e(e){var t=v1e(e,"string");return typeof t=="symbol"?t:t+""}function v1e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function CC(e,t){if(e==null)return{};var r,n,a=y1e(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function y1e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Rm(){return Rm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Rm.apply(null,arguments)}var w1e=e=>{var{dataKey:t,name:r,stroke:n,legendType:a,hide:s}=e;return[{inactive:s,dataKey:t,type:a,color:n,value:xf(r,t),payload:e}]};function k1e(e){var{dataKey:t,data:r,stroke:n,strokeWidth:a,fill:s,name:l,hide:o,unit:c}=e;return{dataDefinedOnItem:r,positions:void 0,settings:{stroke:n,strokeWidth:a,fill:s,dataKey:t,nameKey:void 0,name:xf(l,t),hide:o,type:e.tooltipType,color:e.stroke,unit:c}}}var Xq=(e,t)=>"".concat(t,"px ").concat(e-t,"px");function N1e(e,t){for(var r=e.length%2!==0?[...e,0]:e,n=[],a=0;a<t;++a)n=[...n,...r];return n}var _1e=(e,t,r)=>{var n=r.reduce((p,y)=>p+y);if(!n)return Xq(t,e);for(var a=Math.floor(e/n),s=e%n,l=t-e,o=[],c=0,d=0;c<r.length;d+=r[c],++c)if(d+r[c]>s){o=[...r.slice(0,c),s-d];break}var f=o.length%2===0?[0,l]:[l];return[...N1e(r,a),...o,...f].map(p=>"".concat(p,"px")).join(", ")};function S1e(e,t){var r;if(T.isValidElement(e))r=T.cloneElement(e,t);else if(typeof e=="function")r=e(t);else{var n=Zn("recharts-line-dot",typeof e!="boolean"?e.className:"");r=T.createElement(dC,Rm({},t,{className:n}))}return r}function j1e(e,t){return e==null?!1:t?!0:e.length===1}function C1e(e){var{clipPathId:t,points:r,props:n}=e,{dot:a,dataKey:s,needClip:l}=n;if(!j1e(r,a))return null;var{id:o}=n,c=CC(n,m1e),d=_k(a),f=Ao(c),p=TF(a),y=r.map((N,w)=>{var k=vc(vc(vc({key:"dot-".concat(w),r:3},f),p),{},{index:w,cx:N.x,cy:N.y,dataKey:s,value:N.value,payload:N.payload,points:r});return S1e(a,k)}),g={clipPath:l?"url(#clipPath-".concat(d?"":"dots-").concat(t,")"):void 0};return T.createElement(di,Rm({className:"recharts-line-dots",key:"dots"},g),y)}function A1e(e){var{showLabels:t,children:r,points:n}=e,a=T.useMemo(()=>n==null?void 0:n.map(s=>{var l={x:s.x,y:s.y,width:0,height:0};return vc(vc({},l),{},{value:s.value,payload:s.payload,viewBox:l,parentViewBox:void 0,fill:void 0})}),[n]);return T.createElement(cC,{value:t?a:null},r)}function fI(e){var{clipPathId:t,pathRef:r,points:n,strokeDasharray:a,props:s}=e,{type:l,layout:o,connectNulls:c,needClip:d}=s,f=CC(s,x1e),p=vc(vc({},Eo(f)),{},{fill:"none",className:"recharts-line-curve",clipPath:d?"url(#clipPath-".concat(t,")"):void 0,points:n,type:l,layout:o,connectNulls:c,strokeDasharray:a??s.strokeDasharray});return T.createElement(T.Fragment,null,(n==null?void 0:n.length)>1&&T.createElement(f1,Rm({},p,{pathRef:r})),T.createElement(C1e,{points:n,clipPathId:t,props:s}))}function E1e(e){try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch{return 0}}function T1e(e){var{clipPathId:t,props:r,pathRef:n,previousPointsRef:a,longestAnimatedLengthRef:s}=e,{points:l,strokeDasharray:o,isAnimationActive:c,animationBegin:d,animationDuration:f,animationEasing:p,animateNewValues:y,width:g,height:N,onAnimationEnd:w,onAnimationStart:k}=r,S=a.current,O=rp(r,"recharts-line-"),[E,D]=T.useState(!1),H=!E,W=T.useCallback(()=>{typeof w=="function"&&w(),D(!1)},[w]),R=T.useCallback(()=>{typeof k=="function"&&k(),D(!0)},[k]),z=E1e(n.current),U=s.current;return T.createElement(A1e,{points:l,showLabels:H},r.children,T.createElement(tp,{animationId:O,begin:d,duration:f,isActive:c,easing:p,onAnimationEnd:W,onAnimationStart:R,key:O},Z=>{var q=ns(U,z+U,Z),K=Math.min(q,z),Q;if(c)if(o){var re="".concat(o).split(/[,\s]+/gim).map(he=>parseFloat(he));Q=_1e(K,z,re)}else Q=Xq(z,K);else Q=o==null?void 0:String(o);if(S){var ae=S.length/l.length,de=Z===1?l:l.map((he,Se)=>{var ke=Math.floor(Se*ae);if(S[ke]){var Le=S[ke];return vc(vc({},he),{},{x:ns(Le.x,he.x,Z),y:ns(Le.y,he.y,Z)})}return y?vc(vc({},he),{},{x:ns(g*2,he.x,Z),y:ns(N/2,he.y,Z)}):vc(vc({},he),{},{x:he.x,y:he.y})});return a.current=de,T.createElement(fI,{props:r,points:de,clipPathId:t,pathRef:n,strokeDasharray:Q})}return Z>0&&z>0&&(a.current=l,s.current=K),T.createElement(fI,{props:r,points:l,clipPathId:t,pathRef:n,strokeDasharray:Q})}),T.createElement(wk,{label:r.label}))}function O1e(e){var{clipPathId:t,props:r}=e,n=T.useRef(null),a=T.useRef(0),s=T.useRef(null);return T.createElement(T1e,{props:r,clipPathId:t,previousPointsRef:n,longestAnimatedLengthRef:a,pathRef:s})}var P1e=(e,t)=>({x:e.x,y:e.y,value:e.value,errorVal:as(e.payload,t)});class I1e extends T.Component{render(){var{hide:t,dot:r,points:n,className:a,xAxisId:s,yAxisId:l,top:o,left:c,width:d,height:f,id:p,needClip:y}=this.props;if(t)return null;var g=Zn("recharts-line",a),N=p,{r:w,strokeWidth:k}=Gq(r),S=_k(r),O=w*2+k;return T.createElement(T.Fragment,null,T.createElement(di,{className:g},y&&T.createElement("defs",null,T.createElement(kC,{clipPathId:N,xAxisId:s,yAxisId:l}),!S&&T.createElement("clipPath",{id:"clipPath-dots-".concat(N)},T.createElement("rect",{x:c-O/2,y:o-O/2,width:d+O,height:f+O}))),T.createElement(Lq,{xAxisId:s,yAxisId:l,data:n,dataPointFormatter:P1e,errorBarOffset:0},T.createElement(O1e,{props:this.props,clipPathId:N}))),T.createElement(gS,{activeDot:this.props.activeDot,points:n,mainColor:this.props.stroke,itemDataKey:this.props.dataKey}))}}var Yq={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:!eh.isSsr,label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0};function D1e(e){var t=Yi(e,Yq),{activeDot:r,animateNewValues:n,animationBegin:a,animationDuration:s,animationEasing:l,connectNulls:o,dot:c,hide:d,isAnimationActive:f,label:p,legendType:y,xAxisId:g,yAxisId:N,id:w}=t,k=CC(t,p1e),{needClip:S}=Ak(g,N),O=Ck(),E=zb(),D=Ml(),H=Jr(Z=>f1e(Z,g,N,D,w));if(E!=="horizontal"&&E!=="vertical"||H==null||O==null)return null;var{height:W,width:R,x:z,y:U}=O;return T.createElement(I1e,Rm({},k,{id:w,connectNulls:o,dot:c,activeDot:r,animateNewValues:n,animationBegin:a,animationDuration:s,animationEasing:l,isAnimationActive:f,hide:d,label:p,legendType:y,xAxisId:g,yAxisId:N,points:H,layout:E,height:W,width:R,left:z,top:U,needClip:S}))}function M1e(e){var{layout:t,xAxis:r,yAxis:n,xAxisTicks:a,yAxisTicks:s,dataKey:l,bandSize:o,displayedData:c}=e;return c.map((d,f)=>{var p=as(d,l);if(t==="horizontal"){var y=Iy({axis:r,ticks:a,bandSize:o,entry:d,index:f}),g=As(p)?null:n.scale(p);return{x:y,y:g,value:p,payload:d}}var N=As(p)?null:r.scale(p),w=Iy({axis:n,ticks:s,bandSize:o,entry:d,index:f});return N==null||w==null?null:{x:N,y:w,value:p,payload:d}}).filter(Boolean)}function L1e(e){var t=Yi(e,Yq),r=Ml();return T.createElement(jk,{id:t.id,type:"line"},n=>T.createElement(T.Fragment,null,T.createElement(gC,{legendPayload:w1e(t)}),T.createElement(Sk,{fn:k1e,args:t}),T.createElement(bC,{type:"line",id:n,data:t.data,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,hide:t.hide,isPanorama:r}),T.createElement(D1e,Rm({},t,{id:n}))))}var nf=T.memo(L1e);nf.displayName="Line";var Zq=(e,t,r,n)=>Hu(e,"xAxis",t,n),Qq=(e,t,r,n)=>qu(e,"xAxis",t,n),Jq=(e,t,r,n)=>Hu(e,"yAxis",r,n),eH=(e,t,r,n)=>qu(e,"yAxis",r,n),R1e=Ct([fa,Zq,Jq,Qq,eH],(e,t,r,n,a)=>Vu(e,"xAxis")?Pm(t,n,!1):Pm(r,a,!1)),F1e=(e,t,r,n,a)=>a,tH=Ct([Yb,F1e],(e,t)=>e.filter(r=>r.type==="area").find(r=>r.id===t)),B1e=(e,t,r,n,a)=>{var s,l=tH(e,t,r,n,a);if(l!=null){var o=fa(e),c=Vu(o,"xAxis"),d;if(c?d=ib(e,"yAxis",r,n):d=ib(e,"xAxis",t,n),d!=null){var{stackId:f}=l,p=uk(l);if(!(f==null||p==null)){var y=(s=d[f])===null||s===void 0?void 0:s.stackedData;return y==null?void 0:y.find(g=>g.key===p)}}}},U1e=Ct([fa,Zq,Jq,Qq,eH,B1e,Wb,R1e,tH],(e,t,r,n,a,s,l,o,c)=>{var{chartData:d,dataStartIndex:f,dataEndIndex:p}=l;if(!(c==null||e!=="horizontal"&&e!=="vertical"||t==null||r==null||n==null||a==null||n.length===0||a.length===0||o==null)){var{data:y}=c,g;if(y&&y.length>0?g=y:g=d==null?void 0:d.slice(f,p+1),g!=null){var N=void 0;return lpe({layout:e,xAxis:t,yAxis:r,xAxisTicks:n,yAxisTicks:a,dataStartIndex:f,areaSettings:c,stackedData:s,displayedData:g,chartBaseValue:N,bandSize:o})}}}),z1e=["id"],q1e=["activeDot","animationBegin","animationDuration","animationEasing","connectNulls","dot","fill","fillOpacity","hide","isAnimationActive","legendType","stroke","xAxisId","yAxisId"];function rH(e,t){if(e==null)return{};var r,n,a=H1e(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function H1e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function mI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function T0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?mI(Object(r),!0).forEach(function(n){$1e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function $1e(e,t,r){return(t=V1e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function V1e(e){var t=W1e(e,"string");return typeof t=="symbol"?t:t+""}function W1e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function R0(){return R0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},R0.apply(null,arguments)}function nw(e,t){return e&&e!=="none"?e:t}var K1e=e=>{var{dataKey:t,name:r,stroke:n,fill:a,legendType:s,hide:l}=e;return[{inactive:l,dataKey:t,type:s,color:nw(n,a),value:xf(r,t),payload:e}]};function G1e(e){var{dataKey:t,data:r,stroke:n,strokeWidth:a,fill:s,name:l,hide:o,unit:c}=e;return{dataDefinedOnItem:r,positions:void 0,settings:{stroke:n,strokeWidth:a,fill:s,dataKey:t,nameKey:void 0,name:xf(l,t),hide:o,type:e.tooltipType,color:nw(n,s),unit:c}}}var X1e=(e,t)=>{var r;if(T.isValidElement(e))r=T.cloneElement(e,t);else if(typeof e=="function")r=e(t);else{var n=Zn("recharts-area-dot",typeof e!="boolean"?e.className:"");r=T.createElement(dC,R0({},t,{className:n}))}return r};function Y1e(e,t){return e==null?!1:t?!0:e.length===1}function Z1e(e){var{clipPathId:t,points:r,props:n}=e,{needClip:a,dot:s,dataKey:l}=n;if(!Y1e(r,s))return null;var o=_k(s),c=Ao(n),d=TF(s),f=r.map((y,g)=>{var N=T0(T0(T0({key:"dot-".concat(g),r:3},c),d),{},{index:g,cx:y.x,cy:y.y,dataKey:l,value:y.value,payload:y.payload,points:r});return X1e(s,N)}),p={clipPath:a?"url(#clipPath-".concat(o?"":"dots-").concat(t,")"):void 0};return T.createElement(di,R0({className:"recharts-area-dots"},p),f)}function Q1e(e){var{showLabels:t,children:r,points:n}=e,a=n.map(s=>{var l={x:s.x,y:s.y,width:0,height:0};return T0(T0({},l),{},{value:s.value,payload:s.payload,parentViewBox:void 0,viewBox:l,fill:void 0})});return T.createElement(cC,{value:t?a:null},r)}function xI(e){var{points:t,baseLine:r,needClip:n,clipPathId:a,props:s}=e,{layout:l,type:o,stroke:c,connectNulls:d,isRange:f}=s,{id:p}=s,y=rH(s,z1e),g=Ao(y);return T.createElement(T.Fragment,null,(t==null?void 0:t.length)>1&&T.createElement(di,{clipPath:n?"url(#clipPath-".concat(a,")"):void 0},T.createElement(f1,R0({},g,{id:p,points:t,connectNulls:d,type:o,baseLine:r,layout:l,stroke:"none",className:"recharts-area-area"})),c!=="none"&&T.createElement(f1,R0({},g,{className:"recharts-area-curve",layout:l,type:o,connectNulls:d,fill:"none",points:t})),c!=="none"&&f&&T.createElement(f1,R0({},g,{className:"recharts-area-curve",layout:l,type:o,connectNulls:d,fill:"none",points:r}))),T.createElement(Z1e,{points:t,props:y,clipPathId:a}))}function J1e(e){var{alpha:t,baseLine:r,points:n,strokeWidth:a}=e,s=n[0].y,l=n[n.length-1].y;if(!Fi(s)||!Fi(l))return null;var o=t*Math.abs(s-l),c=Math.max(...n.map(d=>d.x||0));return Zr(r)?c=Math.max(r,c):r&&Array.isArray(r)&&r.length&&(c=Math.max(...r.map(d=>d.x||0),c)),Zr(c)?T.createElement("rect",{x:0,y:s<l?s:s-o,width:c+(a?parseInt("".concat(a),10):1),height:Math.floor(o)}):null}function epe(e){var{alpha:t,baseLine:r,points:n,strokeWidth:a}=e,s=n[0].x,l=n[n.length-1].x;if(!Fi(s)||!Fi(l))return null;var o=t*Math.abs(s-l),c=Math.max(...n.map(d=>d.y||0));return Zr(r)?c=Math.max(r,c):r&&Array.isArray(r)&&r.length&&(c=Math.max(...r.map(d=>d.y||0),c)),Zr(c)?T.createElement("rect",{x:s<l?s:s-o,y:0,width:o,height:Math.floor(c+(a?parseInt("".concat(a),10):1))}):null}function tpe(e){var{alpha:t,layout:r,points:n,baseLine:a,strokeWidth:s}=e;return r==="vertical"?T.createElement(J1e,{alpha:t,points:n,baseLine:a,strokeWidth:s}):T.createElement(epe,{alpha:t,points:n,baseLine:a,strokeWidth:s})}function rpe(e){var{needClip:t,clipPathId:r,props:n,previousPointsRef:a,previousBaselineRef:s}=e,{points:l,baseLine:o,isAnimationActive:c,animationBegin:d,animationDuration:f,animationEasing:p,onAnimationStart:y,onAnimationEnd:g}=n,N=rp(n,"recharts-area-"),[w,k]=T.useState(!1),S=!w,O=T.useCallback(()=>{typeof g=="function"&&g(),k(!1)},[g]),E=T.useCallback(()=>{typeof y=="function"&&y(),k(!0)},[y]),D=a.current,H=s.current;return T.createElement(Q1e,{showLabels:S,points:l},n.children,T.createElement(tp,{animationId:N,begin:d,duration:f,isActive:c,easing:p,onAnimationEnd:O,onAnimationStart:E,key:N},W=>{if(D){var R=D.length/l.length,z=W===1?l:l.map((Z,q)=>{var K=Math.floor(q*R);if(D[K]){var Q=D[K];return T0(T0({},Z),{},{x:ns(Q.x,Z.x,W),y:ns(Q.y,Z.y,W)})}return Z}),U;return Zr(o)?U=ns(H,o,W):As(o)||Tc(o)?U=ns(H,0,W):U=o.map((Z,q)=>{var K=Math.floor(q*R);if(Array.isArray(H)&&H[K]){var Q=H[K];return T0(T0({},Z),{},{x:ns(Q.x,Z.x,W),y:ns(Q.y,Z.y,W)})}return Z}),W>0&&(a.current=z,s.current=U),T.createElement(xI,{points:z,baseLine:U,needClip:t,clipPathId:r,props:n})}return W>0&&(a.current=l,s.current=o),T.createElement(di,null,c&&T.createElement("defs",null,T.createElement("clipPath",{id:"animationClipPath-".concat(r)},T.createElement(tpe,{alpha:W,points:l,baseLine:o,layout:n.layout,strokeWidth:n.strokeWidth}))),T.createElement(di,{clipPath:"url(#animationClipPath-".concat(r,")")},T.createElement(xI,{points:l,baseLine:o,needClip:t,clipPathId:r,props:n})))}),T.createElement(wk,{label:n.label}))}function npe(e){var{needClip:t,clipPathId:r,props:n}=e,a=T.useRef(null),s=T.useRef();return T.createElement(rpe,{needClip:t,clipPathId:r,props:n,previousPointsRef:a,previousBaselineRef:s})}class ape extends T.PureComponent{render(){var{hide:t,dot:r,points:n,className:a,top:s,left:l,needClip:o,xAxisId:c,yAxisId:d,width:f,height:p,id:y,baseLine:g}=this.props;if(t)return null;var N=Zn("recharts-area",a),w=y,{r:k,strokeWidth:S}=Gq(r),O=_k(r),E=k*2+S;return T.createElement(T.Fragment,null,T.createElement(di,{className:N},o&&T.createElement("defs",null,T.createElement(kC,{clipPathId:w,xAxisId:c,yAxisId:d}),!O&&T.createElement("clipPath",{id:"clipPath-dots-".concat(w)},T.createElement("rect",{x:l-E/2,y:s-E/2,width:f+E,height:p+E}))),T.createElement(npe,{needClip:o,clipPathId:w,props:this.props})),T.createElement(gS,{points:n,mainColor:nw(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot}),this.props.isRange&&Array.isArray(g)&&T.createElement(gS,{points:g,mainColor:nw(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot}))}}var nH={activeDot:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!1,fill:"#3182bd",fillOpacity:.6,hide:!1,isAnimationActive:!eh.isSsr,legendType:"line",stroke:"#3182bd",xAxisId:0,yAxisId:0};function spe(e){var t,r=Yi(e,nH),{activeDot:n,animationBegin:a,animationDuration:s,animationEasing:l,connectNulls:o,dot:c,fill:d,fillOpacity:f,hide:p,isAnimationActive:y,legendType:g,stroke:N,xAxisId:w,yAxisId:k}=r,S=rH(r,q1e),O=zb(),E=lq(),{needClip:D}=Ak(w,k),H=Ml(),{points:W,isRange:R,baseLine:z}=(t=Jr(re=>U1e(re,w,k,H,e.id)))!==null&&t!==void 0?t:{},U=Ck();if(O!=="horizontal"&&O!=="vertical"||U==null||E!=="AreaChart"&&E!=="ComposedChart")return null;var{height:Z,width:q,x:K,y:Q}=U;return!W||!W.length?null:T.createElement(ape,R0({},S,{activeDot:n,animationBegin:a,animationDuration:s,animationEasing:l,baseLine:z,connectNulls:o,dot:c,fill:d,fillOpacity:f,height:Z,hide:p,layout:O,isAnimationActive:y,isRange:R,legendType:g,needClip:D,points:W,stroke:N,width:q,left:K,top:Q,xAxisId:w,yAxisId:k}))}var ipe=(e,t,r,n,a)=>{var s=r??t;if(Zr(s))return s;var l=e==="horizontal"?a:n,o=l.scale.domain();if(l.type==="number"){var c=Math.max(o[0],o[1]),d=Math.min(o[0],o[1]);return s==="dataMin"?d:s==="dataMax"||c<0?c:Math.max(Math.min(o[0],o[1]),0)}return s==="dataMin"?o[0]:s==="dataMax"?o[1]:o[0]};function lpe(e){var{areaSettings:{connectNulls:t,baseValue:r,dataKey:n},stackedData:a,layout:s,chartBaseValue:l,xAxis:o,yAxis:c,displayedData:d,dataStartIndex:f,xAxisTicks:p,yAxisTicks:y,bandSize:g}=e,N=a&&a.length,w=ipe(s,l,r,o,c),k=s==="horizontal",S=!1,O=d.map((D,H)=>{var W;N?W=a[f+H]:(W=as(D,n),Array.isArray(W)?S=!0:W=[w,W]);var R=W[1]==null||N&&!t&&as(D,n)==null;return k?{x:Iy({axis:o,ticks:p,bandSize:g,entry:D,index:H}),y:R?null:c.scale(W[1]),value:W,payload:D}:{x:R?null:o.scale(W[1]),y:Iy({axis:c,ticks:y,bandSize:g,entry:D,index:H}),value:W,payload:D}}),E;return N||S?E=O.map(D=>{var H=Array.isArray(D.value)?D.value[0]:null;return k?{x:D.x,y:H!=null&&D.y!=null?c.scale(H):null,payload:D.payload}:{x:H!=null?o.scale(H):null,y:D.y,payload:D.payload}}):E=k?c.scale(w):o.scale(w),{points:O,baseLine:E,isRange:S}}function ope(e){var t=Yi(e,nH),r=Ml();return T.createElement(jk,{id:t.id,type:"area"},n=>T.createElement(T.Fragment,null,T.createElement(gC,{legendPayload:K1e(t)}),T.createElement(Sk,{fn:G1e,args:t}),T.createElement(bC,{type:"area",id:n,data:t.data,dataKey:t.dataKey,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,stackId:HB(t.stackId),hide:t.hide,barSize:void 0,baseValue:t.baseValue,isPanorama:r,connectNulls:t.connectNulls}),T.createElement(spe,R0({},t,{id:n}))))}var aH=T.memo(ope);aH.displayName="Area";var cpe=["dangerouslySetInnerHTML","ticks"],dpe=["id"],upe=["domain"],hpe=["domain"];function yS(){return yS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},yS.apply(null,arguments)}function aw(e,t){if(e==null)return{};var r,n,a=fpe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function fpe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function mpe(e){var t=zs();return T.useLayoutEffect(()=>(t(zfe(e)),()=>{t(qfe(e))}),[e,t]),null}var xpe=e=>{var{xAxisId:t,className:r}=e,n=Jr(Y6),a=Ml(),s="xAxis",l=Jr(k=>dp(k,s,t,a)),o=Jr(k=>Fz(k,s,t,a)),c=Jr(k=>Dz(k,t)),d=Jr(k=>Ede(k,t)),f=Jr(k=>xz(k,t));if(c==null||d==null||f==null)return null;var{dangerouslySetInnerHTML:p,ticks:y}=e,g=aw(e,cpe),{id:N}=f,w=aw(f,dpe);return T.createElement(jC,yS({},g,w,{scale:l,x:d.x,y:d.y,width:c.width,height:c.height,className:Zn("recharts-".concat(s," ").concat(s),r),viewBox:n,ticks:o}))},ppe={allowDataOverflow:mc.allowDataOverflow,allowDecimals:mc.allowDecimals,allowDuplicatedCategory:mc.allowDuplicatedCategory,height:mc.height,hide:!1,mirror:mc.mirror,orientation:mc.orientation,padding:mc.padding,reversed:mc.reversed,scale:mc.scale,tickCount:mc.tickCount,type:mc.type,xAxisId:0},gpe=e=>{var t,r,n,a,s,l=Yi(e,ppe);return T.createElement(T.Fragment,null,T.createElement(mpe,{interval:(t=l.interval)!==null&&t!==void 0?t:"preserveEnd",id:l.xAxisId,scale:l.scale,type:l.type,padding:l.padding,allowDataOverflow:l.allowDataOverflow,domain:l.domain,dataKey:l.dataKey,allowDuplicatedCategory:l.allowDuplicatedCategory,allowDecimals:l.allowDecimals,tickCount:l.tickCount,includeHidden:(r=l.includeHidden)!==null&&r!==void 0?r:!1,reversed:l.reversed,ticks:l.ticks,height:l.height,orientation:l.orientation,mirror:l.mirror,hide:l.hide,unit:l.unit,name:l.name,angle:(n=l.angle)!==null&&n!==void 0?n:0,minTickGap:(a=l.minTickGap)!==null&&a!==void 0?a:5,tick:(s=l.tick)!==null&&s!==void 0?s:!0,tickFormatter:l.tickFormatter}),T.createElement(xpe,l))},bpe=(e,t)=>{var{domain:r}=e,n=aw(e,upe),{domain:a}=t,s=aw(t,hpe);return V1(n,s)?Array.isArray(r)&&r.length===2&&Array.isArray(a)&&a.length===2?r[0]===a[0]&&r[1]===a[1]:V1({domain:r},{domain:a}):!1},Du=T.memo(gpe,bpe);Du.displayName="XAxis";var vpe=["dangerouslySetInnerHTML","ticks"],ype=["id"],wpe=["domain"],kpe=["domain"];function wS(){return wS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},wS.apply(null,arguments)}function sw(e,t){if(e==null)return{};var r,n,a=Npe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Npe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function _pe(e){var t=zs();return T.useLayoutEffect(()=>(t(Hfe(e)),()=>{t($fe(e))}),[e,t]),null}var Spe=e=>{var{yAxisId:t,className:r,width:n,label:a}=e,s=T.useRef(null),l=T.useRef(null),o=Jr(Y6),c=Ml(),d=zs(),f="yAxis",p=Jr(H=>dp(H,f,t,c)),y=Jr(H=>Mz(H,t)),g=Jr(H=>Ode(H,t)),N=Jr(H=>Fz(H,f,t,c)),w=Jr(H=>pz(H,t));if(T.useLayoutEffect(()=>{if(!(n!=="auto"||!y||oC(a)||T.isValidElement(a)||w==null)){var H=s.current;if(H){var W=H.getCalculatedWidth();Math.round(y.width)!==Math.round(W)&&d(Vfe({id:t,width:W}))}}},[N,y,d,a,t,n,w]),y==null||g==null||w==null)return null;var{dangerouslySetInnerHTML:k,ticks:S}=e,O=sw(e,vpe),{id:E}=w,D=sw(w,ype);return T.createElement(jC,wS({},O,D,{ref:s,labelRef:l,scale:p,x:g.x,y:g.y,tickTextProps:n==="auto"?{width:void 0}:{width:n},width:y.width,height:y.height,className:Zn("recharts-".concat(f," ").concat(f),r),viewBox:o,ticks:N}))},jpe={allowDataOverflow:xc.allowDataOverflow,allowDecimals:xc.allowDecimals,allowDuplicatedCategory:xc.allowDuplicatedCategory,hide:!1,mirror:xc.mirror,orientation:xc.orientation,padding:xc.padding,reversed:xc.reversed,scale:xc.scale,tickCount:xc.tickCount,type:xc.type,width:xc.width,yAxisId:0},Cpe=e=>{var t,r,n,a,s,l=Yi(e,jpe);return T.createElement(T.Fragment,null,T.createElement(_pe,{interval:(t=l.interval)!==null&&t!==void 0?t:"preserveEnd",id:l.yAxisId,scale:l.scale,type:l.type,domain:l.domain,allowDataOverflow:l.allowDataOverflow,dataKey:l.dataKey,allowDuplicatedCategory:l.allowDuplicatedCategory,allowDecimals:l.allowDecimals,tickCount:l.tickCount,padding:l.padding,includeHidden:(r=l.includeHidden)!==null&&r!==void 0?r:!1,reversed:l.reversed,ticks:l.ticks,width:l.width,orientation:l.orientation,mirror:l.mirror,hide:l.hide,unit:l.unit,name:l.name,angle:(n=l.angle)!==null&&n!==void 0?n:0,minTickGap:(a=l.minTickGap)!==null&&a!==void 0?a:5,tick:(s=l.tick)!==null&&s!==void 0?s:!0,tickFormatter:l.tickFormatter}),T.createElement(Spe,l))},Ape=(e,t)=>{var{domain:r}=e,n=sw(e,wpe),{domain:a}=t,s=sw(t,kpe);return V1(n,s)?Array.isArray(r)&&r.length===2&&Array.isArray(a)&&a.length===2?r[0]===a[0]&&r[1]===a[1]:V1({domain:r},{domain:a}):!1},Yd=T.memo(Cpe,Ape);Yd.displayName="YAxis";var Z3={exports:{}},Q3={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pI;function Epe(){if(pI)return Q3;pI=1;var e=X1();function t(c,d){return c===d&&(c!==0||1/c===1/d)||c!==c&&d!==d}var r=typeof Object.is=="function"?Object.is:t,n=e.useSyncExternalStore,a=e.useRef,s=e.useEffect,l=e.useMemo,o=e.useDebugValue;return Q3.useSyncExternalStoreWithSelector=function(c,d,f,p,y){var g=a(null);if(g.current===null){var N={hasValue:!1,value:null};g.current=N}else N=g.current;g=l(function(){function k(H){if(!S){if(S=!0,O=H,H=p(H),y!==void 0&&N.hasValue){var W=N.value;if(y(W,H))return E=W}return E=H}if(W=E,r(O,H))return W;var R=p(H);return y!==void 0&&y(W,R)?(O=H,W):(O=H,E=R)}var S=!1,O,E,D=f===void 0?null:f;return[function(){return k(d())},D===null?void 0:function(){return k(D())}]},[d,f,p,y]);var w=n(c,g[0],g[1]);return s(function(){N.hasValue=!0,N.value=w},[w]),o(w),w},Q3}var gI;function Tpe(){return gI||(gI=1,Z3.exports=Epe()),Z3.exports}Tpe();function Ope(e){e()}function Ppe(){let e=null,t=null;return{clear(){e=null,t=null},notify(){Ope(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=e;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const a=t={callback:r,next:null,prev:t};return a.prev?a.prev.next=a:e=a,function(){!n||e===null||(n=!1,a.next?a.next.prev=a.prev:t=a.prev,a.prev?a.prev.next=a.next:e=a.next)}}}}var bI={notify(){},get:()=>[]};function Ipe(e,t){let r,n=bI,a=0,s=!1;function l(w){f();const k=n.subscribe(w);let S=!1;return()=>{S||(S=!0,k(),p())}}function o(){n.notify()}function c(){N.onStateChange&&N.onStateChange()}function d(){return s}function f(){a++,r||(r=e.subscribe(c),n=Ppe())}function p(){a--,r&&a===0&&(r(),r=void 0,n.clear(),n=bI)}function y(){s||(s=!0,f())}function g(){s&&(s=!1,p())}const N={addNestedSub:l,notifyNestedSubs:o,handleChangeWrapper:c,isSubscribed:d,trySubscribe:y,tryUnsubscribe:g,getListeners:()=>n};return N}var Dpe=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Mpe=Dpe(),Lpe=()=>typeof navigator<"u"&&navigator.product==="ReactNative",Rpe=Lpe(),Fpe=()=>Mpe||Rpe?T.useLayoutEffect:T.useEffect,Bpe=Fpe(),J3=Symbol.for("react-redux-context"),eN=typeof globalThis<"u"?globalThis:{};function Upe(){if(!T.createContext)return{};const e=eN[J3]??(eN[J3]=new Map);let t=e.get(T.createContext);return t||(t=T.createContext(null),e.set(T.createContext,t)),t}var zpe=Upe();function qpe(e){const{children:t,context:r,serverState:n,store:a}=e,s=T.useMemo(()=>{const c=Ipe(a);return{store:a,subscription:c,getServerState:n?()=>n:void 0}},[a,n]),l=T.useMemo(()=>a.getState(),[a]);Bpe(()=>{const{subscription:c}=s;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),l!==a.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[s,l]);const o=r||zpe;return T.createElement(o.Provider,{value:s},t)}var Hpe=qpe,$pe=(e,t)=>t,AC=Ct([$pe,fa,hz,Qi,tq,ah,Mue,Xi],Uue),EC=e=>{var t=e.currentTarget.getBoundingClientRect(),r=t.width/e.currentTarget.offsetWidth,n=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/r),chartY:Math.round((e.clientY-t.top)/n)}},sH=fd("mouseClick"),iH=Bb();iH.startListening({actionCreator:sH,effect:(e,t)=>{var r=e.payload,n=AC(t.getState(),EC(r));(n==null?void 0:n.activeIndex)!=null&&t.dispatch($de({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var kS=fd("mouseMove"),lH=Bb();lH.startListening({actionCreator:kS,effect:(e,t)=>{var r=e.payload,n=t.getState(),a=Jj(n,n.tooltip.settings.shared),s=AC(n,EC(r));a==="axis"&&((s==null?void 0:s.activeIndex)!=null?t.dispatch(Wz({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate})):t.dispatch(Vz()))}});var vI={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},oH=Dc({name:"rootProps",initialState:vI,reducers:{updateOptions:(e,t)=>{var r;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(r=t.payload.barGap)!==null&&r!==void 0?r:vI.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className}}}),Vpe=oH.reducer,{updateOptions:Wpe}=oH.actions,cH=Dc({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:Kpe}=cH.actions,Gpe=cH.reducer,dH=fd("keyDown"),uH=fd("focus"),TC=Bb();TC.startListening({actionCreator:dH,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:a}=r.tooltip,s=e.payload;if(!(s!=="ArrowRight"&&s!=="ArrowLeft"&&s!=="Enter")){var l=Number(eC(a,hp(r))),o=ah(r);if(s==="Enter"){var c=Yy(r,"axis","hover",String(a.index));t.dispatch(hS({active:!a.active,activeIndex:a.index,activeDataKey:a.dataKey,activeCoordinate:c}));return}var d=Mde(r),f=d==="left-to-right"?1:-1,p=s==="ArrowRight"?1:-1,y=l+p*f;if(!(o==null||y>=o.length||y<0)){var g=Yy(r,"axis","hover",String(y));t.dispatch(hS({active:!0,activeIndex:y.toString(),activeDataKey:void 0,activeCoordinate:g}))}}}}});TC.startListening({actionCreator:uH,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:a}=r.tooltip;if(!a.active&&a.index==null){var s="0",l=Yy(r,"axis","hover",String(s));t.dispatch(hS({activeDataKey:void 0,active:!0,activeIndex:s,activeCoordinate:l}))}}}});var Jc=fd("externalEvent"),hH=Bb();hH.startListening({actionCreator:Jc,effect:(e,t)=>{if(e.payload.handler!=null){var r=t.getState(),n={activeCoordinate:jue(r),activeDataKey:sq(r),activeIndex:af(r),activeLabel:aq(r),activeTooltipIndex:af(r),isTooltipActive:Cue(r)};e.payload.handler(n,e.payload.reactEvent)}}});var Xpe=Ct([up],e=>e.tooltipItemPayloads),Ype=Ct([Xpe,Jb,(e,t,r)=>t,(e,t,r)=>r],(e,t,r,n)=>{var a=e.find(o=>o.settings.dataKey===n);if(a!=null){var{positions:s}=a;if(s!=null){var l=t(s,r);return l}}}),fH=fd("touchMove"),mH=Bb();mH.startListening({actionCreator:fH,effect:(e,t)=>{var r=e.payload,n=t.getState(),a=Jj(n,n.tooltip.settings.shared);if(a==="axis"){var s=AC(n,EC({clientX:r.touches[0].clientX,clientY:r.touches[0].clientY,currentTarget:r.currentTarget}));(s==null?void 0:s.activeIndex)!=null&&t.dispatch(Wz({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate}))}else if(a==="item"){var l,o=r.touches[0],c=document.elementFromPoint(o.clientX,o.clientY);if(!c||!c.getAttribute)return;var d=c.getAttribute(VB),f=(l=c.getAttribute(WB))!==null&&l!==void 0?l:void 0,p=Ype(t.getState(),d,f);t.dispatch($z({activeDataKey:f,activeIndex:d,activeCoordinate:p}))}}});var Zpe=mB({brush:hxe,cartesianAxis:Wfe,chartData:r0e,errorBars:ume,graphicalItems:ufe,layout:xae,legend:yse,options:Zue,polarAxis:She,polarOptions:Gpe,referenceElements:vxe,rootProps:Vpe,tooltip:Vde}),Qpe=function(t){return Une({reducer:Zpe,preloadedState:t,middleware:r=>r({serializableCheck:!1}).concat([iH.middleware,lH.middleware,TC.middleware,hH.middleware,mH.middleware]),enhancers:r=>{var n=r;return typeof r=="function"&&(n=r()),n.concat(jB({type:"raf"}))},devTools:eh.devToolsEnabled})};function xH(e){var{preloadedState:t,children:r,reduxStoreName:n}=e,a=Ml(),s=T.useRef(null);if(a)return r;s.current==null&&(s.current=Qpe(t));var l=$6;return T.createElement(Hpe,{context:l,store:s.current},r)}function pH(e){var{layout:t,margin:r}=e,n=zs(),a=Ml();return T.useEffect(()=>{a||(n(hae(t)),n(uae(r)))},[n,a,t,r]),null}function gH(e){var t=zs();return T.useEffect(()=>{t(Wpe(e))},[t,e]),null}var Jpe=["children"];function ege(e,t){if(e==null)return{};var r,n,a=tge(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function tge(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function iw(){return iw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},iw.apply(null,arguments)}var rge={width:"100%",height:"100%",display:"block"},nge=T.forwardRef((e,t)=>{var r=Q6(),n=J6(),a=eU();if(!U1(r)||!U1(n))return null;var{children:s,otherAttributes:l,title:o,desc:c}=e,d,f;return typeof l.tabIndex=="number"?d=l.tabIndex:d=a?0:void 0,typeof l.role=="string"?f=l.role:f=a?"application":void 0,T.createElement(P6,iw({},l,{title:o,desc:c,role:f,tabIndex:d,width:r,height:n,style:rge,ref:t}),s)}),age=e=>{var{children:t}=e,r=Jr(Jw);if(!r)return null;var{width:n,height:a,y:s,x:l}=r;return T.createElement(P6,{width:n,height:a,x:l,y:s},t)},yI=T.forwardRef((e,t)=>{var{children:r}=e,n=ege(e,Jpe),a=Ml();return a?T.createElement(age,null,r):T.createElement(nge,iw({ref:t},n),r)});function sge(){var e=zs(),[t,r]=T.useState(null),n=Jr(Hae);return T.useEffect(()=>{if(t!=null){var a=t.getBoundingClientRect(),s=a.width/t.offsetWidth;Fi(s)&&s!==n&&e(mae(s))}},[t,e,n]),r}function wI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ige(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?wI(Object(r),!0).forEach(function(n){lge(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function lge(e,t,r){return(t=oge(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oge(e){var t=cge(e,"string");return typeof t=="symbol"?t:t+""}function cge(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Fm(){return Fm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Fm.apply(null,arguments)}var dge=()=>(u0e(),null);function lw(e){if(typeof e=="number")return e;if(typeof e=="string"){var t=parseFloat(e);if(!Number.isNaN(t))return t}return 0}var uge=T.forwardRef((e,t)=>{var r,n,a=T.useRef(null),[s,l]=T.useState({containerWidth:lw((r=e.style)===null||r===void 0?void 0:r.width),containerHeight:lw((n=e.style)===null||n===void 0?void 0:n.height)}),o=T.useCallback((d,f)=>{l(p=>{var y=Math.round(d),g=Math.round(f);return p.containerWidth===y&&p.containerHeight===g?p:{containerWidth:y,containerHeight:g}})},[]),c=T.useCallback(d=>{if(typeof t=="function"&&t(d),d!=null){var{width:f,height:p}=d.getBoundingClientRect();o(f,p);var y=N=>{var{width:w,height:k}=N[0].contentRect;o(w,k)},g=new ResizeObserver(y);g.observe(d),a.current=g}},[t,o]);return T.useEffect(()=>()=>{var d=a.current;d!=null&&d.disconnect()},[o]),T.createElement(T.Fragment,null,T.createElement(tk,{width:s.containerWidth,height:s.containerHeight}),T.createElement("div",Fm({ref:c},e)))}),hge=T.forwardRef((e,t)=>{var{width:r,height:n}=e,[a,s]=T.useState({containerWidth:lw(r),containerHeight:lw(n)}),l=T.useCallback((c,d)=>{s(f=>{var p=Math.round(c),y=Math.round(d);return f.containerWidth===p&&f.containerHeight===y?f:{containerWidth:p,containerHeight:y}})},[]),o=T.useCallback(c=>{if(typeof t=="function"&&t(c),c!=null){var{width:d,height:f}=c.getBoundingClientRect();l(d,f)}},[t,l]);return T.createElement(T.Fragment,null,T.createElement(tk,{width:a.containerWidth,height:a.containerHeight}),T.createElement("div",Fm({ref:o},e)))}),fge=T.forwardRef((e,t)=>{var{width:r,height:n}=e;return T.createElement(T.Fragment,null,T.createElement(tk,{width:r,height:n}),T.createElement("div",Fm({ref:t},e)))}),mge=T.forwardRef((e,t)=>{var{width:r,height:n}=e;return V0(r)||V0(n)?T.createElement(hge,Fm({},e,{ref:t})):T.createElement(fge,Fm({},e,{ref:t}))});function xge(e){return e===!0?uge:mge}var pge=T.forwardRef((e,t)=>{var{children:r,className:n,height:a,onClick:s,onContextMenu:l,onDoubleClick:o,onMouseDown:c,onMouseEnter:d,onMouseLeave:f,onMouseMove:p,onMouseUp:y,onTouchEnd:g,onTouchMove:N,onTouchStart:w,style:k,width:S,responsive:O,dispatchTouchEvents:E=!0}=e,D=T.useRef(null),H=zs(),[W,R]=T.useState(null),[z,U]=T.useState(null),Z=sge(),q=Z6(),K=(q==null?void 0:q.width)>0?q.width:S,Q=(q==null?void 0:q.height)>0?q.height:a,re=T.useCallback(se=>{Z(se),typeof t=="function"&&t(se),R(se),U(se),se!=null&&(D.current=se)},[Z,t,R,U]),ae=T.useCallback(se=>{H(sH(se)),H(Jc({handler:s,reactEvent:se}))},[H,s]),de=T.useCallback(se=>{H(kS(se)),H(Jc({handler:d,reactEvent:se}))},[H,d]),he=T.useCallback(se=>{H(Vz()),H(Jc({handler:f,reactEvent:se}))},[H,f]),Se=T.useCallback(se=>{H(kS(se)),H(Jc({handler:p,reactEvent:se}))},[H,p]),ke=T.useCallback(()=>{H(uH())},[H]),Le=T.useCallback(se=>{H(dH(se.key))},[H]),fe=T.useCallback(se=>{H(Jc({handler:l,reactEvent:se}))},[H,l]),F=T.useCallback(se=>{H(Jc({handler:o,reactEvent:se}))},[H,o]),te=T.useCallback(se=>{H(Jc({handler:c,reactEvent:se}))},[H,c]),Y=T.useCallback(se=>{H(Jc({handler:y,reactEvent:se}))},[H,y]),ne=T.useCallback(se=>{H(Jc({handler:w,reactEvent:se}))},[H,w]),ee=T.useCallback(se=>{E&&H(fH(se)),H(Jc({handler:N,reactEvent:se}))},[H,E,N]),Ce=T.useCallback(se=>{H(Jc({handler:g,reactEvent:se}))},[H,g]),me=xge(O);return T.createElement(hq.Provider,{value:W},T.createElement(OF.Provider,{value:z},T.createElement(me,{width:K??(k==null?void 0:k.width),height:Q??(k==null?void 0:k.height),className:Zn("recharts-wrapper",n),style:ige({position:"relative",cursor:"default",width:K,height:Q},k),onClick:ae,onContextMenu:fe,onDoubleClick:F,onFocus:ke,onKeyDown:Le,onMouseDown:te,onMouseEnter:de,onMouseLeave:he,onMouseMove:Se,onMouseUp:Y,onTouchEnd:Ce,onTouchMove:ee,onTouchStart:ne,ref:re},T.createElement(dge,null),r)))}),gge=["width","height","responsive","children","className","style","compact","title","desc"];function bge(e,t){if(e==null)return{};var r,n,a=vge(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function vge(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var bH=T.forwardRef((e,t)=>{var{width:r,height:n,responsive:a,children:s,className:l,style:o,compact:c,title:d,desc:f}=e,p=bge(e,gge),y=Ao(p);return c?T.createElement(T.Fragment,null,T.createElement(tk,{width:r,height:n}),T.createElement(yI,{otherAttributes:y,title:d,desc:f},s)):T.createElement(pge,{className:l,style:o,width:r,height:n,responsive:a,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},T.createElement(yI,{otherAttributes:y,title:d,desc:f,ref:t},T.createElement(wxe,null,s)))});function NS(){return NS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},NS.apply(null,arguments)}var yge={top:5,right:5,bottom:5,left:5},wge={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:yge,reverseStackOrder:!1,syncMethod:"index",responsive:!1},Ek=T.forwardRef(function(t,r){var n,a=Yi(t.categoricalChartProps,wge),{chartName:s,defaultTooltipEventType:l,validateTooltipEventTypes:o,tooltipPayloadSearcher:c,categoricalChartProps:d}=t,f={chartName:s,defaultTooltipEventType:l,validateTooltipEventTypes:o,tooltipPayloadSearcher:c,eventEmitter:void 0};return T.createElement(xH,{preloadedState:{options:f},reduxStoreName:(n=d.id)!==null&&n!==void 0?n:s},T.createElement(Bq,{chartData:d.data}),T.createElement(pH,{layout:a.layout,margin:a.margin}),T.createElement(gH,{accessibilityLayer:a.accessibilityLayer,barCategoryGap:a.barCategoryGap,maxBarSize:a.maxBarSize,stackOffset:a.stackOffset,barGap:a.barGap,barSize:a.barSize,syncId:a.syncId,syncMethod:a.syncMethod,className:a.className}),T.createElement(bH,NS({},a,{ref:r})))}),kge=["axis"],OC=T.forwardRef((e,t)=>T.createElement(Ek,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:kge,tooltipPayloadSearcher:tv,categoricalChartProps:e,ref:t})),Nge=["axis","item"],ny=T.forwardRef((e,t)=>T.createElement(Ek,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Nge,tooltipPayloadSearcher:tv,categoricalChartProps:e,ref:t}));function _ge(e){var t=zs();return T.useEffect(()=>{t(Kpe(e))},[t,e]),null}var Sge=["layout"];function _S(){return _S=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_S.apply(null,arguments)}function jge(e,t){if(e==null)return{};var r,n,a=Cge(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Cge(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Age={top:5,right:5,bottom:5,left:5},Ege={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:Age,reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1},Tge=T.forwardRef(function(t,r){var n,a=Yi(t.categoricalChartProps,Ege),{layout:s}=a,l=jge(a,Sge),{chartName:o,defaultTooltipEventType:c,validateTooltipEventTypes:d,tooltipPayloadSearcher:f}=t,p={chartName:o,defaultTooltipEventType:c,validateTooltipEventTypes:d,tooltipPayloadSearcher:f,eventEmitter:void 0};return T.createElement(xH,{preloadedState:{options:p},reduxStoreName:(n=a.id)!==null&&n!==void 0?n:o},T.createElement(Bq,{chartData:a.data}),T.createElement(pH,{layout:s,margin:a.margin}),T.createElement(gH,{accessibilityLayer:a.accessibilityLayer,barCategoryGap:a.barCategoryGap,maxBarSize:a.maxBarSize,stackOffset:a.stackOffset,barGap:a.barGap,barSize:a.barSize,syncId:a.syncId,syncMethod:a.syncMethod,className:a.className}),T.createElement(_ge,{cx:a.cx,cy:a.cy,startAngle:a.startAngle,endAngle:a.endAngle,innerRadius:a.innerRadius,outerRadius:a.outerRadius}),T.createElement(bH,_S({},l,{ref:r})))}),Oge=["item"],Pge={layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},vH=T.forwardRef((e,t)=>{var r=Yi(e,Pge);return T.createElement(Tge,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:Oge,tooltipPayloadSearcher:tv,categoricalChartProps:r,ref:t})}),Ige=["axis"],Dge=T.forwardRef((e,t)=>T.createElement(Ek,{chartName:"AreaChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Ige,tooltipPayloadSearcher:tv,categoricalChartProps:e,ref:t})),Mge=["axis"],Lge=T.forwardRef((e,t)=>T.createElement(Ek,{chartName:"ComposedChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Mge,tooltipPayloadSearcher:tv,categoricalChartProps:e,ref:t}));const Rge={blue:{card:"bg-white dark:bg-slate-800 border border-blue-100 dark:border-blue-900/40",icon:"bg-blue-500/15 text-blue-600 dark:text-blue-400",accent:"text-blue-600 dark:text-blue-400"},emerald:{card:"bg-white dark:bg-slate-800 border border-emerald-100 dark:border-emerald-900/40",icon:"bg-emerald-500/15 text-emerald-600 dark:text-emerald-400",accent:"text-emerald-600 dark:text-emerald-400"},amber:{card:"bg-white dark:bg-slate-800 border border-amber-100 dark:border-amber-900/40",icon:"bg-amber-500/15 text-amber-600 dark:text-amber-400",accent:"text-amber-600 dark:text-amber-400"},violet:{card:"bg-white dark:bg-slate-800 border border-violet-100 dark:border-violet-900/40",icon:"bg-violet-500/15 text-violet-600 dark:text-violet-400",accent:"text-violet-600 dark:text-violet-400"}},Wx=({title:e,value:t,subtitle:r,colorKey:n,icon:a})=>{const s=Rge[n];return i.jsxs("div",{className:`${s.card} rounded-xl p-5 shadow-sm hover:shadow-md transition-shadow`,children:[i.jsxs("div",{className:"flex items-start justify-between mb-3",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm font-medium mb-1",children:e}),i.jsx("h3",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:t})]}),i.jsx("div",{className:`w-10 h-10 rounded-lg ${s.icon} flex items-center justify-center`,children:a})]}),i.jsx("p",{className:`text-sm ${s.accent}`,children:r})]})},dg=({icon:e,label:t,count:r,color:n})=>{const a={blue:"text-blue-600 dark:text-blue-400",green:"text-green-600 dark:text-green-400",amber:"text-amber-600 dark:text-amber-400",slate:"text-slate-600 dark:text-slate-400",red:"text-red-600 dark:text-red-400"};return i.jsxs(Bu,{to:"/service",className:"flex items-center justify-between p-3 bg-slate-50 dark:bg-slate-700/50 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 transition group",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:a[n],children:e}),i.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-200",children:t})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-lg font-bold text-slate-900 dark:text-white",children:r}),i.jsx(XJ,{className:"w-4 h-4 text-slate-400 group-hover:text-blue-500 transition"})]})]})},kI={purple:{text:"text-purple-600 dark:text-purple-400",bg:"bg-purple-50 dark:bg-purple-900/20"},orange:{text:"text-orange-600 dark:text-orange-400",bg:"bg-orange-50 dark:bg-orange-900/20"},emerald:{text:"text-emerald-600 dark:text-emerald-400",bg:"bg-emerald-50 dark:bg-emerald-900/20"},cyan:{text:"text-cyan-600 dark:text-cyan-400",bg:"bg-cyan-50 dark:bg-cyan-900/20"},blue:{text:"text-blue-600 dark:text-blue-400",bg:"bg-blue-50 dark:bg-blue-900/20"},amber:{text:"text-amber-600 dark:text-amber-400",bg:"bg-amber-50 dark:bg-amber-900/20"},rose:{text:"text-rose-600 dark:text-rose-400",bg:"bg-rose-50 dark:bg-rose-900/20"},violet:{text:"text-violet-600 dark:text-violet-400",bg:"bg-violet-50 dark:bg-violet-900/20"},slate:{text:"text-slate-600 dark:text-slate-400",bg:"bg-slate-50 dark:bg-slate-800"}},Zc=({to:e,icon:t,label:r,color:n,labelClassName:a})=>{const s=kI[n]||kI.purple;return i.jsxs(Bu,{to:e,className:"flex flex-col items-center justify-center gap-2 p-2 rounded-xl hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-all duration-200 group",children:[i.jsx("div",{className:`w-12 h-12 rounded-2xl ${s.bg} ${s.text} flex items-center justify-center shadow-sm group-hover:scale-110 transition-transform duration-200`,children:t}),i.jsx("span",{className:`text-[11px] font-medium text-center leading-tight text-slate-700 dark:text-slate-300 ${a||""}`,children:r})]})},Fge=()=>{var Le,fe;const{profile:e}=Ic(),{data:t=[],isLoading:r}=Mb(),{data:n=[],isLoading:a}=mf(),{data:s=[],isLoading:l}=_F(),{data:o=[],isLoading:c}=jF(),{data:d=[],isLoading:f}=Qee(),{data:p=[],isLoading:y}=T6(),{data:g=[],isLoading:N}=CF(),{data:w=[],isLoading:k}=Zee(),{currentBranchId:S}=Ua(),O=r||a||l||c||f||y||N||k,[E,D]=T.useState(!1),H=T.useMemo(()=>new Date().toISOString().slice(0,10),[]),W=T.useMemo(()=>n.reduce((F,te)=>{var ne;const Y=((ne=te.stock)==null?void 0:ne[S])||0;return F+Y},0),[n,S]),R=T.useMemo(()=>n.reduce((F,te)=>{var ee,Ce;const Y=((ee=te.stock)==null?void 0:ee[S])||0,ne=((Ce=te.retailPrice)==null?void 0:Ce[S])||0;return F+Y*ne},0),[n,S]),z=()=>{gte(),window.location.reload()},U=()=>{confirm("Bn c chc mun xa ton b d liu demo khng?")&&(bte(),window.location.reload())},Z=T.useMemo(()=>{const F=t.filter(ee=>ee.date.slice(0,10)===H),te=F.reduce((ee,Ce)=>ee+Ce.total,0),Y=F.reduce((ee,Ce)=>{const me=Ce.items.reduce((se,je)=>se+(je.costPrice||0)*je.quantity,0);return ee+(Ce.total-me)},0),ne=new Set(F.map(ee=>ee.customer.phone||ee.customer.name)).size;return{revenue:te,profit:Y,customerCount:ne,orderCount:F.length}},[t,H]),q=T.useMemo(()=>{const F=[];for(let te=6;te>=0;te--){const Y=new Date;Y.setDate(Y.getDate()-te);const ne=Y.toISOString().slice(0,10),Ce=t.filter(se=>se.date.slice(0,10)===ne).reduce((se,je)=>se+je.total,0),me=s.filter(se=>se.type==="expense"&&se.date.slice(0,10)===ne).reduce((se,je)=>se+je.amount,0);F.push({date:Y.toLocaleDateString("vi-VN",{day:"2-digit",month:"2-digit"}),revenue:Ce,expense:me,profit:Ce-me})}return F},[t,s]),K=T.useMemo(()=>{const F=s.filter(Y=>Y.type==="income").reduce((Y,ne)=>Y+ne.amount,0),te=s.filter(Y=>Y.type==="expense").reduce((Y,ne)=>Y+ne.amount,0);return[{name:"Thu",value:F,color:"#10b981"},{name:"Chi",value:te,color:"#ef4444"}]},[s]),Q=T.useMemo(()=>{const F={};return t.forEach(te=>{te.items.forEach(Y=>{F[Y.partId]||(F[Y.partId]={name:Y.partName,quantity:0}),F[Y.partId].quantity+=Y.quantity})}),Object.values(F).sort((te,Y)=>Y.quantity-te.quantity).slice(0,5)},[t]),re=((Le=d.find(F=>F.id==="cash"))==null?void 0:Le.balance[S])||0,ae=((fe=d.find(F=>F.id==="bank"))==null?void 0:fe.balance[S])||0,de=T.useMemo(()=>{const F=(w||[]).filter(Ce=>Ce.status==="Tip nhn").length,te=(w||[]).filter(Ce=>Ce.status==="ang sa").length,Y=(w||[]).filter(Ce=>Ce.status===" sa xong").length,ne=(w||[]).filter(Ce=>Ce.status==="Tr my").length,ee=(w||[]).filter(Ce=>Ce.status===" hy").length;return{newOrders:F,inProgress:te,completed:Y,cancelled:ne,notRepairable:ee}},[w]),he=T.useMemo(()=>{const F=[],te=n.filter(ne=>(ne.stock[S]||0)<10);te.length>0&&F.push({type:"Tn kho thp",message:`${te.length} sn phm sp ht hng`,color:"text-orange-600 dark:text-orange-400"});const Y=g.filter(ne=>{const ee=Math.ceil((new Date(ne.endDate).getTime()-Date.now())/864e5);return ee<=30&&ee>0&&ne.status==="active"});return Y.length>0&&F.push({type:"N n hn",message:`${Y.length} khon vay sp n hn`,color:"text-red-600 dark:text-red-400"}),re+ae<1e7&&F.push({type:"S d thp",message:"S d ti khon di 10 triu",color:"text-amber-600 dark:text-amber-400"}),F},[n,g,re,ae,S]),Se=T.useMemo(()=>{const F={};return t.forEach(te=>{const Y=te.customer.phone||te.customer.name;F[Y]||(F[Y]={name:te.customer.name,phone:te.customer.phone,total:0}),F[Y].total+=te.total}),Object.values(F).sort((te,Y)=>Y.total-te.total).slice(0,10)},[t]),ke=T.useMemo(()=>{const F=[],te=new Date;for(let Y=2;Y>=0;Y--){const ne=new Date(te.getFullYear(),te.getMonth()-Y,1),ee=ne.toISOString().slice(0,7),Ce=ne.toLocaleDateString("vi-VN",{month:"short",year:"numeric"}),me=t.filter(be=>be.date.startsWith(ee)),se=me.reduce((be,ie)=>be+ie.total,0),je=me.length;F.push({month:Ce,revenue:se,orders:je})}return F},[t]);return O?i.jsx("div",{className:"flex items-center justify-center h-96",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):i.jsxs("div",{className:"space-y-4 md:space-y-6",children:[i.jsx("div",{className:"md:hidden bg-gradient-to-r from-blue-600 to-violet-600 dark:from-blue-700 dark:to-violet-800 rounded-2xl p-4 md:p-6 text-white shadow-lg",children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("h1",{className:"text-lg md:text-xl font-semibold mb-1",children:["Xin cho, @",(e==null?void 0:e.full_name)||(e==null?void 0:e.email)||"Ngi dng"," ",""]}),i.jsx("p",{className:"text-sm md:text-base text-blue-100 dark:text-violet-100",children:new Date().toLocaleDateString("vi-VN",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),i.jsxs("div",{className:"mt-4 flex flex-wrap gap-3",children:[i.jsxs("div",{className:"bg-white/20 backdrop-blur-sm rounded-lg px-3 py-2 flex items-center gap-2",children:[i.jsx(dee,{className:"w-4 h-4"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs opacity-90",children:"Tin mt"}),i.jsx("p",{className:"text-sm font-semibold",children:Ie(re)})]})]}),i.jsxs("div",{className:"bg-white/20 backdrop-blur-sm rounded-lg px-3 py-2 flex items-center gap-2",children:[i.jsx(tf,{className:"w-4 h-4"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs opacity-90",children:"Qun l"}),i.jsx("p",{className:"text-sm font-semibold",children:p.filter(F=>F.status==="active").length})]})]})]})]}),i.jsx(ZJ,{className:"w-6 h-6 md:w-7 md:h-7 opacity-80 hover:opacity-100 cursor-pointer transition"})]})}),i.jsxs("div",{className:"md:hidden bg-white dark:bg-slate-800 rounded-xl p-4 md:p-5 shadow-sm border border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h2",{className:"text-base md:text-lg font-bold text-slate-900 dark:text-white",children:"Bo co"}),i.jsxs("select",{className:"text-sm bg-slate-50 dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg px-3 py-1.5 text-slate-700 dark:text-slate-200 focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[i.jsx("option",{children:"Thng ny"}),i.jsx("option",{children:"Hm nay"}),i.jsx("option",{children:"Tun ny"}),i.jsx("option",{children:"Nm nay"})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-3 md:gap-4",children:[i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 rounded-lg p-3 md:p-4",children:[i.jsx("p",{className:"text-xs md:text-sm text-slate-600 dark:text-slate-400 mb-1",children:"Doanh thu"}),i.jsx("p",{className:"text-lg md:text-2xl font-bold text-blue-600 dark:text-blue-400",children:Ie(Z.revenue)})]}),i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 rounded-lg p-3 md:p-4",children:[i.jsx("p",{className:"text-xs md:text-sm text-slate-600 dark:text-slate-400 mb-1",children:"Li nhun"}),i.jsx("p",{className:`text-lg md:text-2xl font-bold ${Z.profit>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:Ie(Z.profit)})]})]})]}),i.jsxs("div",{className:"md:hidden bg-white dark:bg-slate-800 rounded-xl p-4 md:p-5 shadow-sm border border-slate-200 dark:border-slate-700",children:[i.jsx("h3",{className:"text-sm md:text-base font-semibold text-slate-900 dark:text-white mb-3",children:"Trng thi phiu sa cha"}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(dg,{icon:i.jsx(Zf,{className:"w-5 h-5"}),label:"Bin nhn mi",count:de.newOrders,color:"blue"}),i.jsx(dg,{icon:i.jsx(YT,{className:"w-5 h-5"}),label:" sa xong",count:de.completed,color:"green"}),i.jsx(dg,{icon:i.jsx(vy,{className:"w-5 h-5"}),label:"ang sa",count:de.inProgress,color:"amber"}),i.jsx(dg,{icon:i.jsx(see,{className:"w-5 h-5"}),label:" hy",count:de.cancelled,color:"slate"}),i.jsx(dg,{icon:i.jsx(hF,{className:"w-5 h-5"}),label:"Khng sa c",count:de.notRepairable,color:"red"})]})]}),i.jsxs("div",{className:"md:hidden bg-white dark:bg-slate-800 rounded-xl p-4 md:p-5 shadow-sm border border-slate-200 dark:border-slate-700",children:[i.jsx("h3",{className:"text-sm md:text-base font-semibold text-slate-900 dark:text-white mb-4",children:"Truy cp nhanh"}),i.jsxs("div",{className:"grid grid-cols-4 gap-3 md:gap-4",children:[i.jsx(Zc,{to:"/sales",icon:i.jsx(Qf,{className:"w-6 h-6 md:w-7 md:h-7"}),label:"Bn hng",color:"emerald"}),i.jsx(Zc,{to:"/service",icon:i.jsx(Cm,{className:"w-6 h-6 md:w-7 md:h-7"}),label:"Sa cha",color:"blue"}),i.jsx(Zc,{to:"/inventory",icon:i.jsx(gl,{className:"w-6 h-6 md:w-7 md:h-7"}),label:"Kho hng",color:"orange"}),i.jsx(Zc,{to:"/customers",icon:i.jsx(tf,{className:"w-6 h-6 md:w-7 md:h-7"}),label:"Khch hng",color:"cyan"}),i.jsx(Zc,{to:"/finance",icon:i.jsx(Wg,{className:"w-6 h-6 md:w-7 md:h-7"}),label:"Ti chnh",color:"violet"}),i.jsx(Zc,{to:"/debt",icon:i.jsx(Vg,{className:"w-6 h-6 md:w-7 md:h-7"}),label:"Cng n",color:"rose"}),i.jsx(Zc,{to:"/cashbook",icon:i.jsx(hm,{className:"w-6 h-6 md:w-7 md:h-7"}),label:"S qu",color:"amber"}),i.jsx(Zc,{to:"/reports",icon:i.jsx(dd,{className:"w-6 h-6 md:w-7 md:h-7"}),label:"Bo co",color:"slate"}),i.jsx(Zc,{to:"/employees",icon:i.jsx(jm,{className:"w-6 h-6 md:w-7 md:h-7"}),label:"Nhn vin",color:"purple"}),i.jsx(Zc,{to:"/categories",icon:i.jsx(mF,{className:"w-6 h-6 md:w-7 md:h-7"}),label:"Danh mc",color:"slate"}),i.jsx(Zc,{to:"/lookup",icon:i.jsx(Ou,{className:"w-6 h-6 md:w-7 md:h-7"}),label:"Tra cu",color:"slate"}),i.jsx(Zc,{to:"/settings",icon:i.jsx(Gg,{className:"w-6 h-6 md:w-7 md:h-7"}),label:"Ci t",color:"slate"})]})]}),i.jsxs("div",{className:"md:hidden bg-white dark:bg-slate-800 rounded-xl p-4 md:p-5 shadow-sm border border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h3",{className:"text-sm md:text-base font-semibold text-slate-900 dark:text-white",children:"Bin nhn"}),i.jsx("div",{className:"flex items-center gap-2 text-xs text-slate-600 dark:text-slate-400",children:i.jsx("span",{children:"Sa cha / Bo hnh / Dng mi"})})]}),i.jsx(Kd,{width:"100%",height:200,children:i.jsxs(ny,{data:[{name:"Cha sa (0)",value:0},{name:"ang sa (0)",value:0},{name:"Sa xong (0)",value:0}],children:[i.jsx(Iu,{strokeDasharray:"3 3",stroke:"#e2e8f0"}),i.jsx(Du,{dataKey:"name",tick:{fontSize:11},stroke:"#94a3b8"}),i.jsx(Yd,{tick:{fontSize:11},stroke:"#94a3b8"}),i.jsx(Xd,{}),i.jsx(Yh,{dataKey:"value",fill:"#8b5cf6",radius:[6,6,0,0]})]})})]}),i.jsxs("div",{className:"md:hidden grid grid-cols-3 gap-3",children:[i.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-xl p-4 border border-blue-200 dark:border-blue-800",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("h4",{className:"text-sm font-semibold text-blue-900 dark:text-blue-100",children:"Cha sa"}),i.jsx(vy,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})]}),i.jsx("p",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400",children:"0"}),i.jsxs("div",{className:"mt-2 text-xs text-blue-700 dark:text-blue-300 space-y-0.5",children:[i.jsx("p",{children:"C gi: 0"}),i.jsx("p",{children:"BH: 0"}),i.jsx("p",{children:"Dng: 0"})]})]}),i.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/20 rounded-xl p-4 border border-amber-200 dark:border-amber-800",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("h4",{className:"text-sm font-semibold text-amber-900 dark:text-amber-100",children:"ang sa"}),i.jsx(Cm,{className:"w-5 h-5 text-amber-600 dark:text-amber-400"})]}),i.jsx("p",{className:"text-3xl font-bold text-amber-600 dark:text-amber-400",children:"0"}),i.jsxs("div",{className:"mt-2 text-xs text-amber-700 dark:text-amber-300 space-y-0.5",children:[i.jsx("p",{children:"C gi: 0"}),i.jsx("p",{children:"BH: 0"}),i.jsx("p",{children:"Dng: 0"})]})]}),i.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-xl p-4 border border-green-200 dark:border-green-800",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("h4",{className:"text-sm font-semibold text-green-900 dark:text-green-100",children:"Sa xong"}),i.jsx(YT,{className:"w-5 h-5 text-green-600 dark:text-green-400"})]}),i.jsx("p",{className:"text-3xl font-bold text-green-600 dark:text-green-400",children:"0"}),i.jsxs("div",{className:"mt-2 text-xs text-green-700 dark:text-green-300 space-y-0.5",children:[i.jsx("p",{children:"C gi: 0"}),i.jsx("p",{children:"BH: 0"}),i.jsx("p",{children:"Dng: 0"})]})]})]}),i.jsxs("div",{className:"hidden",children:[E&&i.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-slate-800 dark:to-slate-700 border-2 border-blue-200 dark:border-blue-800 rounded-xl p-6 shadow-lg",children:i.jsxs("div",{className:"flex items-start justify-between gap-4",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"text-xl font-bold text-blue-900 dark:text-blue-100 mb-2",children:" Cha c d liu"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-300 mb-4",children:"H thng cha c d liu. Bn c th ti d liu mu  khm ph cc tnh nng hoc bt u nhp d liu thc t."}),i.jsxs("div",{className:"flex gap-3",children:[i.jsxs("button",{onClick:z,className:"px-6 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg font-medium shadow-md hover:shadow-xl hover:from-blue-700 hover:to-indigo-700 transition-all duration-200 flex items-center gap-2",children:[i.jsx(Zf,{className:"w-5 h-5"})," Ti d liu mu"]}),i.jsx("button",{onClick:()=>D(!1),className:"px-6 py-3 bg-white dark:bg-slate-700 text-slate-700 dark:text-slate-200 border-2 border-slate-300 dark:border-slate-600 rounded-lg font-medium hover:bg-slate-50 dark:hover:bg-slate-600 transition-all duration-200",children:"B qua"})]})]}),i.jsx("div",{className:"hidden md:block text-6xl",children:i.jsx($g,{className:"w-16 h-16 text-blue-600 dark:text-blue-400"})})]})}),t.length>0&&i.jsx("div",{className:"flex justify-end",children:i.jsxs("button",{onClick:U,className:"px-4 py-2 text-sm bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300 border border-red-300 dark:border-red-700 rounded-lg hover:bg-red-200 dark:hover:bg-red-900/50 transition-colors inline-flex items-center gap-2",children:[i.jsx(Xg,{className:"w-4 h-4"})," Xa tt c d liu"]})})]}),i.jsxs("div",{className:"hidden lg:grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[i.jsx(Wx,{title:"Doanh thu hm nay",value:Ie(Z.revenue),subtitle:`${Z.orderCount} n hng`,colorKey:"blue",icon:i.jsx(C0,{className:"w-5 h-5"})}),i.jsx(Wx,{title:"Li nhun hm nay",value:Ie(Z.profit),subtitle:`${Z.customerCount} khch hng`,colorKey:"emerald",icon:i.jsx(R1,{className:"w-5 h-5"})}),i.jsx(Wx,{title:"Tin mt",value:Ie(re),subtitle:"Qu tin mt",colorKey:"amber",icon:i.jsx(hm,{className:"w-5 h-5"})}),i.jsx(Wx,{title:"Ngn hng",value:Ie(ae),subtitle:"Ti khon ngn hng",colorKey:"violet",icon:i.jsx(Wg,{className:"w-5 h-5"})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsx(Wx,{title:"Tng SL tn kho",value:O?"...":`${W}`,subtitle:"Gp tt c chi nhnh",colorKey:"blue",icon:i.jsx(gl,{className:"w-5 h-5"})}),i.jsx(Wx,{title:"Tng gi tr tn kho",value:O?"...":Ie(R),subtitle:"Theo gi bn l hin ti",colorKey:"violet",icon:i.jsx(Zf,{className:"w-5 h-5"})})]}),he.length>0&&i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-4",children:[i.jsxs("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-3 flex items-center gap-2",children:[i.jsx(bF,{className:"w-5 h-5 text-amber-500"})," Cnh bo"]}),i.jsx("div",{className:"space-y-2",children:he.map((F,te)=>i.jsxs("div",{className:"flex items-center justify-between py-2 px-3 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:[i.jsxs("div",{children:[i.jsxs("span",{className:"font-medium text-slate-900 dark:text-white",children:[F.type,":"]})," ",i.jsx("span",{className:F.color,children:F.message})]}),i.jsx("button",{className:"text-blue-600 hover:text-blue-700 dark:text-blue-400 text-sm font-medium",children:"Xem chi tit "})]},te))})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"Doanh thu & Chi ph 7 ngy gn y"}),i.jsx(Kd,{width:"100%",height:250,children:i.jsxs(OC,{data:q,children:[i.jsx(Iu,{strokeDasharray:"3 3",stroke:"#334155"}),i.jsx(Du,{dataKey:"date",stroke:"#94a3b8"}),i.jsx(Yd,{stroke:"#94a3b8"}),i.jsx(Xd,{contentStyle:{backgroundColor:"#1e293b",border:"1px solid #334155",borderRadius:"8px"},formatter:F=>Ie(F)}),i.jsx(Im,{}),i.jsx(nf,{type:"monotone",dataKey:"revenue",stroke:"#10b981",strokeWidth:2,name:"Doanh thu"}),i.jsx(nf,{type:"monotone",dataKey:"expense",stroke:"#ef4444",strokeWidth:2,name:"Chi ph"}),i.jsx(nf,{type:"monotone",dataKey:"profit",stroke:"#3b82f6",strokeWidth:2,name:"Li nhun"})]})})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"T l Thu/Chi"}),i.jsx(Kd,{width:"100%",height:250,children:i.jsxs(vH,{children:[i.jsx(yC,{data:K,cx:"50%",cy:"50%",labelLine:!1,label:({name:F,percent:te})=>`${F}: ${(te*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:K.map((F,te)=>i.jsx(fp,{fill:F.color},`cell-${te}`))}),i.jsx(Xd,{formatter:F=>Ie(F)})]})}),i.jsx("div",{className:"mt-4 flex justify-center gap-6"})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"Top 5 sn phm bn chy"}),i.jsx(Kd,{width:"100%",height:250,children:i.jsxs(ny,{data:Q,children:[i.jsx(Iu,{strokeDasharray:"3 3",stroke:"#334155"}),i.jsx(Du,{dataKey:"name",stroke:"#94a3b8"}),i.jsx(Yd,{stroke:"#94a3b8"}),i.jsx(Xd,{contentStyle:{backgroundColor:"#1e293b",border:"1px solid #334155",borderRadius:"8px"}}),i.jsx(Yh,{dataKey:"quantity",fill:"#3b82f6",name:"S lng bn"})]})})]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-6",children:[i.jsxs("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4 flex items-center gap-2",children:[i.jsx(Aee,{className:"w-5 h-5 text-yellow-500"}),"Top 10 Khch hng VIP"]}),i.jsx("div",{className:"space-y-3",children:Se.map((F,te)=>i.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 dark:bg-slate-700/50 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-gradient-to-br from-blue-500 to-blue-600 text-white font-bold text-sm",children:te+1}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium text-slate-900 dark:text-white",children:F.name}),F.phone&&i.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:F.phone})]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"font-semibold text-green-600 dark:text-green-400",children:Ie(F.total)}),i.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Tng chi tiu"})]})]},te))})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-6",children:[i.jsxs("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4 flex items-center gap-2",children:[i.jsx($g,{className:"w-5 h-5 text-blue-500"}),"So snh 3 thng gn y"]}),i.jsx(Kd,{width:"100%",height:300,children:i.jsxs(ny,{data:ke,children:[i.jsx(Iu,{strokeDasharray:"3 3",stroke:"#334155"}),i.jsx(Du,{dataKey:"month",stroke:"#94a3b8"}),i.jsx(Yd,{yAxisId:"left",stroke:"#3b82f6"}),i.jsx(Yd,{yAxisId:"right",orientation:"right",stroke:"#10b981"}),i.jsx(Xd,{contentStyle:{backgroundColor:"#1e293b",border:"1px solid #334155",borderRadius:"8px"},formatter:(F,te)=>te==="revenue"?Ie(F):F}),i.jsx(Im,{}),i.jsx(Yh,{yAxisId:"left",dataKey:"revenue",fill:"#3b82f6",name:"Doanh thu"}),i.jsx(Yh,{yAxisId:"right",dataKey:"orders",fill:"#10b981",name:"S n"})]})})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("h3",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:"Tng khch hng"}),i.jsx(tf,{className:"w-5 h-5 text-slate-500"})]}),i.jsx("div",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:o.length}),i.jsxs("div",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:[o.filter(F=>F.segment==="VIP").length," VIP"]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("h3",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:"Tng nhn vin"}),i.jsx(jm,{className:"w-5 h-5 text-slate-500"})]}),i.jsx("div",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:p.filter(F=>F.status==="active").length}),i.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:"ang lm vic"})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("h3",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:"Tng sn phm"}),i.jsx(gl,{className:"w-5 h-5 text-slate-500"})]}),i.jsx("div",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:n.reduce((F,te)=>F+(te.stock[S]||0),0)}),i.jsxs("div",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:[n.length," loi sn phm"]})]})]})]})},Bge={"sale.delete":["owner","manager"],"part.update_price":["owner","manager"],"settings.update":["owner","manager"],"finance.view":["owner","manager"],"payroll.view":["owner","manager"],"analytics.view":["owner","manager"],"reports.view":["owner","manager","staff"],"employees.view":["owner","manager"],"debt.view":["owner","manager"]};function yH(e,t){return e?Bge[t].includes(e):!1}function Uge(e,t,r=5){return T.useMemo(()=>{const n=Array.isArray(e)?e:[],a=t||"",s=n.filter(o=>{var c;return(((c=o.stock)==null?void 0:c[a])??0)<=0}),l=n.filter(o=>{var d;const c=((d=o.stock)==null?void 0:d[a])??0;return c>0&&c<=r});return{lowStock:l,outOfStock:s,lowStockCount:l.length,outOfStockCount:s.length}},[e,t,r])}function ow(e){const t=document.getElementById(e);if(!t)return;const r=window.open("","_blank","width=800,height=600");r&&(r.document.write(`<!doctype html><html><head><title>Print</title>
  <style>
    body{font-family: Arial, Helvetica, sans-serif;}
    @media print{ .no-print{ display:none } }
  </style>
  </head><body>${t.outerHTML}</body></html>`),r.document.close(),r.focus(),r.print(),r.close())}const zge=e=>i.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.5,...e,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19.128a9.38 9.38 0 002.625.372 9.337 9.337 0 004.121-.952 4.125 4.125 0 00-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 018.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0111.964-4.663M12 6.375a3.375 3.375 0 11-6.75 0 3.375 3.375 0 016.75 0z"})}),Cc=e=>i.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.5,...e,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})}),wH=e=>i.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.5,...e,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"})}),mp=e=>i.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.5,...e,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})});async function qge(){try{const{data:e,error:t}=await Pt.from("customer_debts").select("*").order("created_at",{ascending:!1});if(t)return At({code:"supabase",message:"Khng th ti danh sch cng n khch hng",cause:t});const r=(e||[]).filter(s=>s.sale_id).map(s=>s.sale_id);let n=new Map;if(r.length>0){const{data:s}=await Pt.from("sales").select("id, sale_code").in("id",r);s&&s.forEach(l=>{l.sale_code&&n.set(l.id,l.sale_code)})}const a=(e||[]).map(s=>{let l=s.description;if(s.sale_id&&n.has(s.sale_id)){const o=n.get(s.sale_id);l=l.replace(/Ha n SALE-\d+/g,`Ha n ${o}`).replace(/Ha n #\d+/g,`Ha n ${o}`)}return{id:s.id,customerId:s.customer_id,customerName:s.customer_name,phone:s.phone,licensePlate:s.license_plate,description:l,totalAmount:s.total_amount,paidAmount:s.paid_amount,remainingAmount:s.remaining_amount,createdDate:s.created_date,branchId:s.branch_id}});return kn(a)}catch(e){return At({code:"network",message:"Li kt ni ti my ch",cause:e})}}async function Hge(e){try{const r={id:e.workOrderId?`CDEBT-WO-${e.workOrderId}`:e.saleId?`CDEBT-SALE-${e.saleId}`:`CDEBT-${Date.now()}`,customer_id:e.customerId,customer_name:e.customerName,phone:e.phone,license_plate:e.licensePlate,description:e.description,total_amount:e.totalAmount,paid_amount:e.paidAmount||0,remaining_amount:e.totalAmount-(e.paidAmount||0),created_date:e.createdDate,branch_id:e.branchId||"CN1",work_order_id:e.workOrderId||null,sale_id:e.saleId||null};console.log("[debtsRepository] Upserting debt:",r);let n;if(e.saleId){const{data:l,error:o}=await Pt.from("customer_debts").select("id").eq("sale_id",e.saleId).eq("branch_id",r.branch_id).maybeSingle();l&&!o?(console.log("[debtsRepository] Updating existing sale debt:",l.id),n=await Pt.from("customer_debts").update(r).eq("id",l.id).select().single()):(console.log("[debtsRepository] Inserting new sale debt"),n=await Pt.from("customer_debts").insert(r).select().single())}else if(e.workOrderId){const{data:l,error:o}=await Pt.from("customer_debts").select("id").eq("work_order_id",e.workOrderId).eq("branch_id",r.branch_id).maybeSingle();l&&!o?(console.log("[debtsRepository] Updating existing work order debt:",l.id),n=await Pt.from("customer_debts").update(r).eq("id",l.id).select().single()):(console.log("[debtsRepository] Inserting new work order debt"),n=await Pt.from("customer_debts").insert(r).select().single())}else console.log("[debtsRepository] Inserting generic debt"),n=await Pt.from("customer_debts").insert(r).select().single();const{data:a,error:s}=n;return s||!a?At({code:"supabase",message:(s==null?void 0:s.message)||"Khng th thm/cp nht cng n",cause:s||new Error("No data returned")}):kn({id:a.id,customerId:a.customer_id,customerName:a.customer_name,phone:a.phone,licensePlate:a.license_plate,description:a.description,totalAmount:a.total_amount,paidAmount:a.paid_amount,remainingAmount:a.remaining_amount,createdDate:a.created_date,branchId:a.branch_id})}catch(t){return At({code:"network",message:"Li kt ni khi thm/cp nht cng n",cause:t})}}async function $ge(e,t){try{const r={};t.customerName!==void 0&&(r.customer_name=t.customerName),t.phone!==void 0&&(r.phone=t.phone),t.licensePlate!==void 0&&(r.license_plate=t.licensePlate),t.description!==void 0&&(r.description=t.description),t.totalAmount!==void 0&&(r.total_amount=t.totalAmount),t.paidAmount!==void 0&&(r.paid_amount=t.paidAmount,r.remaining_amount=(t.totalAmount||0)-t.paidAmount),r.updated_at=new Date().toISOString();const{data:n,error:a}=await Pt.from("customer_debts").update(r).eq("id",e).select().single();return a||!n?At({code:"supabase",message:"Khng th cp nht cng n",cause:a}):kn({id:n.id,customerId:n.customer_id,customerName:n.customer_name,phone:n.phone,licensePlate:n.license_plate,description:n.description,totalAmount:n.total_amount,paidAmount:n.paid_amount,remainingAmount:n.remaining_amount,createdDate:n.created_date,branchId:n.branch_id})}catch(r){return At({code:"network",message:"Li kt ni khi cp nht cng n",cause:r})}}async function Vge(e){try{const{error:t}=await Pt.from("customer_debts").delete().eq("id",e);return t?At({code:"supabase",message:"Khng th xa cng n",cause:t}):kn(void 0)}catch(t){return At({code:"network",message:"Li kt ni khi xa cng n",cause:t})}}async function Wge(){try{const{data:e,error:t}=await Pt.from("supplier_debts").select("*").order("created_at",{ascending:!1});if(t)return At({code:"supabase",message:"Khng th ti danh sch cng n nh cung cp",cause:t});const r=(e||[]).map(n=>({id:n.id,supplierId:n.supplier_id,supplierName:n.supplier_name,description:n.description,totalAmount:n.total_amount,paidAmount:n.paid_amount,remainingAmount:n.remaining_amount,createdDate:n.created_date,branchId:n.branch_id}));return kn(r)}catch(e){return At({code:"network",message:"Li kt ni ti my ch",cause:e})}}async function Kge(e){try{const t={id:`SDEBT-${Date.now()}`,supplier_id:e.supplierId,supplier_name:e.supplierName,description:e.description,total_amount:e.totalAmount,paid_amount:e.paidAmount||0,remaining_amount:e.totalAmount-(e.paidAmount||0),created_date:e.createdDate,branch_id:e.branchId||"CN1"},{data:r,error:n}=await Pt.from("supplier_debts").insert(t).select().single();return n||!r?At({code:"supabase",message:(n==null?void 0:n.message)||"Khng th thm cng n",cause:n||new Error("No data returned")}):kn({id:r.id,supplierId:r.supplier_id,supplierName:r.supplier_name,description:r.description,totalAmount:r.total_amount,paidAmount:r.paid_amount,remainingAmount:r.remaining_amount,createdDate:r.created_date,branchId:r.branch_id})}catch(t){return At({code:"network",message:"Li kt ni khi thm cng n",cause:t})}}async function Gge(e,t){try{const r={};t.supplierName!==void 0&&(r.supplier_name=t.supplierName),t.description!==void 0&&(r.description=t.description),t.totalAmount!==void 0&&(r.total_amount=t.totalAmount),t.paidAmount!==void 0&&(r.paid_amount=t.paidAmount,r.remaining_amount=(t.totalAmount||0)-t.paidAmount),r.updated_at=new Date().toISOString();const{data:n,error:a}=await Pt.from("supplier_debts").update(r).eq("id",e).select().single();return a||!n?At({code:"supabase",message:"Khng th cp nht cng n",cause:a}):kn({id:n.id,supplierId:n.supplier_id,supplierName:n.supplier_name,description:n.description,totalAmount:n.total_amount,paidAmount:n.paid_amount,remainingAmount:n.remaining_amount,createdDate:n.created_date,branchId:n.branch_id})}catch(r){return At({code:"network",message:"Li kt ni khi cp nht cng n",cause:r})}}async function Xge(e){try{const{error:t}=await Pt.from("supplier_debts").delete().eq("id",e);return t?At({code:"supabase",message:"Khng th xa cng n",cause:t}):kn(void 0)}catch(t){return At({code:"network",message:"Li kt ni khi xa cng n",cause:t})}}function PC(){return Os({queryKey:["customer_debts"],queryFn:async()=>{const e=await qge();if(!e.ok)throw new Error(va(e.error));return e.data}})}function Tk(){const e=qn();return ha({mutationFn:async t=>{const r=await Hge(t);if(!r.ok){const n=r.error?va(r.error):"Khng th thm cng n";throw new Error(n)}return r.data},onSuccess:(t,r)=>{e.invalidateQueries({queryKey:["customer_debts"]}),r.saleId||Ye.success("Thm cng n thnh cng!")},onError:(t,r)=>{r.saleId||Ye.error((t==null?void 0:t.message)||"C li xy ra")}})}function kH(){const e=qn();return ha({mutationFn:async({id:t,updates:r})=>{const n=await $ge(t,r);if(!n.ok)throw new Error(va(n.error));return n.data},onSuccess:()=>{e.invalidateQueries({queryKey:["customer_debts"]}),Ye.success("Cp nht cng n thnh cng!")},onError:t=>{Ye.error((t==null?void 0:t.message)||"C li xy ra")}})}function Yge(){const e=qn();return ha({mutationFn:async t=>{const r=await Vge(t);if(!r.ok)throw new Error(va(r.error));return r.data},onSuccess:()=>{e.invalidateQueries({queryKey:["customer_debts"]}),Ye.success("Xa cng n thnh cng!")},onError:t=>{Ye.error((t==null?void 0:t.message)||"C li xy ra")}})}function Ok(){return Os({queryKey:["supplier_debts"],queryFn:async()=>{const e=await Wge();if(!e.ok)throw new Error(va(e.error));return e.data}})}function Zge(){const e=qn();return ha({mutationFn:async t=>{const r=await Kge(t);if(!r.ok){const n=r.error?va(r.error):"Khng th thm cng n";throw new Error(n)}return r.data},onSuccess:()=>{e.invalidateQueries({queryKey:["supplier_debts"]}),Ye.success("Thm cng n thnh cng!")},onError:t=>{Ye.error((t==null?void 0:t.message)||"C li xy ra")}})}function Qge(){const e=qn();return ha({mutationFn:async({id:t,updates:r})=>{const n=await Gge(t,r);if(!n.ok)throw new Error(va(n.error));return n.data},onSuccess:()=>{e.invalidateQueries({queryKey:["supplier_debts"]}),Ye.success("Cp nht cng n thnh cng!")},onError:t=>{Ye.error((t==null?void 0:t.message)||"C li xy ra")}})}function Jge(){const e=qn();return ha({mutationFn:async t=>{const r=await Xge(t);if(!r.ok)throw new Error(va(r.error));return r.data},onSuccess:()=>{e.invalidateQueries({queryKey:["supplier_debts"]}),Ye.success("Xa cng n thnh cng!")},onError:t=>{Ye.error((t==null?void 0:t.message)||"C li xy ra")}})}const T2=5,ebe=({isOpen:e,onClose:t,sale:r,onPrint:n})=>{if(!e||!r)return null;const a=r.items.reduce((l,o)=>l+o.quantity*o.sellingPrice,0),s=a-r.total;return i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[60] p-4",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg w-full max-w-2xl max-h-[90vh] overflow-hidden flex flex-col",children:[i.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-slate-200 dark:border-slate-700",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:"Chi tit n hng"}),i.jsx("button",{onClick:t,className:"text-slate-500 hover:text-slate-700 dark:hover:text-slate-300 text-2xl",children:""})]}),i.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-500 dark:text-slate-400",children:"M n hng"}),i.jsx("div",{className:"text-base font-semibold text-slate-900 dark:text-slate-100",children:r.sale_code||F1(r.id)||r.id})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Ngy to"}),i.jsxs("div",{className:"text-base font-semibold text-slate-900 dark:text-slate-100",children:[Bn(new Date(r.date),!1)," ",new Date(r.date).toLocaleTimeString("vi-VN",{hour:"2-digit",minute:"2-digit"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Khch hng"}),i.jsx("div",{className:"text-base font-semibold text-slate-900 dark:text-slate-100",children:r.customer.name}),r.customer.phone&&i.jsx("div",{className:"text-sm text-slate-500",children:r.customer.phone})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Nhn vin bn hng"}),i.jsx("div",{className:"text-base font-semibold text-slate-900 dark:text-slate-100",children:r.username||r.userName||"N/A"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Phng thc thanh ton"}),i.jsx("div",{className:"text-base font-semibold text-slate-900 dark:text-slate-100",children:r.paymentMethod==="cash"?"Tin mt":"Chuyn khon"})]})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-3",children:"Sn phm"}),i.jsx("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg overflow-hidden",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:i.jsxs("tr",{children:[i.jsx("th",{className:"text-left px-4 py-3 text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Tn sn phm"}),i.jsx("th",{className:"text-right px-4 py-3 text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"SL"}),i.jsx("th",{className:"text-right px-4 py-3 text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"n gi"}),i.jsx("th",{className:"text-right px-4 py-3 text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Thnh tin"})]})}),i.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:r.items.map((l,o)=>i.jsxs("tr",{children:[i.jsxs("td",{className:"px-4 py-3 text-sm text-slate-900 dark:text-slate-100",children:[l.partName,l.sku&&i.jsxs("div",{className:"text-xs text-slate-500",children:["SKU: ",l.sku]})]}),i.jsx("td",{className:"px-4 py-3 text-sm text-right text-slate-900 dark:text-slate-100",children:l.quantity}),i.jsx("td",{className:"px-4 py-3 text-sm text-right text-slate-900 dark:text-slate-100",children:Ie(l.sellingPrice)}),i.jsx("td",{className:"px-4 py-3 text-sm text-right font-semibold text-slate-900 dark:text-slate-100",children:Ie(l.quantity*l.sellingPrice)})]},o))})]})})]}),i.jsx("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-4",children:i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Tm tnh:"}),i.jsx("span",{className:"font-semibold text-slate-900 dark:text-slate-100",children:Ie(a)})]}),s>0&&i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Gim gi:"}),i.jsxs("span",{className:"font-semibold text-red-600 dark:text-red-400",children:["-",Ie(s)]})]}),i.jsxs("div",{className:"flex justify-between text-lg font-bold border-t border-slate-200 dark:border-slate-700 pt-2",children:[i.jsx("span",{className:"text-slate-900 dark:text-slate-100",children:"Tng cng:"}),i.jsx("span",{className:"text-green-600 dark:text-green-400",children:Ie(r.total)})]})]})})]}),i.jsxs("div",{className:"flex justify-end gap-3 p-6 border-t border-slate-200 dark:border-slate-700",children:[i.jsx("button",{onClick:t,className:"px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-700 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:"ng"}),i.jsxs("button",{onClick:()=>{n(r),t()},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[i.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})}),"In ha n"]})]})]})})},tbe=({isOpen:e,onClose:t,sale:r,onSave:n})=>{const{customers:a,upsertCustomer:s}=Ua(),{data:l=[]}=mf(),o=qn(),{profile:c}=Ic(),[d,f]=T.useState([]),[p,y]=T.useState({id:"",name:"",phone:""}),[g,N]=T.useState("cash"),[w,k]=T.useState(0),[S,O]=T.useState(""),[E,D]=T.useState(!1),[H,W]=T.useState(!1),[R,z]=T.useState(""),[U,Z]=T.useState(""),[q,K]=T.useState(""),[Q,re]=T.useState(!1);if(T.useEffect(()=>{r&&(f([...r.items]),y({id:r.customer.id||"",name:r.customer.name,phone:r.customer.phone||""}),K(r.customer.name),N(r.paymentMethod),k(r.discount||0))},[r]),!e||!r)return null;const ae=d.reduce((ee,Ce)=>ee+Ce.quantity*Ce.sellingPrice,0),de=ae-w,he=l.filter(ee=>ee.name.toLowerCase().includes(S.toLowerCase())||ee.sku.toLowerCase().includes(S.toLowerCase())),Se=a.filter(ee=>ee.name.toLowerCase().includes(q.toLowerCase())),ke=ee=>{const Ce=typeof ee.stock=="object"?ee.stock[r.branchId]||0:ee.stock,me=typeof ee.retailPrice=="object"?ee.retailPrice[r.branchId]||0:ee.retailPrice||0,se=d.find(je=>je.partId===ee.id);f(se?d.map(je=>je.partId===ee.id?{...je,quantity:je.quantity+1}:je):[...d,{partId:ee.id,partName:ee.name,sku:ee.sku,quantity:1,sellingPrice:me,stockSnapshot:typeof Ce=="number"?Ce:0}]),O(""),D(!1)},Le=ee=>{y({id:ee.id,name:ee.name,phone:ee.phone||""}),K(ee.name),re(!1)},fe=async()=>{if(!R.trim()){Ye.error("Vui lng nhp tn khch hng");return}try{const ee={id:crypto.randomUUID(),name:R,phone:U||void 0,email:"",created_at:new Date().toISOString()};await s(ee),y({id:ee.id,name:ee.name,phone:ee.phone||""}),K(ee.name),W(!1),z(""),Z(""),Ye.success("Thm khch hng thnh cng")}catch(ee){console.error("Error adding customer:",ee),Ye.error("Li khi thm khch hng")}},F=(ee,Ce)=>{Ce<=0?f(d.filter(me=>me.partId!==ee)):f(d.map(me=>me.partId===ee?{...me,quantity:Ce}:me))},te=(ee,Ce)=>{f(d.map(me=>me.partId===ee?{...me,sellingPrice:Ce}:me))},Y=ee=>{f(d.filter(Ce=>Ce.partId!==ee))},ne=async()=>{if(d.length===0){Ye.error("Vui lng c t nht mt sn phm");return}if(!p.name){Ye.error("Vui lng nhp tn khch hng");return}try{await n({id:r.id,items:d,customer:p,paymentMethod:g,discount:w}),o.invalidateQueries({queryKey:["salesRepoPaged"]}),t()}catch(ee){console.error("Error saving sale:",ee)}};return i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[60] p-4",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg w-full max-w-2xl max-h-[95vh] overflow-hidden flex flex-col",children:[i.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-slate-200 dark:border-slate-700",children:[i.jsxs("h2",{className:"text-lg font-bold text-slate-900 dark:text-slate-100",children:[" [Chnh sa] n Xut Bn ",r.sale_code||F1(r.id)]}),i.jsx("button",{onClick:t,className:"text-slate-500 hover:text-slate-700 dark:hover:text-slate-300 text-2xl leading-none",children:""})]}),i.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Thi gian bn hng:"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"text",value:Bn(new Date(r.date),!1),disabled:!0,className:"flex-1 px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-slate-50 dark:bg-slate-700 text-slate-900 dark:text-slate-100"}),i.jsx("input",{type:"text",value:new Date(r.date).toLocaleTimeString("vi-VN",{hour:"2-digit",minute:"2-digit"}),disabled:!0,className:"w-24 px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-slate-50 dark:bg-slate-700 text-slate-900 dark:text-slate-100 text-center"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Khch hng: "}),H?i.jsxs("div",{className:"border border-slate-300 dark:border-slate-600 rounded-lg p-3 space-y-2",children:[i.jsx("input",{type:"text",value:R,onChange:ee=>z(ee.target.value),placeholder:"Tn khch hng",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"}),i.jsx("input",{type:"tel",value:U,onChange:ee=>Z(ee.target.value),placeholder:"S in thoi (ty chn)",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:fe,className:"flex-1 px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Lu"}),i.jsx("button",{onClick:()=>{W(!1),z(""),Z("")},className:"px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-700 dark:text-slate-300",children:"Hy"})]})]}):i.jsx(i.Fragment,{children:i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("div",{className:"flex-1 relative",children:[i.jsx("input",{type:"text",value:q,onChange:ee=>{K(ee.target.value),re(!0)},onFocus:()=>re(!0),placeholder:"Tm kim v chn mt khch hng",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"}),Q&&Se.length>0&&i.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg shadow-lg max-h-48 overflow-y-auto z-10",children:Se.slice(0,10).map(ee=>i.jsxs("button",{onClick:()=>Le(ee),className:"w-full px-3 py-2 text-left hover:bg-slate-100 dark:hover:bg-slate-600 text-sm",children:[i.jsx("div",{className:"font-medium text-slate-900 dark:text-slate-100",children:ee.name}),ee.phone&&i.jsx("div",{className:"text-xs text-slate-500",children:ee.phone})]},ee.id))})]}),i.jsxs("button",{onClick:()=>W(!0),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2",children:[i.jsx(Cc,{className:"w-4 h-4"}),"Thm mi"]})]})})]}),i.jsxs("div",{children:[i.jsx("div",{className:"flex items-center justify-between mb-2",children:i.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Chi tit sn phm:"})}),i.jsxs("div",{className:"relative mb-3",children:[i.jsx("input",{type:"text",value:S,onChange:ee=>{O(ee.target.value),D(!0)},onFocus:()=>D(!0),placeholder:"Tm kim v thm sn phm...",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"}),E&&S&&he.length>0&&i.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg shadow-lg max-h-60 overflow-y-auto z-10",children:he.slice(0,10).map(ee=>i.jsxs("button",{onClick:()=>ke(ee),className:"w-full px-3 py-2 text-left hover:bg-slate-100 dark:hover:bg-slate-600 text-sm",children:[i.jsx("div",{className:"font-medium text-slate-900 dark:text-slate-100",children:ee.name}),i.jsxs("div",{className:"text-xs text-slate-500",children:["SKU: ",ee.sku]})]},ee.id))})]}),i.jsx("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg overflow-hidden",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:i.jsxs("tr",{children:[i.jsx("th",{className:"text-center px-2 py-2 text-xs font-medium text-slate-500 dark:text-slate-400 w-8",children:"-"}),i.jsx("th",{className:"text-left px-3 py-2 text-xs font-medium text-slate-500 dark:text-slate-400",children:"Tn"}),i.jsx("th",{className:"text-center px-3 py-2 text-xs font-medium text-slate-500 dark:text-slate-400 w-20",children:"SL"}),i.jsx("th",{className:"text-right px-3 py-2 text-xs font-medium text-slate-500 dark:text-slate-400 w-24",children:"n gi"}),i.jsx("th",{className:"text-right px-3 py-2 text-xs font-medium text-slate-500 dark:text-slate-400 w-28",children:"Thnh tin"}),i.jsx("th",{className:"w-10"})]})}),i.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:d.map((ee,Ce)=>i.jsxs("tr",{children:[i.jsx("td",{className:"px-2 py-2 text-center text-sm text-slate-900 dark:text-slate-100",children:Ce+1}),i.jsxs("td",{className:"px-3 py-2 text-sm",children:[i.jsx("div",{className:"font-medium text-slate-900 dark:text-slate-100",children:ee.partName}),i.jsx("div",{className:"text-xs text-slate-500",children:ee.sku})]}),i.jsx("td",{className:"px-3 py-2",children:i.jsx("input",{type:"number",value:ee.quantity,onChange:me=>F(ee.partId,parseInt(me.target.value)||0),min:"1",className:"w-full px-2 py-1 border border-slate-300 dark:border-slate-600 rounded text-center text-sm bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})}),i.jsx("td",{className:"px-3 py-2",children:i.jsx("input",{type:"number",value:ee.sellingPrice,onChange:me=>te(ee.partId,parseFloat(me.target.value)||0),min:"0",step:"1000",className:"w-full px-2 py-1 border border-slate-300 dark:border-slate-600 rounded text-right text-sm bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})}),i.jsx("td",{className:"px-3 py-2 text-right text-sm font-semibold text-slate-900 dark:text-slate-100",children:Ie(ee.quantity*ee.sellingPrice)}),i.jsx("td",{className:"px-2 py-2 text-center",children:i.jsx("button",{onClick:()=>Y(ee.partId),className:"text-slate-400 hover:text-red-600 transition-colors",children:i.jsx(mp,{className:"w-5 h-5"})})})]},ee.partId))})]})}),d.length===0&&i.jsx("div",{className:"text-center py-8 text-slate-400 text-sm",children:"Cha c sn phm no"}),d.length>0&&i.jsxs("div",{className:"mt-2 text-right",children:[i.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:"TNG:"}),i.jsx("div",{className:"text-lg font-bold text-slate-900 dark:text-slate-100",children:Ie(ae)})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Chn nhn vin bn hng"}),i.jsx("select",{disabled:!0,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-slate-50 dark:bg-slate-700 text-slate-900 dark:text-slate-100",children:i.jsx("option",{children:r.username||r.userName})})]}),i.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-4",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Cng n:"}),i.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 mb-3",children:"Khch hng phi thanh ton"}),i.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-3 mb-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-sm font-medium text-green-700 dark:text-green-400",children:"TNG PHI THU:"}),i.jsx("span",{className:"text-lg font-bold text-green-700 dark:text-green-400",children:Ie(de)})]}),i.jsxs("div",{className:"mt-2 flex items-center gap-2 text-xs text-green-600 dark:text-green-400",children:[i.jsx("input",{type:"checkbox",checked:!0,readOnly:!0}),i.jsx("span",{children:" thanh ton "})]})]}),i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{className:"block text-xs text-slate-500 dark:text-slate-400 mb-2",children:"- Thi gian Ngi thu - Ghi ch"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>N("cash"),className:`flex-1 py-2 rounded-lg border transition-colors text-sm font-medium ${g==="cash"?"bg-green-600 text-white border-green-600":"border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:"Tin mt"}),i.jsx("button",{onClick:()=>N("bank"),className:`flex-1 py-2 rounded-lg border transition-colors text-sm font-medium ${g==="bank"?"bg-blue-600 text-white border-blue-600":"border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:"Chuyn khon"})]})]}),i.jsx("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg overflow-hidden",children:i.jsxs("table",{className:"w-full text-sm",children:[i.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:i.jsxs("tr",{children:[i.jsx("th",{className:"text-center px-2 py-2 text-xs font-medium text-slate-500 dark:text-slate-400",children:"-"}),i.jsx("th",{className:"text-left px-3 py-2 text-xs font-medium text-slate-500 dark:text-slate-400",children:"Thi gian"}),i.jsx("th",{className:"text-left px-3 py-2 text-xs font-medium text-slate-500 dark:text-slate-400",children:"Ngi thu - Ghi ch"}),i.jsx("th",{className:"text-right px-3 py-2 text-xs font-medium text-slate-500 dark:text-slate-400",children:"S tin"}),i.jsx("th",{className:"w-10"})]})}),i.jsx("tbody",{className:"bg-white dark:bg-slate-800",children:i.jsxs("tr",{children:[i.jsx("td",{className:"px-2 py-2 text-center text-slate-900 dark:text-slate-100",children:"1"}),i.jsxs("td",{className:"px-3 py-2",children:[i.jsxs("div",{className:"text-slate-900 dark:text-slate-100",children:[new Date(r.date).toLocaleTimeString("vi-VN",{hour:"2-digit",minute:"2-digit"})," ",Bn(new Date(r.date),!1)]}),i.jsx("div",{className:"text-xs text-slate-500",children:"(Tin mt)"})]}),i.jsx("td",{className:"px-3 py-2 text-slate-900 dark:text-slate-100",children:r.username||r.userName}),i.jsx("td",{className:"px-3 py-2 text-right text-slate-900 dark:text-slate-100",children:Ie(de)}),i.jsx("td",{})]})})]})}),i.jsxs("div",{className:"mt-2 text-right",children:[i.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Tng  thu"}),i.jsx("div",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:Ie(de)})]})]})]}),i.jsxs("div",{className:"flex items-center justify-end gap-3 p-4 border-t border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-700",children:[i.jsx("button",{onClick:t,className:"px-6 py-2 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-600 transition-colors font-medium",children:"NG"}),i.jsx("button",{onClick:ne,disabled:d.length===0,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed font-semibold",children:"LU"})]})]})})},rbe=({isOpen:e,onClose:t,sales:r,currentBranchId:n,onPrintReceipt:a,onEditSale:s,onDeleteSale:l,page:o,totalPages:c,total:d,hasMore:f,pageSize:p,onPrevPage:y,onNextPage:g,onPageSizeChange:N,search:w,onSearchChange:k,fromDate:S,toDate:O,onDateRangeChange:E,status:D="all",onStatusChange:H,paymentMethodFilter:W="all",onPaymentMethodFilterChange:R,keysetMode:z=!1,onToggleKeyset:U,customerDebts:Z=[]})=>{const[q,K]=T.useState("7days"),[Q,re]=T.useState(""),[ae,de]=T.useState(""),[he,Se]=T.useState(""),[ke,Le]=T.useState(null),[fe,F]=T.useState(!1),[te,Y]=T.useState(!1),[ne,ee]=T.useState(null);T.useEffect(()=>{const se=new Date,je=new Date(se.getFullYear(),se.getMonth(),se.getDate()),be=new Date(se.getFullYear(),se.getMonth(),se.getDate(),23,59,59,999);let ie,Te;switch(q){case"today":ie=je,Te=be;break;case"week":{const De=se.getDay(),ye=De===0?-6:1-De,rt=new Date(se);rt.setDate(se.getDate()+ye),ie=new Date(rt.getFullYear(),rt.getMonth(),rt.getDate()),Te=be;break}case"month":{ie=new Date(se.getFullYear(),se.getMonth(),1),Te=be;break}case"7days":{const De=new Date(se);De.setDate(De.getDate()-6),ie=new Date(De.getFullYear(),De.getMonth(),De.getDate()),Te=be;break}case"30days":{const De=new Date(se);De.setDate(De.getDate()-29),ie=new Date(De.getFullYear(),De.getMonth(),De.getDate()),Te=be;break}case"custom":{ae&&he&&(ie=new Date(ae),Te=new Date(he+"T23:59:59"));break}case"all":ie=void 0,Te=void 0;break}E(ie?ie.toISOString():void 0,Te?Te.toISOString():void 0)},[q,ae,he,E]);const Ce=T.useMemo(()=>{let se=r.filter(je=>je.branchId===n||je.branchid===n);return Q&&(se=se.filter(je=>je.id.toLowerCase().includes(Q.toLowerCase())||(je.sale_code||"").toLowerCase().includes(Q.toLowerCase())||je.customer.name.toLowerCase().includes(Q.toLowerCase())||(je.username||je.userName||"").toLowerCase().includes(Q.toLowerCase()))),se.sort((je,be)=>new Date(be.date).getTime()-new Date(je.date).getTime()),se},[r,n,Q]),me=T.useMemo(()=>Ce.reduce((se,je)=>se+je.total,0),[Ce]);return T.useEffect(()=>{const se=je=>{je.target.closest(".dropdown-menu-container")||ee(null)};if(ne)return document.addEventListener("mousedown",se),()=>document.removeEventListener("mousedown",se)},[ne]),e?i.jsxs(ua.Fragment,{children:[i.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex md:items-center md:justify-center items-end justify-center p-0 md:p-4",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 w-full md:max-w-7xl max-h-[95vh] md:rounded-2xl rounded-t-3xl shadow-2xl overflow-hidden flex flex-col animate-slide-up-bottom",children:[i.jsxs("div",{className:"p-4 border-b border-slate-200 dark:border-slate-700 bg-white/95 dark:bg-slate-900/70 backdrop-blur",children:[i.jsxs("div",{className:"flex items-start justify-between gap-3 mb-4",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-400 dark:text-slate-500",children:"Lch s bn hng"}),i.jsx("p",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:"Theo di giao dch gn y"})]}),i.jsx("button",{onClick:t,className:"text-slate-500 hover:text-slate-900 dark:hover:text-white text-2xl leading-none px-2","aria-label":"ng lch s bn hng",children:""})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("div",{className:"flex gap-2 overflow-x-auto pb-1 -mx-4 px-4 md:mx-0 md:px-0 scrollbar-thin",children:[{key:"7days",label:"7 ngy qua"},{key:"week",label:"Tun"},{key:"month",label:"Thng"},{key:"30days",label:"30 ngy qua"},{key:"custom",label:"Ty chn"},{key:"all",label:"Tt c"}].map(se=>i.jsx("button",{onClick:()=>K(se.key),className:`px-4 py-2 rounded-2xl text-sm font-medium whitespace-nowrap border transition-all min-w-[96px] ${q===se.key?"bg-blue-600 text-white border-blue-600 shadow-lg shadow-blue-500/30":"bg-slate-100 dark:bg-slate-800/80 text-slate-700 dark:text-slate-200 border-transparent"}`,children:se.label},se.key))}),i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-3",children:[i.jsxs("div",{className:"w-full md:flex-1 relative",children:[i.jsx("input",{type:"text",value:Q,onChange:se=>re(se.target.value),placeholder:"Tm ha n, khch hng hoc m phiu",className:"w-full pl-10 pr-4 py-2.5 rounded-xl border border-slate-200 dark:border-slate-600 bg-slate-50 dark:bg-slate-800 text-sm text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500"}),i.jsxs("svg",{className:"w-5 h-5 text-slate-400 absolute left-3 top-1/2 -translate-y-1/2",fill:"none",stroke:"currentColor",strokeWidth:"1.5",viewBox:"0 0 24 24",children:[i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11 19a8 8 0 100-16 8 8 0 000 16z"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-4.3-4.3"})]})]}),i.jsx("div",{className:"flex items-center justify-between md:justify-end gap-4 w-full md:w-auto",children:i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Tng doanh thu"}),i.jsx("div",{className:"text-xl font-bold text-green-600 dark:text-green-400",children:Ie(me)})]})})]}),q==="custom"&&i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-3",children:[i.jsxs("label",{className:"text-sm text-slate-600 dark:text-slate-400 flex items-center gap-2",children:["T",i.jsx("input",{type:"date",value:ae,onChange:se=>de(se.target.value),className:"px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100 text-sm"})]}),i.jsxs("label",{className:"text-sm text-slate-600 dark:text-slate-400 flex items-center gap-2",children:["n",i.jsx("input",{type:"date",value:he,onChange:se=>Se(se.target.value),className:"px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100 text-sm"})]})]})]})]}),i.jsx("div",{className:"flex-1 overflow-y-auto",children:Ce.length===0?i.jsx("div",{className:"text-center py-12 text-slate-400",children:"Khng c ha n no"}):i.jsxs("div",{children:[i.jsxs("div",{className:"hidden md:grid grid-cols-12 gap-4 px-4 py-3 bg-slate-100 dark:bg-slate-700 border-b border-slate-200 dark:border-slate-600 sticky top-0 z-10",children:[i.jsx("div",{className:"col-span-1 text-xs font-semibold text-slate-600 dark:text-slate-300"}),i.jsx("div",{className:"col-span-2 text-xs font-semibold text-slate-600 dark:text-slate-300",children:"M phiu"}),i.jsx("div",{className:"col-span-2 text-xs font-semibold text-slate-600 dark:text-slate-300",children:"Khch hng"}),i.jsx("div",{className:"col-span-4 text-xs font-semibold text-slate-600 dark:text-slate-300",children:"Chi tit"}),i.jsx("div",{className:"col-span-2 text-xs font-semibold text-slate-600 dark:text-slate-300",children:"Thanh ton"}),i.jsx("div",{className:"col-span-1 text-xs font-semibold text-slate-600 dark:text-slate-300",children:"Thao tc"})]}),i.jsx("div",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:Ce.map(se=>{var Vt,Mt,mr,xr,sr,Ir;const je=new Date(se.date);se.items.reduce((er,Xt)=>er+Xt.quantity*Xt.sellingPrice,0);const be=(Z||[]).find(er=>{var Xt;return(Xt=er.description)==null?void 0:Xt.includes(se.sale_code||se.id)}),ie=be?be.totalAmount-be.remainingAmount:se.total,Te=(be==null?void 0:be.remainingAmount)||0,De=Te>0,rt=se.items.slice(0,3),st=se.items.length-rt.length,dt=je.toLocaleDateString("vi-VN",{day:"2-digit",month:"2-digit",year:"numeric"}),et=je.toLocaleTimeString("vi-VN",{hour:"2-digit",minute:"2-digit"}),lt=(((Mt=(Vt=se.customer)==null?void 0:Vt.name)==null?void 0:Mt.charAt(0))||"K").toUpperCase(),Ve=se.paymentMethod==="cash"?"Tin mt":"Chuyn khon";return i.jsxs("div",{className:"p-4 hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors",children:[i.jsxs("div",{className:"md:hidden flex flex-col gap-3 bg-white dark:bg-slate-800/60 rounded-2xl border border-slate-200 dark:border-slate-700 p-4 shadow-sm",children:[i.jsxs("div",{className:"flex items-start justify-between gap-3",children:[i.jsxs("div",{children:[se.sale_code&&i.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-blue-600 dark:text-blue-300",children:[i.jsx(Nee,{className:"w-4 h-4"}),se.sale_code]}),i.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400 flex items-center gap-1 mt-1",children:[i.jsx(eee,{className:"w-3.5 h-3.5"}),i.jsxs("span",{children:[dt,"  ",et]})]}),i.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400 flex items-center gap-1 mt-1",children:[i.jsx("span",{className:"font-medium text-slate-600 dark:text-slate-300",children:"NV"}),i.jsx("span",{children:se.userName||se.username||"N/A"})]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Tng tin"}),i.jsx("div",{className:"text-lg font-bold text-slate-900 dark:text-white",children:Ie(se.total)}),i.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400 flex items-center gap-1 justify-end mt-1",children:[se.paymentMethod==="cash"?i.jsx(S6,{className:"w-4 h-4"}):i.jsx(fF,{className:"w-4 h-4"}),i.jsx("span",{children:Ve})]})]})]}),i.jsxs("div",{className:"flex items-center gap-3 bg-slate-50 dark:bg-slate-900/30 rounded-2xl p-3",children:[i.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center text-blue-600 dark:text-blue-200 font-semibold",children:lt}),i.jsxs("div",{children:[i.jsx("div",{className:"text-base font-semibold text-slate-900 dark:text-white",children:((mr=se.customer)==null?void 0:mr.name)||"Khch vng lai"}),((xr=se.customer)==null?void 0:xr.phone)&&i.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400 flex items-center gap-1",children:[i.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",strokeWidth:"1.5",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2 5.5C2 4.119 3.12 3 4.5 3h1.76c.636 0 1.197.4 1.39 1.005l.8 2.47a1.5 1.5 0 01-.35 1.46L7.11 8.94a12.044 12.044 0 005.95 5.95l1.006-1.002a1.5 1.5 0 011.46-.349l2.469.8c.606.193 1.005.754 1.005 1.39V19.5c0 1.38-1.119 2.5-2.5 2.5h-.25C8.268 22 2 15.732 2 7.75v-.25z"})}),se.customer.phone]})]})]}),i.jsxs("div",{className:"space-y-2",children:[rt.map((er,Xt)=>i.jsxs("div",{className:"flex items-start justify-between text-sm text-slate-700 dark:text-slate-200",children:[i.jsxs("div",{children:[i.jsxs("span",{className:"font-semibold",children:[er.quantity," x ",er.partName]}),i.jsxs("div",{className:"text-xs text-slate-400",children:[Ie(er.sellingPrice||0)," ","/ sn phm"]})]}),i.jsx("span",{className:"font-bold text-slate-900 dark:text-white",children:Ie(er.quantity*(er.sellingPrice||0))})]},Xt)),st>0&&i.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:["+",st," sn phm khc"]})]}),i.jsxs("div",{className:"flex flex-wrap gap-2",children:[De?i.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-semibold bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-200",children:[" Cn n ",Ie(Te)]}):i.jsx("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-semibold bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-200",children:"  thanh ton"}),i.jsx("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-medium bg-slate-100 text-slate-700 dark:bg-slate-800 dark:text-slate-200",children:Ve})]}),i.jsxs("div",{className:"flex flex-wrap gap-2 pt-3 border-t border-dashed border-slate-200 dark:border-slate-700",children:[i.jsx("button",{onClick:()=>a(se),className:"flex-1 min-w-[120px] px-3 py-2 rounded-xl bg-slate-100 dark:bg-slate-800 text-slate-700 dark:text-slate-200 text-sm font-medium",children:"In ho n"}),i.jsx("button",{onClick:()=>{Le(se),F(!0)},className:"flex-1 min-w-[120px] px-3 py-2 rounded-xl bg-slate-100 dark:bg-slate-800 text-slate-700 dark:text-slate-200 text-sm font-medium",children:"Xem chi tit"}),i.jsx("button",{onClick:()=>{Le(se),Y(!0)},className:"flex-1 min-w-[120px] px-3 py-2 rounded-xl bg-slate-100 dark:bg-slate-800 text-slate-700 dark:text-slate-200 text-sm font-medium",children:"Chnh sa"}),i.jsx("button",{onClick:()=>l(se.id),className:"flex-1 min-w-[120px] px-3 py-2 rounded-xl bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-300 text-sm font-medium",children:"Xa n"})]})]}),i.jsxs("div",{className:"hidden md:grid grid-cols-12 gap-4 items-start",children:[i.jsx("div",{className:"col-span-1 flex items-start pt-1",children:i.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded border-slate-300"})}),i.jsx("div",{className:"col-span-2",children:i.jsxs("div",{className:"space-y-1",children:[se.sale_code&&i.jsx("div",{className:"text-sm font-bold text-blue-600 dark:text-blue-400",children:se.sale_code}),i.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:[je.getDate(),"/",je.getMonth()+1,"/",je.getFullYear()," ",String(je.getHours()).padStart(2,"0"),":",String(je.getMinutes()).padStart(2,"0")]}),i.jsxs("div",{className:"text-xs text-slate-600 dark:text-slate-300",children:[i.jsx("span",{className:"font-medium",children:"NV:"})," ",se.userName||se.username||"N/A"]})]})}),i.jsx("div",{className:"col-span-2",children:i.jsxs("div",{className:"space-y-1",children:[i.jsx("div",{className:"text-sm font-semibold text-slate-900 dark:text-slate-100",children:((sr=se.customer)==null?void 0:sr.name)||"Khch vng lai"}),((Ir=se.customer)==null?void 0:Ir.phone)&&i.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:[" ",se.customer.phone]})]})}),i.jsx("div",{className:"col-span-4",children:i.jsx("div",{className:"space-y-1",children:se.items.map((er,Xt)=>i.jsxs("div",{className:"text-xs text-slate-700 dark:text-slate-300",children:[i.jsxs("span",{className:"font-medium",children:[er.quantity," x"]})," ",er.partName,i.jsxs("span",{className:"text-slate-400 ml-1",children:["(",Ie(er.sellingPrice||0),")"]})," = ",i.jsx("span",{className:"font-semibold text-slate-900 dark:text-slate-100",children:Ie(er.quantity*(er.sellingPrice||0))})]},Xt))})}),i.jsx("div",{className:"col-span-2",children:i.jsxs("div",{className:"space-y-1",children:[i.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:"Tng tin:"}),i.jsx("div",{className:"text-base font-bold text-slate-900 dark:text-slate-100",children:Ie(se.total)}),De?i.jsxs("div",{className:"mt-2 space-y-1",children:[i.jsxs("div",{className:"text-xs text-green-600 dark:text-green-400",children:[" tr: ",Ie(ie)]}),i.jsxs("div",{className:"text-xs font-semibold text-red-600 dark:text-red-400",children:["Cn n: ",Ie(Te)]}),i.jsx("div",{className:"inline-flex items-center gap-1 px-2 py-1 rounded text-xs font-medium bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-300",children:" Cn n"})]}):i.jsx("div",{className:"mt-2",children:i.jsx("div",{className:"inline-flex items-center gap-1 px-2 py-1 rounded text-xs font-medium bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-300",children:"  thanh ton"})}),i.jsx("div",{className:"text-xs text-slate-500 mt-1",children:se.paymentMethod==="cash"?" Tin mt":" Chuyn khon"})]})}),i.jsxs("div",{className:"col-span-1 flex items-start justify-end gap-2 pt-1",children:[i.jsx("button",{onClick:()=>{Le(se),Y(!0)},className:"p-1.5 text-slate-400 hover:text-amber-600 dark:hover:text-amber-400 transition-colors",title:"Chnh sa",children:i.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),i.jsxs("div",{className:"relative dropdown-menu-container",children:[i.jsx("button",{onClick:()=>ee(ne===se.id?null:se.id),className:"p-1.5 text-slate-400 hover:text-slate-600 dark:hover:text-slate-300 transition-colors",title:"Ty chn",children:i.jsxs("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:[i.jsx("circle",{cx:"12",cy:"5",r:"2"}),i.jsx("circle",{cx:"12",cy:"12",r:"2"}),i.jsx("circle",{cx:"12",cy:"19",r:"2"})]})}),ne===se.id&&i.jsxs("div",{className:"absolute right-0 mt-1 w-48 bg-white dark:bg-slate-800 rounded-lg shadow-lg border border-slate-200 dark:border-slate-700 z-50",children:[i.jsxs("button",{onClick:()=>{a(se),ee(null)},className:"w-full text-left px-4 py-2 text-sm text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700 flex items-center gap-2 rounded-t-lg",children:[i.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})}),"In li ha n"]}),i.jsxs("button",{onClick:()=>{Le(se),F(!0),ee(null)},className:"w-full text-left px-4 py-2 text-sm text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700 flex items-center gap-2",children:[i.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),"Xem chi tit"]}),i.jsxs("button",{onClick:()=>{l&&l(se.id),ee(null)},className:"w-full text-left px-4 py-2 text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 flex items-center gap-2 rounded-b-lg",children:[i.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Xa ha n"]})]})]})]})]})]},se.id)})})]})}),i.jsx("div",{className:"p-4 border-t border-slate-200 dark:border-slate-700 flex items-center justify-between",children:i.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:["Hin th ",Ce.length," n hng"]})})]})}),i.jsx(ebe,{isOpen:fe,onClose:()=>{F(!1),Le(null)},sale:ke,onPrint:a}),i.jsx(tbe,{isOpen:te,onClose:()=>{Y(!1),Le(null)},sale:ke,onSave:async se=>{try{const{supabase:je}=await c1(async()=>{const{supabase:ye}=await Promise.resolve().then(()=>TJ);return{supabase:ye}},[]),{profile:be}=await c1(async()=>{const{profile:ye}=await Promise.resolve().then(()=>$J);return{profile:ye}},void 0).then(ye=>({profile:null})),Te=se.items.reduce((ye,rt)=>ye+rt.quantity*rt.sellingPrice,0)-se.discount,{error:De}=await je.from("sales").update({items:se.items,customer:se.customer,paymentmethod:se.paymentMethod,discount:se.discount,total:Te}).eq("id",se.id);if(De)throw De;await Us(null,{action:"sale_update",tableName:"sales",recordId:se.id,newData:{items:se.items,customer:se.customer,paymentMethod:se.paymentMethod,discount:se.discount,total:Te}}),Ye.success(" cp nht n hng thnh cng"),Y(!1),Le(null)}catch(je){console.error("Error updating sale:",je),Ye.error("Li khi cp nht n hng: "+je.message)}}})]}):null},nbe=()=>{const{customers:e,upsertCustomer:t,cartItems:r,setCartItems:n,clearCart:a,deleteSale:s,currentBranchId:l,finalizeSale:o,setCashTransactions:c,setPaymentSources:d}=Ua(),f=qn(),{data:p=[],isLoading:y,error:g}=mf(),{data:N=[]}=PC(),[w,k]=T.useState(1),[S,O]=T.useState(20),[E,D]=T.useState(""),[H,W]=T.useState(""),[R,z]=T.useState(),[U,Z]=T.useState(),[q,K]=T.useState("all"),[Q,re]=T.useState("all"),[ae,de]=T.useState(!1),[he,Se]=T.useState(null),ke={branchId:l,page:ae?void 0:w,pageSize:S,search:H||void 0,fromDate:R,toDate:U,mode:ae?"keyset":"offset",afterDate:ae?he==null?void 0:he.afterDate:void 0,afterId:ae?he==null?void 0:he.afterId:void 0,status:q==="all"?void 0:q==="cancelled"?"refunded":q==="completed"?"completed":q,paymentMethod:Q==="all"?void 0:Q},{data:Le,isLoading:fe,error:F}=Hee(ke),te=(Le==null?void 0:Le.data)||[],Y=(Le==null?void 0:Le.meta)||{page:1,totalPages:1,total:te.length,hasMore:!1};T.useEffect(()=>{var at;ae&&((at=Le==null?void 0:Le.meta)==null?void 0:at.mode)==="keyset"&&Se({afterDate:Le.meta.nextAfterDate,afterId:Le.meta.nextAfterId})},[ae,Le]);const{mutateAsync:ne}=$ee(),ee=Tk(),Ce=T.useCallback(()=>k(at=>Math.max(1,at-1)),[]),me=T.useCallback(()=>k(at=>at+1),[]),se=T.useCallback(at=>{O(at),k(1),ae&&Se(null)},[]);T.useEffect(()=>{const at=setTimeout(()=>{W(E),k(1)},300);return()=>clearTimeout(at)},[E]);const[je,be]=T.useState(""),[ie,Te]=T.useState("all"),[De,ye]=T.useState(""),[rt,st]=T.useState(!1),dt=T.useRef(null),[et,lt]=T.useState(""),[Ve,Vt]=T.useState("products"),[Mt,mr]=T.useState(null),[xr,sr]=T.useState(!1),[Ir,er]=T.useState(0),[Xt,Gt]=T.useState("amount"),[ur,wr]=T.useState(0),[lr,mt]=T.useState(!1),[kr,Ke]=T.useState(!1),[vt,Kt]=T.useState({name:"",phone:"",vehicleModel:"",licensePlate:""}),[tr,Pr]=T.useState(""),[Nr,Ge]=T.useState(""),[Ot,hr]=T.useState(""),[$r,Dr]=T.useState([]),[Yt,Mr]=T.useState(0),[We,Qt]=T.useState(null),[Cr,gr]=T.useState(null),[_n,Rr]=T.useState(0),[Sn,we]=T.useState(!1);T.useEffect(()=>{var at;rt&&((at=dt.current)==null||at.focus())},[rt]);const[Ne,Me]=T.useState(!1),[le,ve]=T.useState(null),[Oe,nt]=T.useState(null);T.useEffect(()=>{(async()=>{try{const{data:cr,error:_r}=await Pt.from("store_settings").select("store_name, address, phone, email, logo_url, bank_qr_url, bank_name, bank_account_number, bank_account_holder, bank_branch").order("created_at",{ascending:!1}).limit(1).single();if(_r){console.error("Error fetching store settings:",_r);return}nt(cr)}catch(cr){console.error("Failed to fetch store settings:",cr)}})()},[]);const wt=T.useCallback(at=>{var on,ct;const cr=((on=at.retailPrice)==null?void 0:on[l])??0,_r=((ct=at.stock)==null?void 0:ct[l])??0,br=r.find(Be=>Be.partId===at.id);if(br){const Be=br.quantity+1;if(Be>_r){Ye.error(`Khng  hng! Tn kho: ${_r}`);return}n(vr=>vr.map(Pn=>Pn.partId===at.id?{...Pn,quantity:Be}:Pn))}else{if(_r<1){Ye.error("Sn phm  ht hng!");return}const Be={partId:at.id,partName:at.name,sku:at.sku,quantity:1,sellingPrice:cr,stockSnapshot:_r,discount:0};n(vr=>[...vr,Be])}},[r,n,l]),ft=T.useCallback(at=>{n(cr=>cr.filter(_r=>_r.partId!==at))},[n]),ht=T.useCallback((at,cr)=>{if(cr<=0){ft(at);return}const _r=r.find(br=>br.partId===at);if(_r&&cr>_r.stockSnapshot){Ye.error(`Khng  hng! Tn kho: ${_r.stockSnapshot}`);return}n(br=>br.map(on=>on.partId===at?{...on,quantity:cr}:on))},[r,n,ft]),bt=T.useMemo(()=>r.reduce((at,cr)=>at+cr.sellingPrice*cr.quantity,0),[r]),Ut=T.useMemo(()=>Math.max(0,bt-Ir),[bt,Ir]),rr=T.useMemo(()=>{const at=new Map;return r.forEach(cr=>at.set(cr.partId,cr)),at},[r]),Jt=T.useMemo(()=>$r.reduce((at,cr)=>at+cr.sellingPrice*cr.quantity,0),[$r]),dr=T.useMemo(()=>Math.max(0,Jt-Yt),[Jt,Yt]),pr=T.useMemo(()=>$r.reduce((at,cr)=>at+cr.quantity,0),[$r]),Ar=T.useMemo(()=>{if(y||g)return[];let at=p;return je&&(at=at.filter(cr=>cr.name.toLowerCase().includes(je.toLowerCase())||cr.sku.toLowerCase().includes(je.toLowerCase()))),at},[p,je,y,g]),It=T.useMemo(()=>{if(!Ar.length)return[];const at=Ar.filter(_r=>{var on;const br=Number(((on=_r.stock)==null?void 0:on[l])??0);return ie==="low"?br>0&&br<=T2:ie==="out"?br<=0:!0}),cr=_r=>_r<=0?2:_r<=T2?1:0;return at.slice().sort((_r,br)=>{var vr,Pn;const on=Number(((vr=_r.stock)==null?void 0:vr[l])??0),ct=Number(((Pn=br.stock)==null?void 0:Pn[l])??0),Be=cr(on)-cr(ct);return Be!==0?Be:_r.name.localeCompare(br.name)}).slice(0,36)},[Ar,ie,l]),Un=at=>{if(at.preventDefault(),!De.trim())return;const cr=De.trim(),_r=Ar.find(br=>{var on,ct;return((on=br.sku)==null?void 0:on.toLowerCase())===cr.toLowerCase()||((ct=br.name)==null?void 0:ct.toLowerCase().includes(cr.toLowerCase()))});_r?(wt(_r),Ye.success(` thm ${_r.name} vo gi hng`),ye(""),setTimeout(()=>{var br;return(br=dt.current)==null?void 0:br.focus()},100)):(Ye.error(`Khng tm thy sn phm c m: ${cr}`),ye(""))},{lowStockCount:en,outOfStockCount:Na}=Uge(p,l,T2),La=[{key:"all",label:"Tt c",count:Ar.length,activeClass:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white border-transparent shadow-blue-500/30",inactiveClass:"bg-white/80 dark:bg-slate-900/50 text-slate-700 dark:text-slate-200 border border-slate-200 dark:border-slate-700"},{key:"low",label:"Tn thp",count:en,activeClass:"bg-gradient-to-r from-amber-500 to-orange-500 text-white border-transparent shadow-amber-500/30",inactiveClass:"bg-white/80 dark:bg-slate-900/50 text-amber-700 dark:text-amber-200 border border-amber-200/70 dark:border-amber-800/60"},{key:"out",label:"Ht hng",count:Na,activeClass:"bg-gradient-to-r from-rose-500 to-red-500 text-white border-transparent shadow-rose-500/30",inactiveClass:"bg-white/80 dark:bg-slate-900/50 text-rose-700 dark:text-rose-200 border border-rose-200/70 dark:border-rose-800/60"}],cn=T.useRef(!1);T.useEffect(()=>{if(!cn.current&&(en>0||Na>0)){const at=[];Na>0&&at.push(`Ht hng: ${Na}`),en>0&&at.push(`Tn thp: ${en}`),Ye.info(at.join("  ")),cn.current=!0}},[en,Na]);const An=T.useMemo(()=>et?e.filter(at=>{var cr;return at.name.toLowerCase().includes(et.toLowerCase())||((cr=at.phone)==null?void 0:cr.includes(et))||!1}).slice(0,10):e.slice(0,10),[e,et]),On=()=>{if(!vt.name||!vt.phone){alert("Vui lng nhp tn v s in thoi");return}if(e.find(_r=>_r.phone===vt.phone)){alert("S in thoi ny  tn ti!");return}const cr={id:`CUST-${Date.now()}`,name:vt.name,phone:vt.phone,vehicleModel:vt.vehicleModel,licensePlate:vt.licensePlate,status:"active",segment:"New",loyaltyPoints:0,totalSpent:0,visitCount:1,lastVisit:new Date().toISOString(),created_at:new Date().toISOString()};t(cr),mr(cr),lt(cr.name),Kt({name:"",phone:"",vehicleModel:"",licensePlate:""}),Ke(!1)},is=at=>{ve(at),Me(!0)},To=()=>{if(!le)return;Pr(le.sale_code||F1(le.id)||le.id),Ge(le.customer.name),hr(le.customer.phone||"");const at=le.items.map(cr=>({partId:cr.partId||cr.partid||"",partName:cr.partName||cr.partname||"",sku:cr.sku||"",quantity:cr.quantity||0,sellingPrice:cr.sellingPrice||cr.sellingprice||cr.price||0,stockSnapshot:cr.stockSnapshot||0,discount:cr.discount||0}));Dr(at),Mr(le.discount||0),setTimeout(()=>{ow("last-receipt"),Me(!1),ve(null)},100)},{profile:ln}=Ic(),ta=async at=>{var cr;if(!yH(ln==null?void 0:ln.role,"sale.delete")){Ye.error("Bn khng c quyn xa ha n");return}if(confirm("Xc nhn xa ha n ny? Hnh ng ny khng th hon tc."))try{const{deleteSaleById:_r}=await c1(async()=>{const{deleteSaleById:on}=await Promise.resolve().then(()=>qee);return{deleteSaleById:on}},void 0),br=await _r(at);if(!br.ok){Ye.error(((cr=br.error)==null?void 0:cr.message)||"Xa ha n tht bi!");return}f.invalidateQueries({queryKey:["sales"]}),Ye.success(" xa ha n thnh cng!"),Us((ln==null?void 0:ln.id)||null,{action:"sale.delete",tableName:"sales",recordId:at,oldData:null,newData:null})}catch(_r){Ye.error("Xa ha n tht bi!"),console.error("Delete sale error:",_r)}},el=at=>{if(confirm("M li ha n ny  chnh sa? Gi hng hin ti s b xa.")){if(a(),at.items.forEach(cr=>{const _r=p.find(br=>br.id===cr.partId);if(_r)for(let br=0;br<cr.quantity;br++)wt(_r)}),at.customer.id){const cr=e.find(_r=>_r.id===at.customer.id);cr&&(mr(cr),lt(cr.name))}else Ge(at.customer.name),hr(at.customer.phone||"");er(at.discount||0),mt(!1),alert("Ha n  c ti vo gi hng  chnh sa")}},lo=async(at,cr,_r,br)=>{var on;if(!(cr<=0)){console.log("[createCustomerDebtIfNeeded] CALLED with:",{saleId:at.id,totalAmount:_r,paidAmount:br,remainingAmount:cr,customerName:at.customer.name,timestamp:new Date().toISOString()});try{const ct=at.customer.id||at.customer.phone||`CUST-ANON-${Date.now()}`,Be=((on=at.customer.name)==null?void 0:on.trim())||at.customer.phone||"Khch l";let Pn=`Bn hng - Ha n ${at.sale_code||at.id}`;at.items&&at.items.length>0&&(Pn+=`

Sn phm  mua:`,at.items.forEach(Qn=>{const Lr=Qn.quantity*Qn.sellingPrice,na=Qn.discount||0;Pn+=`
   ${Qn.quantity} x ${Qn.partName} - ${Ie(Lr)}`,na>0&&(Pn+=` (Gim: ${Ie(na)})`)})),at.discount&&at.discount>0&&(Pn+=`

Gim gi n hng: -${Ie(at.discount)}`);const qa=at.paymentMethod==="cash"?"Tin mt":"Chuyn khon";Pn+=`

Phng thc: ${qa}`,Pn+=`

NV: ${at.userName||"N/A"}`;const ls={customerId:ct,customerName:Be,phone:at.customer.phone||null,licensePlate:null,description:Pn,totalAmount:_r,paidAmount:br,remainingAmount:cr,createdDate:new Date().toISOString().split("T")[0],branchId:l,saleId:at.id};console.log("[SalesManager] createCustomerDebt payload:",ls);const Ai=await ee.mutateAsync(ls);console.log("[SalesManager] createCustomerDebt result:",Ai),Ye.success(` to cng n ${Ie(cr)} cho ${Be}`)}catch(ct){console.error("Error creating customer debt:",ct),console.error("Error details:",{message:ct==null?void 0:ct.message,cause:ct==null?void 0:ct.cause,stack:ct==null?void 0:ct.stack}),Ye.error(`Khng th to cng n t ng: ${(ct==null?void 0:ct.message)||"Li khng xc nh"}`)}}},pa=async()=>{var at,cr,_r,br;if(r.length===0){alert("Vui lng thm sn phm vo gi hng");return}if(!We){alert("Vui lng chn phng thc thanh ton");return}if(!Cr){alert("Vui lng chn hnh thc thanh ton");return}if(Cr==="partial"&&_n<=0){alert("Vui lng nhp s tin khch tr");return}try{for(const Qn of r){const Lr=p.find(oo=>oo.id===Qn.partId);if(!Lr){Ye.error(`Khng tm thy sn phm: ${Qn.partName}`);return}const na=((at=Lr.stock)==null?void 0:at[l])??0;if(Qn.quantity>na){Ye.error(`Khng  hng cho ${Lr.name}. Tn kho: ${na}`);return}}const on=`SALE-${Date.now()}`,ct=r.reduce((Qn,Lr)=>Qn+Lr.sellingPrice*Lr.quantity,0),Be=r.reduce((Qn,Lr)=>Qn+(Lr.discount||0),0),vr=Math.max(0,ct-Be-Ir),Pn={id:Mt==null?void 0:Mt.id,name:(Mt==null?void 0:Mt.name)||Nr||"Khch l",phone:(Mt==null?void 0:Mt.phone)||Ot};Pr(on),Ge(Pn.name),hr(Pn.phone||""),Dr([...r]),Mr(Ir+Be),!Mt&&Ot&&Nr&&(e.find(Lr=>Lr.phone===Ot)||t({id:`CUST-${Date.now()}`,name:Nr,phone:Ot,status:"active",segment:"New",loyaltyPoints:0,totalSpent:0,visitCount:1,lastVisit:new Date().toISOString(),created_at:new Date().toISOString()}));const qa=await ne({id:on,items:r,discount:Ir+Be,customer:Pn,paymentMethod:We,userId:(ln==null?void 0:ln.id)||"local-user",userName:(ln==null?void 0:ln.email)||(ln==null?void 0:ln.full_name)||"Local User",branchId:l});if(qa!=null&&qa.error)throw qa.error;const ls=Cr==="full"?vr:Cr==="partial"?_n:0,Ai=vr-ls;if(console.log("[SalesManager] Payment details:",{paymentType:Cr,total:vr,paidAmount:ls,partialAmount:_n,remainingAmount:Ai,hasCustomer:!!(Mt||Nr||Ot)}),Ai>0){console.log("[SalesManager] Creating debt because remaining > 0");const{data:Qn,error:Lr}=await Pt.from("sales").select(`
            *,
            user:userid(
              full_name,
              display_name,
              email
            )
          `).eq("id",on).single();Lr&&console.error("[SalesManager] Error fetching sale:",Lr);const oo=(Qn?{...Qn,userName:((cr=Qn.user)==null?void 0:cr.full_name)||((_r=Qn.user)==null?void 0:_r.display_name)||((br=Qn.user)==null?void 0:br.email)||"N/A"}:null)||{id:on,sale_code:void 0,date:new Date().toISOString(),items:r,subtotal:bt,discount:Ir+Be,total:vr,customer:Pn,paymentMethod:We,userName:(ln==null?void 0:ln.email)||(ln==null?void 0:ln.full_name)||"Local User",userId:(ln==null?void 0:ln.id)||"",branchId:l||""};console.log("[SalesManager] Sale data for debt:",oo),await lo(oo,Ai,vr,ls)}else console.log("[SalesManager] No debt needed, paid in full");mr(null),lt(""),er(0),wr(0),Gt("amount"),Qt(null),gr(null),Rr(0),a(),Sn&&setTimeout(()=>{ow("last-receipt")},100)}catch(on){console.error("Error finalizing sale (atomic):",on),Ye.error((on==null?void 0:on.message)||"C li khi to ha n (atomic)")}};return T.useEffect(()=>{const at=cr=>{cr.target.closest(".customer-dropdown-container")||sr(!1)};return document.addEventListener("mousedown",at),()=>document.removeEventListener("mousedown",at)},[]),i.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50/20 to-indigo-50/30 dark:from-slate-900 dark:via-slate-900 dark:to-slate-800",children:[i.jsx("div",{className:"md:hidden sticky top-0 z-10 bg-white/95 dark:bg-slate-800/95 backdrop-blur-sm border-b border-slate-200/50 dark:border-slate-700/50 shadow-sm",children:i.jsxs("div",{className:"grid grid-cols-2",children:[i.jsxs("button",{onClick:()=>Vt("products"),className:`py-3.5 px-4 font-bold transition-all relative ${Ve==="products"?"text-blue-600 dark:text-blue-400 bg-blue-50/50 dark:bg-blue-900/20":"text-slate-600 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-700/50"}`,children:[i.jsxs("div",{className:"flex items-center justify-center gap-2",children:[i.jsx(gl,{className:"w-5 h-5"}),i.jsx("span",{className:"text-sm",children:"Sn phm"})]}),Ve==="products"&&i.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-gradient-to-r from-blue-500 to-indigo-500 rounded-t-full"})]}),i.jsxs("button",{onClick:()=>Vt("cart"),className:`py-3.5 px-4 font-bold transition-all relative ${Ve==="cart"?"text-blue-600 dark:text-blue-400 bg-blue-50/50 dark:bg-blue-900/20":"text-slate-600 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-700/50"}`,children:[i.jsxs("div",{className:"flex items-center justify-center gap-2",children:[i.jsx(Qf,{className:"w-5 h-5"}),i.jsx("span",{className:"text-sm",children:"Gi hng"}),r.length>0&&i.jsx("span",{className:"ml-1 px-2 py-0.5 text-xs font-bold rounded-full bg-gradient-to-r from-orange-500 to-red-500 text-white shadow-lg",children:r.length})]}),Ve==="cart"&&i.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-gradient-to-r from-blue-500 to-indigo-500 rounded-t-full"})]})]})}),i.jsxs("div",{className:"flex h-[calc(100vh-57px)] md:h-screen",children:[i.jsxs("div",{className:`flex-1 flex flex-col transition-all duration-300 ${Ve==="cart"?"hidden md:flex":"animate-fade-in"}`,children:[i.jsx("div",{className:"bg-white/80 dark:bg-slate-800/80 backdrop-blur-sm border-b border-slate-200/50 dark:border-slate-700/50 p-3 md:p-4 shadow-sm",children:i.jsxs("div",{className:"flex flex-col md:flex-row items-stretch md:items-center gap-3",children:[i.jsxs("div",{className:"flex-1 space-y-2",children:[i.jsxs("div",{className:"flex items-stretch gap-2",children:[i.jsxs("div",{className:"relative flex-1",children:[i.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",children:i.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),i.jsx("input",{type:"text",placeholder:"Tm kim sn phm...",value:je,onChange:at=>be(at.target.value),className:"w-full pl-10 pr-4 py-2.5 border-2 border-slate-300/50 dark:border-slate-600/50 rounded-xl bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm md:text-base transition-all placeholder:text-slate-400"})]}),i.jsxs("button",{type:"button",onClick:()=>st(at=>!at),className:`px-4 py-2 rounded-xl border-2 font-semibold text-sm flex items-center gap-2 transition-all ${rt?"border-blue-500 text-blue-600 bg-blue-50 dark:bg-blue-900/20":"border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-200 bg-white dark:bg-slate-800"}`,children:[i.jsx(See,{className:"w-4 h-4"}),i.jsx("span",{className:"hidden md:inline",children:rt?"ng qut":"Qut m"})]})]}),rt&&i.jsxs("form",{onSubmit:Un,className:"relative",children:[i.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-blue-500",children:i.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"})})}),i.jsx("input",{ref:dt,type:"text",placeholder:"Nhp hoc qut m vch...",value:De,onChange:at=>ye(at.target.value),className:"w-full pl-10 pr-10 py-2.5 border-2 border-blue-400 dark:border-blue-600 rounded-xl bg-blue-50/50 dark:bg-blue-900/20 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm md:text-base transition-all placeholder:text-blue-500/70 font-mono"}),De&&i.jsx("button",{type:"button",onClick:()=>ye(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600 dark:hover:text-slate-300",children:i.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),i.jsx("div",{className:"flex items-center gap-2",children:i.jsxs("button",{onClick:()=>mt(!0),className:"px-3 md:px-4 py-2.5 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white rounded-xl whitespace-nowrap transition-all inline-flex items-center gap-2 text-sm font-bold shadow-lg hover:shadow-xl hover:scale-105 active:scale-95",children:[i.jsx($g,{className:"w-4 h-4"}),i.jsx("span",{className:"hidden sm:inline",children:"Lch s"})]})})]})}),i.jsxs("div",{className:"bg-white/80 dark:bg-slate-800/80 border-b border-slate-200/60 dark:border-slate-700/60 px-3 md:px-6 py-3 flex flex-col md:flex-row md:items-center md:justify-between gap-2",children:[i.jsxs("div",{className:"text-xs md:text-sm text-slate-600 dark:text-slate-400 font-medium",children:["Hin th ",It.length," / ",Ar.length||0," sn phm",je&&" theo t kha"]}),i.jsx("div",{className:"flex items-center gap-2 overflow-x-auto pb-1",children:La.map(at=>{const cr=ie===at.key;return i.jsxs("button",{type:"button","aria-pressed":cr,onClick:()=>Te(at.key),className:`flex items-center gap-1.5 px-3 py-1.5 rounded-full text-xs font-semibold transition-all whitespace-nowrap ${cr?at.activeClass:at.inactiveClass}`,children:[i.jsx("span",{children:at.label}),i.jsx("span",{className:`px-1.5 py-0.5 rounded-full text-[10px] font-black ${cr?"bg-white/30":"bg-slate-100 dark:bg-slate-800"}`,children:at.count})]},at.key)})})]}),i.jsx("div",{className:"flex-1 p-0 md:p-6 overflow-y-auto bg-slate-50 dark:bg-slate-900 pb-24 md:pb-6",children:It.length===0?i.jsxs("div",{className:"text-center text-slate-400 mt-20",children:[i.jsx("div",{className:"mb-4 flex items-center justify-center",children:i.jsx(gl,{className:"w-16 h-16 text-slate-300"})}),i.jsx("div",{className:"text-xl font-medium mb-2",children:Ar.length===0?je?"Khng tm thy sn phm no":"Cha c sn phm":ie==="low"?"Khng c sn phm tn thp":"Khng c sn phm ht hng"}),i.jsx("div",{className:"text-sm",children:Ar.length===0?je?"Hy th mt t kha tm kim khc":"Vui lng thm sn phm vo h thng":"Hy chn b lc khc  xem thm sn phm"})]}):i.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-2.5 md:gap-3",children:It.map(at=>{var ls,Ai;const cr=Number(((ls=at.retailPrice)==null?void 0:ls[l])??0),_r=Number(((Ai=at.stock)==null?void 0:Ai[l])??0),br=_r<=0,on=_r>0&&_r<=T2,ct=rr.get(at.id),Be=!!ct,vr=br?"Ht hng":on?"Tn thp":"Sn hng",Pn=br?"bg-rose-50 text-rose-600 dark:bg-rose-900/20 dark:text-rose-200":on?"bg-amber-50 text-amber-600 dark:bg-amber-900/20 dark:text-amber-200":"bg-emerald-50 text-emerald-600 dark:bg-emerald-900/20 dark:text-emerald-200",qa=br?"bg-gradient-to-r from-rose-500 to-red-500 text-white":on?"bg-gradient-to-r from-amber-500 to-orange-500 text-white":"bg-gradient-to-r from-emerald-500 to-green-500 text-white";return i.jsx("button",{type:"button",onClick:()=>!br&&wt(at),disabled:br,className:`group relative text-left p-3 md:p-4 rounded-2xl border transition-all duration-200 h-full ${br?"bg-slate-50/70 dark:bg-slate-900/30 border-slate-200 dark:border-slate-800 cursor-not-allowed":"bg-white dark:bg-slate-800/70 border-slate-200/70 dark:border-slate-700 hover:border-blue-400 dark:hover:border-blue-500 hover:shadow-xl"} ${Be?"ring-2 ring-blue-200 dark:ring-blue-500/40":""}`,children:i.jsxs("div",{className:"flex flex-col h-full",children:[i.jsxs("div",{className:"flex items-start justify-between mb-3",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center ${br?"bg-slate-100 dark:bg-slate-700":"bg-slate-100 text-orange-500 dark:bg-slate-700/70"}`,children:i.jsx(gl,{className:`w-6 h-6 ${br?"text-slate-400":"text-orange-500 dark:text-orange-300"}`})}),i.jsx("span",{className:`px-2 py-0.5 rounded-full text-[11px] font-semibold ${Pn}`,children:vr})]}),Be&&i.jsxs("span",{className:"text-[10px] font-semibold px-2 py-0.5 rounded-full bg-blue-50 text-blue-700 dark:bg-blue-900/30 dark:text-blue-200",children:[" chn ",ct==null?void 0:ct.quantity]})]}),i.jsxs("div",{className:"space-y-1 mb-4",children:[i.jsx("h3",{className:"font-semibold text-xs md:text-sm text-slate-900 dark:text-slate-100 line-clamp-2",title:at.name,children:at.name}),i.jsx("div",{className:"text-[11px] text-slate-500 dark:text-slate-400 font-mono truncate",children:at.sku})]}),i.jsxs("div",{className:"flex items-center justify-between mt-auto pt-3 border-t border-slate-100 dark:border-slate-700",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-[11px] uppercase tracking-wide text-slate-400 dark:text-slate-500 font-semibold",children:"Gi bn"}),i.jsx("p",{className:`text-sm md:text-base font-bold ${br?"text-slate-400 dark:text-slate-500":"text-blue-600 dark:text-blue-300"}`,children:Ie(cr)})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"text-[11px] uppercase tracking-wide text-slate-400 dark:text-slate-500 font-semibold",children:"Tn kho"}),i.jsx("span",{className:`inline-flex items-center justify-center min-w-[2.75rem] px-2.5 py-1 text-[11px] font-black rounded-lg ${qa}`,children:Math.max(0,Math.floor(_r))})]})]})]})},at.id)})})})]}),i.jsxs("div",{className:`w-full md:w-[40%] bg-white dark:bg-slate-800 md:border-l border-slate-200 dark:border-slate-700 flex flex-col transition-all duration-300 overflow-y-auto ${Ve==="products"?"hidden md:flex":"animate-fade-in"}`,children:[i.jsx("div",{className:"p-3 md:p-4 border-b border-slate-200 md:border-slate-200/50 dark:border-slate-700/50 bg-slate-50 md:bg-gradient-to-r md:from-emerald-50/30 md:via-teal-50/20 md:to-cyan-50/30 dark:from-slate-800/50 dark:via-slate-800/30 dark:to-slate-800/50",children:i.jsxs("div",{className:"customer-dropdown-container",children:[i.jsxs("label",{className:"flex items-center gap-2 text-sm font-semibold md:font-bold text-slate-900 dark:text-slate-100 mb-2 md:mb-3",children:[i.jsx("div",{className:"w-7 h-7 md:w-8 md:h-8 bg-emerald-500 md:bg-gradient-to-br md:from-emerald-500 md:to-teal-500 rounded-lg flex items-center justify-center md:shadow-lg",children:i.jsx("svg",{className:"w-4 h-4 md:w-5 md:h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),i.jsx("span",{children:"Khch hng"})]}),i.jsxs("div",{className:"relative flex flex-col md:flex-row gap-2",children:[i.jsxs("div",{className:"flex-1 relative",children:[i.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",children:i.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),i.jsx("input",{type:"text",placeholder:"Tm tn, s in thoi...",value:et,onChange:at=>lt(at.target.value),onFocus:()=>sr(!0),className:"w-full pl-10 pr-4 py-2 md:py-2.5 border md:border-2 border-slate-300 md:border-slate-300/50 dark:border-slate-600/50 rounded-lg md:rounded-xl bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 text-sm focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 transition-all placeholder:text-slate-400"})]}),i.jsxs("button",{onClick:()=>Ke(!0),className:"px-3 py-2 md:px-4 md:py-2.5 bg-emerald-500 md:bg-gradient-to-r md:from-emerald-500 md:to-teal-500 hover:bg-emerald-600 md:hover:from-emerald-600 md:hover:to-teal-600 text-white rounded-lg md:rounded-xl flex items-center justify-center gap-2 transition-all md:shadow-lg md:hover:shadow-xl md:hover:scale-105 md:active:scale-95 font-semibold md:font-bold",title:"Thm khch hng mi",children:[i.jsx(Cc,{className:"w-4 h-4 md:w-5 md:h-5"}),i.jsx("span",{className:"hidden sm:inline text-sm",children:"Thm"})]}),xr&&An.length>0&&i.jsx("div",{className:"absolute top-full left-0 right-0 z-10 mt-1 max-h-40 overflow-y-auto bg-white dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg shadow-lg",children:An.map(at=>i.jsxs("button",{onClick:()=>{mr(at),lt(at.name),sr(!1)},className:"w-full text-left px-3 py-2 hover:bg-slate-50 dark:hover:bg-slate-600 border-b border-slate-100 dark:border-slate-600 last:border-b-0",children:[i.jsx("div",{className:"font-medium text-slate-900 dark:text-slate-100",children:at.name}),at.phone&&i.jsx("div",{className:"text-sm text-slate-500",children:at.phone})]},at.id))})]}),Mt&&i.jsx("div",{className:"mt-2 md:mt-3 p-2 md:p-3.5 bg-blue-50 md:bg-gradient-to-r md:from-emerald-50 md:to-teal-50 dark:from-emerald-900/20 dark:to-teal-900/20 rounded-lg md:rounded-xl border md:border-2 border-blue-200 md:border-emerald-200 dark:border-emerald-800 md:shadow-sm",children:i.jsxs("div",{className:"flex items-start justify-between gap-2",children:[i.jsxs("div",{className:"flex items-center gap-2 md:gap-2.5 flex-1 min-w-0",children:[i.jsx("div",{className:"hidden md:flex w-10 h-10 bg-gradient-to-br from-emerald-500 to-teal-500 rounded-lg items-center justify-center shadow-lg flex-shrink-0",children:i.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("div",{className:"font-medium md:font-bold text-blue-900 md:text-emerald-900 dark:text-emerald-100 truncate text-sm md:text-base",children:Mt.name}),Mt.phone&&i.jsxs("div",{className:"text-xs text-blue-700 md:text-emerald-700 dark:text-emerald-300 flex items-center gap-1 mt-0.5",children:[i.jsx("svg",{className:"w-3 h-3 flex-shrink-0 hidden md:inline",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),i.jsx("span",{className:"truncate",children:Mt.phone})]})]})]}),i.jsx("button",{onClick:()=>{mr(null),lt("")},className:"w-7 h-7 md:w-8 md:h-8 bg-red-100 dark:bg-red-900/30 hover:bg-red-200 dark:hover:bg-red-900/50 text-red-600 dark:text-red-400 rounded-md md:rounded-lg flex items-center justify-center transition-all flex-shrink-0 md:shadow-sm md:hover:shadow-md text-lg",title:"Xa",children:""})]})})]})}),i.jsxs("div",{className:"p-3 md:p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3 md:mb-4 pb-2 md:pb-3 border-b md:border-b-2 border-slate-200 md:border-slate-200/50 dark:border-slate-700/50",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"hidden md:flex w-8 h-8 bg-gradient-to-br from-blue-500 to-indigo-500 rounded-lg items-center justify-center shadow-lg",children:i.jsx(Qf,{className:"w-4 h-4 text-white"})}),i.jsx("h3",{className:"text-base md:text-lg font-semibold md:font-black text-slate-900 dark:text-slate-100",children:"Gi hng"})]}),i.jsx("span",{className:"px-2 py-0.5 md:px-3 md:py-1 bg-blue-100 md:bg-gradient-to-r md:from-blue-100 md:to-indigo-100 dark:from-blue-900/30 dark:to-indigo-900/30 text-blue-700 dark:text-blue-300 rounded-full text-xs font-semibold md:font-bold md:shadow-sm",children:r.length})]}),r.length===0?i.jsxs("div",{className:"text-center py-12 md:py-16 mb-3",children:[i.jsx("div",{className:"mb-3 md:mb-4 flex items-center justify-center",children:i.jsx("div",{className:"w-16 h-16 md:w-20 md:h-20 bg-slate-100 md:bg-gradient-to-br md:from-slate-100 md:to-slate-200 dark:from-slate-800 dark:to-slate-700 rounded-2xl md:rounded-3xl flex items-center justify-center md:shadow-lg",children:i.jsx(Qf,{className:"w-8 h-8 md:w-10 md:h-10 text-slate-400 dark:text-slate-500"})})}),i.jsx("div",{className:"text-sm md:text-base font-semibold md:font-bold text-slate-600 dark:text-slate-400 mb-1",children:"Gi hng trng"}),i.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-500",children:"Chn sn phm  thm vo gi"})]}):i.jsx("div",{className:"space-y-2 md:space-y-2.5",children:r.map(at=>i.jsxs("div",{className:"group flex items-center gap-2 md:gap-3 p-2 md:p-3 border md:border-2 border-slate-200 md:border-slate-200/50 dark:border-slate-700/50 rounded-lg md:rounded-xl bg-white dark:bg-slate-800 md:hover:border-blue-400 dark:hover:border-blue-600 transition-all duration-200 md:hover:shadow-lg md:hover:shadow-blue-500/10",children:[i.jsx("div",{className:"w-10 h-10 md:w-12 md:h-12 bg-orange-50 md:bg-gradient-to-br md:from-orange-100 md:to-amber-100 dark:from-orange-900/30 dark:to-amber-900/30 rounded-lg md:rounded-xl flex items-center justify-center flex-shrink-0 md:shadow-sm md:group-hover:scale-110 transition-transform",children:i.jsx(gl,{className:"w-5 h-5 md:w-6 md:h-6 text-orange-500 dark:text-orange-400"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("div",{className:"font-medium md:font-bold text-xs md:text-sm text-slate-900 dark:text-slate-100 line-clamp-1 mb-0.5 md:mb-1",title:at.partName,children:at.partName}),i.jsx("div",{className:"inline-flex items-center gap-1 px-1.5 md:px-2 py-0.5 bg-slate-100 dark:bg-slate-700 rounded-md mb-0.5 md:mb-1",children:i.jsx("span",{className:"text-[9px] md:text-[10px] text-slate-500 dark:text-slate-400 font-medium md:font-semibold",children:at.sku})}),i.jsx("div",{className:"text-xs md:text-sm font-bold md:font-black text-blue-600 md:bg-gradient-to-r md:from-blue-600 md:to-indigo-600 dark:from-blue-400 dark:to-indigo-400 md:bg-clip-text md:text-transparent",children:Ie(at.sellingPrice)})]}),i.jsxs("div",{className:"flex items-center gap-1 md:gap-1.5 flex-shrink-0",children:[i.jsx("button",{onClick:()=>ht(at.partId,Math.max(1,at.quantity-1)),className:"w-7 h-7 md:w-8 md:h-8 flex items-center justify-center bg-slate-100 md:bg-gradient-to-r md:from-slate-100 md:to-slate-200 dark:from-slate-700 dark:to-slate-600 rounded-md md:rounded-lg text-slate-700 dark:text-slate-300 hover:bg-slate-200 md:hover:from-slate-200 md:hover:to-slate-300 dark:hover:from-slate-600 dark:hover:to-slate-500 transition-all md:shadow-sm md:hover:shadow-md font-bold",children:"-"}),i.jsx("span",{className:"w-8 md:w-10 text-center font-bold md:font-black text-xs md:text-sm text-slate-900 dark:text-slate-100 px-1 md:px-2 py-1 bg-slate-50 dark:bg-slate-700 rounded-md md:rounded-lg",children:at.quantity}),i.jsx("button",{onClick:()=>ht(at.partId,at.quantity+1),className:"w-7 h-7 md:w-8 md:h-8 flex items-center justify-center bg-blue-500 md:bg-gradient-to-r md:from-blue-500 md:to-indigo-500 dark:from-blue-600 dark:to-indigo-600 rounded-md md:rounded-lg text-white hover:bg-blue-600 md:hover:from-blue-600 md:hover:to-indigo-600 dark:hover:from-blue-700 dark:hover:to-indigo-700 transition-all md:shadow-md md:hover:shadow-lg font-bold",children:"+"}),i.jsx("button",{onClick:()=>ft(at.partId),className:"w-7 h-7 md:w-8 md:h-8 flex items-center justify-center bg-red-500 md:bg-gradient-to-r md:from-red-500 md:to-pink-500 hover:bg-red-600 md:hover:from-red-600 md:hover:to-pink-600 rounded-md md:rounded-lg text-white transition-all ml-0.5 md:ml-1 md:shadow-md md:hover:shadow-lg font-bold text-base md:text-lg",children:""})]})]},at.partId))})]}),r.length>0&&i.jsxs("div",{className:"border-t md:border-t-2 border-slate-200 md:border-slate-200/50 dark:border-slate-700/50 bg-slate-50 md:bg-gradient-to-br md:from-slate-50 md:to-blue-50/30 dark:from-slate-800 dark:to-slate-800/50",children:[i.jsxs("div",{className:"p-3 md:p-4 space-y-2 md:space-y-3 pb-20 md:pb-3",children:[i.jsxs("div",{className:"flex justify-between text-xs md:text-sm",children:[i.jsx("span",{className:"text-slate-600 dark:text-slate-400 font-medium",children:"Tng tin hng"}),i.jsx("span",{className:"font-semibold md:font-bold text-slate-900 dark:text-slate-100",children:Ie(bt)})]}),i.jsxs("div",{className:"space-y-2 md:space-y-2.5",children:[i.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between text-xs md:text-sm gap-1.5 md:gap-2",children:[i.jsx("span",{className:"text-slate-600 dark:text-slate-400 font-medium",children:"Gim gi:"}),i.jsxs("div",{className:"flex items-center gap-1.5 md:gap-2 w-full md:w-auto",children:[i.jsx("input",{type:"number",value:Xt==="amount"?Ir:ur,onChange:at=>{const cr=Number(at.target.value)||0;if(Xt==="amount")er(Math.min(cr,bt));else{const _r=Math.min(cr,100);wr(_r),er(Math.round(bt*_r/100))}},className:"flex-1 md:w-24 px-2 md:px-3 py-1.5 md:py-2 text-right text-xs md:text-sm border md:border-2 border-slate-300 md:border-slate-300 dark:border-slate-600 rounded-lg md:rounded-xl bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all font-medium md:font-semibold",placeholder:"0",min:"0",max:Xt==="amount"?bt:100}),i.jsxs("select",{value:Xt,onChange:at=>{const cr=at.target.value;Gt(cr),er(0),wr(0)},className:"px-2 md:px-3 py-1.5 md:py-2 border md:border-2 border-slate-300 md:border-slate-300 dark:border-slate-600 rounded-lg md:rounded-xl bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 text-xs md:text-sm font-semibold md:font-bold focus:ring-2 focus:ring-purple-500 transition-all",children:[i.jsx("option",{value:"amount",children:""}),i.jsx("option",{value:"percent",children:"%"})]})]})]}),Xt==="percent"&&i.jsx("div",{className:"flex gap-1.5 md:gap-2 justify-end flex-wrap",children:[5,10,15,20].map(at=>i.jsxs("button",{onClick:()=>{wr(at),er(Math.round(bt*at/100))},className:"px-2 md:px-3 py-1 md:py-1.5 text-[10px] md:text-xs font-semibold md:font-bold bg-purple-100 md:bg-gradient-to-r md:from-purple-100 md:to-pink-100 dark:from-purple-900/30 dark:to-pink-900/30 hover:bg-purple-200 md:hover:from-purple-200 md:hover:to-pink-200 dark:hover:from-purple-900/50 dark:hover:to-pink-900/50 text-purple-700 dark:text-purple-300 rounded-md md:rounded-lg transition-all md:shadow-sm md:hover:shadow-md",children:[at,"%"]},at))}),Xt==="percent"&&ur>0&&i.jsxs("div",{className:"text-[10px] md:text-xs text-slate-500 dark:text-slate-400 text-right",children:["= ",Ie(Ir)]})]}),i.jsxs("div",{className:"flex justify-between items-center pt-2 md:pt-3 mt-2 md:mt-3 border-t md:border-t-2 border-slate-200 dark:border-slate-700 p-2 md:p-3 -mx-3 md:-mx-4 bg-blue-600 md:bg-gradient-to-r md:from-blue-600 md:to-indigo-600 dark:from-blue-700 dark:to-indigo-700 rounded-b-lg md:rounded-b-xl md:shadow-lg",children:[i.jsx("span",{className:"font-semibold md:font-bold text-white text-xs md:text-sm",children:"Khch phi tr"}),i.jsx("span",{className:"font-black text-lg md:text-2xl text-white",children:Ie(Math.max(0,Ut-Ir))})]})]}),i.jsxs("div",{className:"px-3 md:px-4 pb-3 md:pb-4",children:[i.jsxs("label",{className:"flex items-center gap-2 text-xs md:text-sm font-semibold md:font-bold text-slate-900 dark:text-slate-100 mb-2 md:mb-3",children:[i.jsx("span",{children:"Phng thc thanh ton"}),i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 md:gap-3",children:[i.jsxs("button",{onClick:()=>Qt("cash"),className:`flex items-center justify-center gap-1.5 md:gap-2 px-3 md:px-4 py-2 md:py-3 rounded-lg md:rounded-xl border md:border-2 transition-all font-semibold md:font-bold md:shadow-sm md:hover:shadow-md ${We==="cash"?"border-emerald-500 bg-emerald-50 md:bg-gradient-to-r md:from-emerald-50 md:to-green-50 dark:from-emerald-900/30 dark:to-green-900/30 text-emerald-700 dark:text-emerald-400 md:shadow-lg":"border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-700 dark:text-slate-300 hover:border-emerald-400"}`,children:[i.jsx(S6,{className:"w-4 h-4 md:w-5 md:h-5"}),i.jsx("span",{className:"text-xs md:text-sm",children:"Tin mt"})]}),i.jsxs("button",{onClick:()=>Qt("bank"),className:`flex items-center justify-center gap-1.5 md:gap-2 px-3 md:px-4 py-2 md:py-3 rounded-lg md:rounded-xl border md:border-2 transition-all font-semibold md:font-bold md:shadow-sm md:hover:shadow-md ${We==="bank"?"border-blue-500 bg-blue-50 md:bg-gradient-to-r md:from-blue-50 md:to-cyan-50 dark:from-blue-900/30 dark:to-cyan-900/30 text-blue-700 dark:text-blue-400 md:shadow-lg":"border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-700 dark:text-slate-300 hover:border-blue-400"}`,children:[i.jsx(fF,{className:"w-4 h-4 md:w-5 md:h-5"}),i.jsx("span",{className:"text-xs md:text-sm",children:"Chuyn khon"})]})]})]}),We&&i.jsxs("div",{className:"px-3 md:px-4 pb-3 md:pb-4",children:[i.jsx("label",{className:"block text-xs md:text-sm font-semibold md:font-bold text-slate-900 dark:text-slate-100 mb-2 md:mb-3",children:"Hnh thc"}),i.jsxs("div",{className:"grid grid-cols-3 gap-1.5 md:gap-2",children:[i.jsx("button",{onClick:()=>{gr("full"),Rr(0)},className:`px-2 md:px-3 py-2 md:py-2.5 text-[10px] md:text-xs rounded-lg md:rounded-xl border md:border-2 transition-all font-semibold md:font-bold md:shadow-sm ${Cr==="full"?"border-orange-500 bg-orange-50 md:bg-gradient-to-r md:from-orange-50 md:to-amber-50 dark:from-orange-900/30 dark:to-amber-900/30 text-orange-700 dark:text-orange-400 md:shadow-lg":"border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-600 dark:text-slate-400 hover:border-orange-400"}`,children:""}),i.jsx("button",{onClick:()=>gr("partial"),className:`px-2 md:px-3 py-2 md:py-2.5 text-[10px] md:text-xs rounded-lg md:rounded-xl border md:border-2 transition-all font-semibold md:font-bold md:shadow-sm ${Cr==="partial"?"border-orange-500 bg-orange-50 md:bg-gradient-to-r md:from-orange-50 md:to-amber-50 dark:from-orange-900/30 dark:to-amber-900/30 text-orange-700 dark:text-orange-400 md:shadow-lg":"border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-600 dark:text-slate-400 hover:border-orange-400"}`,children:"1 phn"}),i.jsx("button",{onClick:()=>{gr("note"),Rr(0)},className:`px-2 md:px-3 py-2 md:py-2.5 text-[10px] md:text-xs rounded-lg md:rounded-xl border md:border-2 transition-all font-semibold md:font-bold md:shadow-sm ${Cr==="note"?"border-orange-500 bg-orange-50 md:bg-gradient-to-r md:from-orange-50 md:to-amber-50 dark:from-orange-900/30 dark:to-amber-900/30 text-orange-700 dark:text-orange-400 md:shadow-lg":"border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-slate-600 dark:text-slate-400 hover:border-orange-400"}`,children:"Ghi n"})]})]}),Cr==="partial"&&i.jsxs("div",{className:"px-4 pb-3",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-900 dark:text-slate-100 mb-2",children:"S tin khch tr"}),i.jsx("input",{type:"number",value:_n,onChange:at=>Rr(Number(at.target.value)||0),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700",placeholder:"0"}),i.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:["Cn li:"," ",Ie(Math.max(0,Ut-Ir-_n))," ",""]})]}),i.jsxs("div",{className:"px-3 md:px-4 pb-2 md:pb-3 space-y-1.5 md:space-y-2",children:[i.jsx("div",{className:"text-xs md:text-sm font-semibold md:font-medium text-slate-900 dark:text-slate-100 mb-1.5 md:mb-2",children:"Thi gian bn hng"}),i.jsxs("label",{className:"flex items-center gap-1.5 md:gap-2 cursor-pointer",children:[i.jsx("input",{type:"radio",name:"salesTime",defaultChecked:!0,className:"w-3 h-3 md:w-3.5 md:h-3.5 text-pink-600 focus:ring-pink-500"}),i.jsx("span",{className:"text-xs md:text-sm text-slate-700 dark:text-slate-300",children:"Thi gian hin ti"})]}),i.jsxs("label",{className:"flex items-center gap-1.5 md:gap-2 cursor-pointer",children:[i.jsx("input",{type:"radio",name:"salesTime",className:"w-3 h-3 md:w-3.5 md:h-3.5 text-blue-600 focus:ring-blue-500"}),i.jsx("span",{className:"text-xs md:text-sm text-slate-700 dark:text-slate-300",children:"Ty chnh"})]}),i.jsxs("label",{className:"flex items-center gap-1.5 cursor-pointer",children:[i.jsx("input",{type:"checkbox",className:"w-3 h-3 md:w-3.5 md:h-3.5 rounded border-slate-300 text-blue-600 focus:ring-blue-500"}),i.jsx("span",{className:"text-sm md:text-sm text-slate-700 dark:text-slate-300",children:"Ghi ch ring cho n hng"})]}),i.jsxs("label",{className:"flex items-center gap-1.5 md:gap-2 cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:Sn,onChange:at=>we(at.target.checked),className:"w-3 h-3 md:w-3.5 md:h-3.5 rounded border-slate-300 text-blue-600 focus:ring-blue-500"}),i.jsx("span",{className:"text-xs md:text-sm text-slate-700 dark:text-slate-300",children:"ng thi in ho n"})]})]}),i.jsxs("div",{className:"p-3 md:p-4 pt-0 flex flex-col md:flex-row gap-2 md:gap-3",children:[i.jsx("button",{onClick:a,className:"flex-1 px-3 md:px-4 py-2 md:py-3 bg-white dark:bg-slate-700 border md:border-2 border-slate-300 dark:border-slate-600 hover:border-slate-400 dark:hover:border-slate-500 hover:bg-slate-50 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-300 font-semibold md:font-bold rounded-lg md:rounded-xl transition-all md:shadow-sm md:hover:shadow-md text-sm md:text-base",children:"LU NHP"}),i.jsx("button",{onClick:pa,disabled:!We||!Cr,className:`flex-1 px-3 md:px-4 py-2 md:py-3 font-bold md:font-black rounded-lg md:rounded-xl transition-all md:shadow-lg text-sm md:text-base ${We&&Cr?"bg-orange-500 md:bg-gradient-to-r md:from-orange-500 md:to-red-500 hover:bg-orange-600 md:hover:from-orange-600 md:hover:to-red-600 text-white md:shadow-orange-500/30 md:hover:shadow-xl md:hover:shadow-orange-500/40 md:hover:scale-105 md:active:scale-95":"bg-slate-300 dark:bg-slate-700 text-slate-500 dark:text-slate-500 cursor-not-allowed opacity-60"}`,children:"XUT BN"})]})]})]})]}),i.jsx(rbe,{isOpen:lr,onClose:()=>mt(!1),sales:te,currentBranchId:l,onPrintReceipt:is,onEditSale:el,onDeleteSale:ta,page:Y.page,totalPages:Y.totalPages,total:Y.total,hasMore:Y.hasMore,pageSize:S,onPrevPage:Ce,onNextPage:()=>{var at,cr;if(ae){const _r=(at=Le==null?void 0:Le.meta)==null?void 0:at.nextAfterDate,br=(cr=Le==null?void 0:Le.meta)==null?void 0:cr.nextAfterId;(_r||br)&&Se({afterDate:_r,afterId:br})}else me()},onPageSizeChange:se,search:E,onSearchChange:at=>{D(at),at||k(1)},fromDate:R,toDate:U,onDateRangeChange:(at,cr)=>{z(at),Z(cr),k(1),ae&&Se(null)},status:q,onStatusChange:at=>{K(at),k(1),ae&&Se(null)},paymentMethodFilter:Q,onPaymentMethodFilterChange:at=>{re(at),k(1),ae&&Se(null)},keysetMode:ae,onToggleKeyset:at=>{de(at),k(1),Se(null)},customerDebts:N}),tr&&i.jsx("div",{id:"last-receipt",className:"hidden print:block",children:i.jsxs("div",{style:{width:"148mm",minHeight:"210mm",margin:"0 auto",padding:"15mm",fontFamily:"Arial, sans-serif",fontSize:"12px",backgroundColor:"white",color:"#000",boxSizing:"border-box"},children:[i.jsxs("div",{style:{textAlign:"center",marginBottom:"20px",borderBottom:"2px solid #333",paddingBottom:"15px"},children:[i.jsx("img",{src:"https://raw.githubusercontent.com/Nhan-Lam-SmartCare/Motocare/main/public/logo.png",alt:"Nhn-Lm SmartCare",style:{width:"120px",height:"120px",margin:"0 auto 10px",display:"block"},onError:at=>{at.currentTarget.style.display="none"}}),i.jsx("h1",{style:{fontSize:"24px",fontWeight:"bold",margin:"0 0 8px 0",color:"#c92a2a"},children:"Nhn-Lm SmartCare"}),i.jsxs("div",{style:{fontSize:"11px",lineHeight:"1.6"},children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(vee,{className:"w-4 h-4","aria-hidden":"true"}),i.jsx("span",{children:"a ch: 4p Ph Li B, Ph Thun B, Hng Ng, ng Thp"})]}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"w-4 h-4",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 6.75c0 8.284 6.716 15 15 15 .828 0 1.5-.672 1.5-1.5v-2.25a1.5 1.5 0 00-1.5-1.5h-1.158a1.5 1.5 0 00-1.092.468l-.936.996a1.5 1.5 0 01-1.392.444 12.035 12.035 0 01-7.29-7.29 1.5 1.5 0 01.444-1.392l.996-.936a1.5 1.5 0 00.468-1.092V6.75A1.5 1.5 0 006.75 5.25H4.5c-.828 0-1.5.672-1.5 1.5z"})}),i.jsx("span",{children:"in thoi: 0947747907"})]})]})]}),i.jsxs("div",{style:{backgroundColor:"#f8f9fa",border:"1px solid #dee2e6",borderRadius:"6px",padding:"10px 12px",marginBottom:"20px",fontSize:"11px"},children:[i.jsx("div",{style:{fontWeight:"bold",marginBottom:"6px"},children:" Thng tin chuyn khon:"}),i.jsxs("div",{style:{lineHeight:"1.6"},children:[i.jsxs("div",{children:[" Ngn hng: ",i.jsx("strong",{children:"NH Lin Vit (LPBank)"})]}),i.jsxs("div",{children:[" S ti khon: ",i.jsx("strong",{children:"LAMVOT"})]}),i.jsxs("div",{children:[" Ch ti khon: ",i.jsx("strong",{children:"VO THANH LAM"})]})]})]}),i.jsxs("div",{style:{textAlign:"center",marginBottom:"15px"},children:[i.jsx("h2",{style:{fontSize:"18px",fontWeight:"bold",margin:"0 0 8px 0",textTransform:"uppercase",letterSpacing:"1px"},children:"HA N BN HNG"}),i.jsxs("div",{style:{fontSize:"11px",color:"#666"},children:["S: ",i.jsx("strong",{style:{color:"#000"},children:tr})," - Ngy:"," ",i.jsx("strong",{style:{color:"#000"},children:Bn(new Date,!0)})]})]}),i.jsx("div",{style:{marginBottom:"15px",padding:"10px",backgroundColor:"#f8f9fa",borderRadius:"4px"},children:i.jsxs("div",{style:{fontSize:"12px",lineHeight:"1.8"},children:[i.jsxs("div",{children:[i.jsx("strong",{children:"Khch hng:"})," ",Nr||"Khch l"]}),Ot&&i.jsxs("div",{children:[i.jsx("strong",{children:"in thoi:"})," ",Ot]})]})}),i.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",marginBottom:"15px",fontSize:"11px"},children:[i.jsx("thead",{children:i.jsxs("tr",{style:{backgroundColor:"#f1f3f5",borderTop:"2px solid #333",borderBottom:"2px solid #333"},children:[i.jsx("th",{style:{textAlign:"center",padding:"8px 4px",width:"8%",fontWeight:"bold"},children:"STT"}),i.jsx("th",{style:{textAlign:"left",padding:"8px 6px",width:"37%",fontWeight:"bold"},children:"Tn sn phm"}),i.jsx("th",{style:{textAlign:"center",padding:"8px 4px",width:"10%",fontWeight:"bold"},children:"SL"}),i.jsx("th",{style:{textAlign:"right",padding:"8px 6px",width:"20%",fontWeight:"bold"},children:"n gi"}),i.jsx("th",{style:{textAlign:"right",padding:"8px 6px",width:"25%",fontWeight:"bold"},children:"Thnh tin"})]})}),i.jsx("tbody",{children:$r.map((at,cr)=>i.jsx(ua.Fragment,{children:i.jsxs("tr",{style:{borderBottom:"1px solid #e9ecef"},children:[i.jsx("td",{style:{textAlign:"center",padding:"10px 4px",verticalAlign:"top"},children:cr+1}),i.jsxs("td",{style:{padding:"10px 6px",verticalAlign:"top"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"3px"},children:at.partName}),at.sku&&i.jsxs("div",{style:{fontSize:"9px",color:"#868e96"},children:["SKU: ",at.sku]})]}),i.jsx("td",{style:{textAlign:"center",padding:"10px 4px",verticalAlign:"top",fontWeight:"600"},children:at.quantity}),i.jsx("td",{style:{textAlign:"right",padding:"10px 6px",verticalAlign:"top"},children:Ie(at.sellingPrice)}),i.jsx("td",{style:{textAlign:"right",padding:"10px 6px",verticalAlign:"top",fontWeight:"600"},children:Ie(at.sellingPrice*at.quantity)})]})},at.partId))})]}),i.jsx("div",{style:{borderTop:"2px solid #333",paddingTop:"12px",marginBottom:"15px"},children:i.jsx("table",{style:{width:"100%",fontSize:"12px"},children:i.jsxs("tbody",{children:[i.jsxs("tr",{children:[i.jsxs("td",{style:{padding:"6px 0",textAlign:"right"},children:["Tng cng (",pr," sn phm):"]}),i.jsx("td",{style:{padding:"6px 0 6px 20px",textAlign:"right",width:"30%",fontWeight:"600"},children:Ie(Jt)})]}),Yt>0&&i.jsxs("tr",{children:[i.jsx("td",{style:{padding:"6px 0",textAlign:"right",color:"#c92a2a"},children:"Gim gi:"}),i.jsxs("td",{style:{padding:"6px 0 6px 20px",textAlign:"right",fontWeight:"600",color:"#c92a2a"},children:["-",Ie(Yt)]})]}),i.jsxs("tr",{style:{borderTop:"1px solid #dee2e6",fontSize:"14px"},children:[i.jsx("td",{style:{padding:"10px 0",textAlign:"right",fontWeight:"bold"},children:"TNG THANH TON:"}),i.jsx("td",{style:{padding:"10px 0 10px 20px",textAlign:"right",fontWeight:"bold",fontSize:"16px",color:"#2f9e44"},children:Ie(dr)})]})]})})}),i.jsxs("div",{style:{marginBottom:"20px",padding:"10px 12px",backgroundColor:"#f8f9fa",borderRadius:"4px",fontSize:"11px"},children:[i.jsxs("div",{style:{marginBottom:"4px"},children:[i.jsx("strong",{children:"Hnh thc thanh ton:"})," ",We==="cash"?"Tin mt":"Chuyn khon"]}),i.jsx("div",{style:{fontStyle:"italic",color:"#495057"},children:Cr==="full"?"  thanh ton ":Cr==="partial"?`Thanh ton mt phn: ${Ie(_n)}`:"Ghi n"})]}),i.jsx("div",{style:{marginTop:"30px",borderTop:"1px solid #dee2e6",paddingTop:"20px"},children:i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"11px"},children:[i.jsxs("div",{style:{textAlign:"center",width:"40%"},children:[i.jsx("div",{style:{fontWeight:"bold",marginBottom:"50px",fontSize:"12px"},children:"Khch hng"}),i.jsx("div",{style:{fontStyle:"italic",color:"#868e96"},children:"(K v ghi r h tn)"})]}),i.jsxs("div",{style:{textAlign:"center",width:"40%"},children:[i.jsx("div",{style:{fontWeight:"bold",marginBottom:"50px",fontSize:"12px"},children:"Ngi bn hng"}),i.jsx("div",{style:{fontStyle:"italic",color:"#868e96"},children:"(K v ghi r h tn)"})]})]})}),i.jsxs("div",{style:{textAlign:"center",marginTop:"25px",paddingTop:"15px",borderTop:"1px dashed #adb5bd",fontSize:"11px",fontStyle:"italic",color:"#495057"},children:[i.jsxs("div",{style:{marginBottom:"5px",display:"flex",alignItems:"center",justifyContent:"center",gap:"6px"},children:[i.jsx("span",{style:{display:"inline-flex"},children:"*"}),"Cm n qu khch  s dng dch v",i.jsx("span",{style:{display:"inline-flex"},children:"*"})]}),i.jsx("div",{children:"Hn gp li qu khch!"})]})]})}),kr&&i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl w-full max-w-md mx-4",children:[i.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-slate-200 dark:border-slate-700",children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Thm khch hng mi"}),i.jsx("button",{onClick:()=>{Ke(!1),Kt({name:"",phone:"",vehicleModel:"",licensePlate:""})},className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-200",children:i.jsx(mp,{className:"w-5 h-5"})})]}),i.jsxs("div",{className:"p-4 space-y-4",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:["Tn khch hng ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"text",value:vt.name,onChange:at=>Kt({...vt,name:at.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500",placeholder:"Nhp tn khch hng"})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:["S in thoi ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"tel",value:vt.phone,onChange:at=>Kt({...vt,phone:at.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500",placeholder:"Nhp s in thoi"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Dng xe"}),i.jsx("input",{type:"text",value:vt.vehicleModel,onChange:at=>Kt({...vt,vehicleModel:at.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500",placeholder:"VD: Honda SH 2023"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Bin s xe"}),i.jsx("input",{type:"text",value:vt.licensePlate,onChange:at=>Kt({...vt,licensePlate:at.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500",placeholder:"VD: 30A-12345"})]})]}),i.jsxs("div",{className:"flex gap-2 p-4 border-t border-slate-200 dark:border-slate-700",children:[i.jsx("button",{onClick:()=>{Ke(!1),Kt({name:"",phone:"",vehicleModel:"",licensePlate:""})},className:"flex-1 px-4 py-2 bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-200 dark:hover:bg-slate-600",children:"Hy"}),i.jsx("button",{onClick:On,className:"flex-1 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600",children:"Lu"})]})]})}),Ne&&le&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl w-full max-w-4xl max-h-[90vh] flex flex-col",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 px-6 py-4 flex items-center justify-between rounded-t-xl flex-shrink-0",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:"Xem trc ha n"}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("button",{onClick:To,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg flex items-center gap-2 transition",children:[i.jsx(Kg,{className:"w-4 h-4"}),"In ha n"]}),i.jsx("button",{onClick:()=>{Me(!1),ve(null)},className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-300","aria-label":"ng",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"w-5 h-5",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]})]}),i.jsx("div",{className:"flex-1 overflow-y-auto p-6 bg-slate-100 dark:bg-slate-900",children:i.jsx("div",{className:"bg-white shadow-lg mx-auto",style:{width:"80mm",minHeight:"100mm",color:"#000"},children:i.jsxs("div",{style:{padding:"5mm"},children:[i.jsx("div",{style:{borderBottom:"2px solid #3b82f6",paddingBottom:"2mm",marginBottom:"3mm"},children:i.jsxs("div",{style:{textAlign:"center"},children:[(Oe==null?void 0:Oe.logo_url)&&i.jsx("img",{src:Oe.logo_url,alt:"Logo",style:{height:"12mm",width:"auto",objectFit:"contain",margin:"0 auto 2mm"}}),i.jsx("div",{style:{fontWeight:"bold",fontSize:"11pt",color:"#1e40af"},children:(Oe==null?void 0:Oe.store_name)||"Nhn Lm SmartCare"}),i.jsx("div",{style:{fontSize:"8pt",color:"#000",marginTop:"1mm"},children:(Oe==null?void 0:Oe.address)&&` ${Oe.address}`}),i.jsx("div",{style:{fontSize:"8pt",color:"#000"},children:(Oe==null?void 0:Oe.phone)&&` ${Oe.phone}`})]})}),i.jsxs("div",{style:{textAlign:"center",marginBottom:"3mm"},children:[i.jsx("h1",{style:{fontSize:"14pt",fontWeight:"bold",margin:"0",color:"#1e40af"},children:"HA N BN HNG"}),i.jsx("div",{style:{fontSize:"8pt",color:"#666",marginTop:"1mm"},children:new Date(le.date).toLocaleString("vi-VN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}),i.jsxs("div",{style:{fontSize:"8pt",fontWeight:"bold",marginTop:"0.5mm"},children:["M: ",F1(le.id)||le.id]})]}),i.jsxs("div",{style:{border:"1px solid #ddd",padding:"2mm",marginBottom:"3mm",borderRadius:"2mm",backgroundColor:"#f8fafc",fontSize:"8.5pt"},children:[i.jsxs("div",{style:{marginBottom:"1mm"},children:[i.jsx("span",{style:{fontWeight:"bold"},children:"KH:"})," ",le.customer.name]}),le.customer.phone&&i.jsxs("div",{children:[i.jsx("span",{style:{fontWeight:"bold"},children:"ST:"})," ",le.customer.phone]})]}),i.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",marginBottom:"3mm",fontSize:"8.5pt"},children:[i.jsx("thead",{children:i.jsxs("tr",{style:{borderBottom:"1px solid #ddd"},children:[i.jsx("th",{style:{textAlign:"left",padding:"1mm",fontSize:"8pt"},children:"Sn phm"}),i.jsx("th",{style:{textAlign:"center",padding:"1mm",width:"15%",fontSize:"8pt"},children:"SL"}),i.jsx("th",{style:{textAlign:"right",padding:"1mm",width:"28%",fontSize:"8pt"},children:"Thnh tin"})]})}),i.jsx("tbody",{children:le.items.map((at,cr)=>{const _r=at.sellingPrice||at.sellingprice||at.price||0,br=at.quantity||0;return i.jsxs("tr",{style:{borderBottom:"1px dashed #ddd"},children:[i.jsx("td",{style:{padding:"1.5mm 1mm",fontSize:"8.5pt"},children:at.partName||at.partname}),i.jsx("td",{style:{textAlign:"center",padding:"1.5mm 1mm",fontSize:"8.5pt"},children:br}),i.jsx("td",{style:{textAlign:"right",padding:"1.5mm 1mm",fontSize:"8.5pt",fontWeight:"bold"},children:Ie(_r*br)})]},cr)})})]}),i.jsxs("div",{style:{borderTop:"2px solid #333",paddingTop:"2mm",marginBottom:"3mm",fontSize:"9pt"},children:[le.discount>0&&i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"1mm",color:"#e74c3c"},children:[i.jsx("span",{children:"Gim gi:"}),i.jsxs("span",{children:["-",Ie(le.discount)]})]}),i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontWeight:"bold",fontSize:"11pt"},children:[i.jsx("span",{children:"TNG CNG:"}),i.jsxs("span",{style:{color:"#2563eb"},children:[Ie(le.total)," "]})]})]}),(Oe==null?void 0:Oe.bank_name)&&i.jsxs("div",{style:{borderTop:"1px dashed #999",paddingTop:"2mm",marginBottom:"3mm",fontSize:"7.5pt",textAlign:"center"},children:[i.jsxs("div",{style:{fontWeight:"bold",marginBottom:"1mm"},children:["Chuyn khon: ",Oe.bank_name]}),Oe.bank_account_number&&i.jsxs("div",{children:["STK: ",Oe.bank_account_number]}),Oe.bank_account_holder&&i.jsx("div",{style:{fontSize:"7pt"},children:Oe.bank_account_holder}),Oe.bank_qr_url&&i.jsx("div",{style:{marginTop:"2mm"},children:i.jsx("img",{src:Oe.bank_qr_url,alt:"QR Banking",style:{height:"20mm",width:"20mm",objectFit:"contain",margin:"0 auto"}})})]}),i.jsxs("div",{style:{textAlign:"center",fontSize:"7.5pt",color:"#666",borderTop:"1px dashed #999",paddingTop:"2mm"},children:[i.jsx("div",{children:"Cm n qu khch!"}),i.jsx("div",{children:"Hn gp li"})]})]})})})]})}),Ve==="products"&&r.length>0&&i.jsxs("button",{onClick:()=>Vt("cart"),className:"md:hidden fixed bottom-24 right-4 z-50 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white rounded-full shadow-2xl p-3 transition-all duration-200 hover:scale-105 active:scale-95","aria-label":"M gi hng",children:[i.jsxs("div",{className:"relative",children:[i.jsx(Qf,{className:"w-5 h-5"}),r.length>0&&i.jsx("span",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-[11px] font-bold rounded-full w-5 h-5 flex items-center justify-center animate-pulse",children:r.length})]}),i.jsx("div",{className:"absolute -top-1 -right-1 w-2.5 h-2.5 bg-red-500 rounded-full animate-ping"})]})]})};/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var cw={};cw.version="0.18.5";var NH=1252,abe=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],IC={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},DC=function(e){abe.indexOf(e)!=-1&&(NH=IC[0]=e)};function sbe(){DC(1252)}var Zd=function(e){DC(e)};function MC(){Zd(1200),sbe()}function NI(e){for(var t=[],r=0,n=e.length;r<n;++r)t[r]=e.charCodeAt(r);return t}function ibe(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r)+(e.charCodeAt(2*r+1)<<8));return t.join("")}function _H(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r+1)+(e.charCodeAt(2*r)<<8));return t.join("")}var bg=function(e){var t=e.charCodeAt(0),r=e.charCodeAt(1);return t==255&&r==254?ibe(e.slice(2)):t==254&&r==255?_H(e.slice(2)):t==65279?e.slice(1):e},O2=function(t){return String.fromCharCode(t)},_I=function(t){return String.fromCharCode(t)},ob,Zh="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function cb(e){for(var t="",r=0,n=0,a=0,s=0,l=0,o=0,c=0,d=0;d<e.length;)r=e.charCodeAt(d++),s=r>>2,n=e.charCodeAt(d++),l=(r&3)<<4|n>>4,a=e.charCodeAt(d++),o=(n&15)<<2|a>>6,c=a&63,isNaN(n)?o=c=64:isNaN(a)&&(c=64),t+=Zh.charAt(s)+Zh.charAt(l)+Zh.charAt(o)+Zh.charAt(c);return t}function Pc(e){var t="",r=0,n=0,a=0,s=0,l=0,o=0,c=0;e=e.replace(/[^\w\+\/\=]/g,"");for(var d=0;d<e.length;)s=Zh.indexOf(e.charAt(d++)),l=Zh.indexOf(e.charAt(d++)),r=s<<2|l>>4,t+=String.fromCharCode(r),o=Zh.indexOf(e.charAt(d++)),n=(l&15)<<4|o>>2,o!==64&&(t+=String.fromCharCode(n)),c=Zh.indexOf(e.charAt(d++)),a=(o&3)<<6|c,c!==64&&(t+=String.fromCharCode(a));return t}var ra=(function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node})(),sh=(function(){if(typeof Buffer<"u"){var e=!Buffer.from;if(!e)try{Buffer.from("foo","utf8")}catch{e=!0}return e?function(t,r){return r?new Buffer(t,r):new Buffer(t)}:Buffer.from.bind(Buffer)}return function(){}})();function of(e){return ra?Buffer.alloc?Buffer.alloc(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}function SI(e){return ra?Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}var Sc=function(t){return ra?sh(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)&255})};function Pk(e){if(typeof ArrayBuffer>"u")return Sc(e);for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),n=0;n!=e.length;++n)r[n]=e.charCodeAt(n)&255;return t}function vf(e){if(Array.isArray(e))return e.map(function(n){return String.fromCharCode(n)}).join("");for(var t=[],r=0;r<e.length;++r)t[r]=String.fromCharCode(e[r]);return t.join("")}function lbe(e){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(e)}function LC(e){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(e instanceof ArrayBuffer)return LC(new Uint8Array(e));for(var t=new Array(e.length),r=0;r<e.length;++r)t[r]=e[r];return t}var pl=ra?function(e){return Buffer.concat(e.map(function(t){return Buffer.isBuffer(t)?t:sh(t)}))}:function(e){if(typeof Uint8Array<"u"){var t=0,r=0;for(t=0;t<e.length;++t)r+=e[t].length;var n=new Uint8Array(r),a=0;for(t=0,r=0;t<e.length;r+=a,++t)if(a=e[t].length,e[t]instanceof Uint8Array)n.set(e[t],r);else{if(typeof e[t]=="string")throw"wtf";n.set(new Uint8Array(e[t]),r)}return n}return[].concat.apply([],e.map(function(s){return Array.isArray(s)?s:[].slice.call(s)}))};function obe(e){for(var t=[],r=0,n=e.length+250,a=of(e.length+255),s=0;s<e.length;++s){var l=e.charCodeAt(s);if(l<128)a[r++]=l;else if(l<2048)a[r++]=192|l>>6&31,a[r++]=128|l&63;else if(l>=55296&&l<57344){l=(l&1023)+64;var o=e.charCodeAt(++s)&1023;a[r++]=240|l>>8&7,a[r++]=128|l>>2&63,a[r++]=128|o>>6&15|(l&3)<<4,a[r++]=128|o&63}else a[r++]=224|l>>12&15,a[r++]=128|l>>6&63,a[r++]=128|l&63;r>n&&(t.push(a.slice(0,r)),r=0,a=of(65535),n=65530)}return t.push(a.slice(0,r)),pl(t)}var Co=/\u0000/g,vg=/[\u0001-\u0006]/g;function x1(e){for(var t="",r=e.length-1;r>=0;)t+=e.charAt(r--);return t}function Qd(e,t){var r=""+e;return r.length>=t?r:oi("0",t-r.length)+r}function RC(e,t){var r=""+e;return r.length>=t?r:oi(" ",t-r.length)+r}function dw(e,t){var r=""+e;return r.length>=t?r:r+oi(" ",t-r.length)}function cbe(e,t){var r=""+Math.round(e);return r.length>=t?r:oi("0",t-r.length)+r}function dbe(e,t){var r=""+e;return r.length>=t?r:oi("0",t-r.length)+r}var jI=Math.pow(2,32);function Kx(e,t){if(e>jI||e<-jI)return cbe(e,t);var r=Math.round(e);return dbe(r,t)}function uw(e,t){return t=t||0,e.length>=7+t&&(e.charCodeAt(t)|32)===103&&(e.charCodeAt(t+1)|32)===101&&(e.charCodeAt(t+2)|32)===110&&(e.charCodeAt(t+3)|32)===101&&(e.charCodeAt(t+4)|32)===114&&(e.charCodeAt(t+5)|32)===97&&(e.charCodeAt(t+6)|32)===108}var CI=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],tN=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function ube(e){return e||(e={}),e[0]="General",e[1]="0",e[2]="0.00",e[3]="#,##0",e[4]="#,##0.00",e[9]="0%",e[10]="0.00%",e[11]="0.00E+00",e[12]="# ?/?",e[13]="# ??/??",e[14]="m/d/yy",e[15]="d-mmm-yy",e[16]="d-mmm",e[17]="mmm-yy",e[18]="h:mm AM/PM",e[19]="h:mm:ss AM/PM",e[20]="h:mm",e[21]="h:mm:ss",e[22]="m/d/yy h:mm",e[37]="#,##0 ;(#,##0)",e[38]="#,##0 ;[Red](#,##0)",e[39]="#,##0.00;(#,##0.00)",e[40]="#,##0.00;[Red](#,##0.00)",e[45]="mm:ss",e[46]="[h]:mm:ss",e[47]="mmss.0",e[48]="##0.0E+0",e[49]="@",e[56]='"/ "hh""mm""ss" "',e}var En={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},AI={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},hbe={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function hw(e,t,r){for(var n=e<0?-1:1,a=e*n,s=0,l=1,o=0,c=1,d=0,f=0,p=Math.floor(a);d<t&&(p=Math.floor(a),o=p*l+s,f=p*d+c,!(a-p<5e-8));)a=1/(a-p),s=l,l=o,c=d,d=f;if(f>t&&(d>t?(f=c,o=s):(f=d,o=l)),!r)return[0,n*o,f];var y=Math.floor(n*o/f);return[y,n*o-y*f,f]}function rm(e,t,r){if(e>2958465||e<0)return null;var n=e|0,a=Math.floor(86400*(e-n)),s=0,l=[],o={D:n,T:a,u:86400*(e-n)-a,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(o.u)<1e-6&&(o.u=0),t&&t.date1904&&(n+=1462),o.u>.9999&&(o.u=0,++a==86400&&(o.T=a=0,++n,++o.D)),n===60)l=r?[1317,10,29]:[1900,2,29],s=3;else if(n===0)l=r?[1317,8,29]:[1900,1,0],s=6;else{n>60&&--n;var c=new Date(1900,0,1);c.setDate(c.getDate()+n-1),l=[c.getFullYear(),c.getMonth()+1,c.getDate()],s=c.getDay(),n<60&&(s=(s+6)%7),r&&(s=bbe(c,l))}return o.y=l[0],o.m=l[1],o.d=l[2],o.S=a%60,a=Math.floor(a/60),o.M=a%60,a=Math.floor(a/60),o.H=a,o.q=s,o}var SH=new Date(1899,11,31,0,0,0),fbe=SH.getTime(),mbe=new Date(1900,2,1,0,0,0);function jH(e,t){var r=e.getTime();return t?r-=1461*24*60*60*1e3:e>=mbe&&(r+=1440*60*1e3),(r-(fbe+(e.getTimezoneOffset()-SH.getTimezoneOffset())*6e4))/(1440*60*1e3)}function FC(e){return e.indexOf(".")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function xbe(e){return e.indexOf("E")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function pbe(e){var t=e<0?12:11,r=FC(e.toFixed(12));return r.length<=t||(r=e.toPrecision(10),r.length<=t)?r:e.toExponential(5)}function gbe(e){var t=FC(e.toFixed(11));return t.length>(e<0?12:11)||t==="0"||t==="-0"?e.toPrecision(6):t}function db(e){var t=Math.floor(Math.log(Math.abs(e))*Math.LOG10E),r;return t>=-4&&t<=-1?r=e.toPrecision(10+t):Math.abs(t)<=9?r=pbe(e):t===10?r=e.toFixed(10).substr(0,12):r=gbe(e),FC(xbe(r.toUpperCase()))}function Bm(e,t){switch(typeof e){case"string":return e;case"boolean":return e?"TRUE":"FALSE";case"number":return(e|0)===e?e.toString(10):db(e);case"undefined":return"";case"object":if(e==null)return"";if(e instanceof Date)return xd(14,jH(e,t&&t.date1904),t)}throw new Error("unsupported value in General format: "+e)}function bbe(e,t){t[0]-=581;var r=e.getDay();return e<60&&(r=(r+6)%7),r}function vbe(e,t,r,n){var a="",s=0,l=0,o=r.y,c,d=0;switch(e){case 98:o=r.y+543;case 121:switch(t.length){case 1:case 2:c=o%100,d=2;break;default:c=o%1e4,d=4;break}break;case 109:switch(t.length){case 1:case 2:c=r.m,d=t.length;break;case 3:return tN[r.m-1][1];case 5:return tN[r.m-1][0];default:return tN[r.m-1][2]}break;case 100:switch(t.length){case 1:case 2:c=r.d,d=t.length;break;case 3:return CI[r.q][0];default:return CI[r.q][1]}break;case 104:switch(t.length){case 1:case 2:c=1+(r.H+11)%12,d=t.length;break;default:throw"bad hour format: "+t}break;case 72:switch(t.length){case 1:case 2:c=r.H,d=t.length;break;default:throw"bad hour format: "+t}break;case 77:switch(t.length){case 1:case 2:c=r.M,d=t.length;break;default:throw"bad minute format: "+t}break;case 115:if(t!="s"&&t!="ss"&&t!=".0"&&t!=".00"&&t!=".000")throw"bad second format: "+t;return r.u===0&&(t=="s"||t=="ss")?Qd(r.S,t.length):(n>=2?l=n===3?1e3:100:l=n===1?10:1,s=Math.round(l*(r.S+r.u)),s>=60*l&&(s=0),t==="s"?s===0?"0":""+s/l:(a=Qd(s,2+n),t==="ss"?a.substr(0,2):"."+a.substr(2,t.length-1)));case 90:switch(t){case"[h]":case"[hh]":c=r.D*24+r.H;break;case"[m]":case"[mm]":c=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":c=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+t}d=t.length===3?1:2;break;case 101:c=o,d=1;break}var f=d>0?Qd(c,d):"";return f}function Qh(e){var t=3;if(e.length<=t)return e;for(var r=e.length%t,n=e.substr(0,r);r!=e.length;r+=t)n+=(n.length>0?",":"")+e.substr(r,t);return n}var CH=/%/g;function ybe(e,t,r){var n=t.replace(CH,""),a=t.length-n.length;return F0(e,n,r*Math.pow(10,2*a))+oi("%",a)}function wbe(e,t,r){for(var n=t.length-1;t.charCodeAt(n-1)===44;)--n;return F0(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}function AH(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+AH(e,-t);var a=e.indexOf(".");a===-1&&(a=e.indexOf("E"));var s=Math.floor(Math.log(t)*Math.LOG10E)%a;if(s<0&&(s+=a),r=(t/Math.pow(10,s)).toPrecision(n+1+(a+s)%a),r.indexOf("e")===-1){var l=Math.floor(Math.log(t)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(l-r.length+s):r+="E+"+(l-s);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,a)+"."+r.substr(2+a),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,c,d,f){return c+d+f.substr(0,(a+s)%a)+"."+f.substr(s)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var EH=/# (\?+)( ?)\/( ?)(\d+)/;function kbe(e,t,r){var n=parseInt(e[4],10),a=Math.round(t*n),s=Math.floor(a/n),l=a-s*n,o=n;return r+(s===0?"":""+s)+" "+(l===0?oi(" ",e[1].length+1+e[4].length):RC(l,e[1].length)+e[2]+"/"+e[3]+Qd(o,e[4].length))}function Nbe(e,t,r){return r+(t===0?"":""+t)+oi(" ",e[1].length+2+e[4].length)}var TH=/^#*0*\.([0#]+)/,OH=/\).*[0#]/,PH=/\(###\) ###\\?-####/;function wo(e){for(var t="",r,n=0;n!=e.length;++n)switch(r=e.charCodeAt(n)){case 35:break;case 63:t+=" ";break;case 48:t+="0";break;default:t+=String.fromCharCode(r)}return t}function EI(e,t){var r=Math.pow(10,t);return""+Math.round(e*r)/r}function TI(e,t){var r=e-Math.floor(e),n=Math.pow(10,t);return t<(""+Math.round(r*n)).length?0:Math.round(r*n)}function _be(e,t){return t<(""+Math.round((e-Math.floor(e))*Math.pow(10,t))).length?1:0}function Sbe(e){return e<2147483647&&e>-2147483648?""+(e>=0?e|0:e-1|0):""+Math.floor(e)}function ed(e,t,r){if(e.charCodeAt(0)===40&&!t.match(OH)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?ed("n",n,r):"("+ed("n",n,-r)+")"}if(t.charCodeAt(t.length-1)===44)return wbe(e,t,r);if(t.indexOf("%")!==-1)return ybe(e,t,r);if(t.indexOf("E")!==-1)return AH(t,r);if(t.charCodeAt(0)===36)return"$"+ed(e,t.substr(t.charAt(1)==" "?2:1),r);var a,s,l,o,c=Math.abs(r),d=r<0?"-":"";if(t.match(/^00+$/))return d+Kx(c,t.length);if(t.match(/^[#?]+$/))return a=Kx(r,0),a==="0"&&(a=""),a.length>t.length?a:wo(t.substr(0,t.length-a.length))+a;if(s=t.match(EH))return kbe(s,c,d);if(t.match(/^#+0+$/))return d+Kx(c,t.length-t.indexOf("0"));if(s=t.match(TH))return a=EI(r,s[1].length).replace(/^([^\.]+)$/,"$1."+wo(s[1])).replace(/\.$/,"."+wo(s[1])).replace(/\.(\d*)$/,function(N,w){return"."+w+oi("0",wo(s[1]).length-w.length)}),t.indexOf("0.")!==-1?a:a.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),s=t.match(/^(0*)\.(#*)$/))return d+EI(c,s[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=t.match(/^#{1,3},##0(\.?)$/))return d+Qh(Kx(c,0));if(s=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+ed(e,t,-r):Qh(""+(Math.floor(r)+_be(r,s[1].length)))+"."+Qd(TI(r,s[1].length),s[1].length);if(s=t.match(/^#,#*,#0/))return ed(e,t.replace(/^#,#*,/,""),r);if(s=t.match(/^([0#]+)(\\?-([0#]+))+$/))return a=x1(ed(e,t.replace(/[\\-]/g,""),r)),l=0,x1(x1(t.replace(/\\/g,"")).replace(/[0#]/g,function(N){return l<a.length?a.charAt(l++):N==="0"?"0":""}));if(t.match(PH))return a=ed(e,"##########",r),"("+a.substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var f="";if(s=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return l=Math.min(s[4].length,7),o=hw(c,Math.pow(10,l)-1,!1),a=""+d,f=F0("n",s[1],o[1]),f.charAt(f.length-1)==" "&&(f=f.substr(0,f.length-1)+"0"),a+=f+s[2]+"/"+s[3],f=dw(o[2],l),f.length<s[4].length&&(f=wo(s[4].substr(s[4].length-f.length))+f),a+=f,a;if(s=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return l=Math.min(Math.max(s[1].length,s[4].length),7),o=hw(c,Math.pow(10,l)-1,!0),d+(o[0]||(o[1]?"":"0"))+" "+(o[1]?RC(o[1],l)+s[2]+"/"+s[3]+dw(o[2],l):oi(" ",2*l+1+s[2].length+s[3].length));if(s=t.match(/^[#0?]+$/))return a=Kx(r,0),t.length<=a.length?a:wo(t.substr(0,t.length-a.length))+a;if(s=t.match(/^([#0?]+)\.([#0]+)$/)){a=""+r.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),l=a.indexOf(".");var p=t.indexOf(".")-l,y=t.length-a.length-p;return wo(t.substr(0,p)+a+t.substr(t.length-y))}if(s=t.match(/^00,000\.([#0]*0)$/))return l=TI(r,s[1].length),r<0?"-"+ed(e,t,-r):Qh(Sbe(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(N){return"00,"+(N.length<3?Qd(0,3-N.length):"")+N})+"."+Qd(l,s[1].length);switch(t){case"###,##0.00":return ed(e,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var g=Qh(Kx(c,0));return g!=="0"?d+g:"";case"###,###.00":return ed(e,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return ed(e,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+t+"|")}function jbe(e,t,r){for(var n=t.length-1;t.charCodeAt(n-1)===44;)--n;return F0(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}function Cbe(e,t,r){var n=t.replace(CH,""),a=t.length-n.length;return F0(e,n,r*Math.pow(10,2*a))+oi("%",a)}function IH(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+IH(e,-t);var a=e.indexOf(".");a===-1&&(a=e.indexOf("E"));var s=Math.floor(Math.log(t)*Math.LOG10E)%a;if(s<0&&(s+=a),r=(t/Math.pow(10,s)).toPrecision(n+1+(a+s)%a),!r.match(/[Ee]/)){var l=Math.floor(Math.log(t)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(l-r.length+s):r+="E+"+(l-s),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,c,d,f){return c+d+f.substr(0,(a+s)%a)+"."+f.substr(s)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function _u(e,t,r){if(e.charCodeAt(0)===40&&!t.match(OH)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?_u("n",n,r):"("+_u("n",n,-r)+")"}if(t.charCodeAt(t.length-1)===44)return jbe(e,t,r);if(t.indexOf("%")!==-1)return Cbe(e,t,r);if(t.indexOf("E")!==-1)return IH(t,r);if(t.charCodeAt(0)===36)return"$"+_u(e,t.substr(t.charAt(1)==" "?2:1),r);var a,s,l,o,c=Math.abs(r),d=r<0?"-":"";if(t.match(/^00+$/))return d+Qd(c,t.length);if(t.match(/^[#?]+$/))return a=""+r,r===0&&(a=""),a.length>t.length?a:wo(t.substr(0,t.length-a.length))+a;if(s=t.match(EH))return Nbe(s,c,d);if(t.match(/^#+0+$/))return d+Qd(c,t.length-t.indexOf("0"));if(s=t.match(TH))return a=(""+r).replace(/^([^\.]+)$/,"$1."+wo(s[1])).replace(/\.$/,"."+wo(s[1])),a=a.replace(/\.(\d*)$/,function(N,w){return"."+w+oi("0",wo(s[1]).length-w.length)}),t.indexOf("0.")!==-1?a:a.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),s=t.match(/^(0*)\.(#*)$/))return d+(""+c).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=t.match(/^#{1,3},##0(\.?)$/))return d+Qh(""+c);if(s=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+_u(e,t,-r):Qh(""+r)+"."+oi("0",s[1].length);if(s=t.match(/^#,#*,#0/))return _u(e,t.replace(/^#,#*,/,""),r);if(s=t.match(/^([0#]+)(\\?-([0#]+))+$/))return a=x1(_u(e,t.replace(/[\\-]/g,""),r)),l=0,x1(x1(t.replace(/\\/g,"")).replace(/[0#]/g,function(N){return l<a.length?a.charAt(l++):N==="0"?"0":""}));if(t.match(PH))return a=_u(e,"##########",r),"("+a.substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var f="";if(s=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return l=Math.min(s[4].length,7),o=hw(c,Math.pow(10,l)-1,!1),a=""+d,f=F0("n",s[1],o[1]),f.charAt(f.length-1)==" "&&(f=f.substr(0,f.length-1)+"0"),a+=f+s[2]+"/"+s[3],f=dw(o[2],l),f.length<s[4].length&&(f=wo(s[4].substr(s[4].length-f.length))+f),a+=f,a;if(s=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return l=Math.min(Math.max(s[1].length,s[4].length),7),o=hw(c,Math.pow(10,l)-1,!0),d+(o[0]||(o[1]?"":"0"))+" "+(o[1]?RC(o[1],l)+s[2]+"/"+s[3]+dw(o[2],l):oi(" ",2*l+1+s[2].length+s[3].length));if(s=t.match(/^[#0?]+$/))return a=""+r,t.length<=a.length?a:wo(t.substr(0,t.length-a.length))+a;if(s=t.match(/^([#0]+)\.([#0]+)$/)){a=""+r.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),l=a.indexOf(".");var p=t.indexOf(".")-l,y=t.length-a.length-p;return wo(t.substr(0,p)+a+t.substr(t.length-y))}if(s=t.match(/^00,000\.([#0]*0)$/))return r<0?"-"+_u(e,t,-r):Qh(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(N){return"00,"+(N.length<3?Qd(0,3-N.length):"")+N})+"."+Qd(0,s[1].length);switch(t){case"###,###":case"##,###":case"#,###":var g=Qh(""+c);return g!=="0"?d+g:"";default:if(t.match(/\.[0#?]*$/))return _u(e,t.slice(0,t.lastIndexOf(".")),r)+wo(t.slice(t.lastIndexOf(".")))}throw new Error("unsupported format |"+t+"|")}function F0(e,t,r){return(r|0)===r?_u(e,t,r):ed(e,t,r)}function Abe(e){for(var t=[],r=!1,n=0,a=0;n<e.length;++n)switch(e.charCodeAt(n)){case 34:r=!r;break;case 95:case 42:case 92:++n;break;case 59:t[t.length]=e.substr(a,n-a),a=n+1}if(t[t.length]=e.substr(a),r===!0)throw new Error("Format |"+e+"| unterminated string ");return t}var DH=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function xp(e){for(var t=0,r="",n="";t<e.length;)switch(r=e.charAt(t)){case"G":uw(e,t)&&(t+=6),t++;break;case'"':for(;e.charCodeAt(++t)!==34&&t<e.length;);++t;break;case"\\":t+=2;break;case"_":t+=2;break;case"@":++t;break;case"B":case"b":if(e.charAt(t+1)==="1"||e.charAt(t+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(e.substr(t,3).toUpperCase()==="A/P"||e.substr(t,5).toUpperCase()==="AM/PM"||e.substr(t,5).toUpperCase()==="/")return!0;++t;break;case"[":for(n=r;e.charAt(t++)!=="]"&&t<e.length;)n+=e.charAt(t);if(n.match(DH))return!0;break;case".":case"0":case"#":for(;t<e.length&&("0#?.,E+-%".indexOf(r=e.charAt(++t))>-1||r=="\\"&&e.charAt(t+1)=="-"&&"0#".indexOf(e.charAt(t+2))>-1););break;case"?":for(;e.charAt(++t)===r;);break;case"*":++t,(e.charAt(t)==" "||e.charAt(t)=="*")&&++t;break;case"(":case")":++t;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;t<e.length&&"0123456789".indexOf(e.charAt(++t))>-1;);break;case" ":++t;break;default:++t;break}return!1}function Ebe(e,t,r,n){for(var a=[],s="",l=0,o="",c="t",d,f,p,y="H";l<e.length;)switch(o=e.charAt(l)){case"G":if(!uw(e,l))throw new Error("unrecognized character "+o+" in "+e);a[a.length]={t:"G",v:"General"},l+=7;break;case'"':for(s="";(p=e.charCodeAt(++l))!==34&&l<e.length;)s+=String.fromCharCode(p);a[a.length]={t:"t",v:s},++l;break;case"\\":var g=e.charAt(++l),N=g==="("||g===")"?g:"t";a[a.length]={t:N,v:g},++l;break;case"_":a[a.length]={t:"t",v:" "},l+=2;break;case"@":a[a.length]={t:"T",v:t},++l;break;case"B":case"b":if(e.charAt(l+1)==="1"||e.charAt(l+1)==="2"){if(d==null&&(d=rm(t,r,e.charAt(l+1)==="2"),d==null))return"";a[a.length]={t:"X",v:e.substr(l,2)},c=o,l+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":o=o.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(t<0||d==null&&(d=rm(t,r),d==null))return"";for(s=o;++l<e.length&&e.charAt(l).toLowerCase()===o;)s+=o;o==="m"&&c.toLowerCase()==="h"&&(o="M"),o==="h"&&(o=y),a[a.length]={t:o,v:s},c=o;break;case"A":case"a":case"":var w={t:o,v:o};if(d==null&&(d=rm(t,r)),e.substr(l,3).toUpperCase()==="A/P"?(d!=null&&(w.v=d.H>=12?"P":"A"),w.t="T",y="h",l+=3):e.substr(l,5).toUpperCase()==="AM/PM"?(d!=null&&(w.v=d.H>=12?"PM":"AM"),w.t="T",l+=5,y="h"):e.substr(l,5).toUpperCase()==="/"?(d!=null&&(w.v=d.H>=12?"":""),w.t="T",l+=5,y="h"):(w.t="t",++l),d==null&&w.t==="T")return"";a[a.length]=w,c=o;break;case"[":for(s=o;e.charAt(l++)!=="]"&&l<e.length;)s+=e.charAt(l);if(s.slice(-1)!=="]")throw'unterminated "[" block: |'+s+"|";if(s.match(DH)){if(d==null&&(d=rm(t,r),d==null))return"";a[a.length]={t:"Z",v:s.toLowerCase()},c=s.charAt(1)}else s.indexOf("$")>-1&&(s=(s.match(/\$([^-\[\]]*)/)||[])[1]||"$",xp(e)||(a[a.length]={t:"t",v:s}));break;case".":if(d!=null){for(s=o;++l<e.length&&(o=e.charAt(l))==="0";)s+=o;a[a.length]={t:"s",v:s};break}case"0":case"#":for(s=o;++l<e.length&&"0#?.,E+-%".indexOf(o=e.charAt(l))>-1;)s+=o;a[a.length]={t:"n",v:s};break;case"?":for(s=o;e.charAt(++l)===o;)s+=o;a[a.length]={t:o,v:s},c=o;break;case"*":++l,(e.charAt(l)==" "||e.charAt(l)=="*")&&++l;break;case"(":case")":a[a.length]={t:n===1?"t":o,v:o},++l;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(s=o;l<e.length&&"0123456789".indexOf(e.charAt(++l))>-1;)s+=e.charAt(l);a[a.length]={t:"D",v:s};break;case" ":a[a.length]={t:o,v:o},++l;break;case"$":a[a.length]={t:"t",v:"$"},++l;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(o)===-1)throw new Error("unrecognized character "+o+" in "+e);a[a.length]={t:"t",v:o},++l;break}var k=0,S=0,O;for(l=a.length-1,c="t";l>=0;--l)switch(a[l].t){case"h":case"H":a[l].t=y,c="h",k<1&&(k=1);break;case"s":(O=a[l].v.match(/\.0+$/))&&(S=Math.max(S,O[0].length-1)),k<3&&(k=3);case"d":case"y":case"M":case"e":c=a[l].t;break;case"m":c==="s"&&(a[l].t="M",k<2&&(k=2));break;case"X":break;case"Z":k<1&&a[l].v.match(/[Hh]/)&&(k=1),k<2&&a[l].v.match(/[Mm]/)&&(k=2),k<3&&a[l].v.match(/[Ss]/)&&(k=3)}switch(k){case 0:break;case 1:d.u>=.5&&(d.u=0,++d.S),d.S>=60&&(d.S=0,++d.M),d.M>=60&&(d.M=0,++d.H);break;case 2:d.u>=.5&&(d.u=0,++d.S),d.S>=60&&(d.S=0,++d.M);break}var E="",D;for(l=0;l<a.length;++l)switch(a[l].t){case"t":case"T":case" ":case"D":break;case"X":a[l].v="",a[l].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":a[l].v=vbe(a[l].t.charCodeAt(0),a[l].v,d,S),a[l].t="t";break;case"n":case"?":for(D=l+1;a[D]!=null&&((o=a[D].t)==="?"||o==="D"||(o===" "||o==="t")&&a[D+1]!=null&&(a[D+1].t==="?"||a[D+1].t==="t"&&a[D+1].v==="/")||a[l].t==="("&&(o===" "||o==="n"||o===")")||o==="t"&&(a[D].v==="/"||a[D].v===" "&&a[D+1]!=null&&a[D+1].t=="?"));)a[l].v+=a[D].v,a[D]={v:"",t:";"},++D;E+=a[l].v,l=D-1;break;case"G":a[l].t="t",a[l].v=Bm(t,r);break}var H="",W,R;if(E.length>0){E.charCodeAt(0)==40?(W=t<0&&E.charCodeAt(0)===45?-t:t,R=F0("n",E,W)):(W=t<0&&n>1?-t:t,R=F0("n",E,W),W<0&&a[0]&&a[0].t=="t"&&(R=R.substr(1),a[0].v="-"+a[0].v)),D=R.length-1;var z=a.length;for(l=0;l<a.length;++l)if(a[l]!=null&&a[l].t!="t"&&a[l].v.indexOf(".")>-1){z=l;break}var U=a.length;if(z===a.length&&R.indexOf("E")===-1){for(l=a.length-1;l>=0;--l)a[l]==null||"n?".indexOf(a[l].t)===-1||(D>=a[l].v.length-1?(D-=a[l].v.length,a[l].v=R.substr(D+1,a[l].v.length)):D<0?a[l].v="":(a[l].v=R.substr(0,D+1),D=-1),a[l].t="t",U=l);D>=0&&U<a.length&&(a[U].v=R.substr(0,D+1)+a[U].v)}else if(z!==a.length&&R.indexOf("E")===-1){for(D=R.indexOf(".")-1,l=z;l>=0;--l)if(!(a[l]==null||"n?".indexOf(a[l].t)===-1)){for(f=a[l].v.indexOf(".")>-1&&l===z?a[l].v.indexOf(".")-1:a[l].v.length-1,H=a[l].v.substr(f+1);f>=0;--f)D>=0&&(a[l].v.charAt(f)==="0"||a[l].v.charAt(f)==="#")&&(H=R.charAt(D--)+H);a[l].v=H,a[l].t="t",U=l}for(D>=0&&U<a.length&&(a[U].v=R.substr(0,D+1)+a[U].v),D=R.indexOf(".")+1,l=z;l<a.length;++l)if(!(a[l]==null||"n?(".indexOf(a[l].t)===-1&&l!==z)){for(f=a[l].v.indexOf(".")>-1&&l===z?a[l].v.indexOf(".")+1:0,H=a[l].v.substr(0,f);f<a[l].v.length;++f)D<R.length&&(H+=R.charAt(D++));a[l].v=H,a[l].t="t",U=l}}}for(l=0;l<a.length;++l)a[l]!=null&&"n?".indexOf(a[l].t)>-1&&(W=n>1&&t<0&&l>0&&a[l-1].v==="-"?-t:t,a[l].v=F0(a[l].t,a[l].v,W),a[l].t="t");var Z="";for(l=0;l!==a.length;++l)a[l]!=null&&(Z+=a[l].v);return Z}var OI=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function PI(e,t){if(t==null)return!1;var r=parseFloat(t[2]);switch(t[1]){case"=":if(e==r)return!0;break;case">":if(e>r)return!0;break;case"<":if(e<r)return!0;break;case"<>":if(e!=r)return!0;break;case">=":if(e>=r)return!0;break;case"<=":if(e<=r)return!0;break}return!1}function Tbe(e,t){var r=Abe(e),n=r.length,a=r[n-1].indexOf("@");if(n<4&&a>-1&&--n,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof t!="number")return[4,r.length===4||a>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=a>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=a>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=a>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var s=t>0?r[0]:t<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[n,s];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var l=r[0].match(OI),o=r[1].match(OI);return PI(t,l)?[n,r[0]]:PI(t,o)?[n,r[1]]:[n,r[l!=null&&o!=null?2:1]]}return[n,s]}function xd(e,t,r){r==null&&(r={});var n="";switch(typeof e){case"string":e=="m/d/yy"&&r.dateNF?n=r.dateNF:n=e;break;case"number":e==14&&r.dateNF?n=r.dateNF:n=(r.table!=null?r.table:En)[e],n==null&&(n=r.table&&r.table[AI[e]]||En[AI[e]]),n==null&&(n=hbe[e]||"General");break}if(uw(n,0))return Bm(t,r);t instanceof Date&&(t=jH(t,r.date1904));var a=Tbe(n,t);if(uw(a[1]))return Bm(t,r);if(t===!0)t="TRUE";else if(t===!1)t="FALSE";else if(t===""||t==null)return"";return Ebe(a[1],t,r,a[0])}function B0(e,t){if(typeof t!="number"){t=+t||-1;for(var r=0;r<392;++r){if(En[r]==null){t<0&&(t=r);continue}if(En[r]==e){t=r;break}}t<0&&(t=391)}return En[t]=e,t}function Ik(e){for(var t=0;t!=392;++t)e[t]!==void 0&&B0(e[t],t)}function pp(){En=ube()}var Obe={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},MH=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function Pbe(e){var t=typeof e=="number"?En[e]:e;return t=t.replace(MH,"(\\d+)"),new RegExp("^"+t+"$")}function Ibe(e,t,r){var n=-1,a=-1,s=-1,l=-1,o=-1,c=-1;(t.match(MH)||[]).forEach(function(p,y){var g=parseInt(r[y+1],10);switch(p.toLowerCase().charAt(0)){case"y":n=g;break;case"d":s=g;break;case"h":l=g;break;case"s":c=g;break;case"m":l>=0?o=g:a=g;break}}),c>=0&&o==-1&&a>=0&&(o=a,a=-1);var d=(""+(n>=0?n:new Date().getFullYear())).slice(-4)+"-"+("00"+(a>=1?a:1)).slice(-2)+"-"+("00"+(s>=1?s:1)).slice(-2);d.length==7&&(d="0"+d),d.length==8&&(d="20"+d);var f=("00"+(l>=0?l:0)).slice(-2)+":"+("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(c>=0?c:0)).slice(-2);return l==-1&&o==-1&&c==-1?d:n==-1&&a==-1&&s==-1?f:d+"T"+f}var Dbe=(function(){var e={};e.version="1.2.0";function t(){for(var R=0,z=new Array(256),U=0;U!=256;++U)R=U,R=R&1?-306674912^R>>>1:R>>>1,R=R&1?-306674912^R>>>1:R>>>1,R=R&1?-306674912^R>>>1:R>>>1,R=R&1?-306674912^R>>>1:R>>>1,R=R&1?-306674912^R>>>1:R>>>1,R=R&1?-306674912^R>>>1:R>>>1,R=R&1?-306674912^R>>>1:R>>>1,R=R&1?-306674912^R>>>1:R>>>1,z[U]=R;return typeof Int32Array<"u"?new Int32Array(z):z}var r=t();function n(R){var z=0,U=0,Z=0,q=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(Z=0;Z!=256;++Z)q[Z]=R[Z];for(Z=0;Z!=256;++Z)for(U=R[Z],z=256+Z;z<4096;z+=256)U=q[z]=U>>>8^R[U&255];var K=[];for(Z=1;Z!=16;++Z)K[Z-1]=typeof Int32Array<"u"?q.subarray(Z*256,Z*256+256):q.slice(Z*256,Z*256+256);return K}var a=n(r),s=a[0],l=a[1],o=a[2],c=a[3],d=a[4],f=a[5],p=a[6],y=a[7],g=a[8],N=a[9],w=a[10],k=a[11],S=a[12],O=a[13],E=a[14];function D(R,z){for(var U=z^-1,Z=0,q=R.length;Z<q;)U=U>>>8^r[(U^R.charCodeAt(Z++))&255];return~U}function H(R,z){for(var U=z^-1,Z=R.length-15,q=0;q<Z;)U=E[R[q++]^U&255]^O[R[q++]^U>>8&255]^S[R[q++]^U>>16&255]^k[R[q++]^U>>>24]^w[R[q++]]^N[R[q++]]^g[R[q++]]^y[R[q++]]^p[R[q++]]^f[R[q++]]^d[R[q++]]^c[R[q++]]^o[R[q++]]^l[R[q++]]^s[R[q++]]^r[R[q++]];for(Z+=15;q<Z;)U=U>>>8^r[(U^R[q++])&255];return~U}function W(R,z){for(var U=z^-1,Z=0,q=R.length,K=0,Q=0;Z<q;)K=R.charCodeAt(Z++),K<128?U=U>>>8^r[(U^K)&255]:K<2048?(U=U>>>8^r[(U^(192|K>>6&31))&255],U=U>>>8^r[(U^(128|K&63))&255]):K>=55296&&K<57344?(K=(K&1023)+64,Q=R.charCodeAt(Z++)&1023,U=U>>>8^r[(U^(240|K>>8&7))&255],U=U>>>8^r[(U^(128|K>>2&63))&255],U=U>>>8^r[(U^(128|Q>>6&15|(K&3)<<4))&255],U=U>>>8^r[(U^(128|Q&63))&255]):(U=U>>>8^r[(U^(224|K>>12&15))&255],U=U>>>8^r[(U^(128|K>>6&63))&255],U=U>>>8^r[(U^(128|K&63))&255]);return~U}return e.table=r,e.bstr=D,e.buf=H,e.str=W,e})(),vn=(function(){var t={};t.version="1.2.1";function r(we,Ne){for(var Me=we.split("/"),le=Ne.split("/"),ve=0,Oe=0,nt=Math.min(Me.length,le.length);ve<nt;++ve){if(Oe=Me[ve].length-le[ve].length)return Oe;if(Me[ve]!=le[ve])return Me[ve]<le[ve]?-1:1}return Me.length-le.length}function n(we){if(we.charAt(we.length-1)=="/")return we.slice(0,-1).indexOf("/")===-1?we:n(we.slice(0,-1));var Ne=we.lastIndexOf("/");return Ne===-1?we:we.slice(0,Ne+1)}function a(we){if(we.charAt(we.length-1)=="/")return a(we.slice(0,-1));var Ne=we.lastIndexOf("/");return Ne===-1?we:we.slice(Ne+1)}function s(we,Ne){typeof Ne=="string"&&(Ne=new Date(Ne));var Me=Ne.getHours();Me=Me<<6|Ne.getMinutes(),Me=Me<<5|Ne.getSeconds()>>>1,we.write_shift(2,Me);var le=Ne.getFullYear()-1980;le=le<<4|Ne.getMonth()+1,le=le<<5|Ne.getDate(),we.write_shift(2,le)}function l(we){var Ne=we.read_shift(2)&65535,Me=we.read_shift(2)&65535,le=new Date,ve=Me&31;Me>>>=5;var Oe=Me&15;Me>>>=4,le.setMilliseconds(0),le.setFullYear(Me+1980),le.setMonth(Oe-1),le.setDate(ve);var nt=Ne&31;Ne>>>=5;var wt=Ne&63;return Ne>>>=6,le.setHours(Ne),le.setMinutes(wt),le.setSeconds(nt<<1),le}function o(we){Pl(we,0);for(var Ne={},Me=0;we.l<=we.length-4;){var le=we.read_shift(2),ve=we.read_shift(2),Oe=we.l+ve,nt={};switch(le){case 21589:Me=we.read_shift(1),Me&1&&(nt.mtime=we.read_shift(4)),ve>5&&(Me&2&&(nt.atime=we.read_shift(4)),Me&4&&(nt.ctime=we.read_shift(4))),nt.mtime&&(nt.mt=new Date(nt.mtime*1e3));break}we.l=Oe,Ne[le]=nt}return Ne}var c;function d(){return c||(c={})}function f(we,Ne){if(we[0]==80&&we[1]==75)return Pr(we,Ne);if((we[0]|32)==109&&(we[1]|32)==105)return We(we,Ne);if(we.length<512)throw new Error("CFB file size "+we.length+" < 512");var Me=3,le=512,ve=0,Oe=0,nt=0,wt=0,ft=0,ht=[],bt=we.slice(0,512);Pl(bt,0);var Ut=p(bt);switch(Me=Ut[0],Me){case 3:le=512;break;case 4:le=4096;break;case 0:if(Ut[1]==0)return Pr(we,Ne);default:throw new Error("Major Version: Expected 3 or 4 saw "+Me)}le!==512&&(bt=we.slice(0,le),Pl(bt,28));var rr=we.slice(0,le);y(bt,Me);var Jt=bt.read_shift(4,"i");if(Me===3&&Jt!==0)throw new Error("# Directory Sectors: Expected 0 saw "+Jt);bt.l+=4,nt=bt.read_shift(4,"i"),bt.l+=4,bt.chk("00100000","Mini Stream Cutoff Size: "),wt=bt.read_shift(4,"i"),ve=bt.read_shift(4,"i"),ft=bt.read_shift(4,"i"),Oe=bt.read_shift(4,"i");for(var dr=-1,pr=0;pr<109&&(dr=bt.read_shift(4,"i"),!(dr<0));++pr)ht[pr]=dr;var Ar=g(we,le);k(ft,Oe,Ar,le,ht);var It=O(Ar,nt,ht,le);It[nt].name="!Directory",ve>0&&wt!==Q&&(It[wt].name="!MiniFAT"),It[ht[0]].name="!FAT",It.fat_addrs=ht,It.ssz=le;var Un={},en=[],Na=[],La=[];E(nt,It,Ar,en,ve,Un,Na,wt),N(Na,La,en),en.shift();var cn={FileIndex:Na,FullPaths:La};return Ne&&Ne.raw&&(cn.raw={header:rr,sectors:Ar}),cn}function p(we){if(we[we.l]==80&&we[we.l+1]==75)return[0,0];we.chk(re,"Header Signature: "),we.l+=16;var Ne=we.read_shift(2,"u");return[we.read_shift(2,"u"),Ne]}function y(we,Ne){var Me=9;switch(we.l+=2,Me=we.read_shift(2)){case 9:if(Ne!=3)throw new Error("Sector Shift: Expected 9 saw "+Me);break;case 12:if(Ne!=4)throw new Error("Sector Shift: Expected 12 saw "+Me);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+Me)}we.chk("0600","Mini Sector Shift: "),we.chk("000000000000","Reserved: ")}function g(we,Ne){for(var Me=Math.ceil(we.length/Ne)-1,le=[],ve=1;ve<Me;++ve)le[ve-1]=we.slice(ve*Ne,(ve+1)*Ne);return le[Me-1]=we.slice(Me*Ne),le}function N(we,Ne,Me){for(var le=0,ve=0,Oe=0,nt=0,wt=0,ft=Me.length,ht=[],bt=[];le<ft;++le)ht[le]=bt[le]=le,Ne[le]=Me[le];for(;wt<bt.length;++wt)le=bt[wt],ve=we[le].L,Oe=we[le].R,nt=we[le].C,ht[le]===le&&(ve!==-1&&ht[ve]!==ve&&(ht[le]=ht[ve]),Oe!==-1&&ht[Oe]!==Oe&&(ht[le]=ht[Oe])),nt!==-1&&(ht[nt]=le),ve!==-1&&le!=ht[le]&&(ht[ve]=ht[le],bt.lastIndexOf(ve)<wt&&bt.push(ve)),Oe!==-1&&le!=ht[le]&&(ht[Oe]=ht[le],bt.lastIndexOf(Oe)<wt&&bt.push(Oe));for(le=1;le<ft;++le)ht[le]===le&&(Oe!==-1&&ht[Oe]!==Oe?ht[le]=ht[Oe]:ve!==-1&&ht[ve]!==ve&&(ht[le]=ht[ve]));for(le=1;le<ft;++le)if(we[le].type!==0){if(wt=le,wt!=ht[wt])do wt=ht[wt],Ne[le]=Ne[wt]+"/"+Ne[le];while(wt!==0&&ht[wt]!==-1&&wt!=ht[wt]);ht[le]=-1}for(Ne[0]+="/",le=1;le<ft;++le)we[le].type!==2&&(Ne[le]+="/")}function w(we,Ne,Me){for(var le=we.start,ve=we.size,Oe=[],nt=le;Me&&ve>0&&nt>=0;)Oe.push(Ne.slice(nt*K,nt*K+K)),ve-=K,nt=Kf(Me,nt*4);return Oe.length===0?Bt(0):pl(Oe).slice(0,we.size)}function k(we,Ne,Me,le,ve){var Oe=Q;if(we===Q){if(Ne!==0)throw new Error("DIFAT chain shorter than expected")}else if(we!==-1){var nt=Me[we],wt=(le>>>2)-1;if(!nt)return;for(var ft=0;ft<wt&&(Oe=Kf(nt,ft*4))!==Q;++ft)ve.push(Oe);k(Kf(nt,le-4),Ne-1,Me,le,ve)}}function S(we,Ne,Me,le,ve){var Oe=[],nt=[];ve||(ve=[]);var wt=le-1,ft=0,ht=0;for(ft=Ne;ft>=0;){ve[ft]=!0,Oe[Oe.length]=ft,nt.push(we[ft]);var bt=Me[Math.floor(ft*4/le)];if(ht=ft*4&wt,le<4+ht)throw new Error("FAT boundary crossed: "+ft+" 4 "+le);if(!we[bt])break;ft=Kf(we[bt],ht)}return{nodes:Oe,data:$I([nt])}}function O(we,Ne,Me,le){var ve=we.length,Oe=[],nt=[],wt=[],ft=[],ht=le-1,bt=0,Ut=0,rr=0,Jt=0;for(bt=0;bt<ve;++bt)if(wt=[],rr=bt+Ne,rr>=ve&&(rr-=ve),!nt[rr]){ft=[];var dr=[];for(Ut=rr;Ut>=0;){dr[Ut]=!0,nt[Ut]=!0,wt[wt.length]=Ut,ft.push(we[Ut]);var pr=Me[Math.floor(Ut*4/le)];if(Jt=Ut*4&ht,le<4+Jt)throw new Error("FAT boundary crossed: "+Ut+" 4 "+le);if(!we[pr]||(Ut=Kf(we[pr],Jt),dr[Ut]))break}Oe[rr]={nodes:wt,data:$I([ft])}}return Oe}function E(we,Ne,Me,le,ve,Oe,nt,wt){for(var ft=0,ht=le.length?2:0,bt=Ne[we].data,Ut=0,rr=0,Jt;Ut<bt.length;Ut+=128){var dr=bt.slice(Ut,Ut+128);Pl(dr,64),rr=dr.read_shift(2),Jt=VC(dr,0,rr-ht),le.push(Jt);var pr={name:Jt,type:dr.read_shift(1),color:dr.read_shift(1),L:dr.read_shift(4,"i"),R:dr.read_shift(4,"i"),C:dr.read_shift(4,"i"),clsid:dr.read_shift(16),state:dr.read_shift(4,"i"),start:0,size:0},Ar=dr.read_shift(2)+dr.read_shift(2)+dr.read_shift(2)+dr.read_shift(2);Ar!==0&&(pr.ct=D(dr,dr.l-8));var It=dr.read_shift(2)+dr.read_shift(2)+dr.read_shift(2)+dr.read_shift(2);It!==0&&(pr.mt=D(dr,dr.l-8)),pr.start=dr.read_shift(4,"i"),pr.size=dr.read_shift(4,"i"),pr.size<0&&pr.start<0&&(pr.size=pr.type=0,pr.start=Q,pr.name=""),pr.type===5?(ft=pr.start,ve>0&&ft!==Q&&(Ne[ft].name="!StreamData")):pr.size>=4096?(pr.storage="fat",Ne[pr.start]===void 0&&(Ne[pr.start]=S(Me,pr.start,Ne.fat_addrs,Ne.ssz)),Ne[pr.start].name=pr.name,pr.content=Ne[pr.start].data.slice(0,pr.size)):(pr.storage="minifat",pr.size<0?pr.size=0:ft!==Q&&pr.start!==Q&&Ne[ft]&&(pr.content=w(pr,Ne[ft].data,(Ne[wt]||{}).data))),pr.content&&Pl(pr.content,0),Oe[Jt]=pr,nt.push(pr)}}function D(we,Ne){return new Date((wc(we,Ne+4)/1e7*Math.pow(2,32)+wc(we,Ne)/1e7-11644473600)*1e3)}function H(we,Ne){return d(),f(c.readFileSync(we),Ne)}function W(we,Ne){var Me=Ne&&Ne.type;switch(Me||ra&&Buffer.isBuffer(we)&&(Me="buffer"),Me||"base64"){case"file":return H(we,Ne);case"base64":return f(Sc(Pc(we)),Ne);case"binary":return f(Sc(we),Ne)}return f(we,Ne)}function R(we,Ne){var Me=Ne||{},le=Me.root||"Root Entry";if(we.FullPaths||(we.FullPaths=[]),we.FileIndex||(we.FileIndex=[]),we.FullPaths.length!==we.FileIndex.length)throw new Error("inconsistent CFB structure");we.FullPaths.length===0&&(we.FullPaths[0]=le+"/",we.FileIndex[0]={name:le,type:5}),Me.CLSID&&(we.FileIndex[0].clsid=Me.CLSID),z(we)}function z(we){var Ne="Sh33tJ5";if(!vn.find(we,"/"+Ne)){var Me=Bt(4);Me[0]=55,Me[1]=Me[3]=50,Me[2]=54,we.FileIndex.push({name:Ne,type:2,content:Me,size:4,L:69,R:69,C:69}),we.FullPaths.push(we.FullPaths[0]+Ne),U(we)}}function U(we,Ne){R(we);for(var Me=!1,le=!1,ve=we.FullPaths.length-1;ve>=0;--ve){var Oe=we.FileIndex[ve];switch(Oe.type){case 0:le?Me=!0:(we.FileIndex.pop(),we.FullPaths.pop());break;case 1:case 2:case 5:le=!0,isNaN(Oe.R*Oe.L*Oe.C)&&(Me=!0),Oe.R>-1&&Oe.L>-1&&Oe.R==Oe.L&&(Me=!0);break;default:Me=!0;break}}if(!(!Me&&!Ne)){var nt=new Date(1987,1,19),wt=0,ft=Object.create?Object.create(null):{},ht=[];for(ve=0;ve<we.FullPaths.length;++ve)ft[we.FullPaths[ve]]=!0,we.FileIndex[ve].type!==0&&ht.push([we.FullPaths[ve],we.FileIndex[ve]]);for(ve=0;ve<ht.length;++ve){var bt=n(ht[ve][0]);le=ft[bt],le||(ht.push([bt,{name:a(bt).replace("/",""),type:1,clsid:de,ct:nt,mt:nt,content:null}]),ft[bt]=!0)}for(ht.sort(function(Jt,dr){return r(Jt[0],dr[0])}),we.FullPaths=[],we.FileIndex=[],ve=0;ve<ht.length;++ve)we.FullPaths[ve]=ht[ve][0],we.FileIndex[ve]=ht[ve][1];for(ve=0;ve<ht.length;++ve){var Ut=we.FileIndex[ve],rr=we.FullPaths[ve];if(Ut.name=a(rr).replace("/",""),Ut.L=Ut.R=Ut.C=-(Ut.color=1),Ut.size=Ut.content?Ut.content.length:0,Ut.start=0,Ut.clsid=Ut.clsid||de,ve===0)Ut.C=ht.length>1?1:-1,Ut.size=0,Ut.type=5;else if(rr.slice(-1)=="/"){for(wt=ve+1;wt<ht.length&&n(we.FullPaths[wt])!=rr;++wt);for(Ut.C=wt>=ht.length?-1:wt,wt=ve+1;wt<ht.length&&n(we.FullPaths[wt])!=n(rr);++wt);Ut.R=wt>=ht.length?-1:wt,Ut.type=1}else n(we.FullPaths[ve+1]||"")==n(rr)&&(Ut.R=ve+1),Ut.type=2}}}function Z(we,Ne){var Me=Ne||{};if(Me.fileType=="mad")return Qt(we,Me);switch(U(we),Me.fileType){case"zip":return Ge(we,Me)}var le=(function(Jt){for(var dr=0,pr=0,Ar=0;Ar<Jt.FileIndex.length;++Ar){var It=Jt.FileIndex[Ar];if(It.content){var Un=It.content.length;Un>0&&(Un<4096?dr+=Un+63>>6:pr+=Un+511>>9)}}for(var en=Jt.FullPaths.length+3>>2,Na=dr+7>>3,La=dr+127>>7,cn=Na+pr+en+La,An=cn+127>>7,On=An<=109?0:Math.ceil((An-109)/127);cn+An+On+127>>7>An;)On=++An<=109?0:Math.ceil((An-109)/127);var is=[1,On,An,La,en,pr,dr,0];return Jt.FileIndex[0].size=dr<<6,is[7]=(Jt.FileIndex[0].start=is[0]+is[1]+is[2]+is[3]+is[4]+is[5])+(is[6]+7>>3),is})(we),ve=Bt(le[7]<<9),Oe=0,nt=0;{for(Oe=0;Oe<8;++Oe)ve.write_shift(1,ae[Oe]);for(Oe=0;Oe<8;++Oe)ve.write_shift(2,0);for(ve.write_shift(2,62),ve.write_shift(2,3),ve.write_shift(2,65534),ve.write_shift(2,9),ve.write_shift(2,6),Oe=0;Oe<3;++Oe)ve.write_shift(2,0);for(ve.write_shift(4,0),ve.write_shift(4,le[2]),ve.write_shift(4,le[0]+le[1]+le[2]+le[3]-1),ve.write_shift(4,0),ve.write_shift(4,4096),ve.write_shift(4,le[3]?le[0]+le[1]+le[2]-1:Q),ve.write_shift(4,le[3]),ve.write_shift(-4,le[1]?le[0]-1:Q),ve.write_shift(4,le[1]),Oe=0;Oe<109;++Oe)ve.write_shift(-4,Oe<le[2]?le[1]+Oe:-1)}if(le[1])for(nt=0;nt<le[1];++nt){for(;Oe<236+nt*127;++Oe)ve.write_shift(-4,Oe<le[2]?le[1]+Oe:-1);ve.write_shift(-4,nt===le[1]-1?Q:nt+1)}var wt=function(Jt){for(nt+=Jt;Oe<nt-1;++Oe)ve.write_shift(-4,Oe+1);Jt&&(++Oe,ve.write_shift(-4,Q))};for(nt=Oe=0,nt+=le[1];Oe<nt;++Oe)ve.write_shift(-4,he.DIFSECT);for(nt+=le[2];Oe<nt;++Oe)ve.write_shift(-4,he.FATSECT);wt(le[3]),wt(le[4]);for(var ft=0,ht=0,bt=we.FileIndex[0];ft<we.FileIndex.length;++ft)bt=we.FileIndex[ft],bt.content&&(ht=bt.content.length,!(ht<4096)&&(bt.start=nt,wt(ht+511>>9)));for(wt(le[6]+7>>3);ve.l&511;)ve.write_shift(-4,he.ENDOFCHAIN);for(nt=Oe=0,ft=0;ft<we.FileIndex.length;++ft)bt=we.FileIndex[ft],bt.content&&(ht=bt.content.length,!(!ht||ht>=4096)&&(bt.start=nt,wt(ht+63>>6)));for(;ve.l&511;)ve.write_shift(-4,he.ENDOFCHAIN);for(Oe=0;Oe<le[4]<<2;++Oe){var Ut=we.FullPaths[Oe];if(!Ut||Ut.length===0){for(ft=0;ft<17;++ft)ve.write_shift(4,0);for(ft=0;ft<3;++ft)ve.write_shift(4,-1);for(ft=0;ft<12;++ft)ve.write_shift(4,0);continue}bt=we.FileIndex[Oe],Oe===0&&(bt.start=bt.size?bt.start-1:Q);var rr=Oe===0&&Me.root||bt.name;if(ht=2*(rr.length+1),ve.write_shift(64,rr,"utf16le"),ve.write_shift(2,ht),ve.write_shift(1,bt.type),ve.write_shift(1,bt.color),ve.write_shift(-4,bt.L),ve.write_shift(-4,bt.R),ve.write_shift(-4,bt.C),bt.clsid)ve.write_shift(16,bt.clsid,"hex");else for(ft=0;ft<4;++ft)ve.write_shift(4,0);ve.write_shift(4,bt.state||0),ve.write_shift(4,0),ve.write_shift(4,0),ve.write_shift(4,0),ve.write_shift(4,0),ve.write_shift(4,bt.start),ve.write_shift(4,bt.size),ve.write_shift(4,0)}for(Oe=1;Oe<we.FileIndex.length;++Oe)if(bt=we.FileIndex[Oe],bt.size>=4096)if(ve.l=bt.start+1<<9,ra&&Buffer.isBuffer(bt.content))bt.content.copy(ve,ve.l,0,bt.size),ve.l+=bt.size+511&-512;else{for(ft=0;ft<bt.size;++ft)ve.write_shift(1,bt.content[ft]);for(;ft&511;++ft)ve.write_shift(1,0)}for(Oe=1;Oe<we.FileIndex.length;++Oe)if(bt=we.FileIndex[Oe],bt.size>0&&bt.size<4096)if(ra&&Buffer.isBuffer(bt.content))bt.content.copy(ve,ve.l,0,bt.size),ve.l+=bt.size+63&-64;else{for(ft=0;ft<bt.size;++ft)ve.write_shift(1,bt.content[ft]);for(;ft&63;++ft)ve.write_shift(1,0)}if(ra)ve.l=ve.length;else for(;ve.l<ve.length;)ve.write_shift(1,0);return ve}function q(we,Ne){var Me=we.FullPaths.map(function(ft){return ft.toUpperCase()}),le=Me.map(function(ft){var ht=ft.split("/");return ht[ht.length-(ft.slice(-1)=="/"?2:1)]}),ve=!1;Ne.charCodeAt(0)===47?(ve=!0,Ne=Me[0].slice(0,-1)+Ne):ve=Ne.indexOf("/")!==-1;var Oe=Ne.toUpperCase(),nt=ve===!0?Me.indexOf(Oe):le.indexOf(Oe);if(nt!==-1)return we.FileIndex[nt];var wt=!Oe.match(vg);for(Oe=Oe.replace(Co,""),wt&&(Oe=Oe.replace(vg,"!")),nt=0;nt<Me.length;++nt)if((wt?Me[nt].replace(vg,"!"):Me[nt]).replace(Co,"")==Oe||(wt?le[nt].replace(vg,"!"):le[nt]).replace(Co,"")==Oe)return we.FileIndex[nt];return null}var K=64,Q=-2,re="d0cf11e0a1b11ae1",ae=[208,207,17,224,161,177,26,225],de="00000000000000000000000000000000",he={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:Q,FREESECT:-1,HEADER_SIGNATURE:re,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:de,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function Se(we,Ne,Me){d();var le=Z(we,Me);c.writeFileSync(Ne,le)}function ke(we){for(var Ne=new Array(we.length),Me=0;Me<we.length;++Me)Ne[Me]=String.fromCharCode(we[Me]);return Ne.join("")}function Le(we,Ne){var Me=Z(we,Ne);switch(Ne&&Ne.type||"buffer"){case"file":return d(),c.writeFileSync(Ne.filename,Me),Me;case"binary":return typeof Me=="string"?Me:ke(Me);case"base64":return cb(typeof Me=="string"?Me:ke(Me));case"buffer":if(ra)return Buffer.isBuffer(Me)?Me:sh(Me);case"array":return typeof Me=="string"?Sc(Me):Me}return Me}var fe;function F(we){try{var Ne=we.InflateRaw,Me=new Ne;if(Me._processChunk(new Uint8Array([3,0]),Me._finishFlushFlag),Me.bytesRead)fe=we;else throw new Error("zlib does not expose bytesRead")}catch(le){console.error("cannot use native zlib: "+(le.message||le))}}function te(we,Ne){if(!fe)return Kt(we,Ne);var Me=fe.InflateRaw,le=new Me,ve=le._processChunk(we.slice(we.l),le._finishFlushFlag);return we.l+=le.bytesRead,ve}function Y(we){return fe?fe.deflateRawSync(we):Gt(we)}var ne=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ee=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],Ce=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function me(we){var Ne=(we<<1|we<<11)&139536|(we<<5|we<<15)&558144;return(Ne>>16|Ne>>8|Ne)&255}for(var se=typeof Uint8Array<"u",je=se?new Uint8Array(256):[],be=0;be<256;++be)je[be]=me(be);function ie(we,Ne){var Me=je[we&255];return Ne<=8?Me>>>8-Ne:(Me=Me<<8|je[we>>8&255],Ne<=16?Me>>>16-Ne:(Me=Me<<8|je[we>>16&255],Me>>>24-Ne))}function Te(we,Ne){var Me=Ne&7,le=Ne>>>3;return(we[le]|(Me<=6?0:we[le+1]<<8))>>>Me&3}function De(we,Ne){var Me=Ne&7,le=Ne>>>3;return(we[le]|(Me<=5?0:we[le+1]<<8))>>>Me&7}function ye(we,Ne){var Me=Ne&7,le=Ne>>>3;return(we[le]|(Me<=4?0:we[le+1]<<8))>>>Me&15}function rt(we,Ne){var Me=Ne&7,le=Ne>>>3;return(we[le]|(Me<=3?0:we[le+1]<<8))>>>Me&31}function st(we,Ne){var Me=Ne&7,le=Ne>>>3;return(we[le]|(Me<=1?0:we[le+1]<<8))>>>Me&127}function dt(we,Ne,Me){var le=Ne&7,ve=Ne>>>3,Oe=(1<<Me)-1,nt=we[ve]>>>le;return Me<8-le||(nt|=we[ve+1]<<8-le,Me<16-le)||(nt|=we[ve+2]<<16-le,Me<24-le)||(nt|=we[ve+3]<<24-le),nt&Oe}function et(we,Ne,Me){var le=Ne&7,ve=Ne>>>3;return le<=5?we[ve]|=(Me&7)<<le:(we[ve]|=Me<<le&255,we[ve+1]=(Me&7)>>8-le),Ne+3}function lt(we,Ne,Me){var le=Ne&7,ve=Ne>>>3;return Me=(Me&1)<<le,we[ve]|=Me,Ne+1}function Ve(we,Ne,Me){var le=Ne&7,ve=Ne>>>3;return Me<<=le,we[ve]|=Me&255,Me>>>=8,we[ve+1]=Me,Ne+8}function Vt(we,Ne,Me){var le=Ne&7,ve=Ne>>>3;return Me<<=le,we[ve]|=Me&255,Me>>>=8,we[ve+1]=Me&255,we[ve+2]=Me>>>8,Ne+16}function Mt(we,Ne){var Me=we.length,le=2*Me>Ne?2*Me:Ne+5,ve=0;if(Me>=Ne)return we;if(ra){var Oe=SI(le);if(we.copy)we.copy(Oe);else for(;ve<we.length;++ve)Oe[ve]=we[ve];return Oe}else if(se){var nt=new Uint8Array(le);if(nt.set)nt.set(we);else for(;ve<Me;++ve)nt[ve]=we[ve];return nt}return we.length=le,we}function mr(we){for(var Ne=new Array(we),Me=0;Me<we;++Me)Ne[Me]=0;return Ne}function xr(we,Ne,Me){var le=1,ve=0,Oe=0,nt=0,wt=0,ft=we.length,ht=se?new Uint16Array(32):mr(32);for(Oe=0;Oe<32;++Oe)ht[Oe]=0;for(Oe=ft;Oe<Me;++Oe)we[Oe]=0;ft=we.length;var bt=se?new Uint16Array(ft):mr(ft);for(Oe=0;Oe<ft;++Oe)ht[ve=we[Oe]]++,le<ve&&(le=ve),bt[Oe]=0;for(ht[0]=0,Oe=1;Oe<=le;++Oe)ht[Oe+16]=wt=wt+ht[Oe-1]<<1;for(Oe=0;Oe<ft;++Oe)wt=we[Oe],wt!=0&&(bt[Oe]=ht[wt+16]++);var Ut=0;for(Oe=0;Oe<ft;++Oe)if(Ut=we[Oe],Ut!=0)for(wt=ie(bt[Oe],le)>>le-Ut,nt=(1<<le+4-Ut)-1;nt>=0;--nt)Ne[wt|nt<<Ut]=Ut&15|Oe<<4;return le}var sr=se?new Uint16Array(512):mr(512),Ir=se?new Uint16Array(32):mr(32);if(!se){for(var er=0;er<512;++er)sr[er]=0;for(er=0;er<32;++er)Ir[er]=0}(function(){for(var we=[],Ne=0;Ne<32;Ne++)we.push(5);xr(we,Ir,32);var Me=[];for(Ne=0;Ne<=143;Ne++)Me.push(8);for(;Ne<=255;Ne++)Me.push(9);for(;Ne<=279;Ne++)Me.push(7);for(;Ne<=287;Ne++)Me.push(8);xr(Me,sr,288)})();var Xt=(function(){for(var Ne=se?new Uint8Array(32768):[],Me=0,le=0;Me<Ce.length-1;++Me)for(;le<Ce[Me+1];++le)Ne[le]=Me;for(;le<32768;++le)Ne[le]=29;var ve=se?new Uint8Array(259):[];for(Me=0,le=0;Me<ee.length-1;++Me)for(;le<ee[Me+1];++le)ve[le]=Me;function Oe(wt,ft){for(var ht=0;ht<wt.length;){var bt=Math.min(65535,wt.length-ht),Ut=ht+bt==wt.length;for(ft.write_shift(1,+Ut),ft.write_shift(2,bt),ft.write_shift(2,~bt&65535);bt-- >0;)ft[ft.l++]=wt[ht++]}return ft.l}function nt(wt,ft){for(var ht=0,bt=0,Ut=se?new Uint16Array(32768):[];bt<wt.length;){var rr=Math.min(65535,wt.length-bt);if(rr<10){for(ht=et(ft,ht,+(bt+rr==wt.length)),ht&7&&(ht+=8-(ht&7)),ft.l=ht/8|0,ft.write_shift(2,rr),ft.write_shift(2,~rr&65535);rr-- >0;)ft[ft.l++]=wt[bt++];ht=ft.l*8;continue}ht=et(ft,ht,+(bt+rr==wt.length)+2);for(var Jt=0;rr-- >0;){var dr=wt[bt];Jt=(Jt<<5^dr)&32767;var pr=-1,Ar=0;if((pr=Ut[Jt])&&(pr|=bt&-32768,pr>bt&&(pr-=32768),pr<bt))for(;wt[pr+Ar]==wt[bt+Ar]&&Ar<250;)++Ar;if(Ar>2){dr=ve[Ar],dr<=22?ht=Ve(ft,ht,je[dr+1]>>1)-1:(Ve(ft,ht,3),ht+=5,Ve(ft,ht,je[dr-23]>>5),ht+=3);var It=dr<8?0:dr-4>>2;It>0&&(Vt(ft,ht,Ar-ee[dr]),ht+=It),dr=Ne[bt-pr],ht=Ve(ft,ht,je[dr]>>3),ht-=3;var Un=dr<4?0:dr-2>>1;Un>0&&(Vt(ft,ht,bt-pr-Ce[dr]),ht+=Un);for(var en=0;en<Ar;++en)Ut[Jt]=bt&32767,Jt=(Jt<<5^wt[bt])&32767,++bt;rr-=Ar-1}else dr<=143?dr=dr+48:ht=lt(ft,ht,1),ht=Ve(ft,ht,je[dr]),Ut[Jt]=bt&32767,++bt}ht=Ve(ft,ht,0)-1}return ft.l=(ht+7)/8|0,ft.l}return function(ft,ht){return ft.length<8?Oe(ft,ht):nt(ft,ht)}})();function Gt(we){var Ne=Bt(50+Math.floor(we.length*1.1)),Me=Xt(we,Ne);return Ne.slice(0,Me)}var ur=se?new Uint16Array(32768):mr(32768),wr=se?new Uint16Array(32768):mr(32768),lr=se?new Uint16Array(128):mr(128),mt=1,kr=1;function Ke(we,Ne){var Me=rt(we,Ne)+257;Ne+=5;var le=rt(we,Ne)+1;Ne+=5;var ve=ye(we,Ne)+4;Ne+=4;for(var Oe=0,nt=se?new Uint8Array(19):mr(19),wt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],ft=1,ht=se?new Uint8Array(8):mr(8),bt=se?new Uint8Array(8):mr(8),Ut=nt.length,rr=0;rr<ve;++rr)nt[ne[rr]]=Oe=De(we,Ne),ft<Oe&&(ft=Oe),ht[Oe]++,Ne+=3;var Jt=0;for(ht[0]=0,rr=1;rr<=ft;++rr)bt[rr]=Jt=Jt+ht[rr-1]<<1;for(rr=0;rr<Ut;++rr)(Jt=nt[rr])!=0&&(wt[rr]=bt[Jt]++);var dr=0;for(rr=0;rr<Ut;++rr)if(dr=nt[rr],dr!=0){Jt=je[wt[rr]]>>8-dr;for(var pr=(1<<7-dr)-1;pr>=0;--pr)lr[Jt|pr<<dr]=dr&7|rr<<3}var Ar=[];for(ft=1;Ar.length<Me+le;)switch(Jt=lr[st(we,Ne)],Ne+=Jt&7,Jt>>>=3){case 16:for(Oe=3+Te(we,Ne),Ne+=2,Jt=Ar[Ar.length-1];Oe-- >0;)Ar.push(Jt);break;case 17:for(Oe=3+De(we,Ne),Ne+=3;Oe-- >0;)Ar.push(0);break;case 18:for(Oe=11+st(we,Ne),Ne+=7;Oe-- >0;)Ar.push(0);break;default:Ar.push(Jt),ft<Jt&&(ft=Jt);break}var It=Ar.slice(0,Me),Un=Ar.slice(Me);for(rr=Me;rr<286;++rr)It[rr]=0;for(rr=le;rr<30;++rr)Un[rr]=0;return mt=xr(It,ur,286),kr=xr(Un,wr,30),Ne}function vt(we,Ne){if(we[0]==3&&!(we[1]&3))return[of(Ne),2];for(var Me=0,le=0,ve=SI(Ne||1<<18),Oe=0,nt=ve.length>>>0,wt=0,ft=0;(le&1)==0;){if(le=De(we,Me),Me+=3,le>>>1)le>>1==1?(wt=9,ft=5):(Me=Ke(we,Me),wt=mt,ft=kr);else{Me&7&&(Me+=8-(Me&7));var ht=we[Me>>>3]|we[(Me>>>3)+1]<<8;if(Me+=32,ht>0)for(!Ne&&nt<Oe+ht&&(ve=Mt(ve,Oe+ht),nt=ve.length);ht-- >0;)ve[Oe++]=we[Me>>>3],Me+=8;continue}for(;;){!Ne&&nt<Oe+32767&&(ve=Mt(ve,Oe+32767),nt=ve.length);var bt=dt(we,Me,wt),Ut=le>>>1==1?sr[bt]:ur[bt];if(Me+=Ut&15,Ut>>>=4,(Ut>>>8&255)===0)ve[Oe++]=Ut;else{if(Ut==256)break;Ut-=257;var rr=Ut<8?0:Ut-4>>2;rr>5&&(rr=0);var Jt=Oe+ee[Ut];rr>0&&(Jt+=dt(we,Me,rr),Me+=rr),bt=dt(we,Me,ft),Ut=le>>>1==1?Ir[bt]:wr[bt],Me+=Ut&15,Ut>>>=4;var dr=Ut<4?0:Ut-2>>1,pr=Ce[Ut];for(dr>0&&(pr+=dt(we,Me,dr),Me+=dr),!Ne&&nt<Jt&&(ve=Mt(ve,Jt+100),nt=ve.length);Oe<Jt;)ve[Oe]=ve[Oe-pr],++Oe}}}return Ne?[ve,Me+7>>>3]:[ve.slice(0,Oe),Me+7>>>3]}function Kt(we,Ne){var Me=we.slice(we.l||0),le=vt(Me,Ne);return we.l+=le[1],le[0]}function tr(we,Ne){if(we)typeof console<"u"&&console.error(Ne);else throw new Error(Ne)}function Pr(we,Ne){var Me=we;Pl(Me,0);var le=[],ve=[],Oe={FileIndex:le,FullPaths:ve};R(Oe,{root:Ne.root});for(var nt=Me.length-4;(Me[nt]!=80||Me[nt+1]!=75||Me[nt+2]!=5||Me[nt+3]!=6)&&nt>=0;)--nt;Me.l=nt+4,Me.l+=4;var wt=Me.read_shift(2);Me.l+=6;var ft=Me.read_shift(4);for(Me.l=ft,nt=0;nt<wt;++nt){Me.l+=20;var ht=Me.read_shift(4),bt=Me.read_shift(4),Ut=Me.read_shift(2),rr=Me.read_shift(2),Jt=Me.read_shift(2);Me.l+=8;var dr=Me.read_shift(4),pr=o(Me.slice(Me.l+Ut,Me.l+Ut+rr));Me.l+=Ut+rr+Jt;var Ar=Me.l;Me.l=dr+4,Nr(Me,ht,bt,Oe,pr),Me.l=Ar}return Oe}function Nr(we,Ne,Me,le,ve){we.l+=2;var Oe=we.read_shift(2),nt=we.read_shift(2),wt=l(we);if(Oe&8257)throw new Error("Unsupported ZIP encryption");for(var ft=we.read_shift(4),ht=we.read_shift(4),bt=we.read_shift(4),Ut=we.read_shift(2),rr=we.read_shift(2),Jt="",dr=0;dr<Ut;++dr)Jt+=String.fromCharCode(we[we.l++]);if(rr){var pr=o(we.slice(we.l,we.l+rr));(pr[21589]||{}).mt&&(wt=pr[21589].mt),((ve||{})[21589]||{}).mt&&(wt=ve[21589].mt)}we.l+=rr;var Ar=we.slice(we.l,we.l+ht);switch(nt){case 8:Ar=te(we,bt);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+nt)}var It=!1;Oe&8&&(ft=we.read_shift(4),ft==134695760&&(ft=we.read_shift(4),It=!0),ht=we.read_shift(4),bt=we.read_shift(4)),ht!=Ne&&tr(It,"Bad compressed size: "+Ne+" != "+ht),bt!=Me&&tr(It,"Bad uncompressed size: "+Me+" != "+bt),gr(le,Jt,Ar,{unsafe:!0,mt:wt})}function Ge(we,Ne){var Me=Ne||{},le=[],ve=[],Oe=Bt(1),nt=Me.compression?8:0,wt=0,ft=0,ht=0,bt=0,Ut=0,rr=we.FullPaths[0],Jt=rr,dr=we.FileIndex[0],pr=[],Ar=0;for(ft=1;ft<we.FullPaths.length;++ft)if(Jt=we.FullPaths[ft].slice(rr.length),dr=we.FileIndex[ft],!(!dr.size||!dr.content||Jt=="Sh33tJ5")){var It=bt,Un=Bt(Jt.length);for(ht=0;ht<Jt.length;++ht)Un.write_shift(1,Jt.charCodeAt(ht)&127);Un=Un.slice(0,Un.l),pr[Ut]=Dbe.buf(dr.content,0);var en=dr.content;nt==8&&(en=Y(en)),Oe=Bt(30),Oe.write_shift(4,67324752),Oe.write_shift(2,20),Oe.write_shift(2,wt),Oe.write_shift(2,nt),dr.mt?s(Oe,dr.mt):Oe.write_shift(4,0),Oe.write_shift(-4,pr[Ut]),Oe.write_shift(4,en.length),Oe.write_shift(4,dr.content.length),Oe.write_shift(2,Un.length),Oe.write_shift(2,0),bt+=Oe.length,le.push(Oe),bt+=Un.length,le.push(Un),bt+=en.length,le.push(en),Oe=Bt(46),Oe.write_shift(4,33639248),Oe.write_shift(2,0),Oe.write_shift(2,20),Oe.write_shift(2,wt),Oe.write_shift(2,nt),Oe.write_shift(4,0),Oe.write_shift(-4,pr[Ut]),Oe.write_shift(4,en.length),Oe.write_shift(4,dr.content.length),Oe.write_shift(2,Un.length),Oe.write_shift(2,0),Oe.write_shift(2,0),Oe.write_shift(2,0),Oe.write_shift(2,0),Oe.write_shift(4,0),Oe.write_shift(4,It),Ar+=Oe.l,ve.push(Oe),Ar+=Un.length,ve.push(Un),++Ut}return Oe=Bt(22),Oe.write_shift(4,101010256),Oe.write_shift(2,0),Oe.write_shift(2,0),Oe.write_shift(2,Ut),Oe.write_shift(2,Ut),Oe.write_shift(4,Ar),Oe.write_shift(4,bt),Oe.write_shift(2,0),pl([pl(le),pl(ve),Oe])}var Ot={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function hr(we,Ne){if(we.ctype)return we.ctype;var Me=we.name||"",le=Me.match(/\.([^\.]+)$/);return le&&Ot[le[1]]||Ne&&(le=(Me=Ne).match(/[\.\\]([^\.\\])+$/),le&&Ot[le[1]])?Ot[le[1]]:"application/octet-stream"}function $r(we){for(var Ne=cb(we),Me=[],le=0;le<Ne.length;le+=76)Me.push(Ne.slice(le,le+76));return Me.join(`\r
`)+`\r
`}function Dr(we){var Ne=we.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(ht){var bt=ht.charCodeAt(0).toString(16).toUpperCase();return"="+(bt.length==1?"0"+bt:bt)});Ne=Ne.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),Ne.charAt(0)==`
`&&(Ne="=0D"+Ne.slice(1)),Ne=Ne.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var Me=[],le=Ne.split(`\r
`),ve=0;ve<le.length;++ve){var Oe=le[ve];if(Oe.length==0){Me.push("");continue}for(var nt=0;nt<Oe.length;){var wt=76,ft=Oe.slice(nt,nt+wt);ft.charAt(wt-1)=="="?wt--:ft.charAt(wt-2)=="="?wt-=2:ft.charAt(wt-3)=="="&&(wt-=3),ft=Oe.slice(nt,nt+wt),nt+=wt,nt<Oe.length&&(ft+="="),Me.push(ft)}}return Me.join(`\r
`)}function Yt(we){for(var Ne=[],Me=0;Me<we.length;++Me){for(var le=we[Me];Me<=we.length&&le.charAt(le.length-1)=="=";)le=le.slice(0,le.length-1)+we[++Me];Ne.push(le)}for(var ve=0;ve<Ne.length;++ve)Ne[ve]=Ne[ve].replace(/[=][0-9A-Fa-f]{2}/g,function(Oe){return String.fromCharCode(parseInt(Oe.slice(1),16))});return Sc(Ne.join(`\r
`))}function Mr(we,Ne,Me){for(var le="",ve="",Oe="",nt,wt=0;wt<10;++wt){var ft=Ne[wt];if(!ft||ft.match(/^\s*$/))break;var ht=ft.match(/^(.*?):\s*([^\s].*)$/);if(ht)switch(ht[1].toLowerCase()){case"content-location":le=ht[2].trim();break;case"content-type":Oe=ht[2].trim();break;case"content-transfer-encoding":ve=ht[2].trim();break}}switch(++wt,ve.toLowerCase()){case"base64":nt=Sc(Pc(Ne.slice(wt).join("")));break;case"quoted-printable":nt=Yt(Ne.slice(wt));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+ve)}var bt=gr(we,le.slice(Me.length),nt,{unsafe:!0});Oe&&(bt.ctype=Oe)}function We(we,Ne){if(ke(we.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var Me=Ne&&Ne.root||"",le=(ra&&Buffer.isBuffer(we)?we.toString("binary"):ke(we)).split(`\r
`),ve=0,Oe="";for(ve=0;ve<le.length;++ve)if(Oe=le[ve],!!/^Content-Location:/i.test(Oe)&&(Oe=Oe.slice(Oe.indexOf("file")),Me||(Me=Oe.slice(0,Oe.lastIndexOf("/")+1)),Oe.slice(0,Me.length)!=Me))for(;Me.length>0&&(Me=Me.slice(0,Me.length-1),Me=Me.slice(0,Me.lastIndexOf("/")+1),Oe.slice(0,Me.length)!=Me););var nt=(le[1]||"").match(/boundary="(.*?)"/);if(!nt)throw new Error("MAD cannot find boundary");var wt="--"+(nt[1]||""),ft=[],ht=[],bt={FileIndex:ft,FullPaths:ht};R(bt);var Ut,rr=0;for(ve=0;ve<le.length;++ve){var Jt=le[ve];Jt!==wt&&Jt!==wt+"--"||(rr++&&Mr(bt,le.slice(Ut,ve),Me),Ut=ve)}return bt}function Qt(we,Ne){var Me=Ne||{},le=Me.boundary||"SheetJS";le="------="+le;for(var ve=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+le.slice(2)+'"',"","",""],Oe=we.FullPaths[0],nt=Oe,wt=we.FileIndex[0],ft=1;ft<we.FullPaths.length;++ft)if(nt=we.FullPaths[ft].slice(Oe.length),wt=we.FileIndex[ft],!(!wt.size||!wt.content||nt=="Sh33tJ5")){nt=nt.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(Ar){return"_x"+Ar.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(Ar){return"_u"+Ar.charCodeAt(0).toString(16)+"_"});for(var ht=wt.content,bt=ra&&Buffer.isBuffer(ht)?ht.toString("binary"):ke(ht),Ut=0,rr=Math.min(1024,bt.length),Jt=0,dr=0;dr<=rr;++dr)(Jt=bt.charCodeAt(dr))>=32&&Jt<128&&++Ut;var pr=Ut>=rr*4/5;ve.push(le),ve.push("Content-Location: "+(Me.root||"file:///C:/SheetJS/")+nt),ve.push("Content-Transfer-Encoding: "+(pr?"quoted-printable":"base64")),ve.push("Content-Type: "+hr(wt,nt)),ve.push(""),ve.push(pr?Dr(bt):$r(bt))}return ve.push(le+`--\r
`),ve.join(`\r
`)}function Cr(we){var Ne={};return R(Ne,we),Ne}function gr(we,Ne,Me,le){var ve=le&&le.unsafe;ve||R(we);var Oe=!ve&&vn.find(we,Ne);if(!Oe){var nt=we.FullPaths[0];Ne.slice(0,nt.length)==nt?nt=Ne:(nt.slice(-1)!="/"&&(nt+="/"),nt=(nt+Ne).replace("//","/")),Oe={name:a(Ne),type:2},we.FileIndex.push(Oe),we.FullPaths.push(nt),ve||vn.utils.cfb_gc(we)}return Oe.content=Me,Oe.size=Me?Me.length:0,le&&(le.CLSID&&(Oe.clsid=le.CLSID),le.mt&&(Oe.mt=le.mt),le.ct&&(Oe.ct=le.ct)),Oe}function _n(we,Ne){R(we);var Me=vn.find(we,Ne);if(Me){for(var le=0;le<we.FileIndex.length;++le)if(we.FileIndex[le]==Me)return we.FileIndex.splice(le,1),we.FullPaths.splice(le,1),!0}return!1}function Rr(we,Ne,Me){R(we);var le=vn.find(we,Ne);if(le){for(var ve=0;ve<we.FileIndex.length;++ve)if(we.FileIndex[ve]==le)return we.FileIndex[ve].name=a(Me),we.FullPaths[ve]=Me,!0}return!1}function Sn(we){U(we,!0)}return t.find=q,t.read=W,t.parse=f,t.write=Le,t.writeFile=Se,t.utils={cfb_new:Cr,cfb_add:gr,cfb_del:_n,cfb_mov:Rr,cfb_gc:Sn,ReadShift:Cg,CheckField:n$,prep_blob:Pl,bconcat:pl,use_zlib:F,_deflateRaw:Gt,_inflateRaw:Kt,consts:he},t})();function Mbe(e){return typeof e=="string"?Pk(e):Array.isArray(e)?lbe(e):e}function nv(e,t,r){if(typeof Deno<"u"){if(r&&typeof t=="string")switch(r){case"utf8":t=new TextEncoder(r).encode(t);break;case"binary":t=Pk(t);break;default:throw new Error("Unsupported encoding "+r)}return Deno.writeFileSync(e,t)}var n=r=="utf8"?Mu(t):t;if(typeof IE_SaveFile<"u")return IE_SaveFile(n,e);if(typeof Blob<"u"){var a=new Blob([Mbe(n)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(a,e);if(typeof saveAs<"u")return saveAs(a,e);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var s=URL.createObjectURL(a);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),chrome.downloads.download({url:s,filename:e,saveAs:!0});var l=document.createElement("a");if(l.download!=null)return l.download=e,l.href=s,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),s}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var o=File(e);return o.open("w"),o.encoding="binary",Array.isArray(t)&&(t=vf(t)),o.write(t),o.close(),t}catch(c){if(!c.message||!c.message.match(/onstruct/))throw c}throw new Error("cannot save file "+e)}function Lbe(e){if(typeof Deno<"u")return Deno.readFileSync(e);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var t=File(e);t.open("r"),t.encoding="binary";var r=t.read();return t.close(),r}catch(n){if(!n.message||!n.message.match(/onstruct/))throw n}throw new Error("Cannot access file "+e)}function ui(e){for(var t=Object.keys(e),r=[],n=0;n<t.length;++n)Object.prototype.hasOwnProperty.call(e,t[n])&&r.push(t[n]);return r}function II(e,t){for(var r=[],n=ui(e),a=0;a!==n.length;++a)r[e[n[a]][t]]==null&&(r[e[n[a]][t]]=n[a]);return r}function Dk(e){for(var t=[],r=ui(e),n=0;n!==r.length;++n)t[e[r[n]]]=r[n];return t}function Mk(e){for(var t=[],r=ui(e),n=0;n!==r.length;++n)t[e[r[n]]]=parseInt(r[n],10);return t}function Rbe(e){for(var t=[],r=ui(e),n=0;n!==r.length;++n)t[e[r[n]]]==null&&(t[e[r[n]]]=[]),t[e[r[n]]].push(r[n]);return t}var fw=new Date(1899,11,30,0,0,0);function Gi(e,t){var r=e.getTime(),n=fw.getTime()+(e.getTimezoneOffset()-fw.getTimezoneOffset())*6e4;return(r-n)/(1440*60*1e3)}var LH=new Date,Fbe=fw.getTime()+(LH.getTimezoneOffset()-fw.getTimezoneOffset())*6e4,DI=LH.getTimezoneOffset();function Lk(e){var t=new Date;return t.setTime(e*24*60*60*1e3+Fbe),t.getTimezoneOffset()!==DI&&t.setTime(t.getTime()+(t.getTimezoneOffset()-DI)*6e4),t}function Bbe(e){var t=0,r=0,n=!1,a=e.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!a)throw new Error("|"+e+"| is not an ISO8601 Duration");for(var s=1;s!=a.length;++s)if(a[s]){switch(r=1,s>3&&(n=!0),a[s].slice(a[s].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+a[s].slice(a[s].length-1));case"D":r*=24;case"H":r*=60;case"M":if(n)r*=60;else throw new Error("Unsupported ISO Duration Field: M")}t+=r*parseInt(a[s],10)}return t}var MI=new Date("2017-02-19T19:06:09.000Z"),RH=isNaN(MI.getFullYear())?new Date("2/19/17"):MI,Ube=RH.getFullYear()==2017;function Es(e,t){var r=new Date(e);if(Ube)return t>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):t<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(e instanceof Date)return e;if(RH.getFullYear()==1917&&!isNaN(r.getFullYear())){var n=r.getFullYear();return e.indexOf(""+n)>-1||r.setFullYear(r.getFullYear()+100),r}var a=e.match(/\d+/g)||["2017","2","19","0","0","0"],s=new Date(+a[0],+a[1]-1,+a[2],+a[3]||0,+a[4]||0,+a[5]||0);return e.indexOf("Z")>-1&&(s=new Date(s.getTime()-s.getTimezoneOffset()*60*1e3)),s}function Um(e,t){if(ra&&Buffer.isBuffer(e)){if(t){if(e[0]==255&&e[1]==254)return Mu(e.slice(2).toString("utf16le"));if(e[1]==254&&e[2]==255)return Mu(_H(e.slice(2).toString("binary")))}return e.toString("binary")}if(typeof TextDecoder<"u")try{if(t){if(e[0]==255&&e[1]==254)return Mu(new TextDecoder("utf-16le").decode(e.slice(2)));if(e[0]==254&&e[1]==255)return Mu(new TextDecoder("utf-16be").decode(e.slice(2)))}var r={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(e)&&(e=new Uint8Array(e)),new TextDecoder("latin1").decode(e).replace(/[]/g,function(s){return r[s]||s})}catch{}for(var n=[],a=0;a!=e.length;++a)n.push(String.fromCharCode(e[a]));return n.join("")}function Ts(e){if(typeof JSON<"u"&&!Array.isArray(e))return JSON.parse(JSON.stringify(e));if(typeof e!="object"||e==null)return e;if(e instanceof Date)return new Date(e.getTime());var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=Ts(e[r]));return t}function oi(e,t){for(var r="";r.length<t;)r+=e;return r}function Jd(e){var t=Number(e);if(!isNaN(t))return isFinite(t)?t:NaN;if(!/\d/.test(e))return t;var r=1,n=e.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(t=Number(n))||(n=n.replace(/[(](.*)[)]/,function(a,s){return r=-r,s}),!isNaN(t=Number(n)))?t/r:t}var zbe=["january","february","march","april","may","june","july","august","september","october","november","december"];function W1(e){var t=new Date(e),r=new Date(NaN),n=t.getYear(),a=t.getMonth(),s=t.getDate();if(isNaN(s))return r;var l=e.toLowerCase();if(l.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(l=l.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),l.length>3&&zbe.indexOf(l)==-1)return r}else if(l.match(/[a-z]/))return r;return n<0||n>8099?r:(a>0||s>1)&&n!=101?t:e.match(/[^-0-9:,\/\\]/)?r:t}var qbe=(function(){var e="abacaba".split(/(:?b)/i).length==5;return function(r,n,a){if(e||typeof n=="string")return r.split(n);for(var s=r.split(n),l=[s[0]],o=1;o<s.length;++o)l.push(a),l.push(s[o]);return l}})();function FH(e){return e?e.content&&e.type?Um(e.content,!0):e.data?bg(e.data):e.asNodeBuffer&&ra?bg(e.asNodeBuffer().toString("binary")):e.asBinary?bg(e.asBinary()):e._data&&e._data.getContent?bg(Um(Array.prototype.slice.call(e._data.getContent(),0))):null:null}function BH(e){if(!e)return null;if(e.data)return NI(e.data);if(e.asNodeBuffer&&ra)return e.asNodeBuffer();if(e._data&&e._data.getContent){var t=e._data.getContent();return typeof t=="string"?NI(t):Array.prototype.slice.call(t)}return e.content&&e.type?e.content:null}function Hbe(e){return e&&e.name.slice(-4)===".bin"?BH(e):FH(e)}function nd(e,t){for(var r=e.FullPaths||ui(e.files),n=t.toLowerCase().replace(/[\/]/g,"\\"),a=n.replace(/\\/g,"/"),s=0;s<r.length;++s){var l=r[s].replace(/^Root Entry[\/]/,"").toLowerCase();if(n==l||a==l)return e.files?e.files[r[s]]:e.FileIndex[s]}return null}function BC(e,t){var r=nd(e,t);if(r==null)throw new Error("Cannot find file "+t+" in zip");return r}function Ii(e,t,r){if(!r)return Hbe(BC(e,t));if(!t)return null;try{return Ii(e,t)}catch{return null}}function jc(e,t,r){if(!r)return FH(BC(e,t));if(!t)return null;try{return jc(e,t)}catch{return null}}function $be(e,t,r){return BH(BC(e,t))}function LI(e){for(var t=e.FullPaths||ui(e.files),r=[],n=0;n<t.length;++n)t[n].slice(-1)!="/"&&r.push(t[n].replace(/^Root Entry[\/]/,""));return r.sort()}function Yn(e,t,r){if(e.FullPaths){if(typeof r=="string"){var n;return ra?n=sh(r):n=obe(r),vn.utils.cfb_add(e,t,n)}vn.utils.cfb_add(e,t,r)}else e.file(t,r)}function UC(){return vn.utils.cfb_new()}function UH(e,t){switch(t.type){case"base64":return vn.read(e,{type:"base64"});case"binary":return vn.read(e,{type:"binary"});case"buffer":case"array":return vn.read(e,{type:"buffer"})}throw new Error("Unrecognized type "+t.type)}function yg(e,t){if(e.charAt(0)=="/")return e.slice(1);var r=t.split("/");t.slice(-1)!="/"&&r.pop();for(var n=e.split("/");n.length!==0;){var a=n.shift();a===".."?r.pop():a!=="."&&r.push(a)}return r.join("/")}var Ci=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,Vbe=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,RI=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,Wbe=/<[^>]*>/g,io=Ci.match(RI)?RI:Wbe,Kbe=/<\w*:/,Gbe=/<(\/?)\w+:/;function Mn(e,t,r){for(var n={},a=0,s=0;a!==e.length&&!((s=e.charCodeAt(a))===32||s===10||s===13);++a);if(t||(n[0]=e.slice(0,a)),a===e.length)return n;var l=e.match(Vbe),o=0,c="",d=0,f="",p="",y=1;if(l)for(d=0;d!=l.length;++d){for(p=l[d],s=0;s!=p.length&&p.charCodeAt(s)!==61;++s);for(f=p.slice(0,s).trim();p.charCodeAt(s+1)==32;)++s;for(y=(a=p.charCodeAt(s+1))==34||a==39?1:0,c=p.slice(s+1+y,p.length-y),o=0;o!=f.length&&f.charCodeAt(o)!==58;++o);if(o===f.length)f.indexOf("_")>0&&(f=f.slice(0,f.indexOf("_"))),n[f]=c,n[f.toLowerCase()]=c;else{var g=(o===5&&f.slice(0,5)==="xmlns"?"xmlns":"")+f.slice(o+1);if(n[g]&&f.slice(o-3,o)=="ext")continue;n[g]=c,n[g.toLowerCase()]=c}}return n}function Wu(e){return e.replace(Gbe,"<$1")}var zH={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},zC=Dk(zH),Ea=(function(){var e=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,t=/_x([\da-fA-F]{4})_/ig;return function r(n){var a=n+"",s=a.indexOf("<![CDATA[");if(s==-1)return a.replace(e,function(o,c){return zH[o]||String.fromCharCode(parseInt(c,o.indexOf("x")>-1?16:10))||o}).replace(t,function(o,c){return String.fromCharCode(parseInt(c,16))});var l=a.indexOf("]]>");return r(a.slice(0,s))+a.slice(s+9,l)+r(a.slice(l+3))}})(),qC=/[&<>'"]/g,Xbe=/[\u0000-\u0008\u000b-\u001f]/g;function Ya(e){var t=e+"";return t.replace(qC,function(r){return zC[r]}).replace(Xbe,function(r){return"_x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+"_"})}function FI(e){return Ya(e).replace(/ /g,"_x0020_")}var qH=/[\u0000-\u001f]/g;function HC(e){var t=e+"";return t.replace(qC,function(r){return zC[r]}).replace(/\n/g,"<br/>").replace(qH,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}function Ybe(e){var t=e+"";return t.replace(qC,function(r){return zC[r]}).replace(qH,function(r){return"&#x"+r.charCodeAt(0).toString(16).toUpperCase()+";"})}var BI=(function(){var e=/&#(\d+);/g;function t(r,n){return String.fromCharCode(parseInt(n,10))}return function(n){return n.replace(e,t)}})();function Zbe(e){return e.replace(/(\r\n|[\r\n])/g,"&#10;")}function js(e){switch(e){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function rN(e){for(var t="",r=0,n=0,a=0,s=0,l=0,o=0;r<e.length;){if(n=e.charCodeAt(r++),n<128){t+=String.fromCharCode(n);continue}if(a=e.charCodeAt(r++),n>191&&n<224){l=(n&31)<<6,l|=a&63,t+=String.fromCharCode(l);continue}if(s=e.charCodeAt(r++),n<240){t+=String.fromCharCode((n&15)<<12|(a&63)<<6|s&63);continue}l=e.charCodeAt(r++),o=((n&7)<<18|(a&63)<<12|(s&63)<<6|l&63)-65536,t+=String.fromCharCode(55296+(o>>>10&1023)),t+=String.fromCharCode(56320+(o&1023))}return t}function UI(e){var t=of(2*e.length),r,n,a=1,s=0,l=0,o;for(n=0;n<e.length;n+=a)a=1,(o=e.charCodeAt(n))<128?r=o:o<224?(r=(o&31)*64+(e.charCodeAt(n+1)&63),a=2):o<240?(r=(o&15)*4096+(e.charCodeAt(n+1)&63)*64+(e.charCodeAt(n+2)&63),a=3):(a=4,r=(o&7)*262144+(e.charCodeAt(n+1)&63)*4096+(e.charCodeAt(n+2)&63)*64+(e.charCodeAt(n+3)&63),r-=65536,l=55296+(r>>>10&1023),r=56320+(r&1023)),l!==0&&(t[s++]=l&255,t[s++]=l>>>8,l=0),t[s++]=r%256,t[s++]=r>>>8;return t.slice(0,s).toString("ucs2")}function zI(e){return sh(e,"binary").toString("utf8")}var P2="foo bar baz",ss=ra&&(zI(P2)==rN(P2)&&zI||UI(P2)==rN(P2)&&UI)||rN,Mu=ra?function(e){return sh(e,"utf8").toString("binary")}:function(e){for(var t=[],r=0,n=0,a=0;r<e.length;)switch(n=e.charCodeAt(r++),!0){case n<128:t.push(String.fromCharCode(n));break;case n<2048:t.push(String.fromCharCode(192+(n>>6))),t.push(String.fromCharCode(128+(n&63)));break;case(n>=55296&&n<57344):n-=55296,a=e.charCodeAt(r++)-56320+(n<<10),t.push(String.fromCharCode(240+(a>>18&7))),t.push(String.fromCharCode(144+(a>>12&63))),t.push(String.fromCharCode(128+(a>>6&63))),t.push(String.fromCharCode(128+(a&63)));break;default:t.push(String.fromCharCode(224+(n>>12))),t.push(String.fromCharCode(128+(n>>6&63))),t.push(String.fromCharCode(128+(n&63)))}return t.join("")},ub=(function(){var e={};return function(r,n){var a=r+"|"+(n||"");return e[a]?e[a]:e[a]=new RegExp("<(?:\\w+:)?"+r+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+r+">",n||"")}})(),HH=(function(){var e=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(t){return[new RegExp("&"+t[0]+";","ig"),t[1]]});return function(r){for(var n=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),a=0;a<e.length;++a)n=n.replace(e[a][0],e[a][1]);return n}})(),Qbe=(function(){var e={};return function(r){return e[r]!==void 0?e[r]:e[r]=new RegExp("<(?:vt:)?"+r+">([\\s\\S]*?)</(?:vt:)?"+r+">","g")}})(),Jbe=/<\/?(?:vt:)?variant>/g,eve=/<(?:vt:)([^>]*)>([\s\S]*)</;function qI(e,t){var r=Mn(e),n=e.match(Qbe(r.baseType))||[],a=[];if(n.length!=r.size){if(t.WTF)throw new Error("unexpected vector length "+n.length+" != "+r.size);return a}return n.forEach(function(s){var l=s.replace(Jbe,"").match(eve);l&&a.push({v:ss(l[2]),t:l[1]})}),a}var $H=/(^\s|\s$|\n)/;function Dl(e,t){return"<"+e+(t.match($H)?' xml:space="preserve"':"")+">"+t+"</"+e+">"}function hb(e){return ui(e).map(function(t){return" "+t+'="'+e[t]+'"'}).join("")}function Sr(e,t,r){return"<"+e+(r!=null?hb(r):"")+(t!=null?(t.match($H)?' xml:space="preserve"':"")+">"+t+"</"+e:"/")+">"}function SS(e,t){try{return e.toISOString().replace(/\.\d*/,"")}catch(r){if(t)throw r}return""}function tve(e,t){switch(typeof e){case"string":var r=Sr("vt:lpwstr",Ya(e));return r=r.replace(/&quot;/g,"_x0022_"),r;case"number":return Sr((e|0)==e?"vt:i4":"vt:r8",Ya(String(e)));case"boolean":return Sr("vt:bool",e?"true":"false")}if(e instanceof Date)return Sr("vt:filetime",SS(e));throw new Error("Unable to serialize "+e)}function $C(e){if(ra&&Buffer.isBuffer(e))return e.toString("utf8");if(typeof e=="string")return e;if(typeof Uint8Array<"u"&&e instanceof Uint8Array)return ss(vf(LC(e)));throw new Error("Bad input format: expected Buffer or string")}var fb=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,Ki={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},Qm=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],yc={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function rve(e,t){for(var r=1-2*(e[t+7]>>>7),n=((e[t+7]&127)<<4)+(e[t+6]>>>4&15),a=e[t+6]&15,s=5;s>=0;--s)a=a*256+e[t+s];return n==2047?a==0?r*(1/0):NaN:(n==0?n=-1022:(n-=1023,a+=Math.pow(2,52)),r*Math.pow(2,n-52)*a)}function nve(e,t,r){var n=(t<0||1/t==-1/0?1:0)<<7,a=0,s=0,l=n?-t:t;isFinite(l)?l==0?a=s=0:(a=Math.floor(Math.log(l)/Math.LN2),s=l*Math.pow(2,52-a),a<=-1023&&(!isFinite(s)||s<Math.pow(2,52))?a=-1022:(s-=Math.pow(2,52),a+=1023)):(a=2047,s=isNaN(t)?26985:0);for(var o=0;o<=5;++o,s/=256)e[r+o]=s&255;e[r+6]=(a&15)<<4|s&15,e[r+7]=a>>4|n}var HI=function(e){for(var t=[],r=10240,n=0;n<e[0].length;++n)if(e[0][n])for(var a=0,s=e[0][n].length;a<s;a+=r)t.push.apply(t,e[0][n].slice(a,a+r));return t},$I=ra?function(e){return e[0].length>0&&Buffer.isBuffer(e[0][0])?Buffer.concat(e[0].map(function(t){return Buffer.isBuffer(t)?t:sh(t)})):HI(e)}:HI,VI=function(e,t,r){for(var n=[],a=t;a<r;a+=2)n.push(String.fromCharCode(O0(e,a)));return n.join("").replace(Co,"")},VC=ra?function(e,t,r){return Buffer.isBuffer(e)?e.toString("utf16le",t,r).replace(Co,""):VI(e,t,r)}:VI,WI=function(e,t,r){for(var n=[],a=t;a<t+r;++a)n.push(("0"+e[a].toString(16)).slice(-2));return n.join("")},VH=ra?function(e,t,r){return Buffer.isBuffer(e)?e.toString("hex",t,t+r):WI(e,t,r)}:WI,KI=function(e,t,r){for(var n=[],a=t;a<r;a++)n.push(String.fromCharCode(r1(e,a)));return n.join("")},av=ra?function(t,r,n){return Buffer.isBuffer(t)?t.toString("utf8",r,n):KI(t,r,n)}:KI,WH=function(e,t){var r=wc(e,t);return r>0?av(e,t+4,t+4+r-1):""},KH=WH,GH=function(e,t){var r=wc(e,t);return r>0?av(e,t+4,t+4+r-1):""},XH=GH,YH=function(e,t){var r=2*wc(e,t);return r>0?av(e,t+4,t+4+r-1):""},ZH=YH,QH=function(t,r){var n=wc(t,r);return n>0?VC(t,r+4,r+4+n):""},JH=QH,e$=function(e,t){var r=wc(e,t);return r>0?av(e,t+4,t+4+r):""},t$=e$,r$=function(e,t){return rve(e,t)},mw=r$,WC=function(t){return Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array};ra&&(KH=function(t,r){if(!Buffer.isBuffer(t))return WH(t,r);var n=t.readUInt32LE(r);return n>0?t.toString("utf8",r+4,r+4+n-1):""},XH=function(t,r){if(!Buffer.isBuffer(t))return GH(t,r);var n=t.readUInt32LE(r);return n>0?t.toString("utf8",r+4,r+4+n-1):""},ZH=function(t,r){if(!Buffer.isBuffer(t))return YH(t,r);var n=2*t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+n-1)},JH=function(t,r){if(!Buffer.isBuffer(t))return QH(t,r);var n=t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+n)},t$=function(t,r){if(!Buffer.isBuffer(t))return e$(t,r);var n=t.readUInt32LE(r);return t.toString("utf8",r+4,r+4+n)},mw=function(t,r){return Buffer.isBuffer(t)?t.readDoubleLE(r):r$(t,r)},WC=function(t){return Buffer.isBuffer(t)||Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array});var r1=function(e,t){return e[t]},O0=function(e,t){return e[t+1]*256+e[t]},ave=function(e,t){var r=e[t+1]*256+e[t];return r<32768?r:(65535-r+1)*-1},wc=function(e,t){return e[t+3]*(1<<24)+(e[t+2]<<16)+(e[t+1]<<8)+e[t]},Kf=function(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]},sve=function(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]};function Cg(e,t){var r="",n,a,s=[],l,o,c,d;switch(t){case"dbcs":if(d=this.l,ra&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*e).toString("utf16le");else for(c=0;c<e;++c)r+=String.fromCharCode(O0(this,d)),d+=2;e*=2;break;case"utf8":r=av(this,this.l,this.l+e);break;case"utf16le":e*=2,r=VC(this,this.l,this.l+e);break;case"wstr":return Cg.call(this,e,"dbcs");case"lpstr-ansi":r=KH(this,this.l),e=4+wc(this,this.l);break;case"lpstr-cp":r=XH(this,this.l),e=4+wc(this,this.l);break;case"lpwstr":r=ZH(this,this.l),e=4+2*wc(this,this.l);break;case"lpp4":e=4+wc(this,this.l),r=JH(this,this.l),e&2&&(e+=2);break;case"8lpp4":e=4+wc(this,this.l),r=t$(this,this.l),e&3&&(e+=4-(e&3));break;case"cstr":for(e=0,r="";(l=r1(this,this.l+e++))!==0;)s.push(O2(l));r=s.join("");break;case"_wstr":for(e=0,r="";(l=O0(this,this.l+e))!==0;)s.push(O2(l)),e+=2;e+=2,r=s.join("");break;case"dbcs-cont":for(r="",d=this.l,c=0;c<e;++c){if(this.lens&&this.lens.indexOf(d)!==-1)return l=r1(this,d),this.l=d+1,o=Cg.call(this,e-c,l?"dbcs-cont":"sbcs-cont"),s.join("")+o;s.push(O2(O0(this,d))),d+=2}r=s.join(""),e*=2;break;case"cpstr":case"sbcs-cont":for(r="",d=this.l,c=0;c!=e;++c){if(this.lens&&this.lens.indexOf(d)!==-1)return l=r1(this,d),this.l=d+1,o=Cg.call(this,e-c,l?"dbcs-cont":"sbcs-cont"),s.join("")+o;s.push(O2(r1(this,d))),d+=1}r=s.join("");break;default:switch(e){case 1:return n=r1(this,this.l),this.l++,n;case 2:return n=(t==="i"?ave:O0)(this,this.l),this.l+=2,n;case 4:case-4:return t==="i"||(this[this.l+3]&128)===0?(n=(e>0?Kf:sve)(this,this.l),this.l+=4,n):(a=wc(this,this.l),this.l+=4,a);case 8:case-8:if(t==="f")return e==8?a=mw(this,this.l):a=mw([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,a;e=8;case 16:r=VH(this,this.l,e);break}}return this.l+=e,r}var ive=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24&255},lve=function(e,t,r){e[r]=t&255,e[r+1]=t>>8&255,e[r+2]=t>>16&255,e[r+3]=t>>24&255},ove=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255};function cve(e,t,r){var n=0,a=0;if(r==="dbcs"){for(a=0;a!=t.length;++a)ove(this,t.charCodeAt(a),this.l+2*a);n=2*t.length}else if(r==="sbcs"){for(t=t.replace(/[^\x00-\x7F]/g,"_"),a=0;a!=t.length;++a)this[this.l+a]=t.charCodeAt(a)&255;n=t.length}else if(r==="hex"){for(;a<e;++a)this[this.l++]=parseInt(t.slice(2*a,2*a+2),16)||0;return this}else if(r==="utf16le"){var s=Math.min(this.l+e,this.length);for(a=0;a<Math.min(t.length,e);++a){var l=t.charCodeAt(a);this[this.l++]=l&255,this[this.l++]=l>>8}for(;this.l<s;)this[this.l++]=0;return this}else switch(e){case 1:n=1,this[this.l]=t&255;break;case 2:n=2,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255;break;case 3:n=3,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255,t>>>=8,this[this.l+2]=t&255;break;case 4:n=4,ive(this,t,this.l);break;case 8:if(n=8,r==="f"){nve(this,t,this.l);break}case 16:break;case-4:n=4,lve(this,t,this.l);break}return this.l+=n,this}function n$(e,t){var r=VH(this,this.l,e.length>>1);if(r!==e)throw new Error(t+"Expected "+e+" saw "+r);this.l+=e.length>>1}function Pl(e,t){e.l=t,e.read_shift=Cg,e.chk=n$,e.write_shift=cve}function so(e,t){e.l+=t}function Bt(e){var t=of(e);return Pl(t,0),t}function ih(e,t,r){if(e){var n,a,s;Pl(e,e.l||0);for(var l=e.length,o=0,c=0;e.l<l;){o=e.read_shift(1),o&128&&(o=(o&127)+((e.read_shift(1)&127)<<7));var d=vb[o]||vb[65535];for(n=e.read_shift(1),s=n&127,a=1;a<4&&n&128;++a)s+=((n=e.read_shift(1))&127)<<7*a;c=e.l+s;var f=d.f&&d.f(e,s,r);if(e.l=c,t(f,d,o))return}}}function nc(){var e=[],t=ra?256:2048,r=function(d){var f=Bt(d);return Pl(f,0),f},n=r(t),a=function(){n&&(n.length>n.l&&(n=n.slice(0,n.l),n.l=n.length),n.length>0&&e.push(n),n=null)},s=function(d){return n&&d<n.length-n.l?n:(a(),n=r(Math.max(d+1,t)))},l=function(){return a(),pl(e)},o=function(d){a(),n=d,n.l==null&&(n.l=n.length),s(t)};return{next:s,push:o,end:l,_bufs:e}}function or(e,t,r,n){var a=+t,s;if(!isNaN(a)){n||(n=vb[a].p||(r||[]).length||0),s=1+(a>=128?1:0)+1,n>=128&&++s,n>=16384&&++s,n>=2097152&&++s;var l=e.next(s);a<=127?l.write_shift(1,a):(l.write_shift(1,(a&127)+128),l.write_shift(1,a>>7));for(var o=0;o!=4;++o)if(n>=128)l.write_shift(1,(n&127)+128),n>>=7;else{l.write_shift(1,n);break}n>0&&WC(r)&&e.push(r)}}function Ag(e,t,r){var n=Ts(e);if(t.s?(n.cRel&&(n.c+=t.s.c),n.rRel&&(n.r+=t.s.r)):(n.cRel&&(n.c+=t.c),n.rRel&&(n.r+=t.r)),!r||r.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function GI(e,t,r){var n=Ts(e);return n.s=Ag(n.s,t.s,r),n.e=Ag(n.e,t.s,r),n}function Eg(e,t){if(e.cRel&&e.c<0)for(e=Ts(e);e.c<0;)e.c+=t>8?16384:256;if(e.rRel&&e.r<0)for(e=Ts(e);e.r<0;)e.r+=t>8?1048576:t>5?65536:16384;var r=Tn(e);return!e.cRel&&e.cRel!=null&&(r=hve(r)),!e.rRel&&e.rRel!=null&&(r=dve(r)),r}function nN(e,t){return e.s.r==0&&!e.s.rRel&&e.e.r==(t.biff>=12?1048575:t.biff>=8?65536:16384)&&!e.e.rRel?(e.s.cRel?"":"$")+Ks(e.s.c)+":"+(e.e.cRel?"":"$")+Ks(e.e.c):e.s.c==0&&!e.s.cRel&&e.e.c==(t.biff>=12?16383:255)&&!e.e.cRel?(e.s.rRel?"":"$")+ji(e.s.r)+":"+(e.e.rRel?"":"$")+ji(e.e.r):Eg(e.s,t.biff)+":"+Eg(e.e,t.biff)}function KC(e){return parseInt(uve(e),10)-1}function ji(e){return""+(e+1)}function dve(e){return e.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function uve(e){return e.replace(/\$(\d+)$/,"$1")}function GC(e){for(var t=fve(e),r=0,n=0;n!==t.length;++n)r=26*r+t.charCodeAt(n)-64;return r-1}function Ks(e){if(e<0)throw new Error("invalid column "+e);var t="";for(++e;e;e=Math.floor((e-1)/26))t=String.fromCharCode((e-1)%26+65)+t;return t}function hve(e){return e.replace(/^([A-Z])/,"$$$1")}function fve(e){return e.replace(/^\$([A-Z])/,"$1")}function mve(e){return e.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function Gs(e){for(var t=0,r=0,n=0;n<e.length;++n){var a=e.charCodeAt(n);a>=48&&a<=57?t=10*t+(a-48):a>=65&&a<=90&&(r=26*r+(a-64))}return{c:r-1,r:t-1}}function Tn(e){for(var t=e.c+1,r="";t;t=(t-1)/26|0)r=String.fromCharCode((t-1)%26+65)+r;return r+(e.r+1)}function ac(e){var t=e.indexOf(":");return t==-1?{s:Gs(e),e:Gs(e)}:{s:Gs(e.slice(0,t)),e:Gs(e.slice(t+1))}}function Kn(e,t){return typeof t>"u"||typeof t=="number"?Kn(e.s,e.e):(typeof e!="string"&&(e=Tn(e)),typeof t!="string"&&(t=Tn(t)),e==t?e:e+":"+t)}function Ta(e){var t={s:{c:0,r:0},e:{c:0,r:0}},r=0,n=0,a=0,s=e.length;for(r=0;n<s&&!((a=e.charCodeAt(n)-64)<1||a>26);++n)r=26*r+a;for(t.s.c=--r,r=0;n<s&&!((a=e.charCodeAt(n)-48)<0||a>9);++n)r=10*r+a;if(t.s.r=--r,n===s||a!=10)return t.e.c=t.s.c,t.e.r=t.s.r,t;for(++n,r=0;n!=s&&!((a=e.charCodeAt(n)-64)<1||a>26);++n)r=26*r+a;for(t.e.c=--r,r=0;n!=s&&!((a=e.charCodeAt(n)-48)<0||a>9);++n)r=10*r+a;return t.e.r=--r,t}function XI(e,t){var r=e.t=="d"&&t instanceof Date;if(e.z!=null)try{return e.w=xd(e.z,r?Gi(t):t)}catch{}try{return e.w=xd((e.XF||{}).numFmtId||(r?14:0),r?Gi(t):t)}catch{return""+t}}function Y0(e,t,r){return e==null||e.t==null||e.t=="z"?"":e.w!==void 0?e.w:(e.t=="d"&&!e.z&&r&&r.dateNF&&(e.z=r.dateNF),e.t=="e"?lh[e.v]||e.v:t==null?XI(e,e.v):XI(e,t))}function yf(e,t){var r=t&&t.sheet?t.sheet:"Sheet1",n={};return n[r]=e,{SheetNames:[r],Sheets:n}}function a$(e,t,r){var n=r||{},a=e?Array.isArray(e):n.dense,s=e||(a?[]:{}),l=0,o=0;if(s&&n.origin!=null){if(typeof n.origin=="number")l=n.origin;else{var c=typeof n.origin=="string"?Gs(n.origin):n.origin;l=c.r,o=c.c}s["!ref"]||(s["!ref"]="A1:A1")}var d={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(s["!ref"]){var f=Ta(s["!ref"]);d.s.c=f.s.c,d.s.r=f.s.r,d.e.c=Math.max(d.e.c,f.e.c),d.e.r=Math.max(d.e.r,f.e.r),l==-1&&(d.e.r=l=f.e.r+1)}for(var p=0;p!=t.length;++p)if(t[p]){if(!Array.isArray(t[p]))throw new Error("aoa_to_sheet expects an array of arrays");for(var y=0;y!=t[p].length;++y)if(!(typeof t[p][y]>"u")){var g={v:t[p][y]},N=l+p,w=o+y;if(d.s.r>N&&(d.s.r=N),d.s.c>w&&(d.s.c=w),d.e.r<N&&(d.e.r=N),d.e.c<w&&(d.e.c=w),t[p][y]&&typeof t[p][y]=="object"&&!Array.isArray(t[p][y])&&!(t[p][y]instanceof Date))g=t[p][y];else if(Array.isArray(g.v)&&(g.f=t[p][y][1],g.v=g.v[0]),g.v===null)if(g.f)g.t="n";else if(n.nullError)g.t="e",g.v=0;else if(n.sheetStubs)g.t="z";else continue;else typeof g.v=="number"?g.t="n":typeof g.v=="boolean"?g.t="b":g.v instanceof Date?(g.z=n.dateNF||En[14],n.cellDates?(g.t="d",g.w=xd(g.z,Gi(g.v))):(g.t="n",g.v=Gi(g.v),g.w=xd(g.z,g.v))):g.t="s";if(a)s[N]||(s[N]=[]),s[N][w]&&s[N][w].z&&(g.z=s[N][w].z),s[N][w]=g;else{var k=Tn({c:w,r:N});s[k]&&s[k].z&&(g.z=s[k].z),s[k]=g}}}return d.s.c<1e7&&(s["!ref"]=Kn(d)),s}function gp(e,t){return a$(null,e,t)}function xve(e){return e.read_shift(4,"i")}function eu(e,t){return t||(t=Bt(4)),t.write_shift(4,e),t}function ao(e){var t=e.read_shift(4);return t===0?"":e.read_shift(t,"dbcs")}function vl(e,t){var r=!1;return t==null&&(r=!0,t=Bt(4+2*e.length)),t.write_shift(4,e.length),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}function pve(e){return{ich:e.read_shift(2),ifnt:e.read_shift(2)}}function gve(e,t){return t||(t=Bt(4)),t.write_shift(2,0),t.write_shift(2,0),t}function XC(e,t){var r=e.l,n=e.read_shift(1),a=ao(e),s=[],l={t:a,h:a};if((n&1)!==0){for(var o=e.read_shift(4),c=0;c!=o;++c)s.push(pve(e));l.r=s}else l.r=[{ich:0,ifnt:0}];return e.l=r+t,l}function bve(e,t){var r=!1;return t==null&&(r=!0,t=Bt(15+4*e.t.length)),t.write_shift(1,0),vl(e.t,t),r?t.slice(0,t.l):t}var vve=XC;function yve(e,t){var r=!1;return t==null&&(r=!0,t=Bt(23+4*e.t.length)),t.write_shift(1,1),vl(e.t,t),t.write_shift(4,1),gve({},t),r?t.slice(0,t.l):t}function yd(e){var t=e.read_shift(4),r=e.read_shift(2);return r+=e.read_shift(1)<<16,e.l++,{c:t,iStyleRef:r}}function Jm(e,t){return t==null&&(t=Bt(8)),t.write_shift(-4,e.c),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}function ex(e){var t=e.read_shift(2);return t+=e.read_shift(1)<<16,e.l++,{c:-1,iStyleRef:t}}function tx(e,t){return t==null&&(t=Bt(4)),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}var wve=ao,s$=vl;function YC(e){var t=e.read_shift(4);return t===0||t===4294967295?"":e.read_shift(t,"dbcs")}function xw(e,t){var r=!1;return t==null&&(r=!0,t=Bt(127)),t.write_shift(4,e.length>0?e.length:4294967295),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}var kve=ao,jS=YC,ZC=xw;function QC(e){var t=e.slice(e.l,e.l+4),r=t[0]&1,n=t[0]&2;e.l+=4;var a=n===0?mw([0,0,0,0,t[0]&252,t[1],t[2],t[3]],0):Kf(t,0)>>2;return r?a/100:a}function i$(e,t){t==null&&(t=Bt(4));var r=0,n=0,a=e*100;if(e==(e|0)&&e>=-536870912&&e<1<<29?n=1:a==(a|0)&&a>=-536870912&&a<1<<29&&(n=1,r=1),n)t.write_shift(-4,((r?a:e)<<2)+(r+2));else throw new Error("unsupported RkNumber "+e)}function l$(e){var t={s:{},e:{}};return t.s.r=e.read_shift(4),t.e.r=e.read_shift(4),t.s.c=e.read_shift(4),t.e.c=e.read_shift(4),t}function Nve(e,t){return t||(t=Bt(16)),t.write_shift(4,e.s.r),t.write_shift(4,e.e.r),t.write_shift(4,e.s.c),t.write_shift(4,e.e.c),t}var rx=l$,bp=Nve;function ro(e){if(e.length-e.l<8)throw"XLS Xnum Buffer underflow";return e.read_shift(8,"f")}function zm(e,t){return(t||Bt(8)).write_shift(8,e,"f")}function _ve(e){var t={},r=e.read_shift(1),n=r>>>1,a=e.read_shift(1),s=e.read_shift(2,"i"),l=e.read_shift(1),o=e.read_shift(1),c=e.read_shift(1);switch(e.l++,n){case 0:t.auto=1;break;case 1:t.index=a;var d=gm[a];d&&(t.rgb=xb(d));break;case 2:t.rgb=xb([l,o,c]);break;case 3:t.theme=a;break}return s!=0&&(t.tint=s>0?s/32767:s/32768),t}function pw(e,t){if(t||(t=Bt(8)),!e||e.auto)return t.write_shift(4,0),t.write_shift(4,0),t;e.index!=null?(t.write_shift(1,2),t.write_shift(1,e.index)):e.theme!=null?(t.write_shift(1,6),t.write_shift(1,e.theme)):(t.write_shift(1,5),t.write_shift(1,0));var r=e.tint||0;if(r>0?r*=32767:r<0&&(r*=32768),t.write_shift(2,r),!e.rgb||e.theme!=null)t.write_shift(2,0),t.write_shift(1,0),t.write_shift(1,0);else{var n=e.rgb||"FFFFFF";typeof n=="number"&&(n=("000000"+n.toString(16)).slice(-6)),t.write_shift(1,parseInt(n.slice(0,2),16)),t.write_shift(1,parseInt(n.slice(2,4),16)),t.write_shift(1,parseInt(n.slice(4,6),16)),t.write_shift(1,255)}return t}function Sve(e){var t=e.read_shift(1);e.l++;var r={fBold:t&1,fItalic:t&2,fUnderline:t&4,fStrikeout:t&8,fOutline:t&16,fShadow:t&32,fCondense:t&64,fExtend:t&128};return r}function jve(e,t){t||(t=Bt(2));var r=(e.italic?2:0)|(e.strike?8:0)|(e.outline?16:0)|(e.shadow?32:0)|(e.condense?64:0)|(e.extend?128:0);return t.write_shift(1,r),t.write_shift(1,0),t}function o$(e,t){var r={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},n=e.read_shift(4);switch(n){case 0:return"";case 4294967295:case 4294967294:return r[e.read_shift(4)]||""}if(n>400)throw new Error("Unsupported Clipboard: "+n.toString(16));return e.l-=4,e.read_shift(0,t==1?"lpstr":"lpwstr")}function Cve(e){return o$(e,1)}function Ave(e){return o$(e,2)}var JC=2,tc=3,I2=11,YI=12,gw=19,D2=64,Eve=65,Tve=71,Ove=4108,Pve=4126,ml=80,c$=81,Ive=[ml,c$],CS={1:{n:"CodePage",t:JC},2:{n:"Category",t:ml},3:{n:"PresentationFormat",t:ml},4:{n:"ByteCount",t:tc},5:{n:"LineCount",t:tc},6:{n:"ParagraphCount",t:tc},7:{n:"SlideCount",t:tc},8:{n:"NoteCount",t:tc},9:{n:"HiddenCount",t:tc},10:{n:"MultimediaClipCount",t:tc},11:{n:"ScaleCrop",t:I2},12:{n:"HeadingPairs",t:Ove},13:{n:"TitlesOfParts",t:Pve},14:{n:"Manager",t:ml},15:{n:"Company",t:ml},16:{n:"LinksUpToDate",t:I2},17:{n:"CharacterCount",t:tc},19:{n:"SharedDoc",t:I2},22:{n:"HyperlinksChanged",t:I2},23:{n:"AppVersion",t:tc,p:"version"},24:{n:"DigSig",t:Eve},26:{n:"ContentType",t:ml},27:{n:"ContentStatus",t:ml},28:{n:"Language",t:ml},29:{n:"Version",t:ml},255:{},2147483648:{n:"Locale",t:gw},2147483651:{n:"Behavior",t:gw},1919054434:{}},AS={1:{n:"CodePage",t:JC},2:{n:"Title",t:ml},3:{n:"Subject",t:ml},4:{n:"Author",t:ml},5:{n:"Keywords",t:ml},6:{n:"Comments",t:ml},7:{n:"Template",t:ml},8:{n:"LastAuthor",t:ml},9:{n:"RevNumber",t:ml},10:{n:"EditTime",t:D2},11:{n:"LastPrinted",t:D2},12:{n:"CreatedDate",t:D2},13:{n:"ModifiedDate",t:D2},14:{n:"PageCount",t:tc},15:{n:"WordCount",t:tc},16:{n:"CharCount",t:tc},17:{n:"Thumbnail",t:Tve},18:{n:"Application",t:ml},19:{n:"DocSecurity",t:tc},255:{},2147483648:{n:"Locale",t:gw},2147483651:{n:"Behavior",t:gw},1919054434:{}},ZI={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},Dve=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function Mve(e){return e.map(function(t){return[t>>16&255,t>>8&255,t&255]})}var Lve=Mve([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),gm=Ts(Lve),lh={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},d$={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},ES={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},M2={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function eA(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function Rve(e){var t=eA();if(!e||!e.match)return t;var r={};if((e.match(io)||[]).forEach(function(n){var a=Mn(n);switch(a[0].replace(Kbe,"<")){case"<?xml":break;case"<Types":t.xmlns=a["xmlns"+(a[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":r[a.Extension]=a.ContentType;break;case"<Override":t[ES[a.ContentType]]!==void 0&&t[ES[a.ContentType]].push(a.PartName);break}}),t.xmlns!==Ki.CT)throw new Error("Unknown Namespace: "+t.xmlns);return t.calcchain=t.calcchains.length>0?t.calcchains[0]:"",t.sst=t.strs.length>0?t.strs[0]:"",t.style=t.styles.length>0?t.styles[0]:"",t.defaults=r,delete t.calcchains,t}function u$(e,t){var r=Rbe(ES),n=[],a;n[n.length]=Ci,n[n.length]=Sr("Types",null,{xmlns:Ki.CT,"xmlns:xsd":Ki.xsd,"xmlns:xsi":Ki.xsi}),n=n.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(c){return Sr("Default",null,{Extension:c[0],ContentType:c[1]})}));var s=function(c){e[c]&&e[c].length>0&&(a=e[c][0],n[n.length]=Sr("Override",null,{PartName:(a[0]=="/"?"":"/")+a,ContentType:M2[c][t.bookType]||M2[c].xlsx}))},l=function(c){(e[c]||[]).forEach(function(d){n[n.length]=Sr("Override",null,{PartName:(d[0]=="/"?"":"/")+d,ContentType:M2[c][t.bookType]||M2[c].xlsx})})},o=function(c){(e[c]||[]).forEach(function(d){n[n.length]=Sr("Override",null,{PartName:(d[0]=="/"?"":"/")+d,ContentType:r[c][0]})})};return s("workbooks"),l("sheets"),l("charts"),o("themes"),["strs","styles"].forEach(s),["coreprops","extprops","custprops"].forEach(o),o("vba"),o("comments"),o("threadedcomments"),o("drawings"),l("metadata"),o("people"),n.length>2&&(n[n.length]="</Types>",n[1]=n[1].replace("/>",">")),n.join("")}var ia={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function mb(e){var t=e.lastIndexOf("/");return e.slice(0,t+1)+"_rels/"+e.slice(t+1)+".rels"}function Tg(e,t){var r={"!id":{}};if(!e)return r;t.charAt(0)!=="/"&&(t="/"+t);var n={};return(e.match(io)||[]).forEach(function(a){var s=Mn(a);if(s[0]==="<Relationship"){var l={};l.Type=s.Type,l.Target=s.Target,l.Id=s.Id,s.TargetMode&&(l.TargetMode=s.TargetMode);var o=s.TargetMode==="External"?s.Target:yg(s.Target,t);r[o]=l,n[s.Id]=l}}),r["!id"]=n,r}function p1(e){var t=[Ci,Sr("Relationships",null,{xmlns:Ki.RELS})];return ui(e["!id"]).forEach(function(r){t[t.length]=Sr("Relationship",null,e["!id"][r])}),t.length>2&&(t[t.length]="</Relationships>",t[1]=t[1].replace("/>",">")),t.join("")}function Ka(e,t,r,n,a,s){if(a||(a={}),e["!id"]||(e["!id"]={}),e["!idx"]||(e["!idx"]=1),t<0)for(t=e["!idx"];e["!id"]["rId"+t];++t);if(e["!idx"]=t+1,a.Id="rId"+t,a.Type=n,a.Target=r,[ia.HLINK,ia.XPATH,ia.XMISS].indexOf(a.Type)>-1&&(a.TargetMode="External"),e["!id"][a.Id])throw new Error("Cannot rewrite rId "+t);return e["!id"][a.Id]=a,e[("/"+a.Target).replace("//","/")]=a,t}var Fve="application/vnd.oasis.opendocument.spreadsheet";function Bve(e,t){for(var r=$C(e),n,a;n=fb.exec(r);)switch(n[3]){case"manifest":break;case"file-entry":if(a=Mn(n[0],!1),a.path=="/"&&a.type!==Fve)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(t&&t.WTF)throw n}}function Uve(e){var t=[Ci];t.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),t.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var r=0;r<e.length;++r)t.push('  <manifest:file-entry manifest:full-path="'+e[r][0]+'" manifest:media-type="'+e[r][1]+`"/>
`);return t.push("</manifest:manifest>"),t.join("")}function QI(e,t,r){return['  <rdf:Description rdf:about="'+e+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(r||"odf")+"#"+t+`"/>
`,`  </rdf:Description>
`].join("")}function zve(e,t){return['  <rdf:Description rdf:about="'+e+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+t+`"/>
`,`  </rdf:Description>
`].join("")}function qve(e){var t=[Ci];t.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var r=0;r!=e.length;++r)t.push(QI(e[r][0],e[r][1])),t.push(zve("",e[r][0]));return t.push(QI("","Document","pkg")),t.push("</rdf:RDF>"),t.join("")}function h$(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+cw.version+"</meta:generator></office:meta></office:document-meta>"}var ud=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],Hve=(function(){for(var e=new Array(ud.length),t=0;t<ud.length;++t){var r=ud[t],n="(?:"+r[0].slice(0,r[0].indexOf(":"))+":)"+r[0].slice(r[0].indexOf(":")+1);e[t]=new RegExp("<"+n+"[^>]*>([\\s\\S]*?)</"+n+">")}return e})();function f$(e){var t={};e=ss(e);for(var r=0;r<ud.length;++r){var n=ud[r],a=e.match(Hve[r]);a!=null&&a.length>0&&(t[n[1]]=Ea(a[1])),n[2]==="date"&&t[n[1]]&&(t[n[1]]=Es(t[n[1]]))}return t}function aN(e,t,r,n,a){a[e]!=null||t==null||t===""||(a[e]=t,t=Ya(t),n[n.length]=r?Sr(e,t,r):Dl(e,t))}function m$(e,t){var r=t||{},n=[Ci,Sr("cp:coreProperties",null,{"xmlns:cp":Ki.CORE_PROPS,"xmlns:dc":Ki.dc,"xmlns:dcterms":Ki.dcterms,"xmlns:dcmitype":Ki.dcmitype,"xmlns:xsi":Ki.xsi})],a={};if(!e&&!r.Props)return n.join("");e&&(e.CreatedDate!=null&&aN("dcterms:created",typeof e.CreatedDate=="string"?e.CreatedDate:SS(e.CreatedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,a),e.ModifiedDate!=null&&aN("dcterms:modified",typeof e.ModifiedDate=="string"?e.ModifiedDate:SS(e.ModifiedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,a));for(var s=0;s!=ud.length;++s){var l=ud[s],o=r.Props&&r.Props[l[1]]!=null?r.Props[l[1]]:e?e[l[1]]:null;o===!0?o="1":o===!1?o="0":typeof o=="number"&&(o=String(o)),o!=null&&aN(l[0],o,null,n,a)}return n.length>2&&(n[n.length]="</cp:coreProperties>",n[1]=n[1].replace("/>",">")),n.join("")}var bm=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],x$=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function p$(e,t,r,n){var a=[];if(typeof e=="string")a=qI(e,n);else for(var s=0;s<e.length;++s)a=a.concat(e[s].map(function(f){return{v:f}}));var l=typeof t=="string"?qI(t,n).map(function(f){return f.v}):t,o=0,c=0;if(l.length>0)for(var d=0;d!==a.length;d+=2){switch(c=+a[d+1].v,a[d].v){case"Worksheets":case"":case"":case" ":case"":case" ":case"Arbeitsbltter":case"alma Sayfalar":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de clculo":case"Planilhas":case"Regneark":case"Hojas de clculo":case"Werkbladen":r.Worksheets=c,r.SheetNames=l.slice(o,o+c);break;case"Named Ranges":case"Rangos con nombre":case"":case"Benannte Bereiche":case"Navngivne omrder":r.NamedRanges=c,r.DefinedNames=l.slice(o,o+c);break;case"Charts":case"Diagramme":r.Chartsheets=c,r.ChartNames=l.slice(o,o+c);break}o+=c}}function $ve(e,t,r){var n={};return t||(t={}),e=ss(e),bm.forEach(function(a){var s=(e.match(ub(a[0]))||[])[1];switch(a[2]){case"string":s&&(t[a[1]]=Ea(s));break;case"bool":t[a[1]]=s==="true";break;case"raw":var l=e.match(new RegExp("<"+a[0]+"[^>]*>([\\s\\S]*?)</"+a[0]+">"));l&&l.length>0&&(n[a[1]]=l[1]);break}}),n.HeadingPairs&&n.TitlesOfParts&&p$(n.HeadingPairs,n.TitlesOfParts,t,r),t}function g$(e){var t=[],r=Sr;return e||(e={}),e.Application="SheetJS",t[t.length]=Ci,t[t.length]=Sr("Properties",null,{xmlns:Ki.EXT_PROPS,"xmlns:vt":Ki.vt}),bm.forEach(function(n){if(e[n[1]]!==void 0){var a;switch(n[2]){case"string":a=Ya(String(e[n[1]]));break;case"bool":a=e[n[1]]?"true":"false";break}a!==void 0&&(t[t.length]=r(n[0],a))}}),t[t.length]=r("HeadingPairs",r("vt:vector",r("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+r("vt:variant",r("vt:i4",String(e.Worksheets))),{size:2,baseType:"variant"})),t[t.length]=r("TitlesOfParts",r("vt:vector",e.SheetNames.map(function(n){return"<vt:lpstr>"+Ya(n)+"</vt:lpstr>"}).join(""),{size:e.Worksheets,baseType:"lpstr"})),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var Vve=/<[^>]+>[^<]*/g;function Wve(e,t){var r={},n="",a=e.match(Vve);if(a)for(var s=0;s!=a.length;++s){var l=a[s],o=Mn(l);switch(o[0]){case"<?xml":break;case"<Properties":break;case"<property":n=Ea(o.name);break;case"</property>":n=null;break;default:if(l.indexOf("<vt:")===0){var c=l.split(">"),d=c[0].slice(4),f=c[1];switch(d){case"lpstr":case"bstr":case"lpwstr":r[n]=Ea(f);break;case"bool":r[n]=js(f);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":r[n]=parseInt(f,10);break;case"r4":case"r8":case"decimal":r[n]=parseFloat(f);break;case"filetime":case"date":r[n]=Es(f);break;case"cy":case"error":r[n]=Ea(f);break;default:if(d.slice(-1)=="/")break;t.WTF&&typeof console<"u"&&console.warn("Unexpected",l,d,c)}}else if(l.slice(0,2)!=="</"){if(t.WTF)throw new Error(l)}}}return r}function b$(e){var t=[Ci,Sr("Properties",null,{xmlns:Ki.CUST_PROPS,"xmlns:vt":Ki.vt})];if(!e)return t.join("");var r=1;return ui(e).forEach(function(a){++r,t[t.length]=Sr("property",tve(e[a]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:r,name:Ya(a)})}),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var TS={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},sN;function Kve(e,t,r){sN||(sN=Dk(TS)),t=sN[t]||t,e[t]=r}function Gve(e,t){var r=[];return ui(TS).map(function(n){for(var a=0;a<ud.length;++a)if(ud[a][1]==n)return ud[a];for(a=0;a<bm.length;++a)if(bm[a][1]==n)return bm[a];throw n}).forEach(function(n){if(e[n[1]]!=null){var a=t&&t.Props&&t.Props[n[1]]!=null?t.Props[n[1]]:e[n[1]];switch(n[2]){case"date":a=new Date(a).toISOString().replace(/\.\d*Z/,"Z");break}typeof a=="number"?a=String(a):a===!0||a===!1?a=a?"1":"0":a instanceof Date&&(a=new Date(a).toISOString().replace(/\.\d*Z/,"")),r.push(Dl(TS[n[1]]||n[1],a))}}),Sr("DocumentProperties",r.join(""),{xmlns:yc.o})}function Xve(e,t){var r=["Worksheets","SheetNames"],n="CustomDocumentProperties",a=[];return e&&ui(e).forEach(function(s){if(Object.prototype.hasOwnProperty.call(e,s)){for(var l=0;l<ud.length;++l)if(s==ud[l][1])return;for(l=0;l<bm.length;++l)if(s==bm[l][1])return;for(l=0;l<r.length;++l)if(s==r[l])return;var o=e[s],c="string";typeof o=="number"?(c="float",o=String(o)):o===!0||o===!1?(c="boolean",o=o?"1":"0"):o=String(o),a.push(Sr(FI(s),o,{"dt:dt":c}))}}),t&&ui(t).forEach(function(s){if(Object.prototype.hasOwnProperty.call(t,s)&&!(e&&Object.prototype.hasOwnProperty.call(e,s))){var l=t[s],o="string";typeof l=="number"?(o="float",l=String(l)):l===!0||l===!1?(o="boolean",l=l?"1":"0"):l instanceof Date?(o="dateTime.tz",l=l.toISOString()):l=String(l),a.push(Sr(FI(s),l,{"dt:dt":o}))}}),"<"+n+' xmlns="'+yc.o+'">'+a.join("")+"</"+n+">"}function tA(e){var t=e.read_shift(4),r=e.read_shift(4);return new Date((r/1e7*Math.pow(2,32)+t/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function Yve(e){var t=typeof e=="string"?new Date(Date.parse(e)):e,r=t.getTime()/1e3+11644473600,n=r%Math.pow(2,32),a=(r-n)/Math.pow(2,32);n*=1e7,a*=1e7;var s=n/Math.pow(2,32)|0;s>0&&(n=n%Math.pow(2,32),a+=s);var l=Bt(8);return l.write_shift(4,n),l.write_shift(4,a),l}function v$(e,t,r){var n=e.l,a=e.read_shift(0,"lpstr-cp");if(r)for(;e.l-n&3;)++e.l;return a}function y$(e,t,r){var n=e.read_shift(0,"lpwstr");return n}function w$(e,t,r){return t===31?y$(e):v$(e,t,r)}function OS(e,t,r){return w$(e,t,r===!1?0:4)}function Zve(e,t){if(!t)throw new Error("VtUnalignedString must have positive length");return w$(e,t,0)}function Qve(e){for(var t=e.read_shift(4),r=[],n=0;n!=t;++n){var a=e.l;r[n]=e.read_shift(0,"lpwstr").replace(Co,""),e.l-a&2&&(e.l+=2)}return r}function Jve(e){for(var t=e.read_shift(4),r=[],n=0;n!=t;++n)r[n]=e.read_shift(0,"lpstr-cp").replace(Co,"");return r}function e2e(e){var t=e.l,r=bw(e,c$);e[e.l]==0&&e[e.l+1]==0&&e.l-t&2&&(e.l+=2);var n=bw(e,tc);return[r,n]}function t2e(e){for(var t=e.read_shift(4),r=[],n=0;n<t/2;++n)r.push(e2e(e));return r}function JI(e,t){for(var r=e.read_shift(4),n={},a=0;a!=r;++a){var s=e.read_shift(4),l=e.read_shift(4);n[s]=e.read_shift(l,t===1200?"utf16le":"utf8").replace(Co,"").replace(vg,"!"),t===1200&&l%2&&(e.l+=2)}return e.l&3&&(e.l=e.l>>3<<2),n}function k$(e){var t=e.read_shift(4),r=e.slice(e.l,e.l+t);return e.l+=t,(t&3)>0&&(e.l+=4-(t&3)&3),r}function r2e(e){var t={};return t.Size=e.read_shift(4),e.l+=t.Size+3-(t.Size-1)%4,t}function bw(e,t,r){var n=e.read_shift(2),a,s=r||{};if(e.l+=2,t!==YI&&n!==t&&Ive.indexOf(t)===-1&&!((t&65534)==4126&&(n&65534)==4126))throw new Error("Expected type "+t+" saw "+n);switch(t===YI?n:t){case 2:return a=e.read_shift(2,"i"),s.raw||(e.l+=2),a;case 3:return a=e.read_shift(4,"i"),a;case 11:return e.read_shift(4)!==0;case 19:return a=e.read_shift(4),a;case 30:return v$(e,n,4).replace(Co,"");case 31:return y$(e);case 64:return tA(e);case 65:return k$(e);case 71:return r2e(e);case 80:return OS(e,n,!s.raw).replace(Co,"");case 81:return Zve(e,n).replace(Co,"");case 4108:return t2e(e);case 4126:case 4127:return n==4127?Qve(e):Jve(e);default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+n)}}function eD(e,t){var r=Bt(4),n=Bt(4);switch(r.write_shift(4,e==80?31:e),e){case 3:n.write_shift(-4,t);break;case 5:n=Bt(8),n.write_shift(8,t,"f");break;case 11:n.write_shift(4,t?1:0);break;case 64:n=Yve(t);break;case 31:case 80:for(n=Bt(4+2*(t.length+1)+(t.length%2?0:2)),n.write_shift(4,t.length+1),n.write_shift(0,t,"dbcs");n.l!=n.length;)n.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+t)}return pl([r,n])}function tD(e,t){var r=e.l,n=e.read_shift(4),a=e.read_shift(4),s=[],l=0,o=0,c=-1,d={};for(l=0;l!=a;++l){var f=e.read_shift(4),p=e.read_shift(4);s[l]=[f,p+r]}s.sort(function(O,E){return O[1]-E[1]});var y={};for(l=0;l!=a;++l){if(e.l!==s[l][1]){var g=!0;if(l>0&&t)switch(t[s[l-1][0]].t){case 2:e.l+2===s[l][1]&&(e.l+=2,g=!1);break;case 80:e.l<=s[l][1]&&(e.l=s[l][1],g=!1);break;case 4108:e.l<=s[l][1]&&(e.l=s[l][1],g=!1);break}if((!t||l==0)&&e.l<=s[l][1]&&(g=!1,e.l=s[l][1]),g)throw new Error("Read Error: Expected address "+s[l][1]+" at "+e.l+" :"+l)}if(t){var N=t[s[l][0]];if(y[N.n]=bw(e,N.t,{raw:!0}),N.p==="version"&&(y[N.n]=String(y[N.n]>>16)+"."+("0000"+String(y[N.n]&65535)).slice(-4)),N.n=="CodePage")switch(y[N.n]){case 0:y[N.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:Zd(o=y[N.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+y[N.n])}}else if(s[l][0]===1){if(o=y.CodePage=bw(e,JC),Zd(o),c!==-1){var w=e.l;e.l=s[c][1],d=JI(e,o),e.l=w}}else if(s[l][0]===0){if(o===0){c=l,e.l=s[l+1][1];continue}d=JI(e,o)}else{var k=d[s[l][0]],S;switch(e[e.l]){case 65:e.l+=4,S=k$(e);break;case 30:e.l+=4,S=OS(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 31:e.l+=4,S=OS(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 3:e.l+=4,S=e.read_shift(4,"i");break;case 19:e.l+=4,S=e.read_shift(4);break;case 5:e.l+=4,S=e.read_shift(8,"f");break;case 11:e.l+=4,S=yi(e,4);break;case 64:e.l+=4,S=Es(tA(e));break;default:throw new Error("unparsed value: "+e[e.l])}y[k]=S}}return e.l=r+n,y}var N$=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function n2e(e){switch(typeof e){case"boolean":return 11;case"number":return(e|0)==e?3:5;case"string":return 31;case"object":if(e instanceof Date)return 64;break}return-1}function rD(e,t,r){var n=Bt(8),a=[],s=[],l=8,o=0,c=Bt(8),d=Bt(8);if(c.write_shift(4,2),c.write_shift(4,1200),d.write_shift(4,1),s.push(c),a.push(d),l+=8+c.length,!t){d=Bt(8),d.write_shift(4,0),a.unshift(d);var f=[Bt(4)];for(f[0].write_shift(4,e.length),o=0;o<e.length;++o){var p=e[o][0];for(c=Bt(8+2*(p.length+1)+(p.length%2?0:2)),c.write_shift(4,o+2),c.write_shift(4,p.length+1),c.write_shift(0,p,"dbcs");c.l!=c.length;)c.write_shift(1,0);f.push(c)}c=pl(f),s.unshift(c),l+=8+c.length}for(o=0;o<e.length;++o)if(!(t&&!t[e[o][0]])&&!(N$.indexOf(e[o][0])>-1||x$.indexOf(e[o][0])>-1)&&e[o][1]!=null){var y=e[o][1],g=0;if(t){g=+t[e[o][0]];var N=r[g];if(N.p=="version"&&typeof y=="string"){var w=y.split(".");y=(+w[0]<<16)+(+w[1]||0)}c=eD(N.t,y)}else{var k=n2e(y);k==-1&&(k=31,y=String(y)),c=eD(k,y)}s.push(c),d=Bt(8),d.write_shift(4,t?g:2+o),a.push(d),l+=8+c.length}var S=8*(s.length+1);for(o=0;o<s.length;++o)a[o].write_shift(4,S),S+=s[o].length;return n.write_shift(4,l),n.write_shift(4,s.length),pl([n].concat(a).concat(s))}function nD(e,t,r){var n=e.content;if(!n)return{};Pl(n,0);var a,s,l,o,c=0;n.chk("feff","Byte Order: "),n.read_shift(2);var d=n.read_shift(4),f=n.read_shift(16);if(f!==vn.utils.consts.HEADER_CLSID&&f!==r)throw new Error("Bad PropertySet CLSID "+f);if(a=n.read_shift(4),a!==1&&a!==2)throw new Error("Unrecognized #Sets: "+a);if(s=n.read_shift(16),o=n.read_shift(4),a===1&&o!==n.l)throw new Error("Length mismatch: "+o+" !== "+n.l);a===2&&(l=n.read_shift(16),c=n.read_shift(4));var p=tD(n,t),y={SystemIdentifier:d};for(var g in p)y[g]=p[g];if(y.FMTID=s,a===1)return y;if(c-n.l==2&&(n.l+=2),n.l!==c)throw new Error("Length mismatch 2: "+n.l+" !== "+c);var N;try{N=tD(n,null)}catch{}for(g in N)y[g]=N[g];return y.FMTID=[s,l],y}function aD(e,t,r,n,a,s){var l=Bt(a?68:48),o=[l];l.write_shift(2,65534),l.write_shift(2,0),l.write_shift(4,842412599),l.write_shift(16,vn.utils.consts.HEADER_CLSID,"hex"),l.write_shift(4,a?2:1),l.write_shift(16,t,"hex"),l.write_shift(4,a?68:48);var c=rD(e,r,n);if(o.push(c),a){var d=rD(a,null,null);l.write_shift(16,s,"hex"),l.write_shift(4,68+c.length),o.push(d)}return pl(o)}function Ih(e,t){return e.read_shift(t),null}function a2e(e,t){t||(t=Bt(e));for(var r=0;r<e;++r)t.write_shift(1,0);return t}function s2e(e,t,r){for(var n=[],a=e.l+t;e.l<a;)n.push(r(e,a-e.l));if(a!==e.l)throw new Error("Slurp error");return n}function yi(e,t){return e.read_shift(t)===1}function ko(e,t){return t||(t=Bt(2)),t.write_shift(2,+!!e),t}function Di(e){return e.read_shift(2,"u")}function sd(e,t){return t||(t=Bt(2)),t.write_shift(2,e),t}function _$(e,t){return s2e(e,t,Di)}function i2e(e){var t=e.read_shift(1),r=e.read_shift(1);return r===1?t:t===1}function S$(e,t,r){return r||(r=Bt(2)),r.write_shift(1,t=="e"?+e:+!!e),r.write_shift(1,t=="e"?1:0),r}function sv(e,t,r){var n=e.read_shift(r&&r.biff>=12?2:1),a="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var s=e.read_shift(1);s&&(a="dbcs-cont")}else r.biff==12&&(a="wstr");r.biff>=2&&r.biff<=5&&(a="cpstr");var l=n?e.read_shift(n,a):"";return l}function l2e(e){var t=e.read_shift(2),r=e.read_shift(1),n=r&4,a=r&8,s=1+(r&1),l=0,o,c={};a&&(l=e.read_shift(2)),n&&(o=e.read_shift(4));var d=s==2?"dbcs-cont":"sbcs-cont",f=t===0?"":e.read_shift(t,d);return a&&(e.l+=4*l),n&&(e.l+=o),c.t=f,a||(c.raw="<t>"+c.t+"</t>",c.r=c.t),c}function o2e(e){var t=e.t||"",r=Bt(3);r.write_shift(2,t.length),r.write_shift(1,1);var n=Bt(2*t.length);n.write_shift(2*t.length,t,"utf16le");var a=[r,n];return pl(a)}function qm(e,t,r){var n;if(r){if(r.biff>=2&&r.biff<=5)return e.read_shift(t,"cpstr");if(r.biff>=12)return e.read_shift(t,"dbcs-cont")}var a=e.read_shift(1);return a===0?n=e.read_shift(t,"sbcs-cont"):n=e.read_shift(t,"dbcs-cont"),n}function iv(e,t,r){var n=e.read_shift(r&&r.biff==2?1:2);return n===0?(e.l++,""):qm(e,n,r)}function nx(e,t,r){if(r.biff>5)return iv(e,t,r);var n=e.read_shift(1);return n===0?(e.l++,""):e.read_shift(n,r.biff<=4||!e.lens?"cpstr":"sbcs-cont")}function j$(e,t,r){return r||(r=Bt(3+2*e.length)),r.write_shift(2,e.length),r.write_shift(1,1),r.write_shift(31,e,"utf16le"),r}function c2e(e){var t=e.read_shift(1);e.l++;var r=e.read_shift(2);return e.l+=2,[t,r]}function d2e(e){var t=e.read_shift(4),r=e.l,n=!1;t>24&&(e.l+=t-24,e.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(n=!0),e.l=r);var a=e.read_shift((n?t-24:t)>>1,"utf16le").replace(Co,"");return n&&(e.l+=24),a}function u2e(e){for(var t=e.read_shift(2),r="";t-- >0;)r+="../";var n=e.read_shift(0,"lpstr-ansi");if(e.l+=2,e.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var a=e.read_shift(4);if(a===0)return r+n.replace(/\\/g,"/");var s=e.read_shift(4);if(e.read_shift(2)!=3)throw new Error("Bad FileMoniker");var l=e.read_shift(s>>1,"utf16le").replace(Co,"");return r+l}function h2e(e,t){var r=e.read_shift(16);switch(r){case"e0c9ea79f9bace118c8200aa004ba90b":return d2e(e);case"0303000000000000c000000000000046":return u2e(e);default:throw new Error("Unsupported Moniker "+r)}}function L2(e){var t=e.read_shift(4),r=t>0?e.read_shift(t,"utf16le").replace(Co,""):"";return r}function sD(e,t){t||(t=Bt(6+e.length*2)),t.write_shift(4,1+e.length);for(var r=0;r<e.length;++r)t.write_shift(2,e.charCodeAt(r));return t.write_shift(2,0),t}function f2e(e,t){var r=e.l+t,n=e.read_shift(4);if(n!==2)throw new Error("Unrecognized streamVersion: "+n);var a=e.read_shift(2);e.l+=2;var s,l,o,c,d="",f,p;a&16&&(s=L2(e,r-e.l)),a&128&&(l=L2(e,r-e.l)),(a&257)===257&&(o=L2(e,r-e.l)),(a&257)===1&&(c=h2e(e,r-e.l)),a&8&&(d=L2(e,r-e.l)),a&32&&(f=e.read_shift(16)),a&64&&(p=tA(e)),e.l=r;var y=l||o||c||"";y&&d&&(y+="#"+d),y||(y="#"+d),a&2&&y.charAt(0)=="/"&&y.charAt(1)!="/"&&(y="file://"+y);var g={Target:y};return f&&(g.guid=f),p&&(g.time=p),s&&(g.Tooltip=s),g}function m2e(e){var t=Bt(512),r=0,n=e.Target;n.slice(0,7)=="file://"&&(n=n.slice(7));var a=n.indexOf("#"),s=a>-1?31:23;switch(n.charAt(0)){case"#":s=28;break;case".":s&=-3;break}t.write_shift(4,2),t.write_shift(4,s);var l=[8,6815827,6619237,4849780,83];for(r=0;r<l.length;++r)t.write_shift(4,l[r]);if(s==28)n=n.slice(1),sD(n,t);else if(s&2){for(l="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),r=0;r<l.length;++r)t.write_shift(1,parseInt(l[r],16));var o=a>-1?n.slice(0,a):n;for(t.write_shift(4,2*(o.length+1)),r=0;r<o.length;++r)t.write_shift(2,o.charCodeAt(r));t.write_shift(2,0),s&8&&sD(a>-1?n.slice(a+1):"",t)}else{for(l="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),r=0;r<l.length;++r)t.write_shift(1,parseInt(l[r],16));for(var c=0;n.slice(c*3,c*3+3)=="../"||n.slice(c*3,c*3+3)=="..\\";)++c;for(t.write_shift(2,c),t.write_shift(4,n.length-3*c+1),r=0;r<n.length-3*c;++r)t.write_shift(1,n.charCodeAt(r+3*c)&255);for(t.write_shift(1,0),t.write_shift(2,65535),t.write_shift(2,57005),r=0;r<6;++r)t.write_shift(4,0)}return t.slice(0,t.l)}function C$(e){var t=e.read_shift(1),r=e.read_shift(1),n=e.read_shift(1),a=e.read_shift(1);return[t,r,n,a]}function A$(e,t){var r=C$(e);return r[3]=0,r}function Ku(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2);return{r:t,c:r,ixfe:n}}function Hm(e,t,r,n){return n||(n=Bt(6)),n.write_shift(2,e),n.write_shift(2,t),n.write_shift(2,r||0),n}function x2e(e){var t=e.read_shift(2),r=e.read_shift(2);return e.l+=8,{type:t,flags:r}}function p2e(e,t,r){return t===0?"":nx(e,t,r)}function g2e(e,t,r){var n=r.biff>8?4:2,a=e.read_shift(n),s=e.read_shift(n,"i"),l=e.read_shift(n,"i");return[a,s,l]}function E$(e){var t=e.read_shift(2),r=QC(e);return[t,r]}function b2e(e,t,r){e.l+=4,t-=4;var n=e.l+t,a=sv(e,t,r),s=e.read_shift(2);if(n-=e.l,s!==n)throw new Error("Malformed AddinUdf: padding = "+n+" != "+s);return e.l+=s,a}function Rk(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2),a=e.read_shift(2);return{s:{c:n,r:t},e:{c:a,r}}}function T$(e,t){return t||(t=Bt(8)),t.write_shift(2,e.s.r),t.write_shift(2,e.e.r),t.write_shift(2,e.s.c),t.write_shift(2,e.e.c),t}function O$(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(1),a=e.read_shift(1);return{s:{c:n,r:t},e:{c:a,r}}}var v2e=O$;function P$(e){e.l+=4;var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2);return e.l+=12,[r,t,n]}function y2e(e){var t={};return e.l+=4,e.l+=16,t.fSharedNote=e.read_shift(2),e.l+=4,t}function w2e(e){var t={};return e.l+=4,e.cf=e.read_shift(2),t}function Vl(e){e.l+=2,e.l+=e.read_shift(2)}var k2e={0:Vl,4:Vl,5:Vl,6:Vl,7:w2e,8:Vl,9:Vl,10:Vl,11:Vl,12:Vl,13:y2e,14:Vl,15:Vl,16:Vl,17:Vl,18:Vl,19:Vl,20:Vl,21:P$};function N2e(e,t){for(var r=e.l+t,n=[];e.l<r;){var a=e.read_shift(2);e.l-=2;try{n.push(k2e[a](e,r-e.l))}catch{return e.l=r,n}}return e.l!=r&&(e.l=r),n}function R2(e,t){var r={BIFFVer:0,dt:0};switch(r.BIFFVer=e.read_shift(2),t-=2,t>=2&&(r.dt=e.read_shift(2),e.l-=2),r.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(t>6)throw new Error("Unexpected BIFF Ver "+r.BIFFVer)}return e.read_shift(t),r}function rA(e,t,r){var n=1536,a=16;switch(r.bookType){case"biff8":break;case"biff5":n=1280,a=8;break;case"biff4":n=4,a=6;break;case"biff3":n=3,a=6;break;case"biff2":n=2,a=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var s=Bt(a);return s.write_shift(2,n),s.write_shift(2,t),a>4&&s.write_shift(2,29282),a>6&&s.write_shift(2,1997),a>8&&(s.write_shift(2,49161),s.write_shift(2,1),s.write_shift(2,1798),s.write_shift(2,0)),s}function _2e(e,t){return t===0||e.read_shift(2),1200}function S2e(e,t,r){if(r.enc)return e.l+=t,"";var n=e.l,a=nx(e,0,r);return e.read_shift(t+n-e.l),a}function j2e(e,t){var r=!t||t.biff==8,n=Bt(r?112:54);for(n.write_shift(t.biff==8?2:1,7),r&&n.write_shift(1,0),n.write_shift(4,859007059),n.write_shift(4,5458548|(r?0:536870912));n.l<n.length;)n.write_shift(1,r?0:32);return n}function C2e(e,t,r){var n=r&&r.biff==8||t==2?e.read_shift(2):(e.l+=t,0);return{fDialog:n&16,fBelow:n&64,fRight:n&128}}function A2e(e,t,r){var n=e.read_shift(4),a=e.read_shift(1)&3,s=e.read_shift(1);switch(s){case 0:s="Worksheet";break;case 1:s="Macrosheet";break;case 2:s="Chartsheet";break;case 6:s="VBAModule";break}var l=sv(e,0,r);return l.length===0&&(l="Sheet1"),{pos:n,hs:a,dt:s,name:l}}function E2e(e,t){var r=!t||t.biff>=8?2:1,n=Bt(8+r*e.name.length);n.write_shift(4,e.pos),n.write_shift(1,e.hs||0),n.write_shift(1,e.dt),n.write_shift(1,e.name.length),t.biff>=8&&n.write_shift(1,1),n.write_shift(r*e.name.length,e.name,t.biff<8?"sbcs":"utf16le");var a=n.slice(0,n.l);return a.l=n.l,a}function T2e(e,t){for(var r=e.l+t,n=e.read_shift(4),a=e.read_shift(4),s=[],l=0;l!=a&&e.l<r;++l)s.push(l2e(e));return s.Count=n,s.Unique=a,s}function O2e(e,t){var r=Bt(8);r.write_shift(4,e.Count),r.write_shift(4,e.Unique);for(var n=[],a=0;a<e.length;++a)n[a]=o2e(e[a]);var s=pl([r].concat(n));return s.parts=[r.length].concat(n.map(function(l){return l.length})),s}function P2e(e,t){var r={};return r.dsst=e.read_shift(2),e.l+=t-2,r}function I2e(e){var t={};t.r=e.read_shift(2),t.c=e.read_shift(2),t.cnt=e.read_shift(2)-t.c;var r=e.read_shift(2);e.l+=4;var n=e.read_shift(1);return e.l+=3,n&7&&(t.level=n&7),n&32&&(t.hidden=!0),n&64&&(t.hpt=r/20),t}function D2e(e){var t=x2e(e);if(t.type!=2211)throw new Error("Invalid Future Record "+t.type);var r=e.read_shift(4);return r!==0}function M2e(e){return e.read_shift(2),e.read_shift(4)}function iD(e,t,r){var n=0;r&&r.biff==2||(n=e.read_shift(2));var a=e.read_shift(2);r&&r.biff==2&&(n=1-(a>>15),a&=32767);var s={Unsynced:n&1,DyZero:(n&2)>>1,ExAsc:(n&4)>>2,ExDsc:(n&8)>>3};return[s,a]}function L2e(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2),a=e.read_shift(2),s=e.read_shift(2),l=e.read_shift(2),o=e.read_shift(2),c=e.read_shift(2),d=e.read_shift(2);return{Pos:[t,r],Dim:[n,a],Flags:s,CurTab:l,FirstTab:o,Selected:c,TabRatio:d}}function R2e(){var e=Bt(18);return e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,29280),e.write_shift(2,17600),e.write_shift(2,56),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,1),e.write_shift(2,500),e}function F2e(e,t,r){if(r&&r.biff>=2&&r.biff<5)return{};var n=e.read_shift(2);return{RTL:n&64}}function B2e(e){var t=Bt(18),r=1718;return e&&e.RTL&&(r|=64),t.write_shift(2,r),t.write_shift(4,0),t.write_shift(4,64),t.write_shift(4,0),t.write_shift(4,0),t}function U2e(){}function z2e(e,t,r){var n={dyHeight:e.read_shift(2),fl:e.read_shift(2)};switch(r&&r.biff||8){case 2:break;case 3:case 4:e.l+=2;break;default:e.l+=10;break}return n.name=sv(e,0,r),n}function q2e(e,t){var r=e.name||"Arial",n=t&&t.biff==5,a=n?15+r.length:16+2*r.length,s=Bt(a);return s.write_shift(2,e.sz*20),s.write_shift(4,0),s.write_shift(2,400),s.write_shift(4,0),s.write_shift(2,0),s.write_shift(1,r.length),n||s.write_shift(1,1),s.write_shift((n?1:2)*r.length,r,n?"sbcs":"utf16le"),s}function H2e(e){var t=Ku(e);return t.isst=e.read_shift(4),t}function $2e(e,t,r,n){var a=Bt(10);return Hm(e,t,n,a),a.write_shift(4,r),a}function V2e(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=e.l+t,a=Ku(e);r.biff==2&&e.l++;var s=iv(e,n-e.l,r);return a.val=s,a}function W2e(e,t,r,n,a){var s=!a||a.biff==8,l=Bt(8+ +s+(1+s)*r.length);return Hm(e,t,n,l),l.write_shift(2,r.length),s&&l.write_shift(1,1),l.write_shift((1+s)*r.length,r,s?"utf16le":"sbcs"),l}function K2e(e,t,r){var n=e.read_shift(2),a=nx(e,0,r);return[n,a]}function G2e(e,t,r,n){var a=r&&r.biff==5;n||(n=Bt(a?3+t.length:5+2*t.length)),n.write_shift(2,e),n.write_shift(a?1:2,t.length),a||n.write_shift(1,1),n.write_shift((a?1:2)*t.length,t,a?"sbcs":"utf16le");var s=n.length>n.l?n.slice(0,n.l):n;return s.l==null&&(s.l=s.length),s}var X2e=nx;function lD(e,t,r){var n=e.l+t,a=r.biff==8||!r.biff?4:2,s=e.read_shift(a),l=e.read_shift(a),o=e.read_shift(2),c=e.read_shift(2);return e.l=n,{s:{r:s,c:o},e:{r:l,c}}}function Y2e(e,t){var r=t.biff==8||!t.biff?4:2,n=Bt(2*r+6);return n.write_shift(r,e.s.r),n.write_shift(r,e.e.r+1),n.write_shift(2,e.s.c),n.write_shift(2,e.e.c+1),n.write_shift(2,0),n}function Z2e(e){var t=e.read_shift(2),r=e.read_shift(2),n=E$(e);return{r:t,c:r,ixfe:n[0],rknum:n[1]}}function Q2e(e,t){for(var r=e.l+t-2,n=e.read_shift(2),a=e.read_shift(2),s=[];e.l<r;)s.push(E$(e));if(e.l!==r)throw new Error("MulRK read error");var l=e.read_shift(2);if(s.length!=l-a+1)throw new Error("MulRK length mismatch");return{r:n,c:a,C:l,rkrec:s}}function J2e(e,t){for(var r=e.l+t-2,n=e.read_shift(2),a=e.read_shift(2),s=[];e.l<r;)s.push(e.read_shift(2));if(e.l!==r)throw new Error("MulBlank read error");var l=e.read_shift(2);if(s.length!=l-a+1)throw new Error("MulBlank length mismatch");return{r:n,c:a,C:l,ixfe:s}}function eye(e,t,r,n){var a={},s=e.read_shift(4),l=e.read_shift(4),o=e.read_shift(4),c=e.read_shift(2);return a.patternType=Dve[o>>26],n.cellStyles&&(a.alc=s&7,a.fWrap=s>>3&1,a.alcV=s>>4&7,a.fJustLast=s>>7&1,a.trot=s>>8&255,a.cIndent=s>>16&15,a.fShrinkToFit=s>>20&1,a.iReadOrder=s>>22&2,a.fAtrNum=s>>26&1,a.fAtrFnt=s>>27&1,a.fAtrAlc=s>>28&1,a.fAtrBdr=s>>29&1,a.fAtrPat=s>>30&1,a.fAtrProt=s>>31&1,a.dgLeft=l&15,a.dgRight=l>>4&15,a.dgTop=l>>8&15,a.dgBottom=l>>12&15,a.icvLeft=l>>16&127,a.icvRight=l>>23&127,a.grbitDiag=l>>30&3,a.icvTop=o&127,a.icvBottom=o>>7&127,a.icvDiag=o>>14&127,a.dgDiag=o>>21&15,a.icvFore=c&127,a.icvBack=c>>7&127,a.fsxButton=c>>14&1),a}function tye(e,t,r){var n={};return n.ifnt=e.read_shift(2),n.numFmtId=e.read_shift(2),n.flags=e.read_shift(2),n.fStyle=n.flags>>2&1,t-=6,n.data=eye(e,t,n.fStyle,r),n}function oD(e,t,r,n){var a=r&&r.biff==5;n||(n=Bt(a?16:20)),n.write_shift(2,0),e.style?(n.write_shift(2,e.numFmtId||0),n.write_shift(2,65524)):(n.write_shift(2,e.numFmtId||0),n.write_shift(2,t<<4));var s=0;return e.numFmtId>0&&a&&(s|=1024),n.write_shift(4,s),n.write_shift(4,0),a||n.write_shift(4,0),n.write_shift(2,0),n}function rye(e){e.l+=4;var t=[e.read_shift(2),e.read_shift(2)];if(t[0]!==0&&t[0]--,t[1]!==0&&t[1]--,t[0]>7||t[1]>7)throw new Error("Bad Gutters: "+t.join("|"));return t}function nye(e){var t=Bt(8);return t.write_shift(4,0),t.write_shift(2,0),t.write_shift(2,0),t}function cD(e,t,r){var n=Ku(e);(r.biff==2||t==9)&&++e.l;var a=i2e(e);return n.val=a,n.t=a===!0||a===!1?"b":"e",n}function aye(e,t,r,n,a,s){var l=Bt(8);return Hm(e,t,n,l),S$(r,s,l),l}function sye(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=Ku(e),a=ro(e);return n.val=a,n}function iye(e,t,r,n){var a=Bt(14);return Hm(e,t,n,a),zm(r,a),a}var dD=p2e;function lye(e,t,r){var n=e.l+t,a=e.read_shift(2),s=e.read_shift(2);if(r.sbcch=s,s==1025||s==14849)return[s,a];if(s<1||s>255)throw new Error("Unexpected SupBook type: "+s);for(var l=qm(e,s),o=[];n>e.l;)o.push(iv(e));return[s,a,l,o]}function uD(e,t,r){var n=e.read_shift(2),a,s={fBuiltIn:n&1,fWantAdvise:n>>>1&1,fWantPict:n>>>2&1,fOle:n>>>3&1,fOleLink:n>>>4&1,cf:n>>>5&1023,fIcon:n>>>15&1};return r.sbcch===14849&&(a=b2e(e,t-2,r)),s.body=a||e.read_shift(t-2),typeof a=="string"&&(s.Name=a),s}var oye=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function hD(e,t,r){var n=e.l+t,a=e.read_shift(2),s=e.read_shift(1),l=e.read_shift(1),o=e.read_shift(r&&r.biff==2?1:2),c=0;(!r||r.biff>=5)&&(r.biff!=5&&(e.l+=2),c=e.read_shift(2),r.biff==5&&(e.l+=2),e.l+=4);var d=qm(e,l,r);a&32&&(d=oye[d.charCodeAt(0)]);var f=n-e.l;r&&r.biff==2&&--f;var p=n==e.l||o===0||!(f>0)?[]:N4e(e,f,r,o);return{chKey:s,Name:d,itab:c,rgce:p}}function I$(e,t,r){if(r.biff<8)return cye(e,t,r);for(var n=[],a=e.l+t,s=e.read_shift(r.biff>8?4:2);s--!==0;)n.push(g2e(e,r.biff>8?12:6,r));if(e.l!=a)throw new Error("Bad ExternSheet: "+e.l+" != "+a);return n}function cye(e,t,r){e[e.l+1]==3&&e[e.l]++;var n=sv(e,t,r);return n.charCodeAt(0)==3?n.slice(1):n}function dye(e,t,r){if(r.biff<8){e.l+=t;return}var n=e.read_shift(2),a=e.read_shift(2),s=qm(e,n,r),l=qm(e,a,r);return[s,l]}function uye(e,t,r){var n=O$(e);e.l++;var a=e.read_shift(1);return t-=8,[_4e(e,t,r),a,n]}function fD(e,t,r){var n=v2e(e);switch(r.biff){case 2:e.l++,t-=7;break;case 3:case 4:e.l+=2,t-=8;break;default:e.l+=6,t-=12}return[n,w4e(e,t,r)]}function hye(e){var t=e.read_shift(4)!==0,r=e.read_shift(4)!==0,n=e.read_shift(4);return[t,r,n]}function fye(e,t,r){if(!(r.biff<8)){var n=e.read_shift(2),a=e.read_shift(2),s=e.read_shift(2),l=e.read_shift(2),o=nx(e,0,r);return r.biff<8&&e.read_shift(1),[{r:n,c:a},o,l,s]}}function mye(e,t,r){return fye(e,t,r)}function xye(e,t){for(var r=[],n=e.read_shift(2);n--;)r.push(Rk(e));return r}function pye(e){var t=Bt(2+e.length*8);t.write_shift(2,e.length);for(var r=0;r<e.length;++r)T$(e[r],t);return t}function gye(e,t,r){if(r&&r.biff<8)return vye(e,t,r);var n=P$(e),a=N2e(e,t-22,n[1]);return{cmo:n,ft:a}}var bye={8:function(e,t){var r=e.l+t;e.l+=10;var n=e.read_shift(2);e.l+=4,e.l+=2,e.l+=2,e.l+=2,e.l+=4;var a=e.read_shift(1);return e.l+=a,e.l=r,{fmt:n}}};function vye(e,t,r){e.l+=4;var n=e.read_shift(2),a=e.read_shift(2),s=e.read_shift(2);e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=6,t-=36;var l=[];return l.push((bye[n]||so)(e,t,r)),{cmo:[a,n,s],ft:l}}function yye(e,t,r){var n=e.l,a="";try{e.l+=4;var s=(r.lastobj||{cmo:[0,0]}).cmo[1],l;[0,5,7,11,12,14].indexOf(s)==-1?e.l+=6:l=c2e(e,6,r);var o=e.read_shift(2);e.read_shift(2),Di(e,2);var c=e.read_shift(2);e.l+=c;for(var d=1;d<e.lens.length-1;++d){if(e.l-n!=e.lens[d])throw new Error("TxO: bad continue record");var f=e[e.l],p=qm(e,e.lens[d+1]-e.lens[d]-1);if(a+=p,a.length>=(f?o:2*o))break}if(a.length!==o&&a.length!==o*2)throw new Error("cchText: "+o+" != "+a.length);return e.l=n+t,{t:a}}catch{return e.l=n+t,{t:a}}}function wye(e,t){var r=Rk(e);e.l+=16;var n=f2e(e,t-24);return[r,n]}function kye(e){var t=Bt(24),r=Gs(e[0]);t.write_shift(2,r.r),t.write_shift(2,r.r),t.write_shift(2,r.c),t.write_shift(2,r.c);for(var n="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),a=0;a<16;++a)t.write_shift(1,parseInt(n[a],16));return pl([t,m2e(e[1])])}function Nye(e,t){e.read_shift(2);var r=Rk(e),n=e.read_shift((t-10)/2,"dbcs-cont");return n=n.replace(Co,""),[r,n]}function _ye(e){var t=e[1].Tooltip,r=Bt(10+2*(t.length+1));r.write_shift(2,2048);var n=Gs(e[0]);r.write_shift(2,n.r),r.write_shift(2,n.r),r.write_shift(2,n.c),r.write_shift(2,n.c);for(var a=0;a<t.length;++a)r.write_shift(2,t.charCodeAt(a));return r.write_shift(2,0),r}function Sye(e){var t=[0,0],r;return r=e.read_shift(2),t[0]=ZI[r]||r,r=e.read_shift(2),t[1]=ZI[r]||r,t}function jye(e){return e||(e=Bt(4)),e.write_shift(2,1),e.write_shift(2,1),e}function Cye(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(A$(e));return r}function Aye(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(A$(e));return r}function Eye(e){e.l+=2;var t={cxfs:0,crc:0};return t.cxfs=e.read_shift(2),t.crc=e.read_shift(4),t}function D$(e,t,r){if(!r.cellStyles)return so(e,t);var n=r&&r.biff>=12?4:2,a=e.read_shift(n),s=e.read_shift(n),l=e.read_shift(n),o=e.read_shift(n),c=e.read_shift(2);n==2&&(e.l+=2);var d={s:a,e:s,w:l,ixfe:o,flags:c};return(r.biff>=5||!r.biff)&&(d.level=c>>8&7),d}function Tye(e,t){var r=Bt(12);r.write_shift(2,t),r.write_shift(2,t),r.write_shift(2,e.width*256),r.write_shift(2,0);var n=0;return e.hidden&&(n|=1),r.write_shift(1,n),n=e.level||0,r.write_shift(1,n),r.write_shift(2,0),r}function Oye(e,t){var r={};return t<32||(e.l+=16,r.header=ro(e),r.footer=ro(e),e.l+=2),r}function Pye(e,t,r){var n={area:!1};if(r.biff!=5)return e.l+=t,n;var a=e.read_shift(1);return e.l+=3,a&16&&(n.area=!0),n}function Iye(e){for(var t=Bt(2*e),r=0;r<e;++r)t.write_shift(2,r+1);return t}var Dye=Ku,Mye=_$,Lye=iv;function Rye(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(4),a={fmt:t,env:r,len:n,data:e.slice(e.l,e.l+n)};return e.l+=n,a}function Fye(e,t,r){r.biffguess&&r.biff==5&&(r.biff=2);var n=Ku(e);++e.l;var a=nx(e,t-7,r);return n.t="str",n.val=a,n}function Bye(e){var t=Ku(e);++e.l;var r=ro(e);return t.t="n",t.val=r,t}function Uye(e,t,r){var n=Bt(15);return dv(n,e,t),n.write_shift(8,r,"f"),n}function zye(e){var t=Ku(e);++e.l;var r=e.read_shift(2);return t.t="n",t.val=r,t}function qye(e,t,r){var n=Bt(9);return dv(n,e,t),n.write_shift(2,r),n}function Hye(e){var t=e.read_shift(1);return t===0?(e.l++,""):e.read_shift(t,"sbcs-cont")}function $ye(e,t){e.l+=6,e.l+=2,e.l+=1,e.l+=3,e.l+=1,e.l+=t-13}function Vye(e,t,r){var n=e.l+t,a=Ku(e),s=e.read_shift(2),l=qm(e,s,r);return e.l=n,a.t="str",a.val=l,a}var Wye=[2,3,48,49,131,139,140,245],PS=(function(){var e={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},t=Dk({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(o,c){var d=[],f=of(1);switch(c.type){case"base64":f=Sc(Pc(o));break;case"binary":f=Sc(o);break;case"buffer":case"array":f=o;break}Pl(f,0);var p=f.read_shift(1),y=!!(p&136),g=!1,N=!1;switch(p){case 2:break;case 3:break;case 48:g=!0,y=!0;break;case 49:g=!0,y=!0;break;case 131:break;case 139:break;case 140:N=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+p.toString(16))}var w=0,k=521;p==2&&(w=f.read_shift(2)),f.l+=3,p!=2&&(w=f.read_shift(4)),w>1048576&&(w=1e6),p!=2&&(k=f.read_shift(2));var S=f.read_shift(2),O=c.codepage||1252;p!=2&&(f.l+=16,f.read_shift(1),f[f.l]!==0&&(O=e[f[f.l]]),f.l+=1,f.l+=2),N&&(f.l+=36);for(var E=[],D={},H=Math.min(f.length,p==2?521:k-10-(g?264:0)),W=N?32:11;f.l<H&&f[f.l]!=13;)switch(D={},D.name=ob.utils.decode(O,f.slice(f.l,f.l+W)).replace(/[\u0000\r\n].*$/g,""),f.l+=W,D.type=String.fromCharCode(f.read_shift(1)),p!=2&&!N&&(D.offset=f.read_shift(4)),D.len=f.read_shift(1),p==2&&(D.offset=f.read_shift(2)),D.dec=f.read_shift(1),D.name.length&&E.push(D),p!=2&&(f.l+=N?13:14),D.type){case"B":(!g||D.len!=8)&&c.WTF&&console.log("Skipping "+D.name+":"+D.type);break;case"G":case"P":c.WTF&&console.log("Skipping "+D.name+":"+D.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+D.type)}if(f[f.l]!==13&&(f.l=k-1),f.read_shift(1)!==13)throw new Error("DBF Terminator not found "+f.l+" "+f[f.l]);f.l=k;var R=0,z=0;for(d[0]=[],z=0;z!=E.length;++z)d[0][z]=E[z].name;for(;w-- >0;){if(f[f.l]===42){f.l+=S;continue}for(++f.l,d[++R]=[],z=0,z=0;z!=E.length;++z){var U=f.slice(f.l,f.l+E[z].len);f.l+=E[z].len,Pl(U,0);var Z=ob.utils.decode(O,U);switch(E[z].type){case"C":Z.trim().length&&(d[R][z]=Z.replace(/\s+$/,""));break;case"D":Z.length===8?d[R][z]=new Date(+Z.slice(0,4),+Z.slice(4,6)-1,+Z.slice(6,8)):d[R][z]=Z;break;case"F":d[R][z]=parseFloat(Z.trim());break;case"+":case"I":d[R][z]=N?U.read_shift(-4,"i")^2147483648:U.read_shift(4,"i");break;case"L":switch(Z.trim().toUpperCase()){case"Y":case"T":d[R][z]=!0;break;case"N":case"F":d[R][z]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+Z+"|")}break;case"M":if(!y)throw new Error("DBF Unexpected MEMO for type "+p.toString(16));d[R][z]="##MEMO##"+(N?parseInt(Z.trim(),10):U.read_shift(4));break;case"N":Z=Z.replace(/\u0000/g,"").trim(),Z&&Z!="."&&(d[R][z]=+Z||0);break;case"@":d[R][z]=new Date(U.read_shift(-8,"f")-621356832e5);break;case"T":d[R][z]=new Date((U.read_shift(4)-2440588)*864e5+U.read_shift(4));break;case"Y":d[R][z]=U.read_shift(4,"i")/1e4+U.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":d[R][z]=-U.read_shift(-8,"f");break;case"B":if(g&&E[z].len==8){d[R][z]=U.read_shift(8,"f");break}case"G":case"P":U.l+=E[z].len;break;case"0":if(E[z].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+E[z].type)}}}if(p!=2&&f.l<f.length&&f[f.l++]!=26)throw new Error("DBF EOF Marker missing "+(f.l-1)+" of "+f.length+" "+f[f.l-1].toString(16));return c&&c.sheetRows&&(d=d.slice(0,c.sheetRows)),c.DBF=E,d}function n(o,c){var d=c||{};d.dateNF||(d.dateNF="yyyymmdd");var f=gp(r(o,d),d);return f["!cols"]=d.DBF.map(function(p){return{wch:p.len,DBF:p}}),delete d.DBF,f}function a(o,c){try{return yf(n(o,c),c)}catch(d){if(c&&c.WTF)throw d}return{SheetNames:[],Sheets:{}}}var s={B:8,C:250,L:1,D:8,"?":0,"":0};function l(o,c){var d=c||{};if(+d.codepage>=0&&Zd(+d.codepage),d.type=="string")throw new Error("Cannot write DBF to JS string");var f=nc(),p=ww(o,{header:1,raw:!0,cellDates:!0}),y=p[0],g=p.slice(1),N=o["!cols"]||[],w=0,k=0,S=0,O=1;for(w=0;w<y.length;++w){if(((N[w]||{}).DBF||{}).name){y[w]=N[w].DBF.name,++S;continue}if(y[w]!=null){if(++S,typeof y[w]=="number"&&(y[w]=y[w].toString(10)),typeof y[w]!="string")throw new Error("DBF Invalid column name "+y[w]+" |"+typeof y[w]+"|");if(y.indexOf(y[w])!==w){for(k=0;k<1024;++k)if(y.indexOf(y[w]+"_"+k)==-1){y[w]+="_"+k;break}}}}var E=Ta(o["!ref"]),D=[],H=[],W=[];for(w=0;w<=E.e.c-E.s.c;++w){var R="",z="",U=0,Z=[];for(k=0;k<g.length;++k)g[k][w]!=null&&Z.push(g[k][w]);if(Z.length==0||y[w]==null){D[w]="?";continue}for(k=0;k<Z.length;++k){switch(typeof Z[k]){case"number":z="B";break;case"string":z="C";break;case"boolean":z="L";break;case"object":z=Z[k]instanceof Date?"D":"C";break;default:z="C"}U=Math.max(U,String(Z[k]).length),R=R&&R!=z?"C":z}U>250&&(U=250),z=((N[w]||{}).DBF||{}).type,z=="C"&&N[w].DBF.len>U&&(U=N[w].DBF.len),R=="B"&&z=="N"&&(R="N",W[w]=N[w].DBF.dec,U=N[w].DBF.len),H[w]=R=="C"||z=="N"?U:s[R]||0,O+=H[w],D[w]=R}var q=f.next(32);for(q.write_shift(4,318902576),q.write_shift(4,g.length),q.write_shift(2,296+32*S),q.write_shift(2,O),w=0;w<4;++w)q.write_shift(4,0);for(q.write_shift(4,0|(+t[NH]||3)<<8),w=0,k=0;w<y.length;++w)if(y[w]!=null){var K=f.next(32),Q=(y[w].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);K.write_shift(1,Q,"sbcs"),K.write_shift(1,D[w]=="?"?"C":D[w],"sbcs"),K.write_shift(4,k),K.write_shift(1,H[w]||s[D[w]]||0),K.write_shift(1,W[w]||0),K.write_shift(1,2),K.write_shift(4,0),K.write_shift(1,0),K.write_shift(4,0),K.write_shift(4,0),k+=H[w]||s[D[w]]||0}var re=f.next(264);for(re.write_shift(4,13),w=0;w<65;++w)re.write_shift(4,0);for(w=0;w<g.length;++w){var ae=f.next(O);for(ae.write_shift(1,0),k=0;k<y.length;++k)if(y[k]!=null)switch(D[k]){case"L":ae.write_shift(1,g[w][k]==null?63:g[w][k]?84:70);break;case"B":ae.write_shift(8,g[w][k]||0,"f");break;case"N":var de="0";for(typeof g[w][k]=="number"&&(de=g[w][k].toFixed(W[k]||0)),S=0;S<H[k]-de.length;++S)ae.write_shift(1,32);ae.write_shift(1,de,"sbcs");break;case"D":g[w][k]?(ae.write_shift(4,("0000"+g[w][k].getFullYear()).slice(-4),"sbcs"),ae.write_shift(2,("00"+(g[w][k].getMonth()+1)).slice(-2),"sbcs"),ae.write_shift(2,("00"+g[w][k].getDate()).slice(-2),"sbcs")):ae.write_shift(8,"00000000","sbcs");break;case"C":var he=String(g[w][k]!=null?g[w][k]:"").slice(0,H[k]);for(ae.write_shift(1,he,"sbcs"),S=0;S<H[k]-he.length;++S)ae.write_shift(1,32);break}}return f.next(1).write_shift(1,26),f.end()}return{to_workbook:a,to_sheet:n,from_sheet:l}})(),M$=(function(){var e={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},t=new RegExp("\x1BN("+ui(e).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(y,g){var N=e[g];return typeof N=="number"?_I(N):N},n=function(y,g,N){var w=g.charCodeAt(0)-32<<4|N.charCodeAt(0)-48;return w==59?y:_I(w)};e["|"]=254;function a(y,g){switch(g.type){case"base64":return s(Pc(y),g);case"binary":return s(y,g);case"buffer":return s(ra&&Buffer.isBuffer(y)?y.toString("binary"):vf(y),g);case"array":return s(Um(y),g)}throw new Error("Unrecognized type "+g.type)}function s(y,g){var N=y.split(/[\n\r]+/),w=-1,k=-1,S=0,O=0,E=[],D=[],H=null,W={},R=[],z=[],U=[],Z=0,q;for(+g.codepage>=0&&Zd(+g.codepage);S!==N.length;++S){Z=0;var K=N[S].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(t,r),Q=K.replace(/;;/g,"\0").split(";").map(function(ne){return ne.replace(/\u0000/g,";")}),re=Q[0],ae;if(K.length>0)switch(re){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":Q[1].charAt(0)=="P"&&D.push(K.slice(3).replace(/;;/g,";"));break;case"C":var de=!1,he=!1,Se=!1,ke=!1,Le=-1,fe=-1;for(O=1;O<Q.length;++O)switch(Q[O].charAt(0)){case"A":break;case"X":k=parseInt(Q[O].slice(1))-1,he=!0;break;case"Y":for(w=parseInt(Q[O].slice(1))-1,he||(k=0),q=E.length;q<=w;++q)E[q]=[];break;case"K":ae=Q[O].slice(1),ae.charAt(0)==='"'?ae=ae.slice(1,ae.length-1):ae==="TRUE"?ae=!0:ae==="FALSE"?ae=!1:isNaN(Jd(ae))?isNaN(W1(ae).getDate())||(ae=Es(ae)):(ae=Jd(ae),H!==null&&xp(H)&&(ae=Lk(ae))),de=!0;break;case"E":ke=!0;var F=g1(Q[O].slice(1),{r:w,c:k});E[w][k]=[E[w][k],F];break;case"S":Se=!0,E[w][k]=[E[w][k],"S5S"];break;case"G":break;case"R":Le=parseInt(Q[O].slice(1))-1;break;case"C":fe=parseInt(Q[O].slice(1))-1;break;default:if(g&&g.WTF)throw new Error("SYLK bad record "+K)}if(de&&(E[w][k]&&E[w][k].length==2?E[w][k][0]=ae:E[w][k]=ae,H=null),Se){if(ke)throw new Error("SYLK shared formula cannot have own formula");var te=Le>-1&&E[Le][fe];if(!te||!te[1])throw new Error("SYLK shared formula cannot find base");E[w][k][1]=J$(te[1],{r:w-Le,c:k-fe})}break;case"F":var Y=0;for(O=1;O<Q.length;++O)switch(Q[O].charAt(0)){case"X":k=parseInt(Q[O].slice(1))-1,++Y;break;case"Y":for(w=parseInt(Q[O].slice(1))-1,q=E.length;q<=w;++q)E[q]=[];break;case"M":Z=parseInt(Q[O].slice(1))/20;break;case"F":break;case"G":break;case"P":H=D[parseInt(Q[O].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(U=Q[O].slice(1).split(" "),q=parseInt(U[0],10);q<=parseInt(U[1],10);++q)Z=parseInt(U[2],10),z[q-1]=Z===0?{hidden:!0}:{wch:Z},cf(z[q-1]);break;case"C":k=parseInt(Q[O].slice(1))-1,z[k]||(z[k]={});break;case"R":w=parseInt(Q[O].slice(1))-1,R[w]||(R[w]={}),Z>0?(R[w].hpt=Z,R[w].hpx=G1(Z)):Z===0&&(R[w].hidden=!0);break;default:if(g&&g.WTF)throw new Error("SYLK bad record "+K)}Y<1&&(H=null);break;default:if(g&&g.WTF)throw new Error("SYLK bad record "+K)}}return R.length>0&&(W["!rows"]=R),z.length>0&&(W["!cols"]=z),g&&g.sheetRows&&(E=E.slice(0,g.sheetRows)),[E,W]}function l(y,g){var N=a(y,g),w=N[0],k=N[1],S=gp(w,g);return ui(k).forEach(function(O){S[O]=k[O]}),S}function o(y,g){return yf(l(y,g),g)}function c(y,g,N,w){var k="C;Y"+(N+1)+";X"+(w+1)+";K";switch(y.t){case"n":k+=y.v||0,y.f&&!y.F&&(k+=";E"+oA(y.f,{r:N,c:w}));break;case"b":k+=y.v?"TRUE":"FALSE";break;case"e":k+=y.w||y.v;break;case"d":k+='"'+(y.w||y.v)+'"';break;case"s":k+='"'+y.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return k}function d(y,g){g.forEach(function(N,w){var k="F;W"+(w+1)+" "+(w+1)+" ";N.hidden?k+="0":(typeof N.width=="number"&&!N.wpx&&(N.wpx=pb(N.width)),typeof N.wpx=="number"&&!N.wch&&(N.wch=gb(N.wpx)),typeof N.wch=="number"&&(k+=Math.round(N.wch))),k.charAt(k.length-1)!=" "&&y.push(k)})}function f(y,g){g.forEach(function(N,w){var k="F;";N.hidden?k+="M0;":N.hpt?k+="M"+20*N.hpt+";":N.hpx&&(k+="M"+20*bb(N.hpx)+";"),k.length>2&&y.push(k+"R"+(w+1))})}function p(y,g){var N=["ID;PWXL;N;E"],w=[],k=Ta(y["!ref"]),S,O=Array.isArray(y),E=`\r
`;N.push("P;PGeneral"),N.push("F;P0;DG0G8;M255"),y["!cols"]&&d(N,y["!cols"]),y["!rows"]&&f(N,y["!rows"]),N.push("B;Y"+(k.e.r-k.s.r+1)+";X"+(k.e.c-k.s.c+1)+";D"+[k.s.c,k.s.r,k.e.c,k.e.r].join(" "));for(var D=k.s.r;D<=k.e.r;++D)for(var H=k.s.c;H<=k.e.c;++H){var W=Tn({r:D,c:H});S=O?(y[D]||[])[H]:y[W],!(!S||S.v==null&&(!S.f||S.F))&&w.push(c(S,y,D,H))}return N.join(E)+E+w.join(E)+E+"E"+E}return{to_workbook:o,to_sheet:l,from_sheet:p}})(),L$=(function(){function e(s,l){switch(l.type){case"base64":return t(Pc(s),l);case"binary":return t(s,l);case"buffer":return t(ra&&Buffer.isBuffer(s)?s.toString("binary"):vf(s),l);case"array":return t(Um(s),l)}throw new Error("Unrecognized type "+l.type)}function t(s,l){for(var o=s.split(`
`),c=-1,d=-1,f=0,p=[];f!==o.length;++f){if(o[f].trim()==="BOT"){p[++c]=[],d=0;continue}if(!(c<0)){var y=o[f].trim().split(","),g=y[0],N=y[1];++f;for(var w=o[f]||"";(w.match(/["]/g)||[]).length&1&&f<o.length-1;)w+=`
`+o[++f];switch(w=w.trim(),+g){case-1:if(w==="BOT"){p[++c]=[],d=0;continue}else if(w!=="EOD")throw new Error("Unrecognized DIF special command "+w);break;case 0:w==="TRUE"?p[c][d]=!0:w==="FALSE"?p[c][d]=!1:isNaN(Jd(N))?isNaN(W1(N).getDate())?p[c][d]=N:p[c][d]=Es(N):p[c][d]=Jd(N),++d;break;case 1:w=w.slice(1,w.length-1),w=w.replace(/""/g,'"'),w&&w.match(/^=".*"$/)&&(w=w.slice(2,-1)),p[c][d++]=w!==""?w:null;break}if(w==="EOD")break}}return l&&l.sheetRows&&(p=p.slice(0,l.sheetRows)),p}function r(s,l){return gp(e(s,l),l)}function n(s,l){return yf(r(s,l),l)}var a=(function(){var s=function(c,d,f,p,y){c.push(d),c.push(f+","+p),c.push('"'+y.replace(/"/g,'""')+'"')},l=function(c,d,f,p){c.push(d+","+f),c.push(d==1?'"'+p.replace(/"/g,'""')+'"':p)};return function(c){var d=[],f=Ta(c["!ref"]),p,y=Array.isArray(c);s(d,"TABLE",0,1,"sheetjs"),s(d,"VECTORS",0,f.e.r-f.s.r+1,""),s(d,"TUPLES",0,f.e.c-f.s.c+1,""),s(d,"DATA",0,0,"");for(var g=f.s.r;g<=f.e.r;++g){l(d,-1,0,"BOT");for(var N=f.s.c;N<=f.e.c;++N){var w=Tn({r:g,c:N});if(p=y?(c[g]||[])[N]:c[w],!p){l(d,1,0,"");continue}switch(p.t){case"n":var k=p.w;!k&&p.v!=null&&(k=p.v),k==null?p.f&&!p.F?l(d,1,0,"="+p.f):l(d,1,0,""):l(d,0,k,"V");break;case"b":l(d,0,p.v?1:0,p.v?"TRUE":"FALSE");break;case"s":l(d,1,0,isNaN(p.v)?p.v:'="'+p.v+'"');break;case"d":p.w||(p.w=xd(p.z||En[14],Gi(Es(p.v)))),l(d,0,p.w,"V");break;default:l(d,1,0,"")}}}l(d,-1,0,"EOD");var S=`\r
`,O=d.join(S);return O}})();return{to_workbook:n,to_sheet:r,from_sheet:a}})(),R$=(function(){function e(p){return p.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function t(p){return p.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(p,y){for(var g=p.split(`
`),N=-1,w=-1,k=0,S=[];k!==g.length;++k){var O=g[k].trim().split(":");if(O[0]==="cell"){var E=Gs(O[1]);if(S.length<=E.r)for(N=S.length;N<=E.r;++N)S[N]||(S[N]=[]);switch(N=E.r,w=E.c,O[2]){case"t":S[N][w]=e(O[3]);break;case"v":S[N][w]=+O[3];break;case"vtf":var D=O[O.length-1];case"vtc":switch(O[3]){case"nl":S[N][w]=!!+O[4];break;default:S[N][w]=+O[4];break}O[2]=="vtf"&&(S[N][w]=[S[N][w],D])}}}return y&&y.sheetRows&&(S=S.slice(0,y.sheetRows)),S}function n(p,y){return gp(r(p,y),y)}function a(p,y){return yf(n(p,y),y)}var s=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),l=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,o=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),c="--SocialCalcSpreadsheetControlSave--";function d(p){if(!p||!p["!ref"])return"";for(var y=[],g=[],N,w="",k=ac(p["!ref"]),S=Array.isArray(p),O=k.s.r;O<=k.e.r;++O)for(var E=k.s.c;E<=k.e.c;++E)if(w=Tn({r:O,c:E}),N=S?(p[O]||[])[E]:p[w],!(!N||N.v==null||N.t==="z")){switch(g=["cell",w,"t"],N.t){case"s":case"str":g.push(t(N.v));break;case"n":N.f?(g[2]="vtf",g[3]="n",g[4]=N.v,g[5]=t(N.f)):(g[2]="v",g[3]=N.v);break;case"b":g[2]="vt"+(N.f?"f":"c"),g[3]="nl",g[4]=N.v?"1":"0",g[5]=t(N.f||(N.v?"TRUE":"FALSE"));break;case"d":var D=Gi(Es(N.v));g[2]="vtc",g[3]="nd",g[4]=""+D,g[5]=N.w||xd(N.z||En[14],D);break;case"e":continue}y.push(g.join(":"))}return y.push("sheet:c:"+(k.e.c-k.s.c+1)+":r:"+(k.e.r-k.s.r+1)+":tvf:1"),y.push("valueformat:1:text-wiki"),y.join(`
`)}function f(p){return[s,l,o,l,d(p),c].join(`
`)}return{to_workbook:a,to_sheet:n,from_sheet:f}})(),K1=(function(){function e(f,p,y,g,N){N.raw?p[y][g]=f:f===""||(f==="TRUE"?p[y][g]=!0:f==="FALSE"?p[y][g]=!1:isNaN(Jd(f))?isNaN(W1(f).getDate())?p[y][g]=f:p[y][g]=Es(f):p[y][g]=Jd(f))}function t(f,p){var y=p||{},g=[];if(!f||f.length===0)return g;for(var N=f.split(/[\r\n]/),w=N.length-1;w>=0&&N[w].length===0;)--w;for(var k=10,S=0,O=0;O<=w;++O)S=N[O].indexOf(" "),S==-1?S=N[O].length:S++,k=Math.max(k,S);for(O=0;O<=w;++O){g[O]=[];var E=0;for(e(N[O].slice(0,k).trim(),g,O,E,y),E=1;E<=(N[O].length-k)/10+1;++E)e(N[O].slice(k+(E-1)*10,k+E*10).trim(),g,O,E,y)}return y.sheetRows&&(g=g.slice(0,y.sheetRows)),g}var r={44:",",9:"	",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function a(f){for(var p={},y=!1,g=0,N=0;g<f.length;++g)(N=f.charCodeAt(g))==34?y=!y:!y&&N in r&&(p[N]=(p[N]||0)+1);N=[];for(g in p)Object.prototype.hasOwnProperty.call(p,g)&&N.push([p[g],g]);if(!N.length){p=n;for(g in p)Object.prototype.hasOwnProperty.call(p,g)&&N.push([p[g],g])}return N.sort(function(w,k){return w[0]-k[0]||n[w[1]]-n[k[1]]}),r[N.pop()[1]]||44}function s(f,p){var y=p||{},g="",N=y.dense?[]:{},w={s:{c:0,r:0},e:{c:0,r:0}};f.slice(0,4)=="sep="?f.charCodeAt(5)==13&&f.charCodeAt(6)==10?(g=f.charAt(4),f=f.slice(7)):f.charCodeAt(5)==13||f.charCodeAt(5)==10?(g=f.charAt(4),f=f.slice(6)):g=a(f.slice(0,1024)):y&&y.FS?g=y.FS:g=a(f.slice(0,1024));var k=0,S=0,O=0,E=0,D=0,H=g.charCodeAt(0),W=!1,R=0,z=f.charCodeAt(0);f=f.replace(/\r\n/mg,`
`);var U=y.dateNF!=null?Pbe(y.dateNF):null;function Z(){var q=f.slice(E,D),K={};if(q.charAt(0)=='"'&&q.charAt(q.length-1)=='"'&&(q=q.slice(1,-1).replace(/""/g,'"')),q.length===0)K.t="z";else if(y.raw)K.t="s",K.v=q;else if(q.trim().length===0)K.t="s",K.v=q;else if(q.charCodeAt(0)==61)q.charCodeAt(1)==34&&q.charCodeAt(q.length-1)==34?(K.t="s",K.v=q.slice(2,-1).replace(/""/g,'"')):l5e(q)?(K.t="n",K.f=q.slice(1)):(K.t="s",K.v=q);else if(q=="TRUE")K.t="b",K.v=!0;else if(q=="FALSE")K.t="b",K.v=!1;else if(!isNaN(O=Jd(q)))K.t="n",y.cellText!==!1&&(K.w=q),K.v=O;else if(!isNaN(W1(q).getDate())||U&&q.match(U)){K.z=y.dateNF||En[14];var Q=0;U&&q.match(U)&&(q=Ibe(q,y.dateNF,q.match(U)||[]),Q=1),y.cellDates?(K.t="d",K.v=Es(q,Q)):(K.t="n",K.v=Gi(Es(q,Q))),y.cellText!==!1&&(K.w=xd(K.z,K.v instanceof Date?Gi(K.v):K.v)),y.cellNF||delete K.z}else K.t="s",K.v=q;if(K.t=="z"||(y.dense?(N[k]||(N[k]=[]),N[k][S]=K):N[Tn({c:S,r:k})]=K),E=D+1,z=f.charCodeAt(E),w.e.c<S&&(w.e.c=S),w.e.r<k&&(w.e.r=k),R==H)++S;else if(S=0,++k,y.sheetRows&&y.sheetRows<=k)return!0}e:for(;D<f.length;++D)switch(R=f.charCodeAt(D)){case 34:z===34&&(W=!W);break;case H:case 10:case 13:if(!W&&Z())break e;break}return D-E>0&&Z(),N["!ref"]=Kn(w),N}function l(f,p){return!(p&&p.PRN)||p.FS||f.slice(0,4)=="sep="||f.indexOf("	")>=0||f.indexOf(",")>=0||f.indexOf(";")>=0?s(f,p):gp(t(f,p),p)}function o(f,p){var y="",g=p.type=="string"?[0,0,0,0]:pA(f,p);switch(p.type){case"base64":y=Pc(f);break;case"binary":y=f;break;case"buffer":p.codepage==65001?y=f.toString("utf8"):p.codepage&&typeof ob<"u"||(y=ra&&Buffer.isBuffer(f)?f.toString("binary"):vf(f));break;case"array":y=Um(f);break;case"string":y=f;break;default:throw new Error("Unrecognized type "+p.type)}return g[0]==239&&g[1]==187&&g[2]==191?y=ss(y.slice(3)):p.type!="string"&&p.type!="buffer"&&p.codepage==65001?y=ss(y):p.type=="binary"&&typeof ob<"u",y.slice(0,19)=="socialcalc:version:"?R$.to_sheet(p.type=="string"?y:ss(y),p):l(y,p)}function c(f,p){return yf(o(f,p),p)}function d(f){for(var p=[],y=Ta(f["!ref"]),g,N=Array.isArray(f),w=y.s.r;w<=y.e.r;++w){for(var k=[],S=y.s.c;S<=y.e.c;++S){var O=Tn({r:w,c:S});if(g=N?(f[w]||[])[S]:f[O],!g||g.v==null){k.push("          ");continue}for(var E=(g.w||(Y0(g),g.w)||"").slice(0,10);E.length<10;)E+=" ";k.push(E+(S===0?" ":""))}p.push(k.join(""))}return p.join(`
`)}return{to_workbook:c,to_sheet:o,from_sheet:d}})();function Kye(e,t){var r=t||{},n=!!r.WTF;r.WTF=!0;try{var a=M$.to_workbook(e,r);return r.WTF=n,a}catch(s){if(r.WTF=n,!s.message.match(/SYLK bad record ID/)&&n)throw s;return K1.to_workbook(e,t)}}var vm=(function(){function e(F,te,Y){if(F){Pl(F,F.l||0);for(var ne=Y.Enum||Le;F.l<F.length;){var ee=F.read_shift(2),Ce=ne[ee]||ne[65535],me=F.read_shift(2),se=F.l+me,je=Ce.f&&Ce.f(F,me,Y);if(F.l=se,te(je,Ce,ee))return}}}function t(F,te){switch(te.type){case"base64":return r(Sc(Pc(F)),te);case"binary":return r(Sc(F),te);case"buffer":case"array":return r(F,te)}throw"Unsupported type "+te.type}function r(F,te){if(!F)return F;var Y=te||{},ne=Y.dense?[]:{},ee="Sheet1",Ce="",me=0,se={},je=[],be=[],ie={s:{r:0,c:0},e:{r:0,c:0}},Te=Y.sheetRows||0;if(F[2]==0&&(F[3]==8||F[3]==9)&&F.length>=16&&F[14]==5&&F[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(F[2]==2)Y.Enum=Le,e(F,function(st,dt,et){switch(et){case 0:Y.vers=st,st>=4096&&(Y.qpro=!0);break;case 6:ie=st;break;case 204:st&&(Ce=st);break;case 222:Ce=st;break;case 15:case 51:Y.qpro||(st[1].v=st[1].v.slice(1));case 13:case 14:case 16:et==14&&(st[2]&112)==112&&(st[2]&15)>1&&(st[2]&15)<15&&(st[1].z=Y.dateNF||En[14],Y.cellDates&&(st[1].t="d",st[1].v=Lk(st[1].v))),Y.qpro&&st[3]>me&&(ne["!ref"]=Kn(ie),se[ee]=ne,je.push(ee),ne=Y.dense?[]:{},ie={s:{r:0,c:0},e:{r:0,c:0}},me=st[3],ee=Ce||"Sheet"+(me+1),Ce="");var lt=Y.dense?(ne[st[0].r]||[])[st[0].c]:ne[Tn(st[0])];if(lt){lt.t=st[1].t,lt.v=st[1].v,st[1].z!=null&&(lt.z=st[1].z),st[1].f!=null&&(lt.f=st[1].f);break}Y.dense?(ne[st[0].r]||(ne[st[0].r]=[]),ne[st[0].r][st[0].c]=st[1]):ne[Tn(st[0])]=st[1];break}},Y);else if(F[2]==26||F[2]==14)Y.Enum=fe,F[2]==14&&(Y.qpro=!0,F.l=0),e(F,function(st,dt,et){switch(et){case 204:ee=st;break;case 22:st[1].v=st[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(st[3]>me&&(ne["!ref"]=Kn(ie),se[ee]=ne,je.push(ee),ne=Y.dense?[]:{},ie={s:{r:0,c:0},e:{r:0,c:0}},me=st[3],ee="Sheet"+(me+1)),Te>0&&st[0].r>=Te)break;Y.dense?(ne[st[0].r]||(ne[st[0].r]=[]),ne[st[0].r][st[0].c]=st[1]):ne[Tn(st[0])]=st[1],ie.e.c<st[0].c&&(ie.e.c=st[0].c),ie.e.r<st[0].r&&(ie.e.r=st[0].r);break;case 27:st[14e3]&&(be[st[14e3][0]]=st[14e3][1]);break;case 1537:be[st[0]]=st[1],st[0]==me&&(ee=st[1]);break}},Y);else throw new Error("Unrecognized LOTUS BOF "+F[2]);if(ne["!ref"]=Kn(ie),se[Ce||ee]=ne,je.push(Ce||ee),!be.length)return{SheetNames:je,Sheets:se};for(var De={},ye=[],rt=0;rt<be.length;++rt)se[je[rt]]?(ye.push(be[rt]||je[rt]),De[be[rt]]=se[be[rt]]||se[je[rt]]):(ye.push(be[rt]),De[be[rt]]={"!ref":"A1"});return{SheetNames:ye,Sheets:De}}function n(F,te){var Y=te||{};if(+Y.codepage>=0&&Zd(+Y.codepage),Y.type=="string")throw new Error("Cannot write WK1 to JS string");var ne=nc(),ee=Ta(F["!ref"]),Ce=Array.isArray(F),me=[];jr(ne,0,s(1030)),jr(ne,6,c(ee));for(var se=Math.min(ee.e.r,8191),je=ee.s.r;je<=se;++je)for(var be=ji(je),ie=ee.s.c;ie<=ee.e.c;++ie){je===ee.s.r&&(me[ie]=Ks(ie));var Te=me[ie]+be,De=Ce?(F[je]||[])[ie]:F[Te];if(!(!De||De.t=="z"))if(De.t=="n")(De.v|0)==De.v&&De.v>=-32768&&De.v<=32767?jr(ne,13,g(je,ie,De.v)):jr(ne,14,w(je,ie,De.v));else{var ye=Y0(De);jr(ne,15,p(je,ie,ye.slice(0,239)))}}return jr(ne,1),ne.end()}function a(F,te){var Y=te||{};if(+Y.codepage>=0&&Zd(+Y.codepage),Y.type=="string")throw new Error("Cannot write WK3 to JS string");var ne=nc();jr(ne,0,l(F));for(var ee=0,Ce=0;ee<F.SheetNames.length;++ee)(F.Sheets[F.SheetNames[ee]]||{})["!ref"]&&jr(ne,27,ke(F.SheetNames[ee],Ce++));var me=0;for(ee=0;ee<F.SheetNames.length;++ee){var se=F.Sheets[F.SheetNames[ee]];if(!(!se||!se["!ref"])){for(var je=Ta(se["!ref"]),be=Array.isArray(se),ie=[],Te=Math.min(je.e.r,8191),De=je.s.r;De<=Te;++De)for(var ye=ji(De),rt=je.s.c;rt<=je.e.c;++rt){De===je.s.r&&(ie[rt]=Ks(rt));var st=ie[rt]+ye,dt=be?(se[De]||[])[rt]:se[st];if(!(!dt||dt.t=="z"))if(dt.t=="n")jr(ne,23,Z(De,rt,me,dt.v));else{var et=Y0(dt);jr(ne,22,R(De,rt,me,et.slice(0,239)))}}++me}}return jr(ne,1),ne.end()}function s(F){var te=Bt(2);return te.write_shift(2,F),te}function l(F){var te=Bt(26);te.write_shift(2,4096),te.write_shift(2,4),te.write_shift(4,0);for(var Y=0,ne=0,ee=0,Ce=0;Ce<F.SheetNames.length;++Ce){var me=F.SheetNames[Ce],se=F.Sheets[me];if(!(!se||!se["!ref"])){++ee;var je=ac(se["!ref"]);Y<je.e.r&&(Y=je.e.r),ne<je.e.c&&(ne=je.e.c)}}return Y>8191&&(Y=8191),te.write_shift(2,Y),te.write_shift(1,ee),te.write_shift(1,ne),te.write_shift(2,0),te.write_shift(2,0),te.write_shift(1,1),te.write_shift(1,2),te.write_shift(4,0),te.write_shift(4,0),te}function o(F,te,Y){var ne={s:{c:0,r:0},e:{c:0,r:0}};return te==8&&Y.qpro?(ne.s.c=F.read_shift(1),F.l++,ne.s.r=F.read_shift(2),ne.e.c=F.read_shift(1),F.l++,ne.e.r=F.read_shift(2),ne):(ne.s.c=F.read_shift(2),ne.s.r=F.read_shift(2),te==12&&Y.qpro&&(F.l+=2),ne.e.c=F.read_shift(2),ne.e.r=F.read_shift(2),te==12&&Y.qpro&&(F.l+=2),ne.s.c==65535&&(ne.s.c=ne.e.c=ne.s.r=ne.e.r=0),ne)}function c(F){var te=Bt(8);return te.write_shift(2,F.s.c),te.write_shift(2,F.s.r),te.write_shift(2,F.e.c),te.write_shift(2,F.e.r),te}function d(F,te,Y){var ne=[{c:0,r:0},{t:"n",v:0},0,0];return Y.qpro&&Y.vers!=20768?(ne[0].c=F.read_shift(1),ne[3]=F.read_shift(1),ne[0].r=F.read_shift(2),F.l+=2):(ne[2]=F.read_shift(1),ne[0].c=F.read_shift(2),ne[0].r=F.read_shift(2)),ne}function f(F,te,Y){var ne=F.l+te,ee=d(F,te,Y);if(ee[1].t="s",Y.vers==20768){F.l++;var Ce=F.read_shift(1);return ee[1].v=F.read_shift(Ce,"utf8"),ee}return Y.qpro&&F.l++,ee[1].v=F.read_shift(ne-F.l,"cstr"),ee}function p(F,te,Y){var ne=Bt(7+Y.length);ne.write_shift(1,255),ne.write_shift(2,te),ne.write_shift(2,F),ne.write_shift(1,39);for(var ee=0;ee<ne.length;++ee){var Ce=Y.charCodeAt(ee);ne.write_shift(1,Ce>=128?95:Ce)}return ne.write_shift(1,0),ne}function y(F,te,Y){var ne=d(F,te,Y);return ne[1].v=F.read_shift(2,"i"),ne}function g(F,te,Y){var ne=Bt(7);return ne.write_shift(1,255),ne.write_shift(2,te),ne.write_shift(2,F),ne.write_shift(2,Y,"i"),ne}function N(F,te,Y){var ne=d(F,te,Y);return ne[1].v=F.read_shift(8,"f"),ne}function w(F,te,Y){var ne=Bt(13);return ne.write_shift(1,255),ne.write_shift(2,te),ne.write_shift(2,F),ne.write_shift(8,Y,"f"),ne}function k(F,te,Y){var ne=F.l+te,ee=d(F,te,Y);if(ee[1].v=F.read_shift(8,"f"),Y.qpro)F.l=ne;else{var Ce=F.read_shift(2);D(F.slice(F.l,F.l+Ce),ee),F.l+=Ce}return ee}function S(F,te,Y){var ne=te&32768;return te&=-32769,te=(ne?F:0)+(te>=8192?te-16384:te),(ne?"":"$")+(Y?Ks(te):ji(te))}var O={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},E=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function D(F,te){Pl(F,0);for(var Y=[],ne=0,ee="",Ce="",me="",se="";F.l<F.length;){var je=F[F.l++];switch(je){case 0:Y.push(F.read_shift(8,"f"));break;case 1:Ce=S(te[0].c,F.read_shift(2),!0),ee=S(te[0].r,F.read_shift(2),!1),Y.push(Ce+ee);break;case 2:{var be=S(te[0].c,F.read_shift(2),!0),ie=S(te[0].r,F.read_shift(2),!1);Ce=S(te[0].c,F.read_shift(2),!0),ee=S(te[0].r,F.read_shift(2),!1),Y.push(be+ie+":"+Ce+ee)}break;case 3:if(F.l<F.length){console.error("WK1 premature formula end");return}break;case 4:Y.push("("+Y.pop()+")");break;case 5:Y.push(F.read_shift(2));break;case 6:{for(var Te="";je=F[F.l++];)Te+=String.fromCharCode(je);Y.push('"'+Te.replace(/"/g,'""')+'"')}break;case 8:Y.push("-"+Y.pop());break;case 23:Y.push("+"+Y.pop());break;case 22:Y.push("NOT("+Y.pop()+")");break;case 20:case 21:se=Y.pop(),me=Y.pop(),Y.push(["AND","OR"][je-20]+"("+me+","+se+")");break;default:if(je<32&&E[je])se=Y.pop(),me=Y.pop(),Y.push(me+E[je]+se);else if(O[je]){if(ne=O[je][1],ne==69&&(ne=F[F.l++]),ne>Y.length){console.error("WK1 bad formula parse 0x"+je.toString(16)+":|"+Y.join("|")+"|");return}var De=Y.slice(-ne);Y.length-=ne,Y.push(O[je][0]+"("+De.join(",")+")")}else return je<=7?console.error("WK1 invalid opcode "+je.toString(16)):je<=24?console.error("WK1 unsupported op "+je.toString(16)):je<=30?console.error("WK1 invalid opcode "+je.toString(16)):je<=115?console.error("WK1 unsupported function opcode "+je.toString(16)):console.error("WK1 unrecognized opcode "+je.toString(16))}}Y.length==1?te[1].f=""+Y[0]:console.error("WK1 bad formula parse |"+Y.join("|")+"|")}function H(F){var te=[{c:0,r:0},{t:"n",v:0},0];return te[0].r=F.read_shift(2),te[3]=F[F.l++],te[0].c=F[F.l++],te}function W(F,te){var Y=H(F);return Y[1].t="s",Y[1].v=F.read_shift(te-4,"cstr"),Y}function R(F,te,Y,ne){var ee=Bt(6+ne.length);ee.write_shift(2,F),ee.write_shift(1,Y),ee.write_shift(1,te),ee.write_shift(1,39);for(var Ce=0;Ce<ne.length;++Ce){var me=ne.charCodeAt(Ce);ee.write_shift(1,me>=128?95:me)}return ee.write_shift(1,0),ee}function z(F,te){var Y=H(F);Y[1].v=F.read_shift(2);var ne=Y[1].v>>1;if(Y[1].v&1)switch(ne&7){case 0:ne=(ne>>3)*5e3;break;case 1:ne=(ne>>3)*500;break;case 2:ne=(ne>>3)/20;break;case 3:ne=(ne>>3)/200;break;case 4:ne=(ne>>3)/2e3;break;case 5:ne=(ne>>3)/2e4;break;case 6:ne=(ne>>3)/16;break;case 7:ne=(ne>>3)/64;break}return Y[1].v=ne,Y}function U(F,te){var Y=H(F),ne=F.read_shift(4),ee=F.read_shift(4),Ce=F.read_shift(2);if(Ce==65535)return ne===0&&ee===3221225472?(Y[1].t="e",Y[1].v=15):ne===0&&ee===3489660928?(Y[1].t="e",Y[1].v=42):Y[1].v=0,Y;var me=Ce&32768;return Ce=(Ce&32767)-16446,Y[1].v=(1-me*2)*(ee*Math.pow(2,Ce+32)+ne*Math.pow(2,Ce)),Y}function Z(F,te,Y,ne){var ee=Bt(14);if(ee.write_shift(2,F),ee.write_shift(1,Y),ee.write_shift(1,te),ne==0)return ee.write_shift(4,0),ee.write_shift(4,0),ee.write_shift(2,65535),ee;var Ce=0,me=0,se=0,je=0;return ne<0&&(Ce=1,ne=-ne),me=Math.log2(ne)|0,ne/=Math.pow(2,me-31),je=ne>>>0,(je&2147483648)==0&&(ne/=2,++me,je=ne>>>0),ne-=je,je|=2147483648,je>>>=0,ne*=Math.pow(2,32),se=ne>>>0,ee.write_shift(4,se),ee.write_shift(4,je),me+=16383+(Ce?32768:0),ee.write_shift(2,me),ee}function q(F,te){var Y=U(F);return F.l+=te-14,Y}function K(F,te){var Y=H(F),ne=F.read_shift(4);return Y[1].v=ne>>6,Y}function Q(F,te){var Y=H(F),ne=F.read_shift(8,"f");return Y[1].v=ne,Y}function re(F,te){var Y=Q(F);return F.l+=te-10,Y}function ae(F,te){return F[F.l+te-1]==0?F.read_shift(te,"cstr"):""}function de(F,te){var Y=F[F.l++];Y>te-1&&(Y=te-1);for(var ne="";ne.length<Y;)ne+=String.fromCharCode(F[F.l++]);return ne}function he(F,te,Y){if(!(!Y.qpro||te<21)){var ne=F.read_shift(1);F.l+=17,F.l+=1,F.l+=2;var ee=F.read_shift(te-21,"cstr");return[ne,ee]}}function Se(F,te){for(var Y={},ne=F.l+te;F.l<ne;){var ee=F.read_shift(2);if(ee==14e3){for(Y[ee]=[0,""],Y[ee][0]=F.read_shift(2);F[F.l];)Y[ee][1]+=String.fromCharCode(F[F.l]),F.l++;F.l++}}return Y}function ke(F,te){var Y=Bt(5+F.length);Y.write_shift(2,14e3),Y.write_shift(2,te);for(var ne=0;ne<F.length;++ne){var ee=F.charCodeAt(ne);Y[Y.l++]=ee>127?95:ee}return Y[Y.l++]=0,Y}var Le={0:{n:"BOF",f:Di},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:o},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:y},14:{n:"NUMBER",f:N},15:{n:"LABEL",f},16:{n:"FORMULA",f:k},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:ae},222:{n:"SHEETNAMELP",f:de},65535:{n:""}},fe={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:W},23:{n:"NUMBER17",f:U},24:{n:"NUMBER18",f:z},25:{n:"FORMULA19",f:q},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:Se},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:K},38:{n:"??"},39:{n:"NUMBER27",f:Q},40:{n:"FORMULA28",f:re},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:ae},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:he},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:n,book_to_wk3:a,to_workbook:t}})();function Gye(e){var t={},r=e.match(io),n=0,a=!1;if(r)for(;n!=r.length;++n){var s=Mn(r[n]);switch(s[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!s.val)break;case"<shadow>":case"<shadow/>":t.shadow=1;break;case"</shadow>":break;case"<charset":if(s.val=="1")break;t.cp=IC[parseInt(s.val,10)];break;case"<outline":if(!s.val)break;case"<outline>":case"<outline/>":t.outline=1;break;case"</outline>":break;case"<rFont":t.name=s.val;break;case"<sz":t.sz=s.val;break;case"<strike":if(!s.val)break;case"<strike>":case"<strike/>":t.strike=1;break;case"</strike>":break;case"<u":if(!s.val)break;switch(s.val){case"double":t.uval="double";break;case"singleAccounting":t.uval="single-accounting";break;case"doubleAccounting":t.uval="double-accounting";break}case"<u>":case"<u/>":t.u=1;break;case"</u>":break;case"<b":if(s.val=="0")break;case"<b>":case"<b/>":t.b=1;break;case"</b>":break;case"<i":if(s.val=="0")break;case"<i>":case"<i/>":t.i=1;break;case"</i>":break;case"<color":s.rgb&&(t.color=s.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":t.family=s.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":t.valign=s.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(s[0].charCodeAt(1)!==47&&!a)throw new Error("Unrecognized rich format "+s[0])}}return t}var Xye=(function(){var e=ub("t"),t=ub("rPr");function r(s){var l=s.match(e);if(!l)return{t:"s",v:""};var o={t:"s",v:Ea(l[1])},c=s.match(t);return c&&(o.s=Gye(c[1])),o}var n=/<(?:\w+:)?r>/g,a=/<\/(?:\w+:)?r>/;return function(l){return l.replace(n,"").split(a).map(r).filter(function(o){return o.v})}})(),Yye=(function(){var t=/(\r\n|\n)/g;function r(a,s,l){var o=[];a.u&&o.push("text-decoration: underline;"),a.uval&&o.push("text-underline-style:"+a.uval+";"),a.sz&&o.push("font-size:"+a.sz+"pt;"),a.outline&&o.push("text-effect: outline;"),a.shadow&&o.push("text-shadow: auto;"),s.push('<span style="'+o.join("")+'">'),a.b&&(s.push("<b>"),l.push("</b>")),a.i&&(s.push("<i>"),l.push("</i>")),a.strike&&(s.push("<s>"),l.push("</s>"));var c=a.valign||"";return c=="superscript"||c=="super"?c="sup":c=="subscript"&&(c="sub"),c!=""&&(s.push("<"+c+">"),l.push("</"+c+">")),l.push("</span>"),a}function n(a){var s=[[],a.v,[]];return a.v?(a.s&&r(a.s,s[0],s[2]),s[0].join("")+s[1].replace(t,"<br/>")+s[2].join("")):""}return function(s){return s.map(n).join("")}})(),Zye=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,Qye=/<(?:\w+:)?r>/,Jye=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function nA(e,t){var r=t?t.cellHTML:!0,n={};return e?(e.match(/^\s*<(?:\w+:)?t[^>]*>/)?(n.t=Ea(ss(e.slice(e.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),n.r=ss(e),r&&(n.h=HC(n.t))):e.match(Qye)&&(n.r=ss(e),n.t=Ea(ss((e.replace(Jye,"").match(Zye)||[]).join("").replace(io,""))),r&&(n.h=Yye(Xye(n.r)))),n):{t:""}}var ewe=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,twe=/<(?:\w+:)?(?:si|sstItem)>/g,rwe=/<\/(?:\w+:)?(?:si|sstItem)>/;function nwe(e,t){var r=[],n="";if(!e)return r;var a=e.match(ewe);if(a){n=a[2].replace(twe,"").split(rwe);for(var s=0;s!=n.length;++s){var l=nA(n[s].trim(),t);l!=null&&(r[r.length]=l)}a=Mn(a[1]),r.Count=a.count,r.Unique=a.uniqueCount}return r}var awe=/^\s|\s$|[\t\n\r]/;function F$(e,t){if(!t.bookSST)return"";var r=[Ci];r[r.length]=Sr("sst",null,{xmlns:Qm[0],count:e.Count,uniqueCount:e.Unique});for(var n=0;n!=e.length;++n)if(e[n]!=null){var a=e[n],s="<si>";a.r?s+=a.r:(s+="<t",a.t||(a.t=""),a.t.match(awe)&&(s+=' xml:space="preserve"'),s+=">"+Ya(a.t)+"</t>"),s+="</si>",r[r.length]=s}return r.length>2&&(r[r.length]="</sst>",r[1]=r[1].replace("/>",">")),r.join("")}function swe(e){return[e.read_shift(4),e.read_shift(4)]}function iwe(e,t){var r=[],n=!1;return ih(e,function(s,l,o){switch(o){case 159:r.Count=s[0],r.Unique=s[1];break;case 19:r.push(s);break;case 160:return!0;case 35:n=!0;break;case 36:n=!1;break;default:if(l.T,!n||t.WTF)throw new Error("Unexpected record 0x"+o.toString(16))}}),r}function lwe(e,t){return t||(t=Bt(8)),t.write_shift(4,e.Count),t.write_shift(4,e.Unique),t}var owe=bve;function cwe(e){var t=nc();or(t,159,lwe(e));for(var r=0;r<e.length;++r)or(t,19,owe(e[r]));return or(t,160),t.end()}function B$(e){for(var t=[],r=e.split(""),n=0;n<r.length;++n)t[n]=r[n].charCodeAt(0);return t}function U0(e,t){var r={};return r.Major=e.read_shift(2),r.Minor=e.read_shift(2),t>=4&&(e.l+=t-4),r}function dwe(e){var t={};return t.id=e.read_shift(0,"lpp4"),t.R=U0(e,4),t.U=U0(e,4),t.W=U0(e,4),t}function uwe(e){for(var t=e.read_shift(4),r=e.l+t-4,n={},a=e.read_shift(4),s=[];a-- >0;)s.push({t:e.read_shift(4),v:e.read_shift(0,"lpp4")});if(n.name=e.read_shift(0,"lpp4"),n.comps=s,e.l!=r)throw new Error("Bad DataSpaceMapEntry: "+e.l+" != "+r);return n}function hwe(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(uwe(e));return t}function fwe(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(e.read_shift(0,"lpp4"));return t}function mwe(e){var t={};return e.read_shift(4),e.l+=4,t.id=e.read_shift(0,"lpp4"),t.name=e.read_shift(0,"lpp4"),t.R=U0(e,4),t.U=U0(e,4),t.W=U0(e,4),t}function xwe(e){var t=mwe(e);if(t.ename=e.read_shift(0,"8lpp4"),t.blksz=e.read_shift(4),t.cmode=e.read_shift(4),e.read_shift(4)!=4)throw new Error("Bad !Primary record");return t}function U$(e,t){var r=e.l+t,n={};n.Flags=e.read_shift(4)&63,e.l+=4,n.AlgID=e.read_shift(4);var a=!1;switch(n.AlgID){case 26126:case 26127:case 26128:a=n.Flags==36;break;case 26625:a=n.Flags==4;break;case 0:a=n.Flags==16||n.Flags==4||n.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+n.AlgID}if(!a)throw new Error("Encryption Flags/AlgID mismatch");return n.AlgIDHash=e.read_shift(4),n.KeySize=e.read_shift(4),n.ProviderType=e.read_shift(4),e.l+=8,n.CSPName=e.read_shift(r-e.l>>1,"utf16le"),e.l=r,n}function z$(e,t){var r={},n=e.l+t;return e.l+=4,r.Salt=e.slice(e.l,e.l+16),e.l+=16,r.Verifier=e.slice(e.l,e.l+16),e.l+=16,e.read_shift(4),r.VerifierHash=e.slice(e.l,n),e.l=n,r}function pwe(e){var t=U0(e);switch(t.Minor){case 2:return[t.Minor,gwe(e)];case 3:return[t.Minor,bwe()];case 4:return[t.Minor,vwe(e)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+t.Minor)}function gwe(e){var t=e.read_shift(4);if((t&63)!=36)throw new Error("EncryptionInfo mismatch");var r=e.read_shift(4),n=U$(e,r),a=z$(e,e.length-e.l);return{t:"Std",h:n,v:a}}function bwe(){throw new Error("File is password-protected: ECMA-376 Extensible")}function vwe(e){var t=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];e.l+=4;var r=e.read_shift(e.length-e.l,"utf8"),n={};return r.replace(io,function(s){var l=Mn(s);switch(Wu(l[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":t.forEach(function(o){n[o]=l[o]});break;case"<dataIntegrity":n.encryptedHmacKey=l.encryptedHmacKey,n.encryptedHmacValue=l.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":n.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":n.uri=l.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":n.encs.push(l);break;default:throw l[0]}}),n}function ywe(e,t){var r={},n=r.EncryptionVersionInfo=U0(e,4);if(t-=4,n.Minor!=2)throw new Error("unrecognized minor version code: "+n.Minor);if(n.Major>4||n.Major<2)throw new Error("unrecognized major version code: "+n.Major);r.Flags=e.read_shift(4),t-=4;var a=e.read_shift(4);return t-=4,r.EncryptionHeader=U$(e,a),t-=a,r.EncryptionVerifier=z$(e,t),r}function wwe(e){var t={},r=t.EncryptionVersionInfo=U0(e,4);if(r.Major!=1||r.Minor!=1)throw"unrecognized version code "+r.Major+" : "+r.Minor;return t.Salt=e.read_shift(16),t.EncryptedVerifier=e.read_shift(16),t.EncryptedVerifierHash=e.read_shift(16),t}function aA(e){var t=0,r,n=B$(e),a=n.length+1,s,l,o,c,d;for(r=of(a),r[0]=n.length,s=1;s!=a;++s)r[s]=n[s-1];for(s=a-1;s>=0;--s)l=r[s],o=(t&16384)===0?0:1,c=t<<1&32767,d=o|c,t=d^l;return t^52811}var q$=(function(){var e=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],t=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],r=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],n=function(l){return(l/2|l*128)&255},a=function(l,o){return n(l^o)},s=function(l){for(var o=t[l.length-1],c=104,d=l.length-1;d>=0;--d)for(var f=l[d],p=0;p!=7;++p)f&64&&(o^=r[c]),f*=2,--c;return o};return function(l){for(var o=B$(l),c=s(o),d=o.length,f=of(16),p=0;p!=16;++p)f[p]=0;var y,g,N;for((d&1)===1&&(y=c>>8,f[d]=a(e[0],y),--d,y=c&255,g=o[o.length-1],f[d]=a(g,y));d>0;)--d,y=c>>8,f[d]=a(o[d],y),--d,y=c&255,f[d]=a(o[d],y);for(d=15,N=15-o.length;N>0;)y=c>>8,f[d]=a(e[N],y),--d,--N,y=c&255,f[d]=a(o[d],y),--d,--N;return f}})(),kwe=function(e,t,r,n,a){a||(a=t),n||(n=q$(e));var s,l;for(s=0;s!=t.length;++s)l=t[s],l^=n[r],l=(l>>5|l<<3)&255,a[s]=l,++r;return[a,r,n]},Nwe=function(e){var t=0,r=q$(e);return function(n){var a=kwe("",n,t,r);return t=a[1],a[0]}};function _we(e,t,r,n){var a={key:Di(e),verificationBytes:Di(e)};return r.password&&(a.verifier=aA(r.password)),n.valid=a.verificationBytes===a.verifier,n.valid&&(n.insitu=Nwe(r.password)),a}function Swe(e,t,r){var n=r||{};return n.Info=e.read_shift(2),e.l-=2,n.Info===1?n.Data=wwe(e):n.Data=ywe(e,t),n}function jwe(e,t,r){var n={Type:r.biff>=8?e.read_shift(2):0};return n.Type?Swe(e,t-2,n):_we(e,r.biff>=8?t:t-2,r,n),n}var H$=(function(){function e(a,s){switch(s.type){case"base64":return t(Pc(a),s);case"binary":return t(a,s);case"buffer":return t(ra&&Buffer.isBuffer(a)?a.toString("binary"):vf(a),s);case"array":return t(Um(a),s)}throw new Error("Unrecognized type "+s.type)}function t(a,s){var l=s||{},o=l.dense?[]:{},c=a.match(/\\trowd.*?\\row\b/g);if(!c.length)throw new Error("RTF missing table");var d={s:{c:0,r:0},e:{c:0,r:c.length-1}};return c.forEach(function(f,p){Array.isArray(o)&&(o[p]=[]);for(var y=/\\\w+\b/g,g=0,N,w=-1;N=y.exec(f);){switch(N[0]){case"\\cell":var k=f.slice(g,y.lastIndex-N[0].length);if(k[0]==" "&&(k=k.slice(1)),++w,k.length){var S={v:k,t:"s"};Array.isArray(o)?o[p][w]=S:o[Tn({r:p,c:w})]=S}break}g=y.lastIndex}w>d.e.c&&(d.e.c=w)}),o["!ref"]=Kn(d),o}function r(a,s){return yf(e(a,s),s)}function n(a){for(var s=["{\\rtf1\\ansi"],l=Ta(a["!ref"]),o,c=Array.isArray(a),d=l.s.r;d<=l.e.r;++d){s.push("\\trowd\\trautofit1");for(var f=l.s.c;f<=l.e.c;++f)s.push("\\cellx"+(f+1));for(s.push("\\pard\\intbl"),f=l.s.c;f<=l.e.c;++f){var p=Tn({r:d,c:f});o=c?(a[d]||[])[f]:a[p],!(!o||o.v==null&&(!o.f||o.F))&&(s.push(" "+(o.w||(Y0(o),o.w))),s.push("\\cell"))}s.push("\\pard\\intbl\\row")}return s.join("")+"}"}return{to_workbook:r,to_sheet:e,from_sheet:n}})();function Cwe(e){var t=e.slice(e[0]==="#"?1:0).slice(0,6);return[parseInt(t.slice(0,2),16),parseInt(t.slice(2,4),16),parseInt(t.slice(4,6),16)]}function xb(e){for(var t=0,r=1;t!=3;++t)r=r*256+(e[t]>255?255:e[t]<0?0:e[t]);return r.toString(16).toUpperCase().slice(1)}function Awe(e){var t=e[0]/255,r=e[1]/255,n=e[2]/255,a=Math.max(t,r,n),s=Math.min(t,r,n),l=a-s;if(l===0)return[0,0,t];var o=0,c=0,d=a+s;switch(c=l/(d>1?2-d:d),a){case t:o=((r-n)/l+6)%6;break;case r:o=(n-t)/l+2;break;case n:o=(t-r)/l+4;break}return[o/6,c,d/2]}function Ewe(e){var t=e[0],r=e[1],n=e[2],a=r*2*(n<.5?n:1-n),s=n-a/2,l=[s,s,s],o=6*t,c;if(r!==0)switch(o|0){case 0:case 6:c=a*o,l[0]+=a,l[1]+=c;break;case 1:c=a*(2-o),l[0]+=c,l[1]+=a;break;case 2:c=a*(o-2),l[1]+=a,l[2]+=c;break;case 3:c=a*(4-o),l[1]+=c,l[2]+=a;break;case 4:c=a*(o-4),l[2]+=a,l[0]+=c;break;case 5:c=a*(6-o),l[2]+=c,l[0]+=a;break}for(var d=0;d!=3;++d)l[d]=Math.round(l[d]*255);return l}function vw(e,t){if(t===0)return e;var r=Awe(Cwe(e));return t<0?r[2]=r[2]*(1+t):r[2]=1-(1-r[2])*(1-t),xb(Ewe(r))}var $$=6,Twe=15,Owe=1,to=$$;function pb(e){return Math.floor((e+Math.round(128/to)/256)*to)}function gb(e){return Math.floor((e-5)/to*100+.5)/100}function yw(e){return Math.round((e*to+5)/to*256)/256}function iN(e){return yw(gb(pb(e)))}function sA(e){var t=Math.abs(e-iN(e)),r=to;if(t>.005)for(to=Owe;to<Twe;++to)Math.abs(e-iN(e))<=t&&(t=Math.abs(e-iN(e)),r=to);to=r}function cf(e){e.width?(e.wpx=pb(e.width),e.wch=gb(e.wpx),e.MDW=to):e.wpx?(e.wch=gb(e.wpx),e.width=yw(e.wch),e.MDW=to):typeof e.wch=="number"&&(e.width=yw(e.wch),e.wpx=pb(e.width),e.MDW=to),e.customWidth&&delete e.customWidth}var Pwe=96,V$=Pwe;function bb(e){return e*96/V$}function G1(e){return e*V$/96}var Iwe={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function Dwe(e,t,r,n){t.Borders=[];var a={},s=!1;(e[0].match(io)||[]).forEach(function(l){var o=Mn(l);switch(Wu(o[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":a={},o.diagonalUp&&(a.diagonalUp=js(o.diagonalUp)),o.diagonalDown&&(a.diagonalDown=js(o.diagonalDown)),t.Borders.push(a);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+o[0]+" in borders")}})}function Mwe(e,t,r,n){t.Fills=[];var a={},s=!1;(e[0].match(io)||[]).forEach(function(l){var o=Mn(l);switch(Wu(o[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":a={},t.Fills.push(a);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":t.Fills.push(a),a={};break;case"<patternFill":case"<patternFill>":o.patternType&&(a.patternType=o.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":a.bgColor||(a.bgColor={}),o.indexed&&(a.bgColor.indexed=parseInt(o.indexed,10)),o.theme&&(a.bgColor.theme=parseInt(o.theme,10)),o.tint&&(a.bgColor.tint=parseFloat(o.tint)),o.rgb&&(a.bgColor.rgb=o.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":a.fgColor||(a.fgColor={}),o.theme&&(a.fgColor.theme=parseInt(o.theme,10)),o.tint&&(a.fgColor.tint=parseFloat(o.tint)),o.rgb!=null&&(a.fgColor.rgb=o.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+o[0]+" in fills")}})}function Lwe(e,t,r,n){t.Fonts=[];var a={},s=!1;(e[0].match(io)||[]).forEach(function(l){var o=Mn(l);switch(Wu(o[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":t.Fonts.push(a),a={};break;case"<name":o.val&&(a.name=ss(o.val));break;case"<name/>":case"</name>":break;case"<b":a.bold=o.val?js(o.val):1;break;case"<b/>":a.bold=1;break;case"<i":a.italic=o.val?js(o.val):1;break;case"<i/>":a.italic=1;break;case"<u":switch(o.val){case"none":a.underline=0;break;case"single":a.underline=1;break;case"double":a.underline=2;break;case"singleAccounting":a.underline=33;break;case"doubleAccounting":a.underline=34;break}break;case"<u/>":a.underline=1;break;case"<strike":a.strike=o.val?js(o.val):1;break;case"<strike/>":a.strike=1;break;case"<outline":a.outline=o.val?js(o.val):1;break;case"<outline/>":a.outline=1;break;case"<shadow":a.shadow=o.val?js(o.val):1;break;case"<shadow/>":a.shadow=1;break;case"<condense":a.condense=o.val?js(o.val):1;break;case"<condense/>":a.condense=1;break;case"<extend":a.extend=o.val?js(o.val):1;break;case"<extend/>":a.extend=1;break;case"<sz":o.val&&(a.sz=+o.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":o.val&&(a.vertAlign=o.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":o.val&&(a.family=parseInt(o.val,10));break;case"<family/>":case"</family>":break;case"<scheme":o.val&&(a.scheme=o.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(o.val=="1")break;o.codepage=IC[parseInt(o.val,10)];break;case"<color":if(a.color||(a.color={}),o.auto&&(a.color.auto=js(o.auto)),o.rgb)a.color.rgb=o.rgb.slice(-6);else if(o.indexed){a.color.index=parseInt(o.indexed,10);var c=gm[a.color.index];a.color.index==81&&(c=gm[1]),c||(c=gm[1]),a.color.rgb=c[0].toString(16)+c[1].toString(16)+c[2].toString(16)}else o.theme&&(a.color.theme=parseInt(o.theme,10),o.tint&&(a.color.tint=parseFloat(o.tint)),o.theme&&r.themeElements&&r.themeElements.clrScheme&&(a.color.rgb=vw(r.themeElements.clrScheme[a.color.theme].rgb,a.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":s=!0;break;case"</AlternateContent>":s=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+o[0]+" in fonts")}})}function Rwe(e,t,r){t.NumberFmt=[];for(var n=ui(En),a=0;a<n.length;++a)t.NumberFmt[n[a]]=En[n[a]];var s=e[0].match(io);if(s)for(a=0;a<s.length;++a){var l=Mn(s[a]);switch(Wu(l[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var o=Ea(ss(l.formatCode)),c=parseInt(l.numFmtId,10);if(t.NumberFmt[c]=o,c>0){if(c>392){for(c=392;c>60&&t.NumberFmt[c]!=null;--c);t.NumberFmt[c]=o}B0(o,c)}}break;case"</numFmt>":break;default:if(r.WTF)throw new Error("unrecognized "+l[0]+" in numFmts")}}}function Fwe(e){var t=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var n=r[0];n<=r[1];++n)e[n]!=null&&(t[t.length]=Sr("numFmt",null,{numFmtId:n,formatCode:Ya(e[n])}))}),t.length===1?"":(t[t.length]="</numFmts>",t[0]=Sr("numFmts",null,{count:t.length-2}).replace("/>",">"),t.join(""))}var F2=["numFmtId","fillId","fontId","borderId","xfId"],B2=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function Bwe(e,t,r){t.CellXf=[];var n,a=!1;(e[0].match(io)||[]).forEach(function(s){var l=Mn(s),o=0;switch(Wu(l[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(n=l,delete n[0],o=0;o<F2.length;++o)n[F2[o]]&&(n[F2[o]]=parseInt(n[F2[o]],10));for(o=0;o<B2.length;++o)n[B2[o]]&&(n[B2[o]]=js(n[B2[o]]));if(t.NumberFmt&&n.numFmtId>392){for(o=392;o>60;--o)if(t.NumberFmt[n.numFmtId]==t.NumberFmt[o]){n.numFmtId=o;break}}t.CellXf.push(n);break;case"</xf>":break;case"<alignment":case"<alignment/>":var c={};l.vertical&&(c.vertical=l.vertical),l.horizontal&&(c.horizontal=l.horizontal),l.textRotation!=null&&(c.textRotation=l.textRotation),l.indent&&(c.indent=l.indent),l.wrapText&&(c.wrapText=js(l.wrapText)),n.alignment=c;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":a=!0;break;case"</AlternateContent>":a=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(r&&r.WTF&&!a)throw new Error("unrecognized "+l[0]+" in cellXfs")}})}function Uwe(e){var t=[];return t[t.length]=Sr("cellXfs",null),e.forEach(function(r){t[t.length]=Sr("xf",null,r)}),t[t.length]="</cellXfs>",t.length===2?"":(t[0]=Sr("cellXfs",null,{count:t.length-2}).replace("/>",">"),t.join(""))}var zwe=(function(){var t=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,r=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,n=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,a=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,s=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(o,c,d){var f={};if(!o)return f;o=o.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var p;return(p=o.match(t))&&Rwe(p,f,d),(p=o.match(a))&&Lwe(p,f,c,d),(p=o.match(n))&&Mwe(p,f,c,d),(p=o.match(s))&&Dwe(p,f,c,d),(p=o.match(r))&&Bwe(p,f,d),f}})();function W$(e,t){var r=[Ci,Sr("styleSheet",null,{xmlns:Qm[0],"xmlns:vt":Ki.vt})],n;return e.SSF&&(n=Fwe(e.SSF))!=null&&(r[r.length]=n),r[r.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',r[r.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',r[r.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',r[r.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(n=Uwe(t.cellXfs))&&(r[r.length]=n),r[r.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',r[r.length]='<dxfs count="0"/>',r[r.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',r.length>2&&(r[r.length]="</styleSheet>",r[1]=r[1].replace("/>",">")),r.join("")}function qwe(e,t){var r=e.read_shift(2),n=ao(e);return[r,n]}function Hwe(e,t,r){r||(r=Bt(6+4*t.length)),r.write_shift(2,e),vl(t,r);var n=r.length>r.l?r.slice(0,r.l):r;return r.l==null&&(r.l=r.length),n}function $we(e,t,r){var n={};n.sz=e.read_shift(2)/20;var a=Sve(e);a.fItalic&&(n.italic=1),a.fCondense&&(n.condense=1),a.fExtend&&(n.extend=1),a.fShadow&&(n.shadow=1),a.fOutline&&(n.outline=1),a.fStrikeout&&(n.strike=1);var s=e.read_shift(2);switch(s===700&&(n.bold=1),e.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript";break}var l=e.read_shift(1);l!=0&&(n.underline=l);var o=e.read_shift(1);o>0&&(n.family=o);var c=e.read_shift(1);switch(c>0&&(n.charset=c),e.l++,n.color=_ve(e),e.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor";break}return n.name=ao(e),n}function Vwe(e,t){t||(t=Bt(153)),t.write_shift(2,e.sz*20),jve(e,t),t.write_shift(2,e.bold?700:400);var r=0;e.vertAlign=="superscript"?r=1:e.vertAlign=="subscript"&&(r=2),t.write_shift(2,r),t.write_shift(1,e.underline||0),t.write_shift(1,e.family||0),t.write_shift(1,e.charset||0),t.write_shift(1,0),pw(e.color,t);var n=0;return n=2,t.write_shift(1,n),vl(e.name,t),t.length>t.l?t.slice(0,t.l):t}var Wwe=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],lN,Kwe=so;function mD(e,t){t||(t=Bt(84)),lN||(lN=Dk(Wwe));var r=lN[e.patternType];r==null&&(r=40),t.write_shift(4,r);var n=0;if(r!=40)for(pw({auto:1},t),pw({auto:1},t);n<12;++n)t.write_shift(4,0);else{for(;n<4;++n)t.write_shift(4,0);for(;n<12;++n)t.write_shift(4,0)}return t.length>t.l?t.slice(0,t.l):t}function Gwe(e,t){var r=e.l+t,n=e.read_shift(2),a=e.read_shift(2);return e.l=r,{ixfe:n,numFmtId:a}}function K$(e,t,r){r||(r=Bt(16)),r.write_shift(2,t||0),r.write_shift(2,e.numFmtId||0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(1,0),r.write_shift(1,0);var n=0;return r.write_shift(1,n),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r}function ug(e,t){return t||(t=Bt(10)),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(4,0),t.write_shift(4,0),t}var Xwe=so;function Ywe(e,t){return t||(t=Bt(51)),t.write_shift(1,0),ug(null,t),ug(null,t),ug(null,t),ug(null,t),ug(null,t),t.length>t.l?t.slice(0,t.l):t}function Zwe(e,t){return t||(t=Bt(52)),t.write_shift(4,e.xfId),t.write_shift(2,1),t.write_shift(1,0),t.write_shift(1,0),xw(e.name||"",t),t.length>t.l?t.slice(0,t.l):t}function Qwe(e,t,r){var n=Bt(2052);return n.write_shift(4,e),xw(t,n),xw(r,n),n.length>n.l?n.slice(0,n.l):n}function Jwe(e,t,r){var n={};n.NumberFmt=[];for(var a in En)n.NumberFmt[a]=En[a];n.CellXf=[],n.Fonts=[];var s=[],l=!1;return ih(e,function(c,d,f){switch(f){case 44:n.NumberFmt[c[0]]=c[1],B0(c[1],c[0]);break;case 43:n.Fonts.push(c),c.color.theme!=null&&t&&t.themeElements&&t.themeElements.clrScheme&&(c.color.rgb=vw(t.themeElements.clrScheme[c.color.theme].rgb,c.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:s[s.length-1]==617&&n.CellXf.push(c);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:l=!0;break;case 36:l=!1;break;case 37:s.push(f),l=!0;break;case 38:s.pop(),l=!1;break;default:if(d.T>0)s.push(f);else if(d.T<0)s.pop();else if(!l||r.WTF&&s[s.length-1]!=37)throw new Error("Unexpected record 0x"+f.toString(16))}}),n}function eke(e,t){if(t){var r=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)t[a]!=null&&++r}),r!=0&&(or(e,615,eu(r)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)t[a]!=null&&or(e,44,Hwe(a,t[a]))}),or(e,616))}}function tke(e){var t=1;or(e,611,eu(t)),or(e,43,Vwe({sz:12,color:{theme:1},name:"Calibri",family:2})),or(e,612)}function rke(e){var t=2;or(e,603,eu(t)),or(e,45,mD({patternType:"none"})),or(e,45,mD({patternType:"gray125"})),or(e,604)}function nke(e){var t=1;or(e,613,eu(t)),or(e,46,Ywe()),or(e,614)}function ake(e){var t=1;or(e,626,eu(t)),or(e,47,K$({numFmtId:0},65535)),or(e,627)}function ske(e,t){or(e,617,eu(t.length)),t.forEach(function(r){or(e,47,K$(r,0))}),or(e,618)}function ike(e){var t=1;or(e,619,eu(t)),or(e,48,Zwe({xfId:0,name:"Normal"})),or(e,620)}function lke(e){var t=0;or(e,505,eu(t)),or(e,506)}function oke(e){var t=0;or(e,508,Qwe(t,"TableStyleMedium9","PivotStyleMedium4")),or(e,509)}function cke(e,t){var r=nc();return or(r,278),eke(r,e.SSF),tke(r),rke(r),nke(r),ake(r),ske(r,t.cellXfs),ike(r),lke(r),oke(r),or(r,279),r.end()}var dke=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function uke(e,t,r){t.themeElements.clrScheme=[];var n={};(e[0].match(io)||[]).forEach(function(a){var s=Mn(a);switch(s[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":n.rgb=s.val;break;case"<a:sysClr":n.rgb=s.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":s[0].charAt(1)==="/"?(t.themeElements.clrScheme[dke.indexOf(s[0])]=n,n={}):n.name=s[0].slice(3,s[0].length-1);break;default:if(r&&r.WTF)throw new Error("Unrecognized "+s[0]+" in clrScheme")}})}function hke(){}function fke(){}var mke=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,xke=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,pke=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function gke(e,t,r){t.themeElements={};var n;[["clrScheme",mke,uke],["fontScheme",xke,hke],["fmtScheme",pke,fke]].forEach(function(a){if(!(n=e.match(a[1])))throw new Error(a[0]+" not found in themeElements");a[2](n,t,r)})}var bke=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function G$(e,t){(!e||e.length===0)&&(e=iA());var r,n={};if(!(r=e.match(bke)))throw new Error("themeElements not found in theme");return gke(r[0],n,t),n.raw=e,n}function iA(e,t){if(t&&t.themeXLSX)return t.themeXLSX;if(e&&typeof e.raw=="string")return e.raw;var r=[Ci];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function vke(e,t,r){var n=e.l+t,a=e.read_shift(4);if(a!==124226){if(!r.cellStyles){e.l=n;return}var s=e.slice(e.l);e.l=n;var l;try{l=UH(s,{type:"array"})}catch{return}var o=jc(l,"theme/theme/theme1.xml",!0);if(o)return G$(o,r)}}function yke(e){return e.read_shift(4)}function wke(e){var t={};switch(t.xclrType=e.read_shift(2),t.nTintShade=e.read_shift(2),t.xclrType){case 0:e.l+=4;break;case 1:t.xclrValue=kke(e,4);break;case 2:t.xclrValue=C$(e);break;case 3:t.xclrValue=yke(e);break;case 4:e.l+=4;break}return e.l+=8,t}function kke(e,t){return so(e,t)}function Nke(e,t){return so(e,t)}function _ke(e){var t=e.read_shift(2),r=e.read_shift(2)-4,n=[t];switch(t){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:n[1]=wke(e);break;case 6:n[1]=Nke(e,r);break;case 14:case 15:n[1]=e.read_shift(r===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+t+" "+r)}return n}function Ske(e,t){var r=e.l+t;e.l+=2;var n=e.read_shift(2);e.l+=2;for(var a=e.read_shift(2),s=[];a-- >0;)s.push(_ke(e,r-e.l));return{ixfe:n,ext:s}}function jke(e,t){t.forEach(function(r){r[0]})}function Cke(e,t){return{flags:e.read_shift(4),version:e.read_shift(4),name:ao(e)}}function Ake(e){var t=Bt(12+2*e.name.length);return t.write_shift(4,e.flags),t.write_shift(4,e.version),vl(e.name,t),t.slice(0,t.l)}function Eke(e){for(var t=[],r=e.read_shift(4);r-- >0;)t.push([e.read_shift(4),e.read_shift(4)]);return t}function Tke(e){var t=Bt(4+8*e.length);t.write_shift(4,e.length);for(var r=0;r<e.length;++r)t.write_shift(4,e[r][0]),t.write_shift(4,e[r][1]);return t}function Oke(e,t){var r=Bt(8+2*t.length);return r.write_shift(4,e),vl(t,r),r.slice(0,r.l)}function Pke(e){return e.l+=4,e.read_shift(4)!=0}function Ike(e,t){var r=Bt(8);return r.write_shift(4,e),r.write_shift(4,1),r}function Dke(e,t,r){var n={Types:[],Cell:[],Value:[]},a=r||{},s=[],l=!1,o=2;return ih(e,function(c,d,f){switch(f){case 335:n.Types.push({name:c.name});break;case 51:c.forEach(function(p){o==1?n.Cell.push({type:n.Types[p[0]-1].name,index:p[1]}):o==0&&n.Value.push({type:n.Types[p[0]-1].name,index:p[1]})});break;case 337:o=c?1:0;break;case 338:o=2;break;case 35:s.push(f),l=!0;break;case 36:s.pop(),l=!1;break;default:if(!d.T){if(!l||a.WTF&&s[s.length-1]!=35)throw new Error("Unexpected record 0x"+f.toString(16))}}}),n}function Mke(){var e=nc();return or(e,332),or(e,334,eu(1)),or(e,335,Ake({name:"XLDAPR",version:12e4,flags:3496657072})),or(e,336),or(e,339,Oke(1,"XLDAPR")),or(e,52),or(e,35,eu(514)),or(e,4096,eu(0)),or(e,4097,sd(1)),or(e,36),or(e,53),or(e,340),or(e,337,Ike(1)),or(e,51,Tke([[1,0]])),or(e,338),or(e,333),e.end()}function Lke(e,t,r){var n={Types:[],Cell:[],Value:[]};if(!e)return n;var a=!1,s=2,l;return e.replace(io,function(o){var c=Mn(o);switch(Wu(c[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":n.Types.push({name:c.name});break;case"</metadataType>":break;case"<futureMetadata":for(var d=0;d<n.Types.length;++d)n.Types[d].name==c.name&&(l=n.Types[d]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":s==1?n.Cell.push({type:n.Types[c.t-1].name,index:+c.v}):s==0&&n.Value.push({type:n.Types[c.t-1].name,index:+c.v});break;case"</rc>":break;case"<cellMetadata":s=1;break;case"</cellMetadata>":s=2;break;case"<valueMetadata":s=0;break;case"</valueMetadata>":s=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;case"<rvb":if(!l)break;l.offsets||(l.offsets=[]),l.offsets.push(+c.i);break;default:if(!a&&r.WTF)throw new Error("unrecognized "+c[0]+" in metadata")}return o}),n}function X$(){var e=[Ci];return e.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),e.join("")}function Rke(e){var t=[];if(!e)return t;var r=1;return(e.match(io)||[]).forEach(function(n){var a=Mn(n);switch(a[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete a[0],a.i?r=a.i:a.i=r,t.push(a);break}}),t}function Fke(e){var t={};t.i=e.read_shift(4);var r={};r.r=e.read_shift(4),r.c=e.read_shift(4),t.r=Tn(r);var n=e.read_shift(1);return n&2&&(t.l="1"),n&8&&(t.a="1"),t}function Bke(e,t,r){var n=[];return ih(e,function(s,l,o){switch(o){case 63:n.push(s);break;default:if(!l.T)throw new Error("Unexpected record 0x"+o.toString(16))}}),n}function Uke(e,t,r,n){if(!e)return e;var a=n||{},s=!1;ih(e,function(o,c,d){switch(d){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:s=!0;break;case 36:s=!1;break;default:if(!c.T){if(!s||a.WTF)throw new Error("Unexpected record 0x"+d.toString(16))}}},a)}function zke(e,t){if(!e)return"??";var r=(e.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return t["!id"][r].Target}var i1=1024;function Y$(e,t){for(var r=[21600,21600],n=["m0,0l0",r[1],r[0],r[1],r[0],"0xe"].join(","),a=[Sr("xml",null,{"xmlns:v":yc.v,"xmlns:o":yc.o,"xmlns:x":yc.x,"xmlns:mv":yc.mv}).replace(/\/>/,">"),Sr("o:shapelayout",Sr("o:idmap",null,{"v:ext":"edit",data:e}),{"v:ext":"edit"}),Sr("v:shapetype",[Sr("v:stroke",null,{joinstyle:"miter"}),Sr("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:r.join(","),path:n})];i1<e*1e3;)i1+=1e3;return t.forEach(function(s){var l=Gs(s[0]),o={color2:"#BEFF82",type:"gradient"};o.type=="gradient"&&(o.angle="-180");var c=o.type=="gradient"?Sr("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,d=Sr("v:fill",c,o),f={on:"t",obscured:"t"};++i1,a=a.concat(["<v:shape"+hb({id:"_x0000_s"+i1,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(s[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",d,Sr("v:shadow",null,f),Sr("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",Dl("x:Anchor",[l.c+1,0,l.r+1,0,l.c+3,20,l.r+5,20].join(",")),Dl("x:AutoFill","False"),Dl("x:Row",String(l.r)),Dl("x:Column",String(l.c)),s[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),a.push("</xml>"),a.join("")}function xD(e,t,r,n){var a=Array.isArray(e),s;t.forEach(function(l){var o=Gs(l.ref);if(a?(e[o.r]||(e[o.r]=[]),s=e[o.r][o.c]):s=e[l.ref],!s){s={t:"z"},a?e[o.r][o.c]=s:e[l.ref]=s;var c=Ta(e["!ref"]||"BDWGO1000001:A1");c.s.r>o.r&&(c.s.r=o.r),c.e.r<o.r&&(c.e.r=o.r),c.s.c>o.c&&(c.s.c=o.c),c.e.c<o.c&&(c.e.c=o.c);var d=Kn(c);d!==e["!ref"]&&(e["!ref"]=d)}s.c||(s.c=[]);var f={a:l.author,t:l.t,r:l.r,T:r};l.h&&(f.h=l.h);for(var p=s.c.length-1;p>=0;--p){if(!r&&s.c[p].T)return;r&&!s.c[p].T&&s.c.splice(p,1)}if(r&&n){for(p=0;p<n.length;++p)if(f.a==n[p].id){f.a=n[p].name||f.a;break}}s.c.push(f)})}function qke(e,t){if(e.match(/<(?:\w+:)?comments *\/>/))return[];var r=[],n=[],a=e.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);a&&a[1]&&a[1].split(/<\/\w*:?author>/).forEach(function(l){if(!(l===""||l.trim()==="")){var o=l.match(/<(?:\w+:)?author[^>]*>(.*)/);o&&r.push(o[1])}});var s=e.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return s&&s[1]&&s[1].split(/<\/\w*:?comment>/).forEach(function(l){if(!(l===""||l.trim()==="")){var o=l.match(/<(?:\w+:)?comment[^>]*>/);if(o){var c=Mn(o[0]),d={author:c.authorId&&r[c.authorId]||"sheetjsghost",ref:c.ref,guid:c.guid},f=Gs(c.ref);if(!(t.sheetRows&&t.sheetRows<=f.r)){var p=l.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),y=!!p&&!!p[1]&&nA(p[1])||{r:"",t:"",h:""};d.r=y.r,y.r=="<t></t>"&&(y.t=y.h=""),d.t=(y.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.cellHTML&&(d.h=y.h),n.push(d)}}}}),n}function Z$(e){var t=[Ci,Sr("comments",null,{xmlns:Qm[0]})],r=[];return t.push("<authors>"),e.forEach(function(n){n[1].forEach(function(a){var s=Ya(a.a);r.indexOf(s)==-1&&(r.push(s),t.push("<author>"+s+"</author>")),a.T&&a.ID&&r.indexOf("tc="+a.ID)==-1&&(r.push("tc="+a.ID),t.push("<author>tc="+a.ID+"</author>"))})}),r.length==0&&(r.push("SheetJ5"),t.push("<author>SheetJ5</author>")),t.push("</authors>"),t.push("<commentList>"),e.forEach(function(n){var a=0,s=[];if(n[1][0]&&n[1][0].T&&n[1][0].ID?a=r.indexOf("tc="+n[1][0].ID):n[1].forEach(function(c){c.a&&(a=r.indexOf(Ya(c.a))),s.push(c.t||"")}),t.push('<comment ref="'+n[0]+'" authorId="'+a+'"><text>'),s.length<=1)t.push(Dl("t",Ya(s[0]||"")));else{for(var l=`Comment:
    `+s[0]+`
`,o=1;o<s.length;++o)l+=`Reply:
    `+s[o]+`
`;t.push(Dl("t",Ya(l)))}t.push("</text></comment>")}),t.push("</commentList>"),t.length>2&&(t[t.length]="</comments>",t[1]=t[1].replace("/>",">")),t.join("")}function Hke(e,t){var r=[],n=!1,a={},s=0;return e.replace(io,function(o,c){var d=Mn(o);switch(Wu(d[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":a={author:d.personId,guid:d.id,ref:d.ref,T:1};break;case"</threadedComment>":a.t!=null&&r.push(a);break;case"<text>":case"<text":s=c+o.length;break;case"</text>":a.t=e.slice(s,c).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":n=!0;break;case"</mentions>":n=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&t.WTF)throw new Error("unrecognized "+d[0]+" in threaded comments")}return o}),r}function $ke(e,t,r){var n=[Ci,Sr("ThreadedComments",null,{xmlns:Ki.TCMNT}).replace(/[\/]>/,">")];return e.forEach(function(a){var s="";(a[1]||[]).forEach(function(l,o){if(!l.T){delete l.ID;return}l.a&&t.indexOf(l.a)==-1&&t.push(l.a);var c={ref:a[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+r.tcid++).slice(-12)+"}"};o==0?s=c.id:c.parentId=s,l.ID=c.id,l.a&&(c.personId="{54EE7950-7262-4200-6969-"+("000000000000"+t.indexOf(l.a)).slice(-12)+"}"),n.push(Sr("threadedComment",Dl("text",l.t||""),c))})}),n.push("</ThreadedComments>"),n.join("")}function Vke(e,t){var r=[],n=!1;return e.replace(io,function(s){var l=Mn(s);switch(Wu(l[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":r.push({name:l.displayname,id:l.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&t.WTF)throw new Error("unrecognized "+l[0]+" in threaded comments")}return s}),r}function Wke(e){var t=[Ci,Sr("personList",null,{xmlns:Ki.TCMNT,"xmlns:x":Qm[0]}).replace(/[\/]>/,">")];return e.forEach(function(r,n){t.push(Sr("person",null,{displayName:r,id:"{54EE7950-7262-4200-6969-"+("000000000000"+n).slice(-12)+"}",userId:r,providerId:"None"}))}),t.push("</personList>"),t.join("")}function Kke(e){var t={};t.iauthor=e.read_shift(4);var r=rx(e);return t.rfx=r.s,t.ref=Tn(r.s),e.l+=16,t}function Gke(e,t){return t==null&&(t=Bt(36)),t.write_shift(4,e[1].iauthor),bp(e[0],t),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t}var Xke=ao;function Yke(e){return vl(e.slice(0,54))}function Zke(e,t){var r=[],n=[],a={},s=!1;return ih(e,function(o,c,d){switch(d){case 632:n.push(o);break;case 635:a=o;break;case 637:a.t=o.t,a.h=o.h,a.r=o.r;break;case 636:if(a.author=n[a.iauthor],delete a.iauthor,t.sheetRows&&a.rfx&&t.sheetRows<=a.rfx.r)break;a.t||(a.t=""),delete a.rfx,r.push(a);break;case 3072:break;case 35:s=!0;break;case 36:s=!1;break;case 37:break;case 38:break;default:if(!c.T){if(!s||t.WTF)throw new Error("Unexpected record 0x"+d.toString(16))}}}),r}function Qke(e){var t=nc(),r=[];return or(t,628),or(t,630),e.forEach(function(n){n[1].forEach(function(a){r.indexOf(a.a)>-1||(r.push(a.a.slice(0,54)),or(t,632,Yke(a.a)))})}),or(t,631),or(t,633),e.forEach(function(n){n[1].forEach(function(a){a.iauthor=r.indexOf(a.a);var s={s:Gs(n[0]),e:Gs(n[0])};or(t,635,Gke([s,a])),a.t&&a.t.length>0&&or(t,637,yve(a)),or(t,636),delete a.iauthor})}),or(t,634),or(t,629),t.end()}var Jke="application/vnd.ms-office.vbaProject";function e5e(e){var t=vn.utils.cfb_new({root:"R"});return e.FullPaths.forEach(function(r,n){if(!(r.slice(-1)==="/"||!r.match(/_VBA_PROJECT_CUR/))){var a=r.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");vn.utils.cfb_add(t,a,e.FileIndex[n].content)}}),vn.write(t)}function t5e(e,t){t.FullPaths.forEach(function(r,n){if(n!=0){var a=r.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");a.slice(-1)!=="/"&&vn.utils.cfb_add(e,a,t.FileIndex[n].content)}})}var Q$=["xlsb","xlsm","xlam","biff8","xla"];function r5e(){return{"!type":"dialog"}}function n5e(){return{"!type":"dialog"}}function a5e(){return{"!type":"macro"}}function s5e(){return{"!type":"macro"}}var g1=(function(){var e=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,t={r:0,c:0};function r(n,a,s,l){var o=!1,c=!1;s.length==0?c=!0:s.charAt(0)=="["&&(c=!0,s=s.slice(1,-1)),l.length==0?o=!0:l.charAt(0)=="["&&(o=!0,l=l.slice(1,-1));var d=s.length>0?parseInt(s,10)|0:0,f=l.length>0?parseInt(l,10)|0:0;return o?f+=t.c:--f,c?d+=t.r:--d,a+(o?"":"$")+Ks(f)+(c?"":"$")+ji(d)}return function(a,s){return t=s,a.replace(e,r)}})(),lA=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,oA=(function(){return function(t,r){return t.replace(lA,function(n,a,s,l,o,c){var d=GC(l)-(s?0:r.c),f=KC(c)-(o?0:r.r),p=f==0?"":o?f+1:"["+f+"]",y=d==0?"":s?d+1:"["+d+"]";return a+"R"+p+"C"+y})}})();function J$(e,t){return e.replace(lA,function(r,n,a,s,l,o){return n+(a=="$"?a+s:Ks(GC(s)+t.c))+(l=="$"?l+o:ji(KC(o)+t.r))})}function i5e(e,t,r){var n=ac(t),a=n.s,s=Gs(r),l={r:s.r-a.r,c:s.c-a.c};return J$(e,l)}function l5e(e){return e.length!=1}function pD(e){return e.replace(/_xlfn\./g,"")}function Pi(e){e.l+=1}function df(e,t){var r=e.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function eV(e,t,r){var n=2;if(r){if(r.biff>=2&&r.biff<=5)return tV(e);r.biff==12&&(n=4)}var a=e.read_shift(n),s=e.read_shift(n),l=df(e),o=df(e);return{s:{r:a,c:l[0],cRel:l[1],rRel:l[2]},e:{r:s,c:o[0],cRel:o[1],rRel:o[2]}}}function tV(e){var t=df(e),r=df(e),n=e.read_shift(1),a=e.read_shift(1);return{s:{r:t[0],c:n,cRel:t[1],rRel:t[2]},e:{r:r[0],c:a,cRel:r[1],rRel:r[2]}}}function o5e(e,t,r){if(r.biff<8)return tV(e);var n=e.read_shift(r.biff==12?4:2),a=e.read_shift(r.biff==12?4:2),s=df(e),l=df(e);return{s:{r:n,c:s[0],cRel:s[1],rRel:s[2]},e:{r:a,c:l[0],cRel:l[1],rRel:l[2]}}}function rV(e,t,r){if(r&&r.biff>=2&&r.biff<=5)return c5e(e);var n=e.read_shift(r&&r.biff==12?4:2),a=df(e);return{r:n,c:a[0],cRel:a[1],rRel:a[2]}}function c5e(e){var t=df(e),r=e.read_shift(1);return{r:t[0],c:r,cRel:t[1],rRel:t[2]}}function d5e(e){var t=e.read_shift(2),r=e.read_shift(2);return{r:t,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function u5e(e,t,r){var n=r&&r.biff?r.biff:8;if(n>=2&&n<=5)return h5e(e);var a=e.read_shift(n>=12?4:2),s=e.read_shift(2),l=(s&16384)>>14,o=(s&32768)>>15;if(s&=16383,o==1)for(;a>524287;)a-=1048576;if(l==1)for(;s>8191;)s=s-16384;return{r:a,c:s,cRel:l,rRel:o}}function h5e(e){var t=e.read_shift(2),r=e.read_shift(1),n=(t&32768)>>15,a=(t&16384)>>14;return t&=16383,n==1&&t>=8192&&(t=t-16384),a==1&&r>=128&&(r=r-256),{r:t,c:r,cRel:a,rRel:n}}function f5e(e,t,r){var n=(e[e.l++]&96)>>5,a=eV(e,r.biff>=2&&r.biff<=5?6:8,r);return[n,a]}function m5e(e,t,r){var n=(e[e.l++]&96)>>5,a=e.read_shift(2,"i"),s=8;if(r)switch(r.biff){case 5:e.l+=12,s=6;break;case 12:s=12;break}var l=eV(e,s,r);return[n,a,l]}function x5e(e,t,r){var n=(e[e.l++]&96)>>5;return e.l+=r&&r.biff>8?12:r.biff<8?6:8,[n]}function p5e(e,t,r){var n=(e[e.l++]&96)>>5,a=e.read_shift(2),s=8;if(r)switch(r.biff){case 5:e.l+=12,s=6;break;case 12:s=12;break}return e.l+=s,[n,a]}function g5e(e,t,r){var n=(e[e.l++]&96)>>5,a=o5e(e,t-1,r);return[n,a]}function b5e(e,t,r){var n=(e[e.l++]&96)>>5;return e.l+=r.biff==2?6:r.biff==12?14:7,[n]}function gD(e){var t=e[e.l+1]&1,r=1;return e.l+=4,[t,r]}function v5e(e,t,r){e.l+=2;for(var n=e.read_shift(r&&r.biff==2?1:2),a=[],s=0;s<=n;++s)a.push(e.read_shift(r&&r.biff==2?1:2));return a}function y5e(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=2,[n,e.read_shift(r&&r.biff==2?1:2)]}function w5e(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=2,[n,e.read_shift(r&&r.biff==2?1:2)]}function k5e(e){var t=e[e.l+1]&255?1:0;return e.l+=2,[t,e.read_shift(2)]}function N5e(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=r&&r.biff==2?3:4,[n]}function nV(e){var t=e.read_shift(1),r=e.read_shift(1);return[t,r]}function _5e(e){return e.read_shift(2),nV(e)}function S5e(e){return e.read_shift(2),nV(e)}function j5e(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=rV(e,0,r);return[n,a]}function C5e(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=u5e(e,0,r);return[n,a]}function A5e(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=e.read_shift(2);r&&r.biff==5&&(e.l+=12);var s=rV(e,0,r);return[n,a,s]}function E5e(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=e.read_shift(r&&r.biff<=3?1:2);return[P4e[a],iV[a],n]}function T5e(e,t,r){var n=e[e.l++],a=e.read_shift(1),s=r&&r.biff<=3?[n==88?-1:0,e.read_shift(1)]:O5e(e);return[a,(s[0]===0?iV:O4e)[s[1]]]}function O5e(e){return[e[e.l+1]>>7,e.read_shift(2)&32767]}function P5e(e,t,r){e.l+=r&&r.biff==2?3:4}function I5e(e,t,r){if(e.l++,r&&r.biff==12)return[e.read_shift(4,"i"),0];var n=e.read_shift(2),a=e.read_shift(r&&r.biff==2?1:2);return[n,a]}function D5e(e){return e.l++,lh[e.read_shift(1)]}function M5e(e){return e.l++,e.read_shift(2)}function L5e(e){return e.l++,e.read_shift(1)!==0}function R5e(e){return e.l++,ro(e)}function F5e(e,t,r){return e.l++,sv(e,t-1,r)}function B5e(e,t){var r=[e.read_shift(1)];if(t==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=yi(e,1)?"TRUE":"FALSE",t!=12&&(e.l+=7);break;case 37:case 16:r[1]=lh[e[e.l]],e.l+=t==12?4:8;break;case 0:e.l+=8;break;case 1:r[1]=ro(e);break;case 2:r[1]=nx(e,0,{biff:t>0&&t<8?2:t});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function U5e(e,t,r){for(var n=e.read_shift(r.biff==12?4:2),a=[],s=0;s!=n;++s)a.push((r.biff==12?rx:Rk)(e));return a}function z5e(e,t,r){var n=0,a=0;r.biff==12?(n=e.read_shift(4),a=e.read_shift(4)):(a=1+e.read_shift(1),n=1+e.read_shift(2)),r.biff>=2&&r.biff<8&&(--n,--a==0&&(a=256));for(var s=0,l=[];s!=n&&(l[s]=[]);++s)for(var o=0;o!=a;++o)l[s][o]=B5e(e,r.biff);return l}function q5e(e,t,r){var n=e.read_shift(1)>>>5&3,a=!r||r.biff>=8?4:2,s=e.read_shift(a);switch(r.biff){case 2:e.l+=5;break;case 3:case 4:e.l+=8;break;case 5:e.l+=12;break}return[n,0,s]}function H5e(e,t,r){if(r.biff==5)return $5e(e);var n=e.read_shift(1)>>>5&3,a=e.read_shift(2),s=e.read_shift(4);return[n,a,s]}function $5e(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2,"i");e.l+=8;var n=e.read_shift(2);return e.l+=12,[t,r,n]}function V5e(e,t,r){var n=e.read_shift(1)>>>5&3;e.l+=r&&r.biff==2?3:4;var a=e.read_shift(r&&r.biff==2?1:2);return[n,a]}function W5e(e,t,r){var n=e.read_shift(1)>>>5&3,a=e.read_shift(r&&r.biff==2?1:2);return[n,a]}function K5e(e,t,r){var n=e.read_shift(1)>>>5&3;return e.l+=4,r.biff<8&&e.l--,r.biff==12&&(e.l+=2),[n]}function G5e(e,t,r){var n=(e[e.l++]&96)>>5,a=e.read_shift(2),s=4;if(r)switch(r.biff){case 5:s=15;break;case 12:s=6;break}return e.l+=s,[n,a]}var X5e=so,Y5e=so,Z5e=so;function lv(e,t,r){return e.l+=2,[d5e(e)]}function cA(e){return e.l+=6,[]}var Q5e=lv,J5e=cA,e4e=cA,t4e=lv;function aV(e){return e.l+=2,[Di(e),e.read_shift(2)&1]}var r4e=lv,n4e=aV,a4e=cA,s4e=lv,i4e=lv,l4e=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function o4e(e){e.l+=2;var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(4),a=e.read_shift(2),s=e.read_shift(2),l=l4e[r>>2&31];return{ixti:t,coltype:r&3,rt:l,idx:n,c:a,C:s}}function c4e(e){return e.l+=2,[e.read_shift(4)]}function d4e(e,t,r){return e.l+=5,e.l+=2,e.l+=r.biff==2?1:4,["PTGSHEET"]}function u4e(e,t,r){return e.l+=r.biff==2?4:5,["PTGENDSHEET"]}function h4e(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function f4e(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function m4e(e){return e.l+=4,[0,0]}var bD={1:{n:"PtgExp",f:I5e},2:{n:"PtgTbl",f:Z5e},3:{n:"PtgAdd",f:Pi},4:{n:"PtgSub",f:Pi},5:{n:"PtgMul",f:Pi},6:{n:"PtgDiv",f:Pi},7:{n:"PtgPower",f:Pi},8:{n:"PtgConcat",f:Pi},9:{n:"PtgLt",f:Pi},10:{n:"PtgLe",f:Pi},11:{n:"PtgEq",f:Pi},12:{n:"PtgGe",f:Pi},13:{n:"PtgGt",f:Pi},14:{n:"PtgNe",f:Pi},15:{n:"PtgIsect",f:Pi},16:{n:"PtgUnion",f:Pi},17:{n:"PtgRange",f:Pi},18:{n:"PtgUplus",f:Pi},19:{n:"PtgUminus",f:Pi},20:{n:"PtgPercent",f:Pi},21:{n:"PtgParen",f:Pi},22:{n:"PtgMissArg",f:Pi},23:{n:"PtgStr",f:F5e},26:{n:"PtgSheet",f:d4e},27:{n:"PtgEndSheet",f:u4e},28:{n:"PtgErr",f:D5e},29:{n:"PtgBool",f:L5e},30:{n:"PtgInt",f:M5e},31:{n:"PtgNum",f:R5e},32:{n:"PtgArray",f:b5e},33:{n:"PtgFunc",f:E5e},34:{n:"PtgFuncVar",f:T5e},35:{n:"PtgName",f:q5e},36:{n:"PtgRef",f:j5e},37:{n:"PtgArea",f:f5e},38:{n:"PtgMemArea",f:V5e},39:{n:"PtgMemErr",f:X5e},40:{n:"PtgMemNoMem",f:Y5e},41:{n:"PtgMemFunc",f:W5e},42:{n:"PtgRefErr",f:K5e},43:{n:"PtgAreaErr",f:x5e},44:{n:"PtgRefN",f:C5e},45:{n:"PtgAreaN",f:g5e},46:{n:"PtgMemAreaN",f:h4e},47:{n:"PtgMemNoMemN",f:f4e},57:{n:"PtgNameX",f:H5e},58:{n:"PtgRef3d",f:A5e},59:{n:"PtgArea3d",f:m5e},60:{n:"PtgRefErr3d",f:G5e},61:{n:"PtgAreaErr3d",f:p5e},255:{}},x4e={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},p4e={1:{n:"PtgElfLel",f:aV},2:{n:"PtgElfRw",f:s4e},3:{n:"PtgElfCol",f:Q5e},6:{n:"PtgElfRwV",f:i4e},7:{n:"PtgElfColV",f:t4e},10:{n:"PtgElfRadical",f:r4e},11:{n:"PtgElfRadicalS",f:a4e},13:{n:"PtgElfColS",f:J5e},15:{n:"PtgElfColSV",f:e4e},16:{n:"PtgElfRadicalLel",f:n4e},25:{n:"PtgList",f:o4e},29:{n:"PtgSxName",f:c4e},255:{}},g4e={0:{n:"PtgAttrNoop",f:m4e},1:{n:"PtgAttrSemi",f:N5e},2:{n:"PtgAttrIf",f:w5e},4:{n:"PtgAttrChoose",f:v5e},8:{n:"PtgAttrGoto",f:y5e},16:{n:"PtgAttrSum",f:P5e},32:{n:"PtgAttrBaxcel",f:gD},33:{n:"PtgAttrBaxcel",f:gD},64:{n:"PtgAttrSpace",f:_5e},65:{n:"PtgAttrSpaceSemi",f:S5e},128:{n:"PtgAttrIfError",f:k5e},255:{}};function ov(e,t,r,n){if(n.biff<8)return so(e,t);for(var a=e.l+t,s=[],l=0;l!==r.length;++l)switch(r[l][0]){case"PtgArray":r[l][1]=z5e(e,0,n),s.push(r[l][1]);break;case"PtgMemArea":r[l][2]=U5e(e,r[l][1],n),s.push(r[l][2]);break;case"PtgExp":n&&n.biff==12&&(r[l][1][1]=e.read_shift(4),s.push(r[l][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[l][0]}return t=a-e.l,t!==0&&s.push(so(e,t)),s}function cv(e,t,r){for(var n=e.l+t,a,s,l=[];n!=e.l;)t=n-e.l,s=e[e.l],a=bD[s]||bD[x4e[s]],(s===24||s===25)&&(a=(s===24?p4e:g4e)[e[e.l+1]]),!a||!a.f?so(e,t):l.push([a.n,a.f(e,t,r)]);return l}function b4e(e){for(var t=[],r=0;r<e.length;++r){for(var n=e[r],a=[],s=0;s<n.length;++s){var l=n[s];if(l)switch(l[0]){case 2:a.push('"'+l[1].replace(/"/g,'""')+'"');break;default:a.push(l[1])}else a.push("")}t.push(a.join(","))}return t.join(";")}var v4e={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function y4e(e,t){if(!e&&!(t&&t.biff<=5&&t.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(e)?"'"+e+"'":e}function sV(e,t,r){if(!e)return"SH33TJSERR0";if(r.biff>8&&(!e.XTI||!e.XTI[t]))return e.SheetNames[t];if(!e.XTI)return"SH33TJSERR6";var n=e.XTI[t];if(r.biff<8)return t>1e4&&(t-=65536),t<0&&(t=-t),t==0?"":e.XTI[t-1];if(!n)return"SH33TJSERR1";var a="";if(r.biff>8)switch(e[n[0]][0]){case 357:return a=n[1]==-1?"#REF":e.SheetNames[n[1]],n[1]==n[2]?a:a+":"+e.SheetNames[n[2]];case 358:return r.SID!=null?e.SheetNames[r.SID]:"SH33TJSSAME"+e[n[0]][0];case 355:default:return"SH33TJSSRC"+e[n[0]][0]}switch(e[n[0]][0][0]){case 1025:return a=n[1]==-1?"#REF":e.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?a:a+":"+e.SheetNames[n[2]];case 14849:return e[n[0]].slice(1).map(function(s){return s.Name}).join(";;");default:return e[n[0]][0][3]?(a=n[1]==-1?"#REF":e[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?a:a+":"+e[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function vD(e,t,r){var n=sV(e,t,r);return n=="#REF"?n:y4e(n,r)}function Jl(e,t,r,n,a){var s=a&&a.biff||8,l={s:{c:0,r:0}},o=[],c,d,f,p=0,y=0,g,N="";if(!e[0]||!e[0][0])return"";for(var w=-1,k="",S=0,O=e[0].length;S<O;++S){var E=e[0][S];switch(E[0]){case"PtgUminus":o.push("-"+o.pop());break;case"PtgUplus":o.push("+"+o.pop());break;case"PtgPercent":o.push(o.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(c=o.pop(),d=o.pop(),w>=0){switch(e[0][w][1][0]){case 0:k=oi(" ",e[0][w][1][1]);break;case 1:k=oi("\r",e[0][w][1][1]);break;default:if(k="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][w][1][0])}d=d+k,w=-1}o.push(d+v4e[E[0]]+c);break;case"PtgIsect":c=o.pop(),d=o.pop(),o.push(d+" "+c);break;case"PtgUnion":c=o.pop(),d=o.pop(),o.push(d+","+c);break;case"PtgRange":c=o.pop(),d=o.pop(),o.push(d+":"+c);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":f=Ag(E[1][1],l,a),o.push(Eg(f,s));break;case"PtgRefN":f=r?Ag(E[1][1],r,a):E[1][1],o.push(Eg(f,s));break;case"PtgRef3d":p=E[1][1],f=Ag(E[1][2],l,a),N=vD(n,p,a),o.push(N+"!"+Eg(f,s));break;case"PtgFunc":case"PtgFuncVar":var D=E[1][0],H=E[1][1];D||(D=0),D&=127;var W=D==0?[]:o.slice(-D);o.length-=D,H==="User"&&(H=W.shift()),o.push(H+"("+W.join(",")+")");break;case"PtgBool":o.push(E[1]?"TRUE":"FALSE");break;case"PtgInt":o.push(E[1]);break;case"PtgNum":o.push(String(E[1]));break;case"PtgStr":o.push('"'+E[1].replace(/"/g,'""')+'"');break;case"PtgErr":o.push(E[1]);break;case"PtgAreaN":g=GI(E[1][1],r?{s:r}:l,a),o.push(nN(g,a));break;case"PtgArea":g=GI(E[1][1],l,a),o.push(nN(g,a));break;case"PtgArea3d":p=E[1][1],g=E[1][2],N=vD(n,p,a),o.push(N+"!"+nN(g,a));break;case"PtgAttrSum":o.push("SUM("+o.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":y=E[1][2];var R=(n.names||[])[y-1]||(n[0]||[])[y],z=R?R.Name:"SH33TJSNAME"+String(y);z&&z.slice(0,6)=="_xlfn."&&!a.xlfn&&(z=z.slice(6)),o.push(z);break;case"PtgNameX":var U=E[1][1];y=E[1][2];var Z;if(a.biff<=5)U<0&&(U=-U),n[U]&&(Z=n[U][y]);else{var q="";if(((n[U]||[])[0]||[])[0]==14849||(((n[U]||[])[0]||[])[0]==1025?n[U][y]&&n[U][y].itab>0&&(q=n.SheetNames[n[U][y].itab-1]+"!"):q=n.SheetNames[y-1]+"!"),n[U]&&n[U][y])q+=n[U][y].Name;else if(n[0]&&n[0][y])q+=n[0][y].Name;else{var K=(sV(n,U,a)||"").split(";;");K[y-1]?q=K[y-1]:q+="SH33TJSERRX"}o.push(q);break}Z||(Z={Name:"SH33TJSERRY"}),o.push(Z.Name);break;case"PtgParen":var Q="(",re=")";if(w>=0){switch(k="",e[0][w][1][0]){case 2:Q=oi(" ",e[0][w][1][1])+Q;break;case 3:Q=oi("\r",e[0][w][1][1])+Q;break;case 4:re=oi(" ",e[0][w][1][1])+re;break;case 5:re=oi("\r",e[0][w][1][1])+re;break;default:if(a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][w][1][0])}w=-1}o.push(Q+o.pop()+re);break;case"PtgRefErr":o.push("#REF!");break;case"PtgRefErr3d":o.push("#REF!");break;case"PtgExp":f={c:E[1][1],r:E[1][0]};var ae={c:r.c,r:r.r};if(n.sharedf[Tn(f)]){var de=n.sharedf[Tn(f)];o.push(Jl(de,l,ae,n,a))}else{var he=!1;for(c=0;c!=n.arrayf.length;++c)if(d=n.arrayf[c],!(f.c<d[0].s.c||f.c>d[0].e.c)&&!(f.r<d[0].s.r||f.r>d[0].e.r)){o.push(Jl(d[1],l,ae,n,a)),he=!0;break}he||o.push(E[1])}break;case"PtgArray":o.push("{"+b4e(E[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":w=S;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":o.push("");break;case"PtgAreaErr":o.push("#REF!");break;case"PtgAreaErr3d":o.push("#REF!");break;case"PtgList":o.push("Table"+E[1].idx+"[#"+E[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(E));default:throw new Error("Unrecognized Formula Token: "+String(E))}var Se=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(a.biff!=3&&w>=0&&Se.indexOf(e[0][S][0])==-1){E=e[0][w];var ke=!0;switch(E[1][0]){case 4:ke=!1;case 0:k=oi(" ",E[1][1]);break;case 5:ke=!1;case 1:k=oi("\r",E[1][1]);break;default:if(k="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+E[1][0])}o.push((ke?k:"")+o.pop()+(ke?"":k)),w=-1}}if(o.length>1&&a.WTF)throw new Error("bad formula stack");return o[0]}function w4e(e,t,r){var n=e.l+t,a=r.biff==2?1:2,s,l=e.read_shift(a);if(l==65535)return[[],so(e,t-2)];var o=cv(e,l,r);return t!==l+a&&(s=ov(e,t-l-a,o,r)),e.l=n,[o,s]}function k4e(e,t,r){var n=e.l+t,a=r.biff==2?1:2,s,l=e.read_shift(a);if(l==65535)return[[],so(e,t-2)];var o=cv(e,l,r);return t!==l+a&&(s=ov(e,t-l-a,o,r)),e.l=n,[o,s]}function N4e(e,t,r,n){var a=e.l+t,s=cv(e,n,r),l;return a!==e.l&&(l=ov(e,a-e.l,s,r)),[s,l]}function _4e(e,t,r){var n=e.l+t,a,s=e.read_shift(2),l=cv(e,s,r);return s==65535?[[],so(e,t-2)]:(t!==s+2&&(a=ov(e,n-s-2,l,r)),[l,a])}function S4e(e){var t;if(O0(e,e.l+6)!==65535)return[ro(e),"n"];switch(e[e.l]){case 0:return e.l+=8,["String","s"];case 1:return t=e[e.l+2]===1,e.l+=8,[t,"b"];case 2:return t=e[e.l+2],e.l+=8,[t,"e"];case 3:return e.l+=8,["","s"]}return[]}function j4e(e){if(e==null){var t=Bt(8);return t.write_shift(1,3),t.write_shift(1,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,65535),t}else if(typeof e=="number")return zm(e);return zm(0)}function oN(e,t,r){var n=e.l+t,a=Ku(e);r.biff==2&&++e.l;var s=S4e(e),l=e.read_shift(1);r.biff!=2&&(e.read_shift(1),r.biff>=5&&e.read_shift(4));var o=k4e(e,n-e.l,r);return{cell:a,val:s[0],formula:o,shared:l>>3&1,tt:s[1]}}function C4e(e,t,r,n,a){var s=Hm(t,r,a),l=j4e(e.v),o=Bt(6),c=33;o.write_shift(2,c),o.write_shift(4,0);for(var d=Bt(e.bf.length),f=0;f<e.bf.length;++f)d[f]=e.bf[f];var p=pl([s,l,o,d]);return p}function Fk(e,t,r){var n=e.read_shift(4),a=cv(e,n,r),s=e.read_shift(4),l=s>0?ov(e,s,a,r):null;return[a,l]}var A4e=Fk,Bk=Fk,E4e=Fk,T4e=Fk,O4e={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},iV={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},P4e={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function yD(e){return e.slice(0,3)=="of:"&&(e=e.slice(3)),e.charCodeAt(0)==61&&(e=e.slice(1),e.charCodeAt(0)==61&&(e=e.slice(1))),e=e.replace(/COM\.MICROSOFT\./g,""),e=e.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(t,r){return r.replace(/\./g,"")}),e=e.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),e.replace(/[;~]/g,",").replace(/\|/g,";")}function I4e(e){var t="of:="+e.replace(lA,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return t.replace(/;/g,"|").replace(/,/g,";")}function cN(e){var t=e.split(":"),r=t[0].split(".")[0];return[r,t[0].split(".")[1]+(t.length>1?":"+(t[1].split(".")[1]||t[1].split(".")[0]):"")]}function D4e(e){return e.replace(/\./,"!")}var Og={},b1={},Pg=typeof Map<"u";function dA(e,t,r){var n=0,a=e.length;if(r){if(Pg?r.has(t):Object.prototype.hasOwnProperty.call(r,t)){for(var s=Pg?r.get(t):r[t];n<s.length;++n)if(e[s[n]].t===t)return e.Count++,s[n]}}else for(;n<a;++n)if(e[n].t===t)return e.Count++,n;return e[a]={t},e.Count++,e.Unique++,r&&(Pg?(r.has(t)||r.set(t,[]),r.get(t).push(a)):(Object.prototype.hasOwnProperty.call(r,t)||(r[t]=[]),r[t].push(a))),a}function Uk(e,t){var r={min:e+1,max:e+1},n=-1;return t.MDW&&(to=t.MDW),t.width!=null?r.customWidth=1:t.wpx!=null?n=gb(t.wpx):t.wch!=null&&(n=t.wch),n>-1?(r.width=yw(n),r.customWidth=1):t.width!=null&&(r.width=t.width),t.hidden&&(r.hidden=!0),t.level!=null&&(r.outlineLevel=r.level=t.level),r}function ym(e,t){if(e){var r=[.7,.7,.75,.75,.3,.3];t=="xlml"&&(r=[1,1,1,1,.5,.5]),e.left==null&&(e.left=r[0]),e.right==null&&(e.right=r[1]),e.top==null&&(e.top=r[2]),e.bottom==null&&(e.bottom=r[3]),e.header==null&&(e.header=r[4]),e.footer==null&&(e.footer=r[5])}}function wf(e,t,r){var n=r.revssf[t.z!=null?t.z:"General"],a=60,s=e.length;if(n==null&&r.ssf){for(;a<392;++a)if(r.ssf[a]==null){B0(t.z,a),r.ssf[a]=t.z,r.revssf[t.z]=n=a;break}}for(a=0;a!=s;++a)if(e[a].numFmtId===n)return a;return e[s]={numFmtId:n,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},s}function lV(e,t,r,n,a,s){try{n.cellNF&&(e.z=En[t])}catch(o){if(n.WTF)throw o}if(!(e.t==="z"&&!n.cellStyles)){if(e.t==="d"&&typeof e.v=="string"&&(e.v=Es(e.v)),(!n||n.cellText!==!1)&&e.t!=="z")try{if(En[t]==null&&B0(Obe[t]||"General",t),e.t==="e")e.w=e.w||lh[e.v];else if(t===0)if(e.t==="n")(e.v|0)===e.v?e.w=e.v.toString(10):e.w=db(e.v);else if(e.t==="d"){var l=Gi(e.v);(l|0)===l?e.w=l.toString(10):e.w=db(l)}else{if(e.v===void 0)return"";e.w=Bm(e.v,b1)}else e.t==="d"?e.w=xd(t,Gi(e.v),b1):e.w=xd(t,e.v,b1)}catch(o){if(n.WTF)throw o}if(n.cellStyles&&r!=null)try{e.s=s.Fills[r],e.s.fgColor&&e.s.fgColor.theme&&!e.s.fgColor.rgb&&(e.s.fgColor.rgb=vw(a.themeElements.clrScheme[e.s.fgColor.theme].rgb,e.s.fgColor.tint||0),n.WTF&&(e.s.fgColor.raw_rgb=a.themeElements.clrScheme[e.s.fgColor.theme].rgb)),e.s.bgColor&&e.s.bgColor.theme&&(e.s.bgColor.rgb=vw(a.themeElements.clrScheme[e.s.bgColor.theme].rgb,e.s.bgColor.tint||0),n.WTF&&(e.s.bgColor.raw_rgb=a.themeElements.clrScheme[e.s.bgColor.theme].rgb))}catch(o){if(n.WTF&&s.Fills)throw o}}}function M4e(e,t,r){if(e&&e["!ref"]){var n=Ta(e["!ref"]);if(n.e.c<n.s.c||n.e.r<n.s.r)throw new Error("Bad range ("+r+"): "+e["!ref"])}}function L4e(e,t){var r=Ta(t);r.s.r<=r.e.r&&r.s.c<=r.e.c&&r.s.r>=0&&r.s.c>=0&&(e["!ref"]=Kn(r))}var R4e=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,F4e=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,B4e=/<(?:\w:)?hyperlink [^>]*>/mg,U4e=/"(\w*:\w*)"/,z4e=/<(?:\w:)?col\b[^>]*[\/]?>/g,q4e=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,H4e=/<(?:\w:)?pageMargins[^>]*\/>/g,oV=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,$4e=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,V4e=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function W4e(e,t,r,n,a,s,l){if(!e)return e;n||(n={"!id":{}});var o=t.dense?[]:{},c={s:{r:2e6,c:2e6},e:{r:0,c:0}},d="",f="",p=e.match(F4e);p?(d=e.slice(0,p.index),f=e.slice(p.index+p[0].length)):d=f=e;var y=d.match(oV);y?uA(y[0],o,a,r):(y=d.match($4e))&&G4e(y[0],y[1]||"",o,a,r);var g=(d.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(g>0){var N=d.slice(g,g+50).match(U4e);N&&L4e(o,N[1])}var w=d.match(V4e);w&&w[1]&&l3e(w[1],a);var k=[];if(t.cellStyles){var S=d.match(z4e);S&&r3e(k,S)}p&&d3e(p[1],o,t,c,s,l);var O=f.match(q4e);O&&(o["!autofilter"]=a3e(O[0]));var E=[],D=f.match(R4e);if(D)for(g=0;g!=D.length;++g)E[g]=Ta(D[g].slice(D[g].indexOf('"')+1));var H=f.match(B4e);H&&J4e(o,H,n);var W=f.match(H4e);if(W&&(o["!margins"]=e3e(Mn(W[0]))),!o["!ref"]&&c.e.c>=c.s.c&&c.e.r>=c.s.r&&(o["!ref"]=Kn(c)),t.sheetRows>0&&o["!ref"]){var R=Ta(o["!ref"]);t.sheetRows<=+R.e.r&&(R.e.r=t.sheetRows-1,R.e.r>c.e.r&&(R.e.r=c.e.r),R.e.r<R.s.r&&(R.s.r=R.e.r),R.e.c>c.e.c&&(R.e.c=c.e.c),R.e.c<R.s.c&&(R.s.c=R.e.c),o["!fullref"]=o["!ref"],o["!ref"]=Kn(R))}return k.length>0&&(o["!cols"]=k),E.length>0&&(o["!merges"]=E),o}function K4e(e){if(e.length===0)return"";for(var t='<mergeCells count="'+e.length+'">',r=0;r!=e.length;++r)t+='<mergeCell ref="'+Kn(e[r])+'"/>';return t+"</mergeCells>"}function uA(e,t,r,n){var a=Mn(e);r.Sheets[n]||(r.Sheets[n]={}),a.codeName&&(r.Sheets[n].CodeName=Ea(ss(a.codeName)))}function G4e(e,t,r,n,a){uA(e.slice(0,e.indexOf(">")),r,n,a)}function X4e(e,t,r,n,a){var s=!1,l={},o=null;if(n.bookType!=="xlsx"&&t.vbaraw){var c=t.SheetNames[r];try{t.Workbook&&(c=t.Workbook.Sheets[r].CodeName||c)}catch{}s=!0,l.codeName=Mu(Ya(c))}if(e&&e["!outline"]){var d={summaryBelow:1,summaryRight:1};e["!outline"].above&&(d.summaryBelow=0),e["!outline"].left&&(d.summaryRight=0),o=(o||"")+Sr("outlinePr",null,d)}!s&&!o||(a[a.length]=Sr("sheetPr",o,l))}var Y4e=["objects","scenarios","selectLockedCells","selectUnlockedCells"],Z4e=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function Q4e(e){var t={sheet:1};return Y4e.forEach(function(r){e[r]!=null&&e[r]&&(t[r]="1")}),Z4e.forEach(function(r){e[r]!=null&&!e[r]&&(t[r]="0")}),e.password&&(t.password=aA(e.password).toString(16).toUpperCase()),Sr("sheetProtection",null,t)}function J4e(e,t,r){for(var n=Array.isArray(e),a=0;a!=t.length;++a){var s=Mn(ss(t[a]),!0);if(!s.ref)return;var l=((r||{})["!id"]||[])[s.id];l?(s.Target=l.Target,s.location&&(s.Target+="#"+Ea(s.location))):(s.Target="#"+Ea(s.location),l={Target:s.Target,TargetMode:"Internal"}),s.Rel=l,s.tooltip&&(s.Tooltip=s.tooltip,delete s.tooltip);for(var o=Ta(s.ref),c=o.s.r;c<=o.e.r;++c)for(var d=o.s.c;d<=o.e.c;++d){var f=Tn({c:d,r:c});n?(e[c]||(e[c]=[]),e[c][d]||(e[c][d]={t:"z",v:void 0}),e[c][d].l=s):(e[f]||(e[f]={t:"z",v:void 0}),e[f].l=s)}}}function e3e(e){var t={};return["left","right","top","bottom","header","footer"].forEach(function(r){e[r]&&(t[r]=parseFloat(e[r]))}),t}function t3e(e){return ym(e),Sr("pageMargins",null,e)}function r3e(e,t){for(var r=!1,n=0;n!=t.length;++n){var a=Mn(t[n],!0);a.hidden&&(a.hidden=js(a.hidden));var s=parseInt(a.min,10)-1,l=parseInt(a.max,10)-1;for(a.outlineLevel&&(a.level=+a.outlineLevel||0),delete a.min,delete a.max,a.width=+a.width,!r&&a.width&&(r=!0,sA(a.width)),cf(a);s<=l;)e[s++]=Ts(a)}}function n3e(e,t){for(var r=["<cols>"],n,a=0;a!=t.length;++a)(n=t[a])&&(r[r.length]=Sr("col",null,Uk(a,n)));return r[r.length]="</cols>",r.join("")}function a3e(e){var t={ref:(e.match(/ref="([^"]*)"/)||[])[1]};return t}function s3e(e,t,r,n){var a=typeof e.ref=="string"?e.ref:Kn(e.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var s=r.Workbook.Names,l=ac(a);l.s.r==l.e.r&&(l.e.r=ac(t["!ref"]).e.r,a=Kn(l));for(var o=0;o<s.length;++o){var c=s[o];if(c.Name=="_xlnm._FilterDatabase"&&c.Sheet==n){c.Ref="'"+r.SheetNames[n]+"'!"+a;break}}return o==s.length&&s.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+a}),Sr("autoFilter",null,{ref:a})}var i3e=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function l3e(e,t){t.Views||(t.Views=[{}]),(e.match(i3e)||[]).forEach(function(r,n){var a=Mn(r);t.Views[n]||(t.Views[n]={}),+a.zoomScale&&(t.Views[n].zoom=+a.zoomScale),js(a.rightToLeft)&&(t.Views[n].RTL=!0)})}function o3e(e,t,r,n){var a={workbookViewId:"0"};return(((n||{}).Workbook||{}).Views||[])[0]&&(a.rightToLeft=n.Workbook.Views[0].RTL?"1":"0"),Sr("sheetViews",Sr("sheetView",null,a),{})}function c3e(e,t,r,n){if(e.c&&r["!comments"].push([t,e.c]),e.v===void 0&&typeof e.f!="string"||e.t==="z"&&!e.f)return"";var a="",s=e.t,l=e.v;if(e.t!=="z")switch(e.t){case"b":a=e.v?"1":"0";break;case"n":a=""+e.v;break;case"e":a=lh[e.v];break;case"d":n&&n.cellDates?a=Es(e.v,-1).toISOString():(e=Ts(e),e.t="n",a=""+(e.v=Gi(Es(e.v)))),typeof e.z>"u"&&(e.z=En[14]);break;default:a=e.v;break}var o=Dl("v",Ya(a)),c={r:t},d=wf(n.cellXfs,e,n);switch(d!==0&&(c.s=d),e.t){case"n":break;case"d":c.t="d";break;case"b":c.t="b";break;case"e":c.t="e";break;case"z":break;default:if(e.v==null){delete e.t;break}if(e.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(n&&n.bookSST){o=Dl("v",""+dA(n.Strings,e.v,n.revStrings)),c.t="s";break}c.t="str";break}if(e.t!=s&&(e.t=s,e.v=l),typeof e.f=="string"&&e.f){var f=e.F&&e.F.slice(0,t.length)==t?{t:"array",ref:e.F}:null;o=Sr("f",Ya(e.f),f)+(e.v!=null?o:"")}return e.l&&r["!links"].push([t,e.l]),e.D&&(c.cm=1),Sr("c",o,c)}var d3e=(function(){var e=/<(?:\w+:)?c[ \/>]/,t=/<\/(?:\w+:)?row>/,r=/r=["']([^"']*)["']/,n=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,a=/ref=["']([^"']*)["']/,s=ub("v"),l=ub("f");return function(c,d,f,p,y,g){for(var N=0,w="",k=[],S=[],O=0,E=0,D=0,H="",W,R,z=0,U=0,Z,q,K=0,Q=0,re=Array.isArray(g.CellXf),ae,de=[],he=[],Se=Array.isArray(d),ke=[],Le={},fe=!1,F=!!f.sheetStubs,te=c.split(t),Y=0,ne=te.length;Y!=ne;++Y){w=te[Y].trim();var ee=w.length;if(ee!==0){var Ce=0;e:for(N=0;N<ee;++N)switch(w[N]){case">":if(w[N-1]!="/"){++N;break e}if(f&&f.cellStyles){if(R=Mn(w.slice(Ce,N),!0),z=R.r!=null?parseInt(R.r,10):z+1,U=-1,f.sheetRows&&f.sheetRows<z)continue;Le={},fe=!1,R.ht&&(fe=!0,Le.hpt=parseFloat(R.ht),Le.hpx=G1(Le.hpt)),R.hidden=="1"&&(fe=!0,Le.hidden=!0),R.outlineLevel!=null&&(fe=!0,Le.level=+R.outlineLevel),fe&&(ke[z-1]=Le)}break;case"<":Ce=N;break}if(Ce>=N)break;if(R=Mn(w.slice(Ce,N),!0),z=R.r!=null?parseInt(R.r,10):z+1,U=-1,!(f.sheetRows&&f.sheetRows<z)){p.s.r>z-1&&(p.s.r=z-1),p.e.r<z-1&&(p.e.r=z-1),f&&f.cellStyles&&(Le={},fe=!1,R.ht&&(fe=!0,Le.hpt=parseFloat(R.ht),Le.hpx=G1(Le.hpt)),R.hidden=="1"&&(fe=!0,Le.hidden=!0),R.outlineLevel!=null&&(fe=!0,Le.level=+R.outlineLevel),fe&&(ke[z-1]=Le)),k=w.slice(N).split(e);for(var me=0;me!=k.length&&k[me].trim().charAt(0)=="<";++me);for(k=k.slice(me),N=0;N!=k.length;++N)if(w=k[N].trim(),w.length!==0){if(S=w.match(r),O=N,E=0,D=0,w="<c "+(w.slice(0,1)=="<"?">":"")+w,S!=null&&S.length===2){for(O=0,H=S[1],E=0;E!=H.length&&!((D=H.charCodeAt(E)-64)<1||D>26);++E)O=26*O+D;--O,U=O}else++U;for(E=0;E!=w.length&&w.charCodeAt(E)!==62;++E);if(++E,R=Mn(w.slice(0,E),!0),R.r||(R.r=Tn({r:z-1,c:U})),H=w.slice(E),W={t:""},(S=H.match(s))!=null&&S[1]!==""&&(W.v=Ea(S[1])),f.cellFormula){if((S=H.match(l))!=null&&S[1]!==""){if(W.f=Ea(ss(S[1])).replace(/\r\n/g,`
`),f.xlfn||(W.f=pD(W.f)),S[0].indexOf('t="array"')>-1)W.F=(H.match(a)||[])[1],W.F.indexOf(":")>-1&&de.push([Ta(W.F),W.F]);else if(S[0].indexOf('t="shared"')>-1){q=Mn(S[0]);var se=Ea(ss(S[1]));f.xlfn||(se=pD(se)),he[parseInt(q.si,10)]=[q,se,R.r]}}else(S=H.match(/<f[^>]*\/>/))&&(q=Mn(S[0]),he[q.si]&&(W.f=i5e(he[q.si][1],he[q.si][2],R.r)));var je=Gs(R.r);for(E=0;E<de.length;++E)je.r>=de[E][0].s.r&&je.r<=de[E][0].e.r&&je.c>=de[E][0].s.c&&je.c<=de[E][0].e.c&&(W.F=de[E][1])}if(R.t==null&&W.v===void 0)if(W.f||W.F)W.v=0,W.t="n";else if(F)W.t="z";else continue;else W.t=R.t||"n";switch(p.s.c>U&&(p.s.c=U),p.e.c<U&&(p.e.c=U),W.t){case"n":if(W.v==""||W.v==null){if(!F)continue;W.t="z"}else W.v=parseFloat(W.v);break;case"s":if(typeof W.v>"u"){if(!F)continue;W.t="z"}else Z=Og[parseInt(W.v,10)],W.v=Z.t,W.r=Z.r,f.cellHTML&&(W.h=Z.h);break;case"str":W.t="s",W.v=W.v!=null?ss(W.v):"",f.cellHTML&&(W.h=HC(W.v));break;case"inlineStr":S=H.match(n),W.t="s",S!=null&&(Z=nA(S[1]))?(W.v=Z.t,f.cellHTML&&(W.h=Z.h)):W.v="";break;case"b":W.v=js(W.v);break;case"d":f.cellDates?W.v=Es(W.v,1):(W.v=Gi(Es(W.v,1)),W.t="n");break;case"e":(!f||f.cellText!==!1)&&(W.w=W.v),W.v=d$[W.v];break}if(K=Q=0,ae=null,re&&R.s!==void 0&&(ae=g.CellXf[R.s],ae!=null&&(ae.numFmtId!=null&&(K=ae.numFmtId),f.cellStyles&&ae.fillId!=null&&(Q=ae.fillId))),lV(W,K,Q,f,y,g),f.cellDates&&re&&W.t=="n"&&xp(En[K])&&(W.t="d",W.v=Lk(W.v)),R.cm&&f.xlmeta){var be=(f.xlmeta.Cell||[])[+R.cm-1];be&&be.type=="XLDAPR"&&(W.D=!0)}if(Se){var ie=Gs(R.r);d[ie.r]||(d[ie.r]=[]),d[ie.r][ie.c]=W}else d[R.r]=W}}}}ke.length>0&&(d["!rows"]=ke)}})();function u3e(e,t,r,n){var a=[],s=[],l=Ta(e["!ref"]),o="",c,d="",f=[],p=0,y=0,g=e["!rows"],N=Array.isArray(e),w={r:d},k,S=-1;for(y=l.s.c;y<=l.e.c;++y)f[y]=Ks(y);for(p=l.s.r;p<=l.e.r;++p){for(s=[],d=ji(p),y=l.s.c;y<=l.e.c;++y){c=f[y]+d;var O=N?(e[p]||[])[y]:e[c];O!==void 0&&(o=c3e(O,c,e,t))!=null&&s.push(o)}(s.length>0||g&&g[p])&&(w={r:d},g&&g[p]&&(k=g[p],k.hidden&&(w.hidden=1),S=-1,k.hpx?S=bb(k.hpx):k.hpt&&(S=k.hpt),S>-1&&(w.ht=S,w.customHeight=1),k.level&&(w.outlineLevel=k.level)),a[a.length]=Sr("row",s.join(""),w))}if(g)for(;p<g.length;++p)g&&g[p]&&(w={r:p+1},k=g[p],k.hidden&&(w.hidden=1),S=-1,k.hpx?S=bb(k.hpx):k.hpt&&(S=k.hpt),S>-1&&(w.ht=S,w.customHeight=1),k.level&&(w.outlineLevel=k.level),a[a.length]=Sr("row","",w));return a.join("")}function cV(e,t,r,n){var a=[Ci,Sr("worksheet",null,{xmlns:Qm[0],"xmlns:r":Ki.r})],s=r.SheetNames[e],l=0,o="",c=r.Sheets[s];c==null&&(c={});var d=c["!ref"]||"A1",f=Ta(d);if(f.e.c>16383||f.e.r>1048575){if(t.WTF)throw new Error("Range "+d+" exceeds format limit A1:XFD1048576");f.e.c=Math.min(f.e.c,16383),f.e.r=Math.min(f.e.c,1048575),d=Kn(f)}n||(n={}),c["!comments"]=[];var p=[];X4e(c,r,e,t,a),a[a.length]=Sr("dimension",null,{ref:d}),a[a.length]=o3e(c,t,e,r),t.sheetFormat&&(a[a.length]=Sr("sheetFormatPr",null,{defaultRowHeight:t.sheetFormat.defaultRowHeight||"16",baseColWidth:t.sheetFormat.baseColWidth||"10",outlineLevelRow:t.sheetFormat.outlineLevelRow||"7"})),c["!cols"]!=null&&c["!cols"].length>0&&(a[a.length]=n3e(c,c["!cols"])),a[l=a.length]="<sheetData/>",c["!links"]=[],c["!ref"]!=null&&(o=u3e(c,t),o.length>0&&(a[a.length]=o)),a.length>l+1&&(a[a.length]="</sheetData>",a[l]=a[l].replace("/>",">")),c["!protect"]&&(a[a.length]=Q4e(c["!protect"])),c["!autofilter"]!=null&&(a[a.length]=s3e(c["!autofilter"],c,r,e)),c["!merges"]!=null&&c["!merges"].length>0&&(a[a.length]=K4e(c["!merges"]));var y=-1,g,N=-1;return c["!links"].length>0&&(a[a.length]="<hyperlinks>",c["!links"].forEach(function(w){w[1].Target&&(g={ref:w[0]},w[1].Target.charAt(0)!="#"&&(N=Ka(n,-1,Ya(w[1].Target).replace(/#.*$/,""),ia.HLINK),g["r:id"]="rId"+N),(y=w[1].Target.indexOf("#"))>-1&&(g.location=Ya(w[1].Target.slice(y+1))),w[1].Tooltip&&(g.tooltip=Ya(w[1].Tooltip)),a[a.length]=Sr("hyperlink",null,g))}),a[a.length]="</hyperlinks>"),delete c["!links"],c["!margins"]!=null&&(a[a.length]=t3e(c["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&(a[a.length]=Dl("ignoredErrors",Sr("ignoredError",null,{numberStoredAsText:1,sqref:d}))),p.length>0&&(N=Ka(n,-1,"../drawings/drawing"+(e+1)+".xml",ia.DRAW),a[a.length]=Sr("drawing",null,{"r:id":"rId"+N}),c["!drawing"]=p),c["!comments"].length>0&&(N=Ka(n,-1,"../drawings/vmlDrawing"+(e+1)+".vml",ia.VML),a[a.length]=Sr("legacyDrawing",null,{"r:id":"rId"+N}),c["!legacy"]=N),a.length>1&&(a[a.length]="</worksheet>",a[1]=a[1].replace("/>",">")),a.join("")}function h3e(e,t){var r={},n=e.l+t;r.r=e.read_shift(4),e.l+=4;var a=e.read_shift(2);e.l+=1;var s=e.read_shift(1);return e.l=n,s&7&&(r.level=s&7),s&16&&(r.hidden=!0),s&32&&(r.hpt=a/20),r}function f3e(e,t,r){var n=Bt(145),a=(r["!rows"]||[])[e]||{};n.write_shift(4,e),n.write_shift(4,0);var s=320;a.hpx?s=bb(a.hpx)*20:a.hpt&&(s=a.hpt*20),n.write_shift(2,s),n.write_shift(1,0);var l=0;a.level&&(l|=a.level),a.hidden&&(l|=16),(a.hpx||a.hpt)&&(l|=32),n.write_shift(1,l),n.write_shift(1,0);var o=0,c=n.l;n.l+=4;for(var d={r:e,c:0},f=0;f<16;++f)if(!(t.s.c>f+1<<10||t.e.c<f<<10)){for(var p=-1,y=-1,g=f<<10;g<f+1<<10;++g){d.c=g;var N=Array.isArray(r)?(r[d.r]||[])[d.c]:r[Tn(d)];N&&(p<0&&(p=g),y=g)}p<0||(++o,n.write_shift(4,p),n.write_shift(4,y))}var w=n.l;return n.l=c,n.write_shift(4,o),n.l=w,n.length>n.l?n.slice(0,n.l):n}function m3e(e,t,r,n){var a=f3e(n,r,t);(a.length>17||(t["!rows"]||[])[n])&&or(e,0,a)}var x3e=rx,p3e=bp;function g3e(){}function b3e(e,t){var r={},n=e[e.l];return++e.l,r.above=!(n&64),r.left=!(n&128),e.l+=18,r.name=wve(e),r}function v3e(e,t,r){r==null&&(r=Bt(84+4*e.length));var n=192;t&&(t.above&&(n&=-65),t.left&&(n&=-129)),r.write_shift(1,n);for(var a=1;a<3;++a)r.write_shift(1,0);return pw({auto:1},r),r.write_shift(-4,-1),r.write_shift(-4,-1),s$(e,r),r.slice(0,r.l)}function y3e(e){var t=yd(e);return[t]}function w3e(e,t,r){return r==null&&(r=Bt(8)),Jm(t,r)}function k3e(e){var t=ex(e);return[t]}function N3e(e,t,r){return r==null&&(r=Bt(4)),tx(t,r)}function _3e(e){var t=yd(e),r=e.read_shift(1);return[t,r,"b"]}function S3e(e,t,r){return r==null&&(r=Bt(9)),Jm(t,r),r.write_shift(1,e.v?1:0),r}function j3e(e){var t=ex(e),r=e.read_shift(1);return[t,r,"b"]}function C3e(e,t,r){return r==null&&(r=Bt(5)),tx(t,r),r.write_shift(1,e.v?1:0),r}function A3e(e){var t=yd(e),r=e.read_shift(1);return[t,r,"e"]}function E3e(e,t,r){return r==null&&(r=Bt(9)),Jm(t,r),r.write_shift(1,e.v),r}function T3e(e){var t=ex(e),r=e.read_shift(1);return[t,r,"e"]}function O3e(e,t,r){return r==null&&(r=Bt(8)),tx(t,r),r.write_shift(1,e.v),r.write_shift(2,0),r.write_shift(1,0),r}function P3e(e){var t=yd(e),r=e.read_shift(4);return[t,r,"s"]}function I3e(e,t,r){return r==null&&(r=Bt(12)),Jm(t,r),r.write_shift(4,t.v),r}function D3e(e){var t=ex(e),r=e.read_shift(4);return[t,r,"s"]}function M3e(e,t,r){return r==null&&(r=Bt(8)),tx(t,r),r.write_shift(4,t.v),r}function L3e(e){var t=yd(e),r=ro(e);return[t,r,"n"]}function R3e(e,t,r){return r==null&&(r=Bt(16)),Jm(t,r),zm(e.v,r),r}function dV(e){var t=ex(e),r=ro(e);return[t,r,"n"]}function F3e(e,t,r){return r==null&&(r=Bt(12)),tx(t,r),zm(e.v,r),r}function B3e(e){var t=yd(e),r=QC(e);return[t,r,"n"]}function U3e(e,t,r){return r==null&&(r=Bt(12)),Jm(t,r),i$(e.v,r),r}function z3e(e){var t=ex(e),r=QC(e);return[t,r,"n"]}function q3e(e,t,r){return r==null&&(r=Bt(8)),tx(t,r),i$(e.v,r),r}function H3e(e){var t=yd(e),r=XC(e);return[t,r,"is"]}function $3e(e){var t=yd(e),r=ao(e);return[t,r,"str"]}function V3e(e,t,r){return r==null&&(r=Bt(12+4*e.v.length)),Jm(t,r),vl(e.v,r),r.length>r.l?r.slice(0,r.l):r}function W3e(e){var t=ex(e),r=ao(e);return[t,r,"str"]}function K3e(e,t,r){return r==null&&(r=Bt(8+4*e.v.length)),tx(t,r),vl(e.v,r),r.length>r.l?r.slice(0,r.l):r}function G3e(e,t,r){var n=e.l+t,a=yd(e);a.r=r["!row"];var s=e.read_shift(1),l=[a,s,"b"];if(r.cellFormula){e.l+=2;var o=Bk(e,n-e.l,r);l[3]=Jl(o,null,a,r.supbooks,r)}else e.l=n;return l}function X3e(e,t,r){var n=e.l+t,a=yd(e);a.r=r["!row"];var s=e.read_shift(1),l=[a,s,"e"];if(r.cellFormula){e.l+=2;var o=Bk(e,n-e.l,r);l[3]=Jl(o,null,a,r.supbooks,r)}else e.l=n;return l}function Y3e(e,t,r){var n=e.l+t,a=yd(e);a.r=r["!row"];var s=ro(e),l=[a,s,"n"];if(r.cellFormula){e.l+=2;var o=Bk(e,n-e.l,r);l[3]=Jl(o,null,a,r.supbooks,r)}else e.l=n;return l}function Z3e(e,t,r){var n=e.l+t,a=yd(e);a.r=r["!row"];var s=ao(e),l=[a,s,"str"];if(r.cellFormula){e.l+=2;var o=Bk(e,n-e.l,r);l[3]=Jl(o,null,a,r.supbooks,r)}else e.l=n;return l}var Q3e=rx,J3e=bp;function eNe(e,t){return t==null&&(t=Bt(4)),t.write_shift(4,e),t}function tNe(e,t){var r=e.l+t,n=rx(e),a=YC(e),s=ao(e),l=ao(e),o=ao(e);e.l=r;var c={rfx:n,relId:a,loc:s,display:o};return l&&(c.Tooltip=l),c}function rNe(e,t){var r=Bt(50+4*(e[1].Target.length+(e[1].Tooltip||"").length));bp({s:Gs(e[0]),e:Gs(e[0])},r),ZC("rId"+t,r);var n=e[1].Target.indexOf("#"),a=n==-1?"":e[1].Target.slice(n+1);return vl(a||"",r),vl(e[1].Tooltip||"",r),vl("",r),r.slice(0,r.l)}function nNe(){}function aNe(e,t,r){var n=e.l+t,a=l$(e),s=e.read_shift(1),l=[a];if(l[2]=s,r.cellFormula){var o=A4e(e,n-e.l,r);l[1]=o}else e.l=n;return l}function sNe(e,t,r){var n=e.l+t,a=rx(e),s=[a];if(r.cellFormula){var l=T4e(e,n-e.l,r);s[1]=l,e.l=n}else e.l=n;return s}function iNe(e,t,r){r==null&&(r=Bt(18));var n=Uk(e,t);r.write_shift(-4,e),r.write_shift(-4,e),r.write_shift(4,(n.width||10)*256),r.write_shift(4,0);var a=0;return t.hidden&&(a|=1),typeof n.width=="number"&&(a|=2),t.level&&(a|=t.level<<8),r.write_shift(2,a),r}var uV=["left","right","top","bottom","header","footer"];function lNe(e){var t={};return uV.forEach(function(r){t[r]=ro(e)}),t}function oNe(e,t){return t==null&&(t=Bt(48)),ym(e),uV.forEach(function(r){zm(e[r],t)}),t}function cNe(e){var t=e.read_shift(2);return e.l+=28,{RTL:t&32}}function dNe(e,t,r){r==null&&(r=Bt(30));var n=924;return(((t||{}).Views||[])[0]||{}).RTL&&(n|=32),r.write_shift(2,n),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(2,0),r.write_shift(2,100),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(4,0),r}function uNe(e){var t=Bt(24);return t.write_shift(4,4),t.write_shift(4,1),bp(e,t),t}function hNe(e,t){return t==null&&(t=Bt(66)),t.write_shift(2,e.password?aA(e.password):0),t.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(r){r[1]?t.write_shift(4,e[r[0]]!=null&&!e[r[0]]?1:0):t.write_shift(4,e[r[0]]!=null&&e[r[0]]?0:1)}),t}function fNe(){}function mNe(){}function xNe(e,t,r,n,a,s,l){if(!e)return e;var o=t||{};n||(n={"!id":{}});var c=o.dense?[]:{},d,f={s:{r:2e6,c:2e6},e:{r:0,c:0}},p=!1,y=!1,g,N,w,k,S,O,E,D,H,W=[];o.biff=12,o["!row"]=0;var R=0,z=!1,U=[],Z={},q=o.supbooks||a.supbooks||[[]];if(q.sharedf=Z,q.arrayf=U,q.SheetNames=a.SheetNames||a.Sheets.map(function(Se){return Se.name}),!o.supbooks&&(o.supbooks=q,a.Names))for(var K=0;K<a.Names.length;++K)q[0][K+1]=a.Names[K];var Q=[],re=[],ae=!1;vb[16]={n:"BrtShortReal",f:dV};var de;if(ih(e,function(ke,Le,fe){if(!y)switch(fe){case 148:d=ke;break;case 0:g=ke,o.sheetRows&&o.sheetRows<=g.r&&(y=!0),D=ji(k=g.r),o["!row"]=g.r,(ke.hidden||ke.hpt||ke.level!=null)&&(ke.hpt&&(ke.hpx=G1(ke.hpt)),re[ke.r]=ke);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(N={t:ke[2]},ke[2]){case"n":N.v=ke[1];break;case"s":E=Og[ke[1]],N.v=E.t,N.r=E.r;break;case"b":N.v=!!ke[1];break;case"e":N.v=ke[1],o.cellText!==!1&&(N.w=lh[N.v]);break;case"str":N.t="s",N.v=ke[1];break;case"is":N.t="s",N.v=ke[1].t;break}if((w=l.CellXf[ke[0].iStyleRef])&&lV(N,w.numFmtId,null,o,s,l),S=ke[0].c==-1?S+1:ke[0].c,o.dense?(c[k]||(c[k]=[]),c[k][S]=N):c[Ks(S)+D]=N,o.cellFormula){for(z=!1,R=0;R<U.length;++R){var F=U[R];g.r>=F[0].s.r&&g.r<=F[0].e.r&&S>=F[0].s.c&&S<=F[0].e.c&&(N.F=Kn(F[0]),z=!0)}!z&&ke.length>3&&(N.f=ke[3])}if(f.s.r>g.r&&(f.s.r=g.r),f.s.c>S&&(f.s.c=S),f.e.r<g.r&&(f.e.r=g.r),f.e.c<S&&(f.e.c=S),o.cellDates&&w&&N.t=="n"&&xp(En[w.numFmtId])){var te=rm(N.v);te&&(N.t="d",N.v=new Date(te.y,te.m-1,te.d,te.H,te.M,te.S,te.u))}de&&(de.type=="XLDAPR"&&(N.D=!0),de=void 0);break;case 1:case 12:if(!o.sheetStubs||p)break;N={t:"z",v:void 0},S=ke[0].c==-1?S+1:ke[0].c,o.dense?(c[k]||(c[k]=[]),c[k][S]=N):c[Ks(S)+D]=N,f.s.r>g.r&&(f.s.r=g.r),f.s.c>S&&(f.s.c=S),f.e.r<g.r&&(f.e.r=g.r),f.e.c<S&&(f.e.c=S),de&&(de.type=="XLDAPR"&&(N.D=!0),de=void 0);break;case 176:W.push(ke);break;case 49:de=((o.xlmeta||{}).Cell||[])[ke-1];break;case 494:var Y=n["!id"][ke.relId];for(Y?(ke.Target=Y.Target,ke.loc&&(ke.Target+="#"+ke.loc),ke.Rel=Y):ke.relId==""&&(ke.Target="#"+ke.loc),k=ke.rfx.s.r;k<=ke.rfx.e.r;++k)for(S=ke.rfx.s.c;S<=ke.rfx.e.c;++S)o.dense?(c[k]||(c[k]=[]),c[k][S]||(c[k][S]={t:"z",v:void 0}),c[k][S].l=ke):(O=Tn({c:S,r:k}),c[O]||(c[O]={t:"z",v:void 0}),c[O].l=ke);break;case 426:if(!o.cellFormula)break;U.push(ke),H=o.dense?c[k][S]:c[Ks(S)+D],H.f=Jl(ke[1],f,{r:g.r,c:S},q,o),H.F=Kn(ke[0]);break;case 427:if(!o.cellFormula)break;Z[Tn(ke[0].s)]=ke[1],H=o.dense?c[k][S]:c[Ks(S)+D],H.f=Jl(ke[1],f,{r:g.r,c:S},q,o);break;case 60:if(!o.cellStyles)break;for(;ke.e>=ke.s;)Q[ke.e--]={width:ke.w/256,hidden:!!(ke.flags&1),level:ke.level},ae||(ae=!0,sA(ke.w/256)),cf(Q[ke.e+1]);break;case 161:c["!autofilter"]={ref:Kn(ke)};break;case 476:c["!margins"]=ke;break;case 147:a.Sheets[r]||(a.Sheets[r]={}),ke.name&&(a.Sheets[r].CodeName=ke.name),(ke.above||ke.left)&&(c["!outline"]={above:ke.above,left:ke.left});break;case 137:a.Views||(a.Views=[{}]),a.Views[0]||(a.Views[0]={}),ke.RTL&&(a.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:p=!0;break;case 36:p=!1;break;case 37:p=!0;break;case 38:p=!1;break;default:if(!Le.T){if(!p||o.WTF)throw new Error("Unexpected record 0x"+fe.toString(16))}}},o),delete o.supbooks,delete o["!row"],!c["!ref"]&&(f.s.r<2e6||d&&(d.e.r>0||d.e.c>0||d.s.r>0||d.s.c>0))&&(c["!ref"]=Kn(d||f)),o.sheetRows&&c["!ref"]){var he=Ta(c["!ref"]);o.sheetRows<=+he.e.r&&(he.e.r=o.sheetRows-1,he.e.r>f.e.r&&(he.e.r=f.e.r),he.e.r<he.s.r&&(he.s.r=he.e.r),he.e.c>f.e.c&&(he.e.c=f.e.c),he.e.c<he.s.c&&(he.s.c=he.e.c),c["!fullref"]=c["!ref"],c["!ref"]=Kn(he))}return W.length>0&&(c["!merges"]=W),Q.length>0&&(c["!cols"]=Q),re.length>0&&(c["!rows"]=re),c}function pNe(e,t,r,n,a,s,l){if(t.v===void 0)return!1;var o="";switch(t.t){case"b":o=t.v?"1":"0";break;case"d":t=Ts(t),t.z=t.z||En[14],t.v=Gi(Es(t.v)),t.t="n";break;case"n":case"e":o=""+t.v;break;default:o=t.v;break}var c={r,c:n};switch(c.s=wf(a.cellXfs,t,a),t.l&&s["!links"].push([Tn(c),t.l]),t.c&&s["!comments"].push([Tn(c),t.c]),t.t){case"s":case"str":return a.bookSST?(o=dA(a.Strings,t.v,a.revStrings),c.t="s",c.v=o,l?or(e,18,M3e(t,c)):or(e,7,I3e(t,c))):(c.t="str",l?or(e,17,K3e(t,c)):or(e,6,V3e(t,c))),!0;case"n":return t.v==(t.v|0)&&t.v>-1e3&&t.v<1e3?l?or(e,13,q3e(t,c)):or(e,2,U3e(t,c)):l?or(e,16,F3e(t,c)):or(e,5,R3e(t,c)),!0;case"b":return c.t="b",l?or(e,15,C3e(t,c)):or(e,4,S3e(t,c)),!0;case"e":return c.t="e",l?or(e,14,O3e(t,c)):or(e,3,E3e(t,c)),!0}return l?or(e,12,N3e(t,c)):or(e,1,w3e(t,c)),!0}function gNe(e,t,r,n){var a=Ta(t["!ref"]||"A1"),s,l="",o=[];or(e,145);var c=Array.isArray(t),d=a.e.r;t["!rows"]&&(d=Math.max(a.e.r,t["!rows"].length-1));for(var f=a.s.r;f<=d;++f){l=ji(f),m3e(e,t,a,f);var p=!1;if(f<=a.e.r)for(var y=a.s.c;y<=a.e.c;++y){f===a.s.r&&(o[y]=Ks(y)),s=o[y]+l;var g=c?(t[f]||[])[y]:t[s];if(!g){p=!1;continue}p=pNe(e,g,f,y,n,t,p)}}or(e,146)}function bNe(e,t){!t||!t["!merges"]||(or(e,177,eNe(t["!merges"].length)),t["!merges"].forEach(function(r){or(e,176,J3e(r))}),or(e,178))}function vNe(e,t){!t||!t["!cols"]||(or(e,390),t["!cols"].forEach(function(r,n){r&&or(e,60,iNe(n,r))}),or(e,391))}function yNe(e,t){!t||!t["!ref"]||(or(e,648),or(e,649,uNe(Ta(t["!ref"]))),or(e,650))}function wNe(e,t,r){t["!links"].forEach(function(n){if(n[1].Target){var a=Ka(r,-1,n[1].Target.replace(/#.*$/,""),ia.HLINK);or(e,494,rNe(n,a))}}),delete t["!links"]}function kNe(e,t,r,n){if(t["!comments"].length>0){var a=Ka(n,-1,"../drawings/vmlDrawing"+(r+1)+".vml",ia.VML);or(e,551,ZC("rId"+a)),t["!legacy"]=a}}function NNe(e,t,r,n){if(t["!autofilter"]){var a=t["!autofilter"],s=typeof a.ref=="string"?a.ref:Kn(a.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var l=r.Workbook.Names,o=ac(s);o.s.r==o.e.r&&(o.e.r=ac(t["!ref"]).e.r,s=Kn(o));for(var c=0;c<l.length;++c){var d=l[c];if(d.Name=="_xlnm._FilterDatabase"&&d.Sheet==n){d.Ref="'"+r.SheetNames[n]+"'!"+s;break}}c==l.length&&l.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+s}),or(e,161,bp(Ta(s))),or(e,162)}}function _Ne(e,t,r){or(e,133),or(e,137,dNe(t,r)),or(e,138),or(e,134)}function SNe(e,t){t["!protect"]&&or(e,535,hNe(t["!protect"]))}function jNe(e,t,r,n){var a=nc(),s=r.SheetNames[e],l=r.Sheets[s]||{},o=s;try{r&&r.Workbook&&(o=r.Workbook.Sheets[e].CodeName||o)}catch{}var c=Ta(l["!ref"]||"A1");if(c.e.c>16383||c.e.r>1048575){if(t.WTF)throw new Error("Range "+(l["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");c.e.c=Math.min(c.e.c,16383),c.e.r=Math.min(c.e.c,1048575)}return l["!links"]=[],l["!comments"]=[],or(a,129),(r.vbaraw||l["!outline"])&&or(a,147,v3e(o,l["!outline"])),or(a,148,p3e(c)),_Ne(a,l,r.Workbook),vNe(a,l),gNe(a,l,e,t),SNe(a,l),NNe(a,l,r,e),bNe(a,l),wNe(a,l,n),l["!margins"]&&or(a,476,oNe(l["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&yNe(a,l),kNe(a,l,e,n),or(a,130),a.end()}function CNe(e){var t=[],r=e.match(/^<c:numCache>/),n;(e.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(s){var l=s.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);l&&(t[+l[1]]=r?+l[2]:l[2])});var a=Ea((e.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(e.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(s){n=s.replace(/<.*?>/g,"")}),[t,a,n]}function ANe(e,t,r,n,a,s){var l=s||{"!type":"chart"};if(!e)return s;var o=0,c=0,d="A",f={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(e.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(p){var y=CNe(p);f.s.r=f.s.c=0,f.e.c=o,d=Ks(o),y[0].forEach(function(g,N){l[d+ji(N)]={t:"n",v:g,z:y[1]},c=N}),f.e.r<c&&(f.e.r=c),++o}),o>0&&(l["!ref"]=Kn(f)),l}function ENe(e,t,r,n,a){if(!e)return e;n||(n={"!id":{}});var s={"!type":"chart","!drawel":null,"!rel":""},l,o=e.match(oV);return o&&uA(o[0],s,a,r),(l=e.match(/drawing r:id="(.*?)"/))&&(s["!rel"]=l[1]),n["!id"][s["!rel"]]&&(s["!drawel"]=n["!id"][s["!rel"]]),s}function TNe(e,t){e.l+=10;var r=ao(e);return{name:r}}function ONe(e,t,r,n,a){if(!e)return e;n||(n={"!id":{}});var s={"!type":"chart","!drawel":null,"!rel":""},l=!1;return ih(e,function(c,d,f){switch(f){case 550:s["!rel"]=c;break;case 651:a.Sheets[r]||(a.Sheets[r]={}),c.name&&(a.Sheets[r].CodeName=c.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:l=!0;break;case 36:l=!1;break;case 37:break;case 38:break;default:if(!(d.T>0)){if(!(d.T<0)){if(!l||t.WTF)throw new Error("Unexpected record 0x"+f.toString(16))}}}},t),n["!id"][s["!rel"]]&&(s["!drawel"]=n["!id"][s["!rel"]]),s}var hA=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],PNe=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],INe=[],DNe=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function wD(e,t){for(var r=0;r!=e.length;++r)for(var n=e[r],a=0;a!=t.length;++a){var s=t[a];if(n[s[0]]==null)n[s[0]]=s[1];else switch(s[2]){case"bool":typeof n[s[0]]=="string"&&(n[s[0]]=js(n[s[0]]));break;case"int":typeof n[s[0]]=="string"&&(n[s[0]]=parseInt(n[s[0]],10));break}}}function kD(e,t){for(var r=0;r!=t.length;++r){var n=t[r];if(e[n[0]]==null)e[n[0]]=n[1];else switch(n[2]){case"bool":typeof e[n[0]]=="string"&&(e[n[0]]=js(e[n[0]]));break;case"int":typeof e[n[0]]=="string"&&(e[n[0]]=parseInt(e[n[0]],10));break}}}function hV(e){kD(e.WBProps,hA),kD(e.CalcPr,DNe),wD(e.WBView,PNe),wD(e.Sheets,INe),b1.date1904=js(e.WBProps.date1904)}function MNe(e){return!e.Workbook||!e.Workbook.WBProps?"false":js(e.Workbook.WBProps.date1904)?"true":"false"}var LNe="][*?/\\".split("");function fV(e,t){if(e.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return LNe.forEach(function(n){if(e.indexOf(n)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}function RNe(e,t,r){e.forEach(function(n,a){fV(n);for(var s=0;s<a;++s)if(n==e[s])throw new Error("Duplicate Sheet Name: "+n);if(r){var l=t&&t[a]&&t[a].CodeName||n;if(l.charCodeAt(0)==95&&l.length>22)throw new Error("Bad Code Name: Worksheet"+l)}})}function FNe(e){if(!e||!e.SheetNames||!e.Sheets)throw new Error("Invalid Workbook");if(!e.SheetNames.length)throw new Error("Workbook is empty");var t=e.Workbook&&e.Workbook.Sheets||[];RNe(e.SheetNames,t,!!e.vbaraw);for(var r=0;r<e.SheetNames.length;++r)M4e(e.Sheets[e.SheetNames[r]],e.SheetNames[r],r)}var BNe=/<\w+:workbook/;function UNe(e,t){if(!e)throw new Error("Could not find file");var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},n=!1,a="xmlns",s={},l=0;if(e.replace(io,function(c,d){var f=Mn(c);switch(Wu(f[0])){case"<?xml":break;case"<workbook":c.match(BNe)&&(a="xmlns"+c.match(/<(\w+):/)[1]),r.xmlns=f[a];break;case"</workbook>":break;case"<fileVersion":delete f[0],r.AppVersion=f;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":hA.forEach(function(p){if(f[p[0]]!=null)switch(p[2]){case"bool":r.WBProps[p[0]]=js(f[p[0]]);break;case"int":r.WBProps[p[0]]=parseInt(f[p[0]],10);break;default:r.WBProps[p[0]]=f[p[0]]}}),f.codeName&&(r.WBProps.CodeName=ss(f.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete f[0],r.WBView.push(f);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(f.state){case"hidden":f.Hidden=1;break;case"veryHidden":f.Hidden=2;break;default:f.Hidden=0}delete f.state,f.name=Ea(ss(f.name)),delete f[0],r.Sheets.push(f);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":n=!0;break;case"</definedNames>":n=!1;break;case"<definedName":s={},s.Name=ss(f.name),f.comment&&(s.Comment=f.comment),f.localSheetId&&(s.Sheet=+f.localSheetId),js(f.hidden||"0")&&(s.Hidden=!0),l=d+c.length;break;case"</definedName>":s.Ref=Ea(ss(e.slice(l,d))),r.Names.push(s);break;case"<definedName/>":break;case"<calcPr":delete f[0],r.CalcPr=f;break;case"<calcPr/>":delete f[0],r.CalcPr=f;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":n=!0;break;case"</AlternateContent>":n=!1;break;case"<revisionPtr":break;default:if(!n&&t.WTF)throw new Error("unrecognized "+f[0]+" in workbook")}return c}),Qm.indexOf(r.xmlns)===-1)throw new Error("Unknown Namespace: "+r.xmlns);return hV(r),r}function mV(e){var t=[Ci];t[t.length]=Sr("workbook",null,{xmlns:Qm[0],"xmlns:r":Ki.r});var r=e.Workbook&&(e.Workbook.Names||[]).length>0,n={codeName:"ThisWorkbook"};e.Workbook&&e.Workbook.WBProps&&(hA.forEach(function(o){e.Workbook.WBProps[o[0]]!=null&&e.Workbook.WBProps[o[0]]!=o[1]&&(n[o[0]]=e.Workbook.WBProps[o[0]])}),e.Workbook.WBProps.CodeName&&(n.codeName=e.Workbook.WBProps.CodeName,delete n.CodeName)),t[t.length]=Sr("workbookPr",null,n);var a=e.Workbook&&e.Workbook.Sheets||[],s=0;if(a&&a[0]&&a[0].Hidden){for(t[t.length]="<bookViews>",s=0;s!=e.SheetNames.length&&!(!a[s]||!a[s].Hidden);++s);s==e.SheetNames.length&&(s=0),t[t.length]='<workbookView firstSheet="'+s+'" activeTab="'+s+'"/>',t[t.length]="</bookViews>"}for(t[t.length]="<sheets>",s=0;s!=e.SheetNames.length;++s){var l={name:Ya(e.SheetNames[s].slice(0,31))};if(l.sheetId=""+(s+1),l["r:id"]="rId"+(s+1),a[s])switch(a[s].Hidden){case 1:l.state="hidden";break;case 2:l.state="veryHidden";break}t[t.length]=Sr("sheet",null,l)}return t[t.length]="</sheets>",r&&(t[t.length]="<definedNames>",e.Workbook&&e.Workbook.Names&&e.Workbook.Names.forEach(function(o){var c={name:o.Name};o.Comment&&(c.comment=o.Comment),o.Sheet!=null&&(c.localSheetId=""+o.Sheet),o.Hidden&&(c.hidden="1"),o.Ref&&(t[t.length]=Sr("definedName",Ya(o.Ref),c))}),t[t.length]="</definedNames>"),t.length>2&&(t[t.length]="</workbook>",t[1]=t[1].replace("/>",">")),t.join("")}function zNe(e,t){var r={};return r.Hidden=e.read_shift(4),r.iTabID=e.read_shift(4),r.strRelID=jS(e),r.name=ao(e),r}function qNe(e,t){return t||(t=Bt(127)),t.write_shift(4,e.Hidden),t.write_shift(4,e.iTabID),ZC(e.strRelID,t),vl(e.name.slice(0,31),t),t.length>t.l?t.slice(0,t.l):t}function HNe(e,t){var r={},n=e.read_shift(4);r.defaultThemeVersion=e.read_shift(4);var a=t>8?ao(e):"";return a.length>0&&(r.CodeName=a),r.autoCompressPictures=!!(n&65536),r.backupFile=!!(n&64),r.checkCompatibility=!!(n&4096),r.date1904=!!(n&1),r.filterPrivacy=!!(n&8),r.hidePivotFieldList=!!(n&1024),r.promptedSolutions=!!(n&16),r.publishItems=!!(n&2048),r.refreshAllConnections=!!(n&262144),r.saveExternalLinkValues=!!(n&128),r.showBorderUnselectedTables=!!(n&4),r.showInkAnnotation=!!(n&32),r.showObjects=["all","placeholders","none"][n>>13&3],r.showPivotChartFilter=!!(n&32768),r.updateLinks=["userSet","never","always"][n>>8&3],r}function $Ne(e,t){t||(t=Bt(72));var r=0;return e&&e.filterPrivacy&&(r|=8),t.write_shift(4,r),t.write_shift(4,0),s$(e&&e.CodeName||"ThisWorkbook",t),t.slice(0,t.l)}function VNe(e,t){var r={};return e.read_shift(4),r.ArchID=e.read_shift(4),e.l+=t-8,r}function WNe(e,t,r){var n=e.l+t;e.l+=4,e.l+=1;var a=e.read_shift(4),s=kve(e),l=E4e(e,0,r),o=YC(e);e.l=n;var c={Name:s,Ptg:l};return a<268435455&&(c.Sheet=a),o&&(c.Comment=o),c}function KNe(e,t){var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},n=[],a=!1;t||(t={}),t.biff=12;var s=[],l=[[]];return l.SheetNames=[],l.XTI=[],vb[16]={n:"BrtFRTArchID$",f:VNe},ih(e,function(c,d,f){switch(f){case 156:l.SheetNames.push(c.name),r.Sheets.push(c);break;case 153:r.WBProps=c;break;case 39:c.Sheet!=null&&(t.SID=c.Sheet),c.Ref=Jl(c.Ptg,null,null,l,t),delete t.SID,delete c.Ptg,s.push(c);break;case 1036:break;case 357:case 358:case 355:case 667:l[0].length?l.push([f,c]):l[0]=[f,c],l[l.length-1].XTI=[];break;case 362:l.length===0&&(l[0]=[],l[0].XTI=[]),l[l.length-1].XTI=l[l.length-1].XTI.concat(c),l.XTI=l.XTI.concat(c);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:n.push(f),a=!0;break;case 36:n.pop(),a=!1;break;case 37:n.push(f),a=!0;break;case 38:n.pop(),a=!1;break;case 16:break;default:if(!d.T){if(!a||t.WTF&&n[n.length-1]!=37&&n[n.length-1]!=35)throw new Error("Unexpected record 0x"+f.toString(16))}}},t),hV(r),r.Names=s,r.supbooks=l,r}function GNe(e,t){or(e,143);for(var r=0;r!=t.SheetNames.length;++r){var n=t.Workbook&&t.Workbook.Sheets&&t.Workbook.Sheets[r]&&t.Workbook.Sheets[r].Hidden||0,a={Hidden:n,iTabID:r+1,strRelID:"rId"+(r+1),name:t.SheetNames[r]};or(e,156,qNe(a))}or(e,144)}function XNe(e,t){t||(t=Bt(127));for(var r=0;r!=4;++r)t.write_shift(4,0);return vl("SheetJS",t),vl(cw.version,t),vl(cw.version,t),vl("7262",t),t.length>t.l?t.slice(0,t.l):t}function YNe(e,t){t||(t=Bt(29)),t.write_shift(-4,0),t.write_shift(-4,460),t.write_shift(4,28800),t.write_shift(4,17600),t.write_shift(4,500),t.write_shift(4,e),t.write_shift(4,e);var r=120;return t.write_shift(1,r),t.length>t.l?t.slice(0,t.l):t}function ZNe(e,t){if(!(!t.Workbook||!t.Workbook.Sheets)){for(var r=t.Workbook.Sheets,n=0,a=-1,s=-1;n<r.length;++n)!r[n]||!r[n].Hidden&&a==-1?a=n:r[n].Hidden==1&&s==-1&&(s=n);s>a||(or(e,135),or(e,158,YNe(a)),or(e,136))}}function QNe(e,t){var r=nc();return or(r,131),or(r,128,XNe()),or(r,153,$Ne(e.Workbook&&e.Workbook.WBProps||null)),ZNe(r,e),GNe(r,e),or(r,132),r.end()}function JNe(e,t,r){return t.slice(-4)===".bin"?KNe(e,r):UNe(e,r)}function e_e(e,t,r,n,a,s,l,o){return t.slice(-4)===".bin"?xNe(e,n,r,a,s,l,o):W4e(e,n,r,a,s,l,o)}function t_e(e,t,r,n,a,s,l,o){return t.slice(-4)===".bin"?ONe(e,n,r,a,s):ENe(e,n,r,a,s)}function r_e(e,t,r,n,a,s,l,o){return t.slice(-4)===".bin"?a5e():s5e()}function n_e(e,t,r,n,a,s,l,o){return t.slice(-4)===".bin"?r5e():n5e()}function a_e(e,t,r,n){return t.slice(-4)===".bin"?Jwe(e,r,n):zwe(e,r,n)}function s_e(e,t,r){return G$(e,r)}function i_e(e,t,r){return t.slice(-4)===".bin"?iwe(e,r):nwe(e,r)}function l_e(e,t,r){return t.slice(-4)===".bin"?Zke(e,r):qke(e,r)}function o_e(e,t,r){return t.slice(-4)===".bin"?Bke(e):Rke(e)}function c_e(e,t,r,n){return r.slice(-4)===".bin"?Uke(e,t,r,n):void 0}function d_e(e,t,r){return t.slice(-4)===".bin"?Dke(e,t,r):Lke(e,t,r)}function u_e(e,t,r){return(t.slice(-4)===".bin"?QNe:mV)(e)}function h_e(e,t,r,n,a){return(t.slice(-4)===".bin"?jNe:cV)(e,r,n,a)}function f_e(e,t,r){return(t.slice(-4)===".bin"?cke:W$)(e,r)}function m_e(e,t,r){return(t.slice(-4)===".bin"?cwe:F$)(e,r)}function x_e(e,t,r){return(t.slice(-4)===".bin"?Qke:Z$)(e)}function p_e(e){return(e.slice(-4)===".bin"?Mke:X$)()}var xV=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,pV=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function Rd(e,t){var r=e.split(/\s+/),n=[];if(n[0]=r[0],r.length===1)return n;var a=e.match(xV),s,l,o,c;if(a)for(c=0;c!=a.length;++c)s=a[c].match(pV),(l=s[1].indexOf(":"))===-1?n[s[1]]=s[2].slice(1,s[2].length-1):(s[1].slice(0,6)==="xmlns:"?o="xmlns"+s[1].slice(6):o=s[1].slice(l+1),n[o]=s[2].slice(1,s[2].length-1));return n}function g_e(e){var t=e.split(/\s+/),r={};if(t.length===1)return r;var n=e.match(xV),a,s,l,o;if(n)for(o=0;o!=n.length;++o)a=n[o].match(pV),(s=a[1].indexOf(":"))===-1?r[a[1]]=a[2].slice(1,a[2].length-1):(a[1].slice(0,6)==="xmlns:"?l="xmlns"+a[1].slice(6):l=a[1].slice(s+1),r[l]=a[2].slice(1,a[2].length-1));return r}var Ig;function b_e(e,t){var r=Ig[e]||Ea(e);return r==="General"?Bm(t):xd(r,t)}function v_e(e,t,r,n){var a=n;switch((r[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":a=js(n);break;case"i2":case"int":a=parseInt(n,10);break;case"r4":case"float":a=parseFloat(n);break;case"date":case"dateTime.tz":a=Es(n);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+r[0])}e[Ea(t)]=a}function y_e(e,t,r){if(e.t!=="z"){if(!r||r.cellText!==!1)try{e.t==="e"?e.w=e.w||lh[e.v]:t==="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=db(e.v):e.w=Bm(e.v):e.w=b_e(t||"General",e.v)}catch(s){if(r.WTF)throw s}try{var n=Ig[t]||t||"General";if(r.cellNF&&(e.z=n),r.cellDates&&e.t=="n"&&xp(n)){var a=rm(e.v);a&&(e.t="d",e.v=new Date(a.y,a.m-1,a.d,a.H,a.M,a.S,a.u))}}catch(s){if(r.WTF)throw s}}}function w_e(e,t,r){if(r.cellStyles&&t.Interior){var n=t.Interior;n.Pattern&&(n.patternType=Iwe[n.Pattern]||n.Pattern)}e[t.ID]=t}function k_e(e,t,r,n,a,s,l,o,c,d){var f="General",p=n.StyleID,y={};d=d||{};var g=[],N=0;for(p===void 0&&o&&(p=o.StyleID),p===void 0&&l&&(p=l.StyleID);s[p]!==void 0&&(s[p].nf&&(f=s[p].nf),s[p].Interior&&g.push(s[p].Interior),!!s[p].Parent);)p=s[p].Parent;switch(r.Type){case"Boolean":n.t="b",n.v=js(e);break;case"String":n.t="s",n.r=BI(Ea(e)),n.v=e.indexOf("<")>-1?Ea(t||e).replace(/<.*?>/g,""):n.r;break;case"DateTime":e.slice(-1)!="Z"&&(e+="Z"),n.v=(Es(e)-new Date(Date.UTC(1899,11,30)))/(1440*60*1e3),n.v!==n.v?n.v=Ea(e):n.v<60&&(n.v=n.v-1),(!f||f=="General")&&(f="yyyy-mm-dd");case"Number":n.v===void 0&&(n.v=+e),n.t||(n.t="n");break;case"Error":n.t="e",n.v=d$[e],d.cellText!==!1&&(n.w=e);break;default:e==""&&t==""?n.t="z":(n.t="s",n.v=BI(t||e));break}if(y_e(n,f,d),d.cellFormula!==!1)if(n.Formula){var w=Ea(n.Formula);w.charCodeAt(0)==61&&(w=w.slice(1)),n.f=g1(w,a),delete n.Formula,n.ArrayRange=="RC"?n.F=g1("RC:RC",a):n.ArrayRange&&(n.F=g1(n.ArrayRange,a),c.push([Ta(n.F),n.F]))}else for(N=0;N<c.length;++N)a.r>=c[N][0].s.r&&a.r<=c[N][0].e.r&&a.c>=c[N][0].s.c&&a.c<=c[N][0].e.c&&(n.F=c[N][1]);d.cellStyles&&(g.forEach(function(k){!y.patternType&&k.patternType&&(y.patternType=k.patternType)}),n.s=y),n.StyleID!==void 0&&(n.ixfe=n.StyleID)}function N_e(e){e.t=e.v||"",e.t=e.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.v=e.w=e.ixfe=void 0}function dN(e,t){var r=t||{};pp();var n=bg($C(e));(r.type=="binary"||r.type=="array"||r.type=="base64")&&(n=ss(n));var a=n.slice(0,1024).toLowerCase(),s=!1;if(a=a.replace(/".*?"/g,""),(a.indexOf(">")&1023)>Math.min(a.indexOf(",")&1023,a.indexOf(";")&1023)){var l=Ts(r);return l.type="string",K1.to_workbook(n,l)}if(a.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(dt){a.indexOf("<"+dt)>=0&&(s=!0)}),s)return oSe(n,r);Ig={"General Number":"General","General Date":En[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":En[15],"Short Date":En[14],"Long Time":En[19],"Medium Time":En[18],"Short Time":En[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:En[2],Standard:En[4],Percent:En[10],Scientific:En[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var o,c=[],d,f={},p=[],y=r.dense?[]:{},g="",N={},w={},k=Rd('<Data ss:Type="String">'),S=0,O=0,E=0,D={s:{r:2e6,c:2e6},e:{r:0,c:0}},H={},W={},R="",z=0,U=[],Z={},q={},K=0,Q=[],re=[],ae={},de=[],he,Se=!1,ke=[],Le=[],fe={},F=0,te=0,Y={Sheets:[],WBProps:{date1904:!1}},ne={};fb.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"");for(var ee="";o=fb.exec(n);)switch(o[3]=(ee=o[3]).toLowerCase()){case"data":if(ee=="data"){if(o[1]==="/"){if((d=c.pop())[0]!==o[3])throw new Error("Bad state: "+d.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&c.push([o[3],!0]);break}if(c[c.length-1][1])break;o[1]==="/"?k_e(n.slice(S,o.index),R,k,c[c.length-1][0]=="comment"?ae:N,{c:O,r:E},H,de[O],w,ke,r):(R="",k=Rd(o[0]),S=o.index+o[0].length);break;case"cell":if(o[1]==="/")if(re.length>0&&(N.c=re),(!r.sheetRows||r.sheetRows>E)&&N.v!==void 0&&(r.dense?(y[E]||(y[E]=[]),y[E][O]=N):y[Ks(O)+ji(E)]=N),N.HRef&&(N.l={Target:Ea(N.HRef)},N.HRefScreenTip&&(N.l.Tooltip=N.HRefScreenTip),delete N.HRef,delete N.HRefScreenTip),(N.MergeAcross||N.MergeDown)&&(F=O+(parseInt(N.MergeAcross,10)|0),te=E+(parseInt(N.MergeDown,10)|0),U.push({s:{c:O,r:E},e:{c:F,r:te}})),!r.sheetStubs)N.MergeAcross?O=F+1:++O;else if(N.MergeAcross||N.MergeDown){for(var Ce=O;Ce<=F;++Ce)for(var me=E;me<=te;++me)(Ce>O||me>E)&&(r.dense?(y[me]||(y[me]=[]),y[me][Ce]={t:"z"}):y[Ks(Ce)+ji(me)]={t:"z"});O=F+1}else++O;else N=g_e(o[0]),N.Index&&(O=+N.Index-1),O<D.s.c&&(D.s.c=O),O>D.e.c&&(D.e.c=O),o[0].slice(-2)==="/>"&&++O,re=[];break;case"row":o[1]==="/"||o[0].slice(-2)==="/>"?(E<D.s.r&&(D.s.r=E),E>D.e.r&&(D.e.r=E),o[0].slice(-2)==="/>"&&(w=Rd(o[0]),w.Index&&(E=+w.Index-1)),O=0,++E):(w=Rd(o[0]),w.Index&&(E=+w.Index-1),fe={},(w.AutoFitHeight=="0"||w.Height)&&(fe.hpx=parseInt(w.Height,10),fe.hpt=bb(fe.hpx),Le[E]=fe),w.Hidden=="1"&&(fe.hidden=!0,Le[E]=fe));break;case"worksheet":if(o[1]==="/"){if((d=c.pop())[0]!==o[3])throw new Error("Bad state: "+d.join("|"));p.push(g),D.s.r<=D.e.r&&D.s.c<=D.e.c&&(y["!ref"]=Kn(D),r.sheetRows&&r.sheetRows<=D.e.r&&(y["!fullref"]=y["!ref"],D.e.r=r.sheetRows-1,y["!ref"]=Kn(D))),U.length&&(y["!merges"]=U),de.length>0&&(y["!cols"]=de),Le.length>0&&(y["!rows"]=Le),f[g]=y}else D={s:{r:2e6,c:2e6},e:{r:0,c:0}},E=O=0,c.push([o[3],!1]),d=Rd(o[0]),g=Ea(d.Name),y=r.dense?[]:{},U=[],ke=[],Le=[],ne={name:g,Hidden:0},Y.Sheets.push(ne);break;case"table":if(o[1]==="/"){if((d=c.pop())[0]!==o[3])throw new Error("Bad state: "+d.join("|"))}else{if(o[0].slice(-2)=="/>")break;c.push([o[3],!1]),de=[],Se=!1}break;case"style":o[1]==="/"?w_e(H,W,r):W=Rd(o[0]);break;case"numberformat":W.nf=Ea(Rd(o[0]).Format||"General"),Ig[W.nf]&&(W.nf=Ig[W.nf]);for(var se=0;se!=392&&En[se]!=W.nf;++se);if(se==392){for(se=57;se!=392;++se)if(En[se]==null){B0(W.nf,se);break}}break;case"column":if(c[c.length-1][0]!=="table")break;if(he=Rd(o[0]),he.Hidden&&(he.hidden=!0,delete he.Hidden),he.Width&&(he.wpx=parseInt(he.Width,10)),!Se&&he.wpx>10){Se=!0,to=$$;for(var je=0;je<de.length;++je)de[je]&&cf(de[je])}Se&&cf(he),de[he.Index-1||de.length]=he;for(var be=0;be<+he.Span;++be)de[de.length]=Ts(he);break;case"namedrange":if(o[1]==="/")break;Y.Names||(Y.Names=[]);var ie=Mn(o[0]),Te={Name:ie.Name,Ref:g1(ie.RefersTo.slice(1),{r:0,c:0})};Y.Sheets.length>0&&(Te.Sheet=Y.Sheets.length-1),Y.Names.push(Te);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(o[0].slice(-2)==="/>")break;o[1]==="/"?R+=n.slice(z,o.index):z=o.index+o[0].length;break;case"interior":if(!r.cellStyles)break;W.Interior=Rd(o[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(o[0].slice(-2)==="/>")break;o[1]==="/"?Kve(Z,ee,n.slice(K,o.index)):K=o.index+o[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(o[1]==="/"){if((d=c.pop())[0]!==o[3])throw new Error("Bad state: "+d.join("|"))}else c.push([o[3],!1]);break;case"comment":if(o[1]==="/"){if((d=c.pop())[0]!==o[3])throw new Error("Bad state: "+d.join("|"));N_e(ae),re.push(ae)}else c.push([o[3],!1]),d=Rd(o[0]),ae={a:d.Author};break;case"autofilter":if(o[1]==="/"){if((d=c.pop())[0]!==o[3])throw new Error("Bad state: "+d.join("|"))}else if(o[0].charAt(o[0].length-2)!=="/"){var De=Rd(o[0]);y["!autofilter"]={ref:g1(De.Range).replace(/\$/g,"")},c.push([o[3],!0])}break;case"name":break;case"datavalidation":if(o[1]==="/"){if((d=c.pop())[0]!==o[3])throw new Error("Bad state: "+d.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&c.push([o[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(o[1]==="/"){if((d=c.pop())[0]!==o[3])throw new Error("Bad state: "+d.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&c.push([o[3],!0]);break;case"null":break;default:if(c.length==0&&o[3]=="document"||c.length==0&&o[3]=="uof")return CD(n,r);var ye=!0;switch(c[c.length-1][0]){case"officedocumentsettings":switch(o[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:ye=!1}break;case"componentoptions":switch(o[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:ye=!1}break;case"excelworkbook":switch(o[3]){case"date1904":Y.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:ye=!1}break;case"workbookoptions":switch(o[3]){case"owcversion":break;case"height":break;case"width":break;default:ye=!1}break;case"worksheetoptions":switch(o[3]){case"visible":if(o[0].slice(-2)!=="/>")if(o[1]==="/")switch(n.slice(K,o.index)){case"SheetHidden":ne.Hidden=1;break;case"SheetVeryHidden":ne.Hidden=2;break}else K=o.index+o[0].length;break;case"header":y["!margins"]||ym(y["!margins"]={},"xlml"),isNaN(+Mn(o[0]).Margin)||(y["!margins"].header=+Mn(o[0]).Margin);break;case"footer":y["!margins"]||ym(y["!margins"]={},"xlml"),isNaN(+Mn(o[0]).Margin)||(y["!margins"].footer=+Mn(o[0]).Margin);break;case"pagemargins":var rt=Mn(o[0]);y["!margins"]||ym(y["!margins"]={},"xlml"),isNaN(+rt.Top)||(y["!margins"].top=+rt.Top),isNaN(+rt.Left)||(y["!margins"].left=+rt.Left),isNaN(+rt.Right)||(y["!margins"].right=+rt.Right),isNaN(+rt.Bottom)||(y["!margins"].bottom=+rt.Bottom);break;case"displayrighttoleft":Y.Views||(Y.Views=[]),Y.Views[0]||(Y.Views[0]={}),Y.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":y["!outline"]||(y["!outline"]={}),y["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":y["!outline"]||(y["!outline"]={}),y["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:ye=!1}break;case"pivottable":case"pivotcache":switch(o[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:ye=!1}break;case"pagebreaks":switch(o[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:ye=!1}break;case"autofilter":switch(o[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:ye=!1}break;case"querytable":switch(o[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:ye=!1}break;case"datavalidation":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:ye=!1}break;case"sorting":case"conditionalformatting":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:ye=!1}break;case"mapinfo":case"schema":case"data":switch(o[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:ye=!1}break;case"smarttags":break;default:ye=!1;break}if(ye||o[3].match(/!\[CDATA/))break;if(!c[c.length-1][1])throw"Unrecognized tag: "+o[3]+"|"+c.join("|");if(c[c.length-1][0]==="customdocumentproperties"){if(o[0].slice(-2)==="/>")break;o[1]==="/"?v_e(q,ee,Q,n.slice(K,o.index)):(Q=o,K=o.index+o[0].length);break}if(r.WTF)throw"Unrecognized tag: "+o[3]+"|"+c.join("|")}var st={};return!r.bookSheets&&!r.bookProps&&(st.Sheets=f),st.SheetNames=p,st.Workbook=Y,st.SSF=Ts(En),st.Props=Z,st.Custprops=q,st}function IS(e,t){switch(mA(t=t||{}),t.type||"base64"){case"base64":return dN(Pc(e),t);case"binary":case"buffer":case"file":return dN(e,t);case"array":return dN(vf(e),t)}}function __e(e,t){var r=[];return e.Props&&r.push(Gve(e.Props,t)),e.Custprops&&r.push(Xve(e.Props,e.Custprops)),r.join("")}function S_e(){return""}function j_e(e,t){var r=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return t.cellXfs.forEach(function(n,a){var s=[];s.push(Sr("NumberFormat",null,{"ss:Format":Ya(En[n.numFmtId])}));var l={"ss:ID":"s"+(21+a)};r.push(Sr("Style",s.join(""),l))}),Sr("Styles",r.join(""))}function gV(e){return Sr("NamedRange",null,{"ss:Name":e.Name,"ss:RefersTo":"="+oA(e.Ref,{r:0,c:0})})}function C_e(e){if(!((e||{}).Workbook||{}).Names)return"";for(var t=e.Workbook.Names,r=[],n=0;n<t.length;++n){var a=t[n];a.Sheet==null&&(a.Name.match(/^_xlfn\./)||r.push(gV(a)))}return Sr("Names",r.join(""))}function A_e(e,t,r,n){if(!e||!((n||{}).Workbook||{}).Names)return"";for(var a=n.Workbook.Names,s=[],l=0;l<a.length;++l){var o=a[l];o.Sheet==r&&(o.Name.match(/^_xlfn\./)||s.push(gV(o)))}return s.join("")}function E_e(e,t,r,n){if(!e)return"";var a=[];if(e["!margins"]&&(a.push("<PageSetup>"),e["!margins"].header&&a.push(Sr("Header",null,{"x:Margin":e["!margins"].header})),e["!margins"].footer&&a.push(Sr("Footer",null,{"x:Margin":e["!margins"].footer})),a.push(Sr("PageMargins",null,{"x:Bottom":e["!margins"].bottom||"0.75","x:Left":e["!margins"].left||"0.7","x:Right":e["!margins"].right||"0.7","x:Top":e["!margins"].top||"0.75"})),a.push("</PageSetup>")),n&&n.Workbook&&n.Workbook.Sheets&&n.Workbook.Sheets[r])if(n.Workbook.Sheets[r].Hidden)a.push(Sr("Visible",n.Workbook.Sheets[r].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var s=0;s<r&&!(n.Workbook.Sheets[s]&&!n.Workbook.Sheets[s].Hidden);++s);s==r&&a.push("<Selected/>")}return((((n||{}).Workbook||{}).Views||[])[0]||{}).RTL&&a.push("<DisplayRightToLeft/>"),e["!protect"]&&(a.push(Dl("ProtectContents","True")),e["!protect"].objects&&a.push(Dl("ProtectObjects","True")),e["!protect"].scenarios&&a.push(Dl("ProtectScenarios","True")),e["!protect"].selectLockedCells!=null&&!e["!protect"].selectLockedCells?a.push(Dl("EnableSelection","NoSelection")):e["!protect"].selectUnlockedCells!=null&&!e["!protect"].selectUnlockedCells&&a.push(Dl("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(l){e["!protect"][l[0]]&&a.push("<"+l[1]+"/>")})),a.length==0?"":Sr("WorksheetOptions",a.join(""),{xmlns:yc.x})}function T_e(e){return e.map(function(t){var r=Zbe(t.t||""),n=Sr("ss:Data",r,{xmlns:"http://www.w3.org/TR/REC-html40"});return Sr("Comment",n,{"ss:Author":t.a})}).join("")}function O_e(e,t,r,n,a,s,l){if(!e||e.v==null&&e.f==null)return"";var o={};if(e.f&&(o["ss:Formula"]="="+Ya(oA(e.f,l))),e.F&&e.F.slice(0,t.length)==t){var c=Gs(e.F.slice(t.length+1));o["ss:ArrayRange"]="RC:R"+(c.r==l.r?"":"["+(c.r-l.r)+"]")+"C"+(c.c==l.c?"":"["+(c.c-l.c)+"]")}if(e.l&&e.l.Target&&(o["ss:HRef"]=Ya(e.l.Target),e.l.Tooltip&&(o["x:HRefScreenTip"]=Ya(e.l.Tooltip))),r["!merges"])for(var d=r["!merges"],f=0;f!=d.length;++f)d[f].s.c!=l.c||d[f].s.r!=l.r||(d[f].e.c>d[f].s.c&&(o["ss:MergeAcross"]=d[f].e.c-d[f].s.c),d[f].e.r>d[f].s.r&&(o["ss:MergeDown"]=d[f].e.r-d[f].s.r));var p="",y="";switch(e.t){case"z":if(!n.sheetStubs)return"";break;case"n":p="Number",y=String(e.v);break;case"b":p="Boolean",y=e.v?"1":"0";break;case"e":p="Error",y=lh[e.v];break;case"d":p="DateTime",y=new Date(e.v).toISOString(),e.z==null&&(e.z=e.z||En[14]);break;case"s":p="String",y=Ybe(e.v||"");break}var g=wf(n.cellXfs,e,n);o["ss:StyleID"]="s"+(21+g),o["ss:Index"]=l.c+1;var N=e.v!=null?y:"",w=e.t=="z"?"":'<Data ss:Type="'+p+'">'+N+"</Data>";return(e.c||[]).length>0&&(w+=T_e(e.c)),Sr("Cell",w,o)}function P_e(e,t){var r='<Row ss:Index="'+(e+1)+'"';return t&&(t.hpt&&!t.hpx&&(t.hpx=G1(t.hpt)),t.hpx&&(r+=' ss:AutoFitHeight="0" ss:Height="'+t.hpx+'"'),t.hidden&&(r+=' ss:Hidden="1"')),r+">"}function I_e(e,t,r,n){if(!e["!ref"])return"";var a=Ta(e["!ref"]),s=e["!merges"]||[],l=0,o=[];e["!cols"]&&e["!cols"].forEach(function(k,S){cf(k);var O=!!k.width,E=Uk(S,k),D={"ss:Index":S+1};O&&(D["ss:Width"]=pb(E.width)),k.hidden&&(D["ss:Hidden"]="1"),o.push(Sr("Column",null,D))});for(var c=Array.isArray(e),d=a.s.r;d<=a.e.r;++d){for(var f=[P_e(d,(e["!rows"]||[])[d])],p=a.s.c;p<=a.e.c;++p){var y=!1;for(l=0;l!=s.length;++l)if(!(s[l].s.c>p)&&!(s[l].s.r>d)&&!(s[l].e.c<p)&&!(s[l].e.r<d)){(s[l].s.c!=p||s[l].s.r!=d)&&(y=!0);break}if(!y){var g={r:d,c:p},N=Tn(g),w=c?(e[d]||[])[p]:e[N];f.push(O_e(w,N,e,t,r,n,g))}}f.push("</Row>"),f.length>2&&o.push(f.join(""))}return o.join("")}function D_e(e,t,r){var n=[],a=r.SheetNames[e],s=r.Sheets[a],l=s?A_e(s,t,e,r):"";return l.length>0&&n.push("<Names>"+l+"</Names>"),l=s?I_e(s,t,e,r):"",l.length>0&&n.push("<Table>"+l+"</Table>"),n.push(E_e(s,t,e,r)),n.join("")}function M_e(e,t){t||(t={}),e.SSF||(e.SSF=Ts(En)),e.SSF&&(pp(),Ik(e.SSF),t.revssf=Mk(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF,t.cellXfs=[],wf(t.cellXfs,{},{revssf:{General:0}}));var r=[];r.push(__e(e,t)),r.push(S_e()),r.push(""),r.push("");for(var n=0;n<e.SheetNames.length;++n)r.push(Sr("Worksheet",D_e(n,t,e),{"ss:Name":Ya(e.SheetNames[n])}));return r[2]=j_e(e,t),r[3]=C_e(e),Ci+Sr("Workbook",r.join(""),{xmlns:yc.ss,"xmlns:o":yc.o,"xmlns:x":yc.x,"xmlns:ss":yc.ss,"xmlns:dt":yc.dt,"xmlns:html":yc.html})}function L_e(e){var t={},r=e.content;if(r.l=28,t.AnsiUserType=r.read_shift(0,"lpstr-ansi"),t.AnsiClipboardFormat=Cve(r),r.length-r.l<=4)return t;var n=r.read_shift(4);if(n==0||n>40||(r.l-=4,t.Reserved1=r.read_shift(0,"lpstr-ansi"),r.length-r.l<=4)||(n=r.read_shift(4),n!==1907505652)||(t.UnicodeClipboardFormat=Ave(r),n=r.read_shift(4),n==0||n>40))return t;r.l-=4,t.Reserved2=r.read_shift(0,"lpwstr")}var R_e=[60,1084,2066,2165,2175];function F_e(e,t,r,n,a){var s=n,l=[],o=r.slice(r.l,r.l+s);if(a&&a.enc&&a.enc.insitu&&o.length>0)switch(e){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:a.enc.insitu(o)}l.push(o),r.l+=s;for(var c=O0(r,r.l),d=DS[c],f=0;d!=null&&R_e.indexOf(c)>-1;)s=O0(r,r.l+2),f=r.l+4,c==2066?f+=4:(c==2165||c==2175)&&(f+=12),o=r.slice(f,r.l+4+s),l.push(o),r.l+=4+s,d=DS[c=O0(r,r.l)];var p=pl(l);Pl(p,0);var y=0;p.lens=[];for(var g=0;g<l.length;++g)p.lens.push(y),y+=l[g].length;if(p.length<n)throw"XLS Record 0x"+e.toString(16)+" Truncated: "+p.length+" < "+n;return t.f(p,p.length,a)}function yu(e,t,r){if(e.t!=="z"&&e.XF){var n=0;try{n=e.z||e.XF.numFmtId||0,t.cellNF&&(e.z=En[n])}catch(s){if(t.WTF)throw s}if(!t||t.cellText!==!1)try{e.t==="e"?e.w=e.w||lh[e.v]:n===0||n=="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=db(e.v):e.w=Bm(e.v):e.w=xd(n,e.v,{date1904:!!r,dateNF:t&&t.dateNF})}catch(s){if(t.WTF)throw s}if(t.cellDates&&n&&e.t=="n"&&xp(En[n]||String(n))){var a=rm(e.v);a&&(e.t="d",e.v=new Date(a.y,a.m-1,a.d,a.H,a.M,a.S,a.u))}}}function U2(e,t,r){return{v:e,ixfe:t,t:r}}function B_e(e,t){var r={opts:{}},n={},a=t.dense?[]:{},s={},l={},o=null,c=[],d="",f={},p,y="",g,N,w,k,S={},O=[],E,D,H=[],W=[],R={Sheets:[],WBProps:{date1904:!1},Views:[{}]},z={},U=function(Gt){return Gt<8?gm[Gt]:Gt<64&&W[Gt-8]||gm[Gt]},Z=function(Gt,ur,wr){var lr=ur.XF.data;if(!(!lr||!lr.patternType||!wr||!wr.cellStyles)){ur.s={},ur.s.patternType=lr.patternType;var mt;(mt=xb(U(lr.icvFore)))&&(ur.s.fgColor={rgb:mt}),(mt=xb(U(lr.icvBack)))&&(ur.s.bgColor={rgb:mt})}},q=function(Gt,ur,wr){if(!(fe>1)&&!(wr.sheetRows&&Gt.r>=wr.sheetRows)){if(wr.cellStyles&&ur.XF&&ur.XF.data&&Z(Gt,ur,wr),delete ur.ixfe,delete ur.XF,p=Gt,y=Tn(Gt),(!l||!l.s||!l.e)&&(l={s:{r:0,c:0},e:{r:0,c:0}}),Gt.r<l.s.r&&(l.s.r=Gt.r),Gt.c<l.s.c&&(l.s.c=Gt.c),Gt.r+1>l.e.r&&(l.e.r=Gt.r+1),Gt.c+1>l.e.c&&(l.e.c=Gt.c+1),wr.cellFormula&&ur.f){for(var lr=0;lr<O.length;++lr)if(!(O[lr][0].s.c>Gt.c||O[lr][0].s.r>Gt.r)&&!(O[lr][0].e.c<Gt.c||O[lr][0].e.r<Gt.r)){ur.F=Kn(O[lr][0]),(O[lr][0].s.c!=Gt.c||O[lr][0].s.r!=Gt.r)&&delete ur.f,ur.f&&(ur.f=""+Jl(O[lr][1],l,Gt,ke,K));break}}wr.dense?(a[Gt.r]||(a[Gt.r]=[]),a[Gt.r][Gt.c]=ur):a[y]=ur}},K={enc:!1,sbcch:0,snames:[],sharedf:S,arrayf:O,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!t&&!!t.cellStyles,WTF:!!t&&!!t.wtf};t.password&&(K.password=t.password);var Q,re=[],ae=[],de=[],he=[],Se=!1,ke=[];ke.SheetNames=K.snames,ke.sharedf=K.sharedf,ke.arrayf=K.arrayf,ke.names=[],ke.XTI=[];var Le=0,fe=0,F=0,te=[],Y=[],ne;K.codepage=1200,Zd(1200);for(var ee=!1;e.l<e.length-1;){var Ce=e.l,me=e.read_shift(2);if(me===0&&Le===10)break;var se=e.l===e.length?0:e.read_shift(2),je=DS[me];if(je&&je.f){if(t.bookSheets&&Le===133&&me!==133)break;if(Le=me,je.r===2||je.r==12){var be=e.read_shift(2);if(se-=2,!K.enc&&be!==me&&((be&255)<<8|be>>8)!==me)throw new Error("rt mismatch: "+be+"!="+me);je.r==12&&(e.l+=10,se-=10)}var ie={};if(me===10?ie=je.f(e,se,K):ie=F_e(me,je,e,se,K),fe==0&&[9,521,1033,2057].indexOf(Le)===-1)continue;switch(me){case 34:r.opts.Date1904=R.WBProps.date1904=ie;break;case 134:r.opts.WriteProtect=!0;break;case 47:if(K.enc||(e.l=0),K.enc=ie,!t.password)throw new Error("File is password-protected");if(ie.valid==null)throw new Error("Encryption scheme unsupported");if(!ie.valid)throw new Error("Password is incorrect");break;case 92:K.lastuser=ie;break;case 66:var Te=Number(ie);switch(Te){case 21010:Te=1200;break;case 32768:Te=1e4;break;case 32769:Te=1252;break}Zd(K.codepage=Te),ee=!0;break;case 317:K.rrtabid=ie;break;case 25:K.winlocked=ie;break;case 439:r.opts.RefreshAll=ie;break;case 12:r.opts.CalcCount=ie;break;case 16:r.opts.CalcDelta=ie;break;case 17:r.opts.CalcIter=ie;break;case 13:r.opts.CalcMode=ie;break;case 14:r.opts.CalcPrecision=ie;break;case 95:r.opts.CalcSaveRecalc=ie;break;case 15:K.CalcRefMode=ie;break;case 2211:r.opts.FullCalc=ie;break;case 129:ie.fDialog&&(a["!type"]="dialog"),ie.fBelow||((a["!outline"]||(a["!outline"]={})).above=!0),ie.fRight||((a["!outline"]||(a["!outline"]={})).left=!0);break;case 224:H.push(ie);break;case 430:ke.push([ie]),ke[ke.length-1].XTI=[];break;case 35:case 547:ke[ke.length-1].push(ie);break;case 24:case 536:ne={Name:ie.Name,Ref:Jl(ie.rgce,l,null,ke,K)},ie.itab>0&&(ne.Sheet=ie.itab-1),ke.names.push(ne),ke[0]||(ke[0]=[],ke[0].XTI=[]),ke[ke.length-1].push(ie),ie.Name=="_xlnm._FilterDatabase"&&ie.itab>0&&ie.rgce&&ie.rgce[0]&&ie.rgce[0][0]&&ie.rgce[0][0][0]=="PtgArea3d"&&(Y[ie.itab-1]={ref:Kn(ie.rgce[0][0][1][2])});break;case 22:K.ExternCount=ie;break;case 23:ke.length==0&&(ke[0]=[],ke[0].XTI=[]),ke[ke.length-1].XTI=ke[ke.length-1].XTI.concat(ie),ke.XTI=ke.XTI.concat(ie);break;case 2196:if(K.biff<8)break;ne!=null&&(ne.Comment=ie[1]);break;case 18:a["!protect"]=ie;break;case 19:ie!==0&&K.WTF&&console.error("Password verifier: "+ie);break;case 133:s[ie.pos]=ie,K.snames.push(ie.name);break;case 10:{if(--fe)break;if(l.e){if(l.e.r>0&&l.e.c>0){if(l.e.r--,l.e.c--,a["!ref"]=Kn(l),t.sheetRows&&t.sheetRows<=l.e.r){var De=l.e.r;l.e.r=t.sheetRows-1,a["!fullref"]=a["!ref"],a["!ref"]=Kn(l),l.e.r=De}l.e.r++,l.e.c++}re.length>0&&(a["!merges"]=re),ae.length>0&&(a["!objects"]=ae),de.length>0&&(a["!cols"]=de),he.length>0&&(a["!rows"]=he),R.Sheets.push(z)}d===""?f=a:n[d]=a,a=t.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(K.biff===8&&(K.biff={9:2,521:3,1033:4}[me]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[ie.BIFFVer]||8),K.biffguess=ie.BIFFVer==0,ie.BIFFVer==0&&ie.dt==4096&&(K.biff=5,ee=!0,Zd(K.codepage=28591)),K.biff==8&&ie.BIFFVer==0&&ie.dt==16&&(K.biff=2),fe++)break;if(a=t.dense?[]:{},K.biff<8&&!ee&&(ee=!0,Zd(K.codepage=t.codepage||1252)),K.biff<5||ie.BIFFVer==0&&ie.dt==4096){d===""&&(d="Sheet1"),l={s:{r:0,c:0},e:{r:0,c:0}};var ye={pos:e.l-se,name:d};s[ye.pos]=ye,K.snames.push(d)}else d=(s[Ce]||{name:""}).name;ie.dt==32&&(a["!type"]="chart"),ie.dt==64&&(a["!type"]="macro"),re=[],ae=[],K.arrayf=O=[],de=[],he=[],Se=!1,z={Hidden:(s[Ce]||{hs:0}).hs,name:d}}break;case 515:case 3:case 2:a["!type"]=="chart"&&(t.dense?(a[ie.r]||[])[ie.c]:a[Tn({c:ie.c,r:ie.r})])&&++ie.c,E={ixfe:ie.ixfe,XF:H[ie.ixfe]||{},v:ie.val,t:"n"},F>0&&(E.z=te[E.ixfe>>8&63]),yu(E,t,r.opts.Date1904),q({c:ie.c,r:ie.r},E,t);break;case 5:case 517:E={ixfe:ie.ixfe,XF:H[ie.ixfe],v:ie.val,t:ie.t},F>0&&(E.z=te[E.ixfe>>8&63]),yu(E,t,r.opts.Date1904),q({c:ie.c,r:ie.r},E,t);break;case 638:E={ixfe:ie.ixfe,XF:H[ie.ixfe],v:ie.rknum,t:"n"},F>0&&(E.z=te[E.ixfe>>8&63]),yu(E,t,r.opts.Date1904),q({c:ie.c,r:ie.r},E,t);break;case 189:for(var rt=ie.c;rt<=ie.C;++rt){var st=ie.rkrec[rt-ie.c][0];E={ixfe:st,XF:H[st],v:ie.rkrec[rt-ie.c][1],t:"n"},F>0&&(E.z=te[E.ixfe>>8&63]),yu(E,t,r.opts.Date1904),q({c:rt,r:ie.r},E,t)}break;case 6:case 518:case 1030:{if(ie.val=="String"){o=ie;break}if(E=U2(ie.val,ie.cell.ixfe,ie.tt),E.XF=H[E.ixfe],t.cellFormula){var dt=ie.formula;if(dt&&dt[0]&&dt[0][0]&&dt[0][0][0]=="PtgExp"){var et=dt[0][0][1][0],lt=dt[0][0][1][1],Ve=Tn({r:et,c:lt});S[Ve]?E.f=""+Jl(ie.formula,l,ie.cell,ke,K):E.F=((t.dense?(a[et]||[])[lt]:a[Ve])||{}).F}else E.f=""+Jl(ie.formula,l,ie.cell,ke,K)}F>0&&(E.z=te[E.ixfe>>8&63]),yu(E,t,r.opts.Date1904),q(ie.cell,E,t),o=ie}break;case 7:case 519:if(o)o.val=ie,E=U2(ie,o.cell.ixfe,"s"),E.XF=H[E.ixfe],t.cellFormula&&(E.f=""+Jl(o.formula,l,o.cell,ke,K)),F>0&&(E.z=te[E.ixfe>>8&63]),yu(E,t,r.opts.Date1904),q(o.cell,E,t),o=null;else throw new Error("String record expects Formula");break;case 33:case 545:{O.push(ie);var Vt=Tn(ie[0].s);if(g=t.dense?(a[ie[0].s.r]||[])[ie[0].s.c]:a[Vt],t.cellFormula&&g){if(!o||!Vt||!g)break;g.f=""+Jl(ie[1],l,ie[0],ke,K),g.F=Kn(ie[0])}}break;case 1212:{if(!t.cellFormula)break;if(y){if(!o)break;S[Tn(o.cell)]=ie[0],g=t.dense?(a[o.cell.r]||[])[o.cell.c]:a[Tn(o.cell)],(g||{}).f=""+Jl(ie[0],l,p,ke,K)}}break;case 253:E=U2(c[ie.isst].t,ie.ixfe,"s"),c[ie.isst].h&&(E.h=c[ie.isst].h),E.XF=H[E.ixfe],F>0&&(E.z=te[E.ixfe>>8&63]),yu(E,t,r.opts.Date1904),q({c:ie.c,r:ie.r},E,t);break;case 513:t.sheetStubs&&(E={ixfe:ie.ixfe,XF:H[ie.ixfe],t:"z"},F>0&&(E.z=te[E.ixfe>>8&63]),yu(E,t,r.opts.Date1904),q({c:ie.c,r:ie.r},E,t));break;case 190:if(t.sheetStubs)for(var Mt=ie.c;Mt<=ie.C;++Mt){var mr=ie.ixfe[Mt-ie.c];E={ixfe:mr,XF:H[mr],t:"z"},F>0&&(E.z=te[E.ixfe>>8&63]),yu(E,t,r.opts.Date1904),q({c:Mt,r:ie.r},E,t)}break;case 214:case 516:case 4:E=U2(ie.val,ie.ixfe,"s"),E.XF=H[E.ixfe],F>0&&(E.z=te[E.ixfe>>8&63]),yu(E,t,r.opts.Date1904),q({c:ie.c,r:ie.r},E,t);break;case 0:case 512:fe===1&&(l=ie);break;case 252:c=ie;break;case 1054:if(K.biff==4){te[F++]=ie[1];for(var xr=0;xr<F+163&&En[xr]!=ie[1];++xr);xr>=163&&B0(ie[1],F+163)}else B0(ie[1],ie[0]);break;case 30:{te[F++]=ie;for(var sr=0;sr<F+163&&En[sr]!=ie;++sr);sr>=163&&B0(ie,F+163)}break;case 229:re=re.concat(ie);break;case 93:ae[ie.cmo[0]]=K.lastobj=ie;break;case 438:K.lastobj.TxO=ie;break;case 127:K.lastobj.ImData=ie;break;case 440:for(k=ie[0].s.r;k<=ie[0].e.r;++k)for(w=ie[0].s.c;w<=ie[0].e.c;++w)g=t.dense?(a[k]||[])[w]:a[Tn({c:w,r:k})],g&&(g.l=ie[1]);break;case 2048:for(k=ie[0].s.r;k<=ie[0].e.r;++k)for(w=ie[0].s.c;w<=ie[0].e.c;++w)g=t.dense?(a[k]||[])[w]:a[Tn({c:w,r:k})],g&&g.l&&(g.l.Tooltip=ie[1]);break;case 28:{if(K.biff<=5&&K.biff>=2)break;g=t.dense?(a[ie[0].r]||[])[ie[0].c]:a[Tn(ie[0])];var Ir=ae[ie[2]];g||(t.dense?(a[ie[0].r]||(a[ie[0].r]=[]),g=a[ie[0].r][ie[0].c]={t:"z"}):g=a[Tn(ie[0])]={t:"z"},l.e.r=Math.max(l.e.r,ie[0].r),l.s.r=Math.min(l.s.r,ie[0].r),l.e.c=Math.max(l.e.c,ie[0].c),l.s.c=Math.min(l.s.c,ie[0].c)),g.c||(g.c=[]),N={a:ie[1],t:Ir.TxO.t},g.c.push(N)}break;case 2173:jke(H[ie.ixfe],ie.ext);break;case 125:{if(!K.cellStyles)break;for(;ie.e>=ie.s;)de[ie.e--]={width:ie.w/256,level:ie.level||0,hidden:!!(ie.flags&1)},Se||(Se=!0,sA(ie.w/256)),cf(de[ie.e+1])}break;case 520:{var er={};ie.level!=null&&(he[ie.r]=er,er.level=ie.level),ie.hidden&&(he[ie.r]=er,er.hidden=!0),ie.hpt&&(he[ie.r]=er,er.hpt=ie.hpt,er.hpx=G1(ie.hpt))}break;case 38:case 39:case 40:case 41:a["!margins"]||ym(a["!margins"]={}),a["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[me]]=ie;break;case 161:a["!margins"]||ym(a["!margins"]={}),a["!margins"].header=ie.header,a["!margins"].footer=ie.footer;break;case 574:ie.RTL&&(R.Views[0].RTL=!0);break;case 146:W=ie;break;case 2198:Q=ie;break;case 140:D=ie;break;case 442:d?z.CodeName=ie||z.name:R.WBProps.CodeName=ie||"ThisWorkbook";break}}else je||console.error("Missing Info for XLS Record 0x"+me.toString(16)),e.l+=se}return r.SheetNames=ui(s).sort(function(Xt,Gt){return Number(Xt)-Number(Gt)}).map(function(Xt){return s[Xt].name}),t.bookSheets||(r.Sheets=n),!r.SheetNames.length&&f["!ref"]?(r.SheetNames.push("Sheet1"),r.Sheets&&(r.Sheets.Sheet1=f)):r.Preamble=f,r.Sheets&&Y.forEach(function(Xt,Gt){r.Sheets[r.SheetNames[Gt]]["!autofilter"]=Xt}),r.Strings=c,r.SSF=Ts(En),K.enc&&(r.Encryption=K.enc),Q&&(r.Themes=Q),r.Metadata={},D!==void 0&&(r.Metadata.Country=D),ke.names.length>0&&(R.Names=ke.names),r.Workbook=R,r}var Dg={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function U_e(e,t,r){var n=vn.find(e,"/!DocumentSummaryInformation");if(n&&n.size>0)try{var a=nD(n,CS,Dg.DSI);for(var s in a)t[s]=a[s]}catch(d){if(r.WTF)throw d}var l=vn.find(e,"/!SummaryInformation");if(l&&l.size>0)try{var o=nD(l,AS,Dg.SI);for(var c in o)t[c]==null&&(t[c]=o[c])}catch(d){if(r.WTF)throw d}t.HeadingPairs&&t.TitlesOfParts&&(p$(t.HeadingPairs,t.TitlesOfParts,t,r),delete t.HeadingPairs,delete t.TitlesOfParts)}function z_e(e,t){var r=[],n=[],a=[],s=0,l,o=II(CS,"n"),c=II(AS,"n");if(e.Props)for(l=ui(e.Props),s=0;s<l.length;++s)(Object.prototype.hasOwnProperty.call(o,l[s])?r:Object.prototype.hasOwnProperty.call(c,l[s])?n:a).push([l[s],e.Props[l[s]]]);if(e.Custprops)for(l=ui(e.Custprops),s=0;s<l.length;++s)Object.prototype.hasOwnProperty.call(e.Props||{},l[s])||(Object.prototype.hasOwnProperty.call(o,l[s])?r:Object.prototype.hasOwnProperty.call(c,l[s])?n:a).push([l[s],e.Custprops[l[s]]]);var d=[];for(s=0;s<a.length;++s)N$.indexOf(a[s][0])>-1||x$.indexOf(a[s][0])>-1||a[s][1]!=null&&d.push(a[s]);n.length&&vn.utils.cfb_add(t,"/SummaryInformation",aD(n,Dg.SI,c,AS)),(r.length||d.length)&&vn.utils.cfb_add(t,"/DocumentSummaryInformation",aD(r,Dg.DSI,o,CS,d.length?d:null,Dg.UDI))}function bV(e,t){t||(t={}),mA(t),MC(),t.codepage&&DC(t.codepage);var r,n;if(e.FullPaths){if(vn.find(e,"/encryption"))throw new Error("File is password-protected");r=vn.find(e,"!CompObj"),n=vn.find(e,"/Workbook")||vn.find(e,"/Book")}else{switch(t.type){case"base64":e=Sc(Pc(e));break;case"binary":e=Sc(e);break;case"buffer":break;case"array":Array.isArray(e)||(e=Array.prototype.slice.call(e));break}Pl(e,0),n={content:e}}var a,s;if(r&&L_e(r),t.bookProps&&!t.bookSheets)a={};else{var l=ra?"buffer":"array";if(n&&n.content)a=B_e(n.content,t);else if((s=vn.find(e,"PerfectOffice_MAIN"))&&s.content)a=vm.to_workbook(s.content,(t.type=l,t));else if((s=vn.find(e,"NativeContent_MAIN"))&&s.content)a=vm.to_workbook(s.content,(t.type=l,t));else throw(s=vn.find(e,"MN0"))&&s.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");t.bookVBA&&e.FullPaths&&vn.find(e,"/_VBA_PROJECT_CUR/VBA/dir")&&(a.vbaraw=e5e(e))}var o={};return e.FullPaths&&U_e(e,o,t),a.Props=a.Custprops=o,t.bookFiles&&(a.cfb=e),a}function q_e(e,t){var r=t||{},n=vn.utils.cfb_new({root:"R"}),a="/Workbook";switch(r.bookType||"xls"){case"xls":r.bookType="biff8";case"xla":r.bookType||(r.bookType="xla");case"biff8":a="/Workbook",r.biff=8;break;case"biff5":a="/Book",r.biff=5;break;default:throw new Error("invalid type "+r.bookType+" for XLS CFB")}return vn.utils.cfb_add(n,a,vV(e,r)),r.biff==8&&(e.Props||e.Custprops)&&z_e(e,n),r.biff==8&&e.vbaraw&&t5e(n,vn.read(e.vbaraw,{type:typeof e.vbaraw=="string"?"binary":"buffer"})),n}var vb={0:{f:h3e},1:{f:y3e},2:{f:B3e},3:{f:A3e},4:{f:_3e},5:{f:L3e},6:{f:$3e},7:{f:P3e},8:{f:Z3e},9:{f:Y3e},10:{f:G3e},11:{f:X3e},12:{f:k3e},13:{f:z3e},14:{f:T3e},15:{f:j3e},16:{f:dV},17:{f:W3e},18:{f:D3e},19:{f:XC},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:WNe},40:{},42:{},43:{f:$we},44:{f:qwe},45:{f:Kwe},46:{f:Xwe},47:{f:Gwe},48:{},49:{f:xve},50:{},51:{f:Eke},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:D$},62:{f:H3e},63:{f:Fke},64:{f:fNe},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:so,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:cNe},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:b3e},148:{f:x3e,p:16},151:{f:nNe},152:{},153:{f:HNe},154:{},155:{},156:{f:zNe},157:{},158:{},159:{T:1,f:swe},160:{T:-1},161:{T:1,f:rx},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:Q3e},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:Cke},336:{T:-1},337:{f:Pke,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:jS},357:{},358:{},359:{},360:{T:1},361:{},362:{f:I$},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:aNe},427:{f:sNe},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:lNe},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:g3e},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:tNe},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:jS},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:Xke},633:{T:1},634:{T:-1},635:{T:1,f:Kke},636:{T:-1},637:{f:vve},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:TNe},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:mNe},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},DS={6:{f:oN},10:{f:Ih},12:{f:Di},13:{f:Di},14:{f:yi},15:{f:yi},16:{f:ro},17:{f:yi},18:{f:yi},19:{f:Di},20:{f:dD},21:{f:dD},23:{f:I$},24:{f:hD},25:{f:yi},26:{},27:{},28:{f:mye},29:{},34:{f:yi},35:{f:uD},38:{f:ro},39:{f:ro},40:{f:ro},41:{f:ro},42:{f:yi},43:{f:yi},47:{f:jwe},49:{f:z2e},51:{f:Di},60:{},61:{f:L2e},64:{f:yi},65:{f:U2e},66:{f:Di},77:{},80:{},81:{},82:{},85:{f:Di},89:{},90:{},91:{},92:{f:S2e},93:{f:gye},94:{},95:{f:yi},96:{},97:{},99:{f:yi},125:{f:D$},128:{f:rye},129:{f:C2e},130:{f:Di},131:{f:yi},132:{f:yi},133:{f:A2e},134:{},140:{f:Sye},141:{f:Di},144:{},146:{f:Aye},151:{},152:{},153:{},154:{},155:{},156:{f:Di},157:{},158:{},160:{f:Mye},161:{f:Oye},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:Q2e},190:{f:J2e},193:{f:Ih},197:{},198:{},199:{},200:{},201:{},202:{f:yi},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:Di},220:{},221:{f:yi},222:{},224:{f:tye},225:{f:_2e},226:{f:Ih},227:{},229:{f:xye},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:T2e},253:{f:H2e},255:{f:P2e},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:_$},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:yi},353:{f:Ih},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:lye},431:{f:yi},432:{},433:{},434:{},437:{},438:{f:yye},439:{f:yi},440:{f:wye},441:{},442:{f:iv},443:{},444:{f:Di},445:{},446:{},448:{f:Ih},449:{f:M2e,r:2},450:{f:Ih},512:{f:lD},513:{f:Dye},515:{f:sye},516:{f:V2e},517:{f:cD},519:{f:Lye},520:{f:I2e},523:{},545:{f:fD},549:{f:iD},566:{},574:{f:F2e},638:{f:Z2e},659:{},1048:{},1054:{f:K2e},1084:{},1212:{f:uye},2048:{f:Nye},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:R2},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:Ih},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:Eye,r:12},2173:{f:Ske,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:yi,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:dye,r:12},2197:{},2198:{f:vke,r:12},2199:{},2200:{},2201:{},2202:{f:hye,r:12},2203:{f:Ih},2204:{},2205:{},2206:{},2207:{},2211:{f:D2e},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:Di},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:Pye},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:Cye},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:lD},1:{},2:{f:zye},3:{f:Bye},4:{f:Fye},5:{f:cD},7:{f:Hye},8:{},9:{f:R2},11:{},22:{f:Di},30:{f:X2e},31:{},32:{},33:{f:fD},36:{},37:{f:iD},50:{f:$ye},62:{},52:{},67:{},68:{f:Di},69:{},86:{},126:{},127:{f:Rye},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:Vye},223:{},234:{},354:{},421:{},518:{f:oN},521:{f:R2},536:{f:hD},547:{f:uD},561:{},579:{},1030:{f:oN},1033:{f:R2},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function jr(e,t,r,n){var a=t;if(!isNaN(a)){var s=n||(r||[]).length||0,l=e.next(4);l.write_shift(2,a),l.write_shift(2,s),s>0&&WC(r)&&e.push(r)}}function H_e(e,t,r,n){var a=(r||[]).length||0;if(a<=8224)return jr(e,t,r,a);var s=t;if(!isNaN(s)){for(var l=r.parts||[],o=0,c=0,d=0;d+(l[o]||8224)<=8224;)d+=l[o]||8224,o++;var f=e.next(4);for(f.write_shift(2,s),f.write_shift(2,d),e.push(r.slice(c,c+d)),c+=d;c<a;){for(f=e.next(4),f.write_shift(2,60),d=0;d+(l[o]||8224)<=8224;)d+=l[o]||8224,o++;f.write_shift(2,d),e.push(r.slice(c,c+d)),c+=d}}}function dv(e,t,r){return e||(e=Bt(7)),e.write_shift(2,t),e.write_shift(2,r),e.write_shift(2,0),e.write_shift(1,0),e}function $_e(e,t,r,n){var a=Bt(9);return dv(a,e,t),S$(r,n||"b",a),a}function V_e(e,t,r){var n=Bt(8+2*r.length);return dv(n,e,t),n.write_shift(1,r.length),n.write_shift(r.length,r,"sbcs"),n.l<n.length?n.slice(0,n.l):n}function W_e(e,t,r,n){if(t.v!=null)switch(t.t){case"d":case"n":var a=t.t=="d"?Gi(Es(t.v)):t.v;a==(a|0)&&a>=0&&a<65536?jr(e,2,qye(r,n,a)):jr(e,3,Uye(r,n,a));return;case"b":case"e":jr(e,5,$_e(r,n,t.v,t.t));return;case"s":case"str":jr(e,4,V_e(r,n,(t.v||"").slice(0,255)));return}jr(e,1,dv(null,r,n))}function K_e(e,t,r,n){var a=Array.isArray(t),s=Ta(t["!ref"]||"A1"),l,o="",c=[];if(s.e.c>255||s.e.r>16383){if(n.WTF)throw new Error("Range "+(t["!ref"]||"A1")+" exceeds format limit A1:IV16384");s.e.c=Math.min(s.e.c,255),s.e.r=Math.min(s.e.c,16383),l=Kn(s)}for(var d=s.s.r;d<=s.e.r;++d){o=ji(d);for(var f=s.s.c;f<=s.e.c;++f){d===s.s.r&&(c[f]=Ks(f)),l=c[f]+o;var p=a?(t[d]||[])[f]:t[l];p&&W_e(e,p,d,f)}}}function G_e(e,t){for(var r=t||{},n=nc(),a=0,s=0;s<e.SheetNames.length;++s)e.SheetNames[s]==r.sheet&&(a=s);if(a==0&&r.sheet&&e.SheetNames[0]!=r.sheet)throw new Error("Sheet not found: "+r.sheet);return jr(n,r.biff==4?1033:r.biff==3?521:9,rA(e,16,r)),K_e(n,e.Sheets[e.SheetNames[a]],a,r),jr(n,10),n.end()}function X_e(e,t,r){jr(e,49,q2e({sz:12,name:"Arial"},r))}function Y_e(e,t,r){t&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)t[a]!=null&&jr(e,1054,G2e(a,t[a],r))})}function Z_e(e,t){var r=Bt(19);r.write_shift(4,2151),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,1),r.write_shift(4,0),jr(e,2151,r),r=Bt(39),r.write_shift(4,2152),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,0),r.write_shift(4,0),r.write_shift(2,1),r.write_shift(4,4),r.write_shift(2,0),T$(Ta(t["!ref"]||"A1"),r),r.write_shift(4,4),jr(e,2152,r)}function Q_e(e,t){for(var r=0;r<16;++r)jr(e,224,oD({numFmtId:0,style:!0},0,t));t.cellXfs.forEach(function(n){jr(e,224,oD(n,0,t))})}function J_e(e,t){for(var r=0;r<t["!links"].length;++r){var n=t["!links"][r];jr(e,440,kye(n)),n[1].Tooltip&&jr(e,2048,_ye(n))}delete t["!links"]}function eSe(e,t){if(t){var r=0;t.forEach(function(n,a){++r<=256&&n&&jr(e,125,Tye(Uk(a,n),a))})}}function tSe(e,t,r,n,a){var s=16+wf(a.cellXfs,t,a);if(t.v==null&&!t.bf){jr(e,513,Hm(r,n,s));return}if(t.bf)jr(e,6,C4e(t,r,n,a,s));else switch(t.t){case"d":case"n":var l=t.t=="d"?Gi(Es(t.v)):t.v;jr(e,515,iye(r,n,l,s));break;case"b":case"e":jr(e,517,aye(r,n,t.v,s,a,t.t));break;case"s":case"str":if(a.bookSST){var o=dA(a.Strings,t.v,a.revStrings);jr(e,253,$2e(r,n,o,s))}else jr(e,516,W2e(r,n,(t.v||"").slice(0,255),s,a));break;default:jr(e,513,Hm(r,n,s))}}function rSe(e,t,r){var n=nc(),a=r.SheetNames[e],s=r.Sheets[a]||{},l=(r||{}).Workbook||{},o=(l.Sheets||[])[e]||{},c=Array.isArray(s),d=t.biff==8,f,p="",y=[],g=Ta(s["!ref"]||"A1"),N=d?65536:16384;if(g.e.c>255||g.e.r>=N){if(t.WTF)throw new Error("Range "+(s["!ref"]||"A1")+" exceeds format limit A1:IV16384");g.e.c=Math.min(g.e.c,255),g.e.r=Math.min(g.e.c,N-1)}jr(n,2057,rA(r,16,t)),jr(n,13,sd(1)),jr(n,12,sd(100)),jr(n,15,ko(!0)),jr(n,17,ko(!1)),jr(n,16,zm(.001)),jr(n,95,ko(!0)),jr(n,42,ko(!1)),jr(n,43,ko(!1)),jr(n,130,sd(1)),jr(n,128,nye()),jr(n,131,ko(!1)),jr(n,132,ko(!1)),d&&eSe(n,s["!cols"]),jr(n,512,Y2e(g,t)),d&&(s["!links"]=[]);for(var w=g.s.r;w<=g.e.r;++w){p=ji(w);for(var k=g.s.c;k<=g.e.c;++k){w===g.s.r&&(y[k]=Ks(k)),f=y[k]+p;var S=c?(s[w]||[])[k]:s[f];S&&(tSe(n,S,w,k,t),d&&S.l&&s["!links"].push([f,S.l]))}}var O=o.CodeName||o.name||a;return d&&jr(n,574,B2e((l.Views||[])[0])),d&&(s["!merges"]||[]).length&&jr(n,229,pye(s["!merges"])),d&&J_e(n,s),jr(n,442,j$(O)),d&&Z_e(n,s),jr(n,10),n.end()}function nSe(e,t,r){var n=nc(),a=(e||{}).Workbook||{},s=a.Sheets||[],l=a.WBProps||{},o=r.biff==8,c=r.biff==5;if(jr(n,2057,rA(e,5,r)),r.bookType=="xla"&&jr(n,135),jr(n,225,o?sd(1200):null),jr(n,193,a2e(2)),c&&jr(n,191),c&&jr(n,192),jr(n,226),jr(n,92,j2e("SheetJS",r)),jr(n,66,sd(o?1200:1252)),o&&jr(n,353,sd(0)),o&&jr(n,448),jr(n,317,Iye(e.SheetNames.length)),o&&e.vbaraw&&jr(n,211),o&&e.vbaraw){var d=l.CodeName||"ThisWorkbook";jr(n,442,j$(d))}jr(n,156,sd(17)),jr(n,25,ko(!1)),jr(n,18,ko(!1)),jr(n,19,sd(0)),o&&jr(n,431,ko(!1)),o&&jr(n,444,sd(0)),jr(n,61,R2e()),jr(n,64,ko(!1)),jr(n,141,sd(0)),jr(n,34,ko(MNe(e)=="true")),jr(n,14,ko(!0)),o&&jr(n,439,ko(!1)),jr(n,218,sd(0)),X_e(n,e,r),Y_e(n,e.SSF,r),Q_e(n,r),o&&jr(n,352,ko(!1));var f=n.end(),p=nc();o&&jr(p,140,jye()),o&&r.Strings&&H_e(p,252,O2e(r.Strings)),jr(p,10);var y=p.end(),g=nc(),N=0,w=0;for(w=0;w<e.SheetNames.length;++w)N+=(o?12:11)+(o?2:1)*e.SheetNames[w].length;var k=f.length+N+y.length;for(w=0;w<e.SheetNames.length;++w){var S=s[w]||{};jr(g,133,E2e({pos:k,hs:S.Hidden||0,dt:0,name:e.SheetNames[w]},r)),k+=t[w].length}var O=g.end();if(N!=O.length)throw new Error("BS8 "+N+" != "+O.length);var E=[];return f.length&&E.push(f),O.length&&E.push(O),y.length&&E.push(y),pl(E)}function aSe(e,t){var r=t||{},n=[];e&&!e.SSF&&(e.SSF=Ts(En)),e&&e.SSF&&(pp(),Ik(e.SSF),r.revssf=Mk(e.SSF),r.revssf[e.SSF[65535]]=0,r.ssf=e.SSF),r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,xA(r),r.cellXfs=[],wf(r.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={});for(var a=0;a<e.SheetNames.length;++a)n[n.length]=rSe(a,r,e);return n.unshift(nSe(e,n,r)),pl(n)}function vV(e,t){for(var r=0;r<=e.SheetNames.length;++r){var n=e.Sheets[e.SheetNames[r]];if(!(!n||!n["!ref"])){var a=ac(n["!ref"]);a.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+e.SheetNames[r]+"' extends beyond column IV (255).  Data may be lost.")}}var s=t||{};switch(s.biff||2){case 8:case 5:return aSe(e,t);case 4:case 3:case 2:return G_e(e,t)}throw new Error("invalid type "+s.bookType+" for BIFF")}function ND(e,t){var r=t||{},n=r.dense?[]:{};e=e.replace(/<!--.*?-->/g,"");var a=e.match(/<table/i);if(!a)throw new Error("Invalid HTML: could not find <table>");var s=e.match(/<\/table/i),l=a.index,o=s&&s.index||e.length,c=qbe(e.slice(l,o),/(:?<tr[^>]*>)/i,"<tr>"),d=-1,f=0,p=0,y=0,g={s:{r:1e7,c:1e7},e:{r:0,c:0}},N=[];for(l=0;l<c.length;++l){var w=c[l].trim(),k=w.slice(0,3).toLowerCase();if(k=="<tr"){if(++d,r.sheetRows&&r.sheetRows<=d){--d;break}f=0;continue}if(!(k!="<td"&&k!="<th")){var S=w.split(/<\/t[dh]>/i);for(o=0;o<S.length;++o){var O=S[o].trim();if(O.match(/<t[dh]/i)){for(var E=O,D=0;E.charAt(0)=="<"&&(D=E.indexOf(">"))>-1;)E=E.slice(D+1);for(var H=0;H<N.length;++H){var W=N[H];W.s.c==f&&W.s.r<d&&d<=W.e.r&&(f=W.e.c+1,H=-1)}var R=Mn(O.slice(0,O.indexOf(">")));y=R.colspan?+R.colspan:1,((p=+R.rowspan)>1||y>1)&&N.push({s:{r:d,c:f},e:{r:d+(p||1)-1,c:f+y-1}});var z=R.t||R["data-t"]||"";if(!E.length){f+=y;continue}if(E=HH(E),g.s.r>d&&(g.s.r=d),g.e.r<d&&(g.e.r=d),g.s.c>f&&(g.s.c=f),g.e.c<f&&(g.e.c=f),!E.length){f+=y;continue}var U={t:"s",v:E};r.raw||!E.trim().length||z=="s"||(E==="TRUE"?U={t:"b",v:!0}:E==="FALSE"?U={t:"b",v:!1}:isNaN(Jd(E))?isNaN(W1(E).getDate())||(U={t:"d",v:Es(E)},r.cellDates||(U={t:"n",v:Gi(U.v)}),U.z=r.dateNF||En[14]):U={t:"n",v:Jd(E)}),r.dense?(n[d]||(n[d]=[]),n[d][f]=U):n[Tn({r:d,c:f})]=U,f+=y}}}}return n["!ref"]=Kn(g),N.length&&(n["!merges"]=N),n}function sSe(e,t,r,n){for(var a=e["!merges"]||[],s=[],l=t.s.c;l<=t.e.c;++l){for(var o=0,c=0,d=0;d<a.length;++d)if(!(a[d].s.r>r||a[d].s.c>l)&&!(a[d].e.r<r||a[d].e.c<l)){if(a[d].s.r<r||a[d].s.c<l){o=-1;break}o=a[d].e.r-a[d].s.r+1,c=a[d].e.c-a[d].s.c+1;break}if(!(o<0)){var f=Tn({r,c:l}),p=n.dense?(e[r]||[])[l]:e[f],y=p&&p.v!=null&&(p.h||HC(p.w||(Y0(p),p.w)||""))||"",g={};o>1&&(g.rowspan=o),c>1&&(g.colspan=c),n.editable?y='<span contenteditable="true">'+y+"</span>":p&&(g["data-t"]=p&&p.t||"z",p.v!=null&&(g["data-v"]=p.v),p.z!=null&&(g["data-z"]=p.z),p.l&&(p.l.Target||"#").charAt(0)!="#"&&(y='<a href="'+p.l.Target+'">'+y+"</a>")),g.id=(n.id||"sjs")+"-"+f,s.push(Sr("td",y,g))}}var N="<tr>";return N+s.join("")+"</tr>"}var iSe='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',lSe="</body></html>";function oSe(e,t){var r=e.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!r||r.length==0)throw new Error("Invalid HTML: could not find <table>");if(r.length==1)return yf(ND(r[0],t),t);var n=bA();return r.forEach(function(a,s){vA(n,ND(a,t),"Sheet"+(s+1))}),n}function cSe(e,t,r){var n=[];return n.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function yV(e,t){var r=t||{},n=r.header!=null?r.header:iSe,a=r.footer!=null?r.footer:lSe,s=[n],l=ac(e["!ref"]);r.dense=Array.isArray(e),s.push(cSe(e,l,r));for(var o=l.s.r;o<=l.e.r;++o)s.push(sSe(e,l,o,r));return s.push("</table>"+a),s.join("")}function wV(e,t,r){var n=r||{},a=0,s=0;if(n.origin!=null)if(typeof n.origin=="number")a=n.origin;else{var l=typeof n.origin=="string"?Gs(n.origin):n.origin;a=l.r,s=l.c}var o=t.getElementsByTagName("tr"),c=Math.min(n.sheetRows||1e7,o.length),d={s:{r:0,c:0},e:{r:a,c:s}};if(e["!ref"]){var f=ac(e["!ref"]);d.s.r=Math.min(d.s.r,f.s.r),d.s.c=Math.min(d.s.c,f.s.c),d.e.r=Math.max(d.e.r,f.e.r),d.e.c=Math.max(d.e.c,f.e.c),a==-1&&(d.e.r=a=f.e.r+1)}var p=[],y=0,g=e["!rows"]||(e["!rows"]=[]),N=0,w=0,k=0,S=0,O=0,E=0;for(e["!cols"]||(e["!cols"]=[]);N<o.length&&w<c;++N){var D=o[N];if(_D(D)){if(n.display)continue;g[w]={hidden:!0}}var H=D.children;for(k=S=0;k<H.length;++k){var W=H[k];if(!(n.display&&_D(W))){var R=W.hasAttribute("data-v")?W.getAttribute("data-v"):W.hasAttribute("v")?W.getAttribute("v"):HH(W.innerHTML),z=W.getAttribute("data-z")||W.getAttribute("z");for(y=0;y<p.length;++y){var U=p[y];U.s.c==S+s&&U.s.r<w+a&&w+a<=U.e.r&&(S=U.e.c+1-s,y=-1)}E=+W.getAttribute("colspan")||1,((O=+W.getAttribute("rowspan")||1)>1||E>1)&&p.push({s:{r:w+a,c:S+s},e:{r:w+a+(O||1)-1,c:S+s+(E||1)-1}});var Z={t:"s",v:R},q=W.getAttribute("data-t")||W.getAttribute("t")||"";R!=null&&(R.length==0?Z.t=q||"z":n.raw||R.trim().length==0||q=="s"||(R==="TRUE"?Z={t:"b",v:!0}:R==="FALSE"?Z={t:"b",v:!1}:isNaN(Jd(R))?isNaN(W1(R).getDate())||(Z={t:"d",v:Es(R)},n.cellDates||(Z={t:"n",v:Gi(Z.v)}),Z.z=n.dateNF||En[14]):Z={t:"n",v:Jd(R)})),Z.z===void 0&&z!=null&&(Z.z=z);var K="",Q=W.getElementsByTagName("A");if(Q&&Q.length)for(var re=0;re<Q.length&&!(Q[re].hasAttribute("href")&&(K=Q[re].getAttribute("href"),K.charAt(0)!="#"));++re);K&&K.charAt(0)!="#"&&(Z.l={Target:K}),n.dense?(e[w+a]||(e[w+a]=[]),e[w+a][S+s]=Z):e[Tn({c:S+s,r:w+a})]=Z,d.e.c<S+s&&(d.e.c=S+s),S+=E}}++w}return p.length&&(e["!merges"]=(e["!merges"]||[]).concat(p)),d.e.r=Math.max(d.e.r,w-1+a),e["!ref"]=Kn(d),w>=c&&(e["!fullref"]=Kn((d.e.r=o.length-N+w-1+a,d))),e}function kV(e,t){var r=t||{},n=r.dense?[]:{};return wV(n,e,t)}function dSe(e,t){return yf(kV(e,t),t)}function _D(e){var t="",r=uSe(e);return r&&(t=r(e).getPropertyValue("display")),t||(t=e.style&&e.style.display),t==="none"}function uSe(e){return e.ownerDocument.defaultView&&typeof e.ownerDocument.defaultView.getComputedStyle=="function"?e.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function hSe(e){var t=e.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(n,a){return Array(parseInt(a,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),r=Ea(t.replace(/<[^>]*>/g,""));return[r]}var SD={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function NV(e,t){var r=t||{},n=$C(e),a=[],s,l,o={name:""},c="",d=0,f,p,y={},g=[],N=r.dense?[]:{},w,k,S={value:""},O="",E=0,D=[],H=-1,W=-1,R={s:{r:1e6,c:1e7},e:{r:0,c:0}},z=0,U={},Z=[],q={},K=0,Q=0,re=[],ae=1,de=1,he=[],Se={Names:[]},ke={},Le=["",""],fe=[],F={},te="",Y=0,ne=!1,ee=!1,Ce=0;for(fb.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");w=fb.exec(n);)switch(w[3]=w[3].replace(/_.*$/,"")){case"table":case"":w[1]==="/"?(R.e.c>=R.s.c&&R.e.r>=R.s.r?N["!ref"]=Kn(R):N["!ref"]="A1:A1",r.sheetRows>0&&r.sheetRows<=R.e.r&&(N["!fullref"]=N["!ref"],R.e.r=r.sheetRows-1,N["!ref"]=Kn(R)),Z.length&&(N["!merges"]=Z),re.length&&(N["!rows"]=re),f.name=f.||f.name,typeof JSON<"u"&&JSON.stringify(f),g.push(f.name),y[f.name]=N,ee=!1):w[0].charAt(w[0].length-2)!=="/"&&(f=Mn(w[0],!1),H=W=-1,R.s.r=R.s.c=1e7,R.e.r=R.e.c=0,N=r.dense?[]:{},Z=[],re=[],ee=!0);break;case"table-row-group":w[1]==="/"?--z:++z;break;case"table-row":case"":if(w[1]==="/"){H+=ae,ae=1;break}if(p=Mn(w[0],!1),p.?H=p.-1:H==-1&&(H=0),ae=+p["number-rows-repeated"]||1,ae<10)for(Ce=0;Ce<ae;++Ce)z>0&&(re[H+Ce]={level:z});W=-1;break;case"covered-table-cell":w[1]!=="/"&&++W,r.sheetStubs&&(r.dense?(N[H]||(N[H]=[]),N[H][W]={t:"z"}):N[Tn({r:H,c:W})]={t:"z"}),O="",D=[];break;case"table-cell":case"":if(w[0].charAt(w[0].length-2)==="/")++W,S=Mn(w[0],!1),de=parseInt(S["number-columns-repeated"]||"1",10),k={t:"z",v:null},S.formula&&r.cellFormula!=!1&&(k.f=yD(Ea(S.formula))),(S.||S["value-type"])=="string"&&(k.t="s",k.v=Ea(S["string-value"]||""),r.dense?(N[H]||(N[H]=[]),N[H][W]=k):N[Tn({r:H,c:W})]=k),W+=de-1;else if(w[1]!=="/"){++W,O="",E=0,D=[],de=1;var me=ae?H+ae-1:H;if(W>R.e.c&&(R.e.c=W),W<R.s.c&&(R.s.c=W),H<R.s.r&&(R.s.r=H),me>R.e.r&&(R.e.r=me),S=Mn(w[0],!1),fe=[],F={},k={t:S.||S["value-type"],v:null},r.cellFormula)if(S.formula&&(S.formula=Ea(S.formula)),S["number-matrix-columns-spanned"]&&S["number-matrix-rows-spanned"]&&(K=parseInt(S["number-matrix-rows-spanned"],10)||0,Q=parseInt(S["number-matrix-columns-spanned"],10)||0,q={s:{r:H,c:W},e:{r:H+K-1,c:W+Q-1}},k.F=Kn(q),he.push([q,k.F])),S.formula)k.f=yD(S.formula);else for(Ce=0;Ce<he.length;++Ce)H>=he[Ce][0].s.r&&H<=he[Ce][0].e.r&&W>=he[Ce][0].s.c&&W<=he[Ce][0].e.c&&(k.F=he[Ce][1]);switch((S["number-columns-spanned"]||S["number-rows-spanned"])&&(K=parseInt(S["number-rows-spanned"],10)||0,Q=parseInt(S["number-columns-spanned"],10)||0,q={s:{r:H,c:W},e:{r:H+K-1,c:W+Q-1}},Z.push(q)),S["number-columns-repeated"]&&(de=parseInt(S["number-columns-repeated"],10)),k.t){case"boolean":k.t="b",k.v=js(S["boolean-value"]);break;case"float":k.t="n",k.v=parseFloat(S.value);break;case"percentage":k.t="n",k.v=parseFloat(S.value);break;case"currency":k.t="n",k.v=parseFloat(S.value);break;case"date":k.t="d",k.v=Es(S["date-value"]),r.cellDates||(k.t="n",k.v=Gi(k.v)),k.z="m/d/yy";break;case"time":k.t="n",k.v=Bbe(S["time-value"])/86400,r.cellDates&&(k.t="d",k.v=Lk(k.v)),k.z="HH:MM:SS";break;case"number":k.t="n",k.v=parseFloat(S.);break;default:if(k.t==="string"||k.t==="text"||!k.t)k.t="s",S["string-value"]!=null&&(O=Ea(S["string-value"]),D=[]);else throw new Error("Unsupported value type "+k.t)}}else{if(ne=!1,k.t==="s"&&(k.v=O||"",D.length&&(k.R=D),ne=E==0),ke.Target&&(k.l=ke),fe.length>0&&(k.c=fe,fe=[]),O&&r.cellText!==!1&&(k.w=O),ne&&(k.t="z",delete k.v),(!ne||r.sheetStubs)&&!(r.sheetRows&&r.sheetRows<=H))for(var se=0;se<ae;++se){if(de=parseInt(S["number-columns-repeated"]||"1",10),r.dense)for(N[H+se]||(N[H+se]=[]),N[H+se][W]=se==0?k:Ts(k);--de>0;)N[H+se][W+de]=Ts(k);else for(N[Tn({r:H+se,c:W})]=k;--de>0;)N[Tn({r:H+se,c:W+de})]=Ts(k);R.e.c<=W&&(R.e.c=W)}de=parseInt(S["number-columns-repeated"]||"1",10),W+=de-1,de=0,k={},O="",D=[]}ke={};break;case"document":case"document-content":case"":case"spreadsheet":case"":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(w[1]==="/"){if((s=a.pop())[0]!==w[3])throw"Bad state: "+s}else w[0].charAt(w[0].length-2)!=="/"&&a.push([w[3],!0]);break;case"annotation":if(w[1]==="/"){if((s=a.pop())[0]!==w[3])throw"Bad state: "+s;F.t=O,D.length&&(F.R=D),F.a=te,fe.push(F)}else w[0].charAt(w[0].length-2)!=="/"&&a.push([w[3],!1]);te="",Y=0,O="",E=0,D=[];break;case"creator":w[1]==="/"?te=n.slice(Y,w.index):Y=w.index+w[0].length;break;case"meta":case"":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(w[1]==="/"){if((s=a.pop())[0]!==w[3])throw"Bad state: "+s}else w[0].charAt(w[0].length-2)!=="/"&&a.push([w[3],!1]);O="",E=0,D=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(w[1]==="/"){if(U[o.name]=c,(s=a.pop())[0]!==w[3])throw"Bad state: "+s}else w[0].charAt(w[0].length-2)!=="/"&&(c="",o=Mn(w[0],!1),a.push([w[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(a[a.length-1][0]){case"time-style":case"date-style":l=Mn(w[0],!1),c+=SD[w[3]][l.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(a[a.length-1][0]){case"time-style":case"date-style":l=Mn(w[0],!1),c+=SD[w[3]][l.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(w[0].slice(-2)==="/>")break;if(w[1]==="/")switch(a[a.length-1][0]){case"number-style":case"date-style":case"time-style":c+=n.slice(d,w.index);break}else d=w.index+w[0].length;break;case"named-range":l=Mn(w[0],!1),Le=cN(l["cell-range-address"]);var je={Name:l.name,Ref:Le[0]+"!"+Le[1]};ee&&(je.Sheet=g.length),Se.Names.push(je);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"":if(["master-styles"].indexOf(a[a.length-1][0])>-1)break;if(w[1]==="/"&&(!S||!S["string-value"])){var be=hSe(n.slice(E,w.index));O=(O.length>0?O+`
`:"")+be[0]}else Mn(w[0],!1),E=w.index+w[0].length;break;case"s":break;case"database-range":if(w[1]==="/")break;try{Le=cN(Mn(w[0])["target-range-address"]),y[Le[0]]["!autofilter"]={ref:Le[1]}}catch{}break;case"date":break;case"object":break;case"title":case"":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(w[1]!=="/"){if(ke=Mn(w[0],!1),!ke.href)break;ke.Target=Ea(ke.href),delete ke.href,ke.Target.charAt(0)=="#"&&ke.Target.indexOf(".")>-1?(Le=cN(ke.Target.slice(1)),ke.Target="#"+Le[0]+"!"+Le[1]):ke.Target.match(/^\.\.[\\\/]/)&&(ke.Target=ke.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(w[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case":":case":":break;default:if(r.WTF)throw new Error(w)}}var ie={Sheets:y,SheetNames:g,Workbook:Se};return r.bookSheets&&delete ie.Sheets,ie}function jD(e,t){t=t||{},nd(e,"META-INF/manifest.xml")&&Bve(Ii(e,"META-INF/manifest.xml"),t);var r=jc(e,"content.xml");if(!r)throw new Error("Missing content.xml in ODS / UOF file");var n=NV(ss(r),t);return nd(e,"meta.xml")&&(n.Props=f$(Ii(e,"meta.xml"))),n}function CD(e,t){return NV(e,t)}var fSe=(function(){var e=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),t="<office:document-styles "+hb({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+e+"</office:document-styles>";return function(){return Ci+t}})(),AD=(function(){var e=function(s){return Ya(s).replace(/  +/g,function(l){return'<text:s text:c="'+l.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},t=`          <table:table-cell />
`,r=`          <table:covered-table-cell/>
`,n=function(s,l,o){var c=[];c.push('      <table:table table:name="'+Ya(l.SheetNames[o])+`" table:style-name="ta1">
`);var d=0,f=0,p=ac(s["!ref"]||"A1"),y=s["!merges"]||[],g=0,N=Array.isArray(s);if(s["!cols"])for(f=0;f<=p.e.c;++f)c.push("        <table:table-column"+(s["!cols"][f]?' table:style-name="co'+s["!cols"][f].ods+'"':"")+`></table:table-column>
`);var w="",k=s["!rows"]||[];for(d=0;d<p.s.r;++d)w=k[d]?' table:style-name="ro'+k[d].ods+'"':"",c.push("        <table:table-row"+w+`></table:table-row>
`);for(;d<=p.e.r;++d){for(w=k[d]?' table:style-name="ro'+k[d].ods+'"':"",c.push("        <table:table-row"+w+`>
`),f=0;f<p.s.c;++f)c.push(t);for(;f<=p.e.c;++f){var S=!1,O={},E="";for(g=0;g!=y.length;++g)if(!(y[g].s.c>f)&&!(y[g].s.r>d)&&!(y[g].e.c<f)&&!(y[g].e.r<d)){(y[g].s.c!=f||y[g].s.r!=d)&&(S=!0),O["table:number-columns-spanned"]=y[g].e.c-y[g].s.c+1,O["table:number-rows-spanned"]=y[g].e.r-y[g].s.r+1;break}if(S){c.push(r);continue}var D=Tn({r:d,c:f}),H=N?(s[d]||[])[f]:s[D];if(H&&H.f&&(O["table:formula"]=Ya(I4e(H.f)),H.F&&H.F.slice(0,D.length)==D)){var W=ac(H.F);O["table:number-matrix-columns-spanned"]=W.e.c-W.s.c+1,O["table:number-matrix-rows-spanned"]=W.e.r-W.s.r+1}if(!H){c.push(t);continue}switch(H.t){case"b":E=H.v?"TRUE":"FALSE",O["office:value-type"]="boolean",O["office:boolean-value"]=H.v?"true":"false";break;case"n":E=H.w||String(H.v||0),O["office:value-type"]="float",O["office:value"]=H.v||0;break;case"s":case"str":E=H.v==null?"":H.v,O["office:value-type"]="string";break;case"d":E=H.w||Es(H.v).toISOString(),O["office:value-type"]="date",O["office:date-value"]=Es(H.v).toISOString(),O["table:style-name"]="ce1";break;default:c.push(t);continue}var R=e(E);if(H.l&&H.l.Target){var z=H.l.Target;z=z.charAt(0)=="#"?"#"+D4e(z.slice(1)):z,z.charAt(0)!="#"&&!z.match(/^\w+:/)&&(z="../"+z),R=Sr("text:a",R,{"xlink:href":z.replace(/&/g,"&amp;")})}c.push("          "+Sr("table:table-cell",Sr("text:p",R,{}),O)+`
`)}c.push(`        </table:table-row>
`)}return c.push(`      </table:table>
`),c.join("")},a=function(s,l){s.push(` <office:automatic-styles>
`),s.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),s.push(`   <number:month number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:day number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:year/>
`),s.push(`  </number:date-style>
`);var o=0;l.SheetNames.map(function(d){return l.Sheets[d]}).forEach(function(d){if(d&&d["!cols"]){for(var f=0;f<d["!cols"].length;++f)if(d["!cols"][f]){var p=d["!cols"][f];if(p.width==null&&p.wpx==null&&p.wch==null)continue;cf(p),p.ods=o;var y=d["!cols"][f].wpx+"px";s.push('  <style:style style:name="co'+o+`" style:family="table-column">
`),s.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+y+`"/>
`),s.push(`  </style:style>
`),++o}}});var c=0;l.SheetNames.map(function(d){return l.Sheets[d]}).forEach(function(d){if(d&&d["!rows"]){for(var f=0;f<d["!rows"].length;++f)if(d["!rows"][f]){d["!rows"][f].ods=c;var p=d["!rows"][f].hpx+"px";s.push('  <style:style style:name="ro'+c+`" style:family="table-row">
`),s.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+p+`"/>
`),s.push(`  </style:style>
`),++c}}}),s.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),s.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),s.push(`  </style:style>
`),s.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),s.push(` </office:automatic-styles>
`)};return function(l,o){var c=[Ci],d=hb({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),f=hb({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});o.bookType=="fods"?(c.push("<office:document"+d+f+`>
`),c.push(h$().replace(/office:document-meta/g,"office:meta"))):c.push("<office:document-content"+d+`>
`),a(c,l),c.push(`  <office:body>
`),c.push(`    <office:spreadsheet>
`);for(var p=0;p!=l.SheetNames.length;++p)c.push(n(l.Sheets[l.SheetNames[p]],l,p));return c.push(`    </office:spreadsheet>
`),c.push(`  </office:body>
`),o.bookType=="fods"?c.push("</office:document>"):c.push("</office:document-content>"),c.join("")}})();function _V(e,t){if(t.bookType=="fods")return AD(e,t);var r=UC(),n="",a=[],s=[];return n="mimetype",Yn(r,n,"application/vnd.oasis.opendocument.spreadsheet"),n="content.xml",Yn(r,n,AD(e,t)),a.push([n,"text/xml"]),s.push([n,"ContentFile"]),n="styles.xml",Yn(r,n,fSe(e,t)),a.push([n,"text/xml"]),s.push([n,"StylesFile"]),n="meta.xml",Yn(r,n,Ci+h$()),a.push([n,"text/xml"]),s.push([n,"MetadataFile"]),n="manifest.rdf",Yn(r,n,qve(s)),a.push([n,"application/rdf+xml"]),n="META-INF/manifest.xml",Yn(r,n,Uve(a)),r}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function $m(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function MS(e){return typeof TextDecoder<"u"?new TextDecoder().decode(e):ss(vf(e))}function mSe(e){return typeof TextEncoder<"u"?new TextEncoder().encode(e):Sc(Mu(e))}function xSe(e,t){e:for(var r=0;r<=e.length-t.length;++r){for(var n=0;n<t.length;++n)if(e[r+n]!=t[n])continue e;return!0}return!1}function uf(e){var t=e.reduce(function(a,s){return a+s.length},0),r=new Uint8Array(t),n=0;return e.forEach(function(a){r.set(a,n),n+=a.length}),r}function ED(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),(e+(e>>4)&252645135)*16843009>>>24}function pSe(e,t){for(var r=(e[t+15]&127)<<7|e[t+14]>>1,n=e[t+14]&1,a=t+13;a>=t;--a)n=n*256+e[a];return(e[t+15]&128?-n:n)*Math.pow(10,r-6176)}function gSe(e,t,r){var n=Math.floor(r==0?0:Math.LOG10E*Math.log(Math.abs(r)))+6176-20,a=r/Math.pow(10,n-6176);e[t+15]|=n>>7,e[t+14]|=(n&127)<<1;for(var s=0;a>=1;++s,a/=256)e[t+s]=a&255;e[t+15]|=r>=0?0:128}function yb(e,t){var r=t?t[0]:0,n=e[r]&127;e:if(e[r++]>=128&&(n|=(e[r]&127)<<7,e[r++]<128||(n|=(e[r]&127)<<14,e[r++]<128)||(n|=(e[r]&127)<<21,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,28),++r,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,35),++r,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,42),++r,e[r++]<128)))break e;return t&&(t[0]=r),n}function Wa(e){var t=new Uint8Array(7);t[0]=e&127;var r=1;e:if(e>127){if(t[r-1]|=128,t[r]=e>>7&127,++r,e<=16383||(t[r-1]|=128,t[r]=e>>14&127,++r,e<=2097151)||(t[r-1]|=128,t[r]=e>>21&127,++r,e<=268435455)||(t[r-1]|=128,t[r]=e/256>>>21&127,++r,e<=34359738367)||(t[r-1]|=128,t[r]=e/65536>>>21&127,++r,e<=4398046511103))break e;t[r-1]|=128,t[r]=e/16777216>>>21&127,++r}return t.slice(0,r)}function ci(e){var t=0,r=e[t]&127;e:if(e[t++]>=128){if(r|=(e[t]&127)<<7,e[t++]<128||(r|=(e[t]&127)<<14,e[t++]<128)||(r|=(e[t]&127)<<21,e[t++]<128))break e;r|=(e[t]&127)<<28}return r}function Ia(e){for(var t=[],r=[0];r[0]<e.length;){var n=r[0],a=yb(e,r),s=a&7;a=Math.floor(a/8);var l=0,o;if(a==0)break;switch(s){case 0:{for(var c=r[0];e[r[0]++]>=128;);o=e.slice(c,r[0])}break;case 5:l=4,o=e.slice(r[0],r[0]+l),r[0]+=l;break;case 1:l=8,o=e.slice(r[0],r[0]+l),r[0]+=l;break;case 2:l=yb(e,r),o=e.slice(r[0],r[0]+l),r[0]+=l;break;case 3:case 4:default:throw new Error("PB Type ".concat(s," for Field ").concat(a," at offset ").concat(n))}var d={data:o,type:s};t[a]==null?t[a]=[d]:t[a].push(d)}return t}function El(e){var t=[];return e.forEach(function(r,n){r.forEach(function(a){a.data&&(t.push(Wa(n*8+a.type)),a.type==2&&t.push(Wa(a.data.length)),t.push(a.data))})}),uf(t)}function fA(e,t){return(e==null?void 0:e.map(function(r){return t(r.data)}))||[]}function td(e){for(var t,r=[],n=[0];n[0]<e.length;){var a=yb(e,n),s=Ia(e.slice(n[0],n[0]+a));n[0]+=a;var l={id:ci(s[1][0].data),messages:[]};s[2].forEach(function(o){var c=Ia(o.data),d=ci(c[3][0].data);l.messages.push({meta:c,data:e.slice(n[0],n[0]+d)}),n[0]+=d}),(t=s[3])!=null&&t[0]&&(l.merge=ci(s[3][0].data)>>>0>0),r.push(l)}return r}function Gx(e){var t=[];return e.forEach(function(r){var n=[];n[1]=[{data:Wa(r.id),type:0}],n[2]=[],r.merge!=null&&(n[3]=[{data:Wa(+!!r.merge),type:0}]);var a=[];r.messages.forEach(function(l){a.push(l.data),l.meta[3]=[{type:0,data:Wa(l.data.length)}],n[2].push({data:El(l.meta),type:2})});var s=El(n);t.push(Wa(s.length)),t.push(s),a.forEach(function(l){return t.push(l)})}),uf(t)}function bSe(e,t){if(e!=0)throw new Error("Unexpected Snappy chunk type ".concat(e));for(var r=[0],n=yb(t,r),a=[];r[0]<t.length;){var s=t[r[0]]&3;if(s==0){var l=t[r[0]++]>>2;if(l<60)++l;else{var o=l-59;l=t[r[0]],o>1&&(l|=t[r[0]+1]<<8),o>2&&(l|=t[r[0]+2]<<16),o>3&&(l|=t[r[0]+3]<<24),l>>>=0,l++,r[0]+=o}a.push(t.slice(r[0],r[0]+l)),r[0]+=l;continue}else{var c=0,d=0;if(s==1?(d=(t[r[0]]>>2&7)+4,c=(t[r[0]++]&224)<<3,c|=t[r[0]++]):(d=(t[r[0]++]>>2)+1,s==2?(c=t[r[0]]|t[r[0]+1]<<8,r[0]+=2):(c=(t[r[0]]|t[r[0]+1]<<8|t[r[0]+2]<<16|t[r[0]+3]<<24)>>>0,r[0]+=4)),a=[uf(a)],c==0)throw new Error("Invalid offset 0");if(c>a[0].length)throw new Error("Invalid offset beyond length");if(d>=c)for(a.push(a[0].slice(-c)),d-=c;d>=a[a.length-1].length;)a.push(a[a.length-1]),d-=a[a.length-1].length;a.push(a[0].slice(-c,-c+d))}}var f=uf(a);if(f.length!=n)throw new Error("Unexpected length: ".concat(f.length," != ").concat(n));return f}function rd(e){for(var t=[],r=0;r<e.length;){var n=e[r++],a=e[r]|e[r+1]<<8|e[r+2]<<16;r+=3,t.push(bSe(n,e.slice(r,r+a))),r+=a}if(r!==e.length)throw new Error("data is not a valid framed stream!");return uf(t)}function Xx(e){for(var t=[],r=0;r<e.length;){var n=Math.min(e.length-r,268435455),a=new Uint8Array(4);t.push(a);var s=Wa(n),l=s.length;t.push(s),n<=60?(l++,t.push(new Uint8Array([n-1<<2]))):n<=256?(l+=2,t.push(new Uint8Array([240,n-1&255]))):n<=65536?(l+=3,t.push(new Uint8Array([244,n-1&255,n-1>>8&255]))):n<=16777216?(l+=4,t.push(new Uint8Array([248,n-1&255,n-1>>8&255,n-1>>16&255]))):n<=4294967296&&(l+=5,t.push(new Uint8Array([252,n-1&255,n-1>>8&255,n-1>>16&255,n-1>>>24&255]))),t.push(e.slice(r,r+n)),l+=n,a[0]=0,a[1]=l&255,a[2]=l>>8&255,a[3]=l>>16&255,r+=n}return uf(t)}function vSe(e,t,r,n){var a=$m(e),s=a.getUint32(4,!0),l=(n>1?12:8)+ED(s&(n>1?3470:398))*4,o=-1,c=-1,d=NaN,f=new Date(2001,0,1);s&512&&(o=a.getUint32(l,!0),l+=4),l+=ED(s&(n>1?12288:4096))*4,s&16&&(c=a.getUint32(l,!0),l+=4),s&32&&(d=a.getFloat64(l,!0),l+=8),s&64&&(f.setTime(f.getTime()+a.getFloat64(l,!0)*1e3),l+=8);var p;switch(e[2]){case 0:break;case 2:p={t:"n",v:d};break;case 3:p={t:"s",v:t[c]};break;case 5:p={t:"d",v:f};break;case 6:p={t:"b",v:d>0};break;case 7:p={t:"n",v:d/86400};break;case 8:p={t:"e",v:0};break;case 9:if(o>-1)p={t:"s",v:r[o]};else if(c>-1)p={t:"s",v:t[c]};else if(!isNaN(d))p={t:"n",v:d};else throw new Error("Unsupported cell type ".concat(e.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(e.slice(0,4)))}return p}function ySe(e,t,r){var n=$m(e),a=n.getUint32(8,!0),s=12,l=-1,o=-1,c=NaN,d=NaN,f=new Date(2001,0,1);a&1&&(c=pSe(e,s),s+=16),a&2&&(d=n.getFloat64(s,!0),s+=8),a&4&&(f.setTime(f.getTime()+n.getFloat64(s,!0)*1e3),s+=8),a&8&&(o=n.getUint32(s,!0),s+=4),a&16&&(l=n.getUint32(s,!0),s+=4);var p;switch(e[1]){case 0:break;case 2:p={t:"n",v:c};break;case 3:p={t:"s",v:t[o]};break;case 5:p={t:"d",v:f};break;case 6:p={t:"b",v:d>0};break;case 7:p={t:"n",v:d/86400};break;case 8:p={t:"e",v:0};break;case 9:if(l>-1)p={t:"s",v:r[l]};else throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(a&31," : ").concat(e.slice(0,4)));break;case 10:p={t:"n",v:c};break;default:throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(a&31," : ").concat(e.slice(0,4)))}return p}function uN(e,t){var r=new Uint8Array(32),n=$m(r),a=12,s=0;switch(r[0]=5,e.t){case"n":r[1]=2,gSe(r,a,e.v),s|=1,a+=16;break;case"b":r[1]=6,n.setFloat64(a,e.v?1:0,!0),s|=2,a+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[1]=3,n.setUint32(a,t.indexOf(e.v),!0),s|=8,a+=4;break;default:throw"unsupported cell type "+e.t}return n.setUint32(8,s,!0),r.slice(0,a)}function hN(e,t){var r=new Uint8Array(32),n=$m(r),a=12,s=0;switch(r[0]=3,e.t){case"n":r[2]=2,n.setFloat64(a,e.v,!0),s|=32,a+=8;break;case"b":r[2]=6,n.setFloat64(a,e.v?1:0,!0),s|=32,a+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[2]=3,n.setUint32(a,t.indexOf(e.v),!0),s|=16,a+=4;break;default:throw"unsupported cell type "+e.t}return n.setUint32(4,s,!0),r.slice(0,a)}function wSe(e,t,r){switch(e[0]){case 0:case 1:case 2:case 3:return vSe(e,t,r,e[0]);case 5:return ySe(e,t,r);default:throw new Error("Unsupported payload version ".concat(e[0]))}}function Ql(e){var t=Ia(e);return yb(t[1][0].data)}function TD(e,t){var r=Ia(t.data),n=ci(r[1][0].data),a=r[3],s=[];return(a||[]).forEach(function(l){var o=Ia(l.data),c=ci(o[1][0].data)>>>0;switch(n){case 1:s[c]=MS(o[3][0].data);break;case 8:{var d=e[Ql(o[9][0].data)][0],f=Ia(d.data),p=e[Ql(f[1][0].data)][0],y=ci(p.meta[1][0].data);if(y!=2001)throw new Error("2000 unexpected reference to ".concat(y));var g=Ia(p.data);s[c]=g[3].map(function(N){return MS(N.data)}).join("")}break}}),s}function kSe(e,t){var r,n,a,s,l,o,c,d,f,p,y,g,N,w,k=Ia(e),S=ci(k[1][0].data)>>>0,O=ci(k[2][0].data)>>>0,E=((n=(r=k[8])==null?void 0:r[0])==null?void 0:n.data)&&ci(k[8][0].data)>0||!1,D,H;if((s=(a=k[7])==null?void 0:a[0])!=null&&s.data&&t!=0)D=(o=(l=k[7])==null?void 0:l[0])==null?void 0:o.data,H=(d=(c=k[6])==null?void 0:c[0])==null?void 0:d.data;else if((p=(f=k[4])==null?void 0:f[0])!=null&&p.data&&t!=1)D=(g=(y=k[4])==null?void 0:y[0])==null?void 0:g.data,H=(w=(N=k[3])==null?void 0:N[0])==null?void 0:w.data;else throw"NUMBERS Tile missing ".concat(t," cell storage");for(var W=E?4:1,R=$m(D),z=[],U=0;U<D.length/2;++U){var Z=R.getUint16(U*2,!0);Z<65535&&z.push([U,Z])}if(z.length!=O)throw"Expected ".concat(O," cells, found ").concat(z.length);var q=[];for(U=0;U<z.length-1;++U)q[z[U][0]]=H.subarray(z[U][1]*W,z[U+1][1]*W);return z.length>=1&&(q[z[z.length-1][0]]=H.subarray(z[z.length-1][1]*W)),{R:S,cells:q}}function NSe(e,t){var r,n=Ia(t.data),a=(r=n==null?void 0:n[7])!=null&&r[0]?ci(n[7][0].data)>>>0>0?1:0:-1,s=fA(n[5],function(l){return kSe(l,a)});return{nrows:ci(n[4][0].data)>>>0,data:s.reduce(function(l,o){return l[o.R]||(l[o.R]=[]),o.cells.forEach(function(c,d){if(l[o.R][d])throw new Error("Duplicate cell r=".concat(o.R," c=").concat(d));l[o.R][d]=c}),l},[])}}function _Se(e,t,r){var n,a=Ia(t.data),s={s:{r:0,c:0},e:{r:0,c:0}};if(s.e.r=(ci(a[6][0].data)>>>0)-1,s.e.r<0)throw new Error("Invalid row varint ".concat(a[6][0].data));if(s.e.c=(ci(a[7][0].data)>>>0)-1,s.e.c<0)throw new Error("Invalid col varint ".concat(a[7][0].data));r["!ref"]=Kn(s);var l=Ia(a[4][0].data),o=TD(e,e[Ql(l[4][0].data)][0]),c=(n=l[17])!=null&&n[0]?TD(e,e[Ql(l[17][0].data)][0]):[],d=Ia(l[3][0].data),f=0;d[1].forEach(function(p){var y=Ia(p.data),g=e[Ql(y[2][0].data)][0],N=ci(g.meta[1][0].data);if(N!=6002)throw new Error("6001 unexpected reference to ".concat(N));var w=NSe(e,g);w.data.forEach(function(k,S){k.forEach(function(O,E){var D=Tn({r:f+S,c:E}),H=wSe(O,o,c);H&&(r[D]=H)})}),f+=w.nrows})}function SSe(e,t){var r=Ia(t.data),n={"!ref":"A1"},a=e[Ql(r[2][0].data)],s=ci(a[0].meta[1][0].data);if(s!=6001)throw new Error("6000 unexpected reference to ".concat(s));return _Se(e,a[0],n),n}function jSe(e,t){var r,n=Ia(t.data),a={name:(r=n[1])!=null&&r[0]?MS(n[1][0].data):"",sheets:[]},s=fA(n[2],Ql);return s.forEach(function(l){e[l].forEach(function(o){var c=ci(o.meta[1][0].data);c==6e3&&a.sheets.push(SSe(e,o))})}),a}function CSe(e,t){var r=bA(),n=Ia(t.data),a=fA(n[1],Ql);if(a.forEach(function(s){e[s].forEach(function(l){var o=ci(l.meta[1][0].data);if(o==2){var c=jSe(e,l);c.sheets.forEach(function(d,f){vA(r,d,f==0?c.name:c.name+"_"+f,!0)})}})}),r.SheetNames.length==0)throw new Error("Empty NUMBERS file");return r}function fN(e){var t,r,n,a,s={},l=[];if(e.FullPaths.forEach(function(c){if(c.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),e.FileIndex.forEach(function(c){if(c.name.match(/\.iwa$/)){var d;try{d=rd(c.content)}catch(p){return console.log("?? "+c.content.length+" "+(p.message||p))}var f;try{f=td(d)}catch(p){return console.log("## "+(p.message||p))}f.forEach(function(p){s[p.id]=p.messages,l.push(p.id)})}}),!l.length)throw new Error("File has no messages");var o=((a=(n=(r=(t=s==null?void 0:s[1])==null?void 0:t[0])==null?void 0:r.meta)==null?void 0:n[1])==null?void 0:a[0].data)&&ci(s[1][0].meta[1][0].data)==1&&s[1][0];if(o||l.forEach(function(c){s[c].forEach(function(d){var f=ci(d.meta[1][0].data)>>>0;if(f==1)if(!o)o=d;else throw new Error("Document has multiple roots")})}),!o)throw new Error("Cannot find Document root");return CSe(s,o)}function ASe(e,t,r){var n,a,s,l;if(!((n=e[6])!=null&&n[0])||!((a=e[7])!=null&&a[0]))throw"Mutation only works on post-BNC storages!";var o=((l=(s=e[8])==null?void 0:s[0])==null?void 0:l.data)&&ci(e[8][0].data)>0||!1;if(o)throw"Math only works with normal offsets";for(var c=0,d=$m(e[7][0].data),f=0,p=[],y=$m(e[4][0].data),g=0,N=[],w=0;w<t.length;++w){if(t[w]==null){d.setUint16(w*2,65535,!0),y.setUint16(w*2,65535);continue}d.setUint16(w*2,f,!0),y.setUint16(w*2,g,!0);var k,S;switch(typeof t[w]){case"string":k=uN({t:"s",v:t[w]},r),S=hN({t:"s",v:t[w]},r);break;case"number":k=uN({t:"n",v:t[w]},r),S=hN({t:"n",v:t[w]},r);break;case"boolean":k=uN({t:"b",v:t[w]},r),S=hN({t:"b",v:t[w]},r);break;default:throw new Error("Unsupported value "+t[w])}p.push(k),f+=k.length,N.push(S),g+=S.length,++c}for(e[2][0].data=Wa(c);w<e[7][0].data.length/2;++w)d.setUint16(w*2,65535,!0),y.setUint16(w*2,65535,!0);return e[6][0].data=uf(p),e[3][0].data=uf(N),c}function ESe(e,t){if(!t||!t.numbers)throw new Error("Must pass a `numbers` option -- check the README");var r=e.Sheets[e.SheetNames[0]];e.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var n=ac(r["!ref"]);n.s.r=n.s.c=0;var a=!1;n.e.c>9&&(a=!0,n.e.c=9),n.e.r>49&&(a=!0,n.e.r=49),a&&console.error("The Numbers writer is currently limited to ".concat(Kn(n)));var s=ww(r,{range:n,header:1}),l=["~Sh33tJ5~"];s.forEach(function(te){return te.forEach(function(Y){typeof Y=="string"&&l.push(Y)})});var o={},c=[],d=vn.read(t.numbers,{type:"base64"});d.FileIndex.map(function(te,Y){return[te,d.FullPaths[Y]]}).forEach(function(te){var Y=te[0],ne=te[1];if(Y.type==2&&Y.name.match(/\.iwa/)){var ee=Y.content,Ce=rd(ee),me=td(Ce);me.forEach(function(se){c.push(se.id),o[se.id]={deps:[],location:ne,type:ci(se.messages[0].meta[1][0].data)}})}}),c.sort(function(te,Y){return te-Y});var f=c.filter(function(te){return te>1}).map(function(te){return[te,Wa(te)]});d.FileIndex.map(function(te,Y){return[te,d.FullPaths[Y]]}).forEach(function(te){var Y=te[0];if(te[1],!!Y.name.match(/\.iwa/)){var ne=td(rd(Y.content));ne.forEach(function(ee){ee.messages.forEach(function(Ce){f.forEach(function(me){ee.messages.some(function(se){return ci(se.meta[1][0].data)!=11006&&xSe(se.data,me[1])})&&o[me[0]].deps.push(ee.id)})})})}});for(var p=vn.find(d,o[1].location),y=td(rd(p.content)),g,N=0;N<y.length;++N){var w=y[N];w.id==1&&(g=w)}var k=Ql(Ia(g.messages[0].data)[1][0].data);for(p=vn.find(d,o[k].location),y=td(rd(p.content)),N=0;N<y.length;++N)w=y[N],w.id==k&&(g=w);for(k=Ql(Ia(g.messages[0].data)[2][0].data),p=vn.find(d,o[k].location),y=td(rd(p.content)),N=0;N<y.length;++N)w=y[N],w.id==k&&(g=w);for(k=Ql(Ia(g.messages[0].data)[2][0].data),p=vn.find(d,o[k].location),y=td(rd(p.content)),N=0;N<y.length;++N)w=y[N],w.id==k&&(g=w);var S=Ia(g.messages[0].data);{S[6][0].data=Wa(n.e.r+1),S[7][0].data=Wa(n.e.c+1);var O=Ql(S[46][0].data),E=vn.find(d,o[O].location),D=td(rd(E.content));{for(var H=0;H<D.length&&D[H].id!=O;++H);if(D[H].id!=O)throw"Bad ColumnRowUIDMapArchive";var W=Ia(D[H].messages[0].data);W[1]=[],W[2]=[],W[3]=[];for(var R=0;R<=n.e.c;++R){var z=[];z[1]=z[2]=[{type:0,data:Wa(R+420690)}],W[1].push({type:2,data:El(z)}),W[2].push({type:0,data:Wa(R)}),W[3].push({type:0,data:Wa(R)})}W[4]=[],W[5]=[],W[6]=[];for(var U=0;U<=n.e.r;++U)z=[],z[1]=z[2]=[{type:0,data:Wa(U+726270)}],W[4].push({type:2,data:El(z)}),W[5].push({type:0,data:Wa(U)}),W[6].push({type:0,data:Wa(U)});D[H].messages[0].data=El(W)}E.content=Xx(Gx(D)),E.size=E.content.length,delete S[46];var Z=Ia(S[4][0].data);{Z[7][0].data=Wa(n.e.r+1);var q=Ia(Z[1][0].data),K=Ql(q[2][0].data);E=vn.find(d,o[K].location),D=td(rd(E.content));{if(D[0].id!=K)throw"Bad HeaderStorageBucket";var Q=Ia(D[0].messages[0].data);for(U=0;U<s.length;++U){var re=Ia(Q[2][0].data);re[1][0].data=Wa(U),re[4][0].data=Wa(s[U].length),Q[2][U]={type:Q[2][0].type,data:El(re)}}D[0].messages[0].data=El(Q)}E.content=Xx(Gx(D)),E.size=E.content.length;var ae=Ql(Z[2][0].data);E=vn.find(d,o[ae].location),D=td(rd(E.content));{if(D[0].id!=ae)throw"Bad HeaderStorageBucket";for(Q=Ia(D[0].messages[0].data),R=0;R<=n.e.c;++R)re=Ia(Q[2][0].data),re[1][0].data=Wa(R),re[4][0].data=Wa(n.e.r+1),Q[2][R]={type:Q[2][0].type,data:El(re)};D[0].messages[0].data=El(Q)}E.content=Xx(Gx(D)),E.size=E.content.length;var de=Ql(Z[4][0].data);(function(){for(var te=vn.find(d,o[de].location),Y=td(rd(te.content)),ne,ee=0;ee<Y.length;++ee){var Ce=Y[ee];Ce.id==de&&(ne=Ce)}var me=Ia(ne.messages[0].data);{me[3]=[];var se=[];l.forEach(function(ie,Te){se[1]=[{type:0,data:Wa(Te)}],se[2]=[{type:0,data:Wa(1)}],se[3]=[{type:2,data:mSe(ie)}],me[3].push({type:2,data:El(se)})})}ne.messages[0].data=El(me);var je=Gx(Y),be=Xx(je);te.content=be,te.size=te.content.length})();var he=Ia(Z[3][0].data);{var Se=he[1][0];delete he[2];var ke=Ia(Se.data);{var Le=Ql(ke[2][0].data);(function(){for(var te=vn.find(d,o[Le].location),Y=td(rd(te.content)),ne,ee=0;ee<Y.length;++ee){var Ce=Y[ee];Ce.id==Le&&(ne=Ce)}var me=Ia(ne.messages[0].data);{delete me[6],delete he[7];var se=new Uint8Array(me[5][0].data);me[5]=[];for(var je=0,be=0;be<=n.e.r;++be){var ie=Ia(se);je+=ASe(ie,s[be],l),ie[1][0].data=Wa(be),me[5].push({data:El(ie),type:2})}me[1]=[{type:0,data:Wa(n.e.c+1)}],me[2]=[{type:0,data:Wa(n.e.r+1)}],me[3]=[{type:0,data:Wa(je)}],me[4]=[{type:0,data:Wa(n.e.r+1)}]}ne.messages[0].data=El(me);var Te=Gx(Y),De=Xx(Te);te.content=De,te.size=te.content.length})()}Se.data=El(ke)}Z[3][0].data=El(he)}S[4][0].data=El(Z)}g.messages[0].data=El(S);var fe=Gx(y),F=Xx(fe);return p.content=F,p.size=p.content.length,d}function SV(e){return function(r){for(var n=0;n!=e.length;++n){var a=e[n];r[a[0]]===void 0&&(r[a[0]]=a[1]),a[2]==="n"&&(r[a[0]]=Number(r[a[0]]))}}}function mA(e){SV([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(e)}function xA(e){SV([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(e)}function TSe(e){return ia.WS.indexOf(e)>-1?"sheet":e==ia.CS?"chart":e==ia.DS?"dialog":e==ia.MS?"macro":e&&e.length?e:"sheet"}function OSe(e,t){if(!e)return 0;try{e=t.map(function(n){return n.id||(n.id=n.strRelID),[n.name,e["!id"][n.id].Target,TSe(e["!id"][n.id].Type)]})}catch{return null}return!e||e.length===0?null:e}function PSe(e,t,r,n,a,s,l,o,c,d,f,p){try{s[n]=Tg(jc(e,r,!0),t);var y=Ii(e,t),g;switch(o){case"sheet":g=e_e(y,t,a,c,s[n],d,f,p);break;case"chart":if(g=t_e(y,t,a,c,s[n],d,f,p),!g||!g["!drawel"])break;var N=yg(g["!drawel"].Target,t),w=mb(N),k=zke(jc(e,N,!0),Tg(jc(e,w,!0),N)),S=yg(k,N),O=mb(S);g=ANe(jc(e,S,!0),S,c,Tg(jc(e,O,!0),S),d,g);break;case"macro":g=r_e(y,t,a,c,s[n],d,f,p);break;case"dialog":g=n_e(y,t,a,c,s[n],d,f,p);break;default:throw new Error("Unrecognized sheet type "+o)}l[n]=g;var E=[];s&&s[n]&&ui(s[n]).forEach(function(D){var H="";if(s[n][D].Type==ia.CMNT){H=yg(s[n][D].Target,t);var W=l_e(Ii(e,H,!0),H,c);if(!W||!W.length)return;xD(g,W,!1)}s[n][D].Type==ia.TCMNT&&(H=yg(s[n][D].Target,t),E=E.concat(Hke(Ii(e,H,!0),c)))}),E&&E.length&&xD(g,E,!0,c.people||[])}catch(D){if(c.WTF)throw D}}function Qc(e){return e.charAt(0)=="/"?e.slice(1):e}function ISe(e,t){if(pp(),t=t||{},mA(t),nd(e,"META-INF/manifest.xml")||nd(e,"objectdata.xml"))return jD(e,t);if(nd(e,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof fN<"u"){if(e.FileIndex)return fN(e);var r=vn.utils.cfb_new();return LI(e).forEach(function(re){Yn(r,re,$be(e,re))}),fN(r)}throw new Error("Unsupported NUMBERS file")}if(!nd(e,"[Content_Types].xml"))throw nd(e,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):nd(e,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var n=LI(e),a=Rve(jc(e,"[Content_Types].xml")),s=!1,l,o;if(a.workbooks.length===0&&(o="xl/workbook.xml",Ii(e,o,!0)&&a.workbooks.push(o)),a.workbooks.length===0){if(o="xl/workbook.bin",!Ii(e,o,!0))throw new Error("Could not find workbook");a.workbooks.push(o),s=!0}a.workbooks[0].slice(-3)=="bin"&&(s=!0);var c={},d={};if(!t.bookSheets&&!t.bookProps){if(Og=[],a.sst)try{Og=i_e(Ii(e,Qc(a.sst)),a.sst,t)}catch(re){if(t.WTF)throw re}t.cellStyles&&a.themes.length&&(c=s_e(jc(e,a.themes[0].replace(/^\//,""),!0)||"",a.themes[0],t)),a.style&&(d=a_e(Ii(e,Qc(a.style)),a.style,c,t))}a.links.map(function(re){try{var ae=Tg(jc(e,mb(Qc(re))),re);return c_e(Ii(e,Qc(re)),ae,re,t)}catch{}});var f=JNe(Ii(e,Qc(a.workbooks[0])),a.workbooks[0],t),p={},y="";a.coreprops.length&&(y=Ii(e,Qc(a.coreprops[0]),!0),y&&(p=f$(y)),a.extprops.length!==0&&(y=Ii(e,Qc(a.extprops[0]),!0),y&&$ve(y,p,t)));var g={};(!t.bookSheets||t.bookProps)&&a.custprops.length!==0&&(y=jc(e,Qc(a.custprops[0]),!0),y&&(g=Wve(y,t)));var N={};if((t.bookSheets||t.bookProps)&&(f.Sheets?l=f.Sheets.map(function(ae){return ae.name}):p.Worksheets&&p.SheetNames.length>0&&(l=p.SheetNames),t.bookProps&&(N.Props=p,N.Custprops=g),t.bookSheets&&typeof l<"u"&&(N.SheetNames=l),t.bookSheets?N.SheetNames:t.bookProps))return N;l={};var w={};t.bookDeps&&a.calcchain&&(w=o_e(Ii(e,Qc(a.calcchain)),a.calcchain));var k=0,S={},O,E;{var D=f.Sheets;p.Worksheets=D.length,p.SheetNames=[];for(var H=0;H!=D.length;++H)p.SheetNames[H]=D[H].name}var W=s?"bin":"xml",R=a.workbooks[0].lastIndexOf("/"),z=(a.workbooks[0].slice(0,R+1)+"_rels/"+a.workbooks[0].slice(R+1)+".rels").replace(/^\//,"");nd(e,z)||(z="xl/_rels/workbook."+W+".rels");var U=Tg(jc(e,z,!0),z.replace(/_rels.*/,"s5s"));(a.metadata||[]).length>=1&&(t.xlmeta=d_e(Ii(e,Qc(a.metadata[0])),a.metadata[0],t)),(a.people||[]).length>=1&&(t.people=Vke(Ii(e,Qc(a.people[0])),t)),U&&(U=OSe(U,f.Sheets));var Z=Ii(e,"xl/worksheets/sheet.xml",!0)?1:0;e:for(k=0;k!=p.Worksheets;++k){var q="sheet";if(U&&U[k]?(O="xl/"+U[k][1].replace(/[\/]?xl\//,""),nd(e,O)||(O=U[k][1]),nd(e,O)||(O=z.replace(/_rels\/.*$/,"")+U[k][1]),q=U[k][2]):(O="xl/worksheets/sheet"+(k+1-Z)+"."+W,O=O.replace(/sheet0\./,"sheet.")),E=O.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),t&&t.sheets!=null)switch(typeof t.sheets){case"number":if(k!=t.sheets)continue e;break;case"string":if(p.SheetNames[k].toLowerCase()!=t.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(t.sheets)){for(var K=!1,Q=0;Q!=t.sheets.length;++Q)typeof t.sheets[Q]=="number"&&t.sheets[Q]==k&&(K=1),typeof t.sheets[Q]=="string"&&t.sheets[Q].toLowerCase()==p.SheetNames[k].toLowerCase()&&(K=1);if(!K)continue e}}PSe(e,O,E,p.SheetNames[k],k,S,l,q,t,f,c,d)}return N={Directory:a,Workbook:f,Props:p,Custprops:g,Deps:w,Sheets:l,SheetNames:p.SheetNames,Strings:Og,Styles:d,Themes:c,SSF:Ts(En)},t&&t.bookFiles&&(e.files?(N.keys=n,N.files=e.files):(N.keys=[],N.files={},e.FullPaths.forEach(function(re,ae){re=re.replace(/^Root Entry[\/]/,""),N.keys.push(re),N.files[re]=e.FileIndex[ae]}))),t&&t.bookVBA&&(a.vba.length>0?N.vbaraw=Ii(e,Qc(a.vba[0]),!0):a.defaults&&a.defaults.bin===Jke&&(N.vbaraw=Ii(e,"xl/vbaProject.bin",!0))),N}function DSe(e,t){var r=t||{},n="Workbook",a=vn.find(e,n);try{if(n="/!DataSpaces/Version",a=vn.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(dwe(a.content),n="/!DataSpaces/DataSpaceMap",a=vn.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var s=hwe(a.content);if(s.length!==1||s[0].comps.length!==1||s[0].comps[0].t!==0||s[0].name!=="StrongEncryptionDataSpace"||s[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",a=vn.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var l=fwe(a.content);if(l.length!=1||l[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",a=vn.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);xwe(a.content)}catch{}if(n="/EncryptionInfo",a=vn.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var o=pwe(a.content);if(n="/EncryptedPackage",a=vn.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(o[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(o[1],a.content,r.password||"",r);if(o[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(o[1],a.content,r.password||"",r);throw new Error("File is password-protected")}function MSe(e,t){return t.bookType=="ods"?_V(e,t):t.bookType=="numbers"?ESe(e,t):t.bookType=="xlsb"?LSe(e,t):RSe(e,t)}function LSe(e,t){i1=1024,e&&!e.SSF&&(e.SSF=Ts(En)),e&&e.SSF&&(pp(),Ik(e.SSF),t.revssf=Mk(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,Pg?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r=t.bookType=="xlsb"?"bin":"xml",n=Q$.indexOf(t.bookType)>-1,a=eA();xA(t=t||{});var s=UC(),l="",o=0;if(t.cellXfs=[],wf(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),l="docProps/core.xml",Yn(s,l,m$(e.Props,t)),a.coreprops.push(l),Ka(t.rels,2,l,ia.CORE_PROPS),l="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var c=[],d=0;d<e.SheetNames.length;++d)(e.Workbook.Sheets[d]||{}).Hidden!=2&&c.push(e.SheetNames[d]);e.Props.SheetNames=c}for(e.Props.Worksheets=e.Props.SheetNames.length,Yn(s,l,g$(e.Props)),a.extprops.push(l),Ka(t.rels,3,l,ia.EXT_PROPS),e.Custprops!==e.Props&&ui(e.Custprops||{}).length>0&&(l="docProps/custom.xml",Yn(s,l,b$(e.Custprops)),a.custprops.push(l),Ka(t.rels,4,l,ia.CUST_PROPS)),o=1;o<=e.SheetNames.length;++o){var f={"!id":{}},p=e.Sheets[e.SheetNames[o-1]],y=(p||{})["!type"]||"sheet";switch(y){case"chart":default:l="xl/worksheets/sheet"+o+"."+r,Yn(s,l,h_e(o-1,l,t,e,f)),a.sheets.push(l),Ka(t.wbrels,-1,"worksheets/sheet"+o+"."+r,ia.WS[0])}if(p){var g=p["!comments"],N=!1,w="";g&&g.length>0&&(w="xl/comments"+o+"."+r,Yn(s,w,x_e(g,w)),a.comments.push(w),Ka(f,-1,"../comments"+o+"."+r,ia.CMNT),N=!0),p["!legacy"]&&N&&Yn(s,"xl/drawings/vmlDrawing"+o+".vml",Y$(o,p["!comments"])),delete p["!comments"],delete p["!legacy"]}f["!id"].rId1&&Yn(s,mb(l),p1(f))}return t.Strings!=null&&t.Strings.length>0&&(l="xl/sharedStrings."+r,Yn(s,l,m_e(t.Strings,l,t)),a.strs.push(l),Ka(t.wbrels,-1,"sharedStrings."+r,ia.SST)),l="xl/workbook."+r,Yn(s,l,u_e(e,l)),a.workbooks.push(l),Ka(t.rels,1,l,ia.WB),l="xl/theme/theme1.xml",Yn(s,l,iA(e.Themes,t)),a.themes.push(l),Ka(t.wbrels,-1,"theme/theme1.xml",ia.THEME),l="xl/styles."+r,Yn(s,l,f_e(e,l,t)),a.styles.push(l),Ka(t.wbrels,-1,"styles."+r,ia.STY),e.vbaraw&&n&&(l="xl/vbaProject.bin",Yn(s,l,e.vbaraw),a.vba.push(l),Ka(t.wbrels,-1,"vbaProject.bin",ia.VBA)),l="xl/metadata."+r,Yn(s,l,p_e(l)),a.metadata.push(l),Ka(t.wbrels,-1,"metadata."+r,ia.XLMETA),Yn(s,"[Content_Types].xml",u$(a,t)),Yn(s,"_rels/.rels",p1(t.rels)),Yn(s,"xl/_rels/workbook."+r+".rels",p1(t.wbrels)),delete t.revssf,delete t.ssf,s}function RSe(e,t){i1=1024,e&&!e.SSF&&(e.SSF=Ts(En)),e&&e.SSF&&(pp(),Ik(e.SSF),t.revssf=Mk(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,Pg?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r="xml",n=Q$.indexOf(t.bookType)>-1,a=eA();xA(t=t||{});var s=UC(),l="",o=0;if(t.cellXfs=[],wf(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),l="docProps/core.xml",Yn(s,l,m$(e.Props,t)),a.coreprops.push(l),Ka(t.rels,2,l,ia.CORE_PROPS),l="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var c=[],d=0;d<e.SheetNames.length;++d)(e.Workbook.Sheets[d]||{}).Hidden!=2&&c.push(e.SheetNames[d]);e.Props.SheetNames=c}e.Props.Worksheets=e.Props.SheetNames.length,Yn(s,l,g$(e.Props)),a.extprops.push(l),Ka(t.rels,3,l,ia.EXT_PROPS),e.Custprops!==e.Props&&ui(e.Custprops||{}).length>0&&(l="docProps/custom.xml",Yn(s,l,b$(e.Custprops)),a.custprops.push(l),Ka(t.rels,4,l,ia.CUST_PROPS));var f=["SheetJ5"];for(t.tcid=0,o=1;o<=e.SheetNames.length;++o){var p={"!id":{}},y=e.Sheets[e.SheetNames[o-1]],g=(y||{})["!type"]||"sheet";switch(g){case"chart":default:l="xl/worksheets/sheet"+o+"."+r,Yn(s,l,cV(o-1,t,e,p)),a.sheets.push(l),Ka(t.wbrels,-1,"worksheets/sheet"+o+"."+r,ia.WS[0])}if(y){var N=y["!comments"],w=!1,k="";if(N&&N.length>0){var S=!1;N.forEach(function(O){O[1].forEach(function(E){E.T==!0&&(S=!0)})}),S&&(k="xl/threadedComments/threadedComment"+o+"."+r,Yn(s,k,$ke(N,f,t)),a.threadedcomments.push(k),Ka(p,-1,"../threadedComments/threadedComment"+o+"."+r,ia.TCMNT)),k="xl/comments"+o+"."+r,Yn(s,k,Z$(N)),a.comments.push(k),Ka(p,-1,"../comments"+o+"."+r,ia.CMNT),w=!0}y["!legacy"]&&w&&Yn(s,"xl/drawings/vmlDrawing"+o+".vml",Y$(o,y["!comments"])),delete y["!comments"],delete y["!legacy"]}p["!id"].rId1&&Yn(s,mb(l),p1(p))}return t.Strings!=null&&t.Strings.length>0&&(l="xl/sharedStrings."+r,Yn(s,l,F$(t.Strings,t)),a.strs.push(l),Ka(t.wbrels,-1,"sharedStrings."+r,ia.SST)),l="xl/workbook."+r,Yn(s,l,mV(e)),a.workbooks.push(l),Ka(t.rels,1,l,ia.WB),l="xl/theme/theme1.xml",Yn(s,l,iA(e.Themes,t)),a.themes.push(l),Ka(t.wbrels,-1,"theme/theme1.xml",ia.THEME),l="xl/styles."+r,Yn(s,l,W$(e,t)),a.styles.push(l),Ka(t.wbrels,-1,"styles."+r,ia.STY),e.vbaraw&&n&&(l="xl/vbaProject.bin",Yn(s,l,e.vbaraw),a.vba.push(l),Ka(t.wbrels,-1,"vbaProject.bin",ia.VBA)),l="xl/metadata."+r,Yn(s,l,X$()),a.metadata.push(l),Ka(t.wbrels,-1,"metadata."+r,ia.XLMETA),f.length>1&&(l="xl/persons/person.xml",Yn(s,l,Wke(f)),a.people.push(l),Ka(t.wbrels,-1,"persons/person.xml",ia.PEOPLE)),Yn(s,"[Content_Types].xml",u$(a,t)),Yn(s,"_rels/.rels",p1(t.rels)),Yn(s,"xl/_rels/workbook."+r+".rels",p1(t.wbrels)),delete t.revssf,delete t.ssf,s}function pA(e,t){var r="";switch((t||{}).type||"base64"){case"buffer":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];case"base64":r=Pc(e.slice(0,12));break;case"binary":r=e;break;case"array":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];default:throw new Error("Unrecognized type "+(t&&t.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function FSe(e,t){return vn.find(e,"EncryptedPackage")?DSe(e,t):bV(e,t)}function BSe(e,t){var r,n=e,a=t||{};return a.type||(a.type=ra&&Buffer.isBuffer(e)?"buffer":"base64"),r=UH(n,a),ISe(r,a)}function jV(e,t){var r=0;e:for(;r<e.length;)switch(e.charCodeAt(r)){case 10:case 13:case 32:++r;break;case 60:return IS(e.slice(r),t);default:break e}return K1.to_workbook(e,t)}function USe(e,t){var r="",n=pA(e,t);switch(t.type){case"base64":r=Pc(e);break;case"binary":r=e;break;case"buffer":r=e.toString("binary");break;case"array":r=Um(e);break;default:throw new Error("Unrecognized type "+t.type)}return n[0]==239&&n[1]==187&&n[2]==191&&(r=ss(r)),t.type="binary",jV(r,t)}function zSe(e,t){var r=e;return t.type=="base64"&&(r=Pc(r)),r=ob.utils.decode(1200,r.slice(2),"str"),t.type="binary",jV(r,t)}function qSe(e){return e.match(/[^\x00-\x7F]/)?Mu(e):e}function mN(e,t,r,n){return n?(r.type="string",K1.to_workbook(e,r)):K1.to_workbook(t,r)}function LS(e,t){MC();var r=t||{};if(typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer)return LS(new Uint8Array(e),(r=Ts(r),r.type="array",r));typeof Uint8Array<"u"&&e instanceof Uint8Array&&!r.type&&(r.type=typeof Deno<"u"?"buffer":"array");var n=e,a=[0,0,0,0],s=!1;if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),b1={},r.dateNF&&(b1.dateNF=r.dateNF),r.type||(r.type=ra&&Buffer.isBuffer(e)?"buffer":"base64"),r.type=="file"&&(r.type=ra?"buffer":"binary",n=Lbe(e),typeof Uint8Array<"u"&&!ra&&(r.type="array")),r.type=="string"&&(s=!0,r.type="binary",r.codepage=65001,n=qSe(e)),r.type=="array"&&typeof Uint8Array<"u"&&e instanceof Uint8Array&&typeof ArrayBuffer<"u"){var l=new ArrayBuffer(3),o=new Uint8Array(l);if(o.foo="bar",!o.foo)return r=Ts(r),r.type="array",LS(LC(n),r)}switch((a=pA(n,r))[0]){case 208:if(a[1]===207&&a[2]===17&&a[3]===224&&a[4]===161&&a[5]===177&&a[6]===26&&a[7]===225)return FSe(vn.read(n,r),r);break;case 9:if(a[1]<=8)return bV(n,r);break;case 60:return IS(n,r);case 73:if(a[1]===73&&a[2]===42&&a[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(a[1]===68)return Kye(n,r);break;case 84:if(a[1]===65&&a[2]===66&&a[3]===76)return L$.to_workbook(n,r);break;case 80:return a[1]===75&&a[2]<9&&a[3]<9?BSe(n,r):mN(e,n,r,s);case 239:return a[3]===60?IS(n,r):mN(e,n,r,s);case 255:if(a[1]===254)return zSe(n,r);if(a[1]===0&&a[2]===2&&a[3]===0)return vm.to_workbook(n,r);break;case 0:if(a[1]===0&&(a[2]>=2&&a[3]===0||a[2]===0&&(a[3]===8||a[3]===9)))return vm.to_workbook(n,r);break;case 3:case 131:case 139:case 140:return PS.to_workbook(n,r);case 123:if(a[1]===92&&a[2]===114&&a[3]===116)return H$.to_workbook(n,r);break;case 10:case 13:case 32:return USe(n,r);case 137:if(a[1]===80&&a[2]===78&&a[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return Wye.indexOf(a[0])>-1&&a[2]<=12&&a[3]<=31?PS.to_workbook(n,r):mN(e,n,r,s)}function CV(e,t){switch(t.type){case"base64":case"binary":break;case"buffer":case"array":t.type="";break;case"file":return nv(t.file,vn.write(e,{type:ra?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");default:throw new Error("Unrecognized type "+t.type)}return vn.write(e,t)}function HSe(e,t){var r=Ts(t||{}),n=MSe(e,r);return $Se(n,r)}function $Se(e,t){var r={},n=ra?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(t.compression&&(r.compression="DEFLATE"),t.password)r.type=n;else switch(t.type){case"base64":r.type="base64";break;case"binary":r.type="string";break;case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");case"buffer":case"file":r.type=n;break;default:throw new Error("Unrecognized type "+t.type)}var a=e.FullPaths?vn.write(e,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[r.type]||r.type,compression:!!t.compression}):e.generate(r);if(typeof Deno<"u"&&typeof a=="string"){if(t.type=="binary"||t.type=="base64")return a;a=new Uint8Array(Pk(a))}return t.password&&typeof encrypt_agile<"u"?CV(encrypt_agile(a,t.password),t):t.type==="file"?nv(t.file,a):t.type=="string"?ss(a):a}function VSe(e,t){var r=t||{},n=q_e(e,r);return CV(n,r)}function Su(e,t,r){r||(r="");var n=r+e;switch(t.type){case"base64":return cb(Mu(n));case"binary":return Mu(n);case"string":return e;case"file":return nv(t.file,n,"utf8");case"buffer":return ra?sh(n,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(n):Su(n,{type:"binary"}).split("").map(function(a){return a.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function WSe(e,t){switch(t.type){case"base64":return cb(e);case"binary":return e;case"string":return e;case"file":return nv(t.file,e,"binary");case"buffer":return ra?sh(e,"binary"):e.split("").map(function(r){return r.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function z2(e,t){switch(t.type){case"string":case"base64":case"binary":for(var r="",n=0;n<e.length;++n)r+=String.fromCharCode(e[n]);return t.type=="base64"?cb(r):t.type=="string"?ss(r):r;case"file":return nv(t.file,e);case"buffer":return e;default:throw new Error("Unrecognized type "+t.type)}}function AV(e,t){MC(),FNe(e);var r=Ts(t||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),r.type=="array"){r.type="binary";var n=AV(e,r);return r.type="array",Pk(n)}var a=0;if(r.sheet&&(typeof r.sheet=="number"?a=r.sheet:a=e.SheetNames.indexOf(r.sheet),!e.SheetNames[a]))throw new Error("Sheet not found: "+r.sheet+" : "+typeof r.sheet);switch(r.bookType||"xlsb"){case"xml":case"xlml":return Su(M_e(e,r),r);case"slk":case"sylk":return Su(M$.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"htm":case"html":return Su(yV(e.Sheets[e.SheetNames[a]],r),r);case"txt":return WSe(EV(e.Sheets[e.SheetNames[a]],r),r);case"csv":return Su(gA(e.Sheets[e.SheetNames[a]],r),r,"\uFEFF");case"dif":return Su(L$.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"dbf":return z2(PS.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"prn":return Su(K1.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"rtf":return Su(H$.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"eth":return Su(R$.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"fods":return Su(_V(e,r),r);case"wk1":return z2(vm.sheet_to_wk1(e.Sheets[e.SheetNames[a]],r),r);case"wk3":return z2(vm.book_to_wk3(e,r),r);case"biff2":r.biff||(r.biff=2);case"biff3":r.biff||(r.biff=3);case"biff4":return r.biff||(r.biff=4),z2(vV(e,r),r);case"biff5":r.biff||(r.biff=5);case"biff8":case"xla":case"xls":return r.biff||(r.biff=8),VSe(e,r);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return HSe(e,r);default:throw new Error("Unrecognized bookType |"+r.bookType+"|")}}function KSe(e){if(!e.bookType){var t={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},r=e.file.slice(e.file.lastIndexOf(".")).toLowerCase();r.match(/^\.[a-z]+$/)&&(e.bookType=r.slice(1)),e.bookType=t[e.bookType]||e.bookType}}function Gu(e,t,r){var n={};return n.type="file",n.file=t,KSe(n),AV(e,n)}function GSe(e,t,r,n,a,s,l,o){var c=ji(r),d=o.defval,f=o.raw||!Object.prototype.hasOwnProperty.call(o,"raw"),p=!0,y=a===1?[]:{};if(a!==1)if(Object.defineProperty)try{Object.defineProperty(y,"__rowNum__",{value:r,enumerable:!1})}catch{y.__rowNum__=r}else y.__rowNum__=r;if(!l||e[r])for(var g=t.s.c;g<=t.e.c;++g){var N=l?e[r][g]:e[n[g]+c];if(N===void 0||N.t===void 0){if(d===void 0)continue;s[g]!=null&&(y[s[g]]=d);continue}var w=N.v;switch(N.t){case"z":if(w==null)break;continue;case"e":w=w==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+N.t)}if(s[g]!=null){if(w==null)if(N.t=="e"&&w===null)y[s[g]]=null;else if(d!==void 0)y[s[g]]=d;else if(f&&w===null)y[s[g]]=null;else continue;else y[s[g]]=f&&(N.t!=="n"||N.t==="n"&&o.rawNumbers!==!1)?w:Y0(N,w,o);w!=null&&(p=!1)}}return{row:y,isempty:p}}function ww(e,t){if(e==null||e["!ref"]==null)return[];var r={t:"n",v:0},n=0,a=1,s=[],l=0,o="",c={s:{r:0,c:0},e:{r:0,c:0}},d=t||{},f=d.range!=null?d.range:e["!ref"];switch(d.header===1?n=1:d.header==="A"?n=2:Array.isArray(d.header)?n=3:d.header==null&&(n=0),typeof f){case"string":c=Ta(f);break;case"number":c=Ta(e["!ref"]),c.s.r=f;break;default:c=f}n>0&&(a=0);var p=ji(c.s.r),y=[],g=[],N=0,w=0,k=Array.isArray(e),S=c.s.r,O=0,E={};k&&!e[S]&&(e[S]=[]);var D=d.skipHidden&&e["!cols"]||[],H=d.skipHidden&&e["!rows"]||[];for(O=c.s.c;O<=c.e.c;++O)if(!(D[O]||{}).hidden)switch(y[O]=Ks(O),r=k?e[S][O]:e[y[O]+p],n){case 1:s[O]=O-c.s.c;break;case 2:s[O]=y[O];break;case 3:s[O]=d.header[O-c.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),o=l=Y0(r,null,d),w=E[l]||0,!w)E[l]=1;else{do o=l+"_"+w++;while(E[o]);E[l]=w,E[o]=1}s[O]=o}for(S=c.s.r+a;S<=c.e.r;++S)if(!(H[S]||{}).hidden){var W=GSe(e,c,S,y,n,s,k,d);(W.isempty===!1||(n===1?d.blankrows!==!1:d.blankrows))&&(g[N++]=W.row)}return g.length=N,g}var OD=/"/g;function XSe(e,t,r,n,a,s,l,o){for(var c=!0,d=[],f="",p=ji(r),y=t.s.c;y<=t.e.c;++y)if(n[y]){var g=o.dense?(e[r]||[])[y]:e[n[y]+p];if(g==null)f="";else if(g.v!=null){c=!1,f=""+(o.rawNumbers&&g.t=="n"?g.v:Y0(g,null,o));for(var N=0,w=0;N!==f.length;++N)if((w=f.charCodeAt(N))===a||w===s||w===34||o.forceQuotes){f='"'+f.replace(OD,'""')+'"';break}f=="ID"&&(f='"ID"')}else g.f!=null&&!g.F?(c=!1,f="="+g.f,f.indexOf(",")>=0&&(f='"'+f.replace(OD,'""')+'"')):f="";d.push(f)}return o.blankrows===!1&&c?null:d.join(l)}function gA(e,t){var r=[],n=t??{};if(e==null||e["!ref"]==null)return"";var a=Ta(e["!ref"]),s=n.FS!==void 0?n.FS:",",l=s.charCodeAt(0),o=n.RS!==void 0?n.RS:`
`,c=o.charCodeAt(0),d=new RegExp((s=="|"?"\\|":s)+"+$"),f="",p=[];n.dense=Array.isArray(e);for(var y=n.skipHidden&&e["!cols"]||[],g=n.skipHidden&&e["!rows"]||[],N=a.s.c;N<=a.e.c;++N)(y[N]||{}).hidden||(p[N]=Ks(N));for(var w=0,k=a.s.r;k<=a.e.r;++k)(g[k]||{}).hidden||(f=XSe(e,a,k,p,l,c,s,n),f!=null&&(n.strip&&(f=f.replace(d,"")),(f||n.blankrows!==!1)&&r.push((w++?o:"")+f)));return delete n.dense,r.join("")}function EV(e,t){t||(t={}),t.FS="	",t.RS=`
`;var r=gA(e,t);return r}function YSe(e){var t="",r,n="";if(e==null||e["!ref"]==null)return[];var a=Ta(e["!ref"]),s="",l=[],o,c=[],d=Array.isArray(e);for(o=a.s.c;o<=a.e.c;++o)l[o]=Ks(o);for(var f=a.s.r;f<=a.e.r;++f)for(s=ji(f),o=a.s.c;o<=a.e.c;++o)if(t=l[o]+s,r=d?(e[f]||[])[o]:e[t],n="",r!==void 0){if(r.F!=null){if(t=r.F,!r.f)continue;n=r.f,t.indexOf(":")==-1&&(t=t+":"+t)}if(r.f!=null)n=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)n=""+r.v;else if(r.t=="b")n=r.v?"TRUE":"FALSE";else if(r.w!==void 0)n="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?n="'"+r.v:n=""+r.v}}c[c.length]=t+"="+n}return c}function TV(e,t,r){var n=r||{},a=+!n.skipHeader,s=e||{},l=0,o=0;if(s&&n.origin!=null)if(typeof n.origin=="number")l=n.origin;else{var c=typeof n.origin=="string"?Gs(n.origin):n.origin;l=c.r,o=c.c}var d,f={s:{c:0,r:0},e:{c:o,r:l+t.length-1+a}};if(s["!ref"]){var p=Ta(s["!ref"]);f.e.c=Math.max(f.e.c,p.e.c),f.e.r=Math.max(f.e.r,p.e.r),l==-1&&(l=p.e.r+1,f.e.r=l+t.length-1+a)}else l==-1&&(l=0,f.e.r=t.length-1+a);var y=n.header||[],g=0;t.forEach(function(w,k){ui(w).forEach(function(S){(g=y.indexOf(S))==-1&&(y[g=y.length]=S);var O=w[S],E="z",D="",H=Tn({c:o+g,r:l+k+a});d=wb(s,H),O&&typeof O=="object"&&!(O instanceof Date)?s[H]=O:(typeof O=="number"?E="n":typeof O=="boolean"?E="b":typeof O=="string"?E="s":O instanceof Date?(E="d",n.cellDates||(E="n",O=Gi(O)),D=n.dateNF||En[14]):O===null&&n.nullError&&(E="e",O=0),d?(d.t=E,d.v=O,delete d.w,delete d.R,D&&(d.z=D)):s[H]=d={t:E,v:O},D&&(d.z=D))})}),f.e.c=Math.max(f.e.c,o+y.length-1);var N=ji(l);if(a)for(g=0;g<y.length;++g)s[Ks(g+o)+N]={t:"s",v:y[g]};return s["!ref"]=Kn(f),s}function ZSe(e,t){return TV(null,e,t)}function wb(e,t,r){if(typeof t=="string"){if(Array.isArray(e)){var n=Gs(t);return e[n.r]||(e[n.r]=[]),e[n.r][n.c]||(e[n.r][n.c]={t:"z"})}return e[t]||(e[t]={t:"z"})}return typeof t!="number"?wb(e,Tn(t)):wb(e,Tn({r:t,c:r||0}))}function QSe(e,t){if(typeof t=="number"){if(t>=0&&e.SheetNames.length>t)return t;throw new Error("Cannot find sheet # "+t)}else if(typeof t=="string"){var r=e.SheetNames.indexOf(t);if(r>-1)return r;throw new Error("Cannot find sheet name |"+t+"|")}else throw new Error("Cannot find sheet |"+t+"|")}function bA(){return{SheetNames:[],Sheets:{}}}function vA(e,t,r,n){var a=1;if(!r)for(;a<=65535&&e.SheetNames.indexOf(r="Sheet"+a)!=-1;++a,r=void 0);if(!r||e.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&e.SheetNames.indexOf(r)>=0){var s=r.match(/(^.*?)(\d+)$/);a=s&&+s[2]||0;var l=s&&s[1]||r;for(++a;a<=65535&&e.SheetNames.indexOf(r=l+a)!=-1;++a);}if(fV(r),e.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return e.SheetNames.push(r),e.Sheets[r]=t,r}function JSe(e,t,r){e.Workbook||(e.Workbook={}),e.Workbook.Sheets||(e.Workbook.Sheets=[]);var n=QSe(e,t);switch(e.Workbook.Sheets[n]||(e.Workbook.Sheets[n]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}e.Workbook.Sheets[n].Hidden=r}function e6e(e,t){return e.z=t,e}function OV(e,t,r){return t?(e.l={Target:t},r&&(e.l.Tooltip=r)):delete e.l,e}function t6e(e,t,r){return OV(e,"#"+t,r)}function r6e(e,t,r){e.c||(e.c=[]),e.c.push({t,a:r||"SheetJS"})}function n6e(e,t,r,n){for(var a=typeof t!="string"?t:Ta(t),s=typeof t=="string"?t:Kn(t),l=a.s.r;l<=a.e.r;++l)for(var o=a.s.c;o<=a.e.c;++o){var c=wb(e,l,o);c.t="n",c.F=s,delete c.v,l==a.s.r&&o==a.s.c&&(c.f=r,n&&(c.D=!0))}return e}var yn={encode_col:Ks,encode_row:ji,encode_cell:Tn,encode_range:Kn,decode_col:GC,decode_row:KC,split_cell:mve,decode_cell:Gs,decode_range:ac,format_cell:Y0,sheet_add_aoa:a$,sheet_add_json:TV,sheet_add_dom:wV,aoa_to_sheet:gp,json_to_sheet:ZSe,table_to_sheet:kV,table_to_book:dSe,sheet_to_csv:gA,sheet_to_txt:EV,sheet_to_json:ww,sheet_to_html:yV,sheet_to_formulae:YSe,sheet_to_row_object_array:ww,sheet_get_cell:wb,book_new:bA,book_append_sheet:vA,book_set_sheet_visibility:JSe,cell_set_number_format:e6e,cell_set_hyperlink:OV,cell_set_internal_link:t6e,cell_add_comment:r6e,sheet_set_array_formula:n6e,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const a6e=(e,t,r="inventory-export.xlsx")=>{const n=e.map((l,o)=>{var c;return{STT:o+1,"Tn sn phm":l.name,SKU:l.sku,"Danh mc":l.category||"","Tn kho":l.stock[t]||0,"Gi bn l":l.retailPrice[t]||0,"Gi bn s":((c=l.wholesalePrice)==null?void 0:c[t])||0,"Gi tr tn":(l.stock[t]||0)*(l.retailPrice[t]||0),"M t":l.description||""}}),a=yn.json_to_sheet(n);a["!cols"]=[{wch:5},{wch:30},{wch:15},{wch:20},{wch:10},{wch:15},{wch:15},{wch:15},{wch:40}];const s=yn.book_new();yn.book_append_sheet(s,a,"Tn kho"),Gu(s,r)},s6e=(e="inventory-template.xlsx")=>{const t=[{"Tn sn phm":"VD: Nht Motul 7100 10W40",SKU:"A3B7K9M2 (hoc  trng - h thng t to)","Danh mc":"Nht ng c","S lng nhp":50,"Gi bn l":18e4,"Gi bn s":15e4,"M t":"Nht cao cp cho xe cn tay"}],r=yn.json_to_sheet(t);r["!cols"]=[{wch:30},{wch:15},{wch:20},{wch:15},{wch:15},{wch:15},{wch:40}];const n=yn.book_new();yn.book_append_sheet(n,r,"Template"),Gu(n,e)},i6e=(e,t)=>new Promise((r,n)=>{const a=new FileReader;a.onload=s=>{var l;try{const o=(l=s.target)==null?void 0:l.result,c=/\.csv$/i.test(e.name),d=LS(o,{type:c?"string":"binary"}),f=d.SheetNames[0],p=d.Sheets[f],y=yn.sheet_to_json(p,{defval:"",blankrows:!1}),g=E=>E.normalize("NFD").replace(new RegExp("\\p{Diacritic}","gu"),"").replace(//gi,D=>D===""?"d":"D"),N=E=>g(String(E).toLowerCase().trim()).replace(/[^a-z0-9]+/g,""),w=E=>{if(E==null||E==="")return 0;if(typeof E=="number")return E;let D=String(E).trim();D=D.replace(/\s+/g,""),D.includes(".")&&D.includes(",")?D=D.replace(/\./g,"").replace(/,/g,"."):D.includes(",")&&!D.includes(".")?D=D.replace(/,/g,"."):D=D.replace(/,/g,"");const H=parseFloat(D);return isNaN(H)?0:H},k={name:["tensanpham","ten","productname","name","tenhang","tenmh"],sku:["sku","mahang","mah","code","ma","masp","mavt"],category:["danhmuc","nhom","loai","category"],quantity:["soluongnhap","soluong","ton","tonkho","sl","qty"],costPrice:["dongianhap","gianhap","costprice","giavon"],retailPrice:["giabanle","giale","giaban","gia","retailprice","giabanra","dongiabanle"],wholesalePrice:["giabansi","giasi","wholesaleprice","giabuon","dongiabansi"],description:["mota","ghichu","note","description"]},S=[],O=y.map((E,D)=>{const H=E||{},W={};Object.keys(H).forEach(de=>{W[N(de)]=H[de]});const R=(de,he)=>{for(const Se of k[de]){const ke=W[Se];if(ke!=null&&ke!=="")return ke}return he},z=String(R("name","")).trim();let U=String(R("sku","")).trim().toUpperCase();(!U||!Oee(U))&&(U=yF(),console.log(` Generated SKU for "${z}": ${U}`));const Z=R("category"),q=w(R("quantity",0)),K=w(R("costPrice",0)),Q=w(R("retailPrice",0)),re=w(R("wholesalePrice",0)),ae=R("description");if(!z&&Object.values(H).some(de=>de!=="")){const de=Object.values(H).map(he=>String(he).trim()).filter(he=>he!=="");if(de.length>0&&de[0].length>0)return S.push(`Hng ${D+2}: Thiu tn sn phm, to SKU: ${U}`),null}return z?{name:z,sku:U,category:Z,quantity:q,costPrice:K,retailPrice:Q,wholesalePrice:re,description:ae}:null}).filter(Boolean);r({items:O,errors:S})}catch(o){const c=o instanceof Error?o.message:"Khng c c d liu";n(new Error(c))}},a.onerror=()=>{n(new Error("Li c file"))},/\.csv$/i.test(e.name)?a.readAsText(e,"utf-8"):a.readAsBinaryString(e)}),PV=()=>{const[e,t]=T.useState({isOpen:!1,title:"",message:"",confirmText:"Xc nhn",cancelText:"Hy",confirmColor:"blue",resolve:null}),r=T.useCallback(s=>new Promise(l=>{t({isOpen:!0,...s,resolve:l})}),[]),n=T.useCallback(()=>{var s;(s=e.resolve)==null||s.call(e,!0),t(l=>({...l,isOpen:!1,resolve:null}))},[e.resolve]),a=T.useCallback(()=>{var s;(s=e.resolve)==null||s.call(e,!1),t(l=>({...l,isOpen:!1,resolve:null}))},[e.resolve]);return{confirm:r,confirmState:e,handleConfirm:n,handleCancel:a}},IV=({isOpen:e,title:t,message:r,confirmText:n="Xc nhn",cancelText:a="Hy",confirmColor:s="blue",onConfirm:l,onCancel:o})=>{if(!e)return null;const c={red:"bg-red-600 hover:bg-red-700",blue:"bg-blue-600 hover:bg-blue-700",green:"bg-emerald-600 hover:bg-emerald-700"};return i.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-[100] p-4 animate-fadeIn",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-2xl max-w-md w-full animate-scaleIn",children:[i.jsx("div",{className:"p-6 border-b border-slate-200 dark:border-slate-700",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${s==="red"?"bg-red-100 dark:bg-red-900/30":s==="green"?"bg-emerald-100 dark:bg-emerald-900/30":"bg-blue-100 dark:bg-blue-900/30"}`,children:s==="red"?i.jsx("svg",{className:"w-6 h-6 text-red-600 dark:text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}):s==="green"?i.jsx("svg",{className:"w-6 h-6 text-emerald-600 dark:text-emerald-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}):i.jsx("svg",{className:"w-6 h-6 text-blue-600 dark:text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),i.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100",children:t})]})}),i.jsx("div",{className:"p-6",children:i.jsx("p",{className:"text-slate-700 dark:text-slate-300 leading-relaxed",children:r})}),i.jsxs("div",{className:"flex justify-end gap-3 p-6 bg-slate-50 dark:bg-slate-900/50 rounded-b-lg",children:[i.jsx("button",{onClick:o,className:"px-4 py-2.5 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors font-medium",children:a}),i.jsx("button",{onClick:l,className:`px-4 py-2.5 text-white rounded-lg transition-colors font-medium ${c[s]}`,children:n})]})]})})},z0="categories";async function l6e(){try{const{data:e,error:t}=await Pt.from(z0).select("*").order("name");return t?At({code:"supabase",message:"Khng th ti danh mc",cause:t}):kn(e||[])}catch(e){return At({code:"network",message:"Li kt ni ti my ch",cause:e})}}async function o6e(e){var t;try{if(!e.name)return At({code:"validation",message:"Thiu tn danh mc"});const r={id:typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():`${Math.random().toString(36).slice(2)}-${Date.now()}`,name:e.name,icon:e.icon,color:e.color,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{data:n,error:a}=await Pt.from(z0).insert([r]).select().single();if(a||!n)return At({code:"supabase",message:"To danh mc tht bi",cause:a});let s=null;try{const{data:l}=await Pt.auth.getUser();s=((t=l==null?void 0:l.user)==null?void 0:t.id)||null}catch{}return await Us(s,{action:"category.create",tableName:z0,recordId:n.id,oldData:null,newData:n}),kn(n)}catch(r){return At({code:"network",message:"Li kt ni khi to danh mc",cause:r})}}async function c6e(e,t){var r;try{let n=null;try{const c=await Pt.from(z0).select("*").eq("id",e).single();n=(c==null?void 0:c.data)??null}catch{}const{data:a,error:s}=await Pt.from(z0).update({...t,updated_at:new Date().toISOString()}).eq("id",e).select().single();let l=a;if((!a||s)&&!s&&(l={id:e,...n||{},...t}),s&&a==null)return At({code:"supabase",message:"Cp nht danh mc tht bi",cause:s});let o=null;try{const{data:c}=await Pt.auth.getUser();o=((r=c==null?void 0:c.user)==null?void 0:r.id)||null}catch{}return await Us(o,{action:"category.update",tableName:z0,recordId:e,oldData:n,newData:a}),kn(l)}catch(n){return At({code:"network",message:"Li kt ni khi cp nht danh mc",cause:n})}}async function d6e(e){var t;try{let r=null;try{const s=await Pt.from(z0).select("*").eq("id",e).single();r=(s==null?void 0:s.data)??null}catch{}const{error:n}=await Pt.from(z0).delete().eq("id",e);if(n)return At({code:"supabase",message:"Xa danh mc tht bi",cause:n});let a=null;try{const{data:s}=await Pt.auth.getUser();a=((t=s==null?void 0:s.user)==null?void 0:t.id)||null}catch{}return await Us(a,{action:"category.delete",tableName:z0,recordId:e,oldData:r,newData:null}),kn({id:e})}catch(r){return At({code:"network",message:"Li kt ni khi xa danh mc",cause:r})}}const zk=()=>Os({queryKey:["categories"],queryFn:async()=>{const e=await l6e();if(!e.ok)throw e.error;return e.data}}),yA=()=>{const e=qn();return ha({mutationFn:async t=>{const r=await o6e(t);if(!r.ok)throw r.error;return r.data},onSuccess:()=>{e.invalidateQueries({queryKey:["categories"]}),Ye.success(" to danh mc")},onError:t=>Ye.error((t==null?void 0:t.message)||"Li to danh mc")})},u6e=()=>{const e=qn();return ha({mutationFn:async({id:t,updates:r})=>{const n=await c6e(t,r);if(!n.ok)throw n.error;return n.data},onSuccess:()=>{e.invalidateQueries({queryKey:["categories"]}),Ye.success(" cp nht danh mc")},onError:t=>Ye.error((t==null?void 0:t.message)||"Li cp nht danh mc")})},h6e=()=>{const e=qn();return ha({mutationFn:async({id:t})=>{const r=await d6e(t);if(!r.ok)throw r.error;return r.data},onSuccess:()=>{e.invalidateQueries({queryKey:["categories"]}),Ye.success(" xa danh mc")},onError:t=>Ye.error((t==null?void 0:t.message)||"Li xa danh mc")})},DV=()=>{const{data:e=[]}=Yee(),{data:t=[],isLoading:r,isError:n,refetch:a}=zk(),s=yA(),l=u6e(),o=h6e(),[c,d]=T.useState(!1),[f,p]=T.useState(null),[y,g]=T.useState(""),[N,w]=T.useState("#3b82f6"),[k,S]=T.useState("package"),{confirm:O,confirmState:E,handleConfirm:D,handleCancel:H}=PV(),W=T.useMemo(()=>t.map(Q=>({id:Q.id,name:Q.name,icon:Q.icon||"package",color:Q.color||"#3b82f6",count:e.filter(re=>re.category===Q.name).length})),[t,e]),R=async()=>{if(!y.trim()){Ye.warning("Vui lng nhp tn danh mc");return}if(W.some(re=>re.name.toLowerCase()===y.toLowerCase())){Ye.warning("Danh mc ny  tn ti");return}try{await s.mutateAsync({name:y,icon:k,color:N}),g(""),d(!1)}catch(re){Ye.error(va(re))}},z=async(Q,re)=>{if(!re.trim()){Ye.warning("Vui lng nhp tn danh mc mi");return}const ae=t.find(de=>de.name===Q);if(!ae){Ye.error("Khng tm thy danh mc  i tn");return}try{await l.mutateAsync({id:ae.id,updates:{name:re}}),p(null)}catch(de){Ye.error(va(de))}},U=async Q=>{const re=e.filter(he=>he.category===Q).length;if(!await O({title:"Xc nhn xa danh mc",message:`Bn c chc chn mun xa danh mc "${Q}"? ${re} sn phm trong danh mc ny s khng cn danh mc.`,confirmText:"Xa",cancelText:"Hy",confirmColor:"red"}))return;const de=t.find(he=>he.name===Q);if(!de){Ye.error("Khng tm thy danh mc");return}try{await o.mutateAsync({id:de.id})}catch(he){Ye.error(va(he))}},Z=[{value:"#3b82f6",label:"Xanh dng"},{value:"#10b981",label:"Xanh l"},{value:"#f59e0b",label:"Vng"},{value:"#ef4444",label:""},{value:"#8b5cf6",label:"Tm"},{value:"#ec4899",label:"Hng"},{value:"#06b6d4",label:"Cyan"},{value:"#f97316",label:"Cam"}],q={package:i.jsx(gl,{className:"w-5 h-5"}),wrench:i.jsx(Cm,{className:"w-5 h-5"}),settings:i.jsx(Gg,{className:"w-5 h-5"}),hammer:i.jsx(hee,{className:"w-5 h-5"}),cog:i.jsx(oee,{className:"w-5 h-5"}),bolt:i.jsx(QJ,{className:"w-5 h-5"}),bike:i.jsx(j6,{className:"w-5 h-5"}),car:i.jsx(ree,{className:"w-5 h-5"}),disc:i.jsx(cee,{className:"w-5 h-5"}),battery:i.jsx(YJ,{className:"w-5 h-5"}),lightbulb:i.jsx(xee,{className:"w-5 h-5"}),palette:i.jsx(xF,{className:"w-5 h-5"})},K=Object.keys(q);return i.jsxs("div",{className:"h-full flex flex-col bg-slate-50 dark:bg-[#0f172a]",children:[i.jsx("div",{className:"bg-white dark:bg-[#1e293b] shadow-sm border-b border-slate-200 dark:border-slate-700 px-6 py-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-slate-100",children:"Danh mc sn phm"}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Qun l cc danh mc phn loi sn phm"})]}),i.jsxs("button",{onClick:()=>d(!0),className:"flex items-center gap-2 px-4 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors font-medium",children:[i.jsx(Cc,{className:"w-5 h-5"}),"Thm danh mc"]})]})}),r&&i.jsx("div",{className:"p-6 text-sm text-slate-500 dark:text-slate-400",children:"ang ti danh mc..."}),n&&i.jsxs("div",{className:"p-6 text-sm text-red-500",children:["Li ti d liu."," ",i.jsx("button",{onClick:()=>a(),className:"underline",children:"Th li"})]}),i.jsx("div",{className:"px-6 py-4 bg-white dark:bg-[#1e293b] border-b border-slate-200 dark:border-slate-700",children:i.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[i.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 p-4 rounded-lg border border-blue-200 dark:border-blue-700",children:[i.jsx("div",{className:"text-sm font-medium text-blue-600 dark:text-blue-400",children:"Tng danh mc"}),i.jsx("div",{className:"text-2xl font-bold text-blue-900 dark:text-blue-100 mt-1",children:W.length})]}),i.jsxs("div",{className:"bg-gradient-to-br from-emerald-50 to-emerald-100 dark:from-emerald-900/20 dark:to-emerald-800/20 p-4 rounded-lg border border-emerald-200 dark:border-emerald-700",children:[i.jsx("div",{className:"text-sm font-medium text-emerald-600 dark:text-emerald-400",children:"Tng sn phm"}),i.jsx("div",{className:"text-2xl font-bold text-emerald-900 dark:text-emerald-100 mt-1",children:e.length})]}),i.jsxs("div",{className:"bg-gradient-to-br from-amber-50 to-amber-100 dark:from-amber-900/20 dark:to-amber-800/20 p-4 rounded-lg border border-amber-200 dark:border-amber-700",children:[i.jsx("div",{className:"text-sm font-medium text-amber-600 dark:text-amber-400",children:"Cha phn loi"}),i.jsx("div",{className:"text-2xl font-bold text-amber-900 dark:text-amber-100 mt-1",children:e.filter(Q=>!Q.category).length})]})]})}),i.jsx("div",{className:"flex-1 overflow-auto p-6",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:[W.map(Q=>i.jsxs("div",{className:"bg-white dark:bg-[#1e293b] rounded-lg shadow-sm border border-slate-200 dark:border-slate-700 p-5 hover:shadow-md transition-shadow",children:[i.jsx("div",{className:"flex items-start justify-between mb-3",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"text-3xl",children:Q.icon}),i.jsxs("div",{children:[f===Q.name?i.jsx("input",{type:"text",defaultValue:Q.name,onKeyDown:re=>{re.key==="Enter"?z(Q.name,re.currentTarget.value):re.key==="Escape"&&p(null)},onBlur:re=>z(Q.name,re.target.value),autoFocus:!0,className:"px-2 py-1 border border-blue-500 rounded text-sm font-semibold text-slate-900 dark:text-slate-100 dark:bg-[#0f172a]"}):i.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:Q.name}),i.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400 mt-0.5",children:[Q.count," sn phm"]})]})]})}),i.jsxs("div",{className:"flex gap-2 mt-4",children:[i.jsx("button",{onClick:()=>p(Q.name),className:"flex-1 px-3 py-1.5 text-sm border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:"i tn"}),i.jsx("button",{onClick:()=>U(Q.name),className:"flex-1 px-3 py-1.5 text-sm border border-red-300 dark:border-red-700 text-red-600 dark:text-red-400 rounded hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",children:"Xa"})]})]},Q.name)),W.length===0&&i.jsxs("div",{className:"col-span-full flex flex-col items-center justify-center py-16 text-center",children:[i.jsx("div",{className:"mb-4 text-slate-400 dark:text-slate-500",children:i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"w-16 h-16",children:[i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 7.5l9-4.5 9 4.5v9l-9 4.5-9-4.5v-9z"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 7.5l9 4.5 9-4.5"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 12v9"})]})}),i.jsx("h3",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100 mb-2",children:"Cha c danh mc no"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400 mb-4",children:"Thm danh mc u tin  phn loi sn phm"}),i.jsx("button",{onClick:()=>d(!0),className:"px-6 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors font-medium",children:"Thm danh mc"})]})]})}),c&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl max-w-md w-full",children:[i.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200 dark:border-slate-700",children:[i.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100",children:"Thm danh mc mi"}),i.jsx("button",{onClick:()=>d(!1),className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-200",children:i.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),i.jsxs("div",{className:"p-6 space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Tn danh mc"}),i.jsx("input",{type:"text",value:y,onChange:Q=>g(Q.target.value),placeholder:"VD: Ph tng xe my",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg dark:bg-slate-700 dark:text-slate-100",autoFocus:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Biu tng"}),i.jsx("div",{className:"grid grid-cols-6 gap-2",children:K.map(Q=>i.jsx("button",{onClick:()=>S(Q),className:`p-3 border rounded-lg transition-colors flex items-center justify-center ${k===Q?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-slate-300 dark:border-slate-600 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:q[Q]},Q))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Mu sc"}),i.jsx("div",{className:"grid grid-cols-4 gap-2",children:Z.map(Q=>i.jsx("button",{onClick:()=>w(Q.value),className:`p-3 rounded-lg border-2 transition-all ${N===Q.value?"border-slate-900 dark:border-slate-100 scale-110":"border-transparent"}`,style:{backgroundColor:Q.value},title:Q.label,children:i.jsx("div",{className:"w-full h-6"})},Q.value))})]})]}),i.jsxs("div",{className:"flex justify-end gap-3 p-6 border-t border-slate-200 dark:border-slate-700",children:[i.jsx("button",{onClick:()=>d(!1),className:"px-4 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:"Hy"}),i.jsx("button",{onClick:R,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:"Thm danh mc"})]})]})}),i.jsx(IV,{isOpen:E.isOpen,title:E.title,message:E.message,confirmText:E.confirmText,cancelText:E.cancelText,confirmColor:E.confirmColor,onConfirm:D,onCancel:H})]})},MV=()=>{var U;const{sales:e,workOrders:t,currentBranchId:r}=Ua(),[n,a]=T.useState(1),[s]=T.useState(20),{data:l,isLoading:o}=A6({page:n,pageSize:s}),c=(l==null?void 0:l.data)||[],d=((U=l==null?void 0:l.meta)==null?void 0:U.total)||0,f=Math.max(1,Math.ceil(d/s)),[p,y]=T.useState(""),[g,N]=T.useState("all"),[w,k]=T.useState(null),[S,O]=T.useState("all"),[E,D]=T.useState(null),H=T.useMemo(()=>{const Z=new Set;return c.forEach(q=>{q.category&&Z.add(q.category)}),Array.from(Z).sort()},[c]),W=T.useMemo(()=>c.filter(Z=>{var K,Q;if(p){const re=p.toLowerCase(),ae=Z.name.toLowerCase().includes(re),de=(K=Z.sku)==null?void 0:K.toLowerCase().includes(re),he=(Q=Z.description)==null?void 0:Q.toLowerCase().includes(re);if(!ae&&!de&&!he)return!1}if(g!=="all"&&Z.category!==g)return!1;if(w){const re=Z.retailPrice[r]||0;if(re<w.min||re>w.max)return!1}const q=Z.stock[r]||0;return!(S==="in-stock"&&q<=0||S==="low-stock"&&q>10||S==="out-of-stock"&&q>0)}),[c,p,g,w,S,r]),z=E?(Z=>{const q=c.find(de=>de.id===Z);if(!q)return null;const K=e.filter(de=>de.items.some(he=>he.partId===Z)),Q=t.filter(de=>{var he;return(he=de.partsUsed)==null?void 0:he.some(Se=>Se.partId===Z)}),re=K.reduce((de,he)=>{const Se=he.items.find(ke=>ke.partId===Z);return de+((Se==null?void 0:Se.quantity)||0)},0),ae=K.reduce((de,he)=>{const Se=he.items.find(ke=>ke.partId===Z);return de+((Se==null?void 0:Se.sellingPrice)||0)*((Se==null?void 0:Se.quantity)||0)},0);return{part:q,salesCount:K.length,totalSold:re,revenue:ae,lastSold:K.length>0?K.sort((de,he)=>new Date(he.date).getTime()-new Date(de.date).getTime())[0].date:null,workOrdersCount:Q.length}})(E):null;return i.jsxs("div",{className:"h-full flex bg-slate-50 dark:bg-[#0f172a]",children:[i.jsxs("div",{className:"w-96 bg-white dark:bg-[#1e293b] border-r border-slate-200 dark:border-slate-700 flex flex-col",children:[i.jsxs("div",{className:"p-6 border-b border-slate-200 dark:border-slate-700",children:[i.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-slate-100 mb-2",children:"Tra cu sn phm"}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Tm kim v xem chi tit sn phm"})]}),i.jsx("div",{className:"p-4 border-b border-slate-200 dark:border-slate-700",children:i.jsx("input",{type:"text",value:p,onChange:Z=>y(Z.target.value),placeholder:"Tm theo tn, SKU, m t...",className:"w-full px-4 py-2.5 border border-slate-300 dark:border-slate-600 rounded-lg dark:bg-slate-700 dark:text-slate-100 placeholder-slate-400"})}),i.jsxs("div",{className:"flex-1 overflow-auto p-4 space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Danh mc"}),i.jsxs("select",{value:g,onChange:Z=>N(Z.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg dark:bg-slate-700 dark:text-slate-100",children:[i.jsx("option",{value:"all",children:"Tt c danh mc"}),H.map(Z=>i.jsx("option",{value:Z,children:Z},Z))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Tn kho"}),i.jsx("div",{className:"space-y-2",children:[{value:"all",label:"Tt c"},{value:"in-stock",label:"Cn hng"},{value:"low-stock",label:"Sp ht (10)"},{value:"out-of-stock",label:"Ht hng"}].map(Z=>i.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[i.jsx("input",{type:"radio",name:"stock",value:Z.value,checked:S===Z.value,onChange:q=>O(q.target.value),className:"w-4 h-4 text-blue-600"}),i.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:Z.label})]},Z.value))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Khong gi"}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{type:"number",placeholder:"T",onChange:Z=>k(q=>({min:Number(Z.target.value)||0,max:(q==null?void 0:q.max)||999999999})),className:"flex-1 px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg dark:bg-slate-700 dark:text-slate-100 text-sm"}),i.jsx("input",{type:"number",placeholder:"n",onChange:Z=>k(q=>({min:(q==null?void 0:q.min)||0,max:Number(Z.target.value)||999999999})),className:"flex-1 px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg dark:bg-slate-700 dark:text-slate-100 text-sm"})]}),w&&i.jsx("button",{onClick:()=>k(null),className:"text-xs text-blue-600 dark:text-blue-400 hover:underline",children:"Xa b lc gi"})]})]}),i.jsx("div",{className:"pt-4 border-t border-slate-200 dark:border-slate-700",children:i.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:["Tm thy"," ",i.jsx("span",{className:"font-semibold text-slate-900 dark:text-slate-100",children:W.length})," ","sn phm"]})})]})]}),i.jsxs("div",{className:"flex-1 flex flex-col",children:[i.jsxs("div",{className:"flex-1 overflow-auto p-6",children:[i.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-4",children:W.map(Z=>{const q=Z.stock[r]||0,K=Z.retailPrice[r]||0;return i.jsx("div",{onClick:()=>D(Z.id),className:`bg-white dark:bg-[#1e293b] rounded-lg shadow-sm border-2 transition-all cursor-pointer ${E===Z.id?"border-blue-500 shadow-md":"border-slate-200 dark:border-slate-700 hover:shadow-md"}`,children:i.jsxs("div",{className:"p-4",children:[i.jsxs("div",{className:"flex items-start justify-between mb-2",children:[i.jsx("h3",{className:"font-semibold text-slate-900 dark:text-slate-100",children:Z.name}),q<=0?i.jsx("span",{className:"px-2 py-0.5 bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400 text-xs rounded",children:"Ht hng"}):q<=10?i.jsx("span",{className:"px-2 py-0.5 bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-400 text-xs rounded",children:"Sp ht"}):i.jsx("span",{className:"px-2 py-0.5 bg-emerald-100 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-400 text-xs rounded",children:"Cn hng"})]}),i.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-400 mb-3",children:["SKU: ",Z.sku]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Tn kho"}),i.jsx("div",{className:"text-lg font-bold text-slate-900 dark:text-slate-100",children:q})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Gi bn"}),i.jsx("div",{className:"text-lg font-bold text-blue-600 dark:text-blue-400",children:Ie(K)})]})]}),Z.category&&i.jsx("div",{className:"mt-3 pt-3 border-t border-slate-200 dark:border-slate-700",children:i.jsxs("span",{className:"text-xs text-slate-600 dark:text-slate-400 flex items-center gap-1",children:[i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"w-3.5 h-3.5",children:[i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 7.5l9-4.5 9 4.5v9l-9 4.5-9-4.5v-9z"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 7.5l9 4.5 9-4.5"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 12v9"})]}),Z.category]})})]})},Z.id)})}),W.length===0&&i.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[i.jsx("div",{className:"mb-4 text-slate-400 dark:text-slate-500",children:i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"w-16 h-16",children:[i.jsx("circle",{cx:"11",cy:"11",r:"7"}),i.jsx("path",{d:"m21 21-4.35-4.35"})]})}),i.jsx("h3",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100 mb-2",children:"Khng tm thy sn phm"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Th thay i b lc hoc t kha tm kim"})]})]}),i.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-t border-slate-200 dark:border-slate-700 bg-white dark:bg-[#1e293b]",children:[i.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:["Trang ",n,"/",f,"  Tng ",d," sn phm"]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{disabled:n===1||o,onClick:()=>a(Z=>Math.max(1,Z-1)),className:"px-3 py-1.5 border border-slate-300 dark:border-slate-600 rounded disabled:opacity-40 hover:bg-slate-50 dark:hover:bg-slate-700",children:" Trc"}),i.jsx("button",{disabled:n>=f||o,onClick:()=>a(Z=>Math.min(f,Z+1)),className:"px-3 py-1.5 border border-slate-300 dark:border-slate-600 rounded disabled:opacity-40 hover:bg-slate-50 dark:hover:bg-slate-700",children:"Sau "})]})]})]}),z&&i.jsxs("div",{className:"w-96 bg-white dark:bg-[#1e293b] border-l border-slate-200 dark:border-slate-700 flex flex-col",children:[i.jsxs("div",{className:"p-6 border-b border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"flex items-start justify-between mb-4",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:"Chi tit sn phm"}),i.jsx("button",{onClick:()=>D(null),className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-200",children:i.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:z.part.name}),i.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:["SKU: ",z.part.sku]})]}),z.part.description&&i.jsxs("div",{children:[i.jsx("div",{className:"text-xs font-medium text-slate-500 dark:text-slate-400 mb-1",children:"M t"}),i.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300",children:z.part.description})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-xs font-medium text-slate-500 dark:text-slate-400 mb-1",children:"Tn kho"}),i.jsx("div",{className:"text-2xl font-bold text-slate-900 dark:text-slate-100",children:z.part.stock[r]||0})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs font-medium text-slate-500 dark:text-slate-400 mb-1",children:"Gi bn l"}),i.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:Ie(z.part.retailPrice[r]||0)})]})]})]})]}),i.jsxs("div",{className:"flex-1 overflow-auto p-6",children:[i.jsx("h3",{className:"font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Thng k bn hng"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 p-4 rounded-lg",children:[i.jsx("div",{className:"text-sm text-blue-600 dark:text-blue-400 mb-1",children:"Tng  bn"}),i.jsx("div",{className:"text-3xl font-bold text-blue-900 dark:text-blue-100",children:z.totalSold})]}),i.jsxs("div",{className:"bg-gradient-to-br from-emerald-50 to-emerald-100 dark:from-emerald-900/20 dark:to-emerald-800/20 p-4 rounded-lg",children:[i.jsx("div",{className:"text-sm text-emerald-600 dark:text-emerald-400 mb-1",children:"Doanh thu"}),i.jsx("div",{className:"text-2xl font-bold text-emerald-900 dark:text-emerald-100",children:Ie(z.revenue)})]}),i.jsxs("div",{className:"bg-gradient-to-br from-amber-50 to-amber-100 dark:from-amber-900/20 dark:to-amber-800/20 p-4 rounded-lg",children:[i.jsx("div",{className:"text-sm text-amber-600 dark:text-amber-400 mb-1",children:"S n hng"}),i.jsx("div",{className:"text-3xl font-bold text-amber-900 dark:text-amber-100",children:z.salesCount})]}),z.lastSold&&i.jsxs("div",{children:[i.jsx("div",{className:"text-xs font-medium text-slate-500 dark:text-slate-400 mb-1",children:"Bn gn nht"}),i.jsx("div",{className:"text-sm text-slate-700 dark:text-slate-300",children:Bn(z.lastSold)})]}),z.workOrdersCount>0&&i.jsxs("div",{children:[i.jsx("div",{className:"text-xs font-medium text-slate-500 dark:text-slate-400 mb-1",children:"Lnh sa cha"}),i.jsx("div",{className:"text-2xl font-bold text-slate-900 dark:text-slate-100",children:z.workOrdersCount})]})]})]})]})]})},f6e=()=>{const{sales:e,workOrders:t,currentBranchId:r}=Ua(),{data:n,isLoading:a}=A6({page:1,pageSize:20}),s=(n==null?void 0:n.data)||[],[l,o]=T.useState(""),[c,d]=T.useState("all"),[f,p]=T.useState(null),[y,g]=T.useState("all"),[N,w]=T.useState(null),[k,S]=T.useState(!1),[O,E]=T.useState(!1),D=T.useMemo(()=>{const z=new Set;return s.forEach(U=>{U.category&&z.add(U.category)}),Array.from(z).sort()},[s]),H=T.useMemo(()=>s.filter(z=>{var Z,q;if(l){const K=l.toLowerCase(),Q=z.name.toLowerCase().includes(K),re=(Z=z.sku)==null?void 0:Z.toLowerCase().includes(K),ae=(q=z.description)==null?void 0:q.toLowerCase().includes(K);if(!Q&&!re&&!ae)return!1}if(c!=="all"&&z.category!==c)return!1;if(f){const K=z.retailPrice[r]||0;if(K<f.min||K>f.max)return!1}const U=z.stock[r]||0;return!(y==="in-stock"&&U<=0||y==="low-stock"&&U>10||y==="out-of-stock"&&U>0)}),[s,l,c,f,y,r]),R=N?(z=>{const U=s.find(re=>re.id===z);if(!U)return null;const Z=e.filter(re=>re.items.some(ae=>ae.partId===z)),q=t.filter(re=>{var ae;return(ae=re.partsUsed)==null?void 0:ae.some(de=>de.partId===z)}),K=Z.reduce((re,ae)=>{const de=ae.items.find(he=>he.partId===z);return re+((de==null?void 0:de.quantity)||0)},0),Q=Z.reduce((re,ae)=>{const de=ae.items.find(he=>he.partId===z);return re+((de==null?void 0:de.sellingPrice)||0)*((de==null?void 0:de.quantity)||0)},0);return{part:U,salesCount:Z.length,totalSold:K,revenue:Q,lastSold:Z.length>0?Z.sort((re,ae)=>new Date(ae.date).getTime()-new Date(re.date).getTime())[0].date:null,workOrdersCount:q.length}})(N):null;return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex flex-col h-full bg-slate-50 dark:bg-[#0f172a]",children:[i.jsxs("div",{className:"sticky top-0 z-10 bg-white dark:bg-[#1e293b] border-b border-slate-200 dark:border-slate-700 p-3 space-y-2",children:[i.jsx("input",{type:"text",value:l,onChange:z=>o(z.target.value),placeholder:"Tm sn phm...",className:"w-full px-4 py-2.5 border border-slate-300 dark:border-slate-600 rounded-lg dark:bg-slate-700 dark:text-slate-100 placeholder-slate-400 text-sm"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("button",{onClick:()=>S(!0),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg text-sm font-medium",children:[i.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})}),"B lc"]}),i.jsxs("div",{className:"px-4 py-2 bg-slate-100 dark:bg-slate-700 rounded-lg text-sm font-medium text-slate-700 dark:text-slate-300",children:[H.length," sp"]})]})]}),i.jsx("div",{className:"flex-1 overflow-auto",children:H.length===0?i.jsxs("div",{className:"flex flex-col items-center justify-center h-full p-8 text-center",children:[i.jsxs("svg",{className:"w-16 h-16 text-slate-300 dark:text-slate-600 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[i.jsx("circle",{cx:"11",cy:"11",r:"7"}),i.jsx("path",{d:"m21 21-4.35-4.35"})]}),i.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-2",children:"Khng tm thy sn phm"}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Th thay i b lc hoc t kha tm kim"})]}):i.jsx("div",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:H.map(z=>{const U=z.stock[r]||0,Z=z.retailPrice[r]||0;return i.jsxs("button",{onClick:()=>{w(z.id),E(!0)},className:"w-full p-4 flex items-center gap-3 bg-white dark:bg-[#1e293b] hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors text-left",children:[i.jsx("div",{className:"w-12 h-12 rounded-lg bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center flex-shrink-0",children:i.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h3",{className:"font-semibold text-slate-900 dark:text-slate-100 truncate",children:z.name}),i.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:["SKU: ",z.sku]}),z.category&&i.jsx("p",{className:"text-xs text-slate-400 dark:text-slate-500 mt-0.5",children:z.category})]}),i.jsxs("div",{className:"text-right flex-shrink-0",children:[i.jsx("div",{className:"text-base font-bold text-blue-600 dark:text-blue-400",children:Ie(Z)}),i.jsx("div",{className:"flex items-center gap-1 justify-end mt-1",children:U<=0?i.jsx("span",{className:"px-2 py-0.5 bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400 text-xs rounded",children:"Ht"}):U<=10?i.jsx("span",{className:"px-2 py-0.5 bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-400 text-xs rounded",children:U}):i.jsx("span",{className:"px-2 py-0.5 bg-emerald-100 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-400 text-xs rounded",children:U})})]})]},z.id)})})})]}),k&&i.jsxs("div",{className:"fixed inset-0 z-50 flex items-end",children:[i.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>S(!1)}),i.jsxs("div",{className:"relative bg-white dark:bg-[#1e293b] rounded-t-2xl w-full max-h-[80vh] overflow-hidden flex flex-col",children:[i.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-slate-200 dark:border-slate-700",children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"B lc tm kim"}),i.jsx("button",{onClick:()=>S(!1),className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg",children:i.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),i.jsxs("div",{className:"flex-1 overflow-auto p-4 space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Danh mc"}),i.jsxs("select",{value:c,onChange:z=>d(z.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg dark:bg-slate-700 dark:text-slate-100",children:[i.jsx("option",{value:"all",children:"Tt c danh mc"}),D.map(z=>i.jsx("option",{value:z,children:z},z))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Tn kho"}),i.jsx("div",{className:"space-y-2",children:[{value:"all",label:"Tt c"},{value:"in-stock",label:"Cn hng"},{value:"low-stock",label:"Sp ht (10)"},{value:"out-of-stock",label:"Ht hng"}].map(z=>i.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[i.jsx("input",{type:"radio",name:"stock",value:z.value,checked:y===z.value,onChange:U=>g(U.target.value),className:"w-4 h-4 text-blue-600"}),i.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:z.label})]},z.value))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Khong gi"}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{type:"number",placeholder:"T",onChange:z=>p(U=>({min:Number(z.target.value)||0,max:(U==null?void 0:U.max)||999999999})),className:"flex-1 px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg dark:bg-slate-700 dark:text-slate-100 text-sm"}),i.jsx("input",{type:"number",placeholder:"n",onChange:z=>p(U=>({min:(U==null?void 0:U.min)||0,max:Number(z.target.value)||999999999})),className:"flex-1 px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg dark:bg-slate-700 dark:text-slate-100 text-sm"})]}),f&&i.jsx("button",{onClick:()=>p(null),className:"text-xs text-blue-600 dark:text-blue-400 hover:underline",children:"Xa b lc gi"})]})]})]}),i.jsxs("div",{className:"p-4 border-t border-slate-200 dark:border-slate-700 flex gap-2",children:[i.jsx("button",{onClick:()=>{d("all"),g("all"),p(null)},className:"flex-1 px-4 py-2.5 border border-slate-300 dark:border-slate-600 rounded-lg text-sm font-medium text-slate-700 dark:text-slate-300",children:"t li"}),i.jsx("button",{onClick:()=>S(!1),className:"flex-1 px-4 py-2.5 bg-blue-600 text-white rounded-lg text-sm font-medium",children:"p dng"})]})]})]}),O&&R&&i.jsxs("div",{className:"fixed inset-0 z-50 flex items-end",children:[i.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>E(!1)}),i.jsxs("div",{className:"relative bg-white dark:bg-[#1e293b] rounded-t-2xl w-full max-h-[85vh] overflow-hidden flex flex-col",children:[i.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-slate-200 dark:border-slate-700",children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Chi tit sn phm"}),i.jsx("button",{onClick:()=>E(!1),className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg",children:i.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),i.jsxs("div",{className:"flex-1 overflow-auto p-4 space-y-4",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-100 mb-1",children:R.part.name}),i.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:["SKU: ",R.part.sku]}),R.part.category&&i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:["Danh mc: ",R.part.category]})]}),R.part.description&&i.jsxs("div",{children:[i.jsx("div",{className:"text-xs font-medium text-slate-500 dark:text-slate-400 mb-1",children:"M t"}),i.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300",children:R.part.description})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-800 rounded-lg",children:[i.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"Tn kho"}),i.jsx("div",{className:"text-2xl font-bold text-slate-900 dark:text-slate-100",children:R.part.stock[r]||0})]}),i.jsxs("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[i.jsx("div",{className:"text-xs text-blue-600 dark:text-blue-400 mb-1",children:"Gi bn l"}),i.jsx("div",{className:"text-xl font-bold text-blue-600 dark:text-blue-400",children:Ie(R.part.retailPrice[r]||0)})]})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-slate-900 dark:text-slate-100 mb-3",children:"Thng k bn hng"}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 p-3 rounded-lg",children:[i.jsx("div",{className:"text-sm text-blue-600 dark:text-blue-400 mb-1",children:"Tng  bn"}),i.jsx("div",{className:"text-2xl font-bold text-blue-900 dark:text-blue-100",children:R.totalSold})]}),i.jsxs("div",{className:"bg-gradient-to-br from-emerald-50 to-emerald-100 dark:from-emerald-900/20 dark:to-emerald-800/20 p-3 rounded-lg",children:[i.jsx("div",{className:"text-sm text-emerald-600 dark:text-emerald-400 mb-1",children:"Doanh thu"}),i.jsx("div",{className:"text-xl font-bold text-emerald-900 dark:text-emerald-100",children:Ie(R.revenue)})]}),i.jsxs("div",{className:"bg-gradient-to-br from-amber-50 to-amber-100 dark:from-amber-900/20 dark:to-amber-800/20 p-3 rounded-lg",children:[i.jsx("div",{className:"text-sm text-amber-600 dark:text-amber-400 mb-1",children:"S n hng"}),i.jsx("div",{className:"text-2xl font-bold text-amber-900 dark:text-amber-100",children:R.salesCount})]}),R.lastSold&&i.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-800 rounded-lg",children:[i.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"Bn gn nht"}),i.jsx("div",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:Bn(R.lastSold)})]})]})]})]})]})]})]})},wA=e=>Os({queryKey:["inventoryTxRepo",e],queryFn:async()=>{const t=await Ree(e);if(!t.ok)throw t.error;return t.data}}),m6e=()=>{const e=qn();return ha({mutationFn:async t=>{console.log(" ang gi createInventoryTransaction vi input:",t);const r=await Fee(t);if(console.log(" Kt qu createInventoryTransaction:",r),!r.ok)throw r.error||new Error("Li khng xc nh");return r.data},onSuccess:()=>{console.log(" Lu lch s thnh cng!"),e.invalidateQueries({queryKey:["inventoryTxRepo"]}),Ye.success(" ghi lch s kho")},onError:t=>{console.error(" Li lu lch s:",t),Ye.error(va(t))}})},RS="suppliers";async function x6e(){try{const{data:e,error:t}=await Pt.from(RS).select("*").order("name");return t?At({code:"supabase",message:"Khng th ti nh cung cp",cause:t}):kn(e||[])}catch(e){return At({code:"network",message:"Li kt ni",cause:e})}}async function p6e(e){var t;try{if(!e.name)return At({code:"validation",message:"Thiu tn nh cung cp"});const r={id:typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():`${Math.random().toString(36).slice(2)}-${Date.now()}`,name:e.name,phone:e.phone,address:e.address,created_at:new Date().toISOString()},{data:n,error:a}=await Pt.from(RS).insert([r]).select().single();if(a||!n){const l=(a==null?void 0:a.message)||(a==null?void 0:a.details)||"To nh cung cp tht bi";return At({code:"supabase",message:l,cause:a})}let s=null;try{const{data:l}=await Pt.auth.getUser();s=((t=l==null?void 0:l.user)==null?void 0:t.id)||null}catch{}return await Us(s,{action:"supplier.create",tableName:RS,recordId:n.id,oldData:null,newData:n}),kn(n)}catch(r){return At({code:"network",message:"Li kt ni khi to nh cung cp",cause:r})}}const kA=()=>Os({queryKey:["suppliers"],queryFn:async()=>{const e=await x6e();if(!e.ok)throw e.error;return e.data}}),LV=()=>{const e=qn();return ha({mutationFn:async t=>{const r=await p6e(t);if(!r.ok)throw r.error;return r.data},onSuccess:()=>{e.invalidateQueries({queryKey:["suppliers"]}),Ye.success(" thm nh cung cp")},onError:t=>Ye.error((t==null?void 0:t.message)||"Li thm nh cung cp")})},xN=new Intl.NumberFormat("vi-VN",{minimumFractionDigits:0,maximumFractionDigits:2});function g6e(e){let t=e.replace(/[^0-9.,-]/g,"");const r=t.includes("."),n=t.includes(",");r&&n?t=t.replace(/\./g,"").replace(",","."):n&&!r&&(t=t.replace(",","."));const a=Number(t);return Number.isFinite(a)?a:0}const P0=({value:e,onValue:t,placeholder:r,className:n,min:a,max:s,disabled:l,ariaLabel:o})=>{const[c,d]=ua.useState(e?xN.format(e):""),[f,p]=ua.useState(!1);ua.useEffect(()=>{f||d(e?xN.format(e):"")},[e,f]);const y=N=>{const w=N.target.value;d(w);const k=g6e(w);if(a!==void 0&&k<a){t(a);return}if(s!==void 0&&k>s){t(s);return}t(k)},g=()=>{p(!1),d(e?xN.format(e):"")};return i.jsx("input",{type:"text",inputMode:"decimal",value:c,onChange:y,onFocus:()=>p(!0),onBlur:g,placeholder:r,className:n,disabled:l,"aria-label":o})},PD=5e7,ID=1e4;function FS(e,t){const r=[];let n=Math.max(0,Math.round(e)),a=Math.max(0,Math.round(t));return n>PD&&(r.push("Gi nhp qu ln (>50 triu)  c gii hn."),n=PD),a>ID&&(r.push("S lng qu ln (>10,000)  c gii hn."),a=ID),{ok:!0,warnings:r,clean:{importPrice:n,quantity:a}}}function b6e(e){if(!e||!e.trim())return{ok:!1,error:"S in thoi khng c  trng"};const t=e.trim().replace(/\s+/g,"");return/^(0|\+84)[0-9]{9,10}$/.test(t)?{ok:!0}:{ok:!1,error:"S in thoi khng hp l. Vui lng nhp 10-11 s (VD: 0912345678)"}}const v6e=({isOpen:e,onClose:t,selectedSupplierId:r,onSelectSupplier:n})=>{const[a,s]=T.useState(""),[l,o]=T.useState(!1),{data:c=[]}=kA(),d=LV(),[f,p]=T.useState({name:"",phone:"",address:"",note:""}),y=c.filter(N=>{var k,S;const w=a.toLowerCase();return((k=N.name)==null?void 0:k.toLowerCase().includes(w))||((S=N.phone)==null?void 0:S.toLowerCase().includes(w))}),g=async()=>{if(!f.name.trim()){Ye.error("Vui lng nhp tn nh cung cp");return}try{const N=await d.mutateAsync(f);Ye.success(" thm nh cung cp"),n(N.id),p({name:"",phone:"",address:"",note:""}),o(!1),t()}catch(N){Ye.error((N==null?void 0:N.message)||"Li thm nh cung cp")}};return e?i.jsx("div",{className:"fixed inset-0 bg-black/50 z-[110] flex items-end sm:items-center justify-center",onClick:t,children:i.jsxs("div",{onClick:N=>N.stopPropagation(),className:"bg-white dark:bg-slate-800 w-full sm:max-w-md h-[85vh] sm:h-auto sm:max-h-[80vh] rounded-t-3xl sm:rounded-xl overflow-hidden flex flex-col",children:[i.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 p-4 flex items-center justify-between flex-shrink-0",children:[i.jsx("h3",{className:"text-lg font-bold text-white",children:l?"Thm NCC mi":"Chn nh cung cp"}),i.jsx("button",{onClick:t,className:"text-white text-2xl leading-none",children:""})]}),l?i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["Tn nh cung cp ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"text",value:f.name,onChange:N=>p({...f,name:N.target.value}),placeholder:"Nhp tn NCC",className:"w-full px-4 py-3 border border-slate-300 dark:border-slate-600 rounded-xl bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"S in thoi"}),i.jsx("input",{type:"tel",inputMode:"numeric",value:f.phone,onChange:N=>p({...f,phone:N.target.value}),placeholder:"Nhp ST",className:"w-full px-4 py-3 border border-slate-300 dark:border-slate-600 rounded-xl bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"a ch"}),i.jsx("textarea",{value:f.address,onChange:N=>p({...f,address:N.target.value}),placeholder:"Nhp a ch",rows:3,className:"w-full px-4 py-3 border border-slate-300 dark:border-slate-600 rounded-xl bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 resize-none"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Ghi ch"}),i.jsx("textarea",{value:f.note,onChange:N=>p({...f,note:N.target.value}),placeholder:"Ghi ch thm",rows:2,className:"w-full px-4 py-3 border border-slate-300 dark:border-slate-600 rounded-xl bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 resize-none"})]})]}),i.jsxs("div",{className:"p-3 border-t border-slate-200 dark:border-slate-700 flex gap-2 flex-shrink-0",children:[i.jsx("button",{onClick:()=>{o(!1),p({name:"",phone:"",address:"",note:""})},className:"flex-1 py-3 border-2 border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-xl font-medium active:scale-98 transition-transform",children:"Hy"}),i.jsx("button",{onClick:g,disabled:!f.name.trim()||d.isPending,className:"flex-1 py-3 bg-blue-600 hover:bg-blue-700 disabled:bg-slate-300 dark:disabled:bg-slate-600 text-white rounded-xl font-bold active:scale-98 transition-transform disabled:cursor-not-allowed",children:d.isPending?"ang thm...":"Thm NCC"})]})]}):i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"p-3 border-b border-slate-200 dark:border-slate-700 flex-shrink-0",children:i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:"text",placeholder:"Tm theo tn, ST...",value:a,onChange:N=>s(N.target.value),className:"w-full px-4 py-3 pl-10 border border-slate-300 dark:border-slate-600 rounded-xl bg-slate-50 dark:bg-slate-900 text-slate-900 dark:text-slate-100"}),i.jsx("svg",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})}),i.jsx("div",{className:"flex-1 overflow-y-auto p-3 space-y-2",children:y.length===0?i.jsxs("div",{className:"text-center text-slate-500 py-12",children:[i.jsx("div",{className:"text-5xl mb-3",children:""}),i.jsx("div",{children:"Khng tm thy nh cung cp"})]}):y.map(N=>i.jsxs("div",{onClick:()=>{n(N.id),t()},className:`p-4 rounded-xl border-2 cursor-pointer transition-all ${r===N.id?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 active:scale-98"}`,children:[i.jsx("div",{className:"font-bold text-slate-900 dark:text-slate-100",children:N.name}),N.phone&&i.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:[" ",N.phone]}),N.address&&i.jsxs("div",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:[" ",N.address]})]},N.id))}),i.jsx("div",{className:"p-3 border-t border-slate-200 dark:border-slate-700 flex-shrink-0",children:i.jsxs("button",{onClick:()=>o(!0),className:"w-full py-4 bg-green-600 hover:bg-green-700 active:scale-98 text-white rounded-xl font-bold flex items-center justify-center gap-2 transition-transform",children:[i.jsx("span",{className:"text-xl",children:"+"}),i.jsx("span",{children:"Thm nh cung cp mi"})]})})]})]})}):null};var Vr;(function(e){e[e.QR_CODE=0]="QR_CODE",e[e.AZTEC=1]="AZTEC",e[e.CODABAR=2]="CODABAR",e[e.CODE_39=3]="CODE_39",e[e.CODE_93=4]="CODE_93",e[e.CODE_128=5]="CODE_128",e[e.DATA_MATRIX=6]="DATA_MATRIX",e[e.MAXICODE=7]="MAXICODE",e[e.ITF=8]="ITF",e[e.EAN_13=9]="EAN_13",e[e.EAN_8=10]="EAN_8",e[e.PDF_417=11]="PDF_417",e[e.RSS_14=12]="RSS_14",e[e.RSS_EXPANDED=13]="RSS_EXPANDED",e[e.UPC_A=14]="UPC_A",e[e.UPC_E=15]="UPC_E",e[e.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Vr||(Vr={}));var DD=new Map([[Vr.QR_CODE,"QR_CODE"],[Vr.AZTEC,"AZTEC"],[Vr.CODABAR,"CODABAR"],[Vr.CODE_39,"CODE_39"],[Vr.CODE_93,"CODE_93"],[Vr.CODE_128,"CODE_128"],[Vr.DATA_MATRIX,"DATA_MATRIX"],[Vr.MAXICODE,"MAXICODE"],[Vr.ITF,"ITF"],[Vr.EAN_13,"EAN_13"],[Vr.EAN_8,"EAN_8"],[Vr.PDF_417,"PDF_417"],[Vr.RSS_14,"RSS_14"],[Vr.RSS_EXPANDED,"RSS_EXPANDED"],[Vr.UPC_A,"UPC_A"],[Vr.UPC_E,"UPC_E"],[Vr.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),MD;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.URL=1]="URL"})(MD||(MD={}));function y6e(e){return Object.values(Vr).includes(e)}var kw;(function(e){e[e.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",e[e.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(kw||(kw={}));var w6e=(function(){function e(){}return e.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",e.SCAN_DEFAULT_FPS=2,e.DEFAULT_DISABLE_FLIP=!1,e.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,e.DEFAULT_SUPPORTED_SCAN_TYPE=[kw.SCAN_TYPE_CAMERA,kw.SCAN_TYPE_FILE],e})(),RV=(function(){function e(t,r){this.format=t,this.formatName=r}return e.prototype.toString=function(){return this.formatName},e.create=function(t){if(!DD.has(t))throw"".concat(t," not in html5QrcodeSupportedFormatsTextMap");return new e(t,DD.get(t))},e})(),LD=(function(){function e(){}return e.createFromText=function(t){var r={text:t};return{decodedText:t,result:r}},e.createFromQrcodeResult=function(t){return{decodedText:t.text,result:t}},e})(),BS;(function(e){e[e.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",e[e.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",e[e.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(BS||(BS={}));var k6e=(function(){function e(){}return e.createFrom=function(t){return{errorMessage:t,type:BS.UNKWOWN_ERROR}},e})(),N6e=(function(){function e(t){this.verbose=t}return e.prototype.log=function(t){this.verbose&&console.log(t)},e.prototype.warn=function(t){this.verbose&&console.warn(t)},e.prototype.logError=function(t,r){(this.verbose||r===!0)&&console.error(t)},e.prototype.logErrors=function(t){if(t.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(t)},e})();function g0(e){return typeof e>"u"||e===null}var l1=(function(){function e(){}return e.codeParseError=function(t){return"QR code parse error, error = ".concat(t)},e.errorGettingUserMedia=function(t){return"Error getting userMedia, error = ".concat(t)},e.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},e.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},e.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},e.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},e.scannerPaused=function(){return"Scanner paused"},e})(),FV=(function(){function e(){}return e.isMediaStreamConstraintsValid=function(t,r){if(typeof t!="object"){var n=typeof t;return r.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(n,"."),!0),!1}for(var a=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],s=new Set(a),l=Object.keys(t),o=0,c=l;o<c.length;o++){var d=c[o];if(s.has(d))return r.logError("".concat(d," is not supported videoConstaints."),!0),!1}return!0},e})(),wg={exports:{}},_6e=wg.exports,RD;function S6e(){return RD||(RD=1,(function(e,t){(function(r,n){n(t)})(_6e,(function(r){function n(xe){return xe==null}var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(xe,h){xe.__proto__=h}||function(xe,h){for(var x in h)h.hasOwnProperty(x)&&(xe[x]=h[x])};function s(xe,h){a(xe,h);function x(){this.constructor=xe}xe.prototype=h===null?Object.create(h):(x.prototype=h.prototype,new x)}function l(xe,h){var x=Object.setPrototypeOf;x?x(xe,h):xe.__proto__=h}function o(xe,h){h===void 0&&(h=xe.constructor);var x=Error.captureStackTrace;x&&x(xe,h)}var c=(function(xe){s(h,xe);function h(x){var b=this.constructor,_=xe.call(this,x)||this;return Object.defineProperty(_,"name",{value:b.name,enumerable:!1}),l(_,b.prototype),o(_),_}return h})(Error);class d extends c{constructor(h=void 0){super(h),this.message=h}getKind(){return this.constructor.kind}}d.kind="Exception";class f extends d{}f.kind="ArgumentException";class p extends d{}p.kind="IllegalArgumentException";class y{constructor(h){if(this.binarizer=h,h===null)throw new p("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(h,x){return this.binarizer.getBlackRow(h,x)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(h,x,b,_){const j=this.binarizer.getLuminanceSource().crop(h,x,b,_);return new y(this.binarizer.createBinarizer(j))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const h=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new y(this.binarizer.createBinarizer(h))}rotateCounterClockwise45(){const h=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new y(this.binarizer.createBinarizer(h))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class g extends d{static getChecksumInstance(){return new g}}g.kind="ChecksumException";class N{constructor(h){this.source=h}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class w{static arraycopy(h,x,b,_,j){for(;j--;)b[_++]=h[x++]}static currentTimeMillis(){return Date.now()}}class k extends d{}k.kind="IndexOutOfBoundsException";class S extends k{constructor(h=void 0,x=void 0){super(x),this.index=h,this.message=x}}S.kind="ArrayIndexOutOfBoundsException";class O{static fill(h,x){for(let b=0,_=h.length;b<_;b++)h[b]=x}static fillWithin(h,x,b,_){O.rangeCheck(h.length,x,b);for(let j=x;j<b;j++)h[j]=_}static rangeCheck(h,x,b){if(x>b)throw new p("fromIndex("+x+") > toIndex("+b+")");if(x<0)throw new S(x);if(b>h)throw new S(b)}static asList(...h){return h}static create(h,x,b){return Array.from({length:h}).map(j=>Array.from({length:x}).fill(b))}static createInt32Array(h,x,b){return Array.from({length:h}).map(j=>Int32Array.from({length:x}).fill(b))}static equals(h,x){if(!h||!x||!h.length||!x.length||h.length!==x.length)return!1;for(let b=0,_=h.length;b<_;b++)if(h[b]!==x[b])return!1;return!0}static hashCode(h){if(h===null)return 0;let x=1;for(const b of h)x=31*x+b;return x}static fillUint8Array(h,x){for(let b=0;b!==h.length;b++)h[b]=x}static copyOf(h,x){return h.slice(0,x)}static copyOfUint8Array(h,x){if(h.length<=x){const b=new Uint8Array(x);return b.set(h),b}return h.slice(0,x)}static copyOfRange(h,x,b){const _=b-x,j=new Int32Array(_);return w.arraycopy(h,x,j,0,_),j}static binarySearch(h,x,b){b===void 0&&(b=O.numberComparator);let _=0,j=h.length-1;for(;_<=j;){const A=j+_>>1,I=b(x,h[A]);if(I>0)_=A+1;else if(I<0)j=A-1;else return A}return-_-1}static numberComparator(h,x){return h-x}}class E{static numberOfTrailingZeros(h){let x;if(h===0)return 32;let b=31;return x=h<<16,x!==0&&(b-=16,h=x),x=h<<8,x!==0&&(b-=8,h=x),x=h<<4,x!==0&&(b-=4,h=x),x=h<<2,x!==0&&(b-=2,h=x),b-(h<<1>>>31)}static numberOfLeadingZeros(h){if(h===0)return 32;let x=1;return h>>>16||(x+=16,h<<=16),h>>>24||(x+=8,h<<=8),h>>>28||(x+=4,h<<=4),h>>>30||(x+=2,h<<=2),x-=h>>>31,x}static toHexString(h){return h.toString(16)}static toBinaryString(h){return String(parseInt(String(h),2))}static bitCount(h){return h=h-(h>>>1&1431655765),h=(h&858993459)+(h>>>2&858993459),h=h+(h>>>4)&252645135,h=h+(h>>>8),h=h+(h>>>16),h&63}static truncDivision(h,x){return Math.trunc(h/x)}static parseInt(h,x=void 0){return parseInt(h,x)}}E.MIN_VALUE_32_BITS=-2147483648,E.MAX_VALUE=Number.MAX_SAFE_INTEGER;class D{constructor(h,x){h===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=h,x==null?this.bits=D.makeArray(h):this.bits=x)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(h){if(h>this.bits.length*32){const x=D.makeArray(h);w.arraycopy(this.bits,0,x,0,this.bits.length),this.bits=x}}get(h){return(this.bits[Math.floor(h/32)]&1<<(h&31))!==0}set(h){this.bits[Math.floor(h/32)]|=1<<(h&31)}flip(h){this.bits[Math.floor(h/32)]^=1<<(h&31)}getNextSet(h){const x=this.size;if(h>=x)return x;const b=this.bits;let _=Math.floor(h/32),j=b[_];j&=~((1<<(h&31))-1);const A=b.length;for(;j===0;){if(++_===A)return x;j=b[_]}const I=_*32+E.numberOfTrailingZeros(j);return I>x?x:I}getNextUnset(h){const x=this.size;if(h>=x)return x;const b=this.bits;let _=Math.floor(h/32),j=~b[_];j&=~((1<<(h&31))-1);const A=b.length;for(;j===0;){if(++_===A)return x;j=~b[_]}const I=_*32+E.numberOfTrailingZeros(j);return I>x?x:I}setBulk(h,x){this.bits[Math.floor(h/32)]=x}setRange(h,x){if(x<h||h<0||x>this.size)throw new p;if(x===h)return;x--;const b=Math.floor(h/32),_=Math.floor(x/32),j=this.bits;for(let A=b;A<=_;A++){const I=A>b?0:h&31,X=(2<<(A<_?31:x&31))-(1<<I);j[A]|=X}}clear(){const h=this.bits.length,x=this.bits;for(let b=0;b<h;b++)x[b]=0}isRange(h,x,b){if(x<h||h<0||x>this.size)throw new p;if(x===h)return!0;x--;const _=Math.floor(h/32),j=Math.floor(x/32),A=this.bits;for(let I=_;I<=j;I++){const B=I>_?0:h&31,oe=(2<<(I<j?31:x&31))-(1<<B)&4294967295;if((A[I]&oe)!==(b?oe:0))return!1}return!0}appendBit(h){this.ensureCapacity(this.size+1),h&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(h,x){if(x<0||x>32)throw new p("Num bits must be between 0 and 32");this.ensureCapacity(this.size+x);for(let b=x;b>0;b--)this.appendBit((h>>b-1&1)===1)}appendBitArray(h){const x=h.size;this.ensureCapacity(this.size+x);for(let b=0;b<x;b++)this.appendBit(h.get(b))}xor(h){if(this.size!==h.size)throw new p("Sizes don't match");const x=this.bits;for(let b=0,_=x.length;b<_;b++)x[b]^=h.bits[b]}toBytes(h,x,b,_){for(let j=0;j<_;j++){let A=0;for(let I=0;I<8;I++)this.get(h)&&(A|=1<<7-I),h++;x[b+j]=A}}getBitArray(){return this.bits}reverse(){const h=new Int32Array(this.bits.length),x=Math.floor((this.size-1)/32),b=x+1,_=this.bits;for(let j=0;j<b;j++){let A=_[j];A=A>>1&1431655765|(A&1431655765)<<1,A=A>>2&858993459|(A&858993459)<<2,A=A>>4&252645135|(A&252645135)<<4,A=A>>8&16711935|(A&16711935)<<8,A=A>>16&65535|(A&65535)<<16,h[x-j]=A}if(this.size!==b*32){const j=b*32-this.size;let A=h[0]>>>j;for(let I=1;I<b;I++){const B=h[I];A|=B<<32-j,h[I-1]=A,A=B>>>j}h[b-1]=A}this.bits=h}static makeArray(h){return new Int32Array(Math.floor((h+31)/32))}equals(h){if(!(h instanceof D))return!1;const x=h;return this.size===x.size&&O.equals(this.bits,x.bits)}hashCode(){return 31*this.size+O.hashCode(this.bits)}toString(){let h="";for(let x=0,b=this.size;x<b;x++)(x&7)===0&&(h+=" "),h+=this.get(x)?"X":".";return h}clone(){return new D(this.size,this.bits.slice())}}var H;(function(xe){xe[xe.OTHER=0]="OTHER",xe[xe.PURE_BARCODE=1]="PURE_BARCODE",xe[xe.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",xe[xe.TRY_HARDER=3]="TRY_HARDER",xe[xe.CHARACTER_SET=4]="CHARACTER_SET",xe[xe.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",xe[xe.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",xe[xe.ASSUME_GS1=7]="ASSUME_GS1",xe[xe.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",xe[xe.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",xe[xe.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(H||(H={}));var W=H;class R extends d{static getFormatInstance(){return new R}}R.kind="FormatException";var z;(function(xe){xe[xe.Cp437=0]="Cp437",xe[xe.ISO8859_1=1]="ISO8859_1",xe[xe.ISO8859_2=2]="ISO8859_2",xe[xe.ISO8859_3=3]="ISO8859_3",xe[xe.ISO8859_4=4]="ISO8859_4",xe[xe.ISO8859_5=5]="ISO8859_5",xe[xe.ISO8859_6=6]="ISO8859_6",xe[xe.ISO8859_7=7]="ISO8859_7",xe[xe.ISO8859_8=8]="ISO8859_8",xe[xe.ISO8859_9=9]="ISO8859_9",xe[xe.ISO8859_10=10]="ISO8859_10",xe[xe.ISO8859_11=11]="ISO8859_11",xe[xe.ISO8859_13=12]="ISO8859_13",xe[xe.ISO8859_14=13]="ISO8859_14",xe[xe.ISO8859_15=14]="ISO8859_15",xe[xe.ISO8859_16=15]="ISO8859_16",xe[xe.SJIS=16]="SJIS",xe[xe.Cp1250=17]="Cp1250",xe[xe.Cp1251=18]="Cp1251",xe[xe.Cp1252=19]="Cp1252",xe[xe.Cp1256=20]="Cp1256",xe[xe.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",xe[xe.UTF8=22]="UTF8",xe[xe.ASCII=23]="ASCII",xe[xe.Big5=24]="Big5",xe[xe.GB18030=25]="GB18030",xe[xe.EUC_KR=26]="EUC_KR"})(z||(z={}));class U{constructor(h,x,b,..._){this.valueIdentifier=h,this.name=b,typeof x=="number"?this.values=Int32Array.from([x]):this.values=x,this.otherEncodingNames=_,U.VALUE_IDENTIFIER_TO_ECI.set(h,this),U.NAME_TO_ECI.set(b,this);const j=this.values;for(let A=0,I=j.length;A!==I;A++){const B=j[A];U.VALUES_TO_ECI.set(B,this)}for(const A of _)U.NAME_TO_ECI.set(A,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(h){if(h<0||h>=900)throw new R("incorect value");const x=U.VALUES_TO_ECI.get(h);if(x===void 0)throw new R("incorect value");return x}static getCharacterSetECIByName(h){const x=U.NAME_TO_ECI.get(h);if(x===void 0)throw new R("incorect value");return x}equals(h){if(!(h instanceof U))return!1;const x=h;return this.getName()===x.getName()}}U.VALUE_IDENTIFIER_TO_ECI=new Map,U.VALUES_TO_ECI=new Map,U.NAME_TO_ECI=new Map,U.Cp437=new U(z.Cp437,Int32Array.from([0,2]),"Cp437"),U.ISO8859_1=new U(z.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),U.ISO8859_2=new U(z.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),U.ISO8859_3=new U(z.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),U.ISO8859_4=new U(z.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),U.ISO8859_5=new U(z.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),U.ISO8859_6=new U(z.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),U.ISO8859_7=new U(z.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),U.ISO8859_8=new U(z.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),U.ISO8859_9=new U(z.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),U.ISO8859_10=new U(z.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),U.ISO8859_11=new U(z.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),U.ISO8859_13=new U(z.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),U.ISO8859_14=new U(z.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),U.ISO8859_15=new U(z.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),U.ISO8859_16=new U(z.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),U.SJIS=new U(z.SJIS,20,"SJIS","Shift_JIS"),U.Cp1250=new U(z.Cp1250,21,"Cp1250","windows-1250"),U.Cp1251=new U(z.Cp1251,22,"Cp1251","windows-1251"),U.Cp1252=new U(z.Cp1252,23,"Cp1252","windows-1252"),U.Cp1256=new U(z.Cp1256,24,"Cp1256","windows-1256"),U.UnicodeBigUnmarked=new U(z.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),U.UTF8=new U(z.UTF8,26,"UTF8","UTF-8"),U.ASCII=new U(z.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),U.Big5=new U(z.Big5,28,"Big5"),U.GB18030=new U(z.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),U.EUC_KR=new U(z.EUC_KR,30,"EUC_KR","EUC-KR");class Z extends d{}Z.kind="UnsupportedOperationException";class q{static decode(h,x){const b=this.encodingName(x);return this.customDecoder?this.customDecoder(h,b):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(b)?this.decodeFallback(h,b):new TextDecoder(b).decode(h)}static shouldDecodeOnFallback(h){return!q.isBrowser()&&h==="ISO-8859-1"}static encode(h,x){const b=this.encodingName(x);return this.customEncoder?this.customEncoder(h,b):typeof TextEncoder>"u"?this.encodeFallback(h):new TextEncoder().encode(h)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(h){return typeof h=="string"?h:h.getName()}static encodingCharacterSet(h){return h instanceof U?h:U.getCharacterSetECIByName(h)}static decodeFallback(h,x){const b=this.encodingCharacterSet(x);if(q.isDecodeFallbackSupported(b)){let _="";for(let j=0,A=h.length;j<A;j++){let I=h[j].toString(16);I.length<2&&(I="0"+I),_+="%"+I}return decodeURIComponent(_)}if(b.equals(U.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(h.buffer));throw new Z(`Encoding ${this.encodingName(x)} not supported by fallback.`)}static isDecodeFallbackSupported(h){return h.equals(U.UTF8)||h.equals(U.ISO8859_1)||h.equals(U.ASCII)}static encodeFallback(h){const b=btoa(unescape(encodeURIComponent(h))).split(""),_=[];for(let j=0;j<b.length;j++)_.push(b[j].charCodeAt(0));return new Uint8Array(_)}}class K{static castAsNonUtf8Char(h,x=null){const b=x?x.getName():this.ISO88591;return q.decode(new Uint8Array([h]),b)}static guessEncoding(h,x){if(x!=null&&x.get(W.CHARACTER_SET)!==void 0)return x.get(W.CHARACTER_SET).toString();const b=h.length;let _=!0,j=!0,A=!0,I=0,B=0,X=0,oe=0,pe=0,Ae=0,ze=0,Xe=0,tt=0,xt=0,jt=0;const qt=h.length>3&&h[0]===239&&h[1]===187&&h[2]===191;for(let Ht=0;Ht<b&&(_||j||A);Ht++){const Ft=h[Ht]&255;A&&(I>0?(Ft&128)===0?A=!1:I--:(Ft&128)!==0&&((Ft&64)===0?A=!1:(I++,(Ft&32)===0?B++:(I++,(Ft&16)===0?X++:(I++,(Ft&8)===0?oe++:A=!1))))),_&&(Ft>127&&Ft<160?_=!1:Ft>159&&(Ft<192||Ft===215||Ft===247)&&jt++),j&&(pe>0?Ft<64||Ft===127||Ft>252?j=!1:pe--:Ft===128||Ft===160||Ft>239?j=!1:Ft>160&&Ft<224?(Ae++,Xe=0,ze++,ze>tt&&(tt=ze)):Ft>127?(pe++,ze=0,Xe++,Xe>xt&&(xt=Xe)):(ze=0,Xe=0))}return A&&I>0&&(A=!1),j&&pe>0&&(j=!1),A&&(qt||B+X+oe>0)?K.UTF8:j&&(K.ASSUME_SHIFT_JIS||tt>=3||xt>=3)?K.SHIFT_JIS:_&&j?tt===2&&Ae===2||jt*10>=b?K.SHIFT_JIS:K.ISO88591:_?K.ISO88591:j?K.SHIFT_JIS:A?K.UTF8:K.PLATFORM_DEFAULT_ENCODING}static format(h,...x){let b=-1;function _(A,I,B,X,oe,pe){if(A==="%%")return"%";if(x[++b]===void 0)return;A=X?parseInt(X.substr(1)):void 0;let Ae=oe?parseInt(oe.substr(1)):void 0,ze;switch(pe){case"s":ze=x[b];break;case"c":ze=x[b][0];break;case"f":ze=parseFloat(x[b]).toFixed(A);break;case"p":ze=parseFloat(x[b]).toPrecision(A);break;case"e":ze=parseFloat(x[b]).toExponential(A);break;case"x":ze=parseInt(x[b]).toString(Ae||16);break;case"d":ze=parseFloat(parseInt(x[b],Ae||10).toPrecision(A)).toFixed(0);break}ze=typeof ze=="object"?JSON.stringify(ze):(+ze).toString(Ae);let Xe=parseInt(B),tt=B&&B[0]+""=="0"?"0":" ";for(;ze.length<Xe;)ze=I!==void 0?ze+tt:tt+ze;return ze}let j=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return h.replace(j,_)}static getBytes(h,x){return q.encode(h,x)}static getCharCode(h,x=0){return h.charCodeAt(x)}static getCharAt(h){return String.fromCharCode(h)}}K.SHIFT_JIS=U.SJIS.getName(),K.GB2312="GB2312",K.ISO88591=U.ISO8859_1.getName(),K.EUC_JP="EUC_JP",K.UTF8=U.UTF8.getName(),K.PLATFORM_DEFAULT_ENCODING=K.UTF8,K.ASSUME_SHIFT_JIS=!1;class Q{constructor(h=""){this.value=h}enableDecoding(h){return this.encoding=h,this}append(h){return typeof h=="string"?this.value+=h.toString():this.encoding?this.value+=K.castAsNonUtf8Char(h,this.encoding):this.value+=String.fromCharCode(h),this}appendChars(h,x,b){for(let _=x;x<x+b;_++)this.append(h[_]);return this}length(){return this.value.length}charAt(h){return this.value.charAt(h)}deleteCharAt(h){this.value=this.value.substr(0,h)+this.value.substring(h+1)}setCharAt(h,x){this.value=this.value.substr(0,h)+x+this.value.substr(h+1)}substring(h,x){return this.value.substring(h,x)}setLengthToZero(){this.value=""}toString(){return this.value}insert(h,x){this.value=this.value.substr(0,h)+x+this.value.substr(h+x.length)}}class re{constructor(h,x,b,_){if(this.width=h,this.height=x,this.rowSize=b,this.bits=_,x==null&&(x=h),this.height=x,h<1||x<1)throw new p("Both dimensions must be greater than 0");b==null&&(b=Math.floor((h+31)/32)),this.rowSize=b,_==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(h){const x=h.length,b=h[0].length,_=new re(b,x);for(let j=0;j<x;j++){const A=h[j];for(let I=0;I<b;I++)A[I]&&_.set(I,j)}return _}static parseFromString(h,x,b){if(h===null)throw new p("stringRepresentation cannot be null");const _=new Array(h.length);let j=0,A=0,I=-1,B=0,X=0;for(;X<h.length;)if(h.charAt(X)===`
`||h.charAt(X)==="\r"){if(j>A){if(I===-1)I=j-A;else if(j-A!==I)throw new p("row lengths do not match");A=j,B++}X++}else if(h.substring(X,X+x.length)===x)X+=x.length,_[j]=!0,j++;else if(h.substring(X,X+b.length)===b)X+=b.length,_[j]=!1,j++;else throw new p("illegal character encountered: "+h.substring(X));if(j>A){if(I===-1)I=j-A;else if(j-A!==I)throw new p("row lengths do not match");B++}const oe=new re(I,B);for(let pe=0;pe<j;pe++)_[pe]&&oe.set(Math.floor(pe%I),Math.floor(pe/I));return oe}get(h,x){const b=x*this.rowSize+Math.floor(h/32);return(this.bits[b]>>>(h&31)&1)!==0}set(h,x){const b=x*this.rowSize+Math.floor(h/32);this.bits[b]|=1<<(h&31)&4294967295}unset(h,x){const b=x*this.rowSize+Math.floor(h/32);this.bits[b]&=~(1<<(h&31)&4294967295)}flip(h,x){const b=x*this.rowSize+Math.floor(h/32);this.bits[b]^=1<<(h&31)&4294967295}xor(h){if(this.width!==h.getWidth()||this.height!==h.getHeight()||this.rowSize!==h.getRowSize())throw new p("input matrix dimensions do not match");const x=new D(Math.floor(this.width/32)+1),b=this.rowSize,_=this.bits;for(let j=0,A=this.height;j<A;j++){const I=j*b,B=h.getRow(j,x).getBitArray();for(let X=0;X<b;X++)_[I+X]^=B[X]}}clear(){const h=this.bits,x=h.length;for(let b=0;b<x;b++)h[b]=0}setRegion(h,x,b,_){if(x<0||h<0)throw new p("Left and top must be nonnegative");if(_<1||b<1)throw new p("Height and width must be at least 1");const j=h+b,A=x+_;if(A>this.height||j>this.width)throw new p("The region must fit inside the matrix");const I=this.rowSize,B=this.bits;for(let X=x;X<A;X++){const oe=X*I;for(let pe=h;pe<j;pe++)B[oe+Math.floor(pe/32)]|=1<<(pe&31)&4294967295}}getRow(h,x){x==null||x.getSize()<this.width?x=new D(this.width):x.clear();const b=this.rowSize,_=this.bits,j=h*b;for(let A=0;A<b;A++)x.setBulk(A*32,_[j+A]);return x}setRow(h,x){w.arraycopy(x.getBitArray(),0,this.bits,h*this.rowSize,this.rowSize)}rotate180(){const h=this.getWidth(),x=this.getHeight();let b=new D(h),_=new D(h);for(let j=0,A=Math.floor((x+1)/2);j<A;j++)b=this.getRow(j,b),_=this.getRow(x-1-j,_),b.reverse(),_.reverse(),this.setRow(j,_),this.setRow(x-1-j,b)}getEnclosingRectangle(){const h=this.width,x=this.height,b=this.rowSize,_=this.bits;let j=h,A=x,I=-1,B=-1;for(let X=0;X<x;X++)for(let oe=0;oe<b;oe++){const pe=_[X*b+oe];if(pe!==0){if(X<A&&(A=X),X>B&&(B=X),oe*32<j){let Ae=0;for(;(pe<<31-Ae&4294967295)===0;)Ae++;oe*32+Ae<j&&(j=oe*32+Ae)}if(oe*32+31>I){let Ae=31;for(;!(pe>>>Ae);)Ae--;oe*32+Ae>I&&(I=oe*32+Ae)}}}return I<j||B<A?null:Int32Array.from([j,A,I-j+1,B-A+1])}getTopLeftOnBit(){const h=this.rowSize,x=this.bits;let b=0;for(;b<x.length&&x[b]===0;)b++;if(b===x.length)return null;const _=b/h;let j=b%h*32;const A=x[b];let I=0;for(;(A<<31-I&4294967295)===0;)I++;return j+=I,Int32Array.from([j,_])}getBottomRightOnBit(){const h=this.rowSize,x=this.bits;let b=x.length-1;for(;b>=0&&x[b]===0;)b--;if(b<0)return null;const _=Math.floor(b/h);let j=Math.floor(b%h)*32;const A=x[b];let I=31;for(;!(A>>>I);)I--;return j+=I,Int32Array.from([j,_])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(h){if(!(h instanceof re))return!1;const x=h;return this.width===x.width&&this.height===x.height&&this.rowSize===x.rowSize&&O.equals(this.bits,x.bits)}hashCode(){let h=this.width;return h=31*h+this.width,h=31*h+this.height,h=31*h+this.rowSize,h=31*h+O.hashCode(this.bits),h}toString(h="X ",x="  ",b=`
`){return this.buildToString(h,x,b)}buildToString(h,x,b){let _=new Q;for(let j=0,A=this.height;j<A;j++){for(let I=0,B=this.width;I<B;I++)_.append(this.get(I,j)?h:x);_.append(b)}return _.toString()}clone(){return new re(this.width,this.height,this.rowSize,this.bits.slice())}}class ae extends d{static getNotFoundInstance(){return new ae}}ae.kind="NotFoundException";class de extends N{constructor(h){super(h),this.luminances=de.EMPTY,this.buckets=new Int32Array(de.LUMINANCE_BUCKETS)}getBlackRow(h,x){const b=this.getLuminanceSource(),_=b.getWidth();x==null||x.getSize()<_?x=new D(_):x.clear(),this.initArrays(_);const j=b.getRow(h,this.luminances),A=this.buckets;for(let B=0;B<_;B++)A[(j[B]&255)>>de.LUMINANCE_SHIFT]++;const I=de.estimateBlackPoint(A);if(_<3)for(let B=0;B<_;B++)(j[B]&255)<I&&x.set(B);else{let B=j[0]&255,X=j[1]&255;for(let oe=1;oe<_-1;oe++){const pe=j[oe+1]&255;(X*4-B-pe)/2<I&&x.set(oe),B=X,X=pe}}return x}getBlackMatrix(){const h=this.getLuminanceSource(),x=h.getWidth(),b=h.getHeight(),_=new re(x,b);this.initArrays(x);const j=this.buckets;for(let B=1;B<5;B++){const X=Math.floor(b*B/5),oe=h.getRow(X,this.luminances),pe=Math.floor(x*4/5);for(let Ae=Math.floor(x/5);Ae<pe;Ae++){const ze=oe[Ae]&255;j[ze>>de.LUMINANCE_SHIFT]++}}const A=de.estimateBlackPoint(j),I=h.getMatrix();for(let B=0;B<b;B++){const X=B*x;for(let oe=0;oe<x;oe++)(I[X+oe]&255)<A&&_.set(oe,B)}return _}createBinarizer(h){return new de(h)}initArrays(h){this.luminances.length<h&&(this.luminances=new Uint8ClampedArray(h));const x=this.buckets;for(let b=0;b<de.LUMINANCE_BUCKETS;b++)x[b]=0}static estimateBlackPoint(h){const x=h.length;let b=0,_=0,j=0;for(let oe=0;oe<x;oe++)h[oe]>j&&(_=oe,j=h[oe]),h[oe]>b&&(b=h[oe]);let A=0,I=0;for(let oe=0;oe<x;oe++){const pe=oe-_,Ae=h[oe]*pe*pe;Ae>I&&(A=oe,I=Ae)}if(_>A){const oe=_;_=A,A=oe}if(A-_<=x/16)throw new ae;let B=A-1,X=-1;for(let oe=A-1;oe>_;oe--){const pe=oe-_,Ae=pe*pe*(A-oe)*(b-h[oe]);Ae>X&&(B=oe,X=Ae)}return B<<de.LUMINANCE_SHIFT}}de.LUMINANCE_BITS=5,de.LUMINANCE_SHIFT=8-de.LUMINANCE_BITS,de.LUMINANCE_BUCKETS=1<<de.LUMINANCE_BITS,de.EMPTY=Uint8ClampedArray.from([0]);class he extends de{constructor(h){super(h),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const h=this.getLuminanceSource(),x=h.getWidth(),b=h.getHeight();if(x>=he.MINIMUM_DIMENSION&&b>=he.MINIMUM_DIMENSION){const _=h.getMatrix();let j=x>>he.BLOCK_SIZE_POWER;(x&he.BLOCK_SIZE_MASK)!==0&&j++;let A=b>>he.BLOCK_SIZE_POWER;(b&he.BLOCK_SIZE_MASK)!==0&&A++;const I=he.calculateBlackPoints(_,j,A,x,b),B=new re(x,b);he.calculateThresholdForBlock(_,j,A,x,b,I,B),this.matrix=B}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(h){return new he(h)}static calculateThresholdForBlock(h,x,b,_,j,A,I){const B=j-he.BLOCK_SIZE,X=_-he.BLOCK_SIZE;for(let oe=0;oe<b;oe++){let pe=oe<<he.BLOCK_SIZE_POWER;pe>B&&(pe=B);const Ae=he.cap(oe,2,b-3);for(let ze=0;ze<x;ze++){let Xe=ze<<he.BLOCK_SIZE_POWER;Xe>X&&(Xe=X);const tt=he.cap(ze,2,x-3);let xt=0;for(let qt=-2;qt<=2;qt++){const Ht=A[Ae+qt];xt+=Ht[tt-2]+Ht[tt-1]+Ht[tt]+Ht[tt+1]+Ht[tt+2]}const jt=xt/25;he.thresholdBlock(h,Xe,pe,jt,_,I)}}}static cap(h,x,b){return h<x?x:h>b?b:h}static thresholdBlock(h,x,b,_,j,A){for(let I=0,B=b*j+x;I<he.BLOCK_SIZE;I++,B+=j)for(let X=0;X<he.BLOCK_SIZE;X++)(h[B+X]&255)<=_&&A.set(x+X,b+I)}static calculateBlackPoints(h,x,b,_,j){const A=j-he.BLOCK_SIZE,I=_-he.BLOCK_SIZE,B=new Array(b);for(let X=0;X<b;X++){B[X]=new Int32Array(x);let oe=X<<he.BLOCK_SIZE_POWER;oe>A&&(oe=A);for(let pe=0;pe<x;pe++){let Ae=pe<<he.BLOCK_SIZE_POWER;Ae>I&&(Ae=I);let ze=0,Xe=255,tt=0;for(let jt=0,qt=oe*_+Ae;jt<he.BLOCK_SIZE;jt++,qt+=_){for(let Ht=0;Ht<he.BLOCK_SIZE;Ht++){const Ft=h[qt+Ht]&255;ze+=Ft,Ft<Xe&&(Xe=Ft),Ft>tt&&(tt=Ft)}if(tt-Xe>he.MIN_DYNAMIC_RANGE)for(jt++,qt+=_;jt<he.BLOCK_SIZE;jt++,qt+=_)for(let Ht=0;Ht<he.BLOCK_SIZE;Ht++)ze+=h[qt+Ht]&255}let xt=ze>>he.BLOCK_SIZE_POWER*2;if(tt-Xe<=he.MIN_DYNAMIC_RANGE&&(xt=Xe/2,X>0&&pe>0)){const jt=(B[X-1][pe]+2*B[X][pe-1]+B[X-1][pe-1])/4;Xe<jt&&(xt=jt)}B[X][pe]=xt}}return B}}he.BLOCK_SIZE_POWER=3,he.BLOCK_SIZE=1<<he.BLOCK_SIZE_POWER,he.BLOCK_SIZE_MASK=he.BLOCK_SIZE-1,he.MINIMUM_DIMENSION=he.BLOCK_SIZE*5,he.MIN_DYNAMIC_RANGE=24;class Se{constructor(h,x){this.width=h,this.height=x}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(h,x,b,_){throw new Z("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new Z("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new Z("This luminance source does not support rotation by 45 degrees.")}toString(){const h=new Uint8ClampedArray(this.width);let x=new Q;for(let b=0;b<this.height;b++){const _=this.getRow(b,h);for(let j=0;j<this.width;j++){const A=_[j]&255;let I;A<64?I="#":A<128?I="+":A<192?I=".":I=" ",x.append(I)}x.append(`
`)}return x.toString()}}class ke extends Se{constructor(h){super(h.getWidth(),h.getHeight()),this.delegate=h}getRow(h,x){const b=this.delegate.getRow(h,x),_=this.getWidth();for(let j=0;j<_;j++)b[j]=255-(b[j]&255);return b}getMatrix(){const h=this.delegate.getMatrix(),x=this.getWidth()*this.getHeight(),b=new Uint8ClampedArray(x);for(let _=0;_<x;_++)b[_]=255-(h[_]&255);return b}isCropSupported(){return this.delegate.isCropSupported()}crop(h,x,b,_){return new ke(this.delegate.crop(h,x,b,_))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new ke(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new ke(this.delegate.rotateCounterClockwise45())}}class Le extends Se{constructor(h){super(h.width,h.height),this.canvas=h,this.tempCanvasElement=null,this.buffer=Le.makeBufferFromCanvasImageData(h)}static makeBufferFromCanvasImageData(h){const x=h.getContext("2d").getImageData(0,0,h.width,h.height);return Le.toGrayscaleBuffer(x.data,h.width,h.height)}static toGrayscaleBuffer(h,x,b){const _=new Uint8ClampedArray(x*b);for(let j=0,A=0,I=h.length;j<I;j+=4,A++){let B;if(h[j+3]===0)B=255;else{const oe=h[j],pe=h[j+1],Ae=h[j+2];B=306*oe+601*pe+117*Ae+512>>10}_[A]=B}return _}getRow(h,x){if(h<0||h>=this.getHeight())throw new p("Requested row is outside the image: "+h);const b=this.getWidth(),_=h*b;return x===null?x=this.buffer.slice(_,_+b):(x.length<b&&(x=new Uint8ClampedArray(b)),x.set(this.buffer.slice(_,_+b))),x}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(h,x,b,_){return super.crop(h,x,b,_),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const h=this.canvas.ownerDocument.createElement("canvas");h.width=this.canvas.width,h.height=this.canvas.height,this.tempCanvasElement=h}return this.tempCanvasElement}rotate(h){const x=this.getTempCanvasElement(),b=x.getContext("2d"),_=h*Le.DEGREE_TO_RADIANS,j=this.canvas.width,A=this.canvas.height,I=Math.ceil(Math.abs(Math.cos(_))*j+Math.abs(Math.sin(_))*A),B=Math.ceil(Math.abs(Math.sin(_))*j+Math.abs(Math.cos(_))*A);return x.width=I,x.height=B,b.translate(I/2,B/2),b.rotate(_),b.drawImage(this.canvas,j/-2,A/-2),this.buffer=Le.makeBufferFromCanvasImageData(x),this}invert(){return new ke(this)}}Le.DEGREE_TO_RADIANS=Math.PI/180;class fe{constructor(h,x,b){this.deviceId=h,this.label=x,this.kind="videoinput",this.groupId=b||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var F=(globalThis||r2||self||window||void 0)&&(globalThis||r2||self||window||void 0).__awaiter||function(xe,h,x,b){function _(j){return j instanceof x?j:new x(function(A){A(j)})}return new(x||(x=Promise))(function(j,A){function I(oe){try{X(b.next(oe))}catch(pe){A(pe)}}function B(oe){try{X(b.throw(oe))}catch(pe){A(pe)}}function X(oe){oe.done?j(oe.value):_(oe.value).then(I,B)}X((b=b.apply(xe,h||[])).next())})};class te{constructor(h,x=500,b){this.reader=h,this.timeBetweenScansMillis=x,this._hints=b,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(h){this._timeBetweenDecodingAttempts=h<0?0:h}set hints(h){this._hints=h||null}get hints(){return this._hints}listVideoInputDevices(){return F(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const h=yield navigator.mediaDevices.enumerateDevices(),x=[];for(const b of h){const _=b.kind==="video"?"videoinput":b.kind;if(_!=="videoinput")continue;const j=b.deviceId||b.id,A=b.label||`Video device ${x.length+1}`,I=b.groupId,B={deviceId:j,label:A,kind:_,groupId:I};x.push(B)}return x})}getVideoInputDevices(){return F(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(x=>new fe(x.deviceId,x.label))})}findDeviceById(h){return F(this,void 0,void 0,function*(){const x=yield this.listVideoInputDevices();return x?x.find(b=>b.deviceId===h):null})}decodeFromInputVideoDevice(h,x){return F(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(h,x)})}decodeOnceFromVideoDevice(h,x){return F(this,void 0,void 0,function*(){this.reset();let b;h?b={deviceId:{exact:h}}:b={facingMode:"environment"};const _={video:b};return yield this.decodeOnceFromConstraints(_,x)})}decodeOnceFromConstraints(h,x){return F(this,void 0,void 0,function*(){const b=yield navigator.mediaDevices.getUserMedia(h);return yield this.decodeOnceFromStream(b,x)})}decodeOnceFromStream(h,x){return F(this,void 0,void 0,function*(){this.reset();const b=yield this.attachStreamToVideo(h,x);return yield this.decodeOnce(b)})}decodeFromInputVideoDeviceContinuously(h,x,b){return F(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(h,x,b)})}decodeFromVideoDevice(h,x,b){return F(this,void 0,void 0,function*(){let _;h?_={deviceId:{exact:h}}:_={facingMode:"environment"};const j={video:_};return yield this.decodeFromConstraints(j,x,b)})}decodeFromConstraints(h,x,b){return F(this,void 0,void 0,function*(){const _=yield navigator.mediaDevices.getUserMedia(h);return yield this.decodeFromStream(_,x,b)})}decodeFromStream(h,x,b){return F(this,void 0,void 0,function*(){this.reset();const _=yield this.attachStreamToVideo(h,x);return yield this.decodeContinuously(_,b)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(h,x){return F(this,void 0,void 0,function*(){const b=this.prepareVideoElement(x);return this.addVideoSource(b,h),this.videoElement=b,this.stream=h,yield this.playVideoOnLoadAsync(b),b})}playVideoOnLoadAsync(h){return new Promise((x,b)=>this.playVideoOnLoad(h,()=>x()))}playVideoOnLoad(h,x){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(h),h.addEventListener("ended",this.videoEndedListener),h.addEventListener("canplay",this.videoCanPlayListener),h.addEventListener("playing",x),this.tryPlayVideo(h)}isVideoPlaying(h){return h.currentTime>0&&!h.paused&&!h.ended&&h.readyState>2}tryPlayVideo(h){return F(this,void 0,void 0,function*(){if(this.isVideoPlaying(h)){console.warn("Trying to play video that is already playing.");return}try{yield h.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(h,x){const b=document.getElementById(h);if(!b)throw new f(`element with id '${h}' not found`);if(b.nodeName.toLowerCase()!==x.toLowerCase())throw new f(`element with id '${h}' must be an ${x} element`);return b}decodeFromImage(h,x){if(!h&&!x)throw new f("either imageElement with a src set or an url must be provided");return x&&!h?this.decodeFromImageUrl(x):this.decodeFromImageElement(h)}decodeFromVideo(h,x){if(!h&&!x)throw new f("Either an element with a src set or an URL must be provided");return x&&!h?this.decodeFromVideoUrl(x):this.decodeFromVideoElement(h)}decodeFromVideoContinuously(h,x,b){if(h===void 0&&x===void 0)throw new f("Either an element with a src set or an URL must be provided");return x&&!h?this.decodeFromVideoUrlContinuously(x,b):this.decodeFromVideoElementContinuously(h,b)}decodeFromImageElement(h){if(!h)throw new f("An image element must be provided.");this.reset();const x=this.prepareImageElement(h);this.imageElement=x;let b;return this.isImageLoaded(x)?b=this.decodeOnce(x,!1,!0):b=this._decodeOnLoadImage(x),b}decodeFromVideoElement(h){const x=this._decodeFromVideoElementSetup(h);return this._decodeOnLoadVideo(x)}decodeFromVideoElementContinuously(h,x){const b=this._decodeFromVideoElementSetup(h);return this._decodeOnLoadVideoContinuously(b,x)}_decodeFromVideoElementSetup(h){if(!h)throw new f("A video element must be provided.");this.reset();const x=this.prepareVideoElement(h);return this.videoElement=x,x}decodeFromImageUrl(h){if(!h)throw new f("An URL must be provided.");this.reset();const x=this.prepareImageElement();this.imageElement=x;const b=this._decodeOnLoadImage(x);return x.src=h,b}decodeFromVideoUrl(h){if(!h)throw new f("An URL must be provided.");this.reset();const x=this.prepareVideoElement(),b=this.decodeFromVideoElement(x);return x.src=h,b}decodeFromVideoUrlContinuously(h,x){if(!h)throw new f("An URL must be provided.");this.reset();const b=this.prepareVideoElement(),_=this.decodeFromVideoElementContinuously(b,x);return b.src=h,_}_decodeOnLoadImage(h){return new Promise((x,b)=>{this.imageLoadedListener=()=>this.decodeOnce(h,!1,!0).then(x,b),h.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(h){return F(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(h),yield this.decodeOnce(h)})}_decodeOnLoadVideoContinuously(h,x){return F(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(h),this.decodeContinuously(h,x)})}isImageLoaded(h){return!(!h.complete||h.naturalWidth===0)}prepareImageElement(h){let x;return typeof h>"u"&&(x=document.createElement("img"),x.width=200,x.height=200),typeof h=="string"&&(x=this.getMediaElement(h,"img")),h instanceof HTMLImageElement&&(x=h),x}prepareVideoElement(h){let x;return!h&&typeof document<"u"&&(x=document.createElement("video"),x.width=200,x.height=200),typeof h=="string"&&(x=this.getMediaElement(h,"video")),h instanceof HTMLVideoElement&&(x=h),x.setAttribute("autoplay","true"),x.setAttribute("muted","true"),x.setAttribute("playsinline","true"),x}decodeOnce(h,x=!0,b=!0){this._stopAsyncDecode=!1;const _=(j,A)=>{if(this._stopAsyncDecode){A(new ae("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const I=this.decode(h);j(I)}catch(I){const B=x&&I instanceof ae,oe=(I instanceof g||I instanceof R)&&b;if(B||oe)return setTimeout(_,this._timeBetweenDecodingAttempts,j,A);A(I)}};return new Promise((j,A)=>_(j,A))}decodeContinuously(h,x){this._stopContinuousDecode=!1;const b=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const _=this.decode(h);x(_,null),setTimeout(b,this.timeBetweenScansMillis)}catch(_){x(null,_);const j=_ instanceof g||_ instanceof R,A=_ instanceof ae;(j||A)&&setTimeout(b,this._timeBetweenDecodingAttempts)}};b()}decode(h){const x=this.createBinaryBitmap(h);return this.decodeBitmap(x)}_isHTMLVideoElement(h){return h.videoWidth!==0}drawFrameOnCanvas(h,x,b){x||(x={sx:0,sy:0,sWidth:h.videoWidth,sHeight:h.videoHeight,dx:0,dy:0,dWidth:h.videoWidth,dHeight:h.videoHeight}),b||(b=this.captureCanvasContext),b.drawImage(h,x.sx,x.sy,x.sWidth,x.sHeight,x.dx,x.dy,x.dWidth,x.dHeight)}drawImageOnCanvas(h,x,b=this.captureCanvasContext){x||(x={sx:0,sy:0,sWidth:h.naturalWidth,sHeight:h.naturalHeight,dx:0,dy:0,dWidth:h.naturalWidth,dHeight:h.naturalHeight}),b||(b=this.captureCanvasContext),b.drawImage(h,x.sx,x.sy,x.sWidth,x.sHeight,x.dx,x.dy,x.dWidth,x.dHeight)}createBinaryBitmap(h){this.getCaptureCanvasContext(h),this._isHTMLVideoElement(h)?this.drawFrameOnCanvas(h):this.drawImageOnCanvas(h);const x=this.getCaptureCanvas(h),b=new Le(x),_=new he(b);return new y(_)}getCaptureCanvasContext(h){if(!this.captureCanvasContext){const b=this.getCaptureCanvas(h).getContext("2d");this.captureCanvasContext=b}return this.captureCanvasContext}getCaptureCanvas(h){if(!this.captureCanvas){const x=this.createCaptureCanvas(h);this.captureCanvas=x}return this.captureCanvas}decodeBitmap(h){return this.reader.decode(h,this._hints)}createCaptureCanvas(h){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const x=document.createElement("canvas");let b,_;return typeof h<"u"&&(h instanceof HTMLVideoElement?(b=h.videoWidth,_=h.videoHeight):h instanceof HTMLImageElement&&(b=h.naturalWidth||h.width,_=h.naturalHeight||h.height)),x.style.width=b+"px",x.style.height=_+"px",x.width=b,x.height=_,x}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(h=>h.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(h,x){try{h.srcObject=x}catch{h.src=URL.createObjectURL(x)}}cleanVideoSource(h){try{h.srcObject=null}catch{h.src=""}this.videoElement.removeAttribute("src")}}class Y{constructor(h,x,b=x==null?0:8*x.length,_,j,A=w.currentTimeMillis()){this.text=h,this.rawBytes=x,this.numBits=b,this.resultPoints=_,this.format=j,this.timestamp=A,this.text=h,this.rawBytes=x,b==null?this.numBits=x==null?0:8*x.length:this.numBits=b,this.resultPoints=_,this.format=j,this.resultMetadata=null,A==null?this.timestamp=w.currentTimeMillis():this.timestamp=A}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(h,x){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(h,x)}putAllMetadata(h){h!==null&&(this.resultMetadata===null?this.resultMetadata=h:this.resultMetadata=new Map(h))}addResultPoints(h){const x=this.resultPoints;if(x===null)this.resultPoints=h;else if(h!==null&&h.length>0){const b=new Array(x.length+h.length);w.arraycopy(x,0,b,0,x.length),w.arraycopy(h,0,b,x.length,h.length),this.resultPoints=b}}getTimestamp(){return this.timestamp}toString(){return this.text}}var ne;(function(xe){xe[xe.AZTEC=0]="AZTEC",xe[xe.CODABAR=1]="CODABAR",xe[xe.CODE_39=2]="CODE_39",xe[xe.CODE_93=3]="CODE_93",xe[xe.CODE_128=4]="CODE_128",xe[xe.DATA_MATRIX=5]="DATA_MATRIX",xe[xe.EAN_8=6]="EAN_8",xe[xe.EAN_13=7]="EAN_13",xe[xe.ITF=8]="ITF",xe[xe.MAXICODE=9]="MAXICODE",xe[xe.PDF_417=10]="PDF_417",xe[xe.QR_CODE=11]="QR_CODE",xe[xe.RSS_14=12]="RSS_14",xe[xe.RSS_EXPANDED=13]="RSS_EXPANDED",xe[xe.UPC_A=14]="UPC_A",xe[xe.UPC_E=15]="UPC_E",xe[xe.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(ne||(ne={}));var ee=ne,Ce;(function(xe){xe[xe.OTHER=0]="OTHER",xe[xe.ORIENTATION=1]="ORIENTATION",xe[xe.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",xe[xe.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",xe[xe.ISSUE_NUMBER=4]="ISSUE_NUMBER",xe[xe.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",xe[xe.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",xe[xe.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",xe[xe.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",xe[xe.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",xe[xe.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(Ce||(Ce={}));var me=Ce;class se{constructor(h,x,b,_,j=-1,A=-1){this.rawBytes=h,this.text=x,this.byteSegments=b,this.ecLevel=_,this.structuredAppendSequenceNumber=j,this.structuredAppendParity=A,this.numBits=h==null?0:8*h.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(h){this.numBits=h}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(h){this.errorsCorrected=h}getErasures(){return this.erasures}setErasures(h){this.erasures=h}getOther(){return this.other}setOther(h){this.other=h}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class je{exp(h){return this.expTable[h]}log(h){if(h===0)throw new p;return this.logTable[h]}static addOrSubtract(h,x){return h^x}}class be{constructor(h,x){if(x.length===0)throw new p;this.field=h;const b=x.length;if(b>1&&x[0]===0){let _=1;for(;_<b&&x[_]===0;)_++;_===b?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(b-_),w.arraycopy(x,_,this.coefficients,0,this.coefficients.length))}else this.coefficients=x}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(h){return this.coefficients[this.coefficients.length-1-h]}evaluateAt(h){if(h===0)return this.getCoefficient(0);const x=this.coefficients;let b;if(h===1){b=0;for(let A=0,I=x.length;A!==I;A++){const B=x[A];b=je.addOrSubtract(b,B)}return b}b=x[0];const _=x.length,j=this.field;for(let A=1;A<_;A++)b=je.addOrSubtract(j.multiply(h,b),x[A]);return b}addOrSubtract(h){if(!this.field.equals(h.field))throw new p("GenericGFPolys do not have same GenericGF field");if(this.isZero())return h;if(h.isZero())return this;let x=this.coefficients,b=h.coefficients;if(x.length>b.length){const A=x;x=b,b=A}let _=new Int32Array(b.length);const j=b.length-x.length;w.arraycopy(b,0,_,0,j);for(let A=j;A<b.length;A++)_[A]=je.addOrSubtract(x[A-j],b[A]);return new be(this.field,_)}multiply(h){if(!this.field.equals(h.field))throw new p("GenericGFPolys do not have same GenericGF field");if(this.isZero()||h.isZero())return this.field.getZero();const x=this.coefficients,b=x.length,_=h.coefficients,j=_.length,A=new Int32Array(b+j-1),I=this.field;for(let B=0;B<b;B++){const X=x[B];for(let oe=0;oe<j;oe++)A[B+oe]=je.addOrSubtract(A[B+oe],I.multiply(X,_[oe]))}return new be(I,A)}multiplyScalar(h){if(h===0)return this.field.getZero();if(h===1)return this;const x=this.coefficients.length,b=this.field,_=new Int32Array(x),j=this.coefficients;for(let A=0;A<x;A++)_[A]=b.multiply(j[A],h);return new be(b,_)}multiplyByMonomial(h,x){if(h<0)throw new p;if(x===0)return this.field.getZero();const b=this.coefficients,_=b.length,j=new Int32Array(_+h),A=this.field;for(let I=0;I<_;I++)j[I]=A.multiply(b[I],x);return new be(A,j)}divide(h){if(!this.field.equals(h.field))throw new p("GenericGFPolys do not have same GenericGF field");if(h.isZero())throw new p("Divide by 0");const x=this.field;let b=x.getZero(),_=this;const j=h.getCoefficient(h.getDegree()),A=x.inverse(j);for(;_.getDegree()>=h.getDegree()&&!_.isZero();){const I=_.getDegree()-h.getDegree(),B=x.multiply(_.getCoefficient(_.getDegree()),A),X=h.multiplyByMonomial(I,B),oe=x.buildMonomial(I,B);b=b.addOrSubtract(oe),_=_.addOrSubtract(X)}return[b,_]}toString(){let h="";for(let x=this.getDegree();x>=0;x--){let b=this.getCoefficient(x);if(b!==0){if(b<0?(h+=" - ",b=-b):h.length>0&&(h+=" + "),x===0||b!==1){const _=this.field.log(b);_===0?h+="1":_===1?h+="a":(h+="a^",h+=_)}x!==0&&(x===1?h+="x":(h+="x^",h+=x))}}return h}}class ie extends d{}ie.kind="ArithmeticException";class Te extends je{constructor(h,x,b){super(),this.primitive=h,this.size=x,this.generatorBase=b;const _=new Int32Array(x);let j=1;for(let I=0;I<x;I++)_[I]=j,j*=2,j>=x&&(j^=h,j&=x-1);this.expTable=_;const A=new Int32Array(x);for(let I=0;I<x-1;I++)A[_[I]]=I;this.logTable=A,this.zero=new be(this,Int32Array.from([0])),this.one=new be(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(h,x){if(h<0)throw new p;if(x===0)return this.zero;const b=new Int32Array(h+1);return b[0]=x,new be(this,b)}inverse(h){if(h===0)throw new ie;return this.expTable[this.size-this.logTable[h]-1]}multiply(h,x){return h===0||x===0?0:this.expTable[(this.logTable[h]+this.logTable[x])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+E.toHexString(this.primitive)+","+this.size+")"}equals(h){return h===this}}Te.AZTEC_DATA_12=new Te(4201,4096,1),Te.AZTEC_DATA_10=new Te(1033,1024,1),Te.AZTEC_DATA_6=new Te(67,64,1),Te.AZTEC_PARAM=new Te(19,16,1),Te.QR_CODE_FIELD_256=new Te(285,256,0),Te.DATA_MATRIX_FIELD_256=new Te(301,256,1),Te.AZTEC_DATA_8=Te.DATA_MATRIX_FIELD_256,Te.MAXICODE_FIELD_64=Te.AZTEC_DATA_6;class De extends d{}De.kind="ReedSolomonException";class ye extends d{}ye.kind="IllegalStateException";class rt{constructor(h){this.field=h}decode(h,x){const b=this.field,_=new be(b,h),j=new Int32Array(x);let A=!0;for(let ze=0;ze<x;ze++){const Xe=_.evaluateAt(b.exp(ze+b.getGeneratorBase()));j[j.length-1-ze]=Xe,Xe!==0&&(A=!1)}if(A)return;const I=new be(b,j),B=this.runEuclideanAlgorithm(b.buildMonomial(x,1),I,x),X=B[0],oe=B[1],pe=this.findErrorLocations(X),Ae=this.findErrorMagnitudes(oe,pe);for(let ze=0;ze<pe.length;ze++){const Xe=h.length-1-b.log(pe[ze]);if(Xe<0)throw new De("Bad error location");h[Xe]=Te.addOrSubtract(h[Xe],Ae[ze])}}runEuclideanAlgorithm(h,x,b){if(h.getDegree()<x.getDegree()){const ze=h;h=x,x=ze}const _=this.field;let j=h,A=x,I=_.getZero(),B=_.getOne();for(;A.getDegree()>=(b/2|0);){let ze=j,Xe=I;if(j=A,I=B,j.isZero())throw new De("r_{i-1} was zero");A=ze;let tt=_.getZero();const xt=j.getCoefficient(j.getDegree()),jt=_.inverse(xt);for(;A.getDegree()>=j.getDegree()&&!A.isZero();){const qt=A.getDegree()-j.getDegree(),Ht=_.multiply(A.getCoefficient(A.getDegree()),jt);tt=tt.addOrSubtract(_.buildMonomial(qt,Ht)),A=A.addOrSubtract(j.multiplyByMonomial(qt,Ht))}if(B=tt.multiply(I).addOrSubtract(Xe),A.getDegree()>=j.getDegree())throw new ye("Division algorithm failed to reduce polynomial?")}const X=B.getCoefficient(0);if(X===0)throw new De("sigmaTilde(0) was zero");const oe=_.inverse(X),pe=B.multiplyScalar(oe),Ae=A.multiplyScalar(oe);return[pe,Ae]}findErrorLocations(h){const x=h.getDegree();if(x===1)return Int32Array.from([h.getCoefficient(1)]);const b=new Int32Array(x);let _=0;const j=this.field;for(let A=1;A<j.getSize()&&_<x;A++)h.evaluateAt(A)===0&&(b[_]=j.inverse(A),_++);if(_!==x)throw new De("Error locator degree does not match number of roots");return b}findErrorMagnitudes(h,x){const b=x.length,_=new Int32Array(b),j=this.field;for(let A=0;A<b;A++){const I=j.inverse(x[A]);let B=1;for(let X=0;X<b;X++)if(A!==X){const oe=j.multiply(x[X],I),pe=(oe&1)===0?oe|1:oe&-2;B=j.multiply(B,pe)}_[A]=j.multiply(h.evaluateAt(I),j.inverse(B)),j.getGeneratorBase()!==0&&(_[A]=j.multiply(_[A],I))}return _}}var st;(function(xe){xe[xe.UPPER=0]="UPPER",xe[xe.LOWER=1]="LOWER",xe[xe.MIXED=2]="MIXED",xe[xe.DIGIT=3]="DIGIT",xe[xe.PUNCT=4]="PUNCT",xe[xe.BINARY=5]="BINARY"})(st||(st={}));class dt{decode(h){this.ddata=h;let x=h.getBits(),b=this.extractBits(x),_=this.correctBits(b),j=dt.convertBoolArrayToByteArray(_),A=dt.getEncodedData(_),I=new se(j,A,null,null);return I.setNumBits(_.length),I}static highLevelDecode(h){return this.getEncodedData(h)}static getEncodedData(h){let x=h.length,b=st.UPPER,_=st.UPPER,j="",A=0;for(;A<x;)if(_===st.BINARY){if(x-A<5)break;let I=dt.readCode(h,A,5);if(A+=5,I===0){if(x-A<11)break;I=dt.readCode(h,A,11)+31,A+=11}for(let B=0;B<I;B++){if(x-A<8){A=x;break}const X=dt.readCode(h,A,8);j+=K.castAsNonUtf8Char(X),A+=8}_=b}else{let I=_===st.DIGIT?4:5;if(x-A<I)break;let B=dt.readCode(h,A,I);A+=I;let X=dt.getCharacter(_,B);X.startsWith("CTRL_")?(b=_,_=dt.getTable(X.charAt(5)),X.charAt(6)==="L"&&(b=_)):(j+=X,_=b)}return j}static getTable(h){switch(h){case"L":return st.LOWER;case"P":return st.PUNCT;case"M":return st.MIXED;case"D":return st.DIGIT;case"B":return st.BINARY;case"U":default:return st.UPPER}}static getCharacter(h,x){switch(h){case st.UPPER:return dt.UPPER_TABLE[x];case st.LOWER:return dt.LOWER_TABLE[x];case st.MIXED:return dt.MIXED_TABLE[x];case st.PUNCT:return dt.PUNCT_TABLE[x];case st.DIGIT:return dt.DIGIT_TABLE[x];default:throw new ye("Bad table")}}correctBits(h){let x,b;this.ddata.getNbLayers()<=2?(b=6,x=Te.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(b=8,x=Te.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(b=10,x=Te.AZTEC_DATA_10):(b=12,x=Te.AZTEC_DATA_12);let _=this.ddata.getNbDatablocks(),j=h.length/b;if(j<_)throw new R;let A=h.length%b,I=new Int32Array(j);for(let Ae=0;Ae<j;Ae++,A+=b)I[Ae]=dt.readCode(h,A,b);try{new rt(x).decode(I,j-_)}catch(Ae){throw new R(Ae)}let B=(1<<b)-1,X=0;for(let Ae=0;Ae<_;Ae++){let ze=I[Ae];if(ze===0||ze===B)throw new R;(ze===1||ze===B-1)&&X++}let oe=new Array(_*b-X),pe=0;for(let Ae=0;Ae<_;Ae++){let ze=I[Ae];if(ze===1||ze===B-1)oe.fill(ze>1,pe,pe+b-1),pe+=b-1;else for(let Xe=b-1;Xe>=0;--Xe)oe[pe++]=(ze&1<<Xe)!==0}return oe}extractBits(h){let x=this.ddata.isCompact(),b=this.ddata.getNbLayers(),_=(x?11:14)+b*4,j=new Int32Array(_),A=new Array(this.totalBitsInLayer(b,x));if(x)for(let I=0;I<j.length;I++)j[I]=I;else{let I=_+1+2*E.truncDivision(E.truncDivision(_,2)-1,15),B=_/2,X=E.truncDivision(I,2);for(let oe=0;oe<B;oe++){let pe=oe+E.truncDivision(oe,15);j[B-oe-1]=X-pe-1,j[B+oe]=X+pe+1}}for(let I=0,B=0;I<b;I++){let X=(b-I)*4+(x?9:12),oe=I*2,pe=_-1-oe;for(let Ae=0;Ae<X;Ae++){let ze=Ae*2;for(let Xe=0;Xe<2;Xe++)A[B+ze+Xe]=h.get(j[oe+Xe],j[oe+Ae]),A[B+2*X+ze+Xe]=h.get(j[oe+Ae],j[pe-Xe]),A[B+4*X+ze+Xe]=h.get(j[pe-Xe],j[pe-Ae]),A[B+6*X+ze+Xe]=h.get(j[pe-Ae],j[oe+Xe])}B+=X*8}return A}static readCode(h,x,b){let _=0;for(let j=x;j<x+b;j++)_<<=1,h[j]&&(_|=1);return _}static readByte(h,x){let b=h.length-x;return b>=8?dt.readCode(h,x,8):dt.readCode(h,x,b)<<8-b}static convertBoolArrayToByteArray(h){let x=new Uint8Array((h.length+7)/8);for(let b=0;b<x.length;b++)x[b]=dt.readByte(h,8*b);return x}totalBitsInLayer(h,x){return((x?88:112)+16*h)*h}}dt.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],dt.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],dt.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],dt.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],dt.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class et{constructor(){}static round(h){return h===NaN?0:h<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:h>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:h+(h<0?-.5:.5)|0}static distance(h,x,b,_){const j=h-b,A=x-_;return Math.sqrt(j*j+A*A)}static sum(h){let x=0;for(let b=0,_=h.length;b!==_;b++){const j=h[b];x+=j}return x}}class lt{static floatToIntBits(h){return h}}lt.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Ve{constructor(h,x){this.x=h,this.y=x}getX(){return this.x}getY(){return this.y}equals(h){if(h instanceof Ve){const x=h;return this.x===x.x&&this.y===x.y}return!1}hashCode(){return 31*lt.floatToIntBits(this.x)+lt.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(h){const x=this.distance(h[0],h[1]),b=this.distance(h[1],h[2]),_=this.distance(h[0],h[2]);let j,A,I;if(b>=x&&b>=_?(A=h[0],j=h[1],I=h[2]):_>=b&&_>=x?(A=h[1],j=h[0],I=h[2]):(A=h[2],j=h[0],I=h[1]),this.crossProductZ(j,A,I)<0){const B=j;j=I,I=B}h[0]=j,h[1]=A,h[2]=I}static distance(h,x){return et.distance(h.x,h.y,x.x,x.y)}static crossProductZ(h,x,b){const _=x.x,j=x.y;return(b.x-_)*(h.y-j)-(b.y-j)*(h.x-_)}}class Vt{constructor(h,x){this.bits=h,this.points=x}getBits(){return this.bits}getPoints(){return this.points}}class Mt extends Vt{constructor(h,x,b,_,j){super(h,x),this.compact=b,this.nbDatablocks=_,this.nbLayers=j}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class mr{constructor(h,x,b,_){this.image=h,this.height=h.getHeight(),this.width=h.getWidth(),x==null&&(x=mr.INIT_SIZE),b==null&&(b=h.getWidth()/2|0),_==null&&(_=h.getHeight()/2|0);const j=x/2|0;if(this.leftInit=b-j,this.rightInit=b+j,this.upInit=_-j,this.downInit=_+j,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new ae}detect(){let h=this.leftInit,x=this.rightInit,b=this.upInit,_=this.downInit,j=!1,A=!0,I=!1,B=!1,X=!1,oe=!1,pe=!1;const Ae=this.width,ze=this.height;for(;A;){A=!1;let Xe=!0;for(;(Xe||!B)&&x<Ae;)Xe=this.containsBlackPoint(b,_,x,!1),Xe?(x++,A=!0,B=!0):B||x++;if(x>=Ae){j=!0;break}let tt=!0;for(;(tt||!X)&&_<ze;)tt=this.containsBlackPoint(h,x,_,!0),tt?(_++,A=!0,X=!0):X||_++;if(_>=ze){j=!0;break}let xt=!0;for(;(xt||!oe)&&h>=0;)xt=this.containsBlackPoint(b,_,h,!1),xt?(h--,A=!0,oe=!0):oe||h--;if(h<0){j=!0;break}let jt=!0;for(;(jt||!pe)&&b>=0;)jt=this.containsBlackPoint(h,x,b,!0),jt?(b--,A=!0,pe=!0):pe||b--;if(b<0){j=!0;break}A&&(I=!0)}if(!j&&I){const Xe=x-h;let tt=null;for(let Ht=1;tt===null&&Ht<Xe;Ht++)tt=this.getBlackPointOnSegment(h,_-Ht,h+Ht,_);if(tt==null)throw new ae;let xt=null;for(let Ht=1;xt===null&&Ht<Xe;Ht++)xt=this.getBlackPointOnSegment(h,b+Ht,h+Ht,b);if(xt==null)throw new ae;let jt=null;for(let Ht=1;jt===null&&Ht<Xe;Ht++)jt=this.getBlackPointOnSegment(x,b+Ht,x-Ht,b);if(jt==null)throw new ae;let qt=null;for(let Ht=1;qt===null&&Ht<Xe;Ht++)qt=this.getBlackPointOnSegment(x,_-Ht,x-Ht,_);if(qt==null)throw new ae;return this.centerEdges(qt,tt,jt,xt)}else throw new ae}getBlackPointOnSegment(h,x,b,_){const j=et.round(et.distance(h,x,b,_)),A=(b-h)/j,I=(_-x)/j,B=this.image;for(let X=0;X<j;X++){const oe=et.round(h+X*A),pe=et.round(x+X*I);if(B.get(oe,pe))return new Ve(oe,pe)}return null}centerEdges(h,x,b,_){const j=h.getX(),A=h.getY(),I=x.getX(),B=x.getY(),X=b.getX(),oe=b.getY(),pe=_.getX(),Ae=_.getY(),ze=mr.CORR;return j<this.width/2?[new Ve(pe-ze,Ae+ze),new Ve(I+ze,B+ze),new Ve(X-ze,oe-ze),new Ve(j+ze,A-ze)]:[new Ve(pe+ze,Ae+ze),new Ve(I+ze,B-ze),new Ve(X-ze,oe+ze),new Ve(j-ze,A-ze)]}containsBlackPoint(h,x,b,_){const j=this.image;if(_){for(let A=h;A<=x;A++)if(j.get(A,b))return!0}else for(let A=h;A<=x;A++)if(j.get(b,A))return!0;return!1}}mr.INIT_SIZE=10,mr.CORR=1;class xr{static checkAndNudgePoints(h,x){const b=h.getWidth(),_=h.getHeight();let j=!0;for(let A=0;A<x.length&&j;A+=2){const I=Math.floor(x[A]),B=Math.floor(x[A+1]);if(I<-1||I>b||B<-1||B>_)throw new ae;j=!1,I===-1?(x[A]=0,j=!0):I===b&&(x[A]=b-1,j=!0),B===-1?(x[A+1]=0,j=!0):B===_&&(x[A+1]=_-1,j=!0)}j=!0;for(let A=x.length-2;A>=0&&j;A-=2){const I=Math.floor(x[A]),B=Math.floor(x[A+1]);if(I<-1||I>b||B<-1||B>_)throw new ae;j=!1,I===-1?(x[A]=0,j=!0):I===b&&(x[A]=b-1,j=!0),B===-1?(x[A+1]=0,j=!0):B===_&&(x[A+1]=_-1,j=!0)}}}class sr{constructor(h,x,b,_,j,A,I,B,X){this.a11=h,this.a21=x,this.a31=b,this.a12=_,this.a22=j,this.a32=A,this.a13=I,this.a23=B,this.a33=X}static quadrilateralToQuadrilateral(h,x,b,_,j,A,I,B,X,oe,pe,Ae,ze,Xe,tt,xt){const jt=sr.quadrilateralToSquare(h,x,b,_,j,A,I,B);return sr.squareToQuadrilateral(X,oe,pe,Ae,ze,Xe,tt,xt).times(jt)}transformPoints(h){const x=h.length,b=this.a11,_=this.a12,j=this.a13,A=this.a21,I=this.a22,B=this.a23,X=this.a31,oe=this.a32,pe=this.a33;for(let Ae=0;Ae<x;Ae+=2){const ze=h[Ae],Xe=h[Ae+1],tt=j*ze+B*Xe+pe;h[Ae]=(b*ze+A*Xe+X)/tt,h[Ae+1]=(_*ze+I*Xe+oe)/tt}}transformPointsWithValues(h,x){const b=this.a11,_=this.a12,j=this.a13,A=this.a21,I=this.a22,B=this.a23,X=this.a31,oe=this.a32,pe=this.a33,Ae=h.length;for(let ze=0;ze<Ae;ze++){const Xe=h[ze],tt=x[ze],xt=j*Xe+B*tt+pe;h[ze]=(b*Xe+A*tt+X)/xt,x[ze]=(_*Xe+I*tt+oe)/xt}}static squareToQuadrilateral(h,x,b,_,j,A,I,B){const X=h-b+j-I,oe=x-_+A-B;if(X===0&&oe===0)return new sr(b-h,j-b,h,_-x,A-_,x,0,0,1);{const pe=b-j,Ae=I-j,ze=_-A,Xe=B-A,tt=pe*Xe-Ae*ze,xt=(X*Xe-Ae*oe)/tt,jt=(pe*oe-X*ze)/tt;return new sr(b-h+xt*b,I-h+jt*I,h,_-x+xt*_,B-x+jt*B,x,xt,jt,1)}}static quadrilateralToSquare(h,x,b,_,j,A,I,B){return sr.squareToQuadrilateral(h,x,b,_,j,A,I,B).buildAdjoint()}buildAdjoint(){return new sr(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(h){return new sr(this.a11*h.a11+this.a21*h.a12+this.a31*h.a13,this.a11*h.a21+this.a21*h.a22+this.a31*h.a23,this.a11*h.a31+this.a21*h.a32+this.a31*h.a33,this.a12*h.a11+this.a22*h.a12+this.a32*h.a13,this.a12*h.a21+this.a22*h.a22+this.a32*h.a23,this.a12*h.a31+this.a22*h.a32+this.a32*h.a33,this.a13*h.a11+this.a23*h.a12+this.a33*h.a13,this.a13*h.a21+this.a23*h.a22+this.a33*h.a23,this.a13*h.a31+this.a23*h.a32+this.a33*h.a33)}}class Ir extends xr{sampleGrid(h,x,b,_,j,A,I,B,X,oe,pe,Ae,ze,Xe,tt,xt,jt,qt,Ht){const Ft=sr.quadrilateralToQuadrilateral(_,j,A,I,B,X,oe,pe,Ae,ze,Xe,tt,xt,jt,qt,Ht);return this.sampleGridWithTransform(h,x,b,Ft)}sampleGridWithTransform(h,x,b,_){if(x<=0||b<=0)throw new ae;const j=new re(x,b),A=new Float32Array(2*x);for(let I=0;I<b;I++){const B=A.length,X=I+.5;for(let oe=0;oe<B;oe+=2)A[oe]=oe/2+.5,A[oe+1]=X;_.transformPoints(A),xr.checkAndNudgePoints(h,A);try{for(let oe=0;oe<B;oe+=2)h.get(Math.floor(A[oe]),Math.floor(A[oe+1]))&&j.set(oe/2,I)}catch{throw new ae}}return j}}class er{static setGridSampler(h){er.gridSampler=h}static getInstance(){return er.gridSampler}}er.gridSampler=new Ir;class Xt{constructor(h,x){this.x=h,this.y=x}toResultPoint(){return new Ve(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class Gt{constructor(h){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=h}detect(){return this.detectMirror(!1)}detectMirror(h){let x=this.getMatrixCenter(),b=this.getBullsEyeCorners(x);if(h){let A=b[0];b[0]=b[2],b[2]=A}this.extractParameters(b);let _=this.sampleGrid(this.image,b[this.shift%4],b[(this.shift+1)%4],b[(this.shift+2)%4],b[(this.shift+3)%4]),j=this.getMatrixCornerPoints(b);return new Mt(_,j,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(h){if(!this.isValidPoint(h[0])||!this.isValidPoint(h[1])||!this.isValidPoint(h[2])||!this.isValidPoint(h[3]))throw new ae;let x=2*this.nbCenterLayers,b=new Int32Array([this.sampleLine(h[0],h[1],x),this.sampleLine(h[1],h[2],x),this.sampleLine(h[2],h[3],x),this.sampleLine(h[3],h[0],x)]);this.shift=this.getRotation(b,x);let _=0;for(let A=0;A<4;A++){let I=b[(this.shift+A)%4];this.compact?(_<<=7,_+=I>>1&127):(_<<=10,_+=(I>>2&992)+(I>>1&31))}let j=this.getCorrectedParameterData(_,this.compact);this.compact?(this.nbLayers=(j>>6)+1,this.nbDataBlocks=(j&63)+1):(this.nbLayers=(j>>11)+1,this.nbDataBlocks=(j&2047)+1)}getRotation(h,x){let b=0;h.forEach((_,j,A)=>{let I=(_>>x-2<<1)+(_&1);b=(b<<3)+I}),b=((b&1)<<11)+(b>>1);for(let _=0;_<4;_++)if(E.bitCount(b^this.EXPECTED_CORNER_BITS[_])<=2)return _;throw new ae}getCorrectedParameterData(h,x){let b,_;x?(b=7,_=2):(b=10,_=4);let j=b-_,A=new Int32Array(b);for(let B=b-1;B>=0;--B)A[B]=h&15,h>>=4;try{new rt(Te.AZTEC_PARAM).decode(A,j)}catch{throw new ae}let I=0;for(let B=0;B<_;B++)I=(I<<4)+A[B];return I}getBullsEyeCorners(h){let x=h,b=h,_=h,j=h,A=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let pe=this.getFirstDifferent(x,A,1,-1),Ae=this.getFirstDifferent(b,A,1,1),ze=this.getFirstDifferent(_,A,-1,1),Xe=this.getFirstDifferent(j,A,-1,-1);if(this.nbCenterLayers>2){let tt=this.distancePoint(Xe,pe)*this.nbCenterLayers/(this.distancePoint(j,x)*(this.nbCenterLayers+2));if(tt<.75||tt>1.25||!this.isWhiteOrBlackRectangle(pe,Ae,ze,Xe))break}x=pe,b=Ae,_=ze,j=Xe,A=!A}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new ae;this.compact=this.nbCenterLayers===5;let I=new Ve(x.getX()+.5,x.getY()-.5),B=new Ve(b.getX()+.5,b.getY()+.5),X=new Ve(_.getX()-.5,_.getY()+.5),oe=new Ve(j.getX()-.5,j.getY()-.5);return this.expandSquare([I,B,X,oe],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let h,x,b,_;try{let I=new mr(this.image).detect();h=I[0],x=I[1],b=I[2],_=I[3]}catch{let B=this.image.getWidth()/2,X=this.image.getHeight()/2;h=this.getFirstDifferent(new Xt(B+7,X-7),!1,1,-1).toResultPoint(),x=this.getFirstDifferent(new Xt(B+7,X+7),!1,1,1).toResultPoint(),b=this.getFirstDifferent(new Xt(B-7,X+7),!1,-1,1).toResultPoint(),_=this.getFirstDifferent(new Xt(B-7,X-7),!1,-1,-1).toResultPoint()}let j=et.round((h.getX()+_.getX()+x.getX()+b.getX())/4),A=et.round((h.getY()+_.getY()+x.getY()+b.getY())/4);try{let I=new mr(this.image,15,j,A).detect();h=I[0],x=I[1],b=I[2],_=I[3]}catch{h=this.getFirstDifferent(new Xt(j+7,A-7),!1,1,-1).toResultPoint(),x=this.getFirstDifferent(new Xt(j+7,A+7),!1,1,1).toResultPoint(),b=this.getFirstDifferent(new Xt(j-7,A+7),!1,-1,1).toResultPoint(),_=this.getFirstDifferent(new Xt(j-7,A-7),!1,-1,-1).toResultPoint()}return j=et.round((h.getX()+_.getX()+x.getX()+b.getX())/4),A=et.round((h.getY()+_.getY()+x.getY()+b.getY())/4),new Xt(j,A)}getMatrixCornerPoints(h){return this.expandSquare(h,2*this.nbCenterLayers,this.getDimension())}sampleGrid(h,x,b,_,j){let A=er.getInstance(),I=this.getDimension(),B=I/2-this.nbCenterLayers,X=I/2+this.nbCenterLayers;return A.sampleGrid(h,I,I,B,B,X,B,X,X,B,X,x.getX(),x.getY(),b.getX(),b.getY(),_.getX(),_.getY(),j.getX(),j.getY())}sampleLine(h,x,b){let _=0,j=this.distanceResultPoint(h,x),A=j/b,I=h.getX(),B=h.getY(),X=A*(x.getX()-h.getX())/j,oe=A*(x.getY()-h.getY())/j;for(let pe=0;pe<b;pe++)this.image.get(et.round(I+pe*X),et.round(B+pe*oe))&&(_|=1<<b-pe-1);return _}isWhiteOrBlackRectangle(h,x,b,_){let j=3;h=new Xt(h.getX()-j,h.getY()+j),x=new Xt(x.getX()-j,x.getY()-j),b=new Xt(b.getX()+j,b.getY()-j),_=new Xt(_.getX()+j,_.getY()+j);let A=this.getColor(_,h);if(A===0)return!1;let I=this.getColor(h,x);return I!==A||(I=this.getColor(x,b),I!==A)?!1:(I=this.getColor(b,_),I===A)}getColor(h,x){let b=this.distancePoint(h,x),_=(x.getX()-h.getX())/b,j=(x.getY()-h.getY())/b,A=0,I=h.getX(),B=h.getY(),X=this.image.get(h.getX(),h.getY()),oe=Math.ceil(b);for(let Ae=0;Ae<oe;Ae++)I+=_,B+=j,this.image.get(et.round(I),et.round(B))!==X&&A++;let pe=A/b;return pe>.1&&pe<.9?0:pe<=.1===X?1:-1}getFirstDifferent(h,x,b,_){let j=h.getX()+b,A=h.getY()+_;for(;this.isValid(j,A)&&this.image.get(j,A)===x;)j+=b,A+=_;for(j-=b,A-=_;this.isValid(j,A)&&this.image.get(j,A)===x;)j+=b;for(j-=b;this.isValid(j,A)&&this.image.get(j,A)===x;)A+=_;return A-=_,new Xt(j,A)}expandSquare(h,x,b){let _=b/(2*x),j=h[0].getX()-h[2].getX(),A=h[0].getY()-h[2].getY(),I=(h[0].getX()+h[2].getX())/2,B=(h[0].getY()+h[2].getY())/2,X=new Ve(I+_*j,B+_*A),oe=new Ve(I-_*j,B-_*A);j=h[1].getX()-h[3].getX(),A=h[1].getY()-h[3].getY(),I=(h[1].getX()+h[3].getX())/2,B=(h[1].getY()+h[3].getY())/2;let pe=new Ve(I+_*j,B+_*A),Ae=new Ve(I-_*j,B-_*A);return[X,pe,oe,Ae]}isValid(h,x){return h>=0&&h<this.image.getWidth()&&x>0&&x<this.image.getHeight()}isValidPoint(h){let x=et.round(h.getX()),b=et.round(h.getY());return this.isValid(x,b)}distancePoint(h,x){return et.distance(h.getX(),h.getY(),x.getX(),x.getY())}distanceResultPoint(h,x){return et.distance(h.getX(),h.getY(),x.getX(),x.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(E.truncDivision(this.nbLayers-4,8)+1)+15}}class ur{decode(h,x=null){let b=null,_=new Gt(h.getBlackMatrix()),j=null,A=null;try{let oe=_.detectMirror(!1);j=oe.getPoints(),this.reportFoundResultPoints(x,j),A=new dt().decode(oe)}catch(oe){b=oe}if(A==null)try{let oe=_.detectMirror(!0);j=oe.getPoints(),this.reportFoundResultPoints(x,j),A=new dt().decode(oe)}catch(oe){throw b??oe}let I=new Y(A.getText(),A.getRawBytes(),A.getNumBits(),j,ee.AZTEC,w.currentTimeMillis()),B=A.getByteSegments();B!=null&&I.putMetadata(me.BYTE_SEGMENTS,B);let X=A.getECLevel();return X!=null&&I.putMetadata(me.ERROR_CORRECTION_LEVEL,X),I}reportFoundResultPoints(h,x){if(h!=null){let b=h.get(W.NEED_RESULT_POINT_CALLBACK);b!=null&&x.forEach((_,j,A)=>{b.foundPossibleResultPoint(_)})}}reset(){}}class wr extends te{constructor(h=500){super(new ur,h)}}class lr{decode(h,x){try{return this.doDecode(h,x)}catch{if(x&&x.get(W.TRY_HARDER)===!0&&h.isRotateSupported()){const j=h.rotateCounterClockwise(),A=this.doDecode(j,x),I=A.getResultMetadata();let B=270;I!==null&&I.get(me.ORIENTATION)===!0&&(B=B+I.get(me.ORIENTATION)%360),A.putMetadata(me.ORIENTATION,B);const X=A.getResultPoints();if(X!==null){const oe=j.getHeight();for(let pe=0;pe<X.length;pe++)X[pe]=new Ve(oe-X[pe].getY()-1,X[pe].getX())}return A}else throw new ae}}reset(){}doDecode(h,x){const b=h.getWidth(),_=h.getHeight();let j=new D(b);const A=x&&x.get(W.TRY_HARDER)===!0,I=Math.max(1,_>>(A?8:5));let B;A?B=_:B=15;const X=Math.trunc(_/2);for(let oe=0;oe<B;oe++){const pe=Math.trunc((oe+1)/2),Ae=(oe&1)===0,ze=X+I*(Ae?pe:-pe);if(ze<0||ze>=_)break;try{j=h.getBlackRow(ze,j)}catch{continue}for(let Xe=0;Xe<2;Xe++){if(Xe===1&&(j.reverse(),x&&x.get(W.NEED_RESULT_POINT_CALLBACK)===!0)){const tt=new Map;x.forEach((xt,jt)=>tt.set(jt,xt)),tt.delete(W.NEED_RESULT_POINT_CALLBACK),x=tt}try{const tt=this.decodeRow(ze,j,x);if(Xe===1){tt.putMetadata(me.ORIENTATION,180);const xt=tt.getResultPoints();xt!==null&&(xt[0]=new Ve(b-xt[0].getX()-1,xt[0].getY()),xt[1]=new Ve(b-xt[1].getX()-1,xt[1].getY()))}return tt}catch{}}}throw new ae}static recordPattern(h,x,b){const _=b.length;for(let X=0;X<_;X++)b[X]=0;const j=h.getSize();if(x>=j)throw new ae;let A=!h.get(x),I=0,B=x;for(;B<j;){if(h.get(B)!==A)b[I]++;else{if(++I===_)break;b[I]=1,A=!A}B++}if(!(I===_||I===_-1&&B===j))throw new ae}static recordPatternInReverse(h,x,b){let _=b.length,j=h.get(x);for(;x>0&&_>=0;)h.get(--x)!==j&&(_--,j=!j);if(_>=0)throw new ae;lr.recordPattern(h,x+1,b)}static patternMatchVariance(h,x,b){const _=h.length;let j=0,A=0;for(let X=0;X<_;X++)j+=h[X],A+=x[X];if(j<A)return Number.POSITIVE_INFINITY;const I=j/A;b*=I;let B=0;for(let X=0;X<_;X++){const oe=h[X],pe=x[X]*I,Ae=oe>pe?oe-pe:pe-oe;if(Ae>b)return Number.POSITIVE_INFINITY;B+=Ae}return B/j}}class mt extends lr{static findStartPattern(h){const x=h.getSize(),b=h.getNextSet(0);let _=0,j=Int32Array.from([0,0,0,0,0,0]),A=b,I=!1;const B=6;for(let X=b;X<x;X++)if(h.get(X)!==I)j[_]++;else{if(_===B-1){let oe=mt.MAX_AVG_VARIANCE,pe=-1;for(let Ae=mt.CODE_START_A;Ae<=mt.CODE_START_C;Ae++){const ze=lr.patternMatchVariance(j,mt.CODE_PATTERNS[Ae],mt.MAX_INDIVIDUAL_VARIANCE);ze<oe&&(oe=ze,pe=Ae)}if(pe>=0&&h.isRange(Math.max(0,A-(X-A)/2),A,!1))return Int32Array.from([A,X,pe]);A+=j[0]+j[1],j=j.slice(2,j.length-1),j[_-1]=0,j[_]=0,_--}else _++;j[_]=1,I=!I}throw new ae}static decodeCode(h,x,b){lr.recordPattern(h,b,x);let _=mt.MAX_AVG_VARIANCE,j=-1;for(let A=0;A<mt.CODE_PATTERNS.length;A++){const I=mt.CODE_PATTERNS[A],B=this.patternMatchVariance(x,I,mt.MAX_INDIVIDUAL_VARIANCE);B<_&&(_=B,j=A)}if(j>=0)return j;throw new ae}decodeRow(h,x,b){const _=b&&b.get(W.ASSUME_GS1)===!0,j=mt.findStartPattern(x),A=j[2];let I=0;const B=new Uint8Array(20);B[I++]=A;let X;switch(A){case mt.CODE_START_A:X=mt.CODE_CODE_A;break;case mt.CODE_START_B:X=mt.CODE_CODE_B;break;case mt.CODE_START_C:X=mt.CODE_CODE_C;break;default:throw new R}let oe=!1,pe=!1,Ae="",ze=j[0],Xe=j[1];const tt=Int32Array.from([0,0,0,0,0,0]);let xt=0,jt=0,qt=A,Ht=0,Ft=!0,nn=!1,pn=!1;for(;!oe;){const qc=pe;switch(pe=!1,xt=jt,jt=mt.decodeCode(x,tt,Xe),B[I++]=jt,jt!==mt.CODE_STOP&&(Ft=!0),jt!==mt.CODE_STOP&&(Ht++,qt+=Ht*jt),ze=Xe,Xe+=tt.reduce((kf,Ad)=>kf+Ad,0),jt){case mt.CODE_START_A:case mt.CODE_START_B:case mt.CODE_START_C:throw new R}switch(X){case mt.CODE_CODE_A:if(jt<64)pn===nn?Ae+=String.fromCharCode(32+jt):Ae+=String.fromCharCode(32+jt+128),pn=!1;else if(jt<96)pn===nn?Ae+=String.fromCharCode(jt-64):Ae+=String.fromCharCode(jt+64),pn=!1;else switch(jt!==mt.CODE_STOP&&(Ft=!1),jt){case mt.CODE_FNC_1:_&&(Ae.length===0?Ae+="]C1":Ae+="");break;case mt.CODE_FNC_2:case mt.CODE_FNC_3:break;case mt.CODE_FNC_4_A:!nn&&pn?(nn=!0,pn=!1):nn&&pn?(nn=!1,pn=!1):pn=!0;break;case mt.CODE_SHIFT:pe=!0,X=mt.CODE_CODE_B;break;case mt.CODE_CODE_B:X=mt.CODE_CODE_B;break;case mt.CODE_CODE_C:X=mt.CODE_CODE_C;break;case mt.CODE_STOP:oe=!0;break}break;case mt.CODE_CODE_B:if(jt<96)pn===nn?Ae+=String.fromCharCode(32+jt):Ae+=String.fromCharCode(32+jt+128),pn=!1;else switch(jt!==mt.CODE_STOP&&(Ft=!1),jt){case mt.CODE_FNC_1:_&&(Ae.length===0?Ae+="]C1":Ae+="");break;case mt.CODE_FNC_2:case mt.CODE_FNC_3:break;case mt.CODE_FNC_4_B:!nn&&pn?(nn=!0,pn=!1):nn&&pn?(nn=!1,pn=!1):pn=!0;break;case mt.CODE_SHIFT:pe=!0,X=mt.CODE_CODE_A;break;case mt.CODE_CODE_A:X=mt.CODE_CODE_A;break;case mt.CODE_CODE_C:X=mt.CODE_CODE_C;break;case mt.CODE_STOP:oe=!0;break}break;case mt.CODE_CODE_C:if(jt<100)jt<10&&(Ae+="0"),Ae+=jt;else switch(jt!==mt.CODE_STOP&&(Ft=!1),jt){case mt.CODE_FNC_1:_&&(Ae.length===0?Ae+="]C1":Ae+="");break;case mt.CODE_CODE_A:X=mt.CODE_CODE_A;break;case mt.CODE_CODE_B:X=mt.CODE_CODE_B;break;case mt.CODE_STOP:oe=!0;break}break}qc&&(X=X===mt.CODE_CODE_A?mt.CODE_CODE_B:mt.CODE_CODE_A)}const Za=Xe-ze;if(Xe=x.getNextUnset(Xe),!x.isRange(Xe,Math.min(x.getSize(),Xe+(Xe-ze)/2),!1))throw new ae;if(qt-=Ht*xt,qt%103!==xt)throw new g;const gi=Ae.length;if(gi===0)throw new ae;gi>0&&Ft&&(X===mt.CODE_CODE_C?Ae=Ae.substring(0,gi-2):Ae=Ae.substring(0,gi-1));const Ys=(j[1]+j[0])/2,ja=ze+Za/2,Zs=B.length,il=new Uint8Array(Zs);for(let qc=0;qc<Zs;qc++)il[qc]=B[qc];const Cd=[new Ve(Ys,h),new Ve(ja,h)];return new Y(Ae,il,0,Cd,ee.CODE_128,new Date().getTime())}}mt.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],mt.MAX_AVG_VARIANCE=.25,mt.MAX_INDIVIDUAL_VARIANCE=.7,mt.CODE_SHIFT=98,mt.CODE_CODE_C=99,mt.CODE_CODE_B=100,mt.CODE_CODE_A=101,mt.CODE_FNC_1=102,mt.CODE_FNC_2=97,mt.CODE_FNC_3=96,mt.CODE_FNC_4_A=101,mt.CODE_FNC_4_B=100,mt.CODE_START_A=103,mt.CODE_START_B=104,mt.CODE_START_C=105,mt.CODE_STOP=106;class kr extends lr{constructor(h=!1,x=!1){super(),this.usingCheckDigit=h,this.extendedMode=x,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(h,x,b){let _=this.counters;_.fill(0),this.decodeRowResult="";let j=kr.findAsteriskPattern(x,_),A=x.getNextSet(j[1]),I=x.getSize(),B,X;do{kr.recordPattern(x,A,_);let tt=kr.toNarrowWidePattern(_);if(tt<0)throw new ae;B=kr.patternToChar(tt),this.decodeRowResult+=B,X=A;for(let xt of _)A+=xt;A=x.getNextSet(A)}while(B!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let oe=0;for(let tt of _)oe+=tt;let pe=A-X-oe;if(A!==I&&pe*2<oe)throw new ae;if(this.usingCheckDigit){let tt=this.decodeRowResult.length-1,xt=0;for(let jt=0;jt<tt;jt++)xt+=kr.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(jt));if(this.decodeRowResult.charAt(tt)!==kr.ALPHABET_STRING.charAt(xt%43))throw new g;this.decodeRowResult=this.decodeRowResult.substring(0,tt)}if(this.decodeRowResult.length===0)throw new ae;let Ae;this.extendedMode?Ae=kr.decodeExtended(this.decodeRowResult):Ae=this.decodeRowResult;let ze=(j[1]+j[0])/2,Xe=X+oe/2;return new Y(Ae,null,0,[new Ve(ze,h),new Ve(Xe,h)],ee.CODE_39,new Date().getTime())}static findAsteriskPattern(h,x){let b=h.getSize(),_=h.getNextSet(0),j=0,A=_,I=!1,B=x.length;for(let X=_;X<b;X++)if(h.get(X)!==I)x[j]++;else{if(j===B-1){if(this.toNarrowWidePattern(x)===kr.ASTERISK_ENCODING&&h.isRange(Math.max(0,A-Math.floor((X-A)/2)),A,!1))return[A,X];A+=x[0]+x[1],x.copyWithin(0,2,2+j-1),x[j-1]=0,x[j]=0,j--}else j++;x[j]=1,I=!I}throw new ae}static toNarrowWidePattern(h){let x=h.length,b=0,_;do{let j=2147483647;for(let B of h)B<j&&B>b&&(j=B);b=j,_=0;let A=0,I=0;for(let B=0;B<x;B++){let X=h[B];X>b&&(I|=1<<x-1-B,_++,A+=X)}if(_===3){for(let B=0;B<x&&_>0;B++){let X=h[B];if(X>b&&(_--,X*2>=A))return-1}return I}}while(_>3);return-1}static patternToChar(h){for(let x=0;x<kr.CHARACTER_ENCODINGS.length;x++)if(kr.CHARACTER_ENCODINGS[x]===h)return kr.ALPHABET_STRING.charAt(x);if(h===kr.ASTERISK_ENCODING)return"*";throw new ae}static decodeExtended(h){let x=h.length,b="";for(let _=0;_<x;_++){let j=h.charAt(_);if(j==="+"||j==="$"||j==="%"||j==="/"){let A=h.charAt(_+1),I="\0";switch(j){case"+":if(A>="A"&&A<="Z")I=String.fromCharCode(A.charCodeAt(0)+32);else throw new R;break;case"$":if(A>="A"&&A<="Z")I=String.fromCharCode(A.charCodeAt(0)-64);else throw new R;break;case"%":if(A>="A"&&A<="E")I=String.fromCharCode(A.charCodeAt(0)-38);else if(A>="F"&&A<="J")I=String.fromCharCode(A.charCodeAt(0)-11);else if(A>="K"&&A<="O")I=String.fromCharCode(A.charCodeAt(0)+16);else if(A>="P"&&A<="T")I=String.fromCharCode(A.charCodeAt(0)+43);else if(A==="U")I="\0";else if(A==="V")I="@";else if(A==="W")I="`";else if(A==="X"||A==="Y"||A==="Z")I="";else throw new R;break;case"/":if(A>="A"&&A<="O")I=String.fromCharCode(A.charCodeAt(0)-32);else if(A==="Z")I=":";else throw new R;break}b+=I,_++}else b+=j}return b}}kr.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",kr.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],kr.ASTERISK_ENCODING=148;class Ke extends lr{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(h,x,b){let _=this.decodeStart(x),j=this.decodeEnd(x),A=new Q;Ke.decodeMiddle(x,_[1],j[0],A);let I=A.toString(),B=null;b!=null&&(B=b.get(W.ALLOWED_LENGTHS)),B==null&&(B=Ke.DEFAULT_ALLOWED_LENGTHS);let X=I.length,oe=!1,pe=0;for(let Xe of B){if(X===Xe){oe=!0;break}Xe>pe&&(pe=Xe)}if(!oe&&X>pe&&(oe=!0),!oe)throw new R;const Ae=[new Ve(_[1],h),new Ve(j[0],h)];return new Y(I,null,0,Ae,ee.ITF,new Date().getTime())}static decodeMiddle(h,x,b,_){let j=new Int32Array(10),A=new Int32Array(5),I=new Int32Array(5);for(j.fill(0),A.fill(0),I.fill(0);x<b;){lr.recordPattern(h,x,j);for(let X=0;X<5;X++){let oe=2*X;A[X]=j[oe],I[X]=j[oe+1]}let B=Ke.decodeDigit(A);_.append(B.toString()),B=this.decodeDigit(I),_.append(B.toString()),j.forEach(function(X){x+=X})}}decodeStart(h){let x=Ke.skipWhiteSpace(h),b=Ke.findGuardPattern(h,x,Ke.START_PATTERN);return this.narrowLineWidth=(b[1]-b[0])/4,this.validateQuietZone(h,b[0]),b}validateQuietZone(h,x){let b=this.narrowLineWidth*10;b=b<x?b:x;for(let _=x-1;b>0&&_>=0&&!h.get(_);_--)b--;if(b!==0)throw new ae}static skipWhiteSpace(h){const x=h.getSize(),b=h.getNextSet(0);if(b===x)throw new ae;return b}decodeEnd(h){h.reverse();try{let x=Ke.skipWhiteSpace(h),b;try{b=Ke.findGuardPattern(h,x,Ke.END_PATTERN_REVERSED[0])}catch(j){j instanceof ae&&(b=Ke.findGuardPattern(h,x,Ke.END_PATTERN_REVERSED[1]))}this.validateQuietZone(h,b[0]);let _=b[0];return b[0]=h.getSize()-b[1],b[1]=h.getSize()-_,b}finally{h.reverse()}}static findGuardPattern(h,x,b){let _=b.length,j=new Int32Array(_),A=h.getSize(),I=!1,B=0,X=x;j.fill(0);for(let oe=x;oe<A;oe++)if(h.get(oe)!==I)j[B]++;else{if(B===_-1){if(lr.patternMatchVariance(j,b,Ke.MAX_INDIVIDUAL_VARIANCE)<Ke.MAX_AVG_VARIANCE)return[X,oe];X+=j[0]+j[1],w.arraycopy(j,2,j,0,B-1),j[B-1]=0,j[B]=0,B--}else B++;j[B]=1,I=!I}throw new ae}static decodeDigit(h){let x=Ke.MAX_AVG_VARIANCE,b=-1,_=Ke.PATTERNS.length;for(let j=0;j<_;j++){let A=Ke.PATTERNS[j],I=lr.patternMatchVariance(h,A,Ke.MAX_INDIVIDUAL_VARIANCE);I<x?(x=I,b=j):I===x&&(b=-1)}if(b>=0)return b%10;throw new ae}}Ke.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],Ke.MAX_AVG_VARIANCE=.38,Ke.MAX_INDIVIDUAL_VARIANCE=.5,Ke.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],Ke.START_PATTERN=Int32Array.from([1,1,1,1]),Ke.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class vt extends lr{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(h){let x=!1,b,_=0,j=Int32Array.from([0,0,0]);for(;!x;){j=Int32Array.from([0,0,0]),b=vt.findGuardPattern(h,_,!1,this.START_END_PATTERN,j);let A=b[0];_=b[1];let I=A-(_-A);I>=0&&(x=h.isRange(I,A,!1))}return b}static checkChecksum(h){return vt.checkStandardUPCEANChecksum(h)}static checkStandardUPCEANChecksum(h){let x=h.length;if(x===0)return!1;let b=parseInt(h.charAt(x-1),10);return vt.getStandardUPCEANChecksum(h.substring(0,x-1))===b}static getStandardUPCEANChecksum(h){let x=h.length,b=0;for(let _=x-1;_>=0;_-=2){let j=h.charAt(_).charCodeAt(0)-48;if(j<0||j>9)throw new R;b+=j}b*=3;for(let _=x-2;_>=0;_-=2){let j=h.charAt(_).charCodeAt(0)-48;if(j<0||j>9)throw new R;b+=j}return(1e3-b)%10}static decodeEnd(h,x){return vt.findGuardPattern(h,x,!1,vt.START_END_PATTERN,new Int32Array(vt.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(h,x,b,_){return this.findGuardPattern(h,x,b,_,new Int32Array(_.length))}static findGuardPattern(h,x,b,_,j){let A=h.getSize();x=b?h.getNextUnset(x):h.getNextSet(x);let I=0,B=x,X=_.length,oe=b;for(let pe=x;pe<A;pe++)if(h.get(pe)!==oe)j[I]++;else{if(I===X-1){if(lr.patternMatchVariance(j,_,vt.MAX_INDIVIDUAL_VARIANCE)<vt.MAX_AVG_VARIANCE)return Int32Array.from([B,pe]);B+=j[0]+j[1];let Ae=j.slice(2,j.length-1);for(let ze=0;ze<I-1;ze++)j[ze]=Ae[ze];j[I-1]=0,j[I]=0,I--}else I++;j[I]=1,oe=!oe}throw new ae}static decodeDigit(h,x,b,_){this.recordPattern(h,b,x);let j=this.MAX_AVG_VARIANCE,A=-1,I=_.length;for(let B=0;B<I;B++){let X=_[B],oe=lr.patternMatchVariance(x,X,vt.MAX_INDIVIDUAL_VARIANCE);oe<j&&(j=oe,A=B)}if(A>=0)return A;throw new ae}}vt.MAX_AVG_VARIANCE=.48,vt.MAX_INDIVIDUAL_VARIANCE=.7,vt.START_END_PATTERN=Int32Array.from([1,1,1]),vt.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),vt.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),vt.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class Kt{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(h,x,b){let _=this.decodeRowStringBuffer,j=this.decodeMiddle(x,b,_),A=_.toString(),I=Kt.parseExtensionString(A),B=[new Ve((b[0]+b[1])/2,h),new Ve(j,h)],X=new Y(A,null,0,B,ee.UPC_EAN_EXTENSION,new Date().getTime());return I!=null&&X.putAllMetadata(I),X}decodeMiddle(h,x,b){let _=this.decodeMiddleCounters;_[0]=0,_[1]=0,_[2]=0,_[3]=0;let j=h.getSize(),A=x[1],I=0;for(let X=0;X<5&&A<j;X++){let oe=vt.decodeDigit(h,_,A,vt.L_AND_G_PATTERNS);b+=String.fromCharCode(48+oe%10);for(let pe of _)A+=pe;oe>=10&&(I|=1<<4-X),X!==4&&(A=h.getNextSet(A),A=h.getNextUnset(A))}if(b.length!==5)throw new ae;let B=this.determineCheckDigit(I);if(Kt.extensionChecksum(b.toString())!==B)throw new ae;return A}static extensionChecksum(h){let x=h.length,b=0;for(let _=x-2;_>=0;_-=2)b+=h.charAt(_).charCodeAt(0)-48;b*=3;for(let _=x-1;_>=0;_-=2)b+=h.charAt(_).charCodeAt(0)-48;return b*=3,b%10}determineCheckDigit(h){for(let x=0;x<10;x++)if(h===this.CHECK_DIGIT_ENCODINGS[x])return x;throw new ae}static parseExtensionString(h){if(h.length!==5)return null;let x=Kt.parseExtension5String(h);return x==null?null:new Map([[me.SUGGESTED_PRICE,x]])}static parseExtension5String(h){let x;switch(h.charAt(0)){case"0":x="";break;case"5":x="$";break;case"9":switch(h){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}x="";break;default:x="";break}let b=parseInt(h.substring(1)),_=(b/100).toString(),j=b%100,A=j<10?"0"+j:j.toString();return x+_+"."+A}}class tr{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(h,x,b){let _=this.decodeRowStringBuffer,j=this.decodeMiddle(x,b,_),A=_.toString(),I=tr.parseExtensionString(A),B=[new Ve((b[0]+b[1])/2,h),new Ve(j,h)],X=new Y(A,null,0,B,ee.UPC_EAN_EXTENSION,new Date().getTime());return I!=null&&X.putAllMetadata(I),X}decodeMiddle(h,x,b){let _=this.decodeMiddleCounters;_[0]=0,_[1]=0,_[2]=0,_[3]=0;let j=h.getSize(),A=x[1],I=0;for(let B=0;B<2&&A<j;B++){let X=vt.decodeDigit(h,_,A,vt.L_AND_G_PATTERNS);b+=String.fromCharCode(48+X%10);for(let oe of _)A+=oe;X>=10&&(I|=1<<1-B),B!==1&&(A=h.getNextSet(A),A=h.getNextUnset(A))}if(b.length!==2)throw new ae;if(parseInt(b.toString())%4!==I)throw new ae;return A}static parseExtensionString(h){return h.length!==2?null:new Map([[me.ISSUE_NUMBER,parseInt(h)]])}}class Pr{static decodeRow(h,x,b){let _=vt.findGuardPattern(x,b,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new Kt().decodeRow(h,x,_)}catch{return new tr().decodeRow(h,x,_)}}}Pr.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class Nr extends vt{constructor(){super(),this.decodeRowStringBuffer="",Nr.L_AND_G_PATTERNS=Nr.L_PATTERNS.map(h=>Int32Array.from(h));for(let h=10;h<20;h++){let x=Nr.L_PATTERNS[h-10],b=new Int32Array(x.length);for(let _=0;_<x.length;_++)b[_]=x[x.length-_-1];Nr.L_AND_G_PATTERNS[h]=b}}decodeRow(h,x,b){let _=Nr.findStartGuardPattern(x),j=b==null?null:b.get(W.NEED_RESULT_POINT_CALLBACK);if(j!=null){const Ft=new Ve((_[0]+_[1])/2,h);j.foundPossibleResultPoint(Ft)}let A=this.decodeMiddle(x,_,this.decodeRowStringBuffer),I=A.rowOffset,B=A.resultString;if(j!=null){const Ft=new Ve(I,h);j.foundPossibleResultPoint(Ft)}let X=this.decodeEnd(x,I);if(j!=null){const Ft=new Ve((X[0]+X[1])/2,h);j.foundPossibleResultPoint(Ft)}let oe=X[1],pe=oe+(oe-X[0]);if(pe>=x.getSize()||!x.isRange(oe,pe,!1))throw new ae;let Ae=B.toString();if(Ae.length<8)throw new R;if(!Nr.checkChecksum(Ae))throw new g;let ze=(_[1]+_[0])/2,Xe=(X[1]+X[0])/2,tt=this.getBarcodeFormat(),xt=[new Ve(ze,h),new Ve(Xe,h)],jt=new Y(Ae,null,0,xt,tt,new Date().getTime()),qt=0;try{let Ft=Pr.decodeRow(h,x,X[1]);jt.putMetadata(me.UPC_EAN_EXTENSION,Ft.getText()),jt.putAllMetadata(Ft.getResultMetadata()),jt.addResultPoints(Ft.getResultPoints()),qt=Ft.getText().length}catch{}let Ht=b==null?null:b.get(W.ALLOWED_EAN_EXTENSIONS);if(Ht!=null){let Ft=!1;for(let nn in Ht)if(qt.toString()===nn){Ft=!0;break}if(!Ft)throw new ae}return jt}decodeEnd(h,x){return Nr.findGuardPattern(h,x,!1,Nr.START_END_PATTERN,new Int32Array(Nr.START_END_PATTERN.length).fill(0))}static checkChecksum(h){return Nr.checkStandardUPCEANChecksum(h)}static checkStandardUPCEANChecksum(h){let x=h.length;if(x===0)return!1;let b=parseInt(h.charAt(x-1),10);return Nr.getStandardUPCEANChecksum(h.substring(0,x-1))===b}static getStandardUPCEANChecksum(h){let x=h.length,b=0;for(let _=x-1;_>=0;_-=2){let j=h.charAt(_).charCodeAt(0)-48;if(j<0||j>9)throw new R;b+=j}b*=3;for(let _=x-2;_>=0;_-=2){let j=h.charAt(_).charCodeAt(0)-48;if(j<0||j>9)throw new R;b+=j}return(1e3-b)%10}}class Ge extends Nr{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(h,x,b){let _=this.decodeMiddleCounters;_[0]=0,_[1]=0,_[2]=0,_[3]=0;let j=h.getSize(),A=x[1],I=0;for(let X=0;X<6&&A<j;X++){let oe=Nr.decodeDigit(h,_,A,Nr.L_AND_G_PATTERNS);b+=String.fromCharCode(48+oe%10);for(let pe of _)A+=pe;oe>=10&&(I|=1<<5-X)}b=Ge.determineFirstDigit(b,I),A=Nr.findGuardPattern(h,A,!0,Nr.MIDDLE_PATTERN,new Int32Array(Nr.MIDDLE_PATTERN.length).fill(0))[1];for(let X=0;X<6&&A<j;X++){let oe=Nr.decodeDigit(h,_,A,Nr.L_PATTERNS);b+=String.fromCharCode(48+oe);for(let pe of _)A+=pe}return{rowOffset:A,resultString:b}}getBarcodeFormat(){return ee.EAN_13}static determineFirstDigit(h,x){for(let b=0;b<10;b++)if(x===this.FIRST_DIGIT_ENCODINGS[b])return h=String.fromCharCode(48+b)+h,h;throw new ae}}Ge.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class Ot extends Nr{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(h,x,b){const _=this.decodeMiddleCounters;_[0]=0,_[1]=0,_[2]=0,_[3]=0;let j=h.getSize(),A=x[1];for(let B=0;B<4&&A<j;B++){let X=Nr.decodeDigit(h,_,A,Nr.L_PATTERNS);b+=String.fromCharCode(48+X);for(let oe of _)A+=oe}A=Nr.findGuardPattern(h,A,!0,Nr.MIDDLE_PATTERN,new Int32Array(Nr.MIDDLE_PATTERN.length).fill(0))[1];for(let B=0;B<4&&A<j;B++){let X=Nr.decodeDigit(h,_,A,Nr.L_PATTERNS);b+=String.fromCharCode(48+X);for(let oe of _)A+=oe}return{rowOffset:A,resultString:b}}getBarcodeFormat(){return ee.EAN_8}}class hr extends Nr{constructor(){super(...arguments),this.ean13Reader=new Ge}getBarcodeFormat(){return ee.UPC_A}decode(h,x){return this.maybeReturnResult(this.ean13Reader.decode(h))}decodeRow(h,x,b){return this.maybeReturnResult(this.ean13Reader.decodeRow(h,x,b))}decodeMiddle(h,x,b){return this.ean13Reader.decodeMiddle(h,x,b)}maybeReturnResult(h){let x=h.getText();if(x.charAt(0)==="0"){let b=new Y(x.substring(1),null,null,h.getResultPoints(),ee.UPC_A);return h.getResultMetadata()!=null&&b.putAllMetadata(h.getResultMetadata()),b}else throw new ae}reset(){this.ean13Reader.reset()}}class $r extends Nr{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(h,x,b){const _=this.decodeMiddleCounters.map(X=>X);_[0]=0,_[1]=0,_[2]=0,_[3]=0;const j=h.getSize();let A=x[1],I=0;for(let X=0;X<6&&A<j;X++){const oe=$r.decodeDigit(h,_,A,$r.L_AND_G_PATTERNS);b+=String.fromCharCode(48+oe%10);for(let pe of _)A+=pe;oe>=10&&(I|=1<<5-X)}let B=$r.determineNumSysAndCheckDigit(b,I);return{rowOffset:A,resultString:B}}decodeEnd(h,x){return $r.findGuardPatternWithoutCounters(h,x,!0,$r.MIDDLE_END_PATTERN)}checkChecksum(h){return Nr.checkChecksum($r.convertUPCEtoUPCA(h))}static determineNumSysAndCheckDigit(h,x){for(let b=0;b<=1;b++)for(let _=0;_<10;_++)if(x===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[b][_]){let j=String.fromCharCode(48+b),A=String.fromCharCode(48+_);return j+h+A}throw ae.getNotFoundInstance()}getBarcodeFormat(){return ee.UPC_E}static convertUPCEtoUPCA(h){const x=h.slice(1,7).split("").map(j=>j.charCodeAt(0)),b=new Q;b.append(h.charAt(0));let _=x[5];switch(_){case 0:case 1:case 2:b.appendChars(x,0,2),b.append(_),b.append("0000"),b.appendChars(x,2,3);break;case 3:b.appendChars(x,0,3),b.append("00000"),b.appendChars(x,3,2);break;case 4:b.appendChars(x,0,4),b.append("00000"),b.append(x[4]);break;default:b.appendChars(x,0,5),b.append("0000"),b.append(_);break}return h.length>=8&&b.append(h.charAt(7)),b.toString()}}$r.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),$r.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class Dr extends lr{constructor(h){super();let x=h==null?null:h.get(W.POSSIBLE_FORMATS),b=[];n(x)?(b.push(new Ge),b.push(new hr),b.push(new Ot),b.push(new $r)):(x.indexOf(ee.EAN_13)>-1&&b.push(new Ge),x.indexOf(ee.UPC_A)>-1&&b.push(new hr),x.indexOf(ee.EAN_8)>-1&&b.push(new Ot),x.indexOf(ee.UPC_E)>-1&&b.push(new $r)),this.readers=b}decodeRow(h,x,b){for(let _ of this.readers)try{const j=_.decodeRow(h,x,b),A=j.getBarcodeFormat()===ee.EAN_13&&j.getText().charAt(0)==="0",I=b==null?null:b.get(W.POSSIBLE_FORMATS),B=I==null||I.includes(ee.UPC_A);if(A&&B){const X=j.getRawBytes(),oe=new Y(j.getText().substring(1),X,X?X.length:null,j.getResultPoints(),ee.UPC_A);return oe.putAllMetadata(j.getResultMetadata()),oe}return j}catch{}throw new ae}reset(){for(let h of this.readers)h.reset()}}class Yt extends lr{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(h,x){for(let b=0;b<x.length;b++)if(lr.patternMatchVariance(h,x[b],Yt.MAX_INDIVIDUAL_VARIANCE)<Yt.MAX_AVG_VARIANCE)return b;throw new ae}static count(h){return et.sum(new Int32Array(h))}static increment(h,x){let b=0,_=x[0];for(let j=1;j<h.length;j++)x[j]>_&&(_=x[j],b=j);h[b]++}static decrement(h,x){let b=0,_=x[0];for(let j=1;j<h.length;j++)x[j]<_&&(_=x[j],b=j);h[b]--}static isFinderPattern(h){let x=h[0]+h[1],b=x+h[2]+h[3],_=x/b;if(_>=Yt.MIN_FINDER_PATTERN_RATIO&&_<=Yt.MAX_FINDER_PATTERN_RATIO){let j=Number.MAX_SAFE_INTEGER,A=Number.MIN_SAFE_INTEGER;for(let I of h)I>A&&(A=I),I<j&&(j=I);return A<10*j}return!1}}Yt.MAX_AVG_VARIANCE=.2,Yt.MAX_INDIVIDUAL_VARIANCE=.45,Yt.MIN_FINDER_PATTERN_RATIO=9.5/12,Yt.MAX_FINDER_PATTERN_RATIO=12.5/14;class Mr{constructor(h,x){this.value=h,this.checksumPortion=x}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(h){if(!(h instanceof Mr))return!1;const x=h;return this.value===x.value&&this.checksumPortion===x.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class We{constructor(h,x,b,_,j){this.value=h,this.startEnd=x,this.value=h,this.startEnd=x,this.resultPoints=new Array,this.resultPoints.push(new Ve(b,j)),this.resultPoints.push(new Ve(_,j))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(h){if(!(h instanceof We))return!1;const x=h;return this.value===x.value}hashCode(){return this.value}}class Qt{constructor(){}static getRSSvalue(h,x,b){let _=0;for(let B of h)_+=B;let j=0,A=0,I=h.length;for(let B=0;B<I-1;B++){let X;for(X=1,A|=1<<B;X<h[B];X++,A&=~(1<<B)){let oe=Qt.combins(_-X-1,I-B-2);if(b&&A===0&&_-X-(I-B-1)>=I-B-1&&(oe-=Qt.combins(_-X-(I-B),I-B-2)),I-B-1>1){let pe=0;for(let Ae=_-X-(I-B-2);Ae>x;Ae--)pe+=Qt.combins(_-X-Ae-1,I-B-3);oe-=pe*(I-1-B)}else _-X>x&&oe--;j+=oe}_-=X}return j}static combins(h,x){let b,_;h-x>x?(_=x,b=h-x):(_=h-x,b=x);let j=1,A=1;for(let I=h;I>b;I--)j*=I,A<=_&&(j/=A,A++);for(;A<=_;)j/=A,A++;return j}}class Cr{static buildBitArray(h){let x=h.length*2-1;h[h.length-1].getRightChar()==null&&(x-=1);let b=12*x,_=new D(b),j=0,I=h[0].getRightChar().getValue();for(let B=11;B>=0;--B)(I&1<<B)!=0&&_.set(j),j++;for(let B=1;B<h.length;++B){let X=h[B],oe=X.getLeftChar().getValue();for(let pe=11;pe>=0;--pe)(oe&1<<pe)!=0&&_.set(j),j++;if(X.getRightChar()!=null){let pe=X.getRightChar().getValue();for(let Ae=11;Ae>=0;--Ae)(pe&1<<Ae)!=0&&_.set(j),j++}}return _}}class gr{constructor(h,x){x?this.decodedInformation=null:(this.finished=h,this.decodedInformation=x)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class _n{constructor(h){this.newPosition=h}getNewPosition(){return this.newPosition}}class Rr extends _n{constructor(h,x){super(h),this.value=x}getValue(){return this.value}isFNC1(){return this.value===Rr.FNC1}}Rr.FNC1="$";class Sn extends _n{constructor(h,x,b){super(h),b?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=x}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class we extends _n{constructor(h,x,b){if(super(h),x<0||x>10||b<0||b>10)throw new R;this.firstDigit=x,this.secondDigit=b}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===we.FNC1}isSecondDigitFNC1(){return this.secondDigit===we.FNC1}isAnyFNC1(){return this.firstDigit===we.FNC1||this.secondDigit===we.FNC1}}we.FNC1=10;class Ne{constructor(){}static parseFieldsInGeneralPurpose(h){if(!h)return null;if(h.length<2)throw new ae;let x=h.substring(0,2);for(let j of Ne.TWO_DIGIT_DATA_LENGTH)if(j[0]===x)return j[1]===Ne.VARIABLE_LENGTH?Ne.processVariableAI(2,j[2],h):Ne.processFixedAI(2,j[1],h);if(h.length<3)throw new ae;let b=h.substring(0,3);for(let j of Ne.THREE_DIGIT_DATA_LENGTH)if(j[0]===b)return j[1]===Ne.VARIABLE_LENGTH?Ne.processVariableAI(3,j[2],h):Ne.processFixedAI(3,j[1],h);for(let j of Ne.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(j[0]===b)return j[1]===Ne.VARIABLE_LENGTH?Ne.processVariableAI(4,j[2],h):Ne.processFixedAI(4,j[1],h);if(h.length<4)throw new ae;let _=h.substring(0,4);for(let j of Ne.FOUR_DIGIT_DATA_LENGTH)if(j[0]===_)return j[1]===Ne.VARIABLE_LENGTH?Ne.processVariableAI(4,j[2],h):Ne.processFixedAI(4,j[1],h);throw new ae}static processFixedAI(h,x,b){if(b.length<h)throw new ae;let _=b.substring(0,h);if(b.length<h+x)throw new ae;let j=b.substring(h,h+x),A=b.substring(h+x),I="("+_+")"+j,B=Ne.parseFieldsInGeneralPurpose(A);return B==null?I:I+B}static processVariableAI(h,x,b){let _=b.substring(0,h),j;b.length<h+x?j=b.length:j=h+x;let A=b.substring(h,j),I=b.substring(j),B="("+_+")"+A,X=Ne.parseFieldsInGeneralPurpose(I);return X==null?B:B+X}}Ne.VARIABLE_LENGTH=[],Ne.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",Ne.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",Ne.VARIABLE_LENGTH,20],["22",Ne.VARIABLE_LENGTH,29],["30",Ne.VARIABLE_LENGTH,8],["37",Ne.VARIABLE_LENGTH,8],["90",Ne.VARIABLE_LENGTH,30],["91",Ne.VARIABLE_LENGTH,30],["92",Ne.VARIABLE_LENGTH,30],["93",Ne.VARIABLE_LENGTH,30],["94",Ne.VARIABLE_LENGTH,30],["95",Ne.VARIABLE_LENGTH,30],["96",Ne.VARIABLE_LENGTH,30],["97",Ne.VARIABLE_LENGTH,3],["98",Ne.VARIABLE_LENGTH,30],["99",Ne.VARIABLE_LENGTH,30]],Ne.THREE_DIGIT_DATA_LENGTH=[["240",Ne.VARIABLE_LENGTH,30],["241",Ne.VARIABLE_LENGTH,30],["242",Ne.VARIABLE_LENGTH,6],["250",Ne.VARIABLE_LENGTH,30],["251",Ne.VARIABLE_LENGTH,30],["253",Ne.VARIABLE_LENGTH,17],["254",Ne.VARIABLE_LENGTH,20],["400",Ne.VARIABLE_LENGTH,30],["401",Ne.VARIABLE_LENGTH,30],["402",17],["403",Ne.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",Ne.VARIABLE_LENGTH,20],["421",Ne.VARIABLE_LENGTH,15],["422",3],["423",Ne.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],Ne.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",Ne.VARIABLE_LENGTH,15],["391",Ne.VARIABLE_LENGTH,18],["392",Ne.VARIABLE_LENGTH,15],["393",Ne.VARIABLE_LENGTH,18],["703",Ne.VARIABLE_LENGTH,30]],Ne.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",Ne.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",Ne.VARIABLE_LENGTH,20],["8003",Ne.VARIABLE_LENGTH,30],["8004",Ne.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",Ne.VARIABLE_LENGTH,30],["8008",Ne.VARIABLE_LENGTH,12],["8018",18],["8020",Ne.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",Ne.VARIABLE_LENGTH,70],["8200",Ne.VARIABLE_LENGTH,70]];class Me{constructor(h){this.buffer=new Q,this.information=h}decodeAllCodes(h,x){let b=x,_=null;do{let j=this.decodeGeneralPurposeField(b,_),A=Ne.parseFieldsInGeneralPurpose(j.getNewString());if(A!=null&&h.append(A),j.isRemaining()?_=""+j.getRemainingValue():_=null,b===j.getNewPosition())break;b=j.getNewPosition()}while(!0);return h.toString()}isStillNumeric(h){if(h+7>this.information.getSize())return h+4<=this.information.getSize();for(let x=h;x<h+3;++x)if(this.information.get(x))return!0;return this.information.get(h+3)}decodeNumeric(h){if(h+7>this.information.getSize()){let j=this.extractNumericValueFromBitArray(h,4);return j===0?new we(this.information.getSize(),we.FNC1,we.FNC1):new we(this.information.getSize(),j-1,we.FNC1)}let x=this.extractNumericValueFromBitArray(h,7),b=(x-8)/11,_=(x-8)%11;return new we(h+7,b,_)}extractNumericValueFromBitArray(h,x){return Me.extractNumericValueFromBitArray(this.information,h,x)}static extractNumericValueFromBitArray(h,x,b){let _=0;for(let j=0;j<b;++j)h.get(x+j)&&(_|=1<<b-j-1);return _}decodeGeneralPurposeField(h,x){this.buffer.setLengthToZero(),x!=null&&this.buffer.append(x),this.current.setPosition(h);let b=this.parseBlocks();return b!=null&&b.isRemaining()?new Sn(this.current.getPosition(),this.buffer.toString(),b.getRemainingValue()):new Sn(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let h,x;do{let b=this.current.getPosition();if(this.current.isAlpha()?(x=this.parseAlphaBlock(),h=x.isFinished()):this.current.isIsoIec646()?(x=this.parseIsoIec646Block(),h=x.isFinished()):(x=this.parseNumericBlock(),h=x.isFinished()),!(b!==this.current.getPosition())&&!h)break}while(!h);return x.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let h=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(h.getNewPosition()),h.isFirstDigitFNC1()){let x;return h.isSecondDigitFNC1()?x=new Sn(this.current.getPosition(),this.buffer.toString()):x=new Sn(this.current.getPosition(),this.buffer.toString(),h.getSecondDigit()),new gr(!0,x)}if(this.buffer.append(h.getFirstDigit()),h.isSecondDigitFNC1()){let x=new Sn(this.current.getPosition(),this.buffer.toString());return new gr(!0,x)}this.buffer.append(h.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new gr(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let h=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(h.getNewPosition()),h.isFNC1()){let x=new Sn(this.current.getPosition(),this.buffer.toString());return new gr(!0,x)}this.buffer.append(h.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new gr(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let h=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(h.getNewPosition()),h.isFNC1()){let x=new Sn(this.current.getPosition(),this.buffer.toString());return new gr(!0,x)}this.buffer.append(h.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new gr(!1)}isStillIsoIec646(h){if(h+5>this.information.getSize())return!1;let x=this.extractNumericValueFromBitArray(h,5);if(x>=5&&x<16)return!0;if(h+7>this.information.getSize())return!1;let b=this.extractNumericValueFromBitArray(h,7);if(b>=64&&b<116)return!0;if(h+8>this.information.getSize())return!1;let _=this.extractNumericValueFromBitArray(h,8);return _>=232&&_<253}decodeIsoIec646(h){let x=this.extractNumericValueFromBitArray(h,5);if(x===15)return new Rr(h+5,Rr.FNC1);if(x>=5&&x<15)return new Rr(h+5,"0"+(x-5));let b=this.extractNumericValueFromBitArray(h,7);if(b>=64&&b<90)return new Rr(h+7,""+(b+1));if(b>=90&&b<116)return new Rr(h+7,""+(b+7));let _=this.extractNumericValueFromBitArray(h,8),j;switch(_){case 232:j="!";break;case 233:j='"';break;case 234:j="%";break;case 235:j="&";break;case 236:j="'";break;case 237:j="(";break;case 238:j=")";break;case 239:j="*";break;case 240:j="+";break;case 241:j=",";break;case 242:j="-";break;case 243:j=".";break;case 244:j="/";break;case 245:j=":";break;case 246:j=";";break;case 247:j="<";break;case 248:j="=";break;case 249:j=">";break;case 250:j="?";break;case 251:j="_";break;case 252:j=" ";break;default:throw new R}return new Rr(h+8,j)}isStillAlpha(h){if(h+5>this.information.getSize())return!1;let x=this.extractNumericValueFromBitArray(h,5);if(x>=5&&x<16)return!0;if(h+6>this.information.getSize())return!1;let b=this.extractNumericValueFromBitArray(h,6);return b>=16&&b<63}decodeAlphanumeric(h){let x=this.extractNumericValueFromBitArray(h,5);if(x===15)return new Rr(h+5,Rr.FNC1);if(x>=5&&x<15)return new Rr(h+5,"0"+(x-5));let b=this.extractNumericValueFromBitArray(h,6);if(b>=32&&b<58)return new Rr(h+6,""+(b+33));let _;switch(b){case 58:_="*";break;case 59:_=",";break;case 60:_="-";break;case 61:_=".";break;case 62:_="/";break;default:throw new ye("Decoding invalid alphanumeric value: "+b)}return new Rr(h+6,_)}isAlphaTo646ToAlphaLatch(h){if(h+1>this.information.getSize())return!1;for(let x=0;x<5&&x+h<this.information.getSize();++x)if(x===2){if(!this.information.get(h+2))return!1}else if(this.information.get(h+x))return!1;return!0}isAlphaOr646ToNumericLatch(h){if(h+3>this.information.getSize())return!1;for(let x=h;x<h+3;++x)if(this.information.get(x))return!1;return!0}isNumericToAlphaNumericLatch(h){if(h+1>this.information.getSize())return!1;for(let x=0;x<4&&x+h<this.information.getSize();++x)if(this.information.get(h+x))return!1;return!0}}class le{constructor(h){this.information=h,this.generalDecoder=new Me(h)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class ve extends le{constructor(h){super(h)}encodeCompressedGtin(h,x){h.append("(01)");let b=h.length();h.append("9"),this.encodeCompressedGtinWithoutAI(h,x,b)}encodeCompressedGtinWithoutAI(h,x,b){for(let _=0;_<4;++_){let j=this.getGeneralDecoder().extractNumericValueFromBitArray(x+10*_,10);j/100===0&&h.append("0"),j/10===0&&h.append("0"),h.append(j)}ve.appendCheckDigit(h,b)}static appendCheckDigit(h,x){let b=0;for(let _=0;_<13;_++){let j=h.charAt(_+x).charCodeAt(0)-48;b+=(_&1)===0?3*j:j}b=10-b%10,b===10&&(b=0),h.append(b)}}ve.GTIN_SIZE=40;class Oe extends ve{constructor(h){super(h)}parseInformation(){let h=new Q;h.append("(01)");let x=h.length(),b=this.getGeneralDecoder().extractNumericValueFromBitArray(Oe.HEADER_SIZE,4);return h.append(b),this.encodeCompressedGtinWithoutAI(h,Oe.HEADER_SIZE+4,x),this.getGeneralDecoder().decodeAllCodes(h,Oe.HEADER_SIZE+44)}}Oe.HEADER_SIZE=4;class nt extends le{constructor(h){super(h)}parseInformation(){let h=new Q;return this.getGeneralDecoder().decodeAllCodes(h,nt.HEADER_SIZE)}}nt.HEADER_SIZE=5;class wt extends ve{constructor(h){super(h)}encodeCompressedWeight(h,x,b){let _=this.getGeneralDecoder().extractNumericValueFromBitArray(x,b);this.addWeightCode(h,_);let j=this.checkWeight(_),A=1e5;for(let I=0;I<5;++I)j/A===0&&h.append("0"),A/=10;h.append(j)}}class ft extends wt{constructor(h){super(h)}parseInformation(){if(this.getInformation().getSize()!=ft.HEADER_SIZE+wt.GTIN_SIZE+ft.WEIGHT_SIZE)throw new ae;let h=new Q;return this.encodeCompressedGtin(h,ft.HEADER_SIZE),this.encodeCompressedWeight(h,ft.HEADER_SIZE+wt.GTIN_SIZE,ft.WEIGHT_SIZE),h.toString()}}ft.HEADER_SIZE=5,ft.WEIGHT_SIZE=15;class ht extends ft{constructor(h){super(h)}addWeightCode(h,x){h.append("(3103)")}checkWeight(h){return h}}class bt extends ft{constructor(h){super(h)}addWeightCode(h,x){x<1e4?h.append("(3202)"):h.append("(3203)")}checkWeight(h){return h<1e4?h:h-1e4}}class Ut extends ve{constructor(h){super(h)}parseInformation(){if(this.getInformation().getSize()<Ut.HEADER_SIZE+ve.GTIN_SIZE)throw new ae;let h=new Q;this.encodeCompressedGtin(h,Ut.HEADER_SIZE);let x=this.getGeneralDecoder().extractNumericValueFromBitArray(Ut.HEADER_SIZE+ve.GTIN_SIZE,Ut.LAST_DIGIT_SIZE);h.append("(392"),h.append(x),h.append(")");let b=this.getGeneralDecoder().decodeGeneralPurposeField(Ut.HEADER_SIZE+ve.GTIN_SIZE+Ut.LAST_DIGIT_SIZE,null);return h.append(b.getNewString()),h.toString()}}Ut.HEADER_SIZE=8,Ut.LAST_DIGIT_SIZE=2;class rr extends ve{constructor(h){super(h)}parseInformation(){if(this.getInformation().getSize()<rr.HEADER_SIZE+ve.GTIN_SIZE)throw new ae;let h=new Q;this.encodeCompressedGtin(h,rr.HEADER_SIZE);let x=this.getGeneralDecoder().extractNumericValueFromBitArray(rr.HEADER_SIZE+ve.GTIN_SIZE,rr.LAST_DIGIT_SIZE);h.append("(393"),h.append(x),h.append(")");let b=this.getGeneralDecoder().extractNumericValueFromBitArray(rr.HEADER_SIZE+ve.GTIN_SIZE+rr.LAST_DIGIT_SIZE,rr.FIRST_THREE_DIGITS_SIZE);b/100==0&&h.append("0"),b/10==0&&h.append("0"),h.append(b);let _=this.getGeneralDecoder().decodeGeneralPurposeField(rr.HEADER_SIZE+ve.GTIN_SIZE+rr.LAST_DIGIT_SIZE+rr.FIRST_THREE_DIGITS_SIZE,null);return h.append(_.getNewString()),h.toString()}}rr.HEADER_SIZE=8,rr.LAST_DIGIT_SIZE=2,rr.FIRST_THREE_DIGITS_SIZE=10;class Jt extends wt{constructor(h,x,b){super(h),this.dateCode=b,this.firstAIdigits=x}parseInformation(){if(this.getInformation().getSize()!=Jt.HEADER_SIZE+Jt.GTIN_SIZE+Jt.WEIGHT_SIZE+Jt.DATE_SIZE)throw new ae;let h=new Q;return this.encodeCompressedGtin(h,Jt.HEADER_SIZE),this.encodeCompressedWeight(h,Jt.HEADER_SIZE+Jt.GTIN_SIZE,Jt.WEIGHT_SIZE),this.encodeCompressedDate(h,Jt.HEADER_SIZE+Jt.GTIN_SIZE+Jt.WEIGHT_SIZE),h.toString()}encodeCompressedDate(h,x){let b=this.getGeneralDecoder().extractNumericValueFromBitArray(x,Jt.DATE_SIZE);if(b==38400)return;h.append("("),h.append(this.dateCode),h.append(")");let _=b%32;b/=32;let j=b%12+1;b/=12;let A=b;A/10==0&&h.append("0"),h.append(A),j/10==0&&h.append("0"),h.append(j),_/10==0&&h.append("0"),h.append(_)}addWeightCode(h,x){h.append("("),h.append(this.firstAIdigits),h.append(x/1e5),h.append(")")}checkWeight(h){return h%1e5}}Jt.HEADER_SIZE=8,Jt.WEIGHT_SIZE=20,Jt.DATE_SIZE=16;function dr(xe){try{if(xe.get(1))return new Oe(xe);if(!xe.get(2))return new nt(xe);switch(Me.extractNumericValueFromBitArray(xe,1,4)){case 4:return new ht(xe);case 5:return new bt(xe)}switch(Me.extractNumericValueFromBitArray(xe,1,5)){case 12:return new Ut(xe);case 13:return new rr(xe)}switch(Me.extractNumericValueFromBitArray(xe,1,7)){case 56:return new Jt(xe,"310","11");case 57:return new Jt(xe,"320","11");case 58:return new Jt(xe,"310","13");case 59:return new Jt(xe,"320","13");case 60:return new Jt(xe,"310","15");case 61:return new Jt(xe,"320","15");case 62:return new Jt(xe,"310","17");case 63:return new Jt(xe,"320","17")}}catch(h){throw console.log(h),new ye("unknown decoder: "+xe)}}class pr{constructor(h,x,b,_){this.leftchar=h,this.rightchar=x,this.finderpattern=b,this.maybeLast=_}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(h,x){return h instanceof pr?pr.equalsOrNull(h.leftchar,x.leftchar)&&pr.equalsOrNull(h.rightchar,x.rightchar)&&pr.equalsOrNull(h.finderpattern,x.finderpattern):!1}static equalsOrNull(h,x){return h===null?x===null:pr.equals(h,x)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class Ar{constructor(h,x,b){this.pairs=h,this.rowNumber=x,this.wasReversed=b}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(h){return this.checkEqualitity(this,h)}toString(){return"{ "+this.pairs+" }"}equals(h,x){return h instanceof Ar?this.checkEqualitity(h,x)&&h.wasReversed===x.wasReversed:!1}checkEqualitity(h,x){if(!h||!x)return;let b;return h.forEach((_,j)=>{x.forEach(A=>{_.getLeftChar().getValue()===A.getLeftChar().getValue()&&_.getRightChar().getValue()===A.getRightChar().getValue()&&_.getFinderPatter().getValue()===A.getFinderPatter().getValue()&&(b=!0)})}),b}}class It extends Yt{constructor(h){super(...arguments),this.pairs=new Array(It.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=h===!0}decodeRow(h,x,b){this.pairs.length=0,this.startFromEven=!1;try{return It.constructResult(this.decodeRow2pairs(h,x))}catch(_){this.verbose&&console.log(_)}return this.pairs.length=0,this.startFromEven=!0,It.constructResult(this.decodeRow2pairs(h,x))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(h,x){let b=!1;for(;!b;)try{this.pairs.push(this.retrieveNextPair(x,this.pairs,h))}catch(j){if(j instanceof ae){if(!this.pairs.length)throw new ae;b=!0}}if(this.checkChecksum())return this.pairs;let _;if(this.rows.length?_=!0:_=!1,this.storeRow(h,!1),_){let j=this.checkRowsBoolean(!1);if(j!=null||(j=this.checkRowsBoolean(!0),j!=null))return j}throw new ae}checkRowsBoolean(h){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,h&&(this.rows=this.rows.reverse());let x=null;try{x=this.checkRows(new Array,0)}catch(b){this.verbose&&console.log(b)}return h&&(this.rows=this.rows.reverse()),x}checkRows(h,x){for(let b=x;b<this.rows.length;b++){let _=this.rows[b];this.pairs.length=0;for(let A of h)this.pairs.push(A.getPairs());if(this.pairs.push(_.getPairs()),!It.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let j=new Array(h);j.push(_);try{return this.checkRows(j,b+1)}catch(A){this.verbose&&console.log(A)}}throw new ae}static isValidSequence(h){for(let x of It.FINDER_PATTERN_SEQUENCES){if(h.length>x.length)continue;let b=!0;for(let _=0;_<h.length;_++)if(h[_].getFinderPattern().getValue()!=x[_]){b=!1;break}if(b)return!0}return!1}storeRow(h,x){let b=0,_=!1,j=!1;for(;b<this.rows.length;){let A=this.rows[b];if(A.getRowNumber()>h){j=A.isEquivalent(this.pairs);break}_=A.isEquivalent(this.pairs),b++}j||_||It.isPartialRow(this.pairs,this.rows)||(this.rows.push(b,new Ar(this.pairs,h,x)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(h,x){for(let b of x)if(b.getPairs().length!==h.length){for(let _ of b.getPairs())for(let j of h)if(pr.equals(_,j))break}}static isPartialRow(h,x){for(let b of x){let _=!0;for(let j of h){let A=!1;for(let I of b.getPairs())if(j.equals(I)){A=!0;break}if(!A){_=!1;break}}if(_)return!0}return!1}getRows(){return this.rows}static constructResult(h){let x=Cr.buildBitArray(h),_=dr(x).parseInformation(),j=h[0].getFinderPattern().getResultPoints(),A=h[h.length-1].getFinderPattern().getResultPoints(),I=[j[0],j[1],A[0],A[1]];return new Y(_,null,null,I,ee.RSS_EXPANDED,null)}checkChecksum(){let h=this.pairs.get(0),x=h.getLeftChar(),b=h.getRightChar();if(b==null)return!1;let _=b.getChecksumPortion(),j=2;for(let I=1;I<this.pairs.size();++I){let B=this.pairs.get(I);_+=B.getLeftChar().getChecksumPortion(),j++;let X=B.getRightChar();X!=null&&(_+=X.getChecksumPortion(),j++)}return _%=211,211*(j-4)+_==x.getValue()}static getNextSecondBar(h,x){let b;return h.get(x)?(b=h.getNextUnset(x),b=h.getNextSet(b)):(b=h.getNextSet(x),b=h.getNextUnset(b)),b}retrieveNextPair(h,x,b){let _=x.length%2==0;this.startFromEven&&(_=!_);let j,A=!0,I=-1;do this.findNextPair(h,x,I),j=this.parseFoundFinderPattern(h,b,_),j==null?I=It.getNextSecondBar(h,this.startEnd[0]):A=!1;while(A);let B=this.decodeDataCharacter(h,j,_,!0);if(!this.isEmptyPair(x)&&x[x.length-1].mustBeLast())throw new ae;let X;try{X=this.decodeDataCharacter(h,j,_,!1)}catch(oe){X=null,this.verbose&&console.log(oe)}return new pr(B,X,j,!0)}isEmptyPair(h){return h.length===0}findNextPair(h,x,b){let _=this.getDecodeFinderCounters();_[0]=0,_[1]=0,_[2]=0,_[3]=0;let j=h.getSize(),A;b>=0?A=b:this.isEmptyPair(x)?A=0:A=x[x.length-1].getFinderPattern().getStartEnd()[1];let I=x.length%2!=0;this.startFromEven&&(I=!I);let B=!1;for(;A<j&&(B=!h.get(A),!!B);)A++;let X=0,oe=A;for(let pe=A;pe<j;pe++)if(h.get(pe)!=B)_[X]++;else{if(X==3){if(I&&It.reverseCounters(_),It.isFinderPattern(_)){this.startEnd[0]=oe,this.startEnd[1]=pe;return}I&&It.reverseCounters(_),oe+=_[0]+_[1],_[0]=_[2],_[1]=_[3],_[2]=0,_[3]=0,X--}else X++;_[X]=1,B=!B}throw new ae}static reverseCounters(h){let x=h.length;for(let b=0;b<x/2;++b){let _=h[b];h[b]=h[x-b-1],h[x-b-1]=_}}parseFoundFinderPattern(h,x,b){let _,j,A;if(b){let X=this.startEnd[0]-1;for(;X>=0&&!h.get(X);)X--;X++,_=this.startEnd[0]-X,j=X,A=this.startEnd[1]}else j=this.startEnd[0],A=h.getNextUnset(this.startEnd[1]+1),_=A-this.startEnd[1];let I=this.getDecodeFinderCounters();w.arraycopy(I,0,I,1,I.length-1),I[0]=_;let B;try{B=this.parseFinderValue(I,It.FINDER_PATTERNS)}catch{return null}return new We(B,[j,A],j,A,x)}decodeDataCharacter(h,x,b,_){let j=this.getDataCharacterCounters();for(let ja=0;ja<j.length;ja++)j[ja]=0;if(_)It.recordPatternInReverse(h,x.getStartEnd()[0],j);else{It.recordPattern(h,x.getStartEnd()[1],j);for(let ja=0,Zs=j.length-1;ja<Zs;ja++,Zs--){let il=j[ja];j[ja]=j[Zs],j[Zs]=il}}let A=17,I=et.sum(new Int32Array(j))/A,B=(x.getStartEnd()[1]-x.getStartEnd()[0])/15;if(Math.abs(I-B)/B>.3)throw new ae;let X=this.getOddCounts(),oe=this.getEvenCounts(),pe=this.getOddRoundingErrors(),Ae=this.getEvenRoundingErrors();for(let ja=0;ja<j.length;ja++){let Zs=1*j[ja]/I,il=Zs+.5;if(il<1){if(Zs<.3)throw new ae;il=1}else if(il>8){if(Zs>8.7)throw new ae;il=8}let Cd=ja/2;(ja&1)==0?(X[Cd]=il,pe[Cd]=Zs-il):(oe[Cd]=il,Ae[Cd]=Zs-il)}this.adjustOddEvenCounts(A);let ze=4*x.getValue()+(b?0:2)+(_?0:1)-1,Xe=0,tt=0;for(let ja=X.length-1;ja>=0;ja--){if(It.isNotA1left(x,b,_)){let Zs=It.WEIGHTS[ze][2*ja];tt+=X[ja]*Zs}Xe+=X[ja]}let xt=0;for(let ja=oe.length-1;ja>=0;ja--)if(It.isNotA1left(x,b,_)){let Zs=It.WEIGHTS[ze][2*ja+1];xt+=oe[ja]*Zs}let jt=tt+xt;if((Xe&1)!=0||Xe>13||Xe<4)throw new ae;let qt=(13-Xe)/2,Ht=It.SYMBOL_WIDEST[qt],Ft=9-Ht,nn=Qt.getRSSvalue(X,Ht,!0),pn=Qt.getRSSvalue(oe,Ft,!1),Za=It.EVEN_TOTAL_SUBSET[qt],gi=It.GSUM[qt],Ys=nn*Za+pn+gi;return new Mr(Ys,jt)}static isNotA1left(h,x,b){return!(h.getValue()==0&&x&&b)}adjustOddEvenCounts(h){let x=et.sum(new Int32Array(this.getOddCounts())),b=et.sum(new Int32Array(this.getEvenCounts())),_=!1,j=!1;x>13?j=!0:x<4&&(_=!0);let A=!1,I=!1;b>13?I=!0:b<4&&(A=!0);let B=x+b-h,X=(x&1)==1,oe=(b&1)==0;if(B==1)if(X){if(oe)throw new ae;j=!0}else{if(!oe)throw new ae;I=!0}else if(B==-1)if(X){if(oe)throw new ae;_=!0}else{if(!oe)throw new ae;A=!0}else if(B==0){if(X){if(!oe)throw new ae;x<b?(_=!0,I=!0):(j=!0,A=!0)}else if(oe)throw new ae}else throw new ae;if(_){if(j)throw new ae;It.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(j&&It.decrement(this.getOddCounts(),this.getOddRoundingErrors()),A){if(I)throw new ae;It.increment(this.getEvenCounts(),this.getOddRoundingErrors())}I&&It.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}It.SYMBOL_WIDEST=[7,5,4,3,1],It.EVEN_TOTAL_SUBSET=[4,20,52,104,204],It.GSUM=[0,348,1388,2948,3988],It.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],It.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],It.FINDER_PAT_A=0,It.FINDER_PAT_B=1,It.FINDER_PAT_C=2,It.FINDER_PAT_D=3,It.FINDER_PAT_E=4,It.FINDER_PAT_F=5,It.FINDER_PATTERN_SEQUENCES=[[It.FINDER_PAT_A,It.FINDER_PAT_A],[It.FINDER_PAT_A,It.FINDER_PAT_B,It.FINDER_PAT_B],[It.FINDER_PAT_A,It.FINDER_PAT_C,It.FINDER_PAT_B,It.FINDER_PAT_D],[It.FINDER_PAT_A,It.FINDER_PAT_E,It.FINDER_PAT_B,It.FINDER_PAT_D,It.FINDER_PAT_C],[It.FINDER_PAT_A,It.FINDER_PAT_E,It.FINDER_PAT_B,It.FINDER_PAT_D,It.FINDER_PAT_D,It.FINDER_PAT_F],[It.FINDER_PAT_A,It.FINDER_PAT_E,It.FINDER_PAT_B,It.FINDER_PAT_D,It.FINDER_PAT_E,It.FINDER_PAT_F,It.FINDER_PAT_F],[It.FINDER_PAT_A,It.FINDER_PAT_A,It.FINDER_PAT_B,It.FINDER_PAT_B,It.FINDER_PAT_C,It.FINDER_PAT_C,It.FINDER_PAT_D,It.FINDER_PAT_D],[It.FINDER_PAT_A,It.FINDER_PAT_A,It.FINDER_PAT_B,It.FINDER_PAT_B,It.FINDER_PAT_C,It.FINDER_PAT_C,It.FINDER_PAT_D,It.FINDER_PAT_E,It.FINDER_PAT_E],[It.FINDER_PAT_A,It.FINDER_PAT_A,It.FINDER_PAT_B,It.FINDER_PAT_B,It.FINDER_PAT_C,It.FINDER_PAT_C,It.FINDER_PAT_D,It.FINDER_PAT_E,It.FINDER_PAT_F,It.FINDER_PAT_F],[It.FINDER_PAT_A,It.FINDER_PAT_A,It.FINDER_PAT_B,It.FINDER_PAT_B,It.FINDER_PAT_C,It.FINDER_PAT_D,It.FINDER_PAT_D,It.FINDER_PAT_E,It.FINDER_PAT_E,It.FINDER_PAT_F,It.FINDER_PAT_F]],It.MAX_PAIRS=11;class Un extends Mr{constructor(h,x,b){super(h,x),this.count=0,this.finderPattern=b}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class en extends Yt{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(h,x,b){const _=this.decodePair(x,!1,h,b);en.addOrTally(this.possibleLeftPairs,_),x.reverse();let j=this.decodePair(x,!0,h,b);en.addOrTally(this.possibleRightPairs,j),x.reverse();for(let A of this.possibleLeftPairs)if(A.getCount()>1){for(let I of this.possibleRightPairs)if(I.getCount()>1&&en.checkChecksum(A,I))return en.constructResult(A,I)}throw new ae}static addOrTally(h,x){if(x==null)return;let b=!1;for(let _ of h)if(_.getValue()===x.getValue()){_.incrementCount(),b=!0;break}b||h.push(x)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(h,x){let b=4537077*h.getValue()+x.getValue(),_=new String(b).toString(),j=new Q;for(let X=13-_.length;X>0;X--)j.append("0");j.append(_);let A=0;for(let X=0;X<13;X++){let oe=j.charAt(X).charCodeAt(0)-48;A+=(X&1)===0?3*oe:oe}A=10-A%10,A===10&&(A=0),j.append(A.toString());let I=h.getFinderPattern().getResultPoints(),B=x.getFinderPattern().getResultPoints();return new Y(j.toString(),null,0,[I[0],I[1],B[0],B[1]],ee.RSS_14,new Date().getTime())}static checkChecksum(h,x){let b=(h.getChecksumPortion()+16*x.getChecksumPortion())%79,_=9*h.getFinderPattern().getValue()+x.getFinderPattern().getValue();return _>72&&_--,_>8&&_--,b===_}decodePair(h,x,b,_){try{let j=this.findFinderPattern(h,x),A=this.parseFoundFinderPattern(h,b,x,j),I=_==null?null:_.get(W.NEED_RESULT_POINT_CALLBACK);if(I!=null){let oe=(j[0]+j[1])/2;x&&(oe=h.getSize()-1-oe),I.foundPossibleResultPoint(new Ve(oe,b))}let B=this.decodeDataCharacter(h,A,!0),X=this.decodeDataCharacter(h,A,!1);return new Un(1597*B.getValue()+X.getValue(),B.getChecksumPortion()+4*X.getChecksumPortion(),A)}catch{return null}}decodeDataCharacter(h,x,b){let _=this.getDataCharacterCounters();for(let xt=0;xt<_.length;xt++)_[xt]=0;if(b)lr.recordPatternInReverse(h,x.getStartEnd()[0],_);else{lr.recordPattern(h,x.getStartEnd()[1]+1,_);for(let xt=0,jt=_.length-1;xt<jt;xt++,jt--){let qt=_[xt];_[xt]=_[jt],_[jt]=qt}}let j=b?16:15,A=et.sum(new Int32Array(_))/j,I=this.getOddCounts(),B=this.getEvenCounts(),X=this.getOddRoundingErrors(),oe=this.getEvenRoundingErrors();for(let xt=0;xt<_.length;xt++){let jt=_[xt]/A,qt=Math.floor(jt+.5);qt<1?qt=1:qt>8&&(qt=8);let Ht=Math.floor(xt/2);(xt&1)===0?(I[Ht]=qt,X[Ht]=jt-qt):(B[Ht]=qt,oe[Ht]=jt-qt)}this.adjustOddEvenCounts(b,j);let pe=0,Ae=0;for(let xt=I.length-1;xt>=0;xt--)Ae*=9,Ae+=I[xt],pe+=I[xt];let ze=0,Xe=0;for(let xt=B.length-1;xt>=0;xt--)ze*=9,ze+=B[xt],Xe+=B[xt];let tt=Ae+3*ze;if(b){if((pe&1)!==0||pe>12||pe<4)throw new ae;let xt=(12-pe)/2,jt=en.OUTSIDE_ODD_WIDEST[xt],qt=9-jt,Ht=Qt.getRSSvalue(I,jt,!1),Ft=Qt.getRSSvalue(B,qt,!0),nn=en.OUTSIDE_EVEN_TOTAL_SUBSET[xt],pn=en.OUTSIDE_GSUM[xt];return new Mr(Ht*nn+Ft+pn,tt)}else{if((Xe&1)!==0||Xe>10||Xe<4)throw new ae;let xt=(10-Xe)/2,jt=en.INSIDE_ODD_WIDEST[xt],qt=9-jt,Ht=Qt.getRSSvalue(I,jt,!0),Ft=Qt.getRSSvalue(B,qt,!1),nn=en.INSIDE_ODD_TOTAL_SUBSET[xt],pn=en.INSIDE_GSUM[xt];return new Mr(Ft*nn+Ht+pn,tt)}}findFinderPattern(h,x){let b=this.getDecodeFinderCounters();b[0]=0,b[1]=0,b[2]=0,b[3]=0;let _=h.getSize(),j=!1,A=0;for(;A<_&&(j=!h.get(A),x!==j);)A++;let I=0,B=A;for(let X=A;X<_;X++)if(h.get(X)!==j)b[I]++;else{if(I===3){if(Yt.isFinderPattern(b))return[B,X];B+=b[0]+b[1],b[0]=b[2],b[1]=b[3],b[2]=0,b[3]=0,I--}else I++;b[I]=1,j=!j}throw new ae}parseFoundFinderPattern(h,x,b,_){let j=h.get(_[0]),A=_[0]-1;for(;A>=0&&j!==h.get(A);)A--;A++;const I=_[0]-A,B=this.getDecodeFinderCounters(),X=new Int32Array(B.length);w.arraycopy(B,0,X,1,B.length-1),X[0]=I;const oe=this.parseFinderValue(X,en.FINDER_PATTERNS);let pe=A,Ae=_[1];return b&&(pe=h.getSize()-1-pe,Ae=h.getSize()-1-Ae),new We(oe,[A,_[1]],pe,Ae,x)}adjustOddEvenCounts(h,x){let b=et.sum(new Int32Array(this.getOddCounts())),_=et.sum(new Int32Array(this.getEvenCounts())),j=!1,A=!1,I=!1,B=!1;h?(b>12?A=!0:b<4&&(j=!0),_>12?B=!0:_<4&&(I=!0)):(b>11?A=!0:b<5&&(j=!0),_>10?B=!0:_<4&&(I=!0));let X=b+_-x,oe=(b&1)===(h?1:0),pe=(_&1)===1;if(X===1)if(oe){if(pe)throw new ae;A=!0}else{if(!pe)throw new ae;B=!0}else if(X===-1)if(oe){if(pe)throw new ae;j=!0}else{if(!pe)throw new ae;I=!0}else if(X===0){if(oe){if(!pe)throw new ae;b<_?(j=!0,B=!0):(A=!0,I=!0)}else if(pe)throw new ae}else throw new ae;if(j){if(A)throw new ae;Yt.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(A&&Yt.decrement(this.getOddCounts(),this.getOddRoundingErrors()),I){if(B)throw new ae;Yt.increment(this.getEvenCounts(),this.getOddRoundingErrors())}B&&Yt.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}en.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],en.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],en.OUTSIDE_GSUM=[0,161,961,2015,2715],en.INSIDE_GSUM=[0,336,1036,1516],en.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],en.INSIDE_ODD_WIDEST=[2,4,6,8],en.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class Na extends lr{constructor(h,x){super(),this.readers=[],this.verbose=x===!0;const b=h?h.get(W.POSSIBLE_FORMATS):null,_=h&&h.get(W.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;b?((b.includes(ee.EAN_13)||b.includes(ee.UPC_A)||b.includes(ee.EAN_8)||b.includes(ee.UPC_E))&&this.readers.push(new Dr(h)),b.includes(ee.CODE_39)&&this.readers.push(new kr(_)),b.includes(ee.CODE_128)&&this.readers.push(new mt),b.includes(ee.ITF)&&this.readers.push(new Ke),b.includes(ee.RSS_14)&&this.readers.push(new en),b.includes(ee.RSS_EXPANDED)&&this.readers.push(new It(this.verbose))):(this.readers.push(new Dr(h)),this.readers.push(new kr),this.readers.push(new Dr(h)),this.readers.push(new mt),this.readers.push(new Ke),this.readers.push(new en),this.readers.push(new It(this.verbose)))}decodeRow(h,x,b){for(let _=0;_<this.readers.length;_++)try{return this.readers[_].decodeRow(h,x,b)}catch{}throw new ae}reset(){this.readers.forEach(h=>h.reset())}}class La extends te{constructor(h=500,x){super(new Na(x),h,x)}}class cn{constructor(h,x,b){this.ecCodewords=h,this.ecBlocks=[x],b&&this.ecBlocks.push(b)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class An{constructor(h,x){this.count=h,this.dataCodewords=x}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class On{constructor(h,x,b,_,j,A){this.versionNumber=h,this.symbolSizeRows=x,this.symbolSizeColumns=b,this.dataRegionSizeRows=_,this.dataRegionSizeColumns=j,this.ecBlocks=A;let I=0;const B=A.getECCodewords(),X=A.getECBlocks();for(let oe of X)I+=oe.getCount()*(oe.getDataCodewords()+B);this.totalCodewords=I}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(h,x){if((h&1)!==0||(x&1)!==0)throw new R;for(let b of On.VERSIONS)if(b.symbolSizeRows===h&&b.symbolSizeColumns===x)return b;throw new R}toString(){return""+this.versionNumber}static buildVersions(){return[new On(1,10,10,8,8,new cn(5,new An(1,3))),new On(2,12,12,10,10,new cn(7,new An(1,5))),new On(3,14,14,12,12,new cn(10,new An(1,8))),new On(4,16,16,14,14,new cn(12,new An(1,12))),new On(5,18,18,16,16,new cn(14,new An(1,18))),new On(6,20,20,18,18,new cn(18,new An(1,22))),new On(7,22,22,20,20,new cn(20,new An(1,30))),new On(8,24,24,22,22,new cn(24,new An(1,36))),new On(9,26,26,24,24,new cn(28,new An(1,44))),new On(10,32,32,14,14,new cn(36,new An(1,62))),new On(11,36,36,16,16,new cn(42,new An(1,86))),new On(12,40,40,18,18,new cn(48,new An(1,114))),new On(13,44,44,20,20,new cn(56,new An(1,144))),new On(14,48,48,22,22,new cn(68,new An(1,174))),new On(15,52,52,24,24,new cn(42,new An(2,102))),new On(16,64,64,14,14,new cn(56,new An(2,140))),new On(17,72,72,16,16,new cn(36,new An(4,92))),new On(18,80,80,18,18,new cn(48,new An(4,114))),new On(19,88,88,20,20,new cn(56,new An(4,144))),new On(20,96,96,22,22,new cn(68,new An(4,174))),new On(21,104,104,24,24,new cn(56,new An(6,136))),new On(22,120,120,18,18,new cn(68,new An(6,175))),new On(23,132,132,20,20,new cn(62,new An(8,163))),new On(24,144,144,22,22,new cn(62,new An(8,156),new An(2,155))),new On(25,8,18,6,16,new cn(7,new An(1,5))),new On(26,8,32,6,14,new cn(11,new An(1,10))),new On(27,12,26,10,24,new cn(14,new An(1,16))),new On(28,12,36,10,16,new cn(18,new An(1,22))),new On(29,16,36,14,16,new cn(24,new An(1,32))),new On(30,16,48,14,22,new cn(28,new An(1,49)))]}}On.VERSIONS=On.buildVersions();class is{constructor(h){const x=h.getHeight();if(x<8||x>144||(x&1)!==0)throw new R;this.version=is.readVersion(h),this.mappingBitMatrix=this.extractDataRegion(h),this.readMappingMatrix=new re(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(h){const x=h.getHeight(),b=h.getWidth();return On.getVersionForDimensions(x,b)}readCodewords(){const h=new Int8Array(this.version.getTotalCodewords());let x=0,b=4,_=0;const j=this.mappingBitMatrix.getHeight(),A=this.mappingBitMatrix.getWidth();let I=!1,B=!1,X=!1,oe=!1;do if(b===j&&_===0&&!I)h[x++]=this.readCorner1(j,A)&255,b-=2,_+=2,I=!0;else if(b===j-2&&_===0&&(A&3)!==0&&!B)h[x++]=this.readCorner2(j,A)&255,b-=2,_+=2,B=!0;else if(b===j+4&&_===2&&(A&7)===0&&!X)h[x++]=this.readCorner3(j,A)&255,b-=2,_+=2,X=!0;else if(b===j-2&&_===0&&(A&7)===4&&!oe)h[x++]=this.readCorner4(j,A)&255,b-=2,_+=2,oe=!0;else{do b<j&&_>=0&&!this.readMappingMatrix.get(_,b)&&(h[x++]=this.readUtah(b,_,j,A)&255),b-=2,_+=2;while(b>=0&&_<A);b+=1,_+=3;do b>=0&&_<A&&!this.readMappingMatrix.get(_,b)&&(h[x++]=this.readUtah(b,_,j,A)&255),b+=2,_-=2;while(b<j&&_>=0);b+=3,_+=1}while(b<j||_<A);if(x!==this.version.getTotalCodewords())throw new R;return h}readModule(h,x,b,_){return h<0&&(h+=b,x+=4-(b+4&7)),x<0&&(x+=_,h+=4-(_+4&7)),this.readMappingMatrix.set(x,h),this.mappingBitMatrix.get(x,h)}readUtah(h,x,b,_){let j=0;return this.readModule(h-2,x-2,b,_)&&(j|=1),j<<=1,this.readModule(h-2,x-1,b,_)&&(j|=1),j<<=1,this.readModule(h-1,x-2,b,_)&&(j|=1),j<<=1,this.readModule(h-1,x-1,b,_)&&(j|=1),j<<=1,this.readModule(h-1,x,b,_)&&(j|=1),j<<=1,this.readModule(h,x-2,b,_)&&(j|=1),j<<=1,this.readModule(h,x-1,b,_)&&(j|=1),j<<=1,this.readModule(h,x,b,_)&&(j|=1),j}readCorner1(h,x){let b=0;return this.readModule(h-1,0,h,x)&&(b|=1),b<<=1,this.readModule(h-1,1,h,x)&&(b|=1),b<<=1,this.readModule(h-1,2,h,x)&&(b|=1),b<<=1,this.readModule(0,x-2,h,x)&&(b|=1),b<<=1,this.readModule(0,x-1,h,x)&&(b|=1),b<<=1,this.readModule(1,x-1,h,x)&&(b|=1),b<<=1,this.readModule(2,x-1,h,x)&&(b|=1),b<<=1,this.readModule(3,x-1,h,x)&&(b|=1),b}readCorner2(h,x){let b=0;return this.readModule(h-3,0,h,x)&&(b|=1),b<<=1,this.readModule(h-2,0,h,x)&&(b|=1),b<<=1,this.readModule(h-1,0,h,x)&&(b|=1),b<<=1,this.readModule(0,x-4,h,x)&&(b|=1),b<<=1,this.readModule(0,x-3,h,x)&&(b|=1),b<<=1,this.readModule(0,x-2,h,x)&&(b|=1),b<<=1,this.readModule(0,x-1,h,x)&&(b|=1),b<<=1,this.readModule(1,x-1,h,x)&&(b|=1),b}readCorner3(h,x){let b=0;return this.readModule(h-1,0,h,x)&&(b|=1),b<<=1,this.readModule(h-1,x-1,h,x)&&(b|=1),b<<=1,this.readModule(0,x-3,h,x)&&(b|=1),b<<=1,this.readModule(0,x-2,h,x)&&(b|=1),b<<=1,this.readModule(0,x-1,h,x)&&(b|=1),b<<=1,this.readModule(1,x-3,h,x)&&(b|=1),b<<=1,this.readModule(1,x-2,h,x)&&(b|=1),b<<=1,this.readModule(1,x-1,h,x)&&(b|=1),b}readCorner4(h,x){let b=0;return this.readModule(h-3,0,h,x)&&(b|=1),b<<=1,this.readModule(h-2,0,h,x)&&(b|=1),b<<=1,this.readModule(h-1,0,h,x)&&(b|=1),b<<=1,this.readModule(0,x-2,h,x)&&(b|=1),b<<=1,this.readModule(0,x-1,h,x)&&(b|=1),b<<=1,this.readModule(1,x-1,h,x)&&(b|=1),b<<=1,this.readModule(2,x-1,h,x)&&(b|=1),b<<=1,this.readModule(3,x-1,h,x)&&(b|=1),b}extractDataRegion(h){const x=this.version.getSymbolSizeRows(),b=this.version.getSymbolSizeColumns();if(h.getHeight()!==x)throw new p("Dimension of bitMatrix must match the version size");const _=this.version.getDataRegionSizeRows(),j=this.version.getDataRegionSizeColumns(),A=x/_|0,I=b/j|0,B=A*_,X=I*j,oe=new re(X,B);for(let pe=0;pe<A;++pe){const Ae=pe*_;for(let ze=0;ze<I;++ze){const Xe=ze*j;for(let tt=0;tt<_;++tt){const xt=pe*(_+2)+1+tt,jt=Ae+tt;for(let qt=0;qt<j;++qt){const Ht=ze*(j+2)+1+qt;if(h.get(Ht,xt)){const Ft=Xe+qt;oe.set(Ft,jt)}}}}}return oe}}class To{constructor(h,x){this.numDataCodewords=h,this.codewords=x}static getDataBlocks(h,x){const b=x.getECBlocks();let _=0;const j=b.getECBlocks();for(let tt of j)_+=tt.getCount();const A=new Array(_);let I=0;for(let tt of j)for(let xt=0;xt<tt.getCount();xt++){const jt=tt.getDataCodewords(),qt=b.getECCodewords()+jt;A[I++]=new To(jt,new Uint8Array(qt))}const X=A[0].codewords.length-b.getECCodewords(),oe=X-1;let pe=0;for(let tt=0;tt<oe;tt++)for(let xt=0;xt<I;xt++)A[xt].codewords[tt]=h[pe++];const Ae=x.getVersionNumber()===24,ze=Ae?8:I;for(let tt=0;tt<ze;tt++)A[tt].codewords[X-1]=h[pe++];const Xe=A[0].codewords.length;for(let tt=X;tt<Xe;tt++)for(let xt=0;xt<I;xt++){const jt=Ae?(xt+8)%I:xt,qt=Ae&&jt>7?tt-1:tt;A[jt].codewords[qt]=h[pe++]}if(pe!==h.length)throw new p;return A}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class ln{constructor(h){this.bytes=h,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(h){if(h<1||h>32||h>this.available())throw new p(""+h);let x=0,b=this.bitOffset,_=this.byteOffset;const j=this.bytes;if(b>0){const A=8-b,I=h<A?h:A,B=A-I,X=255>>8-I<<B;x=(j[_]&X)>>B,h-=I,b+=I,b===8&&(b=0,_++)}if(h>0){for(;h>=8;)x=x<<8|j[_]&255,_++,h-=8;if(h>0){const A=8-h,I=255>>A<<A;x=x<<h|(j[_]&I)>>A,b+=h}}return this.bitOffset=b,this.byteOffset=_,x}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var ta;(function(xe){xe[xe.PAD_ENCODE=0]="PAD_ENCODE",xe[xe.ASCII_ENCODE=1]="ASCII_ENCODE",xe[xe.C40_ENCODE=2]="C40_ENCODE",xe[xe.TEXT_ENCODE=3]="TEXT_ENCODE",xe[xe.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",xe[xe.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",xe[xe.BASE256_ENCODE=6]="BASE256_ENCODE"})(ta||(ta={}));class el{static decode(h){const x=new ln(h),b=new Q,_=new Q,j=new Array;let A=ta.ASCII_ENCODE;do if(A===ta.ASCII_ENCODE)A=this.decodeAsciiSegment(x,b,_);else{switch(A){case ta.C40_ENCODE:this.decodeC40Segment(x,b);break;case ta.TEXT_ENCODE:this.decodeTextSegment(x,b);break;case ta.ANSIX12_ENCODE:this.decodeAnsiX12Segment(x,b);break;case ta.EDIFACT_ENCODE:this.decodeEdifactSegment(x,b);break;case ta.BASE256_ENCODE:this.decodeBase256Segment(x,b,j);break;default:throw new R}A=ta.ASCII_ENCODE}while(A!==ta.PAD_ENCODE&&x.available()>0);return _.length()>0&&b.append(_.toString()),new se(h,b.toString(),j.length===0?null:j,null)}static decodeAsciiSegment(h,x,b){let _=!1;do{let j=h.readBits(8);if(j===0)throw new R;if(j<=128)return _&&(j+=128),x.append(String.fromCharCode(j-1)),ta.ASCII_ENCODE;if(j===129)return ta.PAD_ENCODE;if(j<=229){const A=j-130;A<10&&x.append("0"),x.append(""+A)}else switch(j){case 230:return ta.C40_ENCODE;case 231:return ta.BASE256_ENCODE;case 232:x.append("");break;case 233:case 234:break;case 235:_=!0;break;case 236:x.append("[)>05"),b.insert(0,"");break;case 237:x.append("[)>06"),b.insert(0,"");break;case 238:return ta.ANSIX12_ENCODE;case 239:return ta.TEXT_ENCODE;case 240:return ta.EDIFACT_ENCODE;case 241:break;default:if(j!==254||h.available()!==0)throw new R;break}}while(h.available()>0);return ta.ASCII_ENCODE}static decodeC40Segment(h,x){let b=!1;const _=[];let j=0;do{if(h.available()===8)return;const A=h.readBits(8);if(A===254)return;this.parseTwoBytes(A,h.readBits(8),_);for(let I=0;I<3;I++){const B=_[I];switch(j){case 0:if(B<3)j=B+1;else if(B<this.C40_BASIC_SET_CHARS.length){const X=this.C40_BASIC_SET_CHARS[B];b?(x.append(String.fromCharCode(X.charCodeAt(0)+128)),b=!1):x.append(X)}else throw new R;break;case 1:b?(x.append(String.fromCharCode(B+128)),b=!1):x.append(String.fromCharCode(B)),j=0;break;case 2:if(B<this.C40_SHIFT2_SET_CHARS.length){const X=this.C40_SHIFT2_SET_CHARS[B];b?(x.append(String.fromCharCode(X.charCodeAt(0)+128)),b=!1):x.append(X)}else switch(B){case 27:x.append("");break;case 30:b=!0;break;default:throw new R}j=0;break;case 3:b?(x.append(String.fromCharCode(B+224)),b=!1):x.append(String.fromCharCode(B+96)),j=0;break;default:throw new R}}}while(h.available()>0)}static decodeTextSegment(h,x){let b=!1,_=[],j=0;do{if(h.available()===8)return;const A=h.readBits(8);if(A===254)return;this.parseTwoBytes(A,h.readBits(8),_);for(let I=0;I<3;I++){const B=_[I];switch(j){case 0:if(B<3)j=B+1;else if(B<this.TEXT_BASIC_SET_CHARS.length){const X=this.TEXT_BASIC_SET_CHARS[B];b?(x.append(String.fromCharCode(X.charCodeAt(0)+128)),b=!1):x.append(X)}else throw new R;break;case 1:b?(x.append(String.fromCharCode(B+128)),b=!1):x.append(String.fromCharCode(B)),j=0;break;case 2:if(B<this.TEXT_SHIFT2_SET_CHARS.length){const X=this.TEXT_SHIFT2_SET_CHARS[B];b?(x.append(String.fromCharCode(X.charCodeAt(0)+128)),b=!1):x.append(X)}else switch(B){case 27:x.append("");break;case 30:b=!0;break;default:throw new R}j=0;break;case 3:if(B<this.TEXT_SHIFT3_SET_CHARS.length){const X=this.TEXT_SHIFT3_SET_CHARS[B];b?(x.append(String.fromCharCode(X.charCodeAt(0)+128)),b=!1):x.append(X),j=0}else throw new R;break;default:throw new R}}}while(h.available()>0)}static decodeAnsiX12Segment(h,x){const b=[];do{if(h.available()===8)return;const _=h.readBits(8);if(_===254)return;this.parseTwoBytes(_,h.readBits(8),b);for(let j=0;j<3;j++){const A=b[j];switch(A){case 0:x.append("\r");break;case 1:x.append("*");break;case 2:x.append(">");break;case 3:x.append(" ");break;default:if(A<14)x.append(String.fromCharCode(A+44));else if(A<40)x.append(String.fromCharCode(A+51));else throw new R;break}}}while(h.available()>0)}static parseTwoBytes(h,x,b){let _=(h<<8)+x-1,j=Math.floor(_/1600);b[0]=j,_-=j*1600,j=Math.floor(_/40),b[1]=j,b[2]=_-j*40}static decodeEdifactSegment(h,x){do{if(h.available()<=16)return;for(let b=0;b<4;b++){let _=h.readBits(6);if(_===31){const j=8-h.getBitOffset();j!==8&&h.readBits(j);return}(_&32)===0&&(_|=64),x.append(String.fromCharCode(_))}}while(h.available()>0)}static decodeBase256Segment(h,x,b){let _=1+h.getByteOffset();const j=this.unrandomize255State(h.readBits(8),_++);let A;if(j===0?A=h.available()/8|0:j<250?A=j:A=250*(j-249)+this.unrandomize255State(h.readBits(8),_++),A<0)throw new R;const I=new Uint8Array(A);for(let B=0;B<A;B++){if(h.available()<8)throw new R;I[B]=this.unrandomize255State(h.readBits(8),_++)}b.push(I);try{x.append(q.decode(I,K.ISO88591))}catch(B){throw new ye("Platform does not support required encoding: "+B.message)}}static unrandomize255State(h,x){const b=149*x%255+1,_=h-b;return _>=0?_:_+256}}el.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],el.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],el.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],el.TEXT_SHIFT2_SET_CHARS=el.C40_SHIFT2_SET_CHARS,el.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class lo{constructor(){this.rsDecoder=new rt(Te.DATA_MATRIX_FIELD_256)}decode(h){const x=new is(h),b=x.getVersion(),_=x.readCodewords(),j=To.getDataBlocks(_,b);let A=0;for(let X of j)A+=X.getNumDataCodewords();const I=new Uint8Array(A),B=j.length;for(let X=0;X<B;X++){const oe=j[X],pe=oe.getCodewords(),Ae=oe.getNumDataCodewords();this.correctErrors(pe,Ae);for(let ze=0;ze<Ae;ze++)I[ze*B+X]=pe[ze]}return el.decode(I)}correctErrors(h,x){const b=new Int32Array(h);try{this.rsDecoder.decode(b,h.length-x)}catch{throw new g}for(let _=0;_<x;_++)h[_]=b[_]}}class pa{constructor(h){this.image=h,this.rectangleDetector=new mr(this.image)}detect(){const h=this.rectangleDetector.detect();let x=this.detectSolid1(h);if(x=this.detectSolid2(x),x[3]=this.correctTopRight(x),!x[3])throw new ae;x=this.shiftToModuleCenter(x);const b=x[0],_=x[1],j=x[2],A=x[3];let I=this.transitionsBetween(b,A)+1,B=this.transitionsBetween(j,A)+1;(I&1)===1&&(I+=1),(B&1)===1&&(B+=1),4*I<7*B&&4*B<7*I&&(I=B=Math.max(I,B));let X=pa.sampleGrid(this.image,b,_,j,A,I,B);return new Vt(X,[b,_,j,A])}static shiftPoint(h,x,b){let _=(x.getX()-h.getX())/(b+1),j=(x.getY()-h.getY())/(b+1);return new Ve(h.getX()+_,h.getY()+j)}static moveAway(h,x,b){let _=h.getX(),j=h.getY();return _<x?_-=1:_+=1,j<b?j-=1:j+=1,new Ve(_,j)}detectSolid1(h){let x=h[0],b=h[1],_=h[3],j=h[2],A=this.transitionsBetween(x,b),I=this.transitionsBetween(b,_),B=this.transitionsBetween(_,j),X=this.transitionsBetween(j,x),oe=A,pe=[j,x,b,_];return oe>I&&(oe=I,pe[0]=x,pe[1]=b,pe[2]=_,pe[3]=j),oe>B&&(oe=B,pe[0]=b,pe[1]=_,pe[2]=j,pe[3]=x),oe>X&&(pe[0]=_,pe[1]=j,pe[2]=x,pe[3]=b),pe}detectSolid2(h){let x=h[0],b=h[1],_=h[2],j=h[3],A=this.transitionsBetween(x,j),I=pa.shiftPoint(b,_,(A+1)*4),B=pa.shiftPoint(_,b,(A+1)*4),X=this.transitionsBetween(I,x),oe=this.transitionsBetween(B,j);return X<oe?(h[0]=x,h[1]=b,h[2]=_,h[3]=j):(h[0]=b,h[1]=_,h[2]=j,h[3]=x),h}correctTopRight(h){let x=h[0],b=h[1],_=h[2],j=h[3],A=this.transitionsBetween(x,j),I=this.transitionsBetween(b,j),B=pa.shiftPoint(x,b,(I+1)*4),X=pa.shiftPoint(_,b,(A+1)*4);A=this.transitionsBetween(B,j),I=this.transitionsBetween(X,j);let oe=new Ve(j.getX()+(_.getX()-b.getX())/(A+1),j.getY()+(_.getY()-b.getY())/(A+1)),pe=new Ve(j.getX()+(x.getX()-b.getX())/(I+1),j.getY()+(x.getY()-b.getY())/(I+1));if(!this.isValid(oe))return this.isValid(pe)?pe:null;if(!this.isValid(pe))return oe;let Ae=this.transitionsBetween(B,oe)+this.transitionsBetween(X,oe),ze=this.transitionsBetween(B,pe)+this.transitionsBetween(X,pe);return Ae>ze?oe:pe}shiftToModuleCenter(h){let x=h[0],b=h[1],_=h[2],j=h[3],A=this.transitionsBetween(x,j)+1,I=this.transitionsBetween(_,j)+1,B=pa.shiftPoint(x,b,I*4),X=pa.shiftPoint(_,b,A*4);A=this.transitionsBetween(B,j)+1,I=this.transitionsBetween(X,j)+1,(A&1)===1&&(A+=1),(I&1)===1&&(I+=1);let oe=(x.getX()+b.getX()+_.getX()+j.getX())/4,pe=(x.getY()+b.getY()+_.getY()+j.getY())/4;x=pa.moveAway(x,oe,pe),b=pa.moveAway(b,oe,pe),_=pa.moveAway(_,oe,pe),j=pa.moveAway(j,oe,pe);let Ae,ze;return B=pa.shiftPoint(x,b,I*4),B=pa.shiftPoint(B,j,A*4),Ae=pa.shiftPoint(b,x,I*4),Ae=pa.shiftPoint(Ae,_,A*4),X=pa.shiftPoint(_,j,I*4),X=pa.shiftPoint(X,b,A*4),ze=pa.shiftPoint(j,_,I*4),ze=pa.shiftPoint(ze,x,A*4),[B,Ae,X,ze]}isValid(h){return h.getX()>=0&&h.getX()<this.image.getWidth()&&h.getY()>0&&h.getY()<this.image.getHeight()}static sampleGrid(h,x,b,_,j,A,I){return er.getInstance().sampleGrid(h,A,I,.5,.5,A-.5,.5,A-.5,I-.5,.5,I-.5,x.getX(),x.getY(),j.getX(),j.getY(),_.getX(),_.getY(),b.getX(),b.getY())}transitionsBetween(h,x){let b=Math.trunc(h.getX()),_=Math.trunc(h.getY()),j=Math.trunc(x.getX()),A=Math.trunc(x.getY()),I=Math.abs(A-_)>Math.abs(j-b);if(I){let tt=b;b=_,_=tt,tt=j,j=A,A=tt}let B=Math.abs(j-b),X=Math.abs(A-_),oe=-B/2,pe=_<A?1:-1,Ae=b<j?1:-1,ze=0,Xe=this.image.get(I?_:b,I?b:_);for(let tt=b,xt=_;tt!==j;tt+=Ae){let jt=this.image.get(I?xt:tt,I?tt:xt);if(jt!==Xe&&(ze++,Xe=jt),oe+=X,oe>0){if(xt===A)break;xt+=pe,oe-=B}}return ze}}class at{constructor(){this.decoder=new lo}decode(h,x=null){let b,_;if(x!=null&&x.has(W.PURE_BARCODE)){const X=at.extractPureBits(h.getBlackMatrix());b=this.decoder.decode(X),_=at.NO_POINTS}else{const X=new pa(h.getBlackMatrix()).detect();b=this.decoder.decode(X.getBits()),_=X.getPoints()}const j=b.getRawBytes(),A=new Y(b.getText(),j,8*j.length,_,ee.DATA_MATRIX,w.currentTimeMillis()),I=b.getByteSegments();I!=null&&A.putMetadata(me.BYTE_SEGMENTS,I);const B=b.getECLevel();return B!=null&&A.putMetadata(me.ERROR_CORRECTION_LEVEL,B),A}reset(){}static extractPureBits(h){const x=h.getTopLeftOnBit(),b=h.getBottomRightOnBit();if(x==null||b==null)throw new ae;const _=this.moduleSize(x,h);let j=x[1];const A=b[1];let I=x[0];const X=(b[0]-I+1)/_,oe=(A-j+1)/_;if(X<=0||oe<=0)throw new ae;const pe=_/2;j+=pe,I+=pe;const Ae=new re(X,oe);for(let ze=0;ze<oe;ze++){const Xe=j+ze*_;for(let tt=0;tt<X;tt++)h.get(I+tt*_,Xe)&&Ae.set(tt,ze)}return Ae}static moduleSize(h,x){const b=x.getWidth();let _=h[0];const j=h[1];for(;_<b&&x.get(_,j);)_++;if(_===b)throw new ae;const A=_-h[0];if(A===0)throw new ae;return A}}at.NO_POINTS=[];class cr extends te{constructor(h=500){super(new at,h)}}var _r;(function(xe){xe[xe.L=0]="L",xe[xe.M=1]="M",xe[xe.Q=2]="Q",xe[xe.H=3]="H"})(_r||(_r={}));class br{constructor(h,x,b){this.value=h,this.stringValue=x,this.bits=b,br.FOR_BITS.set(b,this),br.FOR_VALUE.set(h,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(h){switch(h){case"L":return br.L;case"M":return br.M;case"Q":return br.Q;case"H":return br.H;default:throw new f(h+"not available")}}toString(){return this.stringValue}equals(h){if(!(h instanceof br))return!1;const x=h;return this.value===x.value}static forBits(h){if(h<0||h>=br.FOR_BITS.size)throw new p;return br.FOR_BITS.get(h)}}br.FOR_BITS=new Map,br.FOR_VALUE=new Map,br.L=new br(_r.L,"L",1),br.M=new br(_r.M,"M",0),br.Q=new br(_r.Q,"Q",3),br.H=new br(_r.H,"H",2);class on{constructor(h){this.errorCorrectionLevel=br.forBits(h>>3&3),this.dataMask=h&7}static numBitsDiffering(h,x){return E.bitCount(h^x)}static decodeFormatInformation(h,x){const b=on.doDecodeFormatInformation(h,x);return b!==null?b:on.doDecodeFormatInformation(h^on.FORMAT_INFO_MASK_QR,x^on.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(h,x){let b=Number.MAX_SAFE_INTEGER,_=0;for(const j of on.FORMAT_INFO_DECODE_LOOKUP){const A=j[0];if(A===h||A===x)return new on(j[1]);let I=on.numBitsDiffering(h,A);I<b&&(_=j[1],b=I),h!==x&&(I=on.numBitsDiffering(x,A),I<b&&(_=j[1],b=I))}return b<=3?new on(_):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(h){if(!(h instanceof on))return!1;const x=h;return this.errorCorrectionLevel===x.errorCorrectionLevel&&this.dataMask===x.dataMask}}on.FORMAT_INFO_MASK_QR=21522,on.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class ct{constructor(h,...x){this.ecCodewordsPerBlock=h,this.ecBlocks=x}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let h=0;const x=this.ecBlocks;for(const b of x)h+=b.getCount();return h}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class Be{constructor(h,x){this.count=h,this.dataCodewords=x}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class vr{constructor(h,x,...b){this.versionNumber=h,this.alignmentPatternCenters=x,this.ecBlocks=b;let _=0;const j=b[0].getECCodewordsPerBlock(),A=b[0].getECBlocks();for(const I of A)_+=I.getCount()*(I.getDataCodewords()+j);this.totalCodewords=_}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(h){return this.ecBlocks[h.getValue()]}static getProvisionalVersionForDimension(h){if(h%4!==1)throw new R;try{return this.getVersionForNumber((h-17)/4)}catch{throw new R}}static getVersionForNumber(h){if(h<1||h>40)throw new p;return vr.VERSIONS[h-1]}static decodeVersionInformation(h){let x=Number.MAX_SAFE_INTEGER,b=0;for(let _=0;_<vr.VERSION_DECODE_INFO.length;_++){const j=vr.VERSION_DECODE_INFO[_];if(j===h)return vr.getVersionForNumber(_+7);const A=on.numBitsDiffering(h,j);A<x&&(b=_+7,x=A)}return x<=3?vr.getVersionForNumber(b):null}buildFunctionPattern(){const h=this.getDimensionForVersion(),x=new re(h);x.setRegion(0,0,9,9),x.setRegion(h-8,0,8,9),x.setRegion(0,h-8,9,8);const b=this.alignmentPatternCenters.length;for(let _=0;_<b;_++){const j=this.alignmentPatternCenters[_]-2;for(let A=0;A<b;A++)_===0&&(A===0||A===b-1)||_===b-1&&A===0||x.setRegion(this.alignmentPatternCenters[A]-2,j,5,5)}return x.setRegion(6,9,1,h-17),x.setRegion(9,6,h-17,1),this.versionNumber>6&&(x.setRegion(h-11,0,3,6),x.setRegion(0,h-11,6,3)),x}toString(){return""+this.versionNumber}}vr.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),vr.VERSIONS=[new vr(1,new Int32Array(0),new ct(7,new Be(1,19)),new ct(10,new Be(1,16)),new ct(13,new Be(1,13)),new ct(17,new Be(1,9))),new vr(2,Int32Array.from([6,18]),new ct(10,new Be(1,34)),new ct(16,new Be(1,28)),new ct(22,new Be(1,22)),new ct(28,new Be(1,16))),new vr(3,Int32Array.from([6,22]),new ct(15,new Be(1,55)),new ct(26,new Be(1,44)),new ct(18,new Be(2,17)),new ct(22,new Be(2,13))),new vr(4,Int32Array.from([6,26]),new ct(20,new Be(1,80)),new ct(18,new Be(2,32)),new ct(26,new Be(2,24)),new ct(16,new Be(4,9))),new vr(5,Int32Array.from([6,30]),new ct(26,new Be(1,108)),new ct(24,new Be(2,43)),new ct(18,new Be(2,15),new Be(2,16)),new ct(22,new Be(2,11),new Be(2,12))),new vr(6,Int32Array.from([6,34]),new ct(18,new Be(2,68)),new ct(16,new Be(4,27)),new ct(24,new Be(4,19)),new ct(28,new Be(4,15))),new vr(7,Int32Array.from([6,22,38]),new ct(20,new Be(2,78)),new ct(18,new Be(4,31)),new ct(18,new Be(2,14),new Be(4,15)),new ct(26,new Be(4,13),new Be(1,14))),new vr(8,Int32Array.from([6,24,42]),new ct(24,new Be(2,97)),new ct(22,new Be(2,38),new Be(2,39)),new ct(22,new Be(4,18),new Be(2,19)),new ct(26,new Be(4,14),new Be(2,15))),new vr(9,Int32Array.from([6,26,46]),new ct(30,new Be(2,116)),new ct(22,new Be(3,36),new Be(2,37)),new ct(20,new Be(4,16),new Be(4,17)),new ct(24,new Be(4,12),new Be(4,13))),new vr(10,Int32Array.from([6,28,50]),new ct(18,new Be(2,68),new Be(2,69)),new ct(26,new Be(4,43),new Be(1,44)),new ct(24,new Be(6,19),new Be(2,20)),new ct(28,new Be(6,15),new Be(2,16))),new vr(11,Int32Array.from([6,30,54]),new ct(20,new Be(4,81)),new ct(30,new Be(1,50),new Be(4,51)),new ct(28,new Be(4,22),new Be(4,23)),new ct(24,new Be(3,12),new Be(8,13))),new vr(12,Int32Array.from([6,32,58]),new ct(24,new Be(2,92),new Be(2,93)),new ct(22,new Be(6,36),new Be(2,37)),new ct(26,new Be(4,20),new Be(6,21)),new ct(28,new Be(7,14),new Be(4,15))),new vr(13,Int32Array.from([6,34,62]),new ct(26,new Be(4,107)),new ct(22,new Be(8,37),new Be(1,38)),new ct(24,new Be(8,20),new Be(4,21)),new ct(22,new Be(12,11),new Be(4,12))),new vr(14,Int32Array.from([6,26,46,66]),new ct(30,new Be(3,115),new Be(1,116)),new ct(24,new Be(4,40),new Be(5,41)),new ct(20,new Be(11,16),new Be(5,17)),new ct(24,new Be(11,12),new Be(5,13))),new vr(15,Int32Array.from([6,26,48,70]),new ct(22,new Be(5,87),new Be(1,88)),new ct(24,new Be(5,41),new Be(5,42)),new ct(30,new Be(5,24),new Be(7,25)),new ct(24,new Be(11,12),new Be(7,13))),new vr(16,Int32Array.from([6,26,50,74]),new ct(24,new Be(5,98),new Be(1,99)),new ct(28,new Be(7,45),new Be(3,46)),new ct(24,new Be(15,19),new Be(2,20)),new ct(30,new Be(3,15),new Be(13,16))),new vr(17,Int32Array.from([6,30,54,78]),new ct(28,new Be(1,107),new Be(5,108)),new ct(28,new Be(10,46),new Be(1,47)),new ct(28,new Be(1,22),new Be(15,23)),new ct(28,new Be(2,14),new Be(17,15))),new vr(18,Int32Array.from([6,30,56,82]),new ct(30,new Be(5,120),new Be(1,121)),new ct(26,new Be(9,43),new Be(4,44)),new ct(28,new Be(17,22),new Be(1,23)),new ct(28,new Be(2,14),new Be(19,15))),new vr(19,Int32Array.from([6,30,58,86]),new ct(28,new Be(3,113),new Be(4,114)),new ct(26,new Be(3,44),new Be(11,45)),new ct(26,new Be(17,21),new Be(4,22)),new ct(26,new Be(9,13),new Be(16,14))),new vr(20,Int32Array.from([6,34,62,90]),new ct(28,new Be(3,107),new Be(5,108)),new ct(26,new Be(3,41),new Be(13,42)),new ct(30,new Be(15,24),new Be(5,25)),new ct(28,new Be(15,15),new Be(10,16))),new vr(21,Int32Array.from([6,28,50,72,94]),new ct(28,new Be(4,116),new Be(4,117)),new ct(26,new Be(17,42)),new ct(28,new Be(17,22),new Be(6,23)),new ct(30,new Be(19,16),new Be(6,17))),new vr(22,Int32Array.from([6,26,50,74,98]),new ct(28,new Be(2,111),new Be(7,112)),new ct(28,new Be(17,46)),new ct(30,new Be(7,24),new Be(16,25)),new ct(24,new Be(34,13))),new vr(23,Int32Array.from([6,30,54,78,102]),new ct(30,new Be(4,121),new Be(5,122)),new ct(28,new Be(4,47),new Be(14,48)),new ct(30,new Be(11,24),new Be(14,25)),new ct(30,new Be(16,15),new Be(14,16))),new vr(24,Int32Array.from([6,28,54,80,106]),new ct(30,new Be(6,117),new Be(4,118)),new ct(28,new Be(6,45),new Be(14,46)),new ct(30,new Be(11,24),new Be(16,25)),new ct(30,new Be(30,16),new Be(2,17))),new vr(25,Int32Array.from([6,32,58,84,110]),new ct(26,new Be(8,106),new Be(4,107)),new ct(28,new Be(8,47),new Be(13,48)),new ct(30,new Be(7,24),new Be(22,25)),new ct(30,new Be(22,15),new Be(13,16))),new vr(26,Int32Array.from([6,30,58,86,114]),new ct(28,new Be(10,114),new Be(2,115)),new ct(28,new Be(19,46),new Be(4,47)),new ct(28,new Be(28,22),new Be(6,23)),new ct(30,new Be(33,16),new Be(4,17))),new vr(27,Int32Array.from([6,34,62,90,118]),new ct(30,new Be(8,122),new Be(4,123)),new ct(28,new Be(22,45),new Be(3,46)),new ct(30,new Be(8,23),new Be(26,24)),new ct(30,new Be(12,15),new Be(28,16))),new vr(28,Int32Array.from([6,26,50,74,98,122]),new ct(30,new Be(3,117),new Be(10,118)),new ct(28,new Be(3,45),new Be(23,46)),new ct(30,new Be(4,24),new Be(31,25)),new ct(30,new Be(11,15),new Be(31,16))),new vr(29,Int32Array.from([6,30,54,78,102,126]),new ct(30,new Be(7,116),new Be(7,117)),new ct(28,new Be(21,45),new Be(7,46)),new ct(30,new Be(1,23),new Be(37,24)),new ct(30,new Be(19,15),new Be(26,16))),new vr(30,Int32Array.from([6,26,52,78,104,130]),new ct(30,new Be(5,115),new Be(10,116)),new ct(28,new Be(19,47),new Be(10,48)),new ct(30,new Be(15,24),new Be(25,25)),new ct(30,new Be(23,15),new Be(25,16))),new vr(31,Int32Array.from([6,30,56,82,108,134]),new ct(30,new Be(13,115),new Be(3,116)),new ct(28,new Be(2,46),new Be(29,47)),new ct(30,new Be(42,24),new Be(1,25)),new ct(30,new Be(23,15),new Be(28,16))),new vr(32,Int32Array.from([6,34,60,86,112,138]),new ct(30,new Be(17,115)),new ct(28,new Be(10,46),new Be(23,47)),new ct(30,new Be(10,24),new Be(35,25)),new ct(30,new Be(19,15),new Be(35,16))),new vr(33,Int32Array.from([6,30,58,86,114,142]),new ct(30,new Be(17,115),new Be(1,116)),new ct(28,new Be(14,46),new Be(21,47)),new ct(30,new Be(29,24),new Be(19,25)),new ct(30,new Be(11,15),new Be(46,16))),new vr(34,Int32Array.from([6,34,62,90,118,146]),new ct(30,new Be(13,115),new Be(6,116)),new ct(28,new Be(14,46),new Be(23,47)),new ct(30,new Be(44,24),new Be(7,25)),new ct(30,new Be(59,16),new Be(1,17))),new vr(35,Int32Array.from([6,30,54,78,102,126,150]),new ct(30,new Be(12,121),new Be(7,122)),new ct(28,new Be(12,47),new Be(26,48)),new ct(30,new Be(39,24),new Be(14,25)),new ct(30,new Be(22,15),new Be(41,16))),new vr(36,Int32Array.from([6,24,50,76,102,128,154]),new ct(30,new Be(6,121),new Be(14,122)),new ct(28,new Be(6,47),new Be(34,48)),new ct(30,new Be(46,24),new Be(10,25)),new ct(30,new Be(2,15),new Be(64,16))),new vr(37,Int32Array.from([6,28,54,80,106,132,158]),new ct(30,new Be(17,122),new Be(4,123)),new ct(28,new Be(29,46),new Be(14,47)),new ct(30,new Be(49,24),new Be(10,25)),new ct(30,new Be(24,15),new Be(46,16))),new vr(38,Int32Array.from([6,32,58,84,110,136,162]),new ct(30,new Be(4,122),new Be(18,123)),new ct(28,new Be(13,46),new Be(32,47)),new ct(30,new Be(48,24),new Be(14,25)),new ct(30,new Be(42,15),new Be(32,16))),new vr(39,Int32Array.from([6,26,54,82,110,138,166]),new ct(30,new Be(20,117),new Be(4,118)),new ct(28,new Be(40,47),new Be(7,48)),new ct(30,new Be(43,24),new Be(22,25)),new ct(30,new Be(10,15),new Be(67,16))),new vr(40,Int32Array.from([6,30,58,86,114,142,170]),new ct(30,new Be(19,118),new Be(6,119)),new ct(28,new Be(18,47),new Be(31,48)),new ct(30,new Be(34,24),new Be(34,25)),new ct(30,new Be(20,15),new Be(61,16)))];var Pn;(function(xe){xe[xe.DATA_MASK_000=0]="DATA_MASK_000",xe[xe.DATA_MASK_001=1]="DATA_MASK_001",xe[xe.DATA_MASK_010=2]="DATA_MASK_010",xe[xe.DATA_MASK_011=3]="DATA_MASK_011",xe[xe.DATA_MASK_100=4]="DATA_MASK_100",xe[xe.DATA_MASK_101=5]="DATA_MASK_101",xe[xe.DATA_MASK_110=6]="DATA_MASK_110",xe[xe.DATA_MASK_111=7]="DATA_MASK_111"})(Pn||(Pn={}));class qa{constructor(h,x){this.value=h,this.isMasked=x}unmaskBitMatrix(h,x){for(let b=0;b<x;b++)for(let _=0;_<x;_++)this.isMasked(b,_)&&h.flip(_,b)}}qa.values=new Map([[Pn.DATA_MASK_000,new qa(Pn.DATA_MASK_000,(xe,h)=>(xe+h&1)===0)],[Pn.DATA_MASK_001,new qa(Pn.DATA_MASK_001,(xe,h)=>(xe&1)===0)],[Pn.DATA_MASK_010,new qa(Pn.DATA_MASK_010,(xe,h)=>h%3===0)],[Pn.DATA_MASK_011,new qa(Pn.DATA_MASK_011,(xe,h)=>(xe+h)%3===0)],[Pn.DATA_MASK_100,new qa(Pn.DATA_MASK_100,(xe,h)=>(Math.floor(xe/2)+Math.floor(h/3)&1)===0)],[Pn.DATA_MASK_101,new qa(Pn.DATA_MASK_101,(xe,h)=>xe*h%6===0)],[Pn.DATA_MASK_110,new qa(Pn.DATA_MASK_110,(xe,h)=>xe*h%6<3)],[Pn.DATA_MASK_111,new qa(Pn.DATA_MASK_111,(xe,h)=>(xe+h+xe*h%3&1)===0)]]);class ls{constructor(h){const x=h.getHeight();if(x<21||(x&3)!==1)throw new R;this.bitMatrix=h}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let h=0;for(let j=0;j<6;j++)h=this.copyBit(j,8,h);h=this.copyBit(7,8,h),h=this.copyBit(8,8,h),h=this.copyBit(8,7,h);for(let j=5;j>=0;j--)h=this.copyBit(8,j,h);const x=this.bitMatrix.getHeight();let b=0;const _=x-7;for(let j=x-1;j>=_;j--)b=this.copyBit(8,j,b);for(let j=x-8;j<x;j++)b=this.copyBit(j,8,b);if(this.parsedFormatInfo=on.decodeFormatInformation(h,b),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new R}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const h=this.bitMatrix.getHeight(),x=Math.floor((h-17)/4);if(x<=6)return vr.getVersionForNumber(x);let b=0;const _=h-11;for(let A=5;A>=0;A--)for(let I=h-9;I>=_;I--)b=this.copyBit(I,A,b);let j=vr.decodeVersionInformation(b);if(j!==null&&j.getDimensionForVersion()===h)return this.parsedVersion=j,j;b=0;for(let A=5;A>=0;A--)for(let I=h-9;I>=_;I--)b=this.copyBit(A,I,b);if(j=vr.decodeVersionInformation(b),j!==null&&j.getDimensionForVersion()===h)return this.parsedVersion=j,j;throw new R}copyBit(h,x,b){return(this.isMirror?this.bitMatrix.get(x,h):this.bitMatrix.get(h,x))?b<<1|1:b<<1}readCodewords(){const h=this.readFormatInformation(),x=this.readVersion(),b=qa.values.get(h.getDataMask()),_=this.bitMatrix.getHeight();b.unmaskBitMatrix(this.bitMatrix,_);const j=x.buildFunctionPattern();let A=!0;const I=new Uint8Array(x.getTotalCodewords());let B=0,X=0,oe=0;for(let pe=_-1;pe>0;pe-=2){pe===6&&pe--;for(let Ae=0;Ae<_;Ae++){const ze=A?_-1-Ae:Ae;for(let Xe=0;Xe<2;Xe++)j.get(pe-Xe,ze)||(oe++,X<<=1,this.bitMatrix.get(pe-Xe,ze)&&(X|=1),oe===8&&(I[B++]=X,oe=0,X=0))}A=!A}if(B!==x.getTotalCodewords())throw new R;return I}remask(){if(this.parsedFormatInfo===null)return;const h=qa.values[this.parsedFormatInfo.getDataMask()],x=this.bitMatrix.getHeight();h.unmaskBitMatrix(this.bitMatrix,x)}setMirror(h){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=h}mirror(){const h=this.bitMatrix;for(let x=0,b=h.getWidth();x<b;x++)for(let _=x+1,j=h.getHeight();_<j;_++)h.get(x,_)!==h.get(_,x)&&(h.flip(_,x),h.flip(x,_))}}class Ai{constructor(h,x){this.numDataCodewords=h,this.codewords=x}static getDataBlocks(h,x,b){if(h.length!==x.getTotalCodewords())throw new p;const _=x.getECBlocksForLevel(b);let j=0;const A=_.getECBlocks();for(const Xe of A)j+=Xe.getCount();const I=new Array(j);let B=0;for(const Xe of A)for(let tt=0;tt<Xe.getCount();tt++){const xt=Xe.getDataCodewords(),jt=_.getECCodewordsPerBlock()+xt;I[B++]=new Ai(xt,new Uint8Array(jt))}const X=I[0].codewords.length;let oe=I.length-1;for(;oe>=0&&I[oe].codewords.length!==X;)oe--;oe++;const pe=X-_.getECCodewordsPerBlock();let Ae=0;for(let Xe=0;Xe<pe;Xe++)for(let tt=0;tt<B;tt++)I[tt].codewords[Xe]=h[Ae++];for(let Xe=oe;Xe<B;Xe++)I[Xe].codewords[pe]=h[Ae++];const ze=I[0].codewords.length;for(let Xe=pe;Xe<ze;Xe++)for(let tt=0;tt<B;tt++){const xt=tt<oe?Xe:Xe+1;I[tt].codewords[xt]=h[Ae++]}return I}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var Qn;(function(xe){xe[xe.TERMINATOR=0]="TERMINATOR",xe[xe.NUMERIC=1]="NUMERIC",xe[xe.ALPHANUMERIC=2]="ALPHANUMERIC",xe[xe.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",xe[xe.BYTE=4]="BYTE",xe[xe.ECI=5]="ECI",xe[xe.KANJI=6]="KANJI",xe[xe.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",xe[xe.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",xe[xe.HANZI=9]="HANZI"})(Qn||(Qn={}));class Lr{constructor(h,x,b,_){this.value=h,this.stringValue=x,this.characterCountBitsForVersions=b,this.bits=_,Lr.FOR_BITS.set(_,this),Lr.FOR_VALUE.set(h,this)}static forBits(h){const x=Lr.FOR_BITS.get(h);if(x===void 0)throw new p;return x}getCharacterCountBits(h){const x=h.getVersionNumber();let b;return x<=9?b=0:x<=26?b=1:b=2,this.characterCountBitsForVersions[b]}getValue(){return this.value}getBits(){return this.bits}equals(h){if(!(h instanceof Lr))return!1;const x=h;return this.value===x.value}toString(){return this.stringValue}}Lr.FOR_BITS=new Map,Lr.FOR_VALUE=new Map,Lr.TERMINATOR=new Lr(Qn.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),Lr.NUMERIC=new Lr(Qn.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),Lr.ALPHANUMERIC=new Lr(Qn.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),Lr.STRUCTURED_APPEND=new Lr(Qn.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),Lr.BYTE=new Lr(Qn.BYTE,"BYTE",Int32Array.from([8,16,16]),4),Lr.ECI=new Lr(Qn.ECI,"ECI",Int32Array.from([0,0,0]),7),Lr.KANJI=new Lr(Qn.KANJI,"KANJI",Int32Array.from([8,10,12]),8),Lr.FNC1_FIRST_POSITION=new Lr(Qn.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),Lr.FNC1_SECOND_POSITION=new Lr(Qn.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),Lr.HANZI=new Lr(Qn.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class na{static decode(h,x,b,_){const j=new ln(h);let A=new Q;const I=new Array;let B=-1,X=-1;try{let oe=null,pe=!1,Ae;do{if(j.available()<4)Ae=Lr.TERMINATOR;else{const ze=j.readBits(4);Ae=Lr.forBits(ze)}switch(Ae){case Lr.TERMINATOR:break;case Lr.FNC1_FIRST_POSITION:case Lr.FNC1_SECOND_POSITION:pe=!0;break;case Lr.STRUCTURED_APPEND:if(j.available()<16)throw new R;B=j.readBits(8),X=j.readBits(8);break;case Lr.ECI:const ze=na.parseECIValue(j);if(oe=U.getCharacterSetECIByValue(ze),oe===null)throw new R;break;case Lr.HANZI:const Xe=j.readBits(4),tt=j.readBits(Ae.getCharacterCountBits(x));Xe===na.GB2312_SUBSET&&na.decodeHanziSegment(j,A,tt);break;default:const xt=j.readBits(Ae.getCharacterCountBits(x));switch(Ae){case Lr.NUMERIC:na.decodeNumericSegment(j,A,xt);break;case Lr.ALPHANUMERIC:na.decodeAlphanumericSegment(j,A,xt,pe);break;case Lr.BYTE:na.decodeByteSegment(j,A,xt,oe,I,_);break;case Lr.KANJI:na.decodeKanjiSegment(j,A,xt);break;default:throw new R}break}}while(Ae!==Lr.TERMINATOR)}catch{throw new R}return new se(h,A.toString(),I.length===0?null:I,b===null?null:b.toString(),B,X)}static decodeHanziSegment(h,x,b){if(b*13>h.available())throw new R;const _=new Uint8Array(2*b);let j=0;for(;b>0;){const A=h.readBits(13);let I=A/96<<8&4294967295|A%96;I<959?I+=41377:I+=42657,_[j]=I>>8&255,_[j+1]=I&255,j+=2,b--}try{x.append(q.decode(_,K.GB2312))}catch(A){throw new R(A)}}static decodeKanjiSegment(h,x,b){if(b*13>h.available())throw new R;const _=new Uint8Array(2*b);let j=0;for(;b>0;){const A=h.readBits(13);let I=A/192<<8&4294967295|A%192;I<7936?I+=33088:I+=49472,_[j]=I>>8,_[j+1]=I,j+=2,b--}try{x.append(q.decode(_,K.SHIFT_JIS))}catch(A){throw new R(A)}}static decodeByteSegment(h,x,b,_,j,A){if(8*b>h.available())throw new R;const I=new Uint8Array(b);for(let X=0;X<b;X++)I[X]=h.readBits(8);let B;_===null?B=K.guessEncoding(I,A):B=_.getName();try{x.append(q.decode(I,B))}catch(X){throw new R(X)}j.push(I)}static toAlphaNumericChar(h){if(h>=na.ALPHANUMERIC_CHARS.length)throw new R;return na.ALPHANUMERIC_CHARS[h]}static decodeAlphanumericSegment(h,x,b,_){const j=x.length();for(;b>1;){if(h.available()<11)throw new R;const A=h.readBits(11);x.append(na.toAlphaNumericChar(Math.floor(A/45))),x.append(na.toAlphaNumericChar(A%45)),b-=2}if(b===1){if(h.available()<6)throw new R;x.append(na.toAlphaNumericChar(h.readBits(6)))}if(_)for(let A=j;A<x.length();A++)x.charAt(A)==="%"&&(A<x.length()-1&&x.charAt(A+1)==="%"?x.deleteCharAt(A+1):x.setCharAt(A,""))}static decodeNumericSegment(h,x,b){for(;b>=3;){if(h.available()<10)throw new R;const _=h.readBits(10);if(_>=1e3)throw new R;x.append(na.toAlphaNumericChar(Math.floor(_/100))),x.append(na.toAlphaNumericChar(Math.floor(_/10)%10)),x.append(na.toAlphaNumericChar(_%10)),b-=3}if(b===2){if(h.available()<7)throw new R;const _=h.readBits(7);if(_>=100)throw new R;x.append(na.toAlphaNumericChar(Math.floor(_/10))),x.append(na.toAlphaNumericChar(_%10))}else if(b===1){if(h.available()<4)throw new R;const _=h.readBits(4);if(_>=10)throw new R;x.append(na.toAlphaNumericChar(_))}}static parseECIValue(h){const x=h.readBits(8);if((x&128)===0)return x&127;if((x&192)===128){const b=h.readBits(8);return(x&63)<<8&4294967295|b}if((x&224)===192){const b=h.readBits(16);return(x&31)<<16&4294967295|b}throw new R}}na.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",na.GB2312_SUBSET=1;class oo{constructor(h){this.mirrored=h}isMirrored(){return this.mirrored}applyMirroredCorrection(h){if(!this.mirrored||h===null||h.length<3)return;const x=h[0];h[0]=h[2],h[2]=x}}class wd{constructor(){this.rsDecoder=new rt(Te.QR_CODE_FIELD_256)}decodeBooleanArray(h,x){return this.decodeBitMatrix(re.parseFromBooleanArray(h),x)}decodeBitMatrix(h,x){const b=new ls(h);let _=null;try{return this.decodeBitMatrixParser(b,x)}catch(j){_=j}try{b.remask(),b.setMirror(!0),b.readVersion(),b.readFormatInformation(),b.mirror();const j=this.decodeBitMatrixParser(b,x);return j.setOther(new oo(!0)),j}catch(j){throw _!==null?_:j}}decodeBitMatrixParser(h,x){const b=h.readVersion(),_=h.readFormatInformation().getErrorCorrectionLevel(),j=h.readCodewords(),A=Ai.getDataBlocks(j,b,_);let I=0;for(const oe of A)I+=oe.getNumDataCodewords();const B=new Uint8Array(I);let X=0;for(const oe of A){const pe=oe.getCodewords(),Ae=oe.getNumDataCodewords();this.correctErrors(pe,Ae);for(let ze=0;ze<Ae;ze++)B[X++]=pe[ze]}return na.decode(B,b,_,x)}correctErrors(h,x){const b=new Int32Array(h);try{this.rsDecoder.decode(b,h.length-x)}catch{throw new g}for(let _=0;_<x;_++)h[_]=b[_]}}class wl extends Ve{constructor(h,x,b){super(h,x),this.estimatedModuleSize=b}aboutEquals(h,x,b){if(Math.abs(x-this.getY())<=h&&Math.abs(b-this.getX())<=h){const _=Math.abs(h-this.estimatedModuleSize);return _<=1||_<=this.estimatedModuleSize}return!1}combineEstimate(h,x,b){const _=(this.getX()+x)/2,j=(this.getY()+h)/2,A=(this.estimatedModuleSize+b)/2;return new wl(_,j,A)}}class tl{constructor(h,x,b,_,j,A,I){this.image=h,this.startX=x,this.startY=b,this.width=_,this.height=j,this.moduleSize=A,this.resultPointCallback=I,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const h=this.startX,x=this.height,b=this.width,_=h+b,j=this.startY+x/2,A=new Int32Array(3),I=this.image;for(let B=0;B<x;B++){const X=j+((B&1)===0?Math.floor((B+1)/2):-Math.floor((B+1)/2));A[0]=0,A[1]=0,A[2]=0;let oe=h;for(;oe<_&&!I.get(oe,X);)oe++;let pe=0;for(;oe<_;){if(I.get(oe,X))if(pe===1)A[1]++;else if(pe===2){if(this.foundPatternCross(A)){const Ae=this.handlePossibleCenter(A,X,oe);if(Ae!==null)return Ae}A[0]=A[2],A[1]=1,A[2]=0,pe=1}else A[++pe]++;else pe===1&&pe++,A[pe]++;oe++}if(this.foundPatternCross(A)){const Ae=this.handlePossibleCenter(A,X,_);if(Ae!==null)return Ae}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new ae}static centerFromEnd(h,x){return x-h[2]-h[1]/2}foundPatternCross(h){const x=this.moduleSize,b=x/2;for(let _=0;_<3;_++)if(Math.abs(x-h[_])>=b)return!1;return!0}crossCheckVertical(h,x,b,_){const j=this.image,A=j.getHeight(),I=this.crossCheckStateCount;I[0]=0,I[1]=0,I[2]=0;let B=h;for(;B>=0&&j.get(x,B)&&I[1]<=b;)I[1]++,B--;if(B<0||I[1]>b)return NaN;for(;B>=0&&!j.get(x,B)&&I[0]<=b;)I[0]++,B--;if(I[0]>b)return NaN;for(B=h+1;B<A&&j.get(x,B)&&I[1]<=b;)I[1]++,B++;if(B===A||I[1]>b)return NaN;for(;B<A&&!j.get(x,B)&&I[2]<=b;)I[2]++,B++;if(I[2]>b)return NaN;const X=I[0]+I[1]+I[2];return 5*Math.abs(X-_)>=2*_?NaN:this.foundPatternCross(I)?tl.centerFromEnd(I,B):NaN}handlePossibleCenter(h,x,b){const _=h[0]+h[1]+h[2],j=tl.centerFromEnd(h,b),A=this.crossCheckVertical(x,j,2*h[1],_);if(!isNaN(A)){const I=(h[0]+h[1]+h[2])/3;for(const X of this.possibleCenters)if(X.aboutEquals(I,A,j))return X.combineEstimate(A,j,I);const B=new wl(j,A,I);this.possibleCenters.push(B),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(B)}return null}}class co extends Ve{constructor(h,x,b,_){super(h,x),this.estimatedModuleSize=b,this.count=_,_===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(h,x,b){if(Math.abs(x-this.getY())<=h&&Math.abs(b-this.getX())<=h){const _=Math.abs(h-this.estimatedModuleSize);return _<=1||_<=this.estimatedModuleSize}return!1}combineEstimate(h,x,b){const _=this.count+1,j=(this.count*this.getX()+x)/_,A=(this.count*this.getY()+h)/_,I=(this.count*this.estimatedModuleSize+b)/_;return new co(j,A,I,_)}}class kd{constructor(h){this.bottomLeft=h[0],this.topLeft=h[1],this.topRight=h[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class Br{constructor(h,x){this.image=h,this.resultPointCallback=x,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=x}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(h){const x=h!=null&&h.get(W.TRY_HARDER)!==void 0,b=h!=null&&h.get(W.PURE_BARCODE)!==void 0,_=this.image,j=_.getHeight(),A=_.getWidth();let I=Math.floor(3*j/(4*Br.MAX_MODULES));(I<Br.MIN_SKIP||x)&&(I=Br.MIN_SKIP);let B=!1;const X=new Int32Array(5);for(let pe=I-1;pe<j&&!B;pe+=I){X[0]=0,X[1]=0,X[2]=0,X[3]=0,X[4]=0;let Ae=0;for(let ze=0;ze<A;ze++)if(_.get(ze,pe))(Ae&1)===1&&Ae++,X[Ae]++;else if((Ae&1)===0)if(Ae===4)if(Br.foundPatternCross(X)){if(this.handlePossibleCenter(X,pe,ze,b)===!0)if(I=2,this.hasSkipped===!0)B=this.haveMultiplyConfirmedCenters();else{const tt=this.findRowSkip();tt>X[2]&&(pe+=tt-X[2]-I,ze=A-1)}else{X[0]=X[2],X[1]=X[3],X[2]=X[4],X[3]=1,X[4]=0,Ae=3;continue}Ae=0,X[0]=0,X[1]=0,X[2]=0,X[3]=0,X[4]=0}else X[0]=X[2],X[1]=X[3],X[2]=X[4],X[3]=1,X[4]=0,Ae=3;else X[++Ae]++;else X[Ae]++;Br.foundPatternCross(X)&&this.handlePossibleCenter(X,pe,A,b)===!0&&(I=X[0],this.hasSkipped&&(B=this.haveMultiplyConfirmedCenters()))}const oe=this.selectBestPatterns();return Ve.orderBestPatterns(oe),new kd(oe)}static centerFromEnd(h,x){return x-h[4]-h[3]-h[2]/2}static foundPatternCross(h){let x=0;for(let j=0;j<5;j++){const A=h[j];if(A===0)return!1;x+=A}if(x<7)return!1;const b=x/7,_=b/2;return Math.abs(b-h[0])<_&&Math.abs(b-h[1])<_&&Math.abs(3*b-h[2])<3*_&&Math.abs(b-h[3])<_&&Math.abs(b-h[4])<_}getCrossCheckStateCount(){const h=this.crossCheckStateCount;return h[0]=0,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h}crossCheckDiagonal(h,x,b,_){const j=this.getCrossCheckStateCount();let A=0;const I=this.image;for(;h>=A&&x>=A&&I.get(x-A,h-A);)j[2]++,A++;if(h<A||x<A)return!1;for(;h>=A&&x>=A&&!I.get(x-A,h-A)&&j[1]<=b;)j[1]++,A++;if(h<A||x<A||j[1]>b)return!1;for(;h>=A&&x>=A&&I.get(x-A,h-A)&&j[0]<=b;)j[0]++,A++;if(j[0]>b)return!1;const B=I.getHeight(),X=I.getWidth();for(A=1;h+A<B&&x+A<X&&I.get(x+A,h+A);)j[2]++,A++;if(h+A>=B||x+A>=X)return!1;for(;h+A<B&&x+A<X&&!I.get(x+A,h+A)&&j[3]<b;)j[3]++,A++;if(h+A>=B||x+A>=X||j[3]>=b)return!1;for(;h+A<B&&x+A<X&&I.get(x+A,h+A)&&j[4]<b;)j[4]++,A++;if(j[4]>=b)return!1;const oe=j[0]+j[1]+j[2]+j[3]+j[4];return Math.abs(oe-_)<2*_&&Br.foundPatternCross(j)}crossCheckVertical(h,x,b,_){const j=this.image,A=j.getHeight(),I=this.getCrossCheckStateCount();let B=h;for(;B>=0&&j.get(x,B);)I[2]++,B--;if(B<0)return NaN;for(;B>=0&&!j.get(x,B)&&I[1]<=b;)I[1]++,B--;if(B<0||I[1]>b)return NaN;for(;B>=0&&j.get(x,B)&&I[0]<=b;)I[0]++,B--;if(I[0]>b)return NaN;for(B=h+1;B<A&&j.get(x,B);)I[2]++,B++;if(B===A)return NaN;for(;B<A&&!j.get(x,B)&&I[3]<b;)I[3]++,B++;if(B===A||I[3]>=b)return NaN;for(;B<A&&j.get(x,B)&&I[4]<b;)I[4]++,B++;if(I[4]>=b)return NaN;const X=I[0]+I[1]+I[2]+I[3]+I[4];return 5*Math.abs(X-_)>=2*_?NaN:Br.foundPatternCross(I)?Br.centerFromEnd(I,B):NaN}crossCheckHorizontal(h,x,b,_){const j=this.image,A=j.getWidth(),I=this.getCrossCheckStateCount();let B=h;for(;B>=0&&j.get(B,x);)I[2]++,B--;if(B<0)return NaN;for(;B>=0&&!j.get(B,x)&&I[1]<=b;)I[1]++,B--;if(B<0||I[1]>b)return NaN;for(;B>=0&&j.get(B,x)&&I[0]<=b;)I[0]++,B--;if(I[0]>b)return NaN;for(B=h+1;B<A&&j.get(B,x);)I[2]++,B++;if(B===A)return NaN;for(;B<A&&!j.get(B,x)&&I[3]<b;)I[3]++,B++;if(B===A||I[3]>=b)return NaN;for(;B<A&&j.get(B,x)&&I[4]<b;)I[4]++,B++;if(I[4]>=b)return NaN;const X=I[0]+I[1]+I[2]+I[3]+I[4];return 5*Math.abs(X-_)>=_?NaN:Br.foundPatternCross(I)?Br.centerFromEnd(I,B):NaN}handlePossibleCenter(h,x,b,_){const j=h[0]+h[1]+h[2]+h[3]+h[4];let A=Br.centerFromEnd(h,b),I=this.crossCheckVertical(x,Math.floor(A),h[2],j);if(!isNaN(I)&&(A=this.crossCheckHorizontal(Math.floor(A),Math.floor(I),h[2],j),!isNaN(A)&&(!_||this.crossCheckDiagonal(Math.floor(I),Math.floor(A),h[2],j)))){const B=j/7;let X=!1;const oe=this.possibleCenters;for(let pe=0,Ae=oe.length;pe<Ae;pe++){const ze=oe[pe];if(ze.aboutEquals(B,I,A)){oe[pe]=ze.combineEstimate(I,A,B),X=!0;break}}if(!X){const pe=new co(A,I,B);oe.push(pe),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(pe)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let x=null;for(const b of this.possibleCenters)if(b.getCount()>=Br.CENTER_QUORUM)if(x==null)x=b;else return this.hasSkipped=!0,Math.floor((Math.abs(x.getX()-b.getX())-Math.abs(x.getY()-b.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let h=0,x=0;const b=this.possibleCenters.length;for(const A of this.possibleCenters)A.getCount()>=Br.CENTER_QUORUM&&(h++,x+=A.getEstimatedModuleSize());if(h<3)return!1;const _=x/b;let j=0;for(const A of this.possibleCenters)j+=Math.abs(A.getEstimatedModuleSize()-_);return j<=.05*x}selectBestPatterns(){const h=this.possibleCenters.length;if(h<3)throw new ae;const x=this.possibleCenters;let b;if(h>3){let _=0,j=0;for(const B of this.possibleCenters){const X=B.getEstimatedModuleSize();_+=X,j+=X*X}b=_/h;let A=Math.sqrt(j/h-b*b);x.sort((B,X)=>{const oe=Math.abs(X.getEstimatedModuleSize()-b),pe=Math.abs(B.getEstimatedModuleSize()-b);return oe<pe?-1:oe>pe?1:0});const I=Math.max(.2*b,A);for(let B=0;B<x.length&&x.length>3;B++){const X=x[B];Math.abs(X.getEstimatedModuleSize()-b)>I&&(x.splice(B,1),B--)}}if(x.length>3){let _=0;for(const j of x)_+=j.getEstimatedModuleSize();b=_/x.length,x.sort((j,A)=>{if(A.getCount()===j.getCount()){const I=Math.abs(A.getEstimatedModuleSize()-b),B=Math.abs(j.getEstimatedModuleSize()-b);return I<B?1:I>B?-1:0}else return A.getCount()-j.getCount()}),x.splice(3)}return[x[0],x[1],x[2]]}}Br.CENTER_QUORUM=2,Br.MIN_SKIP=3,Br.MAX_MODULES=57;class Ll{constructor(h){this.image=h}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(h){this.resultPointCallback=h==null?null:h.get(W.NEED_RESULT_POINT_CALLBACK);const b=new Br(this.image,this.resultPointCallback).find(h);return this.processFinderPatternInfo(b)}processFinderPatternInfo(h){const x=h.getTopLeft(),b=h.getTopRight(),_=h.getBottomLeft(),j=this.calculateModuleSize(x,b,_);if(j<1)throw new ae("No pattern found in proccess finder.");const A=Ll.computeDimension(x,b,_,j),I=vr.getProvisionalVersionForDimension(A),B=I.getDimensionForVersion()-7;let X=null;if(I.getAlignmentPatternCenters().length>0){const ze=b.getX()-x.getX()+_.getX(),Xe=b.getY()-x.getY()+_.getY(),tt=1-3/B,xt=Math.floor(x.getX()+tt*(ze-x.getX())),jt=Math.floor(x.getY()+tt*(Xe-x.getY()));for(let qt=4;qt<=16;qt<<=1)try{X=this.findAlignmentInRegion(j,xt,jt,qt);break}catch(Ht){if(!(Ht instanceof ae))throw Ht}}const oe=Ll.createTransform(x,b,_,X,A),pe=Ll.sampleGrid(this.image,oe,A);let Ae;return X===null?Ae=[_,x,b]:Ae=[_,x,b,X],new Vt(pe,Ae)}static createTransform(h,x,b,_,j){const A=j-3.5;let I,B,X,oe;return _!==null?(I=_.getX(),B=_.getY(),X=A-3,oe=X):(I=x.getX()-h.getX()+b.getX(),B=x.getY()-h.getY()+b.getY(),X=A,oe=A),sr.quadrilateralToQuadrilateral(3.5,3.5,A,3.5,X,oe,3.5,A,h.getX(),h.getY(),x.getX(),x.getY(),I,B,b.getX(),b.getY())}static sampleGrid(h,x,b){return er.getInstance().sampleGridWithTransform(h,b,b,x)}static computeDimension(h,x,b,_){const j=et.round(Ve.distance(h,x)/_),A=et.round(Ve.distance(h,b)/_);let I=Math.floor((j+A)/2)+7;switch(I&3){case 0:I++;break;case 2:I--;break;case 3:throw new ae("Dimensions could be not found.")}return I}calculateModuleSize(h,x,b){return(this.calculateModuleSizeOneWay(h,x)+this.calculateModuleSizeOneWay(h,b))/2}calculateModuleSizeOneWay(h,x){const b=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(h.getX()),Math.floor(h.getY()),Math.floor(x.getX()),Math.floor(x.getY())),_=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(x.getX()),Math.floor(x.getY()),Math.floor(h.getX()),Math.floor(h.getY()));return isNaN(b)?_/7:isNaN(_)?b/7:(b+_)/14}sizeOfBlackWhiteBlackRunBothWays(h,x,b,_){let j=this.sizeOfBlackWhiteBlackRun(h,x,b,_),A=1,I=h-(b-h);I<0?(A=h/(h-I),I=0):I>=this.image.getWidth()&&(A=(this.image.getWidth()-1-h)/(I-h),I=this.image.getWidth()-1);let B=Math.floor(x-(_-x)*A);return A=1,B<0?(A=x/(x-B),B=0):B>=this.image.getHeight()&&(A=(this.image.getHeight()-1-x)/(B-x),B=this.image.getHeight()-1),I=Math.floor(h+(I-h)*A),j+=this.sizeOfBlackWhiteBlackRun(h,x,I,B),j-1}sizeOfBlackWhiteBlackRun(h,x,b,_){const j=Math.abs(_-x)>Math.abs(b-h);if(j){let ze=h;h=x,x=ze,ze=b,b=_,_=ze}const A=Math.abs(b-h),I=Math.abs(_-x);let B=-A/2;const X=h<b?1:-1,oe=x<_?1:-1;let pe=0;const Ae=b+X;for(let ze=h,Xe=x;ze!==Ae;ze+=X){const tt=j?Xe:ze,xt=j?ze:Xe;if(pe===1===this.image.get(tt,xt)){if(pe===2)return et.distance(ze,Xe,h,x);pe++}if(B+=I,B>0){if(Xe===_)break;Xe+=oe,B-=A}}return pe===2?et.distance(b+X,_,h,x):NaN}findAlignmentInRegion(h,x,b,_){const j=Math.floor(_*h),A=Math.max(0,x-j),I=Math.min(this.image.getWidth()-1,x+j);if(I-A<h*3)throw new ae("Alignment top exceeds estimated module size.");const B=Math.max(0,b-j),X=Math.min(this.image.getHeight()-1,b+j);if(X-B<h*3)throw new ae("Alignment bottom exceeds estimated module size.");return new tl(this.image,A,B,I-A,X-B,h,this.resultPointCallback).find()}}class uo{constructor(){this.decoder=new wd}getDecoder(){return this.decoder}decode(h,x){let b,_;if(x!=null&&x.get(W.PURE_BARCODE)!==void 0){const B=uo.extractPureBits(h.getBlackMatrix());b=this.decoder.decodeBitMatrix(B,x),_=uo.NO_POINTS}else{const B=new Ll(h.getBlackMatrix()).detect(x);b=this.decoder.decodeBitMatrix(B.getBits(),x),_=B.getPoints()}b.getOther()instanceof oo&&b.getOther().applyMirroredCorrection(_);const j=new Y(b.getText(),b.getRawBytes(),void 0,_,ee.QR_CODE,void 0),A=b.getByteSegments();A!==null&&j.putMetadata(me.BYTE_SEGMENTS,A);const I=b.getECLevel();return I!==null&&j.putMetadata(me.ERROR_CORRECTION_LEVEL,I),b.hasStructuredAppend()&&(j.putMetadata(me.STRUCTURED_APPEND_SEQUENCE,b.getStructuredAppendSequenceNumber()),j.putMetadata(me.STRUCTURED_APPEND_PARITY,b.getStructuredAppendParity())),j}reset(){}static extractPureBits(h){const x=h.getTopLeftOnBit(),b=h.getBottomRightOnBit();if(x===null||b===null)throw new ae;const _=this.moduleSize(x,h);let j=x[1],A=b[1],I=x[0],B=b[0];if(I>=B||j>=A)throw new ae;if(A-j!==B-I&&(B=I+(A-j),B>=h.getWidth()))throw new ae;const X=Math.round((B-I+1)/_),oe=Math.round((A-j+1)/_);if(X<=0||oe<=0)throw new ae;if(oe!==X)throw new ae;const pe=Math.floor(_/2);j+=pe,I+=pe;const Ae=I+Math.floor((X-1)*_)-B;if(Ae>0){if(Ae>pe)throw new ae;I-=Ae}const ze=j+Math.floor((oe-1)*_)-A;if(ze>0){if(ze>pe)throw new ae;j-=ze}const Xe=new re(X,oe);for(let tt=0;tt<oe;tt++){const xt=j+Math.floor(tt*_);for(let jt=0;jt<X;jt++)h.get(I+Math.floor(jt*_),xt)&&Xe.set(jt,tt)}return Xe}static moduleSize(h,x){const b=x.getHeight(),_=x.getWidth();let j=h[0],A=h[1],I=!0,B=0;for(;j<_&&A<b;){if(I!==x.get(j,A)){if(++B===5)break;I=!I}j++,A++}if(j===_||A===b)throw new ae;return(j-h[0])/7}}uo.NO_POINTS=new Array;class dn{PDF417Common(){}static getBitCountSum(h){return et.sum(h)}static toIntArray(h){if(h==null||!h.length)return dn.EMPTY_INT_ARRAY;const x=new Int32Array(h.length);let b=0;for(const _ of h)x[b++]=_;return x}static getCodeword(h){const x=O.binarySearch(dn.SYMBOL_TABLE,h&262143);return x<0?-1:(dn.CODEWORD_TABLE[x]-1)%dn.NUMBER_OF_CODEWORDS}}dn.NUMBER_OF_CODEWORDS=929,dn.MAX_CODEWORDS_IN_BARCODE=dn.NUMBER_OF_CODEWORDS-1,dn.MIN_ROWS_IN_BARCODE=3,dn.MAX_ROWS_IN_BARCODE=90,dn.MODULES_IN_CODEWORD=17,dn.MODULES_IN_STOP_PATTERN=18,dn.BARS_IN_MODULE=8,dn.EMPTY_INT_ARRAY=new Int32Array([]),dn.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),dn.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class oh{constructor(h,x){this.bits=h,this.points=x}getBits(){return this.bits}getPoints(){return this.points}}class un{static detectMultiple(h,x,b){let _=h.getBlackMatrix(),j=un.detect(b,_);return j.length||(_=_.clone(),_.rotate180(),j=un.detect(b,_)),new oh(_,j)}static detect(h,x){const b=new Array;let _=0,j=0,A=!1;for(;_<x.getHeight();){const I=un.findVertices(x,_,j);if(I[0]==null&&I[3]==null){if(!A)break;A=!1,j=0;for(const B of b)B[1]!=null&&(_=Math.trunc(Math.max(_,B[1].getY()))),B[3]!=null&&(_=Math.max(_,Math.trunc(B[3].getY())));_+=un.ROW_STEP;continue}if(A=!0,b.push(I),!h)break;I[2]!=null?(j=Math.trunc(I[2].getX()),_=Math.trunc(I[2].getY())):(j=Math.trunc(I[4].getX()),_=Math.trunc(I[4].getY()))}return b}static findVertices(h,x,b){const _=h.getHeight(),j=h.getWidth(),A=new Array(8);return un.copyToResult(A,un.findRowsWithPattern(h,_,j,x,b,un.START_PATTERN),un.INDEXES_START_PATTERN),A[4]!=null&&(b=Math.trunc(A[4].getX()),x=Math.trunc(A[4].getY())),un.copyToResult(A,un.findRowsWithPattern(h,_,j,x,b,un.STOP_PATTERN),un.INDEXES_STOP_PATTERN),A}static copyToResult(h,x,b){for(let _=0;_<b.length;_++)h[b[_]]=x[_]}static findRowsWithPattern(h,x,b,_,j,A){const I=new Array(4);let B=!1;const X=new Int32Array(A.length);for(;_<x;_+=un.ROW_STEP){let pe=un.findGuardPattern(h,j,_,b,!1,A,X);if(pe!=null){for(;_>0;){const Ae=un.findGuardPattern(h,j,--_,b,!1,A,X);if(Ae!=null)pe=Ae;else{_++;break}}I[0]=new Ve(pe[0],_),I[1]=new Ve(pe[1],_),B=!0;break}}let oe=_+1;if(B){let pe=0,Ae=Int32Array.from([Math.trunc(I[0].getX()),Math.trunc(I[1].getX())]);for(;oe<x;oe++){const ze=un.findGuardPattern(h,Ae[0],oe,b,!1,A,X);if(ze!=null&&Math.abs(Ae[0]-ze[0])<un.MAX_PATTERN_DRIFT&&Math.abs(Ae[1]-ze[1])<un.MAX_PATTERN_DRIFT)Ae=ze,pe=0;else{if(pe>un.SKIPPED_ROW_COUNT_MAX)break;pe++}}oe-=pe+1,I[2]=new Ve(Ae[0],oe),I[3]=new Ve(Ae[1],oe)}return oe-_<un.BARCODE_MIN_HEIGHT&&O.fill(I,null),I}static findGuardPattern(h,x,b,_,j,A,I){O.fillWithin(I,0,I.length,0);let B=x,X=0;for(;h.get(B,b)&&B>0&&X++<un.MAX_PIXEL_DRIFT;)B--;let oe=B,pe=0,Ae=A.length;for(let ze=j;oe<_;oe++)if(h.get(oe,b)!==ze)I[pe]++;else{if(pe===Ae-1){if(un.patternMatchVariance(I,A,un.MAX_INDIVIDUAL_VARIANCE)<un.MAX_AVG_VARIANCE)return new Int32Array([B,oe]);B+=I[0]+I[1],w.arraycopy(I,2,I,0,pe-1),I[pe-1]=0,I[pe]=0,pe--}else pe++;I[pe]=1,ze=!ze}return pe===Ae-1&&un.patternMatchVariance(I,A,un.MAX_INDIVIDUAL_VARIANCE)<un.MAX_AVG_VARIANCE?new Int32Array([B,oe-1]):null}static patternMatchVariance(h,x,b){let _=h.length,j=0,A=0;for(let X=0;X<_;X++)j+=h[X],A+=x[X];if(j<A)return 1/0;let I=j/A;b*=I;let B=0;for(let X=0;X<_;X++){let oe=h[X],pe=x[X]*I,Ae=oe>pe?oe-pe:pe-oe;if(Ae>b)return 1/0;B+=Ae}return B/j}}un.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),un.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),un.MAX_AVG_VARIANCE=.42,un.MAX_INDIVIDUAL_VARIANCE=.8,un.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),un.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),un.MAX_PIXEL_DRIFT=3,un.MAX_PATTERN_DRIFT=5,un.SKIPPED_ROW_COUNT_MAX=25,un.ROW_STEP=5,un.BARCODE_MIN_HEIGHT=10;class la{constructor(h,x){if(x.length===0)throw new p;this.field=h;let b=x.length;if(b>1&&x[0]===0){let _=1;for(;_<b&&x[_]===0;)_++;_===b?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(b-_),w.arraycopy(x,_,this.coefficients,0,this.coefficients.length))}else this.coefficients=x}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(h){return this.coefficients[this.coefficients.length-1-h]}evaluateAt(h){if(h===0)return this.getCoefficient(0);if(h===1){let _=0;for(let j of this.coefficients)_=this.field.add(_,j);return _}let x=this.coefficients[0],b=this.coefficients.length;for(let _=1;_<b;_++)x=this.field.add(this.field.multiply(h,x),this.coefficients[_]);return x}add(h){if(!this.field.equals(h.field))throw new p("ModulusPolys do not have same ModulusGF field");if(this.isZero())return h;if(h.isZero())return this;let x=this.coefficients,b=h.coefficients;if(x.length>b.length){let A=x;x=b,b=A}let _=new Int32Array(b.length),j=b.length-x.length;w.arraycopy(b,0,_,0,j);for(let A=j;A<b.length;A++)_[A]=this.field.add(x[A-j],b[A]);return new la(this.field,_)}subtract(h){if(!this.field.equals(h.field))throw new p("ModulusPolys do not have same ModulusGF field");return h.isZero()?this:this.add(h.negative())}multiply(h){return h instanceof la?this.multiplyOther(h):this.multiplyScalar(h)}multiplyOther(h){if(!this.field.equals(h.field))throw new p("ModulusPolys do not have same ModulusGF field");if(this.isZero()||h.isZero())return new la(this.field,new Int32Array([0]));let x=this.coefficients,b=x.length,_=h.coefficients,j=_.length,A=new Int32Array(b+j-1);for(let I=0;I<b;I++){let B=x[I];for(let X=0;X<j;X++)A[I+X]=this.field.add(A[I+X],this.field.multiply(B,_[X]))}return new la(this.field,A)}negative(){let h=this.coefficients.length,x=new Int32Array(h);for(let b=0;b<h;b++)x[b]=this.field.subtract(0,this.coefficients[b]);return new la(this.field,x)}multiplyScalar(h){if(h===0)return new la(this.field,new Int32Array([0]));if(h===1)return this;let x=this.coefficients.length,b=new Int32Array(x);for(let _=0;_<x;_++)b[_]=this.field.multiply(this.coefficients[_],h);return new la(this.field,b)}multiplyByMonomial(h,x){if(h<0)throw new p;if(x===0)return new la(this.field,new Int32Array([0]));let b=this.coefficients.length,_=new Int32Array(b+h);for(let j=0;j<b;j++)_[j]=this.field.multiply(this.coefficients[j],x);return new la(this.field,_)}toString(){let h=new Q;for(let x=this.getDegree();x>=0;x--){let b=this.getCoefficient(x);b!==0&&(b<0?(h.append(" - "),b=-b):h.length()>0&&h.append(" + "),(x===0||b!==1)&&h.append(b),x!==0&&(x===1?h.append("x"):(h.append("x^"),h.append(x))))}return h.toString()}}class Yu{add(h,x){return(h+x)%this.modulus}subtract(h,x){return(this.modulus+h-x)%this.modulus}exp(h){return this.expTable[h]}log(h){if(h===0)throw new p;return this.logTable[h]}inverse(h){if(h===0)throw new ie;return this.expTable[this.modulus-this.logTable[h]-1]}multiply(h,x){return h===0||x===0?0:this.expTable[(this.logTable[h]+this.logTable[x])%(this.modulus-1)]}getSize(){return this.modulus}equals(h){return h===this}}class ic extends Yu{constructor(h,x){super(),this.modulus=h,this.expTable=new Int32Array(h),this.logTable=new Int32Array(h);let b=1;for(let _=0;_<h;_++)this.expTable[_]=b,b=b*x%h;for(let _=0;_<h-1;_++)this.logTable[this.expTable[_]]=_;this.zero=new la(this,new Int32Array([0])),this.one=new la(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(h,x){if(h<0)throw new p;if(x===0)return this.zero;let b=new Int32Array(h+1);return b[0]=x,new la(this,b)}}ic.PDF417_GF=new ic(dn.NUMBER_OF_CODEWORDS,3);class rl{constructor(){this.field=ic.PDF417_GF}decode(h,x,b){let _=new la(this.field,h),j=new Int32Array(x),A=!1;for(let Xe=x;Xe>0;Xe--){let tt=_.evaluateAt(this.field.exp(Xe));j[x-Xe]=tt,tt!==0&&(A=!0)}if(!A)return 0;let I=this.field.getOne();if(b!=null)for(const Xe of b){let tt=this.field.exp(h.length-1-Xe),xt=new la(this.field,new Int32Array([this.field.subtract(0,tt),1]));I=I.multiply(xt)}let B=new la(this.field,j),X=this.runEuclideanAlgorithm(this.field.buildMonomial(x,1),B,x),oe=X[0],pe=X[1],Ae=this.findErrorLocations(oe),ze=this.findErrorMagnitudes(pe,oe,Ae);for(let Xe=0;Xe<Ae.length;Xe++){let tt=h.length-1-this.field.log(Ae[Xe]);if(tt<0)throw g.getChecksumInstance();h[tt]=this.field.subtract(h[tt],ze[Xe])}return Ae.length}runEuclideanAlgorithm(h,x,b){if(h.getDegree()<x.getDegree()){let Ae=h;h=x,x=Ae}let _=h,j=x,A=this.field.getZero(),I=this.field.getOne();for(;j.getDegree()>=Math.round(b/2);){let Ae=_,ze=A;if(_=j,A=I,_.isZero())throw g.getChecksumInstance();j=Ae;let Xe=this.field.getZero(),tt=_.getCoefficient(_.getDegree()),xt=this.field.inverse(tt);for(;j.getDegree()>=_.getDegree()&&!j.isZero();){let jt=j.getDegree()-_.getDegree(),qt=this.field.multiply(j.getCoefficient(j.getDegree()),xt);Xe=Xe.add(this.field.buildMonomial(jt,qt)),j=j.subtract(_.multiplyByMonomial(jt,qt))}I=Xe.multiply(A).subtract(ze).negative()}let B=I.getCoefficient(0);if(B===0)throw g.getChecksumInstance();let X=this.field.inverse(B),oe=I.multiply(X),pe=j.multiply(X);return[oe,pe]}findErrorLocations(h){let x=h.getDegree(),b=new Int32Array(x),_=0;for(let j=1;j<this.field.getSize()&&_<x;j++)h.evaluateAt(j)===0&&(b[_]=this.field.inverse(j),_++);if(_!==x)throw g.getChecksumInstance();return b}findErrorMagnitudes(h,x,b){let _=x.getDegree(),j=new Int32Array(_);for(let X=1;X<=_;X++)j[_-X]=this.field.multiply(X,x.getCoefficient(X));let A=new la(this.field,j),I=b.length,B=new Int32Array(I);for(let X=0;X<I;X++){let oe=this.field.inverse(b[X]),pe=this.field.subtract(0,h.evaluateAt(oe)),Ae=this.field.inverse(A.evaluateAt(oe));B[X]=this.field.multiply(pe,Ae)}return B}}class kl{constructor(h,x,b,_,j){h instanceof kl?this.constructor_2(h):this.constructor_1(h,x,b,_,j)}constructor_1(h,x,b,_,j){const A=x==null||b==null,I=_==null||j==null;if(A&&I)throw new ae;A?(x=new Ve(0,_.getY()),b=new Ve(0,j.getY())):I&&(_=new Ve(h.getWidth()-1,x.getY()),j=new Ve(h.getWidth()-1,b.getY())),this.image=h,this.topLeft=x,this.bottomLeft=b,this.topRight=_,this.bottomRight=j,this.minX=Math.trunc(Math.min(x.getX(),b.getX())),this.maxX=Math.trunc(Math.max(_.getX(),j.getX())),this.minY=Math.trunc(Math.min(x.getY(),_.getY())),this.maxY=Math.trunc(Math.max(b.getY(),j.getY()))}constructor_2(h){this.image=h.image,this.topLeft=h.getTopLeft(),this.bottomLeft=h.getBottomLeft(),this.topRight=h.getTopRight(),this.bottomRight=h.getBottomRight(),this.minX=h.getMinX(),this.maxX=h.getMaxX(),this.minY=h.getMinY(),this.maxY=h.getMaxY()}static merge(h,x){return h==null?x:x==null?h:new kl(h.image,h.topLeft,h.bottomLeft,x.topRight,x.bottomRight)}addMissingRows(h,x,b){let _=this.topLeft,j=this.bottomLeft,A=this.topRight,I=this.bottomRight;if(h>0){let B=b?this.topLeft:this.topRight,X=Math.trunc(B.getY()-h);X<0&&(X=0);let oe=new Ve(B.getX(),X);b?_=oe:A=oe}if(x>0){let B=b?this.bottomLeft:this.bottomRight,X=Math.trunc(B.getY()+x);X>=this.image.getHeight()&&(X=this.image.getHeight()-1);let oe=new Ve(B.getX(),X);b?j=oe:I=oe}return new kl(this.image,_,j,A,I)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class Oo{constructor(h,x,b,_){this.columnCount=h,this.errorCorrectionLevel=_,this.rowCountUpperPart=x,this.rowCountLowerPart=b,this.rowCount=x+b}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class ho{constructor(){this.buffer=""}static form(h,x){let b=-1;function _(A,I,B,X,oe,pe){if(A==="%%")return"%";if(x[++b]===void 0)return;A=X?parseInt(X.substr(1)):void 0;let Ae=oe?parseInt(oe.substr(1)):void 0,ze;switch(pe){case"s":ze=x[b];break;case"c":ze=x[b][0];break;case"f":ze=parseFloat(x[b]).toFixed(A);break;case"p":ze=parseFloat(x[b]).toPrecision(A);break;case"e":ze=parseFloat(x[b]).toExponential(A);break;case"x":ze=parseInt(x[b]).toString(Ae||16);break;case"d":ze=parseFloat(parseInt(x[b],Ae||10).toPrecision(A)).toFixed(0);break}ze=typeof ze=="object"?JSON.stringify(ze):(+ze).toString(Ae);let Xe=parseInt(B),tt=B&&B[0]+""=="0"?"0":" ";for(;ze.length<Xe;)ze=I!==void 0?ze+tt:tt+ze;return ze}let j=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return h.replace(j,_)}format(h,...x){this.buffer+=ho.form(h,x)}toString(){return this.buffer}}class Nl{constructor(h){this.boundingBox=new kl(h),this.codewords=new Array(h.getMaxY()-h.getMinY()+1)}getCodewordNearby(h){let x=this.getCodeword(h);if(x!=null)return x;for(let b=1;b<Nl.MAX_NEARBY_DISTANCE;b++){let _=this.imageRowToCodewordIndex(h)-b;if(_>=0&&(x=this.codewords[_],x!=null)||(_=this.imageRowToCodewordIndex(h)+b,_<this.codewords.length&&(x=this.codewords[_],x!=null)))return x}return null}imageRowToCodewordIndex(h){return h-this.boundingBox.getMinY()}setCodeword(h,x){this.codewords[this.imageRowToCodewordIndex(h)]=x}getCodeword(h){return this.codewords[this.imageRowToCodewordIndex(h)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const h=new ho;let x=0;for(const b of this.codewords){if(b==null){h.format("%3d:    |   %n",x++);continue}h.format("%3d: %3d|%3d%n",x++,b.getRowNumber(),b.getValue())}return h.toString()}}Nl.MAX_NEARBY_DISTANCE=5;class Po{constructor(){this.values=new Map}setValue(h){h=Math.trunc(h);let x=this.values.get(h);x==null&&(x=0),x++,this.values.set(h,x)}getValue(){let h=-1,x=new Array;for(const[b,_]of this.values.entries()){const j={getKey:()=>b,getValue:()=>_};j.getValue()>h?(h=j.getValue(),x=[],x.push(j.getKey())):j.getValue()===h&&x.push(j.getKey())}return dn.toIntArray(x)}getConfidence(h){return this.values.get(h)}}class Nd extends Nl{constructor(h,x){super(h),this._isLeft=x}setRowNumbers(){for(let h of this.getCodewords())h!=null&&h.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(h){let x=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(x,h);let b=this.getBoundingBox(),_=this._isLeft?b.getTopLeft():b.getTopRight(),j=this._isLeft?b.getBottomLeft():b.getBottomRight(),A=this.imageRowToCodewordIndex(Math.trunc(_.getY())),I=this.imageRowToCodewordIndex(Math.trunc(j.getY())),B=-1,X=1,oe=0;for(let pe=A;pe<I;pe++){if(x[pe]==null)continue;let Ae=x[pe],ze=Ae.getRowNumber()-B;if(ze===0)oe++;else if(ze===1)X=Math.max(X,oe),oe=1,B=Ae.getRowNumber();else if(ze<0||Ae.getRowNumber()>=h.getRowCount()||ze>pe)x[pe]=null;else{let Xe;X>2?Xe=(X-2)*ze:Xe=ze;let tt=Xe>=pe;for(let xt=1;xt<=Xe&&!tt;xt++)tt=x[pe-xt]!=null;tt?x[pe]=null:(B=Ae.getRowNumber(),oe=1)}}}getRowHeights(){let h=this.getBarcodeMetadata();if(h==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(h);let x=new Int32Array(h.getRowCount());for(let b of this.getCodewords())if(b!=null){let _=b.getRowNumber();if(_>=x.length)continue;x[_]++}return x}adjustIncompleteIndicatorColumnRowNumbers(h){let x=this.getBoundingBox(),b=this._isLeft?x.getTopLeft():x.getTopRight(),_=this._isLeft?x.getBottomLeft():x.getBottomRight(),j=this.imageRowToCodewordIndex(Math.trunc(b.getY())),A=this.imageRowToCodewordIndex(Math.trunc(_.getY())),I=this.getCodewords(),B=-1;for(let X=j;X<A;X++){if(I[X]==null)continue;let oe=I[X];oe.setRowNumberAsRowIndicatorColumn();let pe=oe.getRowNumber()-B;pe===0||(pe===1?B=oe.getRowNumber():oe.getRowNumber()>=h.getRowCount()?I[X]=null:B=oe.getRowNumber())}}getBarcodeMetadata(){let h=this.getCodewords(),x=new Po,b=new Po,_=new Po,j=new Po;for(let I of h){if(I==null)continue;I.setRowNumberAsRowIndicatorColumn();let B=I.getValue()%30,X=I.getRowNumber();switch(this._isLeft||(X+=2),X%3){case 0:b.setValue(B*3+1);break;case 1:j.setValue(B/3),_.setValue(B%3);break;case 2:x.setValue(B+1);break}}if(x.getValue().length===0||b.getValue().length===0||_.getValue().length===0||j.getValue().length===0||x.getValue()[0]<1||b.getValue()[0]+_.getValue()[0]<dn.MIN_ROWS_IN_BARCODE||b.getValue()[0]+_.getValue()[0]>dn.MAX_ROWS_IN_BARCODE)return null;let A=new Oo(x.getValue()[0],b.getValue()[0],_.getValue()[0],j.getValue()[0]);return this.removeIncorrectCodewords(h,A),A}removeIncorrectCodewords(h,x){for(let b=0;b<h.length;b++){let _=h[b];if(h[b]==null)continue;let j=_.getValue()%30,A=_.getRowNumber();if(A>x.getRowCount()){h[b]=null;continue}switch(this._isLeft||(A+=2),A%3){case 0:j*3+1!==x.getRowCountUpperPart()&&(h[b]=null);break;case 1:(Math.trunc(j/3)!==x.getErrorCorrectionLevel()||j%3!==x.getRowCountLowerPart())&&(h[b]=null);break;case 2:j+1!==x.getColumnCount()&&(h[b]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class xs{constructor(h,x){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=h,this.barcodeColumnCount=h.getColumnCount(),this.boundingBox=x,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let h=dn.MAX_CODEWORDS_IN_BARCODE,x;do x=h,h=this.adjustRowNumbersAndGetCount();while(h>0&&h<x);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(h){h!=null&&h.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let h=this.adjustRowNumbersByRow();if(h===0)return 0;for(let x=1;x<this.barcodeColumnCount+1;x++){let b=this.detectionResultColumns[x].getCodewords();for(let _=0;_<b.length;_++)b[_]!=null&&(b[_].hasValidRowNumber()||this.adjustRowNumbers(x,_,b))}return h}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let h=this.detectionResultColumns[0].getCodewords(),x=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let b=0;b<h.length;b++)if(h[b]!=null&&x[b]!=null&&h[b].getRowNumber()===x[b].getRowNumber())for(let _=1;_<=this.barcodeColumnCount;_++){let j=this.detectionResultColumns[_].getCodewords()[b];j!=null&&(j.setRowNumber(h[b].getRowNumber()),j.hasValidRowNumber()||(this.detectionResultColumns[_].getCodewords()[b]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let h=0,x=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let b=0;b<x.length;b++){if(x[b]==null)continue;let _=x[b].getRowNumber(),j=0;for(let A=this.barcodeColumnCount+1;A>0&&j<this.ADJUST_ROW_NUMBER_SKIP;A--){let I=this.detectionResultColumns[A].getCodewords()[b];I!=null&&(j=xs.adjustRowNumberIfValid(_,j,I),I.hasValidRowNumber()||h++)}}return h}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let h=0,x=this.detectionResultColumns[0].getCodewords();for(let b=0;b<x.length;b++){if(x[b]==null)continue;let _=x[b].getRowNumber(),j=0;for(let A=1;A<this.barcodeColumnCount+1&&j<this.ADJUST_ROW_NUMBER_SKIP;A++){let I=this.detectionResultColumns[A].getCodewords()[b];I!=null&&(j=xs.adjustRowNumberIfValid(_,j,I),I.hasValidRowNumber()||h++)}}return h}static adjustRowNumberIfValid(h,x,b){return b==null||b.hasValidRowNumber()||(b.isValidRowNumber(h)?(b.setRowNumber(h),x=0):++x),x}adjustRowNumbers(h,x,b){if(!this.detectionResultColumns[h-1])return;let _=b[x],j=this.detectionResultColumns[h-1].getCodewords(),A=j;this.detectionResultColumns[h+1]!=null&&(A=this.detectionResultColumns[h+1].getCodewords());let I=new Array(14);I[2]=j[x],I[3]=A[x],x>0&&(I[0]=b[x-1],I[4]=j[x-1],I[5]=A[x-1]),x>1&&(I[8]=b[x-2],I[10]=j[x-2],I[11]=A[x-2]),x<b.length-1&&(I[1]=b[x+1],I[6]=j[x+1],I[7]=A[x+1]),x<b.length-2&&(I[9]=b[x+2],I[12]=j[x+2],I[13]=A[x+2]);for(let B of I)if(xs.adjustRowNumber(_,B))return}static adjustRowNumber(h,x){return x==null?!1:x.hasValidRowNumber()&&x.getBucket()===h.getBucket()?(h.setRowNumber(x.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(h){this.boundingBox=h}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(h,x){this.detectionResultColumns[h]=x}getDetectionResultColumn(h){return this.detectionResultColumns[h]}toString(){let h=this.detectionResultColumns[0];h==null&&(h=this.detectionResultColumns[this.barcodeColumnCount+1]);let x=new ho;for(let b=0;b<h.getCodewords().length;b++){x.format("CW %3d:",b);for(let _=0;_<this.barcodeColumnCount+2;_++){if(this.detectionResultColumns[_]==null){x.format("    |   ");continue}let j=this.detectionResultColumns[_].getCodewords()[b];if(j==null){x.format("    |   ");continue}x.format(" %3d|%3d",j.getRowNumber(),j.getValue())}x.format("%n")}return x.toString()}}class hi{constructor(h,x,b,_){this.rowNumber=hi.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(h),this.endX=Math.trunc(x),this.bucket=Math.trunc(b),this.value=Math.trunc(_)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(h){return h!==hi.BARCODE_ROW_UNKNOWN&&this.bucket===h%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(h){this.rowNumber=h}toString(){return this.rowNumber+"|"+this.value}}hi.BARCODE_ROW_UNKNOWN=-1;class os{static initialize(){for(let h=0;h<dn.SYMBOL_TABLE.length;h++){let x=dn.SYMBOL_TABLE[h],b=x&1;for(let _=0;_<dn.BARS_IN_MODULE;_++){let j=0;for(;(x&1)===b;)j+=1,x>>=1;b=x&1,os.RATIOS_TABLE[h]||(os.RATIOS_TABLE[h]=new Array(dn.BARS_IN_MODULE)),os.RATIOS_TABLE[h][dn.BARS_IN_MODULE-_-1]=Math.fround(j/dn.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(h){let x=os.getDecodedCodewordValue(os.sampleBitCounts(h));return x!==-1?x:os.getClosestDecodedValue(h)}static sampleBitCounts(h){let x=et.sum(h),b=new Int32Array(dn.BARS_IN_MODULE),_=0,j=0;for(let A=0;A<dn.MODULES_IN_CODEWORD;A++){let I=x/(2*dn.MODULES_IN_CODEWORD)+A*x/dn.MODULES_IN_CODEWORD;j+h[_]<=I&&(j+=h[_],_++),b[_]++}return b}static getDecodedCodewordValue(h){let x=os.getBitValue(h);return dn.getCodeword(x)===-1?-1:x}static getBitValue(h){let x=0;for(let b=0;b<h.length;b++)for(let _=0;_<h[b];_++)x=x<<1|(b%2===0?1:0);return Math.trunc(x)}static getClosestDecodedValue(h){let x=et.sum(h),b=new Array(dn.BARS_IN_MODULE);if(x>1)for(let A=0;A<b.length;A++)b[A]=Math.fround(h[A]/x);let _=lt.MAX_VALUE,j=-1;this.bSymbolTableReady||os.initialize();for(let A=0;A<os.RATIOS_TABLE.length;A++){let I=0,B=os.RATIOS_TABLE[A];for(let X=0;X<dn.BARS_IN_MODULE;X++){let oe=Math.fround(B[X]-b[X]);if(I+=Math.fround(oe*oe),I>=_)break}I<_&&(_=I,j=dn.SYMBOL_TABLE[A])}return j}}os.bSymbolTableReady=!1,os.RATIOS_TABLE=new Array(dn.SYMBOL_TABLE.length).map(xe=>new Array(dn.BARS_IN_MODULE));class Io{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(h){this.segmentIndex=h}getFileId(){return this.fileId}setFileId(h){this.fileId=h}getOptionalData(){return this.optionalData}setOptionalData(h){this.optionalData=h}isLastSegment(){return this.lastSegment}setLastSegment(h){this.lastSegment=h}getSegmentCount(){return this.segmentCount}setSegmentCount(h){this.segmentCount=h}getSender(){return this.sender||null}setSender(h){this.sender=h}getAddressee(){return this.addressee||null}setAddressee(h){this.addressee=h}getFileName(){return this.fileName}setFileName(h){this.fileName=h}getFileSize(){return this.fileSize}setFileSize(h){this.fileSize=h}getChecksum(){return this.checksum}setChecksum(h){this.checksum=h}getTimestamp(){return this.timestamp}setTimestamp(h){this.timestamp=h}}class _d{static parseLong(h,x=void 0){return parseInt(h,x)}}class Mc extends d{}Mc.kind="NullPointerException";class lc{writeBytes(h){this.writeBytesOffset(h,0,h.length)}writeBytesOffset(h,x,b){if(h==null)throw new Mc;if(x<0||x>h.length||b<0||x+b>h.length||x+b<0)throw new k;if(b===0)return;for(let _=0;_<b;_++)this.write(h[x+_])}flush(){}close(){}}class Lc extends d{}class Sd extends lc{constructor(h=32){if(super(),this.count=0,h<0)throw new p("Negative initial size: "+h);this.buf=new Uint8Array(h)}ensureCapacity(h){h-this.buf.length>0&&this.grow(h)}grow(h){let b=this.buf.length<<1;if(b-h<0&&(b=h),b<0){if(h<0)throw new Lc;b=E.MAX_VALUE}this.buf=O.copyOfUint8Array(this.buf,b)}write(h){this.ensureCapacity(this.count+1),this.buf[this.count]=h,this.count+=1}writeBytesOffset(h,x,b){if(x<0||x>h.length||b<0||x+b-h.length>0)throw new k;this.ensureCapacity(this.count+b),w.arraycopy(h,x,this.buf,this.count,b),this.count+=b}writeTo(h){h.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return O.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(h){return h?typeof h=="string"?this.toString_string(h):this.toString_number(h):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(h){return new String(this.buf).toString()}toString_number(h){return new String(this.buf).toString()}close(){}}var Gn;(function(xe){xe[xe.ALPHA=0]="ALPHA",xe[xe.LOWER=1]="LOWER",xe[xe.MIXED=2]="MIXED",xe[xe.PUNCT=3]="PUNCT",xe[xe.ALPHA_SHIFT=4]="ALPHA_SHIFT",xe[xe.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Gn||(Gn={}));function Do(){if(typeof window<"u")return window.BigInt||null;if(typeof r2<"u")return r2.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let jd;function fo(xe){if(typeof jd>"u"&&(jd=Do()),jd===null)throw new Error("BigInt is not supported!");return jd(xe)}function oc(){let xe=[];xe[0]=fo(1);let h=fo(900);xe[1]=h;for(let x=2;x<16;x++)xe[x]=xe[x-1]*h;return xe}class Tt{static decode(h,x){let b=new Q(""),_=U.ISO8859_1;b.enableDecoding(_);let j=1,A=h[j++],I=new Io;for(;j<h[0];){switch(A){case Tt.TEXT_COMPACTION_MODE_LATCH:j=Tt.textCompaction(h,j,b);break;case Tt.BYTE_COMPACTION_MODE_LATCH:case Tt.BYTE_COMPACTION_MODE_LATCH_6:j=Tt.byteCompaction(A,h,_,j,b);break;case Tt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:b.append(h[j++]);break;case Tt.NUMERIC_COMPACTION_MODE_LATCH:j=Tt.numericCompaction(h,j,b);break;case Tt.ECI_CHARSET:U.getCharacterSetECIByValue(h[j++]);break;case Tt.ECI_GENERAL_PURPOSE:j+=2;break;case Tt.ECI_USER_DEFINED:j++;break;case Tt.BEGIN_MACRO_PDF417_CONTROL_BLOCK:j=Tt.decodeMacroBlock(h,j,I);break;case Tt.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Tt.MACRO_PDF417_TERMINATOR:throw new R;default:j--,j=Tt.textCompaction(h,j,b);break}if(j<h.length)A=h[j++];else throw R.getFormatInstance()}if(b.length()===0)throw R.getFormatInstance();let B=new se(null,b.toString(),null,x);return B.setOther(I),B}static decodeMacroBlock(h,x,b){if(x+Tt.NUMBER_OF_SEQUENCE_CODEWORDS>h[0])throw R.getFormatInstance();let _=new Int32Array(Tt.NUMBER_OF_SEQUENCE_CODEWORDS);for(let I=0;I<Tt.NUMBER_OF_SEQUENCE_CODEWORDS;I++,x++)_[I]=h[x];b.setSegmentIndex(E.parseInt(Tt.decodeBase900toBase10(_,Tt.NUMBER_OF_SEQUENCE_CODEWORDS)));let j=new Q;x=Tt.textCompaction(h,x,j),b.setFileId(j.toString());let A=-1;for(h[x]===Tt.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(A=x+1);x<h[0];)switch(h[x]){case Tt.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(x++,h[x]){case Tt.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let I=new Q;x=Tt.textCompaction(h,x+1,I),b.setFileName(I.toString());break;case Tt.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let B=new Q;x=Tt.textCompaction(h,x+1,B),b.setSender(B.toString());break;case Tt.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let X=new Q;x=Tt.textCompaction(h,x+1,X),b.setAddressee(X.toString());break;case Tt.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let oe=new Q;x=Tt.numericCompaction(h,x+1,oe),b.setSegmentCount(E.parseInt(oe.toString()));break;case Tt.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let pe=new Q;x=Tt.numericCompaction(h,x+1,pe),b.setTimestamp(_d.parseLong(pe.toString()));break;case Tt.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let Ae=new Q;x=Tt.numericCompaction(h,x+1,Ae),b.setChecksum(E.parseInt(Ae.toString()));break;case Tt.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let ze=new Q;x=Tt.numericCompaction(h,x+1,ze),b.setFileSize(_d.parseLong(ze.toString()));break;default:throw R.getFormatInstance()}break;case Tt.MACRO_PDF417_TERMINATOR:x++,b.setLastSegment(!0);break;default:throw R.getFormatInstance()}if(A!==-1){let I=x-A;b.isLastSegment()&&I--,b.setOptionalData(O.copyOfRange(h,A,A+I))}return x}static textCompaction(h,x,b){let _=new Int32Array((h[0]-x)*2),j=new Int32Array((h[0]-x)*2),A=0,I=!1;for(;x<h[0]&&!I;){let B=h[x++];if(B<Tt.TEXT_COMPACTION_MODE_LATCH)_[A]=B/30,_[A+1]=B%30,A+=2;else switch(B){case Tt.TEXT_COMPACTION_MODE_LATCH:_[A++]=Tt.TEXT_COMPACTION_MODE_LATCH;break;case Tt.BYTE_COMPACTION_MODE_LATCH:case Tt.BYTE_COMPACTION_MODE_LATCH_6:case Tt.NUMERIC_COMPACTION_MODE_LATCH:case Tt.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Tt.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Tt.MACRO_PDF417_TERMINATOR:x--,I=!0;break;case Tt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:_[A]=Tt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,B=h[x++],j[A]=B,A++;break}}return Tt.decodeTextCompaction(_,j,A,b),x}static decodeTextCompaction(h,x,b,_){let j=Gn.ALPHA,A=Gn.ALPHA,I=0;for(;I<b;){let B=h[I],X="";switch(j){case Gn.ALPHA:if(B<26)X=String.fromCharCode(65+B);else switch(B){case 26:X=" ";break;case Tt.LL:j=Gn.LOWER;break;case Tt.ML:j=Gn.MIXED;break;case Tt.PS:A=j,j=Gn.PUNCT_SHIFT;break;case Tt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:_.append(x[I]);break;case Tt.TEXT_COMPACTION_MODE_LATCH:j=Gn.ALPHA;break}break;case Gn.LOWER:if(B<26)X=String.fromCharCode(97+B);else switch(B){case 26:X=" ";break;case Tt.AS:A=j,j=Gn.ALPHA_SHIFT;break;case Tt.ML:j=Gn.MIXED;break;case Tt.PS:A=j,j=Gn.PUNCT_SHIFT;break;case Tt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:_.append(x[I]);break;case Tt.TEXT_COMPACTION_MODE_LATCH:j=Gn.ALPHA;break}break;case Gn.MIXED:if(B<Tt.PL)X=Tt.MIXED_CHARS[B];else switch(B){case Tt.PL:j=Gn.PUNCT;break;case 26:X=" ";break;case Tt.LL:j=Gn.LOWER;break;case Tt.AL:j=Gn.ALPHA;break;case Tt.PS:A=j,j=Gn.PUNCT_SHIFT;break;case Tt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:_.append(x[I]);break;case Tt.TEXT_COMPACTION_MODE_LATCH:j=Gn.ALPHA;break}break;case Gn.PUNCT:if(B<Tt.PAL)X=Tt.PUNCT_CHARS[B];else switch(B){case Tt.PAL:j=Gn.ALPHA;break;case Tt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:_.append(x[I]);break;case Tt.TEXT_COMPACTION_MODE_LATCH:j=Gn.ALPHA;break}break;case Gn.ALPHA_SHIFT:if(j=A,B<26)X=String.fromCharCode(65+B);else switch(B){case 26:X=" ";break;case Tt.TEXT_COMPACTION_MODE_LATCH:j=Gn.ALPHA;break}break;case Gn.PUNCT_SHIFT:if(j=A,B<Tt.PAL)X=Tt.PUNCT_CHARS[B];else switch(B){case Tt.PAL:j=Gn.ALPHA;break;case Tt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:_.append(x[I]);break;case Tt.TEXT_COMPACTION_MODE_LATCH:j=Gn.ALPHA;break}break}X!==""&&_.append(X),I++}}static byteCompaction(h,x,b,_,j){let A=new Sd,I=0,B=0,X=!1;switch(h){case Tt.BYTE_COMPACTION_MODE_LATCH:let oe=new Int32Array(6),pe=x[_++];for(;_<x[0]&&!X;)switch(oe[I++]=pe,B=900*B+pe,pe=x[_++],pe){case Tt.TEXT_COMPACTION_MODE_LATCH:case Tt.BYTE_COMPACTION_MODE_LATCH:case Tt.NUMERIC_COMPACTION_MODE_LATCH:case Tt.BYTE_COMPACTION_MODE_LATCH_6:case Tt.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Tt.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Tt.MACRO_PDF417_TERMINATOR:_--,X=!0;break;default:if(I%5===0&&I>0){for(let Ae=0;Ae<6;++Ae)A.write(Number(fo(B)>>fo(8*(5-Ae))));B=0,I=0}break}_===x[0]&&pe<Tt.TEXT_COMPACTION_MODE_LATCH&&(oe[I++]=pe);for(let Ae=0;Ae<I;Ae++)A.write(oe[Ae]);break;case Tt.BYTE_COMPACTION_MODE_LATCH_6:for(;_<x[0]&&!X;){let Ae=x[_++];if(Ae<Tt.TEXT_COMPACTION_MODE_LATCH)I++,B=900*B+Ae;else switch(Ae){case Tt.TEXT_COMPACTION_MODE_LATCH:case Tt.BYTE_COMPACTION_MODE_LATCH:case Tt.NUMERIC_COMPACTION_MODE_LATCH:case Tt.BYTE_COMPACTION_MODE_LATCH_6:case Tt.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Tt.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Tt.MACRO_PDF417_TERMINATOR:_--,X=!0;break}if(I%5===0&&I>0){for(let ze=0;ze<6;++ze)A.write(Number(fo(B)>>fo(8*(5-ze))));B=0,I=0}}break}return j.append(q.decode(A.toByteArray(),b)),_}static numericCompaction(h,x,b){let _=0,j=!1,A=new Int32Array(Tt.MAX_NUMERIC_CODEWORDS);for(;x<h[0]&&!j;){let I=h[x++];if(x===h[0]&&(j=!0),I<Tt.TEXT_COMPACTION_MODE_LATCH)A[_]=I,_++;else switch(I){case Tt.TEXT_COMPACTION_MODE_LATCH:case Tt.BYTE_COMPACTION_MODE_LATCH:case Tt.BYTE_COMPACTION_MODE_LATCH_6:case Tt.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Tt.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Tt.MACRO_PDF417_TERMINATOR:x--,j=!0;break}(_%Tt.MAX_NUMERIC_CODEWORDS===0||I===Tt.NUMERIC_COMPACTION_MODE_LATCH||j)&&_>0&&(b.append(Tt.decodeBase900toBase10(A,_)),_=0)}return x}static decodeBase900toBase10(h,x){let b=fo(0);for(let j=0;j<x;j++)b+=Tt.EXP900[x-j-1]*fo(h[j]);let _=b.toString();if(_.charAt(0)!=="1")throw new R;return _.substring(1)}}Tt.TEXT_COMPACTION_MODE_LATCH=900,Tt.BYTE_COMPACTION_MODE_LATCH=901,Tt.NUMERIC_COMPACTION_MODE_LATCH=902,Tt.BYTE_COMPACTION_MODE_LATCH_6=924,Tt.ECI_USER_DEFINED=925,Tt.ECI_GENERAL_PURPOSE=926,Tt.ECI_CHARSET=927,Tt.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,Tt.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,Tt.MACRO_PDF417_TERMINATOR=922,Tt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,Tt.MAX_NUMERIC_CODEWORDS=15,Tt.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,Tt.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,Tt.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,Tt.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,Tt.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,Tt.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,Tt.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,Tt.PL=25,Tt.LL=27,Tt.AS=27,Tt.ML=28,Tt.AL=28,Tt.PS=29,Tt.PAL=29,Tt.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,Tt.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",Tt.EXP900=Do()?oc():[],Tt.NUMBER_OF_SEQUENCE_CODEWORDS=2;class G{constructor(){}static decode(h,x,b,_,j,A,I){let B=new kl(h,x,b,_,j),X=null,oe=null,pe;for(let Xe=!0;;Xe=!1){if(x!=null&&(X=G.getRowIndicatorColumn(h,B,x,!0,A,I)),_!=null&&(oe=G.getRowIndicatorColumn(h,B,_,!1,A,I)),pe=G.merge(X,oe),pe==null)throw ae.getNotFoundInstance();let tt=pe.getBoundingBox();if(Xe&&tt!=null&&(tt.getMinY()<B.getMinY()||tt.getMaxY()>B.getMaxY()))B=tt;else break}pe.setBoundingBox(B);let Ae=pe.getBarcodeColumnCount()+1;pe.setDetectionResultColumn(0,X),pe.setDetectionResultColumn(Ae,oe);let ze=X!=null;for(let Xe=1;Xe<=Ae;Xe++){let tt=ze?Xe:Ae-Xe;if(pe.getDetectionResultColumn(tt)!==void 0)continue;let xt;tt===0||tt===Ae?xt=new Nd(B,tt===0):xt=new Nl(B),pe.setDetectionResultColumn(tt,xt);let jt=-1,qt=jt;for(let Ht=B.getMinY();Ht<=B.getMaxY();Ht++){if(jt=G.getStartColumn(pe,tt,Ht,ze),jt<0||jt>B.getMaxX()){if(qt===-1)continue;jt=qt}let Ft=G.detectCodeword(h,B.getMinX(),B.getMaxX(),ze,jt,Ht,A,I);Ft!=null&&(xt.setCodeword(Ht,Ft),qt=jt,A=Math.min(A,Ft.getWidth()),I=Math.max(I,Ft.getWidth()))}}return G.createDecoderResult(pe)}static merge(h,x){if(h==null&&x==null)return null;let b=G.getBarcodeMetadata(h,x);if(b==null)return null;let _=kl.merge(G.adjustBoundingBox(h),G.adjustBoundingBox(x));return new xs(b,_)}static adjustBoundingBox(h){if(h==null)return null;let x=h.getRowHeights();if(x==null)return null;let b=G.getMax(x),_=0;for(let I of x)if(_+=b-I,I>0)break;let j=h.getCodewords();for(let I=0;_>0&&j[I]==null;I++)_--;let A=0;for(let I=x.length-1;I>=0&&(A+=b-x[I],!(x[I]>0));I--);for(let I=j.length-1;A>0&&j[I]==null;I--)A--;return h.getBoundingBox().addMissingRows(_,A,h.isLeft())}static getMax(h){let x=-1;for(let b of h)x=Math.max(x,b);return x}static getBarcodeMetadata(h,x){let b;if(h==null||(b=h.getBarcodeMetadata())==null)return x==null?null:x.getBarcodeMetadata();let _;return x==null||(_=x.getBarcodeMetadata())==null?b:b.getColumnCount()!==_.getColumnCount()&&b.getErrorCorrectionLevel()!==_.getErrorCorrectionLevel()&&b.getRowCount()!==_.getRowCount()?null:b}static getRowIndicatorColumn(h,x,b,_,j,A){let I=new Nd(x,_);for(let B=0;B<2;B++){let X=B===0?1:-1,oe=Math.trunc(Math.trunc(b.getX()));for(let pe=Math.trunc(Math.trunc(b.getY()));pe<=x.getMaxY()&&pe>=x.getMinY();pe+=X){let Ae=G.detectCodeword(h,0,h.getWidth(),_,oe,pe,j,A);Ae!=null&&(I.setCodeword(pe,Ae),_?oe=Ae.getStartX():oe=Ae.getEndX())}}return I}static adjustCodewordCount(h,x){let b=x[0][1],_=b.getValue(),j=h.getBarcodeColumnCount()*h.getBarcodeRowCount()-G.getNumberOfECCodeWords(h.getBarcodeECLevel());if(_.length===0){if(j<1||j>dn.MAX_CODEWORDS_IN_BARCODE)throw ae.getNotFoundInstance();b.setValue(j)}else _[0]!==j&&b.setValue(j)}static createDecoderResult(h){let x=G.createBarcodeMatrix(h);G.adjustCodewordCount(h,x);let b=new Array,_=new Int32Array(h.getBarcodeRowCount()*h.getBarcodeColumnCount()),j=[],A=new Array;for(let B=0;B<h.getBarcodeRowCount();B++)for(let X=0;X<h.getBarcodeColumnCount();X++){let oe=x[B][X+1].getValue(),pe=B*h.getBarcodeColumnCount()+X;oe.length===0?b.push(pe):oe.length===1?_[pe]=oe[0]:(A.push(pe),j.push(oe))}let I=new Array(j.length);for(let B=0;B<I.length;B++)I[B]=j[B];return G.createDecoderResultFromAmbiguousValues(h.getBarcodeECLevel(),_,dn.toIntArray(b),dn.toIntArray(A),I)}static createDecoderResultFromAmbiguousValues(h,x,b,_,j){let A=new Int32Array(_.length),I=100;for(;I-- >0;){for(let B=0;B<A.length;B++)x[_[B]]=j[B][A[B]];try{return G.decodeCodewords(x,h,b)}catch(B){if(!(B instanceof g))throw B}if(A.length===0)throw g.getChecksumInstance();for(let B=0;B<A.length;B++)if(A[B]<j[B].length-1){A[B]++;break}else if(A[B]=0,B===A.length-1)throw g.getChecksumInstance()}throw g.getChecksumInstance()}static createBarcodeMatrix(h){let x=Array.from({length:h.getBarcodeRowCount()},()=>new Array(h.getBarcodeColumnCount()+2));for(let _=0;_<x.length;_++)for(let j=0;j<x[_].length;j++)x[_][j]=new Po;let b=0;for(let _ of h.getDetectionResultColumns()){if(_!=null){for(let j of _.getCodewords())if(j!=null){let A=j.getRowNumber();if(A>=0){if(A>=x.length)continue;x[A][b].setValue(j.getValue())}}}b++}return x}static isValidBarcodeColumn(h,x){return x>=0&&x<=h.getBarcodeColumnCount()+1}static getStartColumn(h,x,b,_){let j=_?1:-1,A=null;if(G.isValidBarcodeColumn(h,x-j)&&(A=h.getDetectionResultColumn(x-j).getCodeword(b)),A!=null)return _?A.getEndX():A.getStartX();if(A=h.getDetectionResultColumn(x).getCodewordNearby(b),A!=null)return _?A.getStartX():A.getEndX();if(G.isValidBarcodeColumn(h,x-j)&&(A=h.getDetectionResultColumn(x-j).getCodewordNearby(b)),A!=null)return _?A.getEndX():A.getStartX();let I=0;for(;G.isValidBarcodeColumn(h,x-j);){x-=j;for(let B of h.getDetectionResultColumn(x).getCodewords())if(B!=null)return(_?B.getEndX():B.getStartX())+j*I*(B.getEndX()-B.getStartX());I++}return _?h.getBoundingBox().getMinX():h.getBoundingBox().getMaxX()}static detectCodeword(h,x,b,_,j,A,I,B){j=G.adjustCodewordStartColumn(h,x,b,_,j,A);let X=G.getModuleBitCount(h,x,b,_,j,A);if(X==null)return null;let oe,pe=et.sum(X);if(_)oe=j+pe;else{for(let Xe=0;Xe<X.length/2;Xe++){let tt=X[Xe];X[Xe]=X[X.length-1-Xe],X[X.length-1-Xe]=tt}oe=j,j=oe-pe}if(!G.checkCodewordSkew(pe,I,B))return null;let Ae=os.getDecodedValue(X),ze=dn.getCodeword(Ae);return ze===-1?null:new hi(j,oe,G.getCodewordBucketNumber(Ae),ze)}static getModuleBitCount(h,x,b,_,j,A){let I=j,B=new Int32Array(8),X=0,oe=_?1:-1,pe=_;for(;(_?I<b:I>=x)&&X<B.length;)h.get(I,A)===pe?(B[X]++,I+=oe):(X++,pe=!pe);return X===B.length||I===(_?b:x)&&X===B.length-1?B:null}static getNumberOfECCodeWords(h){return 2<<h}static adjustCodewordStartColumn(h,x,b,_,j,A){let I=j,B=_?-1:1;for(let X=0;X<2;X++){for(;(_?I>=x:I<b)&&_===h.get(I,A);){if(Math.abs(j-I)>G.CODEWORD_SKEW_SIZE)return j;I+=B}B=-B,_=!_}return I}static checkCodewordSkew(h,x,b){return x-G.CODEWORD_SKEW_SIZE<=h&&h<=b+G.CODEWORD_SKEW_SIZE}static decodeCodewords(h,x,b){if(h.length===0)throw R.getFormatInstance();let _=1<<x+1,j=G.correctErrors(h,b,_);G.verifyCodewordCount(h,_);let A=Tt.decode(h,""+x);return A.setErrorsCorrected(j),A.setErasures(b.length),A}static correctErrors(h,x,b){if(x!=null&&x.length>b/2+G.MAX_ERRORS||b<0||b>G.MAX_EC_CODEWORDS)throw g.getChecksumInstance();return G.errorCorrection.decode(h,b,x)}static verifyCodewordCount(h,x){if(h.length<4)throw R.getFormatInstance();let b=h[0];if(b>h.length)throw R.getFormatInstance();if(b===0)if(x<h.length)h[0]=h.length-x;else throw R.getFormatInstance()}static getBitCountForCodeword(h){let x=new Int32Array(8),b=0,_=x.length-1;for(;!((h&1)!==b&&(b=h&1,_--,_<0));)x[_]++,h>>=1;return x}static getCodewordBucketNumber(h){return h instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(h):this.getCodewordBucketNumber_number(h)}static getCodewordBucketNumber_number(h){return G.getCodewordBucketNumber(G.getBitCountForCodeword(h))}static getCodewordBucketNumber_Int32Array(h){return(h[0]-h[2]+h[4]-h[6]+9)%9}static toString(h){let x=new ho;for(let b=0;b<h.length;b++){x.format("Row %2d: ",b);for(let _=0;_<h[b].length;_++){let j=h[b][_];j.getValue().length===0?x.format("        ",null):x.format("%4d(%2d)",j.getValue()[0],j.getConfidence(j.getValue()[0]))}x.format("%n")}return x.toString()}}G.CODEWORD_SKEW_SIZE=2,G.MAX_ERRORS=3,G.MAX_EC_CODEWORDS=512,G.errorCorrection=new rl;class ge{decode(h,x=null){let b=ge.decode(h,x,!1);if(b==null||b.length===0||b[0]==null)throw ae.getNotFoundInstance();return b[0]}decodeMultiple(h,x=null){try{return ge.decode(h,x,!0)}catch(b){throw b instanceof R||b instanceof g?ae.getNotFoundInstance():b}}static decode(h,x,b){const _=new Array,j=un.detectMultiple(h,x,b);for(const A of j.getPoints()){const I=G.decode(j.getBits(),A[4],A[5],A[6],A[7],ge.getMinCodewordWidth(A),ge.getMaxCodewordWidth(A)),B=new Y(I.getText(),I.getRawBytes(),void 0,A,ee.PDF_417);B.putMetadata(me.ERROR_CORRECTION_LEVEL,I.getECLevel());const X=I.getOther();X!=null&&B.putMetadata(me.PDF417_EXTRA_METADATA,X),_.push(B)}return _.map(A=>A)}static getMaxWidth(h,x){return h==null||x==null?0:Math.trunc(Math.abs(h.getX()-x.getX()))}static getMinWidth(h,x){return h==null||x==null?E.MAX_VALUE:Math.trunc(Math.abs(h.getX()-x.getX()))}static getMaxCodewordWidth(h){return Math.floor(Math.max(Math.max(ge.getMaxWidth(h[0],h[4]),ge.getMaxWidth(h[6],h[2])*dn.MODULES_IN_CODEWORD/dn.MODULES_IN_STOP_PATTERN),Math.max(ge.getMaxWidth(h[1],h[5]),ge.getMaxWidth(h[7],h[3])*dn.MODULES_IN_CODEWORD/dn.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(h){return Math.floor(Math.min(Math.min(ge.getMinWidth(h[0],h[4]),ge.getMinWidth(h[6],h[2])*dn.MODULES_IN_CODEWORD/dn.MODULES_IN_STOP_PATTERN),Math.min(ge.getMinWidth(h[1],h[5]),ge.getMinWidth(h[7],h[3])*dn.MODULES_IN_CODEWORD/dn.MODULES_IN_STOP_PATTERN)))}reset(){}}class qe extends d{}qe.kind="ReaderException";class Je{constructor(h,x){this.verbose=h===!0,x&&this.setHints(x)}decode(h,x){return x&&this.setHints(x),this.decodeInternal(h)}decodeWithState(h){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(h)}setHints(h){this.hints=h;const x=!n(h)&&h.get(W.TRY_HARDER)===!0,b=n(h)?null:h.get(W.POSSIBLE_FORMATS),_=new Array;if(!n(b)){const j=b.some(A=>A===ee.UPC_A||A===ee.UPC_E||A===ee.EAN_13||A===ee.EAN_8||A===ee.CODABAR||A===ee.CODE_39||A===ee.CODE_93||A===ee.CODE_128||A===ee.ITF||A===ee.RSS_14||A===ee.RSS_EXPANDED);j&&!x&&_.push(new Na(h,this.verbose)),b.includes(ee.QR_CODE)&&_.push(new uo),b.includes(ee.DATA_MATRIX)&&_.push(new at),b.includes(ee.AZTEC)&&_.push(new ur),b.includes(ee.PDF_417)&&_.push(new ge),j&&x&&_.push(new Na(h,this.verbose))}_.length===0&&(x||_.push(new Na(h,this.verbose)),_.push(new uo),_.push(new at),_.push(new ur),_.push(new ge),x&&_.push(new Na(h,this.verbose))),this.readers=_}reset(){if(this.readers!==null)for(const h of this.readers)h.reset()}decodeInternal(h){if(this.readers===null)throw new qe("No readers where selected, nothing can be read.");for(const x of this.readers)try{return x.decode(h,this.hints)}catch(b){if(b instanceof qe)continue}throw new ae("No MultiFormat Readers were able to detect the code.")}}class pt extends te{constructor(h=null,x=500){const b=new Je;b.setHints(h),super(b,x)}decodeBitmap(h){return this.reader.decodeWithState(h)}}class zt extends te{constructor(h=500){super(new ge,h)}}class ir extends te{constructor(h=500){super(new uo,h)}}var qr;(function(xe){xe[xe.ERROR_CORRECTION=0]="ERROR_CORRECTION",xe[xe.CHARACTER_SET=1]="CHARACTER_SET",xe[xe.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",xe[xe.MIN_SIZE=3]="MIN_SIZE",xe[xe.MAX_SIZE=4]="MAX_SIZE",xe[xe.MARGIN=5]="MARGIN",xe[xe.PDF417_COMPACT=6]="PDF417_COMPACT",xe[xe.PDF417_COMPACTION=7]="PDF417_COMPACTION",xe[xe.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",xe[xe.AZTEC_LAYERS=9]="AZTEC_LAYERS",xe[xe.QR_VERSION=10]="QR_VERSION"})(qr||(qr={}));var Tr=qr;class wn{constructor(h){this.field=h,this.cachedGenerators=[],this.cachedGenerators.push(new be(h,Int32Array.from([1])))}buildGenerator(h){const x=this.cachedGenerators;if(h>=x.length){let b=x[x.length-1];const _=this.field;for(let j=x.length;j<=h;j++){const A=b.multiply(new be(_,Int32Array.from([1,_.exp(j-1+_.getGeneratorBase())])));x.push(A),b=A}}return x[h]}encode(h,x){if(x===0)throw new p("No error correction bytes");const b=h.length-x;if(b<=0)throw new p("No data bytes provided");const _=this.buildGenerator(x),j=new Int32Array(b);w.arraycopy(h,0,j,0,b);let A=new be(this.field,j);A=A.multiplyByMonomial(x,1);const B=A.divide(_)[1].getCoefficients(),X=x-B.length;for(let oe=0;oe<X;oe++)h[b+oe]=0;w.arraycopy(B,0,h,b+X,B.length)}}class Hr{constructor(){}static applyMaskPenaltyRule1(h){return Hr.applyMaskPenaltyRule1Internal(h,!0)+Hr.applyMaskPenaltyRule1Internal(h,!1)}static applyMaskPenaltyRule2(h){let x=0;const b=h.getArray(),_=h.getWidth(),j=h.getHeight();for(let A=0;A<j-1;A++){const I=b[A];for(let B=0;B<_-1;B++){const X=I[B];X===I[B+1]&&X===b[A+1][B]&&X===b[A+1][B+1]&&x++}}return Hr.N2*x}static applyMaskPenaltyRule3(h){let x=0;const b=h.getArray(),_=h.getWidth(),j=h.getHeight();for(let A=0;A<j;A++)for(let I=0;I<_;I++){const B=b[A];I+6<_&&B[I]===1&&B[I+1]===0&&B[I+2]===1&&B[I+3]===1&&B[I+4]===1&&B[I+5]===0&&B[I+6]===1&&(Hr.isWhiteHorizontal(B,I-4,I)||Hr.isWhiteHorizontal(B,I+7,I+11))&&x++,A+6<j&&b[A][I]===1&&b[A+1][I]===0&&b[A+2][I]===1&&b[A+3][I]===1&&b[A+4][I]===1&&b[A+5][I]===0&&b[A+6][I]===1&&(Hr.isWhiteVertical(b,I,A-4,A)||Hr.isWhiteVertical(b,I,A+7,A+11))&&x++}return x*Hr.N3}static isWhiteHorizontal(h,x,b){x=Math.max(x,0),b=Math.min(b,h.length);for(let _=x;_<b;_++)if(h[_]===1)return!1;return!0}static isWhiteVertical(h,x,b,_){b=Math.max(b,0),_=Math.min(_,h.length);for(let j=b;j<_;j++)if(h[j][x]===1)return!1;return!0}static applyMaskPenaltyRule4(h){let x=0;const b=h.getArray(),_=h.getWidth(),j=h.getHeight();for(let B=0;B<j;B++){const X=b[B];for(let oe=0;oe<_;oe++)X[oe]===1&&x++}const A=h.getHeight()*h.getWidth();return Math.floor(Math.abs(x*2-A)*10/A)*Hr.N4}static getDataMaskBit(h,x,b){let _,j;switch(h){case 0:_=b+x&1;break;case 1:_=b&1;break;case 2:_=x%3;break;case 3:_=(b+x)%3;break;case 4:_=Math.floor(b/2)+Math.floor(x/3)&1;break;case 5:j=b*x,_=(j&1)+j%3;break;case 6:j=b*x,_=(j&1)+j%3&1;break;case 7:j=b*x,_=j%3+(b+x&1)&1;break;default:throw new p("Invalid mask pattern: "+h)}return _===0}static applyMaskPenaltyRule1Internal(h,x){let b=0;const _=x?h.getHeight():h.getWidth(),j=x?h.getWidth():h.getHeight(),A=h.getArray();for(let I=0;I<_;I++){let B=0,X=-1;for(let oe=0;oe<j;oe++){const pe=x?A[I][oe]:A[oe][I];pe===X?B++:(B>=5&&(b+=Hr.N1+(B-5)),B=1,X=pe)}B>=5&&(b+=Hr.N1+(B-5))}return b}}Hr.N1=3,Hr.N2=3,Hr.N3=40,Hr.N4=10;class aa{constructor(h,x){this.width=h,this.height=x;const b=new Array(x);for(let _=0;_!==x;_++)b[_]=new Uint8Array(h);this.bytes=b}getHeight(){return this.height}getWidth(){return this.width}get(h,x){return this.bytes[x][h]}getArray(){return this.bytes}setNumber(h,x,b){this.bytes[x][h]=b}setBoolean(h,x,b){this.bytes[x][h]=b?1:0}clear(h){for(const x of this.bytes)O.fill(x,h)}equals(h){if(!(h instanceof aa))return!1;const x=h;if(this.width!==x.width||this.height!==x.height)return!1;for(let b=0,_=this.height;b<_;++b){const j=this.bytes[b],A=x.bytes[b];for(let I=0,B=this.width;I<B;++I)if(j[I]!==A[I])return!1}return!0}toString(){const h=new Q;for(let x=0,b=this.height;x<b;++x){const _=this.bytes[x];for(let j=0,A=this.width;j<A;++j)switch(_[j]){case 0:h.append(" 0");break;case 1:h.append(" 1");break;default:h.append("  ");break}h.append(`
`)}return h.toString()}}class _a{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const h=new Q;return h.append(`<<
`),h.append(" mode: "),h.append(this.mode?this.mode.toString():"null"),h.append(`
 ecLevel: `),h.append(this.ecLevel?this.ecLevel.toString():"null"),h.append(`
 version: `),h.append(this.version?this.version.toString():"null"),h.append(`
 maskPattern: `),h.append(this.maskPattern.toString()),this.matrix?(h.append(`
 matrix:
`),h.append(this.matrix.toString())):h.append(`
 matrix: null
`),h.append(`>>
`),h.toString()}setMode(h){this.mode=h}setECLevel(h){this.ecLevel=h}setVersion(h){this.version=h}setMaskPattern(h){this.maskPattern=h}setMatrix(h){this.matrix=h}static isValidMaskPattern(h){return h>=0&&h<_a.NUM_MASK_PATTERNS}}_a.NUM_MASK_PATTERNS=8;class jn extends d{}jn.kind="WriterException";class Or{constructor(){}static clearMatrix(h){h.clear(255)}static buildMatrix(h,x,b,_,j){Or.clearMatrix(j),Or.embedBasicPatterns(b,j),Or.embedTypeInfo(x,_,j),Or.maybeEmbedVersionInfo(b,j),Or.embedDataBits(h,_,j)}static embedBasicPatterns(h,x){Or.embedPositionDetectionPatternsAndSeparators(x),Or.embedDarkDotAtLeftBottomCorner(x),Or.maybeEmbedPositionAdjustmentPatterns(h,x),Or.embedTimingPatterns(x)}static embedTypeInfo(h,x,b){const _=new D;Or.makeTypeInfoBits(h,x,_);for(let j=0,A=_.getSize();j<A;++j){const I=_.get(_.getSize()-1-j),B=Or.TYPE_INFO_COORDINATES[j],X=B[0],oe=B[1];if(b.setBoolean(X,oe,I),j<8){const pe=b.getWidth()-j-1;b.setBoolean(pe,8,I)}else{const Ae=b.getHeight()-7+(j-8);b.setBoolean(8,Ae,I)}}}static maybeEmbedVersionInfo(h,x){if(h.getVersionNumber()<7)return;const b=new D;Or.makeVersionInfoBits(h,b);let _=17;for(let j=0;j<6;++j)for(let A=0;A<3;++A){const I=b.get(_);_--,x.setBoolean(j,x.getHeight()-11+A,I),x.setBoolean(x.getHeight()-11+A,j,I)}}static embedDataBits(h,x,b){let _=0,j=-1,A=b.getWidth()-1,I=b.getHeight()-1;for(;A>0;){for(A===6&&(A-=1);I>=0&&I<b.getHeight();){for(let B=0;B<2;++B){const X=A-B;if(!Or.isEmpty(b.get(X,I)))continue;let oe;_<h.getSize()?(oe=h.get(_),++_):oe=!1,x!==255&&Hr.getDataMaskBit(x,X,I)&&(oe=!oe),b.setBoolean(X,I,oe)}I+=j}j=-j,I+=j,A-=2}if(_!==h.getSize())throw new jn("Not all bits consumed: "+_+"/"+h.getSize())}static findMSBSet(h){return 32-E.numberOfLeadingZeros(h)}static calculateBCHCode(h,x){if(x===0)throw new p("0 polynomial");const b=Or.findMSBSet(x);for(h<<=b-1;Or.findMSBSet(h)>=b;)h^=x<<Or.findMSBSet(h)-b;return h}static makeTypeInfoBits(h,x,b){if(!_a.isValidMaskPattern(x))throw new jn("Invalid mask pattern");const _=h.getBits()<<3|x;b.appendBits(_,5);const j=Or.calculateBCHCode(_,Or.TYPE_INFO_POLY);b.appendBits(j,10);const A=new D;if(A.appendBits(Or.TYPE_INFO_MASK_PATTERN,15),b.xor(A),b.getSize()!==15)throw new jn("should not happen but we got: "+b.getSize())}static makeVersionInfoBits(h,x){x.appendBits(h.getVersionNumber(),6);const b=Or.calculateBCHCode(h.getVersionNumber(),Or.VERSION_INFO_POLY);if(x.appendBits(b,12),x.getSize()!==18)throw new jn("should not happen but we got: "+x.getSize())}static isEmpty(h){return h===255}static embedTimingPatterns(h){for(let x=8;x<h.getWidth()-8;++x){const b=(x+1)%2;Or.isEmpty(h.get(x,6))&&h.setNumber(x,6,b),Or.isEmpty(h.get(6,x))&&h.setNumber(6,x,b)}}static embedDarkDotAtLeftBottomCorner(h){if(h.get(8,h.getHeight()-8)===0)throw new jn;h.setNumber(8,h.getHeight()-8,1)}static embedHorizontalSeparationPattern(h,x,b){for(let _=0;_<8;++_){if(!Or.isEmpty(b.get(h+_,x)))throw new jn;b.setNumber(h+_,x,0)}}static embedVerticalSeparationPattern(h,x,b){for(let _=0;_<7;++_){if(!Or.isEmpty(b.get(h,x+_)))throw new jn;b.setNumber(h,x+_,0)}}static embedPositionAdjustmentPattern(h,x,b){for(let _=0;_<5;++_){const j=Or.POSITION_ADJUSTMENT_PATTERN[_];for(let A=0;A<5;++A)b.setNumber(h+A,x+_,j[A])}}static embedPositionDetectionPattern(h,x,b){for(let _=0;_<7;++_){const j=Or.POSITION_DETECTION_PATTERN[_];for(let A=0;A<7;++A)b.setNumber(h+A,x+_,j[A])}}static embedPositionDetectionPatternsAndSeparators(h){const x=Or.POSITION_DETECTION_PATTERN[0].length;Or.embedPositionDetectionPattern(0,0,h),Or.embedPositionDetectionPattern(h.getWidth()-x,0,h),Or.embedPositionDetectionPattern(0,h.getWidth()-x,h);const b=8;Or.embedHorizontalSeparationPattern(0,b-1,h),Or.embedHorizontalSeparationPattern(h.getWidth()-b,b-1,h),Or.embedHorizontalSeparationPattern(0,h.getWidth()-b,h);const _=7;Or.embedVerticalSeparationPattern(_,0,h),Or.embedVerticalSeparationPattern(h.getHeight()-_-1,0,h),Or.embedVerticalSeparationPattern(_,h.getHeight()-_,h)}static maybeEmbedPositionAdjustmentPatterns(h,x){if(h.getVersionNumber()<2)return;const b=h.getVersionNumber()-1,_=Or.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[b];for(let j=0,A=_.length;j!==A;j++){const I=_[j];if(I>=0)for(let B=0;B!==A;B++){const X=_[B];X>=0&&Or.isEmpty(x.get(X,I))&&Or.embedPositionAdjustmentPattern(X-2,I-2,x)}}}}Or.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),Or.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),Or.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),Or.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),Or.VERSION_INFO_POLY=7973,Or.TYPE_INFO_POLY=1335,Or.TYPE_INFO_MASK_PATTERN=21522;class Hs{constructor(h,x){this.dataBytes=h,this.errorCorrectionBytes=x}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class In{constructor(){}static calculateMaskPenalty(h){return Hr.applyMaskPenaltyRule1(h)+Hr.applyMaskPenaltyRule2(h)+Hr.applyMaskPenaltyRule3(h)+Hr.applyMaskPenaltyRule4(h)}static encode(h,x,b=null){let _=In.DEFAULT_BYTE_MODE_ENCODING;const j=b!==null&&b.get(Tr.CHARACTER_SET)!==void 0;j&&(_=b.get(Tr.CHARACTER_SET).toString());const A=this.chooseMode(h,_),I=new D;if(A===Lr.BYTE&&(j||In.DEFAULT_BYTE_MODE_ENCODING!==_)){const Ht=U.getCharacterSetECIByName(_);Ht!==void 0&&this.appendECI(Ht,I)}this.appendModeInfo(A,I);const B=new D;this.appendBytes(h,A,B,_);let X;if(b!==null&&b.get(Tr.QR_VERSION)!==void 0){const Ht=Number.parseInt(b.get(Tr.QR_VERSION).toString(),10);X=vr.getVersionForNumber(Ht);const Ft=this.calculateBitsNeeded(A,I,B,X);if(!this.willFit(Ft,X,x))throw new jn("Data too big for requested version")}else X=this.recommendVersion(x,A,I,B);const oe=new D;oe.appendBitArray(I);const pe=A===Lr.BYTE?B.getSizeInBytes():h.length;this.appendLengthInfo(pe,X,A,oe),oe.appendBitArray(B);const Ae=X.getECBlocksForLevel(x),ze=X.getTotalCodewords()-Ae.getTotalECCodewords();this.terminateBits(ze,oe);const Xe=this.interleaveWithECBytes(oe,X.getTotalCodewords(),ze,Ae.getNumBlocks()),tt=new _a;tt.setECLevel(x),tt.setMode(A),tt.setVersion(X);const xt=X.getDimensionForVersion(),jt=new aa(xt,xt),qt=this.chooseMaskPattern(Xe,x,X,jt);return tt.setMaskPattern(qt),Or.buildMatrix(Xe,x,X,qt,jt),tt.setMatrix(jt),tt}static recommendVersion(h,x,b,_){const j=this.calculateBitsNeeded(x,b,_,vr.getVersionForNumber(1)),A=this.chooseVersion(j,h),I=this.calculateBitsNeeded(x,b,_,A);return this.chooseVersion(I,h)}static calculateBitsNeeded(h,x,b,_){return x.getSize()+h.getCharacterCountBits(_)+b.getSize()}static getAlphanumericCode(h){return h<In.ALPHANUMERIC_TABLE.length?In.ALPHANUMERIC_TABLE[h]:-1}static chooseMode(h,x=null){if(U.SJIS.getName()===x&&this.isOnlyDoubleByteKanji(h))return Lr.KANJI;let b=!1,_=!1;for(let j=0,A=h.length;j<A;++j){const I=h.charAt(j);if(In.isDigit(I))b=!0;else if(this.getAlphanumericCode(I.charCodeAt(0))!==-1)_=!0;else return Lr.BYTE}return _?Lr.ALPHANUMERIC:b?Lr.NUMERIC:Lr.BYTE}static isOnlyDoubleByteKanji(h){let x;try{x=q.encode(h,U.SJIS)}catch{return!1}const b=x.length;if(b%2!==0)return!1;for(let _=0;_<b;_+=2){const j=x[_]&255;if((j<129||j>159)&&(j<224||j>235))return!1}return!0}static chooseMaskPattern(h,x,b,_){let j=Number.MAX_SAFE_INTEGER,A=-1;for(let I=0;I<_a.NUM_MASK_PATTERNS;I++){Or.buildMatrix(h,x,b,I,_);let B=this.calculateMaskPenalty(_);B<j&&(j=B,A=I)}return A}static chooseVersion(h,x){for(let b=1;b<=40;b++){const _=vr.getVersionForNumber(b);if(In.willFit(h,_,x))return _}throw new jn("Data too big")}static willFit(h,x,b){const _=x.getTotalCodewords(),A=x.getECBlocksForLevel(b).getTotalECCodewords(),I=_-A,B=(h+7)/8;return I>=B}static terminateBits(h,x){const b=h*8;if(x.getSize()>b)throw new jn("data bits cannot fit in the QR Code"+x.getSize()+" > "+b);for(let A=0;A<4&&x.getSize()<b;++A)x.appendBit(!1);const _=x.getSize()&7;if(_>0)for(let A=_;A<8;A++)x.appendBit(!1);const j=h-x.getSizeInBytes();for(let A=0;A<j;++A)x.appendBits((A&1)===0?236:17,8);if(x.getSize()!==b)throw new jn("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(h,x,b,_,j,A){if(_>=b)throw new jn("Block ID too large");const I=h%b,B=b-I,X=Math.floor(h/b),oe=X+1,pe=Math.floor(x/b),Ae=pe+1,ze=X-pe,Xe=oe-Ae;if(ze!==Xe)throw new jn("EC bytes mismatch");if(b!==B+I)throw new jn("RS blocks mismatch");if(h!==(pe+ze)*B+(Ae+Xe)*I)throw new jn("Total bytes mismatch");_<B?(j[0]=pe,A[0]=ze):(j[0]=Ae,A[0]=Xe)}static interleaveWithECBytes(h,x,b,_){if(h.getSizeInBytes()!==b)throw new jn("Number of bits and data bytes does not match");let j=0,A=0,I=0;const B=new Array;for(let oe=0;oe<_;++oe){const pe=new Int32Array(1),Ae=new Int32Array(1);In.getNumDataBytesAndNumECBytesForBlockID(x,b,_,oe,pe,Ae);const ze=pe[0],Xe=new Uint8Array(ze);h.toBytes(8*j,Xe,0,ze);const tt=In.generateECBytes(Xe,Ae[0]);B.push(new Hs(Xe,tt)),A=Math.max(A,ze),I=Math.max(I,tt.length),j+=pe[0]}if(b!==j)throw new jn("Data bytes does not match offset");const X=new D;for(let oe=0;oe<A;++oe)for(const pe of B){const Ae=pe.getDataBytes();oe<Ae.length&&X.appendBits(Ae[oe],8)}for(let oe=0;oe<I;++oe)for(const pe of B){const Ae=pe.getErrorCorrectionBytes();oe<Ae.length&&X.appendBits(Ae[oe],8)}if(x!==X.getSizeInBytes())throw new jn("Interleaving error: "+x+" and "+X.getSizeInBytes()+" differ.");return X}static generateECBytes(h,x){const b=h.length,_=new Int32Array(b+x);for(let A=0;A<b;A++)_[A]=h[A]&255;new wn(Te.QR_CODE_FIELD_256).encode(_,x);const j=new Uint8Array(x);for(let A=0;A<x;A++)j[A]=_[b+A];return j}static appendModeInfo(h,x){x.appendBits(h.getBits(),4)}static appendLengthInfo(h,x,b,_){const j=b.getCharacterCountBits(x);if(h>=1<<j)throw new jn(h+" is bigger than "+((1<<j)-1));_.appendBits(h,j)}static appendBytes(h,x,b,_){switch(x){case Lr.NUMERIC:In.appendNumericBytes(h,b);break;case Lr.ALPHANUMERIC:In.appendAlphanumericBytes(h,b);break;case Lr.BYTE:In.append8BitBytes(h,b,_);break;case Lr.KANJI:In.appendKanjiBytes(h,b);break;default:throw new jn("Invalid mode: "+x)}}static getDigit(h){return h.charCodeAt(0)-48}static isDigit(h){const x=In.getDigit(h);return x>=0&&x<=9}static appendNumericBytes(h,x){const b=h.length;let _=0;for(;_<b;){const j=In.getDigit(h.charAt(_));if(_+2<b){const A=In.getDigit(h.charAt(_+1)),I=In.getDigit(h.charAt(_+2));x.appendBits(j*100+A*10+I,10),_+=3}else if(_+1<b){const A=In.getDigit(h.charAt(_+1));x.appendBits(j*10+A,7),_+=2}else x.appendBits(j,4),_++}}static appendAlphanumericBytes(h,x){const b=h.length;let _=0;for(;_<b;){const j=In.getAlphanumericCode(h.charCodeAt(_));if(j===-1)throw new jn;if(_+1<b){const A=In.getAlphanumericCode(h.charCodeAt(_+1));if(A===-1)throw new jn;x.appendBits(j*45+A,11),_+=2}else x.appendBits(j,6),_++}}static append8BitBytes(h,x,b){let _;try{_=q.encode(h,b)}catch(j){throw new jn(j)}for(let j=0,A=_.length;j!==A;j++){const I=_[j];x.appendBits(I,8)}}static appendKanjiBytes(h,x){let b;try{b=q.encode(h,U.SJIS)}catch(j){throw new jn(j)}const _=b.length;for(let j=0;j<_;j+=2){const A=b[j]&255,I=b[j+1]&255,B=A<<8&4294967295|I;let X=-1;if(B>=33088&&B<=40956?X=B-33088:B>=57408&&B<=60351&&(X=B-49472),X===-1)throw new jn("Invalid byte sequence");const oe=(X>>8)*192+(X&255);x.appendBits(oe,13)}}static appendECI(h,x){x.appendBits(Lr.ECI.getBits(),4),x.appendBits(h.getValue(),8)}}In.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),In.DEFAULT_BYTE_MODE_ENCODING=U.UTF8.getName();class cs{write(h,x,b,_=null){if(h.length===0)throw new p("Found empty contents");if(x<0||b<0)throw new p("Requested dimensions are too small: "+x+"x"+b);let j=br.L,A=cs.QUIET_ZONE_SIZE;_!==null&&(_.get(Tr.ERROR_CORRECTION)!==void 0&&(j=br.fromString(_.get(Tr.ERROR_CORRECTION).toString())),_.get(Tr.MARGIN)!==void 0&&(A=Number.parseInt(_.get(Tr.MARGIN).toString(),10)));const I=In.encode(h,j,_);return this.renderResult(I,x,b,A)}writeToDom(h,x,b,_,j=null){typeof h=="string"&&(h=document.querySelector(h));const A=this.write(x,b,_,j);h&&h.appendChild(A)}renderResult(h,x,b,_){const j=h.getMatrix();if(j===null)throw new ye;const A=j.getWidth(),I=j.getHeight(),B=A+_*2,X=I+_*2,oe=Math.max(x,B),pe=Math.max(b,X),Ae=Math.min(Math.floor(oe/B),Math.floor(pe/X)),ze=Math.floor((oe-A*Ae)/2),Xe=Math.floor((pe-I*Ae)/2),tt=this.createSVGElement(oe,pe);for(let xt=0,jt=Xe;xt<I;xt++,jt+=Ae)for(let qt=0,Ht=ze;qt<A;qt++,Ht+=Ae)if(j.get(qt,xt)===1){const Ft=this.createSvgRectElement(Ht,jt,Ae,Ae);tt.appendChild(Ft)}return tt}createSVGElement(h,x){const b=document.createElementNS(cs.SVG_NS,"svg");return b.setAttributeNS(null,"height",h.toString()),b.setAttributeNS(null,"width",x.toString()),b}createSvgRectElement(h,x,b,_){const j=document.createElementNS(cs.SVG_NS,"rect");return j.setAttributeNS(null,"x",h.toString()),j.setAttributeNS(null,"y",x.toString()),j.setAttributeNS(null,"height",b.toString()),j.setAttributeNS(null,"width",_.toString()),j.setAttributeNS(null,"fill","#000000"),j}}cs.QUIET_ZONE_SIZE=4,cs.SVG_NS="http://www.w3.org/2000/svg";class fi{encode(h,x,b,_,j){if(h.length===0)throw new p("Found empty contents");if(x!==ee.QR_CODE)throw new p("Can only encode QR_CODE, but got "+x);if(b<0||_<0)throw new p(`Requested dimensions are too small: ${b}x${_}`);let A=br.L,I=fi.QUIET_ZONE_SIZE;j!==null&&(j.get(Tr.ERROR_CORRECTION)!==void 0&&(A=br.fromString(j.get(Tr.ERROR_CORRECTION).toString())),j.get(Tr.MARGIN)!==void 0&&(I=Number.parseInt(j.get(Tr.MARGIN).toString(),10)));const B=In.encode(h,A,j);return fi.renderResult(B,b,_,I)}static renderResult(h,x,b,_){const j=h.getMatrix();if(j===null)throw new ye;const A=j.getWidth(),I=j.getHeight(),B=A+_*2,X=I+_*2,oe=Math.max(x,B),pe=Math.max(b,X),Ae=Math.min(Math.floor(oe/B),Math.floor(pe/X)),ze=Math.floor((oe-A*Ae)/2),Xe=Math.floor((pe-I*Ae)/2),tt=new re(oe,pe);for(let xt=0,jt=Xe;xt<I;xt++,jt+=Ae)for(let qt=0,Ht=ze;qt<A;qt++,Ht+=Ae)j.get(qt,xt)===1&&tt.setRegion(Ht,jt,Ae,Ae);return tt}}fi.QUIET_ZONE_SIZE=4;class nl{encode(h,x,b,_,j){let A;switch(x){case ee.QR_CODE:A=new fi;break;default:throw new p("No encoder available for format "+x)}return A.encode(h,x,b,_,j)}}class _l extends Se{constructor(h,x,b,_,j,A,I,B){if(super(A,I),this.yuvData=h,this.dataWidth=x,this.dataHeight=b,this.left=_,this.top=j,_+A>x||j+I>b)throw new p("Crop rectangle does not fit within image data.");B&&this.reverseHorizontal(A,I)}getRow(h,x){if(h<0||h>=this.getHeight())throw new p("Requested row is outside the image: "+h);const b=this.getWidth();(x==null||x.length<b)&&(x=new Uint8ClampedArray(b));const _=(h+this.top)*this.dataWidth+this.left;return w.arraycopy(this.yuvData,_,x,0,b),x}getMatrix(){const h=this.getWidth(),x=this.getHeight();if(h===this.dataWidth&&x===this.dataHeight)return this.yuvData;const b=h*x,_=new Uint8ClampedArray(b);let j=this.top*this.dataWidth+this.left;if(h===this.dataWidth)return w.arraycopy(this.yuvData,j,_,0,b),_;for(let A=0;A<x;A++){const I=A*h;w.arraycopy(this.yuvData,j,_,I,h),j+=this.dataWidth}return _}isCropSupported(){return!0}crop(h,x,b,_){return new _l(this.yuvData,this.dataWidth,this.dataHeight,this.left+h,this.top+x,b,_,!1)}renderThumbnail(){const h=this.getWidth()/_l.THUMBNAIL_SCALE_FACTOR,x=this.getHeight()/_l.THUMBNAIL_SCALE_FACTOR,b=new Int32Array(h*x),_=this.yuvData;let j=this.top*this.dataWidth+this.left;for(let A=0;A<x;A++){const I=A*h;for(let B=0;B<h;B++){const X=_[j+B*_l.THUMBNAIL_SCALE_FACTOR]&255;b[I+B]=4278190080|X*65793}j+=this.dataWidth*_l.THUMBNAIL_SCALE_FACTOR}return b}getThumbnailWidth(){return this.getWidth()/_l.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/_l.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(h,x){const b=this.yuvData;for(let _=0,j=this.top*this.dataWidth+this.left;_<x;_++,j+=this.dataWidth){const A=j+h/2;for(let I=j,B=j+h-1;I<A;I++,B--){const X=b[I];b[I]=b[B],b[B]=X}}}invert(){return new ke(this)}}_l.THUMBNAIL_SCALE_FACTOR=2;class Rc extends Se{constructor(h,x,b,_,j,A,I){if(super(x,b),this.dataWidth=_,this.dataHeight=j,this.left=A,this.top=I,h.BYTES_PER_ELEMENT===4){const B=x*b,X=new Uint8ClampedArray(B);for(let oe=0;oe<B;oe++){const pe=h[oe],Ae=pe>>16&255,ze=pe>>7&510,Xe=pe&255;X[oe]=(Ae+ze+Xe)/4&255}this.luminances=X}else this.luminances=h;if(_===void 0&&(this.dataWidth=x),j===void 0&&(this.dataHeight=b),A===void 0&&(this.left=0),I===void 0&&(this.top=0),this.left+x>this.dataWidth||this.top+b>this.dataHeight)throw new p("Crop rectangle does not fit within image data.")}getRow(h,x){if(h<0||h>=this.getHeight())throw new p("Requested row is outside the image: "+h);const b=this.getWidth();(x==null||x.length<b)&&(x=new Uint8ClampedArray(b));const _=(h+this.top)*this.dataWidth+this.left;return w.arraycopy(this.luminances,_,x,0,b),x}getMatrix(){const h=this.getWidth(),x=this.getHeight();if(h===this.dataWidth&&x===this.dataHeight)return this.luminances;const b=h*x,_=new Uint8ClampedArray(b);let j=this.top*this.dataWidth+this.left;if(h===this.dataWidth)return w.arraycopy(this.luminances,j,_,0,b),_;for(let A=0;A<x;A++){const I=A*h;w.arraycopy(this.luminances,j,_,I,h),j+=this.dataWidth}return _}isCropSupported(){return!0}crop(h,x,b,_){return new Rc(this.luminances,b,_,this.dataWidth,this.dataHeight,this.left+h,this.top+x)}invert(){return new ke(this)}}class Fc extends U{static forName(h){return this.getCharacterSetECIByName(h)}}class Rl{}Rl.ISO_8859_1=U.ISO8859_1;class Fl{isCompact(){return this.compact}setCompact(h){this.compact=h}getSize(){return this.size}setSize(h){this.size=h}getLayers(){return this.layers}setLayers(h){this.layers=h}getCodeWords(){return this.codeWords}setCodeWords(h){this.codeWords=h}getMatrix(){return this.matrix}setMatrix(h){this.matrix=h}}class Bc{static singletonList(h){return[h]}static min(h,x){return h.sort(x)[0]}}class Uc{constructor(h){this.previous=h}getPrevious(){return this.previous}}class ps extends Uc{constructor(h,x,b){super(h),this.value=x,this.bitCount=b}appendTo(h,x){h.appendBits(this.value,this.bitCount)}add(h,x){return new ps(this,h,x)}addBinaryShift(h,x){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new ps(this,h,x)}toString(){let h=this.value&(1<<this.bitCount)-1;return h|=1<<this.bitCount,"<"+E.toBinaryString(h|1<<this.bitCount).substring(1)+">"}}class Mo extends ps{constructor(h,x,b){super(h,0,0),this.binaryShiftStart=x,this.binaryShiftByteCount=b}appendTo(h,x){for(let b=0;b<this.binaryShiftByteCount;b++)(b===0||b===31&&this.binaryShiftByteCount<=62)&&(h.appendBits(31,5),this.binaryShiftByteCount>62?h.appendBits(this.binaryShiftByteCount-31,16):b===0?h.appendBits(Math.min(this.binaryShiftByteCount,31),5):h.appendBits(this.binaryShiftByteCount-31,5)),h.appendBits(x[this.binaryShiftStart+b],8)}addBinaryShift(h,x){return new Mo(this,h,x)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function zc(xe,h,x){return new Mo(xe,h,x)}function Lo(xe,h,x){return new ps(xe,h,x)}const Ro=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Sa=0,Bl=1,mi=2,iu=3,gs=4,mo=new ps(null,0,0),xo=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function Zu(xe){for(let h of xe)O.fill(h,-1);return xe[Sa][gs]=0,xe[Bl][gs]=0,xe[Bl][Sa]=28,xe[iu][gs]=0,xe[mi][gs]=0,xe[mi][Sa]=15,xe}const Ul=Zu(O.createInt32Array(6,6));class xi{constructor(h,x,b,_){this.token=h,this.mode=x,this.binaryShiftByteCount=b,this.bitCount=_}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(h,x){let b=this.bitCount,_=this.token;if(h!==this.mode){let A=xo[this.mode][h];_=Lo(_,A&65535,A>>16),b+=A>>16}let j=h===mi?4:5;return _=Lo(_,x,j),new xi(_,h,0,b+j)}shiftAndAppend(h,x){let b=this.token,_=this.mode===mi?4:5;return b=Lo(b,Ul[this.mode][h],_),b=Lo(b,x,5),new xi(b,this.mode,0,this.bitCount+_+5)}addBinaryShiftChar(h){let x=this.token,b=this.mode,_=this.bitCount;if(this.mode===gs||this.mode===mi){let I=xo[b][Sa];x=Lo(x,I&65535,I>>16),_+=I>>16,b=Sa}let j=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,A=new xi(x,b,this.binaryShiftByteCount+1,_+j);return A.binaryShiftByteCount===2078&&(A=A.endBinaryShift(h+1)),A}endBinaryShift(h){if(this.binaryShiftByteCount===0)return this;let x=this.token;return x=zc(x,h-this.binaryShiftByteCount,this.binaryShiftByteCount),new xi(x,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(h){let x=this.bitCount+(xo[this.mode][h.mode]>>16);return this.binaryShiftByteCount<h.binaryShiftByteCount?x+=xi.calculateBinaryShiftCost(h)-xi.calculateBinaryShiftCost(this):this.binaryShiftByteCount>h.binaryShiftByteCount&&h.binaryShiftByteCount>0&&(x+=10),x<=h.bitCount}toBitArray(h){let x=[];for(let _=this.endBinaryShift(h.length).token;_!==null;_=_.getPrevious())x.unshift(_);let b=new D;for(const _ of x)_.appendTo(b,h);return b}toString(){return K.format("%s bits=%d bytes=%d",Ro[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(h){return h.binaryShiftByteCount>62?21:h.binaryShiftByteCount>31?20:h.binaryShiftByteCount>0?10:0}}xi.INITIAL_STATE=new xi(mo,Sa,0,0);function al(xe){const h=K.getCharCode(" "),x=K.getCharCode("."),b=K.getCharCode(",");xe[Sa][h]=1;const _=K.getCharCode("Z"),j=K.getCharCode("A");for(let Ae=j;Ae<=_;Ae++)xe[Sa][Ae]=Ae-j+2;xe[Bl][h]=1;const A=K.getCharCode("z"),I=K.getCharCode("a");for(let Ae=I;Ae<=A;Ae++)xe[Bl][Ae]=Ae-I+2;xe[mi][h]=1;const B=K.getCharCode("9"),X=K.getCharCode("0");for(let Ae=X;Ae<=B;Ae++)xe[mi][Ae]=Ae-X+2;xe[mi][b]=12,xe[mi][x]=13;const oe=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let Ae=0;Ae<oe.length;Ae++)xe[iu][K.getCharCode(oe[Ae])]=Ae;const pe=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let Ae=0;Ae<pe.length;Ae++)K.getCharCode(pe[Ae])>0&&(xe[gs][K.getCharCode(pe[Ae])]=Ae);return xe}const pi=al(O.createInt32Array(5,256));class sl{constructor(h){this.text=h}encode(){const h=K.getCharCode(" "),x=K.getCharCode(`
`);let b=Bc.singletonList(xi.INITIAL_STATE);for(let j=0;j<this.text.length;j++){let A,I=j+1<this.text.length?this.text[j+1]:0;switch(this.text[j]){case K.getCharCode("\r"):A=I===x?2:0;break;case K.getCharCode("."):A=I===h?3:0;break;case K.getCharCode(","):A=I===h?4:0;break;case K.getCharCode(":"):A=I===h?5:0;break;default:A=0}A>0?(b=sl.updateStateListForPair(b,j,A),j++):b=this.updateStateListForChar(b,j)}return Bc.min(b,(j,A)=>j.getBitCount()-A.getBitCount()).toBitArray(this.text)}updateStateListForChar(h,x){const b=[];for(let _ of h)this.updateStateForChar(_,x,b);return sl.simplifyStates(b)}updateStateForChar(h,x,b){let _=this.text[x]&255,j=pi[h.getMode()][_]>0,A=null;for(let I=0;I<=gs;I++){let B=pi[I][_];if(B>0){if(A==null&&(A=h.endBinaryShift(x)),!j||I===h.getMode()||I===mi){const X=A.latchAndAppend(I,B);b.push(X)}if(!j&&Ul[h.getMode()][I]>=0){const X=A.shiftAndAppend(I,B);b.push(X)}}}if(h.getBinaryShiftByteCount()>0||pi[h.getMode()][_]===0){let I=h.addBinaryShiftChar(x);b.push(I)}}static updateStateListForPair(h,x,b){const _=[];for(let j of h)this.updateStateForPair(j,x,b,_);return this.simplifyStates(_)}static updateStateForPair(h,x,b,_){let j=h.endBinaryShift(x);if(_.push(j.latchAndAppend(gs,b)),h.getMode()!==gs&&_.push(j.shiftAndAppend(gs,b)),b===3||b===4){let A=j.latchAndAppend(mi,16-b).latchAndAppend(mi,1);_.push(A)}if(h.getBinaryShiftByteCount()>0){let A=h.addBinaryShiftChar(x).addBinaryShiftChar(x+1);_.push(A)}}static simplifyStates(h){let x=[];for(const b of h){let _=!0;for(const j of x){if(j.isBetterThanOrEqualTo(b)){_=!1;break}b.isBetterThanOrEqualTo(j)&&(x=x.filter(A=>A!==j))}_&&x.push(b)}return x}}class zn{constructor(){}static encodeBytes(h){return zn.encode(h,zn.DEFAULT_EC_PERCENT,zn.DEFAULT_AZTEC_LAYERS)}static encode(h,x,b){let _=new sl(h).encode(),j=E.truncDivision(_.getSize()*x,100)+11,A=_.getSize()+j,I,B,X,oe,pe;if(b!==zn.DEFAULT_AZTEC_LAYERS){if(I=b<0,B=Math.abs(b),B>(I?zn.MAX_NB_BITS_COMPACT:zn.MAX_NB_BITS))throw new p(K.format("Illegal value %s for layers",b));X=zn.totalBitsInLayer(B,I),oe=zn.WORD_SIZE[B];let Ft=X-X%oe;if(pe=zn.stuffBits(_,oe),pe.getSize()+j>Ft)throw new p("Data to large for user specified layer");if(I&&pe.getSize()>oe*64)throw new p("Data to large for user specified layer")}else{oe=0,pe=null;for(let Ft=0;;Ft++){if(Ft>zn.MAX_NB_BITS)throw new p("Data too large for an Aztec code");if(I=Ft<=3,B=I?Ft+1:Ft,X=zn.totalBitsInLayer(B,I),A>X)continue;(pe==null||oe!==zn.WORD_SIZE[B])&&(oe=zn.WORD_SIZE[B],pe=zn.stuffBits(_,oe));let nn=X-X%oe;if(!(I&&pe.getSize()>oe*64)&&pe.getSize()+j<=nn)break}}let Ae=zn.generateCheckWords(pe,X,oe),ze=pe.getSize()/oe,Xe=zn.generateModeMessage(I,B,ze),tt=(I?11:14)+B*4,xt=new Int32Array(tt),jt;if(I){jt=tt;for(let Ft=0;Ft<xt.length;Ft++)xt[Ft]=Ft}else{jt=tt+1+2*E.truncDivision(E.truncDivision(tt,2)-1,15);let Ft=E.truncDivision(tt,2),nn=E.truncDivision(jt,2);for(let pn=0;pn<Ft;pn++){let Za=pn+E.truncDivision(pn,15);xt[Ft-pn-1]=nn-Za-1,xt[Ft+pn]=nn+Za+1}}let qt=new re(jt);for(let Ft=0,nn=0;Ft<B;Ft++){let pn=(B-Ft)*4+(I?9:12);for(let Za=0;Za<pn;Za++){let gi=Za*2;for(let Ys=0;Ys<2;Ys++)Ae.get(nn+gi+Ys)&&qt.set(xt[Ft*2+Ys],xt[Ft*2+Za]),Ae.get(nn+pn*2+gi+Ys)&&qt.set(xt[Ft*2+Za],xt[tt-1-Ft*2-Ys]),Ae.get(nn+pn*4+gi+Ys)&&qt.set(xt[tt-1-Ft*2-Ys],xt[tt-1-Ft*2-Za]),Ae.get(nn+pn*6+gi+Ys)&&qt.set(xt[tt-1-Ft*2-Za],xt[Ft*2+Ys])}nn+=pn*8}if(zn.drawModeMessage(qt,I,jt,Xe),I)zn.drawBullsEye(qt,E.truncDivision(jt,2),5);else{zn.drawBullsEye(qt,E.truncDivision(jt,2),7);for(let Ft=0,nn=0;Ft<E.truncDivision(tt,2)-1;Ft+=15,nn+=16)for(let pn=E.truncDivision(jt,2)&1;pn<jt;pn+=2)qt.set(E.truncDivision(jt,2)-nn,pn),qt.set(E.truncDivision(jt,2)+nn,pn),qt.set(pn,E.truncDivision(jt,2)-nn),qt.set(pn,E.truncDivision(jt,2)+nn)}let Ht=new Fl;return Ht.setCompact(I),Ht.setSize(jt),Ht.setLayers(B),Ht.setCodeWords(ze),Ht.setMatrix(qt),Ht}static drawBullsEye(h,x,b){for(let _=0;_<b;_+=2)for(let j=x-_;j<=x+_;j++)h.set(j,x-_),h.set(j,x+_),h.set(x-_,j),h.set(x+_,j);h.set(x-b,x-b),h.set(x-b+1,x-b),h.set(x-b,x-b+1),h.set(x+b,x-b),h.set(x+b,x-b+1),h.set(x+b,x+b-1)}static generateModeMessage(h,x,b){let _=new D;return h?(_.appendBits(x-1,2),_.appendBits(b-1,6),_=zn.generateCheckWords(_,28,4)):(_.appendBits(x-1,5),_.appendBits(b-1,11),_=zn.generateCheckWords(_,40,4)),_}static drawModeMessage(h,x,b,_){let j=E.truncDivision(b,2);if(x)for(let A=0;A<7;A++){let I=j-3+A;_.get(A)&&h.set(I,j-5),_.get(A+7)&&h.set(j+5,I),_.get(20-A)&&h.set(I,j+5),_.get(27-A)&&h.set(j-5,I)}else for(let A=0;A<10;A++){let I=j-5+A+E.truncDivision(A,5);_.get(A)&&h.set(I,j-7),_.get(A+10)&&h.set(j+7,I),_.get(29-A)&&h.set(I,j+7),_.get(39-A)&&h.set(j-7,I)}}static generateCheckWords(h,x,b){let _=h.getSize()/b,j=new wn(zn.getGF(b)),A=E.truncDivision(x,b),I=zn.bitsToWords(h,b,A);j.encode(I,A-_);let B=x%b,X=new D;X.appendBits(0,B);for(const oe of Array.from(I))X.appendBits(oe,b);return X}static bitsToWords(h,x,b){let _=new Int32Array(b),j,A;for(j=0,A=h.getSize()/x;j<A;j++){let I=0;for(let B=0;B<x;B++)I|=h.get(j*x+B)?1<<x-B-1:0;_[j]=I}return _}static getGF(h){switch(h){case 4:return Te.AZTEC_PARAM;case 6:return Te.AZTEC_DATA_6;case 8:return Te.AZTEC_DATA_8;case 10:return Te.AZTEC_DATA_10;case 12:return Te.AZTEC_DATA_12;default:throw new p("Unsupported word size "+h)}}static stuffBits(h,x){let b=new D,_=h.getSize(),j=(1<<x)-2;for(let A=0;A<_;A+=x){let I=0;for(let B=0;B<x;B++)(A+B>=_||h.get(A+B))&&(I|=1<<x-1-B);(I&j)===j?(b.appendBits(I&j,x),A--):(I&j)===0?(b.appendBits(I|1,x),A--):b.appendBits(I,x)}return b}static totalBitsInLayer(h,x){return((x?88:112)+16*h)*h}}zn.DEFAULT_EC_PERCENT=33,zn.DEFAULT_AZTEC_LAYERS=0,zn.MAX_NB_BITS=32,zn.MAX_NB_BITS_COMPACT=4,zn.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class zl{encode(h,x,b,_){return this.encodeWithHints(h,x,b,_,null)}encodeWithHints(h,x,b,_,j){let A=Rl.ISO_8859_1,I=zn.DEFAULT_EC_PERCENT,B=zn.DEFAULT_AZTEC_LAYERS;return j!=null&&(j.has(Tr.CHARACTER_SET)&&(A=Fc.forName(j.get(Tr.CHARACTER_SET).toString())),j.has(Tr.ERROR_CORRECTION)&&(I=E.parseInt(j.get(Tr.ERROR_CORRECTION).toString())),j.has(Tr.AZTEC_LAYERS)&&(B=E.parseInt(j.get(Tr.AZTEC_LAYERS).toString()))),zl.encodeLayers(h,x,b,_,A,I,B)}static encodeLayers(h,x,b,_,j,A,I){if(x!==ee.AZTEC)throw new p("Can only encode AZTEC, but got "+x);let B=zn.encode(K.getBytes(h,j),A,I);return zl.renderResult(B,b,_)}static renderResult(h,x,b){let _=h.getMatrix();if(_==null)throw new ye;let j=_.getWidth(),A=_.getHeight(),I=Math.max(x,j),B=Math.max(b,A),X=Math.min(I/j,B/A),oe=(I-j*X)/2,pe=(B-A*X)/2,Ae=new re(I,B);for(let ze=0,Xe=pe;ze<A;ze++,Xe+=X)for(let tt=0,xt=oe;tt<j;tt++,xt+=X)_.get(tt,ze)&&Ae.setRegion(xt,Xe,X,X);return Ae}}r.AbstractExpandedDecoder=le,r.ArgumentException=f,r.ArithmeticException=ie,r.AztecCode=Fl,r.AztecCodeReader=ur,r.AztecCodeWriter=zl,r.AztecDecoder=dt,r.AztecDetector=Gt,r.AztecDetectorResult=Mt,r.AztecEncoder=zn,r.AztecHighLevelEncoder=sl,r.AztecPoint=Xt,r.BarcodeFormat=ee,r.Binarizer=N,r.BinaryBitmap=y,r.BitArray=D,r.BitMatrix=re,r.BitSource=ln,r.BrowserAztecCodeReader=wr,r.BrowserBarcodeReader=La,r.BrowserCodeReader=te,r.BrowserDatamatrixCodeReader=cr,r.BrowserMultiFormatReader=pt,r.BrowserPDF417Reader=zt,r.BrowserQRCodeReader=ir,r.BrowserQRCodeSvgWriter=cs,r.CharacterSetECI=U,r.ChecksumException=g,r.Code128Reader=mt,r.Code39Reader=kr,r.DataMatrixDecodedBitStreamParser=el,r.DataMatrixReader=at,r.DecodeHintType=W,r.DecoderResult=se,r.DefaultGridSampler=Ir,r.DetectorResult=Vt,r.EAN13Reader=Ge,r.EncodeHintType=Tr,r.Exception=d,r.FormatException=R,r.GenericGF=Te,r.GenericGFPoly=be,r.GlobalHistogramBinarizer=de,r.GridSampler=xr,r.GridSamplerInstance=er,r.HTMLCanvasElementLuminanceSource=Le,r.HybridBinarizer=he,r.ITFReader=Ke,r.IllegalArgumentException=p,r.IllegalStateException=ye,r.InvertedLuminanceSource=ke,r.LuminanceSource=Se,r.MathUtils=et,r.MultiFormatOneDReader=Na,r.MultiFormatReader=Je,r.MultiFormatWriter=nl,r.NotFoundException=ae,r.OneDReader=lr,r.PDF417DecodedBitStreamParser=Tt,r.PDF417DecoderErrorCorrection=rl,r.PDF417Reader=ge,r.PDF417ResultMetadata=Io,r.PerspectiveTransform=sr,r.PlanarYUVLuminanceSource=_l,r.QRCodeByteMatrix=aa,r.QRCodeDataMask=qa,r.QRCodeDecodedBitStreamParser=na,r.QRCodeDecoderErrorCorrectionLevel=br,r.QRCodeDecoderFormatInformation=on,r.QRCodeEncoder=In,r.QRCodeEncoderQRCode=_a,r.QRCodeMaskUtil=Hr,r.QRCodeMatrixUtil=Or,r.QRCodeMode=Lr,r.QRCodeReader=uo,r.QRCodeVersion=vr,r.QRCodeWriter=fi,r.RGBLuminanceSource=Rc,r.RSS14Reader=en,r.RSSExpandedReader=It,r.ReaderException=qe,r.ReedSolomonDecoder=rt,r.ReedSolomonEncoder=wn,r.ReedSolomonException=De,r.Result=Y,r.ResultMetadataType=me,r.ResultPoint=Ve,r.StringUtils=K,r.UnsupportedOperationException=Z,r.VideoInputDevice=fe,r.WhiteRectangleDetector=mr,r.WriterException=jn,r.ZXingArrays=O,r.ZXingCharset=Fc,r.ZXingInteger=E,r.ZXingStandardCharsets=Rl,r.ZXingStringBuilder=Q,r.ZXingStringEncoding=q,r.ZXingSystem=w,r.createAbstractExpandedDecoder=dr,Object.defineProperty(r,"__esModule",{value:!0})}))})(wg,wg.exports)),wg.exports}var _s=S6e();const j6e=gd(_s),C6e=r6({__proto__:null,default:j6e},[_s]);var FD=(function(){function e(t,r,n){if(this.formatMap=new Map([[Vr.QR_CODE,_s.BarcodeFormat.QR_CODE],[Vr.AZTEC,_s.BarcodeFormat.AZTEC],[Vr.CODABAR,_s.BarcodeFormat.CODABAR],[Vr.CODE_39,_s.BarcodeFormat.CODE_39],[Vr.CODE_93,_s.BarcodeFormat.CODE_93],[Vr.CODE_128,_s.BarcodeFormat.CODE_128],[Vr.DATA_MATRIX,_s.BarcodeFormat.DATA_MATRIX],[Vr.MAXICODE,_s.BarcodeFormat.MAXICODE],[Vr.ITF,_s.BarcodeFormat.ITF],[Vr.EAN_13,_s.BarcodeFormat.EAN_13],[Vr.EAN_8,_s.BarcodeFormat.EAN_8],[Vr.PDF_417,_s.BarcodeFormat.PDF_417],[Vr.RSS_14,_s.BarcodeFormat.RSS_14],[Vr.RSS_EXPANDED,_s.BarcodeFormat.RSS_EXPANDED],[Vr.UPC_A,_s.BarcodeFormat.UPC_A],[Vr.UPC_E,_s.BarcodeFormat.UPC_E],[Vr.UPC_EAN_EXTENSION,_s.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!C6e)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=r,this.logger=n;var a=this.createZXingFormats(t),s=new Map;s.set(_s.DecodeHintType.POSSIBLE_FORMATS,a),s.set(_s.DecodeHintType.TRY_HARDER,!1),this.hints=s}return e.prototype.decodeAsync=function(t){var r=this;return new Promise(function(n,a){try{n(r.decode(t))}catch(s){a(s)}})},e.prototype.decode=function(t){var r=new _s.MultiFormatReader(this.verbose,this.hints),n=new _s.HTMLCanvasElementLuminanceSource(t),a=new _s.BinaryBitmap(new _s.HybridBinarizer(n)),s=r.decode(a);return{text:s.text,format:RV.create(this.toHtml5QrcodeSupportedFormats(s.format)),debugData:this.createDebugData()}},e.prototype.createReverseFormatMap=function(){var t=new Map;return this.formatMap.forEach(function(r,n,a){t.set(r,n)}),t},e.prototype.toHtml5QrcodeSupportedFormats=function(t){if(!this.reverseFormatMap.has(t))throw"reverseFormatMap doesn't have ".concat(t);return this.reverseFormatMap.get(t)},e.prototype.createZXingFormats=function(t){for(var r=[],n=0,a=t;n<a.length;n++){var s=a[n];this.formatMap.has(s)?r.push(this.formatMap.get(s)):this.logger.logError("".concat(s," is not supported by")+"ZXingHtml5QrcodeShim")}return r},e.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},e})(),A6e=function(e,t,r,n){function a(s){return s instanceof r?s:new r(function(l){l(s)})}return new(r||(r=Promise))(function(s,l){function o(f){try{d(n.next(f))}catch(p){l(p)}}function c(f){try{d(n.throw(f))}catch(p){l(p)}}function d(f){f.done?s(f.value):a(f.value).then(o,c)}d((n=n.apply(e,t||[])).next())})},E6e=function(e,t){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,a,s,l;return l={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function o(d){return function(f){return c([d,f])}}function c(d){if(n)throw new TypeError("Generator is already executing.");for(;l&&(l=0,d[0]&&(r=0)),r;)try{if(n=1,a&&(s=d[0]&2?a.return:d[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,d[1])).done)return s;switch(a=0,s&&(d=[d[0]&2,s.value]),d[0]){case 0:case 1:s=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,a=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!s||d[1]>s[0]&&d[1]<s[3])){r.label=d[1];break}if(d[0]===6&&r.label<s[1]){r.label=s[1],s=d;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(d);break}s[2]&&r.ops.pop(),r.trys.pop();continue}d=t.call(e,r)}catch(f){d=[6,f],a=0}finally{n=s=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},BD=(function(){function e(t,r,n){if(this.formatMap=new Map([[Vr.QR_CODE,"qr_code"],[Vr.AZTEC,"aztec"],[Vr.CODABAR,"codabar"],[Vr.CODE_39,"code_39"],[Vr.CODE_93,"code_93"],[Vr.CODE_128,"code_128"],[Vr.DATA_MATRIX,"data_matrix"],[Vr.ITF,"itf"],[Vr.EAN_13,"ean_13"],[Vr.EAN_8,"ean_8"],[Vr.PDF_417,"pdf417"],[Vr.UPC_A,"upc_a"],[Vr.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!e.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=r,this.logger=n;var a=this.createBarcodeDetectorFormats(t);if(this.detector=new BarcodeDetector(a),!this.detector)throw"BarcodeDetector detector not supported"}return e.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var t=new BarcodeDetector({formats:["qr_code"]});return typeof t<"u"},e.prototype.decodeAsync=function(t){return A6e(this,void 0,void 0,function(){var r,n;return E6e(this,function(a){switch(a.label){case 0:return[4,this.detector.detect(t)];case 1:if(r=a.sent(),!r||r.length===0)throw"No barcode or QR code detected.";return n=this.selectLargestBarcode(r),[2,{text:n.rawValue,format:RV.create(this.toHtml5QrcodeSupportedFormats(n.format)),debugData:this.createDebugData()}]}})})},e.prototype.selectLargestBarcode=function(t){for(var r=null,n=0,a=0,s=t;a<s.length;a++){var l=s[a],o=l.boundingBox.width*l.boundingBox.height;o>n&&(n=o,r=l)}if(!r)throw"No largest barcode found";return r},e.prototype.createBarcodeDetectorFormats=function(t){for(var r=[],n=0,a=t;n<a.length;n++){var s=a[n];this.formatMap.has(s)?r.push(this.formatMap.get(s)):this.logger.warn("".concat(s," is not supported by")+"BarcodeDetectorDelegate")}return{formats:r}},e.prototype.toHtml5QrcodeSupportedFormats=function(t){if(!this.reverseFormatMap.has(t))throw"reverseFormatMap doesn't have ".concat(t);return this.reverseFormatMap.get(t)},e.prototype.createReverseFormatMap=function(){var t=new Map;return this.formatMap.forEach(function(r,n,a){t.set(r,n)}),t},e.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},e})(),UD=function(e,t,r,n){function a(s){return s instanceof r?s:new r(function(l){l(s)})}return new(r||(r=Promise))(function(s,l){function o(f){try{d(n.next(f))}catch(p){l(p)}}function c(f){try{d(n.throw(f))}catch(p){l(p)}}function d(f){f.done?s(f.value):a(f.value).then(o,c)}d((n=n.apply(e,t||[])).next())})},zD=function(e,t){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,a,s,l;return l={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function o(d){return function(f){return c([d,f])}}function c(d){if(n)throw new TypeError("Generator is already executing.");for(;l&&(l=0,d[0]&&(r=0)),r;)try{if(n=1,a&&(s=d[0]&2?a.return:d[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,d[1])).done)return s;switch(a=0,s&&(d=[d[0]&2,s.value]),d[0]){case 0:case 1:s=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,a=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!s||d[1]>s[0]&&d[1]<s[3])){r.label=d[1];break}if(d[0]===6&&r.label<s[1]){r.label=s[1],s=d;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(d);break}s[2]&&r.ops.pop(),r.trys.pop();continue}d=t.call(e,r)}catch(f){d=[6,f],a=0}finally{n=s=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},T6e=(function(){function e(t,r,n,a){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=n,r&&BD.isSupported()?(this.primaryDecoder=new BD(t,n,a),this.secondaryDecoder=new FD(t,n,a)):this.primaryDecoder=new FD(t,n,a)}return e.prototype.decodeAsync=function(t){return UD(this,void 0,void 0,function(){var r;return zD(this,function(n){switch(n.label){case 0:r=performance.now(),n.label=1;case 1:return n.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(t)];case 2:return[2,n.sent()];case 3:return this.possiblyLogPerformance(r),[7];case 4:return[2]}})})},e.prototype.decodeRobustlyAsync=function(t){return UD(this,void 0,void 0,function(){var r,n;return zD(this,function(a){switch(a.label){case 0:r=performance.now(),a.label=1;case 1:return a.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(t)];case 2:return[2,a.sent()];case 3:if(n=a.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(t)];throw n;case 4:return this.possiblyLogPerformance(r),[7];case 5:return[2]}})})},e.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},e.prototype.possiblyLogPerformance=function(t){if(this.verbose){var r=performance.now()-t;this.executionResults.push(r),this.executions++,this.possiblyFlushPerformanceReport()}},e.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var t=0,r=0,n=this.executionResults;r<n.length;r++){var a=n[r];t+=a}var s=t/this.executionResults.length;console.log("".concat(s," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},e})(),NA=(function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(n[s]=a[s])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),Nw=function(e,t,r,n){function a(s){return s instanceof r?s:new r(function(l){l(s)})}return new(r||(r=Promise))(function(s,l){function o(f){try{d(n.next(f))}catch(p){l(p)}}function c(f){try{d(n.throw(f))}catch(p){l(p)}}function d(f){f.done?s(f.value):a(f.value).then(o,c)}d((n=n.apply(e,t||[])).next())})},_w=function(e,t){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,a,s,l;return l={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function o(d){return function(f){return c([d,f])}}function c(d){if(n)throw new TypeError("Generator is already executing.");for(;l&&(l=0,d[0]&&(r=0)),r;)try{if(n=1,a&&(s=d[0]&2?a.return:d[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,d[1])).done)return s;switch(a=0,s&&(d=[d[0]&2,s.value]),d[0]){case 0:case 1:s=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,a=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!s||d[1]>s[0]&&d[1]<s[3])){r.label=d[1];break}if(d[0]===6&&r.label<s[1]){r.label=s[1],s=d;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(d);break}s[2]&&r.ops.pop(),r.trys.pop();continue}d=t.call(e,r)}catch(f){d=[6,f],a=0}finally{n=s=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},BV=(function(){function e(t,r){this.name=t,this.track=r}return e.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},e.prototype.apply=function(t){var r={};r[this.name]=t;var n={advanced:[r]};return this.track.applyConstraints(n)},e.prototype.value=function(){var t=this.track.getSettings();if(this.name in t){var r=t[this.name];return r}return null},e})(),O6e=(function(e){NA(t,e);function t(r,n){return e.call(this,r,n)||this}return t.prototype.min=function(){return this.getCapabilities().min},t.prototype.max=function(){return this.getCapabilities().max},t.prototype.step=function(){return this.getCapabilities().step},t.prototype.apply=function(r){var n={};n[this.name]=r;var a={advanced:[n]};return this.track.applyConstraints(a)},t.prototype.getCapabilities=function(){this.failIfNotSupported();var r=this.track.getCapabilities(),n=r[this.name];return{min:n.min,max:n.max,step:n.step}},t.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},t})(BV),P6e=(function(e){NA(t,e);function t(r){return e.call(this,"zoom",r)||this}return t})(O6e),I6e=(function(e){NA(t,e);function t(r){return e.call(this,"torch",r)||this}return t})(BV),D6e=(function(){function e(t){this.track=t}return e.prototype.zoomFeature=function(){return new P6e(this.track)},e.prototype.torchFeature=function(){return new I6e(this.track)},e})(),M6e=(function(){function e(t,r,n){this.isClosed=!1,this.parentElement=t,this.mediaStream=r,this.callbacks=n,this.surface=this.createVideoElement(this.parentElement.clientWidth),t.append(this.surface)}return e.prototype.createVideoElement=function(t){var r=document.createElement("video");return r.style.width="".concat(t,"px"),r.style.display="block",r.muted=!0,r.setAttribute("muted","true"),r.playsInline=!0,r},e.prototype.setupSurface=function(){var t=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var r=function(){var n=t.surface.clientWidth,a=t.surface.clientHeight;t.callbacks.onRenderSurfaceReady(n,a),t.surface.removeEventListener("playing",r)};this.surface.addEventListener("playing",r),this.surface.srcObject=this.mediaStream,this.surface.play()},e.create=function(t,r,n,a){return Nw(this,void 0,void 0,function(){var s,l;return _w(this,function(o){switch(o.label){case 0:return s=new e(t,r,a),n.aspectRatio?(l={aspectRatio:n.aspectRatio},[4,s.getFirstTrackOrFail().applyConstraints(l)]):[3,2];case 1:o.sent(),o.label=2;case 2:return s.setupSurface(),[2,s]}})})},e.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},e.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},e.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},e.prototype.resume=function(t){this.failIfClosed();var r=this,n=function(){setTimeout(t,200),r.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.play()},e.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},e.prototype.getSurface=function(){return this.failIfClosed(),this.surface},e.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},e.prototype.applyVideoConstraints=function(t){return Nw(this,void 0,void 0,function(){return _w(this,function(r){if("aspectRatio"in t)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(t)]})})},e.prototype.close=function(){if(this.isClosed)return Promise.resolve();var t=this;return new Promise(function(r,n){var a=t.mediaStream.getVideoTracks(),s=a.length,l=0;t.mediaStream.getVideoTracks().forEach(function(o){t.mediaStream.removeTrack(o),o.stop(),++l,l>=s&&(t.isClosed=!0,t.parentElement.removeChild(t.surface),r())})})},e.prototype.getCapabilities=function(){return new D6e(this.getFirstTrackOrFail())},e})(),L6e=(function(){function e(t){this.mediaStream=t}return e.prototype.render=function(t,r,n){return Nw(this,void 0,void 0,function(){return _w(this,function(a){return[2,M6e.create(t,this.mediaStream,r,n)]})})},e.create=function(t){return Nw(this,void 0,void 0,function(){var r,n;return _w(this,function(a){switch(a.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return r={audio:!1,video:t},[4,navigator.mediaDevices.getUserMedia(r)];case 1:return n=a.sent(),[2,new e(n)]}})})},e})(),qD=function(e,t,r,n){function a(s){return s instanceof r?s:new r(function(l){l(s)})}return new(r||(r=Promise))(function(s,l){function o(f){try{d(n.next(f))}catch(p){l(p)}}function c(f){try{d(n.throw(f))}catch(p){l(p)}}function d(f){f.done?s(f.value):a(f.value).then(o,c)}d((n=n.apply(e,t||[])).next())})},HD=function(e,t){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,a,s,l;return l={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function o(d){return function(f){return c([d,f])}}function c(d){if(n)throw new TypeError("Generator is already executing.");for(;l&&(l=0,d[0]&&(r=0)),r;)try{if(n=1,a&&(s=d[0]&2?a.return:d[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,d[1])).done)return s;switch(a=0,s&&(d=[d[0]&2,s.value]),d[0]){case 0:case 1:s=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,a=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!s||d[1]>s[0]&&d[1]<s[3])){r.label=d[1];break}if(d[0]===6&&r.label<s[1]){r.label=s[1],s=d;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(d);break}s[2]&&r.ops.pop(),r.trys.pop();continue}d=t.call(e,r)}catch(f){d=[6,f],a=0}finally{n=s=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},R6e=(function(){function e(){}return e.failIfNotSupported=function(){return qD(this,void 0,void 0,function(){return HD(this,function(t){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new e]})})},e.prototype.create=function(t){return qD(this,void 0,void 0,function(){return HD(this,function(r){return[2,L6e.create(t)]})})},e})(),F6e=function(e,t,r,n){function a(s){return s instanceof r?s:new r(function(l){l(s)})}return new(r||(r=Promise))(function(s,l){function o(f){try{d(n.next(f))}catch(p){l(p)}}function c(f){try{d(n.throw(f))}catch(p){l(p)}}function d(f){f.done?s(f.value):a(f.value).then(o,c)}d((n=n.apply(e,t||[])).next())})},B6e=function(e,t){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,a,s,l;return l={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function o(d){return function(f){return c([d,f])}}function c(d){if(n)throw new TypeError("Generator is already executing.");for(;l&&(l=0,d[0]&&(r=0)),r;)try{if(n=1,a&&(s=d[0]&2?a.return:d[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,d[1])).done)return s;switch(a=0,s&&(d=[d[0]&2,s.value]),d[0]){case 0:case 1:s=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,a=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!s||d[1]>s[0]&&d[1]<s[3])){r.label=d[1];break}if(d[0]===6&&r.label<s[1]){r.label=s[1],s=d;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(d);break}s[2]&&r.ops.pop(),r.trys.pop();continue}d=t.call(e,r)}catch(f){d=[6,f],a=0}finally{n=s=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},U6e=(function(){function e(){}return e.retrieve=function(){if(navigator.mediaDevices)return e.getCamerasFromMediaDevices();var t=MediaStreamTrack;return MediaStreamTrack&&t.getSources?e.getCamerasFromMediaStreamTrack():e.rejectWithError()},e.rejectWithError=function(){var t=l1.unableToQuerySupportedDevices();return e.isHttpsOrLocalhost()||(t=l1.insecureContextCameraQueryError()),Promise.reject(t)},e.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var t=location.host.split(":")[0];return t==="127.0.0.1"||t==="localhost"},e.getCamerasFromMediaDevices=function(){return F6e(this,void 0,void 0,function(){var t,r,n,a,s,l,o;return B6e(this,function(c){switch(c.label){case 0:return t=function(d){for(var f=d.getVideoTracks(),p=0,y=f;p<y.length;p++){var g=y[p];g.enabled=!1,g.stop(),d.removeTrack(g)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return r=c.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(n=c.sent(),a=[],s=0,l=n;s<l.length;s++)o=l[s],o.kind==="videoinput"&&a.push({id:o.deviceId,label:o.label});return t(r),[2,a]}})})},e.getCamerasFromMediaStreamTrack=function(){return new Promise(function(t,r){var n=function(s){for(var l=[],o=0,c=s;o<c.length;o++){var d=c[o];d.kind==="video"&&l.push({id:d.id,label:d.label})}t(l)},a=MediaStreamTrack;a.getSources(n)})},e})(),ii;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.NOT_STARTED=1]="NOT_STARTED",e[e.SCANNING=2]="SCANNING",e[e.PAUSED=3]="PAUSED"})(ii||(ii={}));var z6e=(function(){function e(){this.state=ii.NOT_STARTED,this.onGoingTransactionNewState=ii.UNKNOWN}return e.prototype.directTransition=function(t){this.failIfTransitionOngoing(),this.validateTransition(t),this.state=t},e.prototype.startTransition=function(t){return this.failIfTransitionOngoing(),this.validateTransition(t),this.onGoingTransactionNewState=t,this},e.prototype.execute=function(){if(this.onGoingTransactionNewState===ii.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var t=this.onGoingTransactionNewState;this.onGoingTransactionNewState=ii.UNKNOWN,this.directTransition(t)},e.prototype.cancel=function(){if(this.onGoingTransactionNewState===ii.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=ii.UNKNOWN},e.prototype.getState=function(){return this.state},e.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==ii.UNKNOWN)throw"Cannot transition to a new state, already under transition"},e.prototype.validateTransition=function(t){switch(this.state){case ii.UNKNOWN:throw"Transition from unknown is not allowed";case ii.NOT_STARTED:this.failIfNewStateIs(t,[ii.PAUSED]);break;case ii.SCANNING:break;case ii.PAUSED:break}},e.prototype.failIfNewStateIs=function(t,r){for(var n=0,a=r;n<a.length;n++){var s=a[n];if(t===s)throw"Cannot transition from ".concat(this.state," to ").concat(t)}},e})(),q6e=(function(){function e(t){this.stateManager=t}return e.prototype.startTransition=function(t){return this.stateManager.startTransition(t)},e.prototype.directTransition=function(t){this.stateManager.directTransition(t)},e.prototype.getState=function(){return this.stateManager.getState()},e.prototype.canScanFile=function(){return this.stateManager.getState()===ii.NOT_STARTED},e.prototype.isScanning=function(){return this.stateManager.getState()!==ii.NOT_STARTED},e.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===ii.SCANNING},e.prototype.isPaused=function(){return this.stateManager.getState()===ii.PAUSED},e})(),H6e=(function(){function e(){}return e.create=function(){return new q6e(new z6e)},e})(),$6e=(function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(n[s]=a[s])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}})(),pc=(function(e){$6e(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.DEFAULT_WIDTH=300,t.DEFAULT_WIDTH_OFFSET=2,t.FILE_SCAN_MIN_HEIGHT=300,t.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,t.MIN_QR_BOX_SIZE=50,t.SHADED_LEFT=1,t.SHADED_RIGHT=2,t.SHADED_TOP=3,t.SHADED_BOTTOM=4,t.SHADED_REGION_ELEMENT_ID="qr-shaded-region",t.VERBOSE=!1,t.BORDER_SHADER_DEFAULT_COLOR="#ffffff",t.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",t})(w6e),V6e=(function(){function e(t,r){this.logger=r,this.fps=pc.SCAN_DEFAULT_FPS,t?(t.fps&&(this.fps=t.fps),this.disableFlip=t.disableFlip===!0,this.qrbox=t.qrbox,this.aspectRatio=t.aspectRatio,this.videoConstraints=t.videoConstraints):this.disableFlip=pc.DEFAULT_DISABLE_FLIP}return e.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?FV.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},e.prototype.isShadedBoxEnabled=function(){return!g0(this.qrbox)},e.create=function(t,r){return new e(t,r)},e})(),W6e=(function(){function e(t,r){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(t))throw"HTML Element with id=".concat(t," not found");this.elementId=t,this.verbose=!1;var n;typeof r=="boolean"?this.verbose=r===!0:r&&(n=r,this.verbose=n.verbose===!0,n.experimentalFeatures),this.logger=new N6e(this.verbose),this.qrcode=new T6e(this.getSupportedFormats(r),this.getUseBarCodeDetectorIfSupported(n),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=H6e.create()}return e.prototype.start=function(t,r,n,a){var s=this;if(!t)throw"cameraIdOrConfig is required";if(!n||typeof n!="function")throw"qrCodeSuccessCallback is required and should be a function.";var l;a?l=a:l=this.verbose?this.logger.log:function(){};var o=V6e.create(r,this.logger);this.clearElement();var c=!1;o.videoConstraints&&(o.isMediaStreamConstraintsValid()?c=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var d=c,f=document.getElementById(this.elementId);f.clientWidth?f.clientWidth:pc.DEFAULT_WIDTH,f.style.position="relative",this.shouldScan=!0,this.element=f;var p=this,y=this.stateManagerProxy.startTransition(ii.SCANNING);return new Promise(function(g,N){var w=d?o.videoConstraints:p.createVideoConstraints(t);if(!w){y.cancel(),N("videoConstraints should be defined");return}var k={};(!d||o.aspectRatio)&&(k.aspectRatio=o.aspectRatio);var S={onRenderSurfaceReady:function(O,E){p.setupUi(O,E,o),p.isScanning=!0,p.foreverScan(o,n,l)}};R6e.failIfNotSupported().then(function(O){O.create(w).then(function(E){return E.render(s.element,k,S).then(function(D){p.renderedCamera=D,y.execute(),g(null)}).catch(function(D){y.cancel(),N(D)})}).catch(function(E){y.cancel(),N(l1.errorGettingUserMedia(E))})}).catch(function(O){y.cancel(),N(l1.cameraStreamingNotSupported())})})},e.prototype.pause=function(t){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(ii.PAUSED),this.showPausedState(),(g0(t)||t!==!0)&&(t=!1),t&&this.renderedCamera&&this.renderedCamera.pause()},e.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var t=this,r=function(){t.stateManagerProxy.directTransition(ii.SCANNING),t.hidePausedState()};if(!this.renderedCamera.isPaused()){r();return}this.renderedCamera.resume(function(){r()})},e.prototype.getState=function(){return this.stateManagerProxy.getState()},e.prototype.stop=function(){var t=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var r=this.stateManagerProxy.startTransition(ii.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var n=function(){if(t.element){var s=document.getElementById(pc.SHADED_REGION_ELEMENT_ID);s&&t.element.removeChild(s)}},a=this;return this.renderedCamera.close().then(function(){return a.renderedCamera=null,a.element&&(a.element.removeChild(a.canvasElement),a.canvasElement=null),n(),a.qrRegion&&(a.qrRegion=null),a.context&&(a.context=null),r.execute(),a.hidePausedState(),a.isScanning=!1,Promise.resolve()})},e.prototype.scanFile=function(t,r){return this.scanFileV2(t,r).then(function(n){return n.decodedText})},e.prototype.scanFileV2=function(t,r){var n=this;if(!t||!(t instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(g0(r)&&(r=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(a,s){n.possiblyCloseLastScanImageFile(),n.clearElement(),n.lastScanImageFile=URL.createObjectURL(t);var l=new Image;l.onload=function(){var o=l.width,c=l.height,d=document.getElementById(n.elementId),f=d.clientWidth?d.clientWidth:pc.DEFAULT_WIDTH,p=Math.max(d.clientHeight?d.clientHeight:c,pc.FILE_SCAN_MIN_HEIGHT),y=n.computeCanvasDrawConfig(o,c,f,p);if(r){var g=n.createCanvasElement(f,p,"qr-canvas-visible");g.style.display="inline-block",d.appendChild(g);var N=g.getContext("2d");if(!N)throw"Unable to get 2d context from canvas";N.canvas.width=f,N.canvas.height=p,N.drawImage(l,0,0,o,c,y.x,y.y,y.width,y.height)}var w=pc.FILE_SCAN_HIDDEN_CANVAS_PADDING,k=Math.max(l.width,y.width),S=Math.max(l.height,y.height),O=k+2*w,E=S+2*w,D=n.createCanvasElement(O,E);d.appendChild(D);var H=D.getContext("2d");if(!H)throw"Unable to get 2d context from canvas";H.canvas.width=O,H.canvas.height=E,H.drawImage(l,0,0,o,c,w,w,k,S);try{n.qrcode.decodeRobustlyAsync(D).then(function(W){a(LD.createFromQrcodeResult(W))}).catch(s)}catch(W){s("QR code parse error, error = ".concat(W))}},l.onerror=s,l.onabort=s,l.onstalled=s,l.onsuspend=s,l.src=URL.createObjectURL(t)})},e.prototype.clear=function(){this.clearElement()},e.getCameras=function(){return U6e.retrieve()},e.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},e.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},e.prototype.applyVideoConstraints=function(t){if(t){if(!FV.isMediaStreamConstraintsValid(t,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(t)},e.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},e.prototype.getSupportedFormats=function(t){var r=[Vr.QR_CODE,Vr.AZTEC,Vr.CODABAR,Vr.CODE_39,Vr.CODE_93,Vr.CODE_128,Vr.DATA_MATRIX,Vr.MAXICODE,Vr.ITF,Vr.EAN_13,Vr.EAN_8,Vr.PDF_417,Vr.RSS_14,Vr.RSS_EXPANDED,Vr.UPC_A,Vr.UPC_E,Vr.UPC_EAN_EXTENSION];if(!t||typeof t=="boolean"||!t.formatsToSupport)return r;if(!Array.isArray(t.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(t.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var n=[],a=0,s=t.formatsToSupport;a<s.length;a++){var l=s[a];y6e(l)?n.push(l):this.logger.warn("Invalid format: ".concat(l," passed in config, ignoring."))}if(n.length===0)throw"None of formatsToSupport match supported values.";return n},e.prototype.getUseBarCodeDetectorIfSupported=function(t){if(g0(t))return!0;if(!g0(t.useBarCodeDetectorIfSupported))return t.useBarCodeDetectorIfSupported!==!1;if(g0(t.experimentalFeatures))return!0;var r=t.experimentalFeatures;return g0(r.useBarCodeDetectorIfSupported)?!0:r.useBarCodeDetectorIfSupported!==!1},e.prototype.validateQrboxSize=function(t,r,n){var a=this,s=n.qrbox;this.validateQrboxConfig(s);var l=this.toQrdimensions(t,r,s),o=function(d){if(d<pc.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(pc.MIN_QR_BOX_SIZE,"px.")},c=function(d){return d>t&&(a.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),d=t),d};o(l.width),o(l.height),l.width=c(l.width)},e.prototype.validateQrboxConfig=function(t){if(typeof t!="number"&&typeof t!="function"&&(t.width===void 0||t.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},e.prototype.toQrdimensions=function(t,r,n){if(typeof n=="number")return{width:n,height:n};if(typeof n=="function")try{return n(t,r)}catch(a){throw new Error("qrbox config was passed as a function but it failed with unknown error"+a)}return n},e.prototype.setupUi=function(t,r,n){n.isShadedBoxEnabled()&&this.validateQrboxSize(t,r,n);var a=g0(n.qrbox)?{width:t,height:r}:n.qrbox;this.validateQrboxConfig(a);var s=this.toQrdimensions(t,r,a);s.height>r&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var l=n.isShadedBoxEnabled()&&s.height<=r,o={x:0,y:0,width:t,height:r},c=l?this.getShadedRegionBounds(t,r,s):o,d=this.createCanvasElement(c.width,c.height),f={willReadFrequently:!0},p=d.getContext("2d",f);p.canvas.width=c.width,p.canvas.height=c.height,this.element.append(d),l&&this.possiblyInsertShadingElement(this.element,t,r,s),this.createScannerPausedUiElement(this.element),this.qrRegion=c,this.context=p,this.canvasElement=d},e.prototype.createScannerPausedUiElement=function(t){var r=document.createElement("div");r.innerText=l1.scannerPaused(),r.style.display="none",r.style.position="absolute",r.style.top="0px",r.style.zIndex="1",r.style.background="rgba(9, 9, 9, 0.46)",r.style.color="#FFECEC",r.style.textAlign="center",r.style.width="100%",t.appendChild(r),this.scannerPausedUiElement=r},e.prototype.scanContext=function(t,r){var n=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(a){return t(a.text,LD.createFromQrcodeResult(a)),n.possiblyUpdateShaders(!0),!0}).catch(function(a){n.possiblyUpdateShaders(!1);var s=l1.codeParseError(a);return r(s,k6e.createFrom(s)),!1})},e.prototype.foreverScan=function(t,r,n){var a=this;if(this.shouldScan&&this.renderedCamera){var s=this.renderedCamera.getSurface(),l=s.videoWidth/s.clientWidth,o=s.videoHeight/s.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var c=this.qrRegion.width*l,d=this.qrRegion.height*o,f=this.qrRegion.x*l,p=this.qrRegion.y*o;this.context.drawImage(s,f,p,c,d,0,0,this.qrRegion.width,this.qrRegion.height);var y=function(){a.foreverScanTimeout=setTimeout(function(){a.foreverScan(t,r,n)},a.getTimeoutFps(t.fps))};this.scanContext(r,n).then(function(g){!g&&t.disableFlip!==!0?(a.context.translate(a.context.canvas.width,0),a.context.scale(-1,1),a.scanContext(r,n).finally(function(){y()})):y()}).catch(function(g){a.logger.logError("Error happend while scanning context",g),y()})}},e.prototype.createVideoConstraints=function(t){if(typeof t=="string")return{deviceId:{exact:t}};if(typeof t=="object"){var r="facingMode",n="deviceId",a={user:!0,environment:!0},s="exact",l=function(N){if(N in a)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(N,"'")},o=Object.keys(t);if(o.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(o.length," keys");var c=Object.keys(t)[0];if(c!==r&&c!==n)throw"Only '".concat(r,"' and '").concat(n,"' ")+" are supported for 'cameraIdOrConfig'";if(c===r){var d=t.facingMode;if(typeof d=="string"){if(l(d))return{facingMode:d}}else if(typeof d=="object")if(s in d){if(l(d["".concat(s)]))return{facingMode:{exact:d["".concat(s)]}}}else throw"'facingMode' should be string or object with"+" ".concat(s," as key.");else{var f=typeof d;throw"Invalid type of 'facingMode' = ".concat(f)}}else{var p=t.deviceId;if(typeof p=="string")return{deviceId:p};if(typeof p=="object"){if(s in p)return{deviceId:{exact:p["".concat(s)]}};throw"'deviceId' should be string or object with"+" ".concat(s," as key.")}else{var y=typeof p;throw"Invalid type of 'deviceId' = ".concat(y)}}}var g=typeof t;throw"Invalid type of 'cameraIdOrConfig' = ".concat(g)},e.prototype.computeCanvasDrawConfig=function(t,r,n,a){if(t<=n&&r<=a){var s=(n-t)/2,l=(a-r)/2;return{x:s,y:l,width:t,height:r}}else{var o=t,c=r;return t>n&&(r=n/t*r,t=n),r>a&&(t=a/r*t,r=a),this.logger.log("Image downsampled from "+"".concat(o,"X").concat(c)+" to ".concat(t,"X").concat(r,".")),this.computeCanvasDrawConfig(t,r,n,a)}},e.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var t=document.getElementById(this.elementId);t&&(t.innerHTML="")},e.prototype.possiblyUpdateShaders=function(t){this.qrMatch!==t&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(r){r.style.backgroundColor=t?pc.BORDER_SHADER_MATCH_COLOR:pc.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=t)},e.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},e.prototype.createCanvasElement=function(t,r,n){var a=t,s=r,l=document.createElement("canvas");return l.style.width="".concat(a,"px"),l.style.height="".concat(s,"px"),l.style.display="none",l.id=g0(n)?"qr-canvas":n,l},e.prototype.getShadedRegionBounds=function(t,r,n){if(n.width>t||n.height>r)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(t-n.width)/2,y:(r-n.height)/2,width:n.width,height:n.height}},e.prototype.possiblyInsertShadingElement=function(t,r,n,a){if(!(r-a.width<1||n-a.height<1)){var s=document.createElement("div");s.style.position="absolute";var l=(r-a.width)/2,o=(n-a.height)/2;if(s.style.borderLeft="".concat(l,"px solid rgba(0, 0, 0, 0.48)"),s.style.borderRight="".concat(l,"px solid rgba(0, 0, 0, 0.48)"),s.style.borderTop="".concat(o,"px solid rgba(0, 0, 0, 0.48)"),s.style.borderBottom="".concat(o,"px solid rgba(0, 0, 0, 0.48)"),s.style.boxSizing="border-box",s.style.top="0px",s.style.bottom="0px",s.style.left="0px",s.style.right="0px",s.id="".concat(pc.SHADED_REGION_ELEMENT_ID),r-a.width<11||n-a.height<11)this.hasBorderShaders=!1;else{var c=5,d=40;this.insertShaderBorders(s,d,c,-c,null,0,!0),this.insertShaderBorders(s,d,c,-c,null,0,!1),this.insertShaderBorders(s,d,c,null,-c,0,!0),this.insertShaderBorders(s,d,c,null,-c,0,!1),this.insertShaderBorders(s,c,d+c,-c,null,-c,!0),this.insertShaderBorders(s,c,d+c,null,-c,-c,!0),this.insertShaderBorders(s,c,d+c,-c,null,-c,!1),this.insertShaderBorders(s,c,d+c,null,-c,-c,!1),this.hasBorderShaders=!0}t.append(s)}},e.prototype.insertShaderBorders=function(t,r,n,a,s,l,o){var c=document.createElement("div");c.style.position="absolute",c.style.backgroundColor=pc.BORDER_SHADER_DEFAULT_COLOR,c.style.width="".concat(r,"px"),c.style.height="".concat(n,"px"),a!==null&&(c.style.top="".concat(a,"px")),s!==null&&(c.style.bottom="".concat(s,"px")),o?c.style.left="".concat(l,"px"):c.style.right="".concat(l,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(c),t.appendChild(c)},e.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},e.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},e.prototype.getTimeoutFps=function(t){return 1e3/t},e})(),$D;(function(e){e[e.STATUS_DEFAULT=0]="STATUS_DEFAULT",e[e.STATUS_SUCCESS=1]="STATUS_SUCCESS",e[e.STATUS_WARNING=2]="STATUS_WARNING",e[e.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})($D||($D={}));const K6e=({isOpen:e,onClose:t,onScan:r})=>{const n=T.useRef(null),[a,s]=T.useState(!1),[l,o]=T.useState("");return T.useEffect(()=>{if(!e)return;const c=async()=>{try{const f=new W6e("barcode-reader");n.current=f,await f.start({facingMode:"environment"},{fps:10,qrbox:{width:250,height:250}},p=>{r(p),d()},p=>{}),s(!0),o("")}catch(f){console.error("Error starting scanner:",f),o("Khng th truy cp camera. Vui lng cp quyn camera trong ci t trnh duyt.")}},d=async()=>{if(n.current&&a)try{await n.current.stop(),n.current.clear()}catch(f){console.error("Error stopping scanner:",f)}s(!1),t()};return c(),()=>{n.current&&a&&n.current.stop().then(()=>{var f;(f=n.current)==null||f.clear()}).catch(console.error)}},[e]),e?i.jsxs("div",{className:"fixed inset-0 bg-black/90 z-[200] flex flex-col items-center justify-center p-4",children:[i.jsxs("div",{className:"w-full max-w-md mb-4 flex items-center justify-between",children:[i.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[i.jsx(tee,{className:"w-6 h-6"}),"Qut m vch"]}),i.jsx("button",{onClick:t,className:"w-10 h-10 flex items-center justify-center bg-white/10 hover:bg-white/20 rounded-full text-white transition-colors",children:i.jsx(_0,{className:"w-6 h-6"})})]}),i.jsx("div",{className:"w-full max-w-md bg-white rounded-2xl overflow-hidden shadow-2xl",children:i.jsx("div",{id:"barcode-reader",className:"w-full"})}),l&&i.jsxs("div",{className:"mt-4 p-4 bg-red-500/20 border border-red-500 rounded-xl text-white text-sm max-w-md",children:[i.jsx("p",{className:"font-semibold mb-1",children:" Li camera"}),i.jsx("p",{children:l})]}),i.jsxs("div",{className:"mt-6 text-center text-white/70 text-sm max-w-md",children:[i.jsx("p",{children:" a camera vo m vch  qut t ng"}),i.jsx("p",{className:"mt-2",children:"M vch s c thm vo gi hng ngay lp tc"})]})]}):null},G6e=({isOpen:e,onClose:t,parts:r,receiptItems:n,setReceiptItems:a,selectedSupplier:s,setSelectedSupplier:l,searchTerm:o,setSearchTerm:c,onSave:d,discount:f,setDiscount:p,discountType:y,setDiscountType:g,paymentMethod:N,setPaymentMethod:w,paymentType:k,setPaymentType:S,partialAmount:O,setPartialAmount:E,showAddProductModal:D,setShowAddProductModal:H,onAddNewProduct:W,currentBranchId:R})=>{var me,se,je;const[z,U]=T.useState(1),[Z,q]=T.useState(!1),[K,Q]=T.useState(""),re=T.useRef(null),[ae,de]=T.useState(!1),{data:he=[]}=kA();console.log(" GoodsReceiptMobileModal - parts:",(r==null?void 0:r.length)||0,r==null?void 0:r.slice(0,2)),console.log(" searchTerm:",o);const Se=(r==null?void 0:r.filter(be=>{var Te,De;if(!o||o.trim()==="")return!0;const ie=o.toLowerCase().trim();return((Te=be.name)==null?void 0:Te.toLowerCase().includes(ie))||((De=be.sku)==null?void 0:De.toLowerCase().includes(ie))}))||[];console.log(" filteredParts:",(Se==null?void 0:Se.length)||0);const ke=be=>{n.find(Te=>Te.partId===be.id)?(a(Te=>Te.map(De=>De.partId===be.id?{...De,quantity:De.quantity+1}:De)),Ye.success(` tng s lng ${be.name}`)):(a(Te=>{var De,ye,rt;return[...Te,{partId:be.id,partName:be.name,sku:be.sku,quantity:1,importPrice:((De=be.costPrice)==null?void 0:De[R])||0,sellingPrice:((ye=be.retailPrice)==null?void 0:ye[R])||0,wholesalePrice:((rt=be.wholesalePrice)==null?void 0:rt[R])||0}]}),Ye.success(` thm ${be.name} vo phiu nhp`)),c(""),setTimeout(()=>{var Te;return(Te=re.current)==null?void 0:Te.focus()},100)},Le=be=>{if(be.preventDefault(),!K.trim())return;const ie=K.trim(),Te=r.find(De=>{var ye,rt;return((ye=De.sku)==null?void 0:ye.toLowerCase())===ie.toLowerCase()||((rt=De.name)==null?void 0:rt.toLowerCase().includes(ie.toLowerCase()))});Te?(ke(Te),Q("")):(Ye.info(`Sn phm m ${ie} cha c. Vui lng thm thng tin sn phm mi.`,{autoClose:3e3}),setTimeout(()=>{H(!0)},500))},fe=be=>{const ie=r.find(Te=>{var De,ye;return((De=Te.sku)==null?void 0:De.toLowerCase())===be.toLowerCase()||((ye=Te.name)==null?void 0:ye.toLowerCase().includes(be.toLowerCase()))});de(!1),ie?ke(ie):(Ye.info(`Sn phm m ${be} cha c. Vui lng thm thng tin sn phm mi.`),Q(be),setTimeout(()=>{H(!0)},500))};T.useEffect(()=>{e&&z===1&&setTimeout(()=>{var be;return(be=re.current)==null?void 0:be.focus()},300)},[e,z]);const F=be=>{a(ie=>ie.filter((Te,De)=>De!==be))},te=n.reduce((be,ie)=>be+ie.quantity*ie.importPrice,0),Y=y==="percent"?Math.round(te*f/100):f,ne=Math.max(0,te-Y),ee=()=>{if(!s){alert("Vui lng chn nh cung cp");return}U(2)},Ce=()=>{alert("Chc nng lu nhp ang pht trin")};return e?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"fixed inset-0 bg-black/50 z-[100] flex items-end justify-center sm:hidden",children:i.jsx("div",{className:"bg-white dark:bg-slate-800 w-full h-[95vh] rounded-t-3xl overflow-hidden flex flex-col",children:z===1?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 p-4 flex items-center justify-between flex-shrink-0",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("button",{onClick:t,className:"text-white text-2xl leading-none",children:""}),i.jsx("h2",{className:"text-lg font-bold text-white",children:"To phiu nhp kho"})]})}),i.jsx("div",{className:"p-3 bg-slate-50 dark:bg-slate-900 border-b border-slate-200 dark:border-slate-700 flex-shrink-0",children:i.jsx("div",{onClick:()=>q(!0),className:`p-4 rounded-xl border-2 cursor-pointer active:scale-98 transition-transform ${s?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-dashed border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800"}`,children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("div",{className:"flex-1",children:s?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"NH CUNG CP"}),i.jsx("div",{className:"font-bold text-slate-900 dark:text-slate-100",children:((me=he.find(be=>be.id===s))==null?void 0:me.name)||""}),((se=he.find(be=>be.id===s))==null?void 0:se.phone)&&i.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:(je=he.find(be=>be.id===s))==null?void 0:je.phone})]}):i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-2xl",children:""}),i.jsx("span",{className:"text-slate-500 dark:text-slate-400",children:"Chn nh cung cp"})]})}),i.jsx("svg",{className:"w-5 h-5 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})})}),i.jsxs("div",{className:"p-3 bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 sticky top-0 z-10 flex-shrink-0 space-y-2",children:[i.jsxs("form",{onSubmit:Le,className:"flex gap-2",children:[i.jsxs("div",{className:"relative flex-1",children:[i.jsx("svg",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"})}),i.jsx("input",{ref:re,type:"text",placeholder:"Nhp SKU hoc qut...",value:K,onChange:be=>Q(be.target.value),className:"w-full px-4 py-3 pl-11 border-2 border-blue-400 dark:border-blue-600 rounded-xl bg-blue-50 dark:bg-blue-900/20 text-slate-900 dark:text-slate-100 text-base font-mono placeholder:text-blue-500/70"}),K&&i.jsx("button",{type:"button",onClick:()=>Q(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600 dark:hover:text-slate-300",children:i.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),i.jsx("button",{type:"button",onClick:()=>de(!0),className:"w-14 h-[50px] flex items-center justify-center bg-gradient-to-br from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white rounded-xl shadow-lg transition-all active:scale-95",children:i.jsxs("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]})})]}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:"text",placeholder:"Hoc tm kim th cng...",value:o,onChange:be=>c(be.target.value),className:"w-full px-4 py-3 pl-10 border border-slate-300 dark:border-slate-600 rounded-xl bg-slate-50 dark:bg-slate-900 text-slate-900 dark:text-slate-100"}),i.jsx("svg",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})]}),i.jsxs("div",{className:"flex-1 overflow-y-auto p-3 bg-slate-50 dark:bg-slate-900",children:[!r||r.length===0?i.jsxs("div",{className:"text-center text-slate-500 py-12",children:[i.jsx("div",{className:"text-5xl mb-3",children:""}),i.jsx("div",{children:"ang ti danh sch sn phm..."})]}):Se.length===0?i.jsxs("div",{className:"text-center text-slate-500 py-12",children:[i.jsx("div",{className:"text-5xl mb-3",children:""}),i.jsx("div",{children:"Khng tm thy sn phm"}),o&&i.jsxs("div",{className:"text-sm mt-2",children:['Tm kim: "',o,'"']})]}):i.jsx("div",{className:"space-y-2",children:Se.map(be=>{var Te,De;const ie=n.find(ye=>ye.partId===be.id);return i.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl p-4 border border-slate-200 dark:border-slate-700",children:i.jsxs("div",{className:"flex items-start justify-between gap-3",children:[i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("div",{className:"font-bold text-slate-900 dark:text-slate-100 text-base leading-tight mb-1",children:be.name}),i.jsxs("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:["SKU: ",be.sku]}),i.jsxs("div",{className:"mt-2 flex gap-3 text-xs",children:[i.jsxs("div",{children:[i.jsxs("span",{className:"text-slate-500 dark:text-slate-400",children:["Nhp:"," "]}),i.jsx("span",{className:"font-medium text-orange-600 dark:text-orange-400",children:Ie(((Te=be.costPrice)==null?void 0:Te[R])||0)})]}),i.jsxs("div",{children:[i.jsxs("span",{className:"text-slate-500 dark:text-slate-400",children:["Bn:"," "]}),i.jsx("span",{className:"font-medium text-green-600 dark:text-green-400",children:Ie(((De=be.retailPrice)==null?void 0:De[R])||0)})]})]}),ie&&i.jsx("div",{className:"mt-2 text-sm",children:i.jsxs("span",{className:"text-blue-600 dark:text-blue-400 font-medium",children:[" thm: ",ie.quantity," "," ",Ie(ie.importPrice)]})})]}),i.jsx("button",{onClick:()=>ke(be),className:"flex-shrink-0 w-10 h-10 rounded-full bg-blue-600 text-white flex items-center justify-center text-2xl leading-none active:scale-95 transition-transform",children:"+"})]})},be.id)})}),i.jsxs("button",{onClick:()=>H(!0),className:"w-full mt-3 py-4 border-2 border-dashed border-slate-300 dark:border-slate-600 rounded-xl text-slate-500 dark:text-slate-400 hover:border-blue-400 hover:text-blue-600 transition-colors flex items-center justify-center gap-2",children:[i.jsx("span",{className:"text-2xl",children:"+"}),i.jsx("span",{className:"font-medium",children:"To sn phm mi"})]})]}),n.length>0&&i.jsx("div",{className:"flex-shrink-0 bg-gradient-to-t from-white via-white dark:from-slate-800 dark:via-slate-800 to-transparent pt-6 pb-safe pb-4 px-3",children:i.jsxs("button",{onClick:ee,className:"w-full bg-blue-600 hover:bg-blue-700 active:scale-98 text-white py-4 rounded-xl font-bold text-lg flex items-center justify-between px-6 shadow-lg transition-transform",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"bg-white/20 rounded-full w-8 h-8 flex items-center justify-center font-bold",children:n.reduce((be,ie)=>be+ie.quantity,0)}),i.jsx("span",{children:"Tip tc"})]}),i.jsx("span",{className:"font-bold",children:Ie(te)})]})})]}):i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 p-4 flex items-center justify-between flex-shrink-0",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("button",{onClick:()=>U(1),className:"text-white text-xl leading-none",children:""}),i.jsx("h2",{className:"text-lg font-bold text-white",children:"Xc nhn nhp kho"})]})}),i.jsxs("div",{className:"flex-1 overflow-y-auto bg-slate-50 dark:bg-slate-900",children:[i.jsx("div",{className:"p-3 space-y-2",children:n.map((be,ie)=>i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl p-4 border border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"flex items-start justify-between gap-3 mb-3",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("div",{className:"font-bold text-slate-900 dark:text-slate-100 leading-tight",children:be.partName}),i.jsxs("div",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:["SKU: ",be.sku]})]}),i.jsx("button",{onClick:()=>F(ie),className:"text-red-500 hover:text-red-600 text-xl",children:""})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{onClick:()=>{if(be.quantity>1){const Te=[...n];Te[ie].quantity-=1,a(Te)}},className:"w-8 h-8 rounded-lg border-2 border-slate-300 dark:border-slate-600 flex items-center justify-center text-slate-600 dark:text-slate-400 font-bold active:scale-95 transition-transform",children:""}),i.jsx("div",{className:"w-12 text-center font-bold text-lg text-slate-900 dark:text-slate-100",children:be.quantity}),i.jsx("button",{onClick:()=>{const Te=[...n];Te[ie].quantity+=1,a(Te)},className:"w-8 h-8 rounded-lg border-2 border-blue-500 flex items-center justify-center text-blue-600 font-bold active:scale-95 transition-transform",children:"+"})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:[Ie(be.importPrice)," / ci"]}),i.jsx("div",{className:"font-bold text-orange-600 dark:text-orange-400",children:Ie(be.quantity*be.importPrice)})]})]})]},ie))}),i.jsx("div",{className:"p-3",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl p-4 border border-slate-200 dark:border-slate-700 space-y-3",children:[i.jsxs("div",{className:"flex justify-between text-slate-700 dark:text-slate-300",children:[i.jsx("span",{children:"Tng tin hng"}),i.jsx("span",{className:"font-medium",children:Ie(te)})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:"Gim gi"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"number",inputMode:"numeric",value:f,onChange:be=>p(Number(be.target.value)),placeholder:"0",className:"w-24 px-3 py-1.5 border border-slate-300 dark:border-slate-600 rounded-lg text-right bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"}),i.jsxs("select",{value:y,onChange:be=>g(be.target.value),className:"px-2 py-1.5 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 text-sm",children:[i.jsx("option",{value:"amount",children:""}),i.jsx("option",{value:"percent",children:"%"})]})]})]}),i.jsxs("div",{className:"flex justify-between items-center pt-3 border-t-2 border-slate-200 dark:border-slate-700",children:[i.jsx("span",{className:"text-lg font-bold text-slate-900 dark:text-slate-100",children:"CN THANH TON"}),i.jsx("span",{className:"text-xl font-bold text-red-600 dark:text-red-400",children:Ie(ne)})]})]})}),i.jsxs("div",{className:"p-3",children:[i.jsx("div",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Phng thc thanh ton"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>w("cash"),className:`flex-1 py-3 rounded-xl font-medium transition-all ${N==="cash"?"bg-green-600 text-white shadow-lg":"bg-white dark:bg-slate-800 text-slate-700 dark:text-slate-300 border border-slate-300 dark:border-slate-600"}`,children:" Tin mt"}),i.jsx("button",{onClick:()=>w("bank"),className:`flex-1 py-3 rounded-xl font-medium transition-all ${N==="bank"?"bg-blue-600 text-white shadow-lg":"bg-white dark:bg-slate-800 text-slate-700 dark:text-slate-300 border border-slate-300 dark:border-slate-600"}`,children:" Chuyn khon"})]})]}),i.jsx("div",{className:"p-3",children:i.jsxs("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-xl p-1 flex gap-1",children:[i.jsx("button",{onClick:()=>{S("full"),E(0)},className:`flex-1 py-2.5 rounded-lg font-medium transition-all ${k==="full"?"bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100 shadow":"text-slate-600 dark:text-slate-400"}`,children:""}),i.jsx("button",{onClick:()=>S("partial"),className:`flex-1 py-2.5 rounded-lg font-medium transition-all ${k==="partial"?"bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100 shadow":"text-slate-600 dark:text-slate-400"}`,children:"1 Phn"}),i.jsx("button",{onClick:()=>{S("note"),E(0)},className:`flex-1 py-2.5 rounded-lg font-medium transition-all ${k==="note"?"bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100 shadow":"text-slate-600 dark:text-slate-400"}`,children:"N"})]})}),k==="partial"&&i.jsx("div",{className:"p-3",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl p-4 border border-slate-300 dark:border-slate-600",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Tin tr NCC"}),i.jsx("input",{type:"number",inputMode:"numeric",value:O,onChange:be=>{const ie=Number(be.target.value);ie<=ne?E(ie):alert("S tin tr khng c vt qu tng tin")},placeholder:"Nhp s tin",className:"w-full px-4 py-3 border border-slate-300 dark:border-slate-600 rounded-lg text-right text-lg font-bold bg-slate-50 dark:bg-slate-900 text-slate-900 dark:text-slate-100"}),i.jsxs("div",{className:"mt-2 text-sm text-red-600 dark:text-red-400",children:["Cn n: ",Ie(ne-O)]})]})}),k==="note"&&i.jsx("div",{className:"p-3",children:i.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl p-4",children:[i.jsx("div",{className:"text-sm text-red-700 dark:text-red-400 mb-1",children:"S tin n"}),i.jsx("div",{className:"text-2xl font-bold text-red-600 dark:text-red-400",children:Ie(ne)})]})})]}),i.jsx("div",{className:"p-3 bg-white dark:bg-slate-800 border-t border-slate-200 dark:border-slate-700 space-y-2 flex-shrink-0",children:i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:Ce,className:"flex-1 py-3 border-2 border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-xl font-medium active:scale-98 transition-transform",children:" Lu Nhp"}),i.jsx("button",{onClick:d,disabled:!s||n.length===0,className:"flex-1 py-3 bg-blue-600 hover:bg-blue-700 disabled:bg-slate-300 dark:disabled:bg-slate-600 text-white rounded-xl font-bold active:scale-98 transition-transform disabled:cursor-not-allowed",children:" NHP KHO"})]})})]})})}),i.jsx(v6e,{isOpen:Z,onClose:()=>q(!1),selectedSupplierId:s,onSelectSupplier:l}),i.jsx(K6e,{isOpen:ae,onClose:()=>de(!1),onScan:fe})]}):null},X6e=({transactions:e})=>{const{currentBranchId:t}=Ua(),{data:r=[]}=Ok(),[n,a]=T.useState("7days"),[s,l]=T.useState(Bn(new Date,!0)),[o,c]=T.useState(Bn(new Date,!0)),[d,f]=T.useState(""),[p,y]=T.useState(!1),[g,N]=T.useState(null),w=T.useMemo(()=>{let O=e.filter(D=>D.type==="Nhp kho");const E=new Date;switch(n){case"7days":const D=new Date(E.getTime()-6048e5);O=O.filter(R=>new Date(R.date)>=D);break;case"30days":const H=new Date(E.getTime()-720*60*60*1e3);O=O.filter(R=>new Date(R.date)>=H);break;case"thisMonth":const W=new Date(E.getFullYear(),E.getMonth(),1);O=O.filter(R=>new Date(R.date)>=W);break;case"custom":O=O.filter(R=>{const z=new Date(R.date);return z>=new Date(s)&&z<=new Date(o)});break}if(d){const D=d.toLowerCase();O=O.filter(H=>H.partName.toLowerCase().includes(D)||H.notes&&H.notes.toLowerCase().includes(D))}return O.sort((D,H)=>new Date(H.date).getTime()-new Date(D.date).getTime())},[e,n,s,o,d]),k=T.useMemo(()=>w.reduce((O,E)=>O+E.totalPrice,0),[w]),S=T.useMemo(()=>{const O=new Map;return w.forEach(E=>{var z,U;const D=new Date(E.date),H=`${D.getFullYear()}-${String(D.getMonth()+1).padStart(2,"0")}-${String(D.getDate()).padStart(2,"0")}`,W=(z=E.notes)!=null&&z.includes("NCC:")?(U=E.notes.split("NCC:")[1])==null?void 0:U.trim():"Khng xc nh",R=`${H}_${W}_${D.getHours()}_${D.getMinutes()}`;O.has(R)||O.set(R,[]),O.get(R).push(E)}),Array.from(O.entries()).map(([E,D],H)=>{var U,Z,q;const W=D[0],R=new Date(W.date);let z="";if(W.notes){const K=W.notes.match(/NH-\d{8}-\d{3}/);K&&(z=K[0])}return z||(z=`NH-${`${R.getFullYear()}${String(R.getMonth()+1).padStart(2,"0")}${String(R.getDate()).padStart(2,"0")}`}-${String(O.size-H).padStart(3,"0")}`),{receiptCode:z,date:W.date,supplier:(U=W.notes)!=null&&U.includes("NCC:")?(q=(Z=W.notes.split("NCC:")[1])==null?void 0:Z.split("|")[0])==null?void 0:q.trim():"Khng xc nh",items:D,total:D.reduce((K,Q)=>K+Q.totalPrice,0)}}).sort((E,D)=>new Date(D.date).getTime()-new Date(E.date).getTime())},[w]);return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex flex-col h-full bg-slate-50 dark:bg-[#0f172a]",children:[i.jsxs("div",{className:"sticky top-0 z-10 bg-white dark:bg-[#1e293b] border-b border-slate-200 dark:border-slate-700 p-3 space-y-2",children:[i.jsx("input",{type:"text",value:d,onChange:O=>f(O.target.value),placeholder:"Tm NCC, ph tng...",className:"w-full px-4 py-2.5 border border-slate-300 dark:border-slate-600 rounded-lg dark:bg-slate-700 dark:text-slate-100 placeholder-slate-400 text-sm"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("button",{onClick:()=>y(!0),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg text-sm font-medium",children:[i.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})}),"B lc"]}),i.jsx("div",{className:"px-4 py-2 bg-slate-100 dark:bg-slate-700 rounded-lg text-sm font-medium text-slate-700 dark:text-slate-300",children:S.length})]})]}),i.jsx("div",{className:"px-3 py-3 bg-blue-50 dark:bg-blue-900/20 border-b border-blue-100 dark:border-blue-800",children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("div",{className:"text-xs text-blue-600 dark:text-blue-400",children:"Tng gi tr nhp"}),i.jsx("div",{className:"text-xl font-bold text-blue-600 dark:text-blue-400",children:Ie(k)})]})}),i.jsx("div",{className:"flex-1 overflow-auto",children:S.length===0?i.jsxs("div",{className:"flex flex-col items-center justify-center h-full p-8 text-center",children:[i.jsx("div",{className:"text-6xl mb-4",children:""}),i.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-2",children:"Khng c d liu"}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Th thay i b lc hoc thi gian"})]}):i.jsx("div",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:S.map(O=>{const E=new Date(O.date),D=E.toLocaleDateString("vi-VN",{day:"2-digit",month:"2-digit",year:"numeric"}),H=E.toLocaleTimeString("vi-VN",{hour:"2-digit",minute:"2-digit"}),W=r.find(U=>{var Z;return(Z=U.description)==null?void 0:Z.includes(O.receiptCode)}),R=(W==null?void 0:W.remainingAmount)||0,z=R>0;return i.jsxs("button",{onClick:()=>N({...O,date:new Date(O.date)}),className:"w-full p-4 bg-white dark:bg-[#1e293b] hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors text-left",children:[i.jsxs("div",{className:"flex items-start justify-between gap-3 mb-3",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-sm font-bold text-cyan-600 dark:text-cyan-400",children:O.receiptCode}),i.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400 mt-0.5",children:[D,"  ",H]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Tng tin"}),i.jsx("div",{className:"text-base font-bold text-slate-900 dark:text-white",children:Ie(O.total)})]})]}),i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx("div",{className:"w-8 h-8 rounded-full bg-orange-100 dark:bg-orange-900/30 flex items-center justify-center text-lg",children:""}),i.jsx("div",{className:"text-sm font-medium text-slate-900 dark:text-white",children:O.supplier})]}),i.jsxs("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:[O.items.length," sn phm"]}),z&&i.jsx("div",{className:"mt-2",children:i.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-200",children:[" Cn n ",Ie(R)]})})]},O.receiptCode)})})})]}),p&&i.jsxs("div",{className:"fixed inset-0 z-50 flex items-end",children:[i.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>y(!1)}),i.jsxs("div",{className:"relative bg-white dark:bg-[#1e293b] rounded-t-2xl w-full max-h-[80vh] overflow-hidden flex flex-col",children:[i.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-slate-200 dark:border-slate-700",children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"B lc thi gian"}),i.jsx("button",{onClick:()=>y(!1),className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg",children:i.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),i.jsxs("div",{className:"flex-1 overflow-auto p-4 space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Thi gian"}),i.jsx("div",{className:"grid grid-cols-2 gap-2",children:[{key:"7days",label:"7 ngy qua"},{key:"30days",label:"30 ngy qua"},{key:"thisMonth",label:"Thng ny"},{key:"custom",label:"Ty chn"}].map(O=>i.jsx("button",{onClick:()=>a(O.key),className:`px-4 py-2.5 rounded-lg text-sm font-medium transition-colors ${n===O.key?"bg-blue-600 text-white":"bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300"}`,children:O.label},O.key))})]}),n==="custom"&&i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"T ngy"}),i.jsx("input",{type:"date",value:s,onChange:O=>l(O.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg dark:bg-slate-700 dark:text-slate-100"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"n ngy"}),i.jsx("input",{type:"date",value:o,onChange:O=>c(O.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg dark:bg-slate-700 dark:text-slate-100"})]})]})]}),i.jsx("div",{className:"p-4 border-t border-slate-200 dark:border-slate-700",children:i.jsx("button",{onClick:()=>y(!1),className:"w-full px-4 py-2.5 bg-blue-600 text-white rounded-lg text-sm font-medium",children:"p dng"})})]})]}),g&&i.jsxs("div",{className:"fixed inset-0 z-50 flex items-end",children:[i.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>N(null)}),i.jsxs("div",{className:"relative bg-white dark:bg-[#1e293b] rounded-t-2xl w-full max-h-[85vh] overflow-hidden flex flex-col",children:[i.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-slate-200 dark:border-slate-700",children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Chi tit phiu nhp"}),i.jsx("button",{onClick:()=>N(null),className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg",children:i.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),i.jsxs("div",{className:"flex-1 overflow-auto p-4 space-y-4",children:[i.jsxs("div",{className:"bg-cyan-50 dark:bg-cyan-900/20 rounded-lg p-3",children:[i.jsx("div",{className:"text-xs text-cyan-600 dark:text-cyan-400 mb-1",children:"M phiu"}),i.jsx("div",{className:"text-lg font-bold text-cyan-600 dark:text-cyan-400",children:g.receiptCode})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 rounded-lg p-3",children:[i.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"Ngy nhp"}),i.jsx("div",{className:"text-sm font-medium text-slate-900 dark:text-white",children:Bn(new Date(g.date))})]}),i.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-3",children:[i.jsx("div",{className:"text-xs text-blue-600 dark:text-blue-400 mb-1",children:"Tng tin"}),i.jsx("div",{className:"text-lg font-bold text-blue-600 dark:text-blue-400",children:Ie(g.total)})]})]}),i.jsxs("div",{className:"bg-orange-50 dark:bg-orange-900/20 rounded-lg p-3",children:[i.jsx("div",{className:"text-xs text-orange-600 dark:text-orange-400 mb-1",children:"Nh cung cp"}),i.jsx("div",{className:"text-base font-semibold text-orange-900 dark:text-orange-100",children:g.supplier})]}),i.jsxs("div",{children:[i.jsxs("h4",{className:"text-sm font-semibold text-slate-900 dark:text-slate-100 mb-2",children:["Danh sch sn phm (",g.items.length,")"]}),i.jsx("div",{className:"space-y-2",children:g.items.map(O=>i.jsxs("div",{className:"flex items-start justify-between p-3 bg-slate-50 dark:bg-slate-800 rounded-lg",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"text-sm font-medium text-slate-900 dark:text-white",children:[O.quantity," x ",O.partName]}),i.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400 mt-0.5",children:[Ie(O.unitPrice||0)," / SP"]})]}),i.jsx("div",{className:"text-sm font-bold text-slate-900 dark:text-white",children:Ie(O.quantity*(O.unitPrice||0))})]},O.id))})]})]})]})]})]})},Bf=5,VD={neutral:{buttonActive:"border-blue-500 bg-blue-500/10 shadow-[0_5px_25px_rgba(59,130,246,0.15)] text-primary-text",buttonInactive:"border-primary-border bg-primary-bg hover:border-blue-300/70",badgeActive:"border-blue-500 text-blue-600 bg-white/60 dark:bg-slate-900/40 dark:text-blue-400",badgeInactive:"border-secondary-border text-secondary-text"},success:{buttonActive:"border-emerald-500 bg-emerald-50 shadow-[0_5px_25px_rgba(16,185,129,0.2)] text-emerald-900 dark:bg-emerald-950/50 dark:text-emerald-200",buttonInactive:"border-emerald-200 bg-emerald-50/40 hover:border-emerald-400/70 dark:border-emerald-800 dark:bg-emerald-950/20",badgeActive:"border-emerald-500 text-emerald-700 bg-emerald-50 dark:bg-emerald-950/50 dark:text-emerald-300 dark:border-emerald-600",badgeInactive:"border-emerald-200 text-emerald-600 dark:border-emerald-700 dark:text-emerald-400"},warning:{buttonActive:"border-amber-500 bg-amber-50 shadow-[0_5px_25px_rgba(245,158,11,0.25)] text-amber-900 dark:bg-amber-950/50 dark:text-amber-200",buttonInactive:"border-amber-200 bg-amber-50/40 hover:border-amber-400/70 dark:border-amber-800 dark:bg-amber-950/20",badgeActive:"border-amber-500 text-amber-700 bg-amber-50 dark:bg-amber-950/50 dark:text-amber-300 dark:border-amber-600",badgeInactive:"border-amber-200 text-amber-600 dark:border-amber-700 dark:text-amber-400"},danger:{buttonActive:"border-red-500 bg-red-50 shadow-[0_5px_25px_rgba(239,68,68,0.25)] text-red-900 dark:bg-red-950/50 dark:text-red-200",buttonInactive:"border-red-200 bg-red-50/40 hover:border-red-400/70 dark:border-red-800 dark:bg-red-950/20",badgeActive:"border-red-500 text-red-700 bg-red-50 dark:bg-red-950/50 dark:text-red-300 dark:border-red-700",badgeInactive:"border-red-200 text-red-600 dark:border-red-700 dark:text-red-400"}},UV=({isOpen:e,onClose:t,onSave:r})=>{const[n,a]=T.useState(""),[s,l]=T.useState(""),[o,c]=T.useState(""),[d,f]=T.useState(1),[p,y]=T.useState(0),[g,N]=T.useState(0),[w,k]=T.useState(1),[S,O]=T.useState("thng"),[E,D]=T.useState(!1),{data:H=[]}=zk(),W=yA(),[R,z]=T.useState(!1),[U,Z]=T.useState(""),q=()=>{if(!n.trim()){Ye.warning("Vui lng nhp tn sn phm");return}r({name:n.trim(),description:s.trim(),category:o||"Cha phn loi",quantity:Number(d)||1,importPrice:Number(p)||0,retailPrice:Number(g)||0,warranty:Number(w)||0,warrantyUnit:S}),a(""),l(""),c(""),f(1),y(0),N(0),k(1),D(!1),O("thng")};return e?i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[60] p-4",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg w-full max-w-2xl max-h-[90vh] overflow-hidden flex flex-col",children:[i.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-slate-200 dark:border-slate-700",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:"Thm sn phm mi"}),i.jsx("button",{onClick:t,className:"text-slate-500 hover:text-slate-700 dark:hover:text-slate-300 text-2xl",children:""})]}),i.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:["Tn sn phm ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"text",value:n,onChange:K=>a(K.target.value),className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",placeholder:"Nhp tn sn phm"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"M t"}),i.jsx("textarea",{value:s,onChange:K=>l(K.target.value),rows:3,className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",placeholder:"M t sn phm"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Danh mc sn phm"}),i.jsxs("div",{className:"flex flex-col gap-2",children:[i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("select",{value:o,onChange:K=>c(K.target.value),className:"flex-1 px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",children:[i.jsx("option",{value:"",children:"-- Chn hoc to mi --"}),H.map(K=>i.jsx("option",{value:K.name,children:K.name},K.id))]}),i.jsx("button",{type:"button",onClick:()=>z(!0),className:"w-10 h-10 flex items-center justify-center bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-600","aria-label":"Thm danh mc mi",children:i.jsx("span",{className:"text-xl text-slate-600 dark:text-slate-300",children:"+"})})]}),R&&i.jsxs("form",{onSubmit:async K=>{K.preventDefault();const Q=U.trim();if(!Q){Ye.warning("Vui lng nhp tn danh mc");return}if(Q.length<2){Ye.warning("Tn qu ngn");return}try{const re=await W.mutateAsync({name:Q});c(re.name),Z(""),z(!1)}catch(re){Ye.error((re==null?void 0:re.message)||"Li to danh mc")}},className:"flex gap-2",children:[i.jsx("input",{autoFocus:!0,type:"text",value:U,onChange:K=>Z(K.target.value),placeholder:"Nhp tn danh mc mi",className:"flex-1 px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-sm text-slate-900 dark:text-slate-100"}),i.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm font-medium",children:"Lu"}),i.jsx("button",{type:"button",onClick:()=>{z(!1),Z("")},className:"px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg text-sm bg-white dark:bg-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-600",children:"Hy"})]})]})]}),i.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-4",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-3",children:"Thng tin nhp kho:"}),i.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm text-slate-600 dark:text-slate-400 mb-1",children:"S lng:"}),i.jsx(P0,{value:d,onValue:K=>{const Q=FS(p,K);Q.warnings.length&&Q.warnings.forEach(re=>Ye.warning(re)),f(Math.max(1,Q.clean.quantity))},className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 text-right"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm text-slate-600 dark:text-slate-400 mb-1",children:"Gi nhp:"}),i.jsx(P0,{value:p,onValue:K=>{const Q=FS(K,d);Q.warnings.length&&Q.warnings.forEach(re=>Ye.warning(re)),y(Q.clean.importPrice),E||N(Math.round(Q.clean.importPrice*1.5))},className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 text-right"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm text-slate-600 dark:text-slate-400 mb-1",children:"Gi bn l:"}),i.jsx(P0,{value:g,onValue:K=>{N(Math.max(0,Math.round(K))),D(!0)},className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 text-right"})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Bo hnh"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(P0,{value:w,onValue:K=>k(Math.max(0,Math.floor(K))),className:"w-24 px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 text-right"}),i.jsxs("select",{value:S,onChange:K=>O(K.target.value),className:"px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",children:[i.jsx("option",{value:"thng",children:"thng"}),i.jsx("option",{value:"nm",children:"nm"}),i.jsx("option",{value:"ngy",children:"ngy"})]})]})]})]})}),i.jsx("div",{className:"p-6 border-t border-slate-200 dark:border-slate-700",children:i.jsx("button",{onClick:q,className:"w-full bg-orange-500 hover:bg-orange-600 text-white px-4 py-3 rounded-lg font-medium",children:"Lu v Thm vo gi hng"})})]})}):null},Y6e=({isOpen:e,onClose:t,parts:r,currentBranchId:n,onSave:a})=>{const[s,l]=T.useState([]),[o,c]=T.useState(""),[d,f]=T.useState(""),[p,y]=T.useState(0),[g,N]=T.useState("amount"),[w,k]=T.useState("cash"),[S,O]=T.useState("full"),[E,D]=T.useState(0),[H,W]=T.useState(!1),R=E6();console.log(" GoodsReceiptMobileWrapper - parts received:",(r==null?void 0:r.length)||0,r==null?void 0:r.slice(0,2)),console.log(" currentBranchId:",n),T.useEffect(()=>{e||(l([]),c(""),f(""),y(0),N("amount"),k("cash"),O("full"),D(0))},[e]);const z=Z=>{(async()=>{var q;try{const K=await R.mutateAsync({name:Z.name,sku:Z.sku||`SKU-${Date.now()}`,category:Z.category,stock:{[n]:Z.quantity},costPrice:{[n]:Z.importPrice},retailPrice:{[n]:Z.retailPrice},wholesalePrice:{[n]:Z.wholesalePrice||0}});if(!K.ok)throw new Error(((q=K.error)==null?void 0:q.message)||"Failed to create part");l(Q=>[...Q,{partId:K.data.id,partName:Z.name,sku:Z.sku||`SKU-${Date.now()}`,quantity:Z.quantity,importPrice:Z.importPrice,sellingPrice:Z.retailPrice,wholesalePrice:Z.wholesalePrice||0}]),Ye.success(" to ph tng mi v thm vo phiu nhp")}catch(K){Ye.error((K==null?void 0:K.message)||"Li to ph tng mi")}finally{W(!1)}})()},U=()=>{if(!o){Ye.error("Vui lng chn nh cung cp");return}if(s.length===0){Ye.error("Vui lng thm sn phm");return}const Z=s.reduce((re,ae)=>re+ae.quantity*ae.importPrice,0),q=g==="percent"?Math.round(Z*p/100):p,K=Math.max(0,Z-q);let Q=0;S==="full"?Q=K:S==="partial"&&(Q=E),a(s,o,K,"",{paymentMethod:w,paymentType:S,paidAmount:Q,discount:q}),t()};return i.jsxs(i.Fragment,{children:[i.jsx(G6e,{isOpen:e,onClose:t,parts:r,receiptItems:s,setReceiptItems:l,selectedSupplier:o,setSelectedSupplier:c,searchTerm:d,setSearchTerm:f,onSave:U,discount:p,setDiscount:y,discountType:g,setDiscountType:N,paymentMethod:w,setPaymentMethod:k,paymentType:S,setPaymentType:O,partialAmount:E,setPartialAmount:D,showAddProductModal:H,setShowAddProductModal:W,onAddNewProduct:z,currentBranchId:n}),i.jsx(UV,{isOpen:H,onClose:()=>W(!1),onSave:z})]})},Z6e=({isOpen:e,onClose:t,parts:r,currentBranchId:n,onSave:a})=>{const[s,l]=T.useState(""),[o,c]=T.useState(""),d=T.useRef(null),[f,p]=T.useState(""),[y,g]=T.useState(1),{data:N=[]}=kA(),w=LV(),[k,S]=T.useState(!1),[O,E]=T.useState({name:"",phone:"",address:"",note:""}),D=E6(),[H,W]=T.useState(!1),[R,z]=T.useState([]),[U,Z]=T.useState(null),[q,K]=T.useState(null),[Q,re]=T.useState(0),[ae,de]=T.useState(0),[he,Se]=T.useState("amount"),[ke,Le]=T.useState(0),fe=T.useMemo(()=>{if(console.log(" Desktop Modal - parts:",(r==null?void 0:r.length)||0,r==null?void 0:r.slice(0,2)),console.log(" Desktop Modal - searchTerm:",s),!r||r.length===0)return console.log(" parts is empty or undefined"),[];if(!s||s.trim()==="")return console.log(" Showing all parts:",r.length),r;const be=s.toLowerCase().trim(),ie=r.filter(Te=>{var De,ye;return((De=Te.name)==null?void 0:De.toLowerCase().includes(be))||((ye=Te.sku)==null?void 0:ye.toLowerCase().includes(be))});return console.log(" Filtered results:",ie.length),ie},[r,s]),F=be=>{var Te,De;R.find(ye=>ye.partId===be.id)?(z(ye=>ye.map(rt=>rt.partId===be.id?{...rt,quantity:rt.quantity+1}:rt)),Ye.success(` tng s lng ${be.name}`)):(z([...R,{partId:be.id,partName:be.name,sku:be.sku,quantity:1,importPrice:((Te=be.costPrice)==null?void 0:Te[n])||0,sellingPrice:be.retailPrice[n]||0,wholesalePrice:((De=be.wholesalePrice)==null?void 0:De[n])||0}]),Ye.success(` thm ${be.name} vo phiu nhp`)),l(""),setTimeout(()=>{var ye;return(ye=d.current)==null?void 0:ye.focus()},100)},te=be=>{if(be.preventDefault(),!o.trim())return;const ie=o.trim(),Te=r.find(De=>{var ye,rt;return((ye=De.sku)==null?void 0:ye.toLowerCase())===ie.toLowerCase()||((rt=De.name)==null?void 0:rt.toLowerCase().includes(ie.toLowerCase()))});Te?(F(Te),c("")):(Ye.error(`Khng tm thy sn phm c m: ${ie}`),c(""))};T.useEffect(()=>{e&&setTimeout(()=>{var be;return(be=d.current)==null?void 0:be.focus()},300)},[e]);const Y=(be,ie,Te)=>{z(De=>De.map(ye=>ye.partId===be?{...ye,[ie]:Te}:ye))},ne=be=>{z(ie=>ie.filter(Te=>Te.partId!==be))},ee=T.useMemo(()=>R.reduce((be,ie)=>be+ie.importPrice*ie.quantity,0),[R]),Ce=T.useMemo(()=>Math.max(0,ee-ae),[ee,ae]),{profile:me}=Ic(),se=()=>{var ie;if(!yH(me==null?void 0:me.role,"part.update_price")){Ye.error("Bn khng c quyn cp nht gi");return}if(R.length===0){Ye.warning("Vui lng chn sn phm nhp kho");return}(ie=N.find(Te=>Te.id===f))!=null&&ie.name,a(R,f,Ce,"",{paymentMethod:U||"cash",paymentType:q||"full",paidAmount:q==="full"?Ce:q==="partial"?Q:0,discount:ae}),z([]),p(""),l(""),de(0),Le(0),Se("amount")},je=be=>{(async()=>{try{const ie=await D.mutateAsync({name:be.name,sku:`SKU-${Date.now()}`,category:be.category,description:be.description,stock:{[n]:be.quantity},retailPrice:{[n]:be.retailPrice},wholesalePrice:{[n]:Math.round(be.retailPrice*.9)}});z(Te=>[...Te,{partId:ie.id,partName:be.name,sku:ie.sku,quantity:be.quantity,importPrice:be.importPrice,sellingPrice:be.retailPrice,wholesalePrice:be.wholesalePrice||0}]),Ye.success(" to ph tng mi v thm vo phiu nhp")}catch(ie){Ye.error((ie==null?void 0:ie.message)||"Li to ph tng mi")}finally{W(!1)}})()};return e?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-900 dark:to-slate-800 w-full max-w-7xl h-[92vh] rounded-2xl shadow-2xl overflow-hidden flex",children:[i.jsxs("div",{className:"w-1/2 flex flex-col bg-white/80 dark:bg-slate-900/80 backdrop-blur-sm border-r border-slate-200/50 dark:border-slate-700/50",children:[i.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-slate-200/50 dark:border-slate-700/50 bg-gradient-to-r from-blue-50/50 to-indigo-50/50 dark:from-slate-800/50 dark:to-slate-800/50",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("button",{onClick:t,className:"w-9 h-9 flex items-center justify-center hover:bg-white/80 dark:hover:bg-slate-700/80 rounded-lg text-slate-600 dark:text-slate-400 transition-all hover:scale-105",children:i.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-base font-bold text-slate-900 dark:text-slate-100",children:"Danh mc sn phm"}),i.jsx("p",{className:"text-[10px] text-slate-500 dark:text-slate-400",children:"Chn  thm vo gi"})]})]}),i.jsxs("button",{onClick:()=>W(!0),className:"flex items-center gap-2 bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white px-3 py-2 rounded-lg text-xs font-semibold shadow-lg shadow-blue-500/30 transition-all hover:scale-105",children:[i.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),i.jsx("span",{children:"Thm mi"})]})]}),i.jsxs("div",{className:"p-3 bg-white/50 dark:bg-slate-800/50 space-y-2",children:[i.jsx("form",{onSubmit:te,children:i.jsxs("div",{className:"relative",children:[i.jsx("svg",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"})}),i.jsx("input",{ref:d,type:"text",placeholder:"Qut m vch hoc nhp SKU  thm nhanh...",value:o,onChange:be=>c(be.target.value),className:"w-full pl-10 pr-4 py-2.5 border-2 border-blue-300 dark:border-blue-600 rounded-xl bg-blue-50/50 dark:bg-blue-900/20 text-slate-900 dark:text-slate-100 text-sm placeholder:text-blue-500/60 dark:placeholder:text-blue-400/60 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all font-mono"}),o&&i.jsx("button",{type:"button",onClick:()=>c(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600 dark:hover:text-slate-300",children:i.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),i.jsxs("div",{className:"relative",children:[i.jsx("svg",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),i.jsx("input",{type:"text",placeholder:"Hoc tm kim th cng...",value:s,onChange:be=>l(be.target.value),className:"w-full pl-10 pr-4 py-2.5 border border-slate-300 dark:border-slate-600 rounded-xl bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 text-sm placeholder:text-slate-400 focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500 transition-all"})]})]}),i.jsx("div",{className:"flex-1 overflow-y-auto p-3",children:fe.length===0?i.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-slate-400",children:[i.jsx("svg",{className:"w-16 h-16 mb-3 opacity-30",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})}),i.jsx("p",{className:"text-sm font-medium",children:"Khng tm thy sn phm"}),i.jsx("p",{className:"text-xs mt-1",children:"Th tm kim vi t kha khc"})]}):i.jsx("div",{className:"space-y-2",children:fe.map(be=>i.jsx("div",{onClick:()=>F(be),className:"group p-3 bg-white dark:bg-slate-800 rounded-xl hover:shadow-lg hover:shadow-blue-500/10 cursor-pointer border border-slate-200 dark:border-slate-700 hover:border-blue-400 dark:hover:border-blue-600 transition-all duration-200 hover:scale-[1.02]",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-100 to-indigo-100 dark:from-blue-900/30 dark:to-indigo-900/30 rounded-lg flex items-center justify-center flex-shrink-0 group-hover:scale-110 transition-transform",children:i.jsx("svg",{className:"w-5 h-5 text-blue-600 dark:text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("div",{className:"font-semibold text-sm text-slate-900 dark:text-slate-100 line-clamp-1 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors",children:be.name}),i.jsxs("div",{className:"text-[10px] text-slate-500 dark:text-slate-400 mt-0.5",children:["SKU: ",i.jsx("span",{className:"font-mono",children:be.sku})]})]}),i.jsx("svg",{className:"w-5 h-5 text-slate-300 dark:text-slate-600 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})},be.id))})})]}),i.jsxs("div",{className:"w-1/2 bg-white dark:bg-slate-800 flex flex-col",children:[i.jsxs("div",{className:"p-4 border-b border-slate-200 dark:border-slate-700 bg-gradient-to-r from-emerald-50/30 to-teal-50/30 dark:from-slate-800/50 dark:to-slate-800/50",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx("svg",{className:"w-4 h-4 text-emerald-600 dark:text-emerald-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),i.jsx("label",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300",children:"Nh cung cp"}),i.jsxs("button",{onClick:()=>{E({name:"",phone:"",address:"",note:""}),S(!0)},className:"ml-auto flex items-center gap-1 text-xs px-2 py-1 rounded-lg bg-emerald-100 text-emerald-700 hover:bg-emerald-200 dark:bg-emerald-900/30 dark:text-emerald-400 dark:hover:bg-emerald-900/50 font-medium transition-all",children:[i.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Thm NCC"]})]}),i.jsxs("select",{value:f,onChange:be=>p(be.target.value),className:"w-full px-4 py-2.5 border border-slate-300 dark:border-slate-600 rounded-xl bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 text-sm font-medium focus:ring-2 focus:ring-emerald-500/50 focus:border-emerald-500 transition-all",children:[i.jsx("option",{value:"",children:"Chn nh cung cp..."}),N.map(be=>i.jsxs("option",{value:be.id,children:[be.name," ",be.phone?` ${be.phone}`:""]},be.id))]})]}),k&&i.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/50",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl w-full max-w-md p-6 space-y-4",children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-800 dark:text-slate-100",children:"Thm nh cung cp"}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-medium mb-1 text-slate-600 dark:text-slate-400",children:"Tn *"}),i.jsx("input",{autoFocus:!0,value:O.name,onChange:be=>E(ie=>({...ie,name:be.target.value})),className:"w-full px-3 py-2 rounded border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-sm",placeholder:"Tn nh cung cp"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-medium mb-1 text-slate-600 dark:text-slate-400",children:"in thoi"}),i.jsx("input",{value:O.phone,onChange:be=>E(ie=>({...ie,phone:be.target.value})),className:"w-full px-3 py-2 rounded border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-sm",placeholder:"ST"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-medium mb-1 text-slate-600 dark:text-slate-400",children:"a ch"}),i.jsx("textarea",{rows:2,value:O.address,onChange:be=>E(ie=>({...ie,address:be.target.value})),className:"w-full px-3 py-2 rounded border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-sm resize-none",placeholder:"a ch nh cung cp"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-medium mb-1 text-slate-600 dark:text-slate-400",children:"Ghi ch"}),i.jsx("textarea",{rows:2,value:O.note,onChange:be=>E(ie=>({...ie,note:be.target.value})),className:"w-full px-3 py-2 rounded border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-700 text-sm resize-none",placeholder:"Thng tin thm (ty chn)"})]})]}),i.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[i.jsx("button",{onClick:()=>S(!1),className:"px-4 py-2 text-sm rounded border border-slate-300 dark:border-slate-600 hover:bg-slate-100 dark:hover:bg-slate-700",children:"Hy"}),i.jsx("button",{onClick:async()=>{var be,ie;if(!O.name.trim()){Ye.warning("Nhp tn nh cung cp");return}try{const Te=await w.mutateAsync({name:O.name.trim(),phone:((be=O.phone)==null?void 0:be.trim())||void 0,address:((ie=O.address)==null?void 0:ie.trim())||void 0});p(Te.id),S(!1)}catch{}},className:"px-4 py-2 text-sm rounded bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-60",disabled:w.isPending,children:w.isPending?"ang lu...":"Lu"})]})]})}),i.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("svg",{className:"w-5 h-5 text-blue-600 dark:text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})}),i.jsx("h3",{className:"text-base font-bold text-slate-900 dark:text-slate-100",children:"Gi hng nhp"})]}),i.jsxs("span",{className:"text-xs text-white bg-gradient-to-r from-blue-600 to-indigo-600 px-3 py-1 rounded-full font-semibold shadow-lg",children:[R.length," sn phm"]})]}),R.length===0?i.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-slate-400",children:[i.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-slate-100 to-slate-200 dark:from-slate-800 dark:to-slate-700 rounded-2xl flex items-center justify-center mb-4",children:i.jsx("svg",{className:"w-12 h-12 text-slate-300 dark:text-slate-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})})}),i.jsx("p",{className:"text-sm font-semibold text-slate-500 dark:text-slate-400",children:"Gi hng trng"}),i.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Chn sn phm bn tri  thm vo"})]}):i.jsx("div",{className:"space-y-3",children:R.map((be,ie)=>i.jsxs("div",{className:"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg p-2.5 hover:shadow-md transition-shadow",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx("div",{className:"w-6 h-6 bg-blue-600 rounded flex items-center justify-center flex-shrink-0",children:i.jsxs("span",{className:"text-xs font-bold text-white",children:["#",ie+1]})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("div",{className:"font-medium text-xs text-slate-900 dark:text-slate-100 truncate",children:be.partName}),i.jsxs("div",{className:"text-[9px] text-slate-500 dark:text-slate-400",children:["SKU: ",be.sku]})]}),i.jsx("button",{onClick:()=>ne(be.partId),className:"w-6 h-6 flex items-center justify-center bg-red-100 dark:bg-red-900/30 rounded text-red-600 dark:text-red-400 hover:bg-red-200 flex-shrink-0",title:"Xa",children:""})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("button",{onClick:()=>Y(be.partId,"quantity",Math.max(1,be.quantity-1)),className:"w-6 h-6 flex items-center justify-center bg-slate-100 dark:bg-slate-700 rounded text-slate-600 dark:text-slate-300 hover:bg-blue-50 text-sm",children:"-"}),i.jsx("input",{type:"number",value:be.quantity,onChange:Te=>{const De=parseInt(Te.target.value)||1;Y(be.partId,"quantity",Math.max(1,De))},className:"w-10 px-1 py-1 text-center border border-blue-300 dark:border-blue-700 rounded bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 text-xs font-semibold",min:"1"}),i.jsx("button",{onClick:()=>Y(be.partId,"quantity",be.quantity+1),className:"w-6 h-6 flex items-center justify-center bg-slate-100 dark:bg-slate-700 rounded text-slate-600 dark:text-slate-300 hover:bg-blue-50 text-sm",children:"+"})]}),i.jsx(P0,{value:be.importPrice,onValue:Te=>{const{clean:De}=FS(Te,be.quantity),ye=De.importPrice,rt=Math.round(ye*1.5);z(st=>st.map(dt=>dt.partId===be.partId?{...dt,importPrice:ye,sellingPrice:dt.sellingPrice===0||dt.sellingPrice===Math.round((dt.importPrice||0)*1.5)?rt:dt.sellingPrice}:dt))},className:"flex-1 px-2 py-1 border border-slate-300 dark:border-slate-600 rounded bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 text-right text-xs font-medium focus:border-blue-500",placeholder:"Gi nhp"}),i.jsx(P0,{value:be.sellingPrice,onValue:Te=>Y(be.partId,"sellingPrice",Math.max(0,Math.round(Te))),className:"flex-1 px-2 py-1 border border-slate-300 dark:border-slate-600 rounded bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 text-right text-xs font-medium focus:border-emerald-500",placeholder:"Gi bn"}),i.jsx("div",{className:"w-20 text-right",children:i.jsx("div",{className:"text-xs font-bold text-blue-600 dark:text-blue-400",children:Ie(be.importPrice*be.quantity)})})]})]},be.partId))})]}),i.jsxs("div",{className:"p-3 border-t-2 border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800",children:[i.jsx("div",{className:"mb-3 p-3 bg-gradient-to-r from-blue-600 to-indigo-600 rounded-lg shadow",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-xs font-semibold text-white uppercase",children:"Tng thanh ton"}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"text-xl font-black text-white",children:Ie(Ce)}),i.jsxs("div",{className:"text-[10px] text-white/70",children:[R.length," SP"]})]})]})}),i.jsxs("div",{className:"mb-3",children:[i.jsxs("label",{className:"block text-[10px] font-bold text-slate-700 dark:text-slate-300 mb-1.5",children:["Phng thc thanh ton ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsx("button",{onClick:()=>Z("cash"),className:`flex items-center justify-center gap-1.5 px-3 py-2 border-2 rounded-lg text-xs font-bold transition-all ${U==="cash"?"border-emerald-500 bg-emerald-50 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-400":"border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300"}`,children:" Tin mt"}),i.jsx("button",{onClick:()=>Z("bank"),className:`flex items-center justify-center gap-1.5 px-3 py-2 border-2 rounded-lg text-xs font-bold transition-all ${U==="bank"?"border-blue-500 bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400":"border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300"}`,children:" Chuyn khon"})]})]}),U&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{className:"block text-[10px] font-bold text-slate-700 dark:text-slate-300 mb-1.5",children:"Hnh thc thanh ton"}),i.jsxs("div",{className:"grid grid-cols-3 gap-1.5",children:[i.jsx("button",{onClick:()=>{K("full"),re(0)},className:`px-2 py-1.5 border-2 rounded-lg text-[10px] font-bold transition-all ${q==="full"?"border-blue-500 bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400":"border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300"}`,children:""}),i.jsx("button",{onClick:()=>K("partial"),className:`px-2 py-1.5 border-2 rounded-lg text-[10px] font-bold transition-all ${q==="partial"?"border-orange-500 bg-orange-50 dark:bg-orange-900/30 text-orange-700 dark:text-orange-400":"border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300"}`,children:"1 phn"}),i.jsx("button",{onClick:()=>{K("note"),re(0)},className:`px-2 py-1.5 border-2 rounded-lg text-[10px] font-bold transition-all ${q==="note"?"border-purple-500 bg-purple-50 dark:bg-purple-900/30 text-purple-700 dark:text-purple-400":"border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300"}`,children:"Cng n"})]})]}),q==="partial"&&i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{className:"block text-[10px] font-bold text-slate-700 dark:text-slate-300 mb-1.5",children:"S tin khch tr"}),i.jsx(P0,{value:Q,onValue:be=>re(Math.max(0,Math.round(be))),className:"w-full px-3 py-2 border-2 border-orange-300 dark:border-orange-700 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 text-right text-sm font-bold focus:border-orange-500",placeholder:"Nhp s tin..."}),i.jsxs("div",{className:"mt-1.5 flex items-center justify-between text-[10px]",children:[i.jsx("span",{className:"text-slate-500",children:"Cn li:"}),i.jsx("span",{className:"font-bold text-red-600 dark:text-red-400",children:Ie(Math.max(0,Ce-Q))})]})]}),q&&i.jsxs("div",{className:"mb-3",children:[i.jsx("label",{className:"block text-[10px] font-bold text-slate-700 dark:text-slate-300 mb-1.5",children:"Loi hch ton"}),i.jsxs("select",{className:"w-full px-3 py-2 border-2 border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 text-xs font-semibold focus:border-blue-500",children:[i.jsx("option",{children:"Mua hng/nhp kho"}),i.jsx("option",{children:"Nhp tr hng"}),i.jsx("option",{children:"Khc"})]})]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:t,className:"flex-1 bg-slate-200 hover:bg-slate-300 dark:bg-slate-700 dark:hover:bg-slate-600 text-slate-900 dark:text-slate-100 px-3 py-2.5 rounded-lg font-bold text-xs transition-all",children:i.jsxs("div",{className:"flex items-center justify-center gap-2",children:[i.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})}),"LU NHP"]})}),i.jsx("button",{onClick:()=>{if(!U){Ye.warning("Vui lng chn phng thc thanh ton");return}if(!q){Ye.warning("Vui lng chn hnh thc thanh ton");return}if(q==="partial"&&Q<=0){Ye.warning("Vui lng nhp s tin khch tr");return}se()},disabled:!U||!q||q==="partial"&&Q<=0,className:"flex-1 bg-orange-500 hover:bg-orange-600 text-white px-3 py-2.5 rounded-lg font-bold text-xs transition-all disabled:bg-slate-300 disabled:text-slate-500 disabled:cursor-not-allowed dark:disabled:bg-slate-600 dark:disabled:text-slate-400",children:i.jsxs("div",{className:"flex items-center justify-center gap-2",children:[i.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"})}),"NHP KHO"]})})]})]})]})]})}),i.jsx(UV,{isOpen:H,onClose:()=>W(!1),onSave:je})]}):null},Q6e=({isOpen:e,onClose:t,onSave:r,initialData:n,mode:a})=>{const[s,l]=T.useState((n==null?void 0:n.name)||""),[o,c]=T.useState((n==null?void 0:n.phone)||""),[d,f]=T.useState((n==null?void 0:n.address)||""),[p,y]=T.useState((n==null?void 0:n.email)||"");T.useEffect(()=>{n&&(l(n.name),c(n.phone),f(n.address),y(n.email))},[n]);const g=N=>{if(N.preventDefault(),!s.trim()){Ye.error("Vui lng nhp tn nh cung cp");return}r({name:s.trim(),phone:o.trim(),address:d.trim(),email:p.trim()})};return e?i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[60] p-4",children:i.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg w-full max-w-md",children:i.jsxs("form",{onSubmit:g,children:[i.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-slate-200 dark:border-slate-700",children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:a==="add"?"Thm nh cung cp mi":"Chnh sa nh cung cp"}),i.jsx("button",{type:"button",onClick:t,className:"text-slate-500 hover:text-slate-700 dark:hover:text-slate-300 text-2xl",children:""})]}),i.jsxs("div",{className:"p-4 space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Tn nh cung cp *"}),i.jsx("input",{type:"text",value:s,onChange:N=>l(N.target.value),placeholder:"Nhp tn nh cung cp",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",required:!0,autoFocus:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"S in thoi"}),i.jsx("input",{type:"tel",value:o,onChange:N=>c(N.target.value),placeholder:"Nhp s in thoi",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Email"}),i.jsx("input",{type:"email",value:p,onChange:N=>y(N.target.value),placeholder:"Nhp email",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"a ch"}),i.jsx("textarea",{value:d,onChange:N=>f(N.target.value),placeholder:"Nhp a ch",rows:3,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]})]}),i.jsxs("div",{className:"flex justify-end gap-3 p-4 border-t border-slate-200 dark:border-slate-700",children:[i.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700",children:"Hy"}),i.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium",children:a==="add"?"Thm":"Lu"})]})]})})}):null},J6e=({isOpen:e,onClose:t,onAdd:r,currentBranchId:n})=>{const[a,s]=T.useState(""),[l,o]=T.useState(null),[c,d]=T.useState(1),[f,p]=T.useState(0),{data:y=[]}=Os({queryKey:["allPartsForReceipt"],queryFn:async()=>{const{data:k,error:S}=await Pt.from("parts").select("*").order("name");if(S)throw S;return k||[]}}),g=T.useMemo(()=>{if(!a)return[];const k=a.toLowerCase();return y.filter(S=>{var O,E;return S.name.toLowerCase().includes(k)||((O=S.sku)==null?void 0:O.toLowerCase().includes(k))||((E=S.description)==null?void 0:E.toLowerCase().includes(k))})},[y,a]),N=k=>{var S;o(k),p(((S=k.costPrice)==null?void 0:S[n])||0),s(k.name)},w=k=>{if(k.preventDefault(),!l){Ye.error("Vui lng chn sn phm");return}if(c<=0){Ye.error("S lng phi ln hn 0");return}if(f<0){Ye.error("n gi khng c m");return}r({partId:l.id,partName:l.name,sku:l.sku||"",quantity:c,unitPrice:f}),s(""),o(null),d(1),p(0)};return e?i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[60] p-4",children:i.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg w-full max-w-lg",children:i.jsxs("form",{onSubmit:w,children:[i.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-slate-200 dark:border-slate-700",children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Thm sn phm vo phiu"}),i.jsx("button",{type:"button",onClick:t,className:"text-slate-500 hover:text-slate-700 dark:hover:text-slate-300 text-2xl",children:""})]}),i.jsxs("div",{className:"p-4 space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Tm kim sn phm *"}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:"text",value:a,onChange:k=>{s(k.target.value),o(null)},placeholder:"Nhp tn hoc SKU sn phm...",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",autoFocus:!0}),a&&!l&&g.length>0&&i.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:g.map(k=>{var S;return i.jsxs("button",{type:"button",onClick:()=>N(k),className:"w-full px-3 py-2 text-left hover:bg-slate-100 dark:hover:bg-slate-700 border-b border-slate-200 dark:border-slate-700 last:border-0",children:[i.jsx("div",{className:"text-sm font-medium text-slate-900 dark:text-slate-100",children:k.name}),i.jsxs("div",{className:"text-xs text-slate-500",children:["SKU: ",k.sku||"N/A"," | Gi nhp:"," ",Ie(((S=k.costPrice)==null?void 0:S[n])||0)]})]},k.id)})})]}),l&&i.jsxs("div",{className:"mt-2 p-2 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded text-sm text-green-800 dark:text-green-200",children:["  chn: ",l.name," (",l.sku,")"]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"S lng *"}),i.jsx("input",{type:"number",value:c,onChange:k=>d(Number(k.target.value)),min:"1",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"n gi nhp *"}),i.jsx(P0,{value:f,onValue:p,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",placeholder:"0"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Thnh tin"}),i.jsx("input",{type:"text",value:Ie(c*f),readOnly:!0,className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-slate-100 dark:bg-slate-700 text-slate-900 dark:text-slate-100 font-bold"})]})]}),i.jsxs("div",{className:"flex justify-end gap-3 p-4 border-t border-slate-200 dark:border-slate-700",children:[i.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700",children:"Hy"}),i.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium",children:"Thm sn phm"})]})]})})}):null},eje=({receipt:e,onClose:t,onSave:r,currentBranchId:n})=>{const[a,s]=T.useState(e.supplier),[l,o]=T.useState(""),[c,d]=T.useState(e.supplier),[f,p]=T.useState(!1),[y,g]=T.useState(!1),[N,w]=T.useState("add"),[k,S]=T.useState(!1),[O,E]=T.useState(null),{data:D=[]}=Os({queryKey:["suppliers"],queryFn:async()=>{const{data:Y,error:ne}=await Pt.from("suppliers").select("*").order("name");if(ne)throw ne;return Y||[]}}),H=T.useMemo(()=>{if(!c)return D;const Y=c.toLowerCase();return D.filter(ne=>ne.name.toLowerCase().includes(Y))},[D,c]),[W,R]=T.useState(e.items.map(Y=>({id:Y.id,partName:Y.partName,quantity:Y.quantity,unitPrice:Y.unitPrice||0,totalPrice:Y.quantity*(Y.unitPrice||0),notes:Y.notes||""}))),[z,U]=T.useState([{time:"15:31",date:e.date,payer:"Xun Nhan",cashier:"(Tin mt)",amount:e.total}]),[Z,q]=T.useState(!0);ua.useEffect(()=>{var ne,ee,Ce;const Y=e.items[0];if((ne=Y==null?void 0:Y.notes)!=null&&ne.includes("Phone:")){const me=(Ce=(ee=Y.notes.split("Phone:")[1])==null?void 0:ee.split("NV:")[0])==null?void 0:Ce.trim();me&&o(me)}},[e.items]),ua.useEffect(()=>{const Y=ne=>{ne.target.closest(".supplier-dropdown-container")||p(!1)};return document.addEventListener("mousedown",Y),()=>document.removeEventListener("mousedown",Y)},[]);const K=W.reduce((Y,ne)=>Y+ne.totalPrice,0),Q=z.reduce((Y,ne)=>Y+ne.amount,0),re=(Y,ne)=>{const ee=[...W];ee[Y].quantity=ne,ee[Y].totalPrice=ne*ee[Y].unitPrice,R(ee)},ae=(Y,ne)=>{const ee=[...W];ee[Y].unitPrice=ne,ee[Y].totalPrice=ee[Y].quantity*ne,R(ee)},de=Y=>{if(W.length===1){Ye.error("Phi c t nht 1 sn phm");return}const ne=W.filter((ee,Ce)=>Ce!==Y);R(ne),Ye.success(" xa sn phm")},he=Y=>{const ne={id:`new-${Date.now()}`,partId:Y.partId,partName:Y.partName,quantity:Y.quantity,unitPrice:Y.unitPrice,totalPrice:Y.quantity*Y.unitPrice,notes:"",sku:Y.sku};R([...W,ne]),S(!1),Ye.success(` thm ${Y.partName} (s lu khi bm LU)`)},Se=Y=>{s(Y.name),o(Y.phone),g(!1),Ye.success(N==="add"?" thm nh cung cp":" cp nht nh cung cp")},ke=()=>{w("edit"),g(!0)},Le=()=>{w("add"),g(!0)},fe=Y=>{E(Y),Ye.info("Click vo  s lng hoc n gi  chnh sa")},F=Y=>{confirm("Bn c mun xa sn phm ny?")&&de(Y)},te=Y=>{if(Y.preventDefault(),!a){Ye.error("Vui lng chn nh cung cp");return}if(W.some(ne=>ne.quantity<=0)){Ye.error("S lng phi ln hn 0");return}r({supplier:a,supplierPhone:l,items:W,payments:z,isPaid:Z})};return i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg w-full max-w-3xl max-h-[90vh] overflow-y-auto",children:[i.jsxs("form",{onSubmit:te,children:[i.jsxs("div",{className:"sticky top-0 bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 p-4 flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),i.jsxs("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:["[Chnh sa] Phiu Nhp Kho ",e.receiptCode]})]}),i.jsxs("div",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:[new Date(e.date).toLocaleDateString("vi-VN",{day:"2-digit",month:"2-digit",year:"numeric"})," ",new Date(e.date).toLocaleTimeString("vi-VN",{hour:"2-digit",minute:"2-digit"})]})]}),i.jsx("button",{type:"button",onClick:t,className:"text-slate-500 hover:text-slate-700 dark:hover:text-slate-300 text-2xl w-8 h-8 flex items-center justify-center rounded hover:bg-slate-100 dark:hover:bg-slate-700",children:""})]}),i.jsxs("div",{className:"p-6 space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-base font-medium text-teal-600 dark:text-teal-400 mb-2",children:"Nh cung cp:"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("div",{className:"flex-1 relative supplier-dropdown-container",children:[i.jsx("input",{type:"text",value:c,onChange:Y=>{d(Y.target.value),p(!0)},onFocus:()=>p(!0),placeholder:"Tm kim v chn mt nh cung cp",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"}),c&&i.jsx("button",{type:"button",onClick:()=>{d(""),s(""),o("")},className:"absolute right-2 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600",children:""}),f&&H.length>0&&i.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:H.map(Y=>i.jsxs("button",{type:"button",onClick:()=>{s(Y.name),d(Y.name),o(Y.phone||""),p(!1)},className:"w-full px-3 py-2 text-left hover:bg-slate-100 dark:hover:bg-slate-700 border-b border-slate-200 dark:border-slate-700 last:border-0",children:[i.jsx("div",{className:"text-sm font-medium text-slate-900 dark:text-slate-100",children:Y.name}),Y.phone&&i.jsxs("div",{className:"text-xs text-slate-500",children:["Phone: ",Y.phone]})]},Y.id))})]}),i.jsxs("button",{type:"button",onClick:ke,className:"px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700 flex items-center gap-2",children:[i.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Chnh sa"]}),i.jsxs("button",{type:"button",onClick:Le,className:"px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg flex items-center gap-2",children:[i.jsx("span",{className:"text-xl",children:"+"}),"Thm mi"]})]})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between items-center mb-2",children:[i.jsx("label",{className:"block text-base font-medium text-teal-600 dark:text-teal-400",children:"Chi tit sn phm nhp kho:"}),i.jsxs("button",{type:"button",onClick:()=>S(!0),className:"text-sm text-teal-600 hover:text-teal-700 dark:text-teal-400 flex items-center gap-1",children:[i.jsx("span",{className:"text-lg",children:"+"}),"Thm sn phm"]})]}),i.jsx("div",{className:"border border-slate-300 dark:border-slate-600 rounded-lg overflow-hidden",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-slate-700 dark:text-slate-300",children:"-"}),i.jsx("th",{className:"px-3 py-2 text-left text-sm font-medium text-slate-700 dark:text-slate-300",children:"Tn"}),i.jsx("th",{className:"px-3 py-2 text-center text-sm font-medium text-slate-700 dark:text-slate-300",children:"SL"}),i.jsx("th",{className:"px-3 py-2 text-right text-sm font-medium text-slate-700 dark:text-slate-300",children:"n gi nhp"}),i.jsx("th",{className:"px-3 py-2 text-right text-sm font-medium text-slate-700 dark:text-slate-300",children:"Thnh tin"}),i.jsx("th",{className:"px-3 py-2 text-center text-sm font-medium text-slate-700 dark:text-slate-300 w-20"})]})}),i.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:W.map((Y,ne)=>i.jsxs("tr",{className:`hover:bg-slate-50 dark:hover:bg-slate-700/30 transition-colors ${O===ne?"bg-blue-50 dark:bg-blue-900/20":""}`,children:[i.jsx("td",{className:"px-3 py-3 text-sm text-slate-900 dark:text-slate-100",children:ne+1}),i.jsxs("td",{className:"px-3 py-3",children:[i.jsx("div",{className:"text-sm text-slate-900 dark:text-slate-100",children:Y.partName}),i.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"[Khc]"}),i.jsxs("div",{className:"text-xs text-slate-500",children:["- G Bn l: ",Ie(7e4)]}),i.jsxs("div",{className:"text-xs text-slate-500",children:["- G Bn s: ",Ie(0)]}),i.jsx("div",{className:"text-xs text-red-500",children:"( xut kho)"})]}),i.jsx("td",{className:"px-3 py-3 text-center",children:i.jsx("input",{type:"number",value:Y.quantity,onChange:ee=>re(ne,Number(ee.target.value)),onFocus:()=>E(ne),onBlur:()=>E(null),min:"1",className:"w-16 px-2 py-1 border border-slate-300 dark:border-slate-600 rounded text-center bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:border-blue-500 focus:ring-1 focus:ring-blue-500"})}),i.jsx("td",{className:"px-3 py-3 text-right",children:i.jsx(P0,{value:Y.unitPrice,onValue:ee=>ae(ne,ee),className:"w-28 px-2 py-1 border border-slate-300 dark:border-slate-600 rounded text-right bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:border-blue-500 focus:ring-1 focus:ring-blue-500"})}),i.jsx("td",{className:"px-3 py-3 text-right text-sm font-medium text-slate-900 dark:text-slate-100",children:Ie(Y.totalPrice)}),i.jsx("td",{className:"px-3 py-3 text-center",children:i.jsxs("div",{className:"flex justify-center gap-1",children:[i.jsx("button",{type:"button",onClick:()=>fe(ne),className:"p-1 text-blue-400 hover:bg-blue-500/20 rounded",title:"Chnh sa",children:i.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),i.jsx("button",{type:"button",onClick:()=>F(ne),className:"p-1 text-slate-400 hover:bg-slate-500/20 rounded",title:"Xa sn phm",children:i.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"})})})]})})]},Y.id))}),i.jsx("tfoot",{className:"bg-slate-50 dark:bg-slate-700",children:i.jsxs("tr",{children:[i.jsx("td",{colSpan:4,className:"px-3 py-2 text-right font-bold text-slate-900 dark:text-slate-100",children:"TNG:"}),i.jsx("td",{className:"px-3 py-2 text-right font-bold text-slate-900 dark:text-slate-100",children:Ie(K)}),i.jsx("td",{})]})})]})})]}),i.jsxs("div",{className:"border border-slate-300 dark:border-slate-600 rounded-lg p-4",children:[i.jsx("label",{className:"block text-base font-medium text-teal-600 dark:text-teal-400 mb-3",children:"Cng n:"}),i.jsxs("div",{className:"flex items-center justify-between mb-3 p-3 bg-red-50 dark:bg-red-900/20 rounded-lg",children:[i.jsxs("span",{className:"text-lg font-bold text-red-600 dark:text-red-400",children:["TNG PHI CHI: ",Ie(K)]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("span",{className:"text-sm text-green-600 dark:text-green-400 flex items-center gap-1",children:[i.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})," thanh ton "]}),i.jsxs("button",{type:"button",className:"px-3 py-1 bg-red-600 hover:bg-red-700 text-white rounded text-sm flex items-center gap-1",children:[i.jsx("span",{className:"text-lg",children:"+"}),"To phiu chi"]})]})]}),i.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400 mb-3 flex items-start gap-1",children:[i.jsx("svg",{className:"w-4 h-4 mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Tng phi chi l ph cha phi tr cho i tc sa cha"]}),i.jsxs("table",{className:"w-full text-sm",children:[i.jsx("thead",{className:"border-b border-slate-200 dark:border-slate-700",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-2 py-2 text-left text-slate-700 dark:text-slate-300",children:"-"}),i.jsx("th",{className:"px-2 py-2 text-left text-slate-700 dark:text-slate-300",children:"Thi gian"}),i.jsx("th",{className:"px-2 py-2 text-left text-slate-700 dark:text-slate-300",children:"Ngi chi - Ghi ch"}),i.jsx("th",{className:"px-2 py-2 text-right text-slate-700 dark:text-slate-300",children:"S tin"})]})}),i.jsx("tbody",{children:z.map((Y,ne)=>i.jsxs("tr",{className:"border-b border-slate-200 dark:border-slate-700",children:[i.jsx("td",{className:"px-2 py-2 text-slate-900 dark:text-slate-100",children:ne+1}),i.jsxs("td",{className:"px-2 py-2 text-slate-900 dark:text-slate-100",children:[Y.time," ",new Date(Y.date).toLocaleDateString("vi-VN",{day:"2-digit",month:"2-digit",year:"numeric"})]}),i.jsxs("td",{className:"px-2 py-2",children:[i.jsx("div",{className:"text-slate-900 dark:text-slate-100",children:Y.payer}),i.jsx("div",{className:"text-xs text-slate-500",children:Y.cashier})]}),i.jsx("td",{className:"px-2 py-2 text-right text-slate-900 dark:text-slate-100",children:Ie(Y.amount)})]},ne))}),i.jsx("tfoot",{className:"bg-slate-50 dark:bg-slate-700",children:i.jsxs("tr",{children:[i.jsx("td",{colSpan:3,className:"px-2 py-2 text-right font-bold text-slate-900 dark:text-slate-100",children:"Tng  chi"}),i.jsx("td",{className:"px-2 py-2 text-right font-bold text-slate-900 dark:text-slate-100",children:Ie(Q)})]})})]})]})]}),i.jsxs("div",{className:"sticky bottom-0 bg-white dark:bg-slate-800 border-t border-slate-200 dark:border-slate-700 p-4 flex justify-end gap-3",children:[i.jsx("button",{type:"button",onClick:t,className:"px-6 py-2 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700",children:"NG"}),i.jsx("button",{type:"submit",className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium",children:"LU"})]})]}),i.jsx(Q6e,{isOpen:y,onClose:()=>g(!1),onSave:Se,initialData:N==="edit"?{name:a,phone:l,address:"",email:""}:void 0,mode:N}),i.jsx(J6e,{isOpen:k,onClose:()=>S(!1),onAdd:he,currentBranchId:n})]})})},tje=({transactions:e})=>{const t=qn(),{data:r=[]}=Ok(),[n,a]=T.useState("7days"),[s,l]=T.useState(Bn(new Date,!0)),[o,c]=T.useState(Bn(new Date,!0)),[d,f]=T.useState(""),[p,y]=T.useState(null),{currentBranchId:g}=Ua(),N=T.useMemo(()=>{console.log(" [InventoryHistorySection] Tng s giao dch:",e.length);let E=e.filter(H=>H.type==="Nhp kho");console.log(" [InventoryHistorySection] Giao dch 'Nhp kho':",E.length);const D=new Date;switch(n){case"7days":const H=new Date(D.getTime()-6048e5);E=E.filter(z=>new Date(z.date)>=H);break;case"30days":const W=new Date(D.getTime()-720*60*60*1e3);E=E.filter(z=>new Date(z.date)>=W);break;case"thisMonth":const R=new Date(D.getFullYear(),D.getMonth(),1);E=E.filter(z=>new Date(z.date)>=R);break;case"custom":E=E.filter(z=>{const U=new Date(z.date);return U>=new Date(s)&&U<=new Date(o)});break}if(d){const H=d.toLowerCase();E=E.filter(W=>W.partName.toLowerCase().includes(H)||W.notes&&W.notes.toLowerCase().includes(H))}return E.sort((H,W)=>new Date(W.date).getTime()-new Date(H.date).getTime())},[e,n,s,o,d]),w=T.useMemo(()=>N.reduce((E,D)=>E+D.totalPrice,0),[N]),k=T.useMemo(()=>{const E=new Map;return N.forEach(D=>{var U,Z;const H=new Date(D.date),W=`${H.getFullYear()}-${String(H.getMonth()+1).padStart(2,"0")}-${String(H.getDate()).padStart(2,"0")}`,R=(U=D.notes)!=null&&U.includes("NCC:")?(Z=D.notes.split("NCC:")[1])==null?void 0:Z.trim():"Khng xc nh",z=`${W}_${R}_${H.getHours()}_${H.getMinutes()}`;E.has(z)||E.set(z,[]),E.get(z).push(D)}),Array.from(E.entries()).map(([D,H],W)=>{var Z,q,K;const R=H[0],z=new Date(R.date);let U="";if(R.notes){const Q=R.notes.match(/NH-\d{8}-\d{3}/);Q&&(U=Q[0])}return U||(U=`NH-${`${z.getFullYear()}${String(z.getMonth()+1).padStart(2,"0")}${String(z.getDate()).padStart(2,"0")}`}-${String(E.size-W).padStart(3,"0")}`),{receiptCode:U,date:R.date,supplier:(Z=R.notes)!=null&&Z.includes("NCC:")?(K=(q=R.notes.split("NCC:")[1])==null?void 0:q.split("|")[0])==null?void 0:K.trim():"Khng xc nh",items:H,total:H.reduce((Q,re)=>Q+re.totalPrice,0)}}).sort((D,H)=>new Date(H.date).getTime()-new Date(D.date).getTime())},[N]),[S,O]=T.useState(new Set);return i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-sm border border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"p-3 sm:p-6 border-b border-slate-200 dark:border-slate-700",children:[i.jsx("h2",{className:"text-lg sm:text-xl font-bold text-slate-900 dark:text-slate-100 mb-3 sm:mb-4",children:"Lch s nhp kho"}),i.jsx("div",{className:"flex flex-wrap gap-2 mb-3 sm:mb-4",children:[{key:"7days",label:"7 ngy qua"},{key:"30days",label:"30 ngy qua"},{key:"thisMonth",label:"Thng ny"},{key:"custom",label:"Ty chn"}].map(E=>i.jsx("button",{onClick:()=>a(E.key),className:`px-3 py-1.5 sm:px-4 sm:py-2 rounded-lg text-sm sm:text-base font-medium transition-colors ${n===E.key?"bg-blue-600 text-white":"bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-600"}`,children:E.label},E.key))}),n==="custom"&&i.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 mb-3 sm:mb-4",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("label",{className:"block text-xs sm:text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"T ngy"}),i.jsx("input",{type:"date",value:s,onChange:E=>l(E.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 text-sm sm:text-base"})]}),i.jsxs("div",{className:"flex-1",children:[i.jsx("label",{className:"block text-xs sm:text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"n ngy"}),i.jsx("input",{type:"date",value:o,onChange:E=>c(E.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 text-sm sm:text-base"})]})]}),i.jsx("input",{type:"text",placeholder:"Nh cung cp, SKU, tn ph tng...",value:d,onChange:E=>f(E.target.value),className:"w-full px-3 py-2 sm:px-4 sm:py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 text-sm sm:text-base"})]}),i.jsx("div",{className:"px-3 py-3 sm:px-6 sm:py-4 bg-slate-50 dark:bg-slate-900 border-b border-slate-200 dark:border-slate-700",children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{className:"text-xs sm:text-sm text-slate-600 dark:text-slate-400",children:["Tng s tin:"," ",i.jsx("span",{className:"text-base sm:text-lg font-bold text-slate-900 dark:text-slate-100",children:k.length})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"text-xs sm:text-sm text-slate-600 dark:text-slate-400",children:"Tng gi tr"}),i.jsx("div",{className:"text-base sm:text-lg font-bold text-blue-600",children:Ie(w)})]})]})}),i.jsxs("div",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:[k.length>0&&i.jsxs("div",{className:"hidden md:grid grid-cols-12 gap-4 px-4 py-3 bg-slate-100 dark:bg-slate-700 border-b border-slate-200 dark:border-slate-600 sticky top-0 z-10",children:[i.jsx("div",{className:"col-span-1 text-xs font-semibold text-slate-600 dark:text-slate-300"}),i.jsx("div",{className:"col-span-2 text-xs font-semibold text-slate-600 dark:text-slate-300",children:"M phiu"}),i.jsx("div",{className:"col-span-2 text-xs font-semibold text-slate-600 dark:text-slate-300",children:"Nh cung cp"}),i.jsx("div",{className:"col-span-4 text-xs font-semibold text-slate-600 dark:text-slate-300",children:"Chi tit"}),i.jsx("div",{className:"col-span-2 text-xs font-semibold text-slate-600 dark:text-slate-300",children:"Thanh ton"}),i.jsx("div",{className:"col-span-1 text-xs font-semibold text-slate-600 dark:text-slate-300",children:"Thao tc"})]}),k.length===0?i.jsxs("div",{className:"px-3 py-8 sm:px-6 sm:py-12 text-center text-slate-500",children:[i.jsx("div",{className:"text-4xl sm:text-6xl mb-4",children:""}),i.jsx("div",{className:"text-sm sm:text-base",children:"Khng c d liu"})]}):k.map(E=>{var q,K,Q,re,ae,de,he;const D=new Date(E.date),H=D.toLocaleDateString("vi-VN",{day:"2-digit",month:"2-digit",year:"numeric"}),W=D.toLocaleTimeString("vi-VN",{hour:"2-digit",minute:"2-digit"}),R=r.find(Se=>{var ke;return(ke=Se.description)==null?void 0:ke.includes(E.receiptCode)}),z=R?R.totalAmount-R.remainingAmount:E.total,U=(R==null?void 0:R.remainingAmount)||0,Z=U>0;return i.jsxs("div",{className:"p-4 hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors",children:[i.jsxs("div",{className:"md:hidden flex flex-col gap-3 bg-white dark:bg-slate-800/60 rounded-2xl border border-slate-200 dark:border-slate-700 p-4 shadow-sm",children:[i.jsxs("div",{className:"flex items-start justify-between gap-3",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-cyan-600 dark:text-cyan-300",children:[" ",E.receiptCode]}),i.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400 flex items-center gap-1 mt-1",children:[""," ",i.jsxs("span",{children:[H,"  ",W]})]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Tng tin"}),i.jsx("div",{className:"text-lg font-bold text-slate-900 dark:text-white",children:Ie(E.total)})]})]}),i.jsxs("div",{className:"flex items-center gap-3 bg-slate-50 dark:bg-slate-900/30 rounded-2xl p-3",children:[i.jsx("div",{className:"w-12 h-12 rounded-full bg-orange-100 dark:bg-orange-900/30 flex items-center justify-center text-orange-600 dark:text-orange-200 font-semibold text-lg",children:""}),i.jsxs("div",{children:[i.jsx("div",{className:"text-base font-semibold text-slate-900 dark:text-white",children:E.supplier}),((q=E.items[0].notes)==null?void 0:q.includes("Phone:"))&&i.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:[" ",(K=E.items[0].notes.split("Phone:")[1])==null?void 0:K.trim()]})]})]}),i.jsx("div",{className:"space-y-2",children:E.items.map((Se,ke)=>i.jsxs("div",{className:"flex items-start justify-between text-sm text-slate-700 dark:text-slate-200",children:[i.jsxs("div",{children:[i.jsxs("span",{className:"font-semibold",children:[Se.quantity," x ",Se.partName]}),i.jsxs("div",{className:"text-xs text-slate-400",children:[Ie(Se.unitPrice||0)," / sn phm"]})]}),i.jsx("span",{className:"font-bold text-slate-900 dark:text-white",children:Ie(Se.quantity*(Se.unitPrice||0))})]},Se.id))}),i.jsx("div",{className:"flex flex-wrap gap-2",children:Z?i.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-semibold bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-200",children:[" Cn n ",Ie(U)]}):i.jsx("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-semibold bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-200",children:"  thanh ton"})}),i.jsx("div",{className:"flex flex-wrap gap-2 pt-3 border-t border-dashed border-slate-200 dark:border-slate-700",children:i.jsx("button",{onClick:()=>y({...E,date:new Date(E.date)}),className:"flex-1 min-w-[120px] px-3 py-2 rounded-xl bg-slate-100 dark:bg-slate-800 text-slate-700 dark:text-slate-200 text-sm font-medium",children:"Chnh sa"})})]}),i.jsxs("div",{className:"hidden md:grid grid-cols-12 gap-4 items-start",children:[i.jsx("div",{className:"col-span-1 flex items-start pt-1",children:i.jsx("input",{type:"checkbox",checked:S.has(E.receiptCode),onChange:Se=>{const ke=new Set(S);Se.target.checked?ke.add(E.receiptCode):ke.delete(E.receiptCode),O(ke)},className:"w-4 h-4 rounded border-slate-300"})}),i.jsx("div",{className:"col-span-2",children:i.jsxs("div",{className:"space-y-1",children:[i.jsx("div",{className:"text-sm font-bold text-cyan-600 dark:text-cyan-400",children:E.receiptCode}),i.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:[H," ",W]}),i.jsxs("div",{className:"text-xs text-slate-600 dark:text-slate-300",children:[i.jsx("span",{className:"font-medium",children:"NV:"})," ",((ae=(re=(Q=E.items[0].notes)==null?void 0:Q.split("NV:")[1])==null?void 0:re.split("NCC:")[0])==null?void 0:ae.trim())||"Xun Nhan"]})]})}),i.jsx("div",{className:"col-span-2",children:i.jsxs("div",{className:"space-y-1",children:[i.jsx("div",{className:"text-sm font-semibold text-slate-900 dark:text-slate-100",children:E.supplier}),((de=E.items[0].notes)==null?void 0:de.includes("Phone:"))&&i.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:[" ",(he=E.items[0].notes.split("Phone:")[1])==null?void 0:he.trim()]})]})}),i.jsx("div",{className:"col-span-4",children:i.jsx("div",{className:"space-y-1",children:E.items.map((Se,ke)=>i.jsxs("div",{className:"text-xs text-slate-700 dark:text-slate-300",children:[i.jsxs("span",{className:"font-medium",children:[Se.quantity," x"]})," ",Se.partName,i.jsxs("span",{className:"text-slate-400 ml-1",children:["(",Ie(Se.unitPrice||0),")"]})]},Se.id))})}),i.jsx("div",{className:"col-span-2",children:i.jsxs("div",{className:"space-y-1",children:[i.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:"Tng tin:"}),i.jsx("div",{className:"text-base font-bold text-slate-900 dark:text-white",children:Ie(E.total)}),Z?i.jsxs("div",{className:"mt-2 space-y-1",children:[i.jsxs("div",{className:"text-xs text-green-600 dark:text-green-400",children:[" tr: ",Ie(z)]}),i.jsxs("div",{className:"text-xs font-semibold text-red-600 dark:text-red-400",children:["Cn n: ",Ie(U)]}),i.jsx("div",{className:"inline-flex items-center gap-1 px-2 py-1 rounded text-xs font-medium bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-300",children:" Cn n"})]}):i.jsx("div",{className:"mt-2",children:i.jsx("div",{className:"inline-flex items-center gap-1 px-2 py-1 rounded text-xs font-medium bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-300",children:"  thanh ton"})})]})}),i.jsx("div",{className:"col-span-1",children:i.jsx("button",{onClick:()=>y({...E,date:new Date(E.date)}),className:"p-1.5 text-blue-400 hover:bg-blue-500/20 rounded transition-colors",title:"Chnh sa",children:i.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})})})]})]},E.receiptCode)})]}),i.jsx("div",{className:"px-6 py-4 border-t border-slate-200 dark:border-slate-700",children:i.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:["Hin th ",k.length," phiu nhp"]})}),p&&i.jsx(eje,{receipt:p,onClose:()=>y(null),onSave:async E=>{var D,H,W,R,z,U,Z,q,K;try{const Q=new Set(p.items.map(he=>he.id)),re=new Set(E.items.filter(he=>!he.id.startsWith("new-")).map(he=>he.id)),ae=Array.from(Q).filter(he=>!re.has(he));for(const he of ae){const Se=p.items.find(F=>F.id===he);if(!Se)continue;const{data:ke,error:Le}=await Pt.from("parts").select("stock").eq("id",Se.partId).single();if(Le)throw new Error(`Khng th ly thng tin ph tng: ${Le.message}`);if(ke){const te=(((D=ke.stock)==null?void 0:D[g])||0)-Se.quantity;if(te<0)throw new Error(`Khng th xa sn phm "${Se.partName}" v s lm tn kho m`);const{error:Y}=await Pt.from("parts").update({stock:{...ke.stock,[g]:te}}).eq("id",Se.partId);if(Y)throw new Error(`Khng th cp nht tn kho: ${Y.message}`)}const{error:fe}=await Pt.from("inventory_transactions").delete().eq("id",he);if(fe)throw new Error(`Khng th xa giao dch: ${fe.message}`)}for(const he of E.items){if(he.id.startsWith("new-"))continue;const Se=p.items.find(Le=>Le.id===he.id),{error:ke}=await Pt.from("inventory_transactions").update({quantity:he.quantity,unitPrice:he.unitPrice,totalPrice:he.totalPrice,notes:`NV:${((R=(W=(H=E.items[0].notes)==null?void 0:H.split("NV:")[1])==null?void 0:W.split("NCC:")[0])==null?void 0:R.trim())||"Xun Nhan"} NCC:${E.supplier}${E.supplierPhone?` Phone:${E.supplierPhone}`:""}`}).eq("id",he.id);if(ke)throw ke;if(Se&&Se.quantity!==he.quantity){const Le=he.quantity-Se.quantity,{data:fe,error:F}=await Pt.from("parts").select("stock, id").eq("id",Se.partId).single();if(F)throw new Error(`Khng th ly thng tin ph tng: ${F.message}`);if(fe){const te=((z=fe.stock)==null?void 0:z[g])||0,Y=te+Le;if(Y<0)throw new Error(`Khng th gim s lng v s lm tn kho m (hin c: ${te})`);const{error:ne}=await Pt.from("parts").update({stock:{...fe.stock,[g]:Y}}).eq("id",fe.id);if(ne)throw new Error(`Khng th cp nht tn kho: ${ne.message}`)}}}const de=E.items.filter(he=>he.id.startsWith("new-"));for(const he of de){const{data:Se,error:ke}=await Pt.from("parts").select("stock, id").eq("id",he.partId).single();if(ke)throw new Error(`Khng th ly thng tin ph tng: ${ke.message}`);if(Se){const F=(((U=Se.stock)==null?void 0:U[g])||0)+he.quantity,{error:te}=await Pt.from("parts").update({stock:{...Se.stock,[g]:F}}).eq("id",Se.id);if(te)throw new Error(`Khng th cp nht tn kho: ${te.message}`)}const{error:Le}=await Pt.from("inventory_transactions").insert({type:"Nhp kho",partId:he.partId,partName:he.partName,quantity:he.quantity,date:p.date.toISOString(),unitPrice:he.unitPrice,totalPrice:he.totalPrice,branchId:g,notes:`NV:${((K=(q=(Z=E.items[0].notes)==null?void 0:Z.split("NV:")[1])==null?void 0:q.split("NCC:")[0])==null?void 0:K.trim())||"Xun Nhan"} NCC:${E.supplier}${E.supplierPhone?` Phone:${E.supplierPhone}`:""}`});if(Le)throw new Error(`Khng th to giao dch mi: ${Le.message}`)}Ye.success(` cp nht phiu nhp kho (${E.items.length} sn phm)`),t.invalidateQueries({queryKey:["inventoryTransactions"]}),t.invalidateQueries({queryKey:["partsRepo"]}),t.invalidateQueries({queryKey:["partsRepoPaged"]}),y(null)}catch(Q){Ye.error(`Li cp nht: ${Q.message||"Khng r"}`)}},currentBranchId:g})]})},rje=()=>{var kr;const{currentBranchId:e}=Ua(),{mutateAsync:t}=m6e(),r=Uee(),{data:n=[]}=wA({branchId:e}),[a,s]=T.useState("stock"),[l,o]=T.useState(!1),[c,d]=T.useState(""),[f,p]=T.useState("all"),[y,g]=T.useState("all"),[N,w]=T.useState(!1),[k,S]=T.useState(1),[O,E]=T.useState(20),[D,H]=T.useState([]),[W,R]=T.useState(null),[z,U]=T.useState(!1),[Z,q]=T.useState(null),[K,Q]=T.useState(!1),[re,ae]=T.useState(null),de=Ke=>{if(!Ke)return"#94a3b8";let vt=0;for(let tr=0;tr<Ke.length;tr++)vt=Ke.charCodeAt(tr)+((vt<<5)-vt);const Kt=(vt&16777215).toString(16).toUpperCase();return`#${"00000".substring(0,6-Kt.length)+Kt}`},{confirm:he,confirmState:Se,handleConfirm:ke,handleCancel:Le}=PV(),{data:fe,isLoading:F,isError:te}=A6({page:k,pageSize:O,search:c,category:f==="all"?void 0:f}),Y=(fe==null?void 0:fe.data)||[],ne=((kr=fe==null?void 0:fe.meta)==null?void 0:kr.total)||0,ee=Math.max(1,Math.ceil(ne/O)),{data:Ce,refetch:me}=Os({queryKey:["allPartsForTotals",e,c,f],queryFn:async()=>{console.log(" Fetching allPartsForTotals...");let Ke=Pt.from("parts").select("id, name, sku, stock, costPrice, retailPrice").order("name");if(f&&f!=="all"&&(Ke=Ke.eq("category",f)),c&&c.trim()){const tr=c.trim();Ke=Ke.or(`name.ilike.%${tr}%,sku.ilike.%${tr}%`)}const{data:vt,error:Kt}=await Ke;if(Kt)throw Kt;return console.log(` Fetched ${(vt==null?void 0:vt.length)||0} parts`),vt||[]},staleTime:5e3}),se=T.useMemo(()=>{if(!Ce)return{totalProducts:0,inStock:0,lowStock:0,outOfStock:0};const Ke={totalProducts:Ce.length,inStock:0,lowStock:0,outOfStock:0},vt=e||"";return Ce.forEach(Kt=>{var Pr;const tr=((Pr=Kt.stock)==null?void 0:Pr[vt])||0;tr>0&&(Ke.inStock+=1),tr===0&&(Ke.outOfStock+=1),tr>0&&tr<=Bf&&(Ke.lowStock+=1)}),Ke},[Ce,e]),je=T.useMemo(()=>[{id:"all",label:"Tt c",description:"Ton b kho",count:se.totalProducts,variant:"neutral"},{id:"in-stock",label:"Cn hng",description:"> 0",count:se.inStock,variant:"success"},{id:"low-stock",label:"Sp ht",description:`<= ${Bf}`,count:se.lowStock,variant:"warning"},{id:"out-of-stock",label:"Ht hng",description:"= 0",count:se.outOfStock,variant:"danger"}],[se]),be=T.useMemo(()=>{if(!Ce)return new Set;const Ke=new Map;Ce.forEach(Kt=>{const tr=Ke.get(Kt.name)||0;Ke.set(Kt.name,tr+1)});const vt=new Set(Array.from(Ke.entries()).filter(([Kt,tr])=>tr>1).map(([Kt,tr])=>Kt));return console.log(` Detected ${vt.size} duplicate product names from ${Ce.length} parts`),vt.size>0&&console.log("Duplicate names:",Array.from(vt).slice(0,5)),vt},[Ce]),ie=T.useCallback(Ke=>be.has(Ke),[be]),{data:Te}=Os({queryKey:["duplicateParts",e,Array.from(be)],queryFn:async()=>{if(be.size===0)return[];console.log(` Fetching all duplicate parts for ${be.size} names...`);const{data:Ke,error:vt}=await Pt.from("parts").select("*").in("name",Array.from(be)).order("name");if(vt)throw vt;return console.log(` Found ${(Ke==null?void 0:Ke.length)||0} parts with duplicate names`),Ke||[]},enabled:N&&be.size>0,staleTime:5e3}),De=T.useMemo(()=>{const Ke=N&&be.size>0?Te||[]:Y;if(y==="all")return Ke;const vt=e||"";return Ke.filter(Kt=>{var Pr;const tr=((Pr=Kt.stock)==null?void 0:Pr[vt])||0;return y==="in-stock"?tr>0:y==="low-stock"?tr>0&&tr<=Bf:y==="out-of-stock"?tr===0:!0})},[Y,N,be,Te,y,e]);T.useEffect(()=>{N&&be.size===0&&w(!1)},[N,be.size]);const ye=T.useMemo(()=>Ce?Ce.reduce((Ke,vt)=>{var Kt;return Ke+(((Kt=vt.stock)==null?void 0:Kt[e])||0)},0):0,[Ce,e]),rt=T.useMemo(()=>Ce?Ce.reduce((Ke,vt)=>{var Pr,Nr;const Kt=((Pr=vt.stock)==null?void 0:Pr[e])||0,tr=((Nr=vt.costPrice)==null?void 0:Nr[e])||0;return Ke+Kt*tr},0):0,[Ce,e]),st=qn(),dt=Vee();E6();const et=Wee(),{data:lt=[]}=zk(),{profile:Ve}=Ic(),Vt=T.useCallback(async(Ke,vt,Kt,tr,Pr)=>{const Nr=new Date,Ge=Nr.toISOString().split("T")[0].replace(/-/g,""),Ot=`NH-${Ge}-${Math.floor(Math.random()*1e3).toString().padStart(3,"0")}`;console.log(" Saving goods receipt:",{receiptCode:Ot,supplierId:vt,totalAmount:Kt,paymentInfo:Pr,itemCount:Ke.length});const{data:hr}=await Pt.from("suppliers").select("name").eq("id",vt).single(),$r=(hr==null?void 0:hr.name)||"Khng xc nh",Dr=(Pr==null?void 0:Pr.paidAmount)||0,Yt=Kt-Dr;try{if(await r.mutateAsync({items:Ke.map(Mr=>({partId:Mr.partId,partName:Mr.partName,quantity:Mr.quantity,importPrice:Mr.importPrice,sellingPrice:Mr.sellingPrice,wholesalePrice:Mr.wholesalePrice||0})),supplierId:vt,branchId:e,userId:(Ve==null?void 0:Ve.id)||"unknown",notes:`${Ot} | NCC: ${$r}${tr?" | "+tr:""}`}),Yt>0&&Pr){const Mr=`DEBT-${Ge}-${Math.random().toString(36).substring(2,5).toUpperCase()}`,{error:We}=await Pt.from("supplier_debts").insert({id:Mr,supplier_id:vt,supplier_name:$r,branch_id:e,total_amount:Yt,paid_amount:0,remaining_amount:Yt,description:`Nhp kho ${Ot} - Thanh ton ${Dr.toLocaleString()}/${Kt.toLocaleString()} `,created_date:Nr.toISOString().split("T")[0],created_at:Nr.toISOString()});We?(console.error(" Error creating debt:",We),Ye.error("Li to cng n: "+We.message)):console.log(` Created supplier debt: ${Yt.toLocaleString()} `)}o(!1),Ye.success(`Nhp kho thnh cng! M phiu: ${Ot}`),Us((Ve==null?void 0:Ve.id)||null,{action:"inventory.receipt",tableName:"inventory_transactions",oldData:null,newData:{receiptCode:Ot,supplierId:vt,supplierName:$r,items:Ke.map(Mr=>({partId:Mr.partId,quantity:Mr.quantity,importPrice:Mr.importPrice,sellingPrice:Mr.sellingPrice})),totalAmount:Kt,paidAmount:Dr,debtAmount:Yt,paymentInfo:Pr}})}catch(Mr){console.error(" Li lu phiu nhp kho:",Mr),Ye.error(`Li: ${Mr.message||"Khng r"}`)}},[Ce,e,dt,t,Ve==null?void 0:Ve.id]),Mt=Ke=>{H(Ke?De.map(vt=>vt.id):[])},mr=(Ke,vt)=>{H(vt?[...D,Ke]:D.filter(Kt=>Kt!==Ke))},xr=async Ke=>{const vt=Y.find(tr=>tr.id===Ke);!vt||!await he({title:"Xc nhn xa",message:`Bn c chc chn mun xa sn phm "${vt.name}"?`,confirmText:"Xa",cancelText:"Hy",confirmColor:"red"})||et.mutate({id:Ke},{onSuccess:async()=>{H(tr=>tr.filter(Pr=>Pr!==Ke)),await me(),console.log(" Refetched allPartsForTotals after delete"),Ye.success(` xa ph tng "${vt.name}"`)},onError:tr=>{console.error("Delete error:",tr),Ye.error(`Khng th xa: ${tr.message}`)}})},sr=async()=>{if(D.length===0){Ye.warning("Vui lng chn t nht mt sn phm");return}if(!await he({title:"Xc nhn xa",message:`Bn c chc chn mun xa ${D.length} sn phm  chn? Hnh ng ny khng th hon tc.`,confirmText:"Xa",cancelText:"Hy",confirmColor:"red"}))return;let vt=0,Kt=0;const tr=D.length;D.forEach((Pr,Nr)=>{et.mutate({id:Pr},{onSuccess:async()=>{vt++,vt+Kt===tr&&(await me(),console.log(" Refetched allPartsForTotals after bulk delete"),Kt===0?Ye.success(` xa ${vt} ph tng`):Ye.warning(` xa ${vt}/${tr} ph tng (${Kt} li)`))},onError:Ge=>{console.error(`Delete error for item ${Pr}:`,Ge),Kt++,vt+Kt===tr&&(vt===0?Ye.error(`Khng th xa ${tr} ph tng`):Ye.warning(` xa ${vt}/${tr} ph tng (${Kt} li)`))}})}),H([])},Ir=Ke=>{S(1),g(Ke)},er=Ke=>{S(1),p(Ke)},Xt=()=>{g("all"),p("all"),w(!1),S(1),Q(!1)},Gt=y!=="all"||f!=="all"||N,ur=se.lowStock>0&&y!=="low-stock",wr=se.totalProducts>0?Math.round(se.lowStock/se.totalProducts*100):0,lr=()=>{try{const Ke=new Date,vt=`ton-kho-${Ke.getDate()}-${Ke.getMonth()+1}-${Ke.getFullYear()}.xlsx`;a6e(Y,e,vt),Ye.success("Xut file Excel thnh cng!")}catch(Ke){console.error("Export error:",Ke),Ye.error("C li khi xut file Excel")}},mt=()=>{try{s6e(),Ye.success("Ti template thnh cng! Vui lng in thng tin v import li.")}catch(Ke){console.error("Template download error:",Ke),Ye.error("C li khi ti template")}};return T.useEffect(()=>{if(typeof document>"u")return;const Ke=()=>ae(null);return document.addEventListener("click",Ke),()=>document.removeEventListener("click",Ke)},[]),i.jsxs("div",{className:"h-full flex flex-col bg-slate-50 dark:bg-slate-900 sm:bg-[#1e293b]",children:[i.jsx("div",{className:"hidden sm:block bg-primary-bg border-b border-primary-border px-4 py-3",children:i.jsxs("div",{className:"flex items-center justify-between gap-4",children:[i.jsx("div",{className:"flex gap-2",children:[{key:"stock",label:"Tn kho",icon:i.jsx(gl,{className:"w-4 h-4"})},{key:"categories",label:"Danh mc",icon:i.jsx(Zf,{className:"w-4 h-4"})},{key:"lookup",label:"Tra cu",icon:i.jsx(Ou,{className:"w-4 h-4"})},{key:"history",label:"Lch s",icon:i.jsx(dd,{className:"w-4 h-4"})}].map(Ke=>i.jsx("button",{onClick:()=>s(Ke.key),className:`px-4 py-2 rounded-lg font-medium transition-colors ${a===Ke.key?"bg-blue-600 text-white":"text-secondary-text hover:bg-tertiary-bg"}`,children:i.jsxs("span",{className:"inline-flex items-center gap-1",children:[Ke.icon,Ke.label]})},Ke.key))}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("button",{onClick:()=>o(!0),className:"flex items-center gap-2 px-5 py-2.5 rounded-xl bg-gradient-to-r from-blue-600 to-blue-500 text-white font-semibold shadow-lg shadow-blue-500/30 hover:brightness-110 transition",children:[i.jsx(od,{className:"w-4 h-4"}),"To phiu nhp"]}),i.jsxs("div",{className:"flex items-center gap-1 rounded-2xl border border-primary-border bg-tertiary-bg px-1.5 py-1",children:[i.jsxs("button",{onClick:()=>{Ye.info("Tnh nng chuyn kho ang pht trin")},className:"p-2 rounded-xl text-secondary-text hover:text-blue-600 hover:bg-primary-bg transition",title:"Chuyn kho",children:[i.jsx(i7,{className:"w-4 h-4"}),i.jsx("span",{className:"sr-only",children:"Chuyn kho"})]}),i.jsxs("button",{onClick:lr,className:"p-2 rounded-xl text-secondary-text hover:text-emerald-600 hover:bg-primary-bg transition",title:"Xut Excel",children:[i.jsx(lee,{className:"w-4 h-4"}),i.jsx("span",{className:"sr-only",children:"Xut Excel"})]}),i.jsxs("button",{onClick:()=>U(!0),className:"p-2 rounded-xl text-secondary-text hover:text-blue-600 hover:bg-primary-bg transition",title:"Nhp CSV",children:[i.jsx(iee,{className:"w-4 h-4"}),i.jsx("span",{className:"sr-only",children:"Nhp CSV"})]}),i.jsxs("button",{onClick:mt,className:"p-2 rounded-xl text-secondary-text hover:text-amber-600 hover:bg-primary-bg transition",title:"Ti mu import",children:[i.jsx(dd,{className:"w-4 h-4"}),i.jsx("span",{className:"sr-only",children:"Ti template"})]})]})]})]})}),i.jsxs("div",{className:"sm:hidden bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 px-3 py-3",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsxs("div",{className:"flex-1 relative",children:[i.jsx(Ou,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),i.jsx("input",{type:"text",placeholder:"Tm kim theo tn hoc SKU...",value:c,onChange:Ke=>{S(1),d(Ke.target.value)},className:"w-full pl-10 pr-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),i.jsxs("button",{onClick:()=>o(!0),className:"flex items-center gap-1.5 px-3 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg text-sm font-medium transition whitespace-nowrap",children:[i.jsx(od,{className:"w-4 h-4"}),"To phiu"]})]}),i.jsx("div",{className:"flex items-center justify-between text-xs",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Tng:"}),i.jsxs("span",{className:"font-semibold text-blue-600 dark:text-blue-400",children:[ye.toLocaleString()," sp"]})]}),i.jsx("div",{className:"h-3 w-px bg-slate-300 dark:bg-slate-600"}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Gi tr:"}),i.jsx("span",{className:"font-semibold text-green-600 dark:text-green-400",children:Ie(rt)})]})]})})]}),a==="stock"&&i.jsx("div",{className:"hidden sm:block bg-primary-bg border-b border-primary-border px-5 py-5",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"grid gap-4 lg:grid-cols-[minmax(0,1fr)_320px]",children:[i.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[i.jsx("div",{className:"rounded-2xl border border-blue-500/20 bg-gradient-to-r from-blue-500/15 via-blue-500/5 to-transparent p-4 shadow-inner",children:i.jsxs("div",{className:"flex items-center justify-between gap-4",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs font-semibold uppercase tracking-wider text-blue-600 dark:text-blue-300",children:"Tng s lng tn"}),i.jsxs("p",{className:"mt-2 text-3xl font-bold text-primary-text",children:[ye.toLocaleString()," sp"]}),i.jsxs("p",{className:"text-xs text-secondary-text mt-1",children:[se.inStock," sn phm cn hng "," ",se.outOfStock," ht hng"]})]}),i.jsx("div",{className:"p-3 rounded-2xl bg-white/70 dark:bg-slate-900/40 text-blue-600",children:i.jsx(gl,{className:"w-6 h-6"})})]})}),i.jsx("div",{className:"rounded-2xl border border-emerald-500/20 bg-gradient-to-r from-emerald-500/15 via-emerald-500/5 to-transparent p-4 shadow-inner",children:i.jsxs("div",{className:"flex items-center justify-between gap-4",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs font-semibold uppercase tracking-wider text-emerald-600 dark:text-emerald-300",children:"Tng gi tr tn"}),i.jsx("p",{className:"mt-2 text-3xl font-bold text-primary-text",children:Ie(rt)}),i.jsxs("p",{className:"text-xs text-secondary-text mt-1",children:["Trung bnh"," ",Ie(ye>0?rt/ye:0)," ","/ sn phm"]})]}),i.jsx("div",{className:"p-3 rounded-2xl bg-white/70 dark:bg-slate-900/40 text-emerald-600",children:i.jsx(Zf,{className:"w-6 h-6"})})]})})]}),i.jsxs("div",{className:"flex flex-col gap-3",children:[i.jsxs("div",{className:"relative",children:[i.jsx(Ou,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),i.jsx("input",{type:"text",placeholder:"Tm kim theo tn hoc SKU...",value:c,onChange:Ke=>{S(1),d(Ke.target.value)},className:"w-full pl-10 pr-12 py-2.5 border border-primary-border rounded-xl bg-primary-bg text-primary-text focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),i.jsxs("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-xs text-secondary-text",children:[De.length,"/",ne]})]}),i.jsxs("div",{className:"flex items-center justify-end gap-2",children:[i.jsxs("button",{onClick:()=>Q(Ke=>!Ke),className:`flex items-center gap-2 px-3 py-2 text-sm font-medium rounded-xl border transition ${K?"border-blue-500 text-blue-600 bg-blue-50 dark:bg-blue-900/20":"border-primary-border text-secondary-text hover:text-primary-text"}`,children:[i.jsx(uee,{className:"w-4 h-4"}),"B lc nng cao",Gt&&i.jsx("span",{className:"h-2 w-2 rounded-full bg-blue-500 animate-pulse"})]}),Gt&&i.jsx("button",{onClick:Xt,className:"px-3 py-2 text-sm font-medium text-red-500 hover:text-red-600",children:"Xa b lc"})]})]})]}),ur&&i.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3 rounded-2xl border border-amber-200 bg-amber-50 px-4 py-3 text-amber-900 dark:border-amber-800 dark:bg-amber-950/50 dark:text-amber-200",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("span",{className:"text-xl",children:""}),i.jsxs("div",{children:[i.jsxs("p",{className:"font-semibold",children:[se.lowStock," sn phm sp ht hng"]}),i.jsxs("p",{className:"text-xs text-amber-700 dark:text-amber-400",children:["Chim ",wr,"% danh mc hin ti"]})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{onClick:()=>Ir("low-stock"),className:"px-3 py-1.5 rounded-lg bg-amber-600 text-white text-sm font-semibold hover:bg-amber-700 transition dark:bg-amber-700 dark:hover:bg-amber-600",children:"Lc nhanh"}),i.jsx("button",{onClick:()=>o(!0),className:"px-3 py-1.5 rounded-lg border border-amber-400 text-sm font-medium text-amber-800 hover:bg-amber-100 transition dark:border-amber-600 dark:text-amber-300 dark:hover:bg-amber-950/30",children:"To phiu nhp"})]})]}),i.jsx("div",{className:"grid gap-3 md:grid-cols-2 lg:grid-cols-4",children:je.map(Ke=>{const vt=y===Ke.id,Kt=VD[Ke.variant??"neutral"]||VD.neutral,tr=`text-left rounded-2xl border px-4 py-3 transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 ${vt?Kt.buttonActive:Kt.buttonInactive}`,Pr=`inline-flex items-center justify-center rounded-xl border px-3 py-1 text-xs font-semibold ${vt?Kt.badgeActive:Kt.badgeInactive}`;return i.jsxs("button",{onClick:()=>Ir(Ke.id),className:tr,children:[i.jsxs("div",{className:"flex items-center justify-between gap-3",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs font-semibold uppercase tracking-wider text-secondary-text",children:Ke.label}),i.jsx("p",{className:"mt-1 text-2xl font-bold text-primary-text",children:(Ke.count||0).toLocaleString()})]}),i.jsx("span",{className:Pr,children:Ke.description})]}),i.jsx("p",{className:"mt-2 text-xs text-tertiary-text",children:"Trng thi kho tng ng"})]},Ke.id)})}),K&&i.jsxs("div",{className:"rounded-2xl border border-primary-border bg-white/70 dark:bg-slate-900/40 p-4 grid gap-4 md:grid-cols-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-semibold uppercase tracking-wide text-secondary-text",children:"Trng thi tn kho"}),i.jsxs("select",{value:y,onChange:Ke=>Ir(Ke.target.value),className:"mt-2 w-full rounded-xl border border-secondary-border bg-primary-bg px-4 py-2.5 text-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500/40",children:[i.jsx("option",{value:"all",children:"Tt c tn kho"}),i.jsx("option",{value:"in-stock",children:"Cn hng"}),i.jsx("option",{value:"low-stock",children:"Sp ht"}),i.jsx("option",{value:"out-of-stock",children:"Ht hng"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-semibold uppercase tracking-wide text-secondary-text",children:"Danh mc"}),i.jsxs("select",{value:f,onChange:Ke=>er(Ke.target.value),className:"mt-2 w-full rounded-xl border border-secondary-border bg-primary-bg px-4 py-2.5 text-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500/40",children:[i.jsx("option",{value:"all",children:"Tt c danh mc"}),lt.map(Ke=>i.jsx("option",{value:Ke.id,children:Ke.name},Ke.id))]})]}),i.jsxs("div",{className:"flex flex-col justify-end",children:[i.jsx("label",{className:"text-xs font-semibold uppercase tracking-wide text-secondary-text",children:"Pht hin trng tn"}),i.jsx("button",{onClick:()=>w(Ke=>!Ke),className:`mt-2 rounded-xl border px-4 py-2.5 text-sm font-medium transition ${N?"border-orange-500 text-orange-600 bg-orange-50 dark:bg-orange-900/20":"border-secondary-border text-secondary-text hover:text-primary-text"}`,children:N?"ang hin th sn phm trng tn":"Lc sn phm trng tn"})]})]})]})}),i.jsxs("div",{className:"flex-1 overflow-y-auto p-3 sm:p-4",children:[a==="stock"&&i.jsxs("div",{className:"space-y-3",children:[be.size>0&&i.jsx("div",{className:"bg-orange-50 dark:bg-orange-900/20 border-l-4 border-orange-500 p-3 rounded-lg",children:i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"text-lg",children:""}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("h3",{className:"text-xs font-semibold text-orange-800 dark:text-orange-300 mb-1",children:["Pht hin ",be.size," sn phm trng tn"]}),i.jsx("button",{onClick:()=>w(!N),className:`mt-1 px-2 py-1 rounded text-xs font-medium transition ${N?"bg-orange-600 text-white":"bg-orange-100 dark:bg-orange-900/40 text-orange-800 dark:text-orange-300"}`,children:N?" ang lc":" Lc"})]})]})}),i.jsxs("div",{className:"rounded-lg overflow-hidden border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800",children:[D.length>0&&i.jsxs("div",{className:"px-6 py-3 bg-blue-100 dark:bg-blue-900/30 border-b border-primary-border flex items-center justify-between",children:[i.jsxs("div",{className:"text-sm font-medium text-blue-900 dark:text-blue-100",children:[" chn ",D.length," sn phm"]}),i.jsxs("button",{onClick:sr,className:"flex items-center gap-2 px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg text-sm font-medium transition-colors",children:[i.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Xa  chn"]})]}),i.jsx("div",{className:"block sm:hidden",children:i.jsx("div",{className:"space-y-3 p-3",children:De.map((Ke,vt)=>{const Kt=Ke.stock[e]||0,tr=Ke.retailPrice[e]||0,Pr=Kt*tr,Nr=ie(Ke.name);return i.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-xl bg-[#2d3748] border border-slate-600 transition ${Nr?"border-l-4 border-l-orange-500":""}`,role:"listitem",children:[i.jsx("div",{className:"w-14 h-14 bg-slate-600 rounded-lg overflow-hidden flex items-center justify-center flex-shrink-0",children:Ke.imageUrl?i.jsx("img",{src:Ke.imageUrl,alt:Ke.name,className:"w-full h-full object-cover"}):i.jsx("div",{className:"w-full h-full flex items-center justify-center",style:{backgroundColor:de(Ke.category)},children:i.jsx(Zf,{className:"w-6 h-6 text-white opacity-90"})})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-start justify-between gap-2",children:[i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("div",{className:"text-[15px] font-medium text-white truncate",children:Ke.name}),i.jsxs("div",{className:"text-[13px] text-slate-400 mt-0.5",children:["SKU: ",Ke.sku,"  ",Ke.category]})]}),i.jsx("div",{className:"text-right flex-shrink-0",children:i.jsxs("div",{className:"text-[13px] text-slate-300",children:[Ie(Pr)," "]})})]}),i.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[i.jsx("span",{className:`inline-flex px-2 py-0.5 text-sm font-bold rounded ${Kt===0?"text-red-400 bg-red-900/30":Kt<10?"text-yellow-400 bg-yellow-900/30":"text-emerald-400 bg-emerald-900/30"}`,children:Kt}),i.jsxs("div",{className:"relative",children:[i.jsx("button",{onClick:()=>q(Z===vt?null:vt),"aria-haspopup":"true","aria-expanded":Z===vt,"aria-label":"Thm hnh ng",className:"p-1.5 text-slate-400 hover:bg-slate-600 rounded transition",children:i.jsx(JT,{className:"w-5 h-5"})}),Z===vt&&i.jsxs("div",{className:"absolute right-0 mt-2 w-40 bg-slate-800 border border-slate-700 rounded-lg shadow-xl z-50",children:[i.jsxs("button",{onClick:()=>{R(Ke),q(null)},className:"w-full text-left px-3 py-2 text-sm hover:bg-slate-700 flex items-center gap-2 text-white","aria-label":`Chnh sa ${Ke.name}`,children:[i.jsx(o7,{className:"w-4 h-4 text-blue-400"}),i.jsx("span",{children:"Chnh sa"})]}),i.jsxs("button",{onClick:()=>{xr(Ke.id),q(null)},className:"w-full text-left px-3 py-2 text-sm hover:bg-slate-700 flex items-center gap-2 text-red-400","aria-label":`Xa ${Ke.name}`,children:[i.jsx(Xg,{className:"w-4 h-4"}),i.jsx("span",{children:"Xa"})]})]})]})]})]})]},Ke.id)})})}),i.jsx("div",{className:"hidden sm:block overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-tertiary-bg",children:i.jsxs("tr",{className:"border-b border-primary-border text-xs font-semibold uppercase tracking-wider text-secondary-text",children:[i.jsx("th",{className:"px-6 py-4 text-center w-12",children:i.jsx("input",{type:"checkbox",checked:D.length===De.length&&De.length>0,onChange:Ke=>Mt(Ke.target.checked),className:"w-4 h-4 text-blue-600 rounded border-secondary-border focus:ring-blue-500"})}),i.jsx("th",{className:"px-6 py-4 text-left",children:"Sn phm"}),i.jsx("th",{className:"px-6 py-4 text-center",children:"Tn kho"}),i.jsx("th",{className:"px-6 py-4 text-right",children:"Gi nhp"}),i.jsx("th",{className:"px-6 py-4 text-right",children:"Gi bn l"}),i.jsx("th",{className:"px-6 py-4 text-right",children:"Gi bn s"}),i.jsx("th",{className:"px-6 py-4 text-right",children:"Gi tr tn"}),i.jsx("th",{className:"px-6 py-4 text-center w-16",children:"Hnh ng"})]})}),i.jsx("tbody",{className:"bg-primary-bg divide-y divide-primary-border",children:De.length===0?i.jsx("tr",{children:i.jsxs("td",{colSpan:8,className:"px-6 py-8 text-center text-tertiary-text",children:[i.jsx("div",{className:"text-6xl mb-4",children:""}),i.jsx("div",{className:"text-lg",children:"Khng c sn phm no"}),i.jsx("div",{className:"text-sm",children:"Hy th mt b lc khc hoc thm sn phm mi"})]})}):De.map(Ke=>{var Qt,Cr,gr,_n,Rr,Sn;const vt=e||"",Kt=((Qt=Ke.stock)==null?void 0:Qt[vt])||0,tr=((Cr=Ke.retailPrice)==null?void 0:Cr[vt])||0,Pr=((gr=Ke.wholesalePrice)==null?void 0:gr[vt])||0,Nr=((_n=Ke.costPrice)==null?void 0:_n[vt])||0,Ge=Kt*tr,Ot=D.includes(Ke.id),hr=ie(Ke.name),$r=Kt===0?"border-red-300 bg-red-50 text-red-700 dark:border-red-700 dark:bg-red-950/50 dark:text-red-300":Kt<=Bf?"border-amber-300 bg-amber-50 text-amber-700 dark:border-amber-600 dark:bg-amber-950/50 dark:text-amber-300":"border-emerald-300 bg-emerald-50 text-emerald-700 dark:border-emerald-600 dark:bg-emerald-950/50 dark:text-emerald-300",Dr=Kt===0?"Ht hng":Kt<=Bf?"Sp ht":"n nh",Yt=Kt===0?"text-red-600 dark:text-red-400":Kt<=Bf?"text-amber-600 dark:text-amber-400":"text-emerald-700 dark:text-emerald-400",Mr=((Sn=(Rr=Ke.name)==null?void 0:Rr.charAt(0))==null?void 0:Sn.toUpperCase())||"?",We=Ot?"bg-blue-900/20 dark:bg-blue-900/20":hr?"bg-orange-500/10 border-l-4 border-l-orange-500":"";return i.jsxs("tr",{className:`border-b border-primary-border hover:bg-tertiary-bg transition-colors ${We}`,children:[i.jsx("td",{className:"px-6 py-4 text-center",children:i.jsx("input",{type:"checkbox",checked:Ot,onChange:we=>mr(Ke.id,we.target.checked),className:"w-4 h-4 text-blue-600 rounded border-secondary-border focus:ring-blue-500"})}),i.jsx("td",{className:"px-6 py-4 min-w-[220px]",children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"h-12 w-12 rounded-xl overflow-hidden flex items-center justify-center text-base font-semibold text-white",style:Ke.imageUrl?void 0:{backgroundColor:de(Ke.category)},children:Ke.imageUrl?i.jsx("img",{src:Ke.imageUrl,alt:Ke.name,className:"h-full w-full object-cover"}):i.jsx("span",{children:Mr})}),i.jsxs("div",{className:"flex flex-col gap-1",children:[i.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-primary-text",children:[Ke.name,hr&&i.jsx("span",{className:"inline-flex items-center gap-1 rounded-full border border-orange-300 bg-orange-50 px-2 py-0.5 text-[11px] font-semibold text-orange-700 dark:bg-orange-900/30",title:"Sn phm c tn trng lp",children:" Trng"})]}),i.jsxs("div",{className:"text-xs text-tertiary-text",children:["SKU: ",Ke.sku||"N/A"]}),i.jsx("div",{className:"text-xs text-tertiary-text",children:Ke.category||"Cha phn loi"})]})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:i.jsxs("div",{className:"flex flex-col items-center gap-1",children:[i.jsx("span",{className:`text-lg font-semibold ${Yt}`,children:Kt.toLocaleString()}),i.jsxs("span",{className:`inline-flex items-center gap-1 rounded-full border px-2 py-0.5 text-xs font-semibold ${$r}`,children:[i.jsx("span",{className:`h-1.5 w-1.5 rounded-full ${Kt===0?"bg-red-500":Kt<=Bf?"bg-amber-500":"bg-emerald-500"}`}),Dr]})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm text-secondary-text",children:Ie(Nr)}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium text-primary-text",children:Ie(tr)}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm text-secondary-text",children:Ie(Pr)}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-semibold text-primary-text",children:Ie(Ge)}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:i.jsxs("div",{className:"relative flex justify-end",children:[i.jsx("button",{onClick:we=>{we.stopPropagation(),ae(Ne=>Ne===Ke.id?null:Ke.id)},className:"rounded-full border border-transparent p-2 text-secondary-text hover:border-secondary-border hover:text-primary-text transition","aria-haspopup":"menu","aria-expanded":re===Ke.id,title:"Thao tc nhanh",children:i.jsx(JT,{className:"w-5 h-5"})}),re===Ke.id&&i.jsxs("div",{className:"absolute right-0 top-full z-10 mt-2 w-44 overflow-hidden rounded-xl border border-primary-border bg-white shadow-xl dark:bg-slate-800",onClick:we=>we.stopPropagation(),children:[i.jsxs("button",{onClick:we=>{we.stopPropagation(),R(Ke),ae(null)},className:"flex w-full items-center gap-2 px-4 py-2 text-left text-sm hover:bg-blue-50 dark:hover:bg-slate-700",children:[i.jsx(o7,{className:"h-4 w-4 text-blue-500"}),"Chnh sa"]}),i.jsxs("button",{onClick:we=>{we.stopPropagation(),ae(null),xr(Ke.id)},className:"flex w-full items-center gap-2 px-4 py-2 text-left text-sm text-red-500 hover:bg-red-50 dark:hover:bg-slate-700/70",children:[i.jsx(Xg,{className:"h-4 w-4"}),"Xa"]})]})]})})]},Ke.id)})})]})}),i.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-t border-primary-border bg-primary-bg",children:[i.jsxs("div",{className:"text-sm text-secondary-text",children:["Trang ",k,"/",ee,"  Tng ",ne," ph tng"]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{disabled:k===1||F,onClick:()=>S(Ke=>Math.max(1,Ke-1)),className:"px-3 py-1.5 border border-secondary-border rounded disabled:opacity-40",children:" Trc"}),i.jsx("button",{disabled:k>=ee||F,onClick:()=>S(Ke=>Math.min(ee,Ke+1)),className:"px-3 py-1.5 border border-secondary-border rounded disabled:opacity-40",children:"Sau "}),i.jsx("select",{value:O,onChange:Ke=>{const vt=Number(Ke.target.value)||20;E(vt),S(1)},className:"px-2 py-1.5 border border-secondary-border rounded",children:[10,20,50,100].map(Ke=>i.jsxs("option",{value:Ke,children:[Ke,"/trang"]},Ke))})]})]})]})]}),a==="history"&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"hidden sm:block",children:i.jsx(tje,{transactions:n})}),i.jsx("div",{className:"sm:hidden",children:i.jsx(X6e,{transactions:n})})]}),a==="categories"&&i.jsx("div",{className:"bg-[#0f172a] -m-3 sm:-m-6",children:i.jsx(DV,{})}),a==="lookup"&&i.jsxs("div",{className:"bg-[#0f172a] -m-3 sm:-m-6",children:[i.jsx("div",{className:"hidden sm:block",children:i.jsx(MV,{})}),i.jsx("div",{className:"sm:hidden",children:i.jsx(f6e,{})})]})]}),i.jsx("div",{className:"hidden sm:block",children:i.jsx(Z6e,{isOpen:l,onClose:()=>o(!1),parts:Ce||[],currentBranchId:e,onSave:Vt})}),i.jsx(Y6e,{isOpen:l,onClose:()=>o(!1),parts:Ce||[],currentBranchId:e,onSave:Vt}),W&&i.jsx(aje,{part:W,onClose:()=>R(null),onSave:Ke=>{console.log(" Saving part updates:",Ke);const vt={name:Ke.name,category:Ke.category,stock:Ke.stock,retailPrice:Ke.retailPrice,wholesalePrice:Ke.wholesalePrice};Ke.costPrice&&(vt.costPrice=Ke.costPrice),console.log(" Sending updates:",vt),dt.mutate({id:Ke.id,updates:vt}),R(null)},currentBranchId:e}),z&&i.jsx(nje,{onClose:()=>U(!1),onDownloadTemplate:mt,onImport:async Ke=>{var vt,Kt;try{const{items:tr,errors:Pr}=await i6e(Ke,e);if(tr.length===0){const Ne=Pr.length?`Khng import c: ${Pr.slice(0,3).join("; ")}`:"File khng c d liu hp l";throw new Error(Ne)}const Nr=tr.map(Ne=>Ne.sku);console.log(` Checking ${Nr.length} SKUs...`);const Ge=new Map;Nr.forEach(Ne=>{Ge.set(Ne,(Ge.get(Ne)||0)+1)});const Ot=Array.from(Ge.entries()).filter(([Ne,Me])=>Me>1).map(([Ne,Me])=>`${Ne}(${Me}x)`);Ot.length>0&&console.warn(` Duplicate SKUs in file: ${Ot.slice(0,5).join(", ")}`);const hr=Array.from(new Set(Nr)),$r=100,Dr=[];for(let Ne=0;Ne<hr.length;Ne+=$r){const Me=hr.slice(Ne,Ne+$r),{data:le,error:ve}=await Pt.from("parts").select("*").in("sku",Me);if(ve)throw console.error(` Fetch chunk ${Ne/$r+1} error:`,ve),new Error(`Li kim tra ph tng: ${ve.message}`);le&&Dr.push(...le)}console.log(` Found ${Dr.length} existing parts`);const Yt=new Map(Dr.map(Ne=>[Ne.sku,Ne])),Mr=[],We=[],Qt=[],Cr=new Set;let gr=0,_n=0,Rr=0;const Sn=new Date().toISOString();for(const Ne of tr){if(Cr.has(Ne.sku)){console.warn(` Skipping duplicate SKU in file: ${Ne.sku}`),Rr++;continue}Cr.add(Ne.sku);const Me=Yt.get(Ne.sku);if(Me)_n+=1,We.push({id:Me.id,stock:{...Me.stock,[e]:(Me.stock[e]||0)+Ne.quantity},costPrice:{...Me.costPrice,[e]:Ne.costPrice},retailPrice:{...Me.retailPrice,[e]:Ne.retailPrice},wholesalePrice:{...Me.wholesalePrice,[e]:Ne.wholesalePrice}}),Qt.push({type:"Nhp kho",date:Sn,branchId:e,partId:Me.id,partName:Ne.name,quantity:Ne.quantity,unitPrice:Ne.retailPrice,totalPrice:Ne.quantity*Ne.retailPrice,notes:"Nhp kho t file Excel"});else{gr+=1;const le=((vt=crypto==null?void 0:crypto.randomUUID)==null?void 0:vt.call(crypto))||`${Math.random().toString(36).slice(2)}-${Date.now()}`;Mr.push({id:le,name:Ne.name,sku:Ne.sku,category:Ne.category,description:Ne.description,stock:{[e]:Ne.quantity},costPrice:{[e]:Ne.costPrice},retailPrice:{[e]:Ne.retailPrice},wholesalePrice:{[e]:Ne.wholesalePrice}}),Qt.push({type:"Nhp kho",date:Sn,branchId:e,partId:le,partName:Ne.name,quantity:Ne.quantity,unitPrice:Ne.retailPrice,totalPrice:Ne.quantity*Ne.retailPrice,notes:"Nhp kho t file Excel"})}}if(Mr.length>0){const{data:Ne,error:Me}=await Pt.from("parts").insert(Mr).select();if(Me)throw console.error(" Batch create error:",Me),new Error(`Li to ph tng: ${Me.message}`);console.log(` Created ${(Ne==null?void 0:Ne.length)||0} parts`)}if(We.length>0){let Ne=0,Me=0;for(const le of We){const{error:ve}=await Pt.from("parts").update({stock:le.stock,costPrice:le.costPrice,retailPrice:le.retailPrice,wholesalePrice:le.wholesalePrice}).eq("id",le.id);ve?(console.error(` Update error for part ${le.id}:`,ve),Me++):Ne++}console.log(` Updated ${Ne}/${We.length} parts`)}if(Qt.length>0){const{error:Ne}=await Pt.from("inventory_transactions").insert(Qt);Ne&&console.warn(" Inventory transactions error:",Ne)}st.invalidateQueries({queryKey:["partsRepo"]}),st.invalidateQueries({queryKey:["partsRepoPaged"]});try{const{data:Ne}=await Pt.auth.getUser();await Us(((Kt=Ne==null?void 0:Ne.user)==null?void 0:Kt.id)||null,{action:"inventory.import",tableName:"inventory_transactions",oldData:null,newData:{totalRows:tr.length+Pr.length,created:gr,updated:_n,skipped:Pr.length,sampleErrors:Pr.slice(0,10),branchId:e,at:Sn}})}catch{}U(!1);let we=`Import: to mi ${gr}, cp nht ${_n}`;Rr>0&&(we+=`, b qua ${Rr} SKU trng`),Pr.length>0&&(we+=`, ${Pr.length} dng li`),Ye.success(we)}catch(tr){console.error(" Import error:",tr),Ye.error(`Li import: ${tr}`)}}}),i.jsx(IV,{isOpen:Se.isOpen,title:Se.title,message:Se.message,confirmText:Se.confirmText,cancelText:Se.cancelText,confirmColor:Se.confirmColor,onConfirm:ke,onCancel:Le}),i.jsxs("div",{className:"sm:hidden fixed bottom-24 right-4 z-40 flex flex-col gap-2",children:[i.jsx("button",{onClick:()=>o(!0),className:"w-12 h-12 bg-green-600 hover:bg-green-700 text-white rounded-full shadow-lg flex items-center justify-center transition-all transform hover:scale-105","aria-label":"To phiu nhp",children:i.jsx(od,{className:"w-4 h-4"})}),i.jsx("button",{onClick:lr,className:"w-12 h-12 bg-orange-600 hover:bg-orange-700 text-white rounded-full shadow-lg flex items-center justify-center transition-all transform hover:scale-105","aria-label":"Xut Excel",children:i.jsx(i7,{className:"w-4 h-4"})})]}),i.jsx("div",{className:"sm:hidden fixed bottom-0 left-0 right-0 bg-white dark:bg-slate-800 border-t border-slate-200 dark:border-slate-700 z-50 safe-area-bottom",children:i.jsxs("div",{className:"grid grid-cols-4 gap-0.5 px-1 py-1",children:[i.jsxs("button",{onClick:()=>s("stock"),className:`flex flex-col items-center gap-0.5 px-1 py-1 rounded-lg transition ${a==="stock"?"bg-amber-50 dark:bg-amber-900/30 text-amber-600 dark:text-amber-400":"text-slate-600 dark:text-slate-400"}`,children:[i.jsx(gl,{className:"w-4 h-4"}),i.jsx("span",{className:"text-[9px] font-medium",children:"Tn kho"})]}),i.jsxs("button",{onClick:()=>s("categories"),className:`flex flex-col items-center gap-0.5 px-1 py-1 rounded-lg transition ${a==="categories"?"bg-purple-50 dark:bg-purple-900/30 text-purple-600 dark:text-purple-400":"text-slate-600 dark:text-slate-400"}`,children:[i.jsx(Zf,{className:"w-4 h-4"}),i.jsx("span",{className:"text-[9px] font-medium",children:"Danh mc"})]}),i.jsxs("button",{onClick:()=>s("lookup"),className:`flex flex-col items-center gap-0.5 px-1 py-1 rounded-lg transition ${a==="lookup"?"bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400":"text-slate-600 dark:text-slate-400"}`,children:[i.jsx(Ou,{className:"w-4 h-4"}),i.jsx("span",{className:"text-[9px] font-medium",children:"Tra cu"})]}),i.jsxs("button",{onClick:()=>s("history"),className:`flex flex-col items-center gap-0.5 px-1 py-1 rounded-lg transition ${a==="history"?"bg-green-50 dark:bg-green-900/30 text-green-600 dark:text-green-400":"text-slate-600 dark:text-slate-400"}`,children:[i.jsx(dd,{className:"w-4 h-4"}),i.jsx("span",{className:"text-[9px] font-medium",children:"Lch s"})]})]})})]})},nje=({onClose:e,onDownloadTemplate:t,onImport:r})=>{const[n,a]=T.useState(null),[s,l]=T.useState(!1),o=d=>{var p,y;const f=(p=d.target.files)==null?void 0:p[0];if(f){const g=(y=f.name.split(".").pop())==null?void 0:y.toLowerCase();g==="xlsx"||g==="xls"||g==="csv"?a(f):Ye.warning("Vui lng chn file Excel (.xlsx, .xls) hoc CSV (.csv)")}},c=async()=>{if(!n){Ye.warning("Vui lng chn file  import");return}l(!0);try{await r(n)}finally{l(!1)}};return i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl max-w-2xl w-full",children:[i.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200 dark:border-slate-700",children:[i.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100",children:"Nhp tn kho t Excel/CSV"}),i.jsx("button",{onClick:e,disabled:s,className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-200 disabled:opacity-50",children:i.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),i.jsxs("div",{className:"p-6 space-y-6",children:[i.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx("svg",{className:"w-6 h-6 text-blue-600 dark:text-blue-400 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"font-medium text-blue-900 dark:text-blue-100 mb-2",children:"Hng dn s dng"}),i.jsxs("ol",{className:"text-sm text-blue-800 dark:text-blue-200 space-y-1 list-decimal list-inside",children:[i.jsx("li",{children:"Ti file template mu"}),i.jsx("li",{children:"in thng tin sn phm vo file"}),i.jsx("li",{children:"Lu file v chn  import"})]}),i.jsx("button",{onClick:t,className:"mt-3 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm font-medium transition-colors",children:" Ti Template Excel"})]})]})}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Chn file  import"}),i.jsxs("div",{className:"border-2 border-dashed border-slate-300 dark:border-slate-600 rounded-lg p-6 text-center",children:[i.jsx("input",{type:"file",accept:".xlsx,.xls,.csv",onChange:o,disabled:s,className:"hidden",id:"file-upload"}),i.jsxs("label",{htmlFor:"file-upload",className:"cursor-pointer inline-flex flex-col items-center",children:[i.jsx("svg",{className:"w-12 h-12 text-slate-400 mb-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),i.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Click  chn file Excel hoc CSV"}),n&&i.jsxs("span",{className:"mt-2 text-sm font-medium text-blue-600 dark:text-blue-400",children:[" ",n.name]})]})]})]}),i.jsxs("div",{className:"flex justify-end gap-3",children:[i.jsx("button",{type:"button",onClick:e,disabled:s,className:"px-4 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors disabled:opacity-50",children:"Hy"}),i.jsx("button",{onClick:c,disabled:!n||s,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:s?"ang x l...":"Import"})]})]})]})})},aje=({part:e,onClose:t,onSave:r,currentBranchId:n})=>{var g,N;const[a,s]=T.useState({name:e.name,category:e.category||"",retailPrice:e.retailPrice[n]||0,wholesalePrice:((g=e.wholesalePrice)==null?void 0:g[n])||0,costPrice:((N=e.costPrice)==null?void 0:N[n])||0,stock:e.stock[n]||0}),{data:l=[]}=zk(),o=yA(),[c,d]=T.useState(!1),[f,p]=T.useState(""),y=w=>{if(w.preventDefault(),!a.name.trim()){Ye.warning("Vui lng nhp tn sn phm");return}r({id:e.id,name:a.name.trim(),category:a.category.trim()||void 0,stock:{...e.stock,[n]:a.stock},costPrice:{...e.costPrice,[n]:a.costPrice},retailPrice:{...e.retailPrice,[n]:a.retailPrice},wholesalePrice:{...e.wholesalePrice,[n]:a.wholesalePrice}})};return i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[i.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200 dark:border-slate-700",children:[i.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100",children:"Chnh sa sn phm"}),i.jsx("button",{onClick:t,className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-200",children:i.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),i.jsxs("form",{onSubmit:y,className:"p-6 space-y-4",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:["Tn sn phm ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"text",value:a.name,onChange:w=>s({...a,name:w.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Danh mc"}),i.jsxs("div",{className:"flex flex-col gap-2",children:[i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("select",{value:a.category,onChange:w=>s({...a,category:w.target.value}),className:"flex-1 px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",children:[i.jsx("option",{value:"",children:"-- Chn hoc to mi --"}),l.map(w=>i.jsx("option",{value:w.name,children:w.name},w.id))]}),i.jsx("button",{type:"button",onClick:()=>d(!0),className:"px-3 py-2 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-600",title:"Thm danh mc mi",children:"+"})]}),c&&i.jsxs("form",{onSubmit:async w=>{w.preventDefault();const k=f.trim();if(!k)return Ye.warning("Vui lng nhp tn danh mc");try{const S=await o.mutateAsync({name:k});s({...a,category:S.name}),p(""),d(!1)}catch(S){Ye.error((S==null?void 0:S.message)||"Li to danh mc")}},className:"flex gap-2",children:[i.jsx("input",{autoFocus:!0,type:"text",value:f,onChange:w=>p(w.target.value),placeholder:"Nhp tn danh mc mi",className:"flex-1 px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-sm text-slate-900 dark:text-slate-100"}),i.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm font-medium",children:"Lu"}),i.jsx("button",{type:"button",onClick:()=>{d(!1),p("")},className:"px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg text-sm bg-white dark:bg-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-600",children:"Hy"})]})]})]}),i.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Gi nhp"}),i.jsx("input",{type:"number",value:a.costPrice||0,onChange:w=>s({...a,costPrice:Number(w.target.value)}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",min:"0"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Gi bn l"}),i.jsx("input",{type:"number",value:a.retailPrice,onChange:w=>s({...a,retailPrice:Number(w.target.value)}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",min:"0"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Gi bn s"}),i.jsx("input",{type:"number",value:a.wholesalePrice,onChange:w=>s({...a,wholesalePrice:Number(w.target.value)}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",min:"0"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Tn kho hin ti"}),i.jsx("input",{type:"number",value:a.stock,onChange:w=>s({...a,stock:Number(w.target.value)}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",min:"0"}),i.jsx("p",{className:"mt-1 text-xs text-slate-500 dark:text-slate-400",children:"S lng tn kho ti chi nhnh hin ti"})]}),i.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:i.jsxs("div",{className:"text-sm text-blue-800 dark:text-blue-300",children:[i.jsx("div",{className:"font-medium mb-1",children:"Lu :"}),i.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[i.jsx("li",{children:"Bn c th chnh sa trc tip gi nhp, gi bn v tn kho"}),i.jsx("li",{children:'Hoc s dng "To phiu nhp"  ghi nhn lch s nhp kho chi tit'})]})]})}),i.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[i.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:"Hy"}),i.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:"Lu thay i"})]})]})]})})},kb="work_orders";function US(e){return{id:e.id,creationDate:e.creationdate||e.creationDate,customerName:e.customername||e.customerName,customerPhone:e.customerphone||e.customerPhone,vehicleModel:e.vehiclemodel||e.vehicleModel,licensePlate:e.licenseplate||e.licensePlate,issueDescription:e.issuedescript||e.issueDescription,technicianName:e.technicianname||e.technicianName,status:e.status,laborCost:e.laborcost||e.laborCost||0,discount:e.discount,partsUsed:e.partsused||e.partsUsed,additionalServices:e.additionalservices||e.additionalServices,notes:e.notes,total:e.total,branchId:e.branchid||e.branchId,depositAmount:e.depositamount||e.depositAmount,depositDate:e.depositdate||e.depositDate,depositTransactionId:e.deposittransactionid||e.depositTransactionId,paymentStatus:e.paymentstatus||e.paymentStatus,paymentMethod:e.paymentmethod||e.paymentMethod,additionalPayment:e.additionalpayment||e.additionalPayment,totalPaid:e.totalpaid||e.totalPaid,remainingAmount:e.remainingamount||e.remainingAmount,paymentDate:e.paymentdate||e.paymentDate,cashTransactionId:e.cashtransactionid||e.cashTransactionId,refunded:e.refunded,refunded_at:e.refunded_at||e.refundedAt,refund_transaction_id:e.refund_transaction_id||e.refundTransactionId,refund_reason:e.refund_reason||e.refundReason}}async function sje(){try{const{data:e,error:t}=await Pt.from(kb).select("*").order("creationdate",{ascending:!1});return console.log("[fetchWorkOrders] Raw data from DB:",e),console.log("[fetchWorkOrders] Status values:",e==null?void 0:e.map(r=>({id:r.id,status:r.status}))),t?At({code:"supabase",message:"Khng th ti danh sch phiu sa cha",cause:t}):kn((e||[]).map(US))}catch(e){return At({code:"network",message:"Li kt ni ti my ch",cause:e})}}async function ije(e){var t;try{if(!e.id)return At({code:"validation",message:"Thiu ID phiu sa cha"});const r={p_order_id:e.id,p_customer_name:e.customerName||"",p_customer_phone:e.customerPhone||"",p_vehicle_model:e.vehicleModel||"",p_license_plate:e.licensePlate||"",p_issue_description:e.issueDescription||"",p_technician_name:e.technicianName||"",p_status:e.status||"Tip nhn",p_labor_cost:e.laborCost||0,p_discount:e.discount||0,p_parts_used:e.partsUsed||[],p_additional_services:e.additionalServices||null,p_total:e.total||0,p_branch_id:e.branchId||"CN1",p_payment_status:e.paymentStatus||"unpaid",p_payment_method:e.paymentMethod||null,p_deposit_amount:e.depositAmount||0,p_additional_payment:e.additionalPayment||0,p_user_id:null};console.log("[DEBUG] Creating work order with payload:",JSON.stringify(r,null,2));const{data:n,error:a}=await Pt.rpc("work_order_create_atomic",r);if(console.log("[DEBUG] RPC Response - data:",n,"error:",a),a&&console.error("[DEBUG] RPC Error Details:",{code:a.code,message:a.message,details:a.details,hint:a.hint,fullError:JSON.stringify(a,null,2)}),a||!n){const y=(a==null?void 0:a.details)||(a==null?void 0:a.message)||"",g=y.toUpperCase();if(g.includes("INSUFFICIENT_STOCK")){let N=[];const w=y.indexOf(":");if(w!==-1){const S=y.slice(w+1).trim();try{N=JSON.parse(S)}catch{}}const k=Array.isArray(N)?N.map(S=>`${S.partName||S.partId||"?"} (cn ${S.available}, cn ${S.requested})`).join(", "):"";return At({code:"validation",message:k?`Thiu tn kho: ${k}`:"Tn kho khng  cho mt hoc nhiu ph tng",cause:a})}return g.includes("PART_NOT_FOUND")?At({code:"validation",message:"Khng tm thy ph tng trong kho",cause:a}):g.includes("INVALID_PART")?At({code:"validation",message:"D liu ph tng khng hp l",cause:a}):g.includes("INVALID_STATUS")?At({code:"validation",message:"Trng thi khng hp l",cause:a}):g.includes("INVALID_PAYMENT_STATUS")?At({code:"validation",message:"Trng thi thanh ton khng hp l",cause:a}):g.includes("UNAUTHORIZED")?At({code:"supabase",message:"Bn khng c quyn to phiu sa cha",cause:a}):g.includes("BRANCH_MISMATCH")?At({code:"validation",message:"Chi nhnh khng khp vi quyn hin ti",cause:a}):At({code:"supabase",message:"To phiu sa cha (atomic) tht bi",cause:a})}const s=n.workOrder,l=n.orderId,o=n.depositTransactionId,c=n.paymentTransactionId,d=n.inventoryTxCount;if(!s&&!l)return At({code:"unknown",message:"Kt qu RPC khng hp l"});let f=null;if(s)f=US(s);else if(l){const{data:y,error:g}=await Pt.from(kb).select("*").eq("id",l).single();g?console.error("[createWorkOrderAtomic] Cannot fetch order by ID",{orderId:l,fetchError:g}):y&&(f=US(y))}if(!f)return At({code:"supabase",message:"Khng th ti d liu phiu sa cha va to"});let p=null;try{const{data:y}=await Pt.auth.getUser();p=((t=y==null?void 0:y.user)==null?void 0:t.id)||null}catch{}return await Us(p,{action:"work_order.create",tableName:kb,recordId:f.id,oldData:null,newData:f}),kn({...f,depositTransactionId:o,paymentTransactionId:c,inventoryTxCount:d})}catch(r){return At({code:"network",message:"Li kt ni khi to phiu sa cha (atomic)",cause:r})}}async function lje(e){var t;try{if(!e.id)return At({code:"validation",message:"Thiu ID phiu sa cha"});const r={p_order_id:e.id,p_customer_name:e.customerName||"",p_customer_phone:e.customerPhone||"",p_vehicle_model:e.vehicleModel||"",p_license_plate:e.licensePlate||"",p_issue_description:e.issueDescription||"",p_technician_name:e.technicianName||"",p_status:e.status||"Tip nhn",p_labor_cost:e.laborCost||0,p_discount:e.discount||0,p_parts_used:e.partsUsed||[],p_additional_services:e.additionalServices||null,p_total:e.total||0,p_payment_status:e.paymentStatus||"unpaid",p_payment_method:e.paymentMethod||null,p_deposit_amount:e.depositAmount||0,p_additional_payment:e.additionalPayment||0,p_user_id:null},{data:n,error:a}=await Pt.rpc("work_order_update_atomic",r);if(a||!n){const d=(a==null?void 0:a.details)||(a==null?void 0:a.message)||"",f=d.toUpperCase();if(f.includes("INSUFFICIENT_STOCK")){let p=[];const y=d.indexOf(":");if(y!==-1){const N=d.slice(y+1).trim();try{p=JSON.parse(N)}catch{}}const g=Array.isArray(p)?p.map(N=>`${N.partName||N.partId||"?"} (cn ${N.available}, cn ${N.requested})`).join(", "):"";return At({code:"validation",message:g?`Thiu tn kho: ${g}`:"Tn kho khng  cho mt hoc nhiu ph tng",cause:a})}return f.includes("ORDER_NOT_FOUND")?At({code:"validation",message:"Khng tm thy phiu sa cha",cause:a}):f.includes("PART_NOT_FOUND")?At({code:"validation",message:"Khng tm thy ph tng trong kho",cause:a}):f.includes("INVALID_PART")?At({code:"validation",message:"D liu ph tng khng hp l",cause:a}):f.includes("UNAUTHORIZED")?At({code:"supabase",message:"Bn khng c quyn cp nht phiu sa cha",cause:a}):f.includes("BRANCH_MISMATCH")?At({code:"validation",message:"Chi nhnh khng khp vi quyn hin ti",cause:a}):At({code:"supabase",message:"Cp nht phiu sa cha (atomic) tht bi",cause:a})}const s=n.workOrder,l=n.depositTransactionId,o=n.paymentTransactionId;if(!s)return At({code:"unknown",message:"Kt qu RPC khng hp l"});let c=null;try{const{data:d}=await Pt.auth.getUser();c=((t=d==null?void 0:d.user)==null?void 0:t.id)||null}catch{}return await Us(c,{action:"work_order.update",tableName:kb,recordId:s.id,oldData:null,newData:s}),kn({...s,depositTransactionId:l,paymentTransactionId:o})}catch(r){return At({code:"network",message:"Li kt ni khi cp nht phiu sa cha (atomic)",cause:r})}}async function oje(e,t){var r;try{let n=null;try{const{data:d}=await Pt.auth.getUser();n=((r=d==null?void 0:d.user)==null?void 0:r.id)||null}catch{}const{data:a,error:s}=await Pt.rpc("work_order_refund_atomic",{p_order_id:e,p_refund_reason:t,p_user_id:n||"unknown"});if(s||!a){console.error("[refundWorkOrder] RPC error:",s),console.error("[refundWorkOrder] Error code:",s==null?void 0:s.code),console.error("[refundWorkOrder] Error message:",s==null?void 0:s.message),console.error("[refundWorkOrder] Error details:",s==null?void 0:s.details);const f=((s==null?void 0:s.details)||(s==null?void 0:s.message)||"").toUpperCase();return f.includes("ORDER_NOT_FOUND")?At({code:"validation",message:"Khng tm thy phiu sa cha",cause:s}):f.includes("ALREADY_REFUNDED")?At({code:"validation",message:"Phiu ny  c hon tin ri",cause:s}):f.includes("UNAUTHORIZED")?At({code:"supabase",message:"Bn khng c quyn hon tin",cause:s}):f.includes("BRANCH_MISMATCH")?At({code:"validation",message:"Chi nhnh khng khp vi quyn hin ti",cause:s}):At({code:"supabase",message:`Hon tin tht bi: ${(s==null?void 0:s.message)||"Unknown error"}`,cause:s})}const l=a.workOrder,o=a.refund_transaction_id,c=a.refundAmount;return l?(await Us(n,{action:"work_order.refund",tableName:kb,recordId:e,oldData:null,newData:l}),kn({...l,refund_transaction_id:o,refundAmount:c})):At({code:"unknown",message:"Kt qu RPC khng hp l"})}catch(n){return At({code:"network",message:"Li kt ni khi hon tin",cause:n})}}const zV=()=>Os({queryKey:["workOrdersRepo"],queryFn:async()=>{const e=await sje();if(!e.ok)throw e.error;return e.data}}),cje=()=>{const e=qn();return ha({mutationFn:async t=>{const r=await ije(t);if(!r.ok)throw r.error;return r.data},onSuccess:t=>{e.invalidateQueries({queryKey:["workOrdersRepo"]}),e.invalidateQueries({queryKey:["partsRepo"]}),e.invalidateQueries({queryKey:["partsRepoPaged"]}),e.invalidateQueries({queryKey:["inventoryTxRepo"]}),Ye.success(" to phiu sa cha (atomic)"),t!=null&&t.inventoryTxCount&&Ye.info(`Xut kho: ${t.inventoryTxCount} ph tng`)},onError:t=>Ye.error(va(t))})},dje=()=>{const e=qn();return ha({mutationFn:async t=>{const r=await lje(t);if(!r.ok)throw r.error;return r.data},onSuccess:()=>{e.invalidateQueries({queryKey:["workOrdersRepo"]}),e.invalidateQueries({queryKey:["partsRepo"]}),e.invalidateQueries({queryKey:["partsRepoPaged"]}),e.invalidateQueries({queryKey:["inventoryTxRepo"]}),Ye.success(" cp nht lnh sa cha")},onError:t=>Ye.error(va(t))})},uje=()=>{const e=qn();return ha({mutationFn:({orderId:t,refundReason:r})=>oje(t,r),onSuccess:t=>{e.invalidateQueries({queryKey:["workOrdersRepo"]}),e.invalidateQueries({queryKey:["partsRepo"]}),e.invalidateQueries({queryKey:["partsRepoPaged"]}),e.invalidateQueries({queryKey:["inventoryTxRepo"]}),Ye.success(" hon tin phiu sa cha"),t.ok&&t.data.refundAmount&&Ye.info(`Hon tin: ${new Intl.NumberFormat("vi-VN").format(t.data.refundAmount)}`)},onError:t=>Ye.error(va(t))})},WD=({isOpen:e,onClose:t,onSave:r,workOrder:n,customers:a,parts:s,employees:l,currentBranchId:o})=>{var Dr,Yt,Mr;const c=T.useMemo(()=>{var Qt;if(!n)return null;const We=a.find(Cr=>Cr.phone===n.customerPhone||Cr.name===n.customerName);return!We&&n.customerName?{id:`temp-${Date.now()}`,name:n.customerName,phone:n.customerPhone||"",vehicles:n.licensePlate?[{id:`temp-veh-${Date.now()}`,licensePlate:n.licensePlate,model:n.vehicleModel||""}]:[]}:We&&n.licensePlate&&!((Qt=We.vehicles)==null?void 0:Qt.some(gr=>gr.licensePlate===n.licensePlate))?{...We,vehicles:[...We.vehicles||[],{id:`temp-veh-${Date.now()}`,licensePlate:n.licensePlate,model:n.vehicleModel||""}]}:We||null},[n,a]),d=T.useMemo(()=>c!=null&&c.vehicles?c.vehicles:[],[c]),f=T.useMemo(()=>{if(!n||!d.length)return null;let We=d.find(Qt=>Qt.licensePlate===n.licensePlate);return!We&&n.vehicleModel&&(We=d.find(Qt=>Qt.model===n.vehicleModel)),We||(n.licensePlate||n.vehicleModel?{id:`temp-veh-${Date.now()}`,licensePlate:n.licensePlate||"",model:n.vehicleModel||"",customerId:(c==null?void 0:c.id)||""}:d[0]||null)},[n,d,c]),[p,y]=T.useState((n==null?void 0:n.status)||"Tip nhn"),[g,N]=T.useState(((Dr=l.find(We=>We.name===(n==null?void 0:n.technicianName)))==null?void 0:Dr.id)||""),[w,k]=T.useState(null),[S,O]=T.useState(null);T.useEffect(()=>{console.log("[WorkOrderMobileModal] workOrder:",n),console.log("[WorkOrderMobileModal] initialCustomer:",c),console.log("[WorkOrderMobileModal] initialVehicle:",f),n?(k(c),O(f),Y(!c)):(k(null),O(null),Y(!0))},[n,c,f]);const[E,D]=T.useState(""),[H,W]=T.useState((n==null?void 0:n.issueDescription)||""),[R,z]=T.useState(((Yt=n==null?void 0:n.partsUsed)==null?void 0:Yt.map(We=>({partId:We.partId||"",partName:We.partName,quantity:We.quantity,sellingPrice:We.price||0})))||[]),[U,Z]=T.useState(((Mr=n==null?void 0:n.additionalServices)==null?void 0:Mr.map(We=>({id:We.id||`srv-${Date.now()}-${Math.random()}`,name:We.description||"",costPrice:We.costPrice||0,sellingPrice:We.price||0})))||[]),[q,K]=T.useState((n==null?void 0:n.laborCost)||0),[Q,re]=T.useState((n==null?void 0:n.discount)||0),[ae,de]=T.useState("amount"),[he,Se]=T.useState(!1),[ke,Le]=T.useState(0),[fe,F]=T.useState("cash"),[te,Y]=T.useState(!c),[ne,ee]=T.useState(""),[Ce,me]=T.useState(!1),[se,je]=T.useState(""),[be,ie]=T.useState(!1),[Te,De]=T.useState(""),[ye,rt]=T.useState(0),[st,dt]=T.useState(0),[et,lt]=T.useState(1),[Ve,Vt]=T.useState(!1),[Mt,mr]=T.useState(""),[xr,sr]=T.useState(""),Ir=We=>{if(We===0||We==="0")return"0";if(!We)return"";const Qt=We.toString().replace(/\D/g,"");return Qt?Qt.replace(/\B(?=(\d{3})+(?!\d))/g,"."):""},er=We=>{const Qt=We.replace(/\./g,"");return Qt?Number(Qt):0},Xt=T.useMemo(()=>{if(console.log("[WorkOrderMobileModal] Total customers:",a==null?void 0:a.length,a),!ne)return a;const We=ne.toLowerCase(),Qt=a.filter(Cr=>{var gr;return Cr.name.toLowerCase().includes(We)||((gr=Cr.phone)==null?void 0:gr.toLowerCase().includes(We))});return console.log("[WorkOrderMobileModal] Filtered customers:",Qt.length,"Search term:",ne),Qt},[a,ne]),Gt=T.useMemo(()=>{if(!se)return s;const We=se.toLowerCase();return s.filter(Qt=>{var Cr;return Qt.name.toLowerCase().includes(We)||((Cr=Qt.sku)==null?void 0:Cr.toLowerCase().includes(We))})},[s,se]),ur=T.useMemo(()=>{if(!w)return[];const We=w.vehicles||[];return S&&!We.find(Qt=>Qt.id===S.id)?[...We,S]:We},[w,S]);ua.useEffect(()=>{ur.length===1&&!S&&O(ur[0])},[ur,S]);const wr=T.useMemo(()=>R.reduce((We,Qt)=>We+Qt.quantity*Qt.sellingPrice,0),[R]),lr=T.useMemo(()=>U.reduce((We,Qt)=>We+Qt.sellingPrice,0),[U]),mt=wr+lr+q,kr=T.useMemo(()=>ae==="percent"?mt*Q/100:Q,[mt,Q,ae]),Ke=Math.max(0,mt-kr),vt=We=>{k(We),Y(!1),ee(""),O(null)},Kt=We=>{O(We)},tr=We=>{var Cr;const Qt=R.find(gr=>gr.partId===We.id);z(Qt?R.map(gr=>gr.partId===We.id?{...gr,quantity:gr.quantity+1}:gr):[...R,{partId:We.id,partName:We.name,quantity:1,sellingPrice:((Cr=We.retailPrice)==null?void 0:Cr[o])||0}]),me(!1),je("")},Pr=(We,Qt)=>{z(Cr=>Cr.map(gr=>gr.partId===We?{...gr,quantity:gr.quantity+Qt}:gr).filter(gr=>gr.quantity>0))},Nr=()=>{!Te||st<=0||(Z([...U,{id:`srv-${Date.now()}`,name:Te,costPrice:ye,sellingPrice:st}]),De(""),rt(0),dt(0),ie(!1))},Ge=We=>{Z(U.filter(Qt=>Qt.id!==We))},Ot=()=>{if(!Mt||!xr)return;const We={id:`veh-${Date.now()}`,licensePlate:Mt,model:xr};w&&(w.vehicles=[...w.vehicles||[],We],O(We)),mr(""),sr(""),Vt(!1)},hr=()=>{if(!w||!S){alert("Vui lng chn khch hng v xe");return}const We={status:p,technicianId:g,customer:w,vehicle:S,currentKm:parseInt(E)||0,issueDescription:H,parts:R,additionalServices:U,laborCost:q,discount:kr,total:Ke,depositAmount:he?ke:0,paymentMethod:fe};r(We)},$r=We=>{switch(We){case"Tip nhn":return"bg-blue-500";case"ang sa":return"bg-yellow-500";case"Ch vt t":return"bg-red-500";case"Tr my":return"bg-green-500";default:return"bg-gray-500"}};return T.useEffect(()=>(e?document.body.classList.add("hide-bottom-nav"):document.body.classList.remove("hide-bottom-nav"),()=>{document.body.classList.remove("hide-bottom-nav")}),[e]),e?i.jsxs("div",{className:"fixed inset-0 bg-black/50 z-[100] flex items-end md:items-center justify-center",children:[i.jsxs("div",{className:"md:hidden w-full h-full bg-[#151521] flex flex-col",children:[i.jsxs("div",{className:"flex-shrink-0 bg-[#1e1e2d] px-3 py-2.5 flex items-center justify-between border-b border-slate-700",children:[i.jsx("button",{onClick:t,className:"text-slate-400",children:i.jsx(_0,{className:"w-4 h-4"})}),i.jsx("h2",{className:"text-sm font-semibold text-white",children:n?`Phiu #${Il(n.id)}`:"To phiu sa cha"}),i.jsx("div",{className:"w-8"})]}),i.jsxs("div",{className:"flex-1 overflow-y-auto pb-32",children:[i.jsx("div",{className:"p-3 space-y-2",children:i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsxs("div",{className:"relative",children:[i.jsxs("select",{value:p,onChange:We=>y(We.target.value),className:`w-full px-2.5 py-2 rounded-lg text-white text-xs font-medium appearance-none pr-7 ${$r(p)}`,children:[i.jsx("option",{value:"Tip nhn",children:" Tip nhn"}),i.jsx("option",{value:"ang sa",children:" ang sa"}),i.jsx("option",{value:"Ch vt t",children:" Ch vt t"}),i.jsx("option",{value:"Tr my",children:" Tr my"})]}),i.jsx(__,{className:"absolute right-2 top-1/2 -translate-y-1/2 w-3.5 h-3.5 text-white pointer-events-none"})]}),i.jsxs("div",{className:"relative",children:[i.jsxs("select",{value:g,onChange:We=>N(We.target.value),className:"w-full px-2.5 py-2 bg-[#2b2b40] rounded-lg text-white text-xs appearance-none pr-7",children:[i.jsx("option",{value:"",children:" Chn KTV"}),l.map(We=>i.jsx("option",{value:We.id,children:We.name},We.id))]}),i.jsx(__,{className:"absolute right-2 top-1/2 -translate-y-1/2 w-3.5 h-3.5 text-slate-400 pointer-events-none"})]})]})}),i.jsxs("div",{className:"px-3 pb-3 space-y-2",children:[i.jsx("h3",{className:"text-xs font-semibold text-white uppercase tracking-wide",children:"Khch hng"}),te?i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"relative",children:[i.jsx(Ou,{className:"absolute left-2.5 top-1/2 -translate-y-1/2 w-3.5 h-3.5 text-slate-400"}),i.jsx("input",{type:"text",value:ne,onChange:We=>ee(We.target.value),placeholder:" Tm tn hoc ST khch...",className:"w-full pl-9 pr-3 py-2 bg-[#2b2b40] rounded-lg text-white text-xs placeholder-slate-500",autoFocus:!0})]}),i.jsx("div",{className:"max-h-48 overflow-y-auto space-y-2",children:Xt.slice(0,5).map(We=>i.jsxs("div",{onClick:()=>vt(We),className:"p-3 bg-[#1e1e2d] rounded-lg cursor-pointer hover:bg-[#2b2b40] transition-colors",children:[i.jsx("div",{className:"text-white font-medium",children:We.name}),i.jsx("div",{className:"text-xs text-slate-400",children:We.phone})]},We.id))})]}):w?i.jsxs("div",{className:"p-2.5 bg-[#1e1e2d] rounded-lg flex items-start justify-between",children:[i.jsxs("div",{className:"flex items-start gap-2.5",children:[i.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-500/20 flex items-center justify-center text-blue-400 font-semibold text-xs",children:w.name.charAt(0)}),i.jsxs("div",{children:[i.jsx("div",{className:"text-white font-medium text-xs",children:w.name}),i.jsxs("div",{className:"text-xs text-slate-400",children:[" ",w.phone]})]})]}),i.jsx("button",{onClick:()=>{k(null),O(null),Y(!0)},className:"p-1 text-slate-400 hover:text-white",children:i.jsx(_0,{className:"w-4 h-4"})})]}):null,w&&i.jsxs(i.Fragment,{children:[i.jsx("h3",{className:"text-xs font-semibold text-white mt-3 uppercase tracking-wide",children:"XE CA KHCH (Chn 1):"}),i.jsxs("div",{className:"space-y-2",children:[ur.map(We=>{const Qt=(S==null?void 0:S.id)===We.id;return i.jsx("div",{onClick:()=>Kt(We),className:`p-3 rounded-lg cursor-pointer transition-all ${Qt?"bg-blue-500/20 border-2 border-blue-500":"bg-[#1e1e2d] border-2 border-transparent"}`,children:i.jsx("div",{className:"flex items-center justify-between",children:i.jsxs("div",{className:"flex items-center gap-2.5",children:[i.jsx("div",{className:"text-2xl",children:Qt?i.jsx(by,{className:"w-4 h-4 text-blue-400"}):""}),i.jsxs("div",{children:[i.jsxs("div",{className:`font-semibold ${Qt?"text-blue-400":"text-white"}`,children:[We.model,Qt&&" (ANG CHN)"]}),i.jsxs("div",{className:"text-xs text-slate-400",children:["BKS: ",We.licensePlate]})]})]})})},We.id)}),i.jsxs("button",{onClick:()=>Vt(!0),className:"w-full py-1.5 border border-dashed border-slate-600 rounded-lg text-slate-400 hover:border-blue-500 hover:text-blue-400 transition-colors flex items-center justify-center gap-1.5 text-xs",children:[i.jsx(od,{className:"w-3.5 h-3.5"}),"Thm xe mi"]})]})]}),S&&i.jsxs("div",{className:"space-y-2 mt-2.5",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:"S KM hin ti"}),i.jsx("input",{type:"number",value:E,onChange:We=>D(We.target.value),placeholder:"Nhp s KM",className:"w-full px-2.5 py-1.5 bg-[#2b2b40] rounded-lg text-white text-xs"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:"M t s c"}),i.jsx("textarea",{value:H,onChange:We=>W(We.target.value),placeholder:"Thay nht, ku c...",rows:3,className:"w-full px-2.5 py-1.5 bg-[#2b2b40] rounded-lg text-white text-xs resize-none"})]})]})]}),w&&S&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"px-3 pb-3 space-y-2.5",children:[i.jsx("h3",{className:"text-xs font-semibold text-white uppercase tracking-wide",children:"PH TNG S DNG"}),R.length>0&&i.jsx("div",{className:"space-y-2",children:R.map((We,Qt)=>i.jsxs("div",{className:"p-3 bg-[#1e1e2d] rounded-lg",children:[i.jsxs("div",{className:"flex items-start justify-between mb-2",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"text-white text-xs font-medium",children:[Qt+1,". ",We.partName]}),i.jsxs("div",{className:"text-xs text-slate-400",children:[Ie(We.sellingPrice)," / ci"]})]}),i.jsx("div",{className:"text-[#50cd89] font-bold",children:Ie(We.quantity*We.sellingPrice)})]}),i.jsx("div",{className:"flex items-center justify-between",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{onClick:()=>Pr(We.partId,-1),className:"w-8 h-8 bg-[#2b2b40] rounded-lg flex items-center justify-center text-white hover:bg-red-500/20 hover:text-red-400",children:i.jsx(wee,{className:"w-4 h-4"})}),i.jsx("span",{className:"w-8 text-center text-white font-semibold",children:We.quantity}),i.jsx("button",{onClick:()=>Pr(We.partId,1),className:"w-8 h-8 bg-[#2b2b40] rounded-lg flex items-center justify-center text-white hover:bg-blue-500/20 hover:text-blue-400",children:i.jsx(od,{className:"w-4 h-4"})})]})})]},We.partId))}),i.jsxs("button",{onClick:()=>me(!0),className:"w-full py-2 bg-blue-600 hover:bg-blue-700 rounded-lg text-white font-medium flex items-center justify-center gap-1.5 transition-colors text-xs",children:[i.jsx(od,{className:"w-4 h-4"}),"+ THM PH TNG"]})]}),i.jsxs("div",{className:"px-3 pb-3 space-y-2.5",children:[i.jsx("h3",{className:"text-xs font-semibold text-white uppercase tracking-wide",children:"BO GI (GIA CNG, T NGOI)"}),U.length>0&&i.jsx("div",{className:"space-y-2",children:U.map((We,Qt)=>i.jsxs("div",{className:"p-3 bg-[#1e1e2d] rounded-lg border border-slate-700/50",children:[i.jsxs("div",{className:"flex items-start gap-2 mb-2",children:[i.jsx("span",{className:"text-lg",children:""}),i.jsxs("div",{className:"flex-1",children:[i.jsx("div",{className:"text-white text-sm font-medium",children:We.name}),i.jsxs("div",{className:"text-xs text-slate-400 mt-0.5",children:["1 x ",Ie(We.sellingPrice)]})]})]}),i.jsxs("div",{className:"border-t border-slate-700 pt-2 mt-2 flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-slate-500",children:"Thnh tin:"}),i.jsxs("div",{className:"text-[#50cd89] font-bold text-sm",children:[" ",Ie(We.sellingPrice)]}),We.costPrice>0&&i.jsxs("div",{className:"text-[10px] text-slate-600 mt-0.5",children:["(Vn: ",Ie(We.costPrice),")"]})]}),i.jsxs("div",{className:"flex gap-1",children:[i.jsx("button",{onClick:()=>{ie(!0)},className:"p-1.5 text-blue-400 hover:bg-blue-500/20 rounded-lg",children:""}),i.jsx("button",{onClick:()=>Ge(We.id),className:"p-1.5 text-red-400 hover:bg-red-500/20 rounded-lg",children:""})]})]})]},We.id))}),i.jsxs("button",{onClick:()=>ie(!0),className:"w-full py-3 border border-dashed border-[#009ef7] rounded-lg text-[#009ef7] font-medium flex items-center justify-center gap-2 transition-all hover:bg-[#009ef7]/10 text-xs",children:[i.jsx(od,{className:"w-4 h-4"}),"THM CNG VIC KHC (GIA CNG)"]})]}),i.jsxs("div",{className:"px-3 pb-3 space-y-2.5",children:[i.jsx("h3",{className:"text-xs font-semibold text-white uppercase tracking-wide",children:"THANH TON"}),i.jsxs("div",{className:"p-4 bg-[#1e1e2d] rounded-lg space-y-2",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:"Tin cng"}),i.jsx("input",{type:"text",value:Ir(q),onChange:We=>K(er(We.target.value)),placeholder:"0",className:"w-full px-2.5 py-1.5 bg-[#2b2b40] rounded-lg text-white text-xs"})]}),i.jsxs("div",{className:"pt-2",children:[i.jsxs("div",{className:"flex items-center justify-between p-3 bg-[#2b2b40] rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-blue-500/20 flex items-center justify-center",children:i.jsx("span",{className:"text-lg",children:""})}),i.jsx("span",{className:"text-white font-medium text-sm",children:"t cc trc"})]}),i.jsx("button",{onClick:()=>Se(!he),className:`relative w-12 h-6 rounded-full transition-colors ${he?"bg-[#009ef7]":"bg-slate-600"}`,children:i.jsx("div",{className:`absolute top-0.5 w-5 h-5 bg-white rounded-full shadow-md transition-transform ${he?"right-0.5":"left-0.5"}`,children:he&&i.jsx("span",{className:"absolute inset-0 flex items-center justify-center text-[#009ef7] text-[10px] font-bold",children:"ON"})})})]}),he&&i.jsxs("div",{className:"mt-3 p-3 bg-[#151521] border-2 border-[#009ef7] rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx("span",{className:"text-lg",children:""}),i.jsx("span",{className:"text-slate-400 text-xs",children:"Nhp s tin cc..."})]}),i.jsx("input",{type:"text",value:Ir(ke),onChange:We=>Le(er(We.target.value)),placeholder:"0",className:"w-full px-3 py-2.5 bg-[#2b2b40] border border-slate-600 rounded-lg text-white text-sm focus:border-[#009ef7] focus:outline-none transition-colors"})]})]}),i.jsxs("div",{className:"pt-2",children:[i.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-2",children:"Phng thc thanh ton"}),i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsxs("button",{onClick:()=>F("cash"),className:`relative p-3 rounded-lg transition-all border-2 ${fe==="cash"?"bg-emerald-500/10 border-emerald-500 shadow-lg shadow-emerald-500/20":"bg-[#2b2b40] border-transparent hover:border-slate-600"}`,children:[i.jsxs("div",{className:"flex flex-col items-center gap-1",children:[i.jsx("div",{className:`text-xl ${fe==="cash"?"scale-110":""} transition-transform`,children:""}),i.jsx("span",{className:`text-xs font-medium ${fe==="cash"?"text-emerald-400":"text-slate-400"}`,children:"Tin mt"})]}),fe==="cash"&&i.jsx("div",{className:"absolute top-1 right-1 w-4 h-4 bg-emerald-500 rounded-full flex items-center justify-center",children:i.jsx("svg",{className:"w-2.5 h-2.5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})})]}),i.jsxs("button",{onClick:()=>F("bank"),className:`relative p-3 rounded-lg transition-all border-2 ${fe==="bank"?"bg-blue-500/10 border-blue-500 shadow-lg shadow-blue-500/20":"bg-[#2b2b40] border-transparent hover:border-slate-600"}`,children:[i.jsxs("div",{className:"flex flex-col items-center gap-1",children:[i.jsx("div",{className:`text-xl ${fe==="bank"?"scale-110":""} transition-transform`,children:""}),i.jsx("span",{className:`text-xs font-medium ${fe==="bank"?"text-blue-400":"text-slate-400"}`,children:"Chuyn khon"})]}),fe==="bank"&&i.jsx("div",{className:"absolute top-1 right-1 w-4 h-4 bg-blue-500 rounded-full flex items-center justify-center",children:i.jsx("svg",{className:"w-2.5 h-2.5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})})]})]}),i.jsxs("div",{className:"mt-3 p-3 bg-blue-500/10 border border-blue-500/30 rounded-lg flex items-start gap-2",children:[i.jsx("div",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-blue-500/20 flex items-center justify-center mt-0.5",children:i.jsx("span",{className:"text-blue-400 text-xs",children:""})}),i.jsxs("p",{className:"text-blue-300 text-xs leading-relaxed",children:[i.jsx("span",{className:"font-semibold",children:"Lu :"}),' Ch thanh ton khi tr xe, ch kh dng khi trng thi "Tr my"']})]})]}),i.jsxs("div",{className:"pt-2 border-t border-slate-700 space-y-1",children:[i.jsxs("div",{className:"flex justify-between text-xs",children:[i.jsx("span",{className:"text-slate-400",children:"Tin cng:"}),i.jsx("span",{className:"text-white",children:Ie(q)})]}),i.jsxs("div",{className:"flex justify-between text-xs",children:[i.jsx("span",{className:"text-slate-400",children:"Tin ph tng:"}),i.jsx("span",{className:"text-white",children:Ie(wr)})]}),i.jsxs("div",{className:"flex justify-between text-xs",children:[i.jsx("span",{className:"text-slate-400",children:"Tin gia cng:"}),i.jsx("span",{className:"text-white",children:Ie(lr)})]}),i.jsxs("div",{className:"flex gap-2 items-center",children:[i.jsx("label",{className:"text-slate-400 text-xs flex-shrink-0",children:"Gim gi:"}),i.jsx("input",{type:"text",value:Ir(Q),onChange:We=>re(er(We.target.value)),placeholder:"0",className:"flex-1 px-2 py-1 bg-[#2b2b40] rounded text-white text-xs"}),i.jsxs("select",{value:ae,onChange:We=>de(We.target.value),className:"px-2 py-1 bg-[#2b2b40] rounded text-white text-xs",children:[i.jsx("option",{value:"amount",children:""}),i.jsx("option",{value:"percent",children:"%"})]})]}),i.jsxs("div",{className:"flex justify-between text-sm font-bold pt-2 border-t border-slate-700",children:[i.jsx("span",{className:"text-white",children:"TNG CNG:"}),i.jsx("span",{className:"text-[#50cd89]",children:Ie(Ke)})]})]})]})]})]})]}),i.jsx("div",{className:"flex-shrink-0 bg-[#1e1e2d] border-t border-slate-700 p-3",children:i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:t,className:"px-4 py-2 bg-[#2b2b40] text-slate-300 rounded-lg font-medium hover:bg-slate-700 transition-colors text-xs",children:"Hy"}),i.jsx("button",{onClick:hr,className:`flex-1 py-2 rounded-lg font-medium text-white transition-colors text-xs ${p==="Tr my"?"bg-green-600 hover:bg-green-700":he?"bg-purple-600 hover:bg-purple-700":"bg-blue-600 hover:bg-blue-700"}`,children:p==="Tr my"?" THANH TON & TR XE":he?" LU & T CC":" LU PHIU"})]})})]}),i.jsx("div",{className:"hidden md:block"}),Ce&&i.jsx("div",{className:"fixed inset-0 bg-black/70 z-[110] flex items-end",children:i.jsxs("div",{className:"w-full bg-[#151521] rounded-t-2xl max-h-[80vh] flex flex-col",children:[i.jsxs("div",{className:"flex-shrink-0 p-3 border-b border-slate-700 flex items-center justify-between",children:[i.jsx("h3",{className:"text-white font-semibold text-sm",children:"Chn ph tng"}),i.jsx("button",{onClick:()=>{me(!1),je("")},className:"p-1.5 text-slate-400",children:i.jsx(_0,{className:"w-4 h-4"})})]}),i.jsx("div",{className:"p-3",children:i.jsxs("div",{className:"relative",children:[i.jsx(Ou,{className:"absolute left-2.5 top-1/2 -translate-y-1/2 w-3.5 h-3.5 text-slate-400"}),i.jsx("input",{type:"text",value:se,onChange:We=>je(We.target.value),placeholder:"Tm tn hoc SKU...",className:"w-full pl-9 pr-3 py-2 bg-[#2b2b40] rounded-lg text-white text-xs",autoFocus:!0})]})}),i.jsx("div",{className:"flex-1 overflow-y-auto px-3 pb-3",children:i.jsx("div",{className:"space-y-2",children:Gt.slice(0,20).map(We=>{var gr,_n;const Qt=((gr=We.stock)==null?void 0:gr[o])||0,Cr=((_n=We.retailPrice)==null?void 0:_n[o])||0;return i.jsx("div",{onClick:()=>tr(We),className:"p-2.5 bg-[#1e1e2d] rounded-lg cursor-pointer hover:bg-[#2b2b40] transition-colors",children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("div",{className:"text-white font-medium text-xs",children:We.name}),i.jsxs("div",{className:"text-xs text-slate-400",children:["SKU: ",We.sku,"  Tn: ",Qt]})]}),i.jsx("div",{className:"text-[#50cd89] font-bold text-xs",children:Ie(Cr)})]})},We.id)})})})]})}),be&&i.jsx("div",{className:"fixed inset-0 bg-black/70 z-[110] flex items-end md:items-center md:justify-center",children:i.jsxs("div",{className:"w-full md:max-w-md bg-[#1e1e2d] rounded-t-2xl md:rounded-xl overflow-hidden",children:[i.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-slate-700",children:[i.jsx("h3",{className:"text-white font-semibold text-base",children:"THM DCH V GIA CNG"}),i.jsx("button",{onClick:()=>{ie(!1),De(""),rt(0),dt(0),lt(1)},className:"p-1.5 text-slate-400 hover:text-white",children:i.jsx(_0,{className:"w-5 h-5"})})]}),i.jsxs("div",{className:"p-4 space-y-4 max-h-[70vh] overflow-y-auto",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Tn cng vic / M t:"}),i.jsx("input",{type:"text",value:Te,onChange:We=>De(We.target.value),placeholder:"Nhp tn (VD: Hn ym, Sn...)",className:"w-full px-4 py-3 bg-[#151521] border border-slate-700 rounded-lg text-white placeholder-slate-500 focus:border-[#009ef7] focus:outline-none transition-colors",autoFocus:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"S lng:"}),i.jsxs("div",{className:"flex items-center justify-center gap-4",children:[i.jsx("button",{onClick:()=>lt(Math.max(1,et-1)),className:"w-12 h-12 bg-[#2b2b40] hover:bg-slate-700 rounded-lg flex items-center justify-center text-white text-2xl font-bold transition-colors",children:""}),i.jsx("div",{className:"w-20 h-12 bg-[#151521] border border-slate-700 rounded-lg flex items-center justify-center",children:i.jsx("span",{className:"text-white text-xl font-bold",children:et})}),i.jsx("button",{onClick:()=>lt(et+1),className:"w-12 h-12 bg-[#2b2b40] hover:bg-slate-700 rounded-lg flex items-center justify-center text-white text-2xl font-bold transition-colors",children:"+"})]})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"text-sm font-semibold text-slate-300 mb-3 uppercase tracking-wide",children:"CHI PH & GI BN"}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-slate-500 mb-1.5",children:"Gi nhp (Vn):"}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:"text",value:Ir(ye),onChange:We=>rt(er(We.target.value)),placeholder:"0",className:"w-full px-3 py-3 pr-8 bg-[#151521] border border-slate-700 rounded-lg text-slate-400 text-sm focus:border-slate-600 focus:outline-none transition-colors"}),i.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-500 text-xs",children:""})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-[#ffc700] mb-1.5 font-medium",children:"n gi (Bo khch):"}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:"text",value:Ir(st),onChange:We=>dt(er(We.target.value)),placeholder:"0",className:"w-full px-3 py-3 pr-8 bg-gradient-to-br from-[#009ef7]/10 to-purple-600/10 border-2 border-[#009ef7] rounded-lg text-white text-sm font-semibold focus:border-[#0077c7] focus:outline-none transition-colors"}),i.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-[#009ef7] text-xs font-bold",children:""})]})]})]})]}),i.jsx("div",{className:"p-4 bg-[#151521] border border-slate-700 rounded-lg",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-slate-400 text-sm",children:"Thnh tin (T tnh):"}),i.jsx("span",{className:"text-[#50cd89] text-xl font-bold",children:Ie(st*et)})]})})]}),i.jsx("div",{className:"p-4 border-t border-slate-700",children:i.jsx("button",{onClick:Nr,disabled:!Te.trim()||st<=0,className:"w-full py-4 bg-gradient-to-r from-[#009ef7] to-purple-600 hover:from-[#0077c7] hover:to-purple-700 disabled:from-slate-700 disabled:to-slate-700 disabled:cursor-not-allowed text-white font-bold text-sm rounded-lg transition-all shadow-lg",children:"LU VO PHIU"})})]})}),Ve&&i.jsx("div",{className:"fixed inset-0 bg-black/70 z-[110] flex items-center justify-center p-4",children:i.jsxs("div",{className:"w-full max-w-md bg-[#1e1e2d] rounded-xl p-3",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h3",{className:"text-white font-semibold text-sm",children:"Thm xe mi"}),i.jsx("button",{onClick:()=>Vt(!1),className:"p-1.5 text-slate-400",children:i.jsx(_0,{className:"w-4 h-4"})})]}),i.jsxs("div",{className:"space-y-2.5",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:"Bin s xe"}),i.jsx("input",{type:"text",value:Mt,onChange:We=>mr(We.target.value),placeholder:"59G1-123.45",className:"w-full px-2.5 py-1.5 bg-[#2b2b40] rounded-lg text-white text-xs"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:"Tn xe"}),i.jsx("input",{type:"text",value:xr,onChange:We=>sr(We.target.value),placeholder:"Honda Wave RSX",className:"w-full px-2.5 py-1.5 bg-[#2b2b40] rounded-lg text-white text-xs"})]}),i.jsxs("div",{className:"flex gap-2 pt-1.5",children:[i.jsx("button",{onClick:()=>Vt(!1),className:"flex-1 py-2 bg-[#2b2b40] text-slate-300 rounded-lg font-medium text-xs",children:"Hy"}),i.jsx("button",{onClick:Ot,className:"flex-1 py-2 bg-blue-600 text-white rounded-lg font-medium text-xs",children:"Thm xe"})]})]})]})})]}):null};function hje({workOrders:e,onCreateWorkOrder:t,onEditWorkOrder:r,onDeleteWorkOrder:n,onCallCustomer:a,currentBranchId:s}){const[l,o]=T.useState(""),[c,d]=T.useState("all"),[f,p]=T.useState(!1),y=T.useMemo(()=>{const k=e.filter(R=>R.status==="Tip nhn").length,S=e.filter(R=>R.status==="ang sa").length,O=e.filter(R=>R.status===" sa xong").length,E=e.filter(R=>R.status==="Tr my").length,D=e.filter(R=>R.status===" sa xong"||R.status==="Tr my"),H=D.reduce((R,z)=>R+(z.total||0),0),W=D.reduce((R,z)=>R+(z.total||0),0);return{tiepNhan:k,dangSua:S,daHoanThanh:O,traMay:E,doanhThu:H,loiNhuan:W}},[e]),g=T.useMemo(()=>{let k=e;if(c!=="all"&&(k=k.filter(S=>S.status===c)),l.trim()){const S=l.toLowerCase();k=k.filter(O=>{var E,D,H,W;return((E=O.customerName)==null?void 0:E.toLowerCase().includes(S))||((D=O.customerPhone)==null?void 0:D.toLowerCase().includes(S))||((H=O.licensePlate)==null?void 0:H.toLowerCase().includes(S))||((W=O.id)==null?void 0:W.toLowerCase().includes(S))})}return k.sort((S,O)=>{const E=new Date(S.creationDate||0).getTime();return new Date(O.creationDate||0).getTime()-E})},[e,c,l]),N=k=>{switch(k){case"Tip nhn":return"bg-[#009ef7]/10 text-[#009ef7] border-[#009ef7]/30";case"ang sa":return"bg-[#f1416c]/10 text-[#f1416c] border-[#f1416c]/30";case" sa xong":return"bg-[#50cd89]/10 text-[#50cd89] border-[#50cd89]/30";case"Tr my":return"bg-purple-500/10 text-purple-500 border-purple-500/30";default:return"bg-gray-500/10 text-gray-500 border-gray-500/30"}},w=k=>{switch(k){case"Tip nhn":return i.jsx(dd,{className:"w-4 h-4"});case"ang sa":return i.jsx(Cm,{className:"w-4 h-4"});case" hon thnh":return i.jsx(by,{className:"w-4 h-4"});case"Tr my":return i.jsx(r7,{className:"w-4 h-4"});default:return i.jsx(dd,{className:"w-4 h-4"})}};return i.jsxs("div",{className:"md:hidden flex flex-col h-screen bg-[#151521]",children:[i.jsxs("div",{className:"bg-[#1e1e2d] border-b border-gray-800 p-3",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsxs("button",{onClick:()=>d(c==="Tip nhn"?"all":"Tip nhn"),className:`p-3 rounded-xl text-left transition-all ${c==="Tip nhn"?"bg-gradient-to-br from-[#009ef7]/20 to-[#009ef7]/10 border-2 border-[#009ef7] shadow-lg shadow-[#009ef7]/20":"bg-[#2b2b40] border border-gray-700 hover:border-[#009ef7]/50"}`,children:[i.jsxs("div",{className:"flex items-center justify-between mb-1",children:[i.jsx("span",{className:"text-[10px] text-gray-400 font-medium",children:"Tip nhn"}),i.jsx(dd,{className:"w-4 h-4 text-[#009ef7]"})]}),i.jsx("div",{className:"text-2xl font-black text-white",children:y.tiepNhan})]}),i.jsxs("button",{onClick:()=>d(c==="ang sa"?"all":"ang sa"),className:`p-3 rounded-xl text-left transition-all ${c==="ang sa"?"bg-gradient-to-br from-[#f1416c]/20 to-[#f1416c]/10 border-2 border-[#f1416c] shadow-lg shadow-[#f1416c]/20":"bg-[#2b2b40] border border-gray-700 hover:border-[#f1416c]/50"}`,children:[i.jsxs("div",{className:"flex items-center justify-between mb-1",children:[i.jsx("span",{className:"text-[10px] text-gray-400 font-medium",children:"ang sa"}),i.jsx(Cm,{className:"w-4 h-4 text-[#f1416c]"})]}),i.jsx("div",{className:"text-2xl font-black text-white",children:y.dangSua})]}),i.jsxs("button",{onClick:()=>d(c===" sa xong"?"all":" sa xong"),className:`p-3 rounded-xl text-left transition-all ${c===" sa xong"?"bg-gradient-to-br from-[#50cd89]/20 to-[#50cd89]/10 border-2 border-[#50cd89] shadow-lg shadow-[#50cd89]/20":"bg-[#2b2b40] border border-gray-700 hover:border-[#50cd89]/50"}`,children:[i.jsxs("div",{className:"flex items-center justify-between mb-1",children:[i.jsx("span",{className:"text-[10px] text-gray-400 font-medium",children:" sa xong"}),i.jsx(by,{className:"w-4 h-4 text-[#50cd89]"})]}),i.jsx("div",{className:"text-2xl font-black text-white",children:y.daHoanThanh})]}),i.jsxs("button",{onClick:()=>d(c==="Tr my"?"all":"Tr my"),className:`p-3 rounded-xl text-left transition-all ${c==="Tr my"?"bg-gradient-to-br from-purple-500/20 to-purple-500/10 border-2 border-purple-500 shadow-lg shadow-purple-500/20":"bg-[#2b2b40] border border-gray-700 hover:border-purple-500/50"}`,children:[i.jsxs("div",{className:"flex items-center justify-between mb-1",children:[i.jsx("span",{className:"text-[10px] text-gray-400 font-medium",children:"Tr my"}),i.jsx(r7,{className:"w-4 h-4 text-purple-500"})]}),i.jsx("div",{className:"text-2xl font-black text-white",children:y.traMay})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-2",children:[i.jsxs("div",{className:"p-3 rounded-xl bg-gradient-to-br from-emerald-900/30 to-emerald-800/20 border border-emerald-700",children:[i.jsxs("div",{className:"flex items-center justify-between mb-1",children:[i.jsx("span",{className:"text-[10px] text-emerald-400 font-medium",children:"Doanh thu hm nay"}),i.jsx(C0,{className:"w-4 h-4 text-emerald-400"})]}),i.jsx("div",{className:"text-base font-black text-emerald-300",children:Ie(y.doanhThu)})]}),i.jsxs("div",{className:"p-3 rounded-xl bg-gradient-to-br from-blue-900/30 to-blue-800/20 border border-blue-700",children:[i.jsxs("div",{className:"flex items-center justify-between mb-1",children:[i.jsx("span",{className:"text-[10px] text-blue-400 font-medium",children:"Li nhun hm nay"}),i.jsx(R1,{className:"w-4 h-4 text-blue-400"})]}),i.jsx("div",{className:"text-base font-black text-blue-300",children:Ie(y.loiNhuan)})]})]})]}),i.jsx("div",{className:"bg-[#1e1e2d] border-b border-gray-800 px-3 py-2",children:i.jsxs("div",{className:"relative",children:[i.jsx(Ou,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500"}),i.jsx("input",{type:"text",placeholder:"Tm tn, ST, bin s...",value:l,onChange:k=>o(k.target.value),className:"w-full pl-10 pr-3 py-2.5 bg-[#2b2b40] border border-gray-700 rounded-xl text-white placeholder-gray-500 text-sm focus:outline-none focus:border-[#009ef7]"})]})}),i.jsx("div",{className:"flex-1 overflow-y-auto py-2 space-y-2 pb-20 scrollbar-hide",children:g.length===0?i.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center px-6",children:[i.jsx("div",{className:"w-32 h-32 mb-6 flex items-center justify-center",children:i.jsx("svg",{className:"w-full h-full text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),i.jsx("h3",{className:"text-xl font-semibold text-gray-300 mb-2",children:"Cha c phiu sa cha no!"}),i.jsx("p",{className:"text-gray-500 mb-6",children:"Hy to phiu u tin  qun l dch v sa cha"}),i.jsx("button",{onClick:t,className:"px-6 py-3 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-xl font-medium hover:from-blue-600 hover:to-blue-700 transition-all shadow-lg shadow-blue-500/30",children:"+ To phiu mi"})]}):g.map(k=>i.jsxs("div",{onClick:()=>r(k),className:"bg-[#1e1e2d] rounded-xl border border-gray-800 overflow-hidden active:scale-[0.99] transition-transform",children:[i.jsxs("div",{className:"p-3",children:[i.jsxs("div",{className:"flex items-start justify-between mb-2",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("div",{className:"text-[#009ef7] font-mono text-sm font-semibold mb-0.5",children:Il(k.id)}),i.jsx("div",{className:"text-xs text-gray-500",children:Bn(k.creationDate)})]}),i.jsxs("div",{className:`inline-flex items-center gap-1.5 px-3 py-1 rounded-lg border text-xs font-semibold ${N(k.status)}`,children:[w(k.status),k.status]})]}),i.jsxs("div",{className:"space-y-2 mb-3",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-lg",children:""}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("div",{className:"text-white font-medium text-sm truncate",children:k.customerName}),i.jsx("div",{className:"text-gray-400 text-xs",children:k.customerPhone})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-lg",children:""}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("div",{className:"text-gray-300 text-sm truncate",children:k.vehicleModel}),i.jsx("div",{className:"text-[#009ef7] text-xs font-mono",children:k.licensePlate})]})]})]}),i.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-gray-800",children:[i.jsxs("div",{className:"text-xs text-gray-400",children:["KTV:"," ",i.jsx("span",{className:"text-gray-300",children:k.technicianName||"Cha phn"})]}),i.jsx("div",{className:"text-white font-bold text-base",children:Ie(k.total||0)})]})]}),i.jsxs("div",{className:"grid grid-cols-3 border-t border-gray-800",children:[i.jsxs("button",{onClick:S=>{S.stopPropagation(),a(k.customerPhone||"")},className:"flex items-center justify-center gap-1.5 py-3 bg-green-500/10 hover:bg-green-500/20 transition-colors border-r border-gray-800",children:[i.jsx(gF,{className:"w-4 h-4 text-green-500"}),i.jsx("span",{className:"text-xs font-semibold text-green-500",children:"Gi"})]}),i.jsxs("button",{onClick:S=>{S.stopPropagation(),r(k)},className:"flex items-center justify-center gap-1.5 py-3 bg-[#009ef7]/10 hover:bg-[#009ef7]/20 transition-colors border-r border-gray-800",children:[i.jsx(pF,{className:"w-4 h-4 text-[#009ef7]"}),i.jsx("span",{className:"text-xs font-semibold text-[#009ef7]",children:"Sa"})]}),i.jsxs("button",{onClick:S=>{S.stopPropagation(),n(k)},className:"flex items-center justify-center gap-1.5 py-3 bg-[#f1416c]/10 hover:bg-[#f1416c]/20 transition-colors",children:[i.jsx(Xg,{className:"w-4 h-4 text-[#f1416c]"}),i.jsx("span",{className:"text-xs font-semibold text-[#f1416c]",children:"Xa"})]})]})]},k.id))}),i.jsx("button",{onClick:t,className:"fixed bottom-20 right-4 w-12 h-12 bg-gradient-to-br from-[#009ef7] to-[#0077b6] rounded-full shadow-xl shadow-[#009ef7]/50 flex items-center justify-center hover:from-[#0077b6] hover:to-[#005a8a] transition-all z-[60] active:scale-95","aria-label":"To phiu mi",children:i.jsx(od,{className:"w-5 h-5 text-white"})}),f&&i.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-end md:items-center md:justify-center",children:i.jsxs("div",{className:"bg-[#1e1e2d] rounded-t-3xl md:rounded-2xl w-full md:max-w-md p-6 space-y-4 animate-slide-up",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h3",{className:"text-lg font-semibold text-white",children:"B lc nng cao"}),i.jsx("button",{onClick:()=>p(!1),className:"text-gray-500 hover:text-gray-300",children:""})]}),i.jsx("div",{className:"text-gray-400 text-sm text-center py-8",children:"Cc ty chn lc s c b sung..."})]})}),i.jsx("style",{children:`
        .scrollbar-hide::-webkit-scrollbar {
          display: none;
        }
        .scrollbar-hide {
          -ms-overflow-style: none;
          scrollbar-width: none;
        }
        @keyframes slide-up {
          from {
            transform: translateY(100%);
          }
          to {
            transform: translateY(0);
          }
        }
        .animate-slide-up {
          animation: slide-up 0.3s ease-out;
        }
      `})]})}function fje(){var Rr,Sn,we,Ne,Me;const{parts:e,customers:t,employees:r,upsertCustomer:n,setCashTransactions:a,setPaymentSources:s,paymentSources:l,currentBranchId:o,workOrders:c,setWorkOrders:d}=Ua(),{data:f,isLoading:p}=mf(),{data:y,isLoading:g}=T6(),{data:N,isLoading:w}=zV(),[k,S]=T.useState([]);T.useEffect(()=>{(async()=>{const{data:ve,error:Oe}=await Pt.from("customers").select("*").order("created_at",{ascending:!1});!Oe&&ve&&S(ve)})()},[]);const O=f||e,E=k.length>0?k:t,D=y||r,H=N||c;T.useEffect(()=>{console.log("[ServiceManager] fetchedWorkOrders:",N==null?void 0:N.length,N),console.log("[ServiceManager] workOrders from context:",c==null?void 0:c.length,c),N&&d(N)},[N,d]);const[W,R]=T.useState(!1),[z,U]=T.useState(!1),[Z,q]=T.useState(!1),[K,Q]=T.useState(void 0),[re,ae]=T.useState(""),[de,he]=T.useState("all"),[Se,ke]=T.useState("all"),[Le,fe]=T.useState(null),[F,te]=T.useState(null),[Y,ne]=T.useState(!1),[ee,Ce]=T.useState(null),[me,se]=T.useState(null),[je,be]=T.useState(!1),[ie,Te]=T.useState(""),[De,ye]=T.useState(null),[rt,st]=T.useState(!1),[dt,et]=T.useState({id:"",name:"",description:"",duration:30,laborCost:0,parts:[]}),[lt,Ve]=T.useState(null),[Vt,Mt]=T.useState("");T.useEffect(()=>{if(!Le)return;const le=ve=>{ve.target.closest(".service-row-menu")||fe(null)};return document.addEventListener("mousedown",le),()=>document.removeEventListener("mousedown",le)},[Le]);const mr=[{id:"oil-change",name:"Thay du ng c",description:"Thay du v lc du ng c",duration:30,laborCost:3e5,parts:[{name:"Du ng c 10W40",quantity:1,price:12e4,unit:"chai"},{name:"Lc du",quantity:1,price:3e4,unit:"ci"}]},{id:"brake-service",name:"Sa phanh",description:"Thay m phanh v bo dng h thng phanh",duration:45,laborCost:505e3,parts:[{name:"M phanh trc",quantity:2,price:16e4,unit:"ci"},{name:"M phanh sau",quantity:2,price:12e4,unit:"ci"},{name:"Du phanh",quantity:1,price:25e3,unit:"chai"}]},{id:"cleaning",name:"V sinh kim phun",description:"V sinh v hiu chnh kim phun xng",duration:60,laborCost:15e4,parts:[{name:"Dung dch v sinh kim phun",quantity:1,price:5e4,unit:"chai"}]},{id:"oil-box",name:"Thay nht hp s",description:"Thay du hp s v kim tra",duration:25,laborCost:14e4,parts:[{name:"Du hp s",quantity:1,price:6e4,unit:"chai"}]},{id:"bug-check",name:"Thay bugi",description:"Thay bugi v kim tra h thng nh la",duration:20,laborCost:85e3,parts:[{name:"Bugi",quantity:1,price:35e3,unit:"ci"}]},{id:"full-maintenance",name:"Bo dng tng qut",description:"Bo dng nh k y ",duration:90,laborCost:57e4,parts:[{name:"Du ng c 10W40",quantity:1,price:12e4,unit:"chai"},{name:"Lc du",quantity:1,price:3e4,unit:"ci"},{name:"Lc khng kh",quantity:1,price:25e3,unit:"ci"},{name:"Bugi",quantity:1,price:35e3,unit:"ci"},{name:"Du hp s",quantity:1,price:6e4,unit:"chai"}]}],xr=T.useMemo(()=>{let le=H.filter(ve=>!ve.refunded);return console.log("[ServiceManager] Total displayWorkOrders:",H.length),console.log("[ServiceManager] Work orders status:",H.map(ve=>({id:ve.id,status:ve.status}))),Se==="delivered"?le=le.filter(ve=>ve.status==="Tr my"):(le=le.filter(ve=>ve.status!=="Tr my"),Se==="pending"?le=le.filter(ve=>ve.status==="Tip nhn"):Se==="inProgress"?le=le.filter(ve=>ve.status==="ang sa"):Se==="done"&&(le=le.filter(ve=>ve.status===" sa xong"))),console.log("[ServiceManager] After tab filter:",Se,le.length),re&&(le=le.filter(ve=>{var Oe,nt;return ve.customerName.toLowerCase().includes(re.toLowerCase())||((Oe=ve.vehicleModel)==null?void 0:Oe.toLowerCase().includes(re.toLowerCase()))||((nt=ve.licensePlate)==null?void 0:nt.toLowerCase().includes(re.toLowerCase()))})),le.sort((ve,Oe)=>{const nt=ve.creationDate||ve.creationdate,wt=Oe.creationDate||Oe.creationdate;return!nt||!wt?0:new Date(wt).getTime()-new Date(nt).getTime()})},[H,Se,re]),sr=T.useMemo(()=>{const le=H.filter(ht=>ht.status==="Tip nhn").length,ve=H.filter(ht=>ht.status==="ang sa").length,Oe=H.filter(ht=>ht.status===" sa xong").length,nt=H.filter(ht=>ht.status==="Tr my").length,wt=H.filter(ht=>ht.paymentStatus==="paid"&&new Date(ht.creationDate).toDateString()===new Date().toDateString()).reduce((ht,bt)=>ht+bt.total,0),ft=H.filter(ht=>ht.paymentStatus==="paid"&&new Date(ht.creationDate).toDateString()===new Date().toDateString()).reduce((ht,bt)=>{var Ut;return ht+(bt.total-(((Ut=bt.partsUsed)==null?void 0:Ut.reduce((rr,Jt)=>rr+Jt.price*Jt.quantity,0))||0))},0);return{pending:le,inProgress:ve,done:Oe,delivered:nt,todayRevenue:wt,todayProfit:ft}},[H]),Ir=sr.pending+sr.inProgress+sr.done,er=sr.pending+sr.inProgress,Xt=Ir?Math.round(er/Ir*100):0,Gt=Ir?Math.round(sr.done/Ir*100):0,ur=sr.todayRevenue?Math.round(sr.todayProfit/sr.todayRevenue*100):0,wr={slate:"bg-slate-100 text-slate-600 dark:bg-slate-900/30 dark:text-slate-200",blue:"bg-blue-100 text-blue-600 dark:bg-blue-900/30 dark:text-blue-300",orange:"bg-orange-100 text-orange-600 dark:bg-orange-900/30 dark:text-orange-300",green:"bg-emerald-100 text-emerald-600 dark:bg-emerald-900/30 dark:text-emerald-300",purple:"bg-purple-100 text-purple-600 dark:bg-purple-900/30 dark:text-purple-300"},lr="px-4 py-2 bg-slate-50 dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-sm text-slate-700 dark:text-slate-200",mt=T.useMemo(()=>[{key:"all",label:"Tt c",color:"slate",count:H.filter(le=>le.status!=="Tr my"&&!le.refunded).length},{key:"pending",label:"Tip nhn",color:"blue",count:sr.pending},{key:"inProgress",label:"ang sa",color:"orange",count:sr.inProgress},{key:"done",label:" sa xong",color:"green",count:sr.done},{key:"delivered",label:" tr my",color:"purple",count:sr.delivered}],[H,sr.delivered,sr.done,sr.inProgress,sr.pending]),kr=[{key:"pending",label:"Tip nhn",value:sr.pending,subtitle:"Ch phn cng",accent:"from-sky-50 via-sky-50 to-white dark:from-sky-900/30 dark:via-sky-900/10",dot:"bg-sky-500"},{key:"inProgress",label:"ang sa",value:sr.inProgress,subtitle:"ang thi cng",accent:"from-amber-50 via-amber-50 to-white dark:from-amber-900/30 dark:via-amber-900/10",dot:"bg-amber-500"},{key:"done",label:" sa xong",value:sr.done,subtitle:"Ch giao khch",accent:"from-emerald-50 via-emerald-50 to-white dark:from-emerald-900/30 dark:via-emerald-900/10",dot:"bg-emerald-500"},{key:"delivered",label:"Tr my",value:sr.delivered,subtitle:"Hon tt",accent:"from-purple-50 via-purple-50 to-white dark:from-purple-900/30 dark:via-purple-900/10",dot:"bg-purple-500"}],Ke=le=>{Q(le||{id:"",customerName:"",customerPhone:"",vehicleModel:"",licensePlate:"",issueDescription:"",technicianName:"",status:"Tip nhn",laborCost:0,discount:0,partsUsed:[],total:0,branchId:o,paymentStatus:"unpaid",creationDate:new Date().toISOString()}),R(!0)},vt=le=>{const ve={id:"",customerName:"",customerPhone:"",vehicleModel:"",licensePlate:"",issueDescription:le.description,laborCost:le.laborCost,partsUsed:le.parts.map((Oe,nt)=>({partId:`TEMPLATE-${nt}`,partName:Oe.name,sku:"",quantity:Oe.quantity,price:Oe.price})),status:"Tip nhn",paymentStatus:"unpaid",discount:0,total:0,creationDate:new Date().toISOString(),branchId:o,technicianName:""};Q(ve),q(!1),R(!0)},Kt=()=>{ye(null),et({id:"",name:"",description:"",duration:30,laborCost:0,parts:[]}),st(!0)},tr=le=>{ye(le),et({id:le.id,name:le.name,description:le.description,duration:le.duration,laborCost:le.laborCost,parts:[...le.parts]}),st(!0)},Pr=()=>{if(!dt.name.trim()){Ye.error("Vui lng nhp tn mu");return}if(dt.laborCost<=0){Ye.error("Vui lng nhp chi ph cng");return}De?Ye.success(` cp nht mu "${dt.name}"`):Ye.success(` to mu "${dt.name}"`),st(!1),ye(null)},Nr=()=>{et({...dt,parts:[...dt.parts,{name:"",quantity:1,price:0,unit:"ci"}]})},Ge=le=>{et({...dt,parts:dt.parts.filter((ve,Oe)=>Oe!==le)})},Ot=(le,ve,Oe)=>{const nt=[...dt.parts];nt[le]={...nt[le],[ve]:Oe},et({...dt,parts:nt}),ve==="name"&&(Ve(le),Mt(Oe))},hr=(le,ve)=>{var nt;const Oe=[...dt.parts];Oe[le]={...Oe[le],name:ve.name,price:((nt=ve.retailPrice)==null?void 0:nt[o||""])||0,unit:"ci"},et({...dt,parts:Oe}),Ve(null),Mt("")},$r=T.useMemo(()=>{if(lt===null)return[];const le=f||[];console.log("[DEBUG] fetchedParts available:",le.length);const ve=Vt.toLowerCase();if(!ve){const nt=le.slice(0,5);return console.log("[DEBUG] No search term, showing first 5 parts:",nt.map(wt=>{var ft,ht;return{name:wt.name,stock:(ft=wt.stock)==null?void 0:ft[o||""],price:(ht=wt.retailPrice)==null?void 0:ht[o||""]}})),nt}const Oe=le.filter(nt=>nt.name.toLowerCase().includes(ve));return console.log("[DEBUG] Search term:",ve,"Found:",Oe.length,"Sample:",Oe.slice(0,2).map(nt=>{var wt,ft;return{name:nt.name,stock:(wt=nt.stock)==null?void 0:wt[o||""],price:(ft=nt.retailPrice)==null?void 0:ft[o||""]}})),Oe.slice(0,5)},[f,Vt,lt]),Dr=async le=>{te(le);try{const{data:ve,error:Oe}=await Pt.from("store_settings").select("*").limit(1).single();!Oe&&ve&&Ce(ve)}catch(ve){console.error("Error loading store settings:",ve)}ne(!0)},Yt=()=>{setTimeout(()=>{ow("work-order-receipt")},100)},{mutateAsync:Mr}=uje();Tk(),kH();const We=le=>{se(le),Te(""),be(!0)},Qt=async()=>{if(me){if(!ie.trim()){Ye.error("Vui lng nhp l do hy");return}try{console.log("[handleConfirmRefund] Starting refund for order:",me.id),console.log("[handleConfirmRefund] Refund reason:",ie);const le=await Mr({orderId:me.id,refundReason:ie});if(console.log("[handleConfirmRefund] Refund result:",le),!le||le.error){console.error("[handleConfirmRefund] Refund failed:",le),Ye.error("Khng th hy n sa cha");return}if(le&&"refund_transaction_id"in le&&"refundAmount"in le&&le.refund_transaction_id&&le.refundAmount){const ve=le.refundAmount;a(Oe=>[...Oe,{id:le.refund_transaction_id,type:"refund",category:"refund",amount:-ve,date:new Date().toISOString(),description:`Hon tin hy phiu #${(Il(me.id,ee==null?void 0:ee.work_order_prefix)||"").split("-").pop()} - ${ie}`,branchId:o,paymentSource:me.paymentMethod,reference:me.id}]),me.paymentMethod&&s(Oe=>Oe.map(nt=>nt.id===me.paymentMethod?{...nt,balance:{...nt.balance,[o]:(nt.balance[o]||0)-ve}}:nt))}d(ve=>ve.map(Oe=>Oe.id===me.id?{...Oe,refunded:!0,status:" hy"}:Oe)),Ye.success(" hy n sa cha thnh cng"),be(!1),se(null),Te("")}catch(le){console.error("Error refunding work order:",le),Ye.error("Li khi hy n sa cha")}}},Cr=le=>{le&&(window.location.href=`tel:${le}`)},gr=async le=>{if(confirm(`Xc nhn xa phiu ${Il(le.id)}?`))try{const{error:ve}=await Pt.from("work_orders").delete().eq("id",le.id);if(ve)throw ve;d(Oe=>Oe.filter(nt=>nt.id!==le.id)),Ye.success(" xa phiu sa cha")}catch(ve){console.error("Error deleting work order:",ve),Ye.error("Li khi xa phiu sa cha")}};return window.innerWidth<768?i.jsxs(i.Fragment,{children:[i.jsx(hje,{workOrders:H||[],onCreateWorkOrder:()=>{Q(void 0),U(!0)},onEditWorkOrder:le=>{Q(le),U(!0)},onDeleteWorkOrder:gr,onCallCustomer:Cr,currentBranchId:o}),z&&i.jsx(WD,{isOpen:z,onClose:()=>{U(!1),Q(void 0)},onSave:le=>{console.log("Mobile Work Order Data:",le),U(!1),Q(void 0)},workOrder:K,customers:E,parts:f||[],employees:D,currentBranchId:o})]}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"grid gap-4 xl:grid-cols-[2fr,1fr]",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl border border-slate-200 dark:border-slate-700 p-6",children:[i.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-4",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-400",children:"Phiu cn x l"}),i.jsx("p",{className:"text-3xl font-bold text-slate-900 dark:text-slate-100",children:er}),i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Chim ",Xt,"% ca ",Ir||0," phiu ang m"]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-400",children:"Hon thnh"}),i.jsxs("p",{className:"text-2xl font-semibold text-emerald-600 dark:text-emerald-400",children:[Gt,"%"]}),i.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:[sr.done," phiu ch giao"]})]})]}),i.jsx("div",{className:"mt-6 grid gap-3 sm:grid-cols-2 lg:grid-cols-4",children:kr.map(le=>i.jsx("button",{onClick:()=>ke(Se===le.key?"all":le.key),className:`text-left rounded-xl border p-4 transition focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500/50 ${Se===le.key?"border-blue-500 bg-blue-50/60 dark:bg-blue-900/20":"border-slate-200 dark:border-slate-700"}`,children:i.jsxs("div",{className:`rounded-lg bg-gradient-to-br ${le.accent} p-3`,children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx("p",{className:"text-xs uppercase tracking-wide text-slate-500 dark:text-slate-400",children:le.label}),i.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-slate-100",children:le.value})]}),i.jsx("span",{className:`h-2.5 w-2.5 rounded-full ${le.dot}`})]}),i.jsx("p",{className:"mt-2 text-xs text-slate-500 dark:text-slate-400",children:le.subtitle})]})},le.key))})]}),i.jsxs("div",{className:"grid gap-4",children:[i.jsxs("div",{className:"rounded-2xl bg-gradient-to-br from-blue-500 via-blue-600 to-indigo-600 p-6 text-white shadow-lg",children:[i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-white/80",children:"Doanh thu hm nay"}),i.jsx("p",{className:"mt-3 text-3xl font-semibold",children:Ie(sr.todayRevenue)})]}),i.jsx(Vg,{className:"w-10 h-10 text-white/80"})]}),i.jsx("p",{className:"mt-4 text-sm text-white/80",children:"Bao gm cc phiu  thanh ton trong ngy"})]}),i.jsxs("div",{className:"rounded-2xl bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 p-6",children:[i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-400",children:"Li nhun hm nay"}),i.jsx("p",{className:"mt-3 text-3xl font-semibold text-slate-900 dark:text-slate-100",children:Ie(sr.todayProfit)})]}),i.jsx(R1,{className:"w-10 h-10 text-blue-500"})]}),i.jsxs("div",{className:"mt-4 flex items-center justify-between text-sm",children:[i.jsx("span",{className:"text-slate-500 dark:text-slate-400",children:"Bin li nhun"}),i.jsxs("span",{className:"font-semibold text-emerald-600 dark:text-emerald-400",children:[ur,"%"]})]})]})]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-2xl p-4 flex flex-wrap items-center gap-3",children:[i.jsx("span",{className:"text-xs font-semibold uppercase tracking-wide text-slate-400",children:"Trng thi nhanh"}),i.jsx("div",{className:"flex flex-wrap gap-2",children:mt.map(le=>i.jsxs("button",{onClick:()=>ke(Se===le.key?"all":le.key),className:`inline-flex items-center gap-2 rounded-full border px-3 py-1.5 text-sm transition ${Se===le.key?"border-blue-500 bg-blue-50 text-blue-600 dark:bg-blue-900/20":"border-slate-200 text-slate-600 hover:border-slate-300 dark:border-slate-700 dark:text-slate-300"}`,children:[i.jsx("span",{children:le.label}),i.jsx("span",{className:`text-xs font-semibold px-2 py-0.5 rounded-full ${wr[le.color]}`,children:le.count})]},le.key))})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl p-5 border border-slate-200 dark:border-slate-700 space-y-4",children:[i.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[i.jsxs("div",{className:"flex-1 min-w-[260px]",children:[i.jsx("label",{className:"text-xs font-semibold uppercase tracking-wide text-slate-400",children:"Tm kim nhanh"}),i.jsxs("div",{className:"relative mt-1",children:[i.jsx("input",{type:"text",placeholder:"M phiu, tn khch, ST, xe, bin s...",value:re,onChange:le=>ae(le.target.value),className:"w-full pl-10 pr-4 py-2 bg-slate-50 dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-sm text-slate-900 dark:text-slate-100 placeholder-slate-400"}),i.jsx(Ou,{className:"absolute left-3 top-2.5 w-4 h-4 text-slate-400","aria-hidden":"true"})]})]}),i.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[i.jsxs("button",{className:"px-4 py-2 bg-white text-slate-600 dark:bg-slate-900/40 dark:text-slate-100 border border-slate-200 dark:border-slate-700 rounded-lg text-sm font-medium flex items-center gap-2","aria-label":"Xem bo co",children:[i.jsx(R1,{className:"w-4 h-4"})," Bo co"]}),i.jsxs("button",{onClick:()=>q(!0),className:"px-4 py-2 bg-purple-500 hover:bg-purple-600 text-white rounded-lg text-sm font-medium flex items-center gap-2","aria-label":"M danh sch mu sa cha",children:[i.jsx(dd,{className:"w-4 h-4"})," Mu SC"]}),i.jsxs(Bu,{to:"/service-history",className:"px-4 py-2 bg-cyan-500 hover:bg-cyan-600 text-white rounded-lg text-sm font-medium flex items-center gap-2 transition-colors",children:[i.jsx(S_,{className:"w-4 h-4"})," Lch s SC"]}),i.jsxs("button",{onClick:()=>{window.innerWidth<768?U(!0):Ke()},className:"px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg text-sm font-medium flex items-center gap-2","aria-label":"To phiu sa cha mi",children:[i.jsx(od,{className:"w-4 h-4"})," Thm Phiu"]}),i.jsxs("button",{className:"px-4 py-2 bg-orange-500 hover:bg-orange-600 text-white rounded-lg text-sm font-medium flex items-center gap-2","aria-label":"Gi SMS nhc khch hng",children:[i.jsx(l7,{className:"w-4 h-4"})," SMS QH"]})]})]}),i.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[i.jsx("span",{className:"text-xs font-semibold uppercase tracking-wide text-slate-400",children:"B lc nng cao"}),i.jsxs("div",{className:"flex flex-wrap gap-2 flex-1 min-w-[240px]",children:[i.jsx("div",{className:"min-w-[160px]",children:i.jsxs("select",{className:lr,children:[i.jsx("option",{children:"Tt c ngy"}),i.jsx("option",{children:"Hm nay"}),i.jsx("option",{children:"7 ngy qua"}),i.jsx("option",{children:"30 ngy qua"})]})}),i.jsx("div",{className:"min-w-[160px]",children:i.jsxs("select",{className:lr,children:[i.jsx("option",{children:"Tt c KTV"}),i.jsx("option",{children:"KTV 1"}),i.jsx("option",{children:"KTV 2"})]})}),i.jsx("div",{className:"min-w-[160px]",children:i.jsxs("select",{className:lr,children:[i.jsx("option",{children:"Tt c thanh ton"}),i.jsx("option",{children:" thanh ton"}),i.jsx("option",{children:"Cha thanh ton"})]})})]})]})]}),i.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700/50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-2 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 w-12",children:i.jsx("input",{type:"checkbox",className:"rounded"})}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300",children:"M phiu"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300",children:"Khch hng"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300",children:"Chi tit"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300",children:"Thanh ton & trng thi"}),i.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-600 dark:text-slate-300",children:"Thao tc"})]})}),i.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700 bg-white dark:bg-slate-800",children:xr.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:6,className:"px-4 py-12 text-center text-slate-400",children:"Khng c phiu sa cha no."})}):xr.map(le=>{var pr,Ar,It,Un,en,Na;const ve=((pr=le.partsUsed)==null?void 0:pr.reduce((La,cn)=>La+cn.quantity*cn.price,0))||0,Oe=((Ar=le.additionalServices)==null?void 0:Ar.reduce((La,cn)=>La+(cn.price||0)*(cn.quantity||1),0))||0,nt=le.laborCost||0,wt=le.total||0,ft=wt-(le.remainingAmount||0),ht=wt?Math.min(100,Math.round(ft/wt*100)):0,bt=le.paymentStatus==="paid"?"bg-emerald-50 text-emerald-600 dark:bg-emerald-900/30 dark:text-emerald-300":"bg-amber-50 text-amber-600 dark:bg-amber-900/30 dark:text-amber-300",Ut=((It=le.partsUsed)==null?void 0:It.slice(0,2))||[],rr=(((Un=le.partsUsed)==null?void 0:Un.length)||0)-Ut.length,Jt=((en=le.additionalServices)==null?void 0:en.slice(0,2))||[],dr=(((Na=le.additionalServices)==null?void 0:Na.length)||0)-Jt.length;return i.jsxs("tr",{onClick:()=>Ke(le),className:"bg-white dark:bg-slate-800 hover:bg-slate-50 dark:hover:bg-slate-700/30 cursor-pointer transition-colors",children:[i.jsx("td",{className:"px-2 py-4 align-top",onClick:La=>La.stopPropagation(),children:i.jsx("input",{type:"checkbox",className:"rounded"})}),i.jsx("td",{className:"px-4 py-4 align-top",children:i.jsxs("div",{className:"space-y-0.5",children:[i.jsx("div",{className:"font-mono font-bold text-blue-600 dark:text-blue-400 text-sm",children:Il(le.id,ee==null?void 0:ee.work_order_prefix)}),i.jsxs("div",{className:"text-xs text-slate-500",children:[i.jsx("span",{children:"Ngy: "}),i.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:Bn(le.creationDate,!0)})]}),i.jsxs("div",{className:"text-xs text-cyan-600 dark:text-cyan-400",children:["NV: ",le.technicianName||"Cha phn cng"]})]})}),i.jsx("td",{className:"px-4 py-4 align-top",children:i.jsxs("div",{className:"space-y-0.5",children:[i.jsx("div",{className:"font-semibold text-base text-slate-900 dark:text-slate-100",children:le.customerName}),i.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:le.customerPhone}),i.jsxs("div",{className:"text-xs text-slate-500",children:[i.jsx("span",{className:"font-medium",children:"Xe: "}),i.jsx("span",{children:le.vehicleModel||"N/A"}),le.licensePlate&&i.jsxs("span",{className:"ml-1",children:["- ",le.licensePlate]})]}),i.jsx("div",{className:"text-xs text-slate-500 italic mt-1",children:le.issueDescription||"Khng c m t"})]})}),i.jsx("td",{className:"px-4 py-4 align-top",children:i.jsxs("div",{className:"space-y-2",children:[Ut.length>0&&i.jsxs("div",{children:[i.jsx("div",{className:"text-xs font-medium text-slate-600 dark:text-slate-400 mb-0.5",children:"Ph tng"}),i.jsxs("div",{className:"space-y-0.5",children:[Ut.map((La,cn)=>i.jsxs("div",{className:"text-xs text-slate-700 dark:text-slate-300",children:[" ",La.partName," x",La.quantity]},cn)),rr>0&&i.jsxs("div",{className:"text-xs text-slate-400",children:["+",rr," hng mc khc"]})]})]}),Jt.length>0&&i.jsxs("div",{children:[i.jsx("div",{className:"text-xs font-medium text-slate-600 dark:text-slate-400 mb-0.5",children:"Gia cng/t hng"}),i.jsxs("div",{className:"space-y-0.5",children:[Jt.map((La,cn)=>i.jsxs("div",{className:"text-xs text-slate-700 dark:text-slate-300",children:[" ",La.description," x",La.quantity||1]},cn)),dr>0&&i.jsxs("div",{className:"text-xs text-slate-400",children:["+",dr," dch v khc"]})]})]}),Ut.length===0&&Jt.length===0&&i.jsx("div",{className:"text-xs text-slate-500 italic",children:"Cha c chi tit"})]})}),i.jsx("td",{className:"px-4 py-4 align-top",children:i.jsxs("div",{className:"space-y-3 min-w-[220px]",children:[i.jsxs("div",{className:"flex flex-wrap gap-2 text-xs",children:[nt>0&&i.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-slate-100 dark:bg-slate-700 px-2 py-0.5 text-slate-600 dark:text-slate-200",children:["DV ",Ie(nt)]}),ve>0&&i.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-slate-100 dark:bg-slate-700 px-2 py-0.5 text-slate-600 dark:text-slate-200",children:["P/tng ",Ie(ve)]}),Oe>0&&i.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-slate-100 dark:bg-slate-700 px-2 py-0.5 text-slate-600 dark:text-slate-200",children:["Cng ",Ie(Oe)]}),le.discount&&le.discount>0&&i.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-red-50 dark:bg-red-900/30 px-2 py-0.5 text-red-600 dark:text-red-400",children:["Gim ",Ie(le.discount)]})]}),wt>0&&i.jsxs("div",{className:"space-y-1",children:[i.jsxs("div",{className:"flex items-center justify-between text-xs text-slate-500 dark:text-slate-400",children:[i.jsx("span",{children:" thu"}),i.jsxs("span",{className:"font-semibold text-slate-700 dark:text-slate-200",children:[Ie(Math.max(0,ft))," /"," ",Ie(wt)]})]}),i.jsx("div",{className:"h-2 w-full rounded-full bg-slate-100 dark:bg-slate-700",children:i.jsx("div",{className:`h-full rounded-full ${ht>=100?"bg-emerald-500":"bg-blue-500"}`,style:{width:`${ht}%`}})})]}),i.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-xs font-medium",children:[i.jsx(xje,{status:le.status}),i.jsx("span",{className:`px-2 py-0.5 rounded-full ${bt}`,children:le.paymentStatus==="paid"?" thanh ton":"Cha thanh ton"}),le.remainingAmount!==void 0&&le.remainingAmount>0&&i.jsxs("span",{className:"text-red-500",children:["Cn ",Ie(le.remainingAmount)]})]})]})}),i.jsx("td",{className:"px-4 py-4 align-top",onClick:La=>La.stopPropagation(),children:i.jsx("div",{className:"flex items-center justify-end gap-2",children:i.jsxs("div",{className:"relative service-row-menu",children:[i.jsx("button",{onClick:()=>fe(Le===le.id?null:le.id),"aria-haspopup":"menu","aria-expanded":Le===le.id,className:"px-3 py-2 border border-slate-200 dark:border-slate-600 rounded-lg text-slate-500 hover:text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700",children:i.jsx(__,{className:"w-4 h-4"})}),Le===le.id&&i.jsxs("div",{className:"absolute right-0 mt-2 w-48 rounded-lg border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-800 shadow-xl z-10",children:[i.jsxs("button",{onClick:()=>{Dr(le),fe(null)},className:"w-full flex items-center gap-2 px-4 py-2 text-sm text-slate-600 dark:text-slate-200 hover:bg-blue-50 dark:hover:bg-slate-700",children:[i.jsx(Kg,{className:"w-4 h-4"})," In phiu"]}),i.jsxs("button",{onClick:()=>{Cr(le.customerPhone||""),fe(null)},className:"w-full flex items-center gap-2 px-4 py-2 text-sm text-slate-600 dark:text-slate-200 hover:bg-blue-50 dark:hover:bg-slate-700",children:[i.jsx(l7,{className:"w-4 h-4"})," Gi khch"]}),!le.refunded&&i.jsx("button",{onClick:()=>{We(le),fe(null)},className:"w-full flex items-center gap-2 px-4 py-2 text-sm text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20",children:"Hy/Hon tin"})]})]})})})]},le.id)})})]})})}),Z&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[i.jsxs("div",{className:"sticky top-0 bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 px-6 py-4 flex items-center justify-between",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:"Mu sa cha thng dng"}),i.jsx("button",{onClick:()=>q(!1),className:"text-slate-400 hover:text-slate-600","aria-label":"ng",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"w-5 h-5",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),i.jsxs("div",{className:"p-6",children:[i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-4",children:"Chn mu sa cha  t ng in thng tin vo phiu sa cha"}),i.jsx("div",{className:"grid gap-4 sm:grid-cols-2",children:mr.map(le=>i.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg p-4 hover:shadow-md transition",children:[i.jsxs("div",{className:"flex items-start justify-between mb-2",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-slate-900 dark:text-slate-100",children:le.name}),i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:le.description}),i.jsxs("p",{className:"text-xs text-slate-400 mt-1",children:[le.duration," pht"]})]}),i.jsx("div",{className:"text-right",children:i.jsx("p",{className:"text-lg font-bold text-blue-600 dark:text-blue-400",children:Ie(le.laborCost+le.parts.reduce((ve,Oe)=>ve+Oe.price*Oe.quantity,0))})})]}),i.jsxs("div",{className:"mt-3 pt-3 border-t border-slate-200 dark:border-slate-700",children:[i.jsx("p",{className:"text-xs font-medium text-slate-600 dark:text-slate-300 mb-2",children:"Ph tng cn thit:"}),le.parts.map((ve,Oe)=>i.jsxs("div",{className:"flex justify-between text-xs text-slate-500 dark:text-slate-400",children:[i.jsxs("span",{children:[ve.name," x",ve.quantity," ",ve.unit]}),i.jsx("span",{children:Ie(ve.price*ve.quantity)})]},Oe)),i.jsxs("div",{className:"flex gap-2 mt-3",children:[i.jsx("button",{onClick:()=>vt(le),className:"flex-1 px-3 py-1.5 bg-blue-500 hover:bg-blue-600 text-white rounded text-sm",children:"p dng mu"}),i.jsx("button",{onClick:Kt,className:"px-3 py-1.5 bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-200 rounded text-sm",children:"To mi"}),i.jsx("button",{onClick:()=>tr(le),className:"px-3 py-1.5 bg-purple-50 dark:bg-purple-900/20 hover:bg-purple-100 dark:hover:bg-purple-900/30 text-purple-600 dark:text-purple-400 rounded text-sm",children:"Sa mu"})]})]})]},le.id))})]})]})}),W&&K&&i.jsx(mje,{order:K,onClose:()=>{R(!1),Q(void 0)},onSave:le=>{if(le.id&&(K!=null&&K.id))d(ve=>ve.map(Oe=>Oe.id===le.id?le:Oe));else{const ve={...le,id:`${(ee==null?void 0:ee.work_order_prefix)||"SC"}-${Date.now()}`};d(Oe=>[...Oe,ve])}R(!1),Q(void 0)},parts:O,partsLoading:p,customers:E,employees:D,upsertCustomer:n,setCashTransactions:a,setPaymentSources:s,paymentSources:l,currentBranchId:o,storeSettings:ee}),i.jsx(WD,{isOpen:z,onClose:()=>{U(!1),Q(void 0)},onSave:le=>{console.log("Mobile Work Order Data:",le),U(!1),Q(void 0)},workOrder:K,customers:E,parts:f||[],employees:D||[],currentBranchId:o}),Y&&F&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl w-full max-w-4xl max-h-[90vh] flex flex-col",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 px-6 py-4 flex items-center justify-between rounded-t-xl flex-shrink-0",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:"Xem trc phiu in"}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("button",{onClick:Yt,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg flex items-center gap-2 transition",children:[i.jsx(Kg,{className:"w-4 h-4"}),"In phiu"]}),i.jsx("button",{onClick:()=>{ne(!1),te(null)},className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-300","aria-label":"ng",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"w-5 h-5",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]})]}),i.jsx("div",{className:"flex-1 overflow-y-auto p-6 bg-slate-100 dark:bg-slate-900",children:i.jsx("div",{className:"bg-white shadow-lg mx-auto",style:{width:"148mm",minHeight:"210mm",color:"#000"},children:i.jsxs("div",{style:{padding:"10mm"},children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr auto 1fr",gap:"3mm",marginBottom:"4mm",alignItems:"start",borderBottom:"2px solid #3b82f6",paddingBottom:"3mm"},children:[(ee==null?void 0:ee.logo_url)&&i.jsx("div",{style:{marginRight:"4mm"},children:i.jsx("img",{src:ee.logo_url,alt:"Logo",style:{height:"18mm",width:"auto",objectFit:"contain"}})}),i.jsxs("div",{style:{fontSize:"8.5pt",lineHeight:"1.4",flex:1},children:[i.jsx("div",{style:{fontWeight:"bold",fontSize:"11pt",marginBottom:"1mm",color:"#1e40af"},children:(ee==null?void 0:ee.store_name)||"Nhn Lm SmartCare"}),i.jsxs("div",{style:{color:"#000"},children:[""," ",(ee==null?void 0:ee.address)||"p Ph Li B, X Long Ph Thun, ng Thp"]}),i.jsxs("div",{style:{color:"#000"},children:[" ",(ee==null?void 0:ee.phone)||"0947.747.907"]}),(ee==null?void 0:ee.email)&&i.jsxs("div",{style:{color:"#000"},children:[" ",ee.email]})]}),i.jsx("div",{style:{fontSize:"8pt",lineHeight:"1.4",textAlign:"right"},children:(ee==null?void 0:ee.bank_name)&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{fontWeight:"bold",marginBottom:"1mm",color:"#000"},children:[" ",ee.bank_name]}),ee.bank_account_number&&i.jsxs("div",{style:{color:"#000"},children:["STK: ",ee.bank_account_number]}),ee.bank_account_holder&&i.jsx("div",{style:{color:"#000",fontSize:"7.5pt"},children:ee.bank_account_holder}),ee.bank_qr_url&&i.jsx("div",{style:{marginTop:"2mm",display:"inline-block"},children:i.jsx("img",{src:ee.bank_qr_url,alt:"QR Banking",style:{height:"15mm",width:"15mm",objectFit:"contain"}})})]})})]}),i.jsxs("div",{style:{marginBottom:"4mm"},children:[i.jsx("div",{style:{textAlign:"center",marginBottom:"2mm"},children:i.jsx("h1",{style:{fontSize:"16pt",fontWeight:"bold",margin:"0",textTransform:"uppercase",color:"#1e40af"},children:"PHIU DCH V SA CHA"})}),i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"9pt",color:"#666"},children:[i.jsx("div",{children:new Date(F.creationDate).toLocaleString("vi-VN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}),i.jsxs("div",{style:{fontWeight:"bold"},children:["M:"," ",Il(F.id,ee==null?void 0:ee.work_order_prefix)]})]})]}),i.jsxs("div",{style:{border:"1px solid #ddd",padding:"3mm",marginBottom:"3mm",borderRadius:"2mm",backgroundColor:"#f8fafc",color:"#000",fontSize:"9pt"},children:[i.jsxs("div",{style:{display:"flex",gap:"4mm",marginBottom:"1.5mm"},children:[i.jsxs("div",{style:{flex:1},children:[i.jsx("span",{style:{fontWeight:"bold"},children:"Khch hng:"})," ",F.customerName]}),i.jsxs("div",{style:{flex:"0 0 auto"},children:[i.jsx("span",{style:{fontWeight:"bold"},children:"ST:"})," ",F.customerPhone]})]}),i.jsxs("div",{style:{display:"flex",gap:"4mm"},children:[i.jsxs("div",{style:{flex:1},children:[i.jsx("span",{style:{fontWeight:"bold"},children:"Loi xe:"})," ",F.vehicleModel]}),i.jsxs("div",{style:{flex:"0 0 auto"},children:[i.jsx("span",{style:{fontWeight:"bold"},children:"Bin s:"})," ",F.licensePlate]})]})]}),i.jsx("div",{style:{border:"1px solid #ddd",padding:"4mm",marginBottom:"4mm",borderRadius:"2mm",color:"#000"},children:i.jsxs("div",{style:{display:"flex",gap:"3mm"},children:[i.jsx("div",{style:{fontWeight:"bold",minWidth:"20%",flexShrink:0},children:"M t s c:"}),i.jsx("div",{style:{flex:1,whiteSpace:"pre-wrap"},children:F.issueDescription||"Khng c m t"})]})}),F.partsUsed&&F.partsUsed.length>0&&i.jsxs("div",{style:{marginBottom:"4mm",color:"#000"},children:[i.jsx("p",{style:{fontWeight:"bold",margin:"0 0 2mm 0",fontSize:"11pt"},children:"Ph tng s dng:"}),i.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",border:"1px solid #ddd"},children:[i.jsx("thead",{children:i.jsxs("tr",{style:{backgroundColor:"#f5f5f5"},children:[i.jsx("th",{style:{border:"1px solid #ddd",padding:"2mm",textAlign:"left",fontSize:"10pt"},children:"Tn ph tng"}),i.jsx("th",{style:{border:"1px solid #ddd",padding:"2mm",textAlign:"center",fontSize:"10pt",width:"15%"},children:"SL"}),i.jsx("th",{style:{border:"1px solid #ddd",padding:"2mm",textAlign:"right",fontSize:"10pt",width:"25%"},children:"n gi"}),i.jsx("th",{style:{border:"1px solid #ddd",padding:"2mm",textAlign:"right",fontSize:"10pt",width:"25%"},children:"Thnh tin"})]})}),i.jsx("tbody",{children:F.partsUsed.map((le,ve)=>i.jsxs("tr",{children:[i.jsx("td",{style:{border:"1px solid #ddd",padding:"2mm",fontSize:"10pt"},children:le.partName}),i.jsx("td",{style:{border:"1px solid #ddd",padding:"2mm",textAlign:"center",fontSize:"10pt"},children:le.quantity}),i.jsx("td",{style:{border:"1px solid #ddd",padding:"2mm",textAlign:"right",fontSize:"10pt"},children:Ie(le.price)}),i.jsx("td",{style:{border:"1px solid #ddd",padding:"2mm",textAlign:"right",fontSize:"10pt",fontWeight:"bold"},children:Ie(le.price*le.quantity)})]},ve))})]})]}),F.additionalServices&&F.additionalServices.length>0&&i.jsxs("div",{style:{marginBottom:"4mm",color:"#000"},children:[i.jsx("p",{style:{fontWeight:"bold",margin:"0 0 2mm 0",fontSize:"11pt",color:"#000"},children:"Dch v b sung:"}),i.jsx("ul",{style:{margin:"0",paddingLeft:"5mm",color:"#000"},children:F.additionalServices.map((le,ve)=>i.jsxs("li",{style:{marginBottom:"1mm"},children:[le.description," -"," ",Ie(le.price)," x"," ",le.quantity]},ve))})]}),i.jsx("div",{style:{border:"1px solid #ddd",padding:"4mm",marginBottom:"4mm",borderRadius:"2mm",backgroundColor:"#f9f9f9",color:"#000"},children:i.jsx("table",{style:{width:"100%",borderSpacing:"0",color:"#000"},children:i.jsxs("tbody",{children:[i.jsxs("tr",{children:[i.jsx("td",{style:{fontWeight:"bold",paddingBottom:"2mm",fontSize:"10pt"},children:"Tin ph tng:"}),i.jsx("td",{style:{textAlign:"right",paddingBottom:"2mm",fontSize:"10pt"},children:Ie(((Rr=F.partsUsed)==null?void 0:Rr.reduce((le,ve)=>le+ve.price*ve.quantity,0))||0)})]}),i.jsxs("tr",{children:[i.jsx("td",{style:{fontWeight:"bold",paddingBottom:"2mm",fontSize:"10pt"},children:"Ph dch v:"}),i.jsx("td",{style:{textAlign:"right",paddingBottom:"2mm",fontSize:"10pt"},children:Ie(F.laborCost||0)})]}),i.jsxs("tr",{children:[i.jsx("td",{style:{fontWeight:"bold",paddingBottom:"2mm",fontSize:"10pt"},children:"Gi cng/t hng:"}),i.jsx("td",{style:{textAlign:"right",paddingBottom:"2mm",fontSize:"10pt"},children:Ie(((Sn=F.additionalServices)==null?void 0:Sn.reduce((le,ve)=>le+(ve.price||0)*(ve.quantity||1),0))||0)})]}),F.discount!=null&&F.discount>0&&i.jsxs("tr",{children:[i.jsx("td",{style:{fontWeight:"bold",paddingBottom:"2mm",fontSize:"10pt",color:"#e74c3c"},children:"Gim gi:"}),i.jsxs("td",{style:{textAlign:"right",paddingBottom:"2mm",fontSize:"10pt",color:"#e74c3c"},children:["-",Ie(F.discount)]})]}),i.jsxs("tr",{style:{borderTop:"2px solid #333"},children:[i.jsx("td",{style:{fontWeight:"bold",paddingTop:"2mm",fontSize:"12pt"},children:"TNG CNG:"}),i.jsxs("td",{style:{textAlign:"right",paddingTop:"2mm",fontSize:"12pt",fontWeight:"bold",color:"#2563eb"},children:[Ie(F.total)," "]})]}),F.totalPaid!=null&&F.totalPaid>0&&i.jsxs("tr",{children:[i.jsx("td",{style:{fontWeight:"bold",paddingTop:"2mm",fontSize:"10pt",color:"#16a34a"},children:" thanh ton:"}),i.jsx("td",{style:{textAlign:"right",paddingTop:"2mm",fontSize:"10pt",color:"#16a34a"},children:Ie(F.totalPaid)})]}),F.remainingAmount!=null&&F.remainingAmount>0&&i.jsxs("tr",{children:[i.jsx("td",{style:{fontWeight:"bold",fontSize:"11pt",color:"#dc2626"},children:"Cn li:"}),i.jsx("td",{style:{textAlign:"right",fontSize:"11pt",fontWeight:"bold",color:"#dc2626"},children:Ie(F.remainingAmount)})]}),F.paymentMethod&&i.jsxs("tr",{children:[i.jsx("td",{style:{paddingTop:"2mm",fontSize:"9pt",color:"#666"},children:"Hnh thc thanh ton:"}),i.jsx("td",{style:{textAlign:"right",paddingTop:"2mm",fontSize:"9pt",color:"#666"},children:F.paymentMethod==="cash"?"Tin mt":F.paymentMethod==="bank"?"Chuyn khon":F.paymentMethod})]})]})})}),i.jsx("div",{style:{marginTop:"8mm",paddingTop:"4mm",borderTop:"1px dashed #999",color:"#000"},children:i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"10pt"},children:[i.jsxs("div",{style:{textAlign:"center",width:"45%"},children:[i.jsx("p",{style:{fontWeight:"bold",margin:"0 0 10mm 0",color:"#000"},children:"Khch hng"}),i.jsx("p",{style:{margin:"0",fontSize:"9pt",color:"#666"},children:"(K v ghi r h tn)"})]}),i.jsxs("div",{style:{textAlign:"center",width:"45%"},children:[i.jsx("p",{style:{fontWeight:"bold",margin:"0 0 10mm 0",color:"#000"},children:"Nhn vin"}),i.jsx("p",{style:{margin:"0",fontSize:"9pt",color:"#666"},children:F.technicianName||"(K v ghi r h tn)"})]})]})}),i.jsxs("div",{style:{marginTop:"4mm",padding:"3mm",backgroundColor:"#fff9e6",border:"1px solid #ffd700",borderRadius:"2mm",fontSize:"9pt",textAlign:"center",color:"#000"},children:[i.jsx("p",{style:{margin:"0",fontStyle:"italic",color:"#000"},children:"Cm n qu khch  s dng dch v!"}),i.jsx("p",{style:{margin:"1mm 0 0 0",fontStyle:"italic",color:"#000"},children:"Vui lng gi phiu ny  i chiu khi nhn xe"})]}),i.jsxs("div",{style:{marginTop:"3mm",padding:"2mm",fontSize:"8pt",color:"#666",borderTop:"1px solid #e5e7eb",lineHeight:"1.4"},children:[i.jsx("p",{style:{margin:"0 0 1mm 0",fontWeight:"bold"},children:"Chnh sch bo hnh:"}),i.jsxs("ul",{style:{margin:"0",paddingLeft:"5mm",listStyleType:"disc"},children:[i.jsx("li",{children:"Bo hnh p dng cho ph tng chnh hng v li k thut do th"}),i.jsx("li",{children:"Khng bo hnh i vi va chm, ng xe, ngp nc sau khi nhn xe"}),i.jsx("li",{children:"Mang theo phiu ny khi n bo hnh. Lin h hotline nu c thc mc"})]})]})]})})})]})}),F&&i.jsxs("div",{id:"work-order-receipt",className:"hidden print:block",style:{width:"148mm",margin:"0 auto",padding:"10mm",fontFamily:"Arial, sans-serif",fontSize:"11pt",color:"#000",backgroundColor:"#fff"},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start",borderBottom:"2px solid #3b82f6",paddingBottom:"3mm",marginBottom:"4mm"},children:[(ee==null?void 0:ee.logo_url)&&i.jsx("div",{style:{marginRight:"4mm"},children:i.jsx("img",{src:ee.logo_url,alt:"Logo",style:{height:"18mm",width:"auto",objectFit:"contain"}})}),i.jsxs("div",{style:{fontSize:"8.5pt",lineHeight:"1.4",flex:1},children:[i.jsx("div",{style:{fontWeight:"bold",fontSize:"11pt",marginBottom:"1mm",color:"#1e40af"},children:(ee==null?void 0:ee.store_name)||"Nhn Lm SmartCare"}),i.jsxs("div",{style:{color:"#000"},children:[""," ",(ee==null?void 0:ee.address)||"p Ph Li B, X Long Ph Thun, ng Thp"]}),i.jsxs("div",{style:{color:"#000"},children:[" ",(ee==null?void 0:ee.phone)||"0947.747.907"]}),(ee==null?void 0:ee.email)&&i.jsxs("div",{style:{color:"#000"},children:[" ",ee.email]})]}),i.jsx("div",{style:{fontSize:"8pt",lineHeight:"1.4",textAlign:"right"},children:(ee==null?void 0:ee.bank_name)&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{fontWeight:"bold",marginBottom:"1mm",color:"#000"},children:[" ",ee.bank_name]}),ee.bank_account_number&&i.jsxs("div",{style:{color:"#000"},children:["STK: ",ee.bank_account_number]}),ee.bank_account_holder&&i.jsx("div",{style:{color:"#000",fontSize:"7.5pt"},children:ee.bank_account_holder}),ee.bank_qr_url&&i.jsx("div",{style:{marginTop:"2mm",display:"inline-block"},children:i.jsx("img",{src:ee.bank_qr_url,alt:"QR Banking",style:{height:"15mm",width:"15mm",objectFit:"contain"}})})]})})]}),i.jsxs("div",{style:{marginBottom:"4mm"},children:[i.jsx("div",{style:{textAlign:"center",marginBottom:"2mm"},children:i.jsx("h1",{style:{fontSize:"16pt",fontWeight:"bold",margin:"0",textTransform:"uppercase",color:"#1e40af"},children:"PHIU DCH V SA CHA"})}),i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"9pt",color:"#666"},children:[i.jsx("div",{children:new Date(F.creationDate).toLocaleString("vi-VN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}),i.jsxs("div",{style:{fontWeight:"bold"},children:["M:"," ",Il(F.id,ee==null?void 0:ee.work_order_prefix)]})]})]}),i.jsx("div",{style:{border:"1px solid #ddd",padding:"4mm",marginBottom:"4mm",borderRadius:"2mm"},children:i.jsx("table",{style:{width:"100%",borderSpacing:"0"},children:i.jsxs("tbody",{children:[i.jsxs("tr",{children:[i.jsx("td",{style:{fontWeight:"bold",width:"20%",paddingBottom:"2mm"},children:"Khch hng:"}),i.jsx("td",{style:{paddingBottom:"2mm",width:"30%"},children:F.customerName}),i.jsx("td",{style:{fontWeight:"bold",width:"15%",paddingBottom:"2mm",paddingLeft:"3mm"},children:"Thanh Lc"}),i.jsx("td",{style:{paddingBottom:"2mm"},children:F.customerPhone})]}),i.jsxs("tr",{children:[i.jsx("td",{style:{fontWeight:"bold",paddingBottom:"2mm"},children:"Loi xe:"}),i.jsx("td",{style:{paddingBottom:"2mm"},colSpan:3,children:F.vehicleModel})]}),i.jsxs("tr",{children:[i.jsx("td",{style:{fontWeight:"bold"},children:"Bin s:"}),i.jsx("td",{colSpan:3,children:F.licensePlate})]})]})})}),i.jsx("div",{style:{border:"1px solid #ddd",padding:"4mm",marginBottom:"4mm",borderRadius:"2mm"},children:i.jsxs("div",{style:{display:"flex",gap:"3mm"},children:[i.jsx("div",{style:{fontWeight:"bold",minWidth:"20%",flexShrink:0},children:"M t s c:"}),i.jsx("div",{style:{flex:1,whiteSpace:"pre-wrap"},children:F.issueDescription||"Khng c m t"})]})}),F.partsUsed&&F.partsUsed.length>0&&i.jsxs("div",{style:{marginBottom:"4mm"},children:[i.jsx("p",{style:{fontWeight:"bold",margin:"0 0 2mm 0",fontSize:"11pt"},children:"Ph tng s dng:"}),i.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",border:"1px solid #ddd"},children:[i.jsx("thead",{children:i.jsxs("tr",{style:{backgroundColor:"#f5f5f5"},children:[i.jsx("th",{style:{border:"1px solid #ddd",padding:"2mm",textAlign:"left",fontSize:"10pt"},children:"Tn ph tng"}),i.jsx("th",{style:{border:"1px solid #ddd",padding:"2mm",textAlign:"center",fontSize:"10pt",width:"15%"},children:"SL"}),i.jsx("th",{style:{border:"1px solid #ddd",padding:"2mm",textAlign:"right",fontSize:"10pt",width:"25%"},children:"n gi"}),i.jsx("th",{style:{border:"1px solid #ddd",padding:"2mm",textAlign:"right",fontSize:"10pt",width:"25%"},children:"Thnh tin"})]})}),i.jsx("tbody",{children:F.partsUsed.map((le,ve)=>i.jsxs("tr",{children:[i.jsx("td",{style:{border:"1px solid #ddd",padding:"2mm",fontSize:"10pt"},children:le.partName}),i.jsx("td",{style:{border:"1px solid #ddd",padding:"2mm",textAlign:"center",fontSize:"10pt"},children:le.quantity}),i.jsx("td",{style:{border:"1px solid #ddd",padding:"2mm",textAlign:"right",fontSize:"10pt"},children:Ie(le.price)}),i.jsx("td",{style:{border:"1px solid #ddd",padding:"2mm",textAlign:"right",fontSize:"10pt",fontWeight:"bold"},children:Ie(le.price*le.quantity)})]},ve))})]})]}),F.additionalServices&&F.additionalServices.length>0&&i.jsxs("div",{style:{marginBottom:"4mm"},children:[i.jsx("p",{style:{fontWeight:"bold",margin:"0 0 2mm 0",fontSize:"11pt"},children:"Dch v b sung:"}),i.jsx("ul",{style:{margin:"0",paddingLeft:"5mm"},children:F.additionalServices.map((le,ve)=>i.jsxs("li",{style:{marginBottom:"1mm"},children:[le.description," - ",Ie(le.price)," x"," ",le.quantity]},ve))})]}),i.jsx("div",{style:{border:"1px solid #ddd",padding:"4mm",marginBottom:"4mm",borderRadius:"2mm",backgroundColor:"#f9f9f9"},children:i.jsx("table",{style:{width:"100%",borderSpacing:"0"},children:i.jsxs("tbody",{children:[i.jsxs("tr",{children:[i.jsx("td",{style:{fontWeight:"bold",paddingBottom:"2mm",fontSize:"10pt"},children:"Tin ph tng:"}),i.jsx("td",{style:{textAlign:"right",paddingBottom:"2mm",fontSize:"10pt"},children:Ie(((we=F.partsUsed)==null?void 0:we.reduce((le,ve)=>le+ve.price*ve.quantity,0))||0)})]}),i.jsxs("tr",{children:[i.jsx("td",{style:{fontWeight:"bold",paddingBottom:"2mm",fontSize:"10pt"},children:"Gi cng/t hng:"}),i.jsx("td",{style:{textAlign:"right",paddingBottom:"2mm",fontSize:"10pt"},children:Ie(((Ne=F.additionalServices)==null?void 0:Ne.reduce((le,ve)=>le+(ve.price||0)*(ve.quantity||1),0))||0)})]}),F.discount!=null&&F.discount>0&&i.jsxs("tr",{children:[i.jsx("td",{style:{fontWeight:"bold",paddingBottom:"2mm",fontSize:"10pt",color:"#e74c3c"},children:"Gim gi:"}),i.jsxs("td",{style:{textAlign:"right",paddingBottom:"2mm",fontSize:"10pt",color:"#e74c3c"},children:["-",Ie(F.discount)]})]}),i.jsxs("tr",{style:{borderTop:"2px solid #333"},children:[i.jsx("td",{style:{fontWeight:"bold",paddingTop:"2mm",fontSize:"12pt"},children:"TNG CNG:"}),i.jsxs("td",{style:{textAlign:"right",paddingTop:"2mm",fontSize:"12pt",fontWeight:"bold",color:"#2563eb"},children:[Ie(F.total)," "]})]}),F.totalPaid!=null&&F.totalPaid>0&&i.jsxs("tr",{children:[i.jsx("td",{style:{fontWeight:"bold",paddingTop:"2mm",fontSize:"10pt",color:"#16a34a"},children:" thanh ton:"}),i.jsx("td",{style:{textAlign:"right",paddingTop:"2mm",fontSize:"10pt",color:"#16a34a"},children:Ie(F.totalPaid)})]}),F.remainingAmount!=null&&F.remainingAmount>0&&i.jsxs("tr",{children:[i.jsx("td",{style:{fontWeight:"bold",fontSize:"11pt",color:"#dc2626"},children:"Cn li:"}),i.jsx("td",{style:{textAlign:"right",fontSize:"11pt",fontWeight:"bold",color:"#dc2626"},children:Ie(F.remainingAmount)})]}),F.paymentMethod&&i.jsxs("tr",{children:[i.jsx("td",{style:{paddingTop:"2mm",fontSize:"9pt",color:"#666"},children:"Hnh thc thanh ton:"}),i.jsx("td",{style:{textAlign:"right",paddingTop:"2mm",fontSize:"9pt",color:"#666"},children:F.paymentMethod==="cash"?"Tin mt":F.paymentMethod==="bank"?"Chuyn khon":F.paymentMethod})]})]})})}),i.jsx("div",{style:{marginTop:"8mm",paddingTop:"4mm",borderTop:"1px dashed #999"},children:i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"10pt"},children:[i.jsxs("div",{style:{textAlign:"center",width:"45%"},children:[i.jsx("p",{style:{fontWeight:"bold",margin:"0 0 10mm 0"},children:"Khch hng"}),i.jsx("p",{style:{margin:"0",fontSize:"9pt",color:"#666"},children:"(K v ghi r h tn)"})]}),i.jsxs("div",{style:{textAlign:"center",width:"45%"},children:[i.jsx("p",{style:{fontWeight:"bold",margin:"0 0 10mm 0"},children:"Nhn vin"}),i.jsx("p",{style:{margin:"0",fontSize:"9pt",color:"#666"},children:F.technicianName||"(K v ghi r h tn)"})]})]})}),i.jsxs("div",{style:{marginTop:"4mm",padding:"3mm",backgroundColor:"#fff9e6",border:"1px solid #ffd700",borderRadius:"2mm",fontSize:"9pt",textAlign:"center"},children:[i.jsx("p",{style:{margin:"0",fontStyle:"italic"},children:"Cm n qu khch  s dng dch v!"}),i.jsx("p",{style:{margin:"1mm 0 0 0",fontStyle:"italic"},children:"Vui lng gi phiu ny  i chiu khi nhn xe"})]}),i.jsxs("div",{style:{marginTop:"3mm",padding:"2mm",fontSize:"8pt",color:"#666",borderTop:"1px solid #e5e7eb",lineHeight:"1.4"},children:[i.jsx("p",{style:{margin:"0 0 1mm 0",fontWeight:"bold"},children:"Chnh sch bo hnh:"}),i.jsxs("ul",{style:{margin:"0",paddingLeft:"5mm",listStyleType:"disc"},children:[i.jsx("li",{children:"Bo hnh p dng cho ph tng chnh hng v li k thut do th"}),i.jsx("li",{children:"Khng bo hnh i vi va chm, ng xe, ngp nc sau khi nhn xe"}),i.jsx("li",{children:"Mang theo phiu ny khi n bo hnh. Lin h hotline nu c thc mc"})]})]})]}),je&&me&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl w-full max-w-md",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 px-6 py-4 flex items-center justify-between rounded-t-xl",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:"Xc nhn hy phiu"}),i.jsx("button",{onClick:()=>{be(!1),se(null)},className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-300","aria-label":"ng",children:""})]}),i.jsxs("div",{className:"p-6 space-y-4",children:[i.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4",children:[i.jsxs("p",{className:"text-sm text-yellow-800 dark:text-yellow-200",children:[" ",i.jsx("strong",{children:"Cnh bo:"})," Hnh ng ny s:"]}),i.jsxs("ul",{className:"mt-2 text-sm text-yellow-700 dark:text-yellow-300 list-disc list-inside space-y-1",children:[i.jsx("li",{children:"Hon tr tn kho cc ph tng  s dng"}),i.jsxs("li",{children:["Hon tin ",Ie(me.totalPaid||0)," ","cho khch"]}),i.jsx("li",{children:'nh du phiu l " hy"'})]})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["L do hy phiu ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("textarea",{value:ie,onChange:le=>Te(le.target.value),placeholder:"Vd: Khch hng khng ng  chi ph, sa nhm xe...",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 resize-none",rows:3})]}),i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 rounded-lg p-3 space-y-2 text-sm",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Phiu:"}),i.jsxs("span",{className:"font-medium text-slate-900 dark:text-slate-100",children:["#",Il(me.id,ee==null?void 0:ee.work_order_prefix).split("-").pop()]})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Khch hng:"}),i.jsx("span",{className:"font-medium text-slate-900 dark:text-slate-100",children:me.customerName})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Ph tng:"}),i.jsxs("span",{className:"font-medium text-slate-900 dark:text-slate-100",children:[((Me=me.partsUsed)==null?void 0:Me.length)||0," mn"]})]}),i.jsxs("div",{className:"flex justify-between border-t border-slate-200 dark:border-slate-600 pt-2",children:[i.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"S tin hon:"}),i.jsx("span",{className:"font-bold text-red-600 dark:text-red-400",children:Ie(me.totalPaid||0)})]})]})]}),i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 flex justify-end gap-3 rounded-b-xl",children:[i.jsx("button",{onClick:()=>{be(!1),se(null)},className:"px-4 py-2 text-slate-700 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-600 rounded-lg font-medium",children:"Hy b"}),i.jsx("button",{onClick:Qt,disabled:!ie.trim(),className:"px-4 py-2 bg-red-600 hover:bg-red-700 disabled:bg-red-300 dark:disabled:bg-red-900 text-white rounded-lg font-medium disabled:cursor-not-allowed",children:"Xc nhn hy phiu"})]})]})}),rt&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl w-full max-w-3xl max-h-[90vh] overflow-hidden flex flex-col",children:[i.jsxs("div",{className:"px-6 py-4 border-b border-slate-200 dark:border-slate-700 flex items-center justify-between",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:De?"Sa mu sa cha":"To mu sa cha mi"}),i.jsx("button",{onClick:()=>{st(!1),ye(null)},className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-300",children:i.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),i.jsx("div",{className:"flex-1 overflow-y-auto px-6 py-4",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:["Tn mu ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"text",placeholder:"VD: Thay du ng c",value:dt.name,onChange:le=>et({...dt,name:le.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"M t"}),i.jsx("textarea",{rows:2,placeholder:"M t chi tit dch v...",value:dt.description,onChange:le=>et({...dt,description:le.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 resize-none"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Thi gian (pht)"}),i.jsx("input",{type:"number",min:"5",step:"5",value:dt.duration,onChange:le=>et({...dt,duration:Number(le.target.value)}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:["Chi ph cng ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"number",min:"0",step:"10000",placeholder:"0",value:dt.laborCost||"",onChange:le=>et({...dt,laborCost:Number(le.target.value)}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Ph tng cn thit"}),i.jsxs("button",{onClick:Nr,className:"px-3 py-1 bg-blue-500 hover:bg-blue-600 text-white rounded text-sm flex items-center gap-1",children:[i.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Thm ph tng"]})]}),dt.parts.length===0?i.jsx("div",{className:"text-center py-8 text-slate-500 dark:text-slate-400 text-sm",children:'Cha c ph tng no. Nhn "Thm ph tng"  thm.'}):i.jsx("div",{className:"space-y-2",children:dt.parts.map((le,ve)=>i.jsxs("div",{className:"flex gap-2 items-start p-3 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:[i.jsxs("div",{className:"flex-1 grid grid-cols-4 gap-2",children:[i.jsxs("div",{className:"col-span-2 relative template-part-input",children:[i.jsx("input",{type:"text",placeholder:"Tn ph tng",value:le.name,onChange:Oe=>Ot(ve,"name",Oe.target.value),onFocus:()=>{Ve(ve),Mt(le.name)},className:"w-full px-2 py-1.5 border border-slate-300 dark:border-slate-600 rounded bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 text-sm"}),lt===ve&&i.jsx("div",{className:"absolute z-[60] top-full left-0 right-0 mt-1 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded-lg shadow-lg max-h-[200px] overflow-y-auto",children:$r.length>0?$r.map(Oe=>{var nt,wt;return i.jsx("button",{type:"button",onClick:()=>hr(ve,Oe),className:"w-full px-3 py-2 text-left hover:bg-slate-100 dark:hover:bg-slate-700 border-b border-slate-200 dark:border-slate-700 last:border-b-0",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("div",{className:"font-medium text-slate-900 dark:text-slate-100 text-sm",children:Oe.name}),i.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:["Tn kho:"," ",((nt=Oe.stock)==null?void 0:nt[o||""])||0," ","ci"]})]}),i.jsx("div",{className:"text-sm font-medium text-blue-600 dark:text-blue-400",children:Ie(((wt=Oe.retailPrice)==null?void 0:wt[o||""])||0)})]})},Oe.id)}):i.jsx("div",{className:"px-3 py-4 text-center text-sm text-slate-500 dark:text-slate-400",children:!f||f.length===0?"Khng c ph tng trong kho. Vui lng thm ph tng trc.":"Khng tm thy ph tng ph hp"})})]}),i.jsx("input",{type:"number",min:"1",placeholder:"SL",value:le.quantity,onChange:Oe=>Ot(ve,"quantity",Number(Oe.target.value)),className:"px-2 py-1.5 border border-slate-300 dark:border-slate-600 rounded bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 text-sm"}),i.jsx("input",{type:"number",min:"0",step:"1000",placeholder:"n gi",value:le.price||"",onChange:Oe=>Ot(ve,"price",Number(Oe.target.value)),className:"px-2 py-1.5 border border-slate-300 dark:border-slate-600 rounded bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 text-sm"})]}),i.jsx("button",{onClick:()=>Ge(ve),className:"p-1.5 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded",title:"Xa",children:i.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},ve))})]}),(dt.laborCost>0||dt.parts.length>0)&&i.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:i.jsxs("div",{className:"text-sm space-y-1",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Chi ph cng:"}),i.jsx("span",{className:"font-medium text-slate-900 dark:text-slate-100",children:Ie(dt.laborCost)})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Ph tng:"}),i.jsx("span",{className:"font-medium text-slate-900 dark:text-slate-100",children:Ie(dt.parts.reduce((le,ve)=>le+ve.price*ve.quantity,0))})]}),i.jsxs("div",{className:"flex justify-between pt-2 border-t border-blue-200 dark:border-blue-700",children:[i.jsx("span",{className:"font-medium text-slate-900 dark:text-slate-100",children:"Tng c tnh:"}),i.jsx("span",{className:"font-bold text-blue-600 dark:text-blue-400",children:Ie(dt.laborCost+dt.parts.reduce((le,ve)=>le+ve.price*ve.quantity,0))})]})]})})]})}),i.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-700 px-6 py-4 flex justify-end gap-3 bg-slate-50 dark:bg-slate-800/50",children:[i.jsx("button",{onClick:()=>{st(!1),ye(null)},className:"px-4 py-2 bg-slate-200 dark:bg-slate-700 hover:bg-slate-300 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-200 rounded-lg",children:"Hy"}),i.jsx("button",{onClick:Pr,className:"px-6 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg font-medium",children:De?"Cp nht":"To mu"})]})]})})]})}const mje=({order:e,onClose:t,onSave:r,parts:n,partsLoading:a,customers:s,employees:l,upsertCustomer:o,setCashTransactions:c,setPaymentSources:d,paymentSources:f,currentBranchId:p,storeSettings:y})=>{const g=["Honda Wave RSX","Honda Wave Alpha","Honda Blade","Honda Future","Honda Winner X","Honda Vision","Honda Air Blade","Honda SH Mode","Honda SH 125i","Honda SH 150i","Honda SH 160i","Honda SH 350i","Honda Vario","Honda Lead","Honda PCX","Honda ADV","Yamaha Exciter","Yamaha Sirius","Yamaha Jupiter","Yamaha Grande","Yamaha Janus","Yamaha FreeGo","Yamaha Latte","Yamaha NVX","Yamaha XSR","Suzuki Raider","Suzuki Axelo","Suzuki Satria","Suzuki GD110","Suzuki Impulse","Suzuki Address","Suzuki Revo","SYM Elite","SYM Galaxy","SYM Star","SYM Attila","SYM Angela","SYM Passing","Piaggio Liberty","Piaggio Medley","Vespa Sprint","Vespa Primavera","Vespa GTS","VinFast Klara","VinFast Evo200","VinFast Ludo","VinFast Impes","VinFast Theon","Khc"],{profile:N}=Ic(),{mutateAsync:w}=cje(),{mutateAsync:k}=dje(),[S,O]=T.useState(()=>e!=null&&e.id?e:{id:(e==null?void 0:e.id)||"",customerName:(e==null?void 0:e.customerName)||"",customerPhone:(e==null?void 0:e.customerPhone)||"",vehicleModel:(e==null?void 0:e.vehicleModel)||"",licensePlate:(e==null?void 0:e.licensePlate)||"",vehicleId:(e==null?void 0:e.vehicleId)||"",issueDescription:(e==null?void 0:e.issueDescription)||"",technicianName:(e==null?void 0:e.technicianName)||"",status:(e==null?void 0:e.status)||"Tip nhn",laborCost:(e==null?void 0:e.laborCost)||0,discount:(e==null?void 0:e.discount)||0,partsUsed:(e==null?void 0:e.partsUsed)||[],total:(e==null?void 0:e.total)||0,branchId:(e==null?void 0:e.branchId)||p,paymentStatus:(e==null?void 0:e.paymentStatus)||"unpaid",creationDate:(e==null?void 0:e.creationDate)||new Date().toISOString()}),[E,D]=T.useState(""),[H,W]=T.useState([]),[R,z]=T.useState(!1),[U,Z]=T.useState(0),[q,K]=T.useState(!1),[Q,re]=T.useState(!1),[ae,de]=T.useState(0),[he,Se]=T.useState(!1),[ke,Le]=T.useState(!1),[fe,F]=T.useState({name:"",phone:"",vehicleModel:"",licensePlate:""}),[te,Y]=T.useState(""),[ne,ee]=T.useState(!1),[Ce,me]=T.useState(!1),[se,je]=T.useState({model:"",licensePlate:""}),be=s.find(Ge=>Ge.phone===S.customerPhone),ie=(be==null?void 0:be.vehicles)||[];ie.length>1;const[Te,De]=T.useState("amount"),[ye,rt]=T.useState(0),[st,dt]=T.useState(!1),[et,lt]=T.useState([]),[Ve,Vt]=T.useState({description:"",quantity:1,price:0,costPrice:0});T.useEffect(()=>{e!=null&&e.partsUsed?W(e.partsUsed):W([]),e!=null&&e.customerName?Y(e.customerName):Y(""),e!=null&&e.additionalServices?lt(e.additionalServices):lt([]),e!=null&&e.depositAmount?(de(e.depositAmount),Se(!0)):(de(0),Se(!1)),e!=null&&e.additionalPayment?(Z(e.additionalPayment),K(!0)):(Z(0),K(!1)),De("amount"),rt(0)},[e]);const Mt=T.useMemo(()=>te.trim()?s.filter(Ge=>{var Ot;return Ge.name.toLowerCase().includes(te.toLowerCase())||((Ot=Ge.phone)==null?void 0:Ot.toLowerCase().includes(te.toLowerCase()))}):s.slice(0,10),[s,te]);T.useEffect(()=>{const Ge=Ot=>{const hr=Ot.target;hr.closest(".customer-search-container")||ee(!1),hr.closest(".vehicle-search-container")||re(!1)};return document.addEventListener("mousedown",Ge),()=>document.removeEventListener("mousedown",Ge)},[]);const mr=Ge=>{O({...S,vehicleId:Ge.id,vehicleModel:Ge.model,licensePlate:Ge.licensePlate}),re(!1)},xr=()=>{if(!be)return;if(!se.model.trim()||!se.licensePlate.trim()){Ye.error("Vui lng nhp y  loi xe v bin s");return}const Ge=`VEH-${Date.now()}`,Ot=be.vehicles||[],hr=[...Ot,{id:Ge,model:se.model.trim(),licensePlate:se.licensePlate.trim(),isPrimary:Ot.length===0}];o({...be,vehicles:hr}),O({...S,vehicleId:Ge,vehicleModel:se.model.trim(),licensePlate:se.licensePlate.trim()}),je({model:"",licensePlate:""}),me(!1),Ye.success(" thm xe mi")},sr=H.reduce((Ge,Ot)=>Ge+(Ot.price||0)*(Ot.quantity||0),0),Ir=et.reduce((Ge,Ot)=>Ge+(Ot.price||0)*(Ot.quantity||0),0),er=(S.laborCost||0)+sr+Ir,Xt=S.discount||0,Gt=Math.max(0,er-Xt);console.log("Tinh toan:",{laborCost:S.laborCost,partsTotal:sr,servicesTotal:Ir,subtotal:er,discount:Xt,total:Gt});const ur=ae||0,wr=q?U:0,lr=ur+wr,mt=Math.max(0,Gt-lr),kr=Tk(),Ke=async(Ge,Ot,hr,$r)=>{var Dr;if(!(Ot<=0)){console.log("[createCustomerDebtIfNeeded] CALLED with:",{workOrderId:Ge.id,totalAmount:hr,paidAmount:$r,remainingAmount:Ot,customerName:Ge.customerName,timestamp:new Date().toISOString()});try{const Yt=Ge.customerPhone||Ge.id||`CUST-ANON-${Date.now()}`,Mr=((Dr=Ge.customerName)==null?void 0:Dr.trim())||Ge.customerPhone||"Khch vng lai",We=Il(Ge.id,y==null?void 0:y.work_order_prefix).split("-").pop()||"";let Qt=`${Ge.vehicleModel||"Xe"} (Phiu sa cha #${We})`;Ge.issueDescription&&(Qt+=`
Vn : ${Ge.issueDescription}`),Ge.partsUsed&&Ge.partsUsed.length>0&&(Qt+=`

Ph tng  thay:`,Ge.partsUsed.forEach(Rr=>{Qt+=`
   ${Rr.quantity} x ${Rr.partName} - ${Ie(Rr.price*Rr.quantity)}`})),Ge.additionalServices&&Ge.additionalServices.length>0&&(Qt+=`

Dch v:`,Ge.additionalServices.forEach(Rr=>{Qt+=`
   ${Rr.quantity} x ${Rr.description} - ${Ie(Rr.price*Rr.quantity)}`})),Ge.laborCost&&Ge.laborCost>0&&(Qt+=`

Cng lao ng: ${Ie(Ge.laborCost)}`),Ge.discount&&Ge.discount>0&&(Qt+=`
Gim gi: -${Ie(Ge.discount)}`);const Cr=(N==null?void 0:N.full_name)||"N/A";Qt+=`

NV: ${Cr}`,Ge.technicianName&&(Qt+=`
NVK thut: ${Ge.technicianName}`);const gr={customerId:Yt,customerName:Mr,phone:Ge.customerPhone||null,licensePlate:Ge.licensePlate||null,description:Qt,totalAmount:hr,paidAmount:$r,remainingAmount:Ot,createdDate:new Date().toISOString().split("T")[0],branchId:p,workOrderId:Ge.id};console.log("[ServiceManager] createCustomerDebt payload:",gr);const _n=await kr.mutateAsync(gr);console.log("[ServiceManager] createCustomerDebt result:",_n),Ye.success(` to/cp nht cng n ${Ot.toLocaleString()} (M: ${(_n==null?void 0:_n.id)||"N/A"})`)}catch(Yt){console.error("Error creating/updating customer debt:",Yt),Ye.error("Khng th to/cp nht cng n t ng")}}},vt=async()=>{var $r,Dr;if(!(($r=S.customerName)!=null&&$r.trim())){Ye.error("Vui lng nhp tn khch hng");return}if(!((Dr=S.customerPhone)!=null&&Dr.trim())){Ye.error("Vui lng nhp s in thoi");return}if(!/^[0-9]{10,11}$/.test(S.customerPhone.trim())){Ye.error("S in thoi khng hp l (cn 10-11 ch s)");return}if(S.customerName&&S.customerPhone&&!s.find(Mr=>Mr.phone===S.customerPhone)){const Mr=s.find(Cr=>Cr.phone===S.customerPhone&&S.customerName&&Cr.name.toLowerCase()!==S.customerName.toLowerCase());Mr&&Ye.warning(`ST  tn ti cho khch "${Mr.name}". C th trng lp?`);const We=`VEH-${Date.now()}`,Qt=[];(S.vehicleModel||S.licensePlate)&&Qt.push({id:We,model:S.vehicleModel||"",licensePlate:S.licensePlate||"",isPrimary:!0}),o({id:`CUST-${Date.now()}`,name:S.customerName,phone:S.customerPhone,vehicles:Qt.length>0?Qt:void 0,vehicleModel:S.vehicleModel,licensePlate:S.licensePlate,status:"active",segment:"New",loyaltyPoints:0,totalSpent:0,visitCount:1,lastVisit:new Date().toISOString(),created_at:new Date().toISOString()})}let Ot="unpaid";const hr=((e==null?void 0:e.depositAmount)||0)+((e==null?void 0:e.additionalPayment)||0);hr>=Gt?Ot="paid":hr>0&&(Ot="partial");try{const Mr={id:(e==null?void 0:e.id)||`${(y==null?void 0:y.work_order_prefix)||"SC"}-${Date.now()}`,customername:S.customerName||"",customerphone:S.customerPhone||"",vehicleid:S.vehicleId,vehiclemodel:S.vehicleModel||"",licenseplate:S.licensePlate||"",issuedescription:S.issueDescription||"",technicianname:S.technicianName||"",status:S.status||"Tip nhn",laborcost:S.laborCost||0,discount:Xt,partsused:H,additionalservices:et.length>0?et:void 0,total:Gt,branchid:p,paymentstatus:Ot,paymentmethod:S.paymentMethod||null,depositamount:(e==null?void 0:e.depositAmount)||null,totalpaid:hr>0?hr:null,remainingamount:Gt-hr,creationdate:(e==null?void 0:e.creationDate)||new Date().toISOString()};if(e!=null&&e.id){const{data:We,error:Qt}=await Pt.from("work_orders").update(Mr).eq("id",e.id).select();if(Qt)throw console.error("[UPDATE ERROR]",Qt),Qt;console.log("[UPDATE SUCCESS]",We)}else{console.log("[INSERT] Attempting to insert:",Mr);const{data:We,error:Qt}=await Pt.from("work_orders").insert(Mr).select();if(Qt)throw console.error("[INSERT ERROR]",Qt),console.error("[INSERT ERROR DETAILS]",JSON.stringify(Qt,null,2)),Qt;console.log("[INSERT SUCCESS]",We)}r(Mr),Ye.success(e!=null&&e.id?" cp nht phiu":" lu phiu thnh cng"),t()}catch(Yt){console.error("Error saving work order:",Yt),Ye.error("Li khi lu phiu: "+(Yt.message||Yt.hint||"Khng xc nh"))}},Kt=async()=>{var Ge,Ot;if(st){console.log("[handleSave] Already submitting, skipping...");return}dt(!0);try{if(!((Ge=S.customerName)!=null&&Ge.trim())){Ye.error("Vui lng nhp tn khch hng");return}if(!((Ot=S.customerPhone)!=null&&Ot.trim())){Ye.error("Vui lng nhp s in thoi");return}if(!/^[0-9]{10,11}$/.test(S.customerPhone.trim())){Ye.error("S in thoi khng hp l (cn 10-11 ch s)");return}if(Gt<=0){Ye.error("Tng tin phi ln hn 0");return}if(S.customerName&&S.customerPhone&&!s.find(Yt=>Yt.phone===S.customerPhone)){const Yt=s.find(Qt=>Qt.phone===S.customerPhone&&S.customerName&&Qt.name.toLowerCase()!==S.customerName.toLowerCase());Yt&&Ye.warning(`ST  tn ti cho khch "${Yt.name}". C th trng lp?`);const Mr=`VEH-${Date.now()}`,We=[];(S.vehicleModel||S.licensePlate)&&We.push({id:Mr,model:S.vehicleModel||"",licensePlate:S.licensePlate||"",isPrimary:!0}),o({id:`CUST-${Date.now()}`,name:S.customerName,phone:S.customerPhone,vehicles:We.length>0?We:void 0,vehicleModel:S.vehicleModel,licensePlate:S.licensePlate,status:"active",segment:"New",loyaltyPoints:0,totalSpent:0,visitCount:1,lastVisit:new Date().toISOString(),created_at:new Date().toISOString()})}let $r="unpaid";if(lr>=Gt?$r="paid":lr>0&&($r="partial"),!(e!=null&&e.id)&&(H.length>0||et.length>0||ae>0)){try{const Dr=`${(y==null?void 0:y.work_order_prefix)||"SC"}-${Date.now()}`,Yt=await w({id:Dr,customerName:S.customerName||"",customerPhone:S.customerPhone||"",vehicleModel:S.vehicleModel||"",licensePlate:S.licensePlate||"",issueDescription:S.issueDescription||"",technicianName:S.technicianName||"",status:S.status||"Tip nhn",laborCost:S.laborCost||0,discount:Xt,partsUsed:H,additionalServices:et.length>0?et:void 0,total:Gt,branchId:p,paymentStatus:$r,paymentMethod:S.paymentMethod,depositAmount:ae>0?ae:void 0,additionalPayment:wr>0?wr:void 0,totalPaid:lr>0?lr:void 0,remainingAmount:mt,creationDate:new Date().toISOString()}),Mr=Yt==null?void 0:Yt.depositTransactionId,We=Yt==null?void 0:Yt.paymentTransactionId,Qt={id:Dr,customerName:S.customerName||"",customerPhone:S.customerPhone||"",vehicleModel:S.vehicleModel||"",licensePlate:S.licensePlate||"",issueDescription:S.issueDescription||"",technicianName:S.technicianName||"",status:S.status||"Tip nhn",laborCost:S.laborCost||0,discount:Xt,partsUsed:H,additionalServices:et.length>0?et:void 0,total:Gt,branchId:p,depositAmount:ae>0?ae:void 0,depositDate:ae>0?new Date().toISOString():void 0,depositTransactionId:Mr,paymentStatus:$r,paymentMethod:S.paymentMethod,additionalPayment:wr>0?wr:void 0,totalPaid:lr>0?lr:void 0,remainingAmount:mt,cashTransactionId:We,paymentDate:We?new Date().toISOString():void 0,creationDate:new Date().toISOString()};if(Mr&&ae>0&&(c(Cr=>[...Cr,{id:Mr,type:"deposit",category:"service_deposit",amount:ae,date:new Date().toISOString(),description:`t cc sa cha #${(Il(Dr,y==null?void 0:y.work_order_prefix)||"").split("-").pop()} - ${S.customerName}`,branchId:p,paymentSource:S.paymentMethod,reference:Dr}]),d(Cr=>Cr.map(gr=>gr.id===S.paymentMethod?{...gr,balance:{...gr.balance,[p]:(gr.balance[p]||0)+ae}}:gr))),We&&wr>0&&(c(Cr=>[...Cr,{id:We,type:"income",category:"service_income",amount:wr,date:new Date().toISOString(),description:`Thu tin sa cha #${(Il(Dr,y==null?void 0:y.work_order_prefix)||"").split("-").pop()} - ${S.customerName}`,branchId:p,paymentSource:S.paymentMethod,reference:Dr}]),d(Cr=>Cr.map(gr=>gr.id===S.paymentMethod?{...gr,balance:{...gr.balance,[p]:(gr.balance[p]||0)+wr}}:gr))),et.length>0){const Cr=et.reduce((gr,_n)=>gr+(_n.costPrice||0)*_n.quantity,0);if(Cr>0){const gr=`EXPENSE-${Date.now()}`;try{const{error:_n}=await Pt.from("cash_transactions").insert({id:gr,type:"expense",category:"outsourcing",amount:-Cr,date:new Date().toISOString(),description:`Chi ph gia cng bn ngoi - Phiu #${Dr.split("-").pop()} - ${et.map(Rr=>Rr.description).join(", ")}`,branchid:p,paymentsource:"cash",reference:Dr});_n||(c(Rr=>[...Rr,{id:gr,type:"expense",category:"outsourcing",amount:-Cr,date:new Date().toISOString(),description:`Chi ph gia cng bn ngoi - Phiu #${Dr.split("-").pop()}`,branchId:p,paymentSource:"cash",reference:Dr}]),d(Rr=>Rr.map(Sn=>Sn.id==="cash"?{...Sn,balance:{...Sn.balance,[p]:(Sn.balance[p]||0)-Cr}}:Sn)),Ye.info(` to phiu chi ${Ie(Cr)} cho gia cng bn ngoi`))}catch(_n){console.error("Error creating outsourcing expense:",_n)}}}r(Qt),S.status==="Tr my"&&mt>0&&(console.log("[handleSave] Creating debt with finalOrder:",{id:Qt.id,customerName:Qt.customerName,customerPhone:Qt.customerPhone,licensePlate:Qt.licensePlate,vehicleModel:Qt.vehicleModel}),await Ke(Qt,mt,Gt,lr)),t()}catch(Dr){console.error("Error creating work order (atomic):",Dr)}return}if(e!=null&&e.id){console.log("[handleSave] UPDATE block - Order ID:",e.id,"Status:",S.status);try{console.log("[handleSave] Calling updateWorkOrderAtomicAsync...");const Dr=await k({id:e.id,customerName:S.customerName||"",customerPhone:S.customerPhone||"",vehicleModel:S.vehicleModel||"",licensePlate:S.licensePlate||"",issueDescription:S.issueDescription||"",technicianName:S.technicianName||"",status:S.status||"Tip nhn",laborCost:S.laborCost||0,discount:Xt,partsUsed:H,additionalServices:et.length>0?et:void 0,total:Gt,branchId:p,paymentStatus:$r,paymentMethod:S.paymentMethod,depositAmount:ae>0?ae:void 0,additionalPayment:wr>0?wr:void 0,totalPaid:lr>0?lr:void 0,remainingAmount:mt}),Yt=Dr.workOrder,Mr=Dr==null?void 0:Dr.depositTransactionId,We=Dr==null?void 0:Dr.paymentTransactionId,Qt=Yt?{id:Yt.id||e.id,customerName:Yt.customername||Yt.customerName||e.customerName,customerPhone:Yt.customerphone||Yt.customerPhone||e.customerPhone,vehicleModel:Yt.vehiclemodel||Yt.vehicleModel||e.vehicleModel,licensePlate:Yt.licenseplate||Yt.licensePlate||e.licensePlate,issueDescription:Yt.issuedescription||Yt.issueDescription||e.issueDescription||"",technicianName:Yt.technicianname||Yt.technicianName||e.technicianName||"",status:Yt.status||e.status,laborCost:Yt.laborcost||Yt.laborCost||e.laborCost||0,discount:Yt.discount||e.discount||0,partsUsed:Yt.partsused||Yt.partsUsed||e.partsUsed||[],additionalServices:Yt.additionalservices||Yt.additionalServices||e.additionalServices,total:Yt.total||e.total,branchId:Yt.branchid||Yt.branchId||e.branchId,depositAmount:Yt.depositamount||Yt.depositAmount||e.depositAmount,depositDate:Yt.depositdate||Yt.depositDate||e.depositDate,depositTransactionId:Mr||e.depositTransactionId,paymentStatus:Yt.paymentstatus||Yt.paymentStatus||e.paymentStatus,paymentMethod:Yt.paymentmethod||Yt.paymentMethod||e.paymentMethod,additionalPayment:Yt.additionalpayment||Yt.additionalPayment||e.additionalPayment,totalPaid:Yt.totalpaid||Yt.totalPaid||e.totalPaid,remainingAmount:Yt.remainingamount||Yt.remainingAmount||e.remainingAmount,cashTransactionId:We||e.cashTransactionId,paymentDate:Yt.paymentdate||Yt.paymentDate||e.paymentDate,creationDate:Yt.creationdate||Yt.creationDate||e.creationDate}:{...e,customerName:S.customerName||e.customerName,customerPhone:S.customerPhone||e.customerPhone,vehicleModel:S.vehicleModel||e.vehicleModel,licensePlate:S.licensePlate||e.licensePlate,issueDescription:S.issueDescription||e.issueDescription,technicianName:S.technicianName||e.technicianName,status:S.status||e.status,laborCost:S.laborCost||e.laborCost,discount:Xt,partsUsed:H,additionalServices:et.length>0?et:e.additionalServices,total:Gt,depositAmount:ae,depositTransactionId:Mr||e.depositTransactionId,paymentStatus:$r,paymentMethod:S.paymentMethod||e.paymentMethod,additionalPayment:wr,totalPaid:lr,remainingAmount:mt,cashTransactionId:We||e.cashTransactionId,paymentDate:We?new Date().toISOString():e.paymentDate};Mr&&ae>e.depositAmount&&(c(Cr=>[...Cr,{id:Mr,type:"deposit",category:"service_deposit",amount:ae-(e.depositAmount||0),date:new Date().toISOString(),description:`t cc b sung #${(Il(e.id,y==null?void 0:y.work_order_prefix)||"").split("-").pop()} - ${S.customerName}`,branchId:p,paymentSource:S.paymentMethod,reference:e.id}]),d(Cr=>Cr.map(gr=>gr.id===S.paymentMethod?{...gr,balance:{...gr.balance,[p]:(gr.balance[p]||0)+(ae-(e.depositAmount||0))}}:gr))),We&&wr>(e.additionalPayment||0)&&(c(Cr=>[...Cr,{id:We,type:"income",category:"service_income",amount:wr-(e.additionalPayment||0),date:new Date().toISOString(),description:`Thu tin b sung #${(Il(e.id,y==null?void 0:y.work_order_prefix)||"").split("-").pop()} - ${S.customerName}`,branchId:p,paymentSource:S.paymentMethod,reference:e.id}]),d(Cr=>Cr.map(gr=>gr.id===S.paymentMethod?{...gr,balance:{...gr.balance,[p]:(gr.balance[p]||0)+(wr-(e.additionalPayment||0))}}:gr))),console.log("[handleSave] updateWorkOrderAtomicAsync SUCCESS - Response:",Dr),r(Qt),S.status==="Tr my"&&mt>0&&await Ke(Qt,mt,Gt,lr),t()}catch(Dr){console.error("[handleSave] Error updating work order (atomic):",Dr)}return}console.warn("[handleSave] Unexpected code path - no atomic create/update was called")}finally{dt(!1)}},tr=Ge=>{const Ot=H.find(hr=>hr.partId===Ge.id);W(Ot?H.map(hr=>hr.partId===Ge.id?{...hr,quantity:hr.quantity+1}:hr):[...H,{partId:Ge.id,partName:Ge.name,sku:Ge.sku||"",quantity:1,price:Ge.retailPrice[p]||0}]),z(!1),D("")},Pr=T.useMemo(()=>n.filter(Ge=>{var hr;return(((hr=Ge.stock)==null?void 0:hr[p])||0)>0}),[n,p]),Nr=T.useMemo(()=>E.trim()?Pr.filter(Ge=>{var Ot;return Ge.name.toLowerCase().includes(E.toLowerCase())||((Ot=Ge.sku)==null?void 0:Ot.toLowerCase().includes(E.toLowerCase()))}):Pr,[Pr,E]);return i.jsxs("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-end md:items-center justify-center p-0 md:p-4",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 w-full h-full md:h-auto md:max-h-[90vh] md:max-w-5xl rounded-t-3xl md:rounded-xl shadow-2xl md:shadow-lg flex flex-col overflow-hidden",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 px-4 py-3 md:px-6 md:py-4 flex items-center justify-between rounded-t-3xl md:rounded-t-xl flex-shrink-0",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:S.id?`Chi tit phiu sa cha - ${Il(S.id,y==null?void 0:y.work_order_prefix)}`:"To phiu sa cha mi"}),i.jsx("button",{onClick:t,className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-300","aria-label":"ng",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"w-5 h-5",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),i.jsxs("div",{className:"px-4 py-5 md:px-6 md:py-6 space-y-6 overflow-y-auto flex-1 pb-24 md:pb-6",children:[i.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300",children:"Thng tin Khch hng & S c"}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:["Khch hng ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("div",{className:"flex-1 relative customer-search-container",children:[i.jsx("input",{type:"text",placeholder:"Tm khch hng...",value:te,onChange:Ge=>{Y(Ge.target.value),ee(!0),O({...S,customerName:Ge.target.value})},onFocus:()=>ee(!0),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"}),ne&&i.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:Mt.length>0?Mt.map(Ge=>i.jsx("button",{type:"button",onClick:()=>{var hr,$r;const Ot=((hr=Ge.vehicles)==null?void 0:hr.find(Dr=>Dr.isPrimary))||(($r=Ge.vehicles)==null?void 0:$r[0]);O({...S,customerName:Ge.name,customerPhone:Ge.phone,vehicleId:Ot==null?void 0:Ot.id,vehicleModel:(Ot==null?void 0:Ot.model)||Ge.vehicleModel||"",licensePlate:(Ot==null?void 0:Ot.licensePlate)||Ge.licensePlate||""}),Y(Ge.name),ee(!1)},className:"w-full text-left px-3 py-2 hover:bg-slate-100 dark:hover:bg-slate-600 border-b border-slate-200 dark:border-slate-600 last:border-0",children:i.jsx("div",{className:"flex items-start justify-between gap-2",children:i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("div",{className:"font-medium text-slate-900 dark:text-slate-100 text-sm truncate",children:Ge.name}),i.jsxs("div",{className:"text-xs text-slate-600 dark:text-slate-400 mt-0.5",children:[" ",Ge.phone]}),(Ge.vehicleModel||Ge.licensePlate)&&i.jsxs("div",{className:"text-xs text-blue-600 dark:text-blue-400 mt-0.5 flex items-center gap-1",children:[i.jsxs("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[i.jsx("circle",{cx:"6",cy:"17",r:"2"}),i.jsx("circle",{cx:"18",cy:"17",r:"2"}),i.jsx("path",{d:"M4 17h2l4-6h2l2 3h4"})]}),Ge.vehicleModel&&i.jsx("span",{children:Ge.vehicleModel}),Ge.licensePlate&&i.jsxs("span",{className:"font-mono font-medium",children:[Ge.vehicleModel&&""," ",Ge.licensePlate]})]})]})})},Ge.id)):i.jsx("div",{className:"px-3 py-4 text-center text-sm text-slate-500 dark:text-slate-400",children:s.length===0?"Cha c khch hng no. Nhn '+'  thm khch hng mi.":"Khng tm thy khch hng ph hp"})})]}),i.jsx("button",{type:"button",onClick:()=>Le(!0),className:"px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg font-medium text-xl",title:"Thm khch hng mi",children:"+"})]}),S.customerName&&S.customerPhone&&i.jsx("div",{className:"mt-2 p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx("div",{className:"text-sm font-medium text-slate-900 dark:text-slate-100",children:S.customerName}),i.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:i.jsxs("span",{className:"inline-flex items-center gap-1",children:[i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"w-3.5 h-3.5",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 6.75c0 8.284 6.716 15 15 15 .828 0 1.5-.672 1.5-1.5v-2.25a1.5 1.5 0 00-1.5-1.5h-1.158a1.5 1.5 0 00-1.092.468l-.936.996a1.5 1.5 0 01-1.392.444 12.035 12.035 0 01-7.29-7.29 1.5 1.5 0 01.444-1.392l.996-.936a1.5 1.5 0 00.468-1.092V6.75A1.5 1.5 0 006.75 5.25H4.5c-.828 0-1.5.672-1.5 1.5z"})}),S.customerPhone]})}),(S.vehicleModel||S.licensePlate)&&i.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:i.jsxs("span",{className:"inline-flex items-center gap-1",children:[i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"w-3.5 h-3.5",children:[i.jsx("circle",{cx:"6",cy:"17",r:"2"}),i.jsx("circle",{cx:"18",cy:"17",r:"2"}),i.jsx("path",{d:"M4 17h2l4-6h2l2 3h4"})]}),S.vehicleModel," ",S.licensePlate&&`- ${S.licensePlate}`]})})]}),i.jsx("button",{type:"button",onClick:()=>{Y(""),O({...S,customerName:"",customerPhone:"",vehicleId:void 0,vehicleModel:"",licensePlate:""})},className:"text-slate-400 hover:text-red-500 text-sm flex items-center",title:"Xa khch hng",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"w-4 h-4","aria-hidden":"true",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]})}),be&&i.jsxs("div",{className:"mt-3 space-y-2",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:[ie.length>0?"Chn xe":"Xe ca khch hng",ie.length>0&&i.jsxs("span",{className:"text-xs text-slate-500 ml-1",children:["(",ie.length," xe)"]})]}),i.jsx("button",{type:"button",onClick:()=>me(!0),className:"px-3 py-1 bg-blue-500 hover:bg-blue-600 text-white rounded text-sm font-medium",title:"Thm xe mi",children:"+ Thm xe"})]}),ie.length>0?i.jsx("div",{className:"space-y-2",children:ie.map(Ge=>{const Ot=S.vehicleId===Ge.id,hr=Ge.isPrimary;return i.jsx("button",{type:"button",onClick:()=>mr(Ge),className:`w-full text-left px-3 py-2.5 rounded-lg border-2 transition-all ${Ot?"border-blue-500 bg-blue-50 dark:bg-blue-900/30":"border-slate-200 dark:border-slate-600 hover:border-blue-300 dark:hover:border-blue-700 bg-white dark:bg-slate-700"}`,children:i.jsxs("div",{className:"flex items-center gap-2",children:[hr&&i.jsx("span",{className:"text-yellow-500",title:"Xe chnh",children:""}),i.jsxs("div",{className:"flex-1",children:[i.jsx("div",{className:"font-medium text-sm text-slate-900 dark:text-slate-100",children:Ge.model}),i.jsx("div",{className:"text-xs font-mono text-slate-600 dark:text-slate-400 mt-0.5",children:Ge.licensePlate})]}),Ot&&i.jsx("svg",{className:"w-5 h-5 text-blue-500",fill:"currentColor",viewBox:"0 0 20 20",children:i.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})]})},Ge.id)})}):i.jsx("div",{className:"text-center py-4 px-3 bg-slate-50 dark:bg-slate-700/50 rounded-lg border border-dashed border-slate-300 dark:border-slate-600",children:i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:'Cha c xe no. Click "+ Thm xe"  thm.'})})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"S KM hin ti"}),i.jsx("input",{type:"number",placeholder:"15000",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"M t s c"}),i.jsx("textarea",{rows:4,placeholder:"Bo dng nh k, thay nht...",value:S.issueDescription||"",onChange:Ge=>O({...S,issueDescription:Ge.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 resize-none"})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300",children:"Chi tit Dch v"}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Trng thi"}),i.jsxs("select",{value:S.status||"Tip nhn",onChange:Ge=>O({...S,status:Ge.target.value}),className:`w-full px-3 py-2 border rounded-lg font-medium ${S.status==="Tip nhn"?"bg-blue-100 dark:bg-blue-900/30 border-blue-300 dark:border-blue-700 text-blue-700 dark:text-blue-300":S.status==="ang sa"?"bg-orange-100 dark:bg-orange-900/30 border-orange-300 dark:border-orange-700 text-orange-700 dark:text-orange-300":S.status===" sa xong"?"bg-purple-100 dark:bg-purple-900/30 border-purple-300 dark:border-purple-700 text-purple-700 dark:text-purple-300":"bg-green-100 dark:bg-green-900/30 border-green-300 dark:border-green-700 text-green-700 dark:text-green-300"}`,children:[i.jsx("option",{value:"Tip nhn",className:"bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100",children:"Tip nhn"}),i.jsx("option",{value:"ang sa",className:"bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100",children:"ang sa"}),i.jsx("option",{value:" sa xong",className:"bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100",children:" sa xong"}),i.jsx("option",{value:"Tr my",className:"bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100",children:"Tr my"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"K thut vin"}),i.jsxs("select",{value:S.technicianName||"",onChange:Ge=>O({...S,technicianName:Ge.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",children:[i.jsx("option",{value:"",children:"-- Chn k thut vin --"}),l.filter(Ge=>{var Ot,hr;return Ge.status==="active"&&(((Ot=Ge.department)==null?void 0:Ot.toLowerCase().includes("k thut"))||((hr=Ge.position)==null?void 0:hr.toLowerCase().includes("k thut")))}).map(Ge=>i.jsx("option",{value:Ge.name,children:Ge.name},Ge.id))]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Ph dch v (Cng th)"}),i.jsx("input",{type:"number",placeholder:"100.000",value:S.laborCost||"",onChange:Ge=>O({...S,laborCost:Number(Ge.target.value)}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Ghi ch ni b"}),i.jsx("textarea",{rows:4,placeholder:"VD: Khch yu cu kim tra thm h thng in",className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 resize-none"})]})]})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300",children:"Ph tng s dng"}),i.jsx("button",{onClick:()=>z(!R),className:"px-3 py-1.5 bg-blue-500 hover:bg-blue-600 text-white rounded text-sm flex items-center gap-1",children:" Thm ph tng"})]}),R&&i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:"text",placeholder:"Tm kim ph tng theo tn hoc SKU...",value:E,onChange:Ge=>D(Ge.target.value),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",autoFocus:!0}),i.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg shadow-lg max-h-60 overflow-y-auto z-10",children:a?i.jsx("div",{className:"px-4 py-3 text-sm text-slate-500",children:"ang ti ph tng..."}):Nr.length===0?i.jsx("div",{className:"px-4 py-3 text-sm text-slate-500",children:"Khng tm thy ph tng"}):Nr.slice(0,10).map(Ge=>i.jsxs("button",{onClick:()=>tr(Ge),className:"w-full px-4 py-2 text-left hover:bg-slate-100 dark:hover:bg-slate-600 flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-sm font-medium text-slate-900 dark:text-slate-100",children:Ge.name}),i.jsx("div",{className:"text-xs text-slate-500",children:Ge.sku})]}),i.jsx("div",{className:"text-sm font-semibold text-slate-900 dark:text-slate-100",children:Ie(Ge.retailPrice[p]||0)})]},Ge.id))})]}),i.jsx("div",{className:"border border-slate-300 dark:border-slate-600 rounded-lg overflow-hidden",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-600 dark:text-slate-300",children:"Tn"}),i.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-slate-600 dark:text-slate-300",children:"SL"}),i.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-slate-600 dark:text-slate-300",children:".Gi"}),i.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-slate-600 dark:text-slate-300",children:"T.Tin"}),i.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-slate-600 dark:text-slate-300"})]})}),i.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-600",children:H.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:5,className:"px-4 py-6 text-center text-sm text-slate-400",children:"Cha c ph tng no"})}):H.map((Ge,Ot)=>i.jsxs("tr",{className:"bg-white dark:bg-slate-800",children:[i.jsx("td",{className:"px-4 py-2 text-sm text-slate-900 dark:text-slate-100",children:Ge.partName}),i.jsx("td",{className:"px-4 py-2 text-center",children:i.jsx("input",{type:"number",min:"1",value:Ge.quantity,onChange:hr=>{const $r=Number(hr.target.value);W(H.map((Dr,Yt)=>Yt===Ot?{...Dr,quantity:$r}:Dr))},className:"w-16 px-2 py-1 border border-slate-300 dark:border-slate-600 rounded text-center bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})}),i.jsx("td",{className:"px-4 py-2 text-right text-sm text-slate-900 dark:text-slate-100",children:Ie(Ge.price)}),i.jsx("td",{className:"px-4 py-2 text-right text-sm font-semibold text-slate-900 dark:text-slate-100",children:Ie(Ge.price*Ge.quantity)}),i.jsx("td",{className:"px-4 py-2 text-center",children:i.jsx("button",{onClick:()=>W(H.filter((hr,$r)=>$r!==Ot)),className:"text-red-500 hover:text-red-700","aria-label":"Xa ph tng",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"w-4 h-4",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 6h18M9 6V4h6v2m-7 4v8m4-8v8m4-8v8"})})})})]},Ot))})]})})]}),i.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-4",children:[i.jsx("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-3",children:"Bo gi (Gia cng, t hng)"}),i.jsx("div",{className:"border border-slate-300 dark:border-slate-600 rounded-lg overflow-hidden",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-600 dark:text-slate-300",children:"M t"}),i.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-slate-600 dark:text-slate-300",children:"SL"}),i.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-slate-600 dark:text-slate-300",children:"Gi nhp"}),i.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-slate-600 dark:text-slate-300",children:"n gi"}),i.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-slate-600 dark:text-slate-300",children:"Thnh tin"}),i.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-slate-600 dark:text-slate-300",children:i.jsx("button",{onClick:()=>{Ve.description&&Ve.price>0&&(lt([...et,{...Ve,id:`SRV-${Date.now()}`}]),Vt({description:"",quantity:1,price:0,costPrice:0}))},className:"px-2 py-1 bg-blue-500 hover:bg-blue-600 text-white rounded text-xs",children:"Thm"})})]})}),i.jsxs("tbody",{children:[et.map(Ge=>i.jsxs("tr",{className:"border-b border-slate-200 dark:border-slate-700",children:[i.jsx("td",{className:"px-4 py-2 text-sm text-slate-900 dark:text-slate-100",children:Ge.description}),i.jsx("td",{className:"px-4 py-2 text-center text-sm text-slate-900 dark:text-slate-100",children:Ge.quantity}),i.jsx("td",{className:"px-4 py-2 text-right text-sm text-orange-600 dark:text-orange-400",children:Ge.costPrice?Ie(Ge.costPrice):"-"}),i.jsx("td",{className:"px-4 py-2 text-right text-sm text-slate-900 dark:text-slate-100",children:Ie(Ge.price)}),i.jsx("td",{className:"px-4 py-2 text-right text-sm font-semibold text-slate-900 dark:text-slate-100",children:Ie(Ge.price*Ge.quantity)}),i.jsx("td",{className:"px-4 py-2 text-center",children:i.jsx("button",{onClick:()=>lt(et.filter(Ot=>Ot.id!==Ge.id)),className:"text-red-500 hover:text-red-700 text-sm","aria-label":"Xa dch v",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"w-4 h-4",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 6h18M9 6V4h6v2m-7 4v8m4-8v8m4-8v8"})})})})]},Ge.id)),i.jsxs("tr",{className:"bg-white dark:bg-slate-800",children:[i.jsx("td",{className:"px-4 py-2",children:i.jsx("input",{type:"text",placeholder:"M t...",value:Ve.description,onChange:Ge=>Vt({...Ve,description:Ge.target.value}),className:"w-full px-2 py-1 border border-slate-300 dark:border-slate-600 rounded bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 text-sm"})}),i.jsx("td",{className:"px-4 py-2",children:i.jsx("input",{type:"number",value:Ve.quantity,onChange:Ge=>Vt({...Ve,quantity:Number(Ge.target.value)}),className:"w-16 px-2 py-1 border border-slate-300 dark:border-slate-600 rounded text-center bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 text-sm"})}),i.jsx("td",{className:"px-4 py-2",children:i.jsx("input",{type:"number",placeholder:"Gi nhp",value:Ve.costPrice||"",onChange:Ge=>Vt({...Ve,costPrice:Number(Ge.target.value)}),className:"w-full px-2 py-1 border border-orange-300 dark:border-orange-600 rounded text-right bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 text-sm"})}),i.jsx("td",{className:"px-4 py-2",children:i.jsx("input",{type:"number",placeholder:"n gi",value:Ve.price||"",onChange:Ge=>Vt({...Ve,price:Number(Ge.target.value)}),className:"w-full px-2 py-1 border border-slate-300 dark:border-slate-600 rounded text-right bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 text-sm"})}),i.jsx("td",{className:"px-4 py-2 text-right text-sm text-slate-400",children:Ve.price>0?Ie(Ve.price*Ve.quantity):"Thnh tin"}),i.jsx("td",{className:"px-4 py-2 text-center"})]})]})]})})]}),i.jsx("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-4 mt-4",children:i.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[i.jsxs("div",{className:"space-y-4 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg p-4",children:[i.jsx("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300",children:"Thanh ton"}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("label",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"checkbox",checked:he,onChange:Ge=>{Se(Ge.target.checked),Ge.target.checked||de(0)},disabled:!!(e!=null&&e.depositAmount),className:"w-4 h-4"}),i.jsxs("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:["t cc"," ",e!=null&&e.depositAmount?`( cc: ${Ie(e.depositAmount)})`:""]})]}),he&&!(e!=null&&e.depositAmount)&&i.jsx("div",{className:"pl-6",children:i.jsx("input",{type:"number",placeholder:"S tin t cc",value:ae||"",onChange:Ge=>de(Number(Ge.target.value)),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})}),i.jsx("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-3"}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 mb-2 block",children:"Phng thc thanh ton:"}),i.jsxs("div",{className:"flex items-center gap-4 pl-2",children:[i.jsxs("label",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"radio",name:"paymentMethod",value:"cash",checked:S.paymentMethod==="cash",onChange:Ge=>O({...S,paymentMethod:"cash"}),className:"w-4 h-4"}),i.jsxs("span",{className:"inline-flex items-center gap-1 text-sm text-slate-700 dark:text-slate-300",children:[i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"w-4 h-4",children:[i.jsx("rect",{x:"2",y:"6",width:"20",height:"12",rx:"2",ry:"2"}),i.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),"Tin mt"]})]}),i.jsxs("label",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"radio",name:"paymentMethod",value:"bank",checked:S.paymentMethod==="bank",onChange:Ge=>O({...S,paymentMethod:"bank"}),className:"w-4 h-4"}),i.jsxs("span",{className:"inline-flex items-center gap-1 text-sm text-slate-700 dark:text-slate-300",children:[i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"w-4 h-4",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 21h18M3 10h18M7 6h10l2 4H5l2-4Zm2 4v11m6-11v11"})}),"Chuyn khon"]})]})]})]}),i.jsx("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-3"}),S.status==="Tr my"&&i.jsxs(i.Fragment,{children:[i.jsxs("label",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"checkbox",checked:q,onChange:Ge=>{K(Ge.target.checked),Ge.target.checked||Z(0)},className:"w-4 h-4"}),i.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:"Thanh ton khi tr xe"})]}),q&&i.jsxs("div",{className:"pl-6 space-y-2",children:[i.jsx("label",{className:"text-xs text-slate-600 dark:text-slate-400",children:"S tin thanh ton thm:"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"number",placeholder:"0",value:U||"",onChange:Ge=>Z(Number(Ge.target.value)),className:"flex-1 px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"}),i.jsx("button",{onClick:()=>Z(0),className:"px-3 py-1.5 bg-slate-200 dark:bg-slate-600 hover:bg-slate-300 dark:hover:bg-slate-500 text-slate-700 dark:text-slate-200 rounded text-xs font-medium",children:"0%"}),i.jsx("button",{onClick:()=>Z(Math.round(mt*.5)),className:"px-3 py-1.5 bg-slate-200 dark:bg-slate-600 hover:bg-slate-300 dark:hover:bg-slate-500 text-slate-700 dark:text-slate-200 rounded text-xs font-medium",children:"50%"}),i.jsx("button",{onClick:()=>Z(mt),className:"px-3 py-1.5 bg-slate-200 dark:bg-slate-600 hover:bg-slate-300 dark:hover:bg-slate-500 text-slate-700 dark:text-slate-200 rounded text-xs font-medium",children:"100%"})]})]})]})]}),S.status!=="Tr my"&&i.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 italic",children:'* Thanh ton khi tr xe ch kh dng khi trng thi l "Tr my"'})]}),i.jsxs("div",{className:"space-y-3 bg-slate-50 dark:bg-slate-700/30 border border-slate-200 dark:border-slate-700 rounded-lg p-4",children:[i.jsx("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Tng kt"}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Ph dch v:"}),i.jsx("span",{className:"font-medium text-slate-900 dark:text-slate-100",children:Ie(S.laborCost||0)})]}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Tin ph tng:"}),i.jsx("span",{className:"font-medium text-slate-900 dark:text-slate-100",children:Ie(sr)})]}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Gia cng/t hng:"}),i.jsx("span",{className:"font-medium text-slate-900 dark:text-slate-100",children:Ie(Ir)})]}),i.jsxs("div",{className:"pt-2 border-t border-slate-300 dark:border-slate-600",children:[i.jsxs("div",{className:"flex justify-between items-center text-sm",children:[i.jsx("span",{className:"text-red-600 font-medium",children:"Gim gi:"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"number",placeholder:"0",value:Te==="amount"?S.discount||"":ye,onChange:Ge=>{const Ot=Number(Ge.target.value)||0;if(Te==="amount")O({...S,discount:Math.min(Ot,er)});else{const hr=Math.min(Ot,100);rt(hr),O({...S,discount:Math.round(er*hr/100)})}},className:"w-20 px-2 py-1 border border-slate-300 dark:border-slate-600 rounded text-right bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 text-sm",min:"0",max:Te==="amount"?er:100}),i.jsxs("select",{value:Te,onChange:Ge=>{const Ot=Ge.target.value;De(Ot),O({...S,discount:0}),rt(0)},className:"px-2 py-1 border border-slate-300 dark:border-slate-600 rounded bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 text-sm",children:[i.jsx("option",{value:"amount",children:""}),i.jsx("option",{value:"percent",children:"%"})]})]})]}),Te==="percent"&&i.jsx("div",{className:"flex gap-1 justify-end mt-2",children:[5,10,15,20].map(Ge=>i.jsxs("button",{onClick:()=>{rt(Ge),O({...S,discount:Math.round(er*Ge/100)})},className:"px-2 py-1 text-xs bg-slate-100 dark:bg-slate-700 hover:bg-blue-100 dark:hover:bg-blue-900/30 text-slate-700 dark:text-slate-300 rounded transition-colors",children:[Ge,"%"]},Ge))}),Te==="percent"&&ye>0&&i.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400 text-right mt-1",children:["= ",Ie(S.discount||0)]})]}),i.jsxs("div",{className:"pt-2 border-t-2 border-slate-400 dark:border-slate-500",children:[i.jsxs("div",{className:"flex justify-between items-center mb-2",children:[i.jsx("span",{className:"text-base font-bold text-slate-900 dark:text-slate-100",children:"Tng cng:"}),i.jsx("span",{className:"text-lg font-bold text-blue-600 dark:text-blue-400",children:Ie(Gt)})]}),(ur>0||wr>0)&&i.jsxs("div",{className:"space-y-1 pt-2 border-t border-slate-300 dark:border-slate-600",children:[ur>0&&i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-green-600 dark:text-green-400",children:" t cc:"}),i.jsxs("span",{className:"font-medium text-green-600 dark:text-green-400",children:["-",Ie(ur)]})]}),wr>0&&i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-green-600 dark:text-green-400",children:"Thanh ton thm:"}),i.jsxs("span",{className:"font-medium text-green-600 dark:text-green-400",children:["-",Ie(wr)]})]}),i.jsxs("div",{className:"flex justify-between items-center pt-2 border-t border-slate-300 dark:border-slate-600",children:[i.jsx("span",{className:"text-base font-bold text-slate-900 dark:text-slate-100",children:mt>0?"Cn phi thu:":" thanh ton "}),i.jsx("span",{className:`text-lg font-bold ${mt>0?"text-red-600 dark:text-red-400":"text-green-600 dark:text-green-400"}`,children:Ie(mt)})]})]})]})]})]})})]}),i.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-700 px-4 py-4 md:px-6 flex items-center justify-end gap-3 bg-white md:bg-slate-50 dark:bg-slate-800/70 md:dark:bg-slate-800/50 rounded-b-3xl md:rounded-b-xl flex-shrink-0",children:[i.jsx("button",{onClick:t,className:"px-4 py-2 bg-slate-200 dark:bg-slate-700 hover:bg-slate-300 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-200 rounded-lg",children:"Hy"}),i.jsx("button",{onClick:vt,className:"px-6 py-2 bg-slate-500 hover:bg-slate-600 text-white rounded-lg font-medium",children:"Lu Phiu"}),S.status!=="Tr my"&&he&&i.jsxs("button",{onClick:Kt,className:"px-6 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg font-medium flex items-center gap-2",children:[i.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"t cc"]}),S.status==="Tr my"&&i.jsxs("button",{onClick:Kt,className:"px-6 py-2 bg-green-500 hover:bg-green-600 text-white rounded-lg font-medium flex items-center gap-2",children:[i.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"})}),"Thanh ton"]})]})]}),ke&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[60]",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl w-full max-w-md p-6 m-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-slate-100",children:"Thm khch hng"}),i.jsx("button",{onClick:()=>{Le(!1),F({name:"",phone:"",vehicleModel:"",licensePlate:""})},className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-300","aria-label":"ng",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"w-5 h-5",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Tn khch"}),i.jsx("input",{type:"text",placeholder:"Nhp tn khch",value:fe.name,onChange:Ge=>F({...fe,name:Ge.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"S in thoi"}),i.jsx("input",{type:"tel",placeholder:"VD: 09xxxx",value:fe.phone,onChange:Ge=>F({...fe,phone:Ge.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("div",{className:"relative vehicle-search-container",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Dng xe"}),i.jsx("input",{type:"text",placeholder:"Chn hoc nhp dng xe",value:fe.vehicleModel,onChange:Ge=>{F({...fe,vehicleModel:Ge.target.value}),re(!0)},onFocus:()=>re(!0),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"}),Q&&i.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg shadow-lg max-h-[200px] overflow-y-auto",children:g.filter(Ge=>Ge.toLowerCase().includes(fe.vehicleModel.toLowerCase())).map(Ge=>i.jsx("button",{type:"button",onClick:()=>{F({...fe,vehicleModel:Ge}),re(!1)},className:"w-full text-left px-3 py-2 hover:bg-slate-100 dark:hover:bg-slate-600 text-sm border-b border-slate-200 dark:border-slate-600 last:border-0 text-slate-900 dark:text-slate-100",children:Ge},Ge))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Bin s"}),i.jsx("input",{type:"text",placeholder:"VD: 59A1-123.45",value:fe.licensePlate,onChange:Ge=>F({...fe,licensePlate:Ge.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]})]})]}),i.jsxs("div",{className:"flex items-center justify-end gap-3 mt-6",children:[i.jsx("button",{onClick:()=>{Le(!1),F({name:"",phone:"",vehicleModel:"",licensePlate:""})},className:"px-4 py-2 text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg",children:"Hy"}),i.jsx("button",{onClick:()=>{if(fe.name&&fe.phone){const Ge=`CUST-${Date.now()}`,Ot=`VEH-${Date.now()}`,hr=[];(fe.vehicleModel||fe.licensePlate)&&hr.push({id:Ot,model:fe.vehicleModel||"",licensePlate:fe.licensePlate||"",isPrimary:!0}),o({id:Ge,name:fe.name,phone:fe.phone,vehicles:hr.length>0?hr:void 0,vehicleModel:fe.vehicleModel,licensePlate:fe.licensePlate,status:"active",segment:"New",loyaltyPoints:0,totalSpent:0,visitCount:1,lastVisit:new Date().toISOString(),created_at:new Date().toISOString()}),O({...S,customerName:fe.name,customerPhone:fe.phone,vehicleId:hr.length>0?Ot:void 0,vehicleModel:fe.vehicleModel,licensePlate:fe.licensePlate}),Y(fe.name),Le(!1),F({name:"",phone:"",vehicleModel:"",licensePlate:""})}},className:"px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg font-medium",disabled:!fe.name||!fe.phone,children:"Lu"})]})]})}),Ce&&be&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl max-w-md w-full p-6",children:[i.jsxs("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-4",children:["Thm xe cho ",be.name]}),i.jsxs("div",{className:"space-y-4 mb-6",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:["Loi xe ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"text",placeholder:"VD: Exciter, Vision, Wave...",value:se.model,onChange:Ge=>je({...se,model:Ge.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",autoFocus:!0})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:["Bin s ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"text",placeholder:"VD: 29A 12345",value:se.licensePlate,onChange:Ge=>je({...se,licensePlate:Ge.target.value}),className:"w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100"})]}),i.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 bg-blue-50 dark:bg-blue-900/20 p-3 rounded",children:" Xe mi s t ng c chn sau khi thm"})]}),i.jsxs("div",{className:"flex gap-3 justify-end",children:[i.jsx("button",{onClick:()=>{me(!1),je({model:"",licensePlate:""})},className:"px-4 py-2 text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg",children:"Hy"}),i.jsx("button",{onClick:xr,className:"px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg font-medium",disabled:!se.model.trim()||!se.licensePlate.trim(),children:"Thm xe"})]})]})})]})},xje=({status:e})=>{const t={"Tip nhn":"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400","ang sa":"bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-400"," sa xong":"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400","Tr my":"bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-400"};return i.jsx("span",{className:`inline-flex px-2 py-1 rounded-full text-xs font-medium ${t[e]}`,children:e})},pje=({currentBranchId:e})=>{var ee,Ce;const{workOrders:t}=Ua(),r=Pw(),[n,a]=T.useState(""),[s,l]=T.useState("all"),[o,c]=T.useState("all"),[d,f]=T.useState("all"),[p,y]=T.useState("quick"),[g,N]=T.useState("7days"),[w,k]=T.useState(()=>{const me=new Date,se=String(me.getMonth()+1).padStart(2,"0");return`${me.getFullYear()}-${se}`}),[S,O]=T.useState(""),[E,D]=T.useState(""),[H,W]=T.useState(!1),R=()=>{const me=new Date,se=String(me.getMonth()+1).padStart(2,"0"),je=me.getFullYear();return`Thng ${se}/${je}`},[z,U]=T.useState(R()),[Z,q]=T.useState(null),[K,Q]=T.useState(!1),[re,ae]=T.useState(null);T.useEffect(()=>{(async()=>{try{const{data:se,error:je}=await Pt.from("store_settings").select("store_name, address, phone, email, logo_url, bank_qr_url, bank_name, bank_account_number, bank_account_holder, bank_branch").order("created_at",{ascending:!1}).limit(1).single();if(je){console.error("Error fetching store settings:",je);return}ae(se)}catch(se){console.error("Failed to fetch store settings:",se)}})()},[]);const de=()=>{const me=new Date,se=new Date(me.getFullYear(),me.getMonth(),me.getDate());if(p==="quick")switch(g){case"today":return{start:se,end:new Date(se.getFullYear(),se.getMonth(),se.getDate(),23,59,59)};case"yesterday":const je=new Date(se);return je.setDate(je.getDate()-1),{start:je,end:new Date(je.getFullYear(),je.getMonth(),je.getDate(),23,59,59)};case"3days":const be=new Date(se);return be.setDate(be.getDate()-2),{start:be,end:new Date(me.getFullYear(),me.getMonth(),me.getDate(),23,59,59)};case"7days":const ie=new Date(se);return ie.setDate(ie.getDate()-6),{start:ie,end:new Date(me.getFullYear(),me.getMonth(),me.getDate(),23,59,59)};case"thisWeek":const Te=new Date(se),De=Te.getDay(),ye=Te.getDate()-De+(De===0?-6:1);return Te.setDate(ye),{start:Te,end:new Date(me.getFullYear(),me.getMonth(),me.getDate(),23,59,59)};case"lastWeek":const rt=new Date(se),st=rt.getDay(),dt=rt.getDate()-st-6;rt.setDate(dt);const et=new Date(rt);return et.setDate(et.getDate()+6),et.setHours(23,59,59),{start:rt,end:et};default:return{start:se,end:new Date(me.getFullYear(),me.getMonth(),me.getDate(),23,59,59)}}else if(p==="month"){const[je,be]=w.split("-").map(Number),ie=new Date(je,be-1,1),Te=new Date(je,be,0,23,59,59);return{start:ie,end:Te}}else if(p==="custom"&&S&&E){const je=new Date(S),be=new Date(E);return be.setHours(23,59,59),{start:je,end:be}}return{start:new Date(me.getFullYear(),me.getMonth(),1),end:new Date(me.getFullYear(),me.getMonth()+1,0,23,59,59)}},he=()=>{if(p==="quick")switch(g){case"today":return"Hm nay";case"yesterday":return"Hm qua";case"3days":return"3 ngy qua";case"7days":return"7 ngy qua";case"thisWeek":return"Tun ny";case"lastWeek":return"Tun trc";default:return"Chn thi gian"}else if(p==="month"){const[me,se]=w.split("-");return`Thng ${se}/${me}`}else if(p==="custom"){if(S&&E){const me=new Date(S).toLocaleDateString("vi-VN"),se=new Date(E).toLocaleDateString("vi-VN");return`${me} - ${se}`}return"Ty chnh"}return"Chn thi gian"},Se=T.useMemo(()=>{const{start:me,end:se}=de();return t.filter(je=>{var be,ie,Te,De,ye;if(je.status!=="Tr my"||je.branchId!==e)return!1;if(n){const rt=n.toLowerCase();if(![(be=je.id)==null?void 0:be.toLowerCase(),(ie=je.customerName)==null?void 0:ie.toLowerCase(),(Te=je.customerPhone)==null?void 0:Te.toLowerCase(),(De=je.vehicleModel)==null?void 0:De.toLowerCase(),(ye=je.licensePlate)==null?void 0:ye.toLowerCase()].some(dt=>dt==null?void 0:dt.includes(rt)))return!1}if(s!=="all"&&je.status!==s||o!=="all"&&je.technicianName!==o||d!=="all"&&(d==="paid"&&je.paymentStatus!=="paid"||d==="unpaid"&&je.paymentStatus!=="unpaid"))return!1;if(je.creationDate){const rt=new Date(je.creationDate);if(rt<me||rt>se)return!1}return!0}).sort((je,be)=>new Date(be.creationDate||0).getTime()-new Date(je.creationDate||0).getTime())},[t,n,s,p,g,w,S,E,o,d,e]),ke=Se.reduce((me,se)=>me+(se.total||0),0),Le=()=>{const se=[["M Phiu","Ngy to","Khch hng","Xe","Bin s","Trng thi","Tng chi ph"].join(","),...Se.map(ie=>{var Te;return[Il(ie.id,re==null?void 0:re.work_order_prefix)||"",Bn(ie.creationDate,!0),ie.customerName||"",ie.vehicleModel||"",ie.licensePlate||"",ie.status||"",((Te=ie.total)==null?void 0:Te.toString())||"0"].join(",")})].join(`
`),je=new Blob([se],{type:"text/csv;charset=utf-8;"}),be=document.createElement("a");if(be.download!==void 0){const ie=URL.createObjectURL(je);be.setAttribute("href",ie),be.setAttribute("download",`lich-su-sua-chua-${new Date().toISOString().split("T")[0]}.csv`),be.style.visibility="hidden",document.body.appendChild(be),be.click(),document.body.removeChild(be)}},fe=me=>{q(me),Q(!0)},F=me=>{r("/service",{state:{editOrder:me}})},te=()=>{setTimeout(()=>{ow("work-order-receipt")},100)},Y=({status:me})=>{const se={"Tip nhn":{icon:"",color:"text-blue-600 dark:text-blue-400"},"ang sa":{icon:"",color:"text-orange-600 dark:text-orange-400"}," sa xong":{icon:"",color:"text-purple-600 dark:text-purple-400"},"Tr my":{icon:"",color:"text-green-600 dark:text-green-400"}},je=se[me]||se["Tip nhn"];return i.jsxs("span",{className:`flex items-center gap-1 text-sm ${je.color}`,children:[i.jsx("span",{children:je.icon}),i.jsx("span",{children:me})]})},ne=({status:me})=>me==="paid"?i.jsx("span",{className:"text-xs text-green-600 dark:text-green-400",children:"  thanh ton"}):i.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:" Cha thanh ton"});return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:[i.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl p-4 border border-slate-200 dark:border-slate-700",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Tng phiu"}),i.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-slate-100",children:Se.length})]}),i.jsx("div",{className:"p-3 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:i.jsx(N4,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})})]})}),i.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl p-4 border border-slate-200 dark:border-slate-700",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Tng doanh thu"}),i.jsx("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:Ie(ke)})]}),i.jsx("div",{className:"p-3 bg-green-100 dark:bg-green-900/30 rounded-lg",children:i.jsx(QT,{className:"w-6 h-6 text-green-600 dark:text-green-400"})})]})}),i.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl p-4 border border-slate-200 dark:border-slate-700",children:i.jsxs("button",{onClick:Le,className:"w-full px-4 py-2 bg-cyan-500 hover:bg-cyan-600 text-white rounded-lg text-sm font-medium flex items-center justify-center gap-2 transition-colors",children:[i.jsx(QT,{className:"w-4 h-4"}),"Xut Excel"]})})]}),i.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl p-4 border border-slate-200 dark:border-slate-700",children:i.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[i.jsx("div",{className:"flex-1 min-w-[200px]",children:i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:"text",placeholder:"Tm theo m, tn, ST, xe, bin s...",value:n,onChange:me=>a(me.target.value),className:"w-full pl-10 pr-4 py-2 bg-slate-50 dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-sm text-slate-900 dark:text-slate-100 placeholder-slate-400"}),i.jsx(Ou,{className:"absolute left-3 top-2.5 w-4 h-4 text-slate-400","aria-hidden":"true"})]})}),i.jsxs("button",{onClick:()=>W(!0),className:"px-4 py-2 bg-slate-50 dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-sm text-slate-700 dark:text-slate-200 hover:bg-slate-100 dark:hover:bg-slate-600 transition-colors flex items-center gap-2",children:[i.jsx(N4,{className:"w-4 h-4"}),he()]}),i.jsxs("select",{value:o,onChange:me=>c(me.target.value),className:"px-4 py-2 bg-slate-50 dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-sm text-slate-700 dark:text-slate-200",children:[i.jsx("option",{value:"all",children:"Tt c KTV"}),i.jsx("option",{value:"KTV 1",children:"KTV 1"}),i.jsx("option",{value:"KTV 2",children:"KTV 2"})]}),i.jsxs("select",{value:d,onChange:me=>f(me.target.value),className:"px-4 py-2 bg-slate-50 dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-sm text-slate-700 dark:text-slate-200",children:[i.jsx("option",{value:"all",children:"Tt c thanh ton"}),i.jsx("option",{value:"paid",children:" thanh ton"}),i.jsx("option",{value:"unpaid",children:"Cha thanh ton"})]})]})}),H&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl w-full max-w-lg shadow-2xl",children:[i.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700 px-6 py-4",children:i.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-slate-100",children:"Chn thi gian:"})}),i.jsxs("div",{className:"p-6 space-y-4",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 mb-3",children:"Theo ngy:"}),i.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[i.jsx("button",{onClick:()=>{y("quick"),N("today")},className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${p==="quick"&&g==="today"?"bg-blue-500 text-white":"bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-600"}`,children:"Hm nay"}),i.jsx("button",{onClick:()=>{y("quick"),N("yesterday")},className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${p==="quick"&&g==="yesterday"?"bg-blue-500 text-white":"bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-600"}`,children:"Hm qua"}),i.jsx("button",{onClick:()=>{y("quick"),N("3days")},className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${p==="quick"&&g==="3days"?"bg-blue-500 text-white":"bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-600"}`,children:"3 ngy qua"}),i.jsx("button",{onClick:()=>{y("quick"),N("thisWeek")},className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${p==="quick"&&g==="thisWeek"?"bg-blue-500 text-white":"bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-600"}`,children:"Tun ny"}),i.jsx("button",{onClick:()=>{y("quick"),N("lastWeek")},className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${p==="quick"&&g==="lastWeek"?"bg-blue-500 text-white":"bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-600"}`,children:"Tun trc"}),i.jsx("button",{onClick:()=>{y("quick"),N("7days")},className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${p==="quick"&&g==="7days"?"bg-blue-500 text-white":"bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-600"}`,children:" 7 ngy qua"})]})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 mb-3",children:"Theo thng:"}),i.jsx("div",{className:"grid grid-cols-3 gap-2",children:[0,1,2,3,4,5].map(me=>{const se=new Date;se.setMonth(se.getMonth()-me);const je=se.getFullYear(),be=String(se.getMonth()+1).padStart(2,"0"),ie=`${je}-${be}`,Te=`Thng ${be}/${je}`;return i.jsx("button",{onClick:()=>{y("month"),k(ie)},className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${p==="month"&&w===ie?"bg-slate-600 text-white":"bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-600"}`,children:Te},ie)})})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 mb-3",children:"Ty chnh:"}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("input",{type:"date",value:S,onChange:me=>{O(me.target.value),me.target.value&&E&&y("custom")},className:"flex-1 px-3 py-2 bg-slate-50 dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-sm text-slate-900 dark:text-slate-100"}),i.jsx("span",{className:"text-slate-500",children:"-"}),i.jsx("input",{type:"date",value:E,onChange:me=>{D(me.target.value),S&&me.target.value&&y("custom")},className:"flex-1 px-3 py-2 bg-slate-50 dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-sm text-slate-900 dark:text-slate-100"})]})]})]}),i.jsxs("div",{className:"border-t border-slate-200 dark:border-slate-700 px-6 py-4 flex justify-end gap-3",children:[i.jsx("button",{onClick:()=>W(!1),className:"px-4 py-2 bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-300 rounded-lg text-sm font-medium transition-colors",children:"Hy"}),i.jsx("button",{onClick:()=>W(!1),className:"px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg text-sm font-medium transition-colors",children:"p dng"})]})]})}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700",children:[i.jsx("div",{className:"px-4 py-3 bg-slate-50 dark:bg-slate-700/50 border-b border-slate-200 dark:border-slate-600",children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"w-16 text-center",children:i.jsx("input",{type:"checkbox",className:"rounded border-slate-400"})}),i.jsx("div",{className:"flex-1 min-w-[180px]",children:i.jsx("span",{className:"text-xs font-semibold text-slate-600 dark:text-slate-300 uppercase",children:"M phiu"})}),i.jsx("div",{className:"flex-1 min-w-[180px]",children:i.jsx("span",{className:"text-xs font-semibold text-slate-600 dark:text-slate-300 uppercase",children:"Khch hng"})}),i.jsx("div",{className:"flex-1 min-w-[200px]",children:i.jsx("span",{className:"text-xs font-semibold text-slate-600 dark:text-slate-300 uppercase",children:"Chi tit"})}),i.jsx("div",{className:"w-56",children:i.jsx("span",{className:"text-xs font-semibold text-slate-600 dark:text-slate-300 uppercase",children:"Hn tr"})}),i.jsx("div",{className:"w-24 text-center",children:i.jsx("span",{className:"text-xs font-semibold text-slate-600 dark:text-slate-300 uppercase",children:"Thao tc"})})]})}),Se.length===0?i.jsx("div",{className:"px-4 py-12 text-center text-slate-400",children:"Khng c phiu sa cha no."}):i.jsx("div",{className:"divide-y divide-slate-700",children:Se.map(me=>{var ie,Te;const se=((ie=me.partsUsed)==null?void 0:ie.reduce((De,ye)=>De+ye.quantity*ye.price,0))||0,je=((Te=me.additionalServices)==null?void 0:Te.reduce((De,ye)=>De+(ye.price||0)*(ye.quantity||1),0))||0,be=me.laborCost||0;return i.jsx("div",{className:"px-4 py-4 bg-slate-900 dark:bg-slate-950 hover:bg-slate-800 dark:hover:bg-slate-900 transition-colors",children:i.jsxs("div",{className:"flex items-start gap-4",children:[i.jsxs("div",{className:"w-16 flex flex-col items-center gap-2 pt-1",children:[i.jsx("input",{type:"checkbox",className:"rounded border-slate-600"}),i.jsx("div",{className:"w-10 h-10 bg-slate-800 dark:bg-slate-700 rounded flex items-center justify-center flex-shrink-0",children:i.jsx(N4,{className:"w-5 h-5 text-slate-400"})})]}),i.jsxs("div",{className:"flex-1 min-w-[180px]",children:[i.jsx("div",{className:"font-mono font-bold text-blue-400 text-sm mb-1",children:Il(me.id,re==null?void 0:re.work_order_prefix)}),i.jsxs("div",{className:"text-xs text-slate-400",children:[i.jsx("span",{children:"Ngy: "}),i.jsx("span",{className:"text-slate-300",children:Bn(me.creationDate,!0)})]}),i.jsxs("div",{className:"text-xs text-cyan-400",children:["NV: ",me.technicianName||"Cha phn cng"]})]}),i.jsxs("div",{className:"flex-1 min-w-[180px]",children:[i.jsx("div",{className:"font-semibold text-base text-white mb-1",children:me.customerName}),i.jsx("div",{className:"text-xs text-slate-400",children:me.customerPhone}),i.jsxs("div",{className:"text-xs text-slate-400",children:[i.jsx("span",{className:"font-medium",children:"Xe: "}),i.jsx("span",{children:me.vehicleModel||"N/A"}),me.licensePlate&&i.jsxs("span",{className:"ml-1",children:["- ",me.licensePlate]})]}),i.jsx("div",{className:"text-xs text-slate-500 italic mt-1",children:me.issueDescription||"Khng c m t"})]}),i.jsx("div",{className:"flex-1 min-w-[200px]",children:i.jsxs("div",{className:"space-y-1",children:[me.partsUsed&&me.partsUsed.length>0&&i.jsxs("div",{className:"mb-2",children:[i.jsx("div",{className:"text-xs font-medium text-slate-400 mb-0.5",children:"Ph tng:"}),i.jsx("div",{className:"space-y-0.5",children:me.partsUsed.map((De,ye)=>i.jsxs("div",{className:"text-xs text-slate-300",children:[" ",De.partName," x",De.quantity]},ye))})]}),me.additionalServices&&me.additionalServices.length>0&&i.jsxs("div",{className:"mb-2",children:[i.jsx("div",{className:"text-xs font-medium text-slate-400 mb-0.5",children:"Gia cng/t hng:"}),i.jsx("div",{className:"space-y-0.5",children:me.additionalServices.map((De,ye)=>i.jsxs("div",{className:"text-xs text-slate-300",children:[" ",De.description," x",De.quantity||1]},ye))})]}),i.jsx("div",{className:"mt-2",children:i.jsx(Y,{status:me.status||"Tip nhn"})}),(!me.partsUsed||me.partsUsed.length===0)&&(!me.additionalServices||me.additionalServices.length===0)&&i.jsx("div",{className:"text-xs text-slate-500 italic mb-2",children:"Cha c chi tit"})]})}),i.jsxs("div",{className:"w-56",children:[i.jsxs("div",{className:"space-y-1 text-xs text-right mb-3",children:[be>0&&i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-slate-500",children:"Tin cng:"}),i.jsx("span",{className:"text-slate-300",children:Ie(be)})]}),se>0&&i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-slate-500",children:"Tin ph tng:"}),i.jsx("span",{className:"text-blue-400 font-medium",children:Ie(se)})]}),je>0&&i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-slate-500",children:"Gi cng/t hng:"}),i.jsx("span",{className:"text-slate-300",children:Ie(je)})]}),me.total>0&&i.jsxs("div",{className:"flex justify-between pt-2 border-t border-slate-700 text-sm",children:[i.jsx("span",{className:"text-slate-300 font-bold",children:"Tng cng:"}),i.jsx("span",{className:"text-blue-400 font-bold text-sm",children:Ie(me.total)})]}),me.discount&&me.discount>0&&i.jsxs("div",{className:"flex justify-between text-right text-xs",children:[i.jsx("span",{className:"text-red-500",children:"Gim gi:"}),i.jsx("span",{className:"text-red-500",children:Ie(me.discount)})]}),me.additionalPayment&&me.additionalPayment>0&&i.jsxs("div",{className:"flex justify-between text-right text-xs text-green-500",children:[i.jsx("span",{children:"Thanh ton trc:"}),i.jsxs("span",{children:["-",Ie(me.additionalPayment)]})]}),me.remainingAmount!==void 0&&me.remainingAmount>0&&i.jsxs("div",{className:"flex justify-between text-right text-xs mt-1",children:[i.jsx("span",{children:"Cn phi thu:"}),i.jsx("span",{className:`font-bold ${me.remainingAmount>0?"text-red-500":"text-green-500"}`,children:Ie(me.remainingAmount)})]})]}),i.jsx("div",{className:"mt-2",children:i.jsx(ne,{status:me.paymentStatus})})]}),i.jsxs("div",{className:"w-24 flex flex-col items-center gap-2",children:[i.jsxs("button",{onClick:()=>F(me),className:"px-4 py-1.5 bg-cyan-500 hover:bg-cyan-600 text-white text-sm rounded-md transition-colors min-w-[70px] flex items-center justify-center gap-1",title:"Chnh sa phiu",children:[i.jsx(pF,{className:"w-3.5 h-3.5"}),i.jsx("span",{children:"Sa"})]}),i.jsxs("button",{onClick:()=>fe(me),className:"px-4 py-1.5 bg-blue-500 hover:bg-blue-600 text-white text-sm rounded-md transition-colors min-w-[70px] flex items-center justify-center gap-1",children:[i.jsx("span",{children:""}),i.jsx("span",{children:"Xem"})]}),i.jsx("button",{onClick:()=>fe(me),className:"p-2 text-slate-400 hover:text-blue-500 hover:bg-blue-50 dark:hover:bg-blue-900/20 dark:hover:text-blue-400 rounded transition-colors",title:"In phiu dch v",children:i.jsx(Kg,{className:"w-4 h-4"})})]})]})},me.id)})})]}),K&&Z&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl w-full max-w-4xl max-h-[90vh] flex flex-col",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 px-6 py-4 flex items-center justify-between rounded-t-xl flex-shrink-0",children:[i.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:"Xem trc phiu in"}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("button",{onClick:te,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg flex items-center gap-2 transition",children:[i.jsx(Kg,{className:"w-4 h-4"}),"In phiu"]}),i.jsx("button",{onClick:()=>{Q(!1),q(null)},className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-300","aria-label":"ng",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"w-5 h-5",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]})]}),i.jsx("div",{className:"flex-1 overflow-y-auto p-6 bg-slate-100 dark:bg-slate-900",children:i.jsx("div",{className:"bg-white shadow-lg mx-auto",style:{width:"148mm",minHeight:"210mm",color:"#000"},children:i.jsxs("div",{style:{padding:"10mm"},children:[i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr auto 1fr",gap:"3mm",marginBottom:"4mm",alignItems:"start",borderBottom:"2px solid #3b82f6",paddingBottom:"3mm"},children:[i.jsxs("div",{style:{fontSize:"8.5pt",lineHeight:"1.4"},children:[i.jsx("div",{style:{fontWeight:"bold",fontSize:"11pt",marginBottom:"1mm",color:"#1e40af"},children:(re==null?void 0:re.store_name)||"Nhn Lm SmartCare"}),i.jsxs("div",{style:{color:"#000"},children:[""," ",(re==null?void 0:re.address)||"p Ph Li B, X Long Ph Thun, ng Thp"]}),i.jsxs("div",{style:{color:"#000"},children:[" ",(re==null?void 0:re.phone)||"0947.747.907"]}),(re==null?void 0:re.email)&&i.jsxs("div",{style:{color:"#000"},children:[" ",re.email]})]}),(re==null?void 0:re.logo_url)&&i.jsx("div",{style:{textAlign:"center"},children:i.jsx("img",{src:re.logo_url,alt:"Logo",style:{height:"15mm",width:"auto",objectFit:"contain"}})}),i.jsx("div",{style:{fontSize:"8pt",lineHeight:"1.4",textAlign:"right"},children:(re==null?void 0:re.bank_name)&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{fontWeight:"bold",marginBottom:"1mm",color:"#000"},children:[" ",re.bank_name]}),re.bank_account_number&&i.jsxs("div",{style:{color:"#000"},children:["STK: ",re.bank_account_number]}),re.bank_account_holder&&i.jsx("div",{style:{color:"#000",fontSize:"7.5pt"},children:re.bank_account_holder}),re.bank_qr_url&&i.jsx("div",{style:{marginTop:"2mm",display:"inline-block"},children:i.jsx("img",{src:re.bank_qr_url,alt:"QR Banking",style:{height:"15mm",width:"15mm",objectFit:"contain"}})})]})})]}),i.jsxs("div",{style:{marginBottom:"4mm"},children:[i.jsx("div",{style:{textAlign:"center",marginBottom:"2mm"},children:i.jsx("h1",{style:{fontSize:"16pt",fontWeight:"bold",margin:"0",textTransform:"uppercase",color:"#1e40af"},children:"PHIU DCH V SA CHA"})}),i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"9pt",color:"#666"},children:[i.jsx("div",{children:new Date(Z.creationDate).toLocaleString("vi-VN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}),i.jsxs("div",{style:{fontWeight:"bold"},children:["M:"," ",Il(Z.id,re==null?void 0:re.work_order_prefix)]})]})]}),i.jsxs("div",{style:{border:"1px solid #ddd",padding:"3mm",marginBottom:"3mm",borderRadius:"2mm",backgroundColor:"#f8fafc",color:"#000",fontSize:"9pt"},children:[i.jsxs("div",{style:{display:"flex",gap:"4mm",marginBottom:"1.5mm"},children:[i.jsxs("div",{style:{flex:1},children:[i.jsx("span",{style:{fontWeight:"bold"},children:"Khch hng:"})," ",Z.customerName]}),i.jsxs("div",{style:{flex:"0 0 auto"},children:[i.jsx("span",{style:{fontWeight:"bold"},children:"ST:"})," ",Z.customerPhone]})]}),i.jsxs("div",{style:{display:"flex",gap:"4mm"},children:[i.jsxs("div",{style:{flex:1},children:[i.jsx("span",{style:{fontWeight:"bold"},children:"Loi xe:"})," ",Z.vehicleModel]}),i.jsxs("div",{style:{flex:"0 0 auto"},children:[i.jsx("span",{style:{fontWeight:"bold"},children:"Bin s:"})," ",Z.licensePlate]})]})]}),i.jsx("div",{style:{border:"1px solid #ddd",padding:"4mm",marginBottom:"4mm",borderRadius:"2mm",color:"#000"},children:i.jsxs("div",{style:{display:"flex",gap:"3mm"},children:[i.jsx("div",{style:{fontWeight:"bold",minWidth:"20%",flexShrink:0},children:"M t s c:"}),i.jsx("div",{style:{flex:1,whiteSpace:"pre-wrap"},children:Z.issueDescription||"Khng c m t"})]})}),Z.partsUsed&&Z.partsUsed.length>0&&i.jsxs("div",{style:{marginBottom:"4mm",color:"#000"},children:[i.jsx("p",{style:{fontWeight:"bold",margin:"0 0 2mm 0",fontSize:"11pt"},children:"Ph tng s dng:"}),i.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",border:"1px solid #ddd"},children:[i.jsx("thead",{children:i.jsxs("tr",{style:{backgroundColor:"#f5f5f5"},children:[i.jsx("th",{style:{border:"1px solid #ddd",padding:"2mm",textAlign:"left",fontSize:"10pt"},children:"Tn ph tng"}),i.jsx("th",{style:{border:"1px solid #ddd",padding:"2mm",textAlign:"center",fontSize:"10pt",width:"15%"},children:"SL"}),i.jsx("th",{style:{border:"1px solid #ddd",padding:"2mm",textAlign:"right",fontSize:"10pt",width:"25%"},children:"n gi"}),i.jsx("th",{style:{border:"1px solid #ddd",padding:"2mm",textAlign:"right",fontSize:"10pt",width:"25%"},children:"Thnh tin"})]})}),i.jsx("tbody",{children:Z.partsUsed.map((me,se)=>i.jsxs("tr",{children:[i.jsx("td",{style:{border:"1px solid #ddd",padding:"2mm",fontSize:"10pt"},children:me.partName}),i.jsx("td",{style:{border:"1px solid #ddd",padding:"2mm",textAlign:"center",fontSize:"10pt"},children:me.quantity}),i.jsx("td",{style:{border:"1px solid #ddd",padding:"2mm",textAlign:"right",fontSize:"10pt"},children:Ie(me.price)}),i.jsx("td",{style:{border:"1px solid #ddd",padding:"2mm",textAlign:"right",fontSize:"10pt",fontWeight:"bold"},children:Ie(me.price*me.quantity)})]},se))})]})]}),i.jsx("div",{style:{border:"1px solid #ddd",padding:"4mm",marginBottom:"4mm",borderRadius:"2mm",backgroundColor:"#f9f9f9",color:"#000"},children:i.jsx("table",{style:{width:"100%",borderSpacing:"0",color:"#000"},children:i.jsxs("tbody",{children:[i.jsxs("tr",{children:[i.jsx("td",{style:{fontWeight:"bold",paddingBottom:"2mm",fontSize:"10pt"},children:"Tin ph tng:"}),i.jsx("td",{style:{textAlign:"right",paddingBottom:"2mm",fontSize:"10pt"},children:Ie(((ee=Z.partsUsed)==null?void 0:ee.reduce((me,se)=>me+se.price*se.quantity,0))||0)})]}),i.jsxs("tr",{children:[i.jsx("td",{style:{fontWeight:"bold",paddingBottom:"2mm",fontSize:"10pt"},children:"Ph dch v:"}),i.jsx("td",{style:{textAlign:"right",paddingBottom:"2mm",fontSize:"10pt"},children:Ie(Z.laborCost||0)})]}),i.jsxs("tr",{children:[i.jsx("td",{style:{fontWeight:"bold",paddingBottom:"2mm",fontSize:"10pt"},children:"Gi cng/t hng:"}),i.jsx("td",{style:{textAlign:"right",paddingBottom:"2mm",fontSize:"10pt"},children:Ie(((Ce=Z.additionalServices)==null?void 0:Ce.reduce((me,se)=>me+(se.price||0)*(se.quantity||1),0))||0)})]}),i.jsxs("tr",{style:{borderTop:"2px solid #333"},children:[i.jsx("td",{style:{fontWeight:"bold",paddingTop:"2mm",fontSize:"12pt"},children:"TNG CNG:"}),i.jsxs("td",{style:{textAlign:"right",paddingTop:"2mm",fontSize:"12pt",fontWeight:"bold",color:"#2563eb"},children:[Ie(Z.total)," "]})]})]})})}),i.jsx("div",{style:{marginTop:"8mm",paddingTop:"4mm",borderTop:"1px dashed #999",color:"#000"},children:i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"10pt"},children:[i.jsxs("div",{style:{textAlign:"center",width:"45%"},children:[i.jsx("p",{style:{fontWeight:"bold",margin:"0 0 10mm 0",color:"#000"},children:"Khch hng"}),i.jsx("p",{style:{margin:"0",fontSize:"9pt",color:"#666"},children:"(K v ghi r h tn)"})]}),i.jsxs("div",{style:{textAlign:"center",width:"45%"},children:[i.jsx("p",{style:{fontWeight:"bold",margin:"0 0 10mm 0",color:"#000"},children:"Nhn vin"}),i.jsx("p",{style:{margin:"0",fontSize:"9pt",color:"#666"},children:"(K v ghi r h tn)"})]})]})}),i.jsxs("div",{style:{marginTop:"4mm",padding:"3mm",backgroundColor:"#fff9e6",border:"1px solid #ffd700",borderRadius:"2mm",fontSize:"9pt",textAlign:"center",color:"#000"},children:[i.jsx("p",{style:{margin:"0",fontStyle:"italic",color:"#000"},children:"Cm n qu khch  s dng dch v!"}),i.jsx("p",{style:{margin:"1mm 0 0 0",fontStyle:"italic",color:"#000"},children:"Vui lng gi phiu ny  i chiu khi nhn xe"})]})]})})})]})}),i.jsx("div",{id:"work-order-receipt",className:"hidden"})]})},gje=({isOpen:e,onClose:t,customer:r,sales:n,workOrders:a})=>{const[s,l]=T.useState("sales");if(!e||!r)return null;const o=n.filter(k=>{var S,O;return((S=k.customer)==null?void 0:S.id)===r.id||((O=k.customer)==null?void 0:O.phone)===r.phone}),c=a.filter(k=>k.customerPhone===r.phone),d=o.reduce((k,S)=>k+(S.total||0),0),f=c.reduce((k,S)=>k+(S.total||0),0),p=d+f,y=[...o.map(k=>new Date(k.date).toDateString()),...c.map(k=>new Date(k.creationDate||k.id).toDateString())],N=new Set(y).size,w=Math.floor(p/1e4);return i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[70] p-4 backdrop-blur-sm",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg w-full max-w-5xl max-h-[90vh] overflow-hidden flex flex-col shadow-2xl",children:[i.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{children:[i.jsxs("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:["Lch s: ",r.name]}),i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[" ",r.phone]})]}),i.jsx("button",{onClick:t,className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg transition-colors",children:i.jsx(mp,{className:"w-5 h-5"})})]}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 p-6 bg-slate-50 dark:bg-slate-900/50 border-b border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:o.length}),i.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:"Ha n"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:c.length}),i.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:"Phiu SC"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:Ie(p)}),i.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:"Tng chi"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-2xl font-bold text-orange-600 dark:text-orange-400",children:N}),i.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:"Ln n"})]}),i.jsxs("div",{className:"text-center",children:[i.jsxs("div",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400",children:[" ",w.toLocaleString()]}),i.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:"im TL"})]})]}),i.jsxs("div",{className:"flex gap-4 px-6 pt-4 border-b border-slate-200 dark:border-slate-700 overflow-x-auto no-scrollbar",children:[i.jsxs("button",{onClick:()=>l("sales"),className:`px-4 py-2 font-medium transition-colors ${s==="sales"?"text-blue-600 dark:text-blue-400 border-b-2 border-blue-600":"text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-slate-100"}`,children:[" Ha n (",o.length,")"]}),i.jsxs("button",{onClick:()=>l("workorders"),className:`px-4 py-2 font-medium transition-colors ${s==="workorders"?"text-blue-600 dark:text-blue-400 border-b-2 border-blue-600":"text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-slate-100"}`,children:[" Phiu sa cha (",c.length,")"]})]}),i.jsx("div",{className:"flex-1 overflow-auto p-6 custom-scrollbar",children:s==="sales"?i.jsx("div",{className:"space-y-3",children:o.length===0?i.jsx("div",{className:"text-center py-12 text-slate-500",children:"Cha c ha n no"}):o.map(k=>i.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg p-4 hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors",children:[i.jsxs("div",{className:"flex items-start justify-between mb-3",children:[i.jsxs("div",{children:[i.jsx("div",{className:"font-bold text-blue-600 dark:text-blue-400",children:k.sale_code||k.id}),i.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:Bn(k.date)})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"text-lg font-bold text-slate-900 dark:text-slate-100",children:Ie(k.total)}),i.jsx("div",{className:"text-xs text-slate-500",children:k.paymentMethod==="cash"?" Tin mt":" CK"})]})]}),i.jsx("div",{className:"space-y-1",children:k.items.map((S,O)=>i.jsxs("div",{className:"text-sm text-slate-700 dark:text-slate-300 flex justify-between",children:[i.jsxs("span",{children:[S.quantity," x ",S.partName]}),i.jsx("span",{className:"font-medium",children:Ie(S.quantity*S.sellingPrice)})]},O))})]},k.id))}):i.jsx("div",{className:"space-y-3",children:c.length===0?i.jsx("div",{className:"text-center py-12 text-slate-500",children:"Cha c phiu sa cha no"}):c.map(k=>{const S=k.status==="Tr my"||k.status===" sa xong",O=k.status==="ang sa",E=S?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-300":O?"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300":"bg-slate-100 text-slate-700 dark:bg-slate-700 dark:text-slate-300",D=S?"Hon thnh":O?"ang SC":"Ch x l";return i.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-lg p-4 hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors",children:[i.jsxs("div",{className:"flex items-start justify-between mb-3",children:[i.jsxs("div",{children:[i.jsx("div",{className:"font-bold text-green-600 dark:text-green-400",children:F1(k.id)}),i.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:[k.vehicleModel," - ",k.licensePlate]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"text-lg font-bold text-slate-900 dark:text-slate-100",children:Ie(k.total)}),i.jsx("div",{className:`text-xs px-2 py-1 rounded inline-block ${E}`,children:D})]})]}),i.jsxs("div",{className:"text-sm text-slate-700 dark:text-slate-300",children:[i.jsxs("div",{className:"mb-2",children:[i.jsx("span",{className:"font-medium",children:"Vn :"})," ",k.issueDescription]}),k.partsUsed&&k.partsUsed.length>0&&i.jsxs("div",{children:[i.jsx("span",{className:"font-medium",children:"Ph tng:"}),i.jsx("div",{className:"ml-4 space-y-1 mt-1",children:k.partsUsed.map((H,W)=>i.jsxs("div",{className:"text-xs flex justify-between",children:[i.jsxs("span",{children:[H.quantity," x ",H.name]}),i.jsx("span",{children:Ie(H.price*H.quantity)})]},W))})]})]})]},k.id)})})}),i.jsx("div",{className:"p-4 border-t border-slate-200 dark:border-slate-700 flex justify-end",children:i.jsx("button",{onClick:t,className:"px-4 py-2 bg-slate-600 hover:bg-slate-700 text-white rounded-lg transition-colors",children:"ng"})})]})})},bje=e=>{const t=e.loyaltyPoints||0,r=e.totalSpent||0,n=e.visitCount||0,a=e.lastVisit?new Date(e.lastVisit):new Date,s=Math.floor((Date.now()-a.getTime())/(1e3*60*60*24));return t>=5e3||r>=2e7||n>=20?"VIP":t>=2e3||r>=1e7||n>=10?"Loyal":s>180&&n>0?"Lost":s>90&&n>0?"At Risk":n>=2&&n<10?"Potential":"New"},vje=()=>{const{data:e=[],isLoading:t,refetch:r}=jF(),n=Kee(),a=Xee(),[s,l]=T.useState(20),o=async Le=>{if(Le.id)await a.mutateAsync({id:Le.id,updates:Le});else{const fe={...Le,id:`CUS-${Date.now()}-${Math.random().toString(16).slice(2)}`};await n.mutateAsync(fe)}r(),p(null)},[c,d]=T.useState(""),[f,p]=T.useState(null),[y,g]=T.useState(!1),[N,w]=T.useState(!1),[k,S]=T.useState("customers"),[O,E]=T.useState("all"),[D,H]=T.useState(null),[W,R]=T.useState("grid"),[z,U]=T.useState(!1),{data:Z=[]}=Mb(),{data:q=[]}=zV();T.useEffect(()=>{l(20)},[c,O]);const K=Le=>{const fe=Z.filter(ee=>{var Ce,me;return((Ce=ee.customer)==null?void 0:Ce.id)===Le.id||((me=ee.customer)==null?void 0:me.phone)===Le.phone}),F=q.filter(ee=>ee.customerPhone===Le.phone),te=fe.reduce((ee,Ce)=>ee+(Ce.total||0),0),Y=F.reduce((ee,Ce)=>ee+(Ce.total||0),0),ne=te+Y;return Math.floor(ne/1e4)};T.useEffect(()=>{e.forEach(Le=>{if(!Le.segment){const fe=bje(Le);a.mutate({id:Le.id,updates:{segment:fe}})}})},[e.length]);const Q=T.useMemo(()=>{const Le=c.toLowerCase();let fe=e.filter(F=>F.name.toLowerCase().includes(Le)||F.phone&&F.phone.includes(Le));if(O!=="all"){const te={vip:"VIP",loyal:"Loyal",potential:"Potential","at-risk":"At Risk",lost:"Lost",new:"New"}[O];fe=fe.filter(Y=>Y.segment===te)}return fe},[e,c,O]),re=T.useMemo(()=>Q.slice(0,s),[Q,s]),ae=async Le=>{confirm("Xc nhn xo khch hng ny?")&&(await a.mutateAsync({id:Le,updates:{status:"inactive"}}),r())},de=T.useMemo(()=>{const Le=e.length,fe=e.filter(F=>F.status==="active").length;return{total:Le,active:fe,newThisMonth:e.filter(F=>{if(!F.created_at)return!1;const te=new Date(F.created_at),Y=new Date;return te.getMonth()===Y.getMonth()&&te.getFullYear()===Y.getFullYear()}).length,revenue:0,vip:e.filter(F=>F.segment==="VIP").length,loyal:e.filter(F=>F.segment==="Loyal").length,potential:e.filter(F=>F.segment==="Potential").length,atRisk:e.filter(F=>F.segment==="At Risk").length,lost:e.filter(F=>F.segment==="Lost").length,new:e.filter(F=>F.segment==="New").length}},[e]),he=T.useMemo(()=>[{id:"all",label:"Tt c",hint:"Ton b danh sch",count:de.total,icon:"",activeClasses:"border-slate-300 bg-slate-100/80 text-slate-900 shadow-sm"},{id:"vip",label:"VIP",hint:" 5.000 im",count:de.vip,icon:"",activeClasses:"border-purple-200 bg-purple-50 text-purple-700 shadow-sm"},{id:"loyal",label:"Trung thnh",hint:"10+ lt",count:de.loyal,icon:"",activeClasses:"border-blue-200 bg-blue-50 text-blue-700 shadow-sm"},{id:"potential",label:"Tim nng",hint:"2-9 lt",count:de.potential,icon:"",activeClasses:"border-green-200 bg-green-50 text-green-700 shadow-sm"},{id:"at-risk",label:"Cn chm sc",hint:">90 ngy cha n",count:de.atRisk,icon:"",activeClasses:"border-orange-200 bg-orange-50 text-orange-700 shadow-sm"},{id:"lost",label:" mt",hint:"Khng quay li",count:de.lost,icon:"",activeClasses:"border-red-200 bg-red-50 text-red-700 shadow-sm"},{id:"new",label:"Khch mi",hint:"Thng ny",count:de.new,icon:"",activeClasses:"border-cyan-200 bg-cyan-50 text-cyan-700 shadow-sm"}],[de]),Se=T.useMemo(()=>[{id:"total",title:"Tng KH",value:de.total.toLocaleString(),subLabel:`${de.active} hot ng`,gradient:"from-blue-50 to-blue-100 dark:from-blue-900/30 dark:to-blue-800/20",border:"border-blue-200 dark:border-blue-800",labelClass:"text-blue-700 dark:text-blue-300",valueClass:"text-blue-900 dark:text-blue-100"},{id:"new",title:"Khch mi",value:de.newThisMonth.toLocaleString(),subLabel:" 0% thng ny",gradient:"from-green-50 to-emerald-100 dark:from-green-900/30 dark:to-emerald-800/20",border:"border-green-200 dark:border-green-800",labelClass:"text-green-700 dark:text-green-300",valueClass:"text-green-900 dark:text-green-100"},{id:"avg",title:"DT TB",value:"0 ",subLabel:"/ khch hng",gradient:"from-purple-50 to-violet-100 dark:from-purple-900/30 dark:to-violet-800/20",border:"border-purple-200 dark:border-purple-800",labelClass:"text-purple-700 dark:text-purple-300",valueClass:"text-purple-900 dark:text-purple-100"},{id:"atRisk",title:"Cn CS",value:de.atRisk.toLocaleString(),subLabel:"0 tim nng",gradient:"from-orange-50 to-amber-100 dark:from-orange-900/30 dark:to-amber-800/20",border:"border-orange-200 dark:border-orange-800",labelClass:"text-orange-700 dark:text-orange-300",valueClass:"text-orange-900 dark:text-orange-100"}],[de]),ke={VIP:{label:"VIP",badgeClass:"bg-purple-100 text-purple-700 border border-purple-200 dark:bg-purple-900/30 dark:text-purple-200 dark:border-purple-700",avatarClass:"bg-purple-50 text-purple-700 dark:bg-purple-900/40",icon:""},Loyal:{label:"Trung thnh",badgeClass:"bg-blue-100 text-blue-700 border border-blue-200 dark:bg-blue-900/30 dark:text-blue-200 dark:border-blue-700",avatarClass:"bg-blue-50 text-blue-700 dark:bg-blue-900/40",icon:""},Potential:{label:"Tim nng",badgeClass:"bg-green-100 text-green-700 border border-green-200 dark:bg-green-900/30 dark:text-green-200 dark:border-green-700",avatarClass:"bg-green-50 text-green-700 dark:bg-green-900/40",icon:""},"At Risk":{label:"Cn chm sc",badgeClass:"bg-orange-100 text-orange-700 border border-orange-200 dark:bg-orange-900/30 dark:text-orange-200 dark:border-orange-700",avatarClass:"bg-orange-50 text-orange-700 dark:bg-orange-900/40",icon:""},Lost:{label:" mt",badgeClass:"bg-red-100 text-red-600 border border-red-200 dark:bg-red-900/30 dark:text-red-200 dark:border-red-700",avatarClass:"bg-red-50 text-red-600 dark:bg-red-900/40",icon:""},New:{label:"Khch mi",badgeClass:"bg-cyan-100 text-cyan-700 border border-cyan-200 dark:bg-cyan-900/30 dark:text-cyan-200 dark:border-cyan-700",avatarClass:"bg-cyan-50 text-cyan-700 dark:bg-cyan-900/40",icon:""},default:{label:"Khch hng",badgeClass:"bg-slate-100 text-slate-700 border border-slate-200 dark:bg-slate-800 dark:text-slate-200 dark:border-slate-600",avatarClass:"bg-slate-100 text-slate-600 dark:bg-slate-800",icon:""}};return i.jsxs("div",{className:"h-full flex flex-col bg-slate-50 dark:bg-slate-900 overflow-hidden",children:[i.jsx("div",{className:"bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 flex-none z-20 shadow-sm",children:i.jsxs("div",{className:"flex items-center px-6 overflow-x-auto no-scrollbar",children:[i.jsxs("button",{onClick:()=>S("customers"),className:`flex items-center gap-2 px-4 py-3 md:py-4 border-b-2 font-medium text-sm transition-colors whitespace-nowrap ${k==="customers"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-slate-200"}`,children:[i.jsx(zge,{className:"w-5 h-5"}),i.jsxs("span",{children:["Khch hng (",de.total,")"]})]}),i.jsxs("button",{onClick:()=>S("suppliers"),className:`flex items-center gap-2 px-4 py-3 md:py-4 border-b-2 font-medium text-sm transition-colors whitespace-nowrap ${k==="suppliers"?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-slate-200"}`,children:[i.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),i.jsx("span",{children:"Nh cung cp (0)"})]})]})}),k==="customers"?i.jsxs("div",{className:"flex-1 overflow-y-auto p-6 custom-scrollbar relative",children:[i.jsxs("div",{className:"sticky top-0 z-10 pb-4 -mt-2 pt-2 bg-slate-50/95 dark:bg-slate-900/95 backdrop-blur-sm transition-all",children:[i.jsxs("div",{className:"flex flex-col md:flex-row gap-3 mb-4",children:[i.jsxs("div",{className:"flex-1 relative w-full",children:[i.jsx("svg",{className:"w-5 h-5 absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),i.jsx("input",{type:"text",placeholder:"Tm theo tn, ST, bin s xe...",value:c,onChange:Le=>d(Le.target.value),className:"w-full pl-10 pr-14 md:pr-4 py-2.5 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 shadow-sm"}),i.jsxs("button",{onClick:()=>U(!0),className:"md:hidden absolute right-2 top-1/2 -translate-y-1/2 inline-flex items-center gap-1 rounded-full border border-slate-200 bg-white px-3 py-1.5 text-[11px] font-semibold text-slate-600 shadow-sm transition-colors hover:text-slate-900 dark:border-slate-700 dark:bg-slate-800 dark:text-slate-300",children:[i.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.75a.75.75 0 100-1.5.75.75 0 000 1.5zm0 6a.75.75 0 100-1.5.75.75 0 000 1.5zm0 6a.75.75 0 100-1.5.75.75 0 000 1.5z"})}),i.jsx("span",{children:"Tc v"})]})]}),i.jsxs("div",{className:"hidden md:flex gap-2 overflow-x-auto pb-2 md:pb-0 no-scrollbar",children:[i.jsxs("button",{onClick:()=>w(!0),className:"flex items-center gap-2 px-4 py-2.5 bg-green-600 hover:bg-green-700 text-white rounded-lg font-medium transition-colors whitespace-nowrap shadow-sm",children:[i.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),i.jsx("span",{children:"Upload DS"})]}),i.jsxs("button",{className:"flex items-center gap-2 px-4 py-2.5 bg-orange-500 hover:bg-orange-600 text-white rounded-lg font-medium transition-colors whitespace-nowrap shadow-sm",onClick:()=>alert("Tnh nng ang pht trin"),children:[i.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),i.jsx("span",{children:"Nhc BD"})]}),i.jsxs("button",{onClick:()=>p({}),className:"flex items-center gap-2 px-4 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors whitespace-nowrap shadow-sm",children:[i.jsx(Cc,{className:"w-5 h-5"}),i.jsx("span",{children:"Thm KH"})]})]})]}),i.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white/80 p-4 shadow-sm dark:border-slate-700 dark:bg-slate-800/60 md:border-none md:bg-transparent md:p-0 md:shadow-none",children:[i.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-[11px] font-semibold uppercase tracking-wide text-slate-500",children:"Phn khc khch hng"}),i.jsx("p",{className:"text-xs text-slate-400",children:"Chm  lc nhanh"})]}),i.jsxs("div",{className:"hidden sm:inline-flex rounded-2xl border border-slate-200 bg-white p-1 text-xs font-semibold dark:border-slate-600 dark:bg-slate-900/40",children:[i.jsxs("button",{onClick:()=>R("grid"),className:`flex flex-1 items-center justify-center gap-1 rounded-xl px-3 py-2 transition-colors sm:flex-none ${W==="grid"?"bg-slate-900 text-white dark:bg-slate-100 dark:text-slate-900":"text-slate-500 hover:text-slate-900 dark:text-slate-400 dark:hover:text-white"}`,children:[i.jsx(mee,{className:"h-4 w-4"}),i.jsx("span",{children:"Th"})]}),i.jsxs("button",{onClick:()=>R("list"),className:`flex flex-1 items-center justify-center gap-1 rounded-xl px-3 py-2 transition-colors sm:flex-none ${W==="list"?"bg-slate-900 text-white dark:bg-slate-100 dark:text-slate-900":"text-slate-500 hover:text-slate-900 dark:text-slate-400 dark:hover:text-white"}`,children:[i.jsx(mF,{className:"h-4 w-4"}),i.jsx("span",{children:"Danh sch"})]})]})]}),i.jsx("div",{className:"mt-3 flex gap-3 overflow-x-auto pb-1 no-scrollbar snap-x snap-mandatory md:mt-4 md:snap-none",children:he.map(Le=>i.jsx("button",{onClick:()=>E(Le.id),className:`min-w-[190px] snap-start rounded-2xl border px-4 py-3 text-left transition-all md:min-w-0 ${O===Le.id?`${Le.activeClasses} dark:bg-slate-800/80 dark:border-slate-600 dark:text-white`:"bg-white dark:bg-slate-800 text-slate-600 dark:text-slate-300 border-slate-200 dark:border-slate-700 hover:border-slate-300"}`,children:i.jsxs("div",{className:"flex items-center justify-between gap-3",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("span",{className:"text-lg",children:Le.icon}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-semibold",children:Le.label}),i.jsx("p",{className:"text-[11px] text-slate-500",children:Le.hint})]})]}),i.jsx("div",{className:"text-lg font-black text-slate-900 dark:text-slate-100",children:Le.count})]})},Le.id))})]})]}),i.jsxs("div",{className:"mb-6 mt-2",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[i.jsx("svg",{className:"w-5 h-5 text-slate-600 dark:text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),i.jsx("h2",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Thng k tng quan"})]}),i.jsx("div",{className:"flex gap-3 overflow-x-auto pb-2 snap-x snap-mandatory md:grid md:grid-cols-4 md:gap-4 md:overflow-visible md:snap-none",children:Se.map(Le=>i.jsxs("div",{className:`snap-start min-w-[170px] rounded-lg border bg-gradient-to-br p-3 md:p-4 ${Le.gradient} ${Le.border}`,children:[i.jsx("div",{className:`text-[10px] md:text-sm font-semibold mb-1 uppercase ${Le.labelClass}`,children:Le.title}),i.jsx("div",{className:`text-2xl md:text-3xl font-black ${Le.valueClass}`,children:Le.value}),i.jsx("div",{className:"text-[10px] md:text-xs mt-0.5 text-slate-600 dark:text-slate-300",children:Le.subLabel})]},Le.id))})]}),Q.length===0?i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-12 text-center",children:[i.jsx("div",{className:"flex justify-center mb-4",children:i.jsx("svg",{className:"w-16 h-16 text-slate-300 dark:text-slate-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})})}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg",children:"Khng tm thy khch hng no."})]}):i.jsxs(i.Fragment,{children:[W==="grid"?i.jsx("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3",children:re.map(Le=>{const fe=Le.segment&&ke[Le.segment]||ke.default,F=K(Le),te=Math.min(F/1e4*100,100),Y=Le.totalSpent||0,ne=Le.visitCount||0,ee=Le.vehicles||[];ee.find(me=>me.isPrimary)||ee[0];const Ce=ee.length>2;return i.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-5 shadow-sm transition-shadow hover:shadow-lg dark:border-slate-700 dark:bg-slate-800",children:[i.jsxs("div",{className:"flex items-start justify-between gap-3",children:[i.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[i.jsx("div",{className:`flex h-12 w-12 items-center justify-center rounded-2xl text-2xl ${fe.avatarClass}`,children:fe.icon}),i.jsxs("div",{className:"min-w-0",children:[i.jsx("p",{className:"text-base font-semibold text-slate-900 dark:text-slate-100 truncate",children:Le.name||"Cha t tn"}),i.jsxs("p",{className:"mt-0.5 flex flex-wrap items-center gap-2 text-xs text-slate-500 dark:text-slate-400",children:[i.jsx("span",{children:Le.phone||"Cha c s"}),Le.lastVisit&&i.jsxs("span",{className:"text-slate-400",children:[" Ln cui ",Bn(Le.lastVisit)]})]})]})]}),i.jsx("span",{className:`text-[10px] font-semibold uppercase px-3 py-1 rounded-full ${fe.badgeClass}`,children:fe.label})]}),ee.length>0?i.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[ee.slice(0,2).map(me=>i.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full border border-slate-200 bg-slate-50 px-3 py-1 text-xs font-medium text-slate-600 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-200",children:[me.isPrimary&&i.jsx("span",{className:"text-amber-500",children:""}),i.jsx("span",{children:me.model||"Khng r"}),me.licensePlate&&i.jsxs("span",{className:"text-[10px] text-slate-400",children:[" ",me.licensePlate]})]},me.id)),Ce&&i.jsxs("span",{className:"rounded-full bg-slate-100 px-3 py-1 text-xs text-slate-500 dark:bg-slate-700 dark:text-slate-300",children:["+",ee.length-2," xe na"]})]}):Le.vehicleModel?i.jsxs("div",{className:"mt-4 inline-flex items-center gap-2 rounded-full border border-slate-200 bg-slate-50 px-3 py-1 text-xs text-slate-600 dark:border-slate-600 dark:bg-slate-700 dark:text-slate-200",children:[i.jsx(j6,{className:"h-3.5 w-3.5"}),i.jsxs("span",{children:[Le.vehicleModel,Le.licensePlate?`  ${Le.licensePlate}`:""]})]}):null,i.jsxs("div",{className:"mt-4 grid grid-cols-3 gap-3 text-sm",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-[11px] uppercase text-slate-500",children:"Tng chi"}),i.jsx("p",{className:"text-base font-semibold text-slate-900 dark:text-slate-100",children:Ie(Y)})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-[11px] uppercase text-slate-500",children:"Ln n"}),i.jsx("p",{className:"text-base font-semibold text-slate-900 dark:text-slate-100",children:ne})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-[11px] uppercase text-slate-500",children:"Cui cng"}),i.jsx("p",{className:"text-base font-semibold text-slate-900 dark:text-slate-100",children:Le.lastVisit?Bn(Le.lastVisit):""})]})]}),i.jsxs("div",{className:"mt-3",children:[i.jsxs("div",{className:"flex items-center justify-between text-[11px] font-semibold text-amber-700 dark:text-amber-300",children:[i.jsx("span",{children:"im tch lu"}),i.jsx("span",{children:F.toLocaleString()})]}),i.jsx("div",{className:"mt-1 h-1.5 rounded-full bg-amber-100 dark:bg-amber-900/50",children:i.jsx("div",{className:"h-full rounded-full bg-gradient-to-r from-amber-500 via-yellow-400 to-orange-500",style:{width:`${te}%`}})})]}),"Chm  lc nhanh",i.jsxs("div",{className:"mt-4 flex flex-wrap items-center gap-2 border-t border-dashed border-slate-200 pt-3 dark:border-slate-700",children:[i.jsx("button",{onClick:()=>H(Le),className:"rounded-full bg-blue-50 px-3 py-1.5 text-xs font-semibold text-blue-600 transition-colors hover:bg-blue-100 dark:bg-blue-900/30 dark:text-blue-300",children:"Xem lch s"}),i.jsx("button",{onClick:()=>p(Le),className:"rounded-full bg-slate-100 px-3 py-1.5 text-xs font-semibold text-slate-700 transition-colors hover:bg-slate-200 dark:bg-slate-700 dark:text-slate-200",children:"Chnh sa"}),i.jsx("button",{onClick:()=>ae(Le.id),className:"rounded-full bg-red-50 px-3 py-1.5 text-xs font-semibold text-red-600 transition-colors hover:bg-red-100 dark:bg-red-900/30 dark:text-red-300",children:"Xa"})]})]},Le.id)})}):i.jsx("div",{className:"overflow-x-auto rounded-2xl border border-slate-200 bg-white shadow-sm dark:border-slate-700 dark:bg-slate-800",children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"bg-slate-50 text-left text-[11px] font-semibold uppercase tracking-wide text-slate-500 dark:bg-slate-900/40 dark:text-slate-300",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3",children:"Khch hng"}),i.jsx("th",{className:"px-4 py-3",children:"Lin h"}),i.jsx("th",{className:"px-4 py-3",children:"Xe"}),i.jsx("th",{className:"px-4 py-3",children:"Tng chi"}),i.jsx("th",{className:"px-4 py-3",children:"Ln n"}),i.jsx("th",{className:"px-4 py-3",children:"Ln cui"}),i.jsx("th",{className:"px-4 py-3 text-right",children:"Tc v"})]})}),i.jsx("tbody",{children:re.map(Le=>{const fe=Le.segment&&ke[Le.segment]||ke.default,F=Le.vehicles||[],te=F.find(ne=>ne.isPrimary)||F[0],Y=te?`${te.model||"Khng r"}${te.licensePlate?`  ${te.licensePlate}`:""}`:Le.vehicleModel?`${Le.vehicleModel}${Le.licensePlate?`  ${Le.licensePlate}`:""}`:"";return i.jsxs("tr",{className:"border-t border-slate-100 text-slate-600 dark:border-slate-700/60 dark:text-slate-300",children:[i.jsxs("td",{className:"px-4 py-3 align-top",children:[i.jsx("div",{className:"font-semibold text-slate-900 dark:text-slate-100",children:Le.name||"Cha t tn"}),i.jsxs("span",{className:`mt-1 inline-flex items-center gap-1 rounded-full px-2 py-0.5 text-[10px] font-semibold ${fe.badgeClass}`,children:[fe.icon," ",fe.label]})]}),i.jsxs("td",{className:"px-4 py-3 align-top",children:[i.jsx("div",{className:"font-medium text-slate-900 dark:text-slate-100",children:Le.phone||""}),i.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:["im:"," ",K(Le).toLocaleString()]})]}),i.jsx("td",{className:"px-4 py-3 align-top text-slate-900 dark:text-slate-100",children:Y}),i.jsx("td",{className:"px-4 py-3 align-top font-semibold text-slate-900 dark:text-slate-100",children:Ie(Le.totalSpent||0)}),i.jsx("td",{className:"px-4 py-3 align-top text-slate-900 dark:text-slate-100",children:Le.visitCount||0}),i.jsx("td",{className:"px-4 py-3 align-top text-slate-900 dark:text-slate-100",children:Le.lastVisit?Bn(Le.lastVisit):""}),i.jsx("td",{className:"px-4 py-3 align-top",children:i.jsxs("div",{className:"flex items-center justify-end gap-2",children:[i.jsx("button",{onClick:()=>H(Le),className:"rounded-lg border border-slate-200 p-2 text-slate-500 transition-colors hover:border-blue-500 hover:text-blue-600 dark:border-slate-600 dark:text-slate-400 dark:hover:border-blue-500",title:"Xem lch s",children:i.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),i.jsx("button",{onClick:()=>p(Le),className:"rounded-lg border border-slate-200 p-2 text-slate-500 transition-colors hover:border-blue-500 hover:text-blue-600 dark:border-slate-600 dark:text-slate-400 dark:hover:border-blue-500",title:"Chnh sa",children:i.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),i.jsx("button",{onClick:()=>ae(Le.id),className:"rounded-lg border border-red-200 p-2 text-red-500 transition-colors hover:bg-red-50 dark:border-red-900/60 dark:text-red-300 dark:hover:bg-red-900/40",title:"Xa",children:i.jsx(wH,{className:"h-4 w-4"})})]})})]},Le.id)})})]})}),s<Q.length&&i.jsx("div",{className:"flex justify-center pb-4 pt-8",children:i.jsxs("button",{onClick:()=>l(Le=>Le+20),className:"group flex items-center gap-2 rounded-full border border-slate-200 bg-white px-6 py-3 text-sm font-semibold text-slate-600 shadow-sm transition hover:border-blue-500 hover:text-blue-600 hover:shadow-md dark:border-slate-600 dark:bg-slate-800 dark:text-slate-200",children:[i.jsxs("span",{children:["Hin th thm"," ",Math.min(20,Q.length-s)," khch hng"]}),i.jsx("svg",{className:"h-4 w-4 transition-transform group-hover:translate-y-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})})]}),i.jsxs("button",{onClick:()=>p({}),className:"md:hidden fixed bottom-28 right-5 z-40 inline-flex items-center justify-center rounded-full bg-blue-600 p-4 text-white shadow-lg transition hover:bg-blue-700",children:[i.jsx(Cc,{className:"h-6 w-6"}),i.jsx("span",{className:"sr-only",children:"Thm khch hng"})]}),z&&i.jsxs("div",{className:"md:hidden fixed inset-0 z-30",children:[i.jsx("button",{onClick:()=>U(!1),className:"absolute inset-0 bg-black/40","aria-label":"ng"}),i.jsxs("div",{className:"absolute inset-x-0 bottom-0 rounded-t-3xl bg-white p-5 shadow-2xl dark:bg-slate-800",children:[i.jsx("div",{className:"mx-auto mb-4 h-1.5 w-12 rounded-full bg-slate-200 dark:bg-slate-600"}),i.jsx("h3",{className:"mb-4 text-sm font-semibold text-slate-600 dark:text-slate-300",children:"Tc v nhanh"}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("button",{onClick:()=>{U(!1),w(!0)},className:"flex w-full items-center gap-3 rounded-2xl border border-slate-200 bg-slate-50 px-4 py-3 text-left text-sm font-semibold text-slate-700 transition hover:border-blue-500 dark:border-slate-700 dark:bg-slate-700/40 dark:text-slate-200",children:[i.jsx("svg",{className:"h-5 w-5 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),"Upload danh sch"]}),i.jsxs("button",{onClick:()=>{U(!1),alert("Tnh nng ang pht trin")},className:"flex w-full items-center gap-3 rounded-2xl border border-slate-200 bg-slate-50 px-4 py-3 text-left text-sm font-semibold text-slate-700 transition hover:border-blue-500 dark:border-slate-700 dark:bg-slate-700/40 dark:text-slate-200",children:[i.jsx("svg",{className:"h-5 w-5 text-orange-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),"Nhc bo dng"]}),i.jsxs("button",{onClick:()=>{U(!1),p({})},className:"flex w-full items-center gap-3 rounded-2xl bg-blue-600 px-4 py-3 text-left text-sm font-semibold text-white shadow-lg transition hover:bg-blue-700",children:[i.jsx(Cc,{className:"h-5 w-5"})," Thm khch hng"]})]})]})]})]}):i.jsxs("div",{className:"flex-1 overflow-auto p-6 custom-scrollbar",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[i.jsxs("div",{className:"flex-1 relative",children:[i.jsx("svg",{className:"w-5 h-5 absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),i.jsx("input",{type:"text",placeholder:"Tm theo tn hoc s in thoi...",className:"w-full pl-10 pr-4 py-2.5 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),i.jsxs("div",{className:"text-slate-600 dark:text-slate-400 text-sm font-medium",children:["Tng: ",i.jsx("span",{className:"font-bold",children:"0"})," nh cung cp"]}),i.jsxs("button",{onClick:()=>w(!0),className:"flex items-center gap-2 px-4 py-2.5 bg-green-600 hover:bg-green-700 text-white rounded-lg font-medium transition-colors",children:[i.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),i.jsx("span",{children:"Upload CSV"})]}),i.jsxs("button",{onClick:()=>g(!0),className:"flex items-center gap-2 px-4 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors",children:[i.jsx(Cc,{className:"w-5 h-5"}),i.jsx("span",{children:"Thm mi"})]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-12 text-center",children:[i.jsx("div",{className:"flex justify-center mb-4",children:i.jsx("svg",{className:"w-16 h-16 text-slate-300 dark:text-slate-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg",children:"Cha c nh cung cp."})]})]}),i.jsx(gje,{isOpen:!!D,onClose:()=>H(null),customer:D,sales:Z,workOrders:q}),f&&i.jsx(yje,{customer:f,onSave:o,onClose:()=>p(null)}),y&&i.jsx(wje,{onClose:()=>g(!1)}),N&&i.jsx(kje,{onClose:()=>w(!1),type:k})]})},yje=({customer:e,onSave:t,onClose:r})=>{const[n,a]=T.useState(e.name||""),[s,l]=T.useState(e.phone||""),o=()=>e.vehicles&&e.vehicles.length>0?e.vehicles:e.vehicleModel||e.licensePlate?[{id:`VEH-${Date.now()}`,model:e.vehicleModel||"",licensePlate:e.licensePlate||"",isPrimary:!0}]:[],[c,d]=T.useState(o()),[f,p]=T.useState({model:"",licensePlate:""}),y=()=>{if(!f.model.trim()&&!f.licensePlate.trim())return;const k={id:`VEH-${Date.now()}`,model:f.model.trim(),licensePlate:f.licensePlate.trim(),isPrimary:c.length===0};d([...c,k]),p({model:"",licensePlate:""})},g=k=>{d(c.filter(S=>S.id!==k))},N=k=>{d(c.map(S=>({...S,isPrimary:S.id===k})))},w=k=>{if(k.preventDefault(),!n.trim()){Ye.error("Vui lng nhp tn khch hng");return}if(s.trim()){const O=b6e(s.trim());if(!O.ok){Ye.error(O.error||"S in thoi khng hp l");return}}const S=c.find(O=>O.isPrimary)||c[0];t({id:e.id,name:n.trim(),phone:s.trim(),vehicles:c,vehicleModel:(S==null?void 0:S.model)||"",licensePlate:(S==null?void 0:S.licensePlate)||""}),r()};return i.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:i.jsxs("div",{className:"bg-slate-800 rounded-xl shadow-2xl max-w-md w-full p-6 border border-slate-700",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h2",{className:"text-xl font-semibold text-white",children:e.id?"Sa khch hng":"Thm khch hng"}),i.jsx("button",{onClick:r,className:"text-slate-400 hover:text-white transition-colors",children:i.jsx(mp,{className:"w-6 h-6"})})]}),i.jsxs("form",{onSubmit:w,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Tn khch"}),i.jsx("input",{type:"text",placeholder:"Nhp tn khch",required:!0,value:n,onChange:k=>a(k.target.value),className:"w-full px-4 py-3 bg-slate-900 border border-slate-600 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"S in thoi"}),i.jsx("input",{type:"text",placeholder:"VD: 09xxxx",value:s,onChange:k=>l(k.target.value),className:"w-full px-4 py-3 bg-slate-900 border border-slate-600 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Danh sch xe"}),c.length>0&&i.jsx("div",{className:"space-y-2 mb-3",children:c.map(k=>i.jsxs("div",{className:"flex items-center gap-2 p-2 bg-slate-700 rounded-lg",children:[i.jsx("button",{type:"button",onClick:()=>N(k.id),className:`flex-shrink-0 ${k.isPrimary?"text-yellow-400":"text-slate-500 hover:text-yellow-400"}`,title:k.isPrimary?"Xe chnh":"t lm xe chnh",children:i.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:i.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})})}),i.jsx(j6,{className:"w-4 h-4 text-blue-400 flex-shrink-0"}),i.jsxs("div",{className:"flex-1 text-sm text-white",children:[i.jsx("span",{className:"font-medium",children:k.model||""}),k.licensePlate&&i.jsxs("span",{className:"text-slate-400 ml-2",children:[" ",k.licensePlate]})]}),i.jsx("button",{type:"button",onClick:()=>g(k.id),className:"flex-shrink-0 text-red-400 hover:text-red-300",title:"Xa xe",children:i.jsx(wH,{className:"w-4 h-4"})})]},k.id))}),i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsx("input",{type:"text",placeholder:"Dng xe",value:f.model,onChange:k=>p({...f,model:k.target.value}),className:"px-3 py-2 bg-slate-900 border border-slate-600 rounded-lg text-white placeholder-slate-500 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"}),i.jsx("input",{type:"text",placeholder:"Bin s",value:f.licensePlate,onChange:k=>p({...f,licensePlate:k.target.value}),className:"px-3 py-2 bg-slate-900 border border-slate-600 rounded-lg text-white placeholder-slate-500 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),i.jsxs("button",{type:"button",onClick:y,className:"mt-2 w-full px-3 py-2 bg-green-600 hover:bg-green-700 text-white text-sm rounded-lg font-medium transition-colors flex items-center justify-center gap-2",children:[i.jsx(Cc,{className:"w-4 h-4"}),"Thm xe"]})]}),i.jsxs("div",{className:"flex gap-3 justify-end pt-2",children:[i.jsx("button",{type:"button",onClick:r,className:"px-6 py-2.5 bg-slate-700 hover:bg-slate-600 text-white border border-slate-600 rounded-lg font-medium transition-colors",children:"Hy"}),i.jsx("button",{type:"submit",className:"px-6 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors",children:"Lu"})]})]})]})})},wje=({onClose:e})=>{const[t,r]=T.useState(""),[n,a]=T.useState(""),[s,l]=T.useState(""),[o,c]=T.useState(""),d=f=>{f.preventDefault(),t.trim()&&(alert(`[M phng]  lu nh cung cp: ${t}`),e())};return i.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:i.jsxs("div",{className:"bg-slate-800 rounded-xl shadow-2xl max-w-md w-full p-6 border border-slate-700",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h2",{className:"text-xl font-semibold text-white",children:"Thm nh cung cp"}),i.jsx("button",{onClick:e,className:"text-slate-400 hover:text-white transition-colors",children:i.jsx(mp,{className:"w-6 h-6"})})]}),i.jsxs("form",{onSubmit:d,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:["Tn nh cung cp ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"text",placeholder:"Nhp tn NCC",required:!0,value:t,onChange:f=>r(f.target.value),className:"w-full px-4 py-3 bg-slate-900 border border-slate-600 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"S in thoi"}),i.jsx("input",{type:"text",placeholder:"VD: 09xxxx",value:n,onChange:f=>a(f.target.value),className:"w-full px-4 py-3 bg-slate-900 border border-slate-600 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"a ch"}),i.jsx("input",{type:"text",placeholder:"a ch lin h",value:s,onChange:f=>l(f.target.value),className:"w-full px-4 py-3 bg-slate-900 border border-slate-600 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Ghi ch"}),i.jsx("textarea",{rows:3,placeholder:"Ghi ch thm...",value:o,onChange:f=>c(f.target.value),className:"w-full px-4 py-3 bg-slate-900 border border-slate-600 rounded-lg text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all resize-none"})]}),i.jsxs("div",{className:"flex gap-3 justify-end pt-2",children:[i.jsx("button",{type:"button",onClick:e,className:"px-6 py-2.5 bg-slate-700 hover:bg-slate-600 text-white border border-slate-600 rounded-lg font-medium transition-colors",children:"Hy"}),i.jsx("button",{type:"submit",className:"px-6 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors",children:"Lu"})]})]})]})})},kje=({onClose:e,type:t})=>{const r=Gee(),n=T.useRef(null),[a,s]=T.useState([]),[l,o]=T.useState(""),[c,d]=T.useState(!1),f=g=>{var k;const N=(k=g.target.files)==null?void 0:k[0];if(!N)return;o("");const w=new FileReader;w.onload=S=>{var z;const O=(z=S.target)==null?void 0:z.result;if(!O)return;const E=O.split(`
`).map(U=>U.trim()).filter(Boolean);if(E.length===0){o("File CSV trng.");return}const D=E[0].toLowerCase(),W=D.includes("name")||D.includes("phone")||D.includes("tn")||D.includes("st")?E.slice(1):E,R=[];for(const U of W){const Z=U.split(",").map(q=>q.trim());Z.length===0||!Z[0]||R.push({name:Z[0],phone:Z[1]||void 0})}if(R.length===0){o("Khng tm thy d liu hp l trong CSV.");return}s(R)},w.readAsText(N)},p=async()=>{if(a.length!==0){d(!0);try{if(t==="customers"){const g=a.map(N=>({id:typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():`CUS-${Date.now()}-${Math.random().toString(16).slice(2)}`,name:N.name,phone:N.phone||"",created_at:new Date().toISOString()}));await r.mutateAsync(g),alert(` import thnh cng ${g.length} khch hng!`)}else alert("Chc nng import Nh cung cp ang c pht trin. Vui lng thm hook useCreateSuppliersBulk  kch hot.");e()}catch(g){console.error("Import error:",g),o("C li xy ra khi import. Vui lng th li.")}finally{d(!1)}}},y=t==="customers";return i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("h2",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:["Import ",y?"khch hng":"nh cung cp"," t CSV"]}),i.jsx("button",{onClick:e,className:"text-slate-500 hover:text-slate-700",children:i.jsx(mp,{className:"w-6 h-6"})})]}),i.jsxs("div",{className:"space-y-3 text-sm",children:[i.jsxs("p",{className:"text-slate-600 dark:text-slate-300",children:["Chn file CSV vi ct u tin l"," ",i.jsxs("strong",{children:["tn ",y?"khch hng":"nh cung cp"]}),", ct th hai l ",i.jsx("strong",{children:"s in thoi"})," (ty chn)."]}),i.jsx("input",{ref:n,type:"file",accept:".csv",onChange:f,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"}),l&&i.jsx("div",{className:"text-red-600 text-xs",children:l}),a.length>0&&i.jsxs("div",{className:"border rounded p-3 bg-slate-50 dark:bg-slate-900 max-h-64 overflow-y-auto custom-scrollbar",children:[i.jsxs("div",{className:"font-semibold mb-2 text-slate-900 dark:text-slate-100",children:["Xem trc (",a.length," mc):"]}),i.jsxs("table",{className:"w-full text-xs text-slate-700 dark:text-slate-300",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"text-left border-b dark:border-slate-700",children:[i.jsx("th",{className:"p-1",children:"Tn"}),i.jsx("th",{className:"p-1",children:"ST"})]})}),i.jsx("tbody",{children:a.slice(0,20).map((g,N)=>i.jsxs("tr",{className:"border-b dark:border-slate-700",children:[i.jsx("td",{className:"p-1",children:g.name}),i.jsx("td",{className:"p-1",children:g.phone||"--"})]},N))})]})]}),i.jsxs("div",{className:"flex gap-2 justify-end pt-2",children:[i.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 border rounded hover:bg-slate-50 dark:border-slate-600 dark:hover:bg-slate-700 dark:text-slate-300",children:"Hu"}),i.jsx("button",{disabled:a.length===0||c,onClick:p,className:"px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded disabled:opacity-50 disabled:cursor-not-allowed",children:c?"ang import...":`Import ${a.length>0?`(${a.length})`:""}`})]})]})]})})},Nje=()=>{const{customers:e,suppliers:t,currentBranchId:r,setCashTransactions:n,cashTransactions:a,setPaymentSources:s,paymentSources:l}=Ua(),{data:o=[],isLoading:c}=PC(),{data:d=[],isLoading:f}=Ok(),p=Tk(),y=kH(),g=Yge(),N=Zge(),w=Qge(),k=Jge(),[S,O]=T.useState(null);T.useEffect(()=>{(async()=>{const{data:Ve}=await Pt.from("store_settings").select("*").single();Ve&&O(Ve)})()},[]);const[E,D]=T.useState("customer"),[H,W]=T.useState(""),[R,z]=T.useState(!1),[U,Z]=T.useState(!1),[q,K]=T.useState([]),[Q,re]=T.useState([]),[ae,de]=T.useState(!1),[he,Se]=T.useState(null),[ke,Le]=T.useState(!1),[fe,F]=T.useState(!1),[te,Y]=T.useState(!1),[ne,ee]=T.useState(!1),[Ce,me]=T.useState(null),se=T.useMemo(()=>o.filter(lt=>lt.branchId===r),[o,r]),je=T.useMemo(()=>d.filter(lt=>lt.branchId===r),[d,r]),be=T.useMemo(()=>{if(!H)return se;const lt=H.toLowerCase();return se.filter(Ve=>{var Vt,Mt;return Ve.customerName.toLowerCase().includes(lt)||((Vt=Ve.phone)==null?void 0:Vt.includes(lt))||((Mt=Ve.licensePlate)==null?void 0:Mt.toLowerCase().includes(lt))})},[se,H]);T.useEffect(()=>{console.log("[DebtManager] branchCustomerDebts count:",se.length,"branchId:",r)},[se,r]),T.useEffect(()=>{const lt=Ve=>{Ve.target.closest(".debt-menu-dropdown")||Se(null)};return document.addEventListener("mousedown",lt),()=>document.removeEventListener("mousedown",lt)},[]);const ie=T.useMemo(()=>{if(!H)return je;const lt=H.toLowerCase();return je.filter(Ve=>Ve.supplierName.toLowerCase().includes(lt))},[je,H]),Te=T.useMemo(()=>se.reduce((lt,Ve)=>lt+Ve.remainingAmount,0),[se]),De=T.useMemo(()=>je.reduce((lt,Ve)=>lt+Ve.remainingAmount,0),[je]),ye=T.useMemo(()=>q.reduce((lt,Ve)=>{const Vt=se.find(Mt=>Mt.customerId===Ve);return lt+((Vt==null?void 0:Vt.remainingAmount)||0)},0),[q,se]),rt=T.useMemo(()=>Q.reduce((lt,Ve)=>{const Vt=je.find(Mt=>Mt.supplierId===Ve);return lt+((Vt==null?void 0:Vt.remainingAmount)||0)},0),[Q,je]),st=(lt,Ve)=>{K(Ve?[...q,lt]:q.filter(Vt=>Vt!==lt))},dt=(lt,Ve)=>{re(Ve?[...Q,lt]:Q.filter(Vt=>Vt!==lt))},et=()=>{de(!0)};return i.jsxs("div",{className:"h-full flex flex-col bg-secondary-bg",children:[i.jsx("div",{className:"bg-primary-bg border-b border-primary-border",children:i.jsx("div",{className:"flex items-center justify-between px-6",children:i.jsxs("div",{className:"flex items-center w-full md:w-auto",children:[i.jsx("button",{onClick:()=>D("customer"),className:`flex-1 md:flex-none px-6 py-4 font-medium text-sm transition-all text-center ${E==="customer"?"text-cyan-600 dark:text-cyan-400 border-b-2 border-cyan-600 dark:border-cyan-400":"text-secondary-text hover:text-primary-text"}`,children:"Cng n khch hng"}),i.jsx("button",{onClick:()=>D("supplier"),className:`flex-1 md:flex-none px-6 py-4 font-medium text-sm transition-all text-center ${E==="supplier"?"text-cyan-600 dark:text-cyan-400 border-b-2 border-cyan-600 dark:border-cyan-400":"text-secondary-text hover:text-primary-text"}`,children:"Cng n nh cung cp"})]})})}),i.jsx("div",{className:"bg-primary-bg px-6 py-4 border-b border-primary-border",children:c||f?i.jsxs("div",{className:"flex items-center justify-center py-8",children:[i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-cyan-600"}),i.jsx("span",{className:"ml-3 text-secondary-text",children:"ang ti d liu..."})]}):i.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center gap-4",children:[i.jsxs("div",{className:"w-full md:flex-1 relative",children:[i.jsx("svg",{className:"w-5 h-5 absolute left-3 top-1/2 -translate-y-1/2 text-tertiary-text",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),i.jsx("input",{type:"text",placeholder:E==="customer"?"Tm ST / Tn KH / Tn sn phm / IMEI":"Tm tn / ST nh cung cp",value:H,onChange:lt=>W(lt.target.value),className:"w-full pl-10 pr-4 py-2.5 bg-primary-bg border border-secondary-border rounded-lg text-primary-text placeholder-tertiary-text focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:border-transparent"})]}),i.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-4 w-full md:w-auto",children:[i.jsxs("div",{className:"text-secondary-text text-sm whitespace-nowrap",children:["Tng cng n:"," ",i.jsx("span",{className:"font-bold text-red-600 dark:text-red-400",children:Ie(E==="customer"?Te:De)})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-3 w-full md:w-auto",children:[i.jsxs("button",{onClick:()=>Le(!0),className:"flex items-center justify-center gap-2 px-4 py-2.5 bg-green-600 hover:bg-green-700 text-white rounded-lg font-medium transition-colors whitespace-nowrap",children:[i.jsx(Cc,{className:"w-5 h-5"}),i.jsx("span",{children:"Thm cng n"})]}),i.jsxs("button",{onClick:()=>E==="customer"?z(!0):Z(!0),className:"flex items-center justify-center gap-2 px-4 py-2.5 bg-cyan-600 hover:bg-cyan-700 text-white rounded-lg font-medium transition-colors whitespace-nowrap",children:[i.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),i.jsx("span",{children:E==="customer"?"Thu n":"Chi tr n"})]})]}),i.jsx("button",{className:"hidden md:block p-2.5 text-secondary-text hover:text-primary-text transition-colors",children:i.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"})})})]})]})}),i.jsx("div",{className:"flex-1 overflow-auto",children:E==="customer"?i.jsx("div",{className:"p-6",children:be.length===0?i.jsx("div",{className:"text-center py-12 text-tertiary-text",children:"Khng c cng n."}):i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"hidden md:grid grid-cols-12 gap-4 px-4 py-2 bg-slate-100 dark:bg-slate-700 rounded-lg text-sm font-semibold text-slate-700 dark:text-slate-300",children:[i.jsx("div",{className:"col-span-4",children:"Khch hng n"}),i.jsx("div",{className:"col-span-3",children:"Ni dung"}),i.jsx("div",{className:"col-span-1 text-right",children:"S tin"}),i.jsx("div",{className:"col-span-1 text-right",children:" tr"}),i.jsx("div",{className:"col-span-2 text-right",children:"Cn n"}),i.jsx("div",{className:"col-span-1"})]}),be.map(lt=>{var Ve,Vt,Mt,mr;return i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-4 items-start bg-primary-bg border border-primary-border rounded-lg p-4 hover:border-cyan-500 hover:shadow-md transition-all cursor-pointer group",onClick:()=>{me(lt),Y(!0)},children:[i.jsxs("div",{className:"col-span-1 md:col-span-4 flex items-start gap-3",children:[i.jsx("input",{type:"checkbox",checked:q.includes(lt.customerId),onChange:xr=>{xr.stopPropagation(),st(lt.customerId,xr.target.checked)},onClick:xr=>xr.stopPropagation(),className:"mt-1 w-4 h-4 rounded border-secondary-border text-cyan-600 focus:ring-cyan-500"}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h3",{className:"text-primary-text font-semibold text-base mb-1 truncate",children:lt.customerName}),i.jsxs("div",{className:"space-y-0.5 text-xs text-secondary-text",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),i.jsx("span",{children:lt.phone||"--"})]}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsxs("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2V9z M9 22V12h6v10"}),i.jsx("rect",{x:"7",y:"5",width:"10",height:"4",rx:"1",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2})]}),i.jsx("span",{className:"font-mono text-xs font-semibold",children:lt.licensePlate||"--"})]}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),i.jsx("span",{children:Bn(new Date(lt.createdDate))})]}),i.jsxs("div",{className:"flex items-center gap-1 text-cyan-600 dark:text-cyan-400",children:[i.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),i.jsxs("span",{children:["NV:"," ",((Vt=(Ve=lt.description.match(/NVK thut:([^\n]+)/))==null?void 0:Ve[1])==null?void 0:Vt.trim())||((mr=(Mt=lt.description.match(/NV:([^\n]+)/))==null?void 0:Mt[1])==null?void 0:mr.trim())||"N/A"]})]})]})]})]}),i.jsx("div",{className:"col-span-1 md:col-span-3",children:i.jsx("div",{className:"text-sm text-primary-text space-y-1",children:(()=>{const xr=lt.description.split(`
`),sr=xr[0],Ir=xr.find(wr=>wr.includes("Ph tng  thay:")),er=Ir?xr.slice(xr.indexOf(Ir)+1,xr.findIndex((wr,lr)=>lr>xr.indexOf(Ir)&&(wr.includes("Dch v:")||wr.includes("Cng lao ng:")))||xr.length).filter(wr=>wr.trim().startsWith("")):[],Xt=xr.find(wr=>wr.includes("Dch v:")),Gt=Xt?xr.slice(xr.indexOf(Xt)+1,xr.findIndex((wr,lr)=>lr>xr.indexOf(Xt)&&wr.includes("Cng lao ng:"))||xr.length).filter(wr=>wr.trim().startsWith("")):[],ur=xr.find(wr=>wr.includes("Cng lao ng:"));return i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"font-medium",children:sr}),er.length>0&&i.jsxs("div",{className:"text-xs text-secondary-text",children:[i.jsx("span",{className:"font-semibold",children:"Ph tng:"})," ",er.length," mn"]}),Gt.length>0&&i.jsxs("div",{className:"text-xs text-secondary-text",children:[i.jsx("span",{className:"font-semibold",children:"Dch v:"})," ",Gt.length," mn"]}),ur&&i.jsx("div",{className:"text-xs text-cyan-600 dark:text-cyan-400",children:ur})]})})()})}),i.jsxs("div",{className:"col-span-1 text-right md:text-right flex justify-between md:block",children:[i.jsx("span",{className:"md:hidden text-sm text-secondary-text",children:"S tin:"}),i.jsx("div",{className:"text-sm font-semibold text-primary-text",children:Ie(lt.totalAmount)})]}),i.jsxs("div",{className:"col-span-1 text-right md:text-right flex justify-between md:block",children:[i.jsx("span",{className:"md:hidden text-sm text-secondary-text",children:" tr:"}),i.jsx("div",{className:"text-sm font-semibold text-green-600 dark:text-green-400",children:Ie(lt.paidAmount)})]}),i.jsxs("div",{className:"col-span-1 md:col-span-2 text-right md:text-right flex justify-between md:block",children:[i.jsx("span",{className:"md:hidden text-sm font-bold text-secondary-text",children:"Cn n:"}),i.jsx("div",{className:"text-lg font-bold text-red-600 dark:text-red-400",children:Ie(lt.remainingAmount)})]}),i.jsx("div",{className:"col-span-1 flex justify-end hidden md:flex",children:i.jsxs("div",{className:"relative debt-menu-dropdown",children:[i.jsx("button",{onClick:()=>Se(he===lt.id?null:lt.id),className:"p-2 text-secondary-text hover:text-primary-text transition-colors",children:i.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"})})}),he===lt.id&&i.jsxs("div",{className:"absolute right-0 mt-1 w-48 bg-white dark:bg-slate-800 rounded-lg shadow-lg border border-slate-200 dark:border-slate-700 py-1 z-10",children:[i.jsxs("button",{onClick:()=>{me(lt),Y(!0),Se(null)},className:"w-full px-4 py-2 text-left text-sm text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700 flex items-center gap-2",children:[i.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),"Xem chi tit"]}),i.jsxs("button",{onClick:()=>{me(lt),F(!0),Se(null)},className:"w-full px-4 py-2 text-left text-sm text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700 flex items-center gap-2",children:[i.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Sa"]}),i.jsxs("button",{onClick:()=>{me(lt),ee(!0),Se(null)},className:"w-full px-4 py-2 text-left text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 flex items-center gap-2",children:[i.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Xa"]})]})]})})]},lt.id)})]})}):i.jsx("div",{className:"p-6",children:ie.length===0?i.jsx("div",{className:"text-center py-12 text-tertiary-text",children:"Khng c cng n."}):i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"hidden md:grid grid-cols-12 gap-4 px-4 py-2 bg-slate-100 dark:bg-slate-700 rounded-lg text-sm font-semibold text-slate-700 dark:text-slate-300",children:[i.jsx("div",{className:"col-span-4",children:"Nh cung cp"}),i.jsx("div",{className:"col-span-3",children:"Ni dung"}),i.jsx("div",{className:"col-span-1 text-right",children:"S tin"}),i.jsx("div",{className:"col-span-1 text-right",children:" tr"}),i.jsx("div",{className:"col-span-2 text-right",children:"Cn n"}),i.jsx("div",{className:"col-span-1"})]}),ie.map(lt=>i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-4 items-start bg-primary-bg border border-primary-border rounded-lg p-4 hover:border-cyan-500 hover:shadow-md transition-all cursor-pointer group",onClick:()=>{me(lt),Y(!0)},children:[i.jsxs("div",{className:"col-span-1 md:col-span-4 flex items-start gap-3",children:[i.jsx("input",{type:"checkbox",checked:Q.includes(lt.supplierId),onChange:Ve=>{Ve.stopPropagation(),dt(lt.supplierId,Ve.target.checked)},onClick:Ve=>Ve.stopPropagation(),className:"mt-1 w-4 h-4 rounded border-secondary-border text-cyan-600 focus:ring-cyan-500"}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h3",{className:"text-primary-text font-semibold text-base mb-1 truncate",children:lt.supplierName}),i.jsx("div",{className:"space-y-0.5 text-xs text-secondary-text",children:i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),i.jsx("span",{children:Bn(new Date(lt.createdDate))})]})})]})]}),i.jsx("div",{className:"col-span-1 md:col-span-3",children:i.jsx("div",{className:"text-sm text-primary-text",children:lt.description})}),i.jsxs("div",{className:"col-span-1 text-right md:text-right flex justify-between md:block",children:[i.jsx("span",{className:"md:hidden text-sm text-secondary-text",children:"S tin:"}),i.jsx("div",{className:"text-sm text-primary-text font-semibold",children:Ie(lt.totalAmount)})]}),i.jsxs("div",{className:"col-span-1 text-right md:text-right flex justify-between md:block",children:[i.jsx("span",{className:"md:hidden text-sm text-secondary-text",children:" tr:"}),i.jsx("div",{className:"text-sm text-green-600 dark:text-green-400 font-semibold",children:Ie(lt.paidAmount)})]}),i.jsxs("div",{className:"col-span-1 md:col-span-2 text-right md:text-right flex justify-between md:block",children:[i.jsx("span",{className:"md:hidden text-sm font-bold text-secondary-text",children:"Cn n:"}),i.jsx("div",{className:"text-base text-red-600 dark:text-red-400 font-bold",children:Ie(lt.remainingAmount)})]}),i.jsxs("div",{className:"col-span-1 flex justify-end relative debt-menu-dropdown hidden md:flex",children:[i.jsx("button",{onClick:Ve=>{Ve.stopPropagation(),Se(he===lt.id?null:lt.id)},className:"p-1 text-secondary-text hover:text-primary-text transition-colors opacity-0 group-hover:opacity-100",children:i.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"})})}),he===lt.id&&i.jsxs("div",{className:"absolute right-0 top-8 w-48 bg-white dark:bg-slate-800 rounded-lg shadow-lg border border-slate-200 dark:border-slate-700 py-1 z-10",children:[i.jsxs("button",{onClick:Ve=>{Ve.stopPropagation(),me(lt),Y(!0),Se(null)},className:"w-full px-4 py-2 text-left text-sm text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700 flex items-center gap-2",children:[i.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),"Xem chi tit"]}),i.jsxs("button",{onClick:Ve=>{Ve.stopPropagation(),me(lt),F(!0),Se(null)},className:"w-full px-4 py-2 text-left text-sm text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700 flex items-center gap-2",children:[i.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Sa"]}),i.jsxs("button",{onClick:Ve=>{Ve.stopPropagation(),me(lt),ee(!0),Se(null)},className:"w-full px-4 py-2 text-left text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 flex items-center gap-2",children:[i.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Xa"]})]})]})]},lt.id))]})})}),(E==="customer"&&q.length>0||E==="supplier"&&Q.length>0)&&i.jsx("div",{className:"fixed bottom-6 left-1/2 transform -translate-x-1/2 z-50",children:i.jsxs("button",{onClick:et,className:"flex items-center gap-3 px-6 py-3 bg-red-600 hover:bg-red-700 text-white rounded-lg font-semibold shadow-2xl transition-all hover:scale-105",children:[i.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),i.jsxs("span",{children:[" chn"," ",E==="customer"?q.length:Q.length," ","n"]}),i.jsx("span",{className:"mx-2",children:"|"}),i.jsxs("span",{className:"text-xl font-bold",children:["Tr ht n (",Ie(E==="customer"?ye:rt),")"]})]})}),R&&i.jsx(_je,{customers:e,customerDebts:o,onClose:()=>z(!1),onCollect:lt=>{const Vt={id:`CT-${Date.now()}`,type:"income",date:lt.timestamp,amount:lt.amount,recipient:lt.customerName,notes:`Thu n khch hng - ${lt.customerName}`,paymentSourceId:lt.paymentMethod,branchId:r,category:"debt_collection"};n([Vt,...a]),s(l.map(Mt=>Mt.id===lt.paymentMethod?{...Mt,balance:{...Mt.balance,[r]:(Mt.balance[r]||0)+lt.amount}}:Mt)),z(!1)}}),ae&&i.jsx(jje,{isOpen:ae,onClose:()=>{de(!1)},selectedDebts:E==="customer"?se.filter(lt=>q.includes(lt.customerId)):je.filter(lt=>Q.includes(lt.supplierId)),totalAmount:E==="customer"?ye:rt,debtType:E,onConfirm:async(lt,Ve)=>{try{if(E==="customer"){for(const Vt of q){const Mt=se.find(mr=>mr.customerId===Vt);Mt&&await y.mutateAsync({id:Mt.id,updates:{paidAmount:Mt.totalAmount,remainingAmount:0}})}K([])}else{for(const Vt of Q){const Mt=je.find(mr=>mr.supplierId===Vt);Mt&&await w.mutateAsync({id:Mt.id,updates:{paidAmount:Mt.totalAmount,remainingAmount:0}})}re([])}de(!1),Ye.success(` thanh ton thnh cng ${Ie(E==="customer"?ye:rt)} qua ${lt==="cash"?"Tin mt":"Chuyn khon"}`)}catch(Vt){Ye.error(Vt.message||"Khng th thanh ton")}}}),U&&i.jsx(Sje,{suppliers:t,supplierDebts:d,onClose:()=>Z(!1),onPay:lt=>{const Vt={id:`CT-${Date.now()}`,type:"expense",date:lt.timestamp,amount:lt.amount,recipient:lt.supplierName,notes:`Tr n nh cung cp - ${lt.supplierName}`,paymentSourceId:lt.paymentMethod,branchId:r,category:"debt_payment"};n([Vt,...a]),s(l.map(Mt=>Mt.id===lt.paymentMethod?{...Mt,balance:{...Mt.balance,[r]:(Mt.balance[r]||0)-lt.amount}}:Mt)),Z(!1)}}),ke&&i.jsx(Cje,{activeTab:E,customers:e,suppliers:t,currentBranchId:r,onClose:()=>Le(!1),onSave:async lt=>{E==="customer"?await p.mutateAsync(lt):await N.mutateAsync(lt),Le(!1)}}),fe&&Ce&&i.jsx(Aje,{debt:Ce,activeTab:E,customers:e,suppliers:t,onClose:()=>{F(!1),me(null)},onSave:async lt=>{E==="customer"?await y.mutateAsync({id:Ce.id,updates:lt}):await w.mutateAsync({id:Ce.id,updates:lt}),F(!1),me(null)}}),te&&Ce&&i.jsx(Eje,{debt:Ce,activeTab:E,storeSettings:S,onClose:()=>{Y(!1),me(null)}}),ne&&Ce&&i.jsx(Tje,{debt:Ce,activeTab:E,onClose:()=>{ee(!1),me(null)},onConfirm:async()=>{E==="customer"?await g.mutateAsync(Ce.id):await k.mutateAsync(Ce.id),ee(!1),me(null)}})]})},_je=({customers:e,customerDebts:t,onClose:r,onCollect:n})=>{const[a,s]=T.useState(""),[l,o]=T.useState("0"),[c,d]=T.useState("cash"),[f,p]=T.useState(new Date().toLocaleString("sv-SE",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).replace(" "," ")),y=T.useMemo(()=>t.find(w=>w.customerId===a),[a,t]),g=(y==null?void 0:y.remainingAmount)||0,N=w=>{w.preventDefault();const k=parseFloat(l);if(k<=0){Ye.error("S tin thanh ton phi ln hn 0");return}if(k>g){Ye.error(`S tin thanh ton khng c vt qu s n cn li (${Ie(g)})`);return}const S=e.find(O=>O.id===a);S&&n&&n({customerName:S.name,amount:k,paymentMethod:c,timestamp:f}),r()};return i.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:i.jsxs("div",{className:"bg-secondary-bg rounded-xl shadow-2xl max-w-lg w-full border border-primary-border",children:[i.jsx("div",{className:"px-6 py-4 border-b border-primary-border",children:i.jsx("h2",{className:"text-xl font-semibold text-primary-text",children:"Thu n khch hng"})}),i.jsxs("form",{onSubmit:N,className:"p-6 space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-secondary-text mb-2",children:"Tm kim v chn mt khch hng ang n"}),i.jsxs("select",{value:a,onChange:w=>s(w.target.value),className:"w-full px-4 py-3 bg-primary-bg border border-secondary-border rounded-lg text-primary-text focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:border-transparent",children:[i.jsx("option",{value:"",children:"Chn khch hng..."}),t.map(w=>i.jsxs("option",{value:w.customerId,children:[w.customerName," - ",Ie(w.remainingAmount)]},w.customerId))]})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("label",{className:"block text-sm font-medium text-secondary-text",children:"Nhp s tin thanh ton"}),i.jsx("span",{className:"text-cyan-600 dark:text-cyan-400 text-sm",children:Ie(parseFloat(l)||0)})]}),i.jsx("input",{type:"number",value:l,onChange:w=>o(w.target.value),className:"w-full px-4 py-3 bg-primary-bg border border-secondary-border rounded-lg text-primary-text focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:border-transparent"})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-between text-sm",children:[i.jsx("span",{className:"text-tertiary-text",children:"Cn n:"}),i.jsx("span",{className:"text-red-600 dark:text-red-400 font-bold text-base",children:Ie(g)})]}),i.jsx("button",{type:"button",onClick:()=>o(g.toString()),className:"text-cyan-600 dark:text-cyan-400 hover:text-cyan-700 dark:hover:text-cyan-300 text-sm mt-1",children:"in s cn n"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-secondary-text mb-3",children:"Hnh thc thanh ton:"}),i.jsxs("div",{className:"flex gap-6",children:[i.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[i.jsx("input",{type:"radio",name:"paymentMethod",value:"cash",checked:c==="cash",onChange:w=>d(w.target.value),className:"w-4 h-4 text-cyan-600 bg-primary-bg border-secondary-border focus:ring-cyan-500"}),i.jsx("span",{className:"text-primary-text",children:"Tin mt"})]}),i.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[i.jsx("input",{type:"radio",name:"paymentMethod",value:"bank",checked:c==="bank",onChange:w=>d(w.target.value),className:"w-4 h-4 text-cyan-600 bg-primary-bg border-secondary-border focus:ring-cyan-500"}),i.jsx("span",{className:"text-primary-text",children:"Chuyn khon"})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-secondary-text mb-2",children:"Thi gian to phiu thu"}),i.jsx("input",{type:"text",value:f,onChange:w=>p(w.target.value),className:"w-full px-4 py-3 bg-primary-bg border border-secondary-border rounded-lg text-primary-text focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:border-transparent"})]}),i.jsx("button",{type:"submit",disabled:!a||parseFloat(l)<=0,className:"w-full py-3 bg-primary-bg hover:bg-tertiary-bg text-primary-text rounded-lg font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"To phiu thu"})]}),i.jsx("div",{className:"px-6 py-4 border-t border-primary-border flex justify-end",children:i.jsx("button",{onClick:r,className:"px-6 py-2 text-secondary-text hover:text-primary-text transition-colors",children:"ng"})})]})})},Sje=({suppliers:e,supplierDebts:t,onClose:r,onPay:n})=>{const[a,s]=T.useState(""),[l,o]=T.useState("0"),[c,d]=T.useState("cash"),[f,p]=T.useState(new Date().toLocaleString("sv-SE",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).replace(" "," ")),y=T.useMemo(()=>t.find(w=>w.supplierId===a),[a,t]),g=(y==null?void 0:y.remainingAmount)||0,N=w=>{w.preventDefault();const k=parseFloat(l);if(k<=0){Ye.error("S tin thanh ton phi ln hn 0");return}if(k>g){Ye.error(`S tin thanh ton khng c vt qu s n cn li (${Ie(g)})`);return}const S=e.find(O=>O.id===a);S&&n&&n({supplierName:S.name,amount:k,paymentMethod:c,timestamp:f}),r()};return i.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:i.jsxs("div",{className:"bg-secondary-bg rounded-xl shadow-2xl max-w-lg w-full border border-primary-border",children:[i.jsx("div",{className:"px-6 py-4 border-b border-primary-border",children:i.jsx("h2",{className:"text-xl font-semibold text-primary-text",children:"Chi tr n nh cung cp"})}),i.jsxs("form",{onSubmit:N,className:"p-6 space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-secondary-text mb-2",children:"Tm kim v chn mt nh cung cp ang n"}),i.jsxs("select",{value:a,onChange:w=>s(w.target.value),className:"w-full px-4 py-3 bg-primary-bg border border-secondary-border rounded-lg text-primary-text focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:border-transparent",children:[i.jsx("option",{value:"",children:"Chn nh cung cp..."}),t.map(w=>i.jsxs("option",{value:w.supplierId,children:[w.supplierName," - ",Ie(w.remainingAmount)]},w.supplierId))]})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("label",{className:"block text-sm font-medium text-secondary-text",children:"Nhp s tin thanh ton"}),i.jsx("span",{className:"text-cyan-600 dark:text-cyan-400 text-sm",children:Ie(parseFloat(l)||0)})]}),i.jsx("input",{type:"number",value:l,onChange:w=>o(w.target.value),className:"w-full px-4 py-3 bg-primary-bg border border-secondary-border rounded-lg text-primary-text focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:border-transparent"})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-between text-sm",children:[i.jsx("span",{className:"text-tertiary-text",children:"Cn n:"}),i.jsx("span",{className:"text-red-600 dark:text-red-400 font-bold text-base",children:Ie(g)})]}),i.jsx("button",{type:"button",onClick:()=>o(g.toString()),className:"text-cyan-600 dark:text-cyan-400 hover:text-cyan-700 dark:hover:text-cyan-300 text-sm mt-1",children:"in s cn n"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-secondary-text mb-3",children:"Hnh thc thanh ton:"}),i.jsxs("div",{className:"flex gap-6",children:[i.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[i.jsx("input",{type:"radio",name:"paymentMethod",value:"cash",checked:c==="cash",onChange:w=>d(w.target.value),className:"w-4 h-4 text-cyan-600 bg-primary-bg border-secondary-border focus:ring-cyan-500"}),i.jsx("span",{className:"text-primary-text",children:"Tin mt"})]}),i.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[i.jsx("input",{type:"radio",name:"paymentMethod",value:"bank",checked:c==="bank",onChange:w=>d(w.target.value),className:"w-4 h-4 text-cyan-600 bg-primary-bg border-secondary-border focus:ring-cyan-500"}),i.jsx("span",{className:"text-primary-text",children:"Chuyn khon"})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-secondary-text mb-2",children:"Thi gian to phiu chi"}),i.jsx("input",{type:"text",value:f,onChange:w=>p(w.target.value),className:"w-full px-4 py-3 bg-primary-bg border border-secondary-border rounded-lg text-primary-text focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:border-transparent"})]}),i.jsx("button",{type:"submit",disabled:!a||parseFloat(l)<=0,className:"w-full py-3 bg-primary-bg hover:bg-tertiary-bg text-primary-text rounded-lg font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"To phiu chi"})]}),i.jsx("div",{className:"px-6 py-4 border-t border-primary-border flex justify-end",children:i.jsx("button",{onClick:r,className:"px-6 py-2 text-secondary-text hover:text-primary-text transition-colors",children:"ng"})})]})})},jje=({isOpen:e,onClose:t,selectedDebts:r,totalAmount:n,debtType:a,onConfirm:s})=>{const[l,o]=T.useState(null),[c,d]=T.useState(()=>{const p=new Date,y=String(p.getDate()).padStart(2,"0"),g=String(p.getMonth()+1).padStart(2,"0"),N=p.getFullYear(),w=String(p.getHours()).padStart(2,"0"),k=String(p.getMinutes()).padStart(2,"0");return`${y}-${g}-${N} ${w}:${k}`});if(!e)return null;const f=p=>{if(p.preventDefault(),!l){Ye.warning("Vui lng chn hnh thc thanh ton");return}const[y,g]=c.split(" "),[N,w,k]=y.split("-"),[S,O]=g.split(":"),E=new Date(parseInt(k),parseInt(w)-1,parseInt(N),parseInt(S),parseInt(O)).toISOString();s(l,E)};return i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-secondary-bg rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[i.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-primary-border",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("svg",{className:"w-6 h-6 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),i.jsxs("h2",{className:"text-xl font-semibold text-primary-text",children:["Tr ht n (",a==="customer"?"nhiu n hng":"nhiu nh cung cp",")"]})]}),i.jsx("button",{onClick:t,className:"text-secondary-text hover:text-primary-text transition-colors",children:i.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),i.jsxs("form",{onSubmit:f,className:"p-6",children:[i.jsxs("div",{className:"mb-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("span",{className:"text-sm font-medium text-secondary-text",children:"-"}),i.jsx("span",{className:"text-sm font-medium text-secondary-text",children:"Chi tit"}),i.jsx("span",{className:"text-sm font-medium text-secondary-text",children:"S tin"})]}),i.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:r.map((p,y)=>{const g="customerName"in p,N=g?p.customerName:p.supplierName,w=p.description;return i.jsxs("div",{className:"flex items-center justify-between py-2 px-3 bg-tertiary-bg rounded",children:[i.jsx("span",{className:"text-sm text-tertiary-text",children:y+1}),i.jsxs("div",{className:"flex-1 mx-3",children:[i.jsx("div",{className:"text-sm font-medium text-primary-text",children:w}),i.jsx("div",{className:"text-xs text-tertiary-text",children:N})]}),i.jsx("span",{className:"text-sm font-semibold text-primary-text",children:Ie(p.remainingAmount)})]},y)})}),i.jsxs("div",{className:"flex items-center justify-between mt-3 pt-3 border-t border-primary-border",children:[i.jsx("span",{className:"font-semibold text-primary-text",children:"TNG"}),i.jsx("span",{className:"text-lg font-bold text-red-500",children:Ie(n)})]})]}),i.jsxs("div",{className:"mb-6",children:[i.jsx("label",{className:"block text-sm font-medium text-secondary-text mb-3",children:"Hnh thc thanh ton:"}),i.jsxs("div",{className:"flex gap-6",children:[i.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[i.jsx("input",{type:"radio",name:"paymentMethod",value:"cash",checked:l==="cash",onChange:p=>o(p.target.value),className:"w-4 h-4 text-blue-600 focus:ring-blue-500"}),i.jsx("span",{className:"text-primary-text",children:"Tin mt"})]}),i.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[i.jsx("input",{type:"radio",name:"paymentMethod",value:"bank",checked:l==="bank",onChange:p=>o(p.target.value),className:"w-4 h-4 text-blue-600 focus:ring-blue-500"}),i.jsx("span",{className:"text-primary-text",children:"Chuyn khon"})]})]})]}),i.jsxs("div",{className:"mb-6",children:[i.jsx("label",{className:"block text-sm font-medium text-secondary-text mb-2",children:"Thi gian to phiu thu"}),i.jsxs("div",{className:"flex items-center gap-2 px-4 py-3 bg-primary-bg border border-secondary-border rounded-lg",children:[i.jsx("input",{type:"text",value:c,onChange:p=>d(p.target.value),className:"flex-1 bg-transparent text-primary-text outline-none"}),i.jsx("svg",{className:"w-5 h-5 text-tertiary-text",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),i.jsx("svg",{className:"w-5 h-5 text-tertiary-text",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})]})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{type:"button",onClick:t,className:"flex-1 px-4 py-3 border border-secondary-border text-secondary-text rounded-lg hover:bg-primary-bg transition-colors font-medium",children:"NG"}),i.jsx("button",{type:"submit",disabled:!l,className:"flex-1 px-4 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-blue-600",children:"TO PHIU THU"})]})]})]})})},Cje=({activeTab:e,customers:t,suppliers:r,currentBranchId:n,onClose:a,onSave:s})=>{const[l,o]=T.useState({customerId:"",supplierId:"",description:"",totalAmount:0,phone:"",licensePlate:""}),c=d=>{if(d.preventDefault(),e==="customer"){const f=t.find(p=>p.id===l.customerId);if(!f){Ye.error("Vui lng chn khch hng");return}s({customerId:l.customerId,customerName:f.name,phone:l.phone||f.phone,licensePlate:l.licensePlate||f.licensePlate,description:l.description,totalAmount:l.totalAmount,paidAmount:0,remainingAmount:l.totalAmount,createdDate:new Date().toISOString(),branchId:n})}else{const f=r.find(p=>p.id===l.supplierId);if(!f){Ye.error("Vui lng chn nh cung cp");return}s({supplierId:l.supplierId,supplierName:f.name,description:l.description,totalAmount:l.totalAmount,paidAmount:0,remainingAmount:l.totalAmount,createdDate:new Date().toISOString(),branchId:n})}};return i.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl max-w-lg w-full border border-slate-200 dark:border-slate-700",children:[i.jsx("div",{className:"px-6 py-4 border-b border-slate-200 dark:border-slate-700",children:i.jsxs("h2",{className:"text-xl font-semibold text-slate-900 dark:text-white",children:["Thm cng n"," ",e==="customer"?"khch hng":"nh cung cp"]})}),i.jsxs("form",{onSubmit:c,className:"p-6 space-y-4",children:[e==="customer"?i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["Khch hng ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsxs("select",{value:l.customerId,onChange:d=>o({...l,customerId:d.target.value}),required:!0,className:"w-full px-4 py-3 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white",children:[i.jsx("option",{value:"",children:"Chn khch hng..."}),t.map(d=>i.jsxs("option",{value:d.id,children:[d.name," - ",d.phone]},d.id))]})]}):i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["Nh cung cp ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsxs("select",{value:l.supplierId,onChange:d=>o({...l,supplierId:d.target.value}),required:!0,className:"w-full px-4 py-3 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white",children:[i.jsx("option",{value:"",children:"Chn nh cung cp..."}),r.map(d=>i.jsx("option",{value:d.id,children:d.name},d.id))]})]}),e==="customer"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"S in thoi"}),i.jsx("input",{type:"text",value:l.phone,onChange:d=>o({...l,phone:d.target.value}),className:"w-full px-4 py-3 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Bin s xe"}),i.jsx("input",{type:"text",value:l.licensePlate,onChange:d=>o({...l,licensePlate:d.target.value}),className:"w-full px-4 py-3 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white"})]})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["Ni dung cng n ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("textarea",{value:l.description,onChange:d=>o({...l,description:d.target.value}),required:!0,rows:3,className:"w-full px-4 py-3 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white",placeholder:"M t chi tit cng n..."})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["S tin ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"number",value:l.totalAmount||"",onChange:d=>o({...l,totalAmount:Number(d.target.value)}),required:!0,min:"0",className:"w-full px-4 py-3 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white",placeholder:"0"}),i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:Ie(l.totalAmount||0)})]}),i.jsxs("div",{className:"flex gap-3 pt-4",children:[i.jsx("button",{type:"button",onClick:a,className:"flex-1 px-4 py-3 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors font-medium",children:"Hy"}),i.jsx("button",{type:"submit",className:"flex-1 px-4 py-3 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors font-medium",children:"Thm cng n"})]})]})]})})},Aje=({debt:e,activeTab:t,customers:r,suppliers:n,onClose:a,onSave:s})=>{const l="customerName"in e,[o,c]=T.useState({description:e.description,totalAmount:e.totalAmount,paidAmount:e.paidAmount,phone:l?e.phone:"",licensePlate:l?e.licensePlate:""}),d=f=>{f.preventDefault();const p=o.totalAmount-o.paidAmount;if(o.paidAmount>o.totalAmount){Ye.error("S tin  tr khng c ln hn tng tin!");return}s({description:o.description,totalAmount:o.totalAmount,paidAmount:o.paidAmount,remainingAmount:p,...l&&{phone:o.phone,licensePlate:o.licensePlate}})};return i.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl max-w-lg w-full border border-slate-200 dark:border-slate-700",children:[i.jsx("div",{className:"px-6 py-4 border-b border-slate-200 dark:border-slate-700",children:i.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-white",children:"Sa cng n"})}),i.jsxs("form",{onSubmit:d,className:"p-6 space-y-4",children:[i.jsx("div",{className:"bg-slate-100 dark:bg-slate-700 rounded-lg p-3",children:i.jsx("p",{className:"text-sm font-medium text-slate-900 dark:text-white",children:l?e.customerName:e.supplierName})}),l&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"S in thoi"}),i.jsx("input",{type:"text",value:o.phone,onChange:f=>c({...o,phone:f.target.value}),className:"w-full px-4 py-3 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Bin s xe"}),i.jsx("input",{type:"text",value:o.licensePlate,onChange:f=>c({...o,licensePlate:f.target.value}),className:"w-full px-4 py-3 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Ni dung cng n"}),i.jsx("textarea",{value:o.description,onChange:f=>c({...o,description:f.target.value}),rows:3,className:"w-full px-4 py-3 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Tng tin"}),i.jsx("input",{type:"number",value:o.totalAmount,onChange:f=>c({...o,totalAmount:Number(f.target.value)}),min:"0",className:"w-full px-4 py-3 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:" tr"}),i.jsx("input",{type:"number",value:o.paidAmount,onChange:f=>c({...o,paidAmount:Number(f.target.value)}),min:"0",max:o.totalAmount,className:"w-full px-4 py-3 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white"})]}),i.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-3",children:i.jsxs("p",{className:"text-sm text-blue-800 dark:text-blue-300",children:["Cn n:"," ",i.jsx("span",{className:"font-bold",children:Ie(o.totalAmount-o.paidAmount)})]})}),i.jsxs("div",{className:"flex gap-3 pt-4",children:[i.jsx("button",{type:"button",onClick:a,className:"flex-1 px-4 py-3 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors font-medium",children:"Hy"}),i.jsx("button",{type:"submit",className:"flex-1 px-4 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors font-medium",children:"Lu thay i"})]})]})]})})},Eje=({debt:e,activeTab:t,storeSettings:r,onClose:n})=>{const a="customerName"in e;return i.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl max-w-2xl w-full border border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"px-6 py-4 border-b border-slate-200 dark:border-slate-700 flex items-center justify-between",children:[i.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-white",children:"Chi tit cng n"}),i.jsx("button",{onClick:n,className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-300",children:i.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),i.jsxs("div",{className:"p-6 space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:a?"Khch hng":"Nh cung cp"}),i.jsx("p",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:a?e.customerName:e.supplierName})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Ngy to"}),i.jsx("p",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:Bn(new Date(e.createdDate))})]})]}),a&&i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"S in thoi"}),i.jsx("p",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:e.phone||"--"})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Bin s xe"}),i.jsx("p",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:e.licensePlate||"--"})]})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-2",children:"Ni dung"}),i.jsx("div",{className:"bg-slate-100 dark:bg-slate-700 rounded-lg p-4",children:i.jsx("p",{className:"text-slate-900 dark:text-white",children:e.description})})]}),i.jsx("div",{className:"border-t border-slate-200 dark:border-slate-700 pt-4",children:i.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-1",children:"Tng tin"}),i.jsx("p",{className:"text-xl font-bold text-slate-900 dark:text-white",children:Ie(e.totalAmount)})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-1",children:" tr"}),i.jsx("p",{className:"text-xl font-bold text-green-600 dark:text-green-400",children:Ie(e.paidAmount)})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-1",children:"Cn n"}),i.jsx("p",{className:"text-2xl font-bold text-red-600 dark:text-red-400",children:Ie(e.remainingAmount)})]})]})}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between text-sm text-slate-600 dark:text-slate-400 mb-2",children:[i.jsx("span",{children:"Tin  thanh ton"}),i.jsxs("span",{children:[Math.round(e.paidAmount/e.totalAmount*100),"%"]})]}),i.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-3",children:i.jsx("div",{className:"bg-green-600 h-3 rounded-full transition-all",style:{width:`${e.paidAmount/e.totalAmount*100}%`}})})]})]}),i.jsxs("div",{className:"px-6 py-4 border-t border-slate-200 dark:border-slate-700 flex justify-between",children:[i.jsxs("button",{onClick:()=>{const s=document.getElementById("debt-print-area");if(s){const l=window.open("","_blank");l&&(l.document.write(`
                    <html>
                      <head>
                        <title>Phiu Cng N - ${a?e.customerName:e.supplierName}</title>
                        <style>
                          body { font-family: Arial, sans-serif; padding: 20px; max-width: 800px; margin: 0 auto; }
                          .store-header { text-align: center; margin-bottom: 30px; padding-bottom: 20px; border-bottom: 2px solid #ddd; }
                          .store-header h2 { margin: 0 0 10px 0; font-size: 24px; color: #0ea5e9; }
                          .store-header p { margin: 5px 0; color: #666; }
                          h1 { text-align: center; margin-bottom: 20px; }
                          .info { margin-bottom: 15px; }
                          .info label { font-weight: bold; }
                          .description { white-space: pre-line; margin: 20px 0; padding: 15px; background: #f5f5f5; border-radius: 8px; }
                          .amounts { display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; margin: 20px 0; }
                          .amount-box { padding: 15px; border: 1px solid #ddd; border-radius: 8px; text-align: center; }
                          .amount-box label { display: block; font-size: 12px; color: #666; margin-bottom: 5px; }
                          .amount-box .value { font-size: 20px; font-weight: bold; }
                          .total { color: #1e40af; }
                          .paid { color: #16a34a; }
                          .remaining { color: #dc2626; }
                          .bank-info { margin-top: 30px; padding: 20px; background: #f0f9ff; border: 2px solid #0ea5e9; border-radius: 8px; }
                          .bank-info h3 { margin: 0 0 15px 0; color: #0369a1; text-align: center; }
                          .bank-info p { margin: 8px 0; }
                          .bank-info strong { display: inline-block; min-width: 150px; }
                          .bank-qr { text-align: center; margin-top: 15px; }
                          .bank-qr img { max-width: 200px; border: 1px solid #ddd; padding: 10px; background: white; }
                          @media print { button { display: none; } }
                        </style>
                      </head>
                      <body>
                        ${r?`
                        <div class="store-header">
                          <h2>${r.store_name||"MOTOCARE"}</h2>
                          ${r.address?`<p> ${r.address}</p>`:""}
                          ${r.phone?`<p> ${r.phone}</p>`:""}
                        </div>
                        `:""}
                        ${s.innerHTML}
                        ${r&&(r.bank_name||r.bank_account_number)?`
                        <div class="bank-info">
                          <h3> THNG TIN CHUYN KHON</h3>
                          ${r.bank_name?`<p><strong>Ngn hng:</strong> ${r.bank_name}</p>`:""}
                          ${r.bank_account_number?`<p><strong>S ti khon:</strong> ${r.bank_account_number}</p>`:""}
                          ${r.bank_account_holder?`<p><strong>Ch ti khon:</strong> ${r.bank_account_holder}</p>`:""}
                          ${r.bank_branch?`<p><strong>Chi nhnh:</strong> ${r.bank_branch}</p>`:""}
                          ${r.bank_qr_url?`<div class="bank-qr"><img src="${r.bank_qr_url}" alt="QR Code" /></div>`:""}
                        </div>
                        `:""}
                        <div style="margin-top: 30px; text-align: center;">
                          <button onclick="window.print()" style="padding: 10px 20px; background: #0ea5e9; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 16px;">In Phiu</button>
                        </div>
                      </body>
                    </html>
                  `),l.document.close())}},className:"px-6 py-2 bg-cyan-600 hover:bg-cyan-700 text-white rounded-lg transition-colors font-medium flex items-center gap-2",children:[i.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})}),"In phiu"]}),i.jsx("button",{onClick:n,className:"px-6 py-2 bg-slate-600 hover:bg-slate-700 text-white rounded-lg transition-colors font-medium",children:"ng"})]}),i.jsxs("div",{id:"debt-print-area",style:{display:"none"},children:[i.jsx("h1",{children:"PHIU CNG N"}),i.jsxs("div",{className:"info",children:[i.jsx("label",{children:a?"Khch hng:":"Nh cung cp:"})," ",a?e.customerName:e.supplierName]}),a&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"info",children:[i.jsx("label",{children:"S in thoi:"})," ",e.phone||"Cha c"]}),i.jsxs("div",{className:"info",children:[i.jsx("label",{children:"Bin s xe:"})," ",e.licensePlate||"Cha c"]})]}),i.jsxs("div",{className:"info",children:[i.jsx("label",{children:"Ngy to:"})," ",Bn(new Date(e.createdDate))]}),i.jsxs("div",{className:"description",children:[i.jsx("strong",{children:"Ni dung:"}),i.jsx("br",{}),e.description]}),i.jsxs("div",{className:"amounts",children:[i.jsxs("div",{className:"amount-box",children:[i.jsx("label",{children:"Tng tin"}),i.jsx("div",{className:"value total",children:Ie(e.totalAmount)})]}),i.jsxs("div",{className:"amount-box",children:[i.jsx("label",{children:" tr"}),i.jsx("div",{className:"value paid",children:Ie(e.paidAmount)})]}),i.jsxs("div",{className:"amount-box",children:[i.jsx("label",{children:"Cn n"}),i.jsx("div",{className:"value remaining",children:Ie(e.remainingAmount)})]})]})]})]})})},Tje=({debt:e,activeTab:t,onClose:r,onConfirm:n})=>{const s="customerName"in e?e.customerName:e.supplierName;return i.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:i.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl max-w-md w-full border border-slate-200 dark:border-slate-700",children:i.jsxs("div",{className:"p-6",children:[i.jsx("div",{className:"flex items-center justify-center w-12 h-12 mx-auto bg-red-100 dark:bg-red-900/20 rounded-full mb-4",children:i.jsx("svg",{className:"w-6 h-6 text-red-600 dark:text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),i.jsx("h3",{className:"text-lg font-semibold text-center text-slate-900 dark:text-white mb-2",children:"Xc nhn xa cng n"}),i.jsxs("p",{className:"text-center text-slate-600 dark:text-slate-400 mb-6",children:["Bn c chc chn mun xa cng n ca"," ",i.jsx("span",{className:"font-semibold",children:s}),"?",i.jsx("br",{}),i.jsxs("span",{className:"text-red-600 dark:text-red-400 font-medium",children:["S tin: ",Ie(e.remainingAmount)]}),i.jsx("br",{}),i.jsx("span",{className:"text-sm",children:"Hnh ng ny khng th hon tc!"})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:r,className:"flex-1 px-4 py-3 border border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors font-medium",children:"Hy"}),i.jsx("button",{onClick:n,className:"flex-1 px-4 py-3 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors font-medium",children:"Xa"})]})]})})})},qV=()=>{const e=qn();return ha({mutationFn:({id:t,branchId:r,delta:n})=>N_(t,r,n),onSuccess:()=>{e.invalidateQueries({queryKey:["paymentSourcesRepo"]})},onError:t=>Ye.error(va(t))})},HV=()=>{const{cashTransactions:e,paymentSources:t,currentBranchId:r,setCashTransactions:n,setPaymentSources:a}=Ua();Ic();const s=SF(),l=qV(),[o,c]=T.useState("all"),[d,f]=T.useState("all"),[p,y]=T.useState("month"),[g,N]=T.useState(!1),w=T.useMemo(()=>{let S=e.filter(D=>D.branchId===r);o!=="all"&&(S=S.filter(D=>D.type===o)),d!=="all"&&(S=S.filter(D=>D.paymentSourceId===d));const O=new Date,E=new Date(O.getFullYear(),O.getMonth(),O.getDate());switch(p){case"today":S=S.filter(W=>new Date(W.date)>=E);break;case"week":const D=new Date(E);D.setDate(D.getDate()-7),S=S.filter(W=>new Date(W.date)>=D);break;case"month":const H=new Date(E);H.setMonth(H.getMonth()-1),S=S.filter(W=>new Date(W.date)>=H);break}return S.sort((D,H)=>new Date(H.date).getTime()-new Date(D.date).getTime())},[e,r,o,d,p]),k=T.useMemo(()=>{var W,R;const S=w.filter(z=>z.type==="income").reduce((z,U)=>z+U.amount,0),O=w.filter(z=>z.type==="expense").reduce((z,U)=>z+U.amount,0),E=S-O,D=((W=t.find(z=>z.id==="cash"))==null?void 0:W.balance[r])||0,H=((R=t.find(z=>z.id==="bank"))==null?void 0:R.balance[r])||0;return{income:S,expense:O,balance:E,cashBalance:D,bankBalance:H,totalBalance:D+H}},[w,t,r]);return i.jsxs("div",{className:"h-full flex flex-col bg-slate-50 dark:bg-slate-900",children:[i.jsx("div",{className:"bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 px-6 py-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"S qu"}),i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:"Theo di thu chi tin mt v chuyn khon"})]}),i.jsxs("button",{onClick:()=>N(!0),className:"flex items-center gap-2 px-4 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors",children:[i.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),i.jsx("span",{children:"Thm giao dch"})]})]})}),i.jsxs("div",{className:"p-4 md:p-6",children:[i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-3 md:gap-4 mb-6",children:[i.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-4 border-2 border-green-200 dark:border-green-800",children:[i.jsxs("div",{className:"flex items-center gap-2 text-green-600 dark:text-green-400 text-sm font-medium mb-2",children:[i.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 11l5-5m0 0l5 5m-5-5v12"})}),i.jsx("span",{children:"Thu"})]}),i.jsx("div",{className:"text-green-900 dark:text-green-100 text-2xl font-bold",children:Ie(k.income)})]}),i.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 rounded-lg p-4 border-2 border-red-200 dark:border-red-800",children:[i.jsxs("div",{className:"flex items-center gap-2 text-red-600 dark:text-red-400 text-sm font-medium mb-2",children:[i.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 13l-5 5m0 0l-5-5m5 5V6"})}),i.jsx("span",{children:"Chi"})]}),i.jsx("div",{className:"text-red-900 dark:text-red-100 text-2xl font-bold",children:Ie(k.expense)})]}),i.jsxs("div",{className:"col-span-2 md:col-span-1 bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4 border-2 border-blue-200 dark:border-blue-800",children:[i.jsx("div",{className:"text-blue-600 dark:text-blue-400 text-sm font-medium mb-2",children:"Chnh lch"}),i.jsx("div",{className:`text-2xl font-bold ${k.balance>=0?"text-blue-900 dark:text-blue-100":"text-red-600 dark:text-red-400"}`,children:Ie(k.balance)})]}),i.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/20 rounded-lg p-4 border-2 border-amber-200 dark:border-amber-800",children:[i.jsx("div",{className:"text-amber-600 dark:text-amber-400 text-sm font-medium mb-2",children:"Tin mt"}),i.jsx("div",{className:"text-amber-900 dark:text-amber-100 text-2xl font-bold",children:Ie(k.cashBalance)})]}),i.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 rounded-lg p-4 border-2 border-purple-200 dark:border-purple-800",children:[i.jsx("div",{className:"text-purple-600 dark:text-purple-400 text-sm font-medium mb-2",children:"Ngn hng"}),i.jsx("div",{className:"text-purple-900 dark:text-purple-100 text-2xl font-bold",children:Ie(k.bankBalance)})]})]}),i.jsxs("div",{className:"md:hidden space-y-3 mb-4",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-medium text-slate-500 dark:text-slate-400 mb-1 block",children:"Loi"}),i.jsxs("select",{value:o,onChange:S=>c(S.target.value),className:"w-full p-2 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg text-sm",children:[i.jsx("option",{value:"all",children:"Tt c"}),i.jsx("option",{value:"income",children:"Thu"}),i.jsx("option",{value:"expense",children:"Chi"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-medium text-slate-500 dark:text-slate-400 mb-1 block",children:"Ngun tin"}),i.jsxs("select",{value:d,onChange:S=>f(S.target.value),className:"w-full p-2 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg text-sm",children:[i.jsx("option",{value:"all",children:"Tt c"}),i.jsx("option",{value:"cash",children:"Tin mt"}),i.jsx("option",{value:"bank",children:"Ngn hng"})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-medium text-slate-500 dark:text-slate-400 mb-1 block",children:"Thi gian"}),i.jsxs("select",{value:p,onChange:S=>y(S.target.value),className:"w-full p-2 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg text-sm",children:[i.jsx("option",{value:"today",children:"Hm nay"}),i.jsx("option",{value:"week",children:"7 ngy qua"}),i.jsx("option",{value:"month",children:"30 ngy qua"}),i.jsx("option",{value:"all",children:"Tt c"})]})]})]}),i.jsx("div",{className:"hidden md:block bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-4 mb-4",children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Loi:"}),i.jsx("div",{className:"flex gap-2",children:[{value:"all",label:"Tt c"},{value:"income",label:"Thu"},{value:"expense",label:"Chi"}].map(S=>i.jsx("button",{onClick:()=>c(S.value),className:`px-3 py-1.5 rounded-md text-sm font-medium transition-colors ${o===S.value?"bg-blue-600 text-white":"bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-600"}`,children:S.label},S.value))})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Ngun tin:"}),i.jsxs("select",{value:d,onChange:S=>f(S.target.value),className:"px-3 py-1.5 bg-slate-100 dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-md text-sm text-slate-900 dark:text-white",children:[i.jsx("option",{value:"all",children:"Tt c"}),i.jsx("option",{value:"cash",children:"Tin mt"}),i.jsx("option",{value:"bank",children:"Ngn hng"})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Thi gian:"}),i.jsx("div",{className:"flex gap-2",children:[{value:"today",label:"Hm nay"},{value:"week",label:"7 ngy"},{value:"month",label:"30 ngy"},{value:"all",label:"Tt c"}].map(S=>i.jsx("button",{onClick:()=>y(S.value),className:`px-3 py-1.5 rounded-md text-sm font-medium transition-colors ${p===S.value?"bg-blue-600 text-white":"bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-600"}`,children:S.label},S.value))})]})]})}),i.jsx("div",{className:"md:hidden space-y-3",children:w.length===0?i.jsx("div",{className:"text-center py-8 text-slate-500 dark:text-slate-400 bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700",children:"Khng c giao dch no"}):w.map(S=>i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg border border-slate-200 dark:border-slate-700 shadow-sm",children:[i.jsxs("div",{className:"flex justify-between items-start mb-2",children:[i.jsxs("div",{children:[i.jsx("div",{className:"font-medium text-slate-900 dark:text-white",children:KD(S.category)}),i.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 mt-0.5",children:Bn(new Date(S.date))})]}),i.jsxs("div",{className:`font-bold ${S.type==="income"?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:[S.type==="income"?"+":"-",Ie(S.amount)]})]}),i.jsxs("div",{className:"flex items-center justify-between text-sm",children:[i.jsx("span",{className:"text-slate-600 dark:text-slate-400 truncate max-w-[60%]",children:S.notes||"--"}),i.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-medium bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300",children:S.paymentSourceId==="cash"?"Tin mt":"Ngn hng"})]})]},S.id))}),i.jsx("div",{className:"hidden md:block bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 overflow-hidden",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Ngy"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Loi"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Danh mc"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"i tng"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Ni dung"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Ngun tin"}),i.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"S tin"}),i.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Thao tc"})]})}),i.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:w.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:8,className:"px-4 py-8 text-center text-slate-500 dark:text-slate-400",children:"Khng c giao dch no"})}):w.map(S=>i.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[i.jsx("td",{className:"px-4 py-3 text-sm text-slate-900 dark:text-slate-100",children:Bn(new Date(S.date))}),i.jsx("td",{className:"px-4 py-3",children:i.jsx("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium ${S.type==="income"?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400"}`,children:S.type==="income"?" Thu":" Chi"})}),i.jsx("td",{className:"px-4 py-3 text-sm text-slate-600 dark:text-slate-400",children:KD(S.category)}),i.jsx("td",{className:"px-4 py-3 text-sm text-slate-900 dark:text-slate-100 font-medium",children:S.recipient||"--"}),i.jsx("td",{className:"px-4 py-3 text-sm text-slate-600 dark:text-slate-400",children:S.notes||"--"}),i.jsx("td",{className:"px-4 py-3 text-sm text-slate-600 dark:text-slate-400",children:S.paymentSourceId==="cash"?"Tin mt":"Ngn hng"}),i.jsxs("td",{className:`px-4 py-3 text-right text-sm font-semibold ${S.type==="income"?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:[S.type==="income"?"+":"-",Ie(S.amount)]}),i.jsx("td",{className:"px-4 py-3 text-center",children:i.jsx("button",{className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-300",children:i.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"})})})})]},S.id))})]})})]}),g&&i.jsx(Oje,{onClose:()=>N(!1),onSave:async S=>{if(!S.amount||S.amount<=0){Ye.warning("S tin phi > 0");return}try{const O=await s.mutateAsync({type:S.type,amount:S.amount,branchId:r,paymentSourceId:S.paymentSourceId,date:S.date,notes:S.notes,category:S.category,recipient:S.recipient});if(O!=null&&O.ok){n(D=>[O.data,...D]);const E=S.type==="income"?S.amount:-S.amount;await l.mutateAsync({id:S.paymentSourceId,branchId:r,delta:E}),a(D=>D.map(H=>H.id===S.paymentSourceId?{...H,balance:{...H.balance,[r]:(H.balance[r]||0)+E}}:H)),Ye.success(" thm giao dch s qu"),N(!1)}else O!=null&&O.error&&Ye.error(O.error.message||"Ghi giao dch tht bi")}catch(O){Ye.error((O==null?void 0:O.message)||"Li khng xc nh")}}})]})},KD=e=>e?{sale_income:"Bn hng",service_income:"Dch v",other_income:"Thu khc",inventory_purchase:"Mua hng",salary:"Lng nhn vin",loan_payment:"Tr n vay",debt_collection:"Thu n khch hng",debt_payment:"Tr n nh cung cp",sale_refund:"Hon tr",other_expense:"Chi khc"}[e]||e:"--",Oje=({onClose:e,onSave:t})=>{const[r,n]=T.useState("income"),[a,s]=T.useState("0"),[l,o]=T.useState(""),[c,d]=T.useState("cash"),[f,p]=T.useState(""),[y,g]=T.useState(""),[N,w]=T.useState(new Date().toISOString().split("T")[0]),k=E=>{E.preventDefault(),t({type:r,amount:parseFloat(a),category:l,paymentSourceId:c,recipient:f,notes:y,date:new Date(N).toISOString()})},S=[{value:"sale_income",label:"Tin bn hng"},{value:"service_income",label:"Tin dch v"},{value:"other_income",label:"Thu nhp khc"}],O=[{value:"inventory_purchase",label:"Mua hng"},{value:"salary",label:"Lng nhn vin"},{value:"rent",label:"Tin thu mt bng"},{value:"utilities",label:"in nc"},{value:"sale_refund",label:"Hon tr khch hng"},{value:"other_expense",label:"Chi ph khc"}];return i.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl max-w-lg w-full border border-slate-200 dark:border-slate-700",children:[i.jsx("div",{className:"px-6 py-4 border-b border-slate-200 dark:border-slate-700",children:i.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-white",children:"Thm giao dch"})}),i.jsxs("form",{onSubmit:k,className:"p-6 space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Loi giao dch"}),i.jsxs("div",{className:"flex gap-4",children:[i.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[i.jsx("input",{type:"radio",value:"income",checked:r==="income",onChange:E=>n(E.target.value),className:"w-4 h-4 text-blue-600"}),i.jsx("span",{className:"text-slate-900 dark:text-white",children:"Thu tin"})]}),i.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[i.jsx("input",{type:"radio",value:"expense",checked:r==="expense",onChange:E=>n(E.target.value),className:"w-4 h-4 text-blue-600"}),i.jsx("span",{className:"text-slate-900 dark:text-white",children:"Chi tin"})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"S tin"}),i.jsx("input",{type:"number",value:a,onChange:E=>s(E.target.value),className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Danh mc"}),i.jsxs("select",{value:l,onChange:E=>o(E.target.value),className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white",required:!0,children:[i.jsx("option",{value:"",children:"Chn danh mc"}),(r==="income"?S:O).map(E=>i.jsx("option",{value:E.value,children:E.label},E.value))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"i tng"}),i.jsx("input",{type:"text",value:f,onChange:E=>p(E.target.value),placeholder:r==="income"?"Thu tin t ai?":"Chi tin cho ai?",className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Ngun tin"}),i.jsxs("div",{className:"flex gap-4",children:[i.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[i.jsx("input",{type:"radio",value:"cash",checked:c==="cash",onChange:E=>d(E.target.value),className:"w-4 h-4 text-blue-600"}),i.jsx("span",{className:"text-slate-900 dark:text-white",children:"Tin mt"})]}),i.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[i.jsx("input",{type:"radio",value:"bank",checked:c==="bank",onChange:E=>d(E.target.value),className:"w-4 h-4 text-blue-600"}),i.jsx("span",{className:"text-slate-900 dark:text-white",children:"Ngn hng"})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Ngy giao dch"}),i.jsx("input",{type:"date",value:N,onChange:E=>w(E.target.value),className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Ni dung"}),i.jsx("textarea",{value:y,onChange:E=>g(E.target.value),rows:3,className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white",placeholder:"Ghi ch v giao dch..."})]}),i.jsxs("div",{className:"flex gap-3 pt-2",children:[i.jsx("button",{type:"button",onClick:e,className:"flex-1 px-4 py-2.5 bg-slate-200 dark:bg-slate-700 hover:bg-slate-300 dark:hover:bg-slate-600 text-slate-900 dark:text-white rounded-lg font-medium transition-colors",children:"Hy"}),i.jsx("button",{type:"submit",className:"flex-1 px-4 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors",children:"Lu giao dch"})]})]})]})})},$V=()=>{const{currentBranchId:e,setCashTransactions:t,cashTransactions:r,setPaymentSources:n,paymentSources:a}=Ua(),{data:s=[],isLoading:l}=CF(),{data:o=[],isLoading:c}=xte(),d=hte(),f=fte();mte();const p=pte(),[y,g]=T.useState(!1),[N,w]=T.useState(!1),[k,S]=T.useState(!1),[O,E]=T.useState(null),[D,H]=T.useState(null),W=T.useMemo(()=>{const z=s.reduce((Q,re)=>Q+re.principal,0),U=s.reduce((Q,re)=>Q+re.remainingAmount,0),Z=z-U,q=s.filter(Q=>Q.status==="active").length,K=s.filter(Q=>Q.status==="overdue").length;return{totalLoans:z,totalRemaining:U,totalPaid:Z,activeLoans:q,overdueLoans:K}},[s]),R=T.useMemo(()=>({active:s.filter(z=>z.status==="active"),overdue:s.filter(z=>z.status==="overdue"),paid:s.filter(z=>z.status==="paid")}),[s]);return i.jsxs("div",{className:"h-full flex flex-col bg-slate-50 dark:bg-slate-900",children:[i.jsx("div",{className:"bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 px-6 py-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Qun l vn & vay"}),i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:"Theo di cc khon vay v lch tr n"})]}),i.jsxs("button",{onClick:()=>g(!0),className:"flex items-center gap-2 px-4 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors",children:[i.jsx(Cc,{className:"w-5 h-5"}),i.jsx("span",{children:"Thm khon vay"})]})]})}),i.jsx("div",{className:"p-4 md:p-6",children:l||c?i.jsxs("div",{className:"flex items-center justify-center py-12",children:[i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-cyan-600"}),i.jsx("span",{className:"ml-3 text-secondary-text",children:"ang ti d liu..."})]}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-3 md:gap-4 mb-6",children:[i.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4 border-2 border-blue-200 dark:border-blue-800",children:[i.jsx("div",{className:"text-blue-600 dark:text-blue-400 text-sm font-medium mb-2",children:"Tng vay"}),i.jsx("div",{className:"text-blue-900 dark:text-blue-100 text-xl md:text-2xl font-bold truncate",children:Ie(W.totalLoans)})]}),i.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 rounded-lg p-4 border-2 border-red-200 dark:border-red-800",children:[i.jsx("div",{className:"text-red-600 dark:text-red-400 text-sm font-medium mb-2",children:"Cn n"}),i.jsx("div",{className:"text-red-900 dark:text-red-100 text-xl md:text-2xl font-bold truncate",children:Ie(W.totalRemaining)})]}),i.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-4 border-2 border-green-200 dark:border-green-800",children:[i.jsx("div",{className:"text-green-600 dark:text-green-400 text-sm font-medium mb-2",children:" tr"}),i.jsx("div",{className:"text-green-900 dark:text-green-100 text-xl md:text-2xl font-bold truncate",children:Ie(W.totalPaid)})]}),i.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/20 rounded-lg p-4 border-2 border-amber-200 dark:border-amber-800",children:[i.jsx("div",{className:"text-amber-600 dark:text-amber-400 text-sm font-medium mb-2",children:"ang vay"}),i.jsx("div",{className:"text-amber-900 dark:text-amber-100 text-xl md:text-2xl font-bold",children:W.activeLoans}),i.jsx("div",{className:"text-amber-600 dark:text-amber-400 text-xs mt-1",children:"khon"})]}),i.jsxs("div",{className:"col-span-2 md:col-span-1 bg-orange-50 dark:bg-orange-900/20 rounded-lg p-4 border-2 border-orange-200 dark:border-orange-800",children:[i.jsx("div",{className:"text-orange-600 dark:text-orange-400 text-sm font-medium mb-2",children:"Qu hn"}),i.jsx("div",{className:"text-orange-900 dark:text-orange-100 text-xl md:text-2xl font-bold",children:W.overdueLoans}),i.jsx("div",{className:"text-orange-600 dark:text-orange-400 text-xs mt-1",children:"khon"})]})]}),i.jsxs("div",{className:"mb-6",children:[i.jsx("h2",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"Cc khon vay ang hot ng"}),R.active.length===0?i.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-8 text-center text-slate-500 dark:text-slate-400",children:"Khng c khon vay no ang hot ng"}):i.jsx("div",{className:"grid gap-4",children:R.active.map(z=>i.jsx(pN,{loan:z,onPayment:()=>{E(z),S(!0)},onEdit:()=>{H(z),w(!0)}},z.id))})]}),R.overdue.length>0&&i.jsxs("div",{className:"mb-6",children:[i.jsx("h2",{className:"text-lg font-semibold text-orange-600 dark:text-orange-400 mb-4",children:"Cc khon vay qu hn"}),i.jsx("div",{className:"grid gap-4",children:R.overdue.map(z=>i.jsx(pN,{loan:z,onPayment:()=>{E(z),S(!0)},onEdit:()=>{H(z),w(!0)},isOverdue:!0},z.id))})]}),R.paid.length>0&&i.jsxs("div",{children:[i.jsx("h2",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"Cc khon vay  thanh ton"}),i.jsx("div",{className:"grid gap-4",children:R.paid.map(z=>i.jsx(pN,{loan:z,isPaid:!0},z.id))})]})]})}),y&&i.jsx(Pje,{onClose:()=>g(!1),onSave:async z=>{try{await d.mutateAsync(z),Ye.success(" thm khon vay thnh cng"),g(!1)}catch(U){Ye.error(U.message||"Khng th thm khon vay")}}}),N&&D&&i.jsx(Ije,{loan:D,onClose:()=>{w(!1),H(null)},onSave:async z=>{try{await f.mutateAsync({id:D.id,updates:z}),Ye.success(" cp nht khon vay thnh cng"),w(!1),H(null)}catch(U){Ye.error(U.message||"Khng th cp nht khon vay")}}}),k&&O&&i.jsx(Dje,{loan:O,onClose:()=>{S(!1),E(null)},onSave:async z=>{try{await f.mutateAsync({id:O.id,updates:{remainingAmount:z.remainingAmount,status:z.remainingAmount===0?"paid":O.status}}),await p.mutateAsync(z),Ye.success(" ghi nhn thanh ton thnh cng");const Z={id:`CT-${Date.now()}`,type:"expense",date:z.paymentDate,amount:z.totalAmount,recipient:O.lenderName,notes:`Tr n vay - ${O.lenderName} (Gc: ${Ie(z.principalAmount)}, Li: ${Ie(z.interestAmount)})`,paymentSourceId:z.paymentMethod,branchId:e,category:"loan_payment"};t([Z,...r]),n(a.map(q=>q.id===z.paymentMethod?{...q,balance:{...q.balance,[e]:(q.balance[e]||0)-z.totalAmount}}:q)),S(!1),E(null)}catch(U){Ye.error(U.message||"Khng th ghi nhn thanh ton")}}})]})},pN=({loan:e,onPayment:t,onEdit:r,isOverdue:n,isPaid:a})=>{const s=(e.principal-e.remainingAmount)/e.principal*100,l=Math.ceil((new Date(e.endDate).getTime()-new Date().getTime())/(1e3*60*60*24));return i.jsxs("div",{className:`bg-white dark:bg-slate-800 rounded-lg border-2 p-6 ${n?"border-orange-300 dark:border-orange-700":a?"border-green-300 dark:border-green-700":"border-slate-200 dark:border-slate-700"}`,children:[i.jsxs("div",{className:"flex items-start justify-between mb-4",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:e.lenderName}),i.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${e.loanType==="bank"?"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400":e.loanType==="personal"?"bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-400":"bg-slate-100 text-slate-800 dark:bg-slate-700 dark:text-slate-400"}`,children:e.loanType==="bank"?"Ngn hng":e.loanType==="personal"?"C nhn":"Khc"})]}),i.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:e.purpose})]}),!a&&i.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[i.jsx("button",{onClick:r,className:"px-4 py-2 bg-amber-500 hover:bg-amber-600 text-white rounded-lg text-sm font-medium transition-colors whitespace-nowrap",children:" Sa"}),i.jsx("button",{onClick:t,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm font-medium transition-colors whitespace-nowrap",children:" Tr n"})]})]}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"S tin vay"}),i.jsx("div",{className:"text-sm font-semibold text-slate-900 dark:text-white truncate",children:Ie(e.principal)})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"Cn n"}),i.jsx("div",{className:"text-sm font-semibold text-red-600 dark:text-red-400 truncate",children:Ie(e.remainingAmount)})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"Li sut"}),i.jsxs("div",{className:"text-sm font-semibold text-slate-900 dark:text-white",children:[e.interestRate,"%/nm"]})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"Tr hng thng"}),i.jsx("div",{className:"text-sm font-semibold text-slate-900 dark:text-white truncate",children:Ie(e.monthlyPayment)})]})]}),i.jsxs("div",{className:"mb-4",children:[i.jsxs("div",{className:"flex justify-between text-xs text-slate-500 dark:text-slate-400 mb-2",children:[i.jsxs("span",{children:[" tr ",s.toFixed(1),"%"]}),i.jsx("span",{children:!a&&(n?"Qu hn":l>0?`Cn ${l} ngy`:"n hn hm nay")})]}),i.jsx("div",{className:"h-2 bg-slate-200 dark:bg-slate-700 rounded-full overflow-hidden",children:i.jsx("div",{className:`h-full transition-all ${n?"bg-orange-500":a?"bg-green-500":"bg-blue-500"}`,style:{width:`${s}%`}})})]}),i.jsxs("div",{className:"flex items-center justify-between text-xs text-slate-500 dark:text-slate-400",children:[i.jsxs("span",{children:["Ngy vay: ",Bn(new Date(e.startDate))]}),i.jsxs("span",{children:["n hn: ",Bn(new Date(e.endDate))]})]})]})},Pje=({onClose:e,onSave:t})=>{const[r,n]=T.useState(""),[a,s]=T.useState("bank"),[l,o]=T.useState("0"),[c,d]=T.useState("0"),[f,p]=T.useState("12"),[y,g]=T.useState(new Date().toISOString().split("T")[0]),[N,w]=T.useState(""),[k,S]=T.useState(""),O=E=>{E.preventDefault();const D=parseFloat(l),H=parseFloat(c),W=parseInt(f),R=H/100/12,z=D*(R*Math.pow(1+R,W))/(Math.pow(1+R,W)-1),U=new Date(y),Z=new Date(U);Z.setMonth(Z.getMonth()+W);const q={lenderName:r,loanType:a,principal:D,interestRate:H,term:W,startDate:U.toISOString(),endDate:Z.toISOString(),remainingAmount:D,monthlyPayment:isNaN(z)?0:z,status:"active",purpose:N,collateral:k};t(q)};return i.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl max-w-2xl w-full border border-slate-200 dark:border-slate-700 max-h-[90vh] overflow-y-auto",children:[i.jsx("div",{className:"px-6 py-4 border-b border-slate-200 dark:border-slate-700 sticky top-0 bg-white dark:bg-slate-800",children:i.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-white",children:"Thm khon vay mi"})}),i.jsxs("form",{onSubmit:O,className:"p-6 space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Tn ngn hng/Ngi cho vay *"}),i.jsx("input",{type:"text",value:r,onChange:E=>n(E.target.value),className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Loi vay *"}),i.jsxs("select",{value:a,onChange:E=>s(E.target.value),className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white",children:[i.jsx("option",{value:"bank",children:"Ngn hng"}),i.jsx("option",{value:"personal",children:"C nhn"}),i.jsx("option",{value:"other",children:"Khc"})]})]})]}),i.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"S tin vay *"}),i.jsx("input",{type:"number",value:l,onChange:E=>o(E.target.value),className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Li sut (%/nm) *"}),i.jsx("input",{type:"number",step:"0.1",value:c,onChange:E=>d(E.target.value),className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"K hn (thng) *"}),i.jsx("input",{type:"number",value:f,onChange:E=>p(E.target.value),className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white",required:!0})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Ngy vay *"}),i.jsx("input",{type:"date",value:y,onChange:E=>g(E.target.value),className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Mc ch vay"}),i.jsx("input",{type:"text",value:N,onChange:E=>w(E.target.value),placeholder:"V d: M rng ca hng, mua thit b...",className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Ti sn th chp"}),i.jsx("input",{type:"text",value:k,onChange:E=>S(E.target.value),placeholder:"V d: S  nh, giy t xe...",className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white"})]}),i.jsxs("div",{className:"flex gap-3 pt-4",children:[i.jsx("button",{type:"button",onClick:e,className:"flex-1 px-4 py-2.5 bg-slate-200 dark:bg-slate-700 hover:bg-slate-300 dark:hover:bg-slate-600 text-slate-900 dark:text-white rounded-lg font-medium transition-colors",children:"Hy"}),i.jsx("button",{type:"submit",className:"flex-1 px-4 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors",children:"Thm khon vay"})]})]})]})})},Ije=({loan:e,onClose:t,onSave:r})=>{const[n,a]=T.useState(e.lenderName),[s,l]=T.useState(e.loanType),[o,c]=T.useState(e.principal.toString()),[d,f]=T.useState(e.interestRate.toString()),[p,y]=T.useState(e.term.toString()),[g,N]=T.useState(e.startDate.split("T")[0]),[w,k]=T.useState(e.purpose||""),[S,O]=T.useState(e.collateral||""),E=D=>{D.preventDefault();const H=parseFloat(o),W=parseFloat(d),R=parseInt(p),z=W/100/12,U=H*(z*Math.pow(1+z,R))/(Math.pow(1+z,R)-1),Z=new Date(g),q=new Date(Z);q.setMonth(q.getMonth()+R);const K={lenderName:n,loanType:s,principal:H,interestRate:W,term:R,startDate:Z.toISOString(),endDate:q.toISOString(),monthlyPayment:isNaN(U)?0:U,purpose:w,collateral:S};r(K)};return i.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl max-w-2xl w-full border border-slate-200 dark:border-slate-700 max-h-[90vh] overflow-y-auto",children:[i.jsx("div",{className:"px-6 py-4 border-b border-slate-200 dark:border-slate-700 sticky top-0 bg-white dark:bg-slate-800",children:i.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-white",children:"Chnh sa khon vay"})}),i.jsxs("form",{onSubmit:E,className:"p-6 space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Tn ngn hng/Ngi cho vay *"}),i.jsx("input",{type:"text",value:n,onChange:D=>a(D.target.value),className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Loi vay *"}),i.jsxs("select",{value:s,onChange:D=>l(D.target.value),className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white",children:[i.jsx("option",{value:"bank",children:"Ngn hng"}),i.jsx("option",{value:"personal",children:"C nhn"}),i.jsx("option",{value:"other",children:"Khc"})]})]})]}),i.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"S tin vay *"}),i.jsx("input",{type:"number",value:o,onChange:D=>c(D.target.value),className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Li sut (%/nm) *"}),i.jsx("input",{type:"number",step:"0.1",value:d,onChange:D=>f(D.target.value),className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"K hn (thng) *"}),i.jsx("input",{type:"number",value:p,onChange:D=>y(D.target.value),className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white",required:!0})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Ngy vay *"}),i.jsx("input",{type:"date",value:g,onChange:D=>N(D.target.value),className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Mc ch vay"}),i.jsx("input",{type:"text",value:w,onChange:D=>k(D.target.value),placeholder:"V d: M rng ca hng, mua thit b...",className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Ti sn th chp"}),i.jsx("input",{type:"text",value:S,onChange:D=>O(D.target.value),placeholder:"V d: S  nh, giy t xe...",className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white"})]}),i.jsxs("div",{className:"flex gap-3 pt-4",children:[i.jsx("button",{type:"button",onClick:t,className:"flex-1 px-4 py-2.5 bg-slate-200 dark:bg-slate-700 hover:bg-slate-300 dark:hover:bg-slate-600 text-slate-900 dark:text-white rounded-lg font-medium transition-colors",children:"Hy"}),i.jsx("button",{type:"submit",className:"flex-1 px-4 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors",children:"Cp nht"})]})]})]})})},Dje=({loan:e,onClose:t,onSave:r})=>{const[n,a]=T.useState(e.monthlyPayment.toString()),[s,l]=T.useState("0"),[o,c]=T.useState("bank"),[d,f]=T.useState(new Date().toISOString().split("T")[0]),[p,y]=T.useState(""),g=parseFloat(n)+parseFloat(s),N=e.remainingAmount-parseFloat(n),w=k=>{k.preventDefault();const S={id:`LOANPAY-${Date.now()}`,loanId:e.id,paymentDate:new Date(d).toISOString(),principalAmount:parseFloat(n),interestAmount:parseFloat(s),totalAmount:g,remainingAmount:Math.max(0,N),paymentMethod:o,notes:p,branchId:e.branchId};r(S)};return i.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl max-w-lg w-full border border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{className:"px-6 py-4 border-b border-slate-200 dark:border-slate-700",children:[i.jsxs("h2",{className:"text-xl font-semibold text-slate-900 dark:text-white",children:["Tr n - ",e.lenderName]}),i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:["Cn n: ",Ie(e.remainingAmount)]})]}),i.jsxs("form",{onSubmit:w,className:"p-6 space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Tin gc *"}),i.jsx("input",{type:"number",value:n,onChange:k=>a(k.target.value),className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Tin li"}),i.jsx("input",{type:"number",value:s,onChange:k=>l(k.target.value),className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white"})]}),i.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4 border border-blue-200 dark:border-blue-800",children:[i.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[i.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Tng tin tr:"}),i.jsx("span",{className:"font-semibold text-slate-900 dark:text-white",children:Ie(g)})]}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Cn li sau khi tr:"}),i.jsx("span",{className:"font-semibold text-red-600 dark:text-red-400",children:Ie(Math.max(0,N))})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Hnh thc thanh ton"}),i.jsxs("div",{className:"flex gap-4",children:[i.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[i.jsx("input",{type:"radio",value:"cash",checked:o==="cash",onChange:k=>c(k.target.value),className:"w-4 h-4 text-blue-600"}),i.jsx("span",{className:"text-slate-900 dark:text-white",children:"Tin mt"})]}),i.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[i.jsx("input",{type:"radio",value:"bank",checked:o==="bank",onChange:k=>c(k.target.value),className:"w-4 h-4 text-blue-600"}),i.jsx("span",{className:"text-slate-900 dark:text-white",children:"Chuyn khon"})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Ngy tr"}),i.jsx("input",{type:"date",value:d,onChange:k=>f(k.target.value),className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Ghi ch"}),i.jsx("textarea",{value:p,onChange:k=>y(k.target.value),rows:2,className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white"})]}),i.jsxs("div",{className:"flex gap-3 pt-2",children:[i.jsx("button",{type:"button",onClick:t,className:"flex-1 px-4 py-2.5 bg-slate-200 dark:bg-slate-700 hover:bg-slate-300 dark:hover:bg-slate-600 text-slate-900 dark:text-white rounded-lg font-medium transition-colors",children:"Hy"}),i.jsx("button",{type:"submit",className:"flex-1 px-4 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors",children:"Xc nhn tr n"})]})]})]})})};async function Mje(){try{const{data:e,error:t}=await Pt.from("fixed_assets").select("*").order("purchase_date",{ascending:!1});if(t)return At({code:"supabase",message:"Khng th ti danh sch ti sn c nh",cause:t});const r=(e||[]).map(n=>({id:n.id,name:n.name,assetType:n.asset_type,purchasePrice:parseFloat(n.purchase_price),currentValue:parseFloat(n.current_value),purchaseDate:n.purchase_date,depreciationRate:parseFloat(n.depreciation_rate),depreciationMethod:n.depreciation_method,usefulLife:n.useful_life,status:n.status,serialNumber:n.serial_number,location:n.location,supplier:n.supplier,warranty:n.warranty,notes:n.notes,branchId:n.branch_id,created_at:n.created_at,updated_at:n.updated_at}));return kn(r)}catch(e){return At({code:"network",message:"Li kt ni khi ti ti sn c nh",cause:e})}}async function Lje(e){try{const{data:t,error:r}=await Pt.from("fixed_assets").insert({name:e.name,asset_type:e.assetType,purchase_price:e.purchasePrice,current_value:e.currentValue,purchase_date:e.purchaseDate,depreciation_rate:e.depreciationRate,depreciation_method:e.depreciationMethod,useful_life:e.usefulLife,status:e.status,serial_number:e.serialNumber,location:e.location,supplier:e.supplier,warranty:e.warranty,notes:e.notes,branch_id:e.branchId}).select().single();return r||!t?At({code:"supabase",message:"Khng th thm ti sn c nh",cause:r}):kn({id:t.id,name:t.name,assetType:t.asset_type,purchasePrice:parseFloat(t.purchase_price),currentValue:parseFloat(t.current_value),purchaseDate:t.purchase_date,depreciationRate:parseFloat(t.depreciation_rate),depreciationMethod:t.depreciation_method,usefulLife:t.useful_life,status:t.status,serialNumber:t.serial_number,location:t.location,supplier:t.supplier,warranty:t.warranty,notes:t.notes,branchId:t.branch_id,created_at:t.created_at,updated_at:t.updated_at})}catch(t){return At({code:"network",message:"Li kt ni khi thm ti sn c nh",cause:t})}}async function Rje(e,t){try{const r={};t.name!==void 0&&(r.name=t.name),t.assetType!==void 0&&(r.asset_type=t.assetType),t.purchasePrice!==void 0&&(r.purchase_price=t.purchasePrice),t.currentValue!==void 0&&(r.current_value=t.currentValue),t.purchaseDate!==void 0&&(r.purchase_date=t.purchaseDate),t.depreciationRate!==void 0&&(r.depreciation_rate=t.depreciationRate),t.depreciationMethod!==void 0&&(r.depreciation_method=t.depreciationMethod),t.usefulLife!==void 0&&(r.useful_life=t.usefulLife),t.status!==void 0&&(r.status=t.status),t.serialNumber!==void 0&&(r.serial_number=t.serialNumber),t.location!==void 0&&(r.location=t.location),t.supplier!==void 0&&(r.supplier=t.supplier),t.warranty!==void 0&&(r.warranty=t.warranty),t.notes!==void 0&&(r.notes=t.notes);const{data:n,error:a}=await Pt.from("fixed_assets").update(r).eq("id",e).select().single();return a||!n?At({code:"supabase",message:"Khng th cp nht ti sn c nh",cause:a}):kn({id:n.id,name:n.name,assetType:n.asset_type,purchasePrice:parseFloat(n.purchase_price),currentValue:parseFloat(n.current_value),purchaseDate:n.purchase_date,depreciationRate:parseFloat(n.depreciation_rate),depreciationMethod:n.depreciation_method,usefulLife:n.useful_life,status:n.status,serialNumber:n.serial_number,location:n.location,supplier:n.supplier,warranty:n.warranty,notes:n.notes,branchId:n.branch_id,created_at:n.created_at,updated_at:n.updated_at})}catch(r){return At({code:"network",message:"Li kt ni khi cp nht ti sn c nh",cause:r})}}async function Fje(e){try{const{error:t}=await Pt.from("fixed_assets").delete().eq("id",e);return t?At({code:"supabase",message:"Khng th xa ti sn c nh",cause:t}):kn(void 0)}catch(t){return At({code:"network",message:"Li kt ni khi xa ti sn c nh",cause:t})}}function Bje(){const{currentBranchId:e}=Ua();return Os({queryKey:["fixed-assets",e],queryFn:async()=>{const t=await Mje();if(!t.ok)throw new Error(t.error.message);return t.data.filter(r=>r.branchId===e)},staleTime:3e4})}function Uje(){const e=qn(),{currentBranchId:t}=Ua();return ha({mutationFn:async r=>{const n=await Lje(r);if(!n.ok)throw new Error(n.error.message);return n.data},onSuccess:()=>{e.invalidateQueries({queryKey:["fixed-assets",t]})}})}function zje(){const e=qn(),{currentBranchId:t}=Ua();return ha({mutationFn:async({id:r,updates:n})=>{const a=await Rje(r,n);if(!a.ok)throw new Error(a.error.message);return a.data},onSuccess:()=>{e.invalidateQueries({queryKey:["fixed-assets",t]})}})}function qje(){const e=qn(),{currentBranchId:t}=Ua();return ha({mutationFn:async r=>{const n=await Fje(r);if(!n.ok)throw new Error(n.error.message)},onSuccess:()=>{e.invalidateQueries({queryKey:["fixed-assets",t]})}})}const Hje=()=>{const{currentBranchId:e}=Ua(),{data:t=[],isLoading:r}=Bje(),n=Uje(),a=zje(),s=qje(),[l,o]=T.useState(!1),[c,d]=T.useState(!1),[f,p]=T.useState(null),[y,g]=T.useState("all"),[N,w]=T.useState("all"),k=T.useMemo(()=>{const H=t.reduce((U,Z)=>U+Z.purchasePrice,0),W=t.reduce((U,Z)=>U+Z.currentValue,0),R=t.filter(U=>U.status==="active").length,z=H-W;return{totalValue:H,currentValue:W,activeAssets:R,totalDepreciation:z}},[t]),S=T.useMemo(()=>t.filter(H=>!(y!=="all"&&H.assetType!==y||N!=="all"&&H.status!==N)),[t,y,N]),O=async H=>{try{await n.mutateAsync({...H,branchId:e}),Ye.success(" thm ti sn c nh"),o(!1)}catch(W){Ye.error(W.message||"Khng th thm ti sn")}},E=async H=>{if(f)try{await a.mutateAsync({id:f.id,updates:H}),Ye.success(" cp nht ti sn"),d(!1),p(null)}catch(W){Ye.error(W.message||"Khng th cp nht ti sn")}},D=async H=>{if(window.confirm("Bn c chc mun xa ti sn ny?"))try{await s.mutateAsync(H),Ye.success(" xa ti sn")}catch(W){Ye.error(W.message||"Khng th xa ti sn")}};return r?i.jsx("div",{className:"h-full flex items-center justify-center",children:i.jsx("div",{className:"text-slate-500 dark:text-slate-400",children:"ang ti..."})}):i.jsxs("div",{className:"h-full flex flex-col bg-slate-50 dark:bg-slate-900",children:[i.jsx("div",{className:"bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 px-6 py-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Ti sn c nh"}),i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:"Qun l ti sn v theo di khu hao"})]}),i.jsxs("button",{onClick:()=>o(!0),className:"flex items-center gap-2 px-4 py-2.5 bg-green-600 hover:bg-green-700 text-white rounded-lg font-medium transition-colors",children:[i.jsx(Cc,{className:"w-5 h-5"}),i.jsx("span",{children:"Thm ti sn"})]})]})}),i.jsxs("div",{className:"p-4 md:p-6",children:[i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-4",children:[i.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"Tng gi tr mua"}),i.jsx("div",{className:"text-xl font-bold text-slate-900 dark:text-white",children:Ie(k.totalValue)})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-4",children:[i.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"Gi tr hin ti"}),i.jsx("div",{className:"text-xl font-bold text-blue-600 dark:text-blue-400",children:Ie(k.currentValue)})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-4",children:[i.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"Khu hao ly k"}),i.jsx("div",{className:"text-xl font-bold text-orange-600 dark:text-orange-400",children:Ie(k.totalDepreciation)})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-4",children:[i.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"Ti sn ang dng"}),i.jsx("div",{className:"text-xl font-bold text-green-600 dark:text-green-400",children:k.activeAssets})]})]}),i.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-4 mb-4",children:i.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Loi:"}),i.jsxs("select",{value:y,onChange:H=>g(H.target.value),className:"px-3 py-1.5 bg-slate-100 dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-sm",children:[i.jsx("option",{value:"all",children:"Tt c"}),i.jsx("option",{value:"equipment",children:"Thit b"}),i.jsx("option",{value:"vehicle",children:"Xe c"}),i.jsx("option",{value:"building",children:"Nh xng"}),i.jsx("option",{value:"furniture",children:"Ni tht"}),i.jsx("option",{value:"other",children:"Khc"})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Trng thi:"}),i.jsxs("select",{value:N,onChange:H=>w(H.target.value),className:"px-3 py-1.5 bg-slate-100 dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-sm",children:[i.jsx("option",{value:"all",children:"Tt c"}),i.jsx("option",{value:"active",children:"ang dng"}),i.jsx("option",{value:"maintenance",children:"Bo tr"}),i.jsx("option",{value:"disposed",children:" thanh l"})]})]})]})}),S.length===0?i.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-8 text-center text-slate-500 dark:text-slate-400",children:t.length===0?"Cha c ti sn c nh no":"Khng tm thy ti sn ph hp"}):i.jsx("div",{className:"grid gap-4",children:S.map(H=>i.jsx($je,{asset:H,onEdit:()=>{p(H),d(!0)},onDelete:()=>D(H.id)},H.id))})]}),l&&i.jsx(GD,{onClose:()=>o(!1),onSave:O,branchId:e}),c&&f&&i.jsx(GD,{asset:f,onClose:()=>{d(!1),p(null)},onSave:E,branchId:e})]})},$je=({asset:e,onEdit:t,onDelete:r})=>{const n=(e.purchasePrice-e.currentValue)/e.purchasePrice*100,a=o=>({equipment:"Thit b",vehicle:"Xe c",building:"Nh xng",furniture:"Ni tht",other:"Khc"})[o]||o,s=o=>{const c={active:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400",maintenance:"bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-400",disposed:"bg-slate-100 text-slate-800 dark:bg-slate-700 dark:text-slate-400"};return c[o]||c.active},l=o=>({active:"ang dng",maintenance:"Bo tr",disposed:" thanh l"})[o]||o;return i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-6",children:[i.jsxs("div",{className:"flex items-start justify-between mb-4",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:e.name}),i.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400",children:a(e.assetType)}),i.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${s(e.status)}`,children:l(e.status)})]}),e.serialNumber&&i.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:["Serial: ",e.serialNumber]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:t,className:"px-3 py-1.5 bg-amber-500 hover:bg-amber-600 text-white rounded-lg text-sm font-medium transition-colors",children:" Sa"}),i.jsx("button",{onClick:r,className:"px-3 py-1.5 bg-red-500 hover:bg-red-600 text-white rounded-lg text-sm font-medium transition-colors",children:" Xa"})]})]}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"Gi mua"}),i.jsx("div",{className:"text-sm font-semibold text-slate-900 dark:text-white",children:Ie(e.purchasePrice)})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"Gi tr hin ti"}),i.jsx("div",{className:"text-sm font-semibold text-blue-600 dark:text-blue-400",children:Ie(e.currentValue)})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"Khu hao/nm"}),i.jsxs("div",{className:"text-sm font-semibold text-slate-900 dark:text-white",children:[e.depreciationRate,"%"]})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"Thi gian SD"}),i.jsxs("div",{className:"text-sm font-semibold text-slate-900 dark:text-white",children:[e.usefulLife," nm"]})]})]}),i.jsxs("div",{className:"mb-3",children:[i.jsxs("div",{className:"flex justify-between text-xs text-slate-500 dark:text-slate-400 mb-2",children:[i.jsxs("span",{children:["Khu hao: ",n.toFixed(1),"%"]}),i.jsxs("span",{children:["Cn li: ",(100-n).toFixed(1),"%"]})]}),i.jsx("div",{className:"h-2 bg-slate-200 dark:bg-slate-700 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-full bg-orange-500 transition-all",style:{width:`${n}%`}})})]}),i.jsxs("div",{className:"flex items-center justify-between text-xs text-slate-500 dark:text-slate-400",children:[i.jsxs("span",{children:["Ngy mua: ",Bn(new Date(e.purchaseDate))]}),e.location&&i.jsxs("span",{children:["V tr: ",e.location]})]})]})},GD=({asset:e,onClose:t,onSave:r,branchId:n})=>{const[a,s]=T.useState((e==null?void 0:e.name)||""),[l,o]=T.useState((e==null?void 0:e.assetType)||"equipment"),[c,d]=T.useState((e==null?void 0:e.purchaseDate.split("T")[0])||new Date().toISOString().split("T")[0]),[f,p]=T.useState((e==null?void 0:e.purchasePrice.toString())||"0"),[y,g]=T.useState((e==null?void 0:e.depreciationRate.toString())||"10"),[N,w]=T.useState((e==null?void 0:e.usefulLife.toString())||"5"),[k,S]=T.useState((e==null?void 0:e.status)||"active"),[O,E]=T.useState((e==null?void 0:e.location)||""),[D,H]=T.useState((e==null?void 0:e.serialNumber)||""),[W,R]=T.useState((e==null?void 0:e.supplier)||""),[z,U]=T.useState((e==null?void 0:e.warranty)||""),[Z,q]=T.useState((e==null?void 0:e.notes)||""),K=Q=>{Q.preventDefault();const re=parseFloat(f),ae=parseFloat(y),de=parseFloat(N),he=(new Date().getTime()-new Date(c).getTime())/(1e3*60*60*24*365),Se=re*ae/100,ke=Math.min(Se*he,re),Le=Math.max(0,re-ke),fe={name:a,assetType:l,purchaseDate:new Date(c).toISOString(),purchasePrice:re,currentValue:Le,depreciationRate:ae,depreciationMethod:"straight-line",usefulLife:de,status:k,location:O,serialNumber:D,supplier:W,warranty:z,notes:Z,branchId:n};r(fe)};return i.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl max-w-3xl w-full border border-slate-200 dark:border-slate-700 max-h-[90vh] overflow-y-auto",children:[i.jsx("div",{className:"px-6 py-4 border-b border-slate-200 dark:border-slate-700 sticky top-0 bg-white dark:bg-slate-800",children:i.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-white",children:e?"Chnh sa ti sn":"Thm ti sn c nh"})}),i.jsxs("form",{onSubmit:K,className:"p-6 space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Tn ti sn *"}),i.jsx("input",{type:"text",value:a,onChange:Q=>s(Q.target.value),className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Loi ti sn *"}),i.jsxs("select",{value:l,onChange:Q=>o(Q.target.value),className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white",children:[i.jsx("option",{value:"equipment",children:"Thit b"}),i.jsx("option",{value:"vehicle",children:"Xe c"}),i.jsx("option",{value:"building",children:"Nh xng"}),i.jsx("option",{value:"furniture",children:"Ni tht"}),i.jsx("option",{value:"other",children:"Khc"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Trng thi"}),i.jsxs("select",{value:k,onChange:Q=>S(Q.target.value),className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white",children:[i.jsx("option",{value:"active",children:"ang dng"}),i.jsx("option",{value:"maintenance",children:"Bo tr"}),i.jsx("option",{value:"disposed",children:" thanh l"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Ngy mua *"}),i.jsx("input",{type:"date",value:c,onChange:Q=>d(Q.target.value),className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Gi mua *"}),i.jsx("input",{type:"number",value:f,onChange:Q=>p(Q.target.value),className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"T l khu hao (%/nm) *"}),i.jsx("input",{type:"number",step:"0.1",value:y,onChange:Q=>g(Q.target.value),className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Thi gian s dng (nm) *"}),i.jsx("input",{type:"number",value:N,onChange:Q=>w(Q.target.value),className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"S Serial"}),i.jsx("input",{type:"text",value:D,onChange:Q=>H(Q.target.value),className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"V tr"}),i.jsx("input",{type:"text",value:O,onChange:Q=>E(Q.target.value),className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Nh cung cp"}),i.jsx("input",{type:"text",value:W,onChange:Q=>R(Q.target.value),className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Bo hnh n"}),i.jsx("input",{type:"date",value:z,onChange:Q=>U(Q.target.value),className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white"})]}),i.jsxs("div",{className:"col-span-2",children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Ghi ch"}),i.jsx("textarea",{value:Z,onChange:Q=>q(Q.target.value),rows:3,className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white"})]})]}),i.jsxs("div",{className:"flex gap-3 pt-4",children:[i.jsx("button",{type:"button",onClick:t,className:"flex-1 px-4 py-2.5 bg-slate-200 dark:bg-slate-700 hover:bg-slate-300 dark:hover:bg-slate-600 text-slate-900 dark:text-white rounded-lg font-medium transition-colors",children:"Hy"}),i.jsx("button",{type:"submit",className:"flex-1 px-4 py-2.5 bg-green-600 hover:bg-green-700 text-white rounded-lg font-medium transition-colors",children:e?"Cp nht":"Thm ti sn"})]})]})]})})};async function Vje(){try{const{data:e,error:t}=await Pt.from("capital").select("*").order("date",{ascending:!1});if(t)return At({code:"supabase",message:"Khng th ti danh sch ngun vn",cause:t});const r=(e||[]).map(n=>({id:n.id,type:n.type,sourceName:n.source_name,amount:parseFloat(n.amount),date:n.date,notes:n.notes,interestRate:n.interest_rate?parseFloat(n.interest_rate):void 0,interestType:n.interest_type,paymentFrequency:n.payment_frequency,maturityDate:n.maturity_date,branchId:n.branch_id,created_at:n.created_at}));return kn(r)}catch(e){return At({code:"network",message:"Li kt ni khi ti ngun vn",cause:e})}}async function Wje(e){try{const{data:t,error:r}=await Pt.from("capital").insert({type:e.type,source_name:e.sourceName,amount:e.amount,date:e.date,notes:e.notes,interest_rate:e.interestRate,interest_type:e.interestType,payment_frequency:e.paymentFrequency,maturity_date:e.maturityDate,branch_id:e.branchId}).select().single();return r||!t?At({code:"supabase",message:"Khng th thm ngun vn",cause:r}):kn({id:t.id,type:t.type,sourceName:t.source_name,amount:parseFloat(t.amount),date:t.date,notes:t.notes,interestRate:t.interest_rate?parseFloat(t.interest_rate):void 0,interestType:t.interest_type,paymentFrequency:t.payment_frequency,maturityDate:t.maturity_date,branchId:t.branch_id,created_at:t.created_at})}catch(t){return At({code:"network",message:"Li kt ni khi thm ngun vn",cause:t})}}async function Kje(e,t){try{const r={};t.type!==void 0&&(r.type=t.type),t.sourceName!==void 0&&(r.source_name=t.sourceName),t.amount!==void 0&&(r.amount=t.amount),t.date!==void 0&&(r.date=t.date),t.notes!==void 0&&(r.notes=t.notes),t.interestRate!==void 0&&(r.interest_rate=t.interestRate),t.interestType!==void 0&&(r.interest_type=t.interestType),t.paymentFrequency!==void 0&&(r.payment_frequency=t.paymentFrequency),t.maturityDate!==void 0&&(r.maturity_date=t.maturityDate);const{data:n,error:a}=await Pt.from("capital").update(r).eq("id",e).select().single();return a||!n?At({code:"supabase",message:"Khng th cp nht ngun vn",cause:a}):kn({id:n.id,type:n.type,sourceName:n.source_name,amount:parseFloat(n.amount),date:n.date,notes:n.notes,interestRate:n.interest_rate?parseFloat(n.interest_rate):void 0,interestType:n.interest_type,paymentFrequency:n.payment_frequency,maturityDate:n.maturity_date,branchId:n.branch_id,created_at:n.created_at})}catch(r){return At({code:"network",message:"Li kt ni khi cp nht ngun vn",cause:r})}}async function Gje(e){try{const{error:t}=await Pt.from("capital").delete().eq("id",e);return t?At({code:"supabase",message:"Khng th xa ngun vn",cause:t}):kn(void 0)}catch(t){return At({code:"network",message:"Li kt ni khi xa ngun vn",cause:t})}}function Xje(){const{currentBranchId:e}=Ua();return Os({queryKey:["capitals",e],queryFn:async()=>{const t=await Vje();if(!t.ok)throw new Error(t.error.message);return t.data.filter(r=>r.branchId===e)},staleTime:3e4})}function Yje(){const e=qn(),{currentBranchId:t}=Ua();return ha({mutationFn:async r=>{const n=await Wje(r);if(!n.ok)throw new Error(n.error.message);return n.data},onSuccess:()=>{e.invalidateQueries({queryKey:["capitals",t]})}})}function Zje(){const e=qn(),{currentBranchId:t}=Ua();return ha({mutationFn:async({id:r,updates:n})=>{const a=await Kje(r,n);if(!a.ok)throw new Error(a.error.message);return a.data},onSuccess:()=>{e.invalidateQueries({queryKey:["capitals",t]})}})}function Qje(){const e=qn(),{currentBranchId:t}=Ua();return ha({mutationFn:async r=>{const n=await Gje(r);if(!n.ok)throw new Error(n.error.message)},onSuccess:()=>{e.invalidateQueries({queryKey:["capitals",t]})}})}const Jje=()=>{const{currentBranchId:e}=Ua(),{data:t=[],isLoading:r}=Xje(),n=Yje(),a=Zje(),s=Qje(),[l,o]=T.useState(!1),[c,d]=T.useState(!1),[f,p]=T.useState(null),[y,g]=T.useState("all"),N=T.useMemo(()=>{const E=t.reduce((R,z)=>R+z.amount,0),D=t.filter(R=>R.type==="owner").reduce((R,z)=>R+z.amount,0),H=t.filter(R=>R.type==="investor").reduce((R,z)=>R+z.amount,0),W=t.filter(R=>R.type==="loan").reduce((R,z)=>R+z.amount,0);return{totalCapital:E,ownerCapital:D,investorCapital:H,loanCapital:W}},[t]),w=T.useMemo(()=>y==="all"?t:t.filter(E=>E.type===y),[t,y]),k=async E=>{try{await n.mutateAsync({...E,branchId:e}),Ye.success(" thm ngun vn"),o(!1)}catch(D){Ye.error(D.message||"Khng th thm ngun vn")}},S=async E=>{if(f)try{await a.mutateAsync({id:f.id,updates:E}),Ye.success(" cp nht ngun vn"),d(!1),p(null)}catch(D){Ye.error(D.message||"Khng th cp nht ngun vn")}},O=async E=>{if(window.confirm("Bn c chc mun xa ngun vn ny?"))try{await s.mutateAsync(E),Ye.success(" xa ngun vn")}catch(D){Ye.error(D.message||"Khng th xa ngun vn")}};return r?i.jsx("div",{className:"h-full flex items-center justify-center",children:i.jsx("div",{className:"text-slate-500 dark:text-slate-400",children:"ang ti..."})}):i.jsxs("div",{className:"h-full flex flex-col bg-slate-50 dark:bg-slate-900",children:[i.jsx("div",{className:"bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 px-6 py-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Vn u t"}),i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:"Qun l vn ch s hu, vn u t v vn vay"})]}),i.jsxs("button",{onClick:()=>o(!0),className:"flex items-center gap-2 px-4 py-2.5 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-medium transition-colors",children:[i.jsx(Cc,{className:"w-5 h-5"}),i.jsx("span",{children:"Thm ngun vn"})]})]})}),i.jsxs("div",{className:"p-4 md:p-6",children:[i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[i.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20 rounded-lg border-2 border-purple-200 dark:border-purple-700 p-4",children:[i.jsx("div",{className:"text-xs text-purple-700 dark:text-purple-300 mb-1 font-medium",children:"Tng vn"}),i.jsx("div",{className:"text-xl font-bold text-purple-900 dark:text-purple-100",children:Ie(N.totalCapital)})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-4",children:[i.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"Vn ch"}),i.jsx("div",{className:"text-xl font-bold text-blue-600 dark:text-blue-400",children:Ie(N.ownerCapital)})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-4",children:[i.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"Vn u t"}),i.jsx("div",{className:"text-xl font-bold text-green-600 dark:text-green-400",children:Ie(N.investorCapital)})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-4",children:[i.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"Vn vay"}),i.jsx("div",{className:"text-xl font-bold text-orange-600 dark:text-orange-400",children:Ie(N.loanCapital)})]})]}),i.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-4 mb-4",children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Loi ngun vn:"}),i.jsx("div",{className:"flex gap-2",children:[{value:"all",label:"Tt c"},{value:"owner",label:"Vn ch"},{value:"investor",label:"u t"},{value:"loan",label:"Vn vay"}].map(E=>i.jsx("button",{onClick:()=>g(E.value),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${y===E.value?"bg-purple-600 text-white":"bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-600"}`,children:E.label},E.value))})]})}),w.length===0?i.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-8 text-center text-slate-500 dark:text-slate-400",children:t.length===0?"Cha c ngun vn no":"Khng tm thy ngun vn ph hp"}):i.jsx("div",{className:"grid gap-4",children:w.map(E=>i.jsx(eCe,{capital:E,onEdit:()=>{p(E),d(!0)},onDelete:()=>O(E.id)},E.id))})]}),l&&i.jsx(XD,{onClose:()=>o(!1),onSave:k,branchId:e}),c&&f&&i.jsx(XD,{capital:f,onClose:()=>{d(!1),p(null)},onSave:S,branchId:e})]})},eCe=({capital:e,onEdit:t,onDelete:r})=>{const a=(s=>{const l={owner:{label:"Vn ch s hu",color:"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400",icon:""},investor:{label:"Vn u t",color:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400",icon:""},loan:{label:"Vn vay",color:"bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-400",icon:""}};return l[s]||l.owner})(e.type);return i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-6",children:[i.jsxs("div",{className:"flex items-start justify-between mb-4",children:[i.jsx("div",{className:"flex-1",children:i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx("span",{className:"text-2xl",children:a.icon}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:e.sourceName}),i.jsx("span",{className:`inline-block px-2 py-1 rounded-full text-xs font-medium ${a.color} mt-1`,children:a.label})]})]})}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:t,className:"px-3 py-1.5 bg-amber-500 hover:bg-amber-600 text-white rounded-lg text-sm font-medium transition-colors",children:" Sa"}),i.jsx("button",{onClick:r,className:"px-3 py-1.5 bg-red-500 hover:bg-red-600 text-white rounded-lg text-sm font-medium transition-colors",children:" Xa"})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-3",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"S tin"}),i.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:Ie(e.amount)})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"Ngy nhn"}),i.jsx("div",{className:"text-sm font-semibold text-slate-900 dark:text-white",children:Bn(new Date(e.date))})]})]}),(e.type==="investor"||e.type==="loan")&&e.interestRate&&i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-3 p-3 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"Li sut"}),i.jsxs("div",{className:"text-sm font-bold text-orange-600 dark:text-orange-400",children:[e.interestRate,"%/nm"]})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"Loi li"}),i.jsx("div",{className:"text-sm font-semibold text-slate-900 dark:text-white",children:e.interestType==="simple"?"Li n":"Li kp"})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"K tr li"}),i.jsx("div",{className:"text-sm font-semibold text-slate-900 dark:text-white",children:e.paymentFrequency==="monthly"?"Hng thng":e.paymentFrequency==="quarterly"?"Hng qu":"Hng nm"})]}),e.maturityDate&&i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"n hn"}),i.jsx("div",{className:"text-sm font-semibold text-slate-900 dark:text-white",children:Bn(new Date(e.maturityDate))})]})]}),e.notes&&i.jsxs("div",{className:"mt-3 pt-3 border-t border-slate-200 dark:border-slate-700",children:[i.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"Ghi ch"}),i.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300",children:e.notes})]})]})},XD=({capital:e,onClose:t,onSave:r,branchId:n})=>{var R,z;const[a,s]=T.useState((e==null?void 0:e.type)||"owner"),[l,o]=T.useState((e==null?void 0:e.sourceName)||""),[c,d]=T.useState((e==null?void 0:e.amount.toString())||"0"),[f,p]=T.useState((e==null?void 0:e.date.split("T")[0])||new Date().toISOString().split("T")[0]),[y,g]=T.useState((e==null?void 0:e.notes)||""),[N,w]=T.useState(((R=e==null?void 0:e.interestRate)==null?void 0:R.toString())||"0"),[k,S]=T.useState((e==null?void 0:e.interestType)||"simple"),[O,E]=T.useState((e==null?void 0:e.paymentFrequency)||"monthly"),[D,H]=T.useState(((z=e==null?void 0:e.maturityDate)==null?void 0:z.split("T")[0])||""),W=U=>{if(U.preventDefault(),!l.trim()){Ye.error("Vui lng nhp tn ngun vn");return}const Z={type:a,sourceName:l.trim(),amount:parseFloat(c),date:new Date(f).toISOString(),notes:y.trim(),branchId:n};(a==="investor"||a==="loan")&&(Z.interestRate=parseFloat(N),Z.interestType=k,Z.paymentFrequency=O,D&&(Z.maturityDate=new Date(D).toISOString())),r(Z)};return i.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl max-w-2xl w-full border border-slate-200 dark:border-slate-700",children:[i.jsx("div",{className:"px-6 py-4 border-b border-slate-200 dark:border-slate-700",children:i.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-white",children:e?"Chnh sa ngun vn":"Thm ngun vn"})}),i.jsxs("form",{onSubmit:W,className:"p-6 space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Loi ngun vn *"}),i.jsx("div",{className:"grid grid-cols-3 gap-3",children:[{value:"owner",label:" Vn ch",color:"blue"},{value:"investor",label:" u t",color:"green"},{value:"loan",label:" Vay",color:"orange"}].map(U=>i.jsx("button",{type:"button",onClick:()=>s(U.value),className:`px-4 py-3 rounded-lg border-2 font-medium transition-all ${a===U.value?`border-${U.color}-500 bg-${U.color}-50 dark:bg-${U.color}-900/20 text-${U.color}-700 dark:text-${U.color}-300`:"border-slate-300 dark:border-slate-600 hover:border-slate-400 dark:hover:border-slate-500"}`,children:U.label},U.value))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Tn ngun vn *"}),i.jsx("input",{type:"text",value:l,onChange:U=>o(U.target.value),placeholder:a==="owner"?"VD: Vn ch - Nguyn Vn A":a==="investor"?"VD: Nh u t ABC":"VD: Ngn hng Vietcombank",className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white",required:!0})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"S tin *"}),i.jsx("input",{type:"number",value:c,onChange:U=>d(U.target.value),className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white",required:!0,min:"0"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Ngy nhn *"}),i.jsx("input",{type:"date",value:f,onChange:U=>p(U.target.value),className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white",required:!0})]})]}),(a==="investor"||a==="loan")&&i.jsxs("div",{className:"p-4 bg-orange-50 dark:bg-orange-900/10 rounded-lg border-2 border-orange-200 dark:border-orange-800 space-y-4",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsx("span",{className:"text-lg",children:""}),i.jsx("h3",{className:"text-sm font-semibold text-slate-900 dark:text-white",children:"Thng tin li sut"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Li sut (%/nm)"}),i.jsx("input",{type:"number",step:"0.1",value:N,onChange:U=>w(U.target.value),className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white",min:"0"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Loi li"}),i.jsxs("select",{value:k,onChange:U=>S(U.target.value),className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white",children:[i.jsx("option",{value:"simple",children:"Li n"}),i.jsx("option",{value:"compound",children:"Li kp"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"K tr li"}),i.jsxs("select",{value:O,onChange:U=>E(U.target.value),className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white",children:[i.jsx("option",{value:"monthly",children:"Hng thng"}),i.jsx("option",{value:"quarterly",children:"Hng qu"}),i.jsx("option",{value:"yearly",children:"Hng nm"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Ngy n hn"}),i.jsx("input",{type:"date",value:D,onChange:U=>H(U.target.value),className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white"})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Ghi ch"}),i.jsx("textarea",{value:y,onChange:U=>g(U.target.value),rows:3,placeholder:"Thm ghi ch v ngun vn...",className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white"})]}),i.jsxs("div",{className:"flex gap-3 pt-4",children:[i.jsx("button",{type:"button",onClick:t,className:"flex-1 px-4 py-2.5 bg-slate-200 dark:bg-slate-700 hover:bg-slate-300 dark:hover:bg-slate-600 text-slate-900 dark:text-white rounded-lg font-medium transition-colors",children:"Hy"}),i.jsx("button",{type:"submit",className:"flex-1 px-4 py-2.5 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-medium transition-colors",children:e?"Cp nht":"Thm ngun vn"})]})]})]})})},YD={cashbook:{label:"S qu",Icon:hm,activeClass:"bg-gradient-to-r from-blue-600 to-indigo-500 text-white border-transparent shadow-lg shadow-blue-500/40",inactiveClass:"bg-white/90 dark:bg-slate-900/60 text-blue-700 dark:text-blue-200 border border-blue-200 dark:border-blue-700 hover:bg-blue-50/80 dark:hover:bg-blue-900/20",dotClass:"bg-blue-400"},loans:{label:"Khon vay",Icon:S6,activeClass:"bg-gradient-to-r from-cyan-500 to-teal-500 text-white border-transparent shadow-lg shadow-cyan-500/40",inactiveClass:"bg-white/90 dark:bg-slate-900/60 text-cyan-800 dark:text-cyan-200 border border-cyan-200 dark:border-cyan-800 hover:bg-cyan-50/80 dark:hover:bg-cyan-900/20",dotClass:"bg-cyan-400"},assets:{label:"TSC",Icon:JJ,activeClass:"bg-gradient-to-r from-emerald-500 to-lime-500 text-white border-transparent shadow-lg shadow-emerald-500/40",inactiveClass:"bg-white/90 dark:bg-slate-900/60 text-emerald-700 dark:text-emerald-200 border border-emerald-200 dark:border-emerald-800 hover:bg-emerald-50/80 dark:hover:bg-emerald-900/20",dotClass:"bg-emerald-400"},capital:{label:"Vn",Icon:aee,activeClass:"bg-gradient-to-r from-fuchsia-500 to-purple-500 text-white border-transparent shadow-lg shadow-fuchsia-500/40",inactiveClass:"bg-white/90 dark:bg-slate-900/60 text-fuchsia-700 dark:text-fuchsia-200 border border-fuchsia-200 dark:border-fuchsia-800 hover:bg-fuchsia-50/80 dark:hover:bg-fuchsia-900/20",dotClass:"bg-fuchsia-400"}},tCe=()=>{const[e,t]=T.useState("cashbook");return i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-slate-800 dark:to-slate-900 rounded-lg shadow-lg border border-primary-border p-4 md:p-6",children:i.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:"flex items-center gap-2 text-2xl font-bold text-primary-text mb-2",children:[i.jsx(kee,{className:"w-7 h-7 text-blue-600 dark:text-blue-400"}),"Qun l Ti chnh"]}),i.jsx("p",{className:"text-secondary-text",children:"Qun l s qu, khon vay v cc giao dch ti chnh"})]}),i.jsx("div",{className:"flex flex-col md:flex-row gap-3 w-full md:w-auto mt-4 md:mt-0",children:i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 w-full md:w-auto",children:Object.keys(YD).map(r=>{const n=YD[r],a=e===r,s=n.Icon;return i.jsxs("button",{type:"button","aria-pressed":a,onClick:()=>t(r),className:`px-4 md:px-6 py-2 md:py-3 rounded-xl font-medium transition-all flex items-center justify-center gap-2 border ${a?`${n.activeClass} scale-[1.03]`:n.inactiveClass}`,children:[i.jsx("span",{"aria-hidden":!0,className:`w-2.5 h-2.5 rounded-full ${a?"bg-white/90":n.dotClass}`}),i.jsx(s,{className:"w-4 h-4"}),i.jsx("span",{className:"whitespace-nowrap",children:n.label})]},r)})})})]})}),i.jsxs("div",{children:[e==="cashbook"&&i.jsx(HV,{}),e==="loans"&&i.jsx($V,{}),e==="assets"&&i.jsx(Hje,{}),e==="capital"&&i.jsx(Jje,{})]})]})},VV=()=>{const{employees:e,payrollRecords:t,upsertEmployee:r,upsertPayrollRecord:n,currentBranchId:a}=Ua(),{mutateAsync:s}=SF(),{mutateAsync:l}=qV(),[o,c]=T.useState(new Date().toISOString().slice(0,7)),[d,f]=T.useState("employees"),[p,y]=T.useState(!1),[g,N]=T.useState(!1),w=T.useMemo(()=>t.filter(S=>S.month===o),[t,o]),k=T.useMemo(()=>{const S=e.filter(W=>W.status==="active").length,O=w.reduce((W,R)=>W+R.baseSalary,0),E=w.reduce((W,R)=>W+R.netSalary,0),D=w.filter(W=>W.paymentStatus==="paid").length,H=w.filter(W=>W.paymentStatus==="pending").length;return{totalEmployees:S,totalBaseSalary:O,totalNetSalary:E,paidCount:D,pendingCount:H}},[e,w]);return i.jsxs("div",{className:"h-full flex flex-col bg-slate-50 dark:bg-slate-900",children:[i.jsx("div",{className:"bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700",children:i.jsxs("div",{className:"px-6 py-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Qun l lng"}),i.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:"Qun l nhn vin v tnh lng"})]}),i.jsxs("button",{onClick:()=>d==="employees"?y(!0):N(!0),className:"flex items-center gap-2 px-4 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors",children:[i.jsx(Cc,{className:"w-5 h-5"}),i.jsx("span",{children:d==="employees"?"Thm nhn vin":"Tnh lng thng"})]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("button",{onClick:()=>f("employees"),className:`px-4 py-2 rounded-t-lg font-medium text-sm transition-colors ${d==="employees"?"bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 border-b-2 border-blue-600":"text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-slate-200"}`,children:["Danh sch nhn vin (",e.filter(S=>S.status==="active").length,")"]}),i.jsx("button",{onClick:()=>f("payroll"),className:`px-4 py-2 rounded-t-lg font-medium text-sm transition-colors ${d==="payroll"?"bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 border-b-2 border-blue-600":"text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-slate-200"}`,children:"Bng lng"})]})]})}),i.jsx("div",{className:"flex-1 overflow-auto p-6",children:d==="employees"?i.jsx(rCe,{employees:e,onEdit:S=>console.log("Edit",S)}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("div",{className:"flex items-center justify-between mb-4",children:i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Chn thng"}),i.jsx("input",{type:"month",value:o,onChange:S=>c(S.target.value),className:"px-4 py-2 bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white"})]})}),i.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[i.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4 border border-blue-200 dark:border-blue-800",children:[i.jsx("div",{className:"text-blue-600 dark:text-blue-400 text-sm font-medium mb-2",children:"Tng lng c bn"}),i.jsx("div",{className:"text-blue-900 dark:text-blue-100 text-2xl font-bold",children:Ie(k.totalBaseSalary)})]}),i.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-4 border border-green-200 dark:border-green-800",children:[i.jsx("div",{className:"text-green-600 dark:text-green-400 text-sm font-medium mb-2",children:"Tng lng thc nhn"}),i.jsx("div",{className:"text-green-900 dark:text-green-100 text-2xl font-bold",children:Ie(k.totalNetSalary)})]}),i.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/20 rounded-lg p-4 border border-amber-200 dark:border-amber-800",children:[i.jsx("div",{className:"text-amber-600 dark:text-amber-400 text-sm font-medium mb-2",children:" tr lng"}),i.jsx("div",{className:"text-amber-900 dark:text-amber-100 text-2xl font-bold",children:k.paidCount}),i.jsx("div",{className:"text-amber-600 dark:text-amber-400 text-xs mt-1",children:"nhn vin"})]}),i.jsxs("div",{className:"bg-orange-50 dark:bg-orange-900/20 rounded-lg p-4 border border-orange-200 dark:border-orange-800",children:[i.jsx("div",{className:"text-orange-600 dark:text-orange-400 text-sm font-medium mb-2",children:"Cha tr"}),i.jsx("div",{className:"text-orange-900 dark:text-orange-100 text-2xl font-bold",children:k.pendingCount}),i.jsx("div",{className:"text-orange-600 dark:text-orange-400 text-xs mt-1",children:"nhn vin"})]})]})]}),i.jsx(nCe,{payroll:w,onMarkAsPaid:async(S,O)=>{const E=t.find(D=>D.id===S);E&&(n({...E,paymentStatus:"paid",paymentDate:new Date().toISOString(),paymentMethod:O}),await s({type:"expense",amount:E.netSalary,branchId:a,paymentSourceId:O,category:"salary",payrollRecordId:E.id,recipient:E.employeeName,notes:`Tr lng thng ${o} - ${E.employeeName}`,date:new Date().toISOString()}),await l({id:O,branchId:a,delta:-E.netSalary}))}})]})}),p&&i.jsx(aCe,{onClose:()=>y(!1),onSave:S=>{r(S),y(!1)}}),g&&i.jsx(sCe,{employees:e.filter(S=>S.status==="active"),month:o,onClose:()=>N(!1),onSave:S=>{S.forEach(O=>n(O)),N(!1)}})]})},rCe=({employees:e,onEdit:t})=>e.length===0?i.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-12 text-center",children:i.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Cha c nhn vin no"})}):i.jsx("div",{className:"grid gap-4",children:e.map(r=>i.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-4 hover:border-blue-300 dark:hover:border-blue-700 transition-colors",children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:r.name}),i.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${r.status==="active"?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":"bg-slate-100 text-slate-800 dark:bg-slate-700 dark:text-slate-400"}`,children:r.status==="active"?"ang lm":"Ngh vic"})]}),i.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[i.jsxs("div",{children:[i.jsxs("span",{className:"text-slate-500 dark:text-slate-400",children:["Chc v:"," "]}),i.jsx("span",{className:"text-slate-900 dark:text-white font-medium",children:r.position})]}),i.jsxs("div",{children:[i.jsxs("span",{className:"text-slate-500 dark:text-slate-400",children:["Lng:"," "]}),i.jsx("span",{className:"text-slate-900 dark:text-white font-medium",children:Ie(r.baseSalary)})]}),i.jsxs("div",{children:[i.jsxs("span",{className:"text-slate-500 dark:text-slate-400",children:["ST:"," "]}),i.jsx("span",{className:"text-slate-900 dark:text-white font-medium",children:r.phone||"--"})]})]})]}),i.jsx("button",{onClick:()=>t(r),className:"px-4 py-2 text-blue-600 hover:bg-blue-50 dark:text-blue-400 dark:hover:bg-blue-900/30 rounded-lg text-sm font-medium transition-colors",children:"Sa"})]})},r.id))}),nCe=({payroll:e,onMarkAsPaid:t})=>{const[r,n]=T.useState(!1),[a,s]=T.useState(null);return e.length===0?i.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-12 text-center",children:i.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Cha c bng lng cho thng ny"})}):i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 overflow-hidden",children:[i.jsxs("table",{className:"w-full text-sm",children:[i.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Nhn vin"}),i.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Lng CB"}),i.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Thng"}),i.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Pht"}),i.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"BHXH"}),i.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Thu"}),i.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Thc nhn"}),i.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Trng thi"}),i.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Thao tc"})]})}),i.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:e.map(l=>i.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[i.jsx("td",{className:"px-4 py-3 text-slate-900 dark:text-white font-medium",children:l.employeeName}),i.jsx("td",{className:"px-4 py-3 text-right text-slate-900 dark:text-white",children:Ie(l.baseSalary)}),i.jsxs("td",{className:"px-4 py-3 text-right text-green-600 dark:text-green-400",children:["+",Ie(l.bonus)]}),i.jsxs("td",{className:"px-4 py-3 text-right text-red-600 dark:text-red-400",children:["-",Ie(l.deduction)]}),i.jsx("td",{className:"px-4 py-3 text-right text-slate-600 dark:text-slate-400",children:Ie(l.socialInsurance)}),i.jsx("td",{className:"px-4 py-3 text-right text-slate-600 dark:text-slate-400",children:Ie(l.personalIncomeTax)}),i.jsx("td",{className:"px-4 py-3 text-right text-blue-600 dark:text-blue-400 font-bold",children:Ie(l.netSalary)}),i.jsx("td",{className:"px-4 py-3 text-center",children:i.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${l.paymentStatus==="paid"?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":"bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-400"}`,children:l.paymentStatus==="paid"?" tr":"Cha tr"})}),i.jsx("td",{className:"px-4 py-3 text-center",children:l.paymentStatus==="pending"&&t&&i.jsx("button",{onClick:()=>{s(l),n(!0)},className:"px-3 py-1.5 bg-green-600 hover:bg-green-700 text-white rounded-md text-xs font-medium transition-colors",children:" tr lng"})})]},l.id))})]}),r&&a&&i.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl max-w-md w-full border border-slate-200 dark:border-slate-700",children:[i.jsx("div",{className:"px-6 py-4 border-b border-slate-200 dark:border-slate-700",children:i.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:"Xc nhn tr lng"})}),i.jsxs("div",{className:"p-6 space-y-4",children:[i.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4 border border-blue-200 dark:border-blue-800",children:[i.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 mb-1",children:"Nhn vin"}),i.jsx("div",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:a.employeeName}),i.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400 mt-2",children:Ie(a.netSalary)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Hnh thc thanh ton"}),i.jsxs("div",{className:"flex gap-4",children:[i.jsxs("button",{onClick:()=>{t&&t(a.id,"cash"),n(!1),s(null)},className:"flex-1 px-4 py-3 bg-green-600 hover:bg-green-700 text-white rounded-lg font-medium transition-colors flex items-center justify-center gap-2",children:[i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"w-5 h-5",children:[i.jsx("rect",{x:"2",y:"6",width:"20",height:"12",rx:"2",ry:"2"}),i.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),"Tin mt"]}),i.jsxs("button",{onClick:()=>{t&&t(a.id,"bank"),n(!1),s(null)},className:"flex-1 px-4 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors flex items-center justify-center gap-2",children:[i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"w-5 h-5",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 21h18M3 10h18M7 6h10l2 4H5l2-4Zm2 4v11m6-11v11"})}),"Chuyn khon"]})]})]})]}),i.jsx("div",{className:"px-6 py-4 border-t border-slate-200 dark:border-slate-700",children:i.jsx("button",{onClick:()=>{n(!1),s(null)},className:"w-full px-4 py-2 bg-slate-200 dark:bg-slate-700 hover:bg-slate-300 dark:hover:bg-slate-600 text-slate-900 dark:text-white rounded-lg font-medium transition-colors",children:"Hy"})})]})})]})},aCe=({onClose:e,onSave:t})=>{const[r,n]=T.useState(""),[a,s]=T.useState(""),[l,o]=T.useState(""),[c,d]=T.useState("0"),[f,p]=T.useState(new Date().toISOString().split("T")[0]),y=g=>{g.preventDefault();const N={name:r,phone:a,position:l,baseSalary:parseFloat(c),startDate:new Date(f).toISOString(),status:"active"};t(N)};return i.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl max-w-lg w-full border border-slate-200 dark:border-slate-700",children:[i.jsx("div",{className:"px-6 py-4 border-b border-slate-200 dark:border-slate-700",children:i.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-white",children:"Thm nhn vin mi"})}),i.jsxs("form",{onSubmit:y,className:"p-6 space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"H v tn *"}),i.jsx("input",{type:"text",value:r,onChange:g=>n(g.target.value),className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"S in thoi"}),i.jsx("input",{type:"tel",value:a,onChange:g=>s(g.target.value),className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Chc v *"}),i.jsx("input",{type:"text",value:l,onChange:g=>o(g.target.value),placeholder:"V d: K thut vin, Nhn vin bn hng...",className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Lng c bn *"}),i.jsx("input",{type:"number",value:c,onChange:g=>d(g.target.value),className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Ngy vo lm *"}),i.jsx("input",{type:"date",value:f,onChange:g=>p(g.target.value),className:"w-full px-4 py-2.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white",required:!0})]}),i.jsxs("div",{className:"flex gap-3 pt-4",children:[i.jsx("button",{type:"button",onClick:e,className:"flex-1 px-4 py-2.5 bg-slate-200 dark:bg-slate-700 hover:bg-slate-300 dark:hover:bg-slate-600 text-slate-900 dark:text-white rounded-lg font-medium transition-colors",children:"Hy"}),i.jsx("button",{type:"submit",className:"flex-1 px-4 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors",children:"Thm nhn vin"})]})]})]})})},sCe=({employees:e,month:t,onClose:r,onSave:n})=>{const[a,s]=T.useState(e.map(N=>({employeeId:N.id,employeeName:N.name,baseSalary:N.baseSalary,bonus:0,deduction:0}))),l=(N,w)=>{s(k=>k.map(S=>S.employeeId===N?{...S,bonus:parseFloat(w)||0}:S))},o=(N,w)=>{s(k=>k.map(S=>S.employeeId===N?{...S,deduction:parseFloat(w)||0}:S))},c=(N,w,k)=>N+w-k,d=N=>{N.preventDefault();const w=a.map(k=>({id:`PAY-${t}-${k.employeeId}`,employeeId:k.employeeId,employeeName:k.employeeName,month:t,baseSalary:k.baseSalary,allowances:0,bonus:k.bonus,deduction:k.deduction,workDays:26,standardWorkDays:26,socialInsurance:0,healthInsurance:0,unemploymentInsurance:0,personalIncomeTax:0,netSalary:c(k.baseSalary,k.bonus,k.deduction),paymentStatus:"pending",paymentDate:void 0,notes:"",branchId:"main",created_at:new Date().toISOString()}));n(w)},f=a.reduce((N,w)=>N+w.baseSalary,0),p=a.reduce((N,w)=>N+w.bonus,0),y=a.reduce((N,w)=>N+w.deduction,0),g=a.reduce((N,w)=>N+c(w.baseSalary,w.bonus,w.deduction),0);return i.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl max-w-5xl w-full border border-slate-200 dark:border-slate-700 max-h-[90vh] flex flex-col",children:[i.jsxs("div",{className:"px-6 py-4 border-b border-slate-200 dark:border-slate-700",children:[i.jsxs("h2",{className:"text-xl font-semibold text-slate-900 dark:text-white",children:["Tnh lng thng ",t]}),i.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:[e.length," nhn vin"]})]}),i.jsxs("form",{onSubmit:d,className:"flex-1 flex flex-col",children:[i.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:i.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 overflow-hidden",children:i.jsxs("table",{className:"w-full text-sm",children:[i.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Nhn vin"}),i.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Lng CB"}),i.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Thng"}),i.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Pht"}),i.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Thc nhn"})]})}),i.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:a.map(N=>i.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[i.jsx("td",{className:"px-4 py-3 text-slate-900 dark:text-white font-medium",children:N.employeeName}),i.jsx("td",{className:"px-4 py-3 text-right text-slate-900 dark:text-white",children:Ie(N.baseSalary)}),i.jsx("td",{className:"px-4 py-3",children:i.jsx("input",{type:"number",value:N.bonus,onChange:w=>l(N.employeeId,w.target.value),className:"w-full px-2 py-1.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded text-right text-slate-900 dark:text-white",min:"0"})}),i.jsx("td",{className:"px-4 py-3",children:i.jsx("input",{type:"number",value:N.deduction,onChange:w=>o(N.employeeId,w.target.value),className:"w-full px-2 py-1.5 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded text-right text-slate-900 dark:text-white",min:"0"})}),i.jsx("td",{className:"px-4 py-3 text-right text-blue-600 dark:text-blue-400 font-bold",children:Ie(c(N.baseSalary,N.bonus,N.deduction))})]},N.employeeId))}),i.jsx("tfoot",{className:"bg-slate-50 dark:bg-slate-700 border-t-2 border-slate-300 dark:border-slate-600",children:i.jsxs("tr",{children:[i.jsx("td",{className:"px-4 py-3 text-slate-900 dark:text-white font-bold",children:"TNG CNG"}),i.jsx("td",{className:"px-4 py-3 text-right text-slate-900 dark:text-white font-bold",children:Ie(f)}),i.jsx("td",{className:"px-4 py-3 text-right text-green-600 dark:text-green-400 font-bold",children:Ie(p)}),i.jsx("td",{className:"px-4 py-3 text-right text-red-600 dark:text-red-400 font-bold",children:Ie(y)}),i.jsx("td",{className:"px-4 py-3 text-right text-blue-600 dark:text-blue-400 font-bold text-lg",children:Ie(g)})]})})]})})}),i.jsxs("div",{className:"px-6 py-4 border-t border-slate-200 dark:border-slate-700 flex gap-3",children:[i.jsx("button",{type:"button",onClick:r,className:"flex-1 px-4 py-2.5 bg-slate-200 dark:bg-slate-700 hover:bg-slate-300 dark:hover:bg-slate-600 text-slate-900 dark:text-white rounded-lg font-medium transition-colors",children:"Hy"}),i.jsx("button",{type:"submit",className:"flex-1 px-4 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors",children:"To bng lng"})]})]})]})})},iCe=(e,t,r)=>{const n=yn.book_new(),a=e.reduce((g,N)=>g+N.total,0),s=e.reduce((g,N)=>g+N.items.reduce((w,k)=>w+(k.costPrice||0)*k.quantity,0),0),l=a-s,o=a>0?l/a*100:0,c=[["BO CO DOANH THU"],[`T ${Bn(t)} n ${Bn(r)}`],[],["Ch tiu","Gi tr"],["Tng doanh thu",Ie(a)],["Tng chi ph",Ie(s)],["Li nhun",Ie(l)],["Bin li nhun",`${o.toFixed(2)}%`]],d=yn.aoa_to_sheet(c);yn.book_append_sheet(n,d,"Tng quan");const f=[["M n","Ngy","Khch hng","ST","Sn phm","S lng","n gi","Thnh tin","Gim gi","Tng","Phng thc"]];e.forEach(g=>{g.items.forEach((N,w)=>{f.push([w===0?F1(g.id):"",w===0?Bn(g.date):"",w===0?g.customer.name:"",w===0&&g.customer.phone||"",N.partName,N.quantity,N.sellingPrice,N.sellingPrice*N.quantity,w===0?g.discount:"",w===0?g.total:"",w===0?g.paymentMethod==="cash"?"Tin mt":"Ngn hng":""])})});const p=yn.aoa_to_sheet(f);yn.book_append_sheet(n,p,"Chi tit bn hng");const y=`BaoCaoDoanhThu_${t}_${r}.xlsx`;Gu(n,y)},lCe=(e,t,r)=>{const n=yn.book_new(),a=e.filter(w=>w.type==="income").reduce((w,k)=>w+k.amount,0),s=e.filter(w=>w.type==="expense").reduce((w,k)=>w+k.amount,0),l=a-s,o=[["BO CO THU CHI"],[`T ${Bn(t)} n ${Bn(r)}`],[],["Ch tiu","Gi tr"],["Tng thu",Ie(a)],["Tng chi",Ie(s)],["Thu chi rng",Ie(l)]],c=yn.aoa_to_sheet(o);yn.book_append_sheet(n,c,"Tng quan");const d=[["Ngy","Loi","Danh mc","S tin","i tng","Ngun thanh ton","Ghi ch"]];e.forEach(w=>{d.push([Bn(w.date),w.type==="income"?"Thu":"Chi",w.category||"",w.amount,w.recipient||"",w.paymentSourceId,w.notes])});const f=yn.aoa_to_sheet(d);yn.book_append_sheet(n,f,"Chi tit giao dch");const p={};e.forEach(w=>{const k=w.category||"Khc";p[k]||(p[k]={income:0,expense:0}),w.type==="income"?p[k].income+=w.amount:p[k].expense+=w.amount});const y=[["Danh mc","Thu","Chi","Chnh lch"]];Object.entries(p).forEach(([w,k])=>{y.push([w,k.income,k.expense,k.income-k.expense])});const g=yn.aoa_to_sheet(y);yn.book_append_sheet(n,g,"Theo danh mc");const N=`BaoCaoThuChi_${t}_${r}.xlsx`;Gu(n,N)},oCe=(e,t,r,n)=>{const a=yn.book_new(),s=e.reduce((g,N)=>{var w;return g+(N.stock[t]||0)*(((w=N.wholesalePrice)==null?void 0:w[t])||0)},0),l=e.filter(g=>(g.stock[t]||0)<10).length,o=[["BO CO TN KHO"],[`Ngy: ${Bn(n)}`],[],["Ch tiu","Gi tr"],["Tng gi tr tn kho",Ie(s)],["S loi sn phm",e.length],["Sn phm tn kho thp",l]],c=yn.aoa_to_sheet(o);yn.book_append_sheet(a,c,"Tng quan");const d=[["M SKU","Tn sn phm","Danh mc","Tn kho","Gi nhp","Gi bn","Gi tr tn","Trng thi"]];e.forEach(g=>{var E;const N=g.stock[t]||0,w=((E=g.wholesalePrice)==null?void 0:E[t])||0,k=g.retailPrice[t]||0,S=N*w,O=N<10?"Thp":N<50?"Trung bnh":"";d.push([g.sku,g.name,g.category||"",N,w,k,S,O])});const f=yn.aoa_to_sheet(d);yn.book_append_sheet(a,f,"Chi tit tn kho");const p=e.filter(g=>(g.stock[t]||0)<10);if(p.length>0){const g=[["M SKU","Tn sn phm","Tn kho","Ghi ch"]];p.forEach(w=>{g.push([w.sku,w.name,w.stock[t]||0,"Cn nhp thm hng"])});const N=yn.aoa_to_sheet(g);yn.book_append_sheet(a,N,"Cnh bo tn kho")}const y=`BaoCaoTonKho_${n}.xlsx`;Gu(a,y)},cCe=(e,t,r)=>{const n=yn.book_new(),a=e.reduce((k,S)=>k+S.baseSalary,0),s=e.reduce((k,S)=>k+S.netSalary,0),l=e.filter(k=>k.paymentStatus==="paid").length,o=e.filter(k=>k.paymentStatus==="pending").length,c=[["BO CO LNG"],[`T ${t} n ${r}`],[],["Ch tiu","Gi tr"],["Tng lng c bn",Ie(a)],["Tng lng thc nhn",Ie(s)],["S bng lng  tr",l],["S bng lng cha tr",o]],d=yn.aoa_to_sheet(c);yn.book_append_sheet(n,d,"Tng quan");const f=[["Nhn vin","Thng","Lng c bn","Ph cp","Thng","Khu tr","BHXH","BHYT","BHTN","Thu TNCN","Thc nhn","Trng thi","Ngy tr"]];e.forEach(k=>{f.push([k.employeeName,k.month,k.baseSalary,k.allowances,k.bonus,k.deduction,k.socialInsurance,k.healthInsurance,k.unemploymentInsurance,k.personalIncomeTax,k.netSalary,k.paymentStatus==="paid"?" tr":"Cha tr",k.paymentDate?Bn(k.paymentDate):""])});const p=yn.aoa_to_sheet(f);yn.book_append_sheet(n,p,"Chi tit lng");const y={};e.forEach(k=>{y[k.employeeName]||(y[k.employeeName]={totalBase:0,totalNet:0,months:0}),y[k.employeeName].totalBase+=k.baseSalary,y[k.employeeName].totalNet+=k.netSalary,y[k.employeeName].months+=1});const g=[["Nhn vin","S thng","Tng lng c bn","Tng thc nhn","TB/thng"]];Object.entries(y).forEach(([k,S])=>{g.push([k,S.months,S.totalBase,S.totalNet,Math.round(S.totalNet/S.months)])});const N=yn.aoa_to_sheet(g);yn.book_append_sheet(n,N,"Theo nhn vin");const w=`BaoCaoLuong_${t}_${r}.xlsx`;Gu(n,w)},dCe=(e,t,r,n,a)=>{const s=yn.book_new(),l=[["BO CO CNG N"],[`T ${Bn(n)} n ${Bn(a)}`],[],["Loi","S lng"],["Khch hng",e.length],["Nh cung cp",t.length]],o=yn.aoa_to_sheet(l);yn.book_append_sheet(s,o,"Tng quan");const c=[["Tn khch hng","ST","Xe","Bin s","Phn khc"]];e.forEach(g=>{c.push([g.name,g.phone||"",g.vehicleModel||"",g.licensePlate||"",g.segment||""])});const d=yn.aoa_to_sheet(c);yn.book_append_sheet(s,d,"Khch hng");const f=[["Tn nh cung cp","ST","Email","a ch"]];t.forEach(g=>{f.push([g.name,g.phone||"",g.email||"",g.address||""])});const p=yn.aoa_to_sheet(f);yn.book_append_sheet(s,p,"Nh cung cp");const y=`BaoCaoCongNo_${n}_${a}.xlsx`;Gu(s,y)},uCe=(e,t,r,n=20)=>{const a=yn.book_new(),s=new Map;e.forEach(g=>{g.items.forEach(N=>{const w=s.get(N.partId);w?(w.quantity+=N.quantity,w.revenue+=N.sellingPrice*N.quantity,w.orders+=1):s.set(N.partId,{name:N.partName,sku:N.sku||"",quantity:N.quantity,revenue:N.sellingPrice*N.quantity,orders:1})})});const l=Array.from(s.values()).sort((g,N)=>N.quantity-g.quantity).slice(0,n),o=[["TOP SN PHM BN CHY"],[`T ${Bn(t)} n ${Bn(r)}`],[],["STT","Tn sn phm","SKU","S lng bn","Doanh thu","S n","Trung bnh/n"]];l.forEach((g,N)=>{o.push([String(N+1),g.name,g.sku,String(g.quantity),Ie(g.revenue),String(g.orders),Ie(g.revenue/g.orders)])});const c=l.reduce((g,N)=>g+N.quantity,0),d=l.reduce((g,N)=>g+N.revenue,0),f=l.reduce((g,N)=>g+N.orders,0);o.push([]),o.push(["TNG","","",String(c),Ie(d),String(f),Ie(d/f)]);const p=yn.aoa_to_sheet(o);yn.book_append_sheet(a,p,"Top sn phm");const y=`TopSanPhamBanChay_${t}_${r}.xlsx`;Gu(a,y)},hCe=(e,t,r)=>{const n=yn.book_new(),a=new Map;e.forEach(N=>{N.items.forEach(w=>{const k=(w.costPrice||0)*w.quantity,S=w.sellingPrice*w.quantity,O=S-k,E=a.get(w.partId);E?(E.quantity+=w.quantity,E.revenue+=S,E.cost+=k,E.profit+=O,E.margin=E.revenue>0?E.profit/E.revenue*100:0):a.set(w.partId,{name:w.partName,sku:w.sku||"",quantity:w.quantity,revenue:S,cost:k,profit:O,margin:S>0?O/S*100:0})})});const s=Array.from(a.values()).sort((N,w)=>w.profit-N.profit),l=[["BO CO LI NHUN THEO SN PHM"],[`T ${Bn(t)} n ${Bn(r)}`],[],["STT","Tn sn phm","SKU","SL","Doanh thu","Gi vn","Li nhun","Bin LN (%)"]];s.forEach((N,w)=>{l.push([String(w+1),N.name,N.sku,String(N.quantity),Ie(N.revenue),Ie(N.cost),Ie(N.profit),N.margin.toFixed(2)+"%"])});const o=s.reduce((N,w)=>N+w.quantity,0),c=s.reduce((N,w)=>N+w.revenue,0),d=s.reduce((N,w)=>N+w.cost,0),f=s.reduce((N,w)=>N+w.profit,0),p=c>0?f/c*100:0;l.push([]),l.push(["TNG","","",String(o),Ie(c),Ie(d),Ie(f),p.toFixed(2)+"%"]);const y=yn.aoa_to_sheet(l);yn.book_append_sheet(n,y,"Li nhun sn phm");const g=`LoiNhuanTheoSanPham_${t}_${r}.xlsx`;Gu(n,g)},fCe=(e,t,r,n)=>{const a=yn.book_new(),s=e.length,l=e.reduce((w,k)=>{var S;return w+(((S=k.stock)==null?void 0:S[t])||0)},0),o=e.reduce((w,k)=>{var E,D;const S=((E=k.stock)==null?void 0:E[t])||0,O=typeof k.costPrice=="number"?k.costPrice:((D=k.retailPrice)==null?void 0:D[t])||0;return w+S*O},0),c=e.filter(w=>{var S;const k=((S=w.stock)==null?void 0:S[t])||0;return k>0&&k<=5}),d=e.filter(w=>{var k;return(((k=w.stock)==null?void 0:k[t])||0)===0}),f=[["BO CO TN KHO CHI TIT"],[`Ngy: ${Bn(new Date().toISOString())}`],[`Chi nhnh: ${t}`],[],["Ch tiu","Gi tr"],["Tng s mt hng",s],["Tng s lng tn",l],["Gi tr tn kho",Ie(o)],["Sn phm tn thp (5)",c.length],["Sn phm ht hng",d.length]],p=yn.aoa_to_sheet(f);yn.book_append_sheet(a,p,"Tng quan");const y=[["SKU","Tn sn phm","Danh mc","Tn kho","Gi vn","Gi bn","Gi tr tn","Trng thi"]];e.forEach(w=>{var H,W;const k=((H=w.stock)==null?void 0:H[t])||0,S=typeof w.costPrice=="number"?w.costPrice:0,O=((W=w.retailPrice)==null?void 0:W[t])||0,E=k*S;let D="Bnh thng";k===0?D="Ht hng":k<=5&&(D="Tn thp"),y.push([w.sku||"",w.name,w.category||"",String(k),Ie(S),Ie(O),Ie(E),D])});const g=yn.aoa_to_sheet(y);if(yn.book_append_sheet(a,g,"Tt c sn phm"),c.length>0){const w=[["SKU","Tn sn phm","Tn kho","Cn nhp"]];c.forEach(S=>{var D;const O=((D=S.stock)==null?void 0:D[t])||0,E=Math.max(10-O,0);w.push([S.sku||"",S.name,String(O),String(E)])});const k=yn.aoa_to_sheet(w);yn.book_append_sheet(a,k,"Tn thp")}if(d.length>0){const w=[["SKU","Tn sn phm","Gi bn"," xut"]];d.forEach(S=>{var E;const O=((E=S.retailPrice)==null?void 0:E[t])||0;w.push([S.sku||"",S.name,Ie(O),"Cn nhp ngay"])});const k=yn.aoa_to_sheet(w);yn.book_append_sheet(a,k,"Ht hng")}const N=`TonKhoChiTiet_${t}_${Bn(new Date().toISOString())}.xlsx`;Gu(a,N)},mCe=[{key:"revenue",label:"Doanh thu",icon:i.jsx(C0,{className:"w-4 h-4"}),activeClass:"bg-gradient-to-r from-blue-600 to-sky-500 text-white border-transparent shadow-lg shadow-blue-500/30",inactiveClass:"bg-white dark:bg-slate-900/60 text-blue-700 dark:text-blue-200 border-blue-200 dark:border-blue-700 hover:bg-blue-50/80 dark:hover:bg-blue-900/20",dotClass:"bg-blue-400"},{key:"cashflow",label:"Thu chi",icon:i.jsx(hm,{className:"w-4 h-4"}),activeClass:"bg-gradient-to-r from-emerald-500 to-lime-500 text-white border-transparent shadow-lg shadow-emerald-500/30",inactiveClass:"bg-white dark:bg-slate-900/60 text-emerald-700 dark:text-emerald-200 border-emerald-200 dark:border-emerald-800 hover:bg-emerald-50/70 dark:hover:bg-emerald-900/20",dotClass:"bg-emerald-400"},{key:"inventory",label:"Tn kho",icon:i.jsx(gl,{className:"w-4 h-4"}),activeClass:"bg-gradient-to-r from-amber-500 to-orange-500 text-white border-transparent shadow-lg shadow-orange-500/30",inactiveClass:"bg-white dark:bg-slate-900/60 text-amber-700 dark:text-amber-200 border-amber-200 dark:border-amber-800 hover:bg-amber-50/70 dark:hover:bg-amber-900/20",dotClass:"bg-amber-400"},{key:"payroll",label:"Lng",icon:i.jsx(jm,{className:"w-4 h-4"}),activeClass:"bg-gradient-to-r from-violet-500 to-fuchsia-500 text-white border-transparent shadow-lg shadow-violet-500/30",inactiveClass:"bg-white dark:bg-slate-900/60 text-violet-700 dark:text-violet-200 border-violet-200 dark:border-violet-800 hover:bg-violet-50/70 dark:hover:bg-violet-900/20",dotClass:"bg-violet-400"},{key:"debt",label:"Cng n",icon:i.jsx(C6,{className:"w-4 h-4"}),activeClass:"bg-gradient-to-r from-rose-500 to-red-500 text-white border-transparent shadow-lg shadow-rose-500/30",inactiveClass:"bg-white dark:bg-slate-900/60 text-rose-700 dark:text-rose-200 border-rose-200 dark:border-rose-800 hover:bg-rose-50/70 dark:hover:bg-rose-900/20",dotClass:"bg-rose-400"}],xCe=()=>{const{payrollRecords:e,customers:t,suppliers:r,currentBranchId:n,employees:a}=Ua(),{data:s=[],isLoading:l}=Mb(),{data:o=[],isLoading:c}=mf(),[d,f]=T.useState("revenue"),[p,y]=T.useState("month"),[g,N]=T.useState(""),[w,k]=T.useState(""),{start:S,end:O}=T.useMemo(()=>{const q=new Date;let K=new Date,Q=new Date;if(p==="custom"&&g&&w)return{start:new Date(g),end:new Date(w)};switch(p){case"today":K=new Date(q.setHours(0,0,0,0)),Q=new Date(q.setHours(23,59,59,999));break;case"week":K=new Date(q.setDate(q.getDate()-7));break;case"month":K=new Date(q.setMonth(q.getMonth()-1));break;case"quarter":K=new Date(q.setMonth(q.getMonth()-3));break;case"year":K=new Date(q.setFullYear(q.getFullYear()-1));break}return{start:K,end:Q}},[p,g,w]),E=T.useMemo(()=>{const q=s.filter(he=>{const Se=new Date(he.date);return Se>=S&&Se<=O}),K=q.reduce((he,Se)=>he+Se.total,0),Q=q.reduce((he,Se)=>{const ke=Se.items.reduce((Le,fe)=>Le+(fe.costPrice||0)*fe.quantity,0);return he+ke},0),re=K-Q,ae=new Map;q.forEach(he=>{const Se=new Date(he.date).toISOString().split("T")[0];ae.has(Se)||ae.set(Se,{date:Se,sales:[],totalRevenue:0,totalCost:0,totalProfit:0,orderCount:0});const ke=ae.get(Se),Le=he.items.reduce((fe,F)=>fe+(F.costPrice||0)*F.quantity,0);ke.sales.push(he),ke.totalRevenue+=he.total,ke.totalCost+=Le,ke.totalProfit+=he.total-Le,ke.orderCount+=1});const de=Array.from(ae.values()).sort((he,Se)=>new Date(he.date).getTime()-new Date(Se.date).getTime());return{sales:q,dailyReport:de,totalRevenue:K,totalCost:Q,totalProfit:re,profitMargin:K>0?(re/K*100).toFixed(1):0,orderCount:q.length}},[s,S,O]),{data:D=[],isLoading:H}=_F({branchId:n,startDate:S.toISOString(),endDate:O.toISOString()}),W=T.useMemo(()=>{const q=D.filter(ae=>{const de=new Date(ae.date);return de>=S&&de<=O}),K=q.filter(ae=>ae.type==="income").reduce((ae,de)=>ae+de.amount,0),Q=q.filter(ae=>ae.type==="expense").reduce((ae,de)=>ae+de.amount,0),re={};return q.forEach(ae=>{const de=ae.category||"other";re[de]||(re[de]={income:0,expense:0}),ae.type==="income"?re[de].income+=ae.amount:re[de].expense+=ae.amount}),{transactions:q,totalIncome:K,totalExpense:Q,netCashFlow:K-Q,byCategory:re}},[D,S,O]),R=T.useMemo(()=>{const q=o.map(re=>({...re,stock:re.stock[n]||0,price:re.retailPrice[n]||0,value:(re.stock[n]||0)*(re.retailPrice[n]||0)})),K=q.reduce((re,ae)=>re+ae.value,0),Q=q.filter(re=>re.stock<10);return{parts:q,totalValue:K,lowStockCount:Q.length,lowStockItems:Q}},[o,n]),z=T.useMemo(()=>{const q=e.filter(ae=>{const de=new Date(ae.month);return de>=S&&de<=O}),K=q.reduce((ae,de)=>ae+de.netSalary,0),Q=q.filter(ae=>ae.paymentStatus==="paid").reduce((ae,de)=>ae+de.netSalary,0),re=K-Q;return{records:q,totalSalary:K,paidSalary:Q,unpaidSalary:re,employeeCount:new Set(q.map(ae=>ae.employeeId)).size}},[e,S,O]),U=T.useMemo(()=>{const q=t.map(ae=>{const he=s.filter(Se=>(Se.customer.name===ae.name||Se.customer.phone===ae.phone)&&Se.paymentStatus!=="paid").reduce((Se,ke)=>Se+ke.total,0);return{name:ae.name,debt:he}}),K=r.map(ae=>({name:ae.name,debt:0})),Q=q.reduce((ae,de)=>ae+de.debt,0),re=K.reduce((ae,de)=>ae+de.debt,0);return{customerDebts:q.filter(ae=>ae.debt>0),supplierDebts:K.filter(ae=>ae.debt>0),totalCustomerDebt:Q,totalSupplierDebt:re,netDebt:Q-re}},[t,r]),Z=()=>{const q=S.toISOString().split("T")[0],K=O.toISOString().split("T")[0];try{switch(d){case"revenue":iCe(E.sales,q,K);break;case"cashflow":lCe(W.transactions,q,K);break;case"inventory":oCe(o,n,q,K);break;case"payroll":const Q=S.toISOString().slice(0,7),re=O.toISOString().slice(0,7);cCe(z.records,Q,re);break;case"debt":dCe(t,r,E.sales,q,K);break}Ye.success("Xut Excel thnh cng! File  c ti xung.")}catch(Q){console.error("Export error:",Q),Ye.error("C li khi xut Excel. Vui lng th li.")}};return i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"md:hidden space-y-3 mb-4",children:[i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-3 rounded-lg border border-slate-200 dark:border-slate-700 shadow-sm",children:[i.jsx("label",{className:"text-xs font-medium text-slate-500 dark:text-slate-400 mb-2 block uppercase tracking-wider",children:"Loi bo co"}),i.jsxs("div",{className:"relative",children:[i.jsxs("select",{value:d,onChange:q=>f(q.target.value),className:"w-full appearance-none p-3 pl-10 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white font-medium focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all",children:[i.jsx("option",{value:"revenue",children:"Doanh thu"}),i.jsx("option",{value:"cashflow",children:"Thu chi"}),i.jsx("option",{value:"inventory",children:"Tn kho"}),i.jsx("option",{value:"payroll",children:"Lng nhn vin"}),i.jsx("option",{value:"debt",children:"Cng n"})]}),i.jsxs("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-500 dark:text-slate-400 pointer-events-none",children:[d==="revenue"&&i.jsx(C0,{className:"w-5 h-5"}),d==="cashflow"&&i.jsx(hm,{className:"w-5 h-5"}),d==="inventory"&&i.jsx(gl,{className:"w-5 h-5"}),d==="payroll"&&i.jsx(jm,{className:"w-5 h-5"}),d==="debt"&&i.jsx(C6,{className:"w-5 h-5"})]}),i.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-500 dark:text-slate-400 pointer-events-none",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"m6 9 6 6 6-6"})})})]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 p-3 rounded-lg border border-slate-200 dark:border-slate-700 shadow-sm",children:[i.jsx("label",{className:"text-xs font-medium text-slate-500 dark:text-slate-400 mb-2 block uppercase tracking-wider",children:"Thi gian"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("div",{className:"relative flex-1",children:[i.jsxs("select",{value:p,onChange:q=>y(q.target.value),className:"w-full appearance-none p-3 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg text-slate-900 dark:text-white font-medium focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all",children:[i.jsx("option",{value:"today",children:"Hm nay"}),i.jsx("option",{value:"week",children:"7 ngy qua"}),i.jsx("option",{value:"month",children:"Thng ny"}),i.jsx("option",{value:"quarter",children:"Qu ny"}),i.jsx("option",{value:"year",children:"Nm nay"}),i.jsx("option",{value:"custom",children:"Ty chnh"})]}),i.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-500 dark:text-slate-400 pointer-events-none",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("path",{d:"m6 9 6 6 6-6"})})})]}),i.jsx("button",{onClick:Z,className:"px-4 bg-emerald-600 text-white rounded-lg shadow-sm hover:bg-emerald-700 active:scale-95 transition-all flex items-center justify-center","aria-label":"Xut Excel",children:i.jsx(e7,{className:"w-5 h-5"})})]}),p==="custom"&&i.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3 animate-in fade-in slide-in-from-top-2 duration-200",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-[10px] text-slate-500 dark:text-slate-400 mb-1 block",children:"T ngy"}),i.jsx("input",{type:"date",value:g,onChange:q=>N(q.target.value),className:"w-full p-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg text-sm text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-[10px] text-slate-500 dark:text-slate-400 mb-1 block",children:"n ngy"}),i.jsx("input",{type:"date",value:w,onChange:q=>k(q.target.value),className:"w-full p-2 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-lg text-sm text-slate-900 dark:text-white focus:ring-2 focus:ring-blue-500 outline-none"})]})]})]})]}),i.jsxs("div",{className:"hidden md:flex items-center gap-3 flex-wrap",children:[mCe.map(q=>{const K=d===q.key;return i.jsx("button",{type:"button","aria-pressed":K,onClick:()=>f(q.key),className:`px-6 py-2 rounded-xl font-medium whitespace-nowrap transition-all border ${K?q.activeClass:q.inactiveClass}`,children:i.jsxs("span",{className:"inline-flex items-center gap-2",children:[i.jsx("span",{"aria-hidden":!0,className:`w-2.5 h-2.5 rounded-full ${K?"bg-white/90":q.dotClass}`}),q.icon,q.label]})},q.key)}),i.jsx("div",{className:"h-8 w-px bg-slate-300 dark:bg-slate-600 mx-2"}),["today","week","month","quarter","year","custom"].map(q=>i.jsx("button",{onClick:()=>y(q),className:`px-4 py-2 rounded-lg font-medium text-sm transition-all ${p===q?"bg-blue-600 text-white shadow-md":"bg-slate-100 dark:bg-slate-700/50 text-slate-700 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:q==="today"?"Hm nay":q==="week"?"7 ngy":q==="month"?"Thng":q==="quarter"?"Qu":q==="year"?"Nm":"Ty chnh"},q)),p==="custom"&&i.jsxs(i.Fragment,{children:[i.jsx("input",{type:"date",value:g,onChange:q=>N(q.target.value),className:"px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white text-sm"}),i.jsx("span",{className:"text-slate-500 dark:text-slate-400",children:""}),i.jsx("input",{type:"date",value:w,onChange:q=>k(q.target.value),className:"px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white text-sm"})]}),i.jsxs("div",{className:"ml-auto flex gap-2",children:[i.jsxs("button",{onClick:Z,className:"px-5 py-2 bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-lg font-medium shadow-md hover:shadow-lg hover:from-green-700 hover:to-emerald-700 transition-all duration-200 flex items-center gap-2",children:[i.jsx(e7,{className:"w-4 h-4"})," Xut Excel"]}),d==="revenue"&&i.jsxs("div",{className:"relative group",children:[i.jsxs("button",{className:"px-4 py-2 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg font-medium shadow-md hover:shadow-lg hover:from-blue-700 hover:to-indigo-700 transition-all duration-200 flex items-center gap-2",children:[i.jsx(R1,{className:"w-4 h-4"})," Bo co nng cao"]}),i.jsxs("div",{className:"absolute right-0 top-full mt-2 w-64 bg-white dark:bg-slate-800 rounded-lg shadow-xl border border-slate-200 dark:border-slate-700 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50",children:[i.jsxs("button",{onClick:()=>{const q=S.toISOString().split("T")[0],K=O.toISOString().split("T")[0];uCe(E.sales,q,K,20),Ye.success("Xut Top sn phm thnh cng!")},className:"w-full px-4 py-3 text-left hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors flex items-center gap-3 text-sm text-slate-700 dark:text-slate-300 rounded-t-lg",children:[i.jsx(d7,{className:"w-4 h-4 text-blue-600"}),i.jsx("span",{children:"Top sn phm bn chy"})]}),i.jsxs("button",{onClick:()=>{const q=S.toISOString().split("T")[0],K=O.toISOString().split("T")[0];hCe(E.sales,q,K),Ye.success("Xut li nhun sn phm thnh cng!")},className:"w-full px-4 py-3 text-left hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors flex items-center gap-3 text-sm text-slate-700 dark:text-slate-300 rounded-b-lg",children:[i.jsx(XT,{className:"w-4 h-4 text-green-600"}),i.jsx("span",{children:"Li nhun theo sn phm"})]})]})]}),d==="inventory"&&i.jsxs("button",{onClick:()=>{S.toISOString().split("T")[0],O.toISOString().split("T")[0],fCe(o,n),Ye.success("Xut bo co tn kho chi tit thnh cng!")},className:"px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg font-medium shadow-md hover:shadow-lg hover:from-purple-700 hover:to-pink-700 transition-all duration-200 flex items-center gap-2",children:[i.jsx(gl,{className:"w-4 h-4"})," Tn kho chi tit"]})]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-6",children:[d==="revenue"&&i.jsxs("div",{className:"space-y-6",children:[l&&i.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:"ang ti doanh thu..."}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[i.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-lg p-6 border border-blue-200 dark:border-blue-800",children:[i.jsxs("div",{className:"flex items-center gap-1 text-sm font-medium text-blue-700 dark:text-blue-400 mb-2",children:[i.jsx(C0,{className:"w-4 h-4"})," Tng doanh thu"]}),i.jsx("div",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400",children:Ie(E.totalRevenue).replace("","")}),i.jsx("div",{className:"text-xs text-blue-600 dark:text-blue-400 mt-1",children:""})]}),i.jsxs("div",{className:"bg-gradient-to-br from-red-50 to-rose-50 dark:from-red-900/20 dark:to-rose-900/20 rounded-lg p-6 border border-red-200 dark:border-red-800",children:[i.jsxs("div",{className:"flex items-center gap-1 text-sm font-medium text-red-700 dark:text-red-400 mb-2",children:[i.jsx(hm,{className:"w-4 h-4"})," Tng chi ph"]}),i.jsx("div",{className:"text-3xl font-bold text-red-600 dark:text-red-400",children:Ie(E.totalCost).replace("","")}),i.jsx("div",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:""})]}),i.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 rounded-lg p-6 border border-green-200 dark:border-green-800",children:[i.jsxs("div",{className:"flex items-center gap-1 text-sm font-medium text-green-700 dark:text-green-400 mb-2",children:[i.jsx(R1,{className:"w-4 h-4"})," Li nhun"]}),i.jsx("div",{className:"text-3xl font-bold text-green-600 dark:text-green-400",children:Ie(E.totalProfit).replace("","")}),i.jsx("div",{className:"text-xs text-green-600 dark:text-green-400 mt-1",children:""})]}),i.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-fuchsia-50 dark:from-purple-900/20 dark:to-fuchsia-900/20 rounded-lg p-6 border border-purple-200 dark:border-purple-800",children:[i.jsxs("div",{className:"flex items-center gap-1 text-sm font-medium text-purple-700 dark:text-purple-400 mb-2",children:[i.jsx(XT,{className:"w-4 h-4"})," T sut li nhun"]}),i.jsx("div",{className:"text-3xl font-bold text-purple-600 dark:text-purple-400",children:E.profitMargin}),i.jsx("div",{className:"text-xs text-purple-600 dark:text-purple-400 mt-1",children:"%"})]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700",children:[i.jsx("div",{className:"px-6 py-4 border-b border-slate-200 dark:border-slate-700",children:i.jsxs("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:["Chi tit n hng theo ngy (",E.dailyReport.length," ngy)"]})}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-blue-600 text-white",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-center text-xs font-bold uppercase",children:"#"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold uppercase",children:"Ngy"}),i.jsxs("th",{className:"px-4 py-3 text-right text-xs font-bold uppercase",children:["Vn nhp kho",i.jsx("br",{}),"(1)"]}),i.jsxs("th",{className:"px-4 py-3 text-right text-xs font-bold uppercase",children:["Tin hng",i.jsx("br",{}),"(2)"]}),i.jsxs("th",{className:"px-4 py-3 text-right text-xs font-bold uppercase",children:["Vn sa cha",i.jsx("br",{}),"(3)"]}),i.jsxs("th",{className:"px-4 py-3 text-right text-xs font-bold uppercase",children:["Cng sa cha",i.jsx("br",{}),"(4)"]}),i.jsxs("th",{className:"px-4 py-3 text-right text-xs font-bold uppercase",children:["Doanh thu",i.jsx("br",{}),"(5 = 2 + 3 + 4)"]}),i.jsxs("th",{className:"px-4 py-3 text-right text-xs font-bold uppercase",children:["Li nhun",i.jsx("br",{}),"(6 = 2 - 1 - 4)"]}),i.jsxs("th",{className:"px-4 py-3 text-right text-xs font-bold uppercase",children:["Thu khc",i.jsx("br",{}),"(7)"]}),i.jsxs("th",{className:"px-4 py-3 text-right text-xs font-bold uppercase",children:["Chi khc",i.jsx("br",{}),"(8)"]}),i.jsxs("th",{className:"px-4 py-3 text-right text-xs font-bold uppercase bg-green-700",children:["Li nhun rng",i.jsx("br",{}),"(9 = (6 + 7) - 8)"]})]})}),i.jsxs("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:[E.dailyReport.map((q,K)=>{const re=q.totalRevenue,ae=0,de=0,he=re+ae+de,Se=re-0-de,ke=0,Le=0,fe=Se+ke-Le;return i.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/30",children:[i.jsx("td",{className:"px-4 py-3 text-center text-sm font-medium text-slate-900 dark:text-white",children:K+1}),i.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-slate-900 dark:text-white",children:new Date(q.date).toLocaleDateString("vi-VN")}),i.jsx("td",{className:"px-4 py-3 text-right text-sm text-slate-900 dark:text-white",children:Ie(0)}),i.jsx("td",{className:"px-4 py-3 text-right text-sm font-semibold text-blue-600 dark:text-blue-400",children:Ie(re)}),i.jsx("td",{className:"px-4 py-3 text-right text-sm text-slate-900 dark:text-white",children:Ie(ae)}),i.jsx("td",{className:"px-4 py-3 text-right text-sm text-slate-900 dark:text-white",children:Ie(de)}),i.jsx("td",{className:"px-4 py-3 text-right text-sm font-bold text-blue-600 dark:text-blue-400",children:Ie(he)}),i.jsx("td",{className:"px-4 py-3 text-right text-sm font-bold text-orange-600 dark:text-orange-400",children:Ie(Se)}),i.jsx("td",{className:"px-4 py-3 text-right text-sm text-slate-900 dark:text-white",children:Ie(ke)}),i.jsx("td",{className:"px-4 py-3 text-right text-sm text-red-600 dark:text-red-400",children:Ie(Le)}),i.jsx("td",{className:"px-4 py-3 text-right text-sm font-black text-green-700 dark:text-green-400 bg-green-50 dark:bg-green-900/20",children:Ie(fe)})]},q.date)}),E.dailyReport.length>0&&i.jsxs("tr",{className:"bg-blue-50 dark:bg-blue-900/20 font-bold border-t-2 border-blue-600",children:[i.jsx("td",{colSpan:2,className:"px-4 py-3 text-left text-sm font-black text-slate-900 dark:text-white",children:"Tng:"}),i.jsx("td",{className:"px-4 py-3 text-right text-sm text-slate-900 dark:text-white",children:Ie(0)}),i.jsx("td",{className:"px-4 py-3 text-right text-sm font-black text-blue-600 dark:text-blue-400",children:Ie(E.totalRevenue)}),i.jsx("td",{className:"px-4 py-3 text-right text-sm text-slate-900 dark:text-white",children:Ie(0)}),i.jsx("td",{className:"px-4 py-3 text-right text-sm text-slate-900 dark:text-white",children:Ie(0)}),i.jsx("td",{className:"px-4 py-3 text-right text-sm font-black text-blue-600 dark:text-blue-400",children:Ie(E.totalRevenue)}),i.jsx("td",{className:"px-4 py-3 text-right text-sm font-black text-orange-600 dark:text-orange-400",children:Ie(E.totalProfit)}),i.jsx("td",{className:"px-4 py-3 text-right text-sm text-slate-900 dark:text-white",children:Ie(0)}),i.jsx("td",{className:"px-4 py-3 text-right text-sm text-red-600 dark:text-red-400",children:Ie(0)}),i.jsx("td",{className:"px-4 py-3 text-right text-sm font-black text-green-700 dark:text-green-400 bg-green-100 dark:bg-green-900/30",children:Ie(E.totalProfit)})]})]})]})})]}),!1]}),d==="cashflow"&&i.jsxs("div",{className:"space-y-6",children:[H&&i.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:"ang ti s qu..."}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 rounded-lg p-6 border border-green-200 dark:border-green-800",children:[i.jsx("div",{className:"text-sm font-medium text-green-700 dark:text-green-400 mb-2",children:i.jsxs("span",{className:"inline-flex items-center gap-1",children:[i.jsx(hm,{className:"w-4 h-4"})," Tng thu"]})}),i.jsx("div",{className:"text-3xl font-bold text-green-600 dark:text-green-400",children:Ie(W.totalIncome).replace("","")}),i.jsx("div",{className:"text-xs text-green-600 dark:text-green-400 mt-1",children:""})]}),i.jsxs("div",{className:"bg-gradient-to-br from-red-50 to-rose-50 dark:from-red-900/20 dark:to-rose-900/20 rounded-lg p-6 border border-red-200 dark:border-red-800",children:[i.jsxs("div",{className:"text-sm font-medium text-red-700 dark:text-red-400 mb-2 inline-flex items-center gap-1",children:[i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"w-4 h-4",children:[i.jsx("rect",{x:"2",y:"6",width:"20",height:"12",rx:"2",ry:"2"}),i.jsx("circle",{cx:"12",cy:"12",r:"2"}),i.jsx("path",{d:"M6 12h.01M18 12h.01"})]}),"Tng chi"]}),i.jsx("div",{className:"text-3xl font-bold text-red-600 dark:text-red-400",children:Ie(W.totalExpense).replace("","")}),i.jsx("div",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:""})]}),i.jsxs("div",{className:`bg-gradient-to-br rounded-lg p-6 border ${W.netCashFlow>=0?"from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 border-blue-200 dark:border-blue-800":"from-orange-50 to-amber-50 dark:from-orange-900/20 dark:to-amber-900/20 border-orange-200 dark:border-orange-800"}`,children:[i.jsx("div",{className:`text-sm font-medium mb-2 ${W.netCashFlow>=0?"text-blue-700 dark:text-blue-400":"text-orange-700 dark:text-orange-400"}`,children:i.jsxs("span",{className:"inline-flex items-center gap-1",children:[i.jsx(C0,{className:"w-4 h-4"})," Dng tin rng"]})}),i.jsx("div",{className:`text-3xl font-bold ${W.netCashFlow>=0?"text-blue-600 dark:text-blue-400":"text-orange-600 dark:text-orange-400"}`,children:Ie(W.netCashFlow).replace("","")}),i.jsx("div",{className:`text-xs mt-1 ${W.netCashFlow>=0?"text-blue-600 dark:text-blue-400":"text-orange-600 dark:text-orange-400"}`,children:""})]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:"Thu chi theo danh mc"}),i.jsx("div",{className:"space-y-3",children:Object.entries(W.byCategory).map(([q,K])=>i.jsxs("div",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-slate-50 to-slate-100 dark:from-slate-700 dark:to-slate-800 rounded-lg hover:shadow-md transition-shadow",children:[i.jsx("span",{className:"font-semibold text-slate-900 dark:text-white capitalize",children:q}),i.jsxs("div",{className:"flex gap-6",children:[i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"Thu"}),i.jsx("div",{className:"text-green-600 dark:text-green-400 font-bold",children:Ie(K.income)})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400 mb-1",children:"Chi"}),i.jsx("div",{className:"text-red-600 dark:text-red-400 font-bold",children:Ie(K.expense)})]})]})]},q))})]})]}),d==="inventory"&&i.jsxs("div",{className:"space-y-6",children:[c&&i.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:"ang ti tn kho..."}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-lg p-6 border border-blue-200 dark:border-blue-800",children:[i.jsx("div",{className:"text-sm font-medium text-blue-700 dark:text-blue-400 mb-2",children:i.jsxs("span",{className:"inline-flex items-center gap-1",children:[i.jsx(gl,{className:"w-4 h-4"})," Tng gi tr tn kho"]})}),i.jsx("div",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400",children:Ie(R.totalValue).replace("","")}),i.jsx("div",{className:"text-xs text-blue-600 dark:text-blue-400 mt-1",children:""})]}),i.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-fuchsia-50 dark:from-purple-900/20 dark:to-fuchsia-900/20 rounded-lg p-6 border border-purple-200 dark:border-purple-800",children:[i.jsx("div",{className:"text-sm font-medium text-purple-700 dark:text-purple-400 mb-2",children:i.jsxs("span",{className:"inline-flex items-center gap-1",children:[i.jsx(d7,{className:"w-4 h-4"})," Tng sn phm"]})}),i.jsx("div",{className:"text-3xl font-bold text-purple-600 dark:text-purple-400",children:R.parts.length}),i.jsx("div",{className:"text-xs text-purple-600 dark:text-purple-400 mt-1",children:"sn phm"})]}),i.jsxs("div",{className:"bg-gradient-to-br from-red-50 to-rose-50 dark:from-red-900/20 dark:to-rose-900/20 rounded-lg p-6 border border-red-200 dark:border-red-800",children:[i.jsx("div",{className:"text-sm font-medium text-red-700 dark:text-red-400 mb-2",children:i.jsxs("span",{className:"inline-flex items-center gap-1",children:[i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"w-4 h-4 text-amber-500",children:[i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v4m0 4h.01"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.29 3.86 1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0Z"})]}),"Sn phm sp ht"]})}),i.jsx("div",{className:"text-3xl font-bold text-red-600 dark:text-red-400",children:R.lowStockCount}),i.jsx("div",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:"sn phm"})]})]}),R.lowStockCount>0&&i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4",children:i.jsxs("span",{className:"inline-flex items-center gap-1",children:[i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"w-4 h-4 text-amber-500",children:[i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v4m0 4h.01"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.29 3.86 1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0Z"})]}),"Cnh bo hng sp ht"]})}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-slate-700 dark:text-slate-300",children:"Sn phm"}),i.jsx("th",{className:"px-4 py-2 text-right text-sm font-medium text-slate-700 dark:text-slate-300",children:"Tn kho"}),i.jsx("th",{className:"px-4 py-2 text-right text-sm font-medium text-slate-700 dark:text-slate-300",children:"n gi"}),i.jsx("th",{className:"px-4 py-2 text-right text-sm font-medium text-slate-700 dark:text-slate-300",children:"Gi tr"})]})}),i.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:R.lowStockItems.map(q=>i.jsxs("tr",{children:[i.jsx("td",{className:"px-4 py-2 text-sm text-slate-900 dark:text-white",children:q.name}),i.jsx("td",{className:"px-4 py-2 text-sm text-right text-red-600 dark:text-red-400 font-medium",children:q.stock}),i.jsx("td",{className:"px-4 py-2 text-sm text-right text-slate-900 dark:text-white",children:Ie(q.price)}),i.jsx("td",{className:"px-4 py-2 text-sm text-right font-medium text-slate-900 dark:text-white",children:Ie(q.value)})]},q.id))})]})})]})]}),d==="payroll"&&i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[i.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-lg p-6 border border-blue-200 dark:border-blue-800",children:[i.jsx("div",{className:"text-sm font-medium text-blue-700 dark:text-blue-400 mb-2",children:i.jsxs("span",{className:"inline-flex items-center gap-1",children:[i.jsx(C0,{className:"w-4 h-4"})," Tng lng"]})}),i.jsx("div",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400",children:Ie(z.totalSalary).replace("","")}),i.jsx("div",{className:"text-xs text-blue-600 dark:text-blue-400 mt-1",children:""})]}),i.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 rounded-lg p-6 border border-green-200 dark:border-green-800",children:[i.jsx("div",{className:"text-sm font-medium text-green-700 dark:text-green-400 mb-2",children:i.jsxs("span",{className:"inline-flex items-center gap-1",children:[i.jsx(by,{className:"w-4 h-4"}),"  thanh ton"]})}),i.jsx("div",{className:"text-3xl font-bold text-green-600 dark:text-green-400",children:Ie(z.paidSalary).replace("","")}),i.jsx("div",{className:"text-xs text-green-600 dark:text-green-400 mt-1",children:""})]}),i.jsxs("div",{className:"bg-gradient-to-br from-red-50 to-rose-50 dark:from-red-900/20 dark:to-rose-900/20 rounded-lg p-6 border border-red-200 dark:border-red-800",children:[i.jsx("div",{className:"text-sm font-medium text-red-700 dark:text-red-400 mb-2",children:" Cha thanh ton"}),i.jsx("div",{className:"text-3xl font-bold text-red-600 dark:text-red-400",children:Ie(z.unpaidSalary).replace("","")}),i.jsx("div",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:""})]}),i.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-fuchsia-50 dark:from-purple-900/20 dark:to-fuchsia-900/20 rounded-lg p-6 border border-purple-200 dark:border-purple-800",children:[i.jsx("div",{className:"text-sm font-medium text-purple-700 dark:text-purple-400 mb-2",children:i.jsxs("span",{className:"inline-flex items-center gap-1",children:[i.jsx(jm,{className:"w-4 h-4"})," S nhn vin"]})}),i.jsx("div",{className:"text-3xl font-bold text-purple-600 dark:text-purple-400",children:z.employeeCount}),i.jsx("div",{className:"text-xs text-purple-600 dark:text-purple-400 mt-1",children:"nhn vin"})]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700",children:[i.jsx("div",{className:"px-6 py-4 border-b border-slate-200 dark:border-slate-700",children:i.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:"Chi tit lng"})}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700/50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-slate-700 dark:text-slate-300",children:"Thng"}),i.jsx("th",{className:"px-4 py-2 text-left text-sm font-medium text-slate-700 dark:text-slate-300",children:"Nhn vin"}),i.jsx("th",{className:"px-4 py-2 text-right text-sm font-medium text-slate-700 dark:text-slate-300",children:"Lng thc nhn"}),i.jsx("th",{className:"px-4 py-2 text-center text-sm font-medium text-slate-700 dark:text-slate-300",children:"Trng thi"})]})}),i.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:z.records.map(q=>{const K=a.find(Q=>Q.id===q.employeeId);return i.jsxs("tr",{children:[i.jsx("td",{className:"px-4 py-2 text-sm text-slate-900 dark:text-white",children:q.month}),i.jsx("td",{className:"px-4 py-2 text-sm text-slate-900 dark:text-white",children:(K==null?void 0:K.name)||"N/A"}),i.jsx("td",{className:"px-4 py-2 text-sm text-right font-medium text-slate-900 dark:text-white",children:Ie(q.netSalary)}),i.jsx("td",{className:"px-4 py-2 text-center",children:i.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${q.paymentStatus==="paid"?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400"}`,children:q.paymentStatus==="paid"?" tr":"Cha tr"})})]},q.id)})})]})})]})]}),d==="debt"&&i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 rounded-lg p-6 border border-green-200 dark:border-green-800",children:[i.jsx("div",{className:"text-sm font-medium text-green-700 dark:text-green-400 mb-2",children:"N khch hng"}),i.jsx("div",{className:"text-3xl font-bold text-green-600 dark:text-green-400",children:U.customerDebts.length}),i.jsx("div",{className:"text-xs text-green-600 dark:text-green-400 mt-1",children:""})]}),i.jsxs("div",{className:"bg-gradient-to-br from-red-50 to-rose-50 dark:from-red-900/20 dark:to-rose-900/20 rounded-lg p-6 border border-red-200 dark:border-red-800",children:[i.jsx("div",{className:"text-sm font-medium text-red-700 dark:text-red-400 mb-2",children:"N nh cung cp"}),i.jsx("div",{className:"text-3xl font-bold text-red-600 dark:text-red-400",children:U.supplierDebts.length}),i.jsx("div",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:""})]}),i.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-lg p-6 border border-blue-200 dark:border-blue-800",children:[i.jsx("div",{className:"text-sm font-medium text-blue-700 dark:text-blue-400 mb-2",children:"Cng n rng"}),i.jsx("div",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400",children:"0"}),i.jsx("div",{className:"text-xs text-blue-600 dark:text-blue-400 mt-1",children:""})]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-800 dark:to-slate-900 rounded-lg p-6 border border-slate-200 dark:border-slate-700",children:[i.jsxs("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4 flex items-center gap-2",children:[i.jsx(tf,{className:"w-4 h-4 text-green-600 dark:text-green-400"}),"Cng n khch hng"]}),i.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:U.customerDebts.length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx("div",{className:"text-4xl mb-3",children:""}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Khng c cng n"})]}):U.customerDebts.map((q,K)=>i.jsxs("div",{className:"flex items-center justify-between p-3 bg-white dark:bg-slate-700 rounded-lg hover:shadow-md transition-shadow",children:[i.jsx("span",{className:"font-medium text-slate-900 dark:text-white",children:q.name}),i.jsx("span",{className:"text-green-600 dark:text-green-400 font-bold",children:Ie(q.debt)})]},K))})]}),i.jsxs("div",{className:"bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-800 dark:to-slate-900 rounded-lg p-6 border border-slate-200 dark:border-slate-700",children:[i.jsxs("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4 flex items-center gap-2",children:[i.jsx("span",{className:"text-red-600 dark:text-red-400",children:""}),"Cng n nh cung cp"]}),i.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:U.supplierDebts.length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx("div",{className:"text-4xl mb-3",children:""}),i.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Khng c cng n"})]}):U.supplierDebts.map((q,K)=>i.jsxs("div",{className:"flex items-center justify-between p-3 bg-white dark:bg-slate-700 rounded-lg hover:shadow-md transition-shadow",children:[i.jsx("span",{className:"font-medium text-slate-900 dark:text-white",children:q.name}),i.jsx("span",{className:"text-red-600 dark:text-red-400 font-bold",children:Ie(q.debt)})]},K))})]})]})]})]})]})},pCe=()=>{const{employees:e,setEmployees:t}=Ua(),{data:r,isLoading:n}=T6(),{mutateAsync:a}=nte(),{mutateAsync:s}=ate(),{mutateAsync:l}=ste(),o=r||e;T.useEffect(()=>{r&&t(r)},[r,t]);const[c,d]=T.useState("list"),[f,p]=T.useState(!1),[y,g]=T.useState(null),[N,w]=T.useState(""),[k,S]=T.useState({name:"",phone:"",email:"",position:"",department:"",baseSalary:0,allowances:0,status:"active",startDate:new Date().toISOString().split("T")[0]}),O=T.useMemo(()=>o.filter(z=>{var U;return z.name.toLowerCase().includes(N.toLowerCase())||((U=z.phone)==null?void 0:U.toLowerCase().includes(N.toLowerCase()))||z.position.toLowerCase().includes(N.toLowerCase())}),[o,N]),E=async z=>{if(z.preventDefault(),!k.name||!k.position||!k.baseSalary){Ye.error("Vui lng in y  thng tin bt buc!");return}try{y?await s({id:y.id,updates:k}):await a(k),D()}catch{}},D=()=>{S({name:"",phone:"",email:"",position:"",department:"",baseSalary:0,allowances:0,status:"active",startDate:new Date().toISOString().split("T")[0]}),g(null),p(!1)},H=z=>{g(z),S(z),p(!0)},W=async z=>{if(confirm(`Bn c chc mun xa nhn vin "${z.name}" khng?`))try{await l(z.id)}catch{}},R=T.useMemo(()=>{const z=o.filter(Z=>Z.status==="active").length,U=o.filter(Z=>Z.status==="active").reduce((Z,q)=>Z+q.baseSalary+(q.allowances||0),0);return{active:z,totalSalary:U,total:o.length}},[o]);return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[i.jsx(tf,{className:"w-8 h-8 text-blue-600 dark:text-blue-400"}),"Qun l nhn vin"]}),i.jsxs("button",{onClick:()=>p(!0),className:"px-6 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg font-medium shadow-md hover:shadow-xl hover:from-blue-700 hover:to-indigo-700 transition-all duration-200 flex items-center gap-2",children:[i.jsx(od,{className:"w-5 h-5"})," Thm nhn vin"]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg p-6 text-white shadow-lg",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("span",{className:"text-white/80 text-sm font-medium",children:"Tng nhn vin"}),i.jsx(tf,{className:"w-8 h-8"})]}),i.jsx("div",{className:"text-3xl font-bold",children:R.total}),i.jsxs("div",{className:"text-white/70 text-sm mt-1",children:[R.active," ang lm vic"]})]}),i.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-green-600 rounded-lg p-6 text-white shadow-lg",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("span",{className:"text-white/80 text-sm font-medium",children:"ang hot ng"}),i.jsx(Tee,{className:"w-8 h-8"})]}),i.jsx("div",{className:"text-3xl font-bold",children:R.active}),i.jsx("div",{className:"text-white/70 text-sm mt-1",children:"Nhn vin active"})]}),i.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-lg p-6 text-white shadow-lg",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("span",{className:"text-white/80 text-sm font-medium",children:"Tng lng thng"}),i.jsx(C0,{className:"w-8 h-8"})]}),i.jsx("div",{className:"text-2xl font-bold",children:Ie(R.totalSalary)}),i.jsx("div",{className:"text-white/70 text-sm mt-1",children:"c tnh"})]})]}),i.jsx("div",{className:"flex gap-2 border-b border-slate-200 dark:border-slate-700",children:[{key:"list",label:"Danh sch",icon:i.jsx(C6,{className:"w-4 h-4"})},{key:"attendance",label:"Chm cng",icon:i.jsx(vy,{className:"w-4 h-4"})},{key:"payroll",label:"Qun l lng",icon:i.jsx(C0,{className:"w-4 h-4"})},{key:"history",label:"Lch s",icon:i.jsx(S_,{className:"w-4 h-4"})}].map(z=>i.jsx("button",{onClick:()=>d(z.key),className:`px-6 py-3 font-medium transition-all ${c===z.key?"text-blue-600 dark:text-blue-400 border-b-2 border-blue-600 dark:border-blue-400":"text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-slate-200"}`,children:i.jsxs("span",{className:"inline-flex items-center gap-1",children:[z.icon,z.label]})},z.key))}),c==="list"&&i.jsx("div",{className:"flex gap-4",children:i.jsx("input",{type:"text",placeholder:"Tm kim nhn vin (tn, ST, chc v)...",value:N,onChange:z=>w(z.target.value),className:"flex-1 px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500"})}),c==="list"&&i.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 overflow-hidden",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-slate-50 dark:bg-slate-900/50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Nhn vin"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Chc v"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Phng ban"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Lng CB"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Ph cp"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Ngy vo"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Trng thi"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Thao tc"})]})}),i.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:O.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:8,className:"px-6 py-8 text-center text-slate-500 dark:text-slate-400",children:"Khng tm thy nhn vin no"})}):O.map(z=>i.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors",children:[i.jsx("td",{className:"px-6 py-4",children:i.jsxs("div",{children:[i.jsx("div",{className:"font-medium text-slate-900 dark:text-white",children:z.name}),z.phone&&i.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:i.jsxs("span",{className:"inline-flex items-center gap-1",children:[i.jsx(gF,{className:"w-3 h-3"})," ",z.phone]})}),z.email&&i.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:i.jsxs("span",{className:"inline-flex items-center gap-1",children:[i.jsx(bee,{className:"w-3 h-3"})," ",z.email]})})]})}),i.jsx("td",{className:"px-6 py-4 text-slate-700 dark:text-slate-300",children:z.position}),i.jsx("td",{className:"px-6 py-4 text-slate-700 dark:text-slate-300",children:z.department||"-"}),i.jsx("td",{className:"px-6 py-4 font-medium text-slate-900 dark:text-white",children:Ie(z.baseSalary)}),i.jsx("td",{className:"px-6 py-4 text-slate-700 dark:text-slate-300",children:Ie(z.allowances||0)}),i.jsx("td",{className:"px-6 py-4 text-slate-700 dark:text-slate-300",children:Bn(z.startDate)}),i.jsx("td",{className:"px-6 py-4",children:i.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${z.status==="active"?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":z.status==="inactive"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400":"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400"}`,children:z.status==="active"?"Hot ng":z.status==="inactive"?"Tm ngh":"Ngh vic"})}),i.jsxs("td",{className:"px-6 py-4 text-right space-x-2",children:[i.jsxs("button",{onClick:()=>H(z),className:"inline-flex items-center gap-1 text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 font-medium text-sm",children:[i.jsx(s7,{className:"w-4 h-4"})," Sa"]}),i.jsxs("button",{onClick:()=>W(z),className:"inline-flex items-center gap-1 text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-300 font-medium text-sm",children:[i.jsx(Xg,{className:"w-4 h-4"})," Xa"]})]})]},z.id))})]})})}),c==="attendance"&&i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-8 text-center",children:[i.jsx(vy,{className:"w-16 h-16 mb-4 text-slate-400"}),i.jsx("h3",{className:"text-xl font-semibold text-slate-900 dark:text-white mb-2",children:"Chc nng chm cng"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Tnh nng qun l chm cng ang c pht trin..."})]}),c==="payroll"&&i.jsx(VV,{}),c==="history"&&i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-8 text-center",children:[i.jsx(S_,{className:"w-16 h-16 mb-4 text-slate-400"}),i.jsx("h3",{className:"text-xl font-semibold text-slate-900 dark:text-white mb-2",children:"Lch s lm vic"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Tnh nng xem lch s lm vic ang c pht trin..."})]}),f&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[i.jsxs("div",{className:"sticky top-0 bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 px-6 py-4 flex items-center justify-between",children:[i.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white",children:y?i.jsxs("span",{className:"inline-flex items-center gap-2",children:[i.jsx(s7,{className:"w-5 h-5"})," Sa nhn vin"]}):i.jsxs("span",{className:"inline-flex items-center gap-2",children:[i.jsx(od,{className:"w-5 h-5"})," Thm nhn vin mi"]})}),i.jsx("button",{onClick:D,className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-300 text-2xl",children:""})]}),i.jsxs("form",{onSubmit:E,className:"p-6 space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:["H tn ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"text",value:k.name,onChange:z=>S({...k,name:z.target.value}),className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"S in thoi"}),i.jsx("input",{type:"tel",value:k.phone,onChange:z=>S({...k,phone:z.target.value}),className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Email"}),i.jsx("input",{type:"email",value:k.email,onChange:z=>S({...k,email:z.target.value}),className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white"})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:["Chc v ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"text",value:k.position,onChange:z=>S({...k,position:z.target.value}),className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Phng ban"}),i.jsx("input",{type:"text",value:k.department,onChange:z=>S({...k,department:z.target.value}),className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white"})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:["Lng c bn ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"number",value:k.baseSalary,onChange:z=>S({...k,baseSalary:Number(z.target.value)}),className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Ph cp"}),i.jsx("input",{type:"number",value:k.allowances,onChange:z=>S({...k,allowances:Number(z.target.value)}),className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white"})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:["Ngy vo lm ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"date",value:k.startDate,onChange:z=>S({...k,startDate:z.target.value}),className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Trng thi"}),i.jsxs("select",{value:k.status,onChange:z=>S({...k,status:z.target.value}),className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white",children:[i.jsx("option",{value:"active",children:"Hot ng"}),i.jsx("option",{value:"inactive",children:"Tm ngh"}),i.jsx("option",{value:"terminated",children:"Ngh vic"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"S ti khon"}),i.jsx("input",{type:"text",value:k.bankAccount,onChange:z=>S({...k,bankAccount:z.target.value}),className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Ngn hng"}),i.jsx("input",{type:"text",value:k.bankName,onChange:z=>S({...k,bankName:z.target.value}),className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"M s thu"}),i.jsx("input",{type:"text",value:k.taxCode,onChange:z=>S({...k,taxCode:z.target.value}),className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white"})]})]}),i.jsxs("div",{className:"flex gap-3 pt-4",children:[i.jsx("button",{type:"submit",className:"flex-1 px-6 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg font-medium shadow-md hover:shadow-xl hover:from-blue-700 hover:to-indigo-700 transition-all inline-flex items-center justify-center gap-2",children:y?i.jsxs(i.Fragment,{children:[i.jsx(C_,{className:"w-5 h-5"})," Lu thay i"]}):i.jsxs(i.Fragment,{children:[i.jsx(od,{className:"w-5 h-5"})," Thm nhn vin"]})}),i.jsxs("button",{type:"button",onClick:D,className:"px-6 py-3 bg-slate-200 dark:bg-slate-700 text-slate-700 dark:text-slate-300 rounded-lg font-medium hover:bg-slate-300 dark:hover:bg-slate-600 transition-colors inline-flex items-center gap-2",children:[i.jsx(_0,{className:"w-5 h-5"})," Hy"]})]})]})]})})]})},gCe=()=>{const{currentBranchId:e}=Ua(),{data:t=[],isLoading:r}=mf(),{data:n=[],isLoading:a}=wA(),s=r||a,l=T.useMemo(()=>{const N=new Map;return t.forEach(w=>{const k=w.category||"Khng phn loi",S=w.stock[e]||0,O=w.retailPrice[e]||0,E=S*O,D=N.get(k);D?(D.value+=E,D.count+=1,D.stock+=S):N.set(k,{value:E,count:1,stock:S})}),Array.from(N.entries()).map(([w,k])=>({name:w,value:Math.round(k.value),count:k.count,stock:k.stock})).sort((w,k)=>k.value-w.value)},[t,e]),o=T.useMemo(()=>t.filter(N=>{const w=N.stock[e]||0;return w>0&&w<=10}).sort((N,w)=>{const k=N.stock[e]||0,S=w.stock[e]||0;return k-S}).slice(0,10),[t,e]),c=T.useMemo(()=>t.filter(N=>(N.stock[e]||0)===0).length,[t,e]),d=T.useMemo(()=>t.map(N=>{const w=N.stock[e]||0,k=N.retailPrice[e]||0;return{...N,totalValue:w*k}}).filter(N=>N.totalValue>0).sort((N,w)=>w.totalValue-N.totalValue).slice(0,10),[t,e]),f=T.useMemo(()=>t.reduce((N,w)=>{const k=w.stock[e]||0,S=w.retailPrice[e]||0;return N+k*S},0),[t,e]),p=T.useMemo(()=>t.reduce((N,w)=>{const k=w.stock[e]||0;return N+k},0),[t,e]),y=T.useMemo(()=>{const N=new Date;N.setDate(N.getDate()-30);const w=new Map;return n.filter(k=>new Date(k.date)>=N).forEach(k=>{const S=k.date.slice(0,10),O=w.get(S)||{in:0,out:0};k.type==="Nhp kho"?O.in+=k.quantity:O.out+=k.quantity,w.set(S,O)}),Array.from(w.entries()).map(([k,S])=>({date:new Date(k).toLocaleDateString("vi-VN",{day:"2-digit",month:"2-digit"}),"Nhp kho":S.in,"Xut kho":S.out})).slice(-14)},[n]),g=["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6","#ec4899","#06b6d4","#f97316"];return s?i.jsx("div",{className:"flex items-center justify-center h-96",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[i.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 p-6 rounded-lg border border-blue-200 dark:border-blue-700",children:[i.jsx("div",{className:"text-sm font-medium text-blue-600 dark:text-blue-400 mb-2",children:"Tng gi tr tn kho"}),i.jsx("div",{className:"text-3xl font-bold text-blue-900 dark:text-blue-100",children:Ie(f)})]}),i.jsxs("div",{className:"bg-gradient-to-br from-emerald-50 to-emerald-100 dark:from-emerald-900/20 dark:to-emerald-800/20 p-6 rounded-lg border border-emerald-200 dark:border-emerald-700",children:[i.jsx("div",{className:"text-sm font-medium text-emerald-600 dark:text-emerald-400 mb-2",children:"Tng SL tn kho"}),i.jsx("div",{className:"text-3xl font-bold text-emerald-900 dark:text-emerald-100",children:p}),i.jsxs("div",{className:"text-xs text-emerald-700 dark:text-emerald-300 mt-1",children:[t.length," m sn phm"]})]}),i.jsxs("div",{className:"bg-gradient-to-br from-amber-50 to-amber-100 dark:from-amber-900/20 dark:to-amber-800/20 p-6 rounded-lg border border-amber-200 dark:border-amber-700",children:[i.jsx("div",{className:"text-sm font-medium text-amber-600 dark:text-amber-400 mb-2",children:"Sp ht hng"}),i.jsx("div",{className:"text-3xl font-bold text-amber-900 dark:text-amber-100",children:o.length})]}),i.jsxs("div",{className:"bg-gradient-to-br from-red-50 to-red-100 dark:from-red-900/20 dark:to-red-800/20 p-6 rounded-lg border border-red-200 dark:border-red-700",children:[i.jsx("div",{className:"text-sm font-medium text-red-600 dark:text-red-400 mb-2",children:"Ht hng"}),i.jsx("div",{className:"text-3xl font-bold text-red-900 dark:text-red-100",children:c})]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"bg-white dark:bg-[#1e293b] p-6 rounded-lg shadow-sm border border-slate-200 dark:border-slate-700",children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Gi tr theo danh mc"}),i.jsx(Kd,{width:"100%",height:300,children:i.jsxs(vH,{children:[i.jsx(yC,{data:l,cx:"50%",cy:"50%",labelLine:!1,label:N=>`${N.name}: ${(N.percent*100).toFixed(0)}%`,outerRadius:100,fill:"#8884d8",dataKey:"value",children:l.map((N,w)=>i.jsx(fp,{fill:g[w%g.length]},`cell-${w}`))}),i.jsx(Xd,{formatter:N=>Ie(N),contentStyle:{backgroundColor:"rgba(15, 23, 42, 0.95)",border:"none",borderRadius:"8px",color:"#fff"}})]})})]}),i.jsxs("div",{className:"bg-white dark:bg-[#1e293b] p-6 rounded-lg shadow-sm border border-slate-200 dark:border-slate-700",children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Nhp/Xut kho (14 ngy gn nht)"}),i.jsx(Kd,{width:"100%",height:300,children:i.jsxs(OC,{data:y,children:[i.jsx(Iu,{strokeDasharray:"3 3",stroke:"#334155"}),i.jsx(Du,{dataKey:"date",stroke:"#94a3b8"}),i.jsx(Yd,{stroke:"#94a3b8"}),i.jsx(Xd,{contentStyle:{backgroundColor:"rgba(15, 23, 42, 0.95)",border:"none",borderRadius:"8px",color:"#fff"}}),i.jsx(Im,{}),i.jsx(nf,{type:"monotone",dataKey:"Nhp kho",stroke:"#10b981",strokeWidth:2}),i.jsx(nf,{type:"monotone",dataKey:"Xut kho",stroke:"#ef4444",strokeWidth:2})]})})]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"bg-white dark:bg-[#1e293b] p-6 rounded-lg shadow-sm border border-slate-200 dark:border-slate-700",children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Top 10 sn phm gi tr cao"}),i.jsx("div",{className:"space-y-3",children:d.map((N,w)=>i.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 dark:bg-slate-800 rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center text-sm font-bold text-blue-600 dark:text-blue-400",children:w+1}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium text-slate-900 dark:text-slate-100",children:N.name}),i.jsxs("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:["Tn: ",N.stock[e]||0]})]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"font-semibold text-slate-900 dark:text-slate-100",children:Ie(N.totalValue)}),i.jsxs("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:[Ie(N.retailPrice[e]||0),"/sp"]})]})]},N.id))})]}),i.jsxs("div",{className:"bg-white dark:bg-[#1e293b] p-6 rounded-lg shadow-sm border border-slate-200 dark:border-slate-700",children:[i.jsxs("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-4 flex items-center gap-2",children:[i.jsx("span",{className:"inline-flex",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5 text-amber-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v4m0 4h.01M10.29 3.86 1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0Z"})})}),"Cnh bo tn kho thp"]}),i.jsxs("div",{className:"space-y-3",children:[o.map(N=>{const w=N.stock[e]||0,k=w<=3?"critical":w<=5?"warning":"low";return i.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg ${k==="critical"?"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800":k==="warning"?"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800":"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800"}`,children:[i.jsxs("div",{children:[i.jsx("div",{className:"font-medium text-slate-900 dark:text-slate-100",children:N.name}),i.jsxs("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:["SKU: ",N.sku]})]}),i.jsx("div",{className:"flex items-center gap-2",children:i.jsxs("div",{className:`px-3 py-1 rounded-full text-sm font-semibold ${k==="critical"?"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400":k==="warning"?"bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-400":"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400"}`,children:[w," cn li"]})})]},N.id)}),o.length===0&&i.jsxs("div",{className:"text-center py-8 text-slate-600 dark:text-slate-400 flex items-center justify-center gap-2",children:[i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-5 h-5 text-green-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})}),"Tt c sn phm u cn  hng"]})]})]})]})]})},bCe=()=>{const{currentBranchId:e}=Ua(),{data:t=[],isLoading:r}=Mb(),{data:n=[],isLoading:a}=mf(),[s,l]=T.useState("30days"),o=r||a,c=T.useMemo(()=>{if(s==="all")return t;const N=s==="7days"?7:s==="30days"?30:90,w=new Date;return w.setDate(w.getDate()-N),t.filter(k=>new Date(k.date)>=w)},[t,s]),d=T.useMemo(()=>{const N=c.reduce((O,E)=>O+E.total,0),w=c.length,k=c.reduce((O,E)=>O+E.items.reduce((D,H)=>D+H.quantity,0),0),S=w>0?N/w:0;return{totalRevenue:N,totalOrders:w,totalItems:k,avgOrderValue:S}},[c]),f=T.useMemo(()=>{const N=new Map;return c.forEach(w=>{const k=w.date.slice(0,10);N.set(k,(N.get(k)||0)+w.total)}),Array.from(N.entries()).map(([w,k])=>({date:new Date(w).toLocaleDateString("vi-VN",{day:"2-digit",month:"2-digit"}),revenue:Math.round(k)})).sort((w,k)=>w.date.localeCompare(k.date)).slice(-30)},[c]),p=T.useMemo(()=>{const N=new Map;return c.forEach(w=>{w.items.forEach(k=>{const S=N.get(k.partId),O=n.find(D=>D.id===k.partId),E=(O==null?void 0:O.name)||"Sn phm khng xc nh";S?(S.quantity+=k.quantity,S.revenue+=k.sellingPrice*k.quantity):N.set(k.partId,{quantity:k.quantity,revenue:k.sellingPrice*k.quantity,partName:E})})}),Array.from(N.entries()).map(([w,k])=>({id:w,name:k.partName,quantity:k.quantity,revenue:Math.round(k.revenue)})).sort((w,k)=>k.revenue-w.revenue).slice(0,10)},[c,n]),y=T.useMemo(()=>{const N=new Map;return c.forEach(w=>{N.set(w.paymentMethod,(N.get(w.paymentMethod)||0)+w.total)}),Array.from(N.entries()).map(([w,k])=>({method:w,revenue:Math.round(k)})).sort((w,k)=>k.revenue-w.revenue)},[c]),g=T.useMemo(()=>{const N=new Map;return c.forEach(w=>{const k=new Date(w.date).getHours();N.set(k,(N.get(k)||0)+1)}),Array.from({length:24},(w,k)=>({hour:`${k}h`,orders:N.get(k)||0}))},[c]);return o?i.jsx("div",{className:"flex items-center justify-center h-96",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"flex gap-2",children:[{value:"7days",label:"7 ngy"},{value:"30days",label:"30 ngy"},{value:"90days",label:"90 ngy"},{value:"all",label:"Tt c"}].map(N=>i.jsx("button",{onClick:()=>l(N.value),className:`px-4 py-2 rounded-lg font-medium transition-colors ${s===N.value?"bg-blue-600 text-white":"bg-slate-100 dark:bg-slate-800 text-slate-700 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:N.label},N.value))}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[i.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 p-6 rounded-lg border border-blue-200 dark:border-blue-700",children:[i.jsx("div",{className:"text-sm font-medium text-blue-600 dark:text-blue-400 mb-2",children:"Doanh thu"}),i.jsx("div",{className:"text-3xl font-bold text-blue-900 dark:text-blue-100",children:Ie(d.totalRevenue)})]}),i.jsxs("div",{className:"bg-gradient-to-br from-emerald-50 to-emerald-100 dark:from-emerald-900/20 dark:to-emerald-800/20 p-6 rounded-lg border border-emerald-200 dark:border-emerald-700",children:[i.jsx("div",{className:"text-sm font-medium text-emerald-600 dark:text-emerald-400 mb-2",children:"n hng"}),i.jsx("div",{className:"text-3xl font-bold text-emerald-900 dark:text-emerald-100",children:d.totalOrders})]}),i.jsxs("div",{className:"bg-gradient-to-br from-amber-50 to-amber-100 dark:from-amber-900/20 dark:to-amber-800/20 p-6 rounded-lg border border-amber-200 dark:border-amber-700",children:[i.jsx("div",{className:"text-sm font-medium text-amber-600 dark:text-amber-400 mb-2",children:"Sn phm bn"}),i.jsx("div",{className:"text-3xl font-bold text-amber-900 dark:text-amber-100",children:d.totalItems})]}),i.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20 p-6 rounded-lg border border-purple-200 dark:border-purple-700",children:[i.jsx("div",{className:"text-sm font-medium text-purple-600 dark:text-purple-400 mb-2",children:"Gi tr TB/n"}),i.jsx("div",{className:"text-3xl font-bold text-purple-900 dark:text-purple-100",children:Ie(d.avgOrderValue)})]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"bg-white dark:bg-[#1e293b] p-6 rounded-lg shadow-sm border border-slate-200 dark:border-slate-700",children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Xu hng doanh thu"}),i.jsx(Kd,{width:"100%",height:300,children:i.jsxs(Dge,{data:f,children:[i.jsx("defs",{children:i.jsxs("linearGradient",{id:"colorRevenue",x1:"0",y1:"0",x2:"0",y2:"1",children:[i.jsx("stop",{offset:"5%",stopColor:"#3b82f6",stopOpacity:.8}),i.jsx("stop",{offset:"95%",stopColor:"#3b82f6",stopOpacity:0})]})}),i.jsx(Iu,{strokeDasharray:"3 3",stroke:"#334155"}),i.jsx(Du,{dataKey:"date",stroke:"#94a3b8"}),i.jsx(Yd,{stroke:"#94a3b8"}),i.jsx(Xd,{formatter:N=>Ie(N),contentStyle:{backgroundColor:"rgba(15, 23, 42, 0.95)",border:"none",borderRadius:"8px",color:"#fff"}}),i.jsx(aH,{type:"monotone",dataKey:"revenue",stroke:"#3b82f6",fillOpacity:1,fill:"url(#colorRevenue)"})]})})]}),i.jsxs("div",{className:"bg-white dark:bg-[#1e293b] p-6 rounded-lg shadow-sm border border-slate-200 dark:border-slate-700",children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Phng thc thanh ton"}),i.jsx(Kd,{width:"100%",height:300,children:i.jsxs(ny,{data:y,children:[i.jsx(Iu,{strokeDasharray:"3 3",stroke:"#334155"}),i.jsx(Du,{dataKey:"method",stroke:"#94a3b8"}),i.jsx(Yd,{stroke:"#94a3b8"}),i.jsx(Xd,{formatter:N=>Ie(N),contentStyle:{backgroundColor:"rgba(15, 23, 42, 0.95)",border:"none",borderRadius:"8px",color:"#fff"}}),i.jsx(Yh,{dataKey:"revenue",fill:"#10b981",radius:[8,8,0,0]})]})})]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"bg-white dark:bg-[#1e293b] p-6 rounded-lg shadow-sm border border-slate-200 dark:border-slate-700",children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Phn b theo gi"}),i.jsx(Kd,{width:"100%",height:300,children:i.jsxs(OC,{data:g,children:[i.jsx(Iu,{strokeDasharray:"3 3",stroke:"#334155"}),i.jsx(Du,{dataKey:"hour",stroke:"#94a3b8"}),i.jsx(Yd,{stroke:"#94a3b8"}),i.jsx(Xd,{contentStyle:{backgroundColor:"rgba(15, 23, 42, 0.95)",border:"none",borderRadius:"8px",color:"#fff"}}),i.jsx(nf,{type:"monotone",dataKey:"orders",stroke:"#f59e0b",strokeWidth:2})]})})]}),i.jsxs("div",{className:"bg-white dark:bg-[#1e293b] p-6 rounded-lg shadow-sm border border-slate-200 dark:border-slate-700",children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Top 10 sn phm bn chy"}),i.jsxs("div",{className:"space-y-3",children:[p.map((N,w)=>i.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 dark:bg-slate-800 rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-8 h-8 rounded-full bg-emerald-100 dark:bg-emerald-900/30 flex items-center justify-center text-sm font-bold text-emerald-600 dark:text-emerald-400",children:w+1}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium text-slate-900 dark:text-slate-100",children:N.name}),i.jsxs("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:[" bn: ",N.quantity]})]})]}),i.jsx("div",{className:"text-right",children:i.jsx("div",{className:"font-semibold text-slate-900 dark:text-slate-100",children:Ie(N.revenue)})})]},N.id)),p.length===0&&i.jsx("div",{className:"text-center py-8 text-slate-600 dark:text-slate-400",children:"Cha c d liu bn hng"})]})]})]})]})},vCe=()=>{const{currentBranchId:e}=Ua(),{data:t=[],isLoading:r}=Mb(),{data:n=[],isLoading:a}=mf(),{data:s=[],isLoading:l}=wA(),{data:o=[],isLoading:c}=PC(),{data:d=[],isLoading:f}=Ok(),p=r||a||l||c||f,[y,g]=T.useState("30days"),N=()=>{if(y==="all")return new Date(0);const z=y==="7days"?7:y==="30days"?30:90,U=new Date;return U.setDate(U.getDate()-z),U},w=T.useMemo(()=>{const z=N();return t.filter(U=>new Date(U.date)>=z).reduce((U,Z)=>U+Z.total,0)},[t,y]),k=T.useMemo(()=>{const z=N();return s.filter(U=>U.type==="Nhp kho"&&new Date(U.date)>=z).reduce((U,Z)=>{var Q;const q=n.find(re=>re.id===Z.partId),K=((Q=q==null?void 0:q.wholesalePrice)==null?void 0:Q[e])||0;return U+K*Z.quantity},0)},[s,n,e,y]),S=w-k,O=w>0?S/w*100:0,E=T.useMemo(()=>{const z=N(),U=new Map;return t.filter(Z=>new Date(Z.date)>=z).forEach(Z=>{const q=Z.date.slice(0,10),K=U.get(q)||{income:0,expense:0};K.income+=Z.total,U.set(q,K)}),s.filter(Z=>Z.type==="Nhp kho"&&new Date(Z.date)>=z).forEach(Z=>{var ae;const q=Z.date.slice(0,10),K=n.find(de=>de.id===Z.partId),Q=((ae=K==null?void 0:K.wholesalePrice)==null?void 0:ae[e])||0,re=U.get(q)||{income:0,expense:0};re.expense+=Q*Z.quantity,U.set(q,re)}),Array.from(U.entries()).map(([Z,q])=>({date:new Date(Z).toLocaleDateString("vi-VN",{day:"2-digit",month:"2-digit"}),income:Math.round(q.income),expense:Math.round(q.expense),profit:Math.round(q.income-q.expense)})).sort((Z,q)=>Z.date.localeCompare(q.date)).slice(-30)},[t,s,n,e,y]),D=T.useMemo(()=>{const z=o.reduce((Z,q)=>Z+q.remainingAmount,0),U=o.filter(Z=>Z.remainingAmount>0).length;return{totalDebt:z,overdueCount:U,count:o.length}},[o]),H=T.useMemo(()=>{const z=d.reduce((Z,q)=>Z+q.remainingAmount,0),U=d.filter(Z=>Z.remainingAmount>0).length;return{totalDebt:z,overdueCount:U,count:d.length}},[d]),W=T.useMemo(()=>[...o].filter(z=>z.remainingAmount>0).sort((z,U)=>U.remainingAmount-z.remainingAmount).slice(0,5),[o]),R=T.useMemo(()=>n.reduce((z,U)=>{const Z=U.stock[e]||0,q=U.retailPrice[e]||0;return z+Z*q},0),[n,e]);return p?i.jsx("div",{className:"flex items-center justify-center h-96",children:i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"flex gap-2",children:[{value:"7days",label:"7 ngy"},{value:"30days",label:"30 ngy"},{value:"90days",label:"90 ngy"},{value:"all",label:"Tt c"}].map(z=>i.jsx("button",{onClick:()=>g(z.value),className:`px-4 py-2 rounded-lg font-medium transition-colors ${y===z.value?"bg-blue-600 text-white":"bg-slate-100 dark:bg-slate-800 text-slate-700 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:z.label},z.value))}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[i.jsxs("div",{className:"bg-gradient-to-br from-emerald-50 to-emerald-100 dark:from-emerald-900/20 dark:to-emerald-800/20 p-6 rounded-lg border border-emerald-200 dark:border-emerald-700",children:[i.jsx("div",{className:"text-sm font-medium text-emerald-600 dark:text-emerald-400 mb-2",children:"Thu nhp"}),i.jsx("div",{className:"text-3xl font-bold text-emerald-900 dark:text-emerald-100",children:Ie(w)})]}),i.jsxs("div",{className:"bg-gradient-to-br from-red-50 to-red-100 dark:from-red-900/20 dark:to-red-800/20 p-6 rounded-lg border border-red-200 dark:border-red-700",children:[i.jsx("div",{className:"text-sm font-medium text-red-600 dark:text-red-400 mb-2",children:"Chi ph"}),i.jsx("div",{className:"text-3xl font-bold text-red-900 dark:text-red-100",children:Ie(k)})]}),i.jsxs("div",{className:`bg-gradient-to-br p-6 rounded-lg border ${S>=0?"from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 border-blue-200 dark:border-blue-700":"from-red-50 to-red-100 dark:from-red-900/20 dark:to-red-800/20 border-red-200 dark:border-red-700"}`,children:[i.jsx("div",{className:`text-sm font-medium mb-2 ${S>=0?"text-blue-600 dark:text-blue-400":"text-red-600 dark:text-red-400"}`,children:"Li nhun"}),i.jsx("div",{className:`text-3xl font-bold ${S>=0?"text-blue-900 dark:text-blue-100":"text-red-900 dark:text-red-100"}`,children:Ie(S)}),i.jsxs("div",{className:`text-xs mt-1 ${S>=0?"text-blue-600 dark:text-blue-400":"text-red-600 dark:text-red-400"}`,children:["Bin li nhun: ",O.toFixed(1),"%"]})]}),i.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20 p-6 rounded-lg border border-purple-200 dark:border-purple-700",children:[i.jsx("div",{className:"text-sm font-medium text-purple-600 dark:text-purple-400 mb-2",children:"Gi tr tn kho"}),i.jsx("div",{className:"text-3xl font-bold text-purple-900 dark:text-purple-100",children:Ie(R)})]})]}),i.jsxs("div",{className:"bg-white dark:bg-[#1e293b] p-6 rounded-lg shadow-sm border border-slate-200 dark:border-slate-700",children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Thu - Chi - Li nhun"}),i.jsx(Kd,{width:"100%",height:350,children:i.jsxs(Lge,{data:E,children:[i.jsx(Iu,{strokeDasharray:"3 3",stroke:"#334155"}),i.jsx(Du,{dataKey:"date",stroke:"#94a3b8"}),i.jsx(Yd,{stroke:"#94a3b8"}),i.jsx(Xd,{formatter:z=>Ie(z),contentStyle:{backgroundColor:"rgba(15, 23, 42, 0.95)",border:"none",borderRadius:"8px",color:"#fff"}}),i.jsx(Im,{}),i.jsx(Yh,{dataKey:"income",fill:"#10b981",name:"Thu nhp"}),i.jsx(Yh,{dataKey:"expense",fill:"#ef4444",name:"Chi ph"}),i.jsx(nf,{type:"monotone",dataKey:"profit",stroke:"#3b82f6",strokeWidth:3,name:"Li nhun"})]})})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"bg-white dark:bg-[#1e293b] p-6 rounded-lg shadow-sm border border-slate-200 dark:border-slate-700",children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Cng n khch hng"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between p-4 bg-amber-50 dark:bg-amber-900/20 rounded-lg border border-amber-200 dark:border-amber-700",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-sm text-amber-600 dark:text-amber-400",children:"Tng cng n"}),i.jsx("div",{className:"text-2xl font-bold text-amber-900 dark:text-amber-100",children:Ie(D.totalDebt)})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"text-sm text-amber-600 dark:text-amber-400",children:"Qu hn"}),i.jsx("div",{className:"text-2xl font-bold text-amber-900 dark:text-amber-100",children:D.overdueCount})]})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Top 5 khch n nhiu nht"}),i.jsxs("div",{className:"space-y-2",children:[W.map(z=>i.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 dark:bg-slate-800 rounded-lg",children:[i.jsxs("div",{children:[i.jsx("div",{className:"font-medium text-slate-900 dark:text-slate-100",children:z.customerName}),i.jsxs("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:["Ngy to:"," ",new Date(z.createdDate).toLocaleDateString("vi-VN")]})]}),i.jsx("div",{className:"text-right",children:i.jsx("div",{className:"font-semibold text-amber-600 dark:text-amber-400",children:Ie(z.remainingAmount)})})]},z.id)),W.length===0&&i.jsxs("div",{className:"text-center py-4 text-slate-600 dark:text-slate-400 inline-flex items-center justify-center gap-2",children:[i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-4 h-4 text-green-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})}),"Khng c cng n"]})]})]})]})]}),i.jsxs("div",{className:"bg-white dark:bg-[#1e293b] p-6 rounded-lg shadow-sm border border-slate-200 dark:border-slate-700",children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-4",children:"Cng n nh cung cp"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between p-4 bg-red-50 dark:bg-red-900/20 rounded-lg border border-red-200 dark:border-red-700",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-sm text-red-600 dark:text-red-400",children:"Tng cng n"}),i.jsx("div",{className:"text-2xl font-bold text-red-900 dark:text-red-100",children:Ie(H.totalDebt)})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"text-sm text-red-600 dark:text-red-400",children:"Qu hn"}),i.jsx("div",{className:"text-2xl font-bold text-red-900 dark:text-red-100",children:H.overdueCount})]})]}),i.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-700",children:[i.jsxs("div",{className:"text-sm text-blue-600 dark:text-blue-400 mb-2 inline-flex items-center gap-2",children:[i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-4 h-4",viewBox:"0 0 24 24",fill:"currentColor",children:[i.jsx("path",{d:"M11 2a1 1 0 011 1v1.07A7.002 7.002 0 0119 11a6.97 6.97 0 01-2.05 4.95A3.5 3.5 0 0014 19.5V20a1 1 0 11-2 0v-.5a3.5 3.5 0 00-2.95-3.45A6.97 6.97 0 017 11a7.002 7.002 0 016-6.93V3a1 1 0 011-1z"}),i.jsx("path",{d:"M13 22a1 1 0 11-2 0 1 1 0 012 0z"})]}),"Mo qun l ti chnh"]}),i.jsxs("ul",{className:"text-xs text-blue-700 dark:text-blue-300 space-y-1",children:[i.jsx("li",{children:" Theo di bin li nhun hng thng"}),i.jsx("li",{children:" Gi tn kho  mc hp l"}),i.jsx("li",{children:" Thu hi cng n ng hn"}),i.jsx("li",{children:" m phn iu khon vi nh cung cp"})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-800 rounded-lg text-center",children:[i.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:"Khch hng n"}),i.jsx("div",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:D.count})]}),i.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-800 rounded-lg text-center",children:[i.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:"NCC cn tr"}),i.jsx("div",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:H.count})]})]})]})]})]})]})};function Xa(e){"@babel/helpers - typeof";return Xa=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xa(e)}var tu=Uint8Array,Ac=Uint16Array,_A=Int32Array,SA=new tu([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),jA=new tu([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),ZD=new tu([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),WV=function(e,t){for(var r=new Ac(31),n=0;n<31;++n)r[n]=t+=1<<e[n-1];for(var a=new _A(r[30]),n=1;n<30;++n)for(var s=r[n];s<r[n+1];++s)a[s]=s-r[n]<<5|n;return{b:r,r:a}},KV=WV(SA,2),yCe=KV.b,zS=KV.r;yCe[28]=258,zS[258]=28;var wCe=WV(jA,0),QD=wCe.r,qS=new Ac(32768);for(var Cs=0;Cs<32768;++Cs){var Dh=(Cs&43690)>>1|(Cs&21845)<<1;Dh=(Dh&52428)>>2|(Dh&13107)<<2,Dh=(Dh&61680)>>4|(Dh&3855)<<4,qS[Cs]=((Dh&65280)>>8|(Dh&255)<<8)>>1}var Mg=(function(e,t,r){for(var n=e.length,a=0,s=new Ac(t);a<n;++a)e[a]&&++s[e[a]-1];var l=new Ac(t);for(a=1;a<t;++a)l[a]=l[a-1]+s[a-1]<<1;var o;if(r){o=new Ac(1<<t);var c=15-t;for(a=0;a<n;++a)if(e[a])for(var d=a<<4|e[a],f=t-e[a],p=l[e[a]-1]++<<f,y=p|(1<<f)-1;p<=y;++p)o[qS[p]>>c]=d}else for(o=new Ac(n),a=0;a<n;++a)e[a]&&(o[a]=qS[l[e[a]-1]++]>>15-e[a]);return o}),Vm=new tu(288);for(var Cs=0;Cs<144;++Cs)Vm[Cs]=8;for(var Cs=144;Cs<256;++Cs)Vm[Cs]=9;for(var Cs=256;Cs<280;++Cs)Vm[Cs]=7;for(var Cs=280;Cs<288;++Cs)Vm[Cs]=8;var Sw=new tu(32);for(var Cs=0;Cs<32;++Cs)Sw[Cs]=5;var kCe=Mg(Vm,9,0),NCe=Mg(Sw,5,0),GV=function(e){return(e+7)/8|0},_Ce=function(e,t,r){return(r==null||r>e.length)&&(r=e.length),new tu(e.subarray(t,r))},m0=function(e,t,r){r<<=t&7;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8},hg=function(e,t,r){r<<=t&7;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8,e[n+2]|=r>>16},gN=function(e,t){for(var r=[],n=0;n<e.length;++n)e[n]&&r.push({s:n,f:e[n]});var a=r.length,s=r.slice();if(!a)return{t:YV,l:0};if(a==1){var l=new tu(r[0].s+1);return l[r[0].s]=1,{t:l,l:1}}r.sort(function(H,W){return H.f-W.f}),r.push({s:-1,f:25001});var o=r[0],c=r[1],d=0,f=1,p=2;for(r[0]={s:-1,f:o.f+c.f,l:o,r:c};f!=a-1;)o=r[r[d].f<r[p].f?d++:p++],c=r[d!=f&&r[d].f<r[p].f?d++:p++],r[f++]={s:-1,f:o.f+c.f,l:o,r:c};for(var y=s[0].s,n=1;n<a;++n)s[n].s>y&&(y=s[n].s);var g=new Ac(y+1),N=HS(r[f-1],g,0);if(N>t){var n=0,w=0,k=N-t,S=1<<k;for(s.sort(function(W,R){return g[R.s]-g[W.s]||W.f-R.f});n<a;++n){var O=s[n].s;if(g[O]>t)w+=S-(1<<N-g[O]),g[O]=t;else break}for(w>>=k;w>0;){var E=s[n].s;g[E]<t?w-=1<<t-g[E]++-1:++n}for(;n>=0&&w;--n){var D=s[n].s;g[D]==t&&(--g[D],++w)}N=t}return{t:new tu(g),l:N}},HS=function(e,t,r){return e.s==-1?Math.max(HS(e.l,t,r+1),HS(e.r,t,r+1)):t[e.s]=r},JD=function(e){for(var t=e.length;t&&!e[--t];);for(var r=new Ac(++t),n=0,a=e[0],s=1,l=function(c){r[n++]=c},o=1;o<=t;++o)if(e[o]==a&&o!=t)++s;else{if(!a&&s>2){for(;s>138;s-=138)l(32754);s>2&&(l(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(l(a),--s;s>6;s-=6)l(8304);s>2&&(l(s-3<<5|8208),s=0)}for(;s--;)l(a);s=1,a=e[o]}return{c:r.subarray(0,n),n:t}},fg=function(e,t){for(var r=0,n=0;n<t.length;++n)r+=e[n]*t[n];return r},XV=function(e,t,r){var n=r.length,a=GV(t+2);e[a]=n&255,e[a+1]=n>>8,e[a+2]=e[a]^255,e[a+3]=e[a+1]^255;for(var s=0;s<n;++s)e[a+s+4]=r[s];return(a+4+n)*8},eM=function(e,t,r,n,a,s,l,o,c,d,f){m0(t,f++,r),++a[256];for(var p=gN(a,15),y=p.t,g=p.l,N=gN(s,15),w=N.t,k=N.l,S=JD(y),O=S.c,E=S.n,D=JD(w),H=D.c,W=D.n,R=new Ac(19),z=0;z<O.length;++z)++R[O[z]&31];for(var z=0;z<H.length;++z)++R[H[z]&31];for(var U=gN(R,7),Z=U.t,q=U.l,K=19;K>4&&!Z[ZD[K-1]];--K);var Q=d+5<<3,re=fg(a,Vm)+fg(s,Sw)+l,ae=fg(a,y)+fg(s,w)+l+14+3*K+fg(R,Z)+2*R[16]+3*R[17]+7*R[18];if(c>=0&&Q<=re&&Q<=ae)return XV(t,f,e.subarray(c,c+d));var de,he,Se,ke;if(m0(t,f,1+(ae<re)),f+=2,ae<re){de=Mg(y,g,0),he=y,Se=Mg(w,k,0),ke=w;var Le=Mg(Z,q,0);m0(t,f,E-257),m0(t,f+5,W-1),m0(t,f+10,K-4),f+=14;for(var z=0;z<K;++z)m0(t,f+3*z,Z[ZD[z]]);f+=3*K;for(var fe=[O,H],F=0;F<2;++F)for(var te=fe[F],z=0;z<te.length;++z){var Y=te[z]&31;m0(t,f,Le[Y]),f+=Z[Y],Y>15&&(m0(t,f,te[z]>>5&127),f+=te[z]>>12)}}else de=kCe,he=Vm,Se=NCe,ke=Sw;for(var z=0;z<o;++z){var ne=n[z];if(ne>255){var Y=ne>>18&31;hg(t,f,de[Y+257]),f+=he[Y+257],Y>7&&(m0(t,f,ne>>23&31),f+=SA[Y]);var ee=ne&31;hg(t,f,Se[ee]),f+=ke[ee],ee>3&&(hg(t,f,ne>>5&8191),f+=jA[ee])}else hg(t,f,de[ne]),f+=he[ne]}return hg(t,f,de[256]),f+he[256]},SCe=new _A([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),YV=new tu(0),jCe=function(e,t,r,n,a,s){var l=s.z||e.length,o=new tu(n+l+5*(1+Math.ceil(l/7e3))+a),c=o.subarray(n,o.length-a),d=s.l,f=(s.r||0)&7;if(t){f&&(c[0]=s.r>>3);for(var p=SCe[t-1],y=p>>13,g=p&8191,N=(1<<r)-1,w=s.p||new Ac(32768),k=s.h||new Ac(N+1),S=Math.ceil(r/3),O=2*S,E=function(De){return(e[De]^e[De+1]<<S^e[De+2]<<O)&N},D=new _A(25e3),H=new Ac(288),W=new Ac(32),R=0,z=0,U=s.i||0,Z=0,q=s.w||0,K=0;U+2<l;++U){var Q=E(U),re=U&32767,ae=k[Q];if(w[re]=ae,k[Q]=re,q<=U){var de=l-U;if((R>7e3||Z>24576)&&(de>423||!d)){f=eM(e,c,0,D,H,W,z,Z,K,U-K,f),Z=R=z=0,K=U;for(var he=0;he<286;++he)H[he]=0;for(var he=0;he<30;++he)W[he]=0}var Se=2,ke=0,Le=g,fe=re-ae&32767;if(de>2&&Q==E(U-fe))for(var F=Math.min(y,de)-1,te=Math.min(32767,U),Y=Math.min(258,de);fe<=te&&--Le&&re!=ae;){if(e[U+Se]==e[U+Se-fe]){for(var ne=0;ne<Y&&e[U+ne]==e[U+ne-fe];++ne);if(ne>Se){if(Se=ne,ke=fe,ne>F)break;for(var ee=Math.min(fe,ne-2),Ce=0,he=0;he<ee;++he){var me=U-fe+he&32767,se=w[me],je=me-se&32767;je>Ce&&(Ce=je,ae=me)}}}re=ae,ae=w[re],fe+=re-ae&32767}if(ke){D[Z++]=268435456|zS[Se]<<18|QD[ke];var be=zS[Se]&31,ie=QD[ke]&31;z+=SA[be]+jA[ie],++H[257+be],++W[ie],q=U+Se,++R}else D[Z++]=e[U],++H[e[U]]}}for(U=Math.max(U,q);U<l;++U)D[Z++]=e[U],++H[e[U]];f=eM(e,c,d,D,H,W,z,Z,K,U-K,f),d||(s.r=f&7|c[f/8|0]<<3,f-=7,s.h=k,s.p=w,s.i=U,s.w=q)}else{for(var U=s.w||0;U<l+d;U+=65535){var Te=U+65535;Te>=l&&(c[f/8|0]=d,Te=l),f=XV(c,f+1,e.subarray(U,Te))}s.i=l}return _Ce(o,0,n+GV(f)+a)},ZV=function(){var e=1,t=0;return{p:function(r){for(var n=e,a=t,s=r.length|0,l=0;l!=s;){for(var o=Math.min(l+2655,s);l<o;++l)a+=n+=r[l];n=(n&65535)+15*(n>>16),a=(a&65535)+15*(a>>16)}e=n,t=a},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},CCe=function(e,t,r,n,a){if(!a&&(a={l:1},t.dictionary)){var s=t.dictionary.subarray(-32768),l=new tu(s.length+e.length);l.set(s),l.set(e,s.length),e=l,a.w=s.length}return jCe(e,t.level==null?6:t.level,t.mem==null?a.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,r,n,a)},QV=function(e,t,r){for(;r;++t)e[t]=r,r>>>=8},ACe=function(e,t){var r=t.level,n=r==0?0:r<6?1:r==9?3:2;if(e[0]=120,e[1]=n<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var a=ZV();a.p(t.dictionary),QV(e,2,a.d())}};function $S(e,t){t||(t={});var r=ZV();r.p(e);var n=CCe(e,t,t.dictionary?6:2,4);return ACe(n,t),QV(n,n.length-4,r.d()),n}var ECe=typeof TextDecoder<"u"&&new TextDecoder,TCe=0;try{ECe.decode(YV,{stream:!0}),TCe=1}catch{}function OCe(e){if(Array.isArray(e))return e}function PCe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,s,l,o=[],c=!0,d=!1;try{if(s=(r=r.call(e)).next,t!==0)for(;!(c=(n=s.call(r)).done)&&(o.push(n.value),o.length!==t);c=!0);}catch(f){d=!0,a=f}finally{try{if(!c&&r.return!=null&&(l=r.return(),Object(l)!==l))return}finally{if(d)throw a}}return o}}function tM(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function ICe(e,t){if(e){if(typeof e=="string")return tM(e,t);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?tM(e,t):void 0}}function DCe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rM(e,t){return OCe(e)||PCe(e,t)||ICe(e,t)||DCe()}function nM(e,t="utf8"){return new TextDecoder(t).decode(e)}const MCe=new TextEncoder;function LCe(e){return MCe.encode(e)}const RCe=1024*8,FCe=(()=>{const e=new Uint8Array(4),t=new Uint32Array(e.buffer);return!((t[0]=1)&e[0])})(),bN={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class CA{constructor(t=RCe,r={}){Aa(this,"buffer");Aa(this,"byteLength");Aa(this,"byteOffset");Aa(this,"length");Aa(this,"offset");Aa(this,"lastWrittenByte");Aa(this,"littleEndian");Aa(this,"_data");Aa(this,"_mark");Aa(this,"_marks");let n=!1;typeof t=="number"?t=new ArrayBuffer(t):(n=!0,this.lastWrittenByte=t.byteLength);const a=r.offset?r.offset>>>0:0,s=t.byteLength-a;let l=a;(ArrayBuffer.isView(t)||t instanceof CA)&&(t.byteLength!==t.buffer.byteLength&&(l=t.byteOffset+a),t=t.buffer),n?this.lastWrittenByte=s:this.lastWrittenByte=0,this.buffer=t,this.length=s,this.byteLength=s,this.byteOffset=l,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,l,s),this._mark=0,this._marks=[]}available(t=1){return this.offset+t<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(t=1){return this.offset+=t,this}back(t=1){return this.offset-=t,this}seek(t){return this.offset=t,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const t=this._marks.pop();if(t===void 0)throw new Error("Mark stack empty");return this.seek(t),this}rewind(){return this.offset=0,this}ensureAvailable(t=1){if(!this.available(t)){const n=(this.offset+t)*2,a=new Uint8Array(n);a.set(new Uint8Array(this.buffer)),this.buffer=a.buffer,this.length=n,this.byteLength=n,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(t=1){return this.readArray(t,"uint8")}readArray(t,r){const n=bN[r].BYTES_PER_ELEMENT*t,a=this.byteOffset+this.offset,s=this.buffer.slice(a,a+n);if(this.littleEndian===FCe&&r!=="uint8"&&r!=="int8"){const o=new Uint8Array(this.buffer.slice(a,a+n));o.reverse();const c=new bN[r](o.buffer);return this.offset+=n,c.reverse(),c}const l=new bN[r](s);return this.offset+=n,l}readInt16(){const t=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,t}readUint16(){const t=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,t}readInt32(){const t=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,t}readUint32(){const t=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat32(){const t=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat64(){const t=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,t}readBigInt64(){const t=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,t}readBigUint64(){const t=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,t}readChar(){return String.fromCharCode(this.readInt8())}readChars(t=1){let r="";for(let n=0;n<t;n++)r+=this.readChar();return r}readUtf8(t=1){return nM(this.readBytes(t))}decodeText(t=1,r="utf8"){return nM(this.readBytes(t),r)}writeBoolean(t){return this.writeUint8(t?255:0),this}writeInt8(t){return this.ensureAvailable(1),this._data.setInt8(this.offset++,t),this._updateLastWrittenByte(),this}writeUint8(t){return this.ensureAvailable(1),this._data.setUint8(this.offset++,t),this._updateLastWrittenByte(),this}writeByte(t){return this.writeUint8(t)}writeBytes(t){this.ensureAvailable(t.length);for(let r=0;r<t.length;r++)this._data.setUint8(this.offset++,t[r]);return this._updateLastWrittenByte(),this}writeInt16(t){return this.ensureAvailable(2),this._data.setInt16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(t){return this.ensureAvailable(2),this._data.setUint16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(t){return this.ensureAvailable(4),this._data.setInt32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(t){return this.ensureAvailable(4),this._data.setUint32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(t){return this.ensureAvailable(4),this._data.setFloat32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(t){return this.ensureAvailable(8),this._data.setFloat64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(t){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(t){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(t){return this.writeUint8(t.charCodeAt(0))}writeChars(t){for(let r=0;r<t.length;r++)this.writeUint8(t.charCodeAt(r));return this}writeUtf8(t){return this.writeBytes(LCe(t))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function vp(e){let t=e.length;for(;--t>=0;)e[t]=0}const BCe=3,UCe=258,JV=29,zCe=256,qCe=zCe+1+JV,eW=30,HCe=512,$Ce=new Array((qCe+2)*2);vp($Ce);const VCe=new Array(eW*2);vp(VCe);const WCe=new Array(HCe);vp(WCe);const KCe=new Array(UCe-BCe+1);vp(KCe);const GCe=new Array(JV);vp(GCe);const XCe=new Array(eW);vp(XCe);const YCe=(e,t,r,n)=>{let a=e&65535|0,s=e>>>16&65535|0,l=0;for(;r!==0;){l=r>2e3?2e3:r,r-=l;do a=a+t[n++]|0,s=s+a|0;while(--l);a%=65521,s%=65521}return a|s<<16|0};var VS=YCe;const ZCe=()=>{let e,t=[];for(var r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=e&1?3988292384^e>>>1:e>>>1;t[r]=e}return t},QCe=new Uint32Array(ZCe()),JCe=(e,t,r,n)=>{const a=QCe,s=n+r;e^=-1;for(let l=n;l<s;l++)e=e>>>8^a[(e^t[l])&255];return e^-1};var wu=JCe,WS={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},tW={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const eAe=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var tAe=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const r=t.shift();if(r){if(typeof r!="object")throw new TypeError(r+"must be non-object");for(const n in r)eAe(r,n)&&(e[n]=r[n])}}return e},rAe=e=>{let t=0;for(let n=0,a=e.length;n<a;n++)t+=e[n].length;const r=new Uint8Array(t);for(let n=0,a=0,s=e.length;n<s;n++){let l=e[n];r.set(l,a),a+=l.length}return r},rW={assign:tAe,flattenChunks:rAe};let nW=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{nW=!1}const Nb=new Uint8Array(256);for(let e=0;e<256;e++)Nb[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;Nb[254]=Nb[254]=1;var nAe=e=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let t,r,n,a,s,l=e.length,o=0;for(a=0;a<l;a++)r=e.charCodeAt(a),(r&64512)===55296&&a+1<l&&(n=e.charCodeAt(a+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),a++)),o+=r<128?1:r<2048?2:r<65536?3:4;for(t=new Uint8Array(o),s=0,a=0;s<o;a++)r=e.charCodeAt(a),(r&64512)===55296&&a+1<l&&(n=e.charCodeAt(a+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),a++)),r<128?t[s++]=r:r<2048?(t[s++]=192|r>>>6,t[s++]=128|r&63):r<65536?(t[s++]=224|r>>>12,t[s++]=128|r>>>6&63,t[s++]=128|r&63):(t[s++]=240|r>>>18,t[s++]=128|r>>>12&63,t[s++]=128|r>>>6&63,t[s++]=128|r&63);return t};const aAe=(e,t)=>{if(t<65534&&e.subarray&&nW)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let r="";for(let n=0;n<t;n++)r+=String.fromCharCode(e[n]);return r};var sAe=(e,t)=>{const r=t||e.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,t));let n,a;const s=new Array(r*2);for(a=0,n=0;n<r;){let l=e[n++];if(l<128){s[a++]=l;continue}let o=Nb[l];if(o>4){s[a++]=65533,n+=o-1;continue}for(l&=o===2?31:o===3?15:7;o>1&&n<r;)l=l<<6|e[n++]&63,o--;if(o>1){s[a++]=65533;continue}l<65536?s[a++]=l:(l-=65536,s[a++]=55296|l>>10&1023,s[a++]=56320|l&1023)}return aAe(s,a)},iAe=(e,t)=>{t=t||e.length,t>e.length&&(t=e.length);let r=t-1;for(;r>=0&&(e[r]&192)===128;)r--;return r<0||r===0?t:r+Nb[e[r]]>t?r:t},KS={string2buf:nAe,buf2string:sAe,utf8border:iAe};function lAe(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var oAe=lAe;const q2=16209,cAe=16191;var dAe=function(t,r){let n,a,s,l,o,c,d,f,p,y,g,N,w,k,S,O,E,D,H,W,R,z,U,Z;const q=t.state;n=t.next_in,U=t.input,a=n+(t.avail_in-5),s=t.next_out,Z=t.output,l=s-(r-t.avail_out),o=s+(t.avail_out-257),c=q.dmax,d=q.wsize,f=q.whave,p=q.wnext,y=q.window,g=q.hold,N=q.bits,w=q.lencode,k=q.distcode,S=(1<<q.lenbits)-1,O=(1<<q.distbits)-1;e:do{N<15&&(g+=U[n++]<<N,N+=8,g+=U[n++]<<N,N+=8),E=w[g&S];t:for(;;){if(D=E>>>24,g>>>=D,N-=D,D=E>>>16&255,D===0)Z[s++]=E&65535;else if(D&16){H=E&65535,D&=15,D&&(N<D&&(g+=U[n++]<<N,N+=8),H+=g&(1<<D)-1,g>>>=D,N-=D),N<15&&(g+=U[n++]<<N,N+=8,g+=U[n++]<<N,N+=8),E=k[g&O];r:for(;;){if(D=E>>>24,g>>>=D,N-=D,D=E>>>16&255,D&16){if(W=E&65535,D&=15,N<D&&(g+=U[n++]<<N,N+=8,N<D&&(g+=U[n++]<<N,N+=8)),W+=g&(1<<D)-1,W>c){t.msg="invalid distance too far back",q.mode=q2;break e}if(g>>>=D,N-=D,D=s-l,W>D){if(D=W-D,D>f&&q.sane){t.msg="invalid distance too far back",q.mode=q2;break e}if(R=0,z=y,p===0){if(R+=d-D,D<H){H-=D;do Z[s++]=y[R++];while(--D);R=s-W,z=Z}}else if(p<D){if(R+=d+p-D,D-=p,D<H){H-=D;do Z[s++]=y[R++];while(--D);if(R=0,p<H){D=p,H-=D;do Z[s++]=y[R++];while(--D);R=s-W,z=Z}}}else if(R+=p-D,D<H){H-=D;do Z[s++]=y[R++];while(--D);R=s-W,z=Z}for(;H>2;)Z[s++]=z[R++],Z[s++]=z[R++],Z[s++]=z[R++],H-=3;H&&(Z[s++]=z[R++],H>1&&(Z[s++]=z[R++]))}else{R=s-W;do Z[s++]=Z[R++],Z[s++]=Z[R++],Z[s++]=Z[R++],H-=3;while(H>2);H&&(Z[s++]=Z[R++],H>1&&(Z[s++]=Z[R++]))}}else if((D&64)===0){E=k[(E&65535)+(g&(1<<D)-1)];continue r}else{t.msg="invalid distance code",q.mode=q2;break e}break}}else if((D&64)===0){E=w[(E&65535)+(g&(1<<D)-1)];continue t}else if(D&32){q.mode=cAe;break e}else{t.msg="invalid literal/length code",q.mode=q2;break e}break}}while(n<a&&s<o);H=N>>3,n-=H,N-=H<<3,g&=(1<<N)-1,t.next_in=n,t.next_out=s,t.avail_in=n<a?5+(a-n):5-(n-a),t.avail_out=s<o?257+(o-s):257-(s-o),q.hold=g,q.bits=N};const Yx=15,aM=852,sM=592,iM=0,vN=1,lM=2,uAe=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),hAe=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),fAe=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),mAe=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),xAe=(e,t,r,n,a,s,l,o)=>{const c=o.bits;let d=0,f=0,p=0,y=0,g=0,N=0,w=0,k=0,S=0,O=0,E,D,H,W,R,z=null,U;const Z=new Uint16Array(Yx+1),q=new Uint16Array(Yx+1);let K=null,Q,re,ae;for(d=0;d<=Yx;d++)Z[d]=0;for(f=0;f<n;f++)Z[t[r+f]]++;for(g=c,y=Yx;y>=1&&Z[y]===0;y--);if(g>y&&(g=y),y===0)return a[s++]=1<<24|64<<16|0,a[s++]=1<<24|64<<16|0,o.bits=1,0;for(p=1;p<y&&Z[p]===0;p++);for(g<p&&(g=p),k=1,d=1;d<=Yx;d++)if(k<<=1,k-=Z[d],k<0)return-1;if(k>0&&(e===iM||y!==1))return-1;for(q[1]=0,d=1;d<Yx;d++)q[d+1]=q[d]+Z[d];for(f=0;f<n;f++)t[r+f]!==0&&(l[q[t[r+f]]++]=f);if(e===iM?(z=K=l,U=20):e===vN?(z=uAe,K=hAe,U=257):(z=fAe,K=mAe,U=0),O=0,f=0,d=p,R=s,N=g,w=0,H=-1,S=1<<g,W=S-1,e===vN&&S>aM||e===lM&&S>sM)return 1;for(;;){Q=d-w,l[f]+1<U?(re=0,ae=l[f]):l[f]>=U?(re=K[l[f]-U],ae=z[l[f]-U]):(re=96,ae=0),E=1<<d-w,D=1<<N,p=D;do D-=E,a[R+(O>>w)+D]=Q<<24|re<<16|ae|0;while(D!==0);for(E=1<<d-1;O&E;)E>>=1;if(E!==0?(O&=E-1,O+=E):O=0,f++,--Z[d]===0){if(d===y)break;d=t[r+l[f]]}if(d>g&&(O&W)!==H){for(w===0&&(w=g),R+=p,N=d-w,k=1<<N;N+w<y&&(k-=Z[N+w],!(k<=0));)N++,k<<=1;if(S+=1<<N,e===vN&&S>aM||e===lM&&S>sM)return 1;H=O&W,a[H]=g<<24|N<<16|R-s|0}}return O!==0&&(a[R+O]=d-w<<24|64<<16|0),o.bits=g,0};var Lg=xAe;const pAe=0,aW=1,sW=2,{Z_FINISH:oM,Z_BLOCK:gAe,Z_TREES:H2,Z_OK:Wm,Z_STREAM_END:bAe,Z_NEED_DICT:vAe,Z_STREAM_ERROR:pd,Z_DATA_ERROR:iW,Z_MEM_ERROR:lW,Z_BUF_ERROR:yAe,Z_DEFLATED:cM}=tW,qk=16180,dM=16181,uM=16182,hM=16183,fM=16184,mM=16185,xM=16186,pM=16187,gM=16188,bM=16189,jw=16190,x0=16191,yN=16192,vM=16193,wN=16194,yM=16195,wM=16196,kM=16197,NM=16198,$2=16199,V2=16200,_M=16201,SM=16202,jM=16203,CM=16204,AM=16205,kN=16206,EM=16207,TM=16208,Ls=16209,oW=16210,cW=16211,wAe=852,kAe=592,NAe=15,_Ae=NAe,OM=e=>(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24);function SAe(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const ax=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<qk||t.mode>cW?1:0},dW=e=>{if(ax(e))return pd;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=t.wrap&1),t.mode=qk,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(wAe),t.distcode=t.distdyn=new Int32Array(kAe),t.sane=1,t.back=-1,Wm},uW=e=>{if(ax(e))return pd;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,dW(e)},hW=(e,t)=>{let r;if(ax(e))return pd;const n=e.state;return t<0?(r=0,t=-t):(r=(t>>4)+5,t<48&&(t&=15)),t&&(t<8||t>15)?pd:(n.window!==null&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,uW(e))},fW=(e,t)=>{if(!e)return pd;const r=new SAe;e.state=r,r.strm=e,r.window=null,r.mode=qk;const n=hW(e,t);return n!==Wm&&(e.state=null),n},jAe=e=>fW(e,_Ae);let PM=!0,NN,_N;const CAe=e=>{if(PM){NN=new Int32Array(512),_N=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(Lg(aW,e.lens,0,288,NN,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;Lg(sW,e.lens,0,32,_N,0,e.work,{bits:5}),PM=!1}e.lencode=NN,e.lenbits=9,e.distcode=_N,e.distbits=5},mW=(e,t,r,n)=>{let a;const s=e.state;return s.window===null&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),n>=s.wsize?(s.window.set(t.subarray(r-s.wsize,r),0),s.wnext=0,s.whave=s.wsize):(a=s.wsize-s.wnext,a>n&&(a=n),s.window.set(t.subarray(r-n,r-n+a),s.wnext),n-=a,n?(s.window.set(t.subarray(r-n,r),0),s.wnext=n,s.whave=s.wsize):(s.wnext+=a,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=a))),0},AAe=(e,t)=>{let r,n,a,s,l,o,c,d,f,p,y,g,N,w,k=0,S,O,E,D,H,W,R,z;const U=new Uint8Array(4);let Z,q;const K=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(ax(e)||!e.output||!e.input&&e.avail_in!==0)return pd;r=e.state,r.mode===x0&&(r.mode=yN),l=e.next_out,a=e.output,c=e.avail_out,s=e.next_in,n=e.input,o=e.avail_in,d=r.hold,f=r.bits,p=o,y=c,z=Wm;e:for(;;)switch(r.mode){case qk:if(r.wrap===0){r.mode=yN;break}for(;f<16;){if(o===0)break e;o--,d+=n[s++]<<f,f+=8}if(r.wrap&2&&d===35615){r.wbits===0&&(r.wbits=15),r.check=0,U[0]=d&255,U[1]=d>>>8&255,r.check=wu(r.check,U,2,0),d=0,f=0,r.mode=dM;break}if(r.head&&(r.head.done=!1),!(r.wrap&1)||(((d&255)<<8)+(d>>8))%31){e.msg="incorrect header check",r.mode=Ls;break}if((d&15)!==cM){e.msg="unknown compression method",r.mode=Ls;break}if(d>>>=4,f-=4,R=(d&15)+8,r.wbits===0&&(r.wbits=R),R>15||R>r.wbits){e.msg="invalid window size",r.mode=Ls;break}r.dmax=1<<r.wbits,r.flags=0,e.adler=r.check=1,r.mode=d&512?bM:x0,d=0,f=0;break;case dM:for(;f<16;){if(o===0)break e;o--,d+=n[s++]<<f,f+=8}if(r.flags=d,(r.flags&255)!==cM){e.msg="unknown compression method",r.mode=Ls;break}if(r.flags&57344){e.msg="unknown header flags set",r.mode=Ls;break}r.head&&(r.head.text=d>>8&1),r.flags&512&&r.wrap&4&&(U[0]=d&255,U[1]=d>>>8&255,r.check=wu(r.check,U,2,0)),d=0,f=0,r.mode=uM;case uM:for(;f<32;){if(o===0)break e;o--,d+=n[s++]<<f,f+=8}r.head&&(r.head.time=d),r.flags&512&&r.wrap&4&&(U[0]=d&255,U[1]=d>>>8&255,U[2]=d>>>16&255,U[3]=d>>>24&255,r.check=wu(r.check,U,4,0)),d=0,f=0,r.mode=hM;case hM:for(;f<16;){if(o===0)break e;o--,d+=n[s++]<<f,f+=8}r.head&&(r.head.xflags=d&255,r.head.os=d>>8),r.flags&512&&r.wrap&4&&(U[0]=d&255,U[1]=d>>>8&255,r.check=wu(r.check,U,2,0)),d=0,f=0,r.mode=fM;case fM:if(r.flags&1024){for(;f<16;){if(o===0)break e;o--,d+=n[s++]<<f,f+=8}r.length=d,r.head&&(r.head.extra_len=d),r.flags&512&&r.wrap&4&&(U[0]=d&255,U[1]=d>>>8&255,r.check=wu(r.check,U,2,0)),d=0,f=0}else r.head&&(r.head.extra=null);r.mode=mM;case mM:if(r.flags&1024&&(g=r.length,g>o&&(g=o),g&&(r.head&&(R=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(n.subarray(s,s+g),R)),r.flags&512&&r.wrap&4&&(r.check=wu(r.check,n,g,s)),o-=g,s+=g,r.length-=g),r.length))break e;r.length=0,r.mode=xM;case xM:if(r.flags&2048){if(o===0)break e;g=0;do R=n[s+g++],r.head&&R&&r.length<65536&&(r.head.name+=String.fromCharCode(R));while(R&&g<o);if(r.flags&512&&r.wrap&4&&(r.check=wu(r.check,n,g,s)),o-=g,s+=g,R)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=pM;case pM:if(r.flags&4096){if(o===0)break e;g=0;do R=n[s+g++],r.head&&R&&r.length<65536&&(r.head.comment+=String.fromCharCode(R));while(R&&g<o);if(r.flags&512&&r.wrap&4&&(r.check=wu(r.check,n,g,s)),o-=g,s+=g,R)break e}else r.head&&(r.head.comment=null);r.mode=gM;case gM:if(r.flags&512){for(;f<16;){if(o===0)break e;o--,d+=n[s++]<<f,f+=8}if(r.wrap&4&&d!==(r.check&65535)){e.msg="header crc mismatch",r.mode=Ls;break}d=0,f=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=x0;break;case bM:for(;f<32;){if(o===0)break e;o--,d+=n[s++]<<f,f+=8}e.adler=r.check=OM(d),d=0,f=0,r.mode=jw;case jw:if(r.havedict===0)return e.next_out=l,e.avail_out=c,e.next_in=s,e.avail_in=o,r.hold=d,r.bits=f,vAe;e.adler=r.check=1,r.mode=x0;case x0:if(t===gAe||t===H2)break e;case yN:if(r.last){d>>>=f&7,f-=f&7,r.mode=kN;break}for(;f<3;){if(o===0)break e;o--,d+=n[s++]<<f,f+=8}switch(r.last=d&1,d>>>=1,f-=1,d&3){case 0:r.mode=vM;break;case 1:if(CAe(r),r.mode=$2,t===H2){d>>>=2,f-=2;break e}break;case 2:r.mode=wM;break;case 3:e.msg="invalid block type",r.mode=Ls}d>>>=2,f-=2;break;case vM:for(d>>>=f&7,f-=f&7;f<32;){if(o===0)break e;o--,d+=n[s++]<<f,f+=8}if((d&65535)!==(d>>>16^65535)){e.msg="invalid stored block lengths",r.mode=Ls;break}if(r.length=d&65535,d=0,f=0,r.mode=wN,t===H2)break e;case wN:r.mode=yM;case yM:if(g=r.length,g){if(g>o&&(g=o),g>c&&(g=c),g===0)break e;a.set(n.subarray(s,s+g),l),o-=g,s+=g,c-=g,l+=g,r.length-=g;break}r.mode=x0;break;case wM:for(;f<14;){if(o===0)break e;o--,d+=n[s++]<<f,f+=8}if(r.nlen=(d&31)+257,d>>>=5,f-=5,r.ndist=(d&31)+1,d>>>=5,f-=5,r.ncode=(d&15)+4,d>>>=4,f-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=Ls;break}r.have=0,r.mode=kM;case kM:for(;r.have<r.ncode;){for(;f<3;){if(o===0)break e;o--,d+=n[s++]<<f,f+=8}r.lens[K[r.have++]]=d&7,d>>>=3,f-=3}for(;r.have<19;)r.lens[K[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,Z={bits:r.lenbits},z=Lg(pAe,r.lens,0,19,r.lencode,0,r.work,Z),r.lenbits=Z.bits,z){e.msg="invalid code lengths set",r.mode=Ls;break}r.have=0,r.mode=NM;case NM:for(;r.have<r.nlen+r.ndist;){for(;k=r.lencode[d&(1<<r.lenbits)-1],S=k>>>24,O=k>>>16&255,E=k&65535,!(S<=f);){if(o===0)break e;o--,d+=n[s++]<<f,f+=8}if(E<16)d>>>=S,f-=S,r.lens[r.have++]=E;else{if(E===16){for(q=S+2;f<q;){if(o===0)break e;o--,d+=n[s++]<<f,f+=8}if(d>>>=S,f-=S,r.have===0){e.msg="invalid bit length repeat",r.mode=Ls;break}R=r.lens[r.have-1],g=3+(d&3),d>>>=2,f-=2}else if(E===17){for(q=S+3;f<q;){if(o===0)break e;o--,d+=n[s++]<<f,f+=8}d>>>=S,f-=S,R=0,g=3+(d&7),d>>>=3,f-=3}else{for(q=S+7;f<q;){if(o===0)break e;o--,d+=n[s++]<<f,f+=8}d>>>=S,f-=S,R=0,g=11+(d&127),d>>>=7,f-=7}if(r.have+g>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=Ls;break}for(;g--;)r.lens[r.have++]=R}}if(r.mode===Ls)break;if(r.lens[256]===0){e.msg="invalid code -- missing end-of-block",r.mode=Ls;break}if(r.lenbits=9,Z={bits:r.lenbits},z=Lg(aW,r.lens,0,r.nlen,r.lencode,0,r.work,Z),r.lenbits=Z.bits,z){e.msg="invalid literal/lengths set",r.mode=Ls;break}if(r.distbits=6,r.distcode=r.distdyn,Z={bits:r.distbits},z=Lg(sW,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,Z),r.distbits=Z.bits,z){e.msg="invalid distances set",r.mode=Ls;break}if(r.mode=$2,t===H2)break e;case $2:r.mode=V2;case V2:if(o>=6&&c>=258){e.next_out=l,e.avail_out=c,e.next_in=s,e.avail_in=o,r.hold=d,r.bits=f,dAe(e,y),l=e.next_out,a=e.output,c=e.avail_out,s=e.next_in,n=e.input,o=e.avail_in,d=r.hold,f=r.bits,r.mode===x0&&(r.back=-1);break}for(r.back=0;k=r.lencode[d&(1<<r.lenbits)-1],S=k>>>24,O=k>>>16&255,E=k&65535,!(S<=f);){if(o===0)break e;o--,d+=n[s++]<<f,f+=8}if(O&&(O&240)===0){for(D=S,H=O,W=E;k=r.lencode[W+((d&(1<<D+H)-1)>>D)],S=k>>>24,O=k>>>16&255,E=k&65535,!(D+S<=f);){if(o===0)break e;o--,d+=n[s++]<<f,f+=8}d>>>=D,f-=D,r.back+=D}if(d>>>=S,f-=S,r.back+=S,r.length=E,O===0){r.mode=AM;break}if(O&32){r.back=-1,r.mode=x0;break}if(O&64){e.msg="invalid literal/length code",r.mode=Ls;break}r.extra=O&15,r.mode=_M;case _M:if(r.extra){for(q=r.extra;f<q;){if(o===0)break e;o--,d+=n[s++]<<f,f+=8}r.length+=d&(1<<r.extra)-1,d>>>=r.extra,f-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=SM;case SM:for(;k=r.distcode[d&(1<<r.distbits)-1],S=k>>>24,O=k>>>16&255,E=k&65535,!(S<=f);){if(o===0)break e;o--,d+=n[s++]<<f,f+=8}if((O&240)===0){for(D=S,H=O,W=E;k=r.distcode[W+((d&(1<<D+H)-1)>>D)],S=k>>>24,O=k>>>16&255,E=k&65535,!(D+S<=f);){if(o===0)break e;o--,d+=n[s++]<<f,f+=8}d>>>=D,f-=D,r.back+=D}if(d>>>=S,f-=S,r.back+=S,O&64){e.msg="invalid distance code",r.mode=Ls;break}r.offset=E,r.extra=O&15,r.mode=jM;case jM:if(r.extra){for(q=r.extra;f<q;){if(o===0)break e;o--,d+=n[s++]<<f,f+=8}r.offset+=d&(1<<r.extra)-1,d>>>=r.extra,f-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=Ls;break}r.mode=CM;case CM:if(c===0)break e;if(g=y-c,r.offset>g){if(g=r.offset-g,g>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=Ls;break}g>r.wnext?(g-=r.wnext,N=r.wsize-g):N=r.wnext-g,g>r.length&&(g=r.length),w=r.window}else w=a,N=l-r.offset,g=r.length;g>c&&(g=c),c-=g,r.length-=g;do a[l++]=w[N++];while(--g);r.length===0&&(r.mode=V2);break;case AM:if(c===0)break e;a[l++]=r.length,c--,r.mode=V2;break;case kN:if(r.wrap){for(;f<32;){if(o===0)break e;o--,d|=n[s++]<<f,f+=8}if(y-=c,e.total_out+=y,r.total+=y,r.wrap&4&&y&&(e.adler=r.check=r.flags?wu(r.check,a,y,l-y):VS(r.check,a,y,l-y)),y=c,r.wrap&4&&(r.flags?d:OM(d))!==r.check){e.msg="incorrect data check",r.mode=Ls;break}d=0,f=0}r.mode=EM;case EM:if(r.wrap&&r.flags){for(;f<32;){if(o===0)break e;o--,d+=n[s++]<<f,f+=8}if(r.wrap&4&&d!==(r.total&4294967295)){e.msg="incorrect length check",r.mode=Ls;break}d=0,f=0}r.mode=TM;case TM:z=bAe;break e;case Ls:z=iW;break e;case oW:return lW;case cW:default:return pd}return e.next_out=l,e.avail_out=c,e.next_in=s,e.avail_in=o,r.hold=d,r.bits=f,(r.wsize||y!==e.avail_out&&r.mode<Ls&&(r.mode<kN||t!==oM))&&mW(e,e.output,e.next_out,y-e.avail_out),p-=e.avail_in,y-=e.avail_out,e.total_in+=p,e.total_out+=y,r.total+=y,r.wrap&4&&y&&(e.adler=r.check=r.flags?wu(r.check,a,y,e.next_out-y):VS(r.check,a,y,e.next_out-y)),e.data_type=r.bits+(r.last?64:0)+(r.mode===x0?128:0)+(r.mode===$2||r.mode===wN?256:0),(p===0&&y===0||t===oM)&&z===Wm&&(z=yAe),z},EAe=e=>{if(ax(e))return pd;let t=e.state;return t.window&&(t.window=null),e.state=null,Wm},TAe=(e,t)=>{if(ax(e))return pd;const r=e.state;return(r.wrap&2)===0?pd:(r.head=t,t.done=!1,Wm)},OAe=(e,t)=>{const r=t.length;let n,a,s;return ax(e)||(n=e.state,n.wrap!==0&&n.mode!==jw)?pd:n.mode===jw&&(a=1,a=VS(a,t,r,0),a!==n.check)?iW:(s=mW(e,t,r,r),s?(n.mode=oW,lW):(n.havedict=1,Wm))};var PAe=uW,IAe=hW,DAe=dW,MAe=jAe,LAe=fW,RAe=AAe,FAe=EAe,BAe=TAe,UAe=OAe,zAe="pako inflate (from Nodeca project)",v0={inflateReset:PAe,inflateReset2:IAe,inflateResetKeep:DAe,inflateInit:MAe,inflateInit2:LAe,inflate:RAe,inflateEnd:FAe,inflateGetHeader:BAe,inflateSetDictionary:UAe,inflateInfo:zAe};function qAe(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var HAe=qAe;const xW=Object.prototype.toString,{Z_NO_FLUSH:$Ae,Z_FINISH:VAe,Z_OK:_b,Z_STREAM_END:SN,Z_NEED_DICT:jN,Z_STREAM_ERROR:WAe,Z_DATA_ERROR:IM,Z_MEM_ERROR:KAe}=tW;function uv(e){this.options=rW.assign({chunkSize:1024*64,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15)===0&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new oAe,this.strm.avail_out=0;let r=v0.inflateInit2(this.strm,t.windowBits);if(r!==_b)throw new Error(WS[r]);if(this.header=new HAe,v0.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=KS.string2buf(t.dictionary):xW.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(r=v0.inflateSetDictionary(this.strm,t.dictionary),r!==_b)))throw new Error(WS[r])}uv.prototype.push=function(e,t){const r=this.strm,n=this.options.chunkSize,a=this.options.dictionary;let s,l,o;if(this.ended)return!1;for(t===~~t?l=t:l=t===!0?VAe:$Ae,xW.call(e)==="[object ArrayBuffer]"?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;;){for(r.avail_out===0&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),s=v0.inflate(r,l),s===jN&&a&&(s=v0.inflateSetDictionary(r,a),s===_b?s=v0.inflate(r,l):s===IM&&(s=jN));r.avail_in>0&&s===SN&&r.state.wrap>0&&e[r.next_in]!==0;)v0.inflateReset(r),s=v0.inflate(r,l);switch(s){case WAe:case IM:case jN:case KAe:return this.onEnd(s),this.ended=!0,!1}if(o=r.avail_out,r.next_out&&(r.avail_out===0||s===SN))if(this.options.to==="string"){let c=KS.utf8border(r.output,r.next_out),d=r.next_out-c,f=KS.buf2string(r.output,c);r.next_out=d,r.avail_out=n-d,d&&r.output.set(r.output.subarray(c,c+d),0),this.onData(f)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(!(s===_b&&o===0)){if(s===SN)return s=v0.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,!0;if(r.avail_in===0)break}}return!0};uv.prototype.onData=function(e){this.chunks.push(e)};uv.prototype.onEnd=function(e){e===_b&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=rW.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function GAe(e,t){const r=new uv(t);if(r.push(e),r.err)throw r.msg||WS[r.err];return r.result}var XAe=uv,YAe=GAe,ZAe={Inflate:XAe,inflate:YAe};const{Inflate:QAe,inflate:JAe}=ZAe;var DM=QAe,eEe=JAe;const pW=[];for(let e=0;e<256;e++){let t=e;for(let r=0;r<8;r++)t&1?t=3988292384^t>>>1:t=t>>>1;pW[e]=t}const MM=4294967295;function tEe(e,t,r){let n=e;for(let a=0;a<r;a++)n=pW[(n^t[a])&255]^n>>>8;return n}function rEe(e,t){return(tEe(MM,e,t)^MM)>>>0}function LM(e,t,r){const n=e.readUint32(),a=rEe(new Uint8Array(e.buffer,e.byteOffset+e.offset-t-4,t),t);if(a!==n)throw new Error(`CRC mismatch for chunk ${r}. Expected ${n}, found ${a}`)}function gW(e,t,r){for(let n=0;n<r;n++)t[n]=e[n]}function bW(e,t,r,n){let a=0;for(;a<n;a++)t[a]=e[a];for(;a<r;a++)t[a]=e[a]+t[a-n]&255}function vW(e,t,r,n){let a=0;if(r.length===0)for(;a<n;a++)t[a]=e[a];else for(;a<n;a++)t[a]=e[a]+r[a]&255}function yW(e,t,r,n,a){let s=0;if(r.length===0){for(;s<a;s++)t[s]=e[s];for(;s<n;s++)t[s]=e[s]+(t[s-a]>>1)&255}else{for(;s<a;s++)t[s]=e[s]+(r[s]>>1)&255;for(;s<n;s++)t[s]=e[s]+(t[s-a]+r[s]>>1)&255}}function wW(e,t,r,n,a){let s=0;if(r.length===0){for(;s<a;s++)t[s]=e[s];for(;s<n;s++)t[s]=e[s]+t[s-a]&255}else{for(;s<a;s++)t[s]=e[s]+r[s]&255;for(;s<n;s++)t[s]=e[s]+nEe(t[s-a],r[s],r[s-a])&255}}function nEe(e,t,r){const n=e+t-r,a=Math.abs(n-e),s=Math.abs(n-t),l=Math.abs(n-r);return a<=s&&a<=l?e:s<=l?t:r}function aEe(e,t,r,n,a,s){switch(e){case 0:gW(t,r,a);break;case 1:bW(t,r,a,s);break;case 2:vW(t,r,n,a);break;case 3:yW(t,r,n,a,s);break;case 4:wW(t,r,n,a,s);break;default:throw new Error(`Unsupported filter: ${e}`)}}const sEe=new Uint16Array([255]),iEe=new Uint8Array(sEe.buffer),lEe=iEe[0]===255;function oEe(e){const{data:t,width:r,height:n,channels:a,depth:s}=e,l=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],o=Math.ceil(s/8)*a,c=new Uint8Array(n*r*o);let d=0;for(let f=0;f<7;f++){const p=l[f],y=Math.ceil((r-p.x)/p.xStep),g=Math.ceil((n-p.y)/p.yStep);if(y<=0||g<=0)continue;const N=y*o,w=new Uint8Array(N);for(let k=0;k<g;k++){const S=t[d++],O=t.subarray(d,d+N);d+=N;const E=new Uint8Array(N);aEe(S,O,E,w,N,o),w.set(E);for(let D=0;D<y;D++){const H=p.x+D*p.xStep,W=p.y+k*p.yStep;if(!(H>=r||W>=n))for(let R=0;R<o;R++)c[(W*r+H)*o+R]=E[D*o+R]}}}if(s===16){const f=new Uint16Array(c.buffer);if(lEe)for(let p=0;p<f.length;p++)f[p]=cEe(f[p]);return f}else return c}function cEe(e){return(e&255)<<8|e>>8&255}const dEe=new Uint16Array([255]),uEe=new Uint8Array(dEe.buffer),hEe=uEe[0]===255,fEe=new Uint8Array(0);function RM(e){const{data:t,width:r,height:n,channels:a,depth:s}=e,l=Math.ceil(s/8)*a,o=Math.ceil(s/8*a*r),c=new Uint8Array(n*o);let d=fEe,f=0,p,y;for(let g=0;g<n;g++){switch(p=t.subarray(f+1,f+1+o),y=c.subarray(g*o,(g+1)*o),t[f]){case 0:gW(p,y,o);break;case 1:bW(p,y,o,l);break;case 2:vW(p,y,d,o);break;case 3:yW(p,y,d,o,l);break;case 4:wW(p,y,d,o,l);break;default:throw new Error(`Unsupported filter: ${t[f]}`)}d=y,f+=o+1}if(s===16){const g=new Uint16Array(c.buffer);if(hEe)for(let N=0;N<g.length;N++)g[N]=mEe(g[N]);return g}else return c}function mEe(e){return(e&255)<<8|e>>8&255}const ay=Uint8Array.of(137,80,78,71,13,10,26,10);function FM(e){if(!xEe(e.readBytes(ay.length)))throw new Error("wrong PNG signature")}function xEe(e){if(e.length<ay.length)return!1;for(let t=0;t<ay.length;t++)if(e[t]!==ay[t])return!1;return!0}const pEe="tEXt",gEe=0,kW=new TextDecoder("latin1");function bEe(e){if(yEe(e),e.length===0||e.length>79)throw new Error("keyword length must be between 1 and 79")}const vEe=/^[\u0000-\u00FF]*$/;function yEe(e){if(!vEe.test(e))throw new Error("invalid latin1 text")}function wEe(e,t,r){const n=NW(t);e[n]=kEe(t,r-n.length-1)}function NW(e){for(e.mark();e.readByte()!==gEe;);const t=e.offset;e.reset();const r=kW.decode(e.readBytes(t-e.offset-1));return e.skip(1),bEe(r),r}function kEe(e,t){return kW.decode(e.readBytes(t))}const fc={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},CN={UNKNOWN:-1,DEFLATE:0},BM={UNKNOWN:-1,ADAPTIVE:0},AN={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},W2={NONE:0,BACKGROUND:1,PREVIOUS:2},EN={SOURCE:0,OVER:1};class NEe extends CA{constructor(r,n={}){super(r);Aa(this,"_checkCrc");Aa(this,"_inflator");Aa(this,"_png");Aa(this,"_apng");Aa(this,"_end");Aa(this,"_hasPalette");Aa(this,"_palette");Aa(this,"_hasTransparency");Aa(this,"_transparency");Aa(this,"_compressionMethod");Aa(this,"_filterMethod");Aa(this,"_interlaceMethod");Aa(this,"_colorType");Aa(this,"_isAnimated");Aa(this,"_numberOfFrames");Aa(this,"_numberOfPlays");Aa(this,"_frames");Aa(this,"_writingDataChunks");const{checkCrc:a=!1}=n;this._checkCrc=a,this._inflator=new DM,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=CN.UNKNOWN,this._filterMethod=BM.UNKNOWN,this._interlaceMethod=AN.UNKNOWN,this._colorType=fc.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(FM(this);!this._end;){const r=this.readUint32(),n=this.readChars(4);this.decodeChunk(r,n)}return this.decodeImage(),this._png}decodeApng(){for(FM(this);!this._end;){const r=this.readUint32(),n=this.readChars(4);this.decodeApngChunk(r,n)}return this.decodeApngImage(),this._apng}decodeChunk(r,n){const a=this.offset;switch(n){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(r);break;case"IDAT":this.decodeIDAT(r);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(r);break;case"iCCP":this.decodeiCCP(r);break;case pEe:wEe(this._png.text,this,r);break;case"pHYs":this.decodepHYs();break;default:this.skip(r);break}if(this.offset-a!==r)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?LM(this,r+4,n):this.skip(4)}decodeApngChunk(r,n){const a=this.offset;switch(n!=="fdAT"&&n!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),n){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(r);break;default:this.decodeChunk(r,n),this.offset=a+r;break}if(this.offset-a!==r)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?LM(this,r+4,n):this.skip(4)}decodeIHDR(){const r=this._png;r.width=this.readUint32(),r.height=this.readUint32(),r.depth=_Ee(this.readUint8());const n=this.readUint8();this._colorType=n;let a;switch(n){case fc.GREYSCALE:a=1;break;case fc.TRUECOLOUR:a=3;break;case fc.INDEXED_COLOUR:a=1;break;case fc.GREYSCALE_ALPHA:a=2;break;case fc.TRUECOLOUR_ALPHA:a=4;break;case fc.UNKNOWN:default:throw new Error(`Unknown color type: ${n}`)}if(this._png.channels=a,this._compressionMethod=this.readUint8(),this._compressionMethod!==CN.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const r={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(r)}decodePLTE(r){if(r%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${r}`);const n=r/3;this._hasPalette=!0;const a=[];this._palette=a;for(let s=0;s<n;s++)a.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(r){this._writingDataChunks=!0;const n=r,a=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,a,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(r)}decodeFDAT(r){this._writingDataChunks=!0;let n=r,a=this.offset+this.byteOffset;if(a+=4,n-=4,this._inflator.push(new Uint8Array(this.buffer,a,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(r)}decodetRNS(r){switch(this._colorType){case fc.GREYSCALE:case fc.TRUECOLOUR:{if(r%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${r}`);if(r/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${r/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(r/2);for(let n=0;n<r/2;n++)this._transparency[n]=this.readUint16();break}case fc.INDEXED_COLOUR:{if(r>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${r} vs ${this._palette.length})`);let n=0;for(;n<r;n++){const a=this.readByte();this._palette[n].push(a)}for(;n<this._palette.length;n++)this._palette[n].push(255);break}case fc.UNKNOWN:case fc.GREYSCALE_ALPHA:case fc.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(r){const n=NW(this),a=this.readUint8();if(a!==CN.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${a}`);const s=this.readBytes(r-n.length-2);this._png.iccEmbeddedProfile={name:n,profile:eEe(s)}}decodepHYs(){const r=this.readUint32(),n=this.readUint32(),a=this.readByte();this._png.resolution={x:r,y:n,unit:a}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let r=0;r<this._numberOfFrames;r++){const n={sequenceNumber:this._frames[r].sequenceNumber,delayNumber:this._frames[r].delayNumber,delayDenominator:this._frames[r].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},a=this._frames.at(r);if(a){if(a.data=RM({data:a.data,width:a.width,height:a.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),r===0||a.xOffset===0&&a.yOffset===0&&a.width===this._png.width&&a.height===this._png.height)n.data=a.data;else{const s=this._apng.frames.at(r-1);this.disposeFrame(a,s,n),this.addFrameDataToCanvas(n,a)}this._apng.frames.push(n)}}return this._apng}disposeFrame(r,n,a){switch(r.disposeOp){case W2.NONE:break;case W2.BACKGROUND:for(let s=0;s<this._png.height;s++)for(let l=0;l<this._png.width;l++){const o=(s*r.width+l)*this._png.channels;for(let c=0;c<this._png.channels;c++)a.data[o+c]=0}break;case W2.PREVIOUS:a.data.set(n.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(r,n){const a=1<<this._png.depth,s=(l,o)=>{const c=((l+n.yOffset)*this._png.width+n.xOffset+o)*this._png.channels,d=(l*n.width+o)*this._png.channels;return{index:c,frameIndex:d}};switch(n.blendOp){case EN.SOURCE:for(let l=0;l<n.height;l++)for(let o=0;o<n.width;o++){const{index:c,frameIndex:d}=s(l,o);for(let f=0;f<this._png.channels;f++)r.data[c+f]=n.data[d+f]}break;case EN.OVER:for(let l=0;l<n.height;l++)for(let o=0;o<n.width;o++){const{index:c,frameIndex:d}=s(l,o);for(let f=0;f<this._png.channels;f++){const p=n.data[d+this._png.channels-1]/a,y=f%(this._png.channels-1)===0?1:n.data[d+f],g=Math.floor(p*y+(1-p)*r.data[c+f]);r.data[c+f]+=g}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){var n;if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const r=this._isAnimated?((n=this._frames)==null?void 0:n.at(0)).data:this._inflator.result;if(this._filterMethod!==BM.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===AN.NO_INTERLACE)this._png.data=RM({data:r,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===AN.ADAM7)this._png.data=oEe({data:r,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const r=this._inflator.result,n=this._frames.at(-1);n?n.data=r:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:W2.NONE,blendOp:EN.SOURCE,data:r}),this._inflator=new DM,this._writingDataChunks=!1}}function _Ee(e){if(e!==1&&e!==2&&e!==4&&e!==8&&e!==16)throw new Error(`invalid bit depth: ${e}`);return e}var UM;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.METRE=1]="METRE"})(UM||(UM={}));function SEe(e,t){return new NEe(e,t).decode()}var Fn=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function TN(){Fn.console&&typeof Fn.console.log=="function"&&Fn.console.log.apply(Fn.console,arguments)}var fs={log:TN,warn:function(e){Fn.console&&(typeof Fn.console.warn=="function"?Fn.console.warn.apply(Fn.console,arguments):TN.call(null,arguments))},error:function(e){Fn.console&&(typeof Fn.console.error=="function"?Fn.console.error.apply(Fn.console,arguments):TN(e))}};function ON(e,t,r){var n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){$f(n.response,t,r)},n.onerror=function(){fs.error("could not download file")},n.send()}function zM(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function K2(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var $f=Fn.saveAs||((typeof window>"u"?"undefined":Xa(window))!=="object"||window!==Fn?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,r){var n=Fn.URL||Fn.webkitURL,a=document.createElement("a");t=t||e.name||"download",a.download=t,a.rel="noopener",typeof e=="string"?(a.href=e,a.origin!==location.origin?zM(a.href)?ON(e,t,r):K2(a,a.target="_blank"):K2(a)):(a.href=n.createObjectURL(e),setTimeout(function(){n.revokeObjectURL(a.href)},4e4),setTimeout(function(){K2(a)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,r){if(t=t||e.name||"download",typeof e=="string")if(zM(e))ON(e,t,r);else{var n=document.createElement("a");n.href=e,n.target="_blank",setTimeout(function(){K2(n)})}else navigator.msSaveOrOpenBlob((function(a,s){return s===void 0?s={autoBom:!1}:Xa(s)!=="object"&&(fs.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a})(e,r),t)}:function(e,t,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof e=="string")return ON(e,t,r);var a=e.type==="application/octet-stream",s=/constructor/i.test(Fn.HTMLElement)||Fn.safari,l=/CriOS\/[\d]+/.test(navigator.userAgent);if((l||a&&s)&&(typeof FileReader>"u"?"undefined":Xa(FileReader))==="object"){var o=new FileReader;o.onloadend=function(){var f=o.result;f=l?f:f.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=f:location=f,n=null},o.readAsDataURL(e)}else{var c=Fn.URL||Fn.webkitURL,d=c.createObjectURL(e);n?n.location=d:location.href=d,n=null,setTimeout(function(){c.revokeObjectURL(d)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function _W(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(o){return[parseInt(o[1]),parseInt(o[2]),parseInt(o[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(o){return[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(o){return[parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16)]}}],n=0;n<r.length;n++){var a=r[n].re,s=r[n].process,l=a.exec(e);l&&(t=s(l),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var o=this.r.toString(16),c=this.g.toString(16),d=this.b.toString(16);return o.length==1&&(o="0"+o),c.length==1&&(c="0"+c),d.length==1&&(d="0"+d),"#"+o+c+d}}var sy=Fn.atob.bind(Fn),qM=Fn.btoa.bind(Fn);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function PN(e,t){var r=e[0],n=e[1],a=e[2],s=e[3];r=Wl(r,n,a,s,t[0],7,-680876936),s=Wl(s,r,n,a,t[1],12,-389564586),a=Wl(a,s,r,n,t[2],17,606105819),n=Wl(n,a,s,r,t[3],22,-1044525330),r=Wl(r,n,a,s,t[4],7,-176418897),s=Wl(s,r,n,a,t[5],12,1200080426),a=Wl(a,s,r,n,t[6],17,-1473231341),n=Wl(n,a,s,r,t[7],22,-45705983),r=Wl(r,n,a,s,t[8],7,1770035416),s=Wl(s,r,n,a,t[9],12,-1958414417),a=Wl(a,s,r,n,t[10],17,-42063),n=Wl(n,a,s,r,t[11],22,-1990404162),r=Wl(r,n,a,s,t[12],7,1804603682),s=Wl(s,r,n,a,t[13],12,-40341101),a=Wl(a,s,r,n,t[14],17,-1502002290),r=Kl(r,n=Wl(n,a,s,r,t[15],22,1236535329),a,s,t[1],5,-165796510),s=Kl(s,r,n,a,t[6],9,-1069501632),a=Kl(a,s,r,n,t[11],14,643717713),n=Kl(n,a,s,r,t[0],20,-373897302),r=Kl(r,n,a,s,t[5],5,-701558691),s=Kl(s,r,n,a,t[10],9,38016083),a=Kl(a,s,r,n,t[15],14,-660478335),n=Kl(n,a,s,r,t[4],20,-405537848),r=Kl(r,n,a,s,t[9],5,568446438),s=Kl(s,r,n,a,t[14],9,-1019803690),a=Kl(a,s,r,n,t[3],14,-187363961),n=Kl(n,a,s,r,t[8],20,1163531501),r=Kl(r,n,a,s,t[13],5,-1444681467),s=Kl(s,r,n,a,t[2],9,-51403784),a=Kl(a,s,r,n,t[7],14,1735328473),r=Gl(r,n=Kl(n,a,s,r,t[12],20,-1926607734),a,s,t[5],4,-378558),s=Gl(s,r,n,a,t[8],11,-2022574463),a=Gl(a,s,r,n,t[11],16,1839030562),n=Gl(n,a,s,r,t[14],23,-35309556),r=Gl(r,n,a,s,t[1],4,-1530992060),s=Gl(s,r,n,a,t[4],11,1272893353),a=Gl(a,s,r,n,t[7],16,-155497632),n=Gl(n,a,s,r,t[10],23,-1094730640),r=Gl(r,n,a,s,t[13],4,681279174),s=Gl(s,r,n,a,t[0],11,-358537222),a=Gl(a,s,r,n,t[3],16,-722521979),n=Gl(n,a,s,r,t[6],23,76029189),r=Gl(r,n,a,s,t[9],4,-640364487),s=Gl(s,r,n,a,t[12],11,-421815835),a=Gl(a,s,r,n,t[15],16,530742520),r=Xl(r,n=Gl(n,a,s,r,t[2],23,-995338651),a,s,t[0],6,-198630844),s=Xl(s,r,n,a,t[7],10,1126891415),a=Xl(a,s,r,n,t[14],15,-1416354905),n=Xl(n,a,s,r,t[5],21,-57434055),r=Xl(r,n,a,s,t[12],6,1700485571),s=Xl(s,r,n,a,t[3],10,-1894986606),a=Xl(a,s,r,n,t[10],15,-1051523),n=Xl(n,a,s,r,t[1],21,-2054922799),r=Xl(r,n,a,s,t[8],6,1873313359),s=Xl(s,r,n,a,t[15],10,-30611744),a=Xl(a,s,r,n,t[6],15,-1560198380),n=Xl(n,a,s,r,t[13],21,1309151649),r=Xl(r,n,a,s,t[4],6,-145523070),s=Xl(s,r,n,a,t[11],10,-1120210379),a=Xl(a,s,r,n,t[2],15,718787259),n=Xl(n,a,s,r,t[9],21,-343485551),e[0]=Jh(r,e[0]),e[1]=Jh(n,e[1]),e[2]=Jh(a,e[2]),e[3]=Jh(s,e[3])}function Hk(e,t,r,n,a,s){return t=Jh(Jh(t,e),Jh(n,s)),Jh(t<<a|t>>>32-a,r)}function Wl(e,t,r,n,a,s,l){return Hk(t&r|~t&n,e,t,a,s,l)}function Kl(e,t,r,n,a,s,l){return Hk(t&n|r&~n,e,t,a,s,l)}function Gl(e,t,r,n,a,s,l){return Hk(t^r^n,e,t,a,s,l)}function Xl(e,t,r,n,a,s,l){return Hk(r^(t|~n),e,t,a,s,l)}function SW(e){var t,r=e.length,n=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)PN(n,jEe(e.substring(t-64,t)));e=e.substring(t-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)a[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(a[t>>2]|=128<<(t%4<<3),t>55)for(PN(n,a),t=0;t<16;t++)a[t]=0;return a[14]=8*r,PN(n,a),n}function jEe(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return r}var HM="0123456789abcdef".split("");function CEe(e){for(var t="",r=0;r<4;r++)t+=HM[e>>8*r+4&15]+HM[e>>8*r&15];return t}function AEe(e){return String.fromCharCode(255&e,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function GS(e){return SW(e).map(AEe).join("")}var EEe=(function(e){for(var t=0;t<e.length;t++)e[t]=CEe(e[t]);return e.join("")})(SW("hello"))!="5d41402abc4b2a76b9719d911017c592";function Jh(e,t){if(EEe){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}return e+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function XS(e,t){var r,n,a,s;if(e!==r){for(var l=(a=e,s=1+(256/e.length|0),new Array(s+1).join(a)),o=[],c=0;c<256;c++)o[c]=c;var d=0;for(c=0;c<256;c++){var f=o[c];d=(d+f+l.charCodeAt(c))%256,o[c]=o[d],o[d]=f}r=e,n=o}else o=n;var p=t.length,y=0,g=0,N="";for(c=0;c<p;c++)g=(g+(f=o[y=(y+1)%256]))%256,o[y]=o[g],o[g]=f,l=o[(o[y]+o[g])%256],N+=String.fromCharCode(t.charCodeAt(c)^l);return N}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var $M={print:4,modify:8,copy:16,"annot-forms":32};function n1(e,t,r,n){this.v=1,this.r=2;var a=192;e.forEach(function(o){if($M.perm!==void 0)throw new Error("Invalid permission: "+o);a+=$M[o]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var s=(t+this.padding).substr(0,32),l=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,l),this.P=-(1+(255^a)),this.encryptionKey=GS(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=XS(this.encryptionKey,this.padding)}function a1(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",r=e.length,n=0;n<r;n++){var a=e.charCodeAt(n);t+=a<33||a===35||a===37||a===40||a===41||a===47||a===60||a===62||a===91||a===93||a===123||a===125||a>126?"#"+("0"+a.toString(16)).slice(-2):e[n]}return t}function VM(e){if(Xa(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(r,n,a){if(a=a||!1,typeof r!="string"||typeof n!="function"||typeof a!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(r)||(t[r]={});var s=Math.random().toString(35);return t[r][s]=[n,!!a],s},this.unsubscribe=function(r){for(var n in t)if(t[n][r])return delete t[n][r],Object.keys(t[n]).length===0&&delete t[n],!0;return!1},this.publish=function(r){if(t.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),a=[];for(var s in t[r]){var l=t[r][s];try{l[0].apply(e,n)}catch(o){Fn.console&&fs.error("jsPDF PubSub Error",o.message,o)}l[1]&&a.push(s)}a.length&&a.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function Cw(e){if(!(this instanceof Cw))return new Cw(e);var t="opacity,stroke-opacity".split(",");for(var r in e)e.hasOwnProperty(r)&&t.indexOf(r)>=0&&(this[r]=e[r]);this.id="",this.objectNumber=-1}function jW(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function Gf(e,t,r,n,a){if(!(this instanceof Gf))return new Gf(e,t,r,n,a);this.type=e==="axial"?2:3,this.coords=t,this.colors=r,jW.call(this,n,a)}function o1(e,t,r,n,a){if(!(this instanceof o1))return new o1(e,t,r,n,a);this.boundingBox=e,this.xStep=t,this.yStep=r,this.stream="",this.cloneIndex=0,jW.call(this,n,a)}function rn(e){var t,r=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],a=arguments[2],s=arguments[3],l=[],o=1,c=16,d="S",f=null;Xa(e=e||{})==="object"&&(r=e.orientation,n=e.unit||n,a=e.format||a,s=e.compress||e.compressPdf||s,(f=e.encryption||null)!==null&&(f.userPassword=f.userPassword||"",f.ownerPassword=f.ownerPassword||"",f.userPermissions=f.userPermissions||[]),o=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(c=e.floatPrecision),d=e.defaultPathOperation||"S"),l=e.filters||(s===!0?["FlateEncode"]:l),n=n||"mm",r=(""+(r||"P")).toLowerCase();var p=e.putOnlyUsedFonts||!1,y={},g={internal:{},__private__:{}};g.__private__.PubSub=VM;var N="1.3",w=g.__private__.getPdfVersion=function(){return N};g.__private__.setPdfVersion=function(G){N=G};var k={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};g.__private__.getPageFormats=function(){return k};var S=g.__private__.getPageFormat=function(G){return k[G]};a=a||"a4";var O="compat",E="advanced",D=O;function H(){this.saveGraphicsState(),ye(new We(Gt,0,0,-Gt,0,oc()*Gt).toString()+" cm"),this.setFontSize(this.getFontSize()/Gt),d="n",D=E}function W(){this.restoreGraphicsState(),d="S",D=O}var R=g.__private__.combineFontStyleAndFontWeight=function(G,ge){if(G=="bold"&&ge=="normal"||G=="bold"&&ge==400||G=="normal"&&ge=="italic"||G=="bold"&&ge=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return ge&&(G=ge==400||ge==="normal"?G==="italic"?"italic":"normal":ge!=700&&ge!=="bold"||G!=="normal"?(ge==700?"bold":ge)+""+G:"bold"),G};g.advancedAPI=function(G){var ge=D===O;return ge&&H.call(this),typeof G!="function"||(G(this),ge&&W.call(this)),this},g.compatAPI=function(G){var ge=D===E;return ge&&W.call(this),typeof G!="function"||(G(this),ge&&H.call(this)),this},g.isAdvancedAPI=function(){return D===E};var z,U=function(G){if(D!==E)throw new Error(G+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},Z=g.roundToPrecision=g.__private__.roundToPrecision=function(G,ge){var qe=t||ge;if(isNaN(G)||isNaN(qe))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return G.toFixed(qe).replace(/0+$/,"")};z=g.hpf=g.__private__.hpf=typeof c=="number"?function(G){if(isNaN(G))throw new Error("Invalid argument passed to jsPDF.hpf");return Z(G,c)}:c==="smart"?function(G){if(isNaN(G))throw new Error("Invalid argument passed to jsPDF.hpf");return Z(G,G>-1&&G<1?16:5)}:function(G){if(isNaN(G))throw new Error("Invalid argument passed to jsPDF.hpf");return Z(G,16)};var q=g.f2=g.__private__.f2=function(G){if(isNaN(G))throw new Error("Invalid argument passed to jsPDF.f2");return Z(G,2)},K=g.__private__.f3=function(G){if(isNaN(G))throw new Error("Invalid argument passed to jsPDF.f3");return Z(G,3)},Q=g.scale=g.__private__.scale=function(G){if(isNaN(G))throw new Error("Invalid argument passed to jsPDF.scale");return D===O?G*Gt:D===E?G:void 0},re=function(G){return Q((function(ge){return D===O?oc()-ge:D===E?ge:void 0})(G))};g.__private__.setPrecision=g.setPrecision=function(G){typeof parseInt(G,10)=="number"&&(t=parseInt(G,10))};var ae,de="00000000000000000000000000000000",he=g.__private__.getFileId=function(){return de},Se=g.__private__.setFileId=function(G){return de=G!==void 0&&/^[a-fA-F0-9]{32}$/.test(G)?G.toUpperCase():de.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),f!==null&&(_r=new n1(f.userPermissions,f.userPassword,f.ownerPassword,de)),de};g.setFileId=function(G){return Se(G),this},g.getFileId=function(){return he()};var ke=g.__private__.convertDateToPDFDate=function(G){var ge=G.getTimezoneOffset(),qe=ge<0?"+":"-",Je=Math.floor(Math.abs(ge/60)),pt=Math.abs(ge%60),zt=[qe,Y(Je),"'",Y(pt),"'"].join("");return["D:",G.getFullYear(),Y(G.getMonth()+1),Y(G.getDate()),Y(G.getHours()),Y(G.getMinutes()),Y(G.getSeconds()),zt].join("")},Le=g.__private__.convertPDFDateToDate=function(G){var ge=parseInt(G.substr(2,4),10),qe=parseInt(G.substr(6,2),10)-1,Je=parseInt(G.substr(8,2),10),pt=parseInt(G.substr(10,2),10),zt=parseInt(G.substr(12,2),10),ir=parseInt(G.substr(14,2),10);return new Date(ge,qe,Je,pt,zt,ir,0)},fe=g.__private__.setCreationDate=function(G){var ge;if(G===void 0&&(G=new Date),G instanceof Date)ge=ke(G);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(G))throw new Error("Invalid argument passed to jsPDF.setCreationDate");ge=G}return ae=ge},F=g.__private__.getCreationDate=function(G){var ge=ae;return G==="jsDate"&&(ge=Le(ae)),ge};g.setCreationDate=function(G){return fe(G),this},g.getCreationDate=function(G){return F(G)};var te,Y=g.__private__.padd2=function(G){return("0"+parseInt(G)).slice(-2)},ne=g.__private__.padd2Hex=function(G){return("00"+(G=G.toString())).substr(G.length)},ee=0,Ce=[],me=[],se=0,je=[],be=[],ie=!1,Te=me;g.__private__.setCustomOutputDestination=function(G){ie=!0,Te=G};var De=function(G){ie||(Te=G)};g.__private__.resetCustomOutputDestination=function(){ie=!1,Te=me};var ye=g.__private__.out=function(G){return G=G.toString(),se+=G.length+1,Te.push(G),Te},rt=g.__private__.write=function(G){return ye(arguments.length===1?G.toString():Array.prototype.join.call(arguments," "))},st=g.__private__.getArrayBuffer=function(G){for(var ge=G.length,qe=new ArrayBuffer(ge),Je=new Uint8Array(qe);ge--;)Je[ge]=G.charCodeAt(ge);return qe},dt=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];g.__private__.getStandardFonts=function(){return dt};var et=e.fontSize||16;g.__private__.setFontSize=g.setFontSize=function(G){return et=D===E?G/Gt:G,this};var lt,Ve=g.__private__.getFontSize=g.getFontSize=function(){return D===O?et:et*Gt},Vt=e.R2L||!1;g.__private__.setR2L=g.setR2L=function(G){return Vt=G,this},g.__private__.getR2L=g.getR2L=function(){return Vt};var Mt,mr=g.__private__.setZoomMode=function(G){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(G))lt=G;else if(isNaN(G)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(G)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+G+'" is not recognized.');lt=G}else lt=parseInt(G,10)};g.__private__.getZoomMode=function(){return lt};var xr,sr=g.__private__.setPageMode=function(G){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(G)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+G+'" is not recognized.');Mt=G};g.__private__.getPageMode=function(){return Mt};var Ir=g.__private__.setLayoutMode=function(G){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(G)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+G+'" is not recognized.');xr=G};g.__private__.getLayoutMode=function(){return xr},g.__private__.setDisplayMode=g.setDisplayMode=function(G,ge,qe){return mr(G),Ir(ge),sr(qe),this};var er={title:"",subject:"",author:"",keywords:"",creator:""};g.__private__.getDocumentProperty=function(G){if(Object.keys(er).indexOf(G)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return er[G]},g.__private__.getDocumentProperties=function(){return er},g.__private__.setDocumentProperties=g.setProperties=g.setDocumentProperties=function(G){for(var ge in er)er.hasOwnProperty(ge)&&G[ge]&&(er[ge]=G[ge]);return this},g.__private__.setDocumentProperty=function(G,ge){if(Object.keys(er).indexOf(G)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return er[G]=ge};var Xt,Gt,ur,wr,lr,mt={},kr={},Ke=[],vt={},Kt={},tr={},Pr={},Nr=null,Ge=0,Ot=[],hr=new VM(g),$r=e.hotfixes||[],Dr={},Yt={},Mr=[],We=function G(ge,qe,Je,pt,zt,ir){if(!(this instanceof G))return new G(ge,qe,Je,pt,zt,ir);isNaN(ge)&&(ge=1),isNaN(qe)&&(qe=0),isNaN(Je)&&(Je=0),isNaN(pt)&&(pt=1),isNaN(zt)&&(zt=0),isNaN(ir)&&(ir=0),this._matrix=[ge,qe,Je,pt,zt,ir]};Object.defineProperty(We.prototype,"sx",{get:function(){return this._matrix[0]},set:function(G){this._matrix[0]=G}}),Object.defineProperty(We.prototype,"shy",{get:function(){return this._matrix[1]},set:function(G){this._matrix[1]=G}}),Object.defineProperty(We.prototype,"shx",{get:function(){return this._matrix[2]},set:function(G){this._matrix[2]=G}}),Object.defineProperty(We.prototype,"sy",{get:function(){return this._matrix[3]},set:function(G){this._matrix[3]=G}}),Object.defineProperty(We.prototype,"tx",{get:function(){return this._matrix[4]},set:function(G){this._matrix[4]=G}}),Object.defineProperty(We.prototype,"ty",{get:function(){return this._matrix[5]},set:function(G){this._matrix[5]=G}}),Object.defineProperty(We.prototype,"a",{get:function(){return this._matrix[0]},set:function(G){this._matrix[0]=G}}),Object.defineProperty(We.prototype,"b",{get:function(){return this._matrix[1]},set:function(G){this._matrix[1]=G}}),Object.defineProperty(We.prototype,"c",{get:function(){return this._matrix[2]},set:function(G){this._matrix[2]=G}}),Object.defineProperty(We.prototype,"d",{get:function(){return this._matrix[3]},set:function(G){this._matrix[3]=G}}),Object.defineProperty(We.prototype,"e",{get:function(){return this._matrix[4]},set:function(G){this._matrix[4]=G}}),Object.defineProperty(We.prototype,"f",{get:function(){return this._matrix[5]},set:function(G){this._matrix[5]=G}}),Object.defineProperty(We.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(We.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(We.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(We.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),We.prototype.join=function(G){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(z).join(G)},We.prototype.multiply=function(G){var ge=G.sx*this.sx+G.shy*this.shx,qe=G.sx*this.shy+G.shy*this.sy,Je=G.shx*this.sx+G.sy*this.shx,pt=G.shx*this.shy+G.sy*this.sy,zt=G.tx*this.sx+G.ty*this.shx+this.tx,ir=G.tx*this.shy+G.ty*this.sy+this.ty;return new We(ge,qe,Je,pt,zt,ir)},We.prototype.decompose=function(){var G=this.sx,ge=this.shy,qe=this.shx,Je=this.sy,pt=this.tx,zt=this.ty,ir=Math.sqrt(G*G+ge*ge),qr=(G/=ir)*qe+(ge/=ir)*Je;qe-=G*qr,Je-=ge*qr;var Tr=Math.sqrt(qe*qe+Je*Je);return qr/=Tr,G*(Je/=Tr)<ge*(qe/=Tr)&&(G=-G,ge=-ge,qr=-qr,ir=-ir),{scale:new We(ir,0,0,Tr,0,0),translate:new We(1,0,0,1,pt,zt),rotate:new We(G,ge,-ge,G,0,0),skew:new We(1,0,qr,1,0,0)}},We.prototype.toString=function(G){return this.join(" ")},We.prototype.inversed=function(){var G=this.sx,ge=this.shy,qe=this.shx,Je=this.sy,pt=this.tx,zt=this.ty,ir=1/(G*Je-ge*qe),qr=Je*ir,Tr=-ge*ir,wn=-qe*ir,Hr=G*ir;return new We(qr,Tr,wn,Hr,-qr*pt-wn*zt,-Tr*pt-Hr*zt)},We.prototype.applyToPoint=function(G){var ge=G.x*this.sx+G.y*this.shx+this.tx,qe=G.x*this.shy+G.y*this.sy+this.ty;return new os(ge,qe)},We.prototype.applyToRectangle=function(G){var ge=this.applyToPoint(G),qe=this.applyToPoint(new os(G.x+G.w,G.y+G.h));return new Io(ge.x,ge.y,qe.x-ge.x,qe.y-ge.y)},We.prototype.clone=function(){var G=this.sx,ge=this.shy,qe=this.shx,Je=this.sy,pt=this.tx,zt=this.ty;return new We(G,ge,qe,Je,pt,zt)},g.Matrix=We;var Qt=g.matrixMult=function(G,ge){return ge.multiply(G)},Cr=new We(1,0,0,1,0,0);g.unitMatrix=g.identityMatrix=Cr;var gr=function(G,ge){if(!Kt[G]){var qe=(ge instanceof Gf?"Sh":"P")+(Object.keys(vt).length+1).toString(10);ge.id=qe,Kt[G]=qe,vt[qe]=ge,hr.publish("addPattern",ge)}};g.ShadingPattern=Gf,g.TilingPattern=o1,g.addShadingPattern=function(G,ge){return U("addShadingPattern()"),gr(G,ge),this},g.beginTilingPattern=function(G){U("beginTilingPattern()"),Mc(G.boundingBox[0],G.boundingBox[1],G.boundingBox[2]-G.boundingBox[0],G.boundingBox[3]-G.boundingBox[1],G.matrix)},g.endTilingPattern=function(G,ge){U("endTilingPattern()"),ge.stream=be[te].join(`
`),gr(G,ge),hr.publish("endTilingPattern",ge),Mr.pop().restore()};var _n,Rr=g.__private__.newObject=function(){var G=Sn();return we(G,!0),G},Sn=g.__private__.newObjectDeferred=function(){return ee++,Ce[ee]=function(){return se},ee},we=function(G,ge){return ge=typeof ge=="boolean"&&ge,Ce[G]=se,ge&&ye(G+" 0 obj"),G},Ne=g.__private__.newAdditionalObject=function(){var G={objId:Sn(),content:""};return je.push(G),G},Me=Sn(),le=Sn(),ve=g.__private__.decodeColorString=function(G){var ge=G.split(" ");if(ge.length!==2||ge[1]!=="g"&&ge[1]!=="G")ge.length!==5||ge[4]!=="k"&&ge[4]!=="K"||(ge=[(1-ge[0])*(1-ge[3]),(1-ge[1])*(1-ge[3]),(1-ge[2])*(1-ge[3]),"r"]);else{var qe=parseFloat(ge[0]);ge=[qe,qe,qe,"r"]}for(var Je="#",pt=0;pt<3;pt++)Je+=("0"+Math.floor(255*parseFloat(ge[pt])).toString(16)).slice(-2);return Je},Oe=g.__private__.encodeColorString=function(G){var ge;typeof G=="string"&&(G={ch1:G});var qe=G.ch1,Je=G.ch2,pt=G.ch3,zt=G.ch4,ir=G.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof qe=="string"&&qe.charAt(0)!=="#"){var qr=new _W(qe);if(qr.ok)qe=qr.toHex();else if(!/^\d*\.?\d*$/.test(qe))throw new Error('Invalid color "'+qe+'" passed to jsPDF.encodeColorString.')}if(typeof qe=="string"&&/^#[0-9A-Fa-f]{3}$/.test(qe)&&(qe="#"+qe[1]+qe[1]+qe[2]+qe[2]+qe[3]+qe[3]),typeof qe=="string"&&/^#[0-9A-Fa-f]{6}$/.test(qe)){var Tr=parseInt(qe.substr(1),16);qe=Tr>>16&255,Je=Tr>>8&255,pt=255&Tr}if(Je===void 0||zt===void 0&&qe===Je&&Je===pt)ge=typeof qe=="string"?qe+" "+ir[0]:G.precision===2?q(qe/255)+" "+ir[0]:K(qe/255)+" "+ir[0];else if(zt===void 0||Xa(zt)==="object"){if(zt&&!isNaN(zt.a)&&zt.a===0)return["1.","1.","1.",ir[1]].join(" ");ge=typeof qe=="string"?[qe,Je,pt,ir[1]].join(" "):G.precision===2?[q(qe/255),q(Je/255),q(pt/255),ir[1]].join(" "):[K(qe/255),K(Je/255),K(pt/255),ir[1]].join(" ")}else ge=typeof qe=="string"?[qe,Je,pt,zt,ir[2]].join(" "):G.precision===2?[q(qe),q(Je),q(pt),q(zt),ir[2]].join(" "):[K(qe),K(Je),K(pt),K(zt),ir[2]].join(" ");return ge},nt=g.__private__.getFilters=function(){return l},wt=g.__private__.putStream=function(G){var ge=(G=G||{}).data||"",qe=G.filters||nt(),Je=G.alreadyAppliedFilters||[],pt=G.addLength1||!1,zt=ge.length,ir=G.objectId,qr=function(Hs){return Hs};if(f!==null&&ir===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");f!==null&&(qr=_r.encryptor(ir,0));var Tr={};qe===!0&&(qe=["FlateEncode"]);var wn=G.additionalKeyValues||[],Hr=(Tr=rn.API.processDataByFilters!==void 0?rn.API.processDataByFilters(ge,qe):{data:ge,reverseChain:[]}).reverseChain+(Array.isArray(Je)?Je.join(" "):Je.toString());if(Tr.data.length!==0&&(wn.push({key:"Length",value:Tr.data.length}),pt===!0&&wn.push({key:"Length1",value:zt})),Hr.length!=0)if(Hr.split("/").length-1==1)wn.push({key:"Filter",value:Hr});else{wn.push({key:"Filter",value:"["+Hr+"]"});for(var aa=0;aa<wn.length;aa+=1)if(wn[aa].key==="DecodeParms"){for(var _a=[],jn=0;jn<Tr.reverseChain.split("/").length-1;jn+=1)_a.push("null");_a.push(wn[aa].value),wn[aa].value="["+_a.join(" ")+"]"}}ye("<<");for(var Or=0;Or<wn.length;Or++)ye("/"+wn[Or].key+" "+wn[Or].value);ye(">>"),Tr.data.length!==0&&(ye("stream"),ye(qr(Tr.data)),ye("endstream"))},ft=g.__private__.putPage=function(G){var ge=G.number,qe=G.data,Je=G.objId,pt=G.contentsObjId;we(Je,!0),ye("<</Type /Page"),ye("/Parent "+G.rootDictionaryObjId+" 0 R"),ye("/Resources "+G.resourceDictionaryObjId+" 0 R"),ye("/MediaBox ["+parseFloat(z(G.mediaBox.bottomLeftX))+" "+parseFloat(z(G.mediaBox.bottomLeftY))+" "+z(G.mediaBox.topRightX)+" "+z(G.mediaBox.topRightY)+"]"),G.cropBox!==null&&ye("/CropBox ["+z(G.cropBox.bottomLeftX)+" "+z(G.cropBox.bottomLeftY)+" "+z(G.cropBox.topRightX)+" "+z(G.cropBox.topRightY)+"]"),G.bleedBox!==null&&ye("/BleedBox ["+z(G.bleedBox.bottomLeftX)+" "+z(G.bleedBox.bottomLeftY)+" "+z(G.bleedBox.topRightX)+" "+z(G.bleedBox.topRightY)+"]"),G.trimBox!==null&&ye("/TrimBox ["+z(G.trimBox.bottomLeftX)+" "+z(G.trimBox.bottomLeftY)+" "+z(G.trimBox.topRightX)+" "+z(G.trimBox.topRightY)+"]"),G.artBox!==null&&ye("/ArtBox ["+z(G.artBox.bottomLeftX)+" "+z(G.artBox.bottomLeftY)+" "+z(G.artBox.topRightX)+" "+z(G.artBox.topRightY)+"]"),typeof G.userUnit=="number"&&G.userUnit!==1&&ye("/UserUnit "+G.userUnit),hr.publish("putPage",{objId:Je,pageContext:Ot[ge],pageNumber:ge,page:qe}),ye("/Contents "+pt+" 0 R"),ye(">>"),ye("endobj");var zt=qe.join(`
`);return D===E&&(zt+=`
Q`),we(pt,!0),wt({data:zt,filters:nt(),objectId:pt}),ye("endobj"),Je},ht=g.__private__.putPages=function(){var G,ge,qe=[];for(G=1;G<=Ge;G++)Ot[G].objId=Sn(),Ot[G].contentsObjId=Sn();for(G=1;G<=Ge;G++)qe.push(ft({number:G,data:be[G],objId:Ot[G].objId,contentsObjId:Ot[G].contentsObjId,mediaBox:Ot[G].mediaBox,cropBox:Ot[G].cropBox,bleedBox:Ot[G].bleedBox,trimBox:Ot[G].trimBox,artBox:Ot[G].artBox,userUnit:Ot[G].userUnit,rootDictionaryObjId:Me,resourceDictionaryObjId:le}));we(Me,!0),ye("<</Type /Pages");var Je="/Kids [";for(ge=0;ge<Ge;ge++)Je+=qe[ge]+" 0 R ";ye(Je+"]"),ye("/Count "+Ge),ye(">>"),ye("endobj"),hr.publish("postPutPages")},bt=function(G){hr.publish("putFont",{font:G,out:ye,newObject:Rr,putStream:wt}),G.isAlreadyPutted!==!0&&(G.objectNumber=Rr(),ye("<<"),ye("/Type /Font"),ye("/BaseFont /"+a1(G.postScriptName)),ye("/Subtype /Type1"),typeof G.encoding=="string"&&ye("/Encoding /"+G.encoding),ye("/FirstChar 32"),ye("/LastChar 255"),ye(">>"),ye("endobj"))},Ut=function(G){G.objectNumber=Rr();var ge=[];ge.push({key:"Type",value:"/XObject"}),ge.push({key:"Subtype",value:"/Form"}),ge.push({key:"BBox",value:"["+[z(G.x),z(G.y),z(G.x+G.width),z(G.y+G.height)].join(" ")+"]"}),ge.push({key:"Matrix",value:"["+G.matrix.toString()+"]"});var qe=G.pages[1].join(`
`);wt({data:qe,additionalKeyValues:ge,objectId:G.objectNumber}),ye("endobj")},rr=function(G,ge){ge||(ge=21);var qe=Rr(),Je=(function(ir,qr){var Tr,wn=[],Hr=1/(qr-1);for(Tr=0;Tr<1;Tr+=Hr)wn.push(Tr);if(wn.push(1),ir[0].offset!=0){var aa={offset:0,color:ir[0].color};ir.unshift(aa)}if(ir[ir.length-1].offset!=1){var _a={offset:1,color:ir[ir.length-1].color};ir.push(_a)}for(var jn="",Or=0,Hs=0;Hs<wn.length;Hs++){for(Tr=wn[Hs];Tr>ir[Or+1].offset;)Or++;var In=ir[Or].offset,cs=(Tr-In)/(ir[Or+1].offset-In),fi=ir[Or].color,nl=ir[Or+1].color;jn+=ne(Math.round((1-cs)*fi[0]+cs*nl[0]).toString(16))+ne(Math.round((1-cs)*fi[1]+cs*nl[1]).toString(16))+ne(Math.round((1-cs)*fi[2]+cs*nl[2]).toString(16))}return jn.trim()})(G.colors,ge),pt=[];pt.push({key:"FunctionType",value:"0"}),pt.push({key:"Domain",value:"[0.0 1.0]"}),pt.push({key:"Size",value:"["+ge+"]"}),pt.push({key:"BitsPerSample",value:"8"}),pt.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),pt.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),wt({data:Je,additionalKeyValues:pt,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:qe}),ye("endobj"),G.objectNumber=Rr(),ye("<< /ShadingType "+G.type),ye("/ColorSpace /DeviceRGB");var zt="/Coords ["+z(parseFloat(G.coords[0]))+" "+z(parseFloat(G.coords[1]))+" ";G.type===2?zt+=z(parseFloat(G.coords[2]))+" "+z(parseFloat(G.coords[3])):zt+=z(parseFloat(G.coords[2]))+" "+z(parseFloat(G.coords[3]))+" "+z(parseFloat(G.coords[4]))+" "+z(parseFloat(G.coords[5])),ye(zt+="]"),G.matrix&&ye("/Matrix ["+G.matrix.toString()+"]"),ye("/Function "+qe+" 0 R"),ye("/Extend [true true]"),ye(">>"),ye("endobj")},Jt=function(G,ge){var qe=Sn(),Je=Rr();ge.push({resourcesOid:qe,objectOid:Je}),G.objectNumber=Je;var pt=[];pt.push({key:"Type",value:"/Pattern"}),pt.push({key:"PatternType",value:"1"}),pt.push({key:"PaintType",value:"1"}),pt.push({key:"TilingType",value:"1"}),pt.push({key:"BBox",value:"["+G.boundingBox.map(z).join(" ")+"]"}),pt.push({key:"XStep",value:z(G.xStep)}),pt.push({key:"YStep",value:z(G.yStep)}),pt.push({key:"Resources",value:qe+" 0 R"}),G.matrix&&pt.push({key:"Matrix",value:"["+G.matrix.toString()+"]"}),wt({data:G.stream,additionalKeyValues:pt,objectId:G.objectNumber}),ye("endobj")},dr=function(G){for(var ge in G.objectNumber=Rr(),ye("<<"),G)switch(ge){case"opacity":ye("/ca "+q(G[ge]));break;case"stroke-opacity":ye("/CA "+q(G[ge]))}ye(">>"),ye("endobj")},pr=function(G){we(G.resourcesOid,!0),ye("<<"),ye("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),(function(){for(var ge in ye("/Font <<"),mt)mt.hasOwnProperty(ge)&&(p===!1||p===!0&&y.hasOwnProperty(ge))&&ye("/"+ge+" "+mt[ge].objectNumber+" 0 R");ye(">>")})(),(function(){if(Object.keys(vt).length>0){for(var ge in ye("/Shading <<"),vt)vt.hasOwnProperty(ge)&&vt[ge]instanceof Gf&&vt[ge].objectNumber>=0&&ye("/"+ge+" "+vt[ge].objectNumber+" 0 R");hr.publish("putShadingPatternDict"),ye(">>")}})(),(function(ge){if(Object.keys(vt).length>0){for(var qe in ye("/Pattern <<"),vt)vt.hasOwnProperty(qe)&&vt[qe]instanceof g.TilingPattern&&vt[qe].objectNumber>=0&&vt[qe].objectNumber<ge&&ye("/"+qe+" "+vt[qe].objectNumber+" 0 R");hr.publish("putTilingPatternDict"),ye(">>")}})(G.objectOid),(function(){if(Object.keys(tr).length>0){var ge;for(ge in ye("/ExtGState <<"),tr)tr.hasOwnProperty(ge)&&tr[ge].objectNumber>=0&&ye("/"+ge+" "+tr[ge].objectNumber+" 0 R");hr.publish("putGStateDict"),ye(">>")}})(),(function(){for(var ge in ye("/XObject <<"),Dr)Dr.hasOwnProperty(ge)&&Dr[ge].objectNumber>=0&&ye("/"+ge+" "+Dr[ge].objectNumber+" 0 R");hr.publish("putXobjectDict"),ye(">>")})(),ye(">>"),ye("endobj")},Ar=function(G){kr[G.fontName]=kr[G.fontName]||{},kr[G.fontName][G.fontStyle]=G.id},It=function(G,ge,qe,Je,pt){var zt={id:"F"+(Object.keys(mt).length+1).toString(10),postScriptName:G,fontName:ge,fontStyle:qe,encoding:Je,isStandardFont:pt||!1,metadata:{}};return hr.publish("addFont",{font:zt,instance:this}),mt[zt.id]=zt,Ar(zt),zt.id},Un=g.__private__.pdfEscape=g.pdfEscape=function(G,ge){return(function(qe,Je){var pt,zt,ir,qr,Tr,wn,Hr,aa,_a;if(ir=(Je=Je||{}).sourceEncoding||"Unicode",Tr=Je.outputEncoding,(Je.autoencode||Tr)&&mt[Xt].metadata&&mt[Xt].metadata[ir]&&mt[Xt].metadata[ir].encoding&&(qr=mt[Xt].metadata[ir].encoding,!Tr&&mt[Xt].encoding&&(Tr=mt[Xt].encoding),!Tr&&qr.codePages&&(Tr=qr.codePages[0]),typeof Tr=="string"&&(Tr=qr[Tr]),Tr)){for(Hr=!1,wn=[],pt=0,zt=qe.length;pt<zt;pt++)(aa=Tr[qe.charCodeAt(pt)])?wn.push(String.fromCharCode(aa)):wn.push(qe[pt]),wn[pt].charCodeAt(0)>>8&&(Hr=!0);qe=wn.join("")}for(pt=qe.length;Hr===void 0&&pt!==0;)qe.charCodeAt(pt-1)>>8&&(Hr=!0),pt--;if(!Hr)return qe;for(wn=Je.noBOM?[]:[254,255],pt=0,zt=qe.length;pt<zt;pt++){if((_a=(aa=qe.charCodeAt(pt))>>8)>>8)throw new Error("Character at position "+pt+" of string '"+qe+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");wn.push(_a),wn.push(aa-(_a<<8))}return String.fromCharCode.apply(void 0,wn)})(G,ge).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},en=g.__private__.beginPage=function(G){be[++Ge]=[],Ot[Ge]={objId:0,contentsObjId:0,userUnit:Number(o),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(G[0]),topRightY:Number(G[1])}},cn(Ge),De(be[te])},Na=function(G,ge){var qe,Je,pt;switch(r=ge||r,typeof G=="string"&&(qe=S(G.toLowerCase()),Array.isArray(qe)&&(Je=qe[0],pt=qe[1])),Array.isArray(G)&&(Je=G[0]*Gt,pt=G[1]*Gt),isNaN(Je)&&(Je=a[0],pt=a[1]),(Je>14400||pt>14400)&&(fs.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Je=Math.min(14400,Je),pt=Math.min(14400,pt)),a=[Je,pt],r.substr(0,1)){case"l":pt>Je&&(a=[pt,Je]);break;case"p":Je>pt&&(a=[pt,Je])}en(a),Ll(kd),ye(rl),Nd!==0&&ye(Nd+" J"),xs!==0&&ye(xs+" j"),hr.publish("addPage",{pageNumber:Ge})},La=function(G){G>0&&G<=Ge&&(be.splice(G,1),Ot.splice(G,1),Ge--,te>Ge&&(te=Ge),this.setPage(te))},cn=function(G){G>0&&G<=Ge&&(te=G)},An=g.__private__.getNumberOfPages=g.getNumberOfPages=function(){return be.length-1},On=function(G,ge,qe){var Je,pt=void 0;return qe=qe||{},G=G!==void 0?G:mt[Xt].fontName,ge=ge!==void 0?ge:mt[Xt].fontStyle,Je=G.toLowerCase(),kr[Je]!==void 0&&kr[Je][ge]!==void 0?pt=kr[Je][ge]:kr[G]!==void 0&&kr[G][ge]!==void 0?pt=kr[G][ge]:qe.disableWarning===!1&&fs.warn("Unable to look up font label for font '"+G+"', '"+ge+"'. Refer to getFontList() for available fonts."),pt||qe.noFallback||(pt=kr.times[ge])==null&&(pt=kr.times.normal),pt},is=g.__private__.putInfo=function(){var G=Rr(),ge=function(Je){return Je};for(var qe in f!==null&&(ge=_r.encryptor(G,0)),ye("<<"),ye("/Producer ("+Un(ge("jsPDF "+rn.version))+")"),er)er.hasOwnProperty(qe)&&er[qe]&&ye("/"+qe.substr(0,1).toUpperCase()+qe.substr(1)+" ("+Un(ge(er[qe]))+")");ye("/CreationDate ("+Un(ge(ae))+")"),ye(">>"),ye("endobj")},To=g.__private__.putCatalog=function(G){var ge=(G=G||{}).rootDictionaryObjId||Me;switch(Rr(),ye("<<"),ye("/Type /Catalog"),ye("/Pages "+ge+" 0 R"),lt||(lt="fullwidth"),lt){case"fullwidth":ye("/OpenAction [3 0 R /FitH null]");break;case"fullheight":ye("/OpenAction [3 0 R /FitV null]");break;case"fullpage":ye("/OpenAction [3 0 R /Fit]");break;case"original":ye("/OpenAction [3 0 R /XYZ null null 1]");break;default:var qe=""+lt;qe.substr(qe.length-1)==="%"&&(lt=parseInt(lt)/100),typeof lt=="number"&&ye("/OpenAction [3 0 R /XYZ null null "+q(lt)+"]")}switch(xr||(xr="continuous"),xr){case"continuous":ye("/PageLayout /OneColumn");break;case"single":ye("/PageLayout /SinglePage");break;case"two":case"twoleft":ye("/PageLayout /TwoColumnLeft");break;case"tworight":ye("/PageLayout /TwoColumnRight")}Mt&&ye("/PageMode /"+Mt),hr.publish("putCatalog"),ye(">>"),ye("endobj")},ln=g.__private__.putTrailer=function(){ye("trailer"),ye("<<"),ye("/Size "+(ee+1)),ye("/Root "+ee+" 0 R"),ye("/Info "+(ee-1)+" 0 R"),f!==null&&ye("/Encrypt "+_r.oid+" 0 R"),ye("/ID [ <"+de+"> <"+de+"> ]"),ye(">>")},ta=g.__private__.putHeader=function(){ye("%PDF-"+N),ye("%")},el=g.__private__.putXRef=function(){var G="0000000000";ye("xref"),ye("0 "+(ee+1)),ye("0000000000 65535 f ");for(var ge=1;ge<=ee;ge++)typeof Ce[ge]=="function"?ye((G+Ce[ge]()).slice(-10)+" 00000 n "):Ce[ge]!==void 0?ye((G+Ce[ge]).slice(-10)+" 00000 n "):ye("0000000000 00000 n ")},lo=g.__private__.buildDocument=function(){var G;ee=0,se=0,me=[],Ce=[],je=[],Me=Sn(),le=Sn(),De(me),hr.publish("buildDocument"),ta(),ht(),(function(){hr.publish("putAdditionalObjects");for(var qe=0;qe<je.length;qe++){var Je=je[qe];we(Je.objId,!0),ye(Je.content),ye("endobj")}hr.publish("postPutAdditionalObjects")})(),G=[],(function(){for(var qe in mt)mt.hasOwnProperty(qe)&&(p===!1||p===!0&&y.hasOwnProperty(qe))&&bt(mt[qe])})(),(function(){var qe;for(qe in tr)tr.hasOwnProperty(qe)&&dr(tr[qe])})(),(function(){for(var qe in Dr)Dr.hasOwnProperty(qe)&&Ut(Dr[qe])})(),(function(qe){var Je;for(Je in vt)vt.hasOwnProperty(Je)&&(vt[Je]instanceof Gf?rr(vt[Je]):vt[Je]instanceof o1&&Jt(vt[Je],qe))})(G),hr.publish("putResources"),G.forEach(pr),pr({resourcesOid:le,objectOid:Number.MAX_SAFE_INTEGER}),hr.publish("postPutResources"),f!==null&&(_r.oid=Rr(),ye("<<"),ye("/Filter /Standard"),ye("/V "+_r.v),ye("/R "+_r.r),ye("/U <"+_r.toHexString(_r.U)+">"),ye("/O <"+_r.toHexString(_r.O)+">"),ye("/P "+_r.P),ye(">>"),ye("endobj")),is(),To();var ge=se;return el(),ln(),ye("startxref"),ye(""+ge),ye("%%EOF"),De(be[te]),me.join(`
`)},pa=g.__private__.getBlob=function(G){return new Blob([st(G)],{type:"application/pdf"})},at=g.output=g.__private__.output=(_n=function(G,ge){switch(typeof(ge=ge||{})=="string"?ge={filename:ge}:ge.filename=ge.filename||"generated.pdf",G){case void 0:return lo();case"save":g.save(ge.filename);break;case"arraybuffer":return st(lo());case"blob":return pa(lo());case"bloburi":case"bloburl":if(Fn.URL!==void 0&&typeof Fn.URL.createObjectURL=="function")return Fn.URL&&Fn.URL.createObjectURL(pa(lo()))||void 0;fs.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var qe="",Je=lo();try{qe=qM(Je)}catch{qe=qM(unescape(encodeURIComponent(Je)))}return"data:application/pdf;filename="+ge.filename+";base64,"+qe;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Fn)==="[object Window]"){var pt="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",zt=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';ge.pdfObjectUrl&&(pt=ge.pdfObjectUrl,zt="");var ir='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+pt+'"'+zt+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(ge)+");<\/script></body></html>",qr=Fn.open();return qr!==null&&qr.document.write(ir),qr}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Fn)==="[object Window]"){var Tr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(ge.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+ge.filename+'" width="500px" height="400px" /></body></html>',wn=Fn.open();if(wn!==null){wn.document.write(Tr);var Hr=this;wn.document.documentElement.querySelector("#pdfViewer").onload=function(){wn.document.title=ge.filename,wn.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Hr.output("bloburl"))}}return wn}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Fn)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var aa='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",ge)+'"></iframe></body></html>',_a=Fn.open();if(_a!==null&&(_a.document.write(aa),_a.document.title=ge.filename),_a||typeof safari>"u")return _a;break;case"datauri":case"dataurl":return Fn.document.location.href=this.output("datauristring",ge);default:return null}},_n.foo=function(){try{return _n.apply(this,arguments)}catch(qe){var G=qe.stack||"";~G.indexOf(" at ")&&(G=G.split(" at ")[1]);var ge="Error in function "+G.split(`
`)[0].split("<")[0]+": "+qe.message;if(!Fn.console)throw new Error(ge);Fn.console.error(ge,qe),Fn.alert&&alert(ge)}},_n.foo.bar=_n,_n.foo),cr=function(G){return Array.isArray($r)===!0&&$r.indexOf(G)>-1};switch(n){case"pt":Gt=1;break;case"mm":Gt=72/25.4;break;case"cm":Gt=72/2.54;break;case"in":Gt=72;break;case"px":Gt=cr("px_scaling")==1?.75:96/72;break;case"pc":case"em":Gt=12;break;case"ex":Gt=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);Gt=n}var _r=null;fe(),Se();var br=g.__private__.getPageInfo=g.getPageInfo=function(G){if(isNaN(G)||G%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Ot[G].objId,pageNumber:G,pageContext:Ot[G]}},on=g.__private__.getPageInfoByObjId=function(G){if(isNaN(G)||G%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var ge in Ot)if(Ot[ge].objId===G)break;return br(ge)},ct=g.__private__.getCurrentPageInfo=g.getCurrentPageInfo=function(){return{objId:Ot[te].objId,pageNumber:te,pageContext:Ot[te]}};g.addPage=function(){return Na.apply(this,arguments),this},g.setPage=function(){return cn.apply(this,arguments),De.call(this,be[te]),this},g.insertPage=function(G){return this.addPage(),this.movePage(te,G),this},g.movePage=function(G,ge){var qe,Je;if(G>ge){qe=be[G],Je=Ot[G];for(var pt=G;pt>ge;pt--)be[pt]=be[pt-1],Ot[pt]=Ot[pt-1];be[ge]=qe,Ot[ge]=Je,this.setPage(ge)}else if(G<ge){qe=be[G],Je=Ot[G];for(var zt=G;zt<ge;zt++)be[zt]=be[zt+1],Ot[zt]=Ot[zt+1];be[ge]=qe,Ot[ge]=Je,this.setPage(ge)}return this},g.deletePage=function(){return La.apply(this,arguments),this},g.__private__.text=g.text=function(G,ge,qe,Je,pt){var zt,ir,qr,Tr,wn,Hr,aa,_a,jn,Or=(Je=Je||{}).scope||this;if(typeof G=="number"&&typeof ge=="number"&&(typeof qe=="string"||Array.isArray(qe))){var Hs=qe;qe=ge,ge=G,G=Hs}if(arguments[3]instanceof We==0?(qr=arguments[4],Tr=arguments[5],Xa(aa=arguments[3])==="object"&&aa!==null||(typeof qr=="string"&&(Tr=qr,qr=null),typeof aa=="string"&&(Tr=aa,aa=null),typeof aa=="number"&&(qr=aa,aa=null),Je={flags:aa,angle:qr,align:Tr})):(U("The transform parameter of text() with a Matrix value"),jn=pt),isNaN(ge)||isNaN(qe)||G==null)throw new Error("Invalid arguments passed to jsPDF.text");if(G.length===0)return Or;var In,cs="",fi=typeof Je.lineHeightFactor=="number"?Je.lineHeightFactor:co,nl=Or.internal.scaleFactor;function _l(qt){return qt=qt.split("	").join(Array(Je.TabLen||9).join(" ")),Un(qt,aa)}function Rc(qt){for(var Ht,Ft=qt.concat(),nn=[],pn=Ft.length;pn--;)typeof(Ht=Ft.shift())=="string"?nn.push(Ht):Array.isArray(qt)&&(Ht.length===1||Ht[1]===void 0&&Ht[2]===void 0)?nn.push(Ht[0]):nn.push([Ht[0],Ht[1],Ht[2]]);return nn}function Fc(qt,Ht){var Ft;if(typeof qt=="string")Ft=Ht(qt)[0];else if(Array.isArray(qt)){for(var nn,pn,Za=qt.concat(),gi=[],Ys=Za.length;Ys--;)typeof(nn=Za.shift())=="string"?gi.push(Ht(nn)[0]):Array.isArray(nn)&&typeof nn[0]=="string"&&(pn=Ht(nn[0],nn[1],nn[2]),gi.push([pn[0],pn[1],pn[2]]));Ft=gi}return Ft}var Rl=!1,Fl=!0;if(typeof G=="string")Rl=!0;else if(Array.isArray(G)){var Bc=G.concat();ir=[];for(var Uc,ps=Bc.length;ps--;)(typeof(Uc=Bc.shift())!="string"||Array.isArray(Uc)&&typeof Uc[0]!="string")&&(Fl=!1);Rl=Fl}if(Rl===!1)throw new Error('Type of text must be string or Array. "'+G+'" is not recognized.');typeof G=="string"&&(G=G.match(/[\r?\n]/)?G.split(/\r\n|\r|\n/g):[G]);var Mo=et/Or.internal.scaleFactor,zc=Mo*(fi-1);switch(Je.baseline){case"bottom":qe-=zc;break;case"top":qe+=Mo-zc;break;case"hanging":qe+=Mo-2*zc;break;case"middle":qe+=Mo/2-zc}if((Hr=Je.maxWidth||0)>0&&(typeof G=="string"?G=Or.splitTextToSize(G,Hr):Object.prototype.toString.call(G)==="[object Array]"&&(G=G.reduce(function(qt,Ht){return qt.concat(Or.splitTextToSize(Ht,Hr))},[]))),zt={text:G,x:ge,y:qe,options:Je,mutex:{pdfEscape:Un,activeFontKey:Xt,fonts:mt,activeFontSize:et}},hr.publish("preProcessText",zt),G=zt.text,qr=(Je=zt.options).angle,jn instanceof We==0&&qr&&typeof qr=="number"){qr*=Math.PI/180,Je.rotationDirection===0&&(qr=-qr),D===E&&(qr=-qr);var Lo=Math.cos(qr),Ro=Math.sin(qr);jn=new We(Lo,Ro,-Ro,Lo,0,0)}else qr&&qr instanceof We&&(jn=qr);D!==E||jn||(jn=Cr),(wn=Je.charSpace||Nl)!==void 0&&(cs+=z(Q(wn))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(_a=Je.horizontalScale)!==void 0&&(cs+=z(100*_a)+` Tz
`),Je.lang;var Sa=-1,Bl=Je.renderingMode!==void 0?Je.renderingMode:Je.stroke,mi=Or.internal.getCurrentPageInfo().pageContext;switch(Bl){case 0:case!1:case"fill":Sa=0;break;case 1:case!0:case"stroke":Sa=1;break;case 2:case"fillThenStroke":Sa=2;break;case 3:case"invisible":Sa=3;break;case 4:case"fillAndAddForClipping":Sa=4;break;case 5:case"strokeAndAddPathForClipping":Sa=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Sa=6;break;case 7:case"addToPathForClipping":Sa=7}var iu=mi.usedRenderingMode!==void 0?mi.usedRenderingMode:-1;Sa!==-1?cs+=Sa+` Tr
`:iu!==-1&&(cs+=`0 Tr
`),Sa!==-1&&(mi.usedRenderingMode=Sa),Tr=Je.align||"left";var gs,mo=et*fi,xo=Or.internal.pageSize.getWidth(),Zu=mt[Xt];wn=Je.charSpace||Nl,Hr=Je.maxWidth||0,aa=Object.assign({autoencode:!0,noBOM:!0},Je.flags);var Ul=[],xi=function(qt){return Or.getStringUnitWidth(qt,{font:Zu,charSpace:wn,fontSize:et,doKerning:!1})*et/nl};if(Object.prototype.toString.call(G)==="[object Array]"){var al;ir=Rc(G),Tr!=="left"&&(gs=ir.map(xi));var pi,sl=0;if(Tr==="right"){ge-=gs[0],G=[],ps=ir.length;for(var zn=0;zn<ps;zn++)zn===0?(pi=un(ge),al=la(qe)):(pi=Q(sl-gs[zn]),al=-mo),G.push([ir[zn],pi,al]),sl=gs[zn]}else if(Tr==="center"){ge-=gs[0]/2,G=[],ps=ir.length;for(var zl=0;zl<ps;zl++)zl===0?(pi=un(ge),al=la(qe)):(pi=Q((sl-gs[zl])/2),al=-mo),G.push([ir[zl],pi,al]),sl=gs[zl]}else if(Tr==="left"){G=[],ps=ir.length;for(var xe=0;xe<ps;xe++)G.push(ir[xe])}else if(Tr==="justify"&&Zu.encoding==="Identity-H"){G=[],ps=ir.length,Hr=Hr!==0?Hr:xo;for(var h=0,x=0;x<ps;x++)if(al=x===0?la(qe):-mo,pi=x===0?un(ge):h,x<ps-1){var b=Q((Hr-gs[x])/(ir[x].split(" ").length-1)),_=ir[x].split(" ");G.push([_[0]+" ",pi,al]),h=0;for(var j=1;j<_.length;j++){var A=(xi(_[j-1]+" "+_[j])-xi(_[j]))*nl+b;j==_.length-1?G.push([_[j],A,0]):G.push([_[j]+" ",A,0]),h-=A}}else G.push([ir[x],pi,al]);G.push(["",h,0])}else{if(Tr!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(G=[],ps=ir.length,Hr=Hr!==0?Hr:xo,x=0;x<ps;x++){al=x===0?la(qe):-mo,pi=x===0?un(ge):0;var I=ir[x].split(" ").length-1,B=I>0?(Hr-gs[x])/I:0;x<ps-1?Ul.push(z(Q(B))):Ul.push(0),G.push([ir[x],pi,al])}}}(typeof Je.R2L=="boolean"?Je.R2L:Vt)===!0&&(G=Fc(G,function(qt,Ht,Ft){return[qt.split("").reverse().join(""),Ht,Ft]})),zt={text:G,x:ge,y:qe,options:Je,mutex:{pdfEscape:Un,activeFontKey:Xt,fonts:mt,activeFontSize:et}},hr.publish("postProcessText",zt),G=zt.text,In=zt.mutex.isHex||!1;var X=mt[Xt].encoding;X!=="WinAnsiEncoding"&&X!=="StandardEncoding"||(G=Fc(G,function(qt,Ht,Ft){return[_l(qt),Ht,Ft]})),ir=Rc(G),G=[];for(var oe,pe,Ae,ze=Array.isArray(ir[0])?1:0,Xe="",tt=function(qt,Ht,Ft){var nn="";return Ft instanceof We?(Ft=typeof Je.angle=="number"?Qt(Ft,new We(1,0,0,1,qt,Ht)):Qt(new We(1,0,0,1,qt,Ht),Ft),D===E&&(Ft=Qt(new We(1,0,0,-1,0,0),Ft)),nn=Ft.join(" ")+` Tm
`):nn=z(qt)+" "+z(Ht)+` Td
`,nn},xt=0;xt<ir.length;xt++){switch(Xe="",ze){case 1:Ae=(In?"<":"(")+ir[xt][0]+(In?">":")"),oe=parseFloat(ir[xt][1]),pe=parseFloat(ir[xt][2]);break;case 0:Ae=(In?"<":"(")+ir[xt]+(In?">":")"),oe=un(ge),pe=la(qe)}Ul!==void 0&&Ul[xt]!==void 0&&(Xe=Ul[xt]+` Tw
`),xt===0?G.push(Xe+tt(oe,pe,jn)+Ae):ze===0?G.push(Xe+Ae):ze===1&&G.push(Xe+tt(oe,pe,jn)+Ae)}G=ze===0?G.join(` Tj
T* `):G.join(` Tj
`),G+=` Tj
`;var jt=`BT
/`;return jt+=Xt+" "+et+` Tf
`,jt+=z(et*fi)+` TL
`,jt+=Oo+`
`,jt+=cs,jt+=G,ye(jt+="ET"),y[Xt]=!0,Or};var Be=g.__private__.clip=g.clip=function(G){return ye(G==="evenodd"?"W*":"W"),this};g.clipEvenOdd=function(){return Be("evenodd")},g.__private__.discardPath=g.discardPath=function(){return ye("n"),this};var vr=g.__private__.isValidStyle=function(G){var ge=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(G)!==-1&&(ge=!0),ge};g.__private__.setDefaultPathOperation=g.setDefaultPathOperation=function(G){return vr(G)&&(d=G),this};var Pn=g.__private__.getStyle=g.getStyle=function(G){var ge=d;switch(G){case"D":case"S":ge="S";break;case"F":ge="f";break;case"FD":case"DF":ge="B";break;case"f":case"f*":case"B":case"B*":ge=G}return ge},qa=g.close=function(){return ye("h"),this};g.stroke=function(){return ye("S"),this},g.fill=function(G){return ls("f",G),this},g.fillEvenOdd=function(G){return ls("f*",G),this},g.fillStroke=function(G){return ls("B",G),this},g.fillStrokeEvenOdd=function(G){return ls("B*",G),this};var ls=function(G,ge){Xa(ge)==="object"?Lr(ge,G):ye(G)},Ai=function(G){G===null||D===E&&G===void 0||(G=Pn(G),ye(G))};function Qn(G,ge,qe,Je,pt){var zt=new o1(ge||this.boundingBox,qe||this.xStep,Je||this.yStep,this.gState,pt||this.matrix);zt.stream=this.stream;var ir=G+"$$"+this.cloneIndex+++"$$";return gr(ir,zt),zt}var Lr=function(G,ge){var qe=Kt[G.key],Je=vt[qe];if(Je instanceof Gf)ye("q"),ye(na(ge)),Je.gState&&g.setGState(Je.gState),ye(G.matrix.toString()+" cm"),ye("/"+qe+" sh"),ye("Q");else if(Je instanceof o1){var pt=new We(1,0,0,-1,0,oc());G.matrix&&(pt=pt.multiply(G.matrix||Cr),qe=Qn.call(Je,G.key,G.boundingBox,G.xStep,G.yStep,pt).id),ye("q"),ye("/Pattern cs"),ye("/"+qe+" scn"),Je.gState&&g.setGState(Je.gState),ye(ge),ye("Q")}},na=function(G){switch(G){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},oo=g.moveTo=function(G,ge){return ye(z(Q(G))+" "+z(re(ge))+" m"),this},wd=g.lineTo=function(G,ge){return ye(z(Q(G))+" "+z(re(ge))+" l"),this},wl=g.curveTo=function(G,ge,qe,Je,pt,zt){return ye([z(Q(G)),z(re(ge)),z(Q(qe)),z(re(Je)),z(Q(pt)),z(re(zt)),"c"].join(" ")),this};g.__private__.line=g.line=function(G,ge,qe,Je,pt){if(isNaN(G)||isNaN(ge)||isNaN(qe)||isNaN(Je)||!vr(pt))throw new Error("Invalid arguments passed to jsPDF.line");return D===O?this.lines([[qe-G,Je-ge]],G,ge,[1,1],pt||"S"):this.lines([[qe-G,Je-ge]],G,ge,[1,1]).stroke()},g.__private__.lines=g.lines=function(G,ge,qe,Je,pt,zt){var ir,qr,Tr,wn,Hr,aa,_a,jn,Or,Hs,In,cs;if(typeof G=="number"&&(cs=qe,qe=ge,ge=G,G=cs),Je=Je||[1,1],zt=zt||!1,isNaN(ge)||isNaN(qe)||!Array.isArray(G)||!Array.isArray(Je)||!vr(pt)||typeof zt!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(oo(ge,qe),ir=Je[0],qr=Je[1],wn=G.length,Hs=ge,In=qe,Tr=0;Tr<wn;Tr++)(Hr=G[Tr]).length===2?(Hs=Hr[0]*ir+Hs,In=Hr[1]*qr+In,wd(Hs,In)):(aa=Hr[0]*ir+Hs,_a=Hr[1]*qr+In,jn=Hr[2]*ir+Hs,Or=Hr[3]*qr+In,Hs=Hr[4]*ir+Hs,In=Hr[5]*qr+In,wl(aa,_a,jn,Or,Hs,In));return zt&&qa(),Ai(pt),this},g.path=function(G){for(var ge=0;ge<G.length;ge++){var qe=G[ge],Je=qe.c;switch(qe.op){case"m":oo(Je[0],Je[1]);break;case"l":wd(Je[0],Je[1]);break;case"c":wl.apply(this,Je);break;case"h":qa()}}return this},g.__private__.rect=g.rect=function(G,ge,qe,Je,pt){if(isNaN(G)||isNaN(ge)||isNaN(qe)||isNaN(Je)||!vr(pt))throw new Error("Invalid arguments passed to jsPDF.rect");return D===O&&(Je=-Je),ye([z(Q(G)),z(re(ge)),z(Q(qe)),z(Q(Je)),"re"].join(" ")),Ai(pt),this},g.__private__.triangle=g.triangle=function(G,ge,qe,Je,pt,zt,ir){if(isNaN(G)||isNaN(ge)||isNaN(qe)||isNaN(Je)||isNaN(pt)||isNaN(zt)||!vr(ir))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[qe-G,Je-ge],[pt-qe,zt-Je],[G-pt,ge-zt]],G,ge,[1,1],ir,!0),this},g.__private__.roundedRect=g.roundedRect=function(G,ge,qe,Je,pt,zt,ir){if(isNaN(G)||isNaN(ge)||isNaN(qe)||isNaN(Je)||isNaN(pt)||isNaN(zt)||!vr(ir))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var qr=4/3*(Math.SQRT2-1);return pt=Math.min(pt,.5*qe),zt=Math.min(zt,.5*Je),this.lines([[qe-2*pt,0],[pt*qr,0,pt,zt-zt*qr,pt,zt],[0,Je-2*zt],[0,zt*qr,-pt*qr,zt,-pt,zt],[2*pt-qe,0],[-pt*qr,0,-pt,-zt*qr,-pt,-zt],[0,2*zt-Je],[0,-zt*qr,pt*qr,-zt,pt,-zt]],G+pt,ge,[1,1],ir,!0),this},g.__private__.ellipse=g.ellipse=function(G,ge,qe,Je,pt){if(isNaN(G)||isNaN(ge)||isNaN(qe)||isNaN(Je)||!vr(pt))throw new Error("Invalid arguments passed to jsPDF.ellipse");var zt=4/3*(Math.SQRT2-1)*qe,ir=4/3*(Math.SQRT2-1)*Je;return oo(G+qe,ge),wl(G+qe,ge-ir,G+zt,ge-Je,G,ge-Je),wl(G-zt,ge-Je,G-qe,ge-ir,G-qe,ge),wl(G-qe,ge+ir,G-zt,ge+Je,G,ge+Je),wl(G+zt,ge+Je,G+qe,ge+ir,G+qe,ge),Ai(pt),this},g.__private__.circle=g.circle=function(G,ge,qe,Je){if(isNaN(G)||isNaN(ge)||isNaN(qe)||!vr(Je))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(G,ge,qe,qe,Je)},g.setFont=function(G,ge,qe){return qe&&(ge=R(ge,qe)),Xt=On(G,ge,{disableWarning:!1}),this};var tl=g.__private__.getFont=g.getFont=function(){return mt[On.apply(g,arguments)]};g.__private__.getFontList=g.getFontList=function(){var G,ge,qe={};for(G in kr)if(kr.hasOwnProperty(G))for(ge in qe[G]=[],kr[G])kr[G].hasOwnProperty(ge)&&qe[G].push(ge);return qe},g.addFont=function(G,ge,qe,Je,pt){var zt=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&zt.indexOf(arguments[3])!==-1?pt=arguments[3]:arguments[3]&&zt.indexOf(arguments[3])==-1&&(qe=R(qe,Je)),It.call(this,G,ge,qe,pt=pt||"Identity-H")};var co,kd=e.lineWidth||.200025,Br=g.__private__.getLineWidth=g.getLineWidth=function(){return kd},Ll=g.__private__.setLineWidth=g.setLineWidth=function(G){return kd=G,ye(z(Q(G))+" w"),this};g.__private__.setLineDash=rn.API.setLineDash=rn.API.setLineDashPattern=function(G,ge){if(G=G||[],ge=ge||0,isNaN(ge)||!Array.isArray(G))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return G=G.map(function(qe){return z(Q(qe))}).join(" "),ge=z(Q(ge)),ye("["+G+"] "+ge+" d"),this};var uo=g.__private__.getLineHeight=g.getLineHeight=function(){return et*co};g.__private__.getLineHeight=g.getLineHeight=function(){return et*co};var dn=g.__private__.setLineHeightFactor=g.setLineHeightFactor=function(G){return typeof(G=G||1.15)=="number"&&(co=G),this},oh=g.__private__.getLineHeightFactor=g.getLineHeightFactor=function(){return co};dn(e.lineHeight);var un=g.__private__.getHorizontalCoordinate=function(G){return Q(G)},la=g.__private__.getVerticalCoordinate=function(G){return D===E?G:Ot[te].mediaBox.topRightY-Ot[te].mediaBox.bottomLeftY-Q(G)},Yu=g.__private__.getHorizontalCoordinateString=g.getHorizontalCoordinateString=function(G){return z(un(G))},ic=g.__private__.getVerticalCoordinateString=g.getVerticalCoordinateString=function(G){return z(la(G))},rl=e.strokeColor||"0 G";g.__private__.getStrokeColor=g.getDrawColor=function(){return ve(rl)},g.__private__.setStrokeColor=g.setDrawColor=function(G,ge,qe,Je){return rl=Oe({ch1:G,ch2:ge,ch3:qe,ch4:Je,pdfColorType:"draw",precision:2}),ye(rl),this};var kl=e.fillColor||"0 g";g.__private__.getFillColor=g.getFillColor=function(){return ve(kl)},g.__private__.setFillColor=g.setFillColor=function(G,ge,qe,Je){return kl=Oe({ch1:G,ch2:ge,ch3:qe,ch4:Je,pdfColorType:"fill",precision:2}),ye(kl),this};var Oo=e.textColor||"0 g",ho=g.__private__.getTextColor=g.getTextColor=function(){return ve(Oo)};g.__private__.setTextColor=g.setTextColor=function(G,ge,qe,Je){return Oo=Oe({ch1:G,ch2:ge,ch3:qe,ch4:Je,pdfColorType:"text",precision:3}),this};var Nl=e.charSpace,Po=g.__private__.getCharSpace=g.getCharSpace=function(){return parseFloat(Nl||0)};g.__private__.setCharSpace=g.setCharSpace=function(G){if(isNaN(G))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Nl=G,this};var Nd=0;g.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},g.__private__.setLineCap=g.setLineCap=function(G){var ge=g.CapJoinStyles[G];if(ge===void 0)throw new Error("Line cap style of '"+G+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Nd=ge,ye(ge+" J"),this};var xs=0;g.__private__.setLineJoin=g.setLineJoin=function(G){var ge=g.CapJoinStyles[G];if(ge===void 0)throw new Error("Line join style of '"+G+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return xs=ge,ye(ge+" j"),this},g.__private__.setLineMiterLimit=g.__private__.setMiterLimit=g.setLineMiterLimit=g.setMiterLimit=function(G){if(G=G||0,isNaN(G))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return ye(z(Q(G))+" M"),this},g.GState=Cw,g.setGState=function(G){(G=typeof G=="string"?tr[Pr[G]]:hi(null,G)).equals(Nr)||(ye("/"+G.id+" gs"),Nr=G)};var hi=function(G,ge){if(!G||!Pr[G]){var qe=!1;for(var Je in tr)if(tr.hasOwnProperty(Je)&&tr[Je].equals(ge)){qe=!0;break}if(qe)ge=tr[Je];else{var pt="GS"+(Object.keys(tr).length+1).toString(10);tr[pt]=ge,ge.id=pt}return G&&(Pr[G]=ge.id),hr.publish("addGState",ge),ge}};g.addGState=function(G,ge){return hi(G,ge),this},g.saveGraphicsState=function(){return ye("q"),Ke.push({key:Xt,size:et,color:Oo}),this},g.restoreGraphicsState=function(){ye("Q");var G=Ke.pop();return Xt=G.key,et=G.size,Oo=G.color,Nr=null,this},g.setCurrentTransformationMatrix=function(G){return ye(G.toString()+" cm"),this},g.comment=function(G){return ye("#"+G),this};var os=function(G,ge){var qe=G||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return qe},set:function(zt){isNaN(zt)||(qe=parseFloat(zt))}});var Je=ge||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Je},set:function(zt){isNaN(zt)||(Je=parseFloat(zt))}});var pt="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return pt},set:function(zt){pt=zt.toString()}}),this},Io=function(G,ge,qe,Je){os.call(this,G,ge),this.type="rect";var pt=qe||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return pt},set:function(ir){isNaN(ir)||(pt=parseFloat(ir))}});var zt=Je||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return zt},set:function(ir){isNaN(ir)||(zt=parseFloat(ir))}}),this},_d=function(){this.page=Ge,this.currentPage=te,this.pages=be.slice(0),this.pagesContext=Ot.slice(0),this.x=ur,this.y=wr,this.matrix=lr,this.width=Lc(te),this.height=Gn(te),this.outputDestination=Te,this.id="",this.objectNumber=-1};_d.prototype.restore=function(){Ge=this.page,te=this.currentPage,Ot=this.pagesContext,be=this.pages,ur=this.x,wr=this.y,lr=this.matrix,Sd(te,this.width),Do(te,this.height),Te=this.outputDestination};var Mc=function(G,ge,qe,Je,pt){Mr.push(new _d),Ge=te=0,be=[],ur=G,wr=ge,lr=pt,en([qe,Je])};for(var lc in g.beginFormObject=function(G,ge,qe,Je,pt){return Mc(G,ge,qe,Je,pt),this},g.endFormObject=function(G){return(function(ge){if(Yt[ge])Mr.pop().restore();else{var qe=new _d,Je="Xo"+(Object.keys(Dr).length+1).toString(10);qe.id=Je,Yt[ge]=Je,Dr[Je]=qe,hr.publish("addFormObject",qe),Mr.pop().restore()}})(G),this},g.doFormObject=function(G,ge){var qe=Dr[Yt[G]];return ye("q"),ye(ge.toString()+" cm"),ye("/"+qe.id+" Do"),ye("Q"),this},g.getFormObject=function(G){var ge=Dr[Yt[G]];return{x:ge.x,y:ge.y,width:ge.width,height:ge.height,matrix:ge.matrix}},g.save=function(G,ge){return G=G||"generated.pdf",(ge=ge||{}).returnPromise=ge.returnPromise||!1,ge.returnPromise===!1?($f(pa(lo()),G),typeof $f.unload=="function"&&Fn.setTimeout&&setTimeout($f.unload,911),this):new Promise(function(qe,Je){try{var pt=$f(pa(lo()),G);typeof $f.unload=="function"&&Fn.setTimeout&&setTimeout($f.unload,911),qe(pt)}catch(zt){Je(zt.message)}})},rn.API)rn.API.hasOwnProperty(lc)&&(lc==="events"&&rn.API.events.length?(function(G,ge){var qe,Je,pt;for(pt=ge.length-1;pt!==-1;pt--)qe=ge[pt][0],Je=ge[pt][1],G.subscribe.apply(G,[qe].concat(typeof Je=="function"?[Je]:Je))})(hr,rn.API.events):g[lc]=rn.API[lc]);function Lc(G){return Ot[G].mediaBox.topRightX-Ot[G].mediaBox.bottomLeftX}function Sd(G,ge){Ot[G].mediaBox.topRightX=ge+Ot[G].mediaBox.bottomLeftX}function Gn(G){return Ot[G].mediaBox.topRightY-Ot[G].mediaBox.bottomLeftY}function Do(G,ge){Ot[G].mediaBox.topRightY=ge+Ot[G].mediaBox.bottomLeftY}var jd=g.getPageWidth=function(G){return Lc(G=G||te)/Gt},fo=g.setPageWidth=function(G,ge){Sd(G,ge*Gt)},oc=g.getPageHeight=function(G){return Gn(G=G||te)/Gt},Tt=g.setPageHeight=function(G,ge){Do(G,ge*Gt)};return g.internal={pdfEscape:Un,getStyle:Pn,getFont:tl,getFontSize:Ve,getCharSpace:Po,getTextColor:ho,getLineHeight:uo,getLineHeightFactor:oh,getLineWidth:Br,write:rt,getHorizontalCoordinate:un,getVerticalCoordinate:la,getCoordinateString:Yu,getVerticalCoordinateString:ic,collections:{},newObject:Rr,newAdditionalObject:Ne,newObjectDeferred:Sn,newObjectDeferredBegin:we,getFilters:nt,putStream:wt,events:hr,scaleFactor:Gt,pageSize:{getWidth:function(){return jd(te)},setWidth:function(G){fo(te,G)},getHeight:function(){return oc(te)},setHeight:function(G){Tt(te,G)}},encryptionOptions:f,encryption:_r,getEncryptor:function(G){return f!==null?_r.encryptor(G,0):function(ge){return ge}},output:at,getNumberOfPages:An,pages:be,out:ye,f2:q,f3:K,getPageInfo:br,getPageInfoByObjId:on,getCurrentPageInfo:ct,getPDFVersion:w,Point:os,Rectangle:Io,Matrix:We,hasHotfix:cr},Object.defineProperty(g.internal.pageSize,"width",{get:function(){return jd(te)},set:function(G){fo(te,G)},enumerable:!0,configurable:!0}),Object.defineProperty(g.internal.pageSize,"height",{get:function(){return oc(te)},set:function(G){Tt(te,G)},enumerable:!0,configurable:!0}),(function(G){for(var ge=0,qe=dt.length;ge<qe;ge++){var Je=It.call(this,G[ge][0],G[ge][1],G[ge][2],dt[ge][3],!0);p===!1&&(y[Je]=!0);var pt=G[ge][0].split("-");Ar({id:Je,fontName:pt[0],fontStyle:pt[1]||""})}hr.publish("addFonts",{fonts:mt,dictionary:kr})}).call(g,dt),Xt="F1",Na(a,r),hr.publish("initialized"),g}n1.prototype.lsbFirstWord=function(e){return String.fromCharCode(255&e,e>>8&255,e>>16&255,e>>24&255)},n1.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},n1.prototype.hexToBytes=function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(String.fromCharCode(parseInt(e.substr(r,2),16)));return t.join("")},n1.prototype.processOwnerPassword=function(e,t){return XS(GS(t).substr(0,5),e)},n1.prototype.encryptor=function(e,t){var r=GS(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(n){return XS(r,n)}},Cw.prototype.equals=function(e){var t,r="id,objectNumber,equals";if(!e||Xa(e)!==Xa(this))return!1;var n=0;for(t in this)if(!(r.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;n++}for(t in e)e.hasOwnProperty(t)&&r.indexOf(t)<0&&n--;return n===0},rn.API={events:[]},rn.version="3.0.3";var li=rn.API,AA=1,sx=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Zx=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Vn=function(e){return e.toFixed(2)},Mh=function(e){return e.toFixed(5)};li.__acroform__={};var sc=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},WM=function(e){return e*AA},ju=function(e){var t=new AW,r=Yr.internal.getHeight(e)||0,n=Yr.internal.getWidth(e)||0;return t.BBox=[0,0,Number(Vn(n)),Number(Vn(r))],t},TEe=li.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|1<<t},OEe=li.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&~(1<<t)},PEe=li.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return e&1<<t?1:0},Ni=li.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return PEe(e,t-1)},_i=li.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return TEe(e,t-1)},Si=li.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return OEe(e,t-1)},IEe=li.__acroform__.calculateCoordinates=function(e,t){var r=t.internal.getHorizontalCoordinate,n=t.internal.getVerticalCoordinate,a=e[0],s=e[1],l=e[2],o=e[3],c={};return c.lowerLeft_X=r(a)||0,c.lowerLeft_Y=n(s+o)||0,c.upperRight_X=r(a+l)||0,c.upperRight_Y=n(s)||0,[Number(Vn(c.lowerLeft_X)),Number(Vn(c.lowerLeft_Y)),Number(Vn(c.upperRight_X)),Number(Vn(c.upperRight_Y))]},DEe=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],r=e._V||e.DV,n=YS(e,r),a=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+a+" "+Vn(n.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(n.text),t.push("ET"),t.push("Q"),t.push("EMC");var s=ju(e);return s.scope=e.scope,s.stream=t.join(`
`),s}},YS=function(e,t){var r=e.fontSize===0?e.maxFontSize:e.fontSize,n={text:"",fontSize:""},a=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");a=e.multiline?a.map(function(q){return q.split(`
`)}):a.map(function(q){return[q]});var s=r,l=Yr.internal.getHeight(e)||0;l=l<0?-l:l;var o=Yr.internal.getWidth(e)||0;o=o<0?-o:o;var c=function(q,K,Q){if(q+1<a.length){var re=K+" "+a[q+1][0];return G2(re,e,Q).width<=o-4}return!1};s++;e:for(;s>0;){t="",s--;var d,f,p=G2("3",e,s).height,y=e.multiline?l-s:(l-p)/2,g=y+=2,N=0,w=0,k=0;if(s<=0){t=`(...) Tj
`,t+="% Width of Text: "+G2(t,e,s=12).width+", FieldWidth:"+o+`
`;break}for(var S="",O=0,E=0;E<a.length;E++)if(a.hasOwnProperty(E)){var D=!1;if(a[E].length!==1&&k!==a[E].length-1){if((p+2)*(O+2)+2>l)continue e;S+=a[E][k],D=!0,w=E,E--}else{S=(S+=a[E][k]+" ").substr(S.length-1)==" "?S.substr(0,S.length-1):S;var H=parseInt(E),W=c(H,S,s),R=E>=a.length-1;if(W&&!R){S+=" ",k=0;continue}if(W||R){if(R)w=H;else if(e.multiline&&(p+2)*(O+2)+2>l)continue e}else{if(!e.multiline||(p+2)*(O+2)+2>l)continue e;w=H}}for(var z="",U=N;U<=w;U++){var Z=a[U];if(e.multiline){if(U===w){z+=Z[k]+" ",k=(k+1)%Z.length;continue}if(U===N){z+=Z[Z.length-1]+" ";continue}}z+=Z[0]+" "}switch(z=z.substr(z.length-1)==" "?z.substr(0,z.length-1):z,f=G2(z,e,s).width,e.textAlign){case"right":d=o-f-2;break;case"center":d=(o-f)/2;break;default:d=2}t+=Vn(d)+" "+Vn(g)+` Td
`,t+="("+sx(z)+`) Tj
`,t+=-Vn(d)+` 0 Td
`,g=-(s+2),f=0,N=D?w:w+1,O++,S=""}break}return n.text=t,n.fontSize=s,n},G2=function(e,t,r){var n=t.scope.internal.getFont(t.fontName,t.fontStyle),a=t.scope.getStringUnitWidth(e,{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:t.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:a}},MEe={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},LEe=function(e,t){var r={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(n){return n.type===r.type&&n.object===r.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(r)},REe=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(au.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(MEe)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");AA=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new EW,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var a in n)if(n.hasOwnProperty(a)){var s=n[a];s.objId=void 0,s.hasAnnotation&&LEe(s,r)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(r){(function(n,a){var s=!n;for(var l in n||(a.internal.newObjectDeferredBegin(a.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),a.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||a.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(l)){var o=n[l],c=[],d=o.Rect;if(o.Rect&&(o.Rect=IEe(o.Rect,a)),a.internal.newObjectDeferredBegin(o.objId,!0),o.DA=Yr.createDefaultAppearanceStream(o),Xa(o)==="object"&&typeof o.getKeyValueListForStream=="function"&&(c=o.getKeyValueListForStream()),o.Rect=d,o.hasAppearanceStream&&!o.appearanceStreamContent){var f=DEe(o);c.push({key:"AP",value:"<</N "+f+">>"}),a.internal.acroformPlugin.xForms.push(f)}if(o.appearanceStreamContent){var p="";for(var y in o.appearanceStreamContent)if(o.appearanceStreamContent.hasOwnProperty(y)){var g=o.appearanceStreamContent[y];if(p+="/"+y+" ",p+="<<",Object.keys(g).length>=1||Array.isArray(g)){for(var l in g)if(g.hasOwnProperty(l)){var N=g[l];typeof N=="function"&&(N=N.call(a,o)),p+="/"+l+" "+N+" ",a.internal.acroformPlugin.xForms.indexOf(N)>=0||a.internal.acroformPlugin.xForms.push(N)}}else typeof(N=g)=="function"&&(N=N.call(a,o)),p+="/"+l+" "+N,a.internal.acroformPlugin.xForms.indexOf(N)>=0||a.internal.acroformPlugin.xForms.push(N);p+=">>"}c.push({key:"AP",value:`<<
`+p+">>"})}a.internal.putStream({additionalKeyValues:c,objectId:o.objId}),a.internal.out("endobj")}s&&(function(w,k){for(var S in w)if(w.hasOwnProperty(S)){var O=S,E=w[S];k.internal.newObjectDeferredBegin(E.objId,!0),Xa(E)==="object"&&typeof E.putStream=="function"&&E.putStream(),delete w[O]}})(a.internal.acroformPlugin.xForms,a)})(r,e)}),e.internal.acroformPlugin.isInitialized=!0}},CW=li.__acroform__.arrayToPdfArray=function(e,t,r){var n=function(l){return l};if(Array.isArray(e)){for(var a="[",s=0;s<e.length;s++)switch(s!==0&&(a+=" "),Xa(e[s])){case"boolean":case"number":case"object":a+=e[s].toString();break;case"string":e[s].substr(0,1)!=="/"?(t!==void 0&&r&&(n=r.internal.getEncryptor(t)),a+="("+sx(n(e[s].toString()))+")"):a+=e[s].toString()}return a+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},IN=function(e,t,r){var n=function(a){return a};return t!==void 0&&r&&(n=r.internal.getEncryptor(t)),(e=e||"").toString(),"("+sx(n(e))+")"},Lu=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Lu.prototype.toString=function(){return this.objId+" 0 R"},Lu.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},Lu.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var r in t)if(Object.getOwnPropertyDescriptor(this,t[r]).configurable===!1){var n=t[r],a=this[n];a&&(Array.isArray(a)?e.push({key:n,value:CW(a,this.objId,this.scope)}):a instanceof Lu?(a.scope=this.scope,e.push({key:n,value:a.objId+" 0 R"})):typeof a!="function"&&e.push({key:n,value:a}))}return e};var AW=function(){Lu.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){e=r.trim()},get:function(){return e||null}})};sc(AW,Lu);var EW=function(){Lu.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var r=function(n){return n};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+sx(r(e))+")"}},set:function(r){e=r}})};sc(EW,Lu);var au=function e(){Lu.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(S){if(isNaN(S))throw new Error('Invalid value "'+S+'" for attribute F supplied.');t=S}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Ni(t,3)},set:function(S){S?this.F=_i(t,3):this.F=Si(t,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(S){if(isNaN(S))throw new Error('Invalid value "'+S+'" for attribute Ff supplied.');r=S}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(S){n=S!==void 0?S:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(S){n[0]=S}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(S){n[1]=S}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(S){n[2]=S}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(S){n[3]=S}});var a="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return a},set:function(S){switch(S){case"/Btn":case"/Tx":case"/Ch":case"/Sig":a=S;break;default:throw new Error('Invalid value "'+S+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof Aw)return;s="FieldObject"+e.FieldNum++}var S=function(O){return O};return this.scope&&(S=this.scope.internal.getEncryptor(this.objId)),"("+sx(S(s))+")"},set:function(S){s=S.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(S){s=S}});var l="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return l},set:function(S){l=S}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(S){o=S}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(S){c=S}});var d=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return d===void 0?50/AA:d},set:function(S){d=S}});var f="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return f},set:function(S){f=S}});var p="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!p||this instanceof Aw||this instanceof wm))return IN(p,this.objId,this.scope)},set:function(S){S=S.toString(),p=S}});var y=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(y)return this instanceof xl==0?IN(y,this.objId,this.scope):y},set:function(S){S=S.toString(),y=this instanceof xl==0?S.substr(0,1)==="("?Zx(S.substr(1,S.length-2)):Zx(S):S}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof xl==1?Zx(y.substr(1,y.length-1)):y},set:function(S){S=S.toString(),y=this instanceof xl==1?"/"+S:S}});var g=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(g)return g},set:function(S){this.V=S}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(g)return this instanceof xl==0?IN(g,this.objId,this.scope):g},set:function(S){S=S.toString(),g=this instanceof xl==0?S.substr(0,1)==="("?Zx(S.substr(1,S.length-2)):Zx(S):S}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof xl==1?Zx(g.substr(1,g.length-1)):g},set:function(S){S=S.toString(),g=this instanceof xl==1?"/"+S:S}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var N,w=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return w},set:function(S){S=!!S,w=S}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(N)return N},set:function(S){N=S}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Ni(this.Ff,1)},set:function(S){S?this.Ff=_i(this.Ff,1):this.Ff=Si(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Ni(this.Ff,2)},set:function(S){S?this.Ff=_i(this.Ff,2):this.Ff=Si(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Ni(this.Ff,3)},set:function(S){S?this.Ff=_i(this.Ff,3):this.Ff=Si(this.Ff,3)}});var k=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(k!==null)return k},set:function(S){if([0,1,2].indexOf(S)===-1)throw new Error('Invalid value "'+S+'" for attribute Q supplied.');k=S}}),Object.defineProperty(this,"textAlign",{get:function(){var S;switch(k){case 0:default:S="left";break;case 1:S="center";break;case 2:S="right"}return S},configurable:!0,enumerable:!0,set:function(S){switch(S){case"right":case 2:k=2;break;case"center":case 1:k=1;break;default:k=0}}})};sc(au,Lu);var v1=function(){au.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(r){e=r}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return CW(t,this.objId,this.scope)},set:function(r){var n,a;a=[],typeof(n=r)=="string"&&(a=(function(s,l,o){o||(o=1);for(var c,d=[];c=l.exec(s);)d.push(c[o]);return d})(n,/\((.*?)\)/g)),t=a}}),this.getOptions=function(){return t},this.setOptions=function(r){t=r,this.sort&&t.sort()},this.addOption=function(r){r=(r=r||"").toString(),t.push(r),this.sort&&t.sort()},this.removeOption=function(r,n){for(n=n||!1,r=(r=r||"").toString();t.indexOf(r)!==-1&&(t.splice(t.indexOf(r),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Ni(this.Ff,18)},set:function(r){r?this.Ff=_i(this.Ff,18):this.Ff=Si(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Ni(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=_i(this.Ff,19):this.Ff=Si(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Ni(this.Ff,20)},set:function(r){r?(this.Ff=_i(this.Ff,20),t.sort()):this.Ff=Si(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Ni(this.Ff,22)},set:function(r){r?this.Ff=_i(this.Ff,22):this.Ff=Si(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Ni(this.Ff,23)},set:function(r){r?this.Ff=_i(this.Ff,23):this.Ff=Si(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Ni(this.Ff,27)},set:function(r){r?this.Ff=_i(this.Ff,27):this.Ff=Si(this.Ff,27)}}),this.hasAppearanceStream=!1};sc(v1,au);var y1=function(){v1.call(this),this.fontName="helvetica",this.combo=!1};sc(y1,v1);var w1=function(){y1.call(this),this.combo=!0};sc(w1,y1);var iy=function(){w1.call(this),this.edit=!0};sc(iy,w1);var xl=function(){au.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Ni(this.Ff,15)},set:function(r){r?this.Ff=_i(this.Ff,15):this.Ff=Si(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Ni(this.Ff,16)},set:function(r){r?this.Ff=_i(this.Ff,16):this.Ff=Si(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Ni(this.Ff,17)},set:function(r){r?this.Ff=_i(this.Ff,17):this.Ff=Si(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Ni(this.Ff,26)},set:function(r){r?this.Ff=_i(this.Ff,26):this.Ff=Si(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(s){return s};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var n,a=[];for(n in a.push("<<"),t)a.push("/"+n+" ("+sx(r(t[n]))+")");return a.push(">>"),a.join(`
`)}},set:function(r){Xa(r)==="object"&&(t=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(r){typeof r=="string"&&(t.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(r){e="/"+r}})};sc(xl,au);var ly=function(){xl.call(this),this.pushButton=!0};sc(ly,xl);var k1=function(){xl.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};sc(k1,xl);var Aw=function(){var e,t;au.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(a){e=a}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(a){t=a}});var r,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var a=function(o){return o};this.scope&&(a=this.scope.internal.getEncryptor(this.objId));var s,l=[];for(s in l.push("<<"),n)l.push("/"+s+" ("+sx(a(n[s]))+")");return l.push(">>"),l.join(`
`)},set:function(a){Xa(a)==="object"&&(n=a)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(a){typeof a=="string"&&(n.CA=a)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(a){r=a}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(a){r="/"+a}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Yr.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};sc(Aw,au),k1.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var r=this.Kids[t];r.appearanceStreamContent=e.createAppearanceStream(r.optionName),r.caption=e.getCA()}},k1.prototype.createOption=function(e){var t=new Aw;return t.Parent=this,t.optionName=e,this.Kids.push(t),FEe.call(this.scope,t),t};var oy=function(){xl.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Yr.CheckBox.createAppearanceStream()};sc(oy,xl);var wm=function(){au.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Ni(this.Ff,13)},set:function(t){t?this.Ff=_i(this.Ff,13):this.Ff=Si(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Ni(this.Ff,21)},set:function(t){t?this.Ff=_i(this.Ff,21):this.Ff=Si(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Ni(this.Ff,23)},set:function(t){t?this.Ff=_i(this.Ff,23):this.Ff=Si(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Ni(this.Ff,24)},set:function(t){t?this.Ff=_i(this.Ff,24):this.Ff=Si(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Ni(this.Ff,25)},set:function(t){t?this.Ff=_i(this.Ff,25):this.Ff=Si(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Ni(this.Ff,26)},set:function(t){t?this.Ff=_i(this.Ff,26):this.Ff=Si(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};sc(wm,au);var cy=function(){wm.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Ni(this.Ff,14)},set:function(e){e?this.Ff=_i(this.Ff,14):this.Ff=Si(this.Ff,14)}}),this.password=!0};sc(cy,wm);var Yr={CheckBox:{createAppearanceStream:function(){return{N:{On:Yr.CheckBox.YesNormal},D:{On:Yr.CheckBox.YesPushDown,Off:Yr.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=ju(e);t.scope=e.scope;var r=[],n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,a=e.scope.__private__.encodeColorString(e.color),s=YS(e,e.caption);return r.push("0.749023 g"),r.push("0 0 "+Vn(Yr.internal.getWidth(e))+" "+Vn(Yr.internal.getHeight(e))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+n+" "+Vn(s.fontSize)+" Tf "+a),r.push("BT"),r.push(s.text),r.push("ET"),r.push("Q"),r.push("EMC"),t.stream=r.join(`
`),t},YesNormal:function(e){var t=ju(e);t.scope=e.scope;var r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color),a=[],s=Yr.internal.getHeight(e),l=Yr.internal.getWidth(e),o=YS(e,e.caption);return a.push("1 g"),a.push("0 0 "+Vn(l)+" "+Vn(s)+" re"),a.push("f"),a.push("q"),a.push("0 0 1 rg"),a.push("0 0 "+Vn(l-1)+" "+Vn(s-1)+" re"),a.push("W"),a.push("n"),a.push("0 g"),a.push("BT"),a.push("/"+r+" "+Vn(o.fontSize)+" Tf "+n),a.push(o.text),a.push("ET"),a.push("Q"),t.stream=a.join(`
`),t},OffPushDown:function(e){var t=ju(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Vn(Yr.internal.getWidth(e))+" "+Vn(Yr.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:Yr.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=Yr.RadioButton.Circle.YesNormal,t.D[e]=Yr.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=ju(e);t.scope=e.scope;var r=[],n=Yr.internal.getWidth(e)<=Yr.internal.getHeight(e)?Yr.internal.getWidth(e)/4:Yr.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var a=Yr.internal.Bezier_C,s=Number((n*a).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+Mh(Yr.internal.getWidth(e)/2)+" "+Mh(Yr.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+s+" "+s+" "+n+" 0 "+n+" c"),r.push("-"+s+" "+n+" -"+n+" "+s+" -"+n+" 0 c"),r.push("-"+n+" -"+s+" -"+s+" -"+n+" 0 -"+n+" c"),r.push(s+" -"+n+" "+n+" -"+s+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=ju(e);t.scope=e.scope;var r=[],n=Yr.internal.getWidth(e)<=Yr.internal.getHeight(e)?Yr.internal.getWidth(e)/4:Yr.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),s=Number((a*Yr.internal.Bezier_C).toFixed(5)),l=Number((n*Yr.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Mh(Yr.internal.getWidth(e)/2)+" "+Mh(Yr.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+s+" "+s+" "+a+" 0 "+a+" c"),r.push("-"+s+" "+a+" -"+a+" "+s+" -"+a+" 0 c"),r.push("-"+a+" -"+s+" -"+s+" -"+a+" 0 -"+a+" c"),r.push(s+" -"+a+" "+a+" -"+s+" "+a+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+Mh(Yr.internal.getWidth(e)/2)+" "+Mh(Yr.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+l+" "+l+" "+n+" 0 "+n+" c"),r.push("-"+l+" "+n+" -"+n+" "+l+" -"+n+" 0 c"),r.push("-"+n+" -"+l+" -"+l+" -"+n+" 0 -"+n+" c"),r.push(l+" -"+n+" "+n+" -"+l+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(e){var t=ju(e);t.scope=e.scope;var r=[],n=Yr.internal.getWidth(e)<=Yr.internal.getHeight(e)?Yr.internal.getWidth(e)/4:Yr.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),s=Number((a*Yr.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Mh(Yr.internal.getWidth(e)/2)+" "+Mh(Yr.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+s+" "+s+" "+a+" 0 "+a+" c"),r.push("-"+s+" "+a+" -"+a+" "+s+" -"+a+" 0 c"),r.push("-"+a+" -"+s+" -"+s+" -"+a+" 0 -"+a+" c"),r.push(s+" -"+a+" "+a+" -"+s+" "+a+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:Yr.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=Yr.RadioButton.Cross.YesNormal,t.D[e]=Yr.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=ju(e);t.scope=e.scope;var r=[],n=Yr.internal.calculateCross(e);return r.push("q"),r.push("1 1 "+Vn(Yr.internal.getWidth(e)-2)+" "+Vn(Yr.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(Vn(n.x1.x)+" "+Vn(n.x1.y)+" m"),r.push(Vn(n.x2.x)+" "+Vn(n.x2.y)+" l"),r.push(Vn(n.x4.x)+" "+Vn(n.x4.y)+" m"),r.push(Vn(n.x3.x)+" "+Vn(n.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=ju(e);t.scope=e.scope;var r=Yr.internal.calculateCross(e),n=[];return n.push("0.749023 g"),n.push("0 0 "+Vn(Yr.internal.getWidth(e))+" "+Vn(Yr.internal.getHeight(e))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+Vn(Yr.internal.getWidth(e)-2)+" "+Vn(Yr.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(Vn(r.x1.x)+" "+Vn(r.x1.y)+" m"),n.push(Vn(r.x2.x)+" "+Vn(r.x2.y)+" l"),n.push(Vn(r.x4.x)+" "+Vn(r.x4.y)+" m"),n.push(Vn(r.x3.x)+" "+Vn(r.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(e){var t=ju(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Vn(Yr.internal.getWidth(e))+" "+Vn(Yr.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+r}};Yr.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=Yr.internal.getWidth(e),r=Yr.internal.getHeight(e),n=Math.min(t,r);return{x1:{x:(t-n)/2,y:(r-n)/2+n},x2:{x:(t-n)/2+n,y:(r-n)/2},x3:{x:(t-n)/2,y:(r-n)/2},x4:{x:(t-n)/2+n,y:(r-n)/2+n}}}},Yr.internal.getWidth=function(e){var t=0;return Xa(e)==="object"&&(t=WM(e.Rect[2])),t},Yr.internal.getHeight=function(e){var t=0;return Xa(e)==="object"&&(t=WM(e.Rect[3])),t};var FEe=li.addField=function(e){if(REe(this,e),!(e instanceof au))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};li.AcroFormChoiceField=v1,li.AcroFormListBox=y1,li.AcroFormComboBox=w1,li.AcroFormEditBox=iy,li.AcroFormButton=xl,li.AcroFormPushButton=ly,li.AcroFormRadioButton=k1,li.AcroFormCheckBox=oy,li.AcroFormTextField=wm,li.AcroFormPasswordField=cy,li.AcroFormAppearance=Yr,li.AcroForm={ChoiceField:v1,ListBox:y1,ComboBox:w1,EditBox:iy,Button:xl,PushButton:ly,RadioButton:k1,CheckBox:oy,TextField:wm,PasswordField:cy,Appearance:Yr},rn.AcroForm={ChoiceField:v1,ListBox:y1,ComboBox:w1,EditBox:iy,Button:xl,PushButton:ly,RadioButton:k1,CheckBox:oy,TextField:wm,PasswordField:cy,Appearance:Yr};rn.AcroForm;function TW(e){return e.reduce(function(t,r,n){return t[r]=n,t},{})}(function(e){var t="addImage_";e.__addimage__={};var r="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},a=e.__addimage__.getImageFileTypeByImageData=function(q,K){var Q,re,ae,de,he,Se=r;if((K=K||r)==="RGBA"||q.data!==void 0&&q.data instanceof Uint8ClampedArray&&"height"in q&&"width"in q)return"RGBA";if(W(q))for(he in n)for(ae=n[he],Q=0;Q<ae.length;Q+=1){for(de=!0,re=0;re<ae[Q].length;re+=1)if(ae[Q][re]!==void 0&&ae[Q][re]!==q[re]){de=!1;break}if(de===!0){Se=he;break}}else for(he in n)for(ae=n[he],Q=0;Q<ae.length;Q+=1){for(de=!0,re=0;re<ae[Q].length;re+=1)if(ae[Q][re]!==void 0&&ae[Q][re]!==q.charCodeAt(re)){de=!1;break}if(de===!0){Se=he;break}}return Se===r&&K!==r&&(Se=K),Se},s=function q(K){for(var Q=this.internal.write,re=this.internal.putStream,ae=(0,this.internal.getFilters)();ae.indexOf("FlateEncode")!==-1;)ae.splice(ae.indexOf("FlateEncode"),1);K.objectId=this.internal.newObject();var de=[];if(de.push({key:"Type",value:"/XObject"}),de.push({key:"Subtype",value:"/Image"}),de.push({key:"Width",value:K.width}),de.push({key:"Height",value:K.height}),K.colorSpace===S.INDEXED?de.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(K.palette.length/3-1)+" "+("sMask"in K&&K.sMask!==void 0?K.objectId+2:K.objectId+1)+" 0 R]"}):(de.push({key:"ColorSpace",value:"/"+K.colorSpace}),K.colorSpace===S.DEVICE_CMYK&&de.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),de.push({key:"BitsPerComponent",value:K.bitsPerComponent}),"decodeParameters"in K&&K.decodeParameters!==void 0&&de.push({key:"DecodeParms",value:"<<"+K.decodeParameters+">>"}),"transparency"in K&&Array.isArray(K.transparency)&&K.transparency.length>0){for(var he="",Se=0,ke=K.transparency.length;Se<ke;Se++)he+=K.transparency[Se]+" "+K.transparency[Se]+" ";de.push({key:"Mask",value:"["+he+"]"})}K.sMask!==void 0&&de.push({key:"SMask",value:K.objectId+1+" 0 R"});var Le=K.filter!==void 0?["/"+K.filter]:void 0;if(re({data:K.data,additionalKeyValues:de,alreadyAppliedFilters:Le,objectId:K.objectId}),Q("endobj"),"sMask"in K&&K.sMask!==void 0){var fe,F=(fe=K.sMaskBitsPerComponent)!==null&&fe!==void 0?fe:K.bitsPerComponent,te={width:K.width,height:K.height,colorSpace:"DeviceGray",bitsPerComponent:F,data:K.sMask};"filter"in K&&(te.decodeParameters="/Predictor ".concat(K.predictor," /Colors 1 /BitsPerComponent ").concat(F," /Columns ").concat(K.width),te.filter=K.filter),q.call(this,te)}if(K.colorSpace===S.INDEXED){var Y=this.internal.newObject();re({data:z(new Uint8Array(K.palette)),objectId:Y}),Q("endobj")}},l=function(){var q=this.internal.collections[t+"images"];for(var K in q)s.call(this,q[K])},o=function(){var q,K=this.internal.collections[t+"images"],Q=this.internal.write;for(var re in K)Q("/I"+(q=K[re]).index,q.objectId,"0","R")},c=function(){this.internal.collections[t+"images"]||(this.internal.collections[t+"images"]={},this.internal.events.subscribe("putResources",l),this.internal.events.subscribe("putXobjectDict",o))},d=function(){var q=this.internal.collections[t+"images"];return c.call(this),q},f=function(){return Object.keys(this.internal.collections[t+"images"]).length},p=function(q){return typeof e["process"+q.toUpperCase()]=="function"},y=function(q){return Xa(q)==="object"&&q.nodeType===1},g=function(q,K){if(q.nodeName==="IMG"&&q.hasAttribute("src")){var Q=""+q.getAttribute("src");if(Q.indexOf("data:image/")===0)return sy(unescape(Q).split("base64,").pop());var re=e.loadFile(Q,!0);if(re!==void 0)return re}if(q.nodeName==="CANVAS"){if(q.width===0||q.height===0)throw new Error("Given canvas must have data. Canvas width: "+q.width+", height: "+q.height);var ae;switch(K){case"PNG":ae="image/png";break;case"WEBP":ae="image/webp";break;default:ae="image/jpeg"}return sy(q.toDataURL(ae,1).split("base64,").pop())}},N=function(q){var K=this.internal.collections[t+"images"];if(K){for(var Q in K)if(q===K[Q].alias)return K[Q]}},w=function(q,K,Q){return q||K||(q=-96,K=-96),q<0&&(q=-1*Q.width*72/q/this.internal.scaleFactor),K<0&&(K=-1*Q.height*72/K/this.internal.scaleFactor),q===0&&(q=K*Q.width/Q.height),K===0&&(K=q*Q.height/Q.width),[q,K]},k=function(q,K,Q,re,ae,de){var he=w.call(this,Q,re,ae),Se=this.internal.getCoordinateString,ke=this.internal.getVerticalCoordinateString,Le=d.call(this);if(Q=he[0],re=he[1],Le[ae.index]=ae,de){de*=Math.PI/180;var fe=Math.cos(de),F=Math.sin(de),te=function(ne){return ne.toFixed(4)},Y=[te(fe),te(F),te(-1*F),te(fe),0,0,"cm"]}this.internal.write("q"),de?(this.internal.write([1,"0","0",1,Se(q),ke(K+re),"cm"].join(" ")),this.internal.write(Y.join(" ")),this.internal.write([Se(Q),"0","0",Se(re),"0","0","cm"].join(" "))):this.internal.write([Se(Q),"0","0",Se(re),Se(q),ke(K+re),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+ae.index+" Do"),this.internal.write("Q")},S=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var O=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},E=e.__addimage__.sHashCode=function(q){var K,Q,re=0;if(typeof q=="string")for(Q=q.length,K=0;K<Q;K++)re=(re<<5)-re+q.charCodeAt(K),re|=0;else if(W(q))for(Q=q.byteLength/2,K=0;K<Q;K++)re=(re<<5)-re+q[K],re|=0;return re},D=e.__addimage__.validateStringAsBase64=function(q){(q=q||"").toString().trim();var K=!0;return q.length===0&&(K=!1),q.length%4!=0&&(K=!1),/^[A-Za-z0-9+/]+$/.test(q.substr(0,q.length-2))===!1&&(K=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(q.substr(-2))===!1&&(K=!1),K},H=e.__addimage__.extractImageFromDataUrl=function(q){if(q==null||!(q=q.trim()).startsWith("data:"))return null;var K=q.indexOf(",");return K<0?null:q.substring(0,K).trim().endsWith("base64")?q.substring(K+1):null};e.__addimage__.isArrayBuffer=function(q){return q instanceof ArrayBuffer};var W=e.__addimage__.isArrayBufferView=function(q){return q instanceof Int8Array||q instanceof Uint8Array||q instanceof Uint8ClampedArray||q instanceof Int16Array||q instanceof Uint16Array||q instanceof Int32Array||q instanceof Uint32Array||q instanceof Float32Array||q instanceof Float64Array},R=e.__addimage__.binaryStringToUint8Array=function(q){for(var K=q.length,Q=new Uint8Array(K),re=0;re<K;re++)Q[re]=q.charCodeAt(re);return Q},z=e.__addimage__.arrayBufferToBinaryString=function(q){for(var K="",Q=W(q)?q:new Uint8Array(q),re=0;re<Q.length;re+=8192)K+=String.fromCharCode.apply(null,Q.subarray(re,re+8192));return K};e.addImage=function(){var q,K,Q,re,ae,de,he,Se,ke;if(typeof arguments[1]=="number"?(K=r,Q=arguments[1],re=arguments[2],ae=arguments[3],de=arguments[4],he=arguments[5],Se=arguments[6],ke=arguments[7]):(K=arguments[1],Q=arguments[2],re=arguments[3],ae=arguments[4],de=arguments[5],he=arguments[6],Se=arguments[7],ke=arguments[8]),Xa(q=arguments[0])==="object"&&!y(q)&&"imageData"in q){var Le=q;q=Le.imageData,K=Le.format||K||r,Q=Le.x||Q||0,re=Le.y||re||0,ae=Le.w||Le.width||ae,de=Le.h||Le.height||de,he=Le.alias||he,Se=Le.compression||Se,ke=Le.rotation||Le.angle||ke}var fe=this.internal.getFilters();if(Se===void 0&&fe.indexOf("FlateEncode")!==-1&&(Se="SLOW"),isNaN(Q)||isNaN(re))throw new Error("Invalid coordinates passed to jsPDF.addImage");c.call(this);var F=U.call(this,q,K,he,Se);return k.call(this,Q,re,ae,de,F,ke),this};var U=function(q,K,Q,re){var ae,de,he;if(typeof q=="string"&&a(q)===r){q=unescape(q);var Se=Z(q,!1);(Se!==""||(Se=e.loadFile(q,!0))!==void 0)&&(q=Se)}if(y(q)&&(q=g(q,K)),K=a(q,K),!p(K))throw new Error("addImage does not support files of type '"+K+"', please ensure that a plugin for '"+K+"' support is added.");if(((he=Q)==null||he.length===0)&&(Q=(function(ke){return typeof ke=="string"||W(ke)?E(ke):W(ke.data)?E(ke.data):null})(q)),(ae=N.call(this,Q))||(q instanceof Uint8Array||K==="RGBA"||(de=q,q=R(q)),ae=this["process"+K.toUpperCase()](q,f.call(this),Q,(function(ke){return ke&&typeof ke=="string"&&(ke=ke.toUpperCase()),ke in e.image_compression?ke:O.NONE})(re),de)),!ae)throw new Error("An unknown error occurred whilst processing the image.");return ae},Z=e.__addimage__.convertBase64ToBinaryString=function(q,K){K=typeof K!="boolean"||K;var Q,re="";if(typeof q=="string"){var ae;Q=(ae=H(q))!==null&&ae!==void 0?ae:q;try{re=sy(Q)}catch(de){if(K)throw D(Q)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+de.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return re};e.getImageProperties=function(q){var K,Q,re="";if(y(q)&&(q=g(q)),typeof q=="string"&&a(q)===r&&((re=Z(q,!1))===""&&(re=e.loadFile(q)||""),q=re),Q=a(q),!p(Q))throw new Error("addImage does not support files of type '"+Q+"', please ensure that a plugin for '"+Q+"' support is added.");if(q instanceof Uint8Array||(q=R(q)),!(K=this["process"+Q.toUpperCase()](q)))throw new Error("An unknown error occurred whilst processing the image");return K.fileType=Q,K}})(rn.API),(function(e){var t=function(r){if(r!==void 0&&r!="")return!0};rn.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(r){for(var n,a,s,l=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(r.objId),d=r.pageContext.annotations,f=!1,p=0;p<d.length&&!f;p++)switch((n=d[p]).type){case"link":(t(n.options.url)||t(n.options.pageNumber))&&(f=!0);break;case"reference":case"text":case"freetext":f=!0}if(f!=0){this.internal.write("/Annots [");for(var y=0;y<d.length;y++){n=d[y];var g=this.internal.pdfEscape,N=this.internal.getEncryptor(r.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var w=this.internal.newAdditionalObject(),k=this.internal.newAdditionalObject(),S=this.internal.getEncryptor(w.objId),O=n.title||"Note";s="<</Type /Annot /Subtype /Text "+(a="/Rect ["+l(n.bounds.x)+" "+o(n.bounds.y+n.bounds.h)+" "+l(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y)+"] ")+"/Contents ("+g(S(n.contents))+")",s+=" /Popup "+k.objId+" 0 R",s+=" /P "+c.objId+" 0 R",s+=" /T ("+g(S(O))+") >>",w.content=s;var E=w.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(a="/Rect ["+l(n.bounds.x+30)+" "+o(n.bounds.y+n.bounds.h)+" "+l(n.bounds.x+n.bounds.w+30)+" "+o(n.bounds.y)+"] ")+" /Parent "+E,n.open&&(s+=" /Open true"),s+=" >>",k.content=s,this.internal.write(w.objId,"0 R",k.objId,"0 R");break;case"freetext":a="/Rect ["+l(n.bounds.x)+" "+o(n.bounds.y)+" "+l(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y+n.bounds.h)+"] ";var D=n.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+a+"/Contents ("+g(N(n.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+D+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(n.options.name){var H=this.annotations._nameMap[n.options.name];n.options.pageNumber=H.page,n.options.top=H.y}else n.options.top||(n.options.top=0);if(a="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",s="",n.options.url)s="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /A <</S /URI /URI ("+g(N(n.options.url))+") >>";else if(n.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,s+=" /FitV "+n.options.left+"]";break;default:var W=o(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),s+=" /XYZ "+n.options.left+" "+W+" "+n.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),e.createAnnotation=function(r){var n=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":n.pageContext.annotations.push(r)}},e.link=function(r,n,a,s,l){var o=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,d=this.internal.getVerticalCoordinateString;o.pageContext.annotations.push({finalBounds:{x:c(r),y:d(n),w:c(r+a),h:d(n+s)},options:l,type:"link"})},e.textWithLink=function(r,n,a,s){var l,o,c=this.getTextWidth(r),d=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){o=s.maxWidth;var f=this.splitTextToSize(r,o).length;l=Math.ceil(d*f)}else o=c,l=d;return this.text(r,n,a,s),a+=.2*d,s.align==="center"&&(n-=c/2),s.align==="right"&&(n-=c),this.link(n,a-d,o,l,s),c},e.getTextWidth=function(r){var n=this.internal.getFontSize();return this.getStringUnitWidth(r)*n/this.internal.scaleFactor}})(rn.API),(function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},a=[1570,1571,1573,1575];e.__arabicParser__={};var s=e.__arabicParser__.isInArabicSubstitutionA=function(w){return t[w.charCodeAt(0)]!==void 0},l=e.__arabicParser__.isArabicLetter=function(w){return typeof w=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(w)},o=e.__arabicParser__.isArabicEndLetter=function(w){return l(w)&&s(w)&&t[w.charCodeAt(0)].length<=2},c=e.__arabicParser__.isArabicAlfLetter=function(w){return l(w)&&a.indexOf(w.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(w){return l(w)&&s(w)&&t[w.charCodeAt(0)].length>=1};var d=e.__arabicParser__.arabicLetterHasFinalForm=function(w){return l(w)&&s(w)&&t[w.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(w){return l(w)&&s(w)&&t[w.charCodeAt(0)].length>=3};var f=e.__arabicParser__.arabicLetterHasMedialForm=function(w){return l(w)&&s(w)&&t[w.charCodeAt(0)].length==4},p=e.__arabicParser__.resolveLigatures=function(w){var k=0,S=r,O="",E=0;for(k=0;k<w.length;k+=1)S[w.charCodeAt(k)]!==void 0?(E++,typeof(S=S[w.charCodeAt(k)])=="number"&&(O+=String.fromCharCode(S),S=r,E=0),k===w.length-1&&(S=r,O+=w.charAt(k-(E-1)),k-=E-1,E=0)):(S=r,O+=w.charAt(k-E),k-=E,E=0);return O};e.__arabicParser__.isArabicDiacritic=function(w){return w!==void 0&&n[w.charCodeAt(0)]!==void 0};var y=e.__arabicParser__.getCorrectForm=function(w,k,S){return l(w)?s(w)===!1?-1:!d(w)||!l(k)&&!l(S)||!l(S)&&o(k)||o(w)&&!l(k)||o(w)&&c(k)||o(w)&&o(k)?0:f(w)&&l(k)&&!o(k)&&l(S)&&d(S)?3:o(w)||!l(S)?1:2:-1},g=function(w){var k=0,S=0,O=0,E="",D="",H="",W=(w=w||"").split("\\s+"),R=[];for(k=0;k<W.length;k+=1){for(R.push(""),S=0;S<W[k].length;S+=1)E=W[k][S],D=W[k][S-1],H=W[k][S+1],l(E)?(O=y(E,D,H),R[k]+=O!==-1?String.fromCharCode(t[E.charCodeAt(0)][O]):E):R[k]+=E;R[k]=p(R[k])}return R.join(" ")},N=e.__arabicParser__.processArabic=e.processArabic=function(){var w,k=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,S=[];if(Array.isArray(k)){var O=0;for(S=[],O=0;O<k.length;O+=1)Array.isArray(k[O])?S.push([g(k[O][0]),k[O][1],k[O][2]]):S.push([g(k[O])]);w=S}else w=g(k);return typeof arguments[0]=="string"?w:(arguments[0].text=w,arguments[0])};e.events.push(["preProcessText",N])})(rn.API),rn.API.autoPrint=function(e){var t;return(e=e||{}).variant=e.variant||"non-conform",e.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})),this},(function(e){var t=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(o){r=o}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(o){n=isNaN(o)||Number.isInteger(o)===!1||o<0?150:o,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var a=300;Object.defineProperty(this,"height",{get:function(){return a},set:function(o){a=isNaN(o)||Number.isInteger(o)===!1||o<0?300:o,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=a+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(o){s=o}});var l={};Object.defineProperty(this,"style",{get:function(){return l},set:function(o){l=o}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(r,n){var a;if((r=r||"2d")!=="2d")return null;for(a in n)this.pdf.context2d.hasOwnProperty(a)&&(this.pdf.context2d[a]=n[a]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])})(rn.API),(function(e){var t={left:0,top:0,bottom:0,right:0},r=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),a.call(this))},a=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(w){c=w}});var d=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return d},set:function(w){d=w}});var f=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return f},set:function(w){f=w}});var p=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return p},set:function(w){p=w}});var y=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return y},set:function(w){y=w}});var g=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return g},set:function(w){g=w}});var N=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return N},set:function(w){N=w}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(c){return n.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},e.getTextDimensions=function(c,d){n.call(this);var f=(d=d||{}).fontSize||this.getFontSize(),p=d.font||this.getFont(),y=d.scaleFactor||this.internal.scaleFactor,g=0,N=0,w=0,k=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var S=d.maxWidth;S>0?typeof c=="string"?c=this.splitTextToSize(c,S):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(E,D){return E.concat(k.splitTextToSize(D,S))},[])):c=Array.isArray(c)?c:[c];for(var O=0;O<c.length;O++)g<(w=this.getStringUnitWidth(c[O],{font:p})*f)&&(g=w);return g!==0&&(N=c.length),{w:g/=y,h:Math.max((N*f*this.getLineHeightFactor()-f*(this.getLineHeightFactor()-1))/y,0)}},e.cellAddPage=function(){n.call(this),this.addPage();var c=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new s(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var l=e.cell=function(){var c;c=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),n.call(this);var d=this.internal.__cell__.lastCell,f=this.internal.__cell__.padding,p=this.internal.__cell__.margins||t,y=this.internal.__cell__.tableHeaderRow,g=this.internal.__cell__.printHeaders;return d.lineNumber!==void 0&&(d.lineNumber===c.lineNumber?(c.x=(d.x||0)+(d.width||0),c.y=d.y||0):d.y+d.height+c.height+p.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=p.top,g&&y&&(this.printHeaderRow(c.lineNumber,!0),c.y+=y[0].height)):c.y=d.y+d.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,r===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-f,c.y+f,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+f,{align:"center",baseline:"top",maxWidth:c.width-f-f}):this.text(c.text,c.x+f,c.y+f,{align:"left",baseline:"top",maxWidth:c.width-f-f})),this.internal.__cell__.lastCell=c,this};e.table=function(c,d,f,p,y){if(n.call(this),!f)throw new Error("No data for PDF table.");var g,N,w,k,S=[],O=[],E=[],D={},H={},W=[],R=[],z=(y=y||{}).autoSize||!1,U=y.printHeaders!==!1,Z=y.css&&y.css["font-size"]!==void 0?16*y.css["font-size"]:y.fontSize||12,q=y.margins||Object.assign({width:this.getPageWidth()},t),K=typeof y.padding=="number"?y.padding:3,Q=y.headerBackgroundColor||"#c8c8c8",re=y.headerTextColor||"#000";if(a.call(this),this.internal.__cell__.printHeaders=U,this.internal.__cell__.margins=q,this.internal.__cell__.table_font_size=Z,this.internal.__cell__.padding=K,this.internal.__cell__.headerBackgroundColor=Q,this.internal.__cell__.headerTextColor=re,this.setFontSize(Z),p==null)O=S=Object.keys(f[0]),E=S.map(function(){return"left"});else if(Array.isArray(p)&&Xa(p[0])==="object")for(S=p.map(function(Le){return Le.name}),O=p.map(function(Le){return Le.prompt||Le.name||""}),E=p.map(function(Le){return Le.align||"left"}),g=0;g<p.length;g+=1)H[p[g].name]=.7499990551181103*p[g].width;else Array.isArray(p)&&typeof p[0]=="string"&&(O=S=p,E=S.map(function(){return"left"}));if(z||Array.isArray(p)&&typeof p[0]=="string")for(g=0;g<S.length;g+=1){for(D[k=S[g]]=f.map(function(Le){return Le[k]}),this.setFont(void 0,"bold"),W.push(this.getTextDimensions(O[g],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),N=D[k],this.setFont(void 0,"normal"),w=0;w<N.length;w+=1)W.push(this.getTextDimensions(N[w],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);H[k]=Math.max.apply(null,W)+K+K,W=[]}if(U){var ae={};for(g=0;g<S.length;g+=1)ae[S[g]]={},ae[S[g]].text=O[g],ae[S[g]].align=E[g];var de=o.call(this,ae,H);R=S.map(function(Le){return new s(c,d,H[Le],de,ae[Le].text,void 0,ae[Le].align)}),this.setTableHeaderRow(R),this.printHeaderRow(1,!1)}var he=p.reduce(function(Le,fe){return Le[fe.name]=fe.align,Le},{});for(g=0;g<f.length;g+=1){"rowStart"in y&&y.rowStart instanceof Function&&y.rowStart({row:g,data:f[g]},this);var Se=o.call(this,f[g],H);for(w=0;w<S.length;w+=1){var ke=f[g][S[w]];"cellStart"in y&&y.cellStart instanceof Function&&y.cellStart({row:g,col:w,data:ke},this),l.call(this,new s(c,d,H[S[w]],Se,ke,g+2,he[S[w]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=d,this};var o=function(c,d){var f=this.internal.__cell__.padding,p=this.internal.__cell__.table_font_size,y=this.internal.scaleFactor;return Object.keys(c).map(function(g){var N=c[g];return this.splitTextToSize(N.hasOwnProperty("text")?N.text:N,d[g]-f-f)},this).map(function(g){return this.getLineHeightFactor()*g.length*p/y+f+f},this).reduce(function(g,N){return Math.max(g,N)},0)};e.setTableHeaderRow=function(c){n.call(this),this.internal.__cell__.tableHeaderRow=c},e.printHeaderRow=function(c,d){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var f;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var p=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(p[0],p[1],p[2],p[3],void 0,-1)}this.setFont(void 0,"bold");for(var y=[],g=0;g<this.internal.__cell__.tableHeaderRow.length;g+=1){f=this.internal.__cell__.tableHeaderRow[g].clone(),d&&(f.y=this.internal.__cell__.margins.top||0,y.push(f)),f.lineNumber=c;var N=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),l.call(this,f),this.setTextColor(N)}y.length>0&&this.setTableHeaderRow(y),this.setFont(void 0,"normal"),r=!1}})(rn.API);var OW={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},PW=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],ZS=TW(PW),IW=[100,200,300,400,500,600,700,800,900],BEe=TW(IW);function DN(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),r=(function(s){return OW[s=s||"normal"]?s:"normal"})(e.style),n=(function(s){return s?typeof s=="number"?s>=100&&s<=900&&s%100==0?s:400:/^\d00$/.test(s)?parseInt(s):s==="bold"?700:400:400})(e.weight),a=(function(s){return typeof ZS[s=s||"normal"]=="number"?s:"normal"})(e.stretch);return{family:t,style:r,weight:n,stretch:a,src:e.src||[],ref:e.ref||{name:t,style:[a,r,n].join(" ")}}}function KM(e,t,r,n){var a;for(a=r;a>=0&&a<t.length;a+=n)if(e[t[a]])return e[t[a]];for(a=r;a>=0&&a<t.length;a-=n)if(e[t[a]])return e[t[a]]}var UEe={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},GM={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function XM(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function YM(e){return e.trimLeft()}function zEe(e,t){for(var r=0;r<e.length;){if(e.charAt(r)===t)return[e.substring(0,r),e.substring(r+1)];r+=1}return null}function qEe(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var X2,ZM,QM,Qx,Y2,JM,eL,tL,MN=["times"];function rL(e,t,r,n,a){var s=4,l=aL;switch(a){case rn.API.image_compression.FAST:s=1,l=nL;break;case rn.API.image_compression.MEDIUM:s=6,l=sL;break;case rn.API.image_compression.SLOW:s=9,l=iL}e=(function(c,d,f,p){for(var y,g=c.length/d,N=new Uint8Array(c.length+g),w=[HEe,nL,aL,sL,iL],k=0;k<g;k+=1){var S=k*d,O=c.subarray(S,S+d);if(p)N.set(p(O,f,y),S+k);else{for(var E=w.length,D=[],H=0;H<E;H+=1)D[H]=w[H](O,f,y);var W=VEe(D.concat());N.set(D[W],S+k)}y=O}return N})(e,t,Math.ceil(r*n/8),l);var o=$S(e,{level:s});return rn.API.__addimage__.arrayBufferToBinaryString(o)}function HEe(e){var t=Array.apply([],e);return t.unshift(0),t}function nL(e,t){var r=e.length,n=[];n[0]=1;for(var a=0;a<r;a+=1){var s=e[a-t]||0;n[a+1]=e[a]-s+256&255}return n}function aL(e,t,r){var n=e.length,a=[];a[0]=2;for(var s=0;s<n;s+=1){var l=r&&r[s]||0;a[s+1]=e[s]-l+256&255}return a}function sL(e,t,r){var n=e.length,a=[];a[0]=3;for(var s=0;s<n;s+=1){var l=e[s-t]||0,o=r&&r[s]||0;a[s+1]=e[s]+256-(l+o>>>1)&255}return a}function iL(e,t,r){var n=e.length,a=[];a[0]=4;for(var s=0;s<n;s+=1){var l=$Ee(e[s-t]||0,r&&r[s]||0,r&&r[s-t]||0);a[s+1]=e[s]-l+256&255}return a}function $Ee(e,t,r){if(e===t&&t===r)return e;var n=Math.abs(t-r),a=Math.abs(e-r),s=Math.abs(e+t-r-r);return n<=a&&n<=s?e:a<=s?t:r}function VEe(e){var t=e.map(function(r){return r.reduce(function(n,a){return n+Math.abs(a)},0)});return t.indexOf(Math.min.apply(null,t))}function LN(e,t,r){var n=t*r,a=Math.floor(n/8),s=16-(n-8*a+r),l=(1<<r)-1;return DW(e,a)>>s&l}function lL(e,t,r,n){var a=r*n,s=Math.floor(a/8),l=16-(a-8*s+n),o=(1<<n)-1,c=(t&o)<<l;(function(d,f,p){if(f+1<d.byteLength)d.setUint16(f,p,!1);else{var y=p>>8&255;d.setUint8(f,y)}})(e,s,DW(e,s)&~(o<<l)&65535|c)}function DW(e,t){return t+1<e.byteLength?e.getUint16(t,!1):e.getUint8(t)<<8}function WEe(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=e[t++]|e[t++]<<8,n=e[t++]|e[t++]<<8,a=e[t++],s=a>>7,l=1<<1+(7&a);e[t++],e[t++];var o=null,c=null;s&&(o=t,c=l,t+=3*l);var d=!0,f=[],p=0,y=null,g=0,N=null;for(this.width=r,this.height=n;d&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,N=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((q=e[t++])>=0))throw Error("Invalid block size");if(q===0)break;t+=q}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var w=e[t++];p=e[t++]|e[t++]<<8,y=e[t++],1&w||(y=null),g=w>>2&7,t++;break;case 254:for(;;){if(!((q=e[t++])>=0))throw Error("Invalid block size");if(q===0)break;t+=q}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var k=e[t++]|e[t++]<<8,S=e[t++]|e[t++]<<8,O=e[t++]|e[t++]<<8,E=e[t++]|e[t++]<<8,D=e[t++],H=D>>6&1,W=1<<1+(7&D),R=o,z=c,U=!1;D>>7&&(U=!0,R=t,z=W,t+=3*W);var Z=t;for(t++;;){var q;if(!((q=e[t++])>=0))throw Error("Invalid block size");if(q===0)break;t+=q}f.push({x:k,y:S,width:O,height:E,has_local_palette:U,palette_offset:R,palette_size:z,data_offset:Z,data_length:t-Z,transparent_index:y,interlaced:!!H,delay:p,disposal:g});break;case 59:d=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return f.length},this.loopCount=function(){return N},this.frameInfo=function(K){if(K<0||K>=f.length)throw new Error("Frame index out of range.");return f[K]},this.decodeAndBlitFrameBGRA=function(K,Q){var re=this.frameInfo(K),ae=re.width*re.height,de=new Uint8Array(ae);oL(e,re.data_offset,de,ae);var he=re.palette_offset,Se=re.transparent_index;Se===null&&(Se=256);var ke=re.width,Le=r-ke,fe=ke,F=4*(re.y*r+re.x),te=4*((re.y+re.height)*r+re.x),Y=F,ne=4*Le;re.interlaced===!0&&(ne+=4*r*7);for(var ee=8,Ce=0,me=de.length;Ce<me;++Ce){var se=de[Ce];if(fe===0&&(fe=ke,(Y+=ne)>=te&&(ne=4*Le+4*r*(ee-1),Y=F+(ke+Le)*(ee<<1),ee>>=1)),se===Se)Y+=4;else{var je=e[he+3*se],be=e[he+3*se+1],ie=e[he+3*se+2];Q[Y++]=ie,Q[Y++]=be,Q[Y++]=je,Q[Y++]=255}--fe}},this.decodeAndBlitFrameRGBA=function(K,Q){var re=this.frameInfo(K),ae=re.width*re.height,de=new Uint8Array(ae);oL(e,re.data_offset,de,ae);var he=re.palette_offset,Se=re.transparent_index;Se===null&&(Se=256);var ke=re.width,Le=r-ke,fe=ke,F=4*(re.y*r+re.x),te=4*((re.y+re.height)*r+re.x),Y=F,ne=4*Le;re.interlaced===!0&&(ne+=4*r*7);for(var ee=8,Ce=0,me=de.length;Ce<me;++Ce){var se=de[Ce];if(fe===0&&(fe=ke,(Y+=ne)>=te&&(ne=4*Le+4*r*(ee-1),Y=F+(ke+Le)*(ee<<1),ee>>=1)),se===Se)Y+=4;else{var je=e[he+3*se],be=e[he+3*se+1],ie=e[he+3*se+2];Q[Y++]=je,Q[Y++]=be,Q[Y++]=ie,Q[Y++]=255}--fe}}}function oL(e,t,r,n){for(var a=e[t++],s=1<<a,l=s+1,o=l+1,c=a+1,d=(1<<c)-1,f=0,p=0,y=0,g=e[t++],N=new Int32Array(4096),w=null;;){for(;f<16&&g!==0;)p|=e[t++]<<f,f+=8,g===1?g=e[t++]:--g;if(f<c)break;var k=p&d;if(p>>=c,f-=c,k!==s){if(k===l)break;for(var S=k<o?k:w,O=0,E=S;E>s;)E=N[E]>>8,++O;var D=E;if(y+O+(S!==k?1:0)>n)return void fs.log("Warning, gif stream longer than expected.");r[y++]=D;var H=y+=O;for(S!==k&&(r[y++]=D),E=S;O--;)E=N[E],r[--H]=255&E,E>>=8;w!==null&&o<4096&&(N[o++]=w<<8|D,o>=d+1&&c<12&&(++c,d=d<<1|1)),w=k}else o=l+1,d=(1<<(c=a+1))-1,w=null}return y!==n&&fs.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function RN(e){var t,r,n,a,s,l=Math.floor,o=new Array(64),c=new Array(64),d=new Array(64),f=new Array(64),p=new Array(65535),y=new Array(65535),g=new Array(64),N=new Array(64),w=[],k=0,S=7,O=new Array(64),E=new Array(64),D=new Array(64),H=new Array(256),W=new Array(2048),R=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],z=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],U=[0,1,2,3,4,5,6,7,8,9,10,11],Z=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],q=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],K=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],Q=[0,1,2,3,4,5,6,7,8,9,10,11],re=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],ae=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function de(F,te){for(var Y=0,ne=0,ee=new Array,Ce=1;Ce<=16;Ce++){for(var me=1;me<=F[Ce];me++)ee[te[ne]]=[],ee[te[ne]][0]=Y,ee[te[ne]][1]=Ce,ne++,Y++;Y*=2}return ee}function he(F){for(var te=F[0],Y=F[1]-1;Y>=0;)te&1<<Y&&(k|=1<<S),Y--,--S<0&&(k==255?(Se(255),Se(0)):Se(k),S=7,k=0)}function Se(F){w.push(F)}function ke(F){Se(F>>8&255),Se(255&F)}function Le(F,te,Y,ne,ee){for(var Ce,me=ee[0],se=ee[240],je=(function(et,lt){var Ve,Vt,Mt,mr,xr,sr,Ir,er,Xt,Gt,ur=0;for(Xt=0;Xt<8;++Xt){Ve=et[ur],Vt=et[ur+1],Mt=et[ur+2],mr=et[ur+3],xr=et[ur+4],sr=et[ur+5],Ir=et[ur+6];var wr=Ve+(er=et[ur+7]),lr=Ve-er,mt=Vt+Ir,kr=Vt-Ir,Ke=Mt+sr,vt=Mt-sr,Kt=mr+xr,tr=mr-xr,Pr=wr+Kt,Nr=wr-Kt,Ge=mt+Ke,Ot=mt-Ke;et[ur]=Pr+Ge,et[ur+4]=Pr-Ge;var hr=.707106781*(Ot+Nr);et[ur+2]=Nr+hr,et[ur+6]=Nr-hr;var $r=.382683433*((Pr=tr+vt)-(Ot=kr+lr)),Dr=.5411961*Pr+$r,Yt=1.306562965*Ot+$r,Mr=.707106781*(Ge=vt+kr),We=lr+Mr,Qt=lr-Mr;et[ur+5]=Qt+Dr,et[ur+3]=Qt-Dr,et[ur+1]=We+Yt,et[ur+7]=We-Yt,ur+=8}for(ur=0,Xt=0;Xt<8;++Xt){Ve=et[ur],Vt=et[ur+8],Mt=et[ur+16],mr=et[ur+24],xr=et[ur+32],sr=et[ur+40],Ir=et[ur+48];var Cr=Ve+(er=et[ur+56]),gr=Ve-er,_n=Vt+Ir,Rr=Vt-Ir,Sn=Mt+sr,we=Mt-sr,Ne=mr+xr,Me=mr-xr,le=Cr+Ne,ve=Cr-Ne,Oe=_n+Sn,nt=_n-Sn;et[ur]=le+Oe,et[ur+32]=le-Oe;var wt=.707106781*(nt+ve);et[ur+16]=ve+wt,et[ur+48]=ve-wt;var ft=.382683433*((le=Me+we)-(nt=Rr+gr)),ht=.5411961*le+ft,bt=1.306562965*nt+ft,Ut=.707106781*(Oe=we+Rr),rr=gr+Ut,Jt=gr-Ut;et[ur+40]=Jt+ht,et[ur+24]=Jt-ht,et[ur+8]=rr+bt,et[ur+56]=rr-bt,ur++}for(Xt=0;Xt<64;++Xt)Gt=et[Xt]*lt[Xt],g[Xt]=Gt>0?Gt+.5|0:Gt-.5|0;return g})(F,te),be=0;be<64;++be)N[R[be]]=je[be];var ie=N[0]-Y;Y=N[0],ie==0?he(ne[0]):(he(ne[y[Ce=32767+ie]]),he(p[Ce]));for(var Te=63;Te>0&&N[Te]==0;)Te--;if(Te==0)return he(me),Y;for(var De,ye=1;ye<=Te;){for(var rt=ye;N[ye]==0&&ye<=Te;)++ye;var st=ye-rt;if(st>=16){De=st>>4;for(var dt=1;dt<=De;++dt)he(se);st&=15}Ce=32767+N[ye],he(ee[(st<<4)+y[Ce]]),he(p[Ce]),ye++}return Te!=63&&he(me),Y}function fe(F){F=Math.min(Math.max(F,1),100),s!=F&&((function(te){for(var Y=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],ne=0;ne<64;ne++){var ee=l((Y[ne]*te+50)/100);ee=Math.min(Math.max(ee,1),255),o[R[ne]]=ee}for(var Ce=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],me=0;me<64;me++){var se=l((Ce[me]*te+50)/100);se=Math.min(Math.max(se,1),255),c[R[me]]=se}for(var je=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],be=0,ie=0;ie<8;ie++)for(var Te=0;Te<8;Te++)d[be]=1/(o[R[be]]*je[ie]*je[Te]*8),f[be]=1/(c[R[be]]*je[ie]*je[Te]*8),be++})(F<50?Math.floor(5e3/F):Math.floor(200-2*F)),s=F)}this.encode=function(F,te){te&&fe(te),w=new Array,k=0,S=7,ke(65496),ke(65504),ke(16),Se(74),Se(70),Se(73),Se(70),Se(0),Se(1),Se(1),Se(0),ke(1),ke(1),Se(0),Se(0),(function(){ke(65499),ke(132),Se(0);for(var Vt=0;Vt<64;Vt++)Se(o[Vt]);Se(1);for(var Mt=0;Mt<64;Mt++)Se(c[Mt])})(),(function(Vt,Mt){ke(65472),ke(17),Se(8),ke(Mt),ke(Vt),Se(3),Se(1),Se(17),Se(0),Se(2),Se(17),Se(1),Se(3),Se(17),Se(1)})(F.width,F.height),(function(){ke(65476),ke(418),Se(0);for(var Vt=0;Vt<16;Vt++)Se(z[Vt+1]);for(var Mt=0;Mt<=11;Mt++)Se(U[Mt]);Se(16);for(var mr=0;mr<16;mr++)Se(Z[mr+1]);for(var xr=0;xr<=161;xr++)Se(q[xr]);Se(1);for(var sr=0;sr<16;sr++)Se(K[sr+1]);for(var Ir=0;Ir<=11;Ir++)Se(Q[Ir]);Se(17);for(var er=0;er<16;er++)Se(re[er+1]);for(var Xt=0;Xt<=161;Xt++)Se(ae[Xt])})(),ke(65498),ke(12),Se(3),Se(1),Se(0),Se(2),Se(17),Se(3),Se(17),Se(0),Se(63),Se(0);var Y=0,ne=0,ee=0;k=0,S=7,this.encode.displayName="_encode_";for(var Ce,me,se,je,be,ie,Te,De,ye,rt=F.data,st=F.width,dt=F.height,et=4*st,lt=0;lt<dt;){for(Ce=0;Ce<et;){for(be=et*lt+Ce,Te=-1,De=0,ye=0;ye<64;ye++)ie=be+(De=ye>>3)*et+(Te=4*(7&ye)),lt+De>=dt&&(ie-=et*(lt+1+De-dt)),Ce+Te>=et&&(ie-=Ce+Te-et+4),me=rt[ie++],se=rt[ie++],je=rt[ie++],O[ye]=(W[me]+W[se+256|0]+W[je+512|0]>>16)-128,E[ye]=(W[me+768|0]+W[se+1024|0]+W[je+1280|0]>>16)-128,D[ye]=(W[me+1280|0]+W[se+1536|0]+W[je+1792|0]>>16)-128;Y=Le(O,d,Y,t,n),ne=Le(E,f,ne,r,a),ee=Le(D,f,ee,r,a),Ce+=32}lt+=8}if(S>=0){var Ve=[];Ve[1]=S+1,Ve[0]=(1<<S+1)-1,he(Ve)}return ke(65497),new Uint8Array(w)},e=e||50,(function(){for(var F=String.fromCharCode,te=0;te<256;te++)H[te]=F(te)})(),t=de(z,U),r=de(K,Q),n=de(Z,q),a=de(re,ae),(function(){for(var F=1,te=2,Y=1;Y<=15;Y++){for(var ne=F;ne<te;ne++)y[32767+ne]=Y,p[32767+ne]=[],p[32767+ne][1]=Y,p[32767+ne][0]=ne;for(var ee=-(te-1);ee<=-F;ee++)y[32767+ee]=Y,p[32767+ee]=[],p[32767+ee][1]=Y,p[32767+ee][0]=te-1+ee;F<<=1,te<<=1}})(),(function(){for(var F=0;F<256;F++)W[F]=19595*F,W[F+256|0]=38470*F,W[F+512|0]=7471*F+32768,W[F+768|0]=-11059*F,W[F+1024|0]=-21709*F,W[F+1280|0]=32768*F+8421375,W[F+1536|0]=-27439*F,W[F+1792|0]=-5329*F})(),fe(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Fd(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function cL(e){function t(U){if(!U)throw Error("assert :P")}function r(U,Z,q){for(var K=0;4>K;K++)if(U[Z+K]!=q.charCodeAt(K))return!0;return!1}function n(U,Z,q,K,Q){for(var re=0;re<Q;re++)U[Z+re]=q[K+re]}function a(U,Z,q,K){for(var Q=0;Q<K;Q++)U[Z+Q]=q}function s(U){return new Int32Array(U)}function l(U,Z){for(var q=[],K=0;K<U;K++)q.push(new Z);return q}function o(U,Z){var q=[];return(function K(Q,re,ae){for(var de=ae[re],he=0;he<de&&(Q.push(ae.length>re+1?[]:new Z),!(ae.length<re+1));he++)K(Q[he],re+1,ae)})(q,0,U),q}var c=function(){var U=this;function Z(P,L){for(var J=1<<L-1>>>0;P&J;)J>>>=1;return J?(P&J-1)+J:P}function q(P,L,J,ce,_e){t(!(ce%J));do P[L+(ce-=J)]=_e;while(0<ce)}function K(P,L,J,ce,_e){if(t(2328>=_e),512>=_e)var Ee=s(512);else if((Ee=s(_e))==null)return 0;return(function(Pe,Fe,Ue,$e,it,Nt){var He,ut,yt=Fe,Rt=1<<Ue,kt=s(16),Lt=s(16);for(t(it!=0),t($e!=null),t(Pe!=null),t(0<Ue),ut=0;ut<it;++ut){if(15<$e[ut])return 0;++kt[$e[ut]]}if(kt[0]==it)return 0;for(Lt[1]=0,He=1;15>He;++He){if(kt[He]>1<<He)return 0;Lt[He+1]=Lt[He]+kt[He]}for(ut=0;ut<it;++ut)He=$e[ut],0<$e[ut]&&(Nt[Lt[He]++]=ut);if(Lt[15]==1)return($e=new Q).g=0,$e.value=Nt[0],q(Pe,yt,1,Rt,$e),Rt;var Wt,fr=-1,ar=Rt-1,Xr=0,Ur=1,Rn=1,Wr=1<<Ue;for(ut=0,He=1,it=2;He<=Ue;++He,it<<=1){if(Ur+=Rn<<=1,0>(Rn-=kt[He]))return 0;for(;0<kt[He];--kt[He])($e=new Q).g=He,$e.value=Nt[ut++],q(Pe,yt+Xr,it,Wr,$e),Xr=Z(Xr,He)}for(He=Ue+1,it=2;15>=He;++He,it<<=1){if(Ur+=Rn<<=1,0>(Rn-=kt[He]))return 0;for(;0<kt[He];--kt[He]){if($e=new Q,(Xr&ar)!=fr){for(yt+=Wr,Wt=1<<(fr=He)-Ue;15>fr&&!(0>=(Wt-=kt[fr]));)++fr,Wt<<=1;Rt+=Wr=1<<(Wt=fr-Ue),Pe[Fe+(fr=Xr&ar)].g=Wt+Ue,Pe[Fe+fr].value=yt-Fe-fr}$e.g=He-Ue,$e.value=Nt[ut++],q(Pe,yt+(Xr>>Ue),it,Wr,$e),Xr=Z(Xr,He)}}return Ur!=2*Lt[15]-1?0:Rt})(P,L,J,ce,_e,Ee)}function Q(){this.value=this.g=0}function re(){this.value=this.g=0}function ae(){this.G=l(5,Q),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=l(xi,re)}function de(P,L,J,ce){t(P!=null),t(L!=null),t(2147483648>ce),P.Ca=254,P.I=0,P.b=-8,P.Ka=0,P.oa=L,P.pa=J,P.Jd=L,P.Yc=J+ce,P.Zc=4<=ce?J+ce-4+1:J,me(P)}function he(P,L){for(var J=0;0<L--;)J|=je(P,128)<<L;return J}function Se(P,L){var J=he(P,L);return se(P)?-J:J}function ke(P,L,J,ce){var _e,Ee=0;for(t(P!=null),t(L!=null),t(4294967288>ce),P.Sb=ce,P.Ra=0,P.u=0,P.h=0,4<ce&&(ce=4),_e=0;_e<ce;++_e)Ee+=L[J+_e]<<8*_e;P.Ra=Ee,P.bb=ce,P.oa=L,P.pa=J}function Le(P){for(;8<=P.u&&P.bb<P.Sb;)P.Ra>>>=8,P.Ra+=P.oa[P.pa+P.bb]<<sl-8>>>0,++P.bb,P.u-=8;ne(P)&&(P.h=1,P.u=0)}function fe(P,L){if(t(0<=L),!P.h&&L<=pi){var J=Y(P)&al[L];return P.u+=L,Le(P),J}return P.h=1,P.u=0}function F(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function te(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function Y(P){return P.Ra>>>(P.u&sl-1)>>>0}function ne(P){return t(P.bb<=P.Sb),P.h||P.bb==P.Sb&&P.u>sl}function ee(P,L){P.u=L,P.h=ne(P)}function Ce(P){P.u>=zn&&(t(P.u>=zn),Le(P))}function me(P){t(P!=null&&P.oa!=null),P.pa<P.Zc?(P.I=(P.oa[P.pa++]|P.I<<8)>>>0,P.b+=8):(t(P!=null&&P.oa!=null),P.pa<P.Yc?(P.b+=8,P.I=P.oa[P.pa++]|P.I<<8):P.Ka?P.b=0:(P.I<<=8,P.b+=8,P.Ka=1))}function se(P){return he(P,1)}function je(P,L){var J=P.Ca;0>P.b&&me(P);var ce=P.b,_e=J*L>>>8,Ee=(P.I>>>ce>_e)+0;for(Ee?(J-=_e,P.I-=_e+1<<ce>>>0):J=_e+1,ce=J,_e=0;256<=ce;)_e+=8,ce>>=8;return ce=7^_e+zl[ce],P.b-=ce,P.Ca=(J<<ce)-1,Ee}function be(P,L,J){P[L+0]=J>>24&255,P[L+1]=J>>16&255,P[L+2]=J>>8&255,P[L+3]=255&J}function ie(P,L){return P[L+0]|P[L+1]<<8}function Te(P,L){return ie(P,L)|P[L+2]<<16}function De(P,L){return ie(P,L)|ie(P,L+2)<<16}function ye(P,L){var J=1<<L;return t(P!=null),t(0<L),P.X=s(J),P.X==null?0:(P.Mb=32-L,P.Xa=L,1)}function rt(P,L){t(P!=null),t(L!=null),t(P.Xa==L.Xa),n(L.X,0,P.X,0,1<<L.Xa)}function st(){this.X=[],this.Xa=this.Mb=0}function dt(P,L,J,ce){t(J!=null),t(ce!=null);var _e=J[0],Ee=ce[0];return _e==0&&(_e=(P*Ee+L/2)/L),Ee==0&&(Ee=(L*_e+P/2)/P),0>=_e||0>=Ee?0:(J[0]=_e,ce[0]=Ee,1)}function et(P,L){return P+(1<<L)-1>>>L}function lt(P,L){return((4278255360&P)+(4278255360&L)>>>0&4278255360)+((16711935&P)+(16711935&L)>>>0&16711935)>>>0}function Ve(P,L){U[L]=function(J,ce,_e,Ee,Pe,Fe,Ue){var $e;for($e=0;$e<Pe;++$e){var it=U[P](Fe[Ue+$e-1],_e,Ee+$e);Fe[Ue+$e]=lt(J[ce+$e],it)}}}function Vt(){this.ud=this.hd=this.jd=0}function Mt(P,L){return((4278124286&(P^L))>>>1)+(P&L)>>>0}function mr(P){return 0<=P&&256>P?P:0>P?0:255<P?255:void 0}function xr(P,L){return mr(P+(P-L+.5>>1))}function sr(P,L,J){return Math.abs(L-J)-Math.abs(P-J)}function Ir(P,L,J,ce,_e,Ee,Pe){for(ce=Ee[Pe-1],J=0;J<_e;++J)Ee[Pe+J]=ce=lt(P[L+J],ce)}function er(P,L,J,ce,_e){var Ee;for(Ee=0;Ee<J;++Ee){var Pe=P[L+Ee],Fe=Pe>>8&255,Ue=16711935&(Ue=(Ue=16711935&Pe)+((Fe<<16)+Fe));ce[_e+Ee]=(4278255360&Pe)+Ue>>>0}}function Xt(P,L){L.jd=255&P,L.hd=P>>8&255,L.ud=P>>16&255}function Gt(P,L,J,ce,_e,Ee){var Pe;for(Pe=0;Pe<ce;++Pe){var Fe=L[J+Pe],Ue=Fe>>>8,$e=Fe,it=255&(it=(it=Fe>>>16)+((P.jd<<24>>24)*(Ue<<24>>24)>>>5));$e=255&($e=($e+=(P.hd<<24>>24)*(Ue<<24>>24)>>>5)+((P.ud<<24>>24)*(it<<24>>24)>>>5)),_e[Ee+Pe]=(4278255360&Fe)+(it<<16)+$e}}function ur(P,L,J,ce,_e){U[L]=function(Ee,Pe,Fe,Ue,$e,it,Nt,He,ut){for(Ue=Nt;Ue<He;++Ue)for(Nt=0;Nt<ut;++Nt)$e[it++]=_e(Fe[ce(Ee[Pe++])])},U[P]=function(Ee,Pe,Fe,Ue,$e,it,Nt){var He=8>>Ee.b,ut=Ee.Ea,yt=Ee.K[0],Rt=Ee.w;if(8>He)for(Ee=(1<<Ee.b)-1,Rt=(1<<He)-1;Pe<Fe;++Pe){var kt,Lt=0;for(kt=0;kt<ut;++kt)kt&Ee||(Lt=ce(Ue[$e++])),it[Nt++]=_e(yt[Lt&Rt]),Lt>>=He}else U["VP8LMapColor"+J](Ue,$e,yt,Rt,it,Nt,Pe,Fe,ut)}}function wr(P,L,J,ce,_e){for(J=L+J;L<J;){var Ee=P[L++];ce[_e++]=Ee>>16&255,ce[_e++]=Ee>>8&255,ce[_e++]=255&Ee}}function lr(P,L,J,ce,_e){for(J=L+J;L<J;){var Ee=P[L++];ce[_e++]=Ee>>16&255,ce[_e++]=Ee>>8&255,ce[_e++]=255&Ee,ce[_e++]=Ee>>24&255}}function mt(P,L,J,ce,_e){for(J=L+J;L<J;){var Ee=(Pe=P[L++])>>16&240|Pe>>12&15,Pe=240&Pe|Pe>>28&15;ce[_e++]=Ee,ce[_e++]=Pe}}function kr(P,L,J,ce,_e){for(J=L+J;L<J;){var Ee=(Pe=P[L++])>>16&248|Pe>>13&7,Pe=Pe>>5&224|Pe>>3&31;ce[_e++]=Ee,ce[_e++]=Pe}}function Ke(P,L,J,ce,_e){for(J=L+J;L<J;){var Ee=P[L++];ce[_e++]=255&Ee,ce[_e++]=Ee>>8&255,ce[_e++]=Ee>>16&255}}function vt(P,L,J,ce,_e,Ee){if(Ee==0)for(J=L+J;L<J;)be(ce,((Ee=P[L++])[0]>>24|Ee[1]>>8&65280|Ee[2]<<8&16711680|Ee[3]<<24)>>>0),_e+=32;else n(ce,_e,P,L,J)}function Kt(P,L){U[L][0]=U[P+"0"],U[L][1]=U[P+"1"],U[L][2]=U[P+"2"],U[L][3]=U[P+"3"],U[L][4]=U[P+"4"],U[L][5]=U[P+"5"],U[L][6]=U[P+"6"],U[L][7]=U[P+"7"],U[L][8]=U[P+"8"],U[L][9]=U[P+"9"],U[L][10]=U[P+"10"],U[L][11]=U[P+"11"],U[L][12]=U[P+"12"],U[L][13]=U[P+"13"],U[L][14]=U[P+"0"],U[L][15]=U[P+"0"]}function tr(P){return P==Af||P==dx||P==dh||P==ux}function Pr(){this.eb=[],this.size=this.A=this.fb=0}function Nr(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Ge(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Pr,this.f.kb=new Nr,this.sd=null}function Ot(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function hr(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function $r(P){return alert("todo:WebPSamplerProcessPlane"),P.T}function Dr(P,L){var J=P.T,ce=L.ba.f.RGBA,_e=ce.eb,Ee=ce.fb+P.ka*ce.A,Pe=zi[L.ba.S],Fe=P.y,Ue=P.O,$e=P.f,it=P.N,Nt=P.ea,He=P.W,ut=L.cc,yt=L.dc,Rt=L.Mc,kt=L.Nc,Lt=P.ka,Wt=P.ka+P.T,fr=P.U,ar=fr+1>>1;for(Lt==0?Pe(Fe,Ue,null,null,$e,it,Nt,He,$e,it,Nt,He,_e,Ee,null,null,fr):(Pe(L.ec,L.fc,Fe,Ue,ut,yt,Rt,kt,$e,it,Nt,He,_e,Ee-ce.A,_e,Ee,fr),++J);Lt+2<Wt;Lt+=2)ut=$e,yt=it,Rt=Nt,kt=He,it+=P.Rc,He+=P.Rc,Ee+=2*ce.A,Pe(Fe,(Ue+=2*P.fa)-P.fa,Fe,Ue,ut,yt,Rt,kt,$e,it,Nt,He,_e,Ee-ce.A,_e,Ee,fr);return Ue+=P.fa,P.j+Wt<P.o?(n(L.ec,L.fc,Fe,Ue,fr),n(L.cc,L.dc,$e,it,ar),n(L.Mc,L.Nc,Nt,He,ar),J--):1&Wt||Pe(Fe,Ue,null,null,$e,it,Nt,He,$e,it,Nt,He,_e,Ee+ce.A,null,null,fr),J}function Yt(P,L,J){var ce=P.F,_e=[P.J];if(ce!=null){var Ee=P.U,Pe=L.ba.S,Fe=Pe==Cf||Pe==dh;L=L.ba.f.RGBA;var Ue=[0],$e=P.ka;Ue[0]=P.T,P.Kb&&($e==0?--Ue[0]:(--$e,_e[0]-=P.width),P.j+P.ka+P.T==P.o&&(Ue[0]=P.o-P.j-$e));var it=L.eb;$e=L.fb+$e*L.A,P=Nf(ce,_e[0],P.width,Ee,Ue,it,$e+(Fe?0:3),L.A),t(J==Ue),P&&tr(Pe)&&Ad(it,$e,Fe,Ee,Ue,L.A)}return 0}function Mr(P){var L=P.ma,J=L.ba.S,ce=11>J,_e=J==ol||J==Bo||J==Cf||J==ch||J==12||tr(J);if(L.memory=null,L.Ib=null,L.Jb=null,L.Nd=null,!xo(L.Oa,P,_e?11:12))return 0;if(_e&&tr(J)&&_l(),P.da)alert("todo:use_scaling");else{if(ce){if(L.Ib=$r,P.Kb){if(J=P.U+1>>1,L.memory=s(P.U+2*J),L.memory==null)return 0;L.ec=L.memory,L.fc=0,L.cc=L.ec,L.dc=L.fc+P.U,L.Mc=L.cc,L.Nc=L.dc+J,L.Ib=Dr,_l()}}else alert("todo:EmitYUV");_e&&(L.Jb=Yt,ce&&fi())}if(ce&&!fu){for(P=0;256>P;++P)qi[P]=89858*(P-128)+fh>>Vo,Kk[P]=-22014*(P-128)+fh,mv[P]=-45773*(P-128),px[P]=113618*(P-128)+fh>>Vo;for(P=t0;P<hu;++P)L=76283*(P-16)+fh>>Vo,Gk[P-t0]=Sa(L,255),Xk[P-t0]=Sa(L+8>>4,15);fu=1}return 1}function We(P){var L=P.ma,J=P.U,ce=P.T;return t(!(1&P.ka)),0>=J||0>=ce?0:(J=L.Ib(P,L),L.Jb!=null&&L.Jb(P,L,J),L.Dc+=J,1)}function Qt(P){P.ma.memory=null}function Cr(P,L,J,ce){return fe(P,8)!=47?0:(L[0]=fe(P,14)+1,J[0]=fe(P,14)+1,ce[0]=fe(P,1),fe(P,3)!=0?0:!P.h)}function gr(P,L){if(4>P)return P+1;var J=P-2>>1;return(2+(1&P)<<J)+fe(L,J)+1}function _n(P,L){return 120<L?L-120:1<=(J=((J=zo[L-1])>>4)*P+(8-(15&J)))?J:1;var J}function Rr(P,L,J){var ce=Y(J),_e=P[L+=255&ce].g-8;return 0<_e&&(ee(J,J.u+8),ce=Y(J),L+=P[L].value,L+=ce&(1<<_e)-1),ee(J,J.u+P[L].g),P[L].value}function Sn(P,L,J){return J.g+=P.g,J.value+=P.value<<L>>>0,t(8>=J.g),P.g}function we(P,L,J){var ce=P.xc;return t((L=ce==0?0:P.vc[P.md*(J>>ce)+(L>>ce)])<P.Wb),P.Ya[L]}function Ne(P,L,J,ce){var _e=P.ab,Ee=P.c*L,Pe=P.C;L=Pe+L;var Fe=J,Ue=ce;for(ce=P.Ta,J=P.Ua;0<_e--;){var $e=P.gc[_e],it=Pe,Nt=L,He=Fe,ut=Ue,yt=(Ue=ce,Fe=J,$e.Ea);switch(t(it<Nt),t(Nt<=$e.nc),$e.hc){case 2:x(He,ut,(Nt-it)*yt,Ue,Fe);break;case 0:var Rt=it,kt=Nt,Lt=Ue,Wt=Fe,fr=(Wr=$e).Ea;Rt==0&&(xe(He,ut,null,null,1,Lt,Wt),Ir(He,ut+1,0,0,fr-1,Lt,Wt+1),ut+=fr,Wt+=fr,++Rt);for(var ar=1<<Wr.b,Xr=ar-1,Ur=et(fr,Wr.b),Rn=Wr.K,Wr=Wr.w+(Rt>>Wr.b)*Ur;Rt<kt;){var sa=Rn,us=Wr,Hn=1;for(h(He,ut,Lt,Wt-fr,1,Lt,Wt);Hn<fr;){var zr=(Hn&~Xr)+ar;zr>fr&&(zr=fr),(0,I[sa[us++]>>8&15])(He,ut+ +Hn,Lt,Wt+Hn-fr,zr-Hn,Lt,Wt+Hn),Hn=zr}ut+=fr,Wt+=fr,++Rt&Xr||(Wr+=Ur)}Nt!=$e.nc&&n(Ue,Fe-yt,Ue,Fe+(Nt-it-1)*yt,yt);break;case 1:for(yt=He,kt=ut,fr=(He=$e.Ea)-(Wt=He&~(Lt=(ut=1<<$e.b)-1)),Rt=et(He,$e.b),ar=$e.K,$e=$e.w+(it>>$e.b)*Rt;it<Nt;){for(Xr=ar,Ur=$e,Rn=new Vt,Wr=kt+Wt,sa=kt+He;kt<Wr;)Xt(Xr[Ur++],Rn),B(Rn,yt,kt,ut,Ue,Fe),kt+=ut,Fe+=ut;kt<sa&&(Xt(Xr[Ur++],Rn),B(Rn,yt,kt,fr,Ue,Fe),kt+=fr,Fe+=fr),++it&Lt||($e+=Rt)}break;case 3:if(He==Ue&&ut==Fe&&0<$e.b){for(kt=Ue,He=yt=Fe+(Nt-it)*yt-(Wt=(Nt-it)*et($e.Ea,$e.b)),ut=Ue,Lt=Fe,Rt=[],Wt=(fr=Wt)-1;0<=Wt;--Wt)Rt[Wt]=ut[Lt+Wt];for(Wt=fr-1;0<=Wt;--Wt)kt[He+Wt]=Rt[Wt];b($e,it,Nt,Ue,yt,Ue,Fe)}else b($e,it,Nt,He,ut,Ue,Fe)}Fe=ce,Ue=J}Ue!=J&&n(ce,J,Fe,Ue,Ee)}function Me(P,L){var J=P.V,ce=P.Ba+P.c*P.C,_e=L-P.C;if(t(L<=P.l.o),t(16>=_e),0<_e){var Ee=P.l,Pe=P.Ta,Fe=P.Ua,Ue=Ee.width;if(Ne(P,_e,J,ce),_e=Fe=[Fe],t((J=P.C)<(ce=L)),t(Ee.v<Ee.va),ce>Ee.o&&(ce=Ee.o),J<Ee.j){var $e=Ee.j-J;J=Ee.j,_e[0]+=$e*Ue}if(J>=ce?J=0:(_e[0]+=4*Ee.v,Ee.ka=J-Ee.j,Ee.U=Ee.va-Ee.v,Ee.T=ce-J,J=1),J){if(Fe=Fe[0],11>(J=P.ca).S){var it=J.f.RGBA,Nt=(ce=J.S,_e=Ee.U,Ee=Ee.T,$e=it.eb,it.A),He=Ee;for(it=it.fb+P.Ma*it.A;0<He--;){var ut=Pe,yt=Fe,Rt=_e,kt=$e,Lt=it;switch(ce){case ox:X(ut,yt,Rt,kt,Lt);break;case ol:oe(ut,yt,Rt,kt,Lt);break;case Af:oe(ut,yt,Rt,kt,Lt),Ad(kt,Lt,0,Rt,1,0);break;case cx:ze(ut,yt,Rt,kt,Lt);break;case Bo:vt(ut,yt,Rt,kt,Lt,1);break;case dx:vt(ut,yt,Rt,kt,Lt,1),Ad(kt,Lt,0,Rt,1,0);break;case Cf:vt(ut,yt,Rt,kt,Lt,0);break;case dh:vt(ut,yt,Rt,kt,Lt,0),Ad(kt,Lt,1,Rt,1,0);break;case ch:pe(ut,yt,Rt,kt,Lt);break;case ux:pe(ut,yt,Rt,kt,Lt),Fo(kt,Lt,Rt,1,0);break;case lu:Ae(ut,yt,Rt,kt,Lt);break;default:t(0)}Fe+=Ue,it+=Nt}P.Ma+=Ee}else alert("todo:EmitRescaledRowsYUVA");t(P.Ma<=J.height)}}P.C=L,t(P.C<=P.i)}function le(P){var L;if(0<P.ua)return 0;for(L=0;L<P.Wb;++L){var J=P.Ya[L].G,ce=P.Ya[L].H;if(0<J[1][ce[1]+0].g||0<J[2][ce[2]+0].g||0<J[3][ce[3]+0].g)return 0}return 1}function ve(P,L,J,ce,_e,Ee){if(P.Z!=0){var Pe=P.qd,Fe=P.rd;for(t(Td[P.Z]!=null);L<J;++L)Td[P.Z](Pe,Fe,ce,_e,ce,_e,Ee),Pe=ce,Fe=_e,_e+=Ee;P.qd=Pe,P.rd=Fe}}function Oe(P,L){var J=P.l.ma,ce=J.Z==0||J.Z==1?P.l.j:P.C;if(ce=P.C<ce?ce:P.C,t(L<=P.l.o),L>ce){var _e=P.l.width,Ee=J.ca,Pe=J.tb+_e*ce,Fe=P.V,Ue=P.Ba+P.c*ce,$e=P.gc;t(P.ab==1),t($e[0].hc==3),j($e[0],ce,L,Fe,Ue,Ee,Pe),ve(J,ce,L,Ee,Pe,_e)}P.C=P.Ma=L}function nt(P,L,J,ce,_e,Ee,Pe){var Fe=P.$/ce,Ue=P.$%ce,$e=P.m,it=P.s,Nt=J+P.$,He=Nt;_e=J+ce*_e;var ut=J+ce*Ee,yt=280+it.ua,Rt=P.Pb?Fe:16777216,kt=0<it.ua?it.Wa:null,Lt=it.wc,Wt=Nt<ut?we(it,Ue,Fe):null;t(P.C<Ee),t(ut<=_e);var fr=!1;e:for(;;){for(;fr||Nt<ut;){var ar=0;if(Fe>=Rt){var Xr=Nt-J;t((Rt=P).Pb),Rt.wd=Rt.m,Rt.xd=Xr,0<Rt.s.ua&&rt(Rt.s.Wa,Rt.s.vb),Rt=Fe+ou}if(Ue&Lt||(Wt=we(it,Ue,Fe)),t(Wt!=null),Wt.Qb&&(L[Nt]=Wt.qb,fr=!0),!fr)if(Ce($e),Wt.jc){ar=$e,Xr=L;var Ur=Nt,Rn=Wt.pd[Y(ar)&xi-1];t(Wt.jc),256>Rn.g?(ee(ar,ar.u+Rn.g),Xr[Ur]=Rn.value,ar=0):(ee(ar,ar.u+Rn.g-256),t(256<=Rn.value),ar=Rn.value),ar==0&&(fr=!0)}else ar=Rr(Wt.G[0],Wt.H[0],$e);if($e.h)break;if(fr||256>ar){if(!fr)if(Wt.nd)L[Nt]=(Wt.qb|ar<<8)>>>0;else{if(Ce($e),fr=Rr(Wt.G[1],Wt.H[1],$e),Ce($e),Xr=Rr(Wt.G[2],Wt.H[2],$e),Ur=Rr(Wt.G[3],Wt.H[3],$e),$e.h)break;L[Nt]=(Ur<<24|fr<<16|ar<<8|Xr)>>>0}if(fr=!1,++Nt,++Ue>=ce&&(Ue=0,++Fe,Pe!=null&&Fe<=Ee&&!(Fe%16)&&Pe(P,Fe),kt!=null))for(;He<Nt;)ar=L[He++],kt.X[(506832829*ar&4294967295)>>>kt.Mb]=ar}else if(280>ar){if(ar=gr(ar-256,$e),Xr=Rr(Wt.G[4],Wt.H[4],$e),Ce($e),Xr=_n(ce,Xr=gr(Xr,$e)),$e.h)break;if(Nt-J<Xr||_e-Nt<ar)break e;for(Ur=0;Ur<ar;++Ur)L[Nt+Ur]=L[Nt+Ur-Xr];for(Nt+=ar,Ue+=ar;Ue>=ce;)Ue-=ce,++Fe,Pe!=null&&Fe<=Ee&&!(Fe%16)&&Pe(P,Fe);if(t(Nt<=_e),Ue&Lt&&(Wt=we(it,Ue,Fe)),kt!=null)for(;He<Nt;)ar=L[He++],kt.X[(506832829*ar&4294967295)>>>kt.Mb]=ar}else{if(!(ar<yt))break e;for(fr=ar-280,t(kt!=null);He<Nt;)ar=L[He++],kt.X[(506832829*ar&4294967295)>>>kt.Mb]=ar;ar=Nt,t(!(fr>>>(Xr=kt).Xa)),L[ar]=Xr.X[fr],fr=!0}fr||t($e.h==ne($e))}if(P.Pb&&$e.h&&Nt<_e)t(P.m.h),P.a=5,P.m=P.wd,P.$=P.xd,0<P.s.ua&&rt(P.s.vb,P.s.Wa);else{if($e.h)break e;Pe!=null&&Pe(P,Fe>Ee?Ee:Fe),P.a=0,P.$=Nt-J}return 1}return P.a=3,0}function wt(P){t(P!=null),P.vc=null,P.yc=null,P.Ya=null;var L=P.Wa;L!=null&&(L.X=null),P.vb=null,t(P!=null)}function ft(){var P=new Tr;return P==null?null:(P.a=0,P.xb=wp,Kt("Predictor","VP8LPredictors"),Kt("Predictor","VP8LPredictors_C"),Kt("PredictorAdd","VP8LPredictorsAdd"),Kt("PredictorAdd","VP8LPredictorsAdd_C"),x=er,B=Gt,X=wr,oe=lr,pe=mt,Ae=kr,ze=Ke,U.VP8LMapColor32b=_,U.VP8LMapColor8b=A,P)}function ht(P,L,J,ce,_e){var Ee=1,Pe=[P],Fe=[L],Ue=ce.m,$e=ce.s,it=null,Nt=0;e:for(;;){if(J)for(;Ee&&fe(Ue,1);){var He=Pe,ut=Fe,yt=ce,Rt=1,kt=yt.m,Lt=yt.gc[yt.ab],Wt=fe(kt,2);if(yt.Oc&1<<Wt)Ee=0;else{switch(yt.Oc|=1<<Wt,Lt.hc=Wt,Lt.Ea=He[0],Lt.nc=ut[0],Lt.K=[null],++yt.ab,t(4>=yt.ab),Wt){case 0:case 1:Lt.b=fe(kt,3)+2,Rt=ht(et(Lt.Ea,Lt.b),et(Lt.nc,Lt.b),0,yt,Lt.K),Lt.K=Lt.K[0];break;case 3:var fr,ar=fe(kt,8)+1,Xr=16<ar?0:4<ar?1:2<ar?2:3;if(He[0]=et(Lt.Ea,Xr),Lt.b=Xr,fr=Rt=ht(ar,1,0,yt,Lt.K)){var Ur,Rn=ar,Wr=Lt,sa=1<<(8>>Wr.b),us=s(sa);if(us==null)fr=0;else{var Hn=Wr.K[0],zr=Wr.w;for(us[0]=Wr.K[0][0],Ur=1;Ur<1*Rn;++Ur)us[Ur]=lt(Hn[zr+Ur],us[Ur-1]);for(;Ur<4*sa;++Ur)us[Ur]=0;Wr.K[0]=null,Wr.K[0]=us,fr=1}}Rt=fr;break;case 2:break;default:t(0)}Ee=Rt}}if(Pe=Pe[0],Fe=Fe[0],Ee&&fe(Ue,1)&&!(Ee=1<=(Nt=fe(Ue,4))&&11>=Nt)){ce.a=3;break e}var Er;if(Er=Ee)t:{var ys,Nn,Wn,Ra=ce,bi=Pe,Hi=Fe,Qa=Nt,Qs=J,cl=Ra.m,Js=Ra.s,Jn=[null],ya=1,ws=0,Ca=qo[Qa];r:for(;;){if(Qs&&fe(cl,1)){var vi=fe(cl,3)+2,ks=et(bi,vi),wa=et(Hi,vi),Vs=ks*wa;if(!ht(ks,wa,0,Ra,Jn))break r;for(Jn=Jn[0],Js.xc=vi,ys=0;ys<Vs;++ys){var Fa=Jn[ys]>>8&65535;Jn[ys]=Fa,Fa>=ya&&(ya=Fa+1)}}if(cl.h)break r;for(Nn=0;5>Nn;++Nn){var ei=Ju[Nn];!Nn&&0<Qa&&(ei+=1<<Qa),ws<ei&&(ws=ei)}var ti=l(ya*Ca,Q),Ha=ya,ga=l(Ha,ae);if(ga==null)var dl=null;else t(65536>=Ha),dl=ga;var Is=s(ws);if(dl==null||Is==null||ti==null){Ra.a=1;break r}var hn=ti;for(ys=Wn=0;ys<ya;++ys){var gn=dl[ys],ka=gn.G,ql=gn.H,Wo=0,jl=1,ri=0;for(Nn=0;5>Nn;++Nn){ei=Ju[Nn],ka[Nn]=hn,ql[Nn]=Wn,!Nn&&0<Qa&&(ei+=1<<Qa);a:{var mu,xu=ei,bx=Ra,Ja=Is,Np=hn,_p=Wn,vx=0,Od=bx.m,Yk=fe(Od,1);if(a(Ja,0,0,xu),Yk){var Sp=fe(Od,1)+1,jp=fe(Od,1),yx=fe(Od,jp==0?1:8);Ja[yx]=1,Sp==2&&(Ja[yx=fe(Od,8)]=1);var Ei=1}else{var Ds=s(19),Pf=fe(Od,4)+4;if(19<Pf){bx.a=3;var pu=0;break a}for(mu=0;mu<Pf;++mu)Ds[Ef[mu]]=fe(Od,3);var xh=void 0,r0=void 0,$c=bx,wx=Ds,ph=xu,kx=Ja,Nx=0,Pd=$c.m,Cp=8,Ap=l(128,Q);n:for(;K(Ap,0,7,wx,19);){if(fe(Pd,1)){var xv=2+2*fe(Pd,3);if((xh=2+fe(Pd,xv))>ph)break n}else xh=ph;for(r0=0;r0<ph&&xh--;){Ce(Pd);var Ep=Ap[0+(127&Y(Pd))];ee(Pd,Pd.u+Ep.g);var gu=Ep.value;if(16>gu)kx[r0++]=gu,gu!=0&&(Cp=gu);else{var pv=gu==16,gv=gu-16,bv=uh[gv],Tp=fe(Pd,Uo[gv])+bv;if(r0+Tp>ph)break n;for(var vv=pv?Cp:0;0<Tp--;)kx[r0++]=vv}}Nx=1;break n}Nx||($c.a=3),Ei=Nx}(Ei=Ei&&!Od.h)&&(vx=K(Np,_p,8,Ja,xu)),Ei&&vx!=0?pu=vx:(bx.a=3,pu=0)}if(pu==0)break r;if(jl&&hx[Nn]==1&&(jl=hn[Wn].g==0),Wo+=hn[Wn].g,Wn+=pu,3>=Nn){var n0,_x=Is[0];for(n0=1;n0<ei;++n0)Is[n0]>_x&&(_x=Is[n0]);ri+=_x}}if(gn.nd=jl,gn.Qb=0,jl&&(gn.qb=(ka[3][ql[3]+0].value<<24|ka[1][ql[1]+0].value<<16|ka[2][ql[2]+0].value)>>>0,Wo==0&&256>ka[0][ql[0]+0].value&&(gn.Qb=1,gn.qb+=ka[0][ql[0]+0].value<<8)),gn.jc=!gn.Qb&&6>ri,gn.jc){var If,Vc=gn;for(If=0;If<xi;++If){var Id=If,Dd=Vc.pd[Id],Sx=Vc.G[0][Vc.H[0]+Id];256<=Sx.value?(Dd.g=Sx.g+256,Dd.value=Sx.value):(Dd.g=0,Dd.value=0,Id>>=Sn(Sx,8,Dd),Id>>=Sn(Vc.G[1][Vc.H[1]+Id],16,Dd),Id>>=Sn(Vc.G[2][Vc.H[2]+Id],0,Dd),Sn(Vc.G[3][Vc.H[3]+Id],24,Dd))}}}Js.vc=Jn,Js.Wb=ya,Js.Ya=dl,Js.yc=ti,Er=1;break t}Er=0}if(!(Ee=Er)){ce.a=3;break e}if(0<Nt){if($e.ua=1<<Nt,!ye($e.Wa,Nt)){ce.a=1,Ee=0;break e}}else $e.ua=0;var jx=ce,a0=Pe,yv=Fe,gh=jx.s,bh=gh.xc;if(jx.c=a0,jx.i=yv,gh.md=et(a0,bh),gh.wc=bh==0?-1:(1<<bh)-1,J){ce.xb=cu;break e}if((it=s(Pe*Fe))==null){ce.a=1,Ee=0;break e}Ee=(Ee=nt(ce,it,0,Pe,Fe,Fe,null))&&!Ue.h;break e}return Ee?(_e!=null?_e[0]=it:(t(it==null),t(J)),ce.$=0,J||wt($e)):wt($e),Ee}function bt(P,L){var J=P.c*P.i,ce=J+L+16*L;return t(P.c<=L),P.V=s(ce),P.V==null?(P.Ta=null,P.Ua=0,P.a=1,0):(P.Ta=P.V,P.Ua=P.Ba+J+L,1)}function Ut(P,L){var J=P.C,ce=L-J,_e=P.V,Ee=P.Ba+P.c*J;for(t(L<=P.l.o);0<ce;){var Pe=16<ce?16:ce,Fe=P.l.ma,Ue=P.l.width,$e=Ue*Pe,it=Fe.ca,Nt=Fe.tb+Ue*J,He=P.Ta,ut=P.Ua;Ne(P,Pe,_e,Ee),po(He,ut,it,Nt,$e),ve(Fe,J,J+Pe,it,Nt,Ue),ce-=Pe,_e+=Pe*P.c,J+=Pe}t(J==L),P.C=P.Ma=L}function rr(){this.ub=this.yd=this.td=this.Rb=0}function Jt(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function dr(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function pr(){this.Yb=(function(){var P=[];return(function L(J,ce,_e){for(var Ee=_e[ce],Pe=0;Pe<Ee&&(J.push(_e.length>ce+1?[]:0),!(_e.length<ce+1));Pe++)L(J[Pe],ce+1,_e)})(P,0,[3,11]),P})()}function Ar(){this.jb=s(3),this.Wc=o([4,8],pr),this.Xc=o([4,17],pr)}function It(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function Un(){this.ld=this.La=this.dd=this.tc=0}function en(){this.Na=this.la=0}function Na(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function La(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function cn(){this.uc=this.M=this.Nb=0,this.wa=Array(new Un),this.Y=0,this.ya=Array(new La),this.aa=0,this.l=new is}function An(){this.y=s(16),this.f=s(8),this.ea=s(8)}function On(){this.cb=this.a=0,this.sc="",this.m=new F,this.Od=new rr,this.Kc=new Jt,this.ed=new It,this.Qa=new dr,this.Ic=this.$c=this.Aa=0,this.D=new cn,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=l(8,F),this.ia=0,this.pb=l(4,Na),this.Pa=new Ar,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new An),this.Hd=0,this.rb=Array(new en),this.sb=0,this.wa=Array(new Un),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new La),this.L=this.aa=0,this.gd=o([4,2],Un),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function is(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function To(){var P=new On;return P!=null&&(P.a=0,P.sc="OK",P.cb=0,P.Xb=0,go||(go=lo)),P}function ln(P,L,J){return P.a==0&&(P.a=L,P.sc=J,P.cb=0),0}function ta(P,L,J){return 3<=J&&P[L+0]==157&&P[L+1]==1&&P[L+2]==42}function el(P,L){if(P==null)return 0;if(P.a=0,P.sc="OK",L==null)return ln(P,2,"null VP8Io passed to VP8GetHeaders()");var J=L.data,ce=L.w,_e=L.ha;if(4>_e)return ln(P,7,"Truncated header.");var Ee=J[ce+0]|J[ce+1]<<8|J[ce+2]<<16,Pe=P.Od;if(Pe.Rb=!(1&Ee),Pe.td=Ee>>1&7,Pe.yd=Ee>>4&1,Pe.ub=Ee>>5,3<Pe.td)return ln(P,3,"Incorrect keyframe parameters.");if(!Pe.yd)return ln(P,4,"Frame not displayable.");ce+=3,_e-=3;var Fe=P.Kc;if(Pe.Rb){if(7>_e)return ln(P,7,"cannot parse picture header");if(!ta(J,ce,_e))return ln(P,3,"Bad code word");Fe.c=16383&(J[ce+4]<<8|J[ce+3]),Fe.Td=J[ce+4]>>6,Fe.i=16383&(J[ce+6]<<8|J[ce+5]),Fe.Ud=J[ce+6]>>6,ce+=7,_e-=7,P.za=Fe.c+15>>4,P.Ub=Fe.i+15>>4,L.width=Fe.c,L.height=Fe.i,L.Da=0,L.j=0,L.v=0,L.va=L.width,L.o=L.height,L.da=0,L.ib=L.width,L.hb=L.height,L.U=L.width,L.T=L.height,a((Ee=P.Pa).jb,0,255,Ee.jb.length),t((Ee=P.Qa)!=null),Ee.Cb=0,Ee.Bb=0,Ee.Fb=1,a(Ee.Zb,0,0,Ee.Zb.length),a(Ee.Lb,0,0,Ee.Lb)}if(Pe.ub>_e)return ln(P,7,"bad partition length");de(Ee=P.m,J,ce,Pe.ub),ce+=Pe.ub,_e-=Pe.ub,Pe.Rb&&(Fe.Ld=se(Ee),Fe.Kd=se(Ee)),Fe=P.Qa;var Ue,$e=P.Pa;if(t(Ee!=null),t(Fe!=null),Fe.Cb=se(Ee),Fe.Cb){if(Fe.Bb=se(Ee),se(Ee)){for(Fe.Fb=se(Ee),Ue=0;4>Ue;++Ue)Fe.Zb[Ue]=se(Ee)?Se(Ee,7):0;for(Ue=0;4>Ue;++Ue)Fe.Lb[Ue]=se(Ee)?Se(Ee,6):0}if(Fe.Bb)for(Ue=0;3>Ue;++Ue)$e.jb[Ue]=se(Ee)?he(Ee,8):255}else Fe.Bb=0;if(Ee.Ka)return ln(P,3,"cannot parse segment header");if((Fe=P.ed).zd=se(Ee),Fe.Tb=he(Ee,6),Fe.wb=he(Ee,3),Fe.Pc=se(Ee),Fe.Pc&&se(Ee)){for($e=0;4>$e;++$e)se(Ee)&&(Fe.vd[$e]=Se(Ee,6));for($e=0;4>$e;++$e)se(Ee)&&(Fe.od[$e]=Se(Ee,6))}if(P.L=Fe.Tb==0?0:Fe.zd?1:2,Ee.Ka)return ln(P,3,"cannot parse filter header");var it=_e;if(_e=Ue=ce,ce=Ue+it,Fe=it,P.Xb=(1<<he(P.m,2))-1,it<3*($e=P.Xb))J=7;else{for(Ue+=3*$e,Fe-=3*$e,it=0;it<$e;++it){var Nt=J[_e+0]|J[_e+1]<<8|J[_e+2]<<16;Nt>Fe&&(Nt=Fe),de(P.Jc[+it],J,Ue,Nt),Ue+=Nt,Fe-=Nt,_e+=3}de(P.Jc[+$e],J,Ue,Fe),J=Ue<ce?0:5}if(J!=0)return ln(P,J,"cannot parse partitions");for(J=he(Ue=P.m,7),_e=se(Ue)?Se(Ue,4):0,ce=se(Ue)?Se(Ue,4):0,Fe=se(Ue)?Se(Ue,4):0,$e=se(Ue)?Se(Ue,4):0,Ue=se(Ue)?Se(Ue,4):0,it=P.Qa,Nt=0;4>Nt;++Nt){if(it.Cb){var He=it.Zb[Nt];it.Fb||(He+=J)}else{if(0<Nt){P.pb[Nt]=P.pb[0];continue}He=J}var ut=P.pb[Nt];ut.Sc[0]=Ho[Sa(He+_e,127)],ut.Sc[1]=$o[Sa(He+0,127)],ut.Eb[0]=2*Ho[Sa(He+ce,127)],ut.Eb[1]=101581*$o[Sa(He+Fe,127)]>>16,8>ut.Eb[1]&&(ut.Eb[1]=8),ut.Qc[0]=Ho[Sa(He+$e,117)],ut.Qc[1]=$o[Sa(He+Ue,127)],ut.lc=He+Ue}if(!Pe.Rb)return ln(P,4,"Not a key frame.");for(se(Ee),Pe=P.Pa,J=0;4>J;++J){for(_e=0;8>_e;++_e)for(ce=0;3>ce;++ce)for(Fe=0;11>Fe;++Fe)$e=je(Ee,ds[J][_e][ce][Fe])?he(Ee,8):fv[J][_e][ce][Fe],Pe.Wc[J][_e].Yb[ce][Fe]=$e;for(_e=0;17>_e;++_e)Pe.Xc[J][_e]=Pe.Wc[J][oa[_e]]}return P.kc=se(Ee),P.kc&&(P.Bd=he(Ee,8)),P.cb=1}function lo(P,L,J,ce,_e,Ee,Pe){var Fe=L[_e].Yb[J];for(J=0;16>_e;++_e){if(!je(P,Fe[J+0]))return _e;for(;!je(P,Fe[J+1]);)if(Fe=L[++_e].Yb[0],J=0,_e==16)return 16;var Ue=L[_e+1].Yb;if(je(P,Fe[J+2])){var $e=P,it=0;if(je($e,(He=Fe)[(Nt=J)+3]))if(je($e,He[Nt+6])){for(Fe=0,Nt=2*(it=je($e,He[Nt+8]))+(He=je($e,He[Nt+9+it])),it=0,He=hv[Nt];He[Fe];++Fe)it+=it+je($e,He[Fe]);it+=3+(8<<Nt)}else je($e,He[Nt+7])?(it=7+2*je($e,165),it+=je($e,145)):it=5+je($e,159);else it=je($e,He[Nt+4])?3+je($e,He[Nt+5]):2;Fe=Ue[2]}else it=1,Fe=Ue[1];Ue=Pe+yp[_e],0>($e=P).b&&me($e);var Nt,He=$e.b,ut=(Nt=$e.Ca>>1)-($e.I>>He)>>31;--$e.b,$e.Ca+=ut,$e.Ca|=1,$e.I-=(Nt+1&ut)<<He,Ee[Ue]=((it^ut)-ut)*ce[(0<_e)+0]}return 16}function pa(P){var L=P.rb[P.sb-1];L.la=0,L.Na=0,a(P.zc,0,0,P.zc.length),P.ja=0}function at(P,L,J,ce,_e){_e=P[L+J+32*ce]+(_e>>3),P[L+J+32*ce]=-256&_e?0>_e?0:255:_e}function cr(P,L,J,ce,_e,Ee){at(P,L,0,J,ce+_e),at(P,L,1,J,ce+Ee),at(P,L,2,J,ce-Ee),at(P,L,3,J,ce-_e)}function _r(P){return(20091*P>>16)+P}function br(P,L,J,ce){var _e,Ee=0,Pe=s(16);for(_e=0;4>_e;++_e){var Fe=P[L+0]+P[L+8],Ue=P[L+0]-P[L+8],$e=(35468*P[L+4]>>16)-_r(P[L+12]),it=_r(P[L+4])+(35468*P[L+12]>>16);Pe[Ee+0]=Fe+it,Pe[Ee+1]=Ue+$e,Pe[Ee+2]=Ue-$e,Pe[Ee+3]=Fe-it,Ee+=4,L++}for(_e=Ee=0;4>_e;++_e)Fe=(P=Pe[Ee+0]+4)+Pe[Ee+8],Ue=P-Pe[Ee+8],$e=(35468*Pe[Ee+4]>>16)-_r(Pe[Ee+12]),at(J,ce,0,0,Fe+(it=_r(Pe[Ee+4])+(35468*Pe[Ee+12]>>16))),at(J,ce,1,0,Ue+$e),at(J,ce,2,0,Ue-$e),at(J,ce,3,0,Fe-it),Ee++,ce+=32}function on(P,L,J,ce){var _e=P[L+0]+4,Ee=35468*P[L+4]>>16,Pe=_r(P[L+4]),Fe=35468*P[L+1]>>16;cr(J,ce,0,_e+Pe,P=_r(P[L+1]),Fe),cr(J,ce,1,_e+Ee,P,Fe),cr(J,ce,2,_e-Ee,P,Fe),cr(J,ce,3,_e-Pe,P,Fe)}function ct(P,L,J,ce,_e){br(P,L,J,ce),_e&&br(P,L+16,J,ce+4)}function Be(P,L,J,ce){tt(P,L+0,J,ce,1),tt(P,L+32,J,ce+128,1)}function vr(P,L,J,ce){var _e;for(P=P[L+0]+4,_e=0;4>_e;++_e)for(L=0;4>L;++L)at(J,ce,L,_e,P)}function Pn(P,L,J,ce){P[L+0]&&qt(P,L+0,J,ce),P[L+16]&&qt(P,L+16,J,ce+4),P[L+32]&&qt(P,L+32,J,ce+128),P[L+48]&&qt(P,L+48,J,ce+128+4)}function qa(P,L,J,ce){var _e,Ee=s(16);for(_e=0;4>_e;++_e){var Pe=P[L+0+_e]+P[L+12+_e],Fe=P[L+4+_e]+P[L+8+_e],Ue=P[L+4+_e]-P[L+8+_e],$e=P[L+0+_e]-P[L+12+_e];Ee[0+_e]=Pe+Fe,Ee[8+_e]=Pe-Fe,Ee[4+_e]=$e+Ue,Ee[12+_e]=$e-Ue}for(_e=0;4>_e;++_e)Pe=(P=Ee[0+4*_e]+3)+Ee[3+4*_e],Fe=Ee[1+4*_e]+Ee[2+4*_e],Ue=Ee[1+4*_e]-Ee[2+4*_e],$e=P-Ee[3+4*_e],J[ce+0]=Pe+Fe>>3,J[ce+16]=$e+Ue>>3,J[ce+32]=Pe-Fe>>3,J[ce+48]=$e-Ue>>3,ce+=64}function ls(P,L,J){var ce,_e=L-32,Ee=ll,Pe=255-P[_e-1];for(ce=0;ce<J;++ce){var Fe,Ue=Ee,$e=Pe+P[L-1];for(Fe=0;Fe<J;++Fe)P[L+Fe]=Ue[$e+P[_e+Fe]];L+=32}}function Ai(P,L){ls(P,L,4)}function Qn(P,L){ls(P,L,8)}function Lr(P,L){ls(P,L,16)}function na(P,L){var J;for(J=0;16>J;++J)n(P,L+32*J,P,L-32,16)}function oo(P,L){var J;for(J=16;0<J;--J)a(P,L,P[L-1],16),L+=32}function wd(P,L,J){var ce;for(ce=0;16>ce;++ce)a(L,J+32*ce,P,16)}function wl(P,L){var J,ce=16;for(J=0;16>J;++J)ce+=P[L-1+32*J]+P[L+J-32];wd(ce>>5,P,L)}function tl(P,L){var J,ce=8;for(J=0;16>J;++J)ce+=P[L-1+32*J];wd(ce>>4,P,L)}function co(P,L){var J,ce=8;for(J=0;16>J;++J)ce+=P[L+J-32];wd(ce>>4,P,L)}function kd(P,L){wd(128,P,L)}function Br(P,L,J){return P+2*L+J+2>>2}function Ll(P,L){var J,ce=L-32;for(ce=new Uint8Array([Br(P[ce-1],P[ce+0],P[ce+1]),Br(P[ce+0],P[ce+1],P[ce+2]),Br(P[ce+1],P[ce+2],P[ce+3]),Br(P[ce+2],P[ce+3],P[ce+4])]),J=0;4>J;++J)n(P,L+32*J,ce,0,ce.length)}function uo(P,L){var J=P[L-1],ce=P[L-1+32],_e=P[L-1+64],Ee=P[L-1+96];be(P,L+0,16843009*Br(P[L-1-32],J,ce)),be(P,L+32,16843009*Br(J,ce,_e)),be(P,L+64,16843009*Br(ce,_e,Ee)),be(P,L+96,16843009*Br(_e,Ee,Ee))}function dn(P,L){var J,ce=4;for(J=0;4>J;++J)ce+=P[L+J-32]+P[L-1+32*J];for(ce>>=3,J=0;4>J;++J)a(P,L+32*J,ce,4)}function oh(P,L){var J=P[L-1+0],ce=P[L-1+32],_e=P[L-1+64],Ee=P[L-1-32],Pe=P[L+0-32],Fe=P[L+1-32],Ue=P[L+2-32],$e=P[L+3-32];P[L+0+96]=Br(ce,_e,P[L-1+96]),P[L+1+96]=P[L+0+64]=Br(J,ce,_e),P[L+2+96]=P[L+1+64]=P[L+0+32]=Br(Ee,J,ce),P[L+3+96]=P[L+2+64]=P[L+1+32]=P[L+0+0]=Br(Pe,Ee,J),P[L+3+64]=P[L+2+32]=P[L+1+0]=Br(Fe,Pe,Ee),P[L+3+32]=P[L+2+0]=Br(Ue,Fe,Pe),P[L+3+0]=Br($e,Ue,Fe)}function un(P,L){var J=P[L+1-32],ce=P[L+2-32],_e=P[L+3-32],Ee=P[L+4-32],Pe=P[L+5-32],Fe=P[L+6-32],Ue=P[L+7-32];P[L+0+0]=Br(P[L+0-32],J,ce),P[L+1+0]=P[L+0+32]=Br(J,ce,_e),P[L+2+0]=P[L+1+32]=P[L+0+64]=Br(ce,_e,Ee),P[L+3+0]=P[L+2+32]=P[L+1+64]=P[L+0+96]=Br(_e,Ee,Pe),P[L+3+32]=P[L+2+64]=P[L+1+96]=Br(Ee,Pe,Fe),P[L+3+64]=P[L+2+96]=Br(Pe,Fe,Ue),P[L+3+96]=Br(Fe,Ue,Ue)}function la(P,L){var J=P[L-1+0],ce=P[L-1+32],_e=P[L-1+64],Ee=P[L-1-32],Pe=P[L+0-32],Fe=P[L+1-32],Ue=P[L+2-32],$e=P[L+3-32];P[L+0+0]=P[L+1+64]=Ee+Pe+1>>1,P[L+1+0]=P[L+2+64]=Pe+Fe+1>>1,P[L+2+0]=P[L+3+64]=Fe+Ue+1>>1,P[L+3+0]=Ue+$e+1>>1,P[L+0+96]=Br(_e,ce,J),P[L+0+64]=Br(ce,J,Ee),P[L+0+32]=P[L+1+96]=Br(J,Ee,Pe),P[L+1+32]=P[L+2+96]=Br(Ee,Pe,Fe),P[L+2+32]=P[L+3+96]=Br(Pe,Fe,Ue),P[L+3+32]=Br(Fe,Ue,$e)}function Yu(P,L){var J=P[L+0-32],ce=P[L+1-32],_e=P[L+2-32],Ee=P[L+3-32],Pe=P[L+4-32],Fe=P[L+5-32],Ue=P[L+6-32],$e=P[L+7-32];P[L+0+0]=J+ce+1>>1,P[L+1+0]=P[L+0+64]=ce+_e+1>>1,P[L+2+0]=P[L+1+64]=_e+Ee+1>>1,P[L+3+0]=P[L+2+64]=Ee+Pe+1>>1,P[L+0+32]=Br(J,ce,_e),P[L+1+32]=P[L+0+96]=Br(ce,_e,Ee),P[L+2+32]=P[L+1+96]=Br(_e,Ee,Pe),P[L+3+32]=P[L+2+96]=Br(Ee,Pe,Fe),P[L+3+64]=Br(Pe,Fe,Ue),P[L+3+96]=Br(Fe,Ue,$e)}function ic(P,L){var J=P[L-1+0],ce=P[L-1+32],_e=P[L-1+64],Ee=P[L-1+96];P[L+0+0]=J+ce+1>>1,P[L+2+0]=P[L+0+32]=ce+_e+1>>1,P[L+2+32]=P[L+0+64]=_e+Ee+1>>1,P[L+1+0]=Br(J,ce,_e),P[L+3+0]=P[L+1+32]=Br(ce,_e,Ee),P[L+3+32]=P[L+1+64]=Br(_e,Ee,Ee),P[L+3+64]=P[L+2+64]=P[L+0+96]=P[L+1+96]=P[L+2+96]=P[L+3+96]=Ee}function rl(P,L){var J=P[L-1+0],ce=P[L-1+32],_e=P[L-1+64],Ee=P[L-1+96],Pe=P[L-1-32],Fe=P[L+0-32],Ue=P[L+1-32],$e=P[L+2-32];P[L+0+0]=P[L+2+32]=J+Pe+1>>1,P[L+0+32]=P[L+2+64]=ce+J+1>>1,P[L+0+64]=P[L+2+96]=_e+ce+1>>1,P[L+0+96]=Ee+_e+1>>1,P[L+3+0]=Br(Fe,Ue,$e),P[L+2+0]=Br(Pe,Fe,Ue),P[L+1+0]=P[L+3+32]=Br(J,Pe,Fe),P[L+1+32]=P[L+3+64]=Br(ce,J,Pe),P[L+1+64]=P[L+3+96]=Br(_e,ce,J),P[L+1+96]=Br(Ee,_e,ce)}function kl(P,L){var J;for(J=0;8>J;++J)n(P,L+32*J,P,L-32,8)}function Oo(P,L){var J;for(J=0;8>J;++J)a(P,L,P[L-1],8),L+=32}function ho(P,L,J){var ce;for(ce=0;8>ce;++ce)a(L,J+32*ce,P,8)}function Nl(P,L){var J,ce=8;for(J=0;8>J;++J)ce+=P[L+J-32]+P[L-1+32*J];ho(ce>>4,P,L)}function Po(P,L){var J,ce=4;for(J=0;8>J;++J)ce+=P[L+J-32];ho(ce>>3,P,L)}function Nd(P,L){var J,ce=4;for(J=0;8>J;++J)ce+=P[L-1+32*J];ho(ce>>3,P,L)}function xs(P,L){ho(128,P,L)}function hi(P,L,J){var ce=P[L-J],_e=P[L+0],Ee=3*(_e-ce)+Ed[1020+P[L-2*J]-P[L+J]],Pe=jf[112+(Ee+4>>3)];P[L-J]=ll[255+ce+jf[112+(Ee+3>>3)]],P[L+0]=ll[255+_e-Pe]}function os(P,L,J,ce){var _e=P[L+0],Ee=P[L+J];return Bi[255+P[L-2*J]-P[L-J]]>ce||Bi[255+Ee-_e]>ce}function Io(P,L,J,ce){return 4*Bi[255+P[L-J]-P[L+0]]+Bi[255+P[L-2*J]-P[L+J]]<=ce}function _d(P,L,J,ce,_e){var Ee=P[L-3*J],Pe=P[L-2*J],Fe=P[L-J],Ue=P[L+0],$e=P[L+J],it=P[L+2*J],Nt=P[L+3*J];return 4*Bi[255+Fe-Ue]+Bi[255+Pe-$e]>ce?0:Bi[255+P[L-4*J]-Ee]<=_e&&Bi[255+Ee-Pe]<=_e&&Bi[255+Pe-Fe]<=_e&&Bi[255+Nt-it]<=_e&&Bi[255+it-$e]<=_e&&Bi[255+$e-Ue]<=_e}function Mc(P,L,J,ce){var _e=2*ce+1;for(ce=0;16>ce;++ce)Io(P,L+ce,J,_e)&&hi(P,L+ce,J)}function lc(P,L,J,ce){var _e=2*ce+1;for(ce=0;16>ce;++ce)Io(P,L+ce*J,1,_e)&&hi(P,L+ce*J,1)}function Lc(P,L,J,ce){var _e;for(_e=3;0<_e;--_e)Mc(P,L+=4*J,J,ce)}function Sd(P,L,J,ce){var _e;for(_e=3;0<_e;--_e)lc(P,L+=4,J,ce)}function Gn(P,L,J,ce,_e,Ee,Pe,Fe){for(Ee=2*Ee+1;0<_e--;){if(_d(P,L,J,Ee,Pe))if(os(P,L,J,Fe))hi(P,L,J);else{var Ue=P,$e=L,it=J,Nt=Ue[$e-2*it],He=Ue[$e-it],ut=Ue[$e+0],yt=Ue[$e+it],Rt=Ue[$e+2*it],kt=27*(Wt=Ed[1020+3*(ut-He)+Ed[1020+Nt-yt]])+63>>7,Lt=18*Wt+63>>7,Wt=9*Wt+63>>7;Ue[$e-3*it]=ll[255+Ue[$e-3*it]+Wt],Ue[$e-2*it]=ll[255+Nt+Lt],Ue[$e-it]=ll[255+He+kt],Ue[$e+0]=ll[255+ut-kt],Ue[$e+it]=ll[255+yt-Lt],Ue[$e+2*it]=ll[255+Rt-Wt]}L+=ce}}function Do(P,L,J,ce,_e,Ee,Pe,Fe){for(Ee=2*Ee+1;0<_e--;){if(_d(P,L,J,Ee,Pe))if(os(P,L,J,Fe))hi(P,L,J);else{var Ue=P,$e=L,it=J,Nt=Ue[$e-it],He=Ue[$e+0],ut=Ue[$e+it],yt=jf[112+(4+(Rt=3*(He-Nt))>>3)],Rt=jf[112+(Rt+3>>3)],kt=yt+1>>1;Ue[$e-2*it]=ll[255+Ue[$e-2*it]+kt],Ue[$e-it]=ll[255+Nt+Rt],Ue[$e+0]=ll[255+He-yt],Ue[$e+it]=ll[255+ut-kt]}L+=ce}}function jd(P,L,J,ce,_e,Ee){Gn(P,L,J,1,16,ce,_e,Ee)}function fo(P,L,J,ce,_e,Ee){Gn(P,L,1,J,16,ce,_e,Ee)}function oc(P,L,J,ce,_e,Ee){var Pe;for(Pe=3;0<Pe;--Pe)Do(P,L+=4*J,J,1,16,ce,_e,Ee)}function Tt(P,L,J,ce,_e,Ee){var Pe;for(Pe=3;0<Pe;--Pe)Do(P,L+=4,1,J,16,ce,_e,Ee)}function G(P,L,J,ce,_e,Ee,Pe,Fe){Gn(P,L,_e,1,8,Ee,Pe,Fe),Gn(J,ce,_e,1,8,Ee,Pe,Fe)}function ge(P,L,J,ce,_e,Ee,Pe,Fe){Gn(P,L,1,_e,8,Ee,Pe,Fe),Gn(J,ce,1,_e,8,Ee,Pe,Fe)}function qe(P,L,J,ce,_e,Ee,Pe,Fe){Do(P,L+4*_e,_e,1,8,Ee,Pe,Fe),Do(J,ce+4*_e,_e,1,8,Ee,Pe,Fe)}function Je(P,L,J,ce,_e,Ee,Pe,Fe){Do(P,L+4,1,_e,8,Ee,Pe,Fe),Do(J,ce+4,1,_e,8,Ee,Pe,Fe)}function pt(){this.ba=new Ge,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new hr,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function zt(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function ir(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function qr(){this.ua=0,this.Wa=new st,this.vb=new st,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new ae,this.yc=new Q}function Tr(){this.xb=this.a=0,this.l=new is,this.ca=new Ge,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new te,this.Pb=0,this.wd=new te,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new qr,this.ab=0,this.gc=l(4,ir),this.Oc=0}function wn(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new is,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Hr(P,L,J,ce,_e,Ee,Pe){for(P=P==null?0:P[L+0],L=0;L<Pe;++L)_e[Ee+L]=P+J[ce+L]&255,P=_e[Ee+L]}function aa(P,L,J,ce,_e,Ee,Pe){var Fe;if(P==null)Hr(null,null,J,ce,_e,Ee,Pe);else for(Fe=0;Fe<Pe;++Fe)_e[Ee+Fe]=P[L+Fe]+J[ce+Fe]&255}function _a(P,L,J,ce,_e,Ee,Pe){if(P==null)Hr(null,null,J,ce,_e,Ee,Pe);else{var Fe,Ue=P[L+0],$e=Ue,it=Ue;for(Fe=0;Fe<Pe;++Fe)$e=it+(Ue=P[L+Fe])-$e,it=J[ce+Fe]+(-256&$e?0>$e?0:255:$e)&255,$e=Ue,_e[Ee+Fe]=it}}function jn(P,L,J,ce){var _e=L.width,Ee=L.o;if(t(P!=null&&L!=null),0>J||0>=ce||J+ce>Ee)return null;if(!P.Cc){if(P.ga==null){var Pe;if(P.ga=new wn,(Pe=P.ga==null)||(Pe=L.width*L.o,t(P.Gb.length==0),P.Gb=s(Pe),P.Uc=0,P.Gb==null?Pe=0:(P.mb=P.Gb,P.nb=P.Uc,P.rc=null,Pe=1),Pe=!Pe),!Pe){Pe=P.ga;var Fe=P.Fa,Ue=P.P,$e=P.qc,it=P.mb,Nt=P.nb,He=Ue+1,ut=$e-1,yt=Pe.l;if(t(Fe!=null&&it!=null&&L!=null),Td[0]=null,Td[1]=Hr,Td[2]=aa,Td[3]=_a,Pe.ca=it,Pe.tb=Nt,Pe.c=L.width,Pe.i=L.height,t(0<Pe.c&&0<Pe.i),1>=$e)L=0;else if(Pe.$a=3&Fe[Ue+0],Pe.Z=Fe[Ue+0]>>2&3,Pe.Lc=Fe[Ue+0]>>4&3,Ue=Fe[Ue+0]>>6&3,0>Pe.$a||1<Pe.$a||4<=Pe.Z||1<Pe.Lc||Ue)L=0;else if(yt.put=We,yt.ac=Mr,yt.bc=Qt,yt.ma=Pe,yt.width=L.width,yt.height=L.height,yt.Da=L.Da,yt.v=L.v,yt.va=L.va,yt.j=L.j,yt.o=L.o,Pe.$a)e:{t(Pe.$a==1),L=ft();t:for(;;){if(L==null){L=0;break e}if(t(Pe!=null),Pe.mc=L,L.c=Pe.c,L.i=Pe.i,L.l=Pe.l,L.l.ma=Pe,L.l.width=Pe.c,L.l.height=Pe.i,L.a=0,ke(L.m,Fe,He,ut),!ht(Pe.c,Pe.i,1,L,null)||(L.ab==1&&L.gc[0].hc==3&&le(L.s)?(Pe.ic=1,Fe=L.c*L.i,L.Ta=null,L.Ua=0,L.V=s(Fe),L.Ba=0,L.V==null?(L.a=1,L=0):L=1):(Pe.ic=0,L=bt(L,Pe.c)),!L))break t;L=1;break e}Pe.mc=null,L=0}else L=ut>=Pe.c*Pe.i;Pe=!L}if(Pe)return null;P.ga.Lc!=1?P.Ga=0:ce=Ee-J}t(P.ga!=null),t(J+ce<=Ee);e:{if(L=(Fe=P.ga).c,Ee=Fe.l.o,Fe.$a==0){if(He=P.rc,ut=P.Vc,yt=P.Fa,Ue=P.P+1+J*L,$e=P.mb,it=P.nb+J*L,t(Ue<=P.P+P.qc),Fe.Z!=0)for(t(Td[Fe.Z]!=null),Pe=0;Pe<ce;++Pe)Td[Fe.Z](He,ut,yt,Ue,$e,it,L),He=$e,ut=it,it+=L,Ue+=L;else for(Pe=0;Pe<ce;++Pe)n($e,it,yt,Ue,L),He=$e,ut=it,it+=L,Ue+=L;P.rc=He,P.Vc=ut}else{if(t(Fe.mc!=null),L=J+ce,t((Pe=Fe.mc)!=null),t(L<=Pe.i),Pe.C>=L)L=1;else if(Fe.ic||fi(),Fe.ic){Fe=Pe.V,He=Pe.Ba,ut=Pe.c;var Rt=Pe.i,kt=(yt=1,Ue=Pe.$/ut,$e=Pe.$%ut,it=Pe.m,Nt=Pe.s,Pe.$),Lt=ut*Rt,Wt=ut*L,fr=Nt.wc,ar=kt<Wt?we(Nt,$e,Ue):null;t(kt<=Lt),t(L<=Rt),t(le(Nt));t:for(;;){for(;!it.h&&kt<Wt;){if($e&fr||(ar=we(Nt,$e,Ue)),t(ar!=null),Ce(it),256>(Rt=Rr(ar.G[0],ar.H[0],it)))Fe[He+kt]=Rt,++kt,++$e>=ut&&($e=0,++Ue<=L&&!(Ue%16)&&Oe(Pe,Ue));else{if(!(280>Rt)){yt=0;break t}Rt=gr(Rt-256,it);var Xr,Ur=Rr(ar.G[4],ar.H[4],it);if(Ce(it),!(kt>=(Ur=_n(ut,Ur=gr(Ur,it)))&&Lt-kt>=Rt)){yt=0;break t}for(Xr=0;Xr<Rt;++Xr)Fe[He+kt+Xr]=Fe[He+kt+Xr-Ur];for(kt+=Rt,$e+=Rt;$e>=ut;)$e-=ut,++Ue<=L&&!(Ue%16)&&Oe(Pe,Ue);kt<Wt&&$e&fr&&(ar=we(Nt,$e,Ue))}t(it.h==ne(it))}Oe(Pe,Ue>L?L:Ue);break t}!yt||it.h&&kt<Lt?(yt=0,Pe.a=it.h?5:3):Pe.$=kt,L=yt}else L=nt(Pe,Pe.V,Pe.Ba,Pe.c,Pe.i,L,Ut);if(!L){ce=0;break e}}J+ce>=Ee&&(P.Cc=1),ce=1}if(!ce)return null;if(P.Cc&&((ce=P.ga)!=null&&(ce.mc=null),P.ga=null,0<P.Ga))return alert("todo:WebPDequantizeLevels"),null}return P.nb+J*_e}function Or(P,L,J,ce,_e,Ee){for(;0<_e--;){var Pe,Fe=P,Ue=L+(J?1:0),$e=P,it=L+(J?0:3);for(Pe=0;Pe<ce;++Pe){var Nt=$e[it+4*Pe];Nt!=255&&(Nt*=32897,Fe[Ue+4*Pe+0]=Fe[Ue+4*Pe+0]*Nt>>23,Fe[Ue+4*Pe+1]=Fe[Ue+4*Pe+1]*Nt>>23,Fe[Ue+4*Pe+2]=Fe[Ue+4*Pe+2]*Nt>>23)}L+=Ee}}function Hs(P,L,J,ce,_e){for(;0<ce--;){var Ee;for(Ee=0;Ee<J;++Ee){var Pe=P[L+2*Ee+0],Fe=15&($e=P[L+2*Ee+1]),Ue=4369*Fe,$e=(240&$e|$e>>4)*Ue>>16;P[L+2*Ee+0]=(240&Pe|Pe>>4)*Ue>>16&240|(15&Pe|Pe<<4)*Ue>>16>>4&15,P[L+2*Ee+1]=240&$e|Fe}L+=_e}}function In(P,L,J,ce,_e,Ee,Pe,Fe){var Ue,$e,it=255;for($e=0;$e<_e;++$e){for(Ue=0;Ue<ce;++Ue){var Nt=P[L+Ue];Ee[Pe+4*Ue]=Nt,it&=Nt}L+=J,Pe+=Fe}return it!=255}function cs(P,L,J,ce,_e){var Ee;for(Ee=0;Ee<_e;++Ee)J[ce+Ee]=P[L+Ee]>>8}function fi(){Ad=Or,Fo=Hs,Nf=In,po=cs}function nl(P,L,J){U[P]=function(ce,_e,Ee,Pe,Fe,Ue,$e,it,Nt,He,ut,yt,Rt,kt,Lt,Wt,fr){var ar,Xr=fr-1>>1,Ur=Fe[Ue+0]|$e[it+0]<<16,Rn=Nt[He+0]|ut[yt+0]<<16;t(ce!=null);var Wr=3*Ur+Rn+131074>>2;for(L(ce[_e+0],255&Wr,Wr>>16,Rt,kt),Ee!=null&&(Wr=3*Rn+Ur+131074>>2,L(Ee[Pe+0],255&Wr,Wr>>16,Lt,Wt)),ar=1;ar<=Xr;++ar){var sa=Fe[Ue+ar]|$e[it+ar]<<16,us=Nt[He+ar]|ut[yt+ar]<<16,Hn=Ur+sa+Rn+us+524296,zr=Hn+2*(sa+Rn)>>3;Wr=zr+Ur>>1,Ur=(Hn=Hn+2*(Ur+us)>>3)+sa>>1,L(ce[_e+2*ar-1],255&Wr,Wr>>16,Rt,kt+(2*ar-1)*J),L(ce[_e+2*ar-0],255&Ur,Ur>>16,Rt,kt+(2*ar-0)*J),Ee!=null&&(Wr=Hn+Rn>>1,Ur=zr+us>>1,L(Ee[Pe+2*ar-1],255&Wr,Wr>>16,Lt,Wt+(2*ar-1)*J),L(Ee[Pe+2*ar+0],255&Ur,Ur>>16,Lt,Wt+(2*ar+0)*J)),Ur=sa,Rn=us}1&fr||(Wr=3*Ur+Rn+131074>>2,L(ce[_e+fr-1],255&Wr,Wr>>16,Rt,kt+(fr-1)*J),Ee!=null&&(Wr=3*Rn+Ur+131074>>2,L(Ee[Pe+fr-1],255&Wr,Wr>>16,Lt,Wt+(fr-1)*J)))}}function _l(){zi[ox]=e0,zi[ol]=hh,zi[cx]=kp,zi[Bo]=mx,zi[Cf]=du,zi[ch]=Hc,zi[lu]=uu,zi[Af]=hh,zi[dx]=mx,zi[dh]=du,zi[ux]=Hc}function Rc(P){return P&-16384?0>P?0:255:P>>xx}function Fc(P,L){return Rc((19077*P>>8)+(26149*L>>8)-14234)}function Rl(P,L,J){return Rc((19077*P>>8)-(6419*L>>8)-(13320*J>>8)+8708)}function Fl(P,L){return Rc((19077*P>>8)+(33050*L>>8)-17685)}function Bc(P,L,J,ce,_e){ce[_e+0]=Fc(P,J),ce[_e+1]=Rl(P,L,J),ce[_e+2]=Fl(P,L)}function Uc(P,L,J,ce,_e){ce[_e+0]=Fl(P,L),ce[_e+1]=Rl(P,L,J),ce[_e+2]=Fc(P,J)}function ps(P,L,J,ce,_e){var Ee=Rl(P,L,J);L=Ee<<3&224|Fl(P,L)>>3,ce[_e+0]=248&Fc(P,J)|Ee>>5,ce[_e+1]=L}function Mo(P,L,J,ce,_e){var Ee=240&Fl(P,L)|15;ce[_e+0]=240&Fc(P,J)|Rl(P,L,J)>>4,ce[_e+1]=Ee}function zc(P,L,J,ce,_e){ce[_e+0]=255,Bc(P,L,J,ce,_e+1)}function Lo(P,L,J,ce,_e){Uc(P,L,J,ce,_e),ce[_e+3]=255}function Ro(P,L,J,ce,_e){Bc(P,L,J,ce,_e),ce[_e+3]=255}function Sa(P,L){return 0>P?0:P>L?L:P}function Bl(P,L,J){U[P]=function(ce,_e,Ee,Pe,Fe,Ue,$e,it,Nt){for(var He=it+(-2&Nt)*J;it!=He;)L(ce[_e+0],Ee[Pe+0],Fe[Ue+0],$e,it),L(ce[_e+1],Ee[Pe+0],Fe[Ue+0],$e,it+J),_e+=2,++Pe,++Ue,it+=2*J;1&Nt&&L(ce[_e+0],Ee[Pe+0],Fe[Ue+0],$e,it)}}function mi(P,L,J){return J==0?P==0?L==0?6:5:L==0?4:0:J}function iu(P,L,J,ce,_e){switch(P>>>30){case 3:tt(L,J,ce,_e,0);break;case 2:xt(L,J,ce,_e);break;case 1:qt(L,J,ce,_e)}}function gs(P,L){var J,ce,_e=L.M,Ee=L.Nb,Pe=P.oc,Fe=P.pc+40,Ue=P.oc,$e=P.pc+584,it=P.oc,Nt=P.pc+600;for(J=0;16>J;++J)Pe[Fe+32*J-1]=129;for(J=0;8>J;++J)Ue[$e+32*J-1]=129,it[Nt+32*J-1]=129;for(0<_e?Pe[Fe-1-32]=Ue[$e-1-32]=it[Nt-1-32]=129:(a(Pe,Fe-32-1,127,21),a(Ue,$e-32-1,127,9),a(it,Nt-32-1,127,9)),ce=0;ce<P.za;++ce){var He=L.ya[L.aa+ce];if(0<ce){for(J=-1;16>J;++J)n(Pe,Fe+32*J-4,Pe,Fe+32*J+12,4);for(J=-1;8>J;++J)n(Ue,$e+32*J-4,Ue,$e+32*J+4,4),n(it,Nt+32*J-4,it,Nt+32*J+4,4)}var ut=P.Gd,yt=P.Hd+ce,Rt=He.ad,kt=He.Hc;if(0<_e&&(n(Pe,Fe-32,ut[yt].y,0,16),n(Ue,$e-32,ut[yt].f,0,8),n(it,Nt-32,ut[yt].ea,0,8)),He.Za){var Lt=Pe,Wt=Fe-32+16;for(0<_e&&(ce>=P.za-1?a(Lt,Wt,ut[yt].y[15],4):n(Lt,Wt,ut[yt+1].y,0,4)),J=0;4>J;J++)Lt[Wt+128+J]=Lt[Wt+256+J]=Lt[Wt+384+J]=Lt[Wt+0+J];for(J=0;16>J;++J,kt<<=2)Lt=Pe,Wt=Fe+$s[J],Ps[He.Ob[J]](Lt,Wt),iu(kt,Rt,16*+J,Lt,Wt)}else if(Lt=mi(ce,_e,He.Ob[0]),Sl[Lt](Pe,Fe),kt!=0)for(J=0;16>J;++J,kt<<=2)iu(kt,Rt,16*+J,Pe,Fe+$s[J]);for(J=He.Gc,Lt=mi(ce,_e,He.Dd),cc[Lt](Ue,$e),cc[Lt](it,Nt),kt=Rt,Lt=Ue,Wt=$e,255&(He=0|J)&&(170&He?jt(kt,256,Lt,Wt):Ht(kt,256,Lt,Wt)),He=it,kt=Nt,255&(J>>=8)&&(170&J?jt(Rt,320,He,kt):Ht(Rt,320,He,kt)),_e<P.Ub-1&&(n(ut[yt].y,0,Pe,Fe+480,16),n(ut[yt].f,0,Ue,$e+224,8),n(ut[yt].ea,0,it,Nt+224,8)),J=8*Ee*P.B,ut=P.sa,yt=P.ta+16*ce+16*Ee*P.R,Rt=P.qa,He=P.ra+8*ce+J,kt=P.Ha,Lt=P.Ia+8*ce+J,J=0;16>J;++J)n(ut,yt+J*P.R,Pe,Fe+32*J,16);for(J=0;8>J;++J)n(Rt,He+J*P.B,Ue,$e+32*J,8),n(kt,Lt+J*P.B,it,Nt+32*J,8)}}function mo(P,L,J,ce,_e,Ee,Pe,Fe,Ue){var $e=[0],it=[0],Nt=0,He=Ue!=null?Ue.kd:0,ut=Ue??new zt;if(P==null||12>J)return 7;ut.data=P,ut.w=L,ut.ha=J,L=[L],J=[J],ut.gb=[ut.gb];e:{var yt=L,Rt=J,kt=ut.gb;if(t(P!=null),t(Rt!=null),t(kt!=null),kt[0]=0,12<=Rt[0]&&!r(P,yt[0],"RIFF")){if(r(P,yt[0]+8,"WEBP")){kt=3;break e}var Lt=De(P,yt[0]+4);if(12>Lt||4294967286<Lt){kt=3;break e}if(He&&Lt>Rt[0]-8){kt=7;break e}kt[0]=Lt,yt[0]+=12,Rt[0]-=12}kt=0}if(kt!=0)return kt;for(Lt=0<ut.gb[0],J=J[0];;){e:{var Wt=P;Rt=L,kt=J;var fr=$e,ar=it,Xr=yt=[0];if((Wr=Nt=[Nt])[0]=0,8>kt[0])kt=7;else{if(!r(Wt,Rt[0],"VP8X")){if(De(Wt,Rt[0]+4)!=10){kt=3;break e}if(18>kt[0]){kt=7;break e}var Ur=De(Wt,Rt[0]+8),Rn=1+Te(Wt,Rt[0]+12);if(2147483648<=Rn*(Wt=1+Te(Wt,Rt[0]+15))){kt=3;break e}Xr!=null&&(Xr[0]=Ur),fr!=null&&(fr[0]=Rn),ar!=null&&(ar[0]=Wt),Rt[0]+=18,kt[0]-=18,Wr[0]=1}kt=0}}if(Nt=Nt[0],yt=yt[0],kt!=0)return kt;if(Rt=!!(2&yt),!Lt&&Nt)return 3;if(Ee!=null&&(Ee[0]=!!(16&yt)),Pe!=null&&(Pe[0]=Rt),Fe!=null&&(Fe[0]=0),Pe=$e[0],yt=it[0],Nt&&Rt&&Ue==null){kt=0;break}if(4>J){kt=7;break}if(Lt&&Nt||!Lt&&!Nt&&!r(P,L[0],"ALPH")){J=[J],ut.na=[ut.na],ut.P=[ut.P],ut.Sa=[ut.Sa];e:{Ur=P,kt=L,Lt=J;var Wr=ut.gb;fr=ut.na,ar=ut.P,Xr=ut.Sa,Rn=22,t(Ur!=null),t(Lt!=null),Wt=kt[0];var sa=Lt[0];for(t(fr!=null),t(Xr!=null),fr[0]=null,ar[0]=null,Xr[0]=0;;){if(kt[0]=Wt,Lt[0]=sa,8>sa){kt=7;break e}var us=De(Ur,Wt+4);if(4294967286<us){kt=3;break e}var Hn=8+us+1&-2;if(Rn+=Hn,0<Wr&&Rn>Wr){kt=3;break e}if(!r(Ur,Wt,"VP8 ")||!r(Ur,Wt,"VP8L")){kt=0;break e}if(sa[0]<Hn){kt=7;break e}r(Ur,Wt,"ALPH")||(fr[0]=Ur,ar[0]=Wt+8,Xr[0]=us),Wt+=Hn,sa-=Hn}}if(J=J[0],ut.na=ut.na[0],ut.P=ut.P[0],ut.Sa=ut.Sa[0],kt!=0)break}J=[J],ut.Ja=[ut.Ja],ut.xa=[ut.xa];e:if(Wr=P,kt=L,Lt=J,fr=ut.gb[0],ar=ut.Ja,Xr=ut.xa,Ur=kt[0],Wt=!r(Wr,Ur,"VP8 "),Rn=!r(Wr,Ur,"VP8L"),t(Wr!=null),t(Lt!=null),t(ar!=null),t(Xr!=null),8>Lt[0])kt=7;else{if(Wt||Rn){if(Wr=De(Wr,Ur+4),12<=fr&&Wr>fr-12){kt=3;break e}if(He&&Wr>Lt[0]-8){kt=7;break e}ar[0]=Wr,kt[0]+=8,Lt[0]-=8,Xr[0]=Rn}else Xr[0]=5<=Lt[0]&&Wr[Ur+0]==47&&!(Wr[Ur+4]>>5),ar[0]=Lt[0];kt=0}if(J=J[0],ut.Ja=ut.Ja[0],ut.xa=ut.xa[0],L=L[0],kt!=0)break;if(4294967286<ut.Ja)return 3;if(Fe==null||Rt||(Fe[0]=ut.xa?2:1),Pe=[Pe],yt=[yt],ut.xa){if(5>J){kt=7;break}Fe=Pe,He=yt,Rt=Ee,P==null||5>J?P=0:5<=J&&P[L+0]==47&&!(P[L+4]>>5)?(Lt=[0],Wr=[0],fr=[0],ke(ar=new te,P,L,J),Cr(ar,Lt,Wr,fr)?(Fe!=null&&(Fe[0]=Lt[0]),He!=null&&(He[0]=Wr[0]),Rt!=null&&(Rt[0]=fr[0]),P=1):P=0):P=0}else{if(10>J){kt=7;break}Fe=yt,P==null||10>J||!ta(P,L+3,J-3)?P=0:(He=P[L+0]|P[L+1]<<8|P[L+2]<<16,Rt=16383&(P[L+7]<<8|P[L+6]),P=16383&(P[L+9]<<8|P[L+8]),1&He||3<(He>>1&7)||!(He>>4&1)||He>>5>=ut.Ja||!Rt||!P?P=0:(Pe&&(Pe[0]=Rt),Fe&&(Fe[0]=P),P=1))}if(!P||(Pe=Pe[0],yt=yt[0],Nt&&($e[0]!=Pe||it[0]!=yt)))return 3;Ue!=null&&(Ue[0]=ut,Ue.offset=L-Ue.w,t(4294967286>L-Ue.w),t(Ue.offset==Ue.ha-J));break}return kt==0||kt==7&&Nt&&Ue==null?(Ee!=null&&(Ee[0]|=ut.na!=null&&0<ut.na.length),ce!=null&&(ce[0]=Pe),_e!=null&&(_e[0]=yt),0):kt}function xo(P,L,J){var ce=L.width,_e=L.height,Ee=0,Pe=0,Fe=ce,Ue=_e;if(L.Da=P!=null&&0<P.Da,L.Da&&(Fe=P.cd,Ue=P.bd,Ee=P.v,Pe=P.j,11>J||(Ee&=-2,Pe&=-2),0>Ee||0>Pe||0>=Fe||0>=Ue||Ee+Fe>ce||Pe+Ue>_e))return 0;if(L.v=Ee,L.j=Pe,L.va=Ee+Fe,L.o=Pe+Ue,L.U=Fe,L.T=Ue,L.da=P!=null&&0<P.da,L.da){if(!dt(Fe,Ue,J=[P.ib],Ee=[P.hb]))return 0;L.ib=J[0],L.hb=Ee[0]}return L.ob=P!=null&&P.ob,L.Kb=P==null||!P.Sd,L.da&&(L.ob=L.ib<3*ce/4&&L.hb<3*_e/4,L.Kb=0),1}function Zu(P){if(P==null)return 2;if(11>P.S){var L=P.f.RGBA;L.fb+=(P.height-1)*L.A,L.A=-L.A}else L=P.f.kb,P=P.height,L.O+=(P-1)*L.fa,L.fa=-L.fa,L.N+=(P-1>>1)*L.Ab,L.Ab=-L.Ab,L.W+=(P-1>>1)*L.Db,L.Db=-L.Db,L.F!=null&&(L.J+=(P-1)*L.lb,L.lb=-L.lb);return 0}function Ul(P,L,J,ce){if(ce==null||0>=P||0>=L)return 2;if(J!=null){if(J.Da){var _e=J.cd,Ee=J.bd,Pe=-2&J.v,Fe=-2&J.j;if(0>Pe||0>Fe||0>=_e||0>=Ee||Pe+_e>P||Fe+Ee>L)return 2;P=_e,L=Ee}if(J.da){if(!dt(P,L,_e=[J.ib],Ee=[J.hb]))return 2;P=_e[0],L=Ee[0]}}ce.width=P,ce.height=L;e:{var Ue=ce.width,$e=ce.height;if(P=ce.S,0>=Ue||0>=$e||!(P>=ox&&13>P))P=2;else{if(0>=ce.Rd&&ce.sd==null){Pe=Ee=_e=L=0;var it=(Fe=Ue*gx[P])*$e;if(11>P||(Ee=($e+1)/2*(L=(Ue+1)/2),P==12&&(Pe=(_e=Ue)*$e)),($e=s(it+2*Ee+Pe))==null){P=1;break e}ce.sd=$e,11>P?((Ue=ce.f.RGBA).eb=$e,Ue.fb=0,Ue.A=Fe,Ue.size=it):((Ue=ce.f.kb).y=$e,Ue.O=0,Ue.fa=Fe,Ue.Fd=it,Ue.f=$e,Ue.N=0+it,Ue.Ab=L,Ue.Cd=Ee,Ue.ea=$e,Ue.W=0+it+Ee,Ue.Db=L,Ue.Ed=Ee,P==12&&(Ue.F=$e,Ue.J=0+it+2*Ee),Ue.Tc=Pe,Ue.lb=_e)}if(L=1,_e=ce.S,Ee=ce.width,Pe=ce.height,_e>=ox&&13>_e)if(11>_e)P=ce.f.RGBA,L&=(Fe=Math.abs(P.A))*(Pe-1)+Ee<=P.size,L&=Fe>=Ee*gx[_e],L&=P.eb!=null;else{P=ce.f.kb,Fe=(Ee+1)/2,it=(Pe+1)/2,Ue=Math.abs(P.fa),$e=Math.abs(P.Ab);var Nt=Math.abs(P.Db),He=Math.abs(P.lb),ut=He*(Pe-1)+Ee;L&=Ue*(Pe-1)+Ee<=P.Fd,L&=$e*(it-1)+Fe<=P.Cd,L=(L&=Nt*(it-1)+Fe<=P.Ed)&Ue>=Ee&$e>=Fe&Nt>=Fe,L&=P.y!=null,L&=P.f!=null,L&=P.ea!=null,_e==12&&(L&=He>=Ee,L&=ut<=P.Tc,L&=P.F!=null)}else L=0;P=L?0:2}}return P!=0||J!=null&&J.fd&&(P=Zu(ce)),P}var xi=64,al=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],pi=24,sl=32,zn=8,zl=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Ve("Predictor0","PredictorAdd0"),U.Predictor0=function(){return 4278190080},U.Predictor1=function(P){return P},U.Predictor2=function(P,L,J){return L[J+0]},U.Predictor3=function(P,L,J){return L[J+1]},U.Predictor4=function(P,L,J){return L[J-1]},U.Predictor5=function(P,L,J){return Mt(Mt(P,L[J+1]),L[J+0])},U.Predictor6=function(P,L,J){return Mt(P,L[J-1])},U.Predictor7=function(P,L,J){return Mt(P,L[J+0])},U.Predictor8=function(P,L,J){return Mt(L[J-1],L[J+0])},U.Predictor9=function(P,L,J){return Mt(L[J+0],L[J+1])},U.Predictor10=function(P,L,J){return Mt(Mt(P,L[J-1]),Mt(L[J+0],L[J+1]))},U.Predictor11=function(P,L,J){var ce=L[J+0];return 0>=sr(ce>>24&255,P>>24&255,(L=L[J-1])>>24&255)+sr(ce>>16&255,P>>16&255,L>>16&255)+sr(ce>>8&255,P>>8&255,L>>8&255)+sr(255&ce,255&P,255&L)?ce:P},U.Predictor12=function(P,L,J){var ce=L[J+0];return(mr((P>>24&255)+(ce>>24&255)-((L=L[J-1])>>24&255))<<24|mr((P>>16&255)+(ce>>16&255)-(L>>16&255))<<16|mr((P>>8&255)+(ce>>8&255)-(L>>8&255))<<8|mr((255&P)+(255&ce)-(255&L)))>>>0},U.Predictor13=function(P,L,J){var ce=L[J-1];return(xr((P=Mt(P,L[J+0]))>>24&255,ce>>24&255)<<24|xr(P>>16&255,ce>>16&255)<<16|xr(P>>8&255,ce>>8&255)<<8|xr(255&P,255&ce))>>>0};var xe=U.PredictorAdd0;U.PredictorAdd1=Ir,Ve("Predictor2","PredictorAdd2"),Ve("Predictor3","PredictorAdd3"),Ve("Predictor4","PredictorAdd4"),Ve("Predictor5","PredictorAdd5"),Ve("Predictor6","PredictorAdd6"),Ve("Predictor7","PredictorAdd7"),Ve("Predictor8","PredictorAdd8"),Ve("Predictor9","PredictorAdd9"),Ve("Predictor10","PredictorAdd10"),Ve("Predictor11","PredictorAdd11"),Ve("Predictor12","PredictorAdd12"),Ve("Predictor13","PredictorAdd13");var h=U.PredictorAdd2;ur("ColorIndexInverseTransform","MapARGB","32b",function(P){return P>>8&255},function(P){return P}),ur("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(P){return P},function(P){return P>>8&255});var x,b=U.ColorIndexInverseTransform,_=U.MapARGB,j=U.VP8LColorIndexInverseTransformAlpha,A=U.MapAlpha,I=U.VP8LPredictorsAdd=[];I.length=16,(U.VP8LPredictors=[]).length=16,(U.VP8LPredictorsAdd_C=[]).length=16,(U.VP8LPredictors_C=[]).length=16;var B,X,oe,pe,Ae,ze,Xe,tt,xt,jt,qt,Ht,Ft,nn,pn,Za,gi,Ys,ja,Zs,il,Cd,qc,kf,Ad,Fo,Nf,po,Qu=s(511),ix=s(2041),_f=s(225),Sf=s(767),lx=0,Ed=ix,jf=_f,ll=Sf,Bi=Qu,ox=0,ol=1,cx=2,Bo=3,Cf=4,ch=5,lu=6,Af=7,dx=8,dh=9,ux=10,Uo=[2,3,7],uh=[3,3,11],Ju=[280,256,256,256,40],hx=[0,1,1,1,0],Ef=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],zo=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],qo=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],ou=8,Ho=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],$o=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],go=null,hv=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],yp=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],fx=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],fv=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Ui=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],ds=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],oa=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Sl=[],Ps=[],cc=[],cu=1,wp=2,Td=[],zi=[];nl("UpsampleRgbLinePair",Bc,3),nl("UpsampleBgrLinePair",Uc,3),nl("UpsampleRgbaLinePair",Ro,4),nl("UpsampleBgraLinePair",Lo,4),nl("UpsampleArgbLinePair",zc,4),nl("UpsampleRgba4444LinePair",Mo,2),nl("UpsampleRgb565LinePair",ps,2);var e0=U.UpsampleRgbLinePair,kp=U.UpsampleBgrLinePair,hh=U.UpsampleRgbaLinePair,mx=U.UpsampleBgraLinePair,du=U.UpsampleArgbLinePair,Hc=U.UpsampleRgba4444LinePair,uu=U.UpsampleRgb565LinePair,Vo=16,fh=1<<Vo-1,t0=-227,hu=482,xx=6,fu=0,qi=s(256),px=s(256),mv=s(256),Kk=s(256),Gk=s(hu-t0),Xk=s(hu-t0);Bl("YuvToRgbRow",Bc,3),Bl("YuvToBgrRow",Uc,3),Bl("YuvToRgbaRow",Ro,4),Bl("YuvToBgraRow",Lo,4),Bl("YuvToArgbRow",zc,4),Bl("YuvToRgba4444Row",Mo,2),Bl("YuvToRgb565Row",ps,2);var $s=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],mh=[0,2,8],Tf=[8,7,6,4,4,2,2,2,1,1,1,1],Of=1;this.WebPDecodeRGBA=function(P,L,J,ce,_e){var Ee=ol,Pe=new pt,Fe=new Ge;Pe.ba=Fe,Fe.S=Ee,Fe.width=[Fe.width],Fe.height=[Fe.height];var Ue=Fe.width,$e=Fe.height,it=new Ot;if(it==null||P==null)var Nt=2;else t(it!=null),Nt=mo(P,L,J,it.width,it.height,it.Pd,it.Qd,it.format,null);if(Nt!=0?Ue=0:(Ue!=null&&(Ue[0]=it.width[0]),$e!=null&&($e[0]=it.height[0]),Ue=1),Ue){Fe.width=Fe.width[0],Fe.height=Fe.height[0],ce!=null&&(ce[0]=Fe.width),_e!=null&&(_e[0]=Fe.height);e:{if(ce=new is,(_e=new zt).data=P,_e.w=L,_e.ha=J,_e.kd=1,L=[0],t(_e!=null),((P=mo(_e.data,_e.w,_e.ha,null,null,null,L,null,_e))==0||P==7)&&L[0]&&(P=4),(L=P)==0){if(t(Pe!=null),ce.data=_e.data,ce.w=_e.w+_e.offset,ce.ha=_e.ha-_e.offset,ce.put=We,ce.ac=Mr,ce.bc=Qt,ce.ma=Pe,_e.xa){if((P=ft())==null){Pe=1;break e}if((function(He,ut){var yt=[0],Rt=[0],kt=[0];t:for(;;){if(He==null)return 0;if(ut==null)return He.a=2,0;if(He.l=ut,He.a=0,ke(He.m,ut.data,ut.w,ut.ha),!Cr(He.m,yt,Rt,kt)){He.a=3;break t}if(He.xb=wp,ut.width=yt[0],ut.height=Rt[0],!ht(yt[0],Rt[0],1,He,null))break t;return 1}return t(He.a!=0),0})(P,ce)){if(ce=(L=Ul(ce.width,ce.height,Pe.Oa,Pe.ba))==0){t:{ce=P;r:for(;;){if(ce==null){ce=0;break t}if(t(ce.s.yc!=null),t(ce.s.Ya!=null),t(0<ce.s.Wb),t((J=ce.l)!=null),t((_e=J.ma)!=null),ce.xb!=0){if(ce.ca=_e.ba,ce.tb=_e.tb,t(ce.ca!=null),!xo(_e.Oa,J,Bo)){ce.a=2;break r}if(!bt(ce,J.width)||J.da)break r;if((J.da||tr(ce.ca.S))&&fi(),11>ce.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),ce.ca.f.kb.F!=null&&fi()),ce.Pb&&0<ce.s.ua&&ce.s.vb.X==null&&!ye(ce.s.vb,ce.s.Wa.Xa)){ce.a=1;break r}ce.xb=0}if(!nt(ce,ce.V,ce.Ba,ce.c,ce.i,J.o,Me))break r;_e.Dc=ce.Ma,ce=1;break t}t(ce.a!=0),ce=0}ce=!ce}ce&&(L=P.a)}else L=P.a}else{if((P=new To)==null){Pe=1;break e}if(P.Fa=_e.na,P.P=_e.P,P.qc=_e.Sa,el(P,ce)){if((L=Ul(ce.width,ce.height,Pe.Oa,Pe.ba))==0){if(P.Aa=0,J=Pe.Oa,t((_e=P)!=null),J!=null){if(0<(Ue=0>(Ue=J.Md)?0:100<Ue?255:255*Ue/100)){for($e=it=0;4>$e;++$e)12>(Nt=_e.pb[$e]).lc&&(Nt.ia=Ue*Tf[0>Nt.lc?0:Nt.lc]>>3),it|=Nt.ia;it&&(alert("todo:VP8InitRandom"),_e.ia=1)}_e.Ga=J.Id,100<_e.Ga?_e.Ga=100:0>_e.Ga&&(_e.Ga=0)}(function(He,ut){if(He==null)return 0;if(ut==null)return ln(He,2,"NULL VP8Io parameter in VP8Decode().");if(!He.cb&&!el(He,ut))return 0;if(t(He.cb),ut.ac==null||ut.ac(ut)){ut.ob&&(He.L=0);var yt=mh[He.L];if(He.L==2?(He.yb=0,He.zb=0):(He.yb=ut.v-yt>>4,He.zb=ut.j-yt>>4,0>He.yb&&(He.yb=0),0>He.zb&&(He.zb=0)),He.Va=ut.o+15+yt>>4,He.Hb=ut.va+15+yt>>4,He.Hb>He.za&&(He.Hb=He.za),He.Va>He.Ub&&(He.Va=He.Ub),0<He.L){var Rt=He.ed;for(yt=0;4>yt;++yt){var kt;if(He.Qa.Cb){var Lt=He.Qa.Lb[yt];He.Qa.Fb||(Lt+=Rt.Tb)}else Lt=Rt.Tb;for(kt=0;1>=kt;++kt){var Wt=He.gd[yt][kt],fr=Lt;if(Rt.Pc&&(fr+=Rt.vd[0],kt&&(fr+=Rt.od[0])),0<(fr=0>fr?0:63<fr?63:fr)){var ar=fr;0<Rt.wb&&(ar=4<Rt.wb?ar>>2:ar>>1)>9-Rt.wb&&(ar=9-Rt.wb),1>ar&&(ar=1),Wt.dd=ar,Wt.tc=2*fr+ar,Wt.ld=40<=fr?2:15<=fr?1:0}else Wt.tc=0;Wt.La=kt}}}yt=0}else ln(He,6,"Frame setup failed"),yt=He.a;if(yt=yt==0){if(yt){He.$c=0,0<He.Aa||(He.Ic=Of);t:{yt=He.Ic,Rt=4*(ar=He.za);var Xr=32*ar,Ur=ar+1,Rn=0<He.L?ar*(0<He.Aa?2:1):0,Wr=(He.Aa==2?2:1)*ar;if((Wt=Rt+832+(kt=3*(16*yt+mh[He.L])/2*Xr)+(Lt=He.Fa!=null&&0<He.Fa.length?He.Kc.c*He.Kc.i:0))!=Wt)yt=0;else{if(Wt>He.Vb){if(He.Vb=0,He.Ec=s(Wt),He.Fc=0,He.Ec==null){yt=ln(He,1,"no memory during frame initialization.");break t}He.Vb=Wt}Wt=He.Ec,fr=He.Fc,He.Ac=Wt,He.Bc=fr,fr+=Rt,He.Gd=l(Xr,An),He.Hd=0,He.rb=l(Ur+1,en),He.sb=1,He.wa=Rn?l(Rn,Un):null,He.Y=0,He.D.Nb=0,He.D.wa=He.wa,He.D.Y=He.Y,0<He.Aa&&(He.D.Y+=ar),t(!0),He.oc=Wt,He.pc=fr,fr+=832,He.ya=l(Wr,La),He.aa=0,He.D.ya=He.ya,He.D.aa=He.aa,He.Aa==2&&(He.D.aa+=ar),He.R=16*ar,He.B=8*ar,ar=(Xr=mh[He.L])*He.R,Xr=Xr/2*He.B,He.sa=Wt,He.ta=fr+ar,He.qa=He.sa,He.ra=He.ta+16*yt*He.R+Xr,He.Ha=He.qa,He.Ia=He.ra+8*yt*He.B+Xr,He.$c=0,fr+=kt,He.mb=Lt?Wt:null,He.nb=Lt?fr:null,t(fr+Lt<=He.Fc+He.Vb),pa(He),a(He.Ac,He.Bc,0,Rt),yt=1}}if(yt){if(ut.ka=0,ut.y=He.sa,ut.O=He.ta,ut.f=He.qa,ut.N=He.ra,ut.ea=He.Ha,ut.Vd=He.Ia,ut.fa=He.R,ut.Rc=He.B,ut.F=null,ut.J=0,!lx){for(yt=-255;255>=yt;++yt)Qu[255+yt]=0>yt?-yt:yt;for(yt=-1020;1020>=yt;++yt)ix[1020+yt]=-128>yt?-128:127<yt?127:yt;for(yt=-112;112>=yt;++yt)_f[112+yt]=-16>yt?-16:15<yt?15:yt;for(yt=-255;510>=yt;++yt)Sf[255+yt]=0>yt?0:255<yt?255:yt;lx=1}Xe=qa,tt=ct,jt=Be,qt=vr,Ht=Pn,xt=on,Ft=jd,nn=fo,pn=G,Za=ge,gi=oc,Ys=Tt,ja=qe,Zs=Je,il=Mc,Cd=lc,qc=Lc,kf=Sd,Ps[0]=dn,Ps[1]=Ai,Ps[2]=Ll,Ps[3]=uo,Ps[4]=oh,Ps[5]=la,Ps[6]=un,Ps[7]=Yu,Ps[8]=rl,Ps[9]=ic,Sl[0]=wl,Sl[1]=Lr,Sl[2]=na,Sl[3]=oo,Sl[4]=tl,Sl[5]=co,Sl[6]=kd,cc[0]=Nl,cc[1]=Qn,cc[2]=kl,cc[3]=Oo,cc[4]=Nd,cc[5]=Po,cc[6]=xs,yt=1}else yt=0}yt&&(yt=(function(sa,us){for(sa.M=0;sa.M<sa.Va;++sa.M){var Hn,zr=sa.Jc[sa.M&sa.Xb],Er=sa.m,ys=sa;for(Hn=0;Hn<ys.za;++Hn){var Nn=Er,Wn=ys,Ra=Wn.Ac,bi=Wn.Bc+4*Hn,Hi=Wn.zc,Qa=Wn.ya[Wn.aa+Hn];if(Wn.Qa.Bb?Qa.$b=je(Nn,Wn.Pa.jb[0])?2+je(Nn,Wn.Pa.jb[2]):je(Nn,Wn.Pa.jb[1]):Qa.$b=0,Wn.kc&&(Qa.Ad=je(Nn,Wn.Bd)),Qa.Za=!je(Nn,145)+0,Qa.Za){var Qs=Qa.Ob,cl=0;for(Wn=0;4>Wn;++Wn){var Js,Jn=Hi[0+Wn];for(Js=0;4>Js;++Js){Jn=Ui[Ra[bi+Js]][Jn];for(var ya=fx[je(Nn,Jn[0])];0<ya;)ya=fx[2*ya+je(Nn,Jn[ya])];Jn=-ya,Ra[bi+Js]=Jn}n(Qs,cl,Ra,bi,4),cl+=4,Hi[0+Wn]=Jn}}else Jn=je(Nn,156)?je(Nn,128)?1:3:je(Nn,163)?2:0,Qa.Ob[0]=Jn,a(Ra,bi,Jn,4),a(Hi,0,Jn,4);Qa.Dd=je(Nn,142)?je(Nn,114)?je(Nn,183)?1:3:2:0}if(ys.m.Ka)return ln(sa,7,"Premature end-of-partition0 encountered.");for(;sa.ja<sa.za;++sa.ja){if(ys=zr,Nn=(Er=sa).rb[Er.sb-1],Ra=Er.rb[Er.sb+Er.ja],Hn=Er.ya[Er.aa+Er.ja],bi=Er.kc?Hn.Ad:0)Nn.la=Ra.la=0,Hn.Za||(Nn.Na=Ra.Na=0),Hn.Hc=0,Hn.Gc=0,Hn.ia=0;else{var ws,Ca;if(Nn=Ra,Ra=ys,bi=Er.Pa.Xc,Hi=Er.ya[Er.aa+Er.ja],Qa=Er.pb[Hi.$b],Wn=Hi.ad,Qs=0,cl=Er.rb[Er.sb-1],Jn=Js=0,a(Wn,Qs,0,384),Hi.Za)var vi=0,ks=bi[3];else{ya=s(16);var wa=Nn.Na+cl.Na;if(wa=go(Ra,bi[1],wa,Qa.Eb,0,ya,0),Nn.Na=cl.Na=(0<wa)+0,1<wa)Xe(ya,0,Wn,Qs);else{var Vs=ya[0]+3>>3;for(ya=0;256>ya;ya+=16)Wn[Qs+ya]=Vs}vi=1,ks=bi[0]}var Fa=15&Nn.la,ei=15&cl.la;for(ya=0;4>ya;++ya){var ti=1&ei;for(Vs=Ca=0;4>Vs;++Vs)Fa=Fa>>1|(ti=(wa=go(Ra,ks,wa=ti+(1&Fa),Qa.Sc,vi,Wn,Qs))>vi)<<7,Ca=Ca<<2|(3<wa?3:1<wa?2:Wn[Qs+0]!=0),Qs+=16;Fa>>=4,ei=ei>>1|ti<<7,Js=(Js<<8|Ca)>>>0}for(ks=Fa,vi=ei>>4,ws=0;4>ws;ws+=2){for(Ca=0,Fa=Nn.la>>4+ws,ei=cl.la>>4+ws,ya=0;2>ya;++ya){for(ti=1&ei,Vs=0;2>Vs;++Vs)wa=ti+(1&Fa),Fa=Fa>>1|(ti=0<(wa=go(Ra,bi[2],wa,Qa.Qc,0,Wn,Qs)))<<3,Ca=Ca<<2|(3<wa?3:1<wa?2:Wn[Qs+0]!=0),Qs+=16;Fa>>=2,ei=ei>>1|ti<<5}Jn|=Ca<<4*ws,ks|=Fa<<4<<ws,vi|=(240&ei)<<ws}Nn.la=ks,cl.la=vi,Hi.Hc=Js,Hi.Gc=Jn,Hi.ia=43690&Jn?0:Qa.ia,bi=!(Js|Jn)}if(0<Er.L&&(Er.wa[Er.Y+Er.ja]=Er.gd[Hn.$b][Hn.Za],Er.wa[Er.Y+Er.ja].La|=!bi),ys.Ka)return ln(sa,7,"Premature end-of-file encountered.")}if(pa(sa),Er=us,ys=1,Hn=(zr=sa).D,Nn=0<zr.L&&zr.M>=zr.zb&&zr.M<=zr.Va,zr.Aa==0)t:{if(Hn.M=zr.M,Hn.uc=Nn,gs(zr,Hn),ys=1,Hn=(Ca=zr.D).Nb,Nn=(Jn=mh[zr.L])*zr.R,Ra=Jn/2*zr.B,ya=16*Hn*zr.R,Vs=8*Hn*zr.B,bi=zr.sa,Hi=zr.ta-Nn+ya,Qa=zr.qa,Wn=zr.ra-Ra+Vs,Qs=zr.Ha,cl=zr.Ia-Ra+Vs,ei=(Fa=Ca.M)==0,Js=Fa>=zr.Va-1,zr.Aa==2&&gs(zr,Ca),Ca.uc)for(ti=(wa=zr).D.M,t(wa.D.uc),Ca=wa.yb;Ca<wa.Hb;++Ca){vi=Ca,ks=ti;var Ha=(ga=(ri=wa).D).Nb;ws=ri.R;var ga=ga.wa[ga.Y+vi],dl=ri.sa,Is=ri.ta+16*Ha*ws+16*vi,hn=ga.dd,gn=ga.tc;if(gn!=0)if(t(3<=gn),ri.L==1)0<vi&&Cd(dl,Is,ws,gn+4),ga.La&&kf(dl,Is,ws,gn),0<ks&&il(dl,Is,ws,gn+4),ga.La&&qc(dl,Is,ws,gn);else{var ka=ri.B,ql=ri.qa,Wo=ri.ra+8*Ha*ka+8*vi,jl=ri.Ha,ri=ri.Ia+8*Ha*ka+8*vi;Ha=ga.ld,0<vi&&(nn(dl,Is,ws,gn+4,hn,Ha),Za(ql,Wo,jl,ri,ka,gn+4,hn,Ha)),ga.La&&(Ys(dl,Is,ws,gn,hn,Ha),Zs(ql,Wo,jl,ri,ka,gn,hn,Ha)),0<ks&&(Ft(dl,Is,ws,gn+4,hn,Ha),pn(ql,Wo,jl,ri,ka,gn+4,hn,Ha)),ga.La&&(gi(dl,Is,ws,gn,hn,Ha),ja(ql,Wo,jl,ri,ka,gn,hn,Ha))}}if(zr.ia&&alert("todo:DitherRow"),Er.put!=null){if(Ca=16*Fa,Fa=16*(Fa+1),ei?(Er.y=zr.sa,Er.O=zr.ta+ya,Er.f=zr.qa,Er.N=zr.ra+Vs,Er.ea=zr.Ha,Er.W=zr.Ia+Vs):(Ca-=Jn,Er.y=bi,Er.O=Hi,Er.f=Qa,Er.N=Wn,Er.ea=Qs,Er.W=cl),Js||(Fa-=Jn),Fa>Er.o&&(Fa=Er.o),Er.F=null,Er.J=null,zr.Fa!=null&&0<zr.Fa.length&&Ca<Fa&&(Er.J=jn(zr,Er,Ca,Fa-Ca),Er.F=zr.mb,Er.F==null&&Er.F.length==0)){ys=ln(zr,3,"Could not decode alpha data.");break t}Ca<Er.j&&(Jn=Er.j-Ca,Ca=Er.j,t(!(1&Jn)),Er.O+=zr.R*Jn,Er.N+=zr.B*(Jn>>1),Er.W+=zr.B*(Jn>>1),Er.F!=null&&(Er.J+=Er.width*Jn)),Ca<Fa&&(Er.O+=Er.v,Er.N+=Er.v>>1,Er.W+=Er.v>>1,Er.F!=null&&(Er.J+=Er.v),Er.ka=Ca-Er.j,Er.U=Er.va-Er.v,Er.T=Fa-Ca,ys=Er.put(Er))}Hn+1!=zr.Ic||Js||(n(zr.sa,zr.ta-Nn,bi,Hi+16*zr.R,Nn),n(zr.qa,zr.ra-Ra,Qa,Wn+8*zr.B,Ra),n(zr.Ha,zr.Ia-Ra,Qs,cl+8*zr.B,Ra))}if(!ys)return ln(sa,6,"Output aborted.")}return 1})(He,ut)),ut.bc!=null&&ut.bc(ut),yt&=1}return yt?(He.cb=0,yt):0})(P,ce)||(L=P.a)}}else L=P.a}L==0&&Pe.Oa!=null&&Pe.Oa.fd&&(L=Zu(Pe.ba))}Pe=L}Ee=Pe!=0?null:11>Ee?Fe.f.RGBA.eb:Fe.f.kb.y}else Ee=null;return Ee};var gx=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function d(U,Z){for(var q="",K=0;K<4;K++)q+=String.fromCharCode(U[Z++]);return q}function f(U,Z){return U[Z+0]|U[Z+1]<<8}function p(U,Z){return(U[Z+0]|U[Z+1]<<8|U[Z+2]<<16)>>>0}function y(U,Z){return(U[Z+0]|U[Z+1]<<8|U[Z+2]<<16|U[Z+3]<<24)>>>0}new c;var g=[0],N=[0],w=[],k=new c,S=e,O=(function(U,Z){var q={},K=0,Q=!1,re=0,ae=0;if(q.frames=[],!(function(F,te){for(var Y=0;Y<4;Y++)if(F[te+Y]!="RIFF".charCodeAt(Y))return!0;return!1})(U,Z)){for(y(U,Z+=4),Z+=8;Z<U.length;){var de=d(U,Z),he=y(U,Z+=4);Z+=4;var Se=he+(1&he);switch(de){case"VP8 ":case"VP8L":q.frames[K]===void 0&&(q.frames[K]={}),(fe=q.frames[K]).src_off=Q?ae:Z-8,fe.src_size=re+he+8,K++,Q&&(Q=!1,re=0,ae=0);break;case"VP8X":(fe=q.header={}).feature_flags=U[Z];var ke=Z+4;fe.canvas_width=1+p(U,ke),ke+=3,fe.canvas_height=1+p(U,ke),ke+=3;break;case"ALPH":Q=!0,re=Se+8,ae=Z-8;break;case"ANIM":(fe=q.header).bgcolor=y(U,Z),ke=Z+4,fe.loop_count=f(U,ke),ke+=2;break;case"ANMF":var Le,fe;(fe=q.frames[K]={}).offset_x=2*p(U,Z),Z+=3,fe.offset_y=2*p(U,Z),Z+=3,fe.width=1+p(U,Z),Z+=3,fe.height=1+p(U,Z),Z+=3,fe.duration=p(U,Z),Z+=3,Le=U[Z++],fe.dispose=1&Le,fe.blend=Le>>1&1}de!="ANMF"&&(Z+=Se)}return q}})(S,0);O.response=S,O.rgbaoutput=!0,O.dataurl=!1;var E=O.header?O.header:null,D=O.frames?O.frames:null;if(E){E.loop_counter=E.loop_count,g=[E.canvas_height],N=[E.canvas_width];for(var H=0;H<D.length&&D[H].blend!=0;H++);}var W=D[0],R=k.WebPDecodeRGBA(S,W.src_off,W.src_size,N,g);W.rgba=R,W.imgwidth=N[0],W.imgheight=g[0];for(var z=0;z<N[0]*g[0]*4;z++)w[z]=R[z];return this.width=N,this.height=g,this.data=w,this}(function(e){var t,r,n,a,s,l,o,c,d,f=function(F){return F=F||{},this.isStrokeTransparent=F.isStrokeTransparent||!1,this.strokeOpacity=F.strokeOpacity||1,this.strokeStyle=F.strokeStyle||"#000000",this.fillStyle=F.fillStyle||"#000000",this.isFillTransparent=F.isFillTransparent||!1,this.fillOpacity=F.fillOpacity||1,this.font=F.font||"10px sans-serif",this.textBaseline=F.textBaseline||"alphabetic",this.textAlign=F.textAlign||"left",this.lineWidth=F.lineWidth||1,this.lineJoin=F.lineJoin||"miter",this.lineCap=F.lineCap||"butt",this.path=F.path||[],this.transform=F.transform!==void 0?F.transform.clone():new c,this.globalCompositeOperation=F.globalCompositeOperation||"normal",this.globalAlpha=F.globalAlpha||1,this.clip_path=F.clip_path||[],this.currentPoint=F.currentPoint||new l,this.miterLimit=F.miterLimit||10,this.lastPoint=F.lastPoint||new l,this.lineDashOffset=F.lineDashOffset||0,this.lineDash=F.lineDash||[],this.margin=F.margin||[0,0,0,0],this.prevPageLastElemOffset=F.prevPageLastElemOffset||0,this.ignoreClearRect=typeof F.ignoreClearRect!="boolean"||F.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new p(this),t=this.internal.f2,r=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,a=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,l=this.internal.Point,o=this.internal.Rectangle,c=this.internal.Matrix,d=new f}]);var p=function(F){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var te=F;Object.defineProperty(this,"pdf",{get:function(){return te}});var Y=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return Y},set:function(De){Y=!!De}});var ne=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return ne},set:function(De){ne=!!De}});var ee=0;Object.defineProperty(this,"posX",{get:function(){return ee},set:function(De){isNaN(De)||(ee=De)}});var Ce=0;Object.defineProperty(this,"posY",{get:function(){return Ce},set:function(De){isNaN(De)||(Ce=De)}}),Object.defineProperty(this,"margin",{get:function(){return d.margin},set:function(De){var ye;typeof De=="number"?ye=[De,De,De,De]:((ye=new Array(4))[0]=De[0],ye[1]=De.length>=2?De[1]:ye[0],ye[2]=De.length>=3?De[2]:ye[0],ye[3]=De.length>=4?De[3]:ye[1]),d.margin=ye}});var me=!1;Object.defineProperty(this,"autoPaging",{get:function(){return me},set:function(De){me=De}});var se=0;Object.defineProperty(this,"lastBreak",{get:function(){return se},set:function(De){se=De}});var je=[];Object.defineProperty(this,"pageBreaks",{get:function(){return je},set:function(De){je=De}}),Object.defineProperty(this,"ctx",{get:function(){return d},set:function(De){De instanceof f&&(d=De)}}),Object.defineProperty(this,"path",{get:function(){return d.path},set:function(De){d.path=De}});var be=[];Object.defineProperty(this,"ctxStack",{get:function(){return be},set:function(De){be=De}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(De){var ye;ye=y(De),this.ctx.fillStyle=ye.style,this.ctx.isFillTransparent=ye.a===0,this.ctx.fillOpacity=ye.a,this.pdf.setFillColor(ye.r,ye.g,ye.b,{a:ye.a}),this.pdf.setTextColor(ye.r,ye.g,ye.b,{a:ye.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(De){var ye=y(De);this.ctx.strokeStyle=ye.style,this.ctx.isStrokeTransparent=ye.a===0,this.ctx.strokeOpacity=ye.a,ye.a===0?this.pdf.setDrawColor(255,255,255):(ye.a,this.pdf.setDrawColor(ye.r,ye.g,ye.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(De){["butt","round","square"].indexOf(De)!==-1&&(this.ctx.lineCap=De,this.pdf.setLineCap(De))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(De){isNaN(De)||(this.ctx.lineWidth=De,this.pdf.setLineWidth(De))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(De){["bevel","round","miter"].indexOf(De)!==-1&&(this.ctx.lineJoin=De,this.pdf.setLineJoin(De))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(De){isNaN(De)||(this.ctx.miterLimit=De,this.pdf.setMiterLimit(De))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(De){this.ctx.textBaseline=De}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(De){["right","end","center","left","start"].indexOf(De)!==-1&&(this.ctx.textAlign=De)}});var ie=null,Te=null;Object.defineProperty(this,"fontFaces",{get:function(){return Te},set:function(De){ie=null,Te=De}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(De){var ye;if(this.ctx.font=De,(ye=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(De))!==null){var rt=ye[1];ye[2];var st=ye[3],dt=ye[4];ye[5];var et=ye[6],lt=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(dt)[2];dt=Math.floor(lt==="px"?parseFloat(dt)*this.pdf.internal.scaleFactor:lt==="em"?parseFloat(dt)*this.pdf.getFontSize():parseFloat(dt)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(dt);var Ve=(function(Gt){var ur,wr,lr=[],mt=Gt.trim();if(mt==="")return MN;if(mt in GM)return[GM[mt]];for(;mt!=="";){switch(wr=null,ur=(mt=YM(mt)).charAt(0)){case'"':case"'":wr=zEe(mt.substring(1),ur);break;default:wr=qEe(mt)}if(wr===null||(lr.push(wr[0]),(mt=YM(wr[1]))!==""&&mt.charAt(0)!==","))return MN;mt=mt.replace(/^,/,"")}return lr})(et);if(this.fontFaces){var Vt=(function(Gt,ur){if(ie===null){var wr=(function(lr){var mt=[];return Object.keys(lr).forEach(function(kr){lr[kr].forEach(function(Ke){var vt=null;switch(Ke){case"bold":vt={family:kr,weight:"bold"};break;case"italic":vt={family:kr,style:"italic"};break;case"bolditalic":vt={family:kr,weight:"bold",style:"italic"};break;case"":case"normal":vt={family:kr}}vt!==null&&(vt.ref={name:kr,style:Ke},mt.push(vt))})}),mt})(Gt.getFontList());ie=(function(lr){for(var mt={},kr=0;kr<lr.length;++kr){var Ke=DN(lr[kr]),vt=Ke.family,Kt=Ke.stretch,tr=Ke.style,Pr=Ke.weight;mt[vt]=mt[vt]||{},mt[vt][Kt]=mt[vt][Kt]||{},mt[vt][Kt][tr]=mt[vt][Kt][tr]||{},mt[vt][Kt][tr][Pr]=Ke}return mt})(wr.concat(ur))}return ie})(this.pdf,this.fontFaces),Mt=Ve.map(function(Gt){return{family:Gt,stretch:"normal",weight:st,style:rt}}),mr=(function(Gt,ur,wr){for(var lr=(wr=wr||{}).defaultFontFamily||"times",mt=Object.assign({},UEe,wr.genericFontFamilies||{}),kr=null,Ke=null,vt=0;vt<ur.length;++vt)if(mt[(kr=DN(ur[vt])).family]&&(kr.family=mt[kr.family]),Gt.hasOwnProperty(kr.family)){Ke=Gt[kr.family];break}if(!(Ke=Ke||Gt[lr]))throw new Error("Could not find a font-family for the rule '"+XM(kr)+"' and default family '"+lr+"'.");if(Ke=(function(Kt,tr){if(tr[Kt])return tr[Kt];var Pr=ZS[Kt],Nr=Pr<=ZS.normal?-1:1,Ge=KM(tr,PW,Pr,Nr);if(!Ge)throw new Error("Could not find a matching font-stretch value for "+Kt);return Ge})(kr.stretch,Ke),Ke=(function(Kt,tr){if(tr[Kt])return tr[Kt];for(var Pr=OW[Kt],Nr=0;Nr<Pr.length;++Nr)if(tr[Pr[Nr]])return tr[Pr[Nr]];throw new Error("Could not find a matching font-style for "+Kt)})(kr.style,Ke),!(Ke=(function(Kt,tr){if(tr[Kt])return tr[Kt];if(Kt===400&&tr[500])return tr[500];if(Kt===500&&tr[400])return tr[400];var Pr=BEe[Kt],Nr=KM(tr,IW,Pr,Kt<400?-1:1);if(!Nr)throw new Error("Could not find a matching font-weight for value "+Kt);return Nr})(kr.weight,Ke)))throw new Error("Failed to resolve a font for the rule '"+XM(kr)+"'.");return Ke})(Vt,Mt);this.pdf.setFont(mr.ref.name,mr.ref.style)}else{var xr="";(st==="bold"||parseInt(st,10)>=700||rt==="bold")&&(xr="bold"),rt==="italic"&&(xr+="italic"),xr.length===0&&(xr="normal");for(var sr="",Ir={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},er=0;er<Ve.length;er++){if(this.pdf.internal.getFont(Ve[er],xr,{noFallback:!0,disableWarning:!0})!==void 0){sr=Ve[er];break}if(xr==="bolditalic"&&this.pdf.internal.getFont(Ve[er],"bold",{noFallback:!0,disableWarning:!0})!==void 0)sr=Ve[er],xr="bold";else if(this.pdf.internal.getFont(Ve[er],"normal",{noFallback:!0,disableWarning:!0})!==void 0){sr=Ve[er],xr="normal";break}}if(sr===""){for(var Xt=0;Xt<Ve.length;Xt++)if(Ir[Ve[Xt]]){sr=Ir[Ve[Xt]];break}}sr=sr===""?"Times":sr,this.pdf.setFont(sr,xr)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(De){this.ctx.globalCompositeOperation=De}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(De){this.ctx.globalAlpha=De}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(De){this.ctx.lineDashOffset=De,fe.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(De){this.ctx.lineDash=De,fe.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(De){this.ctx.ignoreClearRect=!!De}})};p.prototype.setLineDash=function(F){this.lineDash=F},p.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},p.prototype.fill=function(){D.call(this,"fill",!1)},p.prototype.stroke=function(){D.call(this,"stroke",!1)},p.prototype.beginPath=function(){this.path=[{type:"begin"}]},p.prototype.moveTo=function(F,te){if(isNaN(F)||isNaN(te))throw fs.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var Y=this.ctx.transform.applyToPoint(new l(F,te));this.path.push({type:"mt",x:Y.x,y:Y.y}),this.ctx.lastPoint=new l(F,te)},p.prototype.closePath=function(){var F=new l(0,0),te=0;for(te=this.path.length-1;te!==-1;te--)if(this.path[te].type==="begin"&&Xa(this.path[te+1])==="object"&&typeof this.path[te+1].x=="number"){F=new l(this.path[te+1].x,this.path[te+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new l(F.x,F.y)},p.prototype.lineTo=function(F,te){if(isNaN(F)||isNaN(te))throw fs.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var Y=this.ctx.transform.applyToPoint(new l(F,te));this.path.push({type:"lt",x:Y.x,y:Y.y}),this.ctx.lastPoint=new l(Y.x,Y.y)},p.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),D.call(this,null,!0)},p.prototype.quadraticCurveTo=function(F,te,Y,ne){if(isNaN(Y)||isNaN(ne)||isNaN(F)||isNaN(te))throw fs.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ee=this.ctx.transform.applyToPoint(new l(Y,ne)),Ce=this.ctx.transform.applyToPoint(new l(F,te));this.path.push({type:"qct",x1:Ce.x,y1:Ce.y,x:ee.x,y:ee.y}),this.ctx.lastPoint=new l(ee.x,ee.y)},p.prototype.bezierCurveTo=function(F,te,Y,ne,ee,Ce){if(isNaN(ee)||isNaN(Ce)||isNaN(F)||isNaN(te)||isNaN(Y)||isNaN(ne))throw fs.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var me=this.ctx.transform.applyToPoint(new l(ee,Ce)),se=this.ctx.transform.applyToPoint(new l(F,te)),je=this.ctx.transform.applyToPoint(new l(Y,ne));this.path.push({type:"bct",x1:se.x,y1:se.y,x2:je.x,y2:je.y,x:me.x,y:me.y}),this.ctx.lastPoint=new l(me.x,me.y)},p.prototype.arc=function(F,te,Y,ne,ee,Ce){if(isNaN(F)||isNaN(te)||isNaN(Y)||isNaN(ne)||isNaN(ee))throw fs.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(Ce=!!Ce,!this.ctx.transform.isIdentity){var me=this.ctx.transform.applyToPoint(new l(F,te));F=me.x,te=me.y;var se=this.ctx.transform.applyToPoint(new l(0,Y)),je=this.ctx.transform.applyToPoint(new l(0,0));Y=Math.sqrt(Math.pow(se.x-je.x,2)+Math.pow(se.y-je.y,2))}Math.abs(ee-ne)>=2*Math.PI&&(ne=0,ee=2*Math.PI),this.path.push({type:"arc",x:F,y:te,radius:Y,startAngle:ne,endAngle:ee,counterclockwise:Ce})},p.prototype.arcTo=function(F,te,Y,ne,ee){throw new Error("arcTo not implemented.")},p.prototype.rect=function(F,te,Y,ne){if(isNaN(F)||isNaN(te)||isNaN(Y)||isNaN(ne))throw fs.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(F,te),this.lineTo(F+Y,te),this.lineTo(F+Y,te+ne),this.lineTo(F,te+ne),this.lineTo(F,te),this.lineTo(F+Y,te),this.lineTo(F,te)},p.prototype.fillRect=function(F,te,Y,ne){if(isNaN(F)||isNaN(te)||isNaN(Y)||isNaN(ne))throw fs.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!g.call(this)){var ee={};this.lineCap!=="butt"&&(ee.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ee.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(F,te,Y,ne),this.fill(),ee.hasOwnProperty("lineCap")&&(this.lineCap=ee.lineCap),ee.hasOwnProperty("lineJoin")&&(this.lineJoin=ee.lineJoin)}},p.prototype.strokeRect=function(F,te,Y,ne){if(isNaN(F)||isNaN(te)||isNaN(Y)||isNaN(ne))throw fs.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");N.call(this)||(this.beginPath(),this.rect(F,te,Y,ne),this.stroke())},p.prototype.clearRect=function(F,te,Y,ne){if(isNaN(F)||isNaN(te)||isNaN(Y)||isNaN(ne))throw fs.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(F,te,Y,ne))},p.prototype.save=function(F){F=typeof F!="boolean"||F;for(var te=this.pdf.internal.getCurrentPageInfo().pageNumber,Y=0;Y<this.pdf.internal.getNumberOfPages();Y++)this.pdf.setPage(Y+1),this.pdf.internal.out("q");if(this.pdf.setPage(te),F){this.ctx.fontSize=this.pdf.internal.getFontSize();var ne=new f(this.ctx);this.ctxStack.push(this.ctx),this.ctx=ne}},p.prototype.restore=function(F){F=typeof F!="boolean"||F;for(var te=this.pdf.internal.getCurrentPageInfo().pageNumber,Y=0;Y<this.pdf.internal.getNumberOfPages();Y++)this.pdf.setPage(Y+1),this.pdf.internal.out("Q");this.pdf.setPage(te),F&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},p.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var y=function(F){var te,Y,ne,ee;if(F.isCanvasGradient===!0&&(F=F.getColor()),!F)return{r:0,g:0,b:0,a:0,style:F};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(F))te=0,Y=0,ne=0,ee=0;else{var Ce=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(F);if(Ce!==null)te=parseInt(Ce[1]),Y=parseInt(Ce[2]),ne=parseInt(Ce[3]),ee=1;else if((Ce=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(F))!==null)te=parseInt(Ce[1]),Y=parseInt(Ce[2]),ne=parseInt(Ce[3]),ee=parseFloat(Ce[4]);else{if(ee=1,typeof F=="string"&&F.charAt(0)!=="#"){var me=new _W(F);F=me.ok?me.toHex():"#000000"}F.length===4?(te=F.substring(1,2),te+=te,Y=F.substring(2,3),Y+=Y,ne=F.substring(3,4),ne+=ne):(te=F.substring(1,3),Y=F.substring(3,5),ne=F.substring(5,7)),te=parseInt(te,16),Y=parseInt(Y,16),ne=parseInt(ne,16)}}return{r:te,g:Y,b:ne,a:ee,style:F}},g=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},N=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};p.prototype.fillText=function(F,te,Y,ne){if(isNaN(te)||isNaN(Y)||typeof F!="string")throw fs.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(ne=isNaN(ne)?void 0:ne,!g.call(this)){var ee=Se(this.ctx.transform.rotation),Ce=this.ctx.transform.scaleX;K.call(this,{text:F,x:te,y:Y,scale:Ce,angle:ee,align:this.textAlign,maxWidth:ne})}},p.prototype.strokeText=function(F,te,Y,ne){if(isNaN(te)||isNaN(Y)||typeof F!="string")throw fs.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!N.call(this)){ne=isNaN(ne)?void 0:ne;var ee=Se(this.ctx.transform.rotation),Ce=this.ctx.transform.scaleX;K.call(this,{text:F,x:te,y:Y,scale:Ce,renderingMode:"stroke",angle:ee,align:this.textAlign,maxWidth:ne})}},p.prototype.measureText=function(F){if(typeof F!="string")throw fs.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var te=this.pdf,Y=this.pdf.internal.scaleFactor,ne=te.internal.getFontSize(),ee=te.getStringUnitWidth(F)*ne/te.internal.scaleFactor;return new function(Ce){var me=(Ce=Ce||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return me}}),this}({width:ee*=Math.round(96*Y/72*1e4)/1e4})},p.prototype.scale=function(F,te){if(isNaN(F)||isNaN(te))throw fs.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var Y=new c(F,0,0,te,0,0);this.ctx.transform=this.ctx.transform.multiply(Y)},p.prototype.rotate=function(F){if(isNaN(F))throw fs.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var te=new c(Math.cos(F),Math.sin(F),-Math.sin(F),Math.cos(F),0,0);this.ctx.transform=this.ctx.transform.multiply(te)},p.prototype.translate=function(F,te){if(isNaN(F)||isNaN(te))throw fs.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var Y=new c(1,0,0,1,F,te);this.ctx.transform=this.ctx.transform.multiply(Y)},p.prototype.transform=function(F,te,Y,ne,ee,Ce){if(isNaN(F)||isNaN(te)||isNaN(Y)||isNaN(ne)||isNaN(ee)||isNaN(Ce))throw fs.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var me=new c(F,te,Y,ne,ee,Ce);this.ctx.transform=this.ctx.transform.multiply(me)},p.prototype.setTransform=function(F,te,Y,ne,ee,Ce){F=isNaN(F)?1:F,te=isNaN(te)?0:te,Y=isNaN(Y)?0:Y,ne=isNaN(ne)?1:ne,ee=isNaN(ee)?0:ee,Ce=isNaN(Ce)?0:Ce,this.ctx.transform=new c(F,te,Y,ne,ee,Ce)};var w=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};p.prototype.drawImage=function(F,te,Y,ne,ee,Ce,me,se,je){var be=this.pdf.getImageProperties(F),ie=1,Te=1,De=1,ye=1;ne!==void 0&&se!==void 0&&(De=se/ne,ye=je/ee,ie=be.width/ne*se/ne,Te=be.height/ee*je/ee),Ce===void 0&&(Ce=te,me=Y,te=0,Y=0),ne!==void 0&&se===void 0&&(se=ne,je=ee),ne===void 0&&se===void 0&&(se=be.width,je=be.height);for(var rt,st=this.ctx.transform.decompose(),dt=Se(st.rotate.shx),et=new c,lt=(et=(et=(et=et.multiply(st.translate)).multiply(st.skew)).multiply(st.scale)).applyToRectangle(new o(Ce-te*De,me-Y*ye,ne*ie,ee*Te)),Ve=k.call(this,lt),Vt=[],Mt=0;Mt<Ve.length;Mt+=1)Vt.indexOf(Ve[Mt])===-1&&Vt.push(Ve[Mt]);if(E(Vt),this.autoPaging)for(var mr=Vt[0],xr=Vt[Vt.length-1],sr=mr;sr<xr+1;sr++){this.pdf.setPage(sr);var Ir=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],er=sr===1?this.posY+this.margin[0]:this.margin[0],Xt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Gt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ur=sr===1?0:Xt+(sr-2)*Gt;if(this.ctx.clip_path.length!==0){var wr=this.path;rt=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=O(rt,this.posX+this.margin[3],-ur+er+this.ctx.prevPageLastElemOffset),H.call(this,"fill",!0),this.path=wr}var lr=JSON.parse(JSON.stringify(lt));lr=O([lr],this.posX+this.margin[3],-ur+er+this.ctx.prevPageLastElemOffset)[0];var mt=(sr>mr||sr<xr)&&w.call(this);mt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ir,Gt,null).clip().discardPath()),this.pdf.addImage(F,"JPEG",lr.x,lr.y,lr.w,lr.h,null,null,dt),mt&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(F,"JPEG",lt.x,lt.y,lt.w,lt.h,null,null,dt)};var k=function(F,te,Y){var ne=[];te=te||this.pdf.internal.pageSize.width,Y=Y||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ee=this.posY+this.ctx.prevPageLastElemOffset;switch(F.type){default:case"mt":case"lt":ne.push(Math.floor((F.y+ee)/Y)+1);break;case"arc":ne.push(Math.floor((F.y+ee-F.radius)/Y)+1),ne.push(Math.floor((F.y+ee+F.radius)/Y)+1);break;case"qct":var Ce=ke(this.ctx.lastPoint.x,this.ctx.lastPoint.y,F.x1,F.y1,F.x,F.y);ne.push(Math.floor((Ce.y+ee)/Y)+1),ne.push(Math.floor((Ce.y+Ce.h+ee)/Y)+1);break;case"bct":var me=Le(this.ctx.lastPoint.x,this.ctx.lastPoint.y,F.x1,F.y1,F.x2,F.y2,F.x,F.y);ne.push(Math.floor((me.y+ee)/Y)+1),ne.push(Math.floor((me.y+me.h+ee)/Y)+1);break;case"rect":ne.push(Math.floor((F.y+ee)/Y)+1),ne.push(Math.floor((F.y+F.h+ee)/Y)+1)}for(var se=0;se<ne.length;se+=1)for(;this.pdf.internal.getNumberOfPages()<ne[se];)S.call(this);return ne},S=function(){var F=this.fillStyle,te=this.strokeStyle,Y=this.font,ne=this.lineCap,ee=this.lineWidth,Ce=this.lineJoin;this.pdf.addPage(),this.fillStyle=F,this.strokeStyle=te,this.font=Y,this.lineCap=ne,this.lineWidth=ee,this.lineJoin=Ce},O=function(F,te,Y){for(var ne=0;ne<F.length;ne++)switch(F[ne].type){case"bct":F[ne].x2+=te,F[ne].y2+=Y;case"qct":F[ne].x1+=te,F[ne].y1+=Y;default:F[ne].x+=te,F[ne].y+=Y}return F},E=function(F){return F.sort(function(te,Y){return te-Y})},D=function(F,te){for(var Y,ne,ee=this.fillStyle,Ce=this.strokeStyle,me=this.lineCap,se=this.lineWidth,je=Math.abs(se*this.ctx.transform.scaleX),be=this.lineJoin,ie=JSON.parse(JSON.stringify(this.path)),Te=JSON.parse(JSON.stringify(this.path)),De=[],ye=0;ye<Te.length;ye++)if(Te[ye].x!==void 0)for(var rt=k.call(this,Te[ye]),st=0;st<rt.length;st+=1)De.indexOf(rt[st])===-1&&De.push(rt[st]);for(var dt=0;dt<De.length;dt++)for(;this.pdf.internal.getNumberOfPages()<De[dt];)S.call(this);if(E(De),this.autoPaging)for(var et=De[0],lt=De[De.length-1],Ve=et;Ve<lt+1;Ve++){this.pdf.setPage(Ve),this.fillStyle=ee,this.strokeStyle=Ce,this.lineCap=me,this.lineWidth=je,this.lineJoin=be;var Vt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Mt=Ve===1?this.posY+this.margin[0]:this.margin[0],mr=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],xr=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],sr=Ve===1?0:mr+(Ve-2)*xr;if(this.ctx.clip_path.length!==0){var Ir=this.path;Y=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=O(Y,this.posX+this.margin[3],-sr+Mt+this.ctx.prevPageLastElemOffset),H.call(this,F,!0),this.path=Ir}if(ne=JSON.parse(JSON.stringify(ie)),this.path=O(ne,this.posX+this.margin[3],-sr+Mt+this.ctx.prevPageLastElemOffset),te===!1||Ve===0){var er=(Ve>et||Ve<lt)&&w.call(this);er&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Vt,xr,null).clip().discardPath()),H.call(this,F,te),er&&this.pdf.restoreGraphicsState()}this.lineWidth=se}else this.lineWidth=je,H.call(this,F,te),this.lineWidth=se;this.path=ie},H=function(F,te){if((F!=="stroke"||te||!N.call(this))&&(F==="stroke"||te||!g.call(this))){for(var Y,ne,ee=[],Ce=this.path,me=0;me<Ce.length;me++){var se=Ce[me];switch(se.type){case"begin":ee.push({begin:!0});break;case"close":ee.push({close:!0});break;case"mt":ee.push({start:se,deltas:[],abs:[]});break;case"lt":var je=ee.length;if(Ce[me-1]&&!isNaN(Ce[me-1].x)&&(Y=[se.x-Ce[me-1].x,se.y-Ce[me-1].y],je>0)){for(;je>=0;je--)if(ee[je-1].close!==!0&&ee[je-1].begin!==!0){ee[je-1].deltas.push(Y),ee[je-1].abs.push(se);break}}break;case"bct":Y=[se.x1-Ce[me-1].x,se.y1-Ce[me-1].y,se.x2-Ce[me-1].x,se.y2-Ce[me-1].y,se.x-Ce[me-1].x,se.y-Ce[me-1].y],ee[ee.length-1].deltas.push(Y);break;case"qct":var be=Ce[me-1].x+2/3*(se.x1-Ce[me-1].x),ie=Ce[me-1].y+2/3*(se.y1-Ce[me-1].y),Te=se.x+2/3*(se.x1-se.x),De=se.y+2/3*(se.y1-se.y),ye=se.x,rt=se.y;Y=[be-Ce[me-1].x,ie-Ce[me-1].y,Te-Ce[me-1].x,De-Ce[me-1].y,ye-Ce[me-1].x,rt-Ce[me-1].y],ee[ee.length-1].deltas.push(Y);break;case"arc":ee.push({deltas:[],abs:[],arc:!0}),Array.isArray(ee[ee.length-1].abs)&&ee[ee.length-1].abs.push(se)}}ne=te?null:F==="stroke"?"stroke":"fill";for(var st=!1,dt=0;dt<ee.length;dt++)if(ee[dt].arc)for(var et=ee[dt].abs,lt=0;lt<et.length;lt++){var Ve=et[lt];Ve.type==="arc"?z.call(this,Ve.x,Ve.y,Ve.radius,Ve.startAngle,Ve.endAngle,Ve.counterclockwise,void 0,te,!st):Q.call(this,Ve.x,Ve.y),st=!0}else if(ee[dt].close===!0)this.pdf.internal.out("h"),st=!1;else if(ee[dt].begin!==!0){var Vt=ee[dt].start.x,Mt=ee[dt].start.y;re.call(this,ee[dt].deltas,Vt,Mt),st=!0}ne&&U.call(this,ne),te&&Z.call(this)}},W=function(F){var te=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,Y=te*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return F-Y;case"top":return F+te-Y;case"hanging":return F+te-2*Y;case"middle":return F+te/2-Y;default:return F}},R=function(F){return F+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};p.prototype.createLinearGradient=function(){var F=function(){};return F.colorStops=[],F.addColorStop=function(te,Y){this.colorStops.push([te,Y])},F.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},F.isCanvasGradient=!0,F},p.prototype.createPattern=function(){return this.createLinearGradient()},p.prototype.createRadialGradient=function(){return this.createLinearGradient()};var z=function(F,te,Y,ne,ee,Ce,me,se,je){for(var be=de.call(this,Y,ne,ee,Ce),ie=0;ie<be.length;ie++){var Te=be[ie];ie===0&&(je?q.call(this,Te.x1+F,Te.y1+te):Q.call(this,Te.x1+F,Te.y1+te)),ae.call(this,F,te,Te.x2,Te.y2,Te.x3,Te.y3,Te.x4,Te.y4)}se?Z.call(this):U.call(this,me)},U=function(F){switch(F){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},Z=function(){this.pdf.clip(),this.pdf.discardPath()},q=function(F,te){this.pdf.internal.out(r(F)+" "+n(te)+" m")},K=function(F){var te;switch(F.align){case"right":case"end":te="right";break;case"center":te="center";break;default:te="left"}var Y=this.pdf.getTextDimensions(F.text),ne=W.call(this,F.y),ee=R.call(this,ne)-Y.h,Ce=this.ctx.transform.applyToPoint(new l(F.x,ne)),me=this.ctx.transform.decompose(),se=new c;se=(se=(se=se.multiply(me.translate)).multiply(me.skew)).multiply(me.scale);for(var je,be,ie,Te=this.ctx.transform.applyToRectangle(new o(F.x,ne,Y.w,Y.h)),De=se.applyToRectangle(new o(F.x,ee,Y.w,Y.h)),ye=k.call(this,De),rt=[],st=0;st<ye.length;st+=1)rt.indexOf(ye[st])===-1&&rt.push(ye[st]);if(E(rt),this.autoPaging)for(var dt=rt[0],et=rt[rt.length-1],lt=dt;lt<et+1;lt++){this.pdf.setPage(lt);var Ve=lt===1?this.posY+this.margin[0]:this.margin[0],Vt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Mt=this.pdf.internal.pageSize.height-this.margin[2],mr=Mt-this.margin[0],xr=this.pdf.internal.pageSize.width-this.margin[1],sr=xr-this.margin[3],Ir=lt===1?0:Vt+(lt-2)*mr;if(this.ctx.clip_path.length!==0){var er=this.path;je=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=O(je,this.posX+this.margin[3],-1*Ir+Ve),H.call(this,"fill",!0),this.path=er}var Xt=O([JSON.parse(JSON.stringify(De))],this.posX+this.margin[3],-Ir+Ve+this.ctx.prevPageLastElemOffset)[0];F.scale>=.01&&(be=this.pdf.internal.getFontSize(),this.pdf.setFontSize(be*F.scale),ie=this.lineWidth,this.lineWidth=ie*F.scale);var Gt=this.autoPaging!=="text";if(Gt||Xt.y+Xt.h<=Mt){if(Gt||Xt.y>=Ve&&Xt.x<=xr){var ur=Gt?F.text:this.pdf.splitTextToSize(F.text,F.maxWidth||xr-Xt.x)[0],wr=O([JSON.parse(JSON.stringify(Te))],this.posX+this.margin[3],-Ir+Ve+this.ctx.prevPageLastElemOffset)[0],lr=Gt&&(lt>dt||lt<et)&&w.call(this);lr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],sr,mr,null).clip().discardPath()),this.pdf.text(ur,wr.x,wr.y,{angle:F.angle,align:te,renderingMode:F.renderingMode}),lr&&this.pdf.restoreGraphicsState()}}else Xt.y<Mt&&(this.ctx.prevPageLastElemOffset+=Mt-Xt.y);F.scale>=.01&&(this.pdf.setFontSize(be),this.lineWidth=ie)}else F.scale>=.01&&(be=this.pdf.internal.getFontSize(),this.pdf.setFontSize(be*F.scale),ie=this.lineWidth,this.lineWidth=ie*F.scale),this.pdf.text(F.text,Ce.x+this.posX,Ce.y+this.posY,{angle:F.angle,align:te,renderingMode:F.renderingMode,maxWidth:F.maxWidth}),F.scale>=.01&&(this.pdf.setFontSize(be),this.lineWidth=ie)},Q=function(F,te,Y,ne){Y=Y||0,ne=ne||0,this.pdf.internal.out(r(F+Y)+" "+n(te+ne)+" l")},re=function(F,te,Y){return this.pdf.lines(F,te,Y,null,null)},ae=function(F,te,Y,ne,ee,Ce,me,se){this.pdf.internal.out([t(a(Y+F)),t(s(ne+te)),t(a(ee+F)),t(s(Ce+te)),t(a(me+F)),t(s(se+te)),"c"].join(" "))},de=function(F,te,Y,ne){for(var ee=2*Math.PI,Ce=Math.PI/2;te>Y;)te-=ee;var me=Math.abs(Y-te);me<ee&&ne&&(me=ee-me);for(var se=[],je=ne?-1:1,be=te;me>1e-5;){var ie=be+je*Math.min(me,Ce);se.push(he.call(this,F,be,ie)),me-=Math.abs(ie-be),be=ie}return se},he=function(F,te,Y){var ne=(Y-te)/2,ee=F*Math.cos(ne),Ce=F*Math.sin(ne),me=ee,se=-Ce,je=me*me+se*se,be=je+me*ee+se*Ce,ie=4/3*(Math.sqrt(2*je*be)-be)/(me*Ce-se*ee),Te=me-ie*se,De=se+ie*me,ye=Te,rt=-De,st=ne+te,dt=Math.cos(st),et=Math.sin(st);return{x1:F*Math.cos(te),y1:F*Math.sin(te),x2:Te*dt-De*et,y2:Te*et+De*dt,x3:ye*dt-rt*et,y3:ye*et+rt*dt,x4:F*Math.cos(Y),y4:F*Math.sin(Y)}},Se=function(F){return 180*F/Math.PI},ke=function(F,te,Y,ne,ee,Ce){var me=F+.5*(Y-F),se=te+.5*(ne-te),je=ee+.5*(Y-ee),be=Ce+.5*(ne-Ce),ie=Math.min(F,ee,me,je),Te=Math.max(F,ee,me,je),De=Math.min(te,Ce,se,be),ye=Math.max(te,Ce,se,be);return new o(ie,De,Te-ie,ye-De)},Le=function(F,te,Y,ne,ee,Ce,me,se){var je,be,ie,Te,De,ye,rt,st,dt,et,lt,Ve,Vt,Mt,mr=Y-F,xr=ne-te,sr=ee-Y,Ir=Ce-ne,er=me-ee,Xt=se-Ce;for(be=0;be<41;be++)dt=(rt=(ie=F+(je=be/40)*mr)+je*((De=Y+je*sr)-ie))+je*(De+je*(ee+je*er-De)-rt),et=(st=(Te=te+je*xr)+je*((ye=ne+je*Ir)-Te))+je*(ye+je*(Ce+je*Xt-ye)-st),be==0?(lt=dt,Ve=et,Vt=dt,Mt=et):(lt=Math.min(lt,dt),Ve=Math.min(Ve,et),Vt=Math.max(Vt,dt),Mt=Math.max(Mt,et));return new o(Math.round(lt),Math.round(Ve),Math.round(Vt-lt),Math.round(Mt-Ve))},fe=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var F,te,Y=(F=this.ctx.lineDash,te=this.ctx.lineDashOffset,JSON.stringify({lineDash:F,lineDashOffset:te}));this.prevLineDash!==Y&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=Y)}}})(rn.API),(function(e){var t=function(l){var o,c,d,f,p,y,g,N,w,k;for(c=[],d=0,f=(l+=o="\0\0\0\0".slice(l.length%4||4)).length;f>d;d+=4)(p=(l.charCodeAt(d)<<24)+(l.charCodeAt(d+1)<<16)+(l.charCodeAt(d+2)<<8)+l.charCodeAt(d+3))!==0?(y=(p=((p=((p=((p=(p-(k=p%85))/85)-(w=p%85))/85)-(N=p%85))/85)-(g=p%85))/85)%85,c.push(y+33,g+33,N+33,w+33,k+33)):c.push(122);return(function(S,O){for(var E=O;E>0;E--)S.pop()})(c,o.length),String.fromCharCode.apply(String,c)+"~>"},r=function(l){var o,c,d,f,p,y=String,g="length",N=255,w="charCodeAt",k="slice",S="replace";for(l[k](-2),l=l[k](0,-2)[S](/\s/g,"")[S]("z","!!!!!"),d=[],f=0,p=(l+=o="uuuuu"[k](l[g]%5||5))[g];p>f;f+=5)c=52200625*(l[w](f)-33)+614125*(l[w](f+1)-33)+7225*(l[w](f+2)-33)+85*(l[w](f+3)-33)+(l[w](f+4)-33),d.push(N&c>>24,N&c>>16,N&c>>8,N&c);return(function(O,E){for(var D=E;D>0;D--)O.pop()})(d,o[g]),y.fromCharCode.apply(y,d)},n=function(l){return l.split("").map(function(o){return("0"+o.charCodeAt().toString(16)).slice(-2)}).join("")+">"},a=function(l){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((l=l.replace(/\s/g,"")).indexOf(">")!==-1&&(l=l.substr(0,l.indexOf(">"))),l.length%2&&(l+="0"),o.test(l)===!1)return"";for(var c="",d=0;d<l.length;d+=2)c+=String.fromCharCode("0x"+(l[d]+l[d+1]));return c},s=function(l){for(var o=new Uint8Array(l.length),c=l.length;c--;)o[c]=l.charCodeAt(c);return(o=$S(o)).reduce(function(d,f){return d+String.fromCharCode(f)},"")};e.processDataByFilters=function(l,o){var c=0,d=l||"",f=[];for(typeof(o=o||[])=="string"&&(o=[o]),c=0;c<o.length;c+=1)switch(o[c]){case"ASCII85Decode":case"/ASCII85Decode":d=r(d),f.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":d=t(d),f.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":d=a(d),f.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":d=n(d),f.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":d=s(d),f.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[c]+'" is not implemented')}return{data:d,reverseChain:f.reverse().join(" ")}}})(rn.API),(function(e){e.loadFile=function(t,r,n){return(function(a,s,l){s=s!==!1,l=typeof l=="function"?l:function(){};var o=void 0;try{o=(function(c,d,f){var p=new XMLHttpRequest,y=0,g=function(N){var w=N.length,k=[],S=String.fromCharCode;for(y=0;y<w;y+=1)k.push(S(255&N.charCodeAt(y)));return k.join("")};if(p.open("GET",c,!d),p.overrideMimeType("text/plain; charset=x-user-defined"),d===!1&&(p.onload=function(){p.status===200?f(g(this.responseText)):f(void 0)}),p.send(null),d&&p.status===200)return g(p.responseText)})(a,s,l)}catch{}return o})(t,r,n)},e.loadImageFile=e.loadFile})(rn.API),(function(e){function t(){return(Fn.html2canvas?Promise.resolve(Fn.html2canvas):c1(()=>import("./html2canvas.esm-QH1iLAAe.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function r(){return(Fn.DOMPurify?Promise.resolve(Fn.DOMPurify):c1(()=>import("./purify.es-B6FQ9oRL.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var n=function(o){var c=Xa(o);return c==="undefined"?"undefined":c==="string"||o instanceof String?"string":c==="number"||o instanceof Number?"number":c==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":c==="object"?"object":"unknown"},a=function(o,c){var d=document.createElement(o);for(var f in c.className&&(d.className=c.className),c.innerHTML&&c.dompurify&&(d.innerHTML=c.dompurify.sanitize(c.innerHTML)),c.style)d.style[f]=c.style[f];return d},s=function o(c,d){for(var f=c.nodeType===3?document.createTextNode(c.nodeValue):c.cloneNode(!1),p=c.firstChild;p;p=p.nextSibling)d!==!0&&p.nodeType===1&&p.nodeName==="SCRIPT"||f.appendChild(o(p,d));return c.nodeType===1&&(c.nodeName==="CANVAS"?(f.width=c.width,f.height=c.height,f.getContext("2d").drawImage(c,0,0)):c.nodeName!=="TEXTAREA"&&c.nodeName!=="SELECT"||(f.value=c.value),f.addEventListener("load",function(){f.scrollTop=c.scrollTop,f.scrollLeft=c.scrollLeft},!0)),f},l=function o(c){var d=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),f=o.convert(Promise.resolve(),d);return(f=f.setProgress(1,o,1,[o])).set(c)};(l.prototype=Object.create(Promise.prototype)).constructor=l,l.convert=function(o,c){return o.__proto__=c||l.prototype,o},l.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},l.prototype.from=function(o,c){return this.then(function(){switch(c=c||(function(d){switch(n(d)){case"string":return"string";case"element":return d.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(o),c){case"string":return this.then(r).then(function(d){return this.set({src:a("div",{innerHTML:o,dompurify:d})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},l.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},l.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},c=s(this.prop.src,this.opt.html2canvas.javascriptEnabled);c.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=a("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=a("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(c),this.prop.container.firstChild.appendChild(a("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},l.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then(function(c){var d=Object.assign({},this.opt.html2canvas);return delete d.onrendered,c(this.prop.container,d)}).then(function(c){(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},l.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then(function(c){var d=this.opt.jsPDF,f=this.opt.fontFaces,p=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,y=Object.assign({async:!0,allowTaint:!0,scale:p,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete y.onrendered,d.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,d.context2d.posX=this.opt.x,d.context2d.posY=this.opt.y,d.context2d.margin=this.opt.margin,d.context2d.fontFaces=f,f)for(var g=0;g<f.length;++g){var N=f[g],w=N.src.find(function(k){return k.format==="truetype"});w&&d.addFont(w.url,N.ref.name,N.ref.style)}return y.windowHeight=y.windowHeight||0,y.windowHeight=y.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):y.windowHeight,d.context2d.save(!0),c(this.prop.container,y)}).then(function(c){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},l.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},l.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},l.prototype.output=function(o,c,d){return(d=d||"pdf").toLowerCase()==="img"||d.toLowerCase()==="image"?this.outputImg(o,c):this.outputPdf(o,c)},l.prototype.outputPdf=function(o,c){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,c)})},l.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},l.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},l.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},l.prototype.set=function(o){if(n(o)!=="object")return this;var c=Object.keys(o||{}).map(function(d){if(d in l.template.prop)return function(){this.prop[d]=o[d]};switch(d){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[d]=o[d]}}},this);return this.then(function(){return this.thenList(c)})},l.prototype.get=function(o,c){return this.then(function(){var d=o in l.template.prop?this.prop[o]:this.opt[o];return c?c(d):d})},l.prototype.setMargin=function(o){return this.then(function(){switch(n(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},l.prototype.setPageSize=function(o){function c(d,f){return Math.floor(d*f/72*96)}return this.then(function(){(o=o||rn.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:c(o.inner.width,o.k),height:c(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},l.prototype.setProgress=function(o,c,d,f){return o!=null&&(this.progress.val=o),c!=null&&(this.progress.state=c),d!=null&&(this.progress.n=d),f!=null&&(this.progress.stack=f),this.progress.ratio=this.progress.val/this.progress.state,this},l.prototype.updateProgress=function(o,c,d,f){return this.setProgress(o?this.progress.val+o:null,c||null,d?this.progress.n+d:null,f?this.progress.stack.concat(f):null)},l.prototype.then=function(o,c){var d=this;return this.thenCore(o,c,function(f,p){return d.updateProgress(null,null,1,[f]),Promise.prototype.then.call(this,function(y){return d.updateProgress(null,f),y}).then(f,p).then(function(y){return d.updateProgress(1),y})})},l.prototype.thenCore=function(o,c,d){d=d||Promise.prototype.then;var f=this;o&&(o=o.bind(f)),c&&(c=c.bind(f));var p=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?f:l.convert(Object.assign({},f),Promise.prototype),y=d.call(p,o,c);return l.convert(y,f.__proto__)},l.prototype.thenExternal=function(o,c){return Promise.prototype.then.call(this,o,c)},l.prototype.thenList=function(o){var c=this;return o.forEach(function(d){c=c.thenCore(d)}),c},l.prototype.catch=function(o){o&&(o=o.bind(this));var c=Promise.prototype.catch.call(this,o);return l.convert(c,this)},l.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},l.prototype.error=function(o){return this.then(function(){throw new Error(o)})},l.prototype.using=l.prototype.set,l.prototype.saveAs=l.prototype.save,l.prototype.export=l.prototype.output,l.prototype.run=l.prototype.then,rn.getPageSize=function(o,c,d){if(Xa(o)==="object"){var f=o;o=f.orientation,c=f.unit||c,d=f.format||d}c=c||"mm",d=d||"a4",o=(""+(o||"P")).toLowerCase();var p,y=(""+d).toLowerCase(),g={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(c){case"pt":p=1;break;case"mm":p=72/25.4;break;case"cm":p=72/2.54;break;case"in":p=72;break;case"px":p=.75;break;case"pc":case"em":p=12;break;case"ex":p=6;break;default:throw"Invalid unit: "+c}var N,w=0,k=0;if(g.hasOwnProperty(y))w=g[y][1]/p,k=g[y][0]/p;else try{w=d[1],k=d[0]}catch{throw new Error("Invalid format: "+d)}if(o==="p"||o==="portrait")o="p",k>w&&(N=k,k=w,w=N);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",w>k&&(N=k,k=w,w=N)}return{width:k,height:w,unit:c,k:p,orientation:o}},e.html=function(o,c){(c=c||{}).callback=c.callback||function(){},c.html2canvas=c.html2canvas||{},c.html2canvas.canvas=c.html2canvas.canvas||this.canvas,c.jsPDF=c.jsPDF||this,c.fontFaces=c.fontFaces?c.fontFaces.map(DN):null;var d=new l(c);return c.worker?d:d.from(o).doCallback()}})(rn.API),rn.API.addJS=function(e){return QM=e,this.internal.events.subscribe("postPutResources",function(){X2=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(X2+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),ZM=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+QM+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){X2!==void 0&&ZM!==void 0&&this.internal.out("/Names <</JavaScript "+X2+" 0 R>>")}),this},(function(e){var t;e.events.push(["postPutResources",function(){var r=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var a=r.outline.render().split(/\r\n/),s=0;s<a.length;s++){var l=a[s],o=n.exec(l);if(o!=null){var c=o[1];r.internal.newObjectDeferredBegin(c,!1)}r.internal.write(l)}if(this.outline.createNamedDestinations){var d=this.internal.pages.length,f=[];for(s=0;s<d;s++){var p=r.internal.newObject();f.push(p);var y=r.internal.getPageInfo(s+1);r.internal.write("<< /D["+y.objId+" 0 R /XYZ null null null]>> endobj")}var g=r.internal.newObject();for(r.internal.write("<< /Names [ "),s=0;s<f.length;s++)r.internal.write("(page_"+(s+1)+")"+f[s]+" 0 R");r.internal.write(" ] >>","endobj"),t=r.internal.newObject(),r.internal.write("<< /Dests "+g+" 0 R"),r.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){var r=this;r.outline.root.children.length>0&&(r.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&r.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(n,a,s){var l={title:a,options:s,children:[]};return n==null&&(n=this.root),n.children.push(l),l},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(n){n.id=r.internal.newObjectDeferred();for(var a=0;a<n.children.length;a++)this.genIds_r(n.children[a])},r.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},r.outline.renderItems=function(n){for(var a=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<n.children.length;s++){var l=n.children[s];this.objStart(l),this.line("/Title "+this.makeString(l.title)),this.line("/Parent "+this.makeRef(n)),s>0&&this.line("/Prev "+this.makeRef(n.children[s-1])),s<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[s+1])),l.children.length>0&&(this.line("/First "+this.makeRef(l.children[0])),this.line("/Last "+this.makeRef(l.children[l.children.length-1])));var o=this.count=this.count_r({count:0},l);if(o>0&&this.line("/Count "+o),l.options&&l.options.pageNumber){var c=r.internal.getPageInfo(l.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+a(0)+" 0]")}this.objEnd()}for(var d=0;d<n.children.length;d++)this.renderItems(n.children[d])},r.outline.line=function(n){this.ctx.val+=n+`\r
`},r.outline.makeRef=function(n){return n.id+" 0 R"},r.outline.makeString=function(n){return"("+r.internal.pdfEscape(n)+")"},r.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(n,a){for(var s=0;s<a.children.length;s++)n.count++,this.count_r(n,a.children[s]);return n.count}}])})(rn.API),(function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(r,n,a,s,l,o){var c,d=this.decode.DCT_DECODE,f=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=l||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,c=(function(p){for(var y,g=256*p.charCodeAt(4)+p.charCodeAt(5),N=p.length,w={width:0,height:0,numcomponents:1},k=4;k<N;k+=2){if(k+=g,t.indexOf(p.charCodeAt(k+1))!==-1){y=256*p.charCodeAt(k+5)+p.charCodeAt(k+6),w={width:256*p.charCodeAt(k+7)+p.charCodeAt(k+8),height:y,numcomponents:p.charCodeAt(k+9)};break}g=256*p.charCodeAt(k+2)+p.charCodeAt(k+3)}return w})(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r),c.numcomponents){case 1:o=this.color_spaces.DEVICE_GRAY;break;case 4:o=this.color_spaces.DEVICE_CMYK;break;case 3:o=this.color_spaces.DEVICE_RGB}f={data:r,width:c.width,height:c.height,colorSpace:o,bitsPerComponent:8,filter:d,index:n,alias:a}}return f}})(rn.API),rn.API.processPNG=function(e,t,r,n){if(this.__addimage__.isArrayBuffer(e)&&(e=new Uint8Array(e)),this.__addimage__.isArrayBufferView(e)){var a,s=SEe(e,{checkCrc:!0}),l=s.width,o=s.height,c=s.channels,d=s.palette,f=s.depth;a=d&&c===1?(function(z){for(var U=z.width,Z=z.height,q=z.data,K=z.palette,Q=z.depth,re=!1,ae=[],de=[],he=void 0,Se=!1,ke=0,Le=0;Le<K.length;Le++){var fe=rM(K[Le],4),F=fe[0],te=fe[1],Y=fe[2],ne=fe[3];ae.push(F,te,Y),ne!=null&&(ne===0?(ke++,de.length<1&&de.push(Le)):ne<255&&(Se=!0))}if(Se||ke>1){re=!0,de=void 0;var ee=U*Z;he=new Uint8Array(ee);for(var Ce=new DataView(q.buffer),me=0;me<ee;me++){var se=LN(Ce,me,Q),je=rM(K[se],4)[3];he[me]=je}}else ke===0&&(de=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:re?8:void 0,colorBytes:q,alphaBytes:he,needSMask:re,palette:ae,mask:de}})(s):c===2||c===4?(function(z){for(var U=z.data,Z=z.width,q=z.height,K=z.channels,Q=z.depth,re=K===2?"DeviceGray":"DeviceRGB",ae=K-1,de=Z*q,he=ae,Se=de*he,ke=1*de,Le=Math.ceil(Se*Q/8),fe=Math.ceil(ke*Q/8),F=new Uint8Array(Le),te=new Uint8Array(fe),Y=new DataView(U.buffer),ne=new DataView(F.buffer),ee=new DataView(te.buffer),Ce=!1,me=0;me<de;me++){for(var se=me*K,je=0;je<he;je++)lL(ne,LN(Y,se+je,Q),me*he+je,Q);var be=LN(Y,se+he,Q);be<(1<<Q)-1&&(Ce=!0),lL(ee,be,1*me,Q)}return{colorSpace:re,colorsPerPixel:ae,sMaskBitsPerComponent:Ce?Q:void 0,colorBytes:F,alphaBytes:te,needSMask:Ce}})(s):(function(z){var U=z.data,Z=z.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:Z,colorsPerPixel:Z==="DeviceGray"?1:3,colorBytes:U instanceof Uint16Array?(function(q){for(var K=q.length,Q=new Uint8Array(2*K),re=new DataView(Q.buffer,Q.byteOffset,Q.byteLength),ae=0;ae<K;ae++)re.setUint16(2*ae,q[ae],!1);return Q})(U):U,needSMask:!1}})(s);var p,y,g,N=a,w=N.colorSpace,k=N.colorsPerPixel,S=N.sMaskBitsPerComponent,O=N.colorBytes,E=N.alphaBytes,D=N.needSMask,H=N.palette,W=N.mask,R=null;return n!==rn.API.image_compression.NONE&&typeof $S=="function"?(R=(function(z){var U;switch(z){case rn.API.image_compression.FAST:U=11;break;case rn.API.image_compression.MEDIUM:U=13;break;case rn.API.image_compression.SLOW:U=14;break;default:U=12}return U})(n),p=this.decode.FLATE_DECODE,y="/Predictor ".concat(R," /Colors ").concat(k," /BitsPerComponent ").concat(f," /Columns ").concat(l),e=rL(O,Math.ceil(l*k*f/8),k,f,n),D&&(g=rL(E,Math.ceil(l*S/8),1,S,n))):(p=void 0,y=void 0,e=O,D&&(g=E)),(this.__addimage__.isArrayBuffer(e)||this.__addimage__.isArrayBufferView(e))&&(e=this.__addimage__.arrayBufferToBinaryString(e)),(g&&this.__addimage__.isArrayBuffer(g)||this.__addimage__.isArrayBufferView(g))&&(g=this.__addimage__.arrayBufferToBinaryString(g)),{alias:r,data:e,index:t,filter:p,decodeParameters:y,transparency:W,palette:H,sMask:g,predictor:R,width:l,height:o,bitsPerComponent:f,sMaskBitsPerComponent:S,colorSpace:w}}},(function(e){e.processGIF89A=function(t,r,n,a){var s=new WEe(t),l=s.width,o=s.height,c=[];s.decodeAndBlitFrameRGBA(0,c);var d={data:c,width:l,height:o},f=new RN(100).encode(d,100);return e.processJPEG.call(this,f,r,n,a)},e.processGIF87A=e.processGIF89A})(rn.API),Fd.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:a,green:n,blue:r,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Fd.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(r){fs.log("bit decode error:"+r)}},Fd.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),r=t%4;for(e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,a=0;a<t;a++)for(var s=this.datav.getUint8(this.pos++,!0),l=n*this.width*4+8*a*4,o=0;o<8&&8*a+o<this.width;o++){var c=this.palette[s>>7-o&1];this.data[l+4*o]=c.blue,this.data[l+4*o+1]=c.green,this.data[l+4*o+2]=c.red,this.data[l+4*o+3]=255}r!==0&&(this.pos+=4-r)}},Fd.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<e;a++){var s=this.datav.getUint8(this.pos++,!0),l=n*this.width*4+2*a*4,o=s>>4,c=15&s,d=this.palette[o];if(this.data[l]=d.blue,this.data[l+1]=d.green,this.data[l+2]=d.red,this.data[l+3]=255,2*a+1>=this.width)break;d=this.palette[c],this.data[l+4]=d.blue,this.data[l+4+1]=d.green,this.data[l+4+2]=d.red,this.data[l+4+3]=255}t!==0&&(this.pos+=4-t)}},Fd.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var a=this.datav.getUint8(this.pos++,!0),s=r*this.width*4+4*n;if(a<this.palette.length){var l=this.palette[a];this.data[s]=l.red,this.data[s+1]=l.green,this.data[s+2]=l.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}e!==0&&(this.pos+=4-e)}},Fd.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<this.width;a++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(s&t)/t*255|0,o=(s>>5&t)/t*255|0,c=(s>>10&t)/t*255|0,d=s>>15?255:0,f=n*this.width*4+4*a;this.data[f]=c,this.data[f+1]=o,this.data[f+2]=l,this.data[f+3]=d}this.pos+=e}},Fd.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),r=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var a=this.bottom_up?n:this.height-1-n,s=0;s<this.width;s++){var l=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(l&t)/t*255|0,c=(l>>5&r)/r*255|0,d=(l>>11)/t*255|0,f=a*this.width*4+4*s;this.data[f]=d,this.data[f+1]=c,this.data[f+2]=o,this.data[f+3]=255}this.pos+=e}},Fd.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),l=t*this.width*4+4*r;this.data[l]=s,this.data[l+1]=a,this.data[l+2]=n,this.data[l+3]=255}this.pos+=this.width%4}},Fd.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*r;this.data[o]=s,this.data[o+1]=a,this.data[o+2]=n,this.data[o+3]=l}},Fd.prototype.getData=function(){return this.data},(function(e){e.processBMP=function(t,r,n,a){var s=new Fd(t,!1),l=s.width,o=s.height,c={data:s.getData(),width:l,height:o},d=new RN(100).encode(c,100);return e.processJPEG.call(this,d,r,n,a)}})(rn.API),cL.prototype.getData=function(){return this.data},(function(e){e.processWEBP=function(t,r,n,a){var s=new cL(t),l=s.width,o=s.height,c={data:s.getData(),width:l,height:o},d=new RN(100).encode(c,100);return e.processJPEG.call(this,d,r,n,a)}})(rn.API),rn.API.processRGBA=function(e,t,r){for(var n=e.data,a=n.length,s=new Uint8Array(a/4*3),l=new Uint8Array(a/4),o=0,c=0,d=0;d<a;d+=4){var f=n[d],p=n[d+1],y=n[d+2],g=n[d+3];s[o++]=f,s[o++]=p,s[o++]=y,l[c++]=g}var N=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(l),data:N,index:t,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},rn.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Qx=rn.API,Y2=Qx.getCharWidthsArray=function(e,t){var r,n,a=(t=t||{}).font||this.internal.getFont(),s=t.fontSize||this.internal.getFontSize(),l=t.charSpace||this.internal.getCharSpace(),o=t.widths?t.widths:a.metadata.Unicode.widths,c=o.fof?o.fof:1,d=t.kerning?t.kerning:a.metadata.Unicode.kerning,f=d.fof?d.fof:1,p=t.doKerning!==!1,y=0,g=e.length,N=0,w=o[0]||c,k=[];for(r=0;r<g;r++)n=e.charCodeAt(r),typeof a.metadata.widthOfString=="function"?k.push((a.metadata.widthOfGlyph(a.metadata.characterToGlyph(n))+l*(1e3/s)||0)/1e3):(y=p&&Xa(d[n])==="object"&&!isNaN(parseInt(d[n][N],10))?d[n][N]/f:0,k.push((o[n]||w)/c+y)),N=n;return k},JM=Qx.getStringUnitWidth=function(e,t){var r=(t=t||{}).fontSize||this.internal.getFontSize(),n=t.font||this.internal.getFont(),a=t.charSpace||this.internal.getCharSpace();return Qx.processArabic&&(e=Qx.processArabic(e)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(e,r,a)/r:Y2.apply(this,arguments).reduce(function(s,l){return s+l},0)},eL=function(e,t,r,n){for(var a=[],s=0,l=e.length,o=0;s!==l&&o+t[s]<r;)o+=t[s],s++;a.push(e.slice(0,s));var c=s;for(o=0;s!==l;)o+t[s]>n&&(a.push(e.slice(c,s)),o=0,c=s),o+=t[s],s++;return c!==s&&a.push(e.slice(c,s)),a},tL=function(e,t,r){r||(r={});var n,a,s,l,o,c,d,f=[],p=[f],y=r.textIndent||0,g=0,N=0,w=e.split(" "),k=Y2.apply(this,[" ",r])[0];if(c=r.lineIndent===-1?w[0].length+2:r.lineIndent||0){var S=Array(c).join(" "),O=[];w.map(function(D){(D=D.split(/\s*\n/)).length>1?O=O.concat(D.map(function(H,W){return(W&&H.length?`
`:"")+H})):O.push(D[0])}),w=O,c=JM.apply(this,[S,r])}for(s=0,l=w.length;s<l;s++){var E=0;if(n=w[s],c&&n[0]==`
`&&(n=n.substr(1),E=1),y+g+(N=(a=Y2.apply(this,[n,r])).reduce(function(D,H){return D+H},0))>t||E){if(N>t){for(o=eL.apply(this,[n,a,t-(y+g),t]),f.push(o.shift()),f=[o.pop()];o.length;)p.push([o.shift()]);N=a.slice(n.length-(f[0]?f[0].length:0)).reduce(function(D,H){return D+H},0)}else f=[n];p.push(f),y=N+c,g=k}else f.push(n),y+=g+N,g=k}return d=c?function(D,H){return(H?S:"")+D.join(" ")}:function(D){return D.join(" ")},p.map(d)},Qx.splitTextToSize=function(e,t,r){var n,a=(r=r||{}).fontSize||this.internal.getFontSize(),s=(function(f){if(f.widths&&f.kerning)return{widths:f.widths,kerning:f.kerning};var p=this.internal.getFont(f.fontName,f.fontStyle),y="Unicode";return p.metadata[y]?{widths:p.metadata[y].widths||{0:1},kerning:p.metadata[y].kerning||{}}:{font:p.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);n=Array.isArray(e)?e:String(e).split(/\r?\n/);var l=1*this.internal.scaleFactor*t/a;s.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/a:0,s.lineIndent=r.lineIndent;var o,c,d=[];for(o=0,c=n.length;o<c;o++)d=d.concat(tL.apply(this,[n[o],l,s]));return d},(function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="0123456789abcdef",r="klmnopqrstuvwxyz",n={},a={},s=0;s<16;s++)n[r[s]]=t[s],a[t[s]]=r[s];var l=function(y){return"0x"+parseInt(y,10).toString(16)},o=e.__fontmetrics__.compress=function(y){var g,N,w,k,S=["{"];for(var O in y){if(g=y[O],isNaN(parseInt(O,10))?N="'"+O+"'":(O=parseInt(O,10),N=(N=l(O).slice(2)).slice(0,-1)+a[N.slice(-1)]),typeof g=="number")g<0?(w=l(g).slice(3),k="-"):(w=l(g).slice(2),k=""),w=k+w.slice(0,-1)+a[w.slice(-1)];else{if(Xa(g)!=="object")throw new Error("Don't know what to do with value type "+Xa(g)+".");w=o(g)}S.push(N+w)}return S.push("}"),S.join("")},c=e.__fontmetrics__.uncompress=function(y){if(typeof y!="string")throw new Error("Invalid argument passed to uncompress.");for(var g,N,w,k,S={},O=1,E=S,D=[],H="",W="",R=y.length-1,z=1;z<R;z+=1)(k=y[z])=="'"?g?(w=g.join(""),g=void 0):g=[]:g?g.push(k):k=="{"?(D.push([E,w]),E={},w=void 0):k=="}"?((N=D.pop())[0][N[1]]=E,w=void 0,E=N[0]):k=="-"?O=-1:w===void 0?n.hasOwnProperty(k)?(H+=n[k],w=parseInt(H,16)*O,O=1,H=""):H+=k:n.hasOwnProperty(k)?(W+=n[k],E[w]=parseInt(W,16)*O,O=1,w=void 0,W=""):W+=k;return S},d={codePages:["WinAnsiEncoding"],WinAnsiEncoding:c("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},f={Unicode:{Courier:d,"Courier-Bold":d,"Courier-BoldOblique":d,"Courier-Oblique":d,Helvetica:d,"Helvetica-Bold":d,"Helvetica-BoldOblique":d,"Helvetica-Oblique":d,"Times-Roman":d,"Times-Bold":d,"Times-BoldItalic":d,"Times-Italic":d}},p={Unicode:{"Courier-Oblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":c("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":c("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:c("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:c("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":c("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":c("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(y){var g=y.font,N=p.Unicode[g.postScriptName];N&&(g.metadata.Unicode={},g.metadata.Unicode.widths=N.widths,g.metadata.Unicode.kerning=N.kerning);var w=f.Unicode[g.postScriptName];w&&(g.metadata.Unicode.encoding=w,g.encoding=w.codePages[0])}])})(rn.API),(function(e){var t=function(r){for(var n=r.length,a=new Uint8Array(n),s=0;s<n;s++)a[s]=r.charCodeAt(s);return a};e.API.events.push(["addFont",function(r){var n=void 0,a=r.font,s=r.instance;if(!a.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");if(typeof(n=s.existsFileInVFS(a.postScriptName)===!1?s.loadFile(a.postScriptName):s.getFileFromVFS(a.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");(function(l,o){o=/^\x00\x01\x00\x00/.test(o)?t(o):t(sy(o)),l.metadata=e.API.TTFFont.open(o),l.metadata.Unicode=l.metadata.Unicode||{encoding:{},kerning:{},widths:[]},l.metadata.glyIdsUsed=[0]})(a,n)}}])})(rn),rn.API.addSvgAsImage=function(e,t,r,n,a,s,l,o){if(isNaN(t)||isNaN(r))throw fs.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(n)||isNaN(a))throw fs.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var c=document.createElement("canvas");c.width=n,c.height=a;var d=c.getContext("2d");d.fillStyle="#fff",d.fillRect(0,0,c.width,c.height);var f={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},p=this;return(Fn.canvg?Promise.resolve(Fn.canvg):c1(()=>import("./index.es-Q0JRgiK4.js"),[])).catch(function(y){return Promise.reject(new Error("Could not load canvg: "+y))}).then(function(y){return y.default?y.default:y}).then(function(y){return y.fromString(d,e,f)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(y){return y.render(f)}).then(function(){p.addImage(c.toDataURL("image/jpeg",1),t,r,n,a,l,o)})},rn.API.putTotalPages=function(e){var t,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),r=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var a=0;a<this.internal.pages[n].length;a++)this.internal.pages[n][a]=this.internal.pages[n][a].replace(t,r);return this},rn.API.viewerPreferences=function(e,t){var r;e=e||{},t=t||!1;var n,a,s,l={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},o=Object.keys(l),c=[],d=0,f=0,p=0;function y(N,w){var k,S=!1;for(k=0;k<N.length;k+=1)N[k]===w&&(S=!0);return S}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(l)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var g=o.length;for(p=0;p<g;p+=1)r[o[p]].value=r[o[p]].defaultValue,r[o[p]].explicitSet=!1}if(Xa(e)==="object"){for(a in e)if(s=e[a],y(o,a)&&s!==void 0){if(r[a].type==="boolean"&&typeof s=="boolean")r[a].value=s;else if(r[a].type==="name"&&y(r[a].valueSet,s))r[a].value=s;else if(r[a].type==="integer"&&Number.isInteger(s))r[a].value=s;else if(r[a].type==="array"){for(d=0;d<s.length;d+=1)if(n=!0,s[d].length===1&&typeof s[d][0]=="number")c.push(String(s[d]-1));else if(s[d].length>1){for(f=0;f<s[d].length;f+=1)typeof s[d][f]!="number"&&(n=!1);n===!0&&c.push([s[d][0]-1,s[d][1]-1].join(" "))}r[a].value="["+c.join(" ")+"]"}else r[a].value=r[a].defaultValue;r[a].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var N,w=[];for(N in r)r[N].explicitSet===!0&&(r[N].type==="name"?w.push("/"+N+" /"+r[N].value):w.push("/"+N+" "+r[N].value));w.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+w.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},(function(e){var t=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',a=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(n)),l=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),o=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),d=s.length+l.length+o.length+a.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+d+" >>"),this.internal.write("stream"),this.internal.write(a+s+l+o+c),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(n,a){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:a||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",t)),this}})(rn.API),(function(e){var t=e.API,r=t.pdfEscape16=function(s,l){for(var o,c=l.metadata.Unicode.widths,d=["","0","00","000","0000"],f=[""],p=0,y=s.length;p<y;++p){if(o=l.metadata.characterToGlyph(s.charCodeAt(p)),l.metadata.glyIdsUsed.push(o),l.metadata.toUnicode[o]=s.charCodeAt(p),c.indexOf(o)==-1&&(c.push(o),c.push([parseInt(l.metadata.widthOfGlyph(o),10)])),o=="0")return f.join("");o=o.toString(16),f.push(d[4-o.length],o)}return f.join("")},n=function(s){var l,o,c,d,f,p,y;for(f=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],p=0,y=(o=Object.keys(s).sort(function(g,N){return g-N})).length;p<y;p++)l=o[p],c.length>=100&&(f+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),s[l]!==void 0&&s[l]!==null&&typeof s[l].toString=="function"&&(d=("0000"+s[l].toString(16)).slice(-4),l=("0000"+(+l).toString(16)).slice(-4),c.push("<"+l+"><"+d+">"));return c.length&&(f+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),f+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(s){(function(l){var o=l.font,c=l.out,d=l.newObject,f=l.putStream;if(o.metadata instanceof e.API.TTFFont&&o.encoding==="Identity-H"){for(var p=o.metadata.Unicode.widths,y=o.metadata.subset.encode(o.metadata.glyIdsUsed,1),g="",N=0;N<y.length;N++)g+=String.fromCharCode(y[N]);var w=d();f({data:g,addLength1:!0,objectId:w}),c("endobj");var k=d();f({data:n(o.metadata.toUnicode),addLength1:!0,objectId:k}),c("endobj");var S=d();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+a1(o.fontName)),c("/FontFile2 "+w+" 0 R"),c("/FontBBox "+e.API.PDFObject.convert(o.metadata.bbox)),c("/Flags "+o.metadata.flags),c("/StemV "+o.metadata.stemV),c("/ItalicAngle "+o.metadata.italicAngle),c("/Ascent "+o.metadata.ascender),c("/Descent "+o.metadata.decender),c("/CapHeight "+o.metadata.capHeight),c(">>"),c("endobj");var O=d();c("<<"),c("/Type /Font"),c("/BaseFont /"+a1(o.fontName)),c("/FontDescriptor "+S+" 0 R"),c("/W "+e.API.PDFObject.convert(p)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+o.encoding+")"),c(">>"),c(">>"),c("endobj"),o.objectNumber=d(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+k+" 0 R"),c("/BaseFont /"+a1(o.fontName)),c("/Encoding /"+o.encoding),c("/DescendantFonts ["+O+" 0 R]"),c(">>"),c("endobj"),o.isAlreadyPutted=!0}})(s)}]),t.events.push(["putFont",function(s){(function(l){var o=l.font,c=l.out,d=l.newObject,f=l.putStream;if(o.metadata instanceof e.API.TTFFont&&o.encoding==="WinAnsiEncoding"){for(var p=o.metadata.rawData,y="",g=0;g<p.length;g++)y+=String.fromCharCode(p[g]);var N=d();f({data:y,addLength1:!0,objectId:N}),c("endobj");var w=d();f({data:n(o.metadata.toUnicode),addLength1:!0,objectId:w}),c("endobj");var k=d();c("<<"),c("/Descent "+o.metadata.decender),c("/CapHeight "+o.metadata.capHeight),c("/StemV "+o.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+N+" 0 R"),c("/Flags 96"),c("/FontBBox "+e.API.PDFObject.convert(o.metadata.bbox)),c("/FontName /"+a1(o.fontName)),c("/ItalicAngle "+o.metadata.italicAngle),c("/Ascent "+o.metadata.ascender),c(">>"),c("endobj"),o.objectNumber=d();for(var S=0;S<o.metadata.hmtx.widths.length;S++)o.metadata.hmtx.widths[S]=parseInt(o.metadata.hmtx.widths[S]*(1e3/o.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+w+" 0 R/BaseFont/"+a1(o.fontName)+"/FontDescriptor "+k+" 0 R/Encoding/"+o.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(o.metadata.hmtx.widths)+">>"),c("endobj"),o.isAlreadyPutted=!0}})(s)}]);var a=function(s){var l,o=s.text||"",c=s.x,d=s.y,f=s.options||{},p=s.mutex||{},y=p.pdfEscape,g=p.activeFontKey,N=p.fonts,w=g,k="",S=0,O="",E=N[w].encoding;if(N[w].encoding!=="Identity-H")return{text:o,x:c,y:d,options:f,mutex:p};for(O=o,w=g,Array.isArray(o)&&(O=o[0]),S=0;S<O.length;S+=1)N[w].metadata.hasOwnProperty("cmap")&&(l=N[w].metadata.cmap.unicode.codeMap[O[S].charCodeAt(0)]),l||O[S].charCodeAt(0)<256&&N[w].metadata.hasOwnProperty("Unicode")?k+=O[S]:k+="";var D="";return parseInt(w.slice(1))<14||E==="WinAnsiEncoding"?D=y(k,w).split("").map(function(H){return H.charCodeAt(0).toString(16)}).join(""):E==="Identity-H"&&(D=r(k,N[w])),p.isHex=!0,{text:D,x:c,y:d,options:f,mutex:p}};t.events.push(["postProcessText",function(s){var l=s.text||"",o=[],c={text:l,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(l)){var d=0;for(d=0;d<l.length;d+=1)Array.isArray(l[d])&&l[d].length===3?o.push([a(Object.assign({},c,{text:l[d][0]})).text,l[d][1],l[d][2]]):o.push(a(Object.assign({},c,{text:l[d]})).text);s.text=o}else s.text=a(Object.assign({},c,{text:l})).text}])})(rn),(function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0},e.addFileToVFS=function(r,n){return t.call(this),this.internal.vFS[r]=n,this},e.getFileFromVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}})(rn.API),(function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(n){var a,s,l,o,c,d,f,p=t,y=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],g=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],N={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},w={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},k=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],S=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),O=!1,E=0;this.__bidiEngine__={};var D=function(q){var K=q.charCodeAt(),Q=K>>8,re=w[Q];return re!==void 0?p[256*re+(255&K)]:Q===252||Q===253?"AL":S.test(Q)?"L":Q===8?"R":"N"},H=function(q){for(var K,Q=0;Q<q.length;Q++){if((K=D(q.charAt(Q)))==="L")return!1;if(K==="R")return!0}return!1},W=function(q,K,Q,re){var ae,de,he,Se,ke=K[re];switch(ke){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":O=!1;break;case"N":case"AN":break;case"EN":O&&(ke="AN");break;case"AL":O=!0,ke="R";break;case"WS":case"BN":ke="N";break;case"CS":re<1||re+1>=K.length||(ae=Q[re-1])!=="EN"&&ae!=="AN"||(de=K[re+1])!=="EN"&&de!=="AN"?ke="N":O&&(de="AN"),ke=de===ae?de:"N";break;case"ES":ke=(ae=re>0?Q[re-1]:"B")==="EN"&&re+1<K.length&&K[re+1]==="EN"?"EN":"N";break;case"ET":if(re>0&&Q[re-1]==="EN"){ke="EN";break}if(O){ke="N";break}for(he=re+1,Se=K.length;he<Se&&K[he]==="ET";)he++;ke=he<Se&&K[he]==="EN"?"EN":"N";break;case"NSM":if(l&&!o){for(Se=K.length,he=re+1;he<Se&&K[he]==="NSM";)he++;if(he<Se){var Le=q[re],fe=Le>=1425&&Le<=2303||Le===64286;if(ae=K[he],fe&&(ae==="R"||ae==="AL")){ke="R";break}}}ke=re<1||(ae=K[re-1])==="B"?"N":Q[re-1];break;case"B":O=!1,a=!0,ke=E;break;case"S":s=!0,ke="N"}return ke},R=function(q,K,Q){var re=q.split("");return Q&&z(re,Q,{hiLevel:E}),re.reverse(),K&&K.reverse(),re.join("")},z=function(q,K,Q){var re,ae,de,he,Se,ke=-1,Le=q.length,fe=0,F=[],te=E?g:y,Y=[];for(O=!1,a=!1,s=!1,ae=0;ae<Le;ae++)Y[ae]=D(q[ae]);for(de=0;de<Le;de++){if(Se=fe,F[de]=W(q,Y,F,de),re=240&(fe=te[Se][N[F[de]]]),fe&=15,K[de]=he=te[fe][5],re>0)if(re===16){for(ae=ke;ae<de;ae++)K[ae]=1;ke=-1}else ke=-1;if(te[fe][6])ke===-1&&(ke=de);else if(ke>-1){for(ae=ke;ae<de;ae++)K[ae]=he;ke=-1}Y[de]==="B"&&(K[de]=0),Q.hiLevel|=he}s&&(function(ne,ee,Ce){for(var me=0;me<Ce;me++)if(ne[me]==="S"){ee[me]=E;for(var se=me-1;se>=0&&ne[se]==="WS";se--)ee[se]=E}})(Y,K,Le)},U=function(q,K,Q,re,ae){if(!(ae.hiLevel<q)){if(q===1&&E===1&&!a)return K.reverse(),void(Q&&Q.reverse());for(var de,he,Se,ke,Le=K.length,fe=0;fe<Le;){if(re[fe]>=q){for(Se=fe+1;Se<Le&&re[Se]>=q;)Se++;for(ke=fe,he=Se-1;ke<he;ke++,he--)de=K[ke],K[ke]=K[he],K[he]=de,Q&&(de=Q[ke],Q[ke]=Q[he],Q[he]=de);fe=Se}fe++}}},Z=function(q,K,Q){var re=q.split(""),ae={hiLevel:E};return Q||(Q=[]),z(re,Q,ae),(function(de,he,Se){if(Se.hiLevel!==0&&f)for(var ke,Le=0;Le<de.length;Le++)he[Le]===1&&(ke=k.indexOf(de[Le]))>=0&&(de[Le]=k[ke+1])})(re,Q,ae),U(2,re,K,Q,ae),U(1,re,K,Q,ae),re.join("")};return this.__bidiEngine__.doBidiReorder=function(q,K,Q){if((function(ae,de){if(de)for(var he=0;he<ae.length;he++)de[he]=he;o===void 0&&(o=H(ae)),d===void 0&&(d=H(ae))})(q,K),l||!c||d)if(l&&c&&o^d)E=o?1:0,q=R(q,K,Q);else if(!l&&c&&d)E=o?1:0,q=Z(q,K,Q),q=R(q,K);else if(!l||o||c||d){if(l&&!c&&o^d)q=R(q,K),o?(E=0,q=Z(q,K,Q)):(E=1,q=Z(q,K,Q),q=R(q,K));else if(l&&o&&!c&&d)E=1,q=Z(q,K,Q),q=R(q,K);else if(!l&&!c&&o^d){var re=f;o?(E=1,q=Z(q,K,Q),E=0,f=!1,q=Z(q,K,Q),f=re):(E=0,q=Z(q,K,Q),q=R(q,K),E=1,f=!1,q=Z(q,K,Q),f=re,q=R(q,K))}}else E=0,q=Z(q,K,Q);else E=o?1:0,q=Z(q,K,Q);return q},this.__bidiEngine__.setOptions=function(q){q&&(l=q.isInputVisual,c=q.isOutputVisual,o=q.isInputRtl,d=q.isOutputRtl,f=q.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(n){var a=n.text;n.x,n.y;var s=n.options||{};n.mutex,s.lang;var l=[];if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,r.setOptions(s),Object.prototype.toString.call(a)==="[object Array]"){var o=0;for(l=[],o=0;o<a.length;o+=1)Object.prototype.toString.call(a[o])==="[object Array]"?l.push([r.doBidiReorder(a[o][0]),a[o][1],a[o][2]]):l.push([r.doBidiReorder(a[o])]);n.text=l}else n.text=r.doBidiReorder(a);r.setOptions({isInputVisual:!0})}])})(rn),rn.API.TTFFont=(function(){function e(t){var r;if(this.rawData=t,r=this.contents=new hf(t),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new l8e(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new KEe(this.contents),this.head=new XEe(this),this.name=new e8e(this),this.cmap=new MW(this),this.toUnicode={},this.hhea=new YEe(this),this.maxp=new t8e(this),this.hmtx=new r8e(this),this.post=new QEe(this),this.os2=new ZEe(this),this.loca=new i8e(this),this.glyf=new n8e(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,r,n,a,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var l,o,c,d;for(d=[],l=0,o=(c=this.bbox).length;l<o;l++)t=c[l],d.push(Math.round(t*this.scaleFactor));return d}).call(this),this.stemV=0,this.post.exists?(n=255&(a=this.post.italic_angle),32768&(r=a>>16)&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var r;return((r=this.cmap.unicode)!=null?r.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*r},e.prototype.widthOfString=function(t,r,n){var a,s,l,o;for(l=0,s=0,o=(t=""+t).length;0<=o?s<o:s>o;s=0<=o?++s:--s)a=t.charCodeAt(s),l+=this.widthOfGlyph(this.characterToGlyph(a))+n*(1e3/r)||0;return l*(r/1e3)},e.prototype.lineHeight=function(t,r){var n;return r==null&&(r=!1),n=r?this.lineGap:0,(this.ascender+n-this.decender)/1e3*t},e})();var su,hf=(function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var r,n;for(n=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)n[r]=String.fromCharCode(this.readByte());return n.join("")},e.prototype.writeString=function(t){var r,n,a;for(a=[],r=0,n=t.length;0<=n?r<n:r>n;r=0<=n?++r:--r)a.push(this.writeByte(t.charCodeAt(r)));return a},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,r,n,a,s,l,o,c;return t=this.readByte(),r=this.readByte(),n=this.readByte(),a=this.readByte(),s=this.readByte(),l=this.readByte(),o=this.readByte(),c=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^r)+1099511627776*(255^n)+4294967296*(255^a)+16777216*(255^s)+65536*(255^l)+256*(255^o)+(255^c)+1):72057594037927940*t+281474976710656*r+1099511627776*n+4294967296*a+16777216*s+65536*l+256*o+c},e.prototype.writeLongLong=function(t){var r,n;return r=Math.floor(t/4294967296),n=4294967295&t,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var r,n;for(r=[],n=0;0<=t?n<t:n>t;n=0<=t?++n:--n)r.push(this.readByte());return r},e.prototype.write=function(t){var r,n,a,s;for(s=[],n=0,a=t.length;n<a;n++)r=t[n],s.push(this.writeByte(r));return s},e})(),KEe=(function(){var e;function t(r){var n,a,s;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},a=0,s=this.tableCount;0<=s?a<s:a>s;a=0<=s?++a:--a)n={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[n.tag]=n}return t.prototype.encode=function(r){var n,a,s,l,o,c,d,f,p,y,g,N,w;for(w in g=Object.keys(r).length,c=Math.log(2),p=16*Math.floor(Math.log(g)/c),l=Math.floor(p/c),f=16*g-p,(a=new hf).writeInt(this.scalarType),a.writeShort(g),a.writeShort(p),a.writeShort(l),a.writeShort(f),s=16*g,d=a.pos+s,o=null,N=[],r)for(y=r[w],a.writeString(w),a.writeInt(e(y)),a.writeInt(d),a.writeInt(y.length),N=N.concat(y),w==="head"&&(o=d),d+=y.length;d%4;)N.push(0),d++;return a.write(N),n=2981146554-e(a.data),a.pos=o+8,a.writeUInt32(n),a.data},e=function(r){var n,a,s,l;for(r=LW.call(r);r.length%4;)r.push(0);for(s=new hf(r),a=0,n=0,l=r.length;n<l;n=n+=4)a+=s.readUInt32();return 4294967295&a},t})(),GEe={}.hasOwnProperty,Xu=function(e,t){for(var r in t)GEe.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};su=(function(){function e(t){var r;this.file=t,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e})();var XEe=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Xu(e,su),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var r;return(r=new hf).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(t),r.writeShort(this.glyphDataFormat),r.data},e})(),dL=(function(){function e(t,r){var n,a,s,l,o,c,d,f,p,y,g,N,w,k,S,O,E;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=r+t.readInt(),p=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=t.readByte();break;case 4:for(g=t.readUInt16(),y=g/2,t.pos+=6,s=(function(){var D,H;for(H=[],c=D=0;0<=y?D<y:D>y;c=0<=y?++D:--D)H.push(t.readUInt16());return H})(),t.pos+=2,w=(function(){var D,H;for(H=[],c=D=0;0<=y?D<y:D>y;c=0<=y?++D:--D)H.push(t.readUInt16());return H})(),d=(function(){var D,H;for(H=[],c=D=0;0<=y?D<y:D>y;c=0<=y?++D:--D)H.push(t.readUInt16());return H})(),f=(function(){var D,H;for(H=[],c=D=0;0<=y?D<y:D>y;c=0<=y?++D:--D)H.push(t.readUInt16());return H})(),a=(this.length-t.pos+this.offset)/2,o=(function(){var D,H;for(H=[],c=D=0;0<=a?D<a:D>a;c=0<=a?++D:--D)H.push(t.readUInt16());return H})(),c=S=0,E=s.length;S<E;c=++S)for(k=s[c],n=O=N=w[c];N<=k?O<=k:O>=k;n=N<=k?++O:--O)f[c]===0?l=n+d[c]:(l=o[f[c]/2+(n-N)-(y-c)]||0)!==0&&(l+=d[c]),this.codeMap[n]=65535&l}t.pos=p}return e.encode=function(t,r){var n,a,s,l,o,c,d,f,p,y,g,N,w,k,S,O,E,D,H,W,R,z,U,Z,q,K,Q,re,ae,de,he,Se,ke,Le,fe,F,te,Y,ne,ee,Ce,me,se,je,be,ie;switch(re=new hf,l=Object.keys(t).sort(function(Te,De){return Te-De}),r){case"macroman":for(w=0,k=(function(){var Te=[];for(N=0;N<256;++N)Te.push(0);return Te})(),O={0:0},s={},ae=0,ke=l.length;ae<ke;ae++)O[se=t[a=l[ae]]]==null&&(O[se]=++w),s[a]={old:t[a],new:O[t[a]]},k[a]=O[t[a]];return re.writeUInt16(1),re.writeUInt16(0),re.writeUInt32(12),re.writeUInt16(0),re.writeUInt16(262),re.writeUInt16(0),re.write(k),{charMap:s,subtable:re.data,maxGlyphID:w+1};case"unicode":for(K=[],p=[],E=0,O={},n={},S=d=null,de=0,Le=l.length;de<Le;de++)O[H=t[a=l[de]]]==null&&(O[H]=++E),n[a]={old:H,new:O[H]},o=O[H]-a,S!=null&&o===d||(S&&p.push(S),K.push(a),d=o),S=a;for(S&&p.push(S),p.push(65535),K.push(65535),Z=2*(U=K.length),z=2*Math.pow(Math.log(U)/Math.LN2,2),y=Math.log(z/2)/Math.LN2,R=2*U-z,c=[],W=[],g=[],N=he=0,fe=K.length;he<fe;N=++he){if(q=K[N],f=p[N],q===65535){c.push(0),W.push(0);break}if(q-(Q=n[q].new)>=32768)for(c.push(0),W.push(2*(g.length+U-N)),a=Se=q;q<=f?Se<=f:Se>=f;a=q<=f?++Se:--Se)g.push(n[a].new);else c.push(Q-q),W.push(0)}for(re.writeUInt16(3),re.writeUInt16(1),re.writeUInt32(12),re.writeUInt16(4),re.writeUInt16(16+8*U+2*g.length),re.writeUInt16(0),re.writeUInt16(Z),re.writeUInt16(z),re.writeUInt16(y),re.writeUInt16(R),Ce=0,F=p.length;Ce<F;Ce++)a=p[Ce],re.writeUInt16(a);for(re.writeUInt16(0),me=0,te=K.length;me<te;me++)a=K[me],re.writeUInt16(a);for(je=0,Y=c.length;je<Y;je++)o=c[je],re.writeUInt16(o);for(be=0,ne=W.length;be<ne;be++)D=W[be],re.writeUInt16(D);for(ie=0,ee=g.length;ie<ee;ie++)w=g[ie],re.writeUInt16(w);return{charMap:n,subtable:re.data,maxGlyphID:E+1}}},e})(),MW=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Xu(e,su),e.prototype.tag="cmap",e.prototype.parse=function(t){var r,n,a;for(t.pos=this.offset,this.version=t.readUInt16(),a=t.readUInt16(),this.tables=[],this.unicode=null,n=0;0<=a?n<a:n>a;n=0<=a?++n:--n)r=new dL(t,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(t,r){var n,a;return r==null&&(r="macroman"),n=dL.encode(t,r),(a=new hf).writeUInt16(0),a.writeUInt16(1),n.table=a.data.concat(n.subtable),n},e})(),YEe=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Xu(e,su),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e})(),ZEe=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Xu(e,su),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=(function(){var r,n;for(n=[],r=0;r<10;++r)n.push(t.readByte());return n})(),this.charRange=(function(){var r,n;for(n=[],r=0;r<4;++r)n.push(t.readInt());return n})(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=(function(){var r,n;for(n=[],r=0;r<2;r=++r)n.push(t.readInt());return n})(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e})(),QEe=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Xu(e,su),e.prototype.tag="post",e.prototype.parse=function(t){var r,n,a;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:case 196608:break;case 131072:var s;for(n=t.readUInt16(),this.glyphNameIndex=[],s=0;0<=n?s<n:s>n;s=0<=n?++s:--s)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],a=[];t.pos<this.offset+this.length;)r=t.readByte(),a.push(this.names.push(t.readString(r)));return a;case 151552:return n=t.readUInt16(),this.offsets=t.read(n);case 262144:return this.map=(function(){var l,o,c;for(c=[],s=l=0,o=this.file.maxp.numGlyphs;0<=o?l<o:l>o;s=0<=o?++l:--l)c.push(t.readUInt32());return c}).call(this)}},e})(),JEe=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},e8e=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Xu(e,su),e.prototype.tag="name",e.prototype.parse=function(t){var r,n,a,s,l,o,c,d,f,p,y;for(t.pos=this.offset,t.readShort(),r=t.readShort(),o=t.readShort(),n=[],s=0;0<=r?s<r:s>r;s=0<=r?++s:--s)n.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+o+t.readShort()});for(c={},s=f=0,p=n.length;f<p;s=++f)a=n[s],t.pos=a.offset,d=t.readString(a.length),l=new JEe(d,a),c[y=a.nameID]==null&&(c[y]=[]),c[a.nameID].push(l);this.strings=c,this.copyright=c[0],this.fontFamily=c[1],this.fontSubfamily=c[2],this.uniqueSubfamily=c[3],this.fontName=c[4],this.version=c[5];try{this.postscriptName=c[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=c[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=c[7],this.manufacturer=c[8],this.designer=c[9],this.description=c[10],this.vendorUrl=c[11],this.designerUrl=c[12],this.license=c[13],this.licenseUrl=c[14],this.preferredFamily=c[15],this.preferredSubfamily=c[17],this.compatibleFull=c[18],this.sampleText=c[19]},e})(),t8e=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Xu(e,su),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e})(),r8e=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Xu(e,su),e.prototype.tag="hmtx",e.prototype.parse=function(t){var r,n,a,s,l,o,c;for(t.pos=this.offset,this.metrics=[],r=0,o=this.file.hhea.numberOfMetrics;0<=o?r<o:r>o;r=0<=o?++r:--r)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(a=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var d,f;for(f=[],r=d=0;0<=a?d<a:d>a;r=0<=a?++d:--d)f.push(t.readInt16());return f})(),this.widths=(function(){var d,f,p,y;for(y=[],d=0,f=(p=this.metrics).length;d<f;d++)s=p[d],y.push(s.advance);return y}).call(this),n=this.widths[this.widths.length-1],c=[],r=l=0;0<=a?l<a:l>a;r=0<=a?++l:--l)c.push(this.widths.push(n));return c},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e})(),LW=[].slice,n8e=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Xu(e,su),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var r,n,a,s,l,o,c,d,f,p;return t in this.cache?this.cache[t]:(s=this.file.loca,r=this.file.contents,n=s.indexOf(t),(a=s.lengthOf(t))===0?this.cache[t]=null:(r.pos=this.offset+n,l=(o=new hf(r.read(a))).readShort(),d=o.readShort(),p=o.readShort(),c=o.readShort(),f=o.readShort(),this.cache[t]=l===-1?new s8e(o,d,p,c,f):new a8e(o,l,d,p,c,f),this.cache[t]))},e.prototype.encode=function(t,r,n){var a,s,l,o,c;for(l=[],s=[],o=0,c=r.length;o<c;o++)a=t[r[o]],s.push(l.length),a&&(l=l.concat(a.encode(n)));return s.push(l.length),{table:l,offsets:s}},e})(),a8e=(function(){function e(t,r,n,a,s,l){this.raw=t,this.numberOfContours=r,this.xMin=n,this.yMin=a,this.xMax=s,this.yMax=l,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e})(),s8e=(function(){function e(t,r,n,a,s){var l,o;for(this.raw=t,this.xMin=r,this.yMin=n,this.xMax=a,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],l=this.raw;o=l.readShort(),this.glyphOffsets.push(l.pos),this.glyphIDs.push(l.readUInt16()),32&o;)l.pos+=1&o?4:2,128&o?l.pos+=8:64&o?l.pos+=4:8&o&&(l.pos+=2)}return e.prototype.encode=function(){var t,r,n;for(r=new hf(LW.call(this.raw.data)),t=0,n=this.glyphIDs.length;t<n;++t)r.pos=this.glyphOffsets[t];return r.data},e})(),i8e=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Xu(e,su),e.prototype.tag="loca",e.prototype.parse=function(t){var r,n;return t.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var a,s;for(s=[],n=0,a=this.length;n<a;n+=2)s.push(2*t.readUInt16());return s}).call(this):(function(){var a,s;for(s=[],n=0,a=this.length;n<a;n+=4)s.push(t.readUInt32());return s}).call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,r){for(var n=new Uint32Array(this.offsets.length),a=0,s=0,l=0;l<n.length;++l)if(n[l]=a,s<r.length&&r[s]==l){++s,n[l]=a;var o=this.offsets[l],c=this.offsets[l+1]-o;c>0&&(a+=c)}for(var d=new Array(4*n.length),f=0;f<n.length;++f)d[4*f+3]=255&n[f],d[4*f+2]=(65280&n[f])>>8,d[4*f+1]=(16711680&n[f])>>16,d[4*f]=(4278190080&n[f])>>24;return d},e})(),l8e=(function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,r,n,a,s;for(r in a=this.font.cmap.tables[0].codeMap,t={},s=this.subset)n=s[r],t[r]=a[n];return t},e.prototype.glyphsFor=function(t){var r,n,a,s,l,o,c;for(a={},l=0,o=t.length;l<o;l++)a[s=t[l]]=this.font.glyf.glyphFor(s);for(s in r=[],a)(n=a[s])!=null&&n.compound&&r.push.apply(r,n.glyphIDs);if(r.length>0)for(s in c=this.glyphsFor(r))n=c[s],a[s]=n;return a},e.prototype.encode=function(t,r){var n,a,s,l,o,c,d,f,p,y,g,N,w,k,S;for(a in n=MW.encode(this.generateCmap(),"unicode"),l=this.glyphsFor(t),g={0:0},S=n.charMap)g[(c=S[a]).old]=c.new;for(N in y=n.maxGlyphID,l)N in g||(g[N]=y++);return f=(function(O){var E,D;for(E in D={},O)D[O[E]]=E;return D})(g),p=Object.keys(f).sort(function(O,E){return O-E}),w=(function(){var O,E,D;for(D=[],O=0,E=p.length;O<E;O++)o=p[O],D.push(f[o]);return D})(),s=this.font.glyf.encode(l,w,g),d=this.font.loca.encode(s.offsets,w),k={cmap:this.font.cmap.raw(),glyf:s.table,loca:d,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(k["OS/2"]=this.font.os2.raw()),this.font.directory.encode(k)},e})();rn.API.PDFObject=(function(){var e;function t(){}return e=function(r,n){return(Array(n+1).join("0")+r).slice(-n)},t.convert=function(r){var n,a,s,l;if(Array.isArray(r))return"["+(function(){var o,c,d;for(d=[],o=0,c=r.length;o<c;o++)n=r[o],d.push(t.convert(n));return d})().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+e(r.getUTCFullYear(),4)+e(r.getUTCMonth(),2)+e(r.getUTCDate(),2)+e(r.getUTCHours(),2)+e(r.getUTCMinutes(),2)+e(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(a in s=["<<"],r)l=r[a],s.push("/"+a+" "+t.convert(l));return s.push(">>"),s.join(`
`)}return""+r},t})();function RW(e,t,r,n,a){n=n||{};var s=1.15,l=a.internal.scaleFactor,o=a.internal.getFontSize()/l,c=a.getLineHeightFactor?a.getLineHeightFactor():s,d=o*c,f=/\r\n|\r|\n/g,p="",y=1;if((n.valign==="middle"||n.valign==="bottom"||n.halign==="center"||n.halign==="right")&&(p=typeof e=="string"?e.split(f):e,y=p.length||1),r+=o*(2-s),n.valign==="middle"?r-=y/2*d:n.valign==="bottom"&&(r-=y*d),n.halign==="center"||n.halign==="right"){var g=o;if(n.halign==="center"&&(g*=.5),p&&y>=1){for(var N=0;N<p.length;N++)a.text(p[N],t-a.getStringUnitWidth(p[N])*g,r),r+=d;return a}t-=a.getStringUnitWidth(e)*g}return n.halign==="justify"?a.text(e,t,r,{maxWidth:n.maxWidth||100,align:"justify"}):a.text(e,t,r),a}var uL={},N1=(function(){function e(t){this.jsPDFDocument=t,this.userStyles={textColor:t.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:t.internal.getFontSize(),fontStyle:t.internal.getFont().fontStyle,font:t.internal.getFont().fontName,lineWidth:t.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:t.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return e.setDefaults=function(t,r){r===void 0&&(r=null),r?r.__autoTableDocumentDefaults=t:uL=t},e.unifyColor=function(t){return Array.isArray(t)?t:typeof t=="number"?[t,t,t]:typeof t=="string"?[t]:null},e.prototype.applyStyles=function(t,r){var n,a,s;r===void 0&&(r=!1),t.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(t.fontStyle);var l=this.jsPDFDocument.internal.getFont(),o=l.fontStyle,c=l.fontName;if(t.font&&(c=t.font),t.fontStyle){o=t.fontStyle;var d=this.getFontList()[c];d&&d.indexOf(o)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(d[0]),o=d[0])}if(this.jsPDFDocument.setFont(c,o),t.fontSize&&this.jsPDFDocument.setFontSize(t.fontSize),!r){var f=e.unifyColor(t.fillColor);f&&(n=this.jsPDFDocument).setFillColor.apply(n,f),f=e.unifyColor(t.textColor),f&&(a=this.jsPDFDocument).setTextColor.apply(a,f),f=e.unifyColor(t.lineColor),f&&(s=this.jsPDFDocument).setDrawColor.apply(s,f),typeof t.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(t.lineWidth)}},e.prototype.splitTextToSize=function(t,r,n){return this.jsPDFDocument.splitTextToSize(t,r,n)},e.prototype.rect=function(t,r,n,a,s){return this.jsPDFDocument.rect(t,r,n,a,s)},e.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},e.prototype.getTextWidth=function(t){return this.jsPDFDocument.getTextWidth(t)},e.prototype.getDocument=function(){return this.jsPDFDocument},e.prototype.setPage=function(t){this.jsPDFDocument.setPage(t)},e.prototype.addPage=function(){return this.jsPDFDocument.addPage()},e.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},e.prototype.getGlobalOptions=function(){return uL||{}},e.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},e.prototype.pageSize=function(){var t=this.jsPDFDocument.internal.pageSize;return t.width==null&&(t={width:t.getWidth(),height:t.getHeight()}),t},e.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},e.prototype.getLineHeightFactor=function(){var t=this.jsPDFDocument;return t.getLineHeightFactor?t.getLineHeightFactor():1.15},e.prototype.getLineHeight=function(t){return t/this.scaleFactor()*this.getLineHeightFactor()},e.prototype.pageNumber=function(){var t=this.jsPDFDocument.internal.getCurrentPageInfo();return t?t.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},e})(),QS=function(e,t){return QS=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])},QS(e,t)};function FW(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");QS(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var BW=(function(e){FW(t,e);function t(r){var n=e.call(this)||this;return n._element=r,n}return t})(Array);function o8e(e){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/e,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function c8e(e){var t={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return t[e]}function Ew(e,t,r){r.applyStyles(t,!0);var n=Array.isArray(e)?e:[e],a=n.map(function(s){return r.getTextWidth(s)}).reduce(function(s,l){return Math.max(s,l)},0);return a}function UW(e,t,r,n){var a=t.settings.tableLineWidth,s=t.settings.tableLineColor;e.applyStyles({lineWidth:a,lineColor:s});var l=zW(a,!1);l&&e.rect(r.x,r.y,t.getWidth(e.pageSize().width),n.y-r.y,l)}function zW(e,t){var r=e>0,n=t||t===0;return r&&n?"DF":r?"S":n?"F":null}function $k(e,t){var r,n,a,s;if(e=e||t,Array.isArray(e)){if(e.length>=4)return{top:e[0],right:e[1],bottom:e[2],left:e[3]};if(e.length===3)return{top:e[0],right:e[1],bottom:e[2],left:e[1]};if(e.length===2)return{top:e[0],right:e[1],bottom:e[0],left:e[1]};e.length===1?e=e[0]:e=t}return typeof e=="object"?(typeof e.vertical=="number"&&(e.top=e.vertical,e.bottom=e.vertical),typeof e.horizontal=="number"&&(e.right=e.horizontal,e.left=e.horizontal),{left:(r=e.left)!==null&&r!==void 0?r:t,top:(n=e.top)!==null&&n!==void 0?n:t,right:(a=e.right)!==null&&a!==void 0?a:t,bottom:(s=e.bottom)!==null&&s!==void 0?s:t}):(typeof e!="number"&&(e=t),{top:e,right:e,bottom:e,left:e})}function qW(e,t){var r=$k(t.settings.margin,0);return e.pageSize().width-(r.left+r.right)}function d8e(e,t,r,n,a){var s={},l=1.3333333333333333,o=FN(t,function(E){return a.getComputedStyle(E).backgroundColor});o!=null&&(s.fillColor=o);var c=FN(t,function(E){return a.getComputedStyle(E).color});c!=null&&(s.textColor=c);var d=h8e(n,r);d&&(s.cellPadding=d);var f="borderTopColor",p=l*r,y=n.borderTopWidth;if(n.borderBottomWidth===y&&n.borderRightWidth===y&&n.borderLeftWidth===y){var g=(parseFloat(y)||0)/p;g&&(s.lineWidth=g)}else s.lineWidth={top:(parseFloat(n.borderTopWidth)||0)/p,right:(parseFloat(n.borderRightWidth)||0)/p,bottom:(parseFloat(n.borderBottomWidth)||0)/p,left:(parseFloat(n.borderLeftWidth)||0)/p},s.lineWidth.top||(s.lineWidth.right?f="borderRightColor":s.lineWidth.bottom?f="borderBottomColor":s.lineWidth.left&&(f="borderLeftColor"));var N=FN(t,function(E){return a.getComputedStyle(E)[f]});N!=null&&(s.lineColor=N);var w=["left","right","center","justify"];w.indexOf(n.textAlign)!==-1&&(s.halign=n.textAlign),w=["middle","bottom","top"],w.indexOf(n.verticalAlign)!==-1&&(s.valign=n.verticalAlign);var k=parseInt(n.fontSize||"");isNaN(k)||(s.fontSize=k/l);var S=u8e(n);S&&(s.fontStyle=S);var O=(n.fontFamily||"").toLowerCase();return e.indexOf(O)!==-1&&(s.font=O),s}function u8e(e){var t="";return(e.fontWeight==="bold"||e.fontWeight==="bolder"||parseInt(e.fontWeight)>=700)&&(t="bold"),(e.fontStyle==="italic"||e.fontStyle==="oblique")&&(t+="italic"),t}function FN(e,t){var r=HW(e,t);if(!r)return null;var n=r.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!n||!Array.isArray(n))return null;var a=[parseInt(n[1]),parseInt(n[2]),parseInt(n[3])],s=parseInt(n[4]);return s===0||isNaN(a[0])||isNaN(a[1])||isNaN(a[2])?null:a}function HW(e,t){var r=t(e);return r==="rgba(0, 0, 0, 0)"||r==="transparent"||r==="initial"||r==="inherit"?e.parentElement==null?null:HW(e.parentElement,t):r}function h8e(e,t){var r=[e.paddingTop,e.paddingRight,e.paddingBottom,e.paddingLeft],n=96/(72/t),a=(parseInt(e.lineHeight)-parseInt(e.fontSize))/t/2,s=r.map(function(o){return parseInt(o||"0")/n}),l=$k(s,0);return a>l.top&&(l.top=a),a>l.bottom&&(l.bottom=a),l}function $W(e,t,r,n,a){var s,l;n===void 0&&(n=!1),a===void 0&&(a=!1);var o;typeof t=="string"?o=r.document.querySelector(t):o=t;var c=Object.keys(e.getFontList()),d=e.scaleFactor(),f=[],p=[],y=[];if(!o)return console.error("Html table could not be found with input: ",t),{head:f,body:p,foot:y};for(var g=0;g<o.rows.length;g++){var N=o.rows[g],w=(l=(s=N==null?void 0:N.parentElement)===null||s===void 0?void 0:s.tagName)===null||l===void 0?void 0:l.toLowerCase(),k=f8e(c,d,r,N,n,a);k&&(w==="thead"?f.push(k):w==="tfoot"?y.push(k):p.push(k))}return{head:f,body:p,foot:y}}function f8e(e,t,r,n,a,s){for(var l=new BW(n),o=0;o<n.cells.length;o++){var c=n.cells[o],d=r.getComputedStyle(c);if(a||d.display!=="none"){var f=void 0;s&&(f=d8e(e,c,t,d,r)),l.push({rowSpan:c.rowSpan,colSpan:c.colSpan,styles:f,_element:c,content:m8e(c)})}}var p=r.getComputedStyle(n);if(l.length>0&&(a||p.display!=="none"))return l}function m8e(e){var t=e.cloneNode(!0);return t.innerHTML=t.innerHTML.replace(/\n/g,"").replace(/ +/g," "),t.innerHTML=t.innerHTML.split(/<br.*?>/).map(function(r){return r.trim()}).join(`
`),t.innerText||t.textContent||""}function x8e(e,t,r){for(var n=0,a=[e,t,r];n<a.length;n++){var s=a[n];s&&typeof s!="object"&&console.error("The options parameter should be of type object, is: "+typeof s),s.startY&&typeof s.startY!="number"&&(console.error("Invalid value for startY option",s.startY),delete s.startY)}}function I0(e,t,r,n,a){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var s=Object(e),l=1;l<arguments.length;l++){var o=arguments[l];if(o!=null)for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(s[c]=o[c])}return s}function VW(e,t){var r=new N1(e),n=r.getDocumentOptions(),a=r.getGlobalOptions();x8e(a,n,t);var s=I0({},a,n,t),l;typeof window<"u"&&(l=window);var o=p8e(a,n,t),c=g8e(a,n,t),d=b8e(r,s),f=y8e(r,s,l);return{id:t.tableId,content:f,hooks:c,styles:o,settings:d}}function p8e(e,t,r){for(var n={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},a=function(c){if(c==="columnStyles"){var d=e[c],f=t[c],p=r[c];n.columnStyles=I0({},d,f,p)}else{var y=[e,t,r],g=y.map(function(N){return N[c]||{}});n[c]=I0({},g[0],g[1],g[2])}},s=0,l=Object.keys(n);s<l.length;s++){var o=l[s];a(o)}return n}function g8e(e,t,r){for(var n=[e,t,r],a={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},s=0,l=n;s<l.length;s++){var o=l[s];o.didParseCell&&a.didParseCell.push(o.didParseCell),o.willDrawCell&&a.willDrawCell.push(o.willDrawCell),o.didDrawCell&&a.didDrawCell.push(o.didDrawCell),o.willDrawPage&&a.willDrawPage.push(o.willDrawPage),o.didDrawPage&&a.didDrawPage.push(o.didDrawPage)}return a}function b8e(e,t){var r,n,a,s,l,o,c,d,f,p,y,g,N=$k(t.margin,40/e.scaleFactor()),w=(r=v8e(e,t.startY))!==null&&r!==void 0?r:N.top,k;t.showFoot===!0?k="everyPage":t.showFoot===!1?k="never":k=(n=t.showFoot)!==null&&n!==void 0?n:"everyPage";var S;t.showHead===!0?S="everyPage":t.showHead===!1?S="never":S=(a=t.showHead)!==null&&a!==void 0?a:"everyPage";var O=(s=t.useCss)!==null&&s!==void 0?s:!1,E=t.theme||(O?"plain":"striped"),D=!!t.horizontalPageBreak,H=(l=t.horizontalPageBreakRepeat)!==null&&l!==void 0?l:null;return{includeHiddenHtml:(o=t.includeHiddenHtml)!==null&&o!==void 0?o:!1,useCss:O,theme:E,startY:w,margin:N,pageBreak:(c=t.pageBreak)!==null&&c!==void 0?c:"auto",rowPageBreak:(d=t.rowPageBreak)!==null&&d!==void 0?d:"auto",tableWidth:(f=t.tableWidth)!==null&&f!==void 0?f:"auto",showHead:S,showFoot:k,tableLineWidth:(p=t.tableLineWidth)!==null&&p!==void 0?p:0,tableLineColor:(y=t.tableLineColor)!==null&&y!==void 0?y:200,horizontalPageBreak:D,horizontalPageBreakRepeat:H,horizontalPageBreakBehaviour:(g=t.horizontalPageBreakBehaviour)!==null&&g!==void 0?g:"afterAllRows"}}function v8e(e,t){var r=e.getLastAutoTable(),n=e.scaleFactor(),a=e.pageNumber(),s=!1;if(r&&r.startPageNumber){var l=r.startPageNumber+r.pageNumber-1;s=l===a}return typeof t=="number"?t:(t==null||t===!1)&&s&&(r==null?void 0:r.finalY)!=null?r.finalY+20/n:null}function y8e(e,t,r){var n=t.head||[],a=t.body||[],s=t.foot||[];if(t.html){var l=t.includeHiddenHtml;if(r){var o=$W(e,t.html,r,l,t.useCss)||{};n=o.head||n,a=o.body||n,s=o.foot||n}else console.error("Cannot parse html in non browser environment")}var c=t.columns||w8e(n,a,s);return{columns:c,head:n,body:a,foot:s}}function w8e(e,t,r){var n=e[0]||t[0]||r[0]||[],a=[];return Object.keys(n).filter(function(s){return s!=="_element"}).forEach(function(s){var l=1,o;Array.isArray(n)?o=n[parseInt(s)]:o=n[s],typeof o=="object"&&!Array.isArray(o)&&(l=(o==null?void 0:o.colSpan)||1);for(var c=0;c<l;c++){var d=void 0;Array.isArray(n)?d=a.length:d=s+(c>0?"_".concat(c):"");var f={dataKey:d};a.push(f)}}),a}var JS=(function(){function e(t,r,n){this.table=r,this.pageNumber=r.pageNumber,this.settings=r.settings,this.cursor=n,this.doc=t.getDocument()}return e})(),k8e=(function(e){FW(t,e);function t(r,n,a,s,l,o){var c=e.call(this,r,n,o)||this;return c.cell=a,c.row=s,c.column=l,c.section=s.section,c}return t})(JS),N8e=(function(){function e(t,r){this.pageNumber=1,this.id=t.id,this.settings=t.settings,this.styles=t.styles,this.hooks=t.hooks,this.columns=r.columns,this.head=r.head,this.body=r.body,this.foot=r.foot}return e.prototype.getHeadHeight=function(t){return this.head.reduce(function(r,n){return r+n.getMaxCellHeight(t)},0)},e.prototype.getFootHeight=function(t){return this.foot.reduce(function(r,n){return r+n.getMaxCellHeight(t)},0)},e.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},e.prototype.callCellHooks=function(t,r,n,a,s,l){for(var o=0,c=r;o<c.length;o++){var d=c[o],f=new k8e(t,this,n,a,s,l),p=d(f)===!1;if(n.text=Array.isArray(n.text)?n.text:[n.text],p)return!1}return!0},e.prototype.callEndPageHooks=function(t,r){t.applyStyles(t.userStyles);for(var n=0,a=this.hooks.didDrawPage;n<a.length;n++){var s=a[n];s(new JS(t,this,r))}},e.prototype.callWillDrawPageHooks=function(t,r){for(var n=0,a=this.hooks.willDrawPage;n<a.length;n++){var s=a[n];s(new JS(t,this,r))}},e.prototype.getWidth=function(t){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var r=this.columns.reduce(function(a,s){return a+s.wrappedWidth},0);return r}else{var n=this.settings.margin;return t-n.left-n.right}},e})(),WW=(function(){function e(t,r,n,a,s){s===void 0&&(s=!1),this.height=0,this.raw=t,t instanceof BW&&(this.raw=t._element,this.element=t._element),this.index=r,this.section=n,this.cells=a,this.spansMultiplePages=s}return e.prototype.getMaxCellHeight=function(t){var r=this;return t.reduce(function(n,a){var s;return Math.max(n,((s=r.cells[a.index])===null||s===void 0?void 0:s.height)||0)},0)},e.prototype.hasRowSpan=function(t){var r=this;return t.filter(function(n){var a=r.cells[n.index];return a?a.rowSpan>1:!1}).length>0},e.prototype.canEntireRowFit=function(t,r){return this.getMaxCellHeight(r)<=t},e.prototype.getMinimumRowHeight=function(t,r){var n=this;return t.reduce(function(a,s){var l=n.cells[s.index];if(!l)return 0;var o=r.getLineHeight(l.styles.fontSize),c=l.padding("vertical"),d=c+o;return d>a?d:a},0)},e})(),KW=(function(){function e(t,r,n){var a;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=r,this.section=n,this.raw=t;var s=t;t!=null&&typeof t=="object"&&!Array.isArray(t)?(this.rowSpan=t.rowSpan||1,this.colSpan=t.colSpan||1,s=(a=t.content)!==null&&a!==void 0?a:t,t._element&&(this.raw=t._element)):(this.rowSpan=1,this.colSpan=1);var l=s!=null?""+s:"",o=/\r\n|\r|\n/g;this.text=l.split(o)}return e.prototype.getTextPos=function(){var t;if(this.styles.valign==="top")t=this.y+this.padding("top");else if(this.styles.valign==="bottom")t=this.y+this.height-this.padding("bottom");else{var r=this.height-this.padding("vertical");t=this.y+r/2+this.padding("top")}var n;if(this.styles.halign==="right")n=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var a=this.width-this.padding("horizontal");n=this.x+a/2+this.padding("left")}else n=this.x+this.padding("left");return{x:n,y:t}},e.prototype.getContentHeight=function(t,r){r===void 0&&(r=1.15);var n=Array.isArray(this.text)?this.text.length:1,a=this.styles.fontSize/t*r,s=n*a+this.padding("vertical");return Math.max(s,this.styles.minCellHeight)},e.prototype.padding=function(t){var r=$k(this.styles.cellPadding,0);return t==="vertical"?r.top+r.bottom:t==="horizontal"?r.left+r.right:r[t]},e})(),_8e=(function(){function e(t,r,n){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=t,this.raw=r,this.index=n}return e.prototype.getMaxCustomCellWidth=function(t){for(var r=0,n=0,a=t.allRows();n<a.length;n++){var s=a[n],l=s.cells[this.index];l&&typeof l.styles.cellWidth=="number"&&(r=Math.max(r,l.styles.cellWidth))}return r},e})();function S8e(e,t){j8e(e,t);var r=[],n=0;t.columns.forEach(function(s){var l=s.getMaxCustomCellWidth(t);l?s.width=l:(s.width=s.wrappedWidth,r.push(s)),n+=s.width});var a=t.getWidth(e.pageSize().width)-n;a&&(a=e6(r,a,function(s){return Math.max(s.minReadableWidth,s.minWidth)})),a&&(a=e6(r,a,function(s){return s.minWidth})),a=Math.abs(a),!t.settings.horizontalPageBreak&&a>.1/e.scaleFactor()&&(a=a<1?a:Math.round(a),console.warn("Of the table content, ".concat(a," units width could not fit page"))),A8e(t),E8e(t,e),C8e(t)}function j8e(e,t){var r=e.scaleFactor(),n=t.settings.horizontalPageBreak,a=qW(e,t);t.allRows().forEach(function(s){for(var l=0,o=t.columns;l<o.length;l++){var c=o[l],d=s.cells[c.index];if(d){var f=t.hooks.didParseCell;t.callCellHooks(e,f,d,s,c,null);var p=d.padding("horizontal");d.contentWidth=Ew(d.text,d.styles,e)+p;var y=Ew(d.text.join(" ").split(/[^\S\u00A0]+/),d.styles,e);if(d.minReadableWidth=y+d.padding("horizontal"),typeof d.styles.cellWidth=="number")d.minWidth=d.styles.cellWidth,d.wrappedWidth=d.styles.cellWidth;else if(d.styles.cellWidth==="wrap"||n===!0)d.contentWidth>a?(d.minWidth=a,d.wrappedWidth=a):(d.minWidth=d.contentWidth,d.wrappedWidth=d.contentWidth);else{var g=10/r;d.minWidth=d.styles.minCellWidth||g,d.wrappedWidth=d.contentWidth,d.minWidth>d.wrappedWidth&&(d.wrappedWidth=d.minWidth)}}}}),t.allRows().forEach(function(s){for(var l=0,o=t.columns;l<o.length;l++){var c=o[l],d=s.cells[c.index];if(d&&d.colSpan===1)c.wrappedWidth=Math.max(c.wrappedWidth,d.wrappedWidth),c.minWidth=Math.max(c.minWidth,d.minWidth),c.minReadableWidth=Math.max(c.minReadableWidth,d.minReadableWidth);else{var f=t.styles.columnStyles[c.dataKey]||t.styles.columnStyles[c.index]||{},p=f.cellWidth||f.minCellWidth;p&&typeof p=="number"&&(c.minWidth=p,c.wrappedWidth=p)}d&&(d.colSpan>1&&!c.minWidth&&(c.minWidth=d.minWidth),d.colSpan>1&&!c.wrappedWidth&&(c.wrappedWidth=d.minWidth))}})}function e6(e,t,r){for(var n=t,a=e.reduce(function(g,N){return g+N.wrappedWidth},0),s=0;s<e.length;s++){var l=e[s],o=l.wrappedWidth/a,c=n*o,d=l.width+c,f=r(l),p=d<f?f:d;t-=p-l.width,l.width=p}if(t=Math.round(t*1e10)/1e10,t){var y=e.filter(function(g){return t<0?g.width>r(g):!0});y.length&&(t=e6(y,t,r))}return t}function C8e(e){for(var t={},r=1,n=e.allRows(),a=0;a<n.length;a++)for(var s=n[a],l=0,o=e.columns;l<o.length;l++){var c=o[l],d=t[c.index];if(r>1)r--,delete s.cells[c.index];else if(d)d.cell.height+=s.height,r=d.cell.colSpan,delete s.cells[c.index],d.left--,d.left<=1&&delete t[c.index];else{var f=s.cells[c.index];if(!f)continue;if(f.height=s.height,f.rowSpan>1){var p=n.length-a,y=f.rowSpan>p?p:f.rowSpan;t[c.index]={cell:f,left:y,row:s}}}}}function A8e(e){for(var t=e.allRows(),r=0;r<t.length;r++)for(var n=t[r],a=null,s=0,l=0,o=0;o<e.columns.length;o++){var c=e.columns[o];if(l-=1,l>1&&e.columns[o+1])s+=c.width,delete n.cells[c.index];else if(a){var d=a;delete n.cells[c.index],a=null,d.width=c.width+s}else{var d=n.cells[c.index];if(!d)continue;if(l=d.colSpan,s=0,d.colSpan>1){a=d,s+=c.width;continue}d.width=c.width+s}}}function E8e(e,t){for(var r={count:0,height:0},n=0,a=e.allRows();n<a.length;n++){for(var s=a[n],l=0,o=e.columns;l<o.length;l++){var c=o[l],d=s.cells[c.index];if(d){t.applyStyles(d.styles,!0);var f=d.width-d.padding("horizontal");if(d.styles.overflow==="linebreak")d.text=t.splitTextToSize(d.text,f+1/t.scaleFactor(),{fontSize:d.styles.fontSize});else if(d.styles.overflow==="ellipsize")d.text=hL(d.text,f,d.styles,t,"...");else if(d.styles.overflow==="hidden")d.text=hL(d.text,f,d.styles,t,"");else if(typeof d.styles.overflow=="function"){var p=d.styles.overflow(d.text,f);typeof p=="string"?d.text=[p]:d.text=p}d.contentHeight=d.getContentHeight(t.scaleFactor(),t.getLineHeightFactor());var y=d.contentHeight/d.rowSpan;d.rowSpan>1&&r.count*r.height<y*d.rowSpan?r={height:y,count:d.rowSpan}:r&&r.count>0&&r.height>y&&(y=r.height),y>s.height&&(s.height=y)}}r.count--}}function hL(e,t,r,n,a){return e.map(function(s){return T8e(s,t,r,n,a)})}function T8e(e,t,r,n,a){var s=1e4*n.scaleFactor();if(t=Math.ceil(t*s)/s,t>=Ew(e,r,n))return e;for(;t<Ew(e+a,r,n)&&!(e.length<=1);)e=e.substring(0,e.length-1);return e.trim()+a}function GW(e,t){var r=new N1(e),n=O8e(t,r.scaleFactor()),a=new N8e(t,n);return S8e(r,a),r.applyStyles(r.userStyles),a}function O8e(e,t){var r=e.content,n=I8e(r.columns);if(r.head.length===0){var a=fL(n,"head");a&&r.head.push(a)}if(r.foot.length===0){var a=fL(n,"foot");a&&r.foot.push(a)}var s=e.settings.theme,l=e.styles;return{columns:n,head:BN("head",r.head,n,l,s,t),body:BN("body",r.body,n,l,s,t),foot:BN("foot",r.foot,n,l,s,t)}}function BN(e,t,r,n,a,s){var l={},o=t.map(function(c,d){for(var f=0,p={},y=0,g=0,N=0,w=r;N<w.length;N++){var k=w[N];if(l[k.index]==null||l[k.index].left===0)if(g===0){var S=void 0;Array.isArray(c)?S=c[k.index-y-f]:S=c[k.dataKey];var O={};typeof S=="object"&&!Array.isArray(S)&&(O=(S==null?void 0:S.styles)||{});var E=D8e(e,k,d,a,n,s,O),D=new KW(S,E,e);p[k.dataKey]=D,p[k.index]=D,g=D.colSpan-1,l[k.index]={left:D.rowSpan-1,times:g}}else g--,y++;else l[k.index].left--,g=l[k.index].times,f++}return new WW(c,d,e,p)});return o}function fL(e,t){var r={};return e.forEach(function(n){if(n.raw!=null){var a=P8e(t,n.raw);a!=null&&(r[n.dataKey]=a)}}),Object.keys(r).length>0?r:null}function P8e(e,t){if(e==="head"){if(typeof t=="object")return t.header||null;if(typeof t=="string"||typeof t=="number")return t}else if(e==="foot"&&typeof t=="object")return t.footer;return null}function I8e(e){return e.map(function(t,r){var n,a;return typeof t=="object"?a=(n=t.dataKey)!==null&&n!==void 0?n:r:a=r,new _8e(a,t,r)})}function D8e(e,t,r,n,a,s,l){var o=c8e(n),c;e==="head"?c=a.headStyles:e==="body"?c=a.bodyStyles:e==="foot"&&(c=a.footStyles);var d=I0({},o.table,o[e],a.styles,c),f=a.columnStyles[t.dataKey]||a.columnStyles[t.index]||{},p=e==="body"?f:{},y=e==="body"&&r%2===0?I0({},o.alternateRow,a.alternateRowStyles):{},g=o8e(s),N=I0({},g,d,y,p);return I0(N,l)}function M8e(e,t,r){var n;r===void 0&&(r={});var a=qW(e,t),s=new Map,l=[],o=[],c=[];Array.isArray(t.settings.horizontalPageBreakRepeat)?c=t.settings.horizontalPageBreakRepeat:(typeof t.settings.horizontalPageBreakRepeat=="string"||typeof t.settings.horizontalPageBreakRepeat=="number")&&(c=[t.settings.horizontalPageBreakRepeat]),c.forEach(function(y){var g=t.columns.find(function(N){return N.dataKey===y||N.index===y});g&&!s.has(g.index)&&(s.set(g.index,!0),l.push(g.index),o.push(t.columns[g.index]),a-=g.wrappedWidth)});for(var d=!0,f=(n=r==null?void 0:r.start)!==null&&n!==void 0?n:0;f<t.columns.length;){if(s.has(f)){f++;continue}var p=t.columns[f].wrappedWidth;if(d||a>=p)d=!1,l.push(f),o.push(t.columns[f]),a-=p;else break;f++}return{colIndexes:l,columns:o,lastIndex:f-1}}function L8e(e,t){for(var r=[],n=0;n<t.columns.length;n++){var a=M8e(e,t,{start:n});a.columns.length&&(r.push(a),n=a.lastIndex)}return r}function XW(e,t){var r=t.settings,n=r.startY,a=r.margin,s={x:a.left,y:n},l=t.getHeadHeight(t.columns)+t.getFootHeight(t.columns),o=n+a.bottom+l;if(r.pageBreak==="avoid"){var c=t.body,d=c.reduce(function(y,g){return y+g.height},0);o+=d}var f=new N1(e);(r.pageBreak==="always"||r.startY!=null&&o>f.pageSize().height)&&(ZW(f),s.y=a.top),t.callWillDrawPageHooks(f,s);var p=I0({},s);t.startPageNumber=f.pageNumber(),r.horizontalPageBreak?R8e(f,t,p,s):(f.applyStyles(f.userStyles),(r.showHead==="firstPage"||r.showHead==="everyPage")&&t.head.forEach(function(y){return Z0(f,t,y,s,t.columns)}),f.applyStyles(f.userStyles),t.body.forEach(function(y,g){var N=g===t.body.length-1;Tw(f,t,y,N,p,s,t.columns)}),f.applyStyles(f.userStyles),(r.showFoot==="lastPage"||r.showFoot==="everyPage")&&t.foot.forEach(function(y){return Z0(f,t,y,s,t.columns)})),UW(f,t,p,s),t.callEndPageHooks(f,s),t.finalY=s.y,e.lastAutoTable=t,f.applyStyles(f.userStyles)}function R8e(e,t,r,n){var a=L8e(e,t),s=t.settings;if(s.horizontalPageBreakBehaviour==="afterAllRows")a.forEach(function(d,f){e.applyStyles(e.userStyles),f>0?Rg(e,t,r,n,d.columns,!0):mL(e,t,n,d.columns),F8e(e,t,r,n,d.columns),UN(e,t,n,d.columns)});else for(var l=-1,o=a[0],c=function(){var d=l;if(o){e.applyStyles(e.userStyles);var f=o.columns;l>=0?Rg(e,t,r,n,f,!0):mL(e,t,n,f),d=xL(e,t,l+1,n,f),UN(e,t,n,f)}var p=d-l;a.slice(1).forEach(function(y){e.applyStyles(e.userStyles),Rg(e,t,r,n,y.columns,!0),xL(e,t,l+1,n,y.columns,p),UN(e,t,n,y.columns)}),l=d};l<t.body.length-1;)c()}function mL(e,t,r,n){var a=t.settings;e.applyStyles(e.userStyles),(a.showHead==="firstPage"||a.showHead==="everyPage")&&t.head.forEach(function(s){return Z0(e,t,s,r,n)})}function F8e(e,t,r,n,a){e.applyStyles(e.userStyles),t.body.forEach(function(s,l){var o=l===t.body.length-1;Tw(e,t,s,o,r,n,a)})}function xL(e,t,r,n,a,s){e.applyStyles(e.userStyles),s=s??t.body.length;var l=Math.min(r+s,t.body.length),o=-1;return t.body.slice(r,l).forEach(function(c,d){var f=r+d===t.body.length-1,p=YW(e,t,f,n);c.canEntireRowFit(p,a)&&(Z0(e,t,c,n,a),o=r+d)}),o}function UN(e,t,r,n){var a=t.settings;e.applyStyles(e.userStyles),(a.showFoot==="lastPage"||a.showFoot==="everyPage")&&t.foot.forEach(function(s){return Z0(e,t,s,r,n)})}function B8e(e,t,r){var n=r.getLineHeight(e.styles.fontSize),a=e.padding("vertical"),s=Math.floor((t-a)/n);return Math.max(0,s)}function U8e(e,t,r,n){var a={};e.spansMultiplePages=!0,e.height=0;for(var s=0,l=0,o=r.columns;l<o.length;l++){var c=o[l],d=e.cells[c.index];if(d){Array.isArray(d.text)||(d.text=[d.text]);var f=new KW(d.raw,d.styles,d.section);f=I0(f,d),f.text=[];var p=B8e(d,t,n);d.text.length>p&&(f.text=d.text.splice(p,d.text.length));var y=n.scaleFactor(),g=n.getLineHeightFactor();d.contentHeight=d.getContentHeight(y,g),d.contentHeight>=t&&(d.contentHeight=t,f.styles.minCellHeight-=t),d.contentHeight>e.height&&(e.height=d.contentHeight),f.contentHeight=f.getContentHeight(y,g),f.contentHeight>s&&(s=f.contentHeight),a[c.index]=f}}var N=new WW(e.raw,-1,e.section,a,!0);N.height=s;for(var w=0,k=r.columns;w<k.length;w++){var c=k[w],f=N.cells[c.index];f&&(f.height=N.height);var d=e.cells[c.index];d&&(d.height=e.height)}return N}function z8e(e,t,r,n){var a=e.pageSize().height,s=n.settings.margin,l=s.top+s.bottom,o=a-l;t.section==="body"&&(o-=n.getHeadHeight(n.columns)+n.getFootHeight(n.columns));var c=t.getMinimumRowHeight(n.columns,e),d=c<r;if(c>o)return console.error("Will not be able to print row ".concat(t.index," correctly since it's minimum height is larger than page height")),!0;if(!d)return!1;var f=t.hasRowSpan(n.columns),p=t.getMaxCellHeight(n.columns)>o;return p?(f&&console.error("The content of row ".concat(t.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(f||n.settings.rowPageBreak==="avoid")}function Tw(e,t,r,n,a,s,l){var o=YW(e,t,n,s);if(r.canEntireRowFit(o,l))Z0(e,t,r,s,l);else if(z8e(e,r,o,t)){var c=U8e(r,o,t,e);Z0(e,t,r,s,l),Rg(e,t,a,s,l),Tw(e,t,c,n,a,s,l)}else Rg(e,t,a,s,l),Tw(e,t,r,n,a,s,l)}function Z0(e,t,r,n,a){n.x=t.settings.margin.left;for(var s=0,l=a;s<l.length;s++){var o=l[s],c=r.cells[o.index];if(!c){n.x+=o.width;continue}e.applyStyles(c.styles),c.x=n.x,c.y=n.y;var d=t.callCellHooks(e,t.hooks.willDrawCell,c,r,o,n);if(d===!1){n.x+=o.width;continue}q8e(e,c,n);var f=c.getTextPos();RW(c.text,f.x,f.y,{halign:c.styles.halign,valign:c.styles.valign,maxWidth:Math.ceil(c.width-c.padding("left")-c.padding("right"))},e.getDocument()),t.callCellHooks(e,t.hooks.didDrawCell,c,r,o,n),n.x+=o.width}n.y+=r.height}function q8e(e,t,r){var n=t.styles;if(e.getDocument().setFillColor(e.getDocument().getFillColor()),typeof n.lineWidth=="number"){var a=zW(n.lineWidth,n.fillColor);a&&e.rect(t.x,r.y,t.width,t.height,a)}else typeof n.lineWidth=="object"&&(n.fillColor&&e.rect(t.x,r.y,t.width,t.height,"F"),H8e(e,t,r,n.lineWidth))}function H8e(e,t,r,n){var a,s,l,o;n.top&&(a=r.x,s=r.y,l=r.x+t.width,o=r.y,n.right&&(l+=.5*n.right),n.left&&(a-=.5*n.left),c(n.top,a,s,l,o)),n.bottom&&(a=r.x,s=r.y+t.height,l=r.x+t.width,o=r.y+t.height,n.right&&(l+=.5*n.right),n.left&&(a-=.5*n.left),c(n.bottom,a,s,l,o)),n.left&&(a=r.x,s=r.y,l=r.x,o=r.y+t.height,n.top&&(s-=.5*n.top),n.bottom&&(o+=.5*n.bottom),c(n.left,a,s,l,o)),n.right&&(a=r.x+t.width,s=r.y,l=r.x+t.width,o=r.y+t.height,n.top&&(s-=.5*n.top),n.bottom&&(o+=.5*n.bottom),c(n.right,a,s,l,o));function c(d,f,p,y,g){e.getDocument().setLineWidth(d),e.getDocument().line(f,p,y,g,"S")}}function YW(e,t,r,n){var a=t.settings.margin.bottom,s=t.settings.showFoot;return(s==="everyPage"||s==="lastPage"&&r)&&(a+=t.getFootHeight(t.columns)),e.pageSize().height-n.y-a}function Rg(e,t,r,n,a,s){a===void 0&&(a=[]),s===void 0&&(s=!1),e.applyStyles(e.userStyles),t.settings.showFoot==="everyPage"&&!s&&t.foot.forEach(function(o){return Z0(e,t,o,n,a)}),t.callEndPageHooks(e,n);var l=t.settings.margin;UW(e,t,r,n),ZW(e),t.pageNumber++,n.x=l.left,n.y=l.top,r.y=l.top,t.callWillDrawPageHooks(e,n),t.settings.showHead==="everyPage"&&(t.head.forEach(function(o){return Z0(e,t,o,n,a)}),e.applyStyles(e.userStyles))}function ZW(e){var t=e.pageNumber();e.setPage(t+1);var r=e.pageNumber();return r===t?(e.addPage(),!0):!1}function $8e(e){e.API.autoTable=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=t[0],a=VW(this,n),s=GW(this,a);return XW(this,s),this},e.API.lastAutoTable=!1,e.API.autoTableText=function(t,r,n,a){RW(t,r,n,a,this)},e.API.autoTableSetDefaults=function(t){return N1.setDefaults(t,this),this},e.autoTableSetDefaults=function(t,r){N1.setDefaults(t,r)},e.API.autoTableHtmlToJson=function(t,r){var n;if(r===void 0&&(r=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var a=new N1(this),s=$W(a,t,window,r,!1),l=s.head,o=s.body,c=((n=l[0])===null||n===void 0?void 0:n.map(function(d){return d.content}))||[];return{columns:c,rows:o,data:o}}}var zN;function Km(e,t){var r=VW(e,t),n=GW(e,r);XW(e,n)}try{if(typeof window<"u"&&window){var pL=window,gL=pL.jsPDF||((zN=pL.jspdf)===null||zN===void 0?void 0:zN.jsPDF);gL&&$8e(gL)}}catch(e){console.error("Could not apply autoTable plugin",e)}const Vk=(e,t,r)=>(e.setFontSize(20),e.setFont("helvetica","bold"),e.text(t,14,20),r&&(e.setFontSize(10),e.setFont("helvetica","normal"),e.text(r,14,28)),e.setFontSize(9),e.setTextColor(100),e.text(`Generated: ${new Date().toLocaleString("vi-VN")}`,14,r?35:28),e.setTextColor(0),r?42:35),Wk=e=>{const t=e.internal.getNumberOfPages();e.setFontSize(8),e.setTextColor(100);for(let r=1;r<=t;r++)e.setPage(r),e.text(`Page ${r} of ${t}`,e.internal.pageSize.width/2,e.internal.pageSize.height-10,{align:"center"})},V8e=(e,t)=>{const r=new rn,n=Vk(r,"INVENTORY REPORT",`Total Products: ${e.length}`),a=e.reduce((d,f)=>{const p=f.stock[t]||0,y=f.retailPrice[t]||0;return d+p*y},0),s=e.reduce((d,f)=>d+(f.stock[t]||0),0),l=e.filter(d=>(d.stock[t]||0)>0&&(d.stock[t]||0)<=10).length,o=e.filter(d=>(d.stock[t]||0)===0).length;Km(r,{startY:n,head:[["Metric","Value"]],body:[["Total Inventory Value",Ie(a)],["Total Products",e.length.toString()],["Total Stock Units",s.toString()],["Low Stock Items",l.toString()],["Out of Stock",o.toString()]],theme:"grid",headStyles:{fillColor:[59,130,246]}});const c=e.map(d=>{const f=d.stock[t]||0,p=d.retailPrice[t]||0,y=f*p;return[d.sku||"N/A",d.name,d.category||"Uncategorized",f.toString(),Ie(p),Ie(y)]});Km(r,{startY:r.lastAutoTable.finalY+10,head:[["SKU","Name","Category","Stock","Price","Value"]],body:c,theme:"striped",headStyles:{fillColor:[59,130,246]},styles:{fontSize:8},columnStyles:{1:{cellWidth:50},3:{halign:"center"},4:{halign:"right"},5:{halign:"right"}}}),Wk(r),r.save(`Inventory_Report_${new Date().toISOString().slice(0,10)}.pdf`)},W8e=(e,t,r={})=>{var g;const n=new rn;let a=e;(r.start||r.end)&&(a=e.filter(N=>{const w=new Date(N.date);return!(r.start&&w<r.start||r.end&&w>r.end)}));const s=r.start?`Period: ${r.start.toLocaleDateString("vi-VN")} - ${((g=r.end)==null?void 0:g.toLocaleDateString("vi-VN"))||"Now"}`:`Total Orders: ${a.length}`,l=Vk(n,"SALES REPORT",s),o=a.reduce((N,w)=>N+w.total,0),c=a.length,d=a.reduce((N,w)=>N+w.items.reduce((k,S)=>k+S.quantity,0),0),f=c>0?o/c:0;Km(n,{startY:l,head:[["Metric","Value"]],body:[["Total Revenue",Ie(o)],["Total Orders",c.toString()],["Total Items Sold",d.toString()],["Average Order Value",Ie(f)]],theme:"grid",headStyles:{fillColor:[16,185,129]}});const p=new Map;a.forEach(N=>{N.items.forEach(w=>{const k=p.get(w.partId),S=t.find(E=>E.id===w.partId),O=(S==null?void 0:S.name)||"Unknown Product";k?(k.quantity+=w.quantity,k.revenue+=w.sellingPrice*w.quantity):p.set(w.partId,{quantity:w.quantity,revenue:w.sellingPrice*w.quantity,name:O})})});const y=Array.from(p.entries()).map(([N,w])=>({name:w.name,quantity:w.quantity,revenue:w.revenue})).sort((N,w)=>w.revenue-N.revenue).slice(0,20);Km(n,{startY:n.lastAutoTable.finalY+10,head:[["Product","Quantity Sold","Revenue"]],body:y.map(N=>[N.name,N.quantity.toString(),Ie(N.revenue)]),theme:"striped",headStyles:{fillColor:[16,185,129]},styles:{fontSize:8},columnStyles:{0:{cellWidth:80},1:{halign:"center"},2:{halign:"right"}}}),Wk(n),n.save(`Sales_Report_${new Date().toISOString().slice(0,10)}.pdf`)},K8e=(e,t,r,n,a,s,l={})=>{var H;const o=new rn;let c=e,d=t;(l.start||l.end)&&(c=e.filter(W=>{const R=new Date(W.date);return!(l.start&&R<l.start||l.end&&R>l.end)}),d=t.filter(W=>{const R=new Date(W.date);return!(l.start&&R<l.start||l.end&&R>l.end)}));const f=l.start?`Period: ${l.start.toLocaleDateString("vi-VN")} - ${((H=l.end)==null?void 0:H.toLocaleDateString("vi-VN"))||"Now"}`:"All Time",p=Vk(o,"FINANCIAL REPORT",f),y=c.reduce((W,R)=>W+R.total,0),g=d.filter(W=>W.type==="Nhp kho").reduce((W,R)=>{var Z;const z=r.find(q=>q.id===R.partId),U=((Z=z==null?void 0:z.wholesalePrice)==null?void 0:Z[n])||0;return W+U*R.quantity},0),N=y-g,w=y>0?N/y*100:0,k=r.reduce((W,R)=>{const z=R.stock[n]||0,U=R.retailPrice[n]||0;return W+z*U},0),S=a.reduce((W,R)=>W+R.amount,0),O=s.reduce((W,R)=>W+R.amount,0);Km(o,{startY:p,head:[["Metric","Amount"]],body:[["Total Income",Ie(y)],["Total Expenses",Ie(g)],["Net Profit",Ie(N)],["Profit Margin",`${w.toFixed(2)}%`],["Inventory Value",Ie(k)],["Customer Debts",Ie(S)],["Supplier Debts",Ie(O)],["Net Position",Ie(N+k+S-O)]],theme:"grid",headStyles:{fillColor:[139,92,246]},didParseCell:W=>{W.row.index===2&&(W.cell.styles.fillColor=N>=0?[220,252,231]:[254,226,226],W.cell.styles.textColor=N>=0?[22,101,52]:[127,29,29],W.cell.styles.fontStyle="bold")}});const E=o.lastAutoTable.finalY+10;o.setFontSize(10),o.setFont("helvetica","bold"),o.text("Notes:",14,E),o.setFontSize(9),o.setFont("helvetica","normal"),[" Income includes all sales revenue"," Expenses include inventory purchase costs"," Profit margin = (Net Profit / Income)  100%"," Net Position = Profit + Inventory + Customer Debts - Supplier Debts"].forEach((W,R)=>{o.text(W,14,E+7+R*5)}),Wk(o),o.save(`Financial_Report_${new Date().toISOString().slice(0,10)}.pdf`)},G8e=(e,t)=>{const r=new rn,n=e.filter(l=>{const o=l.stock[t]||0;return o>0&&o<=10}),a=e.filter(l=>(l.stock[t]||0)===0),s=Vk(r,"LOW STOCK ALERT",`Low Stock: ${n.length} | Out of Stock: ${a.length}`);if(n.length>0){r.setFontSize(12),r.setFont("helvetica","bold"),r.text("Low Stock Items ( 10 units)",14,s);const l=n.sort((o,c)=>(o.stock[t]||0)-(c.stock[t]||0)).map(o=>{const c=o.stock[t]||0,d=c<=3?"Critical":c<=5?"Warning":"Low";return[o.sku||"N/A",o.name,o.category||"Uncategorized",c.toString(),d]});Km(r,{startY:s+5,head:[["SKU","Name","Category","Stock","Status"]],body:l,theme:"striped",headStyles:{fillColor:[245,158,11]},styles:{fontSize:8},columnStyles:{1:{cellWidth:60},3:{halign:"center"},4:{halign:"center"}},didParseCell:o=>{if(o.column.index===4&&o.row.section==="body"){const c=o.cell.raw;c==="Critical"?(o.cell.styles.fillColor=[254,226,226],o.cell.styles.textColor=[127,29,29]):c==="Warning"&&(o.cell.styles.fillColor=[254,243,199],o.cell.styles.textColor=[146,64,14])}}})}if(a.length>0){const l=n.length>0?r.lastAutoTable.finalY+15:s;r.setFontSize(12),r.setFont("helvetica","bold"),r.text("Out of Stock Items",14,l);const o=a.map(c=>[c.sku||"N/A",c.name,c.category||"Uncategorized"]);Km(r,{startY:l+5,head:[["SKU","Name","Category"]],body:o,theme:"striped",headStyles:{fillColor:[239,68,68]},styles:{fontSize:8},columnStyles:{1:{cellWidth:80}}})}n.length===0&&a.length===0&&(r.setFontSize(12),r.text("All products are in stock!",14,s)),Wk(r),r.save(`Low_Stock_Alert_${new Date().toISOString().slice(0,10)}.pdf`)},X8e=()=>{const[e,t]=T.useState("inventory"),{parts:r,sales:n,inventoryTransactions:a,customerDebts:s,supplierDebts:l,currentBranchId:o}=Ua(),c=()=>{try{switch(e){case"inventory":V8e(r,o),Ye.success(" xut bo co tn kho thnh cng!");break;case"sales":W8e(n,r),Ye.success(" xut bo co bn hng thnh cng!");break;case"financial":K8e(n,a,r,o,s,l),Ye.success(" xut bo co ti chnh thnh cng!");break}}catch(p){console.error("Export error:",p),Ye.error("Li khi xut bo co PDF")}},d=()=>{try{G8e(r,o),Ye.success(" xut bo co cnh bo tn kho!")}catch(p){console.error("Export error:",p),Ye.error("Li khi xut bo co")}},f=[{id:"inventory",label:"Tn kho",icon:i.jsx(gl,{className:"w-4 h-4"})},{id:"sales",label:"Bn hng",icon:i.jsx(Vg,{className:"w-4 h-4"})},{id:"financial",label:"Ti chnh",icon:i.jsx(nee,{className:"w-4 h-4"})}];return i.jsxs("div",{className:"p-6 max-w-[1600px] mx-auto",children:[i.jsxs("div",{className:"mb-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-slate-100",children:"Bo co & Phn tch"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400 mt-1",children:"Theo di v phn tch hiu sut kinh doanh"})]}),i.jsxs("div",{className:"flex gap-2",children:[e==="inventory"&&i.jsxs("button",{onClick:d,className:"px-4 py-2 bg-amber-600 hover:bg-amber-700 text-white rounded-lg font-medium transition-colors flex items-center gap-2",children:[i.jsx(bF,{className:"w-4 h-4"})," Cnh bo tn kho"]}),i.jsxs("button",{onClick:c,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors flex items-center gap-2",children:[i.jsx(dd,{className:"w-4 h-4"})," Xut PDF"]})]})]}),i.jsx("div",{className:"flex gap-2 border-b border-slate-200 dark:border-slate-700",children:f.map(p=>i.jsxs("button",{onClick:()=>t(p.id),className:`px-6 py-3 font-medium transition-all relative ${e===p.id?"text-blue-600 dark:text-blue-400":"text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-slate-200"}`,children:[i.jsxs("span",{className:"flex items-center gap-2",children:[i.jsx("span",{children:p.icon}),i.jsx("span",{children:p.label})]}),e===p.id&&i.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-blue-600 dark:bg-blue-400"})]},p.id))})]}),i.jsxs("div",{className:"animate-fadeIn",children:[e==="inventory"&&i.jsx(gCe,{}),e==="sales"&&i.jsx(bCe,{}),e==="financial"&&i.jsx(vCe,{})]})]})},Y8e=e=>Os({queryKey:["auditLogs",e],queryFn:async()=>{const t=await BJ(e);if(!t.ok)throw t.error;return t}}),bL={"auth.login":"ng nhp","auth.logout":"ng xut","sale.create":"To ha n","sale.delete":"Xa ha n","part.update_price":"Cp nht gi ph tng","inventory.receipt":"Nhp kho","settings.update":"Cp nht ci t","debt.customer_pay":"Thu n khch hng","debt.supplier_pay":"Tr n nh cung cp","cash.manual":"Giao dch qu th cng"},Z8e=()=>{var S;const{profile:e}=Ic(),[t,r]=T.useState(""),[n,a]=T.useState(50),[s,l]=T.useState(""),[o,c]=T.useState(""),[d,f]=T.useState(1),{data:p,isLoading:y,refetch:g}=Y8e({action:t||void 0,page:d,pageSize:n,includeUser:!0,startDate:s?new Date(s).toISOString():void 0,endDate:o?new Date(o+"T23:59:59").toISOString():void 0}),N=(p==null?void 0:p.data)||[],w=((S=p==null?void 0:p.meta)==null?void 0:S.total)||0,k=Math.max(1,Math.ceil(w/n));return!e||e.role!=="owner"?i.jsxs("div",{className:"flex items-center justify-center h-96 text-slate-500 dark:text-slate-400",children:[i.jsx(jee,{className:"w-5 h-5 mr-2"})," Ch ch ca hng c xem nht k h thng."]}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Nht k h thng"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("select",{value:t,onChange:O=>r(O.target.value),className:"px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-sm",children:[i.jsx("option",{value:"",children:"Tt c hnh ng"}),Object.entries(bL).map(([O,E])=>i.jsx("option",{value:O,children:E},O))]}),i.jsx("input",{type:"date",value:s,onChange:O=>l(O.target.value),className:"px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-sm"}),i.jsx("input",{type:"date",value:o,onChange:O=>c(O.target.value),className:"px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-sm"}),i.jsx("select",{value:n,onChange:O=>a(parseInt(O.target.value)),className:"px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-sm",children:[25,50,100].map(O=>i.jsxs("option",{value:O,children:[O," dng"]},O))}),i.jsxs("button",{onClick:()=>g(),className:"px-3 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg flex items-center gap-2 text-sm",children:[i.jsx(_ee,{className:"w-4 h-4"})," Ti li"]}),i.jsx("button",{onClick:()=>Q8e(N),className:"px-3 py-2 bg-emerald-600 hover:bg-emerald-700 text-white rounded-lg flex items-center gap-2 text-sm",children:"JSON"}),i.jsx("button",{onClick:()=>J8e(N),className:"px-3 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg flex items-center gap-2 text-sm",children:"CSV"})]})]}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 shadow divide-y divide-slate-200 dark:divide-slate-700",children:[i.jsxs("div",{className:"p-4 flex items-center justify-between",children:[i.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:y?"ang ti...":`Hin th ${N.length} dng  Trang ${d}/${k}  Tng ${w}`}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{onClick:()=>f(O=>Math.max(1,O-1)),disabled:d<=1,className:"px-3 py-1.5 bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-200 rounded disabled:opacity-50",children:"Trang trc"}),i.jsx("button",{onClick:()=>f(O=>Math.min(k,O+1)),disabled:d>=k,className:"px-3 py-1.5 bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-200 rounded disabled:opacity-50",children:"Trang sau"})]})]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full text-sm",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"bg-slate-50 dark:bg-slate-700/50 text-slate-600 dark:text-slate-300",children:[i.jsx("th",{className:"text-left px-4 py-2 font-medium",children:"Thi gian"}),i.jsx("th",{className:"text-left px-4 py-2 font-medium",children:"Hnh ng"}),i.jsx("th",{className:"text-left px-4 py-2 font-medium",children:"Bng"}),i.jsx("th",{className:"text-left px-4 py-2 font-medium",children:"ID bn ghi"}),i.jsx("th",{className:"text-left px-4 py-2 font-medium",children:"D liu"}),i.jsx("th",{className:"text-left px-4 py-2 font-medium",children:"User"})]})}),i.jsxs("tbody",{children:[y&&i.jsx("tr",{children:i.jsx("td",{colSpan:6,className:"px-4 py-6 text-center",children:i.jsx(pee,{className:"w-6 h-6 animate-spin mx-auto text-slate-400"})})}),!y&&N.length===0&&i.jsx("tr",{children:i.jsx("td",{colSpan:6,className:"px-4 py-6 text-center text-slate-500",children:"Khng c d liu"})}),!y&&N.map(O=>{var D;const E=bL[O.action]||O.action;return i.jsxs("tr",{className:"border-t border-slate-100 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-700/40",children:[i.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-slate-700 dark:text-slate-300",children:new Date(O.created_at).toLocaleString("vi-VN")}),i.jsx("td",{className:"px-4 py-2 text-slate-700 dark:text-slate-300",children:E}),i.jsx("td",{className:"px-4 py-2 text-slate-600 dark:text-slate-400",children:O.table_name||"-"}),i.jsx("td",{className:"px-4 py-2 text-slate-600 dark:text-slate-400",children:O.record_id||"-"}),i.jsx("td",{className:"px-4 py-2 max-w-[280px]",children:i.jsx("pre",{className:"text-xs whitespace-pre-wrap break-all bg-slate-50 dark:bg-slate-900/40 p-2 rounded border border-slate-200 dark:border-slate-700 max-h-32 overflow-y-auto",children:O.new_data||O.old_data?JSON.stringify({old:O.old_data?vL(O.old_data):void 0,new:O.new_data?vL(O.new_data):void 0},null,2):"-"})}),i.jsx("td",{className:"px-4 py-2 text-slate-600 dark:text-slate-400",children:O.user_email||O.user_name?`${O.user_name||""} ${O.user_email?"<"+O.user_email+">":""}`.trim():((D=O.user_id)==null?void 0:D.slice(0,8))||"-"})]},O.id)})]})]})})]})]})};function vL(e){try{return typeof e=="string"?JSON.parse(e):e}catch{return e}}function Q8e(e){try{const t=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),r=URL.createObjectURL(t),n=document.createElement("a");n.href=r,n.download=`audit-logs-${new Date().toISOString()}.json`,n.click(),URL.revokeObjectURL(r)}catch{}}function J8e(e){try{const r=[["created_at","action","table_name","record_id","user_id","old_data","new_data"].join(",")];for(const l of e){const o=[l.created_at,l.action,l.table_name??"",l.record_id??"",l.user_id??"",JSON.stringify(l.old_data??""),JSON.stringify(l.new_data??"")].map(c=>`"${String(c).replace(/"/g,'""')}"`).join(",");r.push(o)}const n=new Blob([r.join(`
`)],{type:"text/csv;charset=utf-8;"}),a=URL.createObjectURL(n),s=document.createElement("a");s.href=a,s.download=`audit-logs-${new Date().toISOString()}.csv`,s.click(),URL.revokeObjectURL(a)}catch{}}const eTe=()=>{const{profile:e,hasRole:t}=Ic(),[r,n]=T.useState(null),[a,s]=T.useState(!0),[l,o]=T.useState(!1),[c,d]=T.useState(!1),[f,p]=T.useState(!1),[y,g]=T.useState("general");T.useEffect(()=>{N()},[]);const N=async()=>{try{const{data:D,error:H}=await Pt.from("store_settings").select("*").order("created_at",{ascending:!1}).limit(1).single();if(H)throw H;n(D)}catch(D){console.error("Error loading settings:",D),Ye.error("Khng th ti ci t")}finally{s(!1)}},w=async()=>{if(r){o(!0);try{const D={...r};console.log("Saving settings:",r);const{error:H,data:W}=await Pt.from("store_settings").update(r).eq("id",r.id).select();if(H)throw console.error("Update error:",H),H;console.log("Update result:",W),await N(),Ye.success(" lu ci t thnh cng!"),Us((e==null?void 0:e.id)||null,{action:"settings.update",tableName:"store_settings",recordId:r.id,oldData:D,newData:r})}catch(D){console.error("Error saving settings:",D),Ye.error(D.message||"Khng th lu ci t")}finally{o(!1)}}},k=(D,H)=>{r&&n({...r,[D]:H})},S=async D=>{var W;const H=(W=D.target.files)==null?void 0:W[0];if(H){if(!H.type.startsWith("image/")){Ye.error("Vui lng chn file nh");return}if(H.size>2*1024*1024){Ye.error("Kch thc nh khng c vt qu 2MB");return}d(!0);try{const R=H.name.split(".").pop(),U=`store-assets/${`logo-${Date.now()}.${R}`}`,{error:Z}=await Pt.storage.from("public-assets").upload(U,H);if(Z)throw Z;const{data:q}=Pt.storage.from("public-assets").getPublicUrl(U);k("logo_url",q.publicUrl),Ye.success(" ti logo ln thnh cng!")}catch(R){console.error("Error uploading logo:",R),Ye.error(R.message||"Khng th ti logo ln")}finally{d(!1)}}},O=async D=>{var W;const H=(W=D.target.files)==null?void 0:W[0];if(H){if(!H.type.startsWith("image/")){Ye.error("Vui lng chn file nh");return}if(H.size>2*1024*1024){Ye.error("Kch thc nh khng c vt qu 2MB");return}p(!0);try{const R=H.name.split(".").pop(),U=`store-assets/${`bank-qr-${Date.now()}.${R}`}`,{error:Z}=await Pt.storage.from("public-assets").upload(U,H);if(Z)throw Z;const{data:q}=Pt.storage.from("public-assets").getPublicUrl(U);k("bank_qr_url",q.publicUrl),Ye.success(" ti m QR ngn hng ln thnh cng!")}catch(R){console.error("Error uploading QR:",R),Ye.error(R.message||"Khng th ti m QR ln")}finally{p(!1)}}};if(!t(["owner","manager"]))return i.jsx("div",{className:"flex items-center justify-center h-96",children:i.jsxs("div",{className:"text-center flex items-center gap-2 text-slate-600 dark:text-slate-400",children:[i.jsx(gee,{className:"w-5 h-5","aria-hidden":"true"}),i.jsx("p",{className:"text-lg",children:"Ch ch ca hng v qun l mi c quyn truy cp ci t"})]})});if(a||!r)return i.jsx("div",{className:"flex items-center justify-center h-96",children:i.jsx(vF,{size:"lg"})});const E=t(["owner"]);return i.jsxs("div",{className:"space-y-4 md:space-y-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:"text-xl md:text-2xl font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[i.jsx(Gg,{className:"w-6 h-6 md:w-7 md:h-7 text-blue-600","aria-hidden":"true"}),i.jsx("span",{children:"Ci t h thng"})]}),i.jsx("p",{className:"text-xs md:text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Qun l thng tin ca hng v cu hnh h thng"})]}),E&&i.jsx("button",{onClick:w,disabled:l,className:"w-full sm:w-auto px-4 py-2 md:px-6 md:py-2.5 bg-blue-600 hover:bg-blue-700 disabled:bg-slate-400 text-white rounded-lg text-sm md:text-base font-semibold transition-colors inline-flex items-center justify-center gap-2","aria-label":"Lu thay i",children:l?i.jsx("span",{children:"ang lu..."}):i.jsxs(i.Fragment,{children:[i.jsx(C_,{className:"w-4 h-4 md:w-5 md:h-5","aria-hidden":"true"}),i.jsx("span",{children:"Lu thay i"})]})})]}),!E&&i.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-3 md:p-4 flex items-start gap-2",children:[i.jsx(t7,{className:"w-4 h-4 md:w-5 md:h-5 text-yellow-700 dark:text-yellow-300 mt-0.5 flex-shrink-0","aria-hidden":"true"}),i.jsx("p",{className:"text-xs md:text-sm text-yellow-800 dark:text-yellow-200",children:"Bn ch c quyn xem. Ch ch ca hng mi c th chnh sa ci t."})]}),i.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700 -mx-4 px-4 md:mx-0 md:px-0",children:i.jsx("div",{className:"flex gap-2 md:gap-4 overflow-x-auto pb-px",children:[{id:"general",label:"Thng tin chung",shortLabel:"Thng tin",icon:i.jsx(Cee,{className:"w-3.5 h-3.5 md:w-4 md:h-4","aria-hidden":"true"})},{id:"branding",label:"Thng hiu",shortLabel:"Thng hiu",icon:i.jsx(xF,{className:"w-3.5 h-3.5 md:w-4 md:h-4","aria-hidden":"true"})},{id:"banking",label:"Ngn hng",shortLabel:"Ngn hng",icon:i.jsx(Wg,{className:"w-3.5 h-3.5 md:w-4 md:h-4","aria-hidden":"true"})},{id:"invoice",label:"Ha n",shortLabel:"Ha n",icon:i.jsx(dd,{className:"w-3.5 h-3.5 md:w-4 md:h-4","aria-hidden":"true"})}].map(D=>i.jsxs("button",{onClick:()=>g(D.id),className:`px-2.5 py-2 md:px-4 md:py-3 text-xs md:text-sm font-medium border-b-2 transition-colors inline-flex items-center gap-1.5 md:gap-2 whitespace-nowrap ${y===D.id?"border-blue-600 text-blue-600 dark:text-blue-400":"border-transparent text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-slate-200"}`,children:[D.icon,i.jsx("span",{className:"hidden sm:inline",children:D.label}),i.jsx("span",{className:"inline sm:hidden",children:D.shortLabel})]},D.id))})}),i.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-lg border border-slate-200 dark:border-slate-700 p-4 md:p-6",children:[y==="general"&&i.jsxs("div",{className:"space-y-4 md:space-y-6",children:[i.jsx("h2",{className:"text-base md:text-lg font-semibold text-slate-900 dark:text-white mb-3 md:mb-4",children:"Thng tin ca hng"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs md:text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5 md:mb-2",children:"Tn ca hng *"}),i.jsx("input",{type:"text",value:r.store_name||"",onChange:D=>k("store_name",D.target.value),disabled:!E,className:"w-full px-3 py-2 md:px-4 md:py-2.5 text-sm md:text-base border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white disabled:opacity-50"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs md:text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5 md:mb-2",children:"Tn ting Anh"}),i.jsx("input",{type:"text",value:r.store_name_en||"",onChange:D=>k("store_name_en",D.target.value),disabled:!E,className:"w-full px-3 py-2 md:px-4 md:py-2.5 text-sm md:text-base border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white disabled:opacity-50"})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-xs md:text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5 md:mb-2",children:"Slogan"}),i.jsx("input",{type:"text",value:r.slogan||"",onChange:D=>k("slogan",D.target.value),disabled:!E,placeholder:"Chm sc xe my chuyn nghip",className:"w-full px-3 py-2 md:px-4 md:py-2.5 text-sm md:text-base border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white disabled:opacity-50"})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-xs md:text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5 md:mb-2",children:"a ch"}),i.jsx("input",{type:"text",value:r.address||"",onChange:D=>k("address",D.target.value),disabled:!E,className:"w-full px-3 py-2 md:px-4 md:py-2.5 text-sm md:text-base border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white disabled:opacity-50"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs md:text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5 md:mb-2",children:"S in thoi"}),i.jsx("input",{type:"tel",value:r.phone||"",onChange:D=>k("phone",D.target.value),disabled:!E,className:"w-full px-3 py-2 md:px-4 md:py-2.5 text-sm md:text-base border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white disabled:opacity-50"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs md:text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5 md:mb-2",children:"Email"}),i.jsx("input",{type:"email",value:r.email||"",onChange:D=>k("email",D.target.value),disabled:!E,className:"w-full px-3 py-2 md:px-4 md:py-2.5 text-sm md:text-base border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white disabled:opacity-50"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs md:text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5 md:mb-2",children:"Website"}),i.jsx("input",{type:"url",value:r.website||"",onChange:D=>k("website",D.target.value),disabled:!E,placeholder:"https://...",className:"w-full px-3 py-2 md:px-4 md:py-2.5 text-sm md:text-base border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white disabled:opacity-50"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs md:text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5 md:mb-2",children:"M s thu"}),i.jsx("input",{type:"text",value:r.tax_code||"",onChange:D=>k("tax_code",D.target.value),disabled:!E,className:"w-full px-3 py-2 md:px-4 md:py-2.5 text-sm md:text-base border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white disabled:opacity-50"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs md:text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5 md:mb-2",children:"Gi m ca"}),i.jsx("input",{type:"text",value:r.business_hours||"",onChange:D=>k("business_hours",D.target.value),disabled:!E,placeholder:"8:00 - 18:00 (T2-T7)",className:"w-full px-3 py-2 md:px-4 md:py-2.5 text-sm md:text-base border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white disabled:opacity-50"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs md:text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5 md:mb-2",children:"Nm thnh lp"}),i.jsx("input",{type:"number",value:r.established_year||"",onChange:D=>k("established_year",Number(D.target.value)),disabled:!E,placeholder:"2020",className:"w-full px-3 py-2 md:px-4 md:py-2.5 text-sm md:text-base border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white disabled:opacity-50"})]})]})]}),y==="branding"&&i.jsxs("div",{className:"space-y-4 md:space-y-6",children:[i.jsx("h2",{className:"text-base md:text-lg font-semibold text-slate-900 dark:text-white mb-3 md:mb-4",children:"Thng hiu & Hnh nh"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs md:text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5 md:mb-2",children:"Logo ca hng"}),i.jsxs("div",{className:"flex items-start gap-4",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("label",{className:`flex items-center justify-center gap-2 px-4 py-3 border-2 border-dashed border-slate-300 dark:border-slate-600 rounded-lg hover:border-blue-500 dark:hover:border-blue-400 transition-colors ${E?"cursor-pointer":"opacity-50 cursor-not-allowed"}`,children:[i.jsx(Eee,{className:"w-4 h-4 md:w-5 md:h-5 text-slate-500"}),i.jsx("span",{className:"text-xs md:text-sm text-slate-600 dark:text-slate-400",children:c?"ang ti ln...":"Chn nh logo"}),i.jsx("input",{type:"file",accept:"image/*",onChange:S,disabled:!E||c,className:"hidden"})]}),i.jsx("p",{className:"text-[10px] md:text-xs text-slate-500 dark:text-slate-400 mt-1",children:"Kch thc ti a: 2MB. nh dng: JPG, PNG, SVG"})]}),r.logo_url&&i.jsx("div",{className:"w-24 h-24 md:w-32 md:h-32 border-2 border-slate-300 dark:border-slate-600 rounded-lg overflow-hidden bg-white dark:bg-slate-700 flex items-center justify-center",children:i.jsx("img",{src:r.logo_url,alt:"Store Logo",className:"max-w-full max-h-full object-contain"})})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs md:text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5 md:mb-2",children:"Hoc nhp URL Logo"}),i.jsx("input",{type:"url",value:r.logo_url||"",onChange:D=>k("logo_url",D.target.value),disabled:!E,placeholder:"https://...",className:"w-full px-3 py-2 md:px-4 md:py-2.5 text-sm md:text-base border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white disabled:opacity-50"})]})]}),i.jsxs("div",{className:"space-y-4 pt-4 md:pt-6 border-t border-slate-200 dark:border-slate-700",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs md:text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5 md:mb-2",children:"M QR ngn hng"}),i.jsxs("div",{className:"flex items-start gap-4",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("label",{className:`flex items-center justify-center gap-2 px-4 py-3 border-2 border-dashed border-slate-300 dark:border-slate-600 rounded-lg hover:border-blue-500 dark:hover:border-blue-400 transition-colors ${E?"cursor-pointer":"opacity-50 cursor-not-allowed"}`,children:[i.jsx(fee,{className:"w-4 h-4 md:w-5 md:h-5 text-slate-500"}),i.jsx("span",{className:"text-xs md:text-sm text-slate-600 dark:text-slate-400",children:f?"ang ti ln...":"Chn nh QR Code"}),i.jsx("input",{type:"file",accept:"image/*",onChange:O,disabled:!E||f,className:"hidden"})]}),i.jsx("p",{className:"text-[10px] md:text-xs text-slate-500 dark:text-slate-400 mt-1",children:"Kch thc ti a: 2MB. nh dng: JPG, PNG"})]}),r.bank_qr_url&&i.jsx("div",{className:"w-24 h-24 md:w-32 md:h-32 border-2 border-slate-300 dark:border-slate-600 rounded-lg overflow-hidden bg-white dark:bg-slate-700 flex items-center justify-center",children:i.jsx("img",{src:r.bank_qr_url,alt:"Bank QR Code",className:"max-w-full max-h-full object-contain"})})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs md:text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5 md:mb-2",children:"Hoc nhp URL m QR"}),i.jsx("input",{type:"url",value:r.bank_qr_url||"",onChange:D=>k("bank_qr_url",D.target.value),disabled:!E,placeholder:"https://...",className:"w-full px-3 py-2 md:px-4 md:py-2.5 text-sm md:text-base border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white disabled:opacity-50"})]})]}),i.jsx("div",{className:"pt-4 md:pt-6 border-t border-slate-200 dark:border-slate-700",children:i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs md:text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5 md:mb-2",children:"Mu ch o"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{type:"color",value:r.primary_color||"#3B82F6",onChange:D=>k("primary_color",D.target.value),disabled:!E,className:"w-12 h-10 md:w-16 md:h-12 rounded border border-slate-300 dark:border-slate-600 cursor-pointer disabled:opacity-50"}),i.jsx("input",{type:"text",value:r.primary_color||"#3B82F6",onChange:D=>k("primary_color",D.target.value),disabled:!E,placeholder:"#3B82F6",className:"flex-1 px-3 py-2 md:px-4 md:py-2.5 text-sm md:text-base border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white disabled:opacity-50"})]}),i.jsx("p",{className:"text-[10px] md:text-xs text-slate-500 dark:text-slate-400 mt-1",children:"Mu ny s c s dng trong giao din h thng"})]})})]}),y==="banking"&&i.jsxs("div",{className:"space-y-4 md:space-y-6",children:[i.jsx("h2",{className:"text-base md:text-lg font-semibold text-slate-900 dark:text-white mb-3 md:mb-4",children:"Thng tin ngn hng"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-xs md:text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5 md:mb-2",children:"Tn ngn hng *"}),i.jsx("input",{type:"text",value:r.bank_name||"",onChange:D=>k("bank_name",D.target.value),disabled:!E,placeholder:"VD: Vietcombank, Techcombank, MB Bank...",className:"w-full px-3 py-2 md:px-4 md:py-2.5 text-sm md:text-base border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white disabled:opacity-50"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs md:text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5 md:mb-2",children:"S ti khon *"}),i.jsx("input",{type:"text",value:r.bank_account_number||"",onChange:D=>k("bank_account_number",D.target.value),disabled:!E,className:"w-full px-3 py-2 md:px-4 md:py-2.5 text-sm md:text-base border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white disabled:opacity-50"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs md:text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5 md:mb-2",children:"Ch ti khon *"}),i.jsx("input",{type:"text",value:r.bank_account_holder||"",onChange:D=>k("bank_account_holder",D.target.value),disabled:!E,placeholder:"VD: NGUYEN VAN A",className:"w-full px-3 py-2 md:px-4 md:py-2.5 text-sm md:text-base border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white disabled:opacity-50"})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-xs md:text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5 md:mb-2",children:"Chi nhnh"}),i.jsx("input",{type:"text",value:r.bank_branch||"",onChange:D=>k("bank_branch",D.target.value),disabled:!E,placeholder:"VD: Chi nhnh Qun 1, TP.HCM",className:"w-full px-3 py-2 md:px-4 md:py-2.5 text-sm md:text-base border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white disabled:opacity-50"})]})]}),i.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-3 md:p-4",children:i.jsxs("div",{className:"flex gap-2 md:gap-3",children:[i.jsx(t7,{className:"w-4 h-4 md:w-5 md:h-5 text-blue-600 dark:text-blue-400 flex-shrink-0 mt-0.5"}),i.jsxs("div",{className:"text-xs md:text-sm text-blue-800 dark:text-blue-300",children:[i.jsx("p",{className:"font-medium mb-1",children:"Thng tin ngn hng"}),i.jsx("p",{children:"Thng tin ny s c hin th trn cc ha n, bin nhn v phiu dch v. Khch hng c th qut m QR hoc chuyn khon theo thng tin ny."})]})]})})]}),y==="invoice"&&i.jsxs("div",{className:"space-y-4 md:space-y-6",children:[i.jsx("h2",{className:"text-base md:text-lg font-semibold text-slate-900 dark:text-white mb-3 md:mb-4",children:"Cu hnh ha n"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 md:gap-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs md:text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5 md:mb-2",children:"M ha n bn"}),i.jsx("input",{type:"text",value:r.invoice_prefix||"HD",onChange:D=>k("invoice_prefix",D.target.value),disabled:!E,placeholder:"HD",className:"w-full px-3 py-2 md:px-4 md:py-2.5 text-sm md:text-base border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white disabled:opacity-50"}),i.jsx("p",{className:"text-[10px] md:text-xs text-slate-500 dark:text-slate-400 mt-1",children:"VD: HD-001, HD-002"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs md:text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5 md:mb-2",children:"M phiu nhp"}),i.jsx("input",{type:"text",value:r.receipt_prefix||"PN",onChange:D=>k("receipt_prefix",D.target.value),disabled:!E,placeholder:"PN",className:"w-full px-3 py-2 md:px-4 md:py-2.5 text-sm md:text-base border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white disabled:opacity-50"}),i.jsx("p",{className:"text-[10px] md:text-xs text-slate-500 dark:text-slate-400 mt-1",children:"VD: PN-001, PN-002"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs md:text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5 md:mb-2",children:"M phiu sa cha"}),i.jsx("input",{type:"text",value:r.work_order_prefix||"SC",onChange:D=>k("work_order_prefix",D.target.value),disabled:!E,placeholder:"SC",className:"w-full px-3 py-2 md:px-4 md:py-2.5 text-sm md:text-base border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white disabled:opacity-50"}),i.jsx("p",{className:"text-[10px] md:text-xs text-slate-500 dark:text-slate-400 mt-1",children:"VD: SC-001, SC-002"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs md:text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5 md:mb-2",children:"Ghi ch cui ha n"}),i.jsx("textarea",{rows:3,value:r.invoice_footer_note||"",onChange:D=>k("invoice_footer_note",D.target.value),disabled:!E,placeholder:"Cm n qu khch  tin tng v s dng dch v!",className:"w-full px-3 py-2 md:px-4 md:py-2.5 text-sm md:text-base border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white disabled:opacity-50"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 md:gap-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs md:text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5 md:mb-2",children:"nh dng ngy"}),i.jsxs("select",{value:r.date_format||"DD/MM/YYYY",onChange:D=>k("date_format",D.target.value),disabled:!E,className:"w-full px-3 py-2 md:px-4 md:py-2.5 text-sm md:text-base border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white disabled:opacity-50",children:[i.jsx("option",{value:"DD/MM/YYYY",children:"DD/MM/YYYY"}),i.jsx("option",{value:"MM/DD/YYYY",children:"MM/DD/YYYY"}),i.jsx("option",{value:"YYYY-MM-DD",children:"YYYY-MM-DD"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs md:text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5 md:mb-2",children:"n v tin t"}),i.jsxs("select",{value:r.currency||"VND",onChange:D=>k("currency",D.target.value),disabled:!E,className:"w-full px-3 py-2 md:px-4 md:py-2.5 text-sm md:text-base border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white disabled:opacity-50",children:[i.jsx("option",{value:"VND",children:"VND - Vit Nam ng"}),i.jsx("option",{value:"USD",children:"USD - US Dollar"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs md:text-sm font-medium text-slate-700 dark:text-slate-300 mb-1.5 md:mb-2",children:"Mi gi"}),i.jsxs("select",{value:r.timezone||"Asia/Ho_Chi_Minh",onChange:D=>k("timezone",D.target.value),disabled:!E,className:"w-full px-3 py-2 md:px-4 md:py-2.5 text-sm md:text-base border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white disabled:opacity-50",children:[i.jsx("option",{value:"Asia/Ho_Chi_Minh",children:"H Ch Minh (GMT+7)"}),i.jsx("option",{value:"Asia/Bangkok",children:"Bangkok (GMT+7)"}),i.jsx("option",{value:"Asia/Singapore",children:"Singapore (GMT+8)"})]})]})]})]})]}),E&&i.jsx("div",{className:"flex justify-end",children:i.jsx("button",{onClick:w,disabled:l,className:"w-full sm:w-auto px-4 py-2 md:px-6 md:py-2.5 bg-blue-600 hover:bg-blue-700 disabled:bg-slate-400 text-white rounded-lg text-sm md:text-base font-semibold transition-colors inline-flex items-center justify-center gap-2","aria-label":"Lu tt c thay i",children:l?i.jsx("span",{children:"ang lu..."}):i.jsxs(i.Fragment,{children:[i.jsx(C_,{className:"w-4 h-4 md:w-5 md:h-5","aria-hidden":"true"}),i.jsx("span",{children:"Lu tt c thay i"})]})})})]})},tTe=()=>i.jsx(nbe,{}),rTe=()=>i.jsx(rje,{}),nTe=()=>i.jsx(fje,{}),aTe=()=>i.jsx(pje,{currentBranchId:Ua().currentBranchId}),sTe=()=>i.jsx(vje,{}),iTe=()=>i.jsx(Nje,{}),lTe=()=>i.jsx(HV,{}),oTe=()=>i.jsx($V,{}),cTe=()=>i.jsx(tCe,{}),dTe=()=>i.jsx(VV,{}),uTe=()=>i.jsx(xCe,{}),hTe=()=>i.jsx(pCe,{}),fTe=()=>i.jsx(DV,{}),mTe=()=>i.jsx(MV,{}),xTe=()=>i.jsx(X8e,{}),pTe=()=>i.jsx(eTe,{});function gTe(){var N,w,k,S,O,E,D,H,W,R,z,U,Z;const[e,t]=T.useState(!1),[r,n]=T.useState(!1),{theme:a,toggleTheme:s}=HJ(),{profile:l,user:o,signOut:c}=Ic(),d=l==null?void 0:l.role,f=((N=l==null?void 0:l.full_name)==null?void 0:N.trim())||((k=(w=o==null?void 0:o.user_metadata)==null?void 0:w.full_name)==null?void 0:k.trim())||((O=(S=o==null?void 0:o.user_metadata)==null?void 0:S.name)==null?void 0:O.trim())||((D=(E=o==null?void 0:o.user_metadata)==null?void 0:E.display_name)==null?void 0:D.trim()),p=f&&f.length>0?f:(l==null?void 0:l.email)||(o==null?void 0:o.email)||"Ti khon",y=((H=f==null?void 0:f.charAt(0))==null?void 0:H.toUpperCase())||((R=(W=l==null?void 0:l.email)==null?void 0:W.charAt(0))==null?void 0:R.toUpperCase())||((U=(z=o==null?void 0:o.email)==null?void 0:z.charAt(0))==null?void 0:U.toUpperCase())||"N",g={viewFinance:d==="owner"||d==="manager",viewAnalytics:d==="owner"||d==="manager",viewDebt:d==="owner"||d==="manager",viewEmployees:d==="owner"||d==="manager",viewSettings:d==="owner"||d==="manager"};return i.jsx("nav",{className:"bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 sticky top-0 z-50",children:i.jsxs("div",{className:"max-w-[1600px] mx-auto px-2 md:px-6 py-2 md:py-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2 md:gap-4",children:[i.jsx("button",{onClick:()=>n(!r),className:"md:hidden p-2 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg transition","aria-label":"Menu",children:i.jsx(yee,{className:"w-6 h-6 text-slate-600 dark:text-slate-300"})}),i.jsxs("div",{className:"relative",children:[i.jsxs("button",{onClick:()=>t(!e),className:"group flex items-center gap-3 focus:outline-none","aria-label":"M ci t v ti khon",children:[i.jsx("img",{src:"/logo-smartcare.png",alt:"SmartCare Logo",className:"w-9 h-9 md:w-14 md:h-14 rounded-xl shadow-sm ring-1 ring-slate-200 dark:ring-slate-700 group-hover:shadow-md group-hover:ring-emerald-400/60 dark:group-hover:ring-emerald-500/60 transition"}),i.jsx("span",{className:"font-bold text-lg md:text-xl tracking-tight bg-gradient-to-r from-emerald-600 to-blue-600 text-transparent bg-clip-text dark:from-emerald-400 dark:to-blue-400 hidden lg:inline",children:"Nhn Lm SmartCare"})]}),e&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>t(!1)}),i.jsxs("div",{className:"absolute top-full left-0 mt-2 w-80 bg-white dark:bg-slate-800 rounded-xl shadow-xl border border-slate-200 dark:border-slate-700 py-2 z-50",children:[i.jsxs("div",{className:"px-5 py-4 border-b border-slate-200 dark:border-slate-700 flex items-center justify-between",children:[i.jsx("p",{className:"text-sm font-semibold text-slate-700 dark:text-slate-200",children:"Ci t & ti khon"}),i.jsx("button",{onClick:()=>t(!1),className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-300 transition","aria-label":"ng",children:i.jsx(_0,{className:"w-4 h-4"})})]}),l&&i.jsxs("div",{className:"px-5 py-4 border-b border-slate-200 dark:border-slate-700 flex items-center gap-3",children:[i.jsx("div",{className:"w-9 h-9 bg-blue-600 rounded-full flex items-center justify-center text-white font-semibold",children:y}),i.jsxs("div",{className:"min-w-0",children:[i.jsx("div",{className:"text-sm font-medium text-slate-900 dark:text-white truncate",children:p}),i.jsxs("div",{className:"text-xs text-slate-500 dark:text-slate-400 truncate flex items-center gap-1",children:[l.role==="owner"&&i.jsx(ZT,{className:"w-3.5 h-3.5 text-yellow-500"}),l.role==="manager"&&i.jsx(u7,{className:"w-3.5 h-3.5 text-indigo-500"}),l.role==="staff"&&i.jsx(h7,{className:"w-3.5 h-3.5 text-slate-500"}),i.jsx("span",{children:l.role==="owner"?"Ch ca hng":l.role==="manager"?"Qun l":"Nhn vin"})]})]})]}),i.jsxs("button",{onClick:()=>{s(),t(!1)},className:"w-full px-4 py-2 text-left hover:bg-slate-100 dark:hover:bg-slate-700 flex items-center justify-between text-sm text-slate-700 dark:text-slate-200",children:[i.jsxs("span",{className:"flex items-center gap-2",children:[a==="dark"?i.jsx(a7,{className:"w-4 h-4"}):i.jsx(c7,{className:"w-4 h-4"}),i.jsxs("span",{children:["Ch  ",a==="dark"?"ti":"sng"]})]}),i.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:a==="dark"?"Chuyn sang sng":"Chuyn sang ti"})]}),g.viewSettings&&i.jsx(Bu,{to:"/settings",onClick:()=>t(!1),className:"block w-full px-4 py-2 text-left hover:bg-slate-100 dark:hover:bg-slate-700 text-sm text-slate-700 dark:text-slate-200",children:i.jsxs("span",{className:"flex items-center gap-2",children:[i.jsx(Gg,{className:"w-4 h-4"}),i.jsx("span",{children:"Ci t h thng"})]})}),l&&i.jsx("button",{onClick:async()=>{try{await c()}finally{t(!1)}},className:"w-full px-4 py-2 text-left text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20",children:i.jsxs("span",{className:"flex items-center gap-2",children:[i.jsx(n7,{className:"w-4 h-4"}),i.jsx("span",{children:"ng xut"})]})})]})]})]})]}),i.jsxs("div",{className:"hidden md:flex items-center gap-2",children:[i.jsx(ku,{to:"/dashboard",colorKey:"blue",icon:i.jsx(j_,{className:"w-5 h-5"}),label:"Tng quan"}),i.jsx(ku,{to:"/service",colorKey:"violet",icon:i.jsx(Cm,{className:"w-5 h-5"}),label:"Sa cha"}),i.jsx(ku,{to:"/sales",colorKey:"emerald",icon:i.jsx(Qf,{className:"w-5 h-5"}),label:"Bn hng"}),i.jsx(ku,{to:"/inventory",colorKey:"amber",icon:i.jsx(gl,{className:"w-5 h-5"}),label:"Qun l kho"}),i.jsx(ku,{to:"/customers",colorKey:"cyan",icon:i.jsx(tf,{className:"w-5 h-5"}),label:"Khch hng"}),g.viewEmployees&&i.jsx(ku,{to:"/employees",colorKey:"indigo",icon:i.jsx(jm,{className:"w-5 h-5"}),label:"Nhn vin"}),g.viewFinance&&i.jsx(ku,{to:"/finance",colorKey:"rose",icon:i.jsx(Wg,{className:"w-5 h-5"}),label:"Ti chnh"}),g.viewDebt&&i.jsx(ku,{to:"/debt",colorKey:"orange",icon:i.jsx(Vg,{className:"w-5 h-5"}),label:"Cng n"}),g.viewAnalytics&&i.jsx(ku,{to:"/analytics",colorKey:"teal",icon:i.jsx($g,{className:"w-5 h-5"}),label:"Phn tch"}),i.jsx(ku,{to:"/reports",colorKey:"fuchsia",icon:i.jsx(dd,{className:"w-5 h-5"}),label:"Bo co"})]}),i.jsx("div",{className:"flex items-center",children:i.jsx(Bu,{to:"/dashboard",className:"p-2 text-slate-500 hover:text-blue-600 dark:text-slate-400 dark:hover:text-blue-400 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg transition-colors",title:"Trang ch",children:i.jsx(j_,{className:"w-6 h-6"})})})]}),r&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 md:hidden",onClick:()=>n(!1)}),i.jsxs("div",{className:"fixed inset-y-0 left-0 w-80 bg-gradient-to-br from-white to-slate-50 dark:from-slate-800 dark:to-slate-900 z-50 shadow-2xl md:hidden overflow-y-auto animate-slide-in-left",children:[i.jsxs("div",{className:"relative p-6 pb-8 bg-gradient-to-br from-blue-600 to-violet-600 dark:from-blue-700 dark:to-violet-800",children:[i.jsx("button",{onClick:()=>n(!1),className:"absolute top-4 right-4 p-2 hover:bg-white/10 rounded-lg transition text-white",children:i.jsx(_0,{className:"w-5 h-5"})}),l&&i.jsxs("div",{className:"flex items-center gap-3 text-white mt-2",children:[i.jsx("div",{className:"w-14 h-14 bg-white/20 backdrop-blur rounded-full flex items-center justify-center text-xl font-bold border-2 border-white/30",children:((Z=l.full_name)==null?void 0:Z[0])||l.email[0].toUpperCase()}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("div",{className:"font-semibold text-base truncate",children:l.full_name||l.email}),i.jsxs("div",{className:"text-xs text-white/80 flex items-center gap-1 mt-0.5",children:[l.role==="owner"&&i.jsx(ZT,{className:"w-3 h-3"}),l.role==="manager"&&i.jsx(u7,{className:"w-3 h-3"}),l.role==="staff"&&i.jsx(h7,{className:"w-3 h-3"}),i.jsx("span",{children:l.role==="owner"?"Ch ca hng":l.role==="manager"?"Qun l":"Nhn vin"})]})]})]})]}),i.jsxs("div",{className:"p-4 space-y-6",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider px-3 mb-2",children:"Qun l"}),i.jsxs("div",{className:"space-y-1",children:[g.viewEmployees&&i.jsx(Jx,{to:"/employees",icon:i.jsx(jm,{className:"w-5 h-5"}),label:"Nhn vin",color:"indigo",onClick:()=>n(!1)}),g.viewDebt&&i.jsx(Jx,{to:"/debt",icon:i.jsx(Vg,{className:"w-5 h-5"}),label:"Cng n",color:"orange",onClick:()=>n(!1)})]})]}),(g.viewFinance||g.viewAnalytics)&&i.jsxs("div",{children:[i.jsx("div",{className:"text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider px-3 mb-2",children:"Ti chnh & Bo co"}),i.jsxs("div",{className:"space-y-1",children:[g.viewFinance&&i.jsx(Jx,{to:"/finance",icon:i.jsx(Wg,{className:"w-5 h-5"}),label:"Ti chnh",color:"rose",onClick:()=>n(!1)}),g.viewAnalytics&&i.jsx(Jx,{to:"/analytics",icon:i.jsx($g,{className:"w-5 h-5"}),label:"Phn tch",color:"teal",onClick:()=>n(!1)}),i.jsx(Jx,{to:"/reports",icon:i.jsx(dd,{className:"w-5 h-5"}),label:"Bo co",color:"fuchsia",onClick:()=>n(!1)})]})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider px-3 mb-2",children:"H thng"}),i.jsxs("div",{className:"space-y-1",children:[i.jsxs("button",{onClick:()=>{s(),n(!1)},className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl hover:bg-slate-100 dark:hover:bg-slate-700/50 transition text-slate-700 dark:text-slate-300",children:[a==="dark"?i.jsx(a7,{className:"w-5 h-5"}):i.jsx(c7,{className:"w-5 h-5"}),i.jsxs("span",{className:"font-medium",children:["Ch  ",a==="dark"?"ti":"sng"]})]}),g.viewSettings&&i.jsx(Jx,{to:"/settings",icon:i.jsx(Gg,{className:"w-5 h-5"}),label:"Ci t",color:"slate",onClick:()=>n(!1)})]})]})]}),i.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-4 bg-white dark:bg-slate-800 border-t border-slate-200 dark:border-slate-700",children:i.jsxs("button",{onClick:async()=>{try{await c()}finally{n(!1)}},className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-red-500 hover:bg-red-600 text-white rounded-xl font-medium transition shadow-lg shadow-red-500/20",children:[i.jsx(n7,{className:"w-5 h-5"}),i.jsx("span",{children:"ng xut"})]})})]})]})]})})}const km={blue:{text:"text-blue-600 dark:text-blue-400",bg:"bg-blue-50 dark:bg-blue-900/30",hoverBg:"hover:bg-blue-50 dark:hover:bg-blue-900/20"},violet:{text:"text-violet-600 dark:text-violet-400",bg:"bg-violet-50 dark:bg-violet-900/30",hoverBg:"hover:bg-violet-50 dark:hover:bg-violet-900/20"},emerald:{text:"text-emerald-600 dark:text-emerald-400",bg:"bg-emerald-50 dark:bg-emerald-900/30",hoverBg:"hover:bg-emerald-50 dark:hover:bg-emerald-900/20"},amber:{text:"text-amber-600 dark:text-amber-400",bg:"bg-amber-50 dark:bg-amber-900/30",hoverBg:"hover:bg-amber-50 dark:hover:bg-amber-900/20"},cyan:{text:"text-cyan-600 dark:text-cyan-400",bg:"bg-cyan-50 dark:bg-cyan-900/30",hoverBg:"hover:bg-cyan-50 dark:hover:bg-cyan-900/20"},indigo:{text:"text-indigo-600 dark:text-indigo-400",bg:"bg-indigo-50 dark:bg-indigo-900/30",hoverBg:"hover:bg-indigo-50 dark:hover:bg-indigo-900/20"},rose:{text:"text-rose-600 dark:text-rose-400",bg:"bg-rose-50 dark:bg-rose-900/30",hoverBg:"hover:bg-rose-50 dark:hover:bg-rose-900/20"},orange:{text:"text-orange-600 dark:text-orange-400",bg:"bg-orange-50 dark:bg-orange-900/30",hoverBg:"hover:bg-orange-50 dark:hover:bg-orange-900/20"},teal:{text:"text-teal-600 dark:text-teal-400",bg:"bg-teal-50 dark:bg-teal-900/30",hoverBg:"hover:bg-teal-50 dark:hover:bg-teal-900/20"},fuchsia:{text:"text-fuchsia-600 dark:text-fuchsia-400",bg:"bg-fuchsia-50 dark:bg-fuchsia-900/30",hoverBg:"hover:bg-fuchsia-50 dark:hover:bg-fuchsia-900/20"},slate:{text:"text-slate-600 dark:text-slate-400",bg:"bg-slate-50 dark:bg-slate-900/30",hoverBg:"hover:bg-slate-50 dark:hover:bg-slate-900/20"}},Jx=({to:e,icon:t,label:r,color:n,onClick:a})=>{const l=bd().pathname===e,o=km[n]||km.slate;return i.jsxs(Bu,{to:e,onClick:a,className:`flex items-center gap-3 px-4 py-3 rounded-xl transition ${l?`${o.bg} ${o.text} shadow-sm`:"text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700/50"}`,children:[i.jsx("div",{className:`${l?o.text:""}`,children:t}),i.jsx("span",{className:"font-medium text-sm",children:r})]})},ku=({to:e,icon:t,label:r,colorKey:n})=>{const s=bd().pathname===e;return i.jsxs(Bu,{to:e,className:`flex flex-col items-center gap-1 px-4 py-2 rounded-lg transition ${s?`${km[n].bg} ${km[n].text}`:`text-slate-600 dark:text-slate-300 ${km[n].hoverBg}`}`,children:[i.jsx("span",{className:"flex items-center justify-center",children:t}),i.jsx("span",{className:"text-xs font-medium whitespace-nowrap",children:r})]})},bTe=()=>{const e=bd();if(e.pathname==="/inventory")return null;const t=[{to:"/dashboard",icon:i.jsx(j_,{className:"w-6 h-6"}),label:"Tng quan",color:"blue"},{to:"/service",icon:i.jsx(Cm,{className:"w-6 h-6"}),label:"Sa cha",color:"violet"},{to:"/sales",icon:i.jsx(Qf,{className:"w-6 h-6"}),label:"Bn hng",color:"emerald"},{to:"/inventory",icon:i.jsx(gl,{className:"w-6 h-6"}),label:"Kho",color:"amber"},{to:"/customers",icon:i.jsx(tf,{className:"w-6 h-6"}),label:"Khch hng",color:"cyan"}];return i.jsxs("div",{className:"md:hidden fixed bottom-0 left-0 right-0 z-50 bg-white dark:bg-slate-800 border-t border-slate-200 dark:border-slate-700 safe-area-bottom",children:[i.jsx("div",{className:"absolute inset-0 bg-white/80 dark:bg-slate-800/80 backdrop-blur-lg -z-10"}),i.jsx("div",{className:"grid grid-cols-5 gap-1 px-2 py-1.5",children:t.map(r=>{const n=e.pathname===r.to,a=r.color;return i.jsxs(Bu,{to:r.to,className:`flex flex-col items-center gap-0.5 px-1 py-1 rounded-lg transition-all duration-200 ${n?`${km[a].bg} ${km[a].text}`:"text-slate-600 dark:text-slate-400 active:scale-95"}`,children:[i.jsx("div",{className:`transition-transform ${n?"scale-105":""}`,children:ua.cloneElement(r.icon,{className:"w-5 h-5"})}),i.jsx("span",{className:`text-[9px] font-medium truncate w-full text-center ${n?"font-semibold":""}`,children:r.label})]},r.to)})})]})};function vTe(){const[e,t]=T.useState(!1);return T.useEffect(()=>{t(!0)},[]),{ready:e}}const yTe=new oY({defaultOptions:{queries:{staleTime:120*1e3,gcTime:300*1e3,refetchOnWindowFocus:!1,refetchOnReconnect:"always",retry:2}}}),wTe=()=>{const t=bd().pathname==="/sales";return i.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 transition-colors pb-20 md:pb-0",children:[i.jsx(gTe,{}),i.jsx("main",{className:`max-w-[1600px] mx-auto ${t?"p-0":"p-0 md:p-6"}`,children:i.jsxs(qL,{children:[i.jsx(ai,{path:"/",element:i.jsx(zL,{to:"/dashboard",replace:!0})}),i.jsx(ai,{path:"/dashboard",element:i.jsx(Fge,{})}),i.jsx(ai,{path:"/sales",element:i.jsx(tTe,{})}),i.jsx(ai,{path:"/audit-logs",element:i.jsx(Nu,{requiredRoles:["owner"],children:i.jsx(Z8e,{})})}),i.jsx(ai,{path:"/inventory",element:i.jsx(rTe,{})}),i.jsx(ai,{path:"/categories",element:i.jsx(fTe,{})}),i.jsx(ai,{path:"/lookup",element:i.jsx(mTe,{})}),i.jsx(ai,{path:"/service",element:i.jsx(nTe,{})}),i.jsx(ai,{path:"/service-history",element:i.jsx(aTe,{})}),i.jsx(ai,{path:"/customers",element:i.jsx(sTe,{})}),i.jsx(ai,{path:"/debt",element:i.jsx(Nu,{requiredRoles:["owner","manager"],children:i.jsx(iTe,{})})}),i.jsx(ai,{path:"/cashbook",element:i.jsx(Nu,{requiredRoles:["owner","manager"],children:i.jsx(lTe,{})})}),i.jsx(ai,{path:"/loans",element:i.jsx(Nu,{requiredRoles:["owner","manager"],children:i.jsx(oTe,{})})}),i.jsx(ai,{path:"/payroll",element:i.jsx(Nu,{requiredRoles:["owner","manager"],children:i.jsx(dTe,{})})}),i.jsx(ai,{path:"/employees",element:i.jsx(Nu,{requiredRoles:["owner","manager"],children:i.jsx(hTe,{})})}),i.jsx(ai,{path:"/finance",element:i.jsx(Nu,{requiredRoles:["owner","manager"],children:i.jsx(cTe,{})})}),i.jsx(ai,{path:"/analytics",element:i.jsx(Nu,{requiredRoles:["owner","manager"],children:i.jsx(xTe,{})})}),i.jsx(ai,{path:"/reports",element:i.jsx(uTe,{})}),i.jsx(ai,{path:"/settings",element:i.jsx(Nu,{requiredRoles:["owner","manager"],children:i.jsx(pTe,{})})})]})}),i.jsx(bTe,{})]})};function kTe(){const{ready:e}=vTe();return e?i.jsx(cY,{client:yTe,children:i.jsx(qJ,{children:i.jsx(dF,{children:i.jsx(zJ,{children:i.jsx(TX,{children:i.jsxs(sZ,{children:[i.jsx(iZ,{}),i.jsxs(qL,{children:[i.jsx(ai,{path:"/login",element:i.jsx(VJ,{})}),i.jsx(ai,{path:"/*",element:i.jsx(Nu,{children:i.jsx(wTe,{})})})]}),i.jsx(cZ,{initialIsOpen:!1}),!1]})})})})})}):null}bG.createRoot(document.getElementById("root")).render(i.jsxs(ua.StrictMode,{children:[i.jsx(kTe,{}),i.jsx(aZ,{position:"top-right",autoClose:3e3,hideProgressBar:!1,newestOnTop:!0,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"colored"})]}));export{Xa as _,r2 as c,gd as g};
