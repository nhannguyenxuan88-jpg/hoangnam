import{c as g,u as R,V as U,ah as z,ai as I,aj as Q,r as l,j as e,ag as f,Q as y,i as b,ak as w,l as $,T as B,X as O,s as V}from"./index-m4uzAqzj.js";import X from"./PayrollManager-BEbxHq5W.js";import{P as p}from"./plus-BbBLi8cd.js";import{C as K}from"./clipboard-list-D0FH8I4t.js";import{H as C}from"./history-CeNG3jX3.js";import{P as G}from"./phone-CcoycPFk.js";import{S as J}from"./save-Dc8vo4jW.js";import"./Icons-KS4JGt5z.js";import"./usePaymentSourcesRepository-Dyik5kT6.js";/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=g("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S=g("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=g("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]),ie=()=>{const{employees:T,setEmployees:k}=R(),{data:c,isLoading:Z}=U(),{mutateAsync:E}=z(),{mutateAsync:L}=I(),{mutateAsync:D}=Q(),r=c||T;l.useEffect(()=>{c&&k(c)},[c,k]);const[n,P]=l.useState("list"),[A,h]=l.useState(!1),[o,j]=l.useState(null),[i,M]=l.useState(""),[a,s]=l.useState({name:"",phone:"",email:"",position:"",department:"",baseSalary:0,allowances:0,status:"active",startDate:new Date().toISOString().split("T")[0]}),v=l.useMemo(()=>r.filter(t=>{var d;return t.name.toLowerCase().includes(i.toLowerCase())||((d=t.phone)==null?void 0:d.toLowerCase().includes(i.toLowerCase()))||t.position.toLowerCase().includes(i.toLowerCase())}),[r,i]),H=async t=>{if(t.preventDefault(),!a.name||!a.position||!a.baseSalary){V.error("Vui lòng điền đầy đủ thông tin bắt buộc!");return}try{o?await L({id:o.id,updates:a}):await E(a),u()}catch{}},u=()=>{s({name:"",phone:"",email:"",position:"",department:"",baseSalary:0,allowances:0,status:"active",startDate:new Date().toISOString().split("T")[0]}),j(null),h(!1)},q=t=>{j(t),s(t),h(!0)},F=async t=>{if(confirm(`Bạn có chắc muốn xóa nhân viên "${t.name}" không?`))try{await D(t.id)}catch{}},m=l.useMemo(()=>{const t=r.filter(x=>x.status==="active").length,d=r.filter(x=>x.status==="active").reduce((x,N)=>x+N.baseSalary+(N.allowances||0),0);return{active:t,totalSalary:d,total:r.length}},[r]);return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h2",{className:"text-xl font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[e.jsx(f,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"}),"Quản lý nhân viên"]}),e.jsxs("button",{onClick:()=>h(!0),className:"px-4 py-2 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg text-sm font-medium shadow-md hover:shadow-xl hover:from-blue-700 hover:to-indigo-700 transition-all duration-200 flex items-center gap-1.5",children:[e.jsx(p,{className:"w-4 h-4"})," Thêm nhân viên"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg p-4 text-white shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-white/80 text-xs font-medium",children:"Tổng nhân viên"}),e.jsx(f,{className:"w-6 h-6"})]}),e.jsx("div",{className:"text-2xl font-bold",children:m.total}),e.jsxs("div",{className:"text-white/70 text-xs mt-1",children:[m.active," đang làm việc"]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-green-600 rounded-lg p-4 text-white shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-white/80 text-xs font-medium",children:"Đang hoạt động"}),e.jsx(Y,{className:"w-6 h-6"})]}),e.jsx("div",{className:"text-2xl font-bold",children:m.active}),e.jsx("div",{className:"text-white/70 text-xs mt-1",children:"Nhân viên active"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-lg p-4 text-white shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-white/80 text-xs font-medium",children:"Tổng lương tháng"}),e.jsx(y,{className:"w-6 h-6"})]}),e.jsx("div",{className:"text-xl font-bold",children:b(m.totalSalary)}),e.jsx("div",{className:"text-white/70 text-xs mt-1",children:"Ước tính"})]})]}),e.jsx("div",{className:"flex gap-1 border-b border-slate-200 dark:border-slate-700",children:[{key:"list",label:"Danh sách",icon:e.jsx(K,{className:"w-3.5 h-3.5"})},{key:"attendance",label:"Chấm công",icon:e.jsx(w,{className:"w-3.5 h-3.5"})},{key:"payroll",label:"Quản lý lương",icon:e.jsx(y,{className:"w-3.5 h-3.5"})},{key:"history",label:"Lịch sử",icon:e.jsx(C,{className:"w-3.5 h-3.5"})}].map(t=>e.jsx("button",{onClick:()=>P(t.key),className:`px-4 py-2 text-sm font-medium transition-all ${n===t.key?"text-blue-600 dark:text-blue-400 border-b-2 border-blue-600 dark:border-blue-400":"text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-slate-200"}`,children:e.jsxs("span",{className:"inline-flex items-center gap-1",children:[t.icon,t.label]})},t.key))}),n==="list"&&e.jsx("div",{className:"flex gap-4",children:e.jsx("input",{type:"text",placeholder:"Tìm kiếm nhân viên (tên, SĐT, chức vụ)...",value:i,onChange:t=>M(t.target.value),className:"flex-1 px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500"})}),n==="list"&&e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-100 dark:bg-slate-700/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider",children:"Nhân viên"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider",children:"Chức vụ"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider",children:"Phòng ban"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider",children:"Lương CB"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider",children:"Phụ cấp"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider",children:"Ngày vào"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider",children:"Trạng thái"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider",children:"Thao tác"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:v.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:8,className:"px-6 py-8 text-center text-slate-500 dark:text-slate-400",children:"Không tìm thấy nhân viên nào"})}):v.map(t=>e.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-slate-900 dark:text-white",children:t.name}),t.phone&&e.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:e.jsxs("span",{className:"inline-flex items-center gap-1",children:[e.jsx(G,{className:"w-3 h-3"})," ",t.phone]})}),t.email&&e.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:e.jsxs("span",{className:"inline-flex items-center gap-1",children:[e.jsx(W,{className:"w-3 h-3"})," ",t.email]})})]})}),e.jsx("td",{className:"px-6 py-4 text-slate-700 dark:text-slate-300",children:t.position}),e.jsx("td",{className:"px-6 py-4 text-slate-700 dark:text-slate-300",children:t.department||"-"}),e.jsx("td",{className:"px-6 py-4 font-medium text-slate-900 dark:text-white",children:b(t.baseSalary)}),e.jsx("td",{className:"px-6 py-4 text-slate-700 dark:text-slate-300",children:b(t.allowances||0)}),e.jsx("td",{className:"px-6 py-4 text-slate-700 dark:text-slate-300",children:$(t.startDate)}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-2.5 py-1 text-xs font-medium rounded-full ${t.status==="active"?"bg-emerald-50 text-emerald-700 dark:bg-emerald-950/40 dark:text-emerald-400/80":t.status==="inactive"?"bg-amber-50 text-amber-700 dark:bg-amber-950/40 dark:text-amber-400/80":"bg-red-50 text-red-700 dark:bg-red-950/40 dark:text-red-400/80"}`,children:t.status==="active"?"Hoạt động":t.status==="inactive"?"Tạm nghỉ":"Nghỉ việc"})}),e.jsxs("td",{className:"px-6 py-4 text-right space-x-3",children:[e.jsxs("button",{onClick:()=>q(t),className:"inline-flex items-center gap-1 text-blue-600/80 dark:text-blue-400/70 hover:text-blue-700 dark:hover:text-blue-300 font-medium text-sm transition-colors",children:[e.jsx(S,{className:"w-4 h-4"})," Sửa"]}),e.jsxs("button",{onClick:()=>F(t),className:"inline-flex items-center gap-1 text-red-600/80 dark:text-red-400/70 hover:text-red-700 dark:hover:text-red-300 font-medium text-sm transition-colors",children:[e.jsx(B,{className:"w-4 h-4"})," Xóa"]})]})]},t.id))})]})})}),n==="attendance"&&e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-8 text-center",children:[e.jsx(w,{className:"w-16 h-16 mb-4 text-slate-400"}),e.jsx("h3",{className:"text-xl font-semibold text-slate-900 dark:text-white mb-2",children:"Chức năng chấm công"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Tính năng quản lý chấm công đang được phát triển..."})]}),n==="payroll"&&e.jsx(X,{}),n==="history"&&e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 p-8 text-center",children:[e.jsx(C,{className:"w-16 h-16 mb-4 text-slate-400"}),e.jsx("h3",{className:"text-xl font-semibold text-slate-900 dark:text-white mb-2",children:"Lịch sử làm việc"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Tính năng xem lịch sử làm việc đang được phát triển..."})]}),A&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 px-6 py-4 flex items-center justify-between",children:[e.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white",children:o?e.jsxs("span",{className:"inline-flex items-center gap-2",children:[e.jsx(S,{className:"w-5 h-5"})," Sửa nhân viên"]}):e.jsxs("span",{className:"inline-flex items-center gap-2",children:[e.jsx(p,{className:"w-5 h-5"})," Thêm nhân viên mới"]})}),e.jsx("button",{onClick:u,className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-300 text-2xl",children:"×"})]}),e.jsxs("form",{onSubmit:H,className:"p-6 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:["Họ tên ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:a.name,onChange:t=>s({...a,name:t.target.value}),className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Số điện thoại"}),e.jsx("input",{type:"tel",value:a.phone,onChange:t=>s({...a,phone:t.target.value}),className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Email"}),e.jsx("input",{type:"email",value:a.email,onChange:t=>s({...a,email:t.target.value}),className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:["Chức vụ ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:a.position,onChange:t=>s({...a,position:t.target.value}),className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Phòng ban"}),e.jsx("input",{type:"text",value:a.department,onChange:t=>s({...a,department:t.target.value}),className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:["Lương cơ bản ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",value:a.baseSalary,onChange:t=>s({...a,baseSalary:Number(t.target.value)}),className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Phụ cấp"}),e.jsx("input",{type:"number",value:a.allowances,onChange:t=>s({...a,allowances:Number(t.target.value)}),className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:["Ngày vào làm ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"date",value:a.startDate,onChange:t=>s({...a,startDate:t.target.value}),className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Trạng thái"}),e.jsxs("select",{value:a.status,onChange:t=>s({...a,status:t.target.value}),className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white",children:[e.jsx("option",{value:"active",children:"Hoạt động"}),e.jsx("option",{value:"inactive",children:"Tạm nghỉ"}),e.jsx("option",{value:"terminated",children:"Nghỉ việc"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Số tài khoản"}),e.jsx("input",{type:"text",value:a.bankAccount,onChange:t=>s({...a,bankAccount:t.target.value}),className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Ngân hàng"}),e.jsx("input",{type:"text",value:a.bankName,onChange:t=>s({...a,bankName:t.target.value}),className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Mã số thuế"}),e.jsx("input",{type:"text",value:a.taxCode,onChange:t=>s({...a,taxCode:t.target.value}),className:"w-full px-4 py-2 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-white"})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"submit",className:"flex-1 px-6 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg font-medium shadow-md hover:shadow-xl hover:from-blue-700 hover:to-indigo-700 transition-all inline-flex items-center justify-center gap-2",children:o?e.jsxs(e.Fragment,{children:[e.jsx(J,{className:"w-5 h-5"})," Lưu thay đổi"]}):e.jsxs(e.Fragment,{children:[e.jsx(p,{className:"w-5 h-5"})," Thêm nhân viên"]})}),e.jsxs("button",{type:"button",onClick:u,className:"px-6 py-3 bg-slate-200 dark:bg-slate-700 text-slate-700 dark:text-slate-300 rounded-lg font-medium hover:bg-slate-300 dark:hover:bg-slate-600 transition-colors inline-flex items-center gap-2",children:[e.jsx(O,{className:"w-5 h-5"})," Hủy"]})]})]})]})})]})};export{ie as default};
